{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE1NTkzMDYz", "number": 3248, "reviewThreads": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xN1QwNTo1MTo0MFrOD9I1sQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNC0xMlQxNzoyNzoxMFrOFxHycg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1NDM0NTQ1OnYy", "diffSide": "RIGHT", "path": "Essentials/src/config.yml", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xN1QwNTo1MTo0MFrOGWebzw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xN1QxMjoxOTo1NVrOGWgilw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjIyMDQ5NQ==", "bodyText": "Should specify that old kits will still work if enabled (for the time being)", "url": "https://github.com/EssentialsX/Essentials/pull/3248#discussion_r426220495", "createdAt": "2020-05-17T05:51:40Z", "author": {"login": "ice-fly"}, "path": "Essentials/src/config.yml", "diffHunk": "@@ -319,9 +319,17 @@ skip-used-one-time-kits-from-kit-list: false\n # Determines the functionality of the /createkit command.\n # If this is true, /createkit will give the user a link with the kit code.\n # If this is false, /createkit will add the kit to the kits.yml config file directly.\n-#\n+# Default is false.\n pastebin-createkit: false\n \n+# Determines if /createkit will generate kits with item serialization.\n+# By using serialization, there is added support for for complex items such as potions and shulker boxes.\n+# However, serialization removes the ability to edit kits by hand and kits *may* break in future versions.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e53deaa2091db2808db7e240b17248af8428e794"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjIyMTQyMg==", "bodyText": "Also, will this break the ability for kits to execute commands?", "url": "https://github.com/EssentialsX/Essentials/pull/3248#discussion_r426221422", "createdAt": "2020-05-17T06:05:14Z", "author": {"login": "ice-fly"}, "path": "Essentials/src/config.yml", "diffHunk": "@@ -319,9 +319,17 @@ skip-used-one-time-kits-from-kit-list: false\n # Determines the functionality of the /createkit command.\n # If this is true, /createkit will give the user a link with the kit code.\n # If this is false, /createkit will add the kit to the kits.yml config file directly.\n-#\n+# Default is false.\n pastebin-createkit: false\n \n+# Determines if /createkit will generate kits with item serialization.\n+# By using serialization, there is added support for for complex items such as potions and shulker boxes.\n+# However, serialization removes the ability to edit kits by hand and kits *may* break in future versions.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjIyMDQ5NQ=="}, "originalCommit": {"oid": "e53deaa2091db2808db7e240b17248af8428e794"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjI1NDk5OQ==", "bodyText": "Commands remain to work", "url": "https://github.com/EssentialsX/Essentials/pull/3248#discussion_r426254999", "createdAt": "2020-05-17T12:19:55Z", "author": {"login": "JRoy"}, "path": "Essentials/src/config.yml", "diffHunk": "@@ -319,9 +319,17 @@ skip-used-one-time-kits-from-kit-list: false\n # Determines the functionality of the /createkit command.\n # If this is true, /createkit will give the user a link with the kit code.\n # If this is false, /createkit will add the kit to the kits.yml config file directly.\n-#\n+# Default is false.\n pastebin-createkit: false\n \n+# Determines if /createkit will generate kits with item serialization.\n+# By using serialization, there is added support for for complex items such as potions and shulker boxes.\n+# However, serialization removes the ability to edit kits by hand and kits *may* break in future versions.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjIyMDQ5NQ=="}, "originalCommit": {"oid": "e53deaa2091db2808db7e240b17248af8428e794"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwNDMzNzU3OnYy", "diffSide": "RIGHT", "path": "Essentials/src/config.yml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxMjozNTo0MlrOG7eYlg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxMjozNTo0MlrOG7eYlg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTAxNjk4Mg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # Determines if /createkit will generate kits with item serialization.\n          \n          \n            \n            # By using serialization, there is added support for for complex items such as potions and shulker boxes.\n          \n          \n            \n            # **Warning**: This option only works on 1.15+ Paper servers and will bypass any custom serializers.\n          \n          \n            \n            # The old kit style and commands will still work and function as expected and are not planned to be removed.\n          \n          \n            \n            # If this is true, /createkit will use item serialization otherwise, it will use the regular item alias system.\n          \n          \n            \n            # Default is false.\n          \n          \n            \n            # Determines if /createkit will generate kits using NBT item serialization.\n          \n          \n            \n            # If this is true, /createkit will store items as NBT; otherwise, it will use Essentials' human-readable item format.\n          \n          \n            \n            # By using NBT serialization, /createkit can store items with complex metadata such as shulker boxes and weapons with custom attributes.\n          \n          \n            \n            # WARNING: This option only works on 1.15+ Paper servers, and it will bypass any custom serializers from other plugins such as Magic.\n          \n          \n            \n            # This option only affects /createkit - you can still create kits by hand in `kits.yml` using Essentials' human-readable item format.\n          \n          \n            \n            # Default is false.", "url": "https://github.com/EssentialsX/Essentials/pull/3248#discussion_r465016982", "createdAt": "2020-08-04T12:35:42Z", "author": {"login": "mdcfe"}, "path": "Essentials/src/config.yml", "diffHunk": "@@ -324,9 +324,17 @@ skip-used-one-time-kits-from-kit-list: false\n # Determines the functionality of the /createkit command.\n # If this is true, /createkit will give the user a link with the kit code.\n # If this is false, /createkit will add the kit to the kits.yml config file directly.\n-#\n+# Default is false.\n pastebin-createkit: false\n \n+# Determines if /createkit will generate kits with item serialization.\n+# By using serialization, there is added support for for complex items such as potions and shulker boxes.\n+# **Warning**: This option only works on 1.15+ Paper servers and will bypass any custom serializers.\n+# The old kit style and commands will still work and function as expected and are not planned to be removed.\n+# If this is true, /createkit will use item serialization otherwise, it will use the regular item alias system.\n+# Default is false.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b12ff883cf3c9eb805b696d2db6fb2442fe7df20"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwNDM0NTEyOnYy", "diffSide": "RIGHT", "path": "Essentials/src/messages.properties", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxMjozNzo1NFrOG7edMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxMjozNzo1NFrOG7edMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTAxODE2MA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            createKitUnsupported=\\u00a74Paper item serialization is enabled on a non-paper 1.15.2+ server! Falling back to regular item serializer.\n          \n          \n            \n            createKitUnsupported=\\u00a74NBT item serialization has been enabled, but this server is not running Paper 1.15.2+. Falling back to standard item serialization.", "url": "https://github.com/EssentialsX/Essentials/pull/3248#discussion_r465018160", "createdAt": "2020-08-04T12:37:54Z", "author": {"login": "mdcfe"}, "path": "Essentials/src/messages.properties", "diffHunk": "@@ -124,6 +124,7 @@ createkitCommandUsage=/<command> <kitname> <delay>\n createKitFailed=\\u00a74Error occurred whilst creating kit {0}.\n createKitSeparator=\\u00a7m-----------------------\n createKitSuccess=\\u00a76Created Kit: \\u00a7f{0}\\n\\u00a76Delay: \\u00a7f{1}\\n\\u00a76Link: \\u00a7f{2}\\n\\u00a76Copy contents in the link above into your kits.yml.\n+createKitUnsupported=\\u00a74Paper item serialization is enabled on a non-paper 1.15.2+ server! Falling back to regular item serializer.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b12ff883cf3c9eb805b696d2db6fb2442fe7df20"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwNDY5OTAxOnYy", "diffSide": "RIGHT", "path": "Essentials/src/com/earth2me/essentials/Kit.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxNDowMzoyM1rOG7h2WQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxNDowMzoyM1rOG7h2WQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTA3Mzc1Mw==", "bodyText": "Should be translated", "url": "https://github.com/EssentialsX/Essentials/pull/3248#discussion_r465073753", "createdAt": "2020-08-04T14:03:23Z", "author": {"login": "mdcfe"}, "path": "Essentials/src/com/earth2me/essentials/Kit.java", "diffHunk": "@@ -178,6 +182,15 @@ public boolean expandItems(final User user, final List<String> items) throws Exc\n                     continue;\n                 }\n \n+                if (kitItem.startsWith(\"@\")) {\n+                    if (ess.getSerializationProvider() == null) {\n+                        ess.getLogger().log(Level.WARNING, \"Cannot give kit item in kit \\\"\" + kitName + \"\\\" to user \" + user.getName() + \" as kit item requires Paper 1.15.2+ to deserialize.\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b12ff883cf3c9eb805b696d2db6fb2442fe7df20"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzg3MDQ5NDAyOnYy", "diffSide": "RIGHT", "path": "Essentials/src/main/java/com/earth2me/essentials/Essentials.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNC0xMlQxNzoyMDo1MFrOJHeSPg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNC0xMlQxNzoyNDowNFrOJHeaUg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMTgxNTk5OA==", "bodyText": "A non-primitive is by default null; this breaks the style around unnecessarily.", "url": "https://github.com/EssentialsX/Essentials/pull/3248#discussion_r611815998", "createdAt": "2021-04-12T17:20:50Z", "author": {"login": "Proximyst"}, "path": "Essentials/src/main/java/com/earth2me/essentials/Essentials.java", "diffHunk": "@@ -144,6 +146,7 @@\n     private transient PotionMetaProvider potionMetaProvider;\n     private transient ServerStateProvider serverStateProvider;\n     private transient ContainerProvider containerProvider;\n+    private transient SerializationProvider serializationProvider = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ae508dc46697db073dccbdc196ecdbdca3e4d03"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMTgxODA2Ng==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                private transient SerializationProvider serializationProvider = null;\n          \n          \n            \n                private transient SerializationProvider serializationProvider;", "url": "https://github.com/EssentialsX/Essentials/pull/3248#discussion_r611818066", "createdAt": "2021-04-12T17:24:04Z", "author": {"login": "JRoy"}, "path": "Essentials/src/main/java/com/earth2me/essentials/Essentials.java", "diffHunk": "@@ -144,6 +146,7 @@\n     private transient PotionMetaProvider potionMetaProvider;\n     private transient ServerStateProvider serverStateProvider;\n     private transient ContainerProvider containerProvider;\n+    private transient SerializationProvider serializationProvider = null;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMTgxNTk5OA=="}, "originalCommit": {"oid": "3ae508dc46697db073dccbdc196ecdbdca3e4d03"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzg3MDQ5ODk1OnYy", "diffSide": "RIGHT", "path": "Essentials/src/main/java/com/earth2me/essentials/commands/Commandcreatekit.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNC0xMlQxNzoyMjowM1rOJHeVVQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNC0xMlQxNzoyMjowM1rOJHeVVQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMTgxNjc4OQ==", "bodyText": "Perhaps rename this as it may not be unique to Paper forever? E.g. useSerializationProvider", "url": "https://github.com/EssentialsX/Essentials/pull/3248#discussion_r611816789", "createdAt": "2021-04-12T17:22:03Z", "author": {"login": "Proximyst"}, "path": "Essentials/src/main/java/com/earth2me/essentials/commands/Commandcreatekit.java", "diffHunk": "@@ -60,9 +61,22 @@ public void run(final Server server, final User user, final String commandLabel,\n         final String kitname = args[0];\n         final ItemStack[] items = user.getBase().getInventory().getContents();\n         final List<String> list = new ArrayList<>();\n-        for (final ItemStack is : items) {\n+\n+        boolean usePaperSerial = ess.getSettings().isUseBetterKits();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ae508dc46697db073dccbdc196ecdbdca3e4d03"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzg3MDUwMTA2OnYy", "diffSide": "RIGHT", "path": "Essentials/src/main/resources/config.yml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNC0xMlQxNzoyMjozNFrOJHeWpw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNC0xMlQxNzoyNjo1MVrOJHeh_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMTgxNzEyNw==", "bodyText": "Same as above: perhaps rename this to use-nbt-serialization-in-createkit. The note in the comment specifies that it is Paper-specific.", "url": "https://github.com/EssentialsX/Essentials/pull/3248#discussion_r611817127", "createdAt": "2021-04-12T17:22:34Z", "author": {"login": "Proximyst"}, "path": "Essentials/src/main/resources/config.yml", "diffHunk": "@@ -331,9 +331,18 @@ kit-auto-equip: false\n # Determines the functionality of the /createkit command.\n # If this is true, /createkit will give the user a link with the kit code.\n # If this is false, /createkit will add the kit to the kits.yml config file directly.\n-#\n+# Default is false.\n pastebin-createkit: false\n \n+# Determines if /createkit will generate kits using NBT item serialization.\n+# If this is true, /createkit will store items as NBT; otherwise, it will use Essentials' human-readable item format.\n+# By using NBT serialization, /createkit can store items with complex metadata such as shulker boxes and weapons with custom attributes.\n+# WARNING: This option only works on 1.15+ Paper servers, and it will bypass any custom serializers from other plugins such as Magic.\n+# WARNING: When creating kits via /createkit with this option enabled, you will not be able to downgrade your server with these kit items.\n+# This option only affects /createkit - you can still create kits by hand in `kits.yml` using Essentials' human-readable item format.\n+# Default is false.\n+use-paper-serialization-in-createkit: false", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ae508dc46697db073dccbdc196ecdbdca3e4d03"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMTgyMDAyOQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            use-paper-serialization-in-createkit: false\n          \n          \n            \n            use-nbt-serialization-in-createkit: false", "url": "https://github.com/EssentialsX/Essentials/pull/3248#discussion_r611820029", "createdAt": "2021-04-12T17:26:51Z", "author": {"login": "JRoy"}, "path": "Essentials/src/main/resources/config.yml", "diffHunk": "@@ -331,9 +331,18 @@ kit-auto-equip: false\n # Determines the functionality of the /createkit command.\n # If this is true, /createkit will give the user a link with the kit code.\n # If this is false, /createkit will add the kit to the kits.yml config file directly.\n-#\n+# Default is false.\n pastebin-createkit: false\n \n+# Determines if /createkit will generate kits using NBT item serialization.\n+# If this is true, /createkit will store items as NBT; otherwise, it will use Essentials' human-readable item format.\n+# By using NBT serialization, /createkit can store items with complex metadata such as shulker boxes and weapons with custom attributes.\n+# WARNING: This option only works on 1.15+ Paper servers, and it will bypass any custom serializers from other plugins such as Magic.\n+# WARNING: When creating kits via /createkit with this option enabled, you will not be able to downgrade your server with these kit items.\n+# This option only affects /createkit - you can still create kits by hand in `kits.yml` using Essentials' human-readable item format.\n+# Default is false.\n+use-paper-serialization-in-createkit: false", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMTgxNzEyNw=="}, "originalCommit": {"oid": "3ae508dc46697db073dccbdc196ecdbdca3e4d03"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzg3MDUwMjcwOnYy", "diffSide": "RIGHT", "path": "Essentials/src/main/resources/messages.properties", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNC0xMlQxNzoyMjo1N1rOJHeXnA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNC0xMlQxNzoyMjo1N1rOJHeXnA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMTgxNzM3Mg==", "bodyText": "Paper 1.15+ or Paper 1.15.2+? Config comment or message is incorrect.", "url": "https://github.com/EssentialsX/Essentials/pull/3248#discussion_r611817372", "createdAt": "2021-04-12T17:22:57Z", "author": {"login": "Proximyst"}, "path": "Essentials/src/main/resources/messages.properties", "diffHunk": "@@ -130,6 +130,7 @@ createkitCommandUsage=/<command> <kitname> <delay>\n createKitFailed=\\u00a74Error occurred whilst creating kit {0}.\n createKitSeparator=\\u00a7m-----------------------\n createKitSuccess=\\u00a76Created Kit: \\u00a7f{0}\\n\\u00a76Delay: \\u00a7f{1}\\n\\u00a76Link: \\u00a7f{2}\\n\\u00a76Copy contents in the link above into your kits.yml.\n+createKitUnsupported=\\u00a74NBT item serialization has been enabled, but this server is not running Paper 1.15.2+. Falling back to standard item serialization.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ae508dc46697db073dccbdc196ecdbdca3e4d03"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzg3MDUxMjQzOnYy", "diffSide": "RIGHT", "path": "Essentials/src/main/resources/config.yml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNC0xMlQxNzoyNToxN1rOJHedkA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNC0xMlQxNzoyNToxN1rOJHedkA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMTgxODg5Ng==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # WARNING: This option only works on 1.15+ Paper servers, and it will bypass any custom serializers from other plugins such as Magic.\n          \n          \n            \n            # WARNING: This option only works on 1.15.2+ Paper servers, and it will bypass any custom serializers from other plugins such as Magic.", "url": "https://github.com/EssentialsX/Essentials/pull/3248#discussion_r611818896", "createdAt": "2021-04-12T17:25:17Z", "author": {"login": "JRoy"}, "path": "Essentials/src/main/resources/config.yml", "diffHunk": "@@ -331,9 +331,18 @@ kit-auto-equip: false\n # Determines the functionality of the /createkit command.\n # If this is true, /createkit will give the user a link with the kit code.\n # If this is false, /createkit will add the kit to the kits.yml config file directly.\n-#\n+# Default is false.\n pastebin-createkit: false\n \n+# Determines if /createkit will generate kits using NBT item serialization.\n+# If this is true, /createkit will store items as NBT; otherwise, it will use Essentials' human-readable item format.\n+# By using NBT serialization, /createkit can store items with complex metadata such as shulker boxes and weapons with custom attributes.\n+# WARNING: This option only works on 1.15+ Paper servers, and it will bypass any custom serializers from other plugins such as Magic.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ae508dc46697db073dccbdc196ecdbdca3e4d03"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzg3MDUxNDI5OnYy", "diffSide": "RIGHT", "path": "Essentials/src/main/java/com/earth2me/essentials/commands/Commandcreatekit.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNC0xMlQxNzoyNTo0MVrOJHeeuA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNC0xMlQxNzoyNTo0MVrOJHeeuA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMTgxOTE5Mg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    boolean usePaperSerial = ess.getSettings().isUseBetterKits();\n          \n          \n            \n                    boolean useSerializationProvider = ess.getSettings().isUseBetterKits();", "url": "https://github.com/EssentialsX/Essentials/pull/3248#discussion_r611819192", "createdAt": "2021-04-12T17:25:41Z", "author": {"login": "JRoy"}, "path": "Essentials/src/main/java/com/earth2me/essentials/commands/Commandcreatekit.java", "diffHunk": "@@ -60,9 +61,22 @@ public void run(final Server server, final User user, final String commandLabel,\n         final String kitname = args[0];\n         final ItemStack[] items = user.getBase().getInventory().getContents();\n         final List<String> list = new ArrayList<>();\n-        for (final ItemStack is : items) {\n+\n+        boolean usePaperSerial = ess.getSettings().isUseBetterKits();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ae508dc46697db073dccbdc196ecdbdca3e4d03"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzg3MDUxNzc2OnYy", "diffSide": "RIGHT", "path": "Essentials/src/main/java/com/earth2me/essentials/commands/Commandcreatekit.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNC0xMlQxNzoyNjoxOVrOJHegpw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNC0xMlQxNzoyNjoxOVrOJHegpw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMTgxOTY4Nw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if (usePaperSerial && ess.getSerializationProvider() == null) {\n          \n          \n            \n                        ess.showError(user.getSource(), new Exception(tl(\"createKitUnsupported\")), commandLabel);\n          \n          \n            \n                        usePaperSerial = false;\n          \n          \n            \n                    if (useSerializationProvider && ess.getSerializationProvider() == null) {\n          \n          \n            \n                        ess.showError(user.getSource(), new Exception(tl(\"createKitUnsupported\")), commandLabel);\n          \n          \n            \n                        useSerializationProvider = false;", "url": "https://github.com/EssentialsX/Essentials/pull/3248#discussion_r611819687", "createdAt": "2021-04-12T17:26:19Z", "author": {"login": "JRoy"}, "path": "Essentials/src/main/java/com/earth2me/essentials/commands/Commandcreatekit.java", "diffHunk": "@@ -60,9 +61,22 @@ public void run(final Server server, final User user, final String commandLabel,\n         final String kitname = args[0];\n         final ItemStack[] items = user.getBase().getInventory().getContents();\n         final List<String> list = new ArrayList<>();\n-        for (final ItemStack is : items) {\n+\n+        boolean usePaperSerial = ess.getSettings().isUseBetterKits();\n+\n+        if (usePaperSerial && ess.getSerializationProvider() == null) {\n+            ess.showError(user.getSource(), new Exception(tl(\"createKitUnsupported\")), commandLabel);\n+            usePaperSerial = false;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ae508dc46697db073dccbdc196ecdbdca3e4d03"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzg3MDUxODQ5OnYy", "diffSide": "RIGHT", "path": "Essentials/src/main/java/com/earth2me/essentials/commands/Commandcreatekit.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNC0xMlQxNzoyNjoyN1rOJHehEQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNC0xMlQxNzoyNjoyN1rOJHehEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMTgxOTc5Mw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            if (usePaperSerial) {\n          \n          \n            \n                            if (useSerializationProvider) {", "url": "https://github.com/EssentialsX/Essentials/pull/3248#discussion_r611819793", "createdAt": "2021-04-12T17:26:27Z", "author": {"login": "JRoy"}, "path": "Essentials/src/main/java/com/earth2me/essentials/commands/Commandcreatekit.java", "diffHunk": "@@ -60,9 +61,22 @@ public void run(final Server server, final User user, final String commandLabel,\n         final String kitname = args[0];\n         final ItemStack[] items = user.getBase().getInventory().getContents();\n         final List<String> list = new ArrayList<>();\n-        for (final ItemStack is : items) {\n+\n+        boolean usePaperSerial = ess.getSettings().isUseBetterKits();\n+\n+        if (usePaperSerial && ess.getSerializationProvider() == null) {\n+            ess.showError(user.getSource(), new Exception(tl(\"createKitUnsupported\")), commandLabel);\n+            usePaperSerial = false;\n+        }\n+\n+        for (ItemStack is : items) {\n             if (is != null && is.getType() != null && is.getType() != Material.AIR) {\n-                final String serialized = ess.getItemDb().serialize(is);\n+                final String serialized;\n+                if (usePaperSerial) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ae508dc46697db073dccbdc196ecdbdca3e4d03"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzg3MDUyMTQ2OnYy", "diffSide": "RIGHT", "path": "Essentials/src/main/java/com/earth2me/essentials/Settings.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNC0xMlQxNzoyNzoxMVrOJHejAQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNC0xMlQxNzoyNzoxMVrOJHejAQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMTgyMDI4OQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    return config.getBoolean(\"use-paper-serialization-in-createkit\", false);\n          \n          \n            \n                    return config.getBoolean(\"use-nbt-serialization-in-createkit\", false);", "url": "https://github.com/EssentialsX/Essentials/pull/3248#discussion_r611820289", "createdAt": "2021-04-12T17:27:11Z", "author": {"login": "JRoy"}, "path": "Essentials/src/main/java/com/earth2me/essentials/Settings.java", "diffHunk": "@@ -1645,6 +1645,11 @@ public boolean isPastebinCreateKit() {\n         return config.getBoolean(\"pastebin-createkit\", false);\n     }\n \n+    @Override\n+    public boolean isUseBetterKits() {\n+        return config.getBoolean(\"use-paper-serialization-in-createkit\", false);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ae508dc46697db073dccbdc196ecdbdca3e4d03"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4675, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}