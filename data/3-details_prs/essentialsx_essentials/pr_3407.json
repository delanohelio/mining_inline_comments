{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM4ODA5MjI5", "number": 3407, "title": "Provider Rework", "bodyText": "Moved providers around, made them make sense, profit", "createdAt": "2020-06-23T20:43:41Z", "url": "https://github.com/EssentialsX/Essentials/pull/3407", "merged": true, "mergeCommit": {"oid": "4a471f0a93188070189af2f0aad4a2175ecc10e7"}, "closed": true, "closedAt": "2020-06-24T21:01:00Z", "author": {"login": "JRoy"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABctLgRogH2gAyNDM4ODA5MjI5OjI0ZGQyN2VkODc1ZjVlN2Q4NGE0YzUxZjFjM2U4MTcxNzRmYTQ2Y2U=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcugg9vAFqTQzNzAwMjU4MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "24dd27ed875f5e7d84a4c51f1c3e817174fa46ce", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/24dd27ed875f5e7d84a4c51f1c3e817174fa46ce", "committedDate": "2020-06-20T17:56:53Z", "message": "progress n shit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e81ee0b1c730850941697472b0c5d9fcfcd75509", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/e81ee0b1c730850941697472b0c5d9fcfcd75509", "committedDate": "2020-06-23T20:40:25Z", "message": "Finish up provider stuff"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "21f6a8e80ca6fdaf3079dc4d414a57be3d679fed", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/21f6a8e80ca6fdaf3079dc4d414a57be3d679fed", "committedDate": "2020-06-23T22:06:14Z", "message": "Remove tryProvider, it's utterly useless"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "099c56f777692462c12da00bed2550af1286cdb1", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/099c56f777692462c12da00bed2550af1286cdb1", "committedDate": "2020-06-23T22:06:31Z", "message": "Something's gone terribly wrong!"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2MjA3NjI3", "url": "https://github.com/EssentialsX/Essentials/pull/3407#pullrequestreview-436207627", "createdAt": "2020-06-23T22:38:16Z", "commit": {"oid": "099c56f777692462c12da00bed2550af1286cdb1"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QyMjozODoxNlrOGn8-EQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QyMzoxMzozNFrOGn9q6A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDU0NjU3Nw==", "bodyText": "Bit verbose, we probably just need the stack trace\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        logger.severe(\"Something's gone terribly wrong!\");\n          \n          \n            \n                        e.printStackTrace();\n          \n          \n            \n                        logger.severe(\"Something's gone terribly wrong!\");\n          \n          \n            \n                        e.printStackTrace();", "url": "https://github.com/EssentialsX/Essentials/pull/3407#discussion_r444546577", "createdAt": "2020-06-23T22:38:16Z", "author": {"login": "pop4959"}, "path": "providers/NMSReflectionProvider/src/net/ess3/nms/refl/providers/ReflServerStateProvider.java", "diffHunk": "@@ -0,0 +1,47 @@\n+package net.ess3.nms.refl.providers;\n+\n+import net.ess3.nms.refl.ReflUtil;\n+import net.ess3.provider.ServerStateProvider;\n+\n+import java.lang.invoke.MethodHandle;\n+import java.lang.invoke.MethodHandles;\n+import java.lang.invoke.MethodType;\n+import java.util.logging.Logger;\n+\n+public class ReflServerStateProvider implements ServerStateProvider {\n+    private final Object nmsServer;\n+    private final MethodHandle nmsIsRunning;\n+\n+    public ReflServerStateProvider(Logger logger) {\n+        Object serverObject = null;\n+        MethodHandle isRunning = null;\n+        Class<?> nmsClass = ReflUtil.getNMSClass(\"MinecraftServer\");\n+        try {\n+            serverObject = nmsClass.getMethod(\"getServer\").invoke(null);\n+            isRunning = MethodHandles.lookup().findVirtual(nmsClass, \"isRunning\", MethodType.methodType(boolean.class));\n+        } catch (Exception e) {\n+            logger.severe(\"Something's gone terribly wrong!\");\n+            e.printStackTrace();\n+            logger.severe(\"Something's gone terribly wrong!\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "099c56f777692462c12da00bed2550af1286cdb1"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDU0ODUwNA==", "bodyText": "\ud83d\ude1b\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            </project>\n          \n          \n            \n            </project>", "url": "https://github.com/EssentialsX/Essentials/pull/3407#discussion_r444548504", "createdAt": "2020-06-23T22:44:15Z", "author": {"login": "pop4959"}, "path": "providers/PaperProvider/pom.xml", "diffHunk": "@@ -10,13 +10,25 @@\n     </parent>\n     <modelVersion>4.0.0</modelVersion>\n \n-    <artifactId>FlattenedProvider</artifactId>\n+    <artifactId>PaperProvider</artifactId>\n+\n+    <repositories>\n+        <repository>\n+            <id>paper-repo</id>\n+            <url>https://papermc.io/repo/repository/maven-public/</url>\n+        </repository>\n+    </repositories>\n \n     <dependencies>\n         <dependency>\n             <groupId>net.ess3</groupId>\n-            <artifactId>NMSProvider</artifactId>\n+            <artifactId>BaseProviders</artifactId>\n             <version>2.17.2</version>\n         </dependency>\n+        <dependency>\n+            <groupId>com.destroystokyo.paper</groupId>\n+            <artifactId>paper-api</artifactId>\n+            <version>1.15.2-R0.1-SNAPSHOT</version>\n+        </dependency>\n     </dependencies>\n </project>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "099c56f777692462c12da00bed2550af1286cdb1"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDU1MDc0MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            </project>\n          \n          \n            \n            </project>", "url": "https://github.com/EssentialsX/Essentials/pull/3407#discussion_r444550741", "createdAt": "2020-06-23T22:50:49Z", "author": {"login": "pop4959"}, "path": "providers/BaseProviders/pom.xml", "diffHunk": "@@ -10,5 +10,5 @@\n     </parent>\n     <modelVersion>4.0.0</modelVersion>\n \n-    <artifactId>NMSProvider</artifactId>\n+    <artifactId>BaseProviders</artifactId>\n </project>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "099c56f777692462c12da00bed2550af1286cdb1"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDU1MzI3NQ==", "bodyText": "Nitpick, but should be either \"Flat\" or \"Flattening\", not something in between", "url": "https://github.com/EssentialsX/Essentials/pull/3407#discussion_r444553275", "createdAt": "2020-06-23T22:58:42Z", "author": {"login": "pop4959"}, "path": "providers/BaseProviders/src/net/ess3/provider/providers/FlatSpawnEggProvider.java", "diffHunk": "@@ -18,13 +17,12 @@ public EntityType getSpawnedType(ItemStack eggItem) throws IllegalArgumentExcept\n         String materialName = eggItem.getType().name();\n         if (materialName.contains(\"_SPAWN_EGG\")) {\n             return EntityType.valueOf(materialName.replace(\"_SPAWN_EGG\", \"\"));\n-        } else {\n-            throw new IllegalArgumentException(\"Not a spawn egg\");\n         }\n+        throw new IllegalArgumentException(\"Not a spawn egg\");\n     }\n \n     @Override\n     public String getDescription() {\n-        return \"1.13+ flat spawn egg provider\";\n+        return \"1.13+ Flatting Spawn Egg Provider\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "099c56f777692462c12da00bed2550af1286cdb1"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDU1NjUyNw==", "bodyText": "Pretty sure private was removed here on accident?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                Map<EntityType, String> entityToDisplayName = ImmutableMap.<EntityType, String>builder()\n          \n          \n            \n                private Map<EntityType, String> entityToDisplayName = ImmutableMap.<EntityType, String>builder()", "url": "https://github.com/EssentialsX/Essentials/pull/3407#discussion_r444556527", "createdAt": "2020-06-23T23:08:24Z", "author": {"login": "pop4959"}, "path": "providers/BaseProviders/src/net/ess3/provider/SpawnerProvider.java", "diffHunk": "@@ -1,17 +1,19 @@\n-package net.ess3.nms;\n+package net.ess3.provider;\n \n import com.google.common.collect.ImmutableMap;\n-import net.ess3.providers.Provider;\n import org.bukkit.ChatColor;\n-import org.bukkit.Material;\n import org.bukkit.entity.EntityType;\n import org.bukkit.inventory.ItemStack;\n import org.bukkit.inventory.meta.ItemMeta;\n \n import java.util.Map;\n \n-public abstract class SpawnerProvider implements Provider {\n-    private Map<EntityType, String> entityToDisplayName = ImmutableMap.<EntityType, String>builder()\n+public interface SpawnerProvider extends Provider {\n+    ItemStack setEntityType(ItemStack is, EntityType type) throws IllegalArgumentException;\n+\n+    EntityType getEntityType(ItemStack is) throws IllegalArgumentException;\n+\n+    Map<EntityType, String> entityToDisplayName = ImmutableMap.<EntityType, String>builder()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "099c56f777692462c12da00bed2550af1286cdb1"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDU1ODA1Ng==", "bodyText": "Name suggestions: \"Base\", \"Reflection\", \"Paper\", to be less redundant, since this is all already in providers/", "url": "https://github.com/EssentialsX/Essentials/pull/3407#discussion_r444558056", "createdAt": "2020-06-23T23:13:34Z", "author": {"login": "pop4959"}, "path": "pom.xml", "diffHunk": "@@ -49,11 +49,9 @@\n         <module>EssentialsProtect</module>\n         <module>EssentialsSpawn</module>\n         <module>EssentialsXMPP</module>\n-        <module>nms/NMSProvider</module>\n-        <module>nms/UpdatedMetaProvider</module>\n-        <module>nms/LegacyProvider</module>\n-        <module>nms/ReflectionProvider</module>\n-        <module>nms/FlattenedProvider</module>\n+        <module>providers/BaseProviders</module>\n+        <module>providers/NMSReflectionProvider</module>\n+        <module>providers/PaperProvider</module>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "099c56f777692462c12da00bed2550af1286cdb1"}, "originalPosition": 11}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5777071a1a2fdbb2f61d228b962e70483fbac901", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/5777071a1a2fdbb2f61d228b962e70483fbac901", "committedDate": "2020-06-24T01:55:37Z", "message": "Review changes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2MjczMDI5", "url": "https://github.com/EssentialsX/Essentials/pull/3407#pullrequestreview-436273029", "createdAt": "2020-06-24T01:58:29Z", "commit": {"oid": "5777071a1a2fdbb2f61d228b962e70483fbac901"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2OTc1MzI0", "url": "https://github.com/EssentialsX/Essentials/pull/3407#pullrequestreview-436975324", "createdAt": "2020-06-24T20:18:06Z", "commit": {"oid": "5777071a1a2fdbb2f61d228b962e70483fbac901"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3MDAyNTgx", "url": "https://github.com/EssentialsX/Essentials/pull/3407#pullrequestreview-437002581", "createdAt": "2020-06-24T20:59:34Z", "commit": {"oid": "5777071a1a2fdbb2f61d228b962e70483fbac901"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4525, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}