{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg3NTYwMTM1", "number": 3066, "title": "Add config option to make currency symbol as a suffix", "bodyText": "Adds currency-symbol-suffix config option to move the currency symbol as a suffix rather than a prefix\nCloses #2577", "createdAt": "2020-03-13T02:35:02Z", "url": "https://github.com/EssentialsX/Essentials/pull/3066", "merged": true, "mergeCommit": {"oid": "b7eec09307d8d65d0cbbe54180d5c77138cf65a1"}, "closed": true, "closedAt": "2020-04-25T12:12:56Z", "author": {"login": "JRoy"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcNG9tiAH2gAyMzg3NTYwMTM1OmE2MTZjMGUzYmVhYzkwZmRiNzE3YmViMDk1Y2U1Mjc2YmRjNGE4NzM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcbFAKAAFqTQwMDM4Nzc4Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a616c0e3beac90fdb717beb095ce5276bdc4a873", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/a616c0e3beac90fdb717beb095ce5276bdc4a873", "committedDate": "2020-03-13T02:33:56Z", "message": "Add config option to make currency symbol as a suffix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0MDkzOTUy", "url": "https://github.com/EssentialsX/Essentials/pull/3066#pullrequestreview-374093952", "createdAt": "2020-03-13T07:30:56Z", "commit": {"oid": "a616c0e3beac90fdb717beb095ce5276bdc4a873"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0NDYwNzYz", "url": "https://github.com/EssentialsX/Essentials/pull/3066#pullrequestreview-384460763", "createdAt": "2020-03-31T07:19:55Z", "commit": {"oid": "a616c0e3beac90fdb717beb095ce5276bdc4a873"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQwNzoxOTo1NVrOF-IXFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQwNzoxOTo1NVrOF-IXFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDY5MzAxNQ==", "bodyText": "This feels messy. I'm trying to think about the right way to get out of this (configuration depending on configuration, liable to break when the one is changed) without torching existing configurations.", "url": "https://github.com/EssentialsX/Essentials/pull/3066#discussion_r400693015", "createdAt": "2020-03-31T07:19:55Z", "author": {"login": "Ichbinjoe"}, "path": "Essentials/src/com/earth2me/essentials/Kit.java", "diffHunk": "@@ -153,8 +153,8 @@ public void expandItems(final User user, final List<String> items) throws Except\n             boolean spew = false;\n             final boolean allowUnsafe = ess.getSettings().allowUnsafeEnchantments();\n             for (String kitItem : output.getLines()) {\n-                if (kitItem.startsWith(ess.getSettings().getCurrencySymbol())) {\n-                    BigDecimal value = new BigDecimal(kitItem.substring(ess.getSettings().getCurrencySymbol().length()).trim());\n+                if (!ess.getSettings().getCurrencySuffix() ? kitItem.startsWith(ess.getSettings().getCurrencySymbol()) : kitItem.endsWith(ess.getSettings().getCurrencySymbol())) {\n+                    BigDecimal value = ess.getSettings().getCurrencySuffix() ? new BigDecimal(kitItem.substring(0, ess.getSettings().getCurrencySymbol().length()).trim()) : new BigDecimal(kitItem.substring(ess.getSettings().getCurrencySymbol().length()).trim());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a616c0e3beac90fdb717beb095ce5276bdc4a873"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "45d7e1ec209eccf385c2ed2506de01677d9f3438", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/45d7e1ec209eccf385c2ed2506de01677d9f3438", "committedDate": "2020-04-01T02:08:08Z", "message": "Cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c8ae976fe7c2a4ed517036655c5c5a1904b776ba", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/c8ae976fe7c2a4ed517036655c5c5a1904b776ba", "committedDate": "2020-04-01T02:09:29Z", "message": "Merge branch '2.x' into feature/money-suffix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk5MjA4NDg5", "url": "https://github.com/EssentialsX/Essentials/pull/3066#pullrequestreview-399208489", "createdAt": "2020-04-23T15:20:21Z", "commit": {"oid": "c8ae976fe7c2a4ed517036655c5c5a1904b776ba"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxNToyMDoyMVrOGKt0qQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxNToyMjozOVrOGKt8Lg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzg4OTcwNQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # Enable this to make the currency symbol appear behind the currency amount rather than in-front.\n          \n          \n            \n            # For example, the euro symbol typically appears after the current amount\n          \n          \n            \n            # Enable this to make the currency symbol appear at the end of the amount rather than at the start.\n          \n          \n            \n            # For example, the euro symbol typically appears after the current amount.", "url": "https://github.com/EssentialsX/Essentials/pull/3066#discussion_r413889705", "createdAt": "2020-04-23T15:20:21Z", "author": {"login": "mdcfe"}, "path": "Essentials/src/config.yml", "diffHunk": "@@ -656,6 +656,10 @@ command-costs:\n # such as accented letters, you MUST save the file as UTF-8, not ANSI.\n currency-symbol: '$'\n \n+# Enable this to make the currency symbol appear behind the currency amount rather than in-front.\n+# For example, the euro symbol typically appears after the current amount", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c8ae976fe7c2a4ed517036655c5c5a1904b776ba"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzg5MDQzMg==", "bodyText": "I agree this should be isCurrencySymbolSuffixed or similar.", "url": "https://github.com/EssentialsX/Essentials/pull/3066#discussion_r413890432", "createdAt": "2020-04-23T15:21:10Z", "author": {"login": "mdcfe"}, "path": "Essentials/src/com/earth2me/essentials/Settings.java", "diffHunk": "@@ -677,6 +677,11 @@ public String getCurrencySymbol() {\n         return config.getString(\"currency-symbol\", \"$\").concat(\"$\").substring(0, 1).replaceAll(\"[0-9]\", \"$\");\n     }\n \n+    @Override\n+    public boolean getCurrencySuffix() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c8ae976fe7c2a4ed517036655c5c5a1904b776ba"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzg5MTYzMA==", "bodyText": "Is it worth extracting the check here out to a includesCurrencySymbol method?", "url": "https://github.com/EssentialsX/Essentials/pull/3066#discussion_r413891630", "createdAt": "2020-04-23T15:22:39Z", "author": {"login": "mdcfe"}, "path": "Essentials/src/com/earth2me/essentials/Kit.java", "diffHunk": "@@ -152,10 +152,13 @@ public boolean expandItems(final User user, final List<String> items) throws Exc\n \n             boolean spew = false;\n             final boolean allowUnsafe = ess.getSettings().allowUnsafeEnchantments();\n+            final boolean currencyIsSuffix = ess.getSettings().getCurrencySuffix();\n+            final String currencySymbol = ess.getSettings().getCurrencySymbol();\n             List<ItemStack> itemList = new ArrayList<>();\n             for (String kitItem : output.getLines()) {\n-                if (kitItem.startsWith(ess.getSettings().getCurrencySymbol())) {\n-                    BigDecimal value = new BigDecimal(kitItem.substring(ess.getSettings().getCurrencySymbol().length()).trim());\n+                if (!currencyIsSuffix ? kitItem.startsWith(ess.getSettings().getCurrencySymbol()) : kitItem.endsWith(ess.getSettings().getCurrencySymbol())) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c8ae976fe7c2a4ed517036655c5c5a1904b776ba"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f03f4938a076a3d94d16fe2dbe855a07d72ae26", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/9f03f4938a076a3d94d16fe2dbe855a07d72ae26", "committedDate": "2020-04-23T17:39:03Z", "message": "Update Essentials/src/config.yml\n\nCo-Authored-By: md678685 <1917406+md678685@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e1e593a30f8f25728e89ab0e993c82f52b2c3c7e", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/e1e593a30f8f25728e89ab0e993c82f52b2c3c7e", "committedDate": "2020-04-23T18:15:03Z", "message": "Rename method to isCurrencySymbolSuffixed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "23cb6b4d357ae686339e986b3df83bf9bce558d2", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/23cb6b4d357ae686339e986b3df83bf9bce558d2", "committedDate": "2020-04-23T18:16:17Z", "message": "Merge branch '2.x' into feature/money-suffix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce7a2142b97afffefa260903e78cd175488e0c6e", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/ce7a2142b97afffefa260903e78cd175488e0c6e", "committedDate": "2020-04-23T18:18:45Z", "message": "Merge branch '2.x' into feature/money-suffix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwMzg3Nzg2", "url": "https://github.com/EssentialsX/Essentials/pull/3066#pullrequestreview-400387786", "createdAt": "2020-04-25T12:11:44Z", "commit": {"oid": "ce7a2142b97afffefa260903e78cd175488e0c6e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4802, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}