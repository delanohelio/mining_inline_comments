{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ0ODQyMDk3", "number": 3858, "title": "Fix behaviour of /list when showing real names", "bodyText": "Information\nThis PR fixes #3790, where in some cases real-names-on-list appends the player's real name to the /list output when they don't have a nickname.\nDetails\nProposed fix:\nThe current real-names-on-list implementation uses the displayname of the user, which causes the real name check to fail if prefixes or suffixes have been added to the displayname. This PR limits the real name check to just the user's nickname instead of using the whole displayname.\nEnvironments tested:\n\n Latest Paper Version (any OS, any Java 8+ version)", "createdAt": "2020-12-23T14:15:50Z", "url": "https://github.com/EssentialsX/Essentials/pull/3858", "merged": true, "mergeCommit": {"oid": "b84aaa1dabdac52a9fe3e6f3357fe41a0d9cd5fe"}, "closed": true, "closedAt": "2021-01-01T00:14:40Z", "author": {"login": "triagonal"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdo_uEugH2gAyNTQ0ODQyMDk3OjFiNmYyYjg3NDM2NTU1MzM4ZjVkMGRiYWZmMmM4MTEwYTVkN2I0OGQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdrtIENgH2gAyNTQ0ODQyMDk3OjVhZjU4MzVjODlkZmRjOGRkNDM3ZWE2MTMxMzA0NzhlMmU4N2ZjZDQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1b6f2b87436555338f5d0dbaff2c8110a5d7b48d", "author": {"user": {"login": "triagonal", "name": "triagonal"}}, "url": "https://github.com/EssentialsX/Essentials/commit/1b6f2b87436555338f5d0dbaff2c8110a5d7b48d", "committedDate": "2020-12-23T14:08:33Z", "message": "compare by nickname instead of displayname in /list output"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1c5e2ea51eb5a2e3bdfb541bb41361820e2efb53", "author": {"user": {"login": "triagonal", "name": "triagonal"}}, "url": "https://github.com/EssentialsX/Essentials/commit/1c5e2ea51eb5a2e3bdfb541bb41361820e2efb53", "committedDate": "2020-12-23T14:18:52Z", "message": "correct codestyle"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4MDQ4NjA5", "url": "https://github.com/EssentialsX/Essentials/pull/3858#pullrequestreview-558048609", "createdAt": "2020-12-23T16:22:30Z", "commit": {"oid": "1c5e2ea51eb5a2e3bdfb541bb41361820e2efb53"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4MTk2NzYw", "url": "https://github.com/EssentialsX/Essentials/pull/3858#pullrequestreview-558196760", "createdAt": "2020-12-23T19:44:33Z", "commit": {"oid": "1c5e2ea51eb5a2e3bdfb541bb41361820e2efb53"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4NjcyNDgy", "url": "https://github.com/EssentialsX/Essentials/pull/3858#pullrequestreview-558672482", "createdAt": "2020-12-24T15:55:03Z", "commit": {"oid": "1c5e2ea51eb5a2e3bdfb541bb41361820e2efb53"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNFQxNTo1NTowM1rOILKbOQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNFQxNTo1NTowM1rOILKbOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODU3NjA1Nw==", "bodyText": "Shouldn't stripFormat be used since stripEssentialsFormat does untranslated color codes afaik?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        final String strippedNick = FormatUtil.stripEssentialsFormat(user.getNickname());\n          \n          \n            \n                        final String strippedNick = FormatUtil.stripFormat(user.getNickname());", "url": "https://github.com/EssentialsX/Essentials/pull/3858#discussion_r548576057", "createdAt": "2020-12-24T15:55:03Z", "author": {"login": "JRoy"}, "path": "Essentials/src/main/java/com/earth2me/essentials/PlayerList.java", "diffHunk": "@@ -37,7 +37,9 @@ public static String listUsers(final IEssentials ess, final List<User> users, fi\n             }\n             user.setDisplayNick();\n             groupString.append(user.getDisplayName());\n-            if (ess.getSettings().realNamesOnList() && !ChatColor.stripColor(user.getDisplayName()).equals(user.getName())) {\n+\n+            final String strippedNick = FormatUtil.stripEssentialsFormat(user.getNickname());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1c5e2ea51eb5a2e3bdfb541bb41361820e2efb53"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cfaa9ee930a4223c356fd596e07e94f5d0b7809f", "author": {"user": {"login": "triagonal", "name": "triagonal"}}, "url": "https://github.com/EssentialsX/Essentials/commit/cfaa9ee930a4223c356fd596e07e94f5d0b7809f", "committedDate": "2020-12-24T16:12:32Z", "message": "Update Essentials/src/main/java/com/earth2me/essentials/PlayerList.java\n\nCo-authored-by: Josh Roy <10731363+JRoy@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4Njc3MTc1", "url": "https://github.com/EssentialsX/Essentials/pull/3858#pullrequestreview-558677175", "createdAt": "2020-12-24T16:15:50Z", "commit": {"oid": "cfaa9ee930a4223c356fd596e07e94f5d0b7809f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5af5835c89dfdc8dd437ea613130478e2e87fcd4", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/5af5835c89dfdc8dd437ea613130478e2e87fcd4", "committedDate": "2021-01-01T00:10:31Z", "message": "Merge branch '2.x' into fix/real-names-on-list"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4501, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}