{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIyNTc1ODQ0", "number": 3331, "title": "Add itemlore command", "bodyText": "Adds a command to add to or clear an items lore.\nCloses #1911", "createdAt": "2020-05-25T06:42:36Z", "url": "https://github.com/EssentialsX/Essentials/pull/3331", "merged": true, "mergeCommit": {"oid": "711bfed5579ac398f336dab00b965c0fc47b6a35"}, "closed": true, "closedAt": "2020-07-06T18:46:58Z", "author": {"login": "JRoy"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABckqQtOgH2gAyNDIyNTc1ODQ0OjJkMzEyMTAxNjZiODYxZGJmN2QwNGRmNWM4MzNmZGJkM2ViYzc2Njk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcyVzjsgFqTQ0MzMyNTE5Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2d31210166b861dbf7d04df5c833fdbd3ebc7669", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/2d31210166b861dbf7d04df5c833fdbd3ebc7669", "committedDate": "2020-05-25T06:41:37Z", "message": "Add itemlore command"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "75d938b2f09b41c6bb9be6b19955ee8da225dbb1", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/75d938b2f09b41c6bb9be6b19955ee8da225dbb1", "committedDate": "2020-06-08T17:45:26Z", "message": "Add set option"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "81ef1ccbde65a8948f583d6a9a42435709c213f7", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/81ef1ccbde65a8948f583d6a9a42435709c213f7", "committedDate": "2020-06-08T19:27:14Z", "message": "It's english, yo"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2Njc0NjYx", "url": "https://github.com/EssentialsX/Essentials/pull/3331#pullrequestreview-426674661", "createdAt": "2020-06-08T22:51:32Z", "commit": {"oid": "81ef1ccbde65a8948f583d6a9a42435709c213f7"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6bd2bda3e29251d7c38b2ea0152ff1b89b5cef41", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/6bd2bda3e29251d7c38b2ea0152ff1b89b5cef41", "committedDate": "2020-06-12T01:33:24Z", "message": "Actually change the item meta on set"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwNDQxNzgy", "url": "https://github.com/EssentialsX/Essentials/pull/3331#pullrequestreview-430441782", "createdAt": "2020-06-15T08:48:24Z", "commit": {"oid": "6bd2bda3e29251d7c38b2ea0152ff1b89b5cef41"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwODo0ODoyNVrOGjo3wQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwODo0ODoyNVrOGjo3wQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAyMjk3Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        user.sendMessage(tl(\"itemloreInvalidItem\"));\n          \n          \n            \n                        return;\n          \n          \n            \n                        throw new Exception(tl(\"itemloreInvalidItem\"));\n          \n      \n    \n    \n  \n\nThis is probably better, to remain consistent with the way you are handling errors in other parts of this command.", "url": "https://github.com/EssentialsX/Essentials/pull/3331#discussion_r440022977", "createdAt": "2020-06-15T08:48:25Z", "author": {"login": "pop4959"}, "path": "Essentials/src/com/earth2me/essentials/commands/Commanditemlore.java", "diffHunk": "@@ -0,0 +1,76 @@\n+package com.earth2me.essentials.commands;\n+\n+import com.earth2me.essentials.User;\n+import com.earth2me.essentials.utils.FormatUtil;\n+import com.earth2me.essentials.utils.NumberUtil;\n+import com.google.common.collect.Lists;\n+import org.bukkit.Server;\n+import org.bukkit.inventory.ItemStack;\n+import org.bukkit.inventory.meta.ItemMeta;\n+\n+import java.util.ArrayList;\n+import java.util.Collections;\n+import java.util.List;\n+\n+import static com.earth2me.essentials.I18n.tl;\n+\n+public class Commanditemlore extends EssentialsCommand {\n+\n+    public Commanditemlore() {\n+        super(\"itemlore\");\n+    }\n+\n+    @Override\n+    protected void run(Server server, User user, String commandLabel, String[] args) throws Exception {\n+        ItemStack item = user.getBase().getItemInHand();\n+        if (item.getType().name().contains(\"AIR\")) {\n+            user.sendMessage(tl(\"itemloreInvalidItem\"));\n+            return;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6bd2bda3e29251d7c38b2ea0152ff1b89b5cef41"}, "originalPosition": 28}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "67d48ca007c6d72b3538941c7b9efd90784c5cd2", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/67d48ca007c6d72b3538941c7b9efd90784c5cd2", "committedDate": "2020-06-15T14:41:47Z", "message": "Update Essentials/src/com/earth2me/essentials/commands/Commanditemlore.java\n\nCo-authored-by: pop4959 <pop4959@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxMDg3ODg4", "url": "https://github.com/EssentialsX/Essentials/pull/3331#pullrequestreview-431087888", "createdAt": "2020-06-16T00:55:10Z", "commit": {"oid": "67d48ca007c6d72b3538941c7b9efd90784c5cd2"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2cac7538f50c86ee35c51689523d527f3d31eee7", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/2cac7538f50c86ee35c51689523d527f3d31eee7", "committedDate": "2020-06-17T02:47:40Z", "message": "Merge branch '2.x' into feature/itemlore"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "36ea1f2642a055176fd24f236383ce1e65cb80fb", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/36ea1f2642a055176fd24f236383ce1e65cb80fb", "committedDate": "2020-06-17T02:49:51Z", "message": "Add support for new translation usage/desc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM1MjAyMjEz", "url": "https://github.com/EssentialsX/Essentials/pull/3331#pullrequestreview-435202213", "createdAt": "2020-06-22T19:12:35Z", "commit": {"oid": "36ea1f2642a055176fd24f236383ce1e65cb80fb"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxMTczNjU1", "url": "https://github.com/EssentialsX/Essentials/pull/3331#pullrequestreview-441173655", "createdAt": "2020-07-01T20:26:08Z", "commit": {"oid": "36ea1f2642a055176fd24f236383ce1e65cb80fb"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQyMDoyNjowOFrOGr0P5A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQyMDoyNzoyOVrOGr0SRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODU5Nzk4OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            itemloreNoLine=\\u00a74Your selected item does not have lore text on line \\u00a7c{0}\\u00a74.\n          \n          \n            \n            itemloreNoLine=\\u00a74Your held item does not have lore text on line \\u00a7c{0}\\u00a74.", "url": "https://github.com/EssentialsX/Essentials/pull/3331#discussion_r448597988", "createdAt": "2020-07-01T20:26:08Z", "author": {"login": "mdcfe"}, "path": "Essentials/src/messages.properties", "diffHunk": "@@ -324,6 +324,14 @@ itemCannotBeSold=\\u00a74That item cannot be sold to the server.\n itemCommandDescription=Spawn an item.\n itemCommandUsage=/<command> <item|numeric> [amount [itemmeta...]]\n itemId=\\u00a76ID\\:\\u00a7c {0}\n+itemloreClear=\\u00a76You have cleared this item''s lore.\n+itemloreCommandDescription=Edit the lore of an item.\n+itemloreCommandUsage=/<command> <add/set/clear> [text/line] [text]\n+itemloreInvalidItem=\\u00a74You need to hold an item to edit its lore.\n+itemloreNoLine=\\u00a74Your selected item does not have lore text on line \\u00a7c{0}\\u00a74.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "36ea1f2642a055176fd24f236383ce1e65cb80fb"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODU5ODU5Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                aliases: [ilore, eilore, eitemlore]\n          \n          \n            \n                aliases: [lore, elore, ilore, eilore, eitemlore]\n          \n      \n    \n    \n  \n\n/lore seems like a reasonable alias - whereas /name for /itemname might be ambiguous, /lore seems to be more obviously related to items.", "url": "https://github.com/EssentialsX/Essentials/pull/3331#discussion_r448598597", "createdAt": "2020-07-01T20:27:29Z", "author": {"login": "mdcfe"}, "path": "Essentials/src/plugin.yml", "diffHunk": "@@ -216,6 +216,10 @@ commands:\n     description: Searches for an item.\n     usage: /<command> <item>\n     aliases: [dura,edura,durability,edurability,eitemdb,itemno,eitemno]\n+  itemlore:\n+    description: Edit the lore of an item.\n+    usage: /<command> <add/set/clear> [text/line] [text]\n+    aliases: [ilore, eilore, eitemlore]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "36ea1f2642a055176fd24f236383ce1e65cb80fb"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "af5972b4b567a8534d980789f3e366b6b8d5c252", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/af5972b4b567a8534d980789f3e366b6b8d5c252", "committedDate": "2020-07-01T20:30:41Z", "message": "Apply suggestions from code review\n\nCo-authored-by: MD <1917406+md678685@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxMzI3MTkw", "url": "https://github.com/EssentialsX/Essentials/pull/3331#pullrequestreview-441327190", "createdAt": "2020-07-02T03:34:11Z", "commit": {"oid": "af5972b4b567a8534d980789f3e366b6b8d5c252"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQzMzI1MTk2", "url": "https://github.com/EssentialsX/Essentials/pull/3331#pullrequestreview-443325196", "createdAt": "2020-07-06T18:46:37Z", "commit": {"oid": "af5972b4b567a8534d980789f3e366b6b8d5c252"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4733, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}