{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE5MDU5NTc0", "number": 3302, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwOTozMTowOVrOEFdhiQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQyMDo1NjozMlrOEKqJzg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0MTYyMDU3OnYy", "diffSide": "RIGHT", "path": "Essentials/src/com/earth2me/essentials/commands/Commandmore.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwOTozMTowOVrOGjqbZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwOTozMTowOVrOGjqbZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDA0ODQ4Ng==", "bodyText": "Not really a big fan of this kind of try/throw/catch, looks very messy. Maybe use NumberUtil::isInt(String) here instead, and additionally check that the parsed number is greater than zero. If either fails, throw the exception for nonZeroPosNumber.", "url": "https://github.com/EssentialsX/Essentials/pull/3302#discussion_r440048486", "createdAt": "2020-06-15T09:31:09Z", "author": {"login": "pop4959"}, "path": "Essentials/src/com/earth2me/essentials/commands/Commandmore.java", "diffHunk": "@@ -17,22 +18,42 @@ public Commandmore() {\n     @Override\n     public void run(final Server server, final User user, final String commandLabel, final String[] args) throws Exception {\n         final ItemStack stack = user.getItemInHand();\n-        if (stack == null) {\n+        if (stack == null || stack.getType() == Material.AIR) {\n             throw new Exception(tl(\"cantSpawnItem\", \"Air\"));\n         }\n \n-        if (stack.getAmount() >= ((user.isAuthorized(\"essentials.oversizedstacks\")) ? ess.getSettings().getOversizedStackSize() : stack.getMaxStackSize())) {\n+        boolean canOversized = user.isAuthorized(\"essentials.oversizedstacks\");\n+        if (stack.getAmount() >= ((canOversized) ? ess.getSettings().getOversizedStackSize() : stack.getMaxStackSize())) {\n             throw new Exception(tl(\"fullStack\"));\n         }\n+\n         final String itemname = stack.getType().toString().toLowerCase(Locale.ENGLISH).replace(\"_\", \"\");\n         if (!user.canSpawnItem(stack.getType())) {\n             throw new Exception(tl(\"cantSpawnItem\", itemname));\n         }\n-        if (user.isAuthorized(\"essentials.oversizedstacks\")) {\n-            stack.setAmount(ess.getSettings().getOversizedStackSize());\n+\n+        int newStackSize = stack.getAmount();\n+        if (args.length >= 1) {\n+            try {\n+                int increment = Integer.parseInt(args[0]);\n+                if (increment < 1) {\n+                    throw new NumberFormatException(\"increment is less than or equal to zero\");\n+                }\n+                newStackSize += increment;\n+            } catch(NumberFormatException e) {\n+                throw new Exception(tl(\"nonZeroPosNumber\"));\n+            }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "70eb24f79b15f8e2e3912fa0ed1f8a2632b250ac"}, "originalPosition": 40}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0MTYzNjcxOnYy", "diffSide": "RIGHT", "path": "Essentials/src/messages.properties", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwOTozNTo1MlrOGjqltg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwOTozNTo1MlrOGjqltg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDA1MTEyNg==", "bodyText": "I feel like this is a bit technical for most users -- keep in mind that /more could be used by players, not just developers / server admins. They could probably be condensed to something like \"Your stack has been set to its maximum size.\", or maybe even absolutely nothing at all (because without arguments this is the normal operation of the command).", "url": "https://github.com/EssentialsX/Essentials/pull/3302#discussion_r440051126", "createdAt": "2020-06-15T09:35:52Z", "author": {"login": "pop4959"}, "path": "Essentials/src/messages.properties", "diffHunk": "@@ -143,6 +143,8 @@ flying=flying\n flyMode=\\u00a76Set fly mode\\u00a7c {0} \\u00a76for {1}\\u00a76.\n foreverAlone=\\u00a74You have nobody to whom you can reply.\n fullStack=\\u00a74You already have a full stack.\n+fullStackDefault=\\u00a76Stack increment amount would overflow the max stack size,\\u00a7c {0}\\u00a76. Defaulting to max stack size.\n+fullStackDefaultOversize=\\u00a76Stack increment amount would overflow the oversized stack size,\\u00a7c {0}\\u00a76. Defaulting to oversized stack size.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "70eb24f79b15f8e2e3912fa0ed1f8a2632b250ac"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5NjEwODk0OnYy", "diffSide": "RIGHT", "path": "Essentials/src/messages.properties", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQyMDo1MzoyOFrOGr1A0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQyMDo1MzoyOFrOGr1A0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODYxMDUxNQ==", "bodyText": "Is this necessary?", "url": "https://github.com/EssentialsX/Essentials/pull/3302#discussion_r448610515", "createdAt": "2020-07-01T20:53:28Z", "author": {"login": "mdcfe"}, "path": "Essentials/src/messages.properties", "diffHunk": "@@ -520,6 +523,7 @@ nothingInHand=\\u00a74You have nothing in your hand.\n now=now\n noWarpsDefined=\\u00a76No warps defined.\n nuke=\\u00a75May death rain upon them.\n+numberRequired=\\u00a74A number is required.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "881852309f2bcf9b696e9d3d7916d4a99faaca10"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5NjExNDY5OnYy", "diffSide": "RIGHT", "path": "Essentials/src/plugin.yml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQyMDo1NToxN1rOGr1EMg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQyMDo1NToxN1rOGr1EMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODYxMTM3OA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                description: Fills the item stack in hand to maximum size.\n          \n          \n            \n                description: Fills the item stack in hand to specified amount, or to maximum size if none is specified.", "url": "https://github.com/EssentialsX/Essentials/pull/3302#discussion_r448611378", "createdAt": "2020-07-01T20:55:17Z", "author": {"login": "mdcfe"}, "path": "Essentials/src/plugin.yml", "diffHunk": "@@ -266,7 +266,7 @@ commands:\n     aliases: [action,eaction,describe,edescribe,eme]\n   more:\n     description: Fills the item stack in hand to maximum size.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "881852309f2bcf9b696e9d3d7916d4a99faaca10"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5NjExNTQ5OnYy", "diffSide": "RIGHT", "path": "Essentials/src/plugin.yml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQyMDo1NTozNlrOGr1Eug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQyMDo1NTozNlrOGr1Eug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODYxMTUxNA==", "bodyText": "Usage and description in messages.properties also need updating.", "url": "https://github.com/EssentialsX/Essentials/pull/3302#discussion_r448611514", "createdAt": "2020-07-01T20:55:36Z", "author": {"login": "mdcfe"}, "path": "Essentials/src/plugin.yml", "diffHunk": "@@ -266,7 +266,7 @@ commands:\n     aliases: [action,eaction,describe,edescribe,eme]\n   more:\n     description: Fills the item stack in hand to maximum size.\n-    usage: /<command>\n+    usage: /<command> [amount]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "881852309f2bcf9b696e9d3d7916d4a99faaca10"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5NjExODU0OnYy", "diffSide": "RIGHT", "path": "Essentials/src/com/earth2me/essentials/utils/NumberUtil.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQyMDo1NjozMlrOGr1Glg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQyMDo1NjozMlrOGr1Glg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODYxMTk5MA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public static boolean isPosInt(final String sInt) {\n          \n          \n            \n                public static boolean isPositiveInt(final String sInt) {\n          \n      \n    \n    \n  \n\nAs opposed to \"positional\" or something similar, which is what I thought this was at first glance", "url": "https://github.com/EssentialsX/Essentials/pull/3302#discussion_r448611990", "createdAt": "2020-07-01T20:56:32Z", "author": {"login": "mdcfe"}, "path": "Essentials/src/com/earth2me/essentials/utils/NumberUtil.java", "diffHunk": "@@ -105,4 +105,11 @@ public static boolean isInt(final String sInt) {\n         }\n         return true;\n     }\n+\n+    public static boolean isPosInt(final String sInt) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "881852309f2bcf9b696e9d3d7916d4a99faaca10"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4688, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}