{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk5NzI5ODU5", "number": 3715, "title": "Fix /clear <player> <item> not clearing offhand", "bodyText": "There is an issue where when you type \"/clear Player (Item Name)\" It does not clear the item in your OffHand / Second Hand (This doesn't affect the normal \"/clear Player\" or \"/clear\" command.)\nI also removed \"This class can be removed when Bukkit/CraftBukkit#193 is accepted to CraftBukkit\" in InventoryWorkaround because when I took a look at it, CraftBukkit apparently has been DMCA'd.\nThis fixes this issue: #3712 Pretty minor changes.", "createdAt": "2020-10-08T07:48:24Z", "url": "https://github.com/EssentialsX/Essentials/pull/3715", "merged": true, "mergeCommit": {"oid": "80fb91b6d74dfade35280c0fa609537600877bd3"}, "closed": true, "closedAt": "2020-11-09T16:43:55Z", "author": {"login": "Kenichycmd"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdQcb8KgH2gAyNDk5NzI5ODU5OjE4MTFmMTI0MzBlNjliYzI1MDNmNmU3YjI1ZTM1NzA4NGY0ZmUxNTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABda3ilMgFqTUyNjQ0MzA0NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1811f12430e69bc2503f6e7b25e357084f4fe152", "author": {"user": {"login": "Kenichyc", "name": null}}, "url": "https://github.com/EssentialsX/Essentials/commit/1811f12430e69bc2503f6e7b25e357084f4fe152", "committedDate": "2020-10-08T07:27:53Z", "message": "Fixed /clear command in the second hand for additional parameters :p"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0NTE1MjAw", "url": "https://github.com/EssentialsX/Essentials/pull/3715#pullrequestreview-504515200", "createdAt": "2020-10-08T07:53:47Z", "commit": {"oid": "1811f12430e69bc2503f6e7b25e357084f4fe152"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQwNzo1Mzo0N1rOHeSN4A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQwNzo1NToxMVrOHeSRLg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTUxNzc5Mg==", "bodyText": "This if will always return true, therefore making no need for it", "url": "https://github.com/EssentialsX/Essentials/pull/3715#discussion_r501517792", "createdAt": "2020-10-08T07:53:47Z", "author": {"login": "l1ttleO"}, "path": "Essentials/src/com/earth2me/essentials/craftbukkit/InventoryWorkaround.java", "diffHunk": "@@ -267,4 +263,22 @@ public static void setItemInOffHand(final Player p, final ItemStack item) {\n             }\n         }\n     }\n+\n+    public static int clearItemInOffHand(final Player p, final ItemStack item) {\n+        if (hasMainHandSupport == null || hasMainHandSupport) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1811f12430e69bc2503f6e7b25e357084f4fe152"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTUxODYzOA==", "bodyText": "Don't make changes that aren't associated with your PR", "url": "https://github.com/EssentialsX/Essentials/pull/3715#discussion_r501518638", "createdAt": "2020-10-08T07:55:11Z", "author": {"login": "l1ttleO"}, "path": "Essentials/src/com/earth2me/essentials/craftbukkit/InventoryWorkaround.java", "diffHunk": "@@ -12,10 +12,6 @@\n import java.util.HashMap;\n import java.util.Map;\n \n-/*\n- * This class can be removed when https://github.com/Bukkit/CraftBukkit/pull/193 is accepted to CraftBukkit\n- */\n-", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1811f12430e69bc2503f6e7b25e357084f4fe152"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa430f704e850a900cd51baae16f384c758e80c1", "author": {"user": {"login": "Kenichyc", "name": null}}, "url": "https://github.com/EssentialsX/Essentials/commit/fa430f704e850a900cd51baae16f384c758e80c1", "committedDate": "2020-10-08T08:18:49Z", "message": "Fixed the if always returning true. Added back the message in InventoryWorkaround."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d071ea7081eaf117287b25b5bddb6d07731ea8ea", "author": {"user": {"login": "Kenichyc", "name": null}}, "url": "https://github.com/EssentialsX/Essentials/commit/d071ea7081eaf117287b25b5bddb6d07731ea8ea", "committedDate": "2020-10-08T08:23:18Z", "message": "Forgot to add the return statement. Added it."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0NTQxNDc0", "url": "https://github.com/EssentialsX/Essentials/pull/3715#pullrequestreview-504541474", "createdAt": "2020-10-08T08:26:25Z", "commit": {"oid": "d071ea7081eaf117287b25b5bddb6d07731ea8ea"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0Njc2NDgx", "url": "https://github.com/EssentialsX/Essentials/pull/3715#pullrequestreview-504676481", "createdAt": "2020-10-08T11:17:02Z", "commit": {"oid": "d071ea7081eaf117287b25b5bddb6d07731ea8ea"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0OTgwMDEx", "url": "https://github.com/EssentialsX/Essentials/pull/3715#pullrequestreview-504980011", "createdAt": "2020-10-08T16:53:10Z", "commit": {"oid": "d071ea7081eaf117287b25b5bddb6d07731ea8ea"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNjo1MzoxMFrOHenpVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNjo1MzoxMFrOHenpVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTg2ODg4Ng==", "bodyText": "This is redundant?", "url": "https://github.com/EssentialsX/Essentials/pull/3715#discussion_r501868886", "createdAt": "2020-10-08T16:53:10Z", "author": {"login": "mdcfe"}, "path": "Essentials/src/com/earth2me/essentials/craftbukkit/InventoryWorkaround.java", "diffHunk": "@@ -267,4 +267,17 @@ public static void setItemInOffHand(final Player p, final ItemStack item) {\n             }\n         }\n     }\n+\n+    public static int clearItemInOffHand(final Player p, final ItemStack item) {\n+        if (hasMainHandSupport) {\n+            int removedAmount = 0;\n+            if (p.getInventory().getItemInOffHand().getType().equals(item.getType())) {\n+                removedAmount = p.getInventory().getItemInOffHand().getAmount();\n+                p.getInventory().setItemInOffHand(null);\n+            }\n+            hasMainHandSupport = true;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d071ea7081eaf117287b25b5bddb6d07731ea8ea"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3b220f0d5f60c0f924f9fe0630087105282f6132", "author": {"user": {"login": "Kenichyc", "name": null}}, "url": "https://github.com/EssentialsX/Essentials/commit/3b220f0d5f60c0f924f9fe0630087105282f6132", "committedDate": "2020-10-10T00:35:08Z", "message": "Added a config for the offhand slot + bug fixes."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2MTMzNzQ0", "url": "https://github.com/EssentialsX/Essentials/pull/3715#pullrequestreview-506133744", "createdAt": "2020-10-11T00:07:20Z", "commit": {"oid": "3b220f0d5f60c0f924f9fe0630087105282f6132"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2NDEwMzUw", "url": "https://github.com/EssentialsX/Essentials/pull/3715#pullrequestreview-506410350", "createdAt": "2020-10-12T08:39:43Z", "commit": {"oid": "3b220f0d5f60c0f924f9fe0630087105282f6132"}, "state": "DISMISSED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQwODozOTo0NFrOHf0tjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQwODo0MToxN1rOHf0xaw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzEzMTUzMg==", "bodyText": "It makes more sense to keep the old behaviour for old configs and change the behaviour for fresh configs, but this does the opposite?", "url": "https://github.com/EssentialsX/Essentials/pull/3715#discussion_r503131532", "createdAt": "2020-10-12T08:39:44Z", "author": {"login": "mdcfe"}, "path": "Essentials/src/config.yml", "diffHunk": "@@ -141,6 +141,9 @@ warn-on-smite: true\n # Shall we drop items instead of adding to inventory if the target inventory is full?\n drop-items-if-full: false\n \n+# Shall we clear the offhand slot when executing the command /clear [player] [item]\n+clear-offhand-slot: false", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3b220f0d5f60c0f924f9fe0630087105282f6132"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzEzMjUyMw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # Shall we clear the offhand slot when executing the command /clear [player] [item]\n          \n          \n            \n            # Shall we clear the offhand slot when executing the command /clear [player] [item]?\n          \n          \n            \n            # Note that running /clear on its own will clear your offhand regardless of this setting.\n          \n      \n    \n    \n  \n\nClarifies the meaning of this option.", "url": "https://github.com/EssentialsX/Essentials/pull/3715#discussion_r503132523", "createdAt": "2020-10-12T08:41:17Z", "author": {"login": "mdcfe"}, "path": "Essentials/src/config.yml", "diffHunk": "@@ -141,6 +141,9 @@ warn-on-smite: true\n # Shall we drop items instead of adding to inventory if the target inventory is full?\n drop-items-if-full: false\n \n+# Shall we clear the offhand slot when executing the command /clear [player] [item]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3b220f0d5f60c0f924f9fe0630087105282f6132"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "25492cf87c2c4f93263c05442aa76272fee6c992", "author": {"user": {"login": "Kenichyc", "name": null}}, "url": "https://github.com/EssentialsX/Essentials/commit/25492cf87c2c4f93263c05442aa76272fee6c992", "committedDate": "2020-10-13T06:21:34Z", "message": "Fixed config error and also added a notice to clear-offhand-slot."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bb4e8159145b6b168bd0f4ca51450acc9f17ac58", "author": {"user": {"login": "Kenichyc", "name": null}}, "url": "https://github.com/EssentialsX/Essentials/commit/bb4e8159145b6b168bd0f4ca51450acc9f17ac58", "committedDate": "2020-10-13T08:11:17Z", "message": "Removed Config for the Clear Command."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7852ee6b12b6163179ddf76586ea4cb510a3322c", "author": {"user": {"login": "mdcfe", "name": "MD"}}, "url": "https://github.com/EssentialsX/Essentials/commit/7852ee6b12b6163179ddf76586ea4cb510a3322c", "committedDate": "2020-11-09T16:41:16Z", "message": "Undo unnecessary formatting change"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2NDQzMDQ0", "url": "https://github.com/EssentialsX/Essentials/pull/3715#pullrequestreview-526443044", "createdAt": "2020-11-09T16:41:49Z", "commit": {"oid": "7852ee6b12b6163179ddf76586ea4cb510a3322c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4397, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}