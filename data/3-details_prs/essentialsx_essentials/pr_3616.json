{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcyMDE2Nzcy", "number": 3616, "title": "Fix miscellaneous command permission bugs", "bodyText": "some of these bugs aren't mine and have nothing to do with command refactor pr but I fixed them anyway\nFix #3612\nFix #3613", "createdAt": "2020-08-22T17:56:41Z", "url": "https://github.com/EssentialsX/Essentials/pull/3616", "merged": true, "mergeCommit": {"oid": "b3a6307052ac14b333d4b597cf6a443c8981126b"}, "closed": true, "closedAt": "2020-08-22T19:07:22Z", "author": {"login": "JRoy"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdBdHp3AH2gAyNDcyMDE2NzcyOmY3NmU2YzE2NWViZDg1NDc4MjVkODljNDdkNDI2NDgzYWZlM2M2N2E=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdBeOhBAFqTQ3Mjk0NTU0Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f76e6c165ebd8547825d89c47d426483afe3c67a", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/f76e6c165ebd8547825d89c47d426483afe3c67a", "committedDate": "2020-08-22T17:46:46Z", "message": "Fix #3612"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyOTQyMzY5", "url": "https://github.com/EssentialsX/Essentials/pull/3616#pullrequestreview-472942369", "createdAt": "2020-08-22T18:08:28Z", "commit": {"oid": "9e9a8118af347eb9085c495ad0475c196560f12e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMlQxODowODoyOFrOHFGw_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMlQxODowODoyOFrOHFGw_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTExNTc3NA==", "bodyText": "Merging these loops almost certainly result in incorrect behavior, as the command will be able to fail while also being able to partially update the requested worlds, and then also not providing feedback to the user for what worlds were changed.", "url": "https://github.com/EssentialsX/Essentials/pull/3616#discussion_r475115774", "createdAt": "2020-08-22T18:08:28Z", "author": {"login": "pop4959"}, "path": "Essentials/src/com/earth2me/essentials/commands/Commandtime.java", "diffHunk": "@@ -64,14 +64,16 @@ public void run(final Server server, final CommandSource sender, final String co\n \n         // Start updating world times, we have what we need\n         User user = ess.getUser(sender.getPlayer());\n+        if (!user.isAuthorized(\"essentials.time.set\")) {\n+            throw new Exception(tl(\"timeSetPermission\"));\n+        }\n+\n+        final StringJoiner joiner = new StringJoiner(\",\");\n         for (World world : worlds) {\n             if (!canUpdateWorld(user, world)) {\n                 throw new Exception(tl(\"timeSetWorldPermission\", user.getWorld().getName()));\n             }\n-        }\n \n-        final StringJoiner joiner = new StringJoiner(\",\");\n-        for (World world : worlds) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9e9a8118af347eb9085c495ad0475c196560f12e"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a7371968467fb99588450ad02c3a35236962f4fc", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/a7371968467fb99588450ad02c3a35236962f4fc", "committedDate": "2020-08-22T18:10:58Z", "message": "Fix #3613"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9e9a8118af347eb9085c495ad0475c196560f12e", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/9e9a8118af347eb9085c495ad0475c196560f12e", "committedDate": "2020-08-22T17:54:51Z", "message": "Fix #3613"}, "afterCommit": {"oid": "a7371968467fb99588450ad02c3a35236962f4fc", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/a7371968467fb99588450ad02c3a35236962f4fc", "committedDate": "2020-08-22T18:10:58Z", "message": "Fix #3613"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyOTQyNjA3", "url": "https://github.com/EssentialsX/Essentials/pull/3616#pullrequestreview-472942607", "createdAt": "2020-08-22T18:13:02Z", "commit": {"oid": "a7371968467fb99588450ad02c3a35236962f4fc"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyOTQyNjA0", "url": "https://github.com/EssentialsX/Essentials/pull/3616#pullrequestreview-472942604", "createdAt": "2020-08-22T18:13:01Z", "commit": {"oid": "9e9a8118af347eb9085c495ad0475c196560f12e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMlQxODoxMzozMFrOHFGyog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMlQxODoxMzozMFrOHFGyog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTExNjE5NA==", "bodyText": "This is only used in /list; we could probably just move this to Commandlist.", "url": "https://github.com/EssentialsX/Essentials/pull/3616#discussion_r475116194", "createdAt": "2020-08-22T18:13:30Z", "author": {"login": "mdcfe"}, "path": "Essentials/src/com/earth2me/essentials/commands/EssentialsCommand.java", "diffHunk": "@@ -285,9 +285,9 @@ private static boolean canInteractWith(User interactor, User interactee) {\n     /**\n      * Returns a list of all online groups.\n      */\n-    protected List<String> getGroups() {\n+    protected List<String> getGroups(CommandSource interactor) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a7371968467fb99588450ad02c3a35236962f4fc"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5472cac7b74cc6c85a51ae858aa79a77c0b0b563", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/5472cac7b74cc6c85a51ae858aa79a77c0b0b563", "committedDate": "2020-08-22T18:16:29Z", "message": "Move getGroups from EssentialsCommand to Commandlist"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyOTQzMDEz", "url": "https://github.com/EssentialsX/Essentials/pull/3616#pullrequestreview-472943013", "createdAt": "2020-08-22T18:19:54Z", "commit": {"oid": "5472cac7b74cc6c85a51ae858aa79a77c0b0b563"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyOTQ1NTQy", "url": "https://github.com/EssentialsX/Essentials/pull/3616#pullrequestreview-472945542", "createdAt": "2020-08-22T19:04:10Z", "commit": {"oid": "5472cac7b74cc6c85a51ae858aa79a77c0b0b563"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4599, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}