{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAwODE4ODA3", "number": 3720, "reviewThreads": {"totalCount": 25, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQyMTowNzoyNFrOEsMo4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxNTo0NToxOFrOE9SViw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0Nzc5ODc0OnYy", "diffSide": "RIGHT", "path": "shadow.gradle", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQyMTowNzoyNFrOHfYo9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQyMjo1NzozNlrOHfaqmw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjY3MTYwNQ==", "bodyText": "why not shadow? this isn't maven.", "url": "https://github.com/EssentialsX/Essentials/pull/3720#discussion_r502671605", "createdAt": "2020-10-09T21:07:24Z", "author": {"login": "zml2008"}, "path": "shadow.gradle", "diffHunk": "@@ -0,0 +1,14 @@\n+apply plugin: \"com.github.johnrengelman.shadow\"\n+\n+configurations {\n+    shade", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "97ee48f9c3069ce9d1a2fcf21540c9bc9a069381"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjY4MjMxNQ==", "bodyText": "shadow defines the configuration shadow and freaks out if you try to steal it from it", "url": "https://github.com/EssentialsX/Essentials/pull/3720#discussion_r502682315", "createdAt": "2020-10-09T21:38:06Z", "author": {"login": "JRoy"}, "path": "shadow.gradle", "diffHunk": "@@ -0,0 +1,14 @@\n+apply plugin: \"com.github.johnrengelman.shadow\"\n+\n+configurations {\n+    shade", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjY3MTYwNQ=="}, "originalCommit": {"oid": "97ee48f9c3069ce9d1a2fcf21540c9bc9a069381"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjcwNDc5NQ==", "bodyText": "it defines the configuration -- you should be able to just go ahead and reuse that shadow configuration when configuring the shadow tasks.", "url": "https://github.com/EssentialsX/Essentials/pull/3720#discussion_r502704795", "createdAt": "2020-10-09T22:57:36Z", "author": {"login": "zml2008"}, "path": "shadow.gradle", "diffHunk": "@@ -0,0 +1,14 @@\n+apply plugin: \"com.github.johnrengelman.shadow\"\n+\n+configurations {\n+    shade", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjY3MTYwNQ=="}, "originalCommit": {"oid": "97ee48f9c3069ce9d1a2fcf21540c9bc9a069381"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0NzgwNjQ5OnYy", "diffSide": "RIGHT", "path": "settings.gradle", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQyMToxMDozMlrOHfYtag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQyMToxMDozMlrOHfYtag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjY3Mjc0Ng==", "bodyText": "You can reduce duplication here by doing something like:\n[\n  \"\",\n  \"AntiBuild\",\n  \"Chat\",\n  /* ... */\n].each {\n  include(\":EssentialsX$it\")\n  project(\":EssentialsX$it\").projectDir = file(\"Essentials$it\")\n}", "url": "https://github.com/EssentialsX/Essentials/pull/3720#discussion_r502672746", "createdAt": "2020-10-09T21:10:32Z", "author": {"login": "zml2008"}, "path": "settings.gradle", "diffHunk": "@@ -0,0 +1,36 @@\n+rootProject.name = 'EssentialsXParent'\n+\n+include(':EssentialsX')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "97ee48f9c3069ce9d1a2fcf21540c9bc9a069381"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0NzgwNzc4OnYy", "diffSide": "RIGHT", "path": "settings.gradle", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQyMToxMToxMVrOHfYuRQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQyMToxMToxMVrOHfYuRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjY3Mjk2NQ==", "bodyText": "maybe skip the custom project directory, just do include(\":providers:BaseProviders\") and update the project deps to match?", "url": "https://github.com/EssentialsX/Essentials/pull/3720#discussion_r502672965", "createdAt": "2020-10-09T21:11:11Z", "author": {"login": "zml2008"}, "path": "settings.gradle", "diffHunk": "@@ -0,0 +1,36 @@\n+rootProject.name = 'EssentialsXParent'\n+\n+include(':EssentialsX')\n+project(':EssentialsX').projectDir = file('Essentials')\n+\n+// Modules\n+include(':EssentialsXAntiBuild')\n+project(':EssentialsXAntiBuild').projectDir = file('EssentialsAntiBuild')\n+\n+include(':EssentialsXChat')\n+project(':EssentialsXChat').projectDir = file('EssentialsChat')\n+\n+include(':EssentialsXGeoIP')\n+project(':EssentialsXGeoIP').projectDir = file('EssentialsGeoIP')\n+\n+include(':EssentialsXProtect')\n+project(':EssentialsXProtect').projectDir = file('EssentialsProtect')\n+\n+include(':EssentialsXSpawn')\n+project(':EssentialsXSpawn').projectDir = file('EssentialsSpawn')\n+\n+include(':EssentialsXXMPP')\n+project(':EssentialsXXMPP').projectDir = file('EssentialsXMPP')\n+\n+// Providers\n+include(':BaseProviders')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "97ee48f9c3069ce9d1a2fcf21540c9bc9a069381"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0NzgxMTQwOnYy", "diffSide": "RIGHT", "path": "build.gradle", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQyMToxMjo1MVrOHfYwgg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQyMToxMjo1MVrOHfYwgg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjY3MzUzOA==", "bodyText": "You should be able to just set the config directory here: https://github.com/KyoriPowered/indra/blob/master/indra-common/src/main/kotlin/net/kyori/indra/IndraCheckstylePlugin.kt#L42", "url": "https://github.com/EssentialsX/Essentials/pull/3720#discussion_r502673538", "createdAt": "2020-10-09T21:12:51Z", "author": {"login": "zml2008"}, "path": "build.gradle", "diffHunk": "@@ -0,0 +1,143 @@\n+plugins {\n+    id 'org.ajoberstar.grgit' version '4.1.0'\n+    id 'com.github.johnrengelman.shadow' version '6.1.0'\n+    id 'java'\n+}\n+\n+import org.apache.tools.ant.filters.ReplaceTokens\n+import com.github.jengelman.gradle.plugins.shadow.tasks.ConfigureShadowRelocation\n+\n+allprojects {\n+    group = 'net.ess3'\n+    version = '2.18.1'\n+}\n+\n+def commitsSinceLastTag() {\n+    def tags = grgit.tag.list().stream().map({it.commit}).toList()\n+    def commit = grgit.head()\n+    def depth = 0\n+    while (true) {\n+        if (tags.contains(commit))\n+            return depth\n+        depth++\n+        commit = grgit.resolve.toCommit(commit.parentIds.get(0))\n+    }\n+}\n+\n+ext {\n+    GIT_COMMIT = grgit.head().abbreviatedId\n+    GIT_DEPTH = commitsSinceLastTag()\n+\n+    checkstyleVersion = '8.36.2'\n+    spigotVersion = '1.16.3-R0.1-SNAPSHOT'\n+}\n+\n+artifacts {\n+    tasks.shadowJar.outputs.files.each {\n+        archives(it) {\n+            builtBy shadowJar\n+        }\n+    }\n+}\n+\n+task relocateShadowJar(type: ConfigureShadowRelocation) {\n+    target = tasks.shadowJar\n+}\n+\n+tasks.shadowJar.dependsOn tasks.relocateShadowJar\n+\n+subprojects {\n+    apply plugin: 'java'\n+    apply plugin: 'java-library'\n+    apply plugin: 'checkstyle'\n+\n+    checkstyle {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "97ee48f9c3069ce9d1a2fcf21540c9bc9a069381"}, "originalPosition": 54}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0NzgxNTgxOnYy", "diffSide": "RIGHT", "path": "build.gradle", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQyMToxNDo1MVrOHfYzPg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQyMToxNDo1MVrOHfYzPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjY3NDIzOA==", "bodyText": "You should be able to do an afterEvaluate block, where you only add spigot-api as a dependency if no version of spigot or its forks has been added as a dep yet. That'd let you do this without hardcoding specific project names.", "url": "https://github.com/EssentialsX/Essentials/pull/3720#discussion_r502674238", "createdAt": "2020-10-09T21:14:51Z", "author": {"login": "zml2008"}, "path": "build.gradle", "diffHunk": "@@ -0,0 +1,143 @@\n+plugins {\n+    id 'org.ajoberstar.grgit' version '4.1.0'\n+    id 'com.github.johnrengelman.shadow' version '6.1.0'\n+    id 'java'\n+}\n+\n+import org.apache.tools.ant.filters.ReplaceTokens\n+import com.github.jengelman.gradle.plugins.shadow.tasks.ConfigureShadowRelocation\n+\n+allprojects {\n+    group = 'net.ess3'\n+    version = '2.18.1'\n+}\n+\n+def commitsSinceLastTag() {\n+    def tags = grgit.tag.list().stream().map({it.commit}).toList()\n+    def commit = grgit.head()\n+    def depth = 0\n+    while (true) {\n+        if (tags.contains(commit))\n+            return depth\n+        depth++\n+        commit = grgit.resolve.toCommit(commit.parentIds.get(0))\n+    }\n+}\n+\n+ext {\n+    GIT_COMMIT = grgit.head().abbreviatedId\n+    GIT_DEPTH = commitsSinceLastTag()\n+\n+    checkstyleVersion = '8.36.2'\n+    spigotVersion = '1.16.3-R0.1-SNAPSHOT'\n+}\n+\n+artifacts {\n+    tasks.shadowJar.outputs.files.each {\n+        archives(it) {\n+            builtBy shadowJar\n+        }\n+    }\n+}\n+\n+task relocateShadowJar(type: ConfigureShadowRelocation) {\n+    target = tasks.shadowJar\n+}\n+\n+tasks.shadowJar.dependsOn tasks.relocateShadowJar\n+\n+subprojects {\n+    apply plugin: 'java'\n+    apply plugin: 'java-library'\n+    apply plugin: 'checkstyle'\n+\n+    checkstyle {\n+        toolVersion = \"${checkstyleVersion}\"\n+        showViolations = true\n+        configFile = rootProject.file('.checkstyle/checkstyle.xml')\n+        configProperties = [\"checkstyle.suppressions.file\": rootProject.file('.checkstyle/suppressions.xml')]\n+    }\n+\n+    checkstyleMain {\n+        source = sourceSets.main.allSource\n+    }\n+\n+    tasks.build.dependsOn tasks.checkstyleMain\n+\n+    repositories {\n+        mavenLocal()\n+        mavenCentral()\n+        maven { url = 'https://ci.ender.zone/plugin/repository/everything/' }\n+        maven { url = 'https://hub.spigotmc.org/nexus/content/groups/public/' }\n+        maven { url = 'https://papermc.io/repo/repository/maven-public/' }\n+        maven { url = 'https://jitpack.io' }\n+    }\n+\n+    dependencies {\n+        testImplementation 'junit:junit:4.12'\n+        testImplementation 'org.mockito:mockito-core:3.2.0'\n+\n+        if (project.name != \"1_8Provider\" && project.name != \"PaperProvider\" && project.name != \"NMSReflectionProvider\") { // These providers use their own bukkit versions", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "97ee48f9c3069ce9d1a2fcf21540c9bc9a069381"}, "originalPosition": 80}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0NzgxODIwOnYy", "diffSide": "RIGHT", "path": "build.gradle", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQyMToxNTo1MFrOHfY0tQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQyMToxNTo1MFrOHfY0tQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjY3NDYxMw==", "bodyText": "You shouldn't be using this -- the plugins block at the top is preferred.\nIf you want a plugin that isn't applied to the root project but is available to subprojects, just add apply false after the version.", "url": "https://github.com/EssentialsX/Essentials/pull/3720#discussion_r502674613", "createdAt": "2020-10-09T21:15:50Z", "author": {"login": "zml2008"}, "path": "build.gradle", "diffHunk": "@@ -0,0 +1,143 @@\n+plugins {\n+    id 'org.ajoberstar.grgit' version '4.1.0'\n+    id 'com.github.johnrengelman.shadow' version '6.1.0'\n+    id 'java'\n+}\n+\n+import org.apache.tools.ant.filters.ReplaceTokens\n+import com.github.jengelman.gradle.plugins.shadow.tasks.ConfigureShadowRelocation\n+\n+allprojects {\n+    group = 'net.ess3'\n+    version = '2.18.1'\n+}\n+\n+def commitsSinceLastTag() {\n+    def tags = grgit.tag.list().stream().map({it.commit}).toList()\n+    def commit = grgit.head()\n+    def depth = 0\n+    while (true) {\n+        if (tags.contains(commit))\n+            return depth\n+        depth++\n+        commit = grgit.resolve.toCommit(commit.parentIds.get(0))\n+    }\n+}\n+\n+ext {\n+    GIT_COMMIT = grgit.head().abbreviatedId\n+    GIT_DEPTH = commitsSinceLastTag()\n+\n+    checkstyleVersion = '8.36.2'\n+    spigotVersion = '1.16.3-R0.1-SNAPSHOT'\n+}\n+\n+artifacts {\n+    tasks.shadowJar.outputs.files.each {\n+        archives(it) {\n+            builtBy shadowJar\n+        }\n+    }\n+}\n+\n+task relocateShadowJar(type: ConfigureShadowRelocation) {\n+    target = tasks.shadowJar\n+}\n+\n+tasks.shadowJar.dependsOn tasks.relocateShadowJar\n+\n+subprojects {\n+    apply plugin: 'java'\n+    apply plugin: 'java-library'\n+    apply plugin: 'checkstyle'\n+\n+    checkstyle {\n+        toolVersion = \"${checkstyleVersion}\"\n+        showViolations = true\n+        configFile = rootProject.file('.checkstyle/checkstyle.xml')\n+        configProperties = [\"checkstyle.suppressions.file\": rootProject.file('.checkstyle/suppressions.xml')]\n+    }\n+\n+    checkstyleMain {\n+        source = sourceSets.main.allSource\n+    }\n+\n+    tasks.build.dependsOn tasks.checkstyleMain\n+\n+    repositories {\n+        mavenLocal()\n+        mavenCentral()\n+        maven { url = 'https://ci.ender.zone/plugin/repository/everything/' }\n+        maven { url = 'https://hub.spigotmc.org/nexus/content/groups/public/' }\n+        maven { url = 'https://papermc.io/repo/repository/maven-public/' }\n+        maven { url = 'https://jitpack.io' }\n+    }\n+\n+    dependencies {\n+        testImplementation 'junit:junit:4.12'\n+        testImplementation 'org.mockito:mockito-core:3.2.0'\n+\n+        if (project.name != \"1_8Provider\" && project.name != \"PaperProvider\" && project.name != \"NMSReflectionProvider\") { // These providers use their own bukkit versions\n+            api \"org.spigotmc:spigot-api:${spigotVersion}\"\n+        }\n+    }\n+\n+    buildscript {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "97ee48f9c3069ce9d1a2fcf21540c9bc9a069381"}, "originalPosition": 85}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0NzgyMDEzOnYy", "diffSide": "RIGHT", "path": "build.gradle", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQyMToxNjozNlrOHfY11g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQyMToxNjozNlrOHfY11g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjY3NDkwMg==", "bodyText": "Apply the release flag here: https://github.com/KyoriPowered/indra/blob/master/indra-common/src/main/kotlin/net/kyori/indra/IndraPlugin.kt#L57", "url": "https://github.com/EssentialsX/Essentials/pull/3720#discussion_r502674902", "createdAt": "2020-10-09T21:16:36Z", "author": {"login": "zml2008"}, "path": "build.gradle", "diffHunk": "@@ -0,0 +1,143 @@\n+plugins {\n+    id 'org.ajoberstar.grgit' version '4.1.0'\n+    id 'com.github.johnrengelman.shadow' version '6.1.0'\n+    id 'java'\n+}\n+\n+import org.apache.tools.ant.filters.ReplaceTokens\n+import com.github.jengelman.gradle.plugins.shadow.tasks.ConfigureShadowRelocation\n+\n+allprojects {\n+    group = 'net.ess3'\n+    version = '2.18.1'\n+}\n+\n+def commitsSinceLastTag() {\n+    def tags = grgit.tag.list().stream().map({it.commit}).toList()\n+    def commit = grgit.head()\n+    def depth = 0\n+    while (true) {\n+        if (tags.contains(commit))\n+            return depth\n+        depth++\n+        commit = grgit.resolve.toCommit(commit.parentIds.get(0))\n+    }\n+}\n+\n+ext {\n+    GIT_COMMIT = grgit.head().abbreviatedId\n+    GIT_DEPTH = commitsSinceLastTag()\n+\n+    checkstyleVersion = '8.36.2'\n+    spigotVersion = '1.16.3-R0.1-SNAPSHOT'\n+}\n+\n+artifacts {\n+    tasks.shadowJar.outputs.files.each {\n+        archives(it) {\n+            builtBy shadowJar\n+        }\n+    }\n+}\n+\n+task relocateShadowJar(type: ConfigureShadowRelocation) {\n+    target = tasks.shadowJar\n+}\n+\n+tasks.shadowJar.dependsOn tasks.relocateShadowJar\n+\n+subprojects {\n+    apply plugin: 'java'\n+    apply plugin: 'java-library'\n+    apply plugin: 'checkstyle'\n+\n+    checkstyle {\n+        toolVersion = \"${checkstyleVersion}\"\n+        showViolations = true\n+        configFile = rootProject.file('.checkstyle/checkstyle.xml')\n+        configProperties = [\"checkstyle.suppressions.file\": rootProject.file('.checkstyle/suppressions.xml')]\n+    }\n+\n+    checkstyleMain {\n+        source = sourceSets.main.allSource\n+    }\n+\n+    tasks.build.dependsOn tasks.checkstyleMain\n+\n+    repositories {\n+        mavenLocal()\n+        mavenCentral()\n+        maven { url = 'https://ci.ender.zone/plugin/repository/everything/' }\n+        maven { url = 'https://hub.spigotmc.org/nexus/content/groups/public/' }\n+        maven { url = 'https://papermc.io/repo/repository/maven-public/' }\n+        maven { url = 'https://jitpack.io' }\n+    }\n+\n+    dependencies {\n+        testImplementation 'junit:junit:4.12'\n+        testImplementation 'org.mockito:mockito-core:3.2.0'\n+\n+        if (project.name != \"1_8Provider\" && project.name != \"PaperProvider\" && project.name != \"NMSReflectionProvider\") { // These providers use their own bukkit versions\n+            api \"org.spigotmc:spigot-api:${spigotVersion}\"\n+        }\n+    }\n+\n+    buildscript {\n+        repositories {\n+            maven {\n+                url \"https://plugins.gradle.org/m2/\"\n+            }\n+        }\n+        dependencies {\n+            classpath \"com.github.jengelman.gradle.plugins:shadow:6.1.0\"\n+        }\n+    }\n+\n+    processResources {\n+        filter(ReplaceTokens, beginToken: '${',\n+                endToken: '}', tokens: [\"full.version\": \"${version}.${GIT_DEPTH}\".toString()])\n+    }\n+\n+    sourceCompatibility = '1.8'\n+    compileJava.options.encoding = 'UTF-8'\n+\n+    tasks.withType(JavaCompile) {\n+        options.encoding = 'UTF-8'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "97ee48f9c3069ce9d1a2fcf21540c9bc9a069381"}, "originalPosition": 105}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0NzgyODUxOnYy", "diffSide": "RIGHT", "path": "Essentials/src/main/java/com/earth2me/essentials/utils/StringUtil.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQyMToyMDowM1rOHfY6uw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMFQwMjozNjozM1rOHfciwQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjY3NjE1NQ==", "bodyText": "If you're trying to suppress something from Checkstyle, you should be suppressing individual checks, not everything. https://checkstyle.org/config_filters.html#SuppressWarningsFilter might be useful", "url": "https://github.com/EssentialsX/Essentials/pull/3720#discussion_r502676155", "createdAt": "2020-10-09T21:20:03Z", "author": {"login": "zml2008"}, "path": "Essentials/src/main/java/com/earth2me/essentials/utils/StringUtil.java", "diffHunk": "@@ -8,6 +8,7 @@\n public final class StringUtil {\n     private static final Pattern INVALIDFILECHARS = Pattern.compile(\"[^a-z0-9-]\");\n     private static final Pattern STRICTINVALIDCHARS = Pattern.compile(\"[^a-z0-9]\");\n+    @SuppressWarnings(\"CheckStyle\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "97ee48f9c3069ce9d1a2fcf21540c9bc9a069381"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjczNTU1Mw==", "bodyText": "I don't want to fully suppress it, it's just this one place", "url": "https://github.com/EssentialsX/Essentials/pull/3720#discussion_r502735553", "createdAt": "2020-10-10T02:36:33Z", "author": {"login": "JRoy"}, "path": "Essentials/src/main/java/com/earth2me/essentials/utils/StringUtil.java", "diffHunk": "@@ -8,6 +8,7 @@\n public final class StringUtil {\n     private static final Pattern INVALIDFILECHARS = Pattern.compile(\"[^a-z0-9-]\");\n     private static final Pattern STRICTINVALIDCHARS = Pattern.compile(\"[^a-z0-9]\");\n+    @SuppressWarnings(\"CheckStyle\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjY3NjE1NQ=="}, "originalCommit": {"oid": "97ee48f9c3069ce9d1a2fcf21540c9bc9a069381"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0NzgzMzY1OnYy", "diffSide": "RIGHT", "path": "build.gradle", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQyMToyMjoxMFrOHfY9zA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQyMToyMjoxMFrOHfY9zA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjY3Njk0MA==", "bodyText": "Jitpack should probably be specifically restricted to artifacts that supposed come from there -- at the moment is that just Vault?\nhttps://docs.gradle.org/current/userguide/declaring_repositories.html#sec:repository-content-filtering", "url": "https://github.com/EssentialsX/Essentials/pull/3720#discussion_r502676940", "createdAt": "2020-10-09T21:22:10Z", "author": {"login": "zml2008"}, "path": "build.gradle", "diffHunk": "@@ -0,0 +1,143 @@\n+plugins {\n+    id 'org.ajoberstar.grgit' version '4.1.0'\n+    id 'com.github.johnrengelman.shadow' version '6.1.0'\n+    id 'java'\n+}\n+\n+import org.apache.tools.ant.filters.ReplaceTokens\n+import com.github.jengelman.gradle.plugins.shadow.tasks.ConfigureShadowRelocation\n+\n+allprojects {\n+    group = 'net.ess3'\n+    version = '2.18.1'\n+}\n+\n+def commitsSinceLastTag() {\n+    def tags = grgit.tag.list().stream().map({it.commit}).toList()\n+    def commit = grgit.head()\n+    def depth = 0\n+    while (true) {\n+        if (tags.contains(commit))\n+            return depth\n+        depth++\n+        commit = grgit.resolve.toCommit(commit.parentIds.get(0))\n+    }\n+}\n+\n+ext {\n+    GIT_COMMIT = grgit.head().abbreviatedId\n+    GIT_DEPTH = commitsSinceLastTag()\n+\n+    checkstyleVersion = '8.36.2'\n+    spigotVersion = '1.16.3-R0.1-SNAPSHOT'\n+}\n+\n+artifacts {\n+    tasks.shadowJar.outputs.files.each {\n+        archives(it) {\n+            builtBy shadowJar\n+        }\n+    }\n+}\n+\n+task relocateShadowJar(type: ConfigureShadowRelocation) {\n+    target = tasks.shadowJar\n+}\n+\n+tasks.shadowJar.dependsOn tasks.relocateShadowJar\n+\n+subprojects {\n+    apply plugin: 'java'\n+    apply plugin: 'java-library'\n+    apply plugin: 'checkstyle'\n+\n+    checkstyle {\n+        toolVersion = \"${checkstyleVersion}\"\n+        showViolations = true\n+        configFile = rootProject.file('.checkstyle/checkstyle.xml')\n+        configProperties = [\"checkstyle.suppressions.file\": rootProject.file('.checkstyle/suppressions.xml')]\n+    }\n+\n+    checkstyleMain {\n+        source = sourceSets.main.allSource\n+    }\n+\n+    tasks.build.dependsOn tasks.checkstyleMain\n+\n+    repositories {\n+        mavenLocal()\n+        mavenCentral()\n+        maven { url = 'https://ci.ender.zone/plugin/repository/everything/' }\n+        maven { url = 'https://hub.spigotmc.org/nexus/content/groups/public/' }\n+        maven { url = 'https://papermc.io/repo/repository/maven-public/' }\n+        maven { url = 'https://jitpack.io' }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "97ee48f9c3069ce9d1a2fcf21540c9bc9a069381"}, "originalPosition": 73}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0NzgzNjU4OnYy", "diffSide": "RIGHT", "path": "build.gradle", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQyMToyMzoyOVrOHfY_hg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQyMToyMzoyOVrOHfY_hg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjY3NzM4Mg==", "bodyText": "Why are you applying the java and shadow plugins to the root project? There isn't any Java source here.", "url": "https://github.com/EssentialsX/Essentials/pull/3720#discussion_r502677382", "createdAt": "2020-10-09T21:23:29Z", "author": {"login": "zml2008"}, "path": "build.gradle", "diffHunk": "@@ -0,0 +1,143 @@\n+plugins {\n+    id 'org.ajoberstar.grgit' version '4.1.0'\n+    id 'com.github.johnrengelman.shadow' version '6.1.0'\n+    id 'java'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "97ee48f9c3069ce9d1a2fcf21540c9bc9a069381"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0Nzg0MjgyOnYy", "diffSide": "RIGHT", "path": "build.gradle", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQyMToyNjoxNVrOHfZDRQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQyMjowNDo1NlrOHfZqMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjY3ODM0MQ==", "bodyText": "you should be able to just do from(it) here -- then you don't have to explicitly declare this task's dependency on the output tasks.", "url": "https://github.com/EssentialsX/Essentials/pull/3720#discussion_r502678341", "createdAt": "2020-10-09T21:26:15Z", "author": {"login": "zml2008"}, "path": "build.gradle", "diffHunk": "@@ -0,0 +1,143 @@\n+plugins {\n+    id 'org.ajoberstar.grgit' version '4.1.0'\n+    id 'com.github.johnrengelman.shadow' version '6.1.0'\n+    id 'java'\n+}\n+\n+import org.apache.tools.ant.filters.ReplaceTokens\n+import com.github.jengelman.gradle.plugins.shadow.tasks.ConfigureShadowRelocation\n+\n+allprojects {\n+    group = 'net.ess3'\n+    version = '2.18.1'\n+}\n+\n+def commitsSinceLastTag() {\n+    def tags = grgit.tag.list().stream().map({it.commit}).toList()\n+    def commit = grgit.head()\n+    def depth = 0\n+    while (true) {\n+        if (tags.contains(commit))\n+            return depth\n+        depth++\n+        commit = grgit.resolve.toCommit(commit.parentIds.get(0))\n+    }\n+}\n+\n+ext {\n+    GIT_COMMIT = grgit.head().abbreviatedId\n+    GIT_DEPTH = commitsSinceLastTag()\n+\n+    checkstyleVersion = '8.36.2'\n+    spigotVersion = '1.16.3-R0.1-SNAPSHOT'\n+}\n+\n+artifacts {\n+    tasks.shadowJar.outputs.files.each {\n+        archives(it) {\n+            builtBy shadowJar\n+        }\n+    }\n+}\n+\n+task relocateShadowJar(type: ConfigureShadowRelocation) {\n+    target = tasks.shadowJar\n+}\n+\n+tasks.shadowJar.dependsOn tasks.relocateShadowJar\n+\n+subprojects {\n+    apply plugin: 'java'\n+    apply plugin: 'java-library'\n+    apply plugin: 'checkstyle'\n+\n+    checkstyle {\n+        toolVersion = \"${checkstyleVersion}\"\n+        showViolations = true\n+        configFile = rootProject.file('.checkstyle/checkstyle.xml')\n+        configProperties = [\"checkstyle.suppressions.file\": rootProject.file('.checkstyle/suppressions.xml')]\n+    }\n+\n+    checkstyleMain {\n+        source = sourceSets.main.allSource\n+    }\n+\n+    tasks.build.dependsOn tasks.checkstyleMain\n+\n+    repositories {\n+        mavenLocal()\n+        mavenCentral()\n+        maven { url = 'https://ci.ender.zone/plugin/repository/everything/' }\n+        maven { url = 'https://hub.spigotmc.org/nexus/content/groups/public/' }\n+        maven { url = 'https://papermc.io/repo/repository/maven-public/' }\n+        maven { url = 'https://jitpack.io' }\n+    }\n+\n+    dependencies {\n+        testImplementation 'junit:junit:4.12'\n+        testImplementation 'org.mockito:mockito-core:3.2.0'\n+\n+        if (project.name != \"1_8Provider\" && project.name != \"PaperProvider\" && project.name != \"NMSReflectionProvider\") { // These providers use their own bukkit versions\n+            api \"org.spigotmc:spigot-api:${spigotVersion}\"\n+        }\n+    }\n+\n+    buildscript {\n+        repositories {\n+            maven {\n+                url \"https://plugins.gradle.org/m2/\"\n+            }\n+        }\n+        dependencies {\n+            classpath \"com.github.jengelman.gradle.plugins:shadow:6.1.0\"\n+        }\n+    }\n+\n+    processResources {\n+        filter(ReplaceTokens, beginToken: '${',\n+                endToken: '}', tokens: [\"full.version\": \"${version}.${GIT_DEPTH}\".toString()])\n+    }\n+\n+    sourceCompatibility = '1.8'\n+    compileJava.options.encoding = 'UTF-8'\n+\n+    tasks.withType(JavaCompile) {\n+        options.encoding = 'UTF-8'\n+    }\n+    tasks.withType(Jar) {\n+        archiveVersion.set(\"${this.version}.${GIT_DEPTH}\".toString())\n+    }\n+}\n+\n+def outputTasks() {\n+    [\":EssentialsX:shadowJar\", \":EssentialsXAntiBuild:jar\", \":EssentialsXChat:jar\",\n+     \":EssentialsXGeoIP:shadowJar\", \":EssentialsXProtect:jar\", \":EssentialsXSpawn:shadowJar\",\n+     \":EssentialsXXMPP:shadowJar\"].stream().map({ tasks.findByPath(it) })\n+}\n+\n+task copyToJars(type: Copy) {\n+    outputTasks().forEach {\n+        println it\n+        from(it.outputs.files)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "97ee48f9c3069ce9d1a2fcf21540c9bc9a069381"}, "originalPosition": 121}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjY4ODMwNA==", "bodyText": "yep! also spot the missed debug println \ud83d\ude04", "url": "https://github.com/EssentialsX/Essentials/pull/3720#discussion_r502688304", "createdAt": "2020-10-09T22:04:56Z", "author": {"login": "JRoy"}, "path": "build.gradle", "diffHunk": "@@ -0,0 +1,143 @@\n+plugins {\n+    id 'org.ajoberstar.grgit' version '4.1.0'\n+    id 'com.github.johnrengelman.shadow' version '6.1.0'\n+    id 'java'\n+}\n+\n+import org.apache.tools.ant.filters.ReplaceTokens\n+import com.github.jengelman.gradle.plugins.shadow.tasks.ConfigureShadowRelocation\n+\n+allprojects {\n+    group = 'net.ess3'\n+    version = '2.18.1'\n+}\n+\n+def commitsSinceLastTag() {\n+    def tags = grgit.tag.list().stream().map({it.commit}).toList()\n+    def commit = grgit.head()\n+    def depth = 0\n+    while (true) {\n+        if (tags.contains(commit))\n+            return depth\n+        depth++\n+        commit = grgit.resolve.toCommit(commit.parentIds.get(0))\n+    }\n+}\n+\n+ext {\n+    GIT_COMMIT = grgit.head().abbreviatedId\n+    GIT_DEPTH = commitsSinceLastTag()\n+\n+    checkstyleVersion = '8.36.2'\n+    spigotVersion = '1.16.3-R0.1-SNAPSHOT'\n+}\n+\n+artifacts {\n+    tasks.shadowJar.outputs.files.each {\n+        archives(it) {\n+            builtBy shadowJar\n+        }\n+    }\n+}\n+\n+task relocateShadowJar(type: ConfigureShadowRelocation) {\n+    target = tasks.shadowJar\n+}\n+\n+tasks.shadowJar.dependsOn tasks.relocateShadowJar\n+\n+subprojects {\n+    apply plugin: 'java'\n+    apply plugin: 'java-library'\n+    apply plugin: 'checkstyle'\n+\n+    checkstyle {\n+        toolVersion = \"${checkstyleVersion}\"\n+        showViolations = true\n+        configFile = rootProject.file('.checkstyle/checkstyle.xml')\n+        configProperties = [\"checkstyle.suppressions.file\": rootProject.file('.checkstyle/suppressions.xml')]\n+    }\n+\n+    checkstyleMain {\n+        source = sourceSets.main.allSource\n+    }\n+\n+    tasks.build.dependsOn tasks.checkstyleMain\n+\n+    repositories {\n+        mavenLocal()\n+        mavenCentral()\n+        maven { url = 'https://ci.ender.zone/plugin/repository/everything/' }\n+        maven { url = 'https://hub.spigotmc.org/nexus/content/groups/public/' }\n+        maven { url = 'https://papermc.io/repo/repository/maven-public/' }\n+        maven { url = 'https://jitpack.io' }\n+    }\n+\n+    dependencies {\n+        testImplementation 'junit:junit:4.12'\n+        testImplementation 'org.mockito:mockito-core:3.2.0'\n+\n+        if (project.name != \"1_8Provider\" && project.name != \"PaperProvider\" && project.name != \"NMSReflectionProvider\") { // These providers use their own bukkit versions\n+            api \"org.spigotmc:spigot-api:${spigotVersion}\"\n+        }\n+    }\n+\n+    buildscript {\n+        repositories {\n+            maven {\n+                url \"https://plugins.gradle.org/m2/\"\n+            }\n+        }\n+        dependencies {\n+            classpath \"com.github.jengelman.gradle.plugins:shadow:6.1.0\"\n+        }\n+    }\n+\n+    processResources {\n+        filter(ReplaceTokens, beginToken: '${',\n+                endToken: '}', tokens: [\"full.version\": \"${version}.${GIT_DEPTH}\".toString()])\n+    }\n+\n+    sourceCompatibility = '1.8'\n+    compileJava.options.encoding = 'UTF-8'\n+\n+    tasks.withType(JavaCompile) {\n+        options.encoding = 'UTF-8'\n+    }\n+    tasks.withType(Jar) {\n+        archiveVersion.set(\"${this.version}.${GIT_DEPTH}\".toString())\n+    }\n+}\n+\n+def outputTasks() {\n+    [\":EssentialsX:shadowJar\", \":EssentialsXAntiBuild:jar\", \":EssentialsXChat:jar\",\n+     \":EssentialsXGeoIP:shadowJar\", \":EssentialsXProtect:jar\", \":EssentialsXSpawn:shadowJar\",\n+     \":EssentialsXXMPP:shadowJar\"].stream().map({ tasks.findByPath(it) })\n+}\n+\n+task copyToJars(type: Copy) {\n+    outputTasks().forEach {\n+        println it\n+        from(it.outputs.files)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjY3ODM0MQ=="}, "originalCommit": {"oid": "97ee48f9c3069ce9d1a2fcf21540c9bc9a069381"}, "originalPosition": 121}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0Nzg0MzQxOnYy", "diffSide": "RIGHT", "path": "build.gradle", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQyMToyNjozMVrOHfZDnQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQyMjowMjoyMFrOHfZn-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjY3ODQyOQ==", "bodyText": "I assume the stuff from here on is left over from an earlier attempt?", "url": "https://github.com/EssentialsX/Essentials/pull/3720#discussion_r502678429", "createdAt": "2020-10-09T21:26:31Z", "author": {"login": "zml2008"}, "path": "build.gradle", "diffHunk": "@@ -0,0 +1,143 @@\n+plugins {\n+    id 'org.ajoberstar.grgit' version '4.1.0'\n+    id 'com.github.johnrengelman.shadow' version '6.1.0'\n+    id 'java'\n+}\n+\n+import org.apache.tools.ant.filters.ReplaceTokens\n+import com.github.jengelman.gradle.plugins.shadow.tasks.ConfigureShadowRelocation\n+\n+allprojects {\n+    group = 'net.ess3'\n+    version = '2.18.1'\n+}\n+\n+def commitsSinceLastTag() {\n+    def tags = grgit.tag.list().stream().map({it.commit}).toList()\n+    def commit = grgit.head()\n+    def depth = 0\n+    while (true) {\n+        if (tags.contains(commit))\n+            return depth\n+        depth++\n+        commit = grgit.resolve.toCommit(commit.parentIds.get(0))\n+    }\n+}\n+\n+ext {\n+    GIT_COMMIT = grgit.head().abbreviatedId\n+    GIT_DEPTH = commitsSinceLastTag()\n+\n+    checkstyleVersion = '8.36.2'\n+    spigotVersion = '1.16.3-R0.1-SNAPSHOT'\n+}\n+\n+artifacts {\n+    tasks.shadowJar.outputs.files.each {\n+        archives(it) {\n+            builtBy shadowJar\n+        }\n+    }\n+}\n+\n+task relocateShadowJar(type: ConfigureShadowRelocation) {\n+    target = tasks.shadowJar\n+}\n+\n+tasks.shadowJar.dependsOn tasks.relocateShadowJar\n+\n+subprojects {\n+    apply plugin: 'java'\n+    apply plugin: 'java-library'\n+    apply plugin: 'checkstyle'\n+\n+    checkstyle {\n+        toolVersion = \"${checkstyleVersion}\"\n+        showViolations = true\n+        configFile = rootProject.file('.checkstyle/checkstyle.xml')\n+        configProperties = [\"checkstyle.suppressions.file\": rootProject.file('.checkstyle/suppressions.xml')]\n+    }\n+\n+    checkstyleMain {\n+        source = sourceSets.main.allSource\n+    }\n+\n+    tasks.build.dependsOn tasks.checkstyleMain\n+\n+    repositories {\n+        mavenLocal()\n+        mavenCentral()\n+        maven { url = 'https://ci.ender.zone/plugin/repository/everything/' }\n+        maven { url = 'https://hub.spigotmc.org/nexus/content/groups/public/' }\n+        maven { url = 'https://papermc.io/repo/repository/maven-public/' }\n+        maven { url = 'https://jitpack.io' }\n+    }\n+\n+    dependencies {\n+        testImplementation 'junit:junit:4.12'\n+        testImplementation 'org.mockito:mockito-core:3.2.0'\n+\n+        if (project.name != \"1_8Provider\" && project.name != \"PaperProvider\" && project.name != \"NMSReflectionProvider\") { // These providers use their own bukkit versions\n+            api \"org.spigotmc:spigot-api:${spigotVersion}\"\n+        }\n+    }\n+\n+    buildscript {\n+        repositories {\n+            maven {\n+                url \"https://plugins.gradle.org/m2/\"\n+            }\n+        }\n+        dependencies {\n+            classpath \"com.github.jengelman.gradle.plugins:shadow:6.1.0\"\n+        }\n+    }\n+\n+    processResources {\n+        filter(ReplaceTokens, beginToken: '${',\n+                endToken: '}', tokens: [\"full.version\": \"${version}.${GIT_DEPTH}\".toString()])\n+    }\n+\n+    sourceCompatibility = '1.8'\n+    compileJava.options.encoding = 'UTF-8'\n+\n+    tasks.withType(JavaCompile) {\n+        options.encoding = 'UTF-8'\n+    }\n+    tasks.withType(Jar) {\n+        archiveVersion.set(\"${this.version}.${GIT_DEPTH}\".toString())\n+    }\n+}\n+\n+def outputTasks() {\n+    [\":EssentialsX:shadowJar\", \":EssentialsXAntiBuild:jar\", \":EssentialsXChat:jar\",\n+     \":EssentialsXGeoIP:shadowJar\", \":EssentialsXProtect:jar\", \":EssentialsXSpawn:shadowJar\",\n+     \":EssentialsXXMPP:shadowJar\"].stream().map({ tasks.findByPath(it) })\n+}\n+\n+task copyToJars(type: Copy) {\n+    outputTasks().forEach {\n+        println it\n+        from(it.outputs.files)\n+    }\n+\n+    rename '(.*)-all.jar', '$1.jar'\n+\n+    into file('jars')\n+}\n+\n+task cleanJars() {\n+    delete file('jars')\n+}\n+\n+build.dependsOn copyToJars\n+clean.dependsOn cleanJars\n+copyToJars.dependsOn tasks.findByPath(\":EssentialsX:processResources\")\n+tasks.build.dependsOn tasks.shadowJar\n+\n+outputTasks().forEach { copyToJars.dependsOn it }\n+\n+compileJava.options.encoding = 'UTF-8'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "97ee48f9c3069ce9d1a2fcf21540c9bc9a069381"}, "originalPosition": 140}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjY4NzczNw==", "bodyText": "yeah :P", "url": "https://github.com/EssentialsX/Essentials/pull/3720#discussion_r502687737", "createdAt": "2020-10-09T22:02:20Z", "author": {"login": "JRoy"}, "path": "build.gradle", "diffHunk": "@@ -0,0 +1,143 @@\n+plugins {\n+    id 'org.ajoberstar.grgit' version '4.1.0'\n+    id 'com.github.johnrengelman.shadow' version '6.1.0'\n+    id 'java'\n+}\n+\n+import org.apache.tools.ant.filters.ReplaceTokens\n+import com.github.jengelman.gradle.plugins.shadow.tasks.ConfigureShadowRelocation\n+\n+allprojects {\n+    group = 'net.ess3'\n+    version = '2.18.1'\n+}\n+\n+def commitsSinceLastTag() {\n+    def tags = grgit.tag.list().stream().map({it.commit}).toList()\n+    def commit = grgit.head()\n+    def depth = 0\n+    while (true) {\n+        if (tags.contains(commit))\n+            return depth\n+        depth++\n+        commit = grgit.resolve.toCommit(commit.parentIds.get(0))\n+    }\n+}\n+\n+ext {\n+    GIT_COMMIT = grgit.head().abbreviatedId\n+    GIT_DEPTH = commitsSinceLastTag()\n+\n+    checkstyleVersion = '8.36.2'\n+    spigotVersion = '1.16.3-R0.1-SNAPSHOT'\n+}\n+\n+artifacts {\n+    tasks.shadowJar.outputs.files.each {\n+        archives(it) {\n+            builtBy shadowJar\n+        }\n+    }\n+}\n+\n+task relocateShadowJar(type: ConfigureShadowRelocation) {\n+    target = tasks.shadowJar\n+}\n+\n+tasks.shadowJar.dependsOn tasks.relocateShadowJar\n+\n+subprojects {\n+    apply plugin: 'java'\n+    apply plugin: 'java-library'\n+    apply plugin: 'checkstyle'\n+\n+    checkstyle {\n+        toolVersion = \"${checkstyleVersion}\"\n+        showViolations = true\n+        configFile = rootProject.file('.checkstyle/checkstyle.xml')\n+        configProperties = [\"checkstyle.suppressions.file\": rootProject.file('.checkstyle/suppressions.xml')]\n+    }\n+\n+    checkstyleMain {\n+        source = sourceSets.main.allSource\n+    }\n+\n+    tasks.build.dependsOn tasks.checkstyleMain\n+\n+    repositories {\n+        mavenLocal()\n+        mavenCentral()\n+        maven { url = 'https://ci.ender.zone/plugin/repository/everything/' }\n+        maven { url = 'https://hub.spigotmc.org/nexus/content/groups/public/' }\n+        maven { url = 'https://papermc.io/repo/repository/maven-public/' }\n+        maven { url = 'https://jitpack.io' }\n+    }\n+\n+    dependencies {\n+        testImplementation 'junit:junit:4.12'\n+        testImplementation 'org.mockito:mockito-core:3.2.0'\n+\n+        if (project.name != \"1_8Provider\" && project.name != \"PaperProvider\" && project.name != \"NMSReflectionProvider\") { // These providers use their own bukkit versions\n+            api \"org.spigotmc:spigot-api:${spigotVersion}\"\n+        }\n+    }\n+\n+    buildscript {\n+        repositories {\n+            maven {\n+                url \"https://plugins.gradle.org/m2/\"\n+            }\n+        }\n+        dependencies {\n+            classpath \"com.github.jengelman.gradle.plugins:shadow:6.1.0\"\n+        }\n+    }\n+\n+    processResources {\n+        filter(ReplaceTokens, beginToken: '${',\n+                endToken: '}', tokens: [\"full.version\": \"${version}.${GIT_DEPTH}\".toString()])\n+    }\n+\n+    sourceCompatibility = '1.8'\n+    compileJava.options.encoding = 'UTF-8'\n+\n+    tasks.withType(JavaCompile) {\n+        options.encoding = 'UTF-8'\n+    }\n+    tasks.withType(Jar) {\n+        archiveVersion.set(\"${this.version}.${GIT_DEPTH}\".toString())\n+    }\n+}\n+\n+def outputTasks() {\n+    [\":EssentialsX:shadowJar\", \":EssentialsXAntiBuild:jar\", \":EssentialsXChat:jar\",\n+     \":EssentialsXGeoIP:shadowJar\", \":EssentialsXProtect:jar\", \":EssentialsXSpawn:shadowJar\",\n+     \":EssentialsXXMPP:shadowJar\"].stream().map({ tasks.findByPath(it) })\n+}\n+\n+task copyToJars(type: Copy) {\n+    outputTasks().forEach {\n+        println it\n+        from(it.outputs.files)\n+    }\n+\n+    rename '(.*)-all.jar', '$1.jar'\n+\n+    into file('jars')\n+}\n+\n+task cleanJars() {\n+    delete file('jars')\n+}\n+\n+build.dependsOn copyToJars\n+clean.dependsOn cleanJars\n+copyToJars.dependsOn tasks.findByPath(\":EssentialsX:processResources\")\n+tasks.build.dependsOn tasks.shadowJar\n+\n+outputTasks().forEach { copyToJars.dependsOn it }\n+\n+compileJava.options.encoding = 'UTF-8'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjY3ODQyOQ=="}, "originalCommit": {"oid": "97ee48f9c3069ce9d1a2fcf21540c9bc9a069381"}, "originalPosition": 140}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0Nzg0NDY5OnYy", "diffSide": "RIGHT", "path": "gradle/wrapper/gradle-wrapper.properties", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQyMToyNjo1OFrOHfZERw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQyMTo1Njo0MVrOHfZjng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjY3ODU5OQ==", "bodyText": "is this supposed to be here?", "url": "https://github.com/EssentialsX/Essentials/pull/3720#discussion_r502678599", "createdAt": "2020-10-09T21:26:58Z", "author": {"login": "zml2008"}, "path": "gradle/wrapper/gradle-wrapper.properties", "diffHunk": "@@ -0,0 +1,6 @@\n+distributionBase=GRADLE_USER_HOME\n+distributionPath=wrapper/dists\n+distributionUrl=https\\://services.gradle.org/distributions/gradle-6.6.1-bin.zip\n+zipStoreBase=GRADLE_USER_HOME\n+zipStorePath=wrapper/dists\n+org.gral", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "97ee48f9c3069ce9d1a2fcf21540c9bc9a069381"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjY4NjYyMg==", "bodyText": "oops", "url": "https://github.com/EssentialsX/Essentials/pull/3720#discussion_r502686622", "createdAt": "2020-10-09T21:56:41Z", "author": {"login": "JRoy"}, "path": "gradle/wrapper/gradle-wrapper.properties", "diffHunk": "@@ -0,0 +1,6 @@\n+distributionBase=GRADLE_USER_HOME\n+distributionPath=wrapper/dists\n+distributionUrl=https\\://services.gradle.org/distributions/gradle-6.6.1-bin.zip\n+zipStoreBase=GRADLE_USER_HOME\n+zipStorePath=wrapper/dists\n+org.gral", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjY3ODU5OQ=="}, "originalCommit": {"oid": "97ee48f9c3069ce9d1a2fcf21540c9bc9a069381"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0Nzg0ODk3OnYy", "diffSide": "LEFT", "path": ".gitignore", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQyMToyODo0NVrOHfZGzw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQyMToyODo0NVrOHfZGzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjY3OTI0Nw==", "bodyText": "out/ shows up from some IDE setups, probably shouldn't remove it", "url": "https://github.com/EssentialsX/Essentials/pull/3720#discussion_r502679247", "createdAt": "2020-10-09T21:28:45Z", "author": {"login": "zml2008"}, "path": ".gitignore", "diffHunk": "@@ -17,6 +17,6 @@\n /Essentials/usermap.csv\n \n # Build files\n-target/\n+.gradle/\n jars/\n-out/", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "97ee48f9c3069ce9d1a2fcf21540c9bc9a069381"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxMzA5MTUxOnYy", "diffSide": "RIGHT", "path": "Essentials/build.gradle", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMlQxMTo1NzowNVrOH32YlA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMlQxMTo1NzowNVrOH32YlA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODMyNDc1Ng==", "bodyText": "group: bukkit?", "url": "https://github.com/EssentialsX/Essentials/pull/3720#discussion_r528324756", "createdAt": "2020-11-22T11:57:05Z", "author": {"login": "mdcfe"}, "path": "Essentials/build.gradle", "diffHunk": "@@ -0,0 +1,25 @@\n+dependencies {\n+    compileOnly 'com.github.milkbowl:VaultAPI:1.7'\n+    compileOnly 'net.luckperms:api:5.0'\n+\n+    api 'io.papermc:paperlib:1.0.6-SNAPSHOT'\n+\n+    // Providers\n+    api project(':providers:BaseProviders')\n+    api project(':providers:PaperProvider')\n+    api project(':providers:NMSReflectionProvider')\n+    api(project(':providers:1_8Provider')) {\n+        exclude group: 'bukkit'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c41a4e7bf2ccb58c50d27632ee24b409038992fd"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxMzA5NjYxOnYy", "diffSide": "RIGHT", "path": "EssentialsSpawn/build.gradle", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMlQxMjowMjozOFrOH32bAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMlQxMjowMjozOFrOH32bAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODMyNTM3OA==", "bodyText": "Shouldn't this be compileOnly?", "url": "https://github.com/EssentialsX/Essentials/pull/3720#discussion_r528325378", "createdAt": "2020-11-22T12:02:38Z", "author": {"login": "mdcfe"}, "path": "EssentialsSpawn/build.gradle", "diffHunk": "@@ -0,0 +1,10 @@\n+dependencies {\n+    implementation project(':EssentialsX')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c41a4e7bf2ccb58c50d27632ee24b409038992fd"}, "originalPosition": 2}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxMzA5NjgzOnYy", "diffSide": "RIGHT", "path": "EssentialsSpawn/build.gradle", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMlQxMjowMzoxOVrOH32bKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMlQxMjowMzoxOVrOH32bKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODMyNTQxNw==", "bodyText": "We could consider using EssentialsX's shaded PaperLib instead of shading our own", "url": "https://github.com/EssentialsX/Essentials/pull/3720#discussion_r528325417", "createdAt": "2020-11-22T12:03:19Z", "author": {"login": "mdcfe"}, "path": "EssentialsSpawn/build.gradle", "diffHunk": "@@ -0,0 +1,10 @@\n+dependencies {\n+    implementation project(':EssentialsX')\n+}\n+\n+shadowJar {\n+    dependencies {\n+        include (dependency('io.papermc:paperlib'))\n+    }\n+    relocate 'io.papermc.lib', 'com.earth2me.essentials.spawn.paperlib'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c41a4e7bf2ccb58c50d27632ee24b409038992fd"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxMzA5OTA4OnYy", "diffSide": "RIGHT", "path": "build.gradle", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMlQxMjowNToyMVrOH32cNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMlQxMjowNToyMVrOH32cNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODMyNTY4Nw==", "bodyText": "Is this necessary?", "url": "https://github.com/EssentialsX/Essentials/pull/3720#discussion_r528325687", "createdAt": "2020-11-22T12:05:21Z", "author": {"login": "mdcfe"}, "path": "build.gradle", "diffHunk": "@@ -0,0 +1,161 @@\n+plugins {\n+    id 'org.ajoberstar.grgit' version '4.1.0'\n+    id 'net.kyori.indra' version '1.0.2' apply false\n+    id 'net.kyori.indra.checkstyle' version '1.0.2' apply false\n+    id 'net.kyori.indra.publishing' version '1.0.2' apply false\n+    id 'com.github.johnrengelman.shadow' version '6.1.0' apply false\n+    id 'java'\n+}\n+\n+import org.apache.tools.ant.filters.ReplaceTokens\n+import net.kyori.indra.data.License\n+\n+allprojects {\n+    group = 'net.essentialsx'\n+    version = '2.19.0-SNAPSHOT'\n+}\n+\n+def commitsSinceLastTag() {\n+    def tags = grgit.tag.list().stream().map({it.commit}).toList()\n+    def commit = grgit.head()\n+    def depth = 0\n+    while (true) {\n+        if (tags.contains(commit))\n+            return depth\n+        depth++\n+        commit = grgit.resolve.toCommit(commit.parentIds.get(0))\n+    }\n+}\n+\n+ext {\n+    GIT_COMMIT = grgit.head().abbreviatedId\n+    GIT_DEPTH = commitsSinceLastTag()\n+\n+    fullVersion = \"${version}+${GIT_DEPTH}.${GIT_COMMIT}\".replace(\"-SNAPSHOT\", \"\")\n+\n+    checkstyleVersion = '8.36.2'\n+    spigotVersion = '1.16.4-R0.1-SNAPSHOT'\n+    junit5Version = '5.7.0'\n+    mockitoVersion = '3.2.0'\n+}\n+\n+subprojects {\n+    apply plugin: 'net.kyori.indra'\n+    apply plugin: 'net.kyori.indra.checkstyle'\n+    apply plugin: 'net.kyori.indra.publishing'\n+    apply plugin: 'com.github.johnrengelman.shadow'\n+\n+    repositories {\n+        mavenLocal()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c41a4e7bf2ccb58c50d27632ee24b409038992fd"}, "originalPosition": 49}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxMzA5OTg4OnYy", "diffSide": "RIGHT", "path": "build.gradle", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMlQxMjowNjowM1rOH32clg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMlQxMjowNjowM1rOH32clg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODMyNTc4Mg==", "bodyText": "Todo: make root not depend on java plugin, if possible", "url": "https://github.com/EssentialsX/Essentials/pull/3720#discussion_r528325782", "createdAt": "2020-11-22T12:06:03Z", "author": {"login": "mdcfe"}, "path": "build.gradle", "diffHunk": "@@ -0,0 +1,161 @@\n+plugins {\n+    id 'org.ajoberstar.grgit' version '4.1.0'\n+    id 'net.kyori.indra' version '1.0.2' apply false\n+    id 'net.kyori.indra.checkstyle' version '1.0.2' apply false\n+    id 'net.kyori.indra.publishing' version '1.0.2' apply false\n+    id 'com.github.johnrengelman.shadow' version '6.1.0' apply false\n+    id 'java'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c41a4e7bf2ccb58c50d27632ee24b409038992fd"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxMzEwMDY0OnYy", "diffSide": "RIGHT", "path": "build.gradle", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMlQxMjowNjo0NVrOH32c8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMlQxMjowNjo0NVrOH32c8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODMyNTg3NQ==", "bodyText": "Also do we still need this?", "url": "https://github.com/EssentialsX/Essentials/pull/3720#discussion_r528325875", "createdAt": "2020-11-22T12:06:45Z", "author": {"login": "mdcfe"}, "path": "build.gradle", "diffHunk": "@@ -0,0 +1,161 @@\n+plugins {\n+    id 'org.ajoberstar.grgit' version '4.1.0'\n+    id 'net.kyori.indra' version '1.0.2' apply false\n+    id 'net.kyori.indra.checkstyle' version '1.0.2' apply false\n+    id 'net.kyori.indra.publishing' version '1.0.2' apply false\n+    id 'com.github.johnrengelman.shadow' version '6.1.0' apply false\n+    id 'java'\n+}\n+\n+import org.apache.tools.ant.filters.ReplaceTokens\n+import net.kyori.indra.data.License\n+\n+allprojects {\n+    group = 'net.essentialsx'\n+    version = '2.19.0-SNAPSHOT'\n+}\n+\n+def commitsSinceLastTag() {\n+    def tags = grgit.tag.list().stream().map({it.commit}).toList()\n+    def commit = grgit.head()\n+    def depth = 0\n+    while (true) {\n+        if (tags.contains(commit))\n+            return depth\n+        depth++\n+        commit = grgit.resolve.toCommit(commit.parentIds.get(0))\n+    }\n+}\n+\n+ext {\n+    GIT_COMMIT = grgit.head().abbreviatedId\n+    GIT_DEPTH = commitsSinceLastTag()\n+\n+    fullVersion = \"${version}+${GIT_DEPTH}.${GIT_COMMIT}\".replace(\"-SNAPSHOT\", \"\")\n+\n+    checkstyleVersion = '8.36.2'\n+    spigotVersion = '1.16.4-R0.1-SNAPSHOT'\n+    junit5Version = '5.7.0'\n+    mockitoVersion = '3.2.0'\n+}\n+\n+subprojects {\n+    apply plugin: 'net.kyori.indra'\n+    apply plugin: 'net.kyori.indra.checkstyle'\n+    apply plugin: 'net.kyori.indra.publishing'\n+    apply plugin: 'com.github.johnrengelman.shadow'\n+\n+    repositories {\n+        mavenLocal()\n+        mavenCentral()\n+        maven { url = 'https://ci.ender.zone/plugin/repository/everything/' }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c41a4e7bf2ccb58c50d27632ee24b409038992fd"}, "originalPosition": 51}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxMzEwMjA4OnYy", "diffSide": "RIGHT", "path": "build.gradle", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMlQxMjowODozN1rOH32dvQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMlQxMjowODozN1rOH32dvQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODMyNjA3Nw==", "bodyText": "KyoriPowered/indra#20", "url": "https://github.com/EssentialsX/Essentials/pull/3720#discussion_r528326077", "createdAt": "2020-11-22T12:08:37Z", "author": {"login": "mdcfe"}, "path": "build.gradle", "diffHunk": "@@ -0,0 +1,161 @@\n+plugins {\n+    id 'org.ajoberstar.grgit' version '4.1.0'\n+    id 'net.kyori.indra' version '1.0.2' apply false\n+    id 'net.kyori.indra.checkstyle' version '1.0.2' apply false\n+    id 'net.kyori.indra.publishing' version '1.0.2' apply false\n+    id 'com.github.johnrengelman.shadow' version '6.1.0' apply false\n+    id 'java'\n+}\n+\n+import org.apache.tools.ant.filters.ReplaceTokens\n+import net.kyori.indra.data.License\n+\n+allprojects {\n+    group = 'net.essentialsx'\n+    version = '2.19.0-SNAPSHOT'\n+}\n+\n+def commitsSinceLastTag() {\n+    def tags = grgit.tag.list().stream().map({it.commit}).toList()\n+    def commit = grgit.head()\n+    def depth = 0\n+    while (true) {\n+        if (tags.contains(commit))\n+            return depth\n+        depth++\n+        commit = grgit.resolve.toCommit(commit.parentIds.get(0))\n+    }\n+}\n+\n+ext {\n+    GIT_COMMIT = grgit.head().abbreviatedId\n+    GIT_DEPTH = commitsSinceLastTag()\n+\n+    fullVersion = \"${version}+${GIT_DEPTH}.${GIT_COMMIT}\".replace(\"-SNAPSHOT\", \"\")\n+\n+    checkstyleVersion = '8.36.2'\n+    spigotVersion = '1.16.4-R0.1-SNAPSHOT'\n+    junit5Version = '5.7.0'\n+    mockitoVersion = '3.2.0'\n+}\n+\n+subprojects {\n+    apply plugin: 'net.kyori.indra'\n+    apply plugin: 'net.kyori.indra.checkstyle'\n+    apply plugin: 'net.kyori.indra.publishing'\n+    apply plugin: 'com.github.johnrengelman.shadow'\n+\n+    repositories {\n+        mavenLocal()\n+        mavenCentral()\n+        maven { url = 'https://ci.ender.zone/plugin/repository/everything/' }\n+        maven { url = 'https://hub.spigotmc.org/nexus/content/groups/public/' }\n+        maven { url = 'https://papermc.io/repo/repository/maven-public/' }\n+        maven {\n+            url = 'https://jitpack.io'\n+            content {\n+                includeGroup \"com.github.milkbowl\"\n+            }\n+        }\n+    }\n+\n+    dependencies {\n+        testImplementation \"org.junit.jupiter:junit-jupiter:${junit5Version}\"\n+        testRuntimeOnly \"org.junit.vintage:junit-vintage-engine:${junit5Version}\"\n+        testImplementation \"org.mockito:mockito-core:${mockitoVersion}\"\n+\n+        if (project.name != \"1_8Provider\" && project.name != \"PaperProvider\" && project.name != \"NMSReflectionProvider\") { // These providers use their own bukkit versions\n+            api \"org.spigotmc:spigot-api:${spigotVersion}\"\n+        }\n+    }\n+\n+    // Version Injection\n+    processResources {\n+        filter(ReplaceTokens, beginToken: '${',\n+                endToken: '}', tokens: [\"full.version\": fullVersion])\n+    }\n+\n+    indra {\n+        checkstyle = \"$checkstyleVersion\"\n+\n+        github('EssentialsX', 'Essentials')\n+        license = new License(\n+                'GPL-3.0-only',\n+                'GNU General Public License version 3',\n+                'https://opensource.org/licenses/GPL-3.0'\n+        )\n+\n+        publishReleasesTo('essx', 'https://repo.essentialsx.net/releases/')\n+        publishSnapshotsTo('essx', 'https://repo.essentialsx.net/snapshots/')\n+\n+        configurePublications {\n+            pom {\n+                description = 'The essential plugin suite for Minecraft servers.'\n+                url = 'https://essentialsx.net'\n+                developers {\n+                    developer {\n+                        id = 'mdcfe'\n+                        name = 'MD'\n+                        email = 'md@n3fs.co.uk'\n+                    }\n+                    developer {\n+                        id = 'pop4959'\n+                    }\n+                    developer {\n+                        id = 'JRoy'\n+                        name = 'Josh Roy'\n+                    }\n+                }\n+                ciManagement {\n+                    system = 'Jenkins'\n+                    url = 'https://ci.ender.zone/job/EssentialsX'\n+                }\n+            }\n+        }\n+    }\n+\n+    tasks.withType(Sign) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c41a4e7bf2ccb58c50d27632ee24b409038992fd"}, "originalPosition": 117}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxMzEwMjQxOnYy", "diffSide": "RIGHT", "path": "build.gradle", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMlQxMjowOTowMVrOH32d6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMlQxMjowOTowMVrOH32d6A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODMyNjEyMA==", "bodyText": "KyoriPowered/indra#19", "url": "https://github.com/EssentialsX/Essentials/pull/3720#discussion_r528326120", "createdAt": "2020-11-22T12:09:01Z", "author": {"login": "mdcfe"}, "path": "build.gradle", "diffHunk": "@@ -0,0 +1,161 @@\n+plugins {\n+    id 'org.ajoberstar.grgit' version '4.1.0'\n+    id 'net.kyori.indra' version '1.0.2' apply false\n+    id 'net.kyori.indra.checkstyle' version '1.0.2' apply false\n+    id 'net.kyori.indra.publishing' version '1.0.2' apply false\n+    id 'com.github.johnrengelman.shadow' version '6.1.0' apply false\n+    id 'java'\n+}\n+\n+import org.apache.tools.ant.filters.ReplaceTokens\n+import net.kyori.indra.data.License\n+\n+allprojects {\n+    group = 'net.essentialsx'\n+    version = '2.19.0-SNAPSHOT'\n+}\n+\n+def commitsSinceLastTag() {\n+    def tags = grgit.tag.list().stream().map({it.commit}).toList()\n+    def commit = grgit.head()\n+    def depth = 0\n+    while (true) {\n+        if (tags.contains(commit))\n+            return depth\n+        depth++\n+        commit = grgit.resolve.toCommit(commit.parentIds.get(0))\n+    }\n+}\n+\n+ext {\n+    GIT_COMMIT = grgit.head().abbreviatedId\n+    GIT_DEPTH = commitsSinceLastTag()\n+\n+    fullVersion = \"${version}+${GIT_DEPTH}.${GIT_COMMIT}\".replace(\"-SNAPSHOT\", \"\")\n+\n+    checkstyleVersion = '8.36.2'\n+    spigotVersion = '1.16.4-R0.1-SNAPSHOT'\n+    junit5Version = '5.7.0'\n+    mockitoVersion = '3.2.0'\n+}\n+\n+subprojects {\n+    apply plugin: 'net.kyori.indra'\n+    apply plugin: 'net.kyori.indra.checkstyle'\n+    apply plugin: 'net.kyori.indra.publishing'\n+    apply plugin: 'com.github.johnrengelman.shadow'\n+\n+    repositories {\n+        mavenLocal()\n+        mavenCentral()\n+        maven { url = 'https://ci.ender.zone/plugin/repository/everything/' }\n+        maven { url = 'https://hub.spigotmc.org/nexus/content/groups/public/' }\n+        maven { url = 'https://papermc.io/repo/repository/maven-public/' }\n+        maven {\n+            url = 'https://jitpack.io'\n+            content {\n+                includeGroup \"com.github.milkbowl\"\n+            }\n+        }\n+    }\n+\n+    dependencies {\n+        testImplementation \"org.junit.jupiter:junit-jupiter:${junit5Version}\"\n+        testRuntimeOnly \"org.junit.vintage:junit-vintage-engine:${junit5Version}\"\n+        testImplementation \"org.mockito:mockito-core:${mockitoVersion}\"\n+\n+        if (project.name != \"1_8Provider\" && project.name != \"PaperProvider\" && project.name != \"NMSReflectionProvider\") { // These providers use their own bukkit versions\n+            api \"org.spigotmc:spigot-api:${spigotVersion}\"\n+        }\n+    }\n+\n+    // Version Injection\n+    processResources {\n+        filter(ReplaceTokens, beginToken: '${',\n+                endToken: '}', tokens: [\"full.version\": fullVersion])\n+    }\n+\n+    indra {\n+        checkstyle = \"$checkstyleVersion\"\n+\n+        github('EssentialsX', 'Essentials')\n+        license = new License(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c41a4e7bf2ccb58c50d27632ee24b409038992fd"}, "originalPosition": 82}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxMzEwNDA3OnYy", "diffSide": "RIGHT", "path": "providers/1_8Provider/build.gradle", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMlQxMjoxMDoyNFrOH32esA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMlQxMjoxMDoyNFrOH32esA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODMyNjMyMA==", "bodyText": "Again group: bukkit?", "url": "https://github.com/EssentialsX/Essentials/pull/3720#discussion_r528326320", "createdAt": "2020-11-22T12:10:24Z", "author": {"login": "mdcfe"}, "path": "providers/1_8Provider/build.gradle", "diffHunk": "@@ -0,0 +1,5 @@\n+dependencies {\n+    api(project(':providers:NMSReflectionProvider')) {\n+        exclude group: 'bukkit'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c41a4e7bf2ccb58c50d27632ee24b409038992fd"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxMzEwNDQ3OnYy", "diffSide": "RIGHT", "path": "providers/PaperProvider/build.gradle", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMlQxMjoxMDo1MVrOH32e4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMlQxNjozOTo1NFrOH34j3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODMyNjM2OQ==", "bodyText": "1.16.4?", "url": "https://github.com/EssentialsX/Essentials/pull/3720#discussion_r528326369", "createdAt": "2020-11-22T12:10:51Z", "author": {"login": "mdcfe"}, "path": "providers/PaperProvider/build.gradle", "diffHunk": "@@ -0,0 +1,4 @@\n+dependencies {\n+    implementation project(':providers:BaseProviders')\n+    compileOnly 'com.destroystokyo.paper:paper-api:1.16.3-R0.1-SNAPSHOT'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c41a4e7bf2ccb58c50d27632ee24b409038992fd"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODM2MDQxNQ==", "bodyText": "Doesn't need to be updated until we need a new method for paper provider", "url": "https://github.com/EssentialsX/Essentials/pull/3720#discussion_r528360415", "createdAt": "2020-11-22T16:39:54Z", "author": {"login": "JRoy"}, "path": "providers/PaperProvider/build.gradle", "diffHunk": "@@ -0,0 +1,4 @@\n+dependencies {\n+    implementation project(':providers:BaseProviders')\n+    compileOnly 'com.destroystokyo.paper:paper-api:1.16.3-R0.1-SNAPSHOT'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODMyNjM2OQ=="}, "originalCommit": {"oid": "c41a4e7bf2ccb58c50d27632ee24b409038992fd"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMyNjk5MDE5OnYy", "diffSide": "RIGHT", "path": ".github/workflows/build.yml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxNTo0NToxOFrOH55UHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxNTo0NToxOFrOH55UHg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDQ2OTkxOA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  if: ${{ success() && github.event_name == 'push' && github.ref == 'refs/head/2.x' }}\n          \n          \n            \n                  if: ${{ success() && github.event_name == 'push' && github.repository == 'EssentialsX/Essentials' && github.ref == 'refs/head/2.x' }}", "url": "https://github.com/EssentialsX/Essentials/pull/3720#discussion_r530469918", "createdAt": "2020-11-25T15:45:18Z", "author": {"login": "mdcfe"}, "path": ".github/workflows/build.yml", "diffHunk": "@@ -2,37 +2,47 @@ name: Build EssentialsX\n \n on:\n   push:\n-    branches: \n+    branches:\n     - 2.x\n     - mc/*\n   pull_request:\n-    branches: \n+    branches:\n     - 2.x\n \n jobs:\n   build:\n-\n+    name: Build and upload\n     runs-on: ubuntu-latest\n \n     steps:\n     - name: Checkout Git repo\n-      uses: actions/checkout@v1\n-    - name: Restore Maven cache\n-      uses: actions/cache@v1\n+      uses: actions/checkout@v2\n+      with:\n+        fetch-depth: 0\n+    - name: Restore Gradle cache\n+      uses: actions/cache@v2\n       with:\n-        path: ~/.m2/repository\n-        key: ${{ runner.os }}-maven-${{ hashFiles('**/pom.xml') }}\n+        path: ~/.gradle/caches\n+        key: ${{ runner.os }}-gradle-${{ hashFiles('**/*.gradle*') }}\n         restore-keys: |\n-          ${{ runner.os }}-maven-\n+          ${{ runner.os }}-gradle-\n     - name: Set up JDK 1.8\n       uses: actions/setup-java@v1\n       with:\n         java-version: 1.8\n-    - name: Build with Maven\n-      run: mvn package verify --file pom.xml\n-    - name: Copy artifacts\n-      run: mkdir -p ./out/ && cp -t ./out/ **/target/Essentials*.jar\n-    - uses: actions/upload-artifact@master\n+    - name: Build with Gradle\n+      run: |\n+        chmod +x gradlew\n+        ./gradlew build --stacktrace\n+    - name: Deploy with Gradle\n+      if: ${{ success() && github.event_name == 'push' && github.ref == 'refs/head/2.x' }}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8cde9d51c5391d9e9a5409815efbc0ff106cc3ee"}, "originalPosition": 51}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4463, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}