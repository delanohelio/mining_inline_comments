{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg3NTcwMDE1", "number": 3067, "title": "Cleanup code", "bodyText": "Basically cleans up a bunch of warnings that are easily suppressed. If this PR is viewed as excessive I don't blame you and no big deal if you don't want it, most of the fixes are IntelliJ auto-fixes.", "createdAt": "2020-03-13T03:16:16Z", "url": "https://github.com/EssentialsX/Essentials/pull/3067", "merged": true, "mergeCommit": {"oid": "23f0f98af30a896642cceed33213b5062e538c4f"}, "closed": true, "closedAt": "2020-04-25T12:08:58Z", "author": {"login": "JRoy"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcNHhqUAH2gAyMzg3NTcwMDE1OjU1Nzg0OTU0ZGRhNmMwMTg1N2E4YmU1NTA3YTRmZWFjNmY2ZDY2ZTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcbE8_2gFqTQwMDM4NzUwMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "55784954dda6c01857a8be5507a4feac6f6d66e7", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/55784954dda6c01857a8be5507a4feac6f6d66e7", "committedDate": "2020-03-13T03:13:12Z", "message": "Cleanup code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e1c0d9f04ec471d9957a70442c6283a8d22f481f", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/e1c0d9f04ec471d9957a70442c6283a8d22f481f", "committedDate": "2020-04-23T18:30:21Z", "message": "Merge branch '2.x' into feature/code-improvments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cf7acb5b6a2f6ecc5a2bdbb23bc7e0a887ba4c8a", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/cf7acb5b6a2f6ecc5a2bdbb23bc7e0a887ba4c8a", "committedDate": "2020-04-23T18:33:25Z", "message": "Fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ded1d10d0f0d9016e5790ed31206679863ae28fb", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/ded1d10d0f0d9016e5790ed31206679863ae28fb", "committedDate": "2020-04-23T19:00:30Z", "message": "More changes lol"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwMDYxMzg3", "url": "https://github.com/EssentialsX/Essentials/pull/3067#pullrequestreview-400061387", "createdAt": "2020-04-24T15:42:54Z", "commit": {"oid": "ded1d10d0f0d9016e5790ed31206679863ae28fb"}, "state": "COMMENTED", "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxNTo0Mjo1NFrOGLdwgA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxOTo0Mjo1OFrOGLml7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDY3NTA3Mg==", "bodyText": "This looks like it introduces rounding errors and change the amount that the signs give - does this still function the same or does it change?", "url": "https://github.com/EssentialsX/Essentials/pull/3067#discussion_r414675072", "createdAt": "2020-04-24T15:42:54Z", "author": {"login": "mdcfe"}, "path": "Essentials/src/com/earth2me/essentials/signs/SignSell.java", "diffHunk": "@@ -40,7 +41,7 @@ protected boolean onSignInteract(final ISign sign, final User player, final Stri\n                 charge = new Trade(item, ess);\n \n                 BigDecimal chargeAmount = money.getMoney();\n-                BigDecimal pricePerSingleItem = chargeAmount.divide(new BigDecimal(initialItemAmount));\n+                BigDecimal pricePerSingleItem = chargeAmount.divide(new BigDecimal(initialItemAmount), RoundingMode.HALF_EVEN);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ded1d10d0f0d9016e5790ed31206679863ae28fb"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDY3NTMxMw==", "bodyText": "Same as SignSell - doesn't this change the amount charged?", "url": "https://github.com/EssentialsX/Essentials/pull/3067#discussion_r414675313", "createdAt": "2020-04-24T15:43:15Z", "author": {"login": "mdcfe"}, "path": "Essentials/src/com/earth2me/essentials/signs/SignBuy.java", "diffHunk": "@@ -39,7 +40,7 @@ protected boolean onSignInteract(final ISign sign, final User player, final Stri\n                 items = new Trade(item, ess);\n \n                 BigDecimal chargeAmount = charge.getMoney();\n-                BigDecimal pricePerSingleItem = chargeAmount.divide(new BigDecimal(initialItemAmount));\n+                BigDecimal pricePerSingleItem = chargeAmount.divide(new BigDecimal(initialItemAmount), RoundingMode.HALF_EVEN);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ded1d10d0f0d9016e5790ed31206679863ae28fb"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDY5NjA1NA==", "bodyText": "Is this definitely safe to do? bStats can be turned on/off; I'm not sure if there are any variants of the class that might expect this field to not be final.", "url": "https://github.com/EssentialsX/Essentials/pull/3067#discussion_r414696054", "createdAt": "2020-04-24T16:13:18Z", "author": {"login": "mdcfe"}, "path": "Essentials/src/com/earth2me/essentials/metrics/Metrics.java", "diffHunk": "@@ -50,7 +50,7 @@\n     private static final String URL = \"https://bStats.org/submitData/bukkit\";\n \n     // Is bStats enabled on this server?\n-    private boolean enabled;\n+    private final boolean enabled;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ded1d10d0f0d9016e5790ed31206679863ae28fb"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDgwNzI1Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                    buffer.rewind();\n          \n          \n            \n                                    ((Buffer) buffer).rewind();\n          \n      \n    \n    \n  \n\nThese casts are necessary, otherwise builds on Java 9+ won't run on Java 8 (some people ran into issues with this).", "url": "https://github.com/EssentialsX/Essentials/pull/3067#discussion_r414807256", "createdAt": "2020-04-24T19:19:20Z", "author": {"login": "mdcfe"}, "path": "Essentials/src/com/earth2me/essentials/EssentialsConf.java", "diffHunk": "@@ -125,20 +111,20 @@ public synchronized void load() {\n                         ByteBuffer resize = ByteBuffer.allocate(buffer.capacity() + length - buffer.remaining());\n                         int resizePosition = buffer.position();\n                         // Fix builds compiled against Java 9+ breaking on Java 8\n-                        ((Buffer) buffer).rewind();\n+                        buffer.rewind();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ded1d10d0f0d9016e5790ed31206679863ae28fb"}, "originalPosition": 78}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDgwNzQxMw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            buffer.rewind();\n          \n          \n            \n                            ((Buffer) buffer).rewind();", "url": "https://github.com/EssentialsX/Essentials/pull/3067#discussion_r414807413", "createdAt": "2020-04-24T19:19:40Z", "author": {"login": "mdcfe"}, "path": "Essentials/src/com/earth2me/essentials/EssentialsConf.java", "diffHunk": "@@ -125,20 +111,20 @@ public synchronized void load() {\n                         ByteBuffer resize = ByteBuffer.allocate(buffer.capacity() + length - buffer.remaining());\n                         int resizePosition = buffer.position();\n                         // Fix builds compiled against Java 9+ breaking on Java 8\n-                        ((Buffer) buffer).rewind();\n+                        buffer.rewind();\n                         resize.put(buffer);\n                         resize.position(resizePosition);\n                         buffer = resize;\n                     }\n                     buffer.put(bytebuffer, 0, length);\n                 }\n-                ((Buffer) buffer).rewind();\n+                buffer.rewind();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ded1d10d0f0d9016e5790ed31206679863ae28fb"}, "originalPosition": 86}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDgwNzYzOQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                buffer.rewind();\n          \n          \n            \n                                data.clear();\n          \n          \n            \n                                ((Buffer) buffer).rewind();\n          \n          \n            \n                                ((Buffer) data).clear();", "url": "https://github.com/EssentialsX/Essentials/pull/3067#discussion_r414807639", "createdAt": "2020-04-24T19:20:10Z", "author": {"login": "mdcfe"}, "path": "Essentials/src/com/earth2me/essentials/EssentialsConf.java", "diffHunk": "@@ -125,20 +111,20 @@ public synchronized void load() {\n                         ByteBuffer resize = ByteBuffer.allocate(buffer.capacity() + length - buffer.remaining());\n                         int resizePosition = buffer.position();\n                         // Fix builds compiled against Java 9+ breaking on Java 8\n-                        ((Buffer) buffer).rewind();\n+                        buffer.rewind();\n                         resize.put(buffer);\n                         resize.position(resizePosition);\n                         buffer = resize;\n                     }\n                     buffer.put(bytebuffer, 0, length);\n                 }\n-                ((Buffer) buffer).rewind();\n+                buffer.rewind();\n                 final CharBuffer data = CharBuffer.allocate(buffer.capacity());\n                 CharsetDecoder decoder = UTF8.newDecoder();\n                 CoderResult result = decoder.decode(buffer, data, true);\n                 if (result.isError()) {\n-                    ((Buffer) buffer).rewind();\n-                    ((Buffer) data).clear();\n+                    buffer.rewind();\n+                    data.clear();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ded1d10d0f0d9016e5790ed31206679863ae28fb"}, "originalPosition": 94}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDgwNzg1OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            data.rewind();\n          \n          \n            \n                            ((Buffer) data).rewind();", "url": "https://github.com/EssentialsX/Essentials/pull/3067#discussion_r414807858", "createdAt": "2020-04-24T19:20:30Z", "author": {"login": "mdcfe"}, "path": "Essentials/src/com/earth2me/essentials/EssentialsConf.java", "diffHunk": "@@ -151,7 +137,7 @@ public synchronized void load() {\n                     decoder.flush(data);\n                 }\n                 final int end = data.position();\n-                ((Buffer) data).rewind();\n+                data.rewind();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ded1d10d0f0d9016e5790ed31206679863ae28fb"}, "originalPosition": 103}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDgxOTgyMA==", "bodyText": "Where is this used?", "url": "https://github.com/EssentialsX/Essentials/pull/3067#discussion_r414819820", "createdAt": "2020-04-24T19:42:58Z", "author": {"login": "mdcfe"}, "path": "Essentials/src/com/earth2me/essentials/PlayerList.java", "diffHunk": "@@ -60,17 +60,14 @@ public static String listSummary(final IEssentials ess, final User user, final b\n \n     // Build the basic player list, divided by groups.\n     public static Map<String, List<User>> getPlayerLists(final IEssentials ess, final User sender, final boolean showHidden) {\n+        Server server = ess.getServer();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ded1d10d0f0d9016e5790ed31206679863ae28fb"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7c5d086e090c2efbf4d4c1c1b0e0c78156f4ae23", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/7c5d086e090c2efbf4d4c1c1b0e0c78156f4ae23", "committedDate": "2020-04-24T20:32:05Z", "message": "Revert Buffer cast fix\n\nCo-Authored-By: md678685 <1917406+md678685@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "69515d20fe7fb6c877dd78adfd5087afe35b9483", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/69515d20fe7fb6c877dd78adfd5087afe35b9483", "committedDate": "2020-04-24T20:32:39Z", "message": "Revert buffer cast fix\n\nCo-Authored-By: md678685 <1917406+md678685@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "527e9bf413fea001263de636d122465856b3aac7", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/527e9bf413fea001263de636d122465856b3aac7", "committedDate": "2020-04-24T20:32:56Z", "message": "Revert buffer cast fix\n\nCo-Authored-By: md678685 <1917406+md678685@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "387cd242877bcd1876ed8378c06a98cd7617b1b3", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/387cd242877bcd1876ed8378c06a98cd7617b1b3", "committedDate": "2020-04-24T20:33:03Z", "message": "Revert buffer cast fix\n\nCo-Authored-By: md678685 <1917406+md678685@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1be9b111c19da7d724d87ea1fefeb534ba76f7d3", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/1be9b111c19da7d724d87ea1fefeb534ba76f7d3", "committedDate": "2020-04-24T20:41:34Z", "message": "Fix unused server variable"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "69695992ec950158ad987cebd64d7eac5b7f279d", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/69695992ec950158ad987cebd64d7eac5b7f279d", "committedDate": "2020-04-24T20:42:55Z", "message": "Remove explicit RoundingModes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4dd8a655d541d22e77ddef3478f27c1f28158881", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/4dd8a655d541d22e77ddef3478f27c1f28158881", "committedDate": "2020-04-24T20:43:46Z", "message": "Don't change Metrics class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "354a5b40af1e7b5f6dfc2c88c0581abe0a12d65c", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/354a5b40af1e7b5f6dfc2c88c0581abe0a12d65c", "committedDate": "2020-04-24T20:44:05Z", "message": "Merge branch 'feature/code-improvments' of https://github.com/schlatt-co/Essentials into feature/code-improvments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwMzg3NTAz", "url": "https://github.com/EssentialsX/Essentials/pull/3067#pullrequestreview-400387503", "createdAt": "2020-04-25T12:08:17Z", "commit": {"oid": "354a5b40af1e7b5f6dfc2c88c0581abe0a12d65c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4806, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}