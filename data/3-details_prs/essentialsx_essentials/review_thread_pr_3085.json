{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkyMDcyNjE0", "number": 3085, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQwNjo1NzowNVrODs-H1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQwNzowOToyNVrODs-Vkw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ4NDgxNzUwOnYy", "diffSide": "RIGHT", "path": "Essentials/src/com/earth2me/essentials/api/Economy.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQwNjo1NzowNVrOF-HuQQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQwNjo1NzowNVrOF-HuQQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDY4MjU2MQ==", "bodyText": "Don't use RuntimeException for this. IllegalArgumentException is a far better choice.", "url": "https://github.com/EssentialsX/Essentials/pull/3085#discussion_r400682561", "createdAt": "2020-03-31T06:57:05Z", "author": {"login": "Ichbinjoe"}, "path": "Essentials/src/com/earth2me/essentials/api/Economy.java", "diffHunk": "@@ -86,9 +88,20 @@ private static User getUserByName(String name) {\n         return user;\n     }\n \n+    private static User getUserByUUID(UUID uuid) {\n+        if (ess == null) {\n+            throw new RuntimeException(noCallBeforeLoad);\n+        }\n+        if (uuid == null) {\n+            throw new RuntimeException(\"Economy uuid cannot be null\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "35e2df9c191cbb4ee562ff46fb9d2ad6ba3f63da"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ4NDg0NzE2OnYy", "diffSide": "RIGHT", "path": "Essentials/src/com/earth2me/essentials/api/Economy.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQwNzowNzo0NFrOF-IASQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQwNzowNzo0NFrOF-IASQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDY4NzE3Nw==", "bodyText": "IllegalArgumentException", "url": "https://github.com/EssentialsX/Essentials/pull/3085#discussion_r400687177", "createdAt": "2020-03-31T07:07:44Z", "author": {"login": "Ichbinjoe"}, "path": "Essentials/src/com/earth2me/essentials/api/Economy.java", "diffHunk": "@@ -133,11 +160,50 @@ public static void setMoney(String name, double balance) throws UserDoesNotExist\n         }\n     }\n \n+    /**\n+     * Sets the balance of a user\n+     *\n+     * @deprecated Usernames can change use {@link Economy#setMoney(UUID, BigDecimal)} or {@link Economy#setMoney(User, BigDecimal)}\n+     *\n+     * @param name    Name of user\n+     * @param balance The balance you want to set\n+     *\n+     * @throws UserDoesNotExistException If a user by that name does not exist\n+     * @throws NoLoanPermittedException  If the user is not allowed to have a negative balance\n+     */\n+    @Deprecated\n     public static void setMoney(String name, BigDecimal balance) throws UserDoesNotExistException, NoLoanPermittedException {\n         User user = getUserByName(name);\n         if (user == null) {\n             throw new UserDoesNotExistException(name);\n         }\n+        setMoney(user, balance);\n+    }\n+\n+    /**\n+     * Sets the balance of a user\n+     *\n+     * @param uuid    UUID of user\n+     * @param balance The balance you want to set\n+     *\n+     * @throws NoLoanPermittedException If the user is not allowed to have a negative balance\n+     */\n+    public static void setMoney(UUID uuid, BigDecimal balance) throws NoLoanPermittedException {\n+        setMoney(getUserByUUID(uuid), balance);\n+    }\n+\n+    /**\n+     * Sets the balance of a user\n+     *\n+     * @param user    User\n+     * @param balance The balance you want to set\n+     *\n+     * @throws NoLoanPermittedException If the user is not allowed to have a negative balance\n+     */\n+    public static void setMoney(User user, BigDecimal balance) throws NoLoanPermittedException {\n+        if (user == null) {\n+            throw new RuntimeException(\"Economy user cannot be null\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "35e2df9c191cbb4ee562ff46fb9d2ad6ba3f63da"}, "originalPosition": 114}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ4NDg1MDA2OnYy", "diffSide": "RIGHT", "path": "Essentials/src/com/earth2me/essentials/api/Economy.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQwNzowODozNVrOF-IB5A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQwNzowODozNVrOF-IB5A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDY4NzU4OA==", "bodyText": "user is not allowed", "url": "https://github.com/EssentialsX/Essentials/pull/3085#discussion_r400687588", "createdAt": "2020-03-31T07:08:35Z", "author": {"login": "Ichbinjoe"}, "path": "Essentials/src/com/earth2me/essentials/api/Economy.java", "diffHunk": "@@ -170,17 +238,64 @@ public static void add(String name, double amount) throws UserDoesNotExistExcept\n         }\n     }\n \n+    /**\n+     * Adds money to the balance of a user\n+     *\n+     * @deprecated Usernames can change, use {@link Economy#add(UUID, BigDecimal)} or {@link Economy#add(User, BigDecimal)}\n+     *\n+     * @param name   Name of the user\n+     * @param amount The money you want to add\n+     *\n+     * @throws UserDoesNotExistException If a user by that name does not exist\n+     * @throws NoLoanPermittedException  If the user is now allowed to have a negative balance\n+     * @throws ArithmeticException\n+     */\n+    @Deprecated\n     public static void add(String name, BigDecimal amount) throws UserDoesNotExistException, NoLoanPermittedException, ArithmeticException {\n-        BigDecimal result = getMoneyExact(name).add(amount, MATH_CONTEXT);\n-        setMoney(name, result);\n-        Trade.log(\"API\", \"Add\", \"API\", name, new Trade(amount, ess), null, null, null, ess);\n+        User user = getUserByName(name);\n+        if (user == null) {\n+            throw new UserDoesNotExistException(name);\n+        }\n+        add(user, amount);\n+    }\n+\n+    /**\n+     * Adds money to the balance of a user\n+     *\n+     * @param uuid   UUID of the user\n+     * @param amount The money you want to add\n+     *\n+     * @throws NoLoanPermittedException  If the user is now allowed to have a negative balance\n+     * @throws ArithmeticException\n+     */\n+    public static void add(UUID uuid, BigDecimal amount) throws NoLoanPermittedException, ArithmeticException {\n+        add(getUserByUUID(uuid), amount);\n+    }\n+\n+    /**\n+     * Adds money to the balance of a user\n+     *\n+     * @deprecated Usernames can change, use {@link Economy#add(UUID, BigDecimal)} or {@link Economy#add(User, BigDecimal)}\n+     *\n+     * @param user   User\n+     * @param amount The money you want to add\n+     *\n+     * @throws NoLoanPermittedException  If the user is now allowed to have a negative balance", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "35e2df9c191cbb4ee562ff46fb9d2ad6ba3f63da"}, "originalPosition": 184}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ4NDg1MDYxOnYy", "diffSide": "RIGHT", "path": "Essentials/src/com/earth2me/essentials/api/Economy.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQwNzowODo0NFrOF-ICOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xM1QxNDowODoyM1rOGEnnHQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDY4NzY3NA==", "bodyText": "not", "url": "https://github.com/EssentialsX/Essentials/pull/3085#discussion_r400687674", "createdAt": "2020-03-31T07:08:44Z", "author": {"login": "Ichbinjoe"}, "path": "Essentials/src/com/earth2me/essentials/api/Economy.java", "diffHunk": "@@ -170,17 +238,64 @@ public static void add(String name, double amount) throws UserDoesNotExistExcept\n         }\n     }\n \n+    /**\n+     * Adds money to the balance of a user\n+     *\n+     * @deprecated Usernames can change, use {@link Economy#add(UUID, BigDecimal)} or {@link Economy#add(User, BigDecimal)}\n+     *\n+     * @param name   Name of the user\n+     * @param amount The money you want to add\n+     *\n+     * @throws UserDoesNotExistException If a user by that name does not exist\n+     * @throws NoLoanPermittedException  If the user is now allowed to have a negative balance", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "35e2df9c191cbb4ee562ff46fb9d2ad6ba3f63da"}, "originalPosition": 148}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzQ2OTAxMw==", "bodyText": "@JRoy Is this fixed?", "url": "https://github.com/EssentialsX/Essentials/pull/3085#discussion_r407469013", "createdAt": "2020-04-13T13:07:50Z", "author": {"login": "mdcfe"}, "path": "Essentials/src/com/earth2me/essentials/api/Economy.java", "diffHunk": "@@ -170,17 +238,64 @@ public static void add(String name, double amount) throws UserDoesNotExistExcept\n         }\n     }\n \n+    /**\n+     * Adds money to the balance of a user\n+     *\n+     * @deprecated Usernames can change, use {@link Economy#add(UUID, BigDecimal)} or {@link Economy#add(User, BigDecimal)}\n+     *\n+     * @param name   Name of the user\n+     * @param amount The money you want to add\n+     *\n+     * @throws UserDoesNotExistException If a user by that name does not exist\n+     * @throws NoLoanPermittedException  If the user is now allowed to have a negative balance", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDY4NzY3NA=="}, "originalCommit": {"oid": "35e2df9c191cbb4ee562ff46fb9d2ad6ba3f63da"}, "originalPosition": 148}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzQ5NjQ3Nw==", "bodyText": "@md678685 it is now :P", "url": "https://github.com/EssentialsX/Essentials/pull/3085#discussion_r407496477", "createdAt": "2020-04-13T14:08:23Z", "author": {"login": "JRoy"}, "path": "Essentials/src/com/earth2me/essentials/api/Economy.java", "diffHunk": "@@ -170,17 +238,64 @@ public static void add(String name, double amount) throws UserDoesNotExistExcept\n         }\n     }\n \n+    /**\n+     * Adds money to the balance of a user\n+     *\n+     * @deprecated Usernames can change, use {@link Economy#add(UUID, BigDecimal)} or {@link Economy#add(User, BigDecimal)}\n+     *\n+     * @param name   Name of the user\n+     * @param amount The money you want to add\n+     *\n+     * @throws UserDoesNotExistException If a user by that name does not exist\n+     * @throws NoLoanPermittedException  If the user is now allowed to have a negative balance", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDY4NzY3NA=="}, "originalCommit": {"oid": "35e2df9c191cbb4ee562ff46fb9d2ad6ba3f63da"}, "originalPosition": 148}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ4NDg1MjY3OnYy", "diffSide": "RIGHT", "path": "Essentials/src/com/earth2me/essentials/api/Economy.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQwNzowOToyNVrOF-IDfw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQwNzowOToyNVrOF-IDfw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDY4Nzk5OQ==", "bodyText": "Consider rewording all around to something more like 'The amount of money to be added to the user's account'", "url": "https://github.com/EssentialsX/Essentials/pull/3085#discussion_r400687999", "createdAt": "2020-03-31T07:09:25Z", "author": {"login": "Ichbinjoe"}, "path": "Essentials/src/com/earth2me/essentials/api/Economy.java", "diffHunk": "@@ -170,17 +238,64 @@ public static void add(String name, double amount) throws UserDoesNotExistExcept\n         }\n     }\n \n+    /**\n+     * Adds money to the balance of a user\n+     *\n+     * @deprecated Usernames can change, use {@link Economy#add(UUID, BigDecimal)} or {@link Economy#add(User, BigDecimal)}\n+     *\n+     * @param name   Name of the user\n+     * @param amount The money you want to add", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "35e2df9c191cbb4ee562ff46fb9d2ad6ba3f63da"}, "originalPosition": 145}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4771, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}