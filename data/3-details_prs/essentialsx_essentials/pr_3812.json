{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMzMTQ0Nzkw", "number": 3812, "title": "Improve VersionUtil version checks", "bodyText": "Summary;\n\nAdds warning/recommendations for potentially dangerous server softwares\nNow classifies servers without nms packages/classes as UNSTABLE", "createdAt": "2020-12-06T05:45:12Z", "url": "https://github.com/EssentialsX/Essentials/pull/3812", "merged": true, "mergeCommit": {"oid": "224634d8d27c2b17bb4557a700f8776a6a48e16b"}, "closed": true, "closedAt": "2021-01-19T12:40:06Z", "author": {"login": "JRoy"}, "timelineItems": {"totalCount": 31, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdjW443AH2gAyNTMzMTQ0NzkwOjEyZjE2YjNjMThkMWU3MTlhZGNiMmY2MTdlZDU5ODE3OGJhNDUzYTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdxqiQKgH2gAyNTMzMTQ0NzkwOjZkZTUwMDMyMjI5NTU3Mzk3YjNmZjcyMzFmZTIwOThlNjQyYjIwZjg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "12f16b3c18d1e719adcb2f617ed598178ba453a8", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/12f16b3c18d1e719adcb2f617ed598178ba453a8", "committedDate": "2020-12-06T01:44:38Z", "message": "Remove unused VersionUtil versions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "593a41fe28c7cffcfb0ae4ef1b95555e3c2f7337", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/593a41fe28c7cffcfb0ae4ef1b95555e3c2f7337", "committedDate": "2020-12-06T02:54:08Z", "message": "Cache the server's support status"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "34bf97f07abac0a53dc66cb06142f57c5d3a54f3", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/34bf97f07abac0a53dc66cb06142f57c5d3a54f3", "committedDate": "2020-12-06T03:33:06Z", "message": "Add warning about Yatopia"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fea23c90ba0f9b4fe727a971bd80df8aaf129102", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/fea23c90ba0f9b4fe727a971bd80df8aaf129102", "committedDate": "2020-12-06T05:18:17Z", "message": "Add more dangerous class names"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4afa1f1904195919e144262b08e7f959d7b9f3db", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/4afa1f1904195919e144262b08e7f959d7b9f3db", "committedDate": "2020-12-06T05:20:16Z", "message": "Increase message incentive"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dec4f5d7ba79849f6ca665506676fc82a7eda678", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/dec4f5d7ba79849f6ca665506676fc82a7eda678", "committedDate": "2020-12-06T05:25:27Z", "message": "Remove unused NMSVersion field in ReflUtil"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8b211bcc9af286396274c79b5fdae78300b9b7b", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/a8b211bcc9af286396274c79b5fdae78300b9b7b", "committedDate": "2020-12-06T05:28:39Z", "message": "Add check for NMS"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b9da8b3825f9b36cc9e0995ac72cacaf227fbd95", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/b9da8b3825f9b36cc9e0995ac72cacaf227fbd95", "committedDate": "2020-12-06T05:31:45Z", "message": "Fix codestyle violations"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8719aaeb6dbcc60fe1fea48af0ac0f2afe8b64e8", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/8719aaeb6dbcc60fe1fea48af0ac0f2afe8b64e8", "committedDate": "2020-12-06T05:41:03Z", "message": "Fix using wrong ReflUtil method"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1NjczNDk4", "url": "https://github.com/EssentialsX/Essentials/pull/3812#pullrequestreview-545673498", "createdAt": "2020-12-06T05:53:41Z", "commit": {"oid": "8719aaeb6dbcc60fe1fea48af0ac0f2afe8b64e8"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNlQwNTo1Mzo0MVrOIAFr6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNlQwNTo1NjowOVrOIAFtKg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjk2NDA3Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            serverUnsupportedDangerous=You are running a server that is known to be extremely dangerous and lead to data loss. It is strongly recommended you switch to a more stable high preforming server software like Paper or Tuinity.\n          \n          \n            \n            serverUnsupportedDangerous=You are running a server that is known to be extremely dangerous and lead to data loss. It is strongly recommended you switch to a more stable, high-performing server software like Paper or Tuinity.", "url": "https://github.com/EssentialsX/Essentials/pull/3812#discussion_r536964072", "createdAt": "2020-12-06T05:53:41Z", "author": {"login": "l1ttleO"}, "path": "Essentials/src/main/resources/messages.properties", "diffHunk": "@@ -706,6 +706,7 @@ serverFull=Server is full\\!\n serverReloading=There's a good chance you're reloading your server right now. If that's the case, why do you hate yourself? Expect no support from the EssentialsX team when using /reload.\n serverTotal=\\u00a76Server Total\\:\\u00a7c {0}\n serverUnsupported=You are running an unsupported server version!\n+serverUnsupportedDangerous=You are running a server that is known to be extremely dangerous and lead to data loss. It is strongly recommended you switch to a more stable high preforming server software like Paper or Tuinity.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8719aaeb6dbcc60fe1fea48af0ac0f2afe8b64e8"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjk2NDIyMg==", "bodyText": "Are these { and } needed? They aren't there in other cases below", "url": "https://github.com/EssentialsX/Essentials/pull/3812#discussion_r536964222", "createdAt": "2020-12-06T05:54:43Z", "author": {"login": "l1ttleO"}, "path": "Essentials/src/main/java/com/earth2me/essentials/Essentials.java", "diffHunk": "@@ -201,6 +201,10 @@ public void onEnable() {\n             Console.setInstance(this);\n \n             switch (VersionUtil.getServerSupportStatus()) {\n+                case DANGEROUS: {\n+                    getLogger().severe(tl(\"serverUnsupportedDangerous\"));\n+                    break;\n+                }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8719aaeb6dbcc60fe1fea48af0ac0f2afe8b64e8"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjk2NDM5NA==", "bodyText": "Are these { and } needed? They aren't there in other cases below", "url": "https://github.com/EssentialsX/Essentials/pull/3812#discussion_r536964394", "createdAt": "2020-12-06T05:56:09Z", "author": {"login": "l1ttleO"}, "path": "Essentials/src/main/java/com/earth2me/essentials/commands/Commandessentials.java", "diffHunk": "@@ -376,6 +376,10 @@ private void runVersion(final Server server, final CommandSource sender, final S\n         }\n \n         switch (supportStatus) {\n+            case DANGEROUS: {\n+                sender.sendMessage(tl(\"serverUnsupportedDangerous\"));\n+                break;\n+            }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8719aaeb6dbcc60fe1fea48af0ac0f2afe8b64e8"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1NjgxNTA1", "url": "https://github.com/EssentialsX/Essentials/pull/3812#pullrequestreview-545681505", "createdAt": "2020-12-06T08:18:08Z", "commit": {"oid": "8719aaeb6dbcc60fe1fea48af0ac0f2afe8b64e8"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNlQwODoxODowOFrOIAHAQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNlQwODoyNTo0NlrOIAHFCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjk4NTY2Nw==", "bodyText": "The UNSTABLE message is for Forge hybrid servers, but this will trigger on other impls like Glowstone.", "url": "https://github.com/EssentialsX/Essentials/pull/3812#discussion_r536985667", "createdAt": "2020-12-06T08:18:08Z", "author": {"login": "mdcfe"}, "path": "Essentials/src/main/java/com/earth2me/essentials/utils/VersionUtil.java", "diffHunk": "@@ -46,17 +62,33 @@ public static BukkitVersion getServerBukkitVersion() {\n     }\n \n     public static SupportStatus getServerSupportStatus() {\n-        try {\n-            Class.forName(\"net.minecraftforge.common.MinecraftForge\");\n-            return SupportStatus.UNSTABLE;\n-        } catch (final ClassNotFoundException ignored) {\n-        }\n+        if (supportStatus == null) {\n+            for (String clazz : dangerousServerClasses) {\n+                try {\n+                    Class.forName(clazz);\n+                    return supportStatus = SupportStatus.DANGEROUS;\n+                } catch (final ClassNotFoundException ignored) {\n+                }\n+            }\n \n-        if (!supportedVersions.contains(getServerBukkitVersion())) {\n-            return SupportStatus.OUTDATED;\n-        }\n+            try {\n+                Class.forName(\"net.minecraftforge.common.MinecraftForge\");\n+                return supportStatus = SupportStatus.UNSTABLE;\n+            } catch (final ClassNotFoundException ignored) {\n+            }\n+\n+            // Check for non-nms Bukkit Implis\n+            if (ReflUtil.getNMSClass(\"MinecraftServer\") == null) {\n+                return supportStatus = SupportStatus.UNSTABLE;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8719aaeb6dbcc60fe1fea48af0ac0f2afe8b64e8"}, "originalPosition": 75}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjk4NjQ3MA==", "bodyText": "Might be worth renaming this and/or the properties file to specify that this specifically covers Paper forks?", "url": "https://github.com/EssentialsX/Essentials/pull/3812#discussion_r536986470", "createdAt": "2020-12-06T08:23:05Z", "author": {"login": "mdcfe"}, "path": "Essentials/src/main/java/com/earth2me/essentials/Essentials.java", "diffHunk": "@@ -201,6 +201,10 @@ public void onEnable() {\n             Console.setInstance(this);\n \n             switch (VersionUtil.getServerSupportStatus()) {\n+                case DANGEROUS: {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8719aaeb6dbcc60fe1fea48af0ac0f2afe8b64e8"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjk4NjY0Mw==", "bodyText": "Why not use an immutable Map<String, SupportStatus> to cover other possible cases too?", "url": "https://github.com/EssentialsX/Essentials/pull/3812#discussion_r536986643", "createdAt": "2020-12-06T08:24:13Z", "author": {"login": "mdcfe"}, "path": "Essentials/src/main/java/com/earth2me/essentials/utils/VersionUtil.java", "diffHunk": "@@ -28,12 +28,28 @@\n     public static final BukkitVersion v1_15_R01 = BukkitVersion.fromString(\"1.15-R0.1-SNAPSHOT\");\n     public static final BukkitVersion v1_15_2_R01 = BukkitVersion.fromString(\"1.15.2-R0.1-SNAPSHOT\");\n     public static final BukkitVersion v1_16_1_R01 = BukkitVersion.fromString(\"1.16.1-R0.1-SNAPSHOT\");\n-    public static final BukkitVersion v1_16_2_R01 = BukkitVersion.fromString(\"1.16.2-R0.1-SNAPSHOT\");\n     public static final BukkitVersion v1_16_4_R01 = BukkitVersion.fromString(\"1.16.4-R0.1-SNAPSHOT\");\n \n     private static final Set<BukkitVersion> supportedVersions = ImmutableSet.of(v1_8_8_R01, v1_9_4_R01, v1_10_2_R01, v1_11_2_R01, v1_12_2_R01, v1_13_2_R01, v1_14_4_R01, v1_15_2_R01, v1_16_4_R01);\n \n+    private static final Set<String> dangerousServerClasses = ImmutableSet.of(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8719aaeb6dbcc60fe1fea48af0ac0f2afe8b64e8"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjk4Njg4OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            serverUnsupportedDangerous=You are running a server that is known to be extremely dangerous and lead to data loss. It is strongly recommended you switch to a more stable high preforming server software like Paper or Tuinity.\n          \n          \n            \n            serverUnsupportedDangerous=You are running a server fork that is known to be extremely dangerous and lead to data loss. It is strongly recommended you switch to a more stable high-performing server software, like Paper or Tuinity.", "url": "https://github.com/EssentialsX/Essentials/pull/3812#discussion_r536986889", "createdAt": "2020-12-06T08:25:46Z", "author": {"login": "mdcfe"}, "path": "Essentials/src/main/resources/messages.properties", "diffHunk": "@@ -706,6 +706,7 @@ serverFull=Server is full\\!\n serverReloading=There's a good chance you're reloading your server right now. If that's the case, why do you hate yourself? Expect no support from the EssentialsX team when using /reload.\n serverTotal=\\u00a76Server Total\\:\\u00a7c {0}\n serverUnsupported=You are running an unsupported server version!\n+serverUnsupportedDangerous=You are running a server that is known to be extremely dangerous and lead to data loss. It is strongly recommended you switch to a more stable high preforming server software like Paper or Tuinity.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8719aaeb6dbcc60fe1fea48af0ac0f2afe8b64e8"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb094eb50d8730fb57e3d6f40e7f12ab6f1cb11b", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/cb094eb50d8730fb57e3d6f40e7f12ab6f1cb11b", "committedDate": "2020-12-06T15:20:41Z", "message": "Changes from code review"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d2661d11d9fb4d26cfcbc0f4f1b72c24e5c7cb2", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/6d2661d11d9fb4d26cfcbc0f4f1b72c24e5c7cb2", "committedDate": "2020-12-06T15:26:32Z", "message": "Codestyle :/"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1NzE4NjQ1", "url": "https://github.com/EssentialsX/Essentials/pull/3812#pullrequestreview-545718645", "createdAt": "2020-12-06T15:38:37Z", "commit": {"oid": "6d2661d11d9fb4d26cfcbc0f4f1b72c24e5c7cb2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNlQxNTozODozN1rOIALwew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNlQxNTozODozN1rOIALwew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzA2MzU0Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            serverUnsupportedCleanroom=You are running a server that does not properly support Bukkit plugins that rely on internal Mojang code. Consider using a Essentials replacement for your server software.\n          \n          \n            \n            serverUnsupportedCleanroom=You are running a server that does not properly support Bukkit plugins that rely on internal Mojang code. Consider using an Essentials replacement for your server software.", "url": "https://github.com/EssentialsX/Essentials/pull/3812#discussion_r537063547", "createdAt": "2020-12-06T15:38:37Z", "author": {"login": "l1ttleO"}, "path": "Essentials/src/main/resources/messages.properties", "diffHunk": "@@ -706,6 +706,8 @@ serverFull=Server is full\\!\n serverReloading=There's a good chance you're reloading your server right now. If that's the case, why do you hate yourself? Expect no support from the EssentialsX team when using /reload.\n serverTotal=\\u00a76Server Total\\:\\u00a7c {0}\n serverUnsupported=You are running an unsupported server version!\n+serverUnsupportedCleanroom=You are running a server that does not properly support Bukkit plugins that rely on internal Mojang code. Consider using a Essentials replacement for your server software.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6d2661d11d9fb4d26cfcbc0f4f1b72c24e5c7cb2"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b6227b478687bad560031e07ba956fe4b37fe40b", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/b6227b478687bad560031e07ba956fe4b37fe40b", "committedDate": "2020-12-06T15:40:43Z", "message": "Update Essentials/src/main/resources/messages.properties\n\nCo-authored-by: l1ttleO <61277953+l1ttleO@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "09a38358528e9ea0b074261c1ae639dfd3467d70", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/09a38358528e9ea0b074261c1ae639dfd3467d70", "committedDate": "2020-12-10T15:43:51Z", "message": "Add KibblePatcher as dangerous"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3d592576025297ffaaf1aec632aa0559550a50af", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/3d592576025297ffaaf1aec632aa0559550a50af", "committedDate": "2020-12-10T16:15:15Z", "message": "Add Fabric as unstable"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dacc4b65751eca71d76ed36f5a338849f653fedd", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/dacc4b65751eca71d76ed36f5a338849f653fedd", "committedDate": "2020-12-10T16:22:34Z", "message": "Clean up"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwOTk1ODI4", "url": "https://github.com/EssentialsX/Essentials/pull/3812#pullrequestreview-550995828", "createdAt": "2020-12-14T01:47:41Z", "commit": {"oid": "dacc4b65751eca71d76ed36f5a338849f653fedd"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwOTk1ODg1", "url": "https://github.com/EssentialsX/Essentials/pull/3812#pullrequestreview-550995885", "createdAt": "2020-12-14T01:47:54Z", "commit": {"oid": "dacc4b65751eca71d76ed36f5a338849f653fedd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQwMTo0Nzo1NFrOIE8stA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQwMTo0Nzo1NFrOIE8stA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjA1OTcwMA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    // KibblePatcher - Dangerous bytecode editor snakeoil that's only use it to break plugins\n          \n          \n            \n                    // KibblePatcher - Dangerous bytecode editor snakeoil that's only use is to break plugins", "url": "https://github.com/EssentialsX/Essentials/pull/3812#discussion_r542059700", "createdAt": "2020-12-14T01:47:54Z", "author": {"login": "Puremin0rez"}, "path": "Essentials/src/main/java/com/earth2me/essentials/utils/VersionUtil.java", "diffHunk": "@@ -28,12 +30,46 @@\n     public static final BukkitVersion v1_15_R01 = BukkitVersion.fromString(\"1.15-R0.1-SNAPSHOT\");\n     public static final BukkitVersion v1_15_2_R01 = BukkitVersion.fromString(\"1.15.2-R0.1-SNAPSHOT\");\n     public static final BukkitVersion v1_16_1_R01 = BukkitVersion.fromString(\"1.16.1-R0.1-SNAPSHOT\");\n-    public static final BukkitVersion v1_16_2_R01 = BukkitVersion.fromString(\"1.16.2-R0.1-SNAPSHOT\");\n     public static final BukkitVersion v1_16_4_R01 = BukkitVersion.fromString(\"1.16.4-R0.1-SNAPSHOT\");\n \n     private static final Set<BukkitVersion> supportedVersions = ImmutableSet.of(v1_8_8_R01, v1_9_4_R01, v1_10_2_R01, v1_11_2_R01, v1_12_2_R01, v1_13_2_R01, v1_14_4_R01, v1_15_2_R01, v1_16_4_R01);\n \n+    private static final Map<String, SupportStatus> unsupportedServerClasses;\n+\n+    static {\n+        final ImmutableMap.Builder<String, SupportStatus> builder = new ImmutableMap.Builder<>();\n+\n+        // Yatopia - Extremely volatile patch set;\n+        //   * Messes with bungeecord UUIDs\n+        //   * Frequent data corruptions\n+        builder.put(\"org.yatopiamc.yatopia.server.YatopiaConfig\", SupportStatus.DANGEROUS_FORK);\n+\n+        // KibblePatcher - Dangerous bytecode editor snakeoil that's only use it to break plugins", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dacc4b65751eca71d76ed36f5a338849f653fedd"}, "originalPosition": 41}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9aa1f1d4a6c89322aa66f98613ea8a216e053a3d", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/9aa1f1d4a6c89322aa66f98613ea8a216e053a3d", "committedDate": "2020-12-14T01:48:26Z", "message": "Update Essentials/src/main/java/com/earth2me/essentials/utils/VersionUtil.java\n\nCo-authored-by: Dylan Xaldin <Puremin0rez515@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5185d33583c6971e389393c303bc151bc6989f2c", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/5185d33583c6971e389393c303bc151bc6989f2c", "committedDate": "2020-12-14T02:25:56Z", "message": "Merge branch '2.x' into feature/segregate-servers"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "64fd133a773b089857a38b4ff0fd1fb257d2d4ee", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/64fd133a773b089857a38b4ff0fd1fb257d2d4ee", "committedDate": "2021-01-02T02:55:34Z", "message": "Merge branch '2.x' into feature/segregate-servers"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY0NTQ1OTkx", "url": "https://github.com/EssentialsX/Essentials/pull/3812#pullrequestreview-564545991", "createdAt": "2021-01-08T20:05:06Z", "commit": {"oid": "64fd133a773b089857a38b4ff0fd1fb257d2d4ee"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wOFQyMDowNTowNlrOIQfdLA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wOFQyMDowNjo1OFrOIQfgaA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDE2MzUwMA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    // KibblePatcher - Dangerous bytecode editor snakeoil that's only use is to break plugins\n          \n          \n            \n                    // KibblePatcher - Dangerous bytecode editor snakeoil whose only use is to break plugins\n          \n      \n    \n    \n  \n\nliterally plugin-breaking smh", "url": "https://github.com/EssentialsX/Essentials/pull/3812#discussion_r554163500", "createdAt": "2021-01-08T20:05:06Z", "author": {"login": "mdcfe"}, "path": "Essentials/src/main/java/com/earth2me/essentials/utils/VersionUtil.java", "diffHunk": "@@ -28,12 +30,46 @@\n     public static final BukkitVersion v1_15_R01 = BukkitVersion.fromString(\"1.15-R0.1-SNAPSHOT\");\n     public static final BukkitVersion v1_15_2_R01 = BukkitVersion.fromString(\"1.15.2-R0.1-SNAPSHOT\");\n     public static final BukkitVersion v1_16_1_R01 = BukkitVersion.fromString(\"1.16.1-R0.1-SNAPSHOT\");\n-    public static final BukkitVersion v1_16_2_R01 = BukkitVersion.fromString(\"1.16.2-R0.1-SNAPSHOT\");\n     public static final BukkitVersion v1_16_4_R01 = BukkitVersion.fromString(\"1.16.4-R0.1-SNAPSHOT\");\n \n     private static final Set<BukkitVersion> supportedVersions = ImmutableSet.of(v1_8_8_R01, v1_9_4_R01, v1_10_2_R01, v1_11_2_R01, v1_12_2_R01, v1_13_2_R01, v1_14_4_R01, v1_15_2_R01, v1_16_4_R01);\n \n+    private static final Map<String, SupportStatus> unsupportedServerClasses;\n+\n+    static {\n+        final ImmutableMap.Builder<String, SupportStatus> builder = new ImmutableMap.Builder<>();\n+\n+        // Yatopia - Extremely volatile patch set;\n+        //   * Messes with bungeecord UUIDs\n+        //   * Frequent data corruptions\n+        builder.put(\"org.yatopiamc.yatopia.server.YatopiaConfig\", SupportStatus.DANGEROUS_FORK);\n+\n+        // KibblePatcher - Dangerous bytecode editor snakeoil that's only use is to break plugins", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "64fd133a773b089857a38b4ff0fd1fb257d2d4ee"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDE2Mzc3Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    //   * Messes with bungeecord UUIDs\n          \n          \n            \n                    //   * Messes with proxy-forwarded UUIDs", "url": "https://github.com/EssentialsX/Essentials/pull/3812#discussion_r554163777", "createdAt": "2021-01-08T20:05:47Z", "author": {"login": "mdcfe"}, "path": "Essentials/src/main/java/com/earth2me/essentials/utils/VersionUtil.java", "diffHunk": "@@ -28,12 +30,46 @@\n     public static final BukkitVersion v1_15_R01 = BukkitVersion.fromString(\"1.15-R0.1-SNAPSHOT\");\n     public static final BukkitVersion v1_15_2_R01 = BukkitVersion.fromString(\"1.15.2-R0.1-SNAPSHOT\");\n     public static final BukkitVersion v1_16_1_R01 = BukkitVersion.fromString(\"1.16.1-R0.1-SNAPSHOT\");\n-    public static final BukkitVersion v1_16_2_R01 = BukkitVersion.fromString(\"1.16.2-R0.1-SNAPSHOT\");\n     public static final BukkitVersion v1_16_4_R01 = BukkitVersion.fromString(\"1.16.4-R0.1-SNAPSHOT\");\n \n     private static final Set<BukkitVersion> supportedVersions = ImmutableSet.of(v1_8_8_R01, v1_9_4_R01, v1_10_2_R01, v1_11_2_R01, v1_12_2_R01, v1_13_2_R01, v1_14_4_R01, v1_15_2_R01, v1_16_4_R01);\n \n+    private static final Map<String, SupportStatus> unsupportedServerClasses;\n+\n+    static {\n+        final ImmutableMap.Builder<String, SupportStatus> builder = new ImmutableMap.Builder<>();\n+\n+        // Yatopia - Extremely volatile patch set;\n+        //   * Messes with bungeecord UUIDs", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "64fd133a773b089857a38b4ff0fd1fb257d2d4ee"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDE2MzkwMw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    // Forge - Doesn't support bukkit\n          \n          \n            \n                    // Forge - Doesn't support Bukkit", "url": "https://github.com/EssentialsX/Essentials/pull/3812#discussion_r554163903", "createdAt": "2021-01-08T20:06:04Z", "author": {"login": "mdcfe"}, "path": "Essentials/src/main/java/com/earth2me/essentials/utils/VersionUtil.java", "diffHunk": "@@ -28,12 +30,46 @@\n     public static final BukkitVersion v1_15_R01 = BukkitVersion.fromString(\"1.15-R0.1-SNAPSHOT\");\n     public static final BukkitVersion v1_15_2_R01 = BukkitVersion.fromString(\"1.15.2-R0.1-SNAPSHOT\");\n     public static final BukkitVersion v1_16_1_R01 = BukkitVersion.fromString(\"1.16.1-R0.1-SNAPSHOT\");\n-    public static final BukkitVersion v1_16_2_R01 = BukkitVersion.fromString(\"1.16.2-R0.1-SNAPSHOT\");\n     public static final BukkitVersion v1_16_4_R01 = BukkitVersion.fromString(\"1.16.4-R0.1-SNAPSHOT\");\n \n     private static final Set<BukkitVersion> supportedVersions = ImmutableSet.of(v1_8_8_R01, v1_9_4_R01, v1_10_2_R01, v1_11_2_R01, v1_12_2_R01, v1_13_2_R01, v1_14_4_R01, v1_15_2_R01, v1_16_4_R01);\n \n+    private static final Map<String, SupportStatus> unsupportedServerClasses;\n+\n+    static {\n+        final ImmutableMap.Builder<String, SupportStatus> builder = new ImmutableMap.Builder<>();\n+\n+        // Yatopia - Extremely volatile patch set;\n+        //   * Messes with bungeecord UUIDs\n+        //   * Frequent data corruptions\n+        builder.put(\"org.yatopiamc.yatopia.server.YatopiaConfig\", SupportStatus.DANGEROUS_FORK);\n+\n+        // KibblePatcher - Dangerous bytecode editor snakeoil that's only use is to break plugins\n+        builder.put(\"net.kibblelands.server.FastMath\", SupportStatus.DANGEROUS_FORK);\n+\n+        // AirplaneLite - Yatopia sidestream;\n+        //   * Attempts unsafe chunk concurrency\n+        builder.put(\"gg.airplane.structs.ChunkMapMap\", SupportStatus.DANGEROUS_FORK);\n+        builder.put(\"gg.airplane.structs.ConcLong2ObjectOpenHashMap\", SupportStatus.DANGEROUS_FORK);\n+\n+        // Akarin - Dangerous patch history;\n+        //   * Potentially unsafe saving of nms.JsonList\n+        builder.put(\"io.akarin.server.Config\", SupportStatus.DANGEROUS_FORK);\n+\n+        // Forge - Doesn't support bukkit", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "64fd133a773b089857a38b4ff0fd1fb257d2d4ee"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDE2NDAwMA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    // Fabric - Doesn't support bukkit\n          \n          \n            \n                    // Fabric - Doesn't support Bukkit", "url": "https://github.com/EssentialsX/Essentials/pull/3812#discussion_r554164000", "createdAt": "2021-01-08T20:06:19Z", "author": {"login": "mdcfe"}, "path": "Essentials/src/main/java/com/earth2me/essentials/utils/VersionUtil.java", "diffHunk": "@@ -28,12 +30,46 @@\n     public static final BukkitVersion v1_15_R01 = BukkitVersion.fromString(\"1.15-R0.1-SNAPSHOT\");\n     public static final BukkitVersion v1_15_2_R01 = BukkitVersion.fromString(\"1.15.2-R0.1-SNAPSHOT\");\n     public static final BukkitVersion v1_16_1_R01 = BukkitVersion.fromString(\"1.16.1-R0.1-SNAPSHOT\");\n-    public static final BukkitVersion v1_16_2_R01 = BukkitVersion.fromString(\"1.16.2-R0.1-SNAPSHOT\");\n     public static final BukkitVersion v1_16_4_R01 = BukkitVersion.fromString(\"1.16.4-R0.1-SNAPSHOT\");\n \n     private static final Set<BukkitVersion> supportedVersions = ImmutableSet.of(v1_8_8_R01, v1_9_4_R01, v1_10_2_R01, v1_11_2_R01, v1_12_2_R01, v1_13_2_R01, v1_14_4_R01, v1_15_2_R01, v1_16_4_R01);\n \n+    private static final Map<String, SupportStatus> unsupportedServerClasses;\n+\n+    static {\n+        final ImmutableMap.Builder<String, SupportStatus> builder = new ImmutableMap.Builder<>();\n+\n+        // Yatopia - Extremely volatile patch set;\n+        //   * Messes with bungeecord UUIDs\n+        //   * Frequent data corruptions\n+        builder.put(\"org.yatopiamc.yatopia.server.YatopiaConfig\", SupportStatus.DANGEROUS_FORK);\n+\n+        // KibblePatcher - Dangerous bytecode editor snakeoil that's only use is to break plugins\n+        builder.put(\"net.kibblelands.server.FastMath\", SupportStatus.DANGEROUS_FORK);\n+\n+        // AirplaneLite - Yatopia sidestream;\n+        //   * Attempts unsafe chunk concurrency\n+        builder.put(\"gg.airplane.structs.ChunkMapMap\", SupportStatus.DANGEROUS_FORK);\n+        builder.put(\"gg.airplane.structs.ConcLong2ObjectOpenHashMap\", SupportStatus.DANGEROUS_FORK);\n+\n+        // Akarin - Dangerous patch history;\n+        //   * Potentially unsafe saving of nms.JsonList\n+        builder.put(\"io.akarin.server.Config\", SupportStatus.DANGEROUS_FORK);\n+\n+        // Forge - Doesn't support bukkit\n+        builder.put(\"net.minecraftforge.common.MinecraftForge\", SupportStatus.UNSTABLE);\n+\n+        // Fabric - Doesn't support bukkit", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "64fd133a773b089857a38b4ff0fd1fb257d2d4ee"}, "originalPosition": 56}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDE2NDMyOA==", "bodyText": "iirc calling this will break startup entirely on Glowstone or other non-NMS servers, which isn't ideal", "url": "https://github.com/EssentialsX/Essentials/pull/3812#discussion_r554164328", "createdAt": "2021-01-08T20:06:58Z", "author": {"login": "mdcfe"}, "path": "Essentials/src/main/java/com/earth2me/essentials/utils/VersionUtil.java", "diffHunk": "@@ -28,12 +30,46 @@\n     public static final BukkitVersion v1_15_R01 = BukkitVersion.fromString(\"1.15-R0.1-SNAPSHOT\");\n     public static final BukkitVersion v1_15_2_R01 = BukkitVersion.fromString(\"1.15.2-R0.1-SNAPSHOT\");\n     public static final BukkitVersion v1_16_1_R01 = BukkitVersion.fromString(\"1.16.1-R0.1-SNAPSHOT\");\n-    public static final BukkitVersion v1_16_2_R01 = BukkitVersion.fromString(\"1.16.2-R0.1-SNAPSHOT\");\n     public static final BukkitVersion v1_16_4_R01 = BukkitVersion.fromString(\"1.16.4-R0.1-SNAPSHOT\");\n \n     private static final Set<BukkitVersion> supportedVersions = ImmutableSet.of(v1_8_8_R01, v1_9_4_R01, v1_10_2_R01, v1_11_2_R01, v1_12_2_R01, v1_13_2_R01, v1_14_4_R01, v1_15_2_R01, v1_16_4_R01);\n \n+    private static final Map<String, SupportStatus> unsupportedServerClasses;\n+\n+    static {\n+        final ImmutableMap.Builder<String, SupportStatus> builder = new ImmutableMap.Builder<>();\n+\n+        // Yatopia - Extremely volatile patch set;\n+        //   * Messes with bungeecord UUIDs\n+        //   * Frequent data corruptions\n+        builder.put(\"org.yatopiamc.yatopia.server.YatopiaConfig\", SupportStatus.DANGEROUS_FORK);\n+\n+        // KibblePatcher - Dangerous bytecode editor snakeoil that's only use is to break plugins\n+        builder.put(\"net.kibblelands.server.FastMath\", SupportStatus.DANGEROUS_FORK);\n+\n+        // AirplaneLite - Yatopia sidestream;\n+        //   * Attempts unsafe chunk concurrency\n+        builder.put(\"gg.airplane.structs.ChunkMapMap\", SupportStatus.DANGEROUS_FORK);\n+        builder.put(\"gg.airplane.structs.ConcLong2ObjectOpenHashMap\", SupportStatus.DANGEROUS_FORK);\n+\n+        // Akarin - Dangerous patch history;\n+        //   * Potentially unsafe saving of nms.JsonList\n+        builder.put(\"io.akarin.server.Config\", SupportStatus.DANGEROUS_FORK);\n+\n+        // Forge - Doesn't support bukkit\n+        builder.put(\"net.minecraftforge.common.MinecraftForge\", SupportStatus.UNSTABLE);\n+\n+        // Fabric - Doesn't support bukkit\n+        builder.put(\"net.fabricmc.loader.launch.knot.KnotServer\", SupportStatus.UNSTABLE);\n+\n+        // Misc translation layers that do not add NMS will be caught by this\n+        builder.put(\"!net.minecraft.server.\" + ReflUtil.getNMSVersion() + \".MinecraftServer\", SupportStatus.NMS_CLEANROOM);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "64fd133a773b089857a38b4ff0fd1fb257d2d4ee"}, "originalPosition": 60}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "efcc2052b8e968f36a9cf3d08ad3cf310aa8a9f8", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/efcc2052b8e968f36a9cf3d08ad3cf310aa8a9f8", "committedDate": "2021-01-08T20:19:01Z", "message": "Apply suggestions from code review\n\nCo-authored-by: MD <1917406+mdcfe@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1846433dbc004f52b00a93cfc2d2fdcbcd70f4af", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/1846433dbc004f52b00a93cfc2d2fdcbcd70f4af", "committedDate": "2021-01-08T20:28:35Z", "message": "Silently fail on cleanroom implementations"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "74ea21eb7c47058bf67a3351e5e623bfb4ed7dbe", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/74ea21eb7c47058bf67a3351e5e623bfb4ed7dbe", "committedDate": "2021-01-08T20:41:54Z", "message": "Add notice for the class that created the unsupported server status"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTcxMDc3NDg1", "url": "https://github.com/EssentialsX/Essentials/pull/3812#pullrequestreview-571077485", "createdAt": "2021-01-19T09:56:53Z", "commit": {"oid": "74ea21eb7c47058bf67a3351e5e623bfb4ed7dbe"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b6df355381b8cbeb5a46273f1a1fb7c92b6b85dc", "author": {"user": {"login": "mdcfe", "name": "MD"}}, "url": "https://github.com/EssentialsX/Essentials/commit/b6df355381b8cbeb5a46273f1a1fb7c92b6b85dc", "committedDate": "2021-01-19T09:57:41Z", "message": "Merge branch '2.x' into feature/segregate-servers"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTcxMDc4NjU1", "url": "https://github.com/EssentialsX/Essentials/pull/3812#pullrequestreview-571078655", "createdAt": "2021-01-19T09:58:11Z", "commit": {"oid": "b6df355381b8cbeb5a46273f1a1fb7c92b6b85dc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6de50032229557397b3ff7231fe2098e642b20f8", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/6de50032229557397b3ff7231fe2098e642b20f8", "committedDate": "2021-01-19T12:32:57Z", "message": "Merge branch '2.x' into feature/segregate-servers"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4445, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}