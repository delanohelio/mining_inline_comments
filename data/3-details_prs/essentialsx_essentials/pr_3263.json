{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE2NDc0MDc4", "number": 3263, "title": "Fix clearing specific items in clearinventory", "bodyText": "Fixes #2986\nCloses #3050\nCloses #3191\nRefactors the clearinventory command code in such a way that fixes the problem of not being able to clear all of a specific item on newer server versions. Also re-adds data value support for older server versions that support it, which seemed to have been inadvertently removed in 79bc340.\nChecked against 1.8.8, 1.12.2, 1.13.2, 1.15.2.", "createdAt": "2020-05-12T04:16:33Z", "url": "https://github.com/EssentialsX/Essentials/pull/3263", "merged": true, "mergeCommit": {"oid": "5b9b76d5e7c8d356be2a7cfb4322dce04f87cc9c"}, "closed": true, "closedAt": "2020-05-17T20:10:14Z", "author": {"login": "pop4959"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcgcPhIgH2gAyNDE2NDc0MDc4OjI4M2NlMTRjZDM2NjA1ZWQzN2U0NTBiOWUwOTM2ZmIyOGI4ZWYyNTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABciRB4ggFqTQxMzE5NDQ2NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "283ce14cd36605ed37e450b9e0936fb28b8ef259", "author": {"user": {"login": "pop4959", "name": null}}, "url": "https://github.com/EssentialsX/Essentials/commit/283ce14cd36605ed37e450b9e0936fb28b8ef259", "committedDate": "2020-05-12T04:05:57Z", "message": "Fix clearing specific items in clearinventory"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f1db9cfa3c82a6bfebb4fc03ea411f2b154b4335", "author": {"user": {"login": "pop4959", "name": null}}, "url": "https://github.com/EssentialsX/Essentials/commit/f1db9cfa3c82a6bfebb4fc03ea411f2b154b4335", "committedDate": "2020-05-12T04:34:02Z", "message": "Make sure mat/dat are added together"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5NjkzNTYw", "url": "https://github.com/EssentialsX/Essentials/pull/3263#pullrequestreview-409693560", "createdAt": "2020-05-12T04:40:39Z", "commit": {"oid": "f1db9cfa3c82a6bfebb4fc03ea411f2b154b4335"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEwMzYxNzI2", "url": "https://github.com/EssentialsX/Essentials/pull/3263#pullrequestreview-410361726", "createdAt": "2020-05-12T19:35:54Z", "commit": {"oid": "f1db9cfa3c82a6bfebb4fc03ea411f2b154b4335"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4b66ec08cb206d16cf4db70418814bef341e0998", "author": {"user": {"login": "pop4959", "name": null}}, "url": "https://github.com/EssentialsX/Essentials/commit/4b66ec08cb206d16cf4db70418814bef341e0998", "committedDate": "2020-05-13T09:10:11Z", "message": "Clean up as per Ichbinjoe's suggestion"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEwNzc3ODAy", "url": "https://github.com/EssentialsX/Essentials/pull/3263#pullrequestreview-410777802", "createdAt": "2020-05-13T10:06:12Z", "commit": {"oid": "4b66ec08cb206d16cf4db70418814bef341e0998"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxMDowNjoxMlrOGUqpIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxMDowNjoxMlrOGUqpIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDMyMzM2MA==", "bodyText": "I'd prefer this was replaced with a private enum, as done in #3191 - this variable only exists to control flow later on, and it's clearer if it uses a named enum constant than a magic number.", "url": "https://github.com/EssentialsX/Essentials/pull/3263#discussion_r424323360", "createdAt": "2020-05-13T10:06:12Z", "author": {"login": "mdcfe"}, "path": "Essentials/src/com/earth2me/essentials/commands/Commandclearinventory.java", "diffHunk": "@@ -79,11 +80,28 @@ private void parseCommand(Server server, CommandSource sender, String commandLab\n         }\n     }\n \n-    protected void clearHandler(CommandSource sender, Player player, String[] args, int offset, boolean showExtended) throws Exception {\n-        short data = -1;\n+    private static class Item {\n+        private Material material;\n+        private short data;\n+\n+        public Item(Material material, short data) {\n+            this.material = material;\n+            this.data = data;\n+        }\n+\n+        public Material getMaterial() {\n+            return material;\n+        }\n+\n+        public short getData() {\n+            return data;\n+        }\n+    }\n+\n+    protected void clearHandler(CommandSource sender, Player player, String[] args, int offset, boolean showExtended) {\n         int type = -1;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4b66ec08cb206d16cf4db70418814bef341e0998"}, "originalPosition": 42}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ed24c8fb8f20c3a10a1c2703e4c4c9c99d98152", "author": {"user": {"login": "pop4959", "name": null}}, "url": "https://github.com/EssentialsX/Essentials/commit/9ed24c8fb8f20c3a10a1c2703e4c4c9c99d98152", "committedDate": "2020-05-13T10:17:50Z", "message": "ClearHandlerType enum"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bdd66393fe2ea353a3a3218cffd6608bcfffa483", "author": {"user": {"login": "pop4959", "name": null}}, "url": "https://github.com/EssentialsX/Essentials/commit/bdd66393fe2ea353a3a3218cffd6608bcfffa483", "committedDate": "2020-05-13T22:02:14Z", "message": "remove unused comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExMzM4OTE4", "url": "https://github.com/EssentialsX/Essentials/pull/3263#pullrequestreview-411338918", "createdAt": "2020-05-13T22:18:41Z", "commit": {"oid": "bdd66393fe2ea353a3a3218cffd6608bcfffa483"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzMTk0NDY1", "url": "https://github.com/EssentialsX/Essentials/pull/3263#pullrequestreview-413194465", "createdAt": "2020-05-17T20:09:57Z", "commit": {"oid": "bdd66393fe2ea353a3a3218cffd6608bcfffa483"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4694, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}