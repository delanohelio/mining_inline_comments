{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ2MTU1NTY5", "number": 3882, "title": "Allow enchants on fireworks/charges/potions/banners", "bodyText": "This PR fixes #3879\nAlso added p as a short name for power for fireworks meta.", "createdAt": "2020-12-28T16:29:27Z", "url": "https://github.com/EssentialsX/Essentials/pull/3882", "merged": true, "mergeCommit": {"oid": "fa87c74b56c9c35c204ed812d92a7a8869ae0912"}, "closed": true, "closedAt": "2021-06-11T15:13:44Z", "author": {"login": "imDaniX"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdqoZCIAH2gAyNTQ2MTU1NTY5OmM1YjgzNjI4MzM1NGFjMTM0OGU4MzE3NDQzMDFhNGEzYWVhZTUyNDM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABefuh5hAFqTY4MTk0MjE0Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c5b836283354ac1348e831744301a4a3aeae5243", "author": {"user": {"login": "imDaniX", "name": "Daniil Z."}}, "url": "https://github.com/EssentialsX/Essentials/commit/c5b836283354ac1348e831744301a4a3aeae5243", "committedDate": "2020-12-28T16:05:36Z", "message": "Enchant potions and fireworks too"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0e327df20ec37e7fe35ec0d6aea6b5d33a76b77b", "author": {"user": {"login": "imDaniX", "name": "Daniil Z."}}, "url": "https://github.com/EssentialsX/Essentials/commit/0e327df20ec37e7fe35ec0d6aea6b5d33a76b77b", "committedDate": "2020-12-30T08:21:37Z", "message": "Skip meta if enchantment is found"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0886de6d15ba0ede5b7c4913e6f773472a8997e5", "author": {"user": {"login": "imDaniX", "name": "Daniil Z."}}, "url": "https://github.com/EssentialsX/Essentials/commit/0886de6d15ba0ede5b7c4913e6f773472a8997e5", "committedDate": "2021-01-01T10:00:19Z", "message": "Fix power check\n\nI have to stop coding at night"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY0OTA2MzU0", "url": "https://github.com/EssentialsX/Essentials/pull/3882#pullrequestreview-564906354", "createdAt": "2021-01-10T22:19:57Z", "commit": {"oid": "0886de6d15ba0ede5b7c4913e6f773472a8997e5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xMFQyMjoxOTo1OFrOIQ8AdA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xMFQyMjoxOTo1OFrOIQ8AdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDYzMTI4NA==", "bodyText": "Why the check for power? It isn't required in the firework meta", "url": "https://github.com/EssentialsX/Essentials/pull/3882#discussion_r554631284", "createdAt": "2021-01-10T22:19:58Z", "author": {"login": "JRoy"}, "path": "Essentials/src/main/java/com/earth2me/essentials/MetaItemStack.java", "diffHunk": "@@ -226,28 +226,25 @@ public void addStringMeta(final CommandSource sender, final boolean allowUnsafe,\n             final BookMeta meta = (BookMeta) stack.getItemMeta();\n             meta.setTitle(title);\n             stack.setItemMeta(meta);\n-        } else if (split.length > 1 && split[0].equalsIgnoreCase(\"power\") && MaterialUtil.isFirework(stack.getType()) && hasMetaPermission(sender, \"firework-power\", false, true, ess)) {\n-            final int power = NumberUtil.isInt(split[1]) ? Integer.parseInt(split[1]) : 0;\n-            final FireworkMeta meta = (FireworkMeta) stack.getItemMeta();\n-            meta.setPower(power > 3 ? 4 : power);\n-            stack.setItemMeta(meta);\n         } else if (split.length > 1 && split[0].equalsIgnoreCase(\"itemflags\") && hasMetaPermission(sender, \"itemflags\", false, true, ess)) {\n             addItemFlags(string);\n         } else if (MaterialUtil.isFirework(stack.getType())) {\n-            //WARNING - Meta for fireworks will be ignored after this point.\n-            addFireworkMeta(sender, false, string, ess);\n+            if (split[0].equalsIgnoreCase(\"power\") || !parseEnchantmentStrings(sender, allowUnsafe, split, ess)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0886de6d15ba0ede5b7c4913e6f773472a8997e5"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "248f5915fd81510f8ad0374bbbadef33c72970ce", "author": {"user": {"login": "imDaniX", "name": "Daniil Z."}}, "url": "https://github.com/EssentialsX/Essentials/commit/248f5915fd81510f8ad0374bbbadef33c72970ce", "committedDate": "2021-01-19T20:12:06Z", "message": "Revert moving power meta into addFireworkMeta method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a91ba70207beeefe0d47ffd441767e3b7a572abd", "author": {"user": {"login": "imDaniX", "name": "Daniil Z."}}, "url": "https://github.com/EssentialsX/Essentials/commit/a91ba70207beeefe0d47ffd441767e3b7a572abd", "committedDate": "2021-01-19T20:52:15Z", "message": "Merge '2.x' into fix-enchantments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTc4Mzc3Mjkz", "url": "https://github.com/EssentialsX/Essentials/pull/3882#pullrequestreview-578377293", "createdAt": "2021-01-28T14:18:36Z", "commit": {"oid": "a91ba70207beeefe0d47ffd441767e3b7a572abd"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjgxOTM4NDY3", "url": "https://github.com/EssentialsX/Essentials/pull/3882#pullrequestreview-681938467", "createdAt": "2021-06-11T15:09:01Z", "commit": {"oid": "a91ba70207beeefe0d47ffd441767e3b7a572abd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "94aa01bad8e1886b70c620e8a78a9f9c2818c63e", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/94aa01bad8e1886b70c620e8a78a9f9c2818c63e", "committedDate": "2021-06-11T15:09:08Z", "message": "Merge branch '2.x' into fix-enchantments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjgxOTQyMTQy", "url": "https://github.com/EssentialsX/Essentials/pull/3882#pullrequestreview-681942142", "createdAt": "2021-06-11T15:12:42Z", "commit": {"oid": "94aa01bad8e1886b70c620e8a78a9f9c2818c63e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4517, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}