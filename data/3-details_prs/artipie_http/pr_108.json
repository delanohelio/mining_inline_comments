{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAwMzcxODYx", "number": 108, "title": "RsFull: Add support for building response with all components: status code, headers and body", "bodyText": "Add support for building response with all components: status code, headers and body: #109", "createdAt": "2020-04-07T16:22:25Z", "url": "https://github.com/artipie/http/pull/108", "merged": true, "mergeCommit": {"oid": "2230730bfda248fe0a710699a0f9be9c457167c2"}, "closed": true, "closedAt": "2020-04-08T11:09:39Z", "author": {"login": "Guseyn"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcVVylagH2gAyNDAwMzcxODYxOmNmNzMyOTE3NGJlNWViMjIyNGZhMzkxMGU1MzM2NWI1YTQ0MzliZTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcVl7BlgFqTM4OTg3NDA0OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "cf7329174be5eb2224fa3910e53365b5a4439be6", "author": {"user": {"login": "Guseyn", "name": "Guseyn Ismayylov"}}, "url": "https://github.com/artipie/http/commit/cf7329174be5eb2224fa3910e53365b5a4439be6", "committedDate": "2020-04-07T16:21:45Z", "message": "RsFull"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5NDI1OTgz", "url": "https://github.com/artipie/http/pull/108#pullrequestreview-389425983", "createdAt": "2020-04-07T19:30:17Z", "commit": {"oid": "cf7329174be5eb2224fa3910e53365b5a4439be6"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QxOTozMDoxN1rOGCS4XQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QxOTo0MDozNFrOGCTN3g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTA1OTY3Nw==", "bodyText": "@Guseyn expand the description", "url": "https://github.com/artipie/http/pull/108#discussion_r405059677", "createdAt": "2020-04-07T19:30:17Z", "author": {"login": "Vatavuk"}, "path": "src/main/java/com/artipie/http/rs/RsFull.java", "diffHunk": "@@ -0,0 +1,98 @@\n+/*\n+ * MIT License\n+ *\n+ * Copyright (c) 2020 Artipie\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy\n+ * of this software and associated documentation files (the \"Software\"), to deal\n+ * in the Software without restriction, including without limitation the rights\n+ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n+ * copies of the Software, and to permit persons to whom the Software is\n+ * furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included in all\n+ * copies or substantial portions of the Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n+ * SOFTWARE.\n+ */\n+\n+package com.artipie.http.rs;\n+\n+import com.artipie.http.Connection;\n+import com.artipie.http.Response;\n+import java.nio.ByteBuffer;\n+import java.util.Map;\n+import java.util.concurrent.CompletionStage;\n+import org.reactivestreams.Publisher;\n+\n+/**\n+ * RsFull.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cf7329174be5eb2224fa3910e53365b5a4439be6"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTA2NDc4Ng==", "bodyText": "@Guseyn this object composition is unnecessary. We already have origin which will do all this wrapping in its RsWith classes. It should be just this.origin.send(connection)", "url": "https://github.com/artipie/http/pull/108#discussion_r405064786", "createdAt": "2020-04-07T19:39:49Z", "author": {"login": "Vatavuk"}, "path": "src/main/java/com/artipie/http/rs/RsFull.java", "diffHunk": "@@ -0,0 +1,98 @@\n+/*\n+ * MIT License\n+ *\n+ * Copyright (c) 2020 Artipie\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy\n+ * of this software and associated documentation files (the \"Software\"), to deal\n+ * in the Software without restriction, including without limitation the rights\n+ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n+ * copies of the Software, and to permit persons to whom the Software is\n+ * furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included in all\n+ * copies or substantial portions of the Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n+ * SOFTWARE.\n+ */\n+\n+package com.artipie.http.rs;\n+\n+import com.artipie.http.Connection;\n+import com.artipie.http.Response;\n+import java.nio.ByteBuffer;\n+import java.util.Map;\n+import java.util.concurrent.CompletionStage;\n+import org.reactivestreams.Publisher;\n+\n+/**\n+ * RsFull.\n+ *\n+ * @since 0.8\n+ * @checkstyle ParameterNumberCheck (500 lines)\n+ */\n+public final class RsFull implements Response {\n+\n+    /**\n+     * Origin response.\n+     */\n+    private final Response origin;\n+\n+    /**\n+     * Status code.\n+     */\n+    private final RsStatus status;\n+\n+    /**\n+     * Headers.\n+     */\n+    private final Iterable<Map.Entry<String, String>> headers;\n+\n+    /**\n+     * Body publisher.\n+     */\n+    private final Publisher<ByteBuffer> body;\n+\n+    /**\n+     * Ctor.\n+     * @param origin Origin response\n+     * @param status Status code\n+     * @param headers Headers\n+     * @param body Response body\n+     */\n+    public RsFull(\n+        final Response origin,\n+        final RsStatus status,\n+        final Iterable<Map.Entry<String, String>> headers,\n+        final Publisher<ByteBuffer> body) {\n+        this.origin = new RsWithStatus(\n+            new RsWithHeaders(\n+                new RsWithBody(\n+                    origin, body\n+                ), headers\n+            ), status\n+        );\n+        this.status = status;\n+        this.headers = headers;\n+        this.body = body;\n+    }\n+\n+    @Override\n+    public CompletionStage<Void> send(final Connection connection) {\n+        return this.origin.send(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cf7329174be5eb2224fa3910e53365b5a4439be6"}, "originalPosition": 88}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTA2NDkzOQ==", "bodyText": "@Guseyn leave this private", "url": "https://github.com/artipie/http/pull/108#discussion_r405064939", "createdAt": "2020-04-07T19:40:08Z", "author": {"login": "Vatavuk"}, "path": "src/main/java/com/artipie/http/rs/RsWithHeaders.java", "diffHunk": "@@ -87,7 +87,7 @@ public RsWithHeaders(\n      * Connection with additional headers.\n      * @since 0.3\n      */\n-    private static final class ConWithHeaders implements Connection {\n+    public static final class ConWithHeaders implements Connection {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cf7329174be5eb2224fa3910e53365b5a4439be6"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTA2NDk2NA==", "bodyText": "@Guseyn leave this private", "url": "https://github.com/artipie/http/pull/108#discussion_r405064964", "createdAt": "2020-04-07T19:40:11Z", "author": {"login": "Vatavuk"}, "path": "src/main/java/com/artipie/http/rs/RsWithBody.java", "diffHunk": "@@ -116,7 +116,7 @@ public RsWithBody(final Response origin, final Publisher<ByteBuffer> body) {\n      * Connection with body publisher.\n      * @since 0.3\n      */\n-    private static final class ConWithBody implements Connection {\n+    public static final class ConWithBody implements Connection {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cf7329174be5eb2224fa3910e53365b5a4439be6"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTA2NTE1Mg==", "bodyText": "@Guseyn leave this private", "url": "https://github.com/artipie/http/pull/108#discussion_r405065152", "createdAt": "2020-04-07T19:40:31Z", "author": {"login": "Vatavuk"}, "path": "src/main/java/com/artipie/http/rs/RsWithHeaders.java", "diffHunk": "@@ -105,7 +105,7 @@ public RsWithHeaders(\n          * @param origin Connection\n          * @param headers Headers\n          */\n-        private ConWithHeaders(\n+        public ConWithHeaders(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cf7329174be5eb2224fa3910e53365b5a4439be6"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTA2NTE4Mg==", "bodyText": "@Guseyn leave this private", "url": "https://github.com/artipie/http/pull/108#discussion_r405065182", "createdAt": "2020-04-07T19:40:34Z", "author": {"login": "Vatavuk"}, "path": "src/main/java/com/artipie/http/rs/RsWithStatus.java", "diffHunk": "@@ -79,7 +79,7 @@ public String toString() {\n      * Connection with overridden status code.\n      * @since 0.1\n      */\n-    private static final class ConWithStatus implements Connection {\n+    public static final class ConWithStatus implements Connection {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cf7329174be5eb2224fa3910e53365b5a4439be6"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e25ed4995008cf972c6c142ed198533b4ba1665", "author": {"user": {"login": "Guseyn", "name": "Guseyn Ismayylov"}}, "url": "https://github.com/artipie/http/commit/8e25ed4995008cf972c6c142ed198533b4ba1665", "committedDate": "2020-04-07T20:09:28Z", "message": "simplify"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5e8b585836c7458645ef0fcbcf01a592b4bf2baa", "author": {"user": {"login": "Guseyn", "name": "Guseyn Ismayylov"}}, "url": "https://github.com/artipie/http/commit/5e8b585836c7458645ef0fcbcf01a592b4bf2baa", "committedDate": "2020-04-07T20:11:22Z", "message": "fix linkt"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3d31a518e4dacf49df4af28a1b300fe082a8ac66", "author": {"user": {"login": "Guseyn", "name": "Guseyn Ismayylov"}}, "url": "https://github.com/artipie/http/commit/3d31a518e4dacf49df4af28a1b300fe082a8ac66", "committedDate": "2020-04-07T20:16:48Z", "message": "expand description"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5NDczNTc0", "url": "https://github.com/artipie/http/pull/108#pullrequestreview-389473574", "createdAt": "2020-04-07T20:40:36Z", "commit": {"oid": "3d31a518e4dacf49df4af28a1b300fe082a8ac66"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5NzE5Mjgy", "url": "https://github.com/artipie/http/pull/108#pullrequestreview-389719282", "createdAt": "2020-04-08T07:33:00Z", "commit": {"oid": "3d31a518e4dacf49df4af28a1b300fe082a8ac66"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQwNzozMzowMFrOGCigSA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQwNzozNToyNFrOGCilFQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTMxNTY1Ng==", "bodyText": "@Guseyn we don't need this parameter, since this constructor is complete: it includes status, headers and body - so nothing to override for origin", "url": "https://github.com/artipie/http/pull/108#discussion_r405315656", "createdAt": "2020-04-08T07:33:00Z", "author": {"login": "g4s8"}, "path": "src/main/java/com/artipie/http/rs/RsFull.java", "diffHunk": "@@ -0,0 +1,72 @@\n+/*\n+ * MIT License\n+ *\n+ * Copyright (c) 2020 Artipie\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy\n+ * of this software and associated documentation files (the \"Software\"), to deal\n+ * in the Software without restriction, including without limitation the rights\n+ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n+ * copies of the Software, and to permit persons to whom the Software is\n+ * furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included in all\n+ * copies or substantial portions of the Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n+ * SOFTWARE.\n+ */\n+\n+package com.artipie.http.rs;\n+\n+import com.artipie.http.Connection;\n+import com.artipie.http.Response;\n+import java.nio.ByteBuffer;\n+import java.util.Map;\n+import java.util.concurrent.CompletionStage;\n+import org.reactivestreams.Publisher;\n+\n+/**\n+ * RsFull, response with status code, headers and body.\n+ *\n+ * @since 0.8\n+ * @checkstyle ParameterNumberCheck (500 lines)\n+ */\n+public final class RsFull implements Response {\n+\n+    /**\n+     * Origin response.\n+     */\n+    private final Response origin;\n+\n+    /**\n+     * Ctor.\n+     * @param origin Origin response\n+     * @param status Status code\n+     * @param headers Headers\n+     * @param body Response body\n+     */\n+    public RsFull(\n+        final Response origin,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d31a518e4dacf49df4af28a1b300fe082a8ac66"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTMxNjI5OA==", "bodyText": "@Guseyn this suppression is not needed, if you remove origin constructor param", "url": "https://github.com/artipie/http/pull/108#discussion_r405316298", "createdAt": "2020-04-08T07:34:10Z", "author": {"login": "g4s8"}, "path": "src/main/java/com/artipie/http/rs/RsFull.java", "diffHunk": "@@ -0,0 +1,72 @@\n+/*\n+ * MIT License\n+ *\n+ * Copyright (c) 2020 Artipie\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy\n+ * of this software and associated documentation files (the \"Software\"), to deal\n+ * in the Software without restriction, including without limitation the rights\n+ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n+ * copies of the Software, and to permit persons to whom the Software is\n+ * furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included in all\n+ * copies or substantial portions of the Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n+ * SOFTWARE.\n+ */\n+\n+package com.artipie.http.rs;\n+\n+import com.artipie.http.Connection;\n+import com.artipie.http.Response;\n+import java.nio.ByteBuffer;\n+import java.util.Map;\n+import java.util.concurrent.CompletionStage;\n+import org.reactivestreams.Publisher;\n+\n+/**\n+ * RsFull, response with status code, headers and body.\n+ *\n+ * @since 0.8\n+ * @checkstyle ParameterNumberCheck (500 lines)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d31a518e4dacf49df4af28a1b300fe082a8ac66"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTMxNjg4NQ==", "bodyText": "@Guseyn it seems to be not fixed - I can see it in PR diff", "url": "https://github.com/artipie/http/pull/108#discussion_r405316885", "createdAt": "2020-04-08T07:35:24Z", "author": {"login": "g4s8"}, "path": "src/main/java/com/artipie/http/rs/RsWithHeaders.java", "diffHunk": "@@ -87,7 +87,7 @@ public RsWithHeaders(\n      * Connection with additional headers.\n      * @since 0.3\n      */\n-    private static final class ConWithHeaders implements Connection {\n+    public static final class ConWithHeaders implements Connection {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTA2NDkzOQ=="}, "originalCommit": {"oid": "cf7329174be5eb2224fa3910e53365b5a4439be6"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fec14fbc4b9c18d151692d89edc525207dca1fe3", "author": {"user": {"login": "Guseyn", "name": "Guseyn Ismayylov"}}, "url": "https://github.com/artipie/http/commit/fec14fbc4b9c18d151692d89edc525207dca1fe3", "committedDate": "2020-04-08T10:52:30Z", "message": "fix peivate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "19e3f270c120c1138f7c82a2ce87b25e181a0605", "author": {"user": {"login": "Guseyn", "name": "Guseyn Ismayylov"}}, "url": "https://github.com/artipie/http/commit/19e3f270c120c1138f7c82a2ce87b25e181a0605", "committedDate": "2020-04-08T10:56:50Z", "message": "simplify"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5e12eebae1a68d83a4de786400344d607690f8cd", "author": {"user": {"login": "Guseyn", "name": "Guseyn Ismayylov"}}, "url": "https://github.com/artipie/http/commit/5e12eebae1a68d83a4de786400344d607690f8cd", "committedDate": "2020-04-08T10:58:38Z", "message": "rename"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5ODc0MDQ4", "url": "https://github.com/artipie/http/pull/108#pullrequestreview-389874048", "createdAt": "2020-04-08T11:09:27Z", "commit": {"oid": "5e12eebae1a68d83a4de786400344d607690f8cd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3160, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}