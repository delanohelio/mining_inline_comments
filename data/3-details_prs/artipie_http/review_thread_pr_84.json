{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkwMzA4NTcw", "number": 84, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxOTo0Mzo1OFrODpQRMg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxMDoyNDo1MFrODp0Nkg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0NTg0NzU0OnYy", "diffSide": "RIGHT", "path": "src/test/java/com/artipie/http/stream/StringOfByteBufPublisher.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxOTo0Mzo1OFrOF4USYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxNjozNjozNFrOF421tA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDU5Njk2MQ==", "bodyText": "@Sammers21 I would remove Publisher suffix because this class does not represent a publisher.\nI would rename it to what this class represents a ByteBufferFlow or more compact ByteFlow. Then we can have asString method that will convert it to String. This would make class future proof future for additional methods that might convert flow of bytes to some other data types.", "url": "https://github.com/artipie/http/pull/84#discussion_r394596961", "createdAt": "2020-03-18T19:43:58Z", "author": {"login": "Vatavuk"}, "path": "src/test/java/com/artipie/http/stream/StringOfByteBufPublisher.java", "diffHunk": "@@ -0,0 +1,78 @@\n+/*\n+ * MIT License\n+ *\n+ * Copyright (c) 2020 Artipie\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy\n+ * of this software and associated documentation files (the \"Software\"), to deal\n+ * in the Software without restriction, including without limitation the rights\n+ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n+ * copies of the Software, and to permit persons to whom the Software is\n+ * furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included in all\n+ * copies or substantial portions of the Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n+ * SOFTWARE.\n+ */\n+package com.artipie.http.stream;\n+\n+import io.reactivex.Flowable;\n+import java.nio.ByteBuffer;\n+import org.reactivestreams.Publisher;\n+\n+/**\n+ * Turn a flow of ByteBuffer's into a string.\n+ *\n+ * @since 0.1\n+ */\n+public class StringOfByteBufPublisher {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "202c0f106a6cad738b9e9e7f3a02dbaae6fc9605"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTAyNDEzMw==", "bodyText": "I would rename it to ByteFlowToStringConversion", "url": "https://github.com/artipie/http/pull/84#discussion_r395024133", "createdAt": "2020-03-19T13:28:57Z", "author": {"login": "Sammers21"}, "path": "src/test/java/com/artipie/http/stream/StringOfByteBufPublisher.java", "diffHunk": "@@ -0,0 +1,78 @@\n+/*\n+ * MIT License\n+ *\n+ * Copyright (c) 2020 Artipie\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy\n+ * of this software and associated documentation files (the \"Software\"), to deal\n+ * in the Software without restriction, including without limitation the rights\n+ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n+ * copies of the Software, and to permit persons to whom the Software is\n+ * furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included in all\n+ * copies or substantial portions of the Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n+ * SOFTWARE.\n+ */\n+package com.artipie.http.stream;\n+\n+import io.reactivex.Flowable;\n+import java.nio.ByteBuffer;\n+import org.reactivestreams.Publisher;\n+\n+/**\n+ * Turn a flow of ByteBuffer's into a string.\n+ *\n+ * @since 0.1\n+ */\n+public class StringOfByteBufPublisher {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDU5Njk2MQ=="}, "originalCommit": {"oid": "202c0f106a6cad738b9e9e7f3a02dbaae6fc9605"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTE2MzA2MA==", "bodyText": "@Sammers21 I would go either with ByteFlowAsString.value() or ByteFlow.asString()", "url": "https://github.com/artipie/http/pull/84#discussion_r395163060", "createdAt": "2020-03-19T16:36:34Z", "author": {"login": "Vatavuk"}, "path": "src/test/java/com/artipie/http/stream/StringOfByteBufPublisher.java", "diffHunk": "@@ -0,0 +1,78 @@\n+/*\n+ * MIT License\n+ *\n+ * Copyright (c) 2020 Artipie\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy\n+ * of this software and associated documentation files (the \"Software\"), to deal\n+ * in the Software without restriction, including without limitation the rights\n+ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n+ * copies of the Software, and to permit persons to whom the Software is\n+ * furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included in all\n+ * copies or substantial portions of the Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n+ * SOFTWARE.\n+ */\n+package com.artipie.http.stream;\n+\n+import io.reactivex.Flowable;\n+import java.nio.ByteBuffer;\n+import org.reactivestreams.Publisher;\n+\n+/**\n+ * Turn a flow of ByteBuffer's into a string.\n+ *\n+ * @since 0.1\n+ */\n+public class StringOfByteBufPublisher {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDU5Njk2MQ=="}, "originalCommit": {"oid": "202c0f106a6cad738b9e9e7f3a02dbaae6fc9605"}, "originalPosition": 35}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0NTg1NDU4OnYy", "diffSide": "RIGHT", "path": "src/test/java/com/artipie/http/stream/StringOfByteBufPublisher.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxOTo0NjoyOFrOF4UXTQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxMzoyMjo0OVrOF4uHkA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDU5ODIyMQ==", "bodyText": "@Sammers21 let's add additional constructor that takes ByteByByteSplit", "url": "https://github.com/artipie/http/pull/84#discussion_r394598221", "createdAt": "2020-03-18T19:46:28Z", "author": {"login": "Vatavuk"}, "path": "src/test/java/com/artipie/http/stream/StringOfByteBufPublisher.java", "diffHunk": "@@ -0,0 +1,78 @@\n+/*\n+ * MIT License\n+ *\n+ * Copyright (c) 2020 Artipie\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy\n+ * of this software and associated documentation files (the \"Software\"), to deal\n+ * in the Software without restriction, including without limitation the rights\n+ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n+ * copies of the Software, and to permit persons to whom the Software is\n+ * furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included in all\n+ * copies or substantial portions of the Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n+ * SOFTWARE.\n+ */\n+package com.artipie.http.stream;\n+\n+import io.reactivex.Flowable;\n+import java.nio.ByteBuffer;\n+import org.reactivestreams.Publisher;\n+\n+/**\n+ * Turn a flow of ByteBuffer's into a string.\n+ *\n+ * @since 0.1\n+ */\n+public class StringOfByteBufPublisher {\n+\n+    /**\n+     * The flow of ByteBuffer's.\n+     */\n+    private final Publisher<ByteBuffer> publisher;\n+\n+    /**\n+     * Ctor.\n+     * @param publisher The flow\n+     */\n+    public StringOfByteBufPublisher(final Publisher<ByteBuffer> publisher) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "202c0f106a6cad738b9e9e7f3a02dbaae6fc9605"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTAyMDE3Ng==", "bodyText": "A nice suggestion.", "url": "https://github.com/artipie/http/pull/84#discussion_r395020176", "createdAt": "2020-03-19T13:22:49Z", "author": {"login": "Sammers21"}, "path": "src/test/java/com/artipie/http/stream/StringOfByteBufPublisher.java", "diffHunk": "@@ -0,0 +1,78 @@\n+/*\n+ * MIT License\n+ *\n+ * Copyright (c) 2020 Artipie\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy\n+ * of this software and associated documentation files (the \"Software\"), to deal\n+ * in the Software without restriction, including without limitation the rights\n+ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n+ * copies of the Software, and to permit persons to whom the Software is\n+ * furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included in all\n+ * copies or substantial portions of the Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n+ * SOFTWARE.\n+ */\n+package com.artipie.http.stream;\n+\n+import io.reactivex.Flowable;\n+import java.nio.ByteBuffer;\n+import org.reactivestreams.Publisher;\n+\n+/**\n+ * Turn a flow of ByteBuffer's into a string.\n+ *\n+ * @since 0.1\n+ */\n+public class StringOfByteBufPublisher {\n+\n+    /**\n+     * The flow of ByteBuffer's.\n+     */\n+    private final Publisher<ByteBuffer> publisher;\n+\n+    /**\n+     * Ctor.\n+     * @param publisher The flow\n+     */\n+    public StringOfByteBufPublisher(final Publisher<ByteBuffer> publisher) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDU5ODIyMQ=="}, "originalCommit": {"oid": "202c0f106a6cad738b9e9e7f3a02dbaae6fc9605"}, "originalPosition": 46}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0NTg1NjY3OnYy", "diffSide": "RIGHT", "path": "src/test/java/com/artipie/http/stream/StringOfByteBufPublisher.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxOTo0NzowOVrOF4UYpA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxOTo0NzowOVrOF4UYpA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDU5ODU2NA==", "bodyText": "@Sammers21 rename it to asString to be more explicit.", "url": "https://github.com/artipie/http/pull/84#discussion_r394598564", "createdAt": "2020-03-18T19:47:09Z", "author": {"login": "Vatavuk"}, "path": "src/test/java/com/artipie/http/stream/StringOfByteBufPublisher.java", "diffHunk": "@@ -0,0 +1,78 @@\n+/*\n+ * MIT License\n+ *\n+ * Copyright (c) 2020 Artipie\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy\n+ * of this software and associated documentation files (the \"Software\"), to deal\n+ * in the Software without restriction, including without limitation the rights\n+ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n+ * copies of the Software, and to permit persons to whom the Software is\n+ * furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included in all\n+ * copies or substantial portions of the Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n+ * SOFTWARE.\n+ */\n+package com.artipie.http.stream;\n+\n+import io.reactivex.Flowable;\n+import java.nio.ByteBuffer;\n+import org.reactivestreams.Publisher;\n+\n+/**\n+ * Turn a flow of ByteBuffer's into a string.\n+ *\n+ * @since 0.1\n+ */\n+public class StringOfByteBufPublisher {\n+\n+    /**\n+     * The flow of ByteBuffer's.\n+     */\n+    private final Publisher<ByteBuffer> publisher;\n+\n+    /**\n+     * Ctor.\n+     * @param publisher The flow\n+     */\n+    public StringOfByteBufPublisher(final Publisher<ByteBuffer> publisher) {\n+        this.publisher = publisher;\n+    }\n+\n+    /**\n+     * Fetch stream elements and turn them into a single string.\n+     * @return The string\n+     */\n+    public String string() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "202c0f106a6cad738b9e9e7f3a02dbaae6fc9605"}, "originalPosition": 54}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1MTcwMzg2OnYy", "diffSide": "RIGHT", "path": "src/test/java/com/artipie/http/stream/ByteFlowAsString.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxMDoxMzo0MFrOF5N9BA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxMDoyOToxNFrOF5Oahg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTU0MTc2NA==", "bodyText": "@Sammers21 why do we need to read String from Publisher in a blocking way? Maybe it would be better to return CompletableFuture<String> (or Single<String> if it's module only class)?", "url": "https://github.com/artipie/http/pull/84#discussion_r395541764", "createdAt": "2020-03-20T10:13:40Z", "author": {"login": "g4s8"}, "path": "src/test/java/com/artipie/http/stream/ByteFlowAsString.java", "diffHunk": "@@ -0,0 +1,86 @@\n+/*\n+ * MIT License\n+ *\n+ * Copyright (c) 2020 Artipie\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy\n+ * of this software and associated documentation files (the \"Software\"), to deal\n+ * in the Software without restriction, including without limitation the rights\n+ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n+ * copies of the Software, and to permit persons to whom the Software is\n+ * furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included in all\n+ * copies or substantial portions of the Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n+ * SOFTWARE.\n+ */\n+package com.artipie.http.stream;\n+\n+import io.reactivex.Flowable;\n+import java.nio.ByteBuffer;\n+import org.reactivestreams.Publisher;\n+\n+/**\n+ * Turn a flow of ByteBuffer's into a string.\n+ *\n+ * @since 0.1\n+ */\n+public class ByteFlowAsString {\n+\n+    /**\n+     * The flow of ByteBuffer's.\n+     */\n+    private final Publisher<ByteBuffer> publisher;\n+\n+    /**\n+     * Ctor.\n+     * @param split The split.\n+     */\n+    public ByteFlowAsString(final ByteByByteSplit split) {\n+        this(Flowable.fromPublisher(split).flatMap(pub -> pub));\n+    }\n+\n+    /**\n+     * Ctor.\n+     * @param publisher The flow\n+     */\n+    public ByteFlowAsString(final Publisher<ByteBuffer> publisher) {\n+        this.publisher = publisher;\n+    }\n+\n+    /**\n+     * Fetch stream elements and turn them into a single string.\n+     * @return The string\n+     */\n+    public String value() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49439835ce85559335865a56bb7e789502563df1"}, "originalPosition": 62}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTU0OTMxOA==", "bodyText": "No, this class is for test only purposes, blocking is acceptable here.", "url": "https://github.com/artipie/http/pull/84#discussion_r395549318", "createdAt": "2020-03-20T10:29:14Z", "author": {"login": "Sammers21"}, "path": "src/test/java/com/artipie/http/stream/ByteFlowAsString.java", "diffHunk": "@@ -0,0 +1,86 @@\n+/*\n+ * MIT License\n+ *\n+ * Copyright (c) 2020 Artipie\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy\n+ * of this software and associated documentation files (the \"Software\"), to deal\n+ * in the Software without restriction, including without limitation the rights\n+ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n+ * copies of the Software, and to permit persons to whom the Software is\n+ * furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included in all\n+ * copies or substantial portions of the Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n+ * SOFTWARE.\n+ */\n+package com.artipie.http.stream;\n+\n+import io.reactivex.Flowable;\n+import java.nio.ByteBuffer;\n+import org.reactivestreams.Publisher;\n+\n+/**\n+ * Turn a flow of ByteBuffer's into a string.\n+ *\n+ * @since 0.1\n+ */\n+public class ByteFlowAsString {\n+\n+    /**\n+     * The flow of ByteBuffer's.\n+     */\n+    private final Publisher<ByteBuffer> publisher;\n+\n+    /**\n+     * Ctor.\n+     * @param split The split.\n+     */\n+    public ByteFlowAsString(final ByteByByteSplit split) {\n+        this(Flowable.fromPublisher(split).flatMap(pub -> pub));\n+    }\n+\n+    /**\n+     * Ctor.\n+     * @param publisher The flow\n+     */\n+    public ByteFlowAsString(final Publisher<ByteBuffer> publisher) {\n+        this.publisher = publisher;\n+    }\n+\n+    /**\n+     * Fetch stream elements and turn them into a single string.\n+     * @return The string\n+     */\n+    public String value() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTU0MTc2NA=="}, "originalCommit": {"oid": "49439835ce85559335865a56bb7e789502563df1"}, "originalPosition": 62}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1MTcwNDk3OnYy", "diffSide": "RIGHT", "path": "src/test/java/com/artipie/http/stream/ByteFlowAsString.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxMDoxNDowN1rOF5N9xA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxMDoxNDowN1rOF5N9xA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTU0MTk1Ng==", "bodyText": "@Sammers21 can we reuse Remaining class from artipie/asto here?", "url": "https://github.com/artipie/http/pull/84#discussion_r395541956", "createdAt": "2020-03-20T10:14:07Z", "author": {"login": "g4s8"}, "path": "src/test/java/com/artipie/http/stream/ByteFlowAsString.java", "diffHunk": "@@ -0,0 +1,86 @@\n+/*\n+ * MIT License\n+ *\n+ * Copyright (c) 2020 Artipie\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy\n+ * of this software and associated documentation files (the \"Software\"), to deal\n+ * in the Software without restriction, including without limitation the rights\n+ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n+ * copies of the Software, and to permit persons to whom the Software is\n+ * furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included in all\n+ * copies or substantial portions of the Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n+ * SOFTWARE.\n+ */\n+package com.artipie.http.stream;\n+\n+import io.reactivex.Flowable;\n+import java.nio.ByteBuffer;\n+import org.reactivestreams.Publisher;\n+\n+/**\n+ * Turn a flow of ByteBuffer's into a string.\n+ *\n+ * @since 0.1\n+ */\n+public class ByteFlowAsString {\n+\n+    /**\n+     * The flow of ByteBuffer's.\n+     */\n+    private final Publisher<ByteBuffer> publisher;\n+\n+    /**\n+     * Ctor.\n+     * @param split The split.\n+     */\n+    public ByteFlowAsString(final ByteByByteSplit split) {\n+        this(Flowable.fromPublisher(split).flatMap(pub -> pub));\n+    }\n+\n+    /**\n+     * Ctor.\n+     * @param publisher The flow\n+     */\n+    public ByteFlowAsString(final Publisher<ByteBuffer> publisher) {\n+        this.publisher = publisher;\n+    }\n+\n+    /**\n+     * Fetch stream elements and turn them into a single string.\n+     * @return The string\n+     */\n+    public String value() {\n+        return new String(\n+            Flowable.fromPublisher(this.publisher)\n+                .toList()\n+                .blockingGet()\n+                .stream()\n+                .map(\n+                    byteBuffer -> {\n+                        final byte[] res = new byte[byteBuffer.remaining()];", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49439835ce85559335865a56bb7e789502563df1"}, "originalPosition": 70}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1MTczNjUwOnYy", "diffSide": "RIGHT", "path": "src/test/java/com/artipie/http/stream/ByteFlowAsString.java", "isResolved": true, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxMDoyNDo1MFrOF5OSJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QwODo0NzowOVrOF57idQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTU0NzE3Mw==", "bodyText": "@Sammers21 you can put it to StringBuilder directly without copying to temporary array:\n.reduce(new StringBuilder(), (builder, buf) -> builder.append(new String(buf, UTF8))", "url": "https://github.com/artipie/http/pull/84#discussion_r395547173", "createdAt": "2020-03-20T10:24:50Z", "author": {"login": "g4s8"}, "path": "src/test/java/com/artipie/http/stream/ByteFlowAsString.java", "diffHunk": "@@ -0,0 +1,86 @@\n+/*\n+ * MIT License\n+ *\n+ * Copyright (c) 2020 Artipie\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy\n+ * of this software and associated documentation files (the \"Software\"), to deal\n+ * in the Software without restriction, including without limitation the rights\n+ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n+ * copies of the Software, and to permit persons to whom the Software is\n+ * furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included in all\n+ * copies or substantial portions of the Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n+ * SOFTWARE.\n+ */\n+package com.artipie.http.stream;\n+\n+import io.reactivex.Flowable;\n+import java.nio.ByteBuffer;\n+import org.reactivestreams.Publisher;\n+\n+/**\n+ * Turn a flow of ByteBuffer's into a string.\n+ *\n+ * @since 0.1\n+ */\n+public class ByteFlowAsString {\n+\n+    /**\n+     * The flow of ByteBuffer's.\n+     */\n+    private final Publisher<ByteBuffer> publisher;\n+\n+    /**\n+     * Ctor.\n+     * @param split The split.\n+     */\n+    public ByteFlowAsString(final ByteByByteSplit split) {\n+        this(Flowable.fromPublisher(split).flatMap(pub -> pub));\n+    }\n+\n+    /**\n+     * Ctor.\n+     * @param publisher The flow\n+     */\n+    public ByteFlowAsString(final Publisher<ByteBuffer> publisher) {\n+        this.publisher = publisher;\n+    }\n+\n+    /**\n+     * Fetch stream elements and turn them into a single string.\n+     * @return The string\n+     */\n+    public String value() {\n+        return new String(\n+            Flowable.fromPublisher(this.publisher)\n+                .toList()\n+                .blockingGet()\n+                .stream()\n+                .map(\n+                    byteBuffer -> {\n+                        final byte[] res = new byte[byteBuffer.remaining()];\n+                        byteBuffer.get(res);\n+                        return res;\n+                    }\n+                )\n+                .reduce(\n+                    (one, another) -> {\n+                        final byte[] res = new byte[one.length + another.length];", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49439835ce85559335865a56bb7e789502563df1"}, "originalPosition": 77}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTU1MzMzMQ==", "bodyText": "@Sammers21 you can put it to StringBuilder directly without copying to temporary array:\n.reduce(new StringBuilder(), (builder, buf) -> builder.append(new String(buf, UTF8))\n\nthe approach is bad and will work only with one-byte chars in utf-8.", "url": "https://github.com/artipie/http/pull/84#discussion_r395553331", "createdAt": "2020-03-20T10:37:14Z", "author": {"login": "Sammers21"}, "path": "src/test/java/com/artipie/http/stream/ByteFlowAsString.java", "diffHunk": "@@ -0,0 +1,86 @@\n+/*\n+ * MIT License\n+ *\n+ * Copyright (c) 2020 Artipie\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy\n+ * of this software and associated documentation files (the \"Software\"), to deal\n+ * in the Software without restriction, including without limitation the rights\n+ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n+ * copies of the Software, and to permit persons to whom the Software is\n+ * furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included in all\n+ * copies or substantial portions of the Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n+ * SOFTWARE.\n+ */\n+package com.artipie.http.stream;\n+\n+import io.reactivex.Flowable;\n+import java.nio.ByteBuffer;\n+import org.reactivestreams.Publisher;\n+\n+/**\n+ * Turn a flow of ByteBuffer's into a string.\n+ *\n+ * @since 0.1\n+ */\n+public class ByteFlowAsString {\n+\n+    /**\n+     * The flow of ByteBuffer's.\n+     */\n+    private final Publisher<ByteBuffer> publisher;\n+\n+    /**\n+     * Ctor.\n+     * @param split The split.\n+     */\n+    public ByteFlowAsString(final ByteByByteSplit split) {\n+        this(Flowable.fromPublisher(split).flatMap(pub -> pub));\n+    }\n+\n+    /**\n+     * Ctor.\n+     * @param publisher The flow\n+     */\n+    public ByteFlowAsString(final Publisher<ByteBuffer> publisher) {\n+        this.publisher = publisher;\n+    }\n+\n+    /**\n+     * Fetch stream elements and turn them into a single string.\n+     * @return The string\n+     */\n+    public String value() {\n+        return new String(\n+            Flowable.fromPublisher(this.publisher)\n+                .toList()\n+                .blockingGet()\n+                .stream()\n+                .map(\n+                    byteBuffer -> {\n+                        final byte[] res = new byte[byteBuffer.remaining()];\n+                        byteBuffer.get(res);\n+                        return res;\n+                    }\n+                )\n+                .reduce(\n+                    (one, another) -> {\n+                        final byte[] res = new byte[one.length + another.length];", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTU0NzE3Mw=="}, "originalCommit": {"oid": "49439835ce85559335865a56bb7e789502563df1"}, "originalPosition": 77}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTY5OTc3Mw==", "bodyText": "@Sammers21 ok, you are right. But in any case we need to specify encoding explicitly in String constructor, otherwise our tests will be platform specific. So le'ts use utf8 as default encoding", "url": "https://github.com/artipie/http/pull/84#discussion_r395699773", "createdAt": "2020-03-20T15:07:39Z", "author": {"login": "g4s8"}, "path": "src/test/java/com/artipie/http/stream/ByteFlowAsString.java", "diffHunk": "@@ -0,0 +1,86 @@\n+/*\n+ * MIT License\n+ *\n+ * Copyright (c) 2020 Artipie\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy\n+ * of this software and associated documentation files (the \"Software\"), to deal\n+ * in the Software without restriction, including without limitation the rights\n+ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n+ * copies of the Software, and to permit persons to whom the Software is\n+ * furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included in all\n+ * copies or substantial portions of the Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n+ * SOFTWARE.\n+ */\n+package com.artipie.http.stream;\n+\n+import io.reactivex.Flowable;\n+import java.nio.ByteBuffer;\n+import org.reactivestreams.Publisher;\n+\n+/**\n+ * Turn a flow of ByteBuffer's into a string.\n+ *\n+ * @since 0.1\n+ */\n+public class ByteFlowAsString {\n+\n+    /**\n+     * The flow of ByteBuffer's.\n+     */\n+    private final Publisher<ByteBuffer> publisher;\n+\n+    /**\n+     * Ctor.\n+     * @param split The split.\n+     */\n+    public ByteFlowAsString(final ByteByByteSplit split) {\n+        this(Flowable.fromPublisher(split).flatMap(pub -> pub));\n+    }\n+\n+    /**\n+     * Ctor.\n+     * @param publisher The flow\n+     */\n+    public ByteFlowAsString(final Publisher<ByteBuffer> publisher) {\n+        this.publisher = publisher;\n+    }\n+\n+    /**\n+     * Fetch stream elements and turn them into a single string.\n+     * @return The string\n+     */\n+    public String value() {\n+        return new String(\n+            Flowable.fromPublisher(this.publisher)\n+                .toList()\n+                .blockingGet()\n+                .stream()\n+                .map(\n+                    byteBuffer -> {\n+                        final byte[] res = new byte[byteBuffer.remaining()];\n+                        byteBuffer.get(res);\n+                        return res;\n+                    }\n+                )\n+                .reduce(\n+                    (one, another) -> {\n+                        final byte[] res = new byte[one.length + another.length];", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTU0NzE3Mw=="}, "originalCommit": {"oid": "49439835ce85559335865a56bb7e789502563df1"}, "originalPosition": 77}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTk4NjY2NQ==", "bodyText": "My point is that we can use it with multi-byte chars. Nothing platform-specific", "url": "https://github.com/artipie/http/pull/84#discussion_r395986665", "createdAt": "2020-03-21T11:57:36Z", "author": {"login": "Sammers21"}, "path": "src/test/java/com/artipie/http/stream/ByteFlowAsString.java", "diffHunk": "@@ -0,0 +1,86 @@\n+/*\n+ * MIT License\n+ *\n+ * Copyright (c) 2020 Artipie\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy\n+ * of this software and associated documentation files (the \"Software\"), to deal\n+ * in the Software without restriction, including without limitation the rights\n+ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n+ * copies of the Software, and to permit persons to whom the Software is\n+ * furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included in all\n+ * copies or substantial portions of the Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n+ * SOFTWARE.\n+ */\n+package com.artipie.http.stream;\n+\n+import io.reactivex.Flowable;\n+import java.nio.ByteBuffer;\n+import org.reactivestreams.Publisher;\n+\n+/**\n+ * Turn a flow of ByteBuffer's into a string.\n+ *\n+ * @since 0.1\n+ */\n+public class ByteFlowAsString {\n+\n+    /**\n+     * The flow of ByteBuffer's.\n+     */\n+    private final Publisher<ByteBuffer> publisher;\n+\n+    /**\n+     * Ctor.\n+     * @param split The split.\n+     */\n+    public ByteFlowAsString(final ByteByByteSplit split) {\n+        this(Flowable.fromPublisher(split).flatMap(pub -> pub));\n+    }\n+\n+    /**\n+     * Ctor.\n+     * @param publisher The flow\n+     */\n+    public ByteFlowAsString(final Publisher<ByteBuffer> publisher) {\n+        this.publisher = publisher;\n+    }\n+\n+    /**\n+     * Fetch stream elements and turn them into a single string.\n+     * @return The string\n+     */\n+    public String value() {\n+        return new String(\n+            Flowable.fromPublisher(this.publisher)\n+                .toList()\n+                .blockingGet()\n+                .stream()\n+                .map(\n+                    byteBuffer -> {\n+                        final byte[] res = new byte[byteBuffer.remaining()];\n+                        byteBuffer.get(res);\n+                        return res;\n+                    }\n+                )\n+                .reduce(\n+                    (one, another) -> {\n+                        final byte[] res = new byte[one.length + another.length];", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTU0NzE3Mw=="}, "originalCommit": {"oid": "49439835ce85559335865a56bb7e789502563df1"}, "originalPosition": 77}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjI4NTEyOQ==", "bodyText": "@Sammers21 but now your code is platform specific: default encoding may be different. So my suggestion is to use encoding explicitly somewhere, e.g.:\npublic String value() {\n    return new String(\n            Flowable.fromPublisher(this.publisher)...get(),\n            StandardCharsets.UTF8\n    );\n}", "url": "https://github.com/artipie/http/pull/84#discussion_r396285129", "createdAt": "2020-03-23T08:40:53Z", "author": {"login": "g4s8"}, "path": "src/test/java/com/artipie/http/stream/ByteFlowAsString.java", "diffHunk": "@@ -0,0 +1,86 @@\n+/*\n+ * MIT License\n+ *\n+ * Copyright (c) 2020 Artipie\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy\n+ * of this software and associated documentation files (the \"Software\"), to deal\n+ * in the Software without restriction, including without limitation the rights\n+ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n+ * copies of the Software, and to permit persons to whom the Software is\n+ * furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included in all\n+ * copies or substantial portions of the Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n+ * SOFTWARE.\n+ */\n+package com.artipie.http.stream;\n+\n+import io.reactivex.Flowable;\n+import java.nio.ByteBuffer;\n+import org.reactivestreams.Publisher;\n+\n+/**\n+ * Turn a flow of ByteBuffer's into a string.\n+ *\n+ * @since 0.1\n+ */\n+public class ByteFlowAsString {\n+\n+    /**\n+     * The flow of ByteBuffer's.\n+     */\n+    private final Publisher<ByteBuffer> publisher;\n+\n+    /**\n+     * Ctor.\n+     * @param split The split.\n+     */\n+    public ByteFlowAsString(final ByteByByteSplit split) {\n+        this(Flowable.fromPublisher(split).flatMap(pub -> pub));\n+    }\n+\n+    /**\n+     * Ctor.\n+     * @param publisher The flow\n+     */\n+    public ByteFlowAsString(final Publisher<ByteBuffer> publisher) {\n+        this.publisher = publisher;\n+    }\n+\n+    /**\n+     * Fetch stream elements and turn them into a single string.\n+     * @return The string\n+     */\n+    public String value() {\n+        return new String(\n+            Flowable.fromPublisher(this.publisher)\n+                .toList()\n+                .blockingGet()\n+                .stream()\n+                .map(\n+                    byteBuffer -> {\n+                        final byte[] res = new byte[byteBuffer.remaining()];\n+                        byteBuffer.get(res);\n+                        return res;\n+                    }\n+                )\n+                .reduce(\n+                    (one, another) -> {\n+                        final byte[] res = new byte[one.length + another.length];", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTU0NzE3Mw=="}, "originalCommit": {"oid": "49439835ce85559335865a56bb7e789502563df1"}, "originalPosition": 77}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjI4ODYyOQ==", "bodyText": "@g4s8, done", "url": "https://github.com/artipie/http/pull/84#discussion_r396288629", "createdAt": "2020-03-23T08:47:09Z", "author": {"login": "Sammers21"}, "path": "src/test/java/com/artipie/http/stream/ByteFlowAsString.java", "diffHunk": "@@ -0,0 +1,86 @@\n+/*\n+ * MIT License\n+ *\n+ * Copyright (c) 2020 Artipie\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy\n+ * of this software and associated documentation files (the \"Software\"), to deal\n+ * in the Software without restriction, including without limitation the rights\n+ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n+ * copies of the Software, and to permit persons to whom the Software is\n+ * furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included in all\n+ * copies or substantial portions of the Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n+ * SOFTWARE.\n+ */\n+package com.artipie.http.stream;\n+\n+import io.reactivex.Flowable;\n+import java.nio.ByteBuffer;\n+import org.reactivestreams.Publisher;\n+\n+/**\n+ * Turn a flow of ByteBuffer's into a string.\n+ *\n+ * @since 0.1\n+ */\n+public class ByteFlowAsString {\n+\n+    /**\n+     * The flow of ByteBuffer's.\n+     */\n+    private final Publisher<ByteBuffer> publisher;\n+\n+    /**\n+     * Ctor.\n+     * @param split The split.\n+     */\n+    public ByteFlowAsString(final ByteByByteSplit split) {\n+        this(Flowable.fromPublisher(split).flatMap(pub -> pub));\n+    }\n+\n+    /**\n+     * Ctor.\n+     * @param publisher The flow\n+     */\n+    public ByteFlowAsString(final Publisher<ByteBuffer> publisher) {\n+        this.publisher = publisher;\n+    }\n+\n+    /**\n+     * Fetch stream elements and turn them into a single string.\n+     * @return The string\n+     */\n+    public String value() {\n+        return new String(\n+            Flowable.fromPublisher(this.publisher)\n+                .toList()\n+                .blockingGet()\n+                .stream()\n+                .map(\n+                    byteBuffer -> {\n+                        final byte[] res = new byte[byteBuffer.remaining()];\n+                        byteBuffer.get(res);\n+                        return res;\n+                    }\n+                )\n+                .reduce(\n+                    (one, another) -> {\n+                        final byte[] res = new byte[one.length + another.length];", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTU0NzE3Mw=="}, "originalCommit": {"oid": "49439835ce85559335865a56bb7e789502563df1"}, "originalPosition": 77}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1801, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}