{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg2Njg5NTgx", "number": 71, "title": "Split improvements", "bodyText": "For now, stream splitter does now work correctly with delimiters of size 2 or more. This PR fixes the problem", "createdAt": "2020-03-11T13:28:33Z", "url": "https://github.com/artipie/http/pull/71", "merged": true, "mergeCommit": {"oid": "cd48846a3424698ce1de3a12d636cb3aef4ab0d0"}, "closed": true, "closedAt": "2020-03-12T11:35:42Z", "author": {"login": "Sammers21"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcMmuobAH2gAyMzg2Njg5NTgxOjJhNjFlZWRmM2JiM2Y4OWU3MmQ3MTM4NGMzZDIzODE4ZTZhNDA0MTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcM2QveAFqTM3MzMxNzU2OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2a61eedf3bb3f89e72d71384c3d23818e6a40412", "author": {"user": {"login": "Sammers21", "name": "Pavel Drankov"}}, "url": "https://github.com/artipie/http/commit/2a61eedf3bb3f89e72d71384c3d23818e6a40412", "committedDate": "2020-03-11T13:00:30Z", "message": "add a test with complex splitter"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "224aed9a4ec1ab043143d9da2623a21ca1c182f0", "author": {"user": {"login": "Sammers21", "name": "Pavel Drankov"}}, "url": "https://github.com/artipie/http/commit/224aed9a4ec1ab043143d9da2623a21ca1c182f0", "committedDate": "2020-03-11T13:26:40Z", "message": "last element has index 0"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4bbe86eb4b689e71675c6c1d4f18a06ed6db8847", "author": {"user": {"login": "Sammers21", "name": "Pavel Drankov"}}, "url": "https://github.com/artipie/http/commit/4bbe86eb4b689e71675c6c1d4f18a06ed6db8847", "committedDate": "2020-03-11T13:31:25Z", "message": "fix qulice warnings"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzczMDgwNDA2", "url": "https://github.com/artipie/http/pull/71#pullrequestreview-373080406", "createdAt": "2020-03-11T19:53:52Z", "commit": {"oid": "4bbe86eb4b689e71675c6c1d4f18a06ed6db8847"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzczMzE3NTY5", "url": "https://github.com/artipie/http/pull/71#pullrequestreview-373317569", "createdAt": "2020-03-12T07:06:13Z", "commit": {"oid": "4bbe86eb4b689e71675c6c1d4f18a06ed6db8847"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQwNzowNjoxM1rOF1TM5Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQwNzowNjoxM1rOF1TM5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTQzMzQ0NQ==", "bodyText": "@Sammers21 you say in PR description:\n\nFor now, stream splitter does now work correctly with delimiters of size 2 or more. This PR fixes the problem\n\nSo why did it work with small delimiters then, and how using 0 index can fixe it?", "url": "https://github.com/artipie/http/pull/71#discussion_r391433445", "createdAt": "2020-03-12T07:06:13Z", "author": {"login": "g4s8"}, "path": "src/main/java/com/artipie/http/stream/ByteByByteSplit.java", "diffHunk": "@@ -173,7 +173,7 @@ public synchronized void onNext(final ByteBuffer next) {\n         for (final byte each : bytes) {\n             final boolean eviction = this.ring.isAtFullCapacity();\n             if (eviction) {\n-                final Byte last = this.ring.get(this.delim.length - 1);\n+                final Byte last = this.ring.get(0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4bbe86eb4b689e71675c6c1d4f18a06ed6db8847"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3335, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}