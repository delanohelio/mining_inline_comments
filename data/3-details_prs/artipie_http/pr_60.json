{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgxMzI0NTEx", "number": 60, "title": "Changed Response to be async", "bodyText": "Closes issue #61\nResponse.send() method became async, so implementations might be non-blocking and report their completion to caller.", "createdAt": "2020-02-28T10:46:17Z", "url": "https://github.com/artipie/http/pull/60", "merged": true, "mergeCommit": {"oid": "369b92ef10726d462f5074c214b5dae4769624e6"}, "closed": true, "closedAt": "2020-03-03T13:02:08Z", "author": {"login": "olegmoz"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcItlr3AH2gAyMzgxMzI0NTExOmMwMjE5ZTQxNzFiNWYwZTIyZTE1NWVkNDZlZDM5OTg5ZDUzZWExMTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcJxSjkgFqTM2NzM5MTE1Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c0219e4171b5f0e22e155ed46ed39989d53ea115", "author": {"user": {"login": "olegmoz", "name": "Oleg Mozzhechkov"}}, "url": "https://github.com/artipie/http/commit/c0219e4171b5f0e22e155ed46ed39989d53ea115", "committedDate": "2020-02-28T10:44:22Z", "message": "Changed Response to be async"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2NjI1MDMz", "url": "https://github.com/artipie/http/pull/60#pullrequestreview-366625033", "createdAt": "2020-02-28T19:14:32Z", "commit": {"oid": "c0219e4171b5f0e22e155ed46ed39989d53ea115"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQxOToxNDozMlrOFv_5EA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQxOToxNToyMFrOFv_6gA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTg3NDE5Mg==", "bodyText": "@olegmoz we can use join() instead of get() to avoid catching exceptions. join will wrap checked exceptions to unchecked.", "url": "https://github.com/artipie/http/pull/60#discussion_r385874192", "createdAt": "2020-02-28T19:14:32Z", "author": {"login": "Vatavuk"}, "path": "src/main/java/com/artipie/http/hm/RsHasBody.java", "diffHunk": "@@ -74,7 +77,11 @@ public void describeTo(final Description description) {\n     @Override\n     public boolean matchesSafely(final Response item) {\n         final AtomicReference<byte[]> out = new AtomicReference<>();\n-        item.send(new RsHasBody.FakeConnection(out));\n+        try {\n+            item.send(new RsHasBody.FakeConnection(out)).toCompletableFuture().get();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c0219e4171b5f0e22e155ed46ed39989d53ea115"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTg3NDU2MA==", "bodyText": "@olegmoz we can use join() instead of get() to avoid catching exceptions.", "url": "https://github.com/artipie/http/pull/60#discussion_r385874560", "createdAt": "2020-02-28T19:15:20Z", "author": {"login": "Vatavuk"}, "path": "src/main/java/com/artipie/http/hm/RsHasStatus.java", "diffHunk": "@@ -70,7 +72,11 @@ public void describeTo(final Description description) {\n     @Override\n     public boolean matchesSafely(final Response item) {\n         final AtomicInteger out = new AtomicInteger();\n-        item.send(new RsHasStatus.FakeConnection(out));\n+        try {\n+            item.send(new FakeConnection(out)).toCompletableFuture().get();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c0219e4171b5f0e22e155ed46ed39989d53ea115"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6e553668ae235933193a0344b2e099088f31817", "author": {"user": {"login": "olegmoz", "name": "Oleg Mozzhechkov"}}, "url": "https://github.com/artipie/http/commit/c6e553668ae235933193a0344b2e099088f31817", "committedDate": "2020-03-02T13:02:10Z", "message": "Using CompletableFuture.join() in RsHasBody.matchesSafely() and RsHasStatus.matchesSafely()"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "569e709161e5d267b07eb27e8fc91034e59cff8c", "author": {"user": {"login": "olegmoz", "name": "Oleg Mozzhechkov"}}, "url": "https://github.com/artipie/http/commit/569e709161e5d267b07eb27e8fc91034e59cff8c", "committedDate": "2020-03-02T14:47:29Z", "message": "Merge branch 'master' into response-async\n\n# Conflicts:\n#\tsrc/main/java/com/artipie/http/Connection.java\n#\tsrc/main/java/com/artipie/http/Response.java\n#\tsrc/main/java/com/artipie/http/async/RsAsync.java\n#\tsrc/main/java/com/artipie/http/hm/RsHasBody.java\n#\tsrc/main/java/com/artipie/http/hm/RsHasStatus.java\n#\tsrc/main/java/com/artipie/http/rs/RsWithBody.java\n#\tsrc/main/java/com/artipie/http/rs/RsWithStatus.java\n#\tsrc/test/java/com/artipie/http/hm/RsHasBodyTest.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3MzkxMTUy", "url": "https://github.com/artipie/http/pull/60#pullrequestreview-367391152", "createdAt": "2020-03-02T17:37:01Z", "commit": {"oid": "569e709161e5d267b07eb27e8fc91034e59cff8c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3321, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}