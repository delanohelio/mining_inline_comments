{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg5MTYwOTMx", "number": 75, "title": "74", "bodyText": "Add docs about main components of request, response and information about routing", "createdAt": "2020-03-16T11:14:43Z", "url": "https://github.com/artipie/http/pull/75", "merged": true, "mergeCommit": {"oid": "ae25062a1ee6bf9853320738943c11684607e7af"}, "closed": true, "closedAt": "2020-03-19T11:45:27Z", "author": {"login": "Guseyn"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcOMJsKAH2gAyMzg5MTYwOTMxOmM1ODI0MjM0YjE4ODllNWVlNGZmYWZlMjlmMTMzYzU4ZTYxZTYzNTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcPKcsIAFqTM3NzY0Mzg2MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c5824234b1889e5ee4ffafe29f133c58e61e6351", "author": {"user": {"login": "Guseyn", "name": "Guseyn Ismayylov"}}, "url": "https://github.com/artipie/http/commit/c5824234b1889e5ee4ffafe29f133c58e61e6351", "committedDate": "2020-03-16T11:10:28Z", "message": "resolve #74"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d4bea49f38b51ad78cf85fab5c61c940fd49598", "author": {"user": {"login": "Guseyn", "name": "Guseyn Ismayylov"}}, "url": "https://github.com/artipie/http/commit/1d4bea49f38b51ad78cf85fab5c61c940fd49598", "committedDate": "2020-03-16T11:12:08Z", "message": "remove as"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "87941f9404216c6d556b672fa9f92c301864fbc2", "author": {"user": {"login": "Guseyn", "name": "Guseyn Ismayylov"}}, "url": "https://github.com/artipie/http/commit/87941f9404216c6d556b672fa9f92c301864fbc2", "committedDate": "2020-03-16T11:13:36Z", "message": "fix typo"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2ODQ5Mzcx", "url": "https://github.com/artipie/http/pull/75#pullrequestreview-376849371", "createdAt": "2020-03-18T13:14:35Z", "commit": {"oid": "87941f9404216c6d556b672fa9f92c301864fbc2"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxMzoxNDozNVrOF4EWww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxMzoxNzo0OFrOF4EeTg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDMzNTkzOQ==", "bodyText": "@Guseyn this composition can be moved to constructor (SliceRoute can't be changed and doesn't have side effects):\nclass Repo extends Slice.Wrap {\n  Repo(Storage storage) {\n    super(\n      new SliceRoute.Path(new RtRule.ByMethod(RqMethod.PUT.value()), new SliceUpload(storage)),\n      new SliceRoute.Path(new RtRule.ByMethod(RqMethod.GET.value()), new SliceDownload(storage)),\n      SliceRoute.FALLBACK, new SliceSimple(RsStatus.METHOD_NOT_ALLOWED)\n    );\n}", "url": "https://github.com/artipie/http/pull/75#discussion_r394335939", "createdAt": "2020-03-18T13:14:35Z", "author": {"login": "g4s8"}, "path": "README.md", "diffHunk": "@@ -58,6 +58,56 @@ server asks response to send itself to connection, response asks connection\n to accept the data. Artipie adapter are not supposed to implement this interface,\n it should be done by HTTP server implementation, e.g. vertex-server module.\n \n+## Some useful examples for different objects\n+\n+### Routing\n+\n+You can do routing in the following style:\n+\n+```java\n+@Override\n+public Response response(\n+    final String line,\n+    final Iterable<Map.Entry<String, String>> headers,\n+    final Publisher<ByteBuffer> body) {\n+    return new SliceRoute(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87941f9404216c6d556b672fa9f92c301864fbc2"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDMzNjU3OQ==", "bodyText": "@Guseyn I'd say \"reading request\" or \"parsing request\"", "url": "https://github.com/artipie/http/pull/75#discussion_r394336579", "createdAt": "2020-03-18T13:15:35Z", "author": {"login": "g4s8"}, "path": "README.md", "diffHunk": "@@ -58,6 +58,56 @@ server asks response to send itself to connection, response asks connection\n to accept the data. Artipie adapter are not supposed to implement this interface,\n it should be done by HTTP server implementation, e.g. vertex-server module.\n \n+## Some useful examples for different objects\n+\n+### Routing\n+\n+You can do routing in the following style:\n+\n+```java\n+@Override\n+public Response response(\n+    final String line,\n+    final Iterable<Map.Entry<String, String>> headers,\n+    final Publisher<ByteBuffer> body) {\n+    return new SliceRoute(\n+        new SliceRoute.Path(new RtRule.ByMethod(RqMethod.PUT.value()), new SliceUpload(storage)),\n+        new SliceRoute.Path(new RtRule.ByMethod(RqMethod.GET.value()), new SliceDownload(storage)),\n+        new SliceRoute.Path((line, headers) -> true, (line, headers, body) -> new RsWithStatus(RsStatus.METHOD_NOT_ALLOWED))\n+    ).response(line, headers, body);\n+}\n+```\n+\n+### Main components of request", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87941f9404216c6d556b672fa9f92c301864fbc2"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDMzNjk1Mw==", "bodyText": "@Guseyn what specific header? It can be named reading header values", "url": "https://github.com/artipie/http/pull/75#discussion_r394336953", "createdAt": "2020-03-18T13:16:13Z", "author": {"login": "g4s8"}, "path": "README.md", "diffHunk": "@@ -58,6 +58,56 @@ server asks response to send itself to connection, response asks connection\n to accept the data. Artipie adapter are not supposed to implement this interface,\n it should be done by HTTP server implementation, e.g. vertex-server module.\n \n+## Some useful examples for different objects\n+\n+### Routing\n+\n+You can do routing in the following style:\n+\n+```java\n+@Override\n+public Response response(\n+    final String line,\n+    final Iterable<Map.Entry<String, String>> headers,\n+    final Publisher<ByteBuffer> body) {\n+    return new SliceRoute(\n+        new SliceRoute.Path(new RtRule.ByMethod(RqMethod.PUT.value()), new SliceUpload(storage)),\n+        new SliceRoute.Path(new RtRule.ByMethod(RqMethod.GET.value()), new SliceDownload(storage)),\n+        new SliceRoute.Path((line, headers) -> true, (line, headers, body) -> new RsWithStatus(RsStatus.METHOD_NOT_ALLOWED))\n+    ).response(line, headers, body);\n+}\n+```\n+\n+### Main components of request\n+\n+```java\n+final RequestLineFrom request = new RequestLineFrom(line);\n+final Uri uri = request.uri();\n+final RqMethod = request.method();\n+```\n+\n+### Specific header", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87941f9404216c6d556b672fa9f92c301864fbc2"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDMzNzg3MA==", "bodyText": "@Guseyn I don't think \"setup\" is the right word here, maybe we can say \"returning of async responses\"", "url": "https://github.com/artipie/http/pull/75#discussion_r394337870", "createdAt": "2020-03-18T13:17:48Z", "author": {"login": "g4s8"}, "path": "README.md", "diffHunk": "@@ -58,6 +58,56 @@ server asks response to send itself to connection, response asks connection\n to accept the data. Artipie adapter are not supposed to implement this interface,\n it should be done by HTTP server implementation, e.g. vertex-server module.\n \n+## Some useful examples for different objects\n+\n+### Routing\n+\n+You can do routing in the following style:\n+\n+```java\n+@Override\n+public Response response(\n+    final String line,\n+    final Iterable<Map.Entry<String, String>> headers,\n+    final Publisher<ByteBuffer> body) {\n+    return new SliceRoute(\n+        new SliceRoute.Path(new RtRule.ByMethod(RqMethod.PUT.value()), new SliceUpload(storage)),\n+        new SliceRoute.Path(new RtRule.ByMethod(RqMethod.GET.value()), new SliceDownload(storage)),\n+        new SliceRoute.Path((line, headers) -> true, (line, headers, body) -> new RsWithStatus(RsStatus.METHOD_NOT_ALLOWED))\n+    ).response(line, headers, body);\n+}\n+```\n+\n+### Main components of request\n+\n+```java\n+final RequestLineFrom request = new RequestLineFrom(line);\n+final Uri uri = request.uri();\n+final RqMethod = request.method();\n+```\n+\n+### Specific header\n+\n+```java\n+new RqHeaders.Single(headers, \"x-header-name\");\n+```\n+\n+### Setup for async response", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87941f9404216c6d556b672fa9f92c301864fbc2"}, "originalPosition": 38}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5c28214e21438707d98091bf8d4ad1a276f28097", "author": {"user": {"login": "Guseyn", "name": "Guseyn Ismayylov"}}, "url": "https://github.com/artipie/http/commit/5c28214e21438707d98091bf8d4ad1a276f28097", "committedDate": "2020-03-19T08:50:19Z", "message": "fix comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3NjQzODYw", "url": "https://github.com/artipie/http/pull/75#pullrequestreview-377643860", "createdAt": "2020-03-19T11:45:20Z", "commit": {"oid": "5c28214e21438707d98091bf8d4ad1a276f28097"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3342, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}