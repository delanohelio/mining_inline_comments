{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMzOTA5OTcw", "number": 173, "reviewThreads": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QwOTowNDozM1rOEFPgJw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxMzoyMzowNlrOEQntsg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczOTMyMzI3OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/artipie/http/slice/SliceDelete.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QwOTowNDozM1rOGjWlIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QwOTowNDozM1rOGjWlIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTcyMzI5OA==", "bodyText": "@paulodamaso why is there a key here? The key to delete should only come from the request (in response), not be pre-determined!", "url": "https://github.com/artipie/http/pull/173#discussion_r439723298", "createdAt": "2020-06-13T09:04:33Z", "author": {"login": "victornoel"}, "path": "src/main/java/com/artipie/http/slice/SliceDelete.java", "diffHunk": "@@ -0,0 +1,74 @@\n+/*\n+ * MIT License\n+ *\n+ * Copyright (c) 2020 Artipie\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy\n+ * of this software and associated documentation files (the \"Software\"), to deal\n+ * in the Software without restriction, including without limitation the rights\n+ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n+ * copies of the Software, and to permit persons to whom the Software is\n+ * furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included in all\n+ * copies or substantial portions of the Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n+ * SOFTWARE.\n+ */\n+\n+package com.artipie.http.slice;\n+\n+import com.artipie.asto.Key;\n+import com.artipie.asto.Storage;\n+import com.artipie.http.Response;\n+import com.artipie.http.Slice;\n+import java.nio.ByteBuffer;\n+import java.util.Map;\n+import org.reactivestreams.Publisher;\n+\n+/**\n+ * Delete decorator for Slice.\n+ *\n+ * @since 0.10\n+ * @todo #138:30min Implement SliceDelete\n+ *  Implement SliceDelete, which removes a key from storage. After that, enable\n+ *  the tests in SliceDeleteTest and put back the coverage missedclass metric to\n+ *  15 in pom.xml.\n+ */\n+@SuppressWarnings({\"PMD.UnusedPrivateField\", \"PMD.SingularField\"})\n+public final class SliceDelete implements Slice {\n+\n+    /**\n+     * Storage.\n+     */\n+    private final Storage storage;\n+\n+    /**\n+     * Key to delete.\n+     */\n+    private final Key key;\n+\n+    /**\n+     * Constructor.\n+     * @param storage Storage.\n+     * @param key Key to delete.\n+     */\n+    public SliceDelete(final Storage storage, final Key key) {\n+        this.storage = storage;\n+        this.key = key;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "161467c8b3ed2d72892dfdca91fcef003659c0cf"}, "originalPosition": 64}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczOTMyNjMyOnYy", "diffSide": "RIGHT", "path": "src/test/java/com/artipie/http/slice/SliceDeleteTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QwOToxMToyM1rOGjWmtA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QwOToxMToyM1rOGjWmtA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTcyMzcwMA==", "bodyText": "@paulodamaso let's make this class final", "url": "https://github.com/artipie/http/pull/173#discussion_r439723700", "createdAt": "2020-06-13T09:11:23Z", "author": {"login": "victornoel"}, "path": "src/test/java/com/artipie/http/slice/SliceDeleteTest.java", "diffHunk": "@@ -0,0 +1,117 @@\n+/*\n+ * MIT License\n+ *\n+ * Copyright (c) 2020 Artipie\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy\n+ * of this software and associated documentation files (the \"Software\"), to deal\n+ * in the Software without restriction, including without limitation the rights\n+ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n+ * copies of the Software, and to permit persons to whom the Software is\n+ * furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included in all\n+ * copies or substantial portions of the Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n+ * SOFTWARE.\n+ */\n+package com.artipie.http.slice;\n+\n+import com.artipie.asto.Content;\n+import com.artipie.asto.Key;\n+import com.artipie.asto.Storage;\n+import com.artipie.asto.memory.InMemoryStorage;\n+import com.artipie.http.rq.RequestLine;\n+import io.reactivex.Flowable;\n+import java.util.Collections;\n+import org.hamcrest.MatcherAssert;\n+import org.hamcrest.core.IsEqual;\n+import org.junit.jupiter.api.Disabled;\n+import org.junit.jupiter.api.Test;\n+\n+/**\n+ * Tests for {@link SliceDelete}.\n+ *\n+ * @since 0.10\n+ */\n+public class SliceDeleteTest {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "161467c8b3ed2d72892dfdca91fcef003659c0cf"}, "originalPosition": 43}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczOTMyNjYwOnYy", "diffSide": "RIGHT", "path": "src/test/java/com/artipie/http/slice/SliceDeleteTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QwOToxMjowNlrOGjWm2w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QwOToxMjowNlrOGjWm2w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTcyMzczOQ==", "bodyText": "@paulodamaso if we need to work in a subdirectory of the storage, we can use Substorage for that, no need to introduce that responsibility in SliceDelete. As you can see SliceDownload and SliceUpload does not take care of that either.", "url": "https://github.com/artipie/http/pull/173#discussion_r439723739", "createdAt": "2020-06-13T09:12:06Z", "author": {"login": "victornoel"}, "path": "src/test/java/com/artipie/http/slice/SliceDeleteTest.java", "diffHunk": "@@ -0,0 +1,117 @@\n+/*\n+ * MIT License\n+ *\n+ * Copyright (c) 2020 Artipie\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy\n+ * of this software and associated documentation files (the \"Software\"), to deal\n+ * in the Software without restriction, including without limitation the rights\n+ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n+ * copies of the Software, and to permit persons to whom the Software is\n+ * furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included in all\n+ * copies or substantial portions of the Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n+ * SOFTWARE.\n+ */\n+package com.artipie.http.slice;\n+\n+import com.artipie.asto.Content;\n+import com.artipie.asto.Key;\n+import com.artipie.asto.Storage;\n+import com.artipie.asto.memory.InMemoryStorage;\n+import com.artipie.http.rq.RequestLine;\n+import io.reactivex.Flowable;\n+import java.util.Collections;\n+import org.hamcrest.MatcherAssert;\n+import org.hamcrest.core.IsEqual;\n+import org.junit.jupiter.api.Disabled;\n+import org.junit.jupiter.api.Test;\n+\n+/**\n+ * Tests for {@link SliceDelete}.\n+ *\n+ * @since 0.10\n+ */\n+public class SliceDeleteTest {\n+\n+    /**\n+     * Deleted key.\n+     */\n+    private static final String KEY = \"deletedKey\";\n+\n+    /**\n+     * Delete method.\n+     */\n+    private static final String METHOD = \"DELETE\";\n+\n+    /**\n+     * HTTP.\n+     */\n+    private static final String HTTP = \"HTTP/1.1\";\n+\n+    @Test\n+    @Disabled\n+    void deleteCorrectEntry() {\n+        final Storage storage = new InMemoryStorage();\n+        storage.save(\n+            new Key.From(SliceDeleteTest.KEY),\n+            new Content.From(\"deleted content\".getBytes())\n+        ).join();\n+        new SliceDelete(\n+            storage,\n+            new Key.From(SliceDeleteTest.KEY)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "161467c8b3ed2d72892dfdca91fcef003659c0cf"}, "originalPosition": 70}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczOTMyNzExOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/artipie/http/slice/SliceDelete.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QwOToxMzowMVrOGjWnGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QwOToxMzowMVrOGjWnGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTcyMzgwMw==", "bodyText": "@paulodamaso can we add also the requirement to write a test for 404 case?", "url": "https://github.com/artipie/http/pull/173#discussion_r439723803", "createdAt": "2020-06-13T09:13:01Z", "author": {"login": "victornoel"}, "path": "src/main/java/com/artipie/http/slice/SliceDelete.java", "diffHunk": "@@ -0,0 +1,74 @@\n+/*\n+ * MIT License\n+ *\n+ * Copyright (c) 2020 Artipie\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy\n+ * of this software and associated documentation files (the \"Software\"), to deal\n+ * in the Software without restriction, including without limitation the rights\n+ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n+ * copies of the Software, and to permit persons to whom the Software is\n+ * furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included in all\n+ * copies or substantial portions of the Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n+ * SOFTWARE.\n+ */\n+\n+package com.artipie.http.slice;\n+\n+import com.artipie.asto.Key;\n+import com.artipie.asto.Storage;\n+import com.artipie.http.Response;\n+import com.artipie.http.Slice;\n+import java.nio.ByteBuffer;\n+import java.util.Map;\n+import org.reactivestreams.Publisher;\n+\n+/**\n+ * Delete decorator for Slice.\n+ *\n+ * @since 0.10\n+ * @todo #138:30min Implement SliceDelete\n+ *  Implement SliceDelete, which removes a key from storage. After that, enable\n+ *  the tests in SliceDeleteTest and put back the coverage missedclass metric to\n+ *  15 in pom.xml.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "161467c8b3ed2d72892dfdca91fcef003659c0cf"}, "originalPosition": 42}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2NDUwNTQ5OnYy", "diffSide": "RIGHT", "path": "src/test/java/com/artipie/http/slice/SliceDeleteTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQxNjoyMzowMFrOGnIDKg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQxNjoyMzowMFrOGnIDKg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzY3OTUzMA==", "bodyText": "@paulodamaso why do we need to share the key between tests?", "url": "https://github.com/artipie/http/pull/173#discussion_r443679530", "createdAt": "2020-06-22T16:23:00Z", "author": {"login": "g4s8"}, "path": "src/test/java/com/artipie/http/slice/SliceDeleteTest.java", "diffHunk": "@@ -0,0 +1,139 @@\n+/*\n+ * MIT License\n+ *\n+ * Copyright (c) 2020 Artipie\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy\n+ * of this software and associated documentation files (the \"Software\"), to deal\n+ * in the Software without restriction, including without limitation the rights\n+ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n+ * copies of the Software, and to permit persons to whom the Software is\n+ * furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included in all\n+ * copies or substantial portions of the Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n+ * SOFTWARE.\n+ */\n+package com.artipie.http.slice;\n+\n+import com.artipie.asto.Content;\n+import com.artipie.asto.Key;\n+import com.artipie.asto.Storage;\n+import com.artipie.asto.memory.InMemoryStorage;\n+import com.artipie.http.hm.RsHasStatus;\n+import com.artipie.http.rq.RequestLine;\n+import com.artipie.http.rs.RsStatus;\n+import io.reactivex.Flowable;\n+import java.util.Collections;\n+import org.hamcrest.MatcherAssert;\n+import org.hamcrest.core.IsEqual;\n+import org.junit.jupiter.api.Disabled;\n+import org.junit.jupiter.api.Test;\n+\n+/**\n+ * Tests for {@link SliceDelete}.\n+ *\n+ * @since 0.10\n+ */\n+public final class SliceDeleteTest {\n+\n+    /**\n+     * Deleted key.\n+     */\n+    private static final String KEY = \"deletedKey\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "adba08f006a177e7699af4efe718c2965d9b86e5"}, "originalPosition": 50}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2NDUwNjExOnYy", "diffSide": "RIGHT", "path": "src/test/java/com/artipie/http/slice/SliceDeleteTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQxNjoyMzowOVrOGnIDkA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQxNjoyMzowOVrOGnIDkA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzY3OTYzMg==", "bodyText": "@paulodamaso this class can be package private", "url": "https://github.com/artipie/http/pull/173#discussion_r443679632", "createdAt": "2020-06-22T16:23:09Z", "author": {"login": "g4s8"}, "path": "src/test/java/com/artipie/http/slice/SliceDeleteTest.java", "diffHunk": "@@ -0,0 +1,139 @@\n+/*\n+ * MIT License\n+ *\n+ * Copyright (c) 2020 Artipie\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy\n+ * of this software and associated documentation files (the \"Software\"), to deal\n+ * in the Software without restriction, including without limitation the rights\n+ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n+ * copies of the Software, and to permit persons to whom the Software is\n+ * furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included in all\n+ * copies or substantial portions of the Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n+ * SOFTWARE.\n+ */\n+package com.artipie.http.slice;\n+\n+import com.artipie.asto.Content;\n+import com.artipie.asto.Key;\n+import com.artipie.asto.Storage;\n+import com.artipie.asto.memory.InMemoryStorage;\n+import com.artipie.http.hm.RsHasStatus;\n+import com.artipie.http.rq.RequestLine;\n+import com.artipie.http.rs.RsStatus;\n+import io.reactivex.Flowable;\n+import java.util.Collections;\n+import org.hamcrest.MatcherAssert;\n+import org.hamcrest.core.IsEqual;\n+import org.junit.jupiter.api.Disabled;\n+import org.junit.jupiter.api.Test;\n+\n+/**\n+ * Tests for {@link SliceDelete}.\n+ *\n+ * @since 0.10\n+ */\n+public final class SliceDeleteTest {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "adba08f006a177e7699af4efe718c2965d9b86e5"}, "originalPosition": 45}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2NDUxMTE4OnYy", "diffSide": "RIGHT", "path": "src/test/java/com/artipie/http/slice/SliceDeleteTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQxNjoyNDoyOVrOGnIGwg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQxNjoyNDoyOVrOGnIGwg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzY4MDQ1MA==", "bodyText": "@paulodamaso I'd create private static method to build requires line instead of using constant - it will hide internal details from users and keep fewer shared data between tests, e.g. line(String path)", "url": "https://github.com/artipie/http/pull/173#discussion_r443680450", "createdAt": "2020-06-22T16:24:29Z", "author": {"login": "g4s8"}, "path": "src/test/java/com/artipie/http/slice/SliceDeleteTest.java", "diffHunk": "@@ -0,0 +1,139 @@\n+/*\n+ * MIT License\n+ *\n+ * Copyright (c) 2020 Artipie\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy\n+ * of this software and associated documentation files (the \"Software\"), to deal\n+ * in the Software without restriction, including without limitation the rights\n+ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n+ * copies of the Software, and to permit persons to whom the Software is\n+ * furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included in all\n+ * copies or substantial portions of the Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n+ * SOFTWARE.\n+ */\n+package com.artipie.http.slice;\n+\n+import com.artipie.asto.Content;\n+import com.artipie.asto.Key;\n+import com.artipie.asto.Storage;\n+import com.artipie.asto.memory.InMemoryStorage;\n+import com.artipie.http.hm.RsHasStatus;\n+import com.artipie.http.rq.RequestLine;\n+import com.artipie.http.rs.RsStatus;\n+import io.reactivex.Flowable;\n+import java.util.Collections;\n+import org.hamcrest.MatcherAssert;\n+import org.hamcrest.core.IsEqual;\n+import org.junit.jupiter.api.Disabled;\n+import org.junit.jupiter.api.Test;\n+\n+/**\n+ * Tests for {@link SliceDelete}.\n+ *\n+ * @since 0.10\n+ */\n+public final class SliceDeleteTest {\n+\n+    /**\n+     * Deleted key.\n+     */\n+    private static final String KEY = \"deletedKey\";\n+\n+    /**\n+     * Delete method.\n+     */\n+    private static final String METHOD = \"DELETE\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "adba08f006a177e7699af4efe718c2965d9b86e5"}, "originalPosition": 55}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2NjUwNzIxOnYy", "diffSide": "RIGHT", "path": "src/test/java/com/artipie/http/slice/SliceDeleteTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QwNjo0Nzo0MlrOGnbcjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QwNjo0Nzo0MlrOGnbcjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzk5NzMyNQ==", "bodyText": "@paulodamaso response() returns async response which may be called later, please check this test to see how Slice can be tested: \n  \n    \n      http/src/test/java/com/artipie/http/slice/TrimPathSliceTest.java\n    \n    \n         Line 137\n      in\n      5b0712c\n    \n    \n    \n    \n\n        \n          \n           private static void verify(final Slice slice, final RequestLine line) throws Exception { \n        \n    \n  \n\n\nAlternatively, you can verify that response has OK status using RsHasStatus Hamcrest matcher which is blocking waiting response to complete before checking the status.", "url": "https://github.com/artipie/http/pull/173#discussion_r443997325", "createdAt": "2020-06-23T06:47:42Z", "author": {"login": "g4s8"}, "path": "src/test/java/com/artipie/http/slice/SliceDeleteTest.java", "diffHunk": "@@ -0,0 +1,139 @@\n+/*\n+ * MIT License\n+ *\n+ * Copyright (c) 2020 Artipie\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy\n+ * of this software and associated documentation files (the \"Software\"), to deal\n+ * in the Software without restriction, including without limitation the rights\n+ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n+ * copies of the Software, and to permit persons to whom the Software is\n+ * furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included in all\n+ * copies or substantial portions of the Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n+ * SOFTWARE.\n+ */\n+package com.artipie.http.slice;\n+\n+import com.artipie.asto.Content;\n+import com.artipie.asto.Key;\n+import com.artipie.asto.Storage;\n+import com.artipie.asto.memory.InMemoryStorage;\n+import com.artipie.http.hm.RsHasStatus;\n+import com.artipie.http.rq.RequestLine;\n+import com.artipie.http.rs.RsStatus;\n+import io.reactivex.Flowable;\n+import java.util.Collections;\n+import org.hamcrest.MatcherAssert;\n+import org.hamcrest.core.IsEqual;\n+import org.junit.jupiter.api.Disabled;\n+import org.junit.jupiter.api.Test;\n+\n+/**\n+ * Tests for {@link SliceDelete}.\n+ *\n+ * @since 0.10\n+ */\n+public final class SliceDeleteTest {\n+\n+    /**\n+     * Deleted key.\n+     */\n+    private static final String KEY = \"deletedKey\";\n+\n+    /**\n+     * Delete method.\n+     */\n+    private static final String METHOD = \"DELETE\";\n+\n+    /**\n+     * HTTP.\n+     */\n+    private static final String HTTP = \"HTTP/1.1\";\n+\n+    @Test\n+    @Disabled\n+    void deleteCorrectEntry() {\n+        final Storage storage = new InMemoryStorage();\n+        storage.save(\n+            new Key.From(SliceDeleteTest.KEY),\n+            new Content.From(\"deleted content\".getBytes())\n+        ).join();\n+        new SliceDelete(\n+            storage\n+        ).response(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "09ebbd17287ca26ff2151ae4ff91966bbff2b9b3"}, "originalPosition": 72}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2NjUwODA2OnYy", "diffSide": "RIGHT", "path": "src/test/java/com/artipie/http/slice/SliceDeleteTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QwNjo0Nzo1NlrOGnbdDw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QwNjo0Nzo1NlrOGnbdDw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzk5NzQ1NQ==", "bodyText": "@paulodamaso same here: response() is async", "url": "https://github.com/artipie/http/pull/173#discussion_r443997455", "createdAt": "2020-06-23T06:47:56Z", "author": {"login": "g4s8"}, "path": "src/test/java/com/artipie/http/slice/SliceDeleteTest.java", "diffHunk": "@@ -0,0 +1,139 @@\n+/*\n+ * MIT License\n+ *\n+ * Copyright (c) 2020 Artipie\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy\n+ * of this software and associated documentation files (the \"Software\"), to deal\n+ * in the Software without restriction, including without limitation the rights\n+ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n+ * copies of the Software, and to permit persons to whom the Software is\n+ * furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included in all\n+ * copies or substantial portions of the Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n+ * SOFTWARE.\n+ */\n+package com.artipie.http.slice;\n+\n+import com.artipie.asto.Content;\n+import com.artipie.asto.Key;\n+import com.artipie.asto.Storage;\n+import com.artipie.asto.memory.InMemoryStorage;\n+import com.artipie.http.hm.RsHasStatus;\n+import com.artipie.http.rq.RequestLine;\n+import com.artipie.http.rs.RsStatus;\n+import io.reactivex.Flowable;\n+import java.util.Collections;\n+import org.hamcrest.MatcherAssert;\n+import org.hamcrest.core.IsEqual;\n+import org.junit.jupiter.api.Disabled;\n+import org.junit.jupiter.api.Test;\n+\n+/**\n+ * Tests for {@link SliceDelete}.\n+ *\n+ * @since 0.10\n+ */\n+public final class SliceDeleteTest {\n+\n+    /**\n+     * Deleted key.\n+     */\n+    private static final String KEY = \"deletedKey\";\n+\n+    /**\n+     * Delete method.\n+     */\n+    private static final String METHOD = \"DELETE\";\n+\n+    /**\n+     * HTTP.\n+     */\n+    private static final String HTTP = \"HTTP/1.1\";\n+\n+    @Test\n+    @Disabled\n+    void deleteCorrectEntry() {\n+        final Storage storage = new InMemoryStorage();\n+        storage.save(\n+            new Key.From(SliceDeleteTest.KEY),\n+            new Content.From(\"deleted content\".getBytes())\n+        ).join();\n+        new SliceDelete(\n+            storage\n+        ).response(\n+            new RequestLine(\n+                SliceDeleteTest.METHOD,\n+                SliceDeleteTest.KEY,\n+                SliceDeleteTest.HTTP\n+            ).toString(),\n+            Collections.emptyList(),\n+            Flowable.empty()\n+        );\n+        MatcherAssert.assertThat(\n+            storage.exists(new Key.From(SliceDeleteTest.KEY)),\n+            new IsEqual<>(false)\n+        );\n+    }\n+\n+    @Test\n+    @Disabled\n+    void doNotDeleteOtherEntry() {\n+        final Storage storage = new InMemoryStorage();\n+        final Key preserved = new Key.From(\"preservedKey\");\n+        storage.save(\n+            new Key.From(SliceDeleteTest.KEY),\n+            new Content.From(\"any content\".getBytes())\n+        ).join();\n+        storage.save(\n+            preserved,\n+            new Content.From(\"preserved content\".getBytes())\n+        ).join();\n+        new SliceDelete(\n+            storage\n+        ).response(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "09ebbd17287ca26ff2151ae4ff91966bbff2b9b3"}, "originalPosition": 102}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1ODYzMTIxOnYy", "diffSide": "RIGHT", "path": "src/test/java/com/artipie/http/slice/SliceDeleteTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxMzoyMjozNVrOG03rmw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxMzoyMjozNVrOG03rmw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODA5MTQxOQ==", "bodyText": "@paulodamaso Storage.exists(Key) is async call which returns CompletableFuture<Boolean>, not boolean, it can't be tested against boolean. You can use Storage.exists(Key).toCompletableFuture().get() or new BlockingStorage(storage).exists(Key)", "url": "https://github.com/artipie/http/pull/173#discussion_r458091419", "createdAt": "2020-07-21T13:22:35Z", "author": {"login": "g4s8"}, "path": "src/test/java/com/artipie/http/slice/SliceDeleteTest.java", "diffHunk": "@@ -0,0 +1,129 @@\n+/*\n+ * MIT License\n+ *\n+ * Copyright (c) 2020 Artipie\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy\n+ * of this software and associated documentation files (the \"Software\"), to deal\n+ * in the Software without restriction, including without limitation the rights\n+ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n+ * copies of the Software, and to permit persons to whom the Software is\n+ * furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included in all\n+ * copies or substantial portions of the Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n+ * SOFTWARE.\n+ */\n+package com.artipie.http.slice;\n+\n+import com.artipie.asto.Content;\n+import com.artipie.asto.Key;\n+import com.artipie.asto.Storage;\n+import com.artipie.asto.memory.InMemoryStorage;\n+import com.artipie.http.Slice;\n+import com.artipie.http.hm.RsHasStatus;\n+import com.artipie.http.rq.RequestLine;\n+import com.artipie.http.rs.RsStatus;\n+import io.reactivex.Flowable;\n+import java.util.Collections;\n+import java.util.concurrent.CompletableFuture;\n+import org.hamcrest.MatcherAssert;\n+import org.hamcrest.core.IsEqual;\n+import org.junit.jupiter.api.Disabled;\n+import org.junit.jupiter.api.Test;\n+\n+/**\n+ * Tests for {@link SliceDelete}.\n+ *\n+ * @since 0.10\n+ */\n+final class SliceDeleteTest {\n+\n+    @Test\n+    @Disabled\n+    void deleteCorrectEntry() throws Exception {\n+        final Storage storage = new InMemoryStorage();\n+        final String key = \"deletedKey\";\n+        storage.save(\n+            new Key.From(key),\n+            new Content.From(\"deleted content\".getBytes())\n+        ).join();\n+        verify(\n+            new SliceDelete(\n+                storage\n+            ),\n+            line(key)\n+        );\n+        MatcherAssert.assertThat(\n+            storage.exists(new Key.From(key)),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "609b7bd9cdfde7e2236943717c0165ed2dc3bc2f"}, "originalPosition": 65}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1ODYzMzQ2OnYy", "diffSide": "RIGHT", "path": "src/test/java/com/artipie/http/slice/SliceDeleteTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxMzoyMzowNlrOG03s8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxMzoyMzowNlrOG03s8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODA5MTc2Mw==", "bodyText": "@paulodamaso same here: CompletionStage<Boolean> can't be compared with Boolean", "url": "https://github.com/artipie/http/pull/173#discussion_r458091763", "createdAt": "2020-07-21T13:23:06Z", "author": {"login": "g4s8"}, "path": "src/test/java/com/artipie/http/slice/SliceDeleteTest.java", "diffHunk": "@@ -0,0 +1,129 @@\n+/*\n+ * MIT License\n+ *\n+ * Copyright (c) 2020 Artipie\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy\n+ * of this software and associated documentation files (the \"Software\"), to deal\n+ * in the Software without restriction, including without limitation the rights\n+ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n+ * copies of the Software, and to permit persons to whom the Software is\n+ * furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included in all\n+ * copies or substantial portions of the Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n+ * SOFTWARE.\n+ */\n+package com.artipie.http.slice;\n+\n+import com.artipie.asto.Content;\n+import com.artipie.asto.Key;\n+import com.artipie.asto.Storage;\n+import com.artipie.asto.memory.InMemoryStorage;\n+import com.artipie.http.Slice;\n+import com.artipie.http.hm.RsHasStatus;\n+import com.artipie.http.rq.RequestLine;\n+import com.artipie.http.rs.RsStatus;\n+import io.reactivex.Flowable;\n+import java.util.Collections;\n+import java.util.concurrent.CompletableFuture;\n+import org.hamcrest.MatcherAssert;\n+import org.hamcrest.core.IsEqual;\n+import org.junit.jupiter.api.Disabled;\n+import org.junit.jupiter.api.Test;\n+\n+/**\n+ * Tests for {@link SliceDelete}.\n+ *\n+ * @since 0.10\n+ */\n+final class SliceDeleteTest {\n+\n+    @Test\n+    @Disabled\n+    void deleteCorrectEntry() throws Exception {\n+        final Storage storage = new InMemoryStorage();\n+        final String key = \"deletedKey\";\n+        storage.save(\n+            new Key.From(key),\n+            new Content.From(\"deleted content\".getBytes())\n+        ).join();\n+        verify(\n+            new SliceDelete(\n+                storage\n+            ),\n+            line(key)\n+        );\n+        MatcherAssert.assertThat(\n+            storage.exists(new Key.From(key)),\n+            new IsEqual<>(false)\n+        );\n+    }\n+\n+    @Test\n+    @Disabled\n+    void doNotDeleteOtherEntry() throws Exception {\n+        final Storage storage = new InMemoryStorage();\n+        final Key preserved = new Key.From(\"preservedKey\");\n+        final String deleted = \"deleted\";\n+        storage.save(\n+            new Key.From(deleted),\n+            new Content.From(\"any content\".getBytes())\n+        ).join();\n+        storage.save(\n+            preserved,\n+            new Content.From(\"preserved content\".getBytes())\n+        ).join();\n+        verify(\n+            new SliceDelete(\n+                storage\n+            ),\n+            line(deleted)\n+        );\n+        MatcherAssert.assertThat(\n+            storage.exists(preserved),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "609b7bd9cdfde7e2236943717c0165ed2dc3bc2f"}, "originalPosition": 91}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1865, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}