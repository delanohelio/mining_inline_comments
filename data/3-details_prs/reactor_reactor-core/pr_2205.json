{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM3MTI4MTM3", "number": 2205, "title": "fix #1431 #2176 Avoid throwing in onErrorDropped & subscribe w/lambdas", "bodyText": "Draft PR to fix onErrorDropped which throws bubbling exception\nSigned-off-by: Oleh Dokuka shadowgun@i.ua", "createdAt": "2020-06-19T14:19:42Z", "url": "https://github.com/reactor/reactor-core/pull/2205", "merged": true, "mergeCommit": {"oid": "7c9bac7953f33aef0301d63dab840fc3c8c87fe6"}, "closed": true, "closedAt": "2020-07-15T14:56:48Z", "author": {"login": "OlegDokuka"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcxQDK_gFqTQ0MjI3OTQxMg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc1Le5HAFqTQ0OTAwOTA3Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyMjc5NDEy", "url": "https://github.com/reactor/reactor-core/pull/2205#pullrequestreview-442279412", "createdAt": "2020-07-03T09:27:51Z", "commit": {"oid": "6820cd6ea112a4f3894ad6824a27df616c1e1c48"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwOToyNzo1MVrOGsqJeQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwOToyOTo0MVrOGsqM2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTQ4MTA4MQ==", "bodyText": "why would this case silently drop the error ?", "url": "https://github.com/reactor/reactor-core/pull/2205#discussion_r449481081", "createdAt": "2020-07-03T09:27:51Z", "author": {"login": "simonbasle"}, "path": "reactor-core/src/main/java/reactor/core/publisher/FluxTakeUntil.java", "diffHunk": "@@ -88,13 +93,16 @@ public void onNext(T t) {\n \n \t\t\tif (b) {\n \t\t\t\ts.cancel();\n-\n-\t\t\t\tonComplete();\n+\t\t\t\ttook = true;\n+\t\t\t\tactual.onComplete();\n \t\t\t}\n \t\t}\n \n \t\t@Override\n \t\tpublic void onError(Throwable t) {\n+\t\t\tif (took) {\n+\t\t\t\treturn;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6820cd6ea112a4f3894ad6824a27df616c1e1c48"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTQ4MTMzNQ==", "bodyText": "same here, I don't think the throwable should be silently ignored", "url": "https://github.com/reactor/reactor-core/pull/2205#discussion_r449481335", "createdAt": "2020-07-03T09:28:23Z", "author": {"login": "simonbasle"}, "path": "reactor-core/src/main/java/reactor/core/publisher/FluxTakeWhile.java", "diffHunk": "@@ -96,6 +100,9 @@ public void onNext(T t) {\n \n \t\t@Override\n \t\tpublic void onError(Throwable t) {\n+\t\t\tif (took) {\n+\t\t\t\treturn;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6820cd6ea112a4f3894ad6824a27df616c1e1c48"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTQ4MTk0Ng==", "bodyText": "the introduction of took and discarding sound like an orthogonal issue", "url": "https://github.com/reactor/reactor-core/pull/2205#discussion_r449481946", "createdAt": "2020-07-03T09:29:41Z", "author": {"login": "simonbasle"}, "path": "reactor-core/src/main/java/reactor/core/publisher/FluxTake.java", "diffHunk": "@@ -102,6 +103,10 @@ public void onSubscribe(Subscription s) {\n \n \t\t@Override\n \t\tpublic void onNext(T t) {\n+\t\t\tif (took) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6820cd6ea112a4f3894ad6824a27df616c1e1c48"}, "originalPosition": 12}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6820cd6ea112a4f3894ad6824a27df616c1e1c48", "author": {"user": {"login": "OlegDokuka", "name": "Oleh Dokuka"}}, "url": "https://github.com/reactor/reactor-core/commit/6820cd6ea112a4f3894ad6824a27df616c1e1c48", "committedDate": "2020-06-19T14:17:48Z", "message": "in progress\n\nSigned-off-by: Oleh Dokuka <shadowgun@i.ua>"}, "afterCommit": {"oid": "3fe2ac4da844211ebe21ca449e0c67e168d84752", "author": {"user": {"login": "OlegDokuka", "name": "Oleh Dokuka"}}, "url": "https://github.com/reactor/reactor-core/commit/3fe2ac4da844211ebe21ca449e0c67e168d84752", "committedDate": "2020-07-15T07:53:49Z", "message": "removes error bubling in case of onErrorDrop\n\nSigned-off-by: Oleh Dokuka <shadowgun@i.ua>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3fe2ac4da844211ebe21ca449e0c67e168d84752", "author": {"user": {"login": "OlegDokuka", "name": "Oleh Dokuka"}}, "url": "https://github.com/reactor/reactor-core/commit/3fe2ac4da844211ebe21ca449e0c67e168d84752", "committedDate": "2020-07-15T07:53:49Z", "message": "removes error bubling in case of onErrorDrop\n\nSigned-off-by: Oleh Dokuka <shadowgun@i.ua>"}, "afterCommit": {"oid": "aaf2784784352634d1a79c922c4e3e4b5f3b8c5e", "author": {"user": {"login": "OlegDokuka", "name": "Oleh Dokuka"}}, "url": "https://github.com/reactor/reactor-core/commit/aaf2784784352634d1a79c922c4e3e4b5f3b8c5e", "committedDate": "2020-07-15T07:55:32Z", "message": "removes error bubling in case of onErrorDrop\n\nSigned-off-by: Oleh Dokuka <shadowgun@i.ua>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "aaf2784784352634d1a79c922c4e3e4b5f3b8c5e", "author": {"user": {"login": "OlegDokuka", "name": "Oleh Dokuka"}}, "url": "https://github.com/reactor/reactor-core/commit/aaf2784784352634d1a79c922c4e3e4b5f3b8c5e", "committedDate": "2020-07-15T07:55:32Z", "message": "removes error bubling in case of onErrorDrop\n\nSigned-off-by: Oleh Dokuka <shadowgun@i.ua>"}, "afterCommit": {"oid": "5f6cccd25643de51140a831cf328b5b5de9de31c", "author": {"user": {"login": "OlegDokuka", "name": "Oleh Dokuka"}}, "url": "https://github.com/reactor/reactor-core/commit/5f6cccd25643de51140a831cf328b5b5de9de31c", "committedDate": "2020-07-15T07:56:57Z", "message": "removes error bubling in case of onErrorDrop\n\nSigned-off-by: Oleh Dokuka <shadowgun@i.ua>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5f6cccd25643de51140a831cf328b5b5de9de31c", "author": {"user": {"login": "OlegDokuka", "name": "Oleh Dokuka"}}, "url": "https://github.com/reactor/reactor-core/commit/5f6cccd25643de51140a831cf328b5b5de9de31c", "committedDate": "2020-07-15T07:56:57Z", "message": "removes error bubling in case of onErrorDrop\n\nSigned-off-by: Oleh Dokuka <shadowgun@i.ua>"}, "afterCommit": {"oid": "e9b0254ec0cc8c5046628b1d4ec078588ef2d7c5", "author": {"user": {"login": "OlegDokuka", "name": "Oleh Dokuka"}}, "url": "https://github.com/reactor/reactor-core/commit/e9b0254ec0cc8c5046628b1d4ec078588ef2d7c5", "committedDate": "2020-07-15T08:00:16Z", "message": "removes error bubling in case of onErrorDrop\n\nSigned-off-by: Oleh Dokuka <shadowgun@i.ua>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e9b0254ec0cc8c5046628b1d4ec078588ef2d7c5", "author": {"user": {"login": "OlegDokuka", "name": "Oleh Dokuka"}}, "url": "https://github.com/reactor/reactor-core/commit/e9b0254ec0cc8c5046628b1d4ec078588ef2d7c5", "committedDate": "2020-07-15T08:00:16Z", "message": "removes error bubling in case of onErrorDrop\n\nSigned-off-by: Oleh Dokuka <shadowgun@i.ua>"}, "afterCommit": {"oid": "14b38be75160b1a6f02b783071b84efe2c543221", "author": {"user": {"login": "OlegDokuka", "name": "Oleh Dokuka"}}, "url": "https://github.com/reactor/reactor-core/commit/14b38be75160b1a6f02b783071b84efe2c543221", "committedDate": "2020-07-15T08:01:18Z", "message": "removes error bubling in case of onErrorDrop\n\nSigned-off-by: Oleh Dokuka <shadowgun@i.ua>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "48d3945b6cccce7993c61410fae85c60e48974b7", "author": {"user": {"login": "OlegDokuka", "name": "Oleh Dokuka"}}, "url": "https://github.com/reactor/reactor-core/commit/48d3945b6cccce7993c61410fae85c60e48974b7", "committedDate": "2020-07-15T08:26:16Z", "message": "removes error bubling in case of onErrorDrop\n\nSigned-off-by: Oleh Dokuka <shadowgun@i.ua>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "14b38be75160b1a6f02b783071b84efe2c543221", "author": {"user": {"login": "OlegDokuka", "name": "Oleh Dokuka"}}, "url": "https://github.com/reactor/reactor-core/commit/14b38be75160b1a6f02b783071b84efe2c543221", "committedDate": "2020-07-15T08:01:18Z", "message": "removes error bubling in case of onErrorDrop\n\nSigned-off-by: Oleh Dokuka <shadowgun@i.ua>"}, "afterCommit": {"oid": "48d3945b6cccce7993c61410fae85c60e48974b7", "author": {"user": {"login": "OlegDokuka", "name": "Oleh Dokuka"}}, "url": "https://github.com/reactor/reactor-core/commit/48d3945b6cccce7993c61410fae85c60e48974b7", "committedDate": "2020-07-15T08:26:16Z", "message": "removes error bubling in case of onErrorDrop\n\nSigned-off-by: Oleh Dokuka <shadowgun@i.ua>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4NzM0Mjgy", "url": "https://github.com/reactor/reactor-core/pull/2205#pullrequestreview-448734282", "createdAt": "2020-07-15T08:23:44Z", "commit": {"oid": "14b38be75160b1a6f02b783071b84efe2c543221"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwODoyMzo0NFrOGxzl9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwODoyMzo0NFrOGxzl9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDg3ODcxMA==", "bodyText": "there is a TestLogger for that purpose that can be activated with Loggers.useCustomLoggers(ignored -> tl); instead of dealing with the PrintWriters yourself", "url": "https://github.com/reactor/reactor-core/pull/2205#discussion_r454878710", "createdAt": "2020-07-15T08:23:44Z", "author": {"login": "simonbasle"}, "path": "reactor-core/src/test/java/reactor/core/publisher/BaseSubscriberTest.java", "diffHunk": "@@ -79,10 +84,16 @@ protected void hookFinally(SignalType type) {\n \t}\n \n \t@Test\n-\tpublic void onErrorCallbackNotImplemented() {\n-\t\tFlux<String> flux = Flux.error(new IllegalStateException());\n-\n+\tpublic void onErrorCallbackNotImplemented() throws UnsupportedEncodingException {\n+\t\tPrintStream err = System.err;\n+\t\tPrintStream out = System.out;\n \t\ttry {\n+\t\t\tByteArrayOutputStream outputStream = new ByteArrayOutputStream();\n+\t\t\tSystem.setErr(new PrintStream(outputStream));\n+\t\t\tSystem.setOut(new PrintStream(outputStream));\n+\t\t\tLoggers.useVerboseConsoleLoggers();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "14b38be75160b1a6f02b783071b84efe2c543221"}, "originalPosition": 37}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f62c18b114239ccc30debf72f16c69a6028977a", "author": {"user": {"login": "OlegDokuka", "name": "Oleh Dokuka"}}, "url": "https://github.com/reactor/reactor-core/commit/2f62c18b114239ccc30debf72f16c69a6028977a", "committedDate": "2020-07-15T10:55:03Z", "message": "polishes tests\n\nSigned-off-by: Oleh Dokuka <shadowgun@i.ua>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "05bf93c0f0ef0c3f747223f148eb5a0f4277bc29", "author": {"user": {"login": "OlegDokuka", "name": "Oleh Dokuka"}}, "url": "https://github.com/reactor/reactor-core/commit/05bf93c0f0ef0c3f747223f148eb5a0f4277bc29", "committedDate": "2020-07-15T08:52:13Z", "message": "polish tests\n\nSigned-off-by: Oleh Dokuka <shadowgun@i.ua>"}, "afterCommit": {"oid": "2f62c18b114239ccc30debf72f16c69a6028977a", "author": {"user": {"login": "OlegDokuka", "name": "Oleh Dokuka"}}, "url": "https://github.com/reactor/reactor-core/commit/2f62c18b114239ccc30debf72f16c69a6028977a", "committedDate": "2020-07-15T10:55:03Z", "message": "polishes tests\n\nSigned-off-by: Oleh Dokuka <shadowgun@i.ua>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e7f74d15d03091d2a39b2da78a2ae36de7902723", "author": {"user": {"login": "OlegDokuka", "name": "Oleh Dokuka"}}, "url": "https://github.com/reactor/reactor-core/commit/e7f74d15d03091d2a39b2da78a2ae36de7902723", "committedDate": "2020-07-15T12:42:27Z", "message": "fixes failing test\n\nSigned-off-by: Oleh Dokuka <shadowgun@i.ua>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d05d009241357479f5aa039d27a44a4d8a000ee9", "author": {"user": {"login": "OlegDokuka", "name": "Oleh Dokuka"}}, "url": "https://github.com/reactor/reactor-core/commit/d05d009241357479f5aa039d27a44a4d8a000ee9", "committedDate": "2020-07-15T11:44:11Z", "message": "removes redundant changes\n\nSigned-off-by: Oleh Dokuka <shadowgun@i.ua>"}, "afterCommit": {"oid": "e7f74d15d03091d2a39b2da78a2ae36de7902723", "author": {"user": {"login": "OlegDokuka", "name": "Oleh Dokuka"}}, "url": "https://github.com/reactor/reactor-core/commit/e7f74d15d03091d2a39b2da78a2ae36de7902723", "committedDate": "2020-07-15T12:42:27Z", "message": "fixes failing test\n\nSigned-off-by: Oleh Dokuka <shadowgun@i.ua>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5MDA5MDcz", "url": "https://github.com/reactor/reactor-core/pull/2205#pullrequestreview-449009073", "createdAt": "2020-07-15T14:26:46Z", "commit": {"oid": "e7f74d15d03091d2a39b2da78a2ae36de7902723"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2740, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}