{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM3MTI4MTM3", "number": 2205, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwOToyNzo1MVrOELMCeg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwODoyMzo0NFrOEOlH3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgwMTY3MDM0OnYy", "diffSide": "RIGHT", "path": "reactor-core/src/main/java/reactor/core/publisher/FluxTakeUntil.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwOToyNzo1MVrOGsqJeQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwOToyNzo1MVrOGsqJeQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTQ4MTA4MQ==", "bodyText": "why would this case silently drop the error ?", "url": "https://github.com/reactor/reactor-core/pull/2205#discussion_r449481081", "createdAt": "2020-07-03T09:27:51Z", "author": {"login": "simonbasle"}, "path": "reactor-core/src/main/java/reactor/core/publisher/FluxTakeUntil.java", "diffHunk": "@@ -88,13 +93,16 @@ public void onNext(T t) {\n \n \t\t\tif (b) {\n \t\t\t\ts.cancel();\n-\n-\t\t\t\tonComplete();\n+\t\t\t\ttook = true;\n+\t\t\t\tactual.onComplete();\n \t\t\t}\n \t\t}\n \n \t\t@Override\n \t\tpublic void onError(Throwable t) {\n+\t\t\tif (took) {\n+\t\t\t\treturn;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6820cd6ea112a4f3894ad6824a27df616c1e1c48"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgwMTY3MTg3OnYy", "diffSide": "RIGHT", "path": "reactor-core/src/main/java/reactor/core/publisher/FluxTakeWhile.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwOToyODoyM1rOGsqKdw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwOToyODoyM1rOGsqKdw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTQ4MTMzNQ==", "bodyText": "same here, I don't think the throwable should be silently ignored", "url": "https://github.com/reactor/reactor-core/pull/2205#discussion_r449481335", "createdAt": "2020-07-03T09:28:23Z", "author": {"login": "simonbasle"}, "path": "reactor-core/src/main/java/reactor/core/publisher/FluxTakeWhile.java", "diffHunk": "@@ -96,6 +100,9 @@ public void onNext(T t) {\n \n \t\t@Override\n \t\tpublic void onError(Throwable t) {\n+\t\t\tif (took) {\n+\t\t\t\treturn;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6820cd6ea112a4f3894ad6824a27df616c1e1c48"}, "originalPosition": 36}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgwMTY3NTY1OnYy", "diffSide": "RIGHT", "path": "reactor-core/src/main/java/reactor/core/publisher/FluxTake.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwOToyOTo0MVrOGsqM2g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwOToyOTo0MVrOGsqM2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTQ4MTk0Ng==", "bodyText": "the introduction of took and discarding sound like an orthogonal issue", "url": "https://github.com/reactor/reactor-core/pull/2205#discussion_r449481946", "createdAt": "2020-07-03T09:29:41Z", "author": {"login": "simonbasle"}, "path": "reactor-core/src/main/java/reactor/core/publisher/FluxTake.java", "diffHunk": "@@ -102,6 +103,10 @@ public void onSubscribe(Subscription s) {\n \n \t\t@Override\n \t\tpublic void onNext(T t) {\n+\t\t\tif (took) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6820cd6ea112a4f3894ad6824a27df616c1e1c48"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzNzIzNzQzOnYy", "diffSide": "RIGHT", "path": "reactor-core/src/test/java/reactor/core/publisher/BaseSubscriberTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwODoyMzo0NFrOGxzl9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwODo1MzoxOVrOGx0sFQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDg3ODcxMA==", "bodyText": "there is a TestLogger for that purpose that can be activated with Loggers.useCustomLoggers(ignored -> tl); instead of dealing with the PrintWriters yourself", "url": "https://github.com/reactor/reactor-core/pull/2205#discussion_r454878710", "createdAt": "2020-07-15T08:23:44Z", "author": {"login": "simonbasle"}, "path": "reactor-core/src/test/java/reactor/core/publisher/BaseSubscriberTest.java", "diffHunk": "@@ -79,10 +84,16 @@ protected void hookFinally(SignalType type) {\n \t}\n \n \t@Test\n-\tpublic void onErrorCallbackNotImplemented() {\n-\t\tFlux<String> flux = Flux.error(new IllegalStateException());\n-\n+\tpublic void onErrorCallbackNotImplemented() throws UnsupportedEncodingException {\n+\t\tPrintStream err = System.err;\n+\t\tPrintStream out = System.out;\n \t\ttry {\n+\t\t\tByteArrayOutputStream outputStream = new ByteArrayOutputStream();\n+\t\t\tSystem.setErr(new PrintStream(outputStream));\n+\t\t\tSystem.setOut(new PrintStream(outputStream));\n+\t\t\tLoggers.useVerboseConsoleLoggers();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "14b38be75160b1a6f02b783071b84efe2c543221"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDg5NjY2MQ==", "bodyText": "fixed", "url": "https://github.com/reactor/reactor-core/pull/2205#discussion_r454896661", "createdAt": "2020-07-15T08:53:19Z", "author": {"login": "OlegDokuka"}, "path": "reactor-core/src/test/java/reactor/core/publisher/BaseSubscriberTest.java", "diffHunk": "@@ -79,10 +84,16 @@ protected void hookFinally(SignalType type) {\n \t}\n \n \t@Test\n-\tpublic void onErrorCallbackNotImplemented() {\n-\t\tFlux<String> flux = Flux.error(new IllegalStateException());\n-\n+\tpublic void onErrorCallbackNotImplemented() throws UnsupportedEncodingException {\n+\t\tPrintStream err = System.err;\n+\t\tPrintStream out = System.out;\n \t\ttry {\n+\t\t\tByteArrayOutputStream outputStream = new ByteArrayOutputStream();\n+\t\t\tSystem.setErr(new PrintStream(outputStream));\n+\t\t\tSystem.setOut(new PrintStream(outputStream));\n+\t\t\tLoggers.useVerboseConsoleLoggers();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDg3ODcxMA=="}, "originalCommit": {"oid": "14b38be75160b1a6f02b783071b84efe2c543221"}, "originalPosition": 37}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 876, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}