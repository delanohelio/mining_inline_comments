{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI5NTkwNjQ3", "number": 2518, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxNDo0NDowNVrOE-r3QQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxNToxMjowNFrOFATQoQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM0MTY1ODI1OnYy", "diffSide": "RIGHT", "path": "reactor-test/src/test/java/reactor/test/DefaultContextExpectationsTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxNDo0NDowNVrOH7-QIw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxNDo0NDowNVrOH7-QIw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjY0Nzk3MQ==", "bodyText": "would it make sense / demonstrate additional value to make the transformation / tested chain the same in both capturedOperator and capturedOperatorWithDebug?", "url": "https://github.com/reactor/reactor-core/pull/2518#discussion_r532647971", "createdAt": "2020-11-30T14:44:05Z", "author": {"login": "simonbasle"}, "path": "reactor-test/src/test/java/reactor/test/DefaultContextExpectationsTest.java", "diffHunk": "@@ -292,7 +321,27 @@ public void notMatchesWithDescriptionAndScenarioName() {\n \t\t\t\t\t\tbase.matches(Objects::isNull, \"someDescription\")\n \t\t\t\t\t\t    .then()\n \t\t\t\t\t\t    .expectNextCount(10)::verifyComplete)\n-\t\t\t\t.withMessage(\"[scenario] Context Context1{foo=bar} doesn't match predicate someDescription\");\n+\t\t\t\t.withMessageStartingWith(\"\" +\n+\t\t\t\t\t\t\"[scenario] Context doesn't match predicate someDescription\\n\" +\n+\t\t\t\t\t\t\"Context: Context1{foo=bar}\"\n+\t\t\t\t);\n+\t}\n+\n+\t@Test\n+\tpublic void capturedOperator() {\n+\t\tassertContextExpectationFails(\n+\t\t\t\ts -> s.doOnEach(__ -> {}),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "405cca0b130dee5a1f2974b67f564b2c3df9b73e"}, "originalPosition": 173}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM1ODU5ODczOnYy", "diffSide": "RIGHT", "path": "reactor-test/src/main/java/reactor/test/DefaultStepVerifierBuilder.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxNToxMjowNFrOH-hK4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxNToxNTo0MVrOH-hW3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTMxNzIxNw==", "bodyText": "wait, do we still need that? now the subscriber could be null and none of the Consumer<CoreSubscriber> have been amended to fix that :(", "url": "https://github.com/reactor/reactor-core/pull/2518#discussion_r535317217", "createdAt": "2020-12-03T15:12:04Z", "author": {"login": "simonbasle"}, "path": "reactor-test/src/main/java/reactor/test/DefaultStepVerifierBuilder.java", "diffHunk": "@@ -2525,7 +2525,7 @@ static String formatFusionMode(int m) {\n \t\t\t\tScannable lowest = Scannable.from(s);\n \n \t\t\t\t//attempt to go back to the leftmost parent to check the Context from its perspective\n-\t\t\t\tContext c = Flux.<Scannable>\n+\t\t\t\tCoreSubscriber<?> subscriber = Flux.<Scannable>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "236bf3bf49b3f4dc78c31636ee8190e789ed729f"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTMxODYyMg==", "bodyText": "We do. Also, there is a check that verifies that the context is present before running any of the context assertions", "url": "https://github.com/reactor/reactor-core/pull/2518#discussion_r535318622", "createdAt": "2020-12-03T15:13:40Z", "author": {"login": "bsideup"}, "path": "reactor-test/src/main/java/reactor/test/DefaultStepVerifierBuilder.java", "diffHunk": "@@ -2525,7 +2525,7 @@ static String formatFusionMode(int m) {\n \t\t\t\tScannable lowest = Scannable.from(s);\n \n \t\t\t\t//attempt to go back to the leftmost parent to check the Context from its perspective\n-\t\t\t\tContext c = Flux.<Scannable>\n+\t\t\t\tCoreSubscriber<?> subscriber = Flux.<Scannable>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTMxNzIxNw=="}, "originalCommit": {"oid": "236bf3bf49b3f4dc78c31636ee8190e789ed729f"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTMyMDI4Nw==", "bodyText": "yeah just re-checked the code and tests, this should be equivalent, as previously this resulting in a Context variable that was also null. My bad.", "url": "https://github.com/reactor/reactor-core/pull/2518#discussion_r535320287", "createdAt": "2020-12-03T15:15:41Z", "author": {"login": "simonbasle"}, "path": "reactor-test/src/main/java/reactor/test/DefaultStepVerifierBuilder.java", "diffHunk": "@@ -2525,7 +2525,7 @@ static String formatFusionMode(int m) {\n \t\t\t\tScannable lowest = Scannable.from(s);\n \n \t\t\t\t//attempt to go back to the leftmost parent to check the Context from its perspective\n-\t\t\t\tContext c = Flux.<Scannable>\n+\t\t\t\tCoreSubscriber<?> subscriber = Flux.<Scannable>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTMxNzIxNw=="}, "originalCommit": {"oid": "236bf3bf49b3f4dc78c31636ee8190e789ed729f"}, "originalPosition": 18}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 865, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}