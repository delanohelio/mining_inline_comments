{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg0MjQwNjkw", "number": 2066, "title": "fix #2060 Introduce and use VirtualTimeScheduler#getOrSet(boolean)", "bodyText": "", "createdAt": "2020-03-05T12:12:52Z", "url": "https://github.com/reactor/reactor-core/pull/2066", "merged": true, "mergeCommit": {"oid": "61b5c02a9242b7d8214c1b0bf9df1d8ad1b37a75"}, "closed": true, "closedAt": "2020-03-09T14:05:39Z", "author": {"login": "simonbasle"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcKqcPXgH2gAyMzg0MjQwNjkwOmUwOWMxMzA4ZjQ2OWIzMGM3YmVmNGZjZGRkYzdhYjM1NzRhNjE0ZDQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcL-LR4gH2gAyMzg0MjQwNjkwOjNmZmExNzljNzMyZWUzZDQxNTE4NjhjZDNmZWM2MzQ3NmU2MDgwMWE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e09c1308f469b30c7bef4fcdddc7ab3574a614d4", "author": {"user": {"login": "simonbasle", "name": "Simon Basl\u00e9"}}, "url": "https://github.com/reactor/reactor-core/commit/e09c1308f469b30c7bef4fcdddc7ab3574a614d4", "committedDate": "2020-03-05T12:12:11Z", "message": "fix #2060 Introduce and use VirtualTimeScheduler#getOrSet(boolean)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcxMTA5NzY0", "url": "https://github.com/reactor/reactor-core/pull/2066#pullrequestreview-371109764", "createdAt": "2020-03-09T12:08:05Z", "commit": {"oid": "e09c1308f469b30c7bef4fcdddc7ab3574a614d4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQxMjowODowNVrOFzkfOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQxMjowODowNVrOFzkfOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTYxOTUxNQ==", "bodyText": "nit: {} are missing", "url": "https://github.com/reactor/reactor-core/pull/2066#discussion_r389619515", "createdAt": "2020-03-09T12:08:05Z", "author": {"login": "bsideup"}, "path": "reactor-test/src/test/java/reactor/test/StepVerifierTests.java", "diffHunk": "@@ -2343,4 +2346,32 @@ public void verifyDrainOnRequestInCaseOfFusion2() {\n \n \t\tassertThat(requests).containsExactly(1L, 1L, 1L);\n \t}\n+\n+\t//see https://github.com/reactor/reactor-core/issues/2060\n+\t@Test\n+\tpublic void externalGetOrSetTakenIntoAccount() {\n+\t\tScheduler.Worker subscriptionWorker = VirtualTimeScheduler.getOrSet().createWorker();\n+\t\tList<String> source = Stream.of(\"first\", \"second\", \"third\").collect(Collectors.toList());\n+\n+\n+\t\tStepVerifier.withVirtualTime(() -> {\n+\t\t\tEmitterProcessor<String> fluxEmitter = EmitterProcessor.create();\n+\n+\t\t\tsubscriptionWorker.schedulePeriodically(() -> {\n+\t\t\t\tif (source.size() > 0)\n+\t\t\t\t\tfluxEmitter.onNext(source.remove(0));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e09c1308f469b30c7bef4fcdddc7ab3574a614d4"}, "originalPosition": 34}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcxMTA5ODgy", "url": "https://github.com/reactor/reactor-core/pull/2066#pullrequestreview-371109882", "createdAt": "2020-03-09T12:08:18Z", "commit": {"oid": "e09c1308f469b30c7bef4fcdddc7ab3574a614d4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ffa179c732ee3d4151868cd3fec63476e60801a", "author": {"user": {"login": "simonbasle", "name": "Simon Basl\u00e9"}}, "url": "https://github.com/reactor/reactor-core/commit/3ffa179c732ee3d4151868cd3fec63476e60801a", "committedDate": "2020-03-09T13:45:41Z", "message": "polish code style"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2917, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}