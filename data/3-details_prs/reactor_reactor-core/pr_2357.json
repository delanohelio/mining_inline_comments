{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc4NzUzNTg3", "number": 2357, "title": "fix #2338 Add new Emission FAIL_ZERO_SUBSCRIBER error code", "bodyText": "", "createdAt": "2020-09-03T16:35:10Z", "url": "https://github.com/reactor/reactor-core/pull/2357", "merged": true, "mergeCommit": {"oid": "f6c8afe6c389642e0ed4349a713e5717bf0e3874"}, "closed": true, "closedAt": "2020-09-11T17:24:58Z", "author": {"login": "simonbasle"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdGjjvnAFqTQ4MzU4MjQ0Ng==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdH4aHjgH2gAyNDc4NzUzNTg3OmY1MjA4NjIxM2MwNjk1OGI3YzRjYWU5YzI1ZjgwOTkzY2M4ZjI4ZDI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzNTgyNDQ2", "url": "https://github.com/reactor/reactor-core/pull/2357#pullrequestreview-483582446", "createdAt": "2020-09-07T14:06:30Z", "commit": {"oid": "42fbc64dc912c3a5027e25ada55b1952127789d3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxNDowNjozMFrOHOAtIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxNDowNjozMFrOHOAtIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDQ1MzY2NA==", "bodyText": "shouldn't we check subscribers == EMPTY even before attempting to lazily create a queue? Otherwise, it still returns OK if the queue has the capacity but there are no subscribers", "url": "https://github.com/reactor/reactor-core/pull/2357#discussion_r484453664", "createdAt": "2020-09-07T14:06:30Z", "author": {"login": "bsideup"}, "path": "reactor-core/src/main/java/reactor/core/publisher/EmitterProcessor.java", "diffHunk": "@@ -310,7 +310,7 @@ public Emission tryEmitNext(T t) {\n \t\t}\n \n \t\tif (!q.offer(t)) {\n-\t\t\treturn Emission.FAIL_OVERFLOW;\n+\t\t\treturn subscribers == EMPTY ? Emission.FAIL_ZERO_SUBSCRIBER : Emission.FAIL_OVERFLOW;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "42fbc64dc912c3a5027e25ada55b1952127789d3"}, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzNTgzMjk0", "url": "https://github.com/reactor/reactor-core/pull/2357#pullrequestreview-483583294", "createdAt": "2020-09-07T14:07:50Z", "commit": {"oid": "42fbc64dc912c3a5027e25ada55b1952127789d3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxNDowNzo1MFrOHOAvmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxNDowNzo1MFrOHOAvmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDQ1NDI5Ng==", "bodyText": "Have you considered naming it hasSubscribers?", "url": "https://github.com/reactor/reactor-core/pull/2357#discussion_r484454296", "createdAt": "2020-09-07T14:07:50Z", "author": {"login": "bsideup"}, "path": "reactor-core/src/main/java/reactor/core/publisher/Sinks.java", "diffHunk": "@@ -497,6 +502,8 @@ public Emission getReason() {\n \t */\n \tpublic interface Many<T> {\n \n+\t\tboolean hasSubscriber();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "42fbc64dc912c3a5027e25ada55b1952127789d3"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzNTg0MjE4", "url": "https://github.com/reactor/reactor-core/pull/2357#pullrequestreview-483584218", "createdAt": "2020-09-07T14:09:24Z", "commit": {"oid": "42fbc64dc912c3a5027e25ada55b1952127789d3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxNDowOToyNFrOHOAyUA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxNDowOToyNFrOHOAyUA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDQ1NDk5Mg==", "bodyText": "to avoid double CASing, we can/should replace it with do { read + switch + cas } while (casFails)", "url": "https://github.com/reactor/reactor-core/pull/2357#discussion_r484454992", "createdAt": "2020-09-07T14:09:24Z", "author": {"login": "bsideup"}, "path": "reactor-core/src/main/java/reactor/core/publisher/UnicastManySinkNoBackpressure.java", "diffHunk": "@@ -67,6 +70,18 @@\n \tpublic void subscribe(CoreSubscriber<? super T> actual) {\n \t\tObjects.requireNonNull(actual, \"subscribe\");\n \n+\t\t//detect pre-subscribe termination\n+\t\tif (STATE.compareAndSet(this, State.TERMINATED_BEFORE_SUBSCRIPTION, State.TERMINATED)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "42fbc64dc912c3a5027e25ada55b1952127789d3"}, "originalPosition": 22}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzNTg0OTU3", "url": "https://github.com/reactor/reactor-core/pull/2357#pullrequestreview-483584957", "createdAt": "2020-09-07T14:10:30Z", "commit": {"oid": "42fbc64dc912c3a5027e25ada55b1952127789d3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxNDoxMDozMVrOHOA0kA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxNDoxMDozMVrOHOA0kA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDQ1NTU2OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t\telse return tryEmitError(t);\n          \n          \n            \n            \t\t\t\telse {\n          \n          \n            \n            \t\t\t\t\treturn tryEmitError(t);\n          \n          \n            \n            \t\t\t\t}", "url": "https://github.com/reactor/reactor-core/pull/2357#discussion_r484455568", "createdAt": "2020-09-07T14:10:31Z", "author": {"login": "bsideup"}, "path": "reactor-core/src/main/java/reactor/core/publisher/UnicastManySinkNoBackpressure.java", "diffHunk": "@@ -153,16 +169,24 @@ public void emitError(Throwable error) {\n \t@Override\n \tpublic Emission tryEmitError(Throwable t) {\n \t\tObjects.requireNonNull(t, \"t\");\n-\n-\t\tswitch (state) {\n+\t\tswitch (this.state) {\n \t\t\tcase INITIAL:\n-\t\t\t\t// TODO different Emission?\n-\t\t\t\treturn Emission.OK;\n+\t\t\t\tif (STATE.compareAndSet(this, State.INITIAL, State.TERMINATED_BEFORE_SUBSCRIPTION)) {\n+\t\t\t\t\tthis.error = t;\n+\t\t\t\t\treturn Emission.OK;\n+\t\t\t\t}\n+\t\t\t\telse return tryEmitError(t);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "42fbc64dc912c3a5027e25ada55b1952127789d3"}, "originalPosition": 76}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzNTg1MTQy", "url": "https://github.com/reactor/reactor-core/pull/2357#pullrequestreview-483585142", "createdAt": "2020-09-07T14:10:48Z", "commit": {"oid": "42fbc64dc912c3a5027e25ada55b1952127789d3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxNDoxMDo0OFrOHOA1IQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxNDoxMDo0OFrOHOA1IQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDQ1NTcxMw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t\telse return tryEmitComplete(); // recurse\n          \n          \n            \n            \t\t\t\telse {\n          \n          \n            \n            \t\t\t\t\treturn tryEmitComplete(); // recurse\n          \n          \n            \n            \t\t\t\t}", "url": "https://github.com/reactor/reactor-core/pull/2357#discussion_r484455713", "createdAt": "2020-09-07T14:10:48Z", "author": {"login": "bsideup"}, "path": "reactor-core/src/main/java/reactor/core/publisher/UnicastManySinkNoBackpressure.java", "diffHunk": "@@ -182,18 +206,29 @@ public void emitComplete() {\n \tpublic Emission tryEmitComplete() {\n \t\tswitch (state) {\n \t\t\tcase INITIAL:\n-\t\t\t\t// TODO different Emission?\n-\t\t\t\treturn Emission.OK;\n+\t\t\t\tif (STATE.compareAndSet(this, State.INITIAL, State.TERMINATED_BEFORE_SUBSCRIPTION)) {\n+\t\t\t\t\treturn Emission.OK;\n+\t\t\t\t}\n+\t\t\t\telse return tryEmitComplete(); //recurse\n \t\t\tcase SUBSCRIBED:\n-\t\t\t\tactual.onComplete();\n-\t\t\t\tactual = null;\n-\t\t\t\treturn Emission.OK;\n+\t\t\t\tif (STATE.compareAndSet(this, State.SUBSCRIBED, State.TERMINATED)) {\n+\t\t\t\t\tactual.onComplete();\n+\t\t\t\t\tactual = null;\n+\t\t\t\t\treturn Emission.OK;\n+\t\t\t\t}\n+\t\t\t\telse return tryEmitComplete(); // recurse", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "42fbc64dc912c3a5027e25ada55b1952127789d3"}, "originalPosition": 113}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzNTg3NDY4", "url": "https://github.com/reactor/reactor-core/pull/2357#pullrequestreview-483587468", "createdAt": "2020-09-07T14:14:29Z", "commit": {"oid": "42fbc64dc912c3a5027e25ada55b1952127789d3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxNDoxNDozMFrOHOA8mg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxNDoxNDozMFrOHOA8mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDQ1NzYyNg==", "bodyText": "IMO this is wrong and should return FAIL_ZERO_SUBSCRIBER", "url": "https://github.com/reactor/reactor-core/pull/2357#discussion_r484457626", "createdAt": "2020-09-07T14:14:30Z", "author": {"login": "bsideup"}, "path": "reactor-core/src/test/java/reactor/core/publisher/UnicastProcessorTest.java", "diffHunk": "@@ -279,4 +279,50 @@ public void shouldSignalErrorOnOverflow() {\n \t\t            .then(() -> processor.emitNext(\"boom\"))\n \t\t            .verifyErrorMatches(Exceptions::isOverflow);\n \t}\n+\n+\t@Test\n+\tpublic void tryEmitNextWithNoSubscriberAndBoundedQueueFailsZeroSubscriber() {\n+\t\tUnicastProcessor<Integer> unicastProcessor = UnicastProcessor.create(Queues.<Integer>one().get());\n+\n+\t\tassertThat(unicastProcessor.tryEmitNext(1)).isEqualTo(Sinks.Emission.OK);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "42fbc64dc912c3a5027e25ada55b1952127789d3"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0MDMzMjI4", "url": "https://github.com/reactor/reactor-core/pull/2357#pullrequestreview-484033228", "createdAt": "2020-09-08T11:16:07Z", "commit": {"oid": "0fd9c1c71a9ab06ca5c1ba828aeba334cc27ed92"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxMToxNjowN1rOHOYO_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxMToxNjowN1rOHOYO_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDgzOTE2NQ==", "bodyText": "why not put it into switch's cases?\nSimilar to \n  \n    \n      reactor-core/reactor-core/src/main/java/reactor/core/publisher/FluxConcatMapNoPrefetch.java\n    \n    \n        Lines 275 to 286\n      in\n      56e5c0d\n    \n    \n    \n    \n\n        \n          \n           case LAST_ACTIVE: \n        \n\n        \n          \n           \tif (!STATE.compareAndSet(this, previousState, State.TERMINATED)) { \n        \n\n        \n          \n           \t\tcontinue; \n        \n\n        \n          \n           \t} \n        \n\n        \n          \n            \n        \n\n        \n          \n           \tThrowable ex = error; \n        \n\n        \n          \n           \tif (ex != null) { \n        \n\n        \n          \n           \t\tactual.onError(ex); \n        \n\n        \n          \n           \t\treturn; \n        \n\n        \n          \n           \t} \n        \n\n        \n          \n           \tactual.onComplete(); \n        \n\n        \n          \n           \treturn; \n        \n    \n  \n\n\n\ntry CAS\ncontinue if fails\ndo the action otherwise", "url": "https://github.com/reactor/reactor-core/pull/2357#discussion_r484839165", "createdAt": "2020-09-08T11:16:07Z", "author": {"login": "bsideup"}, "path": "reactor-core/src/main/java/reactor/core/publisher/UnicastManySinkNoBackpressure.java", "diffHunk": "@@ -67,13 +70,38 @@\n \tpublic void subscribe(CoreSubscriber<? super T> actual) {\n \t\tObjects.requireNonNull(actual, \"subscribe\");\n \n-\t\tif (!STATE.compareAndSet(this, State.INITIAL, State.SUBSCRIBED)) {\n+\t\tboolean casFails;\n+\t\tState s;\n+\t\tdo {\n+\t\t\ts = state;\n+\t\t\tswitch(s) {\n+\t\t\t\tcase TERMINATED_BEFORE_SUBSCRIPTION:\n+\t\t\t\t\tcasFails = !STATE.compareAndSet(this, s, State.TERMINATED);\n+\t\t\t\t\tbreak;\n+\t\t\t\tcase INITIAL:\n+\t\t\t\t\tcasFails = !STATE.compareAndSet(this, s, State.SUBSCRIBED);\n+\t\t\t\t\tbreak;\n+\t\t\t\tdefault:\n+\t\t\t\t\tcasFails = false;\n+\t\t\t}\n+\t\t} while (casFails);\n+\n+\t\tif (s == State.TERMINATED_BEFORE_SUBSCRIPTION) {\n+\t\t\t//detected pre-subscribe termination\n+\t\t\tif (this.error != null) {\n+\t\t\t\tOperators.error(actual, this.error);\n+\t\t\t}\n+\t\t\telse {\n+\t\t\t\tOperators.complete(actual);\n+\t\t\t}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0fd9c1c71a9ab06ca5c1ba828aeba334cc27ed92"}, "originalPosition": 45}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6fa00a33d0678ea0b7d7703c127123c296d1f151", "author": {"user": {"login": "simonbasle", "name": "Simon Basl\u00e9"}}, "url": "https://github.com/reactor/reactor-core/commit/6fa00a33d0678ea0b7d7703c127123c296d1f151", "committedDate": "2020-09-08T15:19:12Z", "message": "formatting"}, "afterCommit": {"oid": "eca5e189f5e9d0cc914af9fb193b06096b64038d", "author": {"user": {"login": "simonbasle", "name": "Simon Basl\u00e9"}}, "url": "https://github.com/reactor/reactor-core/commit/eca5e189f5e9d0cc914af9fb193b06096b64038d", "committedDate": "2020-09-08T15:20:53Z", "message": "formatting"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0MjYxODA0", "url": "https://github.com/reactor/reactor-core/pull/2357#pullrequestreview-484261804", "createdAt": "2020-09-08T15:33:26Z", "commit": {"oid": "eca5e189f5e9d0cc914af9fb193b06096b64038d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNTozMzoyNlrOHOi3xA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNTozMzoyNlrOHOi3xA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTAxMzQ0NA==", "bodyText": "nit: Could use a similar style as in \n  \n    \n      reactor-core/reactor-core/src/main/java/reactor/core/publisher/FluxConcatMapNoPrefetch.java\n    \n    \n         Line 226\n      in\n      56e5c0d\n    \n    \n    \n    \n\n        \n          \n           for (State previousState = this.state; ; previousState = this.state) {", "url": "https://github.com/reactor/reactor-core/pull/2357#discussion_r485013444", "createdAt": "2020-09-08T15:33:26Z", "author": {"login": "bsideup"}, "path": "reactor-core/src/main/java/reactor/core/publisher/UnicastManySinkNoBackpressure.java", "diffHunk": "@@ -67,13 +70,34 @@\n \tpublic void subscribe(CoreSubscriber<? super T> actual) {\n \t\tObjects.requireNonNull(actual, \"subscribe\");\n \n-\t\tif (!STATE.compareAndSet(this, State.INITIAL, State.SUBSCRIBED)) {\n-\t\t\tOperators.reportThrowInSubscribe(actual, new IllegalStateException(\"Unicast Sinks.Many allows only a single Subscriber\"));\n-\t\t\treturn;\n+\t\tState s;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eca5e189f5e9d0cc914af9fb193b06096b64038d"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0MjYyNzEy", "url": "https://github.com/reactor/reactor-core/pull/2357#pullrequestreview-484262712", "createdAt": "2020-09-08T15:34:27Z", "commit": {"oid": "eca5e189f5e9d0cc914af9fb193b06096b64038d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNTozNDoyN1rOHOi6ig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNTozNDoyN1rOHOi6ig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTAxNDE1NA==", "bodyText": "consider extracting this.state into a variable and using it here in place of State.INITIAL to avoid future copy/paste errors", "url": "https://github.com/reactor/reactor-core/pull/2357#discussion_r485014154", "createdAt": "2020-09-08T15:34:27Z", "author": {"login": "bsideup"}, "path": "reactor-core/src/main/java/reactor/core/publisher/UnicastManySinkNoBackpressure.java", "diffHunk": "@@ -153,16 +178,26 @@ public void emitError(Throwable error) {\n \t@Override\n \tpublic Emission tryEmitError(Throwable t) {\n \t\tObjects.requireNonNull(t, \"t\");\n-\n-\t\tswitch (state) {\n+\t\tswitch (this.state) {\n \t\t\tcase INITIAL:\n-\t\t\t\t// TODO different Emission?\n-\t\t\t\treturn Emission.OK;\n+\t\t\t\tif (STATE.compareAndSet(this, State.INITIAL, State.TERMINATED_BEFORE_SUBSCRIPTION)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eca5e189f5e9d0cc914af9fb193b06096b64038d"}, "originalPosition": 94}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ab2252aa6fbb5a5b495b5b22bf10cbaafb14bbea", "author": {"user": {"login": "simonbasle", "name": "Simon Basl\u00e9"}}, "url": "https://github.com/reactor/reactor-core/commit/ab2252aa6fbb5a5b495b5b22bf10cbaafb14bbea", "committedDate": "2020-09-08T16:28:45Z", "message": "rework the state into the for of infinite loop"}, "afterCommit": {"oid": "c13b602b42536412214d289da30f655c1a4b96a7", "author": {"user": {"login": "simonbasle", "name": "Simon Basl\u00e9"}}, "url": "https://github.com/reactor/reactor-core/commit/c13b602b42536412214d289da30f655c1a4b96a7", "committedDate": "2020-09-09T15:45:52Z", "message": "emitNext avoids terminating sinks when FAIL_0_SUB"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2OTY0Nzkz", "url": "https://github.com/reactor/reactor-core/pull/2357#pullrequestreview-486964793", "createdAt": "2020-09-11T16:47:22Z", "commit": {"oid": "c13b602b42536412214d289da30f655c1a4b96a7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8bb2497470790943365cc50f2acd19d259e0b5c4", "author": {"user": {"login": "simonbasle", "name": "Simon Basl\u00e9"}}, "url": "https://github.com/reactor/reactor-core/commit/8bb2497470790943365cc50f2acd19d259e0b5c4", "committedDate": "2020-09-11T16:47:58Z", "message": "fix #2338 Sinks.Many distinguish FAIL_ZERO_SUBSCRIBER\n\nFor now, emitNext avoids terminating sinks when FAIL_0_SUB.\n\nUnicastManySinkNoBackpressure behaves a bit differently. It uses\n0_SUB in tryEmitComplete and tryEmitError as well."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c13b602b42536412214d289da30f655c1a4b96a7", "author": {"user": {"login": "simonbasle", "name": "Simon Basl\u00e9"}}, "url": "https://github.com/reactor/reactor-core/commit/c13b602b42536412214d289da30f655c1a4b96a7", "committedDate": "2020-09-09T15:45:52Z", "message": "emitNext avoids terminating sinks when FAIL_0_SUB"}, "afterCommit": {"oid": "8bb2497470790943365cc50f2acd19d259e0b5c4", "author": {"user": {"login": "simonbasle", "name": "Simon Basl\u00e9"}}, "url": "https://github.com/reactor/reactor-core/commit/8bb2497470790943365cc50f2acd19d259e0b5c4", "committedDate": "2020-09-11T16:47:58Z", "message": "fix #2338 Sinks.Many distinguish FAIL_ZERO_SUBSCRIBER\n\nFor now, emitNext avoids terminating sinks when FAIL_0_SUB.\n\nUnicastManySinkNoBackpressure behaves a bit differently. It uses\n0_SUB in tryEmitComplete and tryEmitError as well."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f52086213c06958b7c4cae9c25f80993cc8f28d2", "author": {"user": {"login": "simonbasle", "name": "Simon Basl\u00e9"}}, "url": "https://github.com/reactor/reactor-core/commit/f52086213c06958b7c4cae9c25f80993cc8f28d2", "committedDate": "2020-09-11T16:57:55Z", "message": "add tests for 0-sub on terminal attempts in UnicastManySinkNoBackpressure"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2851, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}