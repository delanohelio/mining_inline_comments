{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk5MDgxNTgy", "number": 2418, "title": "Rework Sinks specs to put unsafe() at root level", "bodyText": "This commit reworks the Sinks specs in preparation the fact that\none() and empty() should have a serialized versions\nThis implies that Sinks.one() is serialized and thus there\nshould be an unsafe version. But unsafe() lives at the ManySpec level.\nSo this commit introduces RootSpec and moves the unsafe() switch from\nManySpec to Sinks directly, retuning a RootSpec which allows\naccess to unsafe one() and empty().\nInternally, the implementation is simplified, collapsing most of the\nspecs into a single RootSpecImpl, to the exception of UnicastSpec\n(since one cannot implement both UnicastSpec and MulticastSpec).", "createdAt": "2020-10-07T08:39:21Z", "url": "https://github.com/reactor/reactor-core/pull/2418", "merged": true, "mergeCommit": {"oid": "e533da44ec0be31938208b5e45b121901961123e"}, "closed": true, "closedAt": "2020-10-08T15:02:00Z", "author": {"login": "simonbasle"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdQJw7sgBqjM4NDk1ODQ3NDQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdQi1GsAFqTUwNDg3MTk5Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "277b3afaf71331c0e46f069b1ec71bb3e3019dad", "author": {"user": {"login": "simonbasle", "name": "Simon Basl\u00e9"}}, "url": "https://github.com/reactor/reactor-core/commit/277b3afaf71331c0e46f069b1ec71bb3e3019dad", "committedDate": "2020-10-07T09:01:25Z", "message": "polish formatting and naming of spec implementations"}, "afterCommit": {"oid": "6348d9bc812059c4da091c7a6bd5697bba3a5846", "author": {"user": {"login": "simonbasle", "name": "Simon Basl\u00e9"}}, "url": "https://github.com/reactor/reactor-core/commit/6348d9bc812059c4da091c7a6bd5697bba3a5846", "committedDate": "2020-10-07T09:42:22Z", "message": "polish formatting and naming of spec implementations"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "981e0554ce514c9ef02a6390345d1485ec50c5b1", "author": {"user": {"login": "simonbasle", "name": "Simon Basl\u00e9"}}, "url": "https://github.com/reactor/reactor-core/commit/981e0554ce514c9ef02a6390345d1485ec50c5b1", "committedDate": "2020-10-07T12:29:06Z", "message": "fix wrapMany typesafety"}, "afterCommit": {"oid": "b22285f7559d53635dfef1d3a604c097ae5718d6", "author": {"user": {"login": "simonbasle", "name": "Simon Basl\u00e9"}}, "url": "https://github.com/reactor/reactor-core/commit/b22285f7559d53635dfef1d3a604c097ae5718d6", "committedDate": "2020-10-07T16:46:45Z", "message": "fix wrapMany typesafety"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0NTY0MDkz", "url": "https://github.com/reactor/reactor-core/pull/2418#pullrequestreview-504564093", "createdAt": "2020-10-08T08:52:22Z", "commit": {"oid": "b22285f7559d53635dfef1d3a604c097ae5718d6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b22285f7559d53635dfef1d3a604c097ae5718d6", "author": {"user": {"login": "simonbasle", "name": "Simon Basl\u00e9"}}, "url": "https://github.com/reactor/reactor-core/commit/b22285f7559d53635dfef1d3a604c097ae5718d6", "committedDate": "2020-10-07T16:46:45Z", "message": "fix wrapMany typesafety"}, "afterCommit": {"oid": "63759112cec8f5c1b4a6ba623167244bf993e38c", "author": {"user": {"login": "simonbasle", "name": "Simon Basl\u00e9"}}, "url": "https://github.com/reactor/reactor-core/commit/63759112cec8f5c1b4a6ba623167244bf993e38c", "committedDate": "2020-10-08T13:49:31Z", "message": "Rework specs to allow wrapping and put unsafe() at root level (#2418)\n\nThis commit reworks the Sinks specs so that the one() and empty() sinks\ncan have both a serialized and unsafe version.\n\nSince  `unsafe()` lives at the ManySpec level, currently there's only\none set of `one()` and `empty()` factories.\nSo this commit introduces RootSpec and moves the `unsafe()` switch from\n`ManySpec` to `Sinks` directly, retuning a `RootSpec` which allows\naccess to unsafe `one()` and `empty()`.\n\nInternally, the implementation is also heavily simplified, collapsed\ninto only 2 internal classes for the specs."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1efae9a65653bc35887b6674d4f8deda60992777", "author": {"user": {"login": "simonbasle", "name": "Simon Basl\u00e9"}}, "url": "https://github.com/reactor/reactor-core/commit/1efae9a65653bc35887b6674d4f8deda60992777", "committedDate": "2020-10-08T13:56:30Z", "message": "Rework specs to allow wrapping and put unsafe() at root level (#2418)\n\nThis commit reworks the Sinks specs so that the one() and empty() sinks\ncan have both a serialized and unsafe version.\n\nSince  `unsafe()` lives at the ManySpec level, currently there's only\none set of `one()` and `empty()` factories.\nSo this commit introduces RootSpec and moves the `unsafe()` switch from\n`ManySpec` to `Sinks` directly, retuning a `RootSpec` which allows\naccess to unsafe `one()` and `empty()`.\n\nInternally, the implementation is also heavily simplified, collapsed\ninto only 2 internal classes for the specs."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "63759112cec8f5c1b4a6ba623167244bf993e38c", "author": {"user": {"login": "simonbasle", "name": "Simon Basl\u00e9"}}, "url": "https://github.com/reactor/reactor-core/commit/63759112cec8f5c1b4a6ba623167244bf993e38c", "committedDate": "2020-10-08T13:49:31Z", "message": "Rework specs to allow wrapping and put unsafe() at root level (#2418)\n\nThis commit reworks the Sinks specs so that the one() and empty() sinks\ncan have both a serialized and unsafe version.\n\nSince  `unsafe()` lives at the ManySpec level, currently there's only\none set of `one()` and `empty()` factories.\nSo this commit introduces RootSpec and moves the `unsafe()` switch from\n`ManySpec` to `Sinks` directly, retuning a `RootSpec` which allows\naccess to unsafe `one()` and `empty()`.\n\nInternally, the implementation is also heavily simplified, collapsed\ninto only 2 internal classes for the specs."}, "afterCommit": {"oid": "1efae9a65653bc35887b6674d4f8deda60992777", "author": {"user": {"login": "simonbasle", "name": "Simon Basl\u00e9"}}, "url": "https://github.com/reactor/reactor-core/commit/1efae9a65653bc35887b6674d4f8deda60992777", "committedDate": "2020-10-08T13:56:30Z", "message": "Rework specs to allow wrapping and put unsafe() at root level (#2418)\n\nThis commit reworks the Sinks specs so that the one() and empty() sinks\ncan have both a serialized and unsafe version.\n\nSince  `unsafe()` lives at the ManySpec level, currently there's only\none set of `one()` and `empty()` factories.\nSo this commit introduces RootSpec and moves the `unsafe()` switch from\n`ManySpec` to `Sinks` directly, retuning a `RootSpec` which allows\naccess to unsafe `one()` and `empty()`.\n\nInternally, the implementation is also heavily simplified, collapsed\ninto only 2 internal classes for the specs."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "66b76462a6edbc4ca8f87b39f12f776c3571b403", "author": {"user": {"login": "simonbasle", "name": "Simon Basl\u00e9"}}, "url": "https://github.com/reactor/reactor-core/commit/66b76462a6edbc4ca8f87b39f12f776c3571b403", "committedDate": "2020-10-08T14:08:08Z", "message": "Make base one/empty serialized"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "be7febc51bd7bf8beb0796507c3ac2d2864146f4", "author": {"user": {"login": "simonbasle", "name": "Simon Basl\u00e9"}}, "url": "https://github.com/reactor/reactor-core/commit/be7febc51bd7bf8beb0796507c3ac2d2864146f4", "committedDate": "2020-10-08T14:11:20Z", "message": "avoid dangling classes, make them child classes of SinksSpecs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0ODQ2NzQ0", "url": "https://github.com/reactor/reactor-core/pull/2418#pullrequestreview-504846744", "createdAt": "2020-10-08T14:30:59Z", "commit": {"oid": "be7febc51bd7bf8beb0796507c3ac2d2864146f4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNDozMDo1OVrOHehhMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNDozMDo1OVrOHehhMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTc2ODQ5Ng==", "bodyText": "err? Why this change?", "url": "https://github.com/reactor/reactor-core/pull/2418#discussion_r501768496", "createdAt": "2020-10-08T14:30:59Z", "author": {"login": "bsideup"}, "path": "reactor-core/src/main/java/reactor/core/publisher/SinkEmptySerialized.java", "diffHunk": "@@ -21,7 +21,8 @@\n import java.util.Objects;\n import java.util.stream.Stream;\n \n-class SinkEmptySerialized<T> extends SerializedSink implements InternalEmptySink<T>, ContextHolder {\n+class SinkEmptySerialized<T> extends SinksSpecs.AbstractSerializedSink", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "be7febc51bd7bf8beb0796507c3ac2d2864146f4"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0ODQ4NDA5", "url": "https://github.com/reactor/reactor-core/pull/2418#pullrequestreview-504848409", "createdAt": "2020-10-08T14:32:35Z", "commit": {"oid": "be7febc51bd7bf8beb0796507c3ac2d2864146f4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNDozMjozNVrOHehmAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNDozMjozNVrOHehmAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTc2OTczMA==", "bodyText": "maybe not \"is serialized\" but \"is protected from non-serialized access\"?", "url": "https://github.com/reactor/reactor-core/pull/2418#discussion_r501769730", "createdAt": "2020-10-08T14:32:35Z", "author": {"login": "bsideup"}, "path": "reactor-core/src/test/java/reactor/core/publisher/SinksTest.java", "diffHunk": "@@ -50,6 +50,30 @@\n  */\n class SinksTest {\n \n+\t@Test\n+\tvoid oneIsSerialized() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "be7febc51bd7bf8beb0796507c3ac2d2864146f4"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0ODcxOTkz", "url": "https://github.com/reactor/reactor-core/pull/2418#pullrequestreview-504871993", "createdAt": "2020-10-08T14:54:48Z", "commit": {"oid": "be7febc51bd7bf8beb0796507c3ac2d2864146f4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2638, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}