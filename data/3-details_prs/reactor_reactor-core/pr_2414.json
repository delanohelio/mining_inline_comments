{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk4Mzc4NjQz", "number": 2414, "title": "[polish] Improve Sinks javadoc in anticipation of deprecated emit API removal", "bodyText": "", "createdAt": "2020-10-06T08:55:30Z", "url": "https://github.com/reactor/reactor-core/pull/2414", "merged": true, "mergeCommit": {"oid": "902237693754c1073cd3495a7e10df4aeb0d436c"}, "closed": true, "closedAt": "2020-10-07T09:31:49Z", "author": {"login": "simonbasle"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdP0iZaAFqTUwMjcyNjkyOQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdQJmxTgFqTUwMzY5NDE1Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyNzI2OTI5", "url": "https://github.com/reactor/reactor-core/pull/2414#pullrequestreview-502726929", "createdAt": "2020-10-06T08:58:43Z", "commit": {"oid": "e4f3245c9bf69162e91431a1c2fc71b1d0270139"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQwODo1ODo0M1rOHc8r8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQwODo1ODo0M1rOHc8r8Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDExNjQ2NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t * Other than instructing to retry, the handler are allowed to have side effects\n          \n          \n            \n            \t * Other than instructing to retry, the handlers are allowed to have side effects", "url": "https://github.com/reactor/reactor-core/pull/2414#discussion_r500116465", "createdAt": "2020-10-06T08:58:43Z", "author": {"login": "bsideup"}, "path": "reactor-core/src/main/java/reactor/core/publisher/Sinks.java", "diffHunk": "@@ -191,9 +198,13 @@ public Emission getReason() {\n \t}\n \n \t/**\n-\t * A handler for any non-successful emission result from operations\n-\t * such as {@link Many#emitNext(Object, EmitFailureHandler)}\n-\t * that allows retrying or failing the operation.\n+\t * A handler supporting the emit API (eg. {@link Many#emitNext(Object, EmitFailureHandler)}),\n+\t * checking non-successful emission results from underlying {@link Many#tryEmitNext(Object) tryEmit}\n+\t * API calls to decide whether or not such calls should be retried.\n+\t * Other than instructing to retry, the handler are allowed to have side effects", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e4f3245c9bf69162e91431a1c2fc71b1d0270139"}, "originalPosition": 79}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyNzI3NjIz", "url": "https://github.com/reactor/reactor-core/pull/2414#pullrequestreview-502727623", "createdAt": "2020-10-06T08:59:30Z", "commit": {"oid": "e4f3245c9bf69162e91431a1c2fc71b1d0270139"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQwODo1OTozMFrOHc8tvw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQwODo1OTozMFrOHc8tvw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDExNjkyNw==", "bodyText": "not 100% sure about this one, but:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t * like parking the current thread for longer retry loops. They don't however influence the\n          \n          \n            \n            \t * like parking the current thread for longer retry loops. They don't, however, influence the", "url": "https://github.com/reactor/reactor-core/pull/2414#discussion_r500116927", "createdAt": "2020-10-06T08:59:30Z", "author": {"login": "bsideup"}, "path": "reactor-core/src/main/java/reactor/core/publisher/Sinks.java", "diffHunk": "@@ -191,9 +198,13 @@ public Emission getReason() {\n \t}\n \n \t/**\n-\t * A handler for any non-successful emission result from operations\n-\t * such as {@link Many#emitNext(Object, EmitFailureHandler)}\n-\t * that allows retrying or failing the operation.\n+\t * A handler supporting the emit API (eg. {@link Many#emitNext(Object, EmitFailureHandler)}),\n+\t * checking non-successful emission results from underlying {@link Many#tryEmitNext(Object) tryEmit}\n+\t * API calls to decide whether or not such calls should be retried.\n+\t * Other than instructing to retry, the handler are allowed to have side effects\n+\t * like parking the current thread for longer retry loops. They don't however influence the", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e4f3245c9bf69162e91431a1c2fc71b1d0270139"}, "originalPosition": 80}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyNzM5NzU5", "url": "https://github.com/reactor/reactor-core/pull/2414#pullrequestreview-502739759", "createdAt": "2020-10-06T09:14:14Z", "commit": {"oid": "7d87e5081ce55661aec65052fb5736255b9c0b35"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzNjQwMTc3", "url": "https://github.com/reactor/reactor-core/pull/2414#pullrequestreview-503640177", "createdAt": "2020-10-07T08:27:42Z", "commit": {"oid": "ab517e7d7312eaf630b7dd8ef72f04487bf94d78"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QwODoyNzo0MlrOHdoO9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QwODoyNzo0MlrOHdoO9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDgyOTk0Mg==", "bodyText": "I would have inverted those two lines as orThrow is used after the comment and though one may not really understand where does it comes from", "url": "https://github.com/reactor/reactor-core/pull/2414#discussion_r500829942", "createdAt": "2020-10-07T08:27:42Z", "author": {"login": "aneveu"}, "path": "docs/asciidoc/advancedFeatures.adoc", "diffHunk": "@@ -193,21 +193,21 @@ Compare the first example to the second example, shown in the following code:\n ====\n [source,java]\n ----\n-Sink<String> hotSource = Sinks.many().multicast().onBackpressureError();\n+Sinks.Many<String> hotSource = Sinks.many().unsafe().multicast().directBestEffort();\n \n Flux<String> hotFlux = hotSource.asFlux().map(String::toUpperCase);\n \n-\n hotFlux.subscribe(d -> System.out.println(\"Subscriber 1 to Hot Source: \"+d));\n \n-hotSource.next(\"blue\")\n-         .next(\"green\");\n+hotSource.emitNext(\"blue\", FAIL_FAST);\n+//note: orThrow is an alternative to emitNext+Sinks.EmitFailureHandler.FAIL_FAST above, suitable for tests\n+hotSource.tryEmitNext(\"green\").orThrow();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ab517e7d7312eaf630b7dd8ef72f04487bf94d78"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzNjUxOTg2", "url": "https://github.com/reactor/reactor-core/pull/2414#pullrequestreview-503651986", "createdAt": "2020-10-07T08:41:45Z", "commit": {"oid": "ab517e7d7312eaf630b7dd8ef72f04487bf94d78"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a73fb828be1b3486484d074f66d2ecd5e1cd0491", "author": {"user": {"login": "simonbasle", "name": "Simon Basl\u00e9"}}, "url": "https://github.com/reactor/reactor-core/commit/a73fb828be1b3486484d074f66d2ecd5e1cd0491", "committedDate": "2020-10-07T09:25:41Z", "message": "[doc] Polish Sinks doc accounting for RC1 and RC2 latest changes (#2414)\n\nCo-authored-by: Sergei Egorov <segorov@pivotal.io>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e74961a64b986fc6d9a1b6caa8627608c806017", "author": {"user": {"login": "simonbasle", "name": "Simon Basl\u00e9"}}, "url": "https://github.com/reactor/reactor-core/commit/7e74961a64b986fc6d9a1b6caa8627608c806017", "committedDate": "2020-10-07T09:25:45Z", "message": "[doc] Polish metrics.adoc: fix callout\n\nReviewed-in: #2414"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ab517e7d7312eaf630b7dd8ef72f04487bf94d78", "author": {"user": {"login": "simonbasle", "name": "Simon Basl\u00e9"}}, "url": "https://github.com/reactor/reactor-core/commit/ab517e7d7312eaf630b7dd8ef72f04487bf94d78", "committedDate": "2020-10-06T10:53:24Z", "message": "improve refguide description of sinks, add directBestEffort/directAllOrNothing"}, "afterCommit": {"oid": "7e74961a64b986fc6d9a1b6caa8627608c806017", "author": {"user": {"login": "simonbasle", "name": "Simon Basl\u00e9"}}, "url": "https://github.com/reactor/reactor-core/commit/7e74961a64b986fc6d9a1b6caa8627608c806017", "committedDate": "2020-10-07T09:25:45Z", "message": "[doc] Polish metrics.adoc: fix callout\n\nReviewed-in: #2414"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzNjk0MTUz", "url": "https://github.com/reactor/reactor-core/pull/2414#pullrequestreview-503694153", "createdAt": "2020-10-07T09:31:31Z", "commit": {"oid": "7e74961a64b986fc6d9a1b6caa8627608c806017"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2632, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}