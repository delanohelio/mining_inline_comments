{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA2Njc2MTAw", "number": 2450, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQxMjowNToyNFrOEvvexw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQxMjowNToyNFrOEvvexw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4NDk2NDU1OnYy", "diffSide": "RIGHT", "path": "reactor-core/src/main/java/reactor/core/publisher/FluxGroupBy.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQxMjowNToyNFrOHk48xg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQxMjoxODo1OVrOHk5cPQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODQ0Mzg0Ng==", "bodyText": "should isFirstRequest be volatile? it seems it is updated in two different places that could be run on different threads", "url": "https://github.com/reactor/reactor-core/pull/2450#discussion_r508443846", "createdAt": "2020-10-20T12:05:24Z", "author": {"login": "simonbasle"}, "path": "reactor-core/src/main/java/reactor/core/publisher/FluxGroupBy.java", "diffHunk": "@@ -751,7 +761,16 @@ void tryReplenish() {\n \t\t\t\tproduced = 0;\n \t\t\t\tGroupByMain<?, K, V> main = parent;\n \t\t\t\tif (main != null) {\n-\t\t\t\t\tmain.s.request(p);\n+\t\t\t\t\tif (this.isFirstRequest) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c40e3598ff07c12d7d1a0311e386b8aff5526644"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODQ1MTkwMQ==", "bodyText": "should isFirstRequest be volatile? it seems it is updated in two different places that could be run on different threads\n\nIt should not be volatile since it is done in 2 different path. One within drain Regular, another if there is fusi\u00f3n.\nThat said, there is no contention on modifying this field", "url": "https://github.com/reactor/reactor-core/pull/2450#discussion_r508451901", "createdAt": "2020-10-20T12:18:59Z", "author": {"login": "OlegDokuka"}, "path": "reactor-core/src/main/java/reactor/core/publisher/FluxGroupBy.java", "diffHunk": "@@ -751,7 +761,16 @@ void tryReplenish() {\n \t\t\t\tproduced = 0;\n \t\t\t\tGroupByMain<?, K, V> main = parent;\n \t\t\t\tif (main != null) {\n-\t\t\t\t\tmain.s.request(p);\n+\t\t\t\t\tif (this.isFirstRequest) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODQ0Mzg0Ng=="}, "originalCommit": {"oid": "c40e3598ff07c12d7d1a0311e386b8aff5526644"}, "originalPosition": 31}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 811, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}