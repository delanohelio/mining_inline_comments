{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ4MzUzODQ3", "number": 2266, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QxNjoxNzo0N1rOEN5Adg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQwODoyNDowMFrOEPBkxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzMDAwOTUwOnYy", "diffSide": "RIGHT", "path": "reactor-core/src/test/java/reactor/core/publisher/FluxTimeoutTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QxNjoxNzo0N1rOGwv2Mw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QxNjoxNzo0N1rOGwv2Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzc2ODc1NQ==", "bodyText": "could use a StepVerifier here to validate we go to the fallback all the time ?\nalso the reporter indicated that a low-millis timeout would sometimes trigger the issue too. maybe we can either add a test with ofMillis(1) or set a non-zero timeout for a percentage of the loops (eg. 10%) ?", "url": "https://github.com/reactor/reactor-core/pull/2266#discussion_r453768755", "createdAt": "2020-07-13T16:17:47Z", "author": {"login": "simonbasle"}, "path": "reactor-core/src/test/java/reactor/core/publisher/FluxTimeoutTest.java", "diffHunk": "@@ -399,4 +399,15 @@ public void timeoutNotDurationMessageSecondTimeout() {\n \n \t\tassertThat(generatorUsed.get()).as(\"generator used\").isTrue();\n \t}\n+\n+\t@Test\n+\tpublic void onSubscribeRace() {\n+\t\tfor (int i = 0; i < 10_000; i++) {\n+\t\t\tFlux.just(\"Hello\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1b3063d34d16e322f8c506199639c0b00e8048ee"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg0MTg5ODkzOnYy", "diffSide": "RIGHT", "path": "reactor-core/src/main/java/reactor/core/publisher/FluxTimeout.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQwODoyNDowMFrOGygWug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQwODoyNDowMFrOGygWug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTYxMjA5MA==", "bodyText": "let's order things logically, put firstTimeout before itemTimeout (and same in fields order above)", "url": "https://github.com/reactor/reactor-core/pull/2266#discussion_r455612090", "createdAt": "2020-07-16T08:24:00Z", "author": {"login": "simonbasle"}, "path": "reactor-core/src/main/java/reactor/core/publisher/FluxTimeout.java", "diffHunk": "@@ -134,11 +122,12 @@ static String addNameToTimeoutDescription(Publisher<?> source,\n \t\tTimeoutMainSubscriber(CoreSubscriber<? super T> actual,\n \t\t\t\tFunction<? super T, ? extends Publisher<V>> itemTimeout,\n \t\t\t\t@Nullable Publisher<? extends T> other,\n-\t\t\t\t@Nullable String timeoutDescription) {\n-\t\t\tsuper(actual);\n+\t\t\t\t@Nullable String timeoutDescription, Publisher<?> firstTimeout) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9a759136684e6415e3b65fdaeffd266f107b1c53"}, "originalPosition": 36}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 890, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}