{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY0NjkzODQ1", "number": 2313, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxNzo0Mjo1NlrOEWTO7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxNzo0NDoyNFrOEWTQxw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxODE5MjQ2OnYy", "diffSide": "RIGHT", "path": "reactor-core/src/main/java/reactor/core/publisher/MonoMetricsFuseable.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxNzo0Mjo1NlrOG9iduA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxNzo0Mjo1NlrOG9iduA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzE4MDk4NA==", "bodyText": "this is not nearly enough, poll isn't managed and the ASYNC mode above isn't either", "url": "https://github.com/reactor/reactor-core/pull/2313#discussion_r467180984", "createdAt": "2020-08-07T17:42:56Z", "author": {"login": "simonbasle"}, "path": "reactor-core/src/main/java/reactor/core/publisher/MonoMetricsFuseable.java", "diffHunk": "@@ -119,7 +105,7 @@ public void onComplete() {\n \t\t\t\t\treturn;\n \t\t\t\t}\n \t\t\t\tdone = true;\n-\t\t\t\tFluxMetrics.recordOnComplete(sequenceName, commonTags, registry, subscribeToTerminateSample);\n+\t\t\t\tFluxMetrics.recordOnCompleteEmpty(sequenceName, commonTags, registry, subscribeToTerminateSample);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "836d94cb26dc2610dbd0bf199405a5e1b61d4a18"}, "originalPosition": 47}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxODE5NTk2OnYy", "diffSide": "RIGHT", "path": "reactor-core/src/withMicrometerTest/java/reactor/core/publisher/FluxMetricsFuseableTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxNzo0NDowMVrOG9ifvg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxNzo0NDowMVrOG9ifvg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzE4MTUwMg==", "bodyText": "we'd need to test no-fusion and ASYNC case too !", "url": "https://github.com/reactor/reactor-core/pull/2313#discussion_r467181502", "createdAt": "2020-08-07T17:44:01Z", "author": {"login": "simonbasle"}, "path": "reactor-core/src/withMicrometerTest/java/reactor/core/publisher/FluxMetricsFuseableTest.java", "diffHunk": "@@ -306,6 +300,55 @@ public void onNextTimerCountsFuseable() {\n \t\t\t\t.isEqualTo(126L);\n \t}\n \n+\t@Test\n+\tpublic void completeEmpty() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "836d94cb26dc2610dbd0bf199405a5e1b61d4a18"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxODE5NzE5OnYy", "diffSide": "RIGHT", "path": "reactor-core/src/withMicrometerTest/java/reactor/core/publisher/MonoMetricsFuseableTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxNzo0NDoyNFrOG9igdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxNzo0NDoyNFrOG9igdg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzE4MTY4Ng==", "bodyText": "we need to test ASYNC and SYNC fusion cases too!", "url": "https://github.com/reactor/reactor-core/pull/2313#discussion_r467181686", "createdAt": "2020-08-07T17:44:24Z", "author": {"login": "simonbasle"}, "path": "reactor-core/src/withMicrometerTest/java/reactor/core/publisher/MonoMetricsFuseableTest.java", "diffHunk": "@@ -308,6 +301,51 @@ public void noOnNextTimerFuseable() {\n \t\tassertThat(nextMeter).isNull();\n \t}\n \n+\t@Test", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "836d94cb26dc2610dbd0bf199405a5e1b61d4a18"}, "originalPosition": 70}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 917, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}