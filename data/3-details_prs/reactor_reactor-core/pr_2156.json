{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE4MDAzODQ2", "number": 2156, "title": "[build] Backport last relevant build changes from 3.3", "bodyText": "This includes:\n\nusing local buildSrc plugins rather than adhoc code blocks (detecting\nci, java conventions, custom version)\nsplitting out javadoc/asciidoc gradle files\nfixing the directory into which asciidocs are built\navoid building pdf reference guide locally (unless release)\nremove spring-io-plugin / platform\nbump asciidoctor.convert plugin\nmicrometer version defined in gradle.properties and pinned\nreactiveStream version defined in gradle.properties\njunit, awaitility, jol and testNg versions defined in properties\nrather than inline\nuse gradle enterprise plugin for buildScan\nremoved hamcrest-library dependency\nautomatic module names (see #1692)", "createdAt": "2020-05-14T13:38:44Z", "url": "https://github.com/reactor/reactor-core/pull/2156", "merged": true, "mergeCommit": {"oid": "9a5f9cc9a1c306e75f06cfbc25c876ca20881689"}, "closed": true, "closedAt": "2020-05-14T14:22:57Z", "author": {"login": "simonbasle"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABchNoXFAH2gAyNDE4MDAzODQ2OjJmMjRiY2E3YjBmNzE2ODg4ZGY2NzQ2NWQ2ZTQ2ZDBhMTNjOWYyMjE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABchOOHGAH2gAyNDE4MDAzODQ2OjAyMTExMThlODdlMDcwMDUwYWUxZjZlNzAwZGIwOTdjNjQyMDM4MDg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2f24bca7b0f716888df67465d6e46d0a13c9f221", "author": {"user": {"login": "simonbasle", "name": "Simon Basl\u00e9"}}, "url": "https://github.com/reactor/reactor-core/commit/2f24bca7b0f716888df67465d6e46d0a13c9f221", "committedDate": "2020-05-14T13:38:26Z", "message": "[build] Backport last relevant build changes from 3.3 (#2156)\n\nThis includes:\n - using local buildSrc plugins rather than adhoc code blocks (detecting\n ci, java conventions, custom version)\n - splitting out javadoc/asciidoc gradle files\n - fixing the directory into which asciidocs are built\n - avoid building pdf reference guide locally (unless release)\n - remove spring-io-plugin / platform\n - bump asciidoctor.convert plugin\n - micrometer version defined in gradle.properties and pinned\n - reactiveStream version defined in gradle.properties\n - junit, awaitility, jol and testNg versions defined in properties\n rather than inline\n - use gradle enterprise plugin for buildScan\n - removed hamcrest-library dependency\n - automatic module names"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a8ce7162c53b8db04bfa43c27d70a0e69301bbc6", "author": {"user": {"login": "simonbasle", "name": "Simon Basl\u00e9"}}, "url": "https://github.com/reactor/reactor-core/commit/a8ce7162c53b8db04bfa43c27d70a0e69301bbc6", "committedDate": "2020-05-14T13:31:05Z", "message": "[polish] Consistently use tabs for gradle file indentation\n\nAlso use one testCompile instruction per line."}, "afterCommit": {"oid": "2bd073882dacd62f842c91677f302d11642aa67b", "author": {"user": {"login": "simonbasle", "name": "Simon Basl\u00e9"}}, "url": "https://github.com/reactor/reactor-core/commit/2bd073882dacd62f842c91677f302d11642aa67b", "committedDate": "2020-05-14T13:38:52Z", "message": "[polish] Consistently use tabs for gradle file indentation\n\nAlso use one testCompile instruction per line.\n\nReviewed-in: #2156"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExODE5MDcz", "url": "https://github.com/reactor/reactor-core/pull/2156#pullrequestreview-411819073", "createdAt": "2020-05-14T13:45:20Z", "commit": {"oid": "2bd073882dacd62f842c91677f302d11642aa67b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxMzo0NToyMFrOGVdAPg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxMzo0NToyMFrOGVdAPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTE0ODQ3OA==", "bodyText": "I'll fix that, spaces are used in the license template", "url": "https://github.com/reactor/reactor-core/pull/2156#discussion_r425148478", "createdAt": "2020-05-14T13:45:20Z", "author": {"login": "simonbasle"}, "path": "reactor-test/build.gradle", "diffHunk": "@@ -5,7 +5,7 @@\n  * you may not use this file except in compliance with the License.\n  * You may obtain a copy of the License at\n  *\n- *       https://www.apache.org/licenses/LICENSE-2.0\n+ *\t\t\t https://www.apache.org/licenses/LICENSE-2.0", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2bd073882dacd62f842c91677f302d11642aa67b"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2bd073882dacd62f842c91677f302d11642aa67b", "author": {"user": {"login": "simonbasle", "name": "Simon Basl\u00e9"}}, "url": "https://github.com/reactor/reactor-core/commit/2bd073882dacd62f842c91677f302d11642aa67b", "committedDate": "2020-05-14T13:38:52Z", "message": "[polish] Consistently use tabs for gradle file indentation\n\nAlso use one testCompile instruction per line.\n\nReviewed-in: #2156"}, "afterCommit": {"oid": "2f24bca7b0f716888df67465d6e46d0a13c9f221", "author": {"user": {"login": "simonbasle", "name": "Simon Basl\u00e9"}}, "url": "https://github.com/reactor/reactor-core/commit/2f24bca7b0f716888df67465d6e46d0a13c9f221", "committedDate": "2020-05-14T13:38:26Z", "message": "[build] Backport last relevant build changes from 3.3 (#2156)\n\nThis includes:\n - using local buildSrc plugins rather than adhoc code blocks (detecting\n ci, java conventions, custom version)\n - splitting out javadoc/asciidoc gradle files\n - fixing the directory into which asciidocs are built\n - avoid building pdf reference guide locally (unless release)\n - remove spring-io-plugin / platform\n - bump asciidoctor.convert plugin\n - micrometer version defined in gradle.properties and pinned\n - reactiveStream version defined in gradle.properties\n - junit, awaitility, jol and testNg versions defined in properties\n rather than inline\n - use gradle enterprise plugin for buildScan\n - removed hamcrest-library dependency\n - automatic module names"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExODI2NTQ4", "url": "https://github.com/reactor/reactor-core/pull/2156#pullrequestreview-411826548", "createdAt": "2020-05-14T13:52:56Z", "commit": {"oid": "2f24bca7b0f716888df67465d6e46d0a13c9f221"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxMzo1Mjo1NlrOGVdWLA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxMzo1Mjo1NlrOGVdWLA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTE1NDA5Mg==", "bodyText": "do we really need top-level shadow? I don't even think we shade anything in 3.2.x", "url": "https://github.com/reactor/reactor-core/pull/2156#discussion_r425154092", "createdAt": "2020-05-14T13:52:56Z", "author": {"login": "bsideup"}, "path": "build.gradle", "diffHunk": "@@ -13,92 +13,95 @@\n  * See the License for the specific language governing permissions and\n  * limitations under the License.\n  */\n-\n buildscript {\n+  //we define kotlin version for benefit of both core and test (see kotlin-gradle-plugin below)\n   ext.kotlinVersion = '1.3.71'\n   repositories {\n \tmaven { url \"https://repo.spring.io/plugins-release\" }\n   }\n   dependencies {\n-\tclasspath 'org.springframework.build.gradle:propdeps-plugin:0.0.7'\n-\tclasspath 'io.spring.gradle:spring-io-plugin:0.0.4.RELEASE'\n-\tclasspath 'com.github.jengelman.gradle.plugins:shadow:1.2.0'\n+\tclasspath 'org.springframework.build.gradle:propdeps-plugin:0.0.7' //still uses the old ways\n \tclasspath \"org.jetbrains.kotlin:kotlin-gradle-plugin:${kotlinVersion}\"\n   }\n }\n \n \n plugins {\n-\tid 'org.asciidoctor.convert' version '1.5.9.2'\n+\tid \"com.github.johnrengelman.shadow\" version \"4.0.2\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2f24bca7b0f716888df67465d6e46d0a13c9f221"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExODI4Nzcx", "url": "https://github.com/reactor/reactor-core/pull/2156#pullrequestreview-411828771", "createdAt": "2020-05-14T13:55:07Z", "commit": {"oid": "2f24bca7b0f716888df67465d6e46d0a13c9f221"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0211118e87e070050ae1f6e700db097c64203808", "author": {"user": {"login": "simonbasle", "name": "Simon Basl\u00e9"}}, "url": "https://github.com/reactor/reactor-core/commit/0211118e87e070050ae1f6e700db097c64203808", "committedDate": "2020-05-14T14:19:40Z", "message": "remove shadow plugin (will need it back in 3.3.x)"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2977, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}