{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA2MDU3OTcy", "number": 975, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxMDowOTo1MVrOD0KX2g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxMDoxMzoxMlrOD0Kdlg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2MDIyNDkwOnYy", "diffSide": "RIGHT", "path": "query/javascript/src/Query.ts", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxMDowOTo1MVrOGI9yFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxMDowOTo1MVrOGI9yFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA1NDAzOA==", "bodyText": "Remove commented-out code", "url": "https://github.com/cucumber/common/pull/975#discussion_r412054038", "createdAt": "2020-04-21T10:09:51Z", "author": {"login": "aslakhellesoy"}, "path": "query/javascript/src/Query.ts", "diffHunk": "@@ -157,4 +167,51 @@ export default class Query {\n     | undefined {\n     return this.stepMatchArgumentsListsByPickleStepId.get(pickleStepId)\n   }\n+\n+  public getBeforeHookSteps(\n+    pickleId: string\n+  ): ReadonlyArray<messages.TestCase.ITestStep> {\n+    const testCase = this.testCaseByPickleId.get(pickleId)\n+\n+    // const hookSteps = testCase.testSteps.filter((step) => step.hookId)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6383897958de8e18b927c8fd7b5ab10035199c60"}, "originalPosition": 43}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2MDIyNjUxOnYy", "diffSide": "RIGHT", "path": "query/javascript/src/Query.ts", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxMDoxMDoxN1rOGI9zGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxMDoxMDoxN1rOGI9zGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA1NDI5OQ==", "bodyText": "Why is this declared outside the loop?", "url": "https://github.com/cucumber/common/pull/975#discussion_r412054299", "createdAt": "2020-04-21T10:10:17Z", "author": {"login": "aslakhellesoy"}, "path": "query/javascript/src/Query.ts", "diffHunk": "@@ -157,4 +167,51 @@ export default class Query {\n     | undefined {\n     return this.stepMatchArgumentsListsByPickleStepId.get(pickleStepId)\n   }\n+\n+  public getBeforeHookSteps(\n+    pickleId: string\n+  ): ReadonlyArray<messages.TestCase.ITestStep> {\n+    const testCase = this.testCaseByPickleId.get(pickleId)\n+\n+    // const hookSteps = testCase.testSteps.filter((step) => step.hookId)\n+    const hookSteps: messages.TestCase.ITestStep[] = []\n+    let pickleStepFound = false", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6383897958de8e18b927c8fd7b5ab10035199c60"}, "originalPosition": 45}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2MDIzMjM4OnYy", "diffSide": "RIGHT", "path": "query/javascript/src/Query.ts", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxMDoxMTozNVrOGI92kw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxMDoxMTozNVrOGI92kw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA1NTE4Nw==", "bodyText": "Can you use Array#filter to build hookSteps instead?", "url": "https://github.com/cucumber/common/pull/975#discussion_r412055187", "createdAt": "2020-04-21T10:11:35Z", "author": {"login": "aslakhellesoy"}, "path": "query/javascript/src/Query.ts", "diffHunk": "@@ -157,4 +167,51 @@ export default class Query {\n     | undefined {\n     return this.stepMatchArgumentsListsByPickleStepId.get(pickleStepId)\n   }\n+\n+  public getBeforeHookSteps(\n+    pickleId: string\n+  ): ReadonlyArray<messages.TestCase.ITestStep> {\n+    const testCase = this.testCaseByPickleId.get(pickleId)\n+\n+    // const hookSteps = testCase.testSteps.filter((step) => step.hookId)\n+    const hookSteps: messages.TestCase.ITestStep[] = []\n+    let pickleStepFound = false\n+\n+    for (const step of testCase.testSteps) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6383897958de8e18b927c8fd7b5ab10035199c60"}, "originalPosition": 47}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2MDIzNzQ2OnYy", "diffSide": "RIGHT", "path": "query/javascript/src/Query.ts", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxMDoxMjo0OFrOGI95hw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxMDoxMjo0OFrOGI95hw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA1NTk0Mw==", "bodyText": "Can you extract the duplicated code between getAfterHookSteps and getBeforeHookSteps to a separate function?", "url": "https://github.com/cucumber/common/pull/975#discussion_r412055943", "createdAt": "2020-04-21T10:12:48Z", "author": {"login": "aslakhellesoy"}, "path": "query/javascript/src/Query.ts", "diffHunk": "@@ -157,4 +167,51 @@ export default class Query {\n     | undefined {\n     return this.stepMatchArgumentsListsByPickleStepId.get(pickleStepId)\n   }\n+\n+  public getBeforeHookSteps(\n+    pickleId: string\n+  ): ReadonlyArray<messages.TestCase.ITestStep> {\n+    const testCase = this.testCaseByPickleId.get(pickleId)\n+\n+    // const hookSteps = testCase.testSteps.filter((step) => step.hookId)\n+    const hookSteps: messages.TestCase.ITestStep[] = []\n+    let pickleStepFound = false\n+\n+    for (const step of testCase.testSteps) {\n+      if (!step.hookId) {\n+        pickleStepFound = true\n+      }\n+      if (step.hookId && !pickleStepFound) {\n+        hookSteps.push(step)\n+      }\n+    }\n+\n+    return hookSteps\n+  }\n+\n+  public getAfterHookSteps(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6383897958de8e18b927c8fd7b5ab10035199c60"}, "originalPosition": 59}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2MDIzOTU4OnYy", "diffSide": "RIGHT", "path": "query/javascript/src/Query.ts", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxMDoxMzoxMlrOGI96uQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxMDoxMzoxMlrOGI96uQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA1NjI0OQ==", "bodyText": "Intermediate variable not needed - just return the result", "url": "https://github.com/cucumber/common/pull/975#discussion_r412056249", "createdAt": "2020-04-21T10:13:12Z", "author": {"login": "aslakhellesoy"}, "path": "query/javascript/src/Query.ts", "diffHunk": "@@ -157,4 +167,51 @@ export default class Query {\n     | undefined {\n     return this.stepMatchArgumentsListsByPickleStepId.get(pickleStepId)\n   }\n+\n+  public getBeforeHookSteps(\n+    pickleId: string\n+  ): ReadonlyArray<messages.TestCase.ITestStep> {\n+    const testCase = this.testCaseByPickleId.get(pickleId)\n+\n+    // const hookSteps = testCase.testSteps.filter((step) => step.hookId)\n+    const hookSteps: messages.TestCase.ITestStep[] = []\n+    let pickleStepFound = false\n+\n+    for (const step of testCase.testSteps) {\n+      if (!step.hookId) {\n+        pickleStepFound = true\n+      }\n+      if (step.hookId && !pickleStepFound) {\n+        hookSteps.push(step)\n+      }\n+    }\n+\n+    return hookSteps\n+  }\n+\n+  public getAfterHookSteps(\n+    pickleId: string\n+  ): ReadonlyArray<messages.TestCase.ITestStep> {\n+    const testCase = this.testCaseByPickleId.get(pickleId)\n+\n+    const hookSteps: messages.TestCase.ITestStep[] = []\n+    let pickleStepFound = false\n+\n+    for (const step of testCase.testSteps) {\n+      if (!step.hookId) {\n+        pickleStepFound = true\n+      }\n+      if (step.hookId && pickleStepFound) {\n+        hookSteps.push(step)\n+      }\n+    }\n+\n+    return hookSteps\n+  }\n+\n+  public getTestStepResults(testStepId: string): messages.ITestStepResult[] {\n+    const testStepResults = this.testStepResultsbyTestStepId.get(testStepId)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6383897958de8e18b927c8fd7b5ab10035199c60"}, "originalPosition": 80}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 743, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}