{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc5MjIxNTYy", "number": 1171, "title": "Remove golang gox build dependency", "bodyText": "Summary\nRemove Gox build dependency and enumerated go build targets within Makefile\nDetails\nChanges are applied to .templates/go/default.mk\nEnumerated a set of build targets compatible with golang versions 1.13-1.15\nadded a minimum supported version warning if someone attempts a cross compilation on an earlier build of golang\nMotivation and Context\nThis fixes issue #1170 &  #1163 , which cause the build to fail on golang 1.15 or higher. Additionally mitigating additional bugs present within the gox toolchain.\nAs cross compilation post golang 1.5 is simplified to a command line option, the use of a separate dependency isn't neccesary.\nHow Has This Been Tested?\nTested locally - golang 1.15 Darwin/amd64 -- no golang build failures\ntested with:\nmake build with make docker-run (golang 1.13)\nno go build failures\nTypes of changes\n\n\n Bug fix (non-breaking change which fixes an issue).\n New feature (non-breaking change which adds functionality).\n Breaking change (fix or feature that would cause existing functionality to not work as expected).\n\nChecklist:\n\n\n\n The change has been ported to Java.\n The change has been ported to Ruby.\n The change has been ported to JavaScript.\n The change has been ported to Go.\n The change has been ported to .NET.\n I've added tests for my code.\n My change requires a change to the documentation.\n I have updated the documentation accordingly.\n I have updated the CHANGELOG accordingly.", "createdAt": "2020-09-04T03:02:57Z", "url": "https://github.com/cucumber/common/pull/1171", "merged": true, "mergeCommit": {"oid": "6073534129ec5b696385526ad21b5b72da0fd037"}, "closed": true, "closedAt": "2020-10-02T10:00:02Z", "author": {"login": "dmboyd"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdFbxDEAH2gAyNDc5MjIxNTYyOmQ2NjE0MzYzNjEwMzAzZWZhOTg0ZjhlNmYwMTc1Y2ZiODMzMjFlMjc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdOjA6dgH2gAyNDc5MjIxNTYyOjFhNzQxMTA3NTA3MDY2ZTAzY2JmMTYyYmI5NTEzZjM2YzQ4ZDM3MzA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d6614363610303efa984f8e6f0175cfb83321e27", "author": {"user": {"login": "dmboyd", "name": "David Boyd"}}, "url": "https://github.com/cucumber/common/commit/d6614363610303efa984f8e6f0175cfb83321e27", "committedDate": "2020-09-04T02:27:52Z", "message": "Remove gox build dependency\n\nRemove Gox build dependency from .templates/go/default.mk makefile\nEnumerated a set of build targets compatible with golang versions 1.13-1.15\nadded a minimum supported version warning"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "945d0f87ee7b52fe15c38d94bc72073e72ebb825", "author": {"user": {"login": "dmboyd", "name": "David Boyd"}}, "url": "https://github.com/cucumber/common/commit/945d0f87ee7b52fe15c38d94bc72073e72ebb825", "committedDate": "2020-09-04T17:23:02Z", "message": "Merge branch 'master' into golang-makefile"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8be9a59c6425d9d3b22a02e06ae58ebc0a3d3b36", "author": {"user": {"login": "aslakhellesoy", "name": "Aslak Helles\u00f8y"}}, "url": "https://github.com/cucumber/common/commit/8be9a59c6425d9d3b22a02e06ae58ebc0a3d3b36", "committedDate": "2020-09-07T11:24:52Z", "message": "Merge branch 'master' into golang-makefile"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3MjU3OTM5", "url": "https://github.com/cucumber/common/pull/1171#pullrequestreview-487257939", "createdAt": "2020-09-12T21:35:14Z", "commit": {"oid": "8be9a59c6425d9d3b22a02e06ae58ebc0a3d3b36"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMlQyMTozNToxNFrOHQ3pmw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMlQyMTozNToxNFrOHQ3pmw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzQ1MTAzNQ==", "bodyText": "Let's rename GOX_LDFLAGS to LDFLAGS now that we're no longer using gox.", "url": "https://github.com/cucumber/common/pull/1171#discussion_r487451035", "createdAt": "2020-09-12T21:35:14Z", "author": {"login": "aslakhellesoy"}, "path": ".templates/go/default.mk", "diffHunk": "@@ -30,23 +42,43 @@ endif\n .deps:\n \ttouch $@\n \n-dist: $(EXE)\n+dist: $(EXE) \n ifndef NO_UPX_COMPRESSION\n \tmake .dist-compressed\n endif\n \ttouch $@\n \n-$(EXE): .deps $(GO_SOURCE_FILES)\n-\tmkdir -p dist\n+# Define build $(EXE) target differentially depending on NO_CROSS_COMPILE flag\n ifndef NO_CROSS_COMPILE\n-\t# Cross-compile executable for many platforms\n-\tgo get github.com/aslakhellesoy/gox\n-\tgox -buildmode=exe -ldflags $(GOX_LDFLAGS) -output \"dist/$(EXE_BASE_NAME)-{{.OS}}-{{.Arch}}\" -rebuild ./cmd\n+$(EXE): $(PLATFORMS)\n+\t# Rename windows compilations to include .exe extension\n+\trm -f dist/*windows*.exe\n+\tfor f in dist/*windows*; do mv -f $${f} $${f}.exe; done\n else\n+$(EXE): .deps $(GO_SOURCE_FILES)\n \t# Compile executable for the local platform only\n \tgo build -ldflags $(GOX_LDFLAGS) -o $@ ./cmd\n endif\n \n+$(PLATFORMS): .deps $(GO_SOURCE_FILES) supported-go-version\n+\tmkdir -p dist\n+\t# Cross-compile executable for many platforms\n+\techo \"Building $(X-OS)-$(X-ARCH)\"\n+\tGOOS=$(X-OS) GOARCH=$(X-ARCH) go build -buildmode=exe -ldflags $(GOX_LDFLAGS) -o \"dist/$(EXE_BASE_NAME)-$(X-OS)-$(X-ARCH)\" -a ./cmd", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8be9a59c6425d9d3b22a02e06ae58ebc0a3d3b36"}, "originalPosition": 55}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ea603a7ebfea6ec736cea3ffeb0ebbb232a10f9", "author": {"user": {"login": "aslakhellesoy", "name": "Aslak Helles\u00f8y"}}, "url": "https://github.com/cucumber/common/commit/9ea603a7ebfea6ec736cea3ffeb0ebbb232a10f9", "committedDate": "2020-09-12T21:37:30Z", "message": "Merge branch 'master' into golang-makefile"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9466c848d199472080852e99cfe42c799f113fd0", "author": {"user": {"login": "aslakhellesoy", "name": "Aslak Helles\u00f8y"}}, "url": "https://github.com/cucumber/common/commit/9466c848d199472080852e99cfe42c799f113fd0", "committedDate": "2020-09-13T19:46:53Z", "message": "Merge branch 'master' into golang-makefile"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3MzM0ODQ1", "url": "https://github.com/cucumber/common/pull/1171#pullrequestreview-487334845", "createdAt": "2020-09-13T19:48:40Z", "commit": {"oid": "9466c848d199472080852e99cfe42c799f113fd0"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a1872d27e8394ef1b76ad7f5fbdf5588060edbed", "author": {"user": {"login": "dmboyd", "name": "David Boyd"}}, "url": "https://github.com/cucumber/common/commit/a1872d27e8394ef1b76ad7f5fbdf5588060edbed", "committedDate": "2020-09-18T02:00:46Z", "message": "Merge branch 'master' into golang-makefile"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9dfaa1a3e789defa946ffc1e412432c16388ef6d", "author": {"user": {"login": "dmboyd", "name": "David Boyd"}}, "url": "https://github.com/cucumber/common/commit/9dfaa1a3e789defa946ffc1e412432c16388ef6d", "committedDate": "2020-09-18T02:06:22Z", "message": "Update default.mk\n\nrename GOX_LDFLAGS to LDFLAGS now that we're no longer using gox"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f0f0f1df367ac8634e052b907d49e8e43277915b", "author": {"user": {"login": "dmboyd", "name": "David Boyd"}}, "url": "https://github.com/cucumber/common/commit/f0f0f1df367ac8634e052b907d49e8e43277915b", "committedDate": "2020-09-18T02:18:56Z", "message": "remove GOX_LD_FLAGS reference\n\nRemove gox reference from all go makefiles"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6a72c7c7a067e85c8e49432ac47471af07c162b2", "author": {"user": {"login": "dmboyd", "name": "David Boyd"}}, "url": "https://github.com/cucumber/common/commit/6a72c7c7a067e85c8e49432ac47471af07c162b2", "committedDate": "2020-09-18T02:44:03Z", "message": "Remove References to gox within go.mod\n\nRemove all references to gox within go.mod & removed pretty-formatter default.mk (orphan file) not propagated from .template makefile."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89582967fb73dcc1395c40329ef4fdcf7991f62a", "author": {"user": {"login": "aslakhellesoy", "name": "Aslak Helles\u00f8y"}}, "url": "https://github.com/cucumber/common/commit/89582967fb73dcc1395c40329ef4fdcf7991f62a", "committedDate": "2020-09-23T13:43:52Z", "message": "Merge branch 'master' into golang-makefile"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fdaea6a579dc3d8e6671b62af01d26688f9fa351", "author": {"user": {"login": "aslakhellesoy", "name": "Aslak Helles\u00f8y"}}, "url": "https://github.com/cucumber/common/commit/fdaea6a579dc3d8e6671b62af01d26688f9fa351", "committedDate": "2020-09-29T11:00:03Z", "message": "Merge branch 'master' into golang-makefile"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "716e8a984e1eb86250ff1c0a892157406f8b8a6e", "author": {"user": {"login": "aslakhellesoy", "name": "Aslak Helles\u00f8y"}}, "url": "https://github.com/cucumber/common/commit/716e8a984e1eb86250ff1c0a892157406f8b8a6e", "committedDate": "2020-10-01T10:47:52Z", "message": "Merge branch 'master' into golang-makefile"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxMDA3NjA4", "url": "https://github.com/cucumber/common/pull/1171#pullrequestreview-501007608", "createdAt": "2020-10-02T09:59:46Z", "commit": {"oid": "716e8a984e1eb86250ff1c0a892157406f8b8a6e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1a741107507066e03cbf162bb9513f36c48d3730", "author": {"user": {"login": "aslakhellesoy", "name": "Aslak Helles\u00f8y"}}, "url": "https://github.com/cucumber/common/commit/1a741107507066e03cbf162bb9513f36c48d3730", "committedDate": "2020-10-02T09:59:51Z", "message": "Merge branch 'master' into golang-makefile"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3018, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}