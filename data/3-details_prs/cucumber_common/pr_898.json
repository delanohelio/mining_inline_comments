{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc0Mzk1MTcw", "number": 898, "title": "JSON-formatter: use CCK features as acceptance tests", "bodyText": "Summary\nWe now have nice edge cases in compatibility kit, so let's use them for validating the json-formatter.\nThere's still a few issues there:\n\n generating the all.json (or .ndjson) file will be difficult, as the step 'a step throws an exception' is defined in both stack-traces_steps.rb(or the TypeScript equivalent) and hooks.rb. That's not a problem when loading individual step definitions but proves to be problematic to run everything at once.\n I had to disable the Rules.feature example, as the cucumber-ruby version we use to generate the golden JSON does not support the Rule keyword.\n\nDetails\n\nMotivation and Context\n\n\nHow Has This Been Tested?\n\n\n\n\nScreenshots (if appropriate):\nTypes of changes\n\n\n Bug fix (non-breaking change which fixes an issue).\n New feature (non-breaking change which adds functionality).\n Breaking change (fix or feature that would cause existing functionality to not work as expected).\n\nChecklist:\n\n\n\n The change has been ported to Java.\n The change has been ported to Ruby.\n The change has been ported to JavaScript.\n The change has been ported to Go.\n The change has been ported to .NET.\n I've added tests for my code.\n My change requires a change to the documentation.\n I have updated the documentation accordingly.\n I have updated the CHANGELOG accordingly.", "createdAt": "2020-02-12T16:11:39Z", "url": "https://github.com/cucumber/common/pull/898", "merged": true, "mergeCommit": {"oid": "348794dcde4a09134adb0fc36e09faa19a7ef552"}, "closed": true, "closedAt": "2020-02-21T16:28:59Z", "author": {"login": "vincent-psarga"}, "timelineItems": {"totalCount": 30, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcDm66qAH2gAyMzc0Mzk1MTcwOmNiZDNkMmE0OWQ0NDY2ZWUzNDNkZWMzMTQ2MTk2YWYwMzk3MTZhMjQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcGiCC3AH2gAyMzc0Mzk1MTcwOjUwMDVmNzAyMTBlOGFhNTM4MThjYTJhNzVjOTllZjI0NmZmMmI2YzI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "cbd3d2a49d4466ee343dec3146196af039716a24", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/cbd3d2a49d4466ee343dec3146196af039716a24", "committedDate": "2020-02-12T14:08:36Z", "message": "Move cucumber-ruby/cck to cucumber/compatibility-kit/ruby"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f2fc6e71605864e90bcf8df639a313768cfbe381", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/f2fc6e71605864e90bcf8df639a313768cfbe381", "committedDate": "2020-02-12T15:16:07Z", "message": "json-formatter: use CCK/ruby features to produce golden jsons"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c93b95612b55934a6b5562b4a1c9fbed52d64f23", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/c93b95612b55934a6b5562b4a1c9fbed52d64f23", "committedDate": "2020-02-12T15:54:40Z", "message": "json-formatter: use CCK/javascript features to produce ndjsons"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d8b86f6a9626b7e757bb1336c07b40cb87309ea4", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/d8b86f6a9626b7e757bb1336c07b40cb87309ea4", "committedDate": "2020-02-12T16:02:53Z", "message": "json-formatter/ruby: correctly load step definitions\nDisable all.json generation, needs discussions on how to handle that."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3e31ab23380f3a1936590f0e2589d60b314b174e", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/3e31ab23380f3a1936590f0e2589d60b314b174e", "committedDate": "2020-02-12T16:05:23Z", "message": "json-formatter/go: use jsons generated from CCK for acceptance tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bdeb891f1b9c0196c8b813b2ac273271102abca0", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/bdeb891f1b9c0196c8b813b2ac273271102abca0", "committedDate": "2020-02-12T16:16:24Z", "message": "json-formatter/ruby: ensure directory is created before pasting the step definition file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5725f46e90f1fe3a1c0a33a59c27ca941a813e6", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/d5725f46e90f1fe3a1c0a33a59c27ca941a813e6", "committedDate": "2020-02-12T16:26:26Z", "message": "Forgot about rules/rules.features in previous commit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "40b76286c0b8564b372a9d90bf408ae93d70570b", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/40b76286c0b8564b372a9d90bf408ae93d70570b", "committedDate": "2020-02-12T16:44:23Z", "message": "CI: persist correct directory for json-formatter/javascript"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77e87273de99efc80c8037cef7f1a1075d9bef69", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/77e87273de99efc80c8037cef7f1a1075d9bef69", "committedDate": "2020-02-13T09:43:41Z", "message": "compatibility-kit/ruby: add forgotten scripts\nfix typo in Makefile"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "23b8942fcb0b314caae001ddadb6c18ddb6f1c0b", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/23b8942fcb0b314caae001ddadb6c18ddb6f1c0b", "committedDate": "2020-02-13T11:09:22Z", "message": "Update examples-tables.ndjson"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d9b3299c5a820d71fb101a53bcf934753046b7ae", "author": {"user": {"login": "aslakhellesoy", "name": "Aslak Helles\u00f8y"}}, "url": "https://github.com/cucumber/common/commit/d9b3299c5a820d71fb101a53bcf934753046b7ae", "committedDate": "2020-02-13T13:52:17Z", "message": "Merge branch 'master' into ruby-cck-in-monorepo"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU4MjMzMTcy", "url": "https://github.com/cucumber/common/pull/898#pullrequestreview-358233172", "createdAt": "2020-02-13T13:55:47Z", "commit": {"oid": "23b8942fcb0b314caae001ddadb6c18ddb6f1c0b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxMzo1NTo0OFrOFpUoHw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxMzo1NTo0OFrOFpUoHw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODg3Mzg4Nw==", "bodyText": "When we create a new language module I think we should use the .template (add an .rsync file). If you need more specific .gitignore, add them in sub folders.", "url": "https://github.com/cucumber/common/pull/898#discussion_r378873887", "createdAt": "2020-02-13T13:55:48Z", "author": {"login": "aslakhellesoy"}, "path": "compatibility-kit/ruby/.gitignore", "diffHunk": "@@ -0,0 +1,6 @@\n+*.feature", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "23b8942fcb0b314caae001ddadb6c18ddb6f1c0b"}, "originalPosition": 1}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "76157b57fbc49b761dff8fd6854663911f08666d", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/76157b57fbc49b761dff8fd6854663911f08666d", "committedDate": "2020-02-14T15:32:48Z", "message": "json-formatter/ruby: no need for all.json + add missing attachment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a86a6bfff37c1fbd7765493ea91a69396c25c936", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/a86a6bfff37c1fbd7765493ea91a69396c25c936", "committedDate": "2020-02-14T15:32:48Z", "message": "json-formatter/javascript: add missing attachment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "83e7281310818dc2a8d8eeb3e75cef1570c4fcb0", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/83e7281310818dc2a8d8eeb3e75cef1570c4fcb0", "committedDate": "2020-02-14T15:32:48Z", "message": "Use smaller images to test output (see issue #901)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d35ecc8b7c02e2690b8d50abbb0b8d6a2e04a9d9", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/d35ecc8b7c02e2690b8d50abbb0b8d6a2e04a9d9", "committedDate": "2020-02-14T15:32:48Z", "message": "Awful monkey patch to be able to attach a bute stream for Cucumber 3 + json reporter\nThis should be fixed and backported for a new cucumber 3 release."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "121697f938e35760fb7755f626e2eb23bde5f1a7", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/121697f938e35760fb7755f626e2eb23bde5f1a7", "committedDate": "2020-02-17T09:07:38Z", "message": "Merge branch 'master' into ruby-cck-in-monorepo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6bbce0a686b5f29cbc6d327950dbdb0ffdba786c", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/6bbce0a686b5f29cbc6d327950dbdb0ffdba786c", "committedDate": "2020-02-17T13:31:08Z", "message": "Reuse original images as attachments size issue has been fixed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "be24bfa4c982255b9cd1fca1416c5966bdb5aa4b", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/be24bfa4c982255b9cd1fca1416c5966bdb5aa4b", "committedDate": "2020-02-17T15:29:27Z", "message": "Implement step raising an UndefinedParameterType error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c5abfaf607a9fc46e578e1ad78dc2bfd3afd412d", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/c5abfaf607a9fc46e578e1ad78dc2bfd3afd412d", "committedDate": "2020-02-18T09:39:19Z", "message": "Split features/parameter-type into two features:\n - \"parameter-types\" showing the registry of a new parameter type\n - \"unkown-parameter-type showing that cucumber does not fail when trying to register an unknown parameter type.\n\nThis was split as we also use the features in the CCK to validate the JSON formatter, which uses the previous release of cucumber\nwhich will simply fail with this example."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1056a037400a62c8eff552b3e3bbd52be61a0093", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/1056a037400a62c8eff552b3e3bbd52be61a0093", "committedDate": "2020-02-18T09:39:29Z", "message": "Also split features/parameter-types for compatibility-kit/ruby"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1fa65a2e6d73b5f83078e49c54818d032623bce3", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/1fa65a2e6d73b5f83078e49c54818d032623bce3", "committedDate": "2020-02-18T09:47:46Z", "message": "Exclude generation of rules.json and unknown-parameter-type.json as this is not supported by cucumber-ruby 3"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "47763cd9bbdac08b0502fd5d38da787a9371c31c", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/47763cd9bbdac08b0502fd5d38da787a9371c31c", "committedDate": "2020-02-18T10:27:50Z", "message": "Merge branch 'master' into ruby-cck-in-monorepo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "94aa233c83ccdf43da29060e1960bf43f8a7ba7d", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/94aa233c83ccdf43da29060e1960bf43f8a7ba7d", "committedDate": "2020-02-18T10:38:09Z", "message": "Use templates for gitignore, default.mk etc."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1cf041c6c353a9c02498f399e9dd7b897b55adbb", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/1cf041c6c353a9c02498f399e9dd7b897b55adbb", "committedDate": "2020-02-18T13:11:02Z", "message": "Forgot to regenerate NDJSON files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cbe04ca50c2f755314c519f650b5dadd6ca364c0", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/cbe04ca50c2f755314c519f650b5dadd6ca364c0", "committedDate": "2020-02-18T13:47:58Z", "message": "Don't use branches fire-events anymore"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae4cd00c1758a10b27a8c6f676ff5a569b75c2f3", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/ae4cd00c1758a10b27a8c6f676ff5a569b75c2f3", "committedDate": "2020-02-21T13:08:39Z", "message": "Update step definitions in compatibility-kit/ruby to avoid deprecation warnings."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dd716f932e0eb2860ae54df1126e932cbdb8fef6", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/dd716f932e0eb2860ae54df1126e932cbdb8fef6", "committedDate": "2020-02-21T13:46:44Z", "message": "Merge branch 'master' into ruby-cck-in-monorepo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "64c989c45c99b082efbffb9e6e95b97bc99b46d8", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/64c989c45c99b082efbffb9e6e95b97bc99b46d8", "committedDate": "2020-02-21T14:02:24Z", "message": "Compatibility kit: Add example for using `log` in step definitions\nFix Makefile for cck/ruby"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5005f70210e8aa53818ca2a75c99ef246ff2b6c2", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/5005f70210e8aa53818ca2a75c99ef246ff2b6c2", "committedDate": "2020-02-21T16:08:38Z", "message": "Forgot to ignore spec files in cck/ruby"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3072, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}