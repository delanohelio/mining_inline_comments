{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc5MjIxNTYy", "number": 1171, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMlQyMTozNToxNFrOEiz8CA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMlQyMTozNToxNFrOEiz8CA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0OTM3OTkyOnYy", "diffSide": "RIGHT", "path": ".templates/go/default.mk", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMlQyMTozNToxNFrOHQ3pmw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQwMjoyMzo0NlrOHT7tag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzQ1MTAzNQ==", "bodyText": "Let's rename GOX_LDFLAGS to LDFLAGS now that we're no longer using gox.", "url": "https://github.com/cucumber/common/pull/1171#discussion_r487451035", "createdAt": "2020-09-12T21:35:14Z", "author": {"login": "aslakhellesoy"}, "path": ".templates/go/default.mk", "diffHunk": "@@ -30,23 +42,43 @@ endif\n .deps:\n \ttouch $@\n \n-dist: $(EXE)\n+dist: $(EXE) \n ifndef NO_UPX_COMPRESSION\n \tmake .dist-compressed\n endif\n \ttouch $@\n \n-$(EXE): .deps $(GO_SOURCE_FILES)\n-\tmkdir -p dist\n+# Define build $(EXE) target differentially depending on NO_CROSS_COMPILE flag\n ifndef NO_CROSS_COMPILE\n-\t# Cross-compile executable for many platforms\n-\tgo get github.com/aslakhellesoy/gox\n-\tgox -buildmode=exe -ldflags $(GOX_LDFLAGS) -output \"dist/$(EXE_BASE_NAME)-{{.OS}}-{{.Arch}}\" -rebuild ./cmd\n+$(EXE): $(PLATFORMS)\n+\t# Rename windows compilations to include .exe extension\n+\trm -f dist/*windows*.exe\n+\tfor f in dist/*windows*; do mv -f $${f} $${f}.exe; done\n else\n+$(EXE): .deps $(GO_SOURCE_FILES)\n \t# Compile executable for the local platform only\n \tgo build -ldflags $(GOX_LDFLAGS) -o $@ ./cmd\n endif\n \n+$(PLATFORMS): .deps $(GO_SOURCE_FILES) supported-go-version\n+\tmkdir -p dist\n+\t# Cross-compile executable for many platforms\n+\techo \"Building $(X-OS)-$(X-ARCH)\"\n+\tGOOS=$(X-OS) GOARCH=$(X-ARCH) go build -buildmode=exe -ldflags $(GOX_LDFLAGS) -o \"dist/$(EXE_BASE_NAME)-$(X-OS)-$(X-ARCH)\" -a ./cmd", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8be9a59c6425d9d3b22a02e06ae58ebc0a3d3b36"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDY2MzI3NA==", "bodyText": "Adjusted terminology to adjust LDFLAG name convention", "url": "https://github.com/cucumber/common/pull/1171#discussion_r490663274", "createdAt": "2020-09-18T02:23:46Z", "author": {"login": "dmboyd"}, "path": ".templates/go/default.mk", "diffHunk": "@@ -30,23 +42,43 @@ endif\n .deps:\n \ttouch $@\n \n-dist: $(EXE)\n+dist: $(EXE) \n ifndef NO_UPX_COMPRESSION\n \tmake .dist-compressed\n endif\n \ttouch $@\n \n-$(EXE): .deps $(GO_SOURCE_FILES)\n-\tmkdir -p dist\n+# Define build $(EXE) target differentially depending on NO_CROSS_COMPILE flag\n ifndef NO_CROSS_COMPILE\n-\t# Cross-compile executable for many platforms\n-\tgo get github.com/aslakhellesoy/gox\n-\tgox -buildmode=exe -ldflags $(GOX_LDFLAGS) -output \"dist/$(EXE_BASE_NAME)-{{.OS}}-{{.Arch}}\" -rebuild ./cmd\n+$(EXE): $(PLATFORMS)\n+\t# Rename windows compilations to include .exe extension\n+\trm -f dist/*windows*.exe\n+\tfor f in dist/*windows*; do mv -f $${f} $${f}.exe; done\n else\n+$(EXE): .deps $(GO_SOURCE_FILES)\n \t# Compile executable for the local platform only\n \tgo build -ldflags $(GOX_LDFLAGS) -o $@ ./cmd\n endif\n \n+$(PLATFORMS): .deps $(GO_SOURCE_FILES) supported-go-version\n+\tmkdir -p dist\n+\t# Cross-compile executable for many platforms\n+\techo \"Building $(X-OS)-$(X-ARCH)\"\n+\tGOOS=$(X-OS) GOARCH=$(X-ARCH) go build -buildmode=exe -ldflags $(GOX_LDFLAGS) -o \"dist/$(EXE_BASE_NAME)-$(X-OS)-$(X-ARCH)\" -a ./cmd", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzQ1MTAzNQ=="}, "originalCommit": {"oid": "8be9a59c6425d9d3b22a02e06ae58ebc0a3d3b36"}, "originalPosition": 55}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 731, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}