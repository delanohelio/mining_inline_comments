{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk1MTgxODI0", "number": 1201, "title": "gherkin/c: Fixes Issue #1200 build fails when using ninja generator.", "bodyText": "Remove dubious custom target in build system is ninja.\nMotivation and Context\nNinja is a cmake build system.  It can't be used on this project due to the syntax of the custom target.  I believe that this custom target is a defect, and can't be used at all, but just in case, I'm only excluding it for the ninja build system.\nninja is what is used by vcpkg, so although this library is included, it fails to build, because of this custom target.\nfixes issue #1200\nHow Has This Been Tested?\nbuilt using the following scenarios:\n\nreadme.md instructions\n\nwindows\nubuntu 20.04\n\n\nmsvc ninja\n\nmsvc\nmsvc-clang\nubuntu 20.04 clang\nubuntu 20.04 gcc\n\n\n\n\nfor readme instructions:\nmkdir build\ncd build\ncmake ..\ncmake --install .\nfor msvc build:\nopen folder with msvc\ngenerate build configuration using defaults for:\n\nx64-Debug\nx64-Clang-Debug\nWSL-Clang-Debug\nWSL-GCC-Debug\nfor each build configuration, generate cmake cache, and build.\n\nTests for testdata/good/i18n*.feature fail when built with MSVC.  These tests fail before this change, so no change in behavior.  I am not yet familiar enough with this library to make the changes needed to get these tests to pass.  I will create an issue to track it, and try to fix if able.\nScreenshots (if appropriate):\nTypes of changes\nBuild system change to accomodate cmake ninja generator.\nChecklist:\n\n The change has been ported to Java.\n The change has been ported to Ruby.\n The change has been ported to JavaScript.\n The change has been ported to Go.\n The change has been ported to .NET.\n I've added tests for my code.\n My change requires a change to the documentation.\n I have updated the documentation accordingly.\n I have updated the CHANGELOG accordingly.\n-Can do this if needed, but not a functionality change", "createdAt": "2020-09-30T00:16:05Z", "url": "https://github.com/cucumber/common/pull/1201", "merged": true, "mergeCommit": {"oid": "2b02c7790bcc87a0341925d71c90761689ce0604"}, "closed": true, "closedAt": "2020-10-02T07:45:12Z", "author": {"login": "DewJunkie"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdNxN3wgH2gAyNDk1MTgxODI0Ojk2ZGI4NzUzMDFiZTAwNTY1ZmQ2NmZlNzFlZmYyYjlhYjAzNGRhNzg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdOcSzHgH2gAyNDk1MTgxODI0OjE4MDZlZDI5NmQ3NDk1YTlkMDBmMDQ2ODM3NTcyYWYyMWZjMDQxMTY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "96db875301be00565fd66fe71eff2b9ab034da78", "author": {"user": {"login": "DewJunkie", "name": "Duane McKinney"}}, "url": "https://github.com/cucumber/common/commit/96db875301be00565fd66fe71eff2b9ab034da78", "committedDate": "2020-09-29T23:58:45Z", "message": "Issue #1200 build fails when using ninja generator.  Remove dubious custom target in build system is ninja."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4375070ddcc853faf1ac38a356c79ff3fc864886", "author": {"user": {"login": "mpkorstanje", "name": "M.P. Korstanje"}}, "url": "https://github.com/cucumber/common/commit/4375070ddcc853faf1ac38a356c79ff3fc864886", "committedDate": "2020-10-01T10:24:27Z", "message": "Merge branch 'master' into 1200-ninja-build-fails"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwNDc3NjMw", "url": "https://github.com/cucumber/common/pull/1201#pullrequestreview-500477630", "createdAt": "2020-10-01T15:38:27Z", "commit": {"oid": "4375070ddcc853faf1ac38a356c79ff3fc864886"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxNTozODoyOFrOHbQTVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxNTozODoyOFrOHbQTVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODM0MDY5NA==", "bodyText": "I don't see what this does either. Feel free to delete.", "url": "https://github.com/cucumber/common/pull/1201#discussion_r498340694", "createdAt": "2020-10-01T15:38:28Z", "author": {"login": "mpkorstanje"}, "path": "gherkin/c/CMakeLists.txt", "diffHunk": "@@ -130,7 +130,10 @@ install(\n     NAMESPACE \"${namespace}\"\n     DESTINATION \"${config_install_dir}\")\n \n-add_custom_target(install_${PROJECT_NAME}\n-        $(MAKE) install\n-        DEPENDS gherkin\n-        COMMENT \"Installing ${PROJECT_NAME}\")\n+# I don't believe this target actually does anything, but keeping except for ninja just in case\n+if(NOT ${CMAKE_GENERATOR} STREQUAL \"Ninja\")\n+    add_custom_target(install_${PROJECT_NAME}\n+            $(MAKE) install\n+            DEPENDS gherkin\n+            COMMENT \"Installing ${PROJECT_NAME}\")\n+endif()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4375070ddcc853faf1ac38a356c79ff3fc864886"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8719d4f17250dcdbc475a43bca1ff2510f949753", "author": {"user": {"login": "mpkorstanje", "name": "M.P. Korstanje"}}, "url": "https://github.com/cucumber/common/commit/8719d4f17250dcdbc475a43bca1ff2510f949753", "committedDate": "2020-10-01T15:40:33Z", "message": "Merge branch 'master' into 1200-ninja-build-fails"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1806ed296d7495a9d00f046837572af21fc04116", "author": {"user": {"login": "DewJunkie", "name": "Duane McKinney"}}, "url": "https://github.com/cucumber/common/commit/1806ed296d7495a9d00f046837572af21fc04116", "committedDate": "2020-10-02T02:10:03Z", "message": "removed malformed add_custom_target\n\n$(MAKE) has no meaning in CMakeLists.txt, my belief is that this was added when porting from Makefile, where it does have  a meaning.  Most cmake generators ignore this, but ninja generator does not."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3027, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}