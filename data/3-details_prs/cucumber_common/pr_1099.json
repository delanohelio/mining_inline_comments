{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQyNjc3OTY1", "number": 1099, "title": "Fix computing Timestamps in Ruby", "bodyText": "Summary\nThis should provide a fix for cucumber-ruby#1438\nBasically, the timestamps generated by cucumber-messages are wrong (the way we used the Time.to_r does not really correspond to a seconds/nanos division).\nThis solution is not perfect as there are slight discrepencies  during the conversion, less that 1e6 seconds that said, once again, slight).\nI'll try to fix that too before merging.\nDetails\n\nMotivation and Context\n\n\nHow Has This Been Tested?\n\n\n\n\nScreenshots (if appropriate):\nTypes of changes\n\n\n Bug fix (non-breaking change which fixes an issue).\n New feature (non-breaking change which adds functionality).\n Breaking change (fix or feature that would cause existing functionality to not work as expected).\n\nChecklist:\n\n\n\n The change has been ported to Java.\n The change has been ported to Ruby.\n The change has been ported to JavaScript.\n The change has been ported to Go.\n The change has been ported to .NET.\n I've added tests for my code.\n My change requires a change to the documentation.\n I have updated the documentation accordingly.\n I have updated the CHANGELOG accordingly.", "createdAt": "2020-07-01T12:50:09Z", "url": "https://github.com/cucumber/common/pull/1099", "merged": true, "mergeCommit": {"oid": "5ec6eda7f91c2445a3c4434354e7003490ca4e02"}, "closed": true, "closedAt": "2020-07-21T09:50:58Z", "author": {"login": "vincent-psarga"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcwphdVAH2gAyNDQyNjc3OTY1Ojk3NDU0YmM1MDE4YmM5ZDIwNzEwMDgzZmEzZjZiZGI5YjY2MTY0YWM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc3Bn9UAH2gAyNDQyNjc3OTY1OjA2ZGQ4NzljZjNiYzc3NGEyOGVmMTY2MWFlNTMyYmFmNTc4Y2E3ZGI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "97454bc5018bc9d20710083fa3f6bdb9b66164ac", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/97454bc5018bc9d20710083fa3f6bdb9b66164ac", "committedDate": "2020-07-01T12:37:06Z", "message": "Fix computing Timestamps in Ruby"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a94ac1241f566a2e776cc140c45758354c290aa2", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/a94ac1241f566a2e776cc140c45758354c290aa2", "committedDate": "2020-07-01T14:14:16Z", "message": "Regenerate example with correct values"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b04e31ec06656bc0a547e1551ca6b87c96988a9", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/7b04e31ec06656bc0a547e1551ca6b87c96988a9", "committedDate": "2020-07-20T09:11:06Z", "message": "Merge branch 'master' into fix-ruby-time-conversion"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "732fb987155d2b42e522d743cdcc592f636f771c", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/732fb987155d2b42e522d743cdcc592f636f771c", "committedDate": "2020-07-20T09:14:31Z", "message": "Remove useless line"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ed5633672175e42eebef617da1f6ad358af5136", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/3ed5633672175e42eebef617da1f6ad358af5136", "committedDate": "2020-07-20T09:19:54Z", "message": "Make test a bit more readable"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d40aee49e1fd1546b281378163b99c5f87ce8a91", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/d40aee49e1fd1546b281378163b99c5f87ce8a91", "committedDate": "2020-07-20T09:29:41Z", "message": "Ease a bit the tolerance"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxNDgzNDgx", "url": "https://github.com/cucumber/common/pull/1099#pullrequestreview-451483481", "createdAt": "2020-07-20T10:26:09Z", "commit": {"oid": "d40aee49e1fd1546b281378163b99c5f87ce8a91"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxMDoyNjowOVrOG0E3tg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxMDoyNjowOVrOG0E3tg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzI1ODkzNA==", "bodyText": "This might overflow. And I can't work out who might use this.", "url": "https://github.com/cucumber/common/pull/1099#discussion_r457258934", "createdAt": "2020-07-20T10:26:09Z", "author": {"login": "mpkorstanje"}, "path": "messages/ruby/lib/cucumber/messages/time_conversion.rb", "diffHunk": "@@ -23,6 +25,10 @@ def duration_to_seconds(duration)\n         nanos_part = duration.nanos.to_f / NANOSECONDS_PER_SECOND\n         seconds_part + nanos_part\n       end\n+\n+      def time_to_nanos(time)\n+        time.to_i * NANOSECONDS_PER_SECOND + time.nsec", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d40aee49e1fd1546b281378163b99c5f87ce8a91"}, "originalPosition": 24}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f8b0169c2da95ade3d74c1d47440f94fb42cf36c", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/f8b0169c2da95ade3d74c1d47440f94fb42cf36c", "committedDate": "2020-07-20T11:50:55Z", "message": "Drop time_to_nanos which will cause overflow"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxNTU4ODYw", "url": "https://github.com/cucumber/common/pull/1099#pullrequestreview-451558860", "createdAt": "2020-07-20T12:28:00Z", "commit": {"oid": "f8b0169c2da95ade3d74c1d47440f94fb42cf36c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "06dd879cf3bc774a28ef1661ae532baf578ca7db", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/06dd879cf3bc774a28ef1661ae532baf578ca7db", "committedDate": "2020-07-21T08:05:28Z", "message": "Merge branch 'master' into fix-ruby-time-conversion"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3005, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}