{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc3NzY3MDQ5", "number": 1168, "title": "Remove credentials in meta message", "bodyText": "Summary\nSome CI (like GitLab) may use remote location using login/password (eg: https://mylogin:mypassword@gitlab-ci.com/org/repo.git).\nThe meta message will use it and, if used with reports, will display it.\nThe idea is to remove the credentials part of the remote URL (in the previous example, https://gitlab-ci.com/org/repo.git`)\nI extracted the tests related to cleanSensitiveInformation to a separate file for readability reasons.\nIf, in the future, we have to filter out other kind of information, this would be easier to do in a \"single\" file (well, one single file per language) and all our security related issues would be described in the same file.\nMotivation and Context\nAvoid sharing credentials.\nHow Has This Been Tested?\nUnit + Integration tests.\nScreenshots (if appropriate):\nTypes of changes\n\n Bug fix (non-breaking change which fixes an issue).\n New feature (non-breaking change which adds functionality).\n Breaking change (fix or feature that would cause existing functionality to not work as expected).\n\nChecklist:\n\n The change has been ported to Java.\n The change has been ported to Ruby.\n The change has been ported to JavaScript.\n I've added tests for my code.\n I have updated the CHANGELOG accordingly.", "createdAt": "2020-09-02T11:53:20Z", "url": "https://github.com/cucumber/common/pull/1168", "merged": true, "mergeCommit": {"oid": "6dd160d03686164176d5d67e85d543eb670a03e3"}, "closed": true, "closedAt": "2020-09-03T08:10:37Z", "author": {"login": "vincent-psarga"}, "timelineItems": {"totalCount": 20, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdE4p6qAH2gAyNDc3NzY3MDQ5OjI4MDRjMDAzZTY2YjFjZmMyMWE2NDE5YmM1ZTI4NTQ3MDIxODk1YTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdFLmHtgH2gAyNDc3NzY3MDQ5OjM1ZWFhYjBkYTViZTE5ZTQ4MTI4MTdkMTVmNTNhZTUzOWNiNmM3NjA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2804c003e66b1cfc21a6419bc5e28547021895a3", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/2804c003e66b1cfc21a6419bc5e28547021895a3", "committedDate": "2020-09-02T09:33:24Z", "message": "Add example showing sensitive data in the URL"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7d6519b70f4deec543e26b2d55226d4b155a780e", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/7d6519b70f4deec543e26b2d55226d4b155a780e", "committedDate": "2020-09-02T09:50:07Z", "message": "Added method to clean up sensitive data, limited to URLs for now"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e83de51b17e2860d5ebe2d86033141b8ae07af3e", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/e83de51b17e2860d5ebe2d86033141b8ae07af3e", "committedDate": "2020-09-02T09:54:48Z", "message": "Remove potential sensitive information in Meta.CI.Git.remote message"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f1f6c385e24773649513d90bca837466be7065f", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/5f1f6c385e24773649513d90bca837466be7065f", "committedDate": "2020-09-02T12:26:54Z", "message": "Rename clean_sensitive_info_spec.rb as clean_sensitive_information_spec.rb"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7cd59f9e565a4a6303bed22c03ef382449cef592", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/7cd59f9e565a4a6303bed22c03ef382449cef592", "committedDate": "2020-09-02T12:27:38Z", "message": "port changes to Java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80b3726c58cf45f8d3fe0d6f3d980255389ea02b", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/80b3726c58cf45f8d3fe0d6f3d980255389ea02b", "committedDate": "2020-09-02T12:27:55Z", "message": "Merge branch 'master' into remove-credentials-in-meta"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "699499d51eec4c61248073b1c4127421cc1c8c35", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/699499d51eec4c61248073b1c4127421cc1c8c35", "committedDate": "2020-09-02T13:00:06Z", "message": "Port changes to Javascript\nUpdate CHANGELOG and add a `Security fixes` section in the CHANGELOG"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c70f212bafa291cffe4797ebeb778dfe818d9e79", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/c70f212bafa291cffe4797ebeb778dfe818d9e79", "committedDate": "2020-09-02T13:02:44Z", "message": "Merge branch 'master' into remove-credentials-in-meta"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "446e5f28075d111ad62a2595162c2fd2083864ea", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/446e5f28075d111ad62a2595162c2fd2083864ea", "committedDate": "2020-09-02T13:10:26Z", "message": "Fix typo in const name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "804dc67481d2519b25ee21cb5a436f0b0d446580", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/804dc67481d2519b25ee21cb5a436f0b0d446580", "committedDate": "2020-09-02T14:24:27Z", "message": "Merge branch 'master' into remove-credentials-in-meta"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgwOTMwMzQ4", "url": "https://github.com/cucumber/common/pull/1168#pullrequestreview-480930348", "createdAt": "2020-09-02T15:16:27Z", "commit": {"oid": "804dc67481d2519b25ee21cb5a436f0b0d446580"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxNToxNjoyN1rOHL0U9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxNToxNjoyN1rOHL0U9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjE1MzcxNw==", "bodyText": "The only field that can contain credentials is the git remote, which is a URL. I think it would be safer to parse the value into a URL object, remove the credentials using the URL API and then write it out again.", "url": "https://github.com/cucumber/common/pull/1168#discussion_r482153717", "createdAt": "2020-09-02T15:16:27Z", "author": {"login": "aslakhellesoy"}, "path": "create-meta/java/src/main/java/io/cucumber/createmeta/CreateMeta.java", "diffHunk": "@@ -57,6 +57,17 @@\n                 .build();\n     }\n \n+    public static String cleanSensitiveInformation(String value) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "804dc67481d2519b25ee21cb5a436f0b0d446580"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgwOTMyODI3", "url": "https://github.com/cucumber/common/pull/1168#pullrequestreview-480932827", "createdAt": "2020-09-02T15:19:01Z", "commit": {"oid": "804dc67481d2519b25ee21cb5a436f0b0d446580"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxNToxOTowMVrOHL0cbA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxNToxOTowMVrOHL0cbA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjE1NTYyOA==", "bodyText": "With JUnit 5 test classes can be package private. This is nice because code completion won't suggest them outside of their package.", "url": "https://github.com/cucumber/common/pull/1168#discussion_r482155628", "createdAt": "2020-09-02T15:19:01Z", "author": {"login": "mpkorstanje"}, "path": "create-meta/java/src/test/java/io/cucumber/createmeta/CleanSensitiveInformationTest.java", "diffHunk": "@@ -0,0 +1,33 @@\n+package io.cucumber.createmeta;\n+\n+import org.junit.jupiter.api.Test;\n+\n+import java.util.HashMap;\n+import java.util.regex.Matcher;\n+import java.util.regex.Pattern;\n+\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.hamcrest.Matchers.matchesPattern;\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+\n+public class CleanSensitiveInformationTest {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "804dc67481d2519b25ee21cb5a436f0b0d446580"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c5a8af9008292d652d0fd1fb9489f0e6d44107db", "author": {"user": {"login": "aslakhellesoy", "name": "Aslak Helles\u00f8y"}}, "url": "https://github.com/cucumber/common/commit/c5a8af9008292d652d0fd1fb9489f0e6d44107db", "committedDate": "2020-09-02T15:27:34Z", "message": "Remove credentials using URI instead of regexp"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b083b589a162481187a495f642151906f78eeefe", "author": {"user": {"login": "aslakhellesoy", "name": "Aslak Helles\u00f8y"}}, "url": "https://github.com/cucumber/common/commit/b083b589a162481187a495f642151906f78eeefe", "committedDate": "2020-09-02T15:28:45Z", "message": "Package private test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bb00aaec5a728776d83494cc17f9452956b0d340", "author": {"user": {"login": "aslakhellesoy", "name": "Aslak Helles\u00f8y"}}, "url": "https://github.com/cucumber/common/commit/bb00aaec5a728776d83494cc17f9452956b0d340", "committedDate": "2020-09-02T15:40:55Z", "message": "Use url parser. Handle null and undefined."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "26045fad529c184f049c14ee4e0ec80babd10ec2", "author": {"user": {"login": "aslakhellesoy", "name": "Aslak Helles\u00f8y"}}, "url": "https://github.com/cucumber/common/commit/26045fad529c184f049c14ee4e0ec80babd10ec2", "committedDate": "2020-09-02T15:43:12Z", "message": "Handle null"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed70fbbdebe958843dbbdb45a40ec2d83e894972", "author": {"user": {"login": "aslakhellesoy", "name": "Aslak Helles\u00f8y"}}, "url": "https://github.com/cucumber/common/commit/ed70fbbdebe958843dbbdb45a40ec2d83e894972", "committedDate": "2020-09-02T15:53:14Z", "message": "Use URI. Handle nil and undefined."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bb63729af219c3b7cbfe51f011c46bfb49cc3d1b", "author": {"user": {"login": "aslakhellesoy", "name": "Aslak Helles\u00f8y"}}, "url": "https://github.com/cucumber/common/commit/bb63729af219c3b7cbfe51f011c46bfb49cc3d1b", "committedDate": "2020-09-02T15:57:58Z", "message": "Rename method to better describe what it does"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa4b11544d9a203f3c338de3e9810a0979e63c06", "author": {"user": {"login": "aslakhellesoy", "name": "Aslak Helles\u00f8y"}}, "url": "https://github.com/cucumber/common/commit/fa4b11544d9a203f3c338de3e9810a0979e63c06", "committedDate": "2020-09-02T16:06:58Z", "message": "Add another test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "35eaab0da5be19e4812817d15f53ae539cb6c760", "author": {"user": {"login": "aslakhellesoy", "name": "Aslak Helles\u00f8y"}}, "url": "https://github.com/cucumber/common/commit/35eaab0da5be19e4812817d15f53ae539cb6c760", "committedDate": "2020-09-03T07:37:27Z", "message": "Merge branch 'master' into remove-credentials-in-meta"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3015, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}