{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE5MjYwMDEz", "number": 1002, "title": "Add library to handle creation of the Meta message", "bodyText": "Summary\nThis library will handle the creation of the Meta message which is emitted at the beginning of each stream.\nFirst draft will simply provide basic data (name of the implementation that generated the messages and detail about the execution environment).\nWe'll add other information later on such a git remote/branch/commit hash etc.\nDetails\n\nMotivation and Context\n\n\nHow Has This Been Tested?\n\n\n\n\nScreenshots (if appropriate):\nTypes of changes\n\n\n Bug fix (non-breaking change which fixes an issue).\n New feature (non-breaking change which adds functionality).\n Breaking change (fix or feature that would cause existing functionality to not work as expected).\n\nChecklist:\n\n\n\n The change has been ported to Java.\n The change has been ported to Ruby.\n The change has been ported to JavaScript.\n The change has been ported to Go.\n The change has been ported to .NET.\n I've added tests for my code.\n My change requires a change to the documentation.\n I have updated the documentation accordingly.\n I have updated the CHANGELOG accordingly.", "createdAt": "2020-05-18T05:06:03Z", "url": "https://github.com/cucumber/common/pull/1002", "merged": true, "mergeCommit": {"oid": "1c458184d45ab3ee1bbc3c04c1b3f0ba3c887e39"}, "closed": true, "closedAt": "2020-06-26T13:31:56Z", "author": {"login": "vincent-psarga"}, "timelineItems": {"totalCount": 27, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABciYYNGAH2gAyNDE5MjYwMDEzOjc3ODgyNTFiMTZjOGVkZjQwNjJjMjg3OGFiZWNlM2JhNTljYTgxMjE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcvCnafgH2gAyNDE5MjYwMDEzOmVkNzRmYjViMDIzOGFhMDAxODlkMmUwNWVjNjc2MDc4YzZhN2ZhN2M=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7788251b16c8edf4062c2878abece3ba59ca8121", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/7788251b16c8edf4062c2878abece3ba59ca8121", "committedDate": "2020-05-18T04:43:40Z", "message": "Start library create-meta: take JS version from fake-cucumber"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d15978f77ea57e07f683af732dff06ead66d1f5", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/8d15978f77ea57e07f683af732dff06ead66d1f5", "committedDate": "2020-05-18T04:58:00Z", "message": "Use @cucumber/create-meta to generate the Meta message"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9decd4bc852f8d83f9bb9fd4ff57436b58caeb1f", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/9decd4bc852f8d83f9bb9fd4ff57436b58caeb1f", "committedDate": "2020-05-18T05:02:06Z", "message": "Use @cucumber/create-meta to generate the Meta message"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee1673b7523a62033b22c713782567cab5ee0e4d", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/ee1673b7523a62033b22c713782567cab5ee0e4d", "committedDate": "2020-05-18T05:11:29Z", "message": "Include create-meta in base Makefile and CI jobs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d52744ef9ed6407b3136cbafc5d365e3da1394a3", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/d52744ef9ed6407b3136cbafc5d365e3da1394a3", "committedDate": "2020-05-18T05:37:34Z", "message": "Also add a Ruby implementation for create-meta"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "016ef545695e6b8ddc0ed34b1cc283599226f166", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/016ef545695e6b8ddc0ed34b1cc283599226f166", "committedDate": "2020-05-18T05:39:25Z", "message": "Enable CI for create-meta/ruby"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cbcc873bf12c33ae9125c27a3f4e47d475bbdcd3", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/cbcc873bf12c33ae9125c27a3f4e47d475bbdcd3", "committedDate": "2020-05-18T07:13:43Z", "message": "Add createMeta java version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7d9b34b9486c28665bf8506167c4dded66c55f72", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/7d9b34b9486c28665bf8506167c4dded66c55f72", "committedDate": "2020-05-18T07:15:37Z", "message": "Enable createMeta/java on CI"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzMzU2OTUw", "url": "https://github.com/cucumber/common/pull/1002#pullrequestreview-413356950", "createdAt": "2020-05-18T08:02:56Z", "commit": {"oid": "7d9b34b9486c28665bf8506167c4dded66c55f72"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQwODowMjo1NlrOGWruAA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQwODowMjo1NlrOGWruAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjQzODE0NA==", "bodyText": "This will result in a rather annoying upgrade cycle. For every version of messages well have to release a new version of meta.\nI'd suggest creating only the meta object here and copying the fields over to the message in JVM.", "url": "https://github.com/cucumber/common/pull/1002#discussion_r426438144", "createdAt": "2020-05-18T08:02:56Z", "author": {"login": "mpkorstanje"}, "path": "create-meta/java/pom.xml", "diffHunk": "@@ -0,0 +1,63 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+    <modelVersion>4.0.0</modelVersion>\n+\n+    <parent>\n+        <groupId>io.cucumber</groupId>\n+        <artifactId>cucumber-parent</artifactId>\n+        <version>2.1.0</version>\n+    </parent>\n+\n+    <artifactId>create-meta</artifactId>\n+    <version>1.0.0-SNAPSHOT</version>\n+    <packaging>jar</packaging>\n+    <name>Cucumber create meta</name>\n+    <description>Produce the meta message for Cucumber Java</description>\n+    <url>https://github.com/cucumber/create-meta-java</url>\n+\n+    <properties>\n+        <project.Automatic-Module-Name>io.cucumber.createmeta</project.Automatic-Module-Name>\n+    </properties>\n+\n+    <scm>\n+        <connection>scm:git:git://github.com/cucumber/create-meta-java.git</connection>\n+        <developerConnection>scm:git:git@github.com:cucumber/create-meta-java.git</developerConnection>\n+        <url>git://github.com/cucumber/create-meta-java.git</url>\n+    </scm>\n+\n+    <build>\n+        <plugins>\n+            <plugin>\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-compiler-plugin</artifactId>\n+                <version>3.8.1</version>\n+            </plugin>\n+        </plugins>\n+    </build>\n+\n+    <dependencies>\n+        <dependency>\n+            <groupId>org.hamcrest</groupId>\n+            <artifactId>hamcrest</artifactId>\n+            <version>2.2</version>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.junit.jupiter</groupId>\n+            <artifactId>junit-jupiter-engine</artifactId>\n+            <version>5.6.1</version>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.junit.jupiter</groupId>\n+            <artifactId>junit-jupiter-params</artifactId>\n+            <version>5.6.1</version>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>io.cucumber</groupId>\n+            <artifactId>messages</artifactId>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7d9b34b9486c28665bf8506167c4dded66c55f72"}, "originalPosition": 59}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df27023184d2254d7bd7317794863747b31fc2f7", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/df27023184d2254d7bd7317794863747b31fc2f7", "committedDate": "2020-05-18T09:44:56Z", "message": "Add EnvVariable to Meta message"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6497962aac3333a3c7f7189ff1f3af5d72e6f82b", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/6497962aac3333a3c7f7189ff1f3af5d72e6f82b", "committedDate": "2020-05-18T12:43:10Z", "message": "Replace EnvVariable by CI and more predictable data"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxMjg0ODY1", "url": "https://github.com/cucumber/common/pull/1002#pullrequestreview-431284865", "createdAt": "2020-06-16T08:39:57Z", "commit": {"oid": "6497962aac3333a3c7f7189ff1f3af5d72e6f82b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwODozOTo1N1rOGkRN8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwODozOTo1N1rOGkRN8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDY4NDAxOQ==", "bodyText": "I'm not sure this is the right name or abstraction. Git-specific information should be in a Git message I think. That way we can add support for other source control systems later if needed\nI'm not sure what name represents, or where it comes from. Same for projectName.\nHow about:\nmessage Git {\n  string remote = 2;\n  string revision = 3;\n  string branch = 4;\n  string tag = 5;\n}\n\nThe branch and tag fields should possibly be repeated since it's possible to have many.\nIn practice there will probably only be one, taken from common CI systems' environment variables.", "url": "https://github.com/cucumber/common/pull/1002#discussion_r440684019", "createdAt": "2020-06-16T08:39:57Z", "author": {"login": "aslakhellesoy"}, "path": "messages/dotnet/messages.proto", "diffHunk": "@@ -63,14 +63,26 @@ message Meta {\n \n   // 386, arm, amd64 etc\n   Product cpu = 5;\n-  \n+\n+  // CI environment\n+  CI ci = 6;\n+\n   // A product has a name and a version\n   message Product {\n     // The product name\n     string name = 1;\n     // The product version\n     string version = 2;\n   }\n+\n+  message CI {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6497962aac3333a3c7f7189ff1f3af5d72e6f82b"}, "originalPosition": 35}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7077371a009cce7cd93ef02a027e8b083d5c7ca", "author": {"user": {"login": "aslakhellesoy", "name": "Aslak Helles\u00f8y"}}, "url": "https://github.com/cucumber/common/commit/b7077371a009cce7cd93ef02a027e8b083d5c7ca", "committedDate": "2020-06-18T21:57:31Z", "message": "Merge branch 'master' into add-create-meta-lib"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77d152f01dae882e735085c0cca0d4d736011bed", "author": {"user": {"login": "aslakhellesoy", "name": "Aslak Helles\u00f8y"}}, "url": "https://github.com/cucumber/common/commit/77d152f01dae882e735085c0cca0d4d736011bed", "committedDate": "2020-06-21T21:46:23Z", "message": "Generate ci message in meta"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2Mzk0MjE5", "url": "https://github.com/cucumber/common/pull/1002#pullrequestreview-436394219", "createdAt": "2020-06-24T07:33:32Z", "commit": {"oid": "77d152f01dae882e735085c0cca0d4d736011bed"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwNzozMzozMlrOGoGWzw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwNzozMzozMlrOGoGWzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDcwMDM2Nw==", "bodyText": "shouldn't it be CIDict, CISystem etc ? (with a capital I ) - although it might make the variable names a bit weird later in the code :/", "url": "https://github.com/cucumber/common/pull/1002#discussion_r444700367", "createdAt": "2020-06-24T07:33:32Z", "author": {"login": "vincent-psarga"}, "path": "create-meta/javascript/src/createMeta.ts", "diffHunk": "@@ -0,0 +1,129 @@\n+import os from 'os'\n+import { messages, version as protocolVersion } from '@cucumber/messages'\n+import defaultCiDict from './ciDict.json'\n+\n+export type CiDict = { [name: string]: CiSystem }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77d152f01dae882e735085c0cca0d4d736011bed"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f4acf6ad03b2163a5693339285b0e1888b864038", "author": {"user": {"login": "aslakhellesoy", "name": "Aslak Helles\u00f8y"}}, "url": "https://github.com/cucumber/common/commit/f4acf6ad03b2163a5693339285b0e1888b864038", "committedDate": "2020-06-24T09:57:15Z", "message": "Merge master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c97ec349902f98b2673312a104ffafd4c886c259", "author": {"user": {"login": "aslakhellesoy", "name": "Aslak Helles\u00f8y"}}, "url": "https://github.com/cucumber/common/commit/c97ec349902f98b2673312a104ffafd4c886c259", "committedDate": "2020-06-24T11:11:13Z", "message": "Copy the ciDict to all implementations"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9bc2148968397871d6992df382fd85eb05617e17", "author": {"user": {"login": "aslakhellesoy", "name": "Aslak Helles\u00f8y"}}, "url": "https://github.com/cucumber/common/commit/9bc2148968397871d6992df382fd85eb05617e17", "committedDate": "2020-06-24T11:13:39Z", "message": "Move test data"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ba7bff4eece7ac64303d1767a6dbac234e950ca", "author": {"user": {"login": "aslakhellesoy", "name": "Aslak Helles\u00f8y"}}, "url": "https://github.com/cucumber/common/commit/8ba7bff4eece7ac64303d1767a6dbac234e950ca", "committedDate": "2020-06-24T22:20:50Z", "message": "createMeta java implementation produces CI"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3MjcyNjc5", "url": "https://github.com/cucumber/common/pull/1002#pullrequestreview-437272679", "createdAt": "2020-06-25T08:22:27Z", "commit": {"oid": "8ba7bff4eece7ac64303d1767a6dbac234e950ca"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQwODoyMjoyN1rOGowbcw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQwODoyMjoyN1rOGowbcw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTM4OTY4Mw==", "bodyText": "Can we avoid this dependency or only use it in test scope? When using the mvn exec:java plugin you can execute code in test scope. This way we don't need to include the main method in the jar that is distributed.", "url": "https://github.com/cucumber/common/pull/1002#discussion_r445389683", "createdAt": "2020-06-25T08:22:27Z", "author": {"login": "mpkorstanje"}, "path": "create-meta/java/pom.xml", "diffHunk": "@@ -25,39 +25,38 @@\n         <url>git://github.com/cucumber/create-meta-java.git</url>\n     </scm>\n \n-    <build>\n-        <plugins>\n-            <plugin>\n-                <groupId>org.apache.maven.plugins</groupId>\n-                <artifactId>maven-compiler-plugin</artifactId>\n-                <version>3.8.1</version>\n-            </plugin>\n-        </plugins>\n-    </build>\n-\n     <dependencies>\n+        <dependency>\n+            <groupId>io.cucumber</groupId>\n+            <artifactId>messages</artifactId>\n+            <version>12.1.2-SNAPSHOT</version>\n+        </dependency>\n+\n+        <dependency>\n+            <groupId>com.eclipsesource.minimal-json</groupId>\n+            <artifactId>minimal-json</artifactId>\n+            <version>0.9.5</version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8ba7bff4eece7ac64303d1767a6dbac234e950ca"}, "originalPosition": 33}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4cffcc5df27513f85bd59655f809ce40eea65794", "author": {"user": {"login": "aslakhellesoy", "name": "Aslak Helles\u00f8y"}}, "url": "https://github.com/cucumber/common/commit/4cffcc5df27513f85bd59655f809ce40eea65794", "committedDate": "2020-06-25T09:47:01Z", "message": "Merge master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c4b8d2b7efdd572fe8196de69fda508e504d7a4f", "author": {"user": {"login": "aslakhellesoy", "name": "Aslak Helles\u00f8y"}}, "url": "https://github.com/cucumber/common/commit/c4b8d2b7efdd572fe8196de69fda508e504d7a4f", "committedDate": "2020-06-25T09:55:00Z", "message": "Merge branch 'master' into add-create-meta-lib"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a69debc0c5c432a0038408f63d53df2ab97f4df0", "author": {"user": {"login": "aslakhellesoy", "name": "Aslak Helles\u00f8y"}}, "url": "https://github.com/cucumber/common/commit/a69debc0c5c432a0038408f63d53df2ab97f4df0", "committedDate": "2020-06-25T09:55:53Z", "message": "Set explicit implementations"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "400a131065a82f8a85db6a2d3a3d26b4b96e4aaf", "author": {"user": {"login": "aslakhellesoy", "name": "Aslak Helles\u00f8y"}}, "url": "https://github.com/cucumber/common/commit/400a131065a82f8a85db6a2d3a3d26b4b96e4aaf", "committedDate": "2020-06-25T12:35:39Z", "message": "Shade minimal-json"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1fe4887ba5f5fddca787ec8638074c6c5be0508a", "author": {"user": {"login": "aslakhellesoy", "name": "Aslak Helles\u00f8y"}}, "url": "https://github.com/cucumber/common/commit/1fe4887ba5f5fddca787ec8638074c6c5be0508a", "committedDate": "2020-06-26T09:45:42Z", "message": "Merge branch 'master' into add-create-meta-lib"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "014bd43b53593287224f03579b99cc20cdfc88bb", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/014bd43b53593287224f03579b99cc20cdfc88bb", "committedDate": "2020-06-26T11:14:12Z", "message": "Merge branch 'master' into add-create-meta-lib"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed74fb5b0238aa00189d2e05ec676078c6a7fa7c", "author": {"user": {"login": "aslakhellesoy", "name": "Aslak Helles\u00f8y"}}, "url": "https://github.com/cucumber/common/commit/ed74fb5b0238aa00189d2e05ec676078c6a7fa7c", "committedDate": "2020-06-26T12:43:23Z", "message": "createMeta for ruby"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3043, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}