{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA2MDU3OTcy", "number": 975, "title": "Display failed hook in React", "bodyText": "#411  Summary\nIf we have a failed hook in react, we don't see it in the current html report. With this modifications, we want them to appear in it.\nMotivation and Context\n\n\nHow Has This Been Tested?\n\n\n\n\nScreenshots (if appropriate):\nTypes of changes\n\n\n Bug fix (non-breaking change which fixes an issue).\n New feature (non-breaking change which adds functionality).\n Breaking change (fix or feature that would cause existing functionality to not work as expected).\n\nChecklist:\n\n The change has been ported to Java.\n The change has been ported to Ruby.\n The change has been ported to JavaScript.\n The change has been ported to Go.\n The change has been ported to .NET.\n I've added tests for my code.\n My change requires a change to the documentation.\n I have updated the documentation accordingly.\n I have updated the CHANGELOG accordingly.", "createdAt": "2020-04-20T13:17:45Z", "url": "https://github.com/cucumber/common/pull/975", "merged": true, "mergeCommit": {"oid": "76e545e75e8feeb849b9d2498915e964e4c6580c"}, "closed": true, "closedAt": "2020-05-20T10:33:50Z", "author": {"login": "bmalat"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcT86G6gH2gAyNDA2MDU3OTcyOjk0NGE3MGQ5OTRkMzFkMmFkNDAwMWU4OWIyYzZjOTBiMGE2MzZmZmI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcjF6HVAH2gAyNDA2MDU3OTcyOjdjZTUyNjU1ZTMxOTY1NWI3NGE2MDA5YWIxNDNkOWYyNjU0OTcwZjY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "944a70d994d31d2ad4001e89b2c6c90b0a636ffb", "author": {"user": null}, "url": "https://github.com/cucumber/common/commit/944a70d994d31d2ad4001e89b2c6c90b0a636ffb", "committedDate": "2020-04-03T08:48:25Z", "message": "Get Before Hook Step"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6d574b6a5852fc919cba8e7e32b276aa3e693b3", "author": {"user": null}, "url": "https://github.com/cucumber/common/commit/c6d574b6a5852fc919cba8e7e32b276aa3e693b3", "committedDate": "2020-04-03T13:38:38Z", "message": "Get After Hook Steps"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6383897958de8e18b927c8fd7b5ab10035199c60", "author": {"user": null}, "url": "https://github.com/cucumber/common/commit/6383897958de8e18b927c8fd7b5ab10035199c60", "committedDate": "2020-04-20T12:29:36Z", "message": "Add getTestStepResults"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3MTg1NDAx", "url": "https://github.com/cucumber/common/pull/975#pullrequestreview-397185401", "createdAt": "2020-04-21T10:09:51Z", "commit": {"oid": "6383897958de8e18b927c8fd7b5ab10035199c60"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxMDowOTo1MVrOGI9yFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxMDoxMzoxMlrOGI96uQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA1NDAzOA==", "bodyText": "Remove commented-out code", "url": "https://github.com/cucumber/common/pull/975#discussion_r412054038", "createdAt": "2020-04-21T10:09:51Z", "author": {"login": "aslakhellesoy"}, "path": "query/javascript/src/Query.ts", "diffHunk": "@@ -157,4 +167,51 @@ export default class Query {\n     | undefined {\n     return this.stepMatchArgumentsListsByPickleStepId.get(pickleStepId)\n   }\n+\n+  public getBeforeHookSteps(\n+    pickleId: string\n+  ): ReadonlyArray<messages.TestCase.ITestStep> {\n+    const testCase = this.testCaseByPickleId.get(pickleId)\n+\n+    // const hookSteps = testCase.testSteps.filter((step) => step.hookId)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6383897958de8e18b927c8fd7b5ab10035199c60"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA1NDI5OQ==", "bodyText": "Why is this declared outside the loop?", "url": "https://github.com/cucumber/common/pull/975#discussion_r412054299", "createdAt": "2020-04-21T10:10:17Z", "author": {"login": "aslakhellesoy"}, "path": "query/javascript/src/Query.ts", "diffHunk": "@@ -157,4 +167,51 @@ export default class Query {\n     | undefined {\n     return this.stepMatchArgumentsListsByPickleStepId.get(pickleStepId)\n   }\n+\n+  public getBeforeHookSteps(\n+    pickleId: string\n+  ): ReadonlyArray<messages.TestCase.ITestStep> {\n+    const testCase = this.testCaseByPickleId.get(pickleId)\n+\n+    // const hookSteps = testCase.testSteps.filter((step) => step.hookId)\n+    const hookSteps: messages.TestCase.ITestStep[] = []\n+    let pickleStepFound = false", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6383897958de8e18b927c8fd7b5ab10035199c60"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA1NTE4Nw==", "bodyText": "Can you use Array#filter to build hookSteps instead?", "url": "https://github.com/cucumber/common/pull/975#discussion_r412055187", "createdAt": "2020-04-21T10:11:35Z", "author": {"login": "aslakhellesoy"}, "path": "query/javascript/src/Query.ts", "diffHunk": "@@ -157,4 +167,51 @@ export default class Query {\n     | undefined {\n     return this.stepMatchArgumentsListsByPickleStepId.get(pickleStepId)\n   }\n+\n+  public getBeforeHookSteps(\n+    pickleId: string\n+  ): ReadonlyArray<messages.TestCase.ITestStep> {\n+    const testCase = this.testCaseByPickleId.get(pickleId)\n+\n+    // const hookSteps = testCase.testSteps.filter((step) => step.hookId)\n+    const hookSteps: messages.TestCase.ITestStep[] = []\n+    let pickleStepFound = false\n+\n+    for (const step of testCase.testSteps) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6383897958de8e18b927c8fd7b5ab10035199c60"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA1NTk0Mw==", "bodyText": "Can you extract the duplicated code between getAfterHookSteps and getBeforeHookSteps to a separate function?", "url": "https://github.com/cucumber/common/pull/975#discussion_r412055943", "createdAt": "2020-04-21T10:12:48Z", "author": {"login": "aslakhellesoy"}, "path": "query/javascript/src/Query.ts", "diffHunk": "@@ -157,4 +167,51 @@ export default class Query {\n     | undefined {\n     return this.stepMatchArgumentsListsByPickleStepId.get(pickleStepId)\n   }\n+\n+  public getBeforeHookSteps(\n+    pickleId: string\n+  ): ReadonlyArray<messages.TestCase.ITestStep> {\n+    const testCase = this.testCaseByPickleId.get(pickleId)\n+\n+    // const hookSteps = testCase.testSteps.filter((step) => step.hookId)\n+    const hookSteps: messages.TestCase.ITestStep[] = []\n+    let pickleStepFound = false\n+\n+    for (const step of testCase.testSteps) {\n+      if (!step.hookId) {\n+        pickleStepFound = true\n+      }\n+      if (step.hookId && !pickleStepFound) {\n+        hookSteps.push(step)\n+      }\n+    }\n+\n+    return hookSteps\n+  }\n+\n+  public getAfterHookSteps(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6383897958de8e18b927c8fd7b5ab10035199c60"}, "originalPosition": 59}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA1NjI0OQ==", "bodyText": "Intermediate variable not needed - just return the result", "url": "https://github.com/cucumber/common/pull/975#discussion_r412056249", "createdAt": "2020-04-21T10:13:12Z", "author": {"login": "aslakhellesoy"}, "path": "query/javascript/src/Query.ts", "diffHunk": "@@ -157,4 +167,51 @@ export default class Query {\n     | undefined {\n     return this.stepMatchArgumentsListsByPickleStepId.get(pickleStepId)\n   }\n+\n+  public getBeforeHookSteps(\n+    pickleId: string\n+  ): ReadonlyArray<messages.TestCase.ITestStep> {\n+    const testCase = this.testCaseByPickleId.get(pickleId)\n+\n+    // const hookSteps = testCase.testSteps.filter((step) => step.hookId)\n+    const hookSteps: messages.TestCase.ITestStep[] = []\n+    let pickleStepFound = false\n+\n+    for (const step of testCase.testSteps) {\n+      if (!step.hookId) {\n+        pickleStepFound = true\n+      }\n+      if (step.hookId && !pickleStepFound) {\n+        hookSteps.push(step)\n+      }\n+    }\n+\n+    return hookSteps\n+  }\n+\n+  public getAfterHookSteps(\n+    pickleId: string\n+  ): ReadonlyArray<messages.TestCase.ITestStep> {\n+    const testCase = this.testCaseByPickleId.get(pickleId)\n+\n+    const hookSteps: messages.TestCase.ITestStep[] = []\n+    let pickleStepFound = false\n+\n+    for (const step of testCase.testSteps) {\n+      if (!step.hookId) {\n+        pickleStepFound = true\n+      }\n+      if (step.hookId && pickleStepFound) {\n+        hookSteps.push(step)\n+      }\n+    }\n+\n+    return hookSteps\n+  }\n+\n+  public getTestStepResults(testStepId: string): messages.ITestStepResult[] {\n+    const testStepResults = this.testStepResultsbyTestStepId.get(testStepId)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6383897958de8e18b927c8fd7b5ab10035199c60"}, "originalPosition": 80}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d860d7dc689f7890d0eb0ef9e019d111888604d9", "author": {"user": null}, "url": "https://github.com/cucumber/common/commit/d860d7dc689f7890d0eb0ef9e019d111888604d9", "committedDate": "2020-04-28T13:34:51Z", "message": "Add getHook"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "56e45d82ade8fc68970b458f05733070d9c24671", "author": {"user": null}, "url": "https://github.com/cucumber/common/commit/56e45d82ade8fc68970b458f05733070d9c24671", "committedDate": "2020-04-29T14:58:36Z", "message": "Failed Hook Step visible on the interface"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ff4a1eaedd2da4081f8ea393f1a26466c19cb195", "author": {"user": null}, "url": "https://github.com/cucumber/common/commit/ff4a1eaedd2da4081f8ea393f1a26466c19cb195", "committedDate": "2020-04-30T13:20:06Z", "message": "Refactoring around getAfterHooks and getBeforeHooks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "183b7ca493b2ec264e09a3bf345d38476a8932b9", "author": {"user": null}, "url": "https://github.com/cucumber/common/commit/183b7ca493b2ec264e09a3bf345d38476a8932b9", "committedDate": "2020-05-05T13:24:24Z", "message": "Add getAttachmentsbyTestStepId"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb358a943b9df0f1df5b4ea71a799988544b0c7e", "author": {"user": null}, "url": "https://github.com/cucumber/common/commit/fb358a943b9df0f1df5b4ea71a799988544b0c7e", "committedDate": "2020-05-05T13:53:11Z", "message": "Use getTestStepAttachments for getPickleStepAttachments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e6609e9083a55eedc30d1eabda796394fb203413", "author": {"user": null}, "url": "https://github.com/cucumber/common/commit/e6609e9083a55eedc30d1eabda796394fb203413", "committedDate": "2020-05-12T08:25:04Z", "message": "Add example hooks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dbf373c88f67e569847fb164528f0abbde944a10", "author": {"user": null}, "url": "https://github.com/cucumber/common/commit/dbf373c88f67e569847fb164528f0abbde944a10", "committedDate": "2020-05-12T08:34:27Z", "message": "Display hooks with attachments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63350b02d37c81a8e572216a4c364828481743f1", "author": {"user": null}, "url": "https://github.com/cucumber/common/commit/63350b02d37c81a8e572216a4c364828481743f1", "committedDate": "2020-05-12T09:04:05Z", "message": "Attachments style"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c1ca32d24792b2fc193fb6efb623769b50313aee", "author": {"user": null}, "url": "https://github.com/cucumber/common/commit/c1ca32d24792b2fc193fb6efb623769b50313aee", "committedDate": "2020-05-18T12:43:51Z", "message": "Fix some issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3aa6ed8fea6cd9319f84d52eb3ac7ccf3b91081f", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/3aa6ed8fea6cd9319f84d52eb3ac7ccf3b91081f", "committedDate": "2020-05-20T08:10:55Z", "message": "Merge branch 'master' into react-hook"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1fbdc79190b3a5b8b35e44f9917d8e3c3e638e7c", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/1fbdc79190b3a5b8b35e44f9917d8e3c3e638e7c", "committedDate": "2020-05-20T08:44:36Z", "message": "Linting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "059fc141383282e096e182c63d34a34681e0708f", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/059fc141383282e096e182c63d34a34681e0708f", "committedDate": "2020-05-20T09:17:40Z", "message": "Add screenshot added in a hook (issue #995)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7ce52655e319655b74a6009ab143d9f2654970f6", "author": {"user": {"login": "vincent-psarga", "name": "Vincent"}}, "url": "https://github.com/cucumber/common/commit/7ce52655e319655b74a6009ab143d9f2654970f6", "committedDate": "2020-05-20T09:46:26Z", "message": "hooks.ndjson is not supposed to be checked in"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3037, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}