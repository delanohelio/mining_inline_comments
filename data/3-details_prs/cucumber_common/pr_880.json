{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY5MDMyNzk1", "number": 880, "title": "gherkin: Fix parsing of commented tags", "bodyText": "Summary\nTag parsing in gherkin suffers from four problems\n\nGherkin does not support comment anywhere but at the start of a line.\nIDEs and syntax highlighters suggest that it is possible.\nThe Java implementation splits tags on white space rather then @.\nWhile other languages split on @, tag expression do not support white space.\n\nTo illustrate:\nFeature: Example\n  @Example Tag and #Comment\n  Scenario: Example\nIn Java this example is tagged with the strings @Example, Tag, and, #Comment. In other languages this would be tagged with just @Example tag and #Comment.\nWhen trying to select this scenario using the tag expression @Example only the Java scenario would be executed. Trying to use @Example tag and #Comment as a tag expression results in a parse error. This means that tags are single words.\nSo by first removing the comments from the tag line by splitting on \\s# and then splitting uncommented tags on @ we can parse tags in line with IDE expectations. Invalidating tags containing white space takes care of non-selectable tags.\nMotivation and Context\nFixes:  #721\nTypes of changes\n\n\n Bug fix (non-breaking change which fixes an issue).\n New feature (non-breaking change which adds functionality).\n Breaking change (fix or feature that would cause existing functionality to not work as expected).\n\nChecklist:\n\n\n\n The change has been ported to Java.\n The change has been ported to Ruby.\n The change has been ported to JavaScript.\n The change has been ported to Go.\n I've added tests for my code.\n My change requires a change to the documentation.\n I have updated the documentation accordingly.\n I have updated the CHANGELOG accordingly.", "createdAt": "2020-01-30T11:53:49Z", "url": "https://github.com/cucumber/common/pull/880", "merged": true, "mergeCommit": {"oid": "7e68045543e44154e0030d74727a0a9f5eb8c9fb"}, "closed": true, "closedAt": "2020-02-06T17:02:27Z", "author": {"login": "mpkorstanje"}, "timelineItems": {"totalCount": 26, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb_ZDZtAH2gAyMzY5MDMyNzk1OjBlOTI4OWJkOWE4MzFmMDMxOTEwZjFlMGI3MDNjODZiN2UyZWRjMmY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcBtvKfgH2gAyMzY5MDMyNzk1OjkzZWQxNTI5MWZmOTZhMmZmNGNlYTY1MjM2ODJhZTcyNzRjMzBiODY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0e9289bd9a831f031910f1e0b703c86b7e2edc2f", "author": {"user": {"login": "mpkorstanje", "name": "M.P. Korstanje"}}, "url": "https://github.com/cucumber/common/commit/0e9289bd9a831f031910f1e0b703c86b7e2edc2f", "committedDate": "2020-01-30T11:43:30Z", "message": "Failing tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3106d85045d93247a00b4bfb0d077de55095a8b7", "author": {"user": {"login": "mpkorstanje", "name": "M.P. Korstanje"}}, "url": "https://github.com/cucumber/common/commit/3106d85045d93247a00b4bfb0d077de55095a8b7", "committedDate": "2020-01-30T11:43:47Z", "message": "Passing tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d306e28c08e4e27cbd0adee2677b1061681676b6", "author": {"user": {"login": "mpkorstanje", "name": "M.P. Korstanje"}}, "url": "https://github.com/cucumber/common/commit/d306e28c08e4e27cbd0adee2677b1061681676b6", "committedDate": "2020-01-30T12:46:16Z", "message": "Enforce whitespace bound"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3c3a37173dffaff25b30404c13b144a4d2d4a57c", "author": {"user": {"login": "mpkorstanje", "name": "M.P. Korstanje"}}, "url": "https://github.com/cucumber/common/commit/3c3a37173dffaff25b30404c13b144a4d2d4a57c", "committedDate": "2020-01-30T13:07:32Z", "message": "Clean up"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "74065daba5405ef24056d3cd594d2c02bbadf0d2", "author": {"user": {"login": "mpkorstanje", "name": "M.P. Korstanje"}}, "url": "https://github.com/cucumber/common/commit/74065daba5405ef24056d3cd594d2c02bbadf0d2", "committedDate": "2020-01-30T13:25:42Z", "message": "Makefile the build pass"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a21147b6474506cd6acae5072a1cc2d6a51e6b64", "author": {"user": {"login": "mpkorstanje", "name": "M.P. Korstanje"}}, "url": "https://github.com/cucumber/common/commit/a21147b6474506cd6acae5072a1cc2d6a51e6b64", "committedDate": "2020-01-30T17:31:43Z", "message": "Reject tags with whitespace"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ef59980383fddbd8dd45eafc857552dd6d05933", "author": {"user": {"login": "mpkorstanje", "name": "M.P. Korstanje"}}, "url": "https://github.com/cucumber/common/commit/8ef59980383fddbd8dd45eafc857552dd6d05933", "committedDate": "2020-01-30T17:50:41Z", "message": "Replace scanner with portable for loop"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ae9b4fb608ad69caaeef03991c3b85df4c999ee", "author": {"user": {"login": "mpkorstanje", "name": "M.P. Korstanje"}}, "url": "https://github.com/cucumber/common/commit/4ae9b4fb608ad69caaeef03991c3b85df4c999ee", "committedDate": "2020-01-30T17:51:13Z", "message": "Merge remote-tracking branch 'origin/master' into gherkin-java-fix-tag-parsing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "50469a470b7746a9880ae74aef476ad446d62950", "author": {"user": {"login": "mpkorstanje", "name": "M.P. Korstanje"}}, "url": "https://github.com/cucumber/common/commit/50469a470b7746a9880ae74aef476ad446d62950", "committedDate": "2020-01-30T17:53:16Z", "message": "Clean up"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b0d1bebe70c4dddfc6016c7799bf8591a9db1e60", "author": {"user": {"login": "mpkorstanje", "name": "M.P. Korstanje"}}, "url": "https://github.com/cucumber/common/commit/b0d1bebe70c4dddfc6016c7799bf8591a9db1e60", "committedDate": "2020-01-30T17:54:14Z", "message": "Clean up"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5de9c906631d8bdab1b6b7a0acdf7546a4c5c5bf", "author": {"user": {"login": "mpkorstanje", "name": "M.P. Korstanje"}}, "url": "https://github.com/cucumber/common/commit/5de9c906631d8bdab1b6b7a0acdf7546a4c5c5bf", "committedDate": "2020-01-31T10:14:24Z", "message": "Add acceptance tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ffcf902c00d58dd50d94ae77b515c14092fb8d80", "author": {"user": {"login": "mpkorstanje", "name": "M.P. Korstanje"}}, "url": "https://github.com/cucumber/common/commit/ffcf902c00d58dd50d94ae77b515c14092fb8d80", "committedDate": "2020-01-31T11:53:21Z", "message": "Make tests pass"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f3187807ae0b152f2aeb3b2aa2bb752440383e58", "author": {"user": {"login": "mpkorstanje", "name": "M.P. Korstanje"}}, "url": "https://github.com/cucumber/common/commit/f3187807ae0b152f2aeb3b2aa2bb752440383e58", "committedDate": "2020-01-31T11:54:01Z", "message": "Sync golden"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80f648df4f4cda6a9720c8976f50821710ebd996", "author": {"user": {"login": "mpkorstanje", "name": "M.P. Korstanje"}}, "url": "https://github.com/cucumber/common/commit/80f648df4f4cda6a9720c8976f50821710ebd996", "committedDate": "2020-01-31T12:48:35Z", "message": "Make JS tests pass"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ca8788b0a36f3c695dcc0b065c5ebbc7f24c9756", "author": {"user": {"login": "mpkorstanje", "name": "M.P. Korstanje"}}, "url": "https://github.com/cucumber/common/commit/ca8788b0a36f3c695dcc0b065c5ebbc7f24c9756", "committedDate": "2020-01-31T14:14:59Z", "message": "Happy cases pass"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c34b794047f9cd6e726d6e993011c9ec134d6bf1", "author": {"user": {"login": "mpkorstanje", "name": "M.P. Korstanje"}}, "url": "https://github.com/cucumber/common/commit/c34b794047f9cd6e726d6e993011c9ec134d6bf1", "committedDate": "2020-01-31T14:28:00Z", "message": "Sad cases pass"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxNTQxOTQw", "url": "https://github.com/cucumber/common/pull/880#pullrequestreview-351541940", "createdAt": "2020-01-31T14:31:29Z", "commit": {"oid": "c34b794047f9cd6e726d6e993011c9ec134d6bf1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMVQxNDozMTozMFrOFkNGXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMVQxNDozMTozMFrOFkNGXw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzUwNzY3OQ==", "bodyText": "@aslakhellesoy, @vincent-psarga  I don't understand why these ids changed. These scenarios didn't change position. Is there an implicit ordering going on?", "url": "https://github.com/cucumber/common/pull/880#discussion_r373507679", "createdAt": "2020-01-31T14:31:30Z", "author": {"login": "mpkorstanje"}, "path": "gherkin/c/testdata/good/tags.feature.pickles.ndjson", "diffHunk": "@@ -3,29 +3,29 @@\n     \"astNodeIds\": [\n       \"4\"\n     ],\n-    \"id\": \"24\",\n+    \"id\": \"34\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c34b794047f9cd6e726d6e993011c9ec134d6bf1"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxNTQzODcz", "url": "https://github.com/cucumber/common/pull/880#pullrequestreview-351543873", "createdAt": "2020-01-31T14:34:23Z", "commit": {"oid": "c34b794047f9cd6e726d6e993011c9ec134d6bf1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMVQxNDozNDoyM1rOFkNMCw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMVQxNDozNDoyM1rOFkNMCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzUwOTEzMQ==", "bodyText": "Tag line should not be repeated here.", "url": "https://github.com/cucumber/common/pull/880#discussion_r373509131", "createdAt": "2020-01-31T14:34:23Z", "author": {"login": "mpkorstanje"}, "path": "gherkin/dotnet/testdata/bad/whitespace_in_tags.feature.errors.ndjson", "diffHunk": "@@ -0,0 +1,12 @@\n+{\n+  \"attachment\": {\n+    \"source\": {\n+      \"location\": {\n+        \"column\": 3,\n+        \"line\": 3\n+      },\n+      \"uri\": \"testdata/bad/whitespace_in_tags.feature\"\n+    },\n+    \"text\": \"(3:3): A tag may not contain whitespace: @a tag containing whitespace\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c34b794047f9cd6e726d6e993011c9ec134d6bf1"}, "originalPosition": 10}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxNTQ0MTYx", "url": "https://github.com/cucumber/common/pull/880#pullrequestreview-351544161", "createdAt": "2020-01-31T14:34:48Z", "commit": {"oid": "c34b794047f9cd6e726d6e993011c9ec134d6bf1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMVQxNDozNDo0OFrOFkNM1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMVQxNDozNDo0OFrOFkNM1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzUwOTMzMw==", "bodyText": "Add newline", "url": "https://github.com/cucumber/common/pull/880#discussion_r373509333", "createdAt": "2020-01-31T14:34:48Z", "author": {"login": "mpkorstanje"}, "path": "gherkin/c/testdata/good/tags.feature", "diffHunk": "@@ -23,3 +23,15 @@ Examples:\n Examples: \n   | what            |\n   | more minimalism |\n+\n+@comment_tag1 #a comment\n+Scenario: comments\n+  Given a comment\n+\n+@comment_tag#2 #a comment\n+Scenario: hash in tags\n+  Given a comment is preceded by a space\n+\n+@joined_tag3@joined_tag4\n+Scenario: joined tags\n+  Given the @delimits tags", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c34b794047f9cd6e726d6e993011c9ec134d6bf1"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "166e21d811b3a285d983a876aa843be70ff597ca", "author": {"user": {"login": "mpkorstanje", "name": "M.P. Korstanje"}}, "url": "https://github.com/cucumber/common/commit/166e21d811b3a285d983a876aa843be70ff597ca", "committedDate": "2020-01-31T19:57:08Z", "message": "Add EOL"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f829dc6b609ef3f672a86fcfb3d87f5eb003e58", "author": {"user": {"login": "mpkorstanje", "name": "M.P. Korstanje"}}, "url": "https://github.com/cucumber/common/commit/6f829dc6b609ef3f672a86fcfb3d87f5eb003e58", "committedDate": "2020-01-31T20:00:39Z", "message": "Remove extra info"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5cafc0a801fc91793ce1d3a52b37e67b45cb06f", "author": {"user": {"login": "mpkorstanje", "name": "M.P. Korstanje"}}, "url": "https://github.com/cucumber/common/commit/d5cafc0a801fc91793ce1d3a52b37e67b45cb06f", "committedDate": "2020-01-31T20:22:01Z", "message": "Fix tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3229124d88221d267e60f38a8b3969b77e758376", "author": {"user": {"login": "mpkorstanje", "name": "M.P. Korstanje"}}, "url": "https://github.com/cucumber/common/commit/3229124d88221d267e60f38a8b3969b77e758376", "committedDate": "2020-01-31T21:17:24Z", "message": "Update CHANGELOG"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7bb299342d3b61882478f17499ec46047fbd8b30", "author": {"user": {"login": "mpkorstanje", "name": "M.P. Korstanje"}}, "url": "https://github.com/cucumber/common/commit/7bb299342d3b61882478f17499ec46047fbd8b30", "committedDate": "2020-02-06T00:02:03Z", "message": "Merge remote-tracking branch 'origin/master' into gherkin-java-fix-tag-parsing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f9033045a97408d6cca9850f5b529f24df643ea7", "author": {"user": {"login": "mpkorstanje", "name": "M.P. Korstanje"}}, "url": "https://github.com/cucumber/common/commit/f9033045a97408d6cca9850f5b529f24df643ea7", "committedDate": "2020-02-06T10:18:55Z", "message": "Release datatable v3.3.0"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "93ed15291ff96a2ff4cea6523682ae7274c30b86", "author": {"user": {"login": "mpkorstanje", "name": "M.P. Korstanje"}}, "url": "https://github.com/cucumber/common/commit/93ed15291ff96a2ff4cea6523682ae7274c30b86", "committedDate": "2020-02-06T16:57:15Z", "message": "Merge remote-tracking branch 'origin/master' into gherkin-java-fix-tag-parsing"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3059, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}