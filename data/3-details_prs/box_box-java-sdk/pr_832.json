{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU4NjAxNjQz", "number": 832, "title": "token downscoping for folders endpoints", "bodyText": "Adds folder API endpoint matching to determine a downscope token request resource attribute value", "createdAt": "2020-07-29T18:14:57Z", "url": "https://github.com/box/box-java-sdk/pull/832", "merged": true, "mergeCommit": {"oid": "066a8ad980d69572b18af35981a5d7a226d4264f"}, "closed": true, "closedAt": "2020-08-20T21:47:22Z", "author": {"login": "dtrodger"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc5uvA4gH2gAyNDU4NjAxNjQzOmIzN2RkZTczMDAyOTE0NWQzNDY0NGZlNDA3OWVjODc0NjZhZDA4OWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdA3T4oAFqTQ3MjAwNjkwNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b37dde730029145d34644fe4079ec87466ad089d", "author": {"user": {"login": "boxdave", "name": null}}, "url": "https://github.com/box/box-java-sdk/commit/b37dde730029145d34644fe4079ec87466ad089d", "committedDate": "2020-07-29T17:46:45Z", "message": "token downscoping for folders endpoints"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwNDg2NDk5", "url": "https://github.com/box/box-java-sdk/pull/832#pullrequestreview-460486499", "createdAt": "2020-08-04T04:25:03Z", "commit": {"oid": "b37dde730029145d34644fe4079ec87466ad089d"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQwNDoyNTowM1rOG7Qmnw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQwNDoyNTo0N1rOG7QnZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDc5MTE5OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        final String apiFilesEndpointPattern = \"https://api.box.com/2.0/files/\\\\d+\";\n          \n          \n            \n                        final String apiFilesEndpointPattern = \".*box.com/2.0/files/\\\\d+\";\n          \n      \n    \n    \n  \n\nI didn't catch this before.  I think we should we allow for more flexibility with the subdomains, right?", "url": "https://github.com/box/box-java-sdk/pull/832#discussion_r464791199", "createdAt": "2020-08-04T04:25:03Z", "author": {"login": "PJSimon"}, "path": "src/main/java/com/box/sdk/BoxAPIConnection.java", "diffHunk": "@@ -843,10 +843,11 @@ protected ResourceLinkType determineResourceLinkType(String resourceLink) {\n         try {\n             URL validUrl = new URL(resourceLink);\n             String validURLStr = validUrl.toString();\n-            final String apiEndpointPattern = \"https://api.box.com/2.0/files/\\\\d+\";\n+            final String apiFilesEndpointPattern = \"https://api.box.com/2.0/files/\\\\d+\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b37dde730029145d34644fe4079ec87466ad089d"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDc5MTM5Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        final String apiFoldersEndpointPattern = \"https://api.box.com/2.0/folders/\\\\d+\";\n          \n          \n            \n                        final String apiFoldersEndpointPattern = \".*box.com/2.0/folders/\\\\d+\";\n          \n      \n    \n    \n  \n\nI didn't catch this before.  I think we should we allow for more flexibility with the subdomains, right?", "url": "https://github.com/box/box-java-sdk/pull/832#discussion_r464791396", "createdAt": "2020-08-04T04:25:47Z", "author": {"login": "PJSimon"}, "path": "src/main/java/com/box/sdk/BoxAPIConnection.java", "diffHunk": "@@ -843,10 +843,11 @@ protected ResourceLinkType determineResourceLinkType(String resourceLink) {\n         try {\n             URL validUrl = new URL(resourceLink);\n             String validURLStr = validUrl.toString();\n-            final String apiEndpointPattern = \"https://api.box.com/2.0/files/\\\\d+\";\n+            final String apiFilesEndpointPattern = \"https://api.box.com/2.0/files/\\\\d+\";\n+            final String apiFoldersEndpointPattern = \"https://api.box.com/2.0/folders/\\\\d+\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b37dde730029145d34644fe4079ec87466ad089d"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a2528bf41c90a72aef82e9ba9ddf671f807ab6c5", "author": {"user": {"login": "boxdave", "name": null}}, "url": "https://github.com/box/box-java-sdk/commit/a2528bf41c90a72aef82e9ba9ddf671f807ab6c5", "committedDate": "2020-08-12T17:34:34Z", "message": "more general regex URL matching and line break on conditional for linting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae34791739a0093a08a301d1b3058336bf358761", "author": {"user": {"login": "PJSimon", "name": "Patrick Simon"}}, "url": "https://github.com/box/box-java-sdk/commit/ae34791739a0093a08a301d1b3058336bf358761", "committedDate": "2020-08-20T21:41:51Z", "message": "Merge branch 'master' into bug/folder-token-downscoping"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyMDA2OTA0", "url": "https://github.com/box/box-java-sdk/pull/832#pullrequestreview-472006904", "createdAt": "2020-08-20T21:43:44Z", "commit": {"oid": "ae34791739a0093a08a301d1b3058336bf358761"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2977, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}