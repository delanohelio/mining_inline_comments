{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAzODIxOTgw", "number": 2855, "title": "Drools 5241 - Create archetype for PMML models with drool implementation", "bodyText": "@danielezonca @jiripetrlik\nThis PR is about create a specific archetype to generate modules for implementation using drools", "createdAt": "2020-04-15T15:12:32Z", "url": "https://github.com/kiegroup/drools/pull/2855", "merged": true, "mergeCommit": {"oid": "33db166011eec28528b2cabe795c2b7cbd91ec31"}, "closed": true, "closedAt": "2020-04-20T08:53:15Z", "author": {"login": "gitgabrio"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcX4W5ZAH2gAyNDAzODIxOTgwOjgzNTYxNmJkZTY5ODZmN2RjMGUwNzAzNDI5ZDA1MjNmMWYwOGJlNmQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcYNIVYAFqTM5NDY1OTYwNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "835616bde6986f7dc0e0703429d0523f1f08be6d", "author": {"user": {"login": "gitgabrio", "name": "Gabriele Cardosi"}}, "url": "https://github.com/kiegroup/drools/commit/835616bde6986f7dc0e0703429d0523f1f08be6d", "committedDate": "2020-04-15T13:46:02Z", "message": "[DROOLS-4859] Fixing generic models archetype"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5c128e3cd0eac7ea391897c48e847b42b327d521", "author": {"user": {"login": "gitgabrio", "name": "Gabriele Cardosi"}}, "url": "https://github.com/kiegroup/drools/commit/5c128e3cd0eac7ea391897c48e847b42b327d521", "committedDate": "2020-04-15T15:07:36Z", "message": "[DROOLS-4859] Implemented model-drools archetype"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzOTQ2NTY5", "url": "https://github.com/kiegroup/drools/pull/2855#pullrequestreview-393946569", "createdAt": "2020-04-15T16:37:32Z", "commit": {"oid": "5c128e3cd0eac7ea391897c48e847b42b327d521"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQxNjozNzozMlrOGGCL_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQxNjo0NzozNVrOGGClQA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODk4MDQ3OA==", "bodyText": "Can you add some more new lines? \ud83d\ude04", "url": "https://github.com/kiegroup/drools/pull/2855#discussion_r408980478", "createdAt": "2020-04-15T16:37:32Z", "author": {"login": "danielezonca"}, "path": "kie-pmml-new/kie-pmml-models-drools-archetype/Readme.md", "diffHunk": "@@ -0,0 +1,45 @@\n+Models Archetype\n+================\n+\n+Usage:\n+\n+    cd kie-pmml-models-drools\n+\n+    mvn archetype:generate -B \\ (not interactive)\n+    -DarchetypeGroupId=org.kie \\\n+    -DarchetypeArtifactId=kie-pmml-models-drools-archetype \\\n+    -DarchetypeVersion=(current_kie_version) \\\n+    -DmodelName=(model name, first letter capital) \\ e.g. Testing\n+\n+N.B.\n+\n+For model name do follow names as defined inside PMML specs, e.g RegressionModel -> Regression, TreeModel -> Tree\n+\n+    mvn archetype:generate -B -DarchetypeGroupId=org.kie -DarchetypeArtifactId=kie-pmml-models-drools-archetype -DarchetypeVersion=7.37.0-SNAPSHOT -DmodelName=NaiveBayes\n+\n+Test:\n+\n+The src/test/resources/projects contains two folder to have IT tests of the archetype itself.\n+\n+Inside such folder there is\n+1. some specifications for the project to be created (archetype.pom.properties, archetype.properties)\n+2. a \"reference\" project, to compare the generated-one with\n+\n+During \"archetype:integration-test\" goal, what happen is\n+\n+1. a project is generated based on the given specifications\n+2. the generated project is compared (file by file) with the reference one\n+3. if the comparison is successful, the generated project goes through the phase describe inside \"goal.txt\"\n+4. Being the above \"verify\", the project is compiled and tested.\n+\n+If reference and generated project differs for number or content of files, a specific error is printed out in console\n+If the generated project does not compile (due to some modification in the underlying models) a usual \"compilation error\" is printed out in console.\n+\n+See https://maven.apache.org/archetype/maven-archetype-plugin/integration-test-mojo.html for more details.\n+\n+\n+\n+\n+\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c128e3cd0eac7ea391897c48e847b42b327d521"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODk4MTYyNQ==", "bodyText": "I think it is better to add this step to the README instead of having it here. Wdyt?", "url": "https://github.com/kiegroup/drools/pull/2855#discussion_r408981625", "createdAt": "2020-04-15T16:39:16Z", "author": {"login": "danielezonca"}, "path": "kie-pmml-new/kie-pmml-models-drools-archetype/src/main/resources/archetype-resources/__rootArtifactId__-evaluator/pom.xml", "diffHunk": "@@ -0,0 +1,65 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://maven.apache.org/POM/4.0.0\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <parent>\n+    <groupId>${groupId}</groupId>\n+    <artifactId>kie-pmml-models-drools-${artifactModelName}</artifactId>\n+    <version>${version}</version>\n+  </parent>\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <artifactId>kie-pmml-models-drools-${artifactModelName}-evaluator</artifactId>\n+  <name>KIE :: PMML :: Models :: Drools :: ${modelName} :: Evaluator</name>\n+  <description>PMML ${modelName} Evaluator</description>\n+\n+  <dependencies>\n+    <!-- PMML -->\n+    <dependency>\n+      <groupId>${groupId}</groupId>\n+      <artifactId>kie-pmml-models-drools-${artifactModelName}-model</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>${groupId}</groupId>\n+      <artifactId>kie-pmml-evaluator-core</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.kie</groupId>\n+      <artifactId>kie-test-util</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <!-- EXTERNAL -->\n+    <!-- TEST -->\n+    <dependency>\n+      <groupId>org.kie</groupId>\n+      <artifactId>kie-pmml-compiler-api</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.kie</groupId>\n+      <artifactId>kie-pmml-compiler-api</artifactId>\n+      <classifier>tests</classifier>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.kie</groupId>\n+      <artifactId>kie-pmml-models-drools-${artifactModelName}-compiler</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+  </dependencies>\n+\n+  <dependencyManagement>\n+    <!-- TODO MOVE TO kie-pmml-new/pom.xml -->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c128e3cd0eac7ea391897c48e847b42b327d521"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODk4Njk0NA==", "bodyText": "Don't we have a drools-core dependency in this pom? I was expecting to have it", "url": "https://github.com/kiegroup/drools/pull/2855#discussion_r408986944", "createdAt": "2020-04-15T16:47:35Z", "author": {"login": "danielezonca"}, "path": "kie-pmml-new/kie-pmml-models-drools-archetype/src/main/resources/archetype-resources/__rootArtifactId__-evaluator/pom.xml", "diffHunk": "@@ -0,0 +1,65 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c128e3cd0eac7ea391897c48e847b42b327d521"}, "originalPosition": 1}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a26e6983d92102ae777c55f2f951159bacdfcda", "author": {"user": {"login": "gitgabrio", "name": "Gabriele Cardosi"}}, "url": "https://github.com/kiegroup/drools/commit/3a26e6983d92102ae777c55f2f951159bacdfcda", "committedDate": "2020-04-16T07:40:28Z", "message": "[DROOLS-5241] Add Post-creation documentation. Declaring kie-pmml-models-drools-archetype module in parent pom"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk0Mzg1NTMz", "url": "https://github.com/kiegroup/drools/pull/2855#pullrequestreview-394385533", "createdAt": "2020-04-16T07:57:45Z", "commit": {"oid": "3a26e6983d92102ae777c55f2f951159bacdfcda"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk0NTIyOTA4", "url": "https://github.com/kiegroup/drools/pull/2855#pullrequestreview-394522908", "createdAt": "2020-04-16T10:59:45Z", "commit": {"oid": "3a26e6983d92102ae777c55f2f951159bacdfcda"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQxMDo1OTo0NVrOGGf-Hw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQxMTowNjo1OFrOGGgMLg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTQ2ODQ0Nw==", "bodyText": "Isn't this inherited from parents?", "url": "https://github.com/kiegroup/drools/pull/2855#discussion_r409468447", "createdAt": "2020-04-16T10:59:45Z", "author": {"login": "jiripetrlik"}, "path": "kie-pmml-new/kie-pmml-models-drools-archetype/pom.xml", "diffHunk": "@@ -0,0 +1,100 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+\n+<project xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <parent>\n+    <groupId>org.kie</groupId>\n+    <artifactId>kie-pmml-new</artifactId>\n+    <version>7.37.0-SNAPSHOT</version>\n+  </parent>\n+\n+  <artifactId>kie-pmml-models-drools-archetype</artifactId>\n+  <packaging>jar</packaging>\n+\n+  <name>KIE :: PMML :: Models :: Drools :: Archetype</name>\n+  <description>Archetype for actual PMML model with Drools implementation</description>\n+\n+  <properties>\n+    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n+    <maven.compiler.source>1.8</maven.compiler.source>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3a26e6983d92102ae777c55f2f951159bacdfcda"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTQ2OTIxNA==", "bodyText": "I think it would be better to inherit version from parent or use plugin management or property instead of hard coded version.", "url": "https://github.com/kiegroup/drools/pull/2855#discussion_r409469214", "createdAt": "2020-04-16T11:01:16Z", "author": {"login": "jiripetrlik"}, "path": "kie-pmml-new/kie-pmml-models-drools-archetype/pom.xml", "diffHunk": "@@ -0,0 +1,100 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+\n+<project xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <parent>\n+    <groupId>org.kie</groupId>\n+    <artifactId>kie-pmml-new</artifactId>\n+    <version>7.37.0-SNAPSHOT</version>\n+  </parent>\n+\n+  <artifactId>kie-pmml-models-drools-archetype</artifactId>\n+  <packaging>jar</packaging>\n+\n+  <name>KIE :: PMML :: Models :: Drools :: Archetype</name>\n+  <description>Archetype for actual PMML model with Drools implementation</description>\n+\n+  <properties>\n+    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n+    <maven.compiler.source>1.8</maven.compiler.source>\n+    <maven.compiler.target>1.8</maven.compiler.target>\n+  </properties>\n+\n+  <build>\n+    <plugins>\n+      <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+        <artifactId>maven-archetype-plugin</artifactId>\n+        <configuration>\n+          <ignoreEOLStyle>true</ignoreEOLStyle>\n+          <debug>true</debug>\n+          <noLog>false</noLog>\n+        </configuration>\n+        <executions>\n+          <execution>\n+            <goals>\n+              <goal>integration-test</goal>\n+            </goals>\n+          </execution>\n+        </executions>\n+      </plugin>\n+      <plugin>\n+        <artifactId>maven-resources-plugin</artifactId>\n+        <version>3.1.0</version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3a26e6983d92102ae777c55f2f951159bacdfcda"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTQ3MDM1NQ==", "bodyText": "Is this Maven archetype intended only for RedHat? If not I think it would be better to leave it on user to write license and copyright information.", "url": "https://github.com/kiegroup/drools/pull/2855#discussion_r409470355", "createdAt": "2020-04-16T11:03:36Z", "author": {"login": "jiripetrlik"}, "path": "kie-pmml-new/kie-pmml-models-drools-archetype/src/main/resources/archetype-resources/__rootArtifactId__-compiler/src/main/java/__packageModelName__/compiler/executor/__modelName__ModelImplementationProvider.java", "diffHunk": "@@ -0,0 +1,44 @@\n+#set($str=\"\")\n+#set($dt=$str.getClass().forName(\"java.util.Date\").newInstance())\n+#set($year=$dt.getYear()+1900)\n+/*\n+* Copyright ${year} Red Hat, Inc. and/or its affiliates.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3a26e6983d92102ae777c55f2f951159bacdfcda"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTQ3MDcwMg==", "bodyText": "Please remove license and copyright template from archetype.", "url": "https://github.com/kiegroup/drools/pull/2855#discussion_r409470702", "createdAt": "2020-04-16T11:04:18Z", "author": {"login": "jiripetrlik"}, "path": "kie-pmml-new/kie-pmml-models-drools-archetype/src/main/resources/archetype-resources/__rootArtifactId__-compiler/src/main/java/__packageModelName__/compiler/factories/KiePMML__modelName__ModelFactory.java", "diffHunk": "@@ -0,0 +1,39 @@\n+#set($str=\"\")\n+#set($dt=$str.getClass().forName(\"java.util.Date\").newInstance())\n+#set($year=$dt.getYear()+1900)\n+/*\n+ * Copyright ${year} Red Hat, Inc. and/or its affiliates.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3a26e6983d92102ae777c55f2f951159bacdfcda"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTQ3MTY3Nw==", "bodyText": "I would suggest to let this test failed with some unimplemented exception. Or at least ignore it. Otherwise it will provide the false assumption that it is implemented and working.", "url": "https://github.com/kiegroup/drools/pull/2855#discussion_r409471677", "createdAt": "2020-04-16T11:06:12Z", "author": {"login": "jiripetrlik"}, "path": "kie-pmml-new/kie-pmml-models-drools-archetype/src/main/resources/archetype-resources/__rootArtifactId__-compiler/src/test/java/__packageModelName__/drools/compiler/executor/__modelName__ModelImplementationProviderTest.java", "diffHunk": "@@ -0,0 +1,40 @@\n+#set($str=\"\")\n+#set($dt=$str.getClass().forName(\"java.util.Date\").newInstance())\n+#set($year=$dt.getYear()+1900)\n+/*\n+ * Copyright ${year} Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package ${package}.${packageModelName}.compiler.executor;\n+\n+import org.kie.pmml.commons.model.enums.PMML_MODEL;\n+import org.junit.Test;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.fail;\n+\n+public class ${modelName}ModelImplementationProviderTest {\n+\n+    private static final ${modelName}ModelImplementationProvider PROVIDER= new ${modelName}ModelImplementationProvider();\n+\n+    @Test\n+    public void getPMMLModelType(){\n+        assertEquals(PMML_MODEL.${modelNameUppercase}_MODEL,PROVIDER.getPMMLModelType());\n+    }\n+\n+    @Test\n+    public void getKiePMMLModel() throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3a26e6983d92102ae777c55f2f951159bacdfcda"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTQ3MjA0Ng==", "bodyText": "Please remove RedHat license and copyright template from archetype.", "url": "https://github.com/kiegroup/drools/pull/2855#discussion_r409472046", "createdAt": "2020-04-16T11:06:58Z", "author": {"login": "jiripetrlik"}, "path": "kie-pmml-new/kie-pmml-models-drools-archetype/src/main/resources/archetype-resources/__rootArtifactId__-evaluator/src/main/java/__packageModelName__/drools/evaluator/PMML__modelName__ModelEvaluator.java", "diffHunk": "@@ -0,0 +1,33 @@\n+#set($str=\"\")\n+#set($dt=$str.getClass().forName(\"java.util.Date\").newInstance())\n+#set($year=$dt.getYear()+1900)\n+/*\n+ * Copyright ${year} Red Hat, Inc. and/or its affiliates.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3a26e6983d92102ae777c55f2f951159bacdfcda"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f293aa804332c3baf86e578d840cb3178daa74c5", "author": {"user": {"login": "gitgabrio", "name": "Gabriele Cardosi"}}, "url": "https://github.com/kiegroup/drools/commit/f293aa804332c3baf86e578d840cb3178daa74c5", "committedDate": "2020-04-16T12:04:29Z", "message": "[DROOLS-5241] Fixed as per PR suggestions"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk0NjU5NjA1", "url": "https://github.com/kiegroup/drools/pull/2855#pullrequestreview-394659605", "createdAt": "2020-04-16T13:58:08Z", "commit": {"oid": "f293aa804332c3baf86e578d840cb3178daa74c5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1486, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}