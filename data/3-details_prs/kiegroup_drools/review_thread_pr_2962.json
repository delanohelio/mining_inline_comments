{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQwMDE3MDY3", "number": 2962, "reviewThreads": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQxNDoxMDozM1rOEKHazw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwODowNDozMFrOEKaDIw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5MDQyNzY3OnYy", "diffSide": "RIGHT", "path": "kie-pmml-trusty/kie-pmml-compiler/kie-pmml-compiler-commons/src/main/java/org/kie/pmml/compiler/commons/utils/DerivedFieldFunctionUtils.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQxNDoxMDozM1rOGq-Q9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwOToyNTowMFrOGreG8Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzcxMzUyNQ==", "bodyText": "Just a question, is this list fixed or it is supposed to be extended by user?", "url": "https://github.com/kiegroup/drools/pull/2962#discussion_r447713525", "createdAt": "2020-06-30T14:10:33Z", "author": {"login": "danielezonca"}, "path": "kie-pmml-trusty/kie-pmml-compiler/kie-pmml-compiler-commons/src/main/java/org/kie/pmml/compiler/commons/utils/DerivedFieldFunctionUtils.java", "diffHunk": "@@ -0,0 +1,247 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.kie.pmml.compiler.commons.utils;\n+\n+import java.util.Collections;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.concurrent.atomic.AtomicInteger;\n+\n+import com.github.javaparser.ast.NodeList;\n+import com.github.javaparser.ast.body.MethodDeclaration;\n+import com.github.javaparser.ast.expr.MethodCallExpr;\n+import com.github.javaparser.ast.expr.MethodReferenceExpr;\n+import com.github.javaparser.ast.expr.NameExpr;\n+import com.github.javaparser.ast.expr.NullLiteralExpr;\n+import com.github.javaparser.ast.expr.StringLiteralExpr;\n+import com.github.javaparser.ast.expr.TypeExpr;\n+import com.github.javaparser.ast.stmt.BlockStmt;\n+import com.github.javaparser.ast.stmt.ExpressionStmt;\n+import com.github.javaparser.ast.stmt.ReturnStmt;\n+import com.github.javaparser.ast.type.ClassOrInterfaceType;\n+import org.dmg.pmml.Aggregate;\n+import org.dmg.pmml.Apply;\n+import org.dmg.pmml.Constant;\n+import org.dmg.pmml.DerivedField;\n+import org.dmg.pmml.Discretize;\n+import org.dmg.pmml.Expression;\n+import org.dmg.pmml.FieldRef;\n+import org.dmg.pmml.Lag;\n+import org.dmg.pmml.MapValues;\n+import org.dmg.pmml.NormContinuous;\n+import org.dmg.pmml.NormDiscrete;\n+import org.dmg.pmml.TextIndex;\n+import org.kie.pmml.commons.model.enums.DATA_TYPE;\n+import org.kie.pmml.commons.model.tuples.KiePMMLNameValue;\n+\n+import static com.github.javaparser.StaticJavaParser.parseClassOrInterfaceType;\n+import static org.kie.pmml.compiler.commons.utils.CommonCodegenUtils.OPTIONAL_FILTERED_KIEPMMLNAMEVALUE_NAME;\n+import static org.kie.pmml.compiler.commons.utils.CommonCodegenUtils.getFilteredKiePMMLNameValueExpression;\n+import static org.kie.pmml.compiler.commons.utils.CommonCodegenUtils.getMethodDeclaration;\n+import static org.kie.pmml.compiler.commons.utils.CommonCodegenUtils.getTypedClassOrInterfaceType;\n+\n+/**\n+ * Class meant to provide <i>helper</i> methods to retrieve <code>Function</code> code-generators\n+ * out of <code>DerivedField</code>s\n+ */\n+public class DerivedFieldFunctionUtils {\n+\n+    static final String KIEPMMLNAMEVALUE_LIST_PARAM = \"param1\"; // it is the first parameter\n+\n+    private DerivedFieldFunctionUtils() {\n+        // Avoid instantiation\n+    }\n+\n+    static Map<String, MethodDeclaration> getDerivedFieldsMethodMap(final List<DerivedField> derivedFields, final AtomicInteger arityCounter) {\n+        Map<String, MethodDeclaration> toReturn = new HashMap<>();\n+        derivedFields.forEach(derivedField ->\n+                                      toReturn.put(derivedField.getName().getValue(),\n+                                                   getDerivedFieldMethodDeclaration(derivedField, arityCounter)));\n+        return toReturn;\n+    }\n+\n+    static MethodDeclaration getDerivedFieldMethodDeclaration(final DerivedField derivedField, final AtomicInteger arityCounter) {\n+        final Expression expression = derivedField.getExpression();\n+        if (expression != null) {\n+            return getExpressionMethodDeclaration(expression, arityCounter);\n+        } else {\n+            // TODO {gcardosi}\n+            return new MethodDeclaration();\n+        }\n+    }\n+\n+    static MethodDeclaration getExpressionMethodDeclaration(final Expression expression, final AtomicInteger arityCounter) {\n+        int methodArity = arityCounter.addAndGet(1);\n+        if (expression instanceof Aggregate) {\n+            return getAggregatefMethodDeclaration((Aggregate) expression, methodArity);\n+        } else if (expression instanceof Apply) {\n+            return getApplyMethodDeclaration((Apply)expression, methodArity);\n+        } else if (expression instanceof Constant) {\n+            return getConstantMethodDeclaration((Constant)expression, methodArity);\n+        } else if (expression instanceof Discretize) {\n+            return getDiscretizeMethodDeclaration((Discretize)expression, methodArity);\n+        } else if (expression instanceof FieldRef) {\n+            return getFieldRefMethodDeclaration((FieldRef)expression, methodArity);\n+        } else if (expression instanceof Lag) {\n+            return getLagMethodDeclaration((Lag)expression, methodArity);\n+        } else if (expression instanceof MapValues) {\n+            return getMapValuesMethodDeclaration((MapValues)expression, methodArity);\n+        } else if (expression instanceof NormContinuous) {\n+            return getNormContinuousMethodDeclaration((NormContinuous)expression, methodArity);\n+        } else if (expression instanceof NormDiscrete) {\n+            return getNormDiscreteMethodDeclaration((NormDiscrete)expression, methodArity);\n+        } else if (expression instanceof TextIndex) {\n+            return getTextIndexMethodDeclaration((TextIndex)expression, methodArity);\n+        } else {\n+            throw new IllegalArgumentException(String.format(\"Expression %s not managed\", expression.getClass()));\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c7299312e90bbc25498bda63af6e8fdaae43e295"}, "originalPosition": 111}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODIzNTI0OQ==", "bodyText": "@danielezonca\nsee https://github.com/kiegroup/drools/pull/2966/files#r448235042", "url": "https://github.com/kiegroup/drools/pull/2962#discussion_r448235249", "createdAt": "2020-07-01T09:25:00Z", "author": {"login": "gitgabrio"}, "path": "kie-pmml-trusty/kie-pmml-compiler/kie-pmml-compiler-commons/src/main/java/org/kie/pmml/compiler/commons/utils/DerivedFieldFunctionUtils.java", "diffHunk": "@@ -0,0 +1,247 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.kie.pmml.compiler.commons.utils;\n+\n+import java.util.Collections;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.concurrent.atomic.AtomicInteger;\n+\n+import com.github.javaparser.ast.NodeList;\n+import com.github.javaparser.ast.body.MethodDeclaration;\n+import com.github.javaparser.ast.expr.MethodCallExpr;\n+import com.github.javaparser.ast.expr.MethodReferenceExpr;\n+import com.github.javaparser.ast.expr.NameExpr;\n+import com.github.javaparser.ast.expr.NullLiteralExpr;\n+import com.github.javaparser.ast.expr.StringLiteralExpr;\n+import com.github.javaparser.ast.expr.TypeExpr;\n+import com.github.javaparser.ast.stmt.BlockStmt;\n+import com.github.javaparser.ast.stmt.ExpressionStmt;\n+import com.github.javaparser.ast.stmt.ReturnStmt;\n+import com.github.javaparser.ast.type.ClassOrInterfaceType;\n+import org.dmg.pmml.Aggregate;\n+import org.dmg.pmml.Apply;\n+import org.dmg.pmml.Constant;\n+import org.dmg.pmml.DerivedField;\n+import org.dmg.pmml.Discretize;\n+import org.dmg.pmml.Expression;\n+import org.dmg.pmml.FieldRef;\n+import org.dmg.pmml.Lag;\n+import org.dmg.pmml.MapValues;\n+import org.dmg.pmml.NormContinuous;\n+import org.dmg.pmml.NormDiscrete;\n+import org.dmg.pmml.TextIndex;\n+import org.kie.pmml.commons.model.enums.DATA_TYPE;\n+import org.kie.pmml.commons.model.tuples.KiePMMLNameValue;\n+\n+import static com.github.javaparser.StaticJavaParser.parseClassOrInterfaceType;\n+import static org.kie.pmml.compiler.commons.utils.CommonCodegenUtils.OPTIONAL_FILTERED_KIEPMMLNAMEVALUE_NAME;\n+import static org.kie.pmml.compiler.commons.utils.CommonCodegenUtils.getFilteredKiePMMLNameValueExpression;\n+import static org.kie.pmml.compiler.commons.utils.CommonCodegenUtils.getMethodDeclaration;\n+import static org.kie.pmml.compiler.commons.utils.CommonCodegenUtils.getTypedClassOrInterfaceType;\n+\n+/**\n+ * Class meant to provide <i>helper</i> methods to retrieve <code>Function</code> code-generators\n+ * out of <code>DerivedField</code>s\n+ */\n+public class DerivedFieldFunctionUtils {\n+\n+    static final String KIEPMMLNAMEVALUE_LIST_PARAM = \"param1\"; // it is the first parameter\n+\n+    private DerivedFieldFunctionUtils() {\n+        // Avoid instantiation\n+    }\n+\n+    static Map<String, MethodDeclaration> getDerivedFieldsMethodMap(final List<DerivedField> derivedFields, final AtomicInteger arityCounter) {\n+        Map<String, MethodDeclaration> toReturn = new HashMap<>();\n+        derivedFields.forEach(derivedField ->\n+                                      toReturn.put(derivedField.getName().getValue(),\n+                                                   getDerivedFieldMethodDeclaration(derivedField, arityCounter)));\n+        return toReturn;\n+    }\n+\n+    static MethodDeclaration getDerivedFieldMethodDeclaration(final DerivedField derivedField, final AtomicInteger arityCounter) {\n+        final Expression expression = derivedField.getExpression();\n+        if (expression != null) {\n+            return getExpressionMethodDeclaration(expression, arityCounter);\n+        } else {\n+            // TODO {gcardosi}\n+            return new MethodDeclaration();\n+        }\n+    }\n+\n+    static MethodDeclaration getExpressionMethodDeclaration(final Expression expression, final AtomicInteger arityCounter) {\n+        int methodArity = arityCounter.addAndGet(1);\n+        if (expression instanceof Aggregate) {\n+            return getAggregatefMethodDeclaration((Aggregate) expression, methodArity);\n+        } else if (expression instanceof Apply) {\n+            return getApplyMethodDeclaration((Apply)expression, methodArity);\n+        } else if (expression instanceof Constant) {\n+            return getConstantMethodDeclaration((Constant)expression, methodArity);\n+        } else if (expression instanceof Discretize) {\n+            return getDiscretizeMethodDeclaration((Discretize)expression, methodArity);\n+        } else if (expression instanceof FieldRef) {\n+            return getFieldRefMethodDeclaration((FieldRef)expression, methodArity);\n+        } else if (expression instanceof Lag) {\n+            return getLagMethodDeclaration((Lag)expression, methodArity);\n+        } else if (expression instanceof MapValues) {\n+            return getMapValuesMethodDeclaration((MapValues)expression, methodArity);\n+        } else if (expression instanceof NormContinuous) {\n+            return getNormContinuousMethodDeclaration((NormContinuous)expression, methodArity);\n+        } else if (expression instanceof NormDiscrete) {\n+            return getNormDiscreteMethodDeclaration((NormDiscrete)expression, methodArity);\n+        } else if (expression instanceof TextIndex) {\n+            return getTextIndexMethodDeclaration((TextIndex)expression, methodArity);\n+        } else {\n+            throw new IllegalArgumentException(String.format(\"Expression %s not managed\", expression.getClass()));\n+        }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzcxMzUyNQ=="}, "originalCommit": {"oid": "c7299312e90bbc25498bda63af6e8fdaae43e295"}, "originalPosition": 111}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5MzI5ODMxOnYy", "diffSide": "RIGHT", "path": "kie-pmml-trusty/kie-pmml-models/kie-pmml-models-drools/kie-pmml-models-drools-tree/kie-pmml-models-drools-tree-compiler/src/main/java/org/kie/pmml/models/drools/tree/compiler/factories/KiePMMLTreeModelASTFactory.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwNzowOTozMlrOGrZgeg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwNzowOTozMlrOGrZgeg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODE1OTg2Ng==", "bodyText": "to be removed?", "url": "https://github.com/kiegroup/drools/pull/2962#discussion_r448159866", "createdAt": "2020-07-01T07:09:32Z", "author": {"login": "danielezonca"}, "path": "kie-pmml-trusty/kie-pmml-models/kie-pmml-models-drools/kie-pmml-models-drools-tree/kie-pmml-models-drools-tree-compiler/src/main/java/org/kie/pmml/models/drools/tree/compiler/factories/KiePMMLTreeModelASTFactory.java", "diffHunk": "@@ -48,15 +49,26 @@ private KiePMMLTreeModelASTFactory() {\n     /**\n      * Returns the <code>KiePMMLDroolsAST</code> built out of the given parameters.\n      * It also <b>populate</b> the <b>fieldNameTypeNameMap</b> with mapping between original field' name and <b>original type/generated type</b> tupla\n+     *\n      * @param dataDictionary\n      * @param model\n      * @param fieldTypeMap\n+     * @param types\n      * @return\n      */\n-    public static KiePMMLDroolsAST getKiePMMLDroolsAST(DataDictionary dataDictionary, TreeModel model, final Map<String, KiePMMLOriginalTypeGeneratedType> fieldTypeMap) {\n+    public static KiePMMLDroolsAST getKiePMMLDroolsAST(final DataDictionary dataDictionary,\n+                                                       final TreeModel model,\n+                                                       final Map<String, KiePMMLOriginalTypeGeneratedType> fieldTypeMap,\n+                                                       final List<KiePMMLDroolsType> types) {\n         logger.trace(\"getKiePMMLDroolsAST {} {}\", dataDictionary, model);\n         DATA_TYPE targetType = getTargetFieldType(dataDictionary, model);\n-        List<KiePMMLDroolsType> types = KiePMMLDataDictionaryASTFactory.factory(fieldTypeMap).declareTypes(dataDictionary);\n+//        List<KiePMMLDroolsType> types = fieldTypeMap.values()\n+//                .stream().map(kiePMMLOriginalTypeGeneratedType -> {\n+//                    String type = DATA_TYPE.byName(kiePMMLOriginalTypeGeneratedType.getOriginalType()).getMappedClass().getSimpleName();\n+//                    return new KiePMMLDroolsType(kiePMMLOriginalTypeGeneratedType.getGeneratedType(), type);\n+//                })\n+//                .collect(Collectors.toList());\n+//        types.addAll(KiePMMLDataDictionaryASTFactory.factory(fieldTypeMap).declareTypes(dataDictionary));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1dac2c626760e2d20b1e2a2a99520d3725e42bce"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5MzMxMzAxOnYy", "diffSide": "RIGHT", "path": "kie-pmml-trusty/kie-pmml-models/kie-pmml-models-regression/kie-pmml-models-regression-tests/src/test/java/org/kie/pmml/regression/tests/LogisticRegressionTest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwNzoxNDoyMFrOGrZpdQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwOTozMjowNlrOGreWkg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODE2MjE2NQ==", "bodyText": "Can you please move it to a dedicated disabled test method?", "url": "https://github.com/kiegroup/drools/pull/2962#discussion_r448162165", "createdAt": "2020-07-01T07:14:20Z", "author": {"login": "danielezonca"}, "path": "kie-pmml-trusty/kie-pmml-models/kie-pmml-models-regression/kie-pmml-models-regression-tests/src/test/java/org/kie/pmml/regression/tests/LogisticRegressionTest.java", "diffHunk": "@@ -0,0 +1,99 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.kie.pmml.regression.tests;\n+\n+import java.util.Arrays;\n+import java.util.Collection;\n+import java.util.HashMap;\n+import java.util.Map;\n+\n+import org.assertj.core.api.Assertions;\n+import org.assertj.core.data.Percentage;\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.junit.runners.Parameterized;\n+import org.kie.api.pmml.PMML4Result;\n+import org.kie.pmml.evaluator.api.executor.PMMLRuntime;\n+\n+@RunWith(Parameterized.class)\n+public class LogisticRegressionTest extends AbstractPMMLRegressionTest {\n+\n+    private static final String MODEL_NAME = \"LogisticRegression\";\n+    private static final String TARGET_FIELD = \"class\";\n+    private static final String PROBABILITY_AUTHENTIC = \"probability(Authentic)\";\n+    private static final String PROBABILITY_COUNTERFEIT = \"probability(Counterfeit)\";\n+\n+    private static final Percentage TOLERANCE_PERCENTAGE = Percentage.withPercentage(0.001);\n+    private static PMMLRuntime pmmlRuntime;\n+\n+    private double variance;\n+    private double skewness;\n+    private double curtosis;\n+    private double entropy;\n+    private String expectedResult;\n+    private double expectedProbAuthentic;\n+    private double expectedProbCounterfeit;\n+\n+    public LogisticRegressionTest(double variance, double skewness, double curtosis,\n+                                  double petalWidth, String expectedResult,\n+                                  double expectedProbAuthentic,\n+                                  double expectedProbCounterfeit) {\n+        this.variance = variance;\n+        this.skewness = skewness;\n+        this.curtosis = curtosis;\n+        this.entropy = petalWidth;\n+        this.expectedResult = expectedResult;\n+        this.expectedProbAuthentic = expectedProbAuthentic;\n+        this.expectedProbCounterfeit = expectedProbCounterfeit;\n+    }\n+\n+    @BeforeClass\n+    public static void setupClass() {\n+        pmmlRuntime = getPMMLRuntime(MODEL_NAME);\n+    }\n+\n+    @Parameterized.Parameters\n+    public static Collection<Object[]> data() {\n+        return Arrays.asList(new Object[][]{\n+                {2.3, 6.9, 3.1, 5.1, \"Authentic\", 0.9999999999999969, 3.1271452352700172E-15},\n+                {1.2, 5.8, 2.6, 4.0, \"Authentic\", 0.9999999999977859, 2.214170674606705E-12},\n+                {1.2, 5.7, 3.0, 4.2, \"Authentic\", 0.9999999999990105, 9.89558801361823E-13},\n+                {0.2, 5.0, 3.3, 1.4, \"Authentic\", 0.9999999980426516, 1.9573484459863236E-9},\n+                {0.4, 5.4, 3.9, 1.3, \"Authentic\", 0.9999999997410439, 2.589560996869738E-10}\n+        });\n+    }\n+\n+    @Test\n+    public void testLogisticRegressionIrisData() {\n+        final Map<String, Object> inputData = new HashMap<>();\n+        inputData.put(\"variance\", variance);\n+        inputData.put(\"skewness\", skewness);\n+        inputData.put(\"curtosis\", curtosis);\n+        inputData.put(\"entropy\", entropy);\n+        PMML4Result pmml4Result = evaluate(pmmlRuntime, inputData, MODEL_NAME);\n+\n+        Assertions.assertThat(pmml4Result.getResultVariables().get(TARGET_FIELD)).isNotNull();\n+        Assertions.assertThat(pmml4Result.getResultVariables().get(TARGET_FIELD)).isEqualTo(expectedResult);\n+\n+        // TODO {gcardosi} TO BE FIXED WITH DROOLS-5453", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1dac2c626760e2d20b1e2a2a99520d3725e42bce"}, "originalPosition": 93}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODIzOTI1MA==", "bodyText": "see https://github.com/kiegroup/drools/pull/2966/files#r448239124", "url": "https://github.com/kiegroup/drools/pull/2962#discussion_r448239250", "createdAt": "2020-07-01T09:32:06Z", "author": {"login": "gitgabrio"}, "path": "kie-pmml-trusty/kie-pmml-models/kie-pmml-models-regression/kie-pmml-models-regression-tests/src/test/java/org/kie/pmml/regression/tests/LogisticRegressionTest.java", "diffHunk": "@@ -0,0 +1,99 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.kie.pmml.regression.tests;\n+\n+import java.util.Arrays;\n+import java.util.Collection;\n+import java.util.HashMap;\n+import java.util.Map;\n+\n+import org.assertj.core.api.Assertions;\n+import org.assertj.core.data.Percentage;\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.junit.runners.Parameterized;\n+import org.kie.api.pmml.PMML4Result;\n+import org.kie.pmml.evaluator.api.executor.PMMLRuntime;\n+\n+@RunWith(Parameterized.class)\n+public class LogisticRegressionTest extends AbstractPMMLRegressionTest {\n+\n+    private static final String MODEL_NAME = \"LogisticRegression\";\n+    private static final String TARGET_FIELD = \"class\";\n+    private static final String PROBABILITY_AUTHENTIC = \"probability(Authentic)\";\n+    private static final String PROBABILITY_COUNTERFEIT = \"probability(Counterfeit)\";\n+\n+    private static final Percentage TOLERANCE_PERCENTAGE = Percentage.withPercentage(0.001);\n+    private static PMMLRuntime pmmlRuntime;\n+\n+    private double variance;\n+    private double skewness;\n+    private double curtosis;\n+    private double entropy;\n+    private String expectedResult;\n+    private double expectedProbAuthentic;\n+    private double expectedProbCounterfeit;\n+\n+    public LogisticRegressionTest(double variance, double skewness, double curtosis,\n+                                  double petalWidth, String expectedResult,\n+                                  double expectedProbAuthentic,\n+                                  double expectedProbCounterfeit) {\n+        this.variance = variance;\n+        this.skewness = skewness;\n+        this.curtosis = curtosis;\n+        this.entropy = petalWidth;\n+        this.expectedResult = expectedResult;\n+        this.expectedProbAuthentic = expectedProbAuthentic;\n+        this.expectedProbCounterfeit = expectedProbCounterfeit;\n+    }\n+\n+    @BeforeClass\n+    public static void setupClass() {\n+        pmmlRuntime = getPMMLRuntime(MODEL_NAME);\n+    }\n+\n+    @Parameterized.Parameters\n+    public static Collection<Object[]> data() {\n+        return Arrays.asList(new Object[][]{\n+                {2.3, 6.9, 3.1, 5.1, \"Authentic\", 0.9999999999999969, 3.1271452352700172E-15},\n+                {1.2, 5.8, 2.6, 4.0, \"Authentic\", 0.9999999999977859, 2.214170674606705E-12},\n+                {1.2, 5.7, 3.0, 4.2, \"Authentic\", 0.9999999999990105, 9.89558801361823E-13},\n+                {0.2, 5.0, 3.3, 1.4, \"Authentic\", 0.9999999980426516, 1.9573484459863236E-9},\n+                {0.4, 5.4, 3.9, 1.3, \"Authentic\", 0.9999999997410439, 2.589560996869738E-10}\n+        });\n+    }\n+\n+    @Test\n+    public void testLogisticRegressionIrisData() {\n+        final Map<String, Object> inputData = new HashMap<>();\n+        inputData.put(\"variance\", variance);\n+        inputData.put(\"skewness\", skewness);\n+        inputData.put(\"curtosis\", curtosis);\n+        inputData.put(\"entropy\", entropy);\n+        PMML4Result pmml4Result = evaluate(pmmlRuntime, inputData, MODEL_NAME);\n+\n+        Assertions.assertThat(pmml4Result.getResultVariables().get(TARGET_FIELD)).isNotNull();\n+        Assertions.assertThat(pmml4Result.getResultVariables().get(TARGET_FIELD)).isEqualTo(expectedResult);\n+\n+        // TODO {gcardosi} TO BE FIXED WITH DROOLS-5453", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODE2MjE2NQ=="}, "originalCommit": {"oid": "1dac2c626760e2d20b1e2a2a99520d3725e42bce"}, "originalPosition": 93}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5MzMxMzY2OnYy", "diffSide": "RIGHT", "path": "kie-pmml-trusty/kie-pmml-models/kie-pmml-models-regression/kie-pmml-models-regression-tests/src/test/java/org/kie/pmml/regression/tests/LinearRegressionSampleWithTransformationsTest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwNzoxNDozMVrOGrZpyw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwOTozMDo0MlrOGreTqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODE2MjI1MQ==", "bodyText": "Can you please move it to a dedicated disabled test method?", "url": "https://github.com/kiegroup/drools/pull/2962#discussion_r448162251", "createdAt": "2020-07-01T07:14:31Z", "author": {"login": "danielezonca"}, "path": "kie-pmml-trusty/kie-pmml-models/kie-pmml-models-regression/kie-pmml-models-regression-tests/src/test/java/org/kie/pmml/regression/tests/LinearRegressionSampleWithTransformationsTest.java", "diffHunk": "@@ -0,0 +1,103 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.kie.pmml.regression.tests;\n+\n+import java.util.Arrays;\n+import java.util.Collection;\n+import java.util.HashMap;\n+import java.util.Map;\n+\n+import org.assertj.core.api.Assertions;\n+import org.assertj.core.data.Percentage;\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.junit.runners.Parameterized;\n+import org.kie.api.pmml.PMML4Result;\n+import org.kie.pmml.evaluator.api.executor.PMMLRuntime;\n+\n+@RunWith(Parameterized.class)\n+public class LinearRegressionSampleWithTransformationsTest extends AbstractPMMLRegressionTest {\n+\n+    private static final String MODEL_NAME = \"LinearRegressionSampleWithTransformations\";\n+    private static final String TARGET_FIELD = \"number_of_claims\";\n+    private static final String OUT_DER_AGE = \"out_der_age\";\n+    private static final String OUT_DER_SALARY = \"out_der_salary\";\n+    private static final String OUT_DER_CAR_LOCATION = \"out_der_car_location\";\n+    private static final String OUT_DER_CONSTANT = \"out_der_constant\";\n+    private static final String CONSTANT = \"constant\";\n+\n+\n+    private static final Percentage TOLERANCE_PERCENTAGE = Percentage.withPercentage(0.001);\n+    private static PMMLRuntime pmmlRuntime;\n+\n+    private double age;\n+    private double salary;\n+    private String car_location;\n+    private double expectedResult;\n+\n+    public LinearRegressionSampleWithTransformationsTest(double age,\n+                                                         double salary,\n+                                                         String car_location,\n+                                                         double expectedResult) {\n+        this.age = age;\n+        this.salary = salary;\n+        this.car_location = car_location;\n+        this.expectedResult = expectedResult;\n+    }\n+\n+    @BeforeClass\n+    public static void setupClass() {\n+        pmmlRuntime = getPMMLRuntime(MODEL_NAME);\n+    }\n+\n+    @Parameterized.Parameters\n+    public static Collection<Object[]> data() {\n+        return Arrays.asList(new Object[][]{\n+                {27, 34000, \"street\", 989.1},\n+                {49, 78000, \"carpark\", 1301.37},\n+                {57, 72000, \"street\", 1582.1},\n+                {61, 123000, \"carpark\", 1836.5699999999997},\n+                {18, 26000, \"street\", 845.1999999999999},\n+        });\n+    }\n+\n+    @Test\n+    public void testLogisticRegressionIrisData() {\n+        final Map<String, Object> inputData = new HashMap<>();\n+        inputData.put(\"age\", age);\n+        inputData.put(\"salary\", salary);\n+        inputData.put(\"car_location\", car_location);\n+        PMML4Result pmml4Result = evaluate(pmmlRuntime, inputData, MODEL_NAME);\n+\n+        Assertions.assertThat(pmml4Result.getResultVariables().get(TARGET_FIELD)).isNotNull();\n+        Assertions.assertThat((double) pmml4Result.getResultVariables().get(TARGET_FIELD)).isCloseTo(expectedResult, TOLERANCE_PERCENTAGE);\n+\n+        // TODO {gcardosi} TO BE FIXED WITH DROOLS-5453", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1dac2c626760e2d20b1e2a2a99520d3725e42bce"}, "originalPosition": 90}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODIzODUwNA==", "bodyText": "see https://github.com/kiegroup/drools/pull/2966/files#r448238315", "url": "https://github.com/kiegroup/drools/pull/2962#discussion_r448238504", "createdAt": "2020-07-01T09:30:42Z", "author": {"login": "gitgabrio"}, "path": "kie-pmml-trusty/kie-pmml-models/kie-pmml-models-regression/kie-pmml-models-regression-tests/src/test/java/org/kie/pmml/regression/tests/LinearRegressionSampleWithTransformationsTest.java", "diffHunk": "@@ -0,0 +1,103 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.kie.pmml.regression.tests;\n+\n+import java.util.Arrays;\n+import java.util.Collection;\n+import java.util.HashMap;\n+import java.util.Map;\n+\n+import org.assertj.core.api.Assertions;\n+import org.assertj.core.data.Percentage;\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.junit.runners.Parameterized;\n+import org.kie.api.pmml.PMML4Result;\n+import org.kie.pmml.evaluator.api.executor.PMMLRuntime;\n+\n+@RunWith(Parameterized.class)\n+public class LinearRegressionSampleWithTransformationsTest extends AbstractPMMLRegressionTest {\n+\n+    private static final String MODEL_NAME = \"LinearRegressionSampleWithTransformations\";\n+    private static final String TARGET_FIELD = \"number_of_claims\";\n+    private static final String OUT_DER_AGE = \"out_der_age\";\n+    private static final String OUT_DER_SALARY = \"out_der_salary\";\n+    private static final String OUT_DER_CAR_LOCATION = \"out_der_car_location\";\n+    private static final String OUT_DER_CONSTANT = \"out_der_constant\";\n+    private static final String CONSTANT = \"constant\";\n+\n+\n+    private static final Percentage TOLERANCE_PERCENTAGE = Percentage.withPercentage(0.001);\n+    private static PMMLRuntime pmmlRuntime;\n+\n+    private double age;\n+    private double salary;\n+    private String car_location;\n+    private double expectedResult;\n+\n+    public LinearRegressionSampleWithTransformationsTest(double age,\n+                                                         double salary,\n+                                                         String car_location,\n+                                                         double expectedResult) {\n+        this.age = age;\n+        this.salary = salary;\n+        this.car_location = car_location;\n+        this.expectedResult = expectedResult;\n+    }\n+\n+    @BeforeClass\n+    public static void setupClass() {\n+        pmmlRuntime = getPMMLRuntime(MODEL_NAME);\n+    }\n+\n+    @Parameterized.Parameters\n+    public static Collection<Object[]> data() {\n+        return Arrays.asList(new Object[][]{\n+                {27, 34000, \"street\", 989.1},\n+                {49, 78000, \"carpark\", 1301.37},\n+                {57, 72000, \"street\", 1582.1},\n+                {61, 123000, \"carpark\", 1836.5699999999997},\n+                {18, 26000, \"street\", 845.1999999999999},\n+        });\n+    }\n+\n+    @Test\n+    public void testLogisticRegressionIrisData() {\n+        final Map<String, Object> inputData = new HashMap<>();\n+        inputData.put(\"age\", age);\n+        inputData.put(\"salary\", salary);\n+        inputData.put(\"car_location\", car_location);\n+        PMML4Result pmml4Result = evaluate(pmmlRuntime, inputData, MODEL_NAME);\n+\n+        Assertions.assertThat(pmml4Result.getResultVariables().get(TARGET_FIELD)).isNotNull();\n+        Assertions.assertThat((double) pmml4Result.getResultVariables().get(TARGET_FIELD)).isCloseTo(expectedResult, TOLERANCE_PERCENTAGE);\n+\n+        // TODO {gcardosi} TO BE FIXED WITH DROOLS-5453", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODE2MjI1MQ=="}, "originalCommit": {"oid": "1dac2c626760e2d20b1e2a2a99520d3725e42bce"}, "originalPosition": 90}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5MzMxODg3OnYy", "diffSide": "RIGHT", "path": "kie-pmml-trusty/kie-pmml-models/kie-pmml-models-drools/kie-pmml-models-drools-tree/kie-pmml-models-drools-tree-tests/src/test/java/org/kie/pmml/models/drools/tree/tests/SampleMineTreeModelWithTransformationsTest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwNzoxNjowN1rOGrZs_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwOTozMzowM1rOGreYhw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODE2MzA2OA==", "bodyText": "Can you please move it to a dedicated disabled test method?", "url": "https://github.com/kiegroup/drools/pull/2962#discussion_r448163068", "createdAt": "2020-07-01T07:16:07Z", "author": {"login": "danielezonca"}, "path": "kie-pmml-trusty/kie-pmml-models/kie-pmml-models-drools/kie-pmml-models-drools-tree/kie-pmml-models-drools-tree-tests/src/test/java/org/kie/pmml/models/drools/tree/tests/SampleMineTreeModelWithTransformationsTest.java", "diffHunk": "@@ -0,0 +1,83 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.kie.pmml.models.drools.tree.tests;\n+\n+import java.util.Arrays;\n+import java.util.Collection;\n+import java.util.HashMap;\n+import java.util.Map;\n+\n+import org.assertj.core.api.Assertions;\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.junit.runners.Parameterized;\n+import org.kie.api.pmml.PMML4Result;\n+import org.kie.pmml.evaluator.api.executor.PMMLRuntime;\n+\n+@RunWith(Parameterized.class)\n+public class SampleMineTreeModelWithTransformationsTest extends AbstractPMMLTreeTest {\n+\n+    private static final String MODEL_NAME = \"SampleMineTreeModelWithTransformations\";\n+    private static final String TARGET_FIELD = \"decision\";\n+    private static final String OUT_DER_TEMPERATURE = \"out_der_temperature\";\n+    private static final String OUT_DER_HUMIDITY = \"out_der_humidity\";\n+    private static final String OUT_DER_CONSTANT = \"out_der_constant\";\n+    private static final String CONSTANT = \"constant\";\n+\n+\n+    private static PMMLRuntime pmmlRuntime;\n+\n+    private double temperature;\n+    private double humidity;\n+    private String expectedResult;\n+\n+    public SampleMineTreeModelWithTransformationsTest(double temperature, double humidity, String expectedResult) {\n+        this.temperature = temperature;\n+        this.humidity = humidity;\n+        this.expectedResult = expectedResult;\n+    }\n+\n+    @BeforeClass\n+    public static void setupClass() {\n+        pmmlRuntime = getPMMLRuntime(MODEL_NAME);\n+    }\n+\n+    @Parameterized.Parameters\n+    public static Collection<Object[]> data() {\n+        return Arrays.asList(new Object[][]{\n+                {30.0, 10.0, \"sunglasses\"},\n+                {5.0, 70.0, \"umbrella\"},\n+                {10.0, 15.0, \"nothing\"}\n+        });\n+    }\n+\n+    @Test\n+    public void testSetPredicateTree() {\n+        final Map<String, Object> inputData = new HashMap<>();\n+        inputData.put(\"temperature\", temperature);\n+        inputData.put(\"humidity\", humidity);\n+        PMML4Result pmml4Result = evaluate(pmmlRuntime, inputData, MODEL_NAME);\n+\n+        Assertions.assertThat(pmml4Result.getResultVariables().get(TARGET_FIELD)).isNotNull();\n+        Assertions.assertThat(pmml4Result.getResultVariables().get(TARGET_FIELD)).isEqualTo(expectedResult);\n+        // // TODO {gcardosi} TO BE FIXED WITH DROOLS-5453", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1dac2c626760e2d20b1e2a2a99520d3725e42bce"}, "originalPosition": 78}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODIzOTc1MQ==", "bodyText": "see https://github.com/kiegroup/drools/pull/2966/files#r448239643", "url": "https://github.com/kiegroup/drools/pull/2962#discussion_r448239751", "createdAt": "2020-07-01T09:33:03Z", "author": {"login": "gitgabrio"}, "path": "kie-pmml-trusty/kie-pmml-models/kie-pmml-models-drools/kie-pmml-models-drools-tree/kie-pmml-models-drools-tree-tests/src/test/java/org/kie/pmml/models/drools/tree/tests/SampleMineTreeModelWithTransformationsTest.java", "diffHunk": "@@ -0,0 +1,83 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.kie.pmml.models.drools.tree.tests;\n+\n+import java.util.Arrays;\n+import java.util.Collection;\n+import java.util.HashMap;\n+import java.util.Map;\n+\n+import org.assertj.core.api.Assertions;\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.junit.runners.Parameterized;\n+import org.kie.api.pmml.PMML4Result;\n+import org.kie.pmml.evaluator.api.executor.PMMLRuntime;\n+\n+@RunWith(Parameterized.class)\n+public class SampleMineTreeModelWithTransformationsTest extends AbstractPMMLTreeTest {\n+\n+    private static final String MODEL_NAME = \"SampleMineTreeModelWithTransformations\";\n+    private static final String TARGET_FIELD = \"decision\";\n+    private static final String OUT_DER_TEMPERATURE = \"out_der_temperature\";\n+    private static final String OUT_DER_HUMIDITY = \"out_der_humidity\";\n+    private static final String OUT_DER_CONSTANT = \"out_der_constant\";\n+    private static final String CONSTANT = \"constant\";\n+\n+\n+    private static PMMLRuntime pmmlRuntime;\n+\n+    private double temperature;\n+    private double humidity;\n+    private String expectedResult;\n+\n+    public SampleMineTreeModelWithTransformationsTest(double temperature, double humidity, String expectedResult) {\n+        this.temperature = temperature;\n+        this.humidity = humidity;\n+        this.expectedResult = expectedResult;\n+    }\n+\n+    @BeforeClass\n+    public static void setupClass() {\n+        pmmlRuntime = getPMMLRuntime(MODEL_NAME);\n+    }\n+\n+    @Parameterized.Parameters\n+    public static Collection<Object[]> data() {\n+        return Arrays.asList(new Object[][]{\n+                {30.0, 10.0, \"sunglasses\"},\n+                {5.0, 70.0, \"umbrella\"},\n+                {10.0, 15.0, \"nothing\"}\n+        });\n+    }\n+\n+    @Test\n+    public void testSetPredicateTree() {\n+        final Map<String, Object> inputData = new HashMap<>();\n+        inputData.put(\"temperature\", temperature);\n+        inputData.put(\"humidity\", humidity);\n+        PMML4Result pmml4Result = evaluate(pmmlRuntime, inputData, MODEL_NAME);\n+\n+        Assertions.assertThat(pmml4Result.getResultVariables().get(TARGET_FIELD)).isNotNull();\n+        Assertions.assertThat(pmml4Result.getResultVariables().get(TARGET_FIELD)).isEqualTo(expectedResult);\n+        // // TODO {gcardosi} TO BE FIXED WITH DROOLS-5453", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODE2MzA2OA=="}, "originalCommit": {"oid": "1dac2c626760e2d20b1e2a2a99520d3725e42bce"}, "originalPosition": 78}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5MzMyNjM2OnYy", "diffSide": "RIGHT", "path": "kie-pmml-trusty/kie-pmml-models/kie-pmml-models-drools/kie-pmml-models-drools-common/src/test/java/org/kie/pmml/models/drools/utils/KiePMMLASTTestUtils.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwNzoxODo0MFrOGrZx5A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwOTozNjoyOFrOGrefsw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODE2NDMyNA==", "bodyText": "Is there any specific reason to create the empty map outside the factory method?", "url": "https://github.com/kiegroup/drools/pull/2962#discussion_r448164324", "createdAt": "2020-07-01T07:18:40Z", "author": {"login": "danielezonca"}, "path": "kie-pmml-trusty/kie-pmml-models/kie-pmml-models-drools/kie-pmml-models-drools-common/src/test/java/org/kie/pmml/models/drools/utils/KiePMMLASTTestUtils.java", "diffHunk": "@@ -48,6 +54,19 @@ public static PredicateASTFactoryData getPredicateASTFactoryData(Predicate predi\n         return new PredicateASTFactoryData(predicate, outputFields, rules, parentPath, currentRule, fieldTypeMap);\n     }\n \n+    public static Map<String, KiePMMLOriginalTypeGeneratedType> getFieldTypeMap(final DataDictionary dataDictionary, final TransformationDictionary transformationDictionary, final LocalTransformations localTransformations) {\n+        final Map<String, KiePMMLOriginalTypeGeneratedType> toReturn = new HashMap<>();\n+        KiePMMLDerivedFieldASTFactory kiePMMLDerivedFieldASTFactory = KiePMMLDerivedFieldASTFactory.factory(toReturn);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1dac2c626760e2d20b1e2a2a99520d3725e42bce"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODI0MTU4Nw==", "bodyText": "see https://github.com/kiegroup/drools/pull/2966/files#r448241485", "url": "https://github.com/kiegroup/drools/pull/2962#discussion_r448241587", "createdAt": "2020-07-01T09:36:28Z", "author": {"login": "gitgabrio"}, "path": "kie-pmml-trusty/kie-pmml-models/kie-pmml-models-drools/kie-pmml-models-drools-common/src/test/java/org/kie/pmml/models/drools/utils/KiePMMLASTTestUtils.java", "diffHunk": "@@ -48,6 +54,19 @@ public static PredicateASTFactoryData getPredicateASTFactoryData(Predicate predi\n         return new PredicateASTFactoryData(predicate, outputFields, rules, parentPath, currentRule, fieldTypeMap);\n     }\n \n+    public static Map<String, KiePMMLOriginalTypeGeneratedType> getFieldTypeMap(final DataDictionary dataDictionary, final TransformationDictionary transformationDictionary, final LocalTransformations localTransformations) {\n+        final Map<String, KiePMMLOriginalTypeGeneratedType> toReturn = new HashMap<>();\n+        KiePMMLDerivedFieldASTFactory kiePMMLDerivedFieldASTFactory = KiePMMLDerivedFieldASTFactory.factory(toReturn);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODE2NDMyNA=="}, "originalCommit": {"oid": "1dac2c626760e2d20b1e2a2a99520d3725e42bce"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5MzQ3NzU0OnYy", "diffSide": "RIGHT", "path": "kie-pmml-trusty/kie-pmml-compiler/kie-pmml-compiler-commons/src/main/java/org/kie/pmml/compiler/commons/utils/DerivedFieldFunctionUtils.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwODowMzo0MVrOGrbPjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwOTo0MTo0N1rOGreruQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODE4ODMwMA==", "bodyText": "I do not understand the reason of this \"hardcoded\" name. Can you please clarify?", "url": "https://github.com/kiegroup/drools/pull/2962#discussion_r448188300", "createdAt": "2020-07-01T08:03:41Z", "author": {"login": "danielezonca"}, "path": "kie-pmml-trusty/kie-pmml-compiler/kie-pmml-compiler-commons/src/main/java/org/kie/pmml/compiler/commons/utils/DerivedFieldFunctionUtils.java", "diffHunk": "@@ -0,0 +1,247 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.kie.pmml.compiler.commons.utils;\n+\n+import java.util.Collections;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.concurrent.atomic.AtomicInteger;\n+\n+import com.github.javaparser.ast.NodeList;\n+import com.github.javaparser.ast.body.MethodDeclaration;\n+import com.github.javaparser.ast.expr.MethodCallExpr;\n+import com.github.javaparser.ast.expr.MethodReferenceExpr;\n+import com.github.javaparser.ast.expr.NameExpr;\n+import com.github.javaparser.ast.expr.NullLiteralExpr;\n+import com.github.javaparser.ast.expr.StringLiteralExpr;\n+import com.github.javaparser.ast.expr.TypeExpr;\n+import com.github.javaparser.ast.stmt.BlockStmt;\n+import com.github.javaparser.ast.stmt.ExpressionStmt;\n+import com.github.javaparser.ast.stmt.ReturnStmt;\n+import com.github.javaparser.ast.type.ClassOrInterfaceType;\n+import org.dmg.pmml.Aggregate;\n+import org.dmg.pmml.Apply;\n+import org.dmg.pmml.Constant;\n+import org.dmg.pmml.DerivedField;\n+import org.dmg.pmml.Discretize;\n+import org.dmg.pmml.Expression;\n+import org.dmg.pmml.FieldRef;\n+import org.dmg.pmml.Lag;\n+import org.dmg.pmml.MapValues;\n+import org.dmg.pmml.NormContinuous;\n+import org.dmg.pmml.NormDiscrete;\n+import org.dmg.pmml.TextIndex;\n+import org.kie.pmml.commons.model.enums.DATA_TYPE;\n+import org.kie.pmml.commons.model.tuples.KiePMMLNameValue;\n+\n+import static com.github.javaparser.StaticJavaParser.parseClassOrInterfaceType;\n+import static org.kie.pmml.compiler.commons.utils.CommonCodegenUtils.OPTIONAL_FILTERED_KIEPMMLNAMEVALUE_NAME;\n+import static org.kie.pmml.compiler.commons.utils.CommonCodegenUtils.getFilteredKiePMMLNameValueExpression;\n+import static org.kie.pmml.compiler.commons.utils.CommonCodegenUtils.getMethodDeclaration;\n+import static org.kie.pmml.compiler.commons.utils.CommonCodegenUtils.getTypedClassOrInterfaceType;\n+\n+/**\n+ * Class meant to provide <i>helper</i> methods to retrieve <code>Function</code> code-generators\n+ * out of <code>DerivedField</code>s\n+ */\n+public class DerivedFieldFunctionUtils {\n+\n+    static final String KIEPMMLNAMEVALUE_LIST_PARAM = \"param1\"; // it is the first parameter", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1dac2c626760e2d20b1e2a2a99520d3725e42bce"}, "originalPosition": 63}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODI0NDY2NQ==", "bodyText": "see https://github.com/kiegroup/drools/pull/2966/files#r448244569", "url": "https://github.com/kiegroup/drools/pull/2962#discussion_r448244665", "createdAt": "2020-07-01T09:41:47Z", "author": {"login": "gitgabrio"}, "path": "kie-pmml-trusty/kie-pmml-compiler/kie-pmml-compiler-commons/src/main/java/org/kie/pmml/compiler/commons/utils/DerivedFieldFunctionUtils.java", "diffHunk": "@@ -0,0 +1,247 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.kie.pmml.compiler.commons.utils;\n+\n+import java.util.Collections;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.concurrent.atomic.AtomicInteger;\n+\n+import com.github.javaparser.ast.NodeList;\n+import com.github.javaparser.ast.body.MethodDeclaration;\n+import com.github.javaparser.ast.expr.MethodCallExpr;\n+import com.github.javaparser.ast.expr.MethodReferenceExpr;\n+import com.github.javaparser.ast.expr.NameExpr;\n+import com.github.javaparser.ast.expr.NullLiteralExpr;\n+import com.github.javaparser.ast.expr.StringLiteralExpr;\n+import com.github.javaparser.ast.expr.TypeExpr;\n+import com.github.javaparser.ast.stmt.BlockStmt;\n+import com.github.javaparser.ast.stmt.ExpressionStmt;\n+import com.github.javaparser.ast.stmt.ReturnStmt;\n+import com.github.javaparser.ast.type.ClassOrInterfaceType;\n+import org.dmg.pmml.Aggregate;\n+import org.dmg.pmml.Apply;\n+import org.dmg.pmml.Constant;\n+import org.dmg.pmml.DerivedField;\n+import org.dmg.pmml.Discretize;\n+import org.dmg.pmml.Expression;\n+import org.dmg.pmml.FieldRef;\n+import org.dmg.pmml.Lag;\n+import org.dmg.pmml.MapValues;\n+import org.dmg.pmml.NormContinuous;\n+import org.dmg.pmml.NormDiscrete;\n+import org.dmg.pmml.TextIndex;\n+import org.kie.pmml.commons.model.enums.DATA_TYPE;\n+import org.kie.pmml.commons.model.tuples.KiePMMLNameValue;\n+\n+import static com.github.javaparser.StaticJavaParser.parseClassOrInterfaceType;\n+import static org.kie.pmml.compiler.commons.utils.CommonCodegenUtils.OPTIONAL_FILTERED_KIEPMMLNAMEVALUE_NAME;\n+import static org.kie.pmml.compiler.commons.utils.CommonCodegenUtils.getFilteredKiePMMLNameValueExpression;\n+import static org.kie.pmml.compiler.commons.utils.CommonCodegenUtils.getMethodDeclaration;\n+import static org.kie.pmml.compiler.commons.utils.CommonCodegenUtils.getTypedClassOrInterfaceType;\n+\n+/**\n+ * Class meant to provide <i>helper</i> methods to retrieve <code>Function</code> code-generators\n+ * out of <code>DerivedField</code>s\n+ */\n+public class DerivedFieldFunctionUtils {\n+\n+    static final String KIEPMMLNAMEVALUE_LIST_PARAM = \"param1\"; // it is the first parameter", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODE4ODMwMA=="}, "originalCommit": {"oid": "1dac2c626760e2d20b1e2a2a99520d3725e42bce"}, "originalPosition": 63}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5MzQ4MDAzOnYy", "diffSide": "RIGHT", "path": "kie-pmml-trusty/kie-pmml-compiler/kie-pmml-compiler-commons/src/main/java/org/kie/pmml/compiler/commons/utils/DerivedFieldFunctionUtils.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwODowNDozMFrOGrbRHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwOTo0NDozMFrOGrexeQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODE4ODcwMg==", "bodyText": "If this is a feature not supported yet I would prefer to raise an exception or at least log error instead of silently skip it. Wdyt?", "url": "https://github.com/kiegroup/drools/pull/2962#discussion_r448188702", "createdAt": "2020-07-01T08:04:30Z", "author": {"login": "danielezonca"}, "path": "kie-pmml-trusty/kie-pmml-compiler/kie-pmml-compiler-commons/src/main/java/org/kie/pmml/compiler/commons/utils/DerivedFieldFunctionUtils.java", "diffHunk": "@@ -0,0 +1,247 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.kie.pmml.compiler.commons.utils;\n+\n+import java.util.Collections;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.concurrent.atomic.AtomicInteger;\n+\n+import com.github.javaparser.ast.NodeList;\n+import com.github.javaparser.ast.body.MethodDeclaration;\n+import com.github.javaparser.ast.expr.MethodCallExpr;\n+import com.github.javaparser.ast.expr.MethodReferenceExpr;\n+import com.github.javaparser.ast.expr.NameExpr;\n+import com.github.javaparser.ast.expr.NullLiteralExpr;\n+import com.github.javaparser.ast.expr.StringLiteralExpr;\n+import com.github.javaparser.ast.expr.TypeExpr;\n+import com.github.javaparser.ast.stmt.BlockStmt;\n+import com.github.javaparser.ast.stmt.ExpressionStmt;\n+import com.github.javaparser.ast.stmt.ReturnStmt;\n+import com.github.javaparser.ast.type.ClassOrInterfaceType;\n+import org.dmg.pmml.Aggregate;\n+import org.dmg.pmml.Apply;\n+import org.dmg.pmml.Constant;\n+import org.dmg.pmml.DerivedField;\n+import org.dmg.pmml.Discretize;\n+import org.dmg.pmml.Expression;\n+import org.dmg.pmml.FieldRef;\n+import org.dmg.pmml.Lag;\n+import org.dmg.pmml.MapValues;\n+import org.dmg.pmml.NormContinuous;\n+import org.dmg.pmml.NormDiscrete;\n+import org.dmg.pmml.TextIndex;\n+import org.kie.pmml.commons.model.enums.DATA_TYPE;\n+import org.kie.pmml.commons.model.tuples.KiePMMLNameValue;\n+\n+import static com.github.javaparser.StaticJavaParser.parseClassOrInterfaceType;\n+import static org.kie.pmml.compiler.commons.utils.CommonCodegenUtils.OPTIONAL_FILTERED_KIEPMMLNAMEVALUE_NAME;\n+import static org.kie.pmml.compiler.commons.utils.CommonCodegenUtils.getFilteredKiePMMLNameValueExpression;\n+import static org.kie.pmml.compiler.commons.utils.CommonCodegenUtils.getMethodDeclaration;\n+import static org.kie.pmml.compiler.commons.utils.CommonCodegenUtils.getTypedClassOrInterfaceType;\n+\n+/**\n+ * Class meant to provide <i>helper</i> methods to retrieve <code>Function</code> code-generators\n+ * out of <code>DerivedField</code>s\n+ */\n+public class DerivedFieldFunctionUtils {\n+\n+    static final String KIEPMMLNAMEVALUE_LIST_PARAM = \"param1\"; // it is the first parameter\n+\n+    private DerivedFieldFunctionUtils() {\n+        // Avoid instantiation\n+    }\n+\n+    static Map<String, MethodDeclaration> getDerivedFieldsMethodMap(final List<DerivedField> derivedFields, final AtomicInteger arityCounter) {\n+        Map<String, MethodDeclaration> toReturn = new HashMap<>();\n+        derivedFields.forEach(derivedField ->\n+                                      toReturn.put(derivedField.getName().getValue(),\n+                                                   getDerivedFieldMethodDeclaration(derivedField, arityCounter)));\n+        return toReturn;\n+    }\n+\n+    static MethodDeclaration getDerivedFieldMethodDeclaration(final DerivedField derivedField, final AtomicInteger arityCounter) {\n+        final Expression expression = derivedField.getExpression();\n+        if (expression != null) {\n+            return getExpressionMethodDeclaration(expression, arityCounter);\n+        } else {\n+            // TODO {gcardosi}\n+            return new MethodDeclaration();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1dac2c626760e2d20b1e2a2a99520d3725e42bce"}, "originalPosition": 83}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODI0NjEzNw==", "bodyText": "see https://github.com/kiegroup/drools/pull/2966/files#r448245625", "url": "https://github.com/kiegroup/drools/pull/2962#discussion_r448246137", "createdAt": "2020-07-01T09:44:30Z", "author": {"login": "gitgabrio"}, "path": "kie-pmml-trusty/kie-pmml-compiler/kie-pmml-compiler-commons/src/main/java/org/kie/pmml/compiler/commons/utils/DerivedFieldFunctionUtils.java", "diffHunk": "@@ -0,0 +1,247 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.kie.pmml.compiler.commons.utils;\n+\n+import java.util.Collections;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.concurrent.atomic.AtomicInteger;\n+\n+import com.github.javaparser.ast.NodeList;\n+import com.github.javaparser.ast.body.MethodDeclaration;\n+import com.github.javaparser.ast.expr.MethodCallExpr;\n+import com.github.javaparser.ast.expr.MethodReferenceExpr;\n+import com.github.javaparser.ast.expr.NameExpr;\n+import com.github.javaparser.ast.expr.NullLiteralExpr;\n+import com.github.javaparser.ast.expr.StringLiteralExpr;\n+import com.github.javaparser.ast.expr.TypeExpr;\n+import com.github.javaparser.ast.stmt.BlockStmt;\n+import com.github.javaparser.ast.stmt.ExpressionStmt;\n+import com.github.javaparser.ast.stmt.ReturnStmt;\n+import com.github.javaparser.ast.type.ClassOrInterfaceType;\n+import org.dmg.pmml.Aggregate;\n+import org.dmg.pmml.Apply;\n+import org.dmg.pmml.Constant;\n+import org.dmg.pmml.DerivedField;\n+import org.dmg.pmml.Discretize;\n+import org.dmg.pmml.Expression;\n+import org.dmg.pmml.FieldRef;\n+import org.dmg.pmml.Lag;\n+import org.dmg.pmml.MapValues;\n+import org.dmg.pmml.NormContinuous;\n+import org.dmg.pmml.NormDiscrete;\n+import org.dmg.pmml.TextIndex;\n+import org.kie.pmml.commons.model.enums.DATA_TYPE;\n+import org.kie.pmml.commons.model.tuples.KiePMMLNameValue;\n+\n+import static com.github.javaparser.StaticJavaParser.parseClassOrInterfaceType;\n+import static org.kie.pmml.compiler.commons.utils.CommonCodegenUtils.OPTIONAL_FILTERED_KIEPMMLNAMEVALUE_NAME;\n+import static org.kie.pmml.compiler.commons.utils.CommonCodegenUtils.getFilteredKiePMMLNameValueExpression;\n+import static org.kie.pmml.compiler.commons.utils.CommonCodegenUtils.getMethodDeclaration;\n+import static org.kie.pmml.compiler.commons.utils.CommonCodegenUtils.getTypedClassOrInterfaceType;\n+\n+/**\n+ * Class meant to provide <i>helper</i> methods to retrieve <code>Function</code> code-generators\n+ * out of <code>DerivedField</code>s\n+ */\n+public class DerivedFieldFunctionUtils {\n+\n+    static final String KIEPMMLNAMEVALUE_LIST_PARAM = \"param1\"; // it is the first parameter\n+\n+    private DerivedFieldFunctionUtils() {\n+        // Avoid instantiation\n+    }\n+\n+    static Map<String, MethodDeclaration> getDerivedFieldsMethodMap(final List<DerivedField> derivedFields, final AtomicInteger arityCounter) {\n+        Map<String, MethodDeclaration> toReturn = new HashMap<>();\n+        derivedFields.forEach(derivedField ->\n+                                      toReturn.put(derivedField.getName().getValue(),\n+                                                   getDerivedFieldMethodDeclaration(derivedField, arityCounter)));\n+        return toReturn;\n+    }\n+\n+    static MethodDeclaration getDerivedFieldMethodDeclaration(final DerivedField derivedField, final AtomicInteger arityCounter) {\n+        final Expression expression = derivedField.getExpression();\n+        if (expression != null) {\n+            return getExpressionMethodDeclaration(expression, arityCounter);\n+        } else {\n+            // TODO {gcardosi}\n+            return new MethodDeclaration();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODE4ODcwMg=="}, "originalCommit": {"oid": "1dac2c626760e2d20b1e2a2a99520d3725e42bce"}, "originalPosition": 83}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2452, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}