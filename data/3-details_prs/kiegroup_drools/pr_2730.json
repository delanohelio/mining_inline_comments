{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY1MTQ0Mjc5", "number": 2730, "title": "[DROOLS-4924] LambdaConsequence without bind variable is not material\u2026", "bodyText": "\u2026ized\nIn a failing case, the ancestor is \"D.execute\" instead of \"execute\". Thus, fixed like this.\nNote: I also tried to add a unit test in ExecModelLambdaPostProcessorTest but I cannot reproduce the issue because ExecModelLambdaPostProcessorTest approach (simply using StaticJavaParser.parseResource()) doesn't reproduce the problem (= \"D.execute\").", "createdAt": "2020-01-21T08:00:20Z", "url": "https://github.com/kiegroup/drools/pull/2730", "merged": true, "mergeCommit": {"oid": "29c6f072475b38e924753928f238bcd75bfcc11f"}, "closed": true, "closedAt": "2020-01-29T07:22:54Z", "author": {"login": "tkobayas"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb8iavfAFqTM0NTkzOTc0Nw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABb-cB7ggFqTM0ODYzMTE5Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ1OTM5NzQ3", "url": "https://github.com/kiegroup/drools/pull/2730#pullrequestreview-345939747", "createdAt": "2020-01-21T14:56:22Z", "commit": {"oid": "913173ee652eb00f9c6fa0115d98815ec716c6dc"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef5847221c2f8619473d52c53a9fd53d14445ca1", "author": {"user": {"login": "tkobayas", "name": "Toshiya Kobayashi"}}, "url": "https://github.com/kiegroup/drools/commit/ef5847221c2f8619473d52c53a9fd53d14445ca1", "committedDate": "2020-01-23T03:20:44Z", "message": "[DROOLS-4924] LambdaConsequence without bind variable is not materialized"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "913173ee652eb00f9c6fa0115d98815ec716c6dc", "author": {"user": {"login": "tkobayas", "name": "Toshiya Kobayashi"}}, "url": "https://github.com/kiegroup/drools/commit/913173ee652eb00f9c6fa0115d98815ec716c6dc", "committedDate": "2020-01-21T07:45:42Z", "message": "[DROOLS-4924] LambdaConsequence without bind variable is not materialized"}, "afterCommit": {"oid": "ef5847221c2f8619473d52c53a9fd53d14445ca1", "author": {"user": {"login": "tkobayas", "name": "Toshiya Kobayashi"}}, "url": "https://github.com/kiegroup/drools/commit/ef5847221c2f8619473d52c53a9fd53d14445ca1", "committedDate": "2020-01-23T03:20:44Z", "message": "[DROOLS-4924] LambdaConsequence without bind variable is not materialized"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3MDQyNjkw", "url": "https://github.com/kiegroup/drools/pull/2730#pullrequestreview-347042690", "createdAt": "2020-01-23T03:35:02Z", "commit": {"oid": "ef5847221c2f8619473d52c53a9fd53d14445ca1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QwMzozNTowMlrOFgyCig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QwMzozNTowMlrOFgyCig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTkxODYwMg==", "bodyText": "This creates a standard construct (as I see in case of simple StaticJavaParser.parseResource()) of \"D\" and \"execute\" so we will see only \"execute\" afterwards.", "url": "https://github.com/kiegroup/drools/pull/2730#discussion_r369918602", "createdAt": "2020-01-23T03:35:02Z", "author": {"login": "tkobayas"}, "path": "drools-model/drools-model-compiler/src/main/java/org/drools/modelcompiler/builder/generator/Consequence.java", "diffHunk": "@@ -248,7 +248,7 @@ private MethodCallExpr executeCall(BlockStmt ruleVariablesBlock, BlockStmt ruleC\n \n \n         boolean requireDrools = rewriteRHS(ruleVariablesBlock, ruleConsequence);\n-        MethodCallExpr executeCall = new MethodCallExpr(onCall, onCall == null ? \"D.\" + EXECUTE_CALL : EXECUTE_CALL);\n+        MethodCallExpr executeCall = new MethodCallExpr(onCall != null ? onCall : new NameExpr(\"D\"), EXECUTE_CALL);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ef5847221c2f8619473d52c53a9fd53d14445ca1"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3MDQyOTA0", "url": "https://github.com/kiegroup/drools/pull/2730#pullrequestreview-347042904", "createdAt": "2020-01-23T03:36:15Z", "commit": {"oid": "ef5847221c2f8619473d52c53a9fd53d14445ca1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QwMzozNjoxNVrOFgyDJg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QwMzozNjoxNVrOFgyDJg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTkxODc1OA==", "bodyText": "This change is required to pass AmbiguousExceptionTest in drools-test-coverage/test-suite/.", "url": "https://github.com/kiegroup/drools/pull/2730#discussion_r369918758", "createdAt": "2020-01-23T03:36:15Z", "author": {"login": "tkobayas"}, "path": "drools-model/drools-model-compiler/src/main/java/org/drools/modelcompiler/util/lambdareplace/MaterializedLambdaConsequence.java", "diffHunk": "@@ -49,7 +49,7 @@ void createMethodDeclaration(EnumDeclaration classDeclaration) {\n         }\n \n         MethodDeclaration methodDeclaration = classDeclaration.addMethod(\"execute\", Modifier.Keyword.PUBLIC);\n-        methodDeclaration.setThrownExceptions(NodeList.nodeList(parseClassOrInterfaceType(\"Exception\")));\n+        methodDeclaration.setThrownExceptions(NodeList.nodeList(parseClassOrInterfaceType(\"java.lang.Exception\")));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ef5847221c2f8619473d52c53a9fd53d14445ca1"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3MTg0Nzk2", "url": "https://github.com/kiegroup/drools/pull/2730#pullrequestreview-347184796", "createdAt": "2020-01-23T10:13:38Z", "commit": {"oid": "ef5847221c2f8619473d52c53a9fd53d14445ca1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4NjMxMTkz", "url": "https://github.com/kiegroup/drools/pull/2730#pullrequestreview-348631193", "createdAt": "2020-01-27T12:37:42Z", "commit": {"oid": "ef5847221c2f8619473d52c53a9fd53d14445ca1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1664, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}