{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk5ODYxNzI0", "number": 3148, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxMjoxNDoyMFrOErlbHQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxMjoxNDoyMFrOErlbHQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MTM3MzczOnYy", "diffSide": "RIGHT", "path": "drools-scenario-simulation/drools-scenario-simulation-api/src/main/java/org/drools/scenariosimulation/api/model/ScesimModelDescriptor.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxMjoxNDoyMFrOHeboPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQwOTowMTowOVrOHfBUJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTY3MTk5Ng==", "bodyText": "It is not related to the PR but why don't make internalFilter returns Stream<FactMapping> (and update getFactMappingsByFactName accordingly)?\nThis should prevent useless iteration", "url": "https://github.com/kiegroup/drools/pull/3148#discussion_r501671996", "createdAt": "2020-10-08T12:14:20Z", "author": {"login": "danielezonca"}, "path": "drools-scenario-simulation/drools-scenario-simulation-api/src/main/java/org/drools/scenariosimulation/api/model/ScesimModelDescriptor.java", "diffHunk": "@@ -89,9 +89,9 @@ public int getIndexByIdentifier(FactIdentifier factIdentifier, ExpressionIdentif\n     }\n \n     public Optional<FactMapping> getFactMapping(FactIdentifier factIdentifier, ExpressionIdentifier ei) {\n-        List<FactMapping> factMappings = internalFilter(e -> Objects.equals(e.getExpressionIdentifier(), ei) &&\n+        List<FactMapping> filteredFactMappings = internalFilter(e -> Objects.equals(e.getExpressionIdentifier(), ei) &&", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d37e0496271c3598d781ed7de8c5e158d810b7a"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTc4MDQwNw==", "bodyText": "@danielezonca Very nice, the only downside is we need to create a PR for drools-wb accordingly to that change (the API changes). Please wait for that PR before proceed.", "url": "https://github.com/kiegroup/drools/pull/3148#discussion_r501780407", "createdAt": "2020-10-08T14:46:19Z", "author": {"login": "yesamer"}, "path": "drools-scenario-simulation/drools-scenario-simulation-api/src/main/java/org/drools/scenariosimulation/api/model/ScesimModelDescriptor.java", "diffHunk": "@@ -89,9 +89,9 @@ public int getIndexByIdentifier(FactIdentifier factIdentifier, ExpressionIdentif\n     }\n \n     public Optional<FactMapping> getFactMapping(FactIdentifier factIdentifier, ExpressionIdentifier ei) {\n-        List<FactMapping> factMappings = internalFilter(e -> Objects.equals(e.getExpressionIdentifier(), ei) &&\n+        List<FactMapping> filteredFactMappings = internalFilter(e -> Objects.equals(e.getExpressionIdentifier(), ei) &&", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTY3MTk5Ng=="}, "originalCommit": {"oid": "3d37e0496271c3598d781ed7de8c5e158d810b7a"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTg2NTEyOQ==", "bodyText": "Actually I was proposing a more simple and limited change: make internalFilter returns a stream, then update getFactMapping as\n    public Optional<FactMapping> getFactMapping(FactIdentifier factIdentifier, ExpressionIdentifier ei) {\n        return internalFilter(e -> Objects.equals(e.getExpressionIdentifier(), ei) &&\n                Objects.equals(e.getFactIdentifier(), factIdentifier)).findFirst();\n    }\nAnd change\n    public List<FactMapping> getFactMappingsByFactName(String factName) {\n        return internalFilter(e -> e.getFactIdentifier().getName().equalsIgnoreCase(factName)).collect(Collectors.toList());\n    }\nSo in this case no impact on other repo :)", "url": "https://github.com/kiegroup/drools/pull/3148#discussion_r501865129", "createdAt": "2020-10-08T16:46:53Z", "author": {"login": "danielezonca"}, "path": "drools-scenario-simulation/drools-scenario-simulation-api/src/main/java/org/drools/scenariosimulation/api/model/ScesimModelDescriptor.java", "diffHunk": "@@ -89,9 +89,9 @@ public int getIndexByIdentifier(FactIdentifier factIdentifier, ExpressionIdentif\n     }\n \n     public Optional<FactMapping> getFactMapping(FactIdentifier factIdentifier, ExpressionIdentifier ei) {\n-        List<FactMapping> factMappings = internalFilter(e -> Objects.equals(e.getExpressionIdentifier(), ei) &&\n+        List<FactMapping> filteredFactMappings = internalFilter(e -> Objects.equals(e.getExpressionIdentifier(), ei) &&", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTY3MTk5Ng=="}, "originalCommit": {"oid": "3d37e0496271c3598d781ed7de8c5e158d810b7a"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjI4OTQ0NQ==", "bodyText": "@danielezonca ok, in any case I think returning a Stream in  getFactMappingsByFactName works very well in this case, in client side the only case where that list is used is converted as a Stream and operation are used.", "url": "https://github.com/kiegroup/drools/pull/3148#discussion_r502289445", "createdAt": "2020-10-09T09:01:09Z", "author": {"login": "yesamer"}, "path": "drools-scenario-simulation/drools-scenario-simulation-api/src/main/java/org/drools/scenariosimulation/api/model/ScesimModelDescriptor.java", "diffHunk": "@@ -89,9 +89,9 @@ public int getIndexByIdentifier(FactIdentifier factIdentifier, ExpressionIdentif\n     }\n \n     public Optional<FactMapping> getFactMapping(FactIdentifier factIdentifier, ExpressionIdentifier ei) {\n-        List<FactMapping> factMappings = internalFilter(e -> Objects.equals(e.getExpressionIdentifier(), ei) &&\n+        List<FactMapping> filteredFactMappings = internalFilter(e -> Objects.equals(e.getExpressionIdentifier(), ei) &&", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTY3MTk5Ng=="}, "originalCommit": {"oid": "3d37e0496271c3598d781ed7de8c5e158d810b7a"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2335, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}