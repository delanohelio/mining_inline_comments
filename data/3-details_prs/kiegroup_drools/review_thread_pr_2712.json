{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYwNTkzNTY2", "number": 2712, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQxMDoxMDozMlrODWzIYA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQxMDoxMDozMlrODWzIYA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI1MjMyOTkyOnYy", "diffSide": "RIGHT", "path": "drools-model/drools-model-compiler/src/test/java/org/drools/modelcompiler/PatternDSLTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQxMDoxMDozMlrOFbwxFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQxMDoxMDozMlrOFbwxFQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDY1NDg2OQ==", "bodyText": "This is something I do not understand. This is code from Drools, it does not use my changes. Yet, it fails.\nException executing consequence for rule \"biBinding\" in defaultpkg: java.lang.NullPointerException\n\n    at org.drools.core.runtime.rule.impl.DefaultConsequenceExceptionHandler.handleException(DefaultConsequenceExceptionHandler.java:39)\n    at org.drools.core.common.DefaultAgenda.handleException(DefaultAgenda.java:1291)\n    at org.drools.core.phreak.RuleExecutor.innerFireActivation(RuleExecutor.java:438)\n    at org.drools.core.phreak.RuleExecutor.fireActivation(RuleExecutor.java:380)\n    at org.drools.core.phreak.RuleExecutor.fire(RuleExecutor.java:136)\n    at org.drools.core.phreak.RuleExecutor.evaluateNetworkAndFire(RuleExecutor.java:89)\n    at org.drools.core.concurrent.AbstractRuleEvaluator.internalEvaluateAndFire(AbstractRuleEvaluator.java:33)\n    at org.drools.core.concurrent.SequentialRuleEvaluator.evaluateAndFire(SequentialRuleEvaluator.java:43)\n    at org.drools.core.common.DefaultAgenda.fireLoop(DefaultAgenda.java:1101)\n    at org.drools.core.common.DefaultAgenda.internalFireAllRules(DefaultAgenda.java:1048)\n    at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1040)\n    at org.drools.core.impl.StatefulKnowledgeSessionImpl.internalFireAllRules(StatefulKnowledgeSessionImpl.java:1337)\n    at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1328)\n    at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1312)\n    at org.drools.modelcompiler.PatternDSLTest.testBiBinding(PatternDSLTest.java:260)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:567)\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\n    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\n    at org.junit.runner.JUnitCore.run(JUnitCore.java:137)\n    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:230)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:58)\nCaused by: java.lang.NullPointerException\n    at org.drools.modelcompiler.constraints.LambdaReadAccessor.getValue(LambdaReadAccessor.java:42)\n    at org.drools.core.rule.Declaration.getValue(Declaration.java:222)\n    at org.drools.modelcompiler.consequence.LambdaConsequence.declarationsToFacts(LambdaConsequence.java:75)\n    at org.drools.modelcompiler.consequence.LambdaConsequence.evaluate(LambdaConsequence.java:47)\n    at org.drools.core.phreak.RuleExecutor.innerFireActivation(RuleExecutor.java:431)\n    ... 34 more", "url": "https://github.com/kiegroup/drools/pull/2712#discussion_r364654869", "createdAt": "2020-01-09T10:10:32Z", "author": {"login": "triceo"}, "path": "drools-model/drools-model-compiler/src/test/java/org/drools/modelcompiler/PatternDSLTest.java", "diffHunk": "@@ -225,6 +224,48 @@ public void testOr() {\n         assertEquals(\"Mario\", result.getValue());\n     }\n \n+    @Test\n+    public void testBiBinding() {\n+        Result result = new Result();\n+        Variable<Person> person1 = declarationOf( Person.class );\n+        Variable<Person> person2 = declarationOf( Person.class );\n+        Variable<Person> person3 = declarationOf( Person.class );\n+        Variable<Integer> ageSum = declarationOf( Integer.class );\n+\n+        Rule rule = rule( \"biBinding\" )\n+                .build(\n+                        pattern(person1)\n+                                .expr(\"exprA\", p -> p.getName().equals( \"Mark\" )),\n+                        pattern(person2)\n+                                .expr(\"exprB\", p -> p.getName().equals( \"Edson\" )),\n+                        pattern(person3)\n+                                .expr(\"exprC\", p -> p.getName().equals( \"Mario\" ))\n+                                .bind(ageSum, person1, (p, p2) -> p.getAge() + p2.getAge()),\n+                        on(ageSum).execute(result::setValue)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a66b30d4fefea5ce1453f9844c8f6733fb0e42b6"}, "originalPosition": 29}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2614, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}