{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYwNTkzNTY2", "number": 2712, "title": "DROOLS-4911 Enable binding functions with 3 and 4 arguments", "bodyText": "If there's a good place for some tests in the codebase, please point it out and I will add them.", "createdAt": "2020-01-08T18:23:18Z", "url": "https://github.com/kiegroup/drools/pull/2712", "merged": true, "mergeCommit": {"oid": "0b8a7de697eec9b2b1d9cd17bd32c08f1ea36120"}, "closed": true, "closedAt": "2020-01-10T16:43:53Z", "author": {"login": "triceo"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb4Zo3WgH2gAyMzYwNTkzNTY2OmYxNDI1N2IwY2E5ZTRkYmU3OTM4NDc0OTAzNTk2NTYxODEzZTJmZjg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb48XGAgH2gAyMzYwNTkzNTY2OjkwNGQ3MWJhZTdiYTk1YzE3YTRmYmE2NTlhNGRlZTczOTZjNDNiZjA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f14257b0ca9e4dbe7938474903596561813e2ff8", "author": {"user": {"login": "triceo", "name": "Luk\u00e1\u0161 Petrovick\u00fd"}}, "url": "https://github.com/kiegroup/drools/commit/f14257b0ca9e4dbe7938474903596561813e2ff8", "committedDate": "2020-01-08T18:26:57Z", "message": "DROOLS-4911 Enable binding functions with 3 and 4 arguments"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5b032f4634e270b0d3b7f54f09671990b9072482", "author": {"user": {"login": "triceo", "name": "Luk\u00e1\u0161 Petrovick\u00fd"}}, "url": "https://github.com/kiegroup/drools/commit/5b032f4634e270b0d3b7f54f09671990b9072482", "committedDate": "2020-01-08T18:22:05Z", "message": "DROOLS-4911 Enable binding functions with 3 and 4 arguments"}, "afterCommit": {"oid": "f14257b0ca9e4dbe7938474903596561813e2ff8", "author": {"user": {"login": "triceo", "name": "Luk\u00e1\u0161 Petrovick\u00fd"}}, "url": "https://github.com/kiegroup/drools/commit/f14257b0ca9e4dbe7938474903596561813e2ff8", "committedDate": "2020-01-08T18:26:57Z", "message": "DROOLS-4911 Enable binding functions with 3 and 4 arguments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQwNDExNzYx", "url": "https://github.com/kiegroup/drools/pull/2712#pullrequestreview-340411761", "createdAt": "2020-01-09T10:10:32Z", "commit": {"oid": "a66b30d4fefea5ce1453f9844c8f6733fb0e42b6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQxMDoxMDozMlrOFbwxFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQxMDoxMDozMlrOFbwxFQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDY1NDg2OQ==", "bodyText": "This is something I do not understand. This is code from Drools, it does not use my changes. Yet, it fails.\nException executing consequence for rule \"biBinding\" in defaultpkg: java.lang.NullPointerException\n\n    at org.drools.core.runtime.rule.impl.DefaultConsequenceExceptionHandler.handleException(DefaultConsequenceExceptionHandler.java:39)\n    at org.drools.core.common.DefaultAgenda.handleException(DefaultAgenda.java:1291)\n    at org.drools.core.phreak.RuleExecutor.innerFireActivation(RuleExecutor.java:438)\n    at org.drools.core.phreak.RuleExecutor.fireActivation(RuleExecutor.java:380)\n    at org.drools.core.phreak.RuleExecutor.fire(RuleExecutor.java:136)\n    at org.drools.core.phreak.RuleExecutor.evaluateNetworkAndFire(RuleExecutor.java:89)\n    at org.drools.core.concurrent.AbstractRuleEvaluator.internalEvaluateAndFire(AbstractRuleEvaluator.java:33)\n    at org.drools.core.concurrent.SequentialRuleEvaluator.evaluateAndFire(SequentialRuleEvaluator.java:43)\n    at org.drools.core.common.DefaultAgenda.fireLoop(DefaultAgenda.java:1101)\n    at org.drools.core.common.DefaultAgenda.internalFireAllRules(DefaultAgenda.java:1048)\n    at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1040)\n    at org.drools.core.impl.StatefulKnowledgeSessionImpl.internalFireAllRules(StatefulKnowledgeSessionImpl.java:1337)\n    at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1328)\n    at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1312)\n    at org.drools.modelcompiler.PatternDSLTest.testBiBinding(PatternDSLTest.java:260)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:567)\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\n    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\n    at org.junit.runner.JUnitCore.run(JUnitCore.java:137)\n    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:230)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:58)\nCaused by: java.lang.NullPointerException\n    at org.drools.modelcompiler.constraints.LambdaReadAccessor.getValue(LambdaReadAccessor.java:42)\n    at org.drools.core.rule.Declaration.getValue(Declaration.java:222)\n    at org.drools.modelcompiler.consequence.LambdaConsequence.declarationsToFacts(LambdaConsequence.java:75)\n    at org.drools.modelcompiler.consequence.LambdaConsequence.evaluate(LambdaConsequence.java:47)\n    at org.drools.core.phreak.RuleExecutor.innerFireActivation(RuleExecutor.java:431)\n    ... 34 more", "url": "https://github.com/kiegroup/drools/pull/2712#discussion_r364654869", "createdAt": "2020-01-09T10:10:32Z", "author": {"login": "triceo"}, "path": "drools-model/drools-model-compiler/src/test/java/org/drools/modelcompiler/PatternDSLTest.java", "diffHunk": "@@ -225,6 +224,48 @@ public void testOr() {\n         assertEquals(\"Mario\", result.getValue());\n     }\n \n+    @Test\n+    public void testBiBinding() {\n+        Result result = new Result();\n+        Variable<Person> person1 = declarationOf( Person.class );\n+        Variable<Person> person2 = declarationOf( Person.class );\n+        Variable<Person> person3 = declarationOf( Person.class );\n+        Variable<Integer> ageSum = declarationOf( Integer.class );\n+\n+        Rule rule = rule( \"biBinding\" )\n+                .build(\n+                        pattern(person1)\n+                                .expr(\"exprA\", p -> p.getName().equals( \"Mark\" )),\n+                        pattern(person2)\n+                                .expr(\"exprB\", p -> p.getName().equals( \"Edson\" )),\n+                        pattern(person3)\n+                                .expr(\"exprC\", p -> p.getName().equals( \"Mario\" ))\n+                                .bind(ageSum, person1, (p, p2) -> p.getAge() + p2.getAge()),\n+                        on(ageSum).execute(result::setValue)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a66b30d4fefea5ce1453f9844c8f6733fb0e42b6"}, "originalPosition": 29}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "10e288270add1a3e089317a6f12c8c0c0dadd42e", "author": {"user": {"login": "triceo", "name": "Luk\u00e1\u0161 Petrovick\u00fd"}}, "url": "https://github.com/kiegroup/drools/commit/10e288270add1a3e089317a6f12c8c0c0dadd42e", "committedDate": "2020-01-09T16:16:44Z", "message": "Add the proper test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5e5744de68ae810dd92fdeddd41abc794e8b9d98", "author": {"user": {"login": "triceo", "name": "Luk\u00e1\u0161 Petrovick\u00fd"}}, "url": "https://github.com/kiegroup/drools/commit/5e5744de68ae810dd92fdeddd41abc794e8b9d98", "committedDate": "2020-01-09T16:17:47Z", "message": "Address an initial flow DSL problem"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c5e338df604474e5362d7bbc8ba0b5513f52a775", "author": {"user": {"login": "triceo", "name": "Luk\u00e1\u0161 Petrovick\u00fd"}}, "url": "https://github.com/kiegroup/drools/commit/c5e338df604474e5362d7bbc8ba0b5513f52a775", "committedDate": "2020-01-09T16:35:19Z", "message": "Add a 4-bind test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7c9ccb079fb4207185209e89fe25a130b88acff3", "author": {"user": {"login": "triceo", "name": "Luk\u00e1\u0161 Petrovick\u00fd"}}, "url": "https://github.com/kiegroup/drools/commit/7c9ccb079fb4207185209e89fe25a130b88acff3", "committedDate": "2020-01-09T10:45:32Z", "message": "Fix syntax"}, "afterCommit": {"oid": "c5e338df604474e5362d7bbc8ba0b5513f52a775", "author": {"user": {"login": "triceo", "name": "Luk\u00e1\u0161 Petrovick\u00fd"}}, "url": "https://github.com/kiegroup/drools/commit/c5e338df604474e5362d7bbc8ba0b5513f52a775", "committedDate": "2020-01-09T16:35:19Z", "message": "Add a 4-bind test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a324fe6a3ed9fce63b391e850132969dc4e3ebf8", "author": {"user": {"login": "triceo", "name": "Luk\u00e1\u0161 Petrovick\u00fd"}}, "url": "https://github.com/kiegroup/drools/commit/a324fe6a3ed9fce63b391e850132969dc4e3ebf8", "committedDate": "2020-01-10T10:06:03Z", "message": "First fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0fd4116ad22f4ec14a9824db1cbaeef01f08b461", "author": {"user": {"login": "triceo", "name": "Luk\u00e1\u0161 Petrovick\u00fd"}}, "url": "https://github.com/kiegroup/drools/commit/0fd4116ad22f4ec14a9824db1cbaeef01f08b461", "committedDate": "2020-01-10T10:19:59Z", "message": "Second fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c1ee5178c2c2afcb5c2b80a5822ad00df4f8fd9e", "author": {"user": {"login": "triceo", "name": "Luk\u00e1\u0161 Petrovick\u00fd"}}, "url": "https://github.com/kiegroup/drools/commit/c1ee5178c2c2afcb5c2b80a5822ad00df4f8fd9e", "committedDate": "2020-01-10T10:42:34Z", "message": "Cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c424586f15003af40bab8cdd15b18e1e8a1606f0", "author": {"user": {"login": "triceo", "name": "Luk\u00e1\u0161 Petrovick\u00fd"}}, "url": "https://github.com/kiegroup/drools/commit/c424586f15003af40bab8cdd15b18e1e8a1606f0", "committedDate": "2020-01-10T10:51:22Z", "message": "More cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "904d71bae7ba95c17a4fba659a4dee7396c43bf0", "author": {"user": {"login": "triceo", "name": "Luk\u00e1\u0161 Petrovick\u00fd"}}, "url": "https://github.com/kiegroup/drools/commit/904d71bae7ba95c17a4fba659a4dee7396c43bf0", "committedDate": "2020-01-10T10:54:13Z", "message": "Code style"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1643, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}