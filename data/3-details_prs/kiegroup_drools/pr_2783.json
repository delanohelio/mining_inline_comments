{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc5MDU1MzE1", "number": 2783, "title": "[DROOLS-5103] Implementing multi-module PMML model archetype", "bodyText": "@danielezonca @mariofusco @jiripetrlik\nsee https://issues.redhat.com/browse/DROOLS-5103\nArchetype to generate a multi-module model-specific PMML submodule", "createdAt": "2020-02-24T15:32:45Z", "url": "https://github.com/kiegroup/drools/pull/2783", "merged": true, "mergeCommit": {"oid": "ad311c01e924474f15f8bed4af54af75789edbe6"}, "closed": true, "closedAt": "2020-02-27T13:28:13Z", "author": {"login": "gitgabrio"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcHfR3BgH2gAyMzc5MDU1MzE1OjdhMDMyMjQzOGU0YjhlMDA4Nzk1NzE0MzY2NTJjZjg1NmE4OTdiNzg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcIEtsCAFqTM2NDgxMDI3NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7a0322438e4b8e00879571436652cf856a897b78", "author": {"user": {"login": "gitgabrio", "name": "Gabriele Cardosi"}}, "url": "https://github.com/kiegroup/drools/commit/7a0322438e4b8e00879571436652cf856a897b78", "committedDate": "2020-02-24T15:30:07Z", "message": "[DROOLS-5103] Implementing multi-module PMML model archetype"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYzOTUwMzg5", "url": "https://github.com/kiegroup/drools/pull/2783#pullrequestreview-363950389", "createdAt": "2020-02-25T08:35:33Z", "commit": {"oid": "7a0322438e4b8e00879571436652cf856a897b78"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQwODozNTozM1rOFt8wzQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQwODozNzo0MFrOFt81BQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzcyNTc3Mw==", "bodyText": "Do we need to support Java 1.7? I think we currently support Java 1.8 and higher in KIE.", "url": "https://github.com/kiegroup/drools/pull/2783#discussion_r383725773", "createdAt": "2020-02-25T08:35:33Z", "author": {"login": "jiripetrlik"}, "path": "kie-pmml-new/kie-pmml-models/kie-pmml-models-archetype/pom.xml", "diffHunk": "@@ -0,0 +1,65 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+\n+<project xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <parent>\n+    <groupId>org.kie</groupId>\n+    <artifactId>kie-pmml-models</artifactId>\n+    <version>7.34.0-SNAPSHOT</version>\n+  </parent>\n+\n+  <artifactId>kie-pmml-models-archetype</artifactId>\n+  <packaging>jar</packaging>\n+\n+  <name>KIE :: PMML :: Models :: Archetype</name>\n+  <description>Archetype for actual PMML model implementation</description>\n+\n+  <properties>\n+    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n+    <maven.compiler.source>1.7</maven.compiler.source>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7a0322438e4b8e00879571436652cf856a897b78"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzcyNjg1Mw==", "bodyText": "Please remove unnecessary new lines.", "url": "https://github.com/kiegroup/drools/pull/2783#discussion_r383726853", "createdAt": "2020-02-25T08:37:40Z", "author": {"login": "jiripetrlik"}, "path": "kie-pmml-new/kie-pmml-models/kie-pmml-models-archetype/src/main/resources/archetype-resources/__rootArtifactId__-compiler/src/main/java/__packageModelName__/compiler/executor/__modelName__ModelImplementationProvider.java", "diffHunk": "@@ -0,0 +1,46 @@\n+#set($str=\"\")\n+#set($dt=$str.getClass().forName(\"java.util.Date\").newInstance())\n+#set($year=$dt.getYear()+1900)\n+/*\n+* Copyright ${year} Red Hat, Inc. and/or its affiliates.\n+*\n+* Licensed under the Apache License, Version 2.0 (the \"License\");\n+* you may not use this file except in compliance with the License.\n+* You may obtain a copy of the License at\n+*\n+*     http://www.apache.org/licenses/LICENSE-2.0\n+*\n+* Unless required by applicable law or agreed to in writing, software\n+* distributed under the License is distributed on an \"AS IS\" BASIS,\n+* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+* See the License for the specific language governing permissions and\n+* limitations under the License.\n+*/\n+package ${package}.${packageModelName}.compiler.executor;\n+\n+import org.dmg.pmml.DataDictionary;\n+import org.dmg.pmml.${packageModelName}.${modelName}Model;\n+import org.kie.pmml.commons.model.enums.PMML_MODEL;\n+import org.kie.pmml.compiler.api.provider.ModelImplementationProvider;\n+import ${package}.${packageModelName}.compiler.factories.KiePMML${modelName}ModelFactory;\n+import ${package}.${packageModelName}.model.KiePMML${modelName}Model;\n+\n+import static ${package}.${packageModelName}.model.KiePMML${modelName}Model.PMML_MODEL_TYPE;\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7a0322438e4b8e00879571436652cf856a897b78"}, "originalPosition": 29}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0MDc1ODU3", "url": "https://github.com/kiegroup/drools/pull/2783#pullrequestreview-364075857", "createdAt": "2020-02-25T11:40:52Z", "commit": {"oid": "7a0322438e4b8e00879571436652cf856a897b78"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxMTo0MDo1MlrOFuC8rg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxMTo0NjoyM1rOFuDGcw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzgyNzExOA==", "bodyText": "I prefer empty implementation with throws new UnsupportedOperationException() instead a return null. Wdtr?", "url": "https://github.com/kiegroup/drools/pull/2783#discussion_r383827118", "createdAt": "2020-02-25T11:40:52Z", "author": {"login": "danielezonca"}, "path": "kie-pmml-new/kie-pmml-models/kie-pmml-models-archetype/src/main/resources/archetype-resources/__rootArtifactId__-compiler/src/main/java/__packageModelName__/compiler/factories/KiePMML__modelName__ModelFactory.java", "diffHunk": "@@ -0,0 +1,37 @@\n+#set($str=\"\")\n+#set($dt=$str.getClass().forName(\"java.util.Date\").newInstance())\n+#set($year=$dt.getYear()+1900)\n+/*\n+ * Copyright ${year} Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package  ${package}.${packageModelName}.compiler.factories;\n+\n+import org.dmg.pmml.DataDictionary;\n+import org.dmg.pmml.${packageModelName}.${modelName}Model;\n+import ${package}.${packageModelName}.model.KiePMML${modelName}Model;\n+\n+\n+public class KiePMML${modelName}ModelFactory {\n+\n+\n+    public static KiePMML${modelName}Model getKiePMML${modelName}Model(DataDictionary dataDictionary, ${modelName}Model model) {\n+        // TODO\n+        return null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7a0322438e4b8e00879571436652cf856a897b78"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzgyNzU0NQ==", "bodyText": "Also here I would prefer a wrong assertion like fail(\"To be implemented\"). Wdyt?", "url": "https://github.com/kiegroup/drools/pull/2783#discussion_r383827545", "createdAt": "2020-02-25T11:41:54Z", "author": {"login": "danielezonca"}, "path": "kie-pmml-new/kie-pmml-models/kie-pmml-models-archetype/src/main/resources/archetype-resources/__rootArtifactId__-compiler/src/test/java/__packageModelName__/compiler/executor/__modelName__ModelImplementationProviderTest.java", "diffHunk": "@@ -0,0 +1,39 @@\n+#set($str=\"\")\n+#set($dt=$str.getClass().forName(\"java.util.Date\").newInstance())\n+#set($year=$dt.getYear()+1900)\n+/*\n+ * Copyright ${year} Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package ${package}.${packageModelName}.compiler.executor;\n+\n+import org.kie.pmml.commons.model.enums.PMML_MODEL;\n+import org.junit.Test;\n+\n+import static org.junit.Assert.assertEquals;\n+\n+public class ${modelName}ModelImplementationProviderTest {\n+\n+    private static final ${modelName}ModelImplementationProvider PROVIDER= new ${modelName}ModelImplementationProvider();\n+\n+    @Test\n+    public void getPMMLModelType(){\n+        assertEquals(PMML_MODEL.${modelNameUppercase}_MODEL,PROVIDER.getPMMLModelType());\n+    }\n+\n+    @Test\n+    public void getKiePMMLModel() throws Exception {\n+        // TODO", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7a0322438e4b8e00879571436652cf856a897b78"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzgyODM2MA==", "bodyText": "Same comment here", "url": "https://github.com/kiegroup/drools/pull/2783#discussion_r383828360", "createdAt": "2020-02-25T11:43:35Z", "author": {"login": "danielezonca"}, "path": "kie-pmml-new/kie-pmml-models/kie-pmml-models-archetype/src/main/resources/archetype-resources/__rootArtifactId__-evaluator/src/main/java/__packageModelName__/evaluator/PMML__modelName__ModelEvaluator.java", "diffHunk": "@@ -0,0 +1,50 @@\n+#set($str=\"\")\n+#set($dt=$str.getClass().forName(\"java.util.Date\").newInstance())\n+#set($year=$dt.getYear()+1900)\n+/*\n+ * Copyright ${year} Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package  ${package}.${packageModelName}.evaluator;\n+\n+\n+import org.kie.api.pmml.PMML4Result;\n+import org.kie.pmml.commons.model.KiePMMLModel;\n+import org.kie.pmml.commons.model.enums.PMML_MODEL;\n+import org.kie.pmml.evaluator.api.exceptions.KiePMMLModelException;\n+import org.kie.pmml.evaluator.api.executor.PMMLContext;\n+import org.kie.pmml.evaluator.core.executor.PMMLModelExecutor;\n+import ${package}.${packageModelName}.model.KiePMML${modelName}Model;\n+\n+\n+\n+/**\n+ * Default <code>PMMLModelExecutor</code> for <b>${modelName}</b>\n+ */\n+public class PMML${modelName}ModelEvaluator implements PMMLModelExecutor {\n+\n+    @Override\n+    public PMML_MODEL getPMMLModelType(){\n+        return PMML_MODEL.${modelNameUppercase}_MODEL;\n+    }\n+\n+    @Override\n+    public PMML4Result evaluate(KiePMMLModel model, PMMLContext context, String releaseId) {\n+        if(!(model instanceof KiePMML${modelName}Model)){\n+            throw new KiePMMLModelException(\"Expected a KiePMML${modelName}Model, received a \"+ model.getClass().getName());\n+        }\n+        // TODO\n+        return null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7a0322438e4b8e00879571436652cf856a897b78"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzgyODg5NA==", "bodyText": "This file is needed only for Drools-based implementation so it should be optional or we should have two different archetypes", "url": "https://github.com/kiegroup/drools/pull/2783#discussion_r383828894", "createdAt": "2020-02-25T11:44:45Z", "author": {"login": "danielezonca"}, "path": "kie-pmml-new/kie-pmml-models/kie-pmml-models-archetype/src/main/resources/archetype-resources/__rootArtifactId__-evaluator/src/main/resources/META-INF/kmodule.xml", "diffHunk": "@@ -0,0 +1,12 @@\n+#set( $symbol_pound = '#' )", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7a0322438e4b8e00879571436652cf856a897b78"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzgyOTYxOQ==", "bodyText": "Is it needed that the new module will have kie-pmml-models as parent?", "url": "https://github.com/kiegroup/drools/pull/2783#discussion_r383829619", "createdAt": "2020-02-25T11:46:23Z", "author": {"login": "danielezonca"}, "path": "kie-pmml-new/kie-pmml-models/kie-pmml-models-archetype/src/main/resources/archetype-resources/pom.xml", "diffHunk": "@@ -0,0 +1,24 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://maven.apache.org/POM/4.0.0\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <parent>\n+    <groupId>${groupId}</groupId>\n+    <artifactId>kie-pmml-models</artifactId>\n+    <version>7.34.0-SNAPSHOT</version>\n+  </parent>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7a0322438e4b8e00879571436652cf856a897b78"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "27b45de09e33ac98d2d458b5ad7c0f9a4c50fc4e", "author": {"user": {"login": "gitgabrio", "name": "Gabriele Cardosi"}}, "url": "https://github.com/kiegroup/drools/commit/27b45de09e33ac98d2d458b5ad7c0f9a4c50fc4e", "committedDate": "2020-02-25T13:54:32Z", "message": "[DROOLS-5103] Movedo archetype to main PMML root. Automatic generation of archetypeId"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f58147013a77134b68bd81156354e7220e83b4ce", "author": {"user": {"login": "gitgabrio", "name": "Gabriele Cardosi"}}, "url": "https://github.com/kiegroup/drools/commit/f58147013a77134b68bd81156354e7220e83b4ce", "committedDate": "2020-02-26T09:58:00Z", "message": "[DROOLS-5103] Fixed as per PR suggestion. Add IT tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0ODEwMjc1", "url": "https://github.com/kiegroup/drools/pull/2783#pullrequestreview-364810275", "createdAt": "2020-02-26T11:07:00Z", "commit": {"oid": "f58147013a77134b68bd81156354e7220e83b4ce"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1605, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}