{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg2NTE0NDA1", "number": 3097, "title": "KOGITO-2277 fix OpenAPI schema for temporals", "bodyText": "part of an ensemble or PRs\nJIRA: https://issues.redhat.com/browse/KOGITO-2277\nreferenced Pull Requests: depends on:\n\nkiegroup/droolsjbpm-build-bootstrap#1458\n\nHow to retest a PR or trigger a specific build:\n\n* a pull request please add comment: Jenkins retest this\n \n* a full downstream build please add comment: Jenkins run fdb\n  \n* a compile downstream build please  add comment: Jenkins run cdb\n\n* a full production downstream build please add comment: Jenkins execute product fdb\n\n* an upstream build please add comment: Jenkins run upstream", "createdAt": "2020-09-14T10:39:51Z", "url": "https://github.com/kiegroup/drools/pull/3097", "merged": true, "mergeCommit": {"oid": "f0a69e1926e6c2a06fd7f2ad275160fd63a5662f"}, "closed": true, "closedAt": "2020-09-15T06:42:20Z", "author": {"login": "tarilabs"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdH4af-AH2gAyNDg2NTE0NDA1OmUyMzVmODZmNTk0YjJhNWE1MGM4ODhkMjRjNTMzZDRlNjhkOGJmZDM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdJB_GjgFqTQ4ODM2ODE2Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e235f86f594b2a5a50c888d24c533d4e68d8bfd3", "author": {"user": {"login": "tarilabs", "name": "Matteo Mortari"}}, "url": "https://github.com/kiegroup/drools/commit/e235f86f594b2a5a50c888d24c533d4e68d8bfd3", "committedDate": "2020-09-11T16:58:20Z", "message": "."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "735ecfe92ead75682764b00b2076bc977d967a76", "author": {"user": {"login": "tarilabs", "name": "Matteo Mortari"}}, "url": "https://github.com/kiegroup/drools/commit/735ecfe92ead75682764b00b2076bc977d967a76", "committedDate": "2020-09-11T19:49:18Z", "message": "basic supports"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b3a7d284a5117ee587afbbb21f2857725f707199", "author": {"user": {"login": "tarilabs", "name": "Matteo Mortari"}}, "url": "https://github.com/kiegroup/drools/commit/b3a7d284a5117ee587afbbb21f2857725f707199", "committedDate": "2020-09-12T13:03:02Z", "message": "Support Swagger/OpenAPI for ARRAY<temporal>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fdc6737c1189c1cd20e2369705bdaf344c9989e5", "author": {"user": {"login": "tarilabs", "name": "Matteo Mortari"}}, "url": "https://github.com/kiegroup/drools/commit/fdc6737c1189c1cd20e2369705bdaf344c9989e5", "committedDate": "2020-09-14T08:09:25Z", "message": "Support for io.swagger OAS v3 annotations"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3NjYwNjY1", "url": "https://github.com/kiegroup/drools/pull/3097#pullrequestreview-487660665", "createdAt": "2020-09-14T11:28:00Z", "commit": {"oid": "fdc6737c1189c1cd20e2369705bdaf344c9989e5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3NjczMDM1", "url": "https://github.com/kiegroup/drools/pull/3097#pullrequestreview-487673035", "createdAt": "2020-09-14T11:47:36Z", "commit": {"oid": "fdc6737c1189c1cd20e2369705bdaf344c9989e5"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxMTo0NzozNlrOHRQAfg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxMTo0NzozNlrOHRQAfg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzg1MDExMA==", "bodyText": "This if is too big for my taste, can you extract a method?", "url": "https://github.com/kiegroup/drools/pull/3097#discussion_r487850110", "createdAt": "2020-09-14T11:47:36Z", "author": {"login": "lucamolteni"}, "path": "kie-dmn/kie-dmn-core/src/main/java/org/kie/dmn/typesafe/DMNDeclaredField.java", "diffHunk": "@@ -114,6 +105,59 @@ public String getInitExpr() {\n             Optional<Class<?>> as = index.getJacksonDeserializeAs(fieldDMNType);\n             as.ifPresent(asClass -> annotations.add(new SimpleAnnotationDefinition(\"com.fasterxml.jackson.databind.annotation.JsonDeserialize\").addValue(\"as\", asClass.getCanonicalName() + \".class\")));\n         }\n+        if (codeGenConfig.isWithMPOpenApiAnnotation() || codeGenConfig.isWithIOSwaggerOASv3Annotation()) {\n+            if (getObjectType().equals(\"java.lang.String\") && fieldDMNType.getAllowedValues() != null && !fieldDMNType.getAllowedValues().isEmpty()) {\n+                String enumeration = fieldDMNType.getAllowedValues().stream()\n+                                                 .map(UnaryTestImpl.class::cast)\n+                                                 .map(UnaryTestImpl::toString)\n+                                                 .collect(Collectors.joining(\",\"));\n+                if (codeGenConfig.isWithMPOpenApiAnnotation()) {\n+                    annotations.add(new SimpleAnnotationDefinition(\"org.eclipse.microprofile.openapi.annotations.media.Schema\").addValue(\"name\", \"\\\"\" + originalMapKey + \"\\\"\")\n+                                                                                                                               .addValue(\"enumeration\", \"{\" + enumeration + \"}\"));\n+                }\n+                if (codeGenConfig.isWithIOSwaggerOASv3Annotation()) {\n+                    annotations.add(new SimpleAnnotationDefinition(\"io.swagger.v3.oas.annotations.media.Schema\").addValue(\"name\", \"\\\"\" + originalMapKey + \"\\\"\")\n+                                                                                                                .addValue(\"allowableValues\", \"{\" + enumeration + \"}\"));\n+                }\n+            } else {\n+                boolean isTemporal = DMNTypeUtils.isFEELBuiltInType(fieldDMNType) &&", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fdc6737c1189c1cd20e2369705bdaf344c9989e5"}, "originalPosition": 44}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "998e148462abde893c9cf658e964c0d9e2a59880", "author": {"user": {"login": "tarilabs", "name": "Matteo Mortari"}}, "url": "https://github.com/kiegroup/drools/commit/998e148462abde893c9cf658e964c0d9e2a59880", "committedDate": "2020-09-14T12:51:03Z", "message": "implement code review feedback"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "697f095b0c74b7559a99c6bdec010698e9d133d6", "author": {"user": {"login": "tarilabs", "name": "Matteo Mortari"}}, "url": "https://github.com/kiegroup/drools/commit/697f095b0c74b7559a99c6bdec010698e9d133d6", "committedDate": "2020-09-14T16:22:09Z", "message": "implement code review feedback"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4MzY4MTYy", "url": "https://github.com/kiegroup/drools/pull/3097#pullrequestreview-488368162", "createdAt": "2020-09-15T06:41:23Z", "commit": {"oid": "697f095b0c74b7559a99c6bdec010698e9d133d6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1787, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}