{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIzNzE4OTEz", "number": 4871, "title": "Delegated OAuth2: reponse_type is static", "bodyText": "Hi,\nI was in need to change the response_type parameter when CAS delegates to an OAuth2 IdP, but it defaults to code. If I add this custom value to cas.authn.pac4j.oauth2[0].customParams.response_type, the request is made with an array instead of overwriting it.\nI've checked the pac4j source and opened an issue, which resulted in this commit. After that, I've found the configuration for this value, and I tried to change it through the configuration files, which you can see in the diff for this PR.\nThis is resulting in an unexpected error in the report from ./gradlew check , saying that the value should comply a certain RegEx:\nName 'response_type' must match pattern '^[a-z][a-zA-Z0-9]*$'.\n\nAs you can see, I have a default value. What am I doing wrong?", "createdAt": "2020-05-27T09:16:14Z", "url": "https://github.com/apereo/cas/pull/4871", "merged": true, "mergeCommit": {"oid": "43c2501e2ae83017f6dba45e8f6f6e3a79546ed6"}, "closed": true, "closedAt": "2020-05-28T07:02:12Z", "author": {"login": "Khorsan"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABclVhK3gH2gAyNDIzNzE4OTEzOmFmYzlhNmNhYjk5ZTA3ZWQ1NGU2ZThhMmRjMTVlYTk5YmEyZDdiYmY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcloVstgFqTQxOTgyNzg2Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "afc9a6cab99e07ed54e6e8a2dc15ea99ba2d7bbf", "author": {"user": {"login": "Khorsan", "name": "Francisco Castel-Branco"}}, "url": "https://github.com/apereo/cas/commit/afc9a6cab99e07ed54e6e8a2dc15ea99ba2d7bbf", "committedDate": "2020-05-27T09:05:31Z", "message": "Added reponse type to configuration loader, but doesn't pass the tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "308da5f2a636e72a105f01a1f819b0e7559e1216", "author": {"user": {"login": "Khorsan", "name": "Francisco Castel-Branco"}}, "url": "https://github.com/apereo/cas/commit/308da5f2a636e72a105f01a1f819b0e7559e1216", "committedDate": "2020-05-27T09:26:02Z", "message": "Updated documentation with the intention for this PR"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5MDI1MDEx", "url": "https://github.com/apereo/cas/pull/4871#pullrequestreview-419025011", "createdAt": "2020-05-27T09:39:30Z", "commit": {"oid": "308da5f2a636e72a105f01a1f819b0e7559e1216"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwOTozOTozMVrOGbBfXA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwOTo0MDowMVrOGbBglg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDk4OTE0OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                private String response_type = \"code\";\n          \n          \n            \n                private String responseType = \"code\";", "url": "https://github.com/apereo/cas/pull/4871#discussion_r430989148", "createdAt": "2020-05-27T09:39:31Z", "author": {"login": "mmoayyed"}, "path": "api/cas-server-core-api-configuration-model/src/main/java/org/apereo/cas/configuration/model/support/oauth/OAuthProperties.java", "diffHunk": "@@ -73,6 +73,11 @@\n      */\n     private UserProfileViewTypes userProfileViewType = UserProfileViewTypes.NESTED;\n \n+    /**\n+     * Configurable response_type parameter in pac4j.\n+     */\n+    private String response_type = \"code\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "308da5f2a636e72a105f01a1f819b0e7559e1216"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDk4OTM0Nw==", "bodyText": "Describe what the parameter does.", "url": "https://github.com/apereo/cas/pull/4871#discussion_r430989347", "createdAt": "2020-05-27T09:39:50Z", "author": {"login": "mmoayyed"}, "path": "api/cas-server-core-api-configuration-model/src/main/java/org/apereo/cas/configuration/model/support/oauth/OAuthProperties.java", "diffHunk": "@@ -73,6 +73,11 @@\n      */\n     private UserProfileViewTypes userProfileViewType = UserProfileViewTypes.NESTED;\n \n+    /**\n+     * Configurable response_type parameter in pac4j.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "308da5f2a636e72a105f01a1f819b0e7559e1216"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDk4OTQ2Mg==", "bodyText": "Remove", "url": "https://github.com/apereo/cas/pull/4871#discussion_r430989462", "createdAt": "2020-05-27T09:40:01Z", "author": {"login": "mmoayyed"}, "path": "support/cas-server-support-pac4j-core-clients/src/main/java/org/apereo/cas/support/pac4j/authentication/DefaultDelegatedClientFactory.java", "diffHunk": "@@ -520,6 +520,8 @@ protected void configureOAuth20Client(final Collection<IndirectClient> propertie\n                 client.setAuthUrl(oauth.getAuthUrl());\n                 client.setScope(oauth.getScope());\n                 client.setCustomParams(oauth.getCustomParams());\n+                client.getConfiguration().setResponseType(oauth.getResponseType())\n+                System.out.println(oauth.getResponseType());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "308da5f2a636e72a105f01a1f819b0e7559e1216"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8401f85e6f6c188a5e0bbd54112b5635f922d8f8", "author": {"user": {"login": "Khorsan", "name": "Francisco Castel-Branco"}}, "url": "https://github.com/apereo/cas/commit/8401f85e6f6c188a5e0bbd54112b5635f922d8f8", "committedDate": "2020-05-27T09:52:19Z", "message": "Fixed property description, removed print and updated variable name to camel case."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "27bbee74364b2e56a8b741180d0839f8668b4f88", "author": {"user": {"login": "Khorsan", "name": "Francisco Castel-Branco"}}, "url": "https://github.com/apereo/cas/commit/27bbee74364b2e56a8b741180d0839f8668b4f88", "committedDate": "2020-05-27T10:29:13Z", "message": "Syntax error and corrected file which loads the user configuration"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5ODI3ODYz", "url": "https://github.com/apereo/cas/pull/4871#pullrequestreview-419827863", "createdAt": "2020-05-28T07:01:12Z", "commit": {"oid": "27bbee74364b2e56a8b741180d0839f8668b4f88"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3613, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}