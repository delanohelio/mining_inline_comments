{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgwMzA0MDM4", "number": 1042, "title": "AF-2555: Link BC <-> DB", "bodyText": "Link BC to DB\nJIRA:\nAF-2555\nThis is a new feature for 7.44. It links BC/Dashbuilder Webapp with Dashbuilder Runtime. It introduces in Dashbuilder Runtime the Refresh mode, which is turned on by default, and allow users from BC to call dashbuilder runtime by setting the following system properties:\n\ndashbuilder.import.base.dir. The location in Runtime configured to store dashbuilder models. In runtime the same system property is used, but it has a default value, but in BC you must set it, even if it points to the default value. Sample value: /tmp/dashbuilder/models;\ndashbuilder.runtime.location: Dashbuilder Runtime root URL. Sample value: http://localhost:8280\n\nTo test it:\n\nStart Dashbuilder Runtime with multi mode and components enabled:\n\n./bin/standalone.sh -Djboss.socket.binding.port-offset=200 -Ddashbuilder.runtime.multi=true -Ddashbuilder.components.enable=true\n\n\nStart BC and set the path for modes and your dashbuilder runtime location (base URL):\n\n-Ddashbuilder.export.dir=/tmp/dashbuilder/models -Ddashbuilder.runtime.location=http://localhost:8280\n\n\nThen go to BC, create some content and go to Gradual Export. Close to the Download button you will see an \"Open\" button. Click on it and a new tab/window will open runtime with the import:", "createdAt": "2020-09-05T00:08:09Z", "url": "https://github.com/kiegroup/appformer/pull/1042", "merged": true, "mergeCommit": {"oid": "07684c8322ef0645ab74353a07213602f5fdace7"}, "closed": true, "closedAt": "2020-10-09T16:07:05Z", "author": {"login": "jesuino"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdH3leagBqjM3NTY5MzU0NjM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdQ4dUiAFqTUwNTgwOTY4MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1d02f21ceddd6a50966fdb78fe57e64688ccc6be", "author": {"user": {"login": "jesuino", "name": "William Ant\u00f4nio Siqueira"}}, "url": "https://github.com/kiegroup/appformer/commit/1d02f21ceddd6a50966fdb78fe57e64688ccc6be", "committedDate": "2020-09-04T21:58:52Z", "message": "AF-2555: Link BC <-> DB"}, "afterCommit": {"oid": "c4fa88b96e174deed2d5315d1e83f9a905fb13c6", "author": {"user": {"login": "jesuino", "name": "William Ant\u00f4nio Siqueira"}}, "url": "https://github.com/kiegroup/appformer/commit/c4fa88b96e174deed2d5315d1e83f9a905fb13c6", "committedDate": "2020-09-11T16:00:00Z", "message": "AF-2555: Link BC <-> DB"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c4fa88b96e174deed2d5315d1e83f9a905fb13c6", "author": {"user": {"login": "jesuino", "name": "William Ant\u00f4nio Siqueira"}}, "url": "https://github.com/kiegroup/appformer/commit/c4fa88b96e174deed2d5315d1e83f9a905fb13c6", "committedDate": "2020-09-11T16:00:00Z", "message": "AF-2555: Link BC <-> DB"}, "afterCommit": {"oid": "0a68def877f50447cfd93ef4856980a2d61b2602", "author": {"user": {"login": "jesuino", "name": "William Ant\u00f4nio Siqueira"}}, "url": "https://github.com/kiegroup/appformer/commit/0a68def877f50447cfd93ef4856980a2d61b2602", "committedDate": "2020-09-15T20:36:39Z", "message": "AF-2555: Link BC <-> DB"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0a68def877f50447cfd93ef4856980a2d61b2602", "author": {"user": {"login": "jesuino", "name": "William Ant\u00f4nio Siqueira"}}, "url": "https://github.com/kiegroup/appformer/commit/0a68def877f50447cfd93ef4856980a2d61b2602", "committedDate": "2020-09-15T20:36:39Z", "message": "AF-2555: Link BC <-> DB"}, "afterCommit": {"oid": "b3a33bc74a877013e0d9353d945faabb7522e803", "author": {"user": {"login": "jesuino", "name": "William Ant\u00f4nio Siqueira"}}, "url": "https://github.com/kiegroup/appformer/commit/b3a33bc74a877013e0d9353d945faabb7522e803", "committedDate": "2020-09-28T15:17:14Z", "message": "improvements"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk4ODIwNTcz", "url": "https://github.com/kiegroup/appformer/pull/1042#pullrequestreview-498820573", "createdAt": "2020-09-29T19:40:18Z", "commit": {"oid": "b3a33bc74a877013e0d9353d945faabb7522e803"}, "state": "COMMENTED", "comments": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQxOTo0MDoxOFrOHZ-Ycg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQyMDowNzoyMlrOHZ_QYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njk5ODUxNA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public ExportInfo(List<DataSetDef> datasetsDefinitions,\n          \n          \n            \n                                   List<String> pages,\n          \n          \n            \n                                   boolean externalServerAvailable) {\n          \n          \n            \n                public ExportInfo(List<DataSetDef> datasetsDefinitions,\n          \n          \n            \n                                  List<String> pages,\n          \n          \n            \n                                  boolean externalServerAvailable) {", "url": "https://github.com/kiegroup/appformer/pull/1042#discussion_r496998514", "createdAt": "2020-09-29T19:40:18Z", "author": {"login": "caponetto"}, "path": "dashbuilder/dashbuilder-shared/dashbuilder-services-api/src/main/java/org/dashbuilder/transfer/ExportInfo.java", "diffHunk": "@@ -20,17 +20,22 @@\n \n import org.dashbuilder.dataset.def.DataSetDef;\n \n-public class DataTransferAssets {\n+public class ExportInfo {\n+\n+    private boolean externalServerAvailable;\n \n     private List<DataSetDef> datasetsDefinitions;\n \n     private List<String> pages;\n \n-    public DataTransferAssets() {}\n+    public ExportInfo() {}\n \n-    public DataTransferAssets(List<DataSetDef> datasetsDefinitions, List<String> pages) {\n+    public ExportInfo(List<DataSetDef> datasetsDefinitions,\n+                       List<String> pages,\n+                       boolean externalServerAvailable) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b3a33bc74a877013e0d9353d945faabb7522e803"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njk5OTEwNw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                \n          \n          \n            \n                public List<String> doImport() throws Exception;\n          \n          \n            \n            \n          \n          \n            \n                public List<String> doImport() throws Exception;", "url": "https://github.com/kiegroup/appformer/pull/1042#discussion_r496999107", "createdAt": "2020-09-29T19:41:27Z", "author": {"login": "caponetto"}, "path": "dashbuilder/dashbuilder-shared/dashbuilder-services-api/src/main/java/org/dashbuilder/transfer/DataTransferServices.java", "diffHunk": "@@ -27,12 +27,16 @@\n     public static final String EXPORT_FILE_NAME = \"export.zip\";\n     public static final String IMPORT_FILE_NAME = \"import.zip\";\n     public static final String COMPONENTS_EXPORT_PATH = \"dashbuilder/components/\";\n-\n+    \n+    public static final String EXPORT_LOCATION_PROP = \"dashbuilder.import.base.dir\";\n+    public static final String DB_STANDALONE_LOCATION_PROP = \"dashbuilder.runtime.location\";\n \n     public String doExport(DataTransferExportModel exportsModel) throws java.io.IOException;\n-\n+    \n     public List<String> doImport() throws Exception;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b3a33bc74a877013e0d9353d945faabb7522e803"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzAwMDY3Ng==", "bodyText": "Nice!", "url": "https://github.com/kiegroup/appformer/pull/1042#discussion_r497000676", "createdAt": "2020-09-29T19:44:32Z", "author": {"login": "caponetto"}, "path": "dashbuilder/dashbuilder-runtime/src/main/java/org/dashbuilder/backend/RuntimeOptions.java", "diffHunk": "@@ -75,28 +75,32 @@\n      * If true components will be partitioned by the Runtime Model ID.\n      */\n     private static final String COMPONENT_PARTITION_PROP = \"dashbuilder.components.partition\";\n+    \n+    /**\n+     * Boolean property that allows Runtime to check model last update in FS to update its content.\n+     */\n+    private static final String MODEL_UPDATE_PROP = \"dashbuilder.model.update\";\n \n     private boolean multipleImport;\n     private boolean datasetPartition;\n     private boolean componentPartition;\n     private boolean allowExternal;\n+    private boolean modelUpdate;\n     private String importFileLocation;\n     private String importsBaseDir;\n     private int uploadSize;\n \n     @PostConstruct\n     public void init() {\n-        String multipleImportStr = System.getProperty(DASHBUILDER_RUNTIME_MULTIPLE_IMPORT_PROP, Boolean.FALSE.toString());\n-        String allowExternalStr = System.getProperty(ALLOW_EXTERNAL_FILE_REGISTER_PROP, Boolean.FALSE.toString());\n-        String datasetPartitionStr = System.getProperty(DATASET_PARTITION_PROP, Boolean.TRUE.toString());\n-        String componentPartitionStr = System.getProperty(COMPONENT_PARTITION_PROP, Boolean.TRUE.toString());\n \n         importFileLocation = System.getProperty(IMPORT_FILE_LOCATION_PROP);\n         importsBaseDir = System.getProperty(IMPORTS_BASE_DIR_PROP, DEFAULT_MODEL_DIR);\n-        multipleImport = Boolean.parseBoolean(multipleImportStr);\n-        allowExternal = Boolean.parseBoolean(allowExternalStr);\n-        datasetPartition = Boolean.parseBoolean(datasetPartitionStr);\n-        componentPartition = Boolean.parseBoolean(componentPartitionStr);\n+        \n+        multipleImport = booleanProp(DASHBUILDER_RUNTIME_MULTIPLE_IMPORT_PROP, Boolean.FALSE);\n+        allowExternal = booleanProp(ALLOW_EXTERNAL_FILE_REGISTER_PROP, Boolean.FALSE);\n+        datasetPartition = booleanProp(DATASET_PARTITION_PROP, Boolean.TRUE);\n+        componentPartition = booleanProp(COMPONENT_PARTITION_PROP, Boolean.TRUE);\n+        modelUpdate = booleanProp(MODEL_UPDATE_PROP, Boolean.TRUE);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b3a33bc74a877013e0d9353d945faabb7522e803"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzAwMzczNg==", "bodyText": "My only concern here is that Open could be misinterpreted in the wizard screen.\nSince it is right beside the Download button, I wouldn't expect that it'd open DB.\nMaybe we could add some informative text and then the Open button, wdyt?", "url": "https://github.com/kiegroup/appformer/pull/1042#discussion_r497003736", "createdAt": "2020-09-29T19:50:05Z", "author": {"login": "caponetto"}, "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/resources/org/dashbuilder/client/cms/resources/i18n/ContentManagerConstants.properties", "diffHunk": "@@ -70,6 +70,7 @@ datasetLabel=dataset\n pagesLabel=pages\n datasetsLabel=datasets\n ExportSummaryWizardPageView.download=Download\n+ExportSummaryWizardPageView.open=Open", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b3a33bc74a877013e0d9353d945faabb7522e803"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzAwNTY4MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    boolean connectedToDashbuilder = isExternalServerConfigured();\n          \n          \n            \n                    return new ExportInfo(datasetsDefs, pages, connectedToDashbuilder);\n          \n          \n            \n                    return new ExportInfo(datasetsDefs, pages, isExternalServerConfigured());", "url": "https://github.com/kiegroup/appformer/pull/1042#discussion_r497005680", "createdAt": "2020-09-29T19:53:50Z", "author": {"login": "caponetto"}, "path": "dashbuilder/dashbuilder-backend/dashbuilder-services/src/main/java/org/dashbuilder/transfer/DataTransferServicesImpl.java", "diffHunk": "@@ -242,7 +253,35 @@ public DataTransferAssets assetsToExport() {\n                                                                                .map(this::parseDataSetDefinition)\n                                                                                .filter(DataSetDef::isPublic)\n                                                                                .collect(Collectors.toList());\n-        return new DataTransferAssets(datasetsDefs, pages);\n+        boolean connectedToDashbuilder = isExternalServerConfigured();\n+        return new ExportInfo(datasetsDefs, pages, connectedToDashbuilder);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b3a33bc74a877013e0d9353d945faabb7522e803"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzAwOTIzNw==", "bodyText": "Consider moving these 2 lines into the if block below.\nYou don't need them if options.isComponentPartition() == false.", "url": "https://github.com/kiegroup/appformer/pull/1042#discussion_r497009237", "createdAt": "2020-09-29T20:00:30Z", "author": {"login": "caponetto"}, "path": "dashbuilder/dashbuilder-runtime/src/main/java/org/dashbuilder/backend/ExternalComponentsContentListener.java", "diffHunk": "@@ -0,0 +1,53 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.dashbuilder.backend;\n+\n+import java.io.File;\n+import java.nio.file.Paths;\n+\n+import javax.enterprise.context.ApplicationScoped;\n+import javax.enterprise.event.Observes;\n+import javax.inject.Inject;\n+\n+import org.apache.commons.io.FileUtils;\n+import org.dashbuilder.external.service.ExternalComponentLoader;\n+import org.dashbuilder.shared.event.RemovedRuntimeModelEvent;\n+\n+/**\n+ * When a runtime model is removed then we should remove components content as well.\n+ *\n+ */\n+@ApplicationScoped\n+public class ExternalComponentsContentListener {\n+\n+    @Inject\n+    ExternalComponentLoader loader;\n+\n+    @Inject\n+    RuntimeOptions options;\n+\n+    public void onRuntimeModelRemoved(@Observes RemovedRuntimeModelEvent event) {\n+        String externalComponentsDir = loader.getExternalComponentsDir();\n+        String runtimeModelId = event.getRuntimeModelId();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b3a33bc74a877013e0d9353d945faabb7522e803"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzAxMDI1NA==", "bodyText": "Can we assume that runtimeModelComponentsFile, externalComponentsDir and runtimeModelId will always be != null?", "url": "https://github.com/kiegroup/appformer/pull/1042#discussion_r497010254", "createdAt": "2020-09-29T20:02:20Z", "author": {"login": "caponetto"}, "path": "dashbuilder/dashbuilder-runtime/src/main/java/org/dashbuilder/backend/ExternalComponentsContentListener.java", "diffHunk": "@@ -0,0 +1,53 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.dashbuilder.backend;\n+\n+import java.io.File;\n+import java.nio.file.Paths;\n+\n+import javax.enterprise.context.ApplicationScoped;\n+import javax.enterprise.event.Observes;\n+import javax.inject.Inject;\n+\n+import org.apache.commons.io.FileUtils;\n+import org.dashbuilder.external.service.ExternalComponentLoader;\n+import org.dashbuilder.shared.event.RemovedRuntimeModelEvent;\n+\n+/**\n+ * When a runtime model is removed then we should remove components content as well.\n+ *\n+ */\n+@ApplicationScoped\n+public class ExternalComponentsContentListener {\n+\n+    @Inject\n+    ExternalComponentLoader loader;\n+\n+    @Inject\n+    RuntimeOptions options;\n+\n+    public void onRuntimeModelRemoved(@Observes RemovedRuntimeModelEvent event) {\n+        String externalComponentsDir = loader.getExternalComponentsDir();\n+        String runtimeModelId = event.getRuntimeModelId();\n+        if (options.isComponentPartition()) {\n+            File runtimeModelComponentsFile = Paths.get(externalComponentsDir, runtimeModelId).toFile();\n+            FileUtils.deleteQuietly(runtimeModelComponentsFile);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b3a33bc74a877013e0d9353d945faabb7522e803"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzAxMTM2MQ==", "bodyText": "You don't need this line, right?", "url": "https://github.com/kiegroup/appformer/pull/1042#discussion_r497011361", "createdAt": "2020-09-29T20:04:31Z", "author": {"login": "caponetto"}, "path": "dashbuilder/dashbuilder-runtime/src/main/java/org/dashbuilder/backend/remote/services/RuntimeModelServiceImpl.java", "diffHunk": "@@ -98,4 +102,30 @@ public RuntimeServiceResponse info(String runtimeModelId) {\n         return Optional.empty();\n     }\n \n+    private Optional<RuntimeModel> loadLatestModel(String id, RuntimeModel runtimeModel) {\n+        Optional<String> modelPath = runtimeOptions.modelPath(id);\n+        if (runtimeOptions.isModelUpdate() && modelPath.isPresent()) {\n+            String modelFilePath = modelPath.get();\n+            if (lastModified(modelFilePath) > runtimeModel.getLastModified()) {\n+                logger.info(\"Replacing model {}\", id);\n+                registry.remove(id);\n+                return registry.registerFile(modelFilePath);\n+            }\n+        }\n+        return Optional.of(runtimeModel);\n+    }\n+\n+    private long lastModified(String modelFilePath) {\n+        try {\n+            System.currentTimeMillis();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b3a33bc74a877013e0d9353d945faabb7522e803"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzAxMjgzMw==", "bodyText": "Suggested change", "url": "https://github.com/kiegroup/appformer/pull/1042#discussion_r497012833", "createdAt": "2020-09-29T20:07:22Z", "author": {"login": "caponetto"}, "path": "dashbuilder/dashbuilder-backend/dashbuilder-services/src/main/java/org/dashbuilder/transfer/DataTransferServicesImpl.java", "diffHunk": "@@ -84,9 +86,12 @@\n     private NavTreeStorage navTreeStorage;\n     private byte[] buffer = new byte[1024];\n     private ExternalComponentLoader externalComponentLoader;\n+    \n+    private String dashbuilderLocation;\n+    private String exportDir;\n \n     public DataTransferServicesImpl() {}\n-\n+    ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b3a33bc74a877013e0d9353d945faabb7522e803"}, "originalPosition": 25}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b3a33bc74a877013e0d9353d945faabb7522e803", "author": {"user": {"login": "jesuino", "name": "William Ant\u00f4nio Siqueira"}}, "url": "https://github.com/kiegroup/appformer/commit/b3a33bc74a877013e0d9353d945faabb7522e803", "committedDate": "2020-09-28T15:17:14Z", "message": "improvements"}, "afterCommit": {"oid": "7e5a7a04ce77cb456f5557d79a370190f4dc4abc", "author": {"user": {"login": "jesuino", "name": "William Ant\u00f4nio Siqueira"}}, "url": "https://github.com/kiegroup/appformer/commit/7e5a7a04ce77cb456f5557d79a370190f4dc4abc", "committedDate": "2020-09-29T21:27:14Z", "message": "Improvements"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk5Mjk3NzE2", "url": "https://github.com/kiegroup/appformer/pull/1042#pullrequestreview-499297716", "createdAt": "2020-09-30T10:36:49Z", "commit": {"oid": "7e5a7a04ce77cb456f5557d79a370190f4dc4abc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzMDk5Mzc4", "url": "https://github.com/kiegroup/appformer/pull/1042#pullrequestreview-503099378", "createdAt": "2020-10-06T15:35:52Z", "commit": {"oid": "7e5a7a04ce77cb456f5557d79a370190f4dc4abc"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxNTozNTo1MlrOHdN13A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxNTo0MTozMFrOHdOJFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDM5NzUzMg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    ExportInfo assets = new ExportInfo(Collections.singletonList(def1), Collections.emptyList(), false);\n          \n          \n            \n                    ExportInfo exportInfo = new ExportInfo(Collections.singletonList(def1), Collections.emptyList(), false);", "url": "https://github.com/kiegroup/appformer/pull/1042#discussion_r500397532", "createdAt": "2020-10-06T15:35:52Z", "author": {"login": "barboras7"}, "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/test/java/org/dashbuilder/client/cms/screen/transfer/export/wizard/ExportSummaryWizardPageTest.java", "diffHunk": "@@ -52,9 +52,9 @@ public void testRemapMissingDependencies() {\n         HashMap<String, List<String>> validation = new HashMap<>();\n         validation.put(PAGE, Collections.singletonList(UUID));\n \n-        DataTransferAssets assets = new DataTransferAssets(Collections.singletonList(def1), Collections.emptyList());\n+        ExportInfo assets = new ExportInfo(Collections.singletonList(def1), Collections.emptyList(), false);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7e5a7a04ce77cb456f5557d79a370190f4dc4abc"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDM5ODIwMA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    ExportInfo assetsToExport = dataTransferServices.exportInfo();\n          \n          \n            \n                    ExportInfo exportInfo = dataTransferServices.exportInfo();", "url": "https://github.com/kiegroup/appformer/pull/1042#discussion_r500398200", "createdAt": "2020-10-06T15:36:38Z", "author": {"login": "barboras7"}, "path": "dashbuilder/dashbuilder-backend/dashbuilder-services/src/test/java/org/dashbuilder/transfer/DataTransferServicesTest.java", "diffHunk": "@@ -559,7 +559,7 @@ public void testAssetsToImport() throws Exception {\n         createFile(perspectivesFS, PAGE, \"\");\n         createFile(perspectivesFS, PAGE_PLUGIN, \"\");\n \n-        DataTransferAssets assetsToExport = dataTransferServices.assetsToExport();\n+        ExportInfo assetsToExport = dataTransferServices.exportInfo();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7e5a7a04ce77cb456f5557d79a370190f4dc4abc"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDQwMjQ1Mg==", "bodyText": "Is it safe to define the property like this? The dashbuilder.import.base.dir is defined also in another place for dashbuilder runtime and it might happen that the property will change only in one of the places and they will not be the same (although the intention is to have the same String for the two properties)", "url": "https://github.com/kiegroup/appformer/pull/1042#discussion_r500402452", "createdAt": "2020-10-06T15:41:30Z", "author": {"login": "barboras7"}, "path": "dashbuilder/dashbuilder-shared/dashbuilder-services-api/src/main/java/org/dashbuilder/transfer/DataTransferServices.java", "diffHunk": "@@ -27,12 +27,16 @@\n     public static final String EXPORT_FILE_NAME = \"export.zip\";\n     public static final String IMPORT_FILE_NAME = \"import.zip\";\n     public static final String COMPONENTS_EXPORT_PATH = \"dashbuilder/components/\";\n-\n+    \n+    public static final String EXPORT_LOCATION_PROP = \"dashbuilder.import.base.dir\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7e5a7a04ce77cb456f5557d79a370190f4dc4abc"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f9362f07d8244aec4ce5c47f6d7f9b3817e6f27", "author": {"user": {"login": "jesuino", "name": "William Ant\u00f4nio Siqueira"}}, "url": "https://github.com/kiegroup/appformer/commit/7f9362f07d8244aec4ce5c47f6d7f9b3817e6f27", "committedDate": "2020-10-07T16:19:09Z", "message": "AF-2555: Link BC <-> DB"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bf9e08040ba3dd01820ee8ceb6cc17c97b07bdca", "author": {"user": {"login": "jesuino", "name": "William Ant\u00f4nio Siqueira"}}, "url": "https://github.com/kiegroup/appformer/commit/bf9e08040ba3dd01820ee8ceb6cc17c97b07bdca", "committedDate": "2020-10-07T16:19:09Z", "message": "improvements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "17a1ca82b809a288bf72e57f61dd3b8dfdc2d51f", "author": {"user": {"login": "jesuino", "name": "William Ant\u00f4nio Siqueira"}}, "url": "https://github.com/kiegroup/appformer/commit/17a1ca82b809a288bf72e57f61dd3b8dfdc2d51f", "committedDate": "2020-10-07T16:19:10Z", "message": "Improvements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7c756726a2d2795ce999c5043fd973b60979ea67", "author": {"user": {"login": "jesuino", "name": "William Ant\u00f4nio Siqueira"}}, "url": "https://github.com/kiegroup/appformer/commit/7c756726a2d2795ce999c5043fd973b60979ea67", "committedDate": "2020-10-07T16:19:10Z", "message": "Sharing model and improvements"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7e5a7a04ce77cb456f5557d79a370190f4dc4abc", "author": {"user": {"login": "jesuino", "name": "William Ant\u00f4nio Siqueira"}}, "url": "https://github.com/kiegroup/appformer/commit/7e5a7a04ce77cb456f5557d79a370190f4dc4abc", "committedDate": "2020-09-29T21:27:14Z", "message": "Improvements"}, "afterCommit": {"oid": "7c756726a2d2795ce999c5043fd973b60979ea67", "author": {"user": {"login": "jesuino", "name": "William Ant\u00f4nio Siqueira"}}, "url": "https://github.com/kiegroup/appformer/commit/7c756726a2d2795ce999c5043fd973b60979ea67", "committedDate": "2020-10-07T16:19:10Z", "message": "Sharing model and improvements"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1MTU2MTkx", "url": "https://github.com/kiegroup/appformer/pull/1042#pullrequestreview-505156191", "createdAt": "2020-10-08T20:51:12Z", "commit": {"oid": "7c756726a2d2795ce999c5043fd973b60979ea67"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1ODA5Njgw", "url": "https://github.com/kiegroup/appformer/pull/1042#pullrequestreview-505809680", "createdAt": "2020-10-09T16:06:44Z", "commit": {"oid": "7c756726a2d2795ce999c5043fd973b60979ea67"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1973, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}