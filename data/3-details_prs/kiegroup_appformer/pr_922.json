{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg5MzU2MDgx", "number": 922, "title": "KOGITO-766: Kogito Keyboard Shortcuts API", "bodyText": "On this PR:\n\nExposed new Keyboard Shortcuts API through JsInterop.\n\nRelated PRs:\nkiegroup/lienzo-core#102\nkiegroup/lienzo-tests#84\n#922\nkiegroup/kie-wb-common#3221\nkiegroup/kogito-tooling#86", "createdAt": "2020-03-16T16:30:06Z", "url": "https://github.com/kiegroup/appformer/pull/922", "merged": true, "mergeCommit": {"oid": "cb81b7541721dcf836f9e534c7ed4a8dee0de345"}, "closed": true, "closedAt": "2020-05-28T18:09:29Z", "author": {"login": "tiagobento"}, "timelineItems": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcOSbIigBqjMxMzQ0NzIwODg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABclaUf0AH2gAyMzg5MzU2MDgxOjAzOWZjMGMwNDZkOTFmNGZhNWI3MzllODc1YTFhZDY5OTIwZjA0YjM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c33fbf67fefaa7e44de869405336224f5a190134", "author": {"user": {"login": "tiagobento", "name": "Tiago Bento"}}, "url": "https://github.com/kiegroup/appformer/commit/c33fbf67fefaa7e44de869405336224f5a190134", "committedDate": "2020-03-06T04:51:08Z", "message": "JsInterop layer working"}, "afterCommit": {"oid": "e6626903a6531ef66e8a8abea6b92ef96c952db9", "author": {"user": {"login": "tiagobento", "name": "Tiago Bento"}}, "url": "https://github.com/kiegroup/appformer/commit/e6626903a6531ef66e8a8abea6b92ef96c952db9", "committedDate": "2020-03-16T18:28:32Z", "message": "Removing changes done by mistake"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "82188b636163d0f22c34aa7edf52c10505d9b22e", "author": {"user": {"login": "tiagobento", "name": "Tiago Bento"}}, "url": "https://github.com/kiegroup/appformer/commit/82188b636163d0f22c34aa7edf52c10505d9b22e", "committedDate": "2020-03-23T17:33:09Z", "message": "Create 1st version of JSInterop layer"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "726e817d9590d2092adea21f83ad315faa044178", "author": {"user": {"login": "tiagobento", "name": "Tiago Bento"}}, "url": "https://github.com/kiegroup/appformer/commit/726e817d9590d2092adea21f83ad315faa044178", "committedDate": "2020-03-23T17:33:09Z", "message": "Fix import"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9aa9901948cd4a4473a8ea707d39281db850b283", "author": {"user": {"login": "tiagobento", "name": "Tiago Bento"}}, "url": "https://github.com/kiegroup/appformer/commit/9aa9901948cd4a4473a8ea707d39281db850b283", "committedDate": "2020-03-23T17:33:09Z", "message": "Expose new context variable"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f6fd363fb7911c95f994a5ef040e2aa458564d6", "author": {"user": {"login": "tiagobento", "name": "Tiago Bento"}}, "url": "https://github.com/kiegroup/appformer/commit/9f6fd363fb7911c95f994a5ef040e2aa458564d6", "committedDate": "2020-03-23T17:33:09Z", "message": "JsInterop layer working"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f678c5d8225f244c1551e02d38cfdcd8ddf975fd", "author": {"user": {"login": "tiagobento", "name": "Tiago Bento"}}, "url": "https://github.com/kiegroup/appformer/commit/f678c5d8225f244c1551e02d38cfdcd8ddf975fd", "committedDate": "2020-03-23T17:33:09Z", "message": "Removing changes done by mistake"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e6626903a6531ef66e8a8abea6b92ef96c952db9", "author": {"user": {"login": "tiagobento", "name": "Tiago Bento"}}, "url": "https://github.com/kiegroup/appformer/commit/e6626903a6531ef66e8a8abea6b92ef96c952db9", "committedDate": "2020-03-16T18:28:32Z", "message": "Removing changes done by mistake"}, "afterCommit": {"oid": "f678c5d8225f244c1551e02d38cfdcd8ddf975fd", "author": {"user": {"login": "tiagobento", "name": "Tiago Bento"}}, "url": "https://github.com/kiegroup/appformer/commit/f678c5d8225f244c1551e02d38cfdcd8ddf975fd", "committedDate": "2020-03-23T17:33:09Z", "message": "Removing changes done by mistake"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "189fa119414f143a6444dd71cc5377ae92160b0d", "author": {"user": {"login": "tiagobento", "name": "Tiago Bento"}}, "url": "https://github.com/kiegroup/appformer/commit/189fa119414f143a6444dd71cc5377ae92160b0d", "committedDate": "2020-03-24T00:48:07Z", "message": "Removing Kogito hard dependency on non-Kogito modules"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "73030ee2cd742e6fd7322d5550375e6a28656482", "author": {"user": {"login": "tiagobento", "name": "Tiago Bento"}}, "url": "https://github.com/kiegroup/appformer/commit/73030ee2cd742e6fd7322d5550375e6a28656482", "committedDate": "2020-03-31T12:51:56Z", "message": "Merge remote-tracking branch 'origin/master' into keyboard-shortcuts-api"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "76906f148dcf14aa720fcbc3536e183f73158f61", "author": {"user": {"login": "tiagobento", "name": "Tiago Bento"}}, "url": "https://github.com/kiegroup/appformer/commit/76906f148dcf14aa720fcbc3536e183f73158f61", "committedDate": "2020-04-29T18:12:32Z", "message": "Merge remote-tracking branch 'origin/master' into keyboard-shortcuts-api"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6fc3aa50a6a363febd01ee5138c51bcd108bb2b8", "author": {"user": {"login": "tiagobento", "name": "Tiago Bento"}}, "url": "https://github.com/kiegroup/appformer/commit/6fc3aa50a6a363febd01ee5138c51bcd108bb2b8", "committedDate": "2020-05-05T17:07:07Z", "message": "Merge remote-tracking branch 'origin/master' into keyboard-shortcuts-api"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0128c92a3f638e7ceddff02a340511edc6b2823b", "author": {"user": {"login": "tiagobento", "name": "Tiago Bento"}}, "url": "https://github.com/kiegroup/appformer/commit/0128c92a3f638e7ceddff02a340511edc6b2823b", "committedDate": "2020-05-05T20:57:30Z", "message": "Expose Event target"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5830d2f89947f685c07575d7fbe97f94c7d96e1e", "author": {"user": {"login": "tiagobento", "name": "Tiago Bento"}}, "url": "https://github.com/kiegroup/appformer/commit/5830d2f89947f685c07575d7fbe97f94c7d96e1e", "committedDate": "2020-05-12T17:02:51Z", "message": "Merge branch 'master' of github.com:kiegroup/appformer into keyboard-shortcuts-api"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEyNzE2Mjk0", "url": "https://github.com/kiegroup/appformer/pull/922#pullrequestreview-412716294", "createdAt": "2020-05-15T14:49:02Z", "commit": {"oid": "5830d2f89947f685c07575d7fbe97f94c7d96e1e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1OTA4Nzc0", "url": "https://github.com/kiegroup/appformer/pull/922#pullrequestreview-415908774", "createdAt": "2020-05-21T06:29:15Z", "commit": {"oid": "5830d2f89947f685c07575d7fbe97f94c7d96e1e"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQwNjoyOToxNlrOGYnuCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQwNjo1Nzo0NlrOGYoUZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODQ2OTc3MA==", "bodyText": "This import is not used what is suspicious as it seems as we add implementation of interface that we will have more alternatives.\n\nMaybe when will read rest of PR will find out I am wrong.", "url": "https://github.com/kiegroup/appformer/pull/922#discussion_r428469770", "createdAt": "2020-05-21T06:29:16Z", "author": {"login": "jomarko"}, "path": "appformer-client-api/src/main/java/org/appformer/client/context/DefaultEditorContextProviderImpl.java", "diffHunk": "@@ -0,0 +1,34 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.appformer.client.context;\n+\n+import javax.enterprise.context.ApplicationScoped;\n+import javax.enterprise.inject.Alternative;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5830d2f89947f685c07575d7fbe97f94c7d96e1e"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODQ3MjM5Mw==", "bodyText": "Could we please add javadoc to KeyboardShortcutsApiOpts. To me as newcomer is not clear what Opts stands for and what is the difference between REPEAT and NO_REPEAT constants. Thank you.", "url": "https://github.com/kiegroup/appformer/pull/922#discussion_r428472393", "createdAt": "2020-05-21T06:37:05Z", "author": {"login": "jomarko"}, "path": "appformer-client-api/src/main/java/org/appformer/client/keyboardShortcuts/KeyboardShortcutsApiOpts.java", "diffHunk": "@@ -0,0 +1,42 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.appformer.client.keyboardShortcuts;\n+\n+import jsinterop.annotations.JsProperty;\n+import jsinterop.annotations.JsType;\n+\n+@JsType\n+public class KeyboardShortcutsApiOpts {\n+\n+    public static final KeyboardShortcutsApiOpts DEFAULT = new KeyboardShortcutsApiOpts(Repeat.NO_REPEAT);\n+\n+    private final Repeat repeat;\n+\n+    public KeyboardShortcutsApiOpts(final Repeat repeat) {\n+        this.repeat = repeat;\n+    }\n+\n+    @JsProperty\n+    public boolean getRepeat() {\n+        return Repeat.REPEAT.equals(repeat);\n+    }\n+\n+    public enum Repeat {\n+        REPEAT,\n+        NO_REPEAT\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5830d2f89947f685c07575d7fbe97f94c7d96e1e"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODQ3NDg3Mw==", "bodyText": "Please add a jvadoc, without the video you provided in PR description it is hard to realize 'combination' and 'label' are shown in to panel with complete list of shortcuts.\n\nOr even different purpose?", "url": "https://github.com/kiegroup/appformer/pull/922#discussion_r428474873", "createdAt": "2020-05-21T06:44:21Z", "author": {"login": "jomarko"}, "path": "appformer-kogito-bridge/src/main/java/org/appformer/kogito/bridge/client/keyboardshortcuts/KeyboardShortcutsApi.java", "diffHunk": "@@ -0,0 +1,37 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.appformer.kogito.bridge.client.keyboardshortcuts;\n+\n+import elemental2.dom.EventTarget;\n+import jsinterop.annotations.JsFunction;\n+import org.appformer.client.keyboardShortcuts.KeyboardShortcutsApiOpts;\n+\n+public interface KeyboardShortcutsApi {\n+\n+    int registerKeyPress(String combination, String label, KeyboardShortcutsApi.Action onKeyDown, KeyboardShortcutsApiOpts opts);\n+\n+    int registerKeyDownThenUp(String combination, String label, KeyboardShortcutsApi.Action onKeyDown, KeyboardShortcutsApi.Action onKeyUp, KeyboardShortcutsApiOpts opts);\n+\n+    void deregister(int id);\n+\n+    @JsFunction\n+    @FunctionalInterface\n+    interface Action {\n+\n+        void execute(final EventTarget target);\n+    }\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5830d2f89947f685c07575d7fbe97f94c7d96e1e"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODQ3NzkzMg==", "bodyText": "Isn't this rather warning/error than info? My thoughts were all channels in kogito should have an envelope. Have just some of them the envelope?\nOr is it that small subparts/panels/components of editor can have registered different shortcuts so it will be quite common that no envelope is present?", "url": "https://github.com/kiegroup/appformer/pull/922#discussion_r428477932", "createdAt": "2020-05-21T06:53:23Z", "author": {"login": "jomarko"}, "path": "appformer-kogito-bridge/src/main/java/org/appformer/kogito/bridge/client/keyboardshortcuts/KeyboardShortcutsServiceProducer.java", "diffHunk": "@@ -0,0 +1,41 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.appformer.kogito.bridge.client.keyboardshortcuts;\n+\n+import javax.enterprise.context.ApplicationScoped;\n+import javax.enterprise.inject.Produces;\n+\n+import elemental2.dom.DomGlobal;\n+import org.appformer.kogito.bridge.client.interop.WindowRef;\n+\n+/**\n+ * Produces {@link KeyboardShortcutsService} beans according to whether the envelope API is available or not\n+ */\n+public class KeyboardShortcutsServiceProducer {\n+\n+    @Produces\n+    @ApplicationScoped\n+    public KeyboardShortcutsApi produce() {\n+\n+        if (WindowRef.isEnvelopeAvailable()) {\n+            return new KeyboardShortcutsService();\n+        }\n+\n+        DomGlobal.console.info(\"[KeyboardShortcutsServiceProducer] Envelope API is not available. Producing NoOpKeyboardShortcutsService\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5830d2f89947f685c07575d7fbe97f94c7d96e1e"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODQ3OTU5MA==", "bodyText": "I think we could remove gwt-user from appformer-kogito-bridge as that has dependency for appformer-client-api and mvn dependency:analyze reports gwt-user as unused in appformer-kogito-bridge. WDYT?", "url": "https://github.com/kiegroup/appformer/pull/922#discussion_r428479590", "createdAt": "2020-05-21T06:57:46Z", "author": {"login": "jomarko"}, "path": "appformer-client-api/pom.xml", "diffHunk": "@@ -35,6 +35,11 @@\n       <groupId>javax.enterprise</groupId>\n       <artifactId>cdi-api</artifactId>\n     </dependency>\n+\n+    <dependency>\n+      <groupId>com.google.gwt</groupId>\n+      <artifactId>gwt-user</artifactId>\n+    </dependency>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5830d2f89947f685c07575d7fbe97f94c7d96e1e"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "489cfdfa480861fa8ea2499dfe03ad75011f9230", "author": {"user": {"login": "tiagobento", "name": "Tiago Bento"}}, "url": "https://github.com/kiegroup/appformer/commit/489cfdfa480861fa8ea2499dfe03ad75011f9230", "committedDate": "2020-05-21T13:58:43Z", "message": "PR changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1dba2f27ab7f384308706d0785856fe35072794d", "author": {"user": {"login": "tiagobento", "name": "Tiago Bento"}}, "url": "https://github.com/kiegroup/appformer/commit/1dba2f27ab7f384308706d0785856fe35072794d", "committedDate": "2020-05-21T19:30:53Z", "message": "Merge remote-tracking branch 'origin/master' into keyboard-shortcuts-api"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "84d045c3b754892d8588b800c809dfb0deb4473a", "author": {"user": {"login": "tiagobento", "name": "Tiago Bento"}}, "url": "https://github.com/kiegroup/appformer/commit/84d045c3b754892d8588b800c809dfb0deb4473a", "committedDate": "2020-05-25T16:46:02Z", "message": "Updating Javadocs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MTE3MzA2", "url": "https://github.com/kiegroup/appformer/pull/922#pullrequestreview-418117306", "createdAt": "2020-05-26T09:18:24Z", "commit": {"oid": "84d045c3b754892d8588b800c809dfb0deb4473a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "541dd89d8df7b9c23b8c82fdd32ea91829038c83", "author": {"user": {"login": "tiagobento", "name": "Tiago Bento"}}, "url": "https://github.com/kiegroup/appformer/commit/541dd89d8df7b9c23b8c82fdd32ea91829038c83", "committedDate": "2020-05-26T17:33:20Z", "message": "Change EditorContextProvider to return an Optional operating system"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "039fc0c046d91f4fa5b739e875a1ad69920f04b3", "author": {"user": {"login": "tiagobento", "name": "Tiago Bento"}}, "url": "https://github.com/kiegroup/appformer/commit/039fc0c046d91f4fa5b739e875a1ad69920f04b3", "committedDate": "2020-05-27T14:41:12Z", "message": "Merge remote-tracking branch 'origin/master' into keyboard-shortcuts-api"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2065, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}