{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkwNTI1OTkz", "number": 926, "title": "RHPAM-2708 : RHPAM 7.x Business Central latency correlated with number of groups memberships", "bodyText": "fix the issue with caching of permissions for resources. Now, after using a resource (Screens, Spaces etc), the permissions corresponding to that resource will be cached and subsequent use will be faster.\nOptimized fetching of groups and roles permissions. Replaced HashSet based collection with HashMap to provide faster retrival of roles/group permissions.\nPlease note the initial home page load might still be little slower when we use elevated number of groups since it calculates and merges permissions of all the groups. however, subsequent page load should be faster since it fetches from the permission cache", "createdAt": "2020-03-18T16:03:30Z", "url": "https://github.com/kiegroup/appformer/pull/926", "merged": true, "mergeCommit": {"oid": "3136bc446233f1b8aab2df90ead2f3436da07b04"}, "closed": true, "closedAt": "2020-04-02T19:55:57Z", "author": {"login": "RishiRajAnand"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcO6RwxgFqTM3NzA1Njg5MA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcS8NApABqjMxODE1OTExMDU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3MDU2ODkw", "url": "https://github.com/kiegroup/appformer/pull/926#pullrequestreview-377056890", "createdAt": "2020-03-18T16:54:55Z", "commit": {"oid": "7352d00dbdd046fbadcd42f486b6c285f47a8c0d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3NzQ2NzY1", "url": "https://github.com/kiegroup/appformer/pull/926#pullrequestreview-377746765", "createdAt": "2020-03-19T14:01:10Z", "commit": {"oid": "7352d00dbdd046fbadcd42f486b6c285f47a8c0d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxNDowMToxMVrOF4vwPw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxNDowMToxMVrOF4vwPw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTA0Njk3NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                final Map<Group, DefaultAuthorizationEntry> groupEntryMap = new HashMap<>();\n          \n          \n            \n                final Map<Role, DefaultAuthorizationEntry> rolesEntryMap = new HashMap<>();\n          \n          \n            \n                private final Map<Group, DefaultAuthorizationEntry> groupEntryMap = new HashMap<>();\n          \n          \n            \n                private final Map<Role, DefaultAuthorizationEntry> rolesEntryMap = new HashMap<>();", "url": "https://github.com/kiegroup/appformer/pull/926#discussion_r395046975", "createdAt": "2020-03-19T14:01:11Z", "author": {"login": "caponetto"}, "path": "uberfire-security/uberfire-security-api/src/main/java/org/uberfire/security/impl/authz/DefaultAuthorizationPolicy.java", "diffHunk": "@@ -30,32 +31,34 @@\n public class DefaultAuthorizationPolicy implements AuthorizationPolicy {\n \n     DefaultAuthorizationEntry defaultEntry = new DefaultAuthorizationEntry();\n-    private Set<DefaultAuthorizationEntry> entrySet = new HashSet<>();\n+    final Map<Group, DefaultAuthorizationEntry> groupEntryMap = new HashMap<>();\n+    final Map<Role, DefaultAuthorizationEntry> rolesEntryMap = new HashMap<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7352d00dbdd046fbadcd42f486b6c285f47a8c0d"}, "originalPosition": 16}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7352d00dbdd046fbadcd42f486b6c285f47a8c0d", "author": {"user": null}, "url": "https://github.com/kiegroup/appformer/commit/7352d00dbdd046fbadcd42f486b6c285f47a8c0d", "committedDate": "2020-03-18T15:44:27Z", "message": "RHPAM-2708 : RHPAM 7.x Business Central latency correlated with number of groups memberships\n- fix the issue with caching of permissions for resources. Now, after using a resource (Screens, Spaces etc), the permissions corresponding to that resource will be cached and subsequent use will be faster.\n- Optimized fetching of groups and roles permissions. Replaced HashSet based collection with HashMap to provide faster retrival of roles/group permissions.\n- Please note the initial home page load might still be little slower when we use elevated number of groups since it calculates and merges permissions of all the groups. however, subsequent page load should be faster since it fetches from the permission cache"}, "afterCommit": {"oid": "851503d7944a69c6b6c09c37213e27cc06fc6fbc", "author": {"user": null}, "url": "https://github.com/kiegroup/appformer/commit/851503d7944a69c6b6c09c37213e27cc06fc6fbc", "committedDate": "2020-03-19T14:29:29Z", "message": "RHPAM-2708 : RHPAM 7.x Business Central latency correlated with number of groups memberships"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "851503d7944a69c6b6c09c37213e27cc06fc6fbc", "author": {"user": null}, "url": "https://github.com/kiegroup/appformer/commit/851503d7944a69c6b6c09c37213e27cc06fc6fbc", "committedDate": "2020-03-19T14:29:29Z", "message": "RHPAM-2708 : RHPAM 7.x Business Central latency correlated with number of groups memberships"}, "afterCommit": {"oid": "50ccb4b0b09339e14f0df0343aea04edb6ef0e0f", "author": {"user": null}, "url": "https://github.com/kiegroup/appformer/commit/50ccb4b0b09339e14f0df0343aea04edb6ef0e0f", "committedDate": "2020-03-20T06:30:13Z", "message": "RHPAM-2708 : RHPAM 7.x Business Central latency correlated with number of groups memberships"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgwMTkwMzY4", "url": "https://github.com/kiegroup/appformer/pull/926#pullrequestreview-380190368", "createdAt": "2020-03-24T10:46:09Z", "commit": {"oid": "50ccb4b0b09339e14f0df0343aea04edb6ef0e0f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgwMjgwODkx", "url": "https://github.com/kiegroup/appformer/pull/926#pullrequestreview-380280891", "createdAt": "2020-03-24T12:57:16Z", "commit": {"oid": "50ccb4b0b09339e14f0df0343aea04edb6ef0e0f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMjk3NDM0", "url": "https://github.com/kiegroup/appformer/pull/926#pullrequestreview-381297434", "createdAt": "2020-03-25T16:02:59Z", "commit": {"oid": "50ccb4b0b09339e14f0df0343aea04edb6ef0e0f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c733b503594b37543947c041932e5a444b2d15dc", "author": {"user": null}, "url": "https://github.com/kiegroup/appformer/commit/c733b503594b37543947c041932e5a444b2d15dc", "committedDate": "2020-03-31T05:24:13Z", "message": "RHPAM-2708 : RHPAM 7.x Business Central latency correlated with number of groups memberships"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "50ccb4b0b09339e14f0df0343aea04edb6ef0e0f", "author": {"user": null}, "url": "https://github.com/kiegroup/appformer/commit/50ccb4b0b09339e14f0df0343aea04edb6ef0e0f", "committedDate": "2020-03-20T06:30:13Z", "message": "RHPAM-2708 : RHPAM 7.x Business Central latency correlated with number of groups memberships"}, "afterCommit": {"oid": "c733b503594b37543947c041932e5a444b2d15dc", "author": {"user": null}, "url": "https://github.com/kiegroup/appformer/commit/c733b503594b37543947c041932e5a444b2d15dc", "committedDate": "2020-03-31T05:24:13Z", "message": "RHPAM-2708 : RHPAM 7.x Business Central latency correlated with number of groups memberships"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2069, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}