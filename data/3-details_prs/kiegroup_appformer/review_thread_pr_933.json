{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzNzA5MjM4", "number": 933, "reviewThreads": {"totalCount": 32, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxMDozMjoyOVrODuUhiw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxMDowOToxOFrOD5v_BQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5ODk3MzU1OnYy", "diffSide": "RIGHT", "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/java/org/dashbuilder/client/cms/screen/transfer/DataTransferExportPopUp.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxMDozMjoyOVrOGAP0xA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxMDozMjoyOVrOGAP0xA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjkxMjQ1Mg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change", "url": "https://github.com/kiegroup/appformer/pull/933#discussion_r402912452", "createdAt": "2020-04-03T10:32:29Z", "author": {"login": "caponetto"}, "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/java/org/dashbuilder/client/cms/screen/transfer/DataTransferExportPopUp.java", "diffHunk": "@@ -0,0 +1,81 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.dashbuilder.client.cms.screen.transfer;\n+\n+import javax.annotation.PostConstruct;\n+import javax.enterprise.context.ApplicationScoped;\n+import javax.inject.Inject;\n+\n+import org.dashbuilder.transfer.DataTransferAssets;\n+import org.dashbuilder.transfer.DataTransferExportModel;\n+import org.dashbuilder.transfer.DataTransferServices;\n+import org.jboss.errai.common.client.api.Caller;\n+import org.uberfire.client.mvp.UberElemental;\n+import org.uberfire.mvp.ParameterizedCommand;\n+\n+@ApplicationScoped\n+public class DataTransferExportPopUp {\n+\n+    private View view;\n+\n+    private Caller<DataTransferServices> dataTransferServices;\n+\n+    private ParameterizedCommand<DataTransferExportModel> dataTransferExportModelCallback;\n+\n+    public interface View extends UberElemental<DataTransferExportPopUp> {\n+\n+        void show();\n+\n+        void setAssetsToExport(DataTransferAssets assetsToExport);\n+\n+        void showError(Throwable error);\n+\n+    }\n+\n+    @Inject\n+    public DataTransferExportPopUp(View view,\n+                                   Caller<DataTransferServices> dataTransferServices) {\n+        this.view = view;\n+        this.dataTransferServices = dataTransferServices;\n+    }\n+\n+    @PostConstruct\n+    public void init() {\n+        view.init(this);\n+    }\n+\n+    public void setCallback(ParameterizedCommand<DataTransferExportModel> dataTransferExportModelCallback) {\n+        this.dataTransferExportModelCallback = dataTransferExportModelCallback;\n+\n+    }\n+\n+    public void load() {\n+        view.show();\n+        dataTransferServices.call((DataTransferAssets v) -> view.setAssetsToExport(v),\n+                                  (message, error) -> {\n+                                      view.showError(error);\n+                                      return false;\n+                                  })\n+                            .assetsToExport();\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a74b4a7f646b14ef763d402579c8e86d10cbb7a9"}, "originalPosition": 74}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5ODk3MzgyOnYy", "diffSide": "RIGHT", "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/java/org/dashbuilder/client/cms/screen/transfer/DataTransferExportPopUp.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxMDozMjozNlrOGAP0-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxMDozMjozNlrOGAP0-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjkxMjUwNg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change", "url": "https://github.com/kiegroup/appformer/pull/933#discussion_r402912506", "createdAt": "2020-04-03T10:32:36Z", "author": {"login": "caponetto"}, "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/java/org/dashbuilder/client/cms/screen/transfer/DataTransferExportPopUp.java", "diffHunk": "@@ -0,0 +1,81 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.dashbuilder.client.cms.screen.transfer;\n+\n+import javax.annotation.PostConstruct;\n+import javax.enterprise.context.ApplicationScoped;\n+import javax.inject.Inject;\n+\n+import org.dashbuilder.transfer.DataTransferAssets;\n+import org.dashbuilder.transfer.DataTransferExportModel;\n+import org.dashbuilder.transfer.DataTransferServices;\n+import org.jboss.errai.common.client.api.Caller;\n+import org.uberfire.client.mvp.UberElemental;\n+import org.uberfire.mvp.ParameterizedCommand;\n+\n+@ApplicationScoped\n+public class DataTransferExportPopUp {\n+\n+    private View view;\n+\n+    private Caller<DataTransferServices> dataTransferServices;\n+\n+    private ParameterizedCommand<DataTransferExportModel> dataTransferExportModelCallback;\n+\n+    public interface View extends UberElemental<DataTransferExportPopUp> {\n+\n+        void show();\n+\n+        void setAssetsToExport(DataTransferAssets assetsToExport);\n+\n+        void showError(Throwable error);\n+\n+    }\n+\n+    @Inject\n+    public DataTransferExportPopUp(View view,\n+                                   Caller<DataTransferServices> dataTransferServices) {\n+        this.view = view;\n+        this.dataTransferServices = dataTransferServices;\n+    }\n+\n+    @PostConstruct\n+    public void init() {\n+        view.init(this);\n+    }\n+\n+    public void setCallback(ParameterizedCommand<DataTransferExportModel> dataTransferExportModelCallback) {\n+        this.dataTransferExportModelCallback = dataTransferExportModelCallback;\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a74b4a7f646b14ef763d402579c8e86d10cbb7a9"}, "originalPosition": 63}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5ODk3NDIzOnYy", "diffSide": "RIGHT", "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/java/org/dashbuilder/client/cms/screen/transfer/DataTransferExportPopUp.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxMDozMjo0M1rOGAP1PA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxMDozMjo0M1rOGAP1PA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjkxMjU3Mg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change", "url": "https://github.com/kiegroup/appformer/pull/933#discussion_r402912572", "createdAt": "2020-04-03T10:32:43Z", "author": {"login": "caponetto"}, "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/java/org/dashbuilder/client/cms/screen/transfer/DataTransferExportPopUp.java", "diffHunk": "@@ -0,0 +1,81 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.dashbuilder.client.cms.screen.transfer;\n+\n+import javax.annotation.PostConstruct;\n+import javax.enterprise.context.ApplicationScoped;\n+import javax.inject.Inject;\n+\n+import org.dashbuilder.transfer.DataTransferAssets;\n+import org.dashbuilder.transfer.DataTransferExportModel;\n+import org.dashbuilder.transfer.DataTransferServices;\n+import org.jboss.errai.common.client.api.Caller;\n+import org.uberfire.client.mvp.UberElemental;\n+import org.uberfire.mvp.ParameterizedCommand;\n+\n+@ApplicationScoped\n+public class DataTransferExportPopUp {\n+\n+    private View view;\n+\n+    private Caller<DataTransferServices> dataTransferServices;\n+\n+    private ParameterizedCommand<DataTransferExportModel> dataTransferExportModelCallback;\n+\n+    public interface View extends UberElemental<DataTransferExportPopUp> {\n+\n+        void show();\n+\n+        void setAssetsToExport(DataTransferAssets assetsToExport);\n+\n+        void showError(Throwable error);\n+\n+    }\n+\n+    @Inject\n+    public DataTransferExportPopUp(View view,\n+                                   Caller<DataTransferServices> dataTransferServices) {\n+        this.view = view;\n+        this.dataTransferServices = dataTransferServices;\n+    }\n+\n+    @PostConstruct\n+    public void init() {\n+        view.init(this);\n+    }\n+\n+    public void setCallback(ParameterizedCommand<DataTransferExportModel> dataTransferExportModelCallback) {\n+        this.dataTransferExportModelCallback = dataTransferExportModelCallback;\n+\n+    }\n+\n+    public void load() {\n+        view.show();\n+        dataTransferServices.call((DataTransferAssets v) -> view.setAssetsToExport(v),\n+                                  (message, error) -> {\n+                                      view.showError(error);\n+                                      return false;\n+                                  })\n+                            .assetsToExport();\n+\n+    }\n+\n+    public void receiveSelectedAssets(DataTransferExportModel dataTransferExportModel) {\n+        dataTransferExportModelCallback.execute(dataTransferExportModel);\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a74b4a7f646b14ef763d402579c8e86d10cbb7a9"}, "originalPosition": 79}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5ODk4Nzc3OnYy", "diffSide": "RIGHT", "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/java/org/dashbuilder/client/cms/screen/transfer/DataTransferExportPopUpView.html", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxMDozNjo0OFrOGAP9QA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxMDozNjo0OFrOGAP9QA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjkxNDYyNA==", "bodyText": "Consider formatting this file with spaces instead of tabs.\nPlease add the copyright header to this file.", "url": "https://github.com/kiegroup/appformer/pull/933#discussion_r402914624", "createdAt": "2020-04-03T10:36:48Z", "author": {"login": "caponetto"}, "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/java/org/dashbuilder/client/cms/screen/transfer/DataTransferExportPopUpView.html", "diffHunk": "@@ -0,0 +1,101 @@\n+<div id=\"dataTransferExportModalBody\" class=\"container-fluid\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a74b4a7f646b14ef763d402579c8e86d10cbb7a9"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5ODk5MzY4OnYy", "diffSide": "RIGHT", "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/java/org/dashbuilder/client/cms/screen/transfer/DataTransferExportPopUpView.css", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxMDozODo0MFrOGAQA2A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxMDozODo0MFrOGAQA2A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjkxNTU0NA==", "bodyText": "Please add the copyright header to this file.", "url": "https://github.com/kiegroup/appformer/pull/933#discussion_r402915544", "createdAt": "2020-04-03T10:38:40Z", "author": {"login": "caponetto"}, "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/java/org/dashbuilder/client/cms/screen/transfer/DataTransferExportPopUpView.css", "diffHunk": "@@ -0,0 +1,4 @@\n+.assets-panel-body {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a74b4a7f646b14ef763d402579c8e86d10cbb7a9"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5OTA1MjUzOnYy", "diffSide": "RIGHT", "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/java/org/dashbuilder/client/cms/screen/transfer/DataTransferExportPopUpView.html", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxMDo1Njo0NlrOGAQkXA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQyMTozMjoxMFrOGG36tg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjkyNDYzNg==", "bodyText": "I see that this toggle is quite large compared with other places that we have this component.\nCan we make it smaller? Like the ones we have on Service Tasks Administration page, for example.", "url": "https://github.com/kiegroup/appformer/pull/933#discussion_r402924636", "createdAt": "2020-04-03T10:56:46Z", "author": {"login": "caponetto"}, "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/java/org/dashbuilder/client/cms/screen/transfer/DataTransferExportPopUpView.html", "diffHunk": "@@ -0,0 +1,101 @@\n+<div id=\"dataTransferExportModalBody\" class=\"container-fluid\">\n+\t<div class=\"row\">\n+\t\t<div class=\"col-md-12\">\n+\t\t\t<div id=\"progressIndicator\">\n+\t\t\t\t<p>\n+\t\t\t\t\t<span class=\"spinner spinner-lg spinner-inline\"></span> Loading\n+\t\t\t\t\tassets...\n+\t\t\t\t</p>\n+\t\t\t</div>\n+\t\t\t<div class=\"panel-group\" id=\"dataSelectionAccordion\">\n+\t\t\t\t<div class=\"panel panel-default\">\n+\t\t\t\t\t<div class=\"panel-heading\">\n+\t\t\t\t\t\t<h4 class=\"panel-title\">\n+\t\t\t\t\t\t\t<a data-toggle=\"collapse\" data-parent=\"#dataSelectionAccordion\"\n+\t\t\t\t\t\t\t\thref=\"#collapseOne\">DataSets</a>\n+\t\t\t\t\t\t</h4>\n+\t\t\t\t\t</div>\n+\t\t\t\t\t<div id=\"collapseOne\" class=\"panel-collapse collapse in\">\n+\t\t\t\t\t\t<div class=\"panel-body assets-panel-body\">\n+\t\t\t\t\t\t\t<form role=\"form\" class=\"search-pf has-button\">\n+\t\t\t\t\t\t\t\t<div class=\"form-group has-clear\">\n+\t\t\t\t\t\t\t\t\t<div class=\"search-pf-input-group\">\n+\t\t\t\t\t\t\t\t\t\t<label for=\"searchDatasets\" class=\"sr-only\">Filter</label> <input\n+\t\t\t\t\t\t\t\t\t\t\tid=\"searchDatasets\" type=\"search\" class=\"form-control\"\n+\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Filter\">\n+\n+\t\t\t\t\t\t\t\t\t</div>\n+\t\t\t\t\t\t\t\t</div>\n+\t\t\t\t\t\t\t</form>\n+\t\t\t\t\t\t\t<!-- DataSets Table -->\n+\t\t\t\t\t\t\t<table class=\"table table-striped table-bordered table-hover\"\n+\t\t\t\t\t\t\t\tid=\"datasetsTable\">\n+\t\t\t\t\t\t\t\t<thead>\n+\t\t\t\t\t\t\t\t\t<tr>\n+\t\t\t\t\t\t\t\t\t\t<th><input type=\"checkbox\" id=\"selectAllDatasets\" /></th>\n+\t\t\t\t\t\t\t\t\t\t<th>UUID</th>\n+\t\t\t\t\t\t\t\t\t\t<th>Name</th>\n+\t\t\t\t\t\t\t\t\t\t<th>Type</th>\n+\t\t\t\t\t\t\t\t\t</tr>\n+\t\t\t\t\t\t\t\t</thead>\n+\t\t\t\t\t\t\t\t<tbody id=\"\">\n+\t\t\t\t\t\t\t\t</tbody>\n+\t\t\t\t\t\t\t</table>\n+\t\t\t\t\t\t</div>\n+\t\t\t\t\t</div>\n+\t\t\t\t</div>\n+\t\t\t\t<div class=\"panel panel-default\">\n+\t\t\t\t\t<div class=\"panel-heading\">\n+\t\t\t\t\t\t<h4 class=\"panel-title\">\n+\t\t\t\t\t\t\t<a data-toggle=\"collapse\" data-parent=\"#dataSelectionAccordion\"\n+\t\t\t\t\t\t\t\thref=\"#collapseTwo\" class=\"collapsed\">Pages</a>\n+\t\t\t\t\t\t</h4>\n+\t\t\t\t\t</div>\n+\t\t\t\t\t<div id=\"collapseTwo\" class=\"panel-collapse collapse\">\n+\t\t\t\t\t\t<div class=\"panel-body assets-panel-body\">\n+\t\t\t\t\t\t\t<form role=\"form\" class=\"search-pf has-button\">\n+\t\t\t\t\t\t\t\t<div class=\"form-group has-clear\">\n+\t\t\t\t\t\t\t\t\t<div class=\"search-pf-input-group\">\n+\t\t\t\t\t\t\t\t\t\t<label for=\"searchPages\" class=\"sr-only\">Filter</label> <input\n+\t\t\t\t\t\t\t\t\t\t\tid=\"searchPages\" type=\"search\" class=\"form-control\"\n+\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Filter\">\n+\n+\t\t\t\t\t\t\t\t\t</div>\n+\t\t\t\t\t\t\t\t</div>\n+\t\t\t\t\t\t\t</form>\n+\t\t\t\t\t\t\t<!-- Pages Table -->\n+\t\t\t\t\t\t\t<table class=\"table table-striped table-bordered table-hover\"\n+\t\t\t\t\t\t\t\tid=\"pagesTable\">\n+\t\t\t\t\t\t\t\t<thead>\n+\t\t\t\t\t\t\t\t\t<tr>\n+\t\t\t\t\t\t\t\t\t\t<th><input type=\"checkbox\" id=\"selectAllPages\" /></th>\n+\t\t\t\t\t\t\t\t\t\t<th>Name</th>\n+\t\t\t\t\t\t\t\t\t</tr>\n+\t\t\t\t\t\t\t\t</thead>\n+\t\t\t\t\t\t\t\t<tbody></tbody>\n+\t\t\t\t\t\t\t</table>\n+\t\t\t\t\t\t</div>\n+\t\t\t\t\t</div>\n+\t\t\t\t</div>\n+\t\t\t\t<div class=\"panel panel-default\">\n+\t\t\t\t\t<div class=\"panel-heading\">\n+\t\t\t\t\t\t<h4 class=\"panel-title\">\n+\t\t\t\t\t\t\t<a data-toggle=\"collapse\" data-parent=\"#dataSelectionAccordion\"\n+\t\t\t\t\t\t\t\thref=\"#collapseThree\" class=\"collapsed\">Navigation</a>\n+\t\t\t\t\t\t</h4>\n+\t\t\t\t\t</div>\n+\t\t\t\t\t<div id=\"collapseThree\" class=\"panel-collapse collapse\">\n+\t\t\t\t\t\t<div class=\"panel-body assets-panel-body\">\n+\t\t\t\t\t\t\t<div class=\"input-group\">\n+\t\t\t\t\t\t\t\t<div id=\"toggleSwitchContainer\" class=\"form-control\"\n+\t\t\t\t\t\t\t\t\taria-describedby=\"navigationExportAddOn\" style=\"height: auto\"></div>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a74b4a7f646b14ef763d402579c8e86d10cbb7a9"}, "originalPosition": 91}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTg2MDc5MA==", "bodyText": "The Toggle was removed.\nWe decided to remove the navigation selection because users should not opt the navigation out, otherwise components that refers to the navigation may break.", "url": "https://github.com/kiegroup/appformer/pull/933#discussion_r409860790", "createdAt": "2020-04-16T21:32:10Z", "author": {"login": "jesuino"}, "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/java/org/dashbuilder/client/cms/screen/transfer/DataTransferExportPopUpView.html", "diffHunk": "@@ -0,0 +1,101 @@\n+<div id=\"dataTransferExportModalBody\" class=\"container-fluid\">\n+\t<div class=\"row\">\n+\t\t<div class=\"col-md-12\">\n+\t\t\t<div id=\"progressIndicator\">\n+\t\t\t\t<p>\n+\t\t\t\t\t<span class=\"spinner spinner-lg spinner-inline\"></span> Loading\n+\t\t\t\t\tassets...\n+\t\t\t\t</p>\n+\t\t\t</div>\n+\t\t\t<div class=\"panel-group\" id=\"dataSelectionAccordion\">\n+\t\t\t\t<div class=\"panel panel-default\">\n+\t\t\t\t\t<div class=\"panel-heading\">\n+\t\t\t\t\t\t<h4 class=\"panel-title\">\n+\t\t\t\t\t\t\t<a data-toggle=\"collapse\" data-parent=\"#dataSelectionAccordion\"\n+\t\t\t\t\t\t\t\thref=\"#collapseOne\">DataSets</a>\n+\t\t\t\t\t\t</h4>\n+\t\t\t\t\t</div>\n+\t\t\t\t\t<div id=\"collapseOne\" class=\"panel-collapse collapse in\">\n+\t\t\t\t\t\t<div class=\"panel-body assets-panel-body\">\n+\t\t\t\t\t\t\t<form role=\"form\" class=\"search-pf has-button\">\n+\t\t\t\t\t\t\t\t<div class=\"form-group has-clear\">\n+\t\t\t\t\t\t\t\t\t<div class=\"search-pf-input-group\">\n+\t\t\t\t\t\t\t\t\t\t<label for=\"searchDatasets\" class=\"sr-only\">Filter</label> <input\n+\t\t\t\t\t\t\t\t\t\t\tid=\"searchDatasets\" type=\"search\" class=\"form-control\"\n+\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Filter\">\n+\n+\t\t\t\t\t\t\t\t\t</div>\n+\t\t\t\t\t\t\t\t</div>\n+\t\t\t\t\t\t\t</form>\n+\t\t\t\t\t\t\t<!-- DataSets Table -->\n+\t\t\t\t\t\t\t<table class=\"table table-striped table-bordered table-hover\"\n+\t\t\t\t\t\t\t\tid=\"datasetsTable\">\n+\t\t\t\t\t\t\t\t<thead>\n+\t\t\t\t\t\t\t\t\t<tr>\n+\t\t\t\t\t\t\t\t\t\t<th><input type=\"checkbox\" id=\"selectAllDatasets\" /></th>\n+\t\t\t\t\t\t\t\t\t\t<th>UUID</th>\n+\t\t\t\t\t\t\t\t\t\t<th>Name</th>\n+\t\t\t\t\t\t\t\t\t\t<th>Type</th>\n+\t\t\t\t\t\t\t\t\t</tr>\n+\t\t\t\t\t\t\t\t</thead>\n+\t\t\t\t\t\t\t\t<tbody id=\"\">\n+\t\t\t\t\t\t\t\t</tbody>\n+\t\t\t\t\t\t\t</table>\n+\t\t\t\t\t\t</div>\n+\t\t\t\t\t</div>\n+\t\t\t\t</div>\n+\t\t\t\t<div class=\"panel panel-default\">\n+\t\t\t\t\t<div class=\"panel-heading\">\n+\t\t\t\t\t\t<h4 class=\"panel-title\">\n+\t\t\t\t\t\t\t<a data-toggle=\"collapse\" data-parent=\"#dataSelectionAccordion\"\n+\t\t\t\t\t\t\t\thref=\"#collapseTwo\" class=\"collapsed\">Pages</a>\n+\t\t\t\t\t\t</h4>\n+\t\t\t\t\t</div>\n+\t\t\t\t\t<div id=\"collapseTwo\" class=\"panel-collapse collapse\">\n+\t\t\t\t\t\t<div class=\"panel-body assets-panel-body\">\n+\t\t\t\t\t\t\t<form role=\"form\" class=\"search-pf has-button\">\n+\t\t\t\t\t\t\t\t<div class=\"form-group has-clear\">\n+\t\t\t\t\t\t\t\t\t<div class=\"search-pf-input-group\">\n+\t\t\t\t\t\t\t\t\t\t<label for=\"searchPages\" class=\"sr-only\">Filter</label> <input\n+\t\t\t\t\t\t\t\t\t\t\tid=\"searchPages\" type=\"search\" class=\"form-control\"\n+\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Filter\">\n+\n+\t\t\t\t\t\t\t\t\t</div>\n+\t\t\t\t\t\t\t\t</div>\n+\t\t\t\t\t\t\t</form>\n+\t\t\t\t\t\t\t<!-- Pages Table -->\n+\t\t\t\t\t\t\t<table class=\"table table-striped table-bordered table-hover\"\n+\t\t\t\t\t\t\t\tid=\"pagesTable\">\n+\t\t\t\t\t\t\t\t<thead>\n+\t\t\t\t\t\t\t\t\t<tr>\n+\t\t\t\t\t\t\t\t\t\t<th><input type=\"checkbox\" id=\"selectAllPages\" /></th>\n+\t\t\t\t\t\t\t\t\t\t<th>Name</th>\n+\t\t\t\t\t\t\t\t\t</tr>\n+\t\t\t\t\t\t\t\t</thead>\n+\t\t\t\t\t\t\t\t<tbody></tbody>\n+\t\t\t\t\t\t\t</table>\n+\t\t\t\t\t\t</div>\n+\t\t\t\t\t</div>\n+\t\t\t\t</div>\n+\t\t\t\t<div class=\"panel panel-default\">\n+\t\t\t\t\t<div class=\"panel-heading\">\n+\t\t\t\t\t\t<h4 class=\"panel-title\">\n+\t\t\t\t\t\t\t<a data-toggle=\"collapse\" data-parent=\"#dataSelectionAccordion\"\n+\t\t\t\t\t\t\t\thref=\"#collapseThree\" class=\"collapsed\">Navigation</a>\n+\t\t\t\t\t\t</h4>\n+\t\t\t\t\t</div>\n+\t\t\t\t\t<div id=\"collapseThree\" class=\"panel-collapse collapse\">\n+\t\t\t\t\t\t<div class=\"panel-body assets-panel-body\">\n+\t\t\t\t\t\t\t<div class=\"input-group\">\n+\t\t\t\t\t\t\t\t<div id=\"toggleSwitchContainer\" class=\"form-control\"\n+\t\t\t\t\t\t\t\t\taria-describedby=\"navigationExportAddOn\" style=\"height: auto\"></div>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjkyNDYzNg=="}, "originalCommit": {"oid": "a74b4a7f646b14ef763d402579c8e86d10cbb7a9"}, "originalPosition": 91}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5OTA4MTQ5OnYy", "diffSide": "RIGHT", "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/java/org/dashbuilder/client/cms/screen/transfer/DataTransferExportPopUpView.html", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxMTowNDoyNlrOGAQ07Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QwMTowMzo1NlrOGG8YRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjkyODg3Nw==", "bodyText": "I don't recall any place that we have a loading spinner inside a modal that we can refer to.\nSo wouldn't it be better to show a BusyIndicatorView while building the modal?\nThen show the modal when everything is ready.\nJust a suggestion. :)", "url": "https://github.com/kiegroup/appformer/pull/933#discussion_r402928877", "createdAt": "2020-04-03T11:04:26Z", "author": {"login": "caponetto"}, "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/java/org/dashbuilder/client/cms/screen/transfer/DataTransferExportPopUpView.html", "diffHunk": "@@ -0,0 +1,101 @@\n+<div id=\"dataTransferExportModalBody\" class=\"container-fluid\">\n+\t<div class=\"row\">\n+\t\t<div class=\"col-md-12\">\n+\t\t\t<div id=\"progressIndicator\">\n+\t\t\t\t<p>\n+\t\t\t\t\t<span class=\"spinner spinner-lg spinner-inline\"></span> Loading\n+\t\t\t\t\tassets...", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a74b4a7f646b14ef763d402579c8e86d10cbb7a9"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTkzMzg5Mw==", "bodyText": "Thank you for the suggestion, changed to BusyIndicatorView", "url": "https://github.com/kiegroup/appformer/pull/933#discussion_r409933893", "createdAt": "2020-04-17T01:03:56Z", "author": {"login": "jesuino"}, "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/java/org/dashbuilder/client/cms/screen/transfer/DataTransferExportPopUpView.html", "diffHunk": "@@ -0,0 +1,101 @@\n+<div id=\"dataTransferExportModalBody\" class=\"container-fluid\">\n+\t<div class=\"row\">\n+\t\t<div class=\"col-md-12\">\n+\t\t\t<div id=\"progressIndicator\">\n+\t\t\t\t<p>\n+\t\t\t\t\t<span class=\"spinner spinner-lg spinner-inline\"></span> Loading\n+\t\t\t\t\tassets...", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjkyODg3Nw=="}, "originalCommit": {"oid": "a74b4a7f646b14ef763d402579c8e86d10cbb7a9"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5OTE4NTg1OnYy", "diffSide": "RIGHT", "path": "dashbuilder/dashbuilder-shared/dashbuilder-services-api/src/main/java/org/dashbuilder/transfer/DataTransferExportModel.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxMTozOToyNVrOGAR0IA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxMTozOToyNVrOGAR0IA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjk0NTA1Ng==", "bodyText": "Please add the copyright header to this file.", "url": "https://github.com/kiegroup/appformer/pull/933#discussion_r402945056", "createdAt": "2020-04-03T11:39:25Z", "author": {"login": "caponetto"}, "path": "dashbuilder/dashbuilder-shared/dashbuilder-services-api/src/main/java/org/dashbuilder/transfer/DataTransferExportModel.java", "diffHunk": "@@ -0,0 +1,70 @@\n+package org.dashbuilder.transfer;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a74b4a7f646b14ef763d402579c8e86d10cbb7a9"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5OTE5MjY4OnYy", "diffSide": "RIGHT", "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/java/org/dashbuilder/client/cms/screen/transfer/DataTransferScreen.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxMTo0MTo0M1rOGAR4Vg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxMTo0MTo0M1rOGAR4Vg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjk0NjEzNA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        DataTransferExportPopUp dataTransferExportPopUp) {\n          \n          \n            \n                        final DataTransferExportPopUp dataTransferExportPopUp) {", "url": "https://github.com/kiegroup/appformer/pull/933#discussion_r402946134", "createdAt": "2020-04-03T11:41:43Z", "author": {"login": "caponetto"}, "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/java/org/dashbuilder/client/cms/screen/transfer/DataTransferScreen.java", "diffHunk": "@@ -50,11 +55,13 @@ public DataTransferScreen() {\n     public DataTransferScreen(\n             final View view,\n             final DataTransferPopUp popUp,\n-            final Caller<DataTransferServices> dataTransferServices) {\n+            final Caller<DataTransferServices> dataTransferServices,\n+            DataTransferExportPopUp dataTransferExportPopUp) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a74b4a7f646b14ef763d402579c8e86d10cbb7a9"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5OTIxODYyOnYy", "diffSide": "RIGHT", "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/java/org/dashbuilder/client/cms/screen/transfer/DataTransferExportPopUpView.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxMTo1MTowM1rOGASIdA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxMTo1MTowM1rOGASIdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjk1MDI2MA==", "bodyText": "I'd suggest to extract each table on its own class following a common contract.\nThus, DataTransferExportPopUpView could add and treat each part of the Accordion in a generic way.\nAlso, it would allow to add any other kind of exporting item more easily.\nJust a thought :)", "url": "https://github.com/kiegroup/appformer/pull/933#discussion_r402950260", "createdAt": "2020-04-03T11:51:03Z", "author": {"login": "caponetto"}, "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/java/org/dashbuilder/client/cms/screen/transfer/DataTransferExportPopUpView.java", "diffHunk": "@@ -0,0 +1,298 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.dashbuilder.client.cms.screen.transfer;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+import java.util.stream.IntStream;\n+import java.util.stream.Stream;\n+\n+import javax.enterprise.context.Dependent;\n+import javax.enterprise.event.Event;\n+import javax.inject.Inject;\n+\n+import elemental2.dom.Element;\n+import elemental2.dom.Element.OnclickCallbackFn;\n+import elemental2.dom.HTMLCollection;\n+import elemental2.dom.HTMLDivElement;\n+import elemental2.dom.HTMLElement;\n+import elemental2.dom.HTMLInputElement;\n+import elemental2.dom.HTMLTableCellElement;\n+import elemental2.dom.HTMLTableElement;\n+import elemental2.dom.HTMLTableRowElement;\n+import elemental2.dom.NodeList;\n+import org.dashbuilder.client.cms.resources.i18n.ContentManagerConstants;\n+import org.dashbuilder.client.cms.screen.util.DomFactory;\n+import org.dashbuilder.dataset.def.DataSetDef;\n+import org.dashbuilder.transfer.DataTransferAssets;\n+import org.dashbuilder.transfer.DataTransferExportModel;\n+import org.gwtbootstrap3.client.ui.ModalFooter;\n+import org.gwtbootstrap3.extras.toggleswitch.client.ui.ToggleSwitch;\n+import org.jboss.errai.common.client.dom.elemental2.Elemental2DomUtil;\n+import org.jboss.errai.ui.shared.api.annotations.DataField;\n+import org.jboss.errai.ui.shared.api.annotations.Templated;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.uberfire.ext.editor.commons.client.file.popups.CommonModalBuilder;\n+import org.uberfire.ext.widgets.common.client.common.popups.BaseModal;\n+import org.uberfire.ext.widgets.common.client.common.popups.footers.ModalFooterOKCancelButtons;\n+import org.uberfire.workbench.events.NotificationEvent;\n+\n+@Templated\n+@Dependent\n+public class DataTransferExportPopUpView implements DataTransferExportPopUp.View {\n+\n+    private static final Logger LOGGER = LoggerFactory.getLogger(DataTransferExportPopUpView.class);\n+\n+    private ContentManagerConstants i18n = ContentManagerConstants.INSTANCE;\n+    private DataTransferExportPopUp presenter;\n+    private BaseModal modal;\n+    \n+    @Inject\n+    ToggleSwitch toggleSwitch;\n+    \n+    @Inject\n+    Elemental2DomUtil elem2Dom;\n+    \n+    @Inject\n+    @DataField \n+    HTMLDivElement toggleSwitchContainer;\n+\n+    @Inject\n+    @DataField\n+    HTMLTableElement datasetsTable;\n+\n+    @Inject\n+    @DataField\n+    HTMLTableElement pagesTable;\n+\n+    @Inject\n+    @DataField\n+    private HTMLDivElement dataTransferExportModalBody;\n+\n+    @Inject\n+    @DataField\n+    HTMLInputElement searchDatasets;\n+\n+    @Inject\n+    @DataField\n+    HTMLInputElement searchPages;\n+\n+    @Inject\n+    @DataField\n+    HTMLInputElement selectAllDatasets;\n+\n+    @Inject\n+    @DataField\n+    HTMLInputElement selectAllPages;\n+\n+    @Inject\n+    @DataField\n+    HTMLDivElement progressIndicator;\n+\n+    @Inject\n+    @DataField\n+    HTMLDivElement dataSelectionAccordion;\n+\n+    @Inject\n+    private Event<NotificationEvent> workbenchNotification;\n+\n+    @Inject\n+    DomFactory domFactory;\n+\n+    private DataTransferAssets assetsToExport;\n+\n+    @Override\n+    public HTMLElement getElement() {\n+        return dataTransferExportModalBody;\n+    }\n+\n+    @Override\n+    public void init(DataTransferExportPopUp presenter) {\n+        this.presenter = presenter;\n+        ModalFooter modalFooter = new ModalFooterOKCancelButtons(this::getSelectedAssets,\n+                                                                 () -> modal.hide());\n+        modal = new CommonModalBuilder().addHeader(i18n.dataTransferExportPopUpViewTitle())\n+                                        .addBody(dataTransferExportModalBody)\n+                                        .addFooter(modalFooter)\n+                                        .build();\n+\n+        selectAllPages.onclick = e -> {\n+            allInputsForTable(pagesTable).forEach(chk -> chk.checked = selectAllPages.checked);\n+            return null;\n+        };\n+\n+        selectAllDatasets.onclick = e -> {\n+            allInputsForTable(datasetsTable).forEach(chk -> chk.checked = selectAllDatasets.checked);\n+            return null;\n+        };\n+\n+        searchPages.onkeyup = e -> {\n+            filterTable(searchPages, pagesTable);\n+            return null;\n+        };\n+\n+        searchDatasets.onkeyup = e -> {\n+            filterTable(searchDatasets, datasetsTable);\n+            return null;\n+        };\n+        \n+        elem2Dom.appendWidgetToElement(toggleSwitchContainer, toggleSwitch);\n+        toggleSwitch.setValue(true);\n+\n+    }\n+\n+    @Override\n+    public void show() {\n+        modal.show();\n+        loading();\n+    }\n+\n+    @Override\n+    public void setAssetsToExport(DataTransferAssets assetsToExport) {\n+        this.assetsToExport = assetsToExport;\n+        finishedLoading();\n+    }\n+\n+    private void fillPagesTable() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a74b4a7f646b14ef763d402579c8e86d10cbb7a9"}, "originalPosition": 171}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5OTIzNTQzOnYy", "diffSide": "RIGHT", "path": "dashbuilder/dashbuilder-backend/dashbuilder-services/src/main/java/org/dashbuilder/transfer/DataTransferServicesImpl.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxMTo1NzowNFrOGASTAQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxMTo1NzowNFrOGASTAQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjk1Mjk2MQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    // TODO Auto-generated method stub", "url": "https://github.com/kiegroup/appformer/pull/933#discussion_r402952961", "createdAt": "2020-04-03T11:57:04Z", "author": {"login": "caponetto"}, "path": "dashbuilder/dashbuilder-backend/dashbuilder-services/src/main/java/org/dashbuilder/transfer/DataTransferServicesImpl.java", "diffHunk": "@@ -181,19 +198,39 @@ public FileVisitResult visitFile(Path path, BasicFileAttributes attrs) {\n             }\n         });\n \n-        ioService.deleteIfExists(\n-                root.resolve(expectedPath));\n+        ioService.deleteIfExists(root.resolve(expectedPath));\n \n         return imported;\n     }\n \n-    private List<String> importFiles(Path path) throws Exception  {\n-        String tempPath = new StringBuilder()\n-            .append(System.getProperty(\"java.io.tmpdir\"))\n-            .append(File.separator)\n-            .append(FILE_PATH)\n-            .append(File.separator)\n-            .toString();\n+    @Override\n+    public DataTransferAssets assetsToExport() {\n+        List<String> pages = listPaths(perspectivesFS,\n+                                       p -> p.endsWith(FILE_EXT)).stream()\n+                                                                 .map(p -> p.getName(p.getNameCount() - 2))\n+                                                                 .map(Object::toString)\n+                                                                 .collect(Collectors.toList());\n+\n+        List<DataSetDef> datasetsDefs = listPaths(datasetsFS,\n+                                                  p -> p.endsWith(DATASET_EXT)).stream()\n+                                                                               .map(this::getFileContent)\n+                                                                               .map(this::parseDataSetDefinition)\n+                                                                               .collect(Collectors.toList());\n+        return new DataTransferAssets(datasetsDefs, pages);\n+    }\n+\n+    @Override\n+    public Map<String, String> validateExport(DataTransferExportModel exportsModel) {\n+        // TODO Auto-generated method stub", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a74b4a7f646b14ef763d402579c8e86d10cbb7a9"}, "originalPosition": 237}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5OTIzODQ1OnYy", "diffSide": "RIGHT", "path": "dashbuilder/dashbuilder-backend/dashbuilder-services/src/main/java/org/dashbuilder/transfer/DataTransferServicesImpl.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxMTo1ODoxNlrOGASVDw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QwMTowMjo1MVrOGG8XIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjk1MzQ4Nw==", "bodyText": "Double-checking: is it ok to return null here?", "url": "https://github.com/kiegroup/appformer/pull/933#discussion_r402953487", "createdAt": "2020-04-03T11:58:16Z", "author": {"login": "caponetto"}, "path": "dashbuilder/dashbuilder-backend/dashbuilder-services/src/main/java/org/dashbuilder/transfer/DataTransferServicesImpl.java", "diffHunk": "@@ -181,19 +198,39 @@ public FileVisitResult visitFile(Path path, BasicFileAttributes attrs) {\n             }\n         });\n \n-        ioService.deleteIfExists(\n-                root.resolve(expectedPath));\n+        ioService.deleteIfExists(root.resolve(expectedPath));\n \n         return imported;\n     }\n \n-    private List<String> importFiles(Path path) throws Exception  {\n-        String tempPath = new StringBuilder()\n-            .append(System.getProperty(\"java.io.tmpdir\"))\n-            .append(File.separator)\n-            .append(FILE_PATH)\n-            .append(File.separator)\n-            .toString();\n+    @Override\n+    public DataTransferAssets assetsToExport() {\n+        List<String> pages = listPaths(perspectivesFS,\n+                                       p -> p.endsWith(FILE_EXT)).stream()\n+                                                                 .map(p -> p.getName(p.getNameCount() - 2))\n+                                                                 .map(Object::toString)\n+                                                                 .collect(Collectors.toList());\n+\n+        List<DataSetDef> datasetsDefs = listPaths(datasetsFS,\n+                                                  p -> p.endsWith(DATASET_EXT)).stream()\n+                                                                               .map(this::getFileContent)\n+                                                                               .map(this::parseDataSetDefinition)\n+                                                                               .collect(Collectors.toList());\n+        return new DataTransferAssets(datasetsDefs, pages);\n+    }\n+\n+    @Override\n+    public Map<String, String> validateExport(DataTransferExportModel exportsModel) {\n+        // TODO Auto-generated method stub\n+        return null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a74b4a7f646b14ef763d402579c8e86d10cbb7a9"}, "originalPosition": 238}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTkzMzYwMA==", "bodyText": "This method was removed, I would try to send this PR implementing two JIRAs, but it would be too much work for a PR review, but I forgot to remove this method.", "url": "https://github.com/kiegroup/appformer/pull/933#discussion_r409933600", "createdAt": "2020-04-17T01:02:51Z", "author": {"login": "jesuino"}, "path": "dashbuilder/dashbuilder-backend/dashbuilder-services/src/main/java/org/dashbuilder/transfer/DataTransferServicesImpl.java", "diffHunk": "@@ -181,19 +198,39 @@ public FileVisitResult visitFile(Path path, BasicFileAttributes attrs) {\n             }\n         });\n \n-        ioService.deleteIfExists(\n-                root.resolve(expectedPath));\n+        ioService.deleteIfExists(root.resolve(expectedPath));\n \n         return imported;\n     }\n \n-    private List<String> importFiles(Path path) throws Exception  {\n-        String tempPath = new StringBuilder()\n-            .append(System.getProperty(\"java.io.tmpdir\"))\n-            .append(File.separator)\n-            .append(FILE_PATH)\n-            .append(File.separator)\n-            .toString();\n+    @Override\n+    public DataTransferAssets assetsToExport() {\n+        List<String> pages = listPaths(perspectivesFS,\n+                                       p -> p.endsWith(FILE_EXT)).stream()\n+                                                                 .map(p -> p.getName(p.getNameCount() - 2))\n+                                                                 .map(Object::toString)\n+                                                                 .collect(Collectors.toList());\n+\n+        List<DataSetDef> datasetsDefs = listPaths(datasetsFS,\n+                                                  p -> p.endsWith(DATASET_EXT)).stream()\n+                                                                               .map(this::getFileContent)\n+                                                                               .map(this::parseDataSetDefinition)\n+                                                                               .collect(Collectors.toList());\n+        return new DataTransferAssets(datasetsDefs, pages);\n+    }\n+\n+    @Override\n+    public Map<String, String> validateExport(DataTransferExportModel exportsModel) {\n+        // TODO Auto-generated method stub\n+        return null;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjk1MzQ4Nw=="}, "originalCommit": {"oid": "a74b4a7f646b14ef763d402579c8e86d10cbb7a9"}, "originalPosition": 238}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5OTI1MjcyOnYy", "diffSide": "RIGHT", "path": "dashbuilder/dashbuilder-backend/dashbuilder-services/src/main/java/org/dashbuilder/transfer/DataTransferServicesImpl.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxMjowMjo0NFrOGASdzA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxMjowMjo0NFrOGASdzA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjk1NTcyNA==", "bodyText": "Consider extracting System.getProperty(\"java.io.tmpdir\") to a constant.\nI see it being used more than once on this class.", "url": "https://github.com/kiegroup/appformer/pull/933#discussion_r402955724", "createdAt": "2020-04-03T12:02:44Z", "author": {"login": "caponetto"}, "path": "dashbuilder/dashbuilder-backend/dashbuilder-services/src/main/java/org/dashbuilder/transfer/DataTransferServicesImpl.java", "diffHunk": "@@ -108,22 +114,37 @@ public DataTransferServicesImpl(\n     }\n \n     @Override\n-    public String doExport() throws java.io.IOException {\n-        String zipLocation = new StringBuilder()\n-            .append(System.getProperty(\"java.io.tmpdir\"))\n-            .append(File.separator)\n-            .append(FILE_PATH)\n-            .append(File.separator)\n-            .append(EXPORT_FILE_NAME)\n-            .toString();\n+    public String doExport(DataTransferExportModel exportModel) throws java.io.IOException {\n+        String zipLocation = new StringBuilder().append(System.getProperty(\"java.io.tmpdir\"))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a74b4a7f646b14ef763d402579c8e86d10cbb7a9"}, "originalPosition": 106}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5OTI2NzU1OnYy", "diffSide": "RIGHT", "path": "dashbuilder/dashbuilder-backend/dashbuilder-services/src/main/java/org/dashbuilder/transfer/DataTransferServicesImpl.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxMjowNjo0NFrOGASmjg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QwMDozMDoxN1rOGG71Ow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjk1Nzk2Ng==", "bodyText": "Consider using DirectoryStream here.", "url": "https://github.com/kiegroup/appformer/pull/933#discussion_r402957966", "createdAt": "2020-04-03T12:06:44Z", "author": {"login": "caponetto"}, "path": "dashbuilder/dashbuilder-backend/dashbuilder-services/src/main/java/org/dashbuilder/transfer/DataTransferServicesImpl.java", "diffHunk": "@@ -384,4 +415,70 @@ private File createVersionFile() throws java.io.IOException {\n \n         return version;\n     }\n+\n+    private List<Path> listPaths(FileSystem fs, Predicate<String> pathTester) {\n+        List<Path> files = new ArrayList<>();\n+        Path root = fs.getRootDirectories().iterator().next();\n+        Files.walkFileTree(root, new SimpleFileVisitor<Path>() {\n+\n+            @Override\n+            public FileVisitResult visitFile(Path path, BasicFileAttributes attrs) {\n+                try {\n+                    if (pathTester.test(path.toString())) {\n+                        files.add(path);\n+                    }\n+                    return FileVisitResult.CONTINUE;\n+\n+                } catch (Exception e) {\n+                    LOGGER.error(e.getMessage(), e);\n+                    return FileVisitResult.TERMINATE;\n+                }\n+            }\n+        });", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a74b4a7f646b14ef763d402579c8e86d10cbb7a9"}, "originalPosition": 441}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTkyNDkyMw==", "bodyText": "I tried using it, The code was clearer:\n        final Filter<Path> dirTest = p -> {\n            return pathTester.test(p.toString());\n        };\n        try (DirectoryStream<Path> dirStream = Files.newDirectoryStream(root, dirTest)) {\n            dirStream.forEach(files::add);\n        } catch (Exception e) {\n            throw new IllegalArgumentException(\"Error walking directory\", e);\n        }\n\nbut for some reason it was not going through some paths, specifically pages paths (plugin_content) hence it was not correctly helping me to filter the assets I wanted, so I went back to Files.walk", "url": "https://github.com/kiegroup/appformer/pull/933#discussion_r409924923", "createdAt": "2020-04-17T00:30:17Z", "author": {"login": "jesuino"}, "path": "dashbuilder/dashbuilder-backend/dashbuilder-services/src/main/java/org/dashbuilder/transfer/DataTransferServicesImpl.java", "diffHunk": "@@ -384,4 +415,70 @@ private File createVersionFile() throws java.io.IOException {\n \n         return version;\n     }\n+\n+    private List<Path> listPaths(FileSystem fs, Predicate<String> pathTester) {\n+        List<Path> files = new ArrayList<>();\n+        Path root = fs.getRootDirectories().iterator().next();\n+        Files.walkFileTree(root, new SimpleFileVisitor<Path>() {\n+\n+            @Override\n+            public FileVisitResult visitFile(Path path, BasicFileAttributes attrs) {\n+                try {\n+                    if (pathTester.test(path.toString())) {\n+                        files.add(path);\n+                    }\n+                    return FileVisitResult.CONTINUE;\n+\n+                } catch (Exception e) {\n+                    LOGGER.error(e.getMessage(), e);\n+                    return FileVisitResult.TERMINATE;\n+                }\n+            }\n+        });", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjk1Nzk2Ng=="}, "originalCommit": {"oid": "a74b4a7f646b14ef763d402579c8e86d10cbb7a9"}, "originalPosition": 441}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3MTQ2ODAwOnYy", "diffSide": "RIGHT", "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/resources/org/dashbuilder/client/cms/resources/i18n/ContentManagerConstants.properties", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxMToyNTo0OVrOGKkXUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxMToyNTo0OVrOGKkXUw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzczNDczOQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            DataTransferView.gradual_export=Export Wizard\n          \n          \n            \n            DataTransferView.gradualExport=Export Wizard", "url": "https://github.com/kiegroup/appformer/pull/933#discussion_r413734739", "createdAt": "2020-04-23T11:25:49Z", "author": {"login": "caponetto"}, "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/resources/org/dashbuilder/client/cms/resources/i18n/ContentManagerConstants.properties", "diffHunk": "@@ -52,6 +52,7 @@ newPerspectivePopUpViewErrorDuplicatedName=Page name already exists\n workbenchPartTitle=Dashbuilder Data Transfer\n DataTransferView.import=Import\n DataTransferView.export=Export\n+DataTransferView.gradual_export=Export Wizard", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d69d8664df26eb75dd81da41958168b149dde09d"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3MTQ3MDA2OnYy", "diffSide": "RIGHT", "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/java/org/dashbuilder/client/cms/screen/transfer/DataTransferView.html", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxMToyNjoxOFrOGKkYjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxMToyNjoxOFrOGKkYjA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzczNTA1Mg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                            data-i18n-key=\"gradual_export\"></button>\n          \n          \n            \n                                            data-i18n-key=\"gradualExport\"></button>", "url": "https://github.com/kiegroup/appformer/pull/933#discussion_r413735052", "createdAt": "2020-04-23T11:26:18Z", "author": {"login": "caponetto"}, "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/java/org/dashbuilder/client/cms/screen/transfer/DataTransferView.html", "diffHunk": "@@ -7,7 +7,12 @@\n                         <h1 data-i18n-key=\"export\"></h1>\n                         <p data-i18n-key=\"exportText\"></p>\n                         <div class=\"card-pf-items\">\n-                            <button class=\"btn btn-primary btn-lg\" data-field=\"btnExport\" data-i18n-key=\"export\"></button>\n+                            <button class=\"btn btn-primary btn-lg\"\n+                                data-field=\"btnExport\"\n+                                data-i18n-key=\"export\"></button>\n+                            <button class=\"btn btn-primary btn-lg\"\n+                                data-field=\"btnGradualExport\"\n+                                data-i18n-key=\"gradual_export\"></button>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d69d8664df26eb75dd81da41958168b149dde09d"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3MTUzMTM5OnYy", "diffSide": "RIGHT", "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/java/org/dashbuilder/client/cms/screen/transfer/export/wizard/ExportSummaryWizardPageView.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxMTo0MjowNVrOGKk7_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxMTo0MjowNVrOGKk7_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzc0NDEyNw==", "bodyText": "I think it won't work for other languages, like Japanese.", "url": "https://github.com/kiegroup/appformer/pull/933#discussion_r413744127", "createdAt": "2020-04-23T11:42:05Z", "author": {"login": "caponetto"}, "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/java/org/dashbuilder/client/cms/screen/transfer/export/wizard/ExportSummaryWizardPageView.java", "diffHunk": "@@ -0,0 +1,111 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.dashbuilder.client.cms.screen.transfer.export.wizard;\n+\n+import javax.enterprise.context.ApplicationScoped;\n+import javax.inject.Inject;\n+import javax.inject.Named;\n+\n+import com.google.gwt.event.dom.client.ClickEvent;\n+import elemental2.dom.HTMLAnchorElement;\n+import elemental2.dom.HTMLButtonElement;\n+import elemental2.dom.HTMLDivElement;\n+import elemental2.dom.HTMLElement;\n+import elemental2.dom.HTMLHeadingElement;\n+import org.dashbuilder.transfer.DataTransferExportModel;\n+import org.jboss.errai.ui.shared.api.annotations.DataField;\n+import org.jboss.errai.ui.shared.api.annotations.EventHandler;\n+import org.jboss.errai.ui.shared.api.annotations.Templated;\n+\n+@Templated\n+@ApplicationScoped\n+public class ExportSummaryWizardPageView implements ExportSummaryWizardPage.View {\n+\n+    @Inject\n+    @DataField\n+    HTMLDivElement exportWizardSummary;\n+\n+    @Inject\n+    @DataField\n+    @Named(\"span\")\n+    HTMLElement datasetsInformation;\n+\n+    @Inject\n+    @DataField\n+    @Named(\"span\")\n+    HTMLElement pagesInformation;\n+\n+    @Inject\n+    @DataField\n+    HTMLAnchorElement datasetsInfoAnchor;\n+\n+    @Inject\n+    @DataField\n+    HTMLAnchorElement pagesInfoAnchor;\n+\n+    @Inject\n+    @DataField\n+    HTMLButtonElement downloadExport;\n+    \n+    @Inject\n+    @DataField\n+    @Named(\"h1\")\n+    HTMLHeadingElement exportHeading;\n+    \n+    private ExportSummaryWizardPage presenter;\n+\n+    @Override\n+    public void init(ExportSummaryWizardPage presenter) {\n+        this.presenter = presenter;\n+    }\n+\n+    @Override\n+    public HTMLElement getElement() {\n+        return exportWizardSummary;\n+    }\n+\n+    @EventHandler(\"downloadExport\")\n+    public void downloadAction(ClickEvent click) {\n+        presenter.confirmDownload();\n+    }\n+\n+    @EventHandler(\"datasetsInfoAnchor\")\n+    public void datasetsInfoAnchorClicked(ClickEvent click) {\n+        presenter.goToDataSetsPage();\n+    }\n+\n+    @EventHandler(\"pagesInfoAnchor\")\n+    public void pagesInfoAnchorClicked(ClickEvent click) {\n+        presenter.goToPagesPage();\n+    }\n+\n+    @Override\n+    public void show(DataTransferExportModel dataTransferExportModel) {\n+        pagesInformation.textContent = checkPlural(dataTransferExportModel.getPages().size(), \"page\");\n+        datasetsInformation.textContent = checkPlural(dataTransferExportModel.getDatasetDefinitions().size(),\n+                                                      \"dataset\");\n+    }\n+\n+    private String checkPlural(int size, String text) {\n+        String finalText = size + \" \" + text;\n+        if (size == 1) {\n+            return finalText;\n+        }\n+        return finalText.concat(\"s\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d69d8664df26eb75dd81da41958168b149dde09d"}, "originalPosition": 108}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3MTUzOTY0OnYy", "diffSide": "RIGHT", "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/java/org/dashbuilder/client/cms/screen/transfer/export/wizard/ExportSummaryWizardPageView.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxMTo0NDoyNFrOGKlA-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxMTo0NDoyNFrOGKlA-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzc0NTQwMg==", "bodyText": "Consider using i18n for \"page\" and \"dataset\".", "url": "https://github.com/kiegroup/appformer/pull/933#discussion_r413745402", "createdAt": "2020-04-23T11:44:24Z", "author": {"login": "caponetto"}, "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/java/org/dashbuilder/client/cms/screen/transfer/export/wizard/ExportSummaryWizardPageView.java", "diffHunk": "@@ -0,0 +1,111 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.dashbuilder.client.cms.screen.transfer.export.wizard;\n+\n+import javax.enterprise.context.ApplicationScoped;\n+import javax.inject.Inject;\n+import javax.inject.Named;\n+\n+import com.google.gwt.event.dom.client.ClickEvent;\n+import elemental2.dom.HTMLAnchorElement;\n+import elemental2.dom.HTMLButtonElement;\n+import elemental2.dom.HTMLDivElement;\n+import elemental2.dom.HTMLElement;\n+import elemental2.dom.HTMLHeadingElement;\n+import org.dashbuilder.transfer.DataTransferExportModel;\n+import org.jboss.errai.ui.shared.api.annotations.DataField;\n+import org.jboss.errai.ui.shared.api.annotations.EventHandler;\n+import org.jboss.errai.ui.shared.api.annotations.Templated;\n+\n+@Templated\n+@ApplicationScoped\n+public class ExportSummaryWizardPageView implements ExportSummaryWizardPage.View {\n+\n+    @Inject\n+    @DataField\n+    HTMLDivElement exportWizardSummary;\n+\n+    @Inject\n+    @DataField\n+    @Named(\"span\")\n+    HTMLElement datasetsInformation;\n+\n+    @Inject\n+    @DataField\n+    @Named(\"span\")\n+    HTMLElement pagesInformation;\n+\n+    @Inject\n+    @DataField\n+    HTMLAnchorElement datasetsInfoAnchor;\n+\n+    @Inject\n+    @DataField\n+    HTMLAnchorElement pagesInfoAnchor;\n+\n+    @Inject\n+    @DataField\n+    HTMLButtonElement downloadExport;\n+    \n+    @Inject\n+    @DataField\n+    @Named(\"h1\")\n+    HTMLHeadingElement exportHeading;\n+    \n+    private ExportSummaryWizardPage presenter;\n+\n+    @Override\n+    public void init(ExportSummaryWizardPage presenter) {\n+        this.presenter = presenter;\n+    }\n+\n+    @Override\n+    public HTMLElement getElement() {\n+        return exportWizardSummary;\n+    }\n+\n+    @EventHandler(\"downloadExport\")\n+    public void downloadAction(ClickEvent click) {\n+        presenter.confirmDownload();\n+    }\n+\n+    @EventHandler(\"datasetsInfoAnchor\")\n+    public void datasetsInfoAnchorClicked(ClickEvent click) {\n+        presenter.goToDataSetsPage();\n+    }\n+\n+    @EventHandler(\"pagesInfoAnchor\")\n+    public void pagesInfoAnchorClicked(ClickEvent click) {\n+        presenter.goToPagesPage();\n+    }\n+\n+    @Override\n+    public void show(DataTransferExportModel dataTransferExportModel) {\n+        pagesInformation.textContent = checkPlural(dataTransferExportModel.getPages().size(), \"page\");\n+        datasetsInformation.textContent = checkPlural(dataTransferExportModel.getDatasetDefinitions().size(),\n+                                                      \"dataset\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d69d8664df26eb75dd81da41958168b149dde09d"}, "originalPosition": 100}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3MTU1MDg2OnYy", "diffSide": "RIGHT", "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/java/org/dashbuilder/client/cms/screen/transfer/export/wizard/ExportSummaryWizardPageView.html", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxMTo0NzoyOVrOGKlH5Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxMTo0NzoyOVrOGKlH5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzc0NzE3Mw==", "bodyText": "Please add the copyright header to this file.", "url": "https://github.com/kiegroup/appformer/pull/933#discussion_r413747173", "createdAt": "2020-04-23T11:47:29Z", "author": {"login": "caponetto"}, "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/java/org/dashbuilder/client/cms/screen/transfer/export/wizard/ExportSummaryWizardPageView.html", "diffHunk": "@@ -0,0 +1,24 @@\n+<div id=\"exportWizardSummary\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d69d8664df26eb75dd81da41958168b149dde09d"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3MTU1Mjg5OnYy", "diffSide": "RIGHT", "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/java/org/dashbuilder/client/cms/screen/transfer/export/wizard/ExportSummaryWizardPageView.html", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxMTo0ODowNVrOGKlJHQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxMTo0ODowNVrOGKlJHQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzc0NzQ4NQ==", "bodyText": "Consider using i18n for \"Your export is ready\".", "url": "https://github.com/kiegroup/appformer/pull/933#discussion_r413747485", "createdAt": "2020-04-23T11:48:05Z", "author": {"login": "caponetto"}, "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/java/org/dashbuilder/client/cms/screen/transfer/export/wizard/ExportSummaryWizardPageView.html", "diffHunk": "@@ -0,0 +1,24 @@\n+<div id=\"exportWizardSummary\">\n+    <div class=\"blank-slate-pf summaryContainer\">\n+        <div class=\"blank-slate-pf-icon\">\n+            <span class=\"pficon pficon-ok\"></span>\n+        </div>\n+        <h1 id=\"exportHeading\">Your export is ready</h1>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d69d8664df26eb75dd81da41958168b149dde09d"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3MTU1NDU3OnYy", "diffSide": "RIGHT", "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/java/org/dashbuilder/client/cms/screen/transfer/export/wizard/ExportSummaryWizardPageView.html", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxMTo0ODozM1rOGKlKIQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxMTo0ODozM1rOGKlKIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzc0Nzc0NQ==", "bodyText": "Consider using i18n for \"Download\".", "url": "https://github.com/kiegroup/appformer/pull/933#discussion_r413747745", "createdAt": "2020-04-23T11:48:33Z", "author": {"login": "caponetto"}, "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/java/org/dashbuilder/client/cms/screen/transfer/export/wizard/ExportSummaryWizardPageView.html", "diffHunk": "@@ -0,0 +1,24 @@\n+<div id=\"exportWizardSummary\">\n+    <div class=\"blank-slate-pf summaryContainer\">\n+        <div class=\"blank-slate-pf-icon\">\n+            <span class=\"pficon pficon-ok\"></span>\n+        </div>\n+        <h1 id=\"exportHeading\">Your export is ready</h1>\n+\n+        <div class=\"list-group\">\n+            <div class=\"list-group-item\">\n+                <span class=\"fa fa-database\"></span> <a href=\"#\"\n+                    id=\"datasetsInfoAnchor\"> <span\n+                    id=\"datasetsInformation\"></span></a>\n+            </div>\n+            <div class=\"list-group-item\">\n+                <span class=\"glyphicon glyphicon-list-alt\"></span> <a\n+                    href=\"#\" id=\"pagesInfoAnchor\"><span\n+                    id=\"pagesInformation\"></span></a>\n+            </div>\n+        </div>\n+        <div class=\"blank-slate-pf-main-action\">\n+            <button class=\"btn btn-primary btn-lg\" id=\"downloadExport\">Download</button>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d69d8664df26eb75dd81da41958168b149dde09d"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3MTU2MzI0OnYy", "diffSide": "RIGHT", "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/java/org/dashbuilder/client/cms/screen/transfer/export/wizard/ExportSummaryWizardPage.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxMTo1MDo1MVrOGKlPYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxMTo1MDo1MVrOGKlPYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzc0OTA5MA==", "bodyText": "Is it a TODO?", "url": "https://github.com/kiegroup/appformer/pull/933#discussion_r413749090", "createdAt": "2020-04-23T11:50:51Z", "author": {"login": "caponetto"}, "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/java/org/dashbuilder/client/cms/screen/transfer/export/wizard/ExportSummaryWizardPage.java", "diffHunk": "@@ -0,0 +1,116 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.dashbuilder.client.cms.screen.transfer.export.wizard;\n+\n+import java.util.function.Supplier;\n+\n+import javax.annotation.PostConstruct;\n+import javax.enterprise.context.ApplicationScoped;\n+import javax.inject.Inject;\n+\n+import com.google.gwt.user.client.ui.Widget;\n+import org.dashbuilder.transfer.DataTransferExportModel;\n+import org.jboss.errai.common.client.ui.ElementWrapperWidget;\n+import org.uberfire.client.callbacks.Callback;\n+import org.uberfire.client.mvp.UberElemental;\n+import org.uberfire.ext.widgets.core.client.wizards.WizardPage;\n+import org.uberfire.mvp.Command;\n+import org.uberfire.mvp.ParameterizedCommand;\n+\n+@ApplicationScoped\n+public class ExportSummaryWizardPage implements WizardPage {\n+\n+    @Inject\n+    View view;\n+\n+    private Supplier<DataTransferExportModel> exportModelSupplier;\n+    private ParameterizedCommand<DataTransferExportModel> dataTransferExportModelCallback;\n+    private DataTransferExportModel dataTransferExportModel;\n+\n+    private Command goToDataSetsCommand = () -> {\n+    };\n+\n+    private Command goToPagesPage = () -> {\n+    };\n+\n+    public interface View extends UberElemental<ExportSummaryWizardPage> {\n+\n+        void show(DataTransferExportModel dataTransferExportModel);\n+\n+    }\n+\n+    @PostConstruct\n+    public void init() {\n+        view.init(this);\n+    }\n+\n+    @Override\n+    public Widget asWidget() {\n+        return ElementWrapperWidget.getWidget(view.getElement());\n+    }\n+\n+    @Override\n+    public String getTitle() {\n+        return \"Export Summary\";\n+    }\n+\n+    @Override\n+    public void isComplete(Callback<Boolean> callback) {\n+        // add validation here when it is ready", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d69d8664df26eb75dd81da41958168b149dde09d"}, "originalPosition": 73}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3MTU2OTg2OnYy", "diffSide": "RIGHT", "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/java/org/dashbuilder/client/cms/screen/transfer/export/wizard/ExportSummaryWizardPage.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxMTo1MjozM1rOGKlTdw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxMTo1MjozM1rOGKlTdw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzc1MDEzNQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                private Command goToPagesPage = () -> {\n          \n          \n            \n                private Command goToPagesCommand = () -> {", "url": "https://github.com/kiegroup/appformer/pull/933#discussion_r413750135", "createdAt": "2020-04-23T11:52:33Z", "author": {"login": "caponetto"}, "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/java/org/dashbuilder/client/cms/screen/transfer/export/wizard/ExportSummaryWizardPage.java", "diffHunk": "@@ -0,0 +1,116 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.dashbuilder.client.cms.screen.transfer.export.wizard;\n+\n+import java.util.function.Supplier;\n+\n+import javax.annotation.PostConstruct;\n+import javax.enterprise.context.ApplicationScoped;\n+import javax.inject.Inject;\n+\n+import com.google.gwt.user.client.ui.Widget;\n+import org.dashbuilder.transfer.DataTransferExportModel;\n+import org.jboss.errai.common.client.ui.ElementWrapperWidget;\n+import org.uberfire.client.callbacks.Callback;\n+import org.uberfire.client.mvp.UberElemental;\n+import org.uberfire.ext.widgets.core.client.wizards.WizardPage;\n+import org.uberfire.mvp.Command;\n+import org.uberfire.mvp.ParameterizedCommand;\n+\n+@ApplicationScoped\n+public class ExportSummaryWizardPage implements WizardPage {\n+\n+    @Inject\n+    View view;\n+\n+    private Supplier<DataTransferExportModel> exportModelSupplier;\n+    private ParameterizedCommand<DataTransferExportModel> dataTransferExportModelCallback;\n+    private DataTransferExportModel dataTransferExportModel;\n+\n+    private Command goToDataSetsCommand = () -> {\n+    };\n+\n+    private Command goToPagesPage = () -> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d69d8664df26eb75dd81da41958168b149dde09d"}, "originalPosition": 47}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3MTU3NTAwOnYy", "diffSide": "RIGHT", "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/java/org/dashbuilder/client/cms/screen/transfer/export/wizard/DataSetsWizardPage.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxMTo1Mzo1MFrOGKlWlg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxMTo1Mzo1MFrOGKlWlg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzc1MDkzNA==", "bodyText": "Consider using i18n for \"Select Datasets\".", "url": "https://github.com/kiegroup/appformer/pull/933#discussion_r413750934", "createdAt": "2020-04-23T11:53:50Z", "author": {"login": "caponetto"}, "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/java/org/dashbuilder/client/cms/screen/transfer/export/wizard/DataSetsWizardPage.java", "diffHunk": "@@ -0,0 +1,68 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.dashbuilder.client.cms.screen.transfer.export.wizard;\n+\n+import java.util.List;\n+\n+import javax.enterprise.context.ApplicationScoped;\n+import javax.inject.Inject;\n+\n+import com.google.gwt.user.client.ui.Widget;\n+import org.dashbuilder.client.cms.screen.transfer.export.wizard.widget.DataSetsTable;\n+import org.dashbuilder.dataset.def.DataSetDef;\n+import org.jboss.errai.common.client.ui.ElementWrapperWidget;\n+import org.uberfire.client.callbacks.Callback;\n+import org.uberfire.ext.widgets.core.client.wizards.WizardPage;\n+\n+@ApplicationScoped\n+public class DataSetsWizardPage implements WizardPage {\n+\n+    @Inject\n+    DataSetsTable dataSetsTable;\n+\n+    @Override\n+    public Widget asWidget() {\n+        return ElementWrapperWidget.getWidget(dataSetsTable.getElement());\n+    }\n+\n+    @Override\n+    public String getTitle() {\n+        return \"Select Datasets\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d69d8664df26eb75dd81da41958168b149dde09d"}, "originalPosition": 44}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3MTYxMDkyOnYy", "diffSide": "RIGHT", "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/java/org/dashbuilder/client/cms/screen/transfer/DataTransferView.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxMjowMjoyOVrOGKlrlw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxMjowMjoyOVrOGKlrlw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzc1NjMxMQ==", "bodyText": "Are you using this variable?\nCan it be injected on the constructor just like the others?", "url": "https://github.com/kiegroup/appformer/pull/933#discussion_r413756311", "createdAt": "2020-04-23T12:02:29Z", "author": {"login": "caponetto"}, "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/java/org/dashbuilder/client/cms/screen/transfer/DataTransferView.java", "diffHunk": "@@ -55,6 +54,8 @@\n     private Elemental2DomUtil elem2Dom;\n     private Event<NotificationEvent> workbenchNotification;\n     private PathUrlFactory pathUrlFactory;\n+    \n+    @Inject PagesTable pagesTable;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d69d8664df26eb75dd81da41958168b149dde09d"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3MTY0MDkwOnYy", "diffSide": "RIGHT", "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/java/org/dashbuilder/client/cms/screen/transfer/export/wizard/ExportWizard.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxMjoxMDowNFrOGKl9zA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxMjoxMDowNFrOGKl9zA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzc2MDk3Mg==", "bodyText": "Consider using i18n for \"Export Wizard\".", "url": "https://github.com/kiegroup/appformer/pull/933#discussion_r413760972", "createdAt": "2020-04-23T12:10:04Z", "author": {"login": "caponetto"}, "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/java/org/dashbuilder/client/cms/screen/transfer/export/wizard/ExportWizard.java", "diffHunk": "@@ -0,0 +1,129 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.dashbuilder.client.cms.screen.transfer.export.wizard;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+import javax.annotation.PostConstruct;\n+import javax.enterprise.context.ApplicationScoped;\n+import javax.enterprise.event.Event;\n+import javax.enterprise.event.Observes;\n+import javax.inject.Inject;\n+\n+import com.google.gwt.user.client.ui.Widget;\n+import org.dashbuilder.transfer.DataTransferAssets;\n+import org.dashbuilder.transfer.DataTransferExportModel;\n+import org.uberfire.client.callbacks.Callback;\n+import org.uberfire.ext.widgets.core.client.wizards.AbstractWizard;\n+import org.uberfire.ext.widgets.core.client.wizards.WizardPage;\n+import org.uberfire.ext.widgets.core.client.wizards.WizardPageSelectedEvent;\n+import org.uberfire.mvp.ParameterizedCommand;\n+\n+@ApplicationScoped\n+public class ExportWizard extends AbstractWizard {\n+\n+    @Inject\n+    DataSetsWizardPage dataSetsWizardPage;\n+\n+    @Inject\n+    PagesWizardPage pagesWizardPage;\n+\n+    @Inject\n+    ExportSummaryWizardPage exportSummaryWizardPage;\n+\n+    @Inject\n+    Event<WizardPageSelectedEvent> wizardPageSelectedEvent;\n+\n+    private List<WizardPage> wizardPages;\n+\n+    private boolean canConclude;\n+\n+    @PostConstruct\n+    void init() {\n+        wizardPages = new ArrayList<>();\n+        wizardPages.add(dataSetsWizardPage);\n+        wizardPages.add(pagesWizardPage);\n+        wizardPages.add(exportSummaryWizardPage);\n+\n+        exportSummaryWizardPage.setExportSummary(this::getDataTransferExportModel);\n+        exportSummaryWizardPage.setGoToDataSetsCommand(() -> goTo(dataSetsWizardPage));\n+        exportSummaryWizardPage.setGoToPagesCommand(() -> goTo(pagesWizardPage));\n+    }\n+\n+    public void start(DataTransferAssets assets) {\n+        dataSetsWizardPage.setDataSets(assets.getDatasetsDefinitions());\n+        pagesWizardPage.setPages(assets.getPages());\n+\n+        this.start();\n+    }\n+\n+    @Override\n+    public List<WizardPage> getPages() {\n+        return wizardPages;\n+    }\n+\n+    @Override\n+    public Widget getPageWidget(int pageNumber) {\n+        return wizardPages.get(pageNumber).asWidget();\n+    }\n+\n+    @Override\n+    public String getTitle() {\n+        return \"Export Wizard\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d69d8664df26eb75dd81da41958168b149dde09d"}, "originalPosition": 87}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3MTY4Nzg0OnYy", "diffSide": "RIGHT", "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/java/org/dashbuilder/client/cms/screen/transfer/DataTransferScreen.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxMjoyMTowMFrOGKmZGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxMjoyMTowMFrOGKmZGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzc2Nzk2Mw==", "bodyText": "Consider using i18n for \"Loading Export Wizard\".", "url": "https://github.com/kiegroup/appformer/pull/933#discussion_r413767963", "createdAt": "2020-04-23T12:21:00Z", "author": {"login": "caponetto"}, "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/java/org/dashbuilder/client/cms/screen/transfer/DataTransferScreen.java", "diffHunk": "@@ -70,49 +81,53 @@ public View part() {\n     @PostConstruct\n     public void init() {\n         view.init(this);\n+        exportWizard.setCallback(this::callExportService);\n     }\n \n     public void doExport() {\n-        try {\n-            dataTransferServices.call(\n-                (RemoteCallback<String>) path -> {\n-                    view.exportOK();\n-                    view.download(path);\n-\n-                }, (ErrorCallback<Exception>) (message, throwable) -> {\n-                    view.exportError(throwable);\n-                    return false;\n-\n-                }).doExport();\n+        callExportService(DataTransferExportModel.exportAll());\n+    }\n \n-        } catch (Exception e) {\n-            view.exportError(e);\n-        }\n+    public void doGradualExport() {\n+        busyIndicatorView.showBusyIndicator(\"Loading Export Wizard\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d69d8664df26eb75dd81da41958168b149dde09d"}, "originalPosition": 72}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3MTcwODc4OnYy", "diffSide": "RIGHT", "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/java/org/dashbuilder/client/cms/screen/transfer/DataTransferScreen.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxMjoyNTo1M1rOGKmlxw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxMjoyNTo1M1rOGKmlxw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzc3MTIwNw==", "bodyText": "Could this call take noticeable time? If so, consider using BusyIndicator here as well.", "url": "https://github.com/kiegroup/appformer/pull/933#discussion_r413771207", "createdAt": "2020-04-23T12:25:53Z", "author": {"login": "caponetto"}, "path": "dashbuilder/dashbuilder-client/dashbuilder-cms-client/src/main/java/org/dashbuilder/client/cms/screen/transfer/DataTransferScreen.java", "diffHunk": "@@ -127,4 +142,22 @@ public String getExportFileName() {\n     public String getImportFileName() {\n         return DataTransferServices.IMPORT_FILE_NAME;\n     }\n-}\n+\n+    private void callExportService(DataTransferExportModel dataTransferExportModel) {\n+        try {\n+            dataTransferServices.call((RemoteCallback<String>) path -> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d69d8664df26eb75dd81da41958168b149dde09d"}, "originalPosition": 131}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5NjE4MDA3OnYy", "diffSide": "RIGHT", "path": "dashbuilder/dashbuilder-shared/dashbuilder-services-api/src/main/java/org/dashbuilder/transfer/ExportModelValidationService.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxMTo0OToxNVrOGN7O_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxMTo0OToxNVrOGN7O_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzI1NTE2Ng==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * Copyright 202 Red Hat, Inc. and/or its affiliates.\n          \n          \n            \n             * Copyright 2020 Red Hat, Inc. and/or its affiliates.", "url": "https://github.com/kiegroup/appformer/pull/933#discussion_r417255166", "createdAt": "2020-04-29T11:49:15Z", "author": {"login": "caponetto"}, "path": "dashbuilder/dashbuilder-shared/dashbuilder-services-api/src/main/java/org/dashbuilder/transfer/ExportModelValidationService.java", "diffHunk": "@@ -0,0 +1,38 @@\n+/*\n+ * Copyright 202 Red Hat, Inc. and/or its affiliates.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fcf9c5b4296277f31107e6642cc5d30b8db6fe1b"}, "originalPosition": 2}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5NjE4MDg5OnYy", "diffSide": "RIGHT", "path": "dashbuilder/dashbuilder-backend/dashbuilder-services/src/main/java/org/dashbuilder/transfer/ExportModelValidationServiceImpl.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxMTo0OTozMVrOGN7PhA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxMTo0OTozMVrOGN7PhA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzI1NTMwMA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * Copyright 202 Red Hat, Inc. and/or its affiliates.\n          \n          \n            \n             * Copyright 2020 Red Hat, Inc. and/or its affiliates.", "url": "https://github.com/kiegroup/appformer/pull/933#discussion_r417255300", "createdAt": "2020-04-29T11:49:31Z", "author": {"login": "caponetto"}, "path": "dashbuilder/dashbuilder-backend/dashbuilder-services/src/main/java/org/dashbuilder/transfer/ExportModelValidationServiceImpl.java", "diffHunk": "@@ -0,0 +1,87 @@\n+/*\n+ * Copyright 202 Red Hat, Inc. and/or its affiliates.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fcf9c5b4296277f31107e6642cc5d30b8db6fe1b"}, "originalPosition": 2}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5NjE4NDQwOnYy", "diffSide": "RIGHT", "path": "dashbuilder/dashbuilder-shared/dashbuilder-services-api/src/main/java/org/dashbuilder/transfer/ExportModelValidationService.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxMTo1MDo0NFrOGN7RtQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxMTo1MDo0NFrOGN7RtQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzI1NTg2MQ==", "bodyText": "Consider adding what's returned.", "url": "https://github.com/kiegroup/appformer/pull/933#discussion_r417255861", "createdAt": "2020-04-29T11:50:44Z", "author": {"login": "caponetto"}, "path": "dashbuilder/dashbuilder-shared/dashbuilder-services-api/src/main/java/org/dashbuilder/transfer/ExportModelValidationService.java", "diffHunk": "@@ -0,0 +1,38 @@\n+/*\n+ * Copyright 202 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.dashbuilder.transfer;\n+\n+import java.util.List;\n+import java.util.Map;\n+\n+import org.jboss.errai.bus.server.annotations.Remote;\n+\n+/**\n+ * Perform validations on an ExportModel\n+ *\n+ */\n+@Remote\n+public interface ExportModelValidationService {\n+\n+    /**\n+     * Check if there is datasets not exported for the given export model\n+     * \n+     * @param exportModel\n+     * @return", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fcf9c5b4296277f31107e6642cc5d30b8db6fe1b"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxODgxNjA1OnYy", "diffSide": "RIGHT", "path": "dashbuilder/dashbuilder-backend/dashbuilder-services/src/main/java/org/dashbuilder/transfer/DataTransferServicesImpl.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxMDowOToxOFrOGRMQag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxNjo0ODozMVrOGRcGSA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY3OTc4Ng==", "bodyText": "is the isExportNavigation() still relevant? the navigation is always exported in the custom export", "url": "https://github.com/kiegroup/appformer/pull/933#discussion_r420679786", "createdAt": "2020-05-06T10:09:18Z", "author": {"login": "barboras7"}, "path": "dashbuilder/dashbuilder-backend/dashbuilder-services/src/main/java/org/dashbuilder/transfer/DataTransferServicesImpl.java", "diffHunk": "@@ -108,22 +114,37 @@ public DataTransferServicesImpl(\n     }\n \n     @Override\n-    public String doExport() throws java.io.IOException {\n-        String zipLocation = new StringBuilder()\n-            .append(System.getProperty(\"java.io.tmpdir\"))\n-            .append(File.separator)\n-            .append(FILE_PATH)\n-            .append(File.separator)\n-            .append(EXPORT_FILE_NAME)\n-            .toString();\n+    public String doExport(DataTransferExportModel exportModel) throws java.io.IOException {\n+        String zipLocation = new StringBuilder().append(TMP_DIR)\n+                                                .append(File.separator)\n+                                                .append(FILE_PATH)\n+                                                .append(File.separator)\n+                                                .append(EXPORT_FILE_NAME)\n+                                                .toString();\n+\n+        Predicate<Path> readmeFilter = p -> p.toString().toLowerCase().endsWith(\"readme.md\");\n+        Predicate<Path> datasetsFilter = def -> true;\n+        Predicate<Path> pagesFilter = page -> true;\n+        boolean exportNavigation = true;\n+\n+        if (!exportModel.isExportAll()) {\n+            datasetsFilter = filterDatasets(exportModel.getDatasetDefinitions());\n+            pagesFilter = filterPages(exportModel.getPages());\n+            exportNavigation = exportModel.isExportNavigation();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b07f076cea68660be763a5d5056e9d928657876a"}, "originalPosition": 125}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDkzOTMzNg==", "bodyText": "I would let it in case we want to allow users to select this option in future. For example, I did create [1] so users could export a single page along its dependencies so they can it on runtime. In that case navigation would not be needed.\n[1] https://issues.redhat.com/browse/AF-2459", "url": "https://github.com/kiegroup/appformer/pull/933#discussion_r420939336", "createdAt": "2020-05-06T16:48:31Z", "author": {"login": "jesuino"}, "path": "dashbuilder/dashbuilder-backend/dashbuilder-services/src/main/java/org/dashbuilder/transfer/DataTransferServicesImpl.java", "diffHunk": "@@ -108,22 +114,37 @@ public DataTransferServicesImpl(\n     }\n \n     @Override\n-    public String doExport() throws java.io.IOException {\n-        String zipLocation = new StringBuilder()\n-            .append(System.getProperty(\"java.io.tmpdir\"))\n-            .append(File.separator)\n-            .append(FILE_PATH)\n-            .append(File.separator)\n-            .append(EXPORT_FILE_NAME)\n-            .toString();\n+    public String doExport(DataTransferExportModel exportModel) throws java.io.IOException {\n+        String zipLocation = new StringBuilder().append(TMP_DIR)\n+                                                .append(File.separator)\n+                                                .append(FILE_PATH)\n+                                                .append(File.separator)\n+                                                .append(EXPORT_FILE_NAME)\n+                                                .toString();\n+\n+        Predicate<Path> readmeFilter = p -> p.toString().toLowerCase().endsWith(\"readme.md\");\n+        Predicate<Path> datasetsFilter = def -> true;\n+        Predicate<Path> pagesFilter = page -> true;\n+        boolean exportNavigation = true;\n+\n+        if (!exportModel.isExportAll()) {\n+            datasetsFilter = filterDatasets(exportModel.getDatasetDefinitions());\n+            pagesFilter = filterPages(exportModel.getPages());\n+            exportNavigation = exportModel.isExportNavigation();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY3OTc4Ng=="}, "originalCommit": {"oid": "b07f076cea68660be763a5d5056e9d928657876a"}, "originalPosition": 125}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2771, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}