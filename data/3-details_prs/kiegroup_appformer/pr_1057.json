{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkzMzY2NTA5", "number": 1057, "title": "AF-2645: Add button to allow users to open pages in embedded mode", "bodyText": "JIRA:\nhttps://issues.redhat.com/browse/AF-2645\nAdds a button to open a perspective in standalone mode. It is useful so users can have a direct link to a perspective without menu or other runtime stuff.\nFind the button on upper right side of a perspective page. It won't show for other type of pages. Clicking on it causes the browser to open a new tab with the current page in standalone mode.", "createdAt": "2020-09-25T20:56:41Z", "url": "https://github.com/kiegroup/appformer/pull/1057", "merged": true, "mergeCommit": {"oid": "c389d98b3fe21db361bc84eeab68c1fe51aa25e1"}, "closed": true, "closedAt": "2020-10-13T22:13:30Z", "author": {"login": "jesuino"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdOOy99gFqTQ5OTM3NTIwNg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdSJIrnAFqTUwNzQ3NDIxMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk5Mzc1MjA2", "url": "https://github.com/kiegroup/appformer/pull/1057#pullrequestreview-499375206", "createdAt": "2020-09-30T12:28:57Z", "commit": {"oid": "150154817e6b1568fdcc6eac41c00552ced3cee9"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxMjoyODo1N1rOHabGHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxOTowNToyMlrOHarcLQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzQ2ODk1OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    }        \n          \n          \n            \n                    }", "url": "https://github.com/kiegroup/appformer/pull/1057#discussion_r497468958", "createdAt": "2020-09-30T12:28:57Z", "author": {"login": "caponetto"}, "path": "dashbuilder/dashbuilder-runtime/src/main/java/org/dashbuilder/client/RuntimeEntryPoint.java", "diffHunk": "@@ -85,28 +89,40 @@ public void startup() {\n \n     private void foundRuntimeModel(RuntimeModel runtimeModel) {\n         boolean perspectiveNotFound = runtimeModel.getLayoutTemplates().stream()\n-                                                  .noneMatch(lt -> lt.getName().equals(perspective));\n+                                                  .noneMatch(lt -> lt.getName().equals(dashboard));\n         if (perspectiveNotFound) {\n             notFound();\n-        } \n-        \n-        this.hideLoading();\n+        } else {\n+            targetPerspective();\n+        }        ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "150154817e6b1568fdcc6eac41c00552ced3cee9"}, "originalPosition": 64}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzQ5OTg4Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                                   .setParameter(\"perspective\", dashboard)\n          \n          \n            \n                                                   .setParameter(PERSPECTIVE_PARAM, dashboard)", "url": "https://github.com/kiegroup/appformer/pull/1057#discussion_r497499882", "createdAt": "2020-09-30T13:15:46Z", "author": {"login": "caponetto"}, "path": "dashbuilder/dashbuilder-runtime/src/main/java/org/dashbuilder/client/RuntimeEntryPoint.java", "diffHunk": "@@ -85,28 +89,40 @@ public void startup() {\n \n     private void foundRuntimeModel(RuntimeModel runtimeModel) {\n         boolean perspectiveNotFound = runtimeModel.getLayoutTemplates().stream()\n-                                                  .noneMatch(lt -> lt.getName().equals(perspective));\n+                                                  .noneMatch(lt -> lt.getName().equals(dashboard));\n         if (perspectiveNotFound) {\n             notFound();\n-        } \n-        \n-        this.hideLoading();\n+        } else {\n+            targetPerspective();\n+        }        \n     }\n \n     public void notFound() {\n         String newUrl = GWT.getHostPageBaseURL() + \"?standalone&\" +\n-                        PERSPECTIVE_PARAM + \"=\" + NotFoundPerspective.ID + \"&\" +\n-                        TARGET_PARAM + \"=\" + perspective;\n+                        \"perspective=\" + NotFoundPerspective.ID + \"&\" +\n+                        DASHBOARD_PARAM + \"=\" + dashboard;\n         DomGlobal.window.history.pushState(null,\n                                            \"Dashbuilder Runtime | Not Found\",\n                                            newUrl);\n+        this.hideLoading();\n+\n+    }\n+\n+    public void targetPerspective() {\n+        String newUrl = Window.Location.createUrlBuilder()\n+                                       .setParameter(\"perspective\", dashboard)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "150154817e6b1568fdcc6eac41c00552ced3cee9"}, "originalPosition": 82}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzUyMDQ3Mw==", "bodyText": "Why did you stop using PERSPECTIVE_PARAM here?", "url": "https://github.com/kiegroup/appformer/pull/1057#discussion_r497520473", "createdAt": "2020-09-30T13:44:11Z", "author": {"login": "caponetto"}, "path": "dashbuilder/dashbuilder-runtime/src/main/java/org/dashbuilder/client/RuntimeEntryPoint.java", "diffHunk": "@@ -85,28 +89,40 @@ public void startup() {\n \n     private void foundRuntimeModel(RuntimeModel runtimeModel) {\n         boolean perspectiveNotFound = runtimeModel.getLayoutTemplates().stream()\n-                                                  .noneMatch(lt -> lt.getName().equals(perspective));\n+                                                  .noneMatch(lt -> lt.getName().equals(dashboard));\n         if (perspectiveNotFound) {\n             notFound();\n-        } \n-        \n-        this.hideLoading();\n+        } else {\n+            targetPerspective();\n+        }        \n     }\n \n     public void notFound() {\n         String newUrl = GWT.getHostPageBaseURL() + \"?standalone&\" +\n-                        PERSPECTIVE_PARAM + \"=\" + NotFoundPerspective.ID + \"&\" +\n-                        TARGET_PARAM + \"=\" + perspective;\n+                        \"perspective=\" + NotFoundPerspective.ID + \"&\" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "150154817e6b1568fdcc6eac41c00552ced3cee9"}, "originalPosition": 71}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzczNjc0OQ==", "bodyText": "Looks like this import can be removed.", "url": "https://github.com/kiegroup/appformer/pull/1057#discussion_r497736749", "createdAt": "2020-09-30T19:05:22Z", "author": {"login": "caponetto"}, "path": "dashbuilder/dashbuilder-runtime/src/main/java/org/dashbuilder/client/navbar/GoToDashboardMenuBuilder.java", "diffHunk": "@@ -0,0 +1,87 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.dashbuilder.client.navbar;\n+\n+import javax.annotation.PostConstruct;\n+import javax.enterprise.context.ApplicationScoped;\n+import javax.inject.Inject;\n+\n+import com.google.gwt.user.client.Window;\n+import com.google.gwt.user.client.ui.IsWidget;\n+import elemental2.dom.DomGlobal;\n+import org.dashbuilder.client.RuntimeEntryPoint;\n+import org.dashbuilder.client.resources.i18n.AppConstants;\n+import org.gwtbootstrap3.client.ui.AnchorListItem;\n+import org.gwtbootstrap3.client.ui.constants.IconType;\n+import org.uberfire.client.mvp.PerspectiveManager;\n+import org.uberfire.client.workbench.events.PerspectiveChange;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "150154817e6b1568fdcc6eac41c00552ced3cee9"}, "originalPosition": 31}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "150154817e6b1568fdcc6eac41c00552ced3cee9", "author": {"user": {"login": "jesuino", "name": "William Ant\u00f4nio Siqueira"}}, "url": "https://github.com/kiegroup/appformer/commit/150154817e6b1568fdcc6eac41c00552ced3cee9", "committedDate": "2020-09-25T20:53:37Z", "message": "AF-2645: Add button to allow users to open pages in embedded mode"}, "afterCommit": {"oid": "e35cca562c20cdf954d43914d401530f54fe5f77", "author": {"user": {"login": "jesuino", "name": "William Ant\u00f4nio Siqueira"}}, "url": "https://github.com/kiegroup/appformer/commit/e35cca562c20cdf954d43914d401530f54fe5f77", "committedDate": "2020-10-05T16:39:21Z", "message": "Improvements"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyMjM4MjY0", "url": "https://github.com/kiegroup/appformer/pull/1057#pullrequestreview-502238264", "createdAt": "2020-10-05T16:45:03Z", "commit": {"oid": "e35cca562c20cdf954d43914d401530f54fe5f77"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzNjQ4ODgw", "url": "https://github.com/kiegroup/appformer/pull/1057#pullrequestreview-503648880", "createdAt": "2020-10-07T08:38:05Z", "commit": {"oid": "e35cca562c20cdf954d43914d401530f54fe5f77"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QwODozODowNVrOHdoovQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QwODozODowNVrOHdoovQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDgzNjU0MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                private boolean isGotoDashboardMenuEnabled = false;\n          \n          \n            \n                private boolean isGoToDashboardMenuEnabled = false;", "url": "https://github.com/kiegroup/appformer/pull/1057#discussion_r500836541", "createdAt": "2020-10-07T08:38:05Z", "author": {"login": "barboras7"}, "path": "dashbuilder/dashbuilder-runtime/src/main/java/org/dashbuilder/client/navbar/AppNavBar.java", "diffHunk": "@@ -41,10 +41,15 @@\n     @Inject\n     LogoutMenuBuilder logoutMenu;\n     \n+    @Inject\n+    GoToDashboardMenuBuilder goToDashboardMenu;\n+    \n     @Inject\n     DashboardListMenuBuilder dashboardsListMenu;\n     \n     private boolean isDashboardListEnabled = false;\n+    \n+    private boolean isGotoDashboardMenuEnabled = false;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e35cca562c20cdf954d43914d401530f54fe5f77"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzNzA2OTQ5", "url": "https://github.com/kiegroup/appformer/pull/1057#pullrequestreview-503706949", "createdAt": "2020-10-07T09:47:29Z", "commit": {"oid": "e35cca562c20cdf954d43914d401530f54fe5f77"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f99df2c054e5e190c76bb81d006a29b5dd631ef1", "author": {"user": {"login": "jesuino", "name": "William Ant\u00f4nio Siqueira"}}, "url": "https://github.com/kiegroup/appformer/commit/f99df2c054e5e190c76bb81d006a29b5dd631ef1", "committedDate": "2020-10-13T13:59:04Z", "message": "AF-2645: Add button to allow users to open pages in embedded mode"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "020c74ac013f4e00df5a59af252723f7ae65b117", "author": {"user": {"login": "jesuino", "name": "William Ant\u00f4nio Siqueira"}}, "url": "https://github.com/kiegroup/appformer/commit/020c74ac013f4e00df5a59af252723f7ae65b117", "committedDate": "2020-10-13T13:59:04Z", "message": "Improvements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3aa088dcffe3c09d2e9765307c63cb0592b3beef", "author": {"user": {"login": "jesuino", "name": "William Ant\u00f4nio Siqueira"}}, "url": "https://github.com/kiegroup/appformer/commit/3aa088dcffe3c09d2e9765307c63cb0592b3beef", "committedDate": "2020-10-13T13:59:04Z", "message": "field rename"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e35cca562c20cdf954d43914d401530f54fe5f77", "author": {"user": {"login": "jesuino", "name": "William Ant\u00f4nio Siqueira"}}, "url": "https://github.com/kiegroup/appformer/commit/e35cca562c20cdf954d43914d401530f54fe5f77", "committedDate": "2020-10-05T16:39:21Z", "message": "Improvements"}, "afterCommit": {"oid": "3aa088dcffe3c09d2e9765307c63cb0592b3beef", "author": {"user": {"login": "jesuino", "name": "William Ant\u00f4nio Siqueira"}}, "url": "https://github.com/kiegroup/appformer/commit/3aa088dcffe3c09d2e9765307c63cb0592b3beef", "committedDate": "2020-10-13T13:59:04Z", "message": "field rename"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3NDc0MjEy", "url": "https://github.com/kiegroup/appformer/pull/1057#pullrequestreview-507474212", "createdAt": "2020-10-13T14:06:30Z", "commit": {"oid": "3aa088dcffe3c09d2e9765307c63cb0592b3beef"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1991, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}