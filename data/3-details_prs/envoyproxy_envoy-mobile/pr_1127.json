{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk2NTcyMTc5", "number": 1127, "title": "filters: fix out of bound access to result status", "bodyText": "Description: The high-level representation of filter statuses with attached HTTP entities to be forwarded can't be directly represented across the bridge layer and must be mapped. Uniquely, resume iteration statuses may contain pending entities that have not yet been forwarded. This quick fix checks bounds explicitly for these cases in Objective-C.\nRisk Level: Low\nSigned-off-by: Mike Schore mike.schore@gmail.com", "createdAt": "2020-10-01T22:05:50Z", "url": "https://github.com/envoyproxy/envoy-mobile/pull/1127", "merged": true, "mergeCommit": {"oid": "bf477082f0761b850ac50cfb2a0ae3879fa1203b"}, "closed": true, "closedAt": "2020-10-02T03:16:25Z", "author": {"login": "goaway"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdOYu5LgH2gAyNDk2NTcyMTc5OmVkNWY4OTJkYzZmYTdmZDUzYTJmZTNkNzIwYWM5ZDliNjAwMWNjMjU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdOY9UCAFqTUwMDc1NDk5OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ed5f892dc6fa7fd53a2fe3d720ac9d9b6001cc25", "author": {"user": {"login": "goaway", "name": "Mike Schore"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/ed5f892dc6fa7fd53a2fe3d720ac9d9b6001cc25", "committedDate": "2020-10-01T22:01:07Z", "message": "filters: fix out of bound access to result status\n\nSigned-off-by: Mike Schore <mike.schore@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c37410ee1d7e12570bdab1a8126ccbd4240edb1a", "author": {"user": {"login": "goaway", "name": "Mike Schore"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/c37410ee1d7e12570bdab1a8126ccbd4240edb1a", "committedDate": "2020-10-01T22:12:00Z", "message": "format\n\nSigned-off-by: Mike Schore <mike.schore@gmail.com>"}, "afterCommit": {"oid": "ed5f892dc6fa7fd53a2fe3d720ac9d9b6001cc25", "author": {"user": {"login": "goaway", "name": "Mike Schore"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/ed5f892dc6fa7fd53a2fe3d720ac9d9b6001cc25", "committedDate": "2020-10-01T22:01:07Z", "message": "filters: fix out of bound access to result status\n\nSigned-off-by: Mike Schore <mike.schore@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bfca243f895fb5c888cd0f3b2a8652339007c0a0", "author": {"user": {"login": "goaway", "name": "Mike Schore"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/bfca243f895fb5c888cd0f3b2a8652339007c0a0", "committedDate": "2020-10-01T22:14:38Z", "message": "missing brace\n\nSigned-off-by: Mike Schore <mike.schore@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwNzU0OTk5", "url": "https://github.com/envoyproxy/envoy-mobile/pull/1127#pullrequestreview-500754999", "createdAt": "2020-10-01T22:16:36Z", "commit": {"oid": "bfca243f895fb5c888cd0f3b2a8652339007c0a0"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQyMjoxNjozN1rOHbcblw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQyMjoxNjo0OFrOHbcb0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUzOTQxNQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              envoy_headers *pending_headers = toNativeHeadersPtr(result.count == 3 ? result[2] : nil);\n          \n          \n            \n              envoy_headers *pending_headers = toNativeHeadersPtr(result.count == 3 ? result[2] : NULL);", "url": "https://github.com/envoyproxy/envoy-mobile/pull/1127#discussion_r498539415", "createdAt": "2020-10-01T22:16:37Z", "author": {"login": "rebello95"}, "path": "library/objective-c/EnvoyEngineImpl.m", "diffHunk": "@@ -83,9 +86,12 @@ static envoy_filter_data_status ios_http_filter_on_response_data(envoy_data data\n \n   NSData *platformData = to_ios_data(data);\n   NSArray *result = filter.onResponseData(platformData, end_stream);\n+  // Result is typically a pair of status and entity, but uniquely in the case of\n+  // ResumeIteration it will (optionally) contain additional pending elements.\n+  envoy_headers *pending_headers = toNativeHeadersPtr(result.count == 3 ? result[2] : nil);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bfca243f895fb5c888cd0f3b2a8652339007c0a0"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUzOTQ3NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              envoy_headers *pending_headers = toNativeHeadersPtr(result.count == 3 ? result[2] : nil);\n          \n          \n            \n              envoy_headers *pending_headers = toNativeHeadersPtr(result.count == 3 ? result[2] : NULL);", "url": "https://github.com/envoyproxy/envoy-mobile/pull/1127#discussion_r498539474", "createdAt": "2020-10-01T22:16:48Z", "author": {"login": "rebello95"}, "path": "library/objective-c/EnvoyEngineImpl.m", "diffHunk": "@@ -67,9 +67,12 @@ static envoy_filter_data_status ios_http_filter_on_request_data(envoy_data data,\n \n   NSData *platformData = to_ios_data(data);\n   NSArray *result = filter.onRequestData(platformData, end_stream);\n+  // Result is typically a pair of status and entity, but uniquely in the case of\n+  // ResumeIteration it will (optionally) contain additional pending elements.\n+  envoy_headers *pending_headers = toNativeHeadersPtr(result.count == 3 ? result[2] : nil);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bfca243f895fb5c888cd0f3b2a8652339007c0a0"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4061, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}