{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgxOTE5MjMx", "number": 714, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOVQxODo0MDozM1rODkCW4A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxNzozNTozMlrODkW5lQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5MTEzOTUyOnYy", "diffSide": "RIGHT", "path": "library/java/src/io/envoyproxy/envoymobile/engine/EnvoyConfiguration.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOVQxODo0MDozM1rOFwKcLQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxNzozNTowM1rOFwomQQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjA0NzAyMQ==", "bodyText": "I considered putting all of the dns settings into a struct (same on iOS), but ultimately decided to keep this flat for this change.\nI think if this lists keeps growing we need to first think about how we are going to manage config as it gets more unruly. But for now keeping it flat seemed the least intrusive change.", "url": "https://github.com/envoyproxy/envoy-mobile/pull/714#discussion_r386047021", "createdAt": "2020-02-29T18:40:33Z", "author": {"login": "junr03"}, "path": "library/java/src/io/envoyproxy/envoymobile/engine/EnvoyConfiguration.java", "diffHunk": "@@ -5,22 +5,29 @@\n   public final String statsDomain;\n   public final Integer connectTimeoutSeconds;\n   public final Integer dnsRefreshSeconds;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "54413b0ba7b33af3186d82cb48fe9514538472e9"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjU0MTEyMQ==", "bodyText": "sounds good", "url": "https://github.com/envoyproxy/envoy-mobile/pull/714#discussion_r386541121", "createdAt": "2020-03-02T17:35:03Z", "author": {"login": "rebello95"}, "path": "library/java/src/io/envoyproxy/envoymobile/engine/EnvoyConfiguration.java", "diffHunk": "@@ -5,22 +5,29 @@\n   public final String statsDomain;\n   public final Integer connectTimeoutSeconds;\n   public final Integer dnsRefreshSeconds;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjA0NzAyMQ=="}, "originalCommit": {"oid": "54413b0ba7b33af3186d82cb48fe9514538472e9"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5NDUwNDIwOnYy", "diffSide": "RIGHT", "path": "library/java/src/io/envoyproxy/envoymobile/engine/EnvoyConfiguration.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxNzozNToxMlrOFwomeA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxNzozNToxMlrOFwomeA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjU0MTE3Ng==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n               * @param statsDomain                  The domain to flush stats to.\n          \n          \n            \n               * @param statsDomain                  the domain to flush stats to.", "url": "https://github.com/envoyproxy/envoy-mobile/pull/714#discussion_r386541176", "createdAt": "2020-03-02T17:35:12Z", "author": {"login": "rebello95"}, "path": "library/java/src/io/envoyproxy/envoymobile/engine/EnvoyConfiguration.java", "diffHunk": "@@ -5,22 +5,29 @@\n   public final String statsDomain;\n   public final Integer connectTimeoutSeconds;\n   public final Integer dnsRefreshSeconds;\n+  public final Integer dnsFailureRefreshSecondsBase;\n+  public final Integer dnsFailureRefreshSecondsMax;\n   public final Integer statsFlushSeconds;\n \n   /**\n    * Create an EnvoyConfiguration with a user provided configuration values.\n    *\n-   * @param statsDomain           The domain to flush stats to.\n-   * @param connectTimeoutSeconds timeout for new network connections to hosts in\n-   *                              the cluster.\n-   * @param dnsRefreshSeconds     rate in seconds to refresh DNS.\n-   * @param statsFlushSeconds     interval at which to flush Envoy stats.\n+   * @param statsDomain                  The domain to flush stats to.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "95fd2c78ace3c598716cb0319da968ace999a2ae"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5NDUwNDk3OnYy", "diffSide": "RIGHT", "path": "library/java/test/io/envoyproxy/envoymobile/engine/EnvoyConfigurationTest.kt", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxNzozNToyNlrOFwom9A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxNzozNToyNlrOFwom9A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjU0MTMwMA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                assertThat(resolvedTemplate).contains(\"base_interval: 345\")\n          \n          \n            \n                assertThat(resolvedTemplate).contains(\"base_interval: 345s\")", "url": "https://github.com/envoyproxy/envoy-mobile/pull/714#discussion_r386541300", "createdAt": "2020-03-02T17:35:26Z", "author": {"login": "rebello95"}, "path": "library/java/test/io/envoyproxy/envoymobile/engine/EnvoyConfigurationTest.kt", "diffHunk": "@@ -18,20 +21,22 @@ class EnvoyConfigurationTest {\n \n   @Test\n   fun `resolving with default configuration resolves with values`() {\n-    val envoyConfiguration = EnvoyConfiguration(\"stats.foo.com\", 123, 234, 345)\n+    val envoyConfiguration = EnvoyConfiguration(\"stats.foo.com\", 123, 234, 345, 456, 567)\n \n     val resolvedTemplate = envoyConfiguration.resolveTemplate(TEST_CONFIG)\n     assertThat(resolvedTemplate).contains(\"stats_domain: stats.foo.com\")\n     assertThat(resolvedTemplate).contains(\"connect_timeout: 123s\")\n     assertThat(resolvedTemplate).contains(\"dns_refresh_rate: 234s\")\n-    assertThat(resolvedTemplate).contains(\"stats_flush_interval: 345s\")\n+    assertThat(resolvedTemplate).contains(\"base_interval: 345\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "95fd2c78ace3c598716cb0319da968ace999a2ae"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5NDUwNTE3OnYy", "diffSide": "RIGHT", "path": "library/java/test/io/envoyproxy/envoymobile/engine/EnvoyConfigurationTest.kt", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxNzozNTozMlrOFwonFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxNzozNTozMlrOFwonFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjU0MTMzNA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                assertThat(resolvedTemplate).contains(\"max_interval: 456\")\n          \n          \n            \n                assertThat(resolvedTemplate).contains(\"max_interval: 456s\")", "url": "https://github.com/envoyproxy/envoy-mobile/pull/714#discussion_r386541334", "createdAt": "2020-03-02T17:35:32Z", "author": {"login": "rebello95"}, "path": "library/java/test/io/envoyproxy/envoymobile/engine/EnvoyConfigurationTest.kt", "diffHunk": "@@ -18,20 +21,22 @@ class EnvoyConfigurationTest {\n \n   @Test\n   fun `resolving with default configuration resolves with values`() {\n-    val envoyConfiguration = EnvoyConfiguration(\"stats.foo.com\", 123, 234, 345)\n+    val envoyConfiguration = EnvoyConfiguration(\"stats.foo.com\", 123, 234, 345, 456, 567)\n \n     val resolvedTemplate = envoyConfiguration.resolveTemplate(TEST_CONFIG)\n     assertThat(resolvedTemplate).contains(\"stats_domain: stats.foo.com\")\n     assertThat(resolvedTemplate).contains(\"connect_timeout: 123s\")\n     assertThat(resolvedTemplate).contains(\"dns_refresh_rate: 234s\")\n-    assertThat(resolvedTemplate).contains(\"stats_flush_interval: 345s\")\n+    assertThat(resolvedTemplate).contains(\"base_interval: 345\")\n+    assertThat(resolvedTemplate).contains(\"max_interval: 456\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "95fd2c78ace3c598716cb0319da968ace999a2ae"}, "originalPosition": 23}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 863, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}