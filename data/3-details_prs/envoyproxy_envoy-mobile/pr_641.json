{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY2MDg1MjAx", "number": 641, "title": "ios: remove domain from engine configuration", "bodyText": "Description: Removes domain from Envoy engine configuration on iOS. Dynamic forwarding is now default, and so a proper :authority header is all that's needed.\nRisk Level: Low\nTesting: Pending\nSigned-off-by: Mike Schore mike.schore@gmail.com", "createdAt": "2020-01-22T22:02:11Z", "url": "https://github.com/envoyproxy/envoy-mobile/pull/641", "merged": true, "mergeCommit": {"oid": "17e6537025d80d159a0de13f81e7503e03a1200d"}, "closed": true, "closedAt": "2020-02-03T19:16:28Z", "author": {"login": "goaway"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb89JuagFqTM0NjkzNjM2MQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcAGnQ8AFqTM1MTg5MjkzNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2OTM2MzYx", "url": "https://github.com/envoyproxy/envoy-mobile/pull/641#pullrequestreview-346936361", "createdAt": "2020-01-22T22:05:13Z", "commit": {"oid": "2f0f16197a25216e3819e53d844415668a01a10d"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d2c824b434a1f1dfd7ebd24389996dae26d0ff07", "author": {"user": {"login": "goaway", "name": "Mike Schore"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/d2c824b434a1f1dfd7ebd24389996dae26d0ff07", "committedDate": "2020-01-31T16:34:31Z", "message": "ios: remove stream from engine configuration\n\nSigned-off-by: Mike Schore <mike.schore@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0cf0a28d5b285907b6fa36464108c104f81c4a0b", "author": {"user": {"login": "goaway", "name": "Mike Schore"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/0cf0a28d5b285907b6fa36464108c104f81c4a0b", "committedDate": "2020-01-31T16:34:31Z", "message": "swiftlint\n\nSigned-off-by: Mike Schore <mike.schore@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cbe7500253196bc424d9bd45aa6929484d756bd2", "author": {"user": {"login": "goaway", "name": "Mike Schore"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/cbe7500253196bc424d9bd45aa6929484d756bd2", "committedDate": "2020-01-31T16:34:31Z", "message": "fix swift tests\n\nSigned-off-by: Mike Schore <mike.schore@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2683bd0335dee1613915d5b0c4cc8355f04da4d0", "author": {"user": {"login": "goaway", "name": "Mike Schore"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/2683bd0335dee1613915d5b0c4cc8355f04da4d0", "committedDate": "2020-01-31T16:34:31Z", "message": "fix example apps\n\nSigned-off-by: Mike Schore <mike.schore@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fab3938fbe7dfe79bee1c873e001e75606b13265", "author": {"user": {"login": "goaway", "name": "Mike Schore"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/fab3938fbe7dfe79bee1c873e001e75606b13265", "committedDate": "2020-01-23T22:12:37Z", "message": "fix example apps\n\nSigned-off-by: Mike Schore <mike.schore@gmail.com>"}, "afterCommit": {"oid": "2683bd0335dee1613915d5b0c4cc8355f04da4d0", "author": {"user": {"login": "goaway", "name": "Mike Schore"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/2683bd0335dee1613915d5b0c4cc8355f04da4d0", "committedDate": "2020-01-31T16:34:31Z", "message": "fix example apps\n\nSigned-off-by: Mike Schore <mike.schore@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxNjc5MDQ1", "url": "https://github.com/envoyproxy/envoy-mobile/pull/641#pullrequestreview-351679045", "createdAt": "2020-01-31T18:04:24Z", "commit": {"oid": "2683bd0335dee1613915d5b0c4cc8355f04da4d0"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMVQxODowNDoyNFrOFkTYIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMVQxODowNjo0NlrOFkTbvg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzYxMDUyOA==", "bodyText": "do we want to protect at the core layer against sendHeaders calls that do not set an authority header?", "url": "https://github.com/envoyproxy/envoy-mobile/pull/641#discussion_r373610528", "createdAt": "2020-01-31T18:04:24Z", "author": {"login": "junr03"}, "path": "library/swift/test/EnvoyClientTests.swift", "diffHunk": "@@ -67,7 +67,7 @@ final class EnvoyClientTests: XCTestCase {\n       method: .get, scheme: \"https\", authority: \"www.envoyproxy.io\", path: \"/docs\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2683bd0335dee1613915d5b0c4cc8355f04da4d0"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzYxMTQ1NA==", "bodyText": "I think we have a templating bug. Which is that now we are not setting SNI in the template if we don't populate domain. Which actually brings the larger question of how we want to do that (and relatedly #630) for the dynamic proxy? I need to read the docs to see if that can be dynamic as well.", "url": "https://github.com/envoyproxy/envoy-mobile/pull/641#discussion_r373611454", "createdAt": "2020-01-31T18:06:46Z", "author": {"login": "junr03"}, "path": "library/objective-c/EnvoyEngine.h", "diffHunk": "@@ -143,11 +142,10 @@ typedef NSDictionary<NSString *, NSArray<NSString *> *> EnvoyHeaders;\n /**\n  Create a new instance of the configuration.\n  */\n-- (instancetype)initWithDomain:(NSString *)domain\n-                   statsDomain:(NSString *)statsDomain\n-         connectTimeoutSeconds:(UInt32)connectTimeoutSeconds\n-             dnsRefreshSeconds:(UInt32)dnsRefreshSeconds\n-             statsFlushSeconds:(UInt32)statsFlushSeconds;\n+- (instancetype)initWithStatsDomain:(NSString *)statsDomain", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2683bd0335dee1613915d5b0c4cc8355f04da4d0"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e0a0822bd343d5d236a101194770f65eb6b8ff16", "author": {"user": {"login": "goaway", "name": "Mike Schore"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/e0a0822bd343d5d236a101194770f65eb6b8ff16", "committedDate": "2020-02-01T16:15:50Z", "message": "remove sni key from config\n\nSigned-off-by: Mike Schore <mike.schore@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxODkyOTM2", "url": "https://github.com/envoyproxy/envoy-mobile/pull/641#pullrequestreview-351892936", "createdAt": "2020-02-01T16:48:24Z", "commit": {"oid": "e0a0822bd343d5d236a101194770f65eb6b8ff16"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4359, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}