{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQyNzYzOTM4", "number": 1216, "title": "test: set up objc unit tests", "bodyText": "Description: Adds requisite setup for objective-c unit tests, and a single example for EnvoyBridgeUtility. Fixes #1280\nRisk Level: Low\nTesting: Local and CI\nSigned-off-by: Mike Schore mike.schore@gmail.com", "createdAt": "2020-12-18T20:41:05Z", "url": "https://github.com/envoyproxy/envoy-mobile/pull/1216", "merged": true, "mergeCommit": {"oid": "52bcc2cc840917aab3b500c8530341667114eed3"}, "closed": true, "closedAt": "2021-05-14T05:20:08Z", "author": {"login": "goaway"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdne2s9gFqTU1NTgxODg1NQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABeWIx_dAFqTY1ODMzMDc3Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU1ODE4ODU1", "url": "https://github.com/envoyproxy/envoy-mobile/pull/1216#pullrequestreview-555818855", "createdAt": "2020-12-18T21:17:10Z", "commit": {"oid": "34782335a3d80d21555dda8f4312c1b7266a8de6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQyMToxNzoxMVrOIIy_DA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQyMToxNzoxMVrOIIy_DA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjA5NDg2MA==", "bodyText": "Guessing the reason this doesn't work is because you need an ios_unit_test like we have here: \n  \n    \n      envoy-mobile/bazel/swift_test.bzl\n    \n    \n        Lines 32 to 36\n      in\n      0774f4d\n    \n    \n    \n    \n\n        \n          \n           ios_unit_test( \n        \n\n        \n          \n               name = name, \n        \n\n        \n          \n               deps = [test_lib_name], \n        \n\n        \n          \n               minimum_os_version = \"11.0\", \n        \n\n        \n          \n           )", "url": "https://github.com/envoyproxy/envoy-mobile/pull/1216#discussion_r546094860", "createdAt": "2020-12-18T21:17:11Z", "author": {"login": "rebello95"}, "path": "library/objective-c/test/BUILD", "diffHunk": "@@ -0,0 +1,13 @@\n+load(\"@rules_cc//cc:defs.bzl\", \"objc_library\")\n+\n+licenses([\"notice\"])  # Apache 2\n+\n+objc_library(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34782335a3d80d21555dda8f4312c1b7266a8de6"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5a3e117fb4dbf6b8b03c4588ad3603b287cdec2a", "author": {"user": {"login": "goaway", "name": "Mike Schore"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/5a3e117fb4dbf6b8b03c4588ad3603b287cdec2a", "committedDate": "2021-05-05T09:02:57Z", "message": "test: set up objc unit tests\n\nSigned-off-by: Mike Schore <mike.schore@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c987c39098e110caff8f41728bc8ea0c758e017b", "author": {"user": {"login": "goaway", "name": "Mike Schore"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/c987c39098e110caff8f41728bc8ea0c758e017b", "committedDate": "2021-05-05T11:31:59Z", "message": "tweak build settings, add passing test\n\nSigned-off-by: Mike Schore <mike.schore@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "34782335a3d80d21555dda8f4312c1b7266a8de6", "author": {"user": {"login": "goaway", "name": "Mike Schore"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/34782335a3d80d21555dda8f4312c1b7266a8de6", "committedDate": "2020-12-18T20:40:21Z", "message": "test: set up objc unit tests\n\nSigned-off-by: Mike Schore <mike.schore@gmail.com>"}, "afterCommit": {"oid": "c987c39098e110caff8f41728bc8ea0c758e017b", "author": {"user": {"login": "goaway", "name": "Mike Schore"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/c987c39098e110caff8f41728bc8ea0c758e017b", "committedDate": "2021-05-05T11:31:59Z", "message": "tweak build settings, add passing test\n\nSigned-off-by: Mike Schore <mike.schore@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "07be70c3d994996e8c263e0c0a46887694b93f0d", "author": {"user": {"login": "goaway", "name": "Mike Schore"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/07be70c3d994996e8c263e0c0a46887694b93f0d", "committedDate": "2021-05-12T10:07:07Z", "message": "fix format\n\nSigned-off-by: Mike Schore <mike.schore@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjU4Mjc3Nzkw", "url": "https://github.com/envoyproxy/envoy-mobile/pull/1216#pullrequestreview-658277790", "createdAt": "2021-05-12T19:03:19Z", "commit": {"oid": "07be70c3d994996e8c263e0c0a46887694b93f0d"}, "state": "DISMISSED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNS0xMlQxOTowMzoxOVrOJaFCIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNS0xMlQxOTowMzo1MFrOJaFDcQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzMTMyNTIxNg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              XCTAssertTrue(memcmp(nativeData.bytes, testData.bytes, 3) == 0);\n          \n          \n            \n              XCTAssertEqual(memcmp(nativeData.bytes, testData.bytes, 3), 0);", "url": "https://github.com/envoyproxy/envoy-mobile/pull/1216#discussion_r631325216", "createdAt": "2021-05-12T19:03:19Z", "author": {"login": "rebello95"}, "path": "test/objective-c/EnvoyBridgeUtilityTest.m", "diffHunk": "@@ -0,0 +1,29 @@\n+#import <XCTest/XCTest.h>\n+\n+typedef NSDictionary<NSString *, NSArray<NSString *> *> EnvoyHeaders;\n+\n+typedef NSDictionary<NSString *, NSString *> EnvoyTags;\n+\n+#import \"library/objective-c/EnvoyBridgeUtility.h\"\n+\n+@interface EnvoyBridgeUtilityTest : XCTestCase\n+@end\n+\n+@implementation EnvoyBridgeUtilityTest\n+\n+- (void)setUp {\n+  [super setUp];\n+}\n+\n+- (void)tearDown {\n+  [super tearDown];\n+}\n+\n+- (void)testToNativeData {\n+  NSString *testString = @\"abc\";\n+  NSData *testData = [testString dataUsingEncoding:NSUTF8StringEncoding];\n+  envoy_data nativeData = toNativeData(testData);\n+  XCTAssertTrue(memcmp(nativeData.bytes, testData.bytes, 3) == 0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "07be70c3d994996e8c263e0c0a46887694b93f0d"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzMTMyNTM1OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            - (void)setUp {\n          \n          \n            \n              [super setUp];\n          \n          \n            \n            }\n          \n          \n            \n            \n          \n          \n            \n            - (void)tearDown {\n          \n          \n            \n              [super tearDown];\n          \n          \n            \n            }", "url": "https://github.com/envoyproxy/envoy-mobile/pull/1216#discussion_r631325358", "createdAt": "2021-05-12T19:03:33Z", "author": {"login": "rebello95"}, "path": "test/objective-c/EnvoyBridgeUtilityTest.m", "diffHunk": "@@ -0,0 +1,29 @@\n+#import <XCTest/XCTest.h>\n+\n+typedef NSDictionary<NSString *, NSArray<NSString *> *> EnvoyHeaders;\n+\n+typedef NSDictionary<NSString *, NSString *> EnvoyTags;\n+\n+#import \"library/objective-c/EnvoyBridgeUtility.h\"\n+\n+@interface EnvoyBridgeUtilityTest : XCTestCase\n+@end\n+\n+@implementation EnvoyBridgeUtilityTest\n+\n+- (void)setUp {\n+  [super setUp];\n+}\n+\n+- (void)tearDown {\n+  [super tearDown];\n+}\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "07be70c3d994996e8c263e0c0a46887694b93f0d"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzMTMyNTU1Mw==", "bodyText": "Are these necessary?", "url": "https://github.com/envoyproxy/envoy-mobile/pull/1216#discussion_r631325553", "createdAt": "2021-05-12T19:03:50Z", "author": {"login": "rebello95"}, "path": "test/objective-c/EnvoyBridgeUtilityTest.m", "diffHunk": "@@ -0,0 +1,29 @@\n+#import <XCTest/XCTest.h>\n+\n+typedef NSDictionary<NSString *, NSArray<NSString *> *> EnvoyHeaders;\n+\n+typedef NSDictionary<NSString *, NSString *> EnvoyTags;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "07be70c3d994996e8c263e0c0a46887694b93f0d"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bf5252ad75558b8f1de8659d999850746663e919", "author": {"user": {"login": "goaway", "name": "Mike Schore"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/bf5252ad75558b8f1de8659d999850746663e919", "committedDate": "2021-05-12T19:16:14Z", "message": "updates for comments\n\nSigned-off-by: Mike Schore <mike.schore@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjU4MzMwNzcz", "url": "https://github.com/envoyproxy/envoy-mobile/pull/1216#pullrequestreview-658330773", "createdAt": "2021-05-12T20:08:34Z", "commit": {"oid": "bf5252ad75558b8f1de8659d999850746663e919"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3959, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}