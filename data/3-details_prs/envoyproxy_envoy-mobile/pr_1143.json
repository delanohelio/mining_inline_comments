{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA3NDM1MDE0", "number": 1143, "title": "java: add Android and Java async filter callback support", "bodyText": "Description: Adds support for asynchronous filter callbacks to be set and called on Android and Java filters.\nRisk Level: Moderate\nTesting: Local and CI\nSigned-off-by: Mike Schore mike.schore@gmail.com", "createdAt": "2020-10-21T10:40:38Z", "url": "https://github.com/envoyproxy/envoy-mobile/pull/1143", "merged": true, "mergeCommit": {"oid": "01461c4365e1629d381f1c892119b24578acbdca"}, "closed": true, "closedAt": "2020-10-22T23:16:30Z", "author": {"login": "goaway"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdU_9lCABqjM5MDg0NzAxMTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdVIswJAFqTUxNTEyNjMyOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e9a6acb41997a75861dc39ad77a22d4535036e6d", "author": {"user": {"login": "goaway", "name": "Mike Schore"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/e9a6acb41997a75861dc39ad77a22d4535036e6d", "committedDate": "2020-10-22T09:48:51Z", "message": "collected state\n\nSigned-off-by: Mike Schore <mike.schore@gmail.com>"}, "afterCommit": {"oid": "8fd72cc02ae82dc10f8a4c7a5e0b4d4a6fbbd9b6", "author": {"user": {"login": "goaway", "name": "Mike Schore"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/8fd72cc02ae82dc10f8a4c7a5e0b4d4a6fbbd9b6", "committedDate": "2020-10-22T11:06:45Z", "message": "wiring\n\nSigned-off-by: Mike Schore <mike.schore@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8fd72cc02ae82dc10f8a4c7a5e0b4d4a6fbbd9b6", "author": {"user": {"login": "goaway", "name": "Mike Schore"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/8fd72cc02ae82dc10f8a4c7a5e0b4d4a6fbbd9b6", "committedDate": "2020-10-22T11:06:45Z", "message": "wiring\n\nSigned-off-by: Mike Schore <mike.schore@gmail.com>"}, "afterCommit": {"oid": "34d29fa9905b18c435c8d5b281492f846d676dd3", "author": {"user": {"login": "goaway", "name": "Mike Schore"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/34d29fa9905b18c435c8d5b281492f846d676dd3", "committedDate": "2020-10-22T12:06:16Z", "message": "java: add Android/Java async filter callback support\n\nSigned-off-by: Mike Schore <mike.schore@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a6217188749d6335dc23b57b9f4fd4274525944d", "author": {"user": {"login": "goaway", "name": "Mike Schore"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/a6217188749d6335dc23b57b9f4fd4274525944d", "committedDate": "2020-10-22T12:13:50Z", "message": "java: add Android/Java async filter callback support\n\nSigned-off-by: Mike Schore <mike.schore@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "42d5a6d3e82c14a7fd88d0eb9857830e31600596", "author": {"user": {"login": "goaway", "name": "Mike Schore"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/42d5a6d3e82c14a7fd88d0eb9857830e31600596", "committedDate": "2020-10-22T12:13:50Z", "message": "format\n\nSigned-off-by: Mike Schore <mike.schore@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bfbdde3a7ad585155b21e9a48a8d0828842f3df2", "author": {"user": {"login": "goaway", "name": "Mike Schore"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/bfbdde3a7ad585155b21e9a48a8d0828842f3df2", "committedDate": "2020-10-22T12:13:25Z", "message": "format\n\nSigned-off-by: Mike Schore <mike.schore@gmail.com>"}, "afterCommit": {"oid": "42d5a6d3e82c14a7fd88d0eb9857830e31600596", "author": {"user": {"login": "goaway", "name": "Mike Schore"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/42d5a6d3e82c14a7fd88d0eb9857830e31600596", "committedDate": "2020-10-22T12:13:50Z", "message": "format\n\nSigned-off-by: Mike Schore <mike.schore@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "68cbf96f188ef90fd45a3f0421d7fb757d52db6d", "author": {"user": {"login": "goaway", "name": "Mike Schore"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/68cbf96f188ef90fd45a3f0421d7fb757d52db6d", "committedDate": "2020-10-22T12:15:50Z", "message": "kotlin format\n\nSigned-off-by: Mike Schore <mike.schore@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE0OTI1NTE4", "url": "https://github.com/envoyproxy/envoy-mobile/pull/1143#pullrequestreview-514925518", "createdAt": "2020-10-22T16:44:51Z", "commit": {"oid": "68cbf96f188ef90fd45a3f0421d7fb757d52db6d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQxNjo0NDo1MVrOHmqy1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQxNjo0NDo1MVrOHmqy1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDMwOTA3OA==", "bodyText": "I might have my rules mixed up but do we need to delete this local ref here?", "url": "https://github.com/envoyproxy/envoy-mobile/pull/1143#discussion_r510309078", "createdAt": "2020-10-22T16:44:51Z", "author": {"login": "buildbreaker"}, "path": "library/common/jni/jni_interface.cc", "diffHunk": "@@ -362,6 +363,122 @@ static envoy_filter_trailers_status jvm_http_filter_on_response_trailers(envoy_h\n                                         /*trailers*/ native_headers};\n }\n \n+static void jvm_http_filter_set_request_callbacks(envoy_http_filter_callbacks callbacks,\n+                                                  const void* context) {\n+\n+  __android_log_write(ANDROID_LOG_VERBOSE, \"[Envoy]\", \"jvm_http_filter_set_request_callbacks\");\n+\n+  JNIEnv* env = get_env();\n+  jobject j_context = static_cast<jobject>(const_cast<void*>(context));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "68cbf96f188ef90fd45a3f0421d7fb757d52db6d"}, "originalPosition": 41}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9584b4efe41c25c1612823fcfeda750b4eae243f", "author": {"user": {"login": "goaway", "name": "Mike Schore"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/9584b4efe41c25c1612823fcfeda750b4eae243f", "committedDate": "2020-10-22T19:22:35Z", "message": "add missing ref cleanup\n\nSigned-off-by: Mike Schore <mike.schore@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1MTI2MzI5", "url": "https://github.com/envoyproxy/envoy-mobile/pull/1143#pullrequestreview-515126329", "createdAt": "2020-10-22T21:17:46Z", "commit": {"oid": "9584b4efe41c25c1612823fcfeda750b4eae243f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4073, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}