{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMxMjI1Mzg4", "number": 1194, "title": "ios: allow engine to be run with custom yaml template", "bodyText": "Description: Custom yaml will be treated as a configuration template, rather than a fixed set of configuration. It's still possible to pass fixed configuration, simply by not including any tokens for interpolation. This usage was already present and appeared supported by the API (e.g. see HttpBridgeTests), but simply wouldn't work, without any indication that it wouldn't.\nRisk Level: Low\nTesting: Local & CI\nSigned-off-by: Mike Schore mike.schore@gmail.com", "createdAt": "2020-12-02T18:58:36Z", "url": "https://github.com/envoyproxy/envoy-mobile/pull/1194", "merged": true, "mergeCommit": {"oid": "ae0c9c5af02a56493f3ad2311b686aa41a573055"}, "closed": true, "closedAt": "2020-12-08T12:15:00Z", "author": {"login": "goaway"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdii3ksABqjQwNjczNzU0ODI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdj86GcgFqTU0NjU3NDU4OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4bf24aab94fa924ad59a637af99359bdbf9dd5e8", "author": {"user": {"login": "goaway", "name": "Mike Schore"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/4bf24aab94fa924ad59a637af99359bdbf9dd5e8", "committedDate": "2020-12-02T18:57:53Z", "message": "ios: allow engine to be run with custom yaml template\n\nSigned-off-by: Mike Schore <mike.schore@gmail.com>"}, "afterCommit": {"oid": "111580518dfcd524419fe7e073cf5bc6398e62f3", "author": {"user": {"login": "goaway", "name": "Mike Schore"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/111580518dfcd524419fe7e073cf5bc6398e62f3", "committedDate": "2020-12-03T13:07:37Z", "message": "ios: allow engine to be run with custom yaml template\n\nSigned-off-by: Mike Schore <mike.schore@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "111580518dfcd524419fe7e073cf5bc6398e62f3", "author": {"user": {"login": "goaway", "name": "Mike Schore"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/111580518dfcd524419fe7e073cf5bc6398e62f3", "committedDate": "2020-12-03T13:07:37Z", "message": "ios: allow engine to be run with custom yaml template\n\nSigned-off-by: Mike Schore <mike.schore@gmail.com>"}, "afterCommit": {"oid": "e83de3dd37eaf1d6ba19173ab71a03412716d5c8", "author": {"user": {"login": "goaway", "name": "Mike Schore"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/e83de3dd37eaf1d6ba19173ab71a03412716d5c8", "committedDate": "2020-12-03T13:27:14Z", "message": "ios: allow engine to be run with custom yaml template\n\nSigned-off-by: Mike Schore <mike.schore@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "40843788bd99955f7d66d264996686f1b1a95bc1", "author": {"user": {"login": "goaway", "name": "Mike Schore"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/40843788bd99955f7d66d264996686f1b1a95bc1", "committedDate": "2020-12-04T18:28:32Z", "message": "ios: allow engine to be run with custom yaml template\n\nSigned-off-by: Mike Schore <mike.schore@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8cc3bef88d62e95aa3fbb627ae71bda626ebae5b", "author": {"user": {"login": "goaway", "name": "Mike Schore"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/8cc3bef88d62e95aa3fbb627ae71bda626ebae5b", "committedDate": "2020-12-04T18:28:32Z", "message": "swiftlint\n\nSigned-off-by: Mike Schore <mike.schore@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "730320ecbdc819b949d783af97e922f51b089b07", "author": {"user": {"login": "goaway", "name": "Mike Schore"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/730320ecbdc819b949d783af97e922f51b089b07", "committedDate": "2020-12-04T18:28:32Z", "message": "fix test\n\nSigned-off-by: Mike Schore <mike.schore@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4af94fb2f6185e17b00e895d808cab59e584ddd3", "author": {"user": {"login": "goaway", "name": "Mike Schore"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/4af94fb2f6185e17b00e895d808cab59e584ddd3", "committedDate": "2020-12-04T12:55:18Z", "message": "fix test\n\nSigned-off-by: Mike Schore <mike.schore@gmail.com>"}, "afterCommit": {"oid": "730320ecbdc819b949d783af97e922f51b089b07", "author": {"user": {"login": "goaway", "name": "Mike Schore"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/730320ecbdc819b949d783af97e922f51b089b07", "committedDate": "2020-12-04T18:28:32Z", "message": "fix test\n\nSigned-off-by: Mike Schore <mike.schore@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4b0c1e7c5b56f14093609a41a612b140ae977c64", "author": {"user": {"login": "goaway", "name": "Mike Schore"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/4b0c1e7c5b56f14093609a41a612b140ae977c64", "committedDate": "2020-12-07T12:27:07Z", "message": "fix from rebase\n\nSigned-off-by: Mike Schore <mike.schore@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2NTQwNzE3", "url": "https://github.com/envoyproxy/envoy-mobile/pull/1194#pullrequestreview-546540717", "createdAt": "2020-12-07T21:13:06Z", "commit": {"oid": "4b0c1e7c5b56f14093609a41a612b140ae977c64"}, "state": "DISMISSED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QyMToxMzowNlrOIA68fg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QyMToxNDozNVrOIA6_zg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzgzNjY3MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             @param template The configuration template with which to start Envoy.\n          \n          \n            \n             @param yaml The configuration template with which to start Envoy.", "url": "https://github.com/envoyproxy/envoy-mobile/pull/1194#discussion_r537836670", "createdAt": "2020-12-07T21:13:06Z", "author": {"login": "rebello95"}, "path": "library/objective-c/EnvoyEngine.h", "diffHunk": "@@ -302,15 +302,17 @@ extern const int kEnvoyFailure;\n /**\n  Run the Envoy engine with the provided yaml string and log level.\n \n- @param configYAML The configuration yaml with which to start Envoy.\n+ @param template The configuration template with which to start Envoy.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4b0c1e7c5b56f14093609a41a612b140ae977c64"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzgzNzIxNw==", "bodyText": "the docs here are outdated now", "url": "https://github.com/envoyproxy/envoy-mobile/pull/1194#discussion_r537837217", "createdAt": "2020-12-07T21:14:04Z", "author": {"login": "rebello95"}, "path": "library/swift/src/EngineImpl.swift", "diffHunk": "@@ -52,10 +52,10 @@ final class EngineImpl: NSObject {\n   /// - parameter engine:          The underlying engine to use for starting Envoy.\n   /// - parameter onEngineRunning: Closure called when the engine finishes its async\n   ///                              initialization/startup.\n-  convenience init(configYAML: String, logLevel: LogLevel = .info, engine: EnvoyEngine,\n-                   onEngineRunning: (() -> Void)?)\n+  convenience init(yaml: String, config: EnvoyConfiguration, logLevel: LogLevel = .info,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4b0c1e7c5b56f14093609a41a612b140ae977c64"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzgzNzUxOA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                case custom(String, EnvoyConfiguration)\n          \n          \n            \n                case standard(EnvoyConfiguration)\n          \n          \n            \n                case custom(yaml: String, config: EnvoyConfiguration)\n          \n          \n            \n                case standard(config: EnvoyConfiguration)\n          \n      \n    \n    \n  \n\nIt might be nice to name these now since String is ambiguous, but not a big deal since this is private", "url": "https://github.com/envoyproxy/envoy-mobile/pull/1194#discussion_r537837518", "createdAt": "2020-12-07T21:14:35Z", "author": {"login": "rebello95"}, "path": "library/swift/src/EngineImpl.swift", "diffHunk": "@@ -9,8 +9,8 @@ final class EngineImpl: NSObject {\n   private let streamClientImpl: StreamClientImpl\n \n   private enum ConfigurationType {\n-    case yaml(String)\n-    case typed(EnvoyConfiguration)\n+    case custom(String, EnvoyConfiguration)\n+    case standard(EnvoyConfiguration)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4b0c1e7c5b56f14093609a41a612b140ae977c64"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "46a113cd84f8d9ff3877436cf5cdba95c43f34a2", "author": {"user": {"login": "goaway", "name": "Mike Schore"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/46a113cd84f8d9ff3877436cf5cdba95c43f34a2", "committedDate": "2020-12-07T21:35:04Z", "message": "feedback\n\nSigned-off-by: Mike Schore <mike.schore@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2NTc0NTg4", "url": "https://github.com/envoyproxy/envoy-mobile/pull/1194#pullrequestreview-546574588", "createdAt": "2020-12-07T22:02:22Z", "commit": {"oid": "46a113cd84f8d9ff3877436cf5cdba95c43f34a2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3926, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}