{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg3OTc5NjQ1", "number": 750, "title": "ci: update mac ci setup", "bodyText": "Description: move mac ci setup to use envoy's script. I don't see much of a point in keeping a separate script here. For instance, envoyproxy/envoy#10357 updated to fix bazel after CI images broke. Instead of keeping up-to-date we can piggy back on efforts in upstream Envoy. Obviously, if diverging needs evolve we might need a second script in Envoy Mobile that calls the Envoy script, and does additional work.\nRisk Level: low, CI will let us know if I screwed up.\nTesting: CI\nSigned-off-by: Jose Nino jnino@lyft.com", "createdAt": "2020-03-13T20:57:01Z", "url": "https://github.com/envoyproxy/envoy-mobile/pull/750", "merged": true, "mergeCommit": {"oid": "030c45fc4b4a3a4ab820164a4303a4977ac399e1"}, "closed": true, "closedAt": "2020-03-13T21:43:18Z", "author": {"login": "junr03"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcNWsRdAH2gAyMzg3OTc5NjQ1OmI0MGQ4ODQzY2M5YjJkMmQ3ZTI3ZTNjYjNhNjhkNjIyMzM5YjdhN2U=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcNW8UzAFqTM3NDYyMTg5OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b40d8843cc9b2d2d7e27e3cb3a68d622339b7a7e", "author": {"user": {"login": "junr03", "name": "Jose Ulises Nino Rivera"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/b40d8843cc9b2d2d7e27e3cb3a68d622339b7a7e", "committedDate": "2020-03-13T20:53:22Z", "message": "ci: update mac ci setup\n\nSigned-off-by: Jose Nino <jnino@lyft.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7c81a4f967f2ab9f19a28e6ac858e9dc4aa64252", "author": {"user": {"login": "junr03", "name": "Jose Ulises Nino Rivera"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/7c81a4f967f2ab9f19a28e6ac858e9dc4aa64252", "committedDate": "2020-03-13T20:53:50Z", "message": "update envoy\n\nSigned-off-by: Jose Nino <jnino@lyft.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0NjE3NDIz", "url": "https://github.com/envoyproxy/envoy-mobile/pull/750#pullrequestreview-374617423", "createdAt": "2020-03-13T21:01:08Z", "commit": {"oid": "7c81a4f967f2ab9f19a28e6ac858e9dc4aa64252"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0NjE3NjEw", "url": "https://github.com/envoyproxy/envoy-mobile/pull/750#pullrequestreview-374617610", "createdAt": "2020-03-13T21:01:30Z", "commit": {"oid": "7c81a4f967f2ab9f19a28e6ac858e9dc4aa64252"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QyMTowMTozMVrOF2SuEA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QyMTowMTozMVrOF2SuEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjQ3NDEyOA==", "bodyText": "Actually this will probably break CI", "url": "https://github.com/envoyproxy/envoy-mobile/pull/750#discussion_r392474128", "createdAt": "2020-03-13T21:01:31Z", "author": {"login": "rebello95"}, "path": "ci/mac_ci_setup.sh", "diffHunk": "@@ -1,30 +0,0 @@\n-#!/bin/bash\n-\n-# Installs the dependencies required for a macOS build.\n-\n-function is_installed {\n-    brew ls --versions \"$1\" >/dev/null\n-}\n-\n-function install {\n-    echo \"Installing $1\"\n-    if ! brew install \"$1\"\n-    then\n-        echo \"Failed to install $1\"\n-        exit 1\n-    fi\n-}\n-\n-if ! brew update; then\n-    echo \"Failed to update homebrew\"\n-    exit 1\n-fi\n-\n-DEPS=\"automake cmake coreutils go libtool wget ninja gpg bazelbuild/tap/bazelisk\"\n-for DEP in ${DEPS}\n-do\n-    is_installed \"${DEP}\" || install \"${DEP}\"\n-done\n-\n-# https://github.com/Microsoft/azure-pipelines-image-generation/blob/master/images/macos/macos-10.14-Readme.md#xcode\n-sudo xcode-select --switch /Applications/Xcode_11.3.app", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7c81a4f967f2ab9f19a28e6ac858e9dc4aa64252"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0NjIxODk5", "url": "https://github.com/envoyproxy/envoy-mobile/pull/750#pullrequestreview-374621899", "createdAt": "2020-03-13T21:10:54Z", "commit": {"oid": "7c81a4f967f2ab9f19a28e6ac858e9dc4aa64252"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4312, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}