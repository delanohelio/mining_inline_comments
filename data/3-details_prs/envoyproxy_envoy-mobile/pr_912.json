{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM0ODk2NzU3", "number": 912, "title": "third-party build: update targets to allow extension registry overrides by a third-party build system", "bodyText": "Description: this PR moves the extension registry files out to top-level directories with their own Bazel workspaces. This allows us to declare it as local_repository. Once treated as a external repository, a third-party build system (i.e, a consumer of envoy-mobile interested in building their own library with private extensions) is able to do so using local_repository declarations in their own repo.\nRisk Level: low nothing changes for the project. However, the ergonomics for consumers to extend oss envoy mobile are being created here so we should make sure it is easy to do so.\nTesting: local build with a third party filter.\nDocs Changes: added docs\nRelease Notes: I propose we bump v0.3.1 when this override system lands.\nSigned-off-by: Jose Nino jnino@lyft.com", "createdAt": "2020-06-16T00:14:20Z", "url": "https://github.com/envoyproxy/envoy-mobile/pull/912", "merged": true, "mergeCommit": {"oid": "b6d8a5b12924a67957afa352a889a41e1cbdb739"}, "closed": true, "closedAt": "2020-06-24T18:17:08Z", "author": {"login": "junr03"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcrp0jSAH2gAyNDM0ODk2NzU3OjJkMjkzYzhhYmNhY2IwOTQ5OTIwMzc4MGY2MzM1MzY4YTRiNDEwNTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcuMg81gFqTQzNjE3ODY0OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2d293c8abcacb09499203780f6335368a4b41051", "author": {"user": {"login": "junr03", "name": "Jose Ulises Nino Rivera"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/2d293c8abcacb09499203780f6335368a4b41051", "committedDate": "2020-06-16T00:08:20Z", "message": "third-party build: update targets to allow configuration and extension registry overrides by a third-party build system\n\nSigned-off-by: Jose Nino <jnino@lyft.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxMDc1NTky", "url": "https://github.com/envoyproxy/envoy-mobile/pull/912#pullrequestreview-431075592", "createdAt": "2020-06-16T00:16:04Z", "commit": {"oid": "2d293c8abcacb09499203780f6335368a4b41051"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwMDoxNjowNFrOGkG6EA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwMDoxNjowNFrOGkG6EA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDUxNTA4OA==", "bodyText": "right now I have created just a single extension registry, but my other idea was to perhaps have three extension registries:\n\nextensions declared in envoy\nextensions declared in envoy-mobile\nextensions declared in envoy-mobile private\n\nThis way if a consumer is not interested in overriding 1, and 2, they don't need to.", "url": "https://github.com/envoyproxy/envoy-mobile/pull/912#discussion_r440515088", "createdAt": "2020-06-16T00:16:04Z", "author": {"login": "junr03"}, "path": "WORKSPACE", "diffHunk": "@@ -13,6 +13,16 @@ local_repository(\n     path = \"envoy_build_config\",\n )\n \n+local_repository(\n+    name = \"envoy_mobile_bootstrap_config\",\n+    path = \"envoy_mobile_bootstrap_config\",\n+)\n+\n+local_repository(\n+    name = \"extension_registry\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2d293c8abcacb09499203780f6335368a4b41051"}, "originalPosition": 10}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxMDc3OTg0", "url": "https://github.com/envoyproxy/envoy-mobile/pull/912#pullrequestreview-431077984", "createdAt": "2020-06-16T00:23:25Z", "commit": {"oid": "2d293c8abcacb09499203780f6335368a4b41051"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwMDoyMzoyNVrOGkHCOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwMDoyMzoyNVrOGkHCOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDUxNzE3OA==", "bodyText": "Is this deliberate?", "url": "https://github.com/envoyproxy/envoy-mobile/pull/912#discussion_r440517178", "createdAt": "2020-06-16T00:23:25Z", "author": {"login": "rebello95"}, "path": "envoy_mobile_bootstrap_config/config_template.cc", "diffHunk": "@@ -77,6 +77,7 @@ const char* config_template = R\"(\n               inline_string: |\n )\"\n #include \"certificates.inc\"\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2d293c8abcacb09499203780f6335368a4b41051"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ae78fca15e6fc12da535ffa0d7545959ae1a59b", "author": {"user": {"login": "junr03", "name": "Jose Ulises Nino Rivera"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/3ae78fca15e6fc12da535ffa0d7545959ae1a59b", "committedDate": "2020-06-16T16:25:30Z", "message": "comments\n\nSigned-off-by: Jose Nino <jnino@lyft.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxNjg4MzY5", "url": "https://github.com/envoyproxy/envoy-mobile/pull/912#pullrequestreview-431688369", "createdAt": "2020-06-16T16:30:38Z", "commit": {"oid": "3ae78fca15e6fc12da535ffa0d7545959ae1a59b"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxNzY4NDk0", "url": "https://github.com/envoyproxy/envoy-mobile/pull/912#pullrequestreview-431768494", "createdAt": "2020-06-16T18:11:29Z", "commit": {"oid": "3ae78fca15e6fc12da535ffa0d7545959ae1a59b"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "40bf7d792b81ded9929ae533d8dcb09f44a7ebc1", "author": {"user": {"login": "junr03", "name": "Jose Ulises Nino Rivera"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/40bf7d792b81ded9929ae533d8dcb09f44a7ebc1", "committedDate": "2020-06-17T22:13:01Z", "message": "update + docs\n\nSigned-off-by: Jose Nino <jnino@lyft.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef7d1de7fa0aa4aaee9071b515ba858a822de21d", "author": {"user": {"login": "junr03", "name": "Jose Ulises Nino Rivera"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/ef7d1de7fa0aa4aaee9071b515ba858a822de21d", "committedDate": "2020-06-17T22:20:40Z", "message": "fmt\n\nSigned-off-by: Jose Nino <jnino@lyft.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d0306b7ce0c1ee9ed794f6335fb3f2f3764983c4", "author": {"user": {"login": "junr03", "name": "Jose Ulises Nino Rivera"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/d0306b7ce0c1ee9ed794f6335fb3f2f3764983c4", "committedDate": "2020-06-17T22:28:02Z", "message": "fmt\n\nSigned-off-by: Jose Nino <jnino@lyft.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8b9e60fb6cb4b7a6c443e4c149b2ede0685b09f9", "author": {"user": {"login": "junr03", "name": "Jose Ulises Nino Rivera"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/8b9e60fb6cb4b7a6c443e4c149b2ede0685b09f9", "committedDate": "2020-06-22T17:36:37Z", "message": "remove config\n\nSigned-off-by: Jose Nino <jnino@lyft.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c37d9299bfda5238ae12d20de4d1e862636954e4", "author": {"user": {"login": "junr03", "name": "Jose Ulises Nino Rivera"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/c37d9299bfda5238ae12d20de4d1e862636954e4", "committedDate": "2020-06-22T17:37:24Z", "message": "Merge branch 'master' into extension-build-system\n\nSigned-off-by: Jose Nino <jnino@lyft.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2MDI1Mjc1", "url": "https://github.com/envoyproxy/envoy-mobile/pull/912#pullrequestreview-436025275", "createdAt": "2020-06-23T17:57:44Z", "commit": {"oid": "c37d9299bfda5238ae12d20de4d1e862636954e4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxNzo1Nzo0NFrOGn0dvQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxNzo1Nzo0NFrOGn0dvQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDQwNzIyOQ==", "bodyText": "would \"extension_regsitry\" be clearer?", "url": "https://github.com/envoyproxy/envoy-mobile/pull/912#discussion_r444407229", "createdAt": "2020-06-23T17:57:44Z", "author": {"login": "goaway"}, "path": "envoy_build_config/BUILD", "diffHunk": "@@ -1 +1,26 @@\n+load(\"@envoy//bazel:envoy_build_system.bzl\", \"envoy_cc_library\", \"envoy_package\")\n+\n licenses([\"notice\"])  # Apache 2\n+\n+envoy_package()\n+\n+envoy_cc_library(\n+    name = \"static_registry\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c37d9299bfda5238ae12d20de4d1e862636954e4"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2MDI2MTk0", "url": "https://github.com/envoyproxy/envoy-mobile/pull/912#pullrequestreview-436026194", "createdAt": "2020-06-23T17:58:47Z", "commit": {"oid": "c37d9299bfda5238ae12d20de4d1e862636954e4"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1bef815b22d4a83e9adf779007c46c8a84123518", "author": {"user": {"login": "junr03", "name": "Jose Ulises Nino Rivera"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/1bef815b22d4a83e9adf779007c46c8a84123518", "committedDate": "2020-06-23T18:04:25Z", "message": "name\n\nSigned-off-by: Jose Nino <jnino@lyft.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1edec1677ae65d956dd82a2f14d2106061b5987f", "author": {"user": {"login": "junr03", "name": "Jose Ulises Nino Rivera"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/1edec1677ae65d956dd82a2f14d2106061b5987f", "committedDate": "2020-06-23T19:53:51Z", "message": "fmt\n\nSigned-off-by: Jose Nino <jnino@lyft.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2MTc4NjQ4", "url": "https://github.com/envoyproxy/envoy-mobile/pull/912#pullrequestreview-436178648", "createdAt": "2020-06-23T21:41:28Z", "commit": {"oid": "1edec1677ae65d956dd82a2f14d2106061b5987f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4261, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}