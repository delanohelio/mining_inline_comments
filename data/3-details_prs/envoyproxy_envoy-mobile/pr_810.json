{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA3Njc4NjA1", "number": 810, "title": "kotlin: replace Detekt runner script with Bazel rule", "bodyText": "Signed-off-by: Artur Dryomov artur.dryomov@gmail.com\nDescription:\nRisk Level: low\nTesting: run new Detekt targets without changes and with invalid changes to check Detekt output\nDocs Changes: none\nRelease Notes: none", "createdAt": "2020-04-23T04:50:50Z", "url": "https://github.com/envoyproxy/envoy-mobile/pull/810", "merged": true, "mergeCommit": {"oid": "b52e4f95356e1f5061888bc61218d2b1e567624c"}, "closed": true, "closedAt": "2020-05-07T17:29:24Z", "author": {"login": "arturdryomov"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcaVVKVAH2gAyNDA3Njc4NjA1OjY4YzhlYTUxZjdiYWUwZmViOGExNTA1ZmNiZDA2YTJkZTkzN2ZkY2I=", "endCursor": "Y3Vyc29yOnYyOpPPAAABccqJk1AFqTQwMzM3Njc3MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "68c8ea51f7bae0feb8a1505fcbd06a2de937fdcb", "author": {"user": {"login": "arturdryomov", "name": "Artur Dryomov"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/68c8ea51f7bae0feb8a1505fcbd06a2de937fdcb", "committedDate": "2020-04-23T04:39:14Z", "message": "kotlin: replace Detekt runner script with Bazel rule\n\nSigned-off-by: Artur Dryomov <artur.dryomov@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4NzU5Mjk3", "url": "https://github.com/envoyproxy/envoy-mobile/pull/810#pullrequestreview-398759297", "createdAt": "2020-04-23T04:58:03Z", "commit": {"oid": "68c8ea51f7bae0feb8a1505fcbd06a2de937fdcb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QwNDo1ODowM1rOGKWlug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QwNDo1ODowM1rOGKWlug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzUwOTA1MA==", "bodyText": "Maybe we can just do a global detekt rule and just add it to the top level BUILD file. What do you think about that?", "url": "https://github.com/envoyproxy/envoy-mobile/pull/810#discussion_r413509050", "createdAt": "2020-04-23T04:58:03Z", "author": {"login": "buildbreaker"}, "path": "library/kotlin/src/io/envoyproxy/envoymobile/BUILD", "diffHunk": "@@ -60,3 +61,10 @@ envoy_mobile_kt_library(\n         \"//library/java/src/io/envoyproxy/envoymobile/engine:envoy_base_engine_lib\",\n     ],\n )\n+\n+detekt(\n+    name = \"envoy_lib_lint\",\n+    srcs = glob([\"*.kt\"]),\n+    build_upon_default_config = True,\n+    cfgs = [\"//:kotlin_lint_config\"],\n+)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "68c8ea51f7bae0feb8a1505fcbd06a2de937fdcb"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e8d168ecb5e50f279dcaf8c8017d8277d05bd9c9", "author": {"user": {"login": "arturdryomov", "name": "Artur Dryomov"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/e8d168ecb5e50f279dcaf8c8017d8277d05bd9c9", "committedDate": "2020-04-23T19:06:24Z", "message": "Change GitHub Actions workflow.\n\nSigned-off-by: Artur Dryomov <artur.dryomov@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce3ff74953ceb181d0a5ef952f46ed68782e29ed", "author": {"user": {"login": "arturdryomov", "name": "Artur Dryomov"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/ce3ff74953ceb181d0a5ef952f46ed68782e29ed", "committedDate": "2020-04-23T19:22:00Z", "message": "Add compiler declarations.\n\nSigned-off-by: Artur Dryomov <artur.dryomov@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71f72e005e6b2e254c9e399962d1f3e8345080e6", "author": {"user": {"login": "arturdryomov", "name": "Artur Dryomov"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/71f72e005e6b2e254c9e399962d1f3e8345080e6", "committedDate": "2020-04-23T19:29:10Z", "message": "Add path declaration.\n\nSigned-off-by: Artur Dryomov <artur.dryomov@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk5NDQ0Mzkz", "url": "https://github.com/envoyproxy/envoy-mobile/pull/810#pullrequestreview-399444393", "createdAt": "2020-04-23T20:18:16Z", "commit": {"oid": "71f72e005e6b2e254c9e399962d1f3e8345080e6"}, "state": "APPROVED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QyMDoxODoxNlrOGK6Yqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QyMDoyMDowMlrOGK6cug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDA5NTUzMQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                name = \"hello_envoy_kt_lint\",\n          \n          \n            \n                name = \"hello_envoy_kt_detekt\",", "url": "https://github.com/envoyproxy/envoy-mobile/pull/810#discussion_r414095531", "createdAt": "2020-04-23T20:18:16Z", "author": {"login": "artem-zinnatullin"}, "path": "examples/kotlin/hello_world/BUILD", "diffHunk": "@@ -29,3 +30,10 @@ kt_android_library(\n         \"@androidsdk//com.android.support:recyclerview-v7-25.0.0\",\n     ],\n )\n+\n+detekt(\n+    name = \"hello_envoy_kt_lint\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "71f72e005e6b2e254c9e399962d1f3e8345080e6"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDA5NTcyMA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  - name: 'Run Kotlin Lint'\n          \n          \n            \n                  - name: 'Run Detekt (Kotlin Lint)'", "url": "https://github.com/envoyproxy/envoy-mobile/pull/810#discussion_r414095720", "createdAt": "2020-04-23T20:18:38Z", "author": {"login": "artem-zinnatullin"}, "path": ".github/workflows/format.yml", "diffHunk": "@@ -49,11 +49,15 @@ jobs:\n     name: kotlin_lint\n     runs-on: ubuntu-18.04\n     timeout-minutes: 45\n-    container:\n-      image: openjdk:8-jdk\n     steps:\n       - uses: actions/checkout@v1\n         with:\n           submodules: true\n-      - name: 'Run Kotlin lint'\n-        run: ./ci/kotlin_lint.sh\n+      - name: 'Install dependencies'\n+        run: ./ci/linux_ci_setup.sh\n+      - name: 'Run Kotlin Lint'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "71f72e005e6b2e254c9e399962d1f3e8345080e6"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDA5NTg5MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                name = \"envoy_lib_lint\",\n          \n          \n            \n                name = \"envoy_lib_detekt\",", "url": "https://github.com/envoyproxy/envoy-mobile/pull/810#discussion_r414095890", "createdAt": "2020-04-23T20:18:54Z", "author": {"login": "artem-zinnatullin"}, "path": "library/kotlin/src/io/envoyproxy/envoymobile/BUILD", "diffHunk": "@@ -60,3 +61,10 @@ envoy_mobile_kt_library(\n         \"//library/java/src/io/envoyproxy/envoymobile/engine:envoy_base_engine_lib\",\n     ],\n )\n+\n+detekt(\n+    name = \"envoy_lib_lint\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "71f72e005e6b2e254c9e399962d1f3e8345080e6"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDA5NjU3MA==", "bodyText": "The more info about the actual tool we have in the names of things the easier it is to work with for external contributors, ie when they see a Detekt failure but don't know that it's Detekt it might be confusing", "url": "https://github.com/envoyproxy/envoy-mobile/pull/810#discussion_r414096570", "createdAt": "2020-04-23T20:20:02Z", "author": {"login": "artem-zinnatullin"}, "path": ".github/workflows/format.yml", "diffHunk": "@@ -49,11 +49,15 @@ jobs:\n     name: kotlin_lint\n     runs-on: ubuntu-18.04\n     timeout-minutes: 45\n-    container:\n-      image: openjdk:8-jdk\n     steps:\n       - uses: actions/checkout@v1\n         with:\n           submodules: true\n-      - name: 'Run Kotlin lint'\n-        run: ./ci/kotlin_lint.sh\n+      - name: 'Install dependencies'\n+        run: ./ci/linux_ci_setup.sh\n+      - name: 'Run Kotlin Lint'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDA5NTcyMA=="}, "originalCommit": {"oid": "71f72e005e6b2e254c9e399962d1f3e8345080e6"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwMjk5MjQ5", "url": "https://github.com/envoyproxy/envoy-mobile/pull/810#pullrequestreview-400299249", "createdAt": "2020-04-24T22:10:25Z", "commit": {"oid": "71f72e005e6b2e254c9e399962d1f3e8345080e6"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMjoxMDoyNVrOGLq85A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMjoxMDoyNVrOGLq85A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg5MTIzNg==", "bodyText": "Run Kotlin Lint (Detekt) lgtm, but I'm not blocking on that, use your judgement :)", "url": "https://github.com/envoyproxy/envoy-mobile/pull/810#discussion_r414891236", "createdAt": "2020-04-24T22:10:25Z", "author": {"login": "artem-zinnatullin"}, "path": ".github/workflows/format.yml", "diffHunk": "@@ -49,11 +49,15 @@ jobs:\n     name: kotlin_lint\n     runs-on: ubuntu-18.04\n     timeout-minutes: 45\n-    container:\n-      image: openjdk:8-jdk\n     steps:\n       - uses: actions/checkout@v1\n         with:\n           submodules: true\n-      - name: 'Run Kotlin lint'\n-        run: ./ci/kotlin_lint.sh\n+      - name: 'Install dependencies'\n+        run: ./ci/linux_ci_setup.sh\n+      - name: 'Run Kotlin Lint'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDA5NTcyMA=="}, "originalCommit": {"oid": "71f72e005e6b2e254c9e399962d1f3e8345080e6"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d0a02854e7cb5f615f7111fc0e7dbc7f78f986f3", "author": {"user": {"login": "arturdryomov", "name": "Artur Dryomov"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/d0a02854e7cb5f615f7111fc0e7dbc7f78f986f3", "committedDate": "2020-04-28T18:02:10Z", "message": "Remove Bazel query.\n\nSigned-off-by: Artur Dryomov <artur.dryomov@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "027fe57ac921bdb8b076d32da287daabf3d28f82", "author": {"user": {"login": "arturdryomov", "name": "Artur Dryomov"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/027fe57ac921bdb8b076d32da287daabf3d28f82", "committedDate": "2020-04-28T18:12:24Z", "message": "Return submodules checkout.\n\nSigned-off-by: Artur Dryomov <artur.dryomov@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "46eb56ab4fc19486db79ba351a34f8017f86c2a8", "author": {"user": {"login": "arturdryomov", "name": "Artur Dryomov"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/46eb56ab4fc19486db79ba351a34f8017f86c2a8", "committedDate": "2020-04-28T18:25:35Z", "message": "Fix formatting issue.\n\nSigned-off-by: Artur Dryomov <artur.dryomov@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ead4b5035e236decdff28a85a9ea2adf1c8adf94", "author": {"user": {"login": "arturdryomov", "name": "Artur Dryomov"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/ead4b5035e236decdff28a85a9ea2adf1c8adf94", "committedDate": "2020-04-28T18:26:41Z", "message": "Merge branch 'master' into ad/detekt-bazel"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "111d2abada5c0f288d080bbd5d873f9717ec09b9", "author": {"user": {"login": "arturdryomov", "name": "Artur Dryomov"}}, "url": "https://github.com/envoyproxy/envoy-mobile/commit/111d2abada5c0f288d080bbd5d873f9717ec09b9", "committedDate": "2020-04-28T18:38:52Z", "message": "Fix multiline invocation.\n\nSigned-off-by: Artur Dryomov <artur.dryomov@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyMTcyNTQx", "url": "https://github.com/envoyproxy/envoy-mobile/pull/810#pullrequestreview-402172541", "createdAt": "2020-04-28T20:08:10Z", "commit": {"oid": "111d2abada5c0f288d080bbd5d873f9717ec09b9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAzMzc2Nzcw", "url": "https://github.com/envoyproxy/envoy-mobile/pull/810#pullrequestreview-403376770", "createdAt": "2020-04-30T10:02:26Z", "commit": {"oid": "111d2abada5c0f288d080bbd5d873f9717ec09b9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4194, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}