{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc2OTkwMzgy", "number": 1325, "title": "Fix for issue when OAuth scope creation gives 500 error code for invalid request body ", "bodyText": "Issue : wso2/product-is#7615", "createdAt": "2020-02-19T06:35:21Z", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1325", "merged": true, "mergeCommit": {"oid": "f89935be42118df78cf08c32fad463423c169550"}, "closed": true, "closedAt": "2020-02-20T08:37:23Z", "author": {"login": "mevan-karu"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcFw1vpgFqTM2MDg3NDI0MQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc6_oVhAFqTQ1OTY2MDE0Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwODc0MjQx", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1325#pullrequestreview-360874241", "createdAt": "2020-02-19T06:49:51Z", "commit": {"oid": "8f291c972757e969620a5a0abc3e86b6f9ce04f9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQwNjo0OTo1MVrOFrcvmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQwNjo0OTo1MVrOFrcvmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTEwNDAyNA==", "bodyText": "scope is not required here", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1325#discussion_r381104024", "createdAt": "2020-02-19T06:49:51Z", "author": {"login": "IsuraD"}, "path": "pom.xml", "diffHunk": "@@ -460,6 +460,12 @@\n             </dependency>\n \n             <!--Swagger Dependencies-->\n+            <dependency>\n+                <groupId>com.fasterxml.jackson.core</groupId>\n+                <artifactId>jackson-core</artifactId>\n+                <scope>provided</scope>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f291c972757e969620a5a0abc3e86b6f9ce04f9"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwODc0NTIw", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1325#pullrequestreview-360874520", "createdAt": "2020-02-19T06:50:41Z", "commit": {"oid": "8f291c972757e969620a5a0abc3e86b6f9ce04f9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQwNjo1MDo0MVrOFrcwcw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQwNjo1MDo0MVrOFrcwcw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTEwNDI0Mw==", "bodyText": "Shall we put the actual description in the error message? That would be more meaningful", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1325#discussion_r381104243", "createdAt": "2020-02-19T06:50:41Z", "author": {"login": "IsuraD"}, "path": "components/org.wso2.carbon.identity.oauth.scope.endpoint/src/main/java/org/wso2/carbon/identity/oauth/scope/endpoint/exceptionMapper/JsonProcessingExceptionMapper.java", "diffHunk": "@@ -0,0 +1,58 @@\n+\n+/*\n+ * Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.wso2.carbon.identity.oauth.scope.endpoint.exceptionMapper;\n+\n+import com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException;\n+import org.apache.commons.logging.Log;\n+import org.apache.commons.logging.LogFactory;\n+import org.wso2.carbon.identity.oauth.scope.endpoint.dto.ErrorDTO;\n+\n+import javax.ws.rs.core.HttpHeaders;\n+import javax.ws.rs.core.MediaType;\n+import javax.ws.rs.core.Response;\n+import javax.ws.rs.ext.ExceptionMapper;\n+\n+/**\n+ * Handles exceptions when an incorrect json requests body is received.\n+ * Sends a default error response.\n+ */\n+public class JsonProcessingExceptionMapper implements ExceptionMapper<UnrecognizedPropertyException> {\n+\n+    private static final Log log = LogFactory.getLog(JsonProcessingExceptionMapper.class);\n+    public static final String ERROR_MESSAGE = \"Invalid Request\";\n+    public static final String DESCRIPTION = \"Provided JSON request content is not in the valid format.\";\n+\n+    @Override\n+    public Response toResponse(UnrecognizedPropertyException e) {\n+\n+        if (log.isDebugEnabled()) {\n+            log.debug(\"Provided JSON request content is not in the valid format:\", e);\n+        }\n+\n+        ErrorDTO errorDTO = new ErrorDTO();\n+        errorDTO.setCode(Response.Status.BAD_REQUEST.toString());\n+        errorDTO.setMessage(ERROR_MESSAGE);\n+        errorDTO.setDescription(DESCRIPTION);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f291c972757e969620a5a0abc3e86b6f9ce04f9"}, "originalPosition": 52}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8f291c972757e969620a5a0abc3e86b6f9ce04f9", "author": {"user": {"login": "mevan-karu", "name": "Mevan Karunanayake"}}, "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/commit/8f291c972757e969620a5a0abc3e86b6f9ce04f9", "committedDate": "2020-02-19T06:31:32Z", "message": "Fix for issue\n\nhttps://github.com/wso2/product-is/issues/7615"}, "afterCommit": {"oid": "fc8584a2b26f1c5c11e011f62eff298bcdcdc4d8", "author": {"user": {"login": "mevan-karu", "name": "Mevan Karunanayake"}}, "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/commit/fc8584a2b26f1c5c11e011f62eff298bcdcdc4d8", "committedDate": "2020-02-19T06:59:17Z", "message": "Fix for issue\n\nhttps://github.com/wso2/product-is/issues/7615"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwODc4ODM5", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1325#pullrequestreview-360878839", "createdAt": "2020-02-19T07:02:38Z", "commit": {"oid": "fc8584a2b26f1c5c11e011f62eff298bcdcdc4d8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fc8584a2b26f1c5c11e011f62eff298bcdcdc4d8", "author": {"user": {"login": "mevan-karu", "name": "Mevan Karunanayake"}}, "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/commit/fc8584a2b26f1c5c11e011f62eff298bcdcdc4d8", "committedDate": "2020-02-19T06:59:17Z", "message": "Fix for issue\n\nhttps://github.com/wso2/product-is/issues/7615"}, "afterCommit": {"oid": "fe4d6ac45d52c25bf79acee55fdd165189405e1b", "author": {"user": {"login": "mevan-karu", "name": "Mevan Karunanayake"}}, "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/commit/fe4d6ac45d52c25bf79acee55fdd165189405e1b", "committedDate": "2020-02-19T08:49:15Z", "message": "Fix for issue\n\nhttps://github.com/wso2/product-is/issues/7615"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwOTQ0OTQz", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1325#pullrequestreview-360944943", "createdAt": "2020-02-19T09:14:00Z", "commit": {"oid": "fe4d6ac45d52c25bf79acee55fdd165189405e1b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQwOToxNDowMFrOFrgPaw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQwOToxNDowMFrOFrgPaw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTE2MTMyMw==", "bodyText": "Add a new line EOF", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1325#discussion_r381161323", "createdAt": "2020-02-19T09:14:00Z", "author": {"login": "DMHP"}, "path": "components/org.wso2.carbon.identity.oauth.scope.endpoint/src/main/webapp/WEB-INF/beans.xml", "diffHunk": "@@ -13,6 +13,7 @@\n         </jaxrs:serviceBeans>\n         <jaxrs:providers>\n             <bean class=\"com.fasterxml.jackson.jaxrs.json.JacksonJsonProvider\"/>\n+            <bean class=\"org.wso2.carbon.identity.oauth.scope.endpoint.expmapper.JsonProcessingExceptionMapper\"/>\n         </jaxrs:providers>\n     </jaxrs:server>\n </beans>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe4d6ac45d52c25bf79acee55fdd165189405e1b"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwOTQ1NjY1", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1325#pullrequestreview-360945665", "createdAt": "2020-02-19T09:15:06Z", "commit": {"oid": "fe4d6ac45d52c25bf79acee55fdd165189405e1b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQwOToxNTowNlrOFrgRlQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQwOToxNTowNlrOFrgRlQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTE2MTg3Nw==", "bodyText": "Shall we move the constants to Oauth2ScopeConstants.java file", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1325#discussion_r381161877", "createdAt": "2020-02-19T09:15:06Z", "author": {"login": "DMHP"}, "path": "components/org.wso2.carbon.identity.oauth.scope.endpoint/src/main/java/org/wso2/carbon/identity/oauth/scope/endpoint/expmapper/JsonProcessingExceptionMapper.java", "diffHunk": "@@ -0,0 +1,58 @@\n+\n+/*\n+ * Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.wso2.carbon.identity.oauth.scope.endpoint.expmapper;\n+\n+import com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException;\n+import org.apache.commons.logging.Log;\n+import org.apache.commons.logging.LogFactory;\n+import org.wso2.carbon.identity.oauth.scope.endpoint.dto.ErrorDTO;\n+\n+import javax.ws.rs.core.HttpHeaders;\n+import javax.ws.rs.core.MediaType;\n+import javax.ws.rs.core.Response;\n+import javax.ws.rs.ext.ExceptionMapper;\n+\n+/**\n+ * Handles exceptions when an incorrect json requests body is received.\n+ * Sends a default error response.\n+ */\n+public class JsonProcessingExceptionMapper implements ExceptionMapper<UnrecognizedPropertyException> {\n+\n+    private static final Log log = LogFactory.getLog(JsonProcessingExceptionMapper.class);\n+    public static final String ERROR_MESSAGE = \"Invalid Request\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe4d6ac45d52c25bf79acee55fdd165189405e1b"}, "originalPosition": 39}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "44db29f2abafa6c7b4a13fe9f5ca3529b634d58b", "author": {"user": {"login": "mevan-karu", "name": "Mevan Karunanayake"}}, "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/commit/44db29f2abafa6c7b4a13fe9f5ca3529b634d58b", "committedDate": "2020-02-19T14:38:30Z", "message": "Fix for issue\n\nhttps://github.com/wso2/product-is/issues/7615"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fe4d6ac45d52c25bf79acee55fdd165189405e1b", "author": {"user": {"login": "mevan-karu", "name": "Mevan Karunanayake"}}, "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/commit/fe4d6ac45d52c25bf79acee55fdd165189405e1b", "committedDate": "2020-02-19T08:49:15Z", "message": "Fix for issue\n\nhttps://github.com/wso2/product-is/issues/7615"}, "afterCommit": {"oid": "44db29f2abafa6c7b4a13fe9f5ca3529b634d58b", "author": {"user": {"login": "mevan-karu", "name": "Mevan Karunanayake"}}, "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/commit/44db29f2abafa6c7b4a13fe9f5ca3529b634d58b", "committedDate": "2020-02-19T14:38:30Z", "message": "Fix for issue\n\nhttps://github.com/wso2/product-is/issues/7615"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5NjYwMTQ2", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1325#pullrequestreview-459660146", "createdAt": "2020-08-02T16:01:46Z", "commit": {"oid": "44db29f2abafa6c7b4a13fe9f5ca3529b634d58b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wMlQxNjowMTo0NlrOG6mFWQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wMlQxNjowMTo0NlrOG6mFWQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDA5NDU1Mw==", "bodyText": "Let's add a full stop", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1325#discussion_r464094553", "createdAt": "2020-08-02T16:01:46Z", "author": {"login": "Buddhimah"}, "path": "components/org.wso2.carbon.identity.oauth/src/main/java/org/wso2/carbon/identity/oauth2/Oauth2ScopeConstants.java", "diffHunk": "@@ -42,6 +42,7 @@\n                 \"Scope with the name %s already exists in the system. Please use a different scope name.\"),\n         ERROR_CODE_BAD_REQUEST_SCOPE_NOT_SPECIFIED(\"41005\", \"Scope is not specified.\"),\n         ERROR_CODE_BAD_REQUEST_SCOPE_NAME_CONTAINS_WHITESPACES(\"41006\", \"Scope name: %s contains white spaces.\"),\n+        ERROR_CODE_BAD_REQUEST(\"41007\", \"Invalid request\"),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44db29f2abafa6c7b4a13fe9f5ca3529b634d58b"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3205, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}