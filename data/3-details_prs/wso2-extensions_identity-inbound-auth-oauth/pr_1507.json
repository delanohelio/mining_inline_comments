{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI4MTA0MzUz", "number": 1507, "title": "Fixing the issue in non-expiry self signed access token generation", "bodyText": "Proposed changes in this pull request\nThis PR will fix the issue when generating a non-expiry JWT access token. A related issue can be found at [1]\n[1] wso2/product-apim#9541", "createdAt": "2020-11-26T14:16:14Z", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1507", "merged": true, "mergeCommit": {"oid": "c5894ae429e75dffe61f6ad0e636d914a38b99c4"}, "closed": true, "closedAt": "2021-02-17T04:29:56Z", "author": {"login": "HiranyaKavishani"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdgTkJAgH2gAyNTI4MTA0MzUzOjE4NmZmNTYzOGFkMTlmOTgxY2YzNmU0ZTVkNDM1MWFlNmEzOTMxMzM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABd65AYhgFqTU5MTgyOTEzNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "186ff5638ad19f981cf36e4e5d4351ae6a393133", "author": {"user": {"login": "HiranyaKavishani", "name": null}}, "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/commit/186ff5638ad19f981cf36e4e5d4351ae6a393133", "committedDate": "2020-11-26T14:10:29Z", "message": "Fixing the issue in non-expiry self access token generation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTkwODk1NzM3", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1507#pullrequestreview-590895737", "createdAt": "2021-02-16T05:32:50Z", "commit": {"oid": "186ff5638ad19f981cf36e4e5d4351ae6a393133"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0xNlQwNTozMjo1MFrOIl2WwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0xNlQwNTozMjo1MFrOIl2WwA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NjU1ODc4NA==", "bodyText": "Shall we start the sentence with an upper case letter and end with a .?", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1507#discussion_r576558784", "createdAt": "2021-02-16T05:32:50Z", "author": {"login": "somindatommy"}, "path": "components/org.wso2.carbon.identity.oauth/src/main/java/org/wso2/carbon/identity/oauth2/token/JWTTokenIssuer.java", "diffHunk": "@@ -519,6 +520,32 @@ protected JWTClaimsSet createJWTClaimSet(OAuthAuthzReqMessageContext authAuthzRe\n         return jwtClaimsSet;\n     }\n \n+    /**\n+     * Calculates access token expiry time.\n+     *\n+     * @param accessTokenLifeTimeInMillis accessTokenLifeTimeInMillis\n+     * @param curTimeInMillis             currentTimeInMillis\n+     * @return expirationTime", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "186ff5638ad19f981cf36e4e5d4351ae6a393133"}, "originalPosition": 19}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTkwOTA1MDcy", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1507#pullrequestreview-590905072", "createdAt": "2021-02-16T06:00:39Z", "commit": {"oid": "186ff5638ad19f981cf36e4e5d4351ae6a393133"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0xNlQwNjowMDozOVrOIl23SA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0xNlQwNjowMDozOVrOIl23SA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NjU2NzExMg==", "bodyText": "As per the issue description, I assume accessTokenLifeTimeInMillis is the Token Expiry Time to -1  in the erroneous scenario. Hence why does the variable name says accessTokenLifeTimeInMillis without specifying it as accessTokenExpiryTime", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1507#discussion_r576567112", "createdAt": "2021-02-16T06:00:39Z", "author": {"login": "Buddhimah"}, "path": "components/org.wso2.carbon.identity.oauth/src/main/java/org/wso2/carbon/identity/oauth2/token/JWTTokenIssuer.java", "diffHunk": "@@ -519,6 +520,32 @@ protected JWTClaimsSet createJWTClaimSet(OAuthAuthzReqMessageContext authAuthzRe\n         return jwtClaimsSet;\n     }\n \n+    /**\n+     * Calculates access token expiry time.\n+     *\n+     * @param accessTokenLifeTimeInMillis accessTokenLifeTimeInMillis\n+     * @param curTimeInMillis             currentTimeInMillis\n+     * @return expirationTime\n+     */\n+    private Date calculateAccessTokenExpiryTime(Long accessTokenLifeTimeInMillis, Long curTimeInMillis) {\n+\n+        Date expirationTime;\n+        if (accessTokenLifeTimeInMillis < 0) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "186ff5638ad19f981cf36e4e5d4351ae6a393133"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTkxODI5MTM1", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1507#pullrequestreview-591829135", "createdAt": "2021-02-17T04:29:51Z", "commit": {"oid": "186ff5638ad19f981cf36e4e5d4351ae6a393133"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3097, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}