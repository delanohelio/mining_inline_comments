{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA3NTE2ODUx", "number": 1363, "title": "Fix failure to run unit tests directly from IDE test run", "bodyText": "Proposed changes in this pull request\nFixes the below error encountered when trying to run unit tests using IDE run\norg.testng.TestNGException: \nError creating object factory: class org.wso2.carbon.identity.oauth.endpoint.authz.OAuth2AuthzEndpointTest\n\tat org.testng.internal.TestNGClassFinder.<init>(TestNGClassFinder.java:86)\n\tat org.testng.TestRunner.initMethods(TestRunner.java:424)\n\tat org.testng.TestRunner.init(TestRunner.java:247)\n\tat org.testng.TestRunner.init(TestRunner.java:217)\n\tat org.testng.TestRunner.<init>(TestRunner.java:161)\n\tat org.testng.SuiteRunner$DefaultTestRunnerFactory.newTestRunner(SuiteRunner.java:556)\n\tat org.testng.SuiteRunner.init(SuiteRunner.java:168)\n\tat org.testng.SuiteRunner.<init>(SuiteRunner.java:117)\n\tat org.testng.TestNG.createSuiteRunner(TestNG.java:1319)\n\tat org.testng.TestNG.createSuiteRunners(TestNG.java:1306)\n\tat org.testng.TestNG.runSuitesLocally(TestNG.java:1160)\n\tat org.testng.TestNG.run(TestNG.java:1064)\n\tat com.intellij.rt.testng.IDEARemoteTestNG.run(IDEARemoteTestNG.java:66)\n\tat com.intellij.rt.testng.RemoteTestNGStarter.main(RemoteTestNGStarter.java:110)\nCaused by: java.lang.ClassCastException: org.ops4j.pax.logging.log4jv2.Log4jv2Logger cannot be cast to org.apache.logging.log4j.core.Logger\n\tat org.wso2.carbon.identity.testutil.log.LogUtil.configureAndAddConsoleAppender(LogUtil.java:43)\n\tat org.wso2.carbon.identity.testutil.powermock.PowerMockIdentityBaseTest.<init>(PowerMockIdentityBaseTest.java:54)\n\tat org.wso2.carbon.identity.oauth.endpoint.util.TestOAuthEndpointBase.<init>(TestOAuthEndpointBase.java:31)\n\tat org.wso2.carbon.identity.oauth.endpoint.authz.OAuth2AuthzEndpointTest.<init>(OAuth2AuthzEndpointTest.java:149)\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n\tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n\tat java.lang.reflect.Constructor.newInstance(Constructor.java:423)\n\tat java.lang.Class.newInstance(Class.java:442)\n\tat org.testng.internal.TestNGClassFinder.<init>(TestNGClassFinder.java:77)\n\t... 13 more\n\nThis fix is only for the org.wso2.carbon.identity.oauth module. We can extend the same for the other modules too.", "createdAt": "2020-04-22T20:04:40Z", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1363", "merged": true, "mergeCommit": {"oid": "5b9c20032198cc25f3d4c894c55f00bbda9458a6"}, "closed": true, "closedAt": "2020-04-23T04:22:57Z", "author": {"login": "mefarazath"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcaN6QxgH2gAyNDA3NTE2ODUxOmZiOTI2NTY0ZmMwYTM0YWQ4YTMxNmNhZjM5NDI3NTYwOTQxMGU0ZDI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcaU7oigFqTM5ODc0NjE1NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "fb926564fc0a34ad8a316caf394275609410e4d2", "author": {"user": {"login": "mefarazath", "name": "Farasath Ahamed"}}, "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/commit/fb926564fc0a34ad8a316caf394275609410e4d2", "committedDate": "2020-04-22T20:00:31Z", "message": "Fix failure to run unit tests directly from IDE test run"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4NTQ0NTU3", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1363#pullrequestreview-398544557", "createdAt": "2020-04-22T20:07:45Z", "commit": {"oid": "fb926564fc0a34ad8a316caf394275609410e4d2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4NzQ2MTU1", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1363#pullrequestreview-398746155", "createdAt": "2020-04-23T04:11:21Z", "commit": {"oid": "fb926564fc0a34ad8a316caf394275609410e4d2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QwNDoxMToyMVrOGKVuBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QwNDoxMToyMVrOGKVuBQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzQ5NDc4OQ==", "bodyText": "@chamathns Is this the expected behaviour of this test?", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1363#discussion_r413494789", "createdAt": "2020-04-23T04:11:21Z", "author": {"login": "mefarazath"}, "path": "components/org.wso2.carbon.identity.oauth/src/test/java/org/wso2/carbon/identity/oauth2/util/OAuth2UtilTest.java", "diffHunk": "@@ -1027,7 +1029,7 @@ public void testGetOAuth2TokenEPUrl(String configUrl, String serverUrl, String o\n                 {true, \"https://localhost:9443/testUrl\", \"https://localhost:9443/testUrl\", \"testDomain\",\n                         \"https://localhost:9443/t/testDomain/oauth2/jwks\"},\n                 {true, \"\", \"https://localhost:9443/testUrl\", \"\",\n-                        \"https://localhost:9443/t/carbon.super/oauth2/jwks\"},\n+                        \"https://localhost:9443/oauth2/jwks\"},", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb926564fc0a34ad8a316caf394275609410e4d2"}, "originalPosition": 21}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3258, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}