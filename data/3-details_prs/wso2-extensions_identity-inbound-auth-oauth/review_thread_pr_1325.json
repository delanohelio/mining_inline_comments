{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc2OTkwMzgy", "number": 1325, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQwNjo0OTo1MVrODg9N5A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wMlQxNjowMTo0NlrOEUZTew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1ODg0MDA0OnYy", "diffSide": "RIGHT", "path": "pom.xml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQwNjo0OTo1MVrOFrcvmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQwNzowMTozMlrOFrc86w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTEwNDAyNA==", "bodyText": "scope is not required here", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1325#discussion_r381104024", "createdAt": "2020-02-19T06:49:51Z", "author": {"login": "IsuraD"}, "path": "pom.xml", "diffHunk": "@@ -460,6 +460,12 @@\n             </dependency>\n \n             <!--Swagger Dependencies-->\n+            <dependency>\n+                <groupId>com.fasterxml.jackson.core</groupId>\n+                <artifactId>jackson-core</artifactId>\n+                <scope>provided</scope>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f291c972757e969620a5a0abc3e86b6f9ce04f9"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTEwNzQzNQ==", "bodyText": "removed", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1325#discussion_r381107435", "createdAt": "2020-02-19T07:01:32Z", "author": {"login": "mevan-karu"}, "path": "pom.xml", "diffHunk": "@@ -460,6 +460,12 @@\n             </dependency>\n \n             <!--Swagger Dependencies-->\n+            <dependency>\n+                <groupId>com.fasterxml.jackson.core</groupId>\n+                <artifactId>jackson-core</artifactId>\n+                <scope>provided</scope>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTEwNDAyNA=="}, "originalCommit": {"oid": "8f291c972757e969620a5a0abc3e86b6f9ce04f9"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1ODg0MTM3OnYy", "diffSide": "RIGHT", "path": "components/org.wso2.carbon.identity.oauth.scope.endpoint/src/main/java/org/wso2/carbon/identity/oauth/scope/endpoint/exceptionMapper/JsonProcessingExceptionMapper.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQwNjo1MDo0MVrOFrcwcw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQwNjo1MDo0MVrOFrcwcw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTEwNDI0Mw==", "bodyText": "Shall we put the actual description in the error message? That would be more meaningful", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1325#discussion_r381104243", "createdAt": "2020-02-19T06:50:41Z", "author": {"login": "IsuraD"}, "path": "components/org.wso2.carbon.identity.oauth.scope.endpoint/src/main/java/org/wso2/carbon/identity/oauth/scope/endpoint/exceptionMapper/JsonProcessingExceptionMapper.java", "diffHunk": "@@ -0,0 +1,58 @@\n+\n+/*\n+ * Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.wso2.carbon.identity.oauth.scope.endpoint.exceptionMapper;\n+\n+import com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException;\n+import org.apache.commons.logging.Log;\n+import org.apache.commons.logging.LogFactory;\n+import org.wso2.carbon.identity.oauth.scope.endpoint.dto.ErrorDTO;\n+\n+import javax.ws.rs.core.HttpHeaders;\n+import javax.ws.rs.core.MediaType;\n+import javax.ws.rs.core.Response;\n+import javax.ws.rs.ext.ExceptionMapper;\n+\n+/**\n+ * Handles exceptions when an incorrect json requests body is received.\n+ * Sends a default error response.\n+ */\n+public class JsonProcessingExceptionMapper implements ExceptionMapper<UnrecognizedPropertyException> {\n+\n+    private static final Log log = LogFactory.getLog(JsonProcessingExceptionMapper.class);\n+    public static final String ERROR_MESSAGE = \"Invalid Request\";\n+    public static final String DESCRIPTION = \"Provided JSON request content is not in the valid format.\";\n+\n+    @Override\n+    public Response toResponse(UnrecognizedPropertyException e) {\n+\n+        if (log.isDebugEnabled()) {\n+            log.debug(\"Provided JSON request content is not in the valid format:\", e);\n+        }\n+\n+        ErrorDTO errorDTO = new ErrorDTO();\n+        errorDTO.setCode(Response.Status.BAD_REQUEST.toString());\n+        errorDTO.setMessage(ERROR_MESSAGE);\n+        errorDTO.setDescription(DESCRIPTION);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f291c972757e969620a5a0abc3e86b6f9ce04f9"}, "originalPosition": 52}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1OTIwNjA3OnYy", "diffSide": "RIGHT", "path": "components/org.wso2.carbon.identity.oauth.scope.endpoint/src/main/webapp/WEB-INF/beans.xml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQwOToxNDowMFrOFrgPaw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxNDo0MzowMVrOFrq1Ug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTE2MTMyMw==", "bodyText": "Add a new line EOF", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1325#discussion_r381161323", "createdAt": "2020-02-19T09:14:00Z", "author": {"login": "DMHP"}, "path": "components/org.wso2.carbon.identity.oauth.scope.endpoint/src/main/webapp/WEB-INF/beans.xml", "diffHunk": "@@ -13,6 +13,7 @@\n         </jaxrs:serviceBeans>\n         <jaxrs:providers>\n             <bean class=\"com.fasterxml.jackson.jaxrs.json.JacksonJsonProvider\"/>\n+            <bean class=\"org.wso2.carbon.identity.oauth.scope.endpoint.expmapper.JsonProcessingExceptionMapper\"/>\n         </jaxrs:providers>\n     </jaxrs:server>\n </beans>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe4d6ac45d52c25bf79acee55fdd165189405e1b"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTMzNDg2Ng==", "bodyText": "Added", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1325#discussion_r381334866", "createdAt": "2020-02-19T14:43:01Z", "author": {"login": "mevan-karu"}, "path": "components/org.wso2.carbon.identity.oauth.scope.endpoint/src/main/webapp/WEB-INF/beans.xml", "diffHunk": "@@ -13,6 +13,7 @@\n         </jaxrs:serviceBeans>\n         <jaxrs:providers>\n             <bean class=\"com.fasterxml.jackson.jaxrs.json.JacksonJsonProvider\"/>\n+            <bean class=\"org.wso2.carbon.identity.oauth.scope.endpoint.expmapper.JsonProcessingExceptionMapper\"/>\n         </jaxrs:providers>\n     </jaxrs:server>\n </beans>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTE2MTMyMw=="}, "originalCommit": {"oid": "fe4d6ac45d52c25bf79acee55fdd165189405e1b"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1OTIwOTY4OnYy", "diffSide": "RIGHT", "path": "components/org.wso2.carbon.identity.oauth.scope.endpoint/src/main/java/org/wso2/carbon/identity/oauth/scope/endpoint/expmapper/JsonProcessingExceptionMapper.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQwOToxNTowNlrOFrgRlQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxNDo0Mjo1MlrOFrq08g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTE2MTg3Nw==", "bodyText": "Shall we move the constants to Oauth2ScopeConstants.java file", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1325#discussion_r381161877", "createdAt": "2020-02-19T09:15:06Z", "author": {"login": "DMHP"}, "path": "components/org.wso2.carbon.identity.oauth.scope.endpoint/src/main/java/org/wso2/carbon/identity/oauth/scope/endpoint/expmapper/JsonProcessingExceptionMapper.java", "diffHunk": "@@ -0,0 +1,58 @@\n+\n+/*\n+ * Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.wso2.carbon.identity.oauth.scope.endpoint.expmapper;\n+\n+import com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException;\n+import org.apache.commons.logging.Log;\n+import org.apache.commons.logging.LogFactory;\n+import org.wso2.carbon.identity.oauth.scope.endpoint.dto.ErrorDTO;\n+\n+import javax.ws.rs.core.HttpHeaders;\n+import javax.ws.rs.core.MediaType;\n+import javax.ws.rs.core.Response;\n+import javax.ws.rs.ext.ExceptionMapper;\n+\n+/**\n+ * Handles exceptions when an incorrect json requests body is received.\n+ * Sends a default error response.\n+ */\n+public class JsonProcessingExceptionMapper implements ExceptionMapper<UnrecognizedPropertyException> {\n+\n+    private static final Log log = LogFactory.getLog(JsonProcessingExceptionMapper.class);\n+    public static final String ERROR_MESSAGE = \"Invalid Request\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe4d6ac45d52c25bf79acee55fdd165189405e1b"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTMzNDc3MA==", "bodyText": "Added a new error message to Oauth2ScopeConstants.java", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1325#discussion_r381334770", "createdAt": "2020-02-19T14:42:52Z", "author": {"login": "mevan-karu"}, "path": "components/org.wso2.carbon.identity.oauth.scope.endpoint/src/main/java/org/wso2/carbon/identity/oauth/scope/endpoint/expmapper/JsonProcessingExceptionMapper.java", "diffHunk": "@@ -0,0 +1,58 @@\n+\n+/*\n+ * Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.wso2.carbon.identity.oauth.scope.endpoint.expmapper;\n+\n+import com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException;\n+import org.apache.commons.logging.Log;\n+import org.apache.commons.logging.LogFactory;\n+import org.wso2.carbon.identity.oauth.scope.endpoint.dto.ErrorDTO;\n+\n+import javax.ws.rs.core.HttpHeaders;\n+import javax.ws.rs.core.MediaType;\n+import javax.ws.rs.core.Response;\n+import javax.ws.rs.ext.ExceptionMapper;\n+\n+/**\n+ * Handles exceptions when an incorrect json requests body is received.\n+ * Sends a default error response.\n+ */\n+public class JsonProcessingExceptionMapper implements ExceptionMapper<UnrecognizedPropertyException> {\n+\n+    private static final Log log = LogFactory.getLog(JsonProcessingExceptionMapper.class);\n+    public static final String ERROR_MESSAGE = \"Invalid Request\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTE2MTg3Nw=="}, "originalCommit": {"oid": "fe4d6ac45d52c25bf79acee55fdd165189405e1b"}, "originalPosition": 39}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5ODIxNTYzOnYy", "diffSide": "RIGHT", "path": "components/org.wso2.carbon.identity.oauth/src/main/java/org/wso2/carbon/identity/oauth2/Oauth2ScopeConstants.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wMlQxNjowMTo0NlrOG6mFWQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wMlQxNjowMTo0NlrOG6mFWQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDA5NDU1Mw==", "bodyText": "Let's add a full stop", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1325#discussion_r464094553", "createdAt": "2020-08-02T16:01:46Z", "author": {"login": "Buddhimah"}, "path": "components/org.wso2.carbon.identity.oauth/src/main/java/org/wso2/carbon/identity/oauth2/Oauth2ScopeConstants.java", "diffHunk": "@@ -42,6 +42,7 @@\n                 \"Scope with the name %s already exists in the system. Please use a different scope name.\"),\n         ERROR_CODE_BAD_REQUEST_SCOPE_NOT_SPECIFIED(\"41005\", \"Scope is not specified.\"),\n         ERROR_CODE_BAD_REQUEST_SCOPE_NAME_CONTAINS_WHITESPACES(\"41006\", \"Scope name: %s contains white spaces.\"),\n+        ERROR_CODE_BAD_REQUEST(\"41007\", \"Invalid request\"),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44db29f2abafa6c7b4a13fe9f5ca3529b634d58b"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3636, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}