{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMzNTY5NTcx", "number": 1396, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQxMDoxMDoxMlrOEFAWzQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQxMToxMzoyNVrOEFBcSA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczNjg0MTczOnYy", "diffSide": "RIGHT", "path": "components/org.wso2.carbon.identity.oauth.endpoint/src/main/java/org/wso2/carbon/identity/oauth/endpoint/util/ClaimUtil.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQxMDoxMDoxMlrOGi-mWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQxMDozNjowMVrOGi_RDA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTMzMDM5NQ==", "bodyText": "Can userstore be null?", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1396#discussion_r439330395", "createdAt": "2020-06-12T10:10:12Z", "author": {"login": "dewniMW"}, "path": "components/org.wso2.carbon.identity.oauth.endpoint/src/main/java/org/wso2/carbon/identity/oauth/endpoint/util/ClaimUtil.java", "diffHunk": "@@ -271,11 +272,12 @@ private static String getMultiAttributeSeparator(String username,\n         return claimSeparator;\n     }\n \n-    private static Map<String, String> getUserClaimsFromUserStore(String username,\n+    private static Map<String, String> getUserClaimsFromUserStore(String username, String userStoreDomain,\n                                                                   UserRealm realm,\n                                                                   List<String> claimURIList) throws UserStoreException {\n \n-        UserStoreManager userstore = realm.getUserStoreManager();\n+        //Retrieve the UserStoreManager for the authenticated user's user-store domain\n+        UserStoreManager userstore = realm.getUserStoreManager().getSecondaryUserStoreManager(userStoreDomain);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "37b96c1c550cdea2a6cb3f2eb08e7d0d10bf8c90"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTM0MTMyNA==", "bodyText": "unlikely, user store can be null. But added a null check", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1396#discussion_r439341324", "createdAt": "2020-06-12T10:36:01Z", "author": {"login": "ayshsandu"}, "path": "components/org.wso2.carbon.identity.oauth.endpoint/src/main/java/org/wso2/carbon/identity/oauth/endpoint/util/ClaimUtil.java", "diffHunk": "@@ -271,11 +272,12 @@ private static String getMultiAttributeSeparator(String username,\n         return claimSeparator;\n     }\n \n-    private static Map<String, String> getUserClaimsFromUserStore(String username,\n+    private static Map<String, String> getUserClaimsFromUserStore(String username, String userStoreDomain,\n                                                                   UserRealm realm,\n                                                                   List<String> claimURIList) throws UserStoreException {\n \n-        UserStoreManager userstore = realm.getUserStoreManager();\n+        //Retrieve the UserStoreManager for the authenticated user's user-store domain\n+        UserStoreManager userstore = realm.getUserStoreManager().getSecondaryUserStoreManager(userStoreDomain);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTMzMDM5NQ=="}, "originalCommit": {"oid": "37b96c1c550cdea2a6cb3f2eb08e7d0d10bf8c90"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczNzAxOTYwOnYy", "diffSide": "RIGHT", "path": "components/org.wso2.carbon.identity.oauth.endpoint/src/main/java/org/wso2/carbon/identity/oauth/endpoint/util/ClaimUtil.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQxMToxMzoyNVrOGjATBA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQxMToxMzoyNVrOGjATBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTM1ODIxMg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    //Retrieve the UserStoreManager for the authenticated user's user-store domain\n          \n          \n            \n                    // Retrieve the UserStoreManager for the authenticated user's user-store domain.", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1396#discussion_r439358212", "createdAt": "2020-06-12T11:13:25Z", "author": {"login": "tharindu-bandara"}, "path": "components/org.wso2.carbon.identity.oauth.endpoint/src/main/java/org/wso2/carbon/identity/oauth/endpoint/util/ClaimUtil.java", "diffHunk": "@@ -271,11 +272,15 @@ private static String getMultiAttributeSeparator(String username,\n         return claimSeparator;\n     }\n \n-    private static Map<String, String> getUserClaimsFromUserStore(String username,\n+    private static Map<String, String> getUserClaimsFromUserStore(String username, String userStoreDomain,\n                                                                   UserRealm realm,\n                                                                   List<String> claimURIList) throws UserStoreException {\n \n-        UserStoreManager userstore = realm.getUserStoreManager();\n+        //Retrieve the UserStoreManager for the authenticated user's user-store domain", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06081551906b58d0556d9034858e3ce5f1796676"}, "originalPosition": 20}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3717, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}