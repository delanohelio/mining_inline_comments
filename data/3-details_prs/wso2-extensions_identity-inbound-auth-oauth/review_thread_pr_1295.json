{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYzNDgyNjg2", "number": 1295, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQwODoyMDozN1rODYa53Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QxMDoyNToyMVrODYxiCA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2OTMzMjEzOnYy", "diffSide": "RIGHT", "path": "components/org.wso2.carbon.identity.oauth/src/main/java/org/wso2/carbon/identity/oauth/config/OAuthServerConfiguration.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQwODoyMDozN1rOFeRJbA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQwODoyMDozN1rOFeRJbA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzI4MjU0MA==", "bodyText": "shall we add a full stop at the end", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1295#discussion_r367282540", "createdAt": "2020-01-16T08:20:37Z", "author": {"login": "Buddhimah"}, "path": "components/org.wso2.carbon.identity.oauth/src/main/java/org/wso2/carbon/identity/oauth/config/OAuthServerConfiguration.java", "diffHunk": "@@ -1167,12 +1169,33 @@ public String getOpenIDConnectIDTokenSubjectClaim() {\n     }\n \n     /**\n-     * Returns if skip user consent enabled or not\n+     * Returns if login consent enabled or not", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "60e6b560353109be5c9e292d7487d4c0c0f3208c"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2OTMzNDk4OnYy", "diffSide": "RIGHT", "path": "components/org.wso2.carbon.identity.oauth/src/main/java/org/wso2/carbon/identity/oauth/config/OAuthServerConfiguration.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQwODoyMTo1MVrOFeRLGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQwODoyMTo1MVrOFeRLGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzI4Mjk3MQ==", "bodyText": "shall we add a full stop at the end", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1295#discussion_r367282971", "createdAt": "2020-01-16T08:21:51Z", "author": {"login": "Buddhimah"}, "path": "components/org.wso2.carbon.identity.oauth/src/main/java/org/wso2/carbon/identity/oauth/config/OAuthServerConfiguration.java", "diffHunk": "@@ -1167,12 +1169,33 @@ public String getOpenIDConnectIDTokenSubjectClaim() {\n     }\n \n     /**\n-     * Returns if skip user consent enabled or not\n+     * Returns if login consent enabled or not\n      *\n-     * @return\n      */\n     public boolean getOpenIDConnectSkipeUserConsentConfig() {\n-        return \"true\".equalsIgnoreCase(openIDConnectSkipUserConsent);\n+\n+        if (openIDConnectSkipLoginConsent == null) {\n+            if (log.isDebugEnabled()) {\n+                log.debug(\"The SkipLoginConsent property is not configured. So retrieving the SkipUserConsent value\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "60e6b560353109be5c9e292d7487d4c0c0f3208c"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2OTMzNTMxOnYy", "diffSide": "RIGHT", "path": "components/org.wso2.carbon.identity.oauth/src/main/java/org/wso2/carbon/identity/oauth/config/OAuthServerConfiguration.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQwODoyMTo1OVrOFeRLSg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQwODoyMTo1OVrOFeRLSg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzI4MzAxOA==", "bodyText": "shall we add a full stop at the end", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1295#discussion_r367283018", "createdAt": "2020-01-16T08:21:59Z", "author": {"login": "Buddhimah"}, "path": "components/org.wso2.carbon.identity.oauth/src/main/java/org/wso2/carbon/identity/oauth/config/OAuthServerConfiguration.java", "diffHunk": "@@ -1167,12 +1169,33 @@ public String getOpenIDConnectIDTokenSubjectClaim() {\n     }\n \n     /**\n-     * Returns if skip user consent enabled or not\n+     * Returns if login consent enabled or not\n      *\n-     * @return\n      */\n     public boolean getOpenIDConnectSkipeUserConsentConfig() {\n-        return \"true\".equalsIgnoreCase(openIDConnectSkipUserConsent);\n+\n+        if (openIDConnectSkipLoginConsent == null) {\n+            if (log.isDebugEnabled()) {\n+                log.debug(\"The SkipLoginConsent property is not configured. So retrieving the SkipUserConsent value\");\n+            }\n+            Boolean.parseBoolean(openIDConnectSkipUserConsent);\n+        }\n+        return Boolean.parseBoolean(openIDConnectSkipLoginConsent);\n+    }\n+\n+    /**\n+     * Returns if skip logout consent enabled or not.\n+     *\n+     */\n+    public boolean getOpenIDConnectSkipLogoutConsentConfig() {\n+\n+        if (openIDConnectSkipLogoutConsent == null) {\n+            if (log.isDebugEnabled()) {\n+                log.debug(\"The SkipLogoutConsent property is not configured. So retrieving the SkipUserConsent value\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "60e6b560353109be5c9e292d7487d4c0c0f3208c"}, "originalPosition": 38}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2OTMzOTQ2OnYy", "diffSide": "RIGHT", "path": "components/org.wso2.carbon.identity.oauth/src/main/java/org/wso2/carbon/identity/oauth/config/OAuthServerConfiguration.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQwODoyMzo0OFrOFeRN6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQwODoyMzo0OFrOFeRN6w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzI4MzY5MQ==", "bodyText": "why we are using openIDConnectSkipUserConsent variable as a string ?", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1295#discussion_r367283691", "createdAt": "2020-01-16T08:23:48Z", "author": {"login": "Buddhimah"}, "path": "components/org.wso2.carbon.identity.oauth/src/main/java/org/wso2/carbon/identity/oauth/config/OAuthServerConfiguration.java", "diffHunk": "@@ -1167,12 +1169,33 @@ public String getOpenIDConnectIDTokenSubjectClaim() {\n     }\n \n     /**\n-     * Returns if skip user consent enabled or not\n+     * Returns if login consent enabled or not\n      *\n-     * @return\n      */\n     public boolean getOpenIDConnectSkipeUserConsentConfig() {\n-        return \"true\".equalsIgnoreCase(openIDConnectSkipUserConsent);\n+\n+        if (openIDConnectSkipLoginConsent == null) {\n+            if (log.isDebugEnabled()) {\n+                log.debug(\"The SkipLoginConsent property is not configured. So retrieving the SkipUserConsent value\");\n+            }\n+            Boolean.parseBoolean(openIDConnectSkipUserConsent);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "60e6b560353109be5c9e292d7487d4c0c0f3208c"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3MzAyNTgyOnYy", "diffSide": "RIGHT", "path": "components/org.wso2.carbon.identity.oauth/src/main/java/org/wso2/carbon/identity/oauth/config/OAuthServerConfiguration.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QxMDoxOTo0OFrOFe0ljg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QxMzozNDo0NlrOFe5FlA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzg2MzE4Mg==", "bodyText": "Shouldn't this be backward compatible? That means if\n(ConfigElements.OPENID_CONNECT_SKIP_LOGOUT_CONSENT)) is null, shouldn't we read ConfigElements.OPENID_CONNECT_SKIP_USER_CONSENT from config file and set its value to 'openIDConnectSkipLogoutConsent'?", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1295#discussion_r367863182", "createdAt": "2020-01-17T10:19:48Z", "author": {"login": "emswbandara"}, "path": "components/org.wso2.carbon.identity.oauth/src/main/java/org/wso2/carbon/identity/oauth/config/OAuthServerConfiguration.java", "diffHunk": "@@ -2510,12 +2520,19 @@ private void parseOpenIDConnectConfig(OMElement oauthConfigElem) {\n                                 .getText().trim();\n             }\n             if (openIDConnectConfigElem\n-                    .getFirstChildWithName(getQNameWithIdentityNS(ConfigElements.OPENID_CONNECT_SKIP_USER_CONSENT)) !=\n+                    .getFirstChildWithName(getQNameWithIdentityNS(ConfigElements.OPENID_CONNECT_SKIP_LOGIN_CONSENT)) !=\n                     null) {\n-                openIDConnectSkipUserConsent =\n+                openIDConnectSkipLoginConsent = Boolean.parseBoolean(\n                         openIDConnectConfigElem.getFirstChildWithName(\n-                                getQNameWithIdentityNS(ConfigElements.OPENID_CONNECT_SKIP_USER_CONSENT))\n-                                .getText().trim();\n+                                getQNameWithIdentityNS(ConfigElements.OPENID_CONNECT_SKIP_LOGIN_CONSENT))\n+                                .getText().trim());\n+            }\n+            if (openIDConnectConfigElem.getFirstChildWithName(\n+                    getQNameWithIdentityNS(ConfigElements.OPENID_CONNECT_SKIP_LOGOUT_CONSENT)) != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a69d1ad93f7332d61118d55462fc1fdc75cb638c"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzkzNjkxNg==", "bodyText": "I have added the old configuration as a fallback", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1295#discussion_r367936916", "createdAt": "2020-01-17T13:34:46Z", "author": {"login": "senthalan"}, "path": "components/org.wso2.carbon.identity.oauth/src/main/java/org/wso2/carbon/identity/oauth/config/OAuthServerConfiguration.java", "diffHunk": "@@ -2510,12 +2520,19 @@ private void parseOpenIDConnectConfig(OMElement oauthConfigElem) {\n                                 .getText().trim();\n             }\n             if (openIDConnectConfigElem\n-                    .getFirstChildWithName(getQNameWithIdentityNS(ConfigElements.OPENID_CONNECT_SKIP_USER_CONSENT)) !=\n+                    .getFirstChildWithName(getQNameWithIdentityNS(ConfigElements.OPENID_CONNECT_SKIP_LOGIN_CONSENT)) !=\n                     null) {\n-                openIDConnectSkipUserConsent =\n+                openIDConnectSkipLoginConsent = Boolean.parseBoolean(\n                         openIDConnectConfigElem.getFirstChildWithName(\n-                                getQNameWithIdentityNS(ConfigElements.OPENID_CONNECT_SKIP_USER_CONSENT))\n-                                .getText().trim();\n+                                getQNameWithIdentityNS(ConfigElements.OPENID_CONNECT_SKIP_LOGIN_CONSENT))\n+                                .getText().trim());\n+            }\n+            if (openIDConnectConfigElem.getFirstChildWithName(\n+                    getQNameWithIdentityNS(ConfigElements.OPENID_CONNECT_SKIP_LOGOUT_CONSENT)) != null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzg2MzE4Mg=="}, "originalCommit": {"oid": "a69d1ad93f7332d61118d55462fc1fdc75cb638c"}, "originalPosition": 51}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3MzAzOTQ0OnYy", "diffSide": "RIGHT", "path": "components/org.wso2.carbon.identity.oidc.session/src/main/java/org/wso2/carbon/identity/oidc/session/servlet/OIDCLogoutServlet.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QxMDoyNToyMVrOFe0uOQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QxMDoyNToyMVrOFe0uOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzg2NTQwMQ==", "bodyText": "shall we rename the variable name to skipLogoutConsent?", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1295#discussion_r367865401", "createdAt": "2020-01-17T10:25:21Z", "author": {"login": "emswbandara"}, "path": "components/org.wso2.carbon.identity.oidc.session/src/main/java/org/wso2/carbon/identity/oidc/session/servlet/OIDCLogoutServlet.java", "diffHunk": "@@ -752,14 +752,23 @@ private void removeSessionDataFromCache(String sessionDataKey) {\n      */\n     private boolean getOpenIDConnectSkipUserConsent(String idTokenHint) throws ParseException, IdentityOAuth2Exception {\n \n+        boolean skipLogoutConsentConfig =", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a69d1ad93f7332d61118d55462fc1fdc75cb638c"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3622, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}