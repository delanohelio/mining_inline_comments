{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQwMTQ3MTIy", "number": 1515, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxMDozNTo1NVrOFFhEVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxOToyMDowMFrOFFw6vg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxMzI4OTgzOnYy", "diffSide": "RIGHT", "path": "components/org.wso2.carbon.identity.oidc.session/src/main/java/org/wso2/carbon/identity/oidc/session/backchannellogout/DefaultLogoutTokenBuilder.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxMDozNTo1NVrOIGEIxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxMTowNTo0OVrOIGFXmw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzIzMDE0OQ==", "bodyText": "Lets add a constant for this", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1515#discussion_r543230149", "createdAt": "2020-12-15T10:35:55Z", "author": {"login": "mefarazath"}, "path": "components/org.wso2.carbon.identity.oidc.session/src/main/java/org/wso2/carbon/identity/oidc/session/backchannellogout/DefaultLogoutTokenBuilder.java", "diffHunk": "@@ -161,15 +161,15 @@ private JWTClaimsSet buildJwtToken(OIDCSessionState sessionState, String tenantD\n         long currentTimeInMillis = Calendar.getInstance().getTimeInMillis();\n         Date iat = new Date(currentTimeInMillis);\n         String sid = getSidClaim(sessionState);\n-        JSONObject event = new JSONObject().put(\"http://schemas.openidnet/event/backchannel-logout\",\n+        JSONObject event = new JSONObject().appendField(\"http://schemas.openidnet/event/backchannel-logout\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "47f189d30b428cd26bfe07b64421168927ce50f8"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzI1MDMzMQ==", "bodyText": "Fixed in - 09e790c, 667595f", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1515#discussion_r543250331", "createdAt": "2020-12-15T11:05:49Z", "author": {"login": "ThaminduR"}, "path": "components/org.wso2.carbon.identity.oidc.session/src/main/java/org/wso2/carbon/identity/oidc/session/backchannellogout/DefaultLogoutTokenBuilder.java", "diffHunk": "@@ -161,15 +161,15 @@ private JWTClaimsSet buildJwtToken(OIDCSessionState sessionState, String tenantD\n         long currentTimeInMillis = Calendar.getInstance().getTimeInMillis();\n         Date iat = new Date(currentTimeInMillis);\n         String sid = getSidClaim(sessionState);\n-        JSONObject event = new JSONObject().put(\"http://schemas.openidnet/event/backchannel-logout\",\n+        JSONObject event = new JSONObject().appendField(\"http://schemas.openidnet/event/backchannel-logout\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzIzMDE0OQ=="}, "originalCommit": {"oid": "47f189d30b428cd26bfe07b64421168927ce50f8"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxMzI5NjYyOnYy", "diffSide": "RIGHT", "path": "components/org.wso2.carbon.identity.oidc.session/src/main/java/org/wso2/carbon/identity/oidc/session/backchannellogout/DefaultLogoutTokenBuilder.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxMDozNzoxOFrOIGEMhw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxMDo0MDo0NVrOIGEViQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzIzMTExMQ==", "bodyText": "@piraveena was the previous behaviour wrong according the spec?", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1515#discussion_r543231111", "createdAt": "2020-12-15T10:37:18Z", "author": {"login": "mefarazath"}, "path": "components/org.wso2.carbon.identity.oidc.session/src/main/java/org/wso2/carbon/identity/oidc/session/backchannellogout/DefaultLogoutTokenBuilder.java", "diffHunk": "@@ -161,15 +161,15 @@ private JWTClaimsSet buildJwtToken(OIDCSessionState sessionState, String tenantD\n         long currentTimeInMillis = Calendar.getInstance().getTimeInMillis();\n         Date iat = new Date(currentTimeInMillis);\n         String sid = getSidClaim(sessionState);\n-        JSONObject event = new JSONObject().put(\"http://schemas.openidnet/event/backchannel-logout\",\n+        JSONObject event = new JSONObject().appendField(\"http://schemas.openidnet/event/backchannel-logout\",\n                 new JSONObject());\n \n         JWTClaimsSet.Builder jwtClaimsSetBuilder = new JWTClaimsSet.Builder();\n         jwtClaimsSetBuilder.subject(sub);\n         jwtClaimsSetBuilder.issuer(iss);\n         jwtClaimsSetBuilder.audience(audience);\n         jwtClaimsSetBuilder.claim(\"jti\", jti);\n-        jwtClaimsSetBuilder.claim(\"event\", event);\n+        jwtClaimsSetBuilder.claim(\"events\", event);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "47f189d30b428cd26bfe07b64421168927ce50f8"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzIzMzQxNw==", "bodyText": "previously we had it as event. But spec says it should be events", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1515#discussion_r543233417", "createdAt": "2020-12-15T10:40:45Z", "author": {"login": "piraveena"}, "path": "components/org.wso2.carbon.identity.oidc.session/src/main/java/org/wso2/carbon/identity/oidc/session/backchannellogout/DefaultLogoutTokenBuilder.java", "diffHunk": "@@ -161,15 +161,15 @@ private JWTClaimsSet buildJwtToken(OIDCSessionState sessionState, String tenantD\n         long currentTimeInMillis = Calendar.getInstance().getTimeInMillis();\n         Date iat = new Date(currentTimeInMillis);\n         String sid = getSidClaim(sessionState);\n-        JSONObject event = new JSONObject().put(\"http://schemas.openidnet/event/backchannel-logout\",\n+        JSONObject event = new JSONObject().appendField(\"http://schemas.openidnet/event/backchannel-logout\",\n                 new JSONObject());\n \n         JWTClaimsSet.Builder jwtClaimsSetBuilder = new JWTClaimsSet.Builder();\n         jwtClaimsSetBuilder.subject(sub);\n         jwtClaimsSetBuilder.issuer(iss);\n         jwtClaimsSetBuilder.audience(audience);\n         jwtClaimsSetBuilder.claim(\"jti\", jti);\n-        jwtClaimsSetBuilder.claim(\"event\", event);\n+        jwtClaimsSetBuilder.claim(\"events\", event);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzIzMTExMQ=="}, "originalCommit": {"oid": "47f189d30b428cd26bfe07b64421168927ce50f8"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxMzQyNjg2OnYy", "diffSide": "RIGHT", "path": "components/org.wso2.carbon.identity.oidc.session/src/main/java/org/wso2/carbon/identity/oidc/session/backchannellogout/DefaultLogoutTokenBuilder.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxMTowNjowNFrOIGFYLA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxMTowODoxMlrOIGFdow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzI1MDQ3Ng==", "bodyText": "change it to private", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1515#discussion_r543250476", "createdAt": "2020-12-15T11:06:04Z", "author": {"login": "piraveena"}, "path": "components/org.wso2.carbon.identity.oidc.session/src/main/java/org/wso2/carbon/identity/oidc/session/backchannellogout/DefaultLogoutTokenBuilder.java", "diffHunk": "@@ -72,6 +72,7 @@\n     private static final String OPENID_IDP_ENTITY_ID = \"IdPEntityId\";\n     private static final String ERROR_GET_RESIDENT_IDP =\n             \"Error while getting Resident Identity Provider of '%s' tenant.\";\n+    public static final String BACKCHANNEL_LOGOUT_EVENT = \"http://schemas.openidnet/event/backchannel-logout\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "09e790c015d97acdf73780ab3a4af4e027c70a78"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzI1MTg3NQ==", "bodyText": "Fixed in - 1850ef6", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1515#discussion_r543251875", "createdAt": "2020-12-15T11:08:12Z", "author": {"login": "ThaminduR"}, "path": "components/org.wso2.carbon.identity.oidc.session/src/main/java/org/wso2/carbon/identity/oidc/session/backchannellogout/DefaultLogoutTokenBuilder.java", "diffHunk": "@@ -72,6 +72,7 @@\n     private static final String OPENID_IDP_ENTITY_ID = \"IdPEntityId\";\n     private static final String ERROR_GET_RESIDENT_IDP =\n             \"Error while getting Resident Identity Provider of '%s' tenant.\";\n+    public static final String BACKCHANNEL_LOGOUT_EVENT = \"http://schemas.openidnet/event/backchannel-logout\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzI1MDQ3Ng=="}, "originalCommit": {"oid": "09e790c015d97acdf73780ab3a4af4e027c70a78"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxNTg4NjcwOnYy", "diffSide": "RIGHT", "path": "components/org.wso2.carbon.identity.oidc.session/src/main/java/org/wso2/carbon/identity/oidc/session/backchannellogout/DefaultLogoutTokenBuilder.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxOToyMDowMFrOIGb-7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQwNjowNzoyOVrOIGzhSA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzYyMDg0NA==", "bodyText": "Won't we need this same constant during logout token validation?", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1515#discussion_r543620844", "createdAt": "2020-12-15T19:20:00Z", "author": {"login": "mefarazath"}, "path": "components/org.wso2.carbon.identity.oidc.session/src/main/java/org/wso2/carbon/identity/oidc/session/backchannellogout/DefaultLogoutTokenBuilder.java", "diffHunk": "@@ -72,6 +72,7 @@\n     private static final String OPENID_IDP_ENTITY_ID = \"IdPEntityId\";\n     private static final String ERROR_GET_RESIDENT_IDP =\n             \"Error while getting Resident Identity Provider of '%s' tenant.\";\n+    private static final String BACKCHANNEL_LOGOUT_EVENT = \"http://schemas.openidnet/event/backchannel-logout\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "02726ff43ec62d4704b470154ede78b62864df87"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Mzg5NTU2NQ==", "bodyText": "we need. But it should go in the outbound component.", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1515#discussion_r543895565", "createdAt": "2020-12-16T03:40:27Z", "author": {"login": "piraveena"}, "path": "components/org.wso2.carbon.identity.oidc.session/src/main/java/org/wso2/carbon/identity/oidc/session/backchannellogout/DefaultLogoutTokenBuilder.java", "diffHunk": "@@ -72,6 +72,7 @@\n     private static final String OPENID_IDP_ENTITY_ID = \"IdPEntityId\";\n     private static final String ERROR_GET_RESIDENT_IDP =\n             \"Error while getting Resident Identity Provider of '%s' tenant.\";\n+    private static final String BACKCHANNEL_LOGOUT_EVENT = \"http://schemas.openidnet/event/backchannel-logout\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzYyMDg0NA=="}, "originalCommit": {"oid": "02726ff43ec62d4704b470154ede78b62864df87"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDAwNjQ3Mg==", "bodyText": "Cool. Then we are good", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1515#discussion_r544006472", "createdAt": "2020-12-16T06:07:29Z", "author": {"login": "mefarazath"}, "path": "components/org.wso2.carbon.identity.oidc.session/src/main/java/org/wso2/carbon/identity/oidc/session/backchannellogout/DefaultLogoutTokenBuilder.java", "diffHunk": "@@ -72,6 +72,7 @@\n     private static final String OPENID_IDP_ENTITY_ID = \"IdPEntityId\";\n     private static final String ERROR_GET_RESIDENT_IDP =\n             \"Error while getting Resident Identity Provider of '%s' tenant.\";\n+    private static final String BACKCHANNEL_LOGOUT_EVENT = \"http://schemas.openidnet/event/backchannel-logout\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzYyMDg0NA=="}, "originalCommit": {"oid": "02726ff43ec62d4704b470154ede78b62864df87"}, "originalPosition": 16}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3554, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}