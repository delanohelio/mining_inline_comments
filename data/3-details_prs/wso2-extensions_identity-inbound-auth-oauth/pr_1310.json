{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcwNTUzMDE5", "number": 1310, "title": "Fix device flow queries for MySQL", "bodyText": "Proposed changes in this pull request\n\nAdding an alias to the derived table as it's mandatory in MySQL for every derived table.", "createdAt": "2020-02-03T22:25:31Z", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1310", "merged": true, "mergeCommit": {"oid": "19ef356fa209f657506377c42608e72d050f1890"}, "closed": true, "closedAt": "2020-02-04T09:16:27Z", "author": {"login": "tharindu-bandara"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcA0nJJAH2gAyMzcwNTUzMDE5OjRkYzFmZTc1MDU0NzUzMjcxZWM1NjVlMDkzNGE5YmQ4MmM0MWFkMjk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcA9TBUAFqTM1Mjc5NDQ1NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4dc1fe75054753271ec565e0934a9bd82c41ad29", "author": {"user": {"login": "tharindu-bandara", "name": "Tharindu Bandara"}}, "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/commit/4dc1fe75054753271ec565e0934a9bd82c41ad29", "committedDate": "2020-02-03T22:23:54Z", "message": "Fix device flow queries for MySQL\n\nAdding an alias to the derived table as it's mandatory in MySQL for every derived table."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUyNjczNDE5", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1310#pullrequestreview-352673419", "createdAt": "2020-02-04T01:23:50Z", "commit": {"oid": "4dc1fe75054753271ec565e0934a9bd82c41ad29"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQwMToyMzo1MVrOFlFfWg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQwMToyMzo1MVrOFlFfWg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDQzMTU3OA==", "bodyText": "AS keyword is not supported in some places in Oracle DB. This seems to be such a place.", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1310#discussion_r374431578", "createdAt": "2020-02-04T01:23:51Z", "author": {"login": "madurangasiriwardena"}, "path": "components/org.wso2.carbon.identity.oauth/src/main/java/org/wso2/carbon/identity/oauth2/device/dao/SQLQueries.java", "diffHunk": "@@ -46,7 +46,7 @@ private SQLQueries() {\n \n         public static final String GET_CONSUMER_KEY_FOR_DEVICE_CODE = \"SELECT CONSUMER_KEY FROM (SELECT * \" +\n                 \"FROM IDN_OAUTH_CONSUMER_APPS INNER JOIN IDN_OAUTH2_DEVICE_FLOW ON IDN_OAUTH_CONSUMER_APPS.ID = \" +\n-                \"IDN_OAUTH2_DEVICE_FLOW.CONSUMER_KEY_ID) WHERE DEVICE_CODE = ?\";\n+                \"IDN_OAUTH2_DEVICE_FLOW.CONSUMER_KEY_ID) AS CONSUMER_APPS_WITH_DEVICE_FLOW WHERE DEVICE_CODE = ?\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4dc1fe75054753271ec565e0934a9bd82c41ad29"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUyNjk3NDYw", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1310#pullrequestreview-352697460", "createdAt": "2020-02-04T02:55:34Z", "commit": {"oid": "4dc1fe75054753271ec565e0934a9bd82c41ad29"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQwMjo1NTozNFrOFlGuYA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQwMjo1NTozNFrOFlGuYA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDQ1MTgwOA==", "bodyText": "Yes, we don't want to put AS keyword in front of derived table CONSUMER_APPS_WITH_DEVICE_FLOW. AS keyword is not a mandatory keyword in SQL queries. it's an optional we can skip because DBs like Oracles doesn't support AS keyword.\n               \"IDN_OAUTH2_DEVICE_FLOW.CONSUMER_KEY_ID) CONSUMER_APPS_WITH_DEVICE_FLOW WHERE DEVICE_CODE = ?\"; this will be fine\nyou can refer to   GET_IDN_OIDC_SCOPES_CLAIMS query..", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1310#discussion_r374451808", "createdAt": "2020-02-04T02:55:34Z", "author": {"login": "sarubi"}, "path": "components/org.wso2.carbon.identity.oauth/src/main/java/org/wso2/carbon/identity/oauth2/device/dao/SQLQueries.java", "diffHunk": "@@ -46,7 +46,7 @@ private SQLQueries() {\n \n         public static final String GET_CONSUMER_KEY_FOR_DEVICE_CODE = \"SELECT CONSUMER_KEY FROM (SELECT * \" +\n                 \"FROM IDN_OAUTH_CONSUMER_APPS INNER JOIN IDN_OAUTH2_DEVICE_FLOW ON IDN_OAUTH_CONSUMER_APPS.ID = \" +\n-                \"IDN_OAUTH2_DEVICE_FLOW.CONSUMER_KEY_ID) WHERE DEVICE_CODE = ?\";\n+                \"IDN_OAUTH2_DEVICE_FLOW.CONSUMER_KEY_ID) AS CONSUMER_APPS_WITH_DEVICE_FLOW WHERE DEVICE_CODE = ?\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDQzMTU3OA=="}, "originalCommit": {"oid": "4dc1fe75054753271ec565e0934a9bd82c41ad29"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5596967e09377e503dad4f94e0b674f221be4a85", "author": {"user": {"login": "tharindu-bandara", "name": "Tharindu Bandara"}}, "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/commit/5596967e09377e503dad4f94e0b674f221be4a85", "committedDate": "2020-02-04T06:50:55Z", "message": "Remove optional 'AS' keyword to support Oracle DB"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUyNzYxMDU3", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1310#pullrequestreview-352761057", "createdAt": "2020-02-04T07:12:41Z", "commit": {"oid": "5596967e09377e503dad4f94e0b674f221be4a85"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUyNzYzNjcy", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1310#pullrequestreview-352763672", "createdAt": "2020-02-04T07:20:06Z", "commit": {"oid": "5596967e09377e503dad4f94e0b674f221be4a85"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUyNzk0NDU1", "url": "https://github.com/wso2-extensions/identity-inbound-auth-oauth/pull/1310#pullrequestreview-352794455", "createdAt": "2020-02-04T08:31:04Z", "commit": {"oid": "5596967e09377e503dad4f94e0b674f221be4a85"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3202, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}