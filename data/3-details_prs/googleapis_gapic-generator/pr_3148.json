{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzNzE3Njc2", "number": 3148, "title": "bazel: go build gen check for cloud in pkg name", "bodyText": "The assumption that Cloud APIs will have the Cloud-specific auth scope was not entirely true. I'm not sure if the API I encountered was incorrect or what, but we can also check for cloud in the proto package name. This should give us coverage of APIs that either have the Cloud-specific auth scope or are actually placed in the Cloud uber-package.", "createdAt": "2020-03-25T17:14:54Z", "url": "https://github.com/googleapis/gapic-generator/pull/3148", "merged": true, "mergeCommit": {"oid": "0cb8ba884a96f4a4d7c63f1a94906ef00906e0fc"}, "closed": true, "closedAt": "2020-03-26T15:31:46Z", "author": {"login": "noahdietz"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcRKujxAH2gAyMzkzNzE3Njc2OjE4NDQyYmZlZDI0NzVlYjBjNzhhYWMzYTdhNTQyYjZmZmZlNmM5ZjE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcRVDpVgFqTM4MTcwNzI5NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "18442bfed2475eb0c78aac3a7a542b6fffe6c9f1", "author": {"user": {"login": "noahdietz", "name": "Noah Dietz"}}, "url": "https://github.com/googleapis/gapic-generator/commit/18442bfed2475eb0c78aac3a7a542b6fffe6c9f1", "committedDate": "2020-03-25T17:12:42Z", "message": "bazel: go build gen check for cloud in pkg name"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMzc4ODQz", "url": "https://github.com/googleapis/gapic-generator/pull/3148#pullrequestreview-381378843", "createdAt": "2020-03-25T17:31:57Z", "commit": {"oid": "18442bfed2475eb0c78aac3a7a542b6fffe6c9f1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNzozMTo1N1rOF7mdpw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNzozMTo1N1rOF7mdpw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODA0MDQ4Nw==", "bodyText": "This looks weird. isCloud should define if it is a cloud or no. Here it does it partially, and it can be overriden by protoPkg value (which also an argument to this function).\nPlease make sure that isCloud completely defines the cloud thing. (i.e. it an be as straightforward as moving protoPkg.contains(\"cloud\") from here to the place where assembleGoImportPath is called.", "url": "https://github.com/googleapis/gapic-generator/pull/3148#discussion_r398040487", "createdAt": "2020-03-25T17:31:57Z", "author": {"login": "vam-google"}, "path": "rules_gapic/bazel/src/main/java/com/google/api/codegen/bazel/BazelBuildFileView.java", "diffHunk": "@@ -94,7 +94,7 @@ private String assembleGoImportPath(boolean isCloud, String protoPkg, String goP\n     goPkg = goPkg.replaceFirst(\"cloud\\\\/\", \"\");\n \n     String goImport = \"\";\n-    if (isCloud) {\n+    if (isCloud || protoPkg.contains(\"cloud\")) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "18442bfed2475eb0c78aac3a7a542b6fffe6c9f1"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a092ec0727fa437f5382d53c087ed634a628706f", "author": {"user": {"login": "noahdietz", "name": "Noah Dietz"}}, "url": "https://github.com/googleapis/gapic-generator/commit/a092ec0727fa437f5382d53c087ed634a628706f", "committedDate": "2020-03-25T17:35:09Z", "message": "refactor cloud check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a047c788ef9bcf85703bad1f118eff0853817344", "author": {"user": {"login": "noahdietz", "name": "Noah Dietz"}}, "url": "https://github.com/googleapis/gapic-generator/commit/a047c788ef9bcf85703bad1f118eff0853817344", "committedDate": "2020-03-25T17:36:42Z", "message": "fix protoPkg check"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxNzA3Mjk0", "url": "https://github.com/googleapis/gapic-generator/pull/3148#pullrequestreview-381707294", "createdAt": "2020-03-26T05:14:47Z", "commit": {"oid": "a047c788ef9bcf85703bad1f118eff0853817344"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1372, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}