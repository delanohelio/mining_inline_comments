{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE2MzM3NDIw", "number": 3193, "title": "fix: handle wildcard parent patterns", "bodyText": "The monolith generator currently NPEs when it encounters pattern: \"*\" in conjunction with actual patterns, such as with AlertPolicy.", "createdAt": "2020-05-11T20:43:22Z", "url": "https://github.com/googleapis/gapic-generator/pull/3193", "merged": true, "mergeCommit": {"oid": "acd31461ee04391df79ae8a33f793569791aa1a0"}, "closed": true, "closedAt": "2020-05-12T22:29:47Z", "author": {"login": "miraleung"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcgV3kvAH2gAyNDE2MzM3NDIwOjI3MTliY2Y3ZTRiNDAyMTM0NThmNzQzZGE0YTJhZTk0MDM2YWZhMGQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcgo6GFgH2gAyNDE2MzM3NDIwOmNhNTJhNGFlOGFkMTM3ZGIzMGJkZWQ0N2FlN2Y5ZDcxYzgxZjYzZjM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2719bcf7e4b40213458f743da4a2ae94036afa0d", "author": {"user": {"login": "miraleung", "name": "Mira Leung"}}, "url": "https://github.com/googleapis/gapic-generator/commit/2719bcf7e4b40213458f743da4a2ae94036afa0d", "committedDate": "2020-05-11T20:40:22Z", "message": "fix: handle wildcard parent patterns"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5NTI5OTIz", "url": "https://github.com/googleapis/gapic-generator/pull/3193#pullrequestreview-409529923", "createdAt": "2020-05-11T21:04:52Z", "commit": {"oid": "2719bcf7e4b40213458f743da4a2ae94036afa0d"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQyMTowNDo1MlrOGTtVsg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQyMTozMDowMlrOGTuGAQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzMxODk2Mg==", "bodyText": "super not important: please format these (some have spaces after /* some don't)", "url": "https://github.com/googleapis/gapic-generator/pull/3193#discussion_r423318962", "createdAt": "2020-05-11T21:04:52Z", "author": {"login": "vam-google"}, "path": "src/main/java/com/google/api/codegen/config/ResourceDescriptorConfig.java", "diffHunk": "@@ -75,6 +76,19 @@\n   /** The entity name for the resource config. */\n   public abstract String getDerivedEntityName();\n \n+  public static ResourceDescriptorConfig getWildcardResource(ProtoFile protoFile) {\n+    return new AutoValue_ResourceDescriptorConfig(\n+        /* isDefinedAtMessageLevel= */ false,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2719bcf7e4b40213458f743da4a2ae94036afa0d"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzMyNTgzOA==", "bodyText": "Is it a debug artifact?", "url": "https://github.com/googleapis/gapic-generator/pull/3193#discussion_r423325838", "createdAt": "2020-05-11T21:18:30Z", "author": {"login": "vam-google"}, "path": "src/test/java/com/google/api/codegen/config/ResourceDescriptorConfigTest.java", "diffHunk": "@@ -294,6 +294,61 @@ public void testGetChildParentResourceMap_MultiParentsMultiPatterns() {\n     assertThat(childParentResourceMap.get(\"food.google.com/Sauce\")).containsExactly(veggie, meat);\n   }\n \n+  @Test\n+  public void testGetChildParentResourceMap_MultiParentsMultiPatternsWithWildcard() {\n+    ResourceDescriptorConfig sauce =\n+        ResourceDescriptorConfig.from(\n+            ResourceDescriptor.newBuilder()\n+                .setType(\"food.google.com/Sauce\")\n+                .addPattern(\"steaks/{steak}/sauces/{sauce}\")\n+                .addPattern(\"barbeques/{barbeque}/sauces/{sauce}\")\n+                .addPattern(\"tofus/{tofu}/sauces/{sauce}\")\n+                .addPattern(\"salads/{salad}/sauces/{sauce}\")\n+                .addPattern(\"*\")\n+                .build(),\n+            protoFile,\n+            true);\n+\n+    ResourceDescriptorConfig meat =\n+        ResourceDescriptorConfig.from(\n+            ResourceDescriptor.newBuilder()\n+                .setType(\"food.google.com/Meat\")\n+                .addPattern(\"steaks/{steak}\")\n+                .addPattern(\"barbeques/{barbeque}\")\n+                .build(),\n+            protoFile,\n+            true);\n+\n+    ResourceDescriptorConfig veggie =\n+        ResourceDescriptorConfig.from(\n+            ResourceDescriptor.newBuilder()\n+                .setType(\"food.google.com/Veggie\")\n+                .addPattern(\"tofus/{tofu}\")\n+                .addPattern(\"salads/{salad}\")\n+                .build(),\n+            protoFile,\n+            true);\n+\n+    ResourceDescriptorConfig wildcard =\n+        ResourceDescriptorConfig.from(\n+            ResourceDescriptor.newBuilder().addPattern(\"*\").build(), protoFile, false);\n+\n+    Map<String, ResourceDescriptorConfig> descriptorConfigMap =\n+        getDescriptorConfigMap(sauce, meat, veggie);\n+    Map<String, List<ResourceDescriptorConfig>> patternResourceDescriptorMap =\n+        ResourceDescriptorConfig.getPatternResourceMap(Arrays.asList(sauce, meat, veggie));\n+\n+    Map<String, List<ResourceDescriptorConfig>> childParentResourceMap =\n+        ResourceDescriptorConfig.getChildParentResourceMap(\n+            descriptorConfigMap, patternResourceDescriptorMap);\n+    System.out.println(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2719bcf7e4b40213458f743da4a2ae94036afa0d"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzMzMTMyOQ==", "bodyText": "Are these intended, or are they the debug artifacts?", "url": "https://github.com/googleapis/gapic-generator/pull/3193#discussion_r423331329", "createdAt": "2020-05-11T21:30:02Z", "author": {"login": "vam-google"}, "path": "src/main/java/com/google/api/codegen/config/ResourceDescriptorConfig.java", "diffHunk": "@@ -218,7 +232,25 @@ private String getUnqualifiedTypeName() {\n         ImmutableList.copyOf(descriptorConfigMap.values());\n     for (Map.Entry<String, ResourceDescriptorConfig> entry : descriptorConfigMap.entrySet()) {\n       ResourceDescriptorConfig childResource = entry.getValue();\n+      System.out.println(\n+          \"DEL: Looking at entry \"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2719bcf7e4b40213458f743da4a2ae94036afa0d"}, "originalPosition": 33}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ca52a4ae8ad137db30bded47ae7f9d71c81f63f3", "author": {"user": {"login": "miraleung", "name": "Mira Leung"}}, "url": "https://github.com/googleapis/gapic-generator/commit/ca52a4ae8ad137db30bded47ae7f9d71c81f63f3", "committedDate": "2020-05-12T18:51:19Z", "message": "fix: cleanups for handling wildcard parent patterns"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1393, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}