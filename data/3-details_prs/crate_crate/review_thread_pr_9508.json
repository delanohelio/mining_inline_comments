{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYyNjg3NzI5", "number": 9508, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQxNToyMzoyNlrODX4sYw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQxNToyMzoyNlrODX4sYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2MzcyNzA3OnYy", "diffSide": "RIGHT", "path": "pgwire/src/main/java/io/crate/protocols/postgres/parser/PgArrayASTVisitor.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQxNToyMzoyNlrOFdbVbg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQxNjoyNjoyM1rOFddqpw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjQwMDg3OA==", "bodyText": "Made the quoted/non-quoted distinction to be able to handle null without quotes as real null value instead of a null string literal. Not sure if there would be a better way to accomplish this.", "url": "https://github.com/crate/crate/pull/9508#discussion_r366400878", "createdAt": "2020-01-14T15:23:26Z", "author": {"login": "mfussenegger"}, "path": "pgwire/src/main/java/io/crate/protocols/postgres/parser/PgArrayASTVisitor.java", "diffHunk": "@@ -50,7 +50,27 @@ public Object visitArray(PgArrayParser.ArrayContext ctx) {\n \n     @Override\n     public Object visitValue(PgArrayParser.ValueContext ctx) {\n-        return convert.apply(processArrayItem(ctx.getText().getBytes(UTF_8)));\n+        PgArrayParser.StringContext stringContext = ctx.string();\n+        if (stringContext == null) {\n+            return convert.apply(processArrayItem(ctx.getText().getBytes(UTF_8)));\n+        }\n+        Object value = visit(stringContext);\n+        if (value == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3b507cb302c9891cb14d4c79451c7b56e16c796b"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjQyNjYwNg==", "bodyText": "can we drop https://github.com/crate/crate/pull/9508/files#diff-56e21a74f1c628321abf2180bc314273R90-R92 such as we have dedicated rules to match quoted and unquoted strings? otherwise, lgtm", "url": "https://github.com/crate/crate/pull/9508#discussion_r366426606", "createdAt": "2020-01-14T16:05:42Z", "author": {"login": "kovrus"}, "path": "pgwire/src/main/java/io/crate/protocols/postgres/parser/PgArrayASTVisitor.java", "diffHunk": "@@ -50,7 +50,27 @@ public Object visitArray(PgArrayParser.ArrayContext ctx) {\n \n     @Override\n     public Object visitValue(PgArrayParser.ValueContext ctx) {\n-        return convert.apply(processArrayItem(ctx.getText().getBytes(UTF_8)));\n+        PgArrayParser.StringContext stringContext = ctx.string();\n+        if (stringContext == null) {\n+            return convert.apply(processArrayItem(ctx.getText().getBytes(UTF_8)));\n+        }\n+        Object value = visit(stringContext);\n+        if (value == null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjQwMDg3OA=="}, "originalCommit": {"oid": "3b507cb302c9891cb14d4c79451c7b56e16c796b"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjQzOTA3OQ==", "bodyText": "@kovrus pushed a fixup", "url": "https://github.com/crate/crate/pull/9508#discussion_r366439079", "createdAt": "2020-01-14T16:26:23Z", "author": {"login": "mfussenegger"}, "path": "pgwire/src/main/java/io/crate/protocols/postgres/parser/PgArrayASTVisitor.java", "diffHunk": "@@ -50,7 +50,27 @@ public Object visitArray(PgArrayParser.ArrayContext ctx) {\n \n     @Override\n     public Object visitValue(PgArrayParser.ValueContext ctx) {\n-        return convert.apply(processArrayItem(ctx.getText().getBytes(UTF_8)));\n+        PgArrayParser.StringContext stringContext = ctx.string();\n+        if (stringContext == null) {\n+            return convert.apply(processArrayItem(ctx.getText().getBytes(UTF_8)));\n+        }\n+        Object value = visit(stringContext);\n+        if (value == null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjQwMDg3OA=="}, "originalCommit": {"oid": "3b507cb302c9891cb14d4c79451c7b56e16c796b"}, "originalPosition": 10}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1108, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}