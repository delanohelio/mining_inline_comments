{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA3MzEzMDE4", "number": 9879, "title": "Use the new function registry for the `pg_get_keywords` and `empty_row` table functions.", "bodyText": "Summary of the changes / Why this improves CrateDB\nThese table functions do not require the support for the row type signature parsing,\ntherefore, it is ok to migrate them even before the support for the signature parsing is implemented, see #9878.\nChecklist\n\n Added an entry in CHANGES.txt for user facing changes\n Updated documentation & sql_features table for user facing changes\n Touched code is covered by tests\n CLA is signed\n This does not contain breaking changes, or if it does:\n\nIt is released within a major release\nIt is recorded in CHANGES.txt\nIt was marked as deprecated in an earlier release if possible\nYou've thought about the consequences and other components are adapted\n(E.g. AdminUI)", "createdAt": "2020-04-22T14:04:38Z", "url": "https://github.com/crate/crate/pull/9879", "merged": true, "mergeCommit": {"oid": "f36a9d5ea8eb015bdc3fa130fb18bc8b623761b8"}, "closed": true, "closedAt": "2020-04-24T08:50:25Z", "author": {"login": "kovrus"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcaY8upAFqTM5ODg5MjY4Nw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcatE-4gBqjMyNjgzNTEwNDA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4ODkyNjg3", "url": "https://github.com/crate/crate/pull/9879#pullrequestreview-398892687", "createdAt": "2020-04-23T08:52:10Z", "commit": {"oid": "e1bf73949a79761fb3407595ae0700dce9f2d66a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QwODo1MjoxMFrOGKeQqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QwODo1MjoxMFrOGKeQqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzYzNDcyOA==", "bodyText": "Once #9853 is merged we should use the signature's return type. Probably FunctionInfo will be gone once all functions uses the signature registry.\nMaybe we could wait a bit for #9853 as it maybe merged soon.", "url": "https://github.com/crate/crate/pull/9879#discussion_r413634728", "createdAt": "2020-04-23T08:52:10Z", "author": {"login": "seut"}, "path": "sql/src/main/java/io/crate/expression/tablefunctions/EmptyRowTableFunction.java", "diffHunk": "@@ -66,7 +61,9 @@ public FunctionInfo info() {\n \n         @Override\n         public RowType returnType() {\n-            return emptyRow;\n+            assert info.returnType() instanceof RowType", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e1bf73949a79761fb3407595ae0700dce9f2d66a"}, "originalPosition": 30}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e1bf73949a79761fb3407595ae0700dce9f2d66a", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/e1bf73949a79761fb3407595ae0700dce9f2d66a", "committedDate": "2020-04-22T13:56:40Z", "message": "Use new function registry for the pg_get_keywords function."}, "afterCommit": {"oid": "1490b73d2ecb4591d4ddf2598a04961b07a8fbd0", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/1490b73d2ecb4591d4ddf2598a04961b07a8fbd0", "committedDate": "2020-04-23T10:10:31Z", "message": "Use new function registry for the pg_get_keywords function."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1490b73d2ecb4591d4ddf2598a04961b07a8fbd0", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/1490b73d2ecb4591d4ddf2598a04961b07a8fbd0", "committedDate": "2020-04-23T10:10:31Z", "message": "Use new function registry for the pg_get_keywords function."}, "afterCommit": {"oid": "9c0139bc5f36e03c2f32e97946c7e87e455e11ba", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/9c0139bc5f36e03c2f32e97946c7e87e455e11ba", "committedDate": "2020-04-23T13:08:20Z", "message": "Use new function registry for the pg_get_keywords function."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk5MTI3MDgy", "url": "https://github.com/crate/crate/pull/9879#pullrequestreview-399127082", "createdAt": "2020-04-23T14:01:35Z", "commit": {"oid": "9c0139bc5f36e03c2f32e97946c7e87e455e11ba"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9c0139bc5f36e03c2f32e97946c7e87e455e11ba", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/9c0139bc5f36e03c2f32e97946c7e87e455e11ba", "committedDate": "2020-04-23T13:08:20Z", "message": "Use new function registry for the pg_get_keywords function."}, "afterCommit": {"oid": "1716ee247e3f00d2fdd155f2ddb2435121914197", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/1716ee247e3f00d2fdd155f2ddb2435121914197", "committedDate": "2020-04-23T14:06:36Z", "message": "Use new function registry for the pg_get_keywords function."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1716ee247e3f00d2fdd155f2ddb2435121914197", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/1716ee247e3f00d2fdd155f2ddb2435121914197", "committedDate": "2020-04-23T14:06:36Z", "message": "Use new function registry for the pg_get_keywords function."}, "afterCommit": {"oid": "46ce45d9975c5d263428041a4cba5c5e153c3cf9", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/46ce45d9975c5d263428041a4cba5c5e153c3cf9", "committedDate": "2020-04-23T14:08:35Z", "message": "Use new function registry for the pg_get_keywords function."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "46ce45d9975c5d263428041a4cba5c5e153c3cf9", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/46ce45d9975c5d263428041a4cba5c5e153c3cf9", "committedDate": "2020-04-23T14:08:35Z", "message": "Use new function registry for the pg_get_keywords function."}, "afterCommit": {"oid": "823a395c06bfbc43cc6d032c8297c573d3a64b6e", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/823a395c06bfbc43cc6d032c8297c573d3a64b6e", "committedDate": "2020-04-24T07:47:00Z", "message": "Use new function registry for the pg_get_keywords function."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a1faad062d63a28bd8fd8a07e19b49b22d1f241", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/3a1faad062d63a28bd8fd8a07e19b49b22d1f241", "committedDate": "2020-04-24T08:19:12Z", "message": "Use new func registry for the empty row table function."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b5c61f4eef13f0fd09e41ce343a1c888b3b3c92f", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/b5c61f4eef13f0fd09e41ce343a1c888b3b3c92f", "committedDate": "2020-04-24T08:19:12Z", "message": "Use new function registry for the pg_get_keywords function."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "823a395c06bfbc43cc6d032c8297c573d3a64b6e", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/823a395c06bfbc43cc6d032c8297c573d3a64b6e", "committedDate": "2020-04-24T07:47:00Z", "message": "Use new function registry for the pg_get_keywords function."}, "afterCommit": {"oid": "b5c61f4eef13f0fd09e41ce343a1c888b3b3c92f", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/b5c61f4eef13f0fd09e41ce343a1c888b3b3c92f", "committedDate": "2020-04-24T08:19:12Z", "message": "Use new function registry for the pg_get_keywords function."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3545, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}