{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgyMjY5MzYz", "number": 9716, "title": "Make sure undefined type can be streamed as text to clients", "bodyText": "Summary of the changes / Why this improves CrateDB\nf013bbe enabled support for queries\nlike:\nSELECT obj['x'] FROM unnest([{x=10}]);\n\nThis worked via HTTP, but didn't via pg-wire because obj['x'] has\ntype undefined. undefined is mapped to VarCharType which didn't\nhandle any instances other than String.\n(I also want to follow up on giving obj['x'] the proper type, but I think that the streaming should work anyways)\nChecklist\n\n User relevant changes are recorded in CHANGES.txt\n Touched code is covered by tests\n Documentation has been updated if necessary\n CLA is signed\n This does not contain breaking changes, or if it does:\n\nIt is released within a major release\nIt is recorded in CHANGES.txt\nIt was marked as deprecated in an earlier release if possible\nYou've thought about the consequences and other components are adapted\n(E.g. AdminUI)", "createdAt": "2020-03-02T09:24:38Z", "url": "https://github.com/crate/crate/pull/9716", "merged": true, "mergeCommit": {"oid": "98800004da06c9124c1e4c03523f89f7f1441cbd"}, "closed": true, "closedAt": "2020-03-02T09:59:13Z", "author": {"login": "mfussenegger"}, "timelineItems": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcJqJT5gH2gAyMzgyMjY5MzYzOjA1ODgxNmRmY2RiZTc5OWI0NDNiYzBmZGQxY2E3ZjFlOTE5YjQ0NGY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcJqncnAFqTM2NzA2NjQ3Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "058816dfcdbe799b443bc0fdd1ca7f1e919b444f", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/058816dfcdbe799b443bc0fdd1ca7f1e919b444f", "committedDate": "2020-03-02T09:17:35Z", "message": "Make sure undefined type can be streamed as text to clients\n\nf013bbeae63e7e73f11c6d96268d04faa46e8ed4 enabled support for queries\nlike:\n\n    SELECT obj['x'] FROM unnest([{x=10}]);\n\nThis worked via HTTP, but didn't via pg-wire because `obj['x']` has\ntype `undefined`. `undefined` is mapped to `VarCharType` which didn't\nhandle any instances other than `String`."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3MDY2NDcy", "url": "https://github.com/crate/crate/pull/9716#pullrequestreview-367066472", "createdAt": "2020-03-02T09:50:18Z", "commit": {"oid": "058816dfcdbe799b443bc0fdd1ca7f1e919b444f"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQwOTo1MDoxOFrOFwZP8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQwOTo1MDoxOFrOFwZP8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjI4OTY0OA==", "bodyText": "lgtm\nNote: Maybe we can use BasePGTypeTest to test VarCharType and move other related tests there as well.", "url": "https://github.com/crate/crate/pull/9716#discussion_r386289648", "createdAt": "2020-03-02T09:50:18Z", "author": {"login": "kovrus"}, "path": "sql/src/test/java/io/crate/protocols/postgres/types/PGTypesTest.java", "diffHunk": "@@ -65,6 +65,12 @@ public void testCrate2PGType() {\n             instanceOf(VarCharType.class));\n     }\n \n+    @Test\n+    public void test_undefined_type_can_stream_non_string_values() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "058816dfcdbe799b443bc0fdd1ca7f1e919b444f"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3547, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}