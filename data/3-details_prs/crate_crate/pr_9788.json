{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkyNDA4ODQy", "number": 9788, "title": "Allow using the system JDK  to compile code and execute tests.", "bodyText": "Summary of the changes / Why this improves CrateDB\nBy default, the bundled JDK is used to compile code and run tests.\nThe new system parameter makes Gradle run its compile and test\ntasks with the host system JDK.\nRelated to #9754\nChecklist\n\n Added an entry in CHANGES.txt for user facing changes\n Updated documentation & sql_features table for user facing changes\n Touched code is covered by tests\n CLA is signed\n This does not contain breaking changes, or if it does:\n\nIt is released within a major release\nIt is recorded in CHANGES.txt\nIt was marked as deprecated in an earlier release if possible\nYou've thought about the consequences and other components are adapted\n(E.g. AdminUI)", "createdAt": "2020-03-23T14:09:33Z", "url": "https://github.com/crate/crate/pull/9788", "merged": true, "mergeCommit": {"oid": "b53e3911e240f0cd9dc6bef0541cc07c2a67a117"}, "closed": true, "closedAt": "2020-03-24T09:43:14Z", "author": {"login": "kovrus"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcQfMMngFqTM3OTQ4Mjc1OQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcQvMKzABqjMxNTg3MTQ3NjQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5NDgyNzU5", "url": "https://github.com/crate/crate/pull/9788#pullrequestreview-379482759", "createdAt": "2020-03-23T14:29:15Z", "commit": {"oid": "f6cbd50c4a886e04550be49fa5a1f2a4e58eae75"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5NTI3MzA0", "url": "https://github.com/crate/crate/pull/9788#pullrequestreview-379527304", "createdAt": "2020-03-23T15:14:29Z", "commit": {"oid": "f6cbd50c4a886e04550be49fa5a1f2a4e58eae75"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxNToxNDoyOVrOF6KFUA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxNToxNDoyOVrOF6KFUA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjUyNjkyOA==", "bodyText": "It is not needed. The compileJava and test tasks were configured in the root build file.", "url": "https://github.com/crate/crate/pull/9788#discussion_r396526928", "createdAt": "2020-03-23T15:14:29Z", "author": {"login": "kovrus"}, "path": "es/build.gradle", "diffHunk": "@@ -13,20 +13,12 @@ subprojects {\n     }\n \n     compileJava {\n-        dependsOn rootProject.jdks.runtime", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f6cbd50c4a886e04550be49fa5a1f2a4e58eae75"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5NTM3MDI2", "url": "https://github.com/crate/crate/pull/9788#pullrequestreview-379537026", "createdAt": "2020-03-23T15:24:22Z", "commit": {"oid": "f6cbd50c4a886e04550be49fa5a1f2a4e58eae75"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxNToyNDoyM1rOF6KjNA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxNToyNDoyM1rOF6KjNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjUzNDU4MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Please note that the system JDK should be the same as the bundled JDK.\n          \n      \n    \n    \n  \n\nI'd remove this as it somewhat invalidates the previously mentioned use-case of doing a cross-platform build.", "url": "https://github.com/crate/crate/pull/9788#discussion_r396534580", "createdAt": "2020-03-23T15:24:23Z", "author": {"login": "mfussenegger"}, "path": "devs/docs/basics.rst", "diffHunk": "@@ -74,15 +74,40 @@ To get a full list of all available tasks, run::\n \n     $ ./gradlew tasks\n \n-Such as CrateDB uses the pre-configured bundled version of OpenJDK_, it is\n-possible to run, compile, and test CrateDB by configuring the target JDK.\n-For instance::\n+By default, CrateDB uses the pre-configured bundled version of OpenJDK_. It\n+is also possible to run, compile, and test CrateDB by configuring the target\n+JDK. For instance::\n \n     $ ./gradlew distTar -Dbundled_jdk_os=linux \\\n                         -Dbundled_jdk_arch=aarch64 \\\n                         -Dbundled_jdk_vendor=adoptopenjdk \\\n                         -Dbundled_jdk_version=13.0.2+8\n \n+It is possible to compile the code base and run tests with the host system JDK.\n+To achieve that, pass the ``-DuseSystemJdk`` system parameter along with a\n+Gradle task. For example, to run unit tests with the host system JDK, execute\n+the following command::\n+\n+    $ ./gradlew test -DuseSystemJdk\n+\n+All the tasks related to packaging and releasing (``distTar``, ``release``) or\n+tasks that depend on them (``itest``) will ignore the ``-DuseSystemJdk``\n+parameter. This means that the compilation and test execution can be\n+done with the system JDK, but releasing and packaging will still use the\n+bundled JDK. The ``-DuseSystemJdk`` is useful for doing releases and\n+cross-platform builds. For instance, you can build a CrateDB package for\n+Windows with the corresponding to the platform bundled JDK on a Linux\n+machine::\n+\n+    $ ./gradlew distZip \\\n+                -Dbundled_jdk_os=windows \\\n+                -Dbundled_jdk_arch=x64 \\\n+                -Dbundled_jdk_vendor=adoptopenjdk \\\n+                -Dbundled_jdk_version=13.0.2+8 \\\n+                -DuseSystemJdk\n+\n+Please note that the system JDK should be the same as the bundled JDK.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f6cbd50c4a886e04550be49fa5a1f2a4e58eae75"}, "originalPosition": 61}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f6cbd50c4a886e04550be49fa5a1f2a4e58eae75", "author": {"user": {"login": "matthijskrul", "name": "Matthijs Krul"}}, "url": "https://github.com/crate/crate/commit/f6cbd50c4a886e04550be49fa5a1f2a4e58eae75", "committedDate": "2020-03-23T14:26:47Z", "message": "Update basics.rst"}, "afterCommit": {"oid": "f2c43d8709d43d1795a222292b10cf56574b87a6", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/f2c43d8709d43d1795a222292b10cf56574b87a6", "committedDate": "2020-03-23T15:31:30Z", "message": "Add the `releaseZip` gradle task."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9e85b58becdbb81c6f125a088835ec0c7159b128", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/9e85b58becdbb81c6f125a088835ec0c7159b128", "committedDate": "2020-03-24T09:07:23Z", "message": "Add the ``useSystemJdk`` parameter for gradle compile and test tasks.\n\nBy default the bundled JDK is used to compile code and run tests.\nThe new system parameter makes Gradle to run its compile and test\ntask with the host system JDK."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3dd3c074107152ba809dc835bef0c5a88f4bd3bb", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/3dd3c074107152ba809dc835bef0c5a88f4bd3bb", "committedDate": "2020-03-24T09:07:23Z", "message": "Add the `releaseZip` gradle task."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f2c43d8709d43d1795a222292b10cf56574b87a6", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/f2c43d8709d43d1795a222292b10cf56574b87a6", "committedDate": "2020-03-23T15:31:30Z", "message": "Add the `releaseZip` gradle task."}, "afterCommit": {"oid": "3dd3c074107152ba809dc835bef0c5a88f4bd3bb", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/3dd3c074107152ba809dc835bef0c5a88f4bd3bb", "committedDate": "2020-03-24T09:07:23Z", "message": "Add the `releaseZip` gradle task."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3435, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}