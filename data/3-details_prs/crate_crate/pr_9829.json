{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk1NzA4OTY0", "number": 9829, "title": "Refactor all array scalars to new function registry", "bodyText": "", "createdAt": "2020-03-30T14:59:50Z", "url": "https://github.com/crate/crate/pull/9829", "merged": true, "mergeCommit": {"oid": "898b5c78acdcf2e117e6332103ecb08eda8c6c74"}, "closed": true, "closedAt": "2020-03-31T15:30:52Z", "author": {"login": "seut"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcSwMZPABqjMxNzkxODk3NzU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcTFl8mgFqTM4NDg5NjUxNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9f1d8b9f5830e17438d9c176df469b812e9e3ed4", "author": {"user": {"login": "seut", "name": "Sebastian Utz"}}, "url": "https://github.com/crate/crate/commit/9f1d8b9f5830e17438d9c176df469b812e9e3ed4", "committedDate": "2020-03-30T14:59:01Z", "message": "Refactor all array scalars to new function registry"}, "afterCommit": {"oid": "21f3083fad883910c0176d6e2fc3fc01951430d6", "author": {"user": {"login": "seut", "name": "Sebastian Utz"}}, "url": "https://github.com/crate/crate/commit/21f3083fad883910c0176d6e2fc3fc01951430d6", "committedDate": "2020-03-30T15:24:42Z", "message": "Refactor all array scalars to new function registry"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0MDE0ODA2", "url": "https://github.com/crate/crate/pull/9829#pullrequestreview-384014806", "createdAt": "2020-03-30T16:14:11Z", "commit": {"oid": "21f3083fad883910c0176d6e2fc3fc01951430d6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxNjoxNDoxMVrOF9xdsw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxNjoxNDoxMVrOF9xdsw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDMxNzg3NQ==", "bodyText": "The rule that the first array dictates the array element type currently isn't supported by the new signature binder.\nWe also documented it here https://crate.io/docs/crate/reference/en/latest/general/builtins/scalar.html#array-unique-first-array-second-array, I didn't know. This doctest fails now.\nCurrently the precedence dictates the common type and thus element type. I wonder why we've implemented array_unique it like that, any input here? I couldn't find any resource defining/describing this behaviour.", "url": "https://github.com/crate/crate/pull/9829#discussion_r400317875", "createdAt": "2020-03-30T16:14:11Z", "author": {"login": "seut"}, "path": "sql/src/test/java/io/crate/expression/scalar/ArrayUniqueFunctionTest.java", "diffHunk": "@@ -99,7 +99,7 @@ public void testOneArgument() throws Exception {\n \n     @Test\n     public void testDifferentButConvertableInnerTypes() throws Exception {\n-        assertEvaluate(\"array_unique([10, 20], [10.1, 20.0])\", Arrays.asList(10L, 20L));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "21f3083fad883910c0176d6e2fc3fc01951430d6"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "21f3083fad883910c0176d6e2fc3fc01951430d6", "author": {"user": {"login": "seut", "name": "Sebastian Utz"}}, "url": "https://github.com/crate/crate/commit/21f3083fad883910c0176d6e2fc3fc01951430d6", "committedDate": "2020-03-30T15:24:42Z", "message": "Refactor all array scalars to new function registry"}, "afterCommit": {"oid": "2415e47e82113792da10422f4b465f7119be8612", "author": {"user": {"login": "seut", "name": "Sebastian Utz"}}, "url": "https://github.com/crate/crate/commit/2415e47e82113792da10422f4b465f7119be8612", "committedDate": "2020-03-31T13:32:00Z", "message": "fixup! Refactor all array scalars to new function registry"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0NzQzMTgx", "url": "https://github.com/crate/crate/pull/9829#pullrequestreview-384743181", "createdAt": "2020-03-31T13:40:51Z", "commit": {"oid": "2415e47e82113792da10422f4b465f7119be8612"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2415e47e82113792da10422f4b465f7119be8612", "author": {"user": {"login": "seut", "name": "Sebastian Utz"}}, "url": "https://github.com/crate/crate/commit/2415e47e82113792da10422f4b465f7119be8612", "committedDate": "2020-03-31T13:32:00Z", "message": "fixup! Refactor all array scalars to new function registry"}, "afterCommit": {"oid": "b85fbd8f256b70c725d51e132bf234425fbc2c5f", "author": {"user": {"login": "seut", "name": "Sebastian Utz"}}, "url": "https://github.com/crate/crate/commit/b85fbd8f256b70c725d51e132bf234425fbc2c5f", "committedDate": "2020-03-31T13:41:28Z", "message": "Refactor all array scalars to new function registry"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eddb7cc3a245b971e4446145cc3ea36bd927e66a", "author": {"user": {"login": "seut", "name": "Sebastian Utz"}}, "url": "https://github.com/crate/crate/commit/eddb7cc3a245b971e4446145cc3ea36bd927e66a", "committedDate": "2020-03-31T14:56:23Z", "message": "Refactor all array scalars to new function registry"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b85fbd8f256b70c725d51e132bf234425fbc2c5f", "author": {"user": {"login": "seut", "name": "Sebastian Utz"}}, "url": "https://github.com/crate/crate/commit/b85fbd8f256b70c725d51e132bf234425fbc2c5f", "committedDate": "2020-03-31T13:41:28Z", "message": "Refactor all array scalars to new function registry"}, "afterCommit": {"oid": "eddb7cc3a245b971e4446145cc3ea36bd927e66a", "author": {"user": {"login": "seut", "name": "Sebastian Utz"}}, "url": "https://github.com/crate/crate/commit/eddb7cc3a245b971e4446145cc3ea36bd927e66a", "committedDate": "2020-03-31T14:56:23Z", "message": "Refactor all array scalars to new function registry"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0ODk2NTE2", "url": "https://github.com/crate/crate/pull/9829#pullrequestreview-384896516", "createdAt": "2020-03-31T16:19:11Z", "commit": {"oid": "eddb7cc3a245b971e4446145cc3ea36bd927e66a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxNjoxOToxMVrOF-dwYA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxNjoxOToxMVrOF-dwYA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTA0MzU1Mg==", "bodyText": "uses*", "url": "https://github.com/crate/crate/pull/9829#discussion_r401043552", "createdAt": "2020-03-31T16:19:11Z", "author": {"login": "matthijskrul"}, "path": "docs/appendices/release-notes/unreleased.rst", "diffHunk": "@@ -42,6 +42,10 @@ Unreleased Changes\n Breaking Changes\n ================\n \n+- The ``array_unique`` scalar function use a common element type based on the", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eddb7cc3a245b971e4446145cc3ea36bd927e66a"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3464, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}