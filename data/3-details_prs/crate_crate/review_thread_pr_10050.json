{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI4MzM5NjIx", "number": 10050, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxMDowNDo0M1rOEC5W-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxMTozODo1MFrOEC6-rQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxNDcyMzc4OnYy", "diffSide": "RIGHT", "path": "server/src/main/java/io/crate/metadata/information/InformationColumnsTableInfo.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxMDowNDo0M1rOGfodOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxMDoxMDo1MlrOGfopbQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTgyMTg4Mg==", "bodyText": "Minor: this could be simplified. However this is up to you.\nif (DataTypes.isSameType(r.info.valueType(), STRING)) {\n  var stringType = ((StringType) r.info.valueType());\n  if (!stringType.unbound()) {\n    return stringType.lengthLimit();\n  }\n}\nreturn null;", "url": "https://github.com/crate/crate/pull/10050#discussion_r435821882", "createdAt": "2020-06-05T10:04:43Z", "author": {"login": "mkleen"}, "path": "server/src/main/java/io/crate/metadata/information/InformationColumnsTableInfo.java", "diffHunk": "@@ -81,7 +82,18 @@\n                     return null;\n                 }\n             })\n-            .add(\"character_maximum_length\", INTEGER, ignored -> null)\n+            .add(\"character_maximum_length\", INTEGER, r -> {\n+                if (DataTypes.isSameType(r.info.valueType(), STRING)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f3e2da11963effb825404265faab41607c83aaa6"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTgyNTAwNQ==", "bodyText": "not sure, I find a bit more explicit and consistent if-else flow a bit easier to read, but no strong opinion.", "url": "https://github.com/crate/crate/pull/10050#discussion_r435825005", "createdAt": "2020-06-05T10:10:52Z", "author": {"login": "kovrus"}, "path": "server/src/main/java/io/crate/metadata/information/InformationColumnsTableInfo.java", "diffHunk": "@@ -81,7 +82,18 @@\n                     return null;\n                 }\n             })\n-            .add(\"character_maximum_length\", INTEGER, ignored -> null)\n+            .add(\"character_maximum_length\", INTEGER, r -> {\n+                if (DataTypes.isSameType(r.info.valueType(), STRING)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTgyMTg4Mg=="}, "originalCommit": {"oid": "f3e2da11963effb825404265faab41607c83aaa6"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxNDgwMzI2OnYy", "diffSide": "RIGHT", "path": "server/src/main/java/io/crate/metadata/information/InformationColumnsTableInfo.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxMDozMTozM1rOGfpP9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxMDozMTozM1rOGfpP9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTgzNDg3MA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            if (DataTypes.isSameType(r.info.valueType(), STRING)) {\n          \n          \n            \n                            if (r.info.valueType() instanceof StringType) {\n          \n      \n    \n    \n  \n\nGiven that there is a cast in the next line, the isSameType is kinda unnecessary abstraction here and it would also imply that this callsite is aware about the implementation details of isSameType", "url": "https://github.com/crate/crate/pull/10050#discussion_r435834870", "createdAt": "2020-06-05T10:31:33Z", "author": {"login": "mfussenegger"}, "path": "server/src/main/java/io/crate/metadata/information/InformationColumnsTableInfo.java", "diffHunk": "@@ -81,7 +82,18 @@\n                     return null;\n                 }\n             })\n-            .add(\"character_maximum_length\", INTEGER, ignored -> null)\n+            .add(\"character_maximum_length\", INTEGER, r -> {\n+                if (DataTypes.isSameType(r.info.valueType(), STRING)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f3e2da11963effb825404265faab41607c83aaa6"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxNDk4OTI1OnYy", "diffSide": "RIGHT", "path": "docs/general/information-schema.rst", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxMTozODo1MFrOGfrChg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxMTozODo1MFrOGfrChg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTg2NDE5OA==", "bodyText": "\"than\" should be \"then\"", "url": "https://github.com/crate/crate/pull/10050#discussion_r435864198", "createdAt": "2020-06-05T11:38:50Z", "author": {"login": "infoverload"}, "path": "docs/general/information-schema.rst", "diffHunk": "@@ -378,9 +378,9 @@ infinite recursion of your mind, beware!)::\n +-------------------------------+-----------------------------------------------+---------------+\n | ``column_default``            | The default expression of the column          | ``TEXT``      |\n +-------------------------------+-----------------------------------------------+---------------+\n-| ``character_maximum_length``  | Not implemented (always returns ``NULL``)     | ``INTEGER``   |\n-|                               |                                               |               |\n-|                               | Please refer to :ref:`data-type-text` type    |               |\n+| ``character_maximum_length``  | If the data type is a :ref:`character type    | ``INTEGER``   |\n+|                               | <character-data-types>` than return the       |               |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "03db164b17cf6913df306e5fdbf601062001f072"}, "originalPosition": 8}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1374, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}