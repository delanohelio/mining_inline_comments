{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc4NDI5NDM0", "number": 10484, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QwOToyOToyNFrOEf5-Kg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QwOTozMDo0MFrOEf6AMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAxODkxMTE0OnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/elasticsearch/index/IndexSettings.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QwOToyOToyNVrOHMeOhg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxMTo1MDozMVrOHMi-0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mjg0MDE5OA==", "bodyText": "Why don't we keep the note related to soft-deletes?", "url": "https://github.com/crate/crate/pull/10484#discussion_r482840198", "createdAt": "2020-09-03T09:29:25Z", "author": {"login": "seut"}, "path": "server/src/main/java/org/elasticsearch/index/IndexSettings.java", "diffHunk": "@@ -193,6 +176,24 @@\n     public static final Setting<Long> INDEX_SOFT_DELETES_RETENTION_OPERATIONS_SETTING =\n         Setting.longSetting(\"index.soft_deletes.retention.operations\", 0, 0, Property.IndexScope, Property.Dynamic);\n \n+    /**\n+     * Controls how long translog files that are no longer needed for persistence reasons\n+     * will be kept around before being deleted. A longer retention policy is useful to increase\n+     * the chance of ops based recoveries.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e8d07c5d4101198845872e943ca8901f0b7696d"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjkxODA5Nw==", "bodyText": "I thought that the setting was just moved and didn't pay close enough attention to the comment :(\nUpdated it now.", "url": "https://github.com/crate/crate/pull/10484#discussion_r482918097", "createdAt": "2020-09-03T11:50:31Z", "author": {"login": "mfussenegger"}, "path": "server/src/main/java/org/elasticsearch/index/IndexSettings.java", "diffHunk": "@@ -193,6 +176,24 @@\n     public static final Setting<Long> INDEX_SOFT_DELETES_RETENTION_OPERATIONS_SETTING =\n         Setting.longSetting(\"index.soft_deletes.retention.operations\", 0, 0, Property.IndexScope, Property.Dynamic);\n \n+    /**\n+     * Controls how long translog files that are no longer needed for persistence reasons\n+     * will be kept around before being deleted. A longer retention policy is useful to increase\n+     * the chance of ops based recoveries.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mjg0MDE5OA=="}, "originalCommit": {"oid": "8e8d07c5d4101198845872e943ca8901f0b7696d"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAxODkxNjM1OnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/elasticsearch/index/IndexSettings.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QwOTozMDo0MFrOHMeRqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QwOTozMDo0MFrOHMeRqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mjg0MTAwMA==", "bodyText": "Same here, afaik the note related to soft-deletes is worth mentioning even that we do not yet enable soft-deletes by default. Otherwise we may miss adding these notes later on.", "url": "https://github.com/crate/crate/pull/10484#discussion_r482841000", "createdAt": "2020-09-03T09:30:40Z", "author": {"login": "seut"}, "path": "server/src/main/java/org/elasticsearch/index/IndexSettings.java", "diffHunk": "@@ -193,6 +176,24 @@\n     public static final Setting<Long> INDEX_SOFT_DELETES_RETENTION_OPERATIONS_SETTING =\n         Setting.longSetting(\"index.soft_deletes.retention.operations\", 0, 0, Property.IndexScope, Property.Dynamic);\n \n+    /**\n+     * Controls how long translog files that are no longer needed for persistence reasons\n+     * will be kept around before being deleted. A longer retention policy is useful to increase\n+     * the chance of ops based recoveries.\n+     **/\n+    public static final Setting<TimeValue> INDEX_TRANSLOG_RETENTION_AGE_SETTING =\n+        Setting.timeSetting(\"index.translog.retention.age\", TimeValue.timeValueHours(12), TimeValue.timeValueMillis(-1), Property.Dynamic,\n+            Property.IndexScope);\n+\n+    /**\n+     * Controls how many translog files that are no longer needed for persistence reasons\n+     * will be kept around before being deleted. Keeping more files is useful to increase\n+     * the chance of ops based recoveries.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e8d07c5d4101198845872e943ca8901f0b7696d"}, "originalPosition": 40}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1204, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}