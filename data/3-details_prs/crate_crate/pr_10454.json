{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc1Mjk3Njcw", "number": 10454, "title": "Map DuplicateKeyException to PG 23505 UNIQUE_VIOLATION error", "bodyText": "Summary of the changes / Why this improves CrateDB\nThis changes the error code for the psql protocol when a document exists\nalready from XX000 internal_error to 23505 unique_violation.\nChecklist\n\n Added an entry in CHANGES.txt for user facing changes\n Updated documentation & sql_features table for user facing changes\n Touched code is covered by tests\n CLA is signed\n This does not contain breaking changes, or if it does:\n\nIt is released within a major release\nIt is recorded in CHANGES.txt\nIt was marked as deprecated in an earlier release if possible\nYou've thought about the consequences and other components are adapted\n(E.g. AdminUI)", "createdAt": "2020-08-28T09:34:05Z", "url": "https://github.com/crate/crate/pull/10454", "merged": true, "mergeCommit": {"oid": "d0c449ec6173f108e210716db729e711292f775d"}, "closed": true, "closedAt": "2020-08-28T14:59:36Z", "author": {"login": "mkleen"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdDR5rwABqjM3MDMyMTQyMzI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdDV0_vAH2gAyNDc1Mjk3NjcwOmZmMWQzNzAwNzQ5MzljMjVkMjNlNTA2ZjlkZTM4NGI0ZWNkMWNhNzg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c984819528b9e6085fac407eeab26da7cec2aaae", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/c984819528b9e6085fac407eeab26da7cec2aaae", "committedDate": "2020-08-28T09:33:35Z", "message": "Map DuplicateKeyException to PG UNIQUE_VIOLATION error"}, "afterCommit": {"oid": "5e6d4415e36a025c5a982733e9e2ce4fc7056c6d", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/5e6d4415e36a025c5a982733e9e2ce4fc7056c6d", "committedDate": "2020-08-28T09:50:09Z", "message": "Map DuplicateKeyException to psql UNIQUE_VIOLATION error"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5e6d4415e36a025c5a982733e9e2ce4fc7056c6d", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/5e6d4415e36a025c5a982733e9e2ce4fc7056c6d", "committedDate": "2020-08-28T09:50:09Z", "message": "Map DuplicateKeyException to psql UNIQUE_VIOLATION error"}, "afterCommit": {"oid": "d9c0731d3768c6ab44548e1f9b4a769d9d25aec5", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/d9c0731d3768c6ab44548e1f9b4a769d9d25aec5", "committedDate": "2020-08-28T09:52:32Z", "message": "Map DuplicateKeyException to psql UNIQUE_VIOLATION error"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d9c0731d3768c6ab44548e1f9b4a769d9d25aec5", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/d9c0731d3768c6ab44548e1f9b4a769d9d25aec5", "committedDate": "2020-08-28T09:52:32Z", "message": "Map DuplicateKeyException to psql UNIQUE_VIOLATION error"}, "afterCommit": {"oid": "6192b41d76c296c33f4e9f4d07236099f515f1a4", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/6192b41d76c296c33f4e9f4d07236099f515f1a4", "committedDate": "2020-08-28T12:30:36Z", "message": "Map DuplicateKeyException to psql UNIQUE_VIOLATION error"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6192b41d76c296c33f4e9f4d07236099f515f1a4", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/6192b41d76c296c33f4e9f4d07236099f515f1a4", "committedDate": "2020-08-28T12:30:36Z", "message": "Map DuplicateKeyException to psql UNIQUE_VIOLATION error"}, "afterCommit": {"oid": "e03da00d368f2adb6d0dd83b31e49a9c5025612d", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/e03da00d368f2adb6d0dd83b31e49a9c5025612d", "committedDate": "2020-08-28T12:54:37Z", "message": "Map DuplicateKeyException to PG 23505 UNIQUE_VIOLATION error\n\nThis changes the error code for the psql protocol when a document\nexists already from XX000 internal_error to 23505 unique_violation."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e03da00d368f2adb6d0dd83b31e49a9c5025612d", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/e03da00d368f2adb6d0dd83b31e49a9c5025612d", "committedDate": "2020-08-28T12:54:37Z", "message": "Map DuplicateKeyException to PG 23505 UNIQUE_VIOLATION error\n\nThis changes the error code for the psql protocol when a document\nexists already from XX000 internal_error to 23505 unique_violation."}, "afterCommit": {"oid": "a77cac3f4d8d39aedaf2e7c5eb1838494b95e735", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/a77cac3f4d8d39aedaf2e7c5eb1838494b95e735", "committedDate": "2020-08-28T12:57:40Z", "message": "Map DuplicateKeyException to PG 23505 UNIQUE_VIOLATION error\n\nThis changes the error code for the psql protocol when a document\nexists already from XX000 internal_error to 23505 unique_violation."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3NzE5NjM1", "url": "https://github.com/crate/crate/pull/10454#pullrequestreview-477719635", "createdAt": "2020-08-28T13:17:34Z", "commit": {"oid": "a77cac3f4d8d39aedaf2e7c5eb1838494b95e735"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3NzIwNTUx", "url": "https://github.com/crate/crate/pull/10454#pullrequestreview-477720551", "createdAt": "2020-08-28T13:18:52Z", "commit": {"oid": "a77cac3f4d8d39aedaf2e7c5eb1838494b95e735"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxMzoxODo1M1rOHJE84A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxMzoxODo1M1rOHJE84A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTI4MDM1Mg==", "bodyText": "Not sure if we need to list this as breaking change - I think moving it to changes would be good enough. In a way it could even be considered a bug that we didn't return the right error code, so moving it to change may be a good compromise", "url": "https://github.com/crate/crate/pull/10454#discussion_r479280352", "createdAt": "2020-08-28T13:18:53Z", "author": {"login": "mfussenegger"}, "path": "docs/appendices/release-notes/unreleased.rst", "diffHunk": "@@ -42,6 +42,9 @@ Unreleased Changes\n Breaking Changes\n ================\n \n+- Changed the error code for the psql protocol when a document exists", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a77cac3f4d8d39aedaf2e7c5eb1838494b95e735"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "44b9f8ef17b206d2578c195a7a95e85fffe50ffc", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/44b9f8ef17b206d2578c195a7a95e85fffe50ffc", "committedDate": "2020-08-28T13:45:44Z", "message": "Map DuplicateKeyException to PG 23505 UNIQUE_VIOLATION error\n\nThis changes the error code for the psql protocol when a document\nexists already from XX000 internal_error to 23505 unique_violation."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a77cac3f4d8d39aedaf2e7c5eb1838494b95e735", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/a77cac3f4d8d39aedaf2e7c5eb1838494b95e735", "committedDate": "2020-08-28T12:57:40Z", "message": "Map DuplicateKeyException to PG 23505 UNIQUE_VIOLATION error\n\nThis changes the error code for the psql protocol when a document\nexists already from XX000 internal_error to 23505 unique_violation."}, "afterCommit": {"oid": "44b9f8ef17b206d2578c195a7a95e85fffe50ffc", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/44b9f8ef17b206d2578c195a7a95e85fffe50ffc", "committedDate": "2020-08-28T13:45:44Z", "message": "Map DuplicateKeyException to PG 23505 UNIQUE_VIOLATION error\n\nThis changes the error code for the psql protocol when a document\nexists already from XX000 internal_error to 23505 unique_violation."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ff1d370074939c25d23e506f9de384b4ecd1ca78", "author": {"user": {"login": "mergify[bot]", "name": null}}, "url": "https://github.com/crate/crate/commit/ff1d370074939c25d23e506f9de384b4ecd1ca78", "committedDate": "2020-08-28T14:24:54Z", "message": "Merge branch 'master' into mkleen/psql_errors"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3034, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}