{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE3Mzg4MzUz", "number": 9946, "title": "Merge HttpTransportPlugin with Netty4Plugin", "bodyText": "Summary of the changes / Why this improves CrateDB\nInstead of extending the Netty4Http.. classes with sub-classes we can\nnow simply extend the functionality as needed.\nChecklist\n\n Added an entry in CHANGES.txt for user facing changes\n Updated documentation & sql_features table for user facing changes\n Touched code is covered by tests\n CLA is signed\n This does not contain breaking changes, or if it does:\n\nIt is released within a major release\nIt is recorded in CHANGES.txt\nIt was marked as deprecated in an earlier release if possible\nYou've thought about the consequences and other components are adapted\n(E.g. AdminUI)", "createdAt": "2020-05-13T14:07:57Z", "url": "https://github.com/crate/crate/pull/9946", "merged": true, "mergeCommit": {"oid": "90d05acdf21715dc386bd371de84836481e70f13"}, "closed": true, "closedAt": "2020-05-14T10:51:33Z", "author": {"login": "mfussenegger"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABchJSZCgBqjMzMzU0NzYwNDU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABchKt1lAFqTQxMTY2MjE1OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1d1f35cbe0db2da2f3d00059ee325f86da0a82ff", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/1d1f35cbe0db2da2f3d00059ee325f86da0a82ff", "committedDate": "2020-05-13T14:07:37Z", "message": "Merge HttpTransportPlugin with Netty4Plugin\n\nInstead of extending the `Netty4Http..` classes with sub-classes we can\nnow simply extend the functionality as needed."}, "afterCommit": {"oid": "102a78310db1a43bec8f1504b997395d89f255cc", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/102a78310db1a43bec8f1504b997395d89f255cc", "committedDate": "2020-05-14T08:29:21Z", "message": "Merge HttpTransportPlugin with Netty4Plugin\n\nInstead of extending the `Netty4Http..` classes with sub-classes we can\nnow simply extend the functionality as needed."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExNTk3MDE3", "url": "https://github.com/crate/crate/pull/9946#pullrequestreview-411597017", "createdAt": "2020-05-14T08:53:30Z", "commit": {"oid": "102a78310db1a43bec8f1504b997395d89f255cc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQwODo1MzozMFrOGVSd7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQwODo1MzozMFrOGVSd7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDk3NTg1Mg==", "bodyText": "looks good to me \ud83d\udc4d\nthis setting was not used?", "url": "https://github.com/crate/crate/pull/9946#discussion_r424975852", "createdAt": "2020-05-14T08:53:30Z", "author": {"login": "kovrus"}, "path": "server/src/main/java/io/crate/plugin/HttpTransportPlugin.java", "diffHunk": "@@ -1,116 +0,0 @@\n-/*\n- * Licensed to CRATE Technology GmbH (\"Crate\") under one or more contributor\n- * license agreements.  See the NOTICE file distributed with this work for\n- * additional information regarding copyright ownership.  Crate licenses\n- * this file to you under the Apache License, Version 2.0 (the \"License\");\n- * you may not use this file except in compliance with the License.  You may\n- * obtain a copy of the License at\n- *\n- *   http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing, software\n- * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n- * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  See the\n- * License for the specific language governing permissions and limitations\n- * under the License.\n- *\n- * However, if you have executed another commercial license agreement\n- * with Crate these terms will supersede the license and you may use the\n- * software solely pursuant to the terms of the relevant commercial agreement.\n- */\n-\n-package io.crate.plugin;\n-\n-import io.crate.protocols.http.CrateNettyHttpServerTransport;\n-import org.elasticsearch.client.Client;\n-import org.elasticsearch.client.node.NodeClient;\n-import org.elasticsearch.cluster.service.ClusterService;\n-import org.elasticsearch.common.io.stream.NamedWriteableRegistry;\n-import org.elasticsearch.common.network.NetworkService;\n-import org.elasticsearch.common.settings.Setting;\n-import org.elasticsearch.common.settings.Settings;\n-import org.elasticsearch.common.util.BigArrays;\n-import org.elasticsearch.common.xcontent.NamedXContentRegistry;\n-import org.elasticsearch.env.Environment;\n-import org.elasticsearch.env.NodeEnvironment;\n-import org.elasticsearch.http.HttpServerTransport;\n-import org.elasticsearch.indices.breaker.CircuitBreakerService;\n-import org.elasticsearch.plugins.ActionPlugin;\n-import org.elasticsearch.plugins.NetworkPlugin;\n-import org.elasticsearch.plugins.Plugin;\n-import org.elasticsearch.threadpool.ThreadPool;\n-\n-import java.util.Collection;\n-import java.util.Collections;\n-import java.util.List;\n-import java.util.Map;\n-import java.util.function.Supplier;\n-\n-import static org.elasticsearch.common.network.NetworkModule.HTTP_TYPE_KEY;\n-import static org.elasticsearch.http.HttpTransportSettings.SETTING_HTTP_COMPRESSION;\n-\n-\n-public class HttpTransportPlugin extends Plugin implements NetworkPlugin, ActionPlugin {\n-\n-    private static final String CRATE_HTTP_TRANSPORT_NAME = \"crate\";\n-\n-    private final PipelineRegistry pipelineRegistry;\n-\n-    public HttpTransportPlugin(Settings settings) {\n-        this.pipelineRegistry = new PipelineRegistry(settings);\n-    }\n-\n-    public String name() {\n-        return \"http\";\n-    }\n-\n-    public String description() {\n-        return \"Plugin for extending HTTP transport\";\n-    }\n-\n-    @Override\n-    public Collection<Object> createComponents(Client client,\n-                                               ClusterService clusterService,\n-                                               ThreadPool threadPool,\n-                                               NamedXContentRegistry xContentRegistry,\n-                                               Environment environment,\n-                                               NodeEnvironment nodeEnvironment,\n-                                               NamedWriteableRegistry namedWriteableRegistry) {\n-        // pipelineRegistry is returned here so that it's bound in guice and can be injected in other places\n-        return Collections.singletonList(pipelineRegistry);\n-    }\n-\n-    @Override\n-    public List<Setting<?>> getSettings() {\n-        return Collections.emptyList();\n-    }\n-\n-    @Override\n-    public Settings additionalSettings() {\n-        return Settings.builder()\n-            .put(HTTP_TYPE_KEY, CRATE_HTTP_TRANSPORT_NAME)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "102a78310db1a43bec8f1504b997395d89f255cc"}, "originalPosition": 91}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "881342ca84b4f4019fe2a2f8277c764075d5f44b", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/881342ca84b4f4019fe2a2f8277c764075d5f44b", "committedDate": "2020-05-14T09:24:09Z", "message": "Merge HttpTransportPlugin with Netty4Plugin\n\nInstead of extending the `Netty4Http..` classes with sub-classes we can\nnow simply extend the functionality as needed."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "102a78310db1a43bec8f1504b997395d89f255cc", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/102a78310db1a43bec8f1504b997395d89f255cc", "committedDate": "2020-05-14T08:29:21Z", "message": "Merge HttpTransportPlugin with Netty4Plugin\n\nInstead of extending the `Netty4Http..` classes with sub-classes we can\nnow simply extend the functionality as needed."}, "afterCommit": {"oid": "881342ca84b4f4019fe2a2f8277c764075d5f44b", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/881342ca84b4f4019fe2a2f8277c764075d5f44b", "committedDate": "2020-05-14T09:24:09Z", "message": "Merge HttpTransportPlugin with Netty4Plugin\n\nInstead of extending the `Netty4Http..` classes with sub-classes we can\nnow simply extend the functionality as needed."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExNjYyMTU5", "url": "https://github.com/crate/crate/pull/9946#pullrequestreview-411662159", "createdAt": "2020-05-14T10:14:42Z", "commit": {"oid": "881342ca84b4f4019fe2a2f8277c764075d5f44b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3377, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}