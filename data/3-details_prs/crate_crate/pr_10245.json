{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUxMTM4ODYz", "number": 10245, "title": "Add doc-value aggregator for min aggregation", "bodyText": "Summary of the changes / Why this improves CrateDB\nSee also: crate/crate-benchmarks#212\nQ: select min(duration) from uservisits\nC: 1\n| Version |         Mean \u00b1    Stdev |        Min |     Median |         Q3 |        Max |\n|   V1    |       67.925 \u00b1   46.711 |     51.515 |     64.499 |     67.515 |   1100.817 |\n|   V2    |       24.338 \u00b1   19.621 |     19.274 |     21.725 |     23.292 |    443.536 |\n\u251c---------\u2534-------------------------\u2534------------\u2534------------\u2534------------\u2534------------\u2518\n|               -  94.48%                           -  99.22%\nThere is a 100.00% probability that the observed difference is not random, and the best estimate of that difference is 94.48%\nThe test has statistical significance\n\nQ: select min(\"adRevenue\") from uservisits\nC: 1\n| Version |         Mean \u00b1    Stdev |        Min |     Median |         Q3 |        Max |\n|   V1    |       70.576 \u00b1   14.037 |     58.433 |     69.340 |     71.356 |    361.102 |\n|   V2    |       32.801 \u00b1    7.910 |     21.266 |     34.532 |     36.867 |    129.560 |\n\u251c---------\u2534-------------------------\u2534------------\u2534------------\u2534------------\u2534------------\u2518\n|               -  73.08%                           -  67.02%\nThere is a 100.00% probability that the observed difference is not random, and the best estimate of that difference is 73.08%\nThe test has statistical significance\n\nChecklist\n\n Added an entry in CHANGES.txt for user facing changes\n Updated documentation & sql_features table for user facing changes\n Touched code is covered by tests\n CLA is signed\n This does not contain breaking changes, or if it does:\n\nIt is released within a major release\nIt is recorded in CHANGES.txt\nIt was marked as deprecated in an earlier release if possible\nYou've thought about the consequences and other components are adapted\n(E.g. AdminUI)", "createdAt": "2020-07-17T13:50:22Z", "url": "https://github.com/crate/crate/pull/10245", "merged": true, "mergeCommit": {"oid": "1f0ebf7cae7c958728da58c0898c2bb8214bb7ed"}, "closed": true, "closedAt": "2020-07-17T14:28:29Z", "author": {"login": "mfussenegger"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc10GuwgH2gAyNDUxMTM4ODYzOjAzM2EyN2YyOTY2ODAyODExNDg1NjQ1MDU4NjU1YWQwNmE3MjRkNjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc10nI-gFqTQ1MDY5OTQ1Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "033a27f2966802811485645058655ad06a724d66", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/033a27f2966802811485645058655ad06a724d66", "committedDate": "2020-07-17T13:46:29Z", "message": "Add doc-value aggregator for min aggregation\n\n    Q: select min(duration) from uservisits\n    C: 1\n    | Version |         Mean \u00b1    Stdev |        Min |     Median |         Q3 |        Max |\n    |   V1    |       67.925 \u00b1   46.711 |     51.515 |     64.499 |     67.515 |   1100.817 |\n    |   V2    |       24.338 \u00b1   19.621 |     19.274 |     21.725 |     23.292 |    443.536 |\n    \u251c---------\u2534-------------------------\u2534------------\u2534------------\u2534------------\u2534------------\u2518\n    |               -  94.48%                           -  99.22%\n    There is a 100.00% probability that the observed difference is not random, and the best estimate of that difference is 94.48%\n    The test has statistical significance\n\n    Q: select min(\"adRevenue\") from uservisits\n    C: 1\n    | Version |         Mean \u00b1    Stdev |        Min |     Median |         Q3 |        Max |\n    |   V1    |       70.576 \u00b1   14.037 |     58.433 |     69.340 |     71.356 |    361.102 |\n    |   V2    |       32.801 \u00b1    7.910 |     21.266 |     34.532 |     36.867 |    129.560 |\n    \u251c---------\u2534-------------------------\u2534------------\u2534------------\u2534------------\u2534------------\u2518\n    |               -  73.08%                           -  67.02%\n    There is a 100.00% probability that the observed difference is not random, and the best estimate of that difference is 73.08%\n    The test has statistical significance"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwNjc1NjI3", "url": "https://github.com/crate/crate/pull/10245#pullrequestreview-450675627", "createdAt": "2020-07-17T13:52:25Z", "commit": {"oid": "033a27f2966802811485645058655ad06a724d66"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxMzo1MjoyNlrOGzT4KQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxMzo1MjoyNlrOGzT4KQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjQ1NjIzMw==", "bodyText": "The value defaulted to 0, so if the table only contained negative values the result would have been null, because each value would have been smaller than 0 and it would have assumed that there was no value at all.\nNo change entry or so because the max aggregate change wasn't released yet.", "url": "https://github.com/crate/crate/pull/10245#discussion_r456456233", "createdAt": "2020-07-17T13:52:26Z", "author": {"login": "mfussenegger"}, "path": "server/src/main/java/io/crate/execution/engine/aggregation/impl/MaximumAggregation.java", "diffHunk": "@@ -87,7 +87,7 @@ public LongMax(String columnName, DataType<?> partialType) {\n \n         @Override\n         public MutableLong initialState() {\n-            return new MutableLong();\n+            return new MutableLong(Long.MIN_VALUE);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "033a27f2966802811485645058655ad06a724d66"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwNjk5NDU2", "url": "https://github.com/crate/crate/pull/10245#pullrequestreview-450699456", "createdAt": "2020-07-17T14:21:53Z", "commit": {"oid": "033a27f2966802811485645058655ad06a724d66"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3205, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}