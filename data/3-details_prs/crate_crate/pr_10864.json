{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM5Mzk3NTY4", "number": 10864, "title": "Use postgres compatible formatter for to_char with interval types", "bodyText": "Summary of the changes / Why this improves CrateDB\nPreviously, to_char would ignore the string formatting field and just output the standard string rendering of the interval. This PR instead uses the postgres syntax compatible parser by adding the interval to the date 0000/01/01 00:00:00, which brings it into agreement with the behaviour with postgresql.\nChecklist\n\n Added an entry in CHANGES.txt for user facing changes\n Updated documentation & sql_features table for user facing changes\n Touched code is covered by tests\n CLA is signed\n This does not contain breaking changes, or if it does:\n\nIt is released within a major release\nIt is recorded in CHANGES.txt\nIt was marked as deprecated in an earlier release if possible\nYou've thought about the consequences and other components are adapted\n(E.g. AdminUI)", "createdAt": "2020-12-14T11:59:28Z", "url": "https://github.com/crate/crate/pull/10864", "merged": true, "mergeCommit": {"oid": "71c4a024736d8e2c39b39dac1951b4f0249e6574"}, "closed": true, "closedAt": "2020-12-15T11:10:46Z", "author": {"login": "autophagy"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdmFtcPgBqjQxMDkyMDIyNTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdmYMaNAFqTU1MjMzMzAwMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7ad74b7d5b811b9ecbfe5b1d8b37c41b098858cc", "author": {"user": {"login": "autophagy", "name": "Mika"}}, "url": "https://github.com/crate/crate/commit/7ad74b7d5b811b9ecbfe5b1d8b37c41b098858cc", "committedDate": "2020-12-14T11:55:35Z", "message": "Use postgres compatible formatter for to_char with interval types"}, "afterCommit": {"oid": "1f1c614c91bd12677b9a863d7e935bac3a96ecbd", "author": {"user": {"login": "autophagy", "name": "Mika"}}, "url": "https://github.com/crate/crate/commit/1f1c614c91bd12677b9a863d7e935bac3a96ecbd", "committedDate": "2020-12-14T13:25:05Z", "message": "Use postgres compatible formatter for to_char with interval types"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxNDAzNTU3", "url": "https://github.com/crate/crate/pull/10864#pullrequestreview-551403557", "createdAt": "2020-12-14T14:12:48Z", "commit": {"oid": "1f1c614c91bd12677b9a863d7e935bac3a96ecbd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxNDc2NDAw", "url": "https://github.com/crate/crate/pull/10864#pullrequestreview-551476400", "createdAt": "2020-12-14T15:24:39Z", "commit": {"oid": "1f1c614c91bd12677b9a863d7e935bac3a96ecbd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxNToyNDozOVrOIFVx8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxNToyNDozOVrOIFVx8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjQ3MDY0Mw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            interval added to the timestamp of 0000/01/01 00:00:00:\n          \n          \n            \n            interval added to the timestamp of ``0000/01/01 00:00:00``:", "url": "https://github.com/crate/crate/pull/10864#discussion_r542470643", "createdAt": "2020-12-14T15:24:39Z", "author": {"login": "norosa"}, "path": "docs/general/builtins/scalar.rst", "diffHunk": "@@ -1251,17 +1251,18 @@ containing any of the following symbols:\n     +-----------------------------------------+\n     SELECT 1 row in set (... sec)\n \n-For ``interval`` expressions, the formatting string is discard and the interval\n-is returned in a standard form:\n+For ``interval`` expressions, the formatting string accepts the same tokens as\n+``timestamp`` expressions. The function then uses the timestamp of the specified\n+interval added to the timestamp of 0000/01/01 00:00:00:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1f1c614c91bd12677b9a863d7e935bac3a96ecbd"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c42a7962a9e771a540f96fb8b8a53e615ef73380", "author": {"user": {"login": "autophagy", "name": "Mika"}}, "url": "https://github.com/crate/crate/commit/c42a7962a9e771a540f96fb8b8a53e615ef73380", "committedDate": "2020-12-14T15:47:00Z", "message": "Use postgres compatible formatter for to_char with interval types"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1f1c614c91bd12677b9a863d7e935bac3a96ecbd", "author": {"user": {"login": "autophagy", "name": "Mika"}}, "url": "https://github.com/crate/crate/commit/1f1c614c91bd12677b9a863d7e935bac3a96ecbd", "committedDate": "2020-12-14T13:25:05Z", "message": "Use postgres compatible formatter for to_char with interval types"}, "afterCommit": {"oid": "c42a7962a9e771a540f96fb8b8a53e615ef73380", "author": {"user": {"login": "autophagy", "name": "Mika"}}, "url": "https://github.com/crate/crate/commit/c42a7962a9e771a540f96fb8b8a53e615ef73380", "committedDate": "2020-12-14T15:47:00Z", "message": "Use postgres compatible formatter for to_char with interval types"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUyMzMzMDAx", "url": "https://github.com/crate/crate/pull/10864#pullrequestreview-552333001", "createdAt": "2020-12-15T10:57:38Z", "commit": {"oid": "c42a7962a9e771a540f96fb8b8a53e615ef73380"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3588, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}