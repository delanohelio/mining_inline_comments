{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE0MTQ3MTI5", "number": 10733, "title": "Backport ES changes", "bodyText": "Summary of the changes / Why this improves CrateDB\nSee commits\nChecklist\n\n Added an entry in CHANGES.txt for user facing changes\n Updated documentation & sql_features table for user facing changes\n Touched code is covered by tests\n CLA is signed\n This does not contain breaking changes, or if it does:\n\nIt is released within a major release\nIt is recorded in CHANGES.txt\nIt was marked as deprecated in an earlier release if possible\nYou've thought about the consequences and other components are adapted\n(E.g. AdminUI)", "createdAt": "2020-11-02T15:45:05Z", "url": "https://github.com/crate/crate/pull/10733", "merged": true, "mergeCommit": {"oid": "b10808321071605c31fda74ad5eccab8b5808519"}, "closed": true, "closedAt": "2020-11-04T11:09:05Z", "author": {"login": "mfussenegger"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdY1waeABqjM5NTE5MDIzOTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdZLW0GgBqjM5NTY5NDI0NDE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e84d6679f611507860dc56cbecec8e47c8b9a449", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/e84d6679f611507860dc56cbecec8e47c8b9a449", "committedDate": "2020-11-02T15:56:48Z", "message": "bp: Fix Transport Stopped Exception\n\nhttps://github.com/elastic/elasticsearch/commit/fbaf8c428d75e43e69c4c0d1d036e75d8eeb606a"}, "afterCommit": {"oid": "ccaef7593a2a23de664ddda47a57f32cd3100024", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/ccaef7593a2a23de664ddda47a57f32cd3100024", "committedDate": "2020-11-03T09:29:00Z", "message": "bp: Always use primary term from primary to index docs on replica\n\nhttps://github.com/elastic/elasticsearch/commit/66f49d8ea5d263eb3c78739657dc4718c1420825"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ccaef7593a2a23de664ddda47a57f32cd3100024", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/ccaef7593a2a23de664ddda47a57f32cd3100024", "committedDate": "2020-11-03T09:29:00Z", "message": "bp: Always use primary term from primary to index docs on replica\n\nhttps://github.com/elastic/elasticsearch/commit/66f49d8ea5d263eb3c78739657dc4718c1420825"}, "afterCommit": {"oid": "8a81284a462d450c335f4e241b50ebb898e7f393", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/8a81284a462d450c335f4e241b50ebb898e7f393", "committedDate": "2020-11-03T09:58:43Z", "message": "bp: Remove type field from internal PutMappingRequest"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8a81284a462d450c335f4e241b50ebb898e7f393", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/8a81284a462d450c335f4e241b50ebb898e7f393", "committedDate": "2020-11-03T09:58:43Z", "message": "bp: Remove type field from internal PutMappingRequest"}, "afterCommit": {"oid": "93e3259994d775c1e9b5817dff62c92fb19e3440", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/93e3259994d775c1e9b5817dff62c92fb19e3440", "committedDate": "2020-11-03T10:31:39Z", "message": "bp: ThreadPool and ThreadContext are not closeable\n\nhttps://github.com/elastic/elasticsearch/commit/0260c6f55c4623f1195341bdc4e61a7ec7bc1754"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyNDAwNzk0", "url": "https://github.com/crate/crate/pull/10733#pullrequestreview-522400794", "createdAt": "2020-11-03T11:21:23Z", "commit": {"oid": "591a407610de4a3f248cc265dc29455c3c76ddaa"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QxMToyMToyNFrOHsqbfw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QxMToyMToyNFrOHsqbfw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjU5NDU1OQ==", "bodyText": "Any reason to keep this variable? Afaik its only usage is in the same class for type validating which we could also remove as our type is always fixed and could already not be changed in the past.", "url": "https://github.com/crate/crate/pull/10733#discussion_r516594559", "createdAt": "2020-11-03T11:21:24Z", "author": {"login": "seut"}, "path": "server/src/main/java/org/elasticsearch/index/mapper/MapperService.java", "diffHunk": "@@ -74,7 +76,7 @@\n         MAPPING_RECOVERY;\n     }\n \n-    public static final String SINGLE_MAPPING_NAME = \"_doc\";\n+    public static final String SINGLE_MAPPING_NAME = Constants.DEFAULT_MAPPING_TYPE;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "591a407610de4a3f248cc265dc29455c3c76ddaa"}, "originalPosition": 14}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "93e3259994d775c1e9b5817dff62c92fb19e3440", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/93e3259994d775c1e9b5817dff62c92fb19e3440", "committedDate": "2020-11-03T10:31:39Z", "message": "bp: ThreadPool and ThreadContext are not closeable\n\nhttps://github.com/elastic/elasticsearch/commit/0260c6f55c4623f1195341bdc4e61a7ec7bc1754"}, "afterCommit": {"oid": "7b3a4dc4821bdbe7556ac4b1cb4b78ed6f2db7df", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/7b3a4dc4821bdbe7556ac4b1cb4b78ed6f2db7df", "committedDate": "2020-11-03T15:58:13Z", "message": "bp: ThreadPool and ThreadContext are not closeable\n\nhttps://github.com/elastic/elasticsearch/commit/0260c6f55c4623f1195341bdc4e61a7ec7bc1754"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c88ba056cb0c519b2d020e28f1a5cc0e2a90a948", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/c88ba056cb0c519b2d020e28f1a5cc0e2a90a948", "committedDate": "2020-11-04T10:39:04Z", "message": "bp: MapperService.merge() should take a single mapper rather than a map\n\nhttps://github.com/elastic/elasticsearch/commit/7559bab501f5cbc42e164b1de9de85f729bad00e"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f006a444d16118980ff8b521412f78fbb8f47bfe", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/f006a444d16118980ff8b521412f78fbb8f47bfe", "committedDate": "2020-11-04T10:39:04Z", "message": "bp: Fix Transport Stopped Exception\n\nhttps://github.com/elastic/elasticsearch/commit/fbaf8c428d75e43e69c4c0d1d036e75d8eeb606a"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f58666310c51f5da5ed781a17922ea78700e0f38", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/f58666310c51f5da5ed781a17922ea78700e0f38", "committedDate": "2020-11-04T10:39:04Z", "message": "bp: Always use primary term from primary to index docs on replica\n\nhttps://github.com/elastic/elasticsearch/commit/66f49d8ea5d263eb3c78739657dc4718c1420825"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "33ef1495be67a9e2631aa09c559bbc718963f180", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/33ef1495be67a9e2631aa09c559bbc718963f180", "committedDate": "2020-11-04T10:39:04Z", "message": "bp: Remove type field from internal PutMappingRequest\n\nhttps://github.com/elastic/elasticsearch/commit/c1c7fa5d9c8f8423c848e196682273828bf50b3e"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e9469b3e60eac849f8ff7a1731d22bceaf1b8714", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/e9469b3e60eac849f8ff7a1731d22bceaf1b8714", "committedDate": "2020-11-04T10:39:05Z", "message": "bp: Ignore Lucene index in peer recovery if translog corrupted\n\nhttps://github.com/elastic/elasticsearch/commit/5aa5d7b54b9a9bfcf8edb0672d7911b0b477ad08"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eadcf2e99cba7475f2819cea29a7c7c55c3a5a36", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/eadcf2e99cba7475f2819cea29a7c7c55c3a5a36", "committedDate": "2020-11-04T10:39:05Z", "message": "bp: ThreadPool and ThreadContext are not closeable\n\nhttps://github.com/elastic/elasticsearch/commit/0260c6f55c4623f1195341bdc4e61a7ec7bc1754"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7b3a4dc4821bdbe7556ac4b1cb4b78ed6f2db7df", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/7b3a4dc4821bdbe7556ac4b1cb4b78ed6f2db7df", "committedDate": "2020-11-03T15:58:13Z", "message": "bp: ThreadPool and ThreadContext are not closeable\n\nhttps://github.com/elastic/elasticsearch/commit/0260c6f55c4623f1195341bdc4e61a7ec7bc1754"}, "afterCommit": {"oid": "eadcf2e99cba7475f2819cea29a7c7c55c3a5a36", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/eadcf2e99cba7475f2819cea29a7c7c55c3a5a36", "committedDate": "2020-11-04T10:39:05Z", "message": "bp: ThreadPool and ThreadContext are not closeable\n\nhttps://github.com/elastic/elasticsearch/commit/0260c6f55c4623f1195341bdc4e61a7ec7bc1754"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3603, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}