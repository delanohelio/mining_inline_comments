{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYwODQ2OTYx", "number": 9492, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQwOToyOTo0MlrODWyWWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQwOTozNzozNVrODWyggA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI1MjIwMTg0OnYy", "diffSide": "RIGHT", "path": "sql/src/test/java/io/crate/analyze/MetaDataToASTNodeResolverTest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQwOToyOTo0MlrOFbvjhg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQxMDoxMzo0MFrOFbw3Xw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDYzNTAxNA==", "bodyText": "I think this will be a bit problematic since the value depends on the environment where the test is running on. E.g. on our CI systems it will be lower.\nMaybe we can make the assertion a bit more lenient in that regard or fix the value in the create table statement, so that the tests are deterministic on all environments?", "url": "https://github.com/crate/crate/pull/9492#discussion_r364635014", "createdAt": "2020-01-09T09:29:42Z", "author": {"login": "mfussenegger"}, "path": "sql/src/test/java/io/crate/analyze/MetaDataToASTNodeResolverTest.java", "diffHunk": "@@ -96,6 +96,7 @@ public void testBuildCreateTableColumns() throws Exception {\n                      \"   \\\"mapping.total_fields.limit\\\" = 1000,\\n\" +\n                      \"   max_ngram_diff = 1,\\n\" +\n                      \"   max_shingle_diff = 3,\\n\" +\n+                     \"   \\\"merge.scheduler.max_thread_count\\\" = 4,\\n\" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d24fa9e70a7927b47a190b433e98196dbf3e35a9"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDY1NjQ3OQ==", "bodyText": "Right, I will fix this value.", "url": "https://github.com/crate/crate/pull/9492#discussion_r364656479", "createdAt": "2020-01-09T10:13:40Z", "author": {"login": "asdf2014"}, "path": "sql/src/test/java/io/crate/analyze/MetaDataToASTNodeResolverTest.java", "diffHunk": "@@ -96,6 +96,7 @@ public void testBuildCreateTableColumns() throws Exception {\n                      \"   \\\"mapping.total_fields.limit\\\" = 1000,\\n\" +\n                      \"   max_ngram_diff = 1,\\n\" +\n                      \"   max_shingle_diff = 3,\\n\" +\n+                     \"   \\\"merge.scheduler.max_thread_count\\\" = 4,\\n\" +", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDYzNTAxNA=="}, "originalCommit": {"oid": "d24fa9e70a7927b47a190b433e98196dbf3e35a9"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI1MjIwMzg3OnYy", "diffSide": "RIGHT", "path": "docs/sql/statements/create-table.rst", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQwOTozMDoxNVrOFbvktA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQxMDoxNDoxNlrOFbw4bA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDYzNTMxNg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Defaults to Math.max(1, Math.min(4, Runtime.getRuntime().availableProcessors() / 2))\n          \n          \n            \n            Defaults to ``Math.max(1, Math.min(4, Runtime.getRuntime().availableProcessors() / 2))``", "url": "https://github.com/crate/crate/pull/9492#discussion_r364635316", "createdAt": "2020-01-09T09:30:15Z", "author": {"login": "mfussenegger"}, "path": "docs/sql/statements/create-table.rst", "diffHunk": "@@ -648,3 +648,11 @@ the NGramTokenizer or the NGramTokenFilter. The default is 1.\n \n Specifies the maximum difference between min_shingle_size and max_shingle_size\n when using the ShingleTokenFilter. The default is 3.\n+\n+``merge.scheduler.max_thread_count``\n+--------------------\n+\n+The maximum number of threads on a single shard that may be merging at once.\n+Defaults to Math.max(1, Math.min(4, Runtime.getRuntime().availableProcessors() / 2))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d24fa9e70a7927b47a190b433e98196dbf3e35a9"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDY1Njc0OA==", "bodyText": "Indeed, it would be better. Thanks \ud83d\udc4d", "url": "https://github.com/crate/crate/pull/9492#discussion_r364656748", "createdAt": "2020-01-09T10:14:16Z", "author": {"login": "asdf2014"}, "path": "docs/sql/statements/create-table.rst", "diffHunk": "@@ -648,3 +648,11 @@ the NGramTokenizer or the NGramTokenFilter. The default is 1.\n \n Specifies the maximum difference between min_shingle_size and max_shingle_size\n when using the ShingleTokenFilter. The default is 3.\n+\n+``merge.scheduler.max_thread_count``\n+--------------------\n+\n+The maximum number of threads on a single shard that may be merging at once.\n+Defaults to Math.max(1, Math.min(4, Runtime.getRuntime().availableProcessors() / 2))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDYzNTMxNg=="}, "originalCommit": {"oid": "d24fa9e70a7927b47a190b433e98196dbf3e35a9"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI1MjIwNjkyOnYy", "diffSide": "RIGHT", "path": "docs/appendices/release-notes/unreleased.rst", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQwOTozMToxMVrOFbvmkA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQxMDoxNjoxM1rOFbw8CA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDYzNTc5Mg==", "bodyText": "Did you intend for this to be backported to 4.0? Usually this kind of change only goes into a feature release (4.1) - in which case we'd list it somewhere under Changes.", "url": "https://github.com/crate/crate/pull/9492#discussion_r364635792", "createdAt": "2020-01-09T09:31:11Z", "author": {"login": "mfussenegger"}, "path": "docs/appendices/release-notes/unreleased.rst", "diffHunk": "@@ -248,6 +248,10 @@ Others\n Fixes\n =====\n \n+- Allow user to control the maximum number of threads on a single shard", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d24fa9e70a7927b47a190b433e98196dbf3e35a9"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDY1NzY3Mg==", "bodyText": "Sorry, I will move it under Changes.", "url": "https://github.com/crate/crate/pull/9492#discussion_r364657672", "createdAt": "2020-01-09T10:16:13Z", "author": {"login": "asdf2014"}, "path": "docs/appendices/release-notes/unreleased.rst", "diffHunk": "@@ -248,6 +248,10 @@ Others\n Fixes\n =====\n \n+- Allow user to control the maximum number of threads on a single shard", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDYzNTc5Mg=="}, "originalCommit": {"oid": "d24fa9e70a7927b47a190b433e98196dbf3e35a9"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI1MjIyNzg0OnYy", "diffSide": "RIGHT", "path": "docs/sql/statements/create-table.rst", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQwOTozNzozNVrOFbvy3g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQxMDoxNjoyMVrOFbw8Uw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDYzODk0Mg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            --------------------\n          \n          \n            \n            ------------------------------------", "url": "https://github.com/crate/crate/pull/9492#discussion_r364638942", "createdAt": "2020-01-09T09:37:35Z", "author": {"login": "kovrus"}, "path": "docs/sql/statements/create-table.rst", "diffHunk": "@@ -648,3 +648,11 @@ the NGramTokenizer or the NGramTokenFilter. The default is 1.\n \n Specifies the maximum difference between min_shingle_size and max_shingle_size\n when using the ShingleTokenFilter. The default is 3.\n+\n+``merge.scheduler.max_thread_count``\n+--------------------", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d24fa9e70a7927b47a190b433e98196dbf3e35a9"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDY1Nzc0Nw==", "bodyText": "Thanks \ud83d\udc4d", "url": "https://github.com/crate/crate/pull/9492#discussion_r364657747", "createdAt": "2020-01-09T10:16:21Z", "author": {"login": "asdf2014"}, "path": "docs/sql/statements/create-table.rst", "diffHunk": "@@ -648,3 +648,11 @@ the NGramTokenizer or the NGramTokenFilter. The default is 1.\n \n Specifies the maximum difference between min_shingle_size and max_shingle_size\n when using the ShingleTokenFilter. The default is 3.\n+\n+``merge.scheduler.max_thread_count``\n+--------------------", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDYzODk0Mg=="}, "originalCommit": {"oid": "d24fa9e70a7927b47a190b433e98196dbf3e35a9"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1100, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}