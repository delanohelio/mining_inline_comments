{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY4Njg0MTU0", "number": 10381, "title": "Backport ES changes", "bodyText": "Summary of the changes / Why this improves CrateDB\nSee commits\nChecklist\n\n Added an entry in CHANGES.txt for user facing changes\n Updated documentation & sql_features table for user facing changes\n Touched code is covered by tests\n CLA is signed\n This does not contain breaking changes, or if it does:\n\nIt is released within a major release\nIt is recorded in CHANGES.txt\nIt was marked as deprecated in an earlier release if possible\nYou've thought about the consequences and other components are adapted\n(E.g. AdminUI)", "createdAt": "2020-08-17T08:42:20Z", "url": "https://github.com/crate/crate/pull/10381", "merged": true, "mergeCommit": {"oid": "193cbe695915a4f76cc70dd0ecf3b2057d9fe640"}, "closed": true, "closedAt": "2020-08-17T15:06:59Z", "author": {"login": "mfussenegger"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc_uXACAFqTQ2ODI3NjY4Ng==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc_zY5mABqjM2NjIxNzM2MjI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY4Mjc2Njg2", "url": "https://github.com/crate/crate/pull/10381#pullrequestreview-468276686", "createdAt": "2020-08-17T08:44:04Z", "commit": {"oid": "a0406f5ceac701ae9642901aa43d452d8ed829b0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QwODo0NDowNFrOHBfwGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QwODo0NDowNFrOHBfwGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTMzMDg0Mw==", "bodyText": "As far as I can tell this method was never present in ES in Engine, only in InternalEngine.", "url": "https://github.com/crate/crate/pull/10381#discussion_r471330843", "createdAt": "2020-08-17T08:44:04Z", "author": {"login": "mfussenegger"}, "path": "server/src/main/java/org/elasticsearch/index/engine/Engine.java", "diffHunk": "@@ -698,11 +712,6 @@ public final CommitStats commitStats() {\n      */\n     public abstract long getLastSyncedGlobalCheckpoint();\n \n-    /**\n-     * Returns the latest local checkpoint value that has been processed\n-     */\n-    public abstract long getProcessedLocalCheckpoint();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a0406f5ceac701ae9642901aa43d452d8ed829b0"}, "originalPosition": 28}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY4NDg5OTA3", "url": "https://github.com/crate/crate/pull/10381#pullrequestreview-468489907", "createdAt": "2020-08-17T14:01:18Z", "commit": {"oid": "a0406f5ceac701ae9642901aa43d452d8ed829b0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a0406f5ceac701ae9642901aa43d452d8ed829b0", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/a0406f5ceac701ae9642901aa43d452d8ed829b0", "committedDate": "2020-08-17T08:41:48Z", "message": "bp: Close and acquire commit during reset engine fix\n\nhttps://github.com/elastic/elasticsearch/commit/eda31b0ac00c952a52885902be59ac429b0ca81a\n\nThis also applies missing bits from earlier commits and pulls in the\nReadOnlyEngine:\n\n- https://github.com/elastic/elasticsearch/commit/918232a9c6219867d8e83919bf319b8a3bcfc4fe\n- https://github.com/elastic/elasticsearch/commit/902d6f579aff968d8f8426f1e6855ca1d9fb3a05\n- https://github.com/elastic/elasticsearch/commit/5166dd0a4c6b53560cb873dbda1f41099e1554fa\n\nAnd makes some additional changes because we have already applied these\ncommits:\n\n- https://github.com/elastic/elasticsearch/commit/f27e808c1457ddbda1c69b4422d9a10ee6ec299d\n- https://github.com/elastic/elasticsearch/commit/73bfdc4066be080dc4cad1f0521bf6ea14cded93"}, "afterCommit": {"oid": "9a43192c294e4c9e400bdc67940e266abe182988", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/9a43192c294e4c9e400bdc67940e266abe182988", "committedDate": "2020-08-17T14:30:19Z", "message": "bp: Close and acquire commit during reset engine fix\n\nhttps://github.com/elastic/elasticsearch/commit/eda31b0ac00c952a52885902be59ac429b0ca81a\n\nThis also applies missing bits from earlier commits and pulls in the\nReadOnlyEngine:\n\n- https://github.com/elastic/elasticsearch/commit/918232a9c6219867d8e83919bf319b8a3bcfc4fe\n- https://github.com/elastic/elasticsearch/commit/902d6f579aff968d8f8426f1e6855ca1d9fb3a05\n- https://github.com/elastic/elasticsearch/commit/5166dd0a4c6b53560cb873dbda1f41099e1554fa\n\nAnd makes some additional changes because we have already applied these\ncommits:\n\n- https://github.com/elastic/elasticsearch/commit/f27e808c1457ddbda1c69b4422d9a10ee6ec299d\n- https://github.com/elastic/elasticsearch/commit/73bfdc4066be080dc4cad1f0521bf6ea14cded93"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a6bff9656f8ab02f007a39f963f88b2cea65f668", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/a6bff9656f8ab02f007a39f963f88b2cea65f668", "committedDate": "2020-08-17T14:35:28Z", "message": "bp: Recovery should not indefinitely retry on mapping error\n\nhttps://github.com/elastic/elasticsearch/commit/24e3145fd002064e79f54aa644212999640d3565"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4b8599160470a3c04cbef2d4f28238e1b985f936", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/4b8599160470a3c04cbef2d4f28238e1b985f936", "committedDate": "2020-08-17T14:35:28Z", "message": "bp: Remove search analyzers from DocumentFieldMappers\n\nhttps://github.com/elastic/elasticsearch/commit/de222731f8ec17270a8139c2a18be0f7c02c24a7"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5403cd6993b4afa5ac9e69940848c4c957014cdf", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/5403cd6993b4afa5ac9e69940848c4c957014cdf", "committedDate": "2020-08-17T14:35:28Z", "message": "bp: Use Java 11 collections conveniences everywhere\n\nhttps://github.com/elastic/elasticsearch/commit/f48ddd53fd66cfef3032a17023cd9e2f88702af9"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a332a804c8cdc0f1a48e935c8683d8471a04bd40", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/a332a804c8cdc0f1a48e935c8683d8471a04bd40", "committedDate": "2020-08-17T14:35:28Z", "message": "bp: Remove some usages of MapBuilder#immutableMap\n\nhttps://github.com/elastic/elasticsearch/commit/545e56d1d1187669c7da810a356cba9dcb04822c"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "223798eb915405f03d360600903c535e0ccc00f5", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/223798eb915405f03d360600903c535e0ccc00f5", "committedDate": "2020-08-17T14:35:28Z", "message": "bp: Close and acquire commit during reset engine fix\n\nhttps://github.com/elastic/elasticsearch/commit/eda31b0ac00c952a52885902be59ac429b0ca81a\n\nThis also applies missing bits from earlier commits and pulls in the\nReadOnlyEngine:\n\n- https://github.com/elastic/elasticsearch/commit/918232a9c6219867d8e83919bf319b8a3bcfc4fe\n- https://github.com/elastic/elasticsearch/commit/902d6f579aff968d8f8426f1e6855ca1d9fb3a05\n- https://github.com/elastic/elasticsearch/commit/5166dd0a4c6b53560cb873dbda1f41099e1554fa\n\nAnd makes some additional changes because we have already applied these\ncommits:\n\n- https://github.com/elastic/elasticsearch/commit/f27e808c1457ddbda1c69b4422d9a10ee6ec299d\n- https://github.com/elastic/elasticsearch/commit/73bfdc4066be080dc4cad1f0521bf6ea14cded93"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9a43192c294e4c9e400bdc67940e266abe182988", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/9a43192c294e4c9e400bdc67940e266abe182988", "committedDate": "2020-08-17T14:30:19Z", "message": "bp: Close and acquire commit during reset engine fix\n\nhttps://github.com/elastic/elasticsearch/commit/eda31b0ac00c952a52885902be59ac429b0ca81a\n\nThis also applies missing bits from earlier commits and pulls in the\nReadOnlyEngine:\n\n- https://github.com/elastic/elasticsearch/commit/918232a9c6219867d8e83919bf319b8a3bcfc4fe\n- https://github.com/elastic/elasticsearch/commit/902d6f579aff968d8f8426f1e6855ca1d9fb3a05\n- https://github.com/elastic/elasticsearch/commit/5166dd0a4c6b53560cb873dbda1f41099e1554fa\n\nAnd makes some additional changes because we have already applied these\ncommits:\n\n- https://github.com/elastic/elasticsearch/commit/f27e808c1457ddbda1c69b4422d9a10ee6ec299d\n- https://github.com/elastic/elasticsearch/commit/73bfdc4066be080dc4cad1f0521bf6ea14cded93"}, "afterCommit": {"oid": "223798eb915405f03d360600903c535e0ccc00f5", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/223798eb915405f03d360600903c535e0ccc00f5", "committedDate": "2020-08-17T14:35:28Z", "message": "bp: Close and acquire commit during reset engine fix\n\nhttps://github.com/elastic/elasticsearch/commit/eda31b0ac00c952a52885902be59ac429b0ca81a\n\nThis also applies missing bits from earlier commits and pulls in the\nReadOnlyEngine:\n\n- https://github.com/elastic/elasticsearch/commit/918232a9c6219867d8e83919bf319b8a3bcfc4fe\n- https://github.com/elastic/elasticsearch/commit/902d6f579aff968d8f8426f1e6855ca1d9fb3a05\n- https://github.com/elastic/elasticsearch/commit/5166dd0a4c6b53560cb873dbda1f41099e1554fa\n\nAnd makes some additional changes because we have already applied these\ncommits:\n\n- https://github.com/elastic/elasticsearch/commit/f27e808c1457ddbda1c69b4422d9a10ee6ec299d\n- https://github.com/elastic/elasticsearch/commit/73bfdc4066be080dc4cad1f0521bf6ea14cded93"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3132, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}