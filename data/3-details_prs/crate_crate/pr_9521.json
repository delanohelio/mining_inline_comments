{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYzNjc3NTIx", "number": 9521, "title": "Replaced unnest function for sample tables in the docs with VALUES", "bodyText": "Summary of the changes / Why this improves CrateDB\nReplaced a number of instances of unnest with VALUES in order to make the relationship between the SQL syntax and the sample tables in the documentation more transparent.\nChecklist\n\n User relevant changes are recorded in CHANGES.txt\n Touched code is covered by tests\n Documentation has been updated if necessary\n CLA is signed\n This does not contain breaking changes, or if it does:\n\nIt is released within a major release\nIt is recorded in CHANGES.txt\nIt was marked as deprecated in an earlier release if possible\nYou've thought about the consequences and other components are adapted\n(E.g. AdminUI)", "createdAt": "2020-01-16T14:34:56Z", "url": "https://github.com/crate/crate/pull/9521", "merged": true, "mergeCommit": {"oid": "e471251d92848007ce6fa5b2b456f81dce0639c4"}, "closed": true, "closedAt": "2020-01-17T10:25:39Z", "author": {"login": "matthijskrul"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb67MtWgFqTM0Mzk1ODA0MQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABb7Lm-JgBqjI5NTc1Mjc0NTE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQzOTU4MDQx", "url": "https://github.com/crate/crate/pull/9521#pullrequestreview-343958041", "createdAt": "2020-01-16T14:37:34Z", "commit": {"oid": "facd364a872f8e8302c46ad84691db8711784224"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQxNDozNzozNFrOFebghQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQxNDo0MDo0MVrOFebnaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzQ1MjI5Mw==", "bodyText": "The FROM and WINDOW have been indented too much, can you de-indent them to match the level of SELECT above.", "url": "https://github.com/crate/crate/pull/9521#discussion_r367452293", "createdAt": "2020-01-16T14:37:34Z", "author": {"login": "autophagy"}, "path": "docs/general/builtins/window-functions.rst", "diffHunk": "@@ -318,10 +318,8 @@ then it can only add clauses from the referenced window, but not overwrite them.\n    cr> SELECT\n    ...   x,\n    ...   LAST_VALUE(x) OVER (w ORDER BY x)\n-   ... FROM unnest(\n-   ...      [1, 2, 3, 4],\n-   ...      [1, 1, 2, 2]) as t(x, y)\n-   ... WINDOW w AS (PARTITION BY y)\n+   ...   FROM (VALUES (1, 1), (2, 1), (3, 2), (4, 2)) as t(x, y)\n+   ...   WINDOW w AS (PARTITION BY y)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "facd364a872f8e8302c46ad84691db8711784224"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzQ1MzE5MQ==", "bodyText": "Not a required change, but just a suggestion. Maybe FROM (VALUES (1, 1), (2, 1), (3, 2), (4, 2)) as t(x, y) could be written as\nFROM (VALUES \n     (1, 1), \n     (2, 1), \n     (3, 2), \n     (4, 2) ) as t(x, y)\n\nto be a little clearer.", "url": "https://github.com/crate/crate/pull/9521#discussion_r367453191", "createdAt": "2020-01-16T14:39:15Z", "author": {"login": "autophagy"}, "path": "docs/general/builtins/window-functions.rst", "diffHunk": "@@ -318,10 +318,8 @@ then it can only add clauses from the referenced window, but not overwrite them.\n    cr> SELECT\n    ...   x,\n    ...   LAST_VALUE(x) OVER (w ORDER BY x)\n-   ... FROM unnest(\n-   ...      [1, 2, 3, 4],\n-   ...      [1, 1, 2, 2]) as t(x, y)\n-   ... WINDOW w AS (PARTITION BY y)\n+   ...   FROM (VALUES (1, 1), (2, 1), (3, 2), (4, 2)) as t(x, y)\n+   ...   WINDOW w AS (PARTITION BY y)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzQ1MjI5Mw=="}, "originalCommit": {"oid": "facd364a872f8e8302c46ad84691db8711784224"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzQ1Mzk0Mg==", "bodyText": "Similarly, do you think it'd be more readable here if each row in the VALUES expression was on a new line?", "url": "https://github.com/crate/crate/pull/9521#discussion_r367453942", "createdAt": "2020-01-16T14:40:29Z", "author": {"login": "autophagy"}, "path": "docs/general/builtins/window-functions.rst", "diffHunk": "@@ -514,11 +512,8 @@ Example::\n    ...   budget,\n    ...   LAG(budget) OVER(\n    ...      PARTITION BY dept_id) prev_budget\n-   ... FROM unnest(\n-   ...   [1, 1, 2, 2, 2],\n-   ...   [2017, 2018, 2017, 2018, 2019],\n-   ...   [45000, 35000, 15000, 65000, 12000]\n-   ... ) as t (dept_id, year, budget);\n+   ... FROM (VALUES(1, 2017, 45000), (1, 2018, 35000), (2, 2017, 15000), (2, 2018, 65000), (2, 2019, 12000))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "facd364a872f8e8302c46ad84691db8711784224"}, "originalPosition": 85}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzQ1NDA1Nw==", "bodyText": "Same comment here.", "url": "https://github.com/crate/crate/pull/9521#discussion_r367454057", "createdAt": "2020-01-16T14:40:41Z", "author": {"login": "autophagy"}, "path": "docs/general/builtins/window-functions.rst", "diffHunk": "@@ -569,11 +564,8 @@ Example::\n    ...   budget,\n    ...   LEAD(budget) OVER(\n    ...      PARTITION BY dept_id) next_budget\n-   ... FROM unnest(\n-   ...   [1, 1, 2, 2, 2],\n-   ...   [2017, 2018, 2017, 2018, 2019],\n-   ...   [45000, 35000, 15000, 65000, 12000]\n-   ... ) as t (dept_id, year, budget);\n+   ... FROM (VALUES(1, 2017, 45000), (1, 2018, 35000), (2, 2017, 15000), (2, 2018, 65000), (2, 2019, 12000))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "facd364a872f8e8302c46ad84691db8711784224"}, "originalPosition": 99}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ0MDcyNzk5", "url": "https://github.com/crate/crate/pull/9521#pullrequestreview-344072799", "createdAt": "2020-01-16T17:03:56Z", "commit": {"oid": "059b04f47573805a2c70c29af233d300c2725c22"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "059b04f47573805a2c70c29af233d300c2725c22", "author": {"user": {"login": "matthijskrul", "name": "Matthijs Krul"}}, "url": "https://github.com/crate/crate/commit/059b04f47573805a2c70c29af233d300c2725c22", "committedDate": "2020-01-16T17:00:46Z", "message": "fixup! Replaced 'unnest' function for building sample tables in the docs with VALUES"}, "afterCommit": {"oid": "06037f09b0057f6ef2bfbae7a2153422852267fb", "author": {"user": {"login": "matthijskrul", "name": "Matthijs Krul"}}, "url": "https://github.com/crate/crate/commit/06037f09b0057f6ef2bfbae7a2153422852267fb", "committedDate": "2020-01-16T17:08:35Z", "message": "Replaced 'unnest' function for building sample tables in the docs with VALUES"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "010314e395c2085b3941edadb261da6d2e4ce4aa", "author": {"user": {"login": "matthijskrul", "name": "Matthijs Krul"}}, "url": "https://github.com/crate/crate/commit/010314e395c2085b3941edadb261da6d2e4ce4aa", "committedDate": "2020-01-17T09:47:40Z", "message": "Replaced 'unnest' function for building sample tables in the docs with VALUES"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c73831c9613bed09ee46647ff92f6dbfa3569a1c", "author": {"user": {"login": "matthijskrul", "name": "Matthijs Krul"}}, "url": "https://github.com/crate/crate/commit/c73831c9613bed09ee46647ff92f6dbfa3569a1c", "committedDate": "2020-01-17T09:46:31Z", "message": "fixup! Replaced 'unnest' function for building sample tables in the docs with VALUES"}, "afterCommit": {"oid": "010314e395c2085b3941edadb261da6d2e4ce4aa", "author": {"user": {"login": "matthijskrul", "name": "Matthijs Krul"}}, "url": "https://github.com/crate/crate/commit/010314e395c2085b3941edadb261da6d2e4ce4aa", "committedDate": "2020-01-17T09:47:40Z", "message": "Replaced 'unnest' function for building sample tables in the docs with VALUES"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3912, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}