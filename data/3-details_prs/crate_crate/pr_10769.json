{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE5Nzk3OTU0", "number": 10769, "title": "Backport AllocationService related patches", "bodyText": "Summary of the changes / Why this improves CrateDB\nSee commit messages for details\nThese are older patches missing from es-backports, motivated by recent flaky tests.\nChecklist\n\n Added an entry in CHANGES.txt for user facing changes\n Updated documentation & sql_features table for user facing changes\n Touched code is covered by tests\n CLA is signed\n This does not contain breaking changes, or if it does:\n\nIt is released within a major release\nIt is recorded in CHANGES.txt\nIt was marked as deprecated in an earlier release if possible\nYou've thought about the consequences and other components are adapted\n(E.g. AdminUI)", "createdAt": "2020-11-12T10:52:58Z", "url": "https://github.com/crate/crate/pull/10769", "merged": true, "mergeCommit": {"oid": "d3caecf2b2114bfc933d533f4a96f02753bf9aec"}, "closed": true, "closedAt": "2020-11-13T13:27:32Z", "author": {"login": "mfussenegger"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdb04zhABqjM5ODk0NjgwOTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdcGzgMABqjM5OTMzODE1OTU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "99e71118a107545854e7b5bfffd69db492446c10", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/99e71118a107545854e7b5bfffd69db492446c10", "committedDate": "2020-11-12T10:52:04Z", "message": "bp: Report shard state changes better\n\nhttps://github.com/elastic/elasticsearch/commit/f13c8445831e0de00017753f74b5cda0d96733f2"}, "afterCommit": {"oid": "376da8305f66ff973475e379952c1f40f7fd39e6", "author": {"user": {"login": "DaveCTurner", "name": "David Turner"}}, "url": "https://github.com/crate/crate/commit/376da8305f66ff973475e379952c1f40f7fd39e6", "committedDate": "2020-11-12T16:10:06Z", "message": "bp: Relocation targets are assigned shards too\n\nhttps://github.com/elastic/elasticsearch/commit/6d0d449254f4a98d003990cc05db865ce9c68de0"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "376da8305f66ff973475e379952c1f40f7fd39e6", "author": {"user": {"login": "DaveCTurner", "name": "David Turner"}}, "url": "https://github.com/crate/crate/commit/376da8305f66ff973475e379952c1f40f7fd39e6", "committedDate": "2020-11-12T16:10:06Z", "message": "bp: Relocation targets are assigned shards too\n\nhttps://github.com/elastic/elasticsearch/commit/6d0d449254f4a98d003990cc05db865ce9c68de0"}, "afterCommit": {"oid": "2204704299f0a45d93c74f81cceff49e13c74b50", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/2204704299f0a45d93c74f81cceff49e13c74b50", "committedDate": "2020-11-12T16:26:25Z", "message": "bp: Relocation targets are assigned shards too\n\nhttps://github.com/elastic/elasticsearch/commit/6d0d449254f4a98d003990cc05db865ce9c68de0"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2204704299f0a45d93c74f81cceff49e13c74b50", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/2204704299f0a45d93c74f81cceff49e13c74b50", "committedDate": "2020-11-12T16:26:25Z", "message": "bp: Relocation targets are assigned shards too\n\nhttps://github.com/elastic/elasticsearch/commit/6d0d449254f4a98d003990cc05db865ce9c68de0"}, "afterCommit": {"oid": "ab37c5c8067290b5f41425c76cb9c7a7d5e6d604", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/ab37c5c8067290b5f41425c76cb9c7a7d5e6d604", "committedDate": "2020-11-13T10:00:11Z", "message": "bp: Relocation targets are assigned shards too\n\nhttps://github.com/elastic/elasticsearch/commit/6d0d449254f4a98d003990cc05db865ce9c68de0"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI5OTc2NzM2", "url": "https://github.com/crate/crate/pull/10769#pullrequestreview-529976736", "createdAt": "2020-11-13T11:13:03Z", "commit": {"oid": "ab37c5c8067290b5f41425c76cb9c7a7d5e6d604"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QxMToxMzowM1rOHyqXeg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QxMToxMzowM1rOHyqXeg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjg4NDk4Ng==", "bodyText": "is this used somewhere? or what is the reason to add it?", "url": "https://github.com/crate/crate/pull/10769#discussion_r522884986", "createdAt": "2020-11-13T11:13:03Z", "author": {"login": "seut"}, "path": "server/src/main/java/org/elasticsearch/cluster/routing/IndexShardRoutingTable.java", "diffHunk": "@@ -200,7 +204,16 @@ public int getSize() {\n     }\n \n     /**\n-     * Returns a {@link List} of assigned shards\n+     * Returns a {@link List} of active shards\n+     *\n+     * @return a {@link List} of shards\n+     */\n+    public List<ShardRouting> getActiveShards() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ab37c5c8067290b5f41425c76cb9c7a7d5e6d604"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI5OTc3Njk4", "url": "https://github.com/crate/crate/pull/10769#pullrequestreview-529977698", "createdAt": "2020-11-13T11:14:39Z", "commit": {"oid": "ab37c5c8067290b5f41425c76cb9c7a7d5e6d604"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2d2cd1968848c1989b1dee8a775d72a408b39ea0", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/2d2cd1968848c1989b1dee8a775d72a408b39ea0", "committedDate": "2020-11-13T13:01:25Z", "message": "bp: Report shard state changes better\n\nhttps://github.com/elastic/elasticsearch/commit/f13c8445831e0de00017753f74b5cda0d96733f2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f5be0dbf3e202b02f4c6e73ad9303f5647abf5d", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/7f5be0dbf3e202b02f4c6e73ad9303f5647abf5d", "committedDate": "2020-11-13T13:01:25Z", "message": "bp: Remove Dead Code + Duplication in o.e.c.routing\n\nhttps://github.com/elastic/elasticsearch/commit/abd861bb9191a3e3edd4f92f7d5c586dfa90281d"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "396558be314cc1eebf356bd48da96fd456390168", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/396558be314cc1eebf356bd48da96fd456390168", "committedDate": "2020-11-13T13:01:25Z", "message": "bp: Validate routing commands using updated routing state\n\nhttps://github.com/elastic/elasticsearch/commit/ae783879626ace085d30c3debd0a247de8535301"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "49d24d1899d7758154df14c2c73452d519426e87", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/49d24d1899d7758154df14c2c73452d519426e87", "committedDate": "2020-11-13T13:01:25Z", "message": "bp: Allow routing commands with ?retry_failed=true\n\nhttps://github.com/elastic/elasticsearch/commit/5e16a74c8311c6b2b3174ad30f9c8b6042ca25bb"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2d2ec3049932bae9493b12798192e6ae9b1f40e3", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/2d2ec3049932bae9493b12798192e6ae9b1f40e3", "committedDate": "2020-11-13T13:02:19Z", "message": "bp: Relocation targets are assigned shards too\n\nhttps://github.com/elastic/elasticsearch/commit/6d0d449254f4a98d003990cc05db865ce9c68de0"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ab37c5c8067290b5f41425c76cb9c7a7d5e6d604", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/ab37c5c8067290b5f41425c76cb9c7a7d5e6d604", "committedDate": "2020-11-13T10:00:11Z", "message": "bp: Relocation targets are assigned shards too\n\nhttps://github.com/elastic/elasticsearch/commit/6d0d449254f4a98d003990cc05db865ce9c68de0"}, "afterCommit": {"oid": "2d2ec3049932bae9493b12798192e6ae9b1f40e3", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/2d2ec3049932bae9493b12798192e6ae9b1f40e3", "committedDate": "2020-11-13T13:02:19Z", "message": "bp: Relocation targets are assigned shards too\n\nhttps://github.com/elastic/elasticsearch/commit/6d0d449254f4a98d003990cc05db865ce9c68de0"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3625, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}