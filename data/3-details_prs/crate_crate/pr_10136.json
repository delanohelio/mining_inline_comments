{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM5OTEwMTkw", "number": 10136, "title": "Extend `pg_catalog.pg_proc` with `<data type>recv` functions.  ", "bodyText": "Summary of the changes / Why this improves CrateDB\nWe have the Added the 'pg_catalog.pg_proc <postgres_pg_catalog>'_ table change log entry already.\nChecklist\n\n Added an entry in CHANGES.txt for user facing changes\n Updated documentation & sql_features table for user facing changes\n Touched code is covered by tests\n CLA is signed\n This does not contain breaking changes, or if it does:\n\nIt is released within a major release\nIt is recorded in CHANGES.txt\nIt was marked as deprecated in an earlier release if possible\nYou've thought about the consequences and other components are adapted\n(E.g. AdminUI)", "createdAt": "2020-06-25T09:51:51Z", "url": "https://github.com/crate/crate/pull/10136", "merged": true, "mergeCommit": {"oid": "5909f0c6ebbe48634be76a17786b76c136281db4"}, "closed": true, "closedAt": "2020-06-25T14:01:16Z", "author": {"login": "kovrus"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcurqX8ABqjM0ODE2MzA5MzA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcuuqqlAH2gAyNDM5OTEwMTkwOjUyNDQ2ZWRmMmY1NmU0NTdkN2ZmYWVhMDhkMWM4M2IzYTRiYTcyOTI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4acf7406d29194d99780d513e3bf237cda3d822a", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/4acf7406d29194d99780d513e3bf237cda3d822a", "committedDate": "2020-06-25T09:47:32Z", "message": "Add <data type> + recv methods to pg_proc table for PG compatibility."}, "afterCommit": {"oid": "b4e07c9827d3145fcb4572bd6c36b83dea9d383f", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/b4e07c9827d3145fcb4572bd6c36b83dea9d383f", "committedDate": "2020-06-25T09:58:31Z", "message": "Add <data type> + recv methods to pg_proc table for PG compatibility."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a1b073256f79ff16bdf91e04b6003884833ba372", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/a1b073256f79ff16bdf91e04b6003884833ba372", "committedDate": "2020-06-25T11:27:32Z", "message": "Base Regproc hashCode and equals on the oid only.\n\nSuch as we cannot lookup the function name by oid and fallback\nto using the oid as name, we cannot use the name to check the\nequality of the Regproc objects. Therefore, we use the oid only\nto check the equality and calculate the hash code."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b4e07c9827d3145fcb4572bd6c36b83dea9d383f", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/b4e07c9827d3145fcb4572bd6c36b83dea9d383f", "committedDate": "2020-06-25T09:58:31Z", "message": "Add <data type> + recv methods to pg_proc table for PG compatibility."}, "afterCommit": {"oid": "77304c11b5372316e2f04c4fffccc952a9709c37", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/77304c11b5372316e2f04c4fffccc952a9709c37", "committedDate": "2020-06-25T11:27:32Z", "message": "Add <data type> + recv methods to pg_proc table for PG compatibility."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3NDQxODI3", "url": "https://github.com/crate/crate/pull/10136#pullrequestreview-437441827", "createdAt": "2020-06-25T12:27:40Z", "commit": {"oid": "77304c11b5372316e2f04c4fffccc952a9709c37"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxMjoyNzo0MVrOGo4VDw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxMjoyNzo0MVrOGo4VDw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTUxOTExOQ==", "bodyText": "I think this concat here needs to be put into the () ->  block further below to make sure that all subsequent iterator() calls from the Iterable return the same rows.\nAs it is I think this stream would be exhausted after the first iterator has been processed.\nSome of our BatchIterator implementations can depend on that behavior.", "url": "https://github.com/crate/crate/pull/10136#discussion_r445519119", "createdAt": "2020-06-25T12:27:41Z", "author": {"login": "mfussenegger"}, "path": "server/src/main/java/io/crate/execution/engine/collect/sources/InformationSchemaIterables.java", "diffHunk": "@@ -276,14 +292,19 @@ private boolean isPrimaryKey(RelationInfo relationInfo) {\n     }\n \n     public Iterable<PgProcTable.Entry> pgProc() {\n-        return () -> concat(\n+        var buildInAndUserDefinedFunctions = concat(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77304c11b5372316e2f04c4fffccc952a9709c37"}, "originalPosition": 58}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "77304c11b5372316e2f04c4fffccc952a9709c37", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/77304c11b5372316e2f04c4fffccc952a9709c37", "committedDate": "2020-06-25T11:27:32Z", "message": "Add <data type> + recv methods to pg_proc table for PG compatibility."}, "afterCommit": {"oid": "db8bc56fe5620c6915d317a76bf81d5c5ece6762", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/db8bc56fe5620c6915d317a76bf81d5c5ece6762", "committedDate": "2020-06-25T12:58:41Z", "message": "Add <data type> + recv methods to pg_proc table for PG compatibility."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6c3788b638bc714991d539289c50bfe8b8b34614", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/6c3788b638bc714991d539289c50bfe8b8b34614", "committedDate": "2020-06-25T12:59:40Z", "message": "Add <data type> + recv methods to pg_proc table for PG compatibility."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "db8bc56fe5620c6915d317a76bf81d5c5ece6762", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/db8bc56fe5620c6915d317a76bf81d5c5ece6762", "committedDate": "2020-06-25T12:58:41Z", "message": "Add <data type> + recv methods to pg_proc table for PG compatibility."}, "afterCommit": {"oid": "6c3788b638bc714991d539289c50bfe8b8b34614", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/6c3788b638bc714991d539289c50bfe8b8b34614", "committedDate": "2020-06-25T12:59:40Z", "message": "Add <data type> + recv methods to pg_proc table for PG compatibility."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "52446edf2f56e457d7ffaea08d1c83b3a4ba7292", "author": {"user": {"login": "mergify[bot]", "name": null}}, "url": "https://github.com/crate/crate/commit/52446edf2f56e457d7ffaea08d1c83b3a4ba7292", "committedDate": "2020-06-25T13:28:50Z", "message": "Merge branch 'master' into r/regproc-join"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3156, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}