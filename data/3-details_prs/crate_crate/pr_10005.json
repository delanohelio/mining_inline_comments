{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIzMzczNDc3", "number": 10005, "title": "Introduce ShardState Enum + Slight Cleanup SnapshotsInProgress", "bodyText": "Summary of the changes / Why this improves CrateDB\nBackport of elastic/elasticsearch#41940\nPrecursor for later backports.\nChecklist\n\n Added an entry in CHANGES.txt for user facing changes\n Updated documentation & sql_features table for user facing changes\n Touched code is covered by tests\n CLA is signed\n This does not contain breaking changes, or if it does:\n\nIt is released within a major release\nIt is recorded in CHANGES.txt\nIt was marked as deprecated in an earlier release if possible\nYou've thought about the consequences and other components are adapted\n(E.g. AdminUI)", "createdAt": "2020-05-26T18:18:09Z", "url": "https://github.com/crate/crate/pull/10005", "merged": true, "mergeCommit": {"oid": "aec4fb9aa565fc7e16761ff8091aa0c02b55bb14"}, "closed": true, "closedAt": "2020-05-27T15:10:08Z", "author": {"login": "mkleen"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABclJ82_ABqjMzNzUwNzk2NTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABclZVZugH2gAyNDIzMzczNDc3OjIxNjk0MWEzNDA5MjIxYTQ5N2Q1MzBlYmQ0Zjg5YjFiNTJkYmE5ZjQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a613bdfe291fd6d83adf770492ccdd481b8a14c7", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/a613bdfe291fd6d83adf770492ccdd481b8a14c7", "committedDate": "2020-05-26T19:33:41Z", "message": "WIP"}, "afterCommit": {"oid": "2e55b51460df367235c5426df6392862c667865d", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/2e55b51460df367235c5426df6392862c667865d", "committedDate": "2020-05-26T19:36:44Z", "message": "WIP"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "843671b33d668acb9aa45c4eb5f06159b0902bd2", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/843671b33d668acb9aa45c4eb5f06159b0902bd2", "committedDate": "2020-05-26T19:54:58Z", "message": "Fix"}, "afterCommit": {"oid": "f3fd5e59c3bf92f345900dec2cbda3dffda11937", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/f3fd5e59c3bf92f345900dec2cbda3dffda11937", "committedDate": "2020-05-26T20:23:10Z", "message": "Introduce ShardState Enum + Slight Cleanup SnapshotsInProgress\n\nBackport of https://github.com/elastic/elasticsearch/pull/41940"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f3fd5e59c3bf92f345900dec2cbda3dffda11937", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/f3fd5e59c3bf92f345900dec2cbda3dffda11937", "committedDate": "2020-05-26T20:23:10Z", "message": "Introduce ShardState Enum + Slight Cleanup SnapshotsInProgress\n\nBackport of https://github.com/elastic/elasticsearch/pull/41940"}, "afterCommit": {"oid": "8f7c053445a3821e88acbb07576d364bdeb8d1a1", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/8f7c053445a3821e88acbb07576d364bdeb8d1a1", "committedDate": "2020-05-27T07:17:32Z", "message": "Introduce ShardState Enum + Slight Cleanup SnapshotsInProgress\n\nBackport of https://github.com/elastic/elasticsearch/pull/41940"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8f7c053445a3821e88acbb07576d364bdeb8d1a1", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/8f7c053445a3821e88acbb07576d364bdeb8d1a1", "committedDate": "2020-05-27T07:17:32Z", "message": "Introduce ShardState Enum + Slight Cleanup SnapshotsInProgress\n\nBackport of https://github.com/elastic/elasticsearch/pull/41940"}, "afterCommit": {"oid": "c5f8d6e22c1791c27a48d45a971125aa7db74d73", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/c5f8d6e22c1791c27a48d45a971125aa7db74d73", "committedDate": "2020-05-27T07:24:44Z", "message": "Introduce ShardState Enum + Slight Cleanup SnapshotsInProgress\n\nBackport of https://github.com/elastic/elasticsearch/pull/41940"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5MDAxNTUw", "url": "https://github.com/crate/crate/pull/10005#pullrequestreview-419001550", "createdAt": "2020-05-27T09:09:36Z", "commit": {"oid": "c5f8d6e22c1791c27a48d45a971125aa7db74d73"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwOTowOTozN1rOGbAXXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwOTowOTozN1rOGbAXXg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDk3MDcxOA==", "bodyText": "This method is still present in latest ES master, why did you remove it?", "url": "https://github.com/crate/crate/pull/10005#discussion_r430970718", "createdAt": "2020-05-27T09:09:37Z", "author": {"login": "mfussenegger"}, "path": "server/src/main/java/org/elasticsearch/cluster/SnapshotsInProgress.java", "diffHunk": "@@ -109,7 +106,6 @@ public Entry(Snapshot snapshot, boolean includeGlobalState, boolean partial, Sta\n             } else {\n                 this.shards = shards;\n                 this.waitingIndices = findWaitingIndices(shards);\n-                assert assertShardsConsistent(state, indices, shards);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c5f8d6e22c1791c27a48d45a971125aa7db74d73"}, "originalPosition": 47}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5MDMxNDI5", "url": "https://github.com/crate/crate/pull/10005#pullrequestreview-419031429", "createdAt": "2020-05-27T09:48:05Z", "commit": {"oid": "f6adc8a336a66a48b3cfca3c00ef0ff68de99877"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f6adc8a336a66a48b3cfca3c00ef0ff68de99877", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/f6adc8a336a66a48b3cfca3c00ef0ff68de99877", "committedDate": "2020-05-27T09:30:31Z", "message": "Add assertShardsConsistent back"}, "afterCommit": {"oid": "98a9e20431b23dfceebf09bf934763044ff2c4ac", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/98a9e20431b23dfceebf09bf934763044ff2c4ac", "committedDate": "2020-05-27T12:20:50Z", "message": "Introduce ShardState Enum + Slight Cleanup SnapshotsInProgress\n\nBackport of https://github.com/elastic/elasticsearch/pull/41940"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dbddb319c13580e9a8351d202a5e757d9dbacbff", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/dbddb319c13580e9a8351d202a5e757d9dbacbff", "committedDate": "2020-05-27T12:23:02Z", "message": "Introduce ShardState Enum + Slight Cleanup SnapshotsInProgress\n\nBackport of https://github.com/elastic/elasticsearch/pull/41940"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "98a9e20431b23dfceebf09bf934763044ff2c4ac", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/98a9e20431b23dfceebf09bf934763044ff2c4ac", "committedDate": "2020-05-27T12:20:50Z", "message": "Introduce ShardState Enum + Slight Cleanup SnapshotsInProgress\n\nBackport of https://github.com/elastic/elasticsearch/pull/41940"}, "afterCommit": {"oid": "dbddb319c13580e9a8351d202a5e757d9dbacbff", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/dbddb319c13580e9a8351d202a5e757d9dbacbff", "committedDate": "2020-05-27T12:23:02Z", "message": "Introduce ShardState Enum + Slight Cleanup SnapshotsInProgress\n\nBackport of https://github.com/elastic/elasticsearch/pull/41940"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a51c97d1efa660dfb99cf6c893fb1e9a42c49910", "author": {"user": {"login": "mergify[bot]", "name": null}}, "url": "https://github.com/crate/crate/commit/a51c97d1efa660dfb99cf6c893fb1e9a42c49910", "committedDate": "2020-05-27T12:56:18Z", "message": "Merge branch 'master' into mkleen/shardstate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "216941a3409221a497d530ebd4f89b1b52dba9f4", "author": {"user": {"login": "mergify[bot]", "name": null}}, "url": "https://github.com/crate/crate/commit/216941a3409221a497d530ebd4f89b1b52dba9f4", "committedDate": "2020-05-27T13:32:17Z", "message": "Merge branch 'master' into mkleen/shardstate"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3216, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}