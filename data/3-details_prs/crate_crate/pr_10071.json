{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMyNTE2NzQ4", "number": 10071, "title": "Re-enable IAM Roles for s3 repositories", "bodyText": "Summary of the changes / Why this improves CrateDB\nThis will re-enable the IAM role authentication on ec2 for s3 repositories when no aws credentials are provided.\nChecklist\n\n Added an entry in CHANGES.txt for user facing changes\n Updated documentation & sql_features table for user facing changes\n Touched code is covered by tests\n CLA is signed\n This does not contain breaking changes, or if it does:\n\nIt is released within a major release\nIt is recorded in CHANGES.txt\nIt was marked as deprecated in an earlier release if possible\nYou've thought about the consequences and other components are adapted\n(E.g. AdminUI)", "createdAt": "2020-06-10T15:01:13Z", "url": "https://github.com/crate/crate/pull/10071", "merged": true, "mergeCommit": {"oid": "1a72fd9cc15a3279cbe45c1f992eeea57bc4b485"}, "closed": true, "closedAt": "2020-06-16T21:44:28Z", "author": {"login": "mkleen"}, "timelineItems": {"totalCount": 25, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcqK4DxgBqjM0MzMzMDkzNzk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcr7PgtAFqTQzMTg2NDYzMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8fba7b8b2a0f471a3cd2a7c4d647930c9e162c43", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/8fba7b8b2a0f471a3cd2a7c4d647930c9e162c43", "committedDate": "2020-06-11T09:09:30Z", "message": "Add test for EC2ContainerCredentials"}, "afterCommit": {"oid": "bcd6ab892a408ca278b3002261b63908f1097f1c", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/bcd6ab892a408ca278b3002261b63908f1097f1c", "committedDate": "2020-06-11T09:30:36Z", "message": "Remove mandatorySettings in s3 S3Repository to get IAM roles working again"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "149d457884396a8298dc6dc7dbe94e8d616e0204", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/149d457884396a8298dc6dc7dbe94e8d616e0204", "committedDate": "2020-06-11T10:05:00Z", "message": "Add change note"}, "afterCommit": {"oid": "a681bda9a093e6106baf0d6c1852a0b860b23787", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/a681bda9a093e6106baf0d6c1852a0b860b23787", "committedDate": "2020-06-11T10:06:38Z", "message": "Remove mandatorySettings in s3 S3Repository to get IAM roles working again"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a681bda9a093e6106baf0d6c1852a0b860b23787", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/a681bda9a093e6106baf0d6c1852a0b860b23787", "committedDate": "2020-06-11T10:06:38Z", "message": "Remove mandatorySettings in s3 S3Repository to get IAM roles working again"}, "afterCommit": {"oid": "854b3d136ad9dc5d00625093f2e888aacc3c46ad", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/854b3d136ad9dc5d00625093f2e888aacc3c46ad", "committedDate": "2020-06-11T10:07:47Z", "message": "Remove mandatorySettings in s3 S3Repository to get IAM roles working again"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "854b3d136ad9dc5d00625093f2e888aacc3c46ad", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/854b3d136ad9dc5d00625093f2e888aacc3c46ad", "committedDate": "2020-06-11T10:07:47Z", "message": "Remove mandatorySettings in s3 S3Repository to get IAM roles working again"}, "afterCommit": {"oid": "a442ade1806108b178c06bccdfe3fd965363b4d0", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/a442ade1806108b178c06bccdfe3fd965363b4d0", "committedDate": "2020-06-11T10:24:53Z", "message": "Remove mandatorySettings in s3 S3Repository to get IAM roles working again"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a442ade1806108b178c06bccdfe3fd965363b4d0", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/a442ade1806108b178c06bccdfe3fd965363b4d0", "committedDate": "2020-06-11T10:24:53Z", "message": "Remove mandatorySettings in s3 S3Repository to get IAM roles working again"}, "afterCommit": {"oid": "f431b9299138269d11c5cf60dacd9f91390e874d", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/f431b9299138269d11c5cf60dacd9f91390e874d", "committedDate": "2020-06-11T10:39:48Z", "message": "Re-enable IAM Roles for s3 repositories"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5945f6ad1a31136410953315cc4b77bfdf1a5272", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/5945f6ad1a31136410953315cc4b77bfdf1a5272", "committedDate": "2020-06-11T12:57:02Z", "message": "Remove settings from S3RepositoryPlugin"}, "afterCommit": {"oid": "4f5ab86c4672bc81cef83d5123b8bb007eabfbf0", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/4f5ab86c4672bc81cef83d5123b8bb007eabfbf0", "committedDate": "2020-06-11T13:05:03Z", "message": "Remove settings from S3RepositoryPlugin"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI4OTUxMDk0", "url": "https://github.com/crate/crate/pull/10071#pullrequestreview-428951094", "createdAt": "2020-06-11T14:09:29Z", "commit": {"oid": "323f7333841b825b9a5f32adf2da3162350b22fc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxNDowOToyOVrOGifJog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxNDowOToyOVrOGifJog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODgxNTEzOA==", "bodyText": "Is the executeSingleUpload the right place for it? There are also delete blob, read blob, and other methods of BlobContainer.\nIs it possible to do it somewhere in S3ClientSettings?", "url": "https://github.com/crate/crate/pull/10071#discussion_r438815138", "createdAt": "2020-06-11T14:09:29Z", "author": {"login": "kovrus"}, "path": "plugins/es-repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3BlobContainer.java", "diffHunk": "@@ -259,7 +259,14 @@ void executeSingleUpload(final S3BlobStore blobStore,\n         try (AmazonS3Reference clientReference = blobStore.clientReference()) {\n             clientReference.client().putObject(putRequest);\n         } catch (final AmazonClientException e) {\n-            throw new IOException(\"Unable to upload object [\" + blobName + \"] using a single upload\", e);\n+            if (!this.blobStore.getRepositoryMetaData().settings().hasValue(S3RepositorySettings.ACCESS_KEY_SETTING.getKey()) &&", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "323f7333841b825b9a5f32adf2da3162350b22fc"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0a1b4f7decfae88fa5ae08b372ee4a3e0c1a8b79", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/0a1b4f7decfae88fa5ae08b372ee4a3e0c1a8b79", "committedDate": "2020-06-11T20:14:01Z", "message": "Move aws credential exception to S3BlobContainer"}, "afterCommit": {"oid": "4a7f7c8300528f13ab29c923ffece740d1940ac7", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/4a7f7c8300528f13ab29c923ffece740d1940ac7", "committedDate": "2020-06-11T22:35:07Z", "message": "Move aws credential exception to S3BlobContainer"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e4eb1166a8d1b309138cc2b1c790ae9c67699cd3", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/e4eb1166a8d1b309138cc2b1c790ae9c67699cd3", "committedDate": "2020-06-15T09:42:37Z", "message": "Cleanup exception handling"}, "afterCommit": {"oid": "084a8ed9b512c7ecc39b7404714635c1f55d4acc", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/084a8ed9b512c7ecc39b7404714635c1f55d4acc", "committedDate": "2020-06-15T09:50:52Z", "message": "Cleanup exception handling"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "084a8ed9b512c7ecc39b7404714635c1f55d4acc", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/084a8ed9b512c7ecc39b7404714635c1f55d4acc", "committedDate": "2020-06-15T09:50:52Z", "message": "Cleanup exception handling"}, "afterCommit": {"oid": "d4b5386f2c6a2c60025327096c712658ad0bc93f", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/d4b5386f2c6a2c60025327096c712658ad0bc93f", "committedDate": "2020-06-15T09:52:21Z", "message": "Cleanup exception handling"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwNTA0MjYw", "url": "https://github.com/crate/crate/pull/10071#pullrequestreview-430504260", "createdAt": "2020-06-15T10:11:07Z", "commit": {"oid": "d4b5386f2c6a2c60025327096c712658ad0bc93f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMDoxMTowN1rOGjr0rg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMDoxMTowN1rOGjr0rg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDA3MTM0Mg==", "bodyText": "I am just wondering why it should RepositoryVerificationException, we are just trying to configure a client at this point and not yet doing anything with repositories. Also to buildCredentials we don't need to know the repository name  buildCredentials(Logger logger, S3ClientSettings clientSettings, String repository)", "url": "https://github.com/crate/crate/pull/10071#discussion_r440071342", "createdAt": "2020-06-15T10:11:07Z", "author": {"login": "kovrus"}, "path": "plugins/es-repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3Service.java", "diffHunk": "@@ -119,11 +121,19 @@ static ClientConfiguration buildConfiguration(S3ClientSettings clientSettings) {\n     }\n \n     // pkg private for tests\n-    static AWSCredentialsProvider buildCredentials(Logger logger, S3ClientSettings clientSettings) {\n+    static AWSCredentialsProvider buildCredentials(Logger logger, S3ClientSettings clientSettings, String repository) {\n         final AWSCredentials credentials = clientSettings.credentials;\n         if (credentials == null) {\n             logger.debug(\"Using instance profile credentials\");\n-            return new EC2ContainerCredentialsProviderWrapper();\n+            var ec2ContainerCredentialsProviderWrapper = new EC2ContainerCredentialsProviderWrapper();\n+            try {\n+                // Try to connect to test credentials\n+                ec2ContainerCredentialsProviderWrapper.getCredentials();\n+                return ec2ContainerCredentialsProviderWrapper;\n+            } catch(SdkClientException e) {\n+                throw new RepositoryVerificationException(repository, \"Cannot find required credentials to create a repository of type s3. \" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d4b5386f2c6a2c60025327096c712658ad0bc93f"}, "originalPosition": 53}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d4b5386f2c6a2c60025327096c712658ad0bc93f", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/d4b5386f2c6a2c60025327096c712658ad0bc93f", "committedDate": "2020-06-15T09:52:21Z", "message": "Cleanup exception handling"}, "afterCommit": {"oid": "46b8331bcc4658cda42e612bdeb9a905aaf7051a", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/46b8331bcc4658cda42e612bdeb9a905aaf7051a", "committedDate": "2020-06-15T10:13:11Z", "message": "Cleanup exception handling"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6ed8e16a092319f45fc05077cbce502b3cfd87bb", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/6ed8e16a092319f45fc05077cbce502b3cfd87bb", "committedDate": "2020-06-15T10:35:59Z", "message": "Change to IOException"}, "afterCommit": {"oid": "752216d48432c734c8e47877e4389a76a273c757", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/752216d48432c734c8e47877e4389a76a273c757", "committedDate": "2020-06-15T10:37:24Z", "message": "Change to IOException"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "752216d48432c734c8e47877e4389a76a273c757", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/752216d48432c734c8e47877e4389a76a273c757", "committedDate": "2020-06-15T10:37:24Z", "message": "Change to IOException"}, "afterCommit": {"oid": "068e13f708a2f37cf9f27a749d9ad88665f92c09", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/068e13f708a2f37cf9f27a749d9ad88665f92c09", "committedDate": "2020-06-15T10:39:08Z", "message": "Change to IOException"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3f4b98c7d7762129b8f826f72fac8ff873f15d6e", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/3f4b98c7d7762129b8f826f72fac8ff873f15d6e", "committedDate": "2020-06-15T11:07:22Z", "message": "add an IlegalArgumentException"}, "afterCommit": {"oid": "c50c3489c61c643caede66048eb3523dc1f14461", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/c50c3489c61c643caede66048eb3523dc1f14461", "committedDate": "2020-06-15T11:09:06Z", "message": "Add an IlegalArgumentException"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3404885555fe20c13c6de74e054c887097f439b8", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/3404885555fe20c13c6de74e054c887097f439b8", "committedDate": "2020-06-15T12:44:29Z", "message": "Add BlobStoreCredentialException and MissingParametersException"}, "afterCommit": {"oid": "ad02ff5f40bc853937b15eef6e9dcae5543838f9", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/ad02ff5f40bc853937b15eef6e9dcae5543838f9", "committedDate": "2020-06-15T12:59:22Z", "message": "Add BlobStoreCredentialException and MissingParametersException"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxMzE0MTc2", "url": "https://github.com/crate/crate/pull/10071#pullrequestreview-431314176", "createdAt": "2020-06-16T09:15:48Z", "commit": {"oid": "ad02ff5f40bc853937b15eef6e9dcae5543838f9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwOToxNTo0OFrOGkSm_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwOToxNTo0OFrOGkSm_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDcwNjgxMw==", "bodyText": "if we introduce a new CrateException do we need to have a unique error code? Do we also have to reflect changes here \n  \n    \n      crate/server/src/main/java/io/crate/exceptions/SQLExceptions.java\n    \n    \n        Lines 144 to 163\n      in\n      ad02ff5\n    \n    \n    \n    \n\n        \n          \n           if (e instanceof CrateException) { \n        \n\n        \n          \n               CrateException crateException = (CrateException) e; \n        \n\n        \n          \n               if (e instanceof ValidationException) { \n        \n\n        \n          \n                   errorCode = 4000 + crateException.errorCode(); \n        \n\n        \n          \n                   httpStatus = HttpResponseStatus.BAD_REQUEST; \n        \n\n        \n          \n               } else if (e instanceof UnauthorizedException) { \n        \n\n        \n          \n                   errorCode = 4010 + crateException.errorCode(); \n        \n\n        \n          \n                   httpStatus = HttpResponseStatus.UNAUTHORIZED; \n        \n\n        \n          \n               } else if (e instanceof ReadOnlyException) { \n        \n\n        \n          \n                   errorCode = 4030 + crateException.errorCode(); \n        \n\n        \n          \n                   httpStatus = HttpResponseStatus.FORBIDDEN; \n        \n\n        \n          \n               } else if (e instanceof ResourceUnknownException) { \n        \n\n        \n          \n                   errorCode = 4040 + crateException.errorCode(); \n        \n\n        \n          \n                   httpStatus = HttpResponseStatus.NOT_FOUND; \n        \n\n        \n          \n               } else if (e instanceof ConflictException) { \n        \n\n        \n          \n                   errorCode = 4090 + crateException.errorCode(); \n        \n\n        \n          \n                   httpStatus = HttpResponseStatus.CONFLICT; \n        \n\n        \n          \n               } else if (e instanceof UnhandledServerException) { \n        \n\n        \n          \n                   errorCode = 5000 + crateException.errorCode(); \n        \n\n        \n          \n               } \n        \n    \n  \n\n ?\nDo we need to update http doc https://github.com/crate/crate/blob/ad02ff5f40bc853937b15eef6e9dcae5543838f9/docs/interfaces/http.rst#id10\nIt seems like a user-facing change. Were you planning to backport it as well?", "url": "https://github.com/crate/crate/pull/10071#discussion_r440706813", "createdAt": "2020-06-16T09:15:48Z", "author": {"login": "kovrus"}, "path": "server/src/main/java/io/crate/exceptions/MissingParametersException.java", "diffHunk": "@@ -0,0 +1,40 @@\n+/*\n+ * Licensed to Crate under one or more contributor license agreements.\n+ * See the NOTICE file distributed with this work for additional\n+ * information regarding copyright ownership.  Crate licenses this file\n+ * to you under the Apache License, Version 2.0 (the \"License\"); you may\n+ * not use this file except in compliance with the License.  You may\n+ * obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or\n+ * implied.  See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ *\n+ * However, if you have executed another commercial license agreement\n+ * with Crate these terms will supersede the license and you may use the\n+ * software solely pursuant to the terms of the relevant commercial\n+ * agreement.\n+ */\n+\n+package io.crate.exceptions;\n+\n+public class MissingParametersException extends RuntimeException implements CrateException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ad02ff5f40bc853937b15eef6e9dcae5543838f9"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxMzI3MjE2", "url": "https://github.com/crate/crate/pull/10071#pullrequestreview-431327216", "createdAt": "2020-06-16T09:32:23Z", "commit": {"oid": "ad02ff5f40bc853937b15eef6e9dcae5543838f9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwOTozMjoyNFrOGkTNxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwOTozMjoyNFrOGkTNxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDcxNjc0MQ==", "bodyText": "Why cant we just extend from a io.crate.exceptions.ValidationException** here instead? I don't see any reason to create an ES exception here which will always be converted later on.", "url": "https://github.com/crate/crate/pull/10071#discussion_r440716741", "createdAt": "2020-06-16T09:32:24Z", "author": {"login": "seut"}, "path": "server/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreCredentialsException.java", "diffHunk": "@@ -0,0 +1,45 @@\n+/*\n+ * Licensed to Crate under one or more contributor license agreements.\n+ * See the NOTICE file distributed with this work for additional\n+ * information regarding copyright ownership.  Crate licenses this file\n+ * to you under the Apache License, Version 2.0 (the \"License\"); you may\n+ * not use this file except in compliance with the License.  You may\n+ * obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or\n+ * implied.  See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ *\n+ * However, if you have executed another commercial license agreement\n+ * with Crate these terms will supersede the license and you may use the\n+ * software solely pursuant to the terms of the relevant commercial\n+ * agreement.\n+ */\n+\n+package org.elasticsearch.repositories.blobstore;\n+\n+import org.elasticsearch.ElasticsearchException;\n+import org.elasticsearch.common.io.stream.StreamInput;\n+import org.elasticsearch.rest.RestStatus;\n+\n+import java.io.IOException;\n+\n+public class BlobStoreCredentialsException extends ElasticsearchException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ad02ff5f40bc853937b15eef6e9dcae5543838f9"}, "originalPosition": 31}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "666d328ace2f8321c65a9bc242871640aeb4d89c", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/666d328ace2f8321c65a9bc242871640aeb4d89c", "committedDate": "2020-06-16T10:18:25Z", "message": "Add InvalidArgumentException"}, "afterCommit": {"oid": "8ef2c8d2c9e95201171c07c6e6149b3da5bf4027", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/8ef2c8d2c9e95201171c07c6e6149b3da5bf4027", "committedDate": "2020-06-16T10:22:47Z", "message": "Add InvalidArgumentException"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxNTczMTM3", "url": "https://github.com/crate/crate/pull/10071#pullrequestreview-431573137", "createdAt": "2020-06-16T14:36:51Z", "commit": {"oid": "8ef2c8d2c9e95201171c07c6e6149b3da5bf4027"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxNTgzOTYz", "url": "https://github.com/crate/crate/pull/10071#pullrequestreview-431583963", "createdAt": "2020-06-16T14:47:30Z", "commit": {"oid": "8ef2c8d2c9e95201171c07c6e6149b3da5bf4027"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxNDo0NzozMVrOGke_aw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxNDo0NzozMVrOGke_aw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDkwOTY3NQ==", "bodyText": "Is there documentation we need to update to reflect this change?", "url": "https://github.com/crate/crate/pull/10071#discussion_r440909675", "createdAt": "2020-06-16T14:47:31Z", "author": {"login": "mfussenegger"}, "path": "plugins/es-repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3Repository.java", "diffHunk": "@@ -69,12 +69,10 @@\n \n     static final String TYPE = \"s3\";\n \n-    public static List<Setting<?>> mandatorySettings() {\n-        return List.of(ACCESS_KEY_SETTING, SECRET_KEY_SETTING);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8ef2c8d2c9e95201171c07c6e6149b3da5bf4027"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4dbdd7c7b0dd1d1a94675f07a92e7491535d12ea", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/4dbdd7c7b0dd1d1a94675f07a92e7491535d12ea", "committedDate": "2020-06-16T14:48:40Z", "message": "Re-enable IAM Roles for s3 repositories"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8ef2c8d2c9e95201171c07c6e6149b3da5bf4027", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/8ef2c8d2c9e95201171c07c6e6149b3da5bf4027", "committedDate": "2020-06-16T10:22:47Z", "message": "Add InvalidArgumentException"}, "afterCommit": {"oid": "4dbdd7c7b0dd1d1a94675f07a92e7491535d12ea", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/4dbdd7c7b0dd1d1a94675f07a92e7491535d12ea", "committedDate": "2020-06-16T14:48:40Z", "message": "Re-enable IAM Roles for s3 repositories"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4bb157cfe71ef04cafeef9c44d2d2baf866140a2", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/4bb157cfe71ef04cafeef9c44d2d2baf866140a2", "committedDate": "2020-06-16T15:16:38Z", "message": "Add documentation for iam roles"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxODY0NjMy", "url": "https://github.com/crate/crate/pull/10071#pullrequestreview-431864632", "createdAt": "2020-06-16T20:26:10Z", "commit": {"oid": "4bb157cfe71ef04cafeef9c44d2d2baf866140a2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3264, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}