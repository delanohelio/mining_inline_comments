{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg1MDY3MDYy", "number": 10524, "title": "Add more es testcases", "bodyText": "Summary of the changes / Why this improves CrateDB\nThis ports back some elasticsearch testcases, which worked out of the box. It is taken from the state of elasticsearch 704317da71c. See commits for details.\nChecklist\n\n Added an entry in CHANGES.txt for user facing changes\n Updated documentation & sql_features table for user facing changes\n Touched code is covered by tests\n CLA is signed\n This does not contain breaking changes, or if it does:\n\nIt is released within a major release\nIt is recorded in CHANGES.txt\nIt was marked as deprecated in an earlier release if possible\nYou've thought about the consequences and other components are adapted\n(E.g. AdminUI)", "createdAt": "2020-09-11T13:21:00Z", "url": "https://github.com/crate/crate/pull/10524", "merged": true, "mergeCommit": {"oid": "6563b93ef798b42c01c98a323c6ba953ce0da6bf"}, "closed": true, "closedAt": "2020-09-23T11:15:27Z", "author": {"login": "mkleen"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdH1eyTABqjM3NTYyNDcyMzE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdLqKvmgH2gAyNDg1MDY3MDYyOmVmOGE3NmE5ZWE2NDVhN2YyNTU0YmRmM2FiMDExZjM0OTU3MTk0NDY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d39de5183251791f5da707176ce430b7b07ac07f", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/d39de5183251791f5da707176ce430b7b07ac07f", "committedDate": "2020-09-11T13:17:06Z", "message": "bp: Update ESAllocationTestCase to current state\n\nThis updates ESAllocationTestCase to the state of elasticsearch commit\n704317da71c to enable backports of more allocation tests."}, "afterCommit": {"oid": "ab34dccae5e4160ed57c8f1f474ecdbc394eaada", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/ab34dccae5e4160ed57c8f1f474ecdbc394eaada", "committedDate": "2020-09-11T13:33:06Z", "message": "bp: Update ESAllocationTestCase to current state\n\nThis updates ESAllocationTestCase to the state of elasticsearch commit\n704317da71c to enable backports of more allocation tests."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ab34dccae5e4160ed57c8f1f474ecdbc394eaada", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/ab34dccae5e4160ed57c8f1f474ecdbc394eaada", "committedDate": "2020-09-11T13:33:06Z", "message": "bp: Update ESAllocationTestCase to current state\n\nThis updates ESAllocationTestCase to the state of elasticsearch commit\n704317da71c to enable backports of more allocation tests."}, "afterCommit": {"oid": "c49e904285e86bd5a13e8c945b0190628fe785cd", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/c49e904285e86bd5a13e8c945b0190628fe785cd", "committedDate": "2020-09-11T14:08:00Z", "message": "Add DeadNodesAllocationTests and AllocateUnassignedDecisionTests back"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c49e904285e86bd5a13e8c945b0190628fe785cd", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/c49e904285e86bd5a13e8c945b0190628fe785cd", "committedDate": "2020-09-11T14:08:00Z", "message": "Add DeadNodesAllocationTests and AllocateUnassignedDecisionTests back"}, "afterCommit": {"oid": "c854c0bb4f3fc818e06e4babbd0646f120d6cbea", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/c854c0bb4f3fc818e06e4babbd0646f120d6cbea", "committedDate": "2020-09-11T20:13:14Z", "message": "Add DeadNodesAllocationTests and AllocateUnassignedDecisionTests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c854c0bb4f3fc818e06e4babbd0646f120d6cbea", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/c854c0bb4f3fc818e06e4babbd0646f120d6cbea", "committedDate": "2020-09-11T20:13:14Z", "message": "Add DeadNodesAllocationTests and AllocateUnassignedDecisionTests"}, "afterCommit": {"oid": "9cdceef40a83f54e31307e3d914ab8139a4f46b7", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/9cdceef40a83f54e31307e3d914ab8139a4f46b7", "committedDate": "2020-09-11T20:18:13Z", "message": "Add DeadNodesAllocationTests and AllocateUnassignedDecisionTests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9cdceef40a83f54e31307e3d914ab8139a4f46b7", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/9cdceef40a83f54e31307e3d914ab8139a4f46b7", "committedDate": "2020-09-11T20:18:13Z", "message": "Add DeadNodesAllocationTests and AllocateUnassignedDecisionTests"}, "afterCommit": {"oid": "4f7f8c367a28c7481e3db785069d018e7481e817", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/4f7f8c367a28c7481e3db785069d018e7481e817", "committedDate": "2020-09-21T07:15:25Z", "message": "Add DeadNodesAllocationTests and AllocateUnassignedDecisionTests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "62fc2fa7245b4b638d00535c5b7c89553d24c581", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/62fc2fa7245b4b638d00535c5b7c89553d24c581", "committedDate": "2020-09-23T08:38:43Z", "message": "Add ShardRoutingTests back to es test suite"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "42efb02fd6e4cf76e7a17a3cd8dbf7b37e772e78", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/42efb02fd6e4cf76e7a17a3cd8dbf7b37e772e78", "committedDate": "2020-09-23T08:38:44Z", "message": "Add IndexShardRoutingTableTests back to es test suite"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4f7f8c367a28c7481e3db785069d018e7481e817", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/4f7f8c367a28c7481e3db785069d018e7481e817", "committedDate": "2020-09-21T07:15:25Z", "message": "Add DeadNodesAllocationTests and AllocateUnassignedDecisionTests"}, "afterCommit": {"oid": "1ea4b8925e9f4a98311a2ad9ddde48e82b665f77", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/1ea4b8925e9f4a98311a2ad9ddde48e82b665f77", "committedDate": "2020-09-23T08:38:44Z", "message": "Add DeadNodesAllocationTests and AllocateUnassignedDecisionTests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk0NDc4Mjk1", "url": "https://github.com/crate/crate/pull/10524#pullrequestreview-494478295", "createdAt": "2020-09-23T09:37:38Z", "commit": {"oid": "e7b96767f59a5534c454075ca1b798b0b3bbf1ed"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QwOTozNzozOFrOHWhQCQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QwOTozNzozOFrOHWhQCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzM3NTQ5Nw==", "bodyText": "why is this removed? it is not on the referred ES state https://github.com/elastic/elasticsearch/blame/704317da71c3de1b85679bc549bba3b4230acb5d/test/framework/src/main/java/org/elasticsearch/cluster/ESAllocationTestCase.java#L228\nSeems like this could result in wrong behaviour.", "url": "https://github.com/crate/crate/pull/10524#discussion_r493375497", "createdAt": "2020-09-23T09:37:38Z", "author": {"login": "seut"}, "path": "server/src/test/java/org/elasticsearch/cluster/ESAllocationTestCase.java", "diffHunk": "@@ -144,11 +217,6 @@ public Decision canAllocate(ShardRouting shardRouting, RoutingNode node, Routing\n         public Decision canAllocate(ShardRouting shardRouting, RoutingAllocation allocation) {\n             return decision;\n         }\n-\n-        @Override\n-        public Decision canAllocate(RoutingNode node, RoutingAllocation allocation) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e7b96767f59a5534c454075ca1b798b0b3bbf1ed"}, "originalPosition": 100}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7291529623b798db07098558d955ddd5a4dce802", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/7291529623b798db07098558d955ddd5a4dce802", "committedDate": "2020-09-23T10:06:48Z", "message": "Update ESAllocationTestCase to current state\n\nThis updates ESAllocationTestCase to the state of elasticsearch commit\n704317da71c to enable backports of more allocation tests."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "09f51af2e5115d2b902c142143572d0f3d2bbbe2", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/09f51af2e5115d2b902c142143572d0f3d2bbbe2", "committedDate": "2020-09-23T10:06:48Z", "message": "Add DeadNodesAllocationTests and AllocateUnassignedDecisionTests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1ea4b8925e9f4a98311a2ad9ddde48e82b665f77", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/1ea4b8925e9f4a98311a2ad9ddde48e82b665f77", "committedDate": "2020-09-23T08:38:44Z", "message": "Add DeadNodesAllocationTests and AllocateUnassignedDecisionTests"}, "afterCommit": {"oid": "09f51af2e5115d2b902c142143572d0f3d2bbbe2", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/09f51af2e5115d2b902c142143572d0f3d2bbbe2", "committedDate": "2020-09-23T10:06:48Z", "message": "Add DeadNodesAllocationTests and AllocateUnassignedDecisionTests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk0NTA5MzY2", "url": "https://github.com/crate/crate/pull/10524#pullrequestreview-494509366", "createdAt": "2020-09-23T10:17:27Z", "commit": {"oid": "09f51af2e5115d2b902c142143572d0f3d2bbbe2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef8a76a9ea645a7f2554bdf3ab011f3495719446", "author": {"user": {"login": "mergify[bot]", "name": null}}, "url": "https://github.com/crate/crate/commit/ef8a76a9ea645a7f2554bdf3ab011f3495719446", "committedDate": "2020-09-23T10:38:09Z", "message": "Merge branch 'master' into mkleen/bp_test_1"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3752, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}