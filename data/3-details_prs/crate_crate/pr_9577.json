{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY4MDU1NDc0", "number": 9577, "title": "Add ceiling alias for ceil scalar function", "bodyText": "Summary of the changes / Why this improves CrateDB\nceiling is listed as numeric function by PostgreSQL JDBC\ngetNumericFunctions implementation.\nChecklist\n\n User relevant changes are recorded in CHANGES.txt\n Touched code is covered by tests\n Documentation has been updated if necessary\n CLA is signed\n This does not contain breaking changes, or if it does:\n\nIt is released within a major release\nIt is recorded in CHANGES.txt\nIt was marked as deprecated in an earlier release if possible\nYou've thought about the consequences and other components are adapted\n(E.g. AdminUI)", "createdAt": "2020-01-28T14:49:22Z", "url": "https://github.com/crate/crate/pull/9577", "merged": true, "mergeCommit": {"oid": "548c30b2eedb6f2e5a4a00ff9c4e47ec82ce3570"}, "closed": true, "closedAt": "2020-01-28T19:28:15Z", "author": {"login": "mfussenegger"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb-y-c3AH2gAyMzY4MDU1NDc0Ojc2MjA1ZTU4OGY1ZjRlNzRhOTZjZTBlNTk5MGMwOTc0MGEwZTFhMDk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb-2DePAH2gAyMzY4MDU1NDc0OjM2OTg5OTA2M2Y5YzU1NmJmNDU2MmRiMDA2YzZkODY1ODgwMmJmMjg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "76205e588f5f4e74a96ce0e5990c09740a0e1a09", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/76205e588f5f4e74a96ce0e5990c09740a0e1a09", "committedDate": "2020-01-28T15:21:42Z", "message": "Add ceiling alias for ceil scalar function\n\n`ceiling` is listed as numeric function by PostgreSQL JDBC\n`getNumericFunctions` implementation."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0b4e42ac3622cb596a974c3d1dc537f4bc7513d1", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/0b4e42ac3622cb596a974c3d1dc537f4bc7513d1", "committedDate": "2020-01-28T14:39:10Z", "message": "Add ceiling alias for ceil scalar function\n\n`ceiling` is listed as numeric function by PostgreSQL JDBC\n`getNumericFunctions` implementation."}, "afterCommit": {"oid": "76205e588f5f4e74a96ce0e5990c09740a0e1a09", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/76205e588f5f4e74a96ce0e5990c09740a0e1a09", "committedDate": "2020-01-28T15:21:42Z", "message": "Add ceiling alias for ceil scalar function\n\n`ceiling` is listed as numeric function by PostgreSQL JDBC\n`getNumericFunctions` implementation."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5NTIyMTQz", "url": "https://github.com/crate/crate/pull/9577#pullrequestreview-349522143", "createdAt": "2020-01-28T16:33:06Z", "commit": {"oid": "76205e588f5f4e74a96ce0e5990c09740a0e1a09"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxNjozMzowNlrOFir78A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxNjozMzowNlrOFir78A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTkxNTc2MA==", "bodyText": "lgtm\nJust a minor note, maybe we can use BaseFunctionResolver to remove a bit of code like the getSignature method override and the first condition in the getForTypes method", "url": "https://github.com/crate/crate/pull/9577#discussion_r371915760", "createdAt": "2020-01-28T16:33:06Z", "author": {"login": "kovrus"}, "path": "sql/src/main/java/io/crate/expression/scalar/arithmetic/CeilFunction.java", "diffHunk": "@@ -35,29 +35,40 @@\n \n public final class CeilFunction {\n \n-    public static final String NAME = \"ceil\";\n+    public static final String CEIL = \"ceil\";\n+    public static final String CEILING = \"ceiling\";\n \n     public static void register(ScalarFunctionModule module) {\n-        module.register(NAME, new FunctionResolver() {\n-            @Nullable\n-            @Override\n-            public List<DataType> getSignature(List<? extends FuncArg> funcArgs) {\n-                return FuncParams.SINGLE_NUMERIC.match(funcArgs);\n-            }\n+        module.register(CEIL, new CeilFunctionResolver(CEIL));\n+        module.register(CEILING, new CeilFunctionResolver(CEILING));\n+    }\n+\n+    private static class CeilFunctionResolver implements FunctionResolver {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76205e588f5f4e74a96ce0e5990c09740a0e1a09"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "369899063f9c556bf4562db006c6d8658802bf28", "author": {"user": {"login": "mergify[bot]", "name": null}}, "url": "https://github.com/crate/crate/commit/369899063f9c556bf4562db006c6d8658802bf28", "committedDate": "2020-01-28T18:56:54Z", "message": "Merge branch 'master' into j/ceiling"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3954, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}