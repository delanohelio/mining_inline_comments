{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIxNjY4OTYz", "number": 10775, "title": "Added the ``delimiter`` option for copy fromm CSV files.", "bodyText": "Summary of the changes / Why this improves CrateDB\nThe option is used to specify the character that separates\ncolumns within a row.\nRelated to #7260\nChecklist\n\n Added an entry in CHANGES.txt for user facing changes\n Updated documentation & sql_features table for user facing changes\n Touched code is covered by tests\n CLA is signed\n This does not contain breaking changes, or if it does:\n\nIt is released within a major release\nIt is recorded in CHANGES.txt\nIt was marked as deprecated in an earlier release if possible\nYou've thought about the consequences and other components are adapted\n(E.g. AdminUI)", "createdAt": "2020-11-16T13:38:01Z", "url": "https://github.com/crate/crate/pull/10775", "merged": true, "mergeCommit": {"oid": "f1e9c7e33df6e04952f8a6e5856a0703bd06f551"}, "closed": true, "closedAt": "2020-11-17T15:19:16Z", "author": {"login": "kovrus"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABddFhV7gFqTUzMTM0OTk3OA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABddaslSABqjQwMDU4NDE4ODk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMxMzQ5OTc4", "url": "https://github.com/crate/crate/pull/10775#pullrequestreview-531349978", "createdAt": "2020-11-16T14:06:42Z", "commit": {"oid": "6d012c42bc639d3202f12c7adbfa48ef5ee2a3b9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQxNDowNjo0MlrOH0ANhQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQxNDowNjo0MlrOH0ANhQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDI5MTQ2MQ==", "bodyText": "Could we set the default value in the CSV_COLUMN_SEPARATOR definition?\nIt might also be possible to change the type of the setting to  Setting<Char>, then the whole logic could be encapsulated within the setting itself and here we'd use CSV_COLUMN_SEPARATOR.get(settings) to retrieve the final value.", "url": "https://github.com/crate/crate/pull/10775#discussion_r524291461", "createdAt": "2020-11-16T14:06:42Z", "author": {"login": "mfussenegger"}, "path": "server/src/main/java/io/crate/analyze/CopyFromParserProperties.java", "diffHunk": "@@ -39,29 +41,47 @@\n     public static final CopyFromParserProperties DEFAULT = CopyFromParserProperties.of(Settings.EMPTY);\n \n     private final boolean emptyStringAsNull;\n+    private final char columnSeparator;\n \n     public static CopyFromParserProperties of(Settings settings) {\n+        var csvColumnSeparatorAsString = settings.get(CSV_COLUMN_SEPARATOR.getKey());\n+        char csvColumnSeparator;\n+        if (csvColumnSeparatorAsString == null) {\n+            csvColumnSeparator = CsvSchema.DEFAULT_COLUMN_SEPARATOR;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6d012c42bc639d3202f12c7adbfa48ef5ee2a3b9"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMxMzU4NTgw", "url": "https://github.com/crate/crate/pull/10775#pullrequestreview-531358580", "createdAt": "2020-11-16T14:16:21Z", "commit": {"oid": "6d012c42bc639d3202f12c7adbfa48ef5ee2a3b9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQxNDoxNjoyMVrOH0AnoQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQxNDoxNjoyMVrOH0AnoQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDI5ODE0NQ==", "bodyText": "this might be better phrased like so:\n\nSpecifies a single one-byte character that separates columns within each line of the file. The default delimiter is ,.", "url": "https://github.com/crate/crate/pull/10775#discussion_r524298145", "createdAt": "2020-11-16T14:16:21Z", "author": {"login": "norosa"}, "path": "docs/sql/statements/copy-from.rst", "diffHunk": "@@ -334,6 +334,16 @@ execution.\n The option is only supported when using the ``CSV`` format,\n otherwise, it will be ignored.\n \n+``delimiter``\n+'''''''''''''\n+\n+Specifies the character that separates columns within each line of the file.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6d012c42bc639d3202f12c7adbfa48ef5ee2a3b9"}, "originalPosition": 7}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6d012c42bc639d3202f12c7adbfa48ef5ee2a3b9", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/6d012c42bc639d3202f12c7adbfa48ef5ee2a3b9", "committedDate": "2020-11-16T13:37:17Z", "message": "Added the ``delimiter`` option for copy fromm CSV files.\n\nThe option is used to specify the character that separates\ncolumns within a row."}, "afterCommit": {"oid": "a06bc4f9410f146c2f8866d3bf51f584e62a7f6a", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/a06bc4f9410f146c2f8866d3bf51f584e62a7f6a", "committedDate": "2020-11-16T15:32:06Z", "message": "Added the ``delimiter`` option for copy from CSV files.\n\nThe option is used to specify the character that separates\ncolumns within a row."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMyMTgzMTUx", "url": "https://github.com/crate/crate/pull/10775#pullrequestreview-532183151", "createdAt": "2020-11-17T09:42:14Z", "commit": {"oid": "b730992017af75bbe8c93ddafac669034d7b7281"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b730992017af75bbe8c93ddafac669034d7b7281", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/b730992017af75bbe8c93ddafac669034d7b7281", "committedDate": "2020-11-17T09:14:26Z", "message": "fixup! Added the ``delimiter`` option for copy from CSV files."}, "afterCommit": {"oid": "e03dd21f1f715d26df2131da9194181c28025a31", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/e03dd21f1f715d26df2131da9194181c28025a31", "committedDate": "2020-11-17T09:42:56Z", "message": "Added the ``delimiter`` option for copy from CSV files.\n\nThe option is used to specify the character that separates\ncolumns within a row."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "003104325e1c921320a95df82a02e2966b350c98", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/003104325e1c921320a95df82a02e2966b350c98", "committedDate": "2020-11-17T14:47:02Z", "message": "Added the ``delimiter`` option for copy from CSV files.\n\nThe option is used to specify the character that separates\ncolumns within a row."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e03dd21f1f715d26df2131da9194181c28025a31", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/e03dd21f1f715d26df2131da9194181c28025a31", "committedDate": "2020-11-17T09:42:56Z", "message": "Added the ``delimiter`` option for copy from CSV files.\n\nThe option is used to specify the character that separates\ncolumns within a row."}, "afterCommit": {"oid": "003104325e1c921320a95df82a02e2966b350c98", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/003104325e1c921320a95df82a02e2966b350c98", "committedDate": "2020-11-17T14:47:02Z", "message": "Added the ``delimiter`` option for copy from CSV files.\n\nThe option is used to specify the character that separates\ncolumns within a row."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3638, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}