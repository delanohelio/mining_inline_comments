{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEyOTU3MDE5", "number": 9919, "title": "Use the new func registry for the record subsript function.", "bodyText": "Summary of the changes / Why this improves CrateDB\nChecklist\n\n Added an entry in CHANGES.txt for user facing changes\n Updated documentation & sql_features table for user facing changes\n Touched code is covered by tests\n CLA is signed\n This does not contain breaking changes, or if it does:\n\nIt is released within a major release\nIt is recorded in CHANGES.txt\nIt was marked as deprecated in an earlier release if possible\nYou've thought about the consequences and other components are adapted\n(E.g. AdminUI)", "createdAt": "2020-05-04T13:37:20Z", "url": "https://github.com/crate/crate/pull/9919", "merged": true, "mergeCommit": {"oid": "a87d031c955aeb482abaa04f02ed328248ed756a"}, "closed": true, "closedAt": "2020-05-05T08:08:14Z", "author": {"login": "kovrus"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcd_lUYAH2gAyNDEyOTU3MDE5OjI0NTY2NTU0Y2U0OTM0ZWU2ZjBiNDQ3ODUyOTU1NWZkMzExMTMzOWY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABceBD9BAFqTQwNTA4NzY5OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "24566554ce4934ee6f0b4478529555fd3111339f", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/24566554ce4934ee6f0b4478529555fd3111339f", "committedDate": "2020-05-04T13:34:40Z", "message": "Use the new func registry for the record subsript function."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1MDIwNTQ1", "url": "https://github.com/crate/crate/pull/9919#pullrequestreview-405020545", "createdAt": "2020-05-04T14:06:49Z", "commit": {"oid": "24566554ce4934ee6f0b4478529555fd3111339f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxNDowNjo0OVrOGQB_Uw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxNDowNjo0OVrOGQB_Uw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTQ2Mjk5NQ==", "bodyText": "We do not support the type signature parsing for record(e v [, e v, ...] ). It seems that we also do not need it for this case, see the previous behaviour https://github.com/crate/crate/pull/9919/files#diff-043c3fea4ce68fa7312a4150d7fb1ab4L54. I am not sure whether it is fine or we must tackle this support now.", "url": "https://github.com/crate/crate/pull/9919#discussion_r419462995", "createdAt": "2020-05-04T14:06:49Z", "author": {"login": "kovrus"}, "path": "sql/src/main/java/io/crate/expression/scalar/SubscriptRecordFunction.java", "diffHunk": "@@ -21,60 +21,44 @@\n \n package io.crate.expression.scalar;\n \n-import java.util.List;\n-\n import io.crate.data.Input;\n import io.crate.data.Row;\n-import io.crate.expression.symbol.FuncArg;\n import io.crate.metadata.FunctionIdent;\n-import io.crate.metadata.FunctionImplementation;\n import io.crate.metadata.FunctionInfo;\n-import io.crate.metadata.FunctionResolver;\n import io.crate.metadata.Scalar;\n import io.crate.metadata.TransactionContext;\n-import io.crate.types.DataType;\n+import io.crate.metadata.functions.Signature;\n import io.crate.types.DataTypes;\n import io.crate.types.RowType;\n \n+import javax.annotation.Nullable;\n+import java.util.List;\n+\n public final class SubscriptRecordFunction extends Scalar<Object, Object> {\n \n     public static final String NAME = \"_subscript_record\";\n+    public static final Signature SIGNATURE = Signature.scalar(\n+        NAME,\n+        RowType.EMPTY.getTypeSignature(),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "24566554ce4934ee6f0b4478529555fd3111339f"}, "originalPosition": 28}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1MDg3Njk4", "url": "https://github.com/crate/crate/pull/9919#pullrequestreview-405087698", "createdAt": "2020-05-04T15:18:02Z", "commit": {"oid": "24566554ce4934ee6f0b4478529555fd3111339f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3333, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}