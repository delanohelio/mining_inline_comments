{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMwOTk4MTkw", "number": 10057, "title": "Remove guava some guava multi and immutable maps.", "bodyText": "Summary of the changes / Why this improves CrateDB\nChecklist\n\n Added an entry in CHANGES.txt for user facing changes\n Updated documentation & sql_features table for user facing changes\n Touched code is covered by tests\n CLA is signed\n This does not contain breaking changes, or if it does:\n\nIt is released within a major release\nIt is recorded in CHANGES.txt\nIt was marked as deprecated in an earlier release if possible\nYou've thought about the consequences and other components are adapted\n(E.g. AdminUI)", "createdAt": "2020-06-08T09:35:55Z", "url": "https://github.com/crate/crate/pull/10057", "merged": true, "mergeCommit": {"oid": "374bf0b2ecaf1c6ade34523c488a3f47cd211f74"}, "closed": true, "closedAt": "2020-07-28T09:07:30Z", "author": {"login": "kovrus"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc5BHoEABqjM1ODk2NDg1OTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc5SOaeABqjM1OTMyNTczNTQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "775600c4c48f35b04eb3cb706210fbf428ef9724", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/775600c4c48f35b04eb3cb706210fbf428ef9724", "committedDate": "2020-06-08T09:35:28Z", "message": "Remove guava some guava multi and immutable maps."}, "afterCommit": {"oid": "748f06be47b7c1622cbb4dd166a14035fe06f2c4", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/748f06be47b7c1622cbb4dd166a14035fe06f2c4", "committedDate": "2020-07-27T12:36:32Z", "message": "Remove guava some guava multi and immutable maps."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "748f06be47b7c1622cbb4dd166a14035fe06f2c4", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/748f06be47b7c1622cbb4dd166a14035fe06f2c4", "committedDate": "2020-07-27T12:36:32Z", "message": "Remove guava some guava multi and immutable maps."}, "afterCommit": {"oid": "00312edd13bbeffb74c170437fc320422b43909f", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/00312edd13bbeffb74c170437fc320422b43909f", "committedDate": "2020-07-27T14:51:00Z", "message": "Remove guava some guava multi and immutable maps."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "00312edd13bbeffb74c170437fc320422b43909f", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/00312edd13bbeffb74c170437fc320422b43909f", "committedDate": "2020-07-27T14:51:00Z", "message": "Remove guava some guava multi and immutable maps."}, "afterCommit": {"oid": "0bd9a6833e02e86b439c724cab0f393d82700548", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/0bd9a6833e02e86b439c724cab0f393d82700548", "committedDate": "2020-07-27T15:34:15Z", "message": "Remove guava some guava multi and immutable maps."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0bd9a6833e02e86b439c724cab0f393d82700548", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/0bd9a6833e02e86b439c724cab0f393d82700548", "committedDate": "2020-07-27T15:34:15Z", "message": "Remove guava some guava multi and immutable maps."}, "afterCommit": {"oid": "46238d9373d11277d4ea6c2be100dfae468dbe5c", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/46238d9373d11277d4ea6c2be100dfae468dbe5c", "committedDate": "2020-07-27T15:47:15Z", "message": "Remove guava some guava multi and immutable maps."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "46238d9373d11277d4ea6c2be100dfae468dbe5c", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/46238d9373d11277d4ea6c2be100dfae468dbe5c", "committedDate": "2020-07-27T15:47:15Z", "message": "Remove guava some guava multi and immutable maps."}, "afterCommit": {"oid": "c0dd2982502f6b681b038292d582506f40d4f98f", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/c0dd2982502f6b681b038292d582506f40d4f98f", "committedDate": "2020-07-27T21:10:36Z", "message": "Remove guava some guava multi and immutable maps."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2Mzc2MjY4", "url": "https://github.com/crate/crate/pull/10057#pullrequestreview-456376268", "createdAt": "2020-07-28T07:37:44Z", "commit": {"oid": "c0dd2982502f6b681b038292d582506f40d4f98f"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwNzozNzo0NFrOG4AXcA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwNzozOToxMVrOG4AaaA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTM3OTQ0MA==", "bodyText": "This always creates the new ArrayList even if it's not required.", "url": "https://github.com/crate/crate/pull/10057#discussion_r461379440", "createdAt": "2020-07-28T07:37:44Z", "author": {"login": "mfussenegger"}, "path": "server/src/main/java/io/crate/analyze/GeneratedColumnExpander.java", "diffHunk": "@@ -152,7 +149,8 @@ public Symbol visitFunction(Function function, Context context) {\n \n \n         private Symbol addComparison(Function function, Reference reference, Symbol comparedAgainst, Context context) {\n-            Collection<GeneratedReference> genColInfos = context.referencedRefsToGeneratedColumn.get(reference);\n+            ArrayList<GeneratedReference> genColInfos = context.referencedRefsToGeneratedColumn\n+                .getOrDefault(reference, new ArrayList<>());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c0dd2982502f6b681b038292d582506f40d4f98f"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTM4MDIwMA==", "bodyText": "I think we could extend the MapBuilder with a putAll and keep this as it was before.", "url": "https://github.com/crate/crate/pull/10057#discussion_r461380200", "createdAt": "2020-07-28T07:39:11Z", "author": {"login": "mfussenegger"}, "path": "server/src/main/java/io/crate/metadata/doc/DocIndexMetadata.java", "diffHunk": "@@ -692,21 +692,26 @@ public Settings tableParameters() {\n                 || (columnDataType.id() == ArrayType.ID\n                     && ((ArrayType) columnDataType).innerType().id() == ObjectType.ID)) {\n                 if (columnProperties.get(\"properties\") != null) {\n-                    builder.putAll(getAnalyzers(newIdent, (Map<String, Object>) columnProperties.get(\"properties\")));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c0dd2982502f6b681b038292d582506f40d4f98f"}, "originalPosition": 87}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2NDE2MDQ2", "url": "https://github.com/crate/crate/pull/10057#pullrequestreview-456416046", "createdAt": "2020-07-28T08:31:42Z", "commit": {"oid": "7ce2573c41a5d5bd1b291ead9918eb2476fb38e1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "98b2f6d6877e15949405a8126cf861d98d027563", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/98b2f6d6877e15949405a8126cf861d98d027563", "committedDate": "2020-07-28T08:33:38Z", "message": "Remove guava some guava multi and immutable maps."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7ce2573c41a5d5bd1b291ead9918eb2476fb38e1", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/7ce2573c41a5d5bd1b291ead9918eb2476fb38e1", "committedDate": "2020-07-28T08:11:49Z", "message": "fixup! Remove guava some guava multi and immutable maps."}, "afterCommit": {"oid": "98b2f6d6877e15949405a8126cf861d98d027563", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/98b2f6d6877e15949405a8126cf861d98d027563", "committedDate": "2020-07-28T08:33:38Z", "message": "Remove guava some guava multi and immutable maps."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3244, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}