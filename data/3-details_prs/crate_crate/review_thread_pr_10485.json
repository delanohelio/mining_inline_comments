{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc4NDM2OTk5", "number": 10485, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxMDowNTozMVrOEf64aw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxMDowNTozNlrOEf64gQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAxOTA2MDI3OnYy", "diffSide": "RIGHT", "path": "server/src/main/java/io/crate/analyze/expressions/ExpressionAnalyzer.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxMDowNTozMVrOHMfnHw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxMDo0ODowNVrOHMg95w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mjg2Mjg3OQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                private static String maybeQuotedSubscript(String columnName) {\n          \n          \n            \n                private static String maybeQuoteSubscript(String columnName) {", "url": "https://github.com/crate/crate/pull/10485#discussion_r482862879", "createdAt": "2020-09-03T10:05:31Z", "author": {"login": "kovrus"}, "path": "server/src/main/java/io/crate/analyze/expressions/ExpressionAnalyzer.java", "diffHunk": "@@ -1202,6 +1175,16 @@ private static void ensureResultTypesMatch(Collection<? extends Symbol> results)\n         }\n     }\n \n+    @Nullable\n+    private static String maybeQuotedSubscript(String columnName) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa4e728a8a8b243fa34b3cd5e87f69f53b66c67d"}, "originalPosition": 165}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mjg3MDI3Mw==", "bodyText": "The function will detect a quoted subscript and re-add quoting around the column identifier. So it is not maybe quoting.\nThe existing name is also confusing and not really correct, new suggestion: detectAndSanitizeQuotedSubscript\nWDYT?", "url": "https://github.com/crate/crate/pull/10485#discussion_r482870273", "createdAt": "2020-09-03T10:19:07Z", "author": {"login": "seut"}, "path": "server/src/main/java/io/crate/analyze/expressions/ExpressionAnalyzer.java", "diffHunk": "@@ -1202,6 +1175,16 @@ private static void ensureResultTypesMatch(Collection<? extends Symbol> results)\n         }\n     }\n \n+    @Nullable\n+    private static String maybeQuotedSubscript(String columnName) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mjg2Mjg3OQ=="}, "originalCommit": {"oid": "fa4e728a8a8b243fa34b3cd5e87f69f53b66c67d"}, "originalPosition": 165}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mjg4NTA5NQ==", "bodyText": "detectAndSanitizeQuotedSubscript sounds better, maybeQuotedSubscript was a bit confusing", "url": "https://github.com/crate/crate/pull/10485#discussion_r482885095", "createdAt": "2020-09-03T10:48:05Z", "author": {"login": "kovrus"}, "path": "server/src/main/java/io/crate/analyze/expressions/ExpressionAnalyzer.java", "diffHunk": "@@ -1202,6 +1175,16 @@ private static void ensureResultTypesMatch(Collection<? extends Symbol> results)\n         }\n     }\n \n+    @Nullable\n+    private static String maybeQuotedSubscript(String columnName) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mjg2Mjg3OQ=="}, "originalCommit": {"oid": "fa4e728a8a8b243fa34b3cd5e87f69f53b66c67d"}, "originalPosition": 165}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAxOTA2MDQ5OnYy", "diffSide": "RIGHT", "path": "server/src/main/java/io/crate/analyze/expressions/ExpressionAnalyzer.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxMDowNTozNlrOHMfnQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxMDowNTozNlrOHMfnQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mjg2MjkxNQ==", "bodyText": "maybe?\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            var columnName = nameParts.get(nameParts.size() - 1);\n          \n          \n            \n                            var columnName = qualifiedName.getSuffix();", "url": "https://github.com/crate/crate/pull/10485#discussion_r482862915", "createdAt": "2020-09-03T10:05:36Z", "author": {"login": "kovrus"}, "path": "server/src/main/java/io/crate/analyze/expressions/ExpressionAnalyzer.java", "diffHunk": "@@ -676,6 +642,15 @@ protected Symbol visitSubscriptExpression(SubscriptExpression node, ExpressionAn\n                 Symbol index = node.index().accept(this, context);\n                 return allocateFunction(SubscriptFunction.NAME, List.of(base, index), context);\n             } else {\n+                // Detect and process partial quoted subscript expression\n+                var nameParts = qualifiedName.getParts();\n+                var columnName = nameParts.get(nameParts.size() - 1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa4e728a8a8b243fa34b3cd5e87f69f53b66c67d"}, "originalPosition": 118}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1207, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}