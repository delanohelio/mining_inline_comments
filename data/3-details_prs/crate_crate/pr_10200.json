{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ3NDExMTgw", "number": 10200, "title": "Improve error messages on repository creation", "bodyText": "Summary of the changes / Why this improves CrateDB\nThis changes  the error message for failed repository creation, adding additional information of the underlying failure to make it\neasier to understand the root cause from the client side. Error codes for the client remain the same.\nBefore:\ncr> create repository test123 type s3 with (bucket='bucket', endpoint='https://s3.region.amazonaws.com', protocol='https', access_key='access\n    ',secret_key='secret' ,base_path='test123');\nRepositoryException[[] [test123] path [test123] is not accessible on master node]\n\nNow:\ncr> create repository test123 type s3 with (bucket='bucket', endpoint='https://s3.region.amazonaws.com', protocol='https', access_key='access\n    ',secret_key='secret' ,base_path='test123');\nRepositoryException[[] [test123] Unable verify repository, [test123] is not accessible on master node: Unable to execute HTTP request: bucket.s3.region.amazonaws.com]\n\nOr:\ncr> create repository r1 type azure with (container = 'invalid', account = 'devstoreaccount1', key = 'ZGV2c3RvcmVhY2NvdW50MQ==', endpoint_suff\n    ix = 'ignored;DefaultEndpointsProtocol=http;BlobEndpoint');\nRepositoryException[[] [r1] Unable verify repository, [r1] is not accessible on master node: Invalid connection string.]\n\nChecklist\n\n Added an entry in CHANGES.txt for user facing changes\n Updated documentation & sql_features table for user facing changes\n Touched code is covered by tests\n CLA is signed\n This does not contain breaking changes, or if it does:\n\nIt is released within a major release\nIt is recorded in CHANGES.txt\nIt was marked as deprecated in an earlier release if possible\nYou've thought about the consequences and other components are adapted\n(E.g. AdminUI)", "createdAt": "2020-07-10T12:27:27Z", "url": "https://github.com/crate/crate/pull/10200", "merged": true, "mergeCommit": {"oid": "bef9f47bc8c244b4ef11f2ef876b7ba266228448"}, "closed": true, "closedAt": "2020-09-07T21:14:29Z", "author": {"login": "mkleen"}, "timelineItems": {"totalCount": 26, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABczjKYPABqjM1MzM3NjkxMTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdGpHXYABqjM3MzgzMzkyODU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a53225b4ee446a95ce4b6c3fc42463cc60377b5b", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/a53225b4ee446a95ce4b6c3fc42463cc60377b5b", "committedDate": "2020-07-10T12:25:53Z", "message": "Add logging when repository verification fails"}, "afterCommit": {"oid": "68ec61a334cd82450283efdb1cdb1c0b1fdc111f", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/68ec61a334cd82450283efdb1cdb1c0b1fdc111f", "committedDate": "2020-07-10T12:54:00Z", "message": "Add logging when repository verification fails"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d3e1dbc08323f15a62a4b330c0a526c1867f7ce8", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/d3e1dbc08323f15a62a4b330c0a526c1867f7ce8", "committedDate": "2020-07-10T15:04:44Z", "message": "Improve error handling"}, "afterCommit": {"oid": "c782e285dcd2ad8580ad89522b4a5f2f4fce695f", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/c782e285dcd2ad8580ad89522b4a5f2f4fce695f", "committedDate": "2020-09-03T13:43:22Z", "message": "Improve error message on repository creation failures"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c782e285dcd2ad8580ad89522b4a5f2f4fce695f", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/c782e285dcd2ad8580ad89522b4a5f2f4fce695f", "committedDate": "2020-09-03T13:43:22Z", "message": "Improve error message on repository creation failures"}, "afterCommit": {"oid": "80a42905e690841b6f0b29102d3477320e85af54", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/80a42905e690841b6f0b29102d3477320e85af54", "committedDate": "2020-09-03T13:48:48Z", "message": "Improve error message on repository creation failures"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "80a42905e690841b6f0b29102d3477320e85af54", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/80a42905e690841b6f0b29102d3477320e85af54", "committedDate": "2020-09-03T13:48:48Z", "message": "Improve error message on repository creation failures"}, "afterCommit": {"oid": "803861be1844fba19c6271acb28e2598aba5cc7d", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/803861be1844fba19c6271acb28e2598aba5cc7d", "committedDate": "2020-09-03T13:49:41Z", "message": "Improve error message on repository creation failures"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "803861be1844fba19c6271acb28e2598aba5cc7d", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/803861be1844fba19c6271acb28e2598aba5cc7d", "committedDate": "2020-09-03T13:49:41Z", "message": "Improve error message on repository creation failures"}, "afterCommit": {"oid": "006d5a222811059441f189510a88c00e25984753", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/006d5a222811059441f189510a88c00e25984753", "committedDate": "2020-09-03T13:53:56Z", "message": "Improve error message on repository creation failures"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "52cc0c53f17078d54a54e373ba676635dd63037c", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/52cc0c53f17078d54a54e373ba676635dd63037c", "committedDate": "2020-09-04T10:12:03Z", "message": "wip"}, "afterCommit": {"oid": "c18325843dc06e9ed3d749481a45ec39cbee0376", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/c18325843dc06e9ed3d749481a45ec39cbee0376", "committedDate": "2020-09-04T10:21:17Z", "message": "Improve error message on repository creation failures"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c18325843dc06e9ed3d749481a45ec39cbee0376", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/c18325843dc06e9ed3d749481a45ec39cbee0376", "committedDate": "2020-09-04T10:21:17Z", "message": "Improve error message on repository creation failures"}, "afterCommit": {"oid": "c03390c1fcd918308e4b3e63ffe79cd1c1a4192d", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/c03390c1fcd918308e4b3e63ffe79cd1c1a4192d", "committedDate": "2020-09-04T10:28:02Z", "message": "Improve error message on repository creation failures\n\nThis changes  the error message for failed repository creation,\nadding additional information of the underlying failure to make it\neasier to understand the root cause from the client side."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c03390c1fcd918308e4b3e63ffe79cd1c1a4192d", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/c03390c1fcd918308e4b3e63ffe79cd1c1a4192d", "committedDate": "2020-09-04T10:28:02Z", "message": "Improve error message on repository creation failures\n\nThis changes  the error message for failed repository creation,\nadding additional information of the underlying failure to make it\neasier to understand the root cause from the client side."}, "afterCommit": {"oid": "cb7b93309d6099c168f19e2a63b41922380dca69", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/cb7b93309d6099c168f19e2a63b41922380dca69", "committedDate": "2020-09-04T12:11:39Z", "message": "Improve error message on repository creation failures\n\nThis changes  the error message for failed repository creation,\nadding additional information of the underlying failure to make it\neasier to understand the root cause from the client side."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyNTk3OTQ2", "url": "https://github.com/crate/crate/pull/10200#pullrequestreview-482597946", "createdAt": "2020-09-04T12:09:43Z", "commit": {"oid": "c03390c1fcd918308e4b3e63ffe79cd1c1a4192d"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQxMjowOTo0M1rOHNLGbA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQxMjoxNToxN1rOHNLQnQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzU3NTQwNA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                                                  \"Unable verify repository, [\" + metadata.name() + \"]\" +\n          \n          \n            \n                                                                  \"Unable to verify the repository, [\" + metadata.name() + \"]\" +", "url": "https://github.com/crate/crate/pull/10200#discussion_r483575404", "createdAt": "2020-09-04T12:09:43Z", "author": {"login": "seut"}, "path": "server/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java", "diffHunk": "@@ -790,8 +790,11 @@ public String startVerification() {\n                 }\n                 return seed;\n             }\n-        } catch (IOException exp) {\n-            throw new RepositoryVerificationException(metadata.name(), \"path \" + basePath() + \" is not accessible on master node\", exp);\n+        } catch (Exception exp) {\n+            throw new RepositoryVerificationException(metadata.name(),\n+                                                      \"Unable verify repository, [\" + metadata.name() + \"]\" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c03390c1fcd918308e4b3e63ffe79cd1c1a4192d"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzU3NjM1Mw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                                                  \" is not accessible on master node\",\n          \n          \n            \n                                                                  \" is not accessible on the master node\",", "url": "https://github.com/crate/crate/pull/10200#discussion_r483576353", "createdAt": "2020-09-04T12:11:39Z", "author": {"login": "seut"}, "path": "server/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java", "diffHunk": "@@ -790,8 +790,11 @@ public String startVerification() {\n                 }\n                 return seed;\n             }\n-        } catch (IOException exp) {\n-            throw new RepositoryVerificationException(metadata.name(), \"path \" + basePath() + \" is not accessible on master node\", exp);\n+        } catch (Exception exp) {\n+            throw new RepositoryVerificationException(metadata.name(),\n+                                                      \"Unable verify repository, [\" + metadata.name() + \"]\" +\n+                                                      \" is not accessible on master node\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c03390c1fcd918308e4b3e63ffe79cd1c1a4192d"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzU3ODAxMw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            - Changed the error message for failed repository creation, adding additional\n          \n          \n            \n              information of the underlying failure to make it easier to understand the\n          \n          \n            \n              root cause from the client side.\n          \n          \n            \n            - Added detailed information to possible errors on ``repository`` creation to\n          \n          \n            \n              give better insights in the root cause of the error.", "url": "https://github.com/crate/crate/pull/10200#discussion_r483578013", "createdAt": "2020-09-04T12:15:17Z", "author": {"login": "seut"}, "path": "docs/appendices/release-notes/unreleased.rst", "diffHunk": "@@ -56,6 +56,10 @@ Breaking Changes\n Changes\n =======\n \n+- Changed the error message for failed repository creation, adding additional\n+  information of the underlying failure to make it easier to understand the\n+  root cause from the client side.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cb7b93309d6099c168f19e2a63b41922380dca69"}, "originalPosition": 6}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cb7b93309d6099c168f19e2a63b41922380dca69", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/cb7b93309d6099c168f19e2a63b41922380dca69", "committedDate": "2020-09-04T12:11:39Z", "message": "Improve error message on repository creation failures\n\nThis changes  the error message for failed repository creation,\nadding additional information of the underlying failure to make it\neasier to understand the root cause from the client side."}, "afterCommit": {"oid": "5956eea718f10ed47a3729d32d1a2a9b995810fa", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/5956eea718f10ed47a3729d32d1a2a9b995810fa", "committedDate": "2020-09-04T12:38:14Z", "message": "Update changes and exception message"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyNjIwNjcz", "url": "https://github.com/crate/crate/pull/10200#pullrequestreview-482620673", "createdAt": "2020-09-04T12:45:23Z", "commit": {"oid": "5956eea718f10ed47a3729d32d1a2a9b995810fa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQxMjo0NToyNFrOHNMIDQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQxMjo0NToyNFrOHNMIDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzU5MjIwNQ==", "bodyText": "sorry my fault, I think it should be:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              give better insights in the root cause of the error.\n          \n          \n            \n              give better insights on the root cause of the error.", "url": "https://github.com/crate/crate/pull/10200#discussion_r483592205", "createdAt": "2020-09-04T12:45:24Z", "author": {"login": "seut"}, "path": "docs/appendices/release-notes/unreleased.rst", "diffHunk": "@@ -56,6 +56,9 @@ Breaking Changes\n Changes\n =======\n \n+- Added detailed information to possible errors on ``repository`` creation to\n+  give better insights in the root cause of the error.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5956eea718f10ed47a3729d32d1a2a9b995810fa"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5956eea718f10ed47a3729d32d1a2a9b995810fa", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/5956eea718f10ed47a3729d32d1a2a9b995810fa", "committedDate": "2020-09-04T12:38:14Z", "message": "Update changes and exception message"}, "afterCommit": {"oid": "77d3a7ea2f111cc81e9d702f4f988424296e5e5a", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/77d3a7ea2f111cc81e9d702f4f988424296e5e5a", "committedDate": "2020-09-07T13:37:27Z", "message": "Fix changes information"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "77d3a7ea2f111cc81e9d702f4f988424296e5e5a", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/77d3a7ea2f111cc81e9d702f4f988424296e5e5a", "committedDate": "2020-09-07T13:37:27Z", "message": "Fix changes information"}, "afterCommit": {"oid": "fe216f2674556b8f7cc1d6b3f57011c917f1d32e", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/fe216f2674556b8f7cc1d6b3f57011c917f1d32e", "committedDate": "2020-09-07T14:02:10Z", "message": "Fix changes information"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fe216f2674556b8f7cc1d6b3f57011c917f1d32e", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/fe216f2674556b8f7cc1d6b3f57011c917f1d32e", "committedDate": "2020-09-07T14:02:10Z", "message": "Fix changes information"}, "afterCommit": {"oid": "c53872eaf7186b9ba22054e9cfd63a06fc022953", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/c53872eaf7186b9ba22054e9cfd63a06fc022953", "committedDate": "2020-09-07T14:08:18Z", "message": "Fix changes information"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c53872eaf7186b9ba22054e9cfd63a06fc022953", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/c53872eaf7186b9ba22054e9cfd63a06fc022953", "committedDate": "2020-09-07T14:08:18Z", "message": "Fix changes information"}, "afterCommit": {"oid": "d5eb50d2bb4cf9c6a59db899b1c28155962e1d81", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/d5eb50d2bb4cf9c6a59db899b1c28155962e1d81", "committedDate": "2020-09-07T14:13:57Z", "message": "Fix changes information"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d5eb50d2bb4cf9c6a59db899b1c28155962e1d81", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/d5eb50d2bb4cf9c6a59db899b1c28155962e1d81", "committedDate": "2020-09-07T14:13:57Z", "message": "Fix changes information"}, "afterCommit": {"oid": "3688d7c1524c7700fe40774a45c60de2438f4fd4", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/3688d7c1524c7700fe40774a45c60de2438f4fd4", "committedDate": "2020-09-07T14:35:27Z", "message": "Fix changes information"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3688d7c1524c7700fe40774a45c60de2438f4fd4", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/3688d7c1524c7700fe40774a45c60de2438f4fd4", "committedDate": "2020-09-07T14:35:27Z", "message": "Fix changes information"}, "afterCommit": {"oid": "2cf862ab3870abaed9fcca9bf7d28668b858553b", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/2cf862ab3870abaed9fcca9bf7d28668b858553b", "committedDate": "2020-09-07T14:37:51Z", "message": "Fix changes information"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2cf862ab3870abaed9fcca9bf7d28668b858553b", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/2cf862ab3870abaed9fcca9bf7d28668b858553b", "committedDate": "2020-09-07T14:37:51Z", "message": "Fix changes information"}, "afterCommit": {"oid": "5c743e3410c2e9990a7fa8745e4c391561e55c6c", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/5c743e3410c2e9990a7fa8745e4c391561e55c6c", "committedDate": "2020-09-07T14:40:03Z", "message": "Fix changes information"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzNjEyMTMz", "url": "https://github.com/crate/crate/pull/10200#pullrequestreview-483612133", "createdAt": "2020-09-07T14:52:42Z", "commit": {"oid": "5c743e3410c2e9990a7fa8745e4c391561e55c6c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxNDo1Mjo0M1rOHOCKJg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxNDo1Mjo0M1rOHOCKJg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDQ3NzQ3OA==", "bodyText": "This seems strange on the first view. The problem with propagating the underlying exception and handling the message creation later is, that the root cause might end up in a NotSerializableExceptionWrapper if it is not serializable across nodes and then the error message will differ whenever it was wrapped or not. This can cause flakiness depending on the cluster setup of the test. Now the error message is created before the exception is further propagated. If you have a better idea how to handle that let me know.", "url": "https://github.com/crate/crate/pull/10200#discussion_r484477478", "createdAt": "2020-09-07T14:52:43Z", "author": {"login": "mkleen"}, "path": "server/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java", "diffHunk": "@@ -790,8 +791,10 @@ public String startVerification() {\n                 }\n                 return seed;\n             }\n-        } catch (IOException exp) {\n-            throw new RepositoryVerificationException(metadata.name(), \"path \" + basePath() + \" is not accessible on master node\", exp);\n+        } catch (Exception e) {\n+            throw new RepositoryVerificationException(metadata.name(),\n+                        String.format(Locale.ENGLISH, \"Unable to verify the repository, [%s] is not accessible on master node: %s '%s'\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c743e3410c2e9990a7fa8745e4c391561e55c6c"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzNjE4MjU4", "url": "https://github.com/crate/crate/pull/10200#pullrequestreview-483618258", "createdAt": "2020-09-07T15:02:47Z", "commit": {"oid": "5c743e3410c2e9990a7fa8745e4c391561e55c6c"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxNTowMjo0N1rOHOCdFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxNTowMjo0N1rOHOCdFQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDQ4MjMyNQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                    String.format(Locale.ENGLISH, \"Unable to verify the repository, [%s] is not accessible on master node: %s '%s'\",\n          \n          \n            \n                                                  metadata.name(), e.getCause().getClass().getSimpleName(), e.getCause().getMessage()));\n          \n          \n            \n                                    String.format(Locale.ENGLISH,\n          \n          \n            \n                                                 \"Unable to verify the repository, it is not accessible on the master node: %s '%s'\",\n          \n          \n            \n                                                 e.getCause().getClass().getSimpleName(),\n          \n          \n            \n                                                 e.getCause().getMessage()));", "url": "https://github.com/crate/crate/pull/10200#discussion_r484482325", "createdAt": "2020-09-07T15:02:47Z", "author": {"login": "seut"}, "path": "server/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java", "diffHunk": "@@ -790,8 +791,10 @@ public String startVerification() {\n                 }\n                 return seed;\n             }\n-        } catch (IOException exp) {\n-            throw new RepositoryVerificationException(metadata.name(), \"path \" + basePath() + \" is not accessible on master node\", exp);\n+        } catch (Exception e) {\n+            throw new RepositoryVerificationException(metadata.name(),\n+                        String.format(Locale.ENGLISH, \"Unable to verify the repository, [%s] is not accessible on master node: %s '%s'\",\n+                                      metadata.name(), e.getCause().getClass().getSimpleName(), e.getCause().getMessage()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c743e3410c2e9990a7fa8745e4c391561e55c6c"}, "originalPosition": 17}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e30042f4537e6f8e4ad423350679e890cb9a8ba4", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/e30042f4537e6f8e4ad423350679e890cb9a8ba4", "committedDate": "2020-09-07T16:24:15Z", "message": "fix test"}, "afterCommit": {"oid": "1f567097511a6a34e57268bcffdad8bcf9acdbf2", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/1f567097511a6a34e57268bcffdad8bcf9acdbf2", "committedDate": "2020-09-07T19:08:00Z", "message": "Improve error message on repository creation failures\n\nThis Added detailed information to possible errors on ``repository``\ncreation to give better insights in the root cause of the error."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1f567097511a6a34e57268bcffdad8bcf9acdbf2", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/1f567097511a6a34e57268bcffdad8bcf9acdbf2", "committedDate": "2020-09-07T19:08:00Z", "message": "Improve error message on repository creation failures\n\nThis Added detailed information to possible errors on ``repository``\ncreation to give better insights in the root cause of the error."}, "afterCommit": {"oid": "742d16d5ff9e192bc028696f4090b3eba1be7e33", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/742d16d5ff9e192bc028696f4090b3eba1be7e33", "committedDate": "2020-09-07T19:47:37Z", "message": "fix test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5e3b2cc0b6eac71ca01bf6da2a34d6844e8bf61f", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/5e3b2cc0b6eac71ca01bf6da2a34d6844e8bf61f", "committedDate": "2020-09-07T20:02:01Z", "message": "fix test"}, "afterCommit": {"oid": "b8b7411afb45899659810b106c706af67d2d69a6", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/b8b7411afb45899659810b106c706af67d2d69a6", "committedDate": "2020-09-07T20:15:48Z", "message": "Improve error message on repository creation failures\n\nThis adds detailed information to possible errors on repository\ncreation to give better insights in the root cause of the error."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b8b7411afb45899659810b106c706af67d2d69a6", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/b8b7411afb45899659810b106c706af67d2d69a6", "committedDate": "2020-09-07T20:15:48Z", "message": "Improve error message on repository creation failures\n\nThis adds detailed information to possible errors on repository\ncreation to give better insights in the root cause of the error."}, "afterCommit": {"oid": "7890985cbe30f532941533376ce6050a250c75d0", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/7890985cbe30f532941533376ce6050a250c75d0", "committedDate": "2020-09-07T20:28:00Z", "message": "Improve error message on repository creation failures\n\nThis adds detailed information to possible errors on repository\ncreation to give better insights in the root cause of the error."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f9af53c157485a6d09576ee35261e3b739aaf1d", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/9f9af53c157485a6d09576ee35261e3b739aaf1d", "committedDate": "2020-09-07T20:34:48Z", "message": "Improve error message on repository creation failures\n\nThis adds detailed information to possible errors on repository\ncreation to give better insights in the root cause of the error."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7890985cbe30f532941533376ce6050a250c75d0", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/7890985cbe30f532941533376ce6050a250c75d0", "committedDate": "2020-09-07T20:28:00Z", "message": "Improve error message on repository creation failures\n\nThis adds detailed information to possible errors on repository\ncreation to give better insights in the root cause of the error."}, "afterCommit": {"oid": "9f9af53c157485a6d09576ee35261e3b739aaf1d", "author": {"user": {"login": "mkleen", "name": "Michael Kleen"}}, "url": "https://github.com/crate/crate/commit/9f9af53c157485a6d09576ee35261e3b739aaf1d", "committedDate": "2020-09-07T20:34:48Z", "message": "Improve error message on repository creation failures\n\nThis adds detailed information to possible errors on repository\ncreation to give better insights in the root cause of the error."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3189, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}