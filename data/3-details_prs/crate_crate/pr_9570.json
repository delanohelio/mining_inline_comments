{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY3Mzc5NTc4", "number": 9570, "title": "Remove bound and unbound notions in PreparedStmt and Portal", "bodyText": "Summary of the changes / Why this improves CrateDB\nChecklist\n\n User relevant changes are recorded in CHANGES.txt\n Touched code is covered by tests\n Documentation has been updated if necessary\n CLA is signed\n This does not contain breaking changes, or if it does:\n\nIt is released within a major release\nIt is recorded in CHANGES.txt\nIt was marked as deprecated in an earlier release if possible\nYou've thought about the consequences and other components are adapted\n(E.g. AdminUI)", "createdAt": "2020-01-27T09:01:07Z", "url": "https://github.com/crate/crate/pull/9570", "merged": true, "mergeCommit": {"oid": "9e142a32af0f18f509677f69085b162c60016363"}, "closed": true, "closedAt": "2020-01-27T10:40:09Z", "author": {"login": "kovrus"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb-ZQMggBqjI5ODEwMzE2NzE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb-aVxogFqTM0ODU2ODUwNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0a6a9b2da10ffbc04b2bf145466c29e396fbf373", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/0a6a9b2da10ffbc04b2bf145466c29e396fbf373", "committedDate": "2020-01-27T08:59:35Z", "message": "Rename PreparedStmt#unboundStatement -> PreparedStmt#analyzedStatement."}, "afterCommit": {"oid": "860137e5aef9d3535e8f87199c4eba1a8b2484e7", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/860137e5aef9d3535e8f87199c4eba1a8b2484e7", "committedDate": "2020-01-27T09:23:17Z", "message": "Rename PreparedStmt#unboundStatement to PreparedStmt#analyzedStatement."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4NTI1MTg2", "url": "https://github.com/crate/crate/pull/9570#pullrequestreview-348525186", "createdAt": "2020-01-27T09:27:48Z", "commit": {"oid": "860137e5aef9d3535e8f87199c4eba1a8b2484e7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QwOToyNzo0OVrOFh8LjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QwOToyNzo0OVrOFh8LjA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTEzMzMyNA==", "bodyText": "Do you think it would make sense to now always eagerly analyze the statement within parse already? That would allow us to remove the special case here and in describe. And we could probably also get rid of the analyzedStatement setter on PreparedStmt.", "url": "https://github.com/crate/crate/pull/9570#discussion_r371133324", "createdAt": "2020-01-27T09:27:49Z", "author": {"login": "mfussenegger"}, "path": "sql/src/main/java/io/crate/action/sql/Session.java", "diffHunk": "@@ -272,9 +272,8 @@ public void bind(String portalName,\n             throw t;\n         }\n \n-        AnalyzedStatement unboundStatement = preparedStmt.unboundStatement();\n         AnalyzedStatement analyzedStatement;\n-        if (unboundStatement == null) {\n+        if (preparedStmt.analyzedStatement() == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "860137e5aef9d3535e8f87199c4eba1a8b2484e7"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "774357784c5fce1f0a8c8d21317372b4cf43b2c8", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/774357784c5fce1f0a8c8d21317372b4cf43b2c8", "committedDate": "2020-01-27T09:32:29Z", "message": "Rename Portal#boundOrUnboundStatement to Portal#analyzedStatement."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa0462e781b3adb98033c5cba017f0c99e9ccc8e", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/aa0462e781b3adb98033c5cba017f0c99e9ccc8e", "committedDate": "2020-01-27T09:32:29Z", "message": "Rename PreparedStmt#unboundStatement to PreparedStmt#analyzedStatement."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a46638991a5945c027a4fa4cf908d0c11d45ebe9", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/a46638991a5945c027a4fa4cf908d0c11d45ebe9", "committedDate": "2020-01-27T10:05:44Z", "message": "Eagerly analyze statement in Session#parse.\n\nIt removes special handling for statements analysis\nin bind, describe and execBulk."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "860137e5aef9d3535e8f87199c4eba1a8b2484e7", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/860137e5aef9d3535e8f87199c4eba1a8b2484e7", "committedDate": "2020-01-27T09:23:17Z", "message": "Rename PreparedStmt#unboundStatement to PreparedStmt#analyzedStatement."}, "afterCommit": {"oid": "a46638991a5945c027a4fa4cf908d0c11d45ebe9", "author": {"user": {"login": "kovrus", "name": "Ruslan Kovalov"}}, "url": "https://github.com/crate/crate/commit/a46638991a5945c027a4fa4cf908d0c11d45ebe9", "committedDate": "2020-01-27T10:05:44Z", "message": "Eagerly analyze statement in Session#parse.\n\nIt removes special handling for statements analysis\nin bind, describe and execBulk."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4NTY4NTA2", "url": "https://github.com/crate/crate/pull/9570#pullrequestreview-348568506", "createdAt": "2020-01-27T10:39:33Z", "commit": {"oid": "a46638991a5945c027a4fa4cf908d0c11d45ebe9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3942, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}