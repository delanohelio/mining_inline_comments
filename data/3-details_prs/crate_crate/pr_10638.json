{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk5OTIyMjI2", "number": 10638, "title": "Enable soft deletes by default for new tables", "bodyText": "Summary of the changes / Why this improves CrateDB\nChecklist\n\n Added an entry in CHANGES.txt for user facing changes\n Updated documentation & sql_features table for user facing changes\n Touched code is covered by tests\n CLA is signed\n This does not contain breaking changes, or if it does:\n\nIt is released within a major release\nIt is recorded in CHANGES.txt\nIt was marked as deprecated in an earlier release if possible\nYou've thought about the consequences and other components are adapted\n(E.g. AdminUI)", "createdAt": "2020-10-08T13:27:20Z", "url": "https://github.com/crate/crate/pull/10638", "merged": true, "mergeCommit": {"oid": "caa03b997c9683b066bf498737bb35bf9ed7c072"}, "closed": true, "closedAt": "2020-10-09T14:20:47Z", "author": {"login": "mfussenegger"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdQiD9LgBqjM4NTU2MTk3MTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdQ2wzOABqjM4NjAzNDIzNDk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a6b80541a51facae68403f6390c0243b0e175247", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/a6b80541a51facae68403f6390c0243b0e175247", "committedDate": "2020-10-08T13:26:57Z", "message": "Enable soft deletes by default for new tables"}, "afterCommit": {"oid": "ab722d9aa195c5ac1e0735d3b82afa2cd53c1e16", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/ab722d9aa195c5ac1e0735d3b82afa2cd53c1e16", "committedDate": "2020-10-08T14:00:59Z", "message": "Enable soft deletes by default for new tables"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ab722d9aa195c5ac1e0735d3b82afa2cd53c1e16", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/ab722d9aa195c5ac1e0735d3b82afa2cd53c1e16", "committedDate": "2020-10-08T14:00:59Z", "message": "Enable soft deletes by default for new tables"}, "afterCommit": {"oid": "5fc1a7276976658c542904677122776eb86af973", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/5fc1a7276976658c542904677122776eb86af973", "committedDate": "2020-10-08T14:10:07Z", "message": "Enable soft deletes by default for new tables"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5fc1a7276976658c542904677122776eb86af973", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/5fc1a7276976658c542904677122776eb86af973", "committedDate": "2020-10-08T14:10:07Z", "message": "Enable soft deletes by default for new tables"}, "afterCommit": {"oid": "72890820fec4711fa99feaee702971fa8fad1c3a", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/72890820fec4711fa99feaee702971fa8fad1c3a", "committedDate": "2020-10-09T08:10:16Z", "message": "Enable soft deletes by default for new tables"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "72890820fec4711fa99feaee702971fa8fad1c3a", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/72890820fec4711fa99feaee702971fa8fad1c3a", "committedDate": "2020-10-09T08:10:16Z", "message": "Enable soft deletes by default for new tables"}, "afterCommit": {"oid": "10d5f56f6b29f651632825357b629d080c8ea483", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/10d5f56f6b29f651632825357b629d080c8ea483", "committedDate": "2020-10-09T08:13:43Z", "message": "Enable soft deletes by default for new tables"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "10d5f56f6b29f651632825357b629d080c8ea483", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/10d5f56f6b29f651632825357b629d080c8ea483", "committedDate": "2020-10-09T08:13:43Z", "message": "Enable soft deletes by default for new tables"}, "afterCommit": {"oid": "6e15bd493d5c94372b89721dda777c77c28b6301", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/6e15bd493d5c94372b89721dda777c77c28b6301", "committedDate": "2020-10-09T08:16:13Z", "message": "Enable soft deletes by default for new tables"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1NDcwNTY5", "url": "https://github.com/crate/crate/pull/10638#pullrequestreview-505470569", "createdAt": "2020-10-09T08:34:19Z", "commit": {"oid": "6e15bd493d5c94372b89721dda777c77c28b6301"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1NDgzMjAw", "url": "https://github.com/crate/crate/pull/10638#pullrequestreview-505483200", "createdAt": "2020-10-09T08:51:52Z", "commit": {"oid": "6e15bd493d5c94372b89721dda777c77c28b6301"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQwODo1MTo1MlrOHfA-Yg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQwODo1MTo1MlrOHfA-Yg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjI4Mzg3NA==", "bodyText": "might be beneficial to link \"Translog\" to https://crate.io/docs/crate/reference/en/4.2/concepts/storage-consistency.html#durability", "url": "https://github.com/crate/crate/pull/10638#discussion_r502283874", "createdAt": "2020-10-09T08:51:52Z", "author": {"login": "norosa"}, "path": "docs/sql/statements/create-table.rst", "diffHunk": "@@ -417,6 +417,30 @@ Allows to have a read only table that additionally can be deleted.\n   Disables the table settings modifications if set to ``true``, if set\n   to ``false`` \u2014 table settings modifications are enabled.\n \n+.. _table_parameter.soft_deletes.enabled:\n+\n+``soft_deletes.enabled``\n+------------------------\n+\n+Indicates whether soft deletes are enabled or disabled. \n+\n+Soft deletes allow CrateDB to preserve recent deletions within the Lucene\n+index. This information is used for shard recovery.\n+\n+Before the introduction of soft deletes, CrateDB had to retain the information\n+in the Translog. Using soft deletes uses less storage than the Translog", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6e15bd493d5c94372b89721dda777c77c28b6301"}, "originalPosition": 15}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6e15bd493d5c94372b89721dda777c77c28b6301", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/6e15bd493d5c94372b89721dda777c77c28b6301", "committedDate": "2020-10-09T08:16:13Z", "message": "Enable soft deletes by default for new tables"}, "afterCommit": {"oid": "2db93e32fe9b260d5edb013c61de676e66b5a6f1", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/2db93e32fe9b260d5edb013c61de676e66b5a6f1", "committedDate": "2020-10-09T09:06:17Z", "message": "Enable soft deletes by default for new tables"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "caa03b997c9683b066bf498737bb35bf9ed7c072", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/caa03b997c9683b066bf498737bb35bf9ed7c072", "committedDate": "2020-10-09T14:08:00Z", "message": "Enable soft deletes by default for new tables"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2db93e32fe9b260d5edb013c61de676e66b5a6f1", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/2db93e32fe9b260d5edb013c61de676e66b5a6f1", "committedDate": "2020-10-09T09:06:17Z", "message": "Enable soft deletes by default for new tables"}, "afterCommit": {"oid": "caa03b997c9683b066bf498737bb35bf9ed7c072", "author": {"user": {"login": "mfussenegger", "name": "Mathias Fu\u00dfenegger"}}, "url": "https://github.com/crate/crate/commit/caa03b997c9683b066bf498737bb35bf9ed7c072", "committedDate": "2020-10-09T14:08:00Z", "message": "Enable soft deletes by default for new tables"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3703, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}