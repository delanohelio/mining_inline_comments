{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE0ODIyOTU3", "number": 2495, "title": "Request scope propagation for non-async calls in FT", "bodyText": "Use a wrapped supplier to propagate request scope even for synchronous calls as some FT primitives (like Retry) use executors and may run code in a different thread. Updated new test that fails without this change and passes with it.", "createdAt": "2020-11-03T15:43:31Z", "url": "https://github.com/oracle/helidon/pull/2495", "merged": true, "mergeCommit": {"oid": "e7b9b8b8d38e9da1d906da5ccb58199ef5e171b3"}, "closed": true, "closedAt": "2020-11-04T14:20:47Z", "author": {"login": "spericas"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdWX0w0gH2gAyNTE0ODIyOTU3OjcxNGMxN2MxMTk0YzE2NTBkMTE1NTE3NjVmY2JiNTY5NDE0MzUwYzQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdZBTv2gFqTUyMjkzNDE4Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "714c17c1194c1650d11551765fcbb569414350c4", "author": {"user": {"login": "spericas", "name": "Santiago Pericasgeertsen"}}, "url": "https://github.com/oracle/helidon/commit/714c17c1194c1650d11551765fcbb569414350c4", "committedDate": "2020-10-26T17:29:01Z", "message": "New test for issue 2480.\n\nSigned-off-by: Santiago Pericasgeertsen <santiago.pericasgeertsen@oracle.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a2a53567f9c9d156726a4bcebd5ef57e78ed63e2", "author": {"user": {"login": "spericas", "name": "Santiago Pericasgeertsen"}}, "url": "https://github.com/oracle/helidon/commit/a2a53567f9c9d156726a4bcebd5ef57e78ed63e2", "committedDate": "2020-10-26T17:36:00Z", "message": "Swithed to new test framework for MP.\n\nSigned-off-by: Santiago Pericasgeertsen <santiago.pericasgeertsen@oracle.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1f1c85e5234d6e9c0d9212793144208f20326edd", "author": {"user": {"login": "spericas", "name": "Santiago Pericasgeertsen"}}, "url": "https://github.com/oracle/helidon/commit/1f1c85e5234d6e9c0d9212793144208f20326edd", "committedDate": "2020-11-03T15:40:20Z", "message": "Use a wrapped supplier to propagate request scope even for synchronous calls as some FT primitives (like Retry) use executors and may run code in a different thread. Updated new test that fails without this change and passes with it.\n\nSigned-off-by: Santiago Pericasgeertsen <santiago.pericasgeertsen@oracle.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8fa3b61ad030b5f20a858a2ea8cd6b8a90c3ad77", "author": {"user": {"login": "spericas", "name": "Santiago Pericasgeertsen"}}, "url": "https://github.com/oracle/helidon/commit/8fa3b61ad030b5f20a858a2ea8cd6b8a90c3ad77", "committedDate": "2020-11-03T15:45:12Z", "message": "Renamed variable.\n\nSigned-off-by: Santiago Pericasgeertsen <santiago.pericasgeertsen@oracle.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9b366c26d94ddb31da8525281d577b189e4882f0", "author": {"user": {"login": "spericas", "name": "Santiago Pericasgeertsen"}}, "url": "https://github.com/oracle/helidon/commit/9b366c26d94ddb31da8525281d577b189e4882f0", "committedDate": "2020-11-03T18:47:45Z", "message": "Fixed copyright problems.\n\nSigned-off-by: Santiago Pericasgeertsen <santiago.pericasgeertsen@oracle.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b023804ff0b4ef2293eddab472cb15987f951906", "author": {"user": {"login": "spericas", "name": "Santiago Pericasgeertsen"}}, "url": "https://github.com/oracle/helidon/commit/b023804ff0b4ef2293eddab472cb15987f951906", "committedDate": "2020-11-03T19:17:33Z", "message": "Dropped fixed port in config.\n\nSigned-off-by: Santiago Pericasgeertsen <santiago.pericasgeertsen@oracle.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2484a57c54e9fe50d31e7623bacab89fcac9ef69", "author": {"user": {"login": "spericas", "name": "Santiago Pericasgeertsen"}}, "url": "https://github.com/oracle/helidon/commit/2484a57c54e9fe50d31e7623bacab89fcac9ef69", "committedDate": "2020-11-03T20:40:45Z", "message": "Remove redundant main class.\n\nSigned-off-by: Santiago Pericasgeertsen <santiago.pericasgeertsen@oracle.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyOTIyNjQ3", "url": "https://github.com/oracle/helidon/pull/2495#pullrequestreview-522922647", "createdAt": "2020-11-03T22:32:40Z", "commit": {"oid": "2484a57c54e9fe50d31e7623bacab89fcac9ef69"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyOTM0MTg3", "url": "https://github.com/oracle/helidon/pull/2495#pullrequestreview-522934187", "createdAt": "2020-11-03T22:56:25Z", "commit": {"oid": "2484a57c54e9fe50d31e7623bacab89fcac9ef69"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QyMjo1NjoyNVrOHtDaiQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QyMjo1NjoyNVrOHtDaiQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzAwMzkxMw==", "bodyText": "Intentional?", "url": "https://github.com/oracle/helidon/pull/2495#discussion_r517003913", "createdAt": "2020-11-03T22:56:25Z", "author": {"login": "ljnelson"}, "path": "tests/functional/request-scope/src/main/java/io/helidon/tests/functional/requestscope/RequestTestQualifier.java", "diffHunk": "@@ -0,0 +1,36 @@\n+/*\n+ * Copyright (c) 2020 Oracle and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package io.helidon.tests.functional.requestscope;\n+\n+import javax.enterprise.context.RequestScoped;\n+import javax.inject.Inject;\n+\n+@RequestScoped\n+@TestQualifier\n+public class RequestTestQualifier {\n+\n+    @Inject\n+    TenantContext tenantContext;\n+\n+    public String test() throws Exception {\n+        String tenantId = tenantContext.getTenantId();\n+        System.out.println(\"Tenant Context: \" + tenantId);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2484a57c54e9fe50d31e7623bacab89fcac9ef69"}, "originalPosition": 30}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 352, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}