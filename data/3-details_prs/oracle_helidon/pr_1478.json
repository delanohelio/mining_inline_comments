{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg1NjMzNjE5", "number": 1478, "title": "JPA and JTA for native image", "bodyText": "Related to #1293\nThis is the first experimental support for Hibernate and JTA in native image.\nSee integration test tests/integration/native-image/mp-2 that shows what is supported.", "createdAt": "2020-03-09T14:51:06Z", "url": "https://github.com/oracle/helidon/pull/1478", "merged": true, "mergeCommit": {"oid": "3f2237f7ac6840fba4cdc53f094f97499009b460"}, "closed": true, "closedAt": "2020-03-17T08:18:59Z", "author": {"login": "tomas-langer"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcL_Lv3ABqjMxMTEwMDg2MDc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcOWDW2AFqTM3NTYzMTAxMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f488906e226d01b016cef4022ef0bf3c90622f02", "author": {"user": {"login": "tomas-langer", "name": "Tomas Langer"}}, "url": "https://github.com/oracle/helidon/commit/f488906e226d01b016cef4022ef0bf3c90622f02", "committedDate": "2020-03-09T14:49:05Z", "message": "JPA and JTA for native image.\n\nSigned-off-by: Tomas Langer <tomas.langer@oracle.com>"}, "afterCommit": {"oid": "5c8cb79df780f8fc70d3e11d46441e0530d00c23", "author": {"user": {"login": "tomas-langer", "name": "Tomas Langer"}}, "url": "https://github.com/oracle/helidon/commit/5c8cb79df780f8fc70d3e11d46441e0530d00c23", "committedDate": "2020-03-09T14:55:51Z", "message": "JPA and JTA for native image.\n\nSigned-off-by: Tomas Langer <tomas.langer@oracle.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5c8cb79df780f8fc70d3e11d46441e0530d00c23", "author": {"user": {"login": "tomas-langer", "name": "Tomas Langer"}}, "url": "https://github.com/oracle/helidon/commit/5c8cb79df780f8fc70d3e11d46441e0530d00c23", "committedDate": "2020-03-09T14:55:51Z", "message": "JPA and JTA for native image.\n\nSigned-off-by: Tomas Langer <tomas.langer@oracle.com>"}, "afterCommit": {"oid": "2834aadf7ea3daa171c72a396d05f900e34e1961", "author": {"user": {"login": "tomas-langer", "name": "Tomas Langer"}}, "url": "https://github.com/oracle/helidon/commit/2834aadf7ea3daa171c72a396d05f900e34e1961", "committedDate": "2020-03-09T15:18:50Z", "message": "JPA and JTA for native image.\n\nSigned-off-by: Tomas Langer <tomas.langer@oracle.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzczMTY2NjUy", "url": "https://github.com/oracle/helidon/pull/1478#pullrequestreview-373166652", "createdAt": "2020-03-11T22:20:39Z", "commit": {"oid": "2834aadf7ea3daa171c72a396d05f900e34e1961"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQyMjoyMDozOVrOF1LSHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQyMjoyNDo1MFrOF1LX4w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTMwMzcwOA==", "bodyText": "JtaPlatform is inherently a Hibernate construct, so renaming this to HibernateJtaPlatform is redundant.", "url": "https://github.com/oracle/helidon/pull/1478#discussion_r391303708", "createdAt": "2020-03-11T22:20:39Z", "author": {"login": "ljnelson"}, "path": "integrations/cdi/hibernate-cdi/src/main/java/io/helidon/integrations/cdi/hibernate/HibernateJtaPlatform.java", "diffHunk": "@@ -29,13 +29,13 @@\n  * An {@link AbstractJtaPlatform} that is an {@link ApplicationScoped}\n  * CDI managed bean that supplies {@link TransactionManager} and\n  * {@link UserTransaction} instances that are supplied to it at\n- * {@linkplain #CDISEJtaPlatform(TransactionManager, UserTransaction)\n+ * {@linkplain #HibernateJtaPlatform(TransactionManager, UserTransaction)\n  * construction time}.\n  *\n  * @see AbstractJtaPlatform\n  */\n @ApplicationScoped\n-public class CDISEJtaPlatform extends AbstractJtaPlatform {\n+public class HibernateJtaPlatform extends AbstractJtaPlatform {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2834aadf7ea3daa171c72a396d05f900e34e1961"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTMwMzk1Mg==", "bodyText": "JtaPlatformProvider is inherently a Hibernate construct so renaming this to HibernateJtaPlatformProvider is redundant.", "url": "https://github.com/oracle/helidon/pull/1478#discussion_r391303952", "createdAt": "2020-03-11T22:21:22Z", "author": {"login": "ljnelson"}, "path": "integrations/cdi/hibernate-cdi/src/main/java/io/helidon/integrations/cdi/hibernate/HibernateJtaPlatformProvider.java", "diffHunk": "@@ -30,14 +30,13 @@\n  *\n  * @see JtaPlatform\n  *\n- * @see CDISEJtaPlatform\n+ * @see HibernateJtaPlatform\n  */\n-public final class CDISEJtaPlatformProvider implements JtaPlatformProvider {\n-\n+public final class HibernateJtaPlatformProvider implements JtaPlatformProvider {\n   /**\n-   * Creates a new {@link CDISEJtaPlatformProvider}.\n+   * Creates a new {@link HibernateJtaPlatformProvider}.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2834aadf7ea3daa171c72a396d05f900e34e1961"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTMwNDM0OA==", "bodyText": "As noted earlier in the review, renames like this should be reverted.", "url": "https://github.com/oracle/helidon/pull/1478#discussion_r391304348", "createdAt": "2020-03-11T22:22:20Z", "author": {"login": "ljnelson"}, "path": "integrations/cdi/hibernate-cdi/src/main/resources/META-INF/services/org.hibernate.engine.transaction.jta.platform.spi.JtaPlatformProvider", "diffHunk": "@@ -11,4 +11,5 @@\n # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n # See the License for the specific language governing permissions and\n # limitations under the License.\n-io.helidon.integrations.cdi.hibernate.CDISEJtaPlatformProvider\n\\ No newline at end of file\n+\n+io.helidon.integrations.cdi.hibernate.HibernateJtaPlatformProvider", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2834aadf7ea3daa171c72a396d05f900e34e1961"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTMwNTE4Nw==", "bodyText": "I'd prefer keeping the HelidonFeatures stuff out of this extension as right now it is capable of being a generic CDI portable extension usable by any CDI implementation in any product.  Perhaps this could be located elsewhere?", "url": "https://github.com/oracle/helidon/pull/1478#discussion_r391305187", "createdAt": "2020-03-11T22:24:50Z", "author": {"login": "ljnelson"}, "path": "integrations/cdi/jta-cdi/src/main/java/io/helidon/integrations/jta/cdi/NarayanaExtension.java", "diffHunk": "@@ -54,13 +57,14 @@\n  * 2.0 SE environment</a>.\n  */\n public final class NarayanaExtension implements Extension {\n-\n+    static {\n+        HelidonFeatures.register(HelidonFlavor.MP, \"JTA\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2834aadf7ea3daa171c72a396d05f900e34e1961"}, "originalPosition": 23}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c9957e384e31a64e59fadfc4ead86389032a20db", "author": {"user": {"login": "tomas-langer", "name": "Tomas Langer"}}, "url": "https://github.com/oracle/helidon/commit/c9957e384e31a64e59fadfc4ead86389032a20db", "committedDate": "2020-03-12T11:23:59Z", "message": "Support for features that cannot use static initialization."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "96adf3e17b7fc177e6715f3f891ff135138fa1d8", "author": {"user": {"login": "tomas-langer", "name": "Tomas Langer"}}, "url": "https://github.com/oracle/helidon/commit/96adf3e17b7fc177e6715f3f891ff135138fa1d8", "committedDate": "2020-03-12T11:23:59Z", "message": "JPA and JTA for native image.\n\nSigned-off-by: Tomas Langer <tomas.langer@oracle.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77959a50f9f81ff57bcb68f919842947ef8256cf", "author": {"user": {"login": "tomas-langer", "name": "Tomas Langer"}}, "url": "https://github.com/oracle/helidon/commit/77959a50f9f81ff57bcb68f919842947ef8256cf", "committedDate": "2020-03-12T11:39:00Z", "message": "Reverted names.\n\nSigned-off-by: Tomas Langer <tomas.langer@oracle.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2834aadf7ea3daa171c72a396d05f900e34e1961", "author": {"user": {"login": "tomas-langer", "name": "Tomas Langer"}}, "url": "https://github.com/oracle/helidon/commit/2834aadf7ea3daa171c72a396d05f900e34e1961", "committedDate": "2020-03-09T15:18:50Z", "message": "JPA and JTA for native image.\n\nSigned-off-by: Tomas Langer <tomas.langer@oracle.com>"}, "afterCommit": {"oid": "77959a50f9f81ff57bcb68f919842947ef8256cf", "author": {"user": {"login": "tomas-langer", "name": "Tomas Langer"}}, "url": "https://github.com/oracle/helidon/commit/77959a50f9f81ff57bcb68f919842947ef8256cf", "committedDate": "2020-03-12T11:39:00Z", "message": "Reverted names.\n\nSigned-off-by: Tomas Langer <tomas.langer@oracle.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0NjYxNjE5", "url": "https://github.com/oracle/helidon/pull/1478#pullrequestreview-374661619", "createdAt": "2020-03-13T23:03:18Z", "commit": {"oid": "77959a50f9f81ff57bcb68f919842947ef8256cf"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1MDM0ODA4", "url": "https://github.com/oracle/helidon/pull/1478#pullrequestreview-375034808", "createdAt": "2020-03-16T09:26:53Z", "commit": {"oid": "77959a50f9f81ff57bcb68f919842947ef8256cf"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a245c24652ed9c5cae283331a09c8cba221e7cd", "author": {"user": {"login": "tomas-langer", "name": "Tomas Langer"}}, "url": "https://github.com/oracle/helidon/commit/2a245c24652ed9c5cae283331a09c8cba221e7cd", "committedDate": "2020-03-16T21:05:13Z", "message": "Removed feature support until we resolve how to handle it.\n\nSigned-off-by: Tomas Langer <tomas.langer@oracle.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1NjMxMDEw", "url": "https://github.com/oracle/helidon/pull/1478#pullrequestreview-375631010", "createdAt": "2020-03-16T22:42:36Z", "commit": {"oid": "2a245c24652ed9c5cae283331a09c8cba221e7cd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 844, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}