{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMzMjc4NjIx", "number": 1982, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQxNzozMzozNFrOEFI2zQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQxOToxODo1NlrOEFKmAw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczODIzNDM3OnYy", "diffSide": "RIGHT", "path": "archetypes/database-se/src/main/resources/src/main/java/__pkg__/PokemonService.java.mustache", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQxNzozMzozNFrOGjMQsg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQxNzozMzozNFrOGjMQsg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU1NDIyNg==", "bodyText": "Double semi colon", "url": "https://github.com/oracle/helidon/pull/1982#discussion_r439554226", "createdAt": "2020-06-12T17:33:34Z", "author": {"login": "romain-grecourt"}, "path": "archetypes/database-se/src/main/resources/src/main/java/__pkg__/PokemonService.java.mustache", "diffHunk": "@@ -0,0 +1,155 @@\n+\n+package {{package}};\n+\n+import java.util.List;\n+import java.util.concurrent.CompletionException;\n+import java.util.concurrent.ExecutionException;\n+import java.util.logging.Level;\n+import java.util.logging.Logger;;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ddfac62d83bb8e132f5bbd776cfaac4768ced0e9"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczODUxOTA3OnYy", "diffSide": "RIGHT", "path": "archetypes/database-se/src/main/resources/src/main/java/__pkg__/Main.java.mustache", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQxOToxODo1NlrOGjPIRw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQxOToxODo1NlrOGjPIRw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTYwMTIyMw==", "bodyText": "Other archetypes seem to use a different pattern:\n\n  \n    \n      helidon/archetypes/bare-se/src/main/resources/src/main/java/__pkg__/Main.java.mustache\n    \n    \n        Lines 55 to 68\n      in\n      6e4e3aa\n    \n    \n    \n    \n\n        \n          \n                   // Try to start the server. If successful, print some info and arrange to \n        \n\n        \n          \n                   // print a message at shutdown. If unsuccessful, print the exception. \n        \n\n        \n          \n                   server.start() \n        \n\n        \n          \n                           .thenAccept(ws -> { \n        \n\n        \n          \n                               System.out.println( \n        \n\n        \n          \n                                       \"WEB server is up! http://localhost:\" + ws.port() + \"/greet\"); \n        \n\n        \n          \n                               ws.whenShutdown().thenRun(() \n        \n\n        \n          \n                                       -> System.out.println(\"WEB server is DOWN. Good bye!\")); \n        \n\n        \n          \n                           }) \n        \n\n        \n          \n                           .exceptionally(t -> { \n        \n\n        \n          \n                               System.err.println(\"Startup failed: \" + t.getMessage()); \n        \n\n        \n          \n                               t.printStackTrace(System.err); \n        \n\n        \n          \n                               return null; \n        \n\n        \n          \n                           }); \n        \n    \n  \n\n\nWe should probably be consistent unless it makes sense otherwise.", "url": "https://github.com/oracle/helidon/pull/1982#discussion_r439601223", "createdAt": "2020-06-12T19:18:56Z", "author": {"login": "tjquinno"}, "path": "archetypes/database-se/src/main/resources/src/main/java/__pkg__/Main.java.mustache", "diffHunk": "@@ -0,0 +1,96 @@\n+\n+package {{package}};\n+\n+import java.io.IOException;\n+import java.util.logging.LogManager;\n+\n+import io.helidon.config.Config;\n+import io.helidon.dbclient.DbClient;\n+import io.helidon.dbclient.health.DbClientHealthCheck;\n+import io.helidon.health.HealthSupport;\n+import io.helidon.media.jsonb.JsonbSupport;\n+import io.helidon.media.jsonp.JsonpSupport;\n+import io.helidon.metrics.MetricsSupport;\n+import io.helidon.webserver.Routing;\n+import io.helidon.webserver.WebServer;\n+\n+/**\n+ * Main class that starts up server and registers Pokemon services.\n+ */\n+public final class Main {\n+\n+    /**\n+     * Cannot be instantiated.\n+     */\n+    private Main() {\n+    }\n+\n+    /**\n+     * Application main entry point.\n+     *\n+     * @param args command line arguments\n+     * @throws java.io.IOException if there are problems reading logging properties\n+     */\n+    public static void main(final String[] args) throws IOException {\n+        startServer();\n+    }\n+\n+    /**\n+     * Start the server.\n+     *\n+     * @return the created {@link io.helidon.webserver.WebServer} instance\n+     * @throws java.io.IOException if there are problems reading logging properties\n+     */\n+    static WebServer startServer() throws IOException {\n+        // Load logging configuration\n+        LogManager.getLogManager().readConfiguration(Main.class.getResourceAsStream(\"/logging.properties\"));\n+\n+        // By default this will pick up application.yaml from the classpath\n+        Config config = Config.create();\n+\n+        // Prepare routing and build server\n+        Routing routing = createRouting(config);\n+        WebServer server = WebServer.builder(routing)\n+                .addMediaSupport(JsonpSupport.create())\n+                .addMediaSupport(JsonbSupport.create())\n+                .config(config.get(\"server\"))\n+                .build();\n+\n+        // Start the server and print some info\n+        server.start()\n+                .thenAccept(ws -> System.out.println(\"WEB server is up! http://localhost:\" + ws.port() + \"/\"));\n+\n+        // Server threads are not daemon\n+        server.whenShutdown()\n+                .thenRun(() -> System.out.println(\"WEB server is DOWN. Good bye!\"));\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ddfac62d83bb8e132f5bbd776cfaac4768ced0e9"}, "originalPosition": 66}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 516, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}