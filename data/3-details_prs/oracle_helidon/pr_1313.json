{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY0MTQxNjg2", "number": 1313, "title": "Fixed issues with IDCS and OIDC provider.", "bodyText": "Cookie now configured to prevent infinite redirects.\nWebServer security for scopes works as it should.\nMP integration with WebServer security works as it should.\nExamples are clearly separated between SE and MP.\nSigned-off-by: Tomas Langer tomas.langer@oracle.com\nSolves #1302 for master branch", "createdAt": "2020-01-17T13:28:26Z", "url": "https://github.com/oracle/helidon/pull/1313", "merged": true, "mergeCommit": {"oid": "516859370b8f737832b31a84ac2641229dd16aa8"}, "closed": true, "closedAt": "2020-01-21T15:26:18Z", "author": {"login": "tomas-langer"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb7PC0dgBqjI5NTgyMDQ3NTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb8ivuQgFqTM0NTk1ODIwOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5fed5e776cdece301c9b46a5a1eb8c2415d09118", "author": {"user": {"login": "tomas-langer", "name": "Tomas Langer"}}, "url": "https://github.com/oracle/helidon/commit/5fed5e776cdece301c9b46a5a1eb8c2415d09118", "committedDate": "2020-01-17T13:26:51Z", "message": "Fixed issues with IDCS and OIDC provider.\nCookie now configured to prevent infinite redirects.\nWebServer security for scopes works as it should.\nMP integration with WebServer security works as it should.\nExamples are clearly separated between SE and MP.\n\nSigned-off-by: Tomas Langer <tomas.langer@oracle.com>"}, "afterCommit": {"oid": "fffc7dce15ac5c95bc0f59e0a63dbdc799798d1e", "author": {"user": {"login": "tomas-langer", "name": "Tomas Langer"}}, "url": "https://github.com/oracle/helidon/commit/fffc7dce15ac5c95bc0f59e0a63dbdc799798d1e", "committedDate": "2020-01-17T13:47:54Z", "message": "Fixed issues with IDCS and OIDC provider.\nCookie now configured to prevent infinite redirects.\nWebServer security for scopes works as it should.\nMP integration with WebServer security works as it should.\nExamples are clearly separated between SE and MP.\n\nSigned-off-by: Tomas Langer <tomas.langer@oracle.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6c60358bfc2cbfe6705b9c97128174cc6723edb3", "author": {"user": {"login": "tomas-langer", "name": "Tomas Langer"}}, "url": "https://github.com/oracle/helidon/commit/6c60358bfc2cbfe6705b9c97128174cc6723edb3", "committedDate": "2020-01-17T13:53:14Z", "message": "Fixed issues with IDCS and OIDC provider.\nCookie now configured to prevent infinite redirects.\nWebServer security for scopes works as it should.\nMP integration with WebServer security works as it should.\nExamples are clearly separated between SE and MP.\n\nSigned-off-by: Tomas Langer <tomas.langer@oracle.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fffc7dce15ac5c95bc0f59e0a63dbdc799798d1e", "author": {"user": {"login": "tomas-langer", "name": "Tomas Langer"}}, "url": "https://github.com/oracle/helidon/commit/fffc7dce15ac5c95bc0f59e0a63dbdc799798d1e", "committedDate": "2020-01-17T13:47:54Z", "message": "Fixed issues with IDCS and OIDC provider.\nCookie now configured to prevent infinite redirects.\nWebServer security for scopes works as it should.\nMP integration with WebServer security works as it should.\nExamples are clearly separated between SE and MP.\n\nSigned-off-by: Tomas Langer <tomas.langer@oracle.com>"}, "afterCommit": {"oid": "6c60358bfc2cbfe6705b9c97128174cc6723edb3", "author": {"user": {"login": "tomas-langer", "name": "Tomas Langer"}}, "url": "https://github.com/oracle/helidon/commit/6c60358bfc2cbfe6705b9c97128174cc6723edb3", "committedDate": "2020-01-17T13:53:14Z", "message": "Fixed issues with IDCS and OIDC provider.\nCookie now configured to prevent infinite redirects.\nWebServer security for scopes works as it should.\nMP integration with WebServer security works as it should.\nExamples are clearly separated between SE and MP.\n\nSigned-off-by: Tomas Langer <tomas.langer@oracle.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ0OTM2OTQ3", "url": "https://github.com/oracle/helidon/pull/1313#pullrequestreview-344936947", "createdAt": "2020-01-18T10:22:30Z", "commit": {"oid": "6c60358bfc2cbfe6705b9c97128174cc6723edb3"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xOFQxMDoyMjozMFrOFfKVtw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xOFQxMDozMTozNVrOFfKW3g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIxOTU3NQ==", "bodyText": "shouldn't the string be rendered from the frontend URI in application.yaml?", "url": "https://github.com/oracle/helidon/pull/1313#discussion_r368219575", "createdAt": "2020-01-18T10:22:30Z", "author": {"login": "FWiesner"}, "path": "examples/microprofile/idcs/src/main/java/io/helidon/examples/microprofile/security/idcs/IdcsMain.java", "diffHunk": "@@ -35,13 +34,16 @@ private IdcsMain() {\n      * @throws IOException when logging configuration fails\n      */\n     public static void main(String[] args) throws IOException {\n-        LogManager.getLogManager().readConfiguration(IdcsMain.class.getResourceAsStream(\"/logging.properties\"));\n         Server.create().start();\n \n         System.out.println(\"Endpoints:\");\n         System.out.println(\"Login\");\n         System.out.println(\"  http://localhost:7987/rest/login\");\n         System.out.println(\"Full security with scopes and roles (see IdcsResource.java)\");\n         System.out.println(\"  http://localhost:7987/rest/scopes\");\n+        System.out.println(\"A protected reactive service (see application.yaml - security.web-server)\");\n+        System.out.println(\"  http://localhost:7987/reactive\");\n+        System.out.println(\"A protected static resource (see application.yaml - security.web-server\");\n+        System.out.println(\"  http://localhost:7987/web/resource.html\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6c60358bfc2cbfe6705b9c97128174cc6723edb3"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIxOTg3MA==", "bodyText": "I think the change in the defaults makes sense with Oracle-apps that use IDCS. Nevertheless I would add a textual warning on startup that the cookie policy is now Lax instead of Strict. The developer might then want to turn off the warning or change to Strict, if possible. I wouldn't do this as undocumented/unalerted change. Certainly this has to go into the release notes as well", "url": "https://github.com/oracle/helidon/pull/1313#discussion_r368219870", "createdAt": "2020-01-18T10:31:35Z", "author": {"login": "FWiesner"}, "path": "security/providers/oidc-common/src/main/java/io/helidon/security/providers/oidc/common/OidcConfig.java", "diffHunk": "@@ -260,7 +262,7 @@\n     static final String DEFAULT_COOKIE_PATH = \"/\";\n     static final boolean DEFAULT_COOKIE_HTTP_ONLY = true;\n     static final boolean DEFAULT_COOKIE_SECURE = false;\n-    static final String DEFAULT_COOKIE_SAME_SITE = \"Strict\";\n+    static final String DEFAULT_COOKIE_SAME_SITE = \"Lax\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6c60358bfc2cbfe6705b9c97128174cc6723edb3"}, "originalPosition": 25}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "da4547a51cb3025310d9fee2997b07222f7cdb32", "author": {"user": {"login": "tomas-langer", "name": "Tomas Langer"}}, "url": "https://github.com/oracle/helidon/commit/da4547a51cb3025310d9fee2997b07222f7cdb32", "committedDate": "2020-01-20T10:35:25Z", "message": "Review changes\n\nSigned-off-by: Tomas Langer <tomas.langer@oracle.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5baad3edd80d9055e0dd2c4cddda3ac766dd5610", "author": {"user": {"login": "tomas-langer", "name": "Tomas Langer"}}, "url": "https://github.com/oracle/helidon/commit/5baad3edd80d9055e0dd2c4cddda3ac766dd5610", "committedDate": "2020-01-20T17:31:14Z", "message": "Using strict Same-Site when frontend and identity hosts match.\n\nSigned-off-by: Tomas Langer <tomas.langer@oracle.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ1OTU4MjA5", "url": "https://github.com/oracle/helidon/pull/1313#pullrequestreview-345958209", "createdAt": "2020-01-21T15:19:17Z", "commit": {"oid": "5baad3edd80d9055e0dd2c4cddda3ac766dd5610"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 887, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}