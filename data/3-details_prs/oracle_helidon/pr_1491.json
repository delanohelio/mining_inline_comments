{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg2NjgwNTM2", "number": 1491, "title": "Fail fast when policy validation fails because of setup/syntax.", "bodyText": "Signed-off-by: Tomas Langer tomas.langer@oracle.com\nResolves #1487 for 2.x", "createdAt": "2020-03-11T13:11:21Z", "url": "https://github.com/oracle/helidon/pull/1491", "merged": true, "mergeCommit": {"oid": "828d7c6e6e750a3db6091334672c6bebd8811205"}, "closed": true, "closedAt": "2020-03-16T11:58:03Z", "author": {"login": "tomas-langer"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcMopyQgFqTM3Mjg1NTYzOQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcNSMeggFqTM3NDQwMjUxOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcyODU1NjM5", "url": "https://github.com/oracle/helidon/pull/1491#pullrequestreview-372855639", "createdAt": "2020-03-11T15:15:01Z", "commit": {"oid": "66a8cbe4d1258c4442528079a0fedc1ae9282556"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzczMTY0Nzkz", "url": "https://github.com/oracle/helidon/pull/1491#pullrequestreview-373164793", "createdAt": "2020-03-11T22:16:16Z", "commit": {"oid": "1559c14f461f99b6348b6a5ef5c4f462bce6dcc4"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQyMjoxNjoxNlrOF1LGUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQyMjoxNjoxNlrOF1LGUw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTMwMDY5MQ==", "bodyText": "Consider wrapping e so it isn't lost.", "url": "https://github.com/oracle/helidon/pull/1491#discussion_r391300691", "createdAt": "2020-03-11T22:16:16Z", "author": {"login": "ljnelson"}, "path": "security/abac/policy-el/src/main/java/io/helidon/security/abac/policy/el/JavaxElPolicyExecutor.java", "diffHunk": "@@ -164,9 +161,8 @@ public JavaxElPolicyExecutor build() {\n                 try {\n                     expressionFactory = ExpressionFactory.newInstance();\n                 } catch (ELException e) {\n-                    LOGGER.fine(\n-                            \"Expression language factory not available. To support policy expressions, you need to add some \"\n-                                    + \"implementation to class/module path\");\n+                    throw new SecurityException(\"Failed to configure ABAC Policy support for Jakarta Expression Language,\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1559c14f461f99b6348b6a5ef5c4f462bce6dcc4"}, "originalPosition": 27}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0MjE4OTE0", "url": "https://github.com/oracle/helidon/pull/1491#pullrequestreview-374218914", "createdAt": "2020-03-13T11:11:52Z", "commit": {"oid": "0ca0d47bd14f5542d8cf4e6e4ac8b118468396dd"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb7aec69969e0927e61d7534e3cd5b520d52dfb1", "author": {"user": {"login": "tomas-langer", "name": "Tomas Langer"}}, "url": "https://github.com/oracle/helidon/commit/eb7aec69969e0927e61d7534e3cd5b520d52dfb1", "committedDate": "2020-03-13T11:15:07Z", "message": "Fail fast when policy validation fails because of setup/syntax.\n\nSigned-off-by: Tomas Langer <tomas.langer@oracle.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f645ab23d1202bb91342429dcec63b0e50e7a32a", "author": {"user": {"login": "tomas-langer", "name": "Tomas Langer"}}, "url": "https://github.com/oracle/helidon/commit/f645ab23d1202bb91342429dcec63b0e50e7a32a", "committedDate": "2020-03-13T11:15:07Z", "message": "Review fix - not hiding exception.\n\nSigned-off-by: Tomas Langer <tomas.langer@oracle.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0ca0d47bd14f5542d8cf4e6e4ac8b118468396dd", "author": {"user": {"login": "tomas-langer", "name": "Tomas Langer"}}, "url": "https://github.com/oracle/helidon/commit/0ca0d47bd14f5542d8cf4e6e4ac8b118468396dd", "committedDate": "2020-03-12T11:22:52Z", "message": "Review fix - not hiding exception.\n\nSigned-off-by: Tomas Langer <tomas.langer@oracle.com>"}, "afterCommit": {"oid": "f645ab23d1202bb91342429dcec63b0e50e7a32a", "author": {"user": {"login": "tomas-langer", "name": "Tomas Langer"}}, "url": "https://github.com/oracle/helidon/commit/f645ab23d1202bb91342429dcec63b0e50e7a32a", "committedDate": "2020-03-13T11:15:07Z", "message": "Review fix - not hiding exception.\n\nSigned-off-by: Tomas Langer <tomas.langer@oracle.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0MjY5NjUy", "url": "https://github.com/oracle/helidon/pull/1491#pullrequestreview-374269652", "createdAt": "2020-03-13T12:44:47Z", "commit": {"oid": "f645ab23d1202bb91342429dcec63b0e50e7a32a"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QxMjo0NDo0OFrOF2CRgQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QxMjo0NDo0OFrOF2CRgQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjIwNDY3Mw==", "bodyText": "Is logging still needed here?", "url": "https://github.com/oracle/helidon/pull/1491#discussion_r392204673", "createdAt": "2020-03-13T12:44:48Z", "author": {"login": "danielkec"}, "path": "security/abac/policy-el/src/main/java/io/helidon/security/abac/policy/el/JavaxElPolicyExecutor.java", "diffHunk": "@@ -116,11 +116,8 @@ public void executePolicy(String policyStatement, Errors.Collector collector, Pr\n                 collector.fatal(this, \"Policy statement \\\"\" + policyStatement + \"\\\" evaluated to false\");\n             }\n         } catch (Exception e) {\n-            collector.fatal(this,\n-                            \"Policy statement \\\"\" + policyStatement + \"\\\" evaluated to an exception \" + e.getClass()\n-                                    .getName() + \" with message: \" + e.getMessage());\n-\n             LOGGER.log(Level.FINEST, e, () -> \"Statement \" + policyStatement + \" evaluation failed\");\n+            throw new SecurityException(\"Policy statement \\\"\" + policyStatement + \"\\\" evaluated to an exception\", e);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f645ab23d1202bb91342429dcec63b0e50e7a32a"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0NDAyNTE5", "url": "https://github.com/oracle/helidon/pull/1491#pullrequestreview-374402519", "createdAt": "2020-03-13T15:39:01Z", "commit": {"oid": "f645ab23d1202bb91342429dcec63b0e50e7a32a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 855, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}