{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMxOTE3MTYw", "number": 1951, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxNjozMDoxNVrOED9uLg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxNjozMDoxNVrOED9uLg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNTkyNDMwOnYy", "diffSide": "RIGHT", "path": "grpc/metrics/src/main/java/io/helidon/grpc/metrics/GrpcMetrics.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxNjozMDoxNVrOGhSzOQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxNzozMjowNVrOGhVD6A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzU2NDIxNw==", "bodyText": "I see that this takes the place of the meter that used to be registered in MetricsSupport. There is no replacement here for the counter that MetricsSupport used to register. Is that intentional?", "url": "https://github.com/oracle/helidon/pull/1951#discussion_r437564217", "createdAt": "2020-06-09T16:30:15Z", "author": {"login": "tjquinno"}, "path": "grpc/metrics/src/main/java/io/helidon/grpc/metrics/GrpcMetrics.java", "diffHunk": "@@ -70,6 +66,19 @@\n     private static final MetricRegistry APP_REGISTRY =\n             RegistryFactory.getInstance().getRegistry(MetricRegistry.Type.APPLICATION);\n \n+    static {\n+        HelidonFeatures.register(\"gRPC Server\", \"Metrics\");\n+        HelidonFeatures.register(\"gRPC Client\", \"Metrics\");\n+\n+        VENDOR_REGISTRY.meter(org.eclipse.microprofile.metrics.Metadata.builder()\n+                .withName(\"grpc.requests.meter\")\n+                .withDisplayName(\"Meter for overall gRPC requests\")\n+                .withDescription(\"Each gRPC request will mark the meter to see overall throughput\")\n+                .withType(MetricType.METERED)\n+                .withUnit(MetricUnits.NONE)\n+                .build());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "29436519f30391af769117678a0ff9cf417cc19f"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzYwMTI1Ng==", "bodyText": "Yes -- meter already has a counter, so having a separate counter is a bit pointless.", "url": "https://github.com/oracle/helidon/pull/1951#discussion_r437601256", "createdAt": "2020-06-09T17:32:05Z", "author": {"login": "aseovic"}, "path": "grpc/metrics/src/main/java/io/helidon/grpc/metrics/GrpcMetrics.java", "diffHunk": "@@ -70,6 +66,19 @@\n     private static final MetricRegistry APP_REGISTRY =\n             RegistryFactory.getInstance().getRegistry(MetricRegistry.Type.APPLICATION);\n \n+    static {\n+        HelidonFeatures.register(\"gRPC Server\", \"Metrics\");\n+        HelidonFeatures.register(\"gRPC Client\", \"Metrics\");\n+\n+        VENDOR_REGISTRY.meter(org.eclipse.microprofile.metrics.Metadata.builder()\n+                .withName(\"grpc.requests.meter\")\n+                .withDisplayName(\"Meter for overall gRPC requests\")\n+                .withDescription(\"Each gRPC request will mark the meter to see overall throughput\")\n+                .withType(MetricType.METERED)\n+                .withUnit(MetricUnits.NONE)\n+                .build());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzU2NDIxNw=="}, "originalCommit": {"oid": "29436519f30391af769117678a0ff9cf417cc19f"}, "originalPosition": 34}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 507, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}