{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM1MTc0MDk0", "number": 2014, "title": "JPA tests and native-image build changes", "bodyText": "Added small set of JPA integration tests to verify MP and native image.\nFound 3 issues with loading entity beans and session initialization. Those were fixed so tests pass with native image too.", "createdAt": "2020-06-16T12:14:47Z", "url": "https://github.com/oracle/helidon/pull/2014", "merged": true, "mergeCommit": {"oid": "1c6cf71ab183db9252ec8cd821ebe32b4f62fd44"}, "closed": true, "closedAt": "2020-06-19T14:49:14Z", "author": {"login": "Tomas-Kraus"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcr5eSnAFqTQzMTc3MzEwNw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcszuBzgFqTQzNDExMDYyMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxNzczMTA3", "url": "https://github.com/oracle/helidon/pull/2014#pullrequestreview-431773107", "createdAt": "2020-06-16T18:15:05Z", "commit": {"oid": "0ee109772f13077f8437f73a5ea5e5eb8faa6860"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxODoxNTowNVrOGkneGA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxODoyMDo1NlrOGknw9A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA0ODYwMA==", "bodyText": "Do you want to keep this file ? If yes please make that a .md file ; this could be a README.md", "url": "https://github.com/oracle/helidon/pull/2014#discussion_r441048600", "createdAt": "2020-06-16T18:15:05Z", "author": {"login": "romain-grecourt"}, "path": "tests/integration/jpa/appl/NOTES.TXT", "diffHunk": "@@ -0,0 +1,56 @@\n+JPA ISSUES IN NATIVE IMAGE WITH HIBERNATE", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0ee109772f13077f8437f73a5ea5e5eb8faa6860"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA0OTIyMw==", "bodyText": "Make sure to manage all versions with properties at the top.", "url": "https://github.com/oracle/helidon/pull/2014#discussion_r441049223", "createdAt": "2020-06-16T18:16:11Z", "author": {"login": "romain-grecourt"}, "path": "tests/integration/jpa/appl/pom.xml", "diffHunk": "@@ -0,0 +1,396 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Copyright (c) 2019 Oracle and/or its affiliates. All rights reserved.\n+\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+you may not use this file except in compliance with the License.\n+You may obtain a copy of the License at\n+\n+    http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing, software\n+distributed under the License is distributed on an \"AS IS\" BASIS,\n+WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+See the License for the specific language governing permissions and\n+limitations under the License.\n+-->\n+\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+    <modelVersion>4.0.0</modelVersion>\n+\n+    <parent>\n+        <groupId>io.helidon.applications</groupId>\n+        <artifactId>helidon-mp</artifactId>\n+        <version>2.0.0-SNAPSHOT</version>\n+        <relativePath>../../../../applications/mp/pom.xml</relativePath>\n+    </parent>\n+\n+    <groupId>io.helidon.tests.integration.jpa</groupId>\n+    <artifactId>helidon-tests-integration-jpa-appl</artifactId>\n+    <name>Integration Tests: JPA MP Application</name>\n+\n+    <properties>\n+        <mainClass>io.helidon.microprofile.cdi.Main</mainClass>\n+        <mainClassH2>org.h2.tools.Server</mainClassH2>\n+        <h2.db.version>1.4.197</h2.db.version>\n+        <h2.db.password>p4ssw0rd</h2.db.password>\n+        <h2.db.port>9092</h2.db.port>\n+    </properties>\n+\n+    <dependencyManagement>\n+        <dependencies>\n+            <dependency>\n+                <!-- we need this explicit version to work with native image -->\n+                <groupId>com.h2database</groupId>\n+                <artifactId>h2</artifactId>\n+                <version>${h2.db.version}</version>\n+            </dependency>\n+            <dependency>\n+                <!-- we need this explicit version to work with native image -->\n+                <groupId>io.quarkus</groupId>\n+                <artifactId>quarkus-jdbc-h2</artifactId>\n+                <version>1.2.1.Final</version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0ee109772f13077f8437f73a5ea5e5eb8faa6860"}, "originalPosition": 54}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA0OTg5OQ==", "bodyText": "Since this pom inherits an application pom, this plugin execution should be redundant.", "url": "https://github.com/oracle/helidon/pull/2014#discussion_r441049899", "createdAt": "2020-06-16T18:17:02Z", "author": {"login": "romain-grecourt"}, "path": "tests/integration/jpa/appl/pom.xml", "diffHunk": "@@ -0,0 +1,396 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Copyright (c) 2019 Oracle and/or its affiliates. All rights reserved.\n+\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+you may not use this file except in compliance with the License.\n+You may obtain a copy of the License at\n+\n+    http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing, software\n+distributed under the License is distributed on an \"AS IS\" BASIS,\n+WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+See the License for the specific language governing permissions and\n+limitations under the License.\n+-->\n+\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+    <modelVersion>4.0.0</modelVersion>\n+\n+    <parent>\n+        <groupId>io.helidon.applications</groupId>\n+        <artifactId>helidon-mp</artifactId>\n+        <version>2.0.0-SNAPSHOT</version>\n+        <relativePath>../../../../applications/mp/pom.xml</relativePath>\n+    </parent>\n+\n+    <groupId>io.helidon.tests.integration.jpa</groupId>\n+    <artifactId>helidon-tests-integration-jpa-appl</artifactId>\n+    <name>Integration Tests: JPA MP Application</name>\n+\n+    <properties>\n+        <mainClass>io.helidon.microprofile.cdi.Main</mainClass>\n+        <mainClassH2>org.h2.tools.Server</mainClassH2>\n+        <h2.db.version>1.4.197</h2.db.version>\n+        <h2.db.password>p4ssw0rd</h2.db.password>\n+        <h2.db.port>9092</h2.db.port>\n+    </properties>\n+\n+    <dependencyManagement>\n+        <dependencies>\n+            <dependency>\n+                <!-- we need this explicit version to work with native image -->\n+                <groupId>com.h2database</groupId>\n+                <artifactId>h2</artifactId>\n+                <version>${h2.db.version}</version>\n+            </dependency>\n+            <dependency>\n+                <!-- we need this explicit version to work with native image -->\n+                <groupId>io.quarkus</groupId>\n+                <artifactId>quarkus-jdbc-h2</artifactId>\n+                <version>1.2.1.Final</version>\n+            </dependency>\n+        </dependencies>\n+    </dependencyManagement>\n+\n+    <dependencies>\n+        <dependency>\n+            <groupId>io.helidon.tests.integration.jpa</groupId>\n+            <artifactId>helidon-tests-integration-jpa-model</artifactId>\n+            <version>${project.version}</version>\n+        </dependency>\n+        <dependency>\n+            <groupId>io.helidon.microprofile.server</groupId>\n+            <artifactId>helidon-microprofile-server</artifactId>\n+        </dependency>\n+        <dependency>\n+            <groupId>io.helidon.config</groupId>\n+            <artifactId>helidon-config-yaml</artifactId>\n+        </dependency>\n+        <dependency>\n+            <groupId>io.helidon.microprofile.config</groupId>\n+            <artifactId>helidon-microprofile-config</artifactId>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.jboss</groupId>\n+            <artifactId>jandex</artifactId>\n+        </dependency>\n+        <dependency>\n+            <groupId>jakarta.persistence</groupId>\n+            <artifactId>jakarta.persistence-api</artifactId>\n+        </dependency>\n+        <dependency>\n+            <groupId>jakarta.transaction</groupId>\n+            <artifactId>jakarta.transaction-api</artifactId>\n+        </dependency>\n+        <dependency>\n+            <groupId>jakarta.json</groupId>\n+            <artifactId>jakarta.json-api</artifactId>\n+        </dependency>\n+        <dependency>\n+            <groupId>io.helidon.integrations.cdi</groupId>\n+            <artifactId>helidon-integrations-cdi-delegates</artifactId>\n+            <scope>runtime</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>io.helidon.integrations.cdi</groupId>\n+            <artifactId>helidon-integrations-cdi-hibernate</artifactId>\n+            <scope>compile</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>io.helidon.integrations.cdi</groupId>\n+            <artifactId>helidon-integrations-cdi-jta-weld</artifactId>\n+            <scope>compile</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.jboss</groupId>\n+            <artifactId>jboss-transaction-spi</artifactId>\n+        </dependency>\n+        <dependency>\n+            <groupId>io.helidon.integrations.cdi</groupId>\n+            <artifactId>helidon-integrations-cdi-jta</artifactId>\n+            <scope>compile</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>io.helidon.integrations.cdi</groupId>\n+            <artifactId>helidon-integrations-cdi-datasource-hikaricp</artifactId>\n+            <scope>runtime</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>io.helidon.integrations.cdi</groupId>\n+            <artifactId>helidon-integrations-cdi-jpa</artifactId>\n+            <scope>runtime</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>io.quarkus</groupId>\n+            <artifactId>quarkus-jdbc-h2</artifactId>\n+            <scope>runtime</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>com.h2database</groupId>\n+            <artifactId>h2</artifactId>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.junit.jupiter</groupId>\n+            <artifactId>junit-jupiter-api</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.hamcrest</groupId>\n+            <artifactId>hamcrest-all</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+\n+    </dependencies>\n+\n+    <build>\n+        <plugins>\n+            <plugin>\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-dependency-plugin</artifactId>\n+                <executions>\n+                    <execution>\n+                        <id>copy-libs</id>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0ee109772f13077f8437f73a5ea5e5eb8faa6860"}, "originalPosition": 156}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA1Mjk1Mg==", "bodyText": "Since you have a common parent pom, the versions and plugin configuration can be moved up.", "url": "https://github.com/oracle/helidon/pull/2014#discussion_r441052952", "createdAt": "2020-06-16T18:20:24Z", "author": {"login": "romain-grecourt"}, "path": "tests/integration/jpa/simple/pom.xml", "diffHunk": "@@ -0,0 +1,185 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Copyright (c) 2019 Oracle and/or its affiliates. All rights reserved.\n+\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+you may not use this file except in compliance with the License.\n+You may obtain a copy of the License at\n+\n+    http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing, software\n+distributed under the License is distributed on an \"AS IS\" BASIS,\n+WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+See the License for the specific language governing permissions and\n+limitations under the License.\n+-->\n+\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+    <modelVersion>4.0.0</modelVersion>\n+\n+    <parent>\n+        <groupId>io.helidon.tests.integration.jpa</groupId>\n+        <artifactId>helidon-tests-integration-jpa-project</artifactId>\n+        <version>2.0.0-SNAPSHOT</version>\n+        <relativePath>../pom.xml</relativePath>\n+    </parent>\n+\n+    <groupId>io.helidon.tests.integration.jpa</groupId>\n+    <artifactId>helidon-tests-integration-jpa-simple</artifactId>\n+    <name>Integration Tests: JPA Simple Tests</name>\n+\n+    <dependencies>\n+        <dependency>\n+            <groupId>io.helidon.tests.integration.jpa</groupId>\n+            <artifactId>helidon-tests-integration-jpa-model</artifactId>\n+            <version>${project.version}</version>\n+        </dependency>\n+        <dependency>\n+            <groupId>io.helidon.integrations.cdi</groupId>\n+            <artifactId>helidon-integrations-cdi-jta-weld</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>io.helidon.integrations.cdi</groupId>\n+            <artifactId>helidon-integrations-cdi-datasource-hikaricp</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>io.helidon.integrations.cdi</groupId>\n+            <artifactId>helidon-integrations-cdi-jpa</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>io.helidon.integrations.cdi</groupId>\n+            <artifactId>helidon-integrations-cdi-hibernate</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>io.helidon.microprofile.cdi</groupId>\n+            <artifactId>helidon-microprofile-cdi</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>io.helidon.integrations.cdi</groupId>\n+            <artifactId>helidon-integrations-cdi-delegates</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>io.helidon.integrations.cdi</groupId>\n+            <artifactId>helidon-integrations-cdi-reference-counted-context</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+\n+        <dependency>\n+            <groupId>jakarta.persistence</groupId>\n+            <artifactId>jakarta.persistence-api</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>jakarta.transaction</groupId>\n+            <artifactId>jakarta.transaction-api</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>jakarta.enterprise</groupId>\n+            <artifactId>jakarta.enterprise.cdi-api</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>jakarta.activation</groupId>\n+            <artifactId>jakarta.activation-api</artifactId>\n+        </dependency>\n+        <dependency>\n+            <groupId>jakarta.validation</groupId>\n+            <artifactId>jakarta.validation-api</artifactId>\n+        </dependency>\n+\n+        <dependency>\n+            <groupId>com.h2database</groupId>\n+            <artifactId>h2</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+\n+        <dependency>\n+            <groupId>org.junit.jupiter</groupId>\n+            <artifactId>junit-jupiter-api</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.hamcrest</groupId>\n+            <artifactId>hamcrest-all</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+\n+        <dependency>\n+            <groupId>org.jboss</groupId>\n+            <artifactId>jandex</artifactId>\n+            <scope>runtime</scope>\n+        </dependency>\n+\n+    </dependencies>\n+\n+    <build>\n+        <plugins>\n+            <plugin>\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-dependency-plugin</artifactId>\n+                <executions>\n+                    <execution>\n+                        <id>copy-libs</id>\n+                    </execution>\n+                </executions>\n+            </plugin>\n+           <plugin>\n+                <groupId>org.jboss.jandex</groupId>\n+                <artifactId>jandex-maven-plugin</artifactId>\n+                <executions>\n+                    <execution>\n+                        <id>make-index</id>\n+                        <goals>\n+                            <goal>jandex</goal>\n+                        </goals>\n+                        <phase>process-classes</phase>\n+                    </execution>\n+                </executions>\n+            </plugin>\n+            <plugin>\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-surefire-plugin</artifactId>\n+                <version>${version.plugin.surefire}</version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0ee109772f13077f8437f73a5ea5e5eb8faa6860"}, "originalPosition": 152}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA1MzQyOA==", "bodyText": "Move versions and plugin configuration to the parent pom", "url": "https://github.com/oracle/helidon/pull/2014#discussion_r441053428", "createdAt": "2020-06-16T18:20:56Z", "author": {"login": "romain-grecourt"}, "path": "tests/integration/jpa/model/pom.xml", "diffHunk": "@@ -0,0 +1,90 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Copyright (c) 2019 Oracle and/or its affiliates. All rights reserved.\n+\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+you may not use this file except in compliance with the License.\n+You may obtain a copy of the License at\n+\n+    http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing, software\n+distributed under the License is distributed on an \"AS IS\" BASIS,\n+WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+See the License for the specific language governing permissions and\n+limitations under the License.\n+-->\n+\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+    <modelVersion>4.0.0</modelVersion>\n+\n+    <properties>\n+        <version.plugin.jandex>1.0.6</version.plugin.jandex>\n+    </properties>\n+\n+    <parent>\n+        <groupId>io.helidon.tests.integration.jpa</groupId>\n+        <artifactId>helidon-tests-integration-jpa-project</artifactId>\n+        <version>2.0.0-SNAPSHOT</version>\n+        <relativePath>../pom.xml</relativePath>\n+    </parent>\n+\n+    <groupId>io.helidon.tests.integration.jpa</groupId>\n+    <artifactId>helidon-tests-integration-jpa-model</artifactId>\n+    <name>Integration Tests: JPA Model</name>\n+\n+    <dependencies>\n+        <dependency>\n+            <groupId>jakarta.persistence</groupId>\n+            <artifactId>jakarta.persistence-api</artifactId>\n+            <scope>provided</scope>\n+        </dependency>\n+    </dependencies>\n+\n+    <build>\n+        <pluginManagement>\n+            <plugins>\n+                <plugin>\n+                    <groupId>org.jboss.jandex</groupId>\n+                    <artifactId>jandex-maven-plugin</artifactId>\n+                    <version>${version.plugin.jandex}</version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0ee109772f13077f8437f73a5ea5e5eb8faa6860"}, "originalPosition": 52}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0a983567aaf00ea5aea29ab83fd59724f4e8f99e", "author": {"user": {"login": "Tomas-Kraus", "name": "Tom\u00e1\u0161 Kraus"}}, "url": "https://github.com/oracle/helidon/commit/0a983567aaf00ea5aea29ab83fd59724f4e8f99e", "committedDate": "2020-06-19T10:19:15Z", "message": "JPA tests and native-image build changes\n\nSigned-off-by: Tomas Kraus <Tomas.Kraus@oracle.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fc0f8ebe9bcaa11220a8cab4d52bb01882c29a81", "author": {"user": {"login": "tomas-langer", "name": "Tomas Langer"}}, "url": "https://github.com/oracle/helidon/commit/fc0f8ebe9bcaa11220a8cab4d52bb01882c29a81", "committedDate": "2020-06-19T11:39:26Z", "message": "Update native image for JPA.\n* use Helidon h2 driver\n* move native configuration to correct modules\n\nSigned-off-by: Tomas Langer <tomas.langer@oracle.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0MTEwNjIw", "url": "https://github.com/oracle/helidon/pull/2014#pullrequestreview-434110620", "createdAt": "2020-06-19T14:14:11Z", "commit": {"oid": "fc0f8ebe9bcaa11220a8cab4d52bb01882c29a81"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 583, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}