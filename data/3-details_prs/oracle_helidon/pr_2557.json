{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMwMjk1NTg5", "number": 2557, "title": "MySQL driver support for JPA/Hibernate in native image", "bodyText": "To run the tests, build Helidon and then execute:\ncd <helidon_root>/tests/integration/jpa\nmvn clean install -Dmysql -Pdocker -pl model,appl -Pnative-image -Dnative-image\n\nTests run: 16, Failures: 0, Errors: 0, Skipped: 0", "createdAt": "2020-12-01T13:18:14Z", "url": "https://github.com/oracle/helidon/pull/2557", "merged": true, "mergeCommit": {"oid": "4193c457ce961d7f3a8392882174655e8dbbaf68"}, "closed": true, "closedAt": "2020-12-09T22:25:12Z", "author": {"login": "Tomas-Kraus"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdh55E2ABqjQwNTcxNzMzODk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdkjzITAFqTU0ODUyOTc5Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1699f9bd885116186e294f402b2f9534988c0289", "author": {"user": {"login": "Tomas-Kraus", "name": "Tom\u00e1\u0161 Kraus"}}, "url": "https://github.com/oracle/helidon/commit/1699f9bd885116186e294f402b2f9534988c0289", "committedDate": "2020-12-01T13:10:46Z", "message": "MySQL integration test sdded as parallel stage to Jenkinsfile.\n\nSigned-off-by: Tomas Kraus <Tomas.Kraus@oracle.com>"}, "afterCommit": {"oid": "3a933314ecd84ce2b5c001f883f506344bc26090", "author": {"user": {"login": "Tomas-Kraus", "name": "Tom\u00e1\u0161 Kraus"}}, "url": "https://github.com/oracle/helidon/commit/3a933314ecd84ce2b5c001f883f506344bc26090", "committedDate": "2020-12-01T13:23:02Z", "message": "MySQL, MariaDB and PostgreSQL driver support for JPA/Hibernate.\nMySQL integration test added as parallel stage to Jenkinsfile.\n\nSigned-off-by: Tomas Kraus <Tomas.Kraus@oracle.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3a933314ecd84ce2b5c001f883f506344bc26090", "author": {"user": {"login": "Tomas-Kraus", "name": "Tom\u00e1\u0161 Kraus"}}, "url": "https://github.com/oracle/helidon/commit/3a933314ecd84ce2b5c001f883f506344bc26090", "committedDate": "2020-12-01T13:23:02Z", "message": "MySQL, MariaDB and PostgreSQL driver support for JPA/Hibernate.\nMySQL integration test added as parallel stage to Jenkinsfile.\n\nSigned-off-by: Tomas Kraus <Tomas.Kraus@oracle.com>"}, "afterCommit": {"oid": "b457d7dae305d4aa15115ead13917f9cb22e9451", "author": {"user": {"login": "Tomas-Kraus", "name": "Tom\u00e1\u0161 Kraus"}}, "url": "https://github.com/oracle/helidon/commit/b457d7dae305d4aa15115ead13917f9cb22e9451", "committedDate": "2020-12-01T13:30:37Z", "message": "MySQL, MariaDB and PostgreSQL driver support for JPA/Hibernate.\nMySQL integration test added as parallel stage to Jenkinsfile.\n\nSigned-off-by: Tomas Kraus <Tomas.Kraus@oracle.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3MjIxMjA3", "url": "https://github.com/oracle/helidon/pull/2557#pullrequestreview-547221207", "createdAt": "2020-12-08T13:14:23Z", "commit": {"oid": "a74b9b6c786a273f9e9e596c15f4fa412231ff21"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxMzoxNDoyNFrOIBag-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxMzoxOTo0NFrOIBa2eA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODM1MzkxNQ==", "bodyText": "ojdbc should not be part of this PR", "url": "https://github.com/oracle/helidon/pull/2557#discussion_r538353915", "createdAt": "2020-12-08T13:14:24Z", "author": {"login": "tomas-langer"}, "path": "dependencies/pom.xml", "diffHunk": "@@ -100,7 +100,8 @@\n         <version.lib.mockito>2.23.4</version.lib.mockito>\n         <version.lib.mongodb.reactivestreams>1.11.0</version.lib.mongodb.reactivestreams>\n         <version.lib.mssql-jdbc>8.4.1.jre8</version.lib.mssql-jdbc>\n-        <version.lib.mysql-connector-java>8.0.11</version.lib.mysql-connector-java>\n+        <version.lib.oracle.ojdbc10>19.3.0.0</version.lib.oracle.ojdbc10>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a74b9b6c786a273f9e9e596c15f4fa412231ff21"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODM1NDEzNA==", "bodyText": "This is unrelated to this PR", "url": "https://github.com/oracle/helidon/pull/2557#discussion_r538354134", "createdAt": "2020-12-08T13:14:35Z", "author": {"login": "tomas-langer"}, "path": "etc/dependency-check-suppression.xml", "diffHunk": "@@ -123,4 +123,29 @@\n    <vulnerabilityName>CVE-2020-15250</vulnerabilityName>\n </suppress>\n \n+<!-- grpc -->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a74b9b6c786a273f9e9e596c15f4fa412231ff21"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODM1NjIxOA==", "bodyText": "This is not very useful - please add ex as parameter to log statement, so we get a stack trace when running in fine or finest log level", "url": "https://github.com/oracle/helidon/pull/2557#discussion_r538356218", "createdAt": "2020-12-08T13:16:44Z", "author": {"login": "tomas-langer"}, "path": "tests/integration/dbclient/jdbc/src/test/java/io/helidon/tests/integration/dbclient/jdbc/init/CheckIT.java", "diffHunk": "@@ -71,10 +76,15 @@ public void accept(Config config) {\n                     connected = true;\n                     return;\n                 } catch (SQLException ex) {\n-                    LOGGER.info(() -> String.format(\"Connection check: %s\", ex.getMessage()));\n+                    LOGGER.fine(() -> String.format(\"Connection check: %s\", ex.getMessage()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a74b9b6c786a273f9e9e596c15f4fa412231ff21"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODM1NzgyMw==", "bodyText": "This seems too complicated.\nMaybe extract to method and catch the NoSuchMethodException just once?", "url": "https://github.com/oracle/helidon/pull/2557#discussion_r538357823", "createdAt": "2020-12-08T13:18:15Z", "author": {"login": "tomas-langer"}, "path": "tests/integration/jpa/appl/src/main/java/io/helidon/tests/integration/jpa/appl/Dispatcher.java", "diffHunk": "@@ -106,44 +110,48 @@ private Handle getHandle(final String name) {\n         }\n         final String className = name.substring(0, serpPos);\n         final String methodName = name.substring(serpPos + 1, nameLen);\n-        if (\"InsertIT\".equals(className)) {\n-            try {\n-                return new Handle(\n-                        insertIt,\n-                        InsertIT.class.getDeclaredMethod(methodName, TestResult.class),\n-                        result);\n-            } catch (NoSuchMethodException ex) {\n-                result.throwed(ex);\n-            }\n-        } else if (\"UpdateIT\".equals(className)) {\n-            try {\n-                return new Handle(\n-                        updateIt,\n-                        UpdateIT.class.getDeclaredMethod(methodName, TestResult.class),\n-                        result);\n-            } catch (NoSuchMethodException ex) {\n-                result.throwed(ex);\n-            }\n-        } else if (\"DeleteIT\".equals(className)) {\n-            try {\n-                return new Handle(\n-                        deleteIt,\n-                        DeleteIT.class.getDeclaredMethod(methodName, TestResult.class),\n-                        result);\n-            } catch (NoSuchMethodException ex) {\n-                result.throwed(ex);\n-            }\n-        } else if (\"QueryIT\".equals(className)) {\n-            try {\n-                return new Handle(\n-                        queryIt,\n-                        QueryIT.class.getDeclaredMethod(methodName, TestResult.class),\n-                        result);\n-            } catch (NoSuchMethodException ex) {\n-                result.throwed(ex);\n-            }\n-        } else {\n+        if (null == className) {\n             result.fail(\"Unknown test class: \" + className);\n+        } else switch (className) {\n+            case \"InsertIT\":", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a74b9b6c786a273f9e9e596c15f4fa412231ff21"}, "originalPosition": 88}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODM1OTQxNg==", "bodyText": "please remove the commented out text", "url": "https://github.com/oracle/helidon/pull/2557#discussion_r538359416", "createdAt": "2020-12-08T13:19:44Z", "author": {"login": "tomas-langer"}, "path": "tests/integration/jpa/appl/src/main/resources/META-INF/microprofile-config.properties", "diffHunk": "@@ -17,7 +17,14 @@\n mp.initializer.allow=true\n mp.initializer.no-warn=true\n features.print-details=true\n-javax.sql.DataSource.test.dataSource.url=jdbc:h2:tcp://localhost:9092/test\n-javax.sql.DataSource.test.dataSource.user=sa\n-javax.sql.DataSource.test.dataSource.password=\n-javax.sql.DataSource.test.dataSourceClassName=org.h2.jdbcx.JdbcDataSource\n\\ No newline at end of file\n+javax.sql.DataSource.test.dataSource.url=${db.url}\n+javax.sql.DataSource.test.dataSource.user=${db.user}\n+javax.sql.DataSource.test.dataSource.password=${db.password}\n+javax.sql.DataSource.test.dataSourceClassName=${db.datasource}\n+\n+#        \"org.postgresql.xa.PGXADataSource\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a74b9b6c786a273f9e9e596c15f4fa412231ff21"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3MzY2Mjg2", "url": "https://github.com/oracle/helidon/pull/2557#pullrequestreview-547366286", "createdAt": "2020-12-08T15:49:03Z", "commit": {"oid": "e0539855007e75e4f2a601a0001bfbfaff03ac26"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b78a342aa6804cb63748a279acb30365cc9f943f", "author": {"user": {"login": "Tomas-Kraus", "name": "Tom\u00e1\u0161 Kraus"}}, "url": "https://github.com/oracle/helidon/commit/b78a342aa6804cb63748a279acb30365cc9f943f", "committedDate": "2020-12-08T16:09:32Z", "message": "MySQL driver support for JPA/Hibernate. MySQL integration test added as parallel stage to Jenkinsfile.\n\nSigned-off-by: Tomas Kraus <Tomas.Kraus@oracle.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e0539855007e75e4f2a601a0001bfbfaff03ac26", "author": {"user": {"login": "Tomas-Kraus", "name": "Tom\u00e1\u0161 Kraus"}}, "url": "https://github.com/oracle/helidon/commit/e0539855007e75e4f2a601a0001bfbfaff03ac26", "committedDate": "2020-12-08T14:14:26Z", "message": "Removed logger instance comments.\n\nSigned-off-by: Tomas Kraus <Tomas.Kraus@oracle.com>"}, "afterCommit": {"oid": "b78a342aa6804cb63748a279acb30365cc9f943f", "author": {"user": {"login": "Tomas-Kraus", "name": "Tom\u00e1\u0161 Kraus"}}, "url": "https://github.com/oracle/helidon/commit/b78a342aa6804cb63748a279acb30365cc9f943f", "committedDate": "2020-12-08T16:09:32Z", "message": "MySQL driver support for JPA/Hibernate. MySQL integration test added as parallel stage to Jenkinsfile.\n\nSigned-off-by: Tomas Kraus <Tomas.Kraus@oracle.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e65e858e1d45e938c9d88507602612416f6e7ac7", "author": {"user": {"login": "Tomas-Kraus", "name": "Tom\u00e1\u0161 Kraus"}}, "url": "https://github.com/oracle/helidon/commit/e65e858e1d45e938c9d88507602612416f6e7ac7", "committedDate": "2020-12-08T19:31:44Z", "message": "Added Graal VM and native image profile to test.\n\nSigned-off-by: Tomas Kraus <Tomas.Kraus@oracle.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4f98eb357b71a8a38699341d8113e8e5571d5423", "author": {"user": {"login": "Tomas-Kraus", "name": "Tom\u00e1\u0161 Kraus"}}, "url": "https://github.com/oracle/helidon/commit/4f98eb357b71a8a38699341d8113e8e5571d5423", "committedDate": "2020-12-09T15:55:10Z", "message": "Test initialization and cleanup implemented using BeforeAllCallback, ExtensionContext.Store.CloseableResource\nTest execution modified to run both Java VM and native image setups.\n\nSigned-off-by: Tomas Kraus <Tomas.Kraus@oracle.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5004cc18f4144003bf3350cbbd61f672c8ffe46d", "author": {"user": {"login": "Tomas-Kraus", "name": "Tom\u00e1\u0161 Kraus"}}, "url": "https://github.com/oracle/helidon/commit/5004cc18f4144003bf3350cbbd61f672c8ffe46d", "committedDate": "2020-12-09T18:14:10Z", "message": "Fixed rebase issue.\n\nSigned-off-by: Tomas Kraus <Tomas.Kraus@oracle.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ae600fbc437a2aea9bc18652aa51b27a65fbbd3", "author": {"user": {"login": "Tomas-Kraus", "name": "Tom\u00e1\u0161 Kraus"}}, "url": "https://github.com/oracle/helidon/commit/2ae600fbc437a2aea9bc18652aa51b27a65fbbd3", "committedDate": "2020-12-09T18:18:47Z", "message": "Fixed formating issue.\n\nSigned-off-by: Tomas Kraus <Tomas.Kraus@oracle.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "095d6e47553e0f526f13966b9f2f73bdc3b4649b", "author": {"user": {"login": "Tomas-Kraus", "name": "Tom\u00e1\u0161 Kraus"}}, "url": "https://github.com/oracle/helidon/commit/095d6e47553e0f526f13966b9f2f73bdc3b4649b", "committedDate": "2020-12-09T18:28:40Z", "message": "Added verify goal to failsafe configuration.\n\nSigned-off-by: Tomas Kraus <Tomas.Kraus@oracle.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4NDgxMzU0", "url": "https://github.com/oracle/helidon/pull/2557#pullrequestreview-548481354", "createdAt": "2020-12-09T18:31:08Z", "commit": {"oid": "2ae600fbc437a2aea9bc18652aa51b27a65fbbd3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4NTI5Nzk2", "url": "https://github.com/oracle/helidon/pull/2557#pullrequestreview-548529796", "createdAt": "2020-12-09T19:21:02Z", "commit": {"oid": "095d6e47553e0f526f13966b9f2f73bdc3b4649b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 396, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}