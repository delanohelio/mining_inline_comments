{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIzMjY1OTk5", "number": 9543, "title": "DateRange Absolute Limits & Errors", "bodyText": "Description\n\nAdding error message for incorrect Absolute time ranges\nDisable previous dates if Admin has limit setup\nDisable Apply button on errors\nHow Has This Been Tested?\n\n\n\nScreenshots (if appropriate):", "createdAt": "2020-11-18T15:28:37Z", "url": "https://github.com/Graylog2/graylog2-server/pull/9543", "merged": true, "mergeCommit": {"oid": "ac30ad73f3e9527b5c1eb9561c4081e3cfda9489"}, "closed": true, "closedAt": "2020-12-08T12:42:15Z", "author": {"login": "kyleknighted"}, "timelineItems": {"totalCount": 41, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdeCc6MgH2gAyNTIzMjY1OTk5OjZlZjQ3MjI1YjQ4MWVjODAxYTZlOTE3OGYzNTk2YTRlMDllMmFmZmM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdkJfeZAFqTU0NzE5NjQ3NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6ef47225b481ec801a6e9178f3596a4e09e2affc", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/6ef47225b481ec801a6e9178f3596a4e09e2affc", "committedDate": "2020-11-19T13:06:21Z", "message": "DateTimePicker Show Timezone (#9381)\n\n* Some Cleanup\r\n\r\n* Migrating original range options to Popover\r\n\r\n* Converting existing DateTimePicker to Popover\r\n\r\n* Migrating original range options to Popover\r\n\r\n* Updating some tests to get more passing\r\n\r\n* reverting & commenting\r\n\r\n* Updating some tests to get more passing\r\n\r\n* reverting & commenting\r\n\r\n* Show current Timerange in TimeRangeDropdown\r\n\r\n* Bold\r\n\r\n* reverting changes\r\n\r\n* lint"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7f4e0ffe3319d63d1185d4cbc5b16b23f6b1cf9e", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/7f4e0ffe3319d63d1185d4cbc5b16b23f6b1cf9e", "committedDate": "2020-11-16T17:57:07Z", "message": "update error style and time check"}, "afterCommit": {"oid": "8daa28c098816ece9045c7265dc07dd3453b154e", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/8daa28c098816ece9045c7265dc07dd3453b154e", "committedDate": "2020-11-19T16:56:00Z", "message": "flow cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b0fe3cb66b37e8e870d67df649da9d1b6a4c234", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/5b0fe3cb66b37e8e870d67df649da9d1b6a4c234", "committedDate": "2020-11-19T17:52:19Z", "message": "Some Cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "881662c01ac44a663fcf8ff7d2bd39683cdd71d0", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/881662c01ac44a663fcf8ff7d2bd39683cdd71d0", "committedDate": "2020-11-19T17:52:19Z", "message": "Migrating original range options to Popover"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "58acb074f6c03b2d42201094b4d1ae4ca9ae0cee", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/58acb074f6c03b2d42201094b4d1ae4ca9ae0cee", "committedDate": "2020-11-19T17:52:19Z", "message": "Converting existing DateTimePicker to Popover"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5963ee265c29ad6f27d08579a912ea4d0dac6791", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/5963ee265c29ad6f27d08579a912ea4d0dac6791", "committedDate": "2020-11-19T17:52:19Z", "message": "Migrating original range options to Popover"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "78db61131e7610cf417108f373c696f7d94424cb", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/78db61131e7610cf417108f373c696f7d94424cb", "committedDate": "2020-11-19T17:52:19Z", "message": "Updating some tests to get more passing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8bb6458a2099ff0ac3387c2cd22e0b68ba7c3ec", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/a8bb6458a2099ff0ac3387c2cd22e0b68ba7c3ec", "committedDate": "2020-11-19T17:52:19Z", "message": "reverting & commenting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "47862e6f565fc3e62e4e0207681c0650f0dfdc6d", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/47862e6f565fc3e62e4e0207681c0650f0dfdc6d", "committedDate": "2020-11-19T17:52:19Z", "message": "Updating some tests to get more passing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "47160d524de33caeecead9f8d0cb4b76074fd288", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/47160d524de33caeecead9f8d0cb4b76074fd288", "committedDate": "2020-11-19T17:52:19Z", "message": "reverting & commenting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cf6098d130b77d3b575cd428980f66ed4e5f4b5d", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/cf6098d130b77d3b575cd428980f66ed4e5f4b5d", "committedDate": "2020-11-19T17:52:53Z", "message": "reverting changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e5d587457d235043df445ed8af762ab432bb813", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/2e5d587457d235043df445ed8af762ab432bb813", "committedDate": "2020-11-19T17:52:53Z", "message": "lint"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5cb57e269301970551a73794b930246c12c249ca", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/5cb57e269301970551a73794b930246c12c249ca", "committedDate": "2020-11-19T17:52:53Z", "message": "Some Cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0098ce57b1cbf3997afe4f3a93b3b30680b4c9f4", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/0098ce57b1cbf3997afe4f3a93b3b30680b4c9f4", "committedDate": "2020-11-19T17:52:53Z", "message": "flowtype formik reset"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d3e3423b5a5ed5d4cdfaa54066dcb111c9005b37", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/d3e3423b5a5ed5d4cdfaa54066dcb111c9005b37", "committedDate": "2020-11-19T17:52:53Z", "message": "Relative Timerange styles"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b6d91b74d3e2a9e018bcdc4d2a7788594e3b9a8c", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/b6d91b74d3e2a9e018bcdc4d2a7788594e3b9a8c", "committedDate": "2020-11-19T17:52:53Z", "message": "snaps"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "12cee9475184cdbf938bff97e081ac273b723575", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/12cee9475184cdbf938bff97e081ac273b723575", "committedDate": "2020-11-19T17:52:53Z", "message": "started rewrite of Relative form fields"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "155c568e67f3749c957ce720ad7b92bb9939c721", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/155c568e67f3749c957ce720ad7b92bb9939c721", "committedDate": "2020-11-19T17:52:53Z", "message": "Error checking, message, and disable Apply"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "050b3e57e7fc87f52bac5be9cceb6e7c8d018861", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/050b3e57e7fc87f52bac5be9cceb6e7c8d018861", "committedDate": "2020-11-19T17:52:53Z", "message": "wrong select value"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f73aee2da5bf4066b51fee898aa68d7ee039670", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/2f73aee2da5bf4066b51fee898aa68d7ee039670", "committedDate": "2020-11-19T17:52:54Z", "message": "tests and snaps"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "30aa634994960aa68f0b76f754e377c755980980", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/30aa634994960aa68f0b76f754e377c755980980", "committedDate": "2020-11-19T17:52:54Z", "message": "most of the flow errors except AbsoluteRange"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c37d6d15dab3677fd2209368b55a1b494caf63b1", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/c37d6d15dab3677fd2209368b55a1b494caf63b1", "committedDate": "2020-11-19T17:52:54Z", "message": "lint"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "92a1f27307d4d8e0f6fc3fe68508de38410d2364", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/92a1f27307d4d8e0f6fc3fe68508de38410d2364", "committedDate": "2020-11-19T17:47:29Z", "message": "tests"}, "afterCommit": {"oid": "9962f1cce1da69bd2199c51a13c7d07410c2a38c", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/9962f1cce1da69bd2199c51a13c7d07410c2a38c", "committedDate": "2020-11-19T18:02:19Z", "message": "tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a095af4568d1a93ef3bf6ba191181e53c00679d", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/2a095af4568d1a93ef3bf6ba191181e53c00679d", "committedDate": "2020-11-19T20:21:35Z", "message": "oh, snap!"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "13ca4f8a6d13d95e3cac81a1000d5b9879095422", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/13ca4f8a6d13d95e3cac81a1000d5b9879095422", "committedDate": "2020-11-19T20:21:58Z", "message": "Absolute limits in calendar"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f1c773ef6817ee9c8b204fafd9f7bdc98c53c63", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/6f1c773ef6817ee9c8b204fafd9f7bdc98c53c63", "committedDate": "2020-11-19T20:21:58Z", "message": "Absolute limits in calendar"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "536b6059e8f497db0a6ade21386e2f159b64dd42", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/536b6059e8f497db0a6ade21386e2f159b64dd42", "committedDate": "2020-11-19T20:21:58Z", "message": "Cleanup and disable Absolute Apply when dates arent correct"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2d461410322a8037ee1bb3178c14b38ececc1851", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/2d461410322a8037ee1bb3178c14b38ececc1851", "committedDate": "2020-11-19T20:21:58Z", "message": "update error style and time check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c7a4a5d972896b855ab87c1593a2f069379e777", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/4c7a4a5d972896b855ab87c1593a2f069379e777", "committedDate": "2020-11-19T20:21:58Z", "message": "flow cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7ea565302d74d29c092d210b41222363f37d400", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/b7ea565302d74d29c092d210b41222363f37d400", "committedDate": "2020-11-19T20:21:58Z", "message": "tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e10b3fc70ff7f84cff96e0b0517ddea7c3d8103e", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/e10b3fc70ff7f84cff96e0b0517ddea7c3d8103e", "committedDate": "2020-11-19T20:23:40Z", "message": "oh, snap!"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9962f1cce1da69bd2199c51a13c7d07410c2a38c", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/9962f1cce1da69bd2199c51a13c7d07410c2a38c", "committedDate": "2020-11-19T18:02:19Z", "message": "tests"}, "afterCommit": {"oid": "e10b3fc70ff7f84cff96e0b0517ddea7c3d8103e", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/e10b3fc70ff7f84cff96e0b0517ddea7c3d8103e", "committedDate": "2020-11-19T20:23:40Z", "message": "oh, snap!"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea574cc9f1582e9c7db3d377de0453bd0a8aff06", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/ea574cc9f1582e9c7db3d377de0453bd0a8aff06", "committedDate": "2020-11-19T20:46:51Z", "message": "fix setstate error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1f4669a6ff1d08de39066df0fba6ec2c0742f7a7", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/1f4669a6ff1d08de39066df0fba6ec2c0742f7a7", "committedDate": "2020-11-24T23:39:53Z", "message": "Merge branch 'feature/DateTimeRange' into dtp_absolute_limit_error\n\n# Conflicts:\n#\tgraylog2-web-interface/src/views/components/searchbar/DateInputWithPicker.jsx\n#\tgraylog2-web-interface/src/views/components/searchbar/DateInputWithPicker.test.jsx\n#\tgraylog2-web-interface/src/views/components/searchbar/__snapshots__/SearchBarForm.test.jsx.snap\n#\tgraylog2-web-interface/src/views/components/searchbar/date-time-picker/AbsoluteRangeField.jsx\n#\tgraylog2-web-interface/src/views/components/searchbar/date-time-picker/TimeRangeDropdown.jsx"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4eef66d5593a8f7b233219d25b738fef03aa83fb", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/4eef66d5593a8f7b233219d25b738fef03aa83fb", "committedDate": "2020-12-03T15:16:04Z", "message": "snapshot update"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2MTk5NDAw", "url": "https://github.com/Graylog2/graylog2-server/pull/9543#pullrequestreview-546199400", "createdAt": "2020-12-07T14:27:18Z", "commit": {"oid": "4eef66d5593a8f7b233219d25b738fef03aa83fb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNDoyNzoxOFrOIApVmw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNDoyNzoxOFrOIApVmw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzU0ODE4Nw==", "bodyText": "Why did you choose this kind of validation over the Formik validation?", "url": "https://github.com/Graylog2/graylog2-server/pull/9543#discussion_r537548187", "createdAt": "2020-12-07T14:27:18Z", "author": {"login": "linuspahl"}, "path": "graylog2-web-interface/src/views/components/searchbar/date-time-picker/AbsoluteRangeField.jsx", "diffHunk": "@@ -153,22 +162,36 @@ const fieldUpdate = (value) => {\n   };\n };\n \n-const AbsoluteRangeField = ({ disabled, originalTimeRange, from }: Props) => {\n+const _isDayAfter = ({ from, to }) => {\n+  if (new Date(from) > new Date(to)) {\n+    return 'From date can not be before the Until date.';\n+  }\n+\n+  return '';\n+};\n+\n+const AbsoluteRangeField = ({ disabled, limitDuration, from, currentTimerange, setDisableApply }: Props) => {\n   const range = from ? 'from' : 'to';\n   const hourIcon = useRef(TIME_ICON_MID);\n+  const [timeRangeError, setTimeRangeError] = useState('');\n+\n+  useEffect(() => {\n+    setTimeRangeError(_isDayAfter(currentTimerange));\n+  }, [currentTimerange]);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4eef66d5593a8f7b233219d25b738fef03aa83fb"}, "originalPosition": 74}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a3d5b38a9dedb5c93e5cd39c41e8145af119bf34", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/a3d5b38a9dedb5c93e5cd39c41e8145af119bf34", "committedDate": "2020-12-07T20:20:46Z", "message": "Update disabledApply, fix Relative All Time, update error messages for Absolute timerange"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3267e3d3a99c6ab3a3016e90c23d8a0a65676af2", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/3267e3d3a99c6ab3a3016e90c23d8a0a65676af2", "committedDate": "2020-12-07T20:40:47Z", "message": "flow"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "451cec78bec26d35194be4a5a0986d8aa883b07b", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/451cec78bec26d35194be4a5a0986d8aa883b07b", "committedDate": "2020-12-07T20:46:10Z", "message": "jest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "285688c698c41bc075e8c077699ae1facaaa9d23", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/285688c698c41bc075e8c077699ae1facaaa9d23", "committedDate": "2020-12-07T21:07:56Z", "message": "lint"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3MTk2NDc0", "url": "https://github.com/Graylog2/graylog2-server/pull/9543#pullrequestreview-547196474", "createdAt": "2020-12-08T12:42:02Z", "commit": {"oid": "285688c698c41bc075e8c077699ae1facaaa9d23"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3345, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}