{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA1MDQ4ODQ3", "number": 7900, "title": "Typing wrapped enzyme/testing-library functions again.", "bodyText": "Description\n\nMotivation and Context\n\n\nDue to creating untyped wrappers for enzyme/testing-library to include\ncontext providers automatically, usage of these exported functions were\nuntyped too, preventing type error detection and completions in IDEs.\nThis PR is adding back typing information for these and fixes the\nuncovered type errors. As testing-library's get*/query* functions now\nreturn plain HTMLElements, a asElement function was introduced,\nmerely for casting an element to a specified type. At the same time, a\ntype check (through instanceof) is performed, which functions as a\ntype assert. If it fails, an error is thrown that aborts the test.\nHow Has This Been Tested?\n\n\n\nScreenshots (if appropriate):\nTypes of changes\n\n\n Bug fix (non-breaking change which fixes an issue)\n New feature (non-breaking change which adds functionality)\n Refactoring (non-breaking change)\n Breaking change (fix or feature that would cause existing functionality to change)\n\nChecklist:\n\n\n\n My code follows the code style of this project.\n My change requires a change to the documentation.\n I have updated the documentation accordingly.\n I have read the CONTRIBUTING document.\n I have added tests to cover my changes.", "createdAt": "2020-04-17T10:20:22Z", "url": "https://github.com/Graylog2/graylog2-server/pull/7900", "merged": true, "mergeCommit": {"oid": "ca7ec3dd649083324bb1162cac002520d2884600"}, "closed": true, "closedAt": "2020-04-21T12:13:43Z", "author": {"login": "dennisoelkers"}, "timelineItems": {"totalCount": 29, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcZeIsNABqjMyNTE0OTA2OTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcZwG1lAFqTM5NzE0MzE3Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0975cce1daa30c36e437de4f42e1a6d60967b9d8", "author": {"user": {"login": "dennisoelkers", "name": "Dennis Oelkers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/0975cce1daa30c36e437de4f42e1a6d60967b9d8", "committedDate": "2020-04-17T10:46:10Z", "message": "Fixing linter hints."}, "afterCommit": {"oid": "4b2de8a6c7d805edbc5c2bcd0469b767c933d519", "author": {"user": {"login": "dennisoelkers", "name": "Dennis Oelkers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/4b2de8a6c7d805edbc5c2bcd0469b767c933d519", "committedDate": "2020-04-20T12:20:42Z", "message": "Fixing linter hints."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2NTMxMjYx", "url": "https://github.com/Graylog2/graylog2-server/pull/7900#pullrequestreview-396531261", "createdAt": "2020-04-20T14:53:57Z", "commit": {"oid": "843a43cc3e1d15bbaf80c0f06ced8f2c6bfaee9e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2NTM3OTcy", "url": "https://github.com/Graylog2/graylog2-server/pull/7900#pullrequestreview-396537972", "createdAt": "2020-04-20T15:00:46Z", "commit": {"oid": "843a43cc3e1d15bbaf80c0f06ced8f2c6bfaee9e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNTowMDo0NlrOGIY6Cg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNTowMDo0NlrOGIY6Cg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQ0OTg2Ng==", "bodyText": "This import could be shortened to\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            import { asElement } from '../../../../test/wrappedTestingLibrary';\n          \n          \n            \n            import { asElement } from 'wrappedTestingLibrary';", "url": "https://github.com/Graylog2/graylog2-server/pull/7900#discussion_r411449866", "createdAt": "2020-04-20T15:00:46Z", "author": {"login": "kyleknighted"}, "path": "graylog2-web-interface/src/views/components/widgets/ReplaySearchButton.test.jsx", "diffHunk": "@@ -6,6 +6,7 @@ import { createElasticsearchQueryString } from 'views/logic/queries/Query';\n import type { ElasticsearchQueryString, TimeRange } from 'views/logic/queries/Query';\n import DrilldownContext from '../contexts/DrilldownContext';\n import ReplaySearchButton from './ReplaySearchButton';\n+import { asElement } from '../../../../test/wrappedTestingLibrary';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "843a43cc3e1d15bbaf80c0f06ced8f2c6bfaee9e"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2NTM4Nzgw", "url": "https://github.com/Graylog2/graylog2-server/pull/7900#pullrequestreview-396538780", "createdAt": "2020-04-20T15:01:43Z", "commit": {"oid": "843a43cc3e1d15bbaf80c0f06ced8f2c6bfaee9e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNTowMTo0M1rOGIY8yg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNTowMTo0M1rOGIY8yg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQ1MDU3MA==", "bodyText": "This import could be shortened to\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            import { asElement } from '../../../../test/wrappedTestingLibrary';\n          \n          \n            \n            import { asElement } from 'wrappedTestingLibrary';", "url": "https://github.com/Graylog2/graylog2-server/pull/7900#discussion_r411450570", "createdAt": "2020-04-20T15:01:43Z", "author": {"login": "kyleknighted"}, "path": "graylog2-web-interface/src/views/components/dashboard/BigDisplayModeConfiguration.test.jsx", "diffHunk": "@@ -11,6 +11,7 @@ import Query from 'views/logic/queries/Query';\n import ViewState from 'views/logic/views/ViewState';\n import type { ViewStateMap } from 'views/logic/views/View';\n import BigDisplayModeConfiguration from './BigDisplayModeConfiguration';\n+import { asElement } from '../../../../test/wrappedTestingLibrary';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "843a43cc3e1d15bbaf80c0f06ced8f2c6bfaee9e"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2NTM5MTUx", "url": "https://github.com/Graylog2/graylog2-server/pull/7900#pullrequestreview-396539151", "createdAt": "2020-04-20T15:02:08Z", "commit": {"oid": "843a43cc3e1d15bbaf80c0f06ced8f2c6bfaee9e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNTowMjowOFrOGIY-Aw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNTowMjowOFrOGIY-Aw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQ1MDg4Mw==", "bodyText": "This import could be shortened to\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            import { asElement } from '../../../test/wrappedTestingLibrary';\n          \n          \n            \n            import { asElement } from 'wrappedTestingLibrary';", "url": "https://github.com/Graylog2/graylog2-server/pull/7900#discussion_r411450883", "createdAt": "2020-04-20T15:02:08Z", "author": {"login": "kyleknighted"}, "path": "graylog2-web-interface/src/components/search/SurroundingSearchButton.test.jsx", "diffHunk": "@@ -5,6 +5,7 @@ import { cleanup, fireEvent, render } from 'wrappedTestingLibrary';\n import DrilldownContext from 'views/components/contexts/DrilldownContext';\n import SurroundingSearchButton from './SurroundingSearchButton';\n import type { SearchesConfig } from './SearchConfig';\n+import { asElement } from '../../../test/wrappedTestingLibrary';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "843a43cc3e1d15bbaf80c0f06ced8f2c6bfaee9e"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2NTQ2MTc2", "url": "https://github.com/Graylog2/graylog2-server/pull/7900#pullrequestreview-396546176", "createdAt": "2020-04-20T15:09:42Z", "commit": {"oid": "ee7edbbd21483920c89a86ae7e81ae702cf0b294"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNTowOTo0MlrOGIZV6Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNTowOTo0MlrOGIZV6Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQ1NzAwMQ==", "bodyText": "Could this be a single import?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            import type { ViewStateMap } from 'views/logic/views/View';\n          \n          \n            \n            import View from 'views/logic/views/View';\n          \n          \n            \n            import View, { type ViewStateMap } from 'views/logic/views/View';", "url": "https://github.com/Graylog2/graylog2-server/pull/7900#discussion_r411457001", "createdAt": "2020-04-20T15:09:42Z", "author": {"login": "kyleknighted"}, "path": "graylog2-web-interface/src/views/components/dashboard/BigDisplayModeConfiguration.test.jsx", "diffHunk": "@@ -1,15 +1,15 @@\n // @flow strict\n import * as React from 'react';\n-import { render, cleanup, fireEvent, waitForElement } from 'wrappedTestingLibrary';\n+import { asElement, cleanup, fireEvent, render, waitForElement } from 'wrappedTestingLibrary';\n import * as Immutable from 'immutable';\n \n import history from 'util/History';\n import Routes from 'routing/Routes';\n+import type { ViewStateMap } from 'views/logic/views/View';\n import View from 'views/logic/views/View';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ee7edbbd21483920c89a86ae7e81ae702cf0b294"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71e52ee104f1d147ab66ed6ead08b0d95dae167a", "author": {"user": {"login": "dennisoelkers", "name": "Dennis Oelkers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/71e52ee104f1d147ab66ed6ead08b0d95dae167a", "committedDate": "2020-04-21T08:42:20Z", "message": "Adding/updating flow typedefs for enzyme/testing-library."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4b8cfd59a691894ea7ac38aae0f762b1546ed624", "author": {"user": {"login": "dennisoelkers", "name": "Dennis Oelkers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/4b8cfd59a691894ea7ac38aae0f762b1546ed624", "committedDate": "2020-04-21T08:42:21Z", "message": "Typing wrapped enzyme."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1c7d101769242a7cf75a94b4a81e07fe4d8a97f1", "author": {"user": {"login": "dennisoelkers", "name": "Dennis Oelkers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/1c7d101769242a7cf75a94b4a81e07fe4d8a97f1", "committedDate": "2020-04-21T08:42:21Z", "message": "Typing wrapped testing library."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5a65bdc3c72c38dc2149ba274f09475a2cbc0471", "author": {"user": {"login": "dennisoelkers", "name": "Dennis Oelkers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/5a65bdc3c72c38dc2149ba274f09475a2cbc0471", "committedDate": "2020-04-21T08:42:59Z", "message": "Fixing type errors uncovered through typing libs."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "67c2d310bebee826751b171efdfc34cf3e89dce7", "author": {"user": {"login": "dennisoelkers", "name": "Dennis Oelkers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/67c2d310bebee826751b171efdfc34cf3e89dce7", "committedDate": "2020-04-21T08:43:01Z", "message": "Extract only name of class."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c24015500ac39df3eabd37a21745df66ddadc2a2", "author": {"user": {"login": "dennisoelkers", "name": "Dennis Oelkers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/c24015500ac39df3eabd37a21745df66ddadc2a2", "committedDate": "2020-04-21T08:43:01Z", "message": "Use correct element type."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "275fd52af05259a635ca8edaa0a53a46ea9beab6", "author": {"user": {"login": "dennisoelkers", "name": "Dennis Oelkers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/275fd52af05259a635ca8edaa0a53a46ea9beab6", "committedDate": "2020-04-21T08:43:01Z", "message": "Fixing missing semicolon."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "45e7840e2e00039898c2de73b10907dc46bbde9b", "author": {"user": {"login": "dennisoelkers", "name": "Dennis Oelkers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/45e7840e2e00039898c2de73b10907dc46bbde9b", "committedDate": "2020-04-21T08:43:01Z", "message": "Extracting first component."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1480d3823373c0f0aa40e5e426a95beddb794595", "author": {"user": {"login": "dennisoelkers", "name": "Dennis Oelkers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/1480d3823373c0f0aa40e5e426a95beddb794595", "committedDate": "2020-04-21T08:43:02Z", "message": "Fixing linter hints."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "050279e0a54c9d9f7b2460800d1d8e46aa1b637d", "author": {"user": {"login": "dennisoelkers", "name": "Dennis Oelkers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/050279e0a54c9d9f7b2460800d1d8e46aa1b637d", "committedDate": "2020-04-21T08:43:02Z", "message": "Allowing to pass undefined/null element to `asElement`, raising exception in that case."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d6ede8158c1a62a19f335ebc47ca349bc9953c1f", "author": {"user": {"login": "dennisoelkers", "name": "Dennis Oelkers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/d6ede8158c1a62a19f335ebc47ca349bc9953c1f", "committedDate": "2020-04-21T08:43:03Z", "message": "Using correct element types in `SearchBar` test."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4cd19e273c08b96cc4eebed0aee3620e248f1783", "author": {"user": {"login": "dennisoelkers", "name": "Dennis Oelkers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/4cd19e273c08b96cc4eebed0aee3620e248f1783", "committedDate": "2020-04-21T08:43:03Z", "message": "Correcting import."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4875decce911494a22d9776a0fbaebb51117ca17", "author": {"user": {"login": "dennisoelkers", "name": "Dennis Oelkers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/4875decce911494a22d9776a0fbaebb51117ca17", "committedDate": "2020-04-21T08:43:03Z", "message": "Using optional operator to handle undefined cases."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ccd7cf0a441785d0912666d38ad99c65229079ee", "author": {"user": {"login": "dennisoelkers", "name": "Dennis Oelkers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/ccd7cf0a441785d0912666d38ad99c65229079ee", "committedDate": "2020-04-21T08:43:04Z", "message": "Using correct element type."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "96e14a4c8842b694468a91272fbdb84a0f80756e", "author": {"user": {"login": "dennisoelkers", "name": "Dennis Oelkers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/96e14a4c8842b694468a91272fbdb84a0f80756e", "committedDate": "2020-04-21T08:43:04Z", "message": "Improving types for `wait`."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "599f067ed5b6d9fbac7f33f32961fd80e1cc445e", "author": {"user": {"login": "dennisoelkers", "name": "Dennis Oelkers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/599f067ed5b6d9fbac7f33f32961fd80e1cc445e", "committedDate": "2020-04-21T08:43:04Z", "message": "Using null check."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "261959b1fb2e3b58bb72117ed78a768a4d519321", "author": {"user": {"login": "dennisoelkers", "name": "Dennis Oelkers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/261959b1fb2e3b58bb72117ed78a768a4d519321", "committedDate": "2020-04-21T08:43:05Z", "message": "Using correct element types."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c42dfa197d844232a4bb7cab6a92794dbecdf7a0", "author": {"user": {"login": "dennisoelkers", "name": "Dennis Oelkers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/c42dfa197d844232a4bb7cab6a92794dbecdf7a0", "committedDate": "2020-04-21T08:43:05Z", "message": "Shortening imports for `asElement`."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ee7edbbd21483920c89a86ae7e81ae702cf0b294", "author": {"user": {"login": "dennisoelkers", "name": "Dennis Oelkers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/ee7edbbd21483920c89a86ae7e81ae702cf0b294", "committedDate": "2020-04-20T15:04:54Z", "message": "Shortening imports for `asElement`."}, "afterCommit": {"oid": "c42dfa197d844232a4bb7cab6a92794dbecdf7a0", "author": {"user": {"login": "dennisoelkers", "name": "Dennis Oelkers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/c42dfa197d844232a4bb7cab6a92794dbecdf7a0", "committedDate": "2020-04-21T08:43:05Z", "message": "Shortening imports for `asElement`."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2b6143c6b265c7fc38ea99125f8d6fb18d2bb515", "author": {"user": {"login": "dennisoelkers", "name": "Dennis Oelkers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/2b6143c6b265c7fc38ea99125f8d6fb18d2bb515", "committedDate": "2020-04-21T08:46:47Z", "message": "Fixing linter hints."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe699e49d832dccf314858d96f1e56de3b1a1c64", "author": {"user": {"login": "dennisoelkers", "name": "Dennis Oelkers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/fe699e49d832dccf314858d96f1e56de3b1a1c64", "committedDate": "2020-04-21T09:00:38Z", "message": "Consolidating imports."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5456e131ae211124839988ab1b6e535025cb7371", "author": {"user": {"login": "dennisoelkers", "name": "Dennis Oelkers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/5456e131ae211124839988ab1b6e535025cb7371", "committedDate": "2020-04-21T09:01:57Z", "message": "Fixing linter hints."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3MTQzMTcy", "url": "https://github.com/Graylog2/graylog2-server/pull/7900#pullrequestreview-397143172", "createdAt": "2020-04-21T09:17:06Z", "commit": {"oid": "5456e131ae211124839988ab1b6e535025cb7371"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2384, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}