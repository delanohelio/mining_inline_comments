{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgyNzM4NTU3", "number": 8940, "title": "Add shared form helper components, e.g. to wrap the common Input with a formik Field.", "bodyText": "This PR adds some helper components for our forms. This includes:\n\nFormikInput: Wraps the common Input component with a formik Field\nFormikFormGroup: Uses the FormikInput to display a label and an input with a specific layout\n\nReadOnlyFormGroup: It is a common use case that some fields are not editable (e.g. on a details page) but needs to be displayed with the same layout like the FormikFormGroup.\n\n\nThese components simplify the usage of the formik Field. E.g. the full name input can be added with:\n<FormikFormGroup label=\"Full Name\"\n                 name=\"full_name\"\n                 maxLength={200}\n                 required\n                 help=\"Give a descriptive name for this account, e.g. the full name.\" />\n\nPlease note that the FormikInput does not support multiple checkboxes with the same name yet, when needed it can be implemented like this: https://codesandbox.io/s/328038x19q", "createdAt": "2020-09-09T10:22:07Z", "url": "https://github.com/Graylog2/graylog2-server/pull/8940", "merged": true, "mergeCommit": {"oid": "0b85a8f195dd90d2910ac43f1cfddbc4c90fb1ca"}, "closed": true, "closedAt": "2020-09-16T10:39:20Z", "author": {"login": "linuspahl"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdHILW0gH2gAyNDgyNzM4NTU3OjhiMjJlY2NmOTlmYWRlODFlMDNhYzc4ZTE1MGM1MWQ1NzhlMDU3N2E=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdJZbmyAH2gAyNDgyNzM4NTU3Ojg1NTQ0M2E2OTU0NmNkYWI3NjcyNzJjZThkYTA2MjhjMjM2MmVkNWQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8b22eccf99fade81e03ac78e150c51d578e0577a", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/8b22eccf99fade81e03ac78e150c51d578e0577a", "committedDate": "2020-09-09T08:46:21Z", "message": "Add FormikInput, FormikFormGroup and ReadOnlyFormGroup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "254595e41c3cb54b9933a38acbc7a70dd91c2cc1", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/254595e41c3cb54b9933a38acbc7a70dd91c2cc1", "committedDate": "2020-09-09T10:04:51Z", "message": "Add FormikInput test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d7cc99d19f68400628597e391e6b9550cd52dc0e", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/d7cc99d19f68400628597e391e6b9550cd52dc0e", "committedDate": "2020-09-09T10:19:21Z", "message": "Add JSDoc comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4Mzk2NTYz", "url": "https://github.com/Graylog2/graylog2-server/pull/8940#pullrequestreview-488396563", "createdAt": "2020-09-15T07:24:42Z", "commit": {"oid": "254595e41c3cb54b9933a38acbc7a70dd91c2cc1"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQwNzoyNDo0MlrOHR0RYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQwNzoyNjozOFrOHR0WQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODQ0NDI1Nw==", "bodyText": "If you start with {...rest} you can never overwrite all the following props, is that intended?", "url": "https://github.com/Graylog2/graylog2-server/pull/8940#discussion_r488444257", "createdAt": "2020-09-15T07:24:42Z", "author": {"login": "Gaya"}, "path": "graylog2-web-interface/src/components/common/FormikFormGroup.jsx", "diffHunk": "@@ -0,0 +1,31 @@\n+// @flow strict\n+import * as React from 'react';\n+\n+import FormikInput from './FormikInput';\n+\n+type Props = {\n+  label: string,\n+  name: string,\n+  type?: string,\n+  help?: string,\n+  validate?: (string) => ?string,\n+};\n+\n+const FormikFormGroup = ({ label, name, type, help, validate, ...rest }: Props) => (\n+  <FormikInput {...rest}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "254595e41c3cb54b9933a38acbc7a70dd91c2cc1"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODQ0NTUwNg==", "bodyText": "You're only rendering text here in a container that looks like a form input. Maybe an <input disabled /> would work better?", "url": "https://github.com/Graylog2/graylog2-server/pull/8940#discussion_r488445506", "createdAt": "2020-09-15T07:26:38Z", "author": {"login": "Gaya"}, "path": "graylog2-web-interface/src/components/common/ReadOnlyFormGroup.jsx", "diffHunk": "@@ -0,0 +1,63 @@\n+// @flow strict\n+import * as React from 'react';\n+import styled, { css, type StyledComponent } from 'styled-components';\n+\n+import type { ThemeInterface } from 'theme';\n+import { Col, Row, HelpBlock } from 'components/graylog';\n+import Icon from 'components/common/Icon';\n+\n+type Props = {\n+  label: React.Node,\n+  value: ?mixed,\n+  help?: string,\n+};\n+\n+const ValueCol = styled(Col)`\n+  padding-top: 7px;\n+`;\n+\n+const LabelCol = styled(ValueCol)(({ theme }) => css`\n+  font-weight: bold;\n+\n+  @media (min-width: ${theme.breakpoints.min.md}) {\n+    text-align: right;\n+  }\n+`);\n+\n+const BooleanIcon: StyledComponent<{value?: boolean}, ThemeInterface, Icon> = styled(Icon)(({ theme, value }) => `\n+  color: ${value ? theme.colors.variant.success : theme.colors.variant.danger};\n+`);\n+\n+const BooleanValue = ({ value }: { value: boolean }) => (\n+  <><BooleanIcon name={value ? 'check-circle' : 'times-circle'} value={value} /> {value ? 'yes' : 'no'}</>\n+);\n+\n+const readableValue = (value: $PropertyType<Props, 'value'>) => {\n+  if (typeof value === 'boolean') {\n+    return <BooleanValue value={value} />;\n+  }\n+\n+  if (value) {\n+    return value;\n+  }\n+\n+  return '-';\n+};\n+\n+const ReadOnlyFormGroup = ({ label, value, help }: Props) => (\n+  <Row>\n+    <LabelCol sm={3}>\n+      {label}\n+    </LabelCol>\n+    <ValueCol sm={9}>\n+      {readableValue(value)}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "254595e41c3cb54b9933a38acbc7a70dd91c2cc1"}, "originalPosition": 53}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "855443a69546cdab767272ce8da0628c2362ed5d", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/855443a69546cdab767272ce8da0628c2362ed5d", "committedDate": "2020-09-16T10:00:20Z", "message": "Remove not needed FormikInput error message"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3523, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}