{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE0MDg3ODcx", "number": 8052, "title": "Give search input focus when saved search list is opening", "bodyText": "Motivation\nPrior to this change, a user needed to click on the search\ninput after he opened the saved search modal.\nDescription\nThis change will give the search input of the saved search\nmodal focus, so the user needs one click less.\nTypes of changes\n\n Bug fix (non-breaking change which fixes an issue)\n New feature (non-breaking change which adds functionality)\n Refactoring (non-breaking change)\n Breaking change (fix or feature that would cause existing functionality to change)\n\nChecklist:\n\n My code follows the code style of this project.\n My change requires a change to the documentation.\n I have updated the documentation accordingly.\n I have read the CONTRIBUTING document.\n I have added tests to cover my changes.", "createdAt": "2020-05-06T13:13:28Z", "url": "https://github.com/Graylog2/graylog2-server/pull/8052", "merged": true, "mergeCommit": {"oid": "3be45a7daa1c6bad3da036d9c744bd00e44e90e0"}, "closed": true, "closedAt": "2020-06-05T08:07:01Z", "author": {"login": "kmerz"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABce8vShAFqTQwNzQzNzMxMw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcigSjWABqjMzNDc0NTk5NDU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA3NDM3MzEz", "url": "https://github.com/Graylog2/graylog2-server/pull/8052#pullrequestreview-407437313", "createdAt": "2020-05-07T12:49:46Z", "commit": {"oid": "80f59f88fb08c28bd8036eafd93a0661638f5609"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxMjo0OTo0NlrOGR88Pw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxMjo0OTo0NlrOGR88Pw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTQ3NzQzOQ==", "bodyText": "Don't we only need to do * as when it's Flowtyped?", "url": "https://github.com/Graylog2/graylog2-server/pull/8052#discussion_r421477439", "createdAt": "2020-05-07T12:49:46Z", "author": {"login": "kyleknighted"}, "path": "graylog2-web-interface/src/components/common/SearchForm.jsx", "diffHunk": "@@ -1,5 +1,5 @@\n import PropTypes from 'prop-types';\n-import React from 'react';\n+import * as React from 'react';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "80f59f88fb08c28bd8036eafd93a0661638f5609"}, "originalPosition": 3}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA3NDM4Njgx", "url": "https://github.com/Graylog2/graylog2-server/pull/8052#pullrequestreview-407438681", "createdAt": "2020-05-07T12:51:27Z", "commit": {"oid": "80f59f88fb08c28bd8036eafd93a0661638f5609"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxMjo1MToyN1rOGR9AbQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxMjo1MToyN1rOGR9AbQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTQ3ODUwOQ==", "bodyText": "What's your feeling on using React's createRef?", "url": "https://github.com/Graylog2/graylog2-server/pull/8052#discussion_r421478509", "createdAt": "2020-05-07T12:51:27Z", "author": {"login": "kyleknighted"}, "path": "graylog2-web-interface/src/components/common/SearchForm.jsx", "diffHunk": "@@ -162,6 +171,7 @@ class SearchForm extends React.Component {\n           <div className=\"form-group has-feedback\">\n             {this.props.label && <label htmlFor=\"common-search-form-query-input\" className=\"control-label\">{this.props.label}</label>}\n             <input id=\"common-search-form-query-input\"\n+                   ref={(ref) => { this.searchInput = ref; }}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "80f59f88fb08c28bd8036eafd93a0661638f5609"}, "originalPosition": 41}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA3NDM5MjIz", "url": "https://github.com/Graylog2/graylog2-server/pull/8052#pullrequestreview-407439223", "createdAt": "2020-05-07T12:52:06Z", "commit": {"oid": "80f59f88fb08c28bd8036eafd93a0661638f5609"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxMjo1MjowN1rOGR9CHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxMjo1MjowN1rOGR9CHA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTQ3ODk0MA==", "bodyText": "What is the : void for?", "url": "https://github.com/Graylog2/graylog2-server/pull/8052#discussion_r421478940", "createdAt": "2020-05-07T12:52:07Z", "author": {"login": "kyleknighted"}, "path": "graylog2-web-interface/src/components/common/SearchForm.jsx", "diffHunk": "@@ -93,13 +94,21 @@ class SearchForm extends React.Component {\n     loadingLabel: 'Loading...',\n     queryHelpComponent: null,\n     children: null,\n+    focusAfterMount: false,\n   };\n \n   state = {\n     query: this.props.query,\n     isLoading: false,\n   };\n \n+  componentDidMount(): void {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "80f59f88fb08c28bd8036eafd93a0661638f5609"}, "originalPosition": 27}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5OTEwNjgy", "url": "https://github.com/Graylog2/graylog2-server/pull/8052#pullrequestreview-409910682", "createdAt": "2020-05-12T10:33:13Z", "commit": {"oid": "7954bbcb8123d27f600cf4ada26f1d3c4ccb35eb"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxMDozMzoxNFrOGUAbOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxMDo0MTozNFrOGUAshg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzYzMTY3NQ==", "bodyText": "Looks like this comment is not required", "url": "https://github.com/Graylog2/graylog2-server/pull/8052#discussion_r423631675", "createdAt": "2020-05-12T10:33:14Z", "author": {"login": "linuspahl"}, "path": "graylog2-web-interface/src/views/components/searchbar/saved-search/SavedSearchList.jsx", "diffHunk": "@@ -2,6 +2,7 @@\n import React from 'react';\n import PropTypes from 'prop-types';\n import { browserHistory } from 'react-router';\n+// $FlowFixMe should be there", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7954bbcb8123d27f600cf4ada26f1d3c4ccb35eb"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzYzNDY2MA==", "bodyText": "I see that we are using the * for other component type definitions in this file, but I would prefer HTMLSpanElement.", "url": "https://github.com/Graylog2/graylog2-server/pull/8052#discussion_r423634660", "createdAt": "2020-05-12T10:38:55Z", "author": {"login": "linuspahl"}, "path": "graylog2-web-interface/src/views/components/searchbar/saved-search/SavedSearchList.jsx", "diffHunk": "@@ -39,6 +40,12 @@ const NoSavedSearches: StyledComponent<{}, ThemeInterface, *> = styled(Alert)`\n   align-items: center;\n `;\n \n+const DeleteButton: StyledComponent<{}, ThemeInterface, *> = styled.span`", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7954bbcb8123d27f600cf4ada26f1d3c4ccb35eb"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzYzNjEwMg==", "bodyText": "The DeleteButton can't be accessed with the keyboard right now. Maybe we can use the IconButton in the future instead. #8064", "url": "https://github.com/Graylog2/graylog2-server/pull/8052#discussion_r423636102", "createdAt": "2020-05-12T10:41:34Z", "author": {"login": "linuspahl"}, "path": "graylog2-web-interface/src/views/components/searchbar/saved-search/SavedSearchList.jsx", "diffHunk": "@@ -117,11 +127,19 @@ class SavedSearchList extends React.Component<Props, State> {\n     const { selectedSavedSearch } = this.state;\n     const savedSearchList = (views.list || []).map((savedSearch) => {\n       return (\n-        <ListGroupItem active={selectedSavedSearch === savedSearch.id}\n-                       onClick={() => this.setState({ selectedSavedSearch: savedSearch.id })}\n-                       key={savedSearch.id}>\n-          {savedSearch.title}\n-        </ListGroupItem>\n+        <ViewLoaderContext.Consumer key={savedSearch.id}>\n+          {(loaderFunc) => (\n+            <ListGroupItem active={selectedSavedSearch === savedSearch.id}\n+                           onClick={() => this.onLoad(savedSearch.id, loaderFunc)}>\n+              {savedSearch.title}\n+              <span>\n+                <DeleteButton bsSize=\"xsmall\" bsStyle=\"danger\" onClick={(e) => this.onDelete(e, savedSearch.id)}>\n+                  <Icon name=\"trash\" ttile=\"Delete\" data-testid={`delete-${savedSearch.id}`} />\n+                </DeleteButton>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7954bbcb8123d27f600cf4ada26f1d3c4ccb35eb"}, "originalPosition": 52}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "72c8fe202d7ce4f1bf5c2bc2e83d349f9fd8d776", "author": {"user": {"login": "kmerz", "name": "Konrad Merz"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/72c8fe202d7ce4f1bf5c2bc2e83d349f9fd8d776", "committedDate": "2020-05-18T13:56:32Z", "message": "Give search input focus when saved search list is opening\n\nPrior to this change, a user needed to click on the search\ninput after he opened the saved search modal.\n\nThis change will give the search input of the saved search\nmodal focus, so the user needs one click less."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d1b9d0ab18f39d6f6a30a2098807482521202b6", "author": {"user": {"login": "kmerz", "name": "Konrad Merz"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/4d1b9d0ab18f39d6f6a30a2098807482521202b6", "committedDate": "2020-05-18T13:56:33Z", "message": "Use autofocus instead of componentDidMount"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e86713ccfb0b0f0afd09f6fb8b64b1484e246a01", "author": {"user": {"login": "kmerz", "name": "Konrad Merz"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/e86713ccfb0b0f0afd09f6fb8b64b1484e246a01", "committedDate": "2020-05-18T13:56:33Z", "message": "Stop Propagation\n\nthe submit event was bubbeling up and executed a search when filtering the saved searches"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "383a0a42a9ee12b98a74d43ecddc5858770296fd", "author": {"user": {"login": "kmerz", "name": "Konrad Merz"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/383a0a42a9ee12b98a74d43ecddc5858770296fd", "committedDate": "2020-05-18T13:56:34Z", "message": "Fix snapshot tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71ffe60f4cb071dba133114983e4ba0b4199fa69", "author": {"user": {"login": "kmerz", "name": "Konrad Merz"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/71ffe60f4cb071dba133114983e4ba0b4199fa69", "committedDate": "2020-05-18T13:56:34Z", "message": "Reduce the clicks on loading a search once more"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "acb59c0c73a228882ff3c7008664340e6e243183", "author": {"user": {"login": "kmerz", "name": "Konrad Merz"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/acb59c0c73a228882ff3c7008664340e6e243183", "committedDate": "2020-05-18T13:56:34Z", "message": "Fix linter warnings"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "408b1d99d9f6dd764c2ae07ba576860373c69bbb", "author": {"user": {"login": "kmerz", "name": "Konrad Merz"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/408b1d99d9f6dd764c2ae07ba576860373c69bbb", "committedDate": "2020-05-18T13:56:35Z", "message": "Use more concrete flow type"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7954bbcb8123d27f600cf4ada26f1d3c4ccb35eb", "author": {"user": {"login": "kmerz", "name": "Konrad Merz"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/7954bbcb8123d27f600cf4ada26f1d3c4ccb35eb", "committedDate": "2020-05-12T09:19:16Z", "message": "Fix linter warnings"}, "afterCommit": {"oid": "408b1d99d9f6dd764c2ae07ba576860373c69bbb", "author": {"user": {"login": "kmerz", "name": "Konrad Merz"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/408b1d99d9f6dd764c2ae07ba576860373c69bbb", "committedDate": "2020-05-18T13:56:35Z", "message": "Use more concrete flow type"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3192, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}