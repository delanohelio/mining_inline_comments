{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc4MjIyMzc2", "number": 7520, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQxNTozMTo1OFrODh6uwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQxMzoxOTozOFrODiUqxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM2ODkxODQxOnYy", "diffSide": "RIGHT", "path": "graylog2-web-interface/src/views/components/datatable/DataTableEntry.test.jsx", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQxNTozMTo1OFrOFs63dw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQxMjoyNjozMVrOFte4aQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjY0NjEzNQ==", "bodyText": "Everywhere else we use 'immutable' we use import * as Immutable from 'immutable';\nShould we not destructure here to keep consistent with the rest of the codebase?", "url": "https://github.com/Graylog2/graylog2-server/pull/7520#discussion_r382646135", "createdAt": "2020-02-21T15:31:58Z", "author": {"login": "kyleknighted"}, "path": "graylog2-web-interface/src/views/components/datatable/DataTableEntry.test.jsx", "diffHunk": "@@ -1,20 +1,20 @@\n // @flow strict\n import * as React from 'react';\n-import * as Immutable from 'immutable';\n+import { List, OrderedSet } from 'immutable';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ad73fe940b804b93d208afa872a263b4f1bda3a"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzIzNjIwMQ==", "bodyText": "We do not use one form consistently across the codebase (see ViewState, ViewTransformer, CopyWidgetToDashboard for examples of importing individual parts. Both ways have pros and cons (one being explicit, the other being shorted and allowing tree shaking), so I would not vote for enforcing one style.", "url": "https://github.com/Graylog2/graylog2-server/pull/7520#discussion_r383236201", "createdAt": "2020-02-24T12:26:31Z", "author": {"login": "dennisoelkers"}, "path": "graylog2-web-interface/src/views/components/datatable/DataTableEntry.test.jsx", "diffHunk": "@@ -1,20 +1,20 @@\n // @flow strict\n import * as React from 'react';\n-import * as Immutable from 'immutable';\n+import { List, OrderedSet } from 'immutable';", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjY0NjEzNQ=="}, "originalCommit": {"oid": "1ad73fe940b804b93d208afa872a263b4f1bda3a"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM3MzA5ODIwOnYy", "diffSide": "RIGHT", "path": "graylog2-web-interface/src/views/logic/aggregationbuilder/visualizations/BarVisualizationConfig.js", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQxMjo1NzoyMVrOFtfqhw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQxNDo1Nzo0MlrOFtjmJg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzI0OTAzMQ==", "bodyText": "Looks like we can use BarVisualizationConfigType instead of any here.", "url": "https://github.com/Graylog2/graylog2-server/pull/7520#discussion_r383249031", "createdAt": "2020-02-24T12:57:21Z", "author": {"login": "linuspahl"}, "path": "graylog2-web-interface/src/views/logic/aggregationbuilder/visualizations/BarVisualizationConfig.js", "diffHunk": "@@ -49,10 +49,11 @@ export default class BarVisualizationConfig extends VisualizationConfig {\n   }\n }\n \n+type InternalBuilderState = Immutable.Map<string, any>;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ad73fe940b804b93d208afa872a263b4f1bda3a"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzI4NDM3Mw==", "bodyText": "That would mean that every value in the state of the builder would be of type BarVisualizationConfigType, which is not the case. Unfortunately we cannot really type the builder state stricter, because we have different types for the values of different keys.\nI have stumbled across this too and was thinking a bit about it. We could use either JS plain objects or Immutable Records for this, but it requires changing the code and is therefore out of scope for this PR.", "url": "https://github.com/Graylog2/graylog2-server/pull/7520#discussion_r383284373", "createdAt": "2020-02-24T14:08:57Z", "author": {"login": "dennisoelkers"}, "path": "graylog2-web-interface/src/views/logic/aggregationbuilder/visualizations/BarVisualizationConfig.js", "diffHunk": "@@ -49,10 +49,11 @@ export default class BarVisualizationConfig extends VisualizationConfig {\n   }\n }\n \n+type InternalBuilderState = Immutable.Map<string, any>;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzI0OTAzMQ=="}, "originalCommit": {"oid": "1ad73fe940b804b93d208afa872a263b4f1bda3a"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzMxMzQ0Ng==", "bodyText": "Sounds reasonable, thanks for the clarification.", "url": "https://github.com/Graylog2/graylog2-server/pull/7520#discussion_r383313446", "createdAt": "2020-02-24T14:57:42Z", "author": {"login": "linuspahl"}, "path": "graylog2-web-interface/src/views/logic/aggregationbuilder/visualizations/BarVisualizationConfig.js", "diffHunk": "@@ -49,10 +49,11 @@ export default class BarVisualizationConfig extends VisualizationConfig {\n   }\n }\n \n+type InternalBuilderState = Immutable.Map<string, any>;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzI0OTAzMQ=="}, "originalCommit": {"oid": "1ad73fe940b804b93d208afa872a263b4f1bda3a"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM3MzE2ODA1OnYy", "diffSide": "RIGHT", "path": "graylog2-web-interface/src/views/logic/searchtypes/aggregation/PivotConfigGenerator.js", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQxMzoxOTozOFrOFtgTgg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQxNDo1NDo1NVrOFtje-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzI1OTUyMg==", "bodyText": "Instead of any, we can use an object here with {  id: string, name: string, type: string, config?: {}}. I could not find a different use case.", "url": "https://github.com/Graylog2/graylog2-server/pull/7520#discussion_r383259522", "createdAt": "2020-02-24T13:19:38Z", "author": {"login": "linuspahl"}, "path": "graylog2-web-interface/src/views/logic/searchtypes/aggregation/PivotConfigGenerator.js", "diffHunk": "@@ -84,7 +84,7 @@ export default ({ config }: { config: AggregationWidgetConfig }) => {\n };\n \n class ConfigBuilder {\n-  value: Set;\n+  value: Set<any>;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ad73fe940b804b93d208afa872a263b4f1bda3a"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzMxMTYwOQ==", "bodyText": "Added that, thanks!", "url": "https://github.com/Graylog2/graylog2-server/pull/7520#discussion_r383311609", "createdAt": "2020-02-24T14:54:55Z", "author": {"login": "dennisoelkers"}, "path": "graylog2-web-interface/src/views/logic/searchtypes/aggregation/PivotConfigGenerator.js", "diffHunk": "@@ -84,7 +84,7 @@ export default ({ config }: { config: AggregationWidgetConfig }) => {\n };\n \n class ConfigBuilder {\n-  value: Set;\n+  value: Set<any>;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzI1OTUyMg=="}, "originalCommit": {"oid": "1ad73fe940b804b93d208afa872a263b4f1bda3a"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3876, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}