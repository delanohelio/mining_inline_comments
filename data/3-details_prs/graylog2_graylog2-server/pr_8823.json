{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcwMDYzNTg3", "number": 8823, "title": "Implement domain actions for users, authz roles, teams and entity share actions.", "bodyText": "This PR implements domain actions wich take care of the error handling and user notifications when executing an action.\nThe are currently implemented for UserActions, AuthzRolesActions, TeamActions and EntityShareActions\n/jenkins-pr-deps Graylog2/graylog-plugin-enterprise#1735", "createdAt": "2020-08-19T10:15:29Z", "url": "https://github.com/Graylog2/graylog2-server/pull/8823", "merged": true, "mergeCommit": {"oid": "7e836a84fe91b2a8b352765bb2aa52b1f686d476"}, "closed": true, "closedAt": "2020-08-28T11:36:14Z", "author": {"login": "linuspahl"}, "timelineItems": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdCIK8ugBqjM2ODY5OTk5ODc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdDTagCgFqTQ3NzY1Njk1OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4794eae52b1631ee2c0d2def3b65f5f05b29c9f6", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/4794eae52b1631ee2c0d2def3b65f5f05b29c9f6", "committedDate": "2020-08-20T08:10:00Z", "message": "Fix flow type definitions"}, "afterCommit": {"oid": "148994302f734c34799edcead7ae4a2aa00a1453", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/148994302f734c34799edcead7ae4a2aa00a1453", "committedDate": "2020-08-24T19:56:05Z", "message": "Fix flow type definitions"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e04d704ce6b991079a756b642f15ce886673506a", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/e04d704ce6b991079a756b642f15ce886673506a", "committedDate": "2020-08-25T06:23:53Z", "message": "Implement domain actions for EntityShareActions"}, "afterCommit": {"oid": "a5ccbbc8dcacde0c0a420b930ee265d2b1dac329", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/a5ccbbc8dcacde0c0a420b930ee265d2b1dac329", "committedDate": "2020-08-25T06:54:52Z", "message": "Implement domain actions for EntityShareActions"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "059201855a4f7cfe4eaa592b7b0f89f210fa6fce", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/059201855a4f7cfe4eaa592b7b0f89f210fa6fce", "committedDate": "2020-08-26T08:46:23Z", "message": "Fix Users update error message"}, "afterCommit": {"oid": "c3d92db9a9aff3c98321d3482f8efd24652cbf0a", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/c3d92db9a9aff3c98321d3482f8efd24652cbf0a", "committedDate": "2020-08-26T09:27:51Z", "message": "Fix Users update error message"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c3d92db9a9aff3c98321d3482f8efd24652cbf0a", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/c3d92db9a9aff3c98321d3482f8efd24652cbf0a", "committedDate": "2020-08-26T09:27:51Z", "message": "Fix Users update error message"}, "afterCommit": {"oid": "8131a1f203ab9151d67cd736e44b9ad0d077c92f", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/8131a1f203ab9151d67cd736e44b9ad0d077c92f", "committedDate": "2020-08-26T09:39:01Z", "message": "Fix Users update error message"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc2NzMyNTg3", "url": "https://github.com/Graylog2/graylog2-server/pull/8823#pullrequestreview-476732587", "createdAt": "2020-08-27T13:42:20Z", "commit": {"oid": "8131a1f203ab9151d67cd736e44b9ad0d077c92f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxMzo0MjoyMFrOHIQ9DQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxMzo0MzoxN1rOHIQ_rQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODQyODQyOQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                message: `Updating user \"${payload?.username}\" failed with status: ${error}`,\n          \n          \n            \n                message: `Creating user \"${payload?.username}\" failed with status: ${error}`,", "url": "https://github.com/Graylog2/graylog2-server/pull/8823#discussion_r478428429", "createdAt": "2020-08-27T13:42:20Z", "author": {"login": "kmerz"}, "path": "graylog2-web-interface/src/domainActions/users/UsersDomain.js", "diffHunk": "@@ -0,0 +1,107 @@\n+// @flow strict\n+import type { ActionsType } from 'actions/users/UsersActions';\n+import { UsersActions } from 'stores/users/UsersStore';\n+\n+import notifyingAction from '../notifyingAction';\n+\n+const create: $PropertyType<ActionsType, 'create'> = notifyingAction({\n+  action: UsersActions.create,\n+  success: (payload) => ({\n+    message: `User \"${payload?.username}\" was created successfully`,\n+  }),\n+  error: (error, payload) => ({\n+    message: `Updating user \"${payload?.username}\" failed with status: ${error}`,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8131a1f203ab9151d67cd736e44b9ad0d077c92f"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODQyOTEwMQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                message: `Loading token for user \"${username}\" failed with status: ${error}`,\n          \n          \n            \n                message: `Loading tokens for user \"${username}\" failed with status: ${error}`,", "url": "https://github.com/Graylog2/graylog2-server/pull/8823#discussion_r478429101", "createdAt": "2020-08-27T13:43:17Z", "author": {"login": "kmerz"}, "path": "graylog2-web-interface/src/domainActions/users/UsersDomain.js", "diffHunk": "@@ -0,0 +1,107 @@\n+// @flow strict\n+import type { ActionsType } from 'actions/users/UsersActions';\n+import { UsersActions } from 'stores/users/UsersStore';\n+\n+import notifyingAction from '../notifyingAction';\n+\n+const create: $PropertyType<ActionsType, 'create'> = notifyingAction({\n+  action: UsersActions.create,\n+  success: (payload) => ({\n+    message: `User \"${payload?.username}\" was created successfully`,\n+  }),\n+  error: (error, payload) => ({\n+    message: `Updating user \"${payload?.username}\" failed with status: ${error}`,\n+  }),\n+});\n+\n+const load: $PropertyType<ActionsType, 'load'> = notifyingAction({\n+  action: UsersActions.load,\n+  error: (error, username) => ({\n+    message: `Loading user \"${username}\" failed with status: ${error}`,\n+  }),\n+  notFoundRedirect: true,\n+});\n+\n+const update: $PropertyType<ActionsType, 'update'> = notifyingAction({\n+  action: UsersActions.update,\n+  success: (username) => ({\n+    message: `User \"${username}\" was updated successfully`,\n+  }),\n+  error: (error, username) => ({\n+    message: `Updating user \"${username}\" failed with status: ${error}`,\n+  }),\n+});\n+\n+const deleteAction: $PropertyType<ActionsType, 'delete'> = notifyingAction({\n+  action: UsersActions.delete,\n+  success: (username) => ({\n+    message: `User \"${username}\" was deleted successfully`,\n+  }),\n+  error: (error, username) => ({\n+    message: `Deleting user \"${username}\" failed with status: ${error}`,\n+  }),\n+});\n+\n+const changePassword: $PropertyType<ActionsType, 'changePassword'> = notifyingAction({\n+  action: UsersActions.changePassword,\n+  success: (username) => ({\n+    message: `Password was changed successfully for user \"${username}\"`,\n+  }),\n+  error: (error, username) => ({\n+    message: `Changing password for user \"${username}\" failed with status: ${error}`,\n+  }),\n+});\n+\n+const createToken: $PropertyType<ActionsType, 'createToken'> = notifyingAction({\n+  action: UsersActions.createToken,\n+  success: (username, tokenName) => ({\n+    message: `Token \"${tokenName}\" created successfully for user \"${username}\"`,\n+  }),\n+  error: (error, username, tokenName) => ({\n+    message: `Creating token \"${tokenName}\" for user \"${username}\" failed with status: ${error}`,\n+  }),\n+});\n+\n+const loadTokens: $PropertyType<ActionsType, 'loadTokens'> = notifyingAction({\n+  action: UsersActions.loadTokens,\n+  error: (error, username) => ({\n+    message: `Loading token for user \"${username}\" failed with status: ${error}`,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8131a1f203ab9151d67cd736e44b9ad0d077c92f"}, "originalPosition": 68}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "242ffb0c3498298347e64ddf33f5a83871b9c97e", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/242ffb0c3498298347e64ddf33f5a83871b9c97e", "committedDate": "2020-08-28T09:08:50Z", "message": "Implement domain actions for AuthzRoles"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef633e638ff6370daebbcdb16d4362e4151e2734", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/ef633e638ff6370daebbcdb16d4362e4151e2734", "committedDate": "2020-08-28T09:11:11Z", "message": "Implement domain actions for UsersActions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1bf5aeb8cc7d8de2c5414c9140f34cb5182e90da", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/1bf5aeb8cc7d8de2c5414c9140f34cb5182e90da", "committedDate": "2020-08-28T09:11:11Z", "message": "Change notifyingAction parameter names"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2250563e9455940acf954b15a5220b3c4f6aec36", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/2250563e9455940acf954b15a5220b3c4f6aec36", "committedDate": "2020-08-28T09:11:12Z", "message": "Code refactoring"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cf3366db41cfc77daa2f8226e33fbde374d84533", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/cf3366db41cfc77daa2f8226e33fbde374d84533", "committedDate": "2020-08-28T09:11:12Z", "message": "Fix flow type definitions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "284f6ef2e44a55db212581f3995e268fe97ddac3", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/284f6ef2e44a55db212581f3995e268fe97ddac3", "committedDate": "2020-08-28T09:11:12Z", "message": "Implement domain actions for EntityShareActions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9556858117a2d691f45c74541c5e8d36acd964c2", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/9556858117a2d691f45c74541c5e8d36acd964c2", "committedDate": "2020-08-28T09:11:12Z", "message": "Fix EntityShareModal test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d2ba98c22bf51468a18d2af064714dff440f7f4", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/1d2ba98c22bf51468a18d2af064714dff440f7f4", "committedDate": "2020-08-28T09:11:12Z", "message": "Fix user notification for EntityShare action loadTeamSharesPaginated"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ad5b436e224081983def5b01d4903deff16f1d99", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/ad5b436e224081983def5b01d4903deff16f1d99", "committedDate": "2020-08-28T09:11:12Z", "message": "Fix loadTeamSharesPaginated error message"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fc3924a2efa038e1c12f4a892b5930b1cf2a0a5e", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/fc3924a2efa038e1c12f4a892b5930b1cf2a0a5e", "committedDate": "2020-08-28T09:11:12Z", "message": "Fix Users update error message"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "acd3e1925e3276af6fc9eaf6c9e8c0e071e61444", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/acd3e1925e3276af6fc9eaf6c9e8c0e071e61444", "committedDate": "2020-08-28T09:11:12Z", "message": "Display error page when 404 error gets catched with notifyingAction"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a4e49286045e9f2e18f510edc69b436d8aa602d0", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/a4e49286045e9f2e18f510edc69b436d8aa602d0", "committedDate": "2020-08-28T09:11:12Z", "message": "Display meaningful error message for 400 errors which get handled by notifyingAction"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9eea4e54ff0edb62451240c156359b5115945023", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/9eea4e54ff0edb62451240c156359b5115945023", "committedDate": "2020-08-28T09:11:12Z", "message": "Typo fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c5fa10cc80de3d463a9c3458584c4dbf9e223cca", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/c5fa10cc80de3d463a9c3458584c4dbf9e223cca", "committedDate": "2020-08-28T09:12:32Z", "message": "Rename variable in UsersDomain"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8131a1f203ab9151d67cd736e44b9ad0d077c92f", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/8131a1f203ab9151d67cd736e44b9ad0d077c92f", "committedDate": "2020-08-26T09:39:01Z", "message": "Fix Users update error message"}, "afterCommit": {"oid": "c5fa10cc80de3d463a9c3458584c4dbf9e223cca", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/c5fa10cc80de3d463a9c3458584c4dbf9e223cca", "committedDate": "2020-08-28T09:12:32Z", "message": "Rename variable in UsersDomain"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3NjU2OTU5", "url": "https://github.com/Graylog2/graylog2-server/pull/8823#pullrequestreview-477656959", "createdAt": "2020-08-28T11:36:09Z", "commit": {"oid": "c5fa10cc80de3d463a9c3458584c4dbf9e223cca"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2839, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}