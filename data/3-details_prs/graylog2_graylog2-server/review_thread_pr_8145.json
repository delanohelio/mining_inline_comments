{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE5NDI1MjA0", "number": 8145, "reviewThreads": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQwODozNDoxNFrOEJlzVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxMzowNDoxM1rOEOP6rw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc4NDkxOTkxOnYy", "diffSide": "RIGHT", "path": "graylog2-server/src/main/java/org/graylog2/streams/matchers/MatchInput.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQwODozNDoxNFrOGqKMig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQwODozNDoxNFrOGqKMig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njg2MDQyNg==", "bodyText": "IMO we can do a case-insensitive check in here, as afaics input IDs should be unique regarding the case.", "url": "https://github.com/Graylog2/graylog2-server/pull/8145#discussion_r446860426", "createdAt": "2020-06-29T08:34:14Z", "author": {"login": "dennisoelkers"}, "path": "graylog2-server/src/main/java/org/graylog2/streams/matchers/MatchInput.java", "diffHunk": "@@ -0,0 +1,32 @@\n+/**\n+ * This file is part of Graylog.\n+ *\n+ * Graylog is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Graylog is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Graylog.  If not, see <http://www.gnu.org/licenses/>.\n+ */\n+package org.graylog2.streams.matchers;\n+\n+import org.graylog2.plugin.Message;\n+import org.graylog2.plugin.streams.StreamRule;\n+\n+public class MatchInput implements StreamRuleMatcher {\n+\n+    @Override\n+    public boolean match(Message msg, StreamRule rule) {\n+       if(msg.getField(Message.FIELD_GL2_SOURCE_INPUT) == null) {\n+           return rule.getInverted();\n+       }\n+        final String value = msg.getField(Message.FIELD_GL2_SOURCE_INPUT).toString();\n+        return rule.getInverted() ^ value.trim().equals(rule.getValue());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3429f4bf2ceb5348a0db5011c3456dd11104b6e7"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc4NDkyNTM0OnYy", "diffSide": "RIGHT", "path": "graylog2-server/src/main/java/org/graylog2/streams/StreamRouterEngine.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQwODozNTozNVrOGqKPng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwOTowNTo0MFrOGue_Fg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njg2MTIxNA==", "bodyText": "The rules list should be ordered by matching complexity of the rules (ascending), so the match input rules should be before or after exactRules.", "url": "https://github.com/Graylog2/graylog2-server/pull/8145#discussion_r446861214", "createdAt": "2020-06-29T08:35:35Z", "author": {"login": "dennisoelkers"}, "path": "graylog2-server/src/main/java/org/graylog2/streams/StreamRouterEngine.java", "diffHunk": "@@ -135,6 +139,7 @@ public StreamRouterEngine(@Assisted List<Stream> streams,\n         this.rulesList.addAll(smallerRules);\n         this.rulesList.addAll(containsRules);\n         this.rulesList.addAll(regexRules);\n+        this.rulesList.addAll(matchInputRules);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3429f4bf2ceb5348a0db5011c3456dd11104b6e7"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODg2MzUwOQ==", "bodyText": "I moved it below contains rule. Since it is just that.", "url": "https://github.com/Graylog2/graylog2-server/pull/8145#discussion_r448863509", "createdAt": "2020-07-02T09:14:10Z", "author": {"login": "kmerz"}, "path": "graylog2-server/src/main/java/org/graylog2/streams/StreamRouterEngine.java", "diffHunk": "@@ -135,6 +139,7 @@ public StreamRouterEngine(@Assisted List<Stream> streams,\n         this.rulesList.addAll(smallerRules);\n         this.rulesList.addAll(containsRules);\n         this.rulesList.addAll(regexRules);\n+        this.rulesList.addAll(matchInputRules);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njg2MTIxNA=="}, "originalCommit": {"oid": "3429f4bf2ceb5348a0db5011c3456dd11104b6e7"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTM5NTM1MA==", "bodyText": "It should be after the exactRules, as it does not do a contains check, but an equals check.", "url": "https://github.com/Graylog2/graylog2-server/pull/8145#discussion_r451395350", "createdAt": "2020-07-08T09:05:40Z", "author": {"login": "dennisoelkers"}, "path": "graylog2-server/src/main/java/org/graylog2/streams/StreamRouterEngine.java", "diffHunk": "@@ -135,6 +139,7 @@ public StreamRouterEngine(@Assisted List<Stream> streams,\n         this.rulesList.addAll(smallerRules);\n         this.rulesList.addAll(containsRules);\n         this.rulesList.addAll(regexRules);\n+        this.rulesList.addAll(matchInputRules);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njg2MTIxNA=="}, "originalCommit": {"oid": "3429f4bf2ceb5348a0db5011c3456dd11104b6e7"}, "originalPosition": 37}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgxNDM2NzcyOnYy", "diffSide": "RIGHT", "path": "graylog2-server/src/main/java/org/graylog2/streams/matchers/MatchInput.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwOTowNTowM1rOGue9hg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwOTowNTowM1rOGue9hg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTM5NDk1MA==", "bodyText": "The naming scheme for matchers is <Type>Matcher, so it should be InputMatcher for this one.", "url": "https://github.com/Graylog2/graylog2-server/pull/8145#discussion_r451394950", "createdAt": "2020-07-08T09:05:03Z", "author": {"login": "dennisoelkers"}, "path": "graylog2-server/src/main/java/org/graylog2/streams/matchers/MatchInput.java", "diffHunk": "@@ -0,0 +1,32 @@\n+/**\n+ * This file is part of Graylog.\n+ *\n+ * Graylog is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Graylog is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Graylog.  If not, see <http://www.gnu.org/licenses/>.\n+ */\n+package org.graylog2.streams.matchers;\n+\n+import org.graylog2.plugin.Message;\n+import org.graylog2.plugin.streams.StreamRule;\n+\n+public class MatchInput implements StreamRuleMatcher {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b17c069d4eae077bbb372bbaca49adac1a612646"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgxNDM3NzU5OnYy", "diffSide": "RIGHT", "path": "graylog2-server/src/test/java/org/graylog2/streams/matchers/MatchInputTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwOTowNzo0NlrOGufDrA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwOTowNzo0NlrOGufDrA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTM5NjUyNA==", "bodyText": "Instead of message-id-... we should use input-id-... in the tests to make the intention clearer.", "url": "https://github.com/Graylog2/graylog2-server/pull/8145#discussion_r451396524", "createdAt": "2020-07-08T09:07:46Z", "author": {"login": "dennisoelkers"}, "path": "graylog2-server/src/test/java/org/graylog2/streams/matchers/MatchInputTest.java", "diffHunk": "@@ -0,0 +1,110 @@\n+/**\n+ * This file is part of Graylog.\n+ *\n+ * Graylog is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Graylog is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Graylog.  If not, see <http://www.gnu.org/licenses/>.\n+ */\n+package org.graylog2.streams.matchers;\n+\n+import org.graylog2.plugin.Message;\n+import org.graylog2.plugin.streams.StreamRule;\n+import org.graylog2.plugin.streams.StreamRuleType;\n+import org.junit.Test;\n+\n+import static org.junit.Assert.assertFalse;\n+import static org.junit.Assert.assertTrue;\n+\n+public class MatchInputTest extends MatcherTest {\n+\n+    @Test\n+    public void testSuccessfulMatch() {\n+        StreamRule rule = getSampleRule();\n+        rule.setValue(\"message-id-beef\");\n+\n+        Message msg = getSampleMessage();\n+        msg.addField(Message.FIELD_GL2_SOURCE_INPUT, \"message-id-beef\");\n+\n+        StreamRuleMatcher matcher = getMatcher(rule);\n+        assertTrue(matcher.match(msg, rule));\n+    }\n+\n+    @Test\n+    public void testUnsuccessfulMatch() {\n+        StreamRule rule = getSampleRule();\n+        rule.setValue(\"message-id-dead\");\n+\n+        Message msg = getSampleMessage();\n+        msg.addField(Message.FIELD_GL2_SOURCE_INPUT, \"message-id-beef\");\n+\n+        StreamRuleMatcher matcher = getMatcher(rule);\n+        assertFalse(matcher.match(msg, rule));\n+    }\n+\n+    @Test\n+    public void testUnsuccessfulMatchWhenMissing() {\n+        StreamRule rule = getSampleRule();\n+        rule.setValue(\"message-id-dead\");\n+\n+        Message msg = getSampleMessage();\n+\n+        StreamRuleMatcher matcher = getMatcher(rule);\n+        assertFalse(matcher.match(msg, rule));\n+    }\n+\n+    @Test\n+    public void testSuccessfulMatchInverted() {\n+        StreamRule rule = getSampleRule();\n+        rule.setValue(\"message-id-beef\");\n+        rule.setInverted(true);\n+\n+        Message msg = getSampleMessage();\n+        msg.addField(Message.FIELD_GL2_SOURCE_INPUT, \"message-id-beef\");\n+\n+        StreamRuleMatcher matcher = getMatcher(rule);\n+        assertFalse(matcher.match(msg, rule));\n+    }\n+\n+    @Test\n+    public void testUnsuccessfulMatchInverted() {\n+        StreamRule rule = getSampleRule();\n+        rule.setValue(\"message-id-dead\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b17c069d4eae077bbb372bbaca49adac1a612646"}, "originalPosition": 80}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzMzU3ODUzOnYy", "diffSide": "RIGHT", "path": "graylog2-web-interface/src/components/streamrules/HumanReadableStreamRule.jsx", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxMjoxNDoxM1rOGxQ9Lw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxMjoxNDoxM1rOGxQ9Lw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDMxMTIxNQ==", "bodyText": "The function name is giving the wrong impression of what it's doing. It should be something like findInput.", "url": "https://github.com/Graylog2/graylog2-server/pull/8145#discussion_r454311215", "createdAt": "2020-07-14T12:14:13Z", "author": {"login": "dennisoelkers"}, "path": "graylog2-web-interface/src/components/streamrules/HumanReadableStreamRule.jsx", "diffHunk": "@@ -23,7 +20,21 @@ class HumanReadableStreamRule extends React.Component {\n     return undefined;\n   };\n \n+  _inputName = (inputId) => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6288af01bcc2d3b0585116d3022f9de97c7e52ba"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzMzYwMDg5OnYy", "diffSide": "RIGHT", "path": "graylog2-web-interface/src/components/streamrules/HumanReadableStreamRule.jsx", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxMjoyMDo0MFrOGxRKoQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQwNjo1OTo1MVrOGyctIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDMxNDY1Nw==", "bodyText": "Right now, if the input does not exist/is not started, only the id is shown. IMO we should also show an indicator, something like <deleted input>, like we do in message details.", "url": "https://github.com/Graylog2/graylog2-server/pull/8145#discussion_r454314657", "createdAt": "2020-07-14T12:20:40Z", "author": {"login": "dennisoelkers"}, "path": "graylog2-web-interface/src/components/streamrules/HumanReadableStreamRule.jsx", "diffHunk": "@@ -23,7 +20,21 @@ class HumanReadableStreamRule extends React.Component {\n     return undefined;\n   };\n \n+  _inputName = (inputId) => {\n+    const { inputs } = this.props;\n+\n+    return inputs.find((input) => input.id === inputId);\n+  }\n+\n   _formatRuleValue = (streamRule) => {\n+    if (String(streamRule.type) === String(this.MATCH_INPUT)) {\n+      const input = this._inputName(streamRule.value);\n+\n+      if (input) {\n+        return `${input.title} (${input.name}: ${input.id})`;\n+      }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6288af01bcc2d3b0585116d3022f9de97c7e52ba"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTU1MjI4OQ==", "bodyText": "Best idea ever! Now you can remove the rules with deleted input!", "url": "https://github.com/Graylog2/graylog2-server/pull/8145#discussion_r455552289", "createdAt": "2020-07-16T06:59:51Z", "author": {"login": "kmerz"}, "path": "graylog2-web-interface/src/components/streamrules/HumanReadableStreamRule.jsx", "diffHunk": "@@ -23,7 +20,21 @@ class HumanReadableStreamRule extends React.Component {\n     return undefined;\n   };\n \n+  _inputName = (inputId) => {\n+    const { inputs } = this.props;\n+\n+    return inputs.find((input) => input.id === inputId);\n+  }\n+\n   _formatRuleValue = (streamRule) => {\n+    if (String(streamRule.type) === String(this.MATCH_INPUT)) {\n+      const input = this._inputName(streamRule.value);\n+\n+      if (input) {\n+        return `${input.title} (${input.name}: ${input.id})`;\n+      }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDMxNDY1Nw=="}, "originalCommit": {"oid": "6288af01bcc2d3b0585116d3022f9de97c7e52ba"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzMzczNDQyOnYy", "diffSide": "RIGHT", "path": "graylog2-web-interface/src/components/streamrules/HumanReadableStreamRule.jsx", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxMjo1NjozOFrOGxSb8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxMjo1NjozOFrOGxSb8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDMzNTQ3NQ==", "bodyText": "We do this String coercion a few times, not sure if it's worth doing once and setting as a const then comparing throughout the code?", "url": "https://github.com/Graylog2/graylog2-server/pull/8145#discussion_r454335475", "createdAt": "2020-07-14T12:56:38Z", "author": {"login": "kyleknighted"}, "path": "graylog2-web-interface/src/components/streamrules/HumanReadableStreamRule.jsx", "diffHunk": "@@ -40,6 +51,10 @@ class HumanReadableStreamRule extends React.Component {\n       return streamRule.field;\n     }\n \n+    if (String(streamRule.type) === String(this.MATCH_INPUT)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6288af01bcc2d3b0585116d3022f9de97c7e52ba"}, "originalPosition": 38}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzMzczNTMwOnYy", "diffSide": "RIGHT", "path": "graylog2-web-interface/src/components/streamrules/HumanReadableStreamRule.jsx", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxMjo1Njo1MlrOGxScdA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxMjo1Njo1MlrOGxScdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDMzNTYwNA==", "bodyText": "Is it possible to use shape here?", "url": "https://github.com/Graylog2/graylog2-server/pull/8145#discussion_r454335604", "createdAt": "2020-07-14T12:56:52Z", "author": {"login": "kyleknighted"}, "path": "graylog2-web-interface/src/components/streamrules/HumanReadableStreamRule.jsx", "diffHunk": "@@ -63,4 +78,14 @@ class HumanReadableStreamRule extends React.Component {\n   }\n }\n \n+HumanReadableStreamRule.propTypes = {\n+  streamRule: PropTypes.object.isRequired,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6288af01bcc2d3b0585116d3022f9de97c7e52ba"}, "originalPosition": 50}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzMzczNTgyOnYy", "diffSide": "RIGHT", "path": "graylog2-web-interface/src/components/streamrules/HumanReadableStreamRule.jsx", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxMjo1NzowMVrOGxScxA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxMjo1NzowMVrOGxScxA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDMzNTY4NA==", "bodyText": "Is it possible to use arrayOf here?", "url": "https://github.com/Graylog2/graylog2-server/pull/8145#discussion_r454335684", "createdAt": "2020-07-14T12:57:01Z", "author": {"login": "kyleknighted"}, "path": "graylog2-web-interface/src/components/streamrules/HumanReadableStreamRule.jsx", "diffHunk": "@@ -63,4 +78,14 @@ class HumanReadableStreamRule extends React.Component {\n   }\n }\n \n+HumanReadableStreamRule.propTypes = {\n+  streamRule: PropTypes.object.isRequired,\n+  streamRuleTypes: PropTypes.array.isRequired,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6288af01bcc2d3b0585116d3022f9de97c7e52ba"}, "originalPosition": 51}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzMzczNjc0OnYy", "diffSide": "RIGHT", "path": "graylog2-web-interface/src/components/streamrules/HumanReadableStreamRule.jsx", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxMjo1NzoxNlrOGxSdUg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxMjo1NzoxNlrOGxSdUg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDMzNTgyNg==", "bodyText": "Is it possible to use arrayOf here?", "url": "https://github.com/Graylog2/graylog2-server/pull/8145#discussion_r454335826", "createdAt": "2020-07-14T12:57:16Z", "author": {"login": "kyleknighted"}, "path": "graylog2-web-interface/src/components/streamrules/HumanReadableStreamRule.jsx", "diffHunk": "@@ -63,4 +78,14 @@ class HumanReadableStreamRule extends React.Component {\n   }\n }\n \n+HumanReadableStreamRule.propTypes = {\n+  streamRule: PropTypes.object.isRequired,\n+  streamRuleTypes: PropTypes.array.isRequired,\n+  inputs: PropTypes.array,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6288af01bcc2d3b0585116d3022f9de97c7e52ba"}, "originalPosition": 52}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzMzc0NjIyOnYy", "diffSide": "RIGHT", "path": "graylog2-web-interface/src/components/streamrules/StreamRuleForm.jsx", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxMjo1OTo0MFrOGxSjNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxMjo1OTo0MFrOGxSjNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDMzNzMzNQ==", "bodyText": "Is it possible for this to be arrayOf?", "url": "https://github.com/Graylog2/graylog2-server/pull/8145#discussion_r454337335", "createdAt": "2020-07-14T12:59:40Z", "author": {"login": "kyleknighted"}, "path": "graylog2-web-interface/src/components/streamrules/StreamRuleForm.jsx", "diffHunk": "@@ -129,10 +244,10 @@ StreamRuleForm.propTypes = {\n   streamRule: PropTypes.object,\n   streamRuleTypes: PropTypes.array.isRequired,\n   title: PropTypes.string.isRequired,\n+  inputs: PropTypes.array,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6288af01bcc2d3b0585116d3022f9de97c7e52ba"}, "originalPosition": 262}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzMzc1NjA4OnYy", "diffSide": "RIGHT", "path": "graylog2-web-interface/src/components/streamrules/StreamRulesEditor.jsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxMzowMjoyOVrOGxSpgg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxMzowMjoyOVrOGxSpgg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDMzODk0Ng==", "bodyText": "I think constructor needs to pass props to super or else it could lead to bugs\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              constructor() {\n          \n          \n            \n                super();\n          \n          \n            \n              constructor(props) {\n          \n          \n            \n                super(props);", "url": "https://github.com/Graylog2/graylog2-server/pull/8145#discussion_r454338946", "createdAt": "2020-07-14T13:02:29Z", "author": {"login": "kyleknighted"}, "path": "graylog2-web-interface/src/components/streamrules/StreamRulesEditor.jsx", "diffHunk": "@@ -46,7 +46,13 @@ class StreamRulesEditor extends React.Component {\n     index: '',\n   }\n \n-  state = {};\n+  constructor() {\n+    super();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6288af01bcc2d3b0585116d3022f9de97c7e52ba"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzMzc2MzAzOnYy", "diffSide": "RIGHT", "path": "graylog2-web-interface/src/components/streams/Stream.jsx", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxMzowNDoxM1rOGxStyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxMzowNDoxM1rOGxStyg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDM0MDA0Mg==", "bodyText": "Could we use components/bootstrap/BootstrapModalConfirm.jsx instead of window.confirm?", "url": "https://github.com/Graylog2/graylog2-server/pull/8145#discussion_r454340042", "createdAt": "2020-07-14T13:04:13Z", "author": {"login": "kyleknighted"}, "path": "graylog2-web-interface/src/components/streams/Stream.jsx", "diffHunk": "@@ -78,10 +78,19 @@ class Stream extends React.Component {\n \n     this.state = {\n       loading: false,\n+      showStreamRuleForm: false,\n     };\n   }\n \n-  _onDelete = (stream) => {\n+  _closeStreamRuleForm = () => {\n+    this.setState({ showStreamRuleForm: false });\n+  };\n+\n+  _openStreamRuleForm = () => {\n+    this.setState({ showStreamRuleForm: true });\n+  };\n+\n+  _onDelete= (stream) => {\n     // eslint-disable-next-line no-alert\n     if (window.confirm('Do you really want to remove this stream?')) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6288af01bcc2d3b0585116d3022f9de97c7e52ba"}, "originalPosition": 19}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4296, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}