{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcxNzAyMzEy", "number": 8848, "title": "Set font size defined in theme for query input", "bodyText": "This PR fixes a problem with long queries where uncontrollable whitespace is being added before the cursor.\n\nIn the above screenshot query is selected, but it looks like the selected text is ery  .\nFixes #8720.", "createdAt": "2020-08-21T15:31:19Z", "url": "https://github.com/Graylog2/graylog2-server/pull/8848", "merged": true, "mergeCommit": {"oid": "31b170efdd6da1659fce018d45cfe007775a0cc7"}, "closed": true, "closedAt": "2020-08-26T15:26:19Z", "author": {"login": "linuspahl"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdB9hHCAH2gAyNDcxNzAyMzEyOmFjMTc4NjUzZjg3NWY1NmVhMzI2ZTg0NzgwODgyNDMwMzI1MjQxMWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdCtgFBgFqTQ3NTYwMzQ1MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ac178653f875f56ea326e847808824303252411d", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/ac178653f875f56ea326e847808824303252411d", "committedDate": "2020-08-24T07:31:32Z", "message": "Define query input font size as react ace prop"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "60e3ca575262a4eadfd83bacd1783b3aeac51081", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/60e3ca575262a4eadfd83bacd1783b3aeac51081", "committedDate": "2020-08-21T15:28:58Z", "message": "Define query input font size as react ace prop"}, "afterCommit": {"oid": "ac178653f875f56ea326e847808824303252411d", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/ac178653f875f56ea326e847808824303252411d", "committedDate": "2020-08-24T07:31:32Z", "message": "Define query input font size as react ace prop"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDczMTk2MzU5", "url": "https://github.com/Graylog2/graylog2-server/pull/8848#pullrequestreview-473196359", "createdAt": "2020-08-24T07:50:50Z", "commit": {"oid": "ac178653f875f56ea326e847808824303252411d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQwNzo1MDo1MFrOHFYbnA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQwNzo1MDo1MFrOHFYbnA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTQwNTIxMg==", "bodyText": "Initially I wrapped QueryInput with withTheme,  but it results in a flow error I can't fix easily:\nCannot call withPluginEntities because property completers is missing in object type [1] in the first argument.\n[prop-missing]\n\n     src/views/components/searchbar/QueryInput.jsx\n     105\u2502   placeholder: '',\n     106\u2502 };\n     107\u2502\n     108\u2502 export default withPluginEntities(withTheme(QueryInput), { completers: 'views.completers' });\n     109\u2502\n\n     flow-typed/npm/styled-components_v4.x.x.js\n [1] 175\u2502   declare export function withTheme<Theme, Config: {...}, Instance>(Component: React$AbstractComponent<Config, Instance>): React$AbstractComponent<$Diff<Config, ThemeProps<Theme | void>>, Instance>\n\nI prefer the above structure and we do it similar in comparable cases where we use withPluginEntities  (e.g. in combination with withRouter), but I see no other disadvantage regarding the current structure.", "url": "https://github.com/Graylog2/graylog2-server/pull/8848#discussion_r475405212", "createdAt": "2020-08-24T07:50:50Z", "author": {"login": "linuspahl"}, "path": "graylog2-web-interface/src/views/components/searchbar/QueryInput.jsx", "diffHunk": "@@ -104,4 +104,4 @@ QueryInput.defaultProps = {\n   placeholder: '',\n };\n \n-export default withPluginEntities(QueryInput, { completers: 'views.completers' });\n+export default withTheme(withPluginEntities(QueryInput, { completers: 'views.completers' }));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ac178653f875f56ea326e847808824303252411d"}, "originalPosition": 60}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDczNDQwNTQ3", "url": "https://github.com/Graylog2/graylog2-server/pull/8848#pullrequestreview-473440547", "createdAt": "2020-08-24T12:59:49Z", "commit": {"oid": "ac178653f875f56ea326e847808824303252411d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxMjo1OTo0OVrOHFjPRA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxMzowMDozM1rOHFjRAQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTU4MjI3Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            import type { ThemeInterface } from 'theme';\n          \n          \n            \n            import { themePropTypes, type ThemeInterface } from 'theme';", "url": "https://github.com/Graylog2/graylog2-server/pull/8848#discussion_r475582276", "createdAt": "2020-08-24T12:59:49Z", "author": {"login": "kyleknighted"}, "path": "graylog2-web-interface/src/views/components/searchbar/QueryInput.jsx", "diffHunk": "@@ -1,8 +1,10 @@\n // @flow strict\n import * as React from 'react';\n import { useCallback, useMemo } from 'react';\n+import { withTheme } from 'styled-components';\n import PropTypes from 'prop-types';\n \n+import type { ThemeInterface } from 'theme';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ac178653f875f56ea326e847808824303252411d"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTU4MjcyMQ==", "bodyText": "Could we add theme: themePropTypes.isRequired to the propTypes object as well?", "url": "https://github.com/Graylog2/graylog2-server/pull/8848#discussion_r475582721", "createdAt": "2020-08-24T13:00:33Z", "author": {"login": "kyleknighted"}, "path": "graylog2-web-interface/src/views/components/searchbar/QueryInput.jsx", "diffHunk": "@@ -12,19 +14,20 @@ import SearchBarAutoCompletions from './SearchBarAutocompletions';\n import type { Completer } from './SearchBarAutocompletions';\n \n type Props = {|\n-  disabled: boolean,\n-  value: string,\n-  completers: Array<Completer>,\n   completerFactory: (Array<Completer>) => AutoCompleter,\n+  completers: Array<Completer>,\n+  disabled: boolean,\n   onBlur?: (string) => void,\n   onChange: (string) => Promise<string>,\n   onExecute: (string) => void,\n   placeholder: string,\n+  theme: ThemeInterface,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ac178653f875f56ea326e847808824303252411d"}, "originalPosition": 25}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0d24b855a7412798e93747b6c4c2dffc27c73ede", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/0d24b855a7412798e93747b6c4c2dffc27c73ede", "committedDate": "2020-08-26T06:49:20Z", "message": "Add prop type definition for QueryInoput theme prop"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b59c345ae7855a6bab0f00759bc1aaabe39c6a0a", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/b59c345ae7855a6bab0f00759bc1aaabe39c6a0a", "committedDate": "2020-08-26T07:07:36Z", "message": "Wrap QueryInput with withTheme and define explicit types for this function call"}, "afterCommit": {"oid": "0d24b855a7412798e93747b6c4c2dffc27c73ede", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/0d24b855a7412798e93747b6c4c2dffc27c73ede", "committedDate": "2020-08-26T06:49:20Z", "message": "Add prop type definition for QueryInoput theme prop"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5cfaf4a4d89faee4923ec9485af5f7946c96f95f", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/5cfaf4a4d89faee4923ec9485af5f7946c96f95f", "committedDate": "2020-08-26T07:27:32Z", "message": "Wrap QueryInput with withTheme and define explicit types for this function call"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f79e13c772051adcf78c93fd2fccddb4271fb874", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/f79e13c772051adcf78c93fd2fccddb4271fb874", "committedDate": "2020-08-26T07:43:55Z", "message": "Define expicit type definitions for withPluginEntities call in QueryInput"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1NjAyMTQz", "url": "https://github.com/Graylog2/graylog2-server/pull/8848#pullrequestreview-475602143", "createdAt": "2020-08-26T15:24:30Z", "commit": {"oid": "f79e13c772051adcf78c93fd2fccddb4271fb874"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1NjAzNDUx", "url": "https://github.com/Graylog2/graylog2-server/pull/8848#pullrequestreview-475603451", "createdAt": "2020-08-26T15:25:51Z", "commit": {"oid": "f79e13c772051adcf78c93fd2fccddb4271fb874"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2857, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}