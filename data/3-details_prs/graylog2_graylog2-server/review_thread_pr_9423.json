{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE4NDkyNTc5", "number": 9423, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxMToyMToyOVrOE3qavw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQwOTo1MToyMFrOE5XIeQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2ODAyMTExOnYy", "diffSide": "RIGHT", "path": "graylog2-web-interface/src/pages/IndicesPage.jsx", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxMToyMToyOVrOHxJASQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxMTozNDo1M1rOHxJazw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTI4OTgwMQ==", "bodyText": "I suggest moving these checks into AppRouter, so that react-router will not have the route configuration for routes that should be hidden. This helps us by not having to modify each page that should be hidden, and the behaviour is more consistent with other routes that do not exist.\nSomething like this should do the trick:\n--- a/graylog2-web-interface/src/routing/AppRouter.jsx\n+++ b/graylog2-web-interface/src/routing/AppRouter.jsx\n@@ -87,6 +87,7 @@ import {\n } from 'pages';\n \n import RouterErrorBoundary from 'components/errors/RouterErrorBoundary';\n+import withHideOnCloud from '../util/conditional/withHideOnCloud';\n \n const AppRouter = () => {\n   const pluginRoutes = PluginStore.exports('routes');\n@@ -162,7 +163,7 @@ const AppRouter = () => {\n                      component={EditContentPackPage} />\n               <Route path={Routes.SYSTEM.CONTENTPACKS.show(':contentPackId')} component={ShowContentPackPage} />\n               <Route path={Routes.SYSTEM.GROKPATTERNS} component={GrokPatternsPage} />\n-              <Route path={Routes.SYSTEM.INDICES.LIST} component={IndicesPage} />\n+              {withHideOnCloud(<Route path={Routes.SYSTEM.INDICES.LIST} component={IndicesPage} />)}\n               <Route path={Routes.SYSTEM.INDEX_SETS.CREATE} component={IndexSetCreationPage} />\n               <Route path={Routes.SYSTEM.INDEX_SETS.SHOW(':indexSetId')} component={IndexSetPage} />\n               <Route path={Routes.SYSTEM.INDEX_SETS.CONFIGURATION(':indexSetId')}", "url": "https://github.com/Graylog2/graylog2-server/pull/9423#discussion_r521289801", "createdAt": "2020-11-11T11:21:29Z", "author": {"login": "edmundoa"}, "path": "graylog2-web-interface/src/pages/IndicesPage.jsx", "diffHunk": "@@ -48,4 +49,4 @@ class IndicesPage extends React.Component {\n   }\n }\n \n-export default IndicesPage;\n+export default withHideOnCloud(IndicesPage);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dfa9e00587fcba252d6c1910acb20f264b13c543"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTI5NjU5MQ==", "bodyText": "I was thinking the exact same thing earlier. Makes it a lot safer too. Will change the PRs to reflect this.", "url": "https://github.com/Graylog2/graylog2-server/pull/9423#discussion_r521296591", "createdAt": "2020-11-11T11:34:53Z", "author": {"login": "Gaya"}, "path": "graylog2-web-interface/src/pages/IndicesPage.jsx", "diffHunk": "@@ -48,4 +49,4 @@ class IndicesPage extends React.Component {\n   }\n }\n \n-export default IndicesPage;\n+export default withHideOnCloud(IndicesPage);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTI4OTgwMQ=="}, "originalCommit": {"oid": "dfa9e00587fcba252d6c1910acb20f264b13c543"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI4NTgzMjg5OnYy", "diffSide": "RIGHT", "path": "graylog2-web-interface/src/routing/AppRouter.jsx", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQwOTo1MToyMFrOHzxSbg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQxMDo1Mjo0NFrOHz1dDg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDA0Njk1OA==", "bodyText": "These three lines have an eslint error:\nESLint: Missing parentheses around multilines JSX(react/jsx-wrap-multilines)", "url": "https://github.com/Graylog2/graylog2-server/pull/9423#discussion_r524046958", "createdAt": "2020-11-16T09:51:20Z", "author": {"login": "edmundoa"}, "path": "graylog2-web-interface/src/routing/AppRouter.jsx", "diffHunk": "@@ -162,12 +165,15 @@ const AppRouter = () => {\n                      component={EditContentPackPage} />\n               <Route path={Routes.SYSTEM.CONTENTPACKS.show(':contentPackId')} component={ShowContentPackPage} />\n               <Route path={Routes.SYSTEM.GROKPATTERNS} component={GrokPatternsPage} />\n-              <Route path={Routes.SYSTEM.INDICES.LIST} component={IndicesPage} />\n-              <Route path={Routes.SYSTEM.INDEX_SETS.CREATE} component={IndexSetCreationPage} />\n-              <Route path={Routes.SYSTEM.INDEX_SETS.SHOW(':indexSetId')} component={IndexSetPage} />\n-              <Route path={Routes.SYSTEM.INDEX_SETS.CONFIGURATION(':indexSetId')}\n-                     component={IndexSetConfigurationPage} />\n-              <Route path={Routes.SYSTEM.INDICES.FAILURES} component={IndexerFailuresPage} />\n+\n+              {!isCloud && <Route path={Routes.SYSTEM.INDEX_SETS.CREATE}\n+                                  component={IndexSetCreationPage} />}\n+              {!isCloud && <Route path={Routes.SYSTEM.INDEX_SETS.SHOW(':indexSetId')}\n+                                  component={IndexSetPage} />}\n+              {!isCloud && <Route path={Routes.SYSTEM.INDEX_SETS.CONFIGURATION(':indexSetId')}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0caba56051efcd828cb1124a621f13e4ca1169ec"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDExNTIxNA==", "bodyText": "Good catch. I improved that part and grouped the routes into one fragment", "url": "https://github.com/Graylog2/graylog2-server/pull/9423#discussion_r524115214", "createdAt": "2020-11-16T10:52:44Z", "author": {"login": "Gaya"}, "path": "graylog2-web-interface/src/routing/AppRouter.jsx", "diffHunk": "@@ -162,12 +165,15 @@ const AppRouter = () => {\n                      component={EditContentPackPage} />\n               <Route path={Routes.SYSTEM.CONTENTPACKS.show(':contentPackId')} component={ShowContentPackPage} />\n               <Route path={Routes.SYSTEM.GROKPATTERNS} component={GrokPatternsPage} />\n-              <Route path={Routes.SYSTEM.INDICES.LIST} component={IndicesPage} />\n-              <Route path={Routes.SYSTEM.INDEX_SETS.CREATE} component={IndexSetCreationPage} />\n-              <Route path={Routes.SYSTEM.INDEX_SETS.SHOW(':indexSetId')} component={IndexSetPage} />\n-              <Route path={Routes.SYSTEM.INDEX_SETS.CONFIGURATION(':indexSetId')}\n-                     component={IndexSetConfigurationPage} />\n-              <Route path={Routes.SYSTEM.INDICES.FAILURES} component={IndexerFailuresPage} />\n+\n+              {!isCloud && <Route path={Routes.SYSTEM.INDEX_SETS.CREATE}\n+                                  component={IndexSetCreationPage} />}\n+              {!isCloud && <Route path={Routes.SYSTEM.INDEX_SETS.SHOW(':indexSetId')}\n+                                  component={IndexSetPage} />}\n+              {!isCloud && <Route path={Routes.SYSTEM.INDEX_SETS.CONFIGURATION(':indexSetId')}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDA0Njk1OA=="}, "originalCommit": {"oid": "0caba56051efcd828cb1124a621f13e4ca1169ec"}, "originalPosition": 32}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4410, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}