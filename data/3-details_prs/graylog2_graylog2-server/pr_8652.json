{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU4NTA3Mzkz", "number": 8652, "title": "Use GRNs instead of Strings in AvailableGrantee model", "bodyText": "/jenkins-pr-deps Graylog2/graylog-plugin-enterprise#1676", "createdAt": "2020-07-29T15:16:34Z", "url": "https://github.com/Graylog2/graylog2-server/pull/8652", "merged": true, "mergeCommit": {"oid": "59223e3f7db76fe888b7c1acaf6b2747b56dfcc7"}, "closed": true, "closedAt": "2020-08-04T15:08:04Z", "author": {"login": "mpfz0r"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc5q9_GgH2gAyNDU4NTA3MzkzOjU2Zjc1MjU1ZTU0NDA2YmEwNDA0NzBhMDUxYWE3NDNiM2M1MDQ5NWM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc7oDxOAFqTQ2MDkwNjc0OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "56f75255e54406ba040470a051aa743b3c50495c", "author": {"user": {"login": "mpfz0r", "name": "Marco Pfatschbacher"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/56f75255e54406ba040470a051aa743b3c50495c", "committedDate": "2020-07-29T13:23:29Z", "message": "Use GRNs instead of Strings in AvailableGrantee model"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU4NDU2NTc3", "url": "https://github.com/Graylog2/graylog2-server/pull/8652#pullrequestreview-458456577", "createdAt": "2020-07-30T14:28:52Z", "commit": {"oid": "56f75255e54406ba040470a051aa743b3c50495c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNDoyODo1MlrOG5ll9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNDoyODo1MlrOG5ll9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzAzNzk0MQ==", "bodyText": "Why are you converting this into a method instead of keeping it as a constant? If we use a method, we should adhere to the method naming conventions.", "url": "https://github.com/Graylog2/graylog2-server/pull/8652#discussion_r463037941", "createdAt": "2020-07-30T14:28:52Z", "author": {"login": "bernd"}, "path": "graylog2-server/src/main/java/org/graylog/grn/GRNRegistry.java", "diffHunk": "@@ -33,7 +33,10 @@\n  */\n @Singleton\n public class GRNRegistry {\n-    public static final String GLOBAL_USER_GRN = \"grn::::builtin-team:everyone\"; // TODO: Find a better name for the \"everyone\" grantee GRN type\n+    // TODO: Find a better name for the \"everyone\" grantee GRN type\n+    public GRN GLOBAL_USER_GRN() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "56f75255e54406ba040470a051aa743b3c50495c"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f785e5e48dae86b0516cc9ca2f7cd42433f598c", "author": {"user": {"login": "mpfz0r", "name": "Marco Pfatschbacher"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/3f785e5e48dae86b0516cc9ca2f7cd42433f598c", "committedDate": "2020-07-31T10:37:39Z", "message": "Merge remote-tracking branch 'origin/feature/permissions' into add-teams-support"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "563a7859fc244b94db96c0057a707776191b9760", "author": {"user": {"login": "mpfz0r", "name": "Marco Pfatschbacher"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/563a7859fc244b94db96c0057a707776191b9760", "committedDate": "2020-08-03T08:49:17Z", "message": "Keep GLOBAL_USER_GRN a constant"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwODI5Mzc4", "url": "https://github.com/Graylog2/graylog2-server/pull/8652#pullrequestreview-460829378", "createdAt": "2020-08-04T13:49:19Z", "commit": {"oid": "563a7859fc244b94db96c0057a707776191b9760"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxMzo0OToxOVrOG7hORg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxMzo0OToxOVrOG7hORg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTA2MzQ5NA==", "bodyText": "How about using this? That way we can make it static and don't have a public instance field that looks like a constant.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public final GRN GLOBAL_USER_GRN = newGRN(GRNTypes.BUILTIN_TEAM, \"everyone\");\n          \n          \n            \n                public static final GRN GLOBAL_USER_GRN = BUILTIN_TEAM.newGRNBuilder().entity(\"everyone\").build();;", "url": "https://github.com/Graylog2/graylog2-server/pull/8652#discussion_r465063494", "createdAt": "2020-08-04T13:49:19Z", "author": {"login": "bernd"}, "path": "graylog2-server/src/main/java/org/graylog/grn/GRNRegistry.java", "diffHunk": "@@ -33,7 +33,8 @@\n  */\n @Singleton\n public class GRNRegistry {\n-    public static final String GLOBAL_USER_GRN = \"grn::::builtin-team:everyone\"; // TODO: Find a better name for the \"everyone\" grantee GRN type\n+    // TODO: Find a better name for the \"everyone\" grantee GRN type\n+    public final GRN GLOBAL_USER_GRN = newGRN(GRNTypes.BUILTIN_TEAM, \"everyone\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "563a7859fc244b94db96c0057a707776191b9760"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e496364499970309206622ec301459ccc71d3bc4", "author": {"user": {"login": "mpfz0r", "name": "Marco Pfatschbacher"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/e496364499970309206622ec301459ccc71d3bc4", "committedDate": "2020-08-04T13:55:58Z", "message": "Update graylog2-server/src/main/java/org/graylog/grn/GRNRegistry.java\n\nCo-authored-by: Bernd Ahlers <bernd@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e420265297d81949538b912288ddf21b59110e11", "author": {"user": {"login": "bernd", "name": "Bernd Ahlers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/e420265297d81949538b912288ddf21b59110e11", "committedDate": "2020-08-04T14:07:23Z", "message": "Fix compile error and access constant via class"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwOTA2NzQ5", "url": "https://github.com/Graylog2/graylog2-server/pull/8652#pullrequestreview-460906749", "createdAt": "2020-08-04T15:07:56Z", "commit": {"oid": "e420265297d81949538b912288ddf21b59110e11"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2909, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}