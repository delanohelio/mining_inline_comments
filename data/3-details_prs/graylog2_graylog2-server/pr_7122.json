{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYwODYxMTE5", "number": 7122, "title": "Use Urlwhitelist API instead of clusterConfig API", "bodyText": "Before this change we were using ClusterConfig API to update\nUrlwhitelist, result of that audit log shows cluster config event\ninstead of Urlwhitelist event.\n\nAdd updateWhitelist method to store\nUpdate ConfigurationsPage to use updateWhitelist when updating\nurlwhitelist\n\n\nDescription\n\nMotivation and Context\n\n\nHow Has This Been Tested?\n\n\n\nScreenshots (if appropriate):\nTypes of changes\n\n\n Bug fix (non-breaking change which fixes an issue)\n New feature (non-breaking change which adds functionality)\n Refactoring (non-breaking change)\n Breaking change (fix or feature that would cause existing functionality to change)\n\nChecklist:\n\n\n\n My code follows the code style of this project.\n My change requires a change to the documentation.\n I have updated the documentation accordingly.\n I have read the CONTRIBUTING document.\n I have added tests to cover my changes.", "createdAt": "2020-01-09T09:38:43Z", "url": "https://github.com/Graylog2/graylog2-server/pull/7122", "merged": true, "mergeCommit": {"oid": "efb7016def0852c4c7aca61176abb928ca72352c"}, "closed": true, "closedAt": "2020-01-09T16:36:57Z", "author": {"login": "ousmaneo"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb4mm4cgH2gAyMzYwODYxMTE5OjBjZTA1ZTVlODlmZWU0ZmY0MTk4ZDY1ZDYxMjJmYjY2OGRmZjAyMWY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb4sqYQAFqTM0MDY1NTA4OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0ce05e5e89fee4ff4198d65d6122fb668dff021f", "author": {"user": {"login": "ousmaneo", "name": "Ousmane SAMBA"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/0ce05e5e89fee4ff4198d65d6122fb668dff021f", "committedDate": "2020-01-09T09:33:33Z", "message": "Use Urlwhitelist API instead of clusterConfig API\n\nBefore this change we were using ClusterConfig API to update\nUrlwhitelist, result of that audit log shows cluster config event\ninstead of Urlwhitelist event.\n\n* Add updateWhitelist method to store\n* Update ConfigurationsPage to use updateWhitelist when updating\nurlwhitelist"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQwNDAyNjE5", "url": "https://github.com/Graylog2/graylog2-server/pull/7122#pullrequestreview-340402619", "createdAt": "2020-01-09T09:55:33Z", "commit": {"oid": "0ce05e5e89fee4ff4198d65d6122fb668dff021f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQwOTo1NTozM1rOFbwVNA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQwOTo1NTozM1rOFbwVNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDY0NzczMg==", "bodyText": "We should adjust the wording here to refer to the URL whitelist instead of \"Search\".", "url": "https://github.com/Graylog2/graylog2-server/pull/7122#discussion_r364647732", "createdAt": "2020-01-09T09:55:33Z", "author": {"login": "thll"}, "path": "graylog2-web-interface/src/stores/configurations/ConfigurationsStore.js", "diffHunk": "@@ -115,6 +115,24 @@ const ConfigurationsStore = Reflux.createStore({\n     ConfigurationActions.update.promise(promise);\n   },\n \n+  updateWhitelist(configType, config) {\n+    const promise = fetch('PUT', URLUtils.qualifyUrl('/system/urlwhitelist'), config);\n+\n+    promise.then(\n+      () => {\n+        this.configuration[configType] = config;\n+        this.propagateChanges();\n+        UserNotification.success('Configuration updated successfully');\n+        return config;\n+      },\n+      (error) => {\n+        UserNotification.error(`Search config update failed: ${error}`, `Could not update search config: ${configType}`);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0ce05e5e89fee4ff4198d65d6122fb668dff021f"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef27b5f1a076c04c8fdb7c507d053cae0846e751", "author": {"user": {"login": "ousmaneo", "name": "Ousmane SAMBA"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/ef27b5f1a076c04c8fdb7c507d053cae0846e751", "committedDate": "2020-01-09T10:21:59Z", "message": "Change wording"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQwNjU1MDg4", "url": "https://github.com/Graylog2/graylog2-server/pull/7122#pullrequestreview-340655088", "createdAt": "2020-01-09T16:36:48Z", "commit": {"oid": "ef27b5f1a076c04c8fdb7c507d053cae0846e751"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2792, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}