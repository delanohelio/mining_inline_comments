{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU5NTk0MjYx", "number": 7087, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNlQxNjo0NToxN1rODWBkIw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QxMjoxOTo1MFrODWO4OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0NDIwODk5OnYy", "diffSide": "RIGHT", "path": "graylog2-server/src/main/java/org/graylog2/plugin/configuration/ConfigurationRequest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNlQxNjo0NToxN1rOFai1zw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNlQxNzoxNjoxNFrOFajrYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzM3ODEyNw==", "bodyText": "This will break the TextField.LIST_TYPE case, because it now also returns on the break. We need to implement a separate case for ListField.FIELD_TYPE that also sets the list value like the DropdownField.FIELD_TYPE does. (just for lists) This probably needs a listIsSet(String) method implementation in org.graylog2.plugin.configuration.Configuration.", "url": "https://github.com/Graylog2/graylog2-server/pull/7087#discussion_r363378127", "createdAt": "2020-01-06T16:45:17Z", "author": {"login": "bernd"}, "path": "graylog2-server/src/main/java/org/graylog2/plugin/configuration/ConfigurationRequest.java", "diffHunk": "@@ -150,6 +152,8 @@ public Configuration filter(Configuration config) {\n                     }\n                     break;\n                 case TextField.FIELD_TYPE:\n+                case ListField.FIELD_TYPE:\n+                    break;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b307029ecb8f9ab0dcd660627e131998efea8d66"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzM5MTg0Mw==", "bodyText": "oh okay. will add method.", "url": "https://github.com/Graylog2/graylog2-server/pull/7087#discussion_r363391843", "createdAt": "2020-01-06T17:16:14Z", "author": {"login": "cobaltclaudia"}, "path": "graylog2-server/src/main/java/org/graylog2/plugin/configuration/ConfigurationRequest.java", "diffHunk": "@@ -150,6 +152,8 @@ public Configuration filter(Configuration config) {\n                     }\n                     break;\n                 case TextField.FIELD_TYPE:\n+                case ListField.FIELD_TYPE:\n+                    break;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzM3ODEyNw=="}, "originalCommit": {"oid": "b307029ecb8f9ab0dcd660627e131998efea8d66"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0NDIxMzc2OnYy", "diffSide": "RIGHT", "path": "graylog2-server/src/main/java/org/graylog2/plugin/configuration/ConfigurationRequest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNlQxNjo0Njo1NVrOFai40A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNlQxNjo0Njo1NVrOFai40A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzM3ODg5Ng==", "bodyText": "We also need to add a case for ListField.FIELD_TYPE in the check() method in this class.", "url": "https://github.com/Graylog2/graylog2-server/pull/7087#discussion_r363378896", "createdAt": "2020-01-06T16:46:55Z", "author": {"login": "bernd"}, "path": "graylog2-server/src/main/java/org/graylog2/plugin/configuration/ConfigurationRequest.java", "diffHunk": "@@ -150,6 +152,8 @@ public Configuration filter(Configuration config) {\n                     }\n                     break;\n                 case TextField.FIELD_TYPE:\n+                case ListField.FIELD_TYPE:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b307029ecb8f9ab0dcd660627e131998efea8d66"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0NjM4NDY3OnYy", "diffSide": "RIGHT", "path": "graylog2-server/src/main/java/org/graylog2/plugin/configuration/Configuration.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QxMjoxNzowNlrOFa30Hw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QxMjoxNzowNlrOFa30Hw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzcyMTc1OQ==", "bodyText": "This needs to check if the list for the given key is set. The current code is checking if the map of lists is empty or not. So this needs to be something along the lines of:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    return !lists.isEmpty();\n          \n          \n            \n                    return lists.containsKey(key);", "url": "https://github.com/Graylog2/graylog2-server/pull/7087#discussion_r363721759", "createdAt": "2020-01-07T12:17:06Z", "author": {"login": "bernd"}, "path": "graylog2-server/src/main/java/org/graylog2/plugin/configuration/Configuration.java", "diffHunk": "@@ -138,6 +138,10 @@ public void setBoolean(String key, boolean value) {\n         return firstNonNull(lists.get(key), defaultValue);\n     }\n \n+    public boolean listIsSet(String key) {\n+        return !lists.isEmpty();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1594a4e870c11fd277167692b53bb36129a4b09f"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0NjM4OTUwOnYy", "diffSide": "RIGHT", "path": "graylog2-server/src/main/java/org/graylog2/plugin/configuration/ConfigurationRequest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QxMjoxOToyMFrOFa328A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QxMjoxOToyMFrOFa328A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzcyMjQ4MA==", "bodyText": "This breaks the TextField.FIELD_TYPE. Before this PR, the TextField and DropdownField used the same implementation. (by relying on the fallthrough property of the switch case) This needs to stay the way it was before.", "url": "https://github.com/Graylog2/graylog2-server/pull/7087#discussion_r363722480", "createdAt": "2020-01-07T12:19:20Z", "author": {"login": "bernd"}, "path": "graylog2-server/src/main/java/org/graylog2/plugin/configuration/ConfigurationRequest.java", "diffHunk": "@@ -113,6 +115,12 @@ public void check(Configuration configuration) throws ConfigurationException {\n                         }\n                         break;\n                     case TextField.FIELD_TYPE:\n+                        break;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1594a4e870c11fd277167692b53bb36129a4b09f"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0NjM5MDMzOnYy", "diffSide": "RIGHT", "path": "graylog2-server/src/main/java/org/graylog2/plugin/configuration/ConfigurationRequest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QxMjoxOTo1MFrOFa33ew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QxMjoxOTo1MFrOFa33ew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzcyMjYxOQ==", "bodyText": "Same as above, the fallthrough for the DropdownField implementation needs to stay for the TextField.", "url": "https://github.com/Graylog2/graylog2-server/pull/7087#discussion_r363722619", "createdAt": "2020-01-07T12:19:50Z", "author": {"login": "bernd"}, "path": "graylog2-server/src/main/java/org/graylog2/plugin/configuration/ConfigurationRequest.java", "diffHunk": "@@ -150,6 +158,12 @@ public Configuration filter(Configuration config) {\n                     }\n                     break;\n                 case TextField.FIELD_TYPE:\n+                    break;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1594a4e870c11fd277167692b53bb36129a4b09f"}, "originalPosition": 35}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3986, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}