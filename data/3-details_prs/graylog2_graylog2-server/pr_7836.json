{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAwMTQyMzUz", "number": 7836, "title": "Create separate context for current user", "bodyText": "This PR creates a context for the current user. Its value is being provided by the CurrentUserProvider which connects to the CurrentUserStore.\nThe CurrentUserProvider is being used in the LoggedInPage (wrapper for all pages which are accessible when being logged in), this way we don't need to connect the CurrentUserStore in App.jsx, ViewActionsMenu.jsx, UserTimezoneTimestamp.jsx, SavedSearchControls.jsx, SearchResultOverview.jsx, ShareViewModal.jsx, View.jsx, XYPlot.jsx\nThis PR also implements the timezone configured in the AppConfig as a fallback, if the user timezone is not defined.\nMotivation and Context\nWe should reduce the times we call connect -> render and connect -> shouldComponentUpdate. Currently render is being called over 1000 times and shouldComponentUpdate over 600 times on the default search page.\nJust removing connect from UserTimezoneTimestamp and CustomHighlighting (#8276) reduces the calls of connect -> render to ~50 and connect -> shouldComponentUpdate to ~ 20 times.\nTypes of changes\n\n\n Bug fix (non-breaking change which fixes an issue)\n New feature (non-breaking change which adds functionality)\n Refactoring (non-breaking change)\n Breaking change (fix or feature that would cause existing functionality to change)\n\nChecklist:\n\n\n\n My code follows the code style of this project.\n My change requires a change to the documentation.\n I have updated the documentation accordingly.\n I have read the CONTRIBUTING document.\n I have added tests to cover my changes.", "createdAt": "2020-04-07T09:15:36Z", "url": "https://github.com/Graylog2/graylog2-server/pull/7836", "merged": true, "mergeCommit": {"oid": "66f770cac85a8446ac82fef0ed4f95f7d9a0ee0f"}, "closed": true, "closedAt": "2020-06-23T07:45:20Z", "author": {"login": "linuspahl"}, "timelineItems": {"totalCount": 71, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcVPuyFAFqTM4ODkzNDI1Mw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcuAjV0AFqTQzNTUyMzYyMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg4OTM0MjUz", "url": "https://github.com/Graylog2/graylog2-server/pull/7836#pullrequestreview-388934253", "createdAt": "2020-04-07T09:18:09Z", "commit": {"oid": "e66605adc6c64d56460571631765c394fcd5c2b8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QwOToxODoxMFrOGB6kXA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QwOToxODoxMFrOGB6kXA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDY2MTM0MA==", "bodyText": "I had to use the ActionContext because AdditionalContext is not working with useContext, but I could also wrap the component in AdditionalContext.Provider, instead.", "url": "https://github.com/Graylog2/graylog2-server/pull/7836#discussion_r404661340", "createdAt": "2020-04-07T09:18:10Z", "author": {"login": "linuspahl"}, "path": "graylog2-web-interface/src/views/components/messagelist/CustomHighlighting.jsx", "diffHunk": "@@ -1,24 +1,22 @@\n // @flow strict\n import * as React from 'react';\n+import { useContext } from 'react';\n import PropTypes from 'prop-types';\n \n-import connect from 'stores/connect';\n-\n-import { HighlightingRulesStore } from 'views/stores/HighlightingRulesStore';\n+import { ActionContext } from 'views/logic/ActionContext';\n import DecoratorContext from 'views/components/messagelist/decoration/DecoratorContext';\n-import HighlightingRule from 'views/logic/views/formatting/highlighting/HighlightingRule';\n \n import PossiblyHighlight from './PossiblyHighlight';\n import Highlight from './Highlight';\n \n type Props = {\n   children: ?React.Node,\n   field: string,\n-  highlightingRules: { [string]: Array<HighlightingRule> },\n   value?: any,\n };\n \n-const CustomHighlighting = ({ children, field: fieldName, value: fieldValue, highlightingRules }: Props) => {\n+const CustomHighlighting = ({ children, field: fieldName, value: fieldValue }: Props) => {\n+  const { highlightingRules = {} } = useContext(ActionContext);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e66605adc6c64d56460571631765c394fcd5c2b8"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5MDQxNDQ3", "url": "https://github.com/Graylog2/graylog2-server/pull/7836#pullrequestreview-389041447", "createdAt": "2020-04-07T11:54:19Z", "commit": {"oid": "e5112bea9518f2748bb337edb4f3354581710a38"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e5112bea9518f2748bb337edb4f3354581710a38", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/e5112bea9518f2748bb337edb4f3354581710a38", "committedDate": "2020-04-07T11:25:11Z", "message": "Extract currentUser from current user store on ViewAdditionalContextProvider creation"}, "afterCommit": {"oid": "381d70c64d354597d1d1707c078b3e7b957469a3", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/381d70c64d354597d1d1707c078b3e7b957469a3", "committedDate": "2020-04-09T10:22:57Z", "message": "Fix SavedSearchControls test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "381d70c64d354597d1d1707c078b3e7b957469a3", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/381d70c64d354597d1d1707c078b3e7b957469a3", "committedDate": "2020-04-09T10:22:57Z", "message": "Fix SavedSearchControls test"}, "afterCommit": {"oid": "61c1865d8c08080ce1b36e5dd6f46a5b0178fc2f", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/61c1865d8c08080ce1b36e5dd6f46a5b0178fc2f", "committedDate": "2020-04-15T09:42:53Z", "message": "Fix linting error"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "258e0b03021249b246f82c23ba299a8cdf286743", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/258e0b03021249b246f82c23ba299a8cdf286743", "committedDate": "2020-04-15T09:50:43Z", "message": "Revert not needed changes"}, "afterCommit": {"oid": "630a71f0cd218978df5b7818cf58da44a16c797f", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/630a71f0cd218978df5b7818cf58da44a16c797f", "committedDate": "2020-04-15T10:27:27Z", "message": "Add tests for HighlightingRulesProvider"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzOTk0Nzcz", "url": "https://github.com/Graylog2/graylog2-server/pull/7836#pullrequestreview-393994773", "createdAt": "2020-04-15T17:41:27Z", "commit": {"oid": "7429ed2a66e202f48a31fede002e69845aa52a28"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQxNzo0MToyN1rOGGEl4A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQxNzo0MToyN1rOGGEl4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTAxOTg3Mg==", "bodyText": "Since we're revising this component already, could we use createRef?", "url": "https://github.com/Graylog2/graylog2-server/pull/7836#discussion_r409019872", "createdAt": "2020-04-15T17:41:27Z", "author": {"login": "kyleknighted"}, "path": "graylog2-web-interface/src/views/components/searchbar/saved-search/SavedSearchControls.jsx", "diffHunk": "@@ -228,50 +205,48 @@ class SavedSearchControls extends React.Component<Props, State> {\n     );\n \n     return (\n-      <NewViewLoaderContext.Consumer>\n-        {(loadNewView) => (\n-          <div className=\"pull-right\">\n-            <ButtonGroup>\n-              <>\n-                <Button title={title} ref={(elem) => { this.formTarget = elem; }} onClick={this.toggleFormModal}>\n-                  <Icon style={{ color: savedSearchColor }} name={savedSearchStyle} /> Save\n-                </Button>\n-                {savedSearchForm}\n-              </>\n-              <Button title=\"Load a previously saved search\"\n-                      onClick={this.toggleListModal}>\n-                <Icon name=\"folder-o\" /> Load\n-              </Button>\n-              {savedSearchList}\n-              <DropdownButton title={<Icon name=\"ellipsis-h\" />} id=\"search-actions-dropdown\" pullRight noCaret>\n-                <MenuItem onSelect={this.loadAsDashboard}><Icon name=\"dashboard\" /> Export to dashboard</MenuItem>\n-                <MenuItem onSelect={this.toggleCSVExport}><Icon name=\"cloud-download\" /> Export to CSV</MenuItem>\n-                <MenuItem disabled={disableReset} onSelect={() => loadNewView()} data-testid=\"reset-search\">\n-                  <Icon name=\"eraser\" /> Reset search\n-                </MenuItem>\n-                <MenuItem divider />\n-                <MenuItem onSelect={this.toggleShareSearch} title=\"Share search\" disabled={!(view && view.id) || !_isAllowedToEdit(view, currentUser)}>\n-                  <Icon name=\"share-alt\" /> Share\n-                </MenuItem>\n-              </DropdownButton>\n-              {csvExport}\n-              {shareSearch}\n-            </ButtonGroup>\n-          </div>\n+      <CurrentUserContext.Consumer>\n+        {(currentUser) => (\n+          <NewViewLoaderContext.Consumer>\n+            {(loadNewView) => (\n+              <div className=\"pull-right\">\n+                <ButtonGroup>\n+                  <>\n+                    <Button title={title} ref={(elem) => { this.formTarget = elem; }} onClick={this.toggleFormModal}>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7429ed2a66e202f48a31fede002e69845aa52a28"}, "originalPosition": 128}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk0MDAxMzA5", "url": "https://github.com/Graylog2/graylog2-server/pull/7836#pullrequestreview-394001309", "createdAt": "2020-04-15T17:50:22Z", "commit": {"oid": "7429ed2a66e202f48a31fede002e69845aa52a28"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQxNzo1MDoyMlrOGGE7AQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQxNzo1MDoyMlrOGGE7AQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTAyNTI4MQ==", "bodyText": "graylog2-web-interface/config.js shows that the default timezone is 'Europe/Berlin'. Not sure if that's relevant. Also, should we hoist this default up into the context's default?", "url": "https://github.com/Graylog2/graylog2-server/pull/7836#discussion_r409025281", "createdAt": "2020-04-15T17:50:22Z", "author": {"login": "kyleknighted"}, "path": "graylog2-web-interface/src/views/components/visualizations/XYPlot.jsx", "diffHunk": "@@ -50,14 +47,14 @@ const XYPlot = ({\n   config,\n   chartData,\n   currentQuery,\n-  timezone,\n   effectiveTimerange,\n   getChartColor,\n   setChartColor,\n   height,\n   plotLayout = {},\n   onZoom = OnZoom,\n }: Props) => {\n+  const { timezone } = useContext(CurrentUserContext) || { timezone: 'UTC' };", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7429ed2a66e202f48a31fede002e69845aa52a28"}, "originalPosition": 44}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1MjU2NzI2", "url": "https://github.com/Graylog2/graylog2-server/pull/7836#pullrequestreview-395256726", "createdAt": "2020-04-17T08:23:58Z", "commit": {"oid": "be63f3f51517e2ba8cba2aa6117286d2f5a76b1d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QwODoyMzo1OFrOGHEpLA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QwOTowMzoxMVrOGHF9cA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDA2OTI5Mg==", "bodyText": "Instead of || we can now use ??, which returns the right side only if the left side is null or undefined, not just falsy. We should favor this now that we can use it over ||.", "url": "https://github.com/Graylog2/graylog2-server/pull/7836#discussion_r410069292", "createdAt": "2020-04-17T08:23:58Z", "author": {"login": "dennisoelkers"}, "path": "graylog2-web-interface/src/views/components/common/UserTimezoneTimestamp.jsx", "diffHunk": "@@ -1,25 +1,14 @@\n-import React from 'react';\n-import PropTypes from 'prop-types';\n+import React, { useContext } from 'react';\n \n-import connect from 'stores/connect';\n-import CombinedProvider from 'injection/CombinedProvider';\n+import AppConfig from 'util/AppConfig';\n+import CurrentUserContext from 'contexts/CurrentUserContext';\n import Timestamp from 'components/common/Timestamp';\n import DateTime from 'logic/datetimes/DateTime';\n \n-const { CurrentUserStore } = CombinedProvider.get('CurrentUser');\n-\n-const UserTimezoneTimestamp = ({ timezone, ...rest }) => <Timestamp tz={timezone} format={DateTime.Formats.DATETIME_TZ} {...rest} />;\n-\n-UserTimezoneTimestamp.propTypes = {\n-  timezone: PropTypes.string,\n-};\n-\n-UserTimezoneTimestamp.defaultProps = {\n-  timezone: null,\n+const UserTimezoneTimestamp = ({ ...rest }) => {\n+  const currentUser = useContext(CurrentUserContext);\n+  const timezone = currentUser?.timezone || AppConfig.rootTimeZone();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "be63f3f51517e2ba8cba2aa6117286d2f5a76b1d"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDA3MzIzNA==", "bodyText": "|| -> ??", "url": "https://github.com/Graylog2/graylog2-server/pull/7836#discussion_r410073234", "createdAt": "2020-04-17T08:31:05Z", "author": {"login": "dennisoelkers"}, "path": "graylog2-web-interface/src/views/components/messagelist/CustomHighlighting.jsx", "diffHunk": "@@ -1,26 +1,25 @@\n // @flow strict\n import * as React from 'react';\n+import { useContext } from 'react';\n import PropTypes from 'prop-types';\n \n-import connect from 'stores/connect';\n-\n-import { HighlightingRulesStore } from 'views/stores/HighlightingRulesStore';\n+import HighlightingRulesContext from 'views/components/contexts/HighlightingRulesContext';\n import DecoratorContext from 'views/components/messagelist/decoration/DecoratorContext';\n-import HighlightingRule from 'views/logic/views/formatting/highlighting/HighlightingRule';\n \n import PossiblyHighlight from './PossiblyHighlight';\n import Highlight from './Highlight';\n \n type Props = {\n   children: ?React.Node,\n   field: string,\n-  highlightingRules: { [string]: Array<HighlightingRule> },\n   value?: any,\n };\n \n-const CustomHighlighting = ({ children, field: fieldName, value: fieldValue, highlightingRules }: Props) => {\n+const CustomHighlighting = ({ children, field: fieldName, value: fieldValue }: Props) => {\n+  const highlightingRules = useContext(HighlightingRulesContext) || [];", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "be63f3f51517e2ba8cba2aa6117286d2f5a76b1d"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDA3MzUxMQ==", "bodyText": "|| -> ??", "url": "https://github.com/Graylog2/graylog2-server/pull/7836#discussion_r410073511", "createdAt": "2020-04-17T08:31:37Z", "author": {"login": "dennisoelkers"}, "path": "graylog2-web-interface/src/views/components/messagelist/CustomHighlighting.jsx", "diffHunk": "@@ -1,26 +1,25 @@\n // @flow strict\n import * as React from 'react';\n+import { useContext } from 'react';\n import PropTypes from 'prop-types';\n \n-import connect from 'stores/connect';\n-\n-import { HighlightingRulesStore } from 'views/stores/HighlightingRulesStore';\n+import HighlightingRulesContext from 'views/components/contexts/HighlightingRulesContext';\n import DecoratorContext from 'views/components/messagelist/decoration/DecoratorContext';\n-import HighlightingRule from 'views/logic/views/formatting/highlighting/HighlightingRule';\n \n import PossiblyHighlight from './PossiblyHighlight';\n import Highlight from './Highlight';\n \n type Props = {\n   children: ?React.Node,\n   field: string,\n-  highlightingRules: { [string]: Array<HighlightingRule> },\n   value?: any,\n };\n \n-const CustomHighlighting = ({ children, field: fieldName, value: fieldValue, highlightingRules }: Props) => {\n+const CustomHighlighting = ({ children, field: fieldName, value: fieldValue }: Props) => {\n+  const highlightingRules = useContext(HighlightingRulesContext) || [];\n+  const highlightingRulesMap = highlightingRules.reduce((prev, cur) => ({ ...prev, [cur.field]: prev[cur.field] ? [...prev[cur.field], cur] : [cur] }), {});\n   const decorators = [];\n-  const rules = highlightingRules[fieldName] || [];\n+  const rules = highlightingRulesMap[fieldName] || [];", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "be63f3f51517e2ba8cba2aa6117286d2f5a76b1d"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDA3NDAxMg==", "bodyText": "I think we can simplify this to\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              const highlightingRulesMap = highlightingRules.reduce((prev, cur) => ({ ...prev, [cur.field]: prev[cur.field] ? [...prev[cur.field], cur] : [cur] }), {});\n          \n          \n            \n              const highlightingRulesMap = highlightingRules.reduce((prev, cur) => ({ ...prev, [cur.field]: [...prev[cur.field], cur] }), {});", "url": "https://github.com/Graylog2/graylog2-server/pull/7836#discussion_r410074012", "createdAt": "2020-04-17T08:32:37Z", "author": {"login": "dennisoelkers"}, "path": "graylog2-web-interface/src/views/components/messagelist/CustomHighlighting.jsx", "diffHunk": "@@ -1,26 +1,25 @@\n // @flow strict\n import * as React from 'react';\n+import { useContext } from 'react';\n import PropTypes from 'prop-types';\n \n-import connect from 'stores/connect';\n-\n-import { HighlightingRulesStore } from 'views/stores/HighlightingRulesStore';\n+import HighlightingRulesContext from 'views/components/contexts/HighlightingRulesContext';\n import DecoratorContext from 'views/components/messagelist/decoration/DecoratorContext';\n-import HighlightingRule from 'views/logic/views/formatting/highlighting/HighlightingRule';\n \n import PossiblyHighlight from './PossiblyHighlight';\n import Highlight from './Highlight';\n \n type Props = {\n   children: ?React.Node,\n   field: string,\n-  highlightingRules: { [string]: Array<HighlightingRule> },\n   value?: any,\n };\n \n-const CustomHighlighting = ({ children, field: fieldName, value: fieldValue, highlightingRules }: Props) => {\n+const CustomHighlighting = ({ children, field: fieldName, value: fieldValue }: Props) => {\n+  const highlightingRules = useContext(HighlightingRulesContext) || [];\n+  const highlightingRulesMap = highlightingRules.reduce((prev, cur) => ({ ...prev, [cur.field]: prev[cur.field] ? [...prev[cur.field], cur] : [cur] }), {});", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "be63f3f51517e2ba8cba2aa6117286d2f5a76b1d"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDA3NTM4Mw==", "bodyText": "|| -> ??", "url": "https://github.com/Graylog2/graylog2-server/pull/7836#discussion_r410075383", "createdAt": "2020-04-17T08:35:03Z", "author": {"login": "dennisoelkers"}, "path": "graylog2-web-interface/src/views/components/sidebar/SearchResultOverview.jsx", "diffHunk": "@@ -1,20 +1,20 @@\n-import React from 'react';\n+import React, { useContext } from 'react';\n import PropTypes from 'prop-types';\n import numeral from 'numeral';\n-import { get } from 'lodash';\n \n+import AppConfig from 'util/AppConfig';\n import { Timestamp } from 'components/common';\n-import DateTime from 'logic/datetimes/DateTime';\n-import CurrentUserStore from 'stores/users/CurrentUserStore';\n-import connect from 'stores/connect';\n+import CurrentUserContext from 'contexts/CurrentUserContext';\n \n-const UserTimestamp = connect(Timestamp, { currentUser: CurrentUserStore }, ({ currentUser }) => ({ tz: get(currentUser, 'currentUser.timezone', 'UTC') }));\n+import DateTime from 'logic/datetimes/DateTime';\n \n const SearchResultOverview = ({ results }) => {\n   const { timestamp } = results;\n+  const currentUser = useContext(CurrentUserContext);\n+  const timezone = currentUser?.timezone || AppConfig.rootTimeZone();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "be63f3f51517e2ba8cba2aa6117286d2f5a76b1d"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDA3ODE2OA==", "bodyText": "It looks like in none of the tests the currentUser is actually supplied. Do we need the context provider here?", "url": "https://github.com/Graylog2/graylog2-server/pull/7836#discussion_r410078168", "createdAt": "2020-04-17T08:40:01Z", "author": {"login": "dennisoelkers"}, "path": "graylog2-web-interface/src/views/components/ViewActionsMenu.test.jsx", "diffHunk": "@@ -66,23 +55,34 @@ jest.mock('views/stores/ViewSharingStore', () => ({\n describe('ViewActionsMenu', () => {\n   afterEach(cleanup);\n \n+  const SimpleViewActionMenu = ({ currentUser, ...props }: {currentUser?: User}) => (\n+    <CurrentUserContext.Provider value={currentUser}>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "be63f3f51517e2ba8cba2aa6117286d2f5a76b1d"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDA3ODY2NQ==", "bodyText": "We are favoring the Array<HighlightingRule> syntax in most other places. Generally I am fine with both (there is no semantic difference), but if we want to settle on one for consistency, it would be Array<T> right now.", "url": "https://github.com/Graylog2/graylog2-server/pull/7836#discussion_r410078665", "createdAt": "2020-04-17T08:41:02Z", "author": {"login": "dennisoelkers"}, "path": "graylog2-web-interface/src/views/components/contexts/HighlightingRulesContext.jsx", "diffHunk": "@@ -0,0 +1,8 @@\n+// @flow strict\n+import * as React from 'react';\n+import { singleton } from 'views/logic/singleton';\n+import HighlightingRule from 'views/logic/views/formatting/highlighting/HighlightingRule';\n+\n+const HighlightingRules = React.createContext<?HighlightingRule[]>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "be63f3f51517e2ba8cba2aa6117286d2f5a76b1d"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDA4NDM1NQ==", "bodyText": "|| -> ??", "url": "https://github.com/Graylog2/graylog2-server/pull/7836#discussion_r410084355", "createdAt": "2020-04-17T08:51:20Z", "author": {"login": "dennisoelkers"}, "path": "graylog2-web-interface/src/views/components/visualizations/XYPlot.jsx", "diffHunk": "@@ -50,14 +48,15 @@ const XYPlot = ({\n   config,\n   chartData,\n   currentQuery,\n-  timezone,\n   effectiveTimerange,\n   getChartColor,\n   setChartColor,\n   height,\n   plotLayout = {},\n   onZoom = OnZoom,\n }: Props) => {\n+  const currentUser = useContext(CurrentUserContext);\n+  const timezone = currentUser?.timezone || AppConfig.rootTimeZone();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "be63f3f51517e2ba8cba2aa6117286d2f5a76b1d"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDA4NjU4MA==", "bodyText": "I think we should use a separate file to feed AppConfig for our tests. This one is used by the dev server, using a separate one with different settings (especially a timezone that is not Europe/Berlin) could potentially uncover issues which we do not see when testing on dev machines (where we would use the same settings otherwise).", "url": "https://github.com/Graylog2/graylog2-server/pull/7836#discussion_r410086580", "createdAt": "2020-04-17T08:55:22Z", "author": {"login": "dennisoelkers"}, "path": "graylog2-web-interface/test/setup-jest.js", "diffHunk": "@@ -1,6 +1,8 @@\n import jQuery from 'jquery';\n import registerBuiltinStores from 'injection/registerBuiltinStores';\n \n+import '../config';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "be63f3f51517e2ba8cba2aa6117286d2f5a76b1d"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDA5MDg2NA==", "bodyText": "CurrentUserPreferencesProvider -> CurrentUserProvider", "url": "https://github.com/Graylog2/graylog2-server/pull/7836#discussion_r410090864", "createdAt": "2020-04-17T09:03:11Z", "author": {"login": "dennisoelkers"}, "path": "graylog2-web-interface/src/contexts/CurrentUserProvider.jsx", "diffHunk": "@@ -0,0 +1,26 @@\n+// @flow strict\n+import * as React from 'react';\n+import PropTypes from 'prop-types';\n+import { get } from 'lodash';\n+\n+import { useStore } from 'stores/connect';\n+import CombinedProvider from 'injection/CombinedProvider';\n+import CurrentUserContext from './CurrentUserContext';\n+\n+const { CurrentUserStore } = CombinedProvider.get('CurrentUser');\n+const CurrentUserPreferencesProvider = ({ children }: { children: React.Node }) => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "be63f3f51517e2ba8cba2aa6117286d2f5a76b1d"}, "originalPosition": 11}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "be63f3f51517e2ba8cba2aa6117286d2f5a76b1d", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/be63f3f51517e2ba8cba2aa6117286d2f5a76b1d", "committedDate": "2020-04-16T09:48:02Z", "message": "Use AppConfig rootTimeZone as default timezone fallback\n- import app config for tests\n- Add missing CurrentUserContext in XYPlot test\n- Adjust currentUser default value handling by using optional chaining"}, "afterCommit": {"oid": "768c03f4e298e1fda480eb922c0b5e5c7fce249b", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/768c03f4e298e1fda480eb922c0b5e5c7fce249b", "committedDate": "2020-04-24T10:14:15Z", "message": "Implement React.createRef for saved searches save button"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "768c03f4e298e1fda480eb922c0b5e5c7fce249b", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/768c03f4e298e1fda480eb922c0b5e5c7fce249b", "committedDate": "2020-04-24T10:14:15Z", "message": "Implement React.createRef for saved searches save button"}, "afterCommit": {"oid": "e34298c49b6696d515535d1daf3e9c5f308de34f", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/e34298c49b6696d515535d1daf3e9c5f308de34f", "committedDate": "2020-04-24T10:39:51Z", "message": "Mock SearchExecutionStateStore in ViewActionsMenu test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "056d4c124429a0cd563bf9f84b06ae6c9d9b69ab", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/056d4c124429a0cd563bf9f84b06ae6c9d9b69ab", "committedDate": "2020-04-24T10:59:14Z", "message": "Use ?? instead of || for remaining user timezone checks"}, "afterCommit": {"oid": "fbee2cf66488e61f225a813f1dad6c7ed985c612", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/fbee2cf66488e61f225a813f1dad6c7ed985c612", "committedDate": "2020-04-24T10:59:32Z", "message": "Use ?? instead of || for remaining user timezone checks"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fbee2cf66488e61f225a813f1dad6c7ed985c612", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/fbee2cf66488e61f225a813f1dad6c7ed985c612", "committedDate": "2020-04-24T10:59:32Z", "message": "Use ?? instead of || for remaining user timezone checks"}, "afterCommit": {"oid": "b7da17e42b225ecf726954fb3579951863871b29", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/b7da17e42b225ecf726954fb3579951863871b29", "committedDate": "2020-04-24T12:21:13Z", "message": "Use ?? instead of || for remaining user timezone checks"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b7da17e42b225ecf726954fb3579951863871b29", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/b7da17e42b225ecf726954fb3579951863871b29", "committedDate": "2020-04-24T12:21:13Z", "message": "Use ?? instead of || for remaining user timezone checks"}, "afterCommit": {"oid": "17bc8403c6b244aae4b2b0b0c948a29584363551", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/17bc8403c6b244aae4b2b0b0c948a29584363551", "committedDate": "2020-05-15T15:19:00Z", "message": "Fixing rebase"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "17bc8403c6b244aae4b2b0b0c948a29584363551", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/17bc8403c6b244aae4b2b0b0c948a29584363551", "committedDate": "2020-05-15T15:19:00Z", "message": "Fixing rebase"}, "afterCommit": {"oid": "4805ba1d07cf7207eb5a7e509e677aa6646a08d1", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/4805ba1d07cf7207eb5a7e509e677aa6646a08d1", "committedDate": "2020-06-04T09:45:27Z", "message": "Fix import of CurrentUserContext in App.jsx"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c9eb90a08bc1bb82dad7a06d81b77d2b29ed77a", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/0c9eb90a08bc1bb82dad7a06d81b77d2b29ed77a", "committedDate": "2020-06-15T09:59:20Z", "message": "    Add highlighting rules to AdditionalContext"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f706b5fcfb5068c1aa2609b6cef382a08e177955", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/f706b5fcfb5068c1aa2609b6cef382a08e177955", "committedDate": "2020-06-15T09:59:20Z", "message": "Add currentUser to AdditionalContext"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "94a565f73d580a0af99aebd35d213fc6fdfb1a61", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/94a565f73d580a0af99aebd35d213fc6fdfb1a61", "committedDate": "2020-06-15T09:59:21Z", "message": "Extract currentUser from current user store on ViewAdditionalContextProvider creation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "335291cb6c7984ece16bf134ab2e776d9c44cde8", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/335291cb6c7984ece16bf134ab2e776d9c44cde8", "committedDate": "2020-06-15T09:59:21Z", "message": "Create CurrentUserContext and implement Provider in App.jsx"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ab6e3608200dc0bf67da789162008f5bdba4972", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/6ab6e3608200dc0bf67da789162008f5bdba4972", "committedDate": "2020-06-15T09:59:21Z", "message": "Implement CurrentUserContext for UserTimezoneTimestamp"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "61eb12dc2374c0ce5b39d56b2fc3d1ef1bbc7639", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/61eb12dc2374c0ce5b39d56b2fc3d1ef1bbc7639", "committedDate": "2020-06-15T09:59:21Z", "message": "Implement CurrentUserContext for ViewActionsMenu"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f263e8d82393f50dc8644d44f0c37aede624f51", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/6f263e8d82393f50dc8644d44f0c37aede624f51", "committedDate": "2020-06-15T09:59:21Z", "message": "Define default value for CurrentUserContext fot less problems with flow type checking"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "97562104fbf12a9235defa706e704335a6ef1696", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/97562104fbf12a9235defa706e704335a6ef1696", "committedDate": "2020-06-15T10:09:52Z", "message": "Implement CurrentUserContext for SavedSearchControls"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "69c347aa9c50b1ecbb8f3601caed7ad0ead62aa0", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/69c347aa9c50b1ecbb8f3601caed7ad0ead62aa0", "committedDate": "2020-06-15T10:09:52Z", "message": "Implement CurrentUserContext for View component"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "600f1519fd3f0b60aecf62a3406083160f6ec785", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/600f1519fd3f0b60aecf62a3406083160f6ec785", "committedDate": "2020-06-15T10:09:53Z", "message": "Remove current user from ViewAdditionalContextProvider"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7afc7203f9647b60713f972f396ad19836bae26b", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/7afc7203f9647b60713f972f396ad19836bae26b", "committedDate": "2020-06-15T10:09:53Z", "message": "Implement CurrentUserContext for XYPlot"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b66a13d05b5701ffad28953716f6858213fe8cc", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/7b66a13d05b5701ffad28953716f6858213fe8cc", "committedDate": "2020-06-15T10:09:53Z", "message": "Implement CurrentUserContext for SearchResultOverview"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9d29842773089fdc20a5c60f8d2ce8c9b3e452b3", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/9d29842773089fdc20a5c60f8d2ce8c9b3e452b3", "committedDate": "2020-06-15T10:09:53Z", "message": "FIx SavedSearchControls test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d8330fffb6af904695816daf9e5052a149ef449c", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/d8330fffb6af904695816daf9e5052a149ef449c", "committedDate": "2020-06-15T10:09:53Z", "message": "Remove empty object as default value for UserContext and define a default value in related components"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80259c6e460a3b0d8daff55d03db3a6028020f87", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/80259c6e460a3b0d8daff55d03db3a6028020f87", "committedDate": "2020-06-15T10:09:53Z", "message": "Create separate file for UserContextProvider which uses useStore"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "11524f89ebf9dbeb0e2a999c512800bbdeae4d3b", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/11524f89ebf9dbeb0e2a999c512800bbdeae4d3b", "committedDate": "2020-06-15T10:09:53Z", "message": "Use JSX syntax for helper components in tests which are wrapped in a context"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "22fefa5419c0b8a28bd5e070590670529747992c", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/22fefa5419c0b8a28bd5e070590670529747992c", "committedDate": "2020-06-15T10:11:31Z", "message": "Create own context provider for HighlightingRulest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e41bf03e4aa7369c21b40bba666c153abca098f9", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/e41bf03e4aa7369c21b40bba666c153abca098f9", "committedDate": "2020-06-15T10:11:31Z", "message": "Fix linting error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0789d7da113181c0ee2bb28ad40989025e9f150d", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/0789d7da113181c0ee2bb28ad40989025e9f150d", "committedDate": "2020-06-15T10:11:50Z", "message": "Revert not needed changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "50ff4cc127e4637b2cb543ec1870e6c34369172b", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/50ff4cc127e4637b2cb543ec1870e6c34369172b", "committedDate": "2020-06-15T10:11:50Z", "message": "Add tests for CurrentUserProvider"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1910787f370cbe83b37acea4ae025174fe54700f", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/1910787f370cbe83b37acea4ae025174fe54700f", "committedDate": "2020-06-15T10:11:50Z", "message": "Remove not needed CurrentUserStoreMock"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d077d432fd5dce803c21478902ff88f46518133f", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/d077d432fd5dce803c21478902ff88f46518133f", "committedDate": "2020-06-15T10:11:50Z", "message": "Fix flow error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7290de6c120b3f34a1cde40dbbf72802ec1eaddf", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/7290de6c120b3f34a1cde40dbbf72802ec1eaddf", "committedDate": "2020-06-15T10:11:50Z", "message": "Revert TransformKeys changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ec72936a163ad134a7084c60428e96ba89ec730a", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/ec72936a163ad134a7084c60428e96ba89ec730a", "committedDate": "2020-06-15T10:11:50Z", "message": "Fix flow errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ecdce8181b1868a6cc228b3a60964847c53da28", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/9ecdce8181b1868a6cc228b3a60964847c53da28", "committedDate": "2020-06-15T10:11:50Z", "message": "Remove PropTypes from SavedSearchControls test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5246b41c27823357200c21bd02497c7cc35d24aa", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/5246b41c27823357200c21bd02497c7cc35d24aa", "committedDate": "2020-06-15T10:11:50Z", "message": "Remove console.log"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "10c6ec2bdddba1a7983621c649008fedbb8c7d4b", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/10c6ec2bdddba1a7983621c649008fedbb8c7d4b", "committedDate": "2020-06-15T10:11:51Z", "message": "Remove not needed import"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b9575bfe0f19e727c3d7072741e647a10b0a0269", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/b9575bfe0f19e727c3d7072741e647a10b0a0269", "committedDate": "2020-06-15T10:11:51Z", "message": "Use AppConfig rootTimeZone as default timezone fallback\n- import app config for tests\n- Add missing CurrentUserContext in XYPlot test\n- Adjust currentUser default value handling by using optional chaining"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e8e382913f9852d2fb187f3fcafde9966569c3e6", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/e8e382913f9852d2fb187f3fcafde9966569c3e6", "committedDate": "2020-06-15T10:11:51Z", "message": "Remove empty line"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5a14bc49b7d6fe268e29ff3273b872ff4879570a", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/5a14bc49b7d6fe268e29ff3273b872ff4879570a", "committedDate": "2020-06-15T10:11:51Z", "message": "Fix for test filename"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "65f8382c17095290eb6afdbc6ca8aac0138cd099", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/65f8382c17095290eb6afdbc6ca8aac0138cd099", "committedDate": "2020-06-15T10:11:51Z", "message": "Defining correct name for CurrentUserProvider component"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5d931293d9a9946dcc743d6a539af6facf957ad5", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/5d931293d9a9946dcc743d6a539af6facf957ad5", "committedDate": "2020-06-15T10:12:40Z", "message": "Use Array<HighlightingRules> instead of HighlightingRules[] for type definitions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3bb1090d8ab14759615fdccdcfe84336115dafbe", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/3bb1090d8ab14759615fdccdcfe84336115dafbe", "committedDate": "2020-06-15T10:12:40Z", "message": "Implement CurrectUserContext for UserPreferencesProvider\n* Move CurrentUserProvider usage from App to LoggedInPage component"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "88688f8fa71eed093e9d1f8c483eb2cc835d6a7a", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/88688f8fa71eed093e9d1f8c483eb2cc835d6a7a", "committedDate": "2020-06-15T10:12:40Z", "message": "Fixing linter errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc14d9f68b2baf4b62c80ad6e11407f3cdf8c2ff", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/cc14d9f68b2baf4b62c80ad6e11407f3cdf8c2ff", "committedDate": "2020-06-15T10:12:40Z", "message": "Create separate app config file for tests with different default timezone"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "29c043abf888c4db7962f2f92af690b5b145382a", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/29c043abf888c4db7962f2f92af690b5b145382a", "committedDate": "2020-06-15T10:13:11Z", "message": "Implement React.createRef for saved searches save button"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9028275a6b1bda330137a2f7693472f0f2614c98", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/9028275a6b1bda330137a2f7693472f0f2614c98", "committedDate": "2020-06-15T10:13:11Z", "message": "Mock SearchExecutionStateStore in ViewActionsMenu test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9a57f4a268543cb7304e9fcc0c66a34a3d6f2a6b", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/9a57f4a268543cb7304e9fcc0c66a34a3d6f2a6b", "committedDate": "2020-06-15T10:13:11Z", "message": "Include ScrollToHint and ScretchPad in ReportedErrorBoundary"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b265cc1ea017e6ae92394f7cade6f8b38f9be0e0", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/b265cc1ea017e6ae92394f7cade6f8b38f9be0e0", "committedDate": "2020-06-15T10:13:47Z", "message": "Use ?? instead of || for highlighting rules check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ad64d621b9c969c837d32236f820c7417e3dfbc9", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/ad64d621b9c969c837d32236f820c7417e3dfbc9", "committedDate": "2020-06-15T10:13:48Z", "message": "Use ?? instead of || for user timezone checks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "13765acf22c0b1d484f1e5236cfeb1d322da93bb", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/13765acf22c0b1d484f1e5236cfeb1d322da93bb", "committedDate": "2020-06-15T10:13:48Z", "message": "Use proper default prop for currentUser in ShareViewModal"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a71fcb2ec8490909479a9e5bd6aec527a6b0076b", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/a71fcb2ec8490909479a9e5bd6aec527a6b0076b", "committedDate": "2020-06-15T10:13:48Z", "message": "Use ?? instead of || for remaining user timezone checks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "230abe2313bb525d2afa7f3b429ec1f1bf353d27", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/230abe2313bb525d2afa7f3b429ec1f1bf353d27", "committedDate": "2020-06-15T10:14:39Z", "message": "Fixing rebase"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1fe3f70f68f44a20cec95e8cdf22cf4cb96645d3", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/1fe3f70f68f44a20cec95e8cdf22cf4cb96645d3", "committedDate": "2020-06-15T10:14:39Z", "message": "Fix import of CurrentUserContext in App.jsx"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c3a77b22a78fc22222b6906121962e771467680", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/4c3a77b22a78fc22222b6906121962e771467680", "committedDate": "2020-06-15T10:17:35Z", "message": "Remove implementation of HighlightingRulesContext because it is part of another PR"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "90370f86af420981f892ed172d845df93ad22c12", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/90370f86af420981f892ed172d845df93ad22c12", "committedDate": "2020-06-15T10:17:35Z", "message": "Test CurrentUserPreferencesProvider without provided CurrentUserContext"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4fd15911719bc2e096d01a0f96c760bdb4082658", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/4fd15911719bc2e096d01a0f96c760bdb4082658", "committedDate": "2020-06-15T10:24:13Z", "message": "Add missing HighlightingRulesProvider"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fd5a11a480488192e3bdcac1e92b56c886d0cf1d", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/fd5a11a480488192e3bdcac1e92b56c886d0cf1d", "committedDate": "2020-06-15T10:35:03Z", "message": "Updating snapshots and fixing SavedSearchControls access check"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a424322caa41f2c41758d7b6b6afbc9c71bcbeaf", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/a424322caa41f2c41758d7b6b6afbc9c71bcbeaf", "committedDate": "2020-06-04T10:39:33Z", "message": "Test CurrentUserPreferencesProvider without provided CurrentUserContext"}, "afterCommit": {"oid": "fd5a11a480488192e3bdcac1e92b56c886d0cf1d", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/fd5a11a480488192e3bdcac1e92b56c886d0cf1d", "committedDate": "2020-06-15T10:35:03Z", "message": "Updating snapshots and fixing SavedSearchControls access check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e30fd3ec29823fc2da372578314fa0462b27deb", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/4e30fd3ec29823fc2da372578314fa0462b27deb", "committedDate": "2020-06-15T10:41:30Z", "message": "Revert change for CustomHighlighting test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "52fc6ccc41c823a98727a5bae90516b4fc2426dc", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/52fc6ccc41c823a98727a5bae90516b4fc2426dc", "committedDate": "2020-06-15T10:42:07Z", "message": "Fix indentation for SavedSearchControls"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1aae927a6b5ee1442e3b89d0a08a505a1c61f796", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/1aae927a6b5ee1442e3b89d0a08a505a1c61f796", "committedDate": "2020-06-15T10:48:50Z", "message": "Fix linter warning for SavedSearchControls ref"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d74e46f0593b7db1d6ed6c0f0a4740fe4adbd78d", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/d74e46f0593b7db1d6ed6c0f0a4740fe4adbd78d", "committedDate": "2020-06-15T10:49:21Z", "message": "Reimplement HighlightingRulesProvider for ExtendedSearchPage"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d0048b2dc21358a8974515b94182cf352db2f46b", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/d0048b2dc21358a8974515b94182cf352db2f46b", "committedDate": "2020-06-22T10:32:42Z", "message": "Merge branch 'master' into message-table-connect-refactoring"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0OTAzNzIy", "url": "https://github.com/Graylog2/graylog2-server/pull/7836#pullrequestreview-434903722", "createdAt": "2020-06-22T13:07:12Z", "commit": {"oid": "d0048b2dc21358a8974515b94182cf352db2f46b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f02cd9c997ecac5940336d5e9cab9afb977a3bd", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/6f02cd9c997ecac5940336d5e9cab9afb977a3bd", "committedDate": "2020-06-22T15:59:42Z", "message": "Replace global app config mocking with component specific mocking"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM1NTIzNjIy", "url": "https://github.com/Graylog2/graylog2-server/pull/7836#pullrequestreview-435523622", "createdAt": "2020-06-23T07:45:12Z", "commit": {"oid": "6f02cd9c997ecac5940336d5e9cab9afb977a3bd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2501, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}