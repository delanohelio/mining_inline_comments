{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc5MDM4Mzc1", "number": 7539, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxODo0NjowMlrODizv4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQxMDoyNjoxNVrODjw7_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM3ODI2MDE5OnYy", "diffSide": "RIGHT", "path": "graylog2-web-interface/src/components/common/Spinner.test.jsx", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxODo0NjowMlrOFuQzCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQxMDoyMzoyNVrOFvwJWg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDA1NDAyNg==", "bodyText": "Should we have a test for the delay?", "url": "https://github.com/Graylog2/graylog2-server/pull/7539#discussion_r384054026", "createdAt": "2020-02-25T18:46:02Z", "author": {"login": "kyleknighted"}, "path": "graylog2-web-interface/src/components/common/Spinner.test.jsx", "diffHunk": "@@ -1,17 +1,21 @@\n import React from 'react';\n-import { mount } from 'wrappedEnzyme';\n+import { render, cleanup } from 'wrappedTestingLibrary';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "29ccfb5a26b8a2e3392ddf02934c545a80ea1579"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTYxNjIxOA==", "bodyText": "I added a test, it only tests styling, but I agree it makes sense.", "url": "https://github.com/Graylog2/graylog2-server/pull/7539#discussion_r385616218", "createdAt": "2020-02-28T10:23:25Z", "author": {"login": "linuspahl"}, "path": "graylog2-web-interface/src/components/common/Spinner.test.jsx", "diffHunk": "@@ -1,17 +1,21 @@\n import React from 'react';\n-import { mount } from 'wrappedEnzyme';\n+import { render, cleanup } from 'wrappedTestingLibrary';", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDA1NDAyNg=="}, "originalCommit": {"oid": "29ccfb5a26b8a2e3392ddf02934c545a80ea1579"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4ODI4NTQyOnYy", "diffSide": "LEFT", "path": "graylog2-web-interface/src/components/common/Spinner.jsx", "isResolved": true, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQxMDoyNjoxNlrOFvwOZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQxMjowNDo1N1rOFvyz9A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTYxNzUxMA==", "bodyText": "I had a problem with the usage of {...props} or in my case {...rest} and replaced it with some specific props and prop definitions. i hope I found every use case, so far I only found pulse and fixedWidth", "url": "https://github.com/Graylog2/graylog2-server/pull/7539#discussion_r385617510", "createdAt": "2020-02-28T10:26:16Z", "author": {"login": "linuspahl"}, "path": "graylog2-web-interface/src/components/common/Spinner.jsx", "diffHunk": "@@ -1,22 +1,62 @@\n-import React from 'react';\n+// @flow strict\n+import React, { useState, useEffect } from 'react';\n import PropTypes from 'prop-types';\n+import styled, { type StyledComponent } from 'styled-components';\n \n import Icon from './Icon';\n \n+const Wrapper: StyledComponent<{ visible: boolean }, {}, HTMLSpanElement> = styled.span`\n+  visibility: ${({ visible }) => (visible ? 'visible' : 'hidden')};\n+`;\n+\n+type Props = {\n+  delay?: number,\n+  fixedWidth?: boolean,\n+  name?: string,\n+  pulse: boolean,\n+  text?: string,\n+}\n+\n /**\n  * Simple spinner to use while waiting for something to load.\n  */\n-const Spinner = ({ name, text, ...props }) => <span><Icon name={name} spin {...props} /> {text}</span>;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ca8430867d6785ef3032bbe2d4623ff13fe8580"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTYxODU1Mw==", "bodyText": "I saw the usage of {...rest} in other components (e.g. views/components/Select.jsx) where we are using flow as well. I don't really understand why we do not see the same error there.", "url": "https://github.com/Graylog2/graylog2-server/pull/7539#discussion_r385618553", "createdAt": "2020-02-28T10:28:26Z", "author": {"login": "linuspahl"}, "path": "graylog2-web-interface/src/components/common/Spinner.jsx", "diffHunk": "@@ -1,22 +1,62 @@\n-import React from 'react';\n+// @flow strict\n+import React, { useState, useEffect } from 'react';\n import PropTypes from 'prop-types';\n+import styled, { type StyledComponent } from 'styled-components';\n \n import Icon from './Icon';\n \n+const Wrapper: StyledComponent<{ visible: boolean }, {}, HTMLSpanElement> = styled.span`\n+  visibility: ${({ visible }) => (visible ? 'visible' : 'hidden')};\n+`;\n+\n+type Props = {\n+  delay?: number,\n+  fixedWidth?: boolean,\n+  name?: string,\n+  pulse: boolean,\n+  text?: string,\n+}\n+\n /**\n  * Simple spinner to use while waiting for something to load.\n  */\n-const Spinner = ({ name, text, ...props }) => <span><Icon name={name} spin {...props} /> {text}</span>;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTYxNzUxMA=="}, "originalCommit": {"oid": "3ca8430867d6785ef3032bbe2d4623ff13fe8580"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTYzNjU1OQ==", "bodyText": "I was testing locally, and I can see the error when the spread happens at the end of the list of props.\nThis throws the error:\n<Icon name={name} spin {...props} /> {text}\n\nThis seems to be fine:\n<Icon {...props} name={name} spin /> {text}\n\nI guess that makes sense, since the rest props could contain a spin property that overrides the value, when the spread happens after the prop is set.", "url": "https://github.com/Graylog2/graylog2-server/pull/7539#discussion_r385636559", "createdAt": "2020-02-28T11:06:48Z", "author": {"login": "edmundoa"}, "path": "graylog2-web-interface/src/components/common/Spinner.jsx", "diffHunk": "@@ -1,22 +1,62 @@\n-import React from 'react';\n+// @flow strict\n+import React, { useState, useEffect } from 'react';\n import PropTypes from 'prop-types';\n+import styled, { type StyledComponent } from 'styled-components';\n \n import Icon from './Icon';\n \n+const Wrapper: StyledComponent<{ visible: boolean }, {}, HTMLSpanElement> = styled.span`\n+  visibility: ${({ visible }) => (visible ? 'visible' : 'hidden')};\n+`;\n+\n+type Props = {\n+  delay?: number,\n+  fixedWidth?: boolean,\n+  name?: string,\n+  pulse: boolean,\n+  text?: string,\n+}\n+\n /**\n  * Simple spinner to use while waiting for something to load.\n  */\n-const Spinner = ({ name, text, ...props }) => <span><Icon name={name} spin {...props} /> {text}</span>;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTYxNzUxMA=="}, "originalCommit": {"oid": "3ca8430867d6785ef3032bbe2d4623ff13fe8580"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTY0MDQ5Mg==", "bodyText": "Thanks for the clarification, this totally makes sense! I will reimplement the {...props} because I like the flexibility.", "url": "https://github.com/Graylog2/graylog2-server/pull/7539#discussion_r385640492", "createdAt": "2020-02-28T11:15:52Z", "author": {"login": "linuspahl"}, "path": "graylog2-web-interface/src/components/common/Spinner.jsx", "diffHunk": "@@ -1,22 +1,62 @@\n-import React from 'react';\n+// @flow strict\n+import React, { useState, useEffect } from 'react';\n import PropTypes from 'prop-types';\n+import styled, { type StyledComponent } from 'styled-components';\n \n import Icon from './Icon';\n \n+const Wrapper: StyledComponent<{ visible: boolean }, {}, HTMLSpanElement> = styled.span`\n+  visibility: ${({ visible }) => (visible ? 'visible' : 'hidden')};\n+`;\n+\n+type Props = {\n+  delay?: number,\n+  fixedWidth?: boolean,\n+  name?: string,\n+  pulse: boolean,\n+  text?: string,\n+}\n+\n /**\n  * Simple spinner to use while waiting for something to load.\n  */\n-const Spinner = ({ name, text, ...props }) => <span><Icon name={name} spin {...props} /> {text}</span>;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTYxNzUxMA=="}, "originalCommit": {"oid": "3ca8430867d6785ef3032bbe2d4623ff13fe8580"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTY0OTM2NQ==", "bodyText": "I just realized the update of eslint-sonfig-airbnb #7586 forbids the props spreading. We need to discuss If we really want this, but the explanation contains some good points. I will not reimplement the props spreading for now.", "url": "https://github.com/Graylog2/graylog2-server/pull/7539#discussion_r385649365", "createdAt": "2020-02-28T11:37:28Z", "author": {"login": "linuspahl"}, "path": "graylog2-web-interface/src/components/common/Spinner.jsx", "diffHunk": "@@ -1,22 +1,62 @@\n-import React from 'react';\n+// @flow strict\n+import React, { useState, useEffect } from 'react';\n import PropTypes from 'prop-types';\n+import styled, { type StyledComponent } from 'styled-components';\n \n import Icon from './Icon';\n \n+const Wrapper: StyledComponent<{ visible: boolean }, {}, HTMLSpanElement> = styled.span`\n+  visibility: ${({ visible }) => (visible ? 'visible' : 'hidden')};\n+`;\n+\n+type Props = {\n+  delay?: number,\n+  fixedWidth?: boolean,\n+  name?: string,\n+  pulse: boolean,\n+  text?: string,\n+}\n+\n /**\n  * Simple spinner to use while waiting for something to load.\n  */\n-const Spinner = ({ name, text, ...props }) => <span><Icon name={name} spin {...props} /> {text}</span>;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTYxNzUxMA=="}, "originalCommit": {"oid": "3ca8430867d6785ef3032bbe2d4623ff13fe8580"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTY1OTg5Mg==", "bodyText": "Sounds good, I think for this component is also fine having them explicitly set.", "url": "https://github.com/Graylog2/graylog2-server/pull/7539#discussion_r385659892", "createdAt": "2020-02-28T12:04:57Z", "author": {"login": "edmundoa"}, "path": "graylog2-web-interface/src/components/common/Spinner.jsx", "diffHunk": "@@ -1,22 +1,62 @@\n-import React from 'react';\n+// @flow strict\n+import React, { useState, useEffect } from 'react';\n import PropTypes from 'prop-types';\n+import styled, { type StyledComponent } from 'styled-components';\n \n import Icon from './Icon';\n \n+const Wrapper: StyledComponent<{ visible: boolean }, {}, HTMLSpanElement> = styled.span`\n+  visibility: ${({ visible }) => (visible ? 'visible' : 'hidden')};\n+`;\n+\n+type Props = {\n+  delay?: number,\n+  fixedWidth?: boolean,\n+  name?: string,\n+  pulse: boolean,\n+  text?: string,\n+}\n+\n /**\n  * Simple spinner to use while waiting for something to load.\n  */\n-const Spinner = ({ name, text, ...props }) => <span><Icon name={name} spin {...props} /> {text}</span>;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTYxNzUxMA=="}, "originalCommit": {"oid": "3ca8430867d6785ef3032bbe2d4623ff13fe8580"}, "originalPosition": 24}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3880, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}