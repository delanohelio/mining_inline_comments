{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQzNTQ2NDIz", "number": 8472, "title": "Rename \"role\" to \"capability\"", "bodyText": "We updated our concepts for roles and capabilities.", "createdAt": "2020-07-02T14:16:09Z", "url": "https://github.com/Graylog2/graylog2-server/pull/8472", "merged": true, "mergeCommit": {"oid": "5cd3e774cb5f38c9577c550e3963b0edc3717576"}, "closed": true, "closedAt": "2020-07-03T13:03:27Z", "author": {"login": "bernd"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcw_eQjgH2gAyNDQzNTQ2NDIzOjk2NGUwOTAyYTBkM2I3NGY2ZDM3NWVmZDk3ZWZiYmNmYTBiZWRmOTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcxRuWXgFqTQ0MjM0ODM5OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "964e0902a0d3b74f6d375efd97efbbcfa0bedf98", "author": {"user": {"login": "bernd", "name": "Bernd Ahlers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/964e0902a0d3b74f6d375efd97efbbcfa0bedf98", "committedDate": "2020-07-02T14:11:31Z", "message": "Rename \"role\" to \"capability\"\n\nAlso add DBGrantServiceTest."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "56db48aa94652bb8e17beae0cc4df13dd9519373", "author": {"user": {"login": "bernd", "name": "Bernd Ahlers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/56db48aa94652bb8e17beae0cc4df13dd9519373", "committedDate": "2020-07-02T14:12:14Z", "message": "Make sure the calling user is also included in \"active_shares\""}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyMzIyMzIw", "url": "https://github.com/Graylog2/graylog2-server/pull/8472#pullrequestreview-442322320", "createdAt": "2020-07-03T10:38:25Z", "commit": {"oid": "56db48aa94652bb8e17beae0cc4df13dd9519373"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QxMDozODoyNlrOGssKaw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QxMDo0MzoxM1rOGssSHQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTUxNDA5MQ==", "bodyText": "did we reach a decision regarding this?\nIn my book we were still filtering the current user..\nThis also needs to be handled by the frontend now. (If they don't send back your own grant, it will get deleted)", "url": "https://github.com/Graylog2/graylog2-server/pull/8472#discussion_r449514091", "createdAt": "2020-07-03T10:38:26Z", "author": {"login": "mpfz0r"}, "path": "graylog2-server/src/main/java/org/graylog/security/shares/EntitySharesService.java", "diffHunk": "@@ -98,32 +98,32 @@ public EntitySharePrepareResponse prepareShare(GRN ownedEntity,\n      * The grants in the request are created or, if they already exist, updated.\n      *\n      * @param ownedEntity the target entity for the updated grants\n-     * @param request     the request containing grantees and their roles\n+     * @param request     the request containing grantees and their capabilities\n      * @param sharingUser the user executing the request\n      */\n     public EntitySharePrepareResponse updateEntityShares(GRN ownedEntity, EntityShareRequest request, User sharingUser) {\n         final String userName = sharingUser.getName();\n-        final List<GrantDTO> existingGrants = grantService.getForTarget(ownedEntity, grnRegistry.newGRN(\"user\", sharingUser.getName()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "56db48aa94652bb8e17beae0cc4df13dd9519373"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTUxNjA2MQ==", "bodyText": "does this need a permissions prefix? capabilities will never be entities that are managed with permissions.\nSame goes for roles.\nI'm not even sure we should be using GRNs for that, actually..", "url": "https://github.com/Graylog2/graylog2-server/pull/8472#discussion_r449516061", "createdAt": "2020-07-03T10:43:13Z", "author": {"login": "mpfz0r"}, "path": "graylog2-server/src/main/java/org/graylog2/utilities/GRNRegistry.java", "diffHunk": "@@ -39,6 +39,7 @@\n     // TODO find a way to unify these\n     private static final ImmutableSet<GRNType> BUILTIN_TYPES = ImmutableSet.<GRNType>builder()\n             .add(GRNType.create(\"collection\", \"collections:\"))\n+            .add(GRNType.create(\"capability\", \"capabilities:\"))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "56db48aa94652bb8e17beae0cc4df13dd9519373"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyMzQ4Mzk4", "url": "https://github.com/Graylog2/graylog2-server/pull/8472#pullrequestreview-442348398", "createdAt": "2020-07-03T11:27:23Z", "commit": {"oid": "56db48aa94652bb8e17beae0cc4df13dd9519373"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2953, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}