{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY1NDE0NTYy", "number": 7240, "title": "Update MongoDB Java driver", "bodyText": "Description\nUpdate mongodb-driver to version 3.12.1 (latest available) and mongojack to version 2.10.1 (latest from branch 2.x as to migrate to 3.x ,it was releases a day ago, some refactor will be required due to deprecated stuff)\nMotivation and Context\nFixes #7142\nHow Has This Been Tested?\n\n\n\nScreenshots (if appropriate):\nTypes of changes\n\n\n Bug fix (non-breaking change which fixes an issue)\n New feature (non-breaking change which adds functionality)\n Refactoring (non-breaking change)\n Breaking change (fix or feature that would cause existing functionality to change)\n\nChecklist:\n\n\n\n My code follows the code style of this project.\n My change requires a change to the documentation.\n I have updated the documentation accordingly.\n I have read the CONTRIBUTING document.\n I have added tests to cover my changes.", "createdAt": "2020-01-21T17:06:42Z", "url": "https://github.com/Graylog2/graylog2-server/pull/7240", "merged": true, "mergeCommit": {"oid": "62aaaea87e005657135bddeb162d5546199ce5a8"}, "closed": true, "closedAt": "2020-02-12T08:08:11Z", "author": {"login": "radykal-com"}, "timelineItems": {"totalCount": 20, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb8kp8hgBqjI5NjcxMjE3NjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcDhvREgFqTM1NzI1MDQ4NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1c9663f703b59a5d579b9d85490311d298477ec4", "author": {"user": {"login": "radykal-com", "name": "Marc Ruiz"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/1c9663f703b59a5d579b9d85490311d298477ec4", "committedDate": "2020-01-21T17:03:53Z", "message": "Replace fongo/nosqlunit tests with testcontainers"}, "afterCommit": {"oid": "6cfa4a69a8fbb333a3187b0b4977e44b7803f897", "author": {"user": {"login": "radykal-com", "name": "Marc Ruiz"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/6cfa4a69a8fbb333a3187b0b4977e44b7803f897", "committedDate": "2020-01-21T17:32:28Z", "message": "Replace fongo/nosqlunit tests with testcontainers"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6cfa4a69a8fbb333a3187b0b4977e44b7803f897", "author": {"user": {"login": "radykal-com", "name": "Marc Ruiz"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/6cfa4a69a8fbb333a3187b0b4977e44b7803f897", "committedDate": "2020-01-21T17:32:28Z", "message": "Replace fongo/nosqlunit tests with testcontainers"}, "afterCommit": {"oid": "661c6693636b96ed50fd4ce058f818e6fbc6ee49", "author": {"user": {"login": "radykal-com", "name": "Marc Ruiz"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/661c6693636b96ed50fd4ce058f818e6fbc6ee49", "committedDate": "2020-01-21T17:56:20Z", "message": "Replace fongo/nosqlunit tests with testcontainers"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f85efcc0fdc1e54c4606eeb85a7819d083a20e0c", "author": {"user": {"login": "radykal-com", "name": "Marc Ruiz"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/f85efcc0fdc1e54c4606eeb85a7819d083a20e0c", "committedDate": "2020-01-21T19:50:30Z", "message": "Fix expected fingerprint"}, "afterCommit": {"oid": "127fb0333ac381b3f54265dd3cfc689eec307b36", "author": {"user": {"login": "radykal-com", "name": "Marc Ruiz"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/127fb0333ac381b3f54265dd3cfc689eec307b36", "committedDate": "2020-02-04T22:09:39Z", "message": "Fix expected fingerprint"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "48d53a2a3e60de3159d37c6f137b9a39b2991f3f", "author": {"user": {"login": "radykal-com", "name": "Marc Ruiz"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/48d53a2a3e60de3159d37c6f137b9a39b2991f3f", "committedDate": "2020-02-08T08:41:54Z", "message": "Replace fongo/nosqlunit tests with testcontainers"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "667f2ca60cc4a431e7877e413c520f7a2d8b2fce", "author": {"user": {"login": "radykal-com", "name": "Marc Ruiz"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/667f2ca60cc4a431e7877e413c520f7a2d8b2fce", "committedDate": "2020-02-08T08:41:54Z", "message": "Update mongodb-driver and mongojack versions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4759d9b049c01281640d606132ec8fd1df94d945", "author": {"user": {"login": "radykal-com", "name": "Marc Ruiz"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/4759d9b049c01281640d606132ec8fd1df94d945", "committedDate": "2020-02-08T08:41:54Z", "message": "Fix json asserts with extra spaces"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb9cac6e919bd661d4a0228b01d8b5fcf2d94a56", "author": {"user": {"login": "radykal-com", "name": "Marc Ruiz"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/eb9cac6e919bd661d4a0228b01d8b5fcf2d94a56", "committedDate": "2020-02-08T08:41:54Z", "message": "Fix expected fingerprint"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "127fb0333ac381b3f54265dd3cfc689eec307b36", "author": {"user": {"login": "radykal-com", "name": "Marc Ruiz"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/127fb0333ac381b3f54265dd3cfc689eec307b36", "committedDate": "2020-02-04T22:09:39Z", "message": "Fix expected fingerprint"}, "afterCommit": {"oid": "eb9cac6e919bd661d4a0228b01d8b5fcf2d94a56", "author": {"user": {"login": "radykal-com", "name": "Marc Ruiz"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/eb9cac6e919bd661d4a0228b01d8b5fcf2d94a56", "committedDate": "2020-02-08T08:41:54Z", "message": "Fix expected fingerprint"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "79b1c6d960bfd2b7f91dd06427979467410dffa4", "author": {"user": {"login": "radykal-com", "name": "Marc Ruiz"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/79b1c6d960bfd2b7f91dd06427979467410dffa4", "committedDate": "2020-02-08T09:00:04Z", "message": "Fix compile error due to ambiguous call in tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "932f5f6b7dffab1665a93dd9047a4c637f4e50e4", "author": {"user": {"login": "radykal-com", "name": "Marc Ruiz"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/932f5f6b7dffab1665a93dd9047a4c637f4e50e4", "committedDate": "2020-02-08T08:56:17Z", "message": "Fix compile error due to ambiguous call in tests"}, "afterCommit": {"oid": "79b1c6d960bfd2b7f91dd06427979467410dffa4", "author": {"user": {"login": "radykal-com", "name": "Marc Ruiz"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/79b1c6d960bfd2b7f91dd06427979467410dffa4", "committedDate": "2020-02-08T09:00:04Z", "message": "Fix compile error due to ambiguous call in tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d8187bebf73e78a8fa500cecf780d0672b0be1cb", "author": {"user": {"login": "radykal-com", "name": "Marc Ruiz"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/d8187bebf73e78a8fa500cecf780d0672b0be1cb", "committedDate": "2020-02-08T10:23:24Z", "message": "Move fixtures to the correct test namespace and rename to better identify the test using them"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1NTQxNTI2", "url": "https://github.com/Graylog2/graylog2-server/pull/7240#pullrequestreview-355541526", "createdAt": "2020-02-08T10:29:52Z", "commit": {"oid": "8f8a25ebb74cef5148b2d16155841c361b0fc433"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wOFQxMDoyOTo1M1rOFnQD9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wOFQxMDoyOTo1M1rOFnQD9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjcwMTk0Mg==", "bodyText": "Previous to the change 8b3e73e#diff-6474ec601eb016132c8b75872b017319R105\nIt was posible to write relative paths from resources root dir in the form of\n\norg/graylog/.../...\n\nthis change allows it again.", "url": "https://github.com/Graylog2/graylog2-server/pull/7240#discussion_r376701942", "createdAt": "2020-02-08T10:29:53Z", "author": {"login": "radykal-com"}, "path": "graylog2-server/src/test/java/org/graylog/testing/mongodb/MongoDBFixtureImporter.java", "diffHunk": "@@ -102,7 +102,7 @@ void importResources(MongoDatabase database) {\n     }\n \n     private static URL toResource(final String resourceName, final Class<?> contextClass) {\n-        if (Paths.get(resourceName).isAbsolute()) {\n+        if (Paths.get(resourceName).isAbsolute() || (Paths.get(resourceName).getNameCount() > 1)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f8a25ebb74cef5148b2d16155841c361b0fc433"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4b4006f8dfc98818a86a766ae89d9bf2a85f3dcd", "author": {"user": {"login": "radykal-com", "name": "Marc Ruiz"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/4b4006f8dfc98818a86a766ae89d9bf2a85f3dcd", "committedDate": "2020-02-08T10:52:35Z", "message": "Allow using relative paths from resources root in MongoDBFixtureImporter"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8f8a25ebb74cef5148b2d16155841c361b0fc433", "author": {"user": {"login": "radykal-com", "name": "Marc Ruiz"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/8f8a25ebb74cef5148b2d16155841c361b0fc433", "committedDate": "2020-02-08T10:24:03Z", "message": "Allow using relative paths from resources root in MongoDBFixtureImporter"}, "afterCommit": {"oid": "4b4006f8dfc98818a86a766ae89d9bf2a85f3dcd", "author": {"user": {"login": "radykal-com", "name": "Marc Ruiz"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/4b4006f8dfc98818a86a766ae89d9bf2a85f3dcd", "committedDate": "2020-02-08T10:52:35Z", "message": "Allow using relative paths from resources root in MongoDBFixtureImporter"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cfadb36974fa9f673bfe4adba8aa285928ed696c", "author": {"user": {"login": "radykal-com", "name": "Marc Ruiz"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/cfadb36974fa9f673bfe4adba8aa285928ed696c", "committedDate": "2020-02-08T10:56:30Z", "message": "Refactor to prevent duplicated code"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1NTk0OTM2", "url": "https://github.com/Graylog2/graylog2-server/pull/7240#pullrequestreview-355594936", "createdAt": "2020-02-09T09:43:44Z", "commit": {"oid": "cfadb36974fa9f673bfe4adba8aa285928ed696c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wOVQwOTo0Mzo0NFrOFnUK2w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wOVQwOTo0Mzo0NFrOFnUK2w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njc2OTI0Mw==", "bodyText": "You can use any(Bson.class) here instead of casting the value.", "url": "https://github.com/Graylog2/graylog2-server/pull/7240#discussion_r376769243", "createdAt": "2020-02-09T09:43:44Z", "author": {"login": "bernd"}, "path": "graylog2-server/src/test/java/org/graylog2/migrations/V20170110150100_FixAlertConditionsMigrationTest.java", "diffHunk": "@@ -159,7 +162,7 @@ public void upgradeWhenMigrationCompleted() throws Exception {\n \n         migration.upgrade();\n \n-        verify(collection, never()).updateOne(any(), any());\n+        verify(collection, never()).updateOne(any(), (Bson) any());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cfadb36974fa9f673bfe4adba8aa285928ed696c"}, "originalPosition": 54}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b3cfe9af12fef620ef2e1d65443005703b33475a", "author": {"user": {"login": "radykal-com", "name": "Marc Ruiz"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/b3cfe9af12fef620ef2e1d65443005703b33475a", "committedDate": "2020-02-09T11:59:12Z", "message": "Use any(Bson.class) instead of type casting to Bson"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1NjA0MTIy", "url": "https://github.com/Graylog2/graylog2-server/pull/7240#pullrequestreview-355604122", "createdAt": "2020-02-09T12:35:05Z", "commit": {"oid": "b3cfe9af12fef620ef2e1d65443005703b33475a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "51df57b7892d1c8d67851f612a9596846900ded8", "author": {"user": {"login": "radykal-com", "name": "Marc Ruiz"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/51df57b7892d1c8d67851f612a9596846900ded8", "committedDate": "2020-02-09T16:25:30Z", "message": "Ensure correct version of mongodb and mongodb-legacy dependencies"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU3MjUwNDg1", "url": "https://github.com/Graylog2/graylog2-server/pull/7240#pullrequestreview-357250485", "createdAt": "2020-02-12T08:06:21Z", "commit": {"oid": "51df57b7892d1c8d67851f612a9596846900ded8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2709, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}