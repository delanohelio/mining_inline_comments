{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc0OTE2ODkw", "number": 8882, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxMDowNzo0N1rOEdndww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxMDoxNToxNFrOEdnzQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk5NDkwNzU1OnYy", "diffSide": "RIGHT", "path": "graylog2-web-interface/src/pages/LoadingPage.jsx", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxMDowNzo0N1rOHI39iA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxNDo0NDo0M1rOHJJWag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTA2NzUyOA==", "bodyText": "We need to reset the additional styles here as well.", "url": "https://github.com/Graylog2/graylog2-server/pull/8882#discussion_r479067528", "createdAt": "2020-08-28T10:07:47Z", "author": {"login": "linuspahl"}, "path": "graylog2-web-interface/src/pages/LoadingPage.jsx", "diffHunk": "@@ -1,15 +1,20 @@\n import PropTypes from 'prop-types';\n-import React from 'react';\n+import React, { useContext, useEffect } from 'react';\n \n import { DocumentTitle, Spinner, Icon } from 'components/common';\n import LoginBox from 'components/login/LoginBox';\n import authStyles from 'theme/styles/authStyles';\n-import GlobalThemeStyles from 'theme/GlobalThemeStyles';\n+import { GlobalStylesContext } from 'contexts/GlobalStylesProvider';\n \n const LoadingPage = ({ text }) => {\n+  const { addGlobalStyles } = useContext(GlobalStylesContext);\n+\n+  useEffect(() => {\n+    addGlobalStyles(authStyles);\n+  }, []);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f7f4370711ef7e2f04da787c4388fc7817b828f8"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTM1MjQyNg==", "bodyText": "Reset in LoggedInPage during useEffect mount", "url": "https://github.com/Graylog2/graylog2-server/pull/8882#discussion_r479352426", "createdAt": "2020-08-28T14:44:43Z", "author": {"login": "kyleknighted"}, "path": "graylog2-web-interface/src/pages/LoadingPage.jsx", "diffHunk": "@@ -1,15 +1,20 @@\n import PropTypes from 'prop-types';\n-import React from 'react';\n+import React, { useContext, useEffect } from 'react';\n \n import { DocumentTitle, Spinner, Icon } from 'components/common';\n import LoginBox from 'components/login/LoginBox';\n import authStyles from 'theme/styles/authStyles';\n-import GlobalThemeStyles from 'theme/GlobalThemeStyles';\n+import { GlobalStylesContext } from 'contexts/GlobalStylesProvider';\n \n const LoadingPage = ({ text }) => {\n+  const { addGlobalStyles } = useContext(GlobalStylesContext);\n+\n+  useEffect(() => {\n+    addGlobalStyles(authStyles);\n+  }, []);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTA2NzUyOA=="}, "originalCommit": {"oid": "f7f4370711ef7e2f04da787c4388fc7817b828f8"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk5NDkzMzgzOnYy", "diffSide": "RIGHT", "path": "graylog2-web-interface/src/contexts/GlobalStylesProvider.jsx", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxMDoxMTozM1rOHI4O1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxMDoxMTozM1rOHI4O1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTA3MTk1Nw==", "bodyText": "This should be (?CSSRules) => void", "url": "https://github.com/Graylog2/graylog2-server/pull/8882#discussion_r479071957", "createdAt": "2020-08-28T10:11:33Z", "author": {"login": "linuspahl"}, "path": "graylog2-web-interface/src/contexts/GlobalStylesProvider.jsx", "diffHunk": "@@ -1,6 +1,31 @@\n-import { createGlobalStyle, css } from 'styled-components';\n-\n-const GlobalThemeStyles = createGlobalStyle(({ additionalStyles, theme }) => css`\n+// @flow strict\n+import * as React from 'react';\n+import { createContext, useState } from 'react';\n+import PropTypes from 'prop-types';\n+import { createGlobalStyle, css, type CSSRules } from 'styled-components';\n+\n+type Props = {\n+  children: React.Node,\n+};\n+\n+type StyleTypes = {\n+  addGlobalStyles: (?CSSRules) => ?string,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f7f4370711ef7e2f04da787c4388fc7817b828f8"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk5NDk2MjU5OnYy", "diffSide": "RIGHT", "path": "graylog2-web-interface/src/contexts/GlobalStylesProvider.jsx", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxMDoxNToxNFrOHI4h0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxMDoxNToxNFrOHI4h0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTA3NjgxNg==", "bodyText": "Let's unify this type with the type used in line 12 and define the type like this: const [additionalStyles, addGlobalStyles] = useState<?string>();", "url": "https://github.com/Graylog2/graylog2-server/pull/8882#discussion_r479076816", "createdAt": "2020-08-28T10:15:14Z", "author": {"login": "linuspahl"}, "path": "graylog2-web-interface/src/contexts/GlobalStylesProvider.jsx", "diffHunk": "@@ -1,6 +1,31 @@\n-import { createGlobalStyle, css } from 'styled-components';\n-\n-const GlobalThemeStyles = createGlobalStyle(({ additionalStyles, theme }) => css`\n+// @flow strict\n+import * as React from 'react';\n+import { createContext, useState } from 'react';\n+import PropTypes from 'prop-types';\n+import { createGlobalStyle, css, type CSSRules } from 'styled-components';\n+\n+type Props = {\n+  children: React.Node,\n+};\n+\n+type StyleTypes = {\n+  addGlobalStyles: (?CSSRules) => ?string,\n+};\n+\n+export const GlobalStylesContext = createContext<StyleTypes>({ addGlobalStyles: () => {} });\n+\n+const GlobalStylesProvider = ({ children }: Props) => {\n+  const [additionalStyles: string, addGlobalStyles] = useState();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f7f4370711ef7e2f04da787c4388fc7817b828f8"}, "originalPosition": 21}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4053, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}