{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkwNTY1NTI5", "number": 7712, "title": "LoginPage as functional component & canceled promise", "bodyText": "Description\n\n\nRewrites createReactClass as functional component\nAdds promise .cancel() on unmount\n\nMotivation and Context\n\n\nComponent was using older ES5 code and also was causing warnings of state being set on an unmounted component.\nHow Has This Been Tested?\n\n\n\nScreenshots (if appropriate):\nTypes of changes\n\n\n Bug fix (non-breaking change which fixes an issue)\n New feature (non-breaking change which adds functionality)\n Refactoring (non-breaking change)\n Breaking change (fix or feature that would cause existing functionality to change)\n\nChecklist:\n\n\n\n My code follows the code style of this project.\n My change requires a change to the documentation.\n I have updated the documentation accordingly.\n I have read the CONTRIBUTING document.\n I have added tests to cover my changes.", "createdAt": "2020-03-18T17:19:50Z", "url": "https://github.com/Graylog2/graylog2-server/pull/7712", "merged": true, "mergeCommit": {"oid": "ed11bd1a7cb6ba74e3f1a592adcf8fc2d3e3b362"}, "closed": true, "closedAt": "2020-03-20T11:01:37Z", "author": {"login": "kyleknighted"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcO6kLfAH2gAyMzkwNTY1NTI5OmFmNWNkZTk1ZDIxYzdjMjE4ZGJkYzdkMWQ0ZTQ5MzliNDBiMDMxZjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcPeaz7gFqTM3ODM4OTc3OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "af5cde95d21c7c218dbdc7d1d4e4939b40b031f6", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/af5cde95d21c7c218dbdc7d1d4e4939b40b031f6", "committedDate": "2020-03-18T17:15:02Z", "message": "LoginPage as functional component & canceled promise"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a45a508b229e5c66117e293450badc079f0abb86", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/a45a508b229e5c66117e293450badc079f0abb86", "committedDate": "2020-03-19T13:16:16Z", "message": "Remove connect"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "46be687424297445d4c58304613d0174404814b3", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/46be687424297445d4c58304613d0174404814b3", "committedDate": "2020-03-19T13:36:47Z", "message": "Remove SessionStore leave SessionActions"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3ODg5NzI2", "url": "https://github.com/Graylog2/graylog2-server/pull/7712#pullrequestreview-377889726", "createdAt": "2020-03-19T16:29:52Z", "commit": {"oid": "46be687424297445d4c58304613d0174404814b3"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxNjoyOTo1M1rOF42jbg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxNjoyOTo1M1rOF42jbg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTE1ODM4Mg==", "bodyText": "I think using false as default lastError is not the best thing, we should probably consider using undefined or ''.", "url": "https://github.com/Graylog2/graylog2-server/pull/7712#discussion_r395158382", "createdAt": "2020-03-19T16:29:53Z", "author": {"login": "edmundoa"}, "path": "graylog2-web-interface/src/pages/LoginPage.jsx", "diffHunk": "@@ -14,80 +11,73 @@ import AuthThemeStyles from 'theme/styles/authStyles';\n import CombinedProvider from 'injection/CombinedProvider';\n import LoadingPage from './LoadingPage';\n \n-const { SessionStore, SessionActions } = CombinedProvider.get('Session');\n+const { SessionActions } = CombinedProvider.get('Session');\n \n-const LoginPage = createReactClass({\n-  displayName: 'LoginPage',\n-  mixins: [Reflux.connect(SessionStore), Reflux.ListenerMethods],\n+const LoginPage = () => {\n+  const [didValidateSession, setDidValidateSession] = useState(false);\n+  const [lastError, setLastError] = useState(false);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46be687424297445d4c58304613d0174404814b3"}, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5a0746fb99d71c42103460765ea60c6b008c84a5", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/5a0746fb99d71c42103460765ea60c6b008c84a5", "committedDate": "2020-03-19T17:27:00Z", "message": "cleanup state"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4Mzg5Nzc5", "url": "https://github.com/Graylog2/graylog2-server/pull/7712#pullrequestreview-378389779", "createdAt": "2020-03-20T11:01:23Z", "commit": {"oid": "5a0746fb99d71c42103460765ea60c6b008c84a5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2602, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}