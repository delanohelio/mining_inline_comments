{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ3Mjc2OTY2", "number": 8527, "title": "Save system user sidebar pinning in local storage and differentiate setting for searches and dashboards", "bodyText": "This is a follow-up PR for #8396 which saves the sidebar layout setting as a user preference. Because a user preference can't be changed for the system admin, we've decided to save this setting in the local storage, for this type of users.\nWith this PR we also implement another setting for sidebar pinning on dashboards. This way a user is able to define different sidebar layout settings for dashboards and e.g. saved searches.\nTypes of changes\n\n\n Bug fix (non-breaking change which fixes an issue)\n New feature (non-breaking change which adds functionality)\n Refactoring (non-breaking change)\n Breaking change (fix or feature that would cause existing functionality to change)\n\nChecklist:\n\n\n\n My code follows the code style of this project.\n My change requires a change to the documentation.\n I have updated the documentation accordingly.\n I have read the CONTRIBUTING document.\n I have added tests to cover my changes.", "createdAt": "2020-07-10T07:32:09Z", "url": "https://github.com/Graylog2/graylog2-server/pull/8527", "merged": true, "mergeCommit": {"oid": "1c0a2192513d9831b75d22315a7aebdea9519201"}, "closed": true, "closedAt": "2020-07-27T15:19:28Z", "author": {"login": "linuspahl"}, "timelineItems": {"totalCount": 98, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcrcf3BAH2gAyNDQ3Mjc2OTY2OjIxYmZiY2FhYTAxODU2ZjY4ZWE3NThmMDA1ZGZiYzc5MTMxYTMzYjA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc5DbSQgFqTQ1NTg4NDAyNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "21bfbcaaa01856f68ea758f005dfbc79131a33b0", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/21bfbcaaa01856f68ea758f005dfbc79131a33b0", "committedDate": "2020-06-15T08:36:58Z", "message": "Support editing title, description and summary of a saved search\n\n* Add \"Edit metadata\" action for saved search controls\n* Rename \"Edit\" action to \"Edit metadata\" for dashboards\n* Implement view type specific description for ViewPropertiesModal\n* Adjust sidebar ViewDescription"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e7d24fe069468dee91b8db613ba757f93097d723", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/e7d24fe069468dee91b8db613ba757f93097d723", "committedDate": "2020-06-15T08:36:58Z", "message": "Create prototype for pinned sidebar"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed2384ffc0d30603118c69d9fe44142e9c15402f", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/ed2384ffc0d30603118c69d9fe44142e9c15402f", "committedDate": "2020-06-15T08:36:58Z", "message": "Create separate components for the sidebar"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "beb040671b46d202535d8955f59ad7b4cffbb985", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/beb040671b46d202535d8955f59ad7b4cffbb985", "committedDate": "2020-06-15T08:36:58Z", "message": "Update theme colors variable name for sidebar components"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7c53f533404201cda4c3dbe4c4173a18f6f29e5a", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/7c53f533404201cda4c3dbe4c4173a18f6f29e5a", "committedDate": "2020-06-15T08:36:58Z", "message": "Rename SideBar component to Sidebar"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f6c395483d5b73e36aa1ed8c8ee8c60632d90bdc", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/f6c395483d5b73e36aa1ed8c8ee8c60632d90bdc", "committedDate": "2020-06-15T08:36:58Z", "message": "Sort imports"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d75c8965bb35858b0f13f33600b37618df24ec8", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/6d75c8965bb35858b0f13f33600b37618df24ec8", "committedDate": "2020-06-15T08:36:58Z", "message": "Remove not needed Sidbar.styles and NavItem.styles"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eee5bd1c10afb0e5ea957f60a8024453887b9261", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/eee5bd1c10afb0e5ea957f60a8024453887b9261", "committedDate": "2020-06-15T08:36:58Z", "message": "Remove not needed SidebarIcon component"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80f450eff60f44d30c9995f01d76b9c46f29131f", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/80f450eff60f44d30c9995f01d76b9c46f29131f", "committedDate": "2020-06-15T08:36:58Z", "message": "Create directory for each sidebar section"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c79489f6a3db129a988bfebaf0aeb2662659c950", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/c79489f6a3db129a988bfebaf0aeb2662659c950", "committedDate": "2020-06-15T08:36:59Z", "message": "Change HorizontalRuler styling"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a6639234f00150e87ae73fb0f7316dcff59645c2", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/a6639234f00150e87ae73fb0f7316dcff59645c2", "committedDate": "2020-06-15T08:36:59Z", "message": "Sort props and type definitions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c12beec4403759ada674a6d19ebe6d6ec7b2eb64", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/c12beec4403759ada674a6d19ebe6d6ec7b2eb64", "committedDate": "2020-06-15T08:36:59Z", "message": "Use aria-label for section icons"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b668ac683f07918436bfb18980819867e03c14af", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/b668ac683f07918436bfb18980819867e03c14af", "committedDate": "2020-06-15T08:36:59Z", "message": "Unify sidebar section hover title background color"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6543a5d3a962ea5317ff9445b9217948c17644b3", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/6543a5d3a962ea5317ff9445b9217948c17644b3", "committedDate": "2020-06-15T08:36:59Z", "message": "Implement SizeMe component for FieldList"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b2e7b9c45f0d6d55366c8781f16cf56665de00f", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/1b2e7b9c45f0d6d55366c8781f16cf56665de00f", "committedDate": "2020-06-15T08:36:59Z", "message": "Adjust NavItem hover behaviour"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e092384a3dfdab073272806f09a7a98e766aa13f", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/e092384a3dfdab073272806f09a7a98e766aa13f", "committedDate": "2020-06-15T08:36:59Z", "message": "Remove HorizontalRule component"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3fba38744a3850f83dc4b9b070ee854109f65379", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/3fba38744a3850f83dc4b9b070ee854109f65379", "committedDate": "2020-06-15T08:36:59Z", "message": "Fix sidebar overflow"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5a0ff41440c243c7811e63586980f9600f63f894", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/5a0ff41440c243c7811e63586980f9600f63f894", "committedDate": "2020-06-15T08:36:59Z", "message": "Change view description info text"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f71e4191a8e8cad6b0422dde4f95b781b0fb0f40", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/f71e4191a8e8cad6b0422dde4f95b781b0fb0f40", "committedDate": "2020-06-15T08:36:59Z", "message": "Change create section button stylings and add info text."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1882cee17822c5dbef7fe87d5d187991ea9867ec", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/1882cee17822c5dbef7fe87d5d187991ea9867ec", "committedDate": "2020-06-15T08:36:59Z", "message": "Fix sidebar toggling, when addding an aggreation or parameter"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8b947ff82c824b8980dba59bf3f4b69908d700cc", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/8b947ff82c824b8980dba59bf3f4b69908d700cc", "committedDate": "2020-06-15T08:36:59Z", "message": "Add description for highlighting section and create separate component for section subheadlines"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0e43faa6e90791906e51ee70c324070b340cc1f1", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/0e43faa6e90791906e51ee70c324070b340cc1f1", "committedDate": "2020-06-15T08:36:59Z", "message": "Adjust FieldList height calculation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe089d948e388cfa24b795b1b08c7166901181fc", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/fe089d948e388cfa24b795b1b08c7166901181fc", "committedDate": "2020-06-15T08:36:59Z", "message": "Define layer icon as sidebar overlay toggle icon"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dc1a347e2b301f3c74acd4ecd6c13df2b934ce71", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/dc1a347e2b301f3c74acd4ecd6c13df2b934ce71", "committedDate": "2020-06-15T08:36:59Z", "message": "Adjust search page layout context naming"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "25b485c8451b96e4b8db6748cc86e1ea8f6df2f9", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/25b485c8451b96e4b8db6748cc86e1ea8f6df2f9", "committedDate": "2020-06-15T08:36:59Z", "message": "Rename remaining SideBar to Sidebar"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb8309ca38260887a5f3ad59c5dcedd70cf527cc", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/eb8309ca38260887a5f3ad59c5dcedd70cf527cc", "committedDate": "2020-06-15T08:36:59Z", "message": "Rename SectionOverview to SidebarNavigation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8c850cf00d2bb14452021c7c0d128fcbb236b6a", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/a8c850cf00d2bb14452021c7c0d128fcbb236b6a", "committedDate": "2020-06-15T08:36:59Z", "message": "Rename SectionContent to ContentColumn"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "68163012cf72b8979eb6086e19b04e19cf4d6865", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/68163012cf72b8979eb6086e19b04e19cf4d6865", "committedDate": "2020-06-15T08:36:59Z", "message": "Reimplement SearchPageLayoutProvider for ExtendedSearchPage"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "72db1579837d0360fa8eb393ad8e03077d800630", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/72db1579837d0360fa8eb393ad8e03077d800630", "committedDate": "2020-06-15T08:36:59Z", "message": "Fix sidebar overlay toggle button title"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e5e615b5061b6ada147b61e31987fd3ea4334d68", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/e5e615b5061b6ada147b61e31987fd3ea4334d68", "committedDate": "2020-06-15T08:36:59Z", "message": "Fix sidebar NavItem title prop"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "244e656018178d83b19974077d8619603db4c812", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/244e656018178d83b19974077d8619603db4c812", "committedDate": "2020-06-15T08:36:59Z", "message": "Fix SectionSubHeadline naming issue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "86930c19f38b2f7cfbee1ea97874f0ce6ee256e5", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/86930c19f38b2f7cfbee1ea97874f0ce6ee256e5", "committedDate": "2020-06-15T08:36:59Z", "message": "Remove not needed styling"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f2afeebef2fe757ebccfcc9cacd24f87256454e", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/5f2afeebef2fe757ebccfcc9cacd24f87256454e", "committedDate": "2020-06-15T08:36:59Z", "message": "Add border for sidebar content column"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea8d579e4406fee5fda9910047aaca0041d0f3e2", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/ea8d579e4406fee5fda9910047aaca0041d0f3e2", "committedDate": "2020-06-15T08:37:00Z", "message": "Change default sidebar title for ad hoc search"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c99098d07b45d6c6bc2cc16816a6d6db56cbd0df", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/c99098d07b45d6c6bc2cc16816a6d6db56cbd0df", "committedDate": "2020-06-15T08:37:00Z", "message": "Implement more dynamic FieldList version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cf78454bd51db1b92df0fe5ffd244d3919784cf7", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/cf78454bd51db1b92df0fe5ffd244d3919784cf7", "committedDate": "2020-06-15T08:37:00Z", "message": "Remove not needed width styling"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6790b97961a777b8631ef4dda79e5e3ab12d43f0", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/6790b97961a777b8631ef4dda79e5e3ab12d43f0", "committedDate": "2020-06-15T08:37:00Z", "message": "Updating tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "102b0ce9e974551607424f1daa63cd92d38eb158", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/102b0ce9e974551607424f1daa63cd92d38eb158", "committedDate": "2020-06-15T08:37:00Z", "message": "Fix styling for long search titles"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ca5b477c0fcc687d14eb6f5f86ef2105306892a", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/0ca5b477c0fcc687d14eb6f5f86ef2105306892a", "committedDate": "2020-06-15T08:37:00Z", "message": "Use display flex instead of grid for extended search page layout"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6dec26c7c0a0b0f6b6a8c78ec8dba258f74ee2fd", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/6dec26c7c0a0b0f6b6a8c78ec8dba258f74ee2fd", "committedDate": "2020-06-15T08:37:00Z", "message": "Updating remaining tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b939aa10dfcbb3ff1e5c512268d334955bd90ed", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/5b939aa10dfcbb3ff1e5c512268d334955bd90ed", "committedDate": "2020-06-15T08:37:00Z", "message": "Fix sidebar layout for IE11"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "65df79ebd39ed6e092c349a7f69205aa4309d571", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/65df79ebd39ed6e092c349a7f69205aa4309d571", "committedDate": "2020-06-15T08:37:00Z", "message": "Refactor sidebar content column props handling"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "94ac30ca1d82b5959d7b0bd5873bc6573da0d77e", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/94ac30ca1d82b5959d7b0bd5873bc6573da0d77e", "committedDate": "2020-06-15T08:37:00Z", "message": "Ignore vendor prefix for inline-grid on style lint"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b03cdb01545374e5a813854601a49ee4cbe71923", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/b03cdb01545374e5a813854601a49ee4cbe71923", "committedDate": "2020-06-15T08:37:00Z", "message": "Fix flow type error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3b32edf50cb86c776c2d15bf32f9bb20c2b30844", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/3b32edf50cb86c776c2d15bf32f9bb20c2b30844", "committedDate": "2020-06-15T08:37:00Z", "message": "Fix AddWidgetButton import for CreateCustomAggregation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4fa330ecf1c90be51df3b18da97ca41913c867a9", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/4fa330ecf1c90be51df3b18da97ca41913c867a9", "committedDate": "2020-06-15T08:37:00Z", "message": "Adjust highlighting rules list style"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "96679e76c09bdd89b9405cdda739db6b0b70d684", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/96679e76c09bdd89b9405cdda739db6b0b70d684", "committedDate": "2020-06-15T08:37:00Z", "message": "Temporarily rename Sidebar file to apply change to git"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ca9f2cd05e6706c085538c3f7b507f6240bd872", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/1ca9f2cd05e6706c085538c3f7b507f6240bd872", "committedDate": "2020-06-15T08:37:00Z", "message": "Rename Sidebar file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f17c1a1394e3c8f1f52aa656ee1cefb4a97d2c2e", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/f17c1a1394e3c8f1f52aa656ee1cefb4a97d2c2e", "committedDate": "2020-06-15T08:37:00Z", "message": "Fix react import for SidebarNavigation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5ea0fd3935da51c0956e6870013d0792a2fbb6b3", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/5ea0fd3935da51c0956e6870013d0792a2fbb6b3", "committedDate": "2020-06-15T08:37:00Z", "message": "Remove not needed line"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "72eed604907585df234fe9a6be8028603c7b130f", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/72eed604907585df234fe9a6be8028603c7b130f", "committedDate": "2020-06-15T08:37:00Z", "message": "Fix ViewMetadataStore import for Sidebar"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ad4dacf72c148c2c01a7caa730dd3c80f82da778", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/ad4dacf72c148c2c01a7caa730dd3c80f82da778", "committedDate": "2020-06-15T08:37:00Z", "message": "Disable eslint warning for unused props in sidebarSections.js"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "41097d4574f4772174a0f76bee96daf21487e338", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/41097d4574f4772174a0f76bee96daf21487e338", "committedDate": "2020-06-15T08:37:00Z", "message": "Remove not used import"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2393776bffc205b9244689e721cbad7a7632c97b", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/2393776bffc205b9244689e721cbad7a7632c97b", "committedDate": "2020-06-15T08:37:00Z", "message": "Move AddWIdgetButton state initialization in a constructor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6c658e088ad57f11307112a4de213fa73c3ee7bc", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/6c658e088ad57f11307112a4de213fa73c3ee7bc", "committedDate": "2020-06-17T15:39:31Z", "message": "Use default text color for sidebar section info"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d6baa5e6d7c8ef8efedd25cceb6374bf68cdd79a", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/d6baa5e6d7c8ef8efedd25cceb6374bf68cdd79a", "committedDate": "2020-06-17T15:44:08Z", "message": "Use pin icon instead of layer icon for the sidebar overlay toggle button"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "834ffb2c7db1ffa140e506a8247f3bf376965494", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/834ffb2c7db1ffa140e506a8247f3bf376965494", "committedDate": "2020-06-17T15:49:16Z", "message": "Change highlighting section info text"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ba7085cd55dea6d212ef50b8fe5d2c4fadbbd1e", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/9ba7085cd55dea6d212ef50b8fe5d2c4fadbbd1e", "committedDate": "2020-06-18T07:22:36Z", "message": "Use nullish coalescing operator for sidebar boolean check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "51bb372fb2af99d6ebfa240148b2cb9750c8976c", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/51bb372fb2af99d6ebfa240148b2cb9750c8976c", "committedDate": "2020-06-18T07:52:57Z", "message": "Change default search title from Ad Hoc Search to Untitled Search"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d9476b49c78b00892099e7b86440773d5f8b03b2", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/d9476b49c78b00892099e7b86440773d5f8b03b2", "committedDate": "2020-06-18T08:05:22Z", "message": "Add type for Sidebar results prop"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bcd3b97c23fda5d8e21b505ebcccd877012f2349", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/bcd3b97c23fda5d8e21b505ebcccd877012f2349", "committedDate": "2020-06-18T16:47:00Z", "message": "Merge branch 'master' into pinned-sidebar"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7a11ffbf4fa0d389a28f40dc1217cf2a2592601c", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/7a11ffbf4fa0d389a28f40dc1217cf2a2592601c", "committedDate": "2020-06-19T07:29:28Z", "message": "Merge branch 'master' into pinned-sidebar"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "249546bdd9469ae43ae23b56a0a18c0b8a923032", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/249546bdd9469ae43ae23b56a0a18c0b8a923032", "committedDate": "2020-06-19T07:42:23Z", "message": "Fix sidebar export name in sidebar index file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "25b453a57ffb1c252f61c40450b2eea5d3414507", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/25b453a57ffb1c252f61c40450b2eea5d3414507", "committedDate": "2020-06-19T07:51:16Z", "message": "Update imports order based on new linting rule"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ec9dab176445434a8a8423e4ae707257994eb5b6", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/ec9dab176445434a8a8423e4ae707257994eb5b6", "committedDate": "2020-06-19T15:43:20Z", "message": "Merge branch 'master' into pinned-sidebar"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3e5b94b3acb4b09f6ab879b0add9bcf9b7ee3149", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/3e5b94b3acb4b09f6ab879b0add9bcf9b7ee3149", "committedDate": "2020-06-21T14:46:05Z", "message": "Replace hard coded font-sizes with theme variables"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8f5a71ca6bf04c6998b5374a552a0aeb030c1711", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/8f5a71ca6bf04c6998b5374a552a0aeb030c1711", "committedDate": "2020-06-22T08:16:41Z", "message": "Rename sidebar layout setting isInline to isPinned"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e4c85b32bca7a74dadb8046bcc972b046691a68c", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/e4c85b32bca7a74dadb8046bcc972b046691a68c", "committedDate": "2020-06-23T08:26:19Z", "message": "Use ViewStore isNew to determine sidebar title"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "99262feb0df7d0f951aa67fcd5f95948553a9aac", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/99262feb0df7d0f951aa67fcd5f95948553a9aac", "committedDate": "2020-06-23T09:55:07Z", "message": "Merge branch 'master' into pinned-sidebar"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "18e055f3d6d77667a852a7bc1f0beaac63b77a3d", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/18e055f3d6d77667a852a7bc1f0beaac63b77a3d", "committedDate": "2020-06-24T07:58:55Z", "message": "Fix Sidebar test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0401397bf8e63662a672e5590fb5a779961d85d5", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/0401397bf8e63662a672e5590fb5a779961d85d5", "committedDate": "2020-06-25T09:20:03Z", "message": "Merge branch 'master' into pinned-sidebar"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "38903cf1018f7ff38d460acf738d34290b8ba4a8", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/38903cf1018f7ff38d460acf738d34290b8ba4a8", "committedDate": "2020-06-25T09:30:40Z", "message": "Remove not needed lines"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e1b6061c75a9167e20150c405bcb3e58e3215ce", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/8e1b6061c75a9167e20150c405bcb3e58e3215ce", "committedDate": "2020-06-25T09:31:12Z", "message": "Add name for unnamed function in CreateCustomAggregation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "47de6218d7574647258a666184a7f9d239a53a0a", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/47de6218d7574647258a666184a7f9d239a53a0a", "committedDate": "2020-06-25T10:16:02Z", "message": "Merge branch 'master' into pinned-sidebar"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a74710124b4852c965c82221feda83cb38b2e6b3", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/a74710124b4852c965c82221feda83cb38b2e6b3", "committedDate": "2020-06-25T10:21:06Z", "message": "Fix padding-line-between-statements linter error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4fee4f5956f82fd8e627f94037284d187fd5bd1c", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/4fee4f5956f82fd8e627f94037284d187fd5bd1c", "committedDate": "2020-06-25T11:57:32Z", "message": "Refactor sidebar view type label creation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "95e64099e8e88c8a6c30c170c3ed7e328e3feb27", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/95e64099e8e88c8a6c30c170c3ed7e328e3feb27", "committedDate": "2020-06-29T09:42:08Z", "message": "Merge branch 'master' into pinned-sidebar"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0adf65044635150ee594e67ddddf7d88f9c47fa5", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/0adf65044635150ee594e67ddddf7d88f9c47fa5", "committedDate": "2020-06-29T11:22:11Z", "message": "Sort props"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "673a91513acc7417aae87c50a28dfc19dd59658f", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/673a91513acc7417aae87c50a28dfc19dd59658f", "committedDate": "2020-07-02T11:11:06Z", "message": "Merge branch 'master' into pinned-sidebar"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3e30ff47294e043df1ceb604bd7629552a71a3cd", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/3e30ff47294e043df1ceb604bd7629552a71a3cd", "committedDate": "2020-07-02T16:02:26Z", "message": "Merge branch 'master' into pinned-sidebar"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f12b86aa481aebd7acdfdeed68f87c7352e64007", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/f12b86aa481aebd7acdfdeed68f87c7352e64007", "committedDate": "2020-07-03T11:27:40Z", "message": "Save sidebar isPinned setting as a user preference (#8396)\n\n* Save sidebar isInline setting as a user preference\r\n\r\n* Use user preference as initial state for SearchPageLayoutProvider\r\n\r\n* Rename user preference displaySearchSidebarInline to searchSidebarIsInline\r\n\r\n* Do not display success notification for updated user preference when changing sidebar layout setting\r\n\r\n* Remove not needed comment\r\n\r\n* Implemnt CurrentUerContext for SearchPageLayout\r\n\r\n* Fix padding-line-between-statements linter error\r\n\r\n* Add type definitions for UserPreferencesModal"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "24f0b9f766f8b620b18d35bd18c4d539e72d70b8", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/24f0b9f766f8b620b18d35bd18c4d539e72d70b8", "committedDate": "2020-07-03T12:22:18Z", "message": "Update current user correctly after changing user preferences"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7dad38d34a14ebfd3e9d778965ab02883c6f76c5", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/7dad38d34a14ebfd3e9d778965ab02883c6f76c5", "committedDate": "2020-07-06T09:57:31Z", "message": "Create separate user preference for sidebar pinnning on dashboards"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "60c6b99ce5f66e9e3c5cb9fb4d0a5182d0aa806e", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/60c6b99ce5f66e9e3c5cb9fb4d0a5182d0aa806e", "committedDate": "2020-07-06T10:23:03Z", "message": "Refactor SearchPageLayout sidebar pinning"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b6492345687d2da49c3ccde8ca2e31bb95fedd5a", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/b6492345687d2da49c3ccde8ca2e31bb95fedd5a", "committedDate": "2020-07-06T10:47:33Z", "message": "Save sidebar pinning setting in local storage for the admin user"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0854322e81946f49dddbac51dd1f79eb7e716d45", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/0854322e81946f49dddbac51dd1f79eb7e716d45", "committedDate": "2020-07-10T07:14:24Z", "message": "Add system user test for SearchPageLayoutProvider"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8dc26d3f7a35b63cc26436dd10acd3b9bb0cc467", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/8dc26d3f7a35b63cc26436dd10acd3b9bb0cc467", "committedDate": "2020-07-10T07:21:10Z", "message": "Merge branch 'master' into save-sidebar-layout-settings-v2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d18a99b0bcb1fce2decbc2506dbed2ce18e3916", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/1d18a99b0bcb1fce2decbc2506dbed2ce18e3916", "committedDate": "2020-07-10T07:22:38Z", "message": "Fix typo"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2MTg0NDIz", "url": "https://github.com/Graylog2/graylog2-server/pull/8527#pullrequestreview-446184423", "createdAt": "2020-07-10T07:34:36Z", "commit": {"oid": "1d18a99b0bcb1fce2decbc2506dbed2ce18e3916"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQwNzozNDozNlrOGvtBog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQwNzozNDozNlrOGvtBog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjY3Mzk1NA==", "bodyText": "I could not find a function like isSystemAdmin(user). I prefer a separate function, but was not sure where to place it. Where would you place this kind of function?", "url": "https://github.com/Graylog2/graylog2-server/pull/8527#discussion_r452673954", "createdAt": "2020-07-10T07:34:36Z", "author": {"login": "linuspahl"}, "path": "graylog2-web-interface/src/views/components/contexts/SearchPageLayoutProvider.jsx", "diffHunk": "@@ -16,13 +20,28 @@ type Props = {\n   children: React.Node,\n   currentUser: ?User,\n   userPreferences: UserPreferences,\n+  viewType: ?ViewType,\n };\n \n-export const defaultLayoutConfig = (userPreferences?: UserPreferences) => ({\n-  sidebar: {\n-    isPinned: userPreferences?.searchSidebarIsPinned ?? false,\n-  },\n-});\n+export const defaultLayoutConfig = (currentUser: ?User, userPreferences?: UserPreferences) => {\n+  let dashboardSidebarIsPinned = false;\n+  let searchSidebarIsPinned = false;\n+\n+  if (currentUser?.id === 'local:admin') {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1d18a99b0bcb1fce2decbc2506dbed2ce18e3916"}, "originalPosition": 34}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3ODcxNTY0", "url": "https://github.com/Graylog2/graylog2-server/pull/8527#pullrequestreview-447871564", "createdAt": "2020-07-14T07:52:30Z", "commit": {"oid": "1d18a99b0bcb1fce2decbc2506dbed2ce18e3916"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQwNzo1MjozMFrOGxIZ-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQwNzo1NTo0MlrOGxIhTA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDE3MTEzMQ==", "bodyText": "IMO it would be better to check if currentUser.read_only is true. This is a way more relevant criteria.", "url": "https://github.com/Graylog2/graylog2-server/pull/8527#discussion_r454171131", "createdAt": "2020-07-14T07:52:30Z", "author": {"login": "dennisoelkers"}, "path": "graylog2-web-interface/src/views/components/contexts/SearchPageLayoutProvider.jsx", "diffHunk": "@@ -16,13 +20,28 @@ type Props = {\n   children: React.Node,\n   currentUser: ?User,\n   userPreferences: UserPreferences,\n+  viewType: ?ViewType,\n };\n \n-export const defaultLayoutConfig = (userPreferences?: UserPreferences) => ({\n-  sidebar: {\n-    isPinned: userPreferences?.searchSidebarIsPinned ?? false,\n-  },\n-});\n+export const defaultLayoutConfig = (currentUser: ?User, userPreferences?: UserPreferences) => {\n+  let dashboardSidebarIsPinned = false;\n+  let searchSidebarIsPinned = false;\n+\n+  if (currentUser?.id === 'local:admin') {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjY3Mzk1NA=="}, "originalCommit": {"oid": "1d18a99b0bcb1fce2decbc2506dbed2ce18e3916"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDE3MTY2Ng==", "bodyText": "We could use an object/a map instead of a switch here.", "url": "https://github.com/Graylog2/graylog2-server/pull/8527#discussion_r454171666", "createdAt": "2020-07-14T07:53:22Z", "author": {"login": "dennisoelkers"}, "path": "graylog2-web-interface/src/views/components/contexts/SearchPageLayoutProvider.jsx", "diffHunk": "@@ -31,31 +50,48 @@ const createUserPreferencesArray = (userPreferences) => {\n   }));\n };\n \n-const toggleSidebarPinning = (config, setConfig, userName, userPreferences) => {\n-  const newState = !config.sidebar.isPinned;\n+const sidebarPinningPreferenceKey = (viewType: ?ViewType): string => {\n+  switch (viewType) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1d18a99b0bcb1fce2decbc2506dbed2ce18e3916"}, "originalPosition": 59}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDE3MjI1Nw==", "bodyText": "IMO we should check the search/dashboard cases and instead of defaulting to a value, throw an exception. Generally we should try to be fail safe towards the environment we are running in and fail early for programmatic errors. This way, if we add a new type, we will find out early if we forgot to add handling for it in here.", "url": "https://github.com/Graylog2/graylog2-server/pull/8527#discussion_r454172257", "createdAt": "2020-07-14T07:54:26Z", "author": {"login": "dennisoelkers"}, "path": "graylog2-web-interface/src/views/components/contexts/SearchPageLayoutProvider.jsx", "diffHunk": "@@ -31,31 +50,48 @@ const createUserPreferencesArray = (userPreferences) => {\n   }));\n };\n \n-const toggleSidebarPinning = (config, setConfig, userName, userPreferences) => {\n-  const newState = !config.sidebar.isPinned;\n+const sidebarPinningPreferenceKey = (viewType: ?ViewType): string => {\n+  switch (viewType) {\n+    case View.Type.Dashboard:\n+      return 'dashboardSidebarIsPinned';\n+    default:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1d18a99b0bcb1fce2decbc2506dbed2ce18e3916"}, "originalPosition": 62}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDE3MzAwNA==", "bodyText": "Typo: configWithHelpers", "url": "https://github.com/Graylog2/graylog2-server/pull/8527#discussion_r454173004", "createdAt": "2020-07-14T07:55:42Z", "author": {"login": "dennisoelkers"}, "path": "graylog2-web-interface/src/views/components/contexts/SearchPageLayoutProvider.jsx", "diffHunk": "@@ -31,31 +50,48 @@ const createUserPreferencesArray = (userPreferences) => {\n   }));\n };\n \n-const toggleSidebarPinning = (config, setConfig, userName, userPreferences) => {\n-  const newState = !config.sidebar.isPinned;\n+const sidebarPinningPreferenceKey = (viewType: ?ViewType): string => {\n+  switch (viewType) {\n+    case View.Type.Dashboard:\n+      return 'dashboardSidebarIsPinned';\n+    default:\n+      return 'searchSidebarIsPinned';\n+  }\n+};\n+\n+const toggleSidebarPinning = (config, setConfig, currentUser, userPreferences, viewType) => {\n+  const preferenceKey = sidebarPinningPreferenceKey(viewType);\n+  const newState = !config.sidebar[preferenceKey];\n   const newLayoutConfig = {\n     ...config,\n     sidebar: {\n       ...config.sidebar,\n-      isPinned: newState,\n+      [preferenceKey]: newState,\n     },\n   };\n-  const newUserPreferences = {\n-    ...userPreferences,\n-    searchSidebarIsPinned: newState,\n-  };\n \n   setConfig(newLayoutConfig);\n \n-  PreferencesActions.saveUserPreferences(userName, createUserPreferencesArray(newUserPreferences), undefined, false);\n+  if (currentUser?.id === 'local:admin') {\n+    Store.set(preferenceKey, newState);\n+  } else {\n+    const newUserPreferences = {\n+      ...userPreferences,\n+      [preferenceKey]: newState,\n+    };\n+    PreferencesActions.saveUserPreferences(currentUser?.username, createUserPreferencesArray(newUserPreferences), undefined, false);\n+  }\n };\n \n-const SearchPageLayoutProvider = ({ children, currentUser, userPreferences }: Props) => {\n-  const [config, setConfig] = useState(defaultLayoutConfig(userPreferences));\n-  const actions = { toggleSidebarPinning: () => toggleSidebarPinning(config, setConfig, currentUser?.username, userPreferences) };\n+const SearchPageLayoutProvider = ({ children, currentUser, userPreferences, viewType }: Props) => {\n+  const test = defaultLayoutConfig(currentUser, userPreferences);\n+  const [config, setConfig] = useState(test);\n+  const actions = { toggleSidebarPinning: () => toggleSidebarPinning(config, setConfig, currentUser, userPreferences, viewType) };\n+  const configHelpers = { sidebar: { isPinned: () => config.sidebar[sidebarPinningPreferenceKey(viewType)] } };\n+  const conigWithHelpers = merge(config, configHelpers);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1d18a99b0bcb1fce2decbc2506dbed2ce18e3916"}, "originalPosition": 105}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bf7337c255bfbcb8210224c08d61463e85e6ec93", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/bf7337c255bfbcb8210224c08d61463e85e6ec93", "committedDate": "2020-07-17T08:57:14Z", "message": "Merge branch 'master' into save-sidebar-layout-settings-v2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "82565562b66f228bf45ebb976c39a5f31ab01643", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/82565562b66f228bf45ebb976c39a5f31ab01643", "committedDate": "2020-07-17T09:20:37Z", "message": "Use read only user attribute instead of id for search page layout config logic"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e648d6a7a5c5640a6951db65c4172873a8d71b00", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/e648d6a7a5c5640a6951db65c4172873a8d71b00", "committedDate": "2020-07-17T09:21:08Z", "message": "Fix variable naming"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0d75e533141c40ed885513a4fbec424396f7c145", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/0d75e533141c40ed885513a4fbec424396f7c145", "committedDate": "2020-07-17T10:46:53Z", "message": "Refactor SearchPageLayoutProvider by implementing SearchPageLayoutState component"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5e1abb1566086629382b114836ed1592cf06ace7", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/5e1abb1566086629382b114836ed1592cf06ace7", "committedDate": "2020-07-17T11:04:46Z", "message": "Move SearchPageLayout sidebar pinning logic form SearchPageLayoutProvider to SearchPageLayoutState"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0283f9ef28cdf90958f2b910eb450451de1f0d2b", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/0283f9ef28cdf90958f2b910eb450451de1f0d2b", "committedDate": "2020-07-17T11:13:41Z", "message": "Update flow types"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "98b7b374f35f81f64b5faa4a736bd6eef0867f7e", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/98b7b374f35f81f64b5faa4a736bd6eef0867f7e", "committedDate": "2020-07-17T11:33:31Z", "message": "Adjust SearchPageLayout default value handling"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1ODg0MDI3", "url": "https://github.com/Graylog2/graylog2-server/pull/8527#pullrequestreview-455884027", "createdAt": "2020-07-27T15:19:17Z", "commit": {"oid": "98b7b374f35f81f64b5faa4a736bd6eef0867f7e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2995, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}