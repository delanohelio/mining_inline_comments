{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU4OTkzMzky", "number": 7079, "title": "Set focus on title field on Cache and DataAdapters forms", "bodyText": "Description\n\nWhen creating or editing a dataAdapter or cache the first input from pluggable form elements get the focus. This fix use a ref on the title field to set the focus on that input.\nMotivation and Context\n\n\n#6817\nHow Has This Been Tested?\n\n\n\nScreenshots (if appropriate):\nTypes of changes\n\n\n Bug fix (non-breaking change which fixes an issue)\n New feature (non-breaking change which adds functionality)\n Refactoring (non-breaking change)\n Breaking change (fix or feature that would cause existing functionality to change)\n\nChecklist:\n\n\n\n My code follows the code style of this project.\n My change requires a change to the documentation.\n I have updated the documentation accordingly.\n I have read the CONTRIBUTING document.\n I have added tests to cover my changes.", "createdAt": "2020-01-03T13:45:27Z", "url": "https://github.com/Graylog2/graylog2-server/pull/7079", "merged": true, "mergeCommit": {"oid": "a30f60bb3aed9f6f750b9bb35bb0e2b720476793"}, "closed": true, "closedAt": "2020-01-21T16:27:17Z", "author": {"login": "ousmaneo"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb2uXO9gH2gAyMzU4OTkzMzkyOmM4MWM3OTNhNDRlZmI5ZDA5ZGE4OWEzMDJiZGU4ZGJkY2MxYTdhYjQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb8jt3zAFqTM0NjAxMzg1NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c81c793a44efb9d09da89a302bde8dbdcc1a7ab4", "author": {"user": {"login": "ousmaneo", "name": "Ousmane SAMBA"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/c81c793a44efb9d09da89a302bde8dbdcc1a7ab4", "committedDate": "2020-01-03T13:27:51Z", "message": "Set Focus on title on dataAdapters form\n\n* create callback ref on title input element\n* use ref to set focus on componentDidUpdate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dded554eb060fe41f66e8bb6436ea7d1f9c76132", "author": {"user": {"login": "ousmaneo", "name": "Ousmane SAMBA"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/dded554eb060fe41f66e8bb6436ea7d1f9c76132", "committedDate": "2020-01-03T13:33:37Z", "message": "Set Focus on title on cache form"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ0NjUwNDA0", "url": "https://github.com/Graylog2/graylog2-server/pull/7079#pullrequestreview-344650404", "createdAt": "2020-01-17T15:22:44Z", "commit": {"oid": "dded554eb060fe41f66e8bb6436ea7d1f9c76132"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QxNToyMjo0NFrOFe8Wsg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QxNToyMjo0NFrOFe8Wsg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzk5MDQ1MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              updateState = (dataAdapter) => {\n          \n          \n            \n              updateState = (cache) => {", "url": "https://github.com/Graylog2/graylog2-server/pull/7079#discussion_r367990450", "createdAt": "2020-01-17T15:22:44Z", "author": {"login": "edmundoa"}, "path": "graylog2-web-interface/src/components/lookup-tables/CacheForm.jsx", "diffHunk": "@@ -54,20 +57,25 @@ class CacheForm extends React.Component {\n     }\n   }\n \n-  componentWillReceiveProps(nextProps) {\n+  componentDidUpdate(prevProps) {\n+    this._input.getInputDOMNode().focus();\n     const { cache } = this.props;\n \n-    if (_.isEqual(cache, nextProps.cache)) {\n+    if (_.isEqual(cache, prevProps.cache)) {\n       // props haven't change, don't update our state from them\n       return;\n     }\n-    this.setState(this._initialState(nextProps.cache));\n+    this.updateState(cache);\n   }\n \n   componentWillUnmount() {\n     this._clearTimer();\n   }\n \n+  updateState = (dataAdapter) => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dded554eb060fe41f66e8bb6436ea7d1f9c76132"}, "originalPosition": 39}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6787f170b263bd45773a34f2ae94640aac8fda71", "author": {"user": {"login": "ousmaneo", "name": "Ousmane SAMBA"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/6787f170b263bd45773a34f2ae94640aac8fda71", "committedDate": "2020-01-21T13:03:51Z", "message": "Update graylog2-web-interface/src/components/lookup-tables/CacheForm.jsx\n\nCo-Authored-By: Edmundo Alvarez <edmundo@graylog.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "55b916372ffda654b7088756aeae15037759ed4e", "author": {"user": {"login": "ousmaneo", "name": "Ousmane SAMBA"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/55b916372ffda654b7088756aeae15037759ed4e", "committedDate": "2020-01-21T13:07:00Z", "message": "fix typo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a8066f25bb3abc1a28c8d957cdad55879b76813", "author": {"user": {"login": "ousmaneo", "name": "Ousmane SAMBA"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/2a8066f25bb3abc1a28c8d957cdad55879b76813", "committedDate": "2020-01-21T15:44:50Z", "message": "Merge branch 'master' into issue-6817"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2MDEzODU0", "url": "https://github.com/Graylog2/graylog2-server/pull/7079#pullrequestreview-346013854", "createdAt": "2020-01-21T16:27:10Z", "commit": {"oid": "55b916372ffda654b7088756aeae15037759ed4e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2769, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}