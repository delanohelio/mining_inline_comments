{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEwMTU5NDYy", "number": 7992, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxMTo1MzoyNlrOD3l6Qg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxMTo1NjoyMFrOD3l93A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5NjE5Mzk0OnYy", "diffSide": "RIGHT", "path": "graylog2-web-interface/src/components/enterprise/EnterpriseFreeLicenseForm.jsx", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxMTo1MzoyN1rOGN7XUg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxMzowOToyOVrOGN-Aew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzI1NzI5OA==", "bodyText": "This leads to a truncated form:\n\nCan we make it a bit wider?", "url": "https://github.com/Graylog2/graylog2-server/pull/7992#discussion_r417257298", "createdAt": "2020-04-29T11:53:27Z", "author": {"login": "kroepke"}, "path": "graylog2-web-interface/src/components/enterprise/EnterpriseFreeLicenseForm.jsx", "diffHunk": "@@ -0,0 +1,127 @@\n+import React from 'react';\n+import PropTypes from 'prop-types';\n+\n+import { Button, ButtonToolbar, Col, Row } from 'components/graylog';\n+import { Input } from 'components/bootstrap';\n+import lodash from 'lodash';\n+\n+const FORM_FIELDS = ['firstName', 'lastName', 'email', 'company'];\n+\n+export default class EnterpriseFreeLicenseForm extends React.Component {\n+  static propTypes = {\n+    onSubmit: PropTypes.func.isRequired,\n+  };\n+\n+  constructor(props) {\n+    super(props);\n+    this.state = {\n+      formFields: {\n+        firstName: '',\n+        lastName: '',\n+        email: '',\n+        company: '',\n+      },\n+      isSubmitting: false,\n+    };\n+  }\n+\n+  clearValues = (callback) => {\n+    const clearedFields = FORM_FIELDS.reduce((acc, key) => Object.assign(acc, { [key]: '' }), {});\n+    this.setState({ formFields: clearedFields }, callback);\n+  };\n+\n+  handleInput = (key) => {\n+    return (event) => {\n+      const { formFields } = this.state;\n+      const newFormFields = Object.assign(formFields, { [key]: event.target.value });\n+      this.setState({ formFields: newFormFields });\n+    };\n+  };\n+\n+  formIsInvalid = () => {\n+    const { isSubmitting, formFields } = this.state;\n+\n+    return isSubmitting || !lodash.isEmpty(FORM_FIELDS.filter((key) => lodash.isEmpty(lodash.trim(formFields[key]))));\n+  };\n+\n+  submitForm = (event) => {\n+    event.preventDefault();\n+\n+    const { onSubmit } = this.props;\n+    const { formFields } = this.state;\n+\n+    // First set \"submitting\" status to make sure we disable the submit button (avoid double-click)\n+    this.setState({ isSubmitting: true }, () => {\n+      onSubmit(formFields, (success) => {\n+        if (success) {\n+          // Clear form before unsetting \"submitting\" status, again, to avoid double-click\n+          this.clearValues(() => {\n+            this.setState({ isSubmitting: false });\n+          });\n+        } else {\n+          this.setState({ isSubmitting: false });\n+        }\n+      });\n+    });\n+  };\n+\n+  resetForm = () => {\n+    this.clearValues();\n+  };\n+\n+  render() {\n+    const { formFields: { firstName, lastName, company, email } } = this.state;\n+\n+    return (\n+      <form onSubmit={this.submitForm}>\n+        <Row>\n+          <Col md={5}>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f510db8071f73e1e0dec50342d9c3dd143c3b242"}, "originalPosition": 78}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzMwMDYwMw==", "bodyText": "Good catch. Yes! \ud83d\udc4d", "url": "https://github.com/Graylog2/graylog2-server/pull/7992#discussion_r417300603", "createdAt": "2020-04-29T13:09:29Z", "author": {"login": "bernd"}, "path": "graylog2-web-interface/src/components/enterprise/EnterpriseFreeLicenseForm.jsx", "diffHunk": "@@ -0,0 +1,127 @@\n+import React from 'react';\n+import PropTypes from 'prop-types';\n+\n+import { Button, ButtonToolbar, Col, Row } from 'components/graylog';\n+import { Input } from 'components/bootstrap';\n+import lodash from 'lodash';\n+\n+const FORM_FIELDS = ['firstName', 'lastName', 'email', 'company'];\n+\n+export default class EnterpriseFreeLicenseForm extends React.Component {\n+  static propTypes = {\n+    onSubmit: PropTypes.func.isRequired,\n+  };\n+\n+  constructor(props) {\n+    super(props);\n+    this.state = {\n+      formFields: {\n+        firstName: '',\n+        lastName: '',\n+        email: '',\n+        company: '',\n+      },\n+      isSubmitting: false,\n+    };\n+  }\n+\n+  clearValues = (callback) => {\n+    const clearedFields = FORM_FIELDS.reduce((acc, key) => Object.assign(acc, { [key]: '' }), {});\n+    this.setState({ formFields: clearedFields }, callback);\n+  };\n+\n+  handleInput = (key) => {\n+    return (event) => {\n+      const { formFields } = this.state;\n+      const newFormFields = Object.assign(formFields, { [key]: event.target.value });\n+      this.setState({ formFields: newFormFields });\n+    };\n+  };\n+\n+  formIsInvalid = () => {\n+    const { isSubmitting, formFields } = this.state;\n+\n+    return isSubmitting || !lodash.isEmpty(FORM_FIELDS.filter((key) => lodash.isEmpty(lodash.trim(formFields[key]))));\n+  };\n+\n+  submitForm = (event) => {\n+    event.preventDefault();\n+\n+    const { onSubmit } = this.props;\n+    const { formFields } = this.state;\n+\n+    // First set \"submitting\" status to make sure we disable the submit button (avoid double-click)\n+    this.setState({ isSubmitting: true }, () => {\n+      onSubmit(formFields, (success) => {\n+        if (success) {\n+          // Clear form before unsetting \"submitting\" status, again, to avoid double-click\n+          this.clearValues(() => {\n+            this.setState({ isSubmitting: false });\n+          });\n+        } else {\n+          this.setState({ isSubmitting: false });\n+        }\n+      });\n+    });\n+  };\n+\n+  resetForm = () => {\n+    this.clearValues();\n+  };\n+\n+  render() {\n+    const { formFields: { firstName, lastName, company, email } } = this.state;\n+\n+    return (\n+      <form onSubmit={this.submitForm}>\n+        <Row>\n+          <Col md={5}>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzI1NzI5OA=="}, "originalCommit": {"oid": "f510db8071f73e1e0dec50342d9c3dd143c3b242"}, "originalPosition": 78}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5NjE5OTkxOnYy", "diffSide": "RIGHT", "path": "graylog2-web-interface/src/pages/EnterprisePage.jsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxMTo1NToyMlrOGN7a-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxMTo1NToyMlrOGN7a-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzI1ODIzMg==", "bodyText": "I would add a break after the first sentence to make it stand out a little more.", "url": "https://github.com/Graylog2/graylog2-server/pull/7992#discussion_r417258232", "createdAt": "2020-04-29T11:55:22Z", "author": {"login": "kroepke"}, "path": "graylog2-web-interface/src/pages/EnterprisePage.jsx", "diffHunk": "@@ -1,48 +1,153 @@\n import React from 'react';\n+import PropTypes from 'prop-types';\n import createReactClass from 'create-react-class';\n import Reflux from 'reflux';\n+import styled from 'styled-components';\n \n-import { DocumentTitle, PageHeader } from 'components/common';\n+import { DocumentTitle, IfPermitted, PageHeader, Spinner } from 'components/common';\n+import { Alert, Col, Row } from 'components/graylog';\n import { GraylogClusterOverview } from 'components/cluster';\n+import DocumentationLink from 'components/support/DocumentationLink';\n+import { Link } from 'react-router';\n+import Routes from 'routing/Routes';\n+import EnterpriseFreeLicenseForm from 'components/enterprise/EnterpriseFreeLicenseForm';\n import PluginList from 'components/enterprise/PluginList';\n \n-import StoreProvider from 'injection/StoreProvider';\n+import CombinedProvider from 'injection/CombinedProvider';\n \n-const NodesStore = StoreProvider.getStore('Nodes');\n+const { EnterpriseActions, EnterpriseStore } = CombinedProvider.get('Enterprise');\n+\n+const EnterpriseProductLink = ({ children }) => {\n+  return (\n+    <a href=\"https://www.graylog.org/products/enterprise\"\n+       rel=\"noopener noreferrer\"\n+       target=\"_blank\">\n+      {children}\n+    </a>\n+  );\n+};\n+\n+EnterpriseProductLink.propTypes = {\n+  children: PropTypes.array,\n+};\n+EnterpriseProductLink.defaultProps = {\n+  children: null,\n+};\n+\n+const EnterpriseFeatureList = styled.ul`\n+list-style-type: disc;\n+padding-left: 20px;\n+`;\n+\n+const BiggerFontSize = styled.div`\n+font-size: 1.5em;\n+`;\n \n const EnterprisePage = createReactClass({\n   displayName: 'EnterprisePage',\n-  mixins: [Reflux.connect(NodesStore)],\n+  mixins: [Reflux.connect(EnterpriseStore)],\n \n-  _isLoading() {\n-    return !this.state.nodes;\n+  componentDidMount() {\n+    EnterpriseActions.getLicenseInfo();\n   },\n \n-  render() {\n-    let orderLink = 'https://www.graylog.org/enterprise';\n+  onFreeLicenseFormSubmit(formFields, callback) {\n+    EnterpriseActions.requestFreeEnterpriseLicense(formFields)\n+      .then(() => callback(true))\n+      .catch(() => callback(false));\n+  },\n+\n+  _isLoading() {\n+    const { licenseStatus } = this.state;\n+    return !licenseStatus;\n+  },\n \n-    if (this.state.clusterId) {\n-      orderLink = `https://www.graylog.org/enterprise?cid=${this.state.clusterId}&nodes=${this.state.nodeCount}`;\n+  renderLicenseFormContent(licenseStatus) {\n+    let licenseFormContent;\n+    if (this._isLoading()) {\n+      licenseFormContent = <Spinner text=\"Loading license status\" />;\n+    } else if (licenseStatus === 'installed') {\n+      licenseFormContent = (\n+        <Alert bsStyle=\"success\">\n+          You have a Graylog Enterprise license installed.\n+        </Alert>\n+      );\n+    } else if (licenseStatus === 'staged') {\n+      licenseFormContent = (\n+        <Alert bsStyle=\"warning\">\n+          You requested a free Graylog Enterprise license. It will be activated once you restart the Graylog\n+          server with the Graylog Enterprise plugins installed.\n+        </Alert>\n+      );\n+    } else {\n+      licenseFormContent = <EnterpriseFreeLicenseForm onSubmit={this.onFreeLicenseFormSubmit} />;\n     }\n \n+    return licenseFormContent;\n+  },\n+\n+  render() {\n+    const { licenseStatus } = this.state;\n+\n     return (\n-      <DocumentTitle title=\"Graylog Enterprise\">\n+      <DocumentTitle title=\"Try Graylog Enterprise\">\n         <div>\n-          <PageHeader title=\"Graylog Enterprise\">\n+          <PageHeader title=\"Try Graylog Enterprise\">\n             {null}\n \n             <span>\n               Graylog Enterprise adds commercial functionality to the Open Source Graylog core. You can learn more\n-              about Graylog Enterprise and order a license on the <a href={orderLink} target=\"_blank\">product page</a>.\n-            </span>\n-\n-            <span>\n-              <a className=\"btn btn-lg btn-success\" href={orderLink} target=\"_blank\">Order a license</a>\n+              about Graylog Enterprise on the <EnterpriseProductLink>product page</EnterpriseProductLink>.\n             </span>\n           </PageHeader>\n \n-          <GraylogClusterOverview />\n-          <PluginList />\n+          <GraylogClusterOverview layout=\"compact\">\n+            <PluginList />\n+          </GraylogClusterOverview>\n+          <IfPermitted permissions=\"freelicenses:create\">\n+            <Row className=\"content\">\n+              <Col md={6}>\n+                <BiggerFontSize>\n+                  <p>Extend Graylog\u2019s Open Source capabilities with a free trial of Graylog Enterprise (up to 5 GB/Day).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f510db8071f73e1e0dec50342d9c3dd143c3b242"}, "originalPosition": 130}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5NjIwMzE2OnYy", "diffSide": "RIGHT", "path": "graylog2-web-interface/src/pages/EnterprisePage.jsx", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxMTo1NjoyMFrOGN7c-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxMzoxMTo0OVrOGN-GEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzI1ODc0Ng==", "bodyText": "If the enterprise plugin isn't installed the internal links will end up in 404s, which isn't pretty.\nShould we instead always link to the website?", "url": "https://github.com/Graylog2/graylog2-server/pull/7992#discussion_r417258746", "createdAt": "2020-04-29T11:56:20Z", "author": {"login": "kroepke"}, "path": "graylog2-web-interface/src/pages/EnterprisePage.jsx", "diffHunk": "@@ -1,48 +1,153 @@\n import React from 'react';\n+import PropTypes from 'prop-types';\n import createReactClass from 'create-react-class';\n import Reflux from 'reflux';\n+import styled from 'styled-components';\n \n-import { DocumentTitle, PageHeader } from 'components/common';\n+import { DocumentTitle, IfPermitted, PageHeader, Spinner } from 'components/common';\n+import { Alert, Col, Row } from 'components/graylog';\n import { GraylogClusterOverview } from 'components/cluster';\n+import DocumentationLink from 'components/support/DocumentationLink';\n+import { Link } from 'react-router';\n+import Routes from 'routing/Routes';\n+import EnterpriseFreeLicenseForm from 'components/enterprise/EnterpriseFreeLicenseForm';\n import PluginList from 'components/enterprise/PluginList';\n \n-import StoreProvider from 'injection/StoreProvider';\n+import CombinedProvider from 'injection/CombinedProvider';\n \n-const NodesStore = StoreProvider.getStore('Nodes');\n+const { EnterpriseActions, EnterpriseStore } = CombinedProvider.get('Enterprise');\n+\n+const EnterpriseProductLink = ({ children }) => {\n+  return (\n+    <a href=\"https://www.graylog.org/products/enterprise\"\n+       rel=\"noopener noreferrer\"\n+       target=\"_blank\">\n+      {children}\n+    </a>\n+  );\n+};\n+\n+EnterpriseProductLink.propTypes = {\n+  children: PropTypes.array,\n+};\n+EnterpriseProductLink.defaultProps = {\n+  children: null,\n+};\n+\n+const EnterpriseFeatureList = styled.ul`\n+list-style-type: disc;\n+padding-left: 20px;\n+`;\n+\n+const BiggerFontSize = styled.div`\n+font-size: 1.5em;\n+`;\n \n const EnterprisePage = createReactClass({\n   displayName: 'EnterprisePage',\n-  mixins: [Reflux.connect(NodesStore)],\n+  mixins: [Reflux.connect(EnterpriseStore)],\n \n-  _isLoading() {\n-    return !this.state.nodes;\n+  componentDidMount() {\n+    EnterpriseActions.getLicenseInfo();\n   },\n \n-  render() {\n-    let orderLink = 'https://www.graylog.org/enterprise';\n+  onFreeLicenseFormSubmit(formFields, callback) {\n+    EnterpriseActions.requestFreeEnterpriseLicense(formFields)\n+      .then(() => callback(true))\n+      .catch(() => callback(false));\n+  },\n+\n+  _isLoading() {\n+    const { licenseStatus } = this.state;\n+    return !licenseStatus;\n+  },\n \n-    if (this.state.clusterId) {\n-      orderLink = `https://www.graylog.org/enterprise?cid=${this.state.clusterId}&nodes=${this.state.nodeCount}`;\n+  renderLicenseFormContent(licenseStatus) {\n+    let licenseFormContent;\n+    if (this._isLoading()) {\n+      licenseFormContent = <Spinner text=\"Loading license status\" />;\n+    } else if (licenseStatus === 'installed') {\n+      licenseFormContent = (\n+        <Alert bsStyle=\"success\">\n+          You have a Graylog Enterprise license installed.\n+        </Alert>\n+      );\n+    } else if (licenseStatus === 'staged') {\n+      licenseFormContent = (\n+        <Alert bsStyle=\"warning\">\n+          You requested a free Graylog Enterprise license. It will be activated once you restart the Graylog\n+          server with the Graylog Enterprise plugins installed.\n+        </Alert>\n+      );\n+    } else {\n+      licenseFormContent = <EnterpriseFreeLicenseForm onSubmit={this.onFreeLicenseFormSubmit} />;\n     }\n \n+    return licenseFormContent;\n+  },\n+\n+  render() {\n+    const { licenseStatus } = this.state;\n+\n     return (\n-      <DocumentTitle title=\"Graylog Enterprise\">\n+      <DocumentTitle title=\"Try Graylog Enterprise\">\n         <div>\n-          <PageHeader title=\"Graylog Enterprise\">\n+          <PageHeader title=\"Try Graylog Enterprise\">\n             {null}\n \n             <span>\n               Graylog Enterprise adds commercial functionality to the Open Source Graylog core. You can learn more\n-              about Graylog Enterprise and order a license on the <a href={orderLink} target=\"_blank\">product page</a>.\n-            </span>\n-\n-            <span>\n-              <a className=\"btn btn-lg btn-success\" href={orderLink} target=\"_blank\">Order a license</a>\n+              about Graylog Enterprise on the <EnterpriseProductLink>product page</EnterpriseProductLink>.\n             </span>\n           </PageHeader>\n \n-          <GraylogClusterOverview />\n-          <PluginList />\n+          <GraylogClusterOverview layout=\"compact\">\n+            <PluginList />\n+          </GraylogClusterOverview>\n+          <IfPermitted permissions=\"freelicenses:create\">\n+            <Row className=\"content\">\n+              <Col md={6}>\n+                <BiggerFontSize>\n+                  <p>Extend Graylog\u2019s Open Source capabilities with a free trial of Graylog Enterprise (up to 5 GB/Day).\n+                    Graylog Enterprise introduces productivity and compliance features designed to help organizations\n+                    reduce risk while encouraging collaboration across a large number of users.</p>\n+\n+                  <p>Graylog Enterprise includes:</p>\n+\n+                  <EnterpriseFeatureList>\n+                    <li>Automated <Link to={Routes.pluginRoute('SYSTEM_ARCHIVES')}><strong>archiving</strong></Link> and", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f510db8071f73e1e0dec50342d9c3dd143c3b242"}, "originalPosition": 137}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzMwMjAzMw==", "bodyText": "Good catch! \ud83d\udc4d", "url": "https://github.com/Graylog2/graylog2-server/pull/7992#discussion_r417302033", "createdAt": "2020-04-29T13:11:49Z", "author": {"login": "bernd"}, "path": "graylog2-web-interface/src/pages/EnterprisePage.jsx", "diffHunk": "@@ -1,48 +1,153 @@\n import React from 'react';\n+import PropTypes from 'prop-types';\n import createReactClass from 'create-react-class';\n import Reflux from 'reflux';\n+import styled from 'styled-components';\n \n-import { DocumentTitle, PageHeader } from 'components/common';\n+import { DocumentTitle, IfPermitted, PageHeader, Spinner } from 'components/common';\n+import { Alert, Col, Row } from 'components/graylog';\n import { GraylogClusterOverview } from 'components/cluster';\n+import DocumentationLink from 'components/support/DocumentationLink';\n+import { Link } from 'react-router';\n+import Routes from 'routing/Routes';\n+import EnterpriseFreeLicenseForm from 'components/enterprise/EnterpriseFreeLicenseForm';\n import PluginList from 'components/enterprise/PluginList';\n \n-import StoreProvider from 'injection/StoreProvider';\n+import CombinedProvider from 'injection/CombinedProvider';\n \n-const NodesStore = StoreProvider.getStore('Nodes');\n+const { EnterpriseActions, EnterpriseStore } = CombinedProvider.get('Enterprise');\n+\n+const EnterpriseProductLink = ({ children }) => {\n+  return (\n+    <a href=\"https://www.graylog.org/products/enterprise\"\n+       rel=\"noopener noreferrer\"\n+       target=\"_blank\">\n+      {children}\n+    </a>\n+  );\n+};\n+\n+EnterpriseProductLink.propTypes = {\n+  children: PropTypes.array,\n+};\n+EnterpriseProductLink.defaultProps = {\n+  children: null,\n+};\n+\n+const EnterpriseFeatureList = styled.ul`\n+list-style-type: disc;\n+padding-left: 20px;\n+`;\n+\n+const BiggerFontSize = styled.div`\n+font-size: 1.5em;\n+`;\n \n const EnterprisePage = createReactClass({\n   displayName: 'EnterprisePage',\n-  mixins: [Reflux.connect(NodesStore)],\n+  mixins: [Reflux.connect(EnterpriseStore)],\n \n-  _isLoading() {\n-    return !this.state.nodes;\n+  componentDidMount() {\n+    EnterpriseActions.getLicenseInfo();\n   },\n \n-  render() {\n-    let orderLink = 'https://www.graylog.org/enterprise';\n+  onFreeLicenseFormSubmit(formFields, callback) {\n+    EnterpriseActions.requestFreeEnterpriseLicense(formFields)\n+      .then(() => callback(true))\n+      .catch(() => callback(false));\n+  },\n+\n+  _isLoading() {\n+    const { licenseStatus } = this.state;\n+    return !licenseStatus;\n+  },\n \n-    if (this.state.clusterId) {\n-      orderLink = `https://www.graylog.org/enterprise?cid=${this.state.clusterId}&nodes=${this.state.nodeCount}`;\n+  renderLicenseFormContent(licenseStatus) {\n+    let licenseFormContent;\n+    if (this._isLoading()) {\n+      licenseFormContent = <Spinner text=\"Loading license status\" />;\n+    } else if (licenseStatus === 'installed') {\n+      licenseFormContent = (\n+        <Alert bsStyle=\"success\">\n+          You have a Graylog Enterprise license installed.\n+        </Alert>\n+      );\n+    } else if (licenseStatus === 'staged') {\n+      licenseFormContent = (\n+        <Alert bsStyle=\"warning\">\n+          You requested a free Graylog Enterprise license. It will be activated once you restart the Graylog\n+          server with the Graylog Enterprise plugins installed.\n+        </Alert>\n+      );\n+    } else {\n+      licenseFormContent = <EnterpriseFreeLicenseForm onSubmit={this.onFreeLicenseFormSubmit} />;\n     }\n \n+    return licenseFormContent;\n+  },\n+\n+  render() {\n+    const { licenseStatus } = this.state;\n+\n     return (\n-      <DocumentTitle title=\"Graylog Enterprise\">\n+      <DocumentTitle title=\"Try Graylog Enterprise\">\n         <div>\n-          <PageHeader title=\"Graylog Enterprise\">\n+          <PageHeader title=\"Try Graylog Enterprise\">\n             {null}\n \n             <span>\n               Graylog Enterprise adds commercial functionality to the Open Source Graylog core. You can learn more\n-              about Graylog Enterprise and order a license on the <a href={orderLink} target=\"_blank\">product page</a>.\n-            </span>\n-\n-            <span>\n-              <a className=\"btn btn-lg btn-success\" href={orderLink} target=\"_blank\">Order a license</a>\n+              about Graylog Enterprise on the <EnterpriseProductLink>product page</EnterpriseProductLink>.\n             </span>\n           </PageHeader>\n \n-          <GraylogClusterOverview />\n-          <PluginList />\n+          <GraylogClusterOverview layout=\"compact\">\n+            <PluginList />\n+          </GraylogClusterOverview>\n+          <IfPermitted permissions=\"freelicenses:create\">\n+            <Row className=\"content\">\n+              <Col md={6}>\n+                <BiggerFontSize>\n+                  <p>Extend Graylog\u2019s Open Source capabilities with a free trial of Graylog Enterprise (up to 5 GB/Day).\n+                    Graylog Enterprise introduces productivity and compliance features designed to help organizations\n+                    reduce risk while encouraging collaboration across a large number of users.</p>\n+\n+                  <p>Graylog Enterprise includes:</p>\n+\n+                  <EnterpriseFeatureList>\n+                    <li>Automated <Link to={Routes.pluginRoute('SYSTEM_ARCHIVES')}><strong>archiving</strong></Link> and", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzI1ODc0Ng=="}, "originalCommit": {"oid": "f510db8071f73e1e0dec50342d9c3dd143c3b242"}, "originalPosition": 137}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3754, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}