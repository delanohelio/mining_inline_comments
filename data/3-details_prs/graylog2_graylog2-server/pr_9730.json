{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM1MDYzNzcy", "number": 9730, "title": "Server changes for custom user management", "bodyText": "Description\n\nServer changes required for Graylog2/graylog-plugin-cloud#626\n/jenkins-pr-deps Graylog2/graylog-plugin-cloud#626", "createdAt": "2020-12-09T10:10:20Z", "url": "https://github.com/Graylog2/graylog2-server/pull/9730", "merged": true, "mergeCommit": {"oid": "550bf19cb6dc9628ff1ad4d1cf726ee90d422d8e"}, "closed": true, "closedAt": "2021-02-02T08:12:29Z", "author": {"login": "danotorrey"}, "timelineItems": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdij532gH2gAyNTM1MDYzNzcyOjhhMGU4ODc4OGNlYTk0YmNmZWI5MTMxZjllNzMwMGVkYTgzZWExYzI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABd13Kc8gFqTU4MDM1MzI2MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8a0e88788cea94bcfeb9131f9e7300eda83ea1c2", "author": {"user": {"login": "danotorrey", "name": "Dan Torrey"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/8a0e88788cea94bcfeb9131f9e7300eda83ea1c2", "committedDate": "2020-12-03T14:20:33Z", "message": "Add optional UserService binding"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a98a8c0e72cecb12d95162d65e548229ad9a3680", "author": {"user": {"login": "danotorrey", "name": "Dan Torrey"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/a98a8c0e72cecb12d95162d65e548229ad9a3680", "committedDate": "2020-12-09T10:01:17Z", "message": "Add UserManagementService interface"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "007936d1b347a8e517751498d9cf4ed2e9759609", "author": {"user": {"login": "danotorrey", "name": "Dan Torrey"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/007936d1b347a8e517751498d9cf4ed2e9759609", "committedDate": "2020-12-09T10:02:26Z", "message": "Adjustments to ProvisionerService to support custom auth provider CRUD operations"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "34e4485f18c9d7e75d67b707d15e501ef5924634", "author": {"user": {"login": "danotorrey", "name": "Dan Torrey"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/34e4485f18c9d7e75d67b707d15e501ef5924634", "committedDate": "2020-12-09T14:48:32Z", "message": "Input validation improvements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9718abe8e36ad6a79632449632ba2b1f726e0ad9", "author": {"user": {"login": "danotorrey", "name": "Dan Torrey"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/9718abe8e36ad6a79632449632ba2b1f726e0ad9", "committedDate": "2020-12-11T09:13:01Z", "message": "Merge branch 'cloud-4.0' of github.com:Graylog2/graylog2-server into cloud-4.0"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c506bb4dda20fbdbfe8f8ac7e993898b960058f5", "author": {"user": {"login": "danotorrey", "name": "Dan Torrey"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/c506bb4dda20fbdbfe8f8ac7e993898b960058f5", "committedDate": "2020-12-11T09:13:19Z", "message": "Merge branch 'cloud-4.0' into cloud/issue-555"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "94b894ea3992a862d314726511a6f4cfc6b09798", "author": {"user": {"login": "danotorrey", "name": "Dan Torrey"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/94b894ea3992a862d314726511a6f4cfc6b09798", "committedDate": "2020-12-14T14:51:57Z", "message": "Implement enable/disable user flow"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4aae0df447adcaf890c5094ebb7facd9edd55439", "author": {"user": {"login": "kmerz", "name": "Konrad Merz"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/4aae0df447adcaf890c5094ebb7facd9edd55439", "committedDate": "2020-12-16T13:33:28Z", "message": "Fix order of tabs in dashboard after install (#9812)\n\n## Motivation\r\nPrior to this change, a dashboard installed by a content pack had a\r\ntabs in a random order. Since we cannot change the order of the tabs\r\nthis is quite inconvinient for the user.\r\n\r\n## Description\r\nThis change will do mutiple steps to fix that:\r\n- Use a LinkedHashMap to ensure the order stays fix during content pack\r\n  creation.\r\n- Instead of using the serach QueryIds we use the views QueryIds which\r\n  we previously fixed in the order.\r\n- When loading a view and selecting the activeQuery we also use the\r\n  view.state queryids instead of the search ones.\r\n\r\nFixes #8264"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c17deab5a3291ffd4d3fdf68479e290f0e6bdfed", "author": {"user": {"login": "danotorrey", "name": "Dan Torrey"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/c17deab5a3291ffd4d3fdf68479e290f0e6bdfed", "committedDate": "2020-12-16T13:51:55Z", "message": "Implement Change Password user flow"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8522cc3fd5b95a27b93179841916e81a2180914b", "author": {"user": {"login": "kmerz", "name": "Konrad Merz"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/8522cc3fd5b95a27b93179841916e81a2180914b", "committedDate": "2020-12-17T12:18:57Z", "message": "Show timezone setting to the user (#9814)\n\n* Display the timezone settings to the user\r\n\r\n## Motivation\r\nPrior to this change, the user was not able to change his own timezone\r\nsettings since they were hidden to him.\r\n\r\n## Description\r\nThis change will show the settings to the user so he can edit them.\r\n\r\n* Fix settings section test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c0ef912674952d88e0918e0bea818b066fcdd6d7", "author": {"user": {"login": "danotorrey", "name": "Dan Torrey"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/c0ef912674952d88e0918e0bea818b066fcdd6d7", "committedDate": "2020-12-17T13:30:43Z", "message": "Add common Okta version to parent POM"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d61719b37a3e48abd58e52220694656b43e19e3", "author": {"user": {"login": "danotorrey", "name": "Dan Torrey"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/8d61719b37a3e48abd58e52220694656b43e19e3", "committedDate": "2020-12-17T13:46:53Z", "message": "Add common Okta version to parent POM"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "64a8a38830f94d5457e3fa870c2d3b088843230e", "author": {"user": {"login": "danotorrey", "name": "Dan Torrey"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/64a8a38830f94d5457e3fa870c2d3b088843230e", "committedDate": "2020-12-17T13:47:03Z", "message": "Merge branch 'cloud-4.0' into cloud/issue-555"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b890dd14aee7c1b75b3e0e13171f7affacc6fca9", "author": {"user": {"login": "danotorrey", "name": "Dan Torrey"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/b890dd14aee7c1b75b3e0e13171f7affacc6fca9", "committedDate": "2020-12-18T14:54:34Z", "message": "Cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d8295d3ca417309befd8bc7f64a5ad0189f7ef2", "author": {"user": {"login": "danotorrey", "name": "Dan Torrey"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/4d8295d3ca417309befd8bc7f64a5ad0189f7ef2", "committedDate": "2021-01-04T15:40:01Z", "message": "Merge branch '4.0' into cloud/issue-555"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYyNzI3MjAw", "url": "https://github.com/Graylog2/graylog2-server/pull/9730#pullrequestreview-562727200", "createdAt": "2021-01-06T13:59:30Z", "commit": {"oid": "4d8295d3ca417309befd8bc7f64a5ad0189f7ef2"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYyNzUzOTU5", "url": "https://github.com/Graylog2/graylog2-server/pull/9730#pullrequestreview-562753959", "createdAt": "2021-01-06T14:34:08Z", "commit": {"oid": "4d8295d3ca417309befd8bc7f64a5ad0189f7ef2"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNlQxNDozNDowOFrOIPEIew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNlQxNzowODozM1rOIPNSfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjY2NzI1OQ==", "bodyText": "I've been wondering about naming this..\nWe currently have different flags for user accounts:\n\nisReadOnly for internal system users that shouldn't be deleted or modified\nisExternal  for users that shouldn't be managed from within graylog  (except for our cloud okta use case)\n\nWould it make sense to add a third flag (e.g. isManaged) or should we simply mark okta users as not external?\nIt's probably not a big deal, just a thought..", "url": "https://github.com/Graylog2/graylog2-server/pull/9730#discussion_r552667259", "createdAt": "2021-01-06T14:34:08Z", "author": {"login": "mpfz0r"}, "path": "graylog2-server/src/main/java/org/graylog/security/authservice/UserDetails.java", "diffHunk": "@@ -43,6 +43,8 @@\n \n     public abstract String fullName();\n \n+    public abstract boolean isExternal();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4d8295d3ca417309befd8bc7f64a5ad0189f7ef2"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjgwOTI3Mg==", "bodyText": "OTOH, from the cloud perspective, Okta is still kind of \"internal\", so maybe we should just leave it like it is :)", "url": "https://github.com/Graylog2/graylog2-server/pull/9730#discussion_r552809272", "createdAt": "2021-01-06T16:59:50Z", "author": {"login": "mpfz0r"}, "path": "graylog2-server/src/main/java/org/graylog/security/authservice/UserDetails.java", "diffHunk": "@@ -43,6 +43,8 @@\n \n     public abstract String fullName();\n \n+    public abstract boolean isExternal();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjY2NzI1OQ=="}, "originalCommit": {"oid": "4d8295d3ca417309befd8bc7f64a5ad0189f7ef2"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjgxNzI3Nw==", "bodyText": "while this can't create any problems, I was wondering if there isn't a better place for this?", "url": "https://github.com/Graylog2/graylog2-server/pull/9730#discussion_r552817277", "createdAt": "2021-01-06T17:08:33Z", "author": {"login": "mpfz0r"}, "path": "pom.xml", "diffHunk": "@@ -137,6 +137,7 @@\n         <netty.version>4.1.52.Final</netty.version>\n         <netty-tcnative-boringssl-static.version>2.0.34.Final</netty-tcnative-boringssl-static.version>\n         <okhttp.version>3.14.6</okhttp.version>\n+        <okta-sdk.version>3.0.1</okta-sdk.version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4d8295d3ca417309befd8bc7f64a5ad0189f7ef2"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3eee5aada4e767a8b55f6d66d1b5702eee954455", "author": {"user": {"login": "ousmaneo", "name": "Ousmane SAMBA"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/3eee5aada4e767a8b55f6d66d1b5702eee954455", "committedDate": "2021-01-12T13:54:11Z", "message": "Cloud user management integration (#9868)\n\n* Integrate cloud username and password\r\n\r\n - Use cloud username (combine usename and email for okta)\r\n - use validateCloudPasswords for cloud password\r\n\r\n* rename UsernameFormGroup\r\n\r\n* Parse and display okta error message\r\n\r\n* Update edit form for cloud\r\n\r\n* Remove unused import\r\n\r\n* Fix review comments\r\n\r\n* Fix review comments\r\n\r\n- Separate username and password\r\n- move cloudPlugin up\r\n\r\n* Fix review comments\r\n\r\n - separate username and email group\r\n\r\n* Add password edit validations"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "88ab01b8cf85c43ae799e735a92748486521a176", "author": {"user": {"login": "danotorrey", "name": "Dan Torrey"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/88ab01b8cf85c43ae799e735a92748486521a176", "committedDate": "2021-01-26T14:08:10Z", "message": "Remove unneeded Okta SDK version\n\nThe Cloud Okta User Management feature is no longer using the Okta SDK, so we do not need the Okta SDK version specified here."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b5334ca9ec875782c81b2525457483f212bcdc1", "author": {"user": {"login": "danotorrey", "name": "Dan Torrey"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/5b5334ca9ec875782c81b2525457483f212bcdc1", "committedDate": "2021-02-01T09:31:37Z", "message": "Merge branch 'cloud-4.0' into cloud/issue-555"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTgwMzUzMjYw", "url": "https://github.com/Graylog2/graylog2-server/pull/9730#pullrequestreview-580353260", "createdAt": "2021-02-01T13:31:25Z", "commit": {"oid": "5b5334ca9ec875782c81b2525457483f212bcdc1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3309, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}