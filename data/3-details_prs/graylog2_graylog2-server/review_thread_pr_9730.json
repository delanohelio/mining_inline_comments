{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM1MDYzNzcy", "number": 9730, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNlQxNDozNDowOFrOFLuvvw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNlQxNzowODozM1rOFL0OFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ3ODQ0NTQzOnYy", "diffSide": "RIGHT", "path": "graylog2-server/src/main/java/org/graylog/security/authservice/UserDetails.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNlQxNDozNDowOFrOIPEIew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xMVQxMDoyMDo0NlrOIRPIEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjY2NzI1OQ==", "bodyText": "I've been wondering about naming this..\nWe currently have different flags for user accounts:\n\nisReadOnly for internal system users that shouldn't be deleted or modified\nisExternal  for users that shouldn't be managed from within graylog  (except for our cloud okta use case)\n\nWould it make sense to add a third flag (e.g. isManaged) or should we simply mark okta users as not external?\nIt's probably not a big deal, just a thought..", "url": "https://github.com/Graylog2/graylog2-server/pull/9730#discussion_r552667259", "createdAt": "2021-01-06T14:34:08Z", "author": {"login": "mpfz0r"}, "path": "graylog2-server/src/main/java/org/graylog/security/authservice/UserDetails.java", "diffHunk": "@@ -43,6 +43,8 @@\n \n     public abstract String fullName();\n \n+    public abstract boolean isExternal();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4d8295d3ca417309befd8bc7f64a5ad0189f7ef2"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjgwOTI3Mg==", "bodyText": "OTOH, from the cloud perspective, Okta is still kind of \"internal\", so maybe we should just leave it like it is :)", "url": "https://github.com/Graylog2/graylog2-server/pull/9730#discussion_r552809272", "createdAt": "2021-01-06T16:59:50Z", "author": {"login": "mpfz0r"}, "path": "graylog2-server/src/main/java/org/graylog/security/authservice/UserDetails.java", "diffHunk": "@@ -43,6 +43,8 @@\n \n     public abstract String fullName();\n \n+    public abstract boolean isExternal();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjY2NzI1OQ=="}, "originalCommit": {"oid": "4d8295d3ca417309befd8bc7f64a5ad0189f7ef2"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDk0NDUyOQ==", "bodyText": "Thanks for the feedback @mpfz0r. Here's some of the thinking behind adding this property here, incase that helps the discussion:\nThe current definition for external users (as I understand) is that they exist in another system of record and are not permitted to be edited in Graylog. Okta users do not fall into this category, since they can be edited in Graylog. The intention of adding the isExternal flag to UserDetails is to allow the ProvisionerService to provision users with this flag set to false (the Okta case). The UserDetails object is just a means of sending user data into the ProvisionerService.\nI did not yet have any plan to add any properties to the UserImpl persisted DB object, but happy to look at that further if you think we should identify the Okta users somehow.", "url": "https://github.com/Graylog2/graylog2-server/pull/9730#discussion_r554944529", "createdAt": "2021-01-11T10:20:46Z", "author": {"login": "danotorrey"}, "path": "graylog2-server/src/main/java/org/graylog/security/authservice/UserDetails.java", "diffHunk": "@@ -43,6 +43,8 @@\n \n     public abstract String fullName();\n \n+    public abstract boolean isExternal();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjY2NzI1OQ=="}, "originalCommit": {"oid": "4d8295d3ca417309befd8bc7f64a5ad0189f7ef2"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ3OTM0MjI4OnYy", "diffSide": "RIGHT", "path": "pom.xml", "isResolved": true, "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNlQxNzowODozM1rOIPNSfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0yNlQxNDowOTo1NlrOIaYoaA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjgxNzI3Nw==", "bodyText": "while this can't create any problems, I was wondering if there isn't a better place for this?", "url": "https://github.com/Graylog2/graylog2-server/pull/9730#discussion_r552817277", "createdAt": "2021-01-06T17:08:33Z", "author": {"login": "mpfz0r"}, "path": "pom.xml", "diffHunk": "@@ -137,6 +137,7 @@\n         <netty.version>4.1.52.Final</netty.version>\n         <netty-tcnative-boringssl-static.version>2.0.34.Final</netty-tcnative-boringssl-static.version>\n         <okhttp.version>3.14.6</okhttp.version>\n+        <okta-sdk.version>3.0.1</okta-sdk.version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4d8295d3ca417309befd8bc7f64a5ad0189f7ef2"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MzE4NDgzOA==", "bodyText": "@mpfz0r what do you have in mind as a better place? If I'm correct, the goal here is to resolve the dependency of two different plugins to the same version. As the Okta SDK is not used in Graylog core but only in plugins, it might make indeed sense to move it somewhere else. I see two options:\n\nAdd the version property definition to the plugin parent pom here instead\nOr manage the dependencies explicitly in the plugin parent pom here and remove the version specifiers from dependencies in the plugin poms.\n\nWhat do you think?", "url": "https://github.com/Graylog2/graylog2-server/pull/9730#discussion_r553184838", "createdAt": "2021-01-07T08:48:00Z", "author": {"login": "thll"}, "path": "pom.xml", "diffHunk": "@@ -137,6 +137,7 @@\n         <netty.version>4.1.52.Final</netty.version>\n         <netty-tcnative-boringssl-static.version>2.0.34.Final</netty-tcnative-boringssl-static.version>\n         <okhttp.version>3.14.6</okhttp.version>\n+        <okta-sdk.version>3.0.1</okta-sdk.version>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjgxNzI3Nw=="}, "originalCommit": {"oid": "4d8295d3ca417309befd8bc7f64a5ad0189f7ef2"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MzIyNjA5Ng==", "bodyText": "Thanks for the feedback @mpfz0r. I am also curious if you have in mind any other particular place that might work better.\nAs far as I know, we currently only define common dependency versions in graylog2-server/pom.xml. I agree that, since this dependency is just used in plugins it perhaps could be moved to the plugin-parent. But, we've not done this before with other plugins, so perhaps we need some feedback/agreement from others (eg. Bernd) if we really want start doing this.", "url": "https://github.com/Graylog2/graylog2-server/pull/9730#discussion_r553226096", "createdAt": "2021-01-07T09:59:48Z", "author": {"login": "danotorrey"}, "path": "pom.xml", "diffHunk": "@@ -137,6 +137,7 @@\n         <netty.version>4.1.52.Final</netty.version>\n         <netty-tcnative-boringssl-static.version>2.0.34.Final</netty-tcnative-boringssl-static.version>\n         <okhttp.version>3.14.6</okhttp.version>\n+        <okta-sdk.version>3.0.1</okta-sdk.version>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjgxNzI3Nw=="}, "originalCommit": {"oid": "4d8295d3ca417309befd8bc7f64a5ad0189f7ef2"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDk1NDA4OQ==", "bodyText": "@mpfz0r what do you have in mind as a better place?\n\nNone ;-) I'm always a bit lost when it comes to maven and our plethora of pom files.\nBut it kind of felt wrong putting this into the server...\nIMHO the plugin parent pom sounds better. But I'll leave that up to you or @bernd", "url": "https://github.com/Graylog2/graylog2-server/pull/9730#discussion_r554954089", "createdAt": "2021-01-11T10:37:07Z", "author": {"login": "mpfz0r"}, "path": "pom.xml", "diffHunk": "@@ -137,6 +137,7 @@\n         <netty.version>4.1.52.Final</netty.version>\n         <netty-tcnative-boringssl-static.version>2.0.34.Final</netty-tcnative-boringssl-static.version>\n         <okhttp.version>3.14.6</okhttp.version>\n+        <okta-sdk.version>3.0.1</okta-sdk.version>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjgxNzI3Nw=="}, "originalCommit": {"oid": "4d8295d3ca417309befd8bc7f64a5ad0189f7ef2"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NzIwNzA5NQ==", "bodyText": "@bernd Do you have an opinion on this?", "url": "https://github.com/Graylog2/graylog2-server/pull/9730#discussion_r557207095", "createdAt": "2021-01-14T08:39:46Z", "author": {"login": "danotorrey"}, "path": "pom.xml", "diffHunk": "@@ -137,6 +137,7 @@\n         <netty.version>4.1.52.Final</netty.version>\n         <netty-tcnative-boringssl-static.version>2.0.34.Final</netty-tcnative-boringssl-static.version>\n         <okhttp.version>3.14.6</okhttp.version>\n+        <okta-sdk.version>3.0.1</okta-sdk.version>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjgxNzI3Nw=="}, "originalCommit": {"oid": "4d8295d3ca417309befd8bc7f64a5ad0189f7ef2"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1ODA4MDcyMQ==", "bodyText": "I will likely revert this, since we now cannot use the Okta Java SDK with the new Owner Resource Password authentication flow that we are using now to achieve the isolation between Cloud Okta users.", "url": "https://github.com/Graylog2/graylog2-server/pull/9730#discussion_r558080721", "createdAt": "2021-01-15T09:01:44Z", "author": {"login": "danotorrey"}, "path": "pom.xml", "diffHunk": "@@ -137,6 +137,7 @@\n         <netty.version>4.1.52.Final</netty.version>\n         <netty-tcnative-boringssl-static.version>2.0.34.Final</netty-tcnative-boringssl-static.version>\n         <okhttp.version>3.14.6</okhttp.version>\n+        <okta-sdk.version>3.0.1</okta-sdk.version>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjgxNzI3Nw=="}, "originalCommit": {"oid": "4d8295d3ca417309befd8bc7f64a5ad0189f7ef2"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NDUzMTIxNw==", "bodyText": "The Okta User Management feature no longer uses the Okta SDK directly. However, the Enterprise Integrations Plugin uses it. I don't see an issue with leaving this here. This might be helpful if the Okta SDK is needed in another plugin in the future (since version conflicts are known to occur with it).", "url": "https://github.com/Graylog2/graylog2-server/pull/9730#discussion_r564531217", "createdAt": "2021-01-26T14:01:07Z", "author": {"login": "danotorrey"}, "path": "pom.xml", "diffHunk": "@@ -137,6 +137,7 @@\n         <netty.version>4.1.52.Final</netty.version>\n         <netty-tcnative-boringssl-static.version>2.0.34.Final</netty-tcnative-boringssl-static.version>\n         <okhttp.version>3.14.6</okhttp.version>\n+        <okta-sdk.version>3.0.1</okta-sdk.version>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjgxNzI3Nw=="}, "originalCommit": {"oid": "4d8295d3ca417309befd8bc7f64a5ad0189f7ef2"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NDUzNzQ0OA==", "bodyText": "Update: The okta-sdk.version has been removed, since we don't need it in this PR: 88ab01b", "url": "https://github.com/Graylog2/graylog2-server/pull/9730#discussion_r564537448", "createdAt": "2021-01-26T14:09:56Z", "author": {"login": "danotorrey"}, "path": "pom.xml", "diffHunk": "@@ -137,6 +137,7 @@\n         <netty.version>4.1.52.Final</netty.version>\n         <netty-tcnative-boringssl-static.version>2.0.34.Final</netty-tcnative-boringssl-static.version>\n         <okhttp.version>3.14.6</okhttp.version>\n+        <okta-sdk.version>3.0.1</okta-sdk.version>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjgxNzI3Nw=="}, "originalCommit": {"oid": "4d8295d3ca417309befd8bc7f64a5ad0189f7ef2"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4352, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}