{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcwMTAyNTA3", "number": 8825, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQxMjoxODowOFrOEZ82RQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQxMjoxODowOFrOEZ82RQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk1NjQ2Nzg5OnYy", "diffSide": "RIGHT", "path": "graylog2-web-interface/webpack.combined.config.js", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQxMjoxODowOFrOHDErWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQxMjoxODowOFrOHDErWw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mjk4NDQxMQ==", "bodyText": "This is exactly what I had planned to do! Cool", "url": "https://github.com/Graylog2/graylog2-server/pull/8825#discussion_r472984411", "createdAt": "2020-08-19T12:18:08Z", "author": {"login": "Gaya"}, "path": "graylog2-web-interface/webpack.combined.config.js", "diffHunk": "@@ -16,55 +12,46 @@ const globOptions = {\n   nodir: true,\n };\n \n-const pluginConfigs = process.env.disable_plugins === 'true' ? [] : glob.sync(pluginConfigPattern, globOptions).map(config => `${globCwd}/${config}`);\n+function isNotDependency(pluginConfig) {\n+  // Avoid including webpack configs of dependencies and built files.\n+  return !pluginConfig.includes('/target/') && !pluginConfig.includes('/node_modules/');\n+}\n+\n+const pluginConfigs = process.env.disable_plugins === 'true' ? [] : glob.sync(pluginConfigPattern, globOptions)\n+  .map((config) => `${globCwd}/${config}`)\n+  .filter(isNotDependency);\n \n process.env.web_src_path = path.resolve(__dirname);\n \n // eslint-disable-next-line import/no-dynamic-require\n const webpackConfig = require(path.resolve(__dirname, './webpack.config.js'));\n \n-function getPluginName(pluginConfig) {\n-  const packageConfig = path.join(path.dirname(pluginConfig), 'package.json');\n-  if (fs.existsSync(packageConfig)) {\n-    // If a package.json file exists (should normally be the case) use the package name for pluginName\n-    const pkg = JSON.parse(fs.readFileSync(packageConfig, 'utf8'));\n-    return pkg.name.replace(/\\s+/g, '');\n-  } else {\n-    // Otherwise just use the directory name of the webpack config file\n-    return path.basename(path.dirname(pluginConfig));\n-  }\n-}\n+const mergedPluginConfigs = pluginConfigs\n+  // eslint-disable-next-line global-require,import/no-dynamic-require\n+  .map((configFile) => require(configFile))\n+  .reduce((config, pluginConfig) => merge.smart(config, pluginConfig), {});", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0135a9ab1cd9d137d0150ae599acddf0f7eaa823"}, "originalPosition": 46}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4030, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}