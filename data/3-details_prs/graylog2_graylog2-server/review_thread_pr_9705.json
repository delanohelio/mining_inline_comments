{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMyNTIzMTAy", "number": 9705, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNDoxMjo0NlrOFBzIzA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxNDoxMjo1OFrOFCXOYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM3NDMwNzMyOnYy", "diffSide": "RIGHT", "path": "graylog2-web-interface/src/views/components/horizontalspacer/HorizontalSpacer.tsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNDoxMjo0NlrOIAopmw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNDoxMjo0NlrOIAopmw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzUzNjkyMw==", "bodyText": "Maybe we can use Props or Pick<Props, 'height'> in here?", "url": "https://github.com/Graylog2/graylog2-server/pull/9705#discussion_r537536923", "createdAt": "2020-12-07T14:12:46Z", "author": {"login": "dennisoelkers"}, "path": "graylog2-web-interface/src/views/components/horizontalspacer/HorizontalSpacer.tsx", "diffHunk": "@@ -32,7 +31,7 @@ type Props = {\n   className?: string,\n };\n \n-const Spacer: StyledComponent<Props, {}, HTMLDivElement> = styled.div`\n+const Spacer = styled.div<{ height: number }>`", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0446caebdef1ebcd869edfda0dc4a64c3cfa3339"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM3NDYxODc3OnYy", "diffSide": "RIGHT", "path": "graylog2-web-interface/src/views/components/aggregationbuilder/SeriesSelect.tsx", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNToxMTo0OVrOIAremA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwODozMToxNVrOIBNMoA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzU4MzI1Ng==", "bodyText": "This is breaking the current behavior of the series select, which allows the user to select function and field without having to reopen the select.", "url": "https://github.com/Graylog2/graylog2-server/pull/9705#discussion_r537583256", "createdAt": "2020-12-07T15:11:49Z", "author": {"login": "dennisoelkers"}, "path": "graylog2-web-interface/src/views/components/aggregationbuilder/SeriesSelect.tsx", "diffHunk": "@@ -168,10 +164,8 @@ class SeriesSelect extends React.Component<Props, State> {\n               options={options}\n               value={series.map(_wrapOption)}\n               components={_components}\n-              onClose={this._onClose}\n-              closeMenuOnSelect={false}\n+              closeMenuOnSelect", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0446caebdef1ebcd869edfda0dc4a64c3cfa3339"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODEzNTcxMg==", "bodyText": "Good catch, that change slipped in.", "url": "https://github.com/Graylog2/graylog2-server/pull/9705#discussion_r538135712", "createdAt": "2020-12-08T08:31:15Z", "author": {"login": "linuspahl"}, "path": "graylog2-web-interface/src/views/components/aggregationbuilder/SeriesSelect.tsx", "diffHunk": "@@ -168,10 +164,8 @@ class SeriesSelect extends React.Component<Props, State> {\n               options={options}\n               value={series.map(_wrapOption)}\n               components={_components}\n-              onClose={this._onClose}\n-              closeMenuOnSelect={false}\n+              closeMenuOnSelect", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzU4MzI1Ng=="}, "originalCommit": {"oid": "0446caebdef1ebcd869edfda0dc4a64c3cfa3339"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM3NDYyMjM2OnYy", "diffSide": "LEFT", "path": "graylog2-web-interface/src/views/components/aggregationbuilder/SeriesSelect.tsx", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNToxMjoyN1rOIArgrA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwODozODo1M1rOIBNfig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzU4Mzc4OA==", "bodyText": "Removing this is breaking the behavior which resets the state to selecting a function when closing the select.", "url": "https://github.com/Graylog2/graylog2-server/pull/9705#discussion_r537583788", "createdAt": "2020-12-07T15:12:27Z", "author": {"login": "dennisoelkers"}, "path": "graylog2-web-interface/src/views/components/aggregationbuilder/SeriesSelect.tsx", "diffHunk": "@@ -130,10 +130,6 @@ class SeriesSelect extends React.Component<Props, State> {\n     this.setState({ options: suggester.defaults });\n   };\n \n-  _onClose = () => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0446caebdef1ebcd869edfda0dc4a64c3cfa3339"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODE0MDU1NA==", "bodyText": "I removed this part because the react-select component does not have a prop onClose. But I understand the benefit and will reimplement this function and use the prop onMenuClose instead.", "url": "https://github.com/Graylog2/graylog2-server/pull/9705#discussion_r538140554", "createdAt": "2020-12-08T08:38:53Z", "author": {"login": "linuspahl"}, "path": "graylog2-web-interface/src/views/components/aggregationbuilder/SeriesSelect.tsx", "diffHunk": "@@ -130,10 +130,6 @@ class SeriesSelect extends React.Component<Props, State> {\n     this.setState({ options: suggester.defaults });\n   };\n \n-  _onClose = () => {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzU4Mzc4OA=="}, "originalCommit": {"oid": "0446caebdef1ebcd869edfda0dc4a64c3cfa3339"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM3NDYyMzkyOnYy", "diffSide": "RIGHT", "path": "graylog2-web-interface/src/components/permissions/GranteesSelector.tsx", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNToxMjo0N1rOIArhog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwODo0OToyNFrOIBN57Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzU4NDAzNA==", "bodyText": "Is there a different way to solve this?", "url": "https://github.com/Graylog2/graylog2-server/pull/9705#discussion_r537584034", "createdAt": "2020-12-07T15:12:47Z", "author": {"login": "dennisoelkers"}, "path": "graylog2-web-interface/src/components/permissions/GranteesSelector.tsx", "diffHunk": "@@ -129,6 +128,7 @@ const GranteesSelector = ({ availableGrantees, availableCapabilities, className,\n                                     onChange={(granteeId) => onChange({ target: { value: granteeId, name } })}\n                                     optionRenderer={_renderGranteesSelectOption}\n                                     options={granteesOptions}\n+                                    // @ts-ignore", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0446caebdef1ebcd869edfda0dc4a64c3cfa3339"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODE0NzMwOQ==", "bodyText": "With #9713 I changed this part and the @ts-ignore should no longer be necessary. I will remove it one of these pull requests.", "url": "https://github.com/Graylog2/graylog2-server/pull/9705#discussion_r538147309", "createdAt": "2020-12-08T08:49:24Z", "author": {"login": "linuspahl"}, "path": "graylog2-web-interface/src/components/permissions/GranteesSelector.tsx", "diffHunk": "@@ -129,6 +128,7 @@ const GranteesSelector = ({ availableGrantees, availableCapabilities, className,\n                                     onChange={(granteeId) => onChange({ target: { value: granteeId, name } })}\n                                     optionRenderer={_renderGranteesSelectOption}\n                                     options={granteesOptions}\n+                                    // @ts-ignore", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzU4NDAzNA=="}, "originalCommit": {"oid": "0446caebdef1ebcd869edfda0dc4a64c3cfa3339"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM4MDIxOTg1OnYy", "diffSide": "LEFT", "path": "graylog2-web-interface/src/views/components/aggregationbuilder/SeriesSelect.tsx", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxNDoxMjo1OFrOIBeVLw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxNDozMTo1MFrOIBfh9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODQxNjQzMQ==", "bodyText": "Is this removed on purpose?", "url": "https://github.com/Graylog2/graylog2-server/pull/9705#discussion_r538416431", "createdAt": "2020-12-08T14:12:58Z", "author": {"login": "dennisoelkers"}, "path": "graylog2-web-interface/src/views/components/aggregationbuilder/SeriesSelect.tsx", "diffHunk": "@@ -168,10 +168,9 @@ class SeriesSelect extends React.Component<Props, State> {\n               options={options}\n               value={series.map(_wrapOption)}\n               components={_components}\n-              onClose={this._onClose}\n               closeMenuOnSelect={false}\n+              onMenuClose={this._onClose}\n               menuShouldScrollIntoView\n-              tabSelectsValue", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "040cb5e21cd9cc48a325feb79ce7428d0655cacc"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODQzNjA4Ng==", "bodyText": "I removed this prop, because we always set it to false in the views Select. I tested this case with tabSelectsValue and prefer to keep it disabled.", "url": "https://github.com/Graylog2/graylog2-server/pull/9705#discussion_r538436086", "createdAt": "2020-12-08T14:31:50Z", "author": {"login": "linuspahl"}, "path": "graylog2-web-interface/src/views/components/aggregationbuilder/SeriesSelect.tsx", "diffHunk": "@@ -168,10 +168,9 @@ class SeriesSelect extends React.Component<Props, State> {\n               options={options}\n               value={series.map(_wrapOption)}\n               components={_components}\n-              onClose={this._onClose}\n               closeMenuOnSelect={false}\n+              onMenuClose={this._onClose}\n               menuShouldScrollIntoView\n-              tabSelectsValue", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODQxNjQzMQ=="}, "originalCommit": {"oid": "040cb5e21cd9cc48a325feb79ce7428d0655cacc"}, "originalPosition": 17}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4339, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}