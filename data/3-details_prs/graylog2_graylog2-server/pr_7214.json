{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY0MDQ4MjU4", "number": 7214, "title": "Improving search controls by adding text and dropdown, fixing reset.", "bodyText": "Description\n\nMotivation and Context\n\n\nPrior to this change, the search controls consisted of icons only. This\nrequired the user to remember their meaning or waiting for the tooltips\nto appear.\nThis change is aiming to improve this by:\n\nAdding text to the load/save buttons\nPutting other options into a dropdown and adding text\nRenaming \"Empty search\" to \"Reset search\"\nFixing the \"Reset search\" functionality\n\nFixes #7168.\nFixes #7162.\nScreenshots (if appropriate):\n\nTypes of changes\n\n\n Bug fix (non-breaking change which fixes an issue)\n New feature (non-breaking change which adds functionality)\n Refactoring (non-breaking change)\n Breaking change (fix or feature that would cause existing functionality to change)\n\nChecklist:\n\n\n\n My code follows the code style of this project.\n My change requires a change to the documentation.\n I have updated the documentation accordingly.\n I have read the CONTRIBUTING document.\n I have added tests to cover my changes.", "createdAt": "2020-01-17T09:29:24Z", "url": "https://github.com/Graylog2/graylog2-server/pull/7214", "merged": true, "mergeCommit": {"oid": "e6dbfb13167d1d82aca5d2e3d6c661d274c55267"}, "closed": true, "closedAt": "2020-01-24T15:03:31Z", "author": {"login": "dennisoelkers"}, "timelineItems": {"totalCount": 27, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb7NZE4gFqTM0NDUzMDQ1MA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABb9f44pAH2gAyMzY0MDQ4MjU4OjJlMGExYjliN2RjODhjODliODM0NzE4ZjU4Y2EzMzU3NTUyZTJjZGY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ0NTMwNDUw", "url": "https://github.com/Graylog2/graylog2-server/pull/7214#pullrequestreview-344530450", "createdAt": "2020-01-17T11:52:37Z", "commit": {"oid": "239519f6d2846c79cb1ab9bfeda17e288c675096"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "239519f6d2846c79cb1ab9bfeda17e288c675096", "author": {"user": {"login": "dennisoelkers", "name": "Dennis Oelkers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/239519f6d2846c79cb1ab9bfeda17e288c675096", "committedDate": "2020-01-17T09:34:50Z", "message": "Fixing linter hints."}, "afterCommit": {"oid": "83b7b08a924300a45b238ac82f53337f01382336", "author": {"user": {"login": "dennisoelkers", "name": "Dennis Oelkers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/83b7b08a924300a45b238ac82f53337f01382336", "committedDate": "2020-01-20T10:39:43Z", "message": "Fixing linter hints."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ1NDA3NDg4", "url": "https://github.com/Graylog2/graylog2-server/pull/7214#pullrequestreview-345407488", "createdAt": "2020-01-20T16:05:10Z", "commit": {"oid": "83b7b08a924300a45b238ac82f53337f01382336"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ1NDExMjU4", "url": "https://github.com/Graylog2/graylog2-server/pull/7214#pullrequestreview-345411258", "createdAt": "2020-01-20T16:11:06Z", "commit": {"oid": "83b7b08a924300a45b238ac82f53337f01382336"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1fee96a5864ba37d97399ac741e53569e60ac89d", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/1fee96a5864ba37d97399ac741e53569e60ac89d", "committedDate": "2020-01-21T14:57:59Z", "message": "Redirect to default search page, when resetinng a search on ShowViewPage"}, "afterCommit": {"oid": "fff60711a46ff5f4d624cf35588e784872553519", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/fff60711a46ff5f4d624cf35588e784872553519", "committedDate": "2020-01-21T15:38:48Z", "message": "Redirect to default search page, when resetinng a search on ShowViewPage"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fff60711a46ff5f4d624cf35588e784872553519", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/fff60711a46ff5f4d624cf35588e784872553519", "committedDate": "2020-01-21T15:38:48Z", "message": "Redirect to default search page, when resetinng a search on ShowViewPage"}, "afterCommit": {"oid": "a92ca49be1a2906e0b48b42e60eb068c013b437c", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/a92ca49be1a2906e0b48b42e60eb068c013b437c", "committedDate": "2020-01-22T13:10:47Z", "message": "Redirect to default search page, when resetinng a search on ShowViewPage"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2NjU5MjA5", "url": "https://github.com/Graylog2/graylog2-server/pull/7214#pullrequestreview-346659209", "createdAt": "2020-01-22T15:07:33Z", "commit": {"oid": "a92ca49be1a2906e0b48b42e60eb068c013b437c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a92ca49be1a2906e0b48b42e60eb068c013b437c", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/a92ca49be1a2906e0b48b42e60eb068c013b437c", "committedDate": "2020-01-22T13:10:47Z", "message": "Redirect to default search page, when resetinng a search on ShowViewPage"}, "afterCommit": {"oid": "bbaa7afa8b4e906f64a506a0a3524c1e8ba9a4d0", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/bbaa7afa8b4e906f64a506a0a3524c1e8ba9a4d0", "committedDate": "2020-01-23T13:45:46Z", "message": "Redirect to default search page, when resetinng a search on ShowViewPage"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3MzQ3NDQz", "url": "https://github.com/Graylog2/graylog2-server/pull/7214#pullrequestreview-347347443", "createdAt": "2020-01-23T14:41:24Z", "commit": {"oid": "934158c48593e0c16a8cfd5d4814cf18cc391bb3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3Mzc5MDMy", "url": "https://github.com/Graylog2/graylog2-server/pull/7214#pullrequestreview-347379032", "createdAt": "2020-01-23T15:19:39Z", "commit": {"oid": "af0d04abd4ecb8a7b3acfb8bc52c2a49091b6dbb"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0bb7d0c711d0352fd07ba45d629a84970a1e1ef7", "author": {"user": {"login": "dennisoelkers", "name": "Dennis Oelkers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/0bb7d0c711d0352fd07ba45d629a84970a1e1ef7", "committedDate": "2020-01-24T08:23:54Z", "message": "Changing glyphs, adding text & dropdown, fixing reset search."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d0a3d1334ec38b05883b68010c8efdb0e77a433", "author": {"user": {"login": "dennisoelkers", "name": "Dennis Oelkers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/4d0a3d1334ec38b05883b68010c8efdb0e77a433", "committedDate": "2020-01-24T08:23:54Z", "message": "Adding testid to reset search item."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "30edfb015a8e2ab2e6e02000cbeb03e928e4343d", "author": {"user": {"login": "dennisoelkers", "name": "Dennis Oelkers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/30edfb015a8e2ab2e6e02000cbeb03e928e4343d", "committedDate": "2020-01-24T08:23:54Z", "message": "Simplifying & updating snapshots, adapting test case."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "201a33802f0456f8a15e2dad7294145975204277", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/201a33802f0456f8a15e2dad7294145975204277", "committedDate": "2020-01-24T08:23:54Z", "message": "Implement NewViewLoaderContext for StreamSearchPage, to enable search reset"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5af3c271bac83b6da01bfe8df87997b80182d41d", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/5af3c271bac83b6da01bfe8df87997b80182d41d", "committedDate": "2020-01-24T08:23:55Z", "message": "Fix NewSearchPage search reset by overwriting the current query and updating the URL"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1115d11a8401b3b8107fb09ac1360c7530b25ed", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/d1115d11a8401b3b8107fb09ac1360c7530b25ed", "committedDate": "2020-01-24T08:23:55Z", "message": "Fix StreamSearchPage search reset by overwriting the current query and updating the URL"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8f2f0d4b0ba70a24270a8b5398cf5c3429feea79", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/8f2f0d4b0ba70a24270a8b5398cf5c3429feea79", "committedDate": "2020-01-24T08:23:55Z", "message": "Redirect to default search page, when resetinng a search on ShowViewPage"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0881bb3b4a192c92abd2b28d211ab387a2db490e", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/0881bb3b4a192c92abd2b28d211ab387a2db490e", "committedDate": "2020-01-24T08:23:55Z", "message": "Remove empty row"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ec4ed54d28a3a9cbc129e84e4783e0a62be7aa7b", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/ec4ed54d28a3a9cbc129e84e4783e0a62be7aa7b", "committedDate": "2020-01-24T08:23:55Z", "message": "Change searchbar grid regarding new bookmark controls"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "af0d04abd4ecb8a7b3acfb8bc52c2a49091b6dbb", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/af0d04abd4ecb8a7b3acfb8bc52c2a49091b6dbb", "committedDate": "2020-01-23T14:59:30Z", "message": "Change searchbar grid regarding new bookmark controls"}, "afterCommit": {"oid": "ec4ed54d28a3a9cbc129e84e4783e0a62be7aa7b", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/ec4ed54d28a3a9cbc129e84e4783e0a62be7aa7b", "committedDate": "2020-01-24T08:23:55Z", "message": "Change searchbar grid regarding new bookmark controls"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5c1854b663eaed84dbce5d562bb3be0860cb967", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/d5c1854b663eaed84dbce5d562bb3be0860cb967", "committedDate": "2020-01-24T09:55:55Z", "message": "Refactor StreamSearchPage view setup by defining stream realation on initial create\n\n- defined stream is no longer getting lost on reload\n- fixes intial state for reset button"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a673b1f3cd7b85909973ec7403b733994d8a0e56", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/a673b1f3cd7b85909973ec7403b733994d8a0e56", "committedDate": "2020-01-24T10:11:04Z", "message": "Remove empty row"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a6d8317213c338f22cdb02f9773a6cd3c6376cc4", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/a6d8317213c338f22cdb02f9773a6cd3c6376cc4", "committedDate": "2020-01-24T10:12:46Z", "message": "Remove empty row"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3ODU2NTMx", "url": "https://github.com/Graylog2/graylog2-server/pull/7214#pullrequestreview-347856531", "createdAt": "2020-01-24T10:13:15Z", "commit": {"oid": "d5c1854b663eaed84dbce5d562bb3be0860cb967"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQxMDoxMzoxNVrOFhZIIw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQxMDoxMzoxNVrOFhZIIw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDU1OTAxMQ==", "bodyText": "I am not so sure where the best place for this helper function is. I can't use the QueriesFilterStore, due to a dependency cycle.", "url": "https://github.com/Graylog2/graylog2-server/pull/7214#discussion_r370559011", "createdAt": "2020-01-24T10:13:15Z", "author": {"login": "linuspahl"}, "path": "graylog2-web-interface/src/views/logic/queries/Query.js", "diffHunk": "@@ -32,6 +32,22 @@ export type ElasticsearchQueryString = {\n \n export const createElasticsearchQueryString = (query: string = ''): ElasticsearchQueryString => ({ type: 'elasticsearch', query_string: query });\n \n+const _streamFilters = (selectedStreams: Array<string>): Array<{ type: string, id: string }> => {\n+  return selectedStreams.map(stream => ({ type: 'stream', id: stream }));\n+};\n+\n+export const filtersForQuery = (streams: ?Array<string>) => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5c1854b663eaed84dbce5d562bb3be0860cb967"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "308020b6ded050279381a4261745541e284fc470", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/308020b6ded050279381a4261745541e284fc470", "committedDate": "2020-01-24T11:57:12Z", "message": "Fix promise return error for NewSearchPage and StreamSearchPage"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3OTczMzg3", "url": "https://github.com/Graylog2/graylog2-server/pull/7214#pullrequestreview-347973387", "createdAt": "2020-01-24T14:06:09Z", "commit": {"oid": "308020b6ded050279381a4261745541e284fc470"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e0a1b9b7dc88c89b834718f58ca3357552e2cdf", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/2e0a1b9b7dc88c89b834718f58ca3357552e2cdf", "committedDate": "2020-01-24T14:33:30Z", "message": "Refactor QueryGenerator parameter usage"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2693, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}