{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE1MzE4NzE2", "number": 8074, "title": "Query ace styles", "bodyText": "Description\n\n\nUpdating variant colors that reverted at some point from #7971\nFixing Search Query input highlight color\nUpdating positioning of Query Input to center with search button\n\nMotivation and Context\n\n\nNeeded more shades of variants and somehow I managed to revert previous changes to the variants. Also, the current updates to the Search Query input made highlighted text difficult to read.\nHow Has This Been Tested?\n\n\n\nScreenshots (if appropriate):\n\nTypes of changes\n\n\n Bug fix (non-breaking change which fixes an issue)\n New feature (non-breaking change which adds functionality)\n Refactoring (non-breaking change)\n Breaking change (fix or feature that would cause existing functionality to change)\n\nChecklist:\n\n\n\n My code follows the code style of this project.\n My change requires a change to the documentation.\n I have updated the documentation accordingly.\n I have read the CONTRIBUTING document.\n I have added tests to cover my changes.", "createdAt": "2020-05-08T16:28:45Z", "url": "https://github.com/Graylog2/graylog2-server/pull/8074", "merged": true, "mergeCommit": {"oid": "80f98782a060fa139f65d4ba1d6d784e7e490424"}, "closed": true, "closedAt": "2020-05-13T08:29:21Z", "author": {"login": "kyleknighted"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcgK3LrgFqTQwODkzNDEzMQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcg0imhgFqTQxMDY5Nzc1OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4OTM0MTMx", "url": "https://github.com/Graylog2/graylog2-server/pull/8074#pullrequestreview-408934131", "createdAt": "2020-05-11T07:44:30Z", "commit": {"oid": "546552535340b182d1ee241fa9eb0a4ecab9425e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQwNzo0NDozMVrOGTQc5w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQwNzo0OTozN1rOGTQntQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjg0NTY3MQ==", "bodyText": "The query input has a fixed width, without !important:", "url": "https://github.com/Graylog2/graylog2-server/pull/8074#discussion_r422845671", "createdAt": "2020-05-11T07:44:31Z", "author": {"login": "linuspahl"}, "path": "graylog2-web-interface/src/views/components/searchbar/queryinput/StyledAceEditor.jsx", "diffHunk": "@@ -8,9 +8,9 @@ const StyledAceEditor = styled(AceEditor).attrs(({ aceTheme, theme }) => ({\n   theme: aceTheme,\n   scTheme: theme,\n }))(({ scTheme }) => css`\n-  margin-top: 9px;\n-  height: 34px !important;\n-  width: 100% !important;\n+  height: 34px;\n+  line-height: 32px;\n+  width: 100%;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "546552535340b182d1ee241fa9eb0a4ecab9425e"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjg0ODQzNw==", "bodyText": "You could create lighten for the top and a darken function for the bottom block.", "url": "https://github.com/Graylog2/graylog2-server/pull/8074#discussion_r422848437", "createdAt": "2020-05-11T07:49:37Z", "author": {"login": "linuspahl"}, "path": "graylog2-web-interface/src/theme/variants/teinte.js", "diffHunk": "@@ -30,14 +30,24 @@ const variant = {\n   primary: '#702785',\n   success: '#00ae42',\n   warning: '#ffd200',\n+  lightest: {},\n+  lighter: {},\n+  light: {},\n+  dark: {},\n+  darker: {},\n+  darkest: {},\n };\n \n-const variantLight = {};\n-const variantDark = {};\n-\n Object.keys(variant).forEach((name) => {\n-  variantLight[name] = chroma(variant[name]).brighten(1).hex();\n-  variantDark[name] = chroma(variant[name]).darken(1.5).hex();\n+  if (typeof variant[name] === 'string') {\n+    variant.light[name] = chroma.mix(variant[name], '#fff', 0.15).hex();\n+    variant.lighter[name] = chroma.mix(variant[name], '#fff', 0.5).hex();\n+    variant.lightest[name] = chroma.mix(variant[name], '#fff', 0.85).hex();\n+\n+    variant.dark[name] = chroma.mix(variant[name], '#000', 0.15).hex();\n+    variant.darker[name] = chroma.mix(variant[name], '#000', 0.5).hex();\n+    variant.darkest[name] = chroma.mix(variant[name], '#000', 0.85).hex();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "546552535340b182d1ee241fa9eb0a4ecab9425e"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5ODA3MDgz", "url": "https://github.com/Graylog2/graylog2-server/pull/8074#pullrequestreview-409807083", "createdAt": "2020-05-12T08:19:46Z", "commit": {"oid": "ed8b5972a5abdc60893023cc356e34ffb9f10706"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQwODoxOTo0NlrOGT7Zdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQwODoxOTo0NlrOGT7Zdg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzU0OTMwMg==", "bodyText": "@kyleknighted I like your changes regarding the highlight! While testing these changes, I noticed two problems with the autocomplete:\nDue to the new changes the autocomplete lost its top \"margin\":\n\nCompared with before (3.3 beta1):\n\nAnd as you can see in the screenshot the autocomplete has a larger width. While having a look at the described problem, I saw the   .ace_editor.ace_autocomplete { styling is no longer being included. This is not directly related to this PR, but could you have a look at it as well?", "url": "https://github.com/Graylog2/graylog2-server/pull/8074#discussion_r423549302", "createdAt": "2020-05-12T08:19:46Z", "author": {"login": "linuspahl"}, "path": "graylog2-web-interface/src/views/components/searchbar/queryinput/StyledAceEditor.jsx", "diffHunk": "@@ -8,140 +8,140 @@ const StyledAceEditor = styled(AceEditor).attrs(({ aceTheme, theme }) => ({\n   theme: aceTheme,\n   scTheme: theme,\n }))(({ scTheme }) => css`\n-  margin-top: 9px;\n-  height: 34px !important;\n-  width: 100% !important;\n-\n-  &.ace-queryinput .ace_gutter {\n-    background: ${scTheme.color.global.inputBackground};\n-    color: ${util.contrastingColor(scTheme.color.global.inputBackground, 'AAA')};\n-  }\n-\n-  &.ace-queryinput .ace_print-margin {\n-    width: 1px;\n-    background: ${scTheme.color.global.inputBackground};\n-  }\n-\n   &.ace-queryinput {\n+    height: 34px !important;\n+    width: 100% !important;\n     background-color: ${scTheme.color.global.inputBackground};\n     color: ${util.contrastingColor(scTheme.color.global.inputBackground, 'AAA')};\n-  }\n-\n-  &.ace-queryinput .ace_cursor {\n-    color: ${scTheme.color.gray[50]};\n-  }\n-\n-  &.ace-queryinput .ace_marker-layer .ace_selection {\n-    background: ${scTheme.color.variant.light.default};\n-  }\n-\n-  &.ace-queryinput.ace_multiselect .ace_selection.ace_start {\n-    box-shadow: 0 0 3px 0 ${scTheme.color.global.inputBackground};\n-  }\n-\n-  &.ace-queryinput .ace_marker-layer .ace_step {\n-    background: ${scTheme.color.variant.warning};\n-  }\n-\n-  &.ace-queryinput .ace_marker-layer .ace_bracket {\n-    margin: -1px 0 0 -1px;\n-    border: none;\n-  }\n-\n-  &.ace-queryinput .ace_marker-layer .ace_active-line {\n-    background: ${scTheme.color.global.inputBackground};\n-  }\n-\n-  &.ace-queryinput .ace_gutter-active-line {\n-    background-color: ${scTheme.color.global.inputBackground};\n-  }\n-\n-  &.ace-queryinput .ace_marker-layer .ace_selected-word {\n-    border: 1px solid ${scTheme.color.gray[80]};\n-  }\n-\n-  &.ace-queryinput .ace_invisible {\n-    color: ${scTheme.color.global.inputBackground};\n-  }\n-\n-  &.ace-queryinput .ace_keyword,\n-  &.ace-queryinput .ace_meta,\n-  &.ace-queryinput .ace_storage,\n-  &.ace-queryinput .ace_storage.ace_type,\n-  &.ace-queryinput .ace_support.ace_type {\n-    color: ${scTheme.color.variant.primary};\n-  }\n-\n-  &.ace-queryinput .ace_keyword.ace_operator {\n-    color: ${scTheme.color.variant.dark.info};\n-  }\n-\n-  &.ace-queryinput .ace_constant.ace_character,\n-  &.ace-queryinput .ace_constant.ace_language,\n-  &.ace-queryinput .ace_constant.ace_numeric,\n-  &.ace-queryinput .ace_keyword.ace_other.ace_unit,\n-  &.ace-queryinput .ace_support.ace_constant,\n-  &.ace-queryinput .ace_variable.ace_parameter {\n-    color: ${scTheme.color.variant.dark.danger};\n-  }\n-\n-  &.ace-queryinput .ace_constant.ace_other {\n-    color: ${scTheme.color.variant.default};\n-  }\n-\n-  &.ace-queryinput .ace_invalid {\n-    color: ${util.readableColor(scTheme.color.brand.primary)};\n-    background-color: ${scTheme.color.brand.primary};\n-  }\n-\n-  &.ace-queryinput .ace_invalid.ace_deprecated {\n-    color: ${util.readableColor(scTheme.color.brand.primary)};\n-    background-color: ${scTheme.color.variant.dark.primary};\n-  }\n-\n-  &.ace-queryinput .ace_fold {\n-    background-color: ${scTheme.color.variant.info};\n-    border-color: ${util.contrastingColor(scTheme.color.global.inputBackground, 'AAA')};\n-  }\n-\n-  &.ace-queryinput .ace_entity.ace_name.ace_function,\n-  &.ace-queryinput .ace_support.ace_function,\n-  &.ace-queryinput .ace_variable,\n-  &.ace-queryinput .ace_term {\n-    color: ${scTheme.color.variant.info};\n-  }\n-\n-  &.ace-queryinput .ace_support.ace_class,\n-  &.ace-queryinput .ace_support.ace_type {\n-    color: ${scTheme.color.variant.dark.warning};\n-  }\n-\n-  &.ace-queryinput .ace_heading,\n-  &.ace-queryinput .ace_markup.ace_heading,\n-  &.ace-queryinput .ace_string {\n-    color: ${scTheme.color.variant.dark.success};\n-  }\n-\n-  &.ace-queryinput .ace_entity.ace_name.ace_tag,\n-  &.ace-queryinput .ace_entity.ace_other.ace_attribute-name,\n-  &.ace-queryinput .ace_meta.ace_tag,\n-  &.ace-queryinput .ace_string.ace_regexp,\n-  &.ace-queryinput .ace_variable {\n-    color: ${scTheme.color.brand.primary};\n-  }\n-\n-  &.ace-queryinput .ace_comment {\n-    color: ${scTheme.color.gray[60]};\n-  }\n-\n-  .ace_placeholder {\n-    font-size: 16px;\n-    padding: 0 !important;\n-    font-family: inherit !important;\n-  }\n \n-  &.ace-queryinput .ace_indent-guide {\n-    background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bdu3f/BwAlfgctduB85QAAAABJRU5ErkJggg==) right repeat-y;\n+    .ace_gutter {\n+      background: ${scTheme.color.global.inputBackground};\n+      color: ${util.contrastingColor(scTheme.color.global.inputBackground, 'AAA')};\n+    }\n+\n+    .ace_print-margin {\n+      width: 1px;\n+      background: ${scTheme.color.global.inputBackground};\n+    }\n+\n+    .ace_cursor {\n+      color: ${scTheme.color.gray[50]};\n+    }\n+\n+    .ace_marker-layer .ace_selection {\n+      background: ${scTheme.color.variant.lightest.default};\n+    }\n+\n+    &.ace_multiselect .ace_selection.ace_start {\n+      box-shadow: 0 0 3px 0 ${scTheme.color.global.inputBackground};\n+    }\n+\n+    .ace_marker-layer .ace_step {\n+      background: ${scTheme.color.variant.warning};\n+    }\n+\n+    .ace_marker-layer .ace_bracket {\n+      margin: -1px 0 0 -1px;\n+      border: none;\n+    }\n+\n+    .ace_marker-layer .ace_active-line {\n+      background: ${scTheme.color.global.inputBackground};\n+    }\n+\n+    .ace_gutter-active-line {\n+      background-color: ${scTheme.color.global.inputBackground};\n+    }\n+\n+    .ace_marker-layer .ace_selected-word {\n+      border: 1px solid ${scTheme.color.gray[80]};\n+    }\n+\n+    .ace_invisible {\n+      color: ${scTheme.color.global.inputBackground};\n+    }\n+\n+    .ace_keyword,\n+    .ace_meta,\n+    .ace_storage,\n+    .ace_storage.ace_type,\n+    .ace_support.ace_type {\n+      color: ${scTheme.color.variant.primary};\n+    }\n+\n+    .ace_keyword.ace_operator {\n+      color: ${scTheme.color.variant.darker.info};\n+    }\n+\n+    .ace_constant.ace_character,\n+    .ace_constant.ace_language,\n+    .ace_constant.ace_numeric,\n+    .ace_keyword.ace_other.ace_unit,\n+    .ace_support.ace_constant,\n+    .ace_variable.ace_parameter {\n+      color: ${scTheme.color.variant.dark.danger};\n+    }\n+\n+    .ace_constant.ace_other {\n+      color: ${scTheme.color.variant.default};\n+    }\n+\n+    .ace_invalid {\n+      color: ${util.readableColor(scTheme.color.brand.primary)};\n+      background-color: ${scTheme.color.brand.primary};\n+    }\n+\n+    .ace_invalid.ace_deprecated {\n+      color: ${util.readableColor(scTheme.color.brand.primary)};\n+      background-color: ${scTheme.color.variant.dark.primary};\n+    }\n+\n+    .ace_fold {\n+      background-color: ${scTheme.color.variant.info};\n+      border-color: ${util.contrastingColor(scTheme.color.global.inputBackground, 'AAA')};\n+    }\n+\n+    .ace_entity.ace_name.ace_function,\n+    .ace_support.ace_function,\n+    .ace_variable,\n+    .ace_term {\n+      color: ${scTheme.color.variant.info};\n+    }\n+\n+    .ace_support.ace_class,\n+    .ace_support.ace_type {\n+      color: ${scTheme.color.variant.dark.warning};\n+    }\n+\n+    .ace_heading,\n+    .ace_markup.ace_heading,\n+    .ace_string {\n+      color: ${scTheme.color.variant.dark.success};\n+    }\n+\n+    .ace_entity.ace_name.ace_tag,\n+    .ace_entity.ace_other.ace_attribute-name,\n+    .ace_meta.ace_tag,\n+    .ace_string.ace_regexp,\n+    .ace_variable {\n+      color: ${scTheme.color.brand.primary};\n+    }\n+\n+    .ace_comment {\n+      color: ${scTheme.color.gray[60]};\n+    }\n+\n+    .ace_indent-guide {\n+      background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bdu3f/BwAlfgctduB85QAAAABJRU5ErkJggg==) right repeat-y;\n+    }\n+\n+    .ace_content,\n+    .ace_placeholder {\n+      top: 6px;\n+      font-size: 16px;\n+      padding: 0 !important;\n+      font-family: inherit !important;\n+    }\n   }\n \n   .ace_editor.ace_autocomplete {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ed8b5972a5abdc60893023cc356e34ffb9f10706"}, "originalPosition": 270}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "44e69e86933ac56b865d8c5b8910409f7c0c50ba", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/44e69e86933ac56b865d8c5b8910409f7c0c50ba", "committedDate": "2020-05-12T17:41:09Z", "message": "Adding color variants"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "19f7f02c761d8c1d44e6d476a39a1c144f2bc93e", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/19f7f02c761d8c1d44e6d476a39a1c144f2bc93e", "committedDate": "2020-05-12T17:41:09Z", "message": "Update Query input styles"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "83e1c43d2269003f9c2540dbfe0a652c4319c096", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/83e1c43d2269003f9c2540dbfe0a652c4319c096", "committedDate": "2020-05-12T17:41:10Z", "message": "snapshots"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "47a58532324c786698e73077c70aaab358fbcac7", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/47a58532324c786698e73077c70aaab358fbcac7", "committedDate": "2020-05-12T17:41:10Z", "message": "important styles"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a078d93ac28373b11183de0159b22bbaadf3c6a5", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/a078d93ac28373b11183de0159b22bbaadf3c6a5", "committedDate": "2020-05-12T17:41:10Z", "message": "Color funcs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b82767db91cbd755e919b8aad2c8a50a890e396a", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/b82767db91cbd755e919b8aad2c8a50a890e396a", "committedDate": "2020-05-12T17:41:10Z", "message": "return colors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "16ff6a88d51b3bffcddf380505bcead991d46dff", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/16ff6a88d51b3bffcddf380505bcead991d46dff", "committedDate": "2020-05-12T17:41:10Z", "message": "cleanup styles"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ca85d9e8ea8431d5d5cb74a39c08f59fc920a81", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/4ca85d9e8ea8431d5d5cb74a39c08f59fc920a81", "committedDate": "2020-05-12T17:41:10Z", "message": "autocomplete positioning"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8a58e4018561821b05e4ce87ebc2c2e5ff52c5b2", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/8a58e4018561821b05e4ce87ebc2c2e5ff52c5b2", "committedDate": "2020-05-12T17:36:24Z", "message": "autocomplete positioning"}, "afterCommit": {"oid": "4ca85d9e8ea8431d5d5cb74a39c08f59fc920a81", "author": {"user": {"login": "kyleknighted", "name": "Kyle Knight"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/4ca85d9e8ea8431d5d5cb74a39c08f59fc920a81", "committedDate": "2020-05-12T17:41:10Z", "message": "autocomplete positioning"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEwNjk3NzU5", "url": "https://github.com/Graylog2/graylog2-server/pull/8074#pullrequestreview-410697759", "createdAt": "2020-05-13T08:24:31Z", "commit": {"oid": "4ca85d9e8ea8431d5d5cb74a39c08f59fc920a81"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3211, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}