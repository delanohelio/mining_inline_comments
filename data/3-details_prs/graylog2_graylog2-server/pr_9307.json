{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEyMjg1NTQx", "number": 9307, "title": "Avoid using throw by displaying an Alert", "bodyText": "Motivation\nPrior to this change, when we had an runtime error we rendered the error\npage to the user even though he might have been able to workarround an\nissue.\nDescription\nThis change implements a ErrorAlert component which is closable and\nwhich will display an runtime error or warning. It replaces the\nwarnings already implemented and does also replace the throw errors\nfor users and roles components.\nFixes #8756", "createdAt": "2020-10-29T13:44:11Z", "url": "https://github.com/Graylog2/graylog2-server/pull/9307", "merged": true, "mergeCommit": {"oid": "acf640ee41e5b3ae64382d38fb074ae0fda2ae6a"}, "closed": true, "closedAt": "2020-11-02T10:05:43Z", "author": {"login": "kmerz"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdXSV_KAH2gAyNTEyMjg1NTQxOjk5MTZkOTU2OGI5NjAxYmY1YzcyY2E4MTg0N2Q2OGZjYzIwNGFkMDk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdYhrPfgFqTUyMTQ4NzI5NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9916d9568b9601bf5c72ca81847d68fcc204ad09", "author": {"user": {"login": "kmerz", "name": "Konrad Merz"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/9916d9568b9601bf5c72ca81847d68fcc204ad09", "committedDate": "2020-10-29T13:39:48Z", "message": "Avoid using throw by displaying an Alert\n\n## Motivation\nPrior to this change, when we had an runtime error we rendered the error\npage to the user even though he might have been able to workarround an\nissue.\n\n## Description\nThis change implements a ErrorAlert component which is closable and\nwhich will display an runtime error or warning. It replaces the\nwarnings already implemented and does also replace the `throw` errors\nfor users and roles components."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "591e892e1b109f9a17be60f3cc22ea8f492c6909", "author": {"user": {"login": "kmerz", "name": "Konrad Merz"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/591e892e1b109f9a17be60f3cc22ea8f492c6909", "committedDate": "2020-10-29T14:39:57Z", "message": "Add missing tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "06cc475d46ac893602da09caf6ad88f01bf09461", "author": {"user": {"login": "kmerz", "name": "Konrad Merz"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/06cc475d46ac893602da09caf6ad88f01bf09461", "committedDate": "2020-10-29T15:31:03Z", "message": "Fix flow and linter warnings"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIwNjAzNzYw", "url": "https://github.com/Graylog2/graylog2-server/pull/9307#pullrequestreview-520603760", "createdAt": "2020-10-30T12:02:33Z", "commit": {"oid": "06cc475d46ac893602da09caf6ad88f01bf09461"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQxMjowMjozM1rOHrMIeg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQxMjowMzo1OVrOHrMLFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTA0OTU5NA==", "bodyText": "Lets reset the error somewhere, otherwise it will not get removed on a successful request.", "url": "https://github.com/Graylog2/graylog2-server/pull/9307#discussion_r515049594", "createdAt": "2020-10-30T12:02:33Z", "author": {"login": "linuspahl"}, "path": "graylog2-web-interface/src/components/permissions/RolesSelector.jsx", "diffHunk": "@@ -44,7 +44,7 @@ const _options = (roles, assignedRolesIds, identifier) => roles\n   .toArray()\n   .map((r) => ({ label: r.name, value: r.name, role: r }));\n \n-const _assignRole = (selectedRoleName, roles, onSubmit, setSelectedRoleName, setIsSubmitting) => {\n+const _assignRole = (selectedRoleName, roles, onSubmit, setSelectedRoleName, setIsSubmitting, setError) => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06cc475d46ac893602da09caf6ad88f01bf09461"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTA1MDI2Mw==", "bodyText": "We should somewhere reset the error in this case as well.", "url": "https://github.com/Graylog2/graylog2-server/pull/9307#discussion_r515050263", "createdAt": "2020-10-30T12:03:59Z", "author": {"login": "linuspahl"}, "path": "graylog2-web-interface/src/components/roles/RoleEdit/UsersSelector.jsx", "diffHunk": "@@ -88,7 +89,9 @@ const UsersSelector = ({ role, onSubmit }: Props) => {\n     })));\n \n     if (!userOverview) {\n-      throw new Error(`Unable to find user with name ${user} in ${users.map((u) => u.username).join(', ')}`);\n+      setError(`This is an exceptional error! Unable to find user with name ${user} in ${users.map((u) => u.username).join(', ')}`);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06cc475d46ac893602da09caf6ad88f01bf09461"}, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "805c7b5fd686b6ad4627f0e2b7020da49981a079", "author": {"user": {"login": "kmerz", "name": "Konrad Merz"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/805c7b5fd686b6ad4627f0e2b7020da49981a079", "committedDate": "2020-11-02T08:41:24Z", "message": "Reset Error if the next request was successfull"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxNDg3Mjk0", "url": "https://github.com/Graylog2/graylog2-server/pull/9307#pullrequestreview-521487294", "createdAt": "2020-11-02T10:05:31Z", "commit": {"oid": "805c7b5fd686b6ad4627f0e2b7020da49981a079"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3470, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}