{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM2NDIwMzAz", "number": 8372, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxMDo1OToyNVrOEH6y8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxMTowNzo0M1rOEH68bA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2NzM4ODAyOnYy", "diffSide": "RIGHT", "path": "graylog-storage-elasticsearch6/src/main/java/org/graylog/storage/elasticsearch6/Elasticsearch6Plugin.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxMDo1OToyNVrOGnkGZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxNDo1Njo0OVrOGntVTA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDEzOTExMQ==", "bodyText": "I would suggest renaming this to SUPPORTED_ES_VERSION. This would especially simplify understanding other classes where this constant is referenced.", "url": "https://github.com/Graylog2/graylog2-server/pull/8372#discussion_r444139111", "createdAt": "2020-06-23T10:59:25Z", "author": {"login": "alex-konn"}, "path": "graylog-storage-elasticsearch6/src/main/java/org/graylog/storage/elasticsearch6/Elasticsearch6Plugin.java", "diffHunk": "@@ -4,10 +4,13 @@\n import org.graylog2.plugin.Plugin;\n import org.graylog2.plugin.PluginMetaData;\n import org.graylog2.plugin.PluginModule;\n+import org.graylog2.plugin.Version;\n \n import java.util.Collection;\n \n public class Elasticsearch6Plugin implements Plugin {\n+    public static final Version SUPPORTED_VERSION = Version.from(6, 0, 0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8da61ec17511ad47cf2e57da027dce06c32dce0d"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDI5MDM4MA==", "bodyText": "\u2714\ufe0f", "url": "https://github.com/Graylog2/graylog2-server/pull/8372#discussion_r444290380", "createdAt": "2020-06-23T14:56:49Z", "author": {"login": "dennisoelkers"}, "path": "graylog-storage-elasticsearch6/src/main/java/org/graylog/storage/elasticsearch6/Elasticsearch6Plugin.java", "diffHunk": "@@ -4,10 +4,13 @@\n import org.graylog2.plugin.Plugin;\n import org.graylog2.plugin.PluginMetaData;\n import org.graylog2.plugin.PluginModule;\n+import org.graylog2.plugin.Version;\n \n import java.util.Collection;\n \n public class Elasticsearch6Plugin implements Plugin {\n+    public static final Version SUPPORTED_VERSION = Version.from(6, 0, 0);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDEzOTExMQ=="}, "originalCommit": {"oid": "8da61ec17511ad47cf2e57da027dce06c32dce0d"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2NzQxMjI4OnYy", "diffSide": "RIGHT", "path": "graylog-storage-elasticsearch6/src/main/java/org/graylog/storage/elasticsearch6/ViewsESBackendModule.java", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxMTowNzo0M1rOGnkVcQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxMDoyMDoxM1rOGoMFIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDE0Mjk2MQ==", "bodyText": "Wouldn't it be enough to use bindForVersion(SUPPORTED_VERSION, ExportBackend.class); directly here instead of adding two additional private methods?", "url": "https://github.com/Graylog2/graylog2-server/pull/8372#discussion_r444142961", "createdAt": "2020-06-23T11:07:43Z", "author": {"login": "alex-konn"}, "path": "graylog-storage-elasticsearch6/src/main/java/org/graylog/storage/elasticsearch6/ViewsESBackendModule.java", "diffHunk": "@@ -97,8 +97,20 @@ protected void configure() {\n         registerPivotBucketHandler(Time.NAME, ESTimeHandler.class);\n         registerPivotBucketHandler(DateRangeBucket.NAME, ESDateRangeHandler.class);\n \n-        bind(ExportBackend.class).to(ElasticsearchExportBackend.class);\n-        bind(RequestStrategy.class).to(org.graylog.storage.elasticsearch6.views.export.Scroll.class);\n+        bindExportBackend().to(ElasticsearchExportBackend.class);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8da61ec17511ad47cf2e57da027dce06c32dce0d"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDI1MzgwNA==", "bodyText": "Sure, I did that before, I just consider this to be clearer regarding its intention.", "url": "https://github.com/Graylog2/graylog2-server/pull/8372#discussion_r444253804", "createdAt": "2020-06-23T14:09:55Z", "author": {"login": "dennisoelkers"}, "path": "graylog-storage-elasticsearch6/src/main/java/org/graylog/storage/elasticsearch6/ViewsESBackendModule.java", "diffHunk": "@@ -97,8 +97,20 @@ protected void configure() {\n         registerPivotBucketHandler(Time.NAME, ESTimeHandler.class);\n         registerPivotBucketHandler(DateRangeBucket.NAME, ESDateRangeHandler.class);\n \n-        bind(ExportBackend.class).to(ElasticsearchExportBackend.class);\n-        bind(RequestStrategy.class).to(org.graylog.storage.elasticsearch6.views.export.Scroll.class);\n+        bindExportBackend().to(ElasticsearchExportBackend.class);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDE0Mjk2MQ=="}, "originalCommit": {"oid": "8da61ec17511ad47cf2e57da027dce06c32dce0d"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDI4MDAyMA==", "bodyText": "Yeah, I understand. Keeping the configure method tidy and easy to read is important.\nI guess the only thing that really confused me was that that one of these two methods was in the base class ViewsModule. I would personally get rid of at least that one and move the call to bindForVersion into ViewsESBackendModule, but this is nothing that would keep me from merging this PR. :D", "url": "https://github.com/Graylog2/graylog2-server/pull/8372#discussion_r444280020", "createdAt": "2020-06-23T14:43:41Z", "author": {"login": "alex-konn"}, "path": "graylog-storage-elasticsearch6/src/main/java/org/graylog/storage/elasticsearch6/ViewsESBackendModule.java", "diffHunk": "@@ -97,8 +97,20 @@ protected void configure() {\n         registerPivotBucketHandler(Time.NAME, ESTimeHandler.class);\n         registerPivotBucketHandler(DateRangeBucket.NAME, ESDateRangeHandler.class);\n \n-        bind(ExportBackend.class).to(ElasticsearchExportBackend.class);\n-        bind(RequestStrategy.class).to(org.graylog.storage.elasticsearch6.views.export.Scroll.class);\n+        bindExportBackend().to(ElasticsearchExportBackend.class);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDE0Mjk2MQ=="}, "originalCommit": {"oid": "8da61ec17511ad47cf2e57da027dce06c32dce0d"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDI5MDIxNw==", "bodyText": "registerQueryBackend(Version, String, ...) is supposed to be reused in future storage modules, that's why it is in ViewsModule.", "url": "https://github.com/Graylog2/graylog2-server/pull/8372#discussion_r444290217", "createdAt": "2020-06-23T14:56:38Z", "author": {"login": "dennisoelkers"}, "path": "graylog-storage-elasticsearch6/src/main/java/org/graylog/storage/elasticsearch6/ViewsESBackendModule.java", "diffHunk": "@@ -97,8 +97,20 @@ protected void configure() {\n         registerPivotBucketHandler(Time.NAME, ESTimeHandler.class);\n         registerPivotBucketHandler(DateRangeBucket.NAME, ESDateRangeHandler.class);\n \n-        bind(ExportBackend.class).to(ElasticsearchExportBackend.class);\n-        bind(RequestStrategy.class).to(org.graylog.storage.elasticsearch6.views.export.Scroll.class);\n+        bindExportBackend().to(ElasticsearchExportBackend.class);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDE0Mjk2MQ=="}, "originalCommit": {"oid": "8da61ec17511ad47cf2e57da027dce06c32dce0d"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc5NDE0NQ==", "bodyText": "Alright, then let's leave it as it is.", "url": "https://github.com/Graylog2/graylog2-server/pull/8372#discussion_r444794145", "createdAt": "2020-06-24T10:20:13Z", "author": {"login": "alex-konn"}, "path": "graylog-storage-elasticsearch6/src/main/java/org/graylog/storage/elasticsearch6/ViewsESBackendModule.java", "diffHunk": "@@ -97,8 +97,20 @@ protected void configure() {\n         registerPivotBucketHandler(Time.NAME, ESTimeHandler.class);\n         registerPivotBucketHandler(DateRangeBucket.NAME, ESDateRangeHandler.class);\n \n-        bind(ExportBackend.class).to(ElasticsearchExportBackend.class);\n-        bind(RequestStrategy.class).to(org.graylog.storage.elasticsearch6.views.export.Scroll.class);\n+        bindExportBackend().to(ElasticsearchExportBackend.class);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDE0Mjk2MQ=="}, "originalCommit": {"oid": "8da61ec17511ad47cf2e57da027dce06c32dce0d"}, "originalPosition": 33}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4202, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}