{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY3OTg0Nzc1", "number": 8803, "title": "Permissions / management UI improvements", "bodyText": "This is a collection of small UI improvements for the Permissions / management components. Please have look at the commit messages for a list of all changes.\n/jenkins-pr-deps Graylog2/graylog-plugin-enterprise#1569", "createdAt": "2020-08-14T13:29:05Z", "url": "https://github.com/Graylog2/graylog2-server/pull/8803", "merged": true, "mergeCommit": {"oid": "83ab3cd1b704ef1880c4ec66bb25e7c315f9b247"}, "closed": true, "closedAt": "2020-08-18T11:36:21Z", "author": {"login": "linuspahl"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc-zNlbgH2gAyNDY3OTg0Nzc1OjkxMmI1NzdhYmYyYzg1Zjc4NWM0OWJiZDViY2IyYmJiZWU5ZDFlZDE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdAFa98gFqTQ2OTI4MzE5MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "912b577abf2c85f785c49bbd5bcb2bbbee9d1ed1", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/912b577abf2c85f785c49bbd5bcb2bbbee9d1ed1", "committedDate": "2020-08-14T11:49:23Z", "message": "Fix EntityShareModal GranteesList collaborators list header alignment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "47b8636cfc4bf3f08a4562bc1f7e38757901ae3e", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/47b8636cfc4bf3f08a4562bc1f7e38757901ae3e", "committedDate": "2020-08-14T11:55:38Z", "message": "Adjust EntityShareModal spacing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b77d688ed4eee5b54ae607ead18fc66977c06bf9", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/b77d688ed4eee5b54ae607ead18fc66977c06bf9", "committedDate": "2020-08-14T12:15:11Z", "message": "Add info for EntityShareModal if entity has no collaborators"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5a22ce869c5f23d209e5ab930cad60b70c28e4a", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/d5a22ce869c5f23d209e5ab930cad60b70c28e4a", "committedDate": "2020-08-14T12:22:47Z", "message": "Use PropertyType for EntityShareModal prop type definitions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e0f2c10d310cc1c18070f9f9f317989ab3686fe5", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/e0f2c10d310cc1c18070f9f9f317989ab3686fe5", "committedDate": "2020-08-14T13:11:24Z", "message": "Remove client address from users overview popover and only display it for active users"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0fc475af429c8779be41a36c979735fc1810b7b7", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/0fc475af429c8779be41a36c979735fc1810b7b7", "committedDate": "2020-08-14T13:26:18Z", "message": "Update snapshots"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8066d85823026b14520916bb5267f38b63a94275", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/8066d85823026b14520916bb5267f38b63a94275", "committedDate": "2020-08-14T14:26:24Z", "message": "Do not display initital role in user create role select and add role desc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY4NDE2NDQw", "url": "https://github.com/Graylog2/graylog2-server/pull/8803#pullrequestreview-468416440", "createdAt": "2020-08-17T12:26:48Z", "commit": {"oid": "e0f2c10d310cc1c18070f9f9f317989ab3686fe5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxMjoyNjo0OVrOHBmnzQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxMjoyNjo0OVrOHBmnzQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTQ0MzQwNQ==", "bodyText": "We only wanted to remove the client address if the user was not logged in.", "url": "https://github.com/Graylog2/graylog2-server/pull/8803#discussion_r471443405", "createdAt": "2020-08-17T12:26:49Z", "author": {"login": "kmerz"}, "path": "graylog2-web-interface/src/components/users/UsersOverview/UserOverviewItem/LoggedInCell.jsx", "diffHunk": "@@ -20,19 +19,22 @@ const Td: StyledComponent<{}, ThemeInterface, HTMLTableCellElement> = styled.td`\n   text-align: right;\n `;\n \n-const LoggedInCell = ({ lastActivity, clientAddress, sessionActive }: Props) => (\n+const LoggedInInfo = ({ lastActivity }: { lastActivity: $PropertyType<UserOverview, 'lastActivity'> }) => (\n+  <OverlayTrigger trigger={['hover', 'focus']}\n+                  placement=\"right\"\n+                  overlay={(\n+                    <Popover id=\"session-badge-details\" title=\"Logged in\">\n+                      <div>Last activity: {lastActivity ? <Timestamp dateTime={lastActivity} relative /> : '-'}</div>\n+                    </Popover>\n+                  )}\n+                  rootClose>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e0f2c10d310cc1c18070f9f9f317989ab3686fe5"}, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY4NDE3MjMw", "url": "https://github.com/Graylog2/graylog2-server/pull/8803#pullrequestreview-468417230", "createdAt": "2020-08-17T12:28:02Z", "commit": {"oid": "e0f2c10d310cc1c18070f9f9f317989ab3686fe5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxMjoyODowMlrOHBmqQA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxMjoyODowMlrOHBmqQA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTQ0NDAzMg==", "bodyText": "And we still want to show the pop over but only then with the info: \"Not logged in\"", "url": "https://github.com/Graylog2/graylog2-server/pull/8803#discussion_r471444032", "createdAt": "2020-08-17T12:28:02Z", "author": {"login": "kmerz"}, "path": "graylog2-web-interface/src/components/users/UsersOverview/UserOverviewItem/LoggedInCell.jsx", "diffHunk": "@@ -20,19 +19,22 @@ const Td: StyledComponent<{}, ThemeInterface, HTMLTableCellElement> = styled.td`\n   text-align: right;\n `;\n \n-const LoggedInCell = ({ lastActivity, clientAddress, sessionActive }: Props) => (\n+const LoggedInInfo = ({ lastActivity }: { lastActivity: $PropertyType<UserOverview, 'lastActivity'> }) => (\n+  <OverlayTrigger trigger={['hover', 'focus']}\n+                  placement=\"right\"\n+                  overlay={(\n+                    <Popover id=\"session-badge-details\" title=\"Logged in\">\n+                      <div>Last activity: {lastActivity ? <Timestamp dateTime={lastActivity} relative /> : '-'}</div>\n+                    </Popover>\n+                  )}\n+                  rootClose>\n+    <LoggedInIcon active />\n+  </OverlayTrigger>\n+);\n+\n+const LoggedInCell = ({ lastActivity, sessionActive }: Props) => (\n   <Td>\n-    <OverlayTrigger trigger={['hover', 'focus']}\n-                    placement=\"right\"\n-                    overlay={(\n-                      <Popover id=\"session-badge-details\" title={sessionActive ? 'Logged in' : 'Logged out'}>\n-                        <div>Last activity: {lastActivity ? <Timestamp dateTime={lastActivity} relative /> : '-'}</div>\n-                        <div>Client address: {clientAddress ?? '-'}</div>\n-                      </Popover>\n-                    )}\n-                    rootClose>\n-      <LoggedInIcon active={sessionActive} />\n-    </OverlayTrigger>\n+    {sessionActive ? <LoggedInInfo lastActivity={lastActivity} /> : <LoggedInIcon active={false} />}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e0f2c10d310cc1c18070f9f9f317989ab3686fe5"}, "originalPosition": 39}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY4NDE4NzIy", "url": "https://github.com/Graylog2/graylog2-server/pull/8803#pullrequestreview-468418722", "createdAt": "2020-08-17T12:30:20Z", "commit": {"oid": "8066d85823026b14520916bb5267f38b63a94275"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "505caff4a969fcfca495efc7e320677f7685186f", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/505caff4a969fcfca495efc7e320677f7685186f", "committedDate": "2020-08-17T13:36:28Z", "message": "Reimplement popover for logged in icon"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY5MjgzMTkx", "url": "https://github.com/Graylog2/graylog2-server/pull/8803#pullrequestreview-469283191", "createdAt": "2020-08-18T11:36:13Z", "commit": {"oid": "505caff4a969fcfca495efc7e320677f7685186f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2831, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}