{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc5MDM4Mzc1", "number": 7539, "title": "Add 200ms delay for displaying loading spinner", "bodyText": "This PR adds a 200ms delay for displaying the loading spinner to improve the look and feel.\nThe idea:\nEverything that loads faster than 200ms does not need a loading spinner. When something takes longer than 200ms to load, the user will not really see the delay, because it is so short.\nI've already created a PR for this change in the past (#6868), but did not managed to merge it before the release testing phase. I've decided to create a new, fresh PR, due to the amount and type of changes we've made since I've created the first PR.\nPlease have a look at the related PR in the enterprise repo, we need to merge the enterprise PR first.", "createdAt": "2020-02-24T15:03:53Z", "url": "https://github.com/Graylog2/graylog2-server/pull/7539", "merged": true, "mergeCommit": {"oid": "1533a81c4e9c5f4c377afeb662872c8d90ba7a5a"}, "closed": true, "closedAt": "2020-03-03T16:42:55Z", "author": {"login": "linuspahl"}, "timelineItems": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcH2rlhAFqTM2NDM1ODY5NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcKFF91AFqTM2ODE0MTc2Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0MzU4Njk0", "url": "https://github.com/Graylog2/graylog2-server/pull/7539#pullrequestreview-364358694", "createdAt": "2020-02-25T18:46:02Z", "commit": {"oid": "29ccfb5a26b8a2e3392ddf02934c545a80ea1579"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxODo0NjowMlrOFuQzCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxODo0NjowMlrOFuQzCg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDA1NDAyNg==", "bodyText": "Should we have a test for the delay?", "url": "https://github.com/Graylog2/graylog2-server/pull/7539#discussion_r384054026", "createdAt": "2020-02-25T18:46:02Z", "author": {"login": "kyleknighted"}, "path": "graylog2-web-interface/src/components/common/Spinner.test.jsx", "diffHunk": "@@ -1,17 +1,21 @@\n import React from 'react';\n-import { mount } from 'wrappedEnzyme';\n+import { render, cleanup } from 'wrappedTestingLibrary';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "29ccfb5a26b8a2e3392ddf02934c545a80ea1579"}, "originalPosition": 3}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "29ccfb5a26b8a2e3392ddf02934c545a80ea1579", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/29ccfb5a26b8a2e3392ddf02934c545a80ea1579", "committedDate": "2020-02-24T15:07:35Z", "message": "Remove not needed snpshot"}, "afterCommit": {"oid": "5652cddec0ecae7417dc3cbf717ebc1c58057341", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/5652cddec0ecae7417dc3cbf717ebc1c58057341", "committedDate": "2020-02-28T09:58:33Z", "message": "Remove inexact spinner prop handling"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2Mjk2MTI3", "url": "https://github.com/Graylog2/graylog2-server/pull/7539#pullrequestreview-366296127", "createdAt": "2020-02-28T10:26:15Z", "commit": {"oid": "3ca8430867d6785ef3032bbe2d4623ff13fe8580"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQxMDoyNjoxNlrOFvwOZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQxMDoyNjoxNlrOFvwOZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTYxNzUxMA==", "bodyText": "I had a problem with the usage of {...props} or in my case {...rest} and replaced it with some specific props and prop definitions. i hope I found every use case, so far I only found pulse and fixedWidth", "url": "https://github.com/Graylog2/graylog2-server/pull/7539#discussion_r385617510", "createdAt": "2020-02-28T10:26:16Z", "author": {"login": "linuspahl"}, "path": "graylog2-web-interface/src/components/common/Spinner.jsx", "diffHunk": "@@ -1,22 +1,62 @@\n-import React from 'react';\n+// @flow strict\n+import React, { useState, useEffect } from 'react';\n import PropTypes from 'prop-types';\n+import styled, { type StyledComponent } from 'styled-components';\n \n import Icon from './Icon';\n \n+const Wrapper: StyledComponent<{ visible: boolean }, {}, HTMLSpanElement> = styled.span`\n+  visibility: ${({ visible }) => (visible ? 'visible' : 'hidden')};\n+`;\n+\n+type Props = {\n+  delay?: number,\n+  fixedWidth?: boolean,\n+  name?: string,\n+  pulse: boolean,\n+  text?: string,\n+}\n+\n /**\n  * Simple spinner to use while waiting for something to load.\n  */\n-const Spinner = ({ name, text, ...props }) => <span><Icon name={name} spin {...props} /> {text}</span>;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ca8430867d6785ef3032bbe2d4623ff13fe8580"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MzU0ODE5", "url": "https://github.com/Graylog2/graylog2-server/pull/7539#pullrequestreview-366354819", "createdAt": "2020-02-28T12:13:23Z", "commit": {"oid": "3ca8430867d6785ef3032bbe2d4623ff13fe8580"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "abffd187a56181c70acef4c69db1e4473ab6111c", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/abffd187a56181c70acef4c69db1e4473ab6111c", "committedDate": "2020-02-28T12:55:15Z", "message": "Disable Spinner delay for LoadingPage"}, "afterCommit": {"oid": "1646ea513f15b9c7bcdc11dfff2b124b1f6534f9", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/1646ea513f15b9c7bcdc11dfff2b124b1f6534f9", "committedDate": "2020-03-02T15:27:40Z", "message": "Disable Spinner delay for LoadingPage"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1646ea513f15b9c7bcdc11dfff2b124b1f6534f9", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/1646ea513f15b9c7bcdc11dfff2b124b1f6534f9", "committedDate": "2020-03-02T15:27:40Z", "message": "Disable Spinner delay for LoadingPage"}, "afterCommit": {"oid": "ae745d79bd98f2fe1b494f84e2f2f45814136678", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/ae745d79bd98f2fe1b494f84e2f2f45814136678", "committedDate": "2020-03-03T14:40:00Z", "message": "Disable Spinner delay for LoadingPage"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9913a0b3e05d926ed017dcf6e0cd08054588c36e", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/9913a0b3e05d926ed017dcf6e0cd08054588c36e", "committedDate": "2020-03-03T14:41:03Z", "message": "Add 200ms delay for displaying loading spinner"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bcaebb9f2375ac73c175fbc69999843d69f7c6a8", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/bcaebb9f2375ac73c175fbc69999843d69f7c6a8", "committedDate": "2020-03-03T14:41:03Z", "message": "Transform Spinner test to @testing-library/react test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "976ada1191aa76a8237ffb8cde355d33f98b53e2", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/976ada1191aa76a8237ffb8cde355d33f98b53e2", "committedDate": "2020-03-03T14:41:03Z", "message": "Use flow strict for Spinner component"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ed58283178da651b87f19b2c236d26d2a8c9e45", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/9ed58283178da651b87f19b2c236d26d2a8c9e45", "committedDate": "2020-03-03T14:41:03Z", "message": "Remove not needed snpshot"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d7b20f5149eadf4b49bbd9347dad06402d5c9025", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/d7b20f5149eadf4b49bbd9347dad06402d5c9025", "committedDate": "2020-03-03T14:41:03Z", "message": "Remove inexact spinner prop handling"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b3744ee05586d39b0ad0ebeddd6efa705ff14a2", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/6b3744ee05586d39b0ad0ebeddd6efa705ff14a2", "committedDate": "2020-03-03T14:41:03Z", "message": "Add tests for Spinner delay"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c07ddf8849f1331fcd7bbefd24be8263167c2b85", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/c07ddf8849f1331fcd7bbefd24be8263167c2b85", "committedDate": "2020-03-03T14:41:03Z", "message": "Refactor styled component type definition"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "883462b7e8cd441ed1b5992440cfd8c1f894002b", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/883462b7e8cd441ed1b5992440cfd8c1f894002b", "committedDate": "2020-03-03T14:41:03Z", "message": "Fix linting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d4ff5a6937adcfe64386c25aecc271b12e7c17b9", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/d4ff5a6937adcfe64386c25aecc271b12e7c17b9", "committedDate": "2020-03-03T14:41:03Z", "message": "Update snapshots"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "da45ffeff578e9dac75cf5e8f8f38a96c4ad1a65", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/da45ffeff578e9dac75cf5e8f8f38a96c4ad1a65", "committedDate": "2020-03-03T14:42:48Z", "message": "Disable Spinner delay for LoadingPage"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ae745d79bd98f2fe1b494f84e2f2f45814136678", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/ae745d79bd98f2fe1b494f84e2f2f45814136678", "committedDate": "2020-03-03T14:40:00Z", "message": "Disable Spinner delay for LoadingPage"}, "afterCommit": {"oid": "da45ffeff578e9dac75cf5e8f8f38a96c4ad1a65", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/da45ffeff578e9dac75cf5e8f8f38a96c4ad1a65", "committedDate": "2020-03-03T14:42:48Z", "message": "Disable Spinner delay for LoadingPage"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4MTM5NTIx", "url": "https://github.com/Graylog2/graylog2-server/pull/7539#pullrequestreview-368139521", "createdAt": "2020-03-03T16:38:47Z", "commit": {"oid": "da45ffeff578e9dac75cf5e8f8f38a96c4ad1a65"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4MTQxNzY2", "url": "https://github.com/Graylog2/graylog2-server/pull/7539#pullrequestreview-368141766", "createdAt": "2020-03-03T16:41:22Z", "commit": {"oid": "da45ffeff578e9dac75cf5e8f8f38a96c4ad1a65"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2647, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}