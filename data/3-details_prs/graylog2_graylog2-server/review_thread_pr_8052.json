{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE0MDg3ODcx", "number": 8052, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxMjo0OTo0NlrOD6O6TQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxMDo0MTozNFrOD7l9gw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYyMzg4MzAxOnYy", "diffSide": "RIGHT", "path": "graylog2-web-interface/src/components/common/SearchForm.jsx", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxMjo0OTo0NlrOGR88Pw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxNToxNToxMVrOGTg3mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTQ3NzQzOQ==", "bodyText": "Don't we only need to do * as when it's Flowtyped?", "url": "https://github.com/Graylog2/graylog2-server/pull/8052#discussion_r421477439", "createdAt": "2020-05-07T12:49:46Z", "author": {"login": "kyleknighted"}, "path": "graylog2-web-interface/src/components/common/SearchForm.jsx", "diffHunk": "@@ -1,5 +1,5 @@\n import PropTypes from 'prop-types';\n-import React from 'react';\n+import * as React from 'react';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "80f59f88fb08c28bd8036eafd93a0661638f5609"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzExNDY1MQ==", "bodyText": "It is not required to add * as when using flow, but for a few weeks I also prefer importing React this way, because we can be sure React contains all exports and not only default.", "url": "https://github.com/Graylog2/graylog2-server/pull/8052#discussion_r423114651", "createdAt": "2020-05-11T15:15:11Z", "author": {"login": "linuspahl"}, "path": "graylog2-web-interface/src/components/common/SearchForm.jsx", "diffHunk": "@@ -1,5 +1,5 @@\n import PropTypes from 'prop-types';\n-import React from 'react';\n+import * as React from 'react';", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTQ3NzQzOQ=="}, "originalCommit": {"oid": "80f59f88fb08c28bd8036eafd93a0661638f5609"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYyMzg4OTY1OnYy", "diffSide": "RIGHT", "path": "graylog2-web-interface/src/components/common/SearchForm.jsx", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxMjo1MToyN1rOGR9AbQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxMjo1MToyN1rOGR9AbQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTQ3ODUwOQ==", "bodyText": "What's your feeling on using React's createRef?", "url": "https://github.com/Graylog2/graylog2-server/pull/8052#discussion_r421478509", "createdAt": "2020-05-07T12:51:27Z", "author": {"login": "kyleknighted"}, "path": "graylog2-web-interface/src/components/common/SearchForm.jsx", "diffHunk": "@@ -162,6 +171,7 @@ class SearchForm extends React.Component {\n           <div className=\"form-group has-feedback\">\n             {this.props.label && <label htmlFor=\"common-search-form-query-input\" className=\"control-label\">{this.props.label}</label>}\n             <input id=\"common-search-form-query-input\"\n+                   ref={(ref) => { this.searchInput = ref; }}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "80f59f88fb08c28bd8036eafd93a0661638f5609"}, "originalPosition": 41}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYyMzg5MjI1OnYy", "diffSide": "RIGHT", "path": "graylog2-web-interface/src/components/common/SearchForm.jsx", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxMjo1MjowN1rOGR9CHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxMjo1MjowN1rOGR9CHA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTQ3ODk0MA==", "bodyText": "What is the : void for?", "url": "https://github.com/Graylog2/graylog2-server/pull/8052#discussion_r421478940", "createdAt": "2020-05-07T12:52:07Z", "author": {"login": "kyleknighted"}, "path": "graylog2-web-interface/src/components/common/SearchForm.jsx", "diffHunk": "@@ -93,13 +94,21 @@ class SearchForm extends React.Component {\n     loadingLabel: 'Loading...',\n     queryHelpComponent: null,\n     children: null,\n+    focusAfterMount: false,\n   };\n \n   state = {\n     query: this.props.query,\n     isLoading: false,\n   };\n \n+  componentDidMount(): void {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "80f59f88fb08c28bd8036eafd93a0661638f5609"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzODExODA0OnYy", "diffSide": "RIGHT", "path": "graylog2-web-interface/src/views/components/searchbar/saved-search/SavedSearchList.jsx", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxMDozMzoxNFrOGUAbOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxMzo1MzozOVrOGW4NaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzYzMTY3NQ==", "bodyText": "Looks like this comment is not required", "url": "https://github.com/Graylog2/graylog2-server/pull/8052#discussion_r423631675", "createdAt": "2020-05-12T10:33:14Z", "author": {"login": "linuspahl"}, "path": "graylog2-web-interface/src/views/components/searchbar/saved-search/SavedSearchList.jsx", "diffHunk": "@@ -2,6 +2,7 @@\n import React from 'react';\n import PropTypes from 'prop-types';\n import { browserHistory } from 'react-router';\n+// $FlowFixMe should be there", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7954bbcb8123d27f600cf4ada26f1d3c4ccb35eb"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjY0Mjc5Mw==", "bodyText": "Well my flow does say something else \ud83e\udd37", "url": "https://github.com/Graylog2/graylog2-server/pull/8052#discussion_r426642793", "createdAt": "2020-05-18T13:53:39Z", "author": {"login": "kmerz"}, "path": "graylog2-web-interface/src/views/components/searchbar/saved-search/SavedSearchList.jsx", "diffHunk": "@@ -2,6 +2,7 @@\n import React from 'react';\n import PropTypes from 'prop-types';\n import { browserHistory } from 'react-router';\n+// $FlowFixMe should be there", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzYzMTY3NQ=="}, "originalCommit": {"oid": "7954bbcb8123d27f600cf4ada26f1d3c4ccb35eb"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzODEzNjU2OnYy", "diffSide": "RIGHT", "path": "graylog2-web-interface/src/views/components/searchbar/saved-search/SavedSearchList.jsx", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxMDozODo1NVrOGUAm5A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxMDozODo1NVrOGUAm5A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzYzNDY2MA==", "bodyText": "I see that we are using the * for other component type definitions in this file, but I would prefer HTMLSpanElement.", "url": "https://github.com/Graylog2/graylog2-server/pull/8052#discussion_r423634660", "createdAt": "2020-05-12T10:38:55Z", "author": {"login": "linuspahl"}, "path": "graylog2-web-interface/src/views/components/searchbar/saved-search/SavedSearchList.jsx", "diffHunk": "@@ -39,6 +40,12 @@ const NoSavedSearches: StyledComponent<{}, ThemeInterface, *> = styled(Alert)`\n   align-items: center;\n `;\n \n+const DeleteButton: StyledComponent<{}, ThemeInterface, *> = styled.span`", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7954bbcb8123d27f600cf4ada26f1d3c4ccb35eb"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzODE0NTMxOnYy", "diffSide": "RIGHT", "path": "graylog2-web-interface/src/views/components/searchbar/saved-search/SavedSearchList.jsx", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxMDo0MTozNFrOGUAshg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxMzo1NDo1M1rOGW4Q4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzYzNjEwMg==", "bodyText": "The DeleteButton can't be accessed with the keyboard right now. Maybe we can use the IconButton in the future instead. #8064", "url": "https://github.com/Graylog2/graylog2-server/pull/8052#discussion_r423636102", "createdAt": "2020-05-12T10:41:34Z", "author": {"login": "linuspahl"}, "path": "graylog2-web-interface/src/views/components/searchbar/saved-search/SavedSearchList.jsx", "diffHunk": "@@ -117,11 +127,19 @@ class SavedSearchList extends React.Component<Props, State> {\n     const { selectedSavedSearch } = this.state;\n     const savedSearchList = (views.list || []).map((savedSearch) => {\n       return (\n-        <ListGroupItem active={selectedSavedSearch === savedSearch.id}\n-                       onClick={() => this.setState({ selectedSavedSearch: savedSearch.id })}\n-                       key={savedSearch.id}>\n-          {savedSearch.title}\n-        </ListGroupItem>\n+        <ViewLoaderContext.Consumer key={savedSearch.id}>\n+          {(loaderFunc) => (\n+            <ListGroupItem active={selectedSavedSearch === savedSearch.id}\n+                           onClick={() => this.onLoad(savedSearch.id, loaderFunc)}>\n+              {savedSearch.title}\n+              <span>\n+                <DeleteButton bsSize=\"xsmall\" bsStyle=\"danger\" onClick={(e) => this.onDelete(e, savedSearch.id)}>\n+                  <Icon name=\"trash\" ttile=\"Delete\" data-testid={`delete-${savedSearch.id}`} />\n+                </DeleteButton>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7954bbcb8123d27f600cf4ada26f1d3c4ccb35eb"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjY0MzY4MA==", "bodyText": "When the future is ready, so am I ;)", "url": "https://github.com/Graylog2/graylog2-server/pull/8052#discussion_r426643680", "createdAt": "2020-05-18T13:54:53Z", "author": {"login": "kmerz"}, "path": "graylog2-web-interface/src/views/components/searchbar/saved-search/SavedSearchList.jsx", "diffHunk": "@@ -117,11 +127,19 @@ class SavedSearchList extends React.Component<Props, State> {\n     const { selectedSavedSearch } = this.state;\n     const savedSearchList = (views.list || []).map((savedSearch) => {\n       return (\n-        <ListGroupItem active={selectedSavedSearch === savedSearch.id}\n-                       onClick={() => this.setState({ selectedSavedSearch: savedSearch.id })}\n-                       key={savedSearch.id}>\n-          {savedSearch.title}\n-        </ListGroupItem>\n+        <ViewLoaderContext.Consumer key={savedSearch.id}>\n+          {(loaderFunc) => (\n+            <ListGroupItem active={selectedSavedSearch === savedSearch.id}\n+                           onClick={() => this.onLoad(savedSearch.id, loaderFunc)}>\n+              {savedSearch.title}\n+              <span>\n+                <DeleteButton bsSize=\"xsmall\" bsStyle=\"danger\" onClick={(e) => this.onDelete(e, savedSearch.id)}>\n+                  <Icon name=\"trash\" ttile=\"Delete\" data-testid={`delete-${savedSearch.id}`} />\n+                </DeleteButton>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzYzNjEwMg=="}, "originalCommit": {"oid": "7954bbcb8123d27f600cf4ada26f1d3c4ccb35eb"}, "originalPosition": 52}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4269, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}