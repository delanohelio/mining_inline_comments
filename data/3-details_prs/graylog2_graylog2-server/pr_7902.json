{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA1MTAwMDY0", "number": 7902, "title": "Add option to enable/disable event definitions", "bodyText": "This PR introduces the possibility to enable and disable event definitions. This can be done by using the actions menu for an event definition in the overview or by editing an event definition and using the \"Enable scheduling\" checkbox.\nThis PR also adds some detailed scheduling information for each event definition in the overview.\nFixes #7497", "createdAt": "2020-04-17T12:19:31Z", "url": "https://github.com/Graylog2/graylog2-server/pull/7902", "merged": true, "mergeCommit": {"oid": "5cffc4d32bc1adea261fac833337178855a3a7b2"}, "closed": true, "closedAt": "2020-04-30T13:17:36Z", "author": {"login": "bernd"}, "timelineItems": {"totalCount": 28, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcYdCwFgH2gAyNDA1MTAwMDY0OmVjNTBhMWRhZGY4ZmM3OWM4MGVlMWIyNzlhZjMwMjM0YTNkMjk5ZjQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABccskb9gFqTQwMzQ4NzgxNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ec50a1dadf8fc79c80ee1b279af30234a3d299f4", "author": {"user": {"login": "bernd", "name": "Bernd Ahlers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/ec50a1dadf8fc79c80ee1b279af30234a3d299f4", "committedDate": "2020-04-17T08:30:31Z", "message": "Split up EventDefinitionHandler code into smaller methods\n\nThis should make it a bit easier to reason about the behavior."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e525bf354fb3ca9ac12788d2a58d5d13af22151e", "author": {"user": {"login": "bernd", "name": "Bernd Ahlers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/e525bf354fb3ca9ac12788d2a58d5d13af22151e", "committedDate": "2020-04-17T12:13:11Z", "message": "Add #schedule() and #unschedule() methods to EventDefinitionHandler\n\nFixes #7497"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b4dca087646914bcf20f8f196695215259bf016b", "author": {"user": {"login": "bernd", "name": "Bernd Ahlers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/b4dca087646914bcf20f8f196695215259bf016b", "committedDate": "2020-04-20T14:38:18Z", "message": "Don't log an error if \"releaseTrigger\" doesn't do anything\n\nThis can happen if a trigger gets removed while a job is running. (e.g.\ndisable scheduling of a job)\nWe also don't check this in other places."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a45cb35a8597cd66535f5cd4caed65e1f224bb55", "author": {"user": {"login": "bernd", "name": "Bernd Ahlers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/a45cb35a8597cd66535f5cd4caed65e1f224bb55", "committedDate": "2020-04-20T14:40:02Z", "message": "Add EventDefinitionHanlder#createWithoutSchedule"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ad0d924911534038b844a790bd22b40bbbabe968", "author": {"user": {"login": "bernd", "name": "Bernd Ahlers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/ad0d924911534038b844a790bd22b40bbbabe968", "committedDate": "2020-04-20T15:15:42Z", "message": "Allow conditional scheduling for event definitions in content packs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa90d785e8ff3af42ff3419604c7b651ea68e8c1", "author": {"user": {"login": "bernd", "name": "Bernd Ahlers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/aa90d785e8ff3af42ff3419604c7b651ea68e8c1", "committedDate": "2020-04-20T18:06:49Z", "message": "Add optional context to PaginatedResponse"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fc348315df97b5352decd2e026537228ca9e3dfa", "author": {"user": {"login": "bernd", "name": "Bernd Ahlers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/fc348315df97b5352decd2e026537228ca9e3dfa", "committedDate": "2020-04-21T18:22:35Z", "message": "Add getAllByConfigField to DBJobDefinitionService"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "490c96660c0afc760973fd0f79a399d2a7fd1ef9", "author": {"user": {"login": "bernd", "name": "Bernd Ahlers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/490c96660c0afc760973fd0f79a399d2a7fd1ef9", "committedDate": "2020-04-22T11:11:25Z", "message": "Add DBJobTriggerService#getForJobs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "743c13d6eaf5e21c18f037db10635cd779a6ab02", "author": {"user": {"login": "bernd", "name": "Bernd Ahlers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/743c13d6eaf5e21c18f037db10635cd779a6ab02", "committedDate": "2020-04-22T12:20:24Z", "message": "Add missing license"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "36e9a3eeeb4497aff2f5e5bef1021604669ef065", "author": {"user": {"login": "bernd", "name": "Bernd Ahlers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/36e9a3eeeb4497aff2f5e5bef1021604669ef065", "committedDate": "2020-04-22T12:32:21Z", "message": "Add option to enable/disable event definitions and show scheduler info\n\nFixes #7497"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c67c03b1aa55b14647bddf0514fc55453e9e6b5b", "author": {"user": {"login": "bernd", "name": "Bernd Ahlers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/c67c03b1aa55b14647bddf0514fc55453e9e6b5b", "committedDate": "2020-04-27T07:55:12Z", "message": "Merge branch 'master' into issue-7497"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2672eb1a0edb6c7b1eecc8da35f04ce0ed168f97", "author": {"user": {"login": "bernd", "name": "Bernd Ahlers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/2672eb1a0edb6c7b1eecc8da35f04ce0ed168f97", "committedDate": "2020-04-27T16:37:05Z", "message": "Make it possible to create/update event definitions without scheduling"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "54c0f78a8e5c487b025608f57cbd798b52ea4e84", "author": {"user": {"login": "bernd", "name": "Bernd Ahlers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/54c0f78a8e5c487b025608f57cbd798b52ea4e84", "committedDate": "2020-04-27T16:37:47Z", "message": "Add checkbox to enable/disable scheduling in event definition forms"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e8b47338403bb6cd33406114feb45d02164a6fa3", "author": {"user": {"login": "bernd", "name": "Bernd Ahlers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/e8b47338403bb6cd33406114feb45d02164a6fa3", "committedDate": "2020-04-28T08:28:34Z", "message": "Merge remote-tracking branch 'origin/master' into issue-7497"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyMDAyOTA3", "url": "https://github.com/Graylog2/graylog2-server/pull/7902#pullrequestreview-402002907", "createdAt": "2020-04-28T16:21:10Z", "commit": {"oid": "e8b47338403bb6cd33406114feb45d02164a6fa3"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "92b1135d27c02e52b27f8d63b91dda7dd238b18e", "author": {"user": {"login": "bernd", "name": "Bernd Ahlers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/92b1135d27c02e52b27f8d63b91dda7dd238b18e", "committedDate": "2020-04-29T07:33:20Z", "message": "Show scheduling status in edit summary"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyNDczMjYy", "url": "https://github.com/Graylog2/graylog2-server/pull/7902#pullrequestreview-402473262", "createdAt": "2020-04-29T08:47:52Z", "commit": {"oid": "92b1135d27c02e52b27f8d63b91dda7dd238b18e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQwODo0Nzo1MlrOGN1akQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQwODo0Nzo1MlrOGN1akQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzE1OTgyNQ==", "bodyText": "A short javadoc about what this class does would be nice", "url": "https://github.com/Graylog2/graylog2-server/pull/7902#discussion_r417159825", "createdAt": "2020-04-29T08:47:52Z", "author": {"login": "mpfz0r"}, "path": "graylog2-server/src/main/java/org/graylog/events/context/EventDefinitionContextService.java", "diffHunk": "@@ -0,0 +1,146 @@\n+/**\n+ * This file is part of Graylog.\n+ *\n+ * Graylog is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Graylog is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Graylog.  If not, see <http://www.gnu.org/licenses/>.\n+ */\n+package org.graylog.events.context;\n+\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+import com.google.auto.value.AutoValue;\n+import com.google.common.collect.ImmutableMap;\n+import org.graylog.events.processor.EventDefinitionDto;\n+import org.graylog.events.processor.EventProcessorExecutionJob;\n+import org.graylog.scheduler.DBJobDefinitionService;\n+import org.graylog.scheduler.DBJobTriggerService;\n+import org.graylog.scheduler.JobDefinitionDto;\n+import org.graylog.scheduler.JobTriggerData;\n+import org.graylog.scheduler.JobTriggerDto;\n+import org.graylog.scheduler.JobTriggerStatus;\n+import org.joda.time.DateTime;\n+\n+import javax.inject.Inject;\n+import java.util.Collection;\n+import java.util.Collections;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Optional;\n+import java.util.Set;\n+import java.util.stream.Collectors;\n+\n+public class EventDefinitionContextService {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "92b1135d27c02e52b27f8d63b91dda7dd238b18e"}, "originalPosition": 41}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyNDc1Njk4", "url": "https://github.com/Graylog2/graylog2-server/pull/7902#pullrequestreview-402475698", "createdAt": "2020-04-29T08:51:10Z", "commit": {"oid": "92b1135d27c02e52b27f8d63b91dda7dd238b18e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQwODo1MToxMFrOGN1iSg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQwODo1MToxMFrOGN1iSg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzE2MTgwMg==", "bodyText": "Just an idea. If we use Serializable instead, it would be clearer that this is meant to\nbe sent out as a response..\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public ImmutableMap<String, Object> contextFor(List<EventDefinitionDto> eventDefinitions) {\n          \n          \n            \n                public ImmutableMap<String, Serializable> contextFor(List<EventDefinitionDto> eventDefinitions) {", "url": "https://github.com/Graylog2/graylog2-server/pull/7902#discussion_r417161802", "createdAt": "2020-04-29T08:51:10Z", "author": {"login": "mpfz0r"}, "path": "graylog2-server/src/main/java/org/graylog/events/context/EventDefinitionContextService.java", "diffHunk": "@@ -0,0 +1,146 @@\n+/**\n+ * This file is part of Graylog.\n+ *\n+ * Graylog is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Graylog is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Graylog.  If not, see <http://www.gnu.org/licenses/>.\n+ */\n+package org.graylog.events.context;\n+\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+import com.google.auto.value.AutoValue;\n+import com.google.common.collect.ImmutableMap;\n+import org.graylog.events.processor.EventDefinitionDto;\n+import org.graylog.events.processor.EventProcessorExecutionJob;\n+import org.graylog.scheduler.DBJobDefinitionService;\n+import org.graylog.scheduler.DBJobTriggerService;\n+import org.graylog.scheduler.JobDefinitionDto;\n+import org.graylog.scheduler.JobTriggerData;\n+import org.graylog.scheduler.JobTriggerDto;\n+import org.graylog.scheduler.JobTriggerStatus;\n+import org.joda.time.DateTime;\n+\n+import javax.inject.Inject;\n+import java.util.Collection;\n+import java.util.Collections;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Optional;\n+import java.util.Set;\n+import java.util.stream.Collectors;\n+\n+public class EventDefinitionContextService {\n+    private final DBJobDefinitionService jobDefinitionService;\n+    private final DBJobTriggerService jobTriggerService;\n+\n+    @Inject\n+    public EventDefinitionContextService(DBJobDefinitionService jobDefinitionService, DBJobTriggerService jobTriggerService) {\n+        this.jobDefinitionService = jobDefinitionService;\n+        this.jobTriggerService = jobTriggerService;\n+    }\n+\n+    public ImmutableMap<String, Object> contextFor(List<EventDefinitionDto> eventDefinitions) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "92b1135d27c02e52b27f8d63b91dda7dd238b18e"}, "originalPosition": 51}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyNDc4MDE0", "url": "https://github.com/Graylog2/graylog2-server/pull/7902#pullrequestreview-402478014", "createdAt": "2020-04-29T08:54:17Z", "commit": {"oid": "92b1135d27c02e52b27f8d63b91dda7dd238b18e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQwODo1NDoxN1rOGN1pig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQwODo1NDoxN1rOGN1pig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzE2MzY1OA==", "bodyText": "If we want to be extra correct, we would also query for the type being EventProcessorExecutionJob.TYPE_NAME", "url": "https://github.com/Graylog2/graylog2-server/pull/7902#discussion_r417163658", "createdAt": "2020-04-29T08:54:17Z", "author": {"login": "mpfz0r"}, "path": "graylog2-server/src/main/java/org/graylog/events/context/EventDefinitionContextService.java", "diffHunk": "@@ -0,0 +1,146 @@\n+/**\n+ * This file is part of Graylog.\n+ *\n+ * Graylog is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Graylog is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Graylog.  If not, see <http://www.gnu.org/licenses/>.\n+ */\n+package org.graylog.events.context;\n+\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+import com.google.auto.value.AutoValue;\n+import com.google.common.collect.ImmutableMap;\n+import org.graylog.events.processor.EventDefinitionDto;\n+import org.graylog.events.processor.EventProcessorExecutionJob;\n+import org.graylog.scheduler.DBJobDefinitionService;\n+import org.graylog.scheduler.DBJobTriggerService;\n+import org.graylog.scheduler.JobDefinitionDto;\n+import org.graylog.scheduler.JobTriggerData;\n+import org.graylog.scheduler.JobTriggerDto;\n+import org.graylog.scheduler.JobTriggerStatus;\n+import org.joda.time.DateTime;\n+\n+import javax.inject.Inject;\n+import java.util.Collection;\n+import java.util.Collections;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Optional;\n+import java.util.Set;\n+import java.util.stream.Collectors;\n+\n+public class EventDefinitionContextService {\n+    private final DBJobDefinitionService jobDefinitionService;\n+    private final DBJobTriggerService jobTriggerService;\n+\n+    @Inject\n+    public EventDefinitionContextService(DBJobDefinitionService jobDefinitionService, DBJobTriggerService jobTriggerService) {\n+        this.jobDefinitionService = jobDefinitionService;\n+        this.jobTriggerService = jobTriggerService;\n+    }\n+\n+    public ImmutableMap<String, Object> contextFor(List<EventDefinitionDto> eventDefinitions) {\n+        return ImmutableMap.of(\"scheduler\", schedulerContext(eventDefinitions));\n+    }\n+\n+    public ImmutableMap<String, Object> contextFor(EventDefinitionDto eventDefinition) {\n+        final ImmutableMap<String, SchedulerCtx> schedulerContext = schedulerContext(Collections.singletonList(eventDefinition));\n+        return ImmutableMap.of(\"scheduler\", schedulerContext.get(eventDefinition.id()));\n+    }\n+\n+    private Map<String, List<JobDefinitionDto>> getJobDefinitions(List<EventDefinitionDto> eventDefinitions) {\n+        final Set<String> eventDefinitionIds = eventDefinitions.stream().map(EventDefinitionDto::id).collect(Collectors.toSet());\n+        return jobDefinitionService.getAllByConfigField(EventProcessorExecutionJob.Config.FIELD_EVENT_DEFINITION_ID, eventDefinitionIds);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "92b1135d27c02e52b27f8d63b91dda7dd238b18e"}, "originalPosition": 62}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "15697ebca6b2ded1c9711004eb962e310bb4afd9", "author": {"user": {"login": "bernd", "name": "Bernd Ahlers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/15697ebca6b2ded1c9711004eb962e310bb4afd9", "committedDate": "2020-04-29T13:50:23Z", "message": "Add javadoc for EventDefinitionContextService"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyNTM2MjY2", "url": "https://github.com/Graylog2/graylog2-server/pull/7902#pullrequestreview-402536266", "createdAt": "2020-04-29T10:19:19Z", "commit": {"oid": "92b1135d27c02e52b27f8d63b91dda7dd238b18e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxMDoxOToyMFrOGN4fDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxNjoxNjo0OFrOGOGk3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzIxMDEyNg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                @ApiOperation(\"Delete event definition\")\n          \n          \n            \n                @ApiOperation(\"Enable event definition\")", "url": "https://github.com/Graylog2/graylog2-server/pull/7902#discussion_r417210126", "createdAt": "2020-04-29T10:19:20Z", "author": {"login": "mpfz0r"}, "path": "graylog2-server/src/main/java/org/graylog/events/rest/EventDefinitionsResource.java", "diffHunk": "@@ -164,6 +186,24 @@ public void delete(@ApiParam(name = \"definitionId\") @PathParam(\"definitionId\") @\n         eventDefinitionHandler.delete(definitionId);\n     }\n \n+    @PUT\n+    @Path(\"{definitionId}/schedule\")\n+    @ApiOperation(\"Delete event definition\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "92b1135d27c02e52b27f8d63b91dda7dd238b18e"}, "originalPosition": 107}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzIxMDQyNQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                @ApiOperation(\"Delete event definition\")\n          \n          \n            \n                @ApiOperation(\"Disable event definition\")", "url": "https://github.com/Graylog2/graylog2-server/pull/7902#discussion_r417210425", "createdAt": "2020-04-29T10:19:59Z", "author": {"login": "mpfz0r"}, "path": "graylog2-server/src/main/java/org/graylog/events/rest/EventDefinitionsResource.java", "diffHunk": "@@ -164,6 +186,24 @@ public void delete(@ApiParam(name = \"definitionId\") @PathParam(\"definitionId\") @\n         eventDefinitionHandler.delete(definitionId);\n     }\n \n+    @PUT\n+    @Path(\"{definitionId}/schedule\")\n+    @ApiOperation(\"Delete event definition\")\n+    @AuditEvent(type = EventsAuditEventTypes.EVENT_DEFINITION_UPDATE)\n+    public void schedule(@ApiParam(name = \"definitionId\") @PathParam(\"definitionId\") @NotBlank String definitionId) {\n+        checkPermission(RestPermissions.EVENT_DEFINITIONS_EDIT, definitionId);\n+        eventDefinitionHandler.schedule(definitionId);\n+    }\n+\n+    @PUT\n+    @Path(\"{definitionId}/unschedule\")\n+    @ApiOperation(\"Delete event definition\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "92b1135d27c02e52b27f8d63b91dda7dd238b18e"}, "originalPosition": 116}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzQxMzk0Nw==", "bodyText": "Couldn't' this also be done with StreamEx like in DBJobTriggerService?\nSeems simpler", "url": "https://github.com/Graylog2/graylog2-server/pull/7902#discussion_r417413947", "createdAt": "2020-04-29T15:38:48Z", "author": {"login": "mpfz0r"}, "path": "graylog2-server/src/main/java/org/graylog/scheduler/DBJobDefinitionService.java", "diffHunk": "@@ -50,4 +58,52 @@ public DBJobDefinitionService(MongoConnection mongoConnection, MongoJackObjectMa\n         final String field = String.format(Locale.US, \"%s.%s\", JobDefinitionDto.FIELD_CONFIG, configField);\n         return Optional.ofNullable(db.findOne(DBQuery.is(field, value)));\n     }\n+\n+    /**\n+     * Returns all job definitions that have the given config field values, grouped by config field value.\n+     *\n+     * @param configField the config field\n+     * @param values      the values of the config field\n+     * @return the job definitions grouped by the given values\n+     */\n+    public Map<String, List<JobDefinitionDto>> getAllByConfigField(String configField, Collection<? extends Object> values) {\n+        final String field = String.format(Locale.US, \"%s.%s\", JobDefinitionDto.FIELD_CONFIG, configField);\n+\n+        // Use aggregation to group job definitions by each config field value\n+        // Example aggregation output:\n+        //   {\n+        //     \"config-field-value-1\": [\n+        //       {JobDefinitionDto}, {JobDefinitionDto}\n+        //      ],\n+        //     \"config-field-value-2\": [\n+        //       {JobDefinitionDto}, {JobDefinitionDto}\n+        //      ]\n+        //   }\n+        final Aggregation.Pipeline<Void> pipeline = Aggregation.match(DBQuery.in(field, values))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "92b1135d27c02e52b27f8d63b91dda7dd238b18e"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzQ0MDk4OA==", "bodyText": "How about:\n\"Should this event definition be executed?\"\nOr maybe don't use the word scheduling at all, and just call it enable/disable?", "url": "https://github.com/Graylog2/graylog2-server/pull/7902#discussion_r417440988", "createdAt": "2020-04-29T16:16:48Z", "author": {"login": "mpfz0r"}, "path": "graylog2-web-interface/src/components/event-definitions/event-definition-types/FilterForm.jsx", "diffHunk": "@@ -295,6 +295,13 @@ class FilterForm extends React.Component {\n             <HelpBlock>{lodash.get(validation, 'errors.execute_every_ms[0]')}</HelpBlock>\n           )}\n         </FormGroup>\n+        <Input id=\"schedule-checkbox\"\n+               type=\"checkbox\"\n+               name=\"_is_scheduled\"\n+               label=\"Enable scheduling\"\n+               help=\"Whether scheduling for this event definition should be enabled?\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "92b1135d27c02e52b27f8d63b91dda7dd238b18e"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "495a809bc7d23fbad6797898ba6263771f5839e8", "author": {"user": {"login": "bernd", "name": "Bernd Ahlers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/495a809bc7d23fbad6797898ba6263771f5839e8", "committedDate": "2020-04-29T16:39:51Z", "message": "Update graylog2-server/src/main/java/org/graylog/events/rest/EventDefinitionsResource.java\n\nCo-Authored-By: Marco Pfatschbacher <marco@graylog.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1cc4a93a355539fba3196e8ca0d55b10e0fa7abc", "author": {"user": {"login": "bernd", "name": "Bernd Ahlers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/1cc4a93a355539fba3196e8ca0d55b10e0fa7abc", "committedDate": "2020-04-29T16:40:10Z", "message": "Update graylog2-server/src/main/java/org/graylog/events/rest/EventDefinitionsResource.java\n\nCo-Authored-By: Marco Pfatschbacher <marco@graylog.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "263eb50e65bced11cc9392c061794a28253933b5", "author": {"user": {"login": "bernd", "name": "Bernd Ahlers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/263eb50e65bced11cc9392c061794a28253933b5", "committedDate": "2020-04-29T17:18:00Z", "message": "Simplify DBJobDefinitionService#getAllByConfigField\n\nUse StreamEx instead of a MongoDB aggregation."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e7916640684a95df0efcde1ea9f41c9d7ac90070", "author": {"user": {"login": "bernd", "name": "Bernd Ahlers"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/e7916640684a95df0efcde1ea9f41c9d7ac90070", "committedDate": "2020-04-29T17:26:34Z", "message": "Wording"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7beb404c5ee538b5d2a075ac053dd471b48bbecd", "author": {"user": {"login": "mpfz0r", "name": "Marco Pfatschbacher"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/7beb404c5ee538b5d2a075ac053dd471b48bbecd", "committedDate": "2020-04-30T10:50:14Z", "message": "Allow isScheduled to be used with content pack parameters"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e0581c94421d7aef159614f02160ba004ed4202a", "author": {"user": {"login": "mpfz0r", "name": "Marco Pfatschbacher"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/e0581c94421d7aef159614f02160ba004ed4202a", "committedDate": "2020-04-30T11:52:48Z", "message": "Merge remote-tracking branch 'origin/master' into issue-7497"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAzNDg3ODE3", "url": "https://github.com/Graylog2/graylog2-server/pull/7902#pullrequestreview-403487817", "createdAt": "2020-04-30T12:51:35Z", "commit": {"oid": "e0581c94421d7aef159614f02160ba004ed4202a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2389, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}