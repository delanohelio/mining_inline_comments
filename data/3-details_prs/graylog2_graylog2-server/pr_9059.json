{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk0ODkxNzEx", "number": 9059, "title": "Add error prop for `Input` to be able to display an error message together with the input help text", "bodyText": "Description\nMotivation and Context\nThe Input component currently allows defining a help text. We are also using this prop to display errors for an input. This way we always hide the help text when want to display an error. There are many cases where the help text is especially helpful when there is an error.\nWith this PR we are adding an extra error prop to be able to display both messages at the same time.\nThis change does not affect the current usage. I already adjusted the ContentPackSelect to demonstrate how to apply the change for existing components.\n/jenkins-pr-deps Graylog2/graylog-plugin-enterprise#1790\nTypes of changes\n\n\n Bug fix (non-breaking change which fixes an issue)\n New feature (non-breaking change which adds functionality)\n Refactoring (non-breaking change)\n Breaking change (fix or feature that would cause existing functionality to change)\n\nChecklist:\n\n\n\n My code follows the code style of this project.\n My change requires a change to the documentation.\n I have updated the documentation accordingly.\n I have read the CONTRIBUTING document.\n I have added tests to cover my changes.", "createdAt": "2020-09-29T14:49:15Z", "url": "https://github.com/Graylog2/graylog2-server/pull/9059", "merged": true, "mergeCommit": {"oid": "e4ed7e2fe2e1e8a3b83c877c9b3bdc767d931434"}, "closed": true, "closedAt": "2020-10-02T09:57:54Z", "author": {"login": "linuspahl"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdNo04kgH2gAyNDk0ODkxNzExOjEzNjg0YmIxOTg1OTI1MTk1NGU1ZmEzOWM1NDE4NTI1NzQwY2NkNzY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdOi_BXgFqTUwMTAwNjM3OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "13684bb19859251954e5fa39c5418525740ccd76", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/13684bb19859251954e5fa39c5418525740ccd76", "committedDate": "2020-09-29T14:12:13Z", "message": "Create InputDescription component"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0776e8bc5292ac3bcf8eda63bb509a2bb3720692", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/0776e8bc5292ac3bcf8eda63bb509a2bb3720692", "committedDate": "2020-09-29T14:29:26Z", "message": "Implement InputDescription for Input component"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "41ef7a3aa51c3440ddbb6d3d09bd73b775487abd", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/41ef7a3aa51c3440ddbb6d3d09bd73b775487abd", "committedDate": "2020-09-29T14:29:48Z", "message": "Add tests for InputDescription"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac30ce74f83ef9df853308b57f8325103055bf67", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/ac30ce74f83ef9df853308b57f8325103055bf67", "committedDate": "2020-09-29T14:30:36Z", "message": "Use Input error prop in ForikInput"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6494a8de9c7ec7670931cb8e7789ee78cf0b3862", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/6494a8de9c7ec7670931cb8e7789ee78cf0b3862", "committedDate": "2020-09-29T14:31:40Z", "message": "Use Input error prop in ContentPackSelection."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "742c13d91e5380e181aa565b23ce95b2215ce9a3", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/742c13d91e5380e181aa565b23ce95b2215ce9a3", "committedDate": "2020-09-29T14:33:34Z", "message": "Only display InputDescription line break when error and help exist"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk4NTYxMDkz", "url": "https://github.com/Graylog2/graylog2-server/pull/9059#pullrequestreview-498561093", "createdAt": "2020-09-29T14:54:29Z", "commit": {"oid": "742c13d91e5380e181aa565b23ce95b2215ce9a3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQxNDo1NDoyOVrOHZxYcg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQxNDo1NDoyOVrOHZxYcg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njc4NTUyMg==", "bodyText": "I made sure the text color changes when there is an error, this way the component can be used independently of the  Input component. I tried to style the HelpBlock, but it is not possible because the hasError attribute would be added to the DOM.", "url": "https://github.com/Graylog2/graylog2-server/pull/9059#discussion_r496785522", "createdAt": "2020-09-29T14:54:29Z", "author": {"login": "linuspahl"}, "path": "graylog2-web-interface/src/components/common/InputDescription.jsx", "diffHunk": "@@ -0,0 +1,56 @@\n+// @flow strict\n+import * as React from 'react';\n+import PropTypes from 'prop-types';\n+import styled, { type StyledComponent } from 'styled-components';\n+\n+import type { ThemeInterface } from 'theme';\n+import { HelpBlock } from 'components/graylog';\n+\n+const Wrapper: StyledComponent<{hasError: boolean}, ThemeInterface, HTMLSpanElement> = styled.span(({ theme, hasError }) => `\n+  ${hasError ? `\n+    color: ${theme.colors.variant.danger};\n+  ` : ''};\n+`);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "742c13d91e5380e181aa565b23ce95b2215ce9a3"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk5MTA5NDMz", "url": "https://github.com/Graylog2/graylog2-server/pull/9059#pullrequestreview-499109433", "createdAt": "2020-09-30T06:10:48Z", "commit": {"oid": "742c13d91e5380e181aa565b23ce95b2215ce9a3"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQwNjoxMDo0OFrOHaOkYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQwNjoxMDo0OFrOHaOkYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzI2MzcxNA==", "bodyText": "I find that putting a conditional with a template string and using a template string again can be confusing. Personally I think this reads better:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            const Wrapper: StyledComponent<{hasError: boolean}, ThemeInterface, HTMLSpanElement> = styled.span(({ theme, hasError }) => `\n          \n          \n            \n            const Wrapper: StyledComponent<{hasError: boolean}, ThemeInterface, HTMLSpanElement> = styled.span(({ theme, hasError }) => hasError ? `color: ${theme.colors.variant.danger};` : '';", "url": "https://github.com/Graylog2/graylog2-server/pull/9059#discussion_r497263714", "createdAt": "2020-09-30T06:10:48Z", "author": {"login": "Gaya"}, "path": "graylog2-web-interface/src/components/common/InputDescription.jsx", "diffHunk": "@@ -0,0 +1,56 @@\n+// @flow strict\n+import * as React from 'react';\n+import PropTypes from 'prop-types';\n+import styled, { type StyledComponent } from 'styled-components';\n+\n+import type { ThemeInterface } from 'theme';\n+import { HelpBlock } from 'components/graylog';\n+\n+const Wrapper: StyledComponent<{hasError: boolean}, ThemeInterface, HTMLSpanElement> = styled.span(({ theme, hasError }) => `", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "742c13d91e5380e181aa565b23ce95b2215ce9a3"}, "originalPosition": 9}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1de0469f8625eac9c905ba9f0267ef86b5b4a984", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/1de0469f8625eac9c905ba9f0267ef86b5b4a984", "committedDate": "2020-09-30T12:40:02Z", "message": "Always use bsStyle error for Input form group if Input has an error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "83a2eb0a4ad9f1d43053310f10285962fb1a1e13", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/83a2eb0a4ad9f1d43053310f10285962fb1a1e13", "committedDate": "2020-09-30T12:40:34Z", "message": "Refactor InputDescription code style"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "824941a6850b66a8628af0fc7bc1f52fce7183ae", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/824941a6850b66a8628af0fc7bc1f52fce7183ae", "committedDate": "2020-09-30T13:21:46Z", "message": "Do not change color of an input help text if input has an error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "836bc7c051db754fb3b2dc55b73873ef2fbff4f0", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/836bc7c051db754fb3b2dc55b73873ef2fbff4f0", "committedDate": "2020-09-30T13:25:10Z", "message": "Fix flow error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f1c5179d258667c219e729d2e53bed6e4e5601f4", "author": {"user": {"login": "linuspahl", "name": "Linus Pahl"}}, "url": "https://github.com/Graylog2/graylog2-server/commit/f1c5179d258667c219e729d2e53bed6e4e5601f4", "committedDate": "2020-09-30T13:27:26Z", "message": "Refactor InputDescription code style"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk5NDUyNzI2", "url": "https://github.com/Graylog2/graylog2-server/pull/9059#pullrequestreview-499452726", "createdAt": "2020-09-30T13:51:18Z", "commit": {"oid": "f1c5179d258667c219e729d2e53bed6e4e5601f4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxMDA2Mzc5", "url": "https://github.com/Graylog2/graylog2-server/pull/9059#pullrequestreview-501006379", "createdAt": "2020-10-02T09:57:47Z", "commit": {"oid": "f1c5179d258667c219e729d2e53bed6e4e5601f4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3478, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}