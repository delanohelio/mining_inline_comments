{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgxMzIxNzQx", "number": 5000, "title": "RM26096 Adding feature to clean Global Tracking Logs", "bodyText": "Possibility to do it through a scheduler or through the base config menu.\nIn both case it's based on the variable in the same config menu to decide above which amount of month it delete logs.", "createdAt": "2020-02-28T10:40:22Z", "url": "https://github.com/axelor/axelor-open-suite/pull/5000", "merged": true, "mergeCommit": {"oid": "9cfb467ae45f44e2fefd8d5df50e32e96df82ca6"}, "closed": true, "closedAt": "2020-03-05T10:44:58Z", "author": {"login": "erg-axelor"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcItaEsgH2gAyMzgxMzIxNzQxOjhkMzczZWM3MGYwMTdmMjE3N2UyNDE1NmFiY2Q4MjIyY2U1ODE2MmU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcKTc6VAH2gAyMzgxMzIxNzQxOmFmNzZiZDkwMmRkNTc5ZWU3ZDhlMjFmZTQxZjM1MjBlMDg2MjE5NTA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8d373ec70f017f2177e24156abcd8222ce58162e", "author": {"user": {"login": "erg-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/8d373ec70f017f2177e24156abcd8222ce58162e", "committedDate": "2020-02-28T10:31:41Z", "message": "RM26096 Adding possibility to clean Global Tracking Logs with a scheduler or through the base config menu"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "abc3a3c4ab617b8e8cd5518473961fd8af8fdf35", "author": {"user": {"login": "erg-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/abc3a3c4ab617b8e8cd5518473961fd8af8fdf35", "committedDate": "2020-02-28T10:46:38Z", "message": "Update CHANGELOG.md"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3MjI4MjAy", "url": "https://github.com/axelor/axelor-open-suite/pull/5000#pullrequestreview-367228202", "createdAt": "2020-03-02T14:14:16Z", "commit": {"oid": "abc3a3c4ab617b8e8cd5518473961fd8af8fdf35"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxNDoxNDoxNlrOFwg7wA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxNDoxOTozNlrOFwhIBQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjQxNTU1Mg==", "bodyText": "throws Exception => throws AxelorException", "url": "https://github.com/axelor/axelor-open-suite/pull/5000#discussion_r386415552", "createdAt": "2020-03-02T14:14:16Z", "author": {"login": "ale-axelor"}, "path": "axelor-admin/src/main/java/com/axelor/apps/admin/service/GlobalTrackingLogService.java", "diffHunk": "@@ -2,8 +2,13 @@\n \n import com.axelor.apps.admin.db.GlobalTrackingLog;\n import com.axelor.meta.db.MetaModel;\n+import java.util.List;\n \n public interface GlobalTrackingLogService {\n \n   public GlobalTrackingLog createExportLog(MetaModel model);\n+\n+  public void deleteOldGlobalTrackingLog(int months) throws Exception;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "abc3a3c4ab617b8e8cd5518473961fd8af8fdf35"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjQxODY5Mw==", "bodyText": "add TraceBackService.trace(e)", "url": "https://github.com/axelor/axelor-open-suite/pull/5000#discussion_r386418693", "createdAt": "2020-03-02T14:19:36Z", "author": {"login": "ale-axelor"}, "path": "axelor-base/src/main/java/com/axelor/apps/base/job/GlobalTrackingLogCleaningJob.java", "diffHunk": "@@ -0,0 +1,20 @@\n+package com.axelor.apps.base.job;\n+\n+import com.axelor.apps.admin.service.GlobalTrackingLogService;\n+import com.axelor.apps.base.service.app.AppBaseService;\n+import com.axelor.inject.Beans;\n+import org.quartz.JobExecutionContext;\n+\n+public class GlobalTrackingLogCleaningJob extends ThreadedJob {\n+\n+  @Override\n+  public void executeInThread(JobExecutionContext context) {\n+    try {\n+      Beans.get(GlobalTrackingLogService.class)\n+          .deleteOldGlobalTrackingLog(\n+              Beans.get(AppBaseService.class).getGlobalTrackingLogPersistence());\n+    } catch (Exception e) {\n+      throw new UncheckedJobExecutionException(e);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "abc3a3c4ab617b8e8cd5518473961fd8af8fdf35"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b9bd574b6e5da0b95da6d8d537c3f228a3a830d5", "author": {"user": {"login": "erg-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/b9bd574b6e5da0b95da6d8d537c3f228a3a830d5", "committedDate": "2020-03-02T16:16:47Z", "message": "Fix made according to the pull request comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f62011db9040fd6607247b23db93033e8a5be491", "author": {"user": {"login": "erg-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/f62011db9040fd6607247b23db93033e8a5be491", "committedDate": "2020-03-02T16:17:38Z", "message": "Merge branch 'wip-26096' of github.com:erg-axelor/axelor-open-suite into wip-26096"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b9ba5f7b3b6268fad5db9d1c7f9d2906a43f9922", "author": {"user": {"login": "erg-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/b9ba5f7b3b6268fad5db9d1c7f9d2906a43f9922", "committedDate": "2020-03-02T16:20:20Z", "message": "Merge branch 'wip' into wip-26096"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4MTY4NjU1", "url": "https://github.com/axelor/axelor-open-suite/pull/5000#pullrequestreview-368168655", "createdAt": "2020-03-03T17:14:25Z", "commit": {"oid": "b9ba5f7b3b6268fad5db9d1c7f9d2906a43f9922"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QxNzoxNDoyNlrOFxO_hQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QxNzoxNDoyNlrOFxO_hQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzE3MDE4MQ==", "bodyText": "manualy => \"manually\"", "url": "https://github.com/axelor/axelor-open-suite/pull/5000#discussion_r387170181", "createdAt": "2020-03-03T17:14:26Z", "author": {"login": "ale-axelor"}, "path": "axelor-base/src/main/resources/views/AppBase.xml", "diffHunk": "@@ -70,6 +70,10 @@\n \t\t\t\t<field name=\"currencyConversionLineList\" colSpan=\"12\" grid-view=\"currency-conversion-line-grid\" form-view=\"currency-conversion-line-form\"/>\n \t\t\t</panel>\n \t\t\t<panel name=\"global-tracking-configuration-panel\" title=\"Global tracking configuration\" colSpan=\"12\" >\n+        <panel name=\"global-tracking-configuration-sub-panel\" title=\"Logs configuration\">\n+\t\t\t\t\t<field name=\"globalTrackingLogPersistence\"/>\n+\t\t\t\t\t<button name=\"cleanBtn\" title=\"Clean logs manualy\" onClick=\"save,action-method-clean-global-tracking-logs\"/>\t\t\t", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b9ba5f7b3b6268fad5db9d1c7f9d2906a43f9922"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5be15bc52cd622a357ee27a3d4e44d9919c9d24c", "author": {"user": {"login": "erg-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/5be15bc52cd622a357ee27a3d4e44d9919c9d24c", "committedDate": "2020-03-04T09:20:27Z", "message": "add i18n translation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "af76bd902dd579ee7d8e21fe41f3520e08621950", "author": {"user": {"login": "erg-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/af76bd902dd579ee7d8e21fe41f3520e08621950", "committedDate": "2020-03-04T09:25:06Z", "message": "merge from origin"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2003, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}