{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg5ODE5Mzc0", "number": 5142, "title": "RM#25898 : Manuf. order bugfix, no longer diplay unavaible tracking numbers", "bodyText": "On manuf-order-form > consumedProductsPanel > consumedStockMoveLineList > \"split by tracking numbers\" button\nNo longer displays tracknig numbers when avaibleQty equals 0\nRM#25898", "createdAt": "2020-03-17T12:55:42Z", "url": "https://github.com/axelor/axelor-open-suite/pull/5142", "merged": true, "mergeCommit": {"oid": "e6600732295126487216115a02c057b24f76a0ae"}, "closed": true, "closedAt": "2020-03-27T14:45:10Z", "author": {"login": "mga-axelor"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcPg7l-AFqTM3ODUwMzAxOQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcRxzUmAH2gAyMzg5ODE5Mzc0OmYzOTg3ZTlkMTgwZjZjODdhNzA1NjEyMzNmM2RiOTA2YTBhMGNkMmQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4NTAzMDE5", "url": "https://github.com/axelor/axelor-open-suite/pull/5142#pullrequestreview-378503019", "createdAt": "2020-03-20T13:55:25Z", "commit": {"oid": "df6259557b193799a2aee02532d823948a25a2ad"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxMzo1NToyNVrOF5Urrw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxMzo1Njo1M1rOF5UvaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTY1MjAxNQ==", "bodyText": "diplay => display\navaible => available", "url": "https://github.com/axelor/axelor-open-suite/pull/5142#discussion_r395652015", "createdAt": "2020-03-20T13:55:25Z", "author": {"login": "ale-axelor"}, "path": "CHANGELOG.md", "diffHunk": "@@ -50,6 +50,7 @@\n - LEAVE REQUEST: corrected error when trying to change user.\n - EMPLOYEE: update the employee records in demo data so the creation process is finished.\n - LEAD: removed non persistable field wrongly appearing on the form view.\n+- MANUFACTURING ORDER : On consumed product, no longer diplay tracking numbers if avaible quantity equals 0.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "df6259557b193799a2aee02532d823948a25a2ad"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTY1MjM2Mg==", "bodyText": "\ud83d\udc4d", "url": "https://github.com/axelor/axelor-open-suite/pull/5142#discussion_r395652362", "createdAt": "2020-03-20T13:55:58Z", "author": {"login": "ale-axelor"}, "path": "axelor-stock/src/main/java/com/axelor/apps/stock/service/StockMoveLineServiceImpl.java", "diffHunk": "@@ -1195,14 +1195,14 @@ public void setAvailableStatus(StockMoveLine stockMoveLine) {\n \n   public List<TrackingNumber> getAvailableTrackingNumbers(\n       StockMoveLine stockMoveLine, StockMove stockMove) {\n-    List<TrackingNumber> trackingNumbers = null;\n     String domain =\n         \"self.product.id = \"\n             + stockMoveLine.getProduct().getId()\n-            + \" AND self.id in (select stockLocationLine.trackingNumber.id from StockLocationLine stockLocationLine join StockLocation sl on sl.id = stockLocationLine.detailsStockLocation.id WHERE sl.id = \"\n+            + \" AND self.id in (select stockLocationLine.trackingNumber.id from StockLocationLine stockLocationLine\"\n+            + \" join StockLocation sl on sl.id = stockLocationLine.detailsStockLocation.id WHERE sl.id = \"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "df6259557b193799a2aee02532d823948a25a2ad"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTY1Mjk2OQ==", "bodyText": "Small nitpick but you don't have to create a trackingNumbers variable and you can instead return trackingNumberRepo.all().filter(domain).fetch();", "url": "https://github.com/axelor/axelor-open-suite/pull/5142#discussion_r395652969", "createdAt": "2020-03-20T13:56:53Z", "author": {"login": "ale-axelor"}, "path": "axelor-stock/src/main/java/com/axelor/apps/stock/service/StockMoveLineServiceImpl.java", "diffHunk": "@@ -1195,14 +1195,14 @@ public void setAvailableStatus(StockMoveLine stockMoveLine) {\n \n   public List<TrackingNumber> getAvailableTrackingNumbers(\n       StockMoveLine stockMoveLine, StockMove stockMove) {\n-    List<TrackingNumber> trackingNumbers = null;\n     String domain =\n         \"self.product.id = \"\n             + stockMoveLine.getProduct().getId()\n-            + \" AND self.id in (select stockLocationLine.trackingNumber.id from StockLocationLine stockLocationLine join StockLocation sl on sl.id = stockLocationLine.detailsStockLocation.id WHERE sl.id = \"\n+            + \" AND self.id in (select stockLocationLine.trackingNumber.id from StockLocationLine stockLocationLine\"\n+            + \" join StockLocation sl on sl.id = stockLocationLine.detailsStockLocation.id WHERE sl.id = \"\n             + stockMove.getFromStockLocation().getId()\n-            + \" )\";\n-    trackingNumbers = trackingNumberRepo.all().filter(domain).fetch();\n+            + \" AND coalesce(stockLocationLine.currentQty, 0) != 0)\";\n+    List<TrackingNumber> trackingNumbers = trackingNumberRepo.all().filter(domain).fetch();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "df6259557b193799a2aee02532d823948a25a2ad"}, "originalPosition": 15}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "df6259557b193799a2aee02532d823948a25a2ad", "author": {"user": {"login": "mga-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/df6259557b193799a2aee02532d823948a25a2ad", "committedDate": "2020-03-17T12:53:37Z", "message": "Manuf. order bugfix : no longer diplay unavaible tracking numbers\n\nOn manuf-order-form > consumedProductsPanel > consumedStockMoveLineList > \"split by tracking numbers\" button\nNo longer displays tracknig numbers when avaibleQty equals 0\n\nRM#25898"}, "afterCommit": {"oid": "7c84abfb7783c4ffa917b0da9c7f5824c84711b2", "author": {"user": {"login": "mga-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/7c84abfb7783c4ffa917b0da9c7f5824c84711b2", "committedDate": "2020-03-23T12:47:39Z", "message": "Manuf. order bugfix : no longer diplay unavaible tracking numbers\n\nOn manuf-order-form > consumedProductsPanel > consumedStockMoveLineList > \"split by tracking numbers\" button\nNo longer displays tracknig numbers when avaibleQty equals 0\n\nRM#25898"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7c84abfb7783c4ffa917b0da9c7f5824c84711b2", "author": {"user": {"login": "mga-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/7c84abfb7783c4ffa917b0da9c7f5824c84711b2", "committedDate": "2020-03-23T12:47:39Z", "message": "Manuf. order bugfix : no longer diplay unavaible tracking numbers\n\nOn manuf-order-form > consumedProductsPanel > consumedStockMoveLineList > \"split by tracking numbers\" button\nNo longer displays tracknig numbers when avaibleQty equals 0\n\nRM#25898"}, "afterCommit": {"oid": "b42caa7ee63c58b0174de6b7db7c4579a114e32e", "author": {"user": {"login": "mga-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/b42caa7ee63c58b0174de6b7db7c4579a114e32e", "committedDate": "2020-03-23T12:49:06Z", "message": "Manuf. order bugfix : no longer diplay unavaible tracking numbers\n\nOn manuf-order-form > consumedProductsPanel > consumedStockMoveLineList > \"split by tracking numbers\" button\nNo longer displays tracknig numbers when avaibleQty equals 0\n\nRM#25898"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d5a8239daab4fde2feafd751e4691392fc6529c", "author": {"user": {"login": "mga-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/1d5a8239daab4fde2feafd751e4691392fc6529c", "committedDate": "2020-03-27T13:33:24Z", "message": "Manuf. order bugfix : no longer diplay unavaible tracking numbers\n\nOn manuf-order-form > consumedProductsPanel > consumedStockMoveLineList > \"split by tracking numbers\" button\nNo longer displays tracknig numbers when avaibleQty equals 0\n\nRM#25898"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b42caa7ee63c58b0174de6b7db7c4579a114e32e", "author": {"user": {"login": "mga-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/b42caa7ee63c58b0174de6b7db7c4579a114e32e", "committedDate": "2020-03-23T12:49:06Z", "message": "Manuf. order bugfix : no longer diplay unavaible tracking numbers\n\nOn manuf-order-form > consumedProductsPanel > consumedStockMoveLineList > \"split by tracking numbers\" button\nNo longer displays tracknig numbers when avaibleQty equals 0\n\nRM#25898"}, "afterCommit": {"oid": "1d5a8239daab4fde2feafd751e4691392fc6529c", "author": {"user": {"login": "mga-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/1d5a8239daab4fde2feafd751e4691392fc6529c", "committedDate": "2020-03-27T13:33:24Z", "message": "Manuf. order bugfix : no longer diplay unavaible tracking numbers\n\nOn manuf-order-form > consumedProductsPanel > consumedStockMoveLineList > \"split by tracking numbers\" button\nNo longer displays tracknig numbers when avaibleQty equals 0\n\nRM#25898"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f3987e9d180f6c87a70561233f3db906a0a0cd2d", "author": {"user": {"login": "ale-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/f3987e9d180f6c87a70561233f3db906a0a0cd2d", "committedDate": "2020-03-27T14:44:12Z", "message": "Merge branch '5.2-dev' into 5.2-dev-25898"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1990, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}