{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQwNjM4MzYw", "number": 5574, "title": "Wip 29314: Add partner and workshop list on company", "bodyText": "", "createdAt": "2020-06-26T15:07:33Z", "url": "https://github.com/axelor/axelor-open-suite/pull/5574", "merged": true, "mergeCommit": {"oid": "cda892fba95b40216d69da749970acf88bc80afb"}, "closed": true, "closedAt": "2020-06-30T09:39:45Z", "author": {"login": "fpr-axelor"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcvEou3AH2gAyNDQwNjM4MzYwOmNhNWE1ZTdiZTUwYjY3M2NlZDhlMDcyMmQ5YmMzZGY4NzRlZTg5NmE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcwSQx8AH2gAyNDQwNjM4MzYwOmM2OTI4ZDE4NjRhMjFkMjdmMDZkMDc0NTI0NGQ4NWZmMjJjMTI0YWM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ca5a5e7be50b673ced8e0722d9bc3df874ee896a", "author": {"user": {"login": "fpr-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/ca5a5e7be50b673ced8e0722d9bc3df874ee896a", "committedDate": "2020-06-26T15:04:38Z", "message": "#29314: Add workshop and partner list to company"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ee641fc274d9daf3c073e149370b0c9d00d3124", "author": {"user": {"login": "fpr-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/6ee641fc274d9daf3c073e149370b0c9d00d3124", "committedDate": "2020-06-26T15:06:29Z", "message": "Add changelog"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM5Nzc2Nzg2", "url": "https://github.com/axelor/axelor-open-suite/pull/5574#pullrequestreview-439776786", "createdAt": "2020-06-30T08:15:54Z", "commit": {"oid": "6ee641fc274d9daf3c073e149370b0c9d00d3124"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwODoxNTo1NVrOGqxFhg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwODoxNzoyMVrOGqxJIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzQ5NzYwNg==", "bodyText": "Why not simply write directly in the domain attribute ?", "url": "https://github.com/axelor/axelor-open-suite/pull/5574#discussion_r447497606", "createdAt": "2020-06-30T08:15:55Z", "author": {"login": "ale-axelor"}, "path": "axelor-base/src/main/resources/views/Company.xml", "diffHunk": "@@ -125,5 +128,13 @@\n   <action-method name=\"action-company-logo-onchange-update-dimension\">\n     <call class=\"com.axelor.apps.base.web.CompanyController\" method=\"updateDimension\"/>\n   </action-method>\n+  \n+  <action-attrs name=\"action-company-workshop-list-on-select\">\n+  \t<attribute name=\"domain\" for=\"workshopList\" expr=\"self.isWorkshop is true\"/>\n+  </action-attrs>\n+  \n+  <action-attrs name=\"action-company-partner-list-on-select\">\n+  \t<attribute name=\"domain\" for=\"partnerList\" expr=\"self.isInternal is true\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6ee641fc274d9daf3c073e149370b0c9d00d3124"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzQ5ODUyOQ==", "bodyText": "I think this field should only appears if the workshop configuration is enabled.", "url": "https://github.com/axelor/axelor-open-suite/pull/5574#discussion_r447498529", "createdAt": "2020-06-30T08:17:21Z", "author": {"login": "ale-axelor"}, "path": "axelor-base/src/main/resources/views/Company.xml", "diffHunk": "@@ -57,6 +57,9 @@\n \t    \t<panel name=\"informationsPanel\" title=\"Information\">\n \t      \t\t<field name=\"notes\" colSpan=\"12\"/>\n \t    \t\t<field name=\"companyDepartmentList\" grid-view=\"company-department-company-grid\" form-view=\"company-department-company-form\" canSelect=\"true\" domain=\"self.company IS NULL\" colSpan=\"12\"/>\n+    \t\t\t<field name=\"partnerList\" form-view=\"partner-form\" grid-view=\"partner-grid\" colSpan=\"12\" canNew=\"false\" canSelect=\"true\" onSelect=\"action-company-partner-list-on-select\"/>\n+\t\t    \t<field name=\"workshopList\" colSpan=\"12\" if-module=\"axelor-stock\" if=\"__config__.app.isApp('stock')\" canNew=\"false\" canSelect=\"true\" onSelect=\"action-company-workshop-list-on-select\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6ee641fc274d9daf3c073e149370b0c9d00d3124"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "566b58dca4320270d28c7d5fa7c8ff9aad624eca", "author": {"user": {"login": "fpr-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/566b58dca4320270d28c7d5fa7c8ff9aad624eca", "committedDate": "2020-06-30T08:51:56Z", "message": "Remove actions and add domain directly on the field"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e636a8c6f23c51c049d652504bcf113ebd130eb5", "author": {"user": {"login": "fpr-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/e636a8c6f23c51c049d652504bcf113ebd130eb5", "committedDate": "2020-06-30T09:26:28Z", "message": "Move workshop field in production module"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6928d1864a21d27f06d0745244d85ff22c124ac", "author": {"user": {"login": "fpr-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/c6928d1864a21d27f06d0745244d85ff22c124ac", "committedDate": "2020-06-30T09:31:04Z", "message": "Fix minor error"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2119, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}