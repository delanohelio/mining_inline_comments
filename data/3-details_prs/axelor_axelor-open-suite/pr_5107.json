{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg3MTYxNDQx", "number": 5107, "title": "RM26380 Fix NPE when computing volume on LogisticalForm", "bodyText": "", "createdAt": "2020-03-12T10:30:23Z", "url": "https://github.com/axelor/axelor-open-suite/pull/5107", "merged": true, "mergeCommit": {"oid": "2b05b7a2358572f20b1c960e4b1df9856910ddf9"}, "closed": true, "closedAt": "2020-03-25T14:38:42Z", "author": {"login": "aol-axelor"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcM5glOgFqTM3MzQ1MTIyMQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcRIgOZAH2gAyMzg3MTYxNDQxOjQzZTkyNmQ3NTg5ODJmOWEyMTVhYjg1NjJlN2MwYzY3NmE3ZWIxYjg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzczNDUxMjIx", "url": "https://github.com/axelor/axelor-open-suite/pull/5107#pullrequestreview-373451221", "createdAt": "2020-03-12T10:50:26Z", "commit": {"oid": "c4925945f494f06aad4e75cef09267ef88d78bf9"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQxMDo1MDoyN1rOF1Zqxg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQxMDo1MDoyN1rOF1Zqxg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTUzOTM5OA==", "bodyText": "Please add brackets { } even if there is only one line.", "url": "https://github.com/axelor/axelor-open-suite/pull/5107#discussion_r391539398", "createdAt": "2020-03-12T10:50:27Z", "author": {"login": "ale-axelor"}, "path": "axelor-stock/src/main/java/com/axelor/apps/stock/service/LogisticalFormServiceImpl.java", "diffHunk": "@@ -482,9 +482,11 @@ public void computeTotals(LogisticalForm logisticalForm) throws LogisticalFormEr\n             totalGrossMass = totalGrossMass.add(logisticalFormLine.getGrossMass());\n           }\n \n-          totalVolume =\n-              totalVolume.add(\n-                  logisticalFormLineService.evalVolume(logisticalFormLine, scriptHelper));\n+          BigDecimal toAdd = logisticalFormLineService.evalVolume(logisticalFormLine, scriptHelper);\n+          if (toAdd == null)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c4925945f494f06aad4e75cef09267ef88d78bf9"}, "originalPosition": 8}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c4925945f494f06aad4e75cef09267ef88d78bf9", "author": {"user": {"login": "aol-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/c4925945f494f06aad4e75cef09267ef88d78bf9", "committedDate": "2020-03-12T10:29:05Z", "message": "RM26380 Fix NPE when computing volume on LogisticalForm"}, "afterCommit": {"oid": "a6a4ef4bdb7d344fa2f50ca4372f5d35bdd25f13", "author": {"user": {"login": "aol-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/a6a4ef4bdb7d344fa2f50ca4372f5d35bdd25f13", "committedDate": "2020-03-12T12:32:18Z", "message": "RM26380 Fix NPE when computing volume on LogisticalForm"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a6a4ef4bdb7d344fa2f50ca4372f5d35bdd25f13", "author": {"user": {"login": "aol-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/a6a4ef4bdb7d344fa2f50ca4372f5d35bdd25f13", "committedDate": "2020-03-12T12:32:18Z", "message": "RM26380 Fix NPE when computing volume on LogisticalForm"}, "afterCommit": {"oid": "6ab13ba07c07ca52bd624b0a652e256458603c4f", "author": {"user": {"login": "aol-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/6ab13ba07c07ca52bd624b0a652e256458603c4f", "committedDate": "2020-03-12T12:35:37Z", "message": "RM26380 Fix NPE when computing volume on LogisticalForm"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3OTA1MzE5", "url": "https://github.com/axelor/axelor-open-suite/pull/5107#pullrequestreview-377905319", "createdAt": "2020-03-19T16:47:19Z", "commit": {"oid": "6ab13ba07c07ca52bd624b0a652e256458603c4f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxNjo0NzoxOVrOF43TGA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxNjo0NzoxOVrOF43TGA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTE3MDU4NA==", "bodyText": "please call I18n.get() here or the exception will not be translated.", "url": "https://github.com/axelor/axelor-open-suite/pull/5107#discussion_r395170584", "createdAt": "2020-03-19T16:47:19Z", "author": {"login": "ale-axelor"}, "path": "axelor-stock/src/main/java/com/axelor/apps/stock/service/LogisticalFormServiceImpl.java", "diffHunk": "@@ -482,9 +482,13 @@ public void computeTotals(LogisticalForm logisticalForm) throws LogisticalFormEr\n             totalGrossMass = totalGrossMass.add(logisticalFormLine.getGrossMass());\n           }\n \n-          totalVolume =\n-              totalVolume.add(\n-                  logisticalFormLineService.evalVolume(logisticalFormLine, scriptHelper));\n+          BigDecimal toAdd = logisticalFormLineService.evalVolume(logisticalFormLine, scriptHelper);\n+          if (toAdd == null) {\n+            throw new LogisticalFormError(\n+                logisticalForm, IExceptionMessage.LOGISTICAL_FORM_INVALID_DIMENSIONS);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6ab13ba07c07ca52bd624b0a652e256458603c4f"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "451ba7806e3fe1a8de2f5237c9a3df8778cbe9d3", "author": {"user": {"login": "aol-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/451ba7806e3fe1a8de2f5237c9a3df8778cbe9d3", "committedDate": "2020-03-24T13:52:20Z", "message": "RM26380 Fix NPE when computing volume on LogisticalForm"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6ab13ba07c07ca52bd624b0a652e256458603c4f", "author": {"user": {"login": "aol-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/6ab13ba07c07ca52bd624b0a652e256458603c4f", "committedDate": "2020-03-12T12:35:37Z", "message": "RM26380 Fix NPE when computing volume on LogisticalForm"}, "afterCommit": {"oid": "451ba7806e3fe1a8de2f5237c9a3df8778cbe9d3", "author": {"user": {"login": "aol-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/451ba7806e3fe1a8de2f5237c9a3df8778cbe9d3", "committedDate": "2020-03-24T13:52:20Z", "message": "RM26380 Fix NPE when computing volume on LogisticalForm"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "43e926d758982f9a215ab8562e7c0c676a7eb1b8", "author": {"user": {"login": "ale-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/43e926d758982f9a215ab8562e7c0c676a7eb1b8", "committedDate": "2020-03-25T14:37:14Z", "message": "Merge branch 'dev' into dev-26380"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1976, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}