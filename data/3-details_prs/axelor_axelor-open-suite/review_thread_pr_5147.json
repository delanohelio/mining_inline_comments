{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkwNDI1ODY0", "number": 5147, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMTowNTozNVrODqVHcQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMTowNTo0N1rODqVHtw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1NzEyNzUzOnYy", "diffSide": "RIGHT", "path": "axelor-crm/src/main/java/com/axelor/apps/crm/web/ConvertLeadWizardController.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMTowNTozNVrOF6Agwg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMTowNTozNVrOF6Agwg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjM3MDExNA==", "bodyText": "if using reference dummy field no need of setting name. directly set the object.", "url": "https://github.com/axelor/axelor-open-suite/pull/5147#discussion_r396370114", "createdAt": "2020-03-23T11:05:35Z", "author": {"login": "rch-axelor"}, "path": "axelor-crm/src/main/java/com/axelor/apps/crm/web/ConvertLeadWizardController.java", "diffHunk": "@@ -177,14 +177,14 @@ public void setDefaults(ActionRequest request, ActionResponse response) throws A\n \n     Lead lead = findLead(request);\n \n-    response.setAttr(\"$primaryAddress\", \"value\", lead.getPrimaryAddress());\n-    response.setAttr(\"$primaryCity\", \"value\", lead.getPrimaryCity());\n-    response.setAttr(\"$primaryState\", \"value\", lead.getPrimaryState());\n-    response.setAttr(\"$primaryPostalCode\", \"value\", lead.getPrimaryPostalCode());\n-    response.setAttr(\"$primaryCountry\", \"value\", lead.getPrimaryCountry());\n+    response.setAttr(\"$partner.$primaryAddress\", \"value\", lead.getPrimaryAddress());\n+    response.setAttr(\"$partner.$primaryCity\", \"value\", lead.getPrimaryCity().getName());\n+    response.setAttr(\"$partner.$primaryState\", \"value\", lead.getPrimaryState().getName());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0943e22f13a253d372b54f76a6d48d82b7b670aa"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1NzEyNzk5OnYy", "diffSide": "RIGHT", "path": "axelor-crm/src/main/java/com/axelor/apps/crm/web/ConvertLeadWizardController.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMTowNTo0MVrOF6AhAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMTowNTo0MVrOF6AhAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjM3MDE3OA==", "bodyText": "City and state are not required field in lead so NPE will be there if empty.", "url": "https://github.com/axelor/axelor-open-suite/pull/5147#discussion_r396370178", "createdAt": "2020-03-23T11:05:41Z", "author": {"login": "rch-axelor"}, "path": "axelor-crm/src/main/java/com/axelor/apps/crm/web/ConvertLeadWizardController.java", "diffHunk": "@@ -177,14 +177,14 @@ public void setDefaults(ActionRequest request, ActionResponse response) throws A\n \n     Lead lead = findLead(request);\n \n-    response.setAttr(\"$primaryAddress\", \"value\", lead.getPrimaryAddress());\n-    response.setAttr(\"$primaryCity\", \"value\", lead.getPrimaryCity());\n-    response.setAttr(\"$primaryState\", \"value\", lead.getPrimaryState());\n-    response.setAttr(\"$primaryPostalCode\", \"value\", lead.getPrimaryPostalCode());\n-    response.setAttr(\"$primaryCountry\", \"value\", lead.getPrimaryCountry());\n+    response.setAttr(\"$partner.$primaryAddress\", \"value\", lead.getPrimaryAddress());\n+    response.setAttr(\"$partner.$primaryCity\", \"value\", lead.getPrimaryCity().getName());\n+    response.setAttr(\"$partner.$primaryState\", \"value\", lead.getPrimaryState().getName());\n+    response.setAttr(\"$partner.$primaryPostalCode\", \"value\", lead.getPrimaryPostalCode());\n+    response.setAttr(\"$partner.$primaryCountry\", \"value\", lead.getPrimaryCountry());\n     response.setAttr(\"$contactAddress\", \"value\", lead.getPrimaryAddress());\n-    response.setAttr(\"$contactCity\", \"value\", lead.getPrimaryCity());\n-    response.setAttr(\"$contactState\", \"value\", lead.getPrimaryState());\n+    response.setAttr(\"$contactCity\", \"value\", lead.getPrimaryCity().getName());\n+    response.setAttr(\"$contactState\", \"value\", lead.getPrimaryState().getName());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0943e22f13a253d372b54f76a6d48d82b7b670aa"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1NzEyODIzOnYy", "diffSide": "RIGHT", "path": "axelor-crm/src/main/resources/views/ConvertLeadWizard.xml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMTowNTo0N1rOF6AhMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMTowNTo0N1rOF6AhMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjM3MDIyNQ==", "bodyText": "type=\"ManyToOne\" & target=\"\"", "url": "https://github.com/axelor/axelor-open-suite/pull/5147#discussion_r396370225", "createdAt": "2020-03-23T11:05:47Z", "author": {"login": "rch-axelor"}, "path": "axelor-crm/src/main/resources/views/ConvertLeadWizard.xml", "diffHunk": "@@ -34,21 +40,31 @@\n \t\t      \t\t</panel>\n \t      \t\t\t\n \t      \t\t\t<panel name=\"generalContactDetailsPanel\" title=\"General contact details\" colSpan=\"12\">\n-\t\t\t\t\t\t<field name=\"fixedPhone\" colSpan=\"3\" placeholder=\"+33100000000\" pattern=\"^\\+?([\\s()-.]*\\d){7,}$\" onChange=\"action-partner-method-normalize-fixedPhone\"/>\n-\t\t\t\t\t\t<field name=\"fax\" colSpan=\"3\" placeholder=\"+33000000000\" pattern=\"^\\+?([\\s()-.]*\\d){7,}$\" onChange=\"action-partner-method-normalize-fax\"/>\n-\t\t\t\t\t\t<field name=\"mobilePhone\" colSpan=\"3\" hideIf=\"partnerTypeSelect == 1\" placeholder=\"+33100000000\" pattern=\"^\\+?([\\s()-.]*\\d){7,}$\" onChange=\"action-partner-method-normalize-mobilePhone\"/>\n-\t\t\t\t\t\t<field name=\"emailAddress\" canSelect=\"false\" form-view=\"email-address-simple-form\"/>\n-\t\t\t\t\t\t<field name=\"webSite\" placeholder=\"www.url.com\" pattern=\"([^\\s]+\\.[^\\s]+\\.[^\\s]{2,})\"/>\n+\t      \t\t\t    <field name=\"mobilePhone\" colSpan=\"4\" hideIf=\"partnerTypeSelect == 1\" placeholder=\"+33100000000\" pattern=\"^\\+?([\\s()-.]*\\d){7,}$\" onChange=\"action-partner-method-normalize-mobilePhone\"/>\n+\t\t\t\t\t\t<field name=\"fixedPhone\" colSpan=\"4\" placeholder=\"+33100000000\" pattern=\"^\\+?([\\s()-.]*\\d){7,}$\" onChange=\"action-partner-method-normalize-fixedPhone\"/>\n+\t\t\t\t\t\t<field name=\"fax\" colSpan=\"4\" placeholder=\"+33000000000\" pattern=\"^\\+?([\\s()-.]*\\d){7,}$\" onChange=\"action-partner-method-normalize-fax\"/>\n+\t\t\t\t\t\t<field name=\"emailAddress\" canSelect=\"false\" form-view=\"email-address-simple-form\" colSpan=\"4\"/>\n+\t\t\t\t\t\t<field name=\"webSite\" placeholder=\"www.url.com\" pattern=\"([^\\s]+\\.[^\\s]+\\.[^\\s]{2,})\" colSpan=\"4\"/>\n \t\t\t\t\t</panel>\n \t      \t\t\t\n+\t      \t\t\t<panel name=\"addressPanel\" title=\"Primary address\" colSpan=\"12\">\n+\t\t\t          <field name=\"$primaryAddress\" placeholder=\"Address\" showTitle=\"false\" type=\"string\" colSpan=\"8\"/>\n+\t\t\t          <field name=\"$primaryPostalCode\" placeholder=\"Postal code\" showTitle=\"false\" type=\"string\" colSpan=\"4\"/>\n+\t\t\t          <field name=\"$primaryCity\" placeholder=\"City\" showTitle=\"false\" type=\"com.axelor.apps.base.db.City\" colSpan=\"4\"/>\n+\t\t\t          <field name=\"$primaryState\" placeholder=\"State\" showTitle=\"false\" type=\"com.axelor.apps.base.db.Region\" colSpan=\"4\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0943e22f13a253d372b54f76a6d48d82b7b670aa"}, "originalPosition": 45}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3452, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}