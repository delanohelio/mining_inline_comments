{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk5NzQwNzEy", "number": 5284, "title": "RM27209: generate quotation file's title pdf according to it sale ord\u2026", "bodyText": "\u2026er or purchase order status", "createdAt": "2020-04-06T15:52:12Z", "url": "https://github.com/axelor/axelor-open-suite/pull/5284", "merged": true, "mergeCommit": {"oid": "0be037a8d86b5dfec91bc22f4d2c4e85ab77d959"}, "closed": true, "closedAt": "2020-04-07T08:41:46Z", "author": {"login": "jch-axelor"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcVA0HcgBqjMyMDYwNTA0ODM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcVPK3QAH2gAyMzk5NzQwNzEyOjQyZWYxZGI2ZGRjMjQzNTRiZGZiN2Y1MDU3ZGExMjNmNmI1NmEwNDk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "37a4b59964414e964251b91e1b38dd883a5112ae", "author": {"user": {"login": "jch-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/37a4b59964414e964251b91e1b38dd883a5112ae", "committedDate": "2020-04-06T15:51:23Z", "message": "RM27209: generate quotation file's title pdf according to it sale order or purchase order status"}, "afterCommit": {"oid": "62824c3a9ed4f1a9b7e99dae16cb0339b612e6ee", "author": {"user": {"login": "jch-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/62824c3a9ed4f1a9b7e99dae16cb0339b612e6ee", "committedDate": "2020-04-06T15:55:15Z", "message": "RM27209: generate quotation file's title pdf according to it sale order or purchase order status"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg4NDA0MTk2", "url": "https://github.com/axelor/axelor-open-suite/pull/5284#pullrequestreview-388404196", "createdAt": "2020-04-06T16:11:33Z", "commit": {"oid": "62824c3a9ed4f1a9b7e99dae16cb0339b612e6ee"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxNjoxMTozM1rOGBfRfw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxNjoxODo1MlrOGBfleA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDIxNDE0Mw==", "bodyText": "duplicate", "url": "https://github.com/axelor/axelor-open-suite/pull/5284#discussion_r404214143", "createdAt": "2020-04-06T16:11:33Z", "author": {"login": "ale-axelor"}, "path": "axelor-purchase/src/main/java/com/axelor/apps/purchase/service/print/PurchaseOrderPrintServiceImpl.java", "diffHunk": "@@ -99,6 +110,13 @@ protected String getPurchaseOrderFilesName(boolean plural, String formatPdf) {\n \n   @Override\n   public String getFileName(PurchaseOrder purchaseOrder) {\n+    if (purchaseOrder.getStatusSelect() == PurchaseOrderRepository.STATUS_DRAFT\n+        || purchaseOrder.getStatusSelect() == PurchaseOrderRepository.STATUS_REQUESTED) {\n+      return I18n.get(\"Purchase quotation\")\n+          + \" \"\n+          + purchaseOrder.getPurchaseOrderSeq()\n+          + ((purchaseOrder.getVersionNumber() > 1) ? \"-V\" + purchaseOrder.getVersionNumber() : \"\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "62824c3a9ed4f1a9b7e99dae16cb0339b612e6ee"}, "originalPosition": 54}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDIxNTE5MA==", "bodyText": "duplicate", "url": "https://github.com/axelor/axelor-open-suite/pull/5284#discussion_r404215190", "createdAt": "2020-04-06T16:12:56Z", "author": {"login": "ale-axelor"}, "path": "axelor-sale/src/main/java/com/axelor/apps/sale/service/saleorder/SaleOrderServiceImpl.java", "diffHunk": "@@ -54,7 +54,13 @@\n \n   @Override\n   public String getFileName(SaleOrder saleOrder) {\n-\n+    if (saleOrder.getStatusSelect() == SaleOrderRepository.STATUS_DRAFT_QUOTATION\n+        || saleOrder.getStatusSelect() == SaleOrderRepository.STATUS_FINALIZED_QUOTATION) {\n+      return I18n.get(\"Sale quotation\")\n+          + \" \"\n+          + saleOrder.getSaleOrderSeq()\n+          + ((saleOrder.getVersionNumber() > 1) ? \"-V\" + saleOrder.getVersionNumber() : \"\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "62824c3a9ed4f1a9b7e99dae16cb0339b612e6ee"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDIxOTI1Ng==", "bodyText": "duplicate", "url": "https://github.com/axelor/axelor-open-suite/pull/5284#discussion_r404219256", "createdAt": "2020-04-06T16:18:52Z", "author": {"login": "ale-axelor"}, "path": "axelor-sale/src/main/java/com/axelor/apps/sale/service/saleorder/print/SaleOrderPrintServiceImpl.java", "diffHunk": "@@ -107,7 +109,15 @@ public ReportSettings prepareReportSettings(SaleOrder saleOrder, boolean proform\n    *\n    * @param plural if there is one or multiple sale orders.\n    */\n-  protected String getSaleOrderFilesName(boolean plural, String format) {\n+  protected String getSaleOrderFilesName(Integer status, boolean plural, String format) {\n+    if (status == SaleOrderRepository.STATUS_DRAFT_QUOTATION\n+        || status == SaleOrderRepository.STATUS_FINALIZED_QUOTATION) {\n+      return I18n.get(plural ? \"Sale quotations\" : \"Sale quotation\")\n+          + \" - \"\n+          + Beans.get(AppBaseService.class).getTodayDate().format(DateTimeFormatter.BASIC_ISO_DATE)\n+          + \".\"\n+          + format;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "62824c3a9ed4f1a9b7e99dae16cb0339b612e6ee"}, "originalPosition": 39}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c0c12ea58b95f52d674cc5699e8ee4fbc9341b04", "author": {"user": {"login": "jch-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/c0c12ea58b95f52d674cc5699e8ee4fbc9341b04", "committedDate": "2020-04-07T07:24:41Z", "message": "RM27209: generate quotation file's title pdf according to it sale order or purchase order status"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "62824c3a9ed4f1a9b7e99dae16cb0339b612e6ee", "author": {"user": {"login": "jch-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/62824c3a9ed4f1a9b7e99dae16cb0339b612e6ee", "committedDate": "2020-04-06T15:55:15Z", "message": "RM27209: generate quotation file's title pdf according to it sale order or purchase order status"}, "afterCommit": {"oid": "c0c12ea58b95f52d674cc5699e8ee4fbc9341b04", "author": {"user": {"login": "jch-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/c0c12ea58b95f52d674cc5699e8ee4fbc9341b04", "committedDate": "2020-04-07T07:24:41Z", "message": "RM27209: generate quotation file's title pdf according to it sale order or purchase order status"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "42ef1db6ddc24354bdfb7f5057da123f6b56a049", "author": {"user": {"login": "ale-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/42ef1db6ddc24354bdfb7f5057da123f6b56a049", "committedDate": "2020-04-07T08:38:56Z", "message": "Merge branch 'dev' into dev-27209"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1971, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}