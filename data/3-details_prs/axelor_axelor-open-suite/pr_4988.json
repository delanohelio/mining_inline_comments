{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgwMTExNTgz", "number": 4988, "title": "RM25762 Catching NPE from the edit leave select view", "bodyText": "Also fixed a ClassCastException caused by a cast from a Integer to a long", "createdAt": "2020-02-26T09:37:41Z", "url": "https://github.com/axelor/axelor-open-suite/pull/4988", "merged": true, "mergeCommit": {"oid": "45e7a5b32146fe3f4e129fb4ac355c56607ac765"}, "closed": true, "closedAt": "2020-03-04T10:47:10Z", "author": {"login": "erg-axelor"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcIDYOTgH2gAyMzgwMTExNTgzOjczNDM0NGExZTFmNWZhYWNkZjk5ZDlhNmRkODcxYzQzY2Y2ZTgwZTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcKS6fNAH2gAyMzgwMTExNTgzOmNkYzIwODM4MjEyYjM0NTFmMDkxNTgwZTVlYTk5NjcyMjc4ODJmNDY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "734344a1e1f5faacdf99d9a6dd871c43cf6e80e4", "author": {"user": {"login": "erg-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/734344a1e1f5faacdf99d9a6dd871c43cf6e80e4", "committedDate": "2020-02-26T09:33:39Z", "message": "Catching NPE from the edit leave select view"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "66f3dc2cc6d64650ffc45a187d4c76cde7a4d03e", "author": {"user": {"login": "erg-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/66f3dc2cc6d64650ffc45a187d4c76cde7a4d03e", "committedDate": "2020-02-26T09:44:10Z", "message": "spotlessApply"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a15d8a08b0e4de33c24c3f3c6ba19f6725dd6123", "author": {"user": {"login": "erg-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/a15d8a08b0e4de33c24c3f3c6ba19f6725dd6123", "committedDate": "2020-02-26T10:58:40Z", "message": "CHANGELOG UPDATED"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3MjI1MzEx", "url": "https://github.com/axelor/axelor-open-suite/pull/4988#pullrequestreview-367225311", "createdAt": "2020-03-02T14:10:23Z", "commit": {"oid": "a15d8a08b0e4de33c24c3f3c6ba19f6725dd6123"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxNDoxMDoyM1rOFwgzpA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxNDoxMDoyM1rOFwgzpA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjQxMzQ3Ng==", "bodyText": "leaveId = Long.valueOf(leaveMap.get(\"id\").toString());", "url": "https://github.com/axelor/axelor-open-suite/pull/4988#discussion_r386413476", "createdAt": "2020-03-02T14:10:23Z", "author": {"login": "ale-axelor"}, "path": "axelor-human-resource/src/main/java/com/axelor/apps/hr/web/leave/LeaveController.java", "diffHunk": "@@ -105,7 +105,12 @@ public void editLeave(ActionRequest request, ActionResponse response) {\n   public void editLeaveSelected(ActionRequest request, ActionResponse response) {\n     try {\n       Map<String, Object> leaveMap = (Map<String, Object>) request.getContext().get(\"leaveSelect\");\n-      Long leaveId = Long.valueOf((long) leaveMap.get(\"id\"));\n+      Long leaveId;\n+      try {\n+        leaveId = Long.valueOf((long) leaveMap.get(\"id\"));\n+      } catch (ClassCastException e) {\n+        leaveId = Long.valueOf((long) (int) leaveMap.get(\"id\"));\n+      }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a15d8a08b0e4de33c24c3f3c6ba19f6725dd6123"}, "originalPosition": 10}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3MjI2NjQy", "url": "https://github.com/axelor/axelor-open-suite/pull/4988#pullrequestreview-367226642", "createdAt": "2020-03-02T14:12:09Z", "commit": {"oid": "a15d8a08b0e4de33c24c3f3c6ba19f6725dd6123"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxNDoxMjowOVrOFwg3Yw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxNDoxMjowOVrOFwg3Yw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjQxNDQzNQ==", "bodyText": "check if leaveMap.get(\"id\") is null instead of catching NPE", "url": "https://github.com/axelor/axelor-open-suite/pull/4988#discussion_r386414435", "createdAt": "2020-03-02T14:12:09Z", "author": {"login": "ale-axelor"}, "path": "axelor-human-resource/src/main/java/com/axelor/apps/hr/web/leave/LeaveController.java", "diffHunk": "@@ -114,6 +119,8 @@ public void editLeaveSelected(ActionRequest request, ActionResponse response) {\n               .domain(\"self.id = \" + leaveId)\n               .context(\"_showRecord\", leaveId)\n               .map());\n+    } catch (NullPointerException e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a15d8a08b0e4de33c24c3f3c6ba19f6725dd6123"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "268b78fa230dbdd05909e12126bb82c4cefdb69d", "author": {"user": {"login": "erg-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/268b78fa230dbdd05909e12126bb82c4cefdb69d", "committedDate": "2020-03-02T15:44:05Z", "message": "fix previous changes according to the pull request comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2829ab985a5d5fb74ca131d29e7a6ea7e57bcbbe", "author": {"user": {"login": "erg-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/2829ab985a5d5fb74ca131d29e7a6ea7e57bcbbe", "committedDate": "2020-03-02T15:45:44Z", "message": "Merge branch '5.2-dev' into 5.2-dev-25762"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5da77457d2d66be3c437fb46f7d94b0e922e2976", "author": {"user": {"login": "ale-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/5da77457d2d66be3c437fb46f7d94b0e922e2976", "committedDate": "2020-03-03T17:08:35Z", "message": "Merge branch '5.2-dev' into 5.2-dev-25762"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cdc20838212b3451f091580e5ea9967227882f46", "author": {"user": {"login": "erg-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/cdc20838212b3451f091580e5ea9967227882f46", "committedDate": "2020-03-04T08:47:30Z", "message": "i18n message for the error"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2040, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}