{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkxNTEzMDQy", "number": 5874, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQwNzo1NjoxMVrOEzrx2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQxNDo1NToxOFrOE_MNrw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyNjMwMTA1OnYy", "diffSide": "RIGHT", "path": "axelor-business-support/src/main/java/com/axelor/apps/businesssupport/module/BusinessSupportModule.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQwNzo1NjoxMVrOHrEcAw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQwNzo1NjoxMVrOHrEcAw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDkyMzUyMw==", "bodyText": "This binding is already specified in BusinessProjectModule", "url": "https://github.com/axelor/axelor-open-suite/pull/5874#discussion_r514923523", "createdAt": "2020-10-30T07:56:11Z", "author": {"login": "vbh-axelor"}, "path": "axelor-business-support/src/main/java/com/axelor/apps/businesssupport/module/BusinessSupportModule.java", "diffHunk": "@@ -18,19 +18,22 @@\n package com.axelor.apps.businesssupport.module;\n \n import com.axelor.app.AxelorModule;\n-import com.axelor.apps.businessproject.db.repo.TeamTaskBusinessProjectRepository;\n+import com.axelor.apps.businessproject.db.repo.ProjectTaskBusinessProjectRepository;\n import com.axelor.apps.businessproject.service.ProjectBusinessServiceImpl;\n-import com.axelor.apps.businessproject.service.TeamTaskBusinessProjectServiceImpl;\n-import com.axelor.apps.businesssupport.db.repo.TeamTaskBusinessSupportRepository;\n+import com.axelor.apps.businessproject.service.ProjectTaskBusinessProjectService;\n+import com.axelor.apps.businessproject.service.ProjectTaskBusinessProjectServiceImpl;\n+import com.axelor.apps.businesssupport.db.repo.ProjectTaskBusinessSupportRepository;\n import com.axelor.apps.businesssupport.service.ProjectBusinessSupportServiceImpl;\n-import com.axelor.apps.businesssupport.service.TeamTaskBusinessSupportServiceImpl;\n+import com.axelor.apps.businesssupport.service.ProjectTaskBusinessSupportServiceImpl;\n \n public class BusinessSupportModule extends AxelorModule {\n \n   @Override\n   protected void configure() {\n-    bind(TeamTaskBusinessProjectServiceImpl.class).to(TeamTaskBusinessSupportServiceImpl.class);\n-    bind(TeamTaskBusinessProjectRepository.class).to(TeamTaskBusinessSupportRepository.class);\n+    bind(ProjectTaskBusinessProjectService.class).to(ProjectTaskBusinessProjectServiceImpl.class);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e3548761c62d99153e99cfd1a4f2b2db6d125106"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyNzE0OTYxOnYy", "diffSide": "RIGHT", "path": "axelor-human-resource/src/main/resources/views/ProjectPlanningTime.xml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQxMjowNzo0NlrOHrMSdA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQxMjowNzo0NlrOHrMSdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTA1MjE0OA==", "bodyText": "Keep _parent_  instead of _parent", "url": "https://github.com/axelor/axelor-open-suite/pull/5874#discussion_r515052148", "createdAt": "2020-10-30T12:07:46Z", "author": {"login": "vbh-axelor"}, "path": "axelor-human-resource/src/main/resources/views/ProjectPlanningTime.xml", "diffHunk": "@@ -104,18 +104,18 @@\n \t</action-attrs>\n \t\n \t<action-attrs name=\"action-project-planning-time-attrs-default\">\n-\t\t<attribute name=\"value\" for=\"task\" expr=\"eval:_task\"/>\n+\t\t<attribute name=\"value\" for=\"projectTask\" expr=\"eval:_projectTask\"/>\n \t\t<attribute name=\"value\" for=\"project\" expr=\"eval:_project\"/>\n \t\t<attribute name=\"value\" for=\"userSet\" expr=\"eval:_project.membersUserSet\" if=\"_project != null\"/>\n \t\t<attribute name=\"value\" for=\"user\" expr=\"eval:__user__\" if=\"_project &amp;&amp; __user__ in __repo__(Project).find(_project.id).membersUserSet\"/>\n \t\t<attribute name=\"value\" for=\"product\" expr=\"eval: __user__.employee.product\" if=\"_project &amp;&amp; __user__ in __repo__(Project).find(_project.id).membersUserSet &amp;&amp; __user__.employee\"/>\n \t\t\n \t\t<attribute name=\"value\" for=\"date\" expr=\"#{__date__}\"/>\n-\t\t<attribute name=\"value\" for=\"user\" expr=\"eval:__user__\" if=\"__parent__?._model == 'com.axelor.team.db.TeamTask' &amp;&amp; __parent__?.project &amp;&amp; __user__ in __repo__(Project).find(__parent__.project.id).membersUserSet\"/>\n-\t\t<attribute name=\"value\" for=\"project\" expr=\"eval:__parent__?.project\" if=\"__parent__?._model == 'com.axelor.team.db.TeamTask'\"/>\n-\t\t<attribute name=\"value\" for=\"task\" expr=\"eval:__parent__\" if=\"__parent__?._model == 'com.axelor.team.db.TeamTask'\"/>\n-\t\t<attribute name=\"readonly\" for=\"task\" expr=\"eval:true\" if=\"__parent__?._model == 'com.axelor.team.db.TeamTask' || _task\"/>\n-\t\t<attribute name=\"value\" for=\"product\" expr=\"eval: __user__.employee.product\" if=\"__parent__?._model == 'com.axelor.team.db.TeamTask' &amp;&amp; __parent__?.project &amp;&amp; __user__ in __repo__(Project).find(__parent__.project.id).membersUserSet &amp;&amp; __user__.employee\"/>\n+\t\t<attribute name=\"value\" for=\"user\" expr=\"eval:__user__\" if=\"_parent?._model == 'com.axelor.apps.project.db.ProjectTask' &amp;&amp; _parent?.project &amp;&amp; __user__ in __repo__(Project).find(_parent.project.id).membersUserSet\"/>\n+\t\t<attribute name=\"value\" for=\"project\" expr=\"eval:_parent?.project\" if=\"_parent?._model == 'com.axelor.apps.project.db.ProjectTask'\"/>\n+\t\t<attribute name=\"value\" for=\"projectTask\" expr=\"eval:_parent\" if=\"_parent?._model == 'com.axelor.apps.project.db.ProjectTask'\"/>\n+\t\t<attribute name=\"readonly\" for=\"projectTask\" expr=\"eval:true\" if=\"_parent?._model == 'com.axelor.apps.project.db.ProjectTask' || _projectTask\"/>\n+\t\t<attribute name=\"value\" for=\"product\" expr=\"eval: __user__.employee.product\" if=\"_parent?._model == 'com.axelor.apps.project.db.ProjectTask' &amp;&amp; _parent?.project &amp;&amp; __user__ in __repo__(Project).find(_parent.project.id).membersUserSet &amp;&amp; __user__.employee\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e3548761c62d99153e99cfd1a4f2b2db6d125106"}, "originalPosition": 68}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyNzI3MDA5OnYy", "diffSide": "RIGHT", "path": "axelor-human-resource/src/main/resources/views/TimesheetLine.xml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQxMjo0MjowMVrOHrNX_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQxMjo0MjowMVrOHrNX_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTA2OTk1MA==", "bodyText": "Change spelling 'timeshet' to 'timesheet'", "url": "https://github.com/axelor/axelor-open-suite/pull/5874#discussion_r515069950", "createdAt": "2020-10-30T12:42:01Z", "author": {"login": "vbh-axelor"}, "path": "axelor-human-resource/src/main/resources/views/TimesheetLine.xml", "diffHunk": "@@ -332,18 +332,18 @@\n   \t\t<context if=\"id != null &amp;&amp; isShowPhasesElements\" name=\"_projectIds\" expr=\"eval:[id] + childProjectList.collect{it->it.id}\"/>\n \t</action-view>\n \t\n-\t<action-view name=\"action-teamtask-dashlet-validated-timeshet-lines\" model=\"com.axelor.apps.hr.db.TimesheetLine\" title=\"Validated Timesheet lines\">\n-\t\t<view type=\"grid\" name=\"timesheet-line-teamtask-grid\"/>\n-\t\t<view type=\"form\" name=\"timesheet-line-timesheet-teamtask-form\"/>\n+\t<action-view name=\"action-project-task-dashlet-validated-timeshet-lines\" model=\"com.axelor.apps.hr.db.TimesheetLine\" title=\"Validated Timesheet lines\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e3548761c62d99153e99cfd1a4f2b2db6d125106"}, "originalPosition": 132}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM0Njk1ODU1OnYy", "diffSide": "RIGHT", "path": "axelor-project/src/main/resources/views/ProjectTask.xml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQxNDo1NToxOFrOH8wt0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQxNDo1NToxOFrOH8wt0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzQ3NDc2OQ==", "bodyText": "Specified grid-view is incorrect", "url": "https://github.com/axelor/axelor-open-suite/pull/5874#discussion_r533474769", "createdAt": "2020-12-01T14:55:18Z", "author": {"login": "vbh-axelor"}, "path": "axelor-project/src/main/resources/views/ProjectTask.xml", "diffHunk": "@@ -0,0 +1,579 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\n+<object-views xmlns=\"http://axelor.com/xml/ns/object-views\"\n+              xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+              xsi:schemaLocation=\"http://axelor.com/xml/ns/object-views http://axelor.com/xml/ns/object-views/object-views_5.4.xsd\">\n+\n+  <grid name=\"project-task-grid\" title=\"Tasks\" model=\"com.axelor.apps.project.db.ProjectTask\" edit-icon=\"true\" orderBy=\"taskDate,priority\">\n+    <hilite if=\"status == 3\" color=\"success\"/>\n+    <hilite if=\"$moment(taskEndDate).diff(todayDate,'days') &lt; 0\" color=\"danger\"/>\n+    <hilite if=\"priority == 4\" color=\"warning\"/>\n+    <field name=\"name\"/>\n+    <field name=\"project\"/>\n+    <field name=\"taskDate\"/>\n+    <field name=\"taskEndDate\" hidden=\"true\"/>\n+    <field name=\"status\"/>\n+    <field name=\"priority\"/>\n+    <field name=\"projectTaskCategory\"/>\n+    <field name=\"targetVersion\" if-module=\"axelor-business-support\" if=\"__config__.app.isApp('business-support')\"/>\n+        <button name=\"timeSpentBtn\" title=\"Enter Time spent\" icon=\"fa-clock-o\" onClick=\"action-project-task-view-time-spent\" />\n+  </grid>\n+  \n+  <form name=\"project-task-form\" title=\"Task\" model=\"com.axelor.apps.project.db.ProjectTask\"\n+        onNew=\"action-project-task-group-onnew\"\n+        onLoad=\"action-project-task-group-timer-process\" width=\"large\">\n+    <toolbar>\n+      <button name=\"grabEventBtn\" icon=\"fa-suitcase\" help=\"Take charge\" onClick=\"action-project-task-record-assigned-yourself,save\"/>\n+      <button name=\"startBtn\" icon=\"fa-play\" onClick=\"action-project-task-record-status-in-progress,save\"/>\n+      <button name=\"acceptBtn\" icon=\"fa-check\" onClick=\"action-project-task-record-status-closed,save\"/>\n+      <button name=\"stopBtn\" icon=\"fa-power-off\" onClick=\"action-project-task-record-status-canceled,save\"/>\n+    </toolbar>\n+    <menubar>\n+          <menu name=\"projectTaskMenu\" title=\"Tools\">   \n+              <item name=\"bookResourceItem\" title=\"Book resource\" action=\"save,action-project-task-book-resource\"/>\n+          </menu>\n+    </menubar>\n+\n+    <panel showIf=\"nextProjectTask\">\n+      <field name=\"doApplyToAllNextTasks\" widget=\"InlineCheckbox\" colSpan=\"12\"/>\n+    </panel>\n+\n+    <panel name=\"mainPanel\" colSpan=\"12\">\n+      <field name=\"status\" colSpan=\"6\" required=\"true\" widget=\"NavSelect\" showTitle=\"false\"/>\n+      <panel name=\"viewerTagsPanel\" colSpan=\"4\">\n+        <field name=\"$viewerTags\" showTitle=\"false\" readonly=\"true\" showIf=\"typeSelect == 1 &amp;&amp; $readonly()\" colSpan=\"12\" if-module=\"axelor-business-support\" if=\"__config__.app.isApp('business-support')\" hidden=\"true\">\n+          <viewer>\n+            <![CDATA[\n+              <h4 class=\"text-right\">\n+                <span class=\"label label-important\" ng-show=\"record.assignment == 1\" x-translate>Task assigned to the client</span>\n+                <span class=\"label label-success\" ng-show=\"record.assignment == 2 && record.$provider == null\" x-translate>Task assigned to the provider</span>\n+                <span class=\"label label-success\" style=\"background-color: #5cb85c; margin: 5px 0 !important; display: inline-table; line-height: initial; border-top-right-radius: 0; border-bottom-right-radius: 0; padding-right: 0.3em;\" ng-show=\"record.assignment == 2 && record.$provider != null\" x-translate>Task assigned to</span><span class=\"label label-success\" style=\"background-color: #5cb85c; margin: 5px 0 !important; display: inline-table; line-height: initial; border-top-left-radius: 0; border-bottom-left-radius: 0; padding-left: 0.0em;\" ng-show=\"record.assignment == 2 && record.$provider != null\">{{record.$provider}}</span>\n+\n+                <span class=\"label label-important\" ng-show=\"(!record.isOrderAccepted && record.invoicingType == 2 && record.exTaxTotal != 0) || (!record.isOrderAccepted && record.invoicingType == 1)\" x-translate>Order Proposed</span>\n+                <span class=\"label label-success\" ng-show=\"record.isOrderAccepted\" x-translate>Order Accepted</span>\n+              </h4>\n+            ]]>\n+          </viewer>\n+        </field>\n+      </panel>\n+      <button name=\"timeSpentBtn\" title=\"Enter Time spent\" onClick=\"save,action-project-task-view-time-spent\" colSpan=\"2\"/>\n+      <field name=\"$provider\" hidden=\"true\" type=\"string\"/>\n+      <panel name=\"projectDetailsPanel\" colSpan=\"12\">\n+        <panel name=\"detailsPanel\" colSpan=\"8\">\n+          <field name=\"fullName\" showTitle=\"false\" colSpan=\"12\">\n+            <viewer depends=\"name\">\n+            <![CDATA[\n+              <h3>\n+                <span style=\"margin: 5px 0 !important; display: inline-table; line-height: initial;\">{{record.name}}</span>\n+              </h3>\n+            ]]>\n+            </viewer>\n+            <editor>\n+              <field name=\"name\" title=\"Subject\" colSpan=\"12\" css=\"label-bold bold large\" required=\"true\"/>\n+            </editor>\n+          </field>\n+          <field name=\"project\" colSpan=\"6\" onChange=\"action-project-task-group-project-onchange\" required=\"true\" domain=\"self.statusSelect != 3 AND self.statusSelect != 4\"/>\n+          <field name=\"parentTask\" readonlyIf=\"project == null\" colSpan=\"6\" onSelect=\"action-project-task-attrs-parent-task-configurations\"/>\n+          <field name=\"assignedTo\" readonlyIf=\"project == null\" colSpan=\"6\" canNew=\"false\" canView=\"false\" canEdit=\"false\" onSelect=\"action-project-task-attrs-project-assigned-to-configurations\" required=\"true\" form-view=\"user-form\" grid-view=\"user-grid\"/>\n+          <field name=\"team\" readonly=\"true\" colSpan=\"6\" form-view=\"team-form\" grid-view=\"team-grid\" if=\"!__config__.app.isApp('business-support')\"/>\n+          <field name=\"customerReferral\" onSelect=\"action-project-task-attrs-customer-referral-domain\" hidden=\"true\" showIf=\"typeSelect == 1\" if=\"__config__.app.isApp('business-project')\"/>\n+          <field name=\"isPrivate\" hidden=\"true\" showIf=\"typeSelect == 1\" colSpan=\"6\"  if-module=\"axelor-business-support\" if=\"__config__.app.isApp('business-support')\"/>\n+          <field name=\"isOrderAccepted\" colSpan=\"3\" hidden=\"true\" showIf=\"typeSelect == 1\" if-module=\"axelor-business-support\" if=\"__config__.app.isApp('business-support')\"/>\n+          <field name=\"isOrderProposed\" hidden=\"true\" colSpan=\"3\" if-module=\"axelor-business-support\" if=\"__config__.app.isApp('business-support')\"/>\n+        </panel>\n+        <panel name=\"actionPanel\" colSpan=\"4\">\n+          <button name=\"acceptOrderBtn\" title=\"Accept Order\" hidden=\"true\" hideIf=\"invoicingType != 1  || isOrderAccepted || typeSelect != 1\" onClick=\"action-project-task-attrs-onclick-order-accepted,save\" colSpan=\"12\" if-module=\"axelor-business-support\" if=\"__config__.app.isApp('business-support')\"/>\n+          <button name=\"assigningProviderBtn\" colSpan=\"12\" title=\"Assigning to the provider\" hidden=\"true\" onClick=\"action-project-task-attrs-assginment-provider,save\" if-module=\"axelor-business-support\" if=\"__config__.app.isApp('business-support')\" showIf=\"assignment == 1 &amp;&amp; typeSelect == 1\"/>\n+          <button name=\"assigningCustomerBtn\" colSpan=\"12\" title=\"Assigning to the customer\" hidden=\"true\" onClick=\"action-project-task-attrs-assginment-customer,save\" if-module=\"axelor-business-support\" if=\"__config__.app.isApp('business-support')\" showIf=\"assignment == 2 &amp;&amp; typeSelect == 1\"/>\n+        </panel>\n+      </panel>\n+      <panel name=\"characteristicsPanel\" title=\"Characteristics\" colSpan=\"12\">\n+        <field name=\"projectTaskCategory\" colSpan=\"4\" onSelect=\"action-project-task-attrs-project-task-category-configurations\" onChange=\"action-project-task-group-project-category-onchange\"/>\n+        <field name=\"priority\" colSpan=\"4\" required=\"true\"/>\n+        <field name=\"targetVersion\" if-module=\"axelor-business-support\" if=\"__config__.app.isApp('business-support')\" domain=\":project member of self.projectSet\" colSpan=\"4\" form-view=\"project-version-form\" grid-view=\"project-version-grid\"/>\n+        <field name=\"assignment\" hidden=\"true\" showIf=\"typeSelect == 1\" if-module=\"axelor-business-support\" if=\"__config__.app.isApp('business-support')\" colSpan=\"4\"/>\n+        <field name=\"taskDate\" title=\"Task date\" colSpan=\"4\" onChange=\"action-project-task-attrs-set-task-duration,action-project-task-record-set-date-or-frequency-changed\" required=\"true\"/>\n+        <field name=\"taskEndDate\" colSpan=\"4\" onChange=\"action-project-task-attrs-set-task-duration\"/>\n+        <field name=\"taskDeadline\" title=\"Task deadline\" colSpan=\"4\" if=\"!__config__.app.isApp('business-support')\"/>\n+       \t<field name=\"projectTaskTagSet\"  widget=\"tagSelect\" form-view=\"project-task-tag-form\" grid-view=\"project-task-tag-form\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a50e45b27e33cbbf1815a86a1a2ae198815d1bef"}, "originalPosition": 97}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3568, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}