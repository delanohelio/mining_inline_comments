{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg5ODE5Mzc0", "number": 5142, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxMzo1NToyNVrODp4JKA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxMzo1Njo1M1rODp4LeQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1MjM4MDU2OnYy", "diffSide": "RIGHT", "path": "CHANGELOG.md", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxMzo1NToyNVrOF5Urrw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxMzo1NToyNVrOF5Urrw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTY1MjAxNQ==", "bodyText": "diplay => display\navaible => available", "url": "https://github.com/axelor/axelor-open-suite/pull/5142#discussion_r395652015", "createdAt": "2020-03-20T13:55:25Z", "author": {"login": "ale-axelor"}, "path": "CHANGELOG.md", "diffHunk": "@@ -50,6 +50,7 @@\n - LEAVE REQUEST: corrected error when trying to change user.\n - EMPLOYEE: update the employee records in demo data so the creation process is finished.\n - LEAD: removed non persistable field wrongly appearing on the form view.\n+- MANUFACTURING ORDER : On consumed product, no longer diplay tracking numbers if avaible quantity equals 0.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "df6259557b193799a2aee02532d823948a25a2ad"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1MjM4Mjg1OnYy", "diffSide": "RIGHT", "path": "axelor-stock/src/main/java/com/axelor/apps/stock/service/StockMoveLineServiceImpl.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxMzo1NTo1OFrOF5UtCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxMzo1NTo1OFrOF5UtCg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTY1MjM2Mg==", "bodyText": "\ud83d\udc4d", "url": "https://github.com/axelor/axelor-open-suite/pull/5142#discussion_r395652362", "createdAt": "2020-03-20T13:55:58Z", "author": {"login": "ale-axelor"}, "path": "axelor-stock/src/main/java/com/axelor/apps/stock/service/StockMoveLineServiceImpl.java", "diffHunk": "@@ -1195,14 +1195,14 @@ public void setAvailableStatus(StockMoveLine stockMoveLine) {\n \n   public List<TrackingNumber> getAvailableTrackingNumbers(\n       StockMoveLine stockMoveLine, StockMove stockMove) {\n-    List<TrackingNumber> trackingNumbers = null;\n     String domain =\n         \"self.product.id = \"\n             + stockMoveLine.getProduct().getId()\n-            + \" AND self.id in (select stockLocationLine.trackingNumber.id from StockLocationLine stockLocationLine join StockLocation sl on sl.id = stockLocationLine.detailsStockLocation.id WHERE sl.id = \"\n+            + \" AND self.id in (select stockLocationLine.trackingNumber.id from StockLocationLine stockLocationLine\"\n+            + \" join StockLocation sl on sl.id = stockLocationLine.detailsStockLocation.id WHERE sl.id = \"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "df6259557b193799a2aee02532d823948a25a2ad"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1MjM4NjQ5OnYy", "diffSide": "RIGHT", "path": "axelor-stock/src/main/java/com/axelor/apps/stock/service/StockMoveLineServiceImpl.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxMzo1Njo1M1rOF5UvaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxMzo1Njo1M1rOF5UvaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTY1Mjk2OQ==", "bodyText": "Small nitpick but you don't have to create a trackingNumbers variable and you can instead return trackingNumberRepo.all().filter(domain).fetch();", "url": "https://github.com/axelor/axelor-open-suite/pull/5142#discussion_r395652969", "createdAt": "2020-03-20T13:56:53Z", "author": {"login": "ale-axelor"}, "path": "axelor-stock/src/main/java/com/axelor/apps/stock/service/StockMoveLineServiceImpl.java", "diffHunk": "@@ -1195,14 +1195,14 @@ public void setAvailableStatus(StockMoveLine stockMoveLine) {\n \n   public List<TrackingNumber> getAvailableTrackingNumbers(\n       StockMoveLine stockMoveLine, StockMove stockMove) {\n-    List<TrackingNumber> trackingNumbers = null;\n     String domain =\n         \"self.product.id = \"\n             + stockMoveLine.getProduct().getId()\n-            + \" AND self.id in (select stockLocationLine.trackingNumber.id from StockLocationLine stockLocationLine join StockLocation sl on sl.id = stockLocationLine.detailsStockLocation.id WHERE sl.id = \"\n+            + \" AND self.id in (select stockLocationLine.trackingNumber.id from StockLocationLine stockLocationLine\"\n+            + \" join StockLocation sl on sl.id = stockLocationLine.detailsStockLocation.id WHERE sl.id = \"\n             + stockMove.getFromStockLocation().getId()\n-            + \" )\";\n-    trackingNumbers = trackingNumberRepo.all().filter(domain).fetch();\n+            + \" AND coalesce(stockLocationLine.currentQty, 0) != 0)\";\n+    List<TrackingNumber> trackingNumbers = trackingNumberRepo.all().filter(domain).fetch();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "df6259557b193799a2aee02532d823948a25a2ad"}, "originalPosition": 15}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3450, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}