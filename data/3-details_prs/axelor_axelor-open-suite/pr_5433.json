{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE3MTk4MTc1", "number": 5433, "title": "RM28107: Fix timesheet editor still being displayed with a disabled c\u2026", "bodyText": "\u2026onfig", "createdAt": "2020-05-13T08:20:20Z", "url": "https://github.com/axelor/axelor-open-suite/pull/5433", "merged": true, "mergeCommit": {"oid": "dbf14c35fa7d0c9e17330c44b921096aa517a133"}, "closed": true, "closedAt": "2020-07-16T09:01:14Z", "author": {"login": "aol-axelor"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcwARRpgBqjM0OTI0NjcyODQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc1bartgH2gAyNDE3MTk4MTc1OjY5MmI1NmI2ZGRkZTJmZWUxMmY0NWE1NDQ5MDZmMzk2YzU0YjYzZmY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "705d209f86d96002e09f8a5b4bd24158ee6977d3", "author": {"user": {"login": "aol-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/705d209f86d96002e09f8a5b4bd24158ee6977d3", "committedDate": "2020-05-13T08:21:09Z", "message": "Merge branch 'dev' into dev-28107"}, "afterCommit": {"oid": "69d387285c0be9a1c6f8c9121a38ce39037dd08f", "author": {"user": {"login": "aol-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/69d387285c0be9a1c6f8c9121a38ce39037dd08f", "committedDate": "2020-06-29T12:33:04Z", "message": "RM28107: Fix timesheet editor still being displayed with a disabled config"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2MzU3NzMy", "url": "https://github.com/axelor/axelor-open-suite/pull/5433#pullrequestreview-446357732", "createdAt": "2020-07-10T12:24:13Z", "commit": {"oid": "98ad9b1e272c973ef6e07a765e2f716a3216252a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQxMjoyNTo1N1rOGv1Xew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQxMjoyODo0MVrOGv1cJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjgxMDYxOQ==", "bodyText": "Add an order by on the query. Currently this randomly will not update all timesheets.", "url": "https://github.com/axelor/axelor-open-suite/pull/5433#discussion_r452810619", "createdAt": "2020-07-10T12:25:57Z", "author": {"login": "ale-axelor"}, "path": "axelor-human-resource/src/main/java/com/axelor/apps/hr/service/app/AppTimesheetServiceImpl.java", "diffHunk": "@@ -0,0 +1,38 @@\n+package com.axelor.apps.hr.service.app;\n+\n+import com.axelor.apps.base.service.administration.AbstractBatch;\n+import com.axelor.apps.hr.db.Timesheet;\n+import com.axelor.apps.hr.db.repo.TimesheetRepository;\n+import com.axelor.db.JPA;\n+import com.axelor.db.Query;\n+import com.google.inject.Inject;\n+import com.google.inject.persist.Transactional;\n+\n+import java.util.List;\n+\n+public class AppTimesheetServiceImpl implements AppTimesheetService {\n+    protected TimesheetRepository timesheetRepo;\n+\n+    @Inject\n+    public AppTimesheetServiceImpl(TimesheetRepository timesheetRepo) {\n+        this.timesheetRepo = timesheetRepo;\n+    }\n+\n+    @Override\n+    @Transactional(rollbackOn = {Exception.class})\n+    public void switchTimesheetEditors(Boolean state) {\n+        List<Timesheet> timesheets;\n+        Query<Timesheet> query = timesheetRepo.all();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98ad9b1e272c973ef6e07a765e2f716a3216252a"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjgxMTgxNQ==", "bodyText": "This must be in a try catch block\ntry { \n//\n} catch(Exception e) { \n  TraceBackService.trace(response, e);\n}", "url": "https://github.com/axelor/axelor-open-suite/pull/5433#discussion_r452811815", "createdAt": "2020-07-10T12:28:41Z", "author": {"login": "ale-axelor"}, "path": "axelor-human-resource/src/main/java/com/axelor/apps/hr/web/AppTimesheetController.java", "diffHunk": "@@ -0,0 +1,14 @@\n+package com.axelor.apps.hr.web;\n+\n+import com.axelor.apps.base.db.AppTimesheet;\n+import com.axelor.apps.hr.service.app.AppTimesheetService;\n+import com.axelor.inject.Beans;\n+import com.axelor.rpc.ActionRequest;\n+import com.axelor.rpc.ActionResponse;\n+\n+public class AppTimesheetController {\n+    public void switchTimesheetEditors(ActionRequest request, ActionResponse response) {\n+        AppTimesheet appTimesheet = request.getContext().asType(AppTimesheet.class);\n+        Beans.get(AppTimesheetService.class).switchTimesheetEditors(appTimesheet.getTimesheetEditor());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98ad9b1e272c973ef6e07a765e2f716a3216252a"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b6bf928ffbe705e6d7ae9ad1315736c9730ac05c", "author": {"user": {"login": "aol-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/b6bf928ffbe705e6d7ae9ad1315736c9730ac05c", "committedDate": "2020-07-10T13:06:27Z", "message": "RM28107: Fix timesheet editor still being displayed with a disabled config"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "98ad9b1e272c973ef6e07a765e2f716a3216252a", "author": {"user": {"login": "aol-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/98ad9b1e272c973ef6e07a765e2f716a3216252a", "committedDate": "2020-06-29T12:36:56Z", "message": "Merge branch 'dev' into dev-28107"}, "afterCommit": {"oid": "b6bf928ffbe705e6d7ae9ad1315736c9730ac05c", "author": {"user": {"login": "aol-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/b6bf928ffbe705e6d7ae9ad1315736c9730ac05c", "committedDate": "2020-07-10T13:06:27Z", "message": "RM28107: Fix timesheet editor still being displayed with a disabled config"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "81cb9b394fb780adb93fbf77df0595678274757f", "author": {"user": {"login": "aol-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/81cb9b394fb780adb93fbf77df0595678274757f", "committedDate": "2020-07-10T13:14:05Z", "message": "Merge branch 'dev' into dev-28107"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2NDExMDUz", "url": "https://github.com/axelor/axelor-open-suite/pull/5433#pullrequestreview-446411053", "createdAt": "2020-07-10T13:42:05Z", "commit": {"oid": "81cb9b394fb780adb93fbf77df0595678274757f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQxMzo0MjowNVrOGv318Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQxMzo0MjowNVrOGv318Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mjg1MTE4NQ==", "bodyText": "do not add a changelog entry in already released version", "url": "https://github.com/axelor/axelor-open-suite/pull/5433#discussion_r452851185", "createdAt": "2020-07-10T13:42:05Z", "author": {"login": "ale-axelor"}, "path": "CHANGELOG.md", "diffHunk": "@@ -111,6 +111,7 @@\n - PRODUCT VARIANTS: fix for error in product variant creation.\n - STOCK LOCATION LINE: Fix blank screen issue in stock correction process.\n - ACCOUNT: Fixed inconsistency of analytic distribution settings and tax settings.\n+- TIMESHEET : Fix editor still being displayed even with a disabled config", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "81cb9b394fb780adb93fbf77df0595678274757f"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bff8fa2899653226c143011d7128bea880f92093", "author": {"user": {"login": "aol-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/bff8fa2899653226c143011d7128bea880f92093", "committedDate": "2020-07-10T14:02:47Z", "message": "Update CHANGELOG.md"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2NDI3Njk3", "url": "https://github.com/axelor/axelor-open-suite/pull/5433#pullrequestreview-446427697", "createdAt": "2020-07-10T14:03:12Z", "commit": {"oid": "bff8fa2899653226c143011d7128bea880f92093"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "692b56b6ddde2fee12f45a544906f396c54b63ff", "author": {"user": {"login": "ale-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/692b56b6ddde2fee12f45a544906f396c54b63ff", "committedDate": "2020-07-16T09:00:39Z", "message": "Merge branch 'dev' into dev-28107"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1906, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}