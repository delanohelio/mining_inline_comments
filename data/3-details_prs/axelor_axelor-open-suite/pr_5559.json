{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM5NzQ5OTUx", "number": 5559, "title": "RM#25402 Print templates", "bodyText": "", "createdAt": "2020-06-25T07:21:04Z", "url": "https://github.com/axelor/axelor-open-suite/pull/5559", "merged": true, "mergeCommit": {"oid": "7bf5e98db88f60b1ac50ebd506f06494c6259367"}, "closed": true, "closedAt": "2020-06-25T09:23:33Z", "author": {"login": "srab-axelor"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcSuizbAH2gAyNDM5NzQ5OTUxOjAzZjMwZTM0ZjI5OTI4YTgxY2NjZWQ1ZDdjMzk5MmE3ZmM5YjUyNmQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcurC0sABqjM0ODE0Mjg2Njk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "03f30e34f29928a81ccced5d7c3992a7fc9b526d", "author": {"user": {"login": "srab-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/03f30e34f29928a81ccced5d7c3992a7fc9b526d", "committedDate": "2020-03-30T13:30:22Z", "message": "RM#25402 PrintTemplate feature"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "66ae67eea80113759d8efbc97b2a6705f6f73627", "author": {"user": {"login": "srab-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/66ae67eea80113759d8efbc97b2a6705f6f73627", "committedDate": "2020-03-30T14:32:22Z", "message": "Merge branch 'wip-6.0' into wip-6.0-25402"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1fc8314164807d6744772111a537ec3e2c9b6c8b", "author": {"user": {"login": "srab-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/1fc8314164807d6744772111a537ec3e2c9b6c8b", "committedDate": "2020-06-24T13:10:42Z", "message": "RM#25402 Print template and docusign"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6bb7fa5ec9d75772bafe70f6eb4cc5d8d636d87d", "author": {"user": {"login": "srab-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/6bb7fa5ec9d75772bafe70f6eb4cc5d8d636d87d", "committedDate": "2020-06-24T13:16:57Z", "message": "Merge branch 'wip-6.0' into wip-6.0-25402"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "56501a47ce7da32b6f88c1736d80467bdd67ff1e", "author": {"user": {"login": "srab-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/56501a47ce7da32b6f88c1736d80467bdd67ff1e", "committedDate": "2020-06-25T06:30:42Z", "message": "Delete DocuSign"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f4584a288cdaf7064aa45dd6aac7a85ae8ea73e2", "author": {"user": {"login": "srab-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/f4584a288cdaf7064aa45dd6aac7a85ae8ea73e2", "committedDate": "2020-06-25T07:15:03Z", "message": "RM#25402 Print template : Correcting traductions"}, "afterCommit": {"oid": "37f61068c3c6ce6962db5ad48e5653dcbf58e0a7", "author": {"user": {"login": "srab-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/37f61068c3c6ce6962db5ad48e5653dcbf58e0a7", "committedDate": "2020-06-25T07:40:25Z", "message": "RM#25402 Print template : Correcting traductions"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3MjU2OTQ4", "url": "https://github.com/axelor/axelor-open-suite/pull/5559#pullrequestreview-437256948", "createdAt": "2020-06-25T08:01:19Z", "commit": {"oid": "37f61068c3c6ce6962db5ad48e5653dcbf58e0a7"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQwODowMToxOVrOGovsoQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQwODoxMDo0OFrOGowBGQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTM3NzY5Nw==", "bodyText": "Please call i18n to translate the messages here", "url": "https://github.com/axelor/axelor-open-suite/pull/5559#discussion_r445377697", "createdAt": "2020-06-25T08:01:19Z", "author": {"login": "ale-axelor"}, "path": "axelor-base/src/main/java/com/axelor/apps/base/service/PrintServiceImpl.java", "diffHunk": "@@ -0,0 +1,156 @@\n+/*\n+ * Axelor Business Solutions\n+ *\n+ * Copyright (C) 2019 Axelor (<http://axelor.com>).\n+ *\n+ * This program is free software: you can redistribute it and/or  modify\n+ * it under the terms of the GNU Affero General Public License, version 3,\n+ * as published by the Free Software Foundation.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU Affero General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Affero General Public License\n+ * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+ */\n+package com.axelor.apps.base.service;\n+\n+import com.axelor.apps.ReportFactory;\n+import com.axelor.apps.base.db.Print;\n+import com.axelor.apps.base.db.repo.PrintRepository;\n+import com.axelor.apps.base.exceptions.IExceptionMessage;\n+import com.axelor.apps.base.report.IReport;\n+import com.axelor.apps.report.engine.ReportSettings;\n+import com.axelor.common.ObjectUtils;\n+import com.axelor.common.StringUtils;\n+import com.axelor.db.JPA;\n+import com.axelor.db.Model;\n+import com.axelor.db.mapper.Mapper;\n+import com.axelor.db.mapper.Property;\n+import com.axelor.exception.AxelorException;\n+import com.axelor.exception.db.repo.TraceBackRepository;\n+import com.axelor.inject.Beans;\n+import com.axelor.meta.MetaFiles;\n+import com.axelor.meta.db.MetaFile;\n+import com.axelor.meta.schema.actions.ActionView;\n+import com.google.common.base.Preconditions;\n+import com.google.inject.Inject;\n+import com.google.inject.persist.Transactional;\n+import java.io.File;\n+import java.io.FileInputStream;\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.lang.invoke.MethodHandles;\n+import java.util.Map;\n+import java.util.Set;\n+import org.apache.commons.collections.CollectionUtils;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+public class PrintServiceImpl implements PrintService {\n+\n+  private final Logger LOG = LoggerFactory.getLogger(MethodHandles.lookup().lookupClass());\n+\n+  protected PrintRepository printRepo;\n+  protected MetaFiles metaFiles;\n+\n+  @Inject\n+  PrintServiceImpl(PrintRepository printRepo, MetaFiles metaFiles) {\n+    this.printRepo = printRepo;\n+    this.metaFiles = metaFiles;\n+  }\n+\n+  @Override\n+  @Transactional\n+  public Map<String, Object> generatePDF(Print print) throws AxelorException {\n+    print = printRepo.find(print.getId());\n+    String documentName =\n+        StringUtils.notEmpty(print.getDocumentName()) ? print.getDocumentName() : \"\";\n+\n+    String reportModele =\n+        print.getDisplayTypeSelect() == PrintRepository.DISPLAY_TYPE_LANDSCAPE\n+            ? IReport.PRINT_LANDSCAPE\n+            : IReport.PRINT_PORTRAIT;\n+\n+    ReportSettings reportSettings =\n+        ReportFactory.createReport(reportModele, documentName + \"-${date}\")\n+            .addParam(\"PrintId\", print.getId())\n+            .generate();\n+\n+    if (ObjectUtils.notEmpty(reportSettings)) {\n+\n+      if (print.getAttach() || StringUtils.notEmpty(print.getMetaFileField())) {\n+        File file = reportSettings.getFile();\n+        if (file.exists()) {\n+          try {\n+            try (InputStream is = new FileInputStream(file)) {\n+              MetaFile metaFile = metaFiles.upload(is, documentName);\n+              Class<? extends Model> modelClass =\n+                  (Class<? extends Model>) Class.forName(print.getMetaModel().getFullName());\n+              Model objectModel = JPA.find(modelClass, print.getObjectId());\n+\n+              if (print.getAttach()) {\n+                if (ObjectUtils.notEmpty(print.getMetaModel())) {\n+                  metaFiles.attach(metaFile, documentName, objectModel);\n+                }\n+              }\n+              if (StringUtils.notEmpty(print.getMetaFileField())) {\n+                saveMetaFileInModel(modelClass, objectModel, metaFile, print.getMetaFileField());\n+              }\n+            }\n+\n+          } catch (IOException | ClassNotFoundException e) {\n+            throw new AxelorException(e, TraceBackRepository.CATEGORY_INCONSISTENCY);\n+          }\n+        }\n+      }\n+\n+      if (CollectionUtils.isNotEmpty(print.getPrintSet())) {\n+        for (Print subPrint : print.getPrintSet()) {\n+          generatePDF(subPrint);\n+        }\n+      }\n+\n+      String pdfPath = reportSettings.getFileLink();\n+      if (StringUtils.notEmpty(pdfPath)) {\n+        return ActionView.define(documentName).add(\"html\", pdfPath).map();\n+      } else {\n+        throw new AxelorException(\n+            TraceBackRepository.CATEGORY_CONFIGURATION_ERROR, IExceptionMessage.PRINT_ERROR);\n+      }\n+    } else {\n+      throw new AxelorException(\n+          TraceBackRepository.CATEGORY_CONFIGURATION_ERROR, IExceptionMessage.PRINT_ERROR);\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "37f61068c3c6ce6962db5ad48e5653dcbf58e0a7"}, "originalPosition": 126}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTM3Nzg5MA==", "bodyText": "please remove commented code", "url": "https://github.com/axelor/axelor-open-suite/pull/5559#discussion_r445377890", "createdAt": "2020-06-25T08:01:45Z", "author": {"login": "ale-axelor"}, "path": "axelor-base/src/main/java/com/axelor/apps/base/service/PrintTemplateService.java", "diffHunk": "@@ -0,0 +1,34 @@\n+/*\n+ * Axelor Business Solutions\n+ *\n+ * Copyright (C) 2019 Axelor (<http://axelor.com>).\n+ *\n+ * This program is free software: you can redistribute it and/or  modify\n+ * it under the terms of the GNU Affero General Public License, version 3,\n+ * as published by the Free Software Foundation.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU Affero General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Affero General Public License\n+ * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+ */\n+package com.axelor.apps.base.service;\n+\n+import com.axelor.apps.base.db.Print;\n+import com.axelor.apps.base.db.PrintTemplate;\n+import com.axelor.exception.AxelorException;\n+import java.io.IOException;\n+\n+public interface PrintTemplateService {\n+\n+  /*\n+  public Map<String, Object> generatePrint(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "37f61068c3c6ce6962db5ad48e5653dcbf58e0a7"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTM4MDEyNg==", "bodyText": "Do not use a set error and translate the exception messsage in the service:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  TraceBackService.trace(response, e);\n          \n          \n            \n                  response.setError(I18n.get(e.getMessage()));\n          \n          \n            \n                  TraceBackService.trace(response, e, ResponseMessageType.ERROR);", "url": "https://github.com/axelor/axelor-open-suite/pull/5559#discussion_r445380126", "createdAt": "2020-06-25T08:05:45Z", "author": {"login": "ale-axelor"}, "path": "axelor-base/src/main/java/com/axelor/apps/base/web/PrintController.java", "diffHunk": "@@ -0,0 +1,41 @@\n+/*\n+ * Axelor Business Solutions\n+ *\n+ * Copyright (C) 2019 Axelor (<http://axelor.com>).\n+ *\n+ * This program is free software: you can redistribute it and/or  modify\n+ * it under the terms of the GNU Affero General Public License, version 3,\n+ * as published by the Free Software Foundation.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU Affero General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Affero General Public License\n+ * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+ */\n+package com.axelor.apps.base.web;\n+\n+import com.axelor.apps.base.db.Print;\n+import com.axelor.apps.base.service.PrintService;\n+import com.axelor.exception.AxelorException;\n+import com.axelor.exception.service.TraceBackService;\n+import com.axelor.i18n.I18n;\n+import com.axelor.inject.Beans;\n+import com.axelor.rpc.ActionRequest;\n+import com.axelor.rpc.ActionResponse;\n+\n+public class PrintController {\n+\n+  public void generatePDF(ActionRequest request, ActionResponse response) {\n+    Print print = request.getContext().asType(Print.class);\n+\n+    try {\n+      response.setView(Beans.get(PrintService.class).generatePDF(print));\n+    } catch (AxelorException e) {\n+      TraceBackService.trace(response, e);\n+      response.setError(I18n.get(e.getMessage()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "37f61068c3c6ce6962db5ad48e5653dcbf58e0a7"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTM4MDI5NA==", "bodyText": "remove commented code", "url": "https://github.com/axelor/axelor-open-suite/pull/5559#discussion_r445380294", "createdAt": "2020-06-25T08:06:04Z", "author": {"login": "ale-axelor"}, "path": "axelor-base/src/main/java/com/axelor/apps/base/web/PrintTemplateController.java", "diffHunk": "@@ -0,0 +1,122 @@\n+/*\n+ * Axelor Business Solutions\n+ *\n+ * Copyright (C) 2019 Axelor (<http://axelor.com>).\n+ *\n+ * This program is free software: you can redistribute it and/or  modify\n+ * it under the terms of the GNU Affero General Public License, version 3,\n+ * as published by the Free Software Foundation.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU Affero General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Affero General Public License\n+ * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+ */\n+package com.axelor.apps.base.web;\n+\n+import com.axelor.apps.base.db.Print;\n+import com.axelor.apps.base.db.PrintTemplate;\n+import com.axelor.apps.base.db.Wizard;\n+import com.axelor.apps.base.db.repo.PrintTemplateRepository;\n+import com.axelor.apps.base.service.PrintService;\n+import com.axelor.apps.base.service.PrintTemplateService;\n+import com.axelor.db.Model;\n+import com.axelor.db.Query;\n+import com.axelor.exception.AxelorException;\n+import com.axelor.exception.service.TraceBackService;\n+import com.axelor.i18n.I18n;\n+import com.axelor.inject.Beans;\n+import com.axelor.meta.schema.actions.ActionView;\n+import com.axelor.rpc.ActionRequest;\n+import com.axelor.rpc.ActionResponse;\n+import com.axelor.rpc.Context;\n+import java.lang.invoke.MethodHandles;\n+import java.util.Map;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+public class PrintTemplateController {\n+\n+  private static final Logger LOG = LoggerFactory.getLogger(MethodHandles.lookup().lookupClass());\n+\n+  public void openPrint(ActionRequest request, ActionResponse response) {\n+    Model context = request.getContext().asType(Model.class);\n+    String model = request.getModel();\n+\n+    LOG.debug(\"Print template wizard call for model : {}\", model);\n+\n+    // String simpleModel = model.substring(model.lastIndexOf(\".\") + 1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "37f61068c3c6ce6962db5ad48e5653dcbf58e0a7"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTM4MDc1MQ==", "bodyText": "Please remove commented out code", "url": "https://github.com/axelor/axelor-open-suite/pull/5559#discussion_r445380751", "createdAt": "2020-06-25T08:06:56Z", "author": {"login": "ale-axelor"}, "path": "axelor-base/src/main/java/com/axelor/apps/base/web/PrintTemplateController.java", "diffHunk": "@@ -0,0 +1,122 @@\n+/*\n+ * Axelor Business Solutions\n+ *\n+ * Copyright (C) 2019 Axelor (<http://axelor.com>).\n+ *\n+ * This program is free software: you can redistribute it and/or  modify\n+ * it under the terms of the GNU Affero General Public License, version 3,\n+ * as published by the Free Software Foundation.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU Affero General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Affero General Public License\n+ * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+ */\n+package com.axelor.apps.base.web;\n+\n+import com.axelor.apps.base.db.Print;\n+import com.axelor.apps.base.db.PrintTemplate;\n+import com.axelor.apps.base.db.Wizard;\n+import com.axelor.apps.base.db.repo.PrintTemplateRepository;\n+import com.axelor.apps.base.service.PrintService;\n+import com.axelor.apps.base.service.PrintTemplateService;\n+import com.axelor.db.Model;\n+import com.axelor.db.Query;\n+import com.axelor.exception.AxelorException;\n+import com.axelor.exception.service.TraceBackService;\n+import com.axelor.i18n.I18n;\n+import com.axelor.inject.Beans;\n+import com.axelor.meta.schema.actions.ActionView;\n+import com.axelor.rpc.ActionRequest;\n+import com.axelor.rpc.ActionResponse;\n+import com.axelor.rpc.Context;\n+import java.lang.invoke.MethodHandles;\n+import java.util.Map;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+public class PrintTemplateController {\n+\n+  private static final Logger LOG = LoggerFactory.getLogger(MethodHandles.lookup().lookupClass());\n+\n+  public void openPrint(ActionRequest request, ActionResponse response) {\n+    Model context = request.getContext().asType(Model.class);\n+    String model = request.getModel();\n+\n+    LOG.debug(\"Print template wizard call for model : {}\", model);\n+\n+    // String simpleModel = model.substring(model.lastIndexOf(\".\") + 1);\n+\n+    Query<PrintTemplate> printTemplateQuery =\n+        Beans.get(PrintTemplateRepository.class).all().filter(\"self.metaModel.fullName = ?\", model);\n+\n+    try {\n+      long templatesCount = printTemplateQuery.count();\n+\n+      LOG.debug(\"Print templates count : {} \", templatesCount);\n+\n+      if (templatesCount == 0) {\n+        response.setError(I18n.get(\"Please define a print template for the model :\" + model));\n+      } else if (templatesCount == 1) {\n+        Print print =\n+            Beans.get(PrintTemplateService.class)\n+                .generatePrint(context.getId(), printTemplateQuery.fetchOne());\n+\n+        response.setView(getPrintView(print));\n+\n+      } else if (templatesCount >= 2) {\n+        response.setView(\n+            ActionView.define(I18n.get(\"Select template\"))\n+                .model(Wizard.class.getName())\n+                .add(\"form\", \"select-print-template-wizard-form\")\n+                .param(\"show-confirm\", \"false\")\n+                .context(\"_objectId\", context.getId().toString())\n+                .context(\"_templateContextModel\", model)\n+                .map());\n+      }\n+    } catch (Exception e) {\n+      TraceBackService.trace(response, e);\n+    }\n+  }\n+\n+  public void generatePrint(ActionRequest request, ActionResponse response) {\n+    Context context = request.getContext();\n+\n+    Map templateContext = (Map) context.get(\"template\");\n+    PrintTemplate printTemplate = null;\n+    if (templateContext != null) {\n+      printTemplate =\n+          Beans.get(PrintTemplateRepository.class)\n+              .find(Long.parseLong(templateContext.get(\"id\").toString()));\n+    }\n+\n+    Long objectId = Long.parseLong(context.get(\"_objectId\").toString());\n+    // String model = (String) context.get(\"_templateContextModel\");\n+    // String simpleModel = (String) context.get(\"_simpleModel\");\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "37f61068c3c6ce6962db5ad48e5653dcbf58e0a7"}, "originalPosition": 99}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTM4MjUwOA==", "bodyText": "Please remove password from rptdesign", "url": "https://github.com/axelor/axelor-open-suite/pull/5559#discussion_r445382508", "createdAt": "2020-06-25T08:10:07Z", "author": {"login": "ale-axelor"}, "path": "axelor-base/src/main/resources/reports/Print_landscape.rptdesign", "diffHunk": "@@ -0,0 +1,931 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<report xmlns=\"http://www.eclipse.org/birt/2005/design\" version=\"3.2.23\" id=\"1\">\n+    <property name=\"createdBy\">Eclipse BIRT Designer Version 4.6.0.v201606072122</property>\n+    <list-property name=\"propertyBindings\">\n+        <structure>\n+            <property name=\"name\">queryText</property>\n+            <property name=\"id\">3799</property>\n+        </structure>\n+        <structure>\n+            <property name=\"name\">queryTimeOut</property>\n+            <property name=\"id\">3799</property>\n+        </structure>\n+        <structure>\n+            <property name=\"name\">rowFetchSize</property>\n+            <property name=\"id\">3799</property>\n+        </structure>\n+        <structure>\n+            <property name=\"name\">queryText</property>\n+            <property name=\"id\">3820</property>\n+        </structure>\n+        <structure>\n+            <property name=\"name\">queryTimeOut</property>\n+            <property name=\"id\">3820</property>\n+        </structure>\n+        <structure>\n+            <property name=\"name\">rowFetchSize</property>\n+            <property name=\"id\">3820</property>\n+        </structure>\n+        <structure>\n+            <property name=\"name\">odaURL</property>\n+            <property name=\"id\">209</property>\n+            <expression name=\"value\" type=\"javascript\">params[\"DBName\"].value</expression>\n+        </structure>\n+        <structure>\n+            <property name=\"name\">odaUser</property>\n+            <property name=\"id\">209</property>\n+            <expression name=\"value\" type=\"javascript\">params[\"UserName\"].value</expression>\n+        </structure>\n+        <structure>\n+            <property name=\"name\">odaPassword</property>\n+            <property name=\"id\">209</property>\n+            <expression name=\"value\" type=\"javascript\">params[\"Password\"].value</expression>\n+        </structure>\n+        <structure>\n+            <property name=\"name\">odaDriverClass</property>\n+            <property name=\"id\">209</property>\n+            <expression name=\"value\" type=\"javascript\">params[\"DefaultDriver\"].value</expression>\n+        </structure>\n+    </list-property>\n+    <property name=\"units\">in</property>\n+    <property name=\"iconFile\">/templates/blank_report.gif</property>\n+    <property name=\"layoutPreference\">fixed layout</property>\n+    <property name=\"bidiLayoutOrientation\">ltr</property>\n+    <property name=\"imageDPI\">96</property>\n+    <parameters>\n+        <scalar-parameter name=\"PrintId\" id=\"3265\">\n+            <property name=\"hidden\">true</property>\n+            <property name=\"valueType\">static</property>\n+            <property name=\"isRequired\">true</property>\n+            <property name=\"dataType\">decimal</property>\n+            <property name=\"distinct\">true</property>\n+            <list-property name=\"selectionList\"/>\n+            <property name=\"paramType\">simple</property>\n+            <property name=\"concealValue\">false</property>\n+            <property name=\"controlType\">text-box</property>\n+            <structure name=\"format\">\n+                <property name=\"category\">Unformatted</property>\n+            </structure>\n+        </scalar-parameter>\n+        <scalar-parameter name=\"DBName\" id=\"3673\">\n+            <property name=\"hidden\">true</property>\n+            <property name=\"valueType\">static</property>\n+            <property name=\"isRequired\">true</property>\n+            <property name=\"dataType\">string</property>\n+            <property name=\"distinct\">true</property>\n+            <simple-property-list name=\"defaultValue\">\n+                <value type=\"constant\">jdbc:postgresql://localhost:5432/axelor-business-suite</value>\n+            </simple-property-list>\n+            <list-property name=\"selectionList\"/>\n+            <property name=\"paramType\">simple</property>\n+            <property name=\"controlType\">text-box</property>\n+            <structure name=\"format\">\n+                <property name=\"category\">Unformatted</property>\n+            </structure>\n+        </scalar-parameter>\n+        <scalar-parameter name=\"UserName\" id=\"3674\">\n+            <property name=\"hidden\">true</property>\n+            <property name=\"valueType\">static</property>\n+            <property name=\"isRequired\">true</property>\n+            <property name=\"dataType\">string</property>\n+            <property name=\"distinct\">true</property>\n+            <simple-property-list name=\"defaultValue\">\n+                <value type=\"constant\">axelor</value>\n+            </simple-property-list>\n+            <list-property name=\"selectionList\"/>\n+            <property name=\"paramType\">simple</property>\n+            <property name=\"controlType\">text-box</property>\n+            <structure name=\"format\">\n+                <property name=\"category\">Unformatted</property>\n+            </structure>\n+        </scalar-parameter>\n+        <scalar-parameter name=\"Locale\" id=\"3740\">\n+            <property name=\"hidden\">true</property>\n+            <property name=\"valueType\">static</property>\n+            <property name=\"isRequired\">false</property>\n+            <property name=\"dataType\">string</property>\n+            <property name=\"distinct\">true</property>\n+            <simple-property-list name=\"defaultValue\">\n+                <value type=\"constant\">fr</value>\n+            </simple-property-list>\n+            <list-property name=\"selectionList\"/>\n+            <property name=\"paramType\">simple</property>\n+            <property name=\"concealValue\">false</property>\n+            <property name=\"controlType\">text-box</property>\n+            <structure name=\"format\">\n+                <property name=\"category\">Unformatted</property>\n+            </structure>\n+        </scalar-parameter>\n+        <scalar-parameter name=\"Password\" id=\"3675\">\n+            <property name=\"hidden\">true</property>\n+            <property name=\"valueType\">static</property>\n+            <property name=\"isRequired\">true</property>\n+            <property name=\"dataType\">string</property>\n+            <property name=\"distinct\">true</property>\n+            <list-property name=\"selectionList\"/>\n+            <property name=\"paramType\">simple</property>\n+            <property name=\"controlType\">text-box</property>\n+            <structure name=\"format\">\n+                <property name=\"category\">Unformatted</property>\n+            </structure>\n+        </scalar-parameter>\n+        <scalar-parameter name=\"AttachmentPath\" id=\"3811\">\n+            <property name=\"hidden\">true</property>\n+            <property name=\"valueType\">static</property>\n+            <property name=\"isRequired\">false</property>\n+            <property name=\"dataType\">string</property>\n+            <property name=\"distinct\">true</property>\n+            <simple-property-list name=\"defaultValue\">\n+                <value type=\"constant\"></value>\n+            </simple-property-list>\n+            <list-property name=\"selectionList\"/>\n+            <property name=\"paramType\">simple</property>\n+            <property name=\"controlType\">text-box</property>\n+            <structure name=\"format\">\n+                <property name=\"category\">Unformatted</property>\n+            </structure>\n+        </scalar-parameter>\n+        <scalar-parameter name=\"DefaultDriver\" id=\"3819\">\n+            <property name=\"hidden\">true</property>\n+            <property name=\"valueType\">static</property>\n+            <property name=\"dataType\">string</property>\n+            <property name=\"distinct\">true</property>\n+            <simple-property-list name=\"defaultValue\">\n+                <value type=\"constant\">org.postgresql.Driver</value>\n+            </simple-property-list>\n+            <list-property name=\"selectionList\"/>\n+            <property name=\"paramType\">simple</property>\n+            <property name=\"controlType\">text-box</property>\n+            <structure name=\"format\">\n+                <property name=\"category\">Unformatted</property>\n+            </structure>\n+        </scalar-parameter>\n+    </parameters>\n+    <data-sources>\n+        <oda-data-source extensionID=\"org.eclipse.birt.report.data.oda.jdbc\" name=\"Data Source\" id=\"209\">\n+            <list-property name=\"privateDriverProperties\">\n+                <ex-property>\n+                    <name>disabledMetadataBidiFormatStr</name>\n+                </ex-property>\n+                <ex-property>\n+                    <name>disabledContentBidiFormatStr</name>\n+                </ex-property>\n+                <ex-property>\n+                    <name>contentBidiFormatStr</name>\n+                    <value>ILYNN</value>\n+                </ex-property>\n+                <ex-property>\n+                    <name>metadataBidiFormatStr</name>\n+                    <value>ILYNN</value>\n+                </ex-property>\n+            </list-property>\n+            <property name=\"odaDriverClass\">org.postgresql.Driver</property>\n+            <property name=\"odaURL\">jdbc:postgresql://localhost:5432/aos-wip-6.0</property>\n+            <property name=\"odaUser\">axelor</property>\n+            <encrypted-property name=\"odaPassword\" encryptionID=\"base64\">bG1kcGRsYWE=</encrypted-property>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "37f61068c3c6ce6962db5ad48e5653dcbf58e0a7"}, "originalPosition": 185}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTM4MjkzNw==", "bodyText": "Please remove password from rptdesign", "url": "https://github.com/axelor/axelor-open-suite/pull/5559#discussion_r445382937", "createdAt": "2020-06-25T08:10:48Z", "author": {"login": "ale-axelor"}, "path": "axelor-base/src/main/resources/reports/Print_portrait.rptdesign", "diffHunk": "@@ -0,0 +1,936 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<report xmlns=\"http://www.eclipse.org/birt/2005/design\" version=\"3.2.23\" id=\"1\">\n+    <property name=\"createdBy\">Eclipse BIRT Designer Version 4.6.0.v201606072122</property>\n+    <list-property name=\"propertyBindings\">\n+        <structure>\n+            <property name=\"name\">queryText</property>\n+            <property name=\"id\">3799</property>\n+        </structure>\n+        <structure>\n+            <property name=\"name\">queryTimeOut</property>\n+            <property name=\"id\">3799</property>\n+        </structure>\n+        <structure>\n+            <property name=\"name\">rowFetchSize</property>\n+            <property name=\"id\">3799</property>\n+        </structure>\n+        <structure>\n+            <property name=\"name\">queryText</property>\n+            <property name=\"id\">3820</property>\n+        </structure>\n+        <structure>\n+            <property name=\"name\">queryTimeOut</property>\n+            <property name=\"id\">3820</property>\n+        </structure>\n+        <structure>\n+            <property name=\"name\">rowFetchSize</property>\n+            <property name=\"id\">3820</property>\n+        </structure>\n+        <structure>\n+            <property name=\"name\">odaURL</property>\n+            <property name=\"id\">209</property>\n+            <expression name=\"value\" type=\"javascript\">params[\"DBName\"].value</expression>\n+        </structure>\n+        <structure>\n+            <property name=\"name\">odaUser</property>\n+            <property name=\"id\">209</property>\n+            <expression name=\"value\" type=\"javascript\">params[\"UserName\"].value</expression>\n+        </structure>\n+        <structure>\n+            <property name=\"name\">odaPassword</property>\n+            <property name=\"id\">209</property>\n+            <expression name=\"value\" type=\"javascript\">params[\"Password\"].value</expression>\n+        </structure>\n+        <structure>\n+            <property name=\"name\">odaDriverClass</property>\n+            <property name=\"id\">209</property>\n+            <expression name=\"value\" type=\"javascript\">params[\"DefaultDriver\"].value</expression>\n+        </structure>\n+    </list-property>\n+    <property name=\"units\">in</property>\n+    <property name=\"iconFile\">/templates/blank_report.gif</property>\n+    <property name=\"layoutPreference\">fixed layout</property>\n+    <property name=\"bidiLayoutOrientation\">ltr</property>\n+    <property name=\"imageDPI\">96</property>\n+    <parameters>\n+        <scalar-parameter name=\"PrintId\" id=\"3265\">\n+            <property name=\"hidden\">true</property>\n+            <property name=\"valueType\">static</property>\n+            <property name=\"isRequired\">true</property>\n+            <property name=\"dataType\">decimal</property>\n+            <property name=\"distinct\">true</property>\n+            <list-property name=\"selectionList\"/>\n+            <property name=\"paramType\">simple</property>\n+            <property name=\"concealValue\">false</property>\n+            <property name=\"controlType\">text-box</property>\n+            <structure name=\"format\">\n+                <property name=\"category\">Unformatted</property>\n+            </structure>\n+        </scalar-parameter>\n+        <scalar-parameter name=\"DBName\" id=\"3673\">\n+            <property name=\"hidden\">true</property>\n+            <property name=\"valueType\">static</property>\n+            <property name=\"isRequired\">true</property>\n+            <property name=\"dataType\">string</property>\n+            <property name=\"distinct\">true</property>\n+            <simple-property-list name=\"defaultValue\">\n+                <value type=\"constant\">jdbc:postgresql://localhost:5432/axelor-business-suite</value>\n+            </simple-property-list>\n+            <list-property name=\"selectionList\"/>\n+            <property name=\"paramType\">simple</property>\n+            <property name=\"controlType\">text-box</property>\n+            <structure name=\"format\">\n+                <property name=\"category\">Unformatted</property>\n+            </structure>\n+        </scalar-parameter>\n+        <scalar-parameter name=\"UserName\" id=\"3674\">\n+            <property name=\"hidden\">true</property>\n+            <property name=\"valueType\">static</property>\n+            <property name=\"isRequired\">true</property>\n+            <property name=\"dataType\">string</property>\n+            <property name=\"distinct\">true</property>\n+            <simple-property-list name=\"defaultValue\">\n+                <value type=\"constant\">axelor</value>\n+            </simple-property-list>\n+            <list-property name=\"selectionList\"/>\n+            <property name=\"paramType\">simple</property>\n+            <property name=\"controlType\">text-box</property>\n+            <structure name=\"format\">\n+                <property name=\"category\">Unformatted</property>\n+            </structure>\n+        </scalar-parameter>\n+        <scalar-parameter name=\"Locale\" id=\"3740\">\n+            <property name=\"hidden\">true</property>\n+            <property name=\"valueType\">static</property>\n+            <property name=\"isRequired\">false</property>\n+            <property name=\"dataType\">string</property>\n+            <property name=\"distinct\">true</property>\n+            <simple-property-list name=\"defaultValue\">\n+                <value type=\"constant\">fr</value>\n+            </simple-property-list>\n+            <list-property name=\"selectionList\"/>\n+            <property name=\"paramType\">simple</property>\n+            <property name=\"concealValue\">false</property>\n+            <property name=\"controlType\">text-box</property>\n+            <structure name=\"format\">\n+                <property name=\"category\">Unformatted</property>\n+            </structure>\n+        </scalar-parameter>\n+        <scalar-parameter name=\"Password\" id=\"3675\">\n+            <property name=\"hidden\">true</property>\n+            <property name=\"valueType\">static</property>\n+            <property name=\"isRequired\">true</property>\n+            <property name=\"dataType\">string</property>\n+            <property name=\"distinct\">true</property>\n+            <list-property name=\"selectionList\"/>\n+            <property name=\"paramType\">simple</property>\n+            <property name=\"controlType\">text-box</property>\n+            <structure name=\"format\">\n+                <property name=\"category\">Unformatted</property>\n+            </structure>\n+        </scalar-parameter>\n+        <scalar-parameter name=\"AttachmentPath\" id=\"3811\">\n+            <property name=\"hidden\">true</property>\n+            <property name=\"valueType\">static</property>\n+            <property name=\"isRequired\">false</property>\n+            <property name=\"dataType\">string</property>\n+            <property name=\"distinct\">true</property>\n+            <simple-property-list name=\"defaultValue\">\n+                <value type=\"constant\"></value>\n+            </simple-property-list>\n+            <list-property name=\"selectionList\"/>\n+            <property name=\"paramType\">simple</property>\n+            <property name=\"controlType\">text-box</property>\n+            <structure name=\"format\">\n+                <property name=\"category\">Unformatted</property>\n+            </structure>\n+        </scalar-parameter>\n+        <scalar-parameter name=\"DefaultDriver\" id=\"3819\">\n+            <property name=\"hidden\">true</property>\n+            <property name=\"valueType\">static</property>\n+            <property name=\"dataType\">string</property>\n+            <property name=\"distinct\">true</property>\n+            <simple-property-list name=\"defaultValue\">\n+                <value type=\"constant\">org.postgresql.Driver</value>\n+            </simple-property-list>\n+            <list-property name=\"selectionList\"/>\n+            <property name=\"paramType\">simple</property>\n+            <property name=\"controlType\">text-box</property>\n+            <structure name=\"format\">\n+                <property name=\"category\">Unformatted</property>\n+            </structure>\n+        </scalar-parameter>\n+    </parameters>\n+    <data-sources>\n+        <oda-data-source extensionID=\"org.eclipse.birt.report.data.oda.jdbc\" name=\"Data Source\" id=\"209\">\n+            <list-property name=\"privateDriverProperties\">\n+                <ex-property>\n+                    <name>disabledMetadataBidiFormatStr</name>\n+                </ex-property>\n+                <ex-property>\n+                    <name>disabledContentBidiFormatStr</name>\n+                </ex-property>\n+                <ex-property>\n+                    <name>contentBidiFormatStr</name>\n+                    <value>ILYNN</value>\n+                </ex-property>\n+                <ex-property>\n+                    <name>metadataBidiFormatStr</name>\n+                    <value>ILYNN</value>\n+                </ex-property>\n+            </list-property>\n+            <property name=\"odaDriverClass\">org.postgresql.Driver</property>\n+            <property name=\"odaURL\">jdbc:postgresql://localhost:5432/aos-wip-6.0</property>\n+            <property name=\"odaUser\">axelor</property>\n+            <encrypted-property name=\"odaPassword\" encryptionID=\"base64\">bG1kcGRsYWE=</encrypted-property>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "37f61068c3c6ce6962db5ad48e5653dcbf58e0a7"}, "originalPosition": 185}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7966c9d3310198e9a0b601e2a95c4adb907e3079", "author": {"user": {"login": "srab-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/7966c9d3310198e9a0b601e2a95c4adb907e3079", "committedDate": "2020-06-25T09:15:21Z", "message": "RM#25402 Print template : Correcting traductions"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "37f61068c3c6ce6962db5ad48e5653dcbf58e0a7", "author": {"user": {"login": "srab-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/37f61068c3c6ce6962db5ad48e5653dcbf58e0a7", "committedDate": "2020-06-25T07:40:25Z", "message": "RM#25402 Print template : Correcting traductions"}, "afterCommit": {"oid": "7966c9d3310198e9a0b601e2a95c4adb907e3079", "author": {"user": {"login": "srab-axelor", "name": null}}, "url": "https://github.com/axelor/axelor-open-suite/commit/7966c9d3310198e9a0b601e2a95c4adb907e3079", "committedDate": "2020-06-25T09:15:21Z", "message": "RM#25402 Print template : Correcting traductions"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2116, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}