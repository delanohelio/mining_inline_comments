{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDExOTk2Nzc2", "number": 8467, "title": "Report errors in web browser logs during cucumber tests.", "bodyText": "Modify the cucumber configuration to catch errors in web browser logs produced by javascript.\n@bobjacobsen this is definitely flagging errors produced by the javascript.\nFirefox is reporting several instances of:\n\nJavaScript error: http://localhost:12080/js/jquery.jmri.js, line 478: TypeError: json.data is undefined\n\nThis is occurring 3 or 4 times, but I haven\u2019t figured out whether or not that is from a panel load yet .\nOf course, right now, every Firefox test is failing.  I am setting this as WIP until I have more time to debug.", "createdAt": "2020-05-01T05:57:40Z", "url": "https://github.com/JMRI/JMRI/pull/8467", "merged": true, "mergeCommit": {"oid": "03775fd1a729fe8661152fe7e0138e0e5de40650"}, "closed": true, "closedAt": "2020-05-24T06:06:28Z", "author": {"login": "pabender"}, "timelineItems": {"totalCount": 26, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABccmhkMgH2gAyNDExOTk2Nzc2OjU2ZmFiNjg5NGU3ZWEyMTAxYzQxZjExMmUyZjU0OGRmZjg1ZmQ3YjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABckRAnigH2gAyNDExOTk2Nzc2OjJlM2I4NjA4YzViZWM3NTgzYjFiNDI5NWZhN2U1ODQ2ZDgxMWY2MjU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "56fab6894e7ea2101c41f112e2f548dff85fd7b2", "author": {"user": {"login": "pabender", "name": "Paul Bender"}}, "url": "https://github.com/JMRI/JMRI/commit/56fab6894e7ea2101c41f112e2f548dff85fd7b2", "committedDate": "2020-04-30T05:49:01Z", "message": "enable error log checking in firefox tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d6e0a983318e08ba424b4be1e31ce8875eedc490", "author": {"user": {"login": "pabender", "name": "Paul Bender"}}, "url": "https://github.com/JMRI/JMRI/commit/d6e0a983318e08ba424b4be1e31ce8875eedc490", "committedDate": "2020-04-30T20:37:55Z", "message": "log errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b11cafc231f077e766859c334dcd89dbc4b5cb50", "author": {"user": {"login": "pabender", "name": "Paul Bender"}}, "url": "https://github.com/JMRI/JMRI/commit/b11cafc231f077e766859c334dcd89dbc4b5cb50", "committedDate": "2020-04-30T20:47:35Z", "message": "correct capitalization"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "153dff173a14904211abd0064a83800352884c2d", "author": {"user": {"login": "pabender", "name": "Paul Bender"}}, "url": "https://github.com/JMRI/JMRI/commit/153dff173a14904211abd0064a83800352884c2d", "committedDate": "2020-04-30T22:26:28Z", "message": "enable logging for firefox"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a6d22a0990833ae77d40e69a3a5bf1e5d9c4f10c", "author": {"user": {"login": "pabender", "name": "Paul Bender"}}, "url": "https://github.com/JMRI/JMRI/commit/a6d22a0990833ae77d40e69a3a5bf1e5d9c4f10c", "committedDate": "2020-05-02T16:31:26Z", "message": "Merge branch 'master' of https://github.com/JMRI/JMRI into catchjavascripterrors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "856493ccd003cfda5eef2b88f6098030eff18380", "author": {"user": {"login": "pabender", "name": "Paul Bender"}}, "url": "https://github.com/JMRI/JMRI/commit/856493ccd003cfda5eef2b88f6098030eff18380", "committedDate": "2020-05-03T05:18:30Z", "message": "only check Chrome logs."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "456ef3bc3cbcc5dafc028ccb65fead0118bd0a1f", "author": {"user": {"login": "pabender", "name": "Paul Bender"}}, "url": "https://github.com/JMRI/JMRI/commit/456ef3bc3cbcc5dafc028ccb65fead0118bd0a1f", "committedDate": "2020-05-03T05:18:49Z", "message": "Merge branch 'master' of https://github.com/JMRI/JMRI into catchjavascripterrors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f448c1eaeed5918bdbd7ecee50970fea84287160", "author": {"user": {"login": "pabender", "name": "Paul Bender"}}, "url": "https://github.com/JMRI/JMRI/commit/f448c1eaeed5918bdbd7ecee50970fea84287160", "committedDate": "2020-05-12T01:05:08Z", "message": "Merge branch 'master' of https://github.com/JMRI/JMRI into catchjavascripterrors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dedd586b6a53258a6ce460bdd9fe60b23f0316d6", "author": {"user": {"login": "pabender", "name": "Paul Bender"}}, "url": "https://github.com/JMRI/JMRI/commit/dedd586b6a53258a6ce460bdd9fe60b23f0316d6", "committedDate": "2020-05-12T04:24:42Z", "message": "Merge branch 'master' of https://github.com/JMRI/JMRI into catchjavascripterrors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b92abbc24d4b2aea75aa7558ea799db3e3f9aa8", "author": {"user": {"login": "pabender", "name": "Paul Bender"}}, "url": "https://github.com/JMRI/JMRI/commit/5b92abbc24d4b2aea75aa7558ea799db3e3f9aa8", "committedDate": "2020-05-12T21:12:18Z", "message": "more web browser logging"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "69c8312ea17c4ae65a62c69bd413918bb9153de4", "author": {"user": {"login": "pabender", "name": "Paul Bender"}}, "url": "https://github.com/JMRI/JMRI/commit/69c8312ea17c4ae65a62c69bd413918bb9153de4", "committedDate": "2020-05-12T21:12:41Z", "message": "Merge branch 'master' of https://github.com/JMRI/JMRI into catchjavascripterrors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "034f9f55c7a5f56d7efd43564560fbef45616cca", "author": {"user": {"login": "pabender", "name": "Paul Bender"}}, "url": "https://github.com/JMRI/JMRI/commit/034f9f55c7a5f56d7efd43564560fbef45616cca", "committedDate": "2020-05-13T01:15:45Z", "message": "new line at end of file; adjust log level to ask for."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a84efaf4e57ce4af1559da32999f6e93fb453f83", "author": {"user": {"login": "pabender", "name": "Paul Bender"}}, "url": "https://github.com/JMRI/JMRI/commit/a84efaf4e57ce4af1559da32999f6e93fb453f83", "committedDate": "2020-05-13T03:35:01Z", "message": "adjust log levels"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d42499af593eff152e2f023e605fed3899bcb1c0", "author": {"user": {"login": "pabender", "name": "Paul Bender"}}, "url": "https://github.com/JMRI/JMRI/commit/d42499af593eff152e2f023e605fed3899bcb1c0", "committedDate": "2020-05-14T00:31:37Z", "message": "Merge branch 'master' of https://github.com/JMRI/JMRI into catchjavascripterrors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2b0bf2cedd965b962ecfb104e21122468f2cc94e", "author": {"user": {"login": "pabender", "name": "Paul Bender"}}, "url": "https://github.com/JMRI/JMRI/commit/2b0bf2cedd965b962ecfb104e21122468f2cc94e", "committedDate": "2020-05-15T01:18:01Z", "message": "adjust log levels"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e7d5d79af91710fc818e66df19069a38e17fb25", "author": {"user": {"login": "pabender", "name": "Paul Bender"}}, "url": "https://github.com/JMRI/JMRI/commit/1e7d5d79af91710fc818e66df19069a38e17fb25", "committedDate": "2020-05-15T01:23:54Z", "message": "remove extra output"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a4163b0d966052c14de060db8590d059964509ca", "author": {"user": {"login": "pabender", "name": "Paul Bender"}}, "url": "https://github.com/JMRI/JMRI/commit/a4163b0d966052c14de060db8590d059964509ca", "committedDate": "2020-05-15T02:37:58Z", "message": "correct condition"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9a2c5e05c68df245b80337025c8379c239082d88", "author": {"user": {"login": "pabender", "name": "Paul Bender"}}, "url": "https://github.com/JMRI/JMRI/commit/9a2c5e05c68df245b80337025c8379c239082d88", "committedDate": "2020-05-15T04:49:36Z", "message": "Merge branch 'master' of https://github.com/JMRI/JMRI into catchjavascripterrors"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEyNTg4ODMw", "url": "https://github.com/JMRI/JMRI/pull/8467#pullrequestreview-412588830", "createdAt": "2020-05-15T12:08:10Z", "commit": {"oid": "2b0bf2cedd965b962ecfb104e21122468f2cc94e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxMjowODoxMFrOGWCJcQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxMjowOToxNVrOGWCLjw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTc1NzA0MQ==", "bodyText": "Note: You cannot rely on the console existing--there is no reason not to expect console.error to crash out the JavaScript completely on user's devices, so please revert this, or come up with a reliable alternative.\nThere is zero benefit to writing code to making unit testing easy if if crashes out entirely for users.", "url": "https://github.com/JMRI/JMRI/pull/8467#discussion_r425757041", "createdAt": "2020-05-15T12:08:10Z", "author": {"login": "rhwood"}, "path": "web/js/jquery.jmri.js", "diffHunk": "@@ -965,7 +965,7 @@\n                             if (h) {\n                                 h.call(this, m);\n                             } else if (!m.type) {\n-                                jmri.log(\"ERROR: missing type property in \" + m);\n+                                console.error(\"ERROR: missing type property in \" + m);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b0bf2cedd965b962ecfb104e21122468f2cc94e"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTc1NzMxNQ==", "bodyText": "Note: You cannot rely on the console existing--there is no reason not to expect console.error to crash out the JavaScript completely on user's devices, so please revert this, or come up with a reliable alternative.\nThere is zero benefit to writing code to making unit testing easy if if crashes out entirely for users.", "url": "https://github.com/JMRI/JMRI/pull/8467#discussion_r425757315", "createdAt": "2020-05-15T12:08:43Z", "author": {"login": "rhwood"}, "path": "web/js/panel.js", "diffHunk": "@@ -2048,11 +2048,11 @@ function $drawTrackSegment($widget) {\n     var $ep1, $ep2;\n     [$ep1, $ep2] = $getEndPoints$($widget);\n     if (typeof $ep1 === \"undefined\") {\n-    \t\tjmri.log(\"ERROR: can't draw tracksegment \" + $widget.ident + \": connect1: \" + $widget.connect1name + \".\" + $widget.type1 + \" undefined.\");\n+    \t\tconsole.error(\"ERROR: can't draw tracksegment \" + $widget.ident + \": connect1: \" + $widget.connect1name + \".\" + $widget.type1 + \" undefined.\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b0bf2cedd965b962ecfb104e21122468f2cc94e"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTc1NzM0Mw==", "bodyText": "Note: You cannot rely on the console existing--there is no reason not to expect console.error to crash out the JavaScript completely on user's devices, so please revert this, or come up with a reliable alternative.\nThere is zero benefit to writing code to making unit testing easy if if crashes out entirely for users.", "url": "https://github.com/JMRI/JMRI/pull/8467#discussion_r425757343", "createdAt": "2020-05-15T12:08:47Z", "author": {"login": "rhwood"}, "path": "web/js/jquery.jmri.js", "diffHunk": "@@ -955,7 +955,7 @@\n                                 if (h) {\n                                     h.call(this, o);\n                                 } else if (!o.type) {\n-                                    jmri.log(\"ERROR: missing type property in \" + o);\n+                                    console.error(\"ERROR: missing type property in \" + o);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b0bf2cedd965b962ecfb104e21122468f2cc94e"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTc1NzM4Ng==", "bodyText": "Note: You cannot rely on the console existing--there is no reason not to expect console.error to crash out the JavaScript completely on user's devices, so please revert this, or come up with a reliable alternative.\nThere is zero benefit to writing code to making unit testing easy if if crashes out entirely for users.", "url": "https://github.com/JMRI/JMRI/pull/8467#discussion_r425757386", "createdAt": "2020-05-15T12:08:52Z", "author": {"login": "rhwood"}, "path": "web/js/panel.js", "diffHunk": "@@ -2048,11 +2048,11 @@ function $drawTrackSegment($widget) {\n     var $ep1, $ep2;\n     [$ep1, $ep2] = $getEndPoints$($widget);\n     if (typeof $ep1 === \"undefined\") {\n-    \t\tjmri.log(\"ERROR: can't draw tracksegment \" + $widget.ident + \": connect1: \" + $widget.connect1name + \".\" + $widget.type1 + \" undefined.\");\n+    \t\tconsole.error(\"ERROR: can't draw tracksegment \" + $widget.ident + \": connect1: \" + $widget.connect1name + \".\" + $widget.type1 + \" undefined.\");\n         return;\n     }\n     if (typeof $ep2 === \"undefined\") {\n-    \t\tjmri.log(\"ERROR: can't draw tracksegment \" + $widget.ident + \": connect2: \" + $widget.connect2name + \".\" + $widget.type2 + \" undefined.\");\n+    \t\tconsole.error(\"ERROR: can't draw tracksegment \" + $widget.ident + \": connect2: \" + $widget.connect2name + \".\" + $widget.type2 + \" undefined.\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b0bf2cedd965b962ecfb104e21122468f2cc94e"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTc1NzQyNg==", "bodyText": "Note: You cannot rely on the console existing--there is no reason not to expect console.error to crash out the JavaScript completely on user's devices, so please revert this, or come up with a reliable alternative.\nThere is zero benefit to writing code to making unit testing easy if if crashes out entirely for users.", "url": "https://github.com/JMRI/JMRI/pull/8467#discussion_r425757426", "createdAt": "2020-05-15T12:08:57Z", "author": {"login": "rhwood"}, "path": "web/js/panel.js", "diffHunk": "@@ -2257,7 +2257,7 @@ function $drawIcon($widget) {\n             $(\"#panel-area>#\" + $widget.id + \"-overlay\").css(ovlCSS);\n         }\n     } else {\n-        jmri.log(\"ERROR: image not defined for \" + $widget.widgetType + \" \" + $widget.id + \", state=\" + $widget.state + \", occ=\" + $widget.occupancystate);\n+        console.error(\"ERROR: image not defined for \" + $widget.widgetType + \" \" + $widget.id + \", state=\" + $widget.state + \", occ=\" + $widget.occupancystate);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b0bf2cedd965b962ecfb104e21122468f2cc94e"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTc1NzQ4NA==", "bodyText": "Note: You cannot rely on the console existing--there is no reason not to expect console.error to crash out the JavaScript completely on user's devices, so please revert this, or come up with a reliable alternative.\nThere is zero benefit to writing code to making unit testing easy if if crashes out entirely for users.", "url": "https://github.com/JMRI/JMRI/pull/8467#discussion_r425757484", "createdAt": "2020-05-15T12:09:04Z", "author": {"login": "rhwood"}, "path": "web/js/panel.js", "diffHunk": "@@ -3473,7 +3473,7 @@ var $reDrawIcon = function($widget) {\n     } else if ($widget['defaulticon']) {  //if state icon not found, use default icon if provided\n         $('img#' + $widget.id).attr('src', $widget['defaulticon']);\n     } else {\n-        jmri.log(\"ERROR: image not defined for \" + $widget.widgetType + \" \" + $widget.id + \", state=\" + $widget.state + \", occ=\" + $widget.occupancystate);\n+        console.error(\"ERROR: image not defined for \" + $widget.widgetType + \" \" + $widget.id + \", state=\" + $widget.state + \", occ=\" + $widget.occupancystate);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b0bf2cedd965b962ecfb104e21122468f2cc94e"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTc1NzUyMA==", "bodyText": "Note: You cannot rely on the console existing--there is no reason not to expect console.error to crash out the JavaScript completely on user's devices, so please revert this, or come up with a reliable alternative.\nThere is zero benefit to writing code to making unit testing easy if if crashes out entirely for users.", "url": "https://github.com/JMRI/JMRI/pull/8467#discussion_r425757520", "createdAt": "2020-05-15T12:09:07Z", "author": {"login": "rhwood"}, "path": "web/js/panel.js", "diffHunk": "@@ -2860,7 +2860,7 @@ function $drawLayoutShape($widget) {\n                 }\n                 $gCtx.quadraticCurveTo(p[0], p[1], midR[0], midR[1]);\n             } else {\n-                jmri.log(\"ERROR: unexpected LayoutShape point type '\" + lspt + \"' for \" + $widget.ide);\n+                console.error(\"ERROR: unexpected LayoutShape point type '\" + lspt + \"' for \" + $widget.ide);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b0bf2cedd965b962ecfb104e21122468f2cc94e"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTc1NzU4Mw==", "bodyText": "Note: You cannot rely on the console existing--there is no reason not to expect console.error to crash out the JavaScript completely on user's devices, so please revert this, or come up with a reliable alternative.\nThere is zero benefit to writing code to making unit testing easy if if crashes out entirely for users.", "url": "https://github.com/JMRI/JMRI/pull/8467#discussion_r425757583", "createdAt": "2020-05-15T12:09:15Z", "author": {"login": "rhwood"}, "path": "web/js/panel.js", "diffHunk": "@@ -4013,7 +4013,7 @@ function setBlockColor(blockName, newColor) {\n     if (isDefined($blk)) {\n         $gBlks[blockName].blockcolor = newColor;\n     } else {\n-        jmri.log(\"ERROR: block \" + blockName + \" not found for color \" + newColor);\n+        console.error(\"ERROR: block \" + blockName + \" not found for color \" + newColor);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b0bf2cedd965b962ecfb104e21122468f2cc94e"}, "originalPosition": 46}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "57858fb511592151ae0fd9d342bc73ec4c8fff50", "author": {"user": {"login": "pabender", "name": "Paul Bender"}}, "url": "https://github.com/JMRI/JMRI/commit/57858fb511592151ae0fd9d342bc73ec4c8fff50", "committedDate": "2020-05-16T02:03:44Z", "message": "introduce logger to javascript"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ebaf29346d259ad1c6cc8807bd923a6339107ee3", "author": {"user": {"login": "pabender", "name": "Paul Bender"}}, "url": "https://github.com/JMRI/JMRI/commit/ebaf29346d259ad1c6cc8807bd923a6339107ee3", "committedDate": "2020-05-17T16:20:41Z", "message": "Merge branch 'catchjavascripterrors' of github.com:pabender/JMRI into catchjavascripterrors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba2ea835b778dc99b7cc9638feda4f2b018bc4cf", "author": {"user": {"login": "pabender", "name": "Paul Bender"}}, "url": "https://github.com/JMRI/JMRI/commit/ba2ea835b778dc99b7cc9638feda4f2b018bc4cf", "committedDate": "2020-05-17T16:21:05Z", "message": "Merge branch 'master' of https://github.com/JMRI/JMRI into catchjavascripterrors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5d335d7047abdd1b6bba2bf43ab46cd5a7f6b8f6", "author": {"user": {"login": "pabender", "name": "Paul Bender"}}, "url": "https://github.com/JMRI/JMRI/commit/5d335d7047abdd1b6bba2bf43ab46cd5a7f6b8f6", "committedDate": "2020-05-23T22:54:47Z", "message": "Merge branch 'master' of https://github.com/JMRI/JMRI into catchjavascripterrors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "79c6a87b5cd71c2816c805bc5abb5ea4b4ec0109", "author": {"user": {"login": "pabender", "name": "Paul Bender"}}, "url": "https://github.com/JMRI/JMRI/commit/79c6a87b5cd71c2816c805bc5abb5ea4b4ec0109", "committedDate": "2020-05-24T00:29:54Z", "message": "use Logger object"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d130f59c7554f920196175111fa3a99bae8c7c62", "author": {"user": {"login": "pabender", "name": "Paul Bender"}}, "url": "https://github.com/JMRI/JMRI/commit/d130f59c7554f920196175111fa3a99bae8c7c62", "committedDate": "2020-05-24T00:30:31Z", "message": "Merge branch 'catchjavascripterrors' of github.com:pabender/JMRI into catchjavascripterrors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e3b8608c5bec7583b1b4295fa7e5846d811f625", "author": {"user": {"login": "pabender", "name": "Paul Bender"}}, "url": "https://github.com/JMRI/JMRI/commit/2e3b8608c5bec7583b1b4295fa7e5846d811f625", "committedDate": "2020-05-24T01:16:25Z", "message": "warn not warning"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4109, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}