{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDExOTk2Nzc2", "number": 8467, "reviewThreads": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxMjowODoxMFrOD82F6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxMjowOToxNVrOD82HXA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1MTI3NDAwOnYy", "diffSide": "RIGHT", "path": "web/js/jquery.jmri.js", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxMjowODoxMFrOGWCJcQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxMzo1NjowM1rOGWF8Jw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTc1NzA0MQ==", "bodyText": "Note: You cannot rely on the console existing--there is no reason not to expect console.error to crash out the JavaScript completely on user's devices, so please revert this, or come up with a reliable alternative.\nThere is zero benefit to writing code to making unit testing easy if if crashes out entirely for users.", "url": "https://github.com/JMRI/JMRI/pull/8467#discussion_r425757041", "createdAt": "2020-05-15T12:08:10Z", "author": {"login": "rhwood"}, "path": "web/js/jquery.jmri.js", "diffHunk": "@@ -965,7 +965,7 @@\n                             if (h) {\n                                 h.call(this, m);\n                             } else if (!m.type) {\n-                                jmri.log(\"ERROR: missing type property in \" + m);\n+                                console.error(\"ERROR: missing type property in \" + m);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b0bf2cedd965b962ecfb104e21122468f2cc94e"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTgxOTE3NQ==", "bodyText": "I see this as an aid to developer debugging.  Sending everything to console.log means we aren't using the developer tools provided by the browser effectively, because we aren't using the tools the browser gives us to flag error messages.  Per https://www.w3schools.com/jsref/met_console_error.asp every modern browser supports console.error, so we should be using that.\nIf we have to check to see if the console exists and that each function is available, I'll make that happen, but it will be wrapped inside of a new logger object that handles the checks appropriately.", "url": "https://github.com/JMRI/JMRI/pull/8467#discussion_r425819175", "createdAt": "2020-05-15T13:56:03Z", "author": {"login": "pabender"}, "path": "web/js/jquery.jmri.js", "diffHunk": "@@ -965,7 +965,7 @@\n                             if (h) {\n                                 h.call(this, m);\n                             } else if (!m.type) {\n-                                jmri.log(\"ERROR: missing type property in \" + m);\n+                                console.error(\"ERROR: missing type property in \" + m);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTc1NzA0MQ=="}, "originalCommit": {"oid": "2b0bf2cedd965b962ecfb104e21122468f2cc94e"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1MTI3NTg5OnYy", "diffSide": "RIGHT", "path": "web/js/panel.js", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxMjowODo0M1rOGWCKgw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxMjowODo0M1rOGWCKgw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTc1NzMxNQ==", "bodyText": "Note: You cannot rely on the console existing--there is no reason not to expect console.error to crash out the JavaScript completely on user's devices, so please revert this, or come up with a reliable alternative.\nThere is zero benefit to writing code to making unit testing easy if if crashes out entirely for users.", "url": "https://github.com/JMRI/JMRI/pull/8467#discussion_r425757315", "createdAt": "2020-05-15T12:08:43Z", "author": {"login": "rhwood"}, "path": "web/js/panel.js", "diffHunk": "@@ -2048,11 +2048,11 @@ function $drawTrackSegment($widget) {\n     var $ep1, $ep2;\n     [$ep1, $ep2] = $getEndPoints$($widget);\n     if (typeof $ep1 === \"undefined\") {\n-    \t\tjmri.log(\"ERROR: can't draw tracksegment \" + $widget.ident + \": connect1: \" + $widget.connect1name + \".\" + $widget.type1 + \" undefined.\");\n+    \t\tconsole.error(\"ERROR: can't draw tracksegment \" + $widget.ident + \": connect1: \" + $widget.connect1name + \".\" + $widget.type1 + \" undefined.\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b0bf2cedd965b962ecfb104e21122468f2cc94e"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1MTI3NjA1OnYy", "diffSide": "RIGHT", "path": "web/js/jquery.jmri.js", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxMjowODo0N1rOGWCKnw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxMjowODo0N1rOGWCKnw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTc1NzM0Mw==", "bodyText": "Note: You cannot rely on the console existing--there is no reason not to expect console.error to crash out the JavaScript completely on user's devices, so please revert this, or come up with a reliable alternative.\nThere is zero benefit to writing code to making unit testing easy if if crashes out entirely for users.", "url": "https://github.com/JMRI/JMRI/pull/8467#discussion_r425757343", "createdAt": "2020-05-15T12:08:47Z", "author": {"login": "rhwood"}, "path": "web/js/jquery.jmri.js", "diffHunk": "@@ -955,7 +955,7 @@\n                                 if (h) {\n                                     h.call(this, o);\n                                 } else if (!o.type) {\n-                                    jmri.log(\"ERROR: missing type property in \" + o);\n+                                    console.error(\"ERROR: missing type property in \" + o);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b0bf2cedd965b962ecfb104e21122468f2cc94e"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1MTI3NjMzOnYy", "diffSide": "RIGHT", "path": "web/js/panel.js", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxMjowODo1MlrOGWCKyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxMjowODo1MlrOGWCKyg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTc1NzM4Ng==", "bodyText": "Note: You cannot rely on the console existing--there is no reason not to expect console.error to crash out the JavaScript completely on user's devices, so please revert this, or come up with a reliable alternative.\nThere is zero benefit to writing code to making unit testing easy if if crashes out entirely for users.", "url": "https://github.com/JMRI/JMRI/pull/8467#discussion_r425757386", "createdAt": "2020-05-15T12:08:52Z", "author": {"login": "rhwood"}, "path": "web/js/panel.js", "diffHunk": "@@ -2048,11 +2048,11 @@ function $drawTrackSegment($widget) {\n     var $ep1, $ep2;\n     [$ep1, $ep2] = $getEndPoints$($widget);\n     if (typeof $ep1 === \"undefined\") {\n-    \t\tjmri.log(\"ERROR: can't draw tracksegment \" + $widget.ident + \": connect1: \" + $widget.connect1name + \".\" + $widget.type1 + \" undefined.\");\n+    \t\tconsole.error(\"ERROR: can't draw tracksegment \" + $widget.ident + \": connect1: \" + $widget.connect1name + \".\" + $widget.type1 + \" undefined.\");\n         return;\n     }\n     if (typeof $ep2 === \"undefined\") {\n-    \t\tjmri.log(\"ERROR: can't draw tracksegment \" + $widget.ident + \": connect2: \" + $widget.connect2name + \".\" + $widget.type2 + \" undefined.\");\n+    \t\tconsole.error(\"ERROR: can't draw tracksegment \" + $widget.ident + \": connect2: \" + $widget.connect2name + \".\" + $widget.type2 + \" undefined.\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b0bf2cedd965b962ecfb104e21122468f2cc94e"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1MTI3NjYyOnYy", "diffSide": "RIGHT", "path": "web/js/panel.js", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxMjowODo1N1rOGWCK8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxMjowODo1N1rOGWCK8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTc1NzQyNg==", "bodyText": "Note: You cannot rely on the console existing--there is no reason not to expect console.error to crash out the JavaScript completely on user's devices, so please revert this, or come up with a reliable alternative.\nThere is zero benefit to writing code to making unit testing easy if if crashes out entirely for users.", "url": "https://github.com/JMRI/JMRI/pull/8467#discussion_r425757426", "createdAt": "2020-05-15T12:08:57Z", "author": {"login": "rhwood"}, "path": "web/js/panel.js", "diffHunk": "@@ -2257,7 +2257,7 @@ function $drawIcon($widget) {\n             $(\"#panel-area>#\" + $widget.id + \"-overlay\").css(ovlCSS);\n         }\n     } else {\n-        jmri.log(\"ERROR: image not defined for \" + $widget.widgetType + \" \" + $widget.id + \", state=\" + $widget.state + \", occ=\" + $widget.occupancystate);\n+        console.error(\"ERROR: image not defined for \" + $widget.widgetType + \" \" + $widget.id + \", state=\" + $widget.state + \", occ=\" + $widget.occupancystate);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b0bf2cedd965b962ecfb104e21122468f2cc94e"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1MTI3NzAyOnYy", "diffSide": "RIGHT", "path": "web/js/panel.js", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxMjowOTowNFrOGWCLLA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxMjowOTowNFrOGWCLLA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTc1NzQ4NA==", "bodyText": "Note: You cannot rely on the console existing--there is no reason not to expect console.error to crash out the JavaScript completely on user's devices, so please revert this, or come up with a reliable alternative.\nThere is zero benefit to writing code to making unit testing easy if if crashes out entirely for users.", "url": "https://github.com/JMRI/JMRI/pull/8467#discussion_r425757484", "createdAt": "2020-05-15T12:09:04Z", "author": {"login": "rhwood"}, "path": "web/js/panel.js", "diffHunk": "@@ -3473,7 +3473,7 @@ var $reDrawIcon = function($widget) {\n     } else if ($widget['defaulticon']) {  //if state icon not found, use default icon if provided\n         $('img#' + $widget.id).attr('src', $widget['defaulticon']);\n     } else {\n-        jmri.log(\"ERROR: image not defined for \" + $widget.widgetType + \" \" + $widget.id + \", state=\" + $widget.state + \", occ=\" + $widget.occupancystate);\n+        console.error(\"ERROR: image not defined for \" + $widget.widgetType + \" \" + $widget.id + \", state=\" + $widget.state + \", occ=\" + $widget.occupancystate);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b0bf2cedd965b962ecfb104e21122468f2cc94e"}, "originalPosition": 37}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1MTI3NzI5OnYy", "diffSide": "RIGHT", "path": "web/js/panel.js", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxMjowOTowN1rOGWCLUA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxMjowOTowN1rOGWCLUA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTc1NzUyMA==", "bodyText": "Note: You cannot rely on the console existing--there is no reason not to expect console.error to crash out the JavaScript completely on user's devices, so please revert this, or come up with a reliable alternative.\nThere is zero benefit to writing code to making unit testing easy if if crashes out entirely for users.", "url": "https://github.com/JMRI/JMRI/pull/8467#discussion_r425757520", "createdAt": "2020-05-15T12:09:07Z", "author": {"login": "rhwood"}, "path": "web/js/panel.js", "diffHunk": "@@ -2860,7 +2860,7 @@ function $drawLayoutShape($widget) {\n                 }\n                 $gCtx.quadraticCurveTo(p[0], p[1], midR[0], midR[1]);\n             } else {\n-                jmri.log(\"ERROR: unexpected LayoutShape point type '\" + lspt + \"' for \" + $widget.ide);\n+                console.error(\"ERROR: unexpected LayoutShape point type '\" + lspt + \"' for \" + $widget.ide);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b0bf2cedd965b962ecfb104e21122468f2cc94e"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1MTI3NzcyOnYy", "diffSide": "RIGHT", "path": "web/js/panel.js", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxMjowOToxNVrOGWCLjw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxMjowOToxNVrOGWCLjw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTc1NzU4Mw==", "bodyText": "Note: You cannot rely on the console existing--there is no reason not to expect console.error to crash out the JavaScript completely on user's devices, so please revert this, or come up with a reliable alternative.\nThere is zero benefit to writing code to making unit testing easy if if crashes out entirely for users.", "url": "https://github.com/JMRI/JMRI/pull/8467#discussion_r425757583", "createdAt": "2020-05-15T12:09:15Z", "author": {"login": "rhwood"}, "path": "web/js/panel.js", "diffHunk": "@@ -4013,7 +4013,7 @@ function setBlockColor(blockName, newColor) {\n     if (isDefined($blk)) {\n         $gBlks[blockName].blockcolor = newColor;\n     } else {\n-        jmri.log(\"ERROR: block \" + blockName + \" not found for color \" + newColor);\n+        console.error(\"ERROR: block \" + blockName + \" not found for color \" + newColor);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b0bf2cedd965b962ecfb104e21122468f2cc94e"}, "originalPosition": 46}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4610, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}