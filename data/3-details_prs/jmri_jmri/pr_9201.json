{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMzMDczMjA3", "number": 9201, "title": "Warrant track speeds", "bodyText": "Track speeds computed and updated during warrant run to provide better data for ramp calculations.", "createdAt": "2020-12-05T18:27:07Z", "url": "https://github.com/JMRI/JMRI/pull/9201", "merged": true, "mergeCommit": {"oid": "eca60aa7ba03efeffc0ababfb6682e28ca4a3c77"}, "closed": true, "closedAt": "2020-12-06T19:20:32Z", "author": {"login": "petecressman"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdiE9NKAH2gAyNTMzMDczMjA3OjQ2M2UyZDJmZTVmOGYxZjA5YTEzYzJjNzgzMTM4NDA2MzRmNzRkOWM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdjY-MHAFqTU0NTY2OTAzMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "463e2d2fe5f8f1f09a13c2c78313840634f74d9c", "author": {"user": {"login": "petecressman", "name": null}}, "url": "https://github.com/JMRI/JMRI/commit/463e2d2fe5f8f1f09a13c2c78313840634f74d9c", "committedDate": "2020-12-02T02:17:08Z", "message": "rework ramp algorithm. add auto speed profiling.\nfix 'linting' bugs."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2c2203eb55e8b9071b8f5a548b20f271b294a6bc", "author": {"user": {"login": "petecressman", "name": null}}, "url": "https://github.com/JMRI/JMRI/commit/2c2203eb55e8b9071b8f5a548b20f271b294a6bc", "committedDate": "2020-12-02T03:08:26Z", "message": "Merge branch 'master' of https://github.com/JMRI/JMRI into pcWarrantTrackSpeeds"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8168bc1cdc502c213ee0f34d75b8396c4364b37", "author": {"user": {"login": "petecressman", "name": null}}, "url": "https://github.com/JMRI/JMRI/commit/a8168bc1cdc502c213ee0f34d75b8396c4364b37", "committedDate": "2020-12-03T22:24:13Z", "message": "Remove non-roster addresses from shutDown task"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "31aab52e5b418bab538b722dc99e04db481e757a", "author": {"user": {"login": "petecressman", "name": null}}, "url": "https://github.com/JMRI/JMRI/commit/31aab52e5b418bab538b722dc99e04db481e757a", "committedDate": "2020-12-03T22:45:42Z", "message": "Fix static analysis problems"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7879f7509e96dd502a4cdb253217cbca417a9eda", "author": {"user": {"login": "petecressman", "name": null}}, "url": "https://github.com/JMRI/JMRI/commit/7879f7509e96dd502a4cdb253217cbca417a9eda", "committedDate": "2020-12-04T00:14:24Z", "message": "fix static analysis"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f1fdecc02930df32c5612dd024a43312c27b14c8", "author": {"user": {"login": "petecressman", "name": null}}, "url": "https://github.com/JMRI/JMRI/commit/f1fdecc02930df32c5612dd024a43312c27b14c8", "committedDate": "2020-12-04T00:38:39Z", "message": "Static analysis"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "88e943ae7934123a2608a4a2a22fe0e7207ac758", "author": {"user": {"login": "petecressman", "name": null}}, "url": "https://github.com/JMRI/JMRI/commit/88e943ae7934123a2608a4a2a22fe0e7207ac758", "committedDate": "2020-12-04T22:01:59Z", "message": "remove clearShutDownManager teardown"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ee302a751055452614b9b2f45e9ffd211a446f6", "author": {"user": {"login": "petecressman", "name": null}}, "url": "https://github.com/JMRI/JMRI/commit/0ee302a751055452614b9b2f45e9ffd211a446f6", "committedDate": "2020-12-04T22:09:01Z", "message": "Merge branch 'master' of https://github.com/JMRI/JMRI into pcWarrantTrackSpeeds"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f83bf42415c2bba5a26ae51332521c49ec018224", "author": {"user": {"login": "petecressman", "name": null}}, "url": "https://github.com/JMRI/JMRI/commit/f83bf42415c2bba5a26ae51332521c49ec018224", "committedDate": "2020-12-05T20:09:46Z", "message": "Possibly a fix to travis-ci failure"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1NjUzMjY5", "url": "https://github.com/JMRI/JMRI/pull/9201#pullrequestreview-545653269", "createdAt": "2020-12-05T22:08:41Z", "commit": {"oid": "f83bf42415c2bba5a26ae51332521c49ec018224"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNVQyMjowODo0MVrOIAB4og==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNVQyMjowOTozMFrOIAB5Iw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjkwMTc5NA==", "bodyText": "If rlist.get(0) is not a WarrantShutdownTask, this will be an infinite loop. I suggest an else statement that throws an exception or breaks out of the loop.", "url": "https://github.com/JMRI/JMRI/pull/9201#discussion_r536901794", "createdAt": "2020-12-05T22:08:41Z", "author": {"login": "danielb987"}, "path": "java/test/jmri/jmrit/logix/LearnWarrantTest.java", "diffHunk": "@@ -201,25 +200,31 @@ private Sensor recordtimes(String[] route, DccThrottle throttle) throws Exceptio\n     @BeforeEach\n     public void setUp() {\n         JUnitUtil.setUp();\n+        JUnitUtil.resetInstanceManager();\n         jmri.util.JUnitUtil.resetProfileManager();\n         JUnitUtil.initConfigureManager();\n         JUnitUtil.initInternalTurnoutManager();\n-        JUnitUtil.initInternalLightManager();\n         JUnitUtil.initInternalSensorManager();\n-        JUnitUtil.initInternalSignalHeadManager();\n         JUnitUtil.initDebugPowerManager();\n-        JUnitUtil.initDebugThrottleManager();\n-        JUnitUtil.initMemoryManager();\n         JUnitUtil.initOBlockManager();\n         JUnitUtil.initLogixManager();\n-        JUnitUtil.initConditionalManager();\n         WarrantPreferences.getDefault().setShutdown(WarrantPreferences.Shutdown.NO_MERGE);\n         JUnitUtil.initWarrantManager();\n+        JUnitUtil.initDebugThrottleManager();\n     }\n \n     @AfterEach\n     public void tearDown() {\n-        JUnitUtil.clearShutDownManager(); // should be converted to check of scheduled ShutDownActions\n+        if (InstanceManager.containsDefault(ShutDownManager.class)) {\n+            ShutDownManager sm = InstanceManager.getDefault(jmri.ShutDownManager.class);\n+            List<Runnable> rlist = sm.getRunnables();\n+            while (!rlist.isEmpty()) {\n+                if (rlist.get(0) instanceof jmri.jmrit.logix.WarrantShutdownTask) {\n+                    sm.deregister((ShutDownTask)rlist.get(0));\n+                    rlist = sm.getRunnables();\n+                }\n+            }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f83bf42415c2bba5a26ae51332521c49ec018224"}, "originalPosition": 72}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjkwMTkyMw==", "bodyText": "If rlist.get(0) is not a WarrantShutdownTask, this will be an infinite loop. I suggest an else statement that throws an exception or breaks out of the loop.", "url": "https://github.com/JMRI/JMRI/pull/9201#discussion_r536901923", "createdAt": "2020-12-05T22:09:30Z", "author": {"login": "danielb987"}, "path": "java/test/jmri/jmrit/logix/LinkedWarrantTest.java", "diffHunk": "@@ -354,7 +356,16 @@ public void tearDown() {\n         _sensorMgr.dispose();\n         _sensorMgr = null;\n         \n-        JUnitUtil.clearShutDownManager(); // should be converted to check of scheduled ShutDownActions\n+        if (InstanceManager.containsDefault(ShutDownManager.class)) {\n+            ShutDownManager sm = InstanceManager.getDefault(jmri.ShutDownManager.class);\n+            List<Runnable> rlist = sm.getRunnables();\n+            while (!rlist.isEmpty()) {\n+                if (rlist.get(0) instanceof jmri.jmrit.logix.WarrantShutdownTask) {\n+                    sm.deregister((ShutDownTask)rlist.get(0));\n+                    rlist = sm.getRunnables();\n+                }\n+            }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f83bf42415c2bba5a26ae51332521c49ec018224"}, "originalPosition": 29}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ff37a9ff38887e124b7e01eaf859a1d46832c265", "author": {"user": {"login": "petecressman", "name": null}}, "url": "https://github.com/JMRI/JMRI/commit/ff37a9ff38887e124b7e01eaf859a1d46832c265", "committedDate": "2020-12-05T22:35:01Z", "message": "use JUnitUtil.clearShutDownManager() instead of checking and\nderegistering"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5904a142801e46dd62ccd57e598112d55c1e5ab9", "author": {"user": {"login": "petecressman", "name": null}}, "url": "https://github.com/JMRI/JMRI/commit/5904a142801e46dd62ccd57e598112d55c1e5ab9", "committedDate": "2020-12-05T22:49:20Z", "message": "try again"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1NjU2MjMy", "url": "https://github.com/JMRI/JMRI/pull/9201#pullrequestreview-545656232", "createdAt": "2020-12-05T23:06:43Z", "commit": {"oid": "5904a142801e46dd62ccd57e598112d55c1e5ab9"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "29fba1d09a86c65431f8b51747c66c339444abcd", "author": {"user": {"login": "petecressman", "name": null}}, "url": "https://github.com/JMRI/JMRI/commit/29fba1d09a86c65431f8b51747c66c339444abcd", "committedDate": "2020-12-05T23:45:30Z", "message": "Add clearShutDownManager() again"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1NjYwNzYz", "url": "https://github.com/JMRI/JMRI/pull/9201#pullrequestreview-545660763", "createdAt": "2020-12-06T00:51:45Z", "commit": {"oid": "29fba1d09a86c65431f8b51747c66c339444abcd"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f76d9813d0624768d608bc3734d6e5d1d17754c3", "author": {"user": {"login": "petecressman", "name": null}}, "url": "https://github.com/JMRI/JMRI/commit/f76d9813d0624768d608bc3734d6e5d1d17754c3", "committedDate": "2020-12-06T02:29:04Z", "message": "Maybe this will help..."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1NjY5MDMw", "url": "https://github.com/JMRI/JMRI/pull/9201#pullrequestreview-545669030", "createdAt": "2020-12-06T04:10:14Z", "commit": {"oid": "f76d9813d0624768d608bc3734d6e5d1d17754c3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3881, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}