{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE1NDg1NTYz", "number": 8509, "title": "Add unique MQTT Client ID", "bodyText": "MQTT requires each broker connection to have a unique ID, the current MQTT client ID is fixed for all instances of JMRI so that two instances cannot connect to the same broker.  This change appends the current profile's unique ID to the end of the MQTT Client ID to allow multiple JMRI instances to connect to the same MQTT broker.", "createdAt": "2020-05-09T00:29:59Z", "url": "https://github.com/JMRI/JMRI/pull/8509", "merged": true, "mergeCommit": {"oid": "62b07437104ba3f14e6d60ed3549e3df9288880e"}, "closed": true, "closedAt": "2020-05-11T14:22:02Z", "author": {"login": "AndTH"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcfbTCfAH2gAyNDE1NDg1NTYzOmI4Mzk3MWQyMWI1YWU3N2Q4MTQyMTQyMzUwMTMxY2FhODhiZjBhY2M=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcf528OAH2gAyNDE1NDg1NTYzOmIzZTNiODBkNmFmMWEyYjc5MzIyMzQ4ZDMwNWVjMzYyNTllOWM4MTA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b83971d21b5ae77d8142142350131caa88bf0acc", "author": {"user": {"login": "AndTH", "name": null}}, "url": "https://github.com/JMRI/JMRI/commit/b83971d21b5ae77d8142142350131caa88bf0acc", "committedDate": "2020-05-09T00:25:58Z", "message": "Add unique MQTT Client ID\n\nAppend the current profile's unique ID to the end of the MQTT Client ID\nto allow multiple JMRI instances to connect to the same MQTT broker"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4NTkxOTk1", "url": "https://github.com/JMRI/JMRI/pull/8509#pullrequestreview-408591995", "createdAt": "2020-05-09T00:36:43Z", "commit": {"oid": "b83971d21b5ae77d8142142350131caa88bf0acc"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQwMDozNjo0M1rOGS3KVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQwMDozNjo0M1rOGS3KVw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQzMTMxOQ==", "bodyText": "This will not ensure sufficient uniqueness, since if two JMRI instances are running the same profile, they will use the same profile ID. (The JMRI profile ID system is designed to allowed for this.)\nYou want to use jmri.util.node.NodeIdentity.networkIdentity() instead of jmri.profile.ProfileManager.getDefault().getActiveProfile().getUniqueId().", "url": "https://github.com/JMRI/JMRI/pull/8509#discussion_r422431319", "createdAt": "2020-05-09T00:36:43Z", "author": {"login": "rhwood"}, "path": "java/src/jmri/jmrix/mqtt/MqttAdapter.java", "diffHunk": "@@ -61,7 +61,7 @@ public void connect() throws IOException {\n                 options.put(option2Name, new Option(\"MQTT channel :\", new String[]{baseTopic, DEFAULT_BASETOPIC}));\n             }\n \n-            String clientID = CLID + \"-\" + this.getUserName();\n+            String clientID = CLID + \"-\" + this.getUserName() + \"-\" + jmri.profile.ProfileManager.getDefault().getActiveProfile().getUniqueId();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b83971d21b5ae77d8142142350131caa88bf0acc"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5644493f9a89f61b937a5e8619749fd639b44c05", "author": {"user": {"login": "AndTH", "name": null}}, "url": "https://github.com/JMRI/JMRI/commit/5644493f9a89f61b937a5e8619749fd639b44c05", "committedDate": "2020-05-10T11:29:01Z", "message": "Improve uniqueness of MQTT client ID\n\nUpdated to address comments in Pull Request\n\nImprove uniqueness of MQTT client ID by utilising maching/network\naddressing.\nAdded code to ensure the newly generated client ID meets the guaranteed\nminimum requirements of a MQTT broker in length and character set."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4NzM1NTYz", "url": "https://github.com/JMRI/JMRI/pull/8509#pullrequestreview-408735563", "createdAt": "2020-05-10T11:31:55Z", "commit": {"oid": "5644493f9a89f61b937a5e8619749fd639b44c05"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b3e3b80d6af1a2b79322348d305ec36259e9c810", "author": {"user": {"login": "AndTH", "name": null}}, "url": "https://github.com/JMRI/JMRI/commit/b3e3b80d6af1a2b79322348d305ec36259e9c810", "committedDate": "2020-05-10T12:02:20Z", "message": "remove unused field CLID\n\nremove definition of the now unused field CLID"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4068, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}