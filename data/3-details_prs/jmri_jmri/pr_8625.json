{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI2NzkzODQ3", "number": 8625, "title": "Handle doGet, doPost on AWT thread", "bodyText": "This removes a thread stall in the FrameServlet described in a jmriusers thread.\nSee JMRIusers thread for background.", "createdAt": "2020-06-02T19:46:31Z", "url": "https://github.com/JMRI/JMRI/pull/8625", "merged": true, "mergeCommit": {"oid": "db1a56a9360bcef25ee81753e0692fd34c19b71c"}, "closed": true, "closedAt": "2020-06-03T16:20:26Z", "author": {"login": "bobjacobsen"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcnaQpzgH2gAyNDI2NzkzODQ3OmM4MzE5MDc1MjU1MmRjY2U1NjNlYTY4Nzk0N2I2OTUzMWRlZDFkOTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcnq1u_AH2gAyNDI2NzkzODQ3OmVkMGRlMTEzOGZiZDc4NmNiNTlhNTEyMzVjYjExMjEyYjk5OGRlNTU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c83190752552dcce563ea687947b69531ded1d92", "author": {"user": {"login": "bobjacobsen", "name": "Bob Jacobsen"}}, "url": "https://github.com/JMRI/JMRI/commit/c83190752552dcce563ea687947b69531ded1d92", "committedDate": "2020-06-02T19:44:51Z", "message": "handle doGet, doPost on AWT thread"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzMTE0OTUy", "url": "https://github.com/JMRI/JMRI/pull/8625#pullrequestreview-423114952", "createdAt": "2020-06-02T23:06:15Z", "commit": {"oid": "c83190752552dcce563ea687947b69531ded1d92"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c4fef8ea4615695507325eca6295ba2f4e5dec5b", "author": {"user": {"login": "bobjacobsen", "name": "Bob Jacobsen"}}, "url": "https://github.com/JMRI/JMRI/commit/c4fef8ea4615695507325eca6295ba2f4e5dec5b", "committedDate": "2020-06-03T03:39:38Z", "message": "add first links to AssertJ"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "de5d684a855484a88cb3cc839505b54c56aff2cd", "author": {"user": {"login": "bobjacobsen", "name": "Bob Jacobsen"}}, "url": "https://github.com/JMRI/JMRI/commit/de5d684a855484a88cb3cc839505b54c56aff2cd", "committedDate": "2020-06-03T03:48:46Z", "message": "clean up curly quotes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7ab0f55fbe1b94340a625952bef6141b7720a60a", "author": {"user": {"login": "bobjacobsen", "name": "Bob Jacobsen"}}, "url": "https://github.com/JMRI/JMRI/commit/7ab0f55fbe1b94340a625952bef6141b7720a60a", "committedDate": "2020-06-03T03:49:09Z", "message": "better exception handling; add testing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "936e9db0d7259c107e802edbf9e9a16f31ef8bb3", "author": {"user": {"login": "bobjacobsen", "name": "Bob Jacobsen"}}, "url": "https://github.com/JMRI/JMRI/commit/936e9db0d7259c107e802edbf9e9a16f31ef8bb3", "committedDate": "2020-06-03T05:04:48Z", "message": "protect cast"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzMzIzMTA0", "url": "https://github.com/JMRI/JMRI/pull/8625#pullrequestreview-423323104", "createdAt": "2020-06-03T08:19:09Z", "commit": {"oid": "936e9db0d7259c107e802edbf9e9a16f31ef8bb3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwODoxOTowOVrOGeRIWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwODoxOTowOVrOGeRIWw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDM5MTEzMQ==", "bodyText": "Why do you catch these exceptions and throw a RuntimeException instead?", "url": "https://github.com/JMRI/JMRI/pull/8625#discussion_r434391131", "createdAt": "2020-06-03T08:19:09Z", "author": {"login": "danielb987"}, "path": "java/src/jmri/web/servlet/frameimage/JmriJFrameServlet.java", "diffHunk": "@@ -207,6 +207,54 @@ private void sendClickSequence(MouseListener m, Component c, int x, int y) {\n \n     @Override\n     protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n+        // because we work with Swing, we do this on the AWT thread\n+        \n+        if (javax.swing.SwingUtilities.isEventDispatchThread()) {\n+            doGetOnSwing(request, response);\n+            return;\n+        }\n+        \n+        try {\n+            javax.swing.SwingUtilities.invokeAndWait(\n+                () -> { \n+                    try {\n+                        doGetOnSwing(request, response);\n+                    } catch ( ServletException | IOException ex ) {\n+                        throw new RuntimeException(ex);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "936e9db0d7259c107e802edbf9e9a16f31ef8bb3"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed0de1138fbd786cb59a51235cb11212b998de55", "author": {"user": {"login": "bobjacobsen", "name": "Bob Jacobsen"}}, "url": "https://github.com/JMRI/JMRI/commit/ed0de1138fbd786cb59a51235cb11212b998de55", "committedDate": "2020-06-03T15:03:50Z", "message": "detab"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4052, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}