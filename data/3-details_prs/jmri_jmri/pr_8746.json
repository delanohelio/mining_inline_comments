{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQxMTEyNzA0", "number": 8746, "title": "Webthrottle get loco session by roster", "bodyText": "For 4.21.1, not required in 4.19.9\nUses JSON \"rosterEntry\" instead of \"address\" to get loco sessions.\nStops\nthrottle.JsonThrottleSocketService    WARN  - JSON throttle \"414\" requested using \"throttle\" instead of \"name\"\nwarnings from WebThrottle.\nUpdate JsonThrottle to request Throttle via RosterEntry", "createdAt": "2020-06-28T20:54:08Z", "url": "https://github.com/JMRI/JMRI/pull/8746", "merged": true, "mergeCommit": {"oid": "e6fbf61c9802b5efdfc80817e1fd3e7719796fb3"}, "closed": true, "closedAt": "2020-06-29T04:23:57Z", "author": {"login": "icklesteve"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcvyRNBAH2gAyNDQxMTEyNzA0OmQ0NDRhNTA2NDliMzE0MzQzZDA5OTgxNjIyZDIxNmFhNzQxODI5NTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcv2H0OAFqTQzODgzMTEyOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d444a50649b314343d09981622d216aa74182959", "author": {"user": {"login": "icklesteve", "name": "Steve Young"}}, "url": "https://github.com/JMRI/JMRI/commit/d444a50649b314343d09981622d216aa74182959", "committedDate": "2020-06-28T20:14:34Z", "message": "update JsonThrottle get Throttle by rosterEntry"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3555e24a40a354fe2a31cf3a1af37dbed4d43163", "author": {"user": {"login": "icklesteve", "name": "Steve Young"}}, "url": "https://github.com/JMRI/JMRI/commit/3555e24a40a354fe2a31cf3a1af37dbed4d43163", "committedDate": "2020-06-28T20:15:51Z", "message": "update javascript throttle to name, request via roster"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4ODE2NjQ1", "url": "https://github.com/JMRI/JMRI/pull/8746#pullrequestreview-438816645", "createdAt": "2020-06-28T21:57:18Z", "commit": {"oid": "3555e24a40a354fe2a31cf3a1af37dbed4d43163"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOFQyMTo1NzoxOVrOGqAmSw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOFQyMTo1ODo1NFrOGqAmyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjcwMzE3OQ==", "bodyText": "the else should not be on a line by itself, but should be on the same line as the closing brace of prior block.", "url": "https://github.com/JMRI/JMRI/pull/8746#discussion_r446703179", "createdAt": "2020-06-28T21:57:19Z", "author": {"login": "rhwood"}, "path": "java/src/jmri/server/json/throttle/JsonThrottle.java", "diffHunk": "@@ -139,18 +139,26 @@ public static JsonThrottle getThrottle(String throttleId, JsonNode data, JsonThr\n                     manager.getServers(throttle).size()));\n         } else {\n             throttle = new JsonThrottle(address, server);\n-            if (!manager.requestThrottle(address, throttle)) {\n-                log.error(\"Unable to get throttle for \\\"{}\\\".\", address);\n-                throw new JsonException(HttpServletResponse.SC_INTERNAL_SERVER_ERROR, Bundle\n-                        .getMessage(server.getConnection().getLocale(), \"ErrorThrottleUnableToGetThrottle\", address),\n-                        id);\n+            if (entry!=null) {\n+                if (!manager.requestThrottle(entry, throttle)) {\n+                    log.error(\"Unable to get rostered throttle for \\\"{}\\\".\", address);\n+                    throw new JsonException(HttpServletResponse.SC_INTERNAL_SERVER_ERROR, Bundle\n+                            .getMessage(server.getConnection().getLocale(), \"ErrorThrottleUnableToGetThrottle\", address),\n+                            id);\n+                }\n+            }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3555e24a40a354fe2a31cf3a1af37dbed4d43163"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjcwMzI4Mw==", "bodyText": "Replace this address with the entry id.", "url": "https://github.com/JMRI/JMRI/pull/8746#discussion_r446703283", "createdAt": "2020-06-28T21:58:27Z", "author": {"login": "rhwood"}, "path": "java/src/jmri/server/json/throttle/JsonThrottle.java", "diffHunk": "@@ -139,18 +139,26 @@ public static JsonThrottle getThrottle(String throttleId, JsonNode data, JsonThr\n                     manager.getServers(throttle).size()));\n         } else {\n             throttle = new JsonThrottle(address, server);\n-            if (!manager.requestThrottle(address, throttle)) {\n-                log.error(\"Unable to get throttle for \\\"{}\\\".\", address);\n-                throw new JsonException(HttpServletResponse.SC_INTERNAL_SERVER_ERROR, Bundle\n-                        .getMessage(server.getConnection().getLocale(), \"ErrorThrottleUnableToGetThrottle\", address),\n-                        id);\n+            if (entry!=null) {\n+                if (!manager.requestThrottle(entry, throttle)) {\n+                    log.error(\"Unable to get rostered throttle for \\\"{}\\\".\", address);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3555e24a40a354fe2a31cf3a1af37dbed4d43163"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjcwMzMwNw==", "bodyText": "Replace this address with the entry id.", "url": "https://github.com/JMRI/JMRI/pull/8746#discussion_r446703307", "createdAt": "2020-06-28T21:58:54Z", "author": {"login": "rhwood"}, "path": "java/src/jmri/server/json/throttle/JsonThrottle.java", "diffHunk": "@@ -139,18 +139,26 @@ public static JsonThrottle getThrottle(String throttleId, JsonNode data, JsonThr\n                     manager.getServers(throttle).size()));\n         } else {\n             throttle = new JsonThrottle(address, server);\n-            if (!manager.requestThrottle(address, throttle)) {\n-                log.error(\"Unable to get throttle for \\\"{}\\\".\", address);\n-                throw new JsonException(HttpServletResponse.SC_INTERNAL_SERVER_ERROR, Bundle\n-                        .getMessage(server.getConnection().getLocale(), \"ErrorThrottleUnableToGetThrottle\", address),\n-                        id);\n+            if (entry!=null) {\n+                if (!manager.requestThrottle(entry, throttle)) {\n+                    log.error(\"Unable to get rostered throttle for \\\"{}\\\".\", address);\n+                    throw new JsonException(HttpServletResponse.SC_INTERNAL_SERVER_ERROR, Bundle\n+                            .getMessage(server.getConnection().getLocale(), \"ErrorThrottleUnableToGetThrottle\", address),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3555e24a40a354fe2a31cf3a1af37dbed4d43163"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f557b16c5537b69df261cd76dd4ce37d07f46dfb", "author": {"user": {"login": "icklesteve", "name": "Steve Young"}}, "url": "https://github.com/JMRI/JMRI/commit/f557b16c5537b69df261cd76dd4ce37d07f46dfb", "committedDate": "2020-06-29T00:35:34Z", "message": "formatting / entry id"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4ODMxMTI4", "url": "https://github.com/JMRI/JMRI/pull/8746#pullrequestreview-438831128", "createdAt": "2020-06-29T00:43:56Z", "commit": {"oid": "f557b16c5537b69df261cd76dd4ce37d07f46dfb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4003, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}