{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUzNTg0NjM3", "number": 1702, "title": "[JBPM-9248] RuntimeDataServiceCDIImplTest must abort process before deleting tables at after", "bodyText": "", "createdAt": "2020-07-20T15:51:50Z", "url": "https://github.com/kiegroup/jbpm/pull/1702", "merged": true, "mergeCommit": {"oid": "15ae0807707b860967e980775349e3b66a7a67a2"}, "closed": true, "closedAt": "2020-09-08T08:45:17Z", "author": {"login": "gmunozfe"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc3B8MPAFqTQ1MjIxNjkyMg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdGjGdlgFqTQ4MzU1OTU5MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyMjE2OTIy", "url": "https://github.com/kiegroup/jbpm/pull/1702#pullrequestreview-452216922", "createdAt": "2020-07-21T08:01:08Z", "commit": {"oid": "fa69f3eaafe531f2beefd636f4a5aa01964ecf80"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQwODowMTowOFrOG0souw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQwODoyNjozNlrOG0tjCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzkxMDQ1OQ==", "bodyText": "not sure why do we need to remove this line? Don't we have to abort instances before removing data from the tables?\nAlso, same method will be called in the @after method cleanup once this test is finished.", "url": "https://github.com/kiegroup/jbpm/pull/1702#discussion_r457910459", "createdAt": "2020-07-21T08:01:08Z", "author": {"login": "afalhambra"}, "path": "jbpm-services/jbpm-kie-services/src/test/java/org/jbpm/kie/services/test/RuntimeDataServiceImplTest.java", "diffHunk": "@@ -1038,7 +1038,6 @@ public void testGetTaskByIdWithCorrelation() {\n         assertNotNull(userTask);\n         assertCorrelationAndProcess(userTask, correlationKey);\n         assertEquals(processInstanceId, userTask.getProcessInstanceId());\n-        processService.abortProcessInstance(processInstanceId);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa69f3eaafe531f2beefd636f4a5aa01964ecf80"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzkyMzcyNw==", "bodyText": "this method is checking for the correlationKey rather than pids. Probably in this case correlationKey = pid always? would it not make sense to modify assertTasks method to fetch pids instead of correlationKey? all the calls to this method are passing pids. What do you think?", "url": "https://github.com/kiegroup/jbpm/pull/1702#discussion_r457923727", "createdAt": "2020-07-21T08:23:58Z", "author": {"login": "afalhambra"}, "path": "jbpm-services/jbpm-kie-services/src/test/java/org/jbpm/kie/services/test/RuntimeDataServiceImplTest.java", "diffHunk": "@@ -1152,6 +1151,7 @@ public void testGetTaskAssignedAsBusinessAdminByStatus() {\n         List<TaskSummary> tasks = runtimeDataService.getTasksAssignedAsBusinessAdministratorByStatus(\"Administrator\", statuses, new QueryFilter(0, 5));\n         assertNotNull(tasks);\n         assertEquals(5, tasks.size());\n+        assertTasks(tasks, 5, pids);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa69f3eaafe531f2beefd636f4a5aa01964ecf80"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzkyNTM4Nw==", "bodyText": "Small typo\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    //neeed to abort all processes before deleting all the tables\n          \n          \n            \n                    // need to abort all processes before deleting all the tables", "url": "https://github.com/kiegroup/jbpm/pull/1702#discussion_r457925387", "createdAt": "2020-07-21T08:26:36Z", "author": {"login": "afalhambra"}, "path": "jbpm-services/jbpm-services-cdi/src/test/java/org/jbpm/services/cdi/test/RuntimeDataServiceCDIImplTest.java", "diffHunk": "@@ -173,7 +173,9 @@ public void setIdentityProvider(TestIdentityProvider identityProvider) {\n \t\n \t@After\n \tpublic void removeAllData() {\n-\t\tint deleted = 0;\n+        //neeed to abort all processes before deleting all the tables", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa69f3eaafe531f2beefd636f4a5aa01964ecf80"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bb77c3adbb1aee3a3b7a09936b67ce64fc37f250", "author": {"user": {"login": "gmunozfe", "name": "Gonzalo Mu\u00f1oz"}}, "url": "https://github.com/kiegroup/jbpm/commit/bb77c3adbb1aee3a3b7a09936b67ce64fc37f250", "committedDate": "2020-07-21T10:07:05Z", "message": "[JBPM-9248] RuntimeDataServiceCDIImplTest must abort process before"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fa69f3eaafe531f2beefd636f4a5aa01964ecf80", "author": {"user": {"login": "gmunozfe", "name": "Gonzalo Mu\u00f1oz"}}, "url": "https://github.com/kiegroup/jbpm/commit/fa69f3eaafe531f2beefd636f4a5aa01964ecf80", "committedDate": "2020-07-20T15:51:00Z", "message": "[JBPM-9248] RuntimeDataServiceCDIImplTest must abort process before"}, "afterCommit": {"oid": "bb77c3adbb1aee3a3b7a09936b67ce64fc37f250", "author": {"user": {"login": "gmunozfe", "name": "Gonzalo Mu\u00f1oz"}}, "url": "https://github.com/kiegroup/jbpm/commit/bb77c3adbb1aee3a3b7a09936b67ce64fc37f250", "committedDate": "2020-07-21T10:07:05Z", "message": "[JBPM-9248] RuntimeDataServiceCDIImplTest must abort process before"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzNTU5NTkw", "url": "https://github.com/kiegroup/jbpm/pull/1702#pullrequestreview-483559590", "createdAt": "2020-09-07T13:34:31Z", "commit": {"oid": "bb77c3adbb1aee3a3b7a09936b67ce64fc37f250"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 966, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}