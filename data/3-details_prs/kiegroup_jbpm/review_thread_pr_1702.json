{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUzNTg0NjM3", "number": 1702, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQwODowMTowOFrOEQgnpQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQwODoyNjozNlrOEQhMag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1NzQ3MTA5OnYy", "diffSide": "LEFT", "path": "jbpm-services/jbpm-kie-services/src/test/java/org/jbpm/kie/services/test/RuntimeDataServiceImplTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQwODowMTowOFrOG0souw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxMDowMzowOFrOG0xB_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzkxMDQ1OQ==", "bodyText": "not sure why do we need to remove this line? Don't we have to abort instances before removing data from the tables?\nAlso, same method will be called in the @after method cleanup once this test is finished.", "url": "https://github.com/kiegroup/jbpm/pull/1702#discussion_r457910459", "createdAt": "2020-07-21T08:01:08Z", "author": {"login": "afalhambra"}, "path": "jbpm-services/jbpm-kie-services/src/test/java/org/jbpm/kie/services/test/RuntimeDataServiceImplTest.java", "diffHunk": "@@ -1038,7 +1038,6 @@ public void testGetTaskByIdWithCorrelation() {\n         assertNotNull(userTask);\n         assertCorrelationAndProcess(userTask, correlationKey);\n         assertEquals(processInstanceId, userTask.getProcessInstanceId());\n-        processService.abortProcessInstance(processInstanceId);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa69f3eaafe531f2beefd636f4a5aa01964ecf80"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzk4MjQ2Mw==", "bodyText": "In the after method, it will be aborted as other tests, so it's not strictly needed. Before this fixing, it was necessary for CDI tests to avoid failing and it was the main clue for understanding what was happening.", "url": "https://github.com/kiegroup/jbpm/pull/1702#discussion_r457982463", "createdAt": "2020-07-21T10:03:08Z", "author": {"login": "gmunozfe"}, "path": "jbpm-services/jbpm-kie-services/src/test/java/org/jbpm/kie/services/test/RuntimeDataServiceImplTest.java", "diffHunk": "@@ -1038,7 +1038,6 @@ public void testGetTaskByIdWithCorrelation() {\n         assertNotNull(userTask);\n         assertCorrelationAndProcess(userTask, correlationKey);\n         assertEquals(processInstanceId, userTask.getProcessInstanceId());\n-        processService.abortProcessInstance(processInstanceId);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzkxMDQ1OQ=="}, "originalCommit": {"oid": "fa69f3eaafe531f2beefd636f4a5aa01964ecf80"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1NzU1NDkyOnYy", "diffSide": "RIGHT", "path": "jbpm-services/jbpm-kie-services/src/test/java/org/jbpm/kie/services/test/RuntimeDataServiceImplTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQwODoyMzo1OFrOG0tcjw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxMDowNjozNlrOG0xIxg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzkyMzcyNw==", "bodyText": "this method is checking for the correlationKey rather than pids. Probably in this case correlationKey = pid always? would it not make sense to modify assertTasks method to fetch pids instead of correlationKey? all the calls to this method are passing pids. What do you think?", "url": "https://github.com/kiegroup/jbpm/pull/1702#discussion_r457923727", "createdAt": "2020-07-21T08:23:58Z", "author": {"login": "afalhambra"}, "path": "jbpm-services/jbpm-kie-services/src/test/java/org/jbpm/kie/services/test/RuntimeDataServiceImplTest.java", "diffHunk": "@@ -1152,6 +1151,7 @@ public void testGetTaskAssignedAsBusinessAdminByStatus() {\n         List<TaskSummary> tasks = runtimeDataService.getTasksAssignedAsBusinessAdministratorByStatus(\"Administrator\", statuses, new QueryFilter(0, 5));\n         assertNotNull(tasks);\n         assertEquals(5, tasks.size());\n+        assertTasks(tasks, 5, pids);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa69f3eaafe531f2beefd636f4a5aa01964ecf80"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzk4NDE5OA==", "bodyText": "the goal for this assertTasks method is to verify that correlationKey and processType have the expected value (pids and process respectively), as it was introduced in the jbpm#1680", "url": "https://github.com/kiegroup/jbpm/pull/1702#discussion_r457984198", "createdAt": "2020-07-21T10:06:36Z", "author": {"login": "gmunozfe"}, "path": "jbpm-services/jbpm-kie-services/src/test/java/org/jbpm/kie/services/test/RuntimeDataServiceImplTest.java", "diffHunk": "@@ -1152,6 +1151,7 @@ public void testGetTaskAssignedAsBusinessAdminByStatus() {\n         List<TaskSummary> tasks = runtimeDataService.getTasksAssignedAsBusinessAdministratorByStatus(\"Administrator\", statuses, new QueryFilter(0, 5));\n         assertNotNull(tasks);\n         assertEquals(5, tasks.size());\n+        assertTasks(tasks, 5, pids);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzkyMzcyNw=="}, "originalCommit": {"oid": "fa69f3eaafe531f2beefd636f4a5aa01964ecf80"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1NzU2NTIyOnYy", "diffSide": "RIGHT", "path": "jbpm-services/jbpm-services-cdi/src/test/java/org/jbpm/services/cdi/test/RuntimeDataServiceCDIImplTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQwODoyNjozNlrOG0tjCw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxMDowNzo1NVrOG0xLvA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzkyNTM4Nw==", "bodyText": "Small typo\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    //neeed to abort all processes before deleting all the tables\n          \n          \n            \n                    // need to abort all processes before deleting all the tables", "url": "https://github.com/kiegroup/jbpm/pull/1702#discussion_r457925387", "createdAt": "2020-07-21T08:26:36Z", "author": {"login": "afalhambra"}, "path": "jbpm-services/jbpm-services-cdi/src/test/java/org/jbpm/services/cdi/test/RuntimeDataServiceCDIImplTest.java", "diffHunk": "@@ -173,7 +173,9 @@ public void setIdentityProvider(TestIdentityProvider identityProvider) {\n \t\n \t@After\n \tpublic void removeAllData() {\n-\t\tint deleted = 0;\n+        //neeed to abort all processes before deleting all the tables", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa69f3eaafe531f2beefd636f4a5aa01964ecf80"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzk4NDk1Ng==", "bodyText": "done", "url": "https://github.com/kiegroup/jbpm/pull/1702#discussion_r457984956", "createdAt": "2020-07-21T10:07:55Z", "author": {"login": "gmunozfe"}, "path": "jbpm-services/jbpm-services-cdi/src/test/java/org/jbpm/services/cdi/test/RuntimeDataServiceCDIImplTest.java", "diffHunk": "@@ -173,7 +173,9 @@ public void setIdentityProvider(TestIdentityProvider identityProvider) {\n \t\n \t@After\n \tpublic void removeAllData() {\n-\t\tint deleted = 0;\n+        //neeed to abort all processes before deleting all the tables", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzkyNTM4Nw=="}, "originalCommit": {"oid": "fa69f3eaafe531f2beefd636f4a5aa01964ecf80"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1751, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}