{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg1NTUzMDIx", "number": 1605, "title": "[BAQE-1323] DB scripts move to a new module along with refactoring work in jbpm-installer", "bodyText": "Reuse and refactor of jbpm-installer classes and moved/refactored to jbpm-util-test module along with some dependency classes from jbpm-persistence module\nSplit of jbpm-installer into a new jbpm-db-script module to reuse and share DB sql scripts.", "createdAt": "2020-03-09T12:26:26Z", "url": "https://github.com/kiegroup/jbpm/pull/1605", "merged": true, "mergeCommit": {"oid": "b610ca55228140c2e9e900632e288d6c07c487f6"}, "closed": true, "closedAt": "2020-03-23T09:23:03Z", "author": {"login": "afalhambra"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcMO2hmABqjMxMTM4MjYxMjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcPjUNjAFqTM3ODY0NTk0NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "28b189a043f61e6791c52c200fba065738edb1c3", "author": {"user": {"login": "afalhambra", "name": "afalhambra"}}, "url": "https://github.com/kiegroup/jbpm/commit/28b189a043f61e6791c52c200fba065738edb1c3", "committedDate": "2020-03-09T11:14:30Z", "message": "- Reuse and refactor of jbpm-installer classes and moved/refactored to jbpm-util-test module along with some dependency classes from jbpm-persistence module\n- Split of jbpm-installer into a new jbpm-db-script module to reuse and share DB sql scripts.\n- Adding jbpm-test-coverage to the Jenkins db matrix job."}, "afterCommit": {"oid": "620939410b4d3cee68b8667ba45e50bb396a8e1f", "author": {"user": {"login": "afalhambra", "name": "afalhambra"}}, "url": "https://github.com/kiegroup/jbpm/commit/620939410b4d3cee68b8667ba45e50bb396a8e1f", "committedDate": "2020-03-10T09:11:14Z", "message": "- Reuse and refactor of jbpm-installer classes and moved/refactored to jbpm-util-test module along with some dependency classes from jbpm-persistence module\n- Split of jbpm-installer into a new jbpm-db-script module to reuse and share DB sql scripts.\n- Adding jbpm-test-coverage to the Jenkins db matrix job."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "620939410b4d3cee68b8667ba45e50bb396a8e1f", "author": {"user": {"login": "afalhambra", "name": "afalhambra"}}, "url": "https://github.com/kiegroup/jbpm/commit/620939410b4d3cee68b8667ba45e50bb396a8e1f", "committedDate": "2020-03-10T09:11:14Z", "message": "- Reuse and refactor of jbpm-installer classes and moved/refactored to jbpm-util-test module along with some dependency classes from jbpm-persistence module\n- Split of jbpm-installer into a new jbpm-db-script module to reuse and share DB sql scripts.\n- Adding jbpm-test-coverage to the Jenkins db matrix job."}, "afterCommit": {"oid": "8ac1b0ebe21120effc0eb0e5dbf60f820452c48e", "author": {"user": {"login": "afalhambra", "name": "afalhambra"}}, "url": "https://github.com/kiegroup/jbpm/commit/8ac1b0ebe21120effc0eb0e5dbf60f820452c48e", "committedDate": "2020-03-10T15:06:00Z", "message": "- Reuse and refactor of jbpm-installer classes and moved/refactored to jbpm-util-test module along with some dependency classes from jbpm-persistence module\n- Split of jbpm-installer into a new jbpm-db-script module to reuse and share DB sql scripts.\n- Adding jbpm-test-coverage to the Jenkins db matrix job."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8ac1b0ebe21120effc0eb0e5dbf60f820452c48e", "author": {"user": {"login": "afalhambra", "name": "afalhambra"}}, "url": "https://github.com/kiegroup/jbpm/commit/8ac1b0ebe21120effc0eb0e5dbf60f820452c48e", "committedDate": "2020-03-10T15:06:00Z", "message": "- Reuse and refactor of jbpm-installer classes and moved/refactored to jbpm-util-test module along with some dependency classes from jbpm-persistence module\n- Split of jbpm-installer into a new jbpm-db-script module to reuse and share DB sql scripts.\n- Adding jbpm-test-coverage to the Jenkins db matrix job."}, "afterCommit": {"oid": "874e130e5475a274ef0e4e4a23c6b0f1c484db1d", "author": {"user": {"login": "afalhambra", "name": "afalhambra"}}, "url": "https://github.com/kiegroup/jbpm/commit/874e130e5475a274ef0e4e4a23c6b0f1c484db1d", "committedDate": "2020-03-10T15:19:12Z", "message": "- Reuse and refactor of jbpm-installer classes and moved/refactored to jbpm-util-test module along with some dependency classes from jbpm-persistence module\n- Split of jbpm-installer into a new jbpm-db-script module to reuse and share DB sql scripts.\n- Adding jbpm-test-coverage to the Jenkins db matrix job."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "874e130e5475a274ef0e4e4a23c6b0f1c484db1d", "author": {"user": {"login": "afalhambra", "name": "afalhambra"}}, "url": "https://github.com/kiegroup/jbpm/commit/874e130e5475a274ef0e4e4a23c6b0f1c484db1d", "committedDate": "2020-03-10T15:19:12Z", "message": "- Reuse and refactor of jbpm-installer classes and moved/refactored to jbpm-util-test module along with some dependency classes from jbpm-persistence module\n- Split of jbpm-installer into a new jbpm-db-script module to reuse and share DB sql scripts.\n- Adding jbpm-test-coverage to the Jenkins db matrix job."}, "afterCommit": {"oid": "edadf13bfa0a05054cbdeaccf624f6f76c084040", "author": {"user": {"login": "afalhambra", "name": "afalhambra"}}, "url": "https://github.com/kiegroup/jbpm/commit/edadf13bfa0a05054cbdeaccf624f6f76c084040", "committedDate": "2020-03-11T08:57:13Z", "message": "- Reuse and refactor of jbpm-installer classes and moved/refactored to jbpm-util-test module along with some dependency classes from jbpm-persistence module\n- Split of jbpm-installer into a new jbpm-db-script module to reuse and share DB sql scripts."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "edadf13bfa0a05054cbdeaccf624f6f76c084040", "author": {"user": {"login": "afalhambra", "name": "afalhambra"}}, "url": "https://github.com/kiegroup/jbpm/commit/edadf13bfa0a05054cbdeaccf624f6f76c084040", "committedDate": "2020-03-11T08:57:13Z", "message": "- Reuse and refactor of jbpm-installer classes and moved/refactored to jbpm-util-test module along with some dependency classes from jbpm-persistence module\n- Split of jbpm-installer into a new jbpm-db-script module to reuse and share DB sql scripts."}, "afterCommit": {"oid": "623750dc8ccd70d93811085be3b2d56bc440cf07", "author": {"user": {"login": "afalhambra", "name": "afalhambra"}}, "url": "https://github.com/kiegroup/jbpm/commit/623750dc8ccd70d93811085be3b2d56bc440cf07", "committedDate": "2020-03-11T16:40:22Z", "message": "- Reuse and refactor of jbpm-installer classes and moved/refactored to jbpm-util-test module along with some dependency classes from jbpm-persistence module\n- Split of jbpm-installer into a new jbpm-db-script module to reuse and share DB sql scripts."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcyOTI3MzQ5", "url": "https://github.com/kiegroup/jbpm/pull/1605#pullrequestreview-372927349", "createdAt": "2020-03-11T16:31:41Z", "commit": {"oid": "edadf13bfa0a05054cbdeaccf624f6f76c084040"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxNjozMTo0MlrOF0_Ayg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxNjozMTo0MlrOF0_Ayg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTEwMjY2Ng==", "bodyText": "h2 dependency is really needed here?", "url": "https://github.com/kiegroup/jbpm/pull/1605#discussion_r391102666", "createdAt": "2020-03-11T16:31:42Z", "author": {"login": "gmunozfe"}, "path": "jbpm-db-scripts/pom.xml", "diffHunk": "@@ -0,0 +1,154 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <modelVersion>4.0.0</modelVersion>\n+  <parent>\n+    <groupId>org.jbpm</groupId>\n+    <artifactId>jbpm</artifactId>\n+    <version>7.35.0-SNAPSHOT</version>\n+  </parent>\n+\n+  <artifactId>jbpm-db-scripts</artifactId>\n+  <name>jBPM :: DB Scripts resources</name>\n+\n+  <properties>\n+    <java.module.name>org.jbpm.dbscripts</java.module.name>\n+    <spotbugs.skip>true</spotbugs.skip>\n+  </properties>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>org.jbpm</groupId>\n+      <artifactId>jbpm-test-util</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>ch.qos.logback</groupId>\n+      <artifactId>logback-classic</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.slf4j</groupId>\n+      <artifactId>slf4j-api</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>commons-io</groupId>\n+      <artifactId>commons-io</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>javax.persistence</groupId>\n+      <artifactId>javax.persistence-api</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.hibernate</groupId>\n+      <artifactId>hibernate-core</artifactId>\n+      <scope>test</scope>\n+      <exclusions>\n+        <exclusion>\n+          <groupId>javax.activation</groupId>\n+          <artifactId>javax.activation-api</artifactId>\n+        </exclusion>\n+      </exclusions>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.hibernate</groupId>\n+      <artifactId>hibernate-entitymanager</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>com.h2database</groupId>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "edadf13bfa0a05054cbdeaccf624f6f76c084040"}, "originalPosition": 63}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "623750dc8ccd70d93811085be3b2d56bc440cf07", "author": {"user": {"login": "afalhambra", "name": "afalhambra"}}, "url": "https://github.com/kiegroup/jbpm/commit/623750dc8ccd70d93811085be3b2d56bc440cf07", "committedDate": "2020-03-11T16:40:22Z", "message": "- Reuse and refactor of jbpm-installer classes and moved/refactored to jbpm-util-test module along with some dependency classes from jbpm-persistence module\n- Split of jbpm-installer into a new jbpm-db-script module to reuse and share DB sql scripts."}, "afterCommit": {"oid": "03996a26e97d6187809adb8e43f4751a6d5bd149", "author": {"user": {"login": "afalhambra", "name": "afalhambra"}}, "url": "https://github.com/kiegroup/jbpm/commit/03996a26e97d6187809adb8e43f4751a6d5bd149", "committedDate": "2020-03-12T14:08:59Z", "message": "- Reuse and refactor of jbpm-installer classes and moved/refactored to jbpm-util-test module along with some dependency classes from jbpm-persistence module\n- Split of jbpm-installer into a new jbpm-db-script module to reuse and share DB sql scripts."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1MzAxNTg2", "url": "https://github.com/kiegroup/jbpm/pull/1605#pullrequestreview-375301586", "createdAt": "2020-03-16T15:01:53Z", "commit": {"oid": "03996a26e97d6187809adb8e43f4751a6d5bd149"}, "state": "COMMENTED", "comments": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxNTowMTo1M1rOF24XZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxNjoxMjowNVrOF27ZyQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzA5MDkxOA==", "bodyText": "This is a good chance to remove star imports :) as we don't encourage people to use them.", "url": "https://github.com/kiegroup/jbpm/pull/1605#discussion_r393090918", "createdAt": "2020-03-16T15:01:53Z", "author": {"login": "MarianMacik"}, "path": "jbpm-bpmn2/src/test/java/org/jbpm/bpmn2/concurrency/persistence/OneProcessPerThreadPersistenceTest.java", "diffHunk": "@@ -16,13 +16,13 @@\n \n package org.jbpm.bpmn2.concurrency.persistence;\n \n-import static org.jbpm.persistence.util.PersistenceUtil.*;\n+import static org.jbpm.test.persistence.util.PersistenceUtil.*;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "03996a26e97d6187809adb8e43f4751a6d5bd149"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzA5MTU5NA==", "bodyText": "Why this change?", "url": "https://github.com/kiegroup/jbpm/pull/1605#discussion_r393091594", "createdAt": "2020-03-16T15:02:48Z", "author": {"login": "MarianMacik"}, "path": "jbpm-db-scripts/src/main/resources/db/ddl-scripts/db2/quartz_tables_db2.sql", "diffHunk": "@@ -9,7 +9,7 @@ is_durable varchar(1) not null,\n is_nonconcurrent varchar(1) not null,\n is_update_data varchar(1) not null,\n requests_recovery varchar(1) not null,\n-job_data blob(2000),\n+job_data blob,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "03996a26e97d6187809adb8e43f4751a6d5bd149"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzEwNDM5Nw==", "bodyText": "Again star imports.", "url": "https://github.com/kiegroup/jbpm/pull/1605#discussion_r393104397", "createdAt": "2020-03-16T15:21:13Z", "author": {"login": "MarianMacik"}, "path": "jbpm-persistence/jbpm-persistence-jpa/src/test/java/org/jbpm/persistence/session/WorkItemPersistenceTest.java", "diffHunk": "@@ -75,7 +75,7 @@\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n \n-import static org.jbpm.persistence.util.PersistenceUtil.*;\n+import static org.jbpm.test.persistence.util.PersistenceUtil.*;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "03996a26e97d6187809adb8e43f4751a6d5bd149"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzEwODMyOQ==", "bodyText": "Why is this needed now?", "url": "https://github.com/kiegroup/jbpm/pull/1605#discussion_r393108329", "createdAt": "2020-03-16T15:26:36Z", "author": {"login": "MarianMacik"}, "path": "jbpm-test-coverage/src/test/java/org/jbpm/test/functional/timer/GlobalQuartzRAMTimerServiceTest.java", "diffHunk": "@@ -59,7 +61,7 @@ public void setUp() {\n     }\n     \n     @After\n-    public void tearDown(){\n+    public void tearDown() throws IOException, SQLException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "03996a26e97d6187809adb8e43f4751a6d5bd149"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzExMjI0NQ==", "bodyText": "I think that here we can make an exception because this TestEventEmitter is afaik not used in two or more modules for testing. It should be only needed in the jbpm-persistence module tests. What do you think?", "url": "https://github.com/kiegroup/jbpm/pull/1605#discussion_r393112245", "createdAt": "2020-03-16T15:32:01Z", "author": {"login": "MarianMacik"}, "path": "jbpm-test-util/src/main/java/org/jbpm/test/persistence/processinstance/objects/TestEventEmitter.java", "diffHunk": "@@ -27,7 +27,6 @@\n import org.jbpm.persistence.api.integration.InstanceView;\n import org.jbpm.persistence.api.integration.base.BaseEventCollection;\n \n-\n public class TestEventEmitter implements EventEmitter {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "03996a26e97d6187809adb8e43f4751a6d5bd149"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzExMjY3Ng==", "bodyText": "Same for other related classes.", "url": "https://github.com/kiegroup/jbpm/pull/1605#discussion_r393112676", "createdAt": "2020-03-16T15:32:39Z", "author": {"login": "MarianMacik"}, "path": "jbpm-test-util/src/main/java/org/jbpm/test/persistence/processinstance/objects/TestTransactionalPersistenceEventManager.java", "diffHunk": "@@ -13,7 +13,7 @@\n  * See the License for the specific language governing permissions and\n  * limitations under the License.\n  */\n-package org.jbpm.persistence.processinstance.objects;\n+package org.jbpm.test.persistence.processinstance.objects;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "03996a26e97d6187809adb8e43f4751a6d5bd149"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzExNjYyOA==", "bodyText": "Maybe update the docs so we know what is the difference between TestPersistenceContext and TestPersistenceContextBase?", "url": "https://github.com/kiegroup/jbpm/pull/1605#discussion_r393116628", "createdAt": "2020-03-16T15:38:15Z", "author": {"login": "MarianMacik"}, "path": "jbpm-test-util/src/main/java/org/jbpm/test/persistence/scripts/TestPersistenceContextBase.java", "diffHunk": "@@ -14,89 +14,75 @@\n  * limitations under the License.\n  */\n \n-package org.jbpm.persistence.scripts;\n+package org.jbpm.test.persistence.scripts;\n \n import java.io.File;\n import java.io.IOException;\n import java.sql.Connection;\n import java.sql.PreparedStatement;\n import java.sql.SQLException;\n-import java.text.DateFormat;\n-import java.text.ParseException;\n-import java.text.SimpleDateFormat;\n-import java.util.ArrayList;\n import java.util.HashMap;\n-import java.util.HashSet;\n import java.util.List;\n import java.util.Properties;\n-import java.util.Set;\n+\n import javax.persistence.EntityManager;\n import javax.persistence.EntityManagerFactory;\n \n import org.drools.core.impl.KnowledgeBaseFactory;\n import org.drools.core.impl.KnowledgeBaseImpl;\n import org.drools.persistence.jta.JtaTransactionManager;\n-import org.jbpm.persistence.map.impl.ProcessCreatorForHelp;\n-import org.jbpm.persistence.scripts.oldentities.ProcessInstanceInfo;\n-import org.jbpm.persistence.scripts.oldentities.SessionInfo;\n-import org.jbpm.persistence.scripts.oldentities.TaskImpl;\n-import org.jbpm.persistence.scripts.util.SQLCommandUtil;\n-import org.jbpm.persistence.scripts.util.SQLScriptUtil;\n-import org.jbpm.persistence.scripts.util.TestsUtil;\n-import org.jbpm.persistence.util.PersistenceUtil;\n-import org.kie.test.util.db.PoolingDataSourceWrapper;\n+import org.jbpm.test.persistence.scripts.util.SQLCommandUtil;\n+import org.jbpm.test.persistence.scripts.util.SQLScriptUtil;\n+import org.jbpm.test.persistence.scripts.util.TestsUtil;\n+import org.jbpm.test.persistence.util.PersistenceUtil;\n+import org.jbpm.test.persistence.util.ProcessCreatorForHelp;\n import org.kie.api.KieBase;\n import org.kie.api.runtime.Environment;\n import org.kie.api.runtime.EnvironmentName;\n-import org.kie.api.task.model.I18NText;\n-import org.kie.api.task.model.OrganizationalEntity;\n import org.kie.internal.persistence.jpa.JPAKnowledgeService;\n import org.kie.internal.runtime.StatefulKnowledgeSession;\n-import org.kie.internal.task.api.TaskModelProvider;\n-import org.kie.internal.task.api.model.InternalI18NText;\n-import org.kie.internal.task.api.model.InternalOrganizationalEntity;\n-import org.kie.internal.task.api.model.InternalPeopleAssignments;\n-import org.kie.internal.task.api.model.InternalTaskData;\n+import org.kie.test.util.db.PoolingDataSourceWrapper;\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n \n-import static org.jbpm.persistence.scripts.DatabaseType.SQLSERVER;\n-import static org.jbpm.persistence.scripts.DatabaseType.SQLSERVER2008;\n-import static org.jbpm.persistence.scripts.DatabaseType.SYBASE;\n+import static org.jbpm.test.persistence.scripts.DatabaseType.SQLSERVER;\n+import static org.jbpm.test.persistence.scripts.DatabaseType.SQLSERVER2008;\n+import static org.jbpm.test.persistence.scripts.DatabaseType.SYBASE;\n \n /**\n  * Central context that hides persistence from tests, so there is no need to work with persistence in the tests\n  * (transactions etc).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "03996a26e97d6187809adb8e43f4751a6d5bd149"}, "originalPosition": 67}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzEzMTQ3MQ==", "bodyText": "I think that these entities and also WorkItemHandlers are used specifically for jbpm-persistence tests, aren't they? In that case I think we can leave them in the jbpm-persistence module.", "url": "https://github.com/kiegroup/jbpm/pull/1605#discussion_r393131471", "createdAt": "2020-03-16T15:58:46Z", "author": {"login": "MarianMacik"}, "path": "jbpm-test-util/src/main/java/org/jbpm/test/persistence/session/objects/MyEntity.java", "diffHunk": "@@ -14,7 +14,7 @@\n  * limitations under the License.\n  */\n \n-package org.jbpm.persistence.session.objects;\n+package org.jbpm.test.persistence.session.objects;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "03996a26e97d6187809adb8e43f4751a6d5bd149"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzEzMjQxMw==", "bodyText": "Is this needed? My understanding by the name of the class is that no getters/setters should be present.", "url": "https://github.com/kiegroup/jbpm/pull/1605#discussion_r393132413", "createdAt": "2020-03-16T16:00:07Z", "author": {"login": "MarianMacik"}, "path": "jbpm-test-util/src/main/java/org/jbpm/test/persistence/session/objects/MyEntityOnlyFields.java", "diffHunk": "@@ -68,5 +69,9 @@ public int hashCode() {\n         hash = 41 * hash + (this.test != null ? this.test.hashCode() : 0);\n         return hash;\n     }\n+\n+    public String getTest() {\n+        return test;\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "03996a26e97d6187809adb8e43f4751a6d5bd149"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzEzMzU1OQ==", "bodyText": "Probably again used just in jbpm-persistence tests?", "url": "https://github.com/kiegroup/jbpm/pull/1605#discussion_r393133559", "createdAt": "2020-03-16T16:01:46Z", "author": {"login": "MarianMacik"}, "path": "jbpm-test-util/src/main/java/org/jbpm/test/persistence/util/ProcessCreatorForHelp.java", "diffHunk": "@@ -14,21 +14,25 @@\n  * limitations under the License.\n  */\n \n-package org.jbpm.persistence.map.impl;\n+package org.jbpm.test.persistence.util;\n \n import java.util.ArrayList;\n import java.util.List;\n \n import org.jbpm.process.core.Work;\n-import org.jbpm.process.core.datatype.impl.type.ObjectDataType;\n-import org.jbpm.process.core.impl.WorkImpl;\n-import org.jbpm.persistence.session.objects.Person;\n import org.jbpm.process.core.context.variable.Variable;\n+import org.jbpm.process.core.datatype.impl.type.ObjectDataType;\n import org.jbpm.process.core.event.EventTypeFilter;\n+import org.jbpm.process.core.impl.WorkImpl;\n import org.jbpm.ruleflow.core.RuleFlowProcess;\n+import org.jbpm.test.persistence.session.objects.Person;\n import org.jbpm.workflow.core.Node;\n import org.jbpm.workflow.core.impl.ConnectionImpl;\n-import org.jbpm.workflow.core.node.*;\n+import org.jbpm.workflow.core.node.EndNode;\n+import org.jbpm.workflow.core.node.EventNode;\n+import org.jbpm.workflow.core.node.StartNode;\n+import org.jbpm.workflow.core.node.SubProcessNode;\n+import org.jbpm.workflow.core.node.WorkItemNode;\n \n public class ProcessCreatorForHelp {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "03996a26e97d6187809adb8e43f4751a6d5bd149"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzEzNjY3Nw==", "bodyText": "I guess jbpm-xes module then doesn't need to depend on jbpm-persistence-jpa test-jar artifact?", "url": "https://github.com/kiegroup/jbpm/pull/1605#discussion_r393136677", "createdAt": "2020-03-16T16:06:17Z", "author": {"login": "MarianMacik"}, "path": "jbpm-xes/src/test/java/org/jbpm/xes/XESPersistenceBase.java", "diffHunk": "@@ -17,8 +17,9 @@\n package org.jbpm.xes;\n \n import java.util.Properties;\n-import org.jbpm.persistence.util.PersistenceUtil;\n+\n import org.jbpm.test.JbpmJUnitBaseTestCase;\n+import org.jbpm.test.persistence.util.PersistenceUtil;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "03996a26e97d6187809adb8e43f4751a6d5bd149"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzE0MDY4MQ==", "bodyText": "This dependency is probably no longer needed as PersistenceUtil is now in jbpm-test-util? Can you please also check other modules as quite a lot of them used that class and because it is now migrated to jbpm-test-util we probably no longer need dependency on that test-jar.", "url": "https://github.com/kiegroup/jbpm/pull/1605#discussion_r393140681", "createdAt": "2020-03-16T16:12:05Z", "author": {"login": "MarianMacik"}, "path": "jbpm-db-scripts/pom.xml", "diffHunk": "@@ -0,0 +1,149 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <modelVersion>4.0.0</modelVersion>\n+  <parent>\n+    <groupId>org.jbpm</groupId>\n+    <artifactId>jbpm</artifactId>\n+    <version>7.35.0-SNAPSHOT</version>\n+  </parent>\n+\n+  <artifactId>jbpm-db-scripts</artifactId>\n+  <name>jBPM :: DB Scripts resources</name>\n+\n+  <properties>\n+    <java.module.name>org.jbpm.dbscripts</java.module.name>\n+    <spotbugs.skip>true</spotbugs.skip>\n+  </properties>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>org.jbpm</groupId>\n+      <artifactId>jbpm-test-util</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>ch.qos.logback</groupId>\n+      <artifactId>logback-classic</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.slf4j</groupId>\n+      <artifactId>slf4j-api</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>commons-io</groupId>\n+      <artifactId>commons-io</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>javax.persistence</groupId>\n+      <artifactId>javax.persistence-api</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.hibernate</groupId>\n+      <artifactId>hibernate-core</artifactId>\n+      <scope>test</scope>\n+      <exclusions>\n+        <exclusion>\n+          <groupId>javax.activation</groupId>\n+          <artifactId>javax.activation-api</artifactId>\n+        </exclusion>\n+      </exclusions>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.hibernate</groupId>\n+      <artifactId>hibernate-entitymanager</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.jboss.narayana.jta</groupId>\n+      <artifactId>narayana-jta</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.kie</groupId>\n+      <artifactId>kie-api</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.kie</groupId>\n+      <artifactId>kie-internal</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.drools</groupId>\n+      <artifactId>drools-persistence-jpa</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.jbpm</groupId>\n+      <artifactId>jbpm-runtime-manager</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.jbpm</groupId>\n+      <artifactId>jbpm-kie-services</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.jbpm</groupId>\n+      <artifactId>jbpm-human-task-jpa</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.jbpm</groupId>\n+      <artifactId>jbpm-human-task-audit</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.jbpm</groupId>\n+      <artifactId>jbpm-executor</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.jbpm</groupId>\n+      <artifactId>jbpm-audit</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.jbpm</groupId>\n+      <artifactId>jbpm-persistence-jpa</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.jbpm</groupId>\n+      <artifactId>jbpm-persistence-jpa</artifactId>\n+      <type>test-jar</type>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "03996a26e97d6187809adb8e43f4751a6d5bd149"}, "originalPosition": 120}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb574be5c5bb8d8bb5918a4215ac96df1ed42df6", "author": {"user": {"login": "afalhambra", "name": "afalhambra"}}, "url": "https://github.com/kiegroup/jbpm/commit/cb574be5c5bb8d8bb5918a4215ac96df1ed42df6", "committedDate": "2020-03-17T15:50:10Z", "message": "- Reuse and refactor of jbpm-installer classes and moved/refactored to jbpm-util-test module along with some dependency classes from jbpm-persistence module\n- Split of jbpm-installer into a new jbpm-db-script module to reuse and share DB sql scripts."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "03996a26e97d6187809adb8e43f4751a6d5bd149", "author": {"user": {"login": "afalhambra", "name": "afalhambra"}}, "url": "https://github.com/kiegroup/jbpm/commit/03996a26e97d6187809adb8e43f4751a6d5bd149", "committedDate": "2020-03-12T14:08:59Z", "message": "- Reuse and refactor of jbpm-installer classes and moved/refactored to jbpm-util-test module along with some dependency classes from jbpm-persistence module\n- Split of jbpm-installer into a new jbpm-db-script module to reuse and share DB sql scripts."}, "afterCommit": {"oid": "cb574be5c5bb8d8bb5918a4215ac96df1ed42df6", "author": {"user": {"login": "afalhambra", "name": "afalhambra"}}, "url": "https://github.com/kiegroup/jbpm/commit/cb574be5c5bb8d8bb5918a4215ac96df1ed42df6", "committedDate": "2020-03-17T15:50:10Z", "message": "- Reuse and refactor of jbpm-installer classes and moved/refactored to jbpm-util-test module along with some dependency classes from jbpm-persistence module\n- Split of jbpm-installer into a new jbpm-db-script module to reuse and share DB sql scripts."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "662a46ab24355fc0a56fe7ee72e8f7b8df9cdd8c", "author": {"user": {"login": "afalhambra", "name": "afalhambra"}}, "url": "https://github.com/kiegroup/jbpm/commit/662a46ab24355fc0a56fe7ee72e8f7b8df9cdd8c", "committedDate": "2020-03-17T15:55:08Z", "message": "Merge branch 'master' into adding_jbpm-test-coverage"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2NzU0MjM2", "url": "https://github.com/kiegroup/jbpm/pull/1605#pullrequestreview-376754236", "createdAt": "2020-03-18T10:55:11Z", "commit": {"oid": "662a46ab24355fc0a56fe7ee72e8f7b8df9cdd8c"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxMDo1NToxMVrOF3_t8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxMDo1NToxMVrOF3_t8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDI1OTk1Mg==", "bodyText": "Just one thing I noticed is that for some reason (probably due to a whitespace) this file was included as well. But it's up to you if you want to revert it :)", "url": "https://github.com/kiegroup/jbpm/pull/1605#discussion_r394259952", "createdAt": "2020-03-18T10:55:11Z", "author": {"login": "MarianMacik"}, "path": "jbpm-test-coverage/src/test/resources/org/jbpm/test/regression/ISOTimerTest.bpmn2", "diffHunk": "@@ -1,150 +1,150 @@\n-<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "662a46ab24355fc0a56fe7ee72e8f7b8df9cdd8c"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4NjQ1OTQ1", "url": "https://github.com/kiegroup/jbpm/pull/1605#pullrequestreview-378645945", "createdAt": "2020-03-20T16:43:42Z", "commit": {"oid": "662a46ab24355fc0a56fe7ee72e8f7b8df9cdd8c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1052, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}