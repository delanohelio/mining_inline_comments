{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ2MTYwNjc4", "number": 1697, "title": "[JBPM-9223] include case file details in case list.", "bodyText": "Adding new overloaded getCaseInstances method to CaseRuntimeDataService that allows the possibility to include case file information if a flag is set\nMerge with droolsjbpm-integration:2151", "createdAt": "2020-07-08T10:56:33Z", "url": "https://github.com/kiegroup/jbpm/pull/1697", "merged": true, "mergeCommit": {"oid": "1839c7248b98cbaa1d2fc0c8aba2c8b2cafb06ba"}, "closed": true, "closedAt": "2020-07-23T08:48:11Z", "author": {"login": "fjtirado"}, "timelineItems": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABczCEAEAFqTQ0NTE2NzQ4NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc3Z62_AFqTQ1MzI2NDM3OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1MTY3NDg0", "url": "https://github.com/kiegroup/jbpm/pull/1697#pullrequestreview-445167484", "createdAt": "2020-07-08T22:19:23Z", "commit": {"oid": "00b9945a2df703d81b8d1b64f705678d293fece1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQyMjoxOToyM1rOGu7IjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQyMjoxOToyM1rOGu7IjA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTg1NjUyNA==", "bodyText": "Is this really needed to be exposed in the model? Other setters are not part of the interface.\nMissing doc comment above.", "url": "https://github.com/kiegroup/jbpm/pull/1697#discussion_r451856524", "createdAt": "2020-07-08T22:19:23Z", "author": {"login": "gmunozfe"}, "path": "jbpm-case-mgmt/jbpm-case-mgmt-api/src/main/java/org/jbpm/casemgmt/api/model/instance/CaseInstance.java", "diffHunk": "@@ -66,6 +66,8 @@\n      */\n     CaseFileInstance getCaseFile();\n     \n+    void setCaseFile (CaseFileInstance  caseFileInstance);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "00b9945a2df703d81b8d1b64f705678d293fece1"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "00b9945a2df703d81b8d1b64f705678d293fece1", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/jbpm/commit/00b9945a2df703d81b8d1b64f705678d293fece1", "committedDate": "2020-07-08T10:29:46Z", "message": "[JBPM-9223] include case file details in case list.\n\nAdding new overloaded getCaseInstances method to CaseRuntimeDataService\nthat allows\nthe possibility to include case file information if a flag is set"}, "afterCommit": {"oid": "c9db0471ace2c42e1dbc71598c6828dd7d25a61c", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/jbpm/commit/c9db0471ace2c42e1dbc71598c6828dd7d25a61c", "committedDate": "2020-07-09T09:02:47Z", "message": "[JBPM-9223] include case file details in case list.\n\nAdding new overloaded getCaseInstances method to CaseRuntimeDataService\nthat allows\nthe possibility to include case file information if a flag is set"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c9db0471ace2c42e1dbc71598c6828dd7d25a61c", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/jbpm/commit/c9db0471ace2c42e1dbc71598c6828dd7d25a61c", "committedDate": "2020-07-09T09:02:47Z", "message": "[JBPM-9223] include case file details in case list.\n\nAdding new overloaded getCaseInstances method to CaseRuntimeDataService\nthat allows\nthe possibility to include case file information if a flag is set"}, "afterCommit": {"oid": "563289c73dcb100cf2d4448d2f6bf284f9df4dfb", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/jbpm/commit/563289c73dcb100cf2d4448d2f6bf284f9df4dfb", "committedDate": "2020-07-14T09:54:39Z", "message": "[JBPM-9223] include case file details in case list.\n\nAdding new overloaded getCaseInstances method to CaseRuntimeDataService\nthat allows\nthe possibility to include case file information if a flag is set"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4MDQyOTc4", "url": "https://github.com/kiegroup/jbpm/pull/1697#pullrequestreview-448042978", "createdAt": "2020-07-14T12:05:05Z", "commit": {"oid": "563289c73dcb100cf2d4448d2f6bf284f9df4dfb"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxMjowNTowNVrOGxQrug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxMjoxMjozNlrOGxQ6QQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDMwNjc0Ng==", "bodyText": "Missing owner in the javadoc params", "url": "https://github.com/kiegroup/jbpm/pull/1697#discussion_r454306746", "createdAt": "2020-07-14T12:05:05Z", "author": {"login": "gmunozfe"}, "path": "jbpm-case-mgmt/jbpm-case-mgmt-api/src/main/java/org/jbpm/casemgmt/api/CaseRuntimeDataService.java", "diffHunk": "@@ -234,6 +251,14 @@\n      */\n     Collection<CaseInstance> getCaseInstancesOwnedBy(String owner, List<CaseStatus> statuses, QueryContext queryContext);\n     \n+    /**\n+     * Returns all case instances owned by given user\n+     * @param statuses list of statuses that case should be in to match", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "563289c73dcb100cf2d4448d2f6bf284f9df4dfb"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDMwNzA3Ng==", "bodyText": "Could you switch them to be in the same order than in the method definition?", "url": "https://github.com/kiegroup/jbpm/pull/1697#discussion_r454307076", "createdAt": "2020-07-14T12:05:44Z", "author": {"login": "gmunozfe"}, "path": "jbpm-case-mgmt/jbpm-case-mgmt-api/src/main/java/org/jbpm/casemgmt/api/CaseRuntimeDataService.java", "diffHunk": "@@ -249,6 +274,14 @@\n      */\n     Collection<CaseInstance> getCaseInstancesAnyRole(List<CaseStatus> statuses, QueryContext queryContext);\n     \n+    /**\n+     * Returns case instances that given user (via identity provider) is involved in in any role.\n+     * @param statuses statuses of the case instances\n+     * @param queryContext control parameters for the result e.g. sorting, paging\n+     * @param withData indicates if case file data should be included in the result", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "563289c73dcb100cf2d4448d2f6bf284f9df4dfb"}, "originalPosition": 54}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDMxMDQ2NQ==", "bodyText": "Could you add a test for coverage this method? I think it's the only one missing for complete coverage", "url": "https://github.com/kiegroup/jbpm/pull/1697#discussion_r454310465", "createdAt": "2020-07-14T12:12:36Z", "author": {"login": "gmunozfe"}, "path": "jbpm-case-mgmt/jbpm-case-mgmt-impl/src/main/java/org/jbpm/casemgmt/impl/CaseRuntimeDataServiceImpl.java", "diffHunk": "@@ -494,17 +507,19 @@ private int compareMilestones(CaseMilestoneInstance o1, CaseMilestoneInstance o2\n         return processInstances;\n     }\n \n-\n     @Override\n     public Collection<CaseInstance> getCaseInstancesOwnedBy(String owner, List<CaseStatus> statuses, QueryContext queryContext) {\n+        return getCaseInstancesOwnedBy(owner,statuses, false, queryContext);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "563289c73dcb100cf2d4448d2f6bf284f9df4dfb"}, "originalPosition": 67}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "563289c73dcb100cf2d4448d2f6bf284f9df4dfb", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/jbpm/commit/563289c73dcb100cf2d4448d2f6bf284f9df4dfb", "committedDate": "2020-07-14T09:54:39Z", "message": "[JBPM-9223] include case file details in case list.\n\nAdding new overloaded getCaseInstances method to CaseRuntimeDataService\nthat allows\nthe possibility to include case file information if a flag is set"}, "afterCommit": {"oid": "7ff2d94d992abda4305288917128bb0d29478971", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/jbpm/commit/7ff2d94d992abda4305288917128bb0d29478971", "committedDate": "2020-07-14T14:15:29Z", "message": "[JBPM-9223] include case file details in case list.\n\nAdding new overloaded getCaseInstances method to CaseRuntimeDataService\nthat allows\nthe possibility to include case file information if a flag is set"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4MTgxOTIw", "url": "https://github.com/kiegroup/jbpm/pull/1697#pullrequestreview-448181920", "createdAt": "2020-07-14T14:50:08Z", "commit": {"oid": "7ff2d94d992abda4305288917128bb0d29478971"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxNDo1MDowOFrOGxXSTA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxNTozMDowOFrOGxZHOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDQxNDkyNA==", "bodyText": "Just a small typo\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * Set case file information to this instance \n          \n          \n            \n                 * Sets case file information to this instance", "url": "https://github.com/kiegroup/jbpm/pull/1697#discussion_r454414924", "createdAt": "2020-07-14T14:50:08Z", "author": {"login": "afalhambra"}, "path": "jbpm-case-mgmt/jbpm-case-mgmt-api/src/main/java/org/jbpm/casemgmt/api/model/instance/CaseInstance.java", "diffHunk": "@@ -60,12 +58,18 @@\n     /**\n      * Returns case file associated with this case.\n      * <p>\n-     *     Note: {@link CaseInstance#getCaseFile()} will always be empty.\n-     *     Refer to using {@link CaseService#getCaseFileInstance(String)} when access to case file information is needed.\n+     *     Note: {@link CaseInstance#getCaseFile()} will  be empty unless <code>withData</code> flag is specified \n      *  </p>\n      */\n     CaseFileInstance getCaseFile();\n     \n+    \n+    /**\n+     * Set case file information to this instance ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7ff2d94d992abda4305288917128bb0d29478971"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDQzNjM0OA==", "bodyText": "As there is only 1 single list as argument, it could be replaced with:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        Collection<CaseInstance> instances = caseRuntimeDataService.getCaseInstances(Arrays.asList(CaseStatus.OPEN), true, new QueryContext());\n          \n          \n            \n                        Collection<CaseInstance> instances = caseRuntimeDataService.getCaseInstances(Collections.singletonList(CaseStatus.OPEN), true, new QueryContext());", "url": "https://github.com/kiegroup/jbpm/pull/1697#discussion_r454436348", "createdAt": "2020-07-14T15:18:37Z", "author": {"login": "afalhambra"}, "path": "jbpm-case-mgmt/jbpm-case-mgmt-impl/src/test/java/org/jbpm/casemgmt/impl/CaseRuntimeDataServiceImplTest.java", "diffHunk": "@@ -89,7 +89,7 @@ public void testStartEmptyCaseWithCaseFile() {\n             assertNotNull(cInstance.getCaseFile());\n             assertEquals(\"my first case\", cInstance.getCaseFile().getData(\"name\"));\n \n-            Collection<CaseInstance> instances = caseRuntimeDataService.getCaseInstances(new QueryContext());\n+            Collection<CaseInstance> instances = caseRuntimeDataService.getCaseInstances(Arrays.asList(CaseStatus.OPEN), true, new QueryContext());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7ff2d94d992abda4305288917128bb0d29478971"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDQ0NDg1OA==", "bodyText": "not sure about this change? why not use true instead? or if that's not the aim of this test, why don't we keep it as it was originally?", "url": "https://github.com/kiegroup/jbpm/pull/1697#discussion_r454444858", "createdAt": "2020-07-14T15:30:08Z", "author": {"login": "afalhambra"}, "path": "jbpm-case-mgmt/jbpm-case-mgmt-impl/src/test/java/org/jbpm/casemgmt/impl/SubCaseServiceImplTest.java", "diffHunk": "@@ -513,7 +513,7 @@ public void testCaseWithSubCaseQuery() {\n \n             caseService.triggerAdHocFragment(MID_CASE_ID, \"Sub Case\", null);\n \n-            Collection<CaseInstance> caseInstances = caseRuntimeDataService.getCaseInstances(new QueryContext());\n+            Collection<CaseInstance> caseInstances = caseRuntimeDataService.getCaseInstances(false,new QueryContext());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7ff2d94d992abda4305288917128bb0d29478971"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7ff2d94d992abda4305288917128bb0d29478971", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/jbpm/commit/7ff2d94d992abda4305288917128bb0d29478971", "committedDate": "2020-07-14T14:15:29Z", "message": "[JBPM-9223] include case file details in case list.\n\nAdding new overloaded getCaseInstances method to CaseRuntimeDataService\nthat allows\nthe possibility to include case file information if a flag is set"}, "afterCommit": {"oid": "93e797fb98e8dc50fe2f08397a8ed6548a33371e", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/jbpm/commit/93e797fb98e8dc50fe2f08397a8ed6548a33371e", "committedDate": "2020-07-14T17:54:01Z", "message": "[JBPM-9223] include case file details in case list.\n\nAdding new overloaded getCaseInstances method to CaseRuntimeDataService\nthat allows\nthe possibility to include case file information if a flag is set"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4Njg1MzMy", "url": "https://github.com/kiegroup/jbpm/pull/1697#pullrequestreview-448685332", "createdAt": "2020-07-15T07:11:06Z", "commit": {"oid": "93e797fb98e8dc50fe2f08397a8ed6548a33371e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "93e797fb98e8dc50fe2f08397a8ed6548a33371e", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/jbpm/commit/93e797fb98e8dc50fe2f08397a8ed6548a33371e", "committedDate": "2020-07-14T17:54:01Z", "message": "[JBPM-9223] include case file details in case list.\n\nAdding new overloaded getCaseInstances method to CaseRuntimeDataService\nthat allows\nthe possibility to include case file information if a flag is set"}, "afterCommit": {"oid": "91991e3e6ba5fd7a1c338db7536f38cf1e84af2f", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/jbpm/commit/91991e3e6ba5fd7a1c338db7536f38cf1e84af2f", "committedDate": "2020-07-16T17:27:09Z", "message": "[JBPM-9223] include case file details in case list.\n\nAdding new overloaded getCaseInstances method to CaseRuntimeDataService\nthat allows\nthe possibility to include case file information if a flag is set"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "91991e3e6ba5fd7a1c338db7536f38cf1e84af2f", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/jbpm/commit/91991e3e6ba5fd7a1c338db7536f38cf1e84af2f", "committedDate": "2020-07-16T17:27:09Z", "message": "[JBPM-9223] include case file details in case list.\n\nAdding new overloaded getCaseInstances method to CaseRuntimeDataService\nthat allows\nthe possibility to include case file information if a flag is set"}, "afterCommit": {"oid": "347bd3867be57b8bb620275f2f20f6294600ed88", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/jbpm/commit/347bd3867be57b8bb620275f2f20f6294600ed88", "committedDate": "2020-07-17T07:58:36Z", "message": "[JBPM-9223] include case file details in case list.\n\nAdding new overloaded getCaseInstances method to CaseRuntimeDataService\nthat allows\nthe possibility to include case file information if a flag is set"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwNTU3MDU1", "url": "https://github.com/kiegroup/jbpm/pull/1697#pullrequestreview-450557055", "createdAt": "2020-07-17T10:43:08Z", "commit": {"oid": "347bd3867be57b8bb620275f2f20f6294600ed88"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxMDo0MzowOFrOGzOW9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxMDo0MzowOFrOGzOW9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjM2NTgxMw==", "bodyText": "Add also a test for getCaseInstancesOwnedBy including withData=true", "url": "https://github.com/kiegroup/jbpm/pull/1697#discussion_r456365813", "createdAt": "2020-07-17T10:43:08Z", "author": {"login": "gmunozfe"}, "path": "jbpm-case-mgmt/jbpm-case-mgmt-impl/src/test/java/org/jbpm/casemgmt/impl/CaseRuntimeDataServiceImplTest.java", "diffHunk": "@@ -88,21 +89,12 @@ public void testStartEmptyCaseWithCaseFile() {\n             assertEquals(FIRST_CASE_ID, cInstance.getCaseId());\n             assertNotNull(cInstance.getCaseFile());\n             assertEquals(\"my first case\", cInstance.getCaseFile().getData(\"name\"));\n+            \n+            List<CaseStatus> statuses = Collections.singletonList(CaseStatus.OPEN);\n \n-            Collection<CaseInstance> instances = caseRuntimeDataService.getCaseInstances(new QueryContext());\n-            assertNotNull(instances);\n-\n-            assertEquals(1, instances.size());\n-            CaseInstance instance = instances.iterator().next();\n-            assertNotNull(instance);\n-\n-            assertEquals(FIRST_CASE_ID, instance.getCaseId());\n-            assertEquals(EMPTY_CASE_P_ID, instance.getCaseDefinitionId());\n-            assertEquals(\"my first case\", instance.getCaseDescription());\n-            assertEquals(USER, instance.getOwner());\n-            assertEquals(ProcessInstance.STATE_ACTIVE, instance.getStatus().intValue());\n-            assertEquals(deploymentUnit.getIdentifier(), instance.getDeploymentId());\n-            assertNotNull(instance.getStartedAt());\n+            assertCaseInstance(caseRuntimeDataService.getCaseInstances(statuses, true, new QueryContext()));\n+            assertCaseInstance(caseRuntimeDataService.getCaseInstancesByDefinition(EMPTY_CASE_P_ID, statuses, true, new QueryContext()));\n+            assertCaseInstance(caseRuntimeDataService.getCaseInstancesByDeployment(deploymentUnit.getIdentifier(), statuses, true, new QueryContext()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "347bd3867be57b8bb620275f2f20f6294600ed88"}, "originalPosition": 31}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "347bd3867be57b8bb620275f2f20f6294600ed88", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/jbpm/commit/347bd3867be57b8bb620275f2f20f6294600ed88", "committedDate": "2020-07-17T07:58:36Z", "message": "[JBPM-9223] include case file details in case list.\n\nAdding new overloaded getCaseInstances method to CaseRuntimeDataService\nthat allows\nthe possibility to include case file information if a flag is set"}, "afterCommit": {"oid": "ba8d3c5cbe92fcd133a02885b74aa15784e12c3d", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/jbpm/commit/ba8d3c5cbe92fcd133a02885b74aa15784e12c3d", "committedDate": "2020-07-17T11:14:05Z", "message": "[JBPM-9223] include case file details in case list.\n\nAdding new overloaded getCaseInstances method to CaseRuntimeDataService\nthat allows\nthe possibility to include case file information if a flag is set"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUzMTEyMzkz", "url": "https://github.com/kiegroup/jbpm/pull/1697#pullrequestreview-453112393", "createdAt": "2020-07-22T08:39:52Z", "commit": {"oid": "ba8d3c5cbe92fcd133a02885b74aa15784e12c3d"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQwODozOTo1MlrOG1Youg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQwOTowNDozNFrOG1Zjhg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODYzMTM1NA==", "bodyText": "will  be empty - Unnecessary space between will and be :)", "url": "https://github.com/kiegroup/jbpm/pull/1697#discussion_r458631354", "createdAt": "2020-07-22T08:39:52Z", "author": {"login": "MarianMacik"}, "path": "jbpm-case-mgmt/jbpm-case-mgmt-api/src/main/java/org/jbpm/casemgmt/api/model/instance/CaseInstance.java", "diffHunk": "@@ -60,12 +58,18 @@\n     /**\n      * Returns case file associated with this case.\n      * <p>\n-     *     Note: {@link CaseInstance#getCaseFile()} will always be empty.\n-     *     Refer to using {@link CaseService#getCaseFileInstance(String)} when access to case file information is needed.\n+     *     Note: {@link CaseInstance#getCaseFile()} will  be empty unless <code>withData</code> flag is specified ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba8d3c5cbe92fcd133a02885b74aa15784e12c3d"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODY0NjQwNg==", "bodyText": "As in the previous PR, I would specifically create a test for that to not mix the focus of the test. For example this one is called testCaseRolesWithQueries so I don't expect it to test CaseFile retrieval for case instances.", "url": "https://github.com/kiegroup/jbpm/pull/1697#discussion_r458646406", "createdAt": "2020-07-22T09:04:34Z", "author": {"login": "MarianMacik"}, "path": "jbpm-case-mgmt/jbpm-case-mgmt-impl/src/test/java/org/jbpm/casemgmt/impl/CaseServiceImplTest.java", "diffHunk": "@@ -1840,20 +1840,27 @@ public void testCaseRolesWithQueries() {\n             instances = caseRuntimeDataService.getCaseInstancesAnyRole(status, new QueryContext());\n             assertNotNull(instances);\n             assertFalse(\"Opened case was returned when searching for cancelled case instances.\", instances.stream().anyMatch(n -> n.getCaseId().equals(caseId)));\n-\n+            \n             status = Arrays.asList(CaseStatus.OPEN);\n+            \n+            instances = caseRuntimeDataService.getCaseInstancesOwnedBy(\"john\", status, true, new QueryContext());\n+            assertNotNull(instances);\n+            assertEquals(1, instances.size());\n+            assertNotNull(instances.iterator().next().getCaseFile());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba8d3c5cbe92fcd133a02885b74aa15784e12c3d"}, "originalPosition": 11}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ba8d3c5cbe92fcd133a02885b74aa15784e12c3d", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/jbpm/commit/ba8d3c5cbe92fcd133a02885b74aa15784e12c3d", "committedDate": "2020-07-17T11:14:05Z", "message": "[JBPM-9223] include case file details in case list.\n\nAdding new overloaded getCaseInstances method to CaseRuntimeDataService\nthat allows\nthe possibility to include case file information if a flag is set"}, "afterCommit": {"oid": "db71f9c7c8364b7ac8763a56f8d5e5a41710993a", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/jbpm/commit/db71f9c7c8364b7ac8763a56f8d5e5a41710993a", "committedDate": "2020-07-22T10:10:43Z", "message": "[JBPM-9223] include case file details in case list.\n\nAdding new overloaded getCaseInstances method to CaseRuntimeDataService\nthat allows\nthe possibility to include case file information if a flag is set"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "db71f9c7c8364b7ac8763a56f8d5e5a41710993a", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/jbpm/commit/db71f9c7c8364b7ac8763a56f8d5e5a41710993a", "committedDate": "2020-07-22T10:10:43Z", "message": "[JBPM-9223] include case file details in case list.\n\nAdding new overloaded getCaseInstances method to CaseRuntimeDataService\nthat allows\nthe possibility to include case file information if a flag is set"}, "afterCommit": {"oid": "12a6cf2353ac45208c94c4915b0565fb0c73042f", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/jbpm/commit/12a6cf2353ac45208c94c4915b0565fb0c73042f", "committedDate": "2020-07-22T10:12:36Z", "message": "[JBPM-9223] include case file details in case list.\n\nAdding new overloaded getCaseInstances method to CaseRuntimeDataService\nthat allows\nthe possibility to include case file information if a flag is set"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "12a6cf2353ac45208c94c4915b0565fb0c73042f", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/jbpm/commit/12a6cf2353ac45208c94c4915b0565fb0c73042f", "committedDate": "2020-07-22T10:12:36Z", "message": "[JBPM-9223] include case file details in case list.\n\nAdding new overloaded getCaseInstances method to CaseRuntimeDataService\nthat allows\nthe possibility to include case file information if a flag is set"}, "afterCommit": {"oid": "7e0e72d9698eff90cf0f91683424d465c550d389", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/jbpm/commit/7e0e72d9698eff90cf0f91683424d465c550d389", "committedDate": "2020-07-22T12:09:22Z", "message": "[JBPM-9223] include case file details in case list.\n\nAdding new overloaded getCaseInstances method to CaseRuntimeDataService\nthat allows\nthe possibility to include case file information if a flag is set"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1902645a3370a1339bc274e6724b724cf3c953a4", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/jbpm/commit/1902645a3370a1339bc274e6724b724cf3c953a4", "committedDate": "2020-07-22T12:19:23Z", "message": "[JBPM-9223] include case file details in case list.\n\nAdding new overloaded getCaseInstances method to CaseRuntimeDataService\nthat allows\nthe possibility to include case file information if a flag is set"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7e0e72d9698eff90cf0f91683424d465c550d389", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/jbpm/commit/7e0e72d9698eff90cf0f91683424d465c550d389", "committedDate": "2020-07-22T12:09:22Z", "message": "[JBPM-9223] include case file details in case list.\n\nAdding new overloaded getCaseInstances method to CaseRuntimeDataService\nthat allows\nthe possibility to include case file information if a flag is set"}, "afterCommit": {"oid": "1902645a3370a1339bc274e6724b724cf3c953a4", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/jbpm/commit/1902645a3370a1339bc274e6724b724cf3c953a4", "committedDate": "2020-07-22T12:19:23Z", "message": "[JBPM-9223] include case file details in case list.\n\nAdding new overloaded getCaseInstances method to CaseRuntimeDataService\nthat allows\nthe possibility to include case file information if a flag is set"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUzMjY0Mzc4", "url": "https://github.com/kiegroup/jbpm/pull/1697#pullrequestreview-453264378", "createdAt": "2020-07-22T12:23:50Z", "commit": {"oid": "1902645a3370a1339bc274e6724b724cf3c953a4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 961, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}