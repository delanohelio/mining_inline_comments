{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA1NDYwMTY4", "number": 1782, "title": "[JBPM-9434] REST endpoint authetication fails if Authorization header\u2026", "bodyText": "\u2026 has == in encoded key in REST WIH\nThank you for submitting this pull request\nJIRA: (https://issues.redhat.com/browse/JBPM-9434)", "createdAt": "2020-10-18T11:56:43Z", "url": "https://github.com/kiegroup/jbpm/pull/1782", "merged": true, "mergeCommit": {"oid": "d27cad1c8f0e60e39ebf99e3fdb291671544f525"}, "closed": true, "closedAt": "2020-12-14T10:05:17Z", "author": {"login": "abhijithumbe"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdTuNzDAH2gAyNTA1NDYwMTY4OjljMzgwNWRlNjY1N2E1N2U1ZGJjMDJlOGU4M2FkYTMwMjViYjQzNDc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdUrHIvAFqTUxMzU0NTgwNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9c3805de6657a57e5dbc02e8e83ada3025bb4347", "author": {"user": {"login": "abhijithumbe", "name": null}}, "url": "https://github.com/kiegroup/jbpm/commit/9c3805de6657a57e5dbc02e8e83ada3025bb4347", "committedDate": "2020-10-18T11:52:30Z", "message": "[JBPM-9434] REST endpoint authetication fails if Authorization header has == in encoded key in REST WIH"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEyNTg2MzU5", "url": "https://github.com/kiegroup/jbpm/pull/1782#pullrequestreview-512586359", "createdAt": "2020-10-20T11:02:55Z", "commit": {"oid": "9c3805de6657a57e5dbc02e8e83ada3025bb4347"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQxMTowMjo1NVrOHk2zdQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQxMTowNzozMlrOHk29nQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODQwODY5Mw==", "bodyText": "We can keep previous separator, but forcing the length of the resulting array, just to split with the first separator:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                         String[] headerParts = h.split(\":\");\n          \n          \n            \n                         String[] headerParts = h.split(\"=\", 2);", "url": "https://github.com/kiegroup/jbpm/pull/1782#discussion_r508408693", "createdAt": "2020-10-20T11:02:55Z", "author": {"login": "gmunozfe"}, "path": "jbpm-workitems/jbpm-workitems-rest/src/main/java/org/jbpm/process/workitem/rest/RESTWorkItemHandler.java", "diffHunk": "@@ -905,7 +905,7 @@ protected void addAcceptHeader(HttpRequestBase theMethod,\n     protected void addCustomHeaders(String headers,\n             BiConsumer<String, String> consumer) {\n         for(String h : headers.split(\";\")) {\n-             String[] headerParts = h.split(\"=\");\n+             String[] headerParts = h.split(\":\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c3805de6657a57e5dbc02e8e83ada3025bb4347"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODQxMTI5Mw==", "bodyText": "It should be the other way around (expected, current):\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    assertEquals(result, headerValue);\n          \n          \n            \n                    assertEquals(headerValue, result);", "url": "https://github.com/kiegroup/jbpm/pull/1782#discussion_r508411293", "createdAt": "2020-10-20T11:07:32Z", "author": {"login": "gmunozfe"}, "path": "jbpm-workitems/jbpm-workitems-rest/src/test/java/org/jbpm/process/workitem/rest/RestWorkItemHandlerTest.java", "diffHunk": "@@ -1069,7 +1069,29 @@ public void testHeadersSingleValue() {\n         RESTWorkItemHandler handler = new RESTWorkItemHandler();\n         String headerKey = \"headerKey\";\n         String headerValue = \"headerValue\";\n-        String headers = headerKey + \"=\" + headerValue;\n+        String headers = headerKey + \":\" + headerValue;\n+         \n+        WorkItemImpl workItem = new WorkItemImpl();\n+        workItem.setParameter(\"Url\",\n+                              serverURL + \"/header/\" + headerKey);\n+        workItem.setParameter(\"Method\",\n+                              \"GET\");\n+        workItem.setParameter(PARAM_HEADERS, headers);\n+        \n+        WorkItemManager manager = new TestWorkItemManager();\n+        handler.executeWorkItem(workItem,\n+                                manager);\n+        Map<String, Object> results = ((TestWorkItemManager) manager).getResults(workItem.getId());\n+        String result = (String) results.get(PARAM_RESULT);\n+        assertEquals(result, headerValue);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c3805de6657a57e5dbc02e8e83ada3025bb4347"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b55256baa72789b130b2809776c1e46111896974", "author": {"user": {"login": "abhijithumbe", "name": null}}, "url": "https://github.com/kiegroup/jbpm/commit/b55256baa72789b130b2809776c1e46111896974", "committedDate": "2020-10-20T12:04:13Z", "message": "[JBPM-9434] REST endpoint authetication fails if Authorization header has == in encoded key in REST WIH"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzNTQ1ODA1", "url": "https://github.com/kiegroup/jbpm/pull/1782#pullrequestreview-513545805", "createdAt": "2020-10-21T10:49:26Z", "commit": {"oid": "b55256baa72789b130b2809776c1e46111896974"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 812, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}