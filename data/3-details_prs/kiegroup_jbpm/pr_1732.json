{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcwMjgyNDQz", "number": 1732, "title": "[JBPM-9298] Serialized session id is not written to .ser file in windows", "bodyText": "Here we are facing an OS related issue. Windows does not support ':' as part of\nfile name, so file writing always fails.\nIn order to fix it, ':' is replaced by '_' if the OS is windows\nJIRA:\nJBPM-9298", "createdAt": "2020-08-19T16:29:59Z", "url": "https://github.com/kiegroup/jbpm/pull/1732", "merged": true, "mergeCommit": {"oid": "1ab6b4599612c740817361c616dd8ad57c4b2561"}, "closed": true, "closedAt": "2020-08-21T09:49:52Z", "author": {"login": "fjtirado"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdAq9LKAFqTQ3MTMwODQxMA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdAtWEUAFqTQ3MTQ0ODA1NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxMzA4NDEw", "url": "https://github.com/kiegroup/jbpm/pull/1732#pullrequestreview-471308410", "createdAt": "2020-08-20T07:20:04Z", "commit": {"oid": "227b67b70db1e4d33cead1a6841fa2ca8163f343"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwNzoyMDowNFrOHDvfmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwNzoyMDowNFrOHDvfmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzY4NTkxMg==", "bodyText": "we have  commons lang3 in kie-server distribution. I would feel more comfortable using something like\nhttps://commons.apache.org/proper/commons-lang/javadocs/api-3.4/src-html/org/apache/commons/lang3/SystemUtils.html#line.1273\nwdyt ?", "url": "https://github.com/kiegroup/jbpm/pull/1732#discussion_r473685912", "createdAt": "2020-08-20T07:20:04Z", "author": {"login": "elguardian"}, "path": "jbpm-runtime-manager/src/main/java/org/jbpm/runtime/manager/impl/SingletonRuntimeManager.java", "diffHunk": "@@ -237,14 +237,19 @@ public void close() {\n         this.singleton = null;   \n     }\n     \n+    private File getPersistedFile(String location, String identifier) {\n+        // if windows, replace ':' by '_'\n+        return new File(location + File.separatorChar +\n+                        (File.separatorChar == '/' ? identifier : identifier.replace(':', '_')) + \"-jbpmSessionId.ser\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "227b67b70db1e4d33cead1a6841fa2ca8163f343"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "571294f4fb0db89edd7563785d7c9ab8e91ade7f", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/jbpm/commit/571294f4fb0db89edd7563785d7c9ab8e91ade7f", "committedDate": "2020-08-20T08:27:37Z", "message": "[JBPM-9298] Serialized session id is not written to .ser file in windows\n\nHere we are facing an OS related issue. Windows does not support ':' as\nfile name, so file writing always fails.\nIn order to fix it, we replace ':' by '_' if os is windows.\nTo determine OS we rely on apache common lang library"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "227b67b70db1e4d33cead1a6841fa2ca8163f343", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/jbpm/commit/227b67b70db1e4d33cead1a6841fa2ca8163f343", "committedDate": "2020-08-19T16:28:21Z", "message": "[JBPM-9298] Serialized session id is not written to .ser file in windows\n\nHere we are facing an OS related issue. Windows does not support ':' as\nfile name, so file writing always fails.\nIn order to fix it, we replace ':' by '_' if the file system use a\nseparator char different than '/'\nI prefer that approach rather than os.name property, which is error\nprompt, check for example this thread\nhttps://stackoverflow.com/questions/31909107/javas-os-name-for-windows-10/31909887#31909887"}, "afterCommit": {"oid": "571294f4fb0db89edd7563785d7c9ab8e91ade7f", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/jbpm/commit/571294f4fb0db89edd7563785d7c9ab8e91ade7f", "committedDate": "2020-08-20T08:27:37Z", "message": "[JBPM-9298] Serialized session id is not written to .ser file in windows\n\nHere we are facing an OS related issue. Windows does not support ':' as\nfile name, so file writing always fails.\nIn order to fix it, we replace ':' by '_' if os is windows.\nTo determine OS we rely on apache common lang library"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxNDQ4MDU0", "url": "https://github.com/kiegroup/jbpm/pull/1732#pullrequestreview-471448054", "createdAt": "2020-08-20T10:07:04Z", "commit": {"oid": "571294f4fb0db89edd7563785d7c9ab8e91ade7f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1004, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}