{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc2NTQ2MjQ2", "number": 1596, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxNDo1Nzo0NlrODgufbg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQyMjoxMjoyNVrODg3zag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1NjQyNzM0OnYy", "diffSide": "RIGHT", "path": "jbpm-test-coverage/src/test/java/org/jbpm/test/functional/log/ProcessInstanceLogCleanTest.java", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxNDo1Nzo0NlrOFrFklw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQwODoxNzo1NVrOFrenFQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDcyNDM3NQ==", "bodyText": "If only this test is problematic, I would add a delay just here, otherwise we will be prolonging all tests in the class.", "url": "https://github.com/kiegroup/jbpm/pull/1596#discussion_r380724375", "createdAt": "2020-02-18T14:57:46Z", "author": {"login": "MarianMacik"}, "path": "jbpm-test-coverage/src/test/java/org/jbpm/test/functional/log/ProcessInstanceLogCleanTest.java", "diffHunk": "@@ -223,7 +224,7 @@ public void deleteLogsWithStatusActive() {\n \n     @Test\n     @BZ(\"1188702\")\n-    public void deleteLogsByDate() {\n+    public void deleteLogsByDate() throws InterruptedException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4720665ad9bd7b548f171a77a58390ebc91b6618"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDczMjk4Nw==", "bodyText": "problem is only happening for that particular test method, however, the problem itself is the call to the method\nstartProcess(kieSession, HELLO_WORLD_PROCESS_ID, 4);\nThat's the one which is starting 4 processes at same time - for the code above.\nSo far, the issue is only happening for that test method, but it might affect future test cases calling the same \"startProcess\" method.\nAnother option, would be to create a new method overloaded called \"startProcess\", passing a delay in miliseconds for instance.\nI'd prefer this option - what do you think @MarianMacik?", "url": "https://github.com/kiegroup/jbpm/pull/1596#discussion_r380732987", "createdAt": "2020-02-18T15:10:40Z", "author": {"login": "afalhambra"}, "path": "jbpm-test-coverage/src/test/java/org/jbpm/test/functional/log/ProcessInstanceLogCleanTest.java", "diffHunk": "@@ -223,7 +224,7 @@ public void deleteLogsWithStatusActive() {\n \n     @Test\n     @BZ(\"1188702\")\n-    public void deleteLogsByDate() {\n+    public void deleteLogsByDate() throws InterruptedException {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDcyNDM3NQ=="}, "originalCommit": {"oid": "4720665ad9bd7b548f171a77a58390ebc91b6618"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDczNzM1OQ==", "bodyText": "yes, having a different method seems more clear.\nOne second delay is too much, perhaps 5-10 ms is enough as precision is per millisecond.", "url": "https://github.com/kiegroup/jbpm/pull/1596#discussion_r380737359", "createdAt": "2020-02-18T15:17:09Z", "author": {"login": "gmunozfe"}, "path": "jbpm-test-coverage/src/test/java/org/jbpm/test/functional/log/ProcessInstanceLogCleanTest.java", "diffHunk": "@@ -223,7 +224,7 @@ public void deleteLogsWithStatusActive() {\n \n     @Test\n     @BZ(\"1188702\")\n-    public void deleteLogsByDate() {\n+    public void deleteLogsByDate() throws InterruptedException {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDcyNDM3NQ=="}, "originalCommit": {"oid": "4720665ad9bd7b548f171a77a58390ebc91b6618"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDc4NzgyMw==", "bodyText": "+1 @afalhambra", "url": "https://github.com/kiegroup/jbpm/pull/1596#discussion_r380787823", "createdAt": "2020-02-18T16:30:21Z", "author": {"login": "MarianMacik"}, "path": "jbpm-test-coverage/src/test/java/org/jbpm/test/functional/log/ProcessInstanceLogCleanTest.java", "diffHunk": "@@ -223,7 +224,7 @@ public void deleteLogsWithStatusActive() {\n \n     @Test\n     @BZ(\"1188702\")\n-    public void deleteLogsByDate() {\n+    public void deleteLogsByDate() throws InterruptedException {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDcyNDM3NQ=="}, "originalCommit": {"oid": "4720665ad9bd7b548f171a77a58390ebc91b6618"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTEzNDYxMw==", "bodyText": "Done. Updated.", "url": "https://github.com/kiegroup/jbpm/pull/1596#discussion_r381134613", "createdAt": "2020-02-19T08:17:55Z", "author": {"login": "afalhambra"}, "path": "jbpm-test-coverage/src/test/java/org/jbpm/test/functional/log/ProcessInstanceLogCleanTest.java", "diffHunk": "@@ -223,7 +224,7 @@ public void deleteLogsWithStatusActive() {\n \n     @Test\n     @BZ(\"1188702\")\n-    public void deleteLogsByDate() {\n+    public void deleteLogsByDate() throws InterruptedException {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDcyNDM3NQ=="}, "originalCommit": {"oid": "4720665ad9bd7b548f171a77a58390ebc91b6618"}, "originalPosition": 49}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1Nzk1MzA2OnYy", "diffSide": "RIGHT", "path": "jbpm-test-coverage/src/test/java/org/jbpm/test/functional/log/ProcessInstanceLogCleanTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQyMjoxMjoyNVrOFrUXSQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQwODoxNzozMlrOFremWQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDk2NjcyOQ==", "bodyText": "Reduce sleep time (probably a few milliseconds is enough)", "url": "https://github.com/kiegroup/jbpm/pull/1596#discussion_r380966729", "createdAt": "2020-02-18T22:12:25Z", "author": {"login": "gmunozfe"}, "path": "jbpm-test-coverage/src/test/java/org/jbpm/test/functional/log/ProcessInstanceLogCleanTest.java", "diffHunk": "@@ -385,9 +380,10 @@ private void abortProcess(KieSession kieSession, long pid) {\n         }\n     }\n \n-    private List<ProcessInstance> startProcess(KieSession kieSession, String processId, int count) {\n+    private List<ProcessInstance> startProcess(KieSession kieSession, String processId, int count) throws InterruptedException {\n         List<ProcessInstance> piList = new ArrayList<ProcessInstance>();\n         for (int i = 0; i < count; i++) {\n+            TimeUnit.MILLISECONDS.sleep(1000);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4720665ad9bd7b548f171a77a58390ebc91b6618"}, "originalPosition": 141}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTEzNDQyNQ==", "bodyText": "agree", "url": "https://github.com/kiegroup/jbpm/pull/1596#discussion_r381134425", "createdAt": "2020-02-19T08:17:32Z", "author": {"login": "afalhambra"}, "path": "jbpm-test-coverage/src/test/java/org/jbpm/test/functional/log/ProcessInstanceLogCleanTest.java", "diffHunk": "@@ -385,9 +380,10 @@ private void abortProcess(KieSession kieSession, long pid) {\n         }\n     }\n \n-    private List<ProcessInstance> startProcess(KieSession kieSession, String processId, int count) {\n+    private List<ProcessInstance> startProcess(KieSession kieSession, String processId, int count) throws InterruptedException {\n         List<ProcessInstance> piList = new ArrayList<ProcessInstance>();\n         for (int i = 0; i < count; i++) {\n+            TimeUnit.MILLISECONDS.sleep(1000);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDk2NjcyOQ=="}, "originalCommit": {"oid": "4720665ad9bd7b548f171a77a58390ebc91b6618"}, "originalPosition": 141}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1813, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}