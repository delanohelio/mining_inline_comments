{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk4NTUwOTgz", "number": 1770, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0yMFQxMzoxNTo0MlrOFQ3xDA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0yMFQxMzoxNTo0MlrOFQ3xDA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzUzMjM1MjEyOnYy", "diffSide": "RIGHT", "path": "jbpm-runtime-manager/src/main/java/org/jbpm/runtime/manager/impl/migration/MigrationManager.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0yMFQxMzoxNTo0MlrOIW9uQQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0yMFQxMzo0NDoyNFrOIW-1fQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MDk1MDg0OQ==", "bodyText": "Is this change needed for the upgrade? In case we want to avoid NPE, I would suggest to check if there is any error in the report and if so, just return. This is just a partial solution because if process or processId is null, then we will continue. So we should stop in case any of the three is null.\nIn case it is not needed for the upgrade, I would solve it in a separate PR.", "url": "https://github.com/kiegroup/jbpm/pull/1770#discussion_r560950849", "createdAt": "2021-01-20T13:15:42Z", "author": {"login": "MarianMacik"}, "path": "jbpm-runtime-manager/src/main/java/org/jbpm/runtime/manager/impl/migration/MigrationManager.java", "diffHunk": "@@ -389,6 +389,9 @@ private void upgradeProcessInstance(KieRuntime oldkruntime,\n         if (process == null) {\n             report.addEntry(Type.ERROR, \"Could not find process \" + processId);\n         }\n+        if (processInstance == null) {\n+            return;\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd992c8542939262603593cfca6be26dc24503f7"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MDk2OTA4NQ==", "bodyText": "Hi @MarianMacik, I remember that I've got a complaint from the building process due to the lack of a null check there. If processInstance is null, then the next line will break (processInstance.getProcessId().equals(processId)).\nAnyway, I removed locally this check and the build passed so I'll revert this change. Let's see if we get a green build from Jenkins.", "url": "https://github.com/kiegroup/jbpm/pull/1770#discussion_r560969085", "createdAt": "2021-01-20T13:44:24Z", "author": {"login": "caponetto"}, "path": "jbpm-runtime-manager/src/main/java/org/jbpm/runtime/manager/impl/migration/MigrationManager.java", "diffHunk": "@@ -389,6 +389,9 @@ private void upgradeProcessInstance(KieRuntime oldkruntime,\n         if (process == null) {\n             report.addEntry(Type.ERROR, \"Could not find process \" + processId);\n         }\n+        if (processInstance == null) {\n+            return;\n+        }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MDk1MDg0OQ=="}, "originalCommit": {"oid": "bd992c8542939262603593cfca6be26dc24503f7"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1589, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}