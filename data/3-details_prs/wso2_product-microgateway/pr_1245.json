{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIxNDg3NDE4", "number": 1245, "title": "Add log4j logger for native implementation", "bodyText": "Purpose\nProvide detailed error logs via using the log4j2 logger for the native implementation.\nIssues\n\nFixes #1244\nAutomation tests\n\nUnit tests added: No\nIntegration tests added: No\n\nTested environments\n\nMacOS Mojave\nRemarks\n\nTo debug the native implementation, the user needs to edit the existing log4j.properties file in /conf/log4j2.properties. (providing --b7a.log.level parameter does not affect on this)\nIf the log4j2.properties file does not exist in the /conf, the default configuration would be used.\n\n\nMaintainers: Check before merge\n\n Assigned 'Type' label\n Assigned the project\n Validated respective github issues\n Assigned milestone to the github issue(s)", "createdAt": "2020-05-21T17:44:06Z", "url": "https://github.com/wso2/product-microgateway/pull/1245", "merged": true, "mergeCommit": {"oid": "ccb956d6e5e1e3390beb2921e488adfb7231693a"}, "closed": true, "closedAt": "2020-06-08T16:03:55Z", "author": {"login": "VirajSalaka"}, "timelineItems": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcjjUHkgH2gAyNDIxNDg3NDE4Ojk4OTA2Yjc3MmE3N2ZhZmU2ZTZmMGM2MDIwYjhkNzMyNzM3NTc4MGY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcoU3L_AH2gAyNDIxNDg3NDE4OjBiOWUwNzljZjUwYTAwNDcwNTJiYTRjZmRlNjY4ZjQ1NzUwZDU2ZmQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "98906b772a77fafe6e6f0c6020b8d7327375780f", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/98906b772a77fafe6e6f0c6020b8d7327375780f", "committedDate": "2020-05-21T20:02:05Z", "message": "add log4j logger for native implementation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7b07dfc5eab42bd77175dcdc893fc66ba62276c9", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/7b07dfc5eab42bd77175dcdc893fc66ba62276c9", "committedDate": "2020-05-21T17:37:29Z", "message": "add log4j logger for native implementation"}, "afterCommit": {"oid": "98906b772a77fafe6e6f0c6020b8d7327375780f", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/98906b772a77fafe6e6f0c6020b8d7327375780f", "committedDate": "2020-05-21T20:02:05Z", "message": "add log4j logger for native implementation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2NjE2MDcx", "url": "https://github.com/wso2/product-microgateway/pull/1245#pullrequestreview-416616071", "createdAt": "2020-05-22T02:51:30Z", "commit": {"oid": "98906b772a77fafe6e6f0c6020b8d7327375780f"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQwMjo1MTozMFrOGZJFPQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQwMjo1MjowNFrOGZJFuw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTAxNjM4MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            then", "url": "https://github.com/wso2/product-microgateway/pull/1245#discussion_r429016381", "createdAt": "2020-05-22T02:51:30Z", "author": {"login": "praminda"}, "path": "distribution/resources/bin/gateway", "diffHunk": "@@ -283,6 +283,13 @@ else\n     done\n fi\n \n+# setup log4j configuration file to debug native implementation\n+LOG4J_CONFIGURATION_FILE=\"${GW_HOME}/conf/log4j2.properties\"\n+if [ -f \"$LOG4J_CONFIGURATION_FILE\" ]\n+then", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98906b772a77fafe6e6f0c6020b8d7327375780f"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTAxNjQ1MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            if [ -f \"$LOG4J_CONFIGURATION_FILE\" ]\n          \n          \n            \n            if [ -f \"$LOG4J_CONFIGURATION_FILE\" ]; then", "url": "https://github.com/wso2/product-microgateway/pull/1245#discussion_r429016450", "createdAt": "2020-05-22T02:51:52Z", "author": {"login": "praminda"}, "path": "distribution/resources/bin/gateway", "diffHunk": "@@ -283,6 +283,13 @@ else\n     done\n fi\n \n+# setup log4j configuration file to debug native implementation\n+LOG4J_CONFIGURATION_FILE=\"${GW_HOME}/conf/log4j2.properties\"\n+if [ -f \"$LOG4J_CONFIGURATION_FILE\" ]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98906b772a77fafe6e6f0c6020b8d7327375780f"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTAxNjUwNw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            #logger.classLevelLogger.level = debug\n          \n          \n            \n            #logger.classLevelLogger.level = debug", "url": "https://github.com/wso2/product-microgateway/pull/1245#discussion_r429016507", "createdAt": "2020-05-22T02:52:04Z", "author": {"login": "praminda"}, "path": "distribution/resources/conf/log4j2.properties", "diffHunk": "@@ -0,0 +1,15 @@\n+# This sets the global logging level and specifies the appenders\n+status = error\n+rootLogger.level = error\n+rootLogger.appenderRef.stdout.ref = STDOUT\n+\n+# settings for the console appender\n+appender.console.type = Console\n+appender.console.name = STDOUT\n+appender.console.layout.type = PatternLayout\n+appender.console.layout.pattern = %-4r %d [%t] %-5p [%c] %x - %m%n\n+\n+# To debug the native implementation\n+#loggers = classLevelLogger\n+#logger.classLevelLogger.name = org.wso2.micro.gateway.core.{ClassName}\n+#logger.classLevelLogger.level = debug", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98906b772a77fafe6e6f0c6020b8d7327375780f"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7918405658be60fe67d2f8055bae39c1b9bf5a3d", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/7918405658be60fe67d2f8055bae39c1b9bf5a3d", "committedDate": "2020-05-22T05:04:22Z", "message": "Update distribution/resources/bin/gateway\n\nCo-authored-by: Praminda <pramindabj@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b80a56e9e99ff4ede181cc736d2f56fe2100f10c", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/b80a56e9e99ff4ede181cc736d2f56fe2100f10c", "committedDate": "2020-05-22T05:04:29Z", "message": "Update distribution/resources/bin/gateway\n\nCo-authored-by: Praminda <pramindabj@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ef9c1527a3bf871d0d61e7b10a9845a508361a0", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/4ef9c1527a3bf871d0d61e7b10a9845a508361a0", "committedDate": "2020-05-22T05:04:37Z", "message": "Update distribution/resources/conf/log4j2.properties\n\nCo-authored-by: Praminda <pramindabj@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2NzI4MzY1", "url": "https://github.com/wso2/product-microgateway/pull/1245#pullrequestreview-416728365", "createdAt": "2020-05-22T08:13:18Z", "commit": {"oid": "4ef9c1527a3bf871d0d61e7b10a9845a508361a0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7afe08ba8b04ff429d49fb48443a3db7937f8674", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/7afe08ba8b04ff429d49fb48443a3db7937f8674", "committedDate": "2020-05-26T17:57:11Z", "message": "add monitorInterval and change default pattern"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "608dbfc2ad5c6063135651469947468d2706b841", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/608dbfc2ad5c6063135651469947468d2706b841", "committedDate": "2020-05-26T17:58:48Z", "message": "Merge branch 'log4j-impl' of https://github.com/VirajSalaka/product-microgateway into log4j-impl"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2cddeb1d4b91b80668ab2f07976de1d475453556", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/2cddeb1d4b91b80668ab2f07976de1d475453556", "committedDate": "2020-05-26T18:00:36Z", "message": "Merge branch 'master' into log4j-impl"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "060892854b473fa3282da5b92d45204d8fc0d7da", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/060892854b473fa3282da5b92d45204d8fc0d7da", "committedDate": "2020-05-29T18:57:43Z", "message": "configure log4j2 programmatically"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c94971d1687cb747f746d7daf87fd7b7b0cdd15d", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/c94971d1687cb747f746d7daf87fd7b7b0cdd15d", "committedDate": "2020-05-29T18:46:52Z", "message": "configure log4j2 programmatically"}, "afterCommit": {"oid": "060892854b473fa3282da5b92d45204d8fc0d7da", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/060892854b473fa3282da5b92d45204d8fc0d7da", "committedDate": "2020-05-29T18:57:43Z", "message": "configure log4j2 programmatically"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0068b1e7e2a61baa0f6a72b64b1013997e2cbd8f", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/0068b1e7e2a61baa0f6a72b64b1013997e2cbd8f", "committedDate": "2020-05-29T19:25:55Z", "message": "support all the log levels provided by ballerina"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6afb9bb66a6349a8d813e676d72479c3318f640a", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/6afb9bb66a6349a8d813e676d72479c3318f640a", "committedDate": "2020-05-29T19:23:55Z", "message": "support all the log levels provided by ballerina"}, "afterCommit": {"oid": "0068b1e7e2a61baa0f6a72b64b1013997e2cbd8f", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/0068b1e7e2a61baa0f6a72b64b1013997e2cbd8f", "committedDate": "2020-05-29T19:25:55Z", "message": "support all the log levels provided by ballerina"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9603606cff04333d27b35483e2d6d491578547d5", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/9603606cff04333d27b35483e2d6d491578547d5", "committedDate": "2020-05-29T19:46:41Z", "message": "capitalize constants"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a765c565c3c7b9728f17efe5133657a7e2d9a355", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/a765c565c3c7b9728f17efe5133657a7e2d9a355", "committedDate": "2020-06-05T15:35:34Z", "message": "refactor all ballerina log:print method to Util method to follow similar pattern"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5191343c6cf0c8fd5f999b334e6f37efe9dba028", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/5191343c6cf0c8fd5f999b334e6f37efe9dba028", "committedDate": "2020-06-05T15:43:21Z", "message": "Merge branch 'master' into log4j-impl"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0b9e079cf50a0047052ba4cfde668f45750d56fd", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/0b9e079cf50a0047052ba4cfde668f45750d56fd", "committedDate": "2020-06-05T16:01:26Z", "message": "change the log4j impl to later added native implemented classes"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1091, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}