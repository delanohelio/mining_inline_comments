{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM0MjgwNTIx", "number": 1519, "title": "Fix scope details in the invocation context.", "bodyText": "Purpose\nThis PR will add correct scope details to the invocation context.\nIssues\n\nFixes #1498\nAutomation tests\n\nUnit tests added: Yes/No\nIntegration tests added: Yes/No\n\nTested environments\n\nNot Tested\n\nMaintainers: Check before merge\n\n Assigned 'Type' label\n Assigned the project\n Validated respective github issues\n Assigned milestone to the github issue(s)", "createdAt": "2020-12-08T08:42:12Z", "url": "https://github.com/wso2/product-microgateway/pull/1519", "merged": true, "mergeCommit": {"oid": "fc64e27ffcba2d678f18f8e91925dfb2c6c0f583"}, "closed": true, "closedAt": "2021-03-18T14:24:52Z", "author": {"login": "ShalkiWenushika"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdkF_FEAH2gAyNTM0MjgwNTIxOjg4MTY1Y2Y1NDM5YTdkZjVkNTlkZmYzMGViZjlhYjliNDAyNWUzZDc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABeEWvIygFqTYxNTQzNzE5Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "88165cf5439a7df5d59dff30ebf9ab9b4025e3d7", "author": {"user": {"login": "ShalkiWenushika", "name": "Shalki Wenushika"}}, "url": "https://github.com/wso2/product-microgateway/commit/88165cf5439a7df5d59dff30ebf9ab9b4025e3d7", "committedDate": "2020-12-08T08:36:56Z", "message": "Add all scopes to the principal component"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2ODY5MTA3", "url": "https://github.com/wso2/product-microgateway/pull/1519#pullrequestreview-546869107", "createdAt": "2020-12-08T08:48:02Z", "commit": {"oid": "88165cf5439a7df5d59dff30ebf9ab9b4025e3d7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwODo0ODowMlrOIBN2rA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwODo0ODowMlrOIBN2rA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODE0NjQ3Ng==", "bodyText": "Lets use proper variables names", "url": "https://github.com/wso2/product-microgateway/pull/1519#discussion_r538146476", "createdAt": "2020-12-08T08:48:02Z", "author": {"login": "Rajith90"}, "path": "components/micro-gateway-core/src/main/ballerina/src/gateway/handler_providers/oauth2_key_validation_provider.bal", "diffHunk": "@@ -219,6 +219,24 @@ public type OAuth2KeyValidationProvider object {\n \n     }\n \n+    public function setScopesToPrincipalComponent(xml responseXml) {\n+            string[] scopes = [];\n+            int i = 0;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "88165cf5439a7df5d59dff30ebf9ab9b4025e3d7"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2ODcwMTE2", "url": "https://github.com/wso2/product-microgateway/pull/1519#pullrequestreview-546870116", "createdAt": "2020-12-08T08:48:31Z", "commit": {"oid": "88165cf5439a7df5d59dff30ebf9ab9b4025e3d7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwODo0ODozMVrOIBN3xQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwODo0ODozMVrOIBN3xQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODE0Njc1Nw==", "bodyText": "If scope is string then what are we returning", "url": "https://github.com/wso2/product-microgateway/pull/1519#discussion_r538146757", "createdAt": "2020-12-08T08:48:31Z", "author": {"login": "Rajith90"}, "path": "components/micro-gateway-core/src/main/ballerina/src/gateway/handler_providers/oauth2_key_validation_provider.bal", "diffHunk": "@@ -219,6 +219,24 @@ public type OAuth2KeyValidationProvider object {\n \n     }\n \n+    public function setScopesToPrincipalComponent(xml responseXml) {\n+            string[] scopes = [];\n+            int i = 0;\n+            // Iterate through scopes.\n+            foreach xml|string scope in responseXml/<apim:scopes>/* {\n+                if (scope is xml) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "88165cf5439a7df5d59dff30ebf9ab9b4025e3d7"}, "originalPosition": 9}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0e22980856f37084ed114f70d1815f938a7f5b68", "author": {"user": {"login": "ShalkiWenushika", "name": "Shalki Wenushika"}}, "url": "https://github.com/wso2/product-microgateway/commit/0e22980856f37084ed114f70d1815f938a7f5b68", "committedDate": "2020-12-08T11:14:47Z", "message": "Add an error message"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjE1NDM3MTkz", "url": "https://github.com/wso2/product-microgateway/pull/1519#pullrequestreview-615437193", "createdAt": "2021-03-18T14:13:29Z", "commit": {"oid": "0e22980856f37084ed114f70d1815f938a7f5b68"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1031, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}