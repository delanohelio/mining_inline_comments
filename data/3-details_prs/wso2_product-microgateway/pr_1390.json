{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY5NDI3OTA5", "number": 1390, "title": "Provide APIM specific error code, when authorization failure happens in multiple jwt config scenario.", "bodyText": "Purpose\nFix the issue, where the microgateway is not responding with specific error codes when authorization failure happens. This happens only when the multiple jet issuers are involved.\nIssues\n\nFixes #1387\nFixes #1395\nAutomation tests\n\nUnit tests added: No\nIntegration tests added: No\n\nTested environments\n\nMacOS Mojave\nMaintainers: Check before merge\n\n Assigned 'Type' label\n Assigned the project\n Validated respective github issues\n Assigned milestone to the github issue(s)", "createdAt": "2020-08-18T11:13:41Z", "url": "https://github.com/wso2/product-microgateway/pull/1390", "merged": true, "mergeCommit": {"oid": "09d81c4388524092aec8e50b7c656cbf7f45a3dc"}, "closed": true, "closedAt": "2020-08-21T13:32:14Z", "author": {"login": "VirajSalaka"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdAElsxAH2gAyNDY5NDI3OTA5OjhmMjhmOTI5ODhlYWNhY2M1ZmYzN2FiYWFhMGZhNTc1MzhlZWI3MTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdBEodFAH2gAyNDY5NDI3OTA5OjlkYzg2MGVjMDc3NThlYTVkM2ViYjg2NGVlY2FjM2Y5MDhjZTQyMTM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8f28f92988eacacc5ff37abaaa0fa57538eeb711", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/8f28f92988eacacc5ff37abaaa0fa57538eeb711", "committedDate": "2020-08-18T10:38:02Z", "message": "bug fix: proper error message is not provided for authorization failure, when multiple jwt issuers have been applied"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4db8c38d5e3156df714d700ebb2eb876f3a162cc", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/4db8c38d5e3156df714d700ebb2eb876f3a162cc", "committedDate": "2020-08-18T10:38:53Z", "message": "Revert \"bug fix: proper error message is not provided for authorization failure, when multiple jwt issuers have been applied\"\n\nThis reverts commit 8f28f92988eacacc5ff37abaaa0fa57538eeb711."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "38c3ccf0151b473e6dcf5c330d27d59248068012", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/38c3ccf0151b473e6dcf5c330d27d59248068012", "committedDate": "2020-08-18T10:52:39Z", "message": "remove unnecessary info logs printed when pilot node data is received"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6739078cc70577d4553db9066ee41132549412db", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/6739078cc70577d4553db9066ee41132549412db", "committedDate": "2020-08-18T18:50:26Z", "message": "bug fix: when subscription is disabled and scope protected resource is called with pilot node enabled, no proper error message is provided to the caller"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d6d0dca1fdaa7f1e484061934c562c996911db80", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/d6d0dca1fdaa7f1e484061934c562c996911db80", "committedDate": "2020-08-20T04:01:13Z", "message": "bug fix: change generated jwt claims to match APIM backend token"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ec9b329cd45112afe7a5bf906c74c76b47a56fed", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/ec9b329cd45112afe7a5bf906c74c76b47a56fed", "committedDate": "2020-08-21T04:20:02Z", "message": "bug fix: printing incorrect throttling debug log when local throttling is enabled"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63fc243dc468acffd60c718f31be153f675043d8", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/63fc243dc468acffd60c718f31be153f675043d8", "committedDate": "2020-08-21T06:04:04Z", "message": "revert Debug log to Info log for receiving jms events"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyMjAxNDEx", "url": "https://github.com/wso2/product-microgateway/pull/1390#pullrequestreview-472201411", "createdAt": "2020-08-21T06:27:37Z", "commit": {"oid": "63fc243dc468acffd60c718f31be153f675043d8"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMVQwNjoyNzozN1rOHEdI-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMVQwNjoyODoxNFrOHEdJ1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDQzMzc4Nw==", "bodyText": "The event should not be included in this log.", "url": "https://github.com/wso2/product-microgateway/pull/1390#discussion_r474433787", "createdAt": "2020-08-21T06:27:37Z", "author": {"login": "menakaj"}, "path": "components/micro-gateway-core/src/main/ballerina/src/gateway/services/gateway_jms_listener.bal", "diffHunk": "@@ -34,7 +34,7 @@ service gatewayNotificationService = service {\n             string? | error event = message.getString(NOTIFICATION_EVENT);\n \n             if (eventType is string && event is string) {\n-                printDebug(KEY_NOTIFICATION_EVENT_LISTENER, \"Recieved event with type : \" + eventType + \" and event : \" + event);\n+                printInfo(KEY_NOTIFICATION_EVENT_LISTENER, \"Recieved event with type : \" + eventType + \" and event : \" + event);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63fc243dc468acffd60c718f31be153f675043d8"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDQzNDAwNg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            printInfo(KEY_NOTIFICATION_EVENT_LISTENER, \"Recieved event with type : \" + eventType + \" and event : \" + event);\n          \n          \n            \n                            printInfo(KEY_NOTIFICATION_EVENT_LISTENER, \"Recieved event with type : \" + eventType);", "url": "https://github.com/wso2/product-microgateway/pull/1390#discussion_r474434006", "createdAt": "2020-08-21T06:28:14Z", "author": {"login": "menakaj"}, "path": "components/micro-gateway-core/src/main/ballerina/src/gateway/services/gateway_jms_listener.bal", "diffHunk": "@@ -34,7 +34,7 @@ service gatewayNotificationService = service {\n             string? | error event = message.getString(NOTIFICATION_EVENT);\n \n             if (eventType is string && event is string) {\n-                printDebug(KEY_NOTIFICATION_EVENT_LISTENER, \"Recieved event with type : \" + eventType + \" and event : \" + event);\n+                printInfo(KEY_NOTIFICATION_EVENT_LISTENER, \"Recieved event with type : \" + eventType + \" and event : \" + event);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63fc243dc468acffd60c718f31be153f675043d8"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyNDAxODgz", "url": "https://github.com/wso2/product-microgateway/pull/1390#pullrequestreview-472401883", "createdAt": "2020-08-21T11:06:11Z", "commit": {"oid": "63fc243dc468acffd60c718f31be153f675043d8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c76d90b548e4ef23e43fd711eb82fbf5cd33705", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/0c76d90b548e4ef23e43fd711eb82fbf5cd33705", "committedDate": "2020-08-21T11:44:53Z", "message": "fix commented issues"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyNDMxMDY0", "url": "https://github.com/wso2/product-microgateway/pull/1390#pullrequestreview-472431064", "createdAt": "2020-08-21T12:01:33Z", "commit": {"oid": "0c76d90b548e4ef23e43fd711eb82fbf5cd33705"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "477455333d1689b197a2aeed64e28cb9ea42f6ac", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/477455333d1689b197a2aeed64e28cb9ea42f6ac", "committedDate": "2020-08-21T13:12:57Z", "message": "bug fix: in grpc scenario, whenever the basic auth or apikey is enabled, oauth2 is also enabled"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "50edf5e5dee01abe76c54a5ea85443b12a968f0f", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/50edf5e5dee01abe76c54a5ea85443b12a968f0f", "committedDate": "2020-08-21T13:13:54Z", "message": "Merge branch 'master' of https://github.com/wso2/product-microgateway"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9dc860ec07758ea5d3ebb864eecac3f908ce4213", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/9dc860ec07758ea5d3ebb864eecac3f908ce4213", "committedDate": "2020-08-21T13:14:58Z", "message": "Merge branch 'master' into scope-fix"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 953, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}