{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIzMTk5Njc5", "number": 1250, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQxMDozMjo0OFrOEA1yUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQxMDozMzowMlrOEA1ymw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5MzE2Njg5OnYy", "diffSide": "RIGHT", "path": "tests/src/test/java/org/wso2/micro/gateway/tests/endpoints/EndpointWithSecurityTestCase.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQxMDozMjo0OFrOGcXgTg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQxMTo0MjozMFrOGcZWIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjM5ODQxNA==", "bodyText": "Lets change the description properly", "url": "https://github.com/wso2/product-microgateway/pull/1250#discussion_r432398414", "createdAt": "2020-05-29T10:32:48Z", "author": {"login": "Rajith90"}, "path": "tests/src/test/java/org/wso2/micro/gateway/tests/endpoints/EndpointWithSecurityTestCase.java", "diffHunk": "@@ -52,6 +52,31 @@ public void testPerAPISecureEndpoint() throws Exception {\n         Assert.assertEquals(response.getResponseCode(), 200, \"Response code mismatched\");\n     }\n \n+    @Test(description = \"Test Invoking the resource which endpoint defined at API level using references\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d9bd4766610ca7d50d3e0916cea12fbbcc37d646"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjQyODU3Nw==", "bodyText": "done", "url": "https://github.com/wso2/product-microgateway/pull/1250#discussion_r432428577", "createdAt": "2020-05-29T11:42:30Z", "author": {"login": "praminda"}, "path": "tests/src/test/java/org/wso2/micro/gateway/tests/endpoints/EndpointWithSecurityTestCase.java", "diffHunk": "@@ -52,6 +52,31 @@ public void testPerAPISecureEndpoint() throws Exception {\n         Assert.assertEquals(response.getResponseCode(), 200, \"Response code mismatched\");\n     }\n \n+    @Test(description = \"Test Invoking the resource which endpoint defined at API level using references\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjM5ODQxNA=="}, "originalCommit": {"oid": "d9bd4766610ca7d50d3e0916cea12fbbcc37d646"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5MzE2NzYzOnYy", "diffSide": "RIGHT", "path": "tests/src/test/java/org/wso2/micro/gateway/tests/endpoints/EndpointWithSecurityTestCase.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQxMDozMzowMlrOGcXgwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQxMTo0MjozNFrOGcZWOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjM5ODUyOQ==", "bodyText": "Lets change the description properly", "url": "https://github.com/wso2/product-microgateway/pull/1250#discussion_r432398529", "createdAt": "2020-05-29T10:33:02Z", "author": {"login": "Rajith90"}, "path": "tests/src/test/java/org/wso2/micro/gateway/tests/endpoints/EndpointWithSecurityTestCase.java", "diffHunk": "@@ -52,6 +52,31 @@ public void testPerAPISecureEndpoint() throws Exception {\n         Assert.assertEquals(response.getResponseCode(), 200, \"Response code mismatched\");\n     }\n \n+    @Test(description = \"Test Invoking the resource which endpoint defined at API level using references\")\n+    public void testSecureEndpointWithAuthnFailure() throws Exception {\n+        Map<String, String> headers = new HashMap<>();\n+        //test endpoint with token\n+        headers.put(HttpHeaderNames.AUTHORIZATION.toString(), \"Bearer \" + jwtTokenProd);\n+        org.wso2.micro.gateway.tests.util.HttpResponse response = HttpClientRequest\n+                .doGet(getServiceURLHttp(\"petstore/v5/store/order/1\"), headers);\n+        Assert.assertNotNull(response);\n+        Assert.assertEquals(response.getData(), ResponseConstants.AUTHENTICATION_FAILURE_RESPONSE);\n+        Assert.assertEquals(response.getResponseCode(), 401, \"Response code mismatched\");\n+    }\n+\n+\n+    @Test(description = \"Test Invoking the resource which endpoint defined at API level using references\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d9bd4766610ca7d50d3e0916cea12fbbcc37d646"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjQyODYwMQ==", "bodyText": "done", "url": "https://github.com/wso2/product-microgateway/pull/1250#discussion_r432428601", "createdAt": "2020-05-29T11:42:34Z", "author": {"login": "praminda"}, "path": "tests/src/test/java/org/wso2/micro/gateway/tests/endpoints/EndpointWithSecurityTestCase.java", "diffHunk": "@@ -52,6 +52,31 @@ public void testPerAPISecureEndpoint() throws Exception {\n         Assert.assertEquals(response.getResponseCode(), 200, \"Response code mismatched\");\n     }\n \n+    @Test(description = \"Test Invoking the resource which endpoint defined at API level using references\")\n+    public void testSecureEndpointWithAuthnFailure() throws Exception {\n+        Map<String, String> headers = new HashMap<>();\n+        //test endpoint with token\n+        headers.put(HttpHeaderNames.AUTHORIZATION.toString(), \"Bearer \" + jwtTokenProd);\n+        org.wso2.micro.gateway.tests.util.HttpResponse response = HttpClientRequest\n+                .doGet(getServiceURLHttp(\"petstore/v5/store/order/1\"), headers);\n+        Assert.assertNotNull(response);\n+        Assert.assertEquals(response.getData(), ResponseConstants.AUTHENTICATION_FAILURE_RESPONSE);\n+        Assert.assertEquals(response.getResponseCode(), 401, \"Response code mismatched\");\n+    }\n+\n+\n+    @Test(description = \"Test Invoking the resource which endpoint defined at API level using references\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjM5ODUyOQ=="}, "originalCommit": {"oid": "d9bd4766610ca7d50d3e0916cea12fbbcc37d646"}, "originalPosition": 17}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1234, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}