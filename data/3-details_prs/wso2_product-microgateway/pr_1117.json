{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg1NDgwODMz", "number": 1117, "title": "Fix #1116 - Reduce integration test running time", "bodyText": "Purpose\nReduce the integration test running time. This will reduce the total number of project builds from 23 to 13.\nIssues\n\nFixes #1116\nAutomation tests\n\nUnit tests added: Yes/No\nIntegration tests added: Yes/No\n\nTested environments\n\nNot Tested\n\nMaintainers: Check before merge\n\n Assigned 'Type' label\n Assigned the project\n Validated respective github issues\n Assigned milestone to the github issue(s)", "createdAt": "2020-03-09T09:42:52Z", "url": "https://github.com/wso2/product-microgateway/pull/1117", "merged": true, "mergeCommit": {"oid": "c9f10fb4a755cd9eb13dc2982ba261b0c121e74b"}, "closed": true, "closedAt": "2020-03-10T06:36:01Z", "author": {"login": "Rajith90"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcL6pU8gH2gAyMzg1NDgwODMzOjNmMzAzZTZmMWM0YzdmN2Q4NDk3NTEzNTBkNDkxYTVmYTI1YTViOTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcMMkULAFqTM3MTcwNjE0OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3f303e6f1c4c7f7d849751350d491a5fa25a5b98", "author": {"user": {"login": "Rajith90", "name": "Rajith Roshan"}}, "url": "https://github.com/wso2/product-microgateway/commit/3f303e6f1c4c7f7d849751350d491a5fa25a5b98", "committedDate": "2020-03-09T09:38:53Z", "message": "Fix #1116 - Reduce integration test running time"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcxNjgxMTU2", "url": "https://github.com/wso2/product-microgateway/pull/1117#pullrequestreview-371681156", "createdAt": "2020-03-10T04:53:27Z", "commit": {"oid": "3f303e6f1c4c7f7d849751350d491a5fa25a5b98"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQwNDo1MzoyN1rOF0Bfbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQwNDo1NTo1M1rOF0BhWw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA5NDcwMw==", "bodyText": "Do we need commented code? Can we remove?", "url": "https://github.com/wso2/product-microgateway/pull/1117#discussion_r390094703", "createdAt": "2020-03-10T04:53:27Z", "author": {"login": "praminda"}, "path": "tests/src/test/java/org/wso2/micro/gateway/tests/http2/HTTP2RequestsWithHTTP1BackEndTestCase.java", "diffHunk": "@@ -21,61 +21,51 @@\n import org.apache.commons.logging.Log;\n import org.apache.commons.logging.LogFactory;\n import org.testng.annotations.AfterClass;\n-import org.testng.annotations.BeforeClass;\n import org.testng.annotations.Test;\n-import org.wso2.micro.gateway.tests.common.BaseTestCase;\n-import org.wso2.micro.gateway.tests.common.KeyValidationInfo;\n-import org.wso2.micro.gateway.tests.common.MockAPIPublisher;\n-import org.wso2.micro.gateway.tests.common.model.API;\n-import org.wso2.micro.gateway.tests.common.model.ApplicationDTO;\n import org.wso2.micro.gateway.tests.util.HTTP2Client.Http2ClientRequest;\n-import org.wso2.micro.gateway.tests.util.TestConstant;\n-\n-import java.io.File;\n-\n import static org.wso2.micro.gateway.tests.util.TestConstant.GATEWAY_LISTENER_HTTPS_PORT;\n import static org.wso2.micro.gateway.tests.util.TestConstant.GATEWAY_LISTENER_HTTP_PORT;\n \n-public class HTTP2RequestsWithHTTP1BackEndTestCase extends BaseTestCase {\n+public class HTTP2RequestsWithHTTP1BackEndTestCase extends HTTP2RequestsWithHTTP2BackEndTestCase {\n \n     private static final Log log = LogFactory.getLog(HTTP2RequestsWithHTTP2BackEndTestCase.class);\n     protected Http2ClientRequest http2ClientRequest;\n-    private String jwtTokenProd;\n-\n-    @BeforeClass\n-    private void setup() throws Exception {\n-        String label = \"apimTestLabel\";\n-        String project = \"apimTestProject\";\n-        //get mock APIM Instance\n-        MockAPIPublisher pub = MockAPIPublisher.getInstance();\n-        API api = new API();\n-        api.setName(\"PizzaShackAPI\");\n-        api.setContext(\"/pizzashack\");\n-        api.setEndpoint(getMockServiceURLHttp(\"/echo\"));\n-        api.setVersion(\"1.0.0\");\n-        api.setProvider(\"admin\");\n-        //Register API with label\n-        pub.addApi(label, api);\n-\n-        //Define application info\n-        ApplicationDTO application = new ApplicationDTO();\n-        application.setName(\"jwtApp\");\n-        application.setTier(\"Unlimited\");\n-        application.setId((int) (Math.random() * 1000));\n+    //private String jwtTokenProd;\n \n-        //Register a production token with key validation info\n-        KeyValidationInfo info = new KeyValidationInfo();\n-        info.setApi(api);\n-        info.setApplication(application);\n-        info.setAuthorized(true);\n-        info.setKeyType(TestConstant.KEY_TYPE_PRODUCTION);\n-        info.setSubscriptionTier(\"Unlimited\");\n-\n-        String configPath = \"confs/http2-test.conf\";\n-        super.init(label, project, configPath);\n-\n-        jwtTokenProd = getJWT(api, application, \"Unlimited\", TestConstant.KEY_TYPE_PRODUCTION, 3600);\n-    }\n+//    @BeforeClass", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3f303e6f1c4c7f7d849751350d491a5fa25a5b98"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA5NDgxNA==", "bodyText": "Can we remove commented block?", "url": "https://github.com/wso2/product-microgateway/pull/1117#discussion_r390094814", "createdAt": "2020-03-10T04:54:01Z", "author": {"login": "praminda"}, "path": "tests/src/test/java/org/wso2/micro/gateway/tests/http2/HTTP2RequestsWithHTTP2BackEndTestCase.java", "diffHunk": "@@ -132,9 +138,9 @@ public void testHTTP1RequestsViaSecureConnectionWithHTTP2BE() throws Exception {\n         log.info(\"Response: \" + response.getResponseMessage() + \" , \" + response.getResponseCode());\n     }\n \n-    @AfterClass\n-    public void stop() throws Exception {\n-        //Stop all the mock servers\n-        super.finalize();\n-    }\n+//    @AfterClass", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3f303e6f1c4c7f7d849751350d491a5fa25a5b98"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA5NTE5NQ==", "bodyText": "Is removed test cases covered in somewhere else?", "url": "https://github.com/wso2/product-microgateway/pull/1117#discussion_r390095195", "createdAt": "2020-03-10T04:55:53Z", "author": {"login": "praminda"}, "path": "tests/src/test/resources/testng.xml", "diffHunk": "@@ -35,16 +35,9 @@\n         <classes>\n             <class name=\"org.wso2.micro.gateway.tests.apikey.APIKeyTestCase\" />\n             <class name=\"org.wso2.micro.gateway.tests.jwtRevocation.JWTRevocationSupportTestCase\" />\n-            <class name=\"org.wso2.micro.gateway.tests.security.AuthenticationFailureTestCase\" />", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3f303e6f1c4c7f7d849751350d491a5fa25a5b98"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc834a6eb6243dd49b67a0104b75d7884ba6be65", "author": {"user": {"login": "Rajith90", "name": "Rajith Roshan"}}, "url": "https://github.com/wso2/product-microgateway/commit/cc834a6eb6243dd49b67a0104b75d7884ba6be65", "committedDate": "2020-03-10T06:21:32Z", "message": "Remove the commented code"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcxNzA2MTQ5", "url": "https://github.com/wso2/product-microgateway/pull/1117#pullrequestreview-371706149", "createdAt": "2020-03-10T06:31:42Z", "commit": {"oid": "cc834a6eb6243dd49b67a0104b75d7884ba6be65"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1200, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}