{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkxMDg1NDMy", "number": 1153, "title": "Add callhome feature for micro-gw toolkit and runtime", "bodyText": "Purpose\n$Subject as this will Introduce CallHome feature for micro-gw toolkit and runtime.\ntoollkit: invoke callhome  while building the project\nruntime: invoke callhome  when starting the micro-gw\nIssues\n\nFixes #\nAutomation tests\n\nUnit tests added: Yes/No\nIntegration tests added: Yes/No\n\nTested environments\n\nNot Tested\n\nMaintainers: Check before merge\n\n Assigned 'Type' label\n Assigned the project\n Validated respective github issues\n Assigned milestone to the github issue(s)", "createdAt": "2020-03-19T15:52:44Z", "url": "https://github.com/wso2/product-microgateway/pull/1153", "merged": true, "mergeCommit": {"oid": "5d51f135fb70f6ca72ad7d49b35902911fd64581"}, "closed": true, "closedAt": "2020-03-20T06:39:23Z", "author": {"login": "chashikajw"}, "timelineItems": {"totalCount": 22, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcPJxP2gH2gAyMzkxMDg1NDMyOmE5NmRkMGJiZmYwZTEzOWUyOTU3YmZkYjRiNjc5NjA0NmIxNjM3NjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdyrpx2AFqTU3NDQxNTEyNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a96dd0bbff0e139e2957bfdb4b6796046b163766", "author": {"user": null}, "url": "https://github.com/wso2/product-microgateway/commit/a96dd0bbff0e139e2957bfdb4b6796046b163766", "committedDate": "2020-03-19T10:57:53Z", "message": "add callhome maven dependancy"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7494825dcd91e8f5ba896a6c9ec112fa416b9cdc", "author": {"user": null}, "url": "https://github.com/wso2/product-microgateway/commit/7494825dcd91e8f5ba896a6c9ec112fa416b9cdc", "committedDate": "2020-03-19T11:26:42Z", "message": "pack correct product.txt for runtime and toolkit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "787cb67fc11071f67e2781b464fe9d045bf56945", "author": {"user": null}, "url": "https://github.com/wso2/product-microgateway/commit/787cb67fc11071f67e2781b464fe9d045bf56945", "committedDate": "2020-03-19T13:35:34Z", "message": "implement callhome for toolkit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "26a393080fc4a827599a6bf158574e1b62ee5680", "author": {"user": null}, "url": "https://github.com/wso2/product-microgateway/commit/26a393080fc4a827599a6bf158574e1b62ee5680", "committedDate": "2020-03-19T13:53:17Z", "message": "remove unused import and format string"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e91a9e23e7b18097b7820825ca44d15cdf34162", "author": {"user": null}, "url": "https://github.com/wso2/product-microgateway/commit/1e91a9e23e7b18097b7820825ca44d15cdf34162", "committedDate": "2020-03-19T15:43:14Z", "message": "add  calllhome.jar path to runtime"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3b5dafb744b808438317aa787c520645407a6731", "author": {"user": null}, "url": "https://github.com/wso2/product-microgateway/commit/3b5dafb744b808438317aa787c520645407a6731", "committedDate": "2020-03-19T15:44:04Z", "message": "implement callhome for runtime"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3ODU5NzA5", "url": "https://github.com/wso2/product-microgateway/pull/1153#pullrequestreview-377859709", "createdAt": "2020-03-19T15:57:10Z", "commit": {"oid": "3b5dafb744b808438317aa787c520645407a6731"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxNTo1NzoxMVrOF41ILw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxNTo1NzoxMVrOF41ILw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTEzNTAyMw==", "bodyText": "Lets read the trust store from toolkit-config.toml", "url": "https://github.com/wso2/product-microgateway/pull/1153#discussion_r395135023", "createdAt": "2020-03-19T15:57:11Z", "author": {"login": "Rajith90"}, "path": "components/micro-gateway-cli/src/main/java/org/wso2/apimgt/gateway/cli/cmd/BuildCmd.java", "diffHunk": "@@ -327,4 +334,22 @@ private void initTarget(String projectName) throws IOException {\n         CmdUtils.createDirectory(projectModuleDir, true);\n     }\n \n+    /**\n+     * Invoke call home.\n+     *\n+     */\n+    private void invokeCallhome() {\n+        String productHome = CmdUtils.getCLIHome();\n+        String trustStoreLocation = productHome + File.separator + RESTServiceConstants.DEFAULT_TRUSTSTORE_PATH;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3b5dafb744b808438317aa787c520645407a6731"}, "originalPosition": 38}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3ODYwMjAw", "url": "https://github.com/wso2/product-microgateway/pull/1153#pullrequestreview-377860200", "createdAt": "2020-03-19T15:57:42Z", "commit": {"oid": "3b5dafb744b808438317aa787c520645407a6731"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxNTo1Nzo0MlrOF41Jww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxNTo1Nzo0MlrOF41Jww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTEzNTQyNw==", "bodyText": "I think we need some time between execute and print methods.", "url": "https://github.com/wso2/product-microgateway/pull/1153#discussion_r395135427", "createdAt": "2020-03-19T15:57:42Z", "author": {"login": "Rajith90"}, "path": "components/micro-gateway-cli/src/main/java/org/wso2/apimgt/gateway/cli/cmd/BuildCmd.java", "diffHunk": "@@ -327,4 +334,22 @@ private void initTarget(String projectName) throws IOException {\n         CmdUtils.createDirectory(projectModuleDir, true);\n     }\n \n+    /**\n+     * Invoke call home.\n+     *\n+     */\n+    private void invokeCallhome() {\n+        String productHome = CmdUtils.getCLIHome();\n+        String trustStoreLocation = productHome + File.separator + RESTServiceConstants.DEFAULT_TRUSTSTORE_PATH;\n+        String trustStorePassword = RESTServiceConstants.DEFAULT_TRUSTSTORE_PASS;\n+\n+        CallHomeInfo callhomeinfo = Util.createCallHomeInfo(productHome, trustStoreLocation, trustStorePassword);\n+        CallHomeExecutor.execute(callhomeinfo);\n+        String callHomeResponse = CallHomeExecutor.getMessage();\n+        String formattedMessage = MessageFormatter.formatMessage(callHomeResponse, 180);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3b5dafb744b808438317aa787c520645407a6731"}, "originalPosition": 44}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3ODYxNzI5", "url": "https://github.com/wso2/product-microgateway/pull/1153#pullrequestreview-377861729", "createdAt": "2020-03-19T15:59:18Z", "commit": {"oid": "3b5dafb744b808438317aa787c520645407a6731"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxNTo1OToxOVrOF41Org==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxNTo1OToxOVrOF41Org==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTEzNjY4Ng==", "bodyText": "Lets make it a async function call", "url": "https://github.com/wso2/product-microgateway/pull/1153#discussion_r395136686", "createdAt": "2020-03-19T15:59:19Z", "author": {"login": "Rajith90"}, "path": "components/micro-gateway-cli/src/main/resources/templates/main.mustache", "diffHunk": "@@ -1,6 +1,7 @@\n import wso2/gateway;\n \n public function main() {\n+    gateway:invokeCallHome();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3b5dafb744b808438317aa787c520645407a6731"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3ODYyODIz", "url": "https://github.com/wso2/product-microgateway/pull/1153#pullrequestreview-377862823", "createdAt": "2020-03-19T16:00:29Z", "commit": {"oid": "3b5dafb744b808438317aa787c520645407a6731"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxNjowMDoyOVrOF41R9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxNjowMDoyOVrOF41R9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTEzNzUyNQ==", "bodyText": "WE need to pass the trust store location and password from micro-gw.conf file. We can't hardcode here", "url": "https://github.com/wso2/product-microgateway/pull/1153#discussion_r395137525", "createdAt": "2020-03-19T16:00:29Z", "author": {"login": "Rajith90"}, "path": "components/micro-gateway-core/src/main/java/org/wso2/micro/gateway/core/callhome/Callhome.java", "diffHunk": "@@ -0,0 +1,62 @@\n+/*\n+ *  Copyright (c) 2019, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *  http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+\n+package org.wso2.micro.gateway.core.callhome;\n+\n+import org.wso2.callhome.CallHomeExecutor;\n+import org.wso2.callhome.utils.CallHomeInfo;\n+import org.wso2.callhome.utils.Util;\n+import org.wso2.micro.gateway.core.Constants;\n+\n+import java.io.File;\n+/**\n+ * Invoke call home\n+ *\n+ *\n+ */\n+public class Callhome {\n+\n+    /**\n+     * run call home\n+     *\n+     */\n+    public static void runCallHome() {\n+        String productHome = getRuntimeHome();\n+        String trustStoreLocation = getTrustStoreLocation();\n+        String trustStorePassword = Constants.TRUST_STORE_PASSWORD;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3b5dafb744b808438317aa787c520645407a6731"}, "originalPosition": 39}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3ODY0NTc0", "url": "https://github.com/wso2/product-microgateway/pull/1153#pullrequestreview-377864574", "createdAt": "2020-03-19T16:02:21Z", "commit": {"oid": "3b5dafb744b808438317aa787c520645407a6731"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxNjowMzo0OVrOF41beA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxNjowMzo0OVrOF41beA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTEzOTk2MA==", "bodyText": "Better to put the dot \".\"\nOtherwise the checkstyle plugin will fail in windows.", "url": "https://github.com/wso2/product-microgateway/pull/1153#discussion_r395139960", "createdAt": "2020-03-19T16:03:49Z", "author": {"login": "VirajSalaka"}, "path": "components/micro-gateway-core/src/main/java/org/wso2/micro/gateway/core/callhome/Callhome.java", "diffHunk": "@@ -0,0 +1,62 @@\n+/*\n+ *  Copyright (c) 2019, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *  http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+\n+package org.wso2.micro.gateway.core.callhome;\n+\n+import org.wso2.callhome.CallHomeExecutor;\n+import org.wso2.callhome.utils.CallHomeInfo;\n+import org.wso2.callhome.utils.Util;\n+import org.wso2.micro.gateway.core.Constants;\n+\n+import java.io.File;\n+/**\n+ * Invoke call home", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3b5dafb744b808438317aa787c520645407a6731"}, "originalPosition": 26}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d743ad49fe9b8e350c41401ddd4330de993d1c54", "author": {"user": null}, "url": "https://github.com/wso2/product-microgateway/commit/d743ad49fe9b8e350c41401ddd4330de993d1c54", "committedDate": "2020-03-19T19:14:07Z", "message": "change methods to read trustore properties in runtime"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b8bfc7c9070c94b8ef23b203e224029d76d3748c", "author": {"user": null}, "url": "https://github.com/wso2/product-microgateway/commit/b8bfc7c9070c94b8ef23b203e224029d76d3748c", "committedDate": "2020-03-19T21:58:40Z", "message": "add thres for callhome print"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71d4f4a8ef8373219e4e6e5c11e2a1c0c0d8519f", "author": {"user": null}, "url": "https://github.com/wso2/product-microgateway/commit/71d4f4a8ef8373219e4e6e5c11e2a1c0c0d8519f", "committedDate": "2020-03-20T02:59:05Z", "message": "remove truststore credentials from java constant file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c9426e087f2b95121d08c168d4c3bc186d894786", "author": {"user": null}, "url": "https://github.com/wso2/product-microgateway/commit/c9426e087f2b95121d08c168d4c3bc186d894786", "committedDate": "2020-03-20T04:45:03Z", "message": "read trust store location from config file in toolkit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "572276a234d4edb00fe970addddc2262fd9563ab", "author": {"user": null}, "url": "https://github.com/wso2/product-microgateway/commit/572276a234d4edb00fe970addddc2262fd9563ab", "committedDate": "2020-03-20T05:41:49Z", "message": "make invokecallhome fucnction as async fuction"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4MjQ1MjI3", "url": "https://github.com/wso2/product-microgateway/pull/1153#pullrequestreview-378245227", "createdAt": "2020-03-20T05:53:34Z", "commit": {"oid": "572276a234d4edb00fe970addddc2262fd9563ab"}, "state": "COMMENTED", "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQwNTo1MzozNFrOF5ITRw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQwNTo1NzowMVrOF5IVlQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTQ0OTE1OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            // Copyright (c) 2019, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n          \n          \n            \n            // Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.", "url": "https://github.com/wso2/product-microgateway/pull/1153#discussion_r395449159", "createdAt": "2020-03-20T05:53:34Z", "author": {"login": "praminda"}, "path": "components/micro-gateway-core/src/main/ballerina/src/gateway/native/callHome.bal", "diffHunk": "@@ -0,0 +1,40 @@\n+// Copyright (c) 2019, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "572276a234d4edb00fe970addddc2262fd9563ab"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTQ0OTE5OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            } external;\n          \n          \n            \n            } external;", "url": "https://github.com/wso2/product-microgateway/pull/1153#discussion_r395449199", "createdAt": "2020-03-20T05:53:45Z", "author": {"login": "praminda"}, "path": "components/micro-gateway-core/src/main/ballerina/src/gateway/native/callHome.bal", "diffHunk": "@@ -0,0 +1,40 @@\n+// Copyright (c) 2019, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+import ballerinax/java;\n+\n+# Invoke callhome.\n+#\n+# + trustStoreLocation - truststore location\n+# + trustStorePassword - truststore password\n+public function runCallHome(handle trustStoreLocation, handle trustStorePassword ) = @java:Method  {\n+    name: \"runCallHome\",\n+    class: \"org.wso2.micro.gateway.core.callhome.Callhome\"\n+} external;\n+\n+public function invokeCallHome() {\n+    handle trustStoreLocationUnresolve = java:fromString(getConfigValue(LISTENER_CONF_INSTANCE_ID, TRUST_STORE_PATH, DEFAULT_TRUST_STORE_PATH));\n+    handle trustStoreLocation = getTrustStoreLocation(trustStoreLocationUnresolve);\n+    string trustStorePassword = getConfigValue(LISTENER_CONF_INSTANCE_ID, TRUST_STORE_PASSWORD, DEFAULT_TRUST_STORE_PASSWORD);\n+\n+    runCallHome(trustStoreLocation,java:fromString(trustStorePassword));\n+}\n+\n+\n+public function getTrustStoreLocation(handle pathsubstring) returns handle = @java:Method  {\n+    name: \"getTrustStoreLocation\",\n+    class: \"org.wso2.micro.gateway.core.callhome.Callhome\"\n+} external;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "572276a234d4edb00fe970addddc2262fd9563ab"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTQ0OTMzNg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             *  Copyright (c) 2019, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n          \n          \n            \n             *  Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.", "url": "https://github.com/wso2/product-microgateway/pull/1153#discussion_r395449336", "createdAt": "2020-03-20T05:54:33Z", "author": {"login": "praminda"}, "path": "components/micro-gateway-core/src/main/java/org/wso2/micro/gateway/core/callhome/Callhome.java", "diffHunk": "@@ -0,0 +1,62 @@\n+/*\n+ *  Copyright (c) 2019, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "572276a234d4edb00fe970addddc2262fd9563ab"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTQ0OTM2OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             *", "url": "https://github.com/wso2/product-microgateway/pull/1153#discussion_r395449369", "createdAt": "2020-03-20T05:54:45Z", "author": {"login": "praminda"}, "path": "components/micro-gateway-core/src/main/java/org/wso2/micro/gateway/core/callhome/Callhome.java", "diffHunk": "@@ -0,0 +1,62 @@\n+/*\n+ *  Copyright (c) 2019, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *  http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+\n+package org.wso2.micro.gateway.core.callhome;\n+\n+import org.wso2.callhome.CallHomeExecutor;\n+import org.wso2.callhome.utils.CallHomeInfo;\n+import org.wso2.callhome.utils.Util;\n+import org.wso2.micro.gateway.core.Constants;\n+\n+/**\n+ * Invoke call home.\n+ *", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "572276a234d4edb00fe970addddc2262fd9563ab"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTQ0OTM5MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             *", "url": "https://github.com/wso2/product-microgateway/pull/1153#discussion_r395449391", "createdAt": "2020-03-20T05:54:53Z", "author": {"login": "praminda"}, "path": "components/micro-gateway-core/src/main/java/org/wso2/micro/gateway/core/callhome/Callhome.java", "diffHunk": "@@ -0,0 +1,62 @@\n+/*\n+ *  Copyright (c) 2019, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *  http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+\n+package org.wso2.micro.gateway.core.callhome;\n+\n+import org.wso2.callhome.CallHomeExecutor;\n+import org.wso2.callhome.utils.CallHomeInfo;\n+import org.wso2.callhome.utils.Util;\n+import org.wso2.micro.gateway.core.Constants;\n+\n+/**\n+ * Invoke call home.\n+ *\n+ *", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "572276a234d4edb00fe970addddc2262fd9563ab"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTQ0OTQyNA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 *", "url": "https://github.com/wso2/product-microgateway/pull/1153#discussion_r395449424", "createdAt": "2020-03-20T05:55:05Z", "author": {"login": "praminda"}, "path": "components/micro-gateway-core/src/main/java/org/wso2/micro/gateway/core/callhome/Callhome.java", "diffHunk": "@@ -0,0 +1,62 @@\n+/*\n+ *  Copyright (c) 2019, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *  http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+\n+package org.wso2.micro.gateway.core.callhome;\n+\n+import org.wso2.callhome.CallHomeExecutor;\n+import org.wso2.callhome.utils.CallHomeInfo;\n+import org.wso2.callhome.utils.Util;\n+import org.wso2.micro.gateway.core.Constants;\n+\n+/**\n+ * Invoke call home.\n+ *\n+ *\n+ */\n+public class Callhome {\n+\n+    /**\n+     * run call home.\n+     *", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "572276a234d4edb00fe970addddc2262fd9563ab"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTQ0OTcwMA==", "bodyText": "No need. It will be inherited\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        <version>${carbon.callhome.version}</version>", "url": "https://github.com/wso2/product-microgateway/pull/1153#discussion_r395449700", "createdAt": "2020-03-20T05:56:41Z", "author": {"login": "praminda"}, "path": "components/micro-gateway-core/pom.xml", "diffHunk": "@@ -120,6 +120,11 @@\n             <artifactId>jackson-databind</artifactId>\n             <scope>provided</scope>\n         </dependency>\n+        <dependency>\n+            <groupId>org.wso2.carbon.callhome</groupId>\n+            <artifactId>core</artifactId>\n+            <version>${carbon.callhome.version}</version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "572276a234d4edb00fe970addddc2262fd9563ab"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTQ0OTc0OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        <version>${carbon.callhome.version}</version>", "url": "https://github.com/wso2/product-microgateway/pull/1153#discussion_r395449749", "createdAt": "2020-03-20T05:57:01Z", "author": {"login": "praminda"}, "path": "distribution/pom.xml", "diffHunk": "@@ -101,6 +101,11 @@\n             <artifactId>jackson-annotations</artifactId>\n             <version>${jackson-core.version}</version>\n         </dependency>\n+        <dependency>\n+            <groupId>org.wso2.carbon.callhome</groupId>\n+            <artifactId>core</artifactId>\n+            <version>${carbon.callhome.version}</version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "572276a234d4edb00fe970addddc2262fd9563ab"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "712630be5339f2970f9768adc364b361e8b9b9bb", "author": {"user": {"login": "chashikajw", "name": "Chashika Weerathunga"}}, "url": "https://github.com/wso2/product-microgateway/commit/712630be5339f2970f9768adc364b361e8b9b9bb", "committedDate": "2020-03-20T06:07:53Z", "message": "Apply suggestions from code review\r\n\r\nfix format issues\n\nCo-Authored-By: Praminda <pramindabj@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4MjU1NjY1", "url": "https://github.com/wso2/product-microgateway/pull/1153#pullrequestreview-378255665", "createdAt": "2020-03-20T06:38:23Z", "commit": {"oid": "712630be5339f2970f9768adc364b361e8b9b9bb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5a9d6b457d3119089583754ff3065669094c01b8", "author": {"user": {"login": "praminda", "name": "Praminda"}}, "url": "https://github.com/wso2/product-microgateway/commit/5a9d6b457d3119089583754ff3065669094c01b8", "committedDate": "2020-03-20T06:38:39Z", "message": "Merge branch 'master' into add-callhome-feature"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTc0NDE0OTQy", "url": "https://github.com/wso2/product-microgateway/pull/1153#pullrequestreview-574414942", "createdAt": "2021-01-22T16:24:46Z", "commit": {"oid": "5a9d6b457d3119089583754ff3065669094c01b8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0yMlQxNjoyNDo0N1rOIYraIw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0yMlQxNjoyNDo0N1rOIYraIw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2Mjc0NzkzOQ==", "bodyText": "Shall we add the input params  of the method to the doc comment?", "url": "https://github.com/wso2/product-microgateway/pull/1153#discussion_r562747939", "createdAt": "2021-01-22T16:24:47Z", "author": {"login": "1akshitha"}, "path": "components/micro-gateway-core/src/main/java/org/wso2/micro/gateway/core/callhome/Callhome.java", "diffHunk": "@@ -0,0 +1,59 @@\n+/*\n+ *  Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *  http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+\n+package org.wso2.micro.gateway.core.callhome;\n+\n+import org.wso2.callhome.CallHomeExecutor;\n+import org.wso2.callhome.utils.CallHomeInfo;\n+import org.wso2.callhome.utils.Util;\n+import org.wso2.micro.gateway.core.Constants;\n+\n+/**\n+ * Invoke call home.\n+ */\n+public class Callhome {\n+\n+    /**\n+     * run call home.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5a9d6b457d3119089583754ff3065669094c01b8"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTc0NDE1MTI2", "url": "https://github.com/wso2/product-microgateway/pull/1153#pullrequestreview-574415126", "createdAt": "2021-01-22T16:24:59Z", "commit": {"oid": "5a9d6b457d3119089583754ff3065669094c01b8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0yMlQxNjoyNDo1OVrOIYrapg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0yMlQxNjoyNDo1OVrOIYrapg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2Mjc0ODA3MA==", "bodyText": "Shall we add the input params  of the method to the doc comment?", "url": "https://github.com/wso2/product-microgateway/pull/1153#discussion_r562748070", "createdAt": "2021-01-22T16:24:59Z", "author": {"login": "1akshitha"}, "path": "components/micro-gateway-core/src/main/java/org/wso2/micro/gateway/core/callhome/Callhome.java", "diffHunk": "@@ -0,0 +1,59 @@\n+/*\n+ *  Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *  http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+\n+package org.wso2.micro.gateway.core.callhome;\n+\n+import org.wso2.callhome.CallHomeExecutor;\n+import org.wso2.callhome.utils.CallHomeInfo;\n+import org.wso2.callhome.utils.Util;\n+import org.wso2.micro.gateway.core.Constants;\n+\n+/**\n+ * Invoke call home.\n+ */\n+public class Callhome {\n+\n+    /**\n+     * run call home.\n+     */\n+    public static void runCallHome(String trustStoreLocation, String trustStorePassword) {\n+        String productHome = getRuntimeHome();\n+\n+        CallHomeInfo callhomeinfo = Util.createCallHomeInfo(productHome, trustStoreLocation, trustStorePassword);\n+        CallHomeExecutor.execute(callhomeinfo);\n+    }\n+\n+    /**\n+     * Get runtime home location.\n+     *\n+     * @return runtime home location\n+     */\n+    private static String getRuntimeHome() {\n+        return System.getProperty(Constants.RUNTIME_HOME_PATH);\n+    }\n+\n+    /**\n+     * Get truststore location.\n+     *", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5a9d6b457d3119089583754ff3065669094c01b8"}, "originalPosition": 50}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1050, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}