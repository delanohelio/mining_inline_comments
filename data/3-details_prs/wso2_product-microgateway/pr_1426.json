{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk4OTU3MTg4", "number": 1426, "title": "Basic Deployment with docker-compose", "bodyText": "Purpose\nThe purpose here is to have an all connected setup to continue development.\nRemarks\nby running, build.sh the developers can have the three containers up and running. (This is for development purposes). If the java source code is changed, a new jar will be created from the maven command and will be mounted to the container running.\nThe go control plane is built and executed within the golang installed image, hence the size of the image is large.\nIf the developer needs to run just the go control plane, envoy.yaml file's IP address for the xds_cluster should be changed to his own IP. Then the pilot segment needs to be removed from the docker-compose file\nIf the user uses docker-compose-without-dependencies.yaml for docker-compose up command, the java filter chain is built inside a maven docker image and executed using maven:exec plugin.\nIssues\n\nFixes #\nAutomation tests\n\nUnit tests added: No\nIntegration tests added: No\n\nTested environments\n\nNot Tested\n\nMaintainers: Check before merge\n\n Assigned 'Type' label\n Assigned the project\n Validated respective github issues\n Assigned milestone to the github issue(s)", "createdAt": "2020-10-07T03:44:08Z", "url": "https://github.com/wso2/product-microgateway/pull/1426", "merged": true, "mergeCommit": {"oid": "3daaeee210a1540716e1df5847b0c76300fbb2c1"}, "closed": true, "closedAt": "2020-10-08T09:22:17Z", "author": {"login": "VirajSalaka"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdP9yTPgH2gAyNDk4OTU3MTg4OmMxNzdhYjJhMzNlZTUyNGZjNDY1NjQyYzE4Mjc1MzUzMjU2ZjhkYTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdQdSpJAH2gAyNDk4OTU3MTg4OmNkODcwMDQ3NzM4MzEwMzJlZGVlMWVmMjI4NDI4YjY2Y2FhZGVkYTU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c177ab2a33ee524fc465642c18275353256f8da1", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/c177ab2a33ee524fc465642c18275353256f8da1", "committedDate": "2020-10-06T19:45:15Z", "message": "basic docker deployment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ca9669766d7249573dda335959ee009f97c8d36", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/0ca9669766d7249573dda335959ee009f97c8d36", "committedDate": "2020-10-07T05:17:09Z", "message": "Introduce a build script so that the developer can quickly run the built shaded jar file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b12a6f40288d738cb0b9d1d451623e8a843bfc1c", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/b12a6f40288d738cb0b9d1d451623e8a843bfc1c", "committedDate": "2020-10-07T05:20:41Z", "message": "fix formatting issues"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzNTQ2MDc3", "url": "https://github.com/wso2/product-microgateway/pull/1426#pullrequestreview-503546077", "createdAt": "2020-10-07T05:59:07Z", "commit": {"oid": "b12a6f40288d738cb0b9d1d451623e8a843bfc1c"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QwNTo1OTowN1rOHdjqzA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QwNjowMjoyM1rOHdjvmw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDc1NTE0OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            CMD ./pilot\n          \n          \n            \n            CMD ./pilot", "url": "https://github.com/wso2/product-microgateway/pull/1426#discussion_r500755148", "createdAt": "2020-10-07T05:59:07Z", "author": {"login": "praminda"}, "path": "Dockerfile", "diffHunk": "@@ -0,0 +1,18 @@\n+FROM golang:1.13-alpine3.11\n+\n+ENV LANG=C.UTF-8\n+\n+ENV ENV=${USER_HOME}\"/.ashrc\"\n+\n+ENV APP_HOME /go/src/controlPlane\n+\n+RUN mkdir -p $APP_HOME\n+WORKDIR $APP_HOME\n+COPY . .\n+\n+RUN go mod download\n+RUN go mod verify\n+\n+RUN go build -o pilot\n+\n+CMD ./pilot", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b12a6f40288d738cb0b9d1d451623e8a843bfc1c"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDc1NjM3OQ==", "bodyText": "Can you switch the cluster name prop to line 25. it makes it easier to identify the cluster", "url": "https://github.com/wso2/product-microgateway/pull/1426#discussion_r500756379", "createdAt": "2020-10-07T06:02:23Z", "author": {"login": "praminda"}, "path": "envoy.yaml", "diffHunk": "@@ -43,3 +30,16 @@ static_resources:\n       http2_protocol_options: {}\n       name: xds_cluster", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b12a6f40288d738cb0b9d1d451623e8a843bfc1c"}, "originalPosition": 40}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c94aa5243b92584e30fbd7ecce4d067aa65b6f19", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/c94aa5243b92584e30fbd7ecce4d067aa65b6f19", "committedDate": "2020-10-07T10:43:47Z", "message": "bug fix: the public key is not fetched by the java filter chain"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "24b10cc3146df4c14d8f95a3bb06a117f12de793", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/24b10cc3146df4c14d8f95a3bb06a117f12de793", "committedDate": "2020-10-07T10:33:13Z", "message": "bug fix: the public key is not fetched by the java filter chain"}, "afterCommit": {"oid": "c94aa5243b92584e30fbd7ecce4d067aa65b6f19", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/c94aa5243b92584e30fbd7ecce4d067aa65b6f19", "committedDate": "2020-10-07T10:43:47Z", "message": "bug fix: the public key is not fetched by the java filter chain"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd87004773831032edee1ef228428b66caadeda5", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/cd87004773831032edee1ef228428b66caadeda5", "committedDate": "2020-10-08T08:27:38Z", "message": "refactor docker-compose files"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 975, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}