{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIwNzgzNjgz", "number": 1240, "title": "X-wso2-basepath support for Api definition", "bodyText": "Purpose\n\nAs $subject this will make the support of  x-wso2-basepath vendor extension.\nAs an example if x-wso2-basepath extension is included in the swagger, it will replace the default basepath of the Api.\ndefault basepath: /api/v3\nx-wso2-basepath: /petstore/v2\nresource: /pet/{petId}\nif x-wso2-basepath exist,\ncan be exposed using   http://localhost:10000/petstore/v2/pet/5\nif x-wso2-basepath doesn't exist,\ncan be exposed using  http://localhost:10000/api/v3/pet/5\nIssues\n Fixes #1241\nAutomation tests\n\nUnit tests added: Yes/No\nIntegration tests added: Yes/No\n\nTested environments\n\nNot Tested\n\nMaintainers: Check before merge\n\n Assigned 'Type' label\n Assigned the project\n Validated respective github issues\n Assigned milestone to the github issue(s)", "createdAt": "2020-05-20T14:20:35Z", "url": "https://github.com/wso2/product-microgateway/pull/1240", "merged": true, "mergeCommit": {"oid": "149d22075993097a4fb1a5dea344e1f82edda39b"}, "closed": true, "closedAt": "2020-05-28T08:48:25Z", "author": {"login": "chashikajw"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABci6ZDdAH2gAyNDIwNzgzNjgzOjI0Y2RjYjE1ZDEyMjcyOTdkYjJkZjFiNjlmODlmYzg1YjgwOThmYzc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABd00QYNgFqTU3OTAwMTI4MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "24cdcb15d1227297db2df1b69f89fc85b8098fc7", "author": {"user": {"login": "chashikajw", "name": "Chashika Weerathunga"}}, "url": "https://github.com/wso2/product-microgateway/commit/24cdcb15d1227297db2df1b69f89fc85b8098fc7", "committedDate": "2020-05-19T20:21:22Z", "message": "implement support of x-wso2-basepath"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e049a17a008110372bc950e7164224443d87c192", "author": {"user": {"login": "chashikajw", "name": "Chashika Weerathunga"}}, "url": "https://github.com/wso2/product-microgateway/commit/e049a17a008110372bc950e7164224443d87c192", "committedDate": "2020-05-20T08:03:44Z", "message": "fix bug x-wso2basepath path regex rewrite"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "47273acc1412bb5fa35485a8f9e2954da1222220", "author": {"user": {"login": "chashikajw", "name": "Chashika Weerathunga"}}, "url": "https://github.com/wso2/product-microgateway/commit/47273acc1412bb5fa35485a8f9e2954da1222220", "committedDate": "2020-05-20T13:49:17Z", "message": "add hostrewrite to avoid bad requests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1NDA3Mzk3", "url": "https://github.com/wso2/product-microgateway/pull/1240#pullrequestreview-415407397", "createdAt": "2020-05-20T14:40:17Z", "commit": {"oid": "47273acc1412bb5fa35485a8f9e2954da1222220"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxNDo0MDoxN1rOGYPKfA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxNDo0MTozM1rOGYPOVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODA2NzQ1Mg==", "bodyText": "Remove these empty lines", "url": "https://github.com/wso2/product-microgateway/pull/1240#discussion_r428067452", "createdAt": "2020-05-20T14:40:17Z", "author": {"login": "menakaj"}, "path": "internal/pkg/oasparser/models/apiDefinition/openApi.go", "diffHunk": "@@ -126,3 +126,5 @@ func IsServerUrlIsAvailable(swagger3 openapi3.Swagger) bool {\n \t}\n }\n \n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "47273acc1412bb5fa35485a8f9e2954da1222220"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODA2ODEwMQ==", "bodyText": "These should be taken from a configuration file.", "url": "https://github.com/wso2/product-microgateway/pull/1240#discussion_r428068101", "createdAt": "2020-05-20T14:41:08Z", "author": {"login": "menakaj"}, "path": "internal/pkg/oasparser/config/config.go", "diffHunk": "@@ -23,5 +23,5 @@ const (\n \tLISTENER_PORT     uint32 = 10000\n \tAPI_DEFAULT_PORT   uint32 = 8080\n \tMANAGER_STATPREFIX    string = \"ingress_http\"\n-\tCLUSTER_CONNECT_TIMEOUT    = 5 * time.Second\n+\tCLUSTER_CONNECT_TIMEOUT    = 20 * time.Second", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "47273acc1412bb5fa35485a8f9e2954da1222220"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODA2ODQzOA==", "bodyText": "Remove unnecessary lines. Fix in other places as well.", "url": "https://github.com/wso2/product-microgateway/pull/1240#discussion_r428068438", "createdAt": "2020-05-20T14:41:33Z", "author": {"login": "menakaj"}, "path": "internal/pkg/oasparser/configGenerator.go", "diffHunk": "@@ -51,20 +51,28 @@ func GetProductionSources(location string) ([]types.Resource, []types.Resource,\n \t\tendpointsP = append(endpointsP,endpoints...)\n \t}\n \n-\tvHost_NameP := \"serviceProd_\" + strings.Replace(mgwSwaggers[0].GetTitle(), \" \", \"\", -1) + mgwSwaggers[0].GetVersion()\n+\tenvoyNodeProd := new(envoy.EnvoyNode)\n \n-\tvHostP, _ := e.CreateVirtualHost(vHost_NameP, routesP)\n+\tif len(mgwSwaggers) > 0 {\n+\t\tvHost_NameP := \"serviceProd_\" + strings.Replace(mgwSwaggers[0].GetTitle(), \" \", \"\", -1) + mgwSwaggers[0].GetVersion()\n \n-\tlistenerNameP := \"listenerProd_1\"\n-\trouteConfigNameP := \"routeProd_\" + strings.Replace(mgwSwaggers[0].GetTitle(), \" \", \"\", -1) + mgwSwaggers[0].GetVersion()\n+\t\tvHostP, _ := e.CreateVirtualHost(vHost_NameP, routesP)\n \n-\tlistnerProd := e.CreateListener(listenerNameP, routeConfigNameP, vHostP)\n+\t\tlistenerNameP := \"listenerProd_1\"\n+\t\trouteConfigNameP := \"routeProd_\" + strings.Replace(mgwSwaggers[0].GetTitle(), \" \", \"\", -1) + mgwSwaggers[0].GetVersion()\n+\n+\t\tlistnerProd := e.CreateListener(listenerNameP, routeConfigNameP, vHostP)\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "47273acc1412bb5fa35485a8f9e2954da1222220"}, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e6ee1cd96a052633d185da4b33ffc9ce01772aa", "author": {"user": {"login": "chashikajw", "name": "Chashika Weerathunga"}}, "url": "https://github.com/wso2/product-microgateway/commit/7e6ee1cd96a052633d185da4b33ffc9ce01772aa", "committedDate": "2020-05-21T07:04:27Z", "message": "add project level config reader and set envoy configs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9e148ecf6679b50a0483070077bddb0f29b9c2f7", "author": {"user": {"login": "chashikajw", "name": "Chashika Weerathunga"}}, "url": "https://github.com/wso2/product-microgateway/commit/9e148ecf6679b50a0483070077bddb0f29b9c2f7", "committedDate": "2020-05-21T07:37:01Z", "message": "add new line at the end of files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c841c5f7cab1e026b3ae47085b5735a4e72ba4d", "author": {"user": {"login": "chashikajw", "name": "Chashika Weerathunga"}}, "url": "https://github.com/wso2/product-microgateway/commit/8c841c5f7cab1e026b3ae47085b5735a4e72ba4d", "committedDate": "2020-05-22T07:45:07Z", "message": "avoid conflicting path for paths which not have path parameters"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTc5MDAxMjgx", "url": "https://github.com/wso2/product-microgateway/pull/1240#pullrequestreview-579001281", "createdAt": "2021-01-29T07:34:15Z", "commit": {"oid": "8c841c5f7cab1e026b3ae47085b5735a4e72ba4d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0yOVQwNzozNDoxNVrOIcYOVQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0yOVQwNzozNDoxNVrOIcYOVQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NjYyNzkyNQ==", "bodyText": "Add the license header.", "url": "https://github.com/wso2/product-microgateway/pull/1240#discussion_r566627925", "createdAt": "2021-01-29T07:34:15Z", "author": {"login": "pubudu538"}, "path": "config/tomlConfigParser.go", "diffHunk": "@@ -0,0 +1,36 @@\n+package config", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c841c5f7cab1e026b3ae47085b5735a4e72ba4d"}, "originalPosition": 1}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1086, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}