{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA4ODg4NjA4", "number": 1214, "title": "Bug Fix : OpenAPI file generated for the proto file is not valid", "bodyText": "Purpose\nFixed the proto to openAPI mapping such that the outcome is a valid openAPI.\n\nAdded the missing responses object for the resource\nmake sure that the resource starts with \"/\".\n\nIssues\n\nFixes #1213\nAutomation tests\n\nUnit tests added: No\nIntegration tests added: No\n\nTested environments\n\nMacOS Mojave\n\nMaintainers: Check before merge\n\n Assigned 'Type' label\n Assigned the project\n Validated respective github issues\n Assigned milestone to the github issue(s)", "createdAt": "2020-04-25T10:45:06Z", "url": "https://github.com/wso2/product-microgateway/pull/1214", "merged": true, "mergeCommit": {"oid": "e65fd27ab11fdfef2a72b38f094082b75c40f74d"}, "closed": true, "closedAt": "2020-06-01T05:07:56Z", "author": {"login": "VirajSalaka"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABca0Hi0gH2gAyNDA4ODg4NjA4OjhlYzk4YjIyODAyNTc4NTlkZGQ2YmExYmE1ZjUyY2VmYjMwOTc5NjU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcm5HULgFqTQyMTU5NTE4NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8ec98b2280257859ddd6ba1ba5f52cefb3097965", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/8ec98b2280257859ddd6ba1ba5f52cefb3097965", "committedDate": "2020-04-24T16:31:25Z", "message": "bug fix in protobuf-openAPI generation - add responses object to resources"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b63a2a27efbfc6aab9e293cbedcb93ab605abce", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/7b63a2a27efbfc6aab9e293cbedcb93ab605abce", "committedDate": "2020-04-24T16:32:46Z", "message": "Merge branch 'master' into grpc-openapi-fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e8c1877c218814f7c0177ead2adb9e11c3912a12", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/e8c1877c218814f7c0177ead2adb9e11c3912a12", "committedDate": "2020-04-27T18:48:46Z", "message": "Merge branch 'master' into grpc-openapi-fix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEwNzk1NDA5", "url": "https://github.com/wso2/product-microgateway/pull/1214#pullrequestreview-410795409", "createdAt": "2020-05-13T10:31:48Z", "commit": {"oid": "e8c1877c218814f7c0177ead2adb9e11c3912a12"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxMDozMTo0OFrOGUrezg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxMDozMTo0OFrOGUrezg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDMzNzEwMg==", "bodyText": "Lets use constants", "url": "https://github.com/wso2/product-microgateway/pull/1214#discussion_r424337102", "createdAt": "2020-05-13T10:31:48Z", "author": {"login": "Rajith90"}, "path": "components/micro-gateway-cli/src/main/java/org/wso2/apimgt/gateway/cli/protobuf/ProtoOpenAPI.java", "diffHunk": "@@ -104,7 +106,14 @@ void addOpenAPIPath(String path, String[] scopes, String throttlingTier) {\n         if (openAPI.getPaths() == null) {\n             openAPI.setPaths(new Paths());\n         }\n-        openAPI.getPaths().addPathItem(path, pathItem);\n+        //as Responses object is mandatory\n+        ApiResponse apiResponse = new ApiResponse();\n+        apiResponse.setDescription(\"gRPC response\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e8c1877c218814f7c0177ead2adb9e11c3912a12"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEwNzk1NTkz", "url": "https://github.com/wso2/product-microgateway/pull/1214#pullrequestreview-410795593", "createdAt": "2020-05-13T10:32:06Z", "commit": {"oid": "e8c1877c218814f7c0177ead2adb9e11c3912a12"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxMDozMjowNlrOGUrfZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxMDozMjowNlrOGUrfZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDMzNzI1NA==", "bodyText": "Lets use http constant status codes", "url": "https://github.com/wso2/product-microgateway/pull/1214#discussion_r424337254", "createdAt": "2020-05-13T10:32:06Z", "author": {"login": "Rajith90"}, "path": "components/micro-gateway-cli/src/main/java/org/wso2/apimgt/gateway/cli/protobuf/ProtoOpenAPI.java", "diffHunk": "@@ -104,7 +106,14 @@ void addOpenAPIPath(String path, String[] scopes, String throttlingTier) {\n         if (openAPI.getPaths() == null) {\n             openAPI.setPaths(new Paths());\n         }\n-        openAPI.getPaths().addPathItem(path, pathItem);\n+        //as Responses object is mandatory\n+        ApiResponse apiResponse = new ApiResponse();\n+        apiResponse.setDescription(\"gRPC response\");\n+        ApiResponses apiResponses = new ApiResponses();\n+        apiResponses.addApiResponse(\"200\", apiResponse);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e8c1877c218814f7c0177ead2adb9e11c3912a12"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEwNzk1Njg0", "url": "https://github.com/wso2/product-microgateway/pull/1214#pullrequestreview-410795684", "createdAt": "2020-05-13T10:32:14Z", "commit": {"oid": "e8c1877c218814f7c0177ead2adb9e11c3912a12"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxMDozMjoxNFrOGUrfpw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxMDozMjoxNFrOGUrfpw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDMzNzMxOQ==", "bodyText": "Lets use constants", "url": "https://github.com/wso2/product-microgateway/pull/1214#discussion_r424337319", "createdAt": "2020-05-13T10:32:14Z", "author": {"login": "Rajith90"}, "path": "components/micro-gateway-cli/src/main/java/org/wso2/apimgt/gateway/cli/protobuf/ProtoOpenAPI.java", "diffHunk": "@@ -104,7 +106,14 @@ void addOpenAPIPath(String path, String[] scopes, String throttlingTier) {\n         if (openAPI.getPaths() == null) {\n             openAPI.setPaths(new Paths());\n         }\n-        openAPI.getPaths().addPathItem(path, pathItem);\n+        //as Responses object is mandatory\n+        ApiResponse apiResponse = new ApiResponse();\n+        apiResponse.setDescription(\"gRPC response\");\n+        ApiResponses apiResponses = new ApiResponses();\n+        apiResponses.addApiResponse(\"200\", apiResponse);\n+        operation.setResponses(apiResponses);\n+        //append forward slash to preserve openAPI syntax\n+        openAPI.getPaths().addPathItem(\"/\" + path, pathItem);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e8c1877c218814f7c0177ead2adb9e11c3912a12"}, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "abc899d72f6c15dc0996fa057fe99cc26ffb10af", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/abc899d72f6c15dc0996fa057fe99cc26ffb10af", "committedDate": "2020-05-29T19:40:14Z", "message": "provide constants for the values required while converting proto to openAPI"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e70ab11581f6e9def683b945c29635c27c8769f1", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/e70ab11581f6e9def683b945c29635c27c8769f1", "committedDate": "2020-05-29T19:42:48Z", "message": "Merge branch 'master' into grpc-openapi-fix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxNTkxNDUw", "url": "https://github.com/wso2/product-microgateway/pull/1214#pullrequestreview-421591450", "createdAt": "2020-06-01T04:51:55Z", "commit": {"oid": "e70ab11581f6e9def683b945c29635c27c8769f1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQwNDo1MTo1NVrOGc-rhQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQwNDo1MTo1NVrOGc-rhQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzA0MDI2MQ==", "bodyText": "Wrong license year", "url": "https://github.com/wso2/product-microgateway/pull/1214#discussion_r433040261", "createdAt": "2020-06-01T04:51:55Z", "author": {"login": "Rajith90"}, "path": "components/micro-gateway-cli/src/main/java/org/wso2/apimgt/gateway/cli/constants/ProtoToOpenAPIConstants.java", "diffHunk": "@@ -0,0 +1,27 @@\n+/*\n+ * Copyright (c) 2018, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e70ab11581f6e9def683b945c29635c27c8769f1"}, "originalPosition": 2}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "22f9e104d7bcd0e0652a2a82c725ff449820527f", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/22f9e104d7bcd0e0652a2a82c725ff449820527f", "committedDate": "2020-06-01T05:02:17Z", "message": "update license header"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxNTk1MTg1", "url": "https://github.com/wso2/product-microgateway/pull/1214#pullrequestreview-421595185", "createdAt": "2020-06-01T05:07:47Z", "commit": {"oid": "22f9e104d7bcd0e0652a2a82c725ff449820527f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1073, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}