{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYyNzAwNDY2", "number": 1367, "title": "Fix JWT revocation not working with APIM 3.1.0", "bodyText": "Purpose\nThis PR fixes multiple issues.\n\nJWT revocation does not work with APIM 3.1.0 due to the below reasons.\n\n\nPayload parameters are different\nJMS payloads are different\nThis PR fixes this issue and enables to use JWT revocation with APIM 3.1.0 and MGW 3.2.0\n\n\nJWT generation fails due to path issues in Windows.\n\nIssues\nFixes #1364\nFixes #1369\nAutomation tests\nUnit tests added: Yes/No\nIntegration tests added: Yes/No\nTested environments\nNot Tested\n\nMaintainers: Check before merge\n\n Assigned 'Type' label\n Assigned the project\n Validated respective github issues\n Assigned milestone to the github issue(s)", "createdAt": "2020-08-04T11:17:43Z", "url": "https://github.com/wso2/product-microgateway/pull/1367", "merged": true, "mergeCommit": {"oid": "87d35bdd7d63c4eb9a15b83223710fe4d1b9c463"}, "closed": true, "closedAt": "2020-08-07T06:54:31Z", "author": {"login": "menakaj"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc7kuDfAH2gAyNDYyNzAwNDY2OjliNWNiMzg5Zjg1OGZhM2FiN2VhMjFlOTIyMjYyYzBkZDE2NWQxYzE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc8eCKRgFqTQ2MzA1MzMzOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9b5cb389f858fa3ab7ea21e922262c0dd165d1c1", "author": {"user": {"login": "menakaj", "name": "Menaka Jayawardena"}}, "url": "https://github.com/wso2/product-microgateway/commit/9b5cb389f858fa3ab7ea21e922262c0dd165d1c1", "committedDate": "2020-08-04T11:14:30Z", "message": "Fix not persisting APIM 3.1.0 jwt revocation data.\n\n* Add checks for the revoked jwt payload parameters.\n* Remove blacklist word."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c44af62ec537efc56c9e3308aca77c2ddd8aefd", "author": {"user": {"login": "menakaj", "name": "Menaka Jayawardena"}}, "url": "https://github.com/wso2/product-microgateway/commit/8c44af62ec537efc56c9e3308aca77c2ddd8aefd", "committedDate": "2020-08-04T11:14:30Z", "message": "Add jwt signature to the revoked jwt map when using AM 3.1.0"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "86164e00bc1cb08dfda6c3cd8ccfa37432b5ad43", "author": {"user": {"login": "menakaj", "name": "Menaka Jayawardena"}}, "url": "https://github.com/wso2/product-microgateway/commit/86164e00bc1cb08dfda6c3cd8ccfa37432b5ad43", "committedDate": "2020-08-05T09:13:30Z", "message": "Fix windows path issues."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5c45aa4af4ac8ae12d56f4bf18ced7c4a7976bf2", "author": {"user": {"login": "menakaj", "name": "Menaka Jayawardena"}}, "url": "https://github.com/wso2/product-microgateway/commit/5c45aa4af4ac8ae12d56f4bf18ced7c4a7976bf2", "committedDate": "2020-08-05T12:32:02Z", "message": "Remove log with password."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ab343bb33d7538654a9a27941ea3c2865b8efb06", "author": {"user": {"login": "menakaj", "name": "Menaka Jayawardena"}}, "url": "https://github.com/wso2/product-microgateway/commit/ab343bb33d7538654a9a27941ea3c2865b8efb06", "committedDate": "2020-08-05T18:50:14Z", "message": "Fix typo in log"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e6315481193c52ad2d4959a330a2f35da24ccee6", "author": {"user": {"login": "menakaj", "name": "Menaka Jayawardena"}}, "url": "https://github.com/wso2/product-microgateway/commit/e6315481193c52ad2d4959a330a2f35da24ccee6", "committedDate": "2020-08-06T20:07:45Z", "message": "Simplify the signature or JTI check."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzMDMwMTMy", "url": "https://github.com/wso2/product-microgateway/pull/1367#pullrequestreview-463030132", "createdAt": "2020-08-07T04:43:08Z", "commit": {"oid": "9b4b47321d389e0af39b77824bef46a902d496e2"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QwNDo0MzowOFrOG9MRcw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QwNDo0NjowMVrOG9MUEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjgxNzM5NQ==", "bodyText": "How about passing e to get the whole trace?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        throw new CLIInternalException(\"Exception occurred during codeGeneration process: \" + e.getMessage());\n          \n          \n            \n                        throw new CLIInternalException(\"Exception occurred during codeGeneration process\", e);", "url": "https://github.com/wso2/product-microgateway/pull/1367#discussion_r466817395", "createdAt": "2020-08-07T04:43:08Z", "author": {"login": "praminda"}, "path": "components/micro-gateway-cli/src/main/java/org/wso2/apimgt/gateway/cli/cmd/ImportCmd.java", "diffHunk": "@@ -280,7 +280,7 @@ public void execute() {\n             CmdUtils.saveSwaggerDefinitionForMultipleAPIs(projectName, apis,\n                     !restVersion.startsWith(CliConstants.REST_API_V1_PREFIX));\n         } catch (Exception e) {\n-            throw new CLIInternalException(\"Exception occurred during codeGeneration process\");\n+            throw new CLIInternalException(\"Exception occurred during codeGeneration process: \" + e.getMessage());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b4b47321d389e0af39b77824bef46a902d496e2"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjgxODA2Ng==", "bodyText": "Since we go with enable prefix for other configs, shall we rename this config to something like enableLegacyMode?", "url": "https://github.com/wso2/product-microgateway/pull/1367#discussion_r466818066", "createdAt": "2020-08-07T04:46:01Z", "author": {"login": "praminda"}, "path": "distribution/resources/conf/default-micro-gw.conf.template", "diffHunk": "@@ -52,6 +52,8 @@\n   serverUrl = \"https://localhost:9443\"\n   # The token endpoint context of the Key Manager server\n   tokenContext = \"oauth2\"\n+  # When Microgateway is used with older APIM versions for subscription validation by using KeyValidation service.\n+  isLegacyKM = false", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b4b47321d389e0af39b77824bef46a902d496e2"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b060e82cc52f939a7e8b293782bdbe122e717ace", "author": {"user": {"login": "menakaj", "name": "Menaka Jayawardena"}}, "url": "https://github.com/wso2/product-microgateway/commit/b060e82cc52f939a7e8b293782bdbe122e717ace", "committedDate": "2020-08-07T04:57:56Z", "message": "Change import api error message."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9b4b47321d389e0af39b77824bef46a902d496e2", "author": {"user": {"login": "menakaj", "name": "Menaka Jayawardena"}}, "url": "https://github.com/wso2/product-microgateway/commit/9b4b47321d389e0af39b77824bef46a902d496e2", "committedDate": "2020-08-06T21:25:20Z", "message": "Change import api error message."}, "afterCommit": {"oid": "b060e82cc52f939a7e8b293782bdbe122e717ace", "author": {"user": {"login": "menakaj", "name": "Menaka Jayawardena"}}, "url": "https://github.com/wso2/product-microgateway/commit/b060e82cc52f939a7e8b293782bdbe122e717ace", "committedDate": "2020-08-07T04:57:56Z", "message": "Change import api error message."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80cbf0b11e480e6265364ed2b0d0907326d8ca5f", "author": {"user": {"login": "menakaj", "name": "Menaka Jayawardena"}}, "url": "https://github.com/wso2/product-microgateway/commit/80cbf0b11e480e6265364ed2b0d0907326d8ca5f", "committedDate": "2020-08-07T05:51:45Z", "message": "Pass original exception to the CLIInternalException.\n\nCo-authored-by: Praminda <pramindabj@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzMDUzMzM5", "url": "https://github.com/wso2/product-microgateway/pull/1367#pullrequestreview-463053339", "createdAt": "2020-08-07T06:01:03Z", "commit": {"oid": "80cbf0b11e480e6265364ed2b0d0907326d8ca5f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 943, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}