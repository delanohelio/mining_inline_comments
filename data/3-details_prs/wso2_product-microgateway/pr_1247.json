{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIxODUyMzMy", "number": 1247, "title": "Support event publishing to multiple Traffic Managers", "bodyText": "Purpose\nIn the global throttling scenario, users may need to publish events to multiple traffic managers.\nFrom this implementation, the users can configure the microgateway to have multiple traffic manager endpoints. Inside the microgateway, it will create a binary connection to those traffic managers and publish the throttle events.\nIssues\n\nFixes #1246\nAutomation tests\n\nUnit tests added: No\nIntegration tests added: No\n\nTested environments\n\nMacOS Mojave\nRemarks\nDefault behavior would not change. If the user needs to switch from the default HTTP event publishing to binary publisher, the configuration should be provided.\n[throttlingConfig]\n  enabledGlobalTMEventPublishing = true\n  [throttlingConfig.binary]\n    enabled = true\n\n\nMaintainers: Check before merge\n\n Assigned 'Type' label\n Assigned the project\n Validated respective github issues\n Assigned milestone to the github issue(s)", "createdAt": "2020-05-22T10:50:58Z", "url": "https://github.com/wso2/product-microgateway/pull/1247", "merged": true, "mergeCommit": {"oid": "f130230396ea204a1f28acfc4eb00ffa4d0bfec4"}, "closed": true, "closedAt": "2020-06-09T03:46:25Z", "author": {"login": "VirajSalaka"}, "timelineItems": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcjvAiAgH2gAyNDIxODUyMzMyOjBkMTg4YTJlNmNhOWViY2QwZTM4ZDI3Y2M2OTVhOGM3ZjVlZGYzODI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcpcu33gFqTQyNjc2ODg3Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0d188a2e6ca9ebcd0e38d27cc695a8c7f5edf382", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/0d188a2e6ca9ebcd0e38d27cc695a8c7f5edf382", "committedDate": "2020-05-22T09:39:33Z", "message": "provide multiple TM support for microgateway"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5bcd8ed7c76ae69e38e96feb6c606f69396ceef4", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/5bcd8ed7c76ae69e38e96feb6c606f69396ceef4", "committedDate": "2020-05-22T11:45:41Z", "message": "add missing debug log"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d767b56717213024d8569e24f1b6d97eee55f75b", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/d767b56717213024d8569e24f1b6d97eee55f75b", "committedDate": "2020-05-24T19:58:23Z", "message": "add comments to the default configurations file for traffic manager publisher related configurations"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e3809d17d3f81893a05b6f3c8f66addb161e4127", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/e3809d17d3f81893a05b6f3c8f66addb161e4127", "committedDate": "2020-05-22T17:20:33Z", "message": "add comments to the default configurations file for traffic manager publisher related configurations"}, "afterCommit": {"oid": "d767b56717213024d8569e24f1b6d97eee55f75b", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/d767b56717213024d8569e24f1b6d97eee55f75b", "committedDate": "2020-05-24T19:58:23Z", "message": "add comments to the default configurations file for traffic manager publisher related configurations"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63fcc1bb27acb09c302c31030e89436f20d15bf6", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/63fcc1bb27acb09c302c31030e89436f20d15bf6", "committedDate": "2020-05-26T16:37:35Z", "message": "temp-commit todos"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5493f89668ad777c8360573c226214f953c7be6e", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/5493f89668ad777c8360573c226214f953c7be6e", "committedDate": "2020-05-31T04:59:25Z", "message": "Change TM Binary config stucture to support loadbalance and failover configurations"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "084ef1952cce81d66a3462381f38f92e08d7ba5d", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/084ef1952cce81d66a3462381f38f92e08d7ba5d", "committedDate": "2020-05-30T20:19:46Z", "message": "Change TM Binary config stucture to support loadbalance and failover configurations"}, "afterCommit": {"oid": "5493f89668ad777c8360573c226214f953c7be6e", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/5493f89668ad777c8360573c226214f953c7be6e", "committedDate": "2020-05-31T04:59:25Z", "message": "Change TM Binary config stucture to support loadbalance and failover configurations"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5d1a6bbefe83710936c89358fa6f3207476c4c40", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/5d1a6bbefe83710936c89358fa6f3207476c4c40", "committedDate": "2020-06-01T05:00:32Z", "message": "add ciphers and ssl protocols separately under tm binary agent configurations"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8409a96ada824b50425a9c08c6163d1f82c1e703", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/8409a96ada824b50425a9c08c6163d1f82c1e703", "committedDate": "2020-05-31T07:42:14Z", "message": "add ciphers and ssl protocols separately under tm binary agent configurations"}, "afterCommit": {"oid": "5d1a6bbefe83710936c89358fa6f3207476c4c40", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/5d1a6bbefe83710936c89358fa6f3207476c4c40", "committedDate": "2020-06-01T05:00:32Z", "message": "add ciphers and ssl protocols separately under tm binary agent configurations"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7efe6872b053a9583cb4d9519b066f94526a552c", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/7efe6872b053a9583cb4d9519b066f94526a552c", "committedDate": "2020-06-02T02:54:10Z", "message": "remove default values in native impl and use char array to save passwords"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "af92321535fa474b8e661b8284504d73bc3483b2", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/af92321535fa474b8e661b8284504d73bc3483b2", "committedDate": "2020-06-03T16:19:48Z", "message": "update micro-gw.conf with minimal configurations for the binary agent"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2ec1fe7a121f36f71c73dff79df1c4a59af06d81", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/2ec1fe7a121f36f71c73dff79df1c4a59af06d81", "committedDate": "2020-06-03T06:11:45Z", "message": "update micro-gw.conf with minimal configurations for the binary agent"}, "afterCommit": {"oid": "af92321535fa474b8e661b8284504d73bc3483b2", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/af92321535fa474b8e661b8284504d73bc3483b2", "committedDate": "2020-06-03T16:19:48Z", "message": "update micro-gw.conf with minimal configurations for the binary agent"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0MTA1NDQ1", "url": "https://github.com/wso2/product-microgateway/pull/1247#pullrequestreview-424105445", "createdAt": "2020-06-04T05:08:08Z", "commit": {"oid": "af92321535fa474b8e661b8284504d73bc3483b2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNTowODowOFrOGe1_eQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNTowODowOFrOGe1_eQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDk5NTA2NQ==", "bodyText": "if global throttling is initialized no need to have this pool", "url": "https://github.com/wso2/product-microgateway/pull/1247#discussion_r434995065", "createdAt": "2020-06-04T05:08:08Z", "author": {"login": "VirajSalaka"}, "path": "components/micro-gateway-cli/src/main/resources/templates/main.mustache", "diffHunk": "@@ -25,6 +25,7 @@ public function main() {\n     addTokenServicesFilterAnnotation();\n     initThrottlePolicies();\n     gateway:initThrottleDataPublisher();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af92321535fa474b8e661b8284504d73bc3483b2"}, "originalPosition": 3}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0MTA2NzU5", "url": "https://github.com/wso2/product-microgateway/pull/1247#pullrequestreview-424106759", "createdAt": "2020-06-04T05:12:14Z", "commit": {"oid": "af92321535fa474b8e661b8284504d73bc3483b2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNToxMjoxNFrOGe2Dfg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNToxMjoxNFrOGe2Dfg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDk5NjA5NA==", "bodyText": "set enable true by default", "url": "https://github.com/wso2/product-microgateway/pull/1247#discussion_r434996094", "createdAt": "2020-06-04T05:12:14Z", "author": {"login": "VirajSalaka"}, "path": "distribution/resources/conf/default-micro-gw.conf.template", "diffHunk": "@@ -246,6 +246,56 @@\n     password = \"admin\"\n \n \n+  # Throttling configurations related to event publishing using a binary connection\n+  [throttlingConfig.binary]\n+    enabled = false", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af92321535fa474b8e661b8284504d73bc3483b2"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d4c0bb4c60b4cbbe578d8951cae6c61d62a247a", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/6d4c0bb4c60b4cbbe578d8951cae6c61d62a247a", "committedDate": "2020-06-07T07:35:22Z", "message": "refactor code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e581f8e62ec9ee928854ad04481bccc81e5a380", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/2e581f8e62ec9ee928854ad04481bccc81e5a380", "committedDate": "2020-06-07T09:36:45Z", "message": "Merge branch 'master' into 6-multiple-tm"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6df0f90c6d610e334935708a7a2595ac95e60aac", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/6df0f90c6d610e334935708a7a2595ac95e60aac", "committedDate": "2020-06-07T09:46:13Z", "message": "set default tm publishing to binary"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "32fc8a1dd921b5c0ea4595cee85234a955c35558", "author": {"user": {"login": "VirajSalaka", "name": "Viraj Salaka"}}, "url": "https://github.com/wso2/product-microgateway/commit/32fc8a1dd921b5c0ea4595cee85234a955c35558", "committedDate": "2020-06-08T16:42:12Z", "message": "Merge branch 'master' into 6-multiple-tm"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2NzY4ODc3", "url": "https://github.com/wso2/product-microgateway/pull/1247#pullrequestreview-426768877", "createdAt": "2020-06-09T03:45:31Z", "commit": {"oid": "32fc8a1dd921b5c0ea4595cee85234a955c35558"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1093, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}