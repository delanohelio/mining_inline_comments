{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkwODY2Nzkw", "number": 1151, "title": "Fix #1148 #1149 - API level throttling issues in distributed setup", "bodyText": "Purpose\nThis fixes issue with distributed throttling and API level throttling when used with distributed setup.\nIssues\n\nFixes #1148\nFixes #1149\nFixes #1141\nFixes #1113\nAutomation tests\n\nUnit tests added: Yes/No\nIntegration tests added: Yes/No\n\nTested environments\n\nNot Tested\n\nMaintainers: Check before merge\n\n Assigned 'Type' label\n Assigned the project\n Validated respective github issues\n Assigned milestone to the github issue(s)", "createdAt": "2020-03-19T08:33:07Z", "url": "https://github.com/wso2/product-microgateway/pull/1151", "merged": true, "mergeCommit": {"oid": "afb9302049375091ee3fc872c8b0a1b03ddabf93"}, "closed": true, "closedAt": "2020-03-19T12:01:11Z", "author": {"login": "Rajith90"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcPHqRLgH2gAyMzkwODY2NzkwOmFmMGNmNDI1MDUyMGRhNjVhZGVlMzE3YTdmODM4NzA0N2U3NmIyZDg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcPKpZmgFqTM3NzY1MjQ4OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "af0cf4250520da65adee317a7f8387047e76b2d8", "author": {"user": {"login": "Rajith90", "name": "Rajith Roshan"}}, "url": "https://github.com/wso2/product-microgateway/commit/af0cf4250520da65adee317a7f8387047e76b2d8", "committedDate": "2020-03-19T08:30:27Z", "message": "Fix #1148 #1149 - API level throttling issues in distributed setup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d8bef1efe6d05baca4bcc49e7c5977603041dc22", "author": {"user": {"login": "Rajith90", "name": "Rajith Roshan"}}, "url": "https://github.com/wso2/product-microgateway/commit/d8bef1efe6d05baca4bcc49e7c5977603041dc22", "committedDate": "2020-03-19T10:33:21Z", "message": "Fix #1141 - Support basic auth with sha256 and above hashing"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3NjAwMjIz", "url": "https://github.com/wso2/product-microgateway/pull/1151#pullrequestreview-377600223", "createdAt": "2020-03-19T10:38:51Z", "commit": {"oid": "d8bef1efe6d05baca4bcc49e7c5977603041dc22"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxMDozODo1MVrOF4owjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxMDozODo1MVrOF4owjA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDkzMjM2NA==", "bodyText": "This doesn't look good. This makes the [DONE] printed in next line which is not professional at all IMO. Earlier we had few difficulties in printing this in one line but I fixed it recently in one of my PRs. If we need to print warn messages then the best option is to keep all messages in a list and print those after the build command execution, in the Main.java", "url": "https://github.com/wso2/product-microgateway/pull/1151#discussion_r394932364", "createdAt": "2020-03-19T10:38:51Z", "author": {"login": "praminda"}, "path": "components/micro-gateway-cli/src/main/java/org/wso2/apimgt/gateway/cli/cmd/BuildCmd.java", "diffHunk": "@@ -129,7 +129,7 @@ public void execute() {\n             }\n             String toolkitConfigPath = CmdUtils.getMainConfigLocation();\n             init(projectName, toolkitConfigPath, deploymentConfigPath);\n-            outStream.print(\"Generating sources...\");\n+            outStream.print(\"Generating sources... \\n\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d8bef1efe6d05baca4bcc49e7c5977603041dc22"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3NjAwODcz", "url": "https://github.com/wso2/product-microgateway/pull/1151#pullrequestreview-377600873", "createdAt": "2020-03-19T10:39:39Z", "commit": {"oid": "d8bef1efe6d05baca4bcc49e7c5977603041dc22"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxMDozOTo0MFrOF4oycw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxMDozOTo0MFrOF4oycw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDkzMjg1MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    - petstore_auth: []\n          \n          \n            \n                    - petstore_auth: []", "url": "https://github.com/wso2/product-microgateway/pull/1151#discussion_r394932851", "createdAt": "2020-03-19T10:39:40Z", "author": {"login": "praminda"}, "path": "tests/src/test/resources/openAPIs/throttling/throttle.yaml", "diffHunk": "@@ -0,0 +1,104 @@\n+openapi: 3.0.0\n+info:\n+  description: \"This is a sample server Petstore server.  You can find out more about\n+    Swagger at [http://swagger.io](http://swagger.io) or on [irc.freenode.net,\n+    #swagger](http://swagger.io/irc/).  For this sample, you can use the api key\n+    `special-key` to test the authorization filters.\"\n+  version: 2.0.0\n+  title: PetStoreAPI\n+  termsOfService: http://swagger.io/terms/\n+  contact:\n+    email: apiteam@swagger.io\n+  license:\n+    name: Apache 2.0\n+    url: http://www.apache.org/licenses/LICENSE-2.0.html\n+x-wso2-basePath: /petstore/v2\n+x-wso2-production-endpoints:\n+  urls:\n+    - https://localhost:2380/v2\n+security:\n+  - petstore_auth: []\n+x-wso2-sandbox-endpoints:\n+  urls:\n+    - https://localhost:2380/v2\n+tags:\n+  - name: pet\n+    description: Everything about your Pets\n+    externalDocs:\n+      description: Find out more\n+      url: http://swagger.io\n+  - name: store\n+    description: Access to Petstore orders\n+  - name: user\n+    description: Operations about user\n+    externalDocs:\n+      description: Find out more about our store\n+      url: http://swagger.io\n+paths:\n+  \"/store/order/{orderId}\":\n+    get:\n+      tags:\n+        - store\n+      summary: Find purchase order by ID\n+      description: For valid response try integer IDs with value >= 1 and <= 10. Other\n+        values will generated exceptions\n+      operationId: getOrderById\n+      x-wso2-throttling-tier: NonExistingPolicy\n+      parameters:\n+        - name: orderId\n+          in: path\n+          description: ID of pet that needs to be fetched\n+          required: true\n+          schema:\n+            type: integer\n+            format: int64\n+            minimum: 1\n+            maximum: 10\n+      responses:\n+        \"200\":\n+          description: successful operation\n+          content:\n+            application/xml:\n+              schema:\n+                $ref: \"#/components/schemas/Order\"\n+            application/json:\n+              schema:\n+                $ref: \"#/components/schemas/Order\"\n+        \"400\":\n+          description: Invalid ID supplied\n+        \"404\":\n+          description: Order not found\n+  \"/pet/{petId}\":\n+    get:\n+      tags:\n+        - pet\n+      summary: Find pet by ID\n+      description: Returns a single pet\n+      operationId: getPetById\n+      x-wso2-throttling-tier: 3PerMin\n+      parameters:\n+        - name: petId\n+          in: path\n+          description: ID of pet to return\n+          required: true\n+          schema:\n+            type: integer\n+            format: int64\n+      responses:\n+        \"200\":\n+          description: successful operation\n+          content:\n+            application/xml:\n+              schema:\n+                $ref: \"#/components/schemas/Pet\"\n+            application/json:\n+              schema:\n+                $ref: \"#/components/schemas/Pet\"\n+        \"400\":\n+          description: Invalid ID supplied\n+        \"404\":\n+          description: Pet not found\n+      security:\n+        - api_key: []\n+          api_key_query: []\n+        - petstore_auth: []", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d8bef1efe6d05baca4bcc49e7c5977603041dc22"}, "originalPosition": 104}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fcce40618bdf984faf4f89cc8c300f4fde51ff98", "author": {"user": {"login": "Rajith90", "name": "Rajith Roshan"}}, "url": "https://github.com/wso2/product-microgateway/commit/fcce40618bdf984faf4f89cc8c300f4fde51ff98", "committedDate": "2020-03-19T11:55:09Z", "message": "Fix #1113 - Allow x-wso2-basePath to be template with version"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3NjUyNDg5", "url": "https://github.com/wso2/product-microgateway/pull/1151#pullrequestreview-377652489", "createdAt": "2020-03-19T11:59:13Z", "commit": {"oid": "fcce40618bdf984faf4f89cc8c300f4fde51ff98"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1047, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}