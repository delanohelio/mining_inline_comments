{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkyNDcyMjg1", "number": 1168, "title": "Add java cacerst as the truststore for callhome in the toolkit", "bodyText": "Purpose\n\n$Subject as this will add java cacerts as the trustStore for Callhome in the micro-gw toolkit\nIssues\n\nFixes #1167\nAutomation tests\n\nUnit tests added: Yes/No\nIntegration tests added: Yes/No\n\nTested environments\n\nNot Tested\n\nMaintainers: Check before merge\n\n Assigned 'Type' label\n Assigned the project\n Validated respective github issues\n Assigned milestone to the github issue(s)", "createdAt": "2020-03-23T15:54:56Z", "url": "https://github.com/wso2/product-microgateway/pull/1168", "merged": true, "mergeCommit": {"oid": "273e8271196f7b14b518cfe1a63376cc7985c5ea"}, "closed": true, "closedAt": "2020-03-24T11:31:11Z", "author": {"login": "chashikajw"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcQgF69AH2gAyMzkyNDcyMjg1OmVkZDgyOGQyOGI2MzRjZjc5OTQ2NWMzM2ZmOWEzZTBkYmJjMjNmZGY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABd2HJ_yAFqTU4MTA3NTIxOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "edd828d28b634cf799465c33ff9a3e0dbbc23fdf", "author": {"user": {"login": "chashikajw", "name": "Chashika Weerathunga"}}, "url": "https://github.com/wso2/product-microgateway/commit/edd828d28b634cf799465c33ff9a3e0dbbc23fdf", "committedDate": "2020-03-23T15:32:18Z", "message": "add java cacerst as truststore for callhome in toolkit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0129a4558d0a71d8b64322614e5bf6a0260da659", "author": {"user": {"login": "chashikajw", "name": "Chashika Weerathunga"}}, "url": "https://github.com/wso2/product-microgateway/commit/0129a4558d0a71d8b64322614e5bf6a0260da659", "committedDate": "2020-03-23T16:01:43Z", "message": "correct the mistake replacement"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9e6bd2145fe3338b66a5199d6ada2c36a3a5ce08", "author": {"user": {"login": "chashikajw", "name": "Chashika Weerathunga"}}, "url": "https://github.com/wso2/product-microgateway/commit/9e6bd2145fe3338b66a5199d6ada2c36a3a5ce08", "committedDate": "2020-03-23T20:18:58Z", "message": "add cacerts location in micro-gw.bat file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c27b29abc9bf74909c539450348019fb7abb892f", "author": {"user": {"login": "chashikajw", "name": "Chashika Weerathunga"}}, "url": "https://github.com/wso2/product-microgateway/commit/c27b29abc9bf74909c539450348019fb7abb892f", "committedDate": "2020-03-24T10:16:00Z", "message": "allow to set cacerts password as environment variable"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c1115e503252815daf79bd364c739c9837a3e65a", "author": {"user": {"login": "chashikajw", "name": "Chashika Weerathunga"}}, "url": "https://github.com/wso2/product-microgateway/commit/c1115e503252815daf79bd364c739c9837a3e65a", "committedDate": "2020-03-24T10:23:16Z", "message": "chnage password variable name"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5NjEyNTQ5", "url": "https://github.com/wso2/product-microgateway/pull/1168#pullrequestreview-379612549", "createdAt": "2020-03-23T16:41:25Z", "commit": {"oid": "0129a4558d0a71d8b64322614e5bf6a0260da659"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxNjo0MToyNlrOF6OKaA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQxMDo0MzowMFrOF6qZoA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjU5Mzc2OA==", "bodyText": "Please exclude this change from the commit since we are getting ready for RC release which shouldn't contain snapshot part.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            3.1.0-beta2-SNAPSHOT\n          \n          \n            \n            3.1.0", "url": "https://github.com/wso2/product-microgateway/pull/1168#discussion_r396593768", "createdAt": "2020-03-23T16:41:26Z", "author": {"login": "praminda"}, "path": "distribution/resources/version.txt", "diffHunk": "@@ -1 +1 @@\n-3.1.0\n\\ No newline at end of file\n+3.1.0-beta2-SNAPSHOT", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0129a4558d0a71d8b64322614e5bf6a0260da659"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzA1MjUxMg==", "bodyText": "When adding java docs, make sure to add a full stop at the end of first sentence. This is validated by checkstyle.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * Get cacerts location\n          \n          \n            \n                 * Get cacerts location.", "url": "https://github.com/wso2/product-microgateway/pull/1168#discussion_r397052512", "createdAt": "2020-03-24T10:36:13Z", "author": {"login": "praminda"}, "path": "components/micro-gateway-cli/src/main/java/org/wso2/apimgt/gateway/cli/utils/CmdUtils.java", "diffHunk": "@@ -228,6 +228,32 @@ public static String getCLIHome() {\n         return System.getProperty(CliConstants.CLI_HOME);\n     }\n \n+    /**\n+     * Get cacerts location", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c1115e503252815daf79bd364c739c9837a3e65a"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzA1MjU2MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * Get cacerts password\n          \n          \n            \n                 * Get cacerts password.", "url": "https://github.com/wso2/product-microgateway/pull/1168#discussion_r397052561", "createdAt": "2020-03-24T10:36:19Z", "author": {"login": "praminda"}, "path": "components/micro-gateway-cli/src/main/java/org/wso2/apimgt/gateway/cli/utils/CmdUtils.java", "diffHunk": "@@ -228,6 +228,32 @@ public static String getCLIHome() {\n         return System.getProperty(CliConstants.CLI_HOME);\n     }\n \n+    /**\n+     * Get cacerts location\n+     *\n+     * @return cacerts location\n+     */\n+    public static String getCacertsLocation() {\n+        return System.getProperty(CliConstants.CACERTS_DIR);\n+    }\n+\n+    /**\n+     * Get cacerts password", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c1115e503252815daf79bd364c739c9837a3e65a"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzA1NDQ4Mw==", "bodyText": "Drop this change since we are getting ready for 3.1.0-rc\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                path = \"../../../target/org.wso2.micro.gateway.core-3.1.0-beta2-SNAPSHOT.jar\"\n          \n          \n            \n                path = \"../../../target/org.wso2.micro.gateway.core-3.1.0.jar\"", "url": "https://github.com/wso2/product-microgateway/pull/1168#discussion_r397054483", "createdAt": "2020-03-24T10:39:37Z", "author": {"login": "praminda"}, "path": "components/micro-gateway-core/src/main/ballerina/Ballerina.toml", "diffHunk": "@@ -6,7 +6,7 @@ version= \"3.1.0\"\n target = \"java8\"\n \n     [[platform.libraries]]\n-    path = \"../../../target/org.wso2.micro.gateway.core-3.1.0.jar\"\n+    path = \"../../../target/org.wso2.micro.gateway.core-3.1.0-beta2-SNAPSHOT.jar\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c1115e503252815daf79bd364c739c9837a3e65a"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzA1NjQxNg==", "bodyText": "Shall we make this logic one line?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if (password != null) {\n          \n          \n            \n                        cacertsPassword = password;\n          \n          \n            \n                    } else {\n          \n          \n            \n                        cacertsPassword = CliConstants.DEFAULT_CACERTS_PASS;\n          \n          \n            \n                    }\n          \n          \n            \n                    cacertsPassword = password != null ? password : CliConstants.DEFAULT_CACERTS_PASS;", "url": "https://github.com/wso2/product-microgateway/pull/1168#discussion_r397056416", "createdAt": "2020-03-24T10:43:00Z", "author": {"login": "praminda"}, "path": "components/micro-gateway-cli/src/main/java/org/wso2/apimgt/gateway/cli/utils/CmdUtils.java", "diffHunk": "@@ -228,6 +228,32 @@ public static String getCLIHome() {\n         return System.getProperty(CliConstants.CLI_HOME);\n     }\n \n+    /**\n+     * Get cacerts location\n+     *\n+     * @return cacerts location\n+     */\n+    public static String getCacertsLocation() {\n+        return System.getProperty(CliConstants.CACERTS_DIR);\n+    }\n+\n+    /**\n+     * Get cacerts password\n+     *\n+     * @return cacerts password\n+     */\n+    public static String getCacertsPassword() {\n+        String cacertsPassword = \"\";\n+        String password = System.getenv(\"CACERTS_PASS\");\n+\n+        if (password != null) {\n+            cacertsPassword = password;\n+        } else {\n+            cacertsPassword = CliConstants.DEFAULT_CACERTS_PASS;\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c1115e503252815daf79bd364c739c9837a3e65a"}, "originalPosition": 26}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "73f2a5e3652683ac049aa3f8c7fafa12bd7e5964", "author": {"user": {"login": "chashikajw", "name": "Chashika Weerathunga"}}, "url": "https://github.com/wso2/product-microgateway/commit/73f2a5e3652683ac049aa3f8c7fafa12bd7e5964", "committedDate": "2020-03-24T11:08:23Z", "message": "Apply suggestions from code review\r\n\r\nfix mistakes in the codeformat\n\nCo-Authored-By: Praminda <pramindabj@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgwMjE4ODkw", "url": "https://github.com/wso2/product-microgateway/pull/1168#pullrequestreview-380218890", "createdAt": "2020-03-24T11:27:15Z", "commit": {"oid": "73f2a5e3652683ac049aa3f8c7fafa12bd7e5964"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "86d7809d4db6b3f8891d1f6fd16ba5dfb3c906d2", "author": {"user": {"login": "praminda", "name": "Praminda"}}, "url": "https://github.com/wso2/product-microgateway/commit/86d7809d4db6b3f8891d1f6fd16ba5dfb3c906d2", "committedDate": "2020-03-24T11:27:23Z", "message": "Merge branch 'master' into callhome-bug-fix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTgxMDc1MjE4", "url": "https://github.com/wso2/product-microgateway/pull/1168#pullrequestreview-581075218", "createdAt": "2021-02-02T08:09:23Z", "commit": {"oid": "86d7809d4db6b3f8891d1f6fd16ba5dfb3c906d2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wMlQwODowOToyM1rOIeEK4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wMlQwODowOToyM1rOIeEK4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2ODM5NjUxMw==", "bodyText": "One of the newlines can be removed.", "url": "https://github.com/wso2/product-microgateway/pull/1168#discussion_r568396513", "createdAt": "2021-02-02T08:09:23Z", "author": {"login": "chathuranga95"}, "path": "components/micro-gateway-cli/src/main/java/org/wso2/apimgt/gateway/cli/cmd/BuildCmd.java", "diffHunk": "@@ -378,26 +363,6 @@ private void invokeCallHome() {\n         }\n     }\n \n-    /**\n-     * init configuration.\n-     *\n-     * @param configPath path of the configureation file.\n-     */\n-    private static void initConfig(String configPath) {\n-        try {\n-            Path configurationFile = Paths.get(configPath);\n-            if (Files.exists(configurationFile)) {\n-                Config config = TOMLConfigParser.parse(configPath, Config.class);\n-                CmdUtils.setConfig(config);\n-            } else {\n-                logger.error(\"Configuration: {} Not found.\", configPath);\n-                throw new CLIInternalException(\"Error occurred while loading configurations.\");\n-            }\n-        } catch (ConfigParserException e) {\n-            logger.error(\"Error occurred while parsing the configurations {}\", configPath, e);\n-            throw new CLIInternalException(\"Error occurred while loading configurations.\");\n-        }\n-    }\n ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "86d7809d4db6b3f8891d1f6fd16ba5dfb3c906d2"}, "originalPosition": 57}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1055, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}