{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgwNzUwMTAz", "number": 1047, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxNDoyNzowNlrODje_bw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxNDoyNzowNlrODje_bw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4NTM0NTExOnYy", "diffSide": "RIGHT", "path": "docker/Dockerfile", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxNDoyNzowNlrOFvUSsw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxNTowNzoyNFrOFvVMkw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTE1OTg1OQ==", "bodyText": "Is this key has a expiry time", "url": "https://github.com/wso2/product-microgateway/pull/1047#discussion_r385159859", "createdAt": "2020-02-27T14:27:06Z", "author": {"login": "Rajith90"}, "path": "docker/Dockerfile", "diffHunk": "@@ -41,47 +41,78 @@ ARG MOTD='printf \"\\n\\\n  This Docker container comprises of a WSO2 product, running with its latest GA release \\n\\\n  which is under the Apache License, Version 2.0. \\n\\\n  Read more about Apache License, Version 2.0 here @ http://www.apache.org/licenses/LICENSE-2.0.\\n\"'\n-ENV ENV=${USER_HOME}\"/.bashrc\"\n-\n-# create the non-root user and group and set MOTD login message\n-RUN \\\n-    groupadd -r -g ${USER_GROUP_ID} ${USER_GROUP} \\\n-    && useradd -m -r -u ${USER_ID} -d ${USER_HOME} -g ${USER_GROUP} ${USER} \\\n-    && echo ${MOTD} > \"${ENV}\"\n-\n-# To avoid warning message due to APIIUtils\n-ENV DEBCONF_NOWARNINGS yes\n-\n+ENV ENV=${USER_HOME}\"/.ashrc\"\n+\n+# GLIB based alpine image (alpine-glib) source is generously borrowed\n+# From https://github.com/Docker-Hub-frolvlad/docker-alpine-glibc\n+# Here we install GNU libc (aka glibc) and set C.UTF-8 locale as default.\n+RUN ALPINE_GLIBC_BASE_URL=\"https://github.com/sgerrand/alpine-pkg-glibc/releases/download\" && \\\n+    ALPINE_GLIBC_PACKAGE_VERSION=\"2.30-r0\" && \\\n+    ALPINE_GLIBC_BASE_PACKAGE_FILENAME=\"glibc-$ALPINE_GLIBC_PACKAGE_VERSION.apk\" && \\\n+    ALPINE_GLIBC_BIN_PACKAGE_FILENAME=\"glibc-bin-$ALPINE_GLIBC_PACKAGE_VERSION.apk\" && \\\n+    ALPINE_GLIBC_I18N_PACKAGE_FILENAME=\"glibc-i18n-$ALPINE_GLIBC_PACKAGE_VERSION.apk\" && \\\n+    apk add --no-cache --virtual=.build-dependencies wget ca-certificates && \\\n+    echo \\\n+        \"-----BEGIN PUBLIC KEY-----\\\n+        MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEApZ2u1KJKUu/fW4A25y9m\\\n+        y70AGEa/J3Wi5ibNVGNn1gT1r0VfgeWd0pUybS4UmcHdiNzxJPgoWQhV2SSW1JYu\\\n+        tOqKZF5QSN6X937PTUpNBjUvLtTQ1ve1fp39uf/lEXPpFpOPL88LKnDBgbh7wkCp\\\n+        m2KzLVGChf83MS0ShL6G9EQIAUxLm99VpgRjwqTQ/KfzGtpke1wqws4au0Ab4qPY\\\n+        KXvMLSPLUp7cfulWvhmZSegr5AdhNw5KNizPqCJT8ZrGvgHypXyiFvvAH5YRtSsc\\\n+        Zvo9GI2e2MaZyo9/lvb+LbLEJZKEQckqRj4P26gmASrZEPStwc+yqy1ShHLA0j6m\\\n+        1QIDAQAB\\\n+        -----END PUBLIC KEY-----\" | sed 's/   */\\n/g' > \"/etc/apk/keys/sgerrand.rsa.pub\" && \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34f0cb6ac3e21caf6b522170082422febd9d82ca"}, "originalPosition": 65}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTE3NDY3NQ==", "bodyText": "This is the public key for the glibc for alpine software repository. This might expire but that doesn't effect the released docker images. This is just a build time dependency for fetching the required glibc packages. After that there is no use of this cert. So if it expires we can update it to latest when we are building the latest image.", "url": "https://github.com/wso2/product-microgateway/pull/1047#discussion_r385174675", "createdAt": "2020-02-27T15:07:24Z", "author": {"login": "praminda"}, "path": "docker/Dockerfile", "diffHunk": "@@ -41,47 +41,78 @@ ARG MOTD='printf \"\\n\\\n  This Docker container comprises of a WSO2 product, running with its latest GA release \\n\\\n  which is under the Apache License, Version 2.0. \\n\\\n  Read more about Apache License, Version 2.0 here @ http://www.apache.org/licenses/LICENSE-2.0.\\n\"'\n-ENV ENV=${USER_HOME}\"/.bashrc\"\n-\n-# create the non-root user and group and set MOTD login message\n-RUN \\\n-    groupadd -r -g ${USER_GROUP_ID} ${USER_GROUP} \\\n-    && useradd -m -r -u ${USER_ID} -d ${USER_HOME} -g ${USER_GROUP} ${USER} \\\n-    && echo ${MOTD} > \"${ENV}\"\n-\n-# To avoid warning message due to APIIUtils\n-ENV DEBCONF_NOWARNINGS yes\n-\n+ENV ENV=${USER_HOME}\"/.ashrc\"\n+\n+# GLIB based alpine image (alpine-glib) source is generously borrowed\n+# From https://github.com/Docker-Hub-frolvlad/docker-alpine-glibc\n+# Here we install GNU libc (aka glibc) and set C.UTF-8 locale as default.\n+RUN ALPINE_GLIBC_BASE_URL=\"https://github.com/sgerrand/alpine-pkg-glibc/releases/download\" && \\\n+    ALPINE_GLIBC_PACKAGE_VERSION=\"2.30-r0\" && \\\n+    ALPINE_GLIBC_BASE_PACKAGE_FILENAME=\"glibc-$ALPINE_GLIBC_PACKAGE_VERSION.apk\" && \\\n+    ALPINE_GLIBC_BIN_PACKAGE_FILENAME=\"glibc-bin-$ALPINE_GLIBC_PACKAGE_VERSION.apk\" && \\\n+    ALPINE_GLIBC_I18N_PACKAGE_FILENAME=\"glibc-i18n-$ALPINE_GLIBC_PACKAGE_VERSION.apk\" && \\\n+    apk add --no-cache --virtual=.build-dependencies wget ca-certificates && \\\n+    echo \\\n+        \"-----BEGIN PUBLIC KEY-----\\\n+        MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEApZ2u1KJKUu/fW4A25y9m\\\n+        y70AGEa/J3Wi5ibNVGNn1gT1r0VfgeWd0pUybS4UmcHdiNzxJPgoWQhV2SSW1JYu\\\n+        tOqKZF5QSN6X937PTUpNBjUvLtTQ1ve1fp39uf/lEXPpFpOPL88LKnDBgbh7wkCp\\\n+        m2KzLVGChf83MS0ShL6G9EQIAUxLm99VpgRjwqTQ/KfzGtpke1wqws4au0Ab4qPY\\\n+        KXvMLSPLUp7cfulWvhmZSegr5AdhNw5KNizPqCJT8ZrGvgHypXyiFvvAH5YRtSsc\\\n+        Zvo9GI2e2MaZyo9/lvb+LbLEJZKEQckqRj4P26gmASrZEPStwc+yqy1ShHLA0j6m\\\n+        1QIDAQAB\\\n+        -----END PUBLIC KEY-----\" | sed 's/   */\\n/g' > \"/etc/apk/keys/sgerrand.rsa.pub\" && \\", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTE1OTg1OQ=="}, "originalCommit": {"oid": "34f0cb6ac3e21caf6b522170082422febd9d82ca"}, "originalPosition": 65}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1304, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}