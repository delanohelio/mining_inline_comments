{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc3NTMxNDQz", "number": 1014, "title": "Fixes mutual ssl and api key test", "bodyText": "Purpose\n\nIssues\n\nFixes ##1013\nFixes API Key test.\nRemove unnecessary debug log in analytics filter.\nFix Mutual SSL check in authorization filter to support AND combination in filters.\nAutomation tests\n\nUnit tests added: Yes/No\nIntegration tests added: Yes/No\n\nTested environments\n\nNot Tested\n\nMaintainers: Check before merge\n\n Assigned 'Type' label\n Assigned the project\n Validated respective github issues\n Assigned milestone to the github issue(s)", "createdAt": "2020-02-20T03:33:57Z", "url": "https://github.com/wso2/product-microgateway/pull/1014", "merged": true, "mergeCommit": {"oid": "7221e980ac9112c0840eadd1cf400dc634631416"}, "closed": true, "closedAt": "2020-02-20T06:00:28Z", "author": {"login": "AmaliMatharaarachchi"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcGEkKkgFqTM2MTY0NjQ0Mw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcGEtlHAFqTM2MTY0OTM3NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxNjQ2NDQz", "url": "https://github.com/wso2/product-microgateway/pull/1014#pullrequestreview-361646443", "createdAt": "2020-02-20T05:48:44Z", "commit": {"oid": "928dc4f181cc14f1f9da078c95984927035ccd64"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwNTo0ODo0NVrOFsF8vg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwNTo0ODo0NVrOFsF8vg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTc3OTEzNA==", "bodyText": "Lets remove this line. Since pre auth filter is doing this", "url": "https://github.com/wso2/product-microgateway/pull/1014#discussion_r381779134", "createdAt": "2020-02-20T05:48:45Z", "author": {"login": "Rajith90"}, "path": "components/micro-gateway-core/src/main/ballerina/src/gateway/filters/authz_filter.bal", "diffHunk": "@@ -34,33 +34,28 @@ public type OAuthzFilter object {\n             printDebug(KEY_AUTHZ_FILTER, \"Skip all filter annotation set in the service. Skip the filter\");\n             return true;\n         }\n-        string checkAuthentication = getConfigValue(MTSL_CONF_INSTANCE_ID, MTSL_CONF_SSLVERIFYCLIENT, DEFAULT_SSL_VERIFY_CLIENT);\n-        if (checkAuthentication != \"require\") {\n-            //Setting UUID\n-            int startingTime = getCurrentTime();\n-            checkOrSetMessageID(context);\n-            printDebug(KEY_AUTHZ_FILTER, \"Processing request via Authorization filter.\");\n-            runtime:AuthenticationContext? authContext = runtime:getInvocationContext()?.authenticationContext;\n-            boolean result = true;\n-            if (authContext is runtime:AuthenticationContext) {\n-                string? authScheme = authContext?.scheme;\n-                // scope validation is done in authn filter for oauth2, hence we only need to\n-                //validate scopes if auth scheme is jwt.\n-                if (authScheme is string && authScheme == AUTH_SCHEME_JWT) {\n-                    //Start a new child span for the span.\n-                    int | error | () balSpan = startSpan(BALLERINA_AUTHZ_FILTER);\n-                    result = self.authzFilter.filterRequest(caller, request, context);\n-                    //finishing span\n-                    finishSpan(BALLERINA_AUTHZ_FILTER, balSpan);\n-                }\n+        //Setting UUID\n+        int startingTime = getCurrentTime();\n+        checkOrSetMessageID(context);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "928dc4f181cc14f1f9da078c95984927035ccd64"}, "originalPosition": 25}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1cc30e3397886d01fdad3c1a82293d7ba5835ce3", "author": {"user": {"login": "AmaliMatharaarachchi", "name": "Amali Matharaarachchi"}}, "url": "https://github.com/wso2/product-microgateway/commit/1cc30e3397886d01fdad3c1a82293d7ba5835ce3", "committedDate": "2020-02-20T05:56:15Z", "message": "Fixes mutual ssl and api key test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "928dc4f181cc14f1f9da078c95984927035ccd64", "author": {"user": {"login": "AmaliMatharaarachchi", "name": "Amali Matharaarachchi"}}, "url": "https://github.com/wso2/product-microgateway/commit/928dc4f181cc14f1f9da078c95984927035ccd64", "committedDate": "2020-02-20T03:34:06Z", "message": "Merge branch 'master' into fix-alpha"}, "afterCommit": {"oid": "1cc30e3397886d01fdad3c1a82293d7ba5835ce3", "author": {"user": {"login": "AmaliMatharaarachchi", "name": "Amali Matharaarachchi"}}, "url": "https://github.com/wso2/product-microgateway/commit/1cc30e3397886d01fdad3c1a82293d7ba5835ce3", "committedDate": "2020-02-20T05:56:15Z", "message": "Fixes mutual ssl and api key test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxNjQ5MTQ2", "url": "https://github.com/wso2/product-microgateway/pull/1014#pullrequestreview-361649146", "createdAt": "2020-02-20T05:58:14Z", "commit": {"oid": "1cc30e3397886d01fdad3c1a82293d7ba5835ce3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxNjQ5Mzc1", "url": "https://github.com/wso2/product-microgateway/pull/1014#pullrequestreview-361649375", "createdAt": "2020-02-20T05:59:02Z", "commit": {"oid": "1cc30e3397886d01fdad3c1a82293d7ba5835ce3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1160, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}