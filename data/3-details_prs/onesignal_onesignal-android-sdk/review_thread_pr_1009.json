{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE0OTUxOTQ5", "number": 1009, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQxODowNDoxMFrOD6um-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQxODowOTozMlrOD6us6A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYyOTA3NjQwOnYy", "diffSide": "RIGHT", "path": "OneSignalSDK/onesignal/src/main/res/values/strings.xml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQxODowNDoxMFrOGSucIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQxODowNDoxMFrOGSucIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjI4ODQxOA==", "bodyText": "We just need the correct text for this and should be good to go!\nMaybe rename to location_not_available_open_settings_message?", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1009#discussion_r422288418", "createdAt": "2020-05-08T18:04:10Z", "author": {"login": "mikechoch"}, "path": "OneSignalSDK/onesignal/src/main/res/values/strings.xml", "diffHunk": "@@ -4,4 +4,6 @@\n     <string name=\"location_not_available_title\">Location Not Available</string>\n     <string name=\"location_not_available_message\">Looks like this app doesn\\'t have location permissions granted</string>\n \n+    <string name=\"location_not_available_open_settings\">We need location for user .....complete text</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bcac731294c1a8a4dc27d81cbfa3bb78a0a4ebb2"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYyOTA3OTY5OnYy", "diffSide": "RIGHT", "path": "OneSignalSDK/onesignal/src/main/res/values/strings.xml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQxODowNToyM1rOGSueZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQxODowNToyM1rOGSueZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjI4ODk5Nw==", "bodyText": "settings is a little unclear, maybe lets rename to\nlocation_not_available_open_settings_title?", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1009#discussion_r422288997", "createdAt": "2020-05-08T18:05:23Z", "author": {"login": "mikechoch"}, "path": "OneSignalSDK/onesignal/src/main/res/values/strings.xml", "diffHunk": "@@ -4,4 +4,6 @@\n     <string name=\"location_not_available_title\">Location Not Available</string>\n     <string name=\"location_not_available_message\">Looks like this app doesn\\'t have location permissions granted</string>\n \n+    <string name=\"location_not_available_open_settings\">We need location for user .....complete text</string>\n+    <string name=\"settings\">Settings</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bcac731294c1a8a4dc27d81cbfa3bb78a0a4ebb2"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYyOTA5MTYwOnYy", "diffSide": "RIGHT", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/PermissionsActivity.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQxODowOTozMlrOGSumLA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQxODowOTozMlrOGSumLA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjI5MDk4OA==", "bodyText": "Maybe we should move this if check into a separate method to clean up this long if-statement, something like below?\nif (shouldShowLocationPermissionSettings)\n    showLocationPermissionSettings();\n\nOR\nprivate void attemptToShowLocationPermissionSettings() {\n    if (fallbackToSettings \n            && neverAskAgainClicked \n            && !ActivityCompat.shouldShowRequestPermissionRationale(PermissionsActivity.this, LocationGMS.requestPermission))\n        showLocationPermissionSettings();\n}", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1009#discussion_r422290988", "createdAt": "2020-05-08T18:09:32Z", "author": {"login": "mikechoch"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/PermissionsActivity.java", "diffHunk": "@@ -104,10 +109,16 @@ public void onRequestPermissionsResult(final int requestCode, @NonNull String pe\n             public void run() {\n                boolean granted = grantResults.length > 0 && grantResults[0] == PackageManager.PERMISSION_GRANTED;\n                LocationGMS.sendAndClearPromptHandlers(true, granted);\n-               if (granted)\n+               if (granted) {\n                   LocationGMS.startGetLocation();\n-               else\n+               } else {\n+                  if (fallbackToSettings &&\n+                          neverAskAgainClicked &&\n+                          !ActivityCompat.shouldShowRequestPermissionRationale(PermissionsActivity.this, LocationGMS.requestPermission)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bcac731294c1a8a4dc27d81cbfa3bb78a0a4ebb2"}, "originalPosition": 45}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2242, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}