{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc4MjQ4NDU2", "number": 1132, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QwMDowMzozN1rOEfw1ZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QwMDowMzozN1rOEfw1ZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAxNzQxNDEyOnYy", "diffSide": "RIGHT", "path": "Examples/OneSignalDemo/app/src/main/java/com/onesignal/sdktest/model/MainActivityViewModel.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QwMDowMzozOFrOHMQFxg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QwMDoxNDo1MlrOHMQScw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjYwODU4Mg==", "bodyText": "Do lamdas not have their own scope so we can keep this isSubscribed?", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1132#discussion_r482608582", "createdAt": "2020-09-03T00:03:38Z", "author": {"login": "jkasten2"}, "path": "Examples/OneSignalDemo/app/src/main/java/com/onesignal/sdktest/model/MainActivityViewModel.java", "diffHunk": "@@ -468,123 +460,97 @@ public void setupSettingsLayout() {\n \n     private void setupSubscriptionSwitch() {\n         boolean isPermissionEnabled = OneSignal\n-                .getPermissionSubscriptionState()\n-                .getPermissionStatus()\n-                .getEnabled();\n+                .getPermissionSubscriptionState() != null &&\n+                OneSignal\n+                        .getPermissionSubscriptionState()\n+                        .getPermissionStatus()\n+                        .getEnabled();\n \n         final boolean isSubscribed = OneSignal\n-                .getPermissionSubscriptionState()\n-                .getSubscriptionStatus()\n-                .getSubscribed();\n+                .getPermissionSubscriptionState() != null &&\n+                OneSignal\n+                        .getPermissionSubscriptionState()\n+                        .getSubscriptionStatus()\n+                        .getSubscribed();\n \n         subscriptionSwitch.setEnabled(isPermissionEnabled);\n         subscriptionSwitch.setChecked(isSubscribed);\n \n         if (isPermissionEnabled) {\n-            subscriptionRelativeLayout.setOnClickListener(new View.OnClickListener() {\n-                @Override\n-                public void onClick(View v) {\n-                    boolean isSubscribed = subscriptionSwitch.isChecked();\n-                    subscriptionSwitch.setChecked(!isSubscribed);\n-                    OneSignal.setSubscription(!isSubscribed);\n-                }\n+            subscriptionRelativeLayout.setOnClickListener(v -> {\n+                boolean isSubscribed1 = subscriptionSwitch.isChecked();\n+                subscriptionSwitch.setChecked(!isSubscribed1);\n+                OneSignal.setSubscription(!isSubscribed1);\n             });\n         } else {\n-            subscriptionRelativeLayout.setOnClickListener(new View.OnClickListener() {\n-                @Override\n-                public void onClick(View v) {\n-                    intentTo.notificationPermissions();\n-                }\n-            });\n+            subscriptionRelativeLayout.setOnClickListener(v -> intentTo.notificationPermissions());\n         }\n \n-        subscriptionSwitch.setOnClickListener(new View.OnClickListener() {\n-            @Override\n-            public void onClick(View v) {\n-                boolean isSubscribed = subscriptionSwitch.isChecked();\n-                OneSignal.setSubscription(!isSubscribed);\n-            }\n+        subscriptionSwitch.setOnClickListener(v -> {\n+            boolean isSubscribed12 = subscriptionSwitch.isChecked();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bfd0a84289b5a239f3a683d939256c2fe502b041"}, "originalPosition": 173}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjYxMTgyNw==", "bodyText": "unfortunately, lambdas don't have custom scope :/", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1132#discussion_r482611827", "createdAt": "2020-09-03T00:14:52Z", "author": {"login": "Jeasmine"}, "path": "Examples/OneSignalDemo/app/src/main/java/com/onesignal/sdktest/model/MainActivityViewModel.java", "diffHunk": "@@ -468,123 +460,97 @@ public void setupSettingsLayout() {\n \n     private void setupSubscriptionSwitch() {\n         boolean isPermissionEnabled = OneSignal\n-                .getPermissionSubscriptionState()\n-                .getPermissionStatus()\n-                .getEnabled();\n+                .getPermissionSubscriptionState() != null &&\n+                OneSignal\n+                        .getPermissionSubscriptionState()\n+                        .getPermissionStatus()\n+                        .getEnabled();\n \n         final boolean isSubscribed = OneSignal\n-                .getPermissionSubscriptionState()\n-                .getSubscriptionStatus()\n-                .getSubscribed();\n+                .getPermissionSubscriptionState() != null &&\n+                OneSignal\n+                        .getPermissionSubscriptionState()\n+                        .getSubscriptionStatus()\n+                        .getSubscribed();\n \n         subscriptionSwitch.setEnabled(isPermissionEnabled);\n         subscriptionSwitch.setChecked(isSubscribed);\n \n         if (isPermissionEnabled) {\n-            subscriptionRelativeLayout.setOnClickListener(new View.OnClickListener() {\n-                @Override\n-                public void onClick(View v) {\n-                    boolean isSubscribed = subscriptionSwitch.isChecked();\n-                    subscriptionSwitch.setChecked(!isSubscribed);\n-                    OneSignal.setSubscription(!isSubscribed);\n-                }\n+            subscriptionRelativeLayout.setOnClickListener(v -> {\n+                boolean isSubscribed1 = subscriptionSwitch.isChecked();\n+                subscriptionSwitch.setChecked(!isSubscribed1);\n+                OneSignal.setSubscription(!isSubscribed1);\n             });\n         } else {\n-            subscriptionRelativeLayout.setOnClickListener(new View.OnClickListener() {\n-                @Override\n-                public void onClick(View v) {\n-                    intentTo.notificationPermissions();\n-                }\n-            });\n+            subscriptionRelativeLayout.setOnClickListener(v -> intentTo.notificationPermissions());\n         }\n \n-        subscriptionSwitch.setOnClickListener(new View.OnClickListener() {\n-            @Override\n-            public void onClick(View v) {\n-                boolean isSubscribed = subscriptionSwitch.isChecked();\n-                OneSignal.setSubscription(!isSubscribed);\n-            }\n+        subscriptionSwitch.setOnClickListener(v -> {\n+            boolean isSubscribed12 = subscriptionSwitch.isChecked();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjYwODU4Mg=="}, "originalCommit": {"oid": "bfd0a84289b5a239f3a683d939256c2fe502b041"}, "originalPosition": 173}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2118, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}