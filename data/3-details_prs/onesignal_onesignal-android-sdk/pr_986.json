{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAwNDc2NjU2", "number": 986, "title": "Remove dependencies from gradle", "bodyText": "Remove appcompat-v4 dependency\nChange from runtime to compileOnly appcompat-v7 dependency\nAdd log for when no location permissions added on Manifest\n\n\n\nThis change is\u2002", "createdAt": "2020-04-07T20:08:10Z", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/986", "merged": true, "mergeCommit": {"oid": "358fbc9aae16745e61d0d5ad75406454cc655da9"}, "closed": true, "closedAt": "2020-04-08T19:04:51Z", "author": {"login": "Jeasmine"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcVZE5YABqjMyMTE0NDYzNjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcVstXcAFqTM5MDI1MTQzMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f8749415ae681031ef0963869b0c751177ea24c3", "author": {"user": {"login": "Jeasmine", "name": "JNahui"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/f8749415ae681031ef0963869b0c751177ea24c3", "committedDate": "2020-04-07T20:06:07Z", "message": "Remove appcompat-v4 dependency\n\n  * Change from runtime to compileOnly appcompat-v7 dependency\n  * Add log for when no location permissions added on Manifest"}, "afterCommit": {"oid": "43ec23320f94540bcb1f51c547f5be6942670709", "author": {"user": {"login": "Jeasmine", "name": "JNahui"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/43ec23320f94540bcb1f51c547f5be6942670709", "committedDate": "2020-04-07T20:10:34Z", "message": "Remove dependencies from gradle\n\n   * Remove appcompat-v4 dependency\n   * Change from runtime to compileOnly appcompat-v7 dependency\n   * Add log for when no location permissions added on Manifest"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "43ec23320f94540bcb1f51c547f5be6942670709", "author": {"user": {"login": "Jeasmine", "name": "JNahui"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/43ec23320f94540bcb1f51c547f5be6942670709", "committedDate": "2020-04-07T20:10:34Z", "message": "Remove dependencies from gradle\n\n   * Remove appcompat-v4 dependency\n   * Change from runtime to compileOnly appcompat-v7 dependency\n   * Add log for when no location permissions added on Manifest"}, "afterCommit": {"oid": "ec8a93251ad717033763c6b71ca99f273e3c57b5", "author": {"user": {"login": "Jeasmine", "name": "JNahui"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/ec8a93251ad717033763c6b71ca99f273e3c57b5", "committedDate": "2020-04-07T20:51:59Z", "message": "Remove dependencies from gradle\n\n   * Remove appcompat-v4 dependency\n   * Change from runtime to compileOnly appcompat-v7 dependency\n   * Add log for when no location permissions added on Manifest"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5NDg4NTg0", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/986#pullrequestreview-389488584", "createdAt": "2020-04-07T21:03:34Z", "commit": {"oid": "ec8a93251ad717033763c6b71ca99f273e3c57b5"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QyMTowMzozNFrOGCWCcQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QyMTowMzozNFrOGCWCcQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTExMTQwOQ==", "bodyText": "This can be an info, as it it isn't an error if  they don't have that class in their app.", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/986#discussion_r405111409", "createdAt": "2020-04-07T21:03:34Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/OSSystemConditionController.java", "diffHunk": "@@ -30,9 +30,13 @@ boolean systemConditionsAvailable() {\n             return false;\n         }\n \n-        if (isDialogFragmentShowing(ActivityLifecycleHandler.curActivity)) {\n-            OneSignal.onesignalLog(OneSignal.LOG_LEVEL.WARN, \"OSSystemConditionObserver dialog fragment detected\");\n-            return false;\n+        try {\n+            if (isDialogFragmentShowing(ActivityLifecycleHandler.curActivity)) {\n+                OneSignal.onesignalLog(OneSignal.LOG_LEVEL.WARN, \"OSSystemConditionObserver dialog fragment detected\");\n+                return false;\n+            }\n+        } catch (NoClassDefFoundError exception) {\n+            OneSignal.onesignalLog(OneSignal.LOG_LEVEL.ERROR, \"isDialogFragmentShowing AppCompatActivity not imported either used: \" + exception);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ec8a93251ad717033763c6b71ca99f273e3c57b5"}, "originalPosition": 13}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ec8a93251ad717033763c6b71ca99f273e3c57b5", "author": {"user": {"login": "Jeasmine", "name": "JNahui"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/ec8a93251ad717033763c6b71ca99f273e3c57b5", "committedDate": "2020-04-07T20:51:59Z", "message": "Remove dependencies from gradle\n\n   * Remove appcompat-v4 dependency\n   * Change from runtime to compileOnly appcompat-v7 dependency\n   * Add log for when no location permissions added on Manifest"}, "afterCommit": {"oid": "e0146a0f91886ab51e90add9fb242b4f0a54be35", "author": {"user": {"login": "Jeasmine", "name": "JNahui"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/e0146a0f91886ab51e90add9fb242b4f0a54be35", "committedDate": "2020-04-07T21:05:43Z", "message": "Remove dependencies from gradle\n\n   * Remove appcompat-v4 dependency\n   * Change from runtime to compileOnly appcompat-v7 dependency\n   * Add log for when no location permissions added on Manifest"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5NDkwOTYx", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/986#pullrequestreview-389490961", "createdAt": "2020-04-07T21:07:12Z", "commit": {"oid": "e0146a0f91886ab51e90add9fb242b4f0a54be35"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5NTE3MzIw", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/986#pullrequestreview-389517320", "createdAt": "2020-04-07T21:52:54Z", "commit": {"oid": "e0146a0f91886ab51e90add9fb242b4f0a54be35"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QyMTo1Mjo1NFrOGCXhUg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QyMTo1NTo0N1rOGCXmbg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTEzNTY5OA==", "bodyText": "Even if we remove com.android.support:support-v4 from here it is still being included through other dependencies.\n+--- com.google.firebase:firebase-messaging:[10.2.1, 17.3.99] -> 17.3.4\n|    +--- com.google.android.gms:play-services-basement:16.0.1\n|    |    \\--- com.android.support:support-v4:26.1.0\n\nBy adding the following to your build.gradle you will observe errors in the OneSignal code base due to force removing this dependency.\nconfigurations.all {\n    exclude group: 'com.android.support', module: 'support-v4'\n}", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/986#discussion_r405135698", "createdAt": "2020-04-07T21:52:54Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/onesignal/build.gradle", "diffHunk": "@@ -61,9 +61,10 @@ dependencies {\n     // Also note, firebase & gms libraries use android.support:26.\n     //   - They never refer to 27 or 28\n     api 'com.android.support:cardview-v7:[26.0.0, 27.99.99]'\n-    api 'com.android.support:support-v4:[26.0.0, 27.99.99]'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e0146a0f91886ab51e90add9fb242b4f0a54be35"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTEzNjA3Mw==", "bodyText": "It looks like however we might be able to get away with  api 'com.android.support:support-fragment: instead if we want to switch to that. It seems to include everything we need.", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/986#discussion_r405136073", "createdAt": "2020-04-07T21:53:43Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/onesignal/build.gradle", "diffHunk": "@@ -61,9 +61,10 @@ dependencies {\n     // Also note, firebase & gms libraries use android.support:26.\n     //   - They never refer to 27 or 28\n     api 'com.android.support:cardview-v7:[26.0.0, 27.99.99]'\n-    api 'com.android.support:support-v4:[26.0.0, 27.99.99]'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTEzNTY5OA=="}, "originalCommit": {"oid": "e0146a0f91886ab51e90add9fb242b4f0a54be35"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTEzNzAwNg==", "bodyText": "One last note with dependencies, any OneSignal code that directly uses a library it should be top level in this file as the fundamentally matches up.", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/986#discussion_r405137006", "createdAt": "2020-04-07T21:55:47Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/onesignal/build.gradle", "diffHunk": "@@ -61,9 +61,10 @@ dependencies {\n     // Also note, firebase & gms libraries use android.support:26.\n     //   - They never refer to 27 or 28\n     api 'com.android.support:cardview-v7:[26.0.0, 27.99.99]'\n-    api 'com.android.support:support-v4:[26.0.0, 27.99.99]'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTEzNTY5OA=="}, "originalCommit": {"oid": "e0146a0f91886ab51e90add9fb242b4f0a54be35"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e0146a0f91886ab51e90add9fb242b4f0a54be35", "author": {"user": {"login": "Jeasmine", "name": "JNahui"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/e0146a0f91886ab51e90add9fb242b4f0a54be35", "committedDate": "2020-04-07T21:05:43Z", "message": "Remove dependencies from gradle\n\n   * Remove appcompat-v4 dependency\n   * Change from runtime to compileOnly appcompat-v7 dependency\n   * Add log for when no location permissions added on Manifest"}, "afterCommit": {"oid": "6ffcce4303dc309a793ae7d06f255c353134c0a3", "author": {"user": {"login": "Jeasmine", "name": "JNahui"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/6ffcce4303dc309a793ae7d06f255c353134c0a3", "committedDate": "2020-04-08T15:52:22Z", "message": "Remove dependencies from gradle\n\n   * Remove appcompat-v4 dependency\n   * Change from runtime to compileOnly appcompat-v7 dependency\n   * Add log for when no location permissions added on Manifest"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6ffcce4303dc309a793ae7d06f255c353134c0a3", "author": {"user": {"login": "Jeasmine", "name": "JNahui"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/6ffcce4303dc309a793ae7d06f255c353134c0a3", "committedDate": "2020-04-08T15:52:22Z", "message": "Remove dependencies from gradle\n\n   * Remove appcompat-v4 dependency\n   * Change from runtime to compileOnly appcompat-v7 dependency\n   * Add log for when no location permissions added on Manifest"}, "afterCommit": {"oid": "1b0a4752fffdf620ccf8e1358fda683673434ce9", "author": {"user": {"login": "Jeasmine", "name": "JNahui"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/1b0a4752fffdf620ccf8e1358fda683673434ce9", "committedDate": "2020-04-08T18:54:49Z", "message": "Remove dependencies from gradle\n\n   * Remove appcompat-v4 dependency\n   * Change from runtime to compileOnly appcompat-v7 dependency\n   * Add log for when no location permissions added on Manifest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "40349f16dcfe64f2d73fc7172193602d6f5c6919", "author": {"user": {"login": "Jeasmine", "name": "JNahui"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/40349f16dcfe64f2d73fc7172193602d6f5c6919", "committedDate": "2020-04-08T18:57:46Z", "message": "Remove dependencies from gradle\n\n   * Remove appcompat-v4 dependency\n   * Change from runtime to compileOnly appcompat-v7 dependency\n   * Add log for when no location permissions added on Manifest"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1b0a4752fffdf620ccf8e1358fda683673434ce9", "author": {"user": {"login": "Jeasmine", "name": "JNahui"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/1b0a4752fffdf620ccf8e1358fda683673434ce9", "committedDate": "2020-04-08T18:54:49Z", "message": "Remove dependencies from gradle\n\n   * Remove appcompat-v4 dependency\n   * Change from runtime to compileOnly appcompat-v7 dependency\n   * Add log for when no location permissions added on Manifest"}, "afterCommit": {"oid": "40349f16dcfe64f2d73fc7172193602d6f5c6919", "author": {"user": {"login": "Jeasmine", "name": "JNahui"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/40349f16dcfe64f2d73fc7172193602d6f5c6919", "committedDate": "2020-04-08T18:57:46Z", "message": "Remove dependencies from gradle\n\n   * Remove appcompat-v4 dependency\n   * Change from runtime to compileOnly appcompat-v7 dependency\n   * Add log for when no location permissions added on Manifest"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwMjUxNDMz", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/986#pullrequestreview-390251433", "createdAt": "2020-04-08T19:03:52Z", "commit": {"oid": "40349f16dcfe64f2d73fc7172193602d6f5c6919"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3539, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}