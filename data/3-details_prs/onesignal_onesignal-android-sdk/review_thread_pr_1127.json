{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc1NjQ0OTk4", "number": 1127, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOVQyMzo1NTo0OVrOEeA8RA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOVQyMzo1NTo0OVrOEeA8RA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk5OTA4MTY0OnYy", "diffSide": "RIGHT", "path": "OneSignalSDK/unittest/src/test/java/com/test/onesignal/GenerateNotificationRunner.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOVQyMzo1NTo0OVrOHJesHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxNjo0NDozMFrOHKAXhw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTcwMjA0NA==", "bodyText": "This test is now taking ~35 seconds to complete when it wasn't before.\nI investigated this a bit and it is due to the Thread.sleep in notificationWillShowInForeground in the\ncom.test.onesignal.GenerateNotificationRunner$NotificationExtensionService_workTimeLongerThanTimeout class never being interrupted.\nThe other app specific one notificationWillShowInForeground is being interrupted correctly however.", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1127#discussion_r479702044", "createdAt": "2020-08-29T23:55:49Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/unittest/src/test/java/com/test/onesignal/GenerateNotificationRunner.java", "diffHunk": "@@ -2121,6 +2125,7 @@ public void notificationWillShowInForeground(OSNotificationGenerationJob.ExtNoti\n    }\n \n    @Test\n+   @Config(shadows = { ShadowTimeoutHandler.class })\n    public void testNotificationWillShowInForegroundHandler_workTimeLongerThanTimeout() throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "905b7166cd2d85cb52cb698111baba5cb8f482e1"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDI1MzgzMQ==", "bodyText": "there is no need for the 35 seconds, due that we are reducing the timeout time to 1, to avoid waiting that long. Also reduced the thread sleep for 3 seconds, first sleep will be interrupted but the second sleep", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1127#discussion_r480253831", "createdAt": "2020-08-31T16:44:30Z", "author": {"login": "Jeasmine"}, "path": "OneSignalSDK/unittest/src/test/java/com/test/onesignal/GenerateNotificationRunner.java", "diffHunk": "@@ -2121,6 +2125,7 @@ public void notificationWillShowInForeground(OSNotificationGenerationJob.ExtNoti\n    }\n \n    @Test\n+   @Config(shadows = { ShadowTimeoutHandler.class })\n    public void testNotificationWillShowInForegroundHandler_workTimeLongerThanTimeout() throws Exception {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTcwMjA0NA=="}, "originalCommit": {"oid": "905b7166cd2d85cb52cb698111baba5cb8f482e1"}, "originalPosition": 50}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2113, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}