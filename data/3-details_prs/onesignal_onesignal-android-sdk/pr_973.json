{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkxMjA2MTgy", "number": 973, "title": "Turned catch Throwables into a specific exception", "bodyText": "Catching Throwable is hiding root case exceptions which is causing unrelated exceptions to throw\n\nSuch as an NPE due to something not being set or a Thread trying to start twice.\n\n\nOnly first pass, many more we can clean up.\n\n\n\nThis change is\u2002", "createdAt": "2020-03-19T19:55:27Z", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/973", "merged": true, "mergeCommit": {"oid": "b9d6929777514cef9d0ae8c5f718d5998f216ce8"}, "closed": true, "closedAt": "2020-03-22T20:50:01Z", "author": {"login": "jkasten2"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcPky8DABqjMxNTA0NTM5NTA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcPrTkHAFqTM3ODg4Mjg0MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "869f986ff7a713085daa2c935ad0dd389e36bca4", "author": {"user": {"login": "jkasten2", "name": "Josh Kasten"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/869f986ff7a713085daa2c935ad0dd389e36bca4", "committedDate": "2020-03-19T19:54:59Z", "message": "Turned catch Throwables into a specific exception\n\n* Catching Throwable is hiding root case exceptions which is causing unrelated exceptions to throw\n  - Such as an NPE due to something not being set or a Thread trying to start twice.\n* Only first pass, many more we can clean up."}, "afterCommit": {"oid": "2af9749dde6ed54adca756b8053f6db6b277f174", "author": {"user": {"login": "jkasten2", "name": "Josh Kasten"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/2af9749dde6ed54adca756b8053f6db6b277f174", "committedDate": "2020-03-20T18:26:17Z", "message": "Turned catch Throwables into a specific exception\n\n* Catching Throwable is hiding root case exceptions which is causing unrelated exceptions to throw\n  - Such as an NPE due to something not being set or a Thread trying to start twice.\n* Only first pass, many more we can clean up."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4ODU2NTAx", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/973#pullrequestreview-378856501", "createdAt": "2020-03-20T23:08:08Z", "commit": {"oid": "2af9749dde6ed54adca756b8053f6db6b277f174"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQyMzowODowOFrOF5ldDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQyMzoxOTowMFrOF5ll8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTkyNjc5OA==", "bodyText": "is it ok to remove the != null check?\nIn that case the ()  can be removed", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/973#discussion_r395926798", "createdAt": "2020-03-20T23:08:08Z", "author": {"login": "Jeasmine"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/GooglePlayServicesUpgradePrompt.java", "diffHunk": "@@ -30,8 +30,10 @@ private static boolean isGooglePlayStoreInstalled() {\n          PackageManager pm = OneSignal.appContext.getPackageManager();\n          PackageInfo info = pm.getPackageInfo(GoogleApiAvailability.GOOGLE_PLAY_SERVICES_PACKAGE, PackageManager.GET_META_DATA);\n          String label = (String) info.applicationInfo.loadLabel(pm);\n-         return (label != null && !label.equals(\"Market\"));\n-      } catch (Throwable e) {}\n+         return (!label.equals(\"Market\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2af9749dde6ed54adca756b8053f6db6b277f174"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTkyOTA3Mg==", "bodyText": "what IAP stand for? \ud83d\ude33", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/973#discussion_r395929072", "createdAt": "2020-03-20T23:19:00Z", "author": {"login": "Jeasmine"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/TrackAmazonPurchase.java", "diffHunk": "@@ -72,11 +74,25 @@\n \n          canTrack = true;\n          setListener();\n-      } catch (Throwable t) {\n-         OneSignal.Log(OneSignal.LOG_LEVEL.ERROR, \"Error adding Amazon IAP listener.\", t);\n+         // Can replace all catches with ReflectiveOperationException win min API is 19\n+      } catch (ClassNotFoundException e) {\n+         logAmazonIAPListenerError(e);\n+      } catch (IllegalAccessException e) {\n+         logAmazonIAPListenerError(e);\n+      } catch (InvocationTargetException e) {\n+         logAmazonIAPListenerError(e);\n+      } catch (NoSuchMethodException e) {\n+         logAmazonIAPListenerError(e);\n+      } catch (NoSuchFieldException e) {\n+         logAmazonIAPListenerError(e);\n       }\n    }\n \n+   private static void logAmazonIAPListenerError(Exception e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2af9749dde6ed54adca756b8053f6db6b277f174"}, "originalPosition": 34}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4ODcyMDUw", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/973#pullrequestreview-378872050", "createdAt": "2020-03-21T00:21:29Z", "commit": {"oid": "2af9749dde6ed54adca756b8053f6db6b277f174"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMVQwMDoyMToyOVrOF5mSzA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMVQwMDoyMTo0N1rOF5mS9w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTk0MDU1Ng==", "bodyText": "t should be e", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/973#discussion_r395940556", "createdAt": "2020-03-21T00:21:29Z", "author": {"login": "mikechoch"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/TrackFirebaseAnalytics.java", "diffHunk": "@@ -56,7 +56,7 @@ static boolean CanTrack() {\n       try {\n          FirebaseAnalyticsClass = Class.forName(\"com.google.firebase.analytics.FirebaseAnalytics\");\n          return true;\n-      } catch (Throwable t) {\n+      } catch (ClassNotFoundException t) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2af9749dde6ed54adca756b8053f6db6b277f174"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTk0MDU5OQ==", "bodyText": "t should be e", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/973#discussion_r395940599", "createdAt": "2020-03-21T00:21:47Z", "author": {"login": "mikechoch"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/OneSignalDbHelper.java", "diffHunk": "@@ -147,7 +148,7 @@ synchronized SQLiteDatabase getReadableDbWithRetries() {\n       while(true) {\n          try {\n             return getReadableDatabase();\n-         } catch (Throwable t) {\n+         } catch (SQLiteCantOpenDatabaseException t) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2af9749dde6ed54adca756b8053f6db6b277f174"}, "originalPosition": 25}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cfa8274b1922565f87eb8324798eac2c1ba94aea", "author": {"user": {"login": "jkasten2", "name": "Josh Kasten"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/cfa8274b1922565f87eb8324798eac2c1ba94aea", "committedDate": "2020-03-21T00:31:30Z", "message": "Turned catch Throwables into a specific exception\n\n* Catching Throwable is hiding root case exceptions which is causing unrelated exceptions to throw\n  - Such as an NPE due to something not being set or a Thread trying to start twice.\n* Only first pass, many more we can clean up."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2af9749dde6ed54adca756b8053f6db6b277f174", "author": {"user": {"login": "jkasten2", "name": "Josh Kasten"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/2af9749dde6ed54adca756b8053f6db6b277f174", "committedDate": "2020-03-20T18:26:17Z", "message": "Turned catch Throwables into a specific exception\n\n* Catching Throwable is hiding root case exceptions which is causing unrelated exceptions to throw\n  - Such as an NPE due to something not being set or a Thread trying to start twice.\n* Only first pass, many more we can clean up."}, "afterCommit": {"oid": "cfa8274b1922565f87eb8324798eac2c1ba94aea", "author": {"user": {"login": "jkasten2", "name": "Josh Kasten"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/cfa8274b1922565f87eb8324798eac2c1ba94aea", "committedDate": "2020-03-21T00:31:30Z", "message": "Turned catch Throwables into a specific exception\n\n* Catching Throwable is hiding root case exceptions which is causing unrelated exceptions to throw\n  - Such as an NPE due to something not being set or a Thread trying to start twice.\n* Only first pass, many more we can clean up."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4ODc1ODYy", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/973#pullrequestreview-378875862", "createdAt": "2020-03-21T00:48:15Z", "commit": {"oid": "cfa8274b1922565f87eb8324798eac2c1ba94aea"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4ODgyODQw", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/973#pullrequestreview-378882840", "createdAt": "2020-03-21T02:02:14Z", "commit": {"oid": "cfa8274b1922565f87eb8324798eac2c1ba94aea"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3531, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}