{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA0MTA5Mzc3", "number": 990, "title": "Android x migration", "bodyText": "This change is\u2002", "createdAt": "2020-04-16T04:24:04Z", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/990", "merged": true, "mergeCommit": {"oid": "93f56d7464f427ac2506c107b5f5be0ec576d96d"}, "closed": true, "closedAt": "2020-05-05T01:35:39Z", "author": {"login": "mikechoch"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcYPRklAFqTM5NDgwMjI1Nw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABceCVc1gFqTQwNTE2NDA5Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk0ODAyMjU3", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/990#pullrequestreview-394802257", "createdAt": "2020-04-16T16:28:02Z", "commit": {"oid": "627ffe0c8f2d5ab015940aadb69a0fc28c665c53"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "69db370ce87d8319222a08796868f8de9809fcce", "author": {"user": {"login": "mikechoch", "name": "Michael DiCioccio"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/69db370ce87d8319222a08796868f8de9809fcce", "committedDate": "2020-04-16T20:54:33Z", "message": "Merge branch 'major_release_4.0.0' into android_x_migration"}, "afterCommit": {"oid": "81be068b53864ac8c82b44b7b8ef49a84810ec53", "author": {"user": {"login": "mikechoch", "name": "Michael DiCioccio"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/81be068b53864ac8c82b44b7b8ef49a84810ec53", "committedDate": "2020-04-16T21:48:35Z", "message": "Checkout from android_x_migration\nMerged major_release_4.0.0 into this new branch and resolve conflicts\nNow will merge this into android_x_migration and force push"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d324aa12da0bcf765e3f833e98e7533fbb94ee7e", "author": {"user": {"login": "mikechoch", "name": "Michael DiCioccio"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/d324aa12da0bcf765e3f833e98e7533fbb94ee7e", "committedDate": "2020-04-30T14:39:57Z", "message": "Android X migration for demo app\n* Updated all dependencies to Android x minimums with ranges\n  * androidx.cardview:cardview:[1.0.0, 1.99.99]\n  * androidx.appcompat:appcompat:[1.0.0, 1.99.99]\n  * androidx.legacy:legacy-support-v4:[1.0.0, 1.99.99]\n  * androidx.vectordrawable:vectordrawable:[1.0.0, 1.99.99]\n* Updated demo app XML\n  * Android X scroll behavior\n  * All Right and Left based attributes now ave the matching Start and End attributes to match and remove errors/warnings\n* Demo app build.gradle updates\n  * Android SDK min for demo app is 16\n  * Added compile options to demo app build.gradle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d0573ab7751632b2a93093024efe60477dc08b6", "author": {"user": {"login": "mikechoch", "name": "Michael DiCioccio"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/1d0573ab7751632b2a93093024efe60477dc08b6", "committedDate": "2020-04-30T14:46:34Z", "message": "Android X migration for onesignal SDK\n* Android X libs replace all Android support libs\n* Set mUnsubscribeWhenNotificationsAreDisabled to true\n* Set mDisplayOption to NOTIFICATION\n* Updated OneSignalChromeTab class to work with Android X\n* Updated all GCM to FCM across codebase\n* Deleted PREFS_OS_FILTER_OTHER_GCM_RECEIVERS param\n* Updated dependencies to Android X min\n  * com.google.android.gms:play-services-location:[17.0.0, 17.99.99]\n  * com.google.android.gms:play-services-ads-identifier:[17.0.0, 17.99.99]\n  * com.google.android.gms:play-services-base:[17.0.0, 17.99.99]\n  * com.google.firebase:firebase-messaging:[19.0.0, 20.99.99]\n* Updated gradle for onesignal\n  * Min SDK is 16 now\n  * Gradle wrapper 5.6.4\n  * Build Gradle 3.6.2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6bf729d94b229c6f7a0826049e04c6cc18c9f933", "author": {"user": {"login": "mikechoch", "name": "Michael DiCioccio"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/6bf729d94b229c6f7a0826049e04c6cc18c9f933", "committedDate": "2020-04-30T14:50:09Z", "message": "Android X migration for unit tests\n* Updated all android support to Android X libs\n* Updated all GCM to FCM across unit tests\n* Updated min sdk to 16\n* Updated dependencies to min Android X\n  * com.google.android.gms:play-services-location:17.0.0\n  * com.google.firebase:firebase-core:17.2.2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "499b9c25f230c723ef1fd0106abc308e34c72f38", "author": {"user": {"login": "mikechoch", "name": "Michael DiCioccio"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/499b9c25f230c723ef1fd0106abc308e34c72f38", "committedDate": "2020-04-30T14:50:26Z", "message": "Changed androidx.appcompat to api and added a range of versions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "714ad44fc5b5575ddfe3d097df2ee352f01117e9", "author": {"user": {"login": "mikechoch", "name": "Michael DiCioccio"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/714ad44fc5b5575ddfe3d097df2ee352f01117e9", "committedDate": "2020-04-30T15:38:56Z", "message": "Was not receiving notifications on device\n* Fixed this by using\n  * com.google.android.c2dm.intent.RECEIVE in FCMBroadcastReceiver and AndroidManifest action name\n  * Should eventually be com.google.firebase.MESSAGING_EVENT but wa snot able ot ge this working correctly"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c149e592d2ef11fede42f38b5b76cdd85014bc0f", "author": {"user": {"login": "mikechoch", "name": "Michael DiCioccio"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/c149e592d2ef11fede42f38b5b76cdd85014bc0f", "committedDate": "2020-04-16T21:52:45Z", "message": "Changed androidx.appcompat to api and added a range of versions"}, "afterCommit": {"oid": "714ad44fc5b5575ddfe3d097df2ee352f01117e9", "author": {"user": {"login": "mikechoch", "name": "Michael DiCioccio"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/714ad44fc5b5575ddfe3d097df2ee352f01117e9", "committedDate": "2020-04-30T15:38:56Z", "message": "Was not receiving notifications on device\n* Fixed this by using\n  * com.google.android.c2dm.intent.RECEIVE in FCMBroadcastReceiver and AndroidManifest action name\n  * Should eventually be com.google.firebase.MESSAGING_EVENT but wa snot able ot ge this working correctly"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c3842b95a0e73729314ef0faa808c0a5c3c72dda", "author": {"user": {"login": "mikechoch", "name": "Michael DiCioccio"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/c3842b95a0e73729314ef0faa808c0a5c3c72dda", "committedDate": "2020-04-30T16:51:39Z", "message": "Unit Tests FCM intent action issue\n* Fixed this by using\n  * com.google.android.c2dm.intent.RECEIVE instead of com.google.firebase.MESSAGING_EVENT\n  * Should eventually be com.google.firebase.MESSAGING_EVENT but was not able ot ge this working correctly"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0NjYzNTI3", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/990#pullrequestreview-404663527", "createdAt": "2020-05-03T22:29:24Z", "commit": {"oid": "c3842b95a0e73729314ef0faa808c0a5c3c72dda"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QyMjoyOToyNFrOGPwDdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QyMzowMDoyOFrOGPwOxg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTE2OTE0Mg==", "bodyText": "This needs to say \"gcm\". This it the payload that the \"Google Play services\" app sends and it outside of the control of that app.", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/990#discussion_r419169142", "createdAt": "2020-05-03T22:29:24Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/FCMBroadcastReceiver.java", "diffHunk": "@@ -35,24 +35,23 @@\n import android.os.Build;\n import android.os.Bundle;\n import android.os.Parcelable;\n-import android.os.PersistableBundle;\n-import android.support.annotation.Nullable;\n-import android.support.v4.content.WakefulBroadcastReceiver;\n+\n+import androidx.annotation.Nullable;\n+import androidx.legacy.content.WakefulBroadcastReceiver;\n \n import com.onesignal.NotificationBundleProcessor.ProcessedBundleResult;\n \n-// This is the entry point when a FCM / GCM payload is received from the Google Play services app\n-// TODO: 4.0.0 - Update to use <action android:name=\"com.google.firebase.MESSAGING_EVENT\"/>\n-public class GcmBroadcastReceiver extends WakefulBroadcastReceiver {\n+// This is the entry point when a FCM payload is received from the Google Play services app\n+public class FCMBroadcastReceiver extends WakefulBroadcastReceiver {\n \n-   private static final String GCM_RECEIVE_ACTION = \"com.google.android.c2dm.intent.RECEIVE\";\n-   private static final String GCM_TYPE = \"gcm\";\n+   private static final String FCM_RECEIVE_ACTION = \"com.google.android.c2dm.intent.RECEIVE\";\n+   private static final String FCM_TYPE = \"fcm\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c3842b95a0e73729314ef0faa808c0a5c3c72dda"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTE2OTQ2OA==", "bodyText": "The original checked was processedResult.isOneSignalPayload && OneSignal.getFilterOtherGCMReceivers(context) so this means we should now remove rocessedResult.isOneSignalPayload.", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/990#discussion_r419169468", "createdAt": "2020-05-03T22:32:49Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/FCMBroadcastReceiver.java", "diffHunk": "@@ -69,26 +68,20 @@ public void onReceive(Context context, Intent intent) {\n \n       ProcessedBundleResult processedResult = processOrderBroadcast(context, intent, bundle);\n \n-      // Null means this isn't a GCM / FCM message.\n+      // Null means this isn't a FCM message\n       if (processedResult == null) {\n          setSuccessfulResultCode();\n          return;\n       }\n \n-      // Prevent other GCM receivers from firing if;\n-      //   This is a duplicated GCM message\n-      //   OR app developer setup a extender service to handle the notification.\n-      if (processedResult.isDup || processedResult.hasExtenderService) {\n-         // Abort to prevent other GCM receivers from process this Intent.\n-         setAbort();\n-         return;\n-      }\n-\n-      // Prevent other GCM receivers from firing if;\n-      //   This is a OneSignal payload\n-      //   AND the setting is enabled to allow filtering in this case.\n-      if (processedResult.isOneSignalPayload &&\n-          OneSignal.getFilterOtherGCMReceivers(context)) {\n+      // Prevent other FCM receivers from firing if:\n+      //    1. This is a duplicated FCM message\n+      //    2. OR app developer setup a extender service to handle the notification\n+      //    3. OR this is a OneSignal payload\n+      if (processedResult.isDup\n+              || processedResult.hasExtenderService\n+              || processedResult.isOneSignalPayload) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c3842b95a0e73729314ef0faa808c0a5c3c72dda"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTE2OTc1Mg==", "bodyText": "yes, this FCMBroadcastReceiver class is really independent of FCM or GCM. Since this class directly handles the Intent fired from the \"Google Play services\" app. This receiver would still work if you completely removed both the FCM and GCM libraries from the app. (Today OneSignal uses the FCM / GCM library to register for a push token)", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/990#discussion_r419169752", "createdAt": "2020-05-03T22:36:13Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/FCMBroadcastReceiver.java", "diffHunk": "@@ -106,50 +99,56 @@ private void setAbort() {\n          // Prevents other BroadcastReceivers from firing\n          abortBroadcast();\n \n+         // TODO: Is this an issue with FCM too?", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c3842b95a0e73729314ef0faa808c0a5c3c72dda"}, "originalPosition": 75}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTE3MDI4NA==", "bodyText": "setAbort(); should be removed completely now that OneSignal.getFilterOtherGCMReceivers(context) is gone.", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/990#discussion_r419170284", "createdAt": "2020-05-03T22:41:41Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/FCMBroadcastReceiver.java", "diffHunk": "@@ -69,26 +68,20 @@ public void onReceive(Context context, Intent intent) {\n \n       ProcessedBundleResult processedResult = processOrderBroadcast(context, intent, bundle);\n \n-      // Null means this isn't a GCM / FCM message.\n+      // Null means this isn't a FCM message\n       if (processedResult == null) {\n          setSuccessfulResultCode();\n          return;\n       }\n \n-      // Prevent other GCM receivers from firing if;\n-      //   This is a duplicated GCM message\n-      //   OR app developer setup a extender service to handle the notification.\n-      if (processedResult.isDup || processedResult.hasExtenderService) {\n-         // Abort to prevent other GCM receivers from process this Intent.\n-         setAbort();\n-         return;\n-      }\n-\n-      // Prevent other GCM receivers from firing if;\n-      //   This is a OneSignal payload\n-      //   AND the setting is enabled to allow filtering in this case.\n-      if (processedResult.isOneSignalPayload &&\n-          OneSignal.getFilterOtherGCMReceivers(context)) {\n+      // Prevent other FCM receivers from firing if:\n+      //    1. This is a duplicated FCM message\n+      //    2. OR app developer setup a extender service to handle the notification\n+      //    3. OR this is a OneSignal payload\n+      if (processedResult.isDup\n+              || processedResult.hasExtenderService\n+              || processedResult.isOneSignalPayload) {\n+         // Abort to prevent other FCM receivers from process this Intent.\n          setAbort();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c3842b95a0e73729314ef0faa808c0a5c3c72dda"}, "originalPosition": 68}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTE3MDM2NQ==", "bodyText": "Remove this comment, per the logic change noted in the comment just below.", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/990#discussion_r419170365", "createdAt": "2020-05-03T22:42:45Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/FCMBroadcastReceiver.java", "diffHunk": "@@ -69,26 +68,20 @@ public void onReceive(Context context, Intent intent) {\n \n       ProcessedBundleResult processedResult = processOrderBroadcast(context, intent, bundle);\n \n-      // Null means this isn't a GCM / FCM message.\n+      // Null means this isn't a FCM message\n       if (processedResult == null) {\n          setSuccessfulResultCode();\n          return;\n       }\n \n-      // Prevent other GCM receivers from firing if;\n-      //   This is a duplicated GCM message\n-      //   OR app developer setup a extender service to handle the notification.\n-      if (processedResult.isDup || processedResult.hasExtenderService) {\n-         // Abort to prevent other GCM receivers from process this Intent.\n-         setAbort();\n-         return;\n-      }\n-\n-      // Prevent other GCM receivers from firing if;\n-      //   This is a OneSignal payload\n-      //   AND the setting is enabled to allow filtering in this case.\n-      if (processedResult.isOneSignalPayload &&\n-          OneSignal.getFilterOtherGCMReceivers(context)) {\n+      // Prevent other FCM receivers from firing if:\n+      //    1. This is a duplicated FCM message\n+      //    2. OR app developer setup a extender service to handle the notification\n+      //    3. OR this is a OneSignal payload\n+      if (processedResult.isDup\n+              || processedResult.hasExtenderService\n+              || processedResult.isOneSignalPayload) {\n+         // Abort to prevent other FCM receivers from process this Intent.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c3842b95a0e73729314ef0faa808c0a5c3c72dda"}, "originalPosition": 67}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTE3MTUxNg==", "bodyText": "This was not done in this PR. Keep this comment. Also FCM migration is out of scope of an AndroidX migration so I would recommend a different PR.", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/990#discussion_r419171516", "createdAt": "2020-05-03T22:54:30Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/FCMBroadcastReceiver.java", "diffHunk": "@@ -35,24 +35,23 @@\n import android.os.Build;\n import android.os.Bundle;\n import android.os.Parcelable;\n-import android.os.PersistableBundle;\n-import android.support.annotation.Nullable;\n-import android.support.v4.content.WakefulBroadcastReceiver;\n+\n+import androidx.annotation.Nullable;\n+import androidx.legacy.content.WakefulBroadcastReceiver;\n \n import com.onesignal.NotificationBundleProcessor.ProcessedBundleResult;\n \n-// This is the entry point when a FCM / GCM payload is received from the Google Play services app\n-// TODO: 4.0.0 - Update to use <action android:name=\"com.google.firebase.MESSAGING_EVENT\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c3842b95a0e73729314ef0faa808c0a5c3c72dda"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTE3MTY0NA==", "bodyText": "WAKE_LOCK is still needed by the FCM / GCM broadcastreceiver.", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/990#discussion_r419171644", "createdAt": "2020-05-03T22:55:57Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/onesignal/src/main/AndroidManifest.xml", "diffHunk": "@@ -4,12 +4,11 @@\n     <!-- OneSignal SDK has runtime checks Android version. -->\n     <!--<uses-sdk tools:overrideLibrary=\"android.support.customtabs\"/>-->\n \n-    <!-- INTERNET and c2dm RECEIVE are basic requirements for push messages through Google's GCM. -->\n+    <!-- INTERNET permission requirement -->\n     <uses-permission android:name=\"android.permission.INTERNET\" />\n-    <uses-permission android:name=\"com.google.android.c2dm.permission.RECEIVE\" />\n \n-    <!-- Required, makes sure notifications are delivered on time. -->\n-    <uses-permission android:name=\"android.permission.WAKE_LOCK\" />", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c3842b95a0e73729314ef0faa808c0a5c3c72dda"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTE3MTg2NA==", "bodyText": "This should be kept but changed it's name to com.onesignal.FcmBroadcastReceiver.\nThe full FCM guide was not followed, com.google.firebase.MESSAGING_EVENT was not added per this guide.\nhttps://developers.google.com/cloud-messaging/android/android-migrate-gcmlistener\nBut again, an FCM migration seems out of scope to me for an AndroidX migration.", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/990#discussion_r419171864", "createdAt": "2020-05-03T22:58:29Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/onesignal/src/release/AndroidManifest.xml", "diffHunk": "@@ -1,19 +1,12 @@\n <manifest xmlns:android=\"http://schemas.android.com/apk/res/android\" package=\"com.onesignal\">\n \n-    <!-- Create a unique permission for your app and use it so only your app can receive your OneSignal messages. -->\n-    <permission android:name=\"${applicationId}.permission.C2D_MESSAGE\" android:protectionLevel=\"signature\" />\n-    <uses-permission android:name=\"${applicationId}.permission.C2D_MESSAGE\" />\n-\n     <application>\n-        <receiver\n-            android:name=\"com.onesignal.GcmBroadcastReceiver\"\n-            android:permission=\"com.google.android.c2dm.permission.SEND\" >\n-            <!-- High priority so OneSignal payloads can be filtered from other GCM receivers if filterOtherGCMReceivers is enabled. -->\n-            <intent-filter android:priority=\"999\" >\n-                <action android:name=\"com.google.android.c2dm.intent.RECEIVE\" />\n-                <category android:name=\"${applicationId}\" />\n-            </intent-filter>\n-        </receiver>\n+\n+        <!--", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c3842b95a0e73729314ef0faa808c0a5c3c72dda"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTE3MjAzOA==", "bodyText": "Put back to \"gcm\", see my comment in FCMBroadcastReceiver", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/990#discussion_r419172038", "createdAt": "2020-05-03T23:00:28Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/unittest/src/test/java/com/test/onesignal/GenerateNotificationRunner.java", "diffHunk": "@@ -1032,28 +1032,28 @@ public void shouldCorrectlyDisplaySummaryWithMixedInAppAlertsAndNotifications()\n       // Setup - Send 2 more notifications with the same group\n       bundle = getBaseNotifBundle(\"UUID2\");\n       bundle.putString(\"grp\", \"test1\");\n-      NotificationBundleProcessor_ProcessFromGCMIntentService(blankActivity, bundle, null);\n+      NotificationBundleProcessor_ProcessFromFCMIntentService(blankActivity, bundle, null);\n       bundle = getBaseNotifBundle(\"UUID3\");\n       bundle.putString(\"grp\", \"test1\");\n-      NotificationBundleProcessor_ProcessFromGCMIntentService(blankActivity, bundle, null);\n+      NotificationBundleProcessor_ProcessFromFCMIntentService(blankActivity, bundle, null);\n    \n       // Test - equals 3 - Should be 2 notifications + 1 summary.\n       //         Alert should stay as an in-app alert.\n       assertEquals(3, ShadowRoboNotificationManager.notifications.size());\n    }\n \n    @Test\n-   @Config(shadows = {ShadowGcmBroadcastReceiver.class})\n+   @Config(shadows = {ShadowFCMBroadcastReceiver.class})\n    public void shouldSetButtonsCorrectly() throws Exception {\n-      Intent intentGcm = new Intent();\n-      intentGcm.setAction(\"com.google.android.c2dm.intent.RECEIVE\");\n-      intentGcm.putExtra(\"message_type\", \"gcm\");\n+      Intent intent = new Intent();\n+      intent.setAction(\"com.google.android.c2dm.intent.RECEIVE\");\n+      intent.putExtra(\"message_type\", \"fcm\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c3842b95a0e73729314ef0faa808c0a5c3c72dda"}, "originalPosition": 367}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "646b213452ce1fd5ee2b95c5b3fe040457d5232e", "author": {"user": {"login": "mikechoch", "name": "Michael DiCioccio"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/646b213452ce1fd5ee2b95c5b3fe040457d5232e", "committedDate": "2020-05-04T15:45:10Z", "message": "Reverted some partially FCM migrations\n* Now only naming has been changed to prepare for FCM migration\n  * Still using GCM, but FCM names everywhere until FIREBASE_MESSAGING action is added\n  * Changed back to \"gcm\" type for payload expectation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d3e2839298cca6c4c805e5ee4d62513db74f9d4", "author": {"user": {"login": "mikechoch", "name": "Michael DiCioccio"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/8d3e2839298cca6c4c805e5ee4d62513db74f9d4", "committedDate": "2020-05-04T16:19:34Z", "message": "UnitTest no longer relevant because GCM filtering is removed\n* Refactored in previous commit(s) on accident to FCM but should have been GCM and the deleted"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1MTY0MDk2", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/990#pullrequestreview-405164096", "createdAt": "2020-05-04T16:47:03Z", "commit": {"oid": "8d3e2839298cca6c4c805e5ee4d62513db74f9d4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3542, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}