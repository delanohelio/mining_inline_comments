{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAzNjg1MTEy", "number": 1187, "title": "Remove public getPermissionSubscriptionState", "bodyText": "Replace getPermissionSubscriptionState with getDeviceState\nAdd isEmaiSubscribed method to OSDeviceState\nDelete OSPermissionSubscriptionState class\n\n\nThis change is\u2002", "createdAt": "2020-10-14T22:19:39Z", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1187", "merged": true, "mergeCommit": {"oid": "93922da01985aa6a0d46b42cb040619e30248aa3"}, "closed": true, "closedAt": "2020-10-15T16:55:18Z", "author": {"login": "Jeasmine"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdSk1wLABqjM4Nzg3NTY4MDE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdSlrjiAFqTUwODgzNzA2Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9272ca90f0bf4c1eb754690671d2aae08987ab62", "author": {"user": {"login": "Jeasmine", "name": "JNahui"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/9272ca90f0bf4c1eb754690671d2aae08987ab62", "committedDate": "2020-10-14T22:19:04Z", "message": "Remove public getPermissionSubscriptionState\n\n* Replace getPermissionSubscriptionState with getDeviceState\n* Add isEmaiSubscribed method to OSDeviceState\n* Delete OSPermissionSubscriptionState class"}, "afterCommit": {"oid": "79ce723ef729fa582b9fe0133a85e51e3365477d", "author": {"user": {"login": "Jeasmine", "name": "JNahui"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/79ce723ef729fa582b9fe0133a85e51e3365477d", "committedDate": "2020-10-14T22:22:56Z", "message": "Remove public getPermissionSubscriptionState\n\n* Replace getPermissionSubscriptionState with getDeviceState\n* Add isEmaiSubscribed method to OSDeviceState\n* Delete OSPermissionSubscriptionState class"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4ODExNTU3", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1187#pullrequestreview-508811557", "createdAt": "2020-10-14T22:23:19Z", "commit": {"oid": "9272ca90f0bf4c1eb754690671d2aae08987ab62"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQyMjoyMzozOFrOHhn-aw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQyMjoyMzozOFrOHhn-aw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTAyMDAxMQ==", "bodyText": "Consent isn't needed since this is just a getter, it doesn't make any network requests", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1187#discussion_r505020011", "createdAt": "2020-10-14T22:23:38Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/OneSignal.java", "diffHunk": "@@ -482,11 +485,24 @@ private static OSEmailSubscriptionState getLastEmailSubscriptionState(Context co\n    }\n    // End EmailSubscriptionState\n \n+   /**\n+    * Get the current user data, notification and permissions state.\n+    */\n    @Nullable\n    public static OSDeviceState getDeviceState() {\n-      if (getPermissionSubscriptionState() == null)\n+      // If applicable, check if the user provided privacy consent\n+      if (shouldLogUserPrivacyConsentErrorMessageForMethodName(\"getDeviceState()\"))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "79ce723ef729fa582b9fe0133a85e51e3365477d"}, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "95320a2f6d9decf354390d06a1525ceb9655e799", "author": {"user": {"login": "Jeasmine", "name": "JNahui"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/95320a2f6d9decf354390d06a1525ceb9655e799", "committedDate": "2020-10-14T22:43:40Z", "message": "Remove public getPermissionSubscriptionState\n\n* Replace getPermissionSubscriptionState with getDeviceState\n* Add isEmaiSubscribed method to OSDeviceState\n* Delete OSPermissionSubscriptionState class"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "79ce723ef729fa582b9fe0133a85e51e3365477d", "author": {"user": {"login": "Jeasmine", "name": "JNahui"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/79ce723ef729fa582b9fe0133a85e51e3365477d", "committedDate": "2020-10-14T22:22:56Z", "message": "Remove public getPermissionSubscriptionState\n\n* Replace getPermissionSubscriptionState with getDeviceState\n* Add isEmaiSubscribed method to OSDeviceState\n* Delete OSPermissionSubscriptionState class"}, "afterCommit": {"oid": "95320a2f6d9decf354390d06a1525ceb9655e799", "author": {"user": {"login": "Jeasmine", "name": "JNahui"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/95320a2f6d9decf354390d06a1525ceb9655e799", "committedDate": "2020-10-14T22:43:40Z", "message": "Remove public getPermissionSubscriptionState\n\n* Replace getPermissionSubscriptionState with getDeviceState\n* Add isEmaiSubscribed method to OSDeviceState\n* Delete OSPermissionSubscriptionState class"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4ODM3MDY2", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1187#pullrequestreview-508837066", "createdAt": "2020-10-14T23:21:56Z", "commit": {"oid": "95320a2f6d9decf354390d06a1525ceb9655e799"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3463, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}