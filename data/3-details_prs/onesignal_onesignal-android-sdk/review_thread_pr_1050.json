{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMxOTgxMDA4", "number": 1050, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxODozNzoxNlrOEEAe-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQyMTo0MTo1NFrOEEeFWg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNjM3Njg5OnYy", "diffSide": "RIGHT", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/OneSignalCacheCleaner.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxODozNzoxNlrOGhXXJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQwMjozNTo0MVrOGiMhNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzYzODk0OQ==", "bodyText": "maybe move it to the IAM Repository file?", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1050#discussion_r437638949", "createdAt": "2020-06-09T18:37:16Z", "author": {"login": "Jeasmine"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/OneSignalCacheCleaner.java", "diffHunk": "@@ -1,24 +1,19 @@\n package com.onesignal;\n \n-import com.onesignal.OneSignalDbContract.NotificationTable;\n-import com.onesignal.influence.model.OSInfluenceChannel;\n-import com.onesignal.outcomes.OSOutcomeTableProvider;\n-\n import android.content.Context;\n-import android.database.Cursor;\n+import android.database.SQLException;\n import android.database.sqlite.SQLiteDatabase;\n import android.os.Process;\n import android.support.annotation.WorkerThread;\n \n-import org.json.JSONArray;\n-import org.json.JSONException;\n-\n-import java.util.Set;\n+import com.onesignal.OneSignalDbContract.NotificationTable;\n+import com.onesignal.influence.model.OSInfluenceChannel;\n+import com.onesignal.outcomes.OSOutcomeTableProvider;\n \n class OneSignalCacheCleaner {\n \n     private final static long NOTIFICATION_CACHE_DATA_LIFETIME = 604_800L; // 7 days in seconds\n-    private final static long IAM_CACHE_DATA_LIFETIME = 15_552_000L; // 6 months in seconds\n+    final static long IAM_CACHE_DATA_LIFETIME = 15_552_000L; // 6 months in seconds", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c9d3dc694f91bbdaa7bb2c1d8c87fd21a7342c8"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODM2NjUyMw==", "bodyText": "IAM Repository file is responsible for the SQL calls, but do you think we should keep our cache clean times together or split them up?\nI just think its easier to read when we keep the notification time and IAM time in one spot and others will be added here as well.\nMaybe you have another point of view?", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1050#discussion_r438366523", "createdAt": "2020-06-10T19:43:39Z", "author": {"login": "mikechoch"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/OneSignalCacheCleaner.java", "diffHunk": "@@ -1,24 +1,19 @@\n package com.onesignal;\n \n-import com.onesignal.OneSignalDbContract.NotificationTable;\n-import com.onesignal.influence.model.OSInfluenceChannel;\n-import com.onesignal.outcomes.OSOutcomeTableProvider;\n-\n import android.content.Context;\n-import android.database.Cursor;\n+import android.database.SQLException;\n import android.database.sqlite.SQLiteDatabase;\n import android.os.Process;\n import android.support.annotation.WorkerThread;\n \n-import org.json.JSONArray;\n-import org.json.JSONException;\n-\n-import java.util.Set;\n+import com.onesignal.OneSignalDbContract.NotificationTable;\n+import com.onesignal.influence.model.OSInfluenceChannel;\n+import com.onesignal.outcomes.OSOutcomeTableProvider;\n \n class OneSignalCacheCleaner {\n \n     private final static long NOTIFICATION_CACHE_DATA_LIFETIME = 604_800L; // 7 days in seconds\n-    private final static long IAM_CACHE_DATA_LIFETIME = 15_552_000L; // 6 months in seconds\n+    final static long IAM_CACHE_DATA_LIFETIME = 15_552_000L; // 6 months in seconds", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzYzODk0OQ=="}, "originalCommit": {"oid": "8c9d3dc694f91bbdaa7bb2c1d8c87fd21a7342c8"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQxNTU3NA==", "bodyText": "I see what you are saying, I think more about IAM responsibility inside one file, all notification responsibility in another file, even if this file is cleaning all tables, from my point of view each file has the responsibility to maintain the table thas is responsible for.\nSo in this case IamRepository will handle save, deletes, cleaning.", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1050#discussion_r438415574", "createdAt": "2020-06-10T21:22:05Z", "author": {"login": "Jeasmine"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/OneSignalCacheCleaner.java", "diffHunk": "@@ -1,24 +1,19 @@\n package com.onesignal;\n \n-import com.onesignal.OneSignalDbContract.NotificationTable;\n-import com.onesignal.influence.model.OSInfluenceChannel;\n-import com.onesignal.outcomes.OSOutcomeTableProvider;\n-\n import android.content.Context;\n-import android.database.Cursor;\n+import android.database.SQLException;\n import android.database.sqlite.SQLiteDatabase;\n import android.os.Process;\n import android.support.annotation.WorkerThread;\n \n-import org.json.JSONArray;\n-import org.json.JSONException;\n-\n-import java.util.Set;\n+import com.onesignal.OneSignalDbContract.NotificationTable;\n+import com.onesignal.influence.model.OSInfluenceChannel;\n+import com.onesignal.outcomes.OSOutcomeTableProvider;\n \n class OneSignalCacheCleaner {\n \n     private final static long NOTIFICATION_CACHE_DATA_LIFETIME = 604_800L; // 7 days in seconds\n-    private final static long IAM_CACHE_DATA_LIFETIME = 15_552_000L; // 6 months in seconds\n+    final static long IAM_CACHE_DATA_LIFETIME = 15_552_000L; // 6 months in seconds", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzYzODk0OQ=="}, "originalCommit": {"oid": "8c9d3dc694f91bbdaa7bb2c1d8c87fd21a7342c8"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODUwOTg3OA==", "bodyText": "Moved to IAM Repository file", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1050#discussion_r438509878", "createdAt": "2020-06-11T02:35:41Z", "author": {"login": "mikechoch"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/OneSignalCacheCleaner.java", "diffHunk": "@@ -1,24 +1,19 @@\n package com.onesignal;\n \n-import com.onesignal.OneSignalDbContract.NotificationTable;\n-import com.onesignal.influence.model.OSInfluenceChannel;\n-import com.onesignal.outcomes.OSOutcomeTableProvider;\n-\n import android.content.Context;\n-import android.database.Cursor;\n+import android.database.SQLException;\n import android.database.sqlite.SQLiteDatabase;\n import android.os.Process;\n import android.support.annotation.WorkerThread;\n \n-import org.json.JSONArray;\n-import org.json.JSONException;\n-\n-import java.util.Set;\n+import com.onesignal.OneSignalDbContract.NotificationTable;\n+import com.onesignal.influence.model.OSInfluenceChannel;\n+import com.onesignal.outcomes.OSOutcomeTableProvider;\n \n class OneSignalCacheCleaner {\n \n     private final static long NOTIFICATION_CACHE_DATA_LIFETIME = 604_800L; // 7 days in seconds\n-    private final static long IAM_CACHE_DATA_LIFETIME = 15_552_000L; // 6 months in seconds\n+    final static long IAM_CACHE_DATA_LIFETIME = 15_552_000L; // 6 months in seconds", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzYzODk0OQ=="}, "originalCommit": {"oid": "8c9d3dc694f91bbdaa7bb2c1d8c87fd21a7342c8"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNjM4MDA2OnYy", "diffSide": "RIGHT", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/OneSignalCacheCleaner.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxODozODoxM1rOGhXZJg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxOTo0NDowNFrOGiDyJA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzYzOTQ2Mg==", "bodyText": "maybe access it throw OneSignal.java? or add it to the method params? because there should be already a repository instance alive if we have more that one instance then te synchronized won't work", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1050#discussion_r437639462", "createdAt": "2020-06-09T18:38:13Z", "author": {"login": "Jeasmine"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/OneSignalCacheCleaner.java", "diffHunk": "@@ -61,73 +66,13 @@ public void run() {\n      * 3. Use queried data to clean SharedPreferences\n      */\n     @WorkerThread\n-    synchronized static void cleanCachedInAppMessages(final SQLiteDatabase writableDb) {\n+    synchronized static void cleanCachedInAppMessages(final OneSignalDbHelper dbHelper) {\n         new Thread(new Runnable() {\n             @Override\n             public void run() {\n                 Thread.currentThread().setPriority(Process.THREAD_PRIORITY_BACKGROUND);\n-\n-                // 1. Query for all old message ids and old clicked click ids\n-                String[] retColumns = new String[]{\n-                        OneSignalDbContract.InAppMessageTable.COLUMN_NAME_MESSAGE_ID,\n-                        OneSignalDbContract.InAppMessageTable.COLUMN_CLICK_IDS\n-                };\n-\n-                String whereStr = OneSignalDbContract.InAppMessageTable.COLUMN_NAME_LAST_DISPLAY + \" < ?\";\n-\n-                String sixMonthsAgoInSeconds = String.valueOf((System.currentTimeMillis() / 1_000L) - IAM_CACHE_DATA_LIFETIME);\n-                String[] whereArgs = new String[]{sixMonthsAgoInSeconds};\n-\n-                Set<String> oldMessageIds = OSUtils.newConcurrentSet();\n-                Set<String> oldClickedClickIds = OSUtils.newConcurrentSet();\n-\n-                Cursor cursor = null;\n-                try {\n-                    cursor = writableDb.query(OneSignalDbContract.InAppMessageTable.TABLE_NAME,\n-                            retColumns,\n-                            whereStr,\n-                            whereArgs,\n-                            null,\n-                            null,\n-                            null);\n-\n-                    if (cursor == null || cursor.getCount() == 0) {\n-                        OneSignal.onesignalLog(OneSignal.LOG_LEVEL.DEBUG, \"Attempted to clean 6 month old IAM data, but none exists!\");\n-                        return;\n-                    }\n-\n-                    // From cursor get all of the old message ids and old clicked click ids\n-                    if (cursor.moveToFirst()) {\n-                        do {\n-                            String oldMessageId = cursor.getString(\n-                                    cursor.getColumnIndex(\n-                                            OneSignalDbContract.InAppMessageTable.COLUMN_NAME_MESSAGE_ID));\n-                            String oldClickIds = cursor.getString(\n-                                    cursor.getColumnIndex(\n-                                            OneSignalDbContract.InAppMessageTable.COLUMN_CLICK_IDS));\n-\n-                            oldMessageIds.add(oldMessageId);\n-                            oldClickedClickIds.addAll(OSUtils.newStringSetFromJSONArray(new JSONArray(oldClickIds)));\n-                        } while (cursor.moveToNext());\n-                    }\n-                } catch (JSONException e) {\n-                    e.printStackTrace();\n-                } finally {\n-                    if (cursor != null && !cursor.isClosed())\n-                        cursor.close();\n-                }\n-\n-                // 2. Delete old IAMs from SQL\n-                writableDb.delete(\n-                        OneSignalDbContract.InAppMessageTable.TABLE_NAME,\n-                        whereStr,\n-                        whereArgs);\n-\n-                // 3. Use queried data to clean SharedPreferences\n-                cleanInAppMessageIds(oldMessageIds);\n-                cleanInAppMessageClickedClickIds(oldClickedClickIds);\n+                new OSInAppMessageRepository(dbHelper).cleanCachedInAppMessages();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c9d3dc694f91bbdaa7bb2c1d8c87fd21a7342c8"}, "originalPosition": 130}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODM2Njc1Ng==", "bodyText": "Really good point, will do that now!", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1050#discussion_r438366756", "createdAt": "2020-06-10T19:44:04Z", "author": {"login": "mikechoch"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/OneSignalCacheCleaner.java", "diffHunk": "@@ -61,73 +66,13 @@ public void run() {\n      * 3. Use queried data to clean SharedPreferences\n      */\n     @WorkerThread\n-    synchronized static void cleanCachedInAppMessages(final SQLiteDatabase writableDb) {\n+    synchronized static void cleanCachedInAppMessages(final OneSignalDbHelper dbHelper) {\n         new Thread(new Runnable() {\n             @Override\n             public void run() {\n                 Thread.currentThread().setPriority(Process.THREAD_PRIORITY_BACKGROUND);\n-\n-                // 1. Query for all old message ids and old clicked click ids\n-                String[] retColumns = new String[]{\n-                        OneSignalDbContract.InAppMessageTable.COLUMN_NAME_MESSAGE_ID,\n-                        OneSignalDbContract.InAppMessageTable.COLUMN_CLICK_IDS\n-                };\n-\n-                String whereStr = OneSignalDbContract.InAppMessageTable.COLUMN_NAME_LAST_DISPLAY + \" < ?\";\n-\n-                String sixMonthsAgoInSeconds = String.valueOf((System.currentTimeMillis() / 1_000L) - IAM_CACHE_DATA_LIFETIME);\n-                String[] whereArgs = new String[]{sixMonthsAgoInSeconds};\n-\n-                Set<String> oldMessageIds = OSUtils.newConcurrentSet();\n-                Set<String> oldClickedClickIds = OSUtils.newConcurrentSet();\n-\n-                Cursor cursor = null;\n-                try {\n-                    cursor = writableDb.query(OneSignalDbContract.InAppMessageTable.TABLE_NAME,\n-                            retColumns,\n-                            whereStr,\n-                            whereArgs,\n-                            null,\n-                            null,\n-                            null);\n-\n-                    if (cursor == null || cursor.getCount() == 0) {\n-                        OneSignal.onesignalLog(OneSignal.LOG_LEVEL.DEBUG, \"Attempted to clean 6 month old IAM data, but none exists!\");\n-                        return;\n-                    }\n-\n-                    // From cursor get all of the old message ids and old clicked click ids\n-                    if (cursor.moveToFirst()) {\n-                        do {\n-                            String oldMessageId = cursor.getString(\n-                                    cursor.getColumnIndex(\n-                                            OneSignalDbContract.InAppMessageTable.COLUMN_NAME_MESSAGE_ID));\n-                            String oldClickIds = cursor.getString(\n-                                    cursor.getColumnIndex(\n-                                            OneSignalDbContract.InAppMessageTable.COLUMN_CLICK_IDS));\n-\n-                            oldMessageIds.add(oldMessageId);\n-                            oldClickedClickIds.addAll(OSUtils.newStringSetFromJSONArray(new JSONArray(oldClickIds)));\n-                        } while (cursor.moveToNext());\n-                    }\n-                } catch (JSONException e) {\n-                    e.printStackTrace();\n-                } finally {\n-                    if (cursor != null && !cursor.isClosed())\n-                        cursor.close();\n-                }\n-\n-                // 2. Delete old IAMs from SQL\n-                writableDb.delete(\n-                        OneSignalDbContract.InAppMessageTable.TABLE_NAME,\n-                        whereStr,\n-                        whereArgs);\n-\n-                // 3. Use queried data to clean SharedPreferences\n-                cleanInAppMessageIds(oldMessageIds);\n-                cleanInAppMessageClickedClickIds(oldClickedClickIds);\n+                new OSInAppMessageRepository(dbHelper).cleanCachedInAppMessages();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzYzOTQ2Mg=="}, "originalCommit": {"oid": "8c9d3dc694f91bbdaa7bb2c1d8c87fd21a7342c8"}, "originalPosition": 130}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczMTIyNjUwOnYy", "diffSide": "RIGHT", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/OSInAppMessageController.java", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQyMTo0MTo1NFrOGiHTsA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQyMzoyOTozNVrOGiJk7w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQyNDQ5Ng==", "bodyText": "Tests are failing after this commit.\nIf you add OSInAppMessageRepository to StaticResetHelper.java I think it might fix the tests.", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1050#discussion_r438424496", "createdAt": "2020-06-10T21:41:54Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/OSInAppMessageController.java", "diffHunk": "@@ -122,8 +121,15 @@ protected OSInAppMessageController(OneSignalDbHelper dbHelper) {\n         initRedisplayData(dbHelper);\n     }\n \n+    OSInAppMessageRepository getInAppMessageRepository(OneSignalDbHelper dbHelper) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bbabeabb9e8b63fb2ed94cc0e85e7bd19215e218"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQzNDg5Ng==", "bodyText": "Thank you, attempting this now\nWeird thing is everything passes locally", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1050#discussion_r438434896", "createdAt": "2020-06-10T22:08:04Z", "author": {"login": "mikechoch"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/OSInAppMessageController.java", "diffHunk": "@@ -122,8 +121,15 @@ protected OSInAppMessageController(OneSignalDbHelper dbHelper) {\n         initRedisplayData(dbHelper);\n     }\n \n+    OSInAppMessageRepository getInAppMessageRepository(OneSignalDbHelper dbHelper) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQyNDQ5Ng=="}, "originalCommit": {"oid": "bbabeabb9e8b63fb2ed94cc0e85e7bd19215e218"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQzOTEyMQ==", "bodyText": "You are implying I should add a line like this\nclasses.add(new ClassState(OSInAppMessageRepository.class, null));\ninside the\nStaticResetHelper.java?", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1050#discussion_r438439121", "createdAt": "2020-06-10T22:19:41Z", "author": {"login": "mikechoch"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/OSInAppMessageController.java", "diffHunk": "@@ -122,8 +121,15 @@ protected OSInAppMessageController(OneSignalDbHelper dbHelper) {\n         initRedisplayData(dbHelper);\n     }\n \n+    OSInAppMessageRepository getInAppMessageRepository(OneSignalDbHelper dbHelper) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQyNDQ5Ng=="}, "originalCommit": {"oid": "bbabeabb9e8b63fb2ed94cc0e85e7bd19215e218"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQ0MDIzNg==", "bodyText": "yes, that might fix the tests", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1050#discussion_r438440236", "createdAt": "2020-06-10T22:22:47Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/OSInAppMessageController.java", "diffHunk": "@@ -122,8 +121,15 @@ protected OSInAppMessageController(OneSignalDbHelper dbHelper) {\n         initRedisplayData(dbHelper);\n     }\n \n+    OSInAppMessageRepository getInAppMessageRepository(OneSignalDbHelper dbHelper) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQyNDQ5Ng=="}, "originalCommit": {"oid": "bbabeabb9e8b63fb2ed94cc0e85e7bd19215e218"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQ2MTY3OQ==", "bodyText": "Wasn't the issue, test is flaky on it's own. Nothing in this PR would have affected the failing tests so marking this comment as resolved.", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1050#discussion_r438461679", "createdAt": "2020-06-10T23:29:35Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/OSInAppMessageController.java", "diffHunk": "@@ -122,8 +121,15 @@ protected OSInAppMessageController(OneSignalDbHelper dbHelper) {\n         initRedisplayData(dbHelper);\n     }\n \n+    OSInAppMessageRepository getInAppMessageRepository(OneSignalDbHelper dbHelper) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQyNDQ5Ng=="}, "originalCommit": {"oid": "bbabeabb9e8b63fb2ed94cc0e85e7bd19215e218"}, "originalPosition": 12}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2274, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}