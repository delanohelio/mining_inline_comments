{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY1NTM2ODgy", "number": 1110, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNjowMToxNFrOEW2-pA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxOTowMTowMlrOEW67hA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyNDA0OTAwOnYy", "diffSide": "RIGHT", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/OSThrowable.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNjowMToxNFrOG-VPwg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNjo0MDo0M1rOG-WsrA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODAxMjk5NA==", "bodyText": "any reason for having this \"container\" class?", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1110#discussion_r468012994", "createdAt": "2020-08-10T16:01:14Z", "author": {"login": "Jeasmine"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/OSThrowable.java", "diffHunk": "@@ -0,0 +1,37 @@\n+/**\n+ * Modified MIT License\n+ *\n+ * Copyright 2020 OneSignal\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy\n+ * of this software and associated documentation files (the \"Software\"), to deal\n+ * in the Software without restriction, including without limitation the rights\n+ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n+ * copies of the Software, and to permit persons to whom the Software is\n+ * furnished to do so, subject to the following conditions:\n+ *\n+ * 1. The above copyright notice and this permission notice shall be included in\n+ * all copies or substantial portions of the Software.\n+ *\n+ * 2. All copies of substantial portions of the Software may only be used in connection\n+ * with services provided by OneSignal.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+ * THE SOFTWARE.\n+ */\n+\n+package com.onesignal;\n+\n+class OSThrowable {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5cf725f24061e0c36d6824fc06439b50d121e48d"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODAyMjgxMQ==", "bodyText": "I assume we may want custom OS Exceptions in the future, so now we have a class to keep things separate an organized and easy to access. Do you have a better idea though? Def willing to change this", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1110#discussion_r468022811", "createdAt": "2020-08-10T16:17:20Z", "author": {"login": "mikechoch"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/OSThrowable.java", "diffHunk": "@@ -0,0 +1,37 @@\n+/**\n+ * Modified MIT License\n+ *\n+ * Copyright 2020 OneSignal\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy\n+ * of this software and associated documentation files (the \"Software\"), to deal\n+ * in the Software without restriction, including without limitation the rights\n+ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n+ * copies of the Software, and to permit persons to whom the Software is\n+ * furnished to do so, subject to the following conditions:\n+ *\n+ * 1. The above copyright notice and this permission notice shall be included in\n+ * all copies or substantial portions of the Software.\n+ *\n+ * 2. All copies of substantial portions of the Software may only be used in connection\n+ * with services provided by OneSignal.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+ * THE SOFTWARE.\n+ */\n+\n+package com.onesignal;\n+\n+class OSThrowable {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODAxMjk5NA=="}, "originalCommit": {"oid": "5cf725f24061e0c36d6824fc06439b50d121e48d"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODAzNjc4MA==", "bodyText": "Got it, yeah seems right, we can continue with this structure", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1110#discussion_r468036780", "createdAt": "2020-08-10T16:40:43Z", "author": {"login": "Jeasmine"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/OSThrowable.java", "diffHunk": "@@ -0,0 +1,37 @@\n+/**\n+ * Modified MIT License\n+ *\n+ * Copyright 2020 OneSignal\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy\n+ * of this software and associated documentation files (the \"Software\"), to deal\n+ * in the Software without restriction, including without limitation the rights\n+ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n+ * copies of the Software, and to permit persons to whom the Software is\n+ * furnished to do so, subject to the following conditions:\n+ *\n+ * 1. The above copyright notice and this permission notice shall be included in\n+ * all copies or substantial portions of the Software.\n+ *\n+ * 2. All copies of substantial portions of the Software may only be used in connection\n+ * with services provided by OneSignal.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+ * THE SOFTWARE.\n+ */\n+\n+package com.onesignal;\n+\n+class OSThrowable {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODAxMjk5NA=="}, "originalCommit": {"oid": "5cf725f24061e0c36d6824fc06439b50d121e48d"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyNDA2NjEyOnYy", "diffSide": "RIGHT", "path": "OneSignalSDK/unittest/src/test/java/com/onesignal/ShadowOSUtils.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNjowNTozN1rOG-VaCA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNjozMjo0NVrOG-Wadg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODAxNTYyNA==", "bodyText": "do we need this to be shadowed? shoudn't the test fail if it is running on the main thread? in that way we can fix it", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1110#discussion_r468015624", "createdAt": "2020-08-10T16:05:37Z", "author": {"login": "Jeasmine"}, "path": "OneSignalSDK/unittest/src/test/java/com/onesignal/ShadowOSUtils.java", "diffHunk": "@@ -7,9 +7,15 @@\n @Implements(OSUtils.class)\n public class ShadowOSUtils {\n \n+   public static boolean isRunningOnMainThread;\n+\n    public static String carrierName;\n    public static int subscribableStatus;\n \n+   public static boolean isRunningOnMainThread() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5cf725f24061e0c36d6824fc06439b50d121e48d"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODAyMzMyMQ==", "bodyText": "UnitTests always think we are on Main Thread and will fail due to the RuntimeException, so now we have a shadow so we can easily test when we want to assume Main Thread or not", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1110#discussion_r468023321", "createdAt": "2020-08-10T16:18:12Z", "author": {"login": "mikechoch"}, "path": "OneSignalSDK/unittest/src/test/java/com/onesignal/ShadowOSUtils.java", "diffHunk": "@@ -7,9 +7,15 @@\n @Implements(OSUtils.class)\n public class ShadowOSUtils {\n \n+   public static boolean isRunningOnMainThread;\n+\n    public static String carrierName;\n    public static int subscribableStatus;\n \n+   public static boolean isRunningOnMainThread() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODAxNTYyNA=="}, "originalCommit": {"oid": "5cf725f24061e0c36d6824fc06439b50d121e48d"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODAzMjExOA==", "bodyText": "yeah, but this shadow is being used in many places, so we are hiding tests that we actually want to check if it is not running on the main thread, josh pointed this on the ANR fix #1099 (comment)\nso if there are tests that are failing due to this runtime exception then we should make those tests don't run on the main thread", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1110#discussion_r468032118", "createdAt": "2020-08-10T16:32:45Z", "author": {"login": "Jeasmine"}, "path": "OneSignalSDK/unittest/src/test/java/com/onesignal/ShadowOSUtils.java", "diffHunk": "@@ -7,9 +7,15 @@\n @Implements(OSUtils.class)\n public class ShadowOSUtils {\n \n+   public static boolean isRunningOnMainThread;\n+\n    public static String carrierName;\n    public static int subscribableStatus;\n \n+   public static boolean isRunningOnMainThread() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODAxNTYyNA=="}, "originalCommit": {"oid": "5cf725f24061e0c36d6824fc06439b50d121e48d"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyNDY5NjM2OnYy", "diffSide": "RIGHT", "path": "OneSignalSDK/unittest/src/test/java/com/onesignal/ShadowOSUtils.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxOTowMTowMlrOG-bbRQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxOToxNjozNFrOG-b6vg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODExNDI0NQ==", "bodyText": "We would like to have new isRunningOnMainThread check fail in tests when it should, so we know if something broke when travisCI runs.\nAlso this line is dangerous as it will hide other future checks we add to other things.", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1110#discussion_r468114245", "createdAt": "2020-08-10T19:01:02Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/unittest/src/test/java/com/onesignal/ShadowOSUtils.java", "diffHunk": "@@ -72,14 +78,14 @@ public static void resetStatics() {\n       carrierName = \"test1\";\n       subscribableStatus = 1;\n \n+      isRunningOnMainThread = false;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5cf725f24061e0c36d6824fc06439b50d121e48d"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODEyMjMwMg==", "bodyText": "Which tests fail if we don't have this line?", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1110#discussion_r468122302", "createdAt": "2020-08-10T19:16:34Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/unittest/src/test/java/com/onesignal/ShadowOSUtils.java", "diffHunk": "@@ -72,14 +78,14 @@ public static void resetStatics() {\n       carrierName = \"test1\";\n       subscribableStatus = 1;\n \n+      isRunningOnMainThread = false;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODExNDI0NQ=="}, "originalCommit": {"oid": "5cf725f24061e0c36d6824fc06439b50d121e48d"}, "originalPosition": 20}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2109, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}