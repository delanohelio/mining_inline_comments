{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk0MzUwNDA4", "number": 1168, "title": "Null exception setting email", "bodyText": "RemoteParams null validation was added once again, also a state for the dialog to be closed when the Set Email task is scheduled.\n\nThis change is\u2002", "createdAt": "2020-09-28T19:20:22Z", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1168", "merged": true, "mergeCommit": {"oid": "c262a7ceb33b89662b7b8bc45832987bfc5a803b"}, "closed": true, "closedAt": "2020-10-02T20:31:45Z", "author": {"login": "andrespelaezp"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdMagxLgH2gAyNDk0MzUwNDA4OjY0MWFkMTFhNDkyMmFhMWMzYzVhODc4YmIwMDIwZDExZmQ5NGRhYTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdOrhRVAFqTUwMTQwODkxNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "641ad11a4922aa1c3c5a878bb0020d11fd94daa5", "author": {"user": {"login": "andrespelaezp", "name": "Andr\u00e9s Pel\u00e1ez"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/641ad11a4922aa1c3c5a878bb0020d11fd94daa5", "committedDate": "2020-09-25T18:57:39Z", "message": "Add callback when email task gets queued"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "14e88b17c8cab15dc53d0a905ef0cf7cf2d06233", "author": {"user": {"login": "andrespelaezp", "name": "Andr\u00e9s Pel\u00e1ez"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/14e88b17c8cab15dc53d0a905ef0cf7cf2d06233", "committedDate": "2020-09-25T19:50:13Z", "message": "Fixed EmailUpdateHandler test case"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3ODI3ODIz", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1168#pullrequestreview-497827823", "createdAt": "2020-09-28T19:22:28Z", "commit": {"oid": "14e88b17c8cab15dc53d0a905ef0cf7cf2d06233"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxOToyMjoyOFrOHZMYZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxOToyMjoyOFrOHZMYZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjE3OTMwMw==", "bodyText": "remote params shouldn't be null at this point, because of the shouldQueueTaskForInit check. Why is it needed?", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1168#discussion_r496179303", "createdAt": "2020-09-28T19:22:28Z", "author": {"login": "Jeasmine"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/OneSignal.java", "diffHunk": "@@ -1319,7 +1322,7 @@ public void run() {\n          return;\n       }\n \n-      if (getRemoteParams().useEmailAuth && emailAuthHash == null) {\n+      if (getRemoteParams() != null && getRemoteParams().useEmailAuth && emailAuthHash == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "14e88b17c8cab15dc53d0a905ef0cf7cf2d06233"}, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "60830c060ab4acacc398ae459185f12a6954588e", "author": {"user": {"login": "andrespelaezp", "name": "Andr\u00e9s Pel\u00e1ez"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/60830c060ab4acacc398ae459185f12a6954588e", "committedDate": "2020-09-28T20:22:03Z", "message": "Added return statement inside setEmail shouldQueueTaskForInit"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk4NjYxNTg1", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1168#pullrequestreview-498661585", "createdAt": "2020-09-29T16:16:51Z", "commit": {"oid": "60830c060ab4acacc398ae459185f12a6954588e"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk5NzQxNzcw", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1168#pullrequestreview-499741770", "createdAt": "2020-09-30T19:23:10Z", "commit": {"oid": "60830c060ab4acacc398ae459185f12a6954588e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxOToyMzoxMFrOHasBLg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxOToyNjoxN1rOHasH8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Nzc0NjIyMg==", "bodyText": "I don't think we should change / add new APIs to address this bug fix PR. However I am open to a proposal on a new API to best handle this scenario for all our methods for consistency.\nJust some feedback on the API itself though, I would expect a return value from setEmail instead of a callback that it has been queued.", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1168#discussion_r497746222", "createdAt": "2020-09-30T19:23:10Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/OneSignal.java", "diffHunk": "@@ -1299,13 +1300,16 @@ public static void setEmail(@NonNull final String email, @Nullable final String\n       if (taskController.shouldQueueTaskForInit(OSTaskController.SET_EMAIL)) {\n          logger.error(\"Waiting for remote params. \" +\n                  \"Moving \" + OSTaskController.SET_EMAIL + \" operation to a pending task queue.\");\n+         if (callback != null)\n+            callback.onTaskQueued();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "60830c060ab4acacc398ae459185f12a6954588e"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Nzc0Nzk1Mg==", "bodyText": "This is redundant code, the shouldQueueTaskForInit check and the return added above would cover this so I think we should remove the null check that was added in this PR.", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1168#discussion_r497747952", "createdAt": "2020-09-30T19:26:17Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/OneSignal.java", "diffHunk": "@@ -1319,7 +1322,7 @@ public void run() {\n          return;\n       }\n \n-      if (getRemoteParams().useEmailAuth && emailAuthHash == null) {\n+      if (getRemoteParams() != null && getRemoteParams().useEmailAuth && emailAuthHash == null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjE3OTMwMw=="}, "originalCommit": {"oid": "14e88b17c8cab15dc53d0a905ef0cf7cf2d06233"}, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ee6b4632c0cb8bced1d180dbf8221ec582a1f61", "author": {"user": {"login": "andrespelaezp", "name": "Andr\u00e9s Pel\u00e1ez"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/8ee6b4632c0cb8bced1d180dbf8221ec582a1f61", "committedDate": "2020-10-01T13:39:30Z", "message": "Removed callback for email task queued"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1c9f8409c4c4429b7782b37cb7a3f2172135dd1d", "author": {"user": {"login": "andrespelaezp", "name": "Andr\u00e9s Pel\u00e1ez"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/1c9f8409c4c4429b7782b37cb7a3f2172135dd1d", "committedDate": "2020-10-01T16:22:37Z", "message": "Removed callback for email task queued"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwNzMyNTIz", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1168#pullrequestreview-500732523", "createdAt": "2020-10-01T21:30:40Z", "commit": {"oid": "1c9f8409c4c4429b7782b37cb7a3f2172135dd1d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQyMTozMDo0MFrOHbbcAw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQyMTozMToxN1rOHbbc7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUyMzEzOQ==", "bodyText": "This also needs to be removed", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1168#discussion_r498523139", "createdAt": "2020-10-01T21:30:40Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/unittest/src/test/java/com/test/onesignal/MainOneSignalClassRunner.java", "diffHunk": "@@ -1637,6 +1637,11 @@ public void onSuccess() {\n       public void onFailure(OneSignal.EmailUpdateError error) {\n          emailFiredFailure = error;\n       }\n+\n+      @Override", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1c9f8409c4c4429b7782b37cb7a3f2172135dd1d"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUyMzM3Mg==", "bodyText": "TravisCI is failing due to a Java compile error due to this interface method no longer existing.", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1168#discussion_r498523372", "createdAt": "2020-10-01T21:31:17Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/unittest/src/test/java/com/test/onesignal/MainOneSignalClassRunner.java", "diffHunk": "@@ -1637,6 +1637,11 @@ public void onSuccess() {\n       public void onFailure(OneSignal.EmailUpdateError error) {\n          emailFiredFailure = error;\n       }\n+\n+      @Override", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1c9f8409c4c4429b7782b37cb7a3f2172135dd1d"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3140f79c2f182737ca581b5ee456dcbf9a0525a5", "author": {"user": {"login": "andrespelaezp", "name": "Andr\u00e9s Pel\u00e1ez"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/3140f79c2f182737ca581b5ee456dcbf9a0525a5", "committedDate": "2020-10-02T18:13:55Z", "message": "Removed email task callback from MainOneSignalClassRunner"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxNDA4OTE1", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1168#pullrequestreview-501408915", "createdAt": "2020-10-02T19:54:26Z", "commit": {"oid": "3140f79c2f182737ca581b5ee456dcbf9a0525a5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3443, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}