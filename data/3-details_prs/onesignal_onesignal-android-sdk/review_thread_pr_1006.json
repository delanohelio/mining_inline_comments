{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE0MjUxNzUy", "number": 1006, "reviewThreads": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxODo0Njo0NlrOD58vFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQyMTowODo1OFrOD7Z7sw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYyMDkwNTE4OnYy", "diffSide": "RIGHT", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/OSInAppMessageController.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxODo0Njo0NlrOGRgqjg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxODo0Njo0NlrOGRgqjg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTAxNDE1OA==", "bodyText": "Lets rename this, we have the word Alert thrown all over our code and this is technically an AlertDialog\nI was thinking something along the lines of:\nshowInfoAlertDialog or\nshowAlertDialogMessage", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1006#discussion_r421014158", "createdAt": "2020-05-06T18:46:46Z", "author": {"login": "mikechoch"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/OSInAppMessageController.java", "diffHunk": "@@ -323,18 +323,35 @@ private void showMultiplePrompts(final OSInAppMessage message, final List<OSInAp\n             currentPrompt.setPrompted(true);\n             currentPrompt.handlePrompt(new OneSignal.OSPromptActionCompletionCallback() {\n                 @Override\n-                public void completed(boolean accepted) {\n+                public void completed(@Nullable String messageTitle, @Nullable String message, boolean accepted) {\n                     currentPrompt = null;\n                     OneSignal.onesignalLog(OneSignal.LOG_LEVEL.DEBUG, \"IAM prompt to handle finished accepted: \" + accepted);\n-                    showMultiplePrompts(message, prompts);\n+\n+                    // On preview mode we show informative alert dialogs\n+                    if (inAppMessage.isPreview && messageTitle!= null && message != null)\n+                        showInformativeAlert(messageTitle, message, inAppMessage, prompts);\n+                    else\n+                        showMultiplePrompts(inAppMessage, prompts);\n                 }\n             });\n         } else {\n-            OneSignal.onesignalLog(OneSignal.LOG_LEVEL.DEBUG, \"No IAM prompt to handle, dismiss message: \" + message.messageId);\n-            messageWasDismissed(message);\n+            OneSignal.onesignalLog(OneSignal.LOG_LEVEL.DEBUG, \"No IAM prompt to handle, dismiss message: \" + inAppMessage.messageId);\n+            messageWasDismissed(inAppMessage);\n         }\n     }\n \n+    private void showInformativeAlert(final String messageTitle, final String message, final OSInAppMessage inAppMessage, final List<OSInAppMessagePrompt> prompts) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9a73f4b38d898413cf5098caba5430cb9f2db512"}, "originalPosition": 51}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYyMDk0NTM5OnYy", "diffSide": "RIGHT", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/OSInAppMessageController.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxODo1NzoxOVrOGRhDqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxODo1NzoxOVrOGRhDqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTAyMDU4NA==", "bodyText": "Add a space here messageTitle!= null\nmessageTitle != null", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1006#discussion_r421020584", "createdAt": "2020-05-06T18:57:19Z", "author": {"login": "mikechoch"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/OSInAppMessageController.java", "diffHunk": "@@ -323,18 +323,35 @@ private void showMultiplePrompts(final OSInAppMessage message, final List<OSInAp\n             currentPrompt.setPrompted(true);\n             currentPrompt.handlePrompt(new OneSignal.OSPromptActionCompletionCallback() {\n                 @Override\n-                public void completed(boolean accepted) {\n+                public void completed(@Nullable String messageTitle, @Nullable String message, boolean accepted) {\n                     currentPrompt = null;\n                     OneSignal.onesignalLog(OneSignal.LOG_LEVEL.DEBUG, \"IAM prompt to handle finished accepted: \" + accepted);\n-                    showMultiplePrompts(message, prompts);\n+\n+                    // On preview mode we show informative alert dialogs\n+                    if (inAppMessage.isPreview && messageTitle!= null && message != null)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9a73f4b38d898413cf5098caba5430cb9f2db512"}, "originalPosition": 37}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYyMDk4NjQ4OnYy", "diffSide": "RIGHT", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/LocationGMS.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxOTowODo0NVrOGRhd8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxOTowODo0NVrOGRhd8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTAyNzMxNQ==", "bodyText": "Add a space to this promptLocation,false,\npromptLocation, false,", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1006#discussion_r421027315", "createdAt": "2020-05-06T19:08:45Z", "author": {"login": "mikechoch"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/LocationGMS.java", "diffHunk": "@@ -189,7 +194,7 @@ static void getLocation(Context context, boolean promptLocation, LocationHandler\n \n       if (android.os.Build.VERSION.SDK_INT < Build.VERSION_CODES.M) {\n          if (locationFinePermission != PackageManager.PERMISSION_GRANTED && locationCoarsePermission != PackageManager.PERMISSION_GRANTED) {\n-            sendAndClearPromptHandlers(promptLocation,false);\n+            sendAndClearPromptHandlers(promptLocation,false, context.getString(R.string.location_not_available_title), context.getString(R.string.location_not_available_message));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9a73f4b38d898413cf5098caba5430cb9f2db512"}, "originalPosition": 42}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYyMDk5NjYxOnYy", "diffSide": "RIGHT", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/LocationGMS.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxOToxMTozNVrOGRhkmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxOToxMTozNVrOGRhkmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTAyOTAxNg==", "bodyText": "String alertDialogTitle = context.getString(R.string.location_not_available_title);\nString alertDialogMessage = context.getString(R.string. location_not_available_message);\n\nPass these into both usages of\nsendAndClearPromptHandlers(promptLocation, false, alertDialogTitle, alertDialogMessage);", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1006#discussion_r421029016", "createdAt": "2020-05-06T19:11:35Z", "author": {"login": "mikechoch"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/LocationGMS.java", "diffHunk": "@@ -189,7 +194,7 @@ static void getLocation(Context context, boolean promptLocation, LocationHandler\n ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9a73f4b38d898413cf5098caba5430cb9f2db512"}, "originalPosition": 38}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYyNTk2OTIzOnYy", "diffSide": "RIGHT", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/LocationGMS.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QyMTo0NDo1OVrOGSRaTw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QyMTo0NToyNVrOGSRbQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgxMjgxNQ==", "bodyText": "You use these Strings in two places just move them up top outside of the first if statement", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1006#discussion_r421812815", "createdAt": "2020-05-07T21:44:59Z", "author": {"login": "mikechoch"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/LocationGMS.java", "diffHunk": "@@ -223,11 +231,13 @@ else if (permissionList.contains(\"android.permission.ACCESS_COARSE_LOCATION\")) {\n                   sendAndClearPromptHandlers(promptLocation, true);\n                   startGetLocation();\n                } else {\n-                  sendAndClearPromptHandlers(promptLocation, false);\n+                  String alertDialogTitle = context.getString(R.string.location_not_available_title);\n+                  String alertDialogMessage = context.getString(R.string. location_not_available_message);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c245744613a4af21e3a2d77c060ee744463fd69"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgxMzA1OA==", "bodyText": "Remove space R.string. location_not_available_message);\nR.string.location_not_available_message);", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1006#discussion_r421813058", "createdAt": "2020-05-07T21:45:25Z", "author": {"login": "mikechoch"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/LocationGMS.java", "diffHunk": "@@ -223,11 +231,13 @@ else if (permissionList.contains(\"android.permission.ACCESS_COARSE_LOCATION\")) {\n                   sendAndClearPromptHandlers(promptLocation, true);\n                   startGetLocation();\n                } else {\n-                  sendAndClearPromptHandlers(promptLocation, false);\n+                  String alertDialogTitle = context.getString(R.string.location_not_available_title);\n+                  String alertDialogMessage = context.getString(R.string. location_not_available_message);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgxMjgxNQ=="}, "originalCommit": {"oid": "8c245744613a4af21e3a2d77c060ee744463fd69"}, "originalPosition": 55}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzNjA1NzI0OnYy", "diffSide": "RIGHT", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/LocationGMS.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQyMDozMjoyMlrOGTsSoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQyMToyMTo0NlrOGTt26g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzMwMTc5Mg==", "bodyText": "Instead of getting these string from the code get the location points I believe it should be put where the alert will be displayed. Since the string is more of a presentation layer.\nThis will also clean up a lot of unnecessary passing around of these values", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1006#discussion_r423301792", "createdAt": "2020-05-11T20:32:22Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/LocationGMS.java", "diffHunk": "@@ -187,9 +192,13 @@ static void getLocation(Context context, boolean promptLocation, LocationHandler\n          locationCoarse = true;\n       }\n \n+      String alertDialogTitle = context.getString(R.string.location_not_available_title);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53e0d92238ee55215e1871e9bd367b7f53701c29"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzMyNzQ2Ng==", "bodyText": "ok, agree with this!", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1006#discussion_r423327466", "createdAt": "2020-05-11T21:21:46Z", "author": {"login": "Jeasmine"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/LocationGMS.java", "diffHunk": "@@ -187,9 +192,13 @@ static void getLocation(Context context, boolean promptLocation, LocationHandler\n          locationCoarse = true;\n       }\n \n+      String alertDialogTitle = context.getString(R.string.location_not_available_title);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzMwMTc5Mg=="}, "originalCommit": {"oid": "53e0d92238ee55215e1871e9bd367b7f53701c29"}, "originalPosition": 41}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzNjA4NDY5OnYy", "diffSide": "RIGHT", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/LocationGMS.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQyMDo0MDo1OFrOGTsj_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQyMTozNDo0MFrOGTuOYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzMwNjIzOQ==", "bodyText": "Out of scope of this PR since it was here before this one, but I don't what onAnswered covers that isn't already by complete instead?\nMaybe the differences aren't clear to me based on the name alone.", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1006#discussion_r423306239", "createdAt": "2020-05-11T20:40:58Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/LocationGMS.java", "diffHunk": "@@ -87,7 +88,7 @@\n    }\n \n    abstract static class LocationPromptCompletionHandler implements LocationHandler {\n-      void onAnswered(boolean accepted) {}\n+      void onAnswered(@Nullable String messageTitle, @Nullable String message, boolean accepted) {}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53e0d92238ee55215e1871e9bd367b7f53701c29"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzMzMzQ3NQ==", "bodyText": "onComplete handles to many flows, for prompting we only want to know what the user answered to the prompt, or if the permissions were already granted, we don't care about the location perse.", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1006#discussion_r423333475", "createdAt": "2020-05-11T21:34:40Z", "author": {"login": "Jeasmine"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/LocationGMS.java", "diffHunk": "@@ -87,7 +88,7 @@\n    }\n \n    abstract static class LocationPromptCompletionHandler implements LocationHandler {\n-      void onAnswered(boolean accepted) {}\n+      void onAnswered(@Nullable String messageTitle, @Nullable String message, boolean accepted) {}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzMwNjIzOQ=="}, "originalCommit": {"oid": "53e0d92238ee55215e1871e9bd367b7f53701c29"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzNjE2MDg5OnYy", "diffSide": "RIGHT", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/LocationGMS.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQyMTowNDoyMFrOGTtUtw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQyMjowMTo0MFrOGTu83Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzMxODcxMQ==", "bodyText": "It isn't clear here by the code but it can only fall under this if block if permission were missing from the AndroidManifest.xml", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1006#discussion_r423318711", "createdAt": "2020-05-11T21:04:20Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/LocationGMS.java", "diffHunk": "@@ -187,9 +192,13 @@ static void getLocation(Context context, boolean promptLocation, LocationHandler\n          locationCoarse = true;\n       }\n \n+      String alertDialogTitle = context.getString(R.string.location_not_available_title);\n+      String alertDialogMessage = context.getString(R.string.location_not_available_message);\n+\n       if (android.os.Build.VERSION.SDK_INT < Build.VERSION_CODES.M) {\n          if (locationFinePermission != PackageManager.PERMISSION_GRANTED && locationCoarsePermission != PackageManager.PERMISSION_GRANTED) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53e0d92238ee55215e1871e9bd367b7f53701c29"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzMyOTQ4Nw==", "bodyText": "This flow is added because the user might forget to add the permissions on Manifest, and location prompting will not work, because of that. So we are only showing this alert when the user is prompting from a preview.", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1006#discussion_r423329487", "createdAt": "2020-05-11T21:25:59Z", "author": {"login": "Jeasmine"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/LocationGMS.java", "diffHunk": "@@ -187,9 +192,13 @@ static void getLocation(Context context, boolean promptLocation, LocationHandler\n          locationCoarse = true;\n       }\n \n+      String alertDialogTitle = context.getString(R.string.location_not_available_title);\n+      String alertDialogMessage = context.getString(R.string.location_not_available_message);\n+\n       if (android.os.Build.VERSION.SDK_INT < Build.VERSION_CODES.M) {\n          if (locationFinePermission != PackageManager.PERMISSION_GRANTED && locationCoarsePermission != PackageManager.PERMISSION_GRANTED) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzMxODcxMQ=="}, "originalCommit": {"oid": "53e0d92238ee55215e1871e9bd367b7f53701c29"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzMzNzg3Mg==", "bodyText": "Sorry didn't finish my thought here. That isn't clear so we should add a comment.\nThe code originally should have had a comment about that for now it seems it needs it even more.", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1006#discussion_r423337872", "createdAt": "2020-05-11T21:44:34Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/LocationGMS.java", "diffHunk": "@@ -187,9 +192,13 @@ static void getLocation(Context context, boolean promptLocation, LocationHandler\n          locationCoarse = true;\n       }\n \n+      String alertDialogTitle = context.getString(R.string.location_not_available_title);\n+      String alertDialogMessage = context.getString(R.string.location_not_available_message);\n+\n       if (android.os.Build.VERSION.SDK_INT < Build.VERSION_CODES.M) {\n          if (locationFinePermission != PackageManager.PERMISSION_GRANTED && locationCoarsePermission != PackageManager.PERMISSION_GRANTED) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzMxODcxMQ=="}, "originalCommit": {"oid": "53e0d92238ee55215e1871e9bd367b7f53701c29"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzM0NTM3Mw==", "bodyText": "Let me know if the changes make sense, in order to make it on iOS", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1006#discussion_r423345373", "createdAt": "2020-05-11T22:01:40Z", "author": {"login": "Jeasmine"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/LocationGMS.java", "diffHunk": "@@ -187,9 +192,13 @@ static void getLocation(Context context, boolean promptLocation, LocationHandler\n          locationCoarse = true;\n       }\n \n+      String alertDialogTitle = context.getString(R.string.location_not_available_title);\n+      String alertDialogMessage = context.getString(R.string.location_not_available_message);\n+\n       if (android.os.Build.VERSION.SDK_INT < Build.VERSION_CODES.M) {\n          if (locationFinePermission != PackageManager.PERMISSION_GRANTED && locationCoarsePermission != PackageManager.PERMISSION_GRANTED) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzMxODcxMQ=="}, "originalCommit": {"oid": "53e0d92238ee55215e1871e9bd367b7f53701c29"}, "originalPosition": 45}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzNjE3MDQ0OnYy", "diffSide": "RIGHT", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/LocationGMS.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQyMTowNzozOVrOGTtbKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQyMToyNjoxMFrOGTt_EA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzMyMDM2MQ==", "bodyText": "Careful, we don't want to display a message if the only issue was the user denied location permission.", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1006#discussion_r423320361", "createdAt": "2020-05-11T21:07:39Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/LocationGMS.java", "diffHunk": "@@ -223,11 +232,11 @@ else if (permissionList.contains(\"android.permission.ACCESS_COARSE_LOCATION\")) {\n                   sendAndClearPromptHandlers(promptLocation, true);\n                   startGetLocation();\n                } else {\n-                  sendAndClearPromptHandlers(promptLocation, false);\n+                  sendAndClearPromptHandlers(promptLocation, false, alertDialogTitle, alertDialogMessage);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53e0d92238ee55215e1871e9bd367b7f53701c29"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzMyOTU1Mg==", "bodyText": "good catch!", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1006#discussion_r423329552", "createdAt": "2020-05-11T21:26:10Z", "author": {"login": "Jeasmine"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/LocationGMS.java", "diffHunk": "@@ -223,11 +232,11 @@ else if (permissionList.contains(\"android.permission.ACCESS_COARSE_LOCATION\")) {\n                   sendAndClearPromptHandlers(promptLocation, true);\n                   startGetLocation();\n                } else {\n-                  sendAndClearPromptHandlers(promptLocation, false);\n+                  sendAndClearPromptHandlers(promptLocation, false, alertDialogTitle, alertDialogMessage);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzMyMDM2MQ=="}, "originalCommit": {"oid": "53e0d92238ee55215e1871e9bd367b7f53701c29"}, "originalPosition": 57}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzNjE3NDU5OnYy", "diffSide": "RIGHT", "path": "OneSignalSDK/onesignal/src/main/res/values/strings.xml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQyMTowODo1OFrOGTtdzA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQyMToyNzo0OVrOGTuB8Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzMyMTAzNg==", "bodyText": "Granted isn't correct. Permission isn't present what we want. We don't want to show any message if the permission was simply declined.", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1006#discussion_r423321036", "createdAt": "2020-05-11T21:08:58Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/onesignal/src/main/res/values/strings.xml", "diffHunk": "@@ -0,0 +1,7 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+<resources>\n+\n+    <string name=\"location_not_available_title\">Location Not Available</string>\n+    <string name=\"location_not_available_message\">Looks like this app doesn\\'t have location permissions granted</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53e0d92238ee55215e1871e9bd367b7f53701c29"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzMzMDI4OQ==", "bodyText": "Good catch, this string should be the one that is on the screenshot, that one is the one that Lee defined", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1006#discussion_r423330289", "createdAt": "2020-05-11T21:27:49Z", "author": {"login": "Jeasmine"}, "path": "OneSignalSDK/onesignal/src/main/res/values/strings.xml", "diffHunk": "@@ -0,0 +1,7 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+<resources>\n+\n+    <string name=\"location_not_available_title\">Location Not Available</string>\n+    <string name=\"location_not_available_message\">Looks like this app doesn\\'t have location permissions granted</string>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzMyMTAzNg=="}, "originalCommit": {"oid": "53e0d92238ee55215e1871e9bd367b7f53701c29"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2236, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}