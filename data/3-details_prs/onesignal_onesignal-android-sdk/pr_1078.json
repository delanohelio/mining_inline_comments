{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQwMjk5NjQ3", "number": 1078, "title": "Added HMS integration to dev app", "bodyText": "This change is\u2002", "createdAt": "2020-06-25T23:05:44Z", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1078", "merged": true, "mergeCommit": {"oid": "37c3a42516c7b9eac912331ce60ab274f06829ca"}, "closed": true, "closedAt": "2021-08-05T18:14:47Z", "author": {"login": "jkasten2"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABczRB_lgFqTQ0NTc0NTMzNA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABevPAe-AFqTcxODQ2MTA2Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1NzQ1MzM0", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1078#pullrequestreview-445745334", "createdAt": "2020-07-09T15:46:32Z", "commit": {"oid": "a82b3b14bd9100121889e4d8788e29994b9cac0e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxNTo0NjozMlrOGvXLsg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxNTo0NjozMlrOGvXLsg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjMxNjA4Mg==", "bodyText": "Should we also add in the location dependency?\nimplementation 'com.huawei.hms:location:X.X.X.X'", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1078#discussion_r452316082", "createdAt": "2020-07-09T15:46:32Z", "author": {"login": "mikechoch"}, "path": "OneSignalSDK/app/build.gradle", "diffHunk": "@@ -68,6 +68,8 @@ dependencies {\n \n     // For Chrome tabs\n     implementation 'com.android.support:customtabs:28.0.0'\n+\n+    implementation 'com.huawei.hms:push:4.0.3.301'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a82b3b14bd9100121889e4d8788e29994b9cac0e"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a82b3b14bd9100121889e4d8788e29994b9cac0e", "author": {"user": {"login": "jkasten2", "name": "Josh Kasten"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/a82b3b14bd9100121889e4d8788e29994b9cac0e", "committedDate": "2020-06-25T23:05:18Z", "message": "Added HMS intergration to dev app"}, "afterCommit": {"oid": "bef94f6d832d297e9cf9d62adc5e0094d256aafc", "author": {"user": {"login": "jkasten2", "name": "Josh Kasten"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/bef94f6d832d297e9cf9d62adc5e0094d256aafc", "committedDate": "2020-07-31T00:21:13Z", "message": "Added HMS intergration to dev app"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwMjY5MTQy", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1078#pullrequestreview-460269142", "createdAt": "2020-08-03T19:00:44Z", "commit": {"oid": "bef94f6d832d297e9cf9d62adc5e0094d256aafc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxOTowMDo0NFrOG7FNag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxOTowMDo0NFrOG7FNag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDYwNDUyMg==", "bodyText": "is ok to be error lvl log?", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1078#discussion_r464604522", "createdAt": "2020-08-03T19:00:44Z", "author": {"login": "Jeasmine"}, "path": "OneSignalSDK/app/src/main/java/com/onesignal/example/HmsMessageServiceAppLevel.java", "diffHunk": "@@ -0,0 +1,50 @@\n+package com.onesignal.example;\r\n+\r\n+import android.util.Log;\r\n+\r\n+import com.huawei.hms.push.HmsMessageService;\r\n+import com.huawei.hms.push.RemoteMessage;\r\n+import com.onesignal.OneSignalHmsEventBridge;\r\n+\r\n+public class HmsMessageServiceAppLevel extends HmsMessageService {\r\n+\r\n+    /**\r\n+     * When an app calls the getToken method to apply for a token from the server,\r\n+     * if the server does not return the token during current method calling, the server can return the token through this method later.\r\n+     * This method callback must be completed in 10 seconds. Otherwise, you need to start a new Job for callback processing.\r\n+     * @param token token\r\n+     */\r\n+    @Override\r\n+    public void onNewToken(String token) {\r\n+        Log.e(\"HMS\", \"onNewToken refresh token:\" + token);\r\n+\r\n+        // Forward event on to OneSignal SDK\r\n+        OneSignalHmsEventBridge.onNewToken(this, token);\r\n+    }\r\n+\r\n+    /**\r\n+     * This method is called in the following cases:\r\n+     *   1. \"Data messages\" - App process is alive when received.\r\n+     *   2. \"Notification Message\" - foreground_show = false and app is in focus\r\n+     * This method callback must be completed in 10 seconds. Start a new Job if more time is needed.\r\n+     *\r\n+     * @param message RemoteMessage\r\n+     */\r\n+    @Override\r\n+    public void onMessageReceived(RemoteMessage message) {\r\n+        Log.e(\"HMS\", \"onMessageReceived: \" + message);\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bef94f6d832d297e9cf9d62adc5e0094d256aafc"}, "originalPosition": 35}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "871c1e73374886cb0aab934675333297053239e2", "author": {"user": {"login": "jkasten2", "name": "Josh Kasten"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/871c1e73374886cb0aab934675333297053239e2", "committedDate": "2021-07-15T23:12:07Z", "message": "Added HMS intergration to dev app"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d25ccf4620d6199031349e57f515f573609358f9", "author": {"user": {"login": "Jeasmine", "name": "JNahui"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/d25ccf4620d6199031349e57f515f573609358f9", "committedDate": "2021-07-15T23:34:52Z", "message": "Update HMS demo app to major release"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bef94f6d832d297e9cf9d62adc5e0094d256aafc", "author": {"user": {"login": "jkasten2", "name": "Josh Kasten"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/bef94f6d832d297e9cf9d62adc5e0094d256aafc", "committedDate": "2020-07-31T00:21:13Z", "message": "Added HMS intergration to dev app"}, "afterCommit": {"oid": "6cf49ba737d9084fb7785d813d5487f9e63a7055", "author": {"user": {"login": "Jeasmine", "name": "JNahui"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/6cf49ba737d9084fb7785d813d5487f9e63a7055", "committedDate": "2021-07-16T01:10:07Z", "message": "Add flavors for Huawei and GMS\n\n* Set enviroment for Huawei devices testing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "28f1ced6238dd7e707f38985a8b7ebd72d5eac1b", "author": {"user": {"login": "Jeasmine", "name": "JNahui"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/28f1ced6238dd7e707f38985a8b7ebd72d5eac1b", "committedDate": "2021-07-16T01:15:26Z", "message": "Add flavors for Huawei and GMS\n\n* Set enviroment for Huawei devices testing"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6cf49ba737d9084fb7785d813d5487f9e63a7055", "author": {"user": {"login": "Jeasmine", "name": "JNahui"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/6cf49ba737d9084fb7785d813d5487f9e63a7055", "committedDate": "2021-07-16T01:10:07Z", "message": "Add flavors for Huawei and GMS\n\n* Set enviroment for Huawei devices testing"}, "afterCommit": {"oid": "28f1ced6238dd7e707f38985a8b7ebd72d5eac1b", "author": {"user": {"login": "Jeasmine", "name": "JNahui"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/28f1ced6238dd7e707f38985a8b7ebd72d5eac1b", "committedDate": "2021-07-16T01:15:26Z", "message": "Add flavors for Huawei and GMS\n\n* Set enviroment for Huawei devices testing"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NzE4NDYxMDYy", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1078#pullrequestreview-718461062", "createdAt": "2021-07-29T19:31:56Z", "commit": {"oid": "28f1ced6238dd7e707f38985a8b7ebd72d5eac1b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3625, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}