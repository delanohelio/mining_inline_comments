{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc1NjQ0OTk4", "number": 1127, "title": "Make OSTimeoutHandler be a HandlerThread", "bodyText": "Workers dependens on the device cores to have a pool of threads available.\nLoopers handling are hard to debug, and maintain\nMake a Handler Thread available for post delays runnables\nMake OSTimeoutHandler available betweeen jobs\n\n\n\nThis change is\u2002", "createdAt": "2020-08-28T21:17:04Z", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1127", "merged": true, "mergeCommit": {"oid": "233a0accf1556880598eca16636f344b5d7d4f9a"}, "closed": true, "closedAt": "2020-09-01T17:15:12Z", "author": {"login": "Jeasmine"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdDbvUoABqjM3MDU2NjU1NTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdEZTxGgFqTQ3ODk1MjQzNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "58ae8a876d8d5d90254ee388350b6d0606e6b071", "author": {"user": {"login": "Jeasmine", "name": "JNahui"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/58ae8a876d8d5d90254ee388350b6d0606e6b071", "committedDate": "2020-08-28T21:07:41Z", "message": "Make OSTimeoutHandler be a HandlerThread\n\n  * Workers dependens on the device cores to have a pool of threads available.\n  * Loopers handling are hard to debug, and maintain\n  * Make a Handler Thread available for post delays runnables\n  * Make OSTimeoutHandler available betweeen jobs"}, "afterCommit": {"oid": "aef7c2ffabed715f67f9fc03ee646cfa32c88985", "author": {"user": {"login": "Jeasmine", "name": "JNahui"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/aef7c2ffabed715f67f9fc03ee646cfa32c88985", "committedDate": "2020-08-28T21:17:58Z", "message": "Make OSTimeoutHandler be a HandlerThread\n\n  * Workers dependens on the device cores to have a pool of threads available.\n  * Loopers handling are hard to debug, and maintain\n  * Make a Handler Thread available for post delays runnables\n  * Make OSTimeoutHandler available betweeen jobs"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "aef7c2ffabed715f67f9fc03ee646cfa32c88985", "author": {"user": {"login": "Jeasmine", "name": "JNahui"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/aef7c2ffabed715f67f9fc03ee646cfa32c88985", "committedDate": "2020-08-28T21:17:58Z", "message": "Make OSTimeoutHandler be a HandlerThread\n\n  * Workers dependens on the device cores to have a pool of threads available.\n  * Loopers handling are hard to debug, and maintain\n  * Make a Handler Thread available for post delays runnables\n  * Make OSTimeoutHandler available betweeen jobs"}, "afterCommit": {"oid": "e74c4f71932fb2076c94788f01befa582ecd34cb", "author": {"user": {"login": "Jeasmine", "name": "JNahui"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/e74c4f71932fb2076c94788f01befa582ecd34cb", "committedDate": "2020-08-28T21:34:38Z", "message": "Make OSTimeoutHandler be a HandlerThread\n\n  * Workers dependens on the device cores to have a pool of threads available.\n  * Loopers handling are hard to debug, and maintain\n  * Make a Handler Thread available for post delays runnables\n  * Make OSTimeoutHandler available betweeen jobs"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e74c4f71932fb2076c94788f01befa582ecd34cb", "author": {"user": {"login": "Jeasmine", "name": "JNahui"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/e74c4f71932fb2076c94788f01befa582ecd34cb", "committedDate": "2020-08-28T21:34:38Z", "message": "Make OSTimeoutHandler be a HandlerThread\n\n  * Workers dependens on the device cores to have a pool of threads available.\n  * Loopers handling are hard to debug, and maintain\n  * Make a Handler Thread available for post delays runnables\n  * Make OSTimeoutHandler available betweeen jobs"}, "afterCommit": {"oid": "065afc6d43709c94d13076411a7752c7a360d85d", "author": {"user": {"login": "Jeasmine", "name": "JNahui"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/065afc6d43709c94d13076411a7752c7a360d85d", "committedDate": "2020-08-28T21:35:38Z", "message": "Make OSTimeoutHandler be a HandlerThread\n\n  * Workers dependens on the device cores to have a pool of threads available.\n  * Loopers handling are hard to debug, and maintain\n  * Make a Handler Thread available for post delays runnables\n  * Make OSTimeoutHandler available betweeen jobs"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "065afc6d43709c94d13076411a7752c7a360d85d", "author": {"user": {"login": "Jeasmine", "name": "JNahui"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/065afc6d43709c94d13076411a7752c7a360d85d", "committedDate": "2020-08-28T21:35:38Z", "message": "Make OSTimeoutHandler be a HandlerThread\n\n  * Workers dependens on the device cores to have a pool of threads available.\n  * Loopers handling are hard to debug, and maintain\n  * Make a Handler Thread available for post delays runnables\n  * Make OSTimeoutHandler available betweeen jobs"}, "afterCommit": {"oid": "905b7166cd2d85cb52cb698111baba5cb8f482e1", "author": {"user": {"login": "Jeasmine", "name": "JNahui"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/905b7166cd2d85cb52cb698111baba5cb8f482e1", "committedDate": "2020-08-28T21:50:49Z", "message": "Make OSTimeoutHandler be a HandlerThread\n\n  * Workers dependens on the device cores to have a pool of threads available.\n  * Loopers handling are hard to debug, and maintain\n  * Make a Handler Thread available for post delays runnables\n  * Make OSTimeoutHandler available betweeen jobs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4MTYxNDE2", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1127#pullrequestreview-478161416", "createdAt": "2020-08-29T23:55:49Z", "commit": {"oid": "905b7166cd2d85cb52cb698111baba5cb8f482e1"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOVQyMzo1NTo0OVrOHJesHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOVQyMzo1NTo0OVrOHJesHA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTcwMjA0NA==", "bodyText": "This test is now taking ~35 seconds to complete when it wasn't before.\nI investigated this a bit and it is due to the Thread.sleep in notificationWillShowInForeground in the\ncom.test.onesignal.GenerateNotificationRunner$NotificationExtensionService_workTimeLongerThanTimeout class never being interrupted.\nThe other app specific one notificationWillShowInForeground is being interrupted correctly however.", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1127#discussion_r479702044", "createdAt": "2020-08-29T23:55:49Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/unittest/src/test/java/com/test/onesignal/GenerateNotificationRunner.java", "diffHunk": "@@ -2121,6 +2125,7 @@ public void notificationWillShowInForeground(OSNotificationGenerationJob.ExtNoti\n    }\n \n    @Test\n+   @Config(shadows = { ShadowTimeoutHandler.class })\n    public void testNotificationWillShowInForegroundHandler_workTimeLongerThanTimeout() throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "905b7166cd2d85cb52cb698111baba5cb8f482e1"}, "originalPosition": 50}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee55428ec4539c55820c6489335262793bdcb7b6", "author": {"user": {"login": "Jeasmine", "name": "JNahui"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/ee55428ec4539c55820c6489335262793bdcb7b6", "committedDate": "2020-08-31T16:43:17Z", "message": "Make OSTimeoutHandler be a HandlerThread\n\n  * Workers dependens on the device cores to have a pool of threads available.\n  * Loopers handling are hard to debug, and maintain\n  * Make a Handler Thread available for post delays runnables\n  * Make OSTimeoutHandler available betweeen jobs"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "905b7166cd2d85cb52cb698111baba5cb8f482e1", "author": {"user": {"login": "Jeasmine", "name": "JNahui"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/905b7166cd2d85cb52cb698111baba5cb8f482e1", "committedDate": "2020-08-28T21:50:49Z", "message": "Make OSTimeoutHandler be a HandlerThread\n\n  * Workers dependens on the device cores to have a pool of threads available.\n  * Loopers handling are hard to debug, and maintain\n  * Make a Handler Thread available for post delays runnables\n  * Make OSTimeoutHandler available betweeen jobs"}, "afterCommit": {"oid": "ee55428ec4539c55820c6489335262793bdcb7b6", "author": {"user": {"login": "Jeasmine", "name": "JNahui"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/ee55428ec4539c55820c6489335262793bdcb7b6", "committedDate": "2020-08-31T16:43:17Z", "message": "Make OSTimeoutHandler be a HandlerThread\n\n  * Workers dependens on the device cores to have a pool of threads available.\n  * Loopers handling are hard to debug, and maintain\n  * Make a Handler Thread available for post delays runnables\n  * Make OSTimeoutHandler available betweeen jobs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4OTUyNDM2", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1127#pullrequestreview-478952436", "createdAt": "2020-08-31T21:02:09Z", "commit": {"oid": "ee55428ec4539c55820c6489335262793bdcb7b6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3413, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}