{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA0MTA5Mzc3", "number": 990, "reviewThreads": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QyMjoyOToyNFrOD40keQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QyMzowMDoyOFrOD40s5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYwOTA4MTUzOnYy", "diffSide": "RIGHT", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/FCMBroadcastReceiver.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QyMjoyOToyNFrOGPwDdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QyMjoyOToyNFrOGPwDdg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTE2OTE0Mg==", "bodyText": "This needs to say \"gcm\". This it the payload that the \"Google Play services\" app sends and it outside of the control of that app.", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/990#discussion_r419169142", "createdAt": "2020-05-03T22:29:24Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/FCMBroadcastReceiver.java", "diffHunk": "@@ -35,24 +35,23 @@\n import android.os.Build;\n import android.os.Bundle;\n import android.os.Parcelable;\n-import android.os.PersistableBundle;\n-import android.support.annotation.Nullable;\n-import android.support.v4.content.WakefulBroadcastReceiver;\n+\n+import androidx.annotation.Nullable;\n+import androidx.legacy.content.WakefulBroadcastReceiver;\n \n import com.onesignal.NotificationBundleProcessor.ProcessedBundleResult;\n \n-// This is the entry point when a FCM / GCM payload is received from the Google Play services app\n-// TODO: 4.0.0 - Update to use <action android:name=\"com.google.firebase.MESSAGING_EVENT\"/>\n-public class GcmBroadcastReceiver extends WakefulBroadcastReceiver {\n+// This is the entry point when a FCM payload is received from the Google Play services app\n+public class FCMBroadcastReceiver extends WakefulBroadcastReceiver {\n \n-   private static final String GCM_RECEIVE_ACTION = \"com.google.android.c2dm.intent.RECEIVE\";\n-   private static final String GCM_TYPE = \"gcm\";\n+   private static final String FCM_RECEIVE_ACTION = \"com.google.android.c2dm.intent.RECEIVE\";\n+   private static final String FCM_TYPE = \"fcm\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c3842b95a0e73729314ef0faa808c0a5c3c72dda"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYwOTA4Mzc3OnYy", "diffSide": "RIGHT", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/FCMBroadcastReceiver.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QyMjozMjo0OVrOGPwEvA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QyMjozMjo0OVrOGPwEvA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTE2OTQ2OA==", "bodyText": "The original checked was processedResult.isOneSignalPayload && OneSignal.getFilterOtherGCMReceivers(context) so this means we should now remove rocessedResult.isOneSignalPayload.", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/990#discussion_r419169468", "createdAt": "2020-05-03T22:32:49Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/FCMBroadcastReceiver.java", "diffHunk": "@@ -69,26 +68,20 @@ public void onReceive(Context context, Intent intent) {\n \n       ProcessedBundleResult processedResult = processOrderBroadcast(context, intent, bundle);\n \n-      // Null means this isn't a GCM / FCM message.\n+      // Null means this isn't a FCM message\n       if (processedResult == null) {\n          setSuccessfulResultCode();\n          return;\n       }\n \n-      // Prevent other GCM receivers from firing if;\n-      //   This is a duplicated GCM message\n-      //   OR app developer setup a extender service to handle the notification.\n-      if (processedResult.isDup || processedResult.hasExtenderService) {\n-         // Abort to prevent other GCM receivers from process this Intent.\n-         setAbort();\n-         return;\n-      }\n-\n-      // Prevent other GCM receivers from firing if;\n-      //   This is a OneSignal payload\n-      //   AND the setting is enabled to allow filtering in this case.\n-      if (processedResult.isOneSignalPayload &&\n-          OneSignal.getFilterOtherGCMReceivers(context)) {\n+      // Prevent other FCM receivers from firing if:\n+      //    1. This is a duplicated FCM message\n+      //    2. OR app developer setup a extender service to handle the notification\n+      //    3. OR this is a OneSignal payload\n+      if (processedResult.isDup\n+              || processedResult.hasExtenderService\n+              || processedResult.isOneSignalPayload) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c3842b95a0e73729314ef0faa808c0a5c3c72dda"}, "originalPosition": 66}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYwOTA4NTkxOnYy", "diffSide": "RIGHT", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/FCMBroadcastReceiver.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QyMjozNjoxM1rOGPwF2A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QyMjozNjoxM1rOGPwF2A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTE2OTc1Mg==", "bodyText": "yes, this FCMBroadcastReceiver class is really independent of FCM or GCM. Since this class directly handles the Intent fired from the \"Google Play services\" app. This receiver would still work if you completely removed both the FCM and GCM libraries from the app. (Today OneSignal uses the FCM / GCM library to register for a push token)", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/990#discussion_r419169752", "createdAt": "2020-05-03T22:36:13Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/FCMBroadcastReceiver.java", "diffHunk": "@@ -106,50 +99,56 @@ private void setAbort() {\n          // Prevents other BroadcastReceivers from firing\n          abortBroadcast();\n \n+         // TODO: Is this an issue with FCM too?", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c3842b95a0e73729314ef0faa808c0a5c3c72dda"}, "originalPosition": 75}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYwOTA4OTkwOnYy", "diffSide": "RIGHT", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/FCMBroadcastReceiver.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QyMjo0MTo0MVrOGPwH7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QyMjo0MTo0MVrOGPwH7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTE3MDI4NA==", "bodyText": "setAbort(); should be removed completely now that OneSignal.getFilterOtherGCMReceivers(context) is gone.", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/990#discussion_r419170284", "createdAt": "2020-05-03T22:41:41Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/FCMBroadcastReceiver.java", "diffHunk": "@@ -69,26 +68,20 @@ public void onReceive(Context context, Intent intent) {\n \n       ProcessedBundleResult processedResult = processOrderBroadcast(context, intent, bundle);\n \n-      // Null means this isn't a GCM / FCM message.\n+      // Null means this isn't a FCM message\n       if (processedResult == null) {\n          setSuccessfulResultCode();\n          return;\n       }\n \n-      // Prevent other GCM receivers from firing if;\n-      //   This is a duplicated GCM message\n-      //   OR app developer setup a extender service to handle the notification.\n-      if (processedResult.isDup || processedResult.hasExtenderService) {\n-         // Abort to prevent other GCM receivers from process this Intent.\n-         setAbort();\n-         return;\n-      }\n-\n-      // Prevent other GCM receivers from firing if;\n-      //   This is a OneSignal payload\n-      //   AND the setting is enabled to allow filtering in this case.\n-      if (processedResult.isOneSignalPayload &&\n-          OneSignal.getFilterOtherGCMReceivers(context)) {\n+      // Prevent other FCM receivers from firing if:\n+      //    1. This is a duplicated FCM message\n+      //    2. OR app developer setup a extender service to handle the notification\n+      //    3. OR this is a OneSignal payload\n+      if (processedResult.isDup\n+              || processedResult.hasExtenderService\n+              || processedResult.isOneSignalPayload) {\n+         // Abort to prevent other FCM receivers from process this Intent.\n          setAbort();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c3842b95a0e73729314ef0faa808c0a5c3c72dda"}, "originalPosition": 68}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYwOTA5MDUxOnYy", "diffSide": "RIGHT", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/FCMBroadcastReceiver.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QyMjo0Mjo0NVrOGPwIPQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QyMjo0Mjo0NVrOGPwIPQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTE3MDM2NQ==", "bodyText": "Remove this comment, per the logic change noted in the comment just below.", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/990#discussion_r419170365", "createdAt": "2020-05-03T22:42:45Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/FCMBroadcastReceiver.java", "diffHunk": "@@ -69,26 +68,20 @@ public void onReceive(Context context, Intent intent) {\n \n       ProcessedBundleResult processedResult = processOrderBroadcast(context, intent, bundle);\n \n-      // Null means this isn't a GCM / FCM message.\n+      // Null means this isn't a FCM message\n       if (processedResult == null) {\n          setSuccessfulResultCode();\n          return;\n       }\n \n-      // Prevent other GCM receivers from firing if;\n-      //   This is a duplicated GCM message\n-      //   OR app developer setup a extender service to handle the notification.\n-      if (processedResult.isDup || processedResult.hasExtenderService) {\n-         // Abort to prevent other GCM receivers from process this Intent.\n-         setAbort();\n-         return;\n-      }\n-\n-      // Prevent other GCM receivers from firing if;\n-      //   This is a OneSignal payload\n-      //   AND the setting is enabled to allow filtering in this case.\n-      if (processedResult.isOneSignalPayload &&\n-          OneSignal.getFilterOtherGCMReceivers(context)) {\n+      // Prevent other FCM receivers from firing if:\n+      //    1. This is a duplicated FCM message\n+      //    2. OR app developer setup a extender service to handle the notification\n+      //    3. OR this is a OneSignal payload\n+      if (processedResult.isDup\n+              || processedResult.hasExtenderService\n+              || processedResult.isOneSignalPayload) {\n+         // Abort to prevent other FCM receivers from process this Intent.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c3842b95a0e73729314ef0faa808c0a5c3c72dda"}, "originalPosition": 67}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYwOTA5OTEwOnYy", "diffSide": "LEFT", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/FCMBroadcastReceiver.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QyMjo1NDozMFrOGPwMvA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QyMjo1NDozMFrOGPwMvA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTE3MTUxNg==", "bodyText": "This was not done in this PR. Keep this comment. Also FCM migration is out of scope of an AndroidX migration so I would recommend a different PR.", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/990#discussion_r419171516", "createdAt": "2020-05-03T22:54:30Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/FCMBroadcastReceiver.java", "diffHunk": "@@ -35,24 +35,23 @@\n import android.os.Build;\n import android.os.Bundle;\n import android.os.Parcelable;\n-import android.os.PersistableBundle;\n-import android.support.annotation.Nullable;\n-import android.support.v4.content.WakefulBroadcastReceiver;\n+\n+import androidx.annotation.Nullable;\n+import androidx.legacy.content.WakefulBroadcastReceiver;\n \n import com.onesignal.NotificationBundleProcessor.ProcessedBundleResult;\n \n-// This is the entry point when a FCM / GCM payload is received from the Google Play services app\n-// TODO: 4.0.0 - Update to use <action android:name=\"com.google.firebase.MESSAGING_EVENT\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c3842b95a0e73729314ef0faa808c0a5c3c72dda"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYwOTEwMDAxOnYy", "diffSide": "LEFT", "path": "OneSignalSDK/onesignal/src/main/AndroidManifest.xml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QyMjo1NTo1N1rOGPwNPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QyMjo1NTo1N1rOGPwNPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTE3MTY0NA==", "bodyText": "WAKE_LOCK is still needed by the FCM / GCM broadcastreceiver.", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/990#discussion_r419171644", "createdAt": "2020-05-03T22:55:57Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/onesignal/src/main/AndroidManifest.xml", "diffHunk": "@@ -4,12 +4,11 @@\n     <!-- OneSignal SDK has runtime checks Android version. -->\n     <!--<uses-sdk tools:overrideLibrary=\"android.support.customtabs\"/>-->\n \n-    <!-- INTERNET and c2dm RECEIVE are basic requirements for push messages through Google's GCM. -->\n+    <!-- INTERNET permission requirement -->\n     <uses-permission android:name=\"android.permission.INTERNET\" />\n-    <uses-permission android:name=\"com.google.android.c2dm.permission.RECEIVE\" />\n \n-    <!-- Required, makes sure notifications are delivered on time. -->\n-    <uses-permission android:name=\"android.permission.WAKE_LOCK\" />", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c3842b95a0e73729314ef0faa808c0a5c3c72dda"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYwOTEwMTc0OnYy", "diffSide": "RIGHT", "path": "OneSignalSDK/onesignal/src/release/AndroidManifest.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QyMjo1ODoyOVrOGPwOGA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxNDowODoyN1rOGQCD3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTE3MTg2NA==", "bodyText": "This should be kept but changed it's name to com.onesignal.FcmBroadcastReceiver.\nThe full FCM guide was not followed, com.google.firebase.MESSAGING_EVENT was not added per this guide.\nhttps://developers.google.com/cloud-messaging/android/android-migrate-gcmlistener\nBut again, an FCM migration seems out of scope to me for an AndroidX migration.", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/990#discussion_r419171864", "createdAt": "2020-05-03T22:58:29Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/onesignal/src/release/AndroidManifest.xml", "diffHunk": "@@ -1,19 +1,12 @@\n <manifest xmlns:android=\"http://schemas.android.com/apk/res/android\" package=\"com.onesignal\">\n \n-    <!-- Create a unique permission for your app and use it so only your app can receive your OneSignal messages. -->\n-    <permission android:name=\"${applicationId}.permission.C2D_MESSAGE\" android:protectionLevel=\"signature\" />\n-    <uses-permission android:name=\"${applicationId}.permission.C2D_MESSAGE\" />\n-\n     <application>\n-        <receiver\n-            android:name=\"com.onesignal.GcmBroadcastReceiver\"\n-            android:permission=\"com.google.android.c2dm.permission.SEND\" >\n-            <!-- High priority so OneSignal payloads can be filtered from other GCM receivers if filterOtherGCMReceivers is enabled. -->\n-            <intent-filter android:priority=\"999\" >\n-                <action android:name=\"com.google.android.c2dm.intent.RECEIVE\" />\n-                <category android:name=\"${applicationId}\" />\n-            </intent-filter>\n-        </receiver>\n+\n+        <!--", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c3842b95a0e73729314ef0faa808c0a5c3c72dda"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTQ2NDE1Ng==", "bodyText": "I was trying my best just to do the renaming, I will handle the migration in another PR", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/990#discussion_r419464156", "createdAt": "2020-05-04T14:08:27Z", "author": {"login": "mikechoch"}, "path": "OneSignalSDK/onesignal/src/release/AndroidManifest.xml", "diffHunk": "@@ -1,19 +1,12 @@\n <manifest xmlns:android=\"http://schemas.android.com/apk/res/android\" package=\"com.onesignal\">\n \n-    <!-- Create a unique permission for your app and use it so only your app can receive your OneSignal messages. -->\n-    <permission android:name=\"${applicationId}.permission.C2D_MESSAGE\" android:protectionLevel=\"signature\" />\n-    <uses-permission android:name=\"${applicationId}.permission.C2D_MESSAGE\" />\n-\n     <application>\n-        <receiver\n-            android:name=\"com.onesignal.GcmBroadcastReceiver\"\n-            android:permission=\"com.google.android.c2dm.permission.SEND\" >\n-            <!-- High priority so OneSignal payloads can be filtered from other GCM receivers if filterOtherGCMReceivers is enabled. -->\n-            <intent-filter android:priority=\"999\" >\n-                <action android:name=\"com.google.android.c2dm.intent.RECEIVE\" />\n-                <category android:name=\"${applicationId}\" />\n-            </intent-filter>\n-        </receiver>\n+\n+        <!--", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTE3MTg2NA=="}, "originalCommit": {"oid": "c3842b95a0e73729314ef0faa808c0a5c3c72dda"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYwOTEwMzA5OnYy", "diffSide": "RIGHT", "path": "OneSignalSDK/unittest/src/test/java/com/test/onesignal/GenerateNotificationRunner.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QyMzowMDoyOFrOGPwOxg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QyMzowMDoyOFrOGPwOxg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTE3MjAzOA==", "bodyText": "Put back to \"gcm\", see my comment in FCMBroadcastReceiver", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/990#discussion_r419172038", "createdAt": "2020-05-03T23:00:28Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/unittest/src/test/java/com/test/onesignal/GenerateNotificationRunner.java", "diffHunk": "@@ -1032,28 +1032,28 @@ public void shouldCorrectlyDisplaySummaryWithMixedInAppAlertsAndNotifications()\n       // Setup - Send 2 more notifications with the same group\n       bundle = getBaseNotifBundle(\"UUID2\");\n       bundle.putString(\"grp\", \"test1\");\n-      NotificationBundleProcessor_ProcessFromGCMIntentService(blankActivity, bundle, null);\n+      NotificationBundleProcessor_ProcessFromFCMIntentService(blankActivity, bundle, null);\n       bundle = getBaseNotifBundle(\"UUID3\");\n       bundle.putString(\"grp\", \"test1\");\n-      NotificationBundleProcessor_ProcessFromGCMIntentService(blankActivity, bundle, null);\n+      NotificationBundleProcessor_ProcessFromFCMIntentService(blankActivity, bundle, null);\n    \n       // Test - equals 3 - Should be 2 notifications + 1 summary.\n       //         Alert should stay as an in-app alert.\n       assertEquals(3, ShadowRoboNotificationManager.notifications.size());\n    }\n \n    @Test\n-   @Config(shadows = {ShadowGcmBroadcastReceiver.class})\n+   @Config(shadows = {ShadowFCMBroadcastReceiver.class})\n    public void shouldSetButtonsCorrectly() throws Exception {\n-      Intent intentGcm = new Intent();\n-      intentGcm.setAction(\"com.google.android.c2dm.intent.RECEIVE\");\n-      intentGcm.putExtra(\"message_type\", \"gcm\");\n+      Intent intent = new Intent();\n+      intent.setAction(\"com.google.android.c2dm.intent.RECEIVE\");\n+      intent.putExtra(\"message_type\", \"fcm\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c3842b95a0e73729314ef0faa808c0a5c3c72dda"}, "originalPosition": 367}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2227, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}