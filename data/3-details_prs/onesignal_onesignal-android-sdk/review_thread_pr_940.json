{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY4NzczMDAy", "number": 940, "reviewThreads": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQyMjoyMzo0MlrODbvYbA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQyMzoyNzo0NFrODbwQqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMwNDE0NDQ0OnYy", "diffSide": "RIGHT", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/OneSignal.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQyMjoyMzo0MlrOFjZpHQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQyMjoyMzo0MlrOFjZpHQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjY2NDYwNQ==", "bodyText": "Can we change  oldAppId to existingAppId? I think this will make things more clear as setAppId(oldAppId); sound incorrect when reading this line", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/940#discussion_r372664605", "createdAt": "2020-01-29T22:23:42Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/OneSignal.java", "diffHunk": "@@ -562,9 +563,17 @@ public static void setAppContext(@NonNull Context context) {\n       setupPrivacyConsent(appContext);\n \n       OneSignal.onesignalLog(LOG_LEVEL.VERBOSE, \"setAppContext(context) finished, checking if appId has been set before proceeding...\");\n-      appId = getSavedAppId();\n       if (appId == null) {\n-         OneSignal.onesignalLog(LOG_LEVEL.WARN, \"appContext set, but please call setAppId(appId) with a valid appId to complete OneSignal init!\");\n+\n+         // Get the cached app id, if it exists\n+         String oldAppId = getSavedAppId();\n+         if (oldAppId == null) {\n+            OneSignal.onesignalLog(LOG_LEVEL.WARN, \"appContext set, but please call setAppId(appId) with a valid appId to complete OneSignal init!\");\n+         } else {\n+            // Init if the app id is not null\n+            setAppId(oldAppId);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76b32b08935d573335e33f756673e77a37f99019"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMwNDI2NDQzOnYy", "diffSide": "RIGHT", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/OneSignal.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQyMzoxNTo1MVrOFjazWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQyMzoxNTo1MVrOFjazWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjY4MzYwOA==", "bodyText": "lower case S. should be saveAppId", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/940#discussion_r372683608", "createdAt": "2020-01-29T23:15:51Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/OneSignal.java", "diffHunk": "@@ -530,6 +530,7 @@ else if (!newAppId.equals(appId)) {\n       }\n \n       appId = newAppId;\n+      SaveAppId(newAppId);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76b32b08935d573335e33f756673e77a37f99019"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMwNDI4MDEzOnYy", "diffSide": "RIGHT", "path": "OneSignalSDK/unittest/src/test/java/com/test/onesignal/GenerateNotificationRunner.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQyMzoyMzo0MlrOFja88w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQyMzoyMzo0MlrOFja88w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjY4NjA2Nw==", "bodyText": "rm", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/940#discussion_r372686067", "createdAt": "2020-01-29T23:23:42Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/unittest/src/test/java/com/test/onesignal/GenerateNotificationRunner.java", "diffHunk": "@@ -1187,7 +1186,7 @@ public void shouldStartGCMServiceOnAndroidOWhenPriorityIsHighAndContainsRemoteRe\n    public void shouldShowInAppPreviewWhenInFocus() throws Exception {\n       OneSignal.setAppId(\"b2f7f966-d8cc-11e4-bed1-df8f05be55ba\");\n       OneSignal.setAppContext(blankActivity);\n-      OneSignal_setGoogleProjectNumber(\"123456789\");\n+//      OneSignal_setGoogleProjectNumber(\"123456789\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76b32b08935d573335e33f756673e77a37f99019"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMwNDI4MDI3OnYy", "diffSide": "RIGHT", "path": "OneSignalSDK/unittest/src/test/java/com/test/onesignal/GenerateNotificationRunner.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQyMzoyMzo0NlrOFja9BQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQyMzoyMzo0NlrOFja9BQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjY4NjA4NQ==", "bodyText": "rm", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/940#discussion_r372686085", "createdAt": "2020-01-29T23:23:46Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/unittest/src/test/java/com/test/onesignal/GenerateNotificationRunner.java", "diffHunk": "@@ -1205,7 +1204,7 @@ public void shouldShowInAppPreviewWhenInFocus() throws Exception {\n    @Test\n    @Config(shadows = { ShadowOneSignalRestClient.class, ShadowOSWebView.class })\n    public void shouldShowInAppPreviewWhenOpeningPreviewNotification() throws Exception {\n-      OneSignal_setGoogleProjectNumber(\"123456789\");\n+//      OneSignal_setGoogleProjectNumber(\"123456789\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76b32b08935d573335e33f756673e77a37f99019"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMwNDI4MDQ5OnYy", "diffSide": "RIGHT", "path": "OneSignalSDK/unittest/src/test/java/com/test/onesignal/MainOneSignalClassRunner.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQyMzoyMzo1MlrOFja9Kw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQyMzoyMzo1MlrOFja9Kw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjY4NjEyMw==", "bodyText": "rm", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/940#discussion_r372686123", "createdAt": "2020-01-29T23:23:52Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/unittest/src/test/java/com/test/onesignal/MainOneSignalClassRunner.java", "diffHunk": "@@ -250,7 +247,7 @@ public static void afterEverything() throws Exception {\n    @Test\n    public void testInitFromApplicationContext() throws Exception {\n       // Application.onCreate\n-      OneSignal_setGoogleProjectNumber(\"123456789\");\n+//      OneSignal_setGoogleProjectNumber(\"123456789\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76b32b08935d573335e33f756673e77a37f99019"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMwNDI4MDcwOnYy", "diffSide": "RIGHT", "path": "OneSignalSDK/unittest/src/test/java/com/test/onesignal/MainOneSignalClassRunner.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQyMzoyNDowMFrOFja9TQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQyMzoyNDowMFrOFja9TQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjY4NjE1Nw==", "bodyText": "Fix test or comment out with a TODO", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/940#discussion_r372686157", "createdAt": "2020-01-29T23:24:00Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/unittest/src/test/java/com/test/onesignal/MainOneSignalClassRunner.java", "diffHunk": "@@ -1017,7 +1014,8 @@ public void testInvalidGoogleProjectNumberWithSuccessfulRegisterResponse() throw\n       // A more real test would be \"missing support library\" but bad project number is an easier setup\n       //   and is testing the same logic.\n       ShadowPushRegistratorGCM.fail = true;\n-      OneSignalInitWithBadProjectNum();\n+//      OneSignalInitWithBadProjectNum();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76b32b08935d573335e33f756673e77a37f99019"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMwNDI4MTYzOnYy", "diffSide": "RIGHT", "path": "OneSignalSDK/unittest/src/test/java/com/test/onesignal/MainOneSignalClassRunner.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQyMzoyNDozMVrOFja94g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQyMzoyNDozMVrOFja94g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjY4NjMwNg==", "bodyText": "Fix test or comment out with a TODO", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/940#discussion_r372686306", "createdAt": "2020-01-29T23:24:31Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/unittest/src/test/java/com/test/onesignal/MainOneSignalClassRunner.java", "diffHunk": "@@ -1053,8 +1051,8 @@ public void testInvalidGoogleProjectNumberWithFailedRegisterResponse() throws Ex\n       // Ensures lower number notification_types do not over right higher numbered ones.\n       ShadowPushRegistratorGCM.fail = true;\n       GetIdsAvailable();\n-      OneSignalInitWithBadProjectNum();\n-\n+//      OneSignalInitWithBadProjectNum();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76b32b08935d573335e33f756673e77a37f99019"}, "originalPosition": 42}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMwNDI4MTgyOnYy", "diffSide": "RIGHT", "path": "OneSignalSDK/unittest/src/test/java/com/test/onesignal/MainOneSignalClassRunner.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQyMzoyNDozOVrOFja-Aw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQyMzoyNDozOVrOFja-Aw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjY4NjMzOQ==", "bodyText": "Fix test or comment out with a TODO", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/940#discussion_r372686339", "createdAt": "2020-01-29T23:24:39Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/unittest/src/test/java/com/test/onesignal/MainOneSignalClassRunner.java", "diffHunk": "@@ -1081,7 +1079,8 @@ public void testUnsubcribedShouldMakeRegIdNullToIdsAvailable() throws Exception\n \n    @Test\n    public void testSetSubscriptionShouldNotOverrideSubscribeError() throws Exception {\n-      OneSignalInitWithBadProjectNum();\n+//      OneSignalInitWithBadProjectNum();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76b32b08935d573335e33f756673e77a37f99019"}, "originalPosition": 52}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMwNDI4MTk4OnYy", "diffSide": "RIGHT", "path": "OneSignalSDK/unittest/src/test/java/com/test/onesignal/MainOneSignalClassRunner.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQyMzoyNDo0M1rOFja-FQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQyMzoyNDo0M1rOFja-FQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjY4NjM1Nw==", "bodyText": "Fix test or comment out with a TODO", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/940#discussion_r372686357", "createdAt": "2020-01-29T23:24:43Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/unittest/src/test/java/com/test/onesignal/MainOneSignalClassRunner.java", "diffHunk": "@@ -1092,7 +1091,8 @@ public void testSetSubscriptionShouldNotOverrideSubscribeError() throws Exceptio\n \n       // Restart app - Should omit notification_types\n       restartAppAndElapseTimeToNextSession();\n-      OneSignalInitWithBadProjectNum();\n+//      OneSignalInitWithBadProjectNum();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76b32b08935d573335e33f756673e77a37f99019"}, "originalPosition": 62}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMwNDI4Nzg1OnYy", "diffSide": "RIGHT", "path": "OneSignalSDK/unittest/src/test/java/com/test/onesignal/MainOneSignalClassRunner.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQyMzoyNzozM1rOFjbBeg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQyMzoyNzozM1rOFjbBeg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjY4NzIyNg==", "bodyText": "rm", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/940#discussion_r372687226", "createdAt": "2020-01-29T23:27:33Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/unittest/src/test/java/com/test/onesignal/MainOneSignalClassRunner.java", "diffHunk": "@@ -3385,7 +3383,7 @@ public void shouldCancelAndClearNotifications() throws Exception {\n       ShadowRoboNotificationManager.notifications.clear();\n       OneSignal.setAppId(ONESIGNAL_APP_ID);\n       OneSignal.setAppContext(blankActivity.getApplicationContext());\n-      OneSignal_setGoogleProjectNumber(\"87654321\");\n+//      OneSignal_setGoogleProjectNumber(\"87654321\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76b32b08935d573335e33f756673e77a37f99019"}, "originalPosition": 82}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMwNDI4ODEzOnYy", "diffSide": "RIGHT", "path": "OneSignalSDK/unittest/src/test/java/com/test/onesignal/MainOneSignalClassRunner.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQyMzoyNzozOFrOFjbBog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQyMzoyNzozOFrOFjbBog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjY4NzI2Ng==", "bodyText": "rm", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/940#discussion_r372687266", "createdAt": "2020-01-29T23:27:38Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/unittest/src/test/java/com/test/onesignal/MainOneSignalClassRunner.java", "diffHunk": "@@ -4078,24 +4076,24 @@ private void OneSignalInit() {\n       ShadowOSUtils.subscribableStatus = 1;\n       OneSignal.setAppId(ONESIGNAL_APP_ID);\n       OneSignal.setAppContext(blankActivity);\n-      OneSignal_setGoogleProjectNumber(\"87654321\");\n+//      OneSignal_setGoogleProjectNumber(\"87654321\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76b32b08935d573335e33f756673e77a37f99019"}, "originalPosition": 91}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMwNDI4ODQwOnYy", "diffSide": "RIGHT", "path": "OneSignalSDK/unittest/src/test/java/com/test/onesignal/MainOneSignalClassRunner.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQyMzoyNzo0NFrOFjbByQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQyMzoyNzo0NFrOFjbByQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjY4NzMwNQ==", "bodyText": "rm", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/940#discussion_r372687305", "createdAt": "2020-01-29T23:27:44Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/unittest/src/test/java/com/test/onesignal/MainOneSignalClassRunner.java", "diffHunk": "@@ -4078,24 +4076,24 @@ private void OneSignalInit() {\n       ShadowOSUtils.subscribableStatus = 1;\n       OneSignal.setAppId(ONESIGNAL_APP_ID);\n       OneSignal.setAppContext(blankActivity);\n-      OneSignal_setGoogleProjectNumber(\"87654321\");\n+//      OneSignal_setGoogleProjectNumber(\"87654321\");\n       blankActivityController.resume();\n    }\n \n    private void OneSignalInitFromApplication() {\n       OneSignal.setLogLevel(OneSignal.LOG_LEVEL.DEBUG, OneSignal.LOG_LEVEL.NONE);\n       OneSignal.setAppId(ONESIGNAL_APP_ID);\n       OneSignal.setAppContext(blankActivity.getApplicationContext());\n-      OneSignal_setGoogleProjectNumber(\"87654321\");\n+//      OneSignal_setGoogleProjectNumber(\"87654321\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76b32b08935d573335e33f756673e77a37f99019"}, "originalPosition": 100}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2182, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}