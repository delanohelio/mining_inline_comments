{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAzNjk0NTI0", "number": 1188, "title": "Remove getVibrate / getSoundEnabled apis and logics", "bodyText": "Remove getVibrate and enableVibrate apis\nRemove getSoundEnabled and enableSound apis\nRemove logics using them\n\n\nThis change is\u2002", "createdAt": "2020-10-14T22:41:09Z", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1188", "merged": true, "mergeCommit": {"oid": "602de6c0d40eb6d5895fe4a7347f1bbf09de1a9b"}, "closed": true, "closedAt": "2020-10-15T18:35:50Z", "author": {"login": "Jeasmine"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdSlJxbABqjM4Nzg4MTQ1MDU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdS1wwrAFqTUwOTYzOTA0OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "12c68047eba24ede98bc288065c57829bcd9a8df", "author": {"user": {"login": "Jeasmine", "name": "JNahui"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/12c68047eba24ede98bc288065c57829bcd9a8df", "committedDate": "2020-10-14T22:31:29Z", "message": "Remove getVibrate and getSoundEnabled apis and logics"}, "afterCommit": {"oid": "de074065ba7b6efca1893da86ccf97fe24ffcb9a", "author": {"user": {"login": "Jeasmine", "name": "JNahui"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/de074065ba7b6efca1893da86ccf97fe24ffcb9a", "committedDate": "2020-10-14T22:44:05Z", "message": "Remove getVibrate / getSoundEnabled apis and logics\n\n* Remove getVibrate and enableVibrate apis\n* Remove getSoundEnabled and enableSound apis\n* Remove logics using them"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4ODQ0MjU0", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1188#pullrequestreview-508844254", "createdAt": "2020-10-14T23:43:15Z", "commit": {"oid": "de074065ba7b6efca1893da86ccf97fe24ffcb9a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQyMzo0MzoxNVrOHhrWbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQyMzo0NDoxNFrOHhrZKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTA3NTMxMQ==", "bodyText": "We just want to remove the OneSignal.getVibrate() call here. As a backwards compatibility for pre-O devices the OneSignal backend will still send \"vib\" depending if the Notification Category has this set.", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1188#discussion_r505075311", "createdAt": "2020-10-14T23:43:15Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/GenerateNotification.java", "diffHunk": "@@ -240,28 +240,9 @@ private static void setAlertnessOptions(JSONObject fcmJson, NotificationCompat.B\n          } catch (Throwable t) {\n             notificationDefaults |= Notification.DEFAULT_LIGHTS;\n          } // Can throw if an old android support lib is used or parse error.\n-      }\n-      else\n+      } else {\n          notificationDefaults |= Notification.DEFAULT_LIGHTS;\n-\n-      if (OneSignal.getVibrate() && fcmJson.optInt(\"vib\", 1) == 1) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "de074065ba7b6efca1893da86ccf97fe24ffcb9a"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTA3NjAwOA==", "bodyText": "Keep this method, just remove the OneSignal.getSoundEnabled(); check. Same reason noted above about the Android Notification Categories", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1188#discussion_r505076008", "createdAt": "2020-10-14T23:44:14Z", "author": {"login": "jkasten2"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/GenerateNotification.java", "diffHunk": "@@ -929,13 +910,6 @@ private static int getDrawableId(String name) {\n       return contextResources.getIdentifier(name, \"drawable\", packageName);\n    }\n \n-   private static boolean isSoundEnabled(JSONObject fcmJson) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "de074065ba7b6efca1893da86ccf97fe24ffcb9a"}, "originalPosition": 43}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "de074065ba7b6efca1893da86ccf97fe24ffcb9a", "author": {"user": {"login": "Jeasmine", "name": "JNahui"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/de074065ba7b6efca1893da86ccf97fe24ffcb9a", "committedDate": "2020-10-14T22:44:05Z", "message": "Remove getVibrate / getSoundEnabled apis and logics\n\n* Remove getVibrate and enableVibrate apis\n* Remove getSoundEnabled and enableSound apis\n* Remove logics using them"}, "afterCommit": {"oid": "7f6a250382262ea3417966c795c3f81a74642ac4", "author": {"user": {"login": "Jeasmine", "name": "JNahui"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/7f6a250382262ea3417966c795c3f81a74642ac4", "committedDate": "2020-10-15T16:53:52Z", "message": "Remove getVibrate / getSoundEnabled apis and logics\n\n* Remove getVibrate and enableVibrate apis\n* Remove getSoundEnabled and enableSound apis\n* Remove logics using them"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "64a82ff16c86c1f43efa75c39a680d3bc7af3f79", "author": {"user": {"login": "Jeasmine", "name": "JNahui"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/64a82ff16c86c1f43efa75c39a680d3bc7af3f79", "committedDate": "2020-10-15T16:54:47Z", "message": "Remove getVibrate / getSoundEnabled apis and logics\n\n* Remove getVibrate and enableVibrate apis\n* Remove getSoundEnabled and enableSound apis\n* Remove logics using them"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7f6a250382262ea3417966c795c3f81a74642ac4", "author": {"user": {"login": "Jeasmine", "name": "JNahui"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/7f6a250382262ea3417966c795c3f81a74642ac4", "committedDate": "2020-10-15T16:53:52Z", "message": "Remove getVibrate / getSoundEnabled apis and logics\n\n* Remove getVibrate and enableVibrate apis\n* Remove getSoundEnabled and enableSound apis\n* Remove logics using them"}, "afterCommit": {"oid": "64a82ff16c86c1f43efa75c39a680d3bc7af3f79", "author": {"user": {"login": "Jeasmine", "name": "JNahui"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/64a82ff16c86c1f43efa75c39a680d3bc7af3f79", "committedDate": "2020-10-15T16:54:47Z", "message": "Remove getVibrate / getSoundEnabled apis and logics\n\n* Remove getVibrate and enableVibrate apis\n* Remove getSoundEnabled and enableSound apis\n* Remove logics using them"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5NjM5MDQ5", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1188#pullrequestreview-509639049", "createdAt": "2020-10-15T18:06:06Z", "commit": {"oid": "64a82ff16c86c1f43efa75c39a680d3bc7af3f79"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3466, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}