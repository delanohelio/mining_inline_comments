{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMxNDkwMDA5", "number": 1049, "title": "Fix DIRECT IAM influence being cache", "bodyText": "IAM Direct influence shoudn't be cache because DIRECT Influence will be only while the IAM is being display\nInstead of caching DIRECT cache INDIRECT\n\n\n\nThis change is\u2002", "createdAt": "2020-06-09T02:06:26Z", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1049", "merged": true, "mergeCommit": {"oid": "40f5042c28b7eacac815f7a92ba35944705e39ed"}, "closed": true, "closedAt": "2020-06-10T21:07:16Z", "author": {"login": "Jeasmine"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcpmkJTgFqTQyNzI2NTkxMQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcp-r6FgFqTQyODM1NzU5Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI3MjY1OTEx", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1049#pullrequestreview-427265911", "createdAt": "2020-06-09T15:12:31Z", "commit": {"oid": "85969cb66a1c941068dbb4c721aa0f0ed4add057"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxNToxMjozMVrOGhPEaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxNToxMjozMVrOGhPEaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzUwMzA4MQ==", "bodyText": "A comment should be added to explain that within cacheState for IAM tracker we always downgrade DIRECT since leaving the app while showing an IAM would be a DIRECT state", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1049#discussion_r437503081", "createdAt": "2020-06-09T15:12:31Z", "author": {"login": "mikechoch"}, "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/influence/OSInAppMessageTracker.java", "diffHunk": "@@ -95,6 +95,7 @@ void addSessionData(@NonNull JSONObject jsonObject, OSInfluence influence) {\n \n     @Override\n     public void cacheState() {\n-        dataRepository.cacheIAMInfluenceType(influenceType == null ? OSInfluenceType.UNATTRIBUTED : influenceType);\n+        OSInfluenceType influenceTypeToCache = influenceType == null ? OSInfluenceType.UNATTRIBUTED : influenceType;\n+        dataRepository.cacheIAMInfluenceType(influenceTypeToCache == OSInfluenceType.DIRECT ? OSInfluenceType.INDIRECT : influenceTypeToCache);\n     }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "85969cb66a1c941068dbb4c721aa0f0ed4add057"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f9c27578ddca5c124317df3299ab4c95708b440b", "author": {"user": {"login": "Jeasmine", "name": "JNahui"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/f9c27578ddca5c124317df3299ab4c95708b440b", "committedDate": "2020-06-09T16:31:50Z", "message": "Fix DIRECT IAM influence being cache\n\n   * IAM Direct influence shoudn't be cache because DIRECT Influence will be only while the IAM is being display\n   * Instead of caching DIRECT cache INDIRECT"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "85969cb66a1c941068dbb4c721aa0f0ed4add057", "author": {"user": {"login": "Jeasmine", "name": "JNahui"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/85969cb66a1c941068dbb4c721aa0f0ed4add057", "committedDate": "2020-06-09T02:05:31Z", "message": "Fix DIRECT IAM influence being cache\n\n   * IAM Direct influence shoudn't be cache because DIRECT Influence will be only while the IAM is being display\n   * Instead of caching DIRECT cache INDIRECT"}, "afterCommit": {"oid": "f9c27578ddca5c124317df3299ab4c95708b440b", "author": {"user": {"login": "Jeasmine", "name": "JNahui"}}, "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/f9c27578ddca5c124317df3299ab4c95708b440b", "committedDate": "2020-06-09T16:31:50Z", "message": "Fix DIRECT IAM influence being cache\n\n   * IAM Direct influence shoudn't be cache because DIRECT Influence will be only while the IAM is being display\n   * Instead of caching DIRECT cache INDIRECT"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI3NTc5MzIw", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1049#pullrequestreview-427579320", "createdAt": "2020-06-09T22:07:28Z", "commit": {"oid": "f9c27578ddca5c124317df3299ab4c95708b440b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI4MzU3NTk2", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1049#pullrequestreview-428357596", "createdAt": "2020-06-10T19:19:03Z", "commit": {"oid": "f9c27578ddca5c124317df3299ab4c95708b440b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3592, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}