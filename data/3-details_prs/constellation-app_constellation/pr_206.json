{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYzOTAxMDAy", "number": 206, "title": "Dav graph creation fix #158", "bodyText": "Description of the Change\nCreate a new graph only when the user selects the run button in the current state:\n\nNo graph open\nAt least one valid plugin selected (With correct parameters)\nRun button has to be active\n\nThis fixes the issue #158 in light of the mishap with #202.\nChange is now reflective of user running the plugin, as opposed to the previous selection of a plugin.\nAdditional null checks added for defensive programming\n\nAlternate Designs\nAdd graph creation onto selection event handler of plugin, this could have worked but may be annoying for users wanting to select a plugin without having a graph be created\nAdd graph creation to Execute button (implemented)\n\nWhy Should This Be In Core?\nThis fixes the issue #158\n\nBenefits\nNo extra graph created on close event of graph.\n\nPossible Drawbacks\nNone for seen\n\nVerification Process\nOpening new graph - selecting (one, multiple and no plugins) and clicking run button\nOpening saved graph - selecting (one, multiple, and no plugins) and clicking run button\nClosing DAV with (graph open, closed) (Plugins selected, and deselected)\nOpening DAV with graphs opened or closed, running plugins.\nDAV opened with graph closed, multiple fast clicks on run button to try open multiple graphs\n\nApplicable Issues\n#158", "createdAt": "2020-01-16T23:52:32Z", "url": "https://github.com/constellation-app/constellation/pull/206", "merged": true, "mergeCommit": {"oid": "6816432ff447e90a9985b365163d086c3ee7243d"}, "closed": true, "closedAt": "2020-01-20T06:00:57Z", "author": {"login": "aldebaran30701"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb7Cnn4gH2gAyMzYzOTAxMDAyOjc1OGYxMzc4ODY5MzQ4N2IxNTRkMDRkZDhhNjgwN2M2YTFjYzYyMWI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb8FCtOAH2gAyMzYzOTAxMDAyOjViYjc0NDI0MTk0ODkwYmViMzMzNDc3ODU4NmU2OTk0ODY3Y2M1NjA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "758f13788693487b154d04dd8a6807c6a1cc621b", "author": {"user": {"login": "aldebaran30701", "name": null}}, "url": "https://github.com/constellation-app/constellation/commit/758f13788693487b154d04dd8a6807c6a1cc621b", "committedDate": "2020-01-16T23:19:33Z", "message": "Implement fix for #158"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "644fcf91941cd9235287d9cf1da4804de6f86505", "author": {"user": {"login": "aldebaran30701", "name": null}}, "url": "https://github.com/constellation-app/constellation/commit/644fcf91941cd9235287d9cf1da4804de6f86505", "committedDate": "2020-01-16T23:35:06Z", "message": "Merge pull request #5 from constellation-app/master\n\nUpdate Master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6a44cf228b5e52bff1692c8e700c27161fffae1e", "author": {"user": {"login": "aldebaran30701", "name": null}}, "url": "https://github.com/constellation-app/constellation/commit/6a44cf228b5e52bff1692c8e700c27161fffae1e", "committedDate": "2020-01-16T23:36:01Z", "message": "Merge branch 'master' into DAV-Graph-Creation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3647a0ba890e533cf6a7b37f09e5c0a65dd3c6e1", "author": {"user": {"login": "aldebaran30701", "name": null}}, "url": "https://github.com/constellation-app/constellation/commit/3647a0ba890e533cf6a7b37f09e5c0a65dd3c6e1", "committedDate": "2020-01-16T23:40:36Z", "message": "Code Formatting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "422ea67a731eb3189e8b4d14ed82d3f96cb8ed27", "author": {"user": {"login": "aldebaran30701", "name": null}}, "url": "https://github.com/constellation-app/constellation/commit/422ea67a731eb3189e8b4d14ed82d3f96cb8ed27", "committedDate": "2020-01-17T00:00:33Z", "message": "Update comment accuracy"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ0MzMyOTQw", "url": "https://github.com/constellation-app/constellation/pull/206#pullrequestreview-344332940", "createdAt": "2020-01-17T02:25:43Z", "commit": {"oid": "422ea67a731eb3189e8b4d14ed82d3f96cb8ed27"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QwMjoyNTo0M1rOFetQGQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QwMjoyNTo0M1rOFetQGQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzc0MzAwMQ==", "bodyText": "Thanks for looking into this so quickly @aldebaran30701.\nJust with this, given we are running this inside setOnAction() something to be mindful of is whether this is running on the JavaFX graphics thread. If so it could lock up the app.\nI will do some testing and get back to you but I like the idea.", "url": "https://github.com/constellation-app/constellation/pull/206#discussion_r367743001", "createdAt": "2020-01-17T02:25:43Z", "author": {"login": "arcturus2"}, "path": "CoreDataAccessView/src/au/gov/asd/tac/constellation/views/dataaccess/panes/DataAccessPane.java", "diffHunk": "@@ -208,9 +209,32 @@ public DataAccessPane(DataAccessViewTopComponent topComponent) {\n \n         executeButton.setStyle(GO_STYLE);\n         executeButton.setOnAction((ActionEvent event) -> {\n+            boolean pluginSelected = false;\n+            boolean selectedPluginsValid = true;\n+            \n+            // check for activated plugins and their validity.\n+            for (Tab tab : dataAccessTabPane.getTabs()) {\n+                if (tabHasEnabledPlugins(tab)) {\n+                    pluginSelected = true;\n+                    if (!validateTabEnabledPlugins(tab)) {\n+                        selectedPluginsValid = false;\n+                    }\n+                } \n+            }\n+            // when no graph present, create new graph\n+            if(graphId == null){\n+                if (pluginSelected && selectedPluginsValid) {\n+                    NewDefaultSchemaGraphAction graphAction = new NewDefaultSchemaGraphAction();\n+                    graphAction.actionPerformed(null);\n+                    while(GraphManager.getDefault().getActiveGraph() == null){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "422ea67a731eb3189e8b4d14ed82d3f96cb8ed27"}, "originalPosition": 29}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ1MDQyNTg0", "url": "https://github.com/constellation-app/constellation/pull/206#pullrequestreview-345042584", "createdAt": "2020-01-20T00:57:17Z", "commit": {"oid": "422ea67a731eb3189e8b4d14ed82d3f96cb8ed27"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8bdcbf403abe718d209ed2dba90620ff19f9a16b", "author": {"user": {"login": "aldebaran30701", "name": null}}, "url": "https://github.com/constellation-app/constellation/commit/8bdcbf403abe718d209ed2dba90620ff19f9a16b", "committedDate": "2020-01-20T04:22:11Z", "message": "Merge pull request #6 from constellation-app/master\n\nUpdate Master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d4eccb8a2d7dd47d627bd110e0132d09abbc3a6c", "author": {"user": {"login": "aldebaran30701", "name": null}}, "url": "https://github.com/constellation-app/constellation/commit/d4eccb8a2d7dd47d627bd110e0132d09abbc3a6c", "committedDate": "2020-01-20T04:22:51Z", "message": "Merge branch 'master' into DAV-Graph-Creation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5bb74424194890beb3334778586e6994867cc560", "author": {"user": {"login": "aldebaran30701", "name": null}}, "url": "https://github.com/constellation-app/constellation/commit/5bb74424194890beb3334778586e6994867cc560", "committedDate": "2020-01-20T04:42:52Z", "message": "Add GraphState for newly built graph"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3894, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}