{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU5MzYwNDY1", "number": 185, "title": "The 'split nodes' plugin should copy all attribute values #164", "bodyText": "Description of the Change\nThis change solves issue #164 by setting the new node's Type to be the same as the source node. In doing this, the new node copies the attribute values from the source as well.\n\nAlternate Designs\n\nWhy Should This Be In Core?\nProvides an enhancement for the split nodes plugin.\n\nBenefits\nEnhances the split node plugin's functionality to enable it to set the copy all of the original node's attributes to the new node.\n\nPossible Drawbacks\nWhilst the solution copies over custom attributes to the new node, it does not copy the values of the custom attribute. I am unsure if this behavior is preferred.\n\nVerification Process\nFollowed the steps outlined in the issue description to ensure that the expected outcome is met.\n\nApplicable Issues", "createdAt": "2020-01-06T01:43:25Z", "url": "https://github.com/constellation-app/constellation/pull/185", "merged": true, "mergeCommit": {"oid": "a84328bf4589fdc797d2ea28e396c4d4125be373"}, "closed": true, "closedAt": "2020-02-03T04:11:02Z", "author": {"login": "formalhaut69"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb3hYVwgH2gAyMzU5MzYwNDY1OjY4NzM0OWQzMmQyYzg0OTkxZmViYjViNDIwMzAwN2QyYWViOWM0M2U=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb_FacZAFqTM1MDA4MTAxMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "687349d32d2c84991febb5b4203007d2aeb9c43e", "author": {"user": {"login": "formalhaut69", "name": null}}, "url": "https://github.com/constellation-app/constellation/commit/687349d32d2c84991febb5b4203007d2aeb9c43e", "committedDate": "2020-01-06T00:54:13Z", "message": "Add fix for issue #164"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "630d9b769187f7f84d48cb8455a34c09d7050a8b", "author": {"user": {"login": "formalhaut69", "name": null}}, "url": "https://github.com/constellation-app/constellation/commit/630d9b769187f7f84d48cb8455a34c09d7050a8b", "committedDate": "2020-01-06T00:54:23Z", "message": "Merge branch 'master' into The-'Split-Nodes'-plugin-should-copy-all-attribute-values-#164"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQyMzI1ODEw", "url": "https://github.com/constellation-app/constellation/pull/185#pullrequestreview-342325810", "createdAt": "2020-01-14T07:12:41Z", "commit": {"oid": "630d9b769187f7f84d48cb8455a34c09d7050a8b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e6cb1f0d861abdff516aeb4598ea86a488e56832", "author": {"user": {"login": "formalhaut69", "name": null}}, "url": "https://github.com/constellation-app/constellation/commit/e6cb1f0d861abdff516aeb4598ea86a488e56832", "committedDate": "2020-01-20T06:21:06Z", "message": "Update SplitNodesPlugin.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "90c1d07e3f3b799ebae773f386ce3770d254365a", "author": {"user": {"login": "formalhaut69", "name": null}}, "url": "https://github.com/constellation-app/constellation/commit/90c1d07e3f3b799ebae773f386ce3770d254365a", "committedDate": "2020-01-20T06:21:12Z", "message": "Merge branch 'master' into The-'Split-Nodes'-plugin-should-copy-all-attribute-values-#164"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ1Njc4MzEy", "url": "https://github.com/constellation-app/constellation/pull/185#pullrequestreview-345678312", "createdAt": "2020-01-21T07:36:30Z", "commit": {"oid": "90c1d07e3f3b799ebae773f386ce3770d254365a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQwNzozNjozMFrOFfwn1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQwNzozOTo0MFrOFfwraQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODg0NjgwNA==", "bodyText": "@formalhaut69 thanks for this.\n@cygnus-x-1 I wanted to ask if you have any ideas about how we could format this a bit better so that we don't have to be so verbose and replace the type <string> to get this to work.\nWe can replace query.keys() with ((GraphRecordStore) query).keysWithType() which will work for line 160 but then the if block (162-164) comparing x, y and z will not work because the key is now x<float>.\nTo me something looks wrong with the design of the GraphRecordStore. Keen for feedback from anyone.", "url": "https://github.com/constellation-app/constellation/pull/185#discussion_r368846804", "createdAt": "2020-01-21T07:36:30Z", "author": {"login": "arcturus2"}, "path": "CoreDataAccessView/src/au/gov/asd/tac/constellation/views/dataaccess/plugins/clean/SplitNodesPlugin.java", "diffHunk": "@@ -152,6 +152,25 @@ private void editResultStore(final RecordStore result, final String left, final\n             result.set(GraphRecordStoreUtilities.SOURCE + AnalyticConcept.VertexAttribute.TYPE, leftVertexTypesMatches.get(0));\n         }\n         result.set(GraphRecordStoreUtilities.DESTINATION + VisualConcept.VertexAttribute.IDENTIFIER, right);\n+        \n+        //Loops through all of the Node attributes and copies them to the new node\n+        query.reset();\n+        while(query.next()){\n+            for (final String key : query.keys()){\n+                if(SOURCE_ID.replace(\"<string>\", \"\").equals(key) || SOURCE_IDENTIFIER.replace(\"<string>\", \"\").equals(key)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "90c1d07e3f3b799ebae773f386ce3770d254365a"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODg0NzcyMQ==", "bodyText": "A very minor comment but I would put this in 1 line because it is a little confusing seeing the query.get on its own.", "url": "https://github.com/constellation-app/constellation/pull/185#discussion_r368847721", "createdAt": "2020-01-21T07:39:40Z", "author": {"login": "arcturus2"}, "path": "CoreDataAccessView/src/au/gov/asd/tac/constellation/views/dataaccess/plugins/clean/SplitNodesPlugin.java", "diffHunk": "@@ -152,6 +152,25 @@ private void editResultStore(final RecordStore result, final String left, final\n             result.set(GraphRecordStoreUtilities.SOURCE + AnalyticConcept.VertexAttribute.TYPE, leftVertexTypesMatches.get(0));\n         }\n         result.set(GraphRecordStoreUtilities.DESTINATION + VisualConcept.VertexAttribute.IDENTIFIER, right);\n+        \n+        //Loops through all of the Node attributes and copies them to the new node\n+        query.reset();\n+        while(query.next()){\n+            for (final String key : query.keys()){\n+                if(SOURCE_ID.replace(\"<string>\", \"\").equals(key) || SOURCE_IDENTIFIER.replace(\"<string>\", \"\").equals(key)) {\n+                     //Skips the id and Identifier to make the new node unique\n+                } else if ((GraphRecordStoreUtilities.SOURCE + VisualConcept.VertexAttribute.X).equals(key) \n+                        || (GraphRecordStoreUtilities.SOURCE + VisualConcept.VertexAttribute.Y).equals(key) \n+                        || (GraphRecordStoreUtilities.SOURCE + VisualConcept.VertexAttribute.Z).equals(key)){ \n+                    //The coordinates are also skipped so that the second node is not created in the exact same location\n+                    //as the first node\n+                } else {\n+                     result.set(GraphRecordStoreUtilities.DESTINATION + key.replace(GraphRecordStoreUtilities.SOURCE, \"\"), ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "90c1d07e3f3b799ebae773f386ce3770d254365a"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e17fb84ab5ccd2cab26bf8aac5b5cd085620ab4c", "author": {"user": {"login": "formalhaut69", "name": null}}, "url": "https://github.com/constellation-app/constellation/commit/e17fb84ab5ccd2cab26bf8aac5b5cd085620ab4c", "committedDate": "2020-01-29T00:22:57Z", "message": "Merge branch 'master' into The-'Split-Nodes'-plugin-should-copy-all-attribute-values-#164"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dd90921941b8539726cf01669f0e2164a71e51ba", "author": {"user": {"login": "formalhaut69", "name": null}}, "url": "https://github.com/constellation-app/constellation/commit/dd90921941b8539726cf01669f0e2164a71e51ba", "committedDate": "2020-01-29T00:27:30Z", "message": "Merge pull request #7 from constellation-app/master\n\nUpdate Master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fcf2d7be003c5e6bedf31d96534b24ae5c7834e7", "author": {"user": {"login": "formalhaut69", "name": null}}, "url": "https://github.com/constellation-app/constellation/commit/fcf2d7be003c5e6bedf31d96534b24ae5c7834e7", "committedDate": "2020-01-29T00:29:02Z", "message": "Merge branch 'master' into The-'Split-Nodes'-plugin-should-copy-all-attribute-values-#164"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f311947644f0bdc3fd3d82740c4c041aedb0d5fc", "author": {"user": {"login": "formalhaut69", "name": null}}, "url": "https://github.com/constellation-app/constellation/commit/f311947644f0bdc3fd3d82740c4c041aedb0d5fc", "committedDate": "2020-01-29T00:56:52Z", "message": "Update to the issue #164 solution\n\nChanged how to check if the key is the ID and moved the query.get(key) onto the same line as the result.set()."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5ODk0Njc0", "url": "https://github.com/constellation-app/constellation/pull/185#pullrequestreview-349894674", "createdAt": "2020-01-29T07:03:42Z", "commit": {"oid": "f311947644f0bdc3fd3d82740c4c041aedb0d5fc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUwMDgxMDEy", "url": "https://github.com/constellation-app/constellation/pull/185#pullrequestreview-350081012", "createdAt": "2020-01-29T12:50:34Z", "commit": {"oid": "f311947644f0bdc3fd3d82740c4c041aedb0d5fc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3885, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}