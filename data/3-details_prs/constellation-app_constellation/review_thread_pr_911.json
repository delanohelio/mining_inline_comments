{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM0MTE4MTgx", "number": 911, "reviewThreads": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQwNDowOTozNlrOFCuDnA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQwNDoxNjozMFrOFCuKGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM4Mzk2MDYwOnYy", "diffSide": "RIGHT", "path": "CoreGraphFramework/src/au/gov/asd/tac/constellation/graph/value/expression/ExpressionParser.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQwNDowOTozNlrOICBaLA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQwNDowOTozNlrOICBaLA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODk5MTE0OA==", "bodyText": "final", "url": "https://github.com/constellation-app/constellation/pull/911#discussion_r538991148", "createdAt": "2020-12-09T04:09:36Z", "author": {"login": "antares1470"}, "path": "CoreGraphFramework/src/au/gov/asd/tac/constellation/graph/value/expression/ExpressionParser.java", "diffHunk": "@@ -323,7 +322,7 @@ protected void print(String prefix, StringBuilder out) {\n     public static SequenceExpression parse(String expression) {\n \n         ParseState state = ParseState.READING_WHITESPACE;\n-        final char[] content = new char[expression.length()];\n+        char[] content = new char[expression.length()];", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b237f4fd2abd473f7b90e71217779c9f96f68f9d"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM4Mzk2MzY0OnYy", "diffSide": "RIGHT", "path": "CoreGraphFramework/src/au/gov/asd/tac/constellation/graph/value/operations/And.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQwNDoxMDo0NlrOICBbwg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwMzoxOToxMlrOICzpig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODk5MTU1NA==", "bodyText": "What's the reason for using the constructor here (and other related files)?", "url": "https://github.com/constellation-app/constellation/pull/911#discussion_r538991554", "createdAt": "2020-12-09T04:10:46Z", "author": {"login": "antares1470"}, "path": "CoreGraphFramework/src/au/gov/asd/tac/constellation/graph/value/operations/And.java", "diffHunk": "@@ -25,7 +25,7 @@\n  */\n public class And {\n \n-    public static final String NAME = \"AND\";\n+    public static final String NAME = new String(\"AND\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b237f4fd2abd473f7b90e71217779c9f96f68f9d"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY1OTg1OQ==", "bodyText": "So for some reason, the map structure that this gets stored into, does not work when you omit the new String(...) constructor. I previously fixed this issue up in the SQ warnings from a few weeks back - but this specifically broke the Layers View. It was pretty hard to debug.\nI've reverted it back which fixed the issue.", "url": "https://github.com/constellation-app/constellation/pull/911#discussion_r539659859", "createdAt": "2020-12-09T21:26:25Z", "author": {"login": "aldebaran30701"}, "path": "CoreGraphFramework/src/au/gov/asd/tac/constellation/graph/value/operations/And.java", "diffHunk": "@@ -25,7 +25,7 @@\n  */\n public class And {\n \n-    public static final String NAME = \"AND\";\n+    public static final String NAME = new String(\"AND\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODk5MTU1NA=="}, "originalCommit": {"oid": "b237f4fd2abd473f7b90e71217779c9f96f68f9d"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTgxNDI4Mg==", "bodyText": "hmmm that's really odd. Perhaps the constructor actually behaves differently than expected (though I don't understand why)", "url": "https://github.com/constellation-app/constellation/pull/911#discussion_r539814282", "createdAt": "2020-12-10T03:19:12Z", "author": {"login": "antares1470"}, "path": "CoreGraphFramework/src/au/gov/asd/tac/constellation/graph/value/operations/And.java", "diffHunk": "@@ -25,7 +25,7 @@\n  */\n public class And {\n \n-    public static final String NAME = \"AND\";\n+    public static final String NAME = new String(\"AND\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODk5MTU1NA=="}, "originalCommit": {"oid": "b237f4fd2abd473f7b90e71217779c9f96f68f9d"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM4Mzk2Nzc2OnYy", "diffSide": "RIGHT", "path": "CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/LayersViewController.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQwNDoxMjoxOFrOICBd7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQwNDoxMjoxOFrOICBd7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODk5MjEwOA==", "bodyText": "final", "url": "https://github.com/constellation-app/constellation/pull/911#discussion_r538992108", "createdAt": "2020-12-09T04:12:18Z", "author": {"login": "antares1470"}, "path": "CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/LayersViewController.java", "diffHunk": "@@ -147,6 +151,22 @@ public void execute() {\n                 .executeLater(GraphManager.getDefault().getActiveGraph());\n     }\n \n+    public void executeFuture() {\n+        final int newBitmask = LayersUtilities.calculateCurrentLayerSelectionBitMask(vxBitMaskCollection, txBitMaskCollection);\n+\n+        Future<?> f = PluginExecution.withPlugin(new UpdateLayerSelectionPlugin(newBitmask))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b237f4fd2abd473f7b90e71217779c9f96f68f9d"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM4Mzk2ODMyOnYy", "diffSide": "RIGHT", "path": "CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/LayersViewController.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQwNDoxMjozNFrOICBePw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQwNDoxMjozNFrOICBePw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODk5MjE5MQ==", "bodyText": "exceptions can be final", "url": "https://github.com/constellation-app/constellation/pull/911#discussion_r538992191", "createdAt": "2020-12-09T04:12:34Z", "author": {"login": "antares1470"}, "path": "CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/LayersViewController.java", "diffHunk": "@@ -147,6 +151,22 @@ public void execute() {\n                 .executeLater(GraphManager.getDefault().getActiveGraph());\n     }\n \n+    public void executeFuture() {\n+        final int newBitmask = LayersUtilities.calculateCurrentLayerSelectionBitMask(vxBitMaskCollection, txBitMaskCollection);\n+\n+        Future<?> f = PluginExecution.withPlugin(new UpdateLayerSelectionPlugin(newBitmask))\n+                .executeLater(GraphManager.getDefault().getActiveGraph());\n+\n+        try {\n+            f.get();\n+        } catch (InterruptedException ex) {\n+            Exceptions.printStackTrace(ex);\n+            Thread.currentThread().interrupt();\n+        } catch (ExecutionException ex) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b237f4fd2abd473f7b90e71217779c9f96f68f9d"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM4Mzk2ODk5OnYy", "diffSide": "RIGHT", "path": "CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/LayersViewController.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQwNDoxMjo0OVrOICBelA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQwNDoxMjo0OVrOICBelA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODk5MjI3Ng==", "bodyText": "final", "url": "https://github.com/constellation-app/constellation/pull/911#discussion_r538992276", "createdAt": "2020-12-09T04:12:49Z", "author": {"login": "antares1470"}, "path": "CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/LayersViewController.java", "diffHunk": "@@ -161,6 +181,28 @@ public void readState() {\n                 .executeLater(graph);\n     }\n \n+    public boolean getParentVisibility() {\n+        return parent != null ? parent.getVisibility() : null;\n+    }\n+\n+    public void readStateFuture() {\n+        final LayersViewPane pane = parent.getContent();\n+        final Graph graph = GraphManager.getDefault().getActiveGraph();\n+        if (pane == null || graph == null) {\n+            return;\n+        }\n+        Future<?> f = PluginExecution.withPlugin(new LayersViewStateReader(pane))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b237f4fd2abd473f7b90e71217779c9f96f68f9d"}, "originalPosition": 56}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM4Mzk2OTQwOnYy", "diffSide": "RIGHT", "path": "CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/LayersViewController.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQwNDoxMzowMVrOICBe0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQwNDoxMzowMVrOICBe0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODk5MjMzNw==", "bodyText": "both exceptions final", "url": "https://github.com/constellation-app/constellation/pull/911#discussion_r538992337", "createdAt": "2020-12-09T04:13:01Z", "author": {"login": "antares1470"}, "path": "CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/LayersViewController.java", "diffHunk": "@@ -161,6 +181,28 @@ public void readState() {\n                 .executeLater(graph);\n     }\n \n+    public boolean getParentVisibility() {\n+        return parent != null ? parent.getVisibility() : null;\n+    }\n+\n+    public void readStateFuture() {\n+        final LayersViewPane pane = parent.getContent();\n+        final Graph graph = GraphManager.getDefault().getActiveGraph();\n+        if (pane == null || graph == null) {\n+            return;\n+        }\n+        Future<?> f = PluginExecution.withPlugin(new LayersViewStateReader(pane))\n+                .executeLater(graph);\n+        try {\n+            f.get();\n+        } catch (InterruptedException ex) {\n+            Exceptions.printStackTrace(ex);\n+            Thread.currentThread().interrupt();\n+        } catch (ExecutionException ex) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b237f4fd2abd473f7b90e71217779c9f96f68f9d"}, "originalPosition": 63}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM4Mzk2OTg2OnYy", "diffSide": "RIGHT", "path": "CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/LayersViewController.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQwNDoxMzoxN1rOICBfHQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQwNDoxMzoxN1rOICBfHQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODk5MjQxMw==", "bodyText": "final", "url": "https://github.com/constellation-app/constellation/pull/911#discussion_r538992413", "createdAt": "2020-12-09T04:13:17Z", "author": {"login": "antares1470"}, "path": "CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/LayersViewController.java", "diffHunk": "@@ -172,13 +214,36 @@ public void readState() {\n         if (graph == null) {\n             return null;\n         }\n+\n         return PluginExecution.withPlugin(new LayersViewStateWriter(vxBitMaskCollection.getQueries(), txBitMaskCollection.getQueries()))\n                 .executeLater(graph);\n+\n     }\n \n     public void updateQueries(final Graph currentGraph) {\n+        final Graph graph = GraphManager.getDefault().getActiveGraph();\n+        if (graph == null) {\n+            return;\n+        }\n+        final UpdateQueryPlugin updatePlugin = new UpdateQueryPlugin(vxBitMaskCollection, txBitMaskCollection);\n+        PluginExecution.withPlugin(updatePlugin).executeLater(graph);\n+    }\n+\n+    public void updateQueriesFuture(final Graph currentGraph) {\n+        final Graph graph = GraphManager.getDefault().getActiveGraph();\n+        if (graph == null) {\n+            return;\n+        }\n         final UpdateQueryPlugin updatePlugin = new UpdateQueryPlugin(vxBitMaskCollection, txBitMaskCollection);\n-        PluginExecution.withPlugin(updatePlugin).executeLater(currentGraph);\n+        Future<?> f = PluginExecution.withPlugin(updatePlugin).executeLater(graph);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b237f4fd2abd473f7b90e71217779c9f96f68f9d"}, "originalPosition": 97}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM4Mzk3MDA3OnYy", "diffSide": "RIGHT", "path": "CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/LayersViewController.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQwNDoxMzoyNlrOICBfPg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQwNDoxMzoyNlrOICBfPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODk5MjQ0Ng==", "bodyText": "both exceptions final", "url": "https://github.com/constellation-app/constellation/pull/911#discussion_r538992446", "createdAt": "2020-12-09T04:13:26Z", "author": {"login": "antares1470"}, "path": "CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/LayersViewController.java", "diffHunk": "@@ -172,13 +214,36 @@ public void readState() {\n         if (graph == null) {\n             return null;\n         }\n+\n         return PluginExecution.withPlugin(new LayersViewStateWriter(vxBitMaskCollection.getQueries(), txBitMaskCollection.getQueries()))\n                 .executeLater(graph);\n+\n     }\n \n     public void updateQueries(final Graph currentGraph) {\n+        final Graph graph = GraphManager.getDefault().getActiveGraph();\n+        if (graph == null) {\n+            return;\n+        }\n+        final UpdateQueryPlugin updatePlugin = new UpdateQueryPlugin(vxBitMaskCollection, txBitMaskCollection);\n+        PluginExecution.withPlugin(updatePlugin).executeLater(graph);\n+    }\n+\n+    public void updateQueriesFuture(final Graph currentGraph) {\n+        final Graph graph = GraphManager.getDefault().getActiveGraph();\n+        if (graph == null) {\n+            return;\n+        }\n         final UpdateQueryPlugin updatePlugin = new UpdateQueryPlugin(vxBitMaskCollection, txBitMaskCollection);\n-        PluginExecution.withPlugin(updatePlugin).executeLater(currentGraph);\n+        Future<?> f = PluginExecution.withPlugin(updatePlugin).executeLater(graph);\n+        try {\n+            f.get();\n+        } catch (InterruptedException ex) {\n+            Exceptions.printStackTrace(ex);\n+            Thread.currentThread().interrupt();\n+        } catch (ExecutionException ex) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b237f4fd2abd473f7b90e71217779c9f96f68f9d"}, "originalPosition": 103}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM4Mzk3NTY0OnYy", "diffSide": "RIGHT", "path": "CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/shortcut/LayersViewShortcuts.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQwNDoxNTo0N1rOICBiJg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQwNToyNTo0NVrOIDpqow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODk5MzE5MA==", "bodyText": "is there an alternative to declaring var?", "url": "https://github.com/constellation-app/constellation/pull/911#discussion_r538993190", "createdAt": "2020-12-09T04:15:47Z", "author": {"login": "antares1470"}, "path": "CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/shortcut/LayersViewShortcuts.java", "diffHunk": "@@ -52,74 +54,87 @@\n @NbBundle.Messages(\"CTL_LayersViewShortcuts=Layers View: Shortcuts\")\n public class LayersViewShortcuts extends AbstractAction {\n \n+    private void triggerLayerSelection(final int layerId) {\n+        var vxCollection = LayersViewController.getDefault().getVxQueryCollection();\n+        var txCollection = LayersViewController.getDefault().getTxQueryCollection();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b237f4fd2abd473f7b90e71217779c9f96f68f9d"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDY5OTI5OQ==", "bodyText": "Forgot to remove this var when using it to test my thinking \ud83d\udc4d", "url": "https://github.com/constellation-app/constellation/pull/911#discussion_r540699299", "createdAt": "2020-12-11T05:25:45Z", "author": {"login": "aldebaran30701"}, "path": "CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/shortcut/LayersViewShortcuts.java", "diffHunk": "@@ -52,74 +54,87 @@\n @NbBundle.Messages(\"CTL_LayersViewShortcuts=Layers View: Shortcuts\")\n public class LayersViewShortcuts extends AbstractAction {\n \n+    private void triggerLayerSelection(final int layerId) {\n+        var vxCollection = LayersViewController.getDefault().getVxQueryCollection();\n+        var txCollection = LayersViewController.getDefault().getTxQueryCollection();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODk5MzE5MA=="}, "originalCommit": {"oid": "b237f4fd2abd473f7b90e71217779c9f96f68f9d"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM4Mzk3NTk5OnYy", "diffSide": "RIGHT", "path": "CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/shortcut/LayersViewShortcuts.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQwNDoxNjowMFrOICBiXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQwNDoxNjowMFrOICBiXw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODk5MzI0Nw==", "bodyText": "final", "url": "https://github.com/constellation-app/constellation/pull/911#discussion_r538993247", "createdAt": "2020-12-09T04:16:00Z", "author": {"login": "antares1470"}, "path": "CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/shortcut/LayersViewShortcuts.java", "diffHunk": "@@ -52,74 +54,87 @@\n @NbBundle.Messages(\"CTL_LayersViewShortcuts=Layers View: Shortcuts\")\n public class LayersViewShortcuts extends AbstractAction {\n \n+    private void triggerLayerSelection(final int layerId) {\n+        var vxCollection = LayersViewController.getDefault().getVxQueryCollection();\n+        var txCollection = LayersViewController.getDefault().getTxQueryCollection();\n+\n+        if (vxCollection.getQuery(layerId) != null) {\n+            vxCollection.getQuery(layerId).setVisibility(!vxCollection.getQuery(layerId).getVisibility());\n+        }\n+        if (txCollection.getQuery(layerId) != null) {\n+            txCollection.getQuery(layerId).setVisibility(!txCollection.getQuery(layerId).getVisibility());\n+        }\n+\n+        final int newBitmask = LayersUtilities.calculateCurrentLayerSelectionBitMask(vxCollection, txCollection);\n+\n+        PluginExecution.withPlugin(new UpdateLayerSelectionPlugin(newBitmask))\n+                .executeLater(GraphManager.getDefault().getActiveGraph());\n+\n+        Future<?> future = LayersViewController.getDefault().writeState();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b237f4fd2abd473f7b90e71217779c9f96f68f9d"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM4Mzk3NjQ2OnYy", "diffSide": "RIGHT", "path": "CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/shortcut/LayersViewShortcuts.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQwNDoxNjowOVrOICBimA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQwNDoxNjowOVrOICBimA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODk5MzMwNA==", "bodyText": "both exceptions final", "url": "https://github.com/constellation-app/constellation/pull/911#discussion_r538993304", "createdAt": "2020-12-09T04:16:09Z", "author": {"login": "antares1470"}, "path": "CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/shortcut/LayersViewShortcuts.java", "diffHunk": "@@ -52,74 +54,87 @@\n @NbBundle.Messages(\"CTL_LayersViewShortcuts=Layers View: Shortcuts\")\n public class LayersViewShortcuts extends AbstractAction {\n \n+    private void triggerLayerSelection(final int layerId) {\n+        var vxCollection = LayersViewController.getDefault().getVxQueryCollection();\n+        var txCollection = LayersViewController.getDefault().getTxQueryCollection();\n+\n+        if (vxCollection.getQuery(layerId) != null) {\n+            vxCollection.getQuery(layerId).setVisibility(!vxCollection.getQuery(layerId).getVisibility());\n+        }\n+        if (txCollection.getQuery(layerId) != null) {\n+            txCollection.getQuery(layerId).setVisibility(!txCollection.getQuery(layerId).getVisibility());\n+        }\n+\n+        final int newBitmask = LayersUtilities.calculateCurrentLayerSelectionBitMask(vxCollection, txCollection);\n+\n+        PluginExecution.withPlugin(new UpdateLayerSelectionPlugin(newBitmask))\n+                .executeLater(GraphManager.getDefault().getActiveGraph());\n+\n+        Future<?> future = LayersViewController.getDefault().writeState();\n+\n+        try {\n+            future.get();\n+        } catch (InterruptedException ex) {\n+            Exceptions.printStackTrace(ex);\n+            Thread.currentThread().interrupt();\n+        } catch (ExecutionException ex) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b237f4fd2abd473f7b90e71217779c9f96f68f9d"}, "originalPosition": 36}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM4Mzk3Njg0OnYy", "diffSide": "RIGHT", "path": "CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/shortcut/LayersViewShortcuts.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQwNDoxNjoyMFrOICBiyw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQwNDoxNjoyMFrOICBiyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODk5MzM1NQ==", "bodyText": "final", "url": "https://github.com/constellation-app/constellation/pull/911#discussion_r538993355", "createdAt": "2020-12-09T04:16:20Z", "author": {"login": "antares1470"}, "path": "CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/shortcut/LayersViewShortcuts.java", "diffHunk": "@@ -52,74 +54,87 @@\n @NbBundle.Messages(\"CTL_LayersViewShortcuts=Layers View: Shortcuts\")\n public class LayersViewShortcuts extends AbstractAction {\n \n+    private void triggerLayerSelection(final int layerId) {\n+        var vxCollection = LayersViewController.getDefault().getVxQueryCollection();\n+        var txCollection = LayersViewController.getDefault().getTxQueryCollection();\n+\n+        if (vxCollection.getQuery(layerId) != null) {\n+            vxCollection.getQuery(layerId).setVisibility(!vxCollection.getQuery(layerId).getVisibility());\n+        }\n+        if (txCollection.getQuery(layerId) != null) {\n+            txCollection.getQuery(layerId).setVisibility(!txCollection.getQuery(layerId).getVisibility());\n+        }\n+\n+        final int newBitmask = LayersUtilities.calculateCurrentLayerSelectionBitMask(vxCollection, txCollection);\n+\n+        PluginExecution.withPlugin(new UpdateLayerSelectionPlugin(newBitmask))\n+                .executeLater(GraphManager.getDefault().getActiveGraph());\n+\n+        Future<?> future = LayersViewController.getDefault().writeState();\n+\n+        try {\n+            future.get();\n+        } catch (InterruptedException ex) {\n+            Exceptions.printStackTrace(ex);\n+            Thread.currentThread().interrupt();\n+        } catch (ExecutionException ex) {\n+            Exceptions.printStackTrace(ex);\n+        }\n+\n+        if (!LayersViewController.getDefault().getParentVisibility()) {\n+            LayersViewController.getDefault().readStateFuture();\n+            LayersViewController.getDefault().updateQueries(GraphManager.getDefault().getActiveGraph());\n+        }\n+    }\n+\n     @Override\n     public void actionPerformed(ActionEvent e) {\n-        Future<?> enableLayerFuture = null;\n-\n         final String hotkey = e.getActionCommand();\n         switch (hotkey) {\n             case \"CA-L\":\n                 PluginExecution.withPlugin(new NewLayerPlugin()).executeLater(GraphManager.getDefault().getActiveGraph());\n                 break;\n             case \"CA-D\":\n-                PluginExecution.withPlugin(new DeselectAllLayersPlugin()).executeLater(GraphManager.getDefault().getActiveGraph());\n+                Future<?> deselectFuture = PluginExecution.withPlugin(new DeselectAllLayersPlugin()).executeLater(GraphManager.getDefault().getActiveGraph());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b237f4fd2abd473f7b90e71217779c9f96f68f9d"}, "originalPosition": 57}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM4Mzk3NzIzOnYy", "diffSide": "RIGHT", "path": "CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/shortcut/LayersViewShortcuts.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQwNDoxNjozMFrOICBjAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQwNDoxNjozMFrOICBjAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODk5MzQxMA==", "bodyText": "both exceptions final", "url": "https://github.com/constellation-app/constellation/pull/911#discussion_r538993410", "createdAt": "2020-12-09T04:16:30Z", "author": {"login": "antares1470"}, "path": "CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/shortcut/LayersViewShortcuts.java", "diffHunk": "@@ -52,74 +54,87 @@\n @NbBundle.Messages(\"CTL_LayersViewShortcuts=Layers View: Shortcuts\")\n public class LayersViewShortcuts extends AbstractAction {\n \n+    private void triggerLayerSelection(final int layerId) {\n+        var vxCollection = LayersViewController.getDefault().getVxQueryCollection();\n+        var txCollection = LayersViewController.getDefault().getTxQueryCollection();\n+\n+        if (vxCollection.getQuery(layerId) != null) {\n+            vxCollection.getQuery(layerId).setVisibility(!vxCollection.getQuery(layerId).getVisibility());\n+        }\n+        if (txCollection.getQuery(layerId) != null) {\n+            txCollection.getQuery(layerId).setVisibility(!txCollection.getQuery(layerId).getVisibility());\n+        }\n+\n+        final int newBitmask = LayersUtilities.calculateCurrentLayerSelectionBitMask(vxCollection, txCollection);\n+\n+        PluginExecution.withPlugin(new UpdateLayerSelectionPlugin(newBitmask))\n+                .executeLater(GraphManager.getDefault().getActiveGraph());\n+\n+        Future<?> future = LayersViewController.getDefault().writeState();\n+\n+        try {\n+            future.get();\n+        } catch (InterruptedException ex) {\n+            Exceptions.printStackTrace(ex);\n+            Thread.currentThread().interrupt();\n+        } catch (ExecutionException ex) {\n+            Exceptions.printStackTrace(ex);\n+        }\n+\n+        if (!LayersViewController.getDefault().getParentVisibility()) {\n+            LayersViewController.getDefault().readStateFuture();\n+            LayersViewController.getDefault().updateQueries(GraphManager.getDefault().getActiveGraph());\n+        }\n+    }\n+\n     @Override\n     public void actionPerformed(ActionEvent e) {\n-        Future<?> enableLayerFuture = null;\n-\n         final String hotkey = e.getActionCommand();\n         switch (hotkey) {\n             case \"CA-L\":\n                 PluginExecution.withPlugin(new NewLayerPlugin()).executeLater(GraphManager.getDefault().getActiveGraph());\n                 break;\n             case \"CA-D\":\n-                PluginExecution.withPlugin(new DeselectAllLayersPlugin()).executeLater(GraphManager.getDefault().getActiveGraph());\n+                Future<?> deselectFuture = PluginExecution.withPlugin(new DeselectAllLayersPlugin()).executeLater(GraphManager.getDefault().getActiveGraph());\n+                try {\n+                    deselectFuture.get();\n+                } catch (InterruptedException ex) {\n+                    Exceptions.printStackTrace(ex);\n+                    Thread.currentThread().interrupt();\n+                } catch (ExecutionException ex) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b237f4fd2abd473f7b90e71217779c9f96f68f9d"}, "originalPosition": 63}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2150, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}