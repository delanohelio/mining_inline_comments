{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI5Mjc5Mjk2", "number": 901, "title": "Refresh quality control state only when necessary", "bodyText": "Description of the Change\nThis change checks the mod counters of the quality control view to refresh on any change that isn't a camera move, or element selection. any other change should trigger a recalculation while the view is open.\n\nAlternate Designs\nTry to listen to any of the attribute within each rule. Possibly not scalable.\n\nWhy Should This Be In Core?\nReduces unnecessary refreshes\n\nBenefits\nMore performant\n\nPossible Drawbacks\nNone realised\n\nVerification Process\nOpening and closing, performing actions to verify that the view listens to things it needs. Avoids refreshing when it doesnt need to.\n\nApplicable Issues\n#897", "createdAt": "2020-11-30T05:05:19Z", "url": "https://github.com/constellation-app/constellation/pull/901", "merged": true, "mergeCommit": {"oid": "de11151565adf71c406468c6c4d2fd361dbff193"}, "closed": true, "closedAt": "2020-12-04T03:19:34Z", "author": {"login": "aldebaran30701"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdheDDCgH2gAyNTI5Mjc5Mjk2OmUxNmJiYzI0MjI2Mjk1MjI1ZmUzZTI1NjQxYzQ2MTM5MTg5YzczNmU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABditoBPAFqTU0NDU5NjY5OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e16bbc24226295225fe3e25641c46139189c736e", "author": {"user": {"login": "aldebaran30701", "name": null}}, "url": "https://github.com/constellation-app/constellation/commit/e16bbc24226295225fe3e25641c46139189c736e", "committedDate": "2020-11-30T04:57:13Z", "message": "add modification counters\n\nrefresh only once a mod count that matters changes."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0NDg5NDQ1", "url": "https://github.com/constellation-app/constellation/pull/901#pullrequestreview-544489445", "createdAt": "2020-12-03T22:01:34Z", "commit": {"oid": "e16bbc24226295225fe3e25641c46139189c736e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QyMjowMTozNFrOH-29wg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QyMjowMTozNFrOH-29wg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTY3NDMwNg==", "bodyText": "We will want the quality control state to update with selection changes so it would be good to remove these 2 conditions (and consequently can probably remove thisvxselectedAttributeModificationCounter and thistxselectedAttributeModificationCounter altogether)", "url": "https://github.com/constellation-app/constellation/pull/901#discussion_r535674306", "createdAt": "2020-12-03T22:01:34Z", "author": {"login": "antares1470"}, "path": "CoreQualityControlView/src/au/gov/asd/tac/constellation/views/qualitycontrol/daemon/QualityControlAutoVetter.java", "diffHunk": "@@ -152,10 +156,25 @@ public void graphChanged(final GraphChangeEvent event) {\n         if (graph != null) {\n             final ReadableGraph readableGraph = graph.getReadableGraph();\n             try {\n+                final int cameraAttribute = VisualConcept.GraphAttribute.CAMERA.get(readableGraph);\n+                final int vxselectedAttribute = VisualConcept.VertexAttribute.SELECTED.get(readableGraph);\n+                final int txselectedAttribute = VisualConcept.VertexAttribute.SELECTED.get(readableGraph);\n+\n                 final long thisGlobalModificationCounter = readableGraph.getGlobalModificationCounter();\n+                final long thisCameraModificationCounter = readableGraph.getValueModificationCounter(cameraAttribute);\n+                final long thisvxselectedAttributeModificationCounter = readableGraph.getValueModificationCounter(vxselectedAttribute);\n+                final long thistxselectedAttributeModificationCounter = readableGraph.getValueModificationCounter(txselectedAttribute);\n+\n                 if (thisGlobalModificationCounter != lastGlobalModificationCounter) {\n-                    updateQualityControlState(graph);\n+                    if (lastCameraModificationCounter == thisCameraModificationCounter\n+                            && lastvxselectedAttributeModificationCounter == thisvxselectedAttributeModificationCounter\n+                            && lasttxselectedAttributeModificationCounter == thistxselectedAttributeModificationCounter) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e16bbc24226295225fe3e25641c46139189c736e"}, "originalPosition": 44}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "93cb5976da20a2cd3599ee7c8f7d3b7a7f3e0c0c", "author": {"user": {"login": "aldebaran30701", "name": null}}, "url": "https://github.com/constellation-app/constellation/commit/93cb5976da20a2cd3599ee7c8f7d3b7a7f3e0c0c", "committedDate": "2020-12-04T01:17:38Z", "message": "Remove selected attribute change avoidance"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0NTk2Njk4", "url": "https://github.com/constellation-app/constellation/pull/901#pullrequestreview-544596698", "createdAt": "2020-12-04T01:40:06Z", "commit": {"oid": "93cb5976da20a2cd3599ee7c8f7d3b7a7f3e0c0c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3525, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}