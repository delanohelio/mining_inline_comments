{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIwMTQ1MTg4", "number": 534, "title": "Add in chained hashmods (more than one csv to be able to run at a single time).", "bodyText": "Description of the Change\nAdd in the concept of being able to run multiple CSV files at once.\nAlternate Designs\nNil considered (already have the option of a single CSV file)\nWhy Should This Be In Core?\nHashmod is already in experimental in core\nBenefits\nAllow multiple csv files that hold data to be run at the same time against a pull of data.\nPossible Drawbacks\nNil.  Still have to have explicity named attributes as column headers (also have to be correctly upper/lower cased)\nVerification Process\nHave been checking with home brewed csv files.\nApplicable Issues\nNil.", "createdAt": "2020-05-19T14:11:01Z", "url": "https://github.com/constellation-app/constellation/pull/534", "merged": true, "mergeCommit": {"oid": "09504a6cf8bf4d693681ea55811f43d340185cd4"}, "closed": true, "closedAt": "2020-05-25T11:11:32Z", "author": {"login": "CrucisGamma"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABciNLj3AH2gAyNDIwMTQ1MTg4OmUwZmE0NzcwMzk1MGY2MTY1MjZhODgzNWIzODcyNGJjM2Q3NmVkYzU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcjnLtRgFqTQxNjU3NzcwOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e0fa47703950f616526a8835b38724bc3d76edc5", "author": {"user": {"login": "CrucisGamma", "name": null}}, "url": "https://github.com/constellation-app/constellation/commit/e0fa47703950f616526a8835b38724bc3d76edc5", "committedDate": "2020-05-17T15:40:54Z", "message": "Fixups from code review for hashmod"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "13b89606f20b109702c05b17ddc8bc31db05c4cc", "author": {"user": {"login": "CrucisGamma", "name": null}}, "url": "https://github.com/constellation-app/constellation/commit/13b89606f20b109702c05b17ddc8bc31db05c4cc", "committedDate": "2020-05-18T04:09:56Z", "message": "Fixups from code review for hashmod"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "972db9c26a3660deee76db30bc318c3c7e89228a", "author": {"user": {"login": "CrucisGamma", "name": null}}, "url": "https://github.com/constellation-app/constellation/commit/972db9c26a3660deee76db30bc318c3c7e89228a", "committedDate": "2020-05-19T14:05:15Z", "message": "Merge branch 'master' of https://github.com/CrucisGamma/constellation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d254fbd66dd2e5c1c79d86bafbadf20325d88d49", "author": {"user": {"login": "CrucisGamma", "name": null}}, "url": "https://github.com/constellation-app/constellation/commit/d254fbd66dd2e5c1c79d86bafbadf20325d88d49", "committedDate": "2020-05-19T14:06:32Z", "message": "Add in the concept of chained hashmods to be run one after another."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ae658d1e081267775dd1f7f7b1b1d406ee08a42", "author": {"user": {"login": "CrucisGamma", "name": null}}, "url": "https://github.com/constellation-app/constellation/commit/9ae658d1e081267775dd1f7f7b1b1d406ee08a42", "committedDate": "2020-05-20T04:59:25Z", "message": "Add in the concept of chained hashmods to be run one after another."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e4ccb3093e8d7ec49252f25502e4bb96de371c93", "author": {"user": {"login": "CrucisGamma", "name": null}}, "url": "https://github.com/constellation-app/constellation/commit/e4ccb3093e8d7ec49252f25502e4bb96de371c93", "committedDate": "2020-05-20T17:01:09Z", "message": "Add in creating new named attributes."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1NzU2ODkw", "url": "https://github.com/constellation-app/constellation/pull/534#pullrequestreview-415756890", "createdAt": "2020-05-20T22:25:09Z", "commit": {"oid": "e4ccb3093e8d7ec49252f25502e4bb96de371c93"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQyMjoyNToxMFrOGYf8nA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQyMjozNzo1OVrOGYgPVQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODM0MjQyOA==", "bodyText": "Does the for loop need to run over the first chained hashmod in the array? If so, you'll need to start at i=0", "url": "https://github.com/constellation-app/constellation/pull/534#discussion_r428342428", "createdAt": "2020-05-20T22:25:10Z", "author": {"login": "antares1470"}, "path": "CoreGraphUtilities/src/au/gov/asd/tac/constellation/graph/utilities/hashmod/HashmodAction.java", "diffHunk": "@@ -65,14 +67,23 @@ public void actionPerformed(final ActionEvent ev) {\n         final DialogDescriptor dialog = new DialogDescriptor(hashmodPanel, Bundle.MSG_Title(), true, e -> {\n             if (e.getActionCommand().equals(\"OK\")) {\n                 final Hashmod hashmod1 = hashmodPanel.getHashmod();\n+                final Boolean isChainedHashmods = hashmodPanel.isChainedHashmods();\n+                final boolean createAttributes = hashmodPanel.getCreateAttributes();\n+                final Hashmod[] chainedHashmods = hashmodPanel.getChainedHashmods();\n+                final int numChainedHashmods = hashmodPanel.numChainedHashmods();\n                 final Boolean createNonMatchingKeysVertexes = hashmodPanel.getCreateVertexes();\n                 hashmodPanel.setAttributeNames(hashmod1.getCSVKey(), hashmod1.getCSVHeader(1), hashmod1.getCSVHeader(2));\n \n                 PluginExecution.withPlugin(new SimpleEditPlugin(Bundle.CTL_HashmodAction()) {\n                     @Override\n                     public void edit(final GraphWriteMethods wg, final PluginInteraction interaction, final PluginParameters parameters) throws InterruptedException {\n                         if (hashmod1 != null) {\n-                            HashmodAction.run(wg, interaction, hashmod1, createNonMatchingKeysVertexes);\n+                            HashmodAction.run(wg, interaction, hashmod1, createNonMatchingKeysVertexes, true, createAttributes);\n+                        }\n+                        if (isChainedHashmods && numChainedHashmods >= 2) {\n+                            for (int i = 1; i < numChainedHashmods; i++) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e4ccb3093e8d7ec49252f25502e4bb96de371c93"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODM0MzgzMg==", "bodyText": "StringUtils.isNotBlank(nextAttr) instead of !StringUtils.isBlank(nextAttr)", "url": "https://github.com/constellation-app/constellation/pull/534#discussion_r428343832", "createdAt": "2020-05-20T22:28:32Z", "author": {"login": "antares1470"}, "path": "CoreGraphUtilities/src/au/gov/asd/tac/constellation/graph/utilities/hashmod/HashmodAction.java", "diffHunk": "@@ -103,6 +114,13 @@ private static void run(final GraphWriteMethods wg, final PluginInteraction inte\n                 attributeValues[attrCount] = nextAttribute;\n                 csvValues[attrCount] = i;\n                 attrCount++;\n+            } else if (createAttributes && !StringUtils.isBlank(nextAttr)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e4ccb3093e8d7ec49252f25502e4bb96de371c93"}, "originalPosition": 54}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODM0NjM1MA==", "bodyText": "Instead of \"string\", use StringAttributeDescription.ATTRIBUTE_NAME", "url": "https://github.com/constellation-app/constellation/pull/534#discussion_r428346350", "createdAt": "2020-05-20T22:35:20Z", "author": {"login": "antares1470"}, "path": "CoreGraphUtilities/src/au/gov/asd/tac/constellation/graph/utilities/hashmod/HashmodAction.java", "diffHunk": "@@ -103,6 +114,13 @@ private static void run(final GraphWriteMethods wg, final PluginInteraction inte\n                 attributeValues[attrCount] = nextAttribute;\n                 csvValues[attrCount] = i;\n                 attrCount++;\n+            } else if (createAttributes && !StringUtils.isBlank(nextAttr)) {\n+                final int newAttribute = wg.addAttribute(GraphElementType.VERTEX, \"string\", nextAttr, nextAttr, \"\", null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e4ccb3093e8d7ec49252f25502e4bb96de371c93"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODM0NzIyMQ==", "bodyText": "Use the ternary operator here", "url": "https://github.com/constellation-app/constellation/pull/534#discussion_r428347221", "createdAt": "2020-05-20T22:37:59Z", "author": {"login": "antares1470"}, "path": "CoreGraphUtilities/src/au/gov/asd/tac/constellation/graph/utilities/hashmod/HashmodPanel.java", "diffHunk": "@@ -55,8 +62,48 @@ public HashmodPanel(final Hashmod hashmod) {\n         initComponents();\n     }\n \n-    public Hashmod getHashmod() {\n-        return new Hashmod(hashmodCSVFileStr);\n+    public final Hashmod getHashmod() {\n+        if (!isChainedHashmods()) {\n+            return new Hashmod(hashmodCSVFileStr);\n+        }\n+        if (numChainedHashmods > 0) {\n+            return chainedHashmods[0];\n+        }\n+        return null;\n+    }\n+\n+    public Boolean isChainedHashmods() {\n+        return isChainedHashmods;\n+    }\n+\n+    public final Hashmod[] getChainedHashmods() {\n+        if (isChainedHashmods()) {\n+            return chainedHashmods;\n+        }\n+        return null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e4ccb3093e8d7ec49252f25502e4bb96de371c93"}, "originalPosition": 48}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ec977c78dd2571a6b4f27efc786e39bbebab8711", "author": {"user": {"login": "CrucisGamma", "name": null}}, "url": "https://github.com/constellation-app/constellation/commit/ec977c78dd2571a6b4f27efc786e39bbebab8711", "committedDate": "2020-05-21T14:32:35Z", "message": "Add in creating new named attributes.  Last .field in the name of the column header specifies the name of the attribute type (or you get a string)."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2NTc3NzA4", "url": "https://github.com/constellation-app/constellation/pull/534#pullrequestreview-416577708", "createdAt": "2020-05-22T00:32:18Z", "commit": {"oid": "ec977c78dd2571a6b4f27efc786e39bbebab8711"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQwMDozMjoxOFrOGZHIDA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQwMDozMjoxOFrOGZHIDA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk4NDMzMg==", "bodyText": "This panel looks something that could be done using plugin parameters and a standalone plugin. This would allow more flexibility in how the plugin can be used, and not lock the UI elements down to the EDT (Swing thread).", "url": "https://github.com/constellation-app/constellation/pull/534#discussion_r428984332", "createdAt": "2020-05-22T00:32:18Z", "author": {"login": "cygnus-x-1"}, "path": "CoreGraphUtilities/src/au/gov/asd/tac/constellation/graph/utilities/hashmod/HashmodAction.java", "diffHunk": "@@ -65,14 +69,23 @@ public void actionPerformed(final ActionEvent ev) {\n         final DialogDescriptor dialog = new DialogDescriptor(hashmodPanel, Bundle.MSG_Title(), true, e -> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ec977c78dd2571a6b4f27efc786e39bbebab8711"}, "originalPosition": 26}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3770, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}