{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE4MTE3NjI0", "number": 890, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMTo0NToxN1rOE3bMVQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMTo1MzoxNVrOE3bWDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2NTUyNjYxOnYy", "diffSide": "RIGHT", "path": "CoreInteractiveGraph/src/au/gov/asd/tac/constellation/graph/interaction/visual/DefaultInteractionEventHandler.java", "isResolved": true, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMTo0NToxN1rOHww0uA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQwNTowNDoyNFrOH1dUVw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDg5MzYyNA==", "bodyText": "Is there a reason for using the Ints library rather than using draggedNodeIds.toArray(new int[])?", "url": "https://github.com/constellation-app/constellation/pull/890#discussion_r520893624", "createdAt": "2020-11-10T21:45:17Z", "author": {"login": "antares1470"}, "path": "CoreInteractiveGraph/src/au/gov/asd/tac/constellation/graph/interaction/visual/DefaultInteractionEventHandler.java", "diffHunk": "@@ -1006,13 +1006,21 @@ private void performDrag(GraphWriteMethods wg, final Camera camera, final Point\n \n         final Vector3f delta = visualInteraction.convertTranslationToDrag(camera, position, from, to);\n \n+        final int xAttribute = VisualConcept.VertexAttribute.X.get(wg);\n+        final int yAttribute = VisualConcept.VertexAttribute.Y.get(wg);\n+        final int zAttribute = VisualConcept.VertexAttribute.Z.get(wg);\n+        final int x2Attribute = VisualConcept.VertexAttribute.X2.get(wg);\n+        final int y2Attribute = VisualConcept.VertexAttribute.Y2.get(wg);\n+        final int z2Attribute = VisualConcept.VertexAttribute.Z2.get(wg);\n+        final int cameraAttribute = VisualConcept.GraphAttribute.CAMERA.get(wg);\n+        \n         draggedNodeIds.forEach(vertexId -> {\n-            final Vector3f currentPos = VisualGraphUtilities.getMixedVertexCoordinates(wg, vertexId);\n+            final Vector3f currentPos = VisualGraphUtilities.getMixedVertexCoordinates(wg, vertexId, xAttribute, x2Attribute, yAttribute, y2Attribute, zAttribute, z2Attribute, cameraAttribute);\n             currentPos.add(delta);\n-            VisualGraphUtilities.setVertexCoordinates(wg, currentPos, vertexId);\n+            VisualGraphUtilities.setVertexCoordinates(wg, currentPos, vertexId, xAttribute, yAttribute, zAttribute);\n         });\n \n-        scheduleXYZChangeOperation(wg.getVertexCount());\n+        scheduleXYZChangeOperation(Ints.toArray(draggedNodeIds));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0b4466bdd8de7782f39162630f2f8bcf14feafdc"}, "originalPosition": 67}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTAwMjIwNQ==", "bodyText": "No reason, it was just the first method I found on google", "url": "https://github.com/constellation-app/constellation/pull/890#discussion_r521002205", "createdAt": "2020-11-11T01:39:23Z", "author": {"login": "Nova-2119"}, "path": "CoreInteractiveGraph/src/au/gov/asd/tac/constellation/graph/interaction/visual/DefaultInteractionEventHandler.java", "diffHunk": "@@ -1006,13 +1006,21 @@ private void performDrag(GraphWriteMethods wg, final Camera camera, final Point\n \n         final Vector3f delta = visualInteraction.convertTranslationToDrag(camera, position, from, to);\n \n+        final int xAttribute = VisualConcept.VertexAttribute.X.get(wg);\n+        final int yAttribute = VisualConcept.VertexAttribute.Y.get(wg);\n+        final int zAttribute = VisualConcept.VertexAttribute.Z.get(wg);\n+        final int x2Attribute = VisualConcept.VertexAttribute.X2.get(wg);\n+        final int y2Attribute = VisualConcept.VertexAttribute.Y2.get(wg);\n+        final int z2Attribute = VisualConcept.VertexAttribute.Z2.get(wg);\n+        final int cameraAttribute = VisualConcept.GraphAttribute.CAMERA.get(wg);\n+        \n         draggedNodeIds.forEach(vertexId -> {\n-            final Vector3f currentPos = VisualGraphUtilities.getMixedVertexCoordinates(wg, vertexId);\n+            final Vector3f currentPos = VisualGraphUtilities.getMixedVertexCoordinates(wg, vertexId, xAttribute, x2Attribute, yAttribute, y2Attribute, zAttribute, z2Attribute, cameraAttribute);\n             currentPos.add(delta);\n-            VisualGraphUtilities.setVertexCoordinates(wg, currentPos, vertexId);\n+            VisualGraphUtilities.setVertexCoordinates(wg, currentPos, vertexId, xAttribute, yAttribute, zAttribute);\n         });\n \n-        scheduleXYZChangeOperation(wg.getVertexCount());\n+        scheduleXYZChangeOperation(Ints.toArray(draggedNodeIds));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDg5MzYyNA=="}, "originalCommit": {"oid": "0b4466bdd8de7782f39162630f2f8bcf14feafdc"}, "originalPosition": 67}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTM4OTU5OA==", "bodyText": "@Nova-2119 I wouldn't mind using @antares1470's suggestion. One less library use has to be good right?", "url": "https://github.com/constellation-app/constellation/pull/890#discussion_r521389598", "createdAt": "2020-11-11T14:19:41Z", "author": {"login": "arcturus2"}, "path": "CoreInteractiveGraph/src/au/gov/asd/tac/constellation/graph/interaction/visual/DefaultInteractionEventHandler.java", "diffHunk": "@@ -1006,13 +1006,21 @@ private void performDrag(GraphWriteMethods wg, final Camera camera, final Point\n \n         final Vector3f delta = visualInteraction.convertTranslationToDrag(camera, position, from, to);\n \n+        final int xAttribute = VisualConcept.VertexAttribute.X.get(wg);\n+        final int yAttribute = VisualConcept.VertexAttribute.Y.get(wg);\n+        final int zAttribute = VisualConcept.VertexAttribute.Z.get(wg);\n+        final int x2Attribute = VisualConcept.VertexAttribute.X2.get(wg);\n+        final int y2Attribute = VisualConcept.VertexAttribute.Y2.get(wg);\n+        final int z2Attribute = VisualConcept.VertexAttribute.Z2.get(wg);\n+        final int cameraAttribute = VisualConcept.GraphAttribute.CAMERA.get(wg);\n+        \n         draggedNodeIds.forEach(vertexId -> {\n-            final Vector3f currentPos = VisualGraphUtilities.getMixedVertexCoordinates(wg, vertexId);\n+            final Vector3f currentPos = VisualGraphUtilities.getMixedVertexCoordinates(wg, vertexId, xAttribute, x2Attribute, yAttribute, y2Attribute, zAttribute, z2Attribute, cameraAttribute);\n             currentPos.add(delta);\n-            VisualGraphUtilities.setVertexCoordinates(wg, currentPos, vertexId);\n+            VisualGraphUtilities.setVertexCoordinates(wg, currentPos, vertexId, xAttribute, yAttribute, zAttribute);\n         });\n \n-        scheduleXYZChangeOperation(wg.getVertexCount());\n+        scheduleXYZChangeOperation(Ints.toArray(draggedNodeIds));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDg5MzYyNA=="}, "originalCommit": {"oid": "0b4466bdd8de7782f39162630f2f8bcf14feafdc"}, "originalPosition": 67}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTc4ODM5NA==", "bodyText": "I cant seem to get it to work :/", "url": "https://github.com/constellation-app/constellation/pull/890#discussion_r521788394", "createdAt": "2020-11-12T03:04:54Z", "author": {"login": "Nova-2119"}, "path": "CoreInteractiveGraph/src/au/gov/asd/tac/constellation/graph/interaction/visual/DefaultInteractionEventHandler.java", "diffHunk": "@@ -1006,13 +1006,21 @@ private void performDrag(GraphWriteMethods wg, final Camera camera, final Point\n \n         final Vector3f delta = visualInteraction.convertTranslationToDrag(camera, position, from, to);\n \n+        final int xAttribute = VisualConcept.VertexAttribute.X.get(wg);\n+        final int yAttribute = VisualConcept.VertexAttribute.Y.get(wg);\n+        final int zAttribute = VisualConcept.VertexAttribute.Z.get(wg);\n+        final int x2Attribute = VisualConcept.VertexAttribute.X2.get(wg);\n+        final int y2Attribute = VisualConcept.VertexAttribute.Y2.get(wg);\n+        final int z2Attribute = VisualConcept.VertexAttribute.Z2.get(wg);\n+        final int cameraAttribute = VisualConcept.GraphAttribute.CAMERA.get(wg);\n+        \n         draggedNodeIds.forEach(vertexId -> {\n-            final Vector3f currentPos = VisualGraphUtilities.getMixedVertexCoordinates(wg, vertexId);\n+            final Vector3f currentPos = VisualGraphUtilities.getMixedVertexCoordinates(wg, vertexId, xAttribute, x2Attribute, yAttribute, y2Attribute, zAttribute, z2Attribute, cameraAttribute);\n             currentPos.add(delta);\n-            VisualGraphUtilities.setVertexCoordinates(wg, currentPos, vertexId);\n+            VisualGraphUtilities.setVertexCoordinates(wg, currentPos, vertexId, xAttribute, yAttribute, zAttribute);\n         });\n \n-        scheduleXYZChangeOperation(wg.getVertexCount());\n+        scheduleXYZChangeOperation(Ints.toArray(draggedNodeIds));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDg5MzYyNA=="}, "originalCommit": {"oid": "0b4466bdd8de7782f39162630f2f8bcf14feafdc"}, "originalPosition": 67}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjUyNzA1MQ==", "bodyText": "Alright, lets leave it then. I haven't tried myself  - if we find a way we can update it afterwards.", "url": "https://github.com/constellation-app/constellation/pull/890#discussion_r522527051", "createdAt": "2020-11-13T00:30:39Z", "author": {"login": "arcturus2"}, "path": "CoreInteractiveGraph/src/au/gov/asd/tac/constellation/graph/interaction/visual/DefaultInteractionEventHandler.java", "diffHunk": "@@ -1006,13 +1006,21 @@ private void performDrag(GraphWriteMethods wg, final Camera camera, final Point\n \n         final Vector3f delta = visualInteraction.convertTranslationToDrag(camera, position, from, to);\n \n+        final int xAttribute = VisualConcept.VertexAttribute.X.get(wg);\n+        final int yAttribute = VisualConcept.VertexAttribute.Y.get(wg);\n+        final int zAttribute = VisualConcept.VertexAttribute.Z.get(wg);\n+        final int x2Attribute = VisualConcept.VertexAttribute.X2.get(wg);\n+        final int y2Attribute = VisualConcept.VertexAttribute.Y2.get(wg);\n+        final int z2Attribute = VisualConcept.VertexAttribute.Z2.get(wg);\n+        final int cameraAttribute = VisualConcept.GraphAttribute.CAMERA.get(wg);\n+        \n         draggedNodeIds.forEach(vertexId -> {\n-            final Vector3f currentPos = VisualGraphUtilities.getMixedVertexCoordinates(wg, vertexId);\n+            final Vector3f currentPos = VisualGraphUtilities.getMixedVertexCoordinates(wg, vertexId, xAttribute, x2Attribute, yAttribute, y2Attribute, zAttribute, z2Attribute, cameraAttribute);\n             currentPos.add(delta);\n-            VisualGraphUtilities.setVertexCoordinates(wg, currentPos, vertexId);\n+            VisualGraphUtilities.setVertexCoordinates(wg, currentPos, vertexId, xAttribute, yAttribute, zAttribute);\n         });\n \n-        scheduleXYZChangeOperation(wg.getVertexCount());\n+        scheduleXYZChangeOperation(Ints.toArray(draggedNodeIds));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDg5MzYyNA=="}, "originalCommit": {"oid": "0b4466bdd8de7782f39162630f2f8bcf14feafdc"}, "originalPosition": 67}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTgxNjkxOQ==", "bodyText": "I cant seem to get it to work :/\nSorry ^thought I had sent this message days ago, apparently I never clicked comment..", "url": "https://github.com/constellation-app/constellation/pull/890#discussion_r525816919", "createdAt": "2020-11-18T05:04:24Z", "author": {"login": "Nova-2119"}, "path": "CoreInteractiveGraph/src/au/gov/asd/tac/constellation/graph/interaction/visual/DefaultInteractionEventHandler.java", "diffHunk": "@@ -1006,13 +1006,21 @@ private void performDrag(GraphWriteMethods wg, final Camera camera, final Point\n \n         final Vector3f delta = visualInteraction.convertTranslationToDrag(camera, position, from, to);\n \n+        final int xAttribute = VisualConcept.VertexAttribute.X.get(wg);\n+        final int yAttribute = VisualConcept.VertexAttribute.Y.get(wg);\n+        final int zAttribute = VisualConcept.VertexAttribute.Z.get(wg);\n+        final int x2Attribute = VisualConcept.VertexAttribute.X2.get(wg);\n+        final int y2Attribute = VisualConcept.VertexAttribute.Y2.get(wg);\n+        final int z2Attribute = VisualConcept.VertexAttribute.Z2.get(wg);\n+        final int cameraAttribute = VisualConcept.GraphAttribute.CAMERA.get(wg);\n+        \n         draggedNodeIds.forEach(vertexId -> {\n-            final Vector3f currentPos = VisualGraphUtilities.getMixedVertexCoordinates(wg, vertexId);\n+            final Vector3f currentPos = VisualGraphUtilities.getMixedVertexCoordinates(wg, vertexId, xAttribute, x2Attribute, yAttribute, y2Attribute, zAttribute, z2Attribute, cameraAttribute);\n             currentPos.add(delta);\n-            VisualGraphUtilities.setVertexCoordinates(wg, currentPos, vertexId);\n+            VisualGraphUtilities.setVertexCoordinates(wg, currentPos, vertexId, xAttribute, yAttribute, zAttribute);\n         });\n \n-        scheduleXYZChangeOperation(wg.getVertexCount());\n+        scheduleXYZChangeOperation(Ints.toArray(draggedNodeIds));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDg5MzYyNA=="}, "originalCommit": {"oid": "0b4466bdd8de7782f39162630f2f8bcf14feafdc"}, "originalPosition": 67}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2NTU1MTQ5OnYy", "diffSide": "RIGHT", "path": "CoreVisualGraph/src/au/gov/asd/tac/constellation/graph/visual/utilities/VisualGraphUtilities.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMTo1MzoxNVrOHwxELg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQwMjowNDowOFrOHw4gVQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDg5NzU4Mg==", "bodyText": "Neither or these will be null as the functions generating them are always returning new Vector3f objects. Therefore you can probably omit the if statement", "url": "https://github.com/constellation-app/constellation/pull/890#discussion_r520897582", "createdAt": "2020-11-10T21:53:15Z", "author": {"login": "antares1470"}, "path": "CoreVisualGraph/src/au/gov/asd/tac/constellation/graph/visual/utilities/VisualGraphUtilities.java", "diffHunk": "@@ -99,6 +124,16 @@ public static Vector3f getMixedVertexCoordinates(final GraphReadMethods graph, f\n         return coordinates;\n     }\n \n+    public static Vector3f getMixedVertexCoordinates(final GraphReadMethods graph, final int vertexId, final int xAttribute, final int x2Attribute, final int yAttribute, final int y2Attribute, final int zAttribute, final int z2Attribute, final int cameraAttribute) {\n+        final Vector3f coordinates = getVertexCoordinates(graph, vertexId, xAttribute, yAttribute, zAttribute);\n+        final Vector3f altCoordinates = getAlternateVertexCoordinates(graph, vertexId, x2Attribute, y2Attribute, z2Attribute);\n+        final float mixRatio = getCamera(graph, cameraAttribute).getMixRatio();\n+        if (coordinates != null && altCoordinates != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0b4466bdd8de7782f39162630f2f8bcf14feafdc"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTAxOTQ3Nw==", "bodyText": "Fixed", "url": "https://github.com/constellation-app/constellation/pull/890#discussion_r521019477", "createdAt": "2020-11-11T02:04:08Z", "author": {"login": "Nova-2119"}, "path": "CoreVisualGraph/src/au/gov/asd/tac/constellation/graph/visual/utilities/VisualGraphUtilities.java", "diffHunk": "@@ -99,6 +124,16 @@ public static Vector3f getMixedVertexCoordinates(final GraphReadMethods graph, f\n         return coordinates;\n     }\n \n+    public static Vector3f getMixedVertexCoordinates(final GraphReadMethods graph, final int vertexId, final int xAttribute, final int x2Attribute, final int yAttribute, final int y2Attribute, final int zAttribute, final int z2Attribute, final int cameraAttribute) {\n+        final Vector3f coordinates = getVertexCoordinates(graph, vertexId, xAttribute, yAttribute, zAttribute);\n+        final Vector3f altCoordinates = getAlternateVertexCoordinates(graph, vertexId, x2Attribute, y2Attribute, z2Attribute);\n+        final float mixRatio = getCamera(graph, cameraAttribute).getMixRatio();\n+        if (coordinates != null && altCoordinates != null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDg5NzU4Mg=="}, "originalCommit": {"oid": "0b4466bdd8de7782f39162630f2f8bcf14feafdc"}, "originalPosition": 61}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2137, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}