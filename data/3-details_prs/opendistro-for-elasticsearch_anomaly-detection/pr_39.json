{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY5MjU0NDY5", "number": 39, "title": "adjust preview configuration for more data", "bodyText": "Currently, for preview requests, up to 60 data points are sampled and up to 200 results are returned to the client to reduce latency from processing and network. To improve visualization for human eyes, the changes increase the number of samples to match the requested time range, the upper limit of samples, and the number of returned results to clients.", "createdAt": "2020-01-30T19:50:24Z", "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/pull/39", "merged": true, "mergeCommit": {"oid": "fc2c568da85d91ed52b88396dadc5618eb02dfa7"}, "closed": true, "closedAt": "2020-02-04T01:46:47Z", "author": {"login": "wnbts"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb_4ShEAFqTM1MTg0MTk1Nw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcA2o8wgFqTM1MjY2MTc3MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxODQxOTU3", "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/pull/39#pullrequestreview-351841957", "createdAt": "2020-02-01T00:06:50Z", "commit": {"oid": "fde85879545acf2ead4b4e04fc76b9fa827e30fe"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMVQwMDowNjo1MVrOFkbDlQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMVQwMDowNjo1MVrOFkbDlQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzczNjM0MQ==", "bodyText": "Suggestion,\nint numSamples = Math.max(1, (int) Math.min(numBuckets * previewSampleRate, maxPreviewSamples));\nto avoid numSamples being 0.", "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/pull/39#discussion_r373736341", "createdAt": "2020-02-01T00:06:51Z", "author": {"login": "jngz-es"}, "path": "src/main/java/com/amazon/opendistroforelasticsearch/ad/feature/FeatureManager.java", "diffHunk": "@@ -317,7 +321,8 @@ public void getPreviewFeatures(AnomalyDetector detector, long startMilli, long e\n         long end = truncateToMinute(endMilli);\n         long bucketSize = ((IntervalTimeConfiguration) detector.getDetectionInterval()).toDuration().toMillis();\n         int numBuckets = (int) Math.floor((end - start) / (double) bucketSize);\n-        int stride = (int) Math.max(1, Math.floor((double) numBuckets / maxPreviewSamples));\n+        int numSamples = (int) Math.min(numBuckets * previewSampleRate, maxPreviewSamples);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fde85879545acf2ead4b4e04fc76b9fa827e30fe"}, "originalPosition": 37}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3540f72388780254c11817c0575506bfd191a1d9", "author": {"user": null}, "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/commit/3540f72388780254c11817c0575506bfd191a1d9", "committedDate": "2020-02-01T00:45:01Z", "message": "adjust preview configuration for more data"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxODQ5NzQx", "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/pull/39#pullrequestreview-351849741", "createdAt": "2020-02-01T00:49:41Z", "commit": {"oid": "3540f72388780254c11817c0575506bfd191a1d9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUyNjYxNzcw", "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/pull/39#pullrequestreview-352661770", "createdAt": "2020-02-04T00:45:41Z", "commit": {"oid": "3540f72388780254c11817c0575506bfd191a1d9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1607, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}