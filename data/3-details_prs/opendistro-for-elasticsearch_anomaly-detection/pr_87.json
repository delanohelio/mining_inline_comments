{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAzMDE5NjA1", "number": 87, "title": "AD opendistro 1.6 support", "bodyText": "Issue #, if available:\n#86\nDescription of changes:\nMake AD plugin compatible for ODFE 1.6 version which uses Elasticsearch OSS 7.6.1 version\nBy submitting this pull request, I confirm that you can use, modify, copy, and redistribute this contribution, under the terms of your choice.", "createdAt": "2020-04-14T07:37:43Z", "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/pull/87", "merged": true, "mergeCommit": {"oid": "4285d51fd4c179457477ffa4c5bcb9bd0c572592"}, "closed": true, "closedAt": "2020-04-23T19:07:01Z", "author": {"login": "vamshin"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcWWPMBgH2gAyNDAzMDE5NjA1OjY3OTQ1YmQ2MjJjNmQ3YmFkYWE4Mjk5NGJlNDUxMGYyOWY2NjcxMzg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcaU5GbgFqTM5ODc0NTM3MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "67945bd622c6d7badaa82994be4510f29f667138", "author": {"user": {"login": "vamshin", "name": "Vamshi Vijay Nakkirtha"}}, "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/commit/67945bd622c6d7badaa82994be4510f29f667138", "committedDate": "2020-04-10T19:26:55Z", "message": "odfe 1.6 AD support"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f6dd325607729c8b51b445e4e8c0b10f655f0798", "author": {"user": {"login": "vamshin", "name": "Vamshi Vijay Nakkirtha"}}, "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/commit/f6dd325607729c8b51b445e4e8c0b10f655f0798", "committedDate": "2020-04-13T18:25:30Z", "message": "odfe 1.6 AD support"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "468e40ffe0dcfe1a7146a551ee98d1d56c8d87fc", "author": {"user": {"login": "vamshin", "name": "Vamshi Vijay Nakkirtha"}}, "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/commit/468e40ffe0dcfe1a7146a551ee98d1d56c8d87fc", "committedDate": "2020-04-14T07:18:16Z", "message": "odfe 1.6 AD support"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "48f5cd6690c49f6236c2082094154b8eb1ba59c9", "author": {"user": {"login": "vamshin", "name": "Vamshi Vijay Nakkirtha"}}, "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/commit/48f5cd6690c49f6236c2082094154b8eb1ba59c9", "committedDate": "2020-04-14T07:36:55Z", "message": "odfe 1.6 AD support"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "176f94389b180b68a7a1cbaea41d7da9a4881f6b", "author": {"user": {"login": "vamshin", "name": "Vamshi Vijay Nakkirtha"}}, "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/commit/176f94389b180b68a7a1cbaea41d7da9a4881f6b", "committedDate": "2020-04-14T17:51:33Z", "message": "Merge branch 'development' into dev-vam"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0fdcfb1871512da0ffabb8fab54e4af0aebc74e1", "author": {"user": {"login": "vamshin", "name": "Vamshi Vijay Nakkirtha"}}, "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/commit/0fdcfb1871512da0ffabb8fab54e4af0aebc74e1", "committedDate": "2020-04-14T19:18:37Z", "message": "fix action to pick up java 13"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f84e12f6f8d39f4bf709ca2670be6e25b418405", "author": {"user": {"login": "vamshin", "name": "Vamshi Vijay Nakkirtha"}}, "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/commit/7f84e12f6f8d39f4bf709ca2670be6e25b418405", "committedDate": "2020-04-14T19:19:29Z", "message": "Merge branch 'dev-vam' of github.com:vamshin/anomaly-detection into dev-vam"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e9d4a460a3371ffd4a66330fc55e2d9492db546b", "author": {"user": {"login": "vamshin", "name": "Vamshi Vijay Nakkirtha"}}, "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/commit/e9d4a460a3371ffd4a66330fc55e2d9492db546b", "committedDate": "2020-04-14T19:28:22Z", "message": "fix spotless issues"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzNDIyNDE5", "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/pull/87#pullrequestreview-393422419", "createdAt": "2020-04-15T02:49:31Z", "commit": {"oid": "e9d4a460a3371ffd4a66330fc55e2d9492db546b"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQwMjo0OTozMlrOGFn6Hg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQwMjo0OTo0N1rOGFn6bA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODU0OTkxOA==", "bodyText": "After removing these lines, can we build on both windows and Linux?", "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/pull/87#discussion_r408549918", "createdAt": "2020-04-15T02:49:32Z", "author": {"login": "kaituo"}, "path": "build.gradle", "diffHunk": "@@ -42,13 +43,8 @@ repositories {\n }\n \n ext {\n-    opendistroVersion = '1.4.0'\n+    opendistroVersion = '1.6.0'\n     isSnapshot = \"true\" == System.getProperty(\"build.snapshot\", \"true\")\n-    if (System.properties['os.name'].toLowerCase().contains('windows')) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e9d4a460a3371ffd4a66330fc55e2d9492db546b"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODU0OTk5Ng==", "bodyText": "Why do we remove the following, which is used to start and stop a multi-node cluster?", "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/pull/87#discussion_r408549996", "createdAt": "2020-04-15T02:49:47Z", "author": {"login": "kaituo"}, "path": "build.gradle", "diffHunk": "@@ -120,80 +119,6 @@ thirdPartyAudit.enabled = false\n // See package README.md for details on using these tasks.\n def _numNodes = findProperty('numNodes') as Integer ?: 1\n \n-def getSeedHosts = { int num ->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e9d4a460a3371ffd4a66330fc55e2d9492db546b"}, "originalPosition": 52}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "40cc15b0f88323a8c63611e8f5f41f847f526d3e", "author": {"user": {"login": "vamshin", "name": "Vamshi Vijay Nakkirtha"}}, "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/commit/40cc15b0f88323a8c63611e8f5f41f847f526d3e", "committedDate": "2020-04-15T04:24:28Z", "message": "Updated README.md\n\nUpdated README.md to reflect changes to run multi node cluster"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7fcb93d366649baaeb8f752110498bc8102c7f4c", "author": {"user": {"login": "vamshin", "name": "Vamshi Vijay Nakkirtha"}}, "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/commit/7fcb93d366649baaeb8f752110498bc8102c7f4c", "committedDate": "2020-04-15T04:29:59Z", "message": "removed unused variables"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b541442f788a0842f50966f9fa9c2f3f081575dd", "author": {"user": {"login": "vamshin", "name": "Vamshi Vijay Nakkirtha"}}, "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/commit/b541442f788a0842f50966f9fa9c2f3f081575dd", "committedDate": "2020-04-16T19:08:32Z", "message": "commit e5b6ce5f47590e9c451c02a2b81d1c40a5f2b6d6\nAuthor: Kaituo Li <kaituo@amazon.com>\nDate:   Wed Apr 15 15:45:13 2020 -0700\n\n    Add state and error to profile API (#84)\n\n    * Add state and error to profile API\n\n    We want to make it easy for customers and oncalls to identify a detector\u2019s state and error if any. This PR adds such information to our new profile API.\n\n    We expect three kinds of states:\n    -Disabled: if get ad job api says the job is disabled;\n    -Init: if anomaly score after the last update time of the detector is larger than 0\n    -Running: if neither of the above applies and no exceptions.\n\n    Error is populated if error of the latest anomaly result is not empty.\n\n    Testing done:\n    -manual testing during a detector\u2019s life cycle: not created, created but not started, started, during initialization, after initialization, stopped, restarted\n    -added unit tests to cover above scenario\n\ncommit 0c3305000ffe6e61c7c2104314a555e69d060023\nAuthor: Kaituo Li <kaituo@amazon.com>\nDate:   Tue Apr 14 11:52:20 2020 -0700\n\n    Use callbacks and bug fix (#83)\n\n    * Use callbacks and bug fix\n\n    This PR includes the following changes:\n\n    1. remove classes that are not needed in jacocoExclusions since we have enough coverage for those classes.\n    2. Use ClientUtil instead of Elasticsearch\u2019s client in AD job runner\n    3. Use one function to get the number of partitioned forests. Previously, we have redundant code in both ModelManager and ADStateManager.\n    4. Change ADStateManager.getAnomalyDetector to use callback.\n    5. Change AnomalyResultTransportAction to use callback to get features.\n    6. Add in AnomalyResultTransportAction to handle the case where all features have been disabled, and users' index does not exist.\n    7. Change get RCF and threshold result methods to use callback and add exception handling of IndexNotFoundException due to the change. Previously, getting RCF and threshold result methods won\u2019t throw IndexNotFoundException.\n    8. Remove unused fields in StopDetectorTransportAction and AnomalyResultTransportAction\n    9. Unwrap EsRejectedExecutionException as it can be nested inside RemoteTransportException. Previously, we would not recognize EsRejectedExecutionException and thus miss anomaly results write retrying.\n    10. Add error in anomaly result schema.11. Fix broken tests due to my changes.\n\n    Testing done:\n    1. unit/integration tests pass\n    2. do end-to-end testing and make sure my fix achieves the purpose\u00a0\n       * timeout issue is gone\u00a0\n       * when all features have been disabled or index does not exist, we will retry a few more times and disable AD jobs."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "92094ea32498367b08cbd5bac585e3f09d5cd803", "author": {"user": {"login": "vamshin", "name": "Vamshi Vijay Nakkirtha"}}, "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/commit/92094ea32498367b08cbd5bac585e3f09d5cd803", "committedDate": "2020-04-16T22:08:32Z", "message": "Merge branch 'dev-vam' of github.com:vamshin/anomaly-detection into dev-vam"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1MDQ5NjEw", "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/pull/87#pullrequestreview-395049610", "createdAt": "2020-04-16T22:44:36Z", "commit": {"oid": "92094ea32498367b08cbd5bac585e3f09d5cd803"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4NzQ1Mzcx", "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/pull/87#pullrequestreview-398745371", "createdAt": "2020-04-23T04:08:35Z", "commit": {"oid": "92094ea32498367b08cbd5bac585e3f09d5cd803"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1660, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}