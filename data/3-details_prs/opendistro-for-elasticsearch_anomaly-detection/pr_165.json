{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM3MzAyMDY2", "number": 165, "title": "Run tests on docker if docker image exists", "bodyText": "Issue #, if available:\nDescription of changes:\nPreviously, CI ran into issues when the docker image was not out yet after a version upgrade. This PR fixes it by using an environment variable to track whether the docker image exists or not.\nThis PR also removes test-workflow.yml since CI.yml can cover its functionality.\nTesting done:\n\nVerified in github docker tests skip if no docker image exists.\n\nBy submitting this pull request, I confirm that you can use, modify, copy, and redistribute this contribution, under the terms of your choice.", "createdAt": "2020-06-19T21:26:50Z", "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/pull/165", "merged": true, "mergeCommit": {"oid": "a1bdbbe156a6fdcdbade2a39c018b237d7b56539"}, "closed": true, "closedAt": "2020-06-20T02:00:01Z", "author": {"login": "kaituo"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcs6FTPAH2gAyNDM3MzAyMDY2Ojg5OGZhMjhhOTQyMGNkODdjMzE2MjFjYTkxNjlmMDBiZGNlNjA5OTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcs9zPwAFqTQzNDM5NDUxOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "898fa28a9420cd87c31621ca9169f00bdce60996", "author": {"user": {"login": "kaituo", "name": "Kaituo Li"}}, "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/commit/898fa28a9420cd87c31621ca9169f00bdce60996", "committedDate": "2020-06-19T21:39:02Z", "message": "Run docker tests  if docker image exists\n\nPreviously, CI ran into issues when the docker image was not out yet after a version upgrade. This PR fixes it by using an environment variable to track whether the docker image exists or not.\n\nThis PR also removes test-workflow.yml since CI.yml can cover its functionality.\n\nTesting done:\n1. Verified in github docker tests skip if no docker image exists."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2ebd4fbf9e54e9ae45bfebb2817a8a3ccac30c70", "author": {"user": {"login": "kaituo", "name": "Kaituo Li"}}, "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/commit/2ebd4fbf9e54e9ae45bfebb2817a8a3ccac30c70", "committedDate": "2020-06-19T21:21:00Z", "message": "Run CI tests if docker image exists\n\nPreviously, we can run into issues when \u00a0docker image is not out yet after version upgrade. This PR fixes it by using an environment variable to track whether the docker image exists or not."}, "afterCommit": {"oid": "898fa28a9420cd87c31621ca9169f00bdce60996", "author": {"user": {"login": "kaituo", "name": "Kaituo Li"}}, "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/commit/898fa28a9420cd87c31621ca9169f00bdce60996", "committedDate": "2020-06-19T21:39:02Z", "message": "Run docker tests  if docker image exists\n\nPreviously, CI ran into issues when the docker image was not out yet after a version upgrade. This PR fixes it by using an environment variable to track whether the docker image exists or not.\n\nThis PR also removes test-workflow.yml since CI.yml can cover its functionality.\n\nTesting done:\n1. Verified in github docker tests skip if no docker image exists."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0MzY4MzA1", "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/pull/165#pullrequestreview-434368305", "createdAt": "2020-06-19T22:33:33Z", "commit": {"oid": "898fa28a9420cd87c31621ca9169f00bdce60996"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0MzkwNTQ1", "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/pull/165#pullrequestreview-434390545", "createdAt": "2020-06-20T01:01:22Z", "commit": {"oid": "898fa28a9420cd87c31621ca9169f00bdce60996"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMFQwMTowMToyM1rOGmj6kA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMFQwMTowMToyM1rOGmj6kA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzA4NzUwNA==", "bodyText": "if it is false, will the CI workflow fail?", "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/pull/165#discussion_r443087504", "createdAt": "2020-06-20T01:01:23Z", "author": {"login": "yizheliu-amazon"}, "path": ".github/workflows/CI.yml", "diffHunk": "@@ -48,15 +52,20 @@ jobs:\n             echo \"RUN /usr/share/elasticsearch/bin/elasticsearch-plugin install --batch file:/tmp/opendistro-anomaly-detection-$plugin_version.zip\" >> Dockerfile\n \n             docker build -t odfe-ad:test .\n+            echo \"::set-env name=imagePresent::true\"\n+          else\n+            echo \"::set-env name=imagePresent::false\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "898fa28a9420cd87c31621ca9169f00bdce60996"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0Mzk0NTE4", "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/pull/165#pullrequestreview-434394518", "createdAt": "2020-06-20T01:58:56Z", "commit": {"oid": "898fa28a9420cd87c31621ca9169f00bdce60996"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1477, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}