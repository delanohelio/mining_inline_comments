{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYxNDk2Mjc0", "number": 353, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQxNTo1NzozMlrODXMh4A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxNjowNzoyNFrODXkkww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI1NjQ5MTIwOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/nl/nn/adapterframework/configuration/classloaders/BytesClassLoader.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQxNTo1NzozMlrOFcYXyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQxNTo1NzozMlrOFcYXyg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTMwMzc1NA==", "bodyText": "Waarom werkt het niet zonder deze drie regels? Wie plakt die naam van het basePath er in de first place voor?", "url": "https://github.com/ibissource/iaf/pull/353#discussion_r365303754", "createdAt": "2020-01-10T15:57:32Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/configuration/classloaders/BytesClassLoader.java", "diffHunk": "@@ -57,6 +56,18 @@ public URL getLocalResource(String name) {\n \t\treturn null;\n \t}\n \n+\t/**\n+\t * Strip BasePath of the local resource and return a valid, relative to the configuration directory, URL\n+\t */\n+\tprivate URL createURL(String name, byte[] resource) throws MalformedURLException {\n+\t\tString URLname = CLASSPATH_RESOURCE_SCHEME + name;\n+\t\tif(getBasePath() != null && name.startsWith(getBasePath())) {\n+\t\t\tURLname = CLASSPATH_RESOURCE_SCHEME + name.substring(getBasePath().length());\n+\t\t}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b58a5fe11070f2fe7b6843e71a96cbab26ab9f73"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2MDQzMDc1OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/nl/nn/adapterframework/configuration/classloaders/ClassLoaderBase.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxNjowNzoyNFrOFc7-yA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQwODozNzoyM1rOFdPh1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg4NzE3Ng==", "bodyText": "Waarom heeft ClassLoaderBase nog steeds een basePath? Hij heeft het zelf toch niet nodig?", "url": "https://github.com/ibissource/iaf/pull/353#discussion_r365887176", "createdAt": "2020-01-13T16:07:24Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/configuration/classloaders/ClassLoaderBase.java", "diffHunk": "@@ -74,16 +74,17 @@ public void configure(IbisContext ibisContext, String configurationName) throws\n \t\t} else {\n \t\t\tif(basePath == null && !getConfigurationName().equalsIgnoreCase(instanceName)) {\n \t\t\t\tint i = configurationFile.lastIndexOf('/');\n-\t\t\t\tif (i != -1) {\n+\t\t\t\tif (i != -1) { //Configuration file contains a path, derive the BasePath from the path\n \t\t\t\t\tsetBasePath(configurationFile.substring(0, i + 1));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e692d9a379408456a9796201d98db6f4c007c1f0"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjIwNzQ0Ng==", "bodyText": "Legacy, alle classloaders hebben een root die gelijk is aan de configuratie naam. En mocht je via de configurationFile propertie een path+file combinatie opgeven, dan is het 'path' gedeelte de root van de classloader (aka basepath).", "url": "https://github.com/ibissource/iaf/pull/353#discussion_r366207446", "createdAt": "2020-01-14T08:37:23Z", "author": {"login": "nielsm5"}, "path": "core/src/main/java/nl/nn/adapterframework/configuration/classloaders/ClassLoaderBase.java", "diffHunk": "@@ -74,16 +74,17 @@ public void configure(IbisContext ibisContext, String configurationName) throws\n \t\t} else {\n \t\t\tif(basePath == null && !getConfigurationName().equalsIgnoreCase(instanceName)) {\n \t\t\t\tint i = configurationFile.lastIndexOf('/');\n-\t\t\t\tif (i != -1) {\n+\t\t\t\tif (i != -1) { //Configuration file contains a path, derive the BasePath from the path\n \t\t\t\t\tsetBasePath(configurationFile.substring(0, i + 1));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg4NzE3Ng=="}, "originalCommit": {"oid": "e692d9a379408456a9796201d98db6f4c007c1f0"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 505, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}