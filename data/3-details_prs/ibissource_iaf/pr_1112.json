{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk1NTc5MjUy", "number": 1112, "title": "Allow deprecated Basic Authentication for Exchange Web Services", "bodyText": "", "createdAt": "2020-09-30T15:05:25Z", "url": "https://github.com/ibissource/iaf/pull/1112", "merged": true, "mergeCommit": {"oid": "7bd4c8945e756c0abfdf363528e83cfd81ca6dc8"}, "closed": true, "closedAt": "2020-10-01T09:56:18Z", "author": {"login": "gvanbrakel"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdN72tAAH2gAyNDk1NTc5MjUyOjRhZDY0NGVjZDIxNzM1NDc1OTEzMzEwZjg1ZDFjYzc0NDZkZjlkYjM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdOOXKqgFqTUwMDE4ODMwNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4ad644ecd21735475913310f85d1cc7446df9db3", "author": {"user": {"login": "gvanbrakel", "name": "Gerrit van Brakel"}}, "url": "https://github.com/ibissource/iaf/commit/4ad644ecd21735475913310f85d1cc7446df9db3", "committedDate": "2020-09-30T12:22:24Z", "message": "Fix #1103 Modern authentication for ExchangeFileSystem"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "db6dfd41dc8efa2f07af0a24a880f593baa6b5d1", "author": {"user": {"login": "gvanbrakel", "name": "Gerrit van Brakel"}}, "url": "https://github.com/ibissource/iaf/commit/db6dfd41dc8efa2f07af0a24a880f593baa6b5d1", "committedDate": "2020-09-30T12:26:48Z", "message": "Fix issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a5d578162d16a6ed13ca1a547a3645865af4729", "author": {"user": {"login": "gvanbrakel", "name": "Gerrit van Brakel"}}, "url": "https://github.com/ibissource/iaf/commit/3a5d578162d16a6ed13ca1a547a3645865af4729", "committedDate": "2020-09-30T12:31:50Z", "message": "More issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9258458018cdd930f60587fc57775c3bb3710056", "author": {"user": {"login": "gvanbrakel", "name": "Gerrit van Brakel"}}, "url": "https://github.com/ibissource/iaf/commit/9258458018cdd930f60587fc57775c3bb3710056", "committedDate": "2020-09-30T13:01:40Z", "message": "changed ExchangeMail.properties"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0fe45815897982d5da15ea1d13c6ab173574f13c", "author": {"user": {"login": "gvanbrakel", "name": "Gerrit van Brakel"}}, "url": "https://github.com/ibissource/iaf/commit/0fe45815897982d5da15ea1d13c6ab173574f13c", "committedDate": "2020-09-30T13:02:44Z", "message": "ignore changes in Exchange properties"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "19de5962c0971d2fe73819551540c419e9c2496d", "author": {"user": {"login": "gvanbrakel", "name": "Gerrit van Brakel"}}, "url": "https://github.com/ibissource/iaf/commit/19de5962c0971d2fe73819551540c419e9c2496d", "committedDate": "2020-09-30T14:13:53Z", "message": "Merge branch 'master' into fix_#1103_use_OAuth_authentication_for_ExchangeWebServices"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "16799c0dab3d0d1efaaff88ef48318056b78a507", "author": {"user": {"login": "gvanbrakel", "name": "Gerrit van Brakel"}}, "url": "https://github.com/ibissource/iaf/commit/16799c0dab3d0d1efaaff88ef48318056b78a507", "committedDate": "2020-09-30T15:04:32Z", "message": "Allow deprecated Basic Authentication method for ExchangeFileSystem"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk5NjE0Njc4", "url": "https://github.com/ibissource/iaf/pull/1112#pullrequestreview-499614678", "createdAt": "2020-09-30T16:33:21Z", "commit": {"oid": "16799c0dab3d0d1efaaff88ef48318056b78a507"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxNjozMzoyMVrOHal-jw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxNjozMzoyMVrOHal-jw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzY0NzI0Nw==", "bodyText": "Ik vind dit gevaarlijk, wat als je niet in hoeft/wilt loggen?", "url": "https://github.com/ibissource/iaf/pull/1112#discussion_r497647247", "createdAt": "2020-09-30T16:33:21Z", "author": {"login": "nielsm5"}, "path": "core/src/main/java/nl/nn/adapterframework/filesystem/ExchangeFileSystem.java", "diffHunk": "@@ -136,9 +130,23 @@ public void configure() throws ConfigurationException {\n \tpublic void open() throws FileSystemException {\n \t\ttry {\n \t\t\texchangeService = new ExchangeService(ExchangeVersion.Exchange2010_SP2);\n-\t\t\tCredentialFactory cf = new CredentialFactory(getAuthAlias(), null, getAccessToken());\n-\t\t\texchangeService.getHttpHeaders().put(\"Authorization\", \"Bearer \"+cf.getPassword());\n+\t\t\t\n+\t\t\tString defaultUsername = StringUtils.isEmpty(getAccessToken())? getUsername() : null;\n+\t\t\tString defaultPassword = StringUtils.isEmpty(getAccessToken())? getPassword() : getAccessToken();\n \n+\t\t\tCredentialFactory cf = new CredentialFactory(getAuthAlias(), defaultUsername, defaultPassword);\n+\t\t\tif (StringUtils.isEmpty(cf.getUsername())) {\n+\t\t\t\t// use OAuth Bearer token authentication\n+\t\t\t\texchangeService.getHttpHeaders().put(\"Authorization\", \"Bearer \"+cf.getPassword());\n+\t\t\t} else {\n+\t\t\t\t// use deprecated Basic Authentication. Support will end 2021-Q3!\n+\t\t\t\tlog.warn(\"Using deprecated Basic Authentication method for authentication to Exchange Web Services\");\n+\t\t\t\tExchangeCredentials credentials = new WebCredentials(cf.getUsername(), cf.getPassword());\n+\t\t\t\texchangeService.setCredentials(credentials);\n+\t\t\t}\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "16799c0dab3d0d1efaaff88ef48318056b78a507"}, "originalPosition": 64}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwMTg4MzA0", "url": "https://github.com/ibissource/iaf/pull/1112#pullrequestreview-500188304", "createdAt": "2020-10-01T09:56:09Z", "commit": {"oid": "16799c0dab3d0d1efaaff88ef48318056b78a507"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1111, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}