{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEwMjcyNDMw", "number": 650, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQwNjozNzoyNFrOD3fluQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQwNjo0OTowOFrOD3fxdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5NTE1ODMzOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/nl/nn/adapterframework/logging/IbisLoggerConfigurationFactory.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQwNjozNzoyNFrOGNxeKw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQwNzoxMDo0OVrOGNyUWQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzA5NTIxMQ==", "bodyText": "Ik vind dat als je een then clause op een volgende regel zet, je dan snorhaken moet gebruiken (accolades mag ook)", "url": "https://github.com/ibissource/iaf/pull/650#discussion_r417095211", "createdAt": "2020-04-29T06:37:24Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/logging/IbisLoggerConfigurationFactory.java", "diffHunk": "@@ -80,7 +82,10 @@ public Configuration getConfiguration(LoggerContext loggerContext, Configuration\n \t\t\tMap<String, String> substitutions = new HashMap<>();\n \t\t\twhile (m.find()) {\n \t\t\t\tString key = m.group(1);\n-\t\t\t\tsubstitutions.put(key, properties.getProperty(key));\n+\t\t\t\tString value = resolveValueRecursively(properties, key);\n+\n+\t\t\t\tif(value != null)\n+\t\t\t\t\tsubstitutions.put(key, value);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "365898fcc0404c0863220aa67af3bb973690dc94"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzEwOTA4MQ==", "bodyText": "Dan gebruik ik accolades! (maar er is geen then clause)", "url": "https://github.com/ibissource/iaf/pull/650#discussion_r417109081", "createdAt": "2020-04-29T07:10:49Z", "author": {"login": "nielsm5"}, "path": "core/src/main/java/nl/nn/adapterframework/logging/IbisLoggerConfigurationFactory.java", "diffHunk": "@@ -80,7 +82,10 @@ public Configuration getConfiguration(LoggerContext loggerContext, Configuration\n \t\t\tMap<String, String> substitutions = new HashMap<>();\n \t\t\twhile (m.find()) {\n \t\t\t\tString key = m.group(1);\n-\t\t\t\tsubstitutions.put(key, properties.getProperty(key));\n+\t\t\t\tString value = resolveValueRecursively(properties, key);\n+\n+\t\t\t\tif(value != null)\n+\t\t\t\t\tsubstitutions.put(key, value);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzA5NTIxMQ=="}, "originalCommit": {"oid": "365898fcc0404c0863220aa67af3bb973690dc94"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5NTE3NTk1OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/nl/nn/adapterframework/logging/IbisLoggerConfigurationFactory.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQwNjo0NDoxOFrOGNxoGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQwNjo0NDoxOFrOGNxoGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzA5Nzc1NQ==", "bodyText": "Je weet niet of het obsolete is, je hebt alleen maar geen \"<log4j2:Configuration\" gezien.\nIk denk dat je moet zeggen: \"did not recognize configuration format, expected log4j2 layout.\nWordt het vervolgens nog wel ge\u00efnterpreteerd? dan dat ook zeggen.", "url": "https://github.com/ibissource/iaf/pull/650#discussion_r417097755", "createdAt": "2020-04-29T06:44:18Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/logging/IbisLoggerConfigurationFactory.java", "diffHunk": "@@ -140,6 +157,7 @@ public static String readLog4jConfiguration(InputStream stream) throws IOExcepti\n \t\t\t\tif(checkVersionOnlyFirst1024Characters) {\n \t\t\t\t\t//See if log4j2 prefix is somewhere in the first 1024 characters\n \t\t\t\t\tif(!stringWriter.toString().contains(\"<log4j2:Configuration\")) {\n+\t\t\t\t\t\tSystem.err.println(LOG_PREFIX + \"detected obsolete configuration format. Please use the log4j2 layout in file log4j4ibis.xml\");\n \t\t\t\t\t\tthrow new IllegalStateException(\"Detected obsolete configuration format. Please use the log4j2 layout in file log4j4ibis.xml\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "365898fcc0404c0863220aa67af3bb973690dc94"}, "originalPosition": 52}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5NTE4ODM2OnYy", "diffSide": "RIGHT", "path": "core/src/test/resources/DeploymentSpecifics.properties", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQwNjo0OTowOFrOGNxvWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQwNzoxMDoyOFrOGNyTww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzA5OTYwOA==", "bodyText": "Bedoel je niet build.dir? user.dir is toch niet de project directory?", "url": "https://github.com/ibissource/iaf/pull/650#discussion_r417099608", "createdAt": "2020-04-29T06:49:08Z", "author": {"login": "gvanbrakel"}, "path": "core/src/test/resources/DeploymentSpecifics.properties", "diffHunk": "@@ -1,4 +1,4 @@\n instance.name=test\n-log.dir=${user.dir}\\\\target\n+log.dir=${user.dir}\\\\target\\\\test-logs", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "365898fcc0404c0863220aa67af3bb973690dc94"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzEwODkzMQ==", "bodyText": "user.dir is the directory where java was run from. When running tests, it's the root directory of either the IAF module, or the entire IAF framework.", "url": "https://github.com/ibissource/iaf/pull/650#discussion_r417108931", "createdAt": "2020-04-29T07:10:28Z", "author": {"login": "nielsm5"}, "path": "core/src/test/resources/DeploymentSpecifics.properties", "diffHunk": "@@ -1,4 +1,4 @@\n instance.name=test\n-log.dir=${user.dir}\\\\target\n+log.dir=${user.dir}\\\\target\\\\test-logs", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzA5OTYwOA=="}, "originalCommit": {"oid": "365898fcc0404c0863220aa67af3bb973690dc94"}, "originalPosition": 3}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 441, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}