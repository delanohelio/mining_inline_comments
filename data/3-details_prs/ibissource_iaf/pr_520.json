{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkwMzM2MTMx", "number": 520, "title": "Log4j2 update and Adapter logger improvement", "bodyText": "First, I have updated log4j 1.12 to Log4j2. They made a huge refactor, so I needed to do the same as well. Here you can see main classes that have changed. Most of the files changed are caused by changing logutil to logmanager.\nDeleted classes:\n\nLogUtils: It used to provide loggers based on a hierarchy, and handle multiple servlet contexts. However log4j2 natively supports both of these operations. So logutil is no longer needed.\nMsgLogUtil: It used to provide custom log levels for message logging. However log4j2 natively supports this as well. Log levels are set at log4j2.xml file and use as Level.toLevel(\"levelname\")\nIbisAppenderWrapper: Since appenders do not hold messages as text anymore. We have moved the functionality to IbisMaskingLayout. See below.\n\nExtended classes from log4j2:\n\nIbisThreadFilter: It was refactored to work with log4j2. Same functionality as before (filtering based on thread name)\nIbisMaskingLayout: Is an abstract log4j2 layout that can replace/mask based on global and threadlocal patterns. Also can limit the log size. It does not implement any serialization itself, but wraps other layouts for their serialization functionality.\nIbisPatternLayout: Extension of IbisMaskignLayout and wraps the patternlayout from log4j2.\nIbisLoggerConfiguration: Extends the functionality of XmlConfiguration from log4j2. It makes processed properties available to log4j2 during configuration time. So during log4j2 initialization, users can use ibis properties in configuration as ${ctx:propertyname}.\n\nKnown Problems:\n\nDue to Tomcat's persisted sessions, log.dir is empty exception is thrown by Spring. It is caused by log4j2 not re-initializing with persisted sessions, leading to ibisloggerconfiguration not running, and it contains setLogDir() function which normally sets log.dir in system properties if not set before.\n\nNote: Before approval the blow pull request from ladybug should also be approved. And ladybug's pom file should also be changed.\nibissource/ibis-ladybug#27", "createdAt": "2020-03-18T09:59:40Z", "url": "https://github.com/ibissource/iaf/pull/520", "merged": true, "mergeCommit": {"oid": "6228afacd1baf54be4b68fb24d4af216cbad81cc"}, "closed": true, "closedAt": "2020-04-23T15:48:38Z", "author": {"login": "mkmeral"}, "timelineItems": {"totalCount": 61, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcF0lUqAH2gAyMzkwMzM2MTMxOjExMmIzYWEwMGRhMjg4OGEyMzQ5ZmIxYTg4MDc3YzQ1YTljZjc5ZDk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcaLGWIAH2gAyMzkwMzM2MTMxOmM1YTM0OGMxNzJlMWY3MWNlZGNiNzUwMDI4ODUzOTA0YWJiYWI1ZTA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "112b3aa00da2888a2349fb1a88077c45a9cf79d9", "author": {"user": {"login": "mkmeral", "name": "Murat Kaan Meral"}}, "url": "https://github.com/ibissource/iaf/commit/112b3aa00da2888a2349fb1a88077c45a9cf79d9", "committedDate": "2020-02-19T11:11:32Z", "message": "Update Log4j dependencies."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "20499f7ef0da49497e34e7df878e032823c0f89b", "author": {"user": {"login": "mkmeral", "name": "Murat Kaan Meral"}}, "url": "https://github.com/ibissource/iaf/commit/20499f7ef0da49497e34e7df878e032823c0f89b", "committedDate": "2020-02-26T10:31:47Z", "message": "Change layouts."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "44c8ebd89b99367fc91dcb33433b1f24406256c2", "author": {"user": {"login": "mkmeral", "name": "Murat Kaan Meral"}}, "url": "https://github.com/ibissource/iaf/commit/44c8ebd89b99367fc91dcb33433b1f24406256c2", "committedDate": "2020-02-26T10:36:17Z", "message": "Adapt LOG4J2 refactoring (package change for logger.)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "05c2b94a440ed01f39c8c4fa2c3d9c53045ab67f", "author": {"user": {"login": "mkmeral", "name": "Murat Kaan Meral"}}, "url": "https://github.com/ibissource/iaf/commit/05c2b94a440ed01f39c8c4fa2c3d9c53045ab67f", "committedDate": "2020-02-26T10:38:47Z", "message": "Change poms to use log4j2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "44cb6a00b83c8cdbc51ebfcc9b60839ad1fc0468", "author": {"user": {"login": "mkmeral", "name": "Murat Kaan Meral"}}, "url": "https://github.com/ibissource/iaf/commit/44cb6a00b83c8cdbc51ebfcc9b60839ad1fc0468", "committedDate": "2020-02-26T14:26:19Z", "message": "Adapt ibis thread filter."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb54dddee2b0383758656848fef44180736d8669", "author": {"user": {"login": "mkmeral", "name": "Murat Kaan Meral"}}, "url": "https://github.com/ibissource/iaf/commit/eb54dddee2b0383758656848fef44180736d8669", "committedDate": "2020-03-04T09:43:02Z", "message": "Update log4j4ibis.xml for Log4j2."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f52f94d0feab8f505645a6165a2ea5e13a0558b9", "author": {"user": {"login": "mkmeral", "name": "Murat Kaan Meral"}}, "url": "https://github.com/ibissource/iaf/commit/f52f94d0feab8f505645a6165a2ea5e13a0558b9", "committedDate": "2020-03-04T10:04:00Z", "message": "Change initialization of log util."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eff85acf449d20af9375e6dcf49c5cd1c6733f82", "author": {"user": {"login": "mkmeral", "name": "Murat Kaan Meral"}}, "url": "https://github.com/ibissource/iaf/commit/eff85acf449d20af9375e6dcf49c5cd1c6733f82", "committedDate": "2020-03-04T10:06:19Z", "message": "Merge branch 'master' into logger-update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1e26472f14549239e847fec6d473cf0bf042413", "author": {"user": {"login": "mkmeral", "name": "Murat Kaan Meral"}}, "url": "https://github.com/ibissource/iaf/commit/d1e26472f14549239e847fec6d473cf0bf042413", "committedDate": "2020-03-06T15:41:02Z", "message": "Delete logutil and extend configurations."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d515c52c9fa0e3c59b6c06e81b8d8655c76c3a9", "author": {"user": {"login": "mkmeral", "name": "Murat Kaan Meral"}}, "url": "https://github.com/ibissource/iaf/commit/6d515c52c9fa0e3c59b6c06e81b8d8655c76c3a9", "committedDate": "2020-03-06T15:41:27Z", "message": "Extend layouts for masking and length limit."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1812a91758306af7d0db7c831879da349cecfd81", "author": {"user": {"login": "mkmeral", "name": "Murat Kaan Meral"}}, "url": "https://github.com/ibissource/iaf/commit/1812a91758306af7d0db7c831879da349cecfd81", "committedDate": "2020-03-06T15:43:00Z", "message": "Adapt files to logutil change."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f469afd66d9c626addc033561546e4c0de7b25fc", "author": {"user": {"login": "mkmeral", "name": "Murat Kaan Meral"}}, "url": "https://github.com/ibissource/iaf/commit/f469afd66d9c626addc033561546e4c0de7b25fc", "committedDate": "2020-03-06T15:46:27Z", "message": "Update log4j2 dependencies"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a1b2dc1b3fd06da6ec3414aaf12014a64bedea03", "author": {"user": {"login": "mkmeral", "name": "Murat Kaan Meral"}}, "url": "https://github.com/ibissource/iaf/commit/a1b2dc1b3fd06da6ec3414aaf12014a64bedea03", "committedDate": "2020-03-06T15:47:36Z", "message": "Updating log4j2 configurations."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b3a01c3522c28e8024cffa4772f53d8c5f9428e4", "author": {"user": {"login": "mkmeral", "name": "Murat Kaan Meral"}}, "url": "https://github.com/ibissource/iaf/commit/b3a01c3522c28e8024cffa4772f53d8c5f9428e4", "committedDate": "2020-03-06T15:48:03Z", "message": "Add log4j2 to make sure it boots up before Spring."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7a91581fc3e16e8b559b5426f94869eef7d4c22e", "author": {"user": {"login": "mkmeral", "name": "Murat Kaan Meral"}}, "url": "https://github.com/ibissource/iaf/commit/7a91581fc3e16e8b559b5426f94869eef7d4c22e", "committedDate": "2020-03-13T09:18:10Z", "message": "Get rid of xml layout and explicit servlet filters."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e693724225eb3111af6c8461a53533b7a728f76d", "author": {"user": {"login": "mkmeral", "name": "Murat Kaan Meral"}}, "url": "https://github.com/ibissource/iaf/commit/e693724225eb3111af6c8461a53533b7a728f76d", "committedDate": "2020-03-13T09:29:21Z", "message": "Merge branch 'master' into logger-update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7adf9206d8a4a6c4a915da0a108ab878e7a6ef16", "author": {"user": {"login": "mkmeral", "name": "Murat Kaan Meral"}}, "url": "https://github.com/ibissource/iaf/commit/7adf9206d8a4a6c4a915da0a108ab878e7a6ef16", "committedDate": "2020-03-13T13:02:16Z", "message": "Rearrange pom dependencies."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "679b49c672b488f20d09272c5773102512dd28b8", "author": {"user": {"login": "mkmeral", "name": "Murat Kaan Meral"}}, "url": "https://github.com/ibissource/iaf/commit/679b49c672b488f20d09272c5773102512dd28b8", "committedDate": "2020-03-13T13:03:14Z", "message": "Merge branch master to logger-update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d3292be28e78f24cfe6832a944d107460bbbbe0", "author": {"user": {"login": "mkmeral", "name": "Murat Kaan Meral"}}, "url": "https://github.com/ibissource/iaf/commit/6d3292be28e78f24cfe6832a944d107460bbbbe0", "committedDate": "2020-03-13T13:03:35Z", "message": "Debug and optimize logging extensions."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b774ce6092f0f440c4850355ee923b92b1c1f2d9", "author": {"user": {"login": "mkmeral", "name": "Murat Kaan Meral"}}, "url": "https://github.com/ibissource/iaf/commit/b774ce6092f0f440c4850355ee923b92b1c1f2d9", "committedDate": "2020-03-13T13:04:42Z", "message": "Debug configuration."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2cc960e50ccec7b77f6687b1d87c22d76136798b", "author": {"user": {"login": "mkmeral", "name": "Murat Kaan Meral"}}, "url": "https://github.com/ibissource/iaf/commit/2cc960e50ccec7b77f6687b1d87c22d76136798b", "committedDate": "2020-03-13T14:42:53Z", "message": "Improve message logging. And get rid of MsgLogUtil."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "76afbee00599e022606037867adf8de876b8ec25", "author": {"user": {"login": "mkmeral", "name": "Murat Kaan Meral"}}, "url": "https://github.com/ibissource/iaf/commit/76afbee00599e022606037867adf8de876b8ec25", "committedDate": "2020-03-18T09:53:12Z", "message": "Revert StartIbis.java, committed by mistake."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b02ddf0a60350741196d7622200a9ce31fb0571", "author": {"user": {"login": "mkmeral", "name": "Murat Kaan Meral"}}, "url": "https://github.com/ibissource/iaf/commit/1b02ddf0a60350741196d7622200a9ce31fb0571", "committedDate": "2020-03-18T10:02:11Z", "message": "Merge branch 'master' into logger-update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ec88d5793862b20663960a22fc8d196c2e688365", "author": {"user": {"login": "mkmeral", "name": "Murat Kaan Meral"}}, "url": "https://github.com/ibissource/iaf/commit/ec88d5793862b20663960a22fc8d196c2e688365", "committedDate": "2020-03-18T11:00:20Z", "message": "Bring back logutil."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b2c430947df0a613097734c9a3a0b818c786692", "author": {"user": {"login": "mkmeral", "name": "Murat Kaan Meral"}}, "url": "https://github.com/ibissource/iaf/commit/5b2c430947df0a613097734c9a3a0b818c786692", "committedDate": "2020-03-18T11:01:25Z", "message": "Merge branch 'logger-update' of github.com:ibissource/iaf into logger-update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6bae6925f5566afce902fd21971446672515f23", "author": {"user": {"login": "mkmeral", "name": "Murat Kaan Meral"}}, "url": "https://github.com/ibissource/iaf/commit/c6bae6925f5566afce902fd21971446672515f23", "committedDate": "2020-03-18T11:42:41Z", "message": "Disable log4j2 trace logging."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "60665d87d46101dd38695726d411511bd91c221b", "author": {"user": {"login": "mkmeral", "name": "Murat Kaan Meral"}}, "url": "https://github.com/ibissource/iaf/commit/60665d87d46101dd38695726d411511bd91c221b", "committedDate": "2020-03-18T11:43:19Z", "message": "Revert using logmanager instead of logutil."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "604364c2b9fa43454e2a8d6b1a2d6653284859e3", "author": {"user": {"login": "mkmeral", "name": "Murat Kaan Meral"}}, "url": "https://github.com/ibissource/iaf/commit/604364c2b9fa43454e2a8d6b1a2d6653284859e3", "committedDate": "2020-03-26T14:44:50Z", "message": "Merge branch 'master' into logger-update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "677a7ec0e787c50dd4d28922339ef773718d60ed", "author": {"user": {"login": "mkmeral", "name": "Murat Kaan Meral"}}, "url": "https://github.com/ibissource/iaf/commit/677a7ec0e787c50dd4d28922339ef773718d60ed", "committedDate": "2020-04-02T08:16:30Z", "message": "Merge branch 'master' into logger-update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "949d3ec38b424f425fc01db9bc595e7275b0bfe3", "author": {"user": {"login": "mkmeral", "name": "Murat Kaan Meral"}}, "url": "https://github.com/ibissource/iaf/commit/949d3ec38b424f425fc01db9bc595e7275b0bfe3", "committedDate": "2020-04-02T08:43:48Z", "message": "Solve wrong auto-merge issue."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f68e55956d4cf136171dd37f0d5fb2f5496d996", "author": {"user": {"login": "nielsm5", "name": "Niels"}}, "url": "https://github.com/ibissource/iaf/commit/3f68e55956d4cf136171dd37f0d5fb2f5496d996", "committedDate": "2020-04-08T12:43:46Z", "message": "Remove and correct a few (unused) imports"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fdf03c840b92344aaa74c222151b614cfa7bf8ef", "author": {"user": {"login": "nielsm5", "name": "Niels"}}, "url": "https://github.com/ibissource/iaf/commit/fdf03c840b92344aaa74c222151b614cfa7bf8ef", "committedDate": "2020-04-08T13:21:32Z", "message": "More imports"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwMTA1OTU2", "url": "https://github.com/ibissource/iaf/pull/520#pullrequestreview-390105956", "createdAt": "2020-04-08T15:51:31Z", "commit": {"oid": "fdf03c840b92344aaa74c222151b614cfa7bf8ef"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNTo1MTozMVrOGC1pmg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNTo1MTozMVrOGC1pmg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTYyOTMzOA==", "bodyText": "Copyright 2017-2019 Nationale-Nederlanden, 2020 WeAreFrank!", "url": "https://github.com/ibissource/iaf/pull/520#discussion_r405629338", "createdAt": "2020-04-08T15:51:31Z", "author": {"login": "gvanbrakel"}, "path": "akamai/src/main/java/nl/nn/adapterframework/extensions/akamai/NetStorageSender.java", "diffHunk": "@@ -1,5 +1,5 @@\n /*\n-   Copyright 2017-2019 Nationale-Nederlanden\n+   Copyright 2017-2020 WeAreFrank!", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fdf03c840b92344aaa74c222151b614cfa7bf8ef"}, "originalPosition": 3}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "28d37e1220469ec40e5191b975ef83da1f96c54a", "author": {"user": {"login": "nielsm5", "name": "Niels"}}, "url": "https://github.com/ibissource/iaf/commit/28d37e1220469ec40e5191b975ef83da1f96c54a", "committedDate": "2020-04-08T18:38:49Z", "message": "Cleanup a little bit more"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a487247f79533cdf82b995f78b02327525b74224", "author": {"user": {"login": "mkmeral", "name": "Murat Kaan Meral"}}, "url": "https://github.com/ibissource/iaf/commit/a487247f79533cdf82b995f78b02327525b74224", "committedDate": "2020-04-14T08:43:51Z", "message": "Rollback logger provider, and add log4j dependency to pom.xml."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2429032ea8df7da17cdbcc799813b863cbbe7906", "author": {"user": {"login": "mkmeral", "name": "Murat Kaan Meral"}}, "url": "https://github.com/ibissource/iaf/commit/2429032ea8df7da17cdbcc799813b863cbbe7906", "committedDate": "2020-04-14T08:44:56Z", "message": "Adapter name to upper case for logger name."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "826b10dc135cd52d503dc33a59576d26ba373af9", "author": {"user": {"login": "mkmeral", "name": "Murat Kaan Meral"}}, "url": "https://github.com/ibissource/iaf/commit/826b10dc135cd52d503dc33a59576d26ba373af9", "committedDate": "2020-04-14T08:49:38Z", "message": "Add deprecated message for log4j4ibis.xml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1c55468c1d9f61af7cde9fa24e250d2b59f98e9c", "author": {"user": {"login": "mkmeral", "name": "Murat Kaan Meral"}}, "url": "https://github.com/ibissource/iaf/commit/1c55468c1d9f61af7cde9fa24e250d2b59f98e9c", "committedDate": "2020-04-14T08:50:38Z", "message": "Replace impossible regex with null to improve performance."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f3faaf2e38f73674af6d53f95b6c99427441311", "author": {"user": {"login": "mkmeral", "name": "Murat Kaan Meral"}}, "url": "https://github.com/ibissource/iaf/commit/3f3faaf2e38f73674af6d53f95b6c99427441311", "committedDate": "2020-04-14T08:51:00Z", "message": "Add extra javadoc for log4j2 extensions."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9fe15acaf6707e2a24466ef290e4b7115a5682ae", "author": {"user": {"login": "nielsm5", "name": "Niels"}}, "url": "https://github.com/ibissource/iaf/commit/9fe15acaf6707e2a24466ef290e4b7115a5682ae", "committedDate": "2020-04-14T14:28:41Z", "message": "Add licence, javadoc, rename a few methods"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "57b82a2b024e5a0f4228586512f0479f6359f02b", "author": {"user": {"login": "nielsm5", "name": "Niels"}}, "url": "https://github.com/ibissource/iaf/commit/57b82a2b024e5a0f4228586512f0479f6359f02b", "committedDate": "2020-04-14T15:09:08Z", "message": "Fix a few junittests and generify messagelog logger pattern"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0dce48ab49e7a5896217708165964babdf075781", "author": {"user": {"login": "nielsm5", "name": "Niels"}}, "url": "https://github.com/ibissource/iaf/commit/0dce48ab49e7a5896217708165964babdf075781", "committedDate": "2020-04-14T15:29:52Z", "message": "Fix NPE"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc30f170bcb8110d8c84c1461be2e75db1de011e", "author": {"user": {"login": "nielsm5", "name": "Niels"}}, "url": "https://github.com/ibissource/iaf/commit/bc30f170bcb8110d8c84c1461be2e75db1de011e", "committedDate": "2020-04-14T15:40:43Z", "message": "Fix missing dash in log message"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d8f920bd72740592168179057102b7e33929886", "author": {"user": {"login": "mkmeral", "name": "Murat Kaan Meral"}}, "url": "https://github.com/ibissource/iaf/commit/1d8f920bd72740592168179057102b7e33929886", "committedDate": "2020-04-14T15:55:48Z", "message": "Update test configuration."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "69f221633ad305cf803d89e828fbb6cc272fd452", "author": {"user": {"login": "mkmeral", "name": "Murat Kaan Meral"}}, "url": "https://github.com/ibissource/iaf/commit/69f221633ad305cf803d89e828fbb6cc272fd452", "committedDate": "2020-04-15T11:31:02Z", "message": "Add test-jar for log4j2 to use listappender."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8aa54824da7bb06d5c70478df5f9376cc8178a59", "author": {"user": {"login": "mkmeral", "name": "Murat Kaan Meral"}}, "url": "https://github.com/ibissource/iaf/commit/8aa54824da7bb06d5c70478df5f9376cc8178a59", "committedDate": "2020-04-15T11:39:49Z", "message": "Replace test appender with list appender."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6bebc8fe0380b2420df2f8f17c93288688f5942a", "author": {"user": {"login": "mkmeral", "name": "Murat Kaan Meral"}}, "url": "https://github.com/ibissource/iaf/commit/6bebc8fe0380b2420df2f8f17c93288688f5942a", "committedDate": "2020-04-15T12:17:30Z", "message": "Delete unrelated test file."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "db03b6e8c48f1395f33d3d04eea862b60e2bd3f8", "author": {"user": {"login": "nielsm5", "name": "Niels"}}, "url": "https://github.com/ibissource/iaf/commit/db03b6e8c48f1395f33d3d04eea862b60e2bd3f8", "committedDate": "2020-04-15T15:26:42Z", "message": "Revert log lines to their old format"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "637fe2b8021730e22896de96ba96e1c4e8ea0a02", "author": {"user": {"login": "nielsm5", "name": "Niels"}}, "url": "https://github.com/ibissource/iaf/commit/637fe2b8021730e22896de96ba96e1c4e8ea0a02", "committedDate": "2020-04-20T12:35:29Z", "message": "Refactor a few classes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0138bb6dec77e0d7d04f6871d5bc2dbab2ec1d35", "author": {"user": {"login": "nielsm5", "name": "Niels"}}, "url": "https://github.com/ibissource/iaf/commit/0138bb6dec77e0d7d04f6871d5bc2dbab2ec1d35", "committedDate": "2020-04-20T12:41:16Z", "message": "Revert changes to log statement"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7cc563bf4f6d6da0b3df772a15708ca76bc6aae9", "author": {"user": {"login": "nielsm5", "name": "Niels"}}, "url": "https://github.com/ibissource/iaf/commit/7cc563bf4f6d6da0b3df772a15708ca76bc6aae9", "committedDate": "2020-04-20T12:49:46Z", "message": "Merge branch 'master' into logger-update\n\n# Conflicts:\n#\tcore/src/main/java/nl/nn/adapterframework/http/HttpSenderBase.java\n#\tcore/src/main/java/nl/nn/adapterframework/jdbc/dbms/OracleToMSSQLTranslator.java\n#\tcore/src/main/java/nl/nn/adapterframework/lifecycle/ServletManager.java\n#\tcore/src/main/java/nl/nn/adapterframework/webcontrol/api/BrowseJdbcTable.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "698b25e634b1294055cd7f42ea819fb8433106c2", "author": {"user": {"login": "nielsm5", "name": "Niels"}}, "url": "https://github.com/ibissource/iaf/commit/698b25e634b1294055cd7f42ea819fb8433106c2", "committedDate": "2020-04-20T13:00:12Z", "message": "Fix NPE"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "99f6915b700881ee0f72eda1a64f6223c8fe13a6", "author": {"user": {"login": "nielsm5", "name": "Niels"}}, "url": "https://github.com/ibissource/iaf/commit/99f6915b700881ee0f72eda1a64f6223c8fe13a6", "committedDate": "2020-04-20T13:15:51Z", "message": "Fix disableANSI"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a2a1feec917ed294b81ab42bfa234be336439f91", "author": {"user": {"login": "nielsm5", "name": "Niels"}}, "url": "https://github.com/ibissource/iaf/commit/a2a1feec917ed294b81ab42bfa234be336439f91", "committedDate": "2020-04-20T14:17:56Z", "message": "Rename extensions.log4j package to logging"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2NTUxMzcx", "url": "https://github.com/ibissource/iaf/pull/520#pullrequestreview-396551371", "createdAt": "2020-04-20T15:15:19Z", "commit": {"oid": "a2a1feec917ed294b81ab42bfa234be336439f91"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNToxNToxOVrOGIZnlQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNTo0OToxN1rOGIbQ3g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQ2MTUyNQ==", "bodyText": "Hier misschien nog een keer Ctrl-Shift-O doen?", "url": "https://github.com/ibissource/iaf/pull/520#discussion_r411461525", "createdAt": "2020-04-20T15:15:19Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/align/content/JsonDocumentContainer.java", "diffHunk": "@@ -22,10 +22,9 @@\n import javax.json.stream.JsonGenerator;\n \n import org.apache.commons.lang.NotImplementedException;\n-import org.apache.log4j.Logger;\n-import org.apache.xerces.xs.XSTypeDefinition;\n-\n import nl.nn.adapterframework.util.LogUtil;\n+import org.apache.logging.log4j.Logger;\n+import org.apache.xerces.xs.XSTypeDefinition;\n ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2a1feec917ed294b81ab42bfa234be336439f91"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQ2MjI0NA==", "bodyText": "Hier ook Ctrl-Shift-O", "url": "https://github.com/ibissource/iaf/pull/520#discussion_r411462244", "createdAt": "2020-04-20T15:16:11Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/cache/CacheAdapterBase.java", "diffHunk": "@@ -15,14 +15,13 @@\n */\n package nl.nn.adapterframework.cache;\n \n-import org.apache.commons.lang.StringUtils;\n-import org.apache.log4j.Logger;\n-\n import nl.nn.adapterframework.configuration.ConfigurationException;\n import nl.nn.adapterframework.core.IPipeLineSession;\n import nl.nn.adapterframework.doc.IbisDoc;\n-import nl.nn.adapterframework.util.LogUtil;\n import nl.nn.adapterframework.util.TransformerPool;\n+import org.apache.commons.lang.StringUtils;\n+import nl.nn.adapterframework.util.LogUtil;\n+import org.apache.logging.log4j.Logger;\n ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2a1feec917ed294b81ab42bfa234be336439f91"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQ2MzI2NQ==", "bodyText": "Hier ook Ctrl-Shift-O", "url": "https://github.com/ibissource/iaf/pull/520#discussion_r411463265", "createdAt": "2020-04-20T15:17:31Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/configuration/IbisContext.java", "diffHunk": "@@ -39,9 +26,21 @@\n import nl.nn.adapterframework.util.DateUtils;\n import nl.nn.adapterframework.util.FlowDiagram;\n import nl.nn.adapterframework.util.JdbcUtil;\n-import nl.nn.adapterframework.util.LogUtil;\n import nl.nn.adapterframework.util.MessageKeeper;\n import nl.nn.adapterframework.util.MessageKeeperMessage;\n+import org.apache.commons.lang.StringUtils;\n+import nl.nn.adapterframework.util.LogUtil;\n+import org.apache.logging.log4j.Logger;\n+import org.springframework.beans.factory.BeanCreationException;\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2a1feec917ed294b81ab42bfa234be336439f91"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQ2MzU3Ng==", "bodyText": "Hier ook Ctrl-Shift-O", "url": "https://github.com/ibissource/iaf/pull/520#discussion_r411463576", "createdAt": "2020-04-20T15:17:53Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/configuration/JmxMbeanHelper.java", "diffHunk": "@@ -15,10 +15,12 @@\n */\n package nl.nn.adapterframework.configuration;\n \n-import java.util.HashMap;\n-import java.util.List;\n-import java.util.Map;\n-import java.util.Set;\n+import nl.nn.adapterframework.core.IAdapter;\n+import nl.nn.adapterframework.util.AppConstants;\n+import nl.nn.adapterframework.util.JmxUtils;\n+import org.apache.commons.lang.StringUtils;\n+import nl.nn.adapterframework.util.LogUtil;\n+import org.apache.logging.log4j.Logger;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2a1feec917ed294b81ab42bfa234be336439f91"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQ2NzI5MQ==", "bodyText": "Hier ook Ctrl-Shift-O", "url": "https://github.com/ibissource/iaf/pull/520#discussion_r411467291", "createdAt": "2020-04-20T15:22:35Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/doc/IbisDocPipe.java", "diffHunk": "@@ -64,6 +34,25 @@\n import nl.nn.adapterframework.util.Misc;\n import nl.nn.adapterframework.util.XmlBuilder;\n import nl.nn.adapterframework.util.XmlUtils;\n+import org.apache.logging.log4j.Logger;\n+import org.springframework.beans.factory.BeanDefinitionStoreException;\n+import org.springframework.beans.factory.config.BeanDefinition;\n+import org.springframework.beans.factory.support.BeanDefinitionRegistry;\n+import org.springframework.beans.factory.support.BeanNameGenerator;\n+import org.springframework.beans.factory.support.SimpleBeanDefinitionRegistry;\n+import org.springframework.context.annotation.AnnotationBeanNameGenerator;\n+import org.springframework.context.annotation.ClassPathBeanDefinitionScanner;\n+import org.springframework.core.annotation.AnnotationUtils;\n+import org.springframework.core.type.filter.AssignableTypeFilter;\n+import org.springframework.core.type.filter.RegexPatternTypeFilter;\n+import org.springframework.util.Assert;\n+import org.xml.sax.SAXException;\n+\n+import java.io.IOException;\n+import java.lang.reflect.Method;\n+import java.lang.reflect.Modifier;\n+import java.util.*;\n+import java.util.regex.Pattern;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2a1feec917ed294b81ab42bfa234be336439f91"}, "originalPosition": 59}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQ2ODkyNQ==", "bodyText": "Hier ook Ctrl-Shift-O", "url": "https://github.com/ibissource/iaf/pull/520#discussion_r411468925", "createdAt": "2020-04-20T15:24:35Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/extensions/svn/SvnUtils.java", "diffHunk": "@@ -15,22 +15,19 @@\n  */\n package nl.nn.adapterframework.extensions.svn;\n \n-import java.io.IOException;\n-\n-import javax.xml.xpath.XPathExpressionException;\n-\n-import org.apache.commons.lang.StringUtils;\n-import org.apache.log4j.Logger;\n-\n import nl.nn.adapterframework.configuration.ConfigurationException;\n import nl.nn.adapterframework.core.SenderException;\n import nl.nn.adapterframework.core.TimeOutException;\n import nl.nn.adapterframework.http.HttpSender;\n import nl.nn.adapterframework.stream.Message;\n import nl.nn.adapterframework.util.DomBuilderException;\n-import nl.nn.adapterframework.util.LogUtil;\n import nl.nn.adapterframework.util.XmlUtils;\n+import org.apache.commons.lang.StringUtils;\n+import nl.nn.adapterframework.util.LogUtil;\n+import org.apache.logging.log4j.Logger;\n \n+import javax.xml.xpath.XPathExpressionException;\n+import java.io.IOException;\n /**", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2a1feec917ed294b81ab42bfa234be336439f91"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQ2OTg5Mw==", "bodyText": "Hier ook Ctrl-Shift-O", "url": "https://github.com/ibissource/iaf/pull/520#discussion_r411469893", "createdAt": "2020-04-20T15:25:45Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/extensions/xfb/XfbSender.java", "diffHunk": "@@ -15,21 +15,20 @@\n */\n package nl.nn.adapterframework.extensions.xfb;\n \n-import java.io.File;\n-import java.io.IOException;\n-\n-import org.apache.commons.lang.StringUtils;\n-import org.apache.log4j.Logger;\n-\n import nl.nn.adapterframework.configuration.ConfigurationException;\n import nl.nn.adapterframework.core.IPipeLineSession;\n import nl.nn.adapterframework.core.SenderException;\n import nl.nn.adapterframework.core.TimeOutException;\n import nl.nn.adapterframework.senders.SenderWithParametersBase;\n import nl.nn.adapterframework.stream.Message;\n import nl.nn.adapterframework.util.FileUtils;\n-import nl.nn.adapterframework.util.LogUtil;\n import nl.nn.adapterframework.util.ProcessUtil;\n+import org.apache.commons.lang.StringUtils;\n+import nl.nn.adapterframework.util.LogUtil;\n+import org.apache.logging.log4j.Logger;\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2a1feec917ed294b81ab42bfa234be336439f91"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQ3Mzg3Ng==", "bodyText": "Hier wil je wel een if(log.isLevelTerseEnabled()) denk ik", "url": "https://github.com/ibissource/iaf/pull/520#discussion_r411473876", "createdAt": "2020-04-20T15:30:40Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/pipes/MessageSendingPipe.java", "diffHunk": "@@ -878,16 +879,14 @@ protected PipeRunResult sendMessage(Message input, IPipeLineSession session, ISe\n \t\t\t\t\t\t\tadapter.setLastExitState(getName(), System.currentTimeMillis(), exitState);\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n-\t\t\t\t\tif (MsgLogUtil.getMsgLogLevelNum(adapter.getMsgLogLevel())>=MsgLogUtil.MSGLOG_LEVEL_TERSE) {\n \n-\t\t\t\t\t\tString duration;\n-\t\t\t\t\t\tif(msgLogHumanReadable) {\n-\t\t\t\t\t\t\tduration = Misc.getAge(startTime);\n-\t\t\t\t\t\t} else {\n-\t\t\t\t\t\t\tduration = Misc.getDurationInMs(startTime);\n-\t\t\t\t\t\t}\n-\t\t\t\t\t\tmsgLog.info(\"Sender [\" + sender.getName() + \"] class [\" + sender.getClass().getSimpleName() + \"] duration [\" + duration + \"] got exit-state [\" + exitState + \"]\");\n+\t\t\t\t\tString duration;\n+\t\t\t\t\tif(msgLogHumanReadable) {\n+\t\t\t\t\t\tduration = Misc.getAge(startTime);\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\tduration = Misc.getDurationInMs(startTime);\n \t\t\t\t\t}\n+\t\t\t\t\tmsgLog.log(Level.toLevel(\"TERSE\"), String.format(\"Sender [%s] class [%s] duration [%s] got exit-state [%s]\", sender.getName(), ClassUtils.nameOf(sender), duration, exitState));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2a1feec917ed294b81ab42bfa234be336439f91"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQ3NTg4OQ==", "bodyText": "Hier ook Ctrl-Shift-O", "url": "https://github.com/ibissource/iaf/pull/520#discussion_r411475889", "createdAt": "2020-04-20T15:33:10Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/util/AppConstants.java", "diffHunk": "@@ -31,7 +31,8 @@\n import org.apache.commons.digester.substitution.VariableExpander;\n import org.apache.commons.io.FilenameUtils;\n import org.apache.commons.lang3.StringUtils;\n-import org.apache.log4j.Logger;\n+import nl.nn.adapterframework.util.LogUtil;\n+import org.apache.logging.log4j.Logger;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2a1feec917ed294b81ab42bfa234be336439f91"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQ3NjEyNA==", "bodyText": "Hier ook Ctrl-Shift-O", "url": "https://github.com/ibissource/iaf/pull/520#discussion_r411476124", "createdAt": "2020-04-20T15:33:27Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/util/ClassUtils.java", "diffHunk": "@@ -33,7 +33,8 @@\n \n import org.apache.commons.lang.builder.ReflectionToStringBuilder;\n import org.apache.commons.lang3.StringUtils;\n-import org.apache.log4j.Logger;\n+import nl.nn.adapterframework.util.LogUtil;\n+import org.apache.logging.log4j.Logger;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2a1feec917ed294b81ab42bfa234be336439f91"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQ3NjMxNw==", "bodyText": "Hier ook Ctrl-Shift-O", "url": "https://github.com/ibissource/iaf/pull/520#discussion_r411476317", "createdAt": "2020-04-20T15:33:42Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/util/CredentialFactory.java", "diffHunk": "@@ -38,7 +38,8 @@\n \n import org.apache.commons.lang.StringUtils;\n import org.apache.commons.lang.builder.ToStringBuilder;\n-import org.apache.log4j.Logger;\n+import nl.nn.adapterframework.util.LogUtil;\n+import org.apache.logging.log4j.Logger;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2a1feec917ed294b81ab42bfa234be336439f91"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQ3NjQxNA==", "bodyText": "Hier ook Ctrl-Shift-O", "url": "https://github.com/ibissource/iaf/pull/520#discussion_r411476414", "createdAt": "2020-04-20T15:33:50Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/util/DB2XMLWriter.java", "diffHunk": "@@ -23,7 +23,8 @@\n \n import nl.nn.adapterframework.core.SenderException;\n \n-import org.apache.log4j.Logger;\n+import nl.nn.adapterframework.util.LogUtil;\n+import org.apache.logging.log4j.Logger;\n ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2a1feec917ed294b81ab42bfa234be336439f91"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQ3NzI3MA==", "bodyText": "Hier ook Ctrl-Shift-O", "url": "https://github.com/ibissource/iaf/pull/520#discussion_r411477270", "createdAt": "2020-04-20T15:34:55Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/util/FileHandler.java", "diffHunk": "@@ -45,6 +44,7 @@\n import nl.nn.adapterframework.parameters.ParameterList;\n import nl.nn.adapterframework.parameters.ParameterValue;\n import nl.nn.adapterframework.parameters.ParameterValueList;\n+import org.apache.logging.log4j.Logger;\n import nl.nn.adapterframework.stream.Message;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2a1feec917ed294b81ab42bfa234be336439f91"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQ3NzUyMg==", "bodyText": "Hier ook Ctrl-Shift-O", "url": "https://github.com/ibissource/iaf/pull/520#discussion_r411477522", "createdAt": "2020-04-20T15:35:14Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/util/FileUtils.java", "diffHunk": "@@ -35,14 +35,14 @@\n import javax.servlet.http.HttpServletRequest;\n \n import org.apache.commons.lang.StringUtils;\n-import org.apache.log4j.Logger;\n \n import nl.nn.adapterframework.configuration.ConfigurationException;\n import nl.nn.adapterframework.core.IPipeLineSession;\n import nl.nn.adapterframework.core.ParameterException;\n import nl.nn.adapterframework.parameters.Parameter;\n import nl.nn.adapterframework.parameters.ParameterList;\n import nl.nn.adapterframework.parameters.ParameterValueList;\n+import org.apache.logging.log4j.Logger;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2a1feec917ed294b81ab42bfa234be336439f91"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQ4MDMwMA==", "bodyText": "Hier ook Ctrl-Shift-O", "url": "https://github.com/ibissource/iaf/pull/520#discussion_r411480300", "createdAt": "2020-04-20T15:38:48Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/webcontrol/api/ServerStatistics.java", "diffHunk": "@@ -54,15 +51,18 @@\n import nl.nn.adapterframework.core.IAdapter;\n import nl.nn.adapterframework.core.IReceiver;\n import nl.nn.adapterframework.core.ITransactionalStorage;\n-import nl.nn.adapterframework.extensions.log4j.IbisAppenderWrapper;\n+import nl.nn.adapterframework.logging.IbisMaskingLayout;\n import nl.nn.adapterframework.receivers.ReceiverBase;\n import nl.nn.adapterframework.util.AppConstants;\n import nl.nn.adapterframework.util.DateUtils;\n-import nl.nn.adapterframework.util.LogUtil;\n import nl.nn.adapterframework.util.MessageKeeper;\n import nl.nn.adapterframework.util.Misc;\n import nl.nn.adapterframework.util.ProcessMetrics;\n import nl.nn.adapterframework.util.RunStateEnum;\n+import org.apache.logging.log4j.Level;\n+import nl.nn.adapterframework.util.LogUtil;\n+import org.apache.logging.log4j.Logger;\n+import org.apache.logging.log4j.core.config.Configurator;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2a1feec917ed294b81ab42bfa234be336439f91"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQ4MTExNA==", "bodyText": "Nou ja!", "url": "https://github.com/ibissource/iaf/pull/520#discussion_r411481114", "createdAt": "2020-04-20T15:39:49Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/webcontrol/api/ServerStatistics.java", "diffHunk": "@@ -348,16 +335,15 @@ else if(key.equalsIgnoreCase(\"enableDebugger\")) {\n \t\t\t\tmsg.append(\"logIntermediaryResults changed from [\" + logIntermediary+ \"] to [\" + logIntermediaryResults + \"]\");\n \t\t}\n \n-\t\tif (iaw != null) {\n-\t\t\tif(iaw.getMaxMessageLength() != maxMessageLength) {\n-\t\t\t\tif(msg.length() > 0)\n-\t\t\t\t\tmsg.append(\", logMaxMessageLength from [\" + iaw.getMaxMessageLength() + \"] to [\" + maxMessageLength + \"]\");\n-\t\t\t\telse\n-\t\t\t\t\tmsg.append(\"logMaxMessageLength changed from [\" + iaw.getMaxMessageLength() + \"] to [\" + maxMessageLength + \"]\");\n-\t\t\t\tiaw.setMaxMessageLength(maxMessageLength);\n-\t\t\t}\n-\t\t}\n+\t\tif (maxMessageLength != IbisMaskingLayout.getMaxLength()) {\n+\t\t\tmsg.append(\", logMaxMessageLength changed from [\")\n+\t\t\t\t\t.append(IbisMaskingLayout.getMaxLength())\n+\t\t\t\t\t.append(\"] to [\")\n+\t\t\t\t\t.append(maxMessageLength)\n+\t\t\t\t\t.append(\"]\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2a1feec917ed294b81ab42bfa234be336439f91"}, "originalPosition": 103}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQ4ODQ3OA==", "bodyText": "Misschien wel handig om uit te leggen hoe dit werkt, in een commentaarregeltje", "url": "https://github.com/ibissource/iaf/pull/520#discussion_r411488478", "createdAt": "2020-04-20T15:49:17Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/logging/IbisLoggerConfigurationFactory.java", "diffHunk": "@@ -0,0 +1,216 @@\n+/*\n+   Copyright 2020 WeAreFrank!\n+\n+   Licensed under the Apache License, Version 2.0 (the \"License\");\n+   you may not use this file except in compliance with the License.\n+   You may obtain a copy of the License at\n+\n+       http://www.apache.org/licenses/LICENSE-2.0\n+\n+   Unless required by applicable law or agreed to in writing, software\n+   distributed under the License is distributed on an \"AS IS\" BASIS,\n+   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+   See the License for the specific language governing permissions and\n+   limitations under the License.\n+*/\n+package nl.nn.adapterframework.logging;\n+\n+import java.io.BufferedReader;\n+import java.io.File;\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.io.StringWriter;\n+import java.io.Writer;\n+import java.net.URL;\n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.Properties;\n+import java.util.regex.Matcher;\n+import java.util.regex.Pattern;\n+\n+import org.apache.logging.log4j.ThreadContext;\n+import org.apache.logging.log4j.core.LoggerContext;\n+import org.apache.logging.log4j.core.config.Configuration;\n+import org.apache.logging.log4j.core.config.ConfigurationFactory;\n+import org.apache.logging.log4j.core.config.ConfigurationSource;\n+import org.apache.logging.log4j.core.config.xml.XmlConfiguration;\n+import nl.nn.adapterframework.util.StreamUtil;\n+\n+/**\n+ * This ConfigurationFactory is loaded after the log4j2.properties file has been initialised.\n+ * Both Configurations are then combined via a CompositeConfiguration\n+ * \n+ * @author Murat Kaan Meral\n+ * @author Niels Meijer\n+ */\n+//@Order(1000)\n+//@Plugin(name = \"IbisLoggerConfigurationFactory\", category = ConfigurationFactory.CATEGORY)\n+public class IbisLoggerConfigurationFactory extends ConfigurationFactory {\n+\tpublic static final String LOG_PREFIX = \"IbisLoggerConfigurationFactory class \";\n+\tprivate static final String LOG4J_PROPS_FILE = \"log4j4ibis.properties\";\n+\tprivate static final String DS_PROPERTIES_FILE = \"DeploymentSpecifics.properties\";\n+\tprivate static String[] logDirectoryHierarchy = new String[] {\n+\t\t\t\"site.logdir\",\n+\t\t\t\"user.dir/logs\",\n+\t\t\t\"user.dir/log\",\n+\t\t\t\"jboss.server.base.dir/log\",\n+\t\t\t\"wtp.deploy/../logs\",\n+\t\t\t\"catalina.base/logs\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2a1feec917ed294b81ab42bfa234be336439f91"}, "originalPosition": 58}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b66c16b3325eb093fed3223387290a8dddc277ab", "author": {"user": {"login": "nielsm5", "name": "Niels"}}, "url": "https://github.com/ibissource/iaf/commit/b66c16b3325eb093fed3223387290a8dddc277ab", "committedDate": "2020-04-20T16:36:04Z", "message": "Make code Gerrit compliant"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "52b2a90dd39f55482f949b9c332808e78b8c3516", "author": {"user": {"login": "gvanbrakel", "name": "Gerrit van Brakel"}}, "url": "https://github.com/ibissource/iaf/commit/52b2a90dd39f55482f949b9c332808e78b8c3516", "committedDate": "2020-04-22T10:19:40Z", "message": "Merge branch 'master' into logger-update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5fef93ec1e685a21de0fd911218b0ab7ee0b4ea2", "author": {"user": {"login": "gvanbrakel", "name": "Gerrit van Brakel"}}, "url": "https://github.com/ibissource/iaf/commit/5fef93ec1e685a21de0fd911218b0ab7ee0b4ea2", "committedDate": "2020-04-22T12:16:53Z", "message": "Fix logger in FileSystemUtils"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4MTQyOTE4", "url": "https://github.com/ibissource/iaf/pull/520#pullrequestreview-398142918", "createdAt": "2020-04-22T12:34:44Z", "commit": {"oid": "5fef93ec1e685a21de0fd911218b0ab7ee0b4ea2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4MjU3MTEx", "url": "https://github.com/ibissource/iaf/pull/520#pullrequestreview-398257111", "createdAt": "2020-04-22T14:35:45Z", "commit": {"oid": "5fef93ec1e685a21de0fd911218b0ab7ee0b4ea2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c5a348c172e1f71cedcb750028853904abbab5e0", "author": {"user": {"login": "nielsm5", "name": "Niels"}}, "url": "https://github.com/ibissource/iaf/commit/c5a348c172e1f71cedcb750028853904abbab5e0", "committedDate": "2020-04-22T16:44:00Z", "message": "Fix typo"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1416, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}