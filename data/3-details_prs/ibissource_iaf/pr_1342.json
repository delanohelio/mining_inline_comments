{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQwOTgxMDgy", "number": 1342, "title": "FileSystem read using Message", "bodyText": "", "createdAt": "2020-12-16T08:18:51Z", "url": "https://github.com/ibissource/iaf/pull/1342", "merged": true, "mergeCommit": {"oid": "e2bd94b033bd6a2cbcbe93a53da00502034a9637"}, "closed": true, "closedAt": "2020-12-16T12:52:42Z", "author": {"login": "gvanbrakel"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdmqg6PgH2gAyNTQwOTgxMDgyOjI2YmI2ZTliNTEyNjM3MGZiMDBkOWQ2M2JlMjI5MTBmOGY2MzBiNGY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdmub-mgFqTU1MzY1NjAxMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "26bb6e9b5126370fb00d9d63be22910f8f630b4f", "author": {"user": {"login": "gvanbrakel", "name": "Gerrit van Brakel"}}, "url": "https://github.com/ibissource/iaf/commit/26bb6e9b5126370fb00d9d63be22910f8f630b4f", "committedDate": "2020-12-16T08:18:19Z", "message": "FileSystem read using Message"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f142d3ca46e5dfd46383c67bc9b3800d4bb4e3ae", "author": {"user": {"login": "gvanbrakel", "name": "Gerrit van Brakel"}}, "url": "https://github.com/ibissource/iaf/commit/f142d3ca46e5dfd46383c67bc9b3800d4bb4e3ae", "committedDate": "2020-12-16T08:30:28Z", "message": "Remove unused imports"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "88776d11119ee6d1db6f9b949c444ba1f3f63729", "author": {"user": {"login": "gvanbrakel", "name": "Gerrit van Brakel"}}, "url": "https://github.com/ibissource/iaf/commit/88776d11119ee6d1db6f9b949c444ba1f3f63729", "committedDate": "2020-12-16T08:51:22Z", "message": "set CXF logging to warn"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUzNTAxODMx", "url": "https://github.com/ibissource/iaf/pull/1342#pullrequestreview-553501831", "createdAt": "2020-12-16T09:30:31Z", "commit": {"oid": "88776d11119ee6d1db6f9b949c444ba1f3f63729"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQwOTozMDozMlrOIG76sQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQwOTozMDozMlrOIG76sQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDE0NDA0OQ==", "bodyText": "Ik denk dat het mooier is als je of\n\nPath toevoegt aan Message\nPathvertaald naar eenFileen die meegeeft aanMessage`", "url": "https://github.com/ibissource/iaf/pull/1342#discussion_r544144049", "createdAt": "2020-12-16T09:30:32Z", "author": {"login": "nielsm5"}, "path": "core/src/main/java/nl/nn/adapterframework/filesystem/LocalFileSystem.java", "diffHunk": "@@ -114,8 +114,8 @@ public OutputStream appendFile(Path f) throws IOException {\n \t}\n \n \t@Override\n-\tpublic InputStream readFile(Path f) throws IOException {\n-\t\treturn Files.newInputStream(f);\n+\tpublic Message readFile(Path f) throws IOException {\n+\t\treturn new Message(Files.newInputStream(f));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "88776d11119ee6d1db6f9b949c444ba1f3f63729"}, "originalPosition": 23}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "990880bb61eb5b1c305c0d7a4638453d897b858b", "author": {"user": {"login": "gvanbrakel", "name": "Gerrit van Brakel"}}, "url": "https://github.com/ibissource/iaf/commit/990880bb61eb5b1c305c0d7a4638453d897b858b", "committedDate": "2020-12-16T10:46:27Z", "message": "Add Path to Message"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUzNTcyNjU0", "url": "https://github.com/ibissource/iaf/pull/1342#pullrequestreview-553572654", "createdAt": "2020-12-16T10:57:52Z", "commit": {"oid": "990880bb61eb5b1c305c0d7a4638453d897b858b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxMDo1Nzo1MlrOIG_ilA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxMDo1ODoyM1rOIG_jzA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDIwMzQxMg==", "bodyText": "Hier moet je dan eigenlijk asInputStream() gebruiken", "url": "https://github.com/ibissource/iaf/pull/1342#discussion_r544203412", "createdAt": "2020-12-16T10:57:52Z", "author": {"login": "nielsm5"}, "path": "core/src/main/java/nl/nn/adapterframework/stream/Message.java", "diffHunk": "@@ -175,6 +184,14 @@ public Reader asReader(String defaultCharset) throws IOException {\n \t\t\t\tthrow new IOException(\"Cannot open file [\"+((File)request).getPath()+\"]\");\n \t\t\t}\n \t\t}\n+\t\tif (request instanceof Path) {\n+\t\t\tlog.debug(\"returning Path as Reader\");\n+\t\t\ttry {\n+\t\t\t\treturn StreamUtil.getCharsetDetectingInputStreamReader(Files.newInputStream((Path)request), readerCharset);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "990880bb61eb5b1c305c0d7a4638453d897b858b"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDIwMzU5Mg==", "bodyText": "Geen , e?", "url": "https://github.com/ibissource/iaf/pull/1342#discussion_r544203592", "createdAt": "2020-12-16T10:58:12Z", "author": {"login": "nielsm5"}, "path": "core/src/main/java/nl/nn/adapterframework/stream/Message.java", "diffHunk": "@@ -175,6 +184,14 @@ public Reader asReader(String defaultCharset) throws IOException {\n \t\t\t\tthrow new IOException(\"Cannot open file [\"+((File)request).getPath()+\"]\");\n \t\t\t}\n \t\t}\n+\t\tif (request instanceof Path) {\n+\t\t\tlog.debug(\"returning Path as Reader\");\n+\t\t\ttry {\n+\t\t\t\treturn StreamUtil.getCharsetDetectingInputStreamReader(Files.newInputStream((Path)request), readerCharset);\n+\t\t\t} catch (IOException e) {\n+\t\t\t\tthrow new IOException(\"Cannot open file [\"+((Path)request).getFileName()+\"]\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "990880bb61eb5b1c305c0d7a4638453d897b858b"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDIwMzcyNA==", "bodyText": "Geen , e?", "url": "https://github.com/ibissource/iaf/pull/1342#discussion_r544203724", "createdAt": "2020-12-16T10:58:23Z", "author": {"login": "nielsm5"}, "path": "core/src/main/java/nl/nn/adapterframework/stream/Message.java", "diffHunk": "@@ -213,6 +230,14 @@ public InputStream asInputStream(String defaultCharset) throws IOException {\n \t\t\t\tthrow new IOException(\"Cannot open file [\"+((File)request).getPath()+\"]\");\n \t\t\t}\n \t\t}\n+\t\tif (request instanceof Path) {\n+\t\t\tlog.debug(\"returning Path as InputStream\");\n+\t\t\ttry {\n+\t\t\t\treturn Files.newInputStream((Path)request);\n+\t\t\t} catch (IOException e) {\n+\t\t\t\tthrow new IOException(\"Cannot open file [\"+((Path)request).getFileName()+\"]\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "990880bb61eb5b1c305c0d7a4638453d897b858b"}, "originalPosition": 47}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "777aa2fec9db133b12a01bfc4a9437eb6dcef0c4", "author": {"user": {"login": "gvanbrakel", "name": "Gerrit van Brakel"}}, "url": "https://github.com/ibissource/iaf/commit/777aa2fec9db133b12a01bfc4a9437eb6dcef0c4", "committedDate": "2020-12-16T12:04:36Z", "message": "Fix issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d19bcb7977bc78e632758338a589fbc64d91302c", "author": {"user": {"login": "gvanbrakel", "name": "Gerrit van Brakel"}}, "url": "https://github.com/ibissource/iaf/commit/d19bcb7977bc78e632758338a589fbc64d91302c", "committedDate": "2020-12-16T12:22:14Z", "message": "Add tests for Messages containing File and Path"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUzNjU2MDEw", "url": "https://github.com/ibissource/iaf/pull/1342#pullrequestreview-553656010", "createdAt": "2020-12-16T12:52:33Z", "commit": {"oid": "d19bcb7977bc78e632758338a589fbc64d91302c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 946, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}