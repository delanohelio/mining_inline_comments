{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzMTU5MDQ2", "number": 535, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxMDowOToyMFrODrJJxA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxMDoxMzowNFrODrJPQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2NTY1MzE2OnYy", "diffSide": "RIGHT", "path": "akamai/src/main/java/nl/nn/adapterframework/extensions/akamai/NetStorageSender.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxMDowOToyMFrOF7UAbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxMDozMTowOFrOF7U0HA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzczODA5NQ==", "bodyText": "Toch wel netjes om van deze \"urlParam\" en constante te maken, en misschien zelfs configureerbaar (als er conflicten zouden kunnen ontstaan)", "url": "https://github.com/ibissource/iaf/pull/535#discussion_r397738095", "createdAt": "2020-03-25T10:09:20Z", "author": {"login": "gvanbrakel"}, "path": "akamai/src/main/java/nl/nn/adapterframework/extensions/akamai/NetStorageSender.java", "diffHunk": "@@ -162,14 +164,14 @@ public Message sendMessage(Message message, IPipeLineSession session) throws Sen\n \t\t} catch (IOException e) {\n \t\t\tthrow new SenderException(getLogPrefix(),e);\n \t\t}\n-\t\tstaticUri = buildUri(path); // TODO: this is not thread safe!\n+\t\tsession.put(\"urlParam\", path);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6dbc019a9c075d575477a391af4d11348c1aa2fe"}, "originalPosition": 85}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzc1MTMyNA==", "bodyText": "Het wordt nu als Parameter meegegeven aan de sender, dynamischer kan het niet", "url": "https://github.com/ibissource/iaf/pull/535#discussion_r397751324", "createdAt": "2020-03-25T10:31:08Z", "author": {"login": "nielsm5"}, "path": "akamai/src/main/java/nl/nn/adapterframework/extensions/akamai/NetStorageSender.java", "diffHunk": "@@ -162,14 +164,14 @@ public Message sendMessage(Message message, IPipeLineSession session) throws Sen\n \t\t} catch (IOException e) {\n \t\t\tthrow new SenderException(getLogPrefix(),e);\n \t\t}\n-\t\tstaticUri = buildUri(path); // TODO: this is not thread safe!\n+\t\tsession.put(\"urlParam\", path);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzczODA5NQ=="}, "originalCommit": {"oid": "6dbc019a9c075d575477a391af4d11348c1aa2fe"}, "originalPosition": 85}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2NTY1OTY2OnYy", "diffSide": "RIGHT", "path": "akamai/src/main/java/nl/nn/adapterframework/extensions/akamai/NetStorageSender.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxMDoxMTowN1rOF7UEcA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxMDozMjoxOVrOF7U2xQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzczOTEyMA==", "bodyText": "Waarom is dit een parameter? Om hem te kunnen overriden? Ik snap eigenlijk niet wat er gebeurt", "url": "https://github.com/ibissource/iaf/pull/535#discussion_r397739120", "createdAt": "2020-03-25T10:11:07Z", "author": {"login": "gvanbrakel"}, "path": "akamai/src/main/java/nl/nn/adapterframework/extensions/akamai/NetStorageSender.java", "diffHunk": "@@ -96,6 +96,11 @@\n \n \t@Override\n \tpublic void configure() throws ConfigurationException {\n+\t\tParameter urlParameter = new Parameter();\n+\t\turlParameter.setName(getUrlParam());\n+\t\turlParameter.setSessionKey(\"urlParam\");\n+\t\taddParameter(urlParameter);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6dbc019a9c075d575477a391af4d11348c1aa2fe"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzc1MjAwNQ==", "bodyText": "Het kan geen constante zijn, dan is het niet thread safe... vandaar dat het inputbericht altijd 'automatisch' naar de url parameter veranderd wordt.", "url": "https://github.com/ibissource/iaf/pull/535#discussion_r397752005", "createdAt": "2020-03-25T10:32:19Z", "author": {"login": "nielsm5"}, "path": "akamai/src/main/java/nl/nn/adapterframework/extensions/akamai/NetStorageSender.java", "diffHunk": "@@ -96,6 +96,11 @@\n \n \t@Override\n \tpublic void configure() throws ConfigurationException {\n+\t\tParameter urlParameter = new Parameter();\n+\t\turlParameter.setName(getUrlParam());\n+\t\turlParameter.setSessionKey(\"urlParam\");\n+\t\taddParameter(urlParameter);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzczOTEyMA=="}, "originalCommit": {"oid": "6dbc019a9c075d575477a391af4d11348c1aa2fe"}, "originalPosition": 42}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2NTY2NzIzOnYy", "diffSide": "RIGHT", "path": "akamai/src/test/java/nl/nn/adapterframework/extensions/akamai/NetStorageSenderTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxMDoxMzowNFrOF7UJBg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxMDoxMzowNFrOF7UJBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzc0MDI5NA==", "bodyText": "Ik doe in voorkomende gevallen: Copyright 2020 WeAreFrank!, dus niet .nl, maar met uitroepteken.", "url": "https://github.com/ibissource/iaf/pull/535#discussion_r397740294", "createdAt": "2020-03-25T10:13:04Z", "author": {"login": "gvanbrakel"}, "path": "akamai/src/test/java/nl/nn/adapterframework/extensions/akamai/NetStorageSenderTest.java", "diffHunk": "@@ -0,0 +1,116 @@\n+/*\n+   Copyright 2020 WeAreFrank.nl", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6dbc019a9c075d575477a391af4d11348c1aa2fe"}, "originalPosition": 2}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 502, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}