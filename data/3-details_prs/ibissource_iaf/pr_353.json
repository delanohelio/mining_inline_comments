{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYxNDk2Mjc0", "number": 353, "title": "Fix systemId containing basePath when using xml includes", "bodyText": "", "createdAt": "2020-01-10T15:17:08Z", "url": "https://github.com/ibissource/iaf/pull/353", "merged": true, "mergeCommit": {"oid": "e98c209f0c1e383eeea529c8636effda9d277299"}, "closed": true, "closedAt": "2020-01-14T10:54:14Z", "author": {"login": "nielsm5"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb5AHPJgH2gAyMzYxNDk2Mjc0OmI1OGE1ZmUxMTA3MGYyZmU3YjY4NDNlNzFhOTZjYmFiMjZhYjlmNzM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb6OuiFAFqTM0MjQ0NDI3MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b58a5fe11070f2fe7b6843e71a96cbab26ab9f73", "author": {"user": {"login": "nielsm5", "name": "Niels"}}, "url": "https://github.com/ibissource/iaf/commit/b58a5fe11070f2fe7b6843e71a96cbab26ab9f73", "committedDate": "2020-01-10T15:16:31Z", "message": "Fix systemId containing basePath when using xml includes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ad835fdcb5f3d3a1530865d1d6de5783e28d5261", "author": {"user": {"login": "nielsm5", "name": "Niels"}}, "url": "https://github.com/ibissource/iaf/commit/ad835fdcb5f3d3a1530865d1d6de5783e28d5261", "committedDate": "2020-01-13T12:02:15Z", "message": "Strip basepath from resources"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "36083b90874577ca37eea5ee8387a2a8fb85a249", "author": {"user": {"login": "nielsm5", "name": "Niels"}}, "url": "https://github.com/ibissource/iaf/commit/36083b90874577ca37eea5ee8387a2a8fb85a249", "committedDate": "2020-01-13T12:09:04Z", "message": "Remove commented code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e692d9a379408456a9796201d98db6f4c007c1f0", "author": {"user": {"login": "nielsm5", "name": "Niels"}}, "url": "https://github.com/ibissource/iaf/commit/e692d9a379408456a9796201d98db6f4c007c1f0", "committedDate": "2020-01-13T14:28:18Z", "message": "Fix tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxMjU2NTEy", "url": "https://github.com/ibissource/iaf/pull/353#pullrequestreview-341256512", "createdAt": "2020-01-10T15:57:32Z", "commit": {"oid": "b58a5fe11070f2fe7b6843e71a96cbab26ab9f73"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQxNTo1NzozMlrOFcYXyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxNjowNzoyNFrOFc7-yA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTMwMzc1NA==", "bodyText": "Waarom werkt het niet zonder deze drie regels? Wie plakt die naam van het basePath er in de first place voor?", "url": "https://github.com/ibissource/iaf/pull/353#discussion_r365303754", "createdAt": "2020-01-10T15:57:32Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/configuration/classloaders/BytesClassLoader.java", "diffHunk": "@@ -57,6 +56,18 @@ public URL getLocalResource(String name) {\n \t\treturn null;\n \t}\n \n+\t/**\n+\t * Strip BasePath of the local resource and return a valid, relative to the configuration directory, URL\n+\t */\n+\tprivate URL createURL(String name, byte[] resource) throws MalformedURLException {\n+\t\tString URLname = CLASSPATH_RESOURCE_SCHEME + name;\n+\t\tif(getBasePath() != null && name.startsWith(getBasePath())) {\n+\t\t\tURLname = CLASSPATH_RESOURCE_SCHEME + name.substring(getBasePath().length());\n+\t\t}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b58a5fe11070f2fe7b6843e71a96cbab26ab9f73"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg4NzE3Ng==", "bodyText": "Waarom heeft ClassLoaderBase nog steeds een basePath? Hij heeft het zelf toch niet nodig?", "url": "https://github.com/ibissource/iaf/pull/353#discussion_r365887176", "createdAt": "2020-01-13T16:07:24Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/configuration/classloaders/ClassLoaderBase.java", "diffHunk": "@@ -74,16 +74,17 @@ public void configure(IbisContext ibisContext, String configurationName) throws\n \t\t} else {\n \t\t\tif(basePath == null && !getConfigurationName().equalsIgnoreCase(instanceName)) {\n \t\t\t\tint i = configurationFile.lastIndexOf('/');\n-\t\t\t\tif (i != -1) {\n+\t\t\t\tif (i != -1) { //Configuration file contains a path, derive the BasePath from the path\n \t\t\t\t\tsetBasePath(configurationFile.substring(0, i + 1));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e692d9a379408456a9796201d98db6f4c007c1f0"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "06e984663b112fb955230de1c946b80e4c135b1b", "author": {"user": {"login": "nielsm5", "name": "Niels"}}, "url": "https://github.com/ibissource/iaf/commit/06e984663b112fb955230de1c946b80e4c135b1b", "committedDate": "2020-01-14T10:33:50Z", "message": "Make BasePath protected"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b58e77a3ade1763cbccb6cd6c38568035ad05f9d", "author": {"user": {"login": "nielsm5", "name": "Niels"}}, "url": "https://github.com/ibissource/iaf/commit/b58e77a3ade1763cbccb6cd6c38568035ad05f9d", "committedDate": "2020-01-14T10:36:06Z", "message": "Update copyright notice"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQyNDQ0Mjcw", "url": "https://github.com/ibissource/iaf/pull/353#pullrequestreview-342444270", "createdAt": "2020-01-14T10:52:02Z", "commit": {"oid": "b58e77a3ade1763cbccb6cd6c38568035ad05f9d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1429, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}