{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY3ODYzMTkw", "number": 986, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQwNjowODozN1rOEZUyqQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQwNzo1NzoxM1rOEhIIIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk0OTkwNTA1OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/nl/nn/adapterframework/webcontrol/api/ApiExceptionHandler.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQwNjowODozN1rOHCEp1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQwNjowODozN1rOHCEp1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTkzNTQ0NQ==", "bodyText": "waarom niet: log.error(\"Caught exception in handling API call\", exception); ?", "url": "https://github.com/ibissource/iaf/pull/986#discussion_r471935445", "createdAt": "2020-08-18T06:08:37Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/webcontrol/api/ApiExceptionHandler.java", "diffHunk": "@@ -44,6 +50,8 @@ public Response toResponse(Exception exception) {\n \t\t\treturn ((ApiException) exception).getResponse();\n \t\t}\n \n+\t\tlog.error(exception.getLocalizedMessage(), exception);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "35bc58285b2080dcb159fec3f58761168360ba0f"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk0OTkwNjg4OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/nl/nn/adapterframework/util/StreamUtil.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQwNjowOToyOVrOHCEq7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQwNjowOToyOVrOHCEq7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTkzNTcyNA==", "bodyText": "Waar is dit nodig?", "url": "https://github.com/ibissource/iaf/pull/986#discussion_r471935724", "createdAt": "2020-08-18T06:09:29Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/util/StreamUtil.java", "diffHunk": "@@ -147,6 +147,11 @@ public static Reader getCharsetDetectingInputStreamReader(InputStream inputStrea\n \t\tBOMInputStream bOMInputStream = new BOMInputStream(inputStream,ByteOrderMark.UTF_8, ByteOrderMark.UTF_16LE, ByteOrderMark.UTF_16BE);\n \t\tByteOrderMark bom = bOMInputStream.getBOM();\n \t\tString charsetName = bom == null ? defaultCharset : bom.getCharsetName();\n+\n+\t\tif(StringUtils.isEmpty(charsetName)) {\n+\t\t\tcharsetName = StreamUtil.DEFAULT_INPUT_STREAM_ENCODING;\n+\t\t}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "35bc58285b2080dcb159fec3f58761168360ba0f"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk0OTkxMDkyOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/nl/nn/adapterframework/util/flow/V8FlowGenerator.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQwNjoxMToxN1rOHCEtOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxMToxNjowOVrOHN7aVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTkzNjMxNQ==", "bodyText": "Waarom zit dit in een ThreadLocal?", "url": "https://github.com/ibissource/iaf/pull/986#discussion_r471936315", "createdAt": "2020-08-18T06:11:17Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/util/flow/V8FlowGenerator.java", "diffHunk": "@@ -31,13 +31,13 @@\n public class V8FlowGenerator implements IFlowGenerator {\n \tprivate static Logger log = LogUtil.getLogger(V8FlowGenerator.class);\n \n-\tprivate GraphvizEngine engine;\n+\tprivate ThreadLocal<GraphvizEngine> engines = new ThreadLocal<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "35bc58285b2080dcb159fec3f58761168360ba0f"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDM2NjkzNA==", "bodyText": "Omdat dat de stomme v8 engine van google threadsafe maakt...", "url": "https://github.com/ibissource/iaf/pull/986#discussion_r484366934", "createdAt": "2020-09-07T11:16:09Z", "author": {"login": "nielsm5"}, "path": "core/src/main/java/nl/nn/adapterframework/util/flow/V8FlowGenerator.java", "diffHunk": "@@ -31,13 +31,13 @@\n public class V8FlowGenerator implements IFlowGenerator {\n \tprivate static Logger log = LogUtil.getLogger(V8FlowGenerator.class);\n \n-\tprivate GraphvizEngine engine;\n+\tprivate ThreadLocal<GraphvizEngine> engines = new ThreadLocal<>();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTkzNjMxNQ=="}, "originalCommit": {"oid": "35bc58285b2080dcb159fec3f58761168360ba0f"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAzMTcxNjE3OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/nl/nn/adapterframework/util/flow/FlowDiagramManager.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQwNzo1NzoxM1rOHORMiQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxMjoyMTo1NFrOHOaTgQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDcyMzg0OQ==", "bodyText": "Is het zeker dat het resultaat van getFlowGenerator hier nooit null is?", "url": "https://github.com/ibissource/iaf/pull/986#discussion_r484723849", "createdAt": "2020-09-08T07:57:13Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/util/flow/FlowDiagramManager.java", "diffHunk": "@@ -248,7 +280,7 @@ private void generateFlowDiagram(String name, String dot, File destination) thro\n \t\tlong start = System.currentTimeMillis();\n \n \t\ttry (FileOutputStream outputStream = new FileOutputStream(destination)) {\n-\t\t\tgenerator.generateFlow(name, dot, outputStream);\n+\t\t\tgetFlowGenerator().generateFlow(name, dot, outputStream);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "82169034c80c5c5f204bc860da19e47528df1634"}, "originalPosition": 133}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDg3MzA4OQ==", "bodyText": "Hij kan zeker null zijn, maar de nullcheck zit in de methodes die deze methode aanroepen... zie regel 261", "url": "https://github.com/ibissource/iaf/pull/986#discussion_r484873089", "createdAt": "2020-09-08T12:21:54Z", "author": {"login": "nielsm5"}, "path": "core/src/main/java/nl/nn/adapterframework/util/flow/FlowDiagramManager.java", "diffHunk": "@@ -248,7 +280,7 @@ private void generateFlowDiagram(String name, String dot, File destination) thro\n \t\tlong start = System.currentTimeMillis();\n \n \t\ttry (FileOutputStream outputStream = new FileOutputStream(destination)) {\n-\t\t\tgenerator.generateFlow(name, dot, outputStream);\n+\t\t\tgetFlowGenerator().generateFlow(name, dot, outputStream);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDcyMzg0OQ=="}, "originalCommit": {"oid": "82169034c80c5c5f204bc860da19e47528df1634"}, "originalPosition": 133}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 319, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}