{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgxMjY2NDg0", "number": 1041, "title": "Clearify 'IntegrityCheck' warning", "bodyText": "", "createdAt": "2020-09-07T10:30:00Z", "url": "https://github.com/ibissource/iaf/pull/1041", "merged": true, "mergeCommit": {"oid": "5d9f2b6b79cc1937df30717ae1020ebcc5c267a3"}, "closed": true, "closedAt": "2020-09-09T08:00:57Z", "author": {"login": "gvanbrakel"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdGgdExAH2gAyNDgxMjY2NDg0Ojk1OWZhNTVjNmE1N2QxNzQyMTM5MDM3NThkYmZlYTI4M2NhZWZhMjU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdHHhn7AFqTQ4NDc1NDk0MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "959fa55c6a57d174213903758dbfea283caefa25", "author": {"user": {"login": "gvanbrakel", "name": "Gerrit van Brakel"}}, "url": "https://github.com/ibissource/iaf/commit/959fa55c6a57d174213903758dbfea283caefa25", "committedDate": "2020-09-07T10:29:30Z", "message": "Clearify 'IntegrityCheck' warning"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzNDkxODgy", "url": "https://github.com/ibissource/iaf/pull/1041#pullrequestreview-483491882", "createdAt": "2020-09-07T11:45:17Z", "commit": {"oid": "959fa55c6a57d174213903758dbfea283caefa25"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzNDkzOTAw", "url": "https://github.com/ibissource/iaf/pull/1041#pullrequestreview-483493900", "createdAt": "2020-09-07T11:48:57Z", "commit": {"oid": "959fa55c6a57d174213903758dbfea283caefa25"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxMTo0ODo1N1rOHN8XEA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxMTo0ODo1N1rOHN8XEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDM4MjQ4MA==", "bodyText": "moet dit ook niet (net als bij de directquery sender warnings.suppress.sqlInjections.<adapter>) dat je het op adapter niveau kan uitzetten?\nwarnings.suppress.integrityCheck en warnings.suppress.integrityCheck.<adapter> ?", "url": "https://github.com/ibissource/iaf/pull/1041#discussion_r484382480", "createdAt": "2020-09-07T11:48:57Z", "author": {"login": "nielsm5"}, "path": "core/src/main/java/nl/nn/adapterframework/pipes/MessageSendingPipe.java", "diffHunk": "@@ -365,7 +365,9 @@ public void configure() throws ConfigurationException {\n \t\tif (checkMessageLog) {\n \t\t\tif (!getSender().isSynchronous() && getListener()==null && !(getSender() instanceof nl.nn.adapterframework.senders.IbisLocalSender)) {\n \t\t\t\tif (messageLog==null) {\n-\t\t\t\t\tConfigurationWarnings.add(this, log, \"asynchronous sender [\" + getSender().getName() + \"] without sibling listener has no messageLog. Integrity check not possible\");\n+\t\t\t\t\tConfigurationWarnings.add(this, log, \"asynchronous sender [\" + getSender().getName() + \"] without sibling listener has no messageLog. \" + \n+\t\t\t\t\t\t\t\t\"Integrity check (matching messages received by the adapter to messages sent by this pipe) will not be possible. \" + \n+\t\t\t\t\t\t\t\t\"This warning can be suppressed by setting property messageLog.check=false\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "959fa55c6a57d174213903758dbfea283caefa25"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb8ccb4773db09f72f580b1ea94c40173e1f8ff7", "author": {"user": {"login": "gvanbrakel", "name": "Gerrit van Brakel"}}, "url": "https://github.com/ibissource/iaf/commit/fb8ccb4773db09f72f580b1ea94c40173e1f8ff7", "committedDate": "2020-09-07T16:05:10Z", "message": "Replace property messageLog.check by warnings.suppress.integrityCheck"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0MTcyOTQx", "url": "https://github.com/ibissource/iaf/pull/1041#pullrequestreview-484172941", "createdAt": "2020-09-08T14:03:01Z", "commit": {"oid": "fb8ccb4773db09f72f580b1ea94c40173e1f8ff7"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNDowMzowMVrOHOevEg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNDowMzowMVrOHOevEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDk0NTY4Mg==", "bodyText": "Misschien in de configure zetten en zorgen dat dit maar 1 maal per configuratie voor kan komen?", "url": "https://github.com/ibissource/iaf/pull/1041#discussion_r484945682", "createdAt": "2020-09-08T14:03:01Z", "author": {"login": "nielsm5"}, "path": "core/src/main/java/nl/nn/adapterframework/pipes/MessageSendingPipe.java", "diffHunk": "@@ -362,14 +360,24 @@ public void configure() throws ConfigurationException {\n \t\t\t}\n \t\t}\n \t\tITransactionalStorage messageLog = getMessageLog();\n-\t\tif (checkMessageLog) {\n-\t\t\tif (!getSender().isSynchronous() && getListener()==null && !(getSender() instanceof nl.nn.adapterframework.senders.IbisLocalSender)) {\n-\t\t\t\tif (messageLog==null) {\n-\t\t\t\t\tConfigurationWarnings.add(this, log, \"asynchronous sender [\" + getSender().getName() + \"] without sibling listener has no messageLog. Integrity check not possible\");\n+\t\tif (messageLog==null) {\n+\t\t\tif (!getSender().isSynchronous() && getListener()==null && !(getSender() instanceof nl.nn.adapterframework.senders.IbisLocalSender)) { // sender is asynchronous and not a local sender, but has no messageLog\n+\t\t\t\tboolean suppressIntegrityCheckWarning = ConfigurationWarnings.isSuppressed(\"warnings.suppress.integrityCheck\", getAdapter(), getConfigurationClassLoader());\n+\t\t\t\tif (!suppressIntegrityCheckWarning) {\n+\t\t\t\t\tboolean legacyCheckMessageLog = AppConstants.getInstance(getConfigurationClassLoader()).getBoolean(\"messageLog.check\", true);\n+\t\t\t\t\tif (!legacyCheckMessageLog) {\n+\t\t\t\t\t\tConfigurationWarnings.add(this, log, \"Suppressing integrityCheck warnings by setting property 'messageLog.check=false' has been replaced by by setting property 'warnings.suppress.integrityCheck=true'\");\n+\t\t\t\t\t\tsuppressIntegrityCheckWarning=true;\n+\t\t\t\t\t}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb8ccb4773db09f72f580b1ea94c40173e1f8ff7"}, "originalPosition": 41}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0NzU0OTQw", "url": "https://github.com/ibissource/iaf/pull/1041#pullrequestreview-484754940", "createdAt": "2020-09-09T08:00:46Z", "commit": {"oid": "fb8ccb4773db09f72f580b1ea94c40173e1f8ff7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1198, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}