{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkwMzM2MTMx", "number": 520, "reviewThreads": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNTo1MTozMVrODwDiVQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNTo0OToxN1rODzy9eQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUxNzE2MTgxOnYy", "diffSide": "RIGHT", "path": "akamai/src/main/java/nl/nn/adapterframework/extensions/akamai/NetStorageSender.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNTo1MTozMVrOGC1pmg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNTo1MTozMVrOGC1pmg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTYyOTMzOA==", "bodyText": "Copyright 2017-2019 Nationale-Nederlanden, 2020 WeAreFrank!", "url": "https://github.com/ibissource/iaf/pull/520#discussion_r405629338", "createdAt": "2020-04-08T15:51:31Z", "author": {"login": "gvanbrakel"}, "path": "akamai/src/main/java/nl/nn/adapterframework/extensions/akamai/NetStorageSender.java", "diffHunk": "@@ -1,5 +1,5 @@\n /*\n-   Copyright 2017-2019 Nationale-Nederlanden\n+   Copyright 2017-2020 WeAreFrank!", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fdf03c840b92344aaa74c222151b614cfa7bf8ef"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1NjIxNTYyOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/nl/nn/adapterframework/align/content/JsonDocumentContainer.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNToxNToxOVrOGIZnlQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNToxNToxOVrOGIZnlQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQ2MTUyNQ==", "bodyText": "Hier misschien nog een keer Ctrl-Shift-O doen?", "url": "https://github.com/ibissource/iaf/pull/520#discussion_r411461525", "createdAt": "2020-04-20T15:15:19Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/align/content/JsonDocumentContainer.java", "diffHunk": "@@ -22,10 +22,9 @@\n import javax.json.stream.JsonGenerator;\n \n import org.apache.commons.lang.NotImplementedException;\n-import org.apache.log4j.Logger;\n-import org.apache.xerces.xs.XSTypeDefinition;\n-\n import nl.nn.adapterframework.util.LogUtil;\n+import org.apache.logging.log4j.Logger;\n+import org.apache.xerces.xs.XSTypeDefinition;\n ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2a1feec917ed294b81ab42bfa234be336439f91"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1NjIyMDI4OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/nl/nn/adapterframework/cache/CacheAdapterBase.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNToxNjoxMVrOGIZqZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNToxNjoxMVrOGIZqZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQ2MjI0NA==", "bodyText": "Hier ook Ctrl-Shift-O", "url": "https://github.com/ibissource/iaf/pull/520#discussion_r411462244", "createdAt": "2020-04-20T15:16:11Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/cache/CacheAdapterBase.java", "diffHunk": "@@ -15,14 +15,13 @@\n */\n package nl.nn.adapterframework.cache;\n \n-import org.apache.commons.lang.StringUtils;\n-import org.apache.log4j.Logger;\n-\n import nl.nn.adapterframework.configuration.ConfigurationException;\n import nl.nn.adapterframework.core.IPipeLineSession;\n import nl.nn.adapterframework.doc.IbisDoc;\n-import nl.nn.adapterframework.util.LogUtil;\n import nl.nn.adapterframework.util.TransformerPool;\n+import org.apache.commons.lang.StringUtils;\n+import nl.nn.adapterframework.util.LogUtil;\n+import org.apache.logging.log4j.Logger;\n ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2a1feec917ed294b81ab42bfa234be336439f91"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1NjIyNjYwOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/nl/nn/adapterframework/configuration/IbisContext.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNToxNzozMVrOGIZuYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNToxNzozMVrOGIZuYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQ2MzI2NQ==", "bodyText": "Hier ook Ctrl-Shift-O", "url": "https://github.com/ibissource/iaf/pull/520#discussion_r411463265", "createdAt": "2020-04-20T15:17:31Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/configuration/IbisContext.java", "diffHunk": "@@ -39,9 +26,21 @@\n import nl.nn.adapterframework.util.DateUtils;\n import nl.nn.adapterframework.util.FlowDiagram;\n import nl.nn.adapterframework.util.JdbcUtil;\n-import nl.nn.adapterframework.util.LogUtil;\n import nl.nn.adapterframework.util.MessageKeeper;\n import nl.nn.adapterframework.util.MessageKeeperMessage;\n+import org.apache.commons.lang.StringUtils;\n+import nl.nn.adapterframework.util.LogUtil;\n+import org.apache.logging.log4j.Logger;\n+import org.springframework.beans.factory.BeanCreationException;\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2a1feec917ed294b81ab42bfa234be336439f91"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1NjIyODU2OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/nl/nn/adapterframework/configuration/JmxMbeanHelper.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNToxNzo1M1rOGIZvmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNToxNzo1M1rOGIZvmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQ2MzU3Ng==", "bodyText": "Hier ook Ctrl-Shift-O", "url": "https://github.com/ibissource/iaf/pull/520#discussion_r411463576", "createdAt": "2020-04-20T15:17:53Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/configuration/JmxMbeanHelper.java", "diffHunk": "@@ -15,10 +15,12 @@\n */\n package nl.nn.adapterframework.configuration;\n \n-import java.util.HashMap;\n-import java.util.List;\n-import java.util.Map;\n-import java.util.Set;\n+import nl.nn.adapterframework.core.IAdapter;\n+import nl.nn.adapterframework.util.AppConstants;\n+import nl.nn.adapterframework.util.JmxUtils;\n+import org.apache.commons.lang.StringUtils;\n+import nl.nn.adapterframework.util.LogUtil;\n+import org.apache.logging.log4j.Logger;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2a1feec917ed294b81ab42bfa234be336439f91"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1NjI1MjkxOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/nl/nn/adapterframework/doc/IbisDocPipe.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNToyMjozNVrOGIZ-Gw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNToyMjozNVrOGIZ-Gw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQ2NzI5MQ==", "bodyText": "Hier ook Ctrl-Shift-O", "url": "https://github.com/ibissource/iaf/pull/520#discussion_r411467291", "createdAt": "2020-04-20T15:22:35Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/doc/IbisDocPipe.java", "diffHunk": "@@ -64,6 +34,25 @@\n import nl.nn.adapterframework.util.Misc;\n import nl.nn.adapterframework.util.XmlBuilder;\n import nl.nn.adapterframework.util.XmlUtils;\n+import org.apache.logging.log4j.Logger;\n+import org.springframework.beans.factory.BeanDefinitionStoreException;\n+import org.springframework.beans.factory.config.BeanDefinition;\n+import org.springframework.beans.factory.support.BeanDefinitionRegistry;\n+import org.springframework.beans.factory.support.BeanNameGenerator;\n+import org.springframework.beans.factory.support.SimpleBeanDefinitionRegistry;\n+import org.springframework.context.annotation.AnnotationBeanNameGenerator;\n+import org.springframework.context.annotation.ClassPathBeanDefinitionScanner;\n+import org.springframework.core.annotation.AnnotationUtils;\n+import org.springframework.core.type.filter.AssignableTypeFilter;\n+import org.springframework.core.type.filter.RegexPatternTypeFilter;\n+import org.springframework.util.Assert;\n+import org.xml.sax.SAXException;\n+\n+import java.io.IOException;\n+import java.lang.reflect.Method;\n+import java.lang.reflect.Modifier;\n+import java.util.*;\n+import java.util.regex.Pattern;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2a1feec917ed294b81ab42bfa234be336439f91"}, "originalPosition": 59}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1NjI2MzQwOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/nl/nn/adapterframework/extensions/svn/SvnUtils.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNToyNDozNVrOGIaEfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNToyNDozNVrOGIaEfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQ2ODkyNQ==", "bodyText": "Hier ook Ctrl-Shift-O", "url": "https://github.com/ibissource/iaf/pull/520#discussion_r411468925", "createdAt": "2020-04-20T15:24:35Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/extensions/svn/SvnUtils.java", "diffHunk": "@@ -15,22 +15,19 @@\n  */\n package nl.nn.adapterframework.extensions.svn;\n \n-import java.io.IOException;\n-\n-import javax.xml.xpath.XPathExpressionException;\n-\n-import org.apache.commons.lang.StringUtils;\n-import org.apache.log4j.Logger;\n-\n import nl.nn.adapterframework.configuration.ConfigurationException;\n import nl.nn.adapterframework.core.SenderException;\n import nl.nn.adapterframework.core.TimeOutException;\n import nl.nn.adapterframework.http.HttpSender;\n import nl.nn.adapterframework.stream.Message;\n import nl.nn.adapterframework.util.DomBuilderException;\n-import nl.nn.adapterframework.util.LogUtil;\n import nl.nn.adapterframework.util.XmlUtils;\n+import org.apache.commons.lang.StringUtils;\n+import nl.nn.adapterframework.util.LogUtil;\n+import org.apache.logging.log4j.Logger;\n \n+import javax.xml.xpath.XPathExpressionException;\n+import java.io.IOException;\n /**", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2a1feec917ed294b81ab42bfa234be336439f91"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1NjI2OTQ3OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/nl/nn/adapterframework/extensions/xfb/XfbSender.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNToyNTo0NVrOGIaIRQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNToyNTo0NVrOGIaIRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQ2OTg5Mw==", "bodyText": "Hier ook Ctrl-Shift-O", "url": "https://github.com/ibissource/iaf/pull/520#discussion_r411469893", "createdAt": "2020-04-20T15:25:45Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/extensions/xfb/XfbSender.java", "diffHunk": "@@ -15,21 +15,20 @@\n */\n package nl.nn.adapterframework.extensions.xfb;\n \n-import java.io.File;\n-import java.io.IOException;\n-\n-import org.apache.commons.lang.StringUtils;\n-import org.apache.log4j.Logger;\n-\n import nl.nn.adapterframework.configuration.ConfigurationException;\n import nl.nn.adapterframework.core.IPipeLineSession;\n import nl.nn.adapterframework.core.SenderException;\n import nl.nn.adapterframework.core.TimeOutException;\n import nl.nn.adapterframework.senders.SenderWithParametersBase;\n import nl.nn.adapterframework.stream.Message;\n import nl.nn.adapterframework.util.FileUtils;\n-import nl.nn.adapterframework.util.LogUtil;\n import nl.nn.adapterframework.util.ProcessUtil;\n+import org.apache.commons.lang.StringUtils;\n+import nl.nn.adapterframework.util.LogUtil;\n+import org.apache.logging.log4j.Logger;\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2a1feec917ed294b81ab42bfa234be336439f91"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1NjI5NDc3OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/nl/nn/adapterframework/pipes/MessageSendingPipe.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNTozMDo0MFrOGIaX1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNTozMDo0MFrOGIaX1A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQ3Mzg3Ng==", "bodyText": "Hier wil je wel een if(log.isLevelTerseEnabled()) denk ik", "url": "https://github.com/ibissource/iaf/pull/520#discussion_r411473876", "createdAt": "2020-04-20T15:30:40Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/pipes/MessageSendingPipe.java", "diffHunk": "@@ -878,16 +879,14 @@ protected PipeRunResult sendMessage(Message input, IPipeLineSession session, ISe\n \t\t\t\t\t\t\tadapter.setLastExitState(getName(), System.currentTimeMillis(), exitState);\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n-\t\t\t\t\tif (MsgLogUtil.getMsgLogLevelNum(adapter.getMsgLogLevel())>=MsgLogUtil.MSGLOG_LEVEL_TERSE) {\n \n-\t\t\t\t\t\tString duration;\n-\t\t\t\t\t\tif(msgLogHumanReadable) {\n-\t\t\t\t\t\t\tduration = Misc.getAge(startTime);\n-\t\t\t\t\t\t} else {\n-\t\t\t\t\t\t\tduration = Misc.getDurationInMs(startTime);\n-\t\t\t\t\t\t}\n-\t\t\t\t\t\tmsgLog.info(\"Sender [\" + sender.getName() + \"] class [\" + sender.getClass().getSimpleName() + \"] duration [\" + duration + \"] got exit-state [\" + exitState + \"]\");\n+\t\t\t\t\tString duration;\n+\t\t\t\t\tif(msgLogHumanReadable) {\n+\t\t\t\t\t\tduration = Misc.getAge(startTime);\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\tduration = Misc.getDurationInMs(startTime);\n \t\t\t\t\t}\n+\t\t\t\t\tmsgLog.log(Level.toLevel(\"TERSE\"), String.format(\"Sender [%s] class [%s] duration [%s] got exit-state [%s]\", sender.getName(), ClassUtils.nameOf(sender), duration, exitState));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2a1feec917ed294b81ab42bfa234be336439f91"}, "originalPosition": 45}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1NjMwODE2OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/nl/nn/adapterframework/util/AppConstants.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNTozMzoxMFrOGIafsQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNTozMzoxMFrOGIafsQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQ3NTg4OQ==", "bodyText": "Hier ook Ctrl-Shift-O", "url": "https://github.com/ibissource/iaf/pull/520#discussion_r411475889", "createdAt": "2020-04-20T15:33:10Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/util/AppConstants.java", "diffHunk": "@@ -31,7 +31,8 @@\n import org.apache.commons.digester.substitution.VariableExpander;\n import org.apache.commons.io.FilenameUtils;\n import org.apache.commons.lang3.StringUtils;\n-import org.apache.log4j.Logger;\n+import nl.nn.adapterframework.util.LogUtil;\n+import org.apache.logging.log4j.Logger;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2a1feec917ed294b81ab42bfa234be336439f91"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1NjMwOTY2OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/nl/nn/adapterframework/util/ClassUtils.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNTozMzoyN1rOGIagnA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNTozMzoyN1rOGIagnA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQ3NjEyNA==", "bodyText": "Hier ook Ctrl-Shift-O", "url": "https://github.com/ibissource/iaf/pull/520#discussion_r411476124", "createdAt": "2020-04-20T15:33:27Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/util/ClassUtils.java", "diffHunk": "@@ -33,7 +33,8 @@\n \n import org.apache.commons.lang.builder.ReflectionToStringBuilder;\n import org.apache.commons.lang3.StringUtils;\n-import org.apache.log4j.Logger;\n+import nl.nn.adapterframework.util.LogUtil;\n+import org.apache.logging.log4j.Logger;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2a1feec917ed294b81ab42bfa234be336439f91"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1NjMxMDk5OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/nl/nn/adapterframework/util/CredentialFactory.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNTozMzo0MlrOGIahXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNTozMzo0MlrOGIahXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQ3NjMxNw==", "bodyText": "Hier ook Ctrl-Shift-O", "url": "https://github.com/ibissource/iaf/pull/520#discussion_r411476317", "createdAt": "2020-04-20T15:33:42Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/util/CredentialFactory.java", "diffHunk": "@@ -38,7 +38,8 @@\n \n import org.apache.commons.lang.StringUtils;\n import org.apache.commons.lang.builder.ToStringBuilder;\n-import org.apache.log4j.Logger;\n+import nl.nn.adapterframework.util.LogUtil;\n+import org.apache.logging.log4j.Logger;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2a1feec917ed294b81ab42bfa234be336439f91"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1NjMxMTY2OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/nl/nn/adapterframework/util/DB2XMLWriter.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNTozMzo1MFrOGIahvg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNTozMzo1MFrOGIahvg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQ3NjQxNA==", "bodyText": "Hier ook Ctrl-Shift-O", "url": "https://github.com/ibissource/iaf/pull/520#discussion_r411476414", "createdAt": "2020-04-20T15:33:50Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/util/DB2XMLWriter.java", "diffHunk": "@@ -23,7 +23,8 @@\n \n import nl.nn.adapterframework.core.SenderException;\n \n-import org.apache.log4j.Logger;\n+import nl.nn.adapterframework.util.LogUtil;\n+import org.apache.logging.log4j.Logger;\n ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2a1feec917ed294b81ab42bfa234be336439f91"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1NjMxNzIxOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/nl/nn/adapterframework/util/FileHandler.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNTozNDo1NVrOGIalFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNTozNDo1NVrOGIalFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQ3NzI3MA==", "bodyText": "Hier ook Ctrl-Shift-O", "url": "https://github.com/ibissource/iaf/pull/520#discussion_r411477270", "createdAt": "2020-04-20T15:34:55Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/util/FileHandler.java", "diffHunk": "@@ -45,6 +44,7 @@\n import nl.nn.adapterframework.parameters.ParameterList;\n import nl.nn.adapterframework.parameters.ParameterValue;\n import nl.nn.adapterframework.parameters.ParameterValueList;\n+import org.apache.logging.log4j.Logger;\n import nl.nn.adapterframework.stream.Message;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2a1feec917ed294b81ab42bfa234be336439f91"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1NjMxODgyOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/nl/nn/adapterframework/util/FileUtils.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNTozNToxNFrOGIamEg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNTozNToxNFrOGIamEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQ3NzUyMg==", "bodyText": "Hier ook Ctrl-Shift-O", "url": "https://github.com/ibissource/iaf/pull/520#discussion_r411477522", "createdAt": "2020-04-20T15:35:14Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/util/FileUtils.java", "diffHunk": "@@ -35,14 +35,14 @@\n import javax.servlet.http.HttpServletRequest;\n \n import org.apache.commons.lang.StringUtils;\n-import org.apache.log4j.Logger;\n \n import nl.nn.adapterframework.configuration.ConfigurationException;\n import nl.nn.adapterframework.core.IPipeLineSession;\n import nl.nn.adapterframework.core.ParameterException;\n import nl.nn.adapterframework.parameters.Parameter;\n import nl.nn.adapterframework.parameters.ParameterList;\n import nl.nn.adapterframework.parameters.ParameterValueList;\n+import org.apache.logging.log4j.Logger;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2a1feec917ed294b81ab42bfa234be336439f91"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1NjMzNjc5OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/nl/nn/adapterframework/webcontrol/api/ServerStatistics.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNTozODo0OFrOGIaw7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNTozODo0OFrOGIaw7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQ4MDMwMA==", "bodyText": "Hier ook Ctrl-Shift-O", "url": "https://github.com/ibissource/iaf/pull/520#discussion_r411480300", "createdAt": "2020-04-20T15:38:48Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/webcontrol/api/ServerStatistics.java", "diffHunk": "@@ -54,15 +51,18 @@\n import nl.nn.adapterframework.core.IAdapter;\n import nl.nn.adapterframework.core.IReceiver;\n import nl.nn.adapterframework.core.ITransactionalStorage;\n-import nl.nn.adapterframework.extensions.log4j.IbisAppenderWrapper;\n+import nl.nn.adapterframework.logging.IbisMaskingLayout;\n import nl.nn.adapterframework.receivers.ReceiverBase;\n import nl.nn.adapterframework.util.AppConstants;\n import nl.nn.adapterframework.util.DateUtils;\n-import nl.nn.adapterframework.util.LogUtil;\n import nl.nn.adapterframework.util.MessageKeeper;\n import nl.nn.adapterframework.util.Misc;\n import nl.nn.adapterframework.util.ProcessMetrics;\n import nl.nn.adapterframework.util.RunStateEnum;\n+import org.apache.logging.log4j.Level;\n+import nl.nn.adapterframework.util.LogUtil;\n+import org.apache.logging.log4j.Logger;\n+import org.apache.logging.log4j.core.config.Configurator;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2a1feec917ed294b81ab42bfa234be336439f91"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1NjM0MjI3OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/nl/nn/adapterframework/webcontrol/api/ServerStatistics.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNTozOTo0OVrOGIa0Gg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNTozOTo0OVrOGIa0Gg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQ4MTExNA==", "bodyText": "Nou ja!", "url": "https://github.com/ibissource/iaf/pull/520#discussion_r411481114", "createdAt": "2020-04-20T15:39:49Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/webcontrol/api/ServerStatistics.java", "diffHunk": "@@ -348,16 +335,15 @@ else if(key.equalsIgnoreCase(\"enableDebugger\")) {\n \t\t\t\tmsg.append(\"logIntermediaryResults changed from [\" + logIntermediary+ \"] to [\" + logIntermediaryResults + \"]\");\n \t\t}\n \n-\t\tif (iaw != null) {\n-\t\t\tif(iaw.getMaxMessageLength() != maxMessageLength) {\n-\t\t\t\tif(msg.length() > 0)\n-\t\t\t\t\tmsg.append(\", logMaxMessageLength from [\" + iaw.getMaxMessageLength() + \"] to [\" + maxMessageLength + \"]\");\n-\t\t\t\telse\n-\t\t\t\t\tmsg.append(\"logMaxMessageLength changed from [\" + iaw.getMaxMessageLength() + \"] to [\" + maxMessageLength + \"]\");\n-\t\t\t\tiaw.setMaxMessageLength(maxMessageLength);\n-\t\t\t}\n-\t\t}\n+\t\tif (maxMessageLength != IbisMaskingLayout.getMaxLength()) {\n+\t\t\tmsg.append(\", logMaxMessageLength changed from [\")\n+\t\t\t\t\t.append(IbisMaskingLayout.getMaxLength())\n+\t\t\t\t\t.append(\"] to [\")\n+\t\t\t\t\t.append(maxMessageLength)\n+\t\t\t\t\t.append(\"]\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2a1feec917ed294b81ab42bfa234be336439f91"}, "originalPosition": 103}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1NjM4OTA1OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/nl/nn/adapterframework/logging/IbisLoggerConfigurationFactory.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNTo0OToxN1rOGIbQ3g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNTo0OToxN1rOGIbQ3g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQ4ODQ3OA==", "bodyText": "Misschien wel handig om uit te leggen hoe dit werkt, in een commentaarregeltje", "url": "https://github.com/ibissource/iaf/pull/520#discussion_r411488478", "createdAt": "2020-04-20T15:49:17Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/logging/IbisLoggerConfigurationFactory.java", "diffHunk": "@@ -0,0 +1,216 @@\n+/*\n+   Copyright 2020 WeAreFrank!\n+\n+   Licensed under the Apache License, Version 2.0 (the \"License\");\n+   you may not use this file except in compliance with the License.\n+   You may obtain a copy of the License at\n+\n+       http://www.apache.org/licenses/LICENSE-2.0\n+\n+   Unless required by applicable law or agreed to in writing, software\n+   distributed under the License is distributed on an \"AS IS\" BASIS,\n+   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+   See the License for the specific language governing permissions and\n+   limitations under the License.\n+*/\n+package nl.nn.adapterframework.logging;\n+\n+import java.io.BufferedReader;\n+import java.io.File;\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.io.StringWriter;\n+import java.io.Writer;\n+import java.net.URL;\n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.Properties;\n+import java.util.regex.Matcher;\n+import java.util.regex.Pattern;\n+\n+import org.apache.logging.log4j.ThreadContext;\n+import org.apache.logging.log4j.core.LoggerContext;\n+import org.apache.logging.log4j.core.config.Configuration;\n+import org.apache.logging.log4j.core.config.ConfigurationFactory;\n+import org.apache.logging.log4j.core.config.ConfigurationSource;\n+import org.apache.logging.log4j.core.config.xml.XmlConfiguration;\n+import nl.nn.adapterframework.util.StreamUtil;\n+\n+/**\n+ * This ConfigurationFactory is loaded after the log4j2.properties file has been initialised.\n+ * Both Configurations are then combined via a CompositeConfiguration\n+ * \n+ * @author Murat Kaan Meral\n+ * @author Niels Meijer\n+ */\n+//@Order(1000)\n+//@Plugin(name = \"IbisLoggerConfigurationFactory\", category = ConfigurationFactory.CATEGORY)\n+public class IbisLoggerConfigurationFactory extends ConfigurationFactory {\n+\tpublic static final String LOG_PREFIX = \"IbisLoggerConfigurationFactory class \";\n+\tprivate static final String LOG4J_PROPS_FILE = \"log4j4ibis.properties\";\n+\tprivate static final String DS_PROPERTIES_FILE = \"DeploymentSpecifics.properties\";\n+\tprivate static String[] logDirectoryHierarchy = new String[] {\n+\t\t\t\"site.logdir\",\n+\t\t\t\"user.dir/logs\",\n+\t\t\t\"user.dir/log\",\n+\t\t\t\"jboss.server.base.dir/log\",\n+\t\t\t\"wtp.deploy/../logs\",\n+\t\t\t\"catalina.base/logs\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2a1feec917ed294b81ab42bfa234be336439f91"}, "originalPosition": 58}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 498, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}