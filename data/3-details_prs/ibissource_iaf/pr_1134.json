{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAwMDUxOTA0", "number": 1134, "title": "Upgrade commons digester", "bodyText": "I bumped into many issues while trying to parse the old XML digester rules file. It turns out that since version 2 most classes have become either package private or final so it's near impossible to extend. The DTD supplied by the dependency is also out of date creating inconsistent xml parsing/validating problems. Many bugs have been reported but since 2013 there has been no development activity. See: DigesterRuleParser, properties-rule,  and dtd inconsistencies.", "createdAt": "2020-10-08T16:39:52Z", "url": "https://github.com/ibissource/iaf/pull/1134", "merged": true, "mergeCommit": {"oid": "4fb590dc2dfd5f5a0cf3ca078b3a74b92b10e7de"}, "closed": true, "closedAt": "2020-10-13T08:00:08Z", "author": {"login": "nielsm5"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdP1g3dAH2gAyNTAwMDUxOTA0OjA4OTg0ZDQ0OTI0YWM1Yzc5ZjZhZTk2YzgzNjIwYzA5NGQxYWZmOWU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdSDcrtgFqTUwNzE0MjAyMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "08984d44924ac5c79f6ae96c83620c094d1aff9e", "author": {"user": {"login": "nielsm5", "name": "Niels"}}, "url": "https://github.com/ibissource/iaf/commit/08984d44924ac5c79f6ae96c83620c094d1aff9e", "committedDate": "2020-10-06T10:06:58Z", "message": "Upgrade Apache Commons Digerster"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bad7c4ce3cc1a15961557a09d6c1ad28e152da88", "author": {"user": {"login": "nielsm5", "name": "Niels"}}, "url": "https://github.com/ibissource/iaf/commit/bad7c4ce3cc1a15961557a09d6c1ad28e152da88", "committedDate": "2020-10-08T15:11:55Z", "message": "Programmatically add digesterRules"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fd57039d6251899cada67bc7b785fc2ff7b10550", "author": {"user": {"login": "nielsm5", "name": "Niels"}}, "url": "https://github.com/ibissource/iaf/commit/fd57039d6251899cada67bc7b785fc2ff7b10550", "committedDate": "2020-10-08T15:13:10Z", "message": "Update proto-beans"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1NDMyNzQ5", "url": "https://github.com/ibissource/iaf/pull/1134#pullrequestreview-505432749", "createdAt": "2020-10-09T07:41:45Z", "commit": {"oid": "fd57039d6251899cada67bc7b785fc2ff7b10550"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQwNzo0MTo0NVrOHe-m0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQwNzo0MTo0NVrOHe-m0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjI0NTA3Mg==", "bodyText": "doesn't create instances unnecessarily", "url": "https://github.com/ibissource/iaf/pull/1134#discussion_r502245072", "createdAt": "2020-10-09T07:41:45Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/resources/springCommon.xml", "diffHunk": "@@ -278,7 +278,7 @@\n \tBeans created from Configuration.xml, but prototyped here for\n \textra dependencies which cannot be created otherwise.\n \tBean names are prefixed with 'proto-' so that autowiring by\n-\tname doesn't create unnessecary instances.\n+\tname doesn't create unnecessarily instances.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fd57039d6251899cada67bc7b785fc2ff7b10550"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1NDM3OTAz", "url": "https://github.com/ibissource/iaf/pull/1134#pullrequestreview-505437903", "createdAt": "2020-10-09T07:49:48Z", "commit": {"oid": "fd57039d6251899cada67bc7b785fc2ff7b10550"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQwNzo0OTo0OVrOHe-2lA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQwNzo0OTo0OVrOHe-2lA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjI0OTEwOA==", "bodyText": "Ik zie hier nog niet de structuur van digester-rules.xml in terug, dus per pattern een 'create', 'set-properties' en 'register'", "url": "https://github.com/ibissource/iaf/pull/1134#discussion_r502249108", "createdAt": "2020-10-09T07:49:49Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/configuration/digester/FrankDigesterRules.java", "diffHunk": "@@ -0,0 +1,139 @@\n+/*\n+   Copyright 2020 WeAreFrank!\n+\n+   Licensed under the Apache License, Version 2.0 (the \"License\");\n+   you may not use this file except in compliance with the License.\n+   You may obtain a copy of the License at\n+\n+       http://www.apache.org/licenses/LICENSE-2.0\n+\n+   Unless required by applicable law or agreed to in writing, software\n+   distributed under the License is distributed on an \"AS IS\" BASIS,\n+   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+   See the License for the specific language governing permissions and\n+   limitations under the License.\n+*/\n+package nl.nn.adapterframework.configuration.digester;\n+\n+import org.apache.commons.digester3.Digester;\n+import org.apache.commons.digester3.ObjectCreationFactory;\n+import org.apache.commons.digester3.Rule;\n+import org.apache.commons.digester3.binder.LinkedRuleBuilder;\n+import org.apache.commons.digester3.binder.RulesBinder;\n+import org.apache.commons.digester3.binder.RulesModule;\n+import org.apache.logging.log4j.Logger;\n+\n+import nl.nn.adapterframework.configuration.AttributeCheckingRule;\n+import nl.nn.adapterframework.configuration.ConfigurationDigesterFactory;\n+import nl.nn.adapterframework.configuration.GenericFactory;\n+import nl.nn.adapterframework.configuration.JmsRealmsFactory;\n+import nl.nn.adapterframework.configuration.ListenerFactory;\n+import nl.nn.adapterframework.configuration.RecordHandlingFlowFactory;\n+import nl.nn.adapterframework.util.LogUtil;\n+\n+public class FrankDigesterRules implements RulesModule {\n+\n+\tprivate final Logger log = LogUtil.getLogger(this);\n+\tprivate GenericFactory factory = new GenericFactory();\n+\tprivate Rule attributeChecker = new AttributeCheckingRule();\n+\tprivate Digester digester;\n+\n+\tpublic FrankDigesterRules(Digester digester) {\n+\t\tthis.digester = digester;\n+\t}\n+\n+\t@Override\n+\tpublic void configure(RulesBinder rulesBinder) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fd57039d6251899cada67bc7b785fc2ff7b10550"}, "originalPosition": 46}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "beb10065ae61cc2c92027061e6ab24b978535249", "author": {"user": {"login": "nielsm5", "name": "Niels"}}, "url": "https://github.com/ibissource/iaf/commit/beb10065ae61cc2c92027061e6ab24b978535249", "committedDate": "2020-10-09T09:31:22Z", "message": "Fix junit tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6868fd91b8d3d24eebd9d77f28ebc386c2e0d81f", "author": {"user": {"login": "nielsm5", "name": "Niels"}}, "url": "https://github.com/ibissource/iaf/commit/6868fd91b8d3d24eebd9d77f28ebc386c2e0d81f", "committedDate": "2020-10-09T09:51:28Z", "message": "Add comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "242cb8420841a67d11d806d78d58808cf19ffac5", "author": {"user": {"login": "nielsm5", "name": "Niels"}}, "url": "https://github.com/ibissource/iaf/commit/242cb8420841a67d11d806d78d58808cf19ffac5", "committedDate": "2020-10-12T09:03:19Z", "message": "Use JaxB to parse the digester-rules.xml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "82a245a54e0246955c3980689a89b3d42583644d", "author": {"user": {"login": "nielsm5", "name": "Niels"}}, "url": "https://github.com/ibissource/iaf/commit/82a245a54e0246955c3980689a89b3d42583644d", "committedDate": "2020-10-12T13:31:39Z", "message": "Use SAXhandler instead of jaxb"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d37bcb4c08bed240b6b503c2af3faba64953fcbc", "author": {"user": {"login": "nielsm5", "name": "Niels"}}, "url": "https://github.com/ibissource/iaf/commit/d37bcb4c08bed240b6b503c2af3faba64953fcbc", "committedDate": "2020-10-12T14:45:35Z", "message": "Enable struts adapters"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d9532439905bb4a2ebe538474c0794a35582a699", "author": {"user": {"login": "nielsm5", "name": "Niels"}}, "url": "https://github.com/ibissource/iaf/commit/d9532439905bb4a2ebe538474c0794a35582a699", "committedDate": "2020-10-12T15:54:20Z", "message": "Ik snap er niets van..."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e886343a25ebf1f3183c312cd68c93fa6c9298d7", "author": {"user": {"login": "nielsm5", "name": "Niels"}}, "url": "https://github.com/ibissource/iaf/commit/e886343a25ebf1f3183c312cd68c93fa6c9298d7", "committedDate": "2020-10-12T16:22:49Z", "message": "Add option to disable IbisConsoleTest"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3MTQyMDIx", "url": "https://github.com/ibissource/iaf/pull/1134#pullrequestreview-507142021", "createdAt": "2020-10-13T07:28:55Z", "commit": {"oid": "e886343a25ebf1f3183c312cd68c93fa6c9298d7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 972, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}