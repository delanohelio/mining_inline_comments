{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIzMjE4OTg2", "number": 1273, "title": "Use log4j for logging configs", "bodyText": "", "createdAt": "2020-11-18T14:19:57Z", "url": "https://github.com/ibissource/iaf/pull/1273", "merged": true, "mergeCommit": {"oid": "c0026481d58b264fc32f17fd0396e822399dcc1d"}, "closed": true, "closedAt": "2020-11-25T11:51:16Z", "author": {"login": "alisihab"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABddu5nMAH2gAyNTIzMjE4OTg2OjI2YWQ1YWIyNWVkNmI1MWUwYTI5YTA1MmQ5NDZiODU3OTc2OWM1ZWY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdf8-L_gFqTUzODQxODQzOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "26ad5ab25ed6b51e0a29a052d946b8579769c5ef", "author": {"user": {"login": "alisihab", "name": null}}, "url": "https://github.com/ibissource/iaf/commit/26ad5ab25ed6b51e0a29a052d946b8579769c5ef", "committedDate": "2020-11-18T14:19:36Z", "message": "Use log4j for logging configs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "213b1673be0a830ef7c5beef0a7768730236aaca", "author": {"user": {"login": "alisihab", "name": null}}, "url": "https://github.com/ibissource/iaf/commit/213b1673be0a830ef7c5beef0a7768730236aaca", "committedDate": "2020-11-18T14:23:57Z", "message": "hardcoded 1mb size"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c48e59eb335a55dde8e7fad5d9f10b1a36137af", "author": {"user": {"login": "alisihab", "name": null}}, "url": "https://github.com/ibissource/iaf/commit/8c48e59eb335a55dde8e7fad5d9f10b1a36137af", "committedDate": "2020-11-18T15:24:56Z", "message": "keep the formatting in xml"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMzNjYyNTk2", "url": "https://github.com/ibissource/iaf/pull/1273#pullrequestreview-533662596", "createdAt": "2020-11-18T17:01:58Z", "commit": {"oid": "8c48e59eb335a55dde8e7fad5d9f10b1a36137af"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQxNzowMTo1OVrOH1360A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQxNzowMTo1OVrOH1360A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjI1Mjc1Mg==", "bodyText": "Why do we need a special layout for this?", "url": "https://github.com/ibissource/iaf/pull/1273#discussion_r526252752", "createdAt": "2020-11-18T17:01:59Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/logging/IbisConfigurationXmlLayout.java", "diffHunk": "@@ -0,0 +1,136 @@\n+/*\n+   Copyright 2020 WeAreFrank!\n+\n+   Licensed under the Apache License, Version 2.0 (the \"License\");\n+   you may not use this file except in compliance with the License.\n+   You may obtain a copy of the License at\n+\n+       http://www.apache.org/licenses/LICENSE-2.0\n+\n+   Unless required by applicable law or agreed to in writing, software\n+   distributed under the License is distributed on an \"AS IS\" BASIS,\n+   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+   See the License for the specific language governing permissions and\n+   limitations under the License.\n+*/\n+package nl.nn.adapterframework.logging;\n+\n+import java.nio.charset.Charset;\n+import java.util.List;\n+\n+import org.apache.commons.lang.StringUtils;\n+import org.apache.logging.log4j.core.LogEvent;\n+import org.apache.logging.log4j.core.config.Configuration;\n+import org.apache.logging.log4j.core.config.plugins.Plugin;\n+import org.apache.logging.log4j.core.config.plugins.PluginAttribute;\n+import org.apache.logging.log4j.core.config.plugins.PluginConfiguration;\n+import org.apache.logging.log4j.core.config.plugins.PluginFactory;\n+import org.apache.logging.log4j.message.Message;\n+import org.jdom2.Attribute;\n+import org.jdom2.Document;\n+import org.jdom2.Element;\n+import org.jdom2.Namespace;\n+import org.jdom2.output.Format;\n+import org.jdom2.output.XMLOutputter;\n+\n+/**\n+ * Implementation of {@link IbisMaskingLayout} to serialize given log events \n+ * in the following format: <br/>\n+ * <pre> {@code\n+ * <log4j:event timestamp=\"1605705678703\" thread=\"thread-1\">\n+ * <log4j:configuration>my message here</log4j:configuration>\n+ * </log4j:event>\n+ * } </pre>\n+ */\n+@Plugin(name = \"IbisConfigurationXmlLayout\", category = \"Core\", elementType = \"layout\", printObject = true)\n+public class IbisConfigurationXmlLayout extends IbisMaskingLayout {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c48e59eb335a55dde8e7fad5d9f10b1a36137af"}, "originalPosition": 46}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f808dd17d7d8ef5bc14335b682c33062aec94fcf", "author": {"user": {"login": "alisihab", "name": null}}, "url": "https://github.com/ibissource/iaf/commit/f808dd17d7d8ef5bc14335b682c33062aec94fcf", "committedDate": "2020-11-19T10:22:15Z", "message": "extend existing layout for configuration logging"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "01d634b676798559ecf0dfe9bf1541e6cfb638bc", "author": {"user": {"login": "alisihab", "name": null}}, "url": "https://github.com/ibissource/iaf/commit/01d634b676798559ecf0dfe9bf1541e6cfb638bc", "committedDate": "2020-11-24T13:29:48Z", "message": "use pattern layout to avoid xml escaping"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc99ab195b1783060113e3d34f0d04cd7e8b6356", "author": {"user": {"login": "alisihab", "name": null}}, "url": "https://github.com/ibissource/iaf/commit/cc99ab195b1783060113e3d34f0d04cd7e8b6356", "committedDate": "2020-11-24T13:35:59Z", "message": "remove the testcase"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM3NjAzMTU5", "url": "https://github.com/ibissource/iaf/pull/1273#pullrequestreview-537603159", "createdAt": "2020-11-24T15:15:10Z", "commit": {"oid": "cc99ab195b1783060113e3d34f0d04cd7e8b6356"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4NDE4NDM4", "url": "https://github.com/ibissource/iaf/pull/1273#pullrequestreview-538418438", "createdAt": "2020-11-25T11:51:07Z", "commit": {"oid": "cc99ab195b1783060113e3d34f0d04cd7e8b6356"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1060, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}