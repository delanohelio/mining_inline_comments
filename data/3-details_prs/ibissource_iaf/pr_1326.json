{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM0NDM2NTcw", "number": 1326, "title": "Fix #1033 Update adapter2dot xsl file", "bodyText": "Closes #1033", "createdAt": "2020-12-08T13:03:50Z", "url": "https://github.com/ibissource/iaf/pull/1326", "merged": true, "mergeCommit": {"oid": "115f5010e02246a4d2b1f72a5bd4300196e4d4c1"}, "closed": true, "closedAt": "2020-12-10T10:04:33Z", "author": {"login": "alisihab"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdkJtopAH2gAyNTM0NDM2NTcwOjczNDE2ZmY0NDJkNTY3ODkyNzdkYzIwOTVlNjczMWEwMDg1ZGQ5MzA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdkwbyNAFqTU0OTAzMjQwNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "73416ff442d56789277dc2095e6731a0085dd930", "author": {"user": {"login": "alisihab", "name": null}}, "url": "https://github.com/ibissource/iaf/commit/73416ff442d56789277dc2095e6731a0085dd930", "committedDate": "2020-12-08T12:57:30Z", "message": "Fix #1033"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3MjQ3MTMx", "url": "https://github.com/ibissource/iaf/pull/1326#pullrequestreview-547247131", "createdAt": "2020-12-08T13:46:25Z", "commit": {"oid": "73416ff442d56789277dc2095e6731a0085dd930"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxMzo0NjoyNVrOIBchCw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxMzo1NzoyM1rOIBdWeA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODM4NjY5OQ==", "bodyText": "The // operator searches the whole document for (in this case) a pipe element.\nI think the following would be better:\nselect=\"pipe[1]/@name\"", "url": "https://github.com/ibissource/iaf/pull/1326#discussion_r538386699", "createdAt": "2020-12-08T13:46:25Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/resources/xsl/adapter2dot.xsl", "diffHunk": "@@ -39,7 +39,14 @@\n \t\t</xsl:choose>\n \t\t<xsl:value-of select=\"$space\" />\n \t\t<xsl:text>&quot;</xsl:text>\n-\t\t<xsl:value-of select=\"@firstPipe\" />\n+\t\t<xsl:choose>\n+\t\t\t<xsl:when test=\"string-length(@firstPipe) > 0\">\n+\t\t\t\t<xsl:value-of select=\"@firstPipe\" />\n+\t\t\t</xsl:when>\n+\t\t\t<xsl:otherwise>\n+\t\t\t\t<xsl:value-of select=\"//pipe[1]/@name\" />", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "73416ff442d56789277dc2095e6731a0085dd930"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODQwMDM3Ng==", "bodyText": "I think you'll need to calculate the 'next' pipe in the pipeline, using following-sibling::*[1]/@name", "url": "https://github.com/ibissource/iaf/pull/1326#discussion_r538400376", "createdAt": "2020-12-08T13:57:23Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/resources/xsl/adapter2dot.xsl", "diffHunk": "@@ -98,41 +105,41 @@\n \t\t\t\t<xsl:value-of select=\"$space\" />\n \t\t\t\t<xsl:text>[shape=diamond]</xsl:text>\n \t\t\t\t<xsl:text>&#10;</xsl:text>\n-\t\t\t\t<xsl:variable name=\"nffn\" select=\"@notFoundForwardName\" />\n-\t\t\t\t<xsl:if test=\"string-length($nffn)&gt;0 and (forward/@name=$nffn)=false()\">\n+\t\t\t\t<xsl:variable name=\"notFoundForwardName\" select=\"@notFoundForwardName\" />\n+\t\t\t\t<xsl:if test=\"string-length($notFoundForwardName)&gt;0 and (forward/@name=$notFoundForwardName)=false()\">\n \t\t\t\t\t<xsl:call-template name=\"forward\">\n \t\t\t\t\t\t<xsl:with-param name=\"pipeName\" select=\"@name\" />\n-\t\t\t\t\t\t<xsl:with-param name=\"forwardPath\" select=\"$nffn\" />\n+\t\t\t\t\t\t<xsl:with-param name=\"forwardPath\" select=\"$notFoundForwardName\" />\n \t\t\t\t\t\t<xsl:with-param name=\"forwardName\">notFoundForwardName</xsl:with-param>\n \t\t\t\t\t</xsl:call-template>\n \t\t\t\t</xsl:if>\n-\t\t\t\t<xsl:variable name=\"efn\" select=\"@emptyForwardName\" />\n-\t\t\t\t<xsl:if test=\"string-length($efn)&gt;0 and (forward/@name=$efn)=false()\">\n+\t\t\t\t<xsl:variable name=\"emptyForwardName\" select=\"@emptyForwardName\" />\n+\t\t\t\t<xsl:if test=\"string-length($emptyForwardName)&gt;0 and (forward/@name=$emptyForwardName)=false()\">\n \t\t\t\t\t<xsl:call-template name=\"forward\">\n \t\t\t\t\t\t<xsl:with-param name=\"pipeName\" select=\"@name\" />\n-\t\t\t\t\t\t<xsl:with-param name=\"forwardPath\" select=\"$efn\" />\n+\t\t\t\t\t\t<xsl:with-param name=\"forwardPath\" select=\"$emptyForwardName\" />\n \t\t\t\t\t\t<xsl:with-param name=\"forwardName\">emptyForwardName</xsl:with-param>\n \t\t\t\t\t</xsl:call-template>\n \t\t\t\t</xsl:if>\n-\t\t\t\t<xsl:variable name=\"tfn\" select=\"@thenForwardName\" />\n-\t\t\t\t<xsl:if test=\"string-length($tfn)&gt;0 and (forward/@name=$tfn)=false()\">\n+\t\t\t\t<xsl:variable name=\"thenForwardName\" select=\"@thenForwardName\" />\n+\t\t\t\t<xsl:if test=\"string-length($thenForwardName)&gt;0 and (forward/@name=$thenForwardName)=false()\">\n \t\t\t\t\t<xsl:call-template name=\"forward\">\n \t\t\t\t\t\t<xsl:with-param name=\"pipeName\" select=\"@name\" />\n-\t\t\t\t\t\t<xsl:with-param name=\"forwardPath\" select=\"$tfn\" />\n+\t\t\t\t\t\t<xsl:with-param name=\"forwardPath\" select=\"$thenForwardName\" />\n \t\t\t\t\t\t<xsl:with-param name=\"forwardName\">thenForwardName</xsl:with-param>\n \t\t\t\t\t</xsl:call-template>\n \t\t\t\t</xsl:if>\n-\t\t\t\t<xsl:variable name=\"efn\" select=\"@elseForwardName\" />\n-\t\t\t\t<xsl:if test=\"string-length($efn)&gt;0 and (forward/@name=$efn)=false()\">\n+\t\t\t\t<xsl:variable name=\"elseForwardName\" select=\"@elseForwardName\" />\n+\t\t\t\t<xsl:if test=\"string-length($elseForwardName)&gt;0 and (forward/@name=$elseForwardName)=false()\">\n \t\t\t\t\t<xsl:call-template name=\"forward\">\n \t\t\t\t\t\t<xsl:with-param name=\"pipeName\" select=\"@name\" />\n-\t\t\t\t\t\t<xsl:with-param name=\"forwardPath\" select=\"$efn\" />\n+\t\t\t\t\t\t<xsl:with-param name=\"forwardPath\" select=\"$elseForwardName\" />\n \t\t\t\t\t\t<xsl:with-param name=\"forwardName\">elseForwardName</xsl:with-param>\n \t\t\t\t\t</xsl:call-template>\n \t\t\t\t</xsl:if>\n \t\t\t</xsl:when>\n \t\t\t<xsl:otherwise>\n-\t\t\t\t<xsl:if test=\"forward=false()\">\n+\t\t\t\t<xsl:if test=\"count(forward[@name='success'])=0\">\n \t\t\t\t\t<xsl:call-template name=\"forward\">\n \t\t\t\t\t\t<xsl:with-param name=\"pipeName\" select=\"@name\" />", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "73416ff442d56789277dc2095e6731a0085dd930"}, "originalPosition": 69}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0d1f79fb285f600a49984874ab168085b0739dcd", "author": {"user": {"login": "alisihab", "name": null}}, "url": "https://github.com/ibissource/iaf/commit/0d1f79fb285f600a49984874ab168085b0739dcd", "committedDate": "2020-12-08T15:10:40Z", "message": "simplify changes and create a test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3MzQxMDYx", "url": "https://github.com/ibissource/iaf/pull/1326#pullrequestreview-547341061", "createdAt": "2020-12-08T15:24:15Z", "commit": {"oid": "0d1f79fb285f600a49984874ab168085b0739dcd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4NTQyMjQ1", "url": "https://github.com/ibissource/iaf/pull/1326#pullrequestreview-548542245", "createdAt": "2020-12-09T19:37:06Z", "commit": {"oid": "0d1f79fb285f600a49984874ab168085b0739dcd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "41a1ea1097f1cbf3f8faf3402d103f95f4ec1f35", "author": {"user": {"login": "alisihab", "name": null}}, "url": "https://github.com/ibissource/iaf/commit/41a1ea1097f1cbf3f8faf3402d103f95f4ec1f35", "committedDate": "2020-12-10T09:14:37Z", "message": "prove that having an exit right after a pipe which does not have success forward will not block the pipeline to follow the next pipe"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ5MDMyNDA0", "url": "https://github.com/ibissource/iaf/pull/1326#pullrequestreview-549032404", "createdAt": "2020-12-10T10:04:18Z", "commit": {"oid": "41a1ea1097f1cbf3f8faf3402d103f95f4ec1f35"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 936, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}