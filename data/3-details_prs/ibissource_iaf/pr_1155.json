{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA0ODE1NjU3", "number": 1155, "title": "Do not normalize new lines in attributes during config loading", "bodyText": "Fixes #1061", "createdAt": "2020-10-16T12:46:55Z", "url": "https://github.com/ibissource/iaf/pull/1155", "merged": true, "mergeCommit": {"oid": "e2e5e85745b9d5b342a777d7fb447e5263801720"}, "closed": true, "closedAt": "2020-10-21T07:17:55Z", "author": {"login": "alisihab"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdTFw8hgH2gAyNTA0ODE1NjU3OjBiYTBmODdkNDZhZjVjM2VkNjAxYzRhOGNiNzIyNmQ5ZWU5NTZlZGE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdUoFSfAFqTUxMzM3MTk3Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0ba0f87d46af5c3ed601c4a8cb7226d9ee956eda", "author": {"user": null}, "url": "https://github.com/ibissource/iaf/commit/0ba0f87d46af5c3ed601c4a8cb7226d9ee956eda", "committedDate": "2020-10-16T12:44:47Z", "message": "do not normalize new lines in attributes during config loading"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "de0775631dc871cac00c0843c5013d6d7f4c2661", "author": {"user": null}, "url": "https://github.com/ibissource/iaf/commit/de0775631dc871cac00c0843c5013d6d7f4c2661", "committedDate": "2020-10-16T12:55:31Z", "message": "another wrapper"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwNTc1MTM5", "url": "https://github.com/ibissource/iaf/pull/1155#pullrequestreview-510575139", "createdAt": "2020-10-16T15:25:26Z", "commit": {"oid": "de0775631dc871cac00c0843c5013d6d7f4c2661"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxNToyNToyNlrOHjE5-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxNToyNToyNlrOHjE5-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjU0MjU4Ng==", "bodyText": "I think it would be a good idea not to introduce two new resources, but to add the &#xa; value to 'in.xml', to a element, to an attribute, to the escaped data in <data1> and to the CDATA in <data2> .\nYou'll also have to change quite some other resource files, but it makes the test cover more.", "url": "https://github.com/ibissource/iaf/pull/1155#discussion_r506542586", "createdAt": "2020-10-16T15:25:26Z", "author": {"login": "gvanbrakel"}, "path": "core/src/test/java/nl/nn/adapterframework/xml/XmlWriterTest.java", "diffHunk": "@@ -71,4 +71,20 @@ public void testNoLexicalHandling() throws Exception {\n \t\tassertEquals(expected,xmlWriter.toString());\n \t}\n \n+\t@Test\n+\tpublic void testDisableOutputEscaping() throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "de0775631dc871cac00c0843c5013d6d7f4c2661"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9cbac312109bcc70bb58a6a8d76769eccdb2c29a", "author": {"user": null}, "url": "https://github.com/ibissource/iaf/commit/9cbac312109bcc70bb58a6a8d76769eccdb2c29a", "committedDate": "2020-10-19T12:03:02Z", "message": "include new line in xml, xsl test cases"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTExNzYzNDM0", "url": "https://github.com/ibissource/iaf/pull/1155#pullrequestreview-511763434", "createdAt": "2020-10-19T13:32:21Z", "commit": {"oid": "9cbac312109bcc70bb58a6a8d76769eccdb2c29a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMzozMjoyMlrOHkOgyQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMzozMjoyMlrOHkOgyQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc0ODU1Mw==", "bodyText": "Should the xmlWriter really resolve the new line? I would think not!", "url": "https://github.com/ibissource/iaf/pull/1155#discussion_r507748553", "createdAt": "2020-10-19T13:32:22Z", "author": {"login": "gvanbrakel"}, "path": "core/src/test/java/nl/nn/adapterframework/xml/XmlWriterTest.java", "diffHunk": "@@ -20,6 +20,8 @@ public void testBasic() throws Exception {\n \t\tString expected = input;\n \t\tXmlWriter xmlWriter = new XmlWriter();\n \t\tXmlUtils.parseXml(input, xmlWriter);\n+\t\t/* parseXml method will resolve new line*/\n+\t\texpected = expected.replace(\"newline &#10;\", \"newline \\n\").replace(\"&lt;LF&gt;&#xa;&lt;/LF&gt;\", \"&lt;LF&gt;\\n&lt;/LF&gt;\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9cbac312109bcc70bb58a6a8d76769eccdb2c29a"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0efd4b209276c134318bed5f529dd96118c49f16", "author": {"user": null}, "url": "https://github.com/ibissource/iaf/commit/0efd4b209276c134318bed5f529dd96118c49f16", "committedDate": "2020-10-19T14:12:54Z", "message": "have the new line only in an attribute"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTExODg0MTgz", "url": "https://github.com/ibissource/iaf/pull/1155#pullrequestreview-511884183", "createdAt": "2020-10-19T15:24:17Z", "commit": {"oid": "0efd4b209276c134318bed5f529dd96118c49f16"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEyNTA0MDI5", "url": "https://github.com/ibissource/iaf/pull/1155#pullrequestreview-512504029", "createdAt": "2020-10-20T09:21:16Z", "commit": {"oid": "0efd4b209276c134318bed5f529dd96118c49f16"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQwOToyMToxN1rOHky5Cg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQwOToyMjo0NVrOHky9CA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODM0NDU4Ng==", "bodyText": "2019 - 2020 WeAreFrank!", "url": "https://github.com/ibissource/iaf/pull/1155#discussion_r508344586", "createdAt": "2020-10-20T09:21:17Z", "author": {"login": "nielsm5"}, "path": "core/src/main/java/nl/nn/adapterframework/xml/XmlWriter.java", "diffHunk": "@@ -1,5 +1,5 @@\n /*\n-   Copyright 2019 Integration Partners\n+   Copyright 2019 Integration Partners, 2020 WeAreFrank!", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0efd4b209276c134318bed5f529dd96118c49f16"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODM0NDcyMw==", "bodyText": "\ud83d\udc4d", "url": "https://github.com/ibissource/iaf/pull/1155#discussion_r508344723", "createdAt": "2020-10-20T09:21:30Z", "author": {"login": "nielsm5"}, "path": "core/src/main/java/nl/nn/adapterframework/xml/XmlWriter.java", "diffHunk": "@@ -37,22 +37,22 @@\n \n public class XmlWriter extends DefaultHandler implements LexicalHandler {\n \tprotected Logger log = LogUtil.getLogger(this);\n-\t\n-\tprivate final String DISABLE_OUTPUT_ESCAPING=\"javax.xml.transform.disable-output-escaping\";\n-\tprivate final String ENABLE_OUTPUT_ESCAPING=\"javax.xml.transform.enable-output-escaping\";\n-\t\n+\n+\tpublic static final String DISABLE_OUTPUT_ESCAPING=\"javax.xml.transform.disable-output-escaping\";\n+\tpublic static final String ENABLE_OUTPUT_ESCAPING=\"javax.xml.transform.enable-output-escaping\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0efd4b209276c134318bed5f529dd96118c49f16"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODM0NTM5OQ==", "bodyText": "Good comment! (maybe fix mehtod though)", "url": "https://github.com/ibissource/iaf/pull/1155#discussion_r508345399", "createdAt": "2020-10-20T09:22:29Z", "author": {"login": "nielsm5"}, "path": "core/src/test/java/nl/nn/adapterframework/xslt/ParallelXsltTest.java", "diffHunk": "@@ -119,6 +119,8 @@ protected void assertResultsAreCorrect(String expected, String actual, IPipeLine\n \n //\t\tsuper.assertResultsAreCorrect(combinedExpected, actual, session);\n \n+\t\t/* Parallel sender uses toXml mehtod which escapes the new line char. In the comparison we need unescaped char.*/", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0efd4b209276c134318bed5f529dd96118c49f16"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODM0NTYwOA==", "bodyText": "A tip I can give you for next time, try to not put too many test cases in 1 junit-test. It will make it more difficult to analyse the problem. In this case you're testing the escape part so it's understandable \ud83d\udc4d", "url": "https://github.com/ibissource/iaf/pull/1155#discussion_r508345608", "createdAt": "2020-10-20T09:22:45Z", "author": {"login": "nielsm5"}, "path": "core/src/test/java/nl/nn/adapterframework/xslt/XsltTestBase.java", "diffHunk": "@@ -353,7 +353,7 @@ public void xpathAttrText() throws Exception {\n \t@Test\n \tpublic void xpathNodeXml() throws Exception {\n \t\tString input = TestFileUtils.getTestFile(\"/Xslt/AnyXml/in.xml\");\n-\t\tString expected = \"<g attr=\\\"Euro \u20ac single quote ' double quote escaped &quot; \\\">Euro \u20ac single quote ' double quote \\\"</g>\";\n+\t\tString expected = \"<g attr=\\\"Euro \u20ac single quote ' double quote escaped &quot; newline escaped &#10;\\\">Euro \u20ac single quote ' double quote \\\"</g>\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0efd4b209276c134318bed5f529dd96118c49f16"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dd4fae0f00eba25f8306ac20a6eb6021b2e87f92", "author": {"user": null}, "url": "https://github.com/ibissource/iaf/commit/dd4fae0f00eba25f8306ac20a6eb6021b2e87f92", "committedDate": "2020-10-20T11:25:00Z", "message": "fix copyright, comment typo"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzMzcxOTc3", "url": "https://github.com/ibissource/iaf/pull/1155#pullrequestreview-513371977", "createdAt": "2020-10-21T07:17:42Z", "commit": {"oid": "dd4fae0f00eba25f8306ac20a6eb6021b2e87f92"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 988, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}