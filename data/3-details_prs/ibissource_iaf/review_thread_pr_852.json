{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM2OTg5MzU2", "number": 852, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwNzoxODoyN1rOEJB3uQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwNzoxODoyN1rOEJB3uQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3OTAzMjg5OnYy", "diffSide": "LEFT", "path": "core/src/main/java/nl/nn/adapterframework/webcontrol/api/SendJmsMessage.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwNzoxODoyN1rOGpWT1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwNzoxODoyN1rOGpWT1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjAxMDMyNQ==", "bodyText": "Allemaal niet meer nodig?", "url": "https://github.com/ibissource/iaf/pull/852#discussion_r446010325", "createdAt": "2020-06-26T07:18:27Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/webcontrol/api/SendJmsMessage.java", "diffHunk": "@@ -58,35 +58,26 @@\n \t@Consumes(MediaType.MULTIPART_FORM_DATA)\n \tpublic Response putJmsMessage(MultipartFormDataInput input) throws ApiException {\n \n-\t\tString jmsRealm = null, destinationName = null, destinationType = null, replyTo = null, message = null, fileName = null;\n+\t\tString message = null, fileName = null;\n \t\tInputStream file = null;\n-\t\tboolean persistent = false;\n \t\tMap<String, List<InputPart>> inputDataMap = input.getFormDataMap();\n \t\tif(inputDataMap == null) {\n \t\t\tthrow new ApiException(\"Missing post parameters\");\n \t\t}\n \n+\t\tString fileEncoding = resolveTypeFromMap(inputDataMap, \"encoding\", String.class, Misc.DEFAULT_INPUT_STREAM_ENCODING);\n+\t\tString jmsRealm = resolveStringFromMap(inputDataMap, \"realm\");\n+\t\tString destinationName = resolveStringFromMap(inputDataMap, \"destination\");\n+\t\tString destinationType = resolveStringFromMap(inputDataMap, \"type\");\n+\t\tString replyTo = resolveStringFromMap(inputDataMap, \"replyTo\");\n+\t\tboolean persistent = resolveTypeFromMap(inputDataMap, \"persistent\", boolean.class, false);\n+\n \t\ttry {\n-\t\t\tif(inputDataMap.get(\"realm\") != null)\n-\t\t\t\tjmsRealm = inputDataMap.get(\"realm\").get(0).getBodyAsString();\n-\t\t\telse\n-\t\t\t\tthrow new ApiException(\"JMS realm not defined\", 400);\n-\t\t\tif(inputDataMap.get(\"destination\") != null)\n-\t\t\t\tdestinationName = inputDataMap.get(\"destination\").get(0).getBodyAsString();\n-\t\t\telse\n-\t\t\t\tthrow new ApiException(\"Destination name not defined\", 400);\n-\t\t\tif(inputDataMap.get(\"type\") != null) \n-\t\t\t\tdestinationType = inputDataMap.get(\"type\").get(0).getBodyAsString();\n-\t\t\telse\n-\t\t\t\tthrow new ApiException(\"Destination type not defined\", 400);\n-\t\t\tif(inputDataMap.get(\"replyTo\") != null)\n-\t\t\t\treplyTo = inputDataMap.get(\"replyTo\").get(0).getBodyAsString();\n-\t\t\telse\n-\t\t\t\tthrow new ApiException(\"ReplyTo not defined\", 400);\n-\t\t\tif(inputDataMap.get(\"message\") != null) \n-\t\t\t\tmessage = inputDataMap.get(\"message\").get(0).getBodyAsString();\n-\t\t\tif(inputDataMap.get(\"persistent\") != null)\n-\t\t\t\tpersistent = inputDataMap.get(\"persistent\").get(0).getBody(boolean.class, null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "009200c8c35c6deff971615523d8c140fd590b3c"}, "originalPosition": 40}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 391, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}