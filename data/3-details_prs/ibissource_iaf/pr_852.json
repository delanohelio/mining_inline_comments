{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM2OTg5MzU2", "number": 852, "title": "Merge #761, #746, #786, #818, #821, #845, #847", "bodyText": "", "createdAt": "2020-06-19T09:21:07Z", "url": "https://github.com/ibissource/iaf/pull/852", "merged": true, "mergeCommit": {"oid": "c6b2c2fe530eb4a9236ba1d93080091f1c992dd2"}, "closed": true, "closedAt": "2020-06-26T09:59:22Z", "author": {"login": "nielsm5"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcsu06vgH2gAyNDM2OTg5MzU2OmU1YmVlZjRhODhkNWNjMzViNmNiZGU0ZjI5YzU0MDEyODlhODA3Njk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcvAQx3gFqTQzODE2OTIzNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e5beef4a88d5cc35b6cbde4f29c5401289a80769", "author": {"user": {"login": "nielsm5", "name": "Niels"}}, "url": "https://github.com/ibissource/iaf/commit/e5beef4a88d5cc35b6cbde4f29c5401289a80769", "committedDate": "2020-06-19T08:32:11Z", "message": "Set receiver color to red when in error (#761)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "19c3d3a7dc2c69e9e166e861200c04f52c7c4266", "author": {"user": {"login": "nielsm5", "name": "Niels"}}, "url": "https://github.com/ibissource/iaf/commit/19c3d3a7dc2c69e9e166e861200c04f52c7c4266", "committedDate": "2020-06-19T08:57:04Z", "message": "Set property to disable SecurityManager (#746)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "562e5b9c5cf99e9857157bf16df878a81d97526a", "author": {"user": {"login": "nielsm5", "name": "Niels"}}, "url": "https://github.com/ibissource/iaf/commit/562e5b9c5cf99e9857157bf16df878a81d97526a", "committedDate": "2020-06-19T08:57:51Z", "message": "Update login view and make it more usable (#786)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b99c3ccce2d1ece357b9dac813749d85e4123de", "author": {"user": {"login": "nielsm5", "name": "Niels"}}, "url": "https://github.com/ibissource/iaf/commit/5b99c3ccce2d1ece357b9dac813749d85e4123de", "committedDate": "2020-06-19T09:02:41Z", "message": "Multiple GUI fixes (#818)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f474b02f2af48ac8566c62000267239cc9e5c541", "author": {"user": {"login": "nielsm5", "name": "Niels"}}, "url": "https://github.com/ibissource/iaf/commit/f474b02f2af48ac8566c62000267239cc9e5c541", "committedDate": "2020-06-19T09:09:58Z", "message": "Fix auto choose sql querytype (select or other) (#821)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "22b08e1e3245d963a938de446c877479d7dcf518", "author": {"user": {"login": "nielsm5", "name": "Niels"}}, "url": "https://github.com/ibissource/iaf/commit/22b08e1e3245d963a938de446c877479d7dcf518", "committedDate": "2020-06-19T09:10:19Z", "message": "Cleanup old adapters + fix maxThreadCount not having a return statement (#845)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5c4e80efa90b1cd8c353a2f1c18e34ab94ff6cae", "author": {"user": {"login": "alisihab", "name": null}}, "url": "https://github.com/ibissource/iaf/commit/5c4e80efa90b1cd8c353a2f1c18e34ab94ff6cae", "committedDate": "2020-06-19T09:17:18Z", "message": "Remove authentication for the base url and redirect to status (#847)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c809a99afc17f3933624d0e258f68c60108a197d", "author": {"user": {"login": "nielsm5", "name": "Niels"}}, "url": "https://github.com/ibissource/iaf/commit/c809a99afc17f3933624d0e258f68c60108a197d", "committedDate": "2020-06-19T13:39:27Z", "message": "Improve hover over message status"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "35887abc2325ea15c5472f439e97f2d5e929b89d", "author": {"user": {"login": "nielsm5", "name": "Niels"}}, "url": "https://github.com/ibissource/iaf/commit/35887abc2325ea15c5472f439e97f2d5e929b89d", "committedDate": "2020-06-19T13:56:26Z", "message": "Add jdbc query cookie and update manual url's"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1353d8cdb4966ee1fabfe9c3351a8cacd0beeedf", "author": {"user": {"login": "nielsm5", "name": "Niels"}}, "url": "https://github.com/ibissource/iaf/commit/1353d8cdb4966ee1fabfe9c3351a8cacd0beeedf", "committedDate": "2020-06-19T14:00:46Z", "message": "Add errorstorage select messages"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "abf0e716047e4633d0993fe3c14c77662c6c1d3b", "author": {"user": {"login": "nielsm5", "name": "Niels"}}, "url": "https://github.com/ibissource/iaf/commit/abf0e716047e4633d0993fe3c14c77662c6c1d3b", "committedDate": "2020-06-19T14:22:10Z", "message": "Add ability to change message encoding (#735)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "60ced2deddfbd276456241bdc4bd15b43b23ad6d", "author": {"user": {"login": "nielsm5", "name": "Niels"}}, "url": "https://github.com/ibissource/iaf/commit/60ced2deddfbd276456241bdc4bd15b43b23ad6d", "committedDate": "2020-06-19T14:29:03Z", "message": "Fix style on errorStorage page (subset of #584)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "756967c9a845c180a9573e85f109cda1ff028053", "author": {"user": {"login": "nielsm5", "name": "Niels"}}, "url": "https://github.com/ibissource/iaf/commit/756967c9a845c180a9573e85f109cda1ff028053", "committedDate": "2020-06-22T11:53:23Z", "message": "Fix NPEs while coverting rawMessage result to String"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "009200c8c35c6deff971615523d8c140fd590b3c", "author": {"user": {"login": "nielsm5", "name": "Niels"}}, "url": "https://github.com/ibissource/iaf/commit/009200c8c35c6deff971615523d8c140fd590b3c", "committedDate": "2020-06-24T12:04:04Z", "message": "Make Jms afterMessageProcessed resilient to other message types (#861)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4MDY1OTU3", "url": "https://github.com/ibissource/iaf/pull/852#pullrequestreview-438065957", "createdAt": "2020-06-26T07:18:27Z", "commit": {"oid": "009200c8c35c6deff971615523d8c140fd590b3c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwNzoxODoyN1rOGpWT1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwNzoxODoyN1rOGpWT1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjAxMDMyNQ==", "bodyText": "Allemaal niet meer nodig?", "url": "https://github.com/ibissource/iaf/pull/852#discussion_r446010325", "createdAt": "2020-06-26T07:18:27Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/webcontrol/api/SendJmsMessage.java", "diffHunk": "@@ -58,35 +58,26 @@\n \t@Consumes(MediaType.MULTIPART_FORM_DATA)\n \tpublic Response putJmsMessage(MultipartFormDataInput input) throws ApiException {\n \n-\t\tString jmsRealm = null, destinationName = null, destinationType = null, replyTo = null, message = null, fileName = null;\n+\t\tString message = null, fileName = null;\n \t\tInputStream file = null;\n-\t\tboolean persistent = false;\n \t\tMap<String, List<InputPart>> inputDataMap = input.getFormDataMap();\n \t\tif(inputDataMap == null) {\n \t\t\tthrow new ApiException(\"Missing post parameters\");\n \t\t}\n \n+\t\tString fileEncoding = resolveTypeFromMap(inputDataMap, \"encoding\", String.class, Misc.DEFAULT_INPUT_STREAM_ENCODING);\n+\t\tString jmsRealm = resolveStringFromMap(inputDataMap, \"realm\");\n+\t\tString destinationName = resolveStringFromMap(inputDataMap, \"destination\");\n+\t\tString destinationType = resolveStringFromMap(inputDataMap, \"type\");\n+\t\tString replyTo = resolveStringFromMap(inputDataMap, \"replyTo\");\n+\t\tboolean persistent = resolveTypeFromMap(inputDataMap, \"persistent\", boolean.class, false);\n+\n \t\ttry {\n-\t\t\tif(inputDataMap.get(\"realm\") != null)\n-\t\t\t\tjmsRealm = inputDataMap.get(\"realm\").get(0).getBodyAsString();\n-\t\t\telse\n-\t\t\t\tthrow new ApiException(\"JMS realm not defined\", 400);\n-\t\t\tif(inputDataMap.get(\"destination\") != null)\n-\t\t\t\tdestinationName = inputDataMap.get(\"destination\").get(0).getBodyAsString();\n-\t\t\telse\n-\t\t\t\tthrow new ApiException(\"Destination name not defined\", 400);\n-\t\t\tif(inputDataMap.get(\"type\") != null) \n-\t\t\t\tdestinationType = inputDataMap.get(\"type\").get(0).getBodyAsString();\n-\t\t\telse\n-\t\t\t\tthrow new ApiException(\"Destination type not defined\", 400);\n-\t\t\tif(inputDataMap.get(\"replyTo\") != null)\n-\t\t\t\treplyTo = inputDataMap.get(\"replyTo\").get(0).getBodyAsString();\n-\t\t\telse\n-\t\t\t\tthrow new ApiException(\"ReplyTo not defined\", 400);\n-\t\t\tif(inputDataMap.get(\"message\") != null) \n-\t\t\t\tmessage = inputDataMap.get(\"message\").get(0).getBodyAsString();\n-\t\t\tif(inputDataMap.get(\"persistent\") != null)\n-\t\t\t\tpersistent = inputDataMap.get(\"persistent\").get(0).getBody(boolean.class, null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "009200c8c35c6deff971615523d8c140fd590b3c"}, "originalPosition": 40}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4MTY5MjM0", "url": "https://github.com/ibissource/iaf/pull/852#pullrequestreview-438169234", "createdAt": "2020-06-26T09:58:51Z", "commit": {"oid": "009200c8c35c6deff971615523d8c140fd590b3c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1262, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}