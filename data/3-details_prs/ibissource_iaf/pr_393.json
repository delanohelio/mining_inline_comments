{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY5NjA0NDEx", "number": 393, "title": "Add possibility to put error details in ESB SOAP body response", "bodyText": "", "createdAt": "2020-01-31T14:20:26Z", "url": "https://github.com/ibissource/iaf/pull/393", "merged": true, "mergeCommit": {"oid": "f546915f21cbff87fa3ad57633fe41a22d438196"}, "closed": true, "closedAt": "2020-04-15T13:51:43Z", "author": {"login": "leeuw73"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb_v3XNAH2gAyMzY5NjA0NDExOjllMmIzNzhhNTE3MWFmZmMwODkyODcxYTZmOTU3OWMzNjE1NDc5Yjg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcX4NgzgH2gAyMzY5NjA0NDExOjZlZTJlM2MxOTdiZjhkYmI2YmY5MjMwOWM1ODkzMWUxZTA5ODFmZWI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9e2b378a5171affc0892871a6f9579c3615479b8", "author": {"user": {"login": "leeuw73", "name": null}}, "url": "https://github.com/ibissource/iaf/commit/9e2b378a5171affc0892871a6f9579c3615479b8", "committedDate": "2020-01-31T14:18:10Z", "message": "Add possibility to put error details in ESB SOAP body response"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c66e0f16b6cb16774423dcb1aa7ac03bcf9465f1", "author": {"user": {"login": "leeuw73", "name": null}}, "url": "https://github.com/ibissource/iaf/commit/c66e0f16b6cb16774423dcb1aa7ac03bcf9465f1", "committedDate": "2020-01-31T14:24:58Z", "message": "Do not commit this file"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2NjA0NTA0", "url": "https://github.com/ibissource/iaf/pull/393#pullrequestreview-356604504", "createdAt": "2020-02-11T12:06:40Z", "commit": {"oid": "c66e0f16b6cb16774423dcb1aa7ac03bcf9465f1"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQxMjowNjo0MVrOFoGjFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQxMjoyMzowNlrOFoG-4w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzU5NDY0NQ==", "bodyText": "Je kan niet zomaar voor elke Xslt een parameter 'environment' toevoegen, hier in de XsltSender.\nAls dit voor de EsbSoapWrapperPipe nodig is, dan moet je het daar doen.", "url": "https://github.com/ibissource/iaf/pull/393#discussion_r377594645", "createdAt": "2020-02-11T12:06:41Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/senders/XsltSender.java", "diffHunk": "@@ -95,6 +96,13 @@\n \t */\n \t@Override\n \tpublic void configure() throws ConfigurationException {\n+\t\tParameterList parameterList = getParameterList();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c66e0f16b6cb16774423dcb1aa7ac03bcf9465f1"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzYwMTc2Mw==", "bodyText": "De test op 'errorDetailCode' leek verdwenen te zijn, maar zag ik toch nog verder naar onderen. Wordt er ook getest dat de oude manier van werken ook nog werkt?", "url": "https://github.com/ibissource/iaf/pull/393#discussion_r377601763", "createdAt": "2020-02-11T12:23:06Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/resources/xml/xsl/esb/soapBody.xsl", "diffHunk": "@@ -141,22 +150,62 @@\n \t\t\t\t\t\t\t\t\t</xsl:element>\n \t\t\t\t\t\t\t\t</xsl:element>\n \t\t\t\t\t\t\t</xsl:element>\n-\t\t\t\t\t\t\t<xsl:if test=\"string-length($errorDetailCode)&gt;0\">\n-\t\t\t\t\t\t\t\t<xsl:element name=\"DetailList\" namespace=\"{$ns}\">\n-\t\t\t\t\t\t\t\t\t<xsl:element name=\"Detail\" namespace=\"{$ns}\">\n-\t\t\t\t\t\t\t\t\t\t<xsl:element name=\"Code\" namespace=\"{$ns}\">\n-\t\t\t\t\t\t\t\t\t\t\t<xsl:value-of select=\"$errorDetailCode\"/>\n-\t\t\t\t\t\t\t\t\t\t</xsl:element>\n-\t\t\t\t\t\t\t\t\t\t<xsl:if test=\"string-length($errorDetailText)&gt;0\">\n+\t\t\t\t\t\t\t<xsl:choose>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c66e0f16b6cb16774423dcb1aa7ac03bcf9465f1"}, "originalPosition": 51}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b5ac8977abb008615124ceb5b440cd7b585206ea", "author": {"user": {"login": "leeuw73", "name": null}}, "url": "https://github.com/ibissource/iaf/commit/b5ac8977abb008615124ceb5b440cd7b585206ea", "committedDate": "2020-02-28T11:10:29Z", "message": "Merge remote-tracking branch 'origin/master' into\nEsbSoapBodyErrorDetails\n\nConflicts:\n\tRELEASES.md"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4debe9488dce924c6b5b5919023616c2ce57a0ea", "author": {"user": {"login": "leeuw73", "name": null}}, "url": "https://github.com/ibissource/iaf/commit/4debe9488dce924c6b5b5919023616c2ce57a0ea", "committedDate": "2020-02-28T11:13:45Z", "message": "[ci skip] Merge release notes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d8997c4ebdb06180d7ff98d5b5d4879223a7a733", "author": {"user": {"login": "leeuw73", "name": null}}, "url": "https://github.com/ibissource/iaf/commit/d8997c4ebdb06180d7ff98d5b5d4879223a7a733", "committedDate": "2020-02-28T14:39:22Z", "message": "Merge branch 'master' into EsbSoapBodyErrorDetails"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2efc7164041da708463932ec00492e7e6ffc6b7d", "author": {"user": {"login": "leeuw73", "name": null}}, "url": "https://github.com/ibissource/iaf/commit/2efc7164041da708463932ec00492e7e6ffc6b7d", "committedDate": "2020-02-28T15:14:28Z", "message": "XsltSender/XsltPipe: new attribute addEnvironmentParameter"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9b0bc41fd941948909eb200fb8d5412a0457775a", "author": {"user": {"login": "leeuw73", "name": null}}, "url": "https://github.com/ibissource/iaf/commit/9b0bc41fd941948909eb200fb8d5412a0457775a", "committedDate": "2020-02-28T15:26:16Z", "message": "Add comments for soapBody.xls"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "76e72703f1d9ccab59f90f4b7bd21a8baf439596", "author": {"user": {"login": "leeuw73", "name": null}}, "url": "https://github.com/ibissource/iaf/commit/76e72703f1d9ccab59f90f4b7bd21a8baf439596", "committedDate": "2020-03-25T14:08:34Z", "message": "Replace attribute addEnvironmentParameter by xslt parameter"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ad8f03c0f6325d8dfba354af6c04c4475aa5614f", "author": {"user": {"login": "leeuw73", "name": null}}, "url": "https://github.com/ibissource/iaf/commit/ad8f03c0f6325d8dfba354af6c04c4475aa5614f", "committedDate": "2020-03-25T14:12:57Z", "message": "Remove free-ride change"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cdc69f2a38e499a04aa6b71d4b449e4155d098d3", "author": {"user": {"login": "gvanbrakel", "name": "Gerrit van Brakel"}}, "url": "https://github.com/ibissource/iaf/commit/cdc69f2a38e499a04aa6b71d4b449e4155d098d3", "committedDate": "2020-03-31T11:26:10Z", "message": "clarify ibisdoc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgwMTkwNjc2", "url": "https://github.com/ibissource/iaf/pull/393#pullrequestreview-380190676", "createdAt": "2020-03-24T10:46:34Z", "commit": {"oid": "9b0bc41fd941948909eb200fb8d5412a0457775a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQxMDo0NjozNFrOF6qh4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxMTo1Nzo0N1rOF-SL9A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzA1ODUzMA==", "bodyText": "Is dit nodig voor deze aanpassing?", "url": "https://github.com/ibissource/iaf/pull/393#discussion_r397058530", "createdAt": "2020-03-24T10:46:34Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/extensions/test/IbisTester.java", "diffHunk": "@@ -141,9 +141,13 @@ public void initTest() {\n \t\tSystem.setProperty(\"log.level\", \"INFO\");\n \t\tSystem.setProperty(\"dtap.stage\", \"LOC\");\n \t\tSystem.setProperty(\"application.server.type\", \"IBISTEST\");\n+\t\tSystem.setProperty(\"application.server.type.custom\", \"\");\n \t\tSystem.setProperty(\"flow.create.url\", \"\");\n \t\tdebug(\"***start***\");\n-\t\tibisContext = null;\n+\t\tif (ibisContext != null) {\n+\t\t\tibisContext.destroy();\n+\t\t\tibisContext = null;\n+\t\t}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b0bc41fd941948909eb200fb8d5412a0457775a"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzA1OTQyMw==", "bodyText": "Bij wat voor replacements gebeurt dit dan? En waarom dan?", "url": "https://github.com/ibissource/iaf/pull/393#discussion_r397059423", "createdAt": "2020-03-24T10:48:13Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/pipes/AbstractPipe.java", "diffHunk": "@@ -497,6 +498,16 @@ public boolean isPreserveInput() {\n \t\treturn preserveInput;\n \t}\n \n+\t@IbisDoc({\"6\", \"when set, the original input (which will be replaced) is stored under this session key\", \"\"})", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b0bc41fd941948909eb200fb8d5412a0457775a"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzA2MDg5Ng==", "bodyText": "Je kan toch ook gewoon een parameter aan je configuratie toevoegen als je hem nodig hebt.\nWaarom moet dit iets speciaals zijn?", "url": "https://github.com/ibissource/iaf/pull/393#discussion_r397060896", "createdAt": "2020-03-24T10:50:48Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/senders/XsltSender.java", "diffHunk": "@@ -95,6 +96,13 @@\n \t */\n \t@Override\n \tpublic void configure() throws ConfigurationException {\n+\t\tParameterList parameterList = getParameterList();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzU5NDY0NQ=="}, "originalCommit": {"oid": "c66e0f16b6cb16774423dcb1aa7ac03bcf9465f1"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDgzODUwMw==", "bodyText": "Ik zie dat je ERROR_1, ERROR_2 e.d. als code gebruikt. Ik denk dat het handiger is om in die gevallen alleen 'ERROR' te gebruiken, omdat je dan xpath queries kan doen als /DetailList/Detail[Code='ERROR']/Text.", "url": "https://github.com/ibissource/iaf/pull/393#discussion_r400838503", "createdAt": "2020-03-31T11:28:54Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/resources/xml/xsl/esb/soapBody.xsl", "diffHunk": "@@ -141,22 +155,62 @@\n \t\t\t\t\t\t\t\t\t</xsl:element>\n \t\t\t\t\t\t\t\t</xsl:element>\n \t\t\t\t\t\t\t</xsl:element>\n-\t\t\t\t\t\t\t<xsl:if test=\"string-length($errorDetailCode)&gt;0\">\n-\t\t\t\t\t\t\t\t<xsl:element name=\"DetailList\" namespace=\"{$ns}\">\n-\t\t\t\t\t\t\t\t\t<xsl:element name=\"Detail\" namespace=\"{$ns}\">\n-\t\t\t\t\t\t\t\t\t\t<xsl:element name=\"Code\" namespace=\"{$ns}\">\n-\t\t\t\t\t\t\t\t\t\t\t<xsl:value-of select=\"$errorDetailCode\"/>\n-\t\t\t\t\t\t\t\t\t\t</xsl:element>\n-\t\t\t\t\t\t\t\t\t\t<xsl:if test=\"string-length($errorDetailText)&gt;0\">\n+\t\t\t\t\t\t\t<xsl:choose>\n+\t\t\t\t\t\t\t\t<xsl:when test=\"$addErrorsFromInputMessage='true' and string-length($errorRootTag)&gt;0 and $rootTag='errorMessage'\">\n+\t\t\t\t\t\t\t\t\t<xsl:element name=\"DetailList\" namespace=\"{$ns}\">\n+\t\t\t\t\t\t\t\t\t\t<xsl:element name=\"Detail\" namespace=\"{$ns}\">\n+\t\t\t\t\t\t\t\t\t\t\t<xsl:element name=\"Code\" namespace=\"{$ns}\">\n+\t\t\t\t\t\t\t\t\t\t\t\t<xsl:text>ERROR_1</xsl:text>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cdc69f2a38e499a04aa6b71d4b449e4155d098d3"}, "originalPosition": 59}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDg1NDAwNA==", "bodyText": "Hier gebruik je storeReplacedInputInSessionKey i.c.m. getInputFromSessionKey=\"xmlFailureReason\".\nVervolgens gebruik je de originele input als parameter.\nDat kan natuurlijk ook andersom, dat je de orignele input de input laat zijn, en de failure reason als parameter.\nDan is storeReplacedInputInSessionKey niet nodig.", "url": "https://github.com/ibissource/iaf/pull/393#discussion_r400854004", "createdAt": "2020-03-31T11:57:47Z", "author": {"login": "gvanbrakel"}, "path": "test/src/main/configurations/MainConfig/ConfigurationSoapValidator.xml", "diffHunk": "@@ -0,0 +1,42 @@\n+\n+<adapter name=\"SoapValidator\">\n+\t<receiver className=\"nl.nn.adapterframework.receivers.GenericReceiver\" name=\"SoapValidator\">\n+\t\t<listener className=\"nl.nn.adapterframework.receivers.JavaListener\" serviceName=\"ibis4test-SoapValidator\" throwException=\"false\" />\n+\t</receiver>\n+\t<pipeline firstPipe=\"HelloWorld\">\n+\t\t<exits>\n+\t\t\t<exit path=\"EXIT\" state=\"success\" />\n+\t\t</exits>\n+\t\t<inputValidator className=\"nl.nn.adapterframework.soap.SoapValidator\" schemaLocation=\"http://api.nn.nl/HelloWorld /SoapValidator/xsd/HelloWorld.xsd\" soapBody=\"HelloWorld_Request\" addNamespaceToSchema=\"true\">\n+\t\t\t<forward name=\"failure\" path=\"InputValidatorFailure\" />\n+\t\t</inputValidator>\n+\t\t<inputWrapper className=\"nl.nn.adapterframework.extensions.api.ApiSoapWrapperPipe\" direction=\"unwrap\" />\n+\t\t<outputWrapper className=\"nl.nn.adapterframework.extensions.api.ApiSoapWrapperPipe\" outputNamespace=\"http://api.nn.nl/HelloWorld\" root=\"HelloWorld_Response\" />\n+\t\t<outputValidator className=\"nl.nn.adapterframework.soap.SoapValidator\" schemaLocation=\"http://api.nn.nl/HelloWorld /SoapValidator/xsd/HelloWorld.xsd\" soapBody=\"HelloWorld_Response\" addNamespaceToSchema=\"true\">\n+\t\t\t<forward name=\"failure\" path=\"OutputValidatorFailure\" />\n+\t\t</outputValidator>\n+\t\t<pipe name=\"InputValidatorFailure\" className=\"nl.nn.adapterframework.pipes.XsltPipe\" styleSheetName=\"xml/xsl/esb/soapBody.xsl\" xslt2=\"true\" getInputFromSessionKey=\"xmlFailureReason\" storeReplacedInputInSessionKey=\"replacedInput\">\n+\t\t\t<param name=\"cmhVersion\" value=\"1\" />\n+\t\t\t<param name=\"errorCode\" value=\"ERR6003\" />\n+\t\t\t<param name=\"errorReason\" value=\"Invalid Request\" />\n+\t\t\t<param name=\"errorRootTag\" value=\"HelloWorld_Response\" />\n+\t\t\t<param name=\"originalMessage\" sessionKey=\"replacedInput\" />\n+\t\t\t<param name=\"addErrorsFromInputMessage\" value=\"true\" />\n+\t\t\t<param name=\"operationName\" value=\"Test/SoapValidator\" />\n+\t\t\t<param name=\"paradigm\" value=\"Response\" />\n+\t\t\t<forward name=\"success\" path=\"EXIT\" />\n+\t\t</pipe>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cdc69f2a38e499a04aa6b71d4b449e4155d098d3"}, "originalPosition": 28}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f3cc4d3249bd871aba9c1c44466b96f0f2039f6", "author": {"user": {"login": "leeuw73", "name": null}}, "url": "https://github.com/ibissource/iaf/commit/7f3cc4d3249bd871aba9c1c44466b96f0f2039f6", "committedDate": "2020-04-03T17:45:42Z", "message": "Remove attribute storeReplacedInputInSessionKey\n\nAnd remove ERROR counter suffix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5d715ba741057dd81ab14fe53cbc60d8aa394d85", "author": {"user": {"login": "leeuw73", "name": null}}, "url": "https://github.com/ibissource/iaf/commit/5d715ba741057dd81ab14fe53cbc60d8aa394d85", "committedDate": "2020-04-04T07:48:36Z", "message": "Forgotten Larva scenario"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzNzc2NDI1", "url": "https://github.com/ibissource/iaf/pull/393#pullrequestreview-393776425", "createdAt": "2020-04-15T13:33:05Z", "commit": {"oid": "5d715ba741057dd81ab14fe53cbc60d8aa394d85"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ee2e3c197bf8dbb6bf92309c58931e1e0981feb", "author": {"user": {"login": "gvanbrakel", "name": "Gerrit van Brakel"}}, "url": "https://github.com/ibissource/iaf/commit/6ee2e3c197bf8dbb6bf92309c58931e1e0981feb", "committedDate": "2020-04-15T13:35:47Z", "message": "Merge branch 'master' into EsbSoapBodyErrorDetails"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1389, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}