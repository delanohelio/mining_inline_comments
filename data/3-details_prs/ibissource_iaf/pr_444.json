{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc4MjU5MTA1", "number": 444, "title": "Senders using message", "bodyText": "In 7.5, all senders are String-in, String-out.\nThe proposed change makes this Message-in, Message-out.\nMessage is multi-faced object; it can return its contents as a String, byte array, InputStream, Reader, XML Source or InputSource.\nAlso the ParameterResolutionContext argument is replaced by IPipeLineSession, to make Sender and Pipe methods more similar", "createdAt": "2020-02-21T12:27:54Z", "url": "https://github.com/ibissource/iaf/pull/444", "merged": true, "mergeCommit": {"oid": "e12e15cc94337841540fb7d7e34a1c9f705fa621"}, "closed": true, "closedAt": "2020-03-11T13:10:06Z", "author": {"login": "gvanbrakel"}, "timelineItems": {"totalCount": 23, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcDOO-cgH2gAyMzc4MjU5MTA1OjUwMjdkMWM2NjYxNzIwYzk3M2QyZmVlZDg5NDBhYTEyODMyOTg5YjM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcMm24vgFqTM3Mjc0MDI4OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5027d1c6661720c973d2feed8940aa12832989b3", "author": {"user": null}, "url": "https://github.com/ibissource/iaf/commit/5027d1c6661720c973d2feed8940aa12832989b3", "committedDate": "2020-02-11T09:22:53Z", "message": "Make all Senders Message-in Message-out"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4493ed072cc5484af2c22def81a2c13b35bd16e7", "author": {"user": null}, "url": "https://github.com/ibissource/iaf/commit/4493ed072cc5484af2c22def81a2c13b35bd16e7", "committedDate": "2020-02-11T09:27:51Z", "message": "Support for Senders Message-in Message-out"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aac88ebcde03192fae3f8c2e10056079d691576e", "author": {"user": null}, "url": "https://github.com/ibissource/iaf/commit/aac88ebcde03192fae3f8c2e10056079d691576e", "committedDate": "2020-02-11T16:46:42Z", "message": "Remove PostboxSenderPipe"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "14b8f43b00c61ff730f7df7be735f12effa46116", "author": {"user": null}, "url": "https://github.com/ibissource/iaf/commit/14b8f43b00c61ff730f7df7be735f12effa46116", "committedDate": "2020-02-14T09:29:54Z", "message": "Simplify ParameterResolutionContext"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ad74d8eca187d0990adec7b125ef03ab54e517ac", "author": {"user": null}, "url": "https://github.com/ibissource/iaf/commit/ad74d8eca187d0990adec7b125ef03ab54e517ac", "committedDate": "2020-02-14T09:44:09Z", "message": "Merge branch 'master' into SendersUsingMessage"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4eda5a24a3c7335b289b8b91967f0f723ad8338a", "author": {"user": null}, "url": "https://github.com/ibissource/iaf/commit/4eda5a24a3c7335b289b8b91967f0f723ad8338a", "committedDate": "2020-02-17T14:08:50Z", "message": "ISenderWithParameters met session i.p.v. ParameterResolutionContext"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3e5b93b787b86a2d8ba6c5eee6eabc85425ed65b", "author": {"user": null}, "url": "https://github.com/ibissource/iaf/commit/3e5b93b787b86a2d8ba6c5eee6eabc85425ed65b", "committedDate": "2020-02-17T16:23:14Z", "message": "Make sendMessage of ISender and ISenderWithParameters equal"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "181b50ae962200a1135a5528e2281aacf589e7cf", "author": {"user": null}, "url": "https://github.com/ibissource/iaf/commit/181b50ae962200a1135a5528e2281aacf589e7cf", "committedDate": "2020-02-17T16:36:00Z", "message": "Merge branch 'master' into SendersUsingMessage\n\nConflicts:\n\tcore/src/test/java/nl/nn/adapterframework/http/HttpSenderTest.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "79ab02135f9bf1620c345db0dc17fc7d253cb528", "author": {"user": {"login": "gvanbrakel", "name": "Gerrit van Brakel"}}, "url": "https://github.com/ibissource/iaf/commit/79ab02135f9bf1620c345db0dc17fc7d253cb528", "committedDate": "2020-02-21T11:18:38Z", "message": "Merge master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f1cc0186a75adec4082a9c2a9299bf71912c686", "author": {"user": {"login": "gvanbrakel", "name": "Gerrit van Brakel"}}, "url": "https://github.com/ibissource/iaf/commit/5f1cc0186a75adec4082a9c2a9299bf71912c686", "committedDate": "2020-02-21T12:25:15Z", "message": "Leftovers from merge"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "51d1056f627c0b828548a1ba7d16338553c80e71", "author": {"user": {"login": "gvanbrakel", "name": "Gerrit van Brakel"}}, "url": "https://github.com/ibissource/iaf/commit/51d1056f627c0b828548a1ba7d16338553c80e71", "committedDate": "2020-02-21T12:31:23Z", "message": "Another leftover from merging"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYyNjA3MzM2", "url": "https://github.com/ibissource/iaf/pull/444#pullrequestreview-362607336", "createdAt": "2020-02-21T12:51:23Z", "commit": {"oid": "51d1056f627c0b828548a1ba7d16338553c80e71"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQxMjo1MToyNFrOFs15Yg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQxMjo1MToyNFrOFs15Yg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjU2NDcwNg==", "bodyText": "Let op: equalsIgnoreCase", "url": "https://github.com/ibissource/iaf/pull/444#discussion_r382564706", "createdAt": "2020-02-21T12:51:24Z", "author": {"login": "gvanbrakel"}, "path": "core/src/main/java/nl/nn/adapterframework/pipes/EtagHandlerPipe.java", "diffHunk": "@@ -90,10 +90,9 @@ public PipeRunResult doPipe(Object input, IPipeLineSession session) throws PipeR\n \t\t\ttry {\n \t\t\t\tpvl = prc.getValues(getParameterList());\n \t\t\t\tif (pvl != null) {\n-\t\t\t\t\tfor (int i = 0; i < parameterList.size(); i++) {\n-\t\t\t\t\t\tParameter parameter = parameterList.getParameter(i);\n-\t\t\t\t\t\tif(\"uriPattern\".equalsIgnoreCase(parameter.getName()))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "51d1056f627c0b828548a1ba7d16338553c80e71"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe65a8623dbd0b08d82a9c5e07e51a52d4160adf", "author": {"user": {"login": "gvanbrakel", "name": "Gerrit van Brakel"}}, "url": "https://github.com/ibissource/iaf/commit/fe65a8623dbd0b08d82a9c5e07e51a52d4160adf", "committedDate": "2020-02-21T14:29:10Z", "message": "Some small fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d962d41f877cf1b718f596b64d191646f1cec823", "author": {"user": {"login": "gvanbrakel", "name": "Gerrit van Brakel"}}, "url": "https://github.com/ibissource/iaf/commit/d962d41f877cf1b718f596b64d191646f1cec823", "committedDate": "2020-02-21T14:59:11Z", "message": "fix cmis refactor bug"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "85fdd6900dd21d07ab473310170e6068bf511a3f", "author": {"user": {"login": "gvanbrakel", "name": "Gerrit van Brakel"}}, "url": "https://github.com/ibissource/iaf/commit/85fdd6900dd21d07ab473310170e6068bf511a3f", "committedDate": "2020-03-02T10:03:16Z", "message": "Streaming senders without correlationID"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce07cbe390d6d0aa16117e49fe21fdba72a4d3ef", "author": {"user": {"login": "gvanbrakel", "name": "Gerrit van Brakel"}}, "url": "https://github.com/ibissource/iaf/commit/ce07cbe390d6d0aa16117e49fe21fdba72a4d3ef", "committedDate": "2020-03-02T10:32:31Z", "message": "Fix unit test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ad80fc6d57456359cf57a1422e374467eea376e", "author": {"user": {"login": "gvanbrakel", "name": "Gerrit van Brakel"}}, "url": "https://github.com/ibissource/iaf/commit/0ad80fc6d57456359cf57a1422e374467eea376e", "committedDate": "2020-03-02T12:34:54Z", "message": "Merge branch 'master' into SendersUsingMessage"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ccdc548c4d9b4fd11b2832a57279c72c3f66080d", "author": {"user": {"login": "gvanbrakel", "name": "Gerrit van Brakel"}}, "url": "https://github.com/ibissource/iaf/commit/ccdc548c4d9b4fd11b2832a57279c72c3f66080d", "committedDate": "2020-03-02T12:38:54Z", "message": "Fix merge issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "54635785b991987b6ec4daafb00e713d23738f05", "author": {"user": {"login": "gvanbrakel", "name": "Gerrit van Brakel"}}, "url": "https://github.com/ibissource/iaf/commit/54635785b991987b6ec4daafb00e713d23738f05", "committedDate": "2020-03-02T17:11:48Z", "message": "remove correlationId parameter from sender.sendMessage()"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c0f991da12ebdf4fe5119d4209081341cd2ab96f", "author": {"user": {"login": "gvanbrakel", "name": "Gerrit van Brakel"}}, "url": "https://github.com/ibissource/iaf/commit/c0f991da12ebdf4fe5119d4209081341cd2ab96f", "committedDate": "2020-03-03T09:06:52Z", "message": "Dangling commits"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcyMTI2ODE1", "url": "https://github.com/ibissource/iaf/pull/444#pullrequestreview-372126815", "createdAt": "2020-03-10T16:37:38Z", "commit": {"oid": "c0f991da12ebdf4fe5119d4209081341cd2ab96f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxNjo0MDoyOFrOF0Xazg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxMToxODoxMlrOF0ywjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDQ1Mzk2Ng==", "bodyText": "Hier zat, maar nu niet meer, een null check op prc!", "url": "https://github.com/ibissource/iaf/pull/444#discussion_r390453966", "createdAt": "2020-03-10T16:40:28Z", "author": {"login": "nielsm5"}, "path": "core/src/main/java/nl/nn/adapterframework/jdbc/JdbcQuerySenderBase.java", "diffHunk": "@@ -262,18 +262,18 @@ protected String sendMessage(Connection connection, String correlationID, Messag\n \t\t\t\tif (StringUtils.isEmpty(getBlobSessionKey())) {\n \t\t\t\t\treturn executeUpdateBlobQuery(statement,message.asInputStream());\n \t\t\t\t} \n-\t\t\t\treturn executeUpdateBlobQuery(statement,prc==null?null:prc.getSession().get(getBlobSessionKey()));\n+\t\t\t\treturn executeUpdateBlobQuery(statement,session.get(getBlobSessionKey()));\n \t\t\t} \n \t\t\tif (\"updateClob\".equalsIgnoreCase(queryContext.getQueryType())) {\n \t\t\t\tif (StringUtils.isEmpty(getClobSessionKey())) {\n \t\t\t\t\treturn executeUpdateClobQuery(statement,message.asReader());\n \t\t\t\t} \n-\t\t\t\treturn executeUpdateClobQuery(statement,prc==null?null:prc.getSession().get(getClobSessionKey()));\n+\t\t\t\treturn executeUpdateClobQuery(statement,session.get(getClobSessionKey()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c0f991da12ebdf4fe5119d4209081341cd2ab96f"}, "originalPosition": 92}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDQ2MDk4MQ==", "bodyText": "De session mag niet leeg zijn, anders gaat de hele sender kaduuk...", "url": "https://github.com/ibissource/iaf/pull/444#discussion_r390460981", "createdAt": "2020-03-10T16:50:39Z", "author": {"login": "nielsm5"}, "path": "core/src/main/java/nl/nn/adapterframework/http/HttpSender.java", "diffHunk": "@@ -435,7 +434,7 @@ protected FormBodyPart elementToFormBodyPart(Element element, IPipeLineSession s\n \t}\n \n \t@Override\n-\tprotected String extractResult(HttpResponseHandler responseHandler, ParameterResolutionContext prc) throws SenderException, IOException {\n+\tprotected String extractResult(HttpResponseHandler responseHandler, IPipeLineSession session) throws SenderException, IOException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c0f991da12ebdf4fe5119d4209081341cd2ab96f"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDQ2MjY3Mw==", "bodyText": "Waarom hier null ipv message input ?", "url": "https://github.com/ibissource/iaf/pull/444#discussion_r390462673", "createdAt": "2020-03-10T16:53:08Z", "author": {"login": "nielsm5"}, "path": "core/src/main/java/nl/nn/adapterframework/filesystem/FileSystemPipe.java", "diffHunk": "@@ -122,12 +122,11 @@ public MessageOutputStream provideOutputStream(String correlationID, IPipeLineSe\n \t@Override\n \tpublic PipeRunResult doPipe (Object input, IPipeLineSession session, IOutputStreamingSupport next) throws PipeRunException {\n \t\tParameterList paramList = getParameterList();\n-\t\tParameterResolutionContext prc = new ParameterResolutionContext(input, session);\n \t\tParameterValueList pvl=null;\n \t\t\n \t\ttry {\n \t\t\tif (paramList != null) {\n-\t\t\t\tpvl = prc.getValues(paramList);\n+\t\t\t\tpvl = paramList.getValues(null, session);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c0f991da12ebdf4fe5119d4209081341cd2ab96f"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDg5MjA0Ng==", "bodyText": "Hier wel een mooie spatie!", "url": "https://github.com/ibissource/iaf/pull/444#discussion_r390892046", "createdAt": "2020-03-11T10:58:58Z", "author": {"login": "nielsm5"}, "path": "core/src/test/java/nl/nn/adapterframework/pipes/ForEachChildElementPipeTest.java", "diffHunk": "@@ -125,12 +125,12 @@ protected ISender getElementRenderer(final SwitchCounter sc, final Exception e)\n     \tEchoSender sender = new EchoSender() {\n \n \t\t\t@Override\n-\t\t\tpublic String sendMessage(String correlationID, String message, ParameterResolutionContext prc) throws SenderException, TimeOutException {\n+\t\t\tpublic Message sendMessage(Message message, IPipeLineSession session) throws SenderException, TimeOutException, IOException {\n \t\t\t\tif (sc!=null) sc.mark(\"out\");\n-\t\t\t\tif (message.contains(\"error\")) {\n-\t\t\t\t\tthrow new SenderException(\"Exception triggered\",e);\n+\t\t\t\tif (message.asString().contains(\"error\")) {\n+\t\t\t\t\tthrow new SenderException(\"Exception triggered\", e);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c0f991da12ebdf4fe5119d4209081341cd2ab96f"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDg5MzMwMg==", "bodyText": "Deze moet weg!", "url": "https://github.com/ibissource/iaf/pull/444#discussion_r390893302", "createdAt": "2020-03-11T11:01:16Z", "author": {"login": "nielsm5"}, "path": "core/src/main/java/nl/nn/adapterframework/webcontrol/pipes/ShowConfig.java", "diffHunk": "@@ -143,9 +144,8 @@ private String retrieveAllConfigs(IPipeLineSession session)\n \t\t\t\tqs.setIncludeFieldDefinition(false);\n \t\t\t\tqs.configure();\n \t\t\t\tqs.open();\n-\t\t\t\tParameterResolutionContext prc = new ParameterResolutionContext(\n-\t\t\t\t\t\t\"dummy\", session);\n-\t\t\t\tString queryResult = qs.sendMessage(\"dummy\", \"dummy\", prc);\n+\t\t\t\tParameterResolutionContext prc = new ParameterResolutionContext (\"dummy\", session);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c0f991da12ebdf4fe5119d4209081341cd2ab96f"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDg5MzUzOA==", "bodyText": "Deze moet weg!", "url": "https://github.com/ibissource/iaf/pull/444#discussion_r390893538", "createdAt": "2020-03-11T11:01:43Z", "author": {"login": "nielsm5"}, "path": "core/src/main/java/nl/nn/adapterframework/webcontrol/pipes/ExecuteJdbcProperties.java", "diffHunk": "@@ -167,9 +167,9 @@ private String doPost(IPipeLineSession session) throws PipeRunException {\n \t\t\t\tqs.addParameter(param);\n \t\t\t\tqs.configure();\n \t\t\t\tqs.open();\n-\t\t\t\tParameterResolutionContext prc = new ParameterResolutionContext(\n+\t\t\t\tParameterResolutionContext prc = new ParameterResolutionContext (", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c0f991da12ebdf4fe5119d4209081341cd2ab96f"}, "originalPosition": 54}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDg5NTgwNg==", "bodyText": "Wat is id? Waarom hebben we id, messageId, cid en tcid!?", "url": "https://github.com/ibissource/iaf/pull/444#discussion_r390895806", "createdAt": "2020-03-11T11:06:04Z", "author": {"login": "nielsm5"}, "path": "ifsa/src/main/java/nl/nn/adapterframework/webcontrol/pipes/TestIfsaService.java", "diffHunk": "@@ -181,7 +183,9 @@ private String processMessage(String applicationId, String serviceId,\n \t\tsender.setMessageProtocol(messageProtocol);\n \t\tsender.configure();\n \t\tsender.open();\n-\t\treturn sender.sendMessage(\"testmsg_\" + Misc.createUUID(), message);\n+\t\tPipeLineSessionBase session = new PipeLineSessionBase();\n+\t\tsession.put(\"id\", \"testmsg_\" + Misc.createUUID());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c0f991da12ebdf4fe5119d4209081341cd2ab96f"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDkwMDE5NA==", "bodyText": "Hier moet je de message meegeven. je maakt er nu een string van, en 2 regels later weer een message", "url": "https://github.com/ibissource/iaf/pull/444#discussion_r390900194", "createdAt": "2020-03-11T11:14:48Z", "author": {"login": "nielsm5"}, "path": "sap/src/main/java/nl/nn/adapterframework/extensions/sap/jco2/IdocSender.java", "diffHunk": "@@ -65,14 +66,16 @@\n \n \t\n \t@Override\n-\tpublic String sendMessage(String correlationID, String message, ParameterResolutionContext prc) throws SenderException, TimeOutException {\n+\tpublic Message sendMessage(Message message, IPipeLineSession session) throws SenderException, TimeOutException {\n \t\tString tid=null;\n \t\ttry {\n \t\t\tParameterValueList pvl = null;\n-\t\t\tpvl=prc.getValues(paramList);\n+\t\t\tif (paramList!=null) {\n+\t\t\t\tpvl = paramList.getValues(message, session);\n+\t\t\t}\n \t\t\tSapSystem sapSystem = getSystem(pvl);\n \t\t\t\n-\t\t\tIDoc.Document idoc = parseIdoc(sapSystem,message);\n+\t\t\tIDoc.Document idoc = parseIdoc(sapSystem,message.asString());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c0f991da12ebdf4fe5119d4209081341cd2ab96f"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDkwMTY3MA==", "bodyText": "Dit moet opgeschoond worden. Je doet 2x het zelfde, ook al is de session null", "url": "https://github.com/ibissource/iaf/pull/444#discussion_r390901670", "createdAt": "2020-03-11T11:17:42Z", "author": {"login": "nielsm5"}, "path": "larva/src/main/java/nl/nn/adapterframework/testtool/SenderThread.java", "diffHunk": "@@ -34,22 +39,26 @@\n \t\tlog.debug(\"Request: \" + request);\n     }\n \n-\tSenderThread(ISenderWithParameters senderWithParameters, String request, ParameterResolutionContext parameterResolutionContext, boolean convertExceptionToMessage) {\n+\tSenderThread(ISenderWithParameters senderWithParameters, String request, IPipeLineSession session, boolean convertExceptionToMessage) {\n \t\tname = senderWithParameters.getName();\n \t\tthis.senderWithParameters = senderWithParameters;\n-\t\tthis.parameterResolutionContext = parameterResolutionContext;\n \t\tthis.request = request;\n+\t\tthis.session = session;\n \t\tthis.convertExceptionToMessage = convertExceptionToMessage;\n \t\tlog.debug(\"Creating SenderThread for ISenderWithParameters '\" + name + \"'\");\n \t\tlog.debug(\"Request: \" + request);\n \t}\n \n     public void run() {\n         try {\n+        \tif (session==null) {\n+        \t\tsession = new PipeLineSessionBase();\n+        \t}\n+        \tsession.put(IPipeLineSession.businessCorrelationIdKey, TestTool.TESTTOOL_CORRELATIONID);\n         \tif (senderWithParameters == null) {\n-\t\t\t\tresponse = sender.sendMessage(TestTool.TESTTOOL_CORRELATIONID, request);\n+\t\t\t\tresponse = sender.sendMessage(new Message(request), session).asString();\n         \t} else {\n-\t\t\t\tresponse = senderWithParameters.sendMessage(TestTool.TESTTOOL_CORRELATIONID, request, parameterResolutionContext);\n+\t\t\t\tresponse = senderWithParameters.sendMessage(new Message(request),  session).asString();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c0f991da12ebdf4fe5119d4209081341cd2ab96f"}, "originalPosition": 62}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDkwMTkwMQ==", "bodyText": "Dit klopt ook niet. Moet 1 functie zijn met session, ongeacht of hij leeg is.", "url": "https://github.com/ibissource/iaf/pull/444#discussion_r390901901", "createdAt": "2020-03-11T11:18:12Z", "author": {"login": "nielsm5"}, "path": "larva/src/main/java/nl/nn/adapterframework/testtool/TestTool.java", "diffHunk": "@@ -2494,12 +2500,12 @@ private static int executeSenderWrite(String stepDisplayName, Map<String, Map<St\n \t\tMap senderInfo = (Map)queues.get(queueName);\n \t\tISender sender = (ISender)senderInfo.get(senderType + \"Sender\");\n \t\tBoolean convertExceptionToMessage = (Boolean)senderInfo.get(\"convertExceptionToMessage\");\n-\t\tParameterResolutionContext parameterResolutionContext = (ParameterResolutionContext)senderInfo.get(\"parameterResolutionContext\");\n+\t\tIPipeLineSession session = (IPipeLineSession)senderInfo.get(\"session\");\n \t\tSenderThread senderThread;\n-\t\tif (parameterResolutionContext == null) {\n+\t\tif (session == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c0f991da12ebdf4fe5119d4209081341cd2ab96f"}, "originalPosition": 169}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c47d7412d083da366ec8b04025202bdd35b4cca3", "author": {"user": {"login": "gvanbrakel", "name": "Gerrit van Brakel"}}, "url": "https://github.com/ibissource/iaf/commit/c47d7412d083da366ec8b04025202bdd35b4cca3", "committedDate": "2020-03-11T12:49:41Z", "message": "Fixed issues"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcyNzQwMjg5", "url": "https://github.com/ibissource/iaf/pull/444#pullrequestreview-372740289", "createdAt": "2020-03-11T13:09:31Z", "commit": {"oid": "c47d7412d083da366ec8b04025202bdd35b4cca3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1403, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}