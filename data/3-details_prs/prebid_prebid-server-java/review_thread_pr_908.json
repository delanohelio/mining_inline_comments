{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg1MTEzODQw", "number": 908, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxMDozNjoyNVrOEjEH2g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxMDozNjoyNVrOEjEH2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1MjAzMTYyOnYy", "diffSide": "RIGHT", "path": "src/main/java/org/prebid/server/auction/OrtbTypesResolver.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxMDozNjoyNVrOHRN0eA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxMDozNjoyNVrOHRN0eA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzgxNDI2NA==", "bodyText": "Pls fix typo.", "url": "https://github.com/prebid/prebid-server-java/pull/908#discussion_r487814264", "createdAt": "2020-09-14T10:36:25Z", "author": {"login": "rpanchyk"}, "path": "src/main/java/org/prebid/server/auction/OrtbTypesResolver.java", "diffHunk": "@@ -95,52 +132,61 @@ void normalizeStandardFpdFields(JsonNode fpdContainerNode, List<String> warnings\n     private void normalizeRequestFpdFields(JsonNode fpdContainerNode, List<String> warnings) {\n         if (fpdContainerNode != null && fpdContainerNode.isObject()) {\n             final ObjectNode fpdContainerObjectNode = (ObjectNode) fpdContainerNode;\n+            final String bidRequestPrefix = BIDREQUEST + \".\";\n             updateWithNormalizedNode(fpdContainerObjectNode, USER, FIRST_ARRAY_ELEMENT_REQUEST_FIELDS,\n-                    COMMA_SEPARATED_ELEMENT_FIELDS, BIDREQUEST_PREFIX, warnings);\n+                    COMMA_SEPARATED_ELEMENT_FIELDS, bidRequestPrefix, warnings);\n             updateWithNormalizedNode(fpdContainerObjectNode, APP, FIRST_ARRAY_ELEMENT_REQUEST_FIELDS,\n-                    COMMA_SEPARATED_ELEMENT_FIELDS, BIDREQUEST_PREFIX, warnings);\n+                    COMMA_SEPARATED_ELEMENT_FIELDS, bidRequestPrefix, warnings);\n             updateWithNormalizedNode(fpdContainerObjectNode, SITE, FIRST_ARRAY_ELEMENT_REQUEST_FIELDS,\n-                    COMMA_SEPARATED_ELEMENT_FIELDS, BIDREQUEST_PREFIX, warnings);\n+                    COMMA_SEPARATED_ELEMENT_FIELDS, bidRequestPrefix, warnings);\n         }\n     }\n \n     private void updateWithNormalizedNode(ObjectNode containerNode, String nodeNameToNormalize,\n                                           Map<String, Set<String>> firstArrayElementsFields,\n                                           Map<String, Set<String>> commaSeparatedElementFields,\n-                                          String nodePrefix,\n-                                          List<String> warnings) {\n+                                          String nodePrefix, List<String> warnings) {\n         final JsonNode normalizedNode = normalizeNode(containerNode.get(nodeNameToNormalize), nodeNameToNormalize,\n                 firstArrayElementsFields, commaSeparatedElementFields, nodePrefix, warnings);\n         if (normalizedNode != null) {\n             containerNode.set(nodeNameToNormalize, normalizedNode);\n+        } else {\n+            containerNode.remove(nodeNameToNormalize);\n         }\n     }\n \n     private JsonNode normalizeNode(JsonNode containerNode, String nodeName,\n                                    Map<String, Set<String>> firstArrayElementsFields,\n                                    Map<String, Set<String>> commaSeparatedElementFields,\n-                                   String nodePrefix,\n-                                   List<String> warnings) {\n-        if (containerNode != null && containerNode.isObject()) {\n-            final ObjectNode containerObjectNode = (ObjectNode) containerNode;\n-\n-            CollectionUtils.emptyIfNull(firstArrayElementsFields.get(nodeName))\n-                    .forEach(fieldName -> updateWithNormalizedField(containerObjectNode, fieldName,\n-                            () -> toFirstElementTextNode(containerObjectNode, fieldName, nodeName, nodePrefix,\n-                                    warnings)));\n-\n-            CollectionUtils.emptyIfNull(commaSeparatedElementFields.get(nodeName))\n-                    .forEach(fieldName -> updateWithNormalizedField(containerObjectNode, fieldName,\n-                            () -> toCommaSeparatedTextNode(containerObjectNode, fieldName, nodeName, nodePrefix,\n-                                    warnings)));\n+                                   String nodePrefix, List<String> warnings) {\n+        if (containerNode != null) {\n+            if (containerNode.isObject()) {\n+                final ObjectNode containerObjectNode = (ObjectNode) containerNode;\n+\n+                CollectionUtils.emptyIfNull(firstArrayElementsFields.get(nodeName))\n+                        .forEach(fieldName -> updateWithNormalizedField(containerObjectNode, fieldName,\n+                                () -> toFirstElementTextNode(containerObjectNode, fieldName, nodeName, nodePrefix,\n+                                        warnings)));\n+\n+                CollectionUtils.emptyIfNull(commaSeparatedElementFields.get(nodeName))\n+                        .forEach(fieldName -> updateWithNormalizedField(containerObjectNode, fieldName,\n+                                () -> toCommaSeparatedTextNode(containerObjectNode, fieldName, nodeName, nodePrefix,\n+                                        warnings)));\n+            } else {\n+                warnings.add(String.format(\"FDP warning: %s%s field ignored. Expected type is object, but was `%s`.\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "80ff48336b43e7c3ebab91aca46ddce684e191e0"}, "originalPosition": 164}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3888, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}