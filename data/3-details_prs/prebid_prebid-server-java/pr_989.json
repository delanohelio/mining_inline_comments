{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE0MTM0NTY3", "number": 989, "title": "Optionally read IFA value and add it the the request url (Adhese)", "bodyText": "Next to the referer and the consent string we also want to send the Device IFA (if present) to our Adhese endpoint - if present.", "createdAt": "2020-11-02T15:25:36Z", "url": "https://github.com/prebid/prebid-server-java/pull/989", "merged": true, "mergeCommit": {"oid": "2d627aa820e060adaf27eb57f5597a8e42f443ad"}, "closed": true, "closedAt": "2020-11-18T09:34:07Z", "author": {"login": "sander-adhese"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdYmJrhgH2gAyNTE0MTM0NTY3OjdiZGZjOThhNjlkYjEyMDlmZDg1OTRhMjVkYTQ2NjhiNDkxNzFhMTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABddqzGaAFqTUzMzI1NjA0Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7bdfc98a69db1209fd8594a25da4668b49171a13", "author": {"user": {"login": "sander-adhese", "name": "Sander"}}, "url": "https://github.com/prebid/prebid-server-java/commit/7bdfc98a69db1209fd8594a25da4668b49171a13", "committedDate": "2020-11-02T15:18:23Z", "message": "Optionally read IFA value and add it the the request url (Adhese)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxODQ4NDg3", "url": "https://github.com/prebid/prebid-server-java/pull/989#pullrequestreview-521848487", "createdAt": "2020-11-02T17:29:07Z", "commit": {"oid": "7bdfc98a69db1209fd8594a25da4668b49171a13"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxNzoyOTowOFrOHsOqoQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxNzoyOTowOFrOHsOqoQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjEzOTY4MQ==", "bodyText": "Minor. Maybe one line will be better\n return device != null && StringUtils.isNotBlank(device.getIfa())\n? String.format(\"%s%s\", QUERY_PARAMETER_IFA, device.getIfa()) : \"\";", "url": "https://github.com/prebid/prebid-server-java/pull/989#discussion_r516139681", "createdAt": "2020-11-02T17:29:08Z", "author": {"login": "snahornyi"}, "path": "src/main/java/org/prebid/server/bidder/adhese/AdheseBidder.java", "diffHunk": "@@ -145,6 +149,13 @@ private static String getRefererParameter(Site site) {\n                 : \"\";\n     }\n \n+    private static String getIfaParameter(Device device) {\n+        final String ifa = device != null ? device.getIfa() : null;\n+        return StringUtils.isNotBlank(ifa)\n+                ? String.format(\"%s%s\", QUERY_PARAMETER_IFA, ifa)\n+                : \"\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7bdfc98a69db1209fd8594a25da4668b49171a13"}, "originalPosition": 37}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxODUyMTAz", "url": "https://github.com/prebid/prebid-server-java/pull/989#pullrequestreview-521852103", "createdAt": "2020-11-02T17:33:48Z", "commit": {"oid": "7bdfc98a69db1209fd8594a25da4668b49171a13"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxNzozMzo0OFrOHsO3Dg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxNzozMzo0OFrOHsO3Dg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjE0Mjg2Mg==", "bodyText": "Minor. We prefer to use builder in separate lines only in case if single line is more then checkstyle line length rule constant.", "url": "https://github.com/prebid/prebid-server-java/pull/989#discussion_r516142862", "createdAt": "2020-11-02T17:33:48Z", "author": {"login": "snahornyi"}, "path": "src/test/java/org/prebid/server/bidder/adhese/AdheseBidderTest.java", "diffHunk": "@@ -106,6 +107,9 @@ public void makeHttpRequestsShouldModifyIncomingRequestAndSetExpectedHttpRequest\n                         .ext(mapper.valueToTree(ExtPrebid.of(null, ExtImpAdhese.of(\"demo\",\n                                 \"_adhese_prebid_demo_\", \"leaderboard\", mapper.convertValue(targets, JsonNode.class)))))\n                         .build()))\n+                .device(Device.builder()\n+                        .ifa(\"dum-my\")\n+                        .build())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7bdfc98a69db1209fd8594a25da4668b49171a13"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxODUzMjIx", "url": "https://github.com/prebid/prebid-server-java/pull/989#pullrequestreview-521853221", "createdAt": "2020-11-02T17:35:19Z", "commit": {"oid": "7bdfc98a69db1209fd8594a25da4668b49171a13"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d3cb7ae75bc4897cad8a3dc142a0c54bb5320477", "author": {"user": {"login": "sander-adhese", "name": "Sander"}}, "url": "https://github.com/prebid/prebid-server-java/commit/d3cb7ae75bc4897cad8a3dc142a0c54bb5320477", "committedDate": "2020-11-03T07:38:33Z", "message": "Process feedback + changed a similar occurrence"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMyMzAyODQ1", "url": "https://github.com/prebid/prebid-server-java/pull/989#pullrequestreview-532302845", "createdAt": "2020-11-17T12:16:13Z", "commit": {"oid": "d3cb7ae75bc4897cad8a3dc142a0c54bb5320477"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxMjoxNjo0NVrOH0yKeg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxMjoyMDoyMFrOH0ySvA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTEwOTg4Mg==", "bodyText": "i'd recommend ifa as separate variable.", "url": "https://github.com/prebid/prebid-server-java/pull/989#discussion_r525109882", "createdAt": "2020-11-17T12:16:45Z", "author": {"login": "rpanchyk"}, "path": "src/main/java/org/prebid/server/bidder/adhese/AdheseBidder.java", "diffHunk": "@@ -139,12 +143,16 @@ private static String getGdprParameter(User user) {\n     }\n \n     private static String getRefererParameter(Site site) {\n-        final String page = site != null ? site.getPage() : null;\n-        return StringUtils.isNotBlank(page)\n-                ? String.format(\"%s%s\", QUERY_PARAMETER_REFERER, HttpUtil.encodeUrl(page))\n+        return site != null && StringUtils.isNotBlank(site.getPage())\n+                ? String.format(\"%s%s\", QUERY_PARAMETER_REFERER, HttpUtil.encodeUrl(site.getPage()))\n                 : \"\";\n     }\n \n+    private static String getIfaParameter(Device device) {\n+        return device != null && StringUtils.isNotBlank(device.getIfa())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d3cb7ae75bc4897cad8a3dc142a0c54bb5320477"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTExMDI4Nw==", "bodyText": "Should we make url-encoding here?", "url": "https://github.com/prebid/prebid-server-java/pull/989#discussion_r525110287", "createdAt": "2020-11-17T12:17:30Z", "author": {"login": "rpanchyk"}, "path": "src/main/java/org/prebid/server/bidder/adhese/AdheseBidder.java", "diffHunk": "@@ -139,12 +143,16 @@ private static String getGdprParameter(User user) {\n     }\n \n     private static String getRefererParameter(Site site) {\n-        final String page = site != null ? site.getPage() : null;\n-        return StringUtils.isNotBlank(page)\n-                ? String.format(\"%s%s\", QUERY_PARAMETER_REFERER, HttpUtil.encodeUrl(page))\n+        return site != null && StringUtils.isNotBlank(site.getPage())\n+                ? String.format(\"%s%s\", QUERY_PARAMETER_REFERER, HttpUtil.encodeUrl(site.getPage()))\n                 : \"\";\n     }\n \n+    private static String getIfaParameter(Device device) {\n+        return device != null && StringUtils.isNotBlank(device.getIfa())\n+                ? String.format(\"%s%s\", QUERY_PARAMETER_IFA, device.getIfa()) : \"\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d3cb7ae75bc4897cad8a3dc142a0c54bb5320477"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTExMTk5Ng==", "bodyText": "Minor. Usually most valuable thing can placed at first position, like IFA_QUERY_PARAMETER.\nIf you're ok with it, pls check for other fields.", "url": "https://github.com/prebid/prebid-server-java/pull/989#discussion_r525111996", "createdAt": "2020-11-17T12:20:20Z", "author": {"login": "rpanchyk"}, "path": "src/main/java/org/prebid/server/bidder/adhese/AdheseBidder.java", "diffHunk": "@@ -57,6 +58,7 @@\n     private static final String ORIGIN = \"JERLICIA\";\n     private static final String QUERY_PARAMETER_GDPR = \"/xt\";\n     private static final String QUERY_PARAMETER_REFERER = \"/xf\";\n+    private static final String QUERY_PARAMETER_IFA = \"/xz\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d3cb7ae75bc4897cad8a3dc142a0c54bb5320477"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f71b4313f49714874f7971eb2b314d8321e53ef6", "author": {"user": {"login": "sander-adhese", "name": "Sander"}}, "url": "https://github.com/prebid/prebid-server-java/commit/f71b4313f49714874f7971eb2b314d8321e53ef6", "committedDate": "2020-11-17T14:38:34Z", "message": "Process feedback"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMzMjU2MDQz", "url": "https://github.com/prebid/prebid-server-java/pull/989#pullrequestreview-533256043", "createdAt": "2020-11-18T09:32:52Z", "commit": {"oid": "f71b4313f49714874f7971eb2b314d8321e53ef6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3065, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}