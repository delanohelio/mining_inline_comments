{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY3MjQzNTIz", "number": 860, "title": "Make version endpoint unprotected and add pbs version to the response", "bodyText": "", "createdAt": "2020-08-13T08:48:38Z", "url": "https://github.com/prebid/prebid-server-java/pull/860", "merged": true, "mergeCommit": {"oid": "76ba6649d308edb41fee858b1cad20b904232b2f"}, "closed": true, "closedAt": "2020-08-13T10:57:31Z", "author": {"login": "BraslavskiyAndrey"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc-cA2-AH2gAyNDY3MjQzNTIzOjk2YTk3YTgwMTc5ZGFhZDE5NGM1NmQ5MzU0MGFjZWFmNGMwZDZmNjQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc-d1yXgFqTQ2NjY1NDE2OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "96a97a80179daad194c56d93540aceaf4c0d6f64", "author": {"user": {"login": "BraslavskiyAndrey", "name": "Braslavskyi Andrii"}}, "url": "https://github.com/prebid/prebid-server-java/commit/96a97a80179daad194c56d93540aceaf4c0d6f64", "committedDate": "2020-08-13T08:47:40Z", "message": "Make version endpoint unprotected and add pbs version to the response"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2NjE5NzM2", "url": "https://github.com/prebid/prebid-server-java/pull/860#pullrequestreview-466619736", "createdAt": "2020-08-13T10:02:32Z", "commit": {"oid": "96a97a80179daad194c56d93540aceaf4c0d6f64"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QxMDowMjozM1rOHAEy5w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QxMDoyMDo0MFrOHAFZYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTg0MDYxNQ==", "bodyText": "i'd like to log at ERROR level here.", "url": "https://github.com/prebid/prebid-server-java/pull/860#discussion_r469840615", "createdAt": "2020-08-13T10:02:33Z", "author": {"login": "rpanchyk"}, "path": "src/main/java/org/prebid/server/handler/VersionHandler.java", "diffHunk": "@@ -37,17 +37,19 @@ public static VersionHandler create(String revisionFilePath, JacksonMapper mappe\n             revision = mapper.mapper().readValue(ResourceUtil.readFromClasspath(revisionFilePath), Revision.class);\n         } catch (IllegalArgumentException | IOException e) {\n             logger.warn(\"Was not able to read revision file {0}. Reason: {1}\", revisionFilePath, e.getMessage());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "96a97a80179daad194c56d93540aceaf4c0d6f64"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTg0MTE4NA==", "bodyText": "Can we compose full version info in create() method, bc no reason to recreate the same state?", "url": "https://github.com/prebid/prebid-server-java/pull/860#discussion_r469841184", "createdAt": "2020-08-13T10:03:35Z", "author": {"login": "rpanchyk"}, "path": "src/main/java/org/prebid/server/handler/VersionHandler.java", "diffHunk": "@@ -37,17 +37,19 @@ public static VersionHandler create(String revisionFilePath, JacksonMapper mappe\n             revision = mapper.mapper().readValue(ResourceUtil.readFromClasspath(revisionFilePath), Revision.class);\n         } catch (IllegalArgumentException | IOException e) {\n             logger.warn(\"Was not able to read revision file {0}. Reason: {1}\", revisionFilePath, e.getMessage());\n-            revision = Revision.of(DEFAULT_REVISION_VALUE);\n+            revision = Revision.of(NOT_SET, NOT_SET);\n         }\n-        return new VersionHandler(revision.commitHash == null ? Revision.of(DEFAULT_REVISION_VALUE) : revision, mapper);\n+        return new VersionHandler(revision, mapper);\n     }\n \n     /**\n      * Responds with commit revision.\n      */\n     @Override\n     public void handle(RoutingContext context) {\n-        final RevisionResponse revisionResponse = RevisionResponse.of(revision.commitHash);\n+        final RevisionResponse revisionResponse = RevisionResponse.of(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "96a97a80179daad194c56d93540aceaf4c0d6f64"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTg1MDQ2Nw==", "bodyText": "don't think we need to turn security off by default.", "url": "https://github.com/prebid/prebid-server-java/pull/860#discussion_r469850467", "createdAt": "2020-08-13T10:20:40Z", "author": {"login": "rpanchyk"}, "path": "src/main/resources/application.yaml", "diffHunk": "@@ -19,7 +19,7 @@ admin-endpoints:\n     enabled: false\n     path: /version\n     on-application-port: false\n-    protected: true\n+    protected: false", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "96a97a80179daad194c56d93540aceaf4c0d6f64"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ebd5c300269963504419f7665d80e3924e83224", "author": {"user": {"login": "BraslavskiyAndrey", "name": "Braslavskyi Andrii"}}, "url": "https://github.com/prebid/prebid-server-java/commit/8ebd5c300269963504419f7665d80e3924e83224", "committedDate": "2020-08-13T10:43:17Z", "message": "Pull request comments resolved"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8bd01bcf317c05a60d85f19c54eff6b8dc2262a1", "author": {"user": {"login": "BraslavskiyAndrey", "name": "Braslavskyi Andrii"}}, "url": "https://github.com/prebid/prebid-server-java/commit/8bd01bcf317c05a60d85f19c54eff6b8dc2262a1", "committedDate": "2020-08-13T10:53:42Z", "message": "Add missing code"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2NjU0MTY5", "url": "https://github.com/prebid/prebid-server-java/pull/860#pullrequestreview-466654169", "createdAt": "2020-08-13T10:55:23Z", "commit": {"oid": "8bd01bcf317c05a60d85f19c54eff6b8dc2262a1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3127, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}