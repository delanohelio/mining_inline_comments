{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM3MTk1NDky", "number": 772, "title": "Make failed vendor list for TCF1 do not drop the auction", "bodyText": "Also, added new metrics:\nprivacy.tcf.(v1,v2).vendorlist.{VERSION}.(missing|ok|err) - number of processed vendor lists of particular", "createdAt": "2020-06-19T16:29:48Z", "url": "https://github.com/prebid/prebid-server-java/pull/772", "merged": true, "mergeCommit": {"oid": "d79ef0cff5d8fba0871d178e4478a9af95b65cf8"}, "closed": true, "closedAt": "2020-06-26T11:54:56Z", "author": {"login": "rpanchyk"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcs1o0NAH2gAyNDM3MTk1NDkyOmJiYjMyNjUwZTYyZjM5YTExOGMwM2Y1YjZkY2FlY2VkY2Y2NDhjYzk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcvB18egH2gAyNDM3MTk1NDkyOjNjM2M2MzBkODYxMjFmNWFlZGI1NTM0YTljMDQ1NzllMTRhNmY5Mzk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "bbb32650e62f39a118c03f5b6dcaecedcf648cc9", "author": {"user": {"login": "rpanchyk", "name": null}}, "url": "https://github.com/prebid/prebid-server-java/commit/bbb32650e62f39a118c03f5b6dcaecedcf648cc9", "committedDate": "2020-06-19T16:28:18Z", "message": "Make failed vendor list for TCF1 do not drop the auction"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM1Njc5NDgy", "url": "https://github.com/prebid/prebid-server-java/pull/772#pullrequestreview-435679482", "createdAt": "2020-06-23T11:13:57Z", "commit": {"oid": "bbb32650e62f39a118c03f5b6dcaecedcf648cc9"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxMToxMzo1OFrOGnkgxg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxMToxMzo1OFrOGnkgxg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDE0NTg2Mg==", "bodyText": "It's strange that saveToFileAndUpdateCache does not show the result of the file saving/\nDoesn't recover method  in the end of pipeline is  safer ?", "url": "https://github.com/prebid/prebid-server-java/pull/772#discussion_r444145862", "createdAt": "2020-06-23T11:13:58Z", "author": {"login": "DGarbar"}, "path": "src/main/java/org/prebid/server/privacy/gdpr/vendorlist/VendorListService.java", "diffHunk": "@@ -182,17 +198,17 @@ private void fetchNewVendorListFor(int version) {\n         final String url = endpointTemplate.replace(VERSION_PLACEHOLDER, String.valueOf(version));\n \n         httpClient.get(url, defaultTimeoutMs)\n-                .compose(response -> processResponse(response, version))\n-                .compose(vendorListResult -> saveToFileAndUpdateCache(vendorListResult, version))\n-                .recover(exception -> failResponse(exception, version));\n+                .map(response -> processResponse(response, version))\n+                .recover(exception -> failResponse(exception, version))\n+                .compose(vendorListResult -> saveToFileAndUpdateCache(vendorListResult, version));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bbb32650e62f39a118c03f5b6dcaecedcf648cc9"}, "originalPosition": 114}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "060014562bf8cb122822053a28ef672b3a3a66d2", "author": {"user": {"login": "rpanchyk", "name": null}}, "url": "https://github.com/prebid/prebid-server-java/commit/060014562bf8cb122822053a28ef672b3a3a66d2", "committedDate": "2020-06-23T12:59:09Z", "message": "Make failed vendor list for TCF1 do not drop the auction - fix after review"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2NDM1ODAx", "url": "https://github.com/prebid/prebid-server-java/pull/772#pullrequestreview-436435801", "createdAt": "2020-06-24T08:32:15Z", "commit": {"oid": "060014562bf8cb122822053a28ef672b3a3a66d2"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3c3c630d86121f5aedb5534a9c04579e14a6f939", "author": {"user": {"login": "rpanchyk", "name": null}}, "url": "https://github.com/prebid/prebid-server-java/commit/3c3c630d86121f5aedb5534a9c04579e14a6f939", "committedDate": "2020-06-26T11:49:21Z", "message": "Merge branch 'master' into fix-tcf1-vendorlist-fail\n\n# Conflicts:\n#\tdocs/metrics.md\n#\tsrc/main/java/org/prebid/server/privacy/gdpr/GdprService.java"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3226, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}