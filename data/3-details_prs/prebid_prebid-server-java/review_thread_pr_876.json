{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDczNTE4MDc5", "number": 876, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxMzo0Mjo0OFrOEiH4lQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxMzo0Mjo0OFrOEiH4lQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0MjE2MjEzOnYy", "diffSide": "RIGHT", "path": "src/main/java/org/prebid/server/bidder/OpenrtbBidder.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxMzo0Mjo0OFrOHP0YOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNDowOToxNVrOHP16-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjM0ODg1Ng==", "bodyText": "Sorry, but i have a crazy thought about stripToNull action performing.\nIt is kind frail to add this in each bidder, may be for simplicity it is reasonable to leave it as is like: bidResponse.getCur() without any processing. Then, in ExchangeService (before currency conversion service call) we can add this stripToNull action.\nSo, just in one place - before actual using the currency value.\nWhat do you think?", "url": "https://github.com/prebid/prebid-server-java/pull/876#discussion_r486348856", "createdAt": "2020-09-10T13:42:48Z", "author": {"login": "rpanchyk"}, "path": "src/main/java/org/prebid/server/bidder/OpenrtbBidder.java", "diffHunk": "@@ -231,7 +229,7 @@ protected void modifyRequest(BidRequest bidRequest, BidRequest.BidRequestBuilder\n                 .filter(Objects::nonNull)\n                 .flatMap(Collection::stream)\n                 .map(bid -> BidderBid.of(bid, getBidType(bid.getImpid(), bidRequest.getImp()),\n-                        getBidCurrency(bidRequest.getCur(), bidResponse.getCur())))\n+                        StringUtils.stripToNull(bidResponse.getCur())))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6a17fd1ba5d885cb333cc496e7cbbb1be49e420c"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjM3NDEzOQ==", "bodyText": "Yeah, good notice about performance. I agree with you. I'll try to change the logic", "url": "https://github.com/prebid/prebid-server-java/pull/876#discussion_r486374139", "createdAt": "2020-09-10T14:09:15Z", "author": {"login": "AndriyPavlyuk"}, "path": "src/main/java/org/prebid/server/bidder/OpenrtbBidder.java", "diffHunk": "@@ -231,7 +229,7 @@ protected void modifyRequest(BidRequest bidRequest, BidRequest.BidRequestBuilder\n                 .filter(Objects::nonNull)\n                 .flatMap(Collection::stream)\n                 .map(bid -> BidderBid.of(bid, getBidType(bid.getImpid(), bidRequest.getImp()),\n-                        getBidCurrency(bidRequest.getCur(), bidResponse.getCur())))\n+                        StringUtils.stripToNull(bidResponse.getCur())))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjM0ODg1Ng=="}, "originalCommit": {"oid": "6a17fd1ba5d885cb333cc496e7cbbb1be49e420c"}, "originalPosition": 23}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4023, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}