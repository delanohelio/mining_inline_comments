{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ4MTUxNzk2", "number": 807, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxMjoyNzoxMVrOEiF0Og==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxMjozMzo0NlrOEiF-SA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0MTgyMzMwOnYy", "diffSide": "RIGHT", "path": "src/main/java/org/prebid/server/bidder/orbidder/OrbidderBidder.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxMjoyNzoxMVrOHPxFFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxMjoyNzoxMVrOHPxFFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjI5NDgwNA==", "bodyText": "No reason for the check - RequestValidator cares.", "url": "https://github.com/prebid/prebid-server-java/pull/807#discussion_r486294804", "createdAt": "2020-09-10T12:27:11Z", "author": {"login": "rpanchyk"}, "path": "src/main/java/org/prebid/server/bidder/orbidder/OrbidderBidder.java", "diffHunk": "@@ -0,0 +1,131 @@\n+package org.prebid.server.bidder.orbidder;\n+\n+import com.fasterxml.jackson.core.type.TypeReference;\n+import com.fasterxml.jackson.databind.node.ObjectNode;\n+import com.iab.openrtb.request.BidRequest;\n+import com.iab.openrtb.request.Imp;\n+import com.iab.openrtb.response.BidResponse;\n+import com.iab.openrtb.response.SeatBid;\n+import io.netty.handler.codec.http.HttpResponseStatus;\n+import io.vertx.core.http.HttpMethod;\n+import org.apache.commons.collections4.CollectionUtils;\n+import org.prebid.server.bidder.Bidder;\n+import org.prebid.server.bidder.model.BidderBid;\n+import org.prebid.server.bidder.model.BidderError;\n+import org.prebid.server.bidder.model.HttpCall;\n+import org.prebid.server.bidder.model.HttpRequest;\n+import org.prebid.server.bidder.model.Result;\n+import org.prebid.server.exception.PreBidException;\n+import org.prebid.server.json.DecodeException;\n+import org.prebid.server.json.JacksonMapper;\n+import org.prebid.server.proto.openrtb.ext.ExtPrebid;\n+import org.prebid.server.proto.openrtb.ext.request.orbidder.ExtImpOrbidder;\n+import org.prebid.server.proto.openrtb.ext.response.BidType;\n+import org.prebid.server.util.HttpUtil;\n+\n+import java.util.ArrayList;\n+import java.util.Collection;\n+import java.util.Collections;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Objects;\n+import java.util.stream.Collectors;\n+\n+public class OrbidderBidder implements Bidder<BidRequest> {\n+\n+    private static final TypeReference<ExtPrebid<?, ExtImpOrbidder>> ORBIDDER_EXT_TYPE_REFERENCE =\n+            new TypeReference<ExtPrebid<?, ExtImpOrbidder>>() {\n+            };\n+\n+    private static final String DEFAULT_BID_CURRENCY = \"USD\";\n+\n+    private final String endpointUrl;\n+    private final JacksonMapper mapper;\n+\n+    public OrbidderBidder(String endpointUrl, JacksonMapper mapper) {\n+        this.endpointUrl = HttpUtil.validateUrl(Objects.requireNonNull(endpointUrl));\n+        this.mapper = Objects.requireNonNull(mapper);\n+    }\n+\n+    @Override\n+    public Result<List<HttpRequest<BidRequest>>> makeHttpRequests(BidRequest request) {\n+        final List<BidderError> errors = new ArrayList<>();\n+        final List<Imp> validImps = new ArrayList<>();\n+\n+        if (CollectionUtils.isEmpty(request.getImp())) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "50ee3fa7b637b5c0bacabb9029b414b723a107f3"}, "originalPosition": 55}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0MTgyOTg0OnYy", "diffSide": "RIGHT", "path": "src/main/java/org/prebid/server/proto/openrtb/ext/request/orbidder/ExtImpOrbidder.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxMjoyODo0MVrOHPxI-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxMjoyODo0MVrOHPxI-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjI5NTgwMA==", "bodyText": "No need for annotation here.", "url": "https://github.com/prebid/prebid-server-java/pull/807#discussion_r486295800", "createdAt": "2020-09-10T12:28:41Z", "author": {"login": "rpanchyk"}, "path": "src/main/java/org/prebid/server/proto/openrtb/ext/request/orbidder/ExtImpOrbidder.java", "diffHunk": "@@ -0,0 +1,21 @@\n+package org.prebid.server.proto.openrtb.ext.request.orbidder;\n+\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+import lombok.AllArgsConstructor;\n+import lombok.Value;\n+\n+import java.math.BigDecimal;\n+\n+@Value\n+@AllArgsConstructor(staticName = \"of\")\n+public class ExtImpOrbidder {\n+\n+    @JsonProperty(\"accountId\")\n+    String accountId;\n+\n+    @JsonProperty(\"placementId\")\n+    String placementId;\n+\n+    @JsonProperty(\"bidfloor\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "50ee3fa7b637b5c0bacabb9029b414b723a107f3"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0MTg0OTA0OnYy", "diffSide": "RIGHT", "path": "src/test/resources/org/prebid/server/it/openrtb2/orbidder/test-auction-orbidder-request.json", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxMjozMzo0NlrOHPxUwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxMjozMzo0NlrOHPxUwA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjI5ODgxNg==", "bodyText": "No need currency here.", "url": "https://github.com/prebid/prebid-server-java/pull/807#discussion_r486298816", "createdAt": "2020-09-10T12:33:46Z", "author": {"login": "rpanchyk"}, "path": "src/test/resources/org/prebid/server/it/openrtb2/orbidder/test-auction-orbidder-request.json", "diffHunk": "@@ -0,0 +1,100 @@\n+{\n+  \"id\": \"tid\",\n+  \"imp\": [\n+    {\n+      \"id\": \"impId001\",\n+      \"tagid\": \"2eb6bd58-865c-47ce-af7f-a918108c3fd2\",\n+      \"banner\": {\n+        \"format\": [\n+          {\n+            \"w\": 300,\n+            \"h\": 250\n+          }\n+        ]\n+      },\n+      \"ext\": {\n+        \"orbidder\": {\n+          \"accountId\": \"orbidder-test\",\n+          \"placementId\": \"test-placement\",\n+          \"bidfloor\": 0.1\n+        }\n+      }\n+    }\n+  ],\n+  \"device\": {\n+    \"pxratio\": 4.2,\n+    \"dnt\": 2,\n+    \"ip\": \"193.168.244.1\",\n+    \"language\": \"en\",\n+    \"ifa\": \"ifaId\",\n+    \"ua\": \"userAgent\"\n+  },\n+  \"site\": {\n+    \"domain\": \"example.com\",\n+    \"ext\": {\n+      \"amp\": 0\n+    },\n+    \"page\": \"http://www.example.com\",\n+    \"publisher\": {\n+      \"id\": \"publisherId\"\n+    }\n+  },\n+  \"at\": 1,\n+  \"tmax\": 3000,\n+  \"cur\": [\n+    \"USD\"\n+  ],\n+  \"source\": {\n+    \"fd\": 1,\n+    \"tid\": \"tid\"\n+  },\n+  \"user\": {\n+    \"ext\": {\n+      \"consent\": \"consentValue\",\n+      \"digitrust\": {\n+        \"id\": \"id\",\n+        \"keyv\": 123,\n+        \"pref\": 0\n+      }\n+    }\n+  },\n+  \"regs\": {\n+    \"ext\": {\n+      \"gdpr\": 0\n+    }\n+  },\n+  \"ext\": {\n+    \"prebid\": {\n+      \"currency\": {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "50ee3fa7b637b5c0bacabb9029b414b723a107f3"}, "originalPosition": 68}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3973, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}