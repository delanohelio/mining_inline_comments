{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIzMjMxMjU4", "number": 1020, "title": "Use POST, preserve original user agent and user ip in the headers", "bodyText": "", "createdAt": "2020-11-18T14:37:42Z", "url": "https://github.com/prebid/prebid-server-java/pull/1020", "merged": true, "mergeCommit": {"oid": "a36c40afcdc4a00929248aaa2b5344eb11df7608"}, "closed": true, "closedAt": "2020-11-20T09:23:41Z", "author": {"login": "sander-adhese"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABddvGiVgH2gAyNTIzMjMxMjU4Ojk0OThlMGM4MmI2MzlkYWY2MWQ1Mjg5NTg2ZDFkZmJjZmE1ZGQ4Zjk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdeT1q_gFqTUzNTI1NTM1Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9498e0c82b639daf61d5289586d1dfbcfa5dd8f9", "author": {"user": {"login": "sander-adhese", "name": "Sander"}}, "url": "https://github.com/prebid/prebid-server-java/commit/9498e0c82b639daf61d5289586d1dfbcfa5dd8f9", "committedDate": "2020-11-18T14:33:43Z", "message": "Use POST, preserve original user agent and user ip in the headers"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bd5dbd16a96de975f8fe3901bdf529fc4250d1cf", "author": {"user": {"login": "sander-adhese", "name": "Sander"}}, "url": "https://github.com/prebid/prebid-server-java/commit/bd5dbd16a96de975f8fe3901bdf529fc4250d1cf", "committedDate": "2020-11-18T14:52:40Z", "message": "Change test to stub for post"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cbe2bcd1084848f43588d7a9b95cb504a5fd6289", "author": {"user": {"login": "sander-adhese", "name": "Sander"}}, "url": "https://github.com/prebid/prebid-server-java/commit/cbe2bcd1084848f43588d7a9b95cb504a5fd6289", "committedDate": "2020-11-18T14:57:39Z", "message": "cleanup"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM0NDQ1NTcw", "url": "https://github.com/prebid/prebid-server-java/pull/1020#pullrequestreview-534445570", "createdAt": "2020-11-19T13:30:25Z", "commit": {"oid": "cbe2bcd1084848f43588d7a9b95cb504a5fd6289"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQxMzozMDoyNVrOH2eTqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQxMzozMDoyNVrOH2eTqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjg4MTcwNA==", "bodyText": "Pls return headers instead.", "url": "https://github.com/prebid/prebid-server-java/pull/1020#discussion_r526881704", "createdAt": "2020-11-19T13:30:25Z", "author": {"login": "rpanchyk"}, "path": "src/main/java/org/prebid/server/bidder/adhese/AdheseBidder.java", "diffHunk": "@@ -83,13 +85,22 @@ public AdheseBidder(String endpointUrl, JacksonMapper mapper) {\n \n         return Result.of(Collections.singletonList(\n                 HttpRequest.<Void>builder()\n-                        .method(HttpMethod.GET)\n+                        .method(HttpMethod.POST)\n                         .uri(uri)\n-                        .headers(HttpUtil.headers())\n+                        .headers(replaceHeaders(request.getDevice()))\n                         .build()),\n                 Collections.emptyList());\n     }\n \n+    private MultiMap replaceHeaders(Device device) {\n+        MultiMap headers = HttpUtil.headers();\n+        if (device != null) {\n+            HttpUtil.addHeaderIfValueIsNotEmpty(headers, HttpUtil.USER_AGENT_HEADER, device.getUa());\n+            HttpUtil.addHeaderIfValueIsNotEmpty(headers, HttpHeaders.createOptimized(\"X-Real-IP\"), device.getIp());\n+        }\n+        return HttpUtil.headers();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cbe2bcd1084848f43588d7a9b95cb504a5fd6289"}, "originalPosition": 28}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "25bca3d07eae068cfb4638d89bd9f01d5a3d95f4", "author": {"user": {"login": "sander-adhese", "name": "Sander"}}, "url": "https://github.com/prebid/prebid-server-java/commit/25bca3d07eae068cfb4638d89bd9f01d5a3d95f4", "committedDate": "2020-11-19T14:44:06Z", "message": "actually return modified headers"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM1MjU1MzU3", "url": "https://github.com/prebid/prebid-server-java/pull/1020#pullrequestreview-535255357", "createdAt": "2020-11-20T09:21:47Z", "commit": {"oid": "25bca3d07eae068cfb4638d89bd9f01d5a3d95f4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2930, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}