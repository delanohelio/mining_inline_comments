{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDczODM4Mzcy", "number": 3131, "title": "NMS-12872: Fix Minion startup command to use credentials from environment with health-check", "bodyText": "All Contributors\n\n Have you read and followed our Contribution Guidelines?\n Have you made an issue in the OpenNMS issue tracker?If so, you should:\n\nupdate the title of this PR to be of the format: ${JIRA-ISSUE-NUMBER}: subject of pull request\nupdate the JIRA link at the bottom of this comment to refer to the real issue number\nprefix your commit messages with the issue number, if possible\n\n\n Have you made a comment in that issue which points back to this PR?\n Have you updated the JIRA link at the bottom of this comment to link to your issue?\n If this is a new or updated feature, is there documentation for the new behavior?\n If this is a new code, are there unit and/or integration tests?\n If this PR targets a foundation-* branch, does it avoid changing files in $OPENNMS_HOME/etc/?\n\nIn our the Minion documentation we used -f which uses the credentials from our Secure Credentials Vault and the credentials from the environment variables are ignored. To make the example work, I've changed it to use -c. Additionally we have referenced the old health:check command which doesn't work anymore and is renamed to opennms:health-check. I've found a few other spots as well and fixed them with a second commit as well.\nExternal References\n\nJIRA (Issue Tracker): http://issues.opennms.org/browse/NMS-12872", "createdAt": "2020-08-26T11:22:36Z", "url": "https://github.com/OpenNMS/opennms/pull/3131", "merged": true, "mergeCommit": {"oid": "07bb9ba32178abf22eaf8d9152075f4410ae8bea"}, "closed": true, "closedAt": "2020-08-26T15:11:47Z", "author": {"login": "indigo423"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdCpsuzgH2gAyNDczODM4MzcyOjJhNTE3YTYxZDllY2NjNmNkNDUwNmUzMGJmMjEwOWY4NDc0Mzc1NWU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdCtS4TAH2gAyNDczODM4MzcyOmNiNjliMWI4YzI3YTNhYzlmM2RhMTlmNzk1OWUwZWJmYmVmMWExZTA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2a517a61d9eccc6cd4506e30bf2109f84743755e", "author": {"user": {"login": "indigo423", "name": "Ronny Trommer"}}, "url": "https://github.com/OpenNMS/opennms/commit/2a517a61d9eccc6cd4506e30bf2109f84743755e", "committedDate": "2020-08-26T11:00:03Z", "message": "NMS-12872: Fix running Minion with docker and adding the health check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9eb2ba201a96acd946a07dfbe1b8ea1d740aa7bb", "author": {"user": {"login": "indigo423", "name": "Ronny Trommer"}}, "url": "https://github.com/OpenNMS/opennms/commit/9eb2ba201a96acd946a07dfbe1b8ea1d740aa7bb", "committedDate": "2020-08-26T11:07:49Z", "message": "NMS-12872: Fix old Karaf shell health:check command to indicate the new opennms:health-check"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1NTE4Nzg2", "url": "https://github.com/OpenNMS/opennms/pull/3131#pullrequestreview-475518786", "createdAt": "2020-08-26T13:59:58Z", "commit": {"oid": "9eb2ba201a96acd946a07dfbe1b8ea1d740aa7bb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1NTI3ODUw", "url": "https://github.com/OpenNMS/opennms/pull/3131#pullrequestreview-475527850", "createdAt": "2020-08-26T14:09:21Z", "commit": {"oid": "2a517a61d9eccc6cd4506e30bf2109f84743755e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxNDowOToyMVrOHHN9NQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxNDowOToyMVrOHHN9NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzMzMDc0MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            <10> Run our health check to indicate the Minion is ready. It uses internally the `opennms:health-check` running in Karaf.\n          \n          \n            \n            <10> Run our health check to indicate the Minion is ready. It uses the `opennms:health-check` internally running in Karaf.", "url": "https://github.com/OpenNMS/opennms/pull/3131#discussion_r477330741", "createdAt": "2020-08-26T14:09:21Z", "author": {"login": "Bonrob2"}, "path": "opennms-doc/guide-install/src/asciidoc/text/monitor-location-minion/docker/minion-docker.adoc", "diffHunk": "@@ -60,6 +65,7 @@ services:\n <7> Authentication for ActiveMQ broker\n <8> _REST_ endpoint to connect to the _{opennms-product-name}_ instance\n <9> Authentication for the _REST_ endpoint\n+<10> Run our health check to indicate the Minion is ready. It uses internally the `opennms:health-check` running in Karaf.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2a517a61d9eccc6cd4506e30bf2109f84743755e"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1NTI5Mjk2", "url": "https://github.com/OpenNMS/opennms/pull/3131#pullrequestreview-475529296", "createdAt": "2020-08-26T14:10:50Z", "commit": {"oid": "9eb2ba201a96acd946a07dfbe1b8ea1d740aa7bb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb69b1b8c27a3ac9f3da19f7959e0ebfbef1a1e0", "author": {"user": {"login": "indigo423", "name": "Ronny Trommer"}}, "url": "https://github.com/OpenNMS/opennms/commit/cb69b1b8c27a3ac9f3da19f7959e0ebfbef1a1e0", "committedDate": "2020-08-26T15:11:26Z", "message": "NMS-12872: Minor changes\n\nCo-authored-by: Bonrob2 <59453630+Bonrob2@users.noreply.github.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3536, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}