{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEwMTQxNDUw", "number": 3198, "title": "NMS-12971: Identify message broker strategies in web \"about\" page", "bodyText": "All Contributors\n\n Have you read and followed our Contribution Guidelines?\n Have you made an issue in the OpenNMS issue tracker?If so, you should:\n\nupdate the title of this PR to be of the format: ${JIRA-ISSUE-NUMBER}: subject of pull request\nupdate the JIRA link at the bottom of this comment to refer to the real issue number\nprefix your commit messages with the issue number, if possible\n\n\n Have you made a comment in that issue which points back to this PR?\n Have you updated the JIRA link at the bottom of this comment to link to your issue?\n If this is a new or updated feature, is there documentation for the new behavior?\n If this is new code, are there unit and/or integration tests?\n If this PR targets a foundation-* branch, does it avoid changing files in $OPENNMS_HOME/etc/?\n\nPull Request Process\nOne or more reviewers should be assigned to each PR.\nIf you know that a particular person is subject matter expert in the area your PR affects, feel free to assign one or more reviewers when you create this PR, otherwise reviewers will be assigned for you.\nIf you have made additions or changes to the documentation, or if you need documentation for these code changes, please make sure a technical writer has looked it over.\nOnce the reviewer(s) accept the PR and the branch passes continuous integration, the PR is eligible for merge.\nAt that time, if you have commit access (are an OpenNMS Group employee or a member of the Order of the Green Polo) you are welcome to merge the PR.\nOtherwise, a reviewer can merge it for you.\nThanks for taking time to contribute!\nExternal References\n\nJIRA (Issue Tracker): http://issues.opennms.org/browse/NMS-12971", "createdAt": "2020-10-26T16:11:09Z", "url": "https://github.com/OpenNMS/opennms/pull/3198", "merged": true, "mergeCommit": {"oid": "1116d199e684786ab1830eeb5e703c3b2060a6c5"}, "closed": true, "closedAt": "2020-11-02T17:33:18Z", "author": {"login": "jeffgdotorg"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdWWruBAH2gAyNTEwMTQxNDUwOmJjYjgzMmE2NmUzYWZhMDY4YTRmYTQ3MDEyNGVlNzdkN2EyOTU0N2I=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdYnBiuAFqTUyMTc4MjMzMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "bcb832a66e3afa068a4fa470124ee77d7a29547b", "author": {"user": {"login": "jeffgdotorg", "name": "Jeff Gehlbach"}}, "url": "https://github.com/OpenNMS/opennms/commit/bcb832a66e3afa068a4fa470124ee77d7a29547b", "committedDate": "2020-10-26T16:09:14Z", "message": "NMS-12971: Identify message broker strategies in web \"about\" page"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE2OTU2OTA5", "url": "https://github.com/OpenNMS/opennms/pull/3198#pullrequestreview-516956909", "createdAt": "2020-10-26T16:27:48Z", "commit": {"oid": "bcb832a66e3afa068a4fa470124ee77d7a29547b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNjoyNzo0OFrOHoX1iA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNjoyNzo0OFrOHoX1iA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjA5NTYyNA==", "bodyText": "This looks good enough but there is also GRPC as IPC strategy for both Sink and RPC which we set through system property org.opennms.core.ipc.strategy.  This takes precedence over  Sink and RPC specific strategies.", "url": "https://github.com/OpenNMS/opennms/pull/3198#discussion_r512095624", "createdAt": "2020-10-26T16:27:48Z", "author": {"login": "cgorantla"}, "path": "opennms-webapp/src/main/webapp/about/index.jsp", "diffHunk": "@@ -135,6 +135,10 @@\n     <th>Time-Series Strategy:</th>\n     <td><%=TimeSeries.getTimeseriesStrategy().getDescr()%></td>\n   </tr>\n+  <tr>\n+    <th>Message Broker Strategy:</th>\n+    <td>RPC: <%=System.getProperty(\"org.opennms.core.ipc.rpc.strategy\", \"ActiveMQ\")%>; Sink: <%=System.getProperty(\"org.opennms.core.ipc.sink.strategy\", \"ActiveMQ\")%></td>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bcb832a66e3afa068a4fa470124ee77d7a29547b"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8f63d450481dcf91a1ca1761c0b9c76410d3719", "author": {"user": {"login": "jeffgdotorg", "name": "Jeff Gehlbach"}}, "url": "https://github.com/OpenNMS/opennms/commit/a8f63d450481dcf91a1ca1761c0b9c76410d3719", "committedDate": "2020-10-26T18:05:32Z", "message": "NMS-12971: Account for global IPC strategy overriding RPC and Sink ones"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3MDU3OTQ2", "url": "https://github.com/OpenNMS/opennms/pull/3198#pullrequestreview-517057946", "createdAt": "2020-10-26T18:20:39Z", "commit": {"oid": "a8f63d450481dcf91a1ca1761c0b9c76410d3719"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "27d0189eaace9332cf9cc6bc99f58af754301ba6", "author": {"user": {"login": "jeffgdotorg", "name": "Jeff Gehlbach"}}, "url": "https://github.com/OpenNMS/opennms/commit/27d0189eaace9332cf9cc6bc99f58af754301ba6", "committedDate": "2020-10-26T19:25:12Z", "message": "NMS-12971: Just consult the strategy class. Better all around. Thanks Chandra!"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b0a7c12a3c3bf81f5886b1388b5488c918235e31", "author": {"user": {"login": "jeffgdotorg", "name": "Jeff Gehlbach"}}, "url": "https://github.com/OpenNMS/opennms/commit/b0a7c12a3c3bf81f5886b1388b5488c918235e31", "committedDate": "2020-10-26T19:38:06Z", "message": "NMS-12971: There are still three strategies to account for though."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3MTYzMTU2", "url": "https://github.com/OpenNMS/opennms/pull/3198#pullrequestreview-517163156", "createdAt": "2020-10-26T20:48:11Z", "commit": {"oid": "b0a7c12a3c3bf81f5886b1388b5488c918235e31"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQyMDo0ODoxMVrOHohwzg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQyMDo0OTozNVrOHohz4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjI1ODI1NA==", "bodyText": "Think you need to import these packages.", "url": "https://github.com/OpenNMS/opennms/pull/3198#discussion_r512258254", "createdAt": "2020-10-26T20:48:11Z", "author": {"login": "cgorantla"}, "path": "opennms-webapp/src/main/webapp/about/index.jsp", "diffHunk": "@@ -131,10 +131,25 @@\n     <th>Database Version:</th>\n     <td><%=dbVersion%></td>\n   </tr>\n+<%\n+    String globalMBStrategy, sinkMBStrategy, rpcMBStrategy;\n+    globalMBStrategy = org.opennms.core.rpc.common.RpcStrategy.getRpcStrategy().getDescr();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b0a7c12a3c3bf81f5886b1388b5488c918235e31"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjI1ODUxNA==", "bodyText": "Sufficient to get Sink/RPC strategies here.", "url": "https://github.com/OpenNMS/opennms/pull/3198#discussion_r512258514", "createdAt": "2020-10-26T20:48:40Z", "author": {"login": "cgorantla"}, "path": "opennms-webapp/src/main/webapp/about/index.jsp", "diffHunk": "@@ -131,10 +131,25 @@\n     <th>Database Version:</th>\n     <td><%=dbVersion%></td>\n   </tr>\n+<%\n+    String globalMBStrategy, sinkMBStrategy, rpcMBStrategy;\n+    globalMBStrategy = org.opennms.core.rpc.common.RpcStrategy.getRpcStrategy().getDescr();\n+    if (globalMBStrategy != null) {\n+        sinkMBStrategy = globalMBStrategy;\n+        rpcMBStrategy = globalMBStrategy;\n+    } else {\n+        sinkMBStrategy = org.opennms.core.ipc.sink.common.SinkStrategy.getSinkStrategy().getDescr();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b0a7c12a3c3bf81f5886b1388b5488c918235e31"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjI1OTA0MQ==", "bodyText": "Depending on how it looks on the web page, we should choose between Descr and name.\nI prefer using name", "url": "https://github.com/OpenNMS/opennms/pull/3198#discussion_r512259041", "createdAt": "2020-10-26T20:49:35Z", "author": {"login": "cgorantla"}, "path": "opennms-webapp/src/main/webapp/about/index.jsp", "diffHunk": "@@ -131,10 +131,25 @@\n     <th>Database Version:</th>\n     <td><%=dbVersion%></td>\n   </tr>\n+<%\n+    String globalMBStrategy, sinkMBStrategy, rpcMBStrategy;\n+    globalMBStrategy = org.opennms.core.rpc.common.RpcStrategy.getRpcStrategy().getDescr();\n+    if (globalMBStrategy != null) {\n+        sinkMBStrategy = globalMBStrategy;\n+        rpcMBStrategy = globalMBStrategy;\n+    } else {\n+        sinkMBStrategy = org.opennms.core.ipc.sink.common.SinkStrategy.getSinkStrategy().getDescr();\n+        rpcMBStrategy = org.opennms.core.rpc.common.RpcStrategy.getRpcStrategy().getDescr();\n+    }\n+%>\n   <tr>\n     <th>Time-Series Strategy:</th>\n     <td><%=TimeSeries.getTimeseriesStrategy().getDescr()%></td>\n   </tr>\n+  <tr>\n+    <th>IPC Strategy:</th>\n+    <td>Sink: <%=sinkMBStrategy%>; RPC: <%=rpcMBStrategy%></td>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b0a7c12a3c3bf81f5886b1388b5488c918235e31"}, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b563c284fb43e671d053d490d5bfc138c9b2a860", "author": {"user": {"login": "jeffgdotorg", "name": "Jeff Gehlbach"}}, "url": "https://github.com/OpenNMS/opennms/commit/b563c284fb43e671d053d490d5bfc138c9b2a860", "committedDate": "2020-10-30T14:50:08Z", "message": "NMS-12971:  Identify message broker strategies in web \"about\" page\n\n- Add RPC and Sink common dependencies to webapp\n- List strategies in about/index.jsp"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bdda3932b9002debec2738c69e2848d6b435d768", "author": {"user": {"login": "jeffgdotorg", "name": "Jeff Gehlbach"}}, "url": "https://github.com/OpenNMS/opennms/commit/bdda3932b9002debec2738c69e2848d6b435d768", "committedDate": "2020-10-30T17:57:00Z", "message": "Merge branch 'jira/NMS-12971' of github.com:OpenNMS/opennms into jira/NMS-12971"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIwOTM2NzU1", "url": "https://github.com/OpenNMS/opennms/pull/3198#pullrequestreview-520936755", "createdAt": "2020-10-30T18:34:01Z", "commit": {"oid": "bdda3932b9002debec2738c69e2848d6b435d768"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQxODozNDowMlrOHrbl0g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQxODozNTo0NVrOHrbpOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTMwMjg2Ng==", "bodyText": "Didn't get why you still need globalMBStrategy here.", "url": "https://github.com/OpenNMS/opennms/pull/3198#discussion_r515302866", "createdAt": "2020-10-30T18:34:02Z", "author": {"login": "cgorantla"}, "path": "opennms-webapp/src/main/webapp/about/index.jsp", "diffHunk": "@@ -135,6 +137,21 @@\n     <th>Time-Series Strategy:</th>\n     <td><%=TimeSeries.getTimeseriesStrategy().getDescr()%></td>\n   </tr>\n+<%\n+    String globalMBStrategy, sinkMBStrategy, rpcMBStrategy;\n+    globalMBStrategy = org.opennms.core.rpc.common.RpcStrategy.getRpcStrategy().getName();\n+    if (globalMBStrategy != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bdda3932b9002debec2738c69e2848d6b435d768"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTMwMzA3MQ==", "bodyText": "you can omit package here.", "url": "https://github.com/OpenNMS/opennms/pull/3198#discussion_r515303071", "createdAt": "2020-10-30T18:34:31Z", "author": {"login": "cgorantla"}, "path": "opennms-webapp/src/main/webapp/about/index.jsp", "diffHunk": "@@ -135,6 +137,21 @@\n     <th>Time-Series Strategy:</th>\n     <td><%=TimeSeries.getTimeseriesStrategy().getDescr()%></td>\n   </tr>\n+<%\n+    String globalMBStrategy, sinkMBStrategy, rpcMBStrategy;\n+    globalMBStrategy = org.opennms.core.rpc.common.RpcStrategy.getRpcStrategy().getName();\n+    if (globalMBStrategy != null) {\n+        sinkMBStrategy = globalMBStrategy;\n+        rpcMBStrategy = globalMBStrategy;\n+    } else {\n+        sinkMBStrategy = org.opennms.core.ipc.sink.common.SinkStrategy.getSinkStrategy().getName();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bdda3932b9002debec2738c69e2848d6b435d768"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTMwMzczOA==", "bodyText": "Guess this is unintentional change", "url": "https://github.com/OpenNMS/opennms/pull/3198#discussion_r515303738", "createdAt": "2020-10-30T18:35:45Z", "author": {"login": "cgorantla"}, "path": "core/web-assets/package-lock.json", "diffHunk": "@@ -4330,9 +4330,9 @@\n             }\n         },\n         \"dot-prop\": {\n-            \"version\": \"4.2.0\",\n-            \"resolved\": \"https://registry.npmjs.org/dot-prop/-/dot-prop-4.2.0.tgz\",\n-            \"integrity\": \"sha512-tUMXrxlExSW6U2EXiiKGSBVdYgtV8qlHL+C10TsW4PURY/ic+eaysnSkwB4kA/mBlCyy/IKDJ+Lc3wbWeaXtuQ==\",\n+            \"version\": \"4.2.1\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bdda3932b9002debec2738c69e2848d6b435d768"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3541953f3f4daa5552576849eda458601d22cfdf", "author": {"user": {"login": "jeffgdotorg", "name": "Jeff Gehlbach"}}, "url": "https://github.com/OpenNMS/opennms/commit/3541953f3f4daa5552576849eda458601d22cfdf", "committedDate": "2020-10-30T20:53:13Z", "message": "NMS-12971: Factor out excess logic in JSP, eliminating need for scriptlet"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "457918a27599fd07bd02310399a2a28ffba0d765", "author": {"user": {"login": "jeffgdotorg", "name": "Jeff Gehlbach"}}, "url": "https://github.com/OpenNMS/opennms/commit/457918a27599fd07bd02310399a2a28ffba0d765", "committedDate": "2020-11-02T15:09:39Z", "message": "Merge branch 'foundation-2019' of github.com:OpenNMS/opennms into jira/NMS-12971"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxNzgyMzMx", "url": "https://github.com/OpenNMS/opennms/pull/3198#pullrequestreview-521782331", "createdAt": "2020-11-02T16:19:24Z", "commit": {"oid": "457918a27599fd07bd02310399a2a28ffba0d765"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3830, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}