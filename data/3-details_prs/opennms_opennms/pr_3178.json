{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk4ODgwODQy", "number": 3178, "title": "NMS-12980: handle all ifOperStatus values in SNMP interface poller", "bodyText": "All Contributors\n\n Have you read and followed our Contribution Guidelines?\n Have you made an issue in the OpenNMS issue tracker?If so, you should:\n\nupdate the title of this PR to be of the format: ${JIRA-ISSUE-NUMBER}: subject of pull request\nupdate the JIRA link at the bottom of this comment to refer to the real issue number\nprefix your commit messages with the issue number, if possible\n\n\n Have you made a comment in that issue which points back to this PR?\n Have you updated the JIRA link at the bottom of this comment to link to your issue?\n If this is a new or updated feature, is there documentation for the new behavior?\n If this is new code, are there unit and/or integration tests?\n If this PR targets a foundation-* branch, does it avoid changing files in $OPENNMS_HOME/etc/?\n\nPull Request Process\nOne or more reviewers should be assigned to each PR.\nIf you know that a particular person is subject matter expert in the area your PR affects, feel free to assign one or more reviewers when you create this PR, otherwise reviewers will be assigned for you.\nIf you have made additions or changes to the documentation, or if you need documentation for these code changes, please make sure a technical writer has looked it over.\nOnce the reviewer(s) accept the PR and the branch passes continuous integration, the PR is eligible for merge.\nAt that time, if you have commit access (are an OpenNMS Group employee or a member of the Order of the Green Polo) you are welcome to merge the PR.\nOtherwise, a reviewer can merge it for you.\nThanks for taking time to contribute!\nExternal References\n\nJIRA (Issue Tracker): http://issues.opennms.org/browse/NMS-12980", "createdAt": "2020-10-06T23:01:28Z", "url": "https://github.com/OpenNMS/opennms/pull/3178", "merged": true, "mergeCommit": {"oid": "a4691a07ced525c02a858b2829d43633a4f23f1e"}, "closed": true, "closedAt": "2020-11-20T15:21:30Z", "author": {"login": "dschlenk"}, "timelineItems": {"totalCount": 38, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc5NSFWgH2gAyNDk4ODgwODQyOmY1ZDg4MTFiNDAyY2UyMTIzMzcxZjJjM2ExZTFlYzU0NDYzY2NlNDM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdY6ZaSAFqTUyMjU3NjIzOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f5d8811b402ce2123371f2c3a1e1ec54463cce43", "author": {"user": {"login": "dschlenk", "name": "David Schlenk"}}, "url": "https://github.com/OpenNMS/opennms/commit/f5d8811b402ce2123371f2c3a1e1ec54463cce43", "committedDate": "2020-07-28T02:48:17Z", "message": "refactor interface statuses to an enum"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "66e6c93ffee560855270b2d1c46d392cd2b98323", "author": {"user": {"login": "dschlenk", "name": "David Schlenk"}}, "url": "https://github.com/OpenNMS/opennms/commit/66e6c93ffee560855270b2d1c46d392cd2b98323", "committedDate": "2020-07-28T03:06:48Z", "message": "test, too"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c572a07882cd7ef518afd5b437ee1dc0ca92c0e5", "author": {"user": {"login": "dschlenk", "name": "David Schlenk"}}, "url": "https://github.com/OpenNMS/opennms/commit/c572a07882cd7ef518afd5b437ee1dc0ca92c0e5", "committedDate": "2020-07-28T03:14:57Z", "message": "moar"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8cf8cb1ad49e0cbc6a185dd8f52eb0e98fec46e3", "author": {"user": {"login": "dschlenk", "name": "David Schlenk"}}, "url": "https://github.com/OpenNMS/opennms/commit/8cf8cb1ad49e0cbc6a185dd8f52eb0e98fec46e3", "committedDate": "2020-07-29T03:15:01Z", "message": "WIP but this laptop keeps blue screening"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2297d66bc86290dad34ecb1831346d355b4c45f5", "author": {"user": {"login": "dschlenk", "name": "David Schlenk"}}, "url": "https://github.com/OpenNMS/opennms/commit/2297d66bc86290dad34ecb1831346d355b4c45f5", "committedDate": "2020-07-30T21:52:22Z", "message": "WIP"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e63187b8bd843667ca4d065ace686ffc140eef4e", "author": {"user": {"login": "dschlenk", "name": "David Schlenk"}}, "url": "https://github.com/OpenNMS/opennms/commit/e63187b8bd843667ca4d065ace686ffc140eef4e", "committedDate": "2020-07-31T02:15:16Z", "message": "i think perhaps if you are not using criteria then interface elements do\nnothing so somehow this has to get configured somewhere else"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "95b876f1ff69ed95aca8fb64071ec2a4fe5711b0", "author": {"user": {"login": "dschlenk", "name": "David Schlenk"}}, "url": "https://github.com/OpenNMS/opennms/commit/95b876f1ff69ed95aca8fb64071ec2a4fe5711b0", "committedDate": "2020-07-31T03:39:15Z", "message": "fixes p1"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1df6f6bf917084536d8819dd0e634867a35210fd", "author": {"user": {"login": "dschlenk", "name": "David Schlenk"}}, "url": "https://github.com/OpenNMS/opennms/commit/1df6f6bf917084536d8819dd0e634867a35210fd", "committedDate": "2020-07-31T04:17:22Z", "message": "missing annotation; moar logs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f6bf099094c01ae748d61a1106dc28239207717", "author": {"user": {"login": "dschlenk", "name": "David Schlenk"}}, "url": "https://github.com/OpenNMS/opennms/commit/2f6bf099094c01ae748d61a1106dc28239207717", "committedDate": "2020-08-01T04:13:52Z", "message": "let's document the SNMP interface poller!"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e7fca07324a6a8a8891ccfdffd2b133df93002bc", "author": {"user": {"login": "dschlenk", "name": "David Schlenk"}}, "url": "https://github.com/OpenNMS/opennms/commit/e7fca07324a6a8a8891ccfdffd2b133df93002bc", "committedDate": "2020-08-02T03:18:02Z", "message": "mumble"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9809906b05d9a397ec507466d875c5e34a67ee24", "author": {"user": {"login": "dschlenk", "name": "David Schlenk"}}, "url": "https://github.com/OpenNMS/opennms/commit/9809906b05d9a397ec507466d875c5e34a67ee24", "committedDate": "2020-08-07T03:13:42Z", "message": "test config"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "85a782ca4882f76a791964a8830f9079c0a76307", "author": {"user": {"login": "dschlenk", "name": "David Schlenk"}}, "url": "https://github.com/OpenNMS/opennms/commit/85a782ca4882f76a791964a8830f9079c0a76307", "committedDate": "2020-08-07T03:42:31Z", "message": "refactor so effective up/down values get returned when requested"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e8c930384537c016b082208db0dac4193738d313", "author": {"user": {"login": "dschlenk", "name": "David Schlenk"}}, "url": "https://github.com/OpenNMS/opennms/commit/e8c930384537c016b082208db0dac4193738d313", "committedDate": "2020-08-08T02:54:59Z", "message": "cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fcffedf466c9d3fc1cf325a9c954c02bdf872dd6", "author": {"user": {"login": "dschlenk", "name": "David Schlenk"}}, "url": "https://github.com/OpenNMS/opennms/commit/fcffedf466c9d3fc1cf325a9c954c02bdf872dd6", "committedDate": "2020-08-11T16:04:02Z", "message": "Merge branch 'feature/enhanceSnmpIfacePoller' of github.com:dschlenk/opennms into feature/enhanceSnmpIfacePoller"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "591cf3283d95f95ba437a0da39b0d17f8697da55", "author": {"user": {"login": "dschlenk", "name": "David Schlenk"}}, "url": "https://github.com/OpenNMS/opennms/commit/591cf3283d95f95ba437a0da39b0d17f8697da55", "committedDate": "2020-08-14T19:51:10Z", "message": "WIP"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce4d2d98e857766526bc25938ec8edc9a1f78e01", "author": {"user": {"login": "dschlenk", "name": "David Schlenk"}}, "url": "https://github.com/OpenNMS/opennms/commit/ce4d2d98e857766526bc25938ec8edc9a1f78e01", "committedDate": "2020-10-06T16:54:29Z", "message": "Revert \"WIP\"\n\nThis reverts commit 591cf3283d95f95ba437a0da39b0d17f8697da55."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a5e82bbfac5416b242e39da839a9c05555b1eeaa", "author": {"user": {"login": "dschlenk", "name": "David Schlenk"}}, "url": "https://github.com/OpenNMS/opennms/commit/a5e82bbfac5416b242e39da839a9c05555b1eeaa", "committedDate": "2020-10-06T20:12:38Z", "message": "events for down-ish states of ifOperStatus; update docs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5962813edc4bc4fb1cab531d86505e614a46aaac", "author": {"user": {"login": "dschlenk", "name": "David Schlenk"}}, "url": "https://github.com/OpenNMS/opennms/commit/5962813edc4bc4fb1cab531d86505e614a46aaac", "committedDate": "2020-10-06T22:03:37Z", "message": "Merge branch 'develop' into feature/enhanceSnmpIfacePoller"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a9f557fb0833f8240963cbf64b634b953a5c0ca3", "author": {"user": {"login": "dschlenk", "name": "David Schlenk"}}, "url": "https://github.com/OpenNMS/opennms/commit/a9f557fb0833f8240963cbf64b634b953a5c0ca3", "committedDate": "2020-10-07T19:49:07Z", "message": "explicit default values for attributes with default values"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1643764acc78831e870b03889effaf709026313c", "author": {"user": {"login": "dschlenk", "name": "David Schlenk"}}, "url": "https://github.com/OpenNMS/opennms/commit/1643764acc78831e870b03889effaf709026313c", "committedDate": "2020-10-07T19:49:45Z", "message": "Merge branch 'feature/enhanceSnmpIfacePoller' of github.com:dschlenk/opennms into feature/enhanceSnmpIfacePoller"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "29eca1ad5aa5f2c0ed234e5d22b72c6db7a53662", "author": {"user": {"login": "dschlenk", "name": "David Schlenk"}}, "url": "https://github.com/OpenNMS/opennms/commit/29eca1ad5aa5f2c0ed234e5d22b72c6db7a53662", "committedDate": "2020-10-07T22:48:59Z", "message": "reduce interface down alarms from polling & traps"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ad27a87734280737aa86ba036f169959c614bec3", "author": {"user": {"login": "dschlenk", "name": "David Schlenk"}}, "url": "https://github.com/OpenNMS/opennms/commit/ad27a87734280737aa86ba036f169959c614bec3", "committedDate": "2020-10-30T16:52:07Z", "message": "forgot to remove interface from reduction key to make it possible to reduce SNMP_Link_Down and interfaceOperDown alarms"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6e726f91f246126711e459bd3f31964676daf9b7", "author": {"user": {"login": "dschlenk", "name": "David Schlenk"}}, "url": "https://github.com/OpenNMS/opennms/commit/6e726f91f246126711e459bd3f31964676daf9b7", "committedDate": "2020-10-30T17:23:06Z", "message": "spelling"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7d68b8a2d11f2699f426be0830fb8052bf9990c", "author": {"user": {"login": "dschlenk", "name": "David Schlenk"}}, "url": "https://github.com/OpenNMS/opennms/commit/b7d68b8a2d11f2699f426be0830fb8052bf9990c", "committedDate": "2020-10-30T18:41:26Z", "message": "if now in a down state, send down event(s) when prior value was not down instead of explicitly only an up value"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "57d70435c2fc3766f6f34f2c9f4fb3e03fc6beb0", "author": {"user": {"login": "dschlenk", "name": "David Schlenk"}}, "url": "https://github.com/OpenNMS/opennms/commit/57d70435c2fc3766f6f34f2c9f4fb3e03fc6beb0", "committedDate": "2020-10-30T18:45:47Z", "message": "Merge branch 'develop' into feature/enhanceSnmpIfacePoller"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "960493e6356c407f6441c591362024acd0987426", "author": {"user": {"login": "dschlenk", "name": "David Schlenk"}}, "url": "https://github.com/OpenNMS/opennms/commit/960493e6356c407f6441c591362024acd0987426", "committedDate": "2020-10-30T22:39:36Z", "message": "simplify and correct behavior for sending up after any non-up state"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f43b9147d2aa19a23d2eccb5b475c3d8f68dce6b", "author": {"user": {"login": "dschlenk", "name": "David Schlenk"}}, "url": "https://github.com/OpenNMS/opennms/commit/f43b9147d2aa19a23d2eccb5b475c3d8f68dce6b", "committedDate": "2020-10-31T00:21:16Z", "message": "updated for accuracy"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyMjQ3MTA4", "url": "https://github.com/OpenNMS/opennms/pull/3178#pullrequestreview-522247108", "createdAt": "2020-11-03T07:52:24Z", "commit": {"oid": "f43b9147d2aa19a23d2eccb5b475c3d8f68dce6b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwNzo1MjoyNFrOHsjIlQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwNzo1MjoyNFrOHsjIlQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjQ3NTAyOQ==", "bodyText": "Maybe \"The not present state\" like in the other definitions.", "url": "https://github.com/OpenNMS/opennms/pull/3178#discussion_r516475029", "createdAt": "2020-11-03T07:52:24Z", "author": {"login": "christianpape"}, "path": "opennms-base-assembly/src/main/filtered/etc/events/opennms.pollerd.events.xml", "diffHunk": "@@ -135,8 +135,91 @@\n             ifindex:%parm[snmpifindex]% ifdescr:%parm[snmpifdescr]%\n         </logmsg>\n       <severity>Minor</severity>\n-      <alarm-data reduction-key=\"%uei%:%dpname%:%nodeid%:%interface%:%parm[snmpifindex]%\" alarm-type=\"1\" auto-clean=\"false\"/>\n-   </event>\n+      <alarm-data reduction-key=\"%uei%:%dpname%:%nodeid%:%parm[snmpifindex]%\" alarm-type=\"1\" auto-clean=\"false\">\n+          <update-field field-name=\"severity\" update-on-reduction=\"true\"/>\n+      </alarm-data>\n+   </event>\n+    <event>\n+        <uei>uei.opennms.org/nodes/snmp/interfaceOperTesting</uei>\n+        <event-label>OpenNMS-defined node event: snmp interface Oper Status Testing</event-label>\n+        <descr>&lt;p>The operational status of interface is testing\n+            &lt;/p> &lt;p>This event is generated when an snmp poll on interface find the operational status testing.\n+            &lt;/p>&lt;p>The testing state indicates that some tests must be performed on the interface. Once completed\n+            the state may change to up, dormant, or down, as appropriate.&lt;/p>\n+            &lt;p>Params %parm[all]% &lt;/p></descr>\n+        <logmsg dest=\"logndisplay\">Operational status Testing on interface ifname:%parm[snmpifname]%\n+            ifindex:%parm[snmpifindex]% ifdescr:%parm[snmpifdescr]%\n+        </logmsg>\n+        <severity>Warning</severity>\n+        <alarm-data reduction-key=\"uei.opennms.org/nodes/snmp/interfaceOperDown:%dpname%:%nodeid%:%parm[snmpifindex]%\" alarm-type=\"1\" auto-clean=\"false\">\n+            <update-field field-name=\"severity\" update-on-reduction=\"true\"/>\n+        </alarm-data>\n+    </event>\n+    <event>\n+        <uei>uei.opennms.org/nodes/snmp/interfaceOperUnknown</uei>\n+        <event-label>OpenNMS-defined node event: snmp interface Oper Status Unknown</event-label>\n+        <descr>&lt;p>The operational status of interface is unknown\n+            &lt;/p> &lt;p>This event is generated when an snmp poll on interface find the operational status unknown.\n+            &lt;/p> &lt;p>The unknown state indicates that the state of the interface can not be\n+            ascertained.&lt;/p>\n+            &lt;p>Params %parm[all]% &lt;/p></descr>\n+        <logmsg dest=\"logndisplay\">Operational status Unknown on interface ifname:%parm[snmpifname]%\n+            ifindex:%parm[snmpifindex]% ifdescr:%parm[snmpifdescr]%\n+        </logmsg>\n+        <severity>Minor</severity>\n+        <alarm-data reduction-key=\"uei.opennms.org/nodes/snmp/interfaceOperDown:%dpname%:%nodeid%:%parm[snmpifindex]%\" alarm-type=\"1\" auto-clean=\"false\">\n+            <update-field field-name=\"severity\" update-on-reduction=\"true\"/>\n+        </alarm-data>\n+    </event>\n+    <event>\n+        <uei>uei.opennms.org/nodes/snmp/interfaceOperDormant</uei>\n+        <event-label>OpenNMS-defined node event: snmp interface Oper Status Dormant</event-label>\n+        <descr>&lt;p>The operational status of interface is dormant\n+            &lt;/p> &lt;p>This event is generated when an snmp poll on interface find the operational status dormant.\n+            &lt;/p>&lt;p>The dormant state indicates that the relevant interface is not actually in a condition\n+            to pass packets but is in a pending state, waiting for some external event.&lt;/p>\n+            &lt;p>Params %parm[all]% &lt;/p></descr>\n+        <logmsg dest=\"logndisplay\">Operational status Dormant on interface ifname:%parm[snmpifname]%\n+            ifindex:%parm[snmpifindex]% ifdescr:%parm[snmpifdescr]%\n+        </logmsg>\n+        <severity>Warning</severity>\n+        <alarm-data reduction-key=\"uei.opennms.org/nodes/snmp/interfaceOperDown:%dpname%:%nodeid%:%parm[snmpifindex]%\" alarm-type=\"1\" auto-clean=\"false\">\n+            <update-field field-name=\"severity\" update-on-reduction=\"true\"/>\n+        </alarm-data>\n+    </event>\n+    <event>\n+        <uei>uei.opennms.org/nodes/snmp/interfaceOperNotPresent</uei>\n+        <event-label>OpenNMS-defined node event: snmp interface Oper Status Not Present</event-label>\n+        <descr>&lt;p>The operational status of interface is not present\n+            &lt;/p> &lt;p>This event is generated when an snmp poll on interface find the operational status not present.\n+            &lt;/p> &lt;p>The notPresent state indicates that the interface is down specifically because", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f43b9147d2aa19a23d2eccb5b475c3d8f68dce6b"}, "originalPosition": 63}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyMjU4MDg0", "url": "https://github.com/OpenNMS/opennms/pull/3178#pullrequestreview-522258084", "createdAt": "2020-11-03T08:11:11Z", "commit": {"oid": "f43b9147d2aa19a23d2eccb5b475c3d8f68dce6b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwODoxMToxMVrOHsjqbg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwODoxMToxMVrOHsjqbg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjQ4MzY5NA==", "bodyText": "Good catch!", "url": "https://github.com/OpenNMS/opennms/pull/3178#discussion_r516483694", "createdAt": "2020-11-03T08:11:11Z", "author": {"login": "christianpape"}, "path": "opennms-config-model/src/main/java/org/opennms/netmgt/config/snmpinterfacepoller/Package.java", "diffHunk": "@@ -231,7 +231,7 @@ public boolean equals(final Object obj) {\n \n         if (obj instanceof Package) {\n             final Package that = (Package)obj;\n-            return Objects.equals(this.m_name, this.m_name)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f43b9147d2aa19a23d2eccb5b475c3d8f68dce6b"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyMjYxNTIz", "url": "https://github.com/OpenNMS/opennms/pull/3178#pullrequestreview-522261523", "createdAt": "2020-11-03T08:16:49Z", "commit": {"oid": "f43b9147d2aa19a23d2eccb5b475c3d8f68dce6b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwODoxNjo0OVrOHsj0vQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwODoxNjo0OVrOHsj0vQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjQ4NjMzMw==", "bodyText": "Copyright (C) 2020 The OpenNMS Group, Inc.", "url": "https://github.com/OpenNMS/opennms/pull/3178#discussion_r516486333", "createdAt": "2020-11-03T08:16:49Z", "author": {"login": "christianpape"}, "path": "opennms-config/src/test/java/org/opennms/netmgt/config/SnmpInterfacePollerConfigFactoryTest.java", "diffHunk": "@@ -0,0 +1,163 @@\n+/*******************************************************************************\n+ * This file is part of OpenNMS(R).\n+ *\n+ * Copyright (C) 2006-2014 The OpenNMS Group, Inc.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f43b9147d2aa19a23d2eccb5b475c3d8f68dce6b"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyMjYyODQw", "url": "https://github.com/OpenNMS/opennms/pull/3178#pullrequestreview-522262840", "createdAt": "2020-11-03T08:18:49Z", "commit": {"oid": "f43b9147d2aa19a23d2eccb5b475c3d8f68dce6b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwODoxODo1MFrOHsj4nA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwODoxODo1MFrOHsj4nA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjQ4NzMyNA==", "bodyText": "\"In order for a this daemon\" -> \"In order for this daemon\"", "url": "https://github.com/OpenNMS/opennms/pull/3178#discussion_r516487324", "createdAt": "2020-11-03T08:18:50Z", "author": {"login": "christianpape"}, "path": "opennms-doc/guide-admin/src/asciidoc/text/provisioning/examples.adoc", "diffHunk": "@@ -280,6 +280,13 @@ appropriate action. If during the policy evaluation process any policy\n matches for a \u201cDO_NOT_PERSIST\u201d action, no further policy evaluations\n will happen for that particular entity (IP Interface, SNMP Interface).\n \n+Another use of this policy is to mark interfaces for polling by the SNMP Interface Poller. The SNMP Interface Poller is a separate daemon that is disabled by default. In order for a this daemon to do any work, some SNMP interfaces need to be selected for polling.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f43b9147d2aa19a23d2eccb5b475c3d8f68dce6b"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyMjY0MDEx", "url": "https://github.com/OpenNMS/opennms/pull/3178#pullrequestreview-522264011", "createdAt": "2020-11-03T08:20:43Z", "commit": {"oid": "f43b9147d2aa19a23d2eccb5b475c3d8f68dce6b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwODoyMDo0NFrOHsj8Sg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwODoyMDo0NFrOHsj8Sg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjQ4ODI2Ng==", "bodyText": "What?", "url": "https://github.com/OpenNMS/opennms/pull/3178#discussion_r516488266", "createdAt": "2020-11-03T08:20:44Z", "author": {"login": "christianpape"}, "path": "opennms-doc/guide-admin/src/asciidoc/text/provisioning/examples.adoc", "diffHunk": "@@ -280,6 +280,13 @@ appropriate action. If during the policy evaluation process any policy\n matches for a \u201cDO_NOT_PERSIST\u201d action, no further policy evaluations\n will happen for that particular entity (IP Interface, SNMP Interface).\n \n+Another use of this policy is to mark interfaces for polling by the SNMP Interface Poller. The SNMP Interface Poller is a separate daemon that is disabled by default. In order for a this daemon to do any work, some SNMP interfaces need to be selected for polling.\n+Use the \"ENABLE_POLLING\" and \"DISABLE_POLLING\" actions available in this policy in order to manage which SNMP interfaces are polled by this daemon.\n+Let's create another policy named _pollVoIPDialPeers_ that marks interfaces with _ifType_ _104_. We'll set the _action_ to _ENABLE_POLLING_ and _matchBehavior_ to _ALL_PARAMETERS_.\n+Add a parameter for _ifType_ as the key and _104_ as the value.\n+\n+Decide to move all your meetings to Minecraft and Mumble? Decommission your voice circuits and flip the the action to _DISABLE_POLLING_!", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f43b9147d2aa19a23d2eccb5b475c3d8f68dce6b"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyMjY0OTY2", "url": "https://github.com/OpenNMS/opennms/pull/3178#pullrequestreview-522264966", "createdAt": "2020-11-03T08:22:12Z", "commit": {"oid": "f43b9147d2aa19a23d2eccb5b475c3d8f68dce6b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwODoyMjoxMlrOHsj_PQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwODoyMjoxMlrOHsj_PQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjQ4OTAyMQ==", "bodyText": "a SNMP GET", "url": "https://github.com/OpenNMS/opennms/pull/3178#discussion_r516489021", "createdAt": "2020-11-03T08:22:12Z", "author": {"login": "christianpape"}, "path": "opennms-doc/guide-admin/src/asciidoc/text/snmp-poller/concepts.adoc", "diffHunk": "@@ -0,0 +1,211 @@\n+\n+// Allow GitHub image rendering\n+:imagesdir: ../../images\n+\n+=== SNMP Interface Poller\n+\n+_{opennms-product-name}_ can monitor the status of an SNMP interface that is not directly monitored by a <<ga-service-assurance, Service Assurance>> monitor.\n+\n+The SNMP Interface Poller is a separate service that uses a node interface, typically a management interface, to get administration and operational status for other interfaces present on the device.\n+On a configurable time interval an SNMP GET request is made for two specific objects in an `ifEntry` of the `ifTable` defined in the `IF-MIB`:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f43b9147d2aa19a23d2eccb5b475c3d8f68dce6b"}, "originalPosition": 10}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyMjcyNDg2", "url": "https://github.com/OpenNMS/opennms/pull/3178#pullrequestreview-522272486", "createdAt": "2020-11-03T08:33:26Z", "commit": {"oid": "f43b9147d2aa19a23d2eccb5b475c3d8f68dce6b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwODozMzoyNlrOHskWBA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwODozMzoyNlrOHskWBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjQ5NDg1Mg==", "bodyText": "Please use .* imports only for static imports.", "url": "https://github.com/OpenNMS/opennms/pull/3178#discussion_r516494852", "createdAt": "2020-11-03T08:33:26Z", "author": {"login": "christianpape"}, "path": "opennms-services/src/main/java/org/opennms/netmgt/snmpinterfacepoller/pollable/PollableSnmpInterface.java", "diffHunk": "@@ -28,23 +28,21 @@\n \n package org.opennms.netmgt.snmpinterfacepoller.pollable;\n \n-import java.util.ArrayList;\n-import java.util.Collection;\n-import java.util.Date;\n-import java.util.HashMap;\n-import java.util.List;\n-import java.util.Map;\n+import java.util.*;\n \n import org.opennms.netmgt.events.api.EventConstants;\n import org.opennms.netmgt.model.OnmsSnmpInterface;\n import org.opennms.netmgt.poller.PollStatus;\n+import org.opennms.netmgt.snmpinterfacepoller.pollable.SnmpInterfaceStatus.*;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f43b9147d2aa19a23d2eccb5b475c3d8f68dce6b"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyMjc0MjQw", "url": "https://github.com/OpenNMS/opennms/pull/3178#pullrequestreview-522274240", "createdAt": "2020-11-03T08:35:55Z", "commit": {"oid": "f43b9147d2aa19a23d2eccb5b475c3d8f68dce6b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwODozNTo1NVrOHskbKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwODozNTo1NVrOHskbKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjQ5NjE2OQ==", "bodyText": "Please use { ... } for blocks, even for one-line blocks.", "url": "https://github.com/OpenNMS/opennms/pull/3178#discussion_r516496169", "createdAt": "2020-11-03T08:35:55Z", "author": {"login": "christianpape"}, "path": "opennms-services/src/main/java/org/opennms/netmgt/snmpinterfacepoller/pollable/PollableSnmpInterface.java", "diffHunk": "@@ -66,75 +64,105 @@\n     private String m_name;\n         \n     private String m_criteria;\n+\n+    private Set<SnmpInterfaceStatus> m_upValues;\n+\n+    private Set<SnmpInterfaceStatus> m_downValues;\n         \n     private SnmpAgentConfig m_agentConfig;\n     \n     public static class SnmpMinimalPollInterface {\n-        \n-    \tstatic final int IF_UP=1;\n-    \tstatic final int IF_DOWN=2;\n-    \tstatic final int IF_UNKNOWN=0;\n-        \n-        private final String[] s_statusNames = {\"Unknown\",\"InterfaceUp\", \"InterfaceDown\"}; \n-        \n+\n         int ifindex;\n-        int adminstatus;\n-        int operstatus;\n-        \n+        SnmpInterfaceStatus adminstatus;\n+        SnmpInterfaceStatus operstatus;\n+\n         PollStatus m_status;\n-        \n-        public SnmpMinimalPollInterface(int ifindex, int adminstatus,\n-                int operstatus) {\n+\n+        PollStatus m_operPollStatus;\n+        PollStatus m_adminPollStatus;\n+\n+        public SnmpMinimalPollInterface(int ifindex, SnmpInterfaceStatus adminstatus,\n+                SnmpInterfaceStatus operstatus) {\n             this.ifindex = ifindex;\n             this.adminstatus = adminstatus;\n             this.operstatus = operstatus;\n             m_status = PollStatus.unknown();\n         }\n \n-        public String decodeStatus(int status) {\n-            if (status >= 0 && status <= 2) {\n-                return s_statusNames[status];\n-            }\n-            return s_statusNames[0];\n-        }\n-\n         public int getIfindex() {\n             return ifindex;\n         }\n         public void setIfindex(int ifindex) {\n             this.ifindex = ifindex;\n         }\n-        public int getAdminstatus() {\n+        public SnmpInterfaceStatus getAdminstatus() {\n             return adminstatus;\n         }\n-        \n-        public void setAdminstatus(int adminstatus) {\n-            if (adminstatus > 2 )\n-                this.adminstatus = IF_UNKNOWN;\n-            else this.adminstatus = adminstatus;\n+\n+        /**\n+         *\n+         * @param adminstatus valid values are up(1), down(2), testing(3) according to RFC 2863. Value will be set to\n+         *                    invalid(0) in the case where an improper value is attempted to be set.\n+         */\n+        public void setAdminstatus(SnmpInterfaceStatus adminstatus) {\n+            if (adminstatus.getMibValue() > 3 )", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f43b9147d2aa19a23d2eccb5b475c3d8f68dce6b"}, "originalPosition": 100}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyMjc3MjIw", "url": "https://github.com/OpenNMS/opennms/pull/3178#pullrequestreview-522277220", "createdAt": "2020-11-03T08:40:29Z", "commit": {"oid": "f43b9147d2aa19a23d2eccb5b475c3d8f68dce6b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f2553aa96aa541f2be0829e0a60a095fab2013d", "author": {"user": {"login": "dschlenk", "name": "David Schlenk"}}, "url": "https://github.com/OpenNMS/opennms/commit/6f2553aa96aa541f2be0829e0a60a095fab2013d", "committedDate": "2020-11-03T14:46:41Z", "message": "fixes per review from @christianpape"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyNTc2MjM5", "url": "https://github.com/OpenNMS/opennms/pull/3178#pullrequestreview-522576239", "createdAt": "2020-11-03T14:53:40Z", "commit": {"oid": "6f2553aa96aa541f2be0829e0a60a095fab2013d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3909, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}