{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI4MjkxNzM1", "number": 3227, "title": "NMS-12967: Correcting clock misconfiguration", "bodyText": "This corrects flows exported by devices with incorrect clock settings.\nIf the clock differs to much, the receive time is assumed to be more correct than the exported clock time. Then, all time related properties of the flows are corrected by the detected delta.\nThis is a follow-up of #3226.\nExternal References\n\nJIRA (Issue Tracker): http://issues.opennms.org/browse/NMS-12967 and https://issues.opennms.org/browse/NMS-13023", "createdAt": "2020-11-26T23:04:40Z", "url": "https://github.com/OpenNMS/opennms/pull/3227", "merged": true, "mergeCommit": {"oid": "22949ead64c623dd7f99bb23d9f3032912086f0d"}, "closed": true, "closedAt": "2020-12-01T08:53:13Z", "author": {"login": "fooker"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdgi0NwgFqTUzOTc2ODIwOA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdhr6h3gFqTU0MTI5NDQ4OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM5NzY4MjA4", "url": "https://github.com/OpenNMS/opennms/pull/3227#pullrequestreview-539768208", "createdAt": "2020-11-27T07:56:37Z", "commit": {"oid": "bb097b753e43102c9456cc975ced651308471c86"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QwNzo1NjozN1rOH60JEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QwNzo1NjozN1rOH60JEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTQzMzc0Nw==", "bodyText": "typo, should be foreignId", "url": "https://github.com/OpenNMS/opennms/pull/3227#discussion_r531433747", "createdAt": "2020-11-27T07:56:37Z", "author": {"login": "christianpape"}, "path": "features/flows/kafka-persistence/src/main/java/org/opennms/netmgt/flows/persistence/model/NodeInfoOrBuilder.java", "diffHunk": "@@ -37,44 +37,55 @@\n \n   /**\n    * <code>string foreign_source = 1;</code>\n+   * @return The foreignSource.\n    */\n   java.lang.String getForeignSource();\n   /**\n    * <code>string foreign_source = 1;</code>\n+   * @return The bytes for foreignSource.\n    */\n   com.google.protobuf.ByteString\n       getForeignSourceBytes();\n \n   /**\n    * <code>string foregin_id = 2;</code>\n+   * @return The foreginId.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bb097b753e43102c9456cc975ced651308471c86"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM5NzcxNTc5", "url": "https://github.com/OpenNMS/opennms/pull/3227#pullrequestreview-539771579", "createdAt": "2020-11-27T08:03:18Z", "commit": {"oid": "bb097b753e43102c9456cc975ced651308471c86"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4903ae6623913b2aefe90040515edfe1032dbc4c", "author": {"user": {"login": "fooker", "name": "Dustin Frisch"}}, "url": "https://github.com/OpenNMS/opennms/commit/4903ae6623913b2aefe90040515edfe1032dbc4c", "committedDate": "2020-11-27T10:40:15Z", "message": "NMS-12967: Adding docs"}, "afterCommit": {"oid": "ef2c46288b928181277fc9fada71abfc765b4059", "author": {"user": {"login": "fooker", "name": "Dustin Frisch"}}, "url": "https://github.com/OpenNMS/opennms/commit/ef2c46288b928181277fc9fada71abfc765b4059", "committedDate": "2020-11-27T11:51:15Z", "message": "NMS-12967: Adding docs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM5OTczNjc0", "url": "https://github.com/OpenNMS/opennms/pull/3227#pullrequestreview-539973674", "createdAt": "2020-11-27T13:18:35Z", "commit": {"oid": "ef2c46288b928181277fc9fada71abfc765b4059"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM5OTc1NDgy", "url": "https://github.com/OpenNMS/opennms/pull/3227#pullrequestreview-539975482", "createdAt": "2020-11-27T13:21:25Z", "commit": {"oid": "ef2c46288b928181277fc9fada71abfc765b4059"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QxMzoyMToyNVrOH6-M6g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QxMzoyNDoxNlrOH6-ShA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTU5ODU3MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Flow analyses uses timestamps exposed by the underlying flow management protocol.\n          \n          \n            \n            Flow analyses use timestamps exposed by the underlying flow management protocol.", "url": "https://github.com/OpenNMS/opennms/pull/3227#discussion_r531598570", "createdAt": "2020-11-27T13:21:25Z", "author": {"login": "Bonrob2"}, "path": "opennms-doc/guide-admin/src/asciidoc/text/flows/setup.adoc", "diffHunk": "@@ -216,3 +216,25 @@ admin@opennms()> config:edit org.opennms.features.flows.persistence.kafka\n admin@opennms()> config:property-set bootstrap.servers 127.0.0.1:9092\n admin@opennms()> config:update\n ----\n+\n+=== Correcting clock skew\n+\n+Flow analyses uses timestamps exposed by the underlying flow management protocol.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ef2c46288b928181277fc9fada71abfc765b4059"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTU5OTIwOA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            If the routers clock differs from the actual time, this will be reflected in received flows and therefore skew up further analysis and aggregation.\n          \n          \n            \n            If the router's clock differs from the actual time, this will be reflected in received flows and therefore skew up further analysis and aggregation.", "url": "https://github.com/OpenNMS/opennms/pull/3227#discussion_r531599208", "createdAt": "2020-11-27T13:22:37Z", "author": {"login": "Bonrob2"}, "path": "opennms-doc/guide-admin/src/asciidoc/text/flows/setup.adoc", "diffHunk": "@@ -216,3 +216,25 @@ admin@opennms()> config:edit org.opennms.features.flows.persistence.kafka\n admin@opennms()> config:property-set bootstrap.servers 127.0.0.1:9092\n admin@opennms()> config:update\n ----\n+\n+=== Correcting clock skew\n+\n+Flow analyses uses timestamps exposed by the underlying flow management protocol.\n+These timestamps will be set depending on the clock of the exporting router.\n+If the routers clock differs from the actual time, this will be reflected in received flows and therefore skew up further analysis and aggregation.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ef2c46288b928181277fc9fada71abfc765b4059"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTU5OTgwOA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            To do so, it compares the current time of the exporting device wit tha actual time when the packet has been received.\n          \n          \n            \n            To do so, it compares the current time of the exporting device with the actual time when the packet has been received.", "url": "https://github.com/OpenNMS/opennms/pull/3227#discussion_r531599808", "createdAt": "2020-11-27T13:23:52Z", "author": {"login": "Bonrob2"}, "path": "opennms-doc/guide-admin/src/asciidoc/text/flows/setup.adoc", "diffHunk": "@@ -216,3 +216,25 @@ admin@opennms()> config:edit org.opennms.features.flows.persistence.kafka\n admin@opennms()> config:property-set bootstrap.servers 127.0.0.1:9092\n admin@opennms()> config:update\n ----\n+\n+=== Correcting clock skew\n+\n+Flow analyses uses timestamps exposed by the underlying flow management protocol.\n+These timestamps will be set depending on the clock of the exporting router.\n+If the routers clock differs from the actual time, this will be reflected in received flows and therefore skew up further analysis and aggregation.\n+\n+_{opennms-product-name}_ can correct the timestamps of a received flow.\n+To do so, it compares the current time of the exporting device wit tha actual time when the packet has been received.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ef2c46288b928181277fc9fada71abfc765b4059"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTYwMDAwNA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            If these times differ by a certain amount, the receive-time will be considered more correct and all timestamps of the flow will be adapted.\n          \n          \n            \n            If these times differ by a certain amount, the receive time will be considered more correct and all timestamps of the flow will be adapted.", "url": "https://github.com/OpenNMS/opennms/pull/3227#discussion_r531600004", "createdAt": "2020-11-27T13:24:16Z", "author": {"login": "Bonrob2"}, "path": "opennms-doc/guide-admin/src/asciidoc/text/flows/setup.adoc", "diffHunk": "@@ -216,3 +216,25 @@ admin@opennms()> config:edit org.opennms.features.flows.persistence.kafka\n admin@opennms()> config:property-set bootstrap.servers 127.0.0.1:9092\n admin@opennms()> config:update\n ----\n+\n+=== Correcting clock skew\n+\n+Flow analyses uses timestamps exposed by the underlying flow management protocol.\n+These timestamps will be set depending on the clock of the exporting router.\n+If the routers clock differs from the actual time, this will be reflected in received flows and therefore skew up further analysis and aggregation.\n+\n+_{opennms-product-name}_ can correct the timestamps of a received flow.\n+To do so, it compares the current time of the exporting device wit tha actual time when the packet has been received.\n+If these times differ by a certain amount, the receive-time will be considered more correct and all timestamps of the flow will be adapted.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ef2c46288b928181277fc9fada71abfc765b4059"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM5OTgxNzU0", "url": "https://github.com/OpenNMS/opennms/pull/3227#pullrequestreview-539981754", "createdAt": "2020-11-27T13:30:57Z", "commit": {"oid": "ef2c46288b928181277fc9fada71abfc765b4059"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQwMTc3ODI4", "url": "https://github.com/OpenNMS/opennms/pull/3227#pullrequestreview-540177828", "createdAt": "2020-11-27T20:01:57Z", "commit": {"oid": "ef2c46288b928181277fc9fada71abfc765b4059"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "afd7d2edc801b797351a4a89892bcbe1431378d4", "author": {"user": {"login": "fooker", "name": "Dustin Frisch"}}, "url": "https://github.com/OpenNMS/opennms/commit/afd7d2edc801b797351a4a89892bcbe1431378d4", "committedDate": "2020-11-30T10:24:47Z", "message": "NSM-12967: Fix doc typos\n\nCo-authored-by: Bonrob2 <59453630+Bonrob2@users.noreply.github.com>"}, "afterCommit": {"oid": "8a3280e2851caa883484a6f58f618c6e531f4148", "author": {"user": {"login": "fooker", "name": "Dustin Frisch"}}, "url": "https://github.com/OpenNMS/opennms/commit/8a3280e2851caa883484a6f58f618c6e531f4148", "committedDate": "2020-11-30T10:28:39Z", "message": "NSM-12967: Fix doc typos\n\nCo-authored-by: Bonrob2 <59453630+Bonrob2@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bf32db09d791037700d5d6f5d307df85cd4a6f89", "author": {"user": {"login": "fooker", "name": "Dustin Frisch"}}, "url": "https://github.com/OpenNMS/opennms/commit/bf32db09d791037700d5d6f5d307df85cd4a6f89", "committedDate": "2020-11-30T11:15:19Z", "message": "NMS-12973: Correct clock skew"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1efee95703dcbe1e30831b5fb00e3909672d77c4", "author": {"user": {"login": "fooker", "name": "Dustin Frisch"}}, "url": "https://github.com/OpenNMS/opennms/commit/1efee95703dcbe1e30831b5fb00e3909672d77c4", "committedDate": "2020-11-30T11:15:19Z", "message": "NMS-12967: Adding docs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "82e8c86a07b6cd6bf8a7596b362f417097dd8ee2", "author": {"user": {"login": "fooker", "name": "Dustin Frisch"}}, "url": "https://github.com/OpenNMS/opennms/commit/82e8c86a07b6cd6bf8a7596b362f417097dd8ee2", "committedDate": "2020-11-30T11:15:19Z", "message": "NSM-12967: Fix doc typos\n\nCo-authored-by: Bonrob2 <59453630+Bonrob2@users.noreply.github.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8a3280e2851caa883484a6f58f618c6e531f4148", "author": {"user": {"login": "fooker", "name": "Dustin Frisch"}}, "url": "https://github.com/OpenNMS/opennms/commit/8a3280e2851caa883484a6f58f618c6e531f4148", "committedDate": "2020-11-30T10:28:39Z", "message": "NSM-12967: Fix doc typos\n\nCo-authored-by: Bonrob2 <59453630+Bonrob2@users.noreply.github.com>"}, "afterCommit": {"oid": "82e8c86a07b6cd6bf8a7596b362f417097dd8ee2", "author": {"user": {"login": "fooker", "name": "Dustin Frisch"}}, "url": "https://github.com/OpenNMS/opennms/commit/82e8c86a07b6cd6bf8a7596b362f417097dd8ee2", "committedDate": "2020-11-30T11:15:19Z", "message": "NSM-12967: Fix doc typos\n\nCo-authored-by: Bonrob2 <59453630+Bonrob2@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f976d40f07496f3a1571e40fd41eb2fc0155109", "author": {"user": {"login": "fooker", "name": "Dustin Frisch"}}, "url": "https://github.com/OpenNMS/opennms/commit/5f976d40f07496f3a1571e40fd41eb2fc0155109", "committedDate": "2020-11-30T13:20:50Z", "message": "fixup! NMS-12973: Correct clock skew"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQxMjk0NDg5", "url": "https://github.com/OpenNMS/opennms/pull/3227#pullrequestreview-541294489", "createdAt": "2020-11-30T21:06:35Z", "commit": {"oid": "5f976d40f07496f3a1571e40fd41eb2fc0155109"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3864, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}