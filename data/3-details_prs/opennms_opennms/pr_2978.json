{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA0NzQxNjU2", "number": 2978, "title": "NMS-12650: Restart documentation", "bodyText": "Restart/shutdown documentation\nUpdated thresholding to address formatting issues.\nAll Contributors\n\n Have you read and followed our Contribution Guidelines?\n Have you made an issue in the OpenNMS issue tracker?If so, you should:\n\nupdate the title of this PR to be of the format: ${JIRA-ISSUE-NUMBER}: subject of pull request\nupdate the JIRA link at the bottom of this comment to refer to the real issue number\nprefix your commit messages with the issue number, if possible\n\n\n Have you made a comment in that issue which points back to this PR?\n Have you updated the JIRA link at the bottom of this comment to link to your issue?\n If this is a new or updated feature, is there documentation for the new behavior?\n If this is new code, are there unit and/or integration tests?\n If this PR targets a foundation-* branch, does it avoid changing files in $OPENNMS_HOME/etc/?\n\nPull Request Process\nOne or more reviewers should be assigned to each PR.\nIf you know that a particular person is subject matter expert in the area your PR affects, feel free to assign one or more reviewers when you create this PR, otherwise reviewers will be assigned for you.\nOnce the reviewer(s) accept the PR and the branch passes continuous integration in Bamboo, the PR is eligible for merge.\nAt that time, if you have commit access (are an OpenNMS Group employee or a member of the Order of the Green Polo) you are welcome to merge the PR.\nOtherwise, a reviewer can merge it for you.\nThanks for taking time to contribute!\nExternal References\n\nJIRA (Issue Tracker): https://issues.opennms.org/browse/NMS-12650", "createdAt": "2020-04-16T21:17:03Z", "url": "https://github.com/OpenNMS/opennms/pull/2978", "merged": true, "mergeCommit": {"oid": "8eca57cfcaa73884844da6f8ce9b6bf89aaadbbc"}, "closed": true, "closedAt": "2020-05-05T06:34:52Z", "author": {"login": "Bonrob2"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABceBnPzgH2gAyNDA0NzQxNjU2OjQxOTdjZDVlYjQ1ZTc3MDMzYTE2MzdkMTY1NGI2OTBkZjgxYjZjZjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABceFDEKgFqTQwNTMwMTE2MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4197cd5eb45e77033a1637d1654b690df81b6cf6", "author": {"user": {"login": "Bonrob2", "name": null}}, "url": "https://github.com/OpenNMS/opennms/commit/4197cd5eb45e77033a1637d1654b690df81b6cf6", "committedDate": "2020-05-04T15:56:35Z", "message": "NMS-12650/NMS-12588: Restart and thresholding documentation\n\nRestart/shutdown documentation\nUpdated thresholding to address formatting issues."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5c35ec0d3628f6c820f6e2c58686da61490f42df", "author": {"user": {"login": "Bonrob2", "name": null}}, "url": "https://github.com/OpenNMS/opennms/commit/5c35ec0d3628f6c820f6e2c58686da61490f42df", "committedDate": "2020-05-04T15:58:27Z", "message": "NMS-12650: Updated restart.adoc\n\nIndicates that the procedure is an example of how to shutdown and restart."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "68cdbff087b8553c59261146507217a2573a638a", "author": {"user": {"login": "Bonrob2", "name": null}}, "url": "https://github.com/OpenNMS/opennms/commit/68cdbff087b8553c59261146507217a2573a638a", "committedDate": "2020-05-04T16:00:43Z", "message": "NMS-12599: Adding PDF dashboard document update\n\nAdded information on configuring Grafana endpoints."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "86a20acb11225b6a6a2094b1e87f7ee3ab580790", "author": {"user": {"login": "Bonrob2", "name": null}}, "url": "https://github.com/OpenNMS/opennms/commit/86a20acb11225b6a6a2094b1e87f7ee3ab580790", "committedDate": "2020-04-23T17:33:29Z", "message": "Adding PDF dashboard document update\n\nNMS-12599 - added information on configuring this feature that was missing."}, "afterCommit": {"oid": "68cdbff087b8553c59261146507217a2573a638a", "author": {"user": {"login": "Bonrob2", "name": null}}, "url": "https://github.com/OpenNMS/opennms/commit/68cdbff087b8553c59261146507217a2573a638a", "committedDate": "2020-05-04T16:00:43Z", "message": "NMS-12599: Adding PDF dashboard document update\n\nAdded information on configuring Grafana endpoints."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1MTg5NTYy", "url": "https://github.com/OpenNMS/opennms/pull/2978#pullrequestreview-405189562", "createdAt": "2020-05-04T17:20:36Z", "commit": {"oid": "68cdbff087b8553c59261146507217a2573a638a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxNzoyMDozNlrOGQKNZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxNzoyMDozNlrOGQKNZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTU5NzY3MA==", "bodyText": "I couldn't find this image here", "url": "https://github.com/OpenNMS/opennms/pull/2978#discussion_r419597670", "createdAt": "2020-05-04T17:20:36Z", "author": {"login": "indigo423"}, "path": "opennms-doc/guide-admin/src/asciidoc/text/database-reports/database.adoc", "diffHunk": "@@ -278,3 +278,73 @@ WARNING: If `org.opennms.netmgt.jasper.measurement.ssl.enable` is set to `false`\n \n  * Only a _JDBC Datasource_ to the _{opennms-product-name} Database connection_ can be passed to a report, or no datasource at all.\n    One does not have to use the datasource, though.\n+\n+=== Creating PDF Reports from Grafana Dashboards Using {opennms-product-name}\n+\n+{opennms-product-name} provides three templates to create a PDF report from an existing Grafana dashboard. \n+You can also schedule and email these PDF reports to anyone:\n+\n+* Keep staff without access to {opennms-product-name} informed about network performance for improved capacity planning\n+* Create a permanent record of strategic information and progress over a long period of time\n+\n+The PDF report displays each of the panels from the specified dashboard, with one, two, or four panels per page, depending on the selected template. \n+\n+Dashboard to PDF:\n+\n+image:database-reports/dashboard-pdf.png[PDF report, 600]\n+\n+==== Before You Begin\n+\n+This feature requires {opennms-product-name} and an instance of Grafana with at least one dashboard and panel. OpenNMS allows you to create a report for any Grafana dashboard, not just those created using link:http://docs.opennms.org/helm/branches/master/helm/latest/welcome/index.html[OpenNMS Helm].\n+\n+You must set up Grafana as a datasource by xref:grafana-ednpoint[configuring the Grafana endpoint] in {opennms-product-name}. \n+\n+[[grafana-endpoint]]\n+==== Configure the Grafana Endpoint\n+\n+Configuring the Grafana endpoint sets up Grafana as the datasource for the dashboards from which you create PDFs. \n+\n+. Login to your Grafana instance.\n+. Choose **Configuration > API Keys** and click **New API Key**. \n+. Specify a key name and \"Viewer\" role and click **Add**.\n+.. Leave the time to live blank so that the key never expires. \n+. Copy the key so that you can paste it into the {opennms-product-name} UI. \n++\n+image:database-reports/API-Key.png[Grafana API, 400]\n+\n+.. If desired, test the key using the Curl command provided oi the API key dialog. \n+. In OpenNMS, click *Please add a Grafana endpoint*:\n+\n++\n+image:database-reports/grafana-endpoint.png[Endpoint, 400]\n+\n+. In the *Endpoint Configuration* screen click the plus sign on the right to add a new endpoint.\n+. Fill in the information and click *Test Connection*.\n+. Click *Create*.\n+\n+You can now use {opennms-product-name} to create PDF reports of Grafana dashboards. \n+\n+==== Creating a PDF of a Grafana Dashboard\n+\n+. In the {opennms-product-name} UI, choose `Reports>Database Reports`.\n+. In the `Report Templates` area, click `Grafana Dashboard Report <Xppp>`, where `<Xppp>` represents the number of panels per page you want to display. \n+. In the `Report Parameters` area, specify the appropriate information.\n+.. Note that `Grafana Endpoint` is the datasource. Select a Grafana dashboard from the drop-down list. \n+.. You can also specify CSV for report type. \n+. Click `Create Report`. \n+.. You are prompted to save the report locally or open it.\n+The file is saved to a folder on the {opennms-product-name} Server. \n+It also appears in the UI in the `Persisted Reports` tab. \n+. To send the report to someone, click `Deliver this report`.\n+. Fill out the `Report Delivery Options`.\n+.. If you select `Email report`, specify the recipient\u2019s email address in the `Recipient` field. \n+Separate multiple recipient emails with a comma. \n+.. Webhook allows you to post the generated report to the specified URL. \n+. Click `Deliver Report`.\n+. To schedule the report for regular delivery, click `Schedule this report`.\n+. Specify the report frequency (daily, days per week, etc.) and interval of the report.\n+. Click `Schedule Report`.\n+\n+Scheduled reports appear in the `Report Schedules` tab, where you can edit or delete them:\n+\n+image::database-reports/PDF-Report.png[pdf report, 600]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "68cdbff087b8553c59261146507217a2573a638a"}, "originalPosition": 73}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "789f4855942e59cd1c8cacc938850a98790d9c64", "author": {"user": {"login": "Bonrob2", "name": null}}, "url": "https://github.com/OpenNMS/opennms/commit/789f4855942e59cd1c8cacc938850a98790d9c64", "committedDate": "2020-05-04T17:44:23Z", "message": "NMS-12599 PDF documentation\n\nNSM-12599 PDF documentation. Added missing graphic."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ce4d7dd77b8a9cf3b23ee508a2e8e7994fd6607", "author": {"user": {"login": "indigo423", "name": "Ronny Trommer"}}, "url": "https://github.com/OpenNMS/opennms/commit/9ce4d7dd77b8a9cf3b23ee508a2e8e7994fd6607", "committedDate": "2020-05-04T19:26:04Z", "message": "NMS-12650: Add empty line to fix imagesdir entries appear in text"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c4ca75cffa9c5a38ce15cbf2a01982337cc0865", "author": {"user": {"login": "indigo423", "name": "Ronny Trommer"}}, "url": "https://github.com/OpenNMS/opennms/commit/0c4ca75cffa9c5a38ce15cbf2a01982337cc0865", "committedDate": "2020-05-04T19:45:47Z", "message": "NMS-12650: Add larger screenshots to fill 100% width"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1MzAxMTYw", "url": "https://github.com/OpenNMS/opennms/pull/2978#pullrequestreview-405301160", "createdAt": "2020-05-04T19:56:41Z", "commit": {"oid": "0c4ca75cffa9c5a38ce15cbf2a01982337cc0865"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3597, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}