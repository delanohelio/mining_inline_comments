{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEwNzIxOTE1", "number": 2988, "title": "NMS-12681: Fix  Reloading the Pollerd daemon causes multiple nodeDown messages", "bodyText": "External References\n\nJIRA (Issue Tracker): http://issues.opennms.org/browse/NMS-12681\nBamboo (Continuous Integration): https://bamboo.opennms.org/", "createdAt": "2020-04-29T13:42:16Z", "url": "https://github.com/OpenNMS/opennms/pull/2988", "merged": true, "mergeCommit": {"oid": "a5e6d96651aaa58346eead321f5c471521cfb508"}, "closed": true, "closedAt": "2020-05-04T20:01:37Z", "author": {"login": "cgorantla"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcdIUZGAH2gAyNDEwNzIxOTE1OmYwYWE3MmY5Mjc5OGNhYTMzMzQ0MzA4ZjgzMDA4Y2M1YzUwNWQ5ZGU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABceE5luAFqTQwNTI5NDE4OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f0aa72f92798caa33344308f83008cc5c505d9de", "author": {"user": {"login": "cgorantla", "name": "Chandra Gorantla"}}, "url": "https://github.com/OpenNMS/opennms/commit/f0aa72f92798caa33344308f83008cc5c505d9de", "committedDate": "2020-05-01T21:11:24Z", "message": "NMS-12681: Update node status in rescheduling for existing nodes.\n\n(cherry picked from commit 8ca00f2b55c8474aebcfb1827157c706191aa843)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "11288fef2fa023794517b4c16797b83de4fd685e", "author": {"user": {"login": "cgorantla", "name": "Chandra Gorantla"}}, "url": "https://github.com/OpenNMS/opennms/commit/11288fef2fa023794517b4c16797b83de4fd685e", "committedDate": "2020-04-29T13:38:58Z", "message": "NMS-12681: Avoid duplicate node down events after reload daemon"}, "afterCommit": {"oid": "f0aa72f92798caa33344308f83008cc5c505d9de", "author": {"user": {"login": "cgorantla", "name": "Chandra Gorantla"}}, "url": "https://github.com/OpenNMS/opennms/commit/f0aa72f92798caa33344308f83008cc5c505d9de", "committedDate": "2020-05-01T21:11:24Z", "message": "NMS-12681: Update node status in rescheduling for existing nodes.\n\n(cherry picked from commit 8ca00f2b55c8474aebcfb1827157c706191aa843)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0NDA0NDc4", "url": "https://github.com/OpenNMS/opennms/pull/2988#pullrequestreview-404404478", "createdAt": "2020-05-01T21:14:18Z", "commit": {"oid": "f0aa72f92798caa33344308f83008cc5c505d9de"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQyMToxNDoxOFrOGPV6Kw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQyMToxNDozNVrOGPV6kw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODc0MDc3OQ==", "bodyText": "Explain the purpose of the pollableNode argument.", "url": "https://github.com/OpenNMS/opennms/pull/2988#discussion_r418740779", "createdAt": "2020-05-01T21:14:18Z", "author": {"login": "j-white"}, "path": "opennms-services/src/main/java/org/opennms/netmgt/poller/Poller.java", "diffHunk": "@@ -421,14 +421,14 @@ private void scheduleExistingServices() throws Exception {\n \n     /**\n      * <p>scheduleService</p>\n-     *\n      * @param nodeId a int.\n-     * @param nodeLabel a {@link java.lang.String} object.\n-     * @param nodeLocation a {@link java.lang.String} object.\n-     * @param ipAddr a {@link java.lang.String} object.\n-     * @param svcName a {@link java.lang.String} object.\n+     * @param nodeLabel a {@link String} object.\n+     * @param nodeLocation a {@link String} object.\n+     * @param ipAddr a {@link String} object.\n+     * @param svcName a {@link String} object.\n+     * @param pollableNode", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f0aa72f92798caa33344308f83008cc5c505d9de"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODc0MDg4Mw==", "bodyText": "This value used?", "url": "https://github.com/OpenNMS/opennms/pull/2988#discussion_r418740883", "createdAt": "2020-05-01T21:14:35Z", "author": {"login": "j-white"}, "path": "opennms-services/src/main/java/org/opennms/netmgt/poller/PollerEventProcessor.java", "diffHunk": "@@ -754,6 +754,7 @@ private void serviceReschedule(Long nodeId, String nodeLabel, String nodeLocatio\n             }\n         }\n \n+        PollStatus pollStatus = pnode != null ? pnode.getStatus() : null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f0aa72f92798caa33344308f83008cc5c505d9de"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dc3d858cde36390b5e77ada1a0f40f1031619756", "author": {"user": {"login": "cgorantla", "name": "Chandra Gorantla"}}, "url": "https://github.com/OpenNMS/opennms/commit/dc3d858cde36390b5e77ada1a0f40f1031619756", "committedDate": "2020-05-03T14:21:58Z", "message": "NMS-12681: Update test to check nodeUp\n\nAlso address review comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0NjM3NTQ2", "url": "https://github.com/OpenNMS/opennms/pull/2988#pullrequestreview-404637546", "createdAt": "2020-05-03T16:56:13Z", "commit": {"oid": "dc3d858cde36390b5e77ada1a0f40f1031619756"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QxNjo1NjoxM1rOGPtrOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QxNjo1NjoxM1rOGPtrOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTEzMDE3MQ==", "bodyText": "Not quite what I had in mind :)", "url": "https://github.com/OpenNMS/opennms/pull/2988#discussion_r419130171", "createdAt": "2020-05-03T16:56:13Z", "author": {"login": "j-white"}, "path": "opennms-services/src/main/java/org/opennms/netmgt/poller/Poller.java", "diffHunk": "@@ -426,7 +426,7 @@ private void scheduleExistingServices() throws Exception {\n      * @param nodeLocation a {@link String} object.\n      * @param ipAddr a {@link String} object.\n      * @param svcName a {@link String} object.\n-     * @param pollableNode\n+     * @param pollableNode a {@link PollableNode} object", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dc3d858cde36390b5e77ada1a0f40f1031619756"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "be7651e5b3b7b916f5a58287dc9d4f72cb14d874", "author": {"user": {"login": "cgorantla", "name": "Chandra Gorantla"}}, "url": "https://github.com/OpenNMS/opennms/commit/be7651e5b3b7b916f5a58287dc9d4f72cb14d874", "committedDate": "2020-05-04T14:52:11Z", "message": "NMS-12681: Add more detailed comment [skip ci]"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1MDczNzE0", "url": "https://github.com/OpenNMS/opennms/pull/2988#pullrequestreview-405073714", "createdAt": "2020-05-04T15:02:41Z", "commit": {"oid": "be7651e5b3b7b916f5a58287dc9d4f72cb14d874"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1Mjk0MTg4", "url": "https://github.com/OpenNMS/opennms/pull/2988#pullrequestreview-405294188", "createdAt": "2020-05-04T19:46:20Z", "commit": {"oid": "be7651e5b3b7b916f5a58287dc9d4f72cb14d874"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3614, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}