{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYyODIxODI2", "number": 2869, "title": "NMS-10720: Make Events immutable (avoid CMEs and fix non-deterministic behavior) [Part 2]", "bodyText": "JIRA: https://issues.opennms.org/browse/NMS-10720\n-Update 'EventListener' interface to use make use of the immutable event.\n-In many listener implementations, swap out mutable event for the immutable event.\n-Fix mapping code for event, alarm data, logmsg, and snmp (the mutable implementations have getters that provide a default value if null).\n-Update various unit tests.", "createdAt": "2020-01-14T20:22:48Z", "url": "https://github.com/OpenNMS/opennms/pull/2869", "merged": true, "mergeCommit": {"oid": "41362efeb5507931848aac436b601259749afe86"}, "closed": true, "closedAt": "2020-01-22T00:12:32Z", "author": {"login": "bouff"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb6Y3aZgFqTM0Mjg4MzEyMQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABb8nMZ_AFqTM0NjE3MDM3Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQyODgzMTIx", "url": "https://github.com/OpenNMS/opennms/pull/2869#pullrequestreview-342883121", "createdAt": "2020-01-14T22:31:05Z", "commit": {"oid": "c52bda37c4067f825963268bdd1693de646b8da8"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQyMjozMTowNVrOFdn8hQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQyMjozMTowNVrOFdn8hQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjYwNzQ5Mw==", "bodyText": "As discussed lets see if we can get rid of these copy...() methods by updating the copyFrom() methods to interrogate the object via the has...() methods to determine if a default would be given or not.", "url": "https://github.com/OpenNMS/opennms/pull/2869#discussion_r366607493", "createdAt": "2020-01-14T22:31:05Z", "author": {"login": "mattixtech"}, "path": "features/events/api/src/main/java/org/opennms/netmgt/events/api/model/IAlarmData.java", "diffHunk": "@@ -35,11 +35,14 @@\n  */\n public interface IAlarmData {\n     Integer getAlarmType();\n+    Integer copyAlarmType();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c52bda37c4067f825963268bdd1693de646b8da8"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c52bda37c4067f825963268bdd1693de646b8da8", "author": {"user": {"login": "bouff", "name": "Pierre Bouffard"}}, "url": "https://github.com/OpenNMS/opennms/commit/c52bda37c4067f825963268bdd1693de646b8da8", "committedDate": "2020-01-14T19:45:59Z", "message": "NMS-10720: Make Events immutable (avoid CMEs and fix non-deterministic behavior) [Part 2]\n\n-Some small touch-ups"}, "afterCommit": {"oid": "4c93c5b60f5ecba5e8145c4aff29b76a4e331662", "author": {"user": {"login": "bouff", "name": "Pierre Bouffard"}}, "url": "https://github.com/OpenNMS/opennms/commit/4c93c5b60f5ecba5e8145c4aff29b76a4e331662", "committedDate": "2020-01-15T15:13:25Z", "message": "NMS-10720: Make Events immutable (avoid CMEs and fix non-deterministic behavior) [Part 2]\n\n-Review updates"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQzNTU4NDAw", "url": "https://github.com/OpenNMS/opennms/pull/2869#pullrequestreview-343558400", "createdAt": "2020-01-15T22:14:02Z", "commit": {"oid": "facba8ddde3405a8cdb19671643f4bbb6fd9b9a8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e5144f8682d143946ce9aa844f3d6a0890b7c932", "author": {"user": {"login": "bouff", "name": "Pierre Bouffard"}}, "url": "https://github.com/OpenNMS/opennms/commit/e5144f8682d143946ce9aa844f3d6a0890b7c932", "committedDate": "2020-01-17T18:27:42Z", "message": "NMS-10720: Make Events immutable (avoid CMEs and fix non-deterministic behavior) [Part 2]\n\n-Work in progress... Propagate immutable event to event listeners."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "90914f9b3776adf98c02a8994fbd001df20f7e59", "author": {"user": {"login": "bouff", "name": "Pierre Bouffard"}}, "url": "https://github.com/OpenNMS/opennms/commit/90914f9b3776adf98c02a8994fbd001df20f7e59", "committedDate": "2020-01-17T18:27:42Z", "message": "NMS-10720: Make Events immutable (avoid CMEs and fix non-deterministic behavior) [Part 2]\n\n-Fix a unit test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "14f47ca627852e01169e5eecae0857f5328484ba", "author": {"user": {"login": "bouff", "name": "Pierre Bouffard"}}, "url": "https://github.com/OpenNMS/opennms/commit/14f47ca627852e01169e5eecae0857f5328484ba", "committedDate": "2020-01-17T18:27:42Z", "message": "NMS-10720: Make Events immutable (avoid CMEs and fix non-deterministic behavior) [Part 2]\n\n-Fix another unit test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "93e9e89afe6e3e64d96ab3e5d0a1b10790e4ccf2", "author": {"user": {"login": "bouff", "name": "Pierre Bouffard"}}, "url": "https://github.com/OpenNMS/opennms/commit/93e9e89afe6e3e64d96ab3e5d0a1b10790e4ccf2", "committedDate": "2020-01-17T18:27:42Z", "message": "NMS-10720: Make Events immutable (avoid CMEs and fix non-deterministic behavior) [Part 2]\n\n-More fixing..."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77133536eceaf59b62d4fcb772e340b79bdd3158", "author": {"user": {"login": "bouff", "name": "Pierre Bouffard"}}, "url": "https://github.com/OpenNMS/opennms/commit/77133536eceaf59b62d4fcb772e340b79bdd3158", "committedDate": "2020-01-17T18:27:42Z", "message": "NMS-10720: Make Events immutable (avoid CMEs and fix non-deterministic behavior) [Part 2]\n\n-Fix for smoke test\n-Tentative fix for some unit tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5683c78b863e1a6f0102b0c5ea8c0f13f90d3b9b", "author": {"user": {"login": "bouff", "name": "Pierre Bouffard"}}, "url": "https://github.com/OpenNMS/opennms/commit/5683c78b863e1a6f0102b0c5ea8c0f13f90d3b9b", "committedDate": "2020-01-17T18:27:42Z", "message": "NMS-10720: Make Events immutable (avoid CMEs and fix non-deterministic behavior) [Part 2]\n\n-Fix unit test (issue in DefaultPollContext)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "255c84b0e95ea33d36c52c3857bcc75d1b5ecb96", "author": {"user": {"login": "bouff", "name": "Pierre Bouffard"}}, "url": "https://github.com/OpenNMS/opennms/commit/255c84b0e95ea33d36c52c3857bcc75d1b5ecb96", "committedDate": "2020-01-17T18:27:42Z", "message": "NMS-10720: Make Events immutable (avoid CMEs and fix non-deterministic behavior) [Part 2]\n\n-Further fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "376dcb5508cd84d759984a051976f5cb588d1b36", "author": {"user": {"login": "bouff", "name": "Pierre Bouffard"}}, "url": "https://github.com/OpenNMS/opennms/commit/376dcb5508cd84d759984a051976f5cb588d1b36", "committedDate": "2020-01-17T18:27:42Z", "message": "NMS-10720: Make Events immutable (avoid CMEs and fix non-deterministic behavior) [Part 2]\n\n-Fix mapping issue (fields with defaulted values)."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ec682bfec694ec997916dc0ca32865fc12f118e4", "author": {"user": {"login": "bouff", "name": "Pierre Bouffard"}}, "url": "https://github.com/OpenNMS/opennms/commit/ec682bfec694ec997916dc0ca32865fc12f118e4", "committedDate": "2020-01-17T18:27:42Z", "message": "NMS-10720: Make Events immutable (avoid CMEs and fix non-deterministic behavior) [Part 2]\n\n-Some small touch-ups"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ad8fede9a3ea51c24c35b74e2caf998062619b7e", "author": {"user": {"login": "bouff", "name": "Pierre Bouffard"}}, "url": "https://github.com/OpenNMS/opennms/commit/ad8fede9a3ea51c24c35b74e2caf998062619b7e", "committedDate": "2020-01-17T18:27:42Z", "message": "NMS-10720: Make Events immutable (avoid CMEs and fix non-deterministic behavior) [Part 2]\n\n-Review updates"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f288d18c2da2012e3c19f7f6b8d10ec42c7d60ef", "author": {"user": {"login": "bouff", "name": "Pierre Bouffard"}}, "url": "https://github.com/OpenNMS/opennms/commit/f288d18c2da2012e3c19f7f6b8d10ec42c7d60ef", "committedDate": "2020-01-17T18:27:42Z", "message": "NMS-10720: Make Events immutable (avoid CMEs and fix non-deterministic behavior) [Part 2]\n\n-Fix compilation issue."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4aaac60a1566bfc0920685e3a0114c5412641006", "author": {"user": {"login": "bouff", "name": "Pierre Bouffard"}}, "url": "https://github.com/OpenNMS/opennms/commit/4aaac60a1566bfc0920685e3a0114c5412641006", "committedDate": "2020-01-17T18:27:42Z", "message": "NMS-10720: Make Events immutable (avoid CMEs and fix non-deterministic behavior) [Part 2]\n\n-Add explanation for 'has...()' methods on interfaces that have them."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "facba8ddde3405a8cdb19671643f4bbb6fd9b9a8", "author": {"user": {"login": "bouff", "name": "Pierre Bouffard"}}, "url": "https://github.com/OpenNMS/opennms/commit/facba8ddde3405a8cdb19671643f4bbb6fd9b9a8", "committedDate": "2020-01-15T15:37:42Z", "message": "NMS-10720: Make Events immutable (avoid CMEs and fix non-deterministic behavior) [Part 2]\n\n-Fix compilation issue."}, "afterCommit": {"oid": "4aaac60a1566bfc0920685e3a0114c5412641006", "author": {"user": {"login": "bouff", "name": "Pierre Bouffard"}}, "url": "https://github.com/OpenNMS/opennms/commit/4aaac60a1566bfc0920685e3a0114c5412641006", "committedDate": "2020-01-17T18:27:42Z", "message": "NMS-10720: Make Events immutable (avoid CMEs and fix non-deterministic behavior) [Part 2]\n\n-Add explanation for 'has...()' methods on interfaces that have them."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2MTcwMzc3", "url": "https://github.com/OpenNMS/opennms/pull/2869#pullrequestreview-346170377", "createdAt": "2020-01-21T20:30:14Z", "commit": {"oid": "4aaac60a1566bfc0920685e3a0114c5412641006"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3715, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}