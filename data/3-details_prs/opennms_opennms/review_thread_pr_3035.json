{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMzMTk0ODcz", "number": 3035, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwOToxMDowOFrOEFdC3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxODozODoxOVrOEFptNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0MTU0MjA1OnYy", "diffSide": "RIGHT", "path": "features/telemetry/protocols/netflow/adapter/src/main/java/org/opennms/netmgt/telemetry/protocols/netflow/adapter/common/NetflowMessage.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwOToxMDowOFrOGjpqpQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMjoxODo1M1rOGjvsew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAzNjAwNQ==", "bodyText": "Maybe we can always use this as an fallback for deltaSwitchen without making it protocol specific", "url": "https://github.com/OpenNMS/opennms/pull/3035#discussion_r440036005", "createdAt": "2020-06-15T09:10:08Z", "author": {"login": "fooker"}, "path": "features/telemetry/protocols/netflow/adapter/src/main/java/org/opennms/netmgt/telemetry/protocols/netflow/adapter/common/NetflowMessage.java", "diffHunk": "@@ -110,6 +110,9 @@ public Integer getEngineType() {\n \n     @Override\n     public Long getDeltaSwitched() {\n+        if (getNetflowVersion().equals(NetflowVersion.V5)) {\n+            return flowMessageProto.hasFirstSwitched() ? flowMessageProto.getFirstSwitched().getValue() : null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "25946e07ffe9128494e5bb3a4cb9144c085ba036"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDEzNDc3OQ==", "bodyText": "Yeah, If you think that would be correct protocol wise, I can change that.", "url": "https://github.com/OpenNMS/opennms/pull/3035#discussion_r440134779", "createdAt": "2020-06-15T12:18:53Z", "author": {"login": "cgorantla"}, "path": "features/telemetry/protocols/netflow/adapter/src/main/java/org/opennms/netmgt/telemetry/protocols/netflow/adapter/common/NetflowMessage.java", "diffHunk": "@@ -110,6 +110,9 @@ public Integer getEngineType() {\n \n     @Override\n     public Long getDeltaSwitched() {\n+        if (getNetflowVersion().equals(NetflowVersion.V5)) {\n+            return flowMessageProto.hasFirstSwitched() ? flowMessageProto.getFirstSwitched().getValue() : null;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAzNjAwNQ=="}, "originalCommit": {"oid": "25946e07ffe9128494e5bb3a4cb9144c085ba036"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0MzYxNjUzOnYy", "diffSide": "RIGHT", "path": "features/telemetry/protocols/netflow/adapter/src/main/java/org/opennms/netmgt/telemetry/protocols/netflow/adapter/common/NetflowMessage.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxODozODoxOVrOGj-H6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxOTowNzoxMFrOGj_EuQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDM3MTE3Ng==", "bodyText": "I don't think the extra boxing with new Long is necessary here.", "url": "https://github.com/OpenNMS/opennms/pull/3035#discussion_r440371176", "createdAt": "2020-06-15T18:38:19Z", "author": {"login": "fooker"}, "path": "features/telemetry/protocols/netflow/adapter/src/main/java/org/opennms/netmgt/telemetry/protocols/netflow/adapter/common/NetflowMessage.java", "diffHunk": "@@ -110,7 +110,7 @@ public Integer getEngineType() {\n \n     @Override\n     public Long getDeltaSwitched() {\n-        return flowMessageProto.hasDeltaSwitched() ? flowMessageProto.getDeltaSwitched().getValue() : null;\n+        return flowMessageProto.hasDeltaSwitched() ? new Long(flowMessageProto.getDeltaSwitched().getValue()) : getFirstSwitched();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3b43d3e396175db77a0a7301046a02fd69ced4f4"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDM4Njc0NQ==", "bodyText": "ternary operator tries to auto unbox null and encounters NPE.  WIth boxing the first expression it doesn't unbox the second expression.", "url": "https://github.com/OpenNMS/opennms/pull/3035#discussion_r440386745", "createdAt": "2020-06-15T19:07:10Z", "author": {"login": "cgorantla"}, "path": "features/telemetry/protocols/netflow/adapter/src/main/java/org/opennms/netmgt/telemetry/protocols/netflow/adapter/common/NetflowMessage.java", "diffHunk": "@@ -110,7 +110,7 @@ public Integer getEngineType() {\n \n     @Override\n     public Long getDeltaSwitched() {\n-        return flowMessageProto.hasDeltaSwitched() ? flowMessageProto.getDeltaSwitched().getValue() : null;\n+        return flowMessageProto.hasDeltaSwitched() ? new Long(flowMessageProto.getDeltaSwitched().getValue()) : getFirstSwitched();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDM3MTE3Ng=="}, "originalCommit": {"oid": "3b43d3e396175db77a0a7301046a02fd69ced4f4"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 693, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}