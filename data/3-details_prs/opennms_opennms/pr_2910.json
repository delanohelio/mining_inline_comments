{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg0MjQ2MzA4", "number": 2910, "title": "NMS-12573: Refine Parameter handling of Telemetryd", "bodyText": "This allows Telemetryd {Adapter,Parser,Listener} Factories to modify the\nparameter set during construction before applying the parameters to the\ncreated beans. Each Factory implementation can implement custom\nparameter handling and modify/remove parameters for the according\ndefinition. The modified parameters are then applyed using BeanWrapper.\nIn addition this contains some cleanup. It simplyfies all factory\nimplementations be removing duplicated BeanWrapper calls, refines the\nBmpIntegrationAdapter initialisation to leverage the modifiable\nparameters and renames a couple of things to make projects structure mor\nconcise.\nExternal References\n\nJIRA (Issue Tracker): http://issues.opennms.org/browse/NMS-12573", "createdAt": "2020-03-05T12:25:04Z", "url": "https://github.com/OpenNMS/opennms/pull/2910", "merged": true, "mergeCommit": {"oid": "846971d8fbbb8bea6565ff702cf61d13c07c0a6f"}, "closed": true, "closedAt": "2020-03-10T09:33:41Z", "author": {"login": "fooker"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcKqh7oAH2gAyMzg0MjQ2MzA4OmI5MzllMDY3Yzk2MzYxNWVhNjc4YzQ2NTgwZjQ2NDQxOThiMGUyYjQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcKtCWOgFqTM2OTY1MzA4NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b939e067c963615ea678c46580f4644198b0e2b4", "author": {"user": {"login": "fooker", "name": "Dustin Frisch"}}, "url": "https://github.com/OpenNMS/opennms/commit/b939e067c963615ea678c46580f4644198b0e2b4", "committedDate": "2020-03-05T12:18:24Z", "message": "NMS-12573: Refine Parameter handling of Telemetryd\n\nThis allows Telemetryd {Adapter,Parser,Listener} Factories to modify the\nparameter set during construction before applying the parameters to the\ncreated beans. Each Factory implementation can implement custom\nparameter handling and modify/remove parameters for the according\ndefinition. The modified parameters are then applyed using BeanWrapper.\n\nIn addition this contains some cleanup. It simplyfies all factory\nimplementations be removing duplicated BeanWrapper calls, refines the\nBmpIntegrationAdapter initialisation to leverage the modifiable\nparameters and renames a couple of things to make projects structure mor\nconcise."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5NTg1NDE4", "url": "https://github.com/OpenNMS/opennms/pull/2910#pullrequestreview-369585418", "createdAt": "2020-03-05T13:55:05Z", "commit": {"oid": "b939e067c963615ea678c46580f4644198b0e2b4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxMzo1NTowNVrOFyUXkA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxMzo1NTowNVrOFyUXkA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODMwNjgzMg==", "bodyText": "I believe this was done within the factory itself rather that outside because of reflection issues with the OSGi proxy classes.\nDoes this work differently now?", "url": "https://github.com/OpenNMS/opennms/pull/2910#discussion_r388306832", "createdAt": "2020-03-05T13:55:05Z", "author": {"login": "j-white"}, "path": "features/telemetry/listeners/src/main/java/org/opennms/netmgt/telemetry/listeners/factory/TcpListenerFactory.java", "diffHunk": "@@ -68,9 +66,6 @@ public Listener createBean(ListenerDefinition listenerDefinition) {\n         if (parser.size() != listenerDefinition.getParsers().size()) {\n             throw new IllegalArgumentException(\"Each parser must be of type TcpParser but was not.\");\n         }\n-        final TcpListener listener = new TcpListener(listenerDefinition.getName(), parser.iterator().next(), telemetryRegistry.getMetricRegistry());\n-        final BeanWrapper wrapper = PropertyAccessorFactory.forBeanPropertyAccess(listener);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b939e067c963615ea678c46580f4644198b0e2b4"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5NjUzMDg1", "url": "https://github.com/OpenNMS/opennms/pull/2910#pullrequestreview-369653085", "createdAt": "2020-03-05T15:13:37Z", "commit": {"oid": "b939e067c963615ea678c46580f4644198b0e2b4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3785, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}