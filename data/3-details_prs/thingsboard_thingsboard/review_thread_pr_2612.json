{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAyNTk1MDc1", "number": 2612, "reviewThreads": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwNjozNDo1OVrODxf_wg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwNzowNjoyMFrODxgiTw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUzMjMxMDQyOnYy", "diffSide": "RIGHT", "path": "ui/src/app/api/queue.service.js", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwNjozNDo1OVrOGFAF-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwNjozNDo1OVrOGFAF-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzg5NzU5NA==", "bodyText": "ThingsboardType not used. Why import?", "url": "https://github.com/thingsboard/thingsboard/pull/2612#discussion_r407897594", "createdAt": "2020-04-14T06:34:59Z", "author": {"login": "vvlladd28"}, "path": "ui/src/app/api/queue.service.js", "diffHunk": "@@ -0,0 +1,41 @@\n+/*\n+ * Copyright \u00a9 2016-2020 The Thingsboard Authors\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+import thingsboardTypes from \"../common/types.constant\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "24fe2867e96b99f9e6eff3c2e1135672c39cbbda"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUzMjMxODQ4OnYy", "diffSide": "RIGHT", "path": "ui/src/app/queue/index.js", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwNjozODowMFrOGFAKqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwNjozODowMFrOGFAKqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzg5ODc5Mg==", "bodyText": "Maybe you need import from \"./queue-type-list.directive.js\"", "url": "https://github.com/thingsboard/thingsboard/pull/2612#discussion_r407898792", "createdAt": "2020-04-14T06:38:00Z", "author": {"login": "vvlladd28"}, "path": "ui/src/app/queue/index.js", "diffHunk": "@@ -0,0 +1,23 @@\n+/*\n+ * Copyright \u00a9 2016-2020 The Thingsboard Authors\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+import thingsboardApiQueue from '../api/queue.service';\n+import queueTypeList from \"../queue/queue-type-list.directive.js\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "24fe2867e96b99f9e6eff3c2e1135672c39cbbda"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUzMjMyNTE0OnYy", "diffSide": "RIGHT", "path": "ui/src/app/queue/index.js", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwNjo0MDoyNVrOGFAOgA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwNjo0MDoyNVrOGFAOgA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzg5OTc3Ng==", "bodyText": "Maybe you need to move this directory to the directory \"component\"", "url": "https://github.com/thingsboard/thingsboard/pull/2612#discussion_r407899776", "createdAt": "2020-04-14T06:40:25Z", "author": {"login": "vvlladd28"}, "path": "ui/src/app/queue/index.js", "diffHunk": "@@ -0,0 +1,23 @@\n+/*\n+ * Copyright \u00a9 2016-2020 The Thingsboard Authors\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+import thingsboardApiQueue from '../api/queue.service';\n+import queueTypeList from \"../queue/queue-type-list.directive.js\";\n+\n+export default angular.module('thingsboard.queue', [\n+    thingsboardApiQueue\n+])\n+    .directive('tbQueueTypeList', queueTypeList)\n+    .name;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "24fe2867e96b99f9e6eff3c2e1135672c39cbbda"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUzMjMyNjYwOnYy", "diffSide": "RIGHT", "path": "ui/src/app/queue/queue-type-list.tpl.html", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwNjo0MDo1NFrOGFAPWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwNjo0MDo1NFrOGFAPWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzg5OTk5Mg==", "bodyText": "Please add translate", "url": "https://github.com/thingsboard/thingsboard/pull/2612#discussion_r407899992", "createdAt": "2020-04-14T06:40:54Z", "author": {"login": "vvlladd28"}, "path": "ui/src/app/queue/queue-type-list.tpl.html", "diffHunk": "@@ -0,0 +1,43 @@\n+<!--\n+\n+    Copyright \u00a9 2016-2020 The Thingsboard Authors\n+\n+    Licensed under the Apache License, Version 2.0 (the \"License\");\n+    you may not use this file except in compliance with the License.\n+    You may obtain a copy of the License at\n+\n+        http://www.apache.org/licenses/LICENSE-2.0\n+\n+    Unless required by applicable law or agreed to in writing, software\n+    distributed under the License is distributed on an \"AS IS\" BASIS,\n+    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+    See the License for the specific language governing permissions and\n+    limitations under the License.\n+\n+-->\n+<md-autocomplete ng-required=\"tbRequired\"\n+                 ng-disabled=\"disabled\"\n+                 md-no-cache=\"true\"\n+                 md-input-name=\"queue\"\n+                 ng-model=\"queue\"\n+                 md-selected-item=\"queue\"\n+                 md-search-text=\"queueSearchText\"\n+                 md-items=\"item in fetchQueues(queueSearchText)\"\n+                 md-item-text=\"item\"\n+                 md-min-length=\"0\"\n+                 md-select-on-match=\"false\"\n+                 md-autoselect=\"true\"\n+                 ng-blur=\"queue = queueSearchText\"\n+                 md-menu-class=\"tb-queue-autocomplete\"\n+                 md-clear-button=\"true\"\n+                 placeholder=\"'Select queue name'\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "24fe2867e96b99f9e6eff3c2e1135672c39cbbda"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUzMjMyNzIwOnYy", "diffSide": "RIGHT", "path": "ui/src/app/queue/queue-type-list.tpl.html", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwNjo0MTowN1rOGFAPsQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwNjo0MTowN1rOGFAPsQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzkwMDA4MQ==", "bodyText": "Please add translate", "url": "https://github.com/thingsboard/thingsboard/pull/2612#discussion_r407900081", "createdAt": "2020-04-14T06:41:07Z", "author": {"login": "vvlladd28"}, "path": "ui/src/app/queue/queue-type-list.tpl.html", "diffHunk": "@@ -0,0 +1,43 @@\n+<!--\n+\n+    Copyright \u00a9 2016-2020 The Thingsboard Authors\n+\n+    Licensed under the Apache License, Version 2.0 (the \"License\");\n+    you may not use this file except in compliance with the License.\n+    You may obtain a copy of the License at\n+\n+        http://www.apache.org/licenses/LICENSE-2.0\n+\n+    Unless required by applicable law or agreed to in writing, software\n+    distributed under the License is distributed on an \"AS IS\" BASIS,\n+    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+    See the License for the specific language governing permissions and\n+    limitations under the License.\n+\n+-->\n+<md-autocomplete ng-required=\"tbRequired\"\n+                 ng-disabled=\"disabled\"\n+                 md-no-cache=\"true\"\n+                 md-input-name=\"queue\"\n+                 ng-model=\"queue\"\n+                 md-selected-item=\"queue\"\n+                 md-search-text=\"queueSearchText\"\n+                 md-items=\"item in fetchQueues(queueSearchText)\"\n+                 md-item-text=\"item\"\n+                 md-min-length=\"0\"\n+                 md-select-on-match=\"false\"\n+                 md-autoselect=\"true\"\n+                 ng-blur=\"queue = queueSearchText\"\n+                 md-menu-class=\"tb-queue-autocomplete\"\n+                 md-clear-button=\"true\"\n+                 placeholder=\"'Select queue name'\"\n+                 md-floating-label=\"Queue Name\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "24fe2867e96b99f9e6eff3c2e1135672c39cbbda"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUzMjM1MDQzOnYy", "diffSide": "RIGHT", "path": "ui/src/app/queue/queue-type-list.directive.js", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwNjo0OTo1NFrOGFAdkg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwNjo0OTo1NFrOGFAdkg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzkwMzYzNA==", "bodyText": "Switch not need. He doesn't change the input value to the function", "url": "https://github.com/thingsboard/thingsboard/pull/2612#discussion_r407903634", "createdAt": "2020-04-14T06:49:54Z", "author": {"login": "vvlladd28"}, "path": "ui/src/app/queue/queue-type-list.directive.js", "diffHunk": "@@ -0,0 +1,143 @@\n+/*\n+ * Copyright \u00a9 2016-2020 The Thingsboard Authors\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+import './queue-type-list.scss';\n+\n+/* eslint-disable import/no-unresolved, import/default */\n+\n+import queueTypeListTemplate from './queue-type-list.tpl.html';\n+\n+/* eslint-enable import/no-unresolved, import/default */\n+\n+/*@ngInject*/\n+export default function QueueTypeList($compile, $templateCache, $q, $filter, queueService) {\n+\n+    var linker = function (scope, element, attrs, ngModelCtrl) {\n+        var template = $templateCache.get(queueTypeListTemplate);\n+        element.html(template);\n+\n+        scope.queues = null;\n+        scope.queue = null;\n+        scope.tbRequired = angular.isDefined(scope.tbRequired) ? scope.tbRequired : false;\n+        scope.queueSearchText = '';\n+\n+        var comparator = function(actual, expected) {\n+            if (angular.isUndefined(actual)) {\n+                return false;\n+            }\n+            if ((actual === null) || (expected === null)) {\n+                return actual === expected;\n+            }\n+            return actual.startsWith(expected);\n+        };\n+\n+        scope.fetchQueues = function(searchText) {\n+            var deferred = $q.defer();\n+            loadQueues().then(\n+                function success(queues) {\n+                    var result = $filter('filter')(queues, {'$': searchText}, comparator);\n+                    if (result && result.length) {\n+                        if (searchText && searchText.length && result.indexOf(searchText) === -1) {\n+                            result.push(searchText);\n+                        }\n+                        result.sort();\n+                        deferred.resolve(result);\n+                    }\n+                    else {\n+                        deferred.resolve([searchText]);\n+                    }\n+                },\n+                function fail() {\n+                    deferred.reject();\n+                }\n+            );\n+            return deferred.promise;\n+        };\n+\n+        scope.updateView = function () {\n+            if (!scope.disabled) {\n+                ngModelCtrl.$setViewValue(scope.queue);\n+            }\n+        };\n+\n+        ngModelCtrl.$render = function () {\n+            scope.queue = ngModelCtrl.$viewValue;\n+        };\n+\n+        scope.$watch('queue', function (newValue, prevValue) {\n+            if (!angular.equals(newValue, prevValue)) {\n+                scope.updateView();\n+            }\n+        });\n+\n+        scope.$watch('disabled', function () {\n+            scope.updateView();\n+        });\n+\n+        function loadQueues() {\n+            var deferred = $q.defer();\n+            if (!scope.queues) {\n+                var queuePromise;\n+                switch (scope.queueType) {\n+                    case 'TB_RULE_ENGINE':\n+                        queuePromise = queueService.getTenantQueuesByServiceType(scope.queueType);\n+                        break;\n+                    case 'TB_CORE':\n+                        queuePromise = queueService.getTenantQueuesByServiceType(scope.queueType);\n+                        break;\n+                    case 'TB_TRANSPORT':\n+                        queuePromise = queueService.getTenantQueuesByServiceType(scope.queueType);\n+                        break;\n+                    case 'JS_EXECUTOR':\n+                        queuePromise = queueService.getTenantQueuesByServiceType(scope.queueType);\n+                        break;\n+                }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "24fe2867e96b99f9e6eff3c2e1135672c39cbbda"}, "originalPosition": 106}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUzMjM1ODY3OnYy", "diffSide": "RIGHT", "path": "ui/src/app/queue/queue-type-list.scss", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwNjo1Mjo1N1rOGFAiug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwNjo1Mjo1N1rOGFAiug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzkwNDk1NA==", "bodyText": "Stylelint: Unexpected missing end-of-source newline (no-missing-end-of-source-newline)", "url": "https://github.com/thingsboard/thingsboard/pull/2612#discussion_r407904954", "createdAt": "2020-04-14T06:52:57Z", "author": {"login": "vvlladd28"}, "path": "ui/src/app/queue/queue-type-list.scss", "diffHunk": "@@ -0,0 +1,15 @@\n+/**\n+ * Copyright \u00a9 2016-2020 The Thingsboard Authors\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "24fe2867e96b99f9e6eff3c2e1135672c39cbbda"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUzMjM4NjIxOnYy", "diffSide": "RIGHT", "path": "ui/src/app/queue/queue-type-list.directive.js", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwNzowMjowN1rOGFAyrA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwNzowMjowN1rOGFAyrA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzkwOTAzNg==", "bodyText": "Maybe you need these logics moved to function fetchQueues", "url": "https://github.com/thingsboard/thingsboard/pull/2612#discussion_r407909036", "createdAt": "2020-04-14T07:02:07Z", "author": {"login": "vvlladd28"}, "path": "ui/src/app/queue/queue-type-list.directive.js", "diffHunk": "@@ -0,0 +1,143 @@\n+/*\n+ * Copyright \u00a9 2016-2020 The Thingsboard Authors\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+import './queue-type-list.scss';\n+\n+/* eslint-disable import/no-unresolved, import/default */\n+\n+import queueTypeListTemplate from './queue-type-list.tpl.html';\n+\n+/* eslint-enable import/no-unresolved, import/default */\n+\n+/*@ngInject*/\n+export default function QueueTypeList($compile, $templateCache, $q, $filter, queueService) {\n+\n+    var linker = function (scope, element, attrs, ngModelCtrl) {\n+        var template = $templateCache.get(queueTypeListTemplate);\n+        element.html(template);\n+\n+        scope.queues = null;\n+        scope.queue = null;\n+        scope.tbRequired = angular.isDefined(scope.tbRequired) ? scope.tbRequired : false;\n+        scope.queueSearchText = '';\n+\n+        var comparator = function(actual, expected) {\n+            if (angular.isUndefined(actual)) {\n+                return false;\n+            }\n+            if ((actual === null) || (expected === null)) {\n+                return actual === expected;\n+            }\n+            return actual.startsWith(expected);\n+        };\n+\n+        scope.fetchQueues = function(searchText) {\n+            var deferred = $q.defer();\n+            loadQueues().then(\n+                function success(queues) {\n+                    var result = $filter('filter')(queues, {'$': searchText}, comparator);\n+                    if (result && result.length) {\n+                        if (searchText && searchText.length && result.indexOf(searchText) === -1) {\n+                            result.push(searchText);\n+                        }\n+                        result.sort();\n+                        deferred.resolve(result);\n+                    }\n+                    else {\n+                        deferred.resolve([searchText]);\n+                    }\n+                },\n+                function fail() {\n+                    deferred.reject();\n+                }\n+            );\n+            return deferred.promise;\n+        };\n+\n+        scope.updateView = function () {\n+            if (!scope.disabled) {\n+                ngModelCtrl.$setViewValue(scope.queue);\n+            }\n+        };\n+\n+        ngModelCtrl.$render = function () {\n+            scope.queue = ngModelCtrl.$viewValue;\n+        };\n+\n+        scope.$watch('queue', function (newValue, prevValue) {\n+            if (!angular.equals(newValue, prevValue)) {\n+                scope.updateView();\n+            }\n+        });\n+\n+        scope.$watch('disabled', function () {\n+            scope.updateView();\n+        });\n+\n+        function loadQueues() {\n+            var deferred = $q.defer();\n+            if (!scope.queues) {\n+                var queuePromise;\n+                switch (scope.queueType) {\n+                    case 'TB_RULE_ENGINE':\n+                        queuePromise = queueService.getTenantQueuesByServiceType(scope.queueType);\n+                        break;\n+                    case 'TB_CORE':\n+                        queuePromise = queueService.getTenantQueuesByServiceType(scope.queueType);\n+                        break;\n+                    case 'TB_TRANSPORT':\n+                        queuePromise = queueService.getTenantQueuesByServiceType(scope.queueType);\n+                        break;\n+                    case 'JS_EXECUTOR':\n+                        queuePromise = queueService.getTenantQueuesByServiceType(scope.queueType);\n+                        break;\n+                }\n+\n+                if (queuePromise) {\n+                    queuePromise.then(\n+                        function success(queueArr) {\n+                            scope.queues = [];\n+                            queueArr.data.forEach(function (queue) {\n+                                scope.queues.push(queue);\n+                            });\n+                            deferred.resolve(scope.queues);\n+                        },\n+                        function fail() {\n+                            deferred.reject();\n+                        }\n+                    );\n+                } else {\n+                    deferred.reject();\n+                }\n+            } else {\n+                deferred.resolve(scope.queues);\n+            }\n+            return deferred.promise;\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "24fe2867e96b99f9e6eff3c2e1135672c39cbbda"}, "originalPosition": 128}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUzMjM5MTIyOnYy", "diffSide": "RIGHT", "path": "ui/src/app/queue/queue-type-list.directive.js", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwNzowMzo1MlrOGFA1mw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwNzowMzo1MlrOGFA1mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzkwOTc4Nw==", "bodyText": "Change this code to filter function", "url": "https://github.com/thingsboard/thingsboard/pull/2612#discussion_r407909787", "createdAt": "2020-04-14T07:03:52Z", "author": {"login": "vvlladd28"}, "path": "ui/src/app/queue/queue-type-list.directive.js", "diffHunk": "@@ -0,0 +1,143 @@\n+/*\n+ * Copyright \u00a9 2016-2020 The Thingsboard Authors\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+import './queue-type-list.scss';\n+\n+/* eslint-disable import/no-unresolved, import/default */\n+\n+import queueTypeListTemplate from './queue-type-list.tpl.html';\n+\n+/* eslint-enable import/no-unresolved, import/default */\n+\n+/*@ngInject*/\n+export default function QueueTypeList($compile, $templateCache, $q, $filter, queueService) {\n+\n+    var linker = function (scope, element, attrs, ngModelCtrl) {\n+        var template = $templateCache.get(queueTypeListTemplate);\n+        element.html(template);\n+\n+        scope.queues = null;\n+        scope.queue = null;\n+        scope.tbRequired = angular.isDefined(scope.tbRequired) ? scope.tbRequired : false;\n+        scope.queueSearchText = '';\n+\n+        var comparator = function(actual, expected) {\n+            if (angular.isUndefined(actual)) {\n+                return false;\n+            }\n+            if ((actual === null) || (expected === null)) {\n+                return actual === expected;\n+            }\n+            return actual.startsWith(expected);\n+        };\n+\n+        scope.fetchQueues = function(searchText) {\n+            var deferred = $q.defer();\n+            loadQueues().then(\n+                function success(queues) {\n+                    var result = $filter('filter')(queues, {'$': searchText}, comparator);\n+                    if (result && result.length) {\n+                        if (searchText && searchText.length && result.indexOf(searchText) === -1) {\n+                            result.push(searchText);\n+                        }\n+                        result.sort();\n+                        deferred.resolve(result);\n+                    }\n+                    else {\n+                        deferred.resolve([searchText]);\n+                    }\n+                },\n+                function fail() {\n+                    deferred.reject();\n+                }\n+            );\n+            return deferred.promise;\n+        };\n+\n+        scope.updateView = function () {\n+            if (!scope.disabled) {\n+                ngModelCtrl.$setViewValue(scope.queue);\n+            }\n+        };\n+\n+        ngModelCtrl.$render = function () {\n+            scope.queue = ngModelCtrl.$viewValue;\n+        };\n+\n+        scope.$watch('queue', function (newValue, prevValue) {\n+            if (!angular.equals(newValue, prevValue)) {\n+                scope.updateView();\n+            }\n+        });\n+\n+        scope.$watch('disabled', function () {\n+            scope.updateView();\n+        });\n+\n+        function loadQueues() {\n+            var deferred = $q.defer();\n+            if (!scope.queues) {\n+                var queuePromise;\n+                switch (scope.queueType) {\n+                    case 'TB_RULE_ENGINE':\n+                        queuePromise = queueService.getTenantQueuesByServiceType(scope.queueType);\n+                        break;\n+                    case 'TB_CORE':\n+                        queuePromise = queueService.getTenantQueuesByServiceType(scope.queueType);\n+                        break;\n+                    case 'TB_TRANSPORT':\n+                        queuePromise = queueService.getTenantQueuesByServiceType(scope.queueType);\n+                        break;\n+                    case 'JS_EXECUTOR':\n+                        queuePromise = queueService.getTenantQueuesByServiceType(scope.queueType);\n+                        break;\n+                }\n+\n+                if (queuePromise) {\n+                    queuePromise.then(\n+                        function success(queueArr) {\n+                            scope.queues = [];\n+                            queueArr.data.forEach(function (queue) {\n+                                scope.queues.push(queue);\n+                            });", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "24fe2867e96b99f9e6eff3c2e1135672c39cbbda"}, "originalPosition": 114}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUzMjM5NzIyOnYy", "diffSide": "RIGHT", "path": "ui/src/app/queue/queue-type-list.directive.js", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwNzowNTo1N1rOGFA5IQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwNzowNTo1N1rOGFA5IQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzkxMDY4OQ==", "bodyText": "This should perform the function comparator", "url": "https://github.com/thingsboard/thingsboard/pull/2612#discussion_r407910689", "createdAt": "2020-04-14T07:05:57Z", "author": {"login": "vvlladd28"}, "path": "ui/src/app/queue/queue-type-list.directive.js", "diffHunk": "@@ -0,0 +1,143 @@\n+/*\n+ * Copyright \u00a9 2016-2020 The Thingsboard Authors\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+import './queue-type-list.scss';\n+\n+/* eslint-disable import/no-unresolved, import/default */\n+\n+import queueTypeListTemplate from './queue-type-list.tpl.html';\n+\n+/* eslint-enable import/no-unresolved, import/default */\n+\n+/*@ngInject*/\n+export default function QueueTypeList($compile, $templateCache, $q, $filter, queueService) {\n+\n+    var linker = function (scope, element, attrs, ngModelCtrl) {\n+        var template = $templateCache.get(queueTypeListTemplate);\n+        element.html(template);\n+\n+        scope.queues = null;\n+        scope.queue = null;\n+        scope.tbRequired = angular.isDefined(scope.tbRequired) ? scope.tbRequired : false;\n+        scope.queueSearchText = '';\n+\n+        var comparator = function(actual, expected) {\n+            if (angular.isUndefined(actual)) {\n+                return false;\n+            }\n+            if ((actual === null) || (expected === null)) {\n+                return actual === expected;\n+            }\n+            return actual.startsWith(expected);\n+        };\n+\n+        scope.fetchQueues = function(searchText) {\n+            var deferred = $q.defer();\n+            loadQueues().then(\n+                function success(queues) {\n+                    var result = $filter('filter')(queues, {'$': searchText}, comparator);\n+                    if (result && result.length) {\n+                        if (searchText && searchText.length && result.indexOf(searchText) === -1) {\n+                            result.push(searchText);\n+                        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "24fe2867e96b99f9e6eff3c2e1135672c39cbbda"}, "originalPosition": 54}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUzMjM5ODg3OnYy", "diffSide": "RIGHT", "path": "ui/src/app/queue/queue-type-list.tpl.html", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwNzowNjoyMFrOGFA6AA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwNzowNjoyMFrOGFA6AA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzkxMDkxMg==", "bodyText": "Please add translate", "url": "https://github.com/thingsboard/thingsboard/pull/2612#discussion_r407910912", "createdAt": "2020-04-14T07:06:20Z", "author": {"login": "vvlladd28"}, "path": "ui/src/app/queue/queue-type-list.tpl.html", "diffHunk": "@@ -0,0 +1,43 @@\n+<!--\n+\n+    Copyright \u00a9 2016-2020 The Thingsboard Authors\n+\n+    Licensed under the Apache License, Version 2.0 (the \"License\");\n+    you may not use this file except in compliance with the License.\n+    You may obtain a copy of the License at\n+\n+        http://www.apache.org/licenses/LICENSE-2.0\n+\n+    Unless required by applicable law or agreed to in writing, software\n+    distributed under the License is distributed on an \"AS IS\" BASIS,\n+    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+    See the License for the specific language governing permissions and\n+    limitations under the License.\n+\n+-->\n+<md-autocomplete ng-required=\"tbRequired\"\n+                 ng-disabled=\"disabled\"\n+                 md-no-cache=\"true\"\n+                 md-input-name=\"queue\"\n+                 ng-model=\"queue\"\n+                 md-selected-item=\"queue\"\n+                 md-search-text=\"queueSearchText\"\n+                 md-items=\"item in fetchQueues(queueSearchText)\"\n+                 md-item-text=\"item\"\n+                 md-min-length=\"0\"\n+                 md-select-on-match=\"false\"\n+                 md-autoselect=\"true\"\n+                 ng-blur=\"queue = queueSearchText\"\n+                 md-menu-class=\"tb-queue-autocomplete\"\n+                 md-clear-button=\"true\"\n+                 placeholder=\"'Select queue name'\"\n+                 md-floating-label=\"Queue Name\">\n+    <md-item-template>\n+        <div class=\"tb-queue-item\">\n+            <span md-highlight-text=\"queueSearchText\" md-highlight-flags=\"^i\">{{item}}</span>\n+        </div>\n+    </md-item-template>\n+    <div ng-messages=\"theForm.queue.$error\">\n+        <div translate ng-message=\"required\">Queue name is required!</div>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "24fe2867e96b99f9e6eff3c2e1135672c39cbbda"}, "originalPosition": 41}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1391, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}