{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkwOTE3NjMz", "number": 2534, "title": "created Aws Sqs Queue", "bodyText": "", "createdAt": "2020-03-19T10:24:40Z", "url": "https://github.com/thingsboard/thingsboard/pull/2534", "merged": true, "mergeCommit": {"oid": "2553cf6b6fcfb1ccfa8f8d0a5cfbfe1466990f8c"}, "closed": true, "closedAt": "2020-03-30T16:13:34Z", "author": {"login": "YevhenBondarenko"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcPJOeRAH2gAyMzkwOTE3NjMzOjI4OTRmOGM1MzU3YjU1NWU3NmYyMDYyOGUwMmJhODhiMzIxZDdiMzg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcSttkMgFqTM4MzgwNTU1Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2894f8c5357b555e76f20628e02ba88b321d7b38", "author": {"user": {"login": "YevhenBondarenko", "name": "Yevhen Bondarenko"}}, "url": "https://github.com/thingsboard/thingsboard/commit/2894f8c5357b555e76f20628e02ba88b321d7b38", "committedDate": "2020-03-19T10:19:54Z", "message": "created Aws Sqs Queue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "55d3a515e135f06ddda390df2aff761511114f07", "author": {"user": {"login": "YevhenBondarenko", "name": "Yevhen Bondarenko"}}, "url": "https://github.com/thingsboard/thingsboard/commit/55d3a515e135f06ddda390df2aff761511114f07", "committedDate": "2020-03-19T12:00:40Z", "message": "Merge branch 'develop/2.5' of https://github.com/thingsboard/thingsboard into develop/2.5\n\n# Conflicts:\n#\tapplication/src/main/java/org/thingsboard/server/service/state/DefaultDeviceStateService.java\n#\tcommon/queue/src/main/java/org/thingsboard/server/discovery/TopicPartitionInfo.java\n#\tcommon/queue/src/main/java/org/thingsboard/server/queue/kafka/TBKafkaConsumerTemplate.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ffe1f1cab9516e1d26d60e93dcc62bae62c60db", "author": {"user": {"login": "YevhenBondarenko", "name": "Yevhen Bondarenko"}}, "url": "https://github.com/thingsboard/thingsboard/commit/3ffe1f1cab9516e1d26d60e93dcc62bae62c60db", "committedDate": "2020-03-19T13:46:21Z", "message": "improvement AwsSqs providers"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3ODYxNjIz", "url": "https://github.com/thingsboard/thingsboard/pull/2534#pullrequestreview-377861623", "createdAt": "2020-03-19T15:59:11Z", "commit": {"oid": "3ffe1f1cab9516e1d26d60e93dcc62bae62c60db"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxNTo1OToxMlrOF41OZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxNTo1OToxMlrOF41OZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTEzNjYxMg==", "bodyText": "This needs to be removed. We have the same in main pom.xml", "url": "https://github.com/thingsboard/thingsboard/pull/2534#discussion_r395136612", "createdAt": "2020-03-19T15:59:12Z", "author": {"login": "ashvayka"}, "path": "rule-engine/rule-engine-components/pom.xml", "diffHunk": "@@ -35,7 +35,7 @@\n     <properties>\n         <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n         <main.dir>${basedir}/../..</main.dir>\n-        <aws.sdk.version>1.11.323</aws.sdk.version>\n+        <aws.sdk.version>1.11.747</aws.sdk.version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ffe1f1cab9516e1d26d60e93dcc62bae62c60db"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "939af21e5b1442e9d056024b206ed9d6aa9002d0", "author": {"user": {"login": "YevhenBondarenko", "name": "Yevhen Bondarenko"}}, "url": "https://github.com/thingsboard/thingsboard/commit/939af21e5b1442e9d056024b206ed9d6aa9002d0", "committedDate": "2020-03-20T08:47:55Z", "message": "revert package-lock.json"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c06a9ab9aaffb1960414f417c31a547985aea120", "author": {"user": {"login": "YevhenBondarenko", "name": "Yevhen Bondarenko"}}, "url": "https://github.com/thingsboard/thingsboard/commit/c06a9ab9aaffb1960414f417c31a547985aea120", "committedDate": "2020-03-20T15:45:40Z", "message": "Aws sqs improvements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a30f32d000659c7cad0a256c87ab165f8c08b006", "author": {"user": {"login": "YevhenBondarenko", "name": "Yevhen Bondarenko"}}, "url": "https://github.com/thingsboard/thingsboard/commit/a30f32d000659c7cad0a256c87ab165f8c08b006", "committedDate": "2020-03-20T15:46:43Z", "message": "Aws sqs improvements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0a31e7bfa5605f14108ef1d647657e7a3783c3e7", "author": {"user": {"login": "YevhenBondarenko", "name": "Yevhen Bondarenko"}}, "url": "https://github.com/thingsboard/thingsboard/commit/0a31e7bfa5605f14108ef1d647657e7a3783c3e7", "committedDate": "2020-03-20T16:15:58Z", "message": "Aws sqs improvements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8b114ae00ff25be2a9354d076ea9b5d584a59b9e", "author": {"user": {"login": "YevhenBondarenko", "name": "Yevhen Bondarenko"}}, "url": "https://github.com/thingsboard/thingsboard/commit/8b114ae00ff25be2a9354d076ea9b5d584a59b9e", "committedDate": "2020-03-20T16:54:56Z", "message": "Aws sqs improvements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3b611a49a224a8f6bdae5e41a31037d5614c0067", "author": {"user": {"login": "YevhenBondarenko", "name": "Yevhen Bondarenko"}}, "url": "https://github.com/thingsboard/thingsboard/commit/3b611a49a224a8f6bdae5e41a31037d5614c0067", "committedDate": "2020-03-20T16:55:25Z", "message": "Merge branch 'develop/2.5' of https://github.com/thingsboard/thingsboard into develop/2.5"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e29aaeae101ddc39181214bb27956600b1de203", "author": {"user": {"login": "YevhenBondarenko", "name": "Yevhen Bondarenko"}}, "url": "https://github.com/thingsboard/thingsboard/commit/4e29aaeae101ddc39181214bb27956600b1de203", "committedDate": "2020-03-27T07:41:50Z", "message": "Merge branch 'develop/2.5' of https://github.com/thingsboard/thingsboard into develop/2.5\n\n# Conflicts:\n#\tapplication/src/main/java/org/thingsboard/server/service/queue/DefaultTbRuleEngineConsumerService.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89657024e043598d4d800381b5945f837e1866c9", "author": {"user": {"login": "YevhenBondarenko", "name": "Yevhen Bondarenko"}}, "url": "https://github.com/thingsboard/thingsboard/commit/89657024e043598d4d800381b5945f837e1866c9", "committedDate": "2020-03-27T12:38:01Z", "message": "aws improvements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d3b68e22d0e02c0280166a5bea363b5d589fc414", "author": {"user": {"login": "YevhenBondarenko", "name": "Yevhen Bondarenko"}}, "url": "https://github.com/thingsboard/thingsboard/commit/d3b68e22d0e02c0280166a5bea363b5d589fc414", "committedDate": "2020-03-27T12:39:53Z", "message": "aws improvements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8cbf13410e1ddcd6f6b7538092a9d778f4a0ecc9", "author": {"user": {"login": "YevhenBondarenko", "name": "Yevhen Bondarenko"}}, "url": "https://github.com/thingsboard/thingsboard/commit/8cbf13410e1ddcd6f6b7538092a9d778f4a0ecc9", "committedDate": "2020-03-27T16:18:52Z", "message": "aws improvements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e6dcfeced5764b65c9d1fb199842cbb1c7a9f65b", "author": {"user": {"login": "YevhenBondarenko", "name": "Yevhen Bondarenko"}}, "url": "https://github.com/thingsboard/thingsboard/commit/e6dcfeced5764b65c9d1fb199842cbb1c7a9f65b", "committedDate": "2020-03-30T09:05:41Z", "message": "added visibility timeout to aws queue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "08ca0aa06a718c15a2d350211db75ab377aa0df4", "author": {"user": {"login": "YevhenBondarenko", "name": "Yevhen Bondarenko"}}, "url": "https://github.com/thingsboard/thingsboard/commit/08ca0aa06a718c15a2d350211db75ab377aa0df4", "committedDate": "2020-03-30T09:42:17Z", "message": "Merge branch 'develop/2.5' of https://github.com/thingsboard/thingsboard into develop/2.5\n\n# Conflicts:\n#\tapplication/src/main/java/org/thingsboard/server/service/queue/DefaultTbRuleEngineConsumerService.java\n#\tcommon/transport/transport-api/src/main/java/org/thingsboard/server/common/transport/service/DefaultTransportService.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzODA1NTUy", "url": "https://github.com/thingsboard/thingsboard/pull/2534#pullrequestreview-383805552", "createdAt": "2020-03-30T12:32:13Z", "commit": {"oid": "08ca0aa06a718c15a2d350211db75ab377aa0df4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxMjozMjoxM1rOF9nc5w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxMjozMjoxM1rOF9nc5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDE1MzgzMQ==", "bodyText": "I have intentionally removed this. Kafka consumers will throw exceptions here (ConcurrentModificationException). Please refactor Kafka consumers to make sure they are unsubscribing in main consumer thread (however, if the executor is shut down - this is meaningless).", "url": "https://github.com/thingsboard/thingsboard/pull/2534#discussion_r400153831", "createdAt": "2020-03-30T12:32:13Z", "author": {"login": "ashvayka"}, "path": "application/src/main/java/org/thingsboard/server/service/queue/processing/AbstractConsumerService.java", "diffHunk": "@@ -136,6 +136,15 @@ protected void launchNotificationsConsumer() {\n     @PreDestroy\n     public void destroy() {\n         stopped = true;\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "08ca0aa06a718c15a2d350211db75ab377aa0df4"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3295, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}