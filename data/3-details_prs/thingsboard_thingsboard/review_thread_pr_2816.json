{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIxNzk4MzM5", "number": 2816, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxMTo1MzowNFrOD-7HBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxMTo1MzowNFrOD-7HBQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3MzA2NzU3OnYy", "diffSide": "RIGHT", "path": "application/src/main/java/org/thingsboard/server/service/transport/DefaultTransportApiService.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxMTo1MzowNFrOGZUc1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxMTo1MzowNFrOGZUc1A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTIwMjY0NA==", "bodyText": "NPE", "url": "https://github.com/thingsboard/thingsboard/pull/2816#discussion_r429202644", "createdAt": "2020-05-22T11:53:04Z", "author": {"login": "ashvayka"}, "path": "application/src/main/java/org/thingsboard/server/service/transport/DefaultTransportApiService.java", "diffHunk": "@@ -119,14 +128,23 @@\n             try {\n                 Device device = deviceService.findDeviceByTenantIdAndName(gateway.getTenantId(), requestMsg.getDeviceName());\n                 if (device == null) {\n+                    TenantId tenantId = gateway.getTenantId();\n                     device = new Device();\n-                    device.setTenantId(gateway.getTenantId());\n+                    device.setTenantId(tenantId);\n                     device.setName(requestMsg.getDeviceName());\n                     device.setType(requestMsg.getDeviceType());\n                     device.setCustomerId(gateway.getCustomerId());\n                     device = deviceService.saveDevice(device);\n                     relationService.saveRelationAsync(TenantId.SYS_TENANT_ID, new EntityRelation(gateway.getId(), device.getId(), \"Created\"));\n                     deviceStateService.onDeviceAdded(device);\n+\n+                    TbMsgMetaData metaData = new TbMsgMetaData();\n+                    metaData.putValue(\"customerId\", device.getCustomerId().toString());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d031431c6496bccdca5e9abbef5db7f28f6ec145"}, "originalPosition": 60}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1379, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}