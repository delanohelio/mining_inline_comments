{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY5NTA0ODc0", "number": 2381, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxNjowMzo0NVrODcr0_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxNjowMzo0NVrODcr0_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxNDA0Nzk5OnYy", "diffSide": "RIGHT", "path": "rule-engine/rule-engine-components/src/main/java/org/thingsboard/rule/engine/mail/TbSendEmailNode.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxNjowMzo0NVrOFk2sEg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxNjowMzo0NVrOFk2sEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDE4OTA3NA==", "bodyText": "What if this is an old version of the configuration (without this parameter stored). We need to check for an empty string or null here.", "url": "https://github.com/thingsboard/thingsboard/pull/2381#discussion_r374189074", "createdAt": "2020-02-03T16:03:45Z", "author": {"login": "ashvayka"}, "path": "rule-engine/rule-engine-components/src/main/java/org/thingsboard/rule/engine/mail/TbSendEmailNode.java", "diffHunk": "@@ -137,10 +141,13 @@ private Properties createJavaMailProperties() {\n         String protocol = this.config.getSmtpProtocol();\n         javaMailProperties.put(\"mail.transport.protocol\", protocol);\n         javaMailProperties.put(MAIL_PROP + protocol + \".host\", this.config.getSmtpHost());\n-        javaMailProperties.put(MAIL_PROP + protocol + \".port\", this.config.getSmtpPort()+\"\");\n-        javaMailProperties.put(MAIL_PROP + protocol + \".timeout\", this.config.getTimeout()+\"\");\n+        javaMailProperties.put(MAIL_PROP + protocol + \".port\", this.config.getSmtpPort() + \"\");\n+        javaMailProperties.put(MAIL_PROP + protocol + \".timeout\", this.config.getTimeout() + \"\");\n         javaMailProperties.put(MAIL_PROP + protocol + \".auth\", String.valueOf(StringUtils.isNotEmpty(this.config.getUsername())));\n         javaMailProperties.put(MAIL_PROP + protocol + \".starttls.enable\", Boolean.valueOf(this.config.isEnableTls()).toString());\n+        if (this.config.isEnableTls()) {\n+            javaMailProperties.put(MAIL_PROP + protocol + \".ssl.protocols\", this.config.getTlsVersion());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0a7f8af40313ac123c33f1d55d4432258eee5127"}, "originalPosition": 25}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1397, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}