{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY5NTA0ODc0", "number": 2381, "title": "smtp tls version ", "bodyText": "", "createdAt": "2020-01-31T10:08:53Z", "url": "https://github.com/thingsboard/thingsboard/pull/2381", "merged": true, "mergeCommit": {"oid": "416c3fd10e0b58755fcdcc297e3ebd9e4b04c7f1"}, "closed": true, "closedAt": "2020-02-15T09:47:53Z", "author": {"login": "YevhenBondarenko"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb_sSguAH2gAyMzY5NTA0ODc0OmYwZGY0ZDM4MzRiMDg1MjNlZTVlMmFlNjYwOGI0ZDc4YWEzZTRmZmU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcBGZQAgH2gAyMzY5NTA0ODc0OjVmNzQ3ZDU0Y2Q2ZTliM2M2Mjc4ZjM5ZDJjZWRiZmU3YWRlM2VmM2M=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f0df4d3834b08523ee5e2ae6608b4d78aa3e4ffe", "author": {"user": {"login": "YevhenBondarenko", "name": "Yevhen Bondarenko"}}, "url": "https://github.com/thingsboard/thingsboard/commit/f0df4d3834b08523ee5e2ae6608b4d78aa3e4ffe", "committedDate": "2020-01-31T10:08:12Z", "message": "added tlsVersion to TbSendEmailNode"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0a7f8af40313ac123c33f1d55d4432258eee5127", "author": {"user": {"login": "YevhenBondarenko", "name": "Yevhen Bondarenko"}}, "url": "https://github.com/thingsboard/thingsboard/commit/0a7f8af40313ac123c33f1d55d4432258eee5127", "committedDate": "2020-01-31T14:36:57Z", "message": "added tlsVersion to DefaultMailService"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUyMzY3NzQ5", "url": "https://github.com/thingsboard/thingsboard/pull/2381#pullrequestreview-352367749", "createdAt": "2020-02-03T16:03:45Z", "commit": {"oid": "0a7f8af40313ac123c33f1d55d4432258eee5127"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxNjowMzo0NVrOFk2sEg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxNjowMzo0NVrOFk2sEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDE4OTA3NA==", "bodyText": "What if this is an old version of the configuration (without this parameter stored). We need to check for an empty string or null here.", "url": "https://github.com/thingsboard/thingsboard/pull/2381#discussion_r374189074", "createdAt": "2020-02-03T16:03:45Z", "author": {"login": "ashvayka"}, "path": "rule-engine/rule-engine-components/src/main/java/org/thingsboard/rule/engine/mail/TbSendEmailNode.java", "diffHunk": "@@ -137,10 +141,13 @@ private Properties createJavaMailProperties() {\n         String protocol = this.config.getSmtpProtocol();\n         javaMailProperties.put(\"mail.transport.protocol\", protocol);\n         javaMailProperties.put(MAIL_PROP + protocol + \".host\", this.config.getSmtpHost());\n-        javaMailProperties.put(MAIL_PROP + protocol + \".port\", this.config.getSmtpPort()+\"\");\n-        javaMailProperties.put(MAIL_PROP + protocol + \".timeout\", this.config.getTimeout()+\"\");\n+        javaMailProperties.put(MAIL_PROP + protocol + \".port\", this.config.getSmtpPort() + \"\");\n+        javaMailProperties.put(MAIL_PROP + protocol + \".timeout\", this.config.getTimeout() + \"\");\n         javaMailProperties.put(MAIL_PROP + protocol + \".auth\", String.valueOf(StringUtils.isNotEmpty(this.config.getUsername())));\n         javaMailProperties.put(MAIL_PROP + protocol + \".starttls.enable\", Boolean.valueOf(this.config.isEnableTls()).toString());\n+        if (this.config.isEnableTls()) {\n+            javaMailProperties.put(MAIL_PROP + protocol + \".ssl.protocols\", this.config.getTlsVersion());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0a7f8af40313ac123c33f1d55d4432258eee5127"}, "originalPosition": 25}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8435df4422323b9c426719b851fd3c8d29a0ac37", "author": {"user": {"login": "YevhenBondarenko", "name": "Yevhen Bondarenko"}}, "url": "https://github.com/thingsboard/thingsboard/commit/8435df4422323b9c426719b851fd3c8d29a0ac37", "committedDate": "2020-02-04T18:58:06Z", "message": "Merge branch 'master' of https://github.com/thingsboard/thingsboard into feature/smtp-tls"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f747d54cd6e9b3c6278f39d2cedbfe7ade3ef3c", "author": {"user": {"login": "YevhenBondarenko", "name": "Yevhen Bondarenko"}}, "url": "https://github.com/thingsboard/thingsboard/commit/5f747d54cd6e9b3c6278f39d2cedbfe7ade3ef3c", "committedDate": "2020-02-04T19:07:01Z", "message": "added check tlsVersion for old version"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3303, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}