{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ2NTY4NzQ2", "number": 1302, "title": "TINKERPOP-2391 Remove GLV templating system", "bodyText": "https://issues.apache.org/jira/browse/TINKERPOP-2391\nAll tests pass with docker/build.sh -t -n -i\nVOTE +1", "createdAt": "2020-07-09T01:47:00Z", "url": "https://github.com/apache/tinkerpop/pull/1302", "merged": true, "mergeCommit": {"oid": "b42cf5b4b38161c4eae3e1531fb61372a93c94b2"}, "closed": true, "closedAt": "2020-08-20T13:15:52Z", "author": {"login": "spmallette"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc02Ti7AFqTQ0ODEyMTI4NQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdAwCN5ABqjM2NzUxOTAzNzE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4MTIxMjg1", "url": "https://github.com/apache/tinkerpop/pull/1302#pullrequestreview-448121285", "createdAt": "2020-07-14T13:46:22Z", "commit": {"oid": "8de2aa44129604bff68070033be01a51d2143185"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cfc5590974970b8916863ec2fed54c5cca22f754", "author": {"user": {"login": "spmallette", "name": "stephen mallette"}}, "url": "https://github.com/apache/tinkerpop/commit/cfc5590974970b8916863ec2fed54c5cca22f754", "committedDate": "2020-07-17T19:43:02Z", "message": "TINKERPOP-2391 Update release docs around glv version setting"}, "afterCommit": {"oid": "38ebd9beb7c9f8d71a661c90a1b66683c6c2448d", "author": {"user": {"login": "spmallette", "name": "stephen mallette"}}, "url": "https://github.com/apache/tinkerpop/commit/38ebd9beb7c9f8d71a661c90a1b66683c6c2448d", "committedDate": "2020-07-17T19:46:21Z", "message": "TINKERPOP-2391 Remove GLV templating system"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyNDc4NjI1", "url": "https://github.com/apache/tinkerpop/pull/1302#pullrequestreview-452478625", "createdAt": "2020-07-21T13:52:02Z", "commit": {"oid": "38ebd9beb7c9f8d71a661c90a1b66683c6c2448d"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxMzo1MjowMlrOG05Aeg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNDoxNzozMFrOG06LKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODExMzE0Ng==", "bodyText": "We can do it like this, but I think that we can also just remove the elements FileVersion and AssemblyVersion from the csproj as they are optional and their default values are already what we set here explicitly, e.g., a Version of 3.5.0 leads to both FileVersion and AssemblyVersion being 3.5.0.0 and a Version of 3.5.0-SNAPSHOT also results in 3.5.0.0.\nSo, I think that there is no point in specifying them explicitly in the csproj which means that we don't have to take care off them here.\nFor reference: This blog post explains these version elements and their default values.\nBut we can also keep this as is from my side as it should be working like this. I just thought that I mention it in case you want to simplify this a bit.", "url": "https://github.com/apache/tinkerpop/pull/1302#discussion_r458113146", "createdAt": "2020-07-21T13:52:02Z", "author": {"login": "FlorianHockmann"}, "path": "gremlin-dotnet/src/pom.xml", "diffHunk": "@@ -33,14 +33,43 @@ limitations under the License.\n \n     <build>\n         <plugins>\n-            <!-- Override the execution from gremlin-dotnet to disable code generation from happening a second time -->\n             <plugin>\n                 <groupId>org.codehaus.gmavenplus</groupId>\n                 <artifactId>gmavenplus-plugin</artifactId>\n+                <dependencies>\n+                    <dependency>\n+                        <groupId>org.codehaus.groovy</groupId>\n+                        <artifactId>groovy-all</artifactId>\n+                        <version>${groovy.version}</version>\n+                        <type>pom</type>\n+                        <scope>runtime</scope>\n+                    </dependency>\n+                </dependencies>\n                 <executions>\n                     <execution>\n-                        <id>generate-dsl</id>\n-                        <phase/>\n+                        <id>update-version</id>\n+                        <phase>generate-sources</phase>\n+                        <goals>\n+                            <goal>execute</goal>\n+                        </goals>\n+                        <configuration>\n+                            <scripts>\n+                                <script>\n+def mavenVersion = \"${project.version}\"\n+def rawVersion = mavenVersion.replace(\"-SNAPSHOT\", \"\")\n+def file = new File(\"${project.basedir}/Gremlin.Net/Gremlin.Net.csproj\")\n+file.write(file.getText(\"UTF-8\").replaceFirst(/&lt;Version&gt;(.*)&lt;\\/Version&gt;/, \"&lt;Version&gt;\" + mavenVersion + \"&lt;/Version&gt;\").\n+                                 replaceFirst(/&lt;FileVersion&gt;(.*)&lt;\\/FileVersion&gt;/, \"&lt;FileVersion&gt;\" + rawVersion + \".0&lt;/FileVersion&gt;\").", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "38ebd9beb7c9f8d71a661c90a1b66683c6c2448d"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODEzMjI2NQ==", "bodyText": "This looks good to me, but I'm still wondering about the generate-dsl execution at the bottom of this file as that is still using the *.template files.\nBut we can probably completely remove that part now as it seems to have only put the project.version back in the .NET project files in case a release candidate was deployed which might have used a .NET specific version like 3.5.0-rc1.", "url": "https://github.com/apache/tinkerpop/pull/1302#discussion_r458132265", "createdAt": "2020-07-21T14:17:30Z", "author": {"login": "FlorianHockmann"}, "path": "gremlin-dotnet/src/pom.xml", "diffHunk": "@@ -33,14 +33,43 @@ limitations under the License.\n \n     <build>\n         <plugins>\n-            <!-- Override the execution from gremlin-dotnet to disable code generation from happening a second time -->\n             <plugin>\n                 <groupId>org.codehaus.gmavenplus</groupId>\n                 <artifactId>gmavenplus-plugin</artifactId>\n+                <dependencies>\n+                    <dependency>\n+                        <groupId>org.codehaus.groovy</groupId>\n+                        <artifactId>groovy-all</artifactId>\n+                        <version>${groovy.version}</version>\n+                        <type>pom</type>\n+                        <scope>runtime</scope>\n+                    </dependency>\n+                </dependencies>\n                 <executions>\n                     <execution>\n-                        <id>generate-dsl</id>\n-                        <phase/>\n+                        <id>update-version</id>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "38ebd9beb7c9f8d71a661c90a1b66683c6c2448d"}, "originalPosition": 21}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "38ebd9beb7c9f8d71a661c90a1b66683c6c2448d", "author": {"user": {"login": "spmallette", "name": "stephen mallette"}}, "url": "https://github.com/apache/tinkerpop/commit/38ebd9beb7c9f8d71a661c90a1b66683c6c2448d", "committedDate": "2020-07-17T19:46:21Z", "message": "TINKERPOP-2391 Remove GLV templating system"}, "afterCommit": {"oid": "3c688c0caeae4e44da67b1555316b785adbb3953", "author": {"user": {"login": "spmallette", "name": "stephen mallette"}}, "url": "https://github.com/apache/tinkerpop/commit/3c688c0caeae4e44da67b1555316b785adbb3953", "committedDate": "2020-08-05T16:26:38Z", "message": "TINKERPOP-2391 Remove GLV templating system"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0MzMxNjcy", "url": "https://github.com/apache/tinkerpop/pull/1302#pullrequestreview-464331672", "createdAt": "2020-08-10T15:25:13Z", "commit": {"oid": "3c688c0caeae4e44da67b1555316b785adbb3953"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNToyNToxM1rOG-TZ9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNToyNToxM1rOG-TZ9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzk4MjgzOA==", "bodyText": "Just a nit, but rawVersion isn't used anywhere so it can be removed here.", "url": "https://github.com/apache/tinkerpop/pull/1302#discussion_r467982838", "createdAt": "2020-08-10T15:25:13Z", "author": {"login": "FlorianHockmann"}, "path": "gremlin-dotnet/src/pom.xml", "diffHunk": "@@ -33,14 +33,41 @@ limitations under the License.\n \n     <build>\n         <plugins>\n-            <!-- Override the execution from gremlin-dotnet to disable code generation from happening a second time -->\n             <plugin>\n                 <groupId>org.codehaus.gmavenplus</groupId>\n                 <artifactId>gmavenplus-plugin</artifactId>\n+                <dependencies>\n+                    <dependency>\n+                        <groupId>org.codehaus.groovy</groupId>\n+                        <artifactId>groovy-all</artifactId>\n+                        <version>${groovy.version}</version>\n+                        <type>pom</type>\n+                        <scope>runtime</scope>\n+                    </dependency>\n+                </dependencies>\n                 <executions>\n                     <execution>\n-                        <id>generate-dsl</id>\n-                        <phase/>\n+                        <id>update-version</id>\n+                        <phase>generate-sources</phase>\n+                        <goals>\n+                            <goal>execute</goal>\n+                        </goals>\n+                        <configuration>\n+                            <scripts>\n+                                <script>\n+def mavenVersion = \"${project.version}\"\n+def rawVersion = mavenVersion.replace(\"-SNAPSHOT\", \"\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3c688c0caeae4e44da67b1555316b785adbb3953"}, "originalPosition": 30}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "612227f8df41138e0a96b156b22c1bcc26bbc943", "author": {"user": {"login": "spmallette", "name": "stephen mallette"}}, "url": "https://github.com/apache/tinkerpop/commit/612227f8df41138e0a96b156b22c1bcc26bbc943", "committedDate": "2020-08-20T13:14:51Z", "message": "TINKERPOP-2391 Remove GLV templating system"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3c688c0caeae4e44da67b1555316b785adbb3953", "author": {"user": {"login": "spmallette", "name": "stephen mallette"}}, "url": "https://github.com/apache/tinkerpop/commit/3c688c0caeae4e44da67b1555316b785adbb3953", "committedDate": "2020-08-05T16:26:38Z", "message": "TINKERPOP-2391 Remove GLV templating system"}, "afterCommit": {"oid": "612227f8df41138e0a96b156b22c1bcc26bbc943", "author": {"user": {"login": "spmallette", "name": "stephen mallette"}}, "url": "https://github.com/apache/tinkerpop/commit/612227f8df41138e0a96b156b22c1bcc26bbc943", "committedDate": "2020-08-20T13:14:51Z", "message": "TINKERPOP-2391 Remove GLV templating system"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4354, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}