{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA4NzM1NTg1", "number": 2211, "title": "Convert cache-api module to multiplatform", "bodyText": "Convert cache-api module to multiplatform\n\nMore classes are converted to Kotlin CacheReference, Record, RecordFieldJsonAdapter and RecordWeigher\nDeprecated nextCache() method is removed since we cannot have Optional class\nUUID is made multiplatform by depending on an open-source library. Let me know if you have any concerns.\nclone function is not the same as what we have in Java. That's why it is deprecated. Users can use toBuilder().build() instead.\n\nTests\nI first kept the tests in Java and verified that they work. But then converted them to commonTest with the last commit to also test them with iOS implementation.", "createdAt": "2020-04-24T19:51:17Z", "url": "https://github.com/apollographql/apollo-android/pull/2211", "merged": true, "mergeCommit": {"oid": "7261de18d3f11879f74ae268dca935c886913191"}, "closed": true, "closedAt": "2020-04-30T15:02:01Z", "author": {"login": "tasomaniac"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABca25uJAH2gAyNDA4NzM1NTg1OjBiODI3ZGUwMzMwM2IzZjg2MTdmY2E3OWY3ZWQxM2YwM2VjM2ZiYzQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABca5twmgFqTQwMDMxNjEzNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0b827de03303b3f8617fca79f7ed13f03ec3fbc4", "author": {"user": {"login": "tasomaniac", "name": "Said Tahsin Dane"}}, "url": "https://github.com/apollographql/apollo-android/commit/0b827de03303b3f8617fca79f7ed13f03ec3fbc4", "committedDate": "2020-04-24T19:46:02Z", "message": "Rename .java to .kt"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e0dc45ca1f1ef4d5ffc8f444da075abb44e49a4d", "author": {"user": {"login": "tasomaniac", "name": "Said Tahsin Dane"}}, "url": "https://github.com/apollographql/apollo-android/commit/e0dc45ca1f1ef4d5ffc8f444da075abb44e49a4d", "committedDate": "2020-04-24T19:46:03Z", "message": "Comvert normalized-cache-api module fully to Kotlin"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9c5f2b8ada927e6482d43c42c7989124b887c933", "author": {"user": {"login": "tasomaniac", "name": "Said Tahsin Dane"}}, "url": "https://github.com/apollographql/apollo-android/commit/9c5f2b8ada927e6482d43c42c7989124b887c933", "committedDate": "2020-04-24T19:46:03Z", "message": "Convert to Cache API Kotlin Multiplatform"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "775a1f19601b73fb3bfe6f0660c0d0cd44ab009f", "author": {"user": {"login": "tasomaniac", "name": "Said Tahsin Dane"}}, "url": "https://github.com/apollographql/apollo-android/commit/775a1f19601b73fb3bfe6f0660c0d0cd44ab009f", "committedDate": "2020-04-24T19:46:03Z", "message": "Use open-source version of UUID"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ddaf097c151d1304ff9825a031c8e4656377693", "author": {"user": {"login": "tasomaniac", "name": "Said Tahsin Dane"}}, "url": "https://github.com/apollographql/apollo-android/commit/3ddaf097c151d1304ff9825a031c8e4656377693", "committedDate": "2020-04-24T21:13:50Z", "message": "Migrate tests to common"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9f068554d8983d704739e92e6aa9e1580764bcc9", "author": {"user": {"login": "tasomaniac", "name": "Said Tahsin Dane"}}, "url": "https://github.com/apollographql/apollo-android/commit/9f068554d8983d704739e92e6aa9e1580764bcc9", "committedDate": "2020-04-24T19:46:03Z", "message": "Migrate tests to common"}, "afterCommit": {"oid": "3ddaf097c151d1304ff9825a031c8e4656377693", "author": {"user": {"login": "tasomaniac", "name": "Said Tahsin Dane"}}, "url": "https://github.com/apollographql/apollo-android/commit/3ddaf097c151d1304ff9825a031c8e4656377693", "committedDate": "2020-04-24T21:13:50Z", "message": "Migrate tests to common"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwMzE0MjEx", "url": "https://github.com/apollographql/apollo-android/pull/2211#pullrequestreview-400314211", "createdAt": "2020-04-24T22:56:19Z", "commit": {"oid": "3ddaf097c151d1304ff9825a031c8e4656377693"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMjo1NjoyMFrOGLr6Yw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMjo1NjoyMFrOGLr6Yw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDkwNjk3OQ==", "bodyText": "\ud83d\udc4d nice Ben :)", "url": "https://github.com/apollographql/apollo-android/pull/2211#discussion_r414906979", "createdAt": "2020-04-24T22:56:20Z", "author": {"login": "sav007"}, "path": "gradle/dependencies.gradle", "diffHunk": "@@ -101,6 +101,7 @@ ext.dep = [\n         plugin : \"com.squareup.sqldelight:gradle-plugin:$versions.sqldelight\"\n     ],\n     truth                 : \"com.google.truth:truth:$versions.truth\",\n+    uuid                  : \"com.benasher44:uuid:0.1.0\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ddaf097c151d1304ff9825a031c8e4656377693"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwMzE1Mzg2", "url": "https://github.com/apollographql/apollo-android/pull/2211#pullrequestreview-400315386", "createdAt": "2020-04-24T23:00:15Z", "commit": {"oid": "3ddaf097c151d1304ff9825a031c8e4656377693"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMzowMDoxNVrOGLr_uw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMzowMDoxNVrOGLr_uw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDkwODM0Nw==", "bodyText": "should it be an object?", "url": "https://github.com/apollographql/apollo-android/pull/2211#discussion_r414908347", "createdAt": "2020-04-24T23:00:15Z", "author": {"login": "sav007"}, "path": "apollo-normalized-cache-api/src/commonMain/kotlin/com/apollographql/apollo/cache/normalized/RecordFieldJsonAdapter.kt", "diffHunk": "@@ -0,0 +1,84 @@\n+package com.apollographql.apollo.cache.normalized\n+\n+import com.apollographql.apollo.api.internal.Throws\n+import com.apollographql.apollo.api.internal.json.BufferedSourceJsonReader\n+import com.apollographql.apollo.api.internal.json.JsonWriter\n+import com.apollographql.apollo.api.internal.json.use\n+import com.apollographql.apollo.cache.normalized.internal.CacheJsonStreamReader\n+import okio.Buffer\n+import okio.BufferedSource\n+import okio.ByteString.Companion.encodeUtf8\n+import okio.IOException\n+import kotlin.jvm.JvmStatic\n+\n+/**\n+ * An adapter used to serialize and deserialize Record fields. Record object types will be serialized to\n+ * [CacheReference].\n+ */\n+class RecordFieldJsonAdapter {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ddaf097c151d1304ff9825a031c8e4656377693"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwMzE1NzU4", "url": "https://github.com/apollographql/apollo-android/pull/2211#pullrequestreview-400315758", "createdAt": "2020-04-24T23:01:23Z", "commit": {"oid": "3ddaf097c151d1304ff9825a031c8e4656377693"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMzowMToyM1rOGLsBcw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMzowMToyM1rOGLsBcw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDkwODc4Nw==", "bodyText": "unused ?", "url": "https://github.com/apollographql/apollo-android/pull/2211#discussion_r414908787", "createdAt": "2020-04-24T23:01:23Z", "author": {"login": "sav007"}, "path": "apollo-normalized-cache-api/src/commonMain/kotlin/com/apollographql/apollo/cache/normalized/CacheKeyResolver.kt", "diffHunk": "@@ -2,6 +2,9 @@ package com.apollographql.apollo.cache.normalized\n \n import com.apollographql.apollo.api.Operation\n import com.apollographql.apollo.api.ResponseField\n+import kotlin.jvm.JvmField\n+import kotlin.jvm.JvmStatic\n+import kotlin.jvm.JvmSuppressWildcards", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ddaf097c151d1304ff9825a031c8e4656377693"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwMzE1ODE2", "url": "https://github.com/apollographql/apollo-android/pull/2211#pullrequestreview-400315816", "createdAt": "2020-04-24T23:01:36Z", "commit": {"oid": "3ddaf097c151d1304ff9825a031c8e4656377693"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMzowMTozNlrOGLsBww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMzowMTozNlrOGLsBww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDkwODg2Nw==", "bodyText": "unused?", "url": "https://github.com/apollographql/apollo-android/pull/2211#discussion_r414908867", "createdAt": "2020-04-24T23:01:36Z", "author": {"login": "sav007"}, "path": "apollo-normalized-cache-api/src/commonMain/kotlin/com/apollographql/apollo/cache/normalized/CacheKey.kt", "diffHunk": "@@ -1,5 +1,8 @@\n package com.apollographql.apollo.cache.normalized\n \n+import kotlin.jvm.JvmField\n+import kotlin.jvm.JvmStatic", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ddaf097c151d1304ff9825a031c8e4656377693"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwMzE2MTM2", "url": "https://github.com/apollographql/apollo-android/pull/2211#pullrequestreview-400316136", "createdAt": "2020-04-24T23:02:41Z", "commit": {"oid": "3ddaf097c151d1304ff9825a031c8e4656377693"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3971, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}