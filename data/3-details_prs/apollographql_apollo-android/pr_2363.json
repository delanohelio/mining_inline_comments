{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM0NDQ2NDA2", "number": 2363, "title": "Add opt-in to cache responses with errors", "bodyText": "Most straightforward way to fix #2358 by implementing #2281 (comment).\nI could make STORE_PARTIAL_RESPONSES deprecated right away, if there's another suggestion to enable old behavior. Overall I consider this a quick workaround for people affected by the breaking change introduced in #2281", "createdAt": "2020-06-15T10:34:14Z", "url": "https://github.com/apollographql/apollo-android/pull/2363", "merged": true, "mergeCommit": {"oid": "ba9d69fcaa98632c1424969f6e3a8438cf903e2c"}, "closed": true, "closedAt": "2020-06-16T11:55:15Z", "author": {"login": "lwasyl"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcreUPQgFqTQzMDUyNjUxMQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcrzwZngFqTQzMTQxODYxNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwNTI2NTEx", "url": "https://github.com/apollographql/apollo-android/pull/2363#pullrequestreview-430526511", "createdAt": "2020-06-15T10:44:05Z", "commit": {"oid": "c992f9dc9ec6f57ee13c1255aeae46e1a1ed4c8d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMDo0NDowNVrOGjs2aw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMDo0NDowNVrOGjs2aw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDA4ODE3MQ==", "bodyText": "Nit: maybe merge this condition with the one above? A second if isn't really required here.", "url": "https://github.com/apollographql/apollo-android/pull/2363#discussion_r440088171", "createdAt": "2020-06-15T10:44:05Z", "author": {"login": "martinbonnin"}, "path": "apollo-runtime/src/main/java/com/apollographql/apollo/internal/interceptor/ApolloCacheInterceptor.java", "diffHunk": "@@ -124,7 +125,9 @@ InterceptorResponse resolveFromCache(InterceptorRequest request) throws ApolloEx\n   Set<String> cacheResponse(final InterceptorResponse networkResponse,\n       final InterceptorRequest request) {\n     if (networkResponse.parsedResponse.isPresent() && networkResponse.parsedResponse.get().hasErrors()) {\n-      return Collections.emptySet();\n+      if (!request.cacheHeaders.hasHeader(ApolloCacheHeaders.STORE_PARTIAL_RESPONSES)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c992f9dc9ec6f57ee13c1255aeae46e1a1ed4c8d"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwNTI2ODUz", "url": "https://github.com/apollographql/apollo-android/pull/2363#pullrequestreview-430526853", "createdAt": "2020-06-15T10:44:39Z", "commit": {"oid": "c992f9dc9ec6f57ee13c1255aeae46e1a1ed4c8d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c992f9dc9ec6f57ee13c1255aeae46e1a1ed4c8d", "author": {"user": {"login": "lwasyl", "name": "\u0141ukasz Wasylkowski"}}, "url": "https://github.com/apollographql/apollo-android/commit/c992f9dc9ec6f57ee13c1255aeae46e1a1ed4c8d", "committedDate": "2020-06-15T10:31:23Z", "message": "Add opt-in to cache responses with errors"}, "afterCommit": {"oid": "7d95a48c2cbb2a80cb53de5d6eb2051ad996bc76", "author": {"user": {"login": "lwasyl", "name": "\u0141ukasz Wasylkowski"}}, "url": "https://github.com/apollographql/apollo-android/commit/7d95a48c2cbb2a80cb53de5d6eb2051ad996bc76", "committedDate": "2020-06-15T10:47:22Z", "message": "Add opt-in to cache responses with errors"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwNTMzODQ0", "url": "https://github.com/apollographql/apollo-android/pull/2363#pullrequestreview-430533844", "createdAt": "2020-06-15T10:55:44Z", "commit": {"oid": "7d95a48c2cbb2a80cb53de5d6eb2051ad996bc76"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f1b4a57f404346f528ec0acad032d7eddee4f4dc", "author": {"user": {"login": "lwasyl", "name": "\u0141ukasz Wasylkowski"}}, "url": "https://github.com/apollographql/apollo-android/commit/f1b4a57f404346f528ec0acad032d7eddee4f4dc", "committedDate": "2020-06-15T15:52:03Z", "message": "Add opt-in to cache responses with errors"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7d95a48c2cbb2a80cb53de5d6eb2051ad996bc76", "author": {"user": {"login": "lwasyl", "name": "\u0141ukasz Wasylkowski"}}, "url": "https://github.com/apollographql/apollo-android/commit/7d95a48c2cbb2a80cb53de5d6eb2051ad996bc76", "committedDate": "2020-06-15T10:47:22Z", "message": "Add opt-in to cache responses with errors"}, "afterCommit": {"oid": "f1b4a57f404346f528ec0acad032d7eddee4f4dc", "author": {"user": {"login": "lwasyl", "name": "\u0141ukasz Wasylkowski"}}, "url": "https://github.com/apollographql/apollo-android/commit/f1b4a57f404346f528ec0acad032d7eddee4f4dc", "committedDate": "2020-06-15T15:52:03Z", "message": "Add opt-in to cache responses with errors"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxNDE4NjE1", "url": "https://github.com/apollographql/apollo-android/pull/2363#pullrequestreview-431418615", "createdAt": "2020-06-16T11:42:51Z", "commit": {"oid": "f1b4a57f404346f528ec0acad032d7eddee4f4dc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3842, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}