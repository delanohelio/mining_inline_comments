{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI2MTEyMDAw", "number": 2324, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxNzozMjo1MlrOEBc4Kw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxNzozODo1MVrOEBc_dw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5OTU3MTYzOnYy", "diffSide": "RIGHT", "path": "README.md", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxNzozMjo1MlrOGdTjNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxNzo0Mzo0NFrOGdT5-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM4MjE5OQ==", "bodyText": "I don't think it needs to be app. What about \"In your Gradle module's build.gradle(.kts) file\"", "url": "https://github.com/apollographql/apollo-android/pull/2324#discussion_r433382199", "createdAt": "2020-06-01T17:32:52Z", "author": {"login": "tasomaniac"}, "path": "README.md", "diffHunk": "@@ -25,122 +25,95 @@ Apollo-android features:\n \n The latest Gradle plugin version is [ ![Download](https://api.bintray.com/packages/apollographql/android/apollo/images/download.svg) ](https://bintray.com/apollographql/android/apollo-gradle-plugin/_latestVersion)\n \n-To use this plugin, add the dependency to your project's root build.gradle file:\n+In your app Gradle file, apply the `com.apollographql.apollo` plugin and add the Apollo dependencies:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b61897e4356f8ba361f7e91c8199bfe034bfa6f0"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM4ODAyNg==", "bodyText": "Yep. I chose app because I think there were other references but more generic works for me too.", "url": "https://github.com/apollographql/apollo-android/pull/2324#discussion_r433388026", "createdAt": "2020-06-01T17:43:44Z", "author": {"login": "martinbonnin"}, "path": "README.md", "diffHunk": "@@ -25,122 +25,95 @@ Apollo-android features:\n \n The latest Gradle plugin version is [ ![Download](https://api.bintray.com/packages/apollographql/android/apollo/images/download.svg) ](https://bintray.com/apollographql/android/apollo-gradle-plugin/_latestVersion)\n \n-To use this plugin, add the dependency to your project's root build.gradle file:\n+In your app Gradle file, apply the `com.apollographql.apollo` plugin and add the Apollo dependencies:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM4MjE5OQ=="}, "originalCommit": {"oid": "b61897e4356f8ba361f7e91c8199bfe034bfa6f0"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5OTU3Nzk0OnYy", "diffSide": "RIGHT", "path": "README.md", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxNzozNDo1NFrOGdTnaw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxNzozNDo1NFrOGdTnaw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM4MzI3NQ==", "bodyText": "Similar to these, what about adding the api too? We can have a comment like:\n// optional: if you do not want to depend on runtime, add apollo-api for generated code.\n\nIt would be really good for awareness", "url": "https://github.com/apollographql/apollo-android/pull/2324#discussion_r433383275", "createdAt": "2020-06-01T17:34:54Z", "author": {"login": "tasomaniac"}, "path": "README.md", "diffHunk": "@@ -25,122 +25,95 @@ Apollo-android features:\n \n The latest Gradle plugin version is [ ![Download](https://api.bintray.com/packages/apollographql/android/apollo/images/download.svg) ](https://bintray.com/apollographql/android/apollo-gradle-plugin/_latestVersion)\n \n-To use this plugin, add the dependency to your project's root build.gradle file:\n+In your app Gradle file, apply the `com.apollographql.apollo` plugin and add the Apollo dependencies:\n \n ```groovy\n-buildscript {\n-  repositories {\n-    jcenter()\n-  }\n-  dependencies {\n-    classpath(\"com.apollographql.apollo:apollo-gradle-plugin:x.y.z\")\n-  }\n+// app/build.gradle or app/build.gradle.kts\n+plugins {\n+  id(\"com.apollographql.apollo\").version(\"x.y.z\")\n }\n-```\n-\n-Then add the dependencies to your app's build.gradle and apply file and apply the `com.apollographql.apollo` plugin:\n-\n-```groovy\n-apply plugin: 'com.apollographql.apollo'\n \n repositories {\n-    jcenter()\n+  jcenter()\n }\n \n dependencies {\n   implementation(\"com.apollographql.apollo:apollo-runtime:x.y.z\")\n   \n-  // If not already on your classpath, you might need the jetbrains annotations\n-  compileOnly(\"org.jetbrains:annotations:13.0\")\n-  testCompileOnly(\"org.jetbrains:annotations:13.0\")\n+  // optional: if you want to use the normalized cache", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b61897e4356f8ba361f7e91c8199bfe034bfa6f0"}, "originalPosition": 46}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5OTU4NDU5OnYy", "diffSide": "RIGHT", "path": "README.md", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxNzozNzowNVrOGdTr1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxNzo0NDoxNlrOGdT7Aw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM4NDQwNQ==", "bodyText": "This always confused me. Explicit running of this task is not necessary. Building/assembling also works.", "url": "https://github.com/apollographql/apollo-android/pull/2324#discussion_r433384405", "createdAt": "2020-06-01T17:37:05Z", "author": {"login": "tasomaniac"}, "path": "README.md", "diffHunk": "@@ -25,122 +25,95 @@ Apollo-android features:\n \n The latest Gradle plugin version is [ ![Download](https://api.bintray.com/packages/apollographql/android/apollo/images/download.svg) ](https://bintray.com/apollographql/android/apollo-gradle-plugin/_latestVersion)\n \n-To use this plugin, add the dependency to your project's root build.gradle file:\n+In your app Gradle file, apply the `com.apollographql.apollo` plugin and add the Apollo dependencies:\n \n ```groovy\n-buildscript {\n-  repositories {\n-    jcenter()\n-  }\n-  dependencies {\n-    classpath(\"com.apollographql.apollo:apollo-gradle-plugin:x.y.z\")\n-  }\n+// app/build.gradle or app/build.gradle.kts\n+plugins {\n+  id(\"com.apollographql.apollo\").version(\"x.y.z\")\n }\n-```\n-\n-Then add the dependencies to your app's build.gradle and apply file and apply the `com.apollographql.apollo` plugin:\n-\n-```groovy\n-apply plugin: 'com.apollographql.apollo'\n \n repositories {\n-    jcenter()\n+  jcenter()\n }\n \n dependencies {\n   implementation(\"com.apollographql.apollo:apollo-runtime:x.y.z\")\n   \n-  // If not already on your classpath, you might need the jetbrains annotations\n-  compileOnly(\"org.jetbrains:annotations:13.0\")\n-  testCompileOnly(\"org.jetbrains:annotations:13.0\")\n+  // optional: if you want to use the normalized cache\n+  implementation(\"com.apollographql.apollo:apollo-normalized-cache-sqlite:x.y.z\")\n+  // optional: for coroutines support\n+  implementation(\"com.apollographql.apollo:apollo-coroutines-support:x.y.z\")\n+  // optional: for RxJava3 support  \n+  implementation(\"com.apollographql.apollo:apollo-rx3-support:x.y.z\")\n }\n ```\n \n-## Generating models from your queries\n+## Downloading a schema.json file\n \n-1) Create a directory for your GraphQL files like you would do for Java/Kotlin: `src/main/graphql/com/example/`. Apollo-Android will generate models in the `com.apollographql.apollo.sample` package.\n-2) Add your `schema.json` to the directory at `src/main/graphql/com/example/schema.json`. If you don't have a `schema.json` file yet, read the section about [downloading a schema file](#downloading-a-schemajson-file). \n-3) Put your GraphQL queries in a `.graphql` files. For an example: `src/main/graphql/com/example/feed.graphql`: \n+Apollo-Android requires an introspection schema. You can get a schema.json file by running an introspection query on your endpoint. The Apollo Gradle plugin exposes a `downloadApolloSchema` task to help with this. You can download a schema by specifying your endpoint and the location where you want the schema to be downloaded:\n \n+```bash\n+./gradlew downloadApolloSchema --endpoint=https://your.graphql.endpoint --schema=app/src/main/graphql/com/example/schema.json\n ```\n-query FeedQuery($type: FeedType!, $limit: Int!) {\n-  feed(type: $type, limit: $limit) {\n-    comments {\n-      ...FeedCommentFragment\n-    }\n-    repository {\n-      ...RepositoryFragment\n-    }\n-    postedBy {\n-      login\n-    }\n-  }\n-}\n \n-fragment RepositoryFragment on Repository {\n-  name\n-  full_name\n-  owner {\n-    login\n-  }\n-}\n+If your endpoint requires authentication, you can pass custom HTTP headers:\n+\n+```\n+./gradlew downloadApolloSchema --endpoint=\"https://your.graphql.endpoint\" --schema=\"app/src/main/graphql/com/example\" --header=\"Authorization: Bearer $TOKEN\"\n+```\n \n-fragment FeedCommentFragment on Comment {\n-  id\n-  postedBy {\n-    login\n+## Generating models from your queries\n+\n+1) Create a directory for your GraphQL files like you would do for Java/Kotlin: `src/main/graphql/com/example/`. Apollo-Android will generate models in the `com.apollographql.apollo.sample` package.\n+2) Add your `schema.json` to the directory at `src/main/graphql/com/example/schema.json`. If you don't have a `schema.json` file yet, read the section about [downloading a schema file](#downloading-a-schemajson-file). \n+3) Put your GraphQL queries in a `.graphql` files. For an example: `src/main/graphql/com/example/LaunchDetails.graphql`: \n+\n+```graphql\n+query LaunchDetails($id:ID!) {\n+  launch(id: $id) {\n+    id\n+    site\n+    mission {\n+      name\n+      missionPatch(size:LARGE)\n+    }\n   }\n-  content\n }\n ```\n \n 4) Decide if you want to generate Kotlin or Java models:\n \n ```groovy\n-// build.gradle or build.gradle.kts\n+// app/build.gradle or app/build.gradle.kts\n apollo {\n   generateKotlinModels.set(true) // or false for Java models\n }\n ```\n \n-5) Execute `./gradlew generateApolloSources` to generate the models from your queries. This will create a generated `FeedQuery` Java or Kotlin source file for your query.\n+5) Execute `./gradlew generateApolloSources` to generate the models from your queries. This will create a generated `LaunchDetailsQuery` Java or Kotlin source file for your query.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b61897e4356f8ba361f7e91c8199bfe034bfa6f0"}, "originalPosition": 128}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM4ODI5MQ==", "bodyText": "Sounds good, I'll remove this.", "url": "https://github.com/apollographql/apollo-android/pull/2324#discussion_r433388291", "createdAt": "2020-06-01T17:44:16Z", "author": {"login": "martinbonnin"}, "path": "README.md", "diffHunk": "@@ -25,122 +25,95 @@ Apollo-android features:\n \n The latest Gradle plugin version is [ ![Download](https://api.bintray.com/packages/apollographql/android/apollo/images/download.svg) ](https://bintray.com/apollographql/android/apollo-gradle-plugin/_latestVersion)\n \n-To use this plugin, add the dependency to your project's root build.gradle file:\n+In your app Gradle file, apply the `com.apollographql.apollo` plugin and add the Apollo dependencies:\n \n ```groovy\n-buildscript {\n-  repositories {\n-    jcenter()\n-  }\n-  dependencies {\n-    classpath(\"com.apollographql.apollo:apollo-gradle-plugin:x.y.z\")\n-  }\n+// app/build.gradle or app/build.gradle.kts\n+plugins {\n+  id(\"com.apollographql.apollo\").version(\"x.y.z\")\n }\n-```\n-\n-Then add the dependencies to your app's build.gradle and apply file and apply the `com.apollographql.apollo` plugin:\n-\n-```groovy\n-apply plugin: 'com.apollographql.apollo'\n \n repositories {\n-    jcenter()\n+  jcenter()\n }\n \n dependencies {\n   implementation(\"com.apollographql.apollo:apollo-runtime:x.y.z\")\n   \n-  // If not already on your classpath, you might need the jetbrains annotations\n-  compileOnly(\"org.jetbrains:annotations:13.0\")\n-  testCompileOnly(\"org.jetbrains:annotations:13.0\")\n+  // optional: if you want to use the normalized cache\n+  implementation(\"com.apollographql.apollo:apollo-normalized-cache-sqlite:x.y.z\")\n+  // optional: for coroutines support\n+  implementation(\"com.apollographql.apollo:apollo-coroutines-support:x.y.z\")\n+  // optional: for RxJava3 support  \n+  implementation(\"com.apollographql.apollo:apollo-rx3-support:x.y.z\")\n }\n ```\n \n-## Generating models from your queries\n+## Downloading a schema.json file\n \n-1) Create a directory for your GraphQL files like you would do for Java/Kotlin: `src/main/graphql/com/example/`. Apollo-Android will generate models in the `com.apollographql.apollo.sample` package.\n-2) Add your `schema.json` to the directory at `src/main/graphql/com/example/schema.json`. If you don't have a `schema.json` file yet, read the section about [downloading a schema file](#downloading-a-schemajson-file). \n-3) Put your GraphQL queries in a `.graphql` files. For an example: `src/main/graphql/com/example/feed.graphql`: \n+Apollo-Android requires an introspection schema. You can get a schema.json file by running an introspection query on your endpoint. The Apollo Gradle plugin exposes a `downloadApolloSchema` task to help with this. You can download a schema by specifying your endpoint and the location where you want the schema to be downloaded:\n \n+```bash\n+./gradlew downloadApolloSchema --endpoint=https://your.graphql.endpoint --schema=app/src/main/graphql/com/example/schema.json\n ```\n-query FeedQuery($type: FeedType!, $limit: Int!) {\n-  feed(type: $type, limit: $limit) {\n-    comments {\n-      ...FeedCommentFragment\n-    }\n-    repository {\n-      ...RepositoryFragment\n-    }\n-    postedBy {\n-      login\n-    }\n-  }\n-}\n \n-fragment RepositoryFragment on Repository {\n-  name\n-  full_name\n-  owner {\n-    login\n-  }\n-}\n+If your endpoint requires authentication, you can pass custom HTTP headers:\n+\n+```\n+./gradlew downloadApolloSchema --endpoint=\"https://your.graphql.endpoint\" --schema=\"app/src/main/graphql/com/example\" --header=\"Authorization: Bearer $TOKEN\"\n+```\n \n-fragment FeedCommentFragment on Comment {\n-  id\n-  postedBy {\n-    login\n+## Generating models from your queries\n+\n+1) Create a directory for your GraphQL files like you would do for Java/Kotlin: `src/main/graphql/com/example/`. Apollo-Android will generate models in the `com.apollographql.apollo.sample` package.\n+2) Add your `schema.json` to the directory at `src/main/graphql/com/example/schema.json`. If you don't have a `schema.json` file yet, read the section about [downloading a schema file](#downloading-a-schemajson-file). \n+3) Put your GraphQL queries in a `.graphql` files. For an example: `src/main/graphql/com/example/LaunchDetails.graphql`: \n+\n+```graphql\n+query LaunchDetails($id:ID!) {\n+  launch(id: $id) {\n+    id\n+    site\n+    mission {\n+      name\n+      missionPatch(size:LARGE)\n+    }\n   }\n-  content\n }\n ```\n \n 4) Decide if you want to generate Kotlin or Java models:\n \n ```groovy\n-// build.gradle or build.gradle.kts\n+// app/build.gradle or app/build.gradle.kts\n apollo {\n   generateKotlinModels.set(true) // or false for Java models\n }\n ```\n \n-5) Execute `./gradlew generateApolloSources` to generate the models from your queries. This will create a generated `FeedQuery` Java or Kotlin source file for your query.\n+5) Execute `./gradlew generateApolloSources` to generate the models from your queries. This will create a generated `LaunchDetailsQuery` Java or Kotlin source file for your query.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM4NDQwNQ=="}, "originalCommit": {"oid": "b61897e4356f8ba361f7e91c8199bfe034bfa6f0"}, "originalPosition": 128}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5OTU5MDMxOnYy", "diffSide": "LEFT", "path": "README.md", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxNzozODo1MVrOGdTvhg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxODoxODoxMVrOGdVA9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM4NTM1MA==", "bodyText": "I think this is nice since it gets picked up and be available in getting started page on the docs website", "url": "https://github.com/apollographql/apollo-android/pull/2324#discussion_r433385350", "createdAt": "2020-06-01T17:38:51Z", "author": {"login": "tasomaniac"}, "path": "README.md", "diffHunk": "@@ -250,20 +194,14 @@ Advanced topics are available in [the official docs](https://www.apollographql.c\n * [subscriptions.md](https://www.apollographql.com/docs/android/advanced/subscriptions/)\n * [migrations.md](https://www.apollographql.com/docs/android/essentials/migration/)\n \n-\n-## Changelog", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b61897e4356f8ba361f7e91c8199bfe034bfa6f0"}, "originalPosition": 286}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM4OTE1MQ==", "bodyText": "It's already there actually, Release history in the Release section. Maybe we put the changelog word there for people looking for this particular word ?", "url": "https://github.com/apollographql/apollo-android/pull/2324#discussion_r433389151", "createdAt": "2020-06-01T17:45:50Z", "author": {"login": "martinbonnin"}, "path": "README.md", "diffHunk": "@@ -250,20 +194,14 @@ Advanced topics are available in [the official docs](https://www.apollographql.c\n * [subscriptions.md](https://www.apollographql.com/docs/android/advanced/subscriptions/)\n * [migrations.md](https://www.apollographql.com/docs/android/essentials/migration/)\n \n-\n-## Changelog", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM4NTM1MA=="}, "originalCommit": {"oid": "b61897e4356f8ba361f7e91c8199bfe034bfa6f0"}, "originalPosition": 286}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzQwNjE5Nw==", "bodyText": "Nope, I just didn't see it. I think this is all good.", "url": "https://github.com/apollographql/apollo-android/pull/2324#discussion_r433406197", "createdAt": "2020-06-01T18:18:11Z", "author": {"login": "tasomaniac"}, "path": "README.md", "diffHunk": "@@ -250,20 +194,14 @@ Advanced topics are available in [the official docs](https://www.apollographql.c\n * [subscriptions.md](https://www.apollographql.com/docs/android/advanced/subscriptions/)\n * [migrations.md](https://www.apollographql.com/docs/android/essentials/migration/)\n \n-\n-## Changelog", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM4NTM1MA=="}, "originalCommit": {"oid": "b61897e4356f8ba361f7e91c8199bfe034bfa6f0"}, "originalPosition": 286}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3105, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}