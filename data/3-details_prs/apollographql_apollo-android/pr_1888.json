{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYwMjE5MzI5", "number": 1888, "title": "Singularization fixes", "bodyText": "Picking up where #1880 left off\u2026\nSince updating to the kotlin codegen, we've run into lots of issues with bizarre singularization in our project. Examples include Pies -> Py, Ctas -> Ctum, and Slice -> Slouses. Another user opened an issue to report this problem a while back: #1686.\nThis PR addresses this issue in 2 ways, neither of which are guaranteed to work for all cases. For our project, all 3 instances of bad singularization have been fixed by this PR. Two were fixed by disabling singularization on non-arrays and one was fixed by updating the singularization rules.\n\nSingularization was disabled for everything that is not an element of an array. It seems like it was a bug that these classes were ever singularized in the first place.\nSingularization rules were synced from ruby on rails's inflector, which seems to be where the rules in this project came from in the first place (via rogueweb).\n\nNote: While I was working on Inflector.kt, I also did some minor optimizations. Now arrays will only be created once and each regex will only be compiled once.", "createdAt": "2020-01-07T23:34:57Z", "url": "https://github.com/apollographql/apollo-android/pull/1888", "merged": true, "mergeCommit": {"oid": "0dfcaf300d239d099c924740b545eea87eace8df"}, "closed": true, "closedAt": "2020-01-09T04:30:04Z", "author": {"login": "EricKuck"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb4Jb6HgH2gAyMzYwMjE5MzI5OjRkNjRiZmQ4YTY3NWUwNGMyM2JkYjdkYjI0ZTFiNmFmZTRkNzFlMDU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb4iQo1AFqTM0MDI4NDIwMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4d64bfd8a675e04c23bdb7db24e1b6afe4d71e05", "author": {"user": {"login": "EricKuck", "name": "Eric Kuck"}}, "url": "https://github.com/apollographql/apollo-android/commit/4d64bfd8a675e04c23bdb7db24e1b6afe4d71e05", "committedDate": "2020-01-07T23:34:19Z", "message": "Singularization updates"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5Nzg0NDk0", "url": "https://github.com/apollographql/apollo-android/pull/1888#pullrequestreview-339784494", "createdAt": "2020-01-08T10:49:44Z", "commit": {"oid": "4d64bfd8a675e04c23bdb7db24e1b6afe4d71e05"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxMDo0OTo0NFrOFbTOoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxMDo0OTo0NFrOFbTOoA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDE3MDkxMg==", "bodyText": "Interesting that it suffixes the class now. I think it should be ok without the 1 since it's nested ?\nclass AllStarships {\n    class AllStarships {\n    }\n}\n\nThat should be valid, right ?", "url": "https://github.com/apollographql/apollo-android/pull/1888#discussion_r364170912", "createdAt": "2020-01-08T10:49:44Z", "author": {"login": "martinbonnin"}, "path": "apollo-compiler/src/test/graphql/com/example/fragment_in_fragment/AllStarships.kt", "diffHunk": "@@ -117,7 +117,7 @@ class AllStarships : Query<AllStarships.Data, AllStarships.Data, Operation.Varia\n     }\n   }\n \n-  data class AllStarship(\n+  data class AllStarships1(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4d64bfd8a675e04c23bdb7db24e1b6afe4d71e05"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQwMTkzNTQx", "url": "https://github.com/apollographql/apollo-android/pull/1888#pullrequestreview-340193541", "createdAt": "2020-01-08T22:44:20Z", "commit": {"oid": "4d64bfd8a675e04c23bdb7db24e1b6afe4d71e05"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQwMjg0MjAz", "url": "https://github.com/apollographql/apollo-android/pull/1888#pullrequestreview-340284203", "createdAt": "2020-01-09T04:29:38Z", "commit": {"oid": "4d64bfd8a675e04c23bdb7db24e1b6afe4d71e05"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4096, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}