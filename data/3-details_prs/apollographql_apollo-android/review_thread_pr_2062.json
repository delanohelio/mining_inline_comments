{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg2NDE1OTEw", "number": 2062, "reviewThreads": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQyMzo0ODowMVrODm5RZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwMDozNzo1M1rODm5zUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMTEwODIxOnYy", "diffSide": "LEFT", "path": "apollo-api/src/commonMain/kotlin/com/apollographql/apollo/api/CustomTypeValue.kt", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQyMzo0ODowMVrOF0k4bQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwMDoxOToyOVrOF0laLQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY3NDU0MQ==", "bodyText": "Here hashCode has been always the same value. Was that intentional?", "url": "https://github.com/apollographql/apollo-android/pull/2062#discussion_r390674541", "createdAt": "2020-03-10T23:48:01Z", "author": {"login": "tasomaniac"}, "path": "apollo-api/src/commonMain/kotlin/com/apollographql/apollo/api/CustomTypeValue.kt", "diffHunk": "@@ -13,11 +16,12 @@ sealed class CustomTypeValue<T>(@JvmField val value: T) {\n     override fun equals(other: Any?): Boolean {\n       if (this === other) return true\n       if (other !is GraphQLString) return false\n+      if (value != other.value) return false\n       return true\n     }\n \n     override fun hashCode(): Int {\n-      return javaClass.hashCode()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "03915bc8558442c7113fc8133e1b42956f9b3788"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY4MzE4MQ==", "bodyText": "Probably oversight", "url": "https://github.com/apollographql/apollo-android/pull/2062#discussion_r390683181", "createdAt": "2020-03-11T00:19:29Z", "author": {"login": "sav007"}, "path": "apollo-api/src/commonMain/kotlin/com/apollographql/apollo/api/CustomTypeValue.kt", "diffHunk": "@@ -13,11 +16,12 @@ sealed class CustomTypeValue<T>(@JvmField val value: T) {\n     override fun equals(other: Any?): Boolean {\n       if (this === other) return true\n       if (other !is GraphQLString) return false\n+      if (value != other.value) return false\n       return true\n     }\n \n     override fun hashCode(): Int {\n-      return javaClass.hashCode()", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY3NDU0MQ=="}, "originalCommit": {"oid": "03915bc8558442c7113fc8133e1b42956f9b3788"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMTExMjE5OnYy", "diffSide": "LEFT", "path": "apollo-api/src/commonMain/kotlin/com/apollographql/apollo/api/internal/SimpleResponseReader.kt", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQyMzo1MDoxNlrOF0k63Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwMDoyNzozOVrOF0li1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY3NTE2NQ==", "bodyText": "I want to say that this is the same as before. But I'm not sure.", "url": "https://github.com/apollographql/apollo-android/pull/2062#discussion_r390675165", "createdAt": "2020-03-10T23:50:16Z", "author": {"login": "tasomaniac"}, "path": "apollo-api/src/commonMain/kotlin/com/apollographql/apollo/api/internal/SimpleResponseReader.kt", "diffHunk": "@@ -125,12 +124,12 @@ class SimpleResponseReader private constructor(\n         val conditionValue = variableValues[condition.variableName] as Boolean\n         if (condition.inverted) {\n           // means it's a skip directive\n-          if (java.lang.Boolean.TRUE == conditionValue) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "03915bc8558442c7113fc8133e1b42956f9b3788"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY4NTM5Nw==", "bodyText": "Yeah, that's fine. It was bad port to kotlin.", "url": "https://github.com/apollographql/apollo-android/pull/2062#discussion_r390685397", "createdAt": "2020-03-11T00:27:39Z", "author": {"login": "sav007"}, "path": "apollo-api/src/commonMain/kotlin/com/apollographql/apollo/api/internal/SimpleResponseReader.kt", "diffHunk": "@@ -125,12 +124,12 @@ class SimpleResponseReader private constructor(\n         val conditionValue = variableValues[condition.variableName] as Boolean\n         if (condition.inverted) {\n           // means it's a skip directive\n-          if (java.lang.Boolean.TRUE == conditionValue) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY3NTE2NQ=="}, "originalCommit": {"oid": "03915bc8558442c7113fc8133e1b42956f9b3788"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMTEyMzM0OnYy", "diffSide": "RIGHT", "path": "apollo-api/src/jvmMain/kotlin/com/apollographql/apollo/api/ScalarType.kt", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQyMzo1NjoxNVrOF0lBiA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxOTowNjo0NlrOF1E6iQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY3Njg3Mg==", "bodyText": "I'm not 100% sure about this. Right now, this is the only choice to keep it compatible. This means, javaType will work as before for Jvm/Android.\nRight now, this is also used by generated code. So, it would be blocker moving forward to figure this out.", "url": "https://github.com/apollographql/apollo-android/pull/2062#discussion_r390676872", "createdAt": "2020-03-10T23:56:15Z", "author": {"login": "tasomaniac"}, "path": "apollo-api/src/jvmMain/kotlin/com/apollographql/apollo/api/ScalarType.kt", "diffHunk": "@@ -0,0 +1,10 @@\n+package com.apollographql.apollo.api\n+\n+/**\n+ * Represents a custom GraphQL scalar type\n+ */\n+actual interface ScalarType {\n+  actual fun typeName(): String\n+\n+  fun javaType(): Class<*>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "03915bc8558442c7113fc8133e1b42956f9b3788"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY4OTkzMg==", "bodyText": "We need to think about this, this is used only to locate default scalar type adapter for system types like Int, Boolean, String etc.", "url": "https://github.com/apollographql/apollo-android/pull/2062#discussion_r390689932", "createdAt": "2020-03-11T00:45:53Z", "author": {"login": "sav007"}, "path": "apollo-api/src/jvmMain/kotlin/com/apollographql/apollo/api/ScalarType.kt", "diffHunk": "@@ -0,0 +1,10 @@\n+package com.apollographql.apollo.api\n+\n+/**\n+ * Represents a custom GraphQL scalar type\n+ */\n+actual interface ScalarType {\n+  actual fun typeName(): String\n+\n+  fun javaType(): Class<*>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY3Njg3Mg=="}, "originalCommit": {"oid": "03915bc8558442c7113fc8133e1b42956f9b3788"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTE5OTM2OQ==", "bodyText": "This will be done in a follow-up by also changing the code generation to accomodate.", "url": "https://github.com/apollographql/apollo-android/pull/2062#discussion_r391199369", "createdAt": "2020-03-11T19:06:46Z", "author": {"login": "tasomaniac"}, "path": "apollo-api/src/jvmMain/kotlin/com/apollographql/apollo/api/ScalarType.kt", "diffHunk": "@@ -0,0 +1,10 @@\n+package com.apollographql.apollo.api\n+\n+/**\n+ * Represents a custom GraphQL scalar type\n+ */\n+actual interface ScalarType {\n+  actual fun typeName(): String\n+\n+  fun javaType(): Class<*>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY3Njg3Mg=="}, "originalCommit": {"oid": "03915bc8558442c7113fc8133e1b42956f9b3788"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMTE1NTUxOnYy", "diffSide": "RIGHT", "path": "apollo-api/gradle.properties", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwMDoxNDowM1rOF0lUyQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwODowMzoxM1rOF0saBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY4MTgwMQ==", "bodyText": "is it intentionally? I thought we keep the name of artifact the same.", "url": "https://github.com/apollographql/apollo-android/pull/2062#discussion_r390681801", "createdAt": "2020-03-11T00:14:03Z", "author": {"login": "sav007"}, "path": "apollo-api/gradle.properties", "diffHunk": "@@ -1,4 +1,4 @@\n-POM_ARTIFACT_ID=apollo-api\n+POM_ARTIFACT_ID=apollo-api-jvm", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bea17e0864bdf99ef2e676f109a4ea8bb84b52b3"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDc5NzgzMA==", "bodyText": "I was just trying stuff. I reverted this soon after pushing.", "url": "https://github.com/apollographql/apollo-android/pull/2062#discussion_r390797830", "createdAt": "2020-03-11T08:03:13Z", "author": {"login": "tasomaniac"}, "path": "apollo-api/gradle.properties", "diffHunk": "@@ -1,4 +1,4 @@\n-POM_ARTIFACT_ID=apollo-api\n+POM_ARTIFACT_ID=apollo-api-jvm", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY4MTgwMQ=="}, "originalCommit": {"oid": "bea17e0864bdf99ef2e676f109a4ea8bb84b52b3"}, "originalPosition": 2}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMTE2MzA1OnYy", "diffSide": "RIGHT", "path": "apollo-api/src/commonMain/kotlin/com/apollographql/apollo/api/BigDecimal.kt", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwMDoxODozOVrOF0lZYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwMDoxODozOVrOF0lZYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY4Mjk3OA==", "bodyText": "I have in one of my project this https://gist.github.com/sav007/8bf365e7eaa86f4f4b6c890ea3ce47e6", "url": "https://github.com/apollographql/apollo-android/pull/2062#discussion_r390682978", "createdAt": "2020-03-11T00:18:39Z", "author": {"login": "sav007"}, "path": "apollo-api/src/commonMain/kotlin/com/apollographql/apollo/api/BigDecimal.kt", "diffHunk": "@@ -0,0 +1,7 @@\n+package com.apollographql.apollo.api\n+\n+expect class BigDecimal(value: String?) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bea17e0864bdf99ef2e676f109a4ea8bb84b52b3"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMTE3NTkxOnYy", "diffSide": "LEFT", "path": "apollo-api/src/commonMain/kotlin/com/apollographql/apollo/api/ScalarType.kt", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwMDoyNTo1N1rOF0lhBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxODoxMDoyMlrOF1C-QA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY4NDkzMw==", "bodyText": "Wonder if we should replace this with KClass, the only place where it used is to find default scalar type adapter.\ncom.apollographql.apollo.api.ScalarTypeAdapters", "url": "https://github.com/apollographql/apollo-android/pull/2062#discussion_r390684933", "createdAt": "2020-03-11T00:25:57Z", "author": {"login": "sav007"}, "path": "apollo-api/src/commonMain/kotlin/com/apollographql/apollo/api/ScalarType.kt", "diffHunk": "@@ -3,8 +3,6 @@ package com.apollographql.apollo.api\n /**\n  * Represents a custom GraphQL scalar type\n  */\n-interface ScalarType {\n+expect interface ScalarType {\n   fun typeName(): String\n-\n-  fun javaType(): Class<*>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bea17e0864bdf99ef2e676f109a4ea8bb84b52b3"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDc5NzM0Mw==", "bodyText": "I tried but it is not possible. It is because the code generation uses this to implement custom types and KClass would not compile in Java code generation.\nIf we replace it somehow with KClass, then it can be easily moved to common", "url": "https://github.com/apollographql/apollo-android/pull/2062#discussion_r390797343", "createdAt": "2020-03-11T08:01:53Z", "author": {"login": "tasomaniac"}, "path": "apollo-api/src/commonMain/kotlin/com/apollographql/apollo/api/ScalarType.kt", "diffHunk": "@@ -3,8 +3,6 @@ package com.apollographql.apollo.api\n /**\n  * Represents a custom GraphQL scalar type\n  */\n-interface ScalarType {\n+expect interface ScalarType {\n   fun typeName(): String\n-\n-  fun javaType(): Class<*>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY4NDkzMw=="}, "originalCommit": {"oid": "bea17e0864bdf99ef2e676f109a4ea8bb84b52b3"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTE2NzU1Mg==", "bodyText": "We can replace this with raw string, I can make codegen changes for that.", "url": "https://github.com/apollographql/apollo-android/pull/2062#discussion_r391167552", "createdAt": "2020-03-11T18:10:22Z", "author": {"login": "sav007"}, "path": "apollo-api/src/commonMain/kotlin/com/apollographql/apollo/api/ScalarType.kt", "diffHunk": "@@ -3,8 +3,6 @@ package com.apollographql.apollo.api\n /**\n  * Represents a custom GraphQL scalar type\n  */\n-interface ScalarType {\n+expect interface ScalarType {\n   fun typeName(): String\n-\n-  fun javaType(): Class<*>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY4NDkzMw=="}, "originalCommit": {"oid": "bea17e0864bdf99ef2e676f109a4ea8bb84b52b3"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMTE5MTAyOnYy", "diffSide": "RIGHT", "path": "apollo-api/build.gradle.kts", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwMDozNToxNlrOF0lqOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwMDozNToxNlrOF0lqOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY4NzI4OA==", "bodyText": "nit: should it be moved to dep.gradle?", "url": "https://github.com/apollographql/apollo-android/pull/2062#discussion_r390687288", "createdAt": "2020-03-11T00:35:16Z", "author": {"login": "sav007"}, "path": "apollo-api/build.gradle.kts", "diffHunk": "@@ -1,18 +1,36 @@\n plugins {\n   `java-library`\n-  kotlin(\"jvm\")\n+  kotlin(\"multiplatform\")\n }\n \n-dependencies {\n-  add(\"compileOnly\", groovy.util.Eval.x(project, \"x.dep.kotlin.stdLib\"))\n-  add(\"compileOnly\", groovy.util.Eval.x(project, \"x.dep.okHttp.okHttp\"))\n+kotlin {\n+  jvm {\n+    withJava()\n+  }\n \n-  add(\"api\", groovy.util.Eval.x(project, \"x.dep.kotlin.stdLib\"))\n-  add(\"api\", groovy.util.Eval.x(project, \"x.dep.okio\"))\n+  sourceSets {\n+    val commonMain by getting {\n+      dependencies {\n+        implementation(kotlin(\"stdlib-common\"))\n+        api(\"com.squareup.okio:okio-multiplatform:2.4.3\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "df06210d025711714ee90777c02dfad513160b75"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMTE5NTA1OnYy", "diffSide": "RIGHT", "path": "apollo-api/src/commonMain/kotlin/com/apollographql/apollo/api/ScalarTypeAdapters.kt", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwMDozNzo1M1rOF0lskA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwODowMjozMFrOF0sZCA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY4Nzg4OA==", "bodyText": "What holds us to move this class to common?", "url": "https://github.com/apollographql/apollo-android/pull/2062#discussion_r390687888", "createdAt": "2020-03-11T00:37:53Z", "author": {"login": "sav007"}, "path": "apollo-api/src/commonMain/kotlin/com/apollographql/apollo/api/ScalarTypeAdapters.kt", "diffHunk": "@@ -0,0 +1,10 @@\n+package com.apollographql.apollo.api\n+\n+expect class ScalarTypeAdapters(customAdapters: Map<ScalarType, CustomTypeAdapter<*>>) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "df06210d025711714ee90777c02dfad513160b75"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDc5NzU3Ng==", "bodyText": "Answered here #2062 (comment)", "url": "https://github.com/apollographql/apollo-android/pull/2062#discussion_r390797576", "createdAt": "2020-03-11T08:02:30Z", "author": {"login": "tasomaniac"}, "path": "apollo-api/src/commonMain/kotlin/com/apollographql/apollo/api/ScalarTypeAdapters.kt", "diffHunk": "@@ -0,0 +1,10 @@\n+package com.apollographql.apollo.api\n+\n+expect class ScalarTypeAdapters(customAdapters: Map<ScalarType, CustomTypeAdapter<*>>) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY4Nzg4OA=="}, "originalCommit": {"oid": "df06210d025711714ee90777c02dfad513160b75"}, "originalPosition": 3}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3301, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}