{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI2MDk0OTI0", "number": 2321, "title": "[Plugin] simplify the downloadApolloSchema task", "bodyText": "Looking at the documentation, I found this Gradle @Option annotation that allows to pass task inputs directly from the commandline. That will simplify downloading the schema:\nbefore:\n./gradlew downloadApolloSchema -Pcom.apollographql.apollo.endpoint=\"https://...\" -Pcom.apollographql.apollo.schema=\"src/main/graphql/...\"\n\nafter:\n./gradlew downloadApolloSchema --endpoint=\"https://...\" --schema=\"src/main/graphql/...\"", "createdAt": "2020-06-01T16:41:57Z", "url": "https://github.com/apollographql/apollo-android/pull/2321", "merged": true, "mergeCommit": {"oid": "39a8243beb200441204a45b7da31fd5f44f1a350"}, "closed": true, "closedAt": "2020-06-05T09:12:13Z", "author": {"login": "martinbonnin"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcnC_mAAH2gAyNDI2MDk0OTI0OjhmNjI4ODY2MzRhZjEwMzc3N2FjOTQxZDhjODJiMGJkNzU3MDlhZTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcrcHFFAFqTQzMDQxMjcwNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8f62886634af103777ac941d8c82b0bd75709ae5", "author": {"user": {"login": "martinbonnin", "name": "Martin Bonnin"}}, "url": "https://github.com/apollographql/apollo-android/commit/8f62886634af103777ac941d8c82b0bd75709ae5", "committedDate": "2020-06-01T16:38:24Z", "message": "simplify the downloadApolloSchema task"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzNjYzNDgx", "url": "https://github.com/apollographql/apollo-android/pull/2321#pullrequestreview-423663481", "createdAt": "2020-06-03T15:20:20Z", "commit": {"oid": "8f62886634af103777ac941d8c82b0bd75709ae5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwNDEyNzA3", "url": "https://github.com/apollographql/apollo-android/pull/2321#pullrequestreview-430412707", "createdAt": "2020-06-15T08:09:54Z", "commit": {"oid": "8f62886634af103777ac941d8c82b0bd75709ae5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwODowOTo1NFrOGjnhng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwODowOTo1NFrOGjnhng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAwMDkyNg==", "bodyText": "@martinbonnin is there a particular reason why this property doesn't have the @Option annotation?", "url": "https://github.com/apollographql/apollo-android/pull/2321#discussion_r440000926", "createdAt": "2020-06-15T08:09:54Z", "author": {"login": "francescocervone"}, "path": "apollo-gradle-plugin/src/main/kotlin/com/apollographql/apollo/gradle/internal/ApolloDownloadSchemaTask.kt", "diffHunk": "@@ -1,36 +1,32 @@\n package com.apollographql.apollo.gradle.internal\n \n-import com.squareup.moshi.JsonWriter\n-import okhttp3.HttpUrl.Companion.toHttpUrl\n-import okhttp3.MediaType.Companion.toMediaTypeOrNull\n-import okhttp3.OkHttpClient\n-import okhttp3.Request\n-import okhttp3.RequestBody.Companion.toRequestBody\n-import okio.buffer\n-import okio.sink\n import org.gradle.api.DefaultTask\n-import org.gradle.api.provider.MapProperty\n+import org.gradle.api.provider.ListProperty\n import org.gradle.api.provider.Property\n import org.gradle.api.tasks.Input\n import org.gradle.api.tasks.Optional\n import org.gradle.api.tasks.TaskAction\n-import java.io.ByteArrayOutputStream\n-import java.util.concurrent.TimeUnit\n+import org.gradle.api.tasks.options.Option\n+import java.io.File\n \n abstract class ApolloDownloadSchemaTask : DefaultTask() {\n   @get:Input\n-  abstract val endpointUrl: Property<String>\n+  @get:Option(option = \"endpoint\", description = \"url of the GraphQL endpoint\")\n+  abstract val endpoint: Property<String>\n \n   @get:Input\n-  abstract val schemaFilePath: Property<String>\n+  @get:Optional\n+  @get:Option(option = \"schema\", description = \"path where the schema will be downloaded, relative to the current working directory\")\n+  abstract val schema: Property<String>\n \n   @get:Optional\n   @get:Input\n-  abstract val headers: MapProperty<String, String>\n+  @set:Option(option = \"header\", description = \"headers in the form 'Name: Value'\")\n+  var header = emptyList<String>() // cannot be lazy for @Option to work\n \n-  @get:Optional\n   @get:Input\n-  abstract val queryParameters: MapProperty<String, String>\n+  @get:Optional\n+  abstract val schemaRelativeToProject: Property<String>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f62886634af103777ac941d8c82b0bd75709ae5"}, "originalPosition": 45}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3823, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}