{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU2MjMwNDYz", "number": 2467, "title": "JS support in apollo-api", "bodyText": "Hi, this is an attempt to make apollo-api available on Kotlin/JS.\nBigDecimal\nBigDecimal is implemented using big.js via npm.\nHowever, for BigDecimal to work on Kotlin/JS, it can no longer be a Number subclass (across all platforms), which appears to have special behavior in Kotlin/JS (denoted as a \"primitive class\" in JS vs typical stdlib classes), causing the compiled JS subclass failing to initialize.\nThe solution introduces BigDecimal.toNumber() to support CustomTypeValue.fromRawValue. On JVM/iOS, BigDecimal returns itself (i.e., the inheritance remains). On JS, toNumber() returns either Double or Long, depending on whether there is a fractional part.\n@JsName\nAnnotated plenty of deprecated methods with @JsName, because their default JS name would otherwise clash with their property equivalents.\nRemoved deprecated methods that has a default JS name clashing with their property counterpart.", "createdAt": "2020-07-24T11:17:32Z", "url": "https://github.com/apollographql/apollo-android/pull/2467", "merged": true, "mergeCommit": {"oid": "7ef22d3d7d7e2f1d4e05c2b086e5a2028d2aee6d"}, "closed": true, "closedAt": "2020-07-30T11:45:02Z", "author": {"login": "andersio"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc4KKv_ABqjM1ODUzOTY2NDA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc57tfRgH2gAyNDU2MjMwNDYzOjJkNzUxZDZlMWRiYzJmNjMwZDZlMTlmMGI0OTU3ZmQ3ZTMzMjM0YjU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4e2deeba33d61b62af1650036e41393ee3067f75", "author": {"user": {"login": "andersio", "name": "Anders Ha"}}, "url": "https://github.com/apollographql/apollo-android/commit/4e2deeba33d61b62af1650036e41393ee3067f75", "committedDate": "2020-07-24T10:33:36Z", "message": "apollo-api JS support"}, "afterCommit": {"oid": "06cf1cb17ef56704e3e49370daeece8e52632278", "author": {"user": {"login": "andersio", "name": "Anders Ha"}}, "url": "https://github.com/apollographql/apollo-android/commit/06cf1cb17ef56704e3e49370daeece8e52632278", "committedDate": "2020-07-24T20:34:38Z", "message": "apollo-api JS support"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "96c3dc236f0552aba0e19f64247c1cc2f76e41d0", "author": {"user": {"login": "andersio", "name": "Anders Ha"}}, "url": "https://github.com/apollographql/apollo-android/commit/96c3dc236f0552aba0e19f64247c1cc2f76e41d0", "committedDate": "2020-07-24T20:43:47Z", "message": "Declare kotlin.reflect as an API dep of apollo-api."}, "afterCommit": {"oid": "c661c9505e662afa5fb5f19b63650516f368d041", "author": {"user": {"login": "andersio", "name": "Anders Ha"}}, "url": "https://github.com/apollographql/apollo-android/commit/c661c9505e662afa5fb5f19b63650516f368d041", "committedDate": "2020-07-24T20:48:30Z", "message": "Declare kotlin.reflect as a dep of apollo-api JVM."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f61c63998ecdd80240a7ab73a11c69a03a2d191f", "author": {"user": {"login": "andersio", "name": "Anders Ha"}}, "url": "https://github.com/apollographql/apollo-android/commit/f61c63998ecdd80240a7ab73a11c69a03a2d191f", "committedDate": "2020-07-24T23:28:08Z", "message": "Update apollo-compiler code gen."}, "afterCommit": {"oid": "ffbec3b41cc1528285aa6d2e3e7908028500a406", "author": {"user": {"login": "andersio", "name": "Anders Ha"}}, "url": "https://github.com/apollographql/apollo-android/commit/ffbec3b41cc1528285aa6d2e3e7908028500a406", "committedDate": "2020-07-24T23:42:57Z", "message": "Update apollo-compiler code gen."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ffbec3b41cc1528285aa6d2e3e7908028500a406", "author": {"user": {"login": "andersio", "name": "Anders Ha"}}, "url": "https://github.com/apollographql/apollo-android/commit/ffbec3b41cc1528285aa6d2e3e7908028500a406", "committedDate": "2020-07-24T23:42:57Z", "message": "Update apollo-compiler code gen."}, "afterCommit": {"oid": "164ac1204264543b932de53cd0f23486ff38da86", "author": {"user": {"login": "andersio", "name": "Anders Ha"}}, "url": "https://github.com/apollographql/apollo-android/commit/164ac1204264543b932de53cd0f23486ff38da86", "committedDate": "2020-07-24T23:43:11Z", "message": "Update apollo-compiler code gen."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1Mjg5MzE2", "url": "https://github.com/apollographql/apollo-android/pull/2467#pullrequestreview-455289316", "createdAt": "2020-07-25T14:45:39Z", "commit": {"oid": "f52b490097c584426828e6a9cd930632ca5c8e50"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNVQxNDo0NTozOVrOG3FTWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNVQxNDo0NTozOVrOG3FTWw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDQxMTczOQ==", "bodyText": "I'm super reluctant to adding kotlin-reflect as a dependency as it's known to be a laaaaaarge dependency. See https://youtrack.jetbrains.com/issue/KT-20793 for an exemple.\napollo-api is pretty lightweight at the moment and given that it's imported by all other modules, I'd like to keep it that way.\nCan you elaborate why keeping a String for scalar types doesn't work ? I didn't find that many places using KClass.qualifiedName() and most of them are for debug/troubleshooting.", "url": "https://github.com/apollographql/apollo-android/pull/2467#discussion_r460411739", "createdAt": "2020-07-25T14:45:39Z", "author": {"login": "martinbonnin"}, "path": "apollo-api/build.gradle.kts", "diffHunk": "@@ -36,6 +44,7 @@ kotlin {\n       dependsOn(commonMain)\n       dependencies {\n         implementation(kotlin(\"stdlib\"))\n+        implementation(groovy.util.Eval.x(project, \"x.dep.kotlin.reflect\"))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f52b490097c584426828e6a9cd930632ca5c8e50"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1Mjg5NTA4", "url": "https://github.com/apollographql/apollo-android/pull/2467#pullrequestreview-455289508", "createdAt": "2020-07-25T14:49:17Z", "commit": {"oid": "f52b490097c584426828e6a9cd930632ca5c8e50"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNVQxNDo0OToxN1rOG3FUdQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNVQxNDo0OToxN1rOG3FUdQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDQxMjAyMQ==", "bodyText": "Nit: unused import?", "url": "https://github.com/apollographql/apollo-android/pull/2467#discussion_r460412021", "createdAt": "2020-07-25T14:49:17Z", "author": {"login": "martinbonnin"}, "path": "apollo-api/src/commonMain/kotlin/com/apollographql/apollo/api/Response.kt", "diffHunk": "@@ -1,6 +1,7 @@\n package com.apollographql.apollo.api\n \n import kotlin.jvm.JvmStatic\n+import kotlin.js.JsName", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f52b490097c584426828e6a9cd930632ca5c8e50"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "56cccd5a1080cb4545a50c88a72f8d38ae893f88", "author": {"user": {"login": "andersio", "name": "Anders Ha"}}, "url": "https://github.com/apollographql/apollo-android/commit/56cccd5a1080cb4545a50c88a72f8d38ae893f88", "committedDate": "2020-07-25T16:01:41Z", "message": "Update tests to stop using `KClass.qualifiedName()`."}, "afterCommit": {"oid": "dbfb053c08d342df32392805e601469b5dd1f349", "author": {"user": {"login": "andersio", "name": "Anders Ha"}}, "url": "https://github.com/apollographql/apollo-android/commit/dbfb053c08d342df32392805e601469b5dd1f349", "committedDate": "2020-07-25T16:12:53Z", "message": "Update tests to stop using `KClass.qualifiedName()`."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dbfb053c08d342df32392805e601469b5dd1f349", "author": {"user": {"login": "andersio", "name": "Anders Ha"}}, "url": "https://github.com/apollographql/apollo-android/commit/dbfb053c08d342df32392805e601469b5dd1f349", "committedDate": "2020-07-25T16:12:53Z", "message": "Update tests to stop using `KClass.qualifiedName()`."}, "afterCommit": {"oid": "ab46dd8da6d0c67c3f1f4879264e96ca352bf39a", "author": {"user": {"login": "andersio", "name": "Anders Ha"}}, "url": "https://github.com/apollographql/apollo-android/commit/ab46dd8da6d0c67c3f1f4879264e96ca352bf39a", "committedDate": "2020-07-25T16:14:03Z", "message": "Update tests to stop using `KClass.qualifiedName()`."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fe78aec2951bae0653f574153b3df9b5b79f4f20", "author": {"user": {"login": "andersio", "name": "Anders Ha"}}, "url": "https://github.com/apollographql/apollo-android/commit/fe78aec2951bae0653f574153b3df9b5b79f4f20", "committedDate": "2020-07-25T18:56:29Z", "message": "Add a missing @JsName annotation."}, "afterCommit": {"oid": "0587be956b26d35d1808d49b208f87971ce66311", "author": {"user": {"login": "andersio", "name": "Anders Ha"}}, "url": "https://github.com/apollographql/apollo-android/commit/0587be956b26d35d1808d49b208f87971ce66311", "committedDate": "2020-07-25T19:11:31Z", "message": "`apollo-api` JS support. (rebased from dev-3.x to master)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "212a7ee502d7a1e03c8a6e506e0ddf8d4e717260", "author": {"user": {"login": "andersio", "name": "Anders Ha"}}, "url": "https://github.com/apollographql/apollo-android/commit/212a7ee502d7a1e03c8a6e506e0ddf8d4e717260", "committedDate": "2020-07-25T19:24:29Z", "message": "`apollo-api` JS support. (rebased from dev-3.x to master)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0587be956b26d35d1808d49b208f87971ce66311", "author": {"user": {"login": "andersio", "name": "Anders Ha"}}, "url": "https://github.com/apollographql/apollo-android/commit/0587be956b26d35d1808d49b208f87971ce66311", "committedDate": "2020-07-25T19:11:31Z", "message": "`apollo-api` JS support. (rebased from dev-3.x to master)"}, "afterCommit": {"oid": "212a7ee502d7a1e03c8a6e506e0ddf8d4e717260", "author": {"user": {"login": "andersio", "name": "Anders Ha"}}, "url": "https://github.com/apollographql/apollo-android/commit/212a7ee502d7a1e03c8a6e506e0ddf8d4e717260", "committedDate": "2020-07-25T19:24:29Z", "message": "`apollo-api` JS support. (rebased from dev-3.x to master)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a6b8021040584d7bb8fcc028b34bd335d6a0b86f", "author": {"user": {"login": "andersio", "name": "Anders Ha"}}, "url": "https://github.com/apollographql/apollo-android/commit/a6b8021040584d7bb8fcc028b34bd335d6a0b86f", "committedDate": "2020-07-25T23:45:57Z", "message": "Update apollo-api/api.txt for passing the Metalava check."}, "afterCommit": {"oid": "9dbcb99c4a5427aaacee01097a0a04cca61dc4f1", "author": {"user": {"login": "andersio", "name": "Anders Ha"}}, "url": "https://github.com/apollographql/apollo-android/commit/9dbcb99c4a5427aaacee01097a0a04cca61dc4f1", "committedDate": "2020-07-25T23:51:13Z", "message": "Update apollo-api/api.txt. Mark external JS decl as internal."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "047886ead99b6db562f7abd3f00b21417143a415", "author": {"user": {"login": "andersio", "name": "Anders Ha"}}, "url": "https://github.com/apollographql/apollo-android/commit/047886ead99b6db562f7abd3f00b21417143a415", "committedDate": "2020-07-26T01:30:59Z", "message": "Update apollo-api/api.txt. Mark external JS decl as internal."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9dbcb99c4a5427aaacee01097a0a04cca61dc4f1", "author": {"user": {"login": "andersio", "name": "Anders Ha"}}, "url": "https://github.com/apollographql/apollo-android/commit/9dbcb99c4a5427aaacee01097a0a04cca61dc4f1", "committedDate": "2020-07-25T23:51:13Z", "message": "Update apollo-api/api.txt. Mark external JS decl as internal."}, "afterCommit": {"oid": "047886ead99b6db562f7abd3f00b21417143a415", "author": {"user": {"login": "andersio", "name": "Anders Ha"}}, "url": "https://github.com/apollographql/apollo-android/commit/047886ead99b6db562f7abd3f00b21417143a415", "committedDate": "2020-07-26T01:30:59Z", "message": "Update apollo-api/api.txt. Mark external JS decl as internal."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1MzYyMTc2", "url": "https://github.com/apollographql/apollo-android/pull/2467#pullrequestreview-455362176", "createdAt": "2020-07-26T12:57:09Z", "commit": {"oid": "047886ead99b6db562f7abd3f00b21417143a415"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2d751d6e1dbc2f630d6e19f0b4957fd7e33234b5", "author": {"user": {"login": "martinbonnin", "name": "Martin Bonnin"}}, "url": "https://github.com/apollographql/apollo-android/commit/2d751d6e1dbc2f630d6e19f0b4957fd7e33234b5", "committedDate": "2020-07-30T08:53:51Z", "message": "Merge branch 'master' into api-js"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4215, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}