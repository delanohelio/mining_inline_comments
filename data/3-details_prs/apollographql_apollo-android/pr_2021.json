{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgxMDE1ODQ2", "number": 2021, "title": "Convert top level api classes to Kotlin", "bodyText": "", "createdAt": "2020-02-27T18:56:57Z", "url": "https://github.com/apollographql/apollo-android/pull/2021", "merged": true, "mergeCommit": {"oid": "901f8af32a5155060fe3dddb8d67196458cbe80b"}, "closed": true, "closedAt": "2020-03-02T00:19:50Z", "author": {"login": "sav007"}, "timelineItems": {"totalCount": 23, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcIxhp1gBqjMwODIzNDM1MjM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcJgpBPAFqTM2Njg5MDg2Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6d4eecd5040bc4877b0792dbe0e931c6f17fedc6", "author": {"user": {"login": "sav007", "name": "Ivan Savytskyi"}}, "url": "https://github.com/apollographql/apollo-android/commit/6d4eecd5040bc4877b0792dbe0e931c6f17fedc6", "committedDate": "2020-02-28T01:52:48Z", "message": "Fix build"}, "afterCommit": {"oid": "a5b1a6acfb98e5bb4719cd3c413c68ef0e47a2af", "author": {"user": {"login": "sav007", "name": "Ivan Savytskyi"}}, "url": "https://github.com/apollographql/apollo-android/commit/a5b1a6acfb98e5bb4719cd3c413c68ef0e47a2af", "committedDate": "2020-02-28T15:19:19Z", "message": "Fix build"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a5b1a6acfb98e5bb4719cd3c413c68ef0e47a2af", "author": {"user": {"login": "sav007", "name": "Ivan Savytskyi"}}, "url": "https://github.com/apollographql/apollo-android/commit/a5b1a6acfb98e5bb4719cd3c413c68ef0e47a2af", "committedDate": "2020-02-28T15:19:19Z", "message": "Fix build"}, "afterCommit": {"oid": "6b615d90b711c2c474844a8c6fe8200d4f1d020a", "author": {"user": {"login": "sav007", "name": "Ivan Savytskyi"}}, "url": "https://github.com/apollographql/apollo-android/commit/6b615d90b711c2c474844a8c6fe8200d4f1d020a", "committedDate": "2020-02-28T15:57:17Z", "message": "Fix build"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6b615d90b711c2c474844a8c6fe8200d4f1d020a", "author": {"user": {"login": "sav007", "name": "Ivan Savytskyi"}}, "url": "https://github.com/apollographql/apollo-android/commit/6b615d90b711c2c474844a8c6fe8200d4f1d020a", "committedDate": "2020-02-28T15:57:17Z", "message": "Fix build"}, "afterCommit": {"oid": "b23bd7ab90ecd096a789f4faad75d89c0d0ccb2e", "author": {"user": {"login": "sav007", "name": "Ivan Savytskyi"}}, "url": "https://github.com/apollographql/apollo-android/commit/b23bd7ab90ecd096a789f4faad75d89c0d0ccb2e", "committedDate": "2020-02-28T16:22:11Z", "message": "Fix build"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "68c6bba46243ef2ab6b5219c545b5f7a1e3d2114", "author": {"user": {"login": "sav007", "name": "Ivan Savytskyi"}}, "url": "https://github.com/apollographql/apollo-android/commit/68c6bba46243ef2ab6b5219c545b5f7a1e3d2114", "committedDate": "2020-02-28T20:58:40Z", "message": "Convert top level api classes to Kotlin"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "292368db7c5a7464f1061fb85cdfffea4c97f1be", "author": {"user": {"login": "sav007", "name": "Ivan Savytskyi"}}, "url": "https://github.com/apollographql/apollo-android/commit/292368db7c5a7464f1061fb85cdfffea4c97f1be", "committedDate": "2020-02-28T20:58:40Z", "message": "Fix bad migration"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2d207965ca12b4917d5f9da5e061f006e2c21cb8", "author": {"user": {"login": "sav007", "name": "Ivan Savytskyi"}}, "url": "https://github.com/apollographql/apollo-android/commit/2d207965ca12b4917d5f9da5e061f006e2c21cb8", "committedDate": "2020-02-28T20:58:40Z", "message": "Fix build"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "35ac240ba8db3d498a90b8f097680034c9c353b7", "author": {"user": {"login": "sav007", "name": "Ivan Savytskyi"}}, "url": "https://github.com/apollographql/apollo-android/commit/35ac240ba8db3d498a90b8f097680034c9c353b7", "committedDate": "2020-02-28T20:58:40Z", "message": "Fix scalar type adapters"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f5e01afb13a776427bf70d8954768b88bf44c60", "author": {"user": {"login": "sav007", "name": "Ivan Savytskyi"}}, "url": "https://github.com/apollographql/apollo-android/commit/6f5e01afb13a776427bf70d8954768b88bf44c60", "committedDate": "2020-02-28T20:58:40Z", "message": "Fix generated test fixtures"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "93abc3b2a70032fa15d40c7c7c935c05a22e79ec", "author": {"user": {"login": "sav007", "name": "Ivan Savytskyi"}}, "url": "https://github.com/apollographql/apollo-android/commit/93abc3b2a70032fa15d40c7c7c935c05a22e79ec", "committedDate": "2020-02-28T20:04:10Z", "message": "Fix generated test fixtures"}, "afterCommit": {"oid": "6f5e01afb13a776427bf70d8954768b88bf44c60", "author": {"user": {"login": "sav007", "name": "Ivan Savytskyi"}}, "url": "https://github.com/apollographql/apollo-android/commit/6f5e01afb13a776427bf70d8954768b88bf44c60", "committedDate": "2020-02-28T20:58:40Z", "message": "Fix generated test fixtures"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "84520563a3879e4bc617953100b7be86ab43cf9c", "author": {"user": {"login": "sav007", "name": "Ivan Savytskyi"}}, "url": "https://github.com/apollographql/apollo-android/commit/84520563a3879e4bc617953100b7be86ab43cf9c", "committedDate": "2020-02-28T21:37:31Z", "message": "Fix build"}, "afterCommit": {"oid": "0cb52da41c0bd0ca5b8e55ed5fee8e6fc610347c", "author": {"user": {"login": "sav007", "name": "Ivan Savytskyi"}}, "url": "https://github.com/apollographql/apollo-android/commit/0cb52da41c0bd0ca5b8e55ed5fee8e6fc610347c", "committedDate": "2020-02-28T23:39:38Z", "message": "Fix build"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0cb52da41c0bd0ca5b8e55ed5fee8e6fc610347c", "author": {"user": {"login": "sav007", "name": "Ivan Savytskyi"}}, "url": "https://github.com/apollographql/apollo-android/commit/0cb52da41c0bd0ca5b8e55ed5fee8e6fc610347c", "committedDate": "2020-02-28T23:39:38Z", "message": "Fix build"}, "afterCommit": {"oid": "6f7f5b372a2d642d4d2ba6b924ef26f999956673", "author": {"user": {"login": "sav007", "name": "Ivan Savytskyi"}}, "url": "https://github.com/apollographql/apollo-android/commit/6f7f5b372a2d642d4d2ba6b924ef26f999956673", "committedDate": "2020-02-29T00:11:42Z", "message": "Fix build"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "17c87de51892bac9064c8c7b53e22f0c80073d0b", "author": {"user": {"login": "sav007", "name": "Ivan Savytskyi"}}, "url": "https://github.com/apollographql/apollo-android/commit/17c87de51892bac9064c8c7b53e22f0c80073d0b", "committedDate": "2020-02-29T01:04:11Z", "message": "Fix build"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6f7f5b372a2d642d4d2ba6b924ef26f999956673", "author": {"user": {"login": "sav007", "name": "Ivan Savytskyi"}}, "url": "https://github.com/apollographql/apollo-android/commit/6f7f5b372a2d642d4d2ba6b924ef26f999956673", "committedDate": "2020-02-29T00:11:42Z", "message": "Fix build"}, "afterCommit": {"oid": "17c87de51892bac9064c8c7b53e22f0c80073d0b", "author": {"user": {"login": "sav007", "name": "Ivan Savytskyi"}}, "url": "https://github.com/apollographql/apollo-android/commit/17c87de51892bac9064c8c7b53e22f0c80073d0b", "committedDate": "2020-02-29T01:04:11Z", "message": "Fix build"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "265a7e5f75d7a4141fee77730b74be242798d518", "author": {"user": {"login": "sav007", "name": "Ivan Savytskyi"}}, "url": "https://github.com/apollographql/apollo-android/commit/265a7e5f75d7a4141fee77730b74be242798d518", "committedDate": "2020-02-29T02:41:40Z", "message": "Bump kotlin poet dependency and fix issues"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2ODUxMDU5", "url": "https://github.com/apollographql/apollo-android/pull/2021#pullrequestreview-366851059", "createdAt": "2020-03-01T11:00:06Z", "commit": {"oid": "265a7e5f75d7a4141fee77730b74be242798d518"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMVQxMTowMDowNlrOFwNjQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMVQxMTowMDowNlrOFwNjQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjA5Nzk4Nw==", "bodyText": "Is the @JvmField required here ? It exposes a field publicly for no apparent reason.", "url": "https://github.com/apollographql/apollo-android/pull/2021#discussion_r386097987", "createdAt": "2020-03-01T11:00:06Z", "author": {"login": "martinbonnin"}, "path": "apollo-api/src/main/java/com/apollographql/apollo/api/Error.kt", "diffHunk": "@@ -0,0 +1,74 @@\n+package com.apollographql.apollo.api\n+\n+/**\n+ * Represents an error response returned from the GraphQL server\n+ */\n+data class Error(\n+    /**\n+     * Server error message\n+     */\n+    @JvmField\n+    val message: String,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "265a7e5f75d7a4141fee77730b74be242798d518"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2ODUxMTcx", "url": "https://github.com/apollographql/apollo-android/pull/2021#pullrequestreview-366851171", "createdAt": "2020-03-01T11:02:16Z", "commit": {"oid": "265a7e5f75d7a4141fee77730b74be242798d518"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMVQxMTowMjoxNlrOFwNj9w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMVQxMTowMjoxNlrOFwNj9w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjA5ODE2Nw==", "bodyText": "+1 for the deprecation notice \ud83d\udc4d\nI wonder how that's going to play with Java if we decide to remove @JvmField as mentioned above.", "url": "https://github.com/apollographql/apollo-android/pull/2021#discussion_r386098167", "createdAt": "2020-03-01T11:02:16Z", "author": {"login": "martinbonnin"}, "path": "apollo-api/src/main/java/com/apollographql/apollo/api/Error.kt", "diffHunk": "@@ -0,0 +1,74 @@\n+package com.apollographql.apollo.api\n+\n+/**\n+ * Represents an error response returned from the GraphQL server\n+ */\n+data class Error(\n+    /**\n+     * Server error message\n+     */\n+    @JvmField\n+    val message: String,\n+\n+    /**\n+     * Locations of the errors in the GraphQL operation\n+     */\n+    @JvmField\n+    val locations: List<Location> = emptyList(),\n+\n+    /**\n+     * Custom attributes associated with this error\n+     */\n+    @JvmField\n+    val customAttributes: Map<String, Any?> = emptyMap()\n+) {\n+\n+  /**\n+   * Returns server error message.\n+   */\n+  @Deprecated(message = \"Use property instead\", replaceWith = ReplaceWith(expression = \"message\"))\n+  fun message(): String? = message", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "265a7e5f75d7a4141fee77730b74be242798d518"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2ODUxNTgw", "url": "https://github.com/apollographql/apollo-android/pull/2021#pullrequestreview-366851580", "createdAt": "2020-03-01T11:10:21Z", "commit": {"oid": "265a7e5f75d7a4141fee77730b74be242798d518"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMVQxMToxMDoyMlrOFwNlyw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMVQxMToxMDoyMlrOFwNlyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjA5ODYzNQ==", "bodyText": "Why do we need FileUpload to be a data class ?", "url": "https://github.com/apollographql/apollo-android/pull/2021#discussion_r386098635", "createdAt": "2020-03-01T11:10:22Z", "author": {"login": "martinbonnin"}, "path": "apollo-api/src/main/java/com/apollographql/apollo/api/FileUpload.kt", "diffHunk": "@@ -0,0 +1,5 @@\n+package com.apollographql.apollo.api\n+\n+import java.io.File\n+\n+data class FileUpload(@JvmField val mimetype: String, @JvmField val file: File)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "265a7e5f75d7a4141fee77730b74be242798d518"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2ODUxODkw", "url": "https://github.com/apollographql/apollo-android/pull/2021#pullrequestreview-366851890", "createdAt": "2020-03-01T11:16:30Z", "commit": {"oid": "265a7e5f75d7a4141fee77730b74be242798d518"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMVQxMToxNjozMFrOFwNnZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMVQxMToxNjozMFrOFwNnZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjA5OTA0Ng==", "bodyText": "This used to have throw IOException in the signature. I don't think it's a huge problem since I think marshal is only used internally ? If that's the case, it would be worth hiding that in the .internal package at some point (can be done in a later PR)", "url": "https://github.com/apollographql/apollo-android/pull/2021#discussion_r386099046", "createdAt": "2020-03-01T11:16:30Z", "author": {"login": "martinbonnin"}, "path": "apollo-api/src/main/java/com/apollographql/apollo/api/Operation.kt", "diffHunk": "@@ -0,0 +1,125 @@\n+package com.apollographql.apollo.api\n+\n+import com.apollographql.apollo.api.internal.InputFieldMarshaller\n+import com.apollographql.apollo.api.internal.ResponseFieldMapper\n+import com.apollographql.apollo.api.internal.ResponseFieldMarshaller\n+import com.apollographql.apollo.api.internal.json.InputFieldJsonWriter\n+import com.apollographql.apollo.api.internal.json.JsonWriter\n+import okio.Buffer\n+import okio.BufferedSource\n+import java.io.IOException\n+\n+/**\n+ * Represents a GraphQL operation (mutation or query).\n+ */\n+interface Operation<D : Operation.Data, T, V : Operation.Variables> {\n+  /**\n+   * Returns the raw GraphQL operation String.\n+   */\n+  fun queryDocument(): String\n+\n+  /**\n+   * Returns the variables associated with this GraphQL operation.\n+   */\n+  fun variables(): V\n+\n+  /**\n+   * Returns a mapper that maps the server response data to generated model class [D].\n+   */\n+  fun responseFieldMapper(): ResponseFieldMapper<D>\n+\n+  /**\n+   * Wraps the generated response data class [D] with another class. For example, a use case for this would be to\n+   * wrap the generated response data class in an Optional i.e. Optional.fromNullable(data).\n+   */\n+  fun wrapData(data: D?): T?\n+\n+  /**\n+   * Returns GraphQL operation name [OperationName].\n+   */\n+  fun name(): OperationName\n+\n+  /**\n+   * Returns a unique identifier for this operation.\n+   */\n+  fun operationId(): String\n+\n+  /**\n+   * Parses GraphQL operation raw response from the [source] with provided [scalarTypeAdapters] and returns result [Response]\n+   */\n+  @Throws(IOException::class)\n+  fun parse(source: BufferedSource, scalarTypeAdapters: ScalarTypeAdapters): Response<T>\n+\n+  /**\n+   * Parses GraphQL operation raw response from the [source] and returns result [Response]\n+   */\n+  @Throws(IOException::class)\n+  fun parse(source: BufferedSource): Response<T>\n+\n+  /**\n+   * Abstraction for data returned by the server in response to this operation.\n+   */\n+  interface Data {\n+\n+    /**\n+     * Returns marshaller [ResponseFieldMarshaller] to serialize operation data\n+     */\n+    fun marshaller(): ResponseFieldMarshaller\n+  }\n+\n+  /**\n+   * Abstraction for the variables which are a part of the GraphQL operation.\n+   * For example, for the following GraphQL operation, Variables represents values for GraphQL '$type' and '$limit' variables:\n+   *\n+   * ```\n+   *  query FeedQuery($type: FeedType!, $limit: Int!) {\n+   *    feedEntries: feed(type: $type, limit: $limit) {\n+   *      id\n+   *      repository {\n+   *        ...RepositoryFragment\n+   *      }\n+   *      postedBy {\n+   *        login\n+   *      }\n+   *    }\n+   * }\n+   * ```\n+   */\n+  open class Variables {\n+\n+    open fun valueMap(): Map<String, Any?> {\n+      return emptyMap()\n+    }\n+\n+    open fun marshaller(): InputFieldMarshaller {\n+      return InputFieldMarshaller { }\n+    }\n+\n+    /**\n+     * Serializes variables as JSON string to be sent to the GraphQL server.\n+     */\n+    fun marshal(): String {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "265a7e5f75d7a4141fee77730b74be242798d518"}, "originalPosition": 101}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a09ca7ba919031afdeb28a9b8fc1c393bab25ad", "author": {"user": {"login": "sav007", "name": "Ivan Savytskyi"}}, "url": "https://github.com/apollographql/apollo-android/commit/3a09ca7ba919031afdeb28a9b8fc1c393bab25ad", "committedDate": "2020-03-01T17:02:11Z", "message": "Feedback"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "53e2d47ea46771f3927d981d768e14e43f0c8a8a", "author": {"user": {"login": "sav007", "name": "Ivan Savytskyi"}}, "url": "https://github.com/apollographql/apollo-android/commit/53e2d47ea46771f3927d981d768e14e43f0c8a8a", "committedDate": "2020-03-01T17:00:45Z", "message": "Feedback"}, "afterCommit": {"oid": "3a09ca7ba919031afdeb28a9b8fc1c393bab25ad", "author": {"user": {"login": "sav007", "name": "Ivan Savytskyi"}}, "url": "https://github.com/apollographql/apollo-android/commit/3a09ca7ba919031afdeb28a9b8fc1c393bab25ad", "committedDate": "2020-03-01T17:02:11Z", "message": "Feedback"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "98742d62a99e8b46a5944072c0af9f24f62cd067", "author": {"user": {"login": "sav007", "name": "Ivan Savytskyi"}}, "url": "https://github.com/apollographql/apollo-android/commit/98742d62a99e8b46a5944072c0af9f24f62cd067", "committedDate": "2020-03-01T17:24:18Z", "message": "Fix build"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "795bf13ae1b022e927300e5c0811f7529d3587b3", "author": {"user": {"login": "sav007", "name": "Ivan Savytskyi"}}, "url": "https://github.com/apollographql/apollo-android/commit/795bf13ae1b022e927300e5c0811f7529d3587b3", "committedDate": "2020-03-01T17:46:14Z", "message": "Add equals / hashcode implementations"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2ODkwODY2", "url": "https://github.com/apollographql/apollo-android/pull/2021#pullrequestreview-366890866", "createdAt": "2020-03-01T22:13:10Z", "commit": {"oid": "795bf13ae1b022e927300e5c0811f7529d3587b3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4048, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}