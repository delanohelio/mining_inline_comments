{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM0NDQ2NDA2", "number": 2363, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMDo0NDowNVrOEFfAyQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMDo0NDowNVrOEFfAyQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0MTg2NDQxOnYy", "diffSide": "RIGHT", "path": "apollo-runtime/src/main/java/com/apollographql/apollo/internal/interceptor/ApolloCacheInterceptor.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMDo0NDowNVrOGjs2aw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMTowODoyMFrOGjtkeA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDA4ODE3MQ==", "bodyText": "Nit: maybe merge this condition with the one above? A second if isn't really required here.", "url": "https://github.com/apollographql/apollo-android/pull/2363#discussion_r440088171", "createdAt": "2020-06-15T10:44:05Z", "author": {"login": "martinbonnin"}, "path": "apollo-runtime/src/main/java/com/apollographql/apollo/internal/interceptor/ApolloCacheInterceptor.java", "diffHunk": "@@ -124,7 +125,9 @@ InterceptorResponse resolveFromCache(InterceptorRequest request) throws ApolloEx\n   Set<String> cacheResponse(final InterceptorResponse networkResponse,\n       final InterceptorRequest request) {\n     if (networkResponse.parsedResponse.isPresent() && networkResponse.parsedResponse.get().hasErrors()) {\n-      return Collections.emptySet();\n+      if (!request.cacheHeaders.hasHeader(ApolloCacheHeaders.STORE_PARTIAL_RESPONSES)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c992f9dc9ec6f57ee13c1255aeae46e1a1ed4c8d"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDA5MDQ0NA==", "bodyText": "Done. I hope formatting is fine, IntelliJ doesn't seem to format the file for me at all \ud83d\ude15", "url": "https://github.com/apollographql/apollo-android/pull/2363#discussion_r440090444", "createdAt": "2020-06-15T10:48:48Z", "author": {"login": "lwasyl"}, "path": "apollo-runtime/src/main/java/com/apollographql/apollo/internal/interceptor/ApolloCacheInterceptor.java", "diffHunk": "@@ -124,7 +125,9 @@ InterceptorResponse resolveFromCache(InterceptorRequest request) throws ApolloEx\n   Set<String> cacheResponse(final InterceptorResponse networkResponse,\n       final InterceptorRequest request) {\n     if (networkResponse.parsedResponse.isPresent() && networkResponse.parsedResponse.get().hasErrors()) {\n-      return Collections.emptySet();\n+      if (!request.cacheHeaders.hasHeader(ApolloCacheHeaders.STORE_PARTIAL_RESPONSES)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDA4ODE3MQ=="}, "originalCommit": {"oid": "c992f9dc9ec6f57ee13c1255aeae46e1a1ed4c8d"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDA5NjY1Nw==", "bodyText": "Looks good, thanks!", "url": "https://github.com/apollographql/apollo-android/pull/2363#discussion_r440096657", "createdAt": "2020-06-15T11:01:29Z", "author": {"login": "martinbonnin"}, "path": "apollo-runtime/src/main/java/com/apollographql/apollo/internal/interceptor/ApolloCacheInterceptor.java", "diffHunk": "@@ -124,7 +125,9 @@ InterceptorResponse resolveFromCache(InterceptorRequest request) throws ApolloEx\n   Set<String> cacheResponse(final InterceptorResponse networkResponse,\n       final InterceptorRequest request) {\n     if (networkResponse.parsedResponse.isPresent() && networkResponse.parsedResponse.get().hasErrors()) {\n-      return Collections.emptySet();\n+      if (!request.cacheHeaders.hasHeader(ApolloCacheHeaders.STORE_PARTIAL_RESPONSES)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDA4ODE3MQ=="}, "originalCommit": {"oid": "c992f9dc9ec6f57ee13c1255aeae46e1a1ed4c8d"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDA5OTk2MA==", "bodyText": "Damn, checkstyle is now complaining with: '&&' should be on a new line.. Can you move that &&?", "url": "https://github.com/apollographql/apollo-android/pull/2363#discussion_r440099960", "createdAt": "2020-06-15T11:08:20Z", "author": {"login": "martinbonnin"}, "path": "apollo-runtime/src/main/java/com/apollographql/apollo/internal/interceptor/ApolloCacheInterceptor.java", "diffHunk": "@@ -124,7 +125,9 @@ InterceptorResponse resolveFromCache(InterceptorRequest request) throws ApolloEx\n   Set<String> cacheResponse(final InterceptorResponse networkResponse,\n       final InterceptorRequest request) {\n     if (networkResponse.parsedResponse.isPresent() && networkResponse.parsedResponse.get().hasErrors()) {\n-      return Collections.emptySet();\n+      if (!request.cacheHeaders.hasHeader(ApolloCacheHeaders.STORE_PARTIAL_RESPONSES)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDA4ODE3MQ=="}, "originalCommit": {"oid": "c992f9dc9ec6f57ee13c1255aeae46e1a1ed4c8d"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3122, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}