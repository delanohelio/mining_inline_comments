{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ0NTU0ODE2", "number": 2816, "title": "Remove fragment flattening", "bodyText": "Remove flattening and keep nested fragments.", "createdAt": "2020-12-23T04:00:53Z", "url": "https://github.com/apollographql/apollo-android/pull/2816", "merged": true, "mergeCommit": {"oid": "8cac4da03b0a92547158a6f0656e877473dd4f24"}, "closed": true, "closedAt": "2020-12-30T05:54:34Z", "author": {"login": "sav007"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdo3A5jAH2gAyNTQ0NTU0ODE2OjM2NGFjOTg3NjExMmZhOTkxZjQwZTk3NTU2MGIzNWEyODY4NjY4MWU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdq9lglAFqTU1OTYxNDYxNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "364ac9876112fa991f40e975560b35a28686681e", "author": {"user": {"login": "sav007", "name": "Ivan Savytskyi"}}, "url": "https://github.com/apollographql/apollo-android/commit/364ac9876112fa991f40e975560b35a28686681e", "committedDate": "2020-12-23T03:59:58Z", "message": "Remove fragment flattening\n\nRemove flattening and keep nested fragments."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU3ODU0MTYz", "url": "https://github.com/apollographql/apollo-android/pull/2816#pullrequestreview-557854163", "createdAt": "2020-12-23T13:01:48Z", "commit": {"oid": "364ac9876112fa991f40e975560b35a28686681e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QxMzowMTo0OFrOIKkGCQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QxMzowMTo0OFrOIKkGCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Nzk0ODA0MQ==", "bodyText": "Shouldn't we put the marshaller() on the class rather than the interface?", "url": "https://github.com/apollographql/apollo-android/pull/2816#discussion_r547948041", "createdAt": "2020-12-23T13:01:48Z", "author": {"login": "martinbonnin"}, "path": "apollo-compiler/src/test/graphql/com/example/fragment_used_twice/TestQuery.kt", "diffHunk": "@@ -141,43 +152,154 @@ class TestQuery : Query<TestQuery.Data, Operation.Variables> {\n         override val name: String\n \n         override fun marshaller(): ResponseFieldMarshaller\n+\n+        interface Character : Human, HumanDetail.Character {\n+          override val __typename: String\n+\n+          /**\n+           * What this human calls themselves\n+           */\n+          override val name: String\n+\n+          /**\n+           * The date character was born.\n+           */\n+          override val birthDate: Any\n+\n+          override fun marshaller(): ResponseFieldMarshaller", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "364ac9876112fa991f40e975560b35a28686681e"}, "originalPosition": 56}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU3ODYwNjM4", "url": "https://github.com/apollographql/apollo-android/pull/2816#pullrequestreview-557860638", "createdAt": "2020-12-23T13:15:16Z", "commit": {"oid": "364ac9876112fa991f40e975560b35a28686681e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QxMzoxNToxN1rOIKkaSA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QxMzoxNToxN1rOIKkaSA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Nzk1MzIyNA==", "bodyText": "What about dropping the Characterinheritance ( and __typename and name fields here) to just keep:\ninterface Droid {\n  val primaryFunction: String?\n}\n\nThat would simplify the codegen a bunch. There's a minor annoyance that users won't be able to do hero.asDroid()?.name anymore but they can still achieve the same results with something like\nwhen (hero) {\n  is DroidHero -> // do something with hero.name and hero.primaryFunction\n}\n\nIt might actually simplify the mental model since inline fragments would be closer to named fragments", "url": "https://github.com/apollographql/apollo-android/pull/2816#discussion_r547953224", "createdAt": "2020-12-23T13:15:17Z", "author": {"login": "martinbonnin"}, "path": "apollo-compiler/src/test/graphql/com/example/inline_fragment_inside_inline_fragment/TestQuery.kt", "diffHunk": "@@ -122,64 +122,139 @@ class TestQuery : Query<TestQuery.Data, Operation.Variables> {\n         val name: String\n \n         override fun marshaller(): ResponseFieldMarshaller\n-      }\n \n-      interface Human : Search {\n-        override val __typename: String\n+        interface Human : Character {\n+          override val __typename: String\n \n-        /**\n-         * The home planet of the human, or null if unknown\n-         */\n-        val homePlanet: String?\n+          /**\n+           * The name of the character\n+           */\n+          override val name: String\n \n-        override fun marshaller(): ResponseFieldMarshaller\n+          /**\n+           * The home planet of the human, or null if unknown\n+           */\n+          val homePlanet: String?\n+\n+          override fun marshaller(): ResponseFieldMarshaller\n+        }\n+\n+        interface Droid : Character {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "364ac9876112fa991f40e975560b35a28686681e"}, "originalPosition": 29}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5262e1764998db533afd6f9b6ca7b2dad9d4cf79", "author": {"user": {"login": "sav007", "name": "Ivan Savytskyi"}}, "url": "https://github.com/apollographql/apollo-android/commit/5262e1764998db533afd6f9b6ca7b2dad9d4cf79", "committedDate": "2020-12-23T18:34:51Z", "message": "Refactoring"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a9a0e255843c73ea9a72c56550705c2526ed17c", "author": {"user": {"login": "sav007", "name": "Ivan Savytskyi"}}, "url": "https://github.com/apollographql/apollo-android/commit/2a9a0e255843c73ea9a72c56550705c2526ed17c", "committedDate": "2020-12-26T19:24:00Z", "message": "Fix codegen"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5NjE0NjE3", "url": "https://github.com/apollographql/apollo-android/pull/2816#pullrequestreview-559614617", "createdAt": "2020-12-29T16:47:14Z", "commit": {"oid": "2a9a0e255843c73ea9a72c56550705c2526ed17c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4122, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}