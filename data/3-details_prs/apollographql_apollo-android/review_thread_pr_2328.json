{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI2Njk2MTMw", "number": 2328, "reviewThreads": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxNToyMzoxMFrOECM_rA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxODozNzo1OFrOEDD0Gg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwNzQ1NTE2OnYy", "diffSide": "RIGHT", "path": "docs/source/tutorial/02-add-the-graphql-schema.mdx", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxNToyMzoxMFrOGehA7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxODoxMDo0MFrOGf4dsA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDY1MTM3Mg==", "bodyText": "with your recent PR I guess this should be changed?", "url": "https://github.com/apollographql/apollo-android/pull/2328#discussion_r434651372", "createdAt": "2020-06-03T15:23:10Z", "author": {"login": "sav007"}, "path": "docs/source/tutorial/02-add-the-graphql-schema.mdx", "diffHunk": "@@ -0,0 +1,29 @@\n+---\n+title: \"2. Add the GraphQL schema\"\n+---\n+\n+This tutorial uses a modified version of the GraphQL server you build as part of [the Apollo full-stack tutorial](https://www.apollographql.com/docs/tutorial/introduction/). You can visit [`https://apollo-fullstack-tutorial.herokuapp.com/`](https://apollo-fullstack-tutorial.herokuapp.com/) to start it up and open the GraphiQL tool to explore its schema.\n+\n+<img src=\"images/graphiql.png\" alt=\"The GraphiQL query explorer\" class=\"screenshot\"/>\n+\n+The [schema](https://graphql.org/learn/schema/) defines which GraphQL operations your server can execute. Click **Docs** on the right-hand side to view a list of types you can query (and the types of fields on those types) along with any possible mutations or subscriptions.\n+\n+<img src=\"images/graphiql_show_schema.png\" alt=\"GraphiQL showing the schema\" class=\"screenshot\">\n+</img>\n+\n+## Download your server's schema\n+\n+Apollo Android requires a schema to generate typesafe models and code from your queries. There are multiple ways to get a schema. For an exemple, you can download a json schema directly from GraphiQL by clicking **Schema > Download** in the right pane.\n+\n+In this tutorial, we will use the `apolloDownloadSchema` task that is created by the plugin automatically. Since GraphQL supports [introspection](https://graphql.org/learn/introspection/), this will work with any GraphQL endpoint.\n+\n+From the root of the project, type:\n+\n+```shell:title=(shell)\n+mkdir -p app/src/main/graphql/com/example/rocketreserver/\n+./gradlew :app:downloadApolloSchema -Pcom.apollographql.apollo.endpoint='https://apollo-fullstack-tutorial.herokuapp.com/' -Pcom.apollographql.apollo.schema='src/main/graphql/com/example/rocketreserver/schema.json'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "51715b81805bbaad348334a98413fbf365cc2823"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDY1OTc2Mg==", "bodyText": "Yes. I'm still struggling to keep the doc in sync with the releases though so that most likely won't happen until 2.1.1", "url": "https://github.com/apollographql/apollo-android/pull/2328#discussion_r434659762", "createdAt": "2020-06-03T15:34:24Z", "author": {"login": "martinbonnin"}, "path": "docs/source/tutorial/02-add-the-graphql-schema.mdx", "diffHunk": "@@ -0,0 +1,29 @@\n+---\n+title: \"2. Add the GraphQL schema\"\n+---\n+\n+This tutorial uses a modified version of the GraphQL server you build as part of [the Apollo full-stack tutorial](https://www.apollographql.com/docs/tutorial/introduction/). You can visit [`https://apollo-fullstack-tutorial.herokuapp.com/`](https://apollo-fullstack-tutorial.herokuapp.com/) to start it up and open the GraphiQL tool to explore its schema.\n+\n+<img src=\"images/graphiql.png\" alt=\"The GraphiQL query explorer\" class=\"screenshot\"/>\n+\n+The [schema](https://graphql.org/learn/schema/) defines which GraphQL operations your server can execute. Click **Docs** on the right-hand side to view a list of types you can query (and the types of fields on those types) along with any possible mutations or subscriptions.\n+\n+<img src=\"images/graphiql_show_schema.png\" alt=\"GraphiQL showing the schema\" class=\"screenshot\">\n+</img>\n+\n+## Download your server's schema\n+\n+Apollo Android requires a schema to generate typesafe models and code from your queries. There are multiple ways to get a schema. For an exemple, you can download a json schema directly from GraphiQL by clicking **Schema > Download** in the right pane.\n+\n+In this tutorial, we will use the `apolloDownloadSchema` task that is created by the plugin automatically. Since GraphQL supports [introspection](https://graphql.org/learn/introspection/), this will work with any GraphQL endpoint.\n+\n+From the root of the project, type:\n+\n+```shell:title=(shell)\n+mkdir -p app/src/main/graphql/com/example/rocketreserver/\n+./gradlew :app:downloadApolloSchema -Pcom.apollographql.apollo.endpoint='https://apollo-fullstack-tutorial.herokuapp.com/' -Pcom.apollographql.apollo.schema='src/main/graphql/com/example/rocketreserver/schema.json'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDY1MTM3Mg=="}, "originalCommit": {"oid": "51715b81805bbaad348334a98413fbf365cc2823"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjA4NDE0NA==", "bodyText": "Out of scope: Btw, would it be possible take the schema.json location from the configuration if schemaFile property is set?", "url": "https://github.com/apollographql/apollo-android/pull/2328#discussion_r436084144", "createdAt": "2020-06-05T18:10:40Z", "author": {"login": "tasomaniac"}, "path": "docs/source/tutorial/02-add-the-graphql-schema.mdx", "diffHunk": "@@ -0,0 +1,29 @@\n+---\n+title: \"2. Add the GraphQL schema\"\n+---\n+\n+This tutorial uses a modified version of the GraphQL server you build as part of [the Apollo full-stack tutorial](https://www.apollographql.com/docs/tutorial/introduction/). You can visit [`https://apollo-fullstack-tutorial.herokuapp.com/`](https://apollo-fullstack-tutorial.herokuapp.com/) to start it up and open the GraphiQL tool to explore its schema.\n+\n+<img src=\"images/graphiql.png\" alt=\"The GraphiQL query explorer\" class=\"screenshot\"/>\n+\n+The [schema](https://graphql.org/learn/schema/) defines which GraphQL operations your server can execute. Click **Docs** on the right-hand side to view a list of types you can query (and the types of fields on those types) along with any possible mutations or subscriptions.\n+\n+<img src=\"images/graphiql_show_schema.png\" alt=\"GraphiQL showing the schema\" class=\"screenshot\">\n+</img>\n+\n+## Download your server's schema\n+\n+Apollo Android requires a schema to generate typesafe models and code from your queries. There are multiple ways to get a schema. For an exemple, you can download a json schema directly from GraphiQL by clicking **Schema > Download** in the right pane.\n+\n+In this tutorial, we will use the `apolloDownloadSchema` task that is created by the plugin automatically. Since GraphQL supports [introspection](https://graphql.org/learn/introspection/), this will work with any GraphQL endpoint.\n+\n+From the root of the project, type:\n+\n+```shell:title=(shell)\n+mkdir -p app/src/main/graphql/com/example/rocketreserver/\n+./gradlew :app:downloadApolloSchema -Pcom.apollographql.apollo.endpoint='https://apollo-fullstack-tutorial.herokuapp.com/' -Pcom.apollographql.apollo.schema='src/main/graphql/com/example/rocketreserver/schema.json'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDY1MTM3Mg=="}, "originalCommit": {"oid": "51715b81805bbaad348334a98413fbf365cc2823"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwNzQ2OTQ0OnYy", "diffSide": "RIGHT", "path": "docs/source/tutorial/04-execute-the-query.mdx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxNToyNjoxM1rOGehJ2w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxNToyNjoxM1rOGehJ2w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDY1MzY1OQ==", "bodyText": "maybe to mention that we recommend to do so, similar to\n\nOkHttp performs best when you create a single OkHttpClient instance and reuse it for all of your HTTP calls. This is because each client holds its own connection pool and thread pools. Reusing connections and threads reduces latency and saves memory. Conversely, creating a client for each request wastes resources on idle pools.", "url": "https://github.com/apollographql/apollo-android/pull/2328#discussion_r434653659", "createdAt": "2020-06-03T15:26:13Z", "author": {"login": "sav007"}, "path": "docs/source/tutorial/04-execute-the-query.mdx", "diffHunk": "@@ -0,0 +1,53 @@\n+---\n+title: \"4. Execute the query\"\n+---\n+\n+To execute the query, you will need to create an `ApolloClient` and make a new call with your query.\n+\n+## Create an ApolloClient\n+\n+Create a new file named Apollo.kt in the `com.example.rocketreserver` package and add the ApolloClient:\n+\n+```kotlin:title=app/src/main/java/com/example/rocketreserver/Apollo.kt\n+val apolloClient = ApolloClient.builder()\n+    .serverUrl(\"https://apollo-fullstack-tutorial.herokuapp.com\")\n+    .build()\n+```\n+\n+`apolloClient` is a top-level variable so that it can be reused from other parts of the app later on.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "51715b81805bbaad348334a98413fbf365cc2823"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwNzQ4Mjk3OnYy", "diffSide": "RIGHT", "path": "docs/source/tutorial/05-connect-queries-to-your-ui.mdx", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxNToyODo1NlrOGehSPg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNToxNzo1NVrOGfLCBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDY1NTgwNg==", "bodyText": "should we cover the errors? To explain that user should check for response.errors?", "url": "https://github.com/apollographql/apollo-android/pull/2328#discussion_r434655806", "createdAt": "2020-06-03T15:28:56Z", "author": {"login": "sav007"}, "path": "docs/source/tutorial/05-connect-queries-to-your-ui.mdx", "diffHunk": "@@ -0,0 +1,61 @@\n+---\n+title: \"5. Connect your queries to your UI\"\n+---\n+\n+In this chapter, you are going to display a list of Launch Sites in a [RecyclerView](https://developer.android.com/guide/topics/ui/layout/recyclerview).\n+\n+## Configure LaunchListAdapter\n+\n+Open `LaunchListAdapter` and add a `launches` property:\n+\n+```kotlin:title=app/src/main/java/com/example/rocketreserver/LaunchListAdapter.kt\n+class LaunchListAdapter(val launches: List<LaunchListQuery.Launch>) :\n+    RecyclerView.Adapter<LaunchListAdapter.ViewHolder>() {\n+```\n+\n+`LaunchListQuery.Launch` is a typesafe generated model from your LaunchList.graphql query.\n+\n+## Bind the data to the UI\n+\n+Use the `launches` property to bind items to your adapter:\n+\n+```kotlin:title=app/src/main/java/com/example/rocketreserver/LaunchListAdapter.kt\n+    override fun getItemCount(): Int {\n+        return launches.size\n+    }\n+\n+    override fun onBindViewHolder(holder: ViewHolder, position: Int) {\n+        val launch = launches.get(position)\n+        holder.binding.site.text = launch.site ?: \"\"\n+    }\n+```\n+\n+## Pass the LaunchListAdapter to the RecyclerView\n+\n+Create a new Adapter and pass it to your recycler view:\n+\n+```kotlin:title=app/src/main/java/com/example/rocketreserver/LaunchListFragment.kt\n+        lifecycleScope.launchWhenResumed {\n+            val response = try {\n+                apolloClient.query(LaunchListQuery()).toDeferred().await()\n+            } catch (e: ApolloException) {\n+                Log.d(\"LaunchList\", \"Failure\", e)\n+                null\n+            }\n+\n+            val launches = response?.data?.launches?.launches?.filterNotNull()\n+            if (launches != null && !response.hasErrors()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "51715b81805bbaad348334a98413fbf365cc2823"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDY2MDQ1MA==", "bodyText": "That'd be great, I'll see if I can trigger some meaningful error", "url": "https://github.com/apollographql/apollo-android/pull/2328#discussion_r434660450", "createdAt": "2020-06-03T15:35:22Z", "author": {"login": "martinbonnin"}, "path": "docs/source/tutorial/05-connect-queries-to-your-ui.mdx", "diffHunk": "@@ -0,0 +1,61 @@\n+---\n+title: \"5. Connect your queries to your UI\"\n+---\n+\n+In this chapter, you are going to display a list of Launch Sites in a [RecyclerView](https://developer.android.com/guide/topics/ui/layout/recyclerview).\n+\n+## Configure LaunchListAdapter\n+\n+Open `LaunchListAdapter` and add a `launches` property:\n+\n+```kotlin:title=app/src/main/java/com/example/rocketreserver/LaunchListAdapter.kt\n+class LaunchListAdapter(val launches: List<LaunchListQuery.Launch>) :\n+    RecyclerView.Adapter<LaunchListAdapter.ViewHolder>() {\n+```\n+\n+`LaunchListQuery.Launch` is a typesafe generated model from your LaunchList.graphql query.\n+\n+## Bind the data to the UI\n+\n+Use the `launches` property to bind items to your adapter:\n+\n+```kotlin:title=app/src/main/java/com/example/rocketreserver/LaunchListAdapter.kt\n+    override fun getItemCount(): Int {\n+        return launches.size\n+    }\n+\n+    override fun onBindViewHolder(holder: ViewHolder, position: Int) {\n+        val launch = launches.get(position)\n+        holder.binding.site.text = launch.site ?: \"\"\n+    }\n+```\n+\n+## Pass the LaunchListAdapter to the RecyclerView\n+\n+Create a new Adapter and pass it to your recycler view:\n+\n+```kotlin:title=app/src/main/java/com/example/rocketreserver/LaunchListFragment.kt\n+        lifecycleScope.launchWhenResumed {\n+            val response = try {\n+                apolloClient.query(LaunchListQuery()).toDeferred().await()\n+            } catch (e: ApolloException) {\n+                Log.d(\"LaunchList\", \"Failure\", e)\n+                null\n+            }\n+\n+            val launches = response?.data?.launches?.launches?.filterNotNull()\n+            if (launches != null && !response.hasErrors()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDY1NTgwNg=="}, "originalCommit": {"oid": "51715b81805bbaad348334a98413fbf365cc2823"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTMzOTc4Mw==", "bodyText": "I added error handling to the details view, it's easy to trigger errors there by passing wrong ids:\nSee https://jolly-kowalevski-0304f0.netlify.app/docs/android/tutorial/08-add-a-details-view/#handle-protocol-errors for a preview", "url": "https://github.com/apollographql/apollo-android/pull/2328#discussion_r435339783", "createdAt": "2020-06-04T15:17:55Z", "author": {"login": "martinbonnin"}, "path": "docs/source/tutorial/05-connect-queries-to-your-ui.mdx", "diffHunk": "@@ -0,0 +1,61 @@\n+---\n+title: \"5. Connect your queries to your UI\"\n+---\n+\n+In this chapter, you are going to display a list of Launch Sites in a [RecyclerView](https://developer.android.com/guide/topics/ui/layout/recyclerview).\n+\n+## Configure LaunchListAdapter\n+\n+Open `LaunchListAdapter` and add a `launches` property:\n+\n+```kotlin:title=app/src/main/java/com/example/rocketreserver/LaunchListAdapter.kt\n+class LaunchListAdapter(val launches: List<LaunchListQuery.Launch>) :\n+    RecyclerView.Adapter<LaunchListAdapter.ViewHolder>() {\n+```\n+\n+`LaunchListQuery.Launch` is a typesafe generated model from your LaunchList.graphql query.\n+\n+## Bind the data to the UI\n+\n+Use the `launches` property to bind items to your adapter:\n+\n+```kotlin:title=app/src/main/java/com/example/rocketreserver/LaunchListAdapter.kt\n+    override fun getItemCount(): Int {\n+        return launches.size\n+    }\n+\n+    override fun onBindViewHolder(holder: ViewHolder, position: Int) {\n+        val launch = launches.get(position)\n+        holder.binding.site.text = launch.site ?: \"\"\n+    }\n+```\n+\n+## Pass the LaunchListAdapter to the RecyclerView\n+\n+Create a new Adapter and pass it to your recycler view:\n+\n+```kotlin:title=app/src/main/java/com/example/rocketreserver/LaunchListFragment.kt\n+        lifecycleScope.launchWhenResumed {\n+            val response = try {\n+                apolloClient.query(LaunchListQuery()).toDeferred().await()\n+            } catch (e: ApolloException) {\n+                Log.d(\"LaunchList\", \"Failure\", e)\n+                null\n+            }\n+\n+            val launches = response?.data?.launches?.launches?.filterNotNull()\n+            if (launches != null && !response.hasErrors()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDY1NTgwNg=="}, "originalCommit": {"oid": "51715b81805bbaad348334a98413fbf365cc2823"}, "originalPosition": 47}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxNjMxMDQ4OnYy", "diffSide": "RIGHT", "path": "docs/source/tutorial/00-introduction.mdx", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxODowMToxOFrOGf4Iew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxOToxNjoxNVrOGf6bmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjA3ODcxNQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Write queries, mutations and generate the corresponding Kotlin models.\n          \n          \n            \n            * Write queries, mutations to generate the corresponding Kotlin models.", "url": "https://github.com/apollographql/apollo-android/pull/2328#discussion_r436078715", "createdAt": "2020-06-05T18:01:18Z", "author": {"login": "tasomaniac"}, "path": "docs/source/tutorial/00-introduction.mdx", "diffHunk": "@@ -0,0 +1,34 @@\n+---\n+title: \"0. Introduction\"\n+---\n+\n+Welcome! This tutorial demonstrates adding the Apollo Android SDK to an app to communicate with a GraphQL server. In this tutorial you will learn how to:\n+\n+* Download as schema.\n+* Write queries, mutations and generate the corresponding Kotlin models.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46ef40563f995f4f797986485a095c69b10b08f0"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjEwNjU5NQ==", "bodyText": "^ minor disagreement on English structure here - probably a better change if you want it is Write queries and mutations to generate the corresponding Kotlin models.", "url": "https://github.com/apollographql/apollo-android/pull/2328#discussion_r436106595", "createdAt": "2020-06-05T18:54:04Z", "author": {"login": "designatednerd"}, "path": "docs/source/tutorial/00-introduction.mdx", "diffHunk": "@@ -0,0 +1,34 @@\n+---\n+title: \"0. Introduction\"\n+---\n+\n+Welcome! This tutorial demonstrates adding the Apollo Android SDK to an app to communicate with a GraphQL server. In this tutorial you will learn how to:\n+\n+* Download as schema.\n+* Write queries, mutations and generate the corresponding Kotlin models.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjA3ODcxNQ=="}, "originalCommit": {"oid": "46ef40563f995f4f797986485a095c69b10b08f0"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjExNjM3Ng==", "bodyText": "Agreed. That's better", "url": "https://github.com/apollographql/apollo-android/pull/2328#discussion_r436116376", "createdAt": "2020-06-05T19:16:15Z", "author": {"login": "tasomaniac"}, "path": "docs/source/tutorial/00-introduction.mdx", "diffHunk": "@@ -0,0 +1,34 @@\n+---\n+title: \"0. Introduction\"\n+---\n+\n+Welcome! This tutorial demonstrates adding the Apollo Android SDK to an app to communicate with a GraphQL server. In this tutorial you will learn how to:\n+\n+* Download as schema.\n+* Write queries, mutations and generate the corresponding Kotlin models.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjA3ODcxNQ=="}, "originalCommit": {"oid": "46ef40563f995f4f797986485a095c69b10b08f0"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxNjMxOTExOnYy", "diffSide": "RIGHT", "path": "docs/source/tutorial/01-configure-project.mdx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxODowNDoxN1rOGf4OBg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxODowNDoxN1rOGf4OBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjA4MDEzNA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Build and run the project, you should see an empty app. That's good !\n          \n          \n            \n            Build and run the project, you should see an empty app. That's good!", "url": "https://github.com/apollographql/apollo-android/pull/2328#discussion_r436080134", "createdAt": "2020-06-05T18:04:17Z", "author": {"login": "tasomaniac"}, "path": "docs/source/tutorial/01-configure-project.mdx", "diffHunk": "@@ -0,0 +1,98 @@\n+---\n+title: \"1. Configure your project\"\n+---\n+\n+In this step, you will import the starter project and add the Apollo Android SDK to it.\n+\n+## Clone the starter project\n+\n+```\n+git clone https://github.com/apollographql/apollo-android-tutorial\n+cd apollo-android-tutorial\n+git checkout initial\n+```\n+\n+At any time, if you want to check the finished result, you can checkout the `master` branch that contains all the code to book your seat.\n+\n+## Open the project in Android Studio\n+\n+Android Studio will take some time to index the contents of the project. Take some time to look around. You should see 3 Fragments:\n+\n+* `LaunchListFragment` is the first fragment. You will display a list of launches there.\n+* `LaunchDetailsFragment` will display details about a launch and give you the opportunity to book a seat.\n+* `LoginFragment` will allow you to log in before booking the seat.\n+\n+Build and run the project, you should see an empty app. That's good !", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46ef40563f995f4f797986485a095c69b10b08f0"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxNjMyMjU5OnYy", "diffSide": "RIGHT", "path": "docs/source/tutorial/01-configure-project.mdx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxODowNTozMlrOGf4QYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxODowNTozMlrOGf4QYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjA4MDczNw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    classpath(\"com.android.tools.build:gradle:3.6.3\")\n          \n          \n            \n                    classpath(\"com.android.tools.build:gradle:4.0.0\")", "url": "https://github.com/apollographql/apollo-android/pull/2328#discussion_r436080737", "createdAt": "2020-06-05T18:05:32Z", "author": {"login": "tasomaniac"}, "path": "docs/source/tutorial/01-configure-project.mdx", "diffHunk": "@@ -0,0 +1,98 @@\n+---\n+title: \"1. Configure your project\"\n+---\n+\n+In this step, you will import the starter project and add the Apollo Android SDK to it.\n+\n+## Clone the starter project\n+\n+```\n+git clone https://github.com/apollographql/apollo-android-tutorial\n+cd apollo-android-tutorial\n+git checkout initial\n+```\n+\n+At any time, if you want to check the finished result, you can checkout the `master` branch that contains all the code to book your seat.\n+\n+## Open the project in Android Studio\n+\n+Android Studio will take some time to index the contents of the project. Take some time to look around. You should see 3 Fragments:\n+\n+* `LaunchListFragment` is the first fragment. You will display a list of launches there.\n+* `LaunchDetailsFragment` will display details about a launch and give you the opportunity to book a seat.\n+* `LoginFragment` will allow you to log in before booking the seat.\n+\n+Build and run the project, you should see an empty app. That's good !\n+\n+<img src=\"images/initial.png\" alt=\"The initial state of the project!\" class=\"screenshot\" width=\"300\"/>\n+\n+Now you will add Apollo Android to the project.\n+\n+## Get the latest version of Apollo Android\n+\n+You can find the latest version of Apollo Android from the [github releases page](https://github.com/apollographql/apollo-android/releases). It is also displayed at the top of the [apollo-android repo](https://github.com/apollographql/apollo-android/)\n+\n+This tutorial uses `2.1.0` because it is the latest version at the time of writing but feel free to use a more recent version if one is available when you're reading this.\n+\n+## Add the plugin to the buildscript\n+\n+Open the `build.gradle.kts` at the root of the project and add the Apollo Gradle plugin to the buildscript classpath:\n+\n+```kotlin:title=build.gradle.kts\n+buildscript {\n+    repositories {\n+        google()\n+        jcenter()\n+    }\n+\n+    dependencies {\n+        classpath(\"com.android.tools.build:gradle:3.6.3\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46ef40563f995f4f797986485a095c69b10b08f0"}, "originalPosition": 49}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxNjMyNTYxOnYy", "diffSide": "RIGHT", "path": "docs/source/tutorial/01-configure-project.mdx", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxODowNjoyNlrOGf4SOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wN1QwOTowNjozNVrOGgIMGQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjA4MTIwOA==", "bodyText": "Hmm \ud83e\udd14 if we apply via plugin syntax, we actually do not have to define the classpath above, right?", "url": "https://github.com/apollographql/apollo-android/pull/2328#discussion_r436081208", "createdAt": "2020-06-05T18:06:26Z", "author": {"login": "tasomaniac"}, "path": "docs/source/tutorial/01-configure-project.mdx", "diffHunk": "@@ -0,0 +1,98 @@\n+---\n+title: \"1. Configure your project\"\n+---\n+\n+In this step, you will import the starter project and add the Apollo Android SDK to it.\n+\n+## Clone the starter project\n+\n+```\n+git clone https://github.com/apollographql/apollo-android-tutorial\n+cd apollo-android-tutorial\n+git checkout initial\n+```\n+\n+At any time, if you want to check the finished result, you can checkout the `master` branch that contains all the code to book your seat.\n+\n+## Open the project in Android Studio\n+\n+Android Studio will take some time to index the contents of the project. Take some time to look around. You should see 3 Fragments:\n+\n+* `LaunchListFragment` is the first fragment. You will display a list of launches there.\n+* `LaunchDetailsFragment` will display details about a launch and give you the opportunity to book a seat.\n+* `LoginFragment` will allow you to log in before booking the seat.\n+\n+Build and run the project, you should see an empty app. That's good !\n+\n+<img src=\"images/initial.png\" alt=\"The initial state of the project!\" class=\"screenshot\" width=\"300\"/>\n+\n+Now you will add Apollo Android to the project.\n+\n+## Get the latest version of Apollo Android\n+\n+You can find the latest version of Apollo Android from the [github releases page](https://github.com/apollographql/apollo-android/releases). It is also displayed at the top of the [apollo-android repo](https://github.com/apollographql/apollo-android/)\n+\n+This tutorial uses `2.1.0` because it is the latest version at the time of writing but feel free to use a more recent version if one is available when you're reading this.\n+\n+## Add the plugin to the buildscript\n+\n+Open the `build.gradle.kts` at the root of the project and add the Apollo Gradle plugin to the buildscript classpath:\n+\n+```kotlin:title=build.gradle.kts\n+buildscript {\n+    repositories {\n+        google()\n+        jcenter()\n+    }\n+\n+    dependencies {\n+        classpath(\"com.android.tools.build:gradle:3.6.3\")\n+        // ...\n+        classpath(\"com.apollographql.apollo:apollo-gradle-plugin:2.1.0\")\n+    }\n+}\n+```\n+\n+## Apply the plugin\n+\n+Apply the Apollo plugin in `app/build.gradle.kts`. There are two `build.gradle.kts` in the project. Make sure to use the one in the `app` directory this time. The Apollo plugin ID is `com.apollographql.apollo`.\n+\n+```kotlin:title=app/build.gradle.kts\n+plugins {\n+    id(\"com.android.application\")\n+    // ...\n+    id(\"com.apollographql.apollo\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46ef40563f995f4f797986485a095c69b10b08f0"}, "originalPosition": 64}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjM0MTc4NQ==", "bodyText": "Good catch, thanks \ud83d\udc4d", "url": "https://github.com/apollographql/apollo-android/pull/2328#discussion_r436341785", "createdAt": "2020-06-07T09:06:35Z", "author": {"login": "martinbonnin"}, "path": "docs/source/tutorial/01-configure-project.mdx", "diffHunk": "@@ -0,0 +1,98 @@\n+---\n+title: \"1. Configure your project\"\n+---\n+\n+In this step, you will import the starter project and add the Apollo Android SDK to it.\n+\n+## Clone the starter project\n+\n+```\n+git clone https://github.com/apollographql/apollo-android-tutorial\n+cd apollo-android-tutorial\n+git checkout initial\n+```\n+\n+At any time, if you want to check the finished result, you can checkout the `master` branch that contains all the code to book your seat.\n+\n+## Open the project in Android Studio\n+\n+Android Studio will take some time to index the contents of the project. Take some time to look around. You should see 3 Fragments:\n+\n+* `LaunchListFragment` is the first fragment. You will display a list of launches there.\n+* `LaunchDetailsFragment` will display details about a launch and give you the opportunity to book a seat.\n+* `LoginFragment` will allow you to log in before booking the seat.\n+\n+Build and run the project, you should see an empty app. That's good !\n+\n+<img src=\"images/initial.png\" alt=\"The initial state of the project!\" class=\"screenshot\" width=\"300\"/>\n+\n+Now you will add Apollo Android to the project.\n+\n+## Get the latest version of Apollo Android\n+\n+You can find the latest version of Apollo Android from the [github releases page](https://github.com/apollographql/apollo-android/releases). It is also displayed at the top of the [apollo-android repo](https://github.com/apollographql/apollo-android/)\n+\n+This tutorial uses `2.1.0` because it is the latest version at the time of writing but feel free to use a more recent version if one is available when you're reading this.\n+\n+## Add the plugin to the buildscript\n+\n+Open the `build.gradle.kts` at the root of the project and add the Apollo Gradle plugin to the buildscript classpath:\n+\n+```kotlin:title=build.gradle.kts\n+buildscript {\n+    repositories {\n+        google()\n+        jcenter()\n+    }\n+\n+    dependencies {\n+        classpath(\"com.android.tools.build:gradle:3.6.3\")\n+        // ...\n+        classpath(\"com.apollographql.apollo:apollo-gradle-plugin:2.1.0\")\n+    }\n+}\n+```\n+\n+## Apply the plugin\n+\n+Apply the Apollo plugin in `app/build.gradle.kts`. There are two `build.gradle.kts` in the project. Make sure to use the one in the `app` directory this time. The Apollo plugin ID is `com.apollographql.apollo`.\n+\n+```kotlin:title=app/build.gradle.kts\n+plugins {\n+    id(\"com.android.application\")\n+    // ...\n+    id(\"com.apollographql.apollo\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjA4MTIwOA=="}, "originalCommit": {"oid": "46ef40563f995f4f797986485a095c69b10b08f0"}, "originalPosition": 64}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxNjM3NDUzOnYy", "diffSide": "RIGHT", "path": "docs/source/tutorial/03-write-your-first-query.mdx", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxODoxNzoxOVrOGf4wog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQyMjoxNjozMVrOGgySzA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjA4ODk5NA==", "bodyText": "Applies to all pages, I was thinking we can put the last part into its own section like ### Next step. Not sure if it is necessary. Just an idea :)", "url": "https://github.com/apollographql/apollo-android/pull/2328#discussion_r436088994", "createdAt": "2020-06-05T18:17:19Z", "author": {"login": "tasomaniac"}, "path": "docs/source/tutorial/03-write-your-first-query.mdx", "diffHunk": "@@ -0,0 +1,108 @@\n+---\n+title: \"3. Write your first query\"\n+---\n+\n+The most common GraphQL operation is the **query**, which requests data from your graph in a structure that conforms to your server's schema. If you return to [the GraphiQL query explorer](https://apollo-fullstack-tutorial.herokuapp.com) for your server, you can see available queries in the Schema tab you opened earlier.\n+\n+## Prototype your query in GraphiQL\n+\n+Click on the `launches` query at the top for details about it.\n+\n+<img src=\"images/launches_detail.png\" class=\"screenshot\" alt=\"Detail about launches query\"/>\n+\n+In the right panel, you see both the query itself and information about what the query returns. You can use this information to write a query you will eventually add to your app.\n+\n+In the left pane, start typing an empty query:\n+\n+```graphql:title=(GraphiQL)\n+query LaunchList {\n+}\n+```\n+\n+Apollo Android requires every query to have a name (even though this isn't required by the GraphQL spec). The query above has the name `LaunchList`.\n+\n+Next, between the query's curly braces, start typing `la`. An autocomplete box pops up and shows you options based on what's in the schema:\n+\n+<img src=\"images/graphiql_autocomplete.png\" class=\"screenshot\" alt=\"Example of autocomplete\"/>\n+\n+GraphiQL is a great tool for building and verifying queries so you don't have to repeatedly rebuild your project in Android Studio to try out changes.\n+\n+As the schema indicates, the `launches` query returns a `LaunchConnection` object. This object includes a list of launches, along with fields related to pagination (`cursor` and `hasMore`). The query you write indicates exactly which fields of this `LaunchConnection` object you want to be returned, like so:\n+\n+```graphql:title=(GraphiQL)\n+query LaunchList {\n+  launches {\n+    cursor\n+    hasMore\n+  }\n+}\n+```\n+\n+If you run this query by pressing the play button in GraphiQL, the query returns results as a JSON object on the right-hand side of the page:\n+\n+<img src=\"images/completed_basic_query.png\" class=\"screenshot\" alt=\"Query JSON in GraphiQL\"/>\n+\n+This query executes successfully, but it doesn't include any information about the `launches`! That's because we didn't include the necessary field in our query.\n+\n+Update your query to fetch the `id` and `site` properties for each launch, like so:\n+\n+```graphql:title=(GraphiQL)\n+query LaunchList {\n+  launches {\n+    cursor\n+    hasMore\n+    launches {\n+      id\n+      site\n+    }\n+  }\n+}\n+```\n+\n+Run the query again, and you'll now see that in addition to the information you got back before, you're also getting a list of launches with their ID and site information:\n+\n+<img src=\"images/completed_id_query.png\" class=\"screenshot\" alt=\"Updated query JSON in GraphiQL\"/>\n+\n+## Add the query to your project\n+\n+Now that your query is fetching the right data, head back to Android Studio.\n+\n+1. Right click on the `src/main/graphql/com/example/rocketserver` folder. This folder should contain your `schema.json`. Select **New > File**:\n+\n+<img src=\"images/new_file.png\" class=\"screenshot\" alt=\"New GraphQL file\"/>\n+\n+2. Name the file `LaunchList.graphql`. Make sure it's saved at the same level as your `schema.json` file.\n+\n+3. Copy your final query from GraphiQL and paste it into `LaunchList.graphql`.\n+\n+```graphql:title=app/src/main/graphql/com/example/rocketreserver/LaunchList.graphql\n+query LaunchList {\n+  launches {\n+    cursor\n+    hasMore\n+    launches {\n+      id\n+      site\n+    }\n+  }\n+}\n+```\n+\n+## Generate the model\n+\n+Build your project to have the Apollo Android plugin generate your first model. The plugin defines a task named `generateApolloSources` to generate the models. You don't need to run it. It will be executed automatically when building your project.\n+\n+> **Note**: autocomplete won't work until you build your project. That is because autocomplete requires the generated code to work. Each time you change your queries, you should rebuild your project for Android Studio to pick up the modifications.\n+\n+## Examine generated code\n+\n+From the menu, select **Navigate > Class** and start typing `LaunchList`, Android Studio should suggest to open `LaunchList.kt`. The file should be in `build/generated/source/apollo/debug/service/com/example/rocketreserver/LaunchListQuery.kt`.\n+\n+The `LaunchListQuery.kt` file defines a root class, `LaunchListQuery`, with many nested classes. If you compare the classes to the JSON data returned in GraphiQL, you see that the structure matches. These classes include properties only for the fields that your query requests.\n+\n+Try commenting out the `id` property in `LaunchList.graphql`, saving, then building again. When the build completes, the innermost `Launch` now only includes the built-in `__typename` and the requested `site` property.\n+\n+Uncomment `id` and rebuild to restore the property.\n+\n+Now that you've generated code and had a chance to see what's in there, it's time to [execute the query](04-execute-the-query)!", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46ef40563f995f4f797986485a095c69b10b08f0"}, "originalPosition": 107}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjM0MjU4MA==", "bodyText": "I took that from the iOS tutorial. I kind of like that the sentence happens in the flow and doesn't require an additional step in the right menu. Having the \"next\" on the right would somehow duplicate the index on the left. No real strong feeling about it though, happy to change it if that can help following the tutorial.", "url": "https://github.com/apollographql/apollo-android/pull/2328#discussion_r436342580", "createdAt": "2020-06-07T09:16:06Z", "author": {"login": "martinbonnin"}, "path": "docs/source/tutorial/03-write-your-first-query.mdx", "diffHunk": "@@ -0,0 +1,108 @@\n+---\n+title: \"3. Write your first query\"\n+---\n+\n+The most common GraphQL operation is the **query**, which requests data from your graph in a structure that conforms to your server's schema. If you return to [the GraphiQL query explorer](https://apollo-fullstack-tutorial.herokuapp.com) for your server, you can see available queries in the Schema tab you opened earlier.\n+\n+## Prototype your query in GraphiQL\n+\n+Click on the `launches` query at the top for details about it.\n+\n+<img src=\"images/launches_detail.png\" class=\"screenshot\" alt=\"Detail about launches query\"/>\n+\n+In the right panel, you see both the query itself and information about what the query returns. You can use this information to write a query you will eventually add to your app.\n+\n+In the left pane, start typing an empty query:\n+\n+```graphql:title=(GraphiQL)\n+query LaunchList {\n+}\n+```\n+\n+Apollo Android requires every query to have a name (even though this isn't required by the GraphQL spec). The query above has the name `LaunchList`.\n+\n+Next, between the query's curly braces, start typing `la`. An autocomplete box pops up and shows you options based on what's in the schema:\n+\n+<img src=\"images/graphiql_autocomplete.png\" class=\"screenshot\" alt=\"Example of autocomplete\"/>\n+\n+GraphiQL is a great tool for building and verifying queries so you don't have to repeatedly rebuild your project in Android Studio to try out changes.\n+\n+As the schema indicates, the `launches` query returns a `LaunchConnection` object. This object includes a list of launches, along with fields related to pagination (`cursor` and `hasMore`). The query you write indicates exactly which fields of this `LaunchConnection` object you want to be returned, like so:\n+\n+```graphql:title=(GraphiQL)\n+query LaunchList {\n+  launches {\n+    cursor\n+    hasMore\n+  }\n+}\n+```\n+\n+If you run this query by pressing the play button in GraphiQL, the query returns results as a JSON object on the right-hand side of the page:\n+\n+<img src=\"images/completed_basic_query.png\" class=\"screenshot\" alt=\"Query JSON in GraphiQL\"/>\n+\n+This query executes successfully, but it doesn't include any information about the `launches`! That's because we didn't include the necessary field in our query.\n+\n+Update your query to fetch the `id` and `site` properties for each launch, like so:\n+\n+```graphql:title=(GraphiQL)\n+query LaunchList {\n+  launches {\n+    cursor\n+    hasMore\n+    launches {\n+      id\n+      site\n+    }\n+  }\n+}\n+```\n+\n+Run the query again, and you'll now see that in addition to the information you got back before, you're also getting a list of launches with their ID and site information:\n+\n+<img src=\"images/completed_id_query.png\" class=\"screenshot\" alt=\"Updated query JSON in GraphiQL\"/>\n+\n+## Add the query to your project\n+\n+Now that your query is fetching the right data, head back to Android Studio.\n+\n+1. Right click on the `src/main/graphql/com/example/rocketserver` folder. This folder should contain your `schema.json`. Select **New > File**:\n+\n+<img src=\"images/new_file.png\" class=\"screenshot\" alt=\"New GraphQL file\"/>\n+\n+2. Name the file `LaunchList.graphql`. Make sure it's saved at the same level as your `schema.json` file.\n+\n+3. Copy your final query from GraphiQL and paste it into `LaunchList.graphql`.\n+\n+```graphql:title=app/src/main/graphql/com/example/rocketreserver/LaunchList.graphql\n+query LaunchList {\n+  launches {\n+    cursor\n+    hasMore\n+    launches {\n+      id\n+      site\n+    }\n+  }\n+}\n+```\n+\n+## Generate the model\n+\n+Build your project to have the Apollo Android plugin generate your first model. The plugin defines a task named `generateApolloSources` to generate the models. You don't need to run it. It will be executed automatically when building your project.\n+\n+> **Note**: autocomplete won't work until you build your project. That is because autocomplete requires the generated code to work. Each time you change your queries, you should rebuild your project for Android Studio to pick up the modifications.\n+\n+## Examine generated code\n+\n+From the menu, select **Navigate > Class** and start typing `LaunchList`, Android Studio should suggest to open `LaunchList.kt`. The file should be in `build/generated/source/apollo/debug/service/com/example/rocketreserver/LaunchListQuery.kt`.\n+\n+The `LaunchListQuery.kt` file defines a root class, `LaunchListQuery`, with many nested classes. If you compare the classes to the JSON data returned in GraphiQL, you see that the structure matches. These classes include properties only for the fields that your query requests.\n+\n+Try commenting out the `id` property in `LaunchList.graphql`, saving, then building again. When the build completes, the innermost `Launch` now only includes the built-in `__typename` and the requested `site` property.\n+\n+Uncomment `id` and rebuild to restore the property.\n+\n+Now that you've generated code and had a chance to see what's in there, it's time to [execute the query](04-execute-the-query)!", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjA4ODk5NA=="}, "originalCommit": {"oid": "46ef40563f995f4f797986485a095c69b10b08f0"}, "originalPosition": 107}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzAzMTYyOA==", "bodyText": "Yeah, it was just an idea. If iOS is doing like this, I would say consistency is good :)", "url": "https://github.com/apollographql/apollo-android/pull/2328#discussion_r437031628", "createdAt": "2020-06-08T22:16:31Z", "author": {"login": "tasomaniac"}, "path": "docs/source/tutorial/03-write-your-first-query.mdx", "diffHunk": "@@ -0,0 +1,108 @@\n+---\n+title: \"3. Write your first query\"\n+---\n+\n+The most common GraphQL operation is the **query**, which requests data from your graph in a structure that conforms to your server's schema. If you return to [the GraphiQL query explorer](https://apollo-fullstack-tutorial.herokuapp.com) for your server, you can see available queries in the Schema tab you opened earlier.\n+\n+## Prototype your query in GraphiQL\n+\n+Click on the `launches` query at the top for details about it.\n+\n+<img src=\"images/launches_detail.png\" class=\"screenshot\" alt=\"Detail about launches query\"/>\n+\n+In the right panel, you see both the query itself and information about what the query returns. You can use this information to write a query you will eventually add to your app.\n+\n+In the left pane, start typing an empty query:\n+\n+```graphql:title=(GraphiQL)\n+query LaunchList {\n+}\n+```\n+\n+Apollo Android requires every query to have a name (even though this isn't required by the GraphQL spec). The query above has the name `LaunchList`.\n+\n+Next, between the query's curly braces, start typing `la`. An autocomplete box pops up and shows you options based on what's in the schema:\n+\n+<img src=\"images/graphiql_autocomplete.png\" class=\"screenshot\" alt=\"Example of autocomplete\"/>\n+\n+GraphiQL is a great tool for building and verifying queries so you don't have to repeatedly rebuild your project in Android Studio to try out changes.\n+\n+As the schema indicates, the `launches` query returns a `LaunchConnection` object. This object includes a list of launches, along with fields related to pagination (`cursor` and `hasMore`). The query you write indicates exactly which fields of this `LaunchConnection` object you want to be returned, like so:\n+\n+```graphql:title=(GraphiQL)\n+query LaunchList {\n+  launches {\n+    cursor\n+    hasMore\n+  }\n+}\n+```\n+\n+If you run this query by pressing the play button in GraphiQL, the query returns results as a JSON object on the right-hand side of the page:\n+\n+<img src=\"images/completed_basic_query.png\" class=\"screenshot\" alt=\"Query JSON in GraphiQL\"/>\n+\n+This query executes successfully, but it doesn't include any information about the `launches`! That's because we didn't include the necessary field in our query.\n+\n+Update your query to fetch the `id` and `site` properties for each launch, like so:\n+\n+```graphql:title=(GraphiQL)\n+query LaunchList {\n+  launches {\n+    cursor\n+    hasMore\n+    launches {\n+      id\n+      site\n+    }\n+  }\n+}\n+```\n+\n+Run the query again, and you'll now see that in addition to the information you got back before, you're also getting a list of launches with their ID and site information:\n+\n+<img src=\"images/completed_id_query.png\" class=\"screenshot\" alt=\"Updated query JSON in GraphiQL\"/>\n+\n+## Add the query to your project\n+\n+Now that your query is fetching the right data, head back to Android Studio.\n+\n+1. Right click on the `src/main/graphql/com/example/rocketserver` folder. This folder should contain your `schema.json`. Select **New > File**:\n+\n+<img src=\"images/new_file.png\" class=\"screenshot\" alt=\"New GraphQL file\"/>\n+\n+2. Name the file `LaunchList.graphql`. Make sure it's saved at the same level as your `schema.json` file.\n+\n+3. Copy your final query from GraphiQL and paste it into `LaunchList.graphql`.\n+\n+```graphql:title=app/src/main/graphql/com/example/rocketreserver/LaunchList.graphql\n+query LaunchList {\n+  launches {\n+    cursor\n+    hasMore\n+    launches {\n+      id\n+      site\n+    }\n+  }\n+}\n+```\n+\n+## Generate the model\n+\n+Build your project to have the Apollo Android plugin generate your first model. The plugin defines a task named `generateApolloSources` to generate the models. You don't need to run it. It will be executed automatically when building your project.\n+\n+> **Note**: autocomplete won't work until you build your project. That is because autocomplete requires the generated code to work. Each time you change your queries, you should rebuild your project for Android Studio to pick up the modifications.\n+\n+## Examine generated code\n+\n+From the menu, select **Navigate > Class** and start typing `LaunchList`, Android Studio should suggest to open `LaunchList.kt`. The file should be in `build/generated/source/apollo/debug/service/com/example/rocketreserver/LaunchListQuery.kt`.\n+\n+The `LaunchListQuery.kt` file defines a root class, `LaunchListQuery`, with many nested classes. If you compare the classes to the JSON data returned in GraphiQL, you see that the structure matches. These classes include properties only for the fields that your query requests.\n+\n+Try commenting out the `id` property in `LaunchList.graphql`, saving, then building again. When the build completes, the innermost `Launch` now only includes the built-in `__typename` and the requested `site` property.\n+\n+Uncomment `id` and rebuild to restore the property.\n+\n+Now that you've generated code and had a chance to see what's in there, it's time to [execute the query](04-execute-the-query)!", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjA4ODk5NA=="}, "originalCommit": {"oid": "46ef40563f995f4f797986485a095c69b10b08f0"}, "originalPosition": 107}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxNjM3Nzc2OnYy", "diffSide": "RIGHT", "path": "docs/source/tutorial/04-execute-the-query.mdx", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxODoxODoyNFrOGf4ytQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxODo1NTozM1rOGf54GQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjA4OTUyNQ==", "bodyText": "For these, we could maybe annotate them via \u26a0\ufe0f  or \u2139\ufe0f emoji.", "url": "https://github.com/apollographql/apollo-android/pull/2328#discussion_r436089525", "createdAt": "2020-06-05T18:18:24Z", "author": {"login": "tasomaniac"}, "path": "docs/source/tutorial/04-execute-the-query.mdx", "diffHunk": "@@ -0,0 +1,49 @@\n+---\n+title: \"4. Execute the query\"\n+---\n+\n+To execute the query, you will need to create an `ApolloClient` and make a new call with your query.\n+\n+## Create an ApolloClient\n+\n+Create a new file named Apollo.kt in the `com.example.rocketreserver` package and add the ApolloClient:\n+\n+```kotlin:title=app/src/main/java/com/example/rocketreserver/Apollo.kt\n+val apolloClient = ApolloClient.builder()\n+    .serverUrl(\"https://apollo-fullstack-tutorial.herokuapp.com\")\n+    .build()\n+```\n+\n+`apolloClient` is a top-level variable so that it can be reused from other parts of the app later on for better performance. Reusing the `apolloClient` allows to reuse the underlying OkHttp instance and the associated threadpools and connections.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46ef40563f995f4f797986485a095c69b10b08f0"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjEwNzI4OQ==", "bodyText": "I think in the iOS stuff I've been using:\n> **NOTE**: Something important please read it I beg you\nformat", "url": "https://github.com/apollographql/apollo-android/pull/2328#discussion_r436107289", "createdAt": "2020-06-05T18:55:33Z", "author": {"login": "designatednerd"}, "path": "docs/source/tutorial/04-execute-the-query.mdx", "diffHunk": "@@ -0,0 +1,49 @@\n+---\n+title: \"4. Execute the query\"\n+---\n+\n+To execute the query, you will need to create an `ApolloClient` and make a new call with your query.\n+\n+## Create an ApolloClient\n+\n+Create a new file named Apollo.kt in the `com.example.rocketreserver` package and add the ApolloClient:\n+\n+```kotlin:title=app/src/main/java/com/example/rocketreserver/Apollo.kt\n+val apolloClient = ApolloClient.builder()\n+    .serverUrl(\"https://apollo-fullstack-tutorial.herokuapp.com\")\n+    .build()\n+```\n+\n+`apolloClient` is a top-level variable so that it can be reused from other parts of the app later on for better performance. Reusing the `apolloClient` allows to reuse the underlying OkHttp instance and the associated threadpools and connections.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjA4OTUyNQ=="}, "originalCommit": {"oid": "46ef40563f995f4f797986485a095c69b10b08f0"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxNjM4NDQyOnYy", "diffSide": "RIGHT", "path": "docs/source/tutorial/05-connect-queries-to-your-ui.mdx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxODoyMDo0MVrOGf424A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxODoyMDo0MVrOGf424A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjA5MDU5Mg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            class LaunchListAdapter(val launches: List<LaunchListQuery.Launch>) :\n          \n          \n            \n                RecyclerView.Adapter<LaunchListAdapter.ViewHolder>() {\n          \n          \n            \n            class LaunchListAdapter(\n          \n          \n            \n                val launches: List<LaunchListQuery.Launch>\n          \n          \n            \n            ) : RecyclerView.Adapter<LaunchListAdapter.ViewHolder>() {", "url": "https://github.com/apollographql/apollo-android/pull/2328#discussion_r436090592", "createdAt": "2020-06-05T18:20:41Z", "author": {"login": "tasomaniac"}, "path": "docs/source/tutorial/05-connect-queries-to-your-ui.mdx", "diffHunk": "@@ -0,0 +1,61 @@\n+---\n+title: \"5. Connect your queries to your UI\"\n+---\n+\n+In this chapter, you are going to display a list of Launch Sites in a [RecyclerView](https://developer.android.com/guide/topics/ui/layout/recyclerview).\n+\n+## Configure LaunchListAdapter\n+\n+Open `LaunchListAdapter` and add a `launches` property:\n+\n+```kotlin:title=app/src/main/java/com/example/rocketreserver/LaunchListAdapter.kt\n+class LaunchListAdapter(val launches: List<LaunchListQuery.Launch>) :\n+    RecyclerView.Adapter<LaunchListAdapter.ViewHolder>() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46ef40563f995f4f797986485a095c69b10b08f0"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxNjM4NzIxOnYy", "diffSide": "RIGHT", "path": "docs/source/tutorial/05-connect-queries-to-your-ui.mdx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxODoyMTozNVrOGf44kA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxODoyMTozNVrOGf44kA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjA5MTAyNA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Create a new Adapter and pass it to your recycler view:\n          \n          \n            \n            Create a new Adapter and pass it to your RecyclerView:", "url": "https://github.com/apollographql/apollo-android/pull/2328#discussion_r436091024", "createdAt": "2020-06-05T18:21:35Z", "author": {"login": "tasomaniac"}, "path": "docs/source/tutorial/05-connect-queries-to-your-ui.mdx", "diffHunk": "@@ -0,0 +1,61 @@\n+---\n+title: \"5. Connect your queries to your UI\"\n+---\n+\n+In this chapter, you are going to display a list of Launch Sites in a [RecyclerView](https://developer.android.com/guide/topics/ui/layout/recyclerview).\n+\n+## Configure LaunchListAdapter\n+\n+Open `LaunchListAdapter` and add a `launches` property:\n+\n+```kotlin:title=app/src/main/java/com/example/rocketreserver/LaunchListAdapter.kt\n+class LaunchListAdapter(val launches: List<LaunchListQuery.Launch>) :\n+    RecyclerView.Adapter<LaunchListAdapter.ViewHolder>() {\n+```\n+\n+`LaunchListQuery.Launch` is a typesafe generated model from your LaunchList.graphql query.\n+\n+## Bind the data to the UI\n+\n+Use the `launches` property to bind items to your adapter:\n+\n+```kotlin:title=app/src/main/java/com/example/rocketreserver/LaunchListAdapter.kt\n+    override fun getItemCount(): Int {\n+        return launches.size\n+    }\n+\n+    override fun onBindViewHolder(holder: ViewHolder, position: Int) {\n+        val launch = launches.get(position)\n+        holder.binding.site.text = launch.site ?: \"\"\n+    }\n+```\n+\n+## Pass the LaunchListAdapter to the RecyclerView\n+\n+Create a new Adapter and pass it to your recycler view:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46ef40563f995f4f797986485a095c69b10b08f0"}, "originalPosition": 35}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxNjQwODg4OnYy", "diffSide": "RIGHT", "path": "docs/source/tutorial/08-add-a-details-view.mdx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxODoyODo1M1rOGf5GNg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxODoyODo1M1rOGf5GNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjA5NDUxOA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Application errors. In this case, `response.errors` will contain the application errors and response.data might be null\n          \n          \n            \n            * Application errors. In this case, `response.errors` will contain the application errors and `response.data` might be null", "url": "https://github.com/apollographql/apollo-android/pull/2328#discussion_r436094518", "createdAt": "2020-06-05T18:28:53Z", "author": {"login": "tasomaniac"}, "path": "docs/source/tutorial/08-add-a-details-view.mdx", "diffHunk": "@@ -0,0 +1,226 @@\n+---\n+title: \"8. Add a details view\"\n+---\n+\n+In this section, you will write your second GraphQL query to request details about a single launch.\n+\n+## Open the details fragment from the list\n+\n+In `LaunchListAdapter.kt`, add a click listener:\n+\n+```kotlin:title=app/src/main/java/com/example/rocketreserver/LaunchListAdapter.kt\n+    var onEndOfListReached: (() -> Unit)? = null\n+    var onItemClicked: ((LaunchListQuery.Launch) -> Unit)? = null\n+\n+    override fun onBindViewHolder(holder: ViewHolder, position: Int) {\n+\n+        // ...\n+\n+        holder.binding.root.setOnClickListener {\n+            onItemClicked?.invoke(launch)\n+        }\n+    }\n+```\n+\n+In `LaunchListFragment.kt`, register a click listener and navigate to the details screen:\n+\n+```kotlin:title=app/src/main/java/com/example/rocketreserver/LaunchListFragment.kt\n+    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n+\n+        // ...\n+\n+        adapter.onItemClicked = { launch ->\n+            findNavController().navigate(\n+                LaunchListFragmentDirections.openLaunchDetails(launchId = launch.id)\n+            )\n+        }\n+    }\n+```\n+\n+## Create the details query\n+\n+Create a new GraphQL query named `LaunchDetails.graphql`.\n+\n+As you did for $cursor, add a variable named `id`. Notice that this variable is a non-optional type this time. You won't be able to pass `null` like for $cursor.\n+\n+Since it is a details view, request the `LARGE` size for the missionPatch and also request the rocket type and name:\n+\n+```graphql:title=app/src/main/graphql/com/example/rocketreserver/LaunchDetails.graphql\n+query LaunchDetails($id:ID!) {\n+  launch(id: $id) {\n+    id\n+    site\n+    mission {\n+      name\n+      missionPatch(size:LARGE)\n+    }\n+    rocket {\n+      name\n+      type\n+    }\n+    isBooked\n+  }\n+}\n+```\n+\n+Remember you can always experiment in GraphiQL and type `Ctrl + Space` in GraphiQL to have a list of fields that are available.\n+\n+## Show a loading ProgressBar\n+\n+In `LaunchDetailsFragment.kt`, override `onViewCreated` and launch a new coroutine\n+\n+This time, display a progressBar while the query executes:\n+\n+```kotlin:title=app/src/main/java/com/example/rocketreserver/LaunchDetailsFragment.kt\n+    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n+        super.onViewCreated(view, savedInstanceState)\n+\n+        lifecycleScope.launchWhenResumed {\n+            binding.bookButton.visibility = View.GONE\n+            binding.bookProgressBar.visibility = View.GONE\n+            binding.progressBar.visibility = View.VISIBLE\n+            binding.error.visibility = View.GONE\n+\n+            val response = apolloClient.query(LaunchDetailsQuery(id = args.launchId)).toDeferred().await()\n+```\n+\n+## Handle protocol errors\n+\n+As you execute your query, two types of errors can happen:\n+\n+* Protocol errors such as HTTP errors or Json parsing errors will throw a `ApolloException`\n+* Application errors. In this case, `response.errors` will contain the application errors and response.data might be null", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46ef40563f995f4f797986485a095c69b10b08f0"}, "originalPosition": 92}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxNjQyNzQxOnYy", "diffSide": "RIGHT", "path": "docs/source/tutorial/10-authenticate-your-queries.mdx", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxODozNTowNVrOGf5SGQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQyMjoxNzozMlrOGgyUfA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjA5NzU2MQ==", "bodyText": "I realized that you also use requireContext to get apolloClient in earlier tutorials but context is introduced just now. Is that something to fix?", "url": "https://github.com/apollographql/apollo-android/pull/2328#discussion_r436097561", "createdAt": "2020-06-05T18:35:05Z", "author": {"login": "tasomaniac"}, "path": "docs/source/tutorial/10-authenticate-your-queries.mdx", "diffHunk": "@@ -0,0 +1,180 @@\n+---\n+title: \"10. Authenticate your queries\"\n+---\n+\n+In this section, you will book a flight \ud83d\ude80! Booking a flight requires being authenticated to the server so the correct person is sent to space! To do that, and since Apollo Android is using [OkHttp](https://square.github.io/okhttp/) to handle HTTP requests, you will leverage the OkHttp [Interceptors](https://square.github.io/okhttp/interceptors/) to add headers to your GraphQL requests.\n+\n+## Add the interceptor\n+\n+In `Apollo.kt`, add the `AuthorizationInterceptor` class:\n+\n+```kotlin:title=app/src/main/kotlin/com/example/rocketreserver/Apollo.kt\n+private class AuthorizationInterceptor(val context: Context): Interceptor {\n+    override fun intercept(chain: Interceptor.Chain): Response {\n+        val request = chain.request().newBuilder()\n+            .addHeader(\"Authorization\", User.getToken(context) ?: \"\")\n+            .build()\n+\n+        return chain.proceed(request)\n+    }\n+}\n+```\n+\n+This interceptor will append a `\"Authorization: $token\"` HTTP header to every request.\n+\n+## Use the interceptor\n+\n+Create a custom OkHttpClient that will use this interceptor and pass it to the ApolloClient:\n+\n+```kotlin:title=app/src/main/kotlin/com/example/rocketreserver/Apollo.kt\n+    instance = ApolloClient.builder()\n+        .serverUrl(\"https://apollo-fullstack-tutorial.herokuapp.com/\")\n+        .okHttpClient(OkHttpClient.Builder()\n+            .addInterceptor(AuthorizationInterceptor(context))\n+            .build()\n+        )\n+        .build()\n+```\n+\n+Notice that `Apollo.kt` now requires a context to create the interceptor and read the token from the `EncryptedSharedPreferences`. `apolloClient` cannot be a top level variable anymore so transform it to a top-level method that takes a `context` parameter instead:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46ef40563f995f4f797986485a095c69b10b08f0"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjM0NTExMg==", "bodyText": "Yup, my mistake, I copy/pasted code from the final state too early in the tutorial. I fixed one instance in step 8, \"add a details view\". Were there other instances?", "url": "https://github.com/apollographql/apollo-android/pull/2328#discussion_r436345112", "createdAt": "2020-06-07T09:48:06Z", "author": {"login": "martinbonnin"}, "path": "docs/source/tutorial/10-authenticate-your-queries.mdx", "diffHunk": "@@ -0,0 +1,180 @@\n+---\n+title: \"10. Authenticate your queries\"\n+---\n+\n+In this section, you will book a flight \ud83d\ude80! Booking a flight requires being authenticated to the server so the correct person is sent to space! To do that, and since Apollo Android is using [OkHttp](https://square.github.io/okhttp/) to handle HTTP requests, you will leverage the OkHttp [Interceptors](https://square.github.io/okhttp/interceptors/) to add headers to your GraphQL requests.\n+\n+## Add the interceptor\n+\n+In `Apollo.kt`, add the `AuthorizationInterceptor` class:\n+\n+```kotlin:title=app/src/main/kotlin/com/example/rocketreserver/Apollo.kt\n+private class AuthorizationInterceptor(val context: Context): Interceptor {\n+    override fun intercept(chain: Interceptor.Chain): Response {\n+        val request = chain.request().newBuilder()\n+            .addHeader(\"Authorization\", User.getToken(context) ?: \"\")\n+            .build()\n+\n+        return chain.proceed(request)\n+    }\n+}\n+```\n+\n+This interceptor will append a `\"Authorization: $token\"` HTTP header to every request.\n+\n+## Use the interceptor\n+\n+Create a custom OkHttpClient that will use this interceptor and pass it to the ApolloClient:\n+\n+```kotlin:title=app/src/main/kotlin/com/example/rocketreserver/Apollo.kt\n+    instance = ApolloClient.builder()\n+        .serverUrl(\"https://apollo-fullstack-tutorial.herokuapp.com/\")\n+        .okHttpClient(OkHttpClient.Builder()\n+            .addInterceptor(AuthorizationInterceptor(context))\n+            .build()\n+        )\n+        .build()\n+```\n+\n+Notice that `Apollo.kt` now requires a context to create the interceptor and read the token from the `EncryptedSharedPreferences`. `apolloClient` cannot be a top level variable anymore so transform it to a top-level method that takes a `context` parameter instead:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjA5NzU2MQ=="}, "originalCommit": {"oid": "46ef40563f995f4f797986485a095c69b10b08f0"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzAzMjA2MA==", "bodyText": "I cannot see them anymore. All good.", "url": "https://github.com/apollographql/apollo-android/pull/2328#discussion_r437032060", "createdAt": "2020-06-08T22:17:32Z", "author": {"login": "tasomaniac"}, "path": "docs/source/tutorial/10-authenticate-your-queries.mdx", "diffHunk": "@@ -0,0 +1,180 @@\n+---\n+title: \"10. Authenticate your queries\"\n+---\n+\n+In this section, you will book a flight \ud83d\ude80! Booking a flight requires being authenticated to the server so the correct person is sent to space! To do that, and since Apollo Android is using [OkHttp](https://square.github.io/okhttp/) to handle HTTP requests, you will leverage the OkHttp [Interceptors](https://square.github.io/okhttp/interceptors/) to add headers to your GraphQL requests.\n+\n+## Add the interceptor\n+\n+In `Apollo.kt`, add the `AuthorizationInterceptor` class:\n+\n+```kotlin:title=app/src/main/kotlin/com/example/rocketreserver/Apollo.kt\n+private class AuthorizationInterceptor(val context: Context): Interceptor {\n+    override fun intercept(chain: Interceptor.Chain): Response {\n+        val request = chain.request().newBuilder()\n+            .addHeader(\"Authorization\", User.getToken(context) ?: \"\")\n+            .build()\n+\n+        return chain.proceed(request)\n+    }\n+}\n+```\n+\n+This interceptor will append a `\"Authorization: $token\"` HTTP header to every request.\n+\n+## Use the interceptor\n+\n+Create a custom OkHttpClient that will use this interceptor and pass it to the ApolloClient:\n+\n+```kotlin:title=app/src/main/kotlin/com/example/rocketreserver/Apollo.kt\n+    instance = ApolloClient.builder()\n+        .serverUrl(\"https://apollo-fullstack-tutorial.herokuapp.com/\")\n+        .okHttpClient(OkHttpClient.Builder()\n+            .addInterceptor(AuthorizationInterceptor(context))\n+            .build()\n+        )\n+        .build()\n+```\n+\n+Notice that `Apollo.kt` now requires a context to create the interceptor and read the token from the `EncryptedSharedPreferences`. `apolloClient` cannot be a top level variable anymore so transform it to a top-level method that takes a `context` parameter instead:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjA5NzU2MQ=="}, "originalCommit": {"oid": "46ef40563f995f4f797986485a095c69b10b08f0"}, "originalPosition": 39}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxNjQzNjc0OnYy", "diffSide": "RIGHT", "path": "docs/source/tutorial/10-authenticate-your-queries.mdx", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxODozNzo1OFrOGf5X0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQyMjoxNTo0OFrOGgyRrg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjA5OTAyNw==", "bodyText": "Would it be ok to mention that users are better to use a dependency injection to manage the singleton apolloClient instance and make it clear that this is done like this only for sample purposes.", "url": "https://github.com/apollographql/apollo-android/pull/2328#discussion_r436099027", "createdAt": "2020-06-05T18:37:58Z", "author": {"login": "tasomaniac"}, "path": "docs/source/tutorial/10-authenticate-your-queries.mdx", "diffHunk": "@@ -0,0 +1,180 @@\n+---\n+title: \"10. Authenticate your queries\"\n+---\n+\n+In this section, you will book a flight \ud83d\ude80! Booking a flight requires being authenticated to the server so the correct person is sent to space! To do that, and since Apollo Android is using [OkHttp](https://square.github.io/okhttp/) to handle HTTP requests, you will leverage the OkHttp [Interceptors](https://square.github.io/okhttp/interceptors/) to add headers to your GraphQL requests.\n+\n+## Add the interceptor\n+\n+In `Apollo.kt`, add the `AuthorizationInterceptor` class:\n+\n+```kotlin:title=app/src/main/kotlin/com/example/rocketreserver/Apollo.kt\n+private class AuthorizationInterceptor(val context: Context): Interceptor {\n+    override fun intercept(chain: Interceptor.Chain): Response {\n+        val request = chain.request().newBuilder()\n+            .addHeader(\"Authorization\", User.getToken(context) ?: \"\")\n+            .build()\n+\n+        return chain.proceed(request)\n+    }\n+}\n+```\n+\n+This interceptor will append a `\"Authorization: $token\"` HTTP header to every request.\n+\n+## Use the interceptor\n+\n+Create a custom OkHttpClient that will use this interceptor and pass it to the ApolloClient:\n+\n+```kotlin:title=app/src/main/kotlin/com/example/rocketreserver/Apollo.kt\n+    instance = ApolloClient.builder()\n+        .serverUrl(\"https://apollo-fullstack-tutorial.herokuapp.com/\")\n+        .okHttpClient(OkHttpClient.Builder()\n+            .addInterceptor(AuthorizationInterceptor(context))\n+            .build()\n+        )\n+        .build()\n+```\n+\n+Notice that `Apollo.kt` now requires a context to create the interceptor and read the token from the `EncryptedSharedPreferences`. `apolloClient` cannot be a top level variable anymore so transform it to a top-level method that takes a `context` parameter instead:\n+\n+```kotlin:title=app/src/main/kotlin/com/example/rocketreserver/Apollo.kt\n+fun apolloClient(context: Context): ApolloClient {\n+    return ApolloClient.builder()\n+        .serverUrl(\"https://apollo-fullstack-tutorial.herokuapp.com/\")\n+        .okHttpClient(OkHttpClient.Builder()\n+            .addInterceptor(AuthorizationInterceptor(context))\n+            .build()\n+        )\n+        .build()\n+}\n+```\n+\n+Replace all usages of `apolloClient` with `apolloClient(context)`. There is one instance in each fragment:\n+\n+```kotlin\n+// LaunchListFragment\n+apolloClient(requireContext()).query(LaunchListQuery(cursor = Input.fromNullable(cursor))).toDeferred().await()\n+\n+// LaunchDetailsFragment\n+apolloClient(requireContext()).query(LaunchDetailsQuery(id = args.launchId)).toDeferred().await()\n+\n+// LoginFragment\n+apolloClient(requireContext()).mutate(LoginMutation(email = Input.fromNullable(email))).toDeferred().await()\n+\n+```\n+\n+Make the `apolloClient` a singleton\n+\n+There is no need to create a new instance of the apolloClient for each GraphQL request. You can reuse the `apolloClient`:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46ef40563f995f4f797986485a095c69b10b08f0"}, "originalPosition": 69}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjM0NTQyNw==", "bodyText": "This is a part I wasn't sure how to explain best. I'd like to avoid adding Dagger or any other DI framework to the tutorial but this is better to explicit that this is for sample use only.\nI added that note, let me know how it sounds:\n**Note**: The singleton is handled here manually for sample purposes. In a real life application, you would certainly use a dependency injection framework such as `Dagger` or `Koin`.", "url": "https://github.com/apollographql/apollo-android/pull/2328#discussion_r436345427", "createdAt": "2020-06-07T09:52:43Z", "author": {"login": "martinbonnin"}, "path": "docs/source/tutorial/10-authenticate-your-queries.mdx", "diffHunk": "@@ -0,0 +1,180 @@\n+---\n+title: \"10. Authenticate your queries\"\n+---\n+\n+In this section, you will book a flight \ud83d\ude80! Booking a flight requires being authenticated to the server so the correct person is sent to space! To do that, and since Apollo Android is using [OkHttp](https://square.github.io/okhttp/) to handle HTTP requests, you will leverage the OkHttp [Interceptors](https://square.github.io/okhttp/interceptors/) to add headers to your GraphQL requests.\n+\n+## Add the interceptor\n+\n+In `Apollo.kt`, add the `AuthorizationInterceptor` class:\n+\n+```kotlin:title=app/src/main/kotlin/com/example/rocketreserver/Apollo.kt\n+private class AuthorizationInterceptor(val context: Context): Interceptor {\n+    override fun intercept(chain: Interceptor.Chain): Response {\n+        val request = chain.request().newBuilder()\n+            .addHeader(\"Authorization\", User.getToken(context) ?: \"\")\n+            .build()\n+\n+        return chain.proceed(request)\n+    }\n+}\n+```\n+\n+This interceptor will append a `\"Authorization: $token\"` HTTP header to every request.\n+\n+## Use the interceptor\n+\n+Create a custom OkHttpClient that will use this interceptor and pass it to the ApolloClient:\n+\n+```kotlin:title=app/src/main/kotlin/com/example/rocketreserver/Apollo.kt\n+    instance = ApolloClient.builder()\n+        .serverUrl(\"https://apollo-fullstack-tutorial.herokuapp.com/\")\n+        .okHttpClient(OkHttpClient.Builder()\n+            .addInterceptor(AuthorizationInterceptor(context))\n+            .build()\n+        )\n+        .build()\n+```\n+\n+Notice that `Apollo.kt` now requires a context to create the interceptor and read the token from the `EncryptedSharedPreferences`. `apolloClient` cannot be a top level variable anymore so transform it to a top-level method that takes a `context` parameter instead:\n+\n+```kotlin:title=app/src/main/kotlin/com/example/rocketreserver/Apollo.kt\n+fun apolloClient(context: Context): ApolloClient {\n+    return ApolloClient.builder()\n+        .serverUrl(\"https://apollo-fullstack-tutorial.herokuapp.com/\")\n+        .okHttpClient(OkHttpClient.Builder()\n+            .addInterceptor(AuthorizationInterceptor(context))\n+            .build()\n+        )\n+        .build()\n+}\n+```\n+\n+Replace all usages of `apolloClient` with `apolloClient(context)`. There is one instance in each fragment:\n+\n+```kotlin\n+// LaunchListFragment\n+apolloClient(requireContext()).query(LaunchListQuery(cursor = Input.fromNullable(cursor))).toDeferred().await()\n+\n+// LaunchDetailsFragment\n+apolloClient(requireContext()).query(LaunchDetailsQuery(id = args.launchId)).toDeferred().await()\n+\n+// LoginFragment\n+apolloClient(requireContext()).mutate(LoginMutation(email = Input.fromNullable(email))).toDeferred().await()\n+\n+```\n+\n+Make the `apolloClient` a singleton\n+\n+There is no need to create a new instance of the apolloClient for each GraphQL request. You can reuse the `apolloClient`:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjA5OTAyNw=="}, "originalCommit": {"oid": "46ef40563f995f4f797986485a095c69b10b08f0"}, "originalPosition": 69}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzAzMTM0Mg==", "bodyText": "For sure. This sounds good.", "url": "https://github.com/apollographql/apollo-android/pull/2328#discussion_r437031342", "createdAt": "2020-06-08T22:15:48Z", "author": {"login": "tasomaniac"}, "path": "docs/source/tutorial/10-authenticate-your-queries.mdx", "diffHunk": "@@ -0,0 +1,180 @@\n+---\n+title: \"10. Authenticate your queries\"\n+---\n+\n+In this section, you will book a flight \ud83d\ude80! Booking a flight requires being authenticated to the server so the correct person is sent to space! To do that, and since Apollo Android is using [OkHttp](https://square.github.io/okhttp/) to handle HTTP requests, you will leverage the OkHttp [Interceptors](https://square.github.io/okhttp/interceptors/) to add headers to your GraphQL requests.\n+\n+## Add the interceptor\n+\n+In `Apollo.kt`, add the `AuthorizationInterceptor` class:\n+\n+```kotlin:title=app/src/main/kotlin/com/example/rocketreserver/Apollo.kt\n+private class AuthorizationInterceptor(val context: Context): Interceptor {\n+    override fun intercept(chain: Interceptor.Chain): Response {\n+        val request = chain.request().newBuilder()\n+            .addHeader(\"Authorization\", User.getToken(context) ?: \"\")\n+            .build()\n+\n+        return chain.proceed(request)\n+    }\n+}\n+```\n+\n+This interceptor will append a `\"Authorization: $token\"` HTTP header to every request.\n+\n+## Use the interceptor\n+\n+Create a custom OkHttpClient that will use this interceptor and pass it to the ApolloClient:\n+\n+```kotlin:title=app/src/main/kotlin/com/example/rocketreserver/Apollo.kt\n+    instance = ApolloClient.builder()\n+        .serverUrl(\"https://apollo-fullstack-tutorial.herokuapp.com/\")\n+        .okHttpClient(OkHttpClient.Builder()\n+            .addInterceptor(AuthorizationInterceptor(context))\n+            .build()\n+        )\n+        .build()\n+```\n+\n+Notice that `Apollo.kt` now requires a context to create the interceptor and read the token from the `EncryptedSharedPreferences`. `apolloClient` cannot be a top level variable anymore so transform it to a top-level method that takes a `context` parameter instead:\n+\n+```kotlin:title=app/src/main/kotlin/com/example/rocketreserver/Apollo.kt\n+fun apolloClient(context: Context): ApolloClient {\n+    return ApolloClient.builder()\n+        .serverUrl(\"https://apollo-fullstack-tutorial.herokuapp.com/\")\n+        .okHttpClient(OkHttpClient.Builder()\n+            .addInterceptor(AuthorizationInterceptor(context))\n+            .build()\n+        )\n+        .build()\n+}\n+```\n+\n+Replace all usages of `apolloClient` with `apolloClient(context)`. There is one instance in each fragment:\n+\n+```kotlin\n+// LaunchListFragment\n+apolloClient(requireContext()).query(LaunchListQuery(cursor = Input.fromNullable(cursor))).toDeferred().await()\n+\n+// LaunchDetailsFragment\n+apolloClient(requireContext()).query(LaunchDetailsQuery(id = args.launchId)).toDeferred().await()\n+\n+// LoginFragment\n+apolloClient(requireContext()).mutate(LoginMutation(email = Input.fromNullable(email))).toDeferred().await()\n+\n+```\n+\n+Make the `apolloClient` a singleton\n+\n+There is no need to create a new instance of the apolloClient for each GraphQL request. You can reuse the `apolloClient`:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjA5OTAyNw=="}, "originalCommit": {"oid": "46ef40563f995f4f797986485a095c69b10b08f0"}, "originalPosition": 69}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3110, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}