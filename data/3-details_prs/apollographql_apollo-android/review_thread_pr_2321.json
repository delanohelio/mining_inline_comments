{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI2MDk0OTI0", "number": 2321, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwODowOTo1NFrOEFbrbQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwODowOTo1NFrOEFbrbQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0MTMxODIxOnYy", "diffSide": "RIGHT", "path": "apollo-gradle-plugin/src/main/kotlin/com/apollographql/apollo/gradle/internal/ApolloDownloadSchemaTask.kt", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwODowOTo1NFrOGjnhng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxMTo1MDowMlrOGlrxpw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAwMDkyNg==", "bodyText": "@martinbonnin is there a particular reason why this property doesn't have the @Option annotation?", "url": "https://github.com/apollographql/apollo-android/pull/2321#discussion_r440000926", "createdAt": "2020-06-15T08:09:54Z", "author": {"login": "francescocervone"}, "path": "apollo-gradle-plugin/src/main/kotlin/com/apollographql/apollo/gradle/internal/ApolloDownloadSchemaTask.kt", "diffHunk": "@@ -1,36 +1,32 @@\n package com.apollographql.apollo.gradle.internal\n \n-import com.squareup.moshi.JsonWriter\n-import okhttp3.HttpUrl.Companion.toHttpUrl\n-import okhttp3.MediaType.Companion.toMediaTypeOrNull\n-import okhttp3.OkHttpClient\n-import okhttp3.Request\n-import okhttp3.RequestBody.Companion.toRequestBody\n-import okio.buffer\n-import okio.sink\n import org.gradle.api.DefaultTask\n-import org.gradle.api.provider.MapProperty\n+import org.gradle.api.provider.ListProperty\n import org.gradle.api.provider.Property\n import org.gradle.api.tasks.Input\n import org.gradle.api.tasks.Optional\n import org.gradle.api.tasks.TaskAction\n-import java.io.ByteArrayOutputStream\n-import java.util.concurrent.TimeUnit\n+import org.gradle.api.tasks.options.Option\n+import java.io.File\n \n abstract class ApolloDownloadSchemaTask : DefaultTask() {\n   @get:Input\n-  abstract val endpointUrl: Property<String>\n+  @get:Option(option = \"endpoint\", description = \"url of the GraphQL endpoint\")\n+  abstract val endpoint: Property<String>\n \n   @get:Input\n-  abstract val schemaFilePath: Property<String>\n+  @get:Optional\n+  @get:Option(option = \"schema\", description = \"path where the schema will be downloaded, relative to the current working directory\")\n+  abstract val schema: Property<String>\n \n   @get:Optional\n   @get:Input\n-  abstract val headers: MapProperty<String, String>\n+  @set:Option(option = \"header\", description = \"headers in the form 'Name: Value'\")\n+  var header = emptyList<String>() // cannot be lazy for @Option to work\n \n-  @get:Optional\n   @get:Input\n-  abstract val queryParameters: MapProperty<String, String>\n+  @get:Optional\n+  abstract val schemaRelativeToProject: Property<String>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f62886634af103777ac941d8c82b0bd75709ae5"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDA4NzQ2Mg==", "bodyText": "Not really. The reasoning was that when run from the command line, most tools assume parameters to be relative the current working directory. But adding @Option here works as well. Feel free to make a pull request. Or I can do it if you think that'll be useful.", "url": "https://github.com/apollographql/apollo-android/pull/2321#discussion_r440087462", "createdAt": "2020-06-15T10:42:40Z", "author": {"login": "martinbonnin"}, "path": "apollo-gradle-plugin/src/main/kotlin/com/apollographql/apollo/gradle/internal/ApolloDownloadSchemaTask.kt", "diffHunk": "@@ -1,36 +1,32 @@\n package com.apollographql.apollo.gradle.internal\n \n-import com.squareup.moshi.JsonWriter\n-import okhttp3.HttpUrl.Companion.toHttpUrl\n-import okhttp3.MediaType.Companion.toMediaTypeOrNull\n-import okhttp3.OkHttpClient\n-import okhttp3.Request\n-import okhttp3.RequestBody.Companion.toRequestBody\n-import okio.buffer\n-import okio.sink\n import org.gradle.api.DefaultTask\n-import org.gradle.api.provider.MapProperty\n+import org.gradle.api.provider.ListProperty\n import org.gradle.api.provider.Property\n import org.gradle.api.tasks.Input\n import org.gradle.api.tasks.Optional\n import org.gradle.api.tasks.TaskAction\n-import java.io.ByteArrayOutputStream\n-import java.util.concurrent.TimeUnit\n+import org.gradle.api.tasks.options.Option\n+import java.io.File\n \n abstract class ApolloDownloadSchemaTask : DefaultTask() {\n   @get:Input\n-  abstract val endpointUrl: Property<String>\n+  @get:Option(option = \"endpoint\", description = \"url of the GraphQL endpoint\")\n+  abstract val endpoint: Property<String>\n \n   @get:Input\n-  abstract val schemaFilePath: Property<String>\n+  @get:Optional\n+  @get:Option(option = \"schema\", description = \"path where the schema will be downloaded, relative to the current working directory\")\n+  abstract val schema: Property<String>\n \n   @get:Optional\n   @get:Input\n-  abstract val headers: MapProperty<String, String>\n+  @set:Option(option = \"header\", description = \"headers in the form 'Name: Value'\")\n+  var header = emptyList<String>() // cannot be lazy for @Option to work\n \n-  @get:Optional\n   @get:Input\n-  abstract val queryParameters: MapProperty<String, String>\n+  @get:Optional\n+  abstract val schemaRelativeToProject: Property<String>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAwMDkyNg=="}, "originalCommit": {"oid": "8f62886634af103777ac941d8c82b0bd75709ae5"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDExNjg0MA==", "bodyText": "I just wanted to make sure that I wasn't missing something.\nI can do it, thanks!", "url": "https://github.com/apollographql/apollo-android/pull/2321#discussion_r440116840", "createdAt": "2020-06-15T11:43:52Z", "author": {"login": "francescocervone"}, "path": "apollo-gradle-plugin/src/main/kotlin/com/apollographql/apollo/gradle/internal/ApolloDownloadSchemaTask.kt", "diffHunk": "@@ -1,36 +1,32 @@\n package com.apollographql.apollo.gradle.internal\n \n-import com.squareup.moshi.JsonWriter\n-import okhttp3.HttpUrl.Companion.toHttpUrl\n-import okhttp3.MediaType.Companion.toMediaTypeOrNull\n-import okhttp3.OkHttpClient\n-import okhttp3.Request\n-import okhttp3.RequestBody.Companion.toRequestBody\n-import okio.buffer\n-import okio.sink\n import org.gradle.api.DefaultTask\n-import org.gradle.api.provider.MapProperty\n+import org.gradle.api.provider.ListProperty\n import org.gradle.api.provider.Property\n import org.gradle.api.tasks.Input\n import org.gradle.api.tasks.Optional\n import org.gradle.api.tasks.TaskAction\n-import java.io.ByteArrayOutputStream\n-import java.util.concurrent.TimeUnit\n+import org.gradle.api.tasks.options.Option\n+import java.io.File\n \n abstract class ApolloDownloadSchemaTask : DefaultTask() {\n   @get:Input\n-  abstract val endpointUrl: Property<String>\n+  @get:Option(option = \"endpoint\", description = \"url of the GraphQL endpoint\")\n+  abstract val endpoint: Property<String>\n \n   @get:Input\n-  abstract val schemaFilePath: Property<String>\n+  @get:Optional\n+  @get:Option(option = \"schema\", description = \"path where the schema will be downloaded, relative to the current working directory\")\n+  abstract val schema: Property<String>\n \n   @get:Optional\n   @get:Input\n-  abstract val headers: MapProperty<String, String>\n+  @set:Option(option = \"header\", description = \"headers in the form 'Name: Value'\")\n+  var header = emptyList<String>() // cannot be lazy for @Option to work\n \n-  @get:Optional\n   @get:Input\n-  abstract val queryParameters: MapProperty<String, String>\n+  @get:Optional\n+  abstract val schemaRelativeToProject: Property<String>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAwMDkyNg=="}, "originalCommit": {"oid": "8f62886634af103777ac941d8c82b0bd75709ae5"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjE2NzcxOQ==", "bodyText": "I was looking into this this morning so I made a PR there: #2378", "url": "https://github.com/apollographql/apollo-android/pull/2321#discussion_r442167719", "createdAt": "2020-06-18T11:50:02Z", "author": {"login": "martinbonnin"}, "path": "apollo-gradle-plugin/src/main/kotlin/com/apollographql/apollo/gradle/internal/ApolloDownloadSchemaTask.kt", "diffHunk": "@@ -1,36 +1,32 @@\n package com.apollographql.apollo.gradle.internal\n \n-import com.squareup.moshi.JsonWriter\n-import okhttp3.HttpUrl.Companion.toHttpUrl\n-import okhttp3.MediaType.Companion.toMediaTypeOrNull\n-import okhttp3.OkHttpClient\n-import okhttp3.Request\n-import okhttp3.RequestBody.Companion.toRequestBody\n-import okio.buffer\n-import okio.sink\n import org.gradle.api.DefaultTask\n-import org.gradle.api.provider.MapProperty\n+import org.gradle.api.provider.ListProperty\n import org.gradle.api.provider.Property\n import org.gradle.api.tasks.Input\n import org.gradle.api.tasks.Optional\n import org.gradle.api.tasks.TaskAction\n-import java.io.ByteArrayOutputStream\n-import java.util.concurrent.TimeUnit\n+import org.gradle.api.tasks.options.Option\n+import java.io.File\n \n abstract class ApolloDownloadSchemaTask : DefaultTask() {\n   @get:Input\n-  abstract val endpointUrl: Property<String>\n+  @get:Option(option = \"endpoint\", description = \"url of the GraphQL endpoint\")\n+  abstract val endpoint: Property<String>\n \n   @get:Input\n-  abstract val schemaFilePath: Property<String>\n+  @get:Optional\n+  @get:Option(option = \"schema\", description = \"path where the schema will be downloaded, relative to the current working directory\")\n+  abstract val schema: Property<String>\n \n   @get:Optional\n   @get:Input\n-  abstract val headers: MapProperty<String, String>\n+  @set:Option(option = \"header\", description = \"headers in the form 'Name: Value'\")\n+  var header = emptyList<String>() // cannot be lazy for @Option to work\n \n-  @get:Optional\n   @get:Input\n-  abstract val queryParameters: MapProperty<String, String>\n+  @get:Optional\n+  abstract val schemaRelativeToProject: Property<String>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAwMDkyNg=="}, "originalCommit": {"oid": "8f62886634af103777ac941d8c82b0bd75709ae5"}, "originalPosition": 45}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3102, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}