{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk5MzM2ODcx", "number": 3269, "title": "Update jQuery to 3.5.1", "bodyText": "This change updates the jQuery by leveraging https://www.webjars.org. This is a recommended way how to include js/css in Java projects. We can try to include other dependencies in this way -> I just wanted to try it out. I've done some simple checks and the UI seemed to work properly but nothing extensive. @vladak could you please check?\nThanks.", "createdAt": "2020-10-07T15:28:56Z", "url": "https://github.com/oracle/opengrok/pull/3269", "merged": true, "mergeCommit": {"oid": "d8a7afe280a99d4ba49d7ee685bf8588db436ab9"}, "closed": true, "closedAt": "2020-10-08T18:42:38Z", "author": {"login": "ahornace"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdQOnPEgH2gAyNDk5MzM2ODcxOmFlMzJmMDgxMzEzOWJmMWFkZmExOGY2YjI0ZmQwOTBmYzUwODU4ZTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdQmCUegFqTUwNTA2MzUzOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ae32f0813139bf1adfa18f6b24fd090fc50858e3", "author": {"user": {"login": "ahornace", "name": "Adam Horn\u00e1\u010dek"}}, "url": "https://github.com/oracle/opengrok/commit/ae32f0813139bf1adfa18f6b24fd090fc50858e3", "committedDate": "2020-10-07T15:21:33Z", "message": "Update jQuery to 3.5.1"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "970368ef493d36762dfb95ad282019ffbb6a51a7", "author": {"user": {"login": "ahornace", "name": "Adam Horn\u00e1\u010dek"}}, "url": "https://github.com/oracle/opengrok/commit/970368ef493d36762dfb95ad282019ffbb6a51a7", "committedDate": "2020-10-07T15:33:55Z", "message": "Update webjar locator to 0.46"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0MDEzNTIz", "url": "https://github.com/oracle/opengrok/pull/3269#pullrequestreview-504013523", "createdAt": "2020-10-07T15:37:12Z", "commit": {"oid": "970368ef493d36762dfb95ad282019ffbb6a51a7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxNTozNzoxMlrOHd5eUA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxNTozNzoxMlrOHd5eUA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTExMjQwMA==", "bodyText": "I wonder if this is going to work well w.r.t. caching. So far we relied on the version number to change I think.", "url": "https://github.com/oracle/opengrok/pull/3269#discussion_r501112400", "createdAt": "2020-10-07T15:37:12Z", "author": {"login": "vladak"}, "path": "opengrok-indexer/src/main/java/org/opengrok/indexer/web/Scripts.java", "diffHunk": "@@ -86,27 +89,27 @@ public FileScript(String script, int priority) {\n \n         @Override\n         public String toHtml() {\n-            StringBuilder builder = new StringBuilder();\n-            builder.append(\"\\t<script type=\\\"text/javascript\\\" src=\\\"\");\n-            builder.append(this.getScriptData());\n-            builder.append(\"\\\" data-priority=\\\"\");\n-            builder.append(this.getPriority());\n-            builder.append(\"\\\"></script>\\n\");\n-            return builder.toString();\n+            return \"\\t<script type=\\\"text/javascript\\\" src=\\\"\" +\n+                    this.getScriptData() +\n+                    \"\\\" data-priority=\\\"\" +\n+                    this.getPriority() +\n+                    \"\\\"></script>\\n\";\n         }\n \n     }\n \n     protected static final Map<String, Script> SCRIPTS = new TreeMap<>();\n \n+    private static final WebJarAssetLocator assetLocator = new WebJarAssetLocator();\n+\n     /**\n      * Aliases for the page scripts. The path in the FileScript is relatively to\n      * the request's context path.\n      *\n      * @see HttpServletRequest#getContextPath()\n      */\n     static {\n-        putjs(\"jquery\", \"js/jquery-3.4.1\", 10);\n+        putFromWebJar(\"jquery\", \"jquery.min.js\", 10);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "970368ef493d36762dfb95ad282019ffbb6a51a7"}, "originalPosition": 58}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0MDE4NTY4", "url": "https://github.com/oracle/opengrok/pull/3269#pullrequestreview-504018568", "createdAt": "2020-10-07T15:42:29Z", "commit": {"oid": "970368ef493d36762dfb95ad282019ffbb6a51a7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxNTo0MjozMFrOHd5thQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxNTo0MjozMFrOHd5thQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTExNjI5Mw==", "bodyText": "I didn't know + was better than a builder", "url": "https://github.com/oracle/opengrok/pull/3269#discussion_r501116293", "createdAt": "2020-10-07T15:42:30Z", "author": {"login": "tulinkry"}, "path": "opengrok-indexer/src/main/java/org/opengrok/indexer/web/Scripts.java", "diffHunk": "@@ -86,27 +89,27 @@ public FileScript(String script, int priority) {\n \n         @Override\n         public String toHtml() {\n-            StringBuilder builder = new StringBuilder();\n-            builder.append(\"\\t<script type=\\\"text/javascript\\\" src=\\\"\");\n-            builder.append(this.getScriptData());\n-            builder.append(\"\\\" data-priority=\\\"\");\n-            builder.append(this.getPriority());\n-            builder.append(\"\\\"></script>\\n\");\n-            return builder.toString();\n+            return \"\\t<script type=\\\"text/javascript\\\" src=\\\"\" +\n+                    this.getScriptData() +\n+                    \"\\\" data-priority=\\\"\" +\n+                    this.getPriority() +\n+                    \"\\\"></script>\\n\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "970368ef493d36762dfb95ad282019ffbb6a51a7"}, "originalPosition": 41}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "57228255cc8c75454d804cc116ae2409d84c39a9", "author": {"user": {"login": "ahornace", "name": "Adam Horn\u00e1\u010dek"}}, "url": "https://github.com/oracle/opengrok/commit/57228255cc8c75454d804cc116ae2409d84c39a9", "committedDate": "2020-10-07T15:44:35Z", "message": "Add webjars path to ExpiresOneDayFilter"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "07bd0b3fc065b2048470df46b2942516609bae06", "author": {"user": {"login": "ahornace", "name": "Adam Horn\u00e1\u010dek"}}, "url": "https://github.com/oracle/opengrok/commit/07bd0b3fc065b2048470df46b2942516609bae06", "committedDate": "2020-10-08T15:08:11Z", "message": "Move Scripts and dependent classes to web module"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1MDYzNTM5", "url": "https://github.com/oracle/opengrok/pull/3269#pullrequestreview-505063539", "createdAt": "2020-10-08T18:38:57Z", "commit": {"oid": "07bd0b3fc065b2048470df46b2942516609bae06"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxODozODo1N1rOHerpXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxODozODo1N1rOHerpXw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTkzNDQzMQ==", "bodyText": "there you go :-)", "url": "https://github.com/oracle/opengrok/pull/3269#discussion_r501934431", "createdAt": "2020-10-08T18:38:57Z", "author": {"login": "vladak"}, "path": "opengrok-indexer/src/main/java/org/opengrok/indexer/web/messages/Message.java", "diffHunk": "@@ -80,6 +80,7 @@ public String toString() {\n             return messageLevelString;\n         }\n \n+        @SuppressWarnings(\"rawtypes\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "07bd0b3fc065b2048470df46b2942516609bae06"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 229, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}