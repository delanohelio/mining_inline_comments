{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkyMjc5OTgw", "number": 3084, "title": "check the value before putting to average key lengths map", "bodyText": "This change sanitizes the values before putting them to averageLengths map in suggester project data, thus preventing the IllegalArgumentException exception in initSearchCountMap().", "createdAt": "2020-03-23T10:00:13Z", "url": "https://github.com/oracle/opengrok/pull/3084", "merged": true, "mergeCommit": {"oid": "b71b2472d83849d8e44d85f00068eb80173857c0"}, "closed": true, "closedAt": "2020-03-23T11:40:08Z", "author": {"login": "vladak"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcQbnb_gFqTM3OTI5MzU2Mg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcQcxLuABqjMxNTQ4MzI1NTY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5MjkzNTYy", "url": "https://github.com/oracle/opengrok/pull/3084#pullrequestreview-379293562", "createdAt": "2020-03-23T10:19:23Z", "commit": {"oid": "a2dcc4a801dd7a4cc551ba27be66806bd71c6cff"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMDoxOToyM1rOF5-4FA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMDoxOToyM1rOF5-4FA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjM0MzMxNg==", "bodyText": "I'd prefer the condition to check lookup.getCount() but that's not a big deal.", "url": "https://github.com/oracle/opengrok/pull/3084#discussion_r396343316", "createdAt": "2020-03-23T10:19:23Z", "author": {"login": "ahornace"}, "path": "suggester/src/main/java/org/opengrok/suggest/SuggesterProjectData.java", "diffHunk": "@@ -261,8 +261,10 @@ private WFSTCompletionLookup build(final IndexReader indexReader, final String f\n         WFSTCompletionLookup lookup = createWFST();\n         lookup.build(iterator);\n \n-        double averageLength = (double) iterator.termLengthAccumulator / lookup.getCount();\n-        averageLengths.put(field, averageLength);\n+        if (iterator.termLengthAccumulator > 0) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2dcc4a801dd7a4cc551ba27be66806bd71c6cff"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5MjkzNjA0", "url": "https://github.com/oracle/opengrok/pull/3084#pullrequestreview-379293604", "createdAt": "2020-03-23T10:19:27Z", "commit": {"oid": "a2dcc4a801dd7a4cc551ba27be66806bd71c6cff"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7bfaec1104779973bbe6b77d3e0352419d6cc28", "author": {"user": {"login": "vladak", "name": "Vladimir Kotal"}}, "url": "https://github.com/oracle/opengrok/commit/b7bfaec1104779973bbe6b77d3e0352419d6cc28", "committedDate": "2020-03-23T11:39:48Z", "message": "check the value before putting to average key lengths map"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8bdb39a44e9d0450cd1c681201ebc5fd9de26a64", "author": {"user": {"login": "vladak", "name": "Vladimir Kotal"}}, "url": "https://github.com/oracle/opengrok/commit/8bdb39a44e9d0450cd1c681201ebc5fd9de26a64", "committedDate": "2020-03-23T11:39:48Z", "message": "catch IllegalArgumentException"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a2dcc4a801dd7a4cc551ba27be66806bd71c6cff", "author": {"user": {"login": "vladak", "name": "Vladimir Kotal"}}, "url": "https://github.com/oracle/opengrok/commit/a2dcc4a801dd7a4cc551ba27be66806bd71c6cff", "committedDate": "2020-03-23T10:02:46Z", "message": "catch IllegalArgumentException"}, "afterCommit": {"oid": "8bdb39a44e9d0450cd1c681201ebc5fd9de26a64", "author": {"user": {"login": "vladak", "name": "Vladimir Kotal"}}, "url": "https://github.com/oracle/opengrok/commit/8bdb39a44e9d0450cd1c681201ebc5fd9de26a64", "committedDate": "2020-03-23T11:39:48Z", "message": "catch IllegalArgumentException"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 309, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}