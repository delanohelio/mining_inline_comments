{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgwMzQwMjIx", "number": 3214, "title": "Detect if add() is called while complete() is running", "bodyText": "This will detect the bizarre situation where add() is called while complete() is running, per my wild theory re #3210.", "createdAt": "2020-09-05T01:09:19Z", "url": "https://github.com/oracle/opengrok/pull/3214", "merged": true, "mergeCommit": {"oid": "112419ef444792539909442eac238b1293734d71"}, "closed": true, "closedAt": "2020-09-11T06:51:45Z", "author": {"login": "idodeclare"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdF0gb-gFqTQ4MzAzNzE4MA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdHpdXIgBqjM3NTM1OTQzMDU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzMDM3MTgw", "url": "https://github.com/oracle/opengrok/pull/3214#pullrequestreview-483037180", "createdAt": "2020-09-05T07:17:20Z", "commit": {"oid": "e4a38d327b6810baca52c5a0b56069634c64466f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNVQwNzoxNzoyMVrOHNgPLg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNVQwNzoxNzoyMVrOHNgPLg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzkyMTcxMA==", "bodyText": "use some more descriptive name ?", "url": "https://github.com/oracle/opengrok/pull/3214#discussion_r483921710", "createdAt": "2020-09-05T07:17:21Z", "author": {"login": "vladak"}, "path": "opengrok-indexer/src/main/java/org/opengrok/indexer/index/PendingFileCompleter.java", "diffHunk": "@@ -171,6 +185,15 @@ public boolean add(PendingFileRenaming e) {\n      * @throws java.io.IOException if an I/O error occurs\n      */\n     public int complete() throws IOException {\n+        completing = true;\n+        try {\n+            return complete2();\n+        } finally {\n+            completing = false;\n+        }\n+    }\n+\n+    private int complete2() throws IOException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e4a38d327b6810baca52c5a0b56069634c64466f"}, "originalPosition": 71}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "41202e26ee5216d426e0c6d5b6128dbcdf8d6e3e", "author": {"user": {"login": "idodeclare", "name": "C Fraire"}}, "url": "https://github.com/oracle/opengrok/commit/41202e26ee5216d426e0c6d5b6128dbcdf8d6e3e", "committedDate": "2020-09-10T23:32:43Z", "message": "Detect if add() is called while complete() is running"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e4a38d327b6810baca52c5a0b56069634c64466f", "author": {"user": {"login": "idodeclare", "name": "C Fraire"}}, "url": "https://github.com/oracle/opengrok/commit/e4a38d327b6810baca52c5a0b56069634c64466f", "committedDate": "2020-09-04T23:47:44Z", "message": "Detect if add() is called while complete() is running"}, "afterCommit": {"oid": "41202e26ee5216d426e0c6d5b6128dbcdf8d6e3e", "author": {"user": {"login": "idodeclare", "name": "C Fraire"}}, "url": "https://github.com/oracle/opengrok/commit/41202e26ee5216d426e0c6d5b6128dbcdf8d6e3e", "committedDate": "2020-09-10T23:32:43Z", "message": "Detect if add() is called while complete() is running"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 188, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}