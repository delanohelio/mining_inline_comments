{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEzODQwMDQ1", "number": 3139, "title": "Fix #3078 : record user intent for projects", "bodyText": "Hello,\nPlease consider for integration this patch that tracks user intent on the search window so that a user who removes all projects or clears the project selection ends up doing a search against zero projects instead of unexpectedly reviving the project list from cookies in that case.\nAlso this patch adds options to searchable-option-list-XXX.js to avoid hard-coding OpenGrok-specific elements. This should allow upstreaming OpenGrok updates.\nThank you.", "createdAt": "2020-05-06T02:06:08Z", "url": "https://github.com/oracle/opengrok/pull/3139", "merged": true, "mergeCommit": {"oid": "52d5543f19947b0545ca49c96b5cdcdeb516ac77"}, "closed": true, "closedAt": "2020-06-10T19:07:07Z", "author": {"login": "idodeclare"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcemI3OgFqTQwNjQ4NTE0MA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABce_LzHgFqTQwNzU5ODg1NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA2NDg1MTQw", "url": "https://github.com/oracle/opengrok/pull/3139#pullrequestreview-406485140", "createdAt": "2020-05-06T10:29:12Z", "commit": {"oid": "6cc55e3b857cb42ed0ddcecd2576f9e4dbf09828"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxMDoyOToxMlrOGRM3Vw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxMDoyOToxMlrOGRM3Vw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY4OTc1MQ==", "bodyText": "I saw the original author using\n$.isFunction(this.config.events.onChange)\nis it worth to keep it consistent?", "url": "https://github.com/oracle/opengrok/pull/3139#discussion_r420689751", "createdAt": "2020-05-06T10:29:12Z", "author": {"login": "tulinkry"}, "path": "opengrok-web/src/main/webapp/js/searchable-option-list-2.0.13.js", "diffHunk": "@@ -1093,9 +1097,14 @@\n                         /*\n                          * Modified for OpenGrok in 2017.\n                          */\n-                        if (isOnSearchPage()) {\n-                            $('#xrd').val(\"1\"); // no redirect\n-                            $('#sbox').submit();\n+                        if (self.config.quickDeleteForm) {\n+                            if (self.config.quickDeletePermit) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6cc55e3b857cb42ed0ddcecd2576f9e4dbf09828"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA2ODQ0MDMz", "url": "https://github.com/oracle/opengrok/pull/3139#pullrequestreview-406844033", "createdAt": "2020-05-06T17:42:58Z", "commit": {"oid": "6cc55e3b857cb42ed0ddcecd2576f9e4dbf09828"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxNzo0Mjo1OFrOGReP4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxNzo0MzozM1rOGReRWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDk3NDU2MQ==", "bodyText": "I mean that lower below this code the original author wrote a check for function existence like\n                if ($.isFunction(this.config.events.onChange)) {\n                    this.config.events.onChange.call(this, this, $changedInputs);\n                }\n\nso perhaps we want to use it as well like\nif ($.isFunction(self.config.quickDeletePermit))\n\nto be consistent with the author's style", "url": "https://github.com/oracle/opengrok/pull/3139#discussion_r420974561", "createdAt": "2020-05-06T17:42:58Z", "author": {"login": "tulinkry"}, "path": "opengrok-web/src/main/webapp/js/searchable-option-list-2.0.13.js", "diffHunk": "@@ -1093,9 +1097,14 @@\n                         /*\n                          * Modified for OpenGrok in 2017.\n                          */\n-                        if (isOnSearchPage()) {\n-                            $('#xrd').val(\"1\"); // no redirect\n-                            $('#sbox').submit();\n+                        if (self.config.quickDeleteForm) {\n+                            if (self.config.quickDeletePermit) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY4OTc1MQ=="}, "originalCommit": {"oid": "6cc55e3b857cb42ed0ddcecd2576f9e4dbf09828"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDk3NDkzNg==", "bodyText": "why is this no longer needed?", "url": "https://github.com/oracle/opengrok/pull/3139#discussion_r420974936", "createdAt": "2020-05-06T17:43:33Z", "author": {"login": "tulinkry"}, "path": "opengrok-indexer/src/main/java/org/opengrok/indexer/web/PageConfig.java", "diffHunk": "@@ -923,10 +923,6 @@ private static void splitByComma(String value, List<String> result) {\n         TreeSet<String> projectNames = new TreeSet<>();\n         List<Project> projects = getEnv().getProjectList();\n \n-        if (projects == null) {\n-            return projectNames;\n-        }\n-", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6cc55e3b857cb42ed0ddcecd2576f9e4dbf09828"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "72b8f04341673cb8dfecb6729b5a5fe7f3b8849f", "author": {"user": {"login": "idodeclare", "name": "C Fraire"}}, "url": "https://github.com/oracle/opengrok/commit/72b8f04341673cb8dfecb6729b5a5fe7f3b8849f", "committedDate": "2020-05-06T18:54:01Z", "message": "Fix #3078 : record user intent for projects\n\nAvoids the issue of a user interacting in the\nbrowser to ultimately select zero projects but\nthen reviving the project list from cookies.\n\nAlso add options to SOL instead of hard-coding\nOpenGrok-specific elements."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6cc55e3b857cb42ed0ddcecd2576f9e4dbf09828", "author": {"user": {"login": "idodeclare", "name": "C Fraire"}}, "url": "https://github.com/oracle/opengrok/commit/6cc55e3b857cb42ed0ddcecd2576f9e4dbf09828", "committedDate": "2020-05-06T02:01:30Z", "message": "Fix #3078 : record user intent for projects\n\nAvoids the issue of a user interacting in the\nbrowser to ultimately select zero projects but\nthen reviving the project list from cookies.\n\nAlso add options to SOL instead of hard-coding\nOpenGrok-specific elements."}, "afterCommit": {"oid": "72b8f04341673cb8dfecb6729b5a5fe7f3b8849f", "author": {"user": {"login": "idodeclare", "name": "C Fraire"}}, "url": "https://github.com/oracle/opengrok/commit/72b8f04341673cb8dfecb6729b5a5fe7f3b8849f", "committedDate": "2020-05-06T18:54:01Z", "message": "Fix #3078 : record user intent for projects\n\nAvoids the issue of a user interacting in the\nbrowser to ultimately select zero projects but\nthen reviving the project list from cookies.\n\nAlso add options to SOL instead of hard-coding\nOpenGrok-specific elements."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA3NTk4ODU0", "url": "https://github.com/oracle/opengrok/pull/3139#pullrequestreview-407598854", "createdAt": "2020-05-07T15:40:43Z", "commit": {"oid": "72b8f04341673cb8dfecb6729b5a5fe7f3b8849f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 150, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}