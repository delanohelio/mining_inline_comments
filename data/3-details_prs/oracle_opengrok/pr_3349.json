{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE0NTU3Njkz", "number": 3349, "title": "make ProjectsController API calls using suggester async", "bodyText": "This change removes unnecessary Counter and making the API calls to spawn a thread when calling into suggester.\nThe change merely changes the behavior of the API calls. In terms of #3347 it actually makes the situation worse since there will be more threads created.", "createdAt": "2020-11-03T08:05:40Z", "url": "https://github.com/oracle/opengrok/pull/3349", "merged": true, "mergeCommit": {"oid": "a47bfb6c95f884325dc7c9b13c584d2613340950"}, "closed": true, "closedAt": "2020-11-04T09:30:06Z", "author": {"login": "vladak"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdY0Zl1AH2gAyNTE0NTU3NjkzOmFmYTUwMzBhMWUyZWM3ZjIyMGU0NDBlMjc2ZWU2NzllZGQ4ZTNhMmU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdZKQ6eAFqTUyMzE3NTIxOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "afa5030a1e2ec7f220e440e276ee679edd8e3a2e", "author": {"user": {"login": "vladak", "name": "Vladimir Kotal"}}, "url": "https://github.com/oracle/opengrok/commit/afa5030a1e2ec7f220e440e276ee679edd8e3a2e", "committedDate": "2020-11-03T07:54:26Z", "message": "remove the counter, the count is already tracked by the timers"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9d1f790a9db39b6d184d7217c607a352a4587e0b", "author": {"user": {"login": "vladak", "name": "Vladimir Kotal"}}, "url": "https://github.com/oracle/opengrok/commit/9d1f790a9db39b6d184d7217c607a352a4587e0b", "committedDate": "2020-11-03T07:57:37Z", "message": "endpoints calling into suggester should spawn a thread to become asynchronous"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8a4d2efbf33ee94e92cf496ecce4fc89f33a5cba", "author": {"user": {"login": "vladak", "name": "Vladimir Kotal"}}, "url": "https://github.com/oracle/opengrok/commit/8a4d2efbf33ee94e92cf496ecce4fc89f33a5cba", "committedDate": "2020-11-03T08:18:14Z", "message": "remove unused import"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIzMTQ0MDky", "url": "https://github.com/oracle/opengrok/pull/3349#pullrequestreview-523144092", "createdAt": "2020-11-04T08:43:20Z", "commit": {"oid": "8a4d2efbf33ee94e92cf496ecce4fc89f33a5cba"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQwODo0MzoyMFrOHtODBA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQwODo0MzoyMFrOHtODBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzE3ODExNg==", "bodyText": "you could use CompletableFuture.runAsync to possibly reuse resources", "url": "https://github.com/oracle/opengrok/pull/3349#discussion_r517178116", "createdAt": "2020-11-04T08:43:20Z", "author": {"login": "tulinkry"}, "path": "opengrok-web/src/main/java/org/opengrok/web/api/v1/controller/ProjectsController.java", "diffHunk": "@@ -206,7 +206,7 @@ public void deleteProjectData(@PathParam(\"project\") String projectName) throws H\n         deleteHistoryCache(projectName);\n \n         // Delete suggester data.\n-        suggester.delete(projectName);\n+        new Thread(() -> suggester.delete(projectName)).start();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8a4d2efbf33ee94e92cf496ecce4fc89f33a5cba"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b0c52f6c04025cc907f59e87d5d27f7aadfa993", "author": {"user": {"login": "vladak", "name": "Vladimir Kotal"}}, "url": "https://github.com/oracle/opengrok/commit/5b0c52f6c04025cc907f59e87d5d27f7aadfa993", "committedDate": "2020-11-04T08:54:10Z", "message": "use CompletableFuture.runAsync()"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "109a194d760d80fa9084ba2eaeff4734a2063815", "author": {"user": {"login": "vladak", "name": "Vladimir Kotal"}}, "url": "https://github.com/oracle/opengrok/commit/109a194d760d80fa9084ba2eaeff4734a2063815", "committedDate": "2020-11-04T08:54:34Z", "message": "bump year"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIzMTc0NzI1", "url": "https://github.com/oracle/opengrok/pull/3349#pullrequestreview-523174725", "createdAt": "2020-11-04T09:22:16Z", "commit": {"oid": "109a194d760d80fa9084ba2eaeff4734a2063815"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIzMTc1MjE4", "url": "https://github.com/oracle/opengrok/pull/3349#pullrequestreview-523175218", "createdAt": "2020-11-04T09:22:52Z", "commit": {"oid": "109a194d760d80fa9084ba2eaeff4734a2063815"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 118, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}