{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA5ODg2NDQw", "number": 3317, "title": "handle some exceptions related to path descriptions", "bodyText": "This change adds handling of IOException from EftarFileReader#getNode() to avoid UI disruption when the dtags.eftar file has unexpected contents.", "createdAt": "2020-10-26T09:11:48Z", "url": "https://github.com/oracle/opengrok/pull/3317", "merged": true, "mergeCommit": {"oid": "245be03e4748362493fdd92db5edf86e425ace60"}, "closed": true, "closedAt": "2020-10-26T15:05:53Z", "author": {"login": "vladak"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdWQhkbgH2gAyNTA5ODg2NDQwOmU1NzNiYjRhZTA3NDg0NzA4OWZiZjgzOGM1MDJhYzRiMTA1OGVkNTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdWVmCDgH2gAyNTA5ODg2NDQwOmU0NzI0ZGUzOTg1ZGZkZWRkZGJmNTk0YTZhMjNmYjUzZWZlNGY5MTY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e573bb4ae074847089fbf838c502ac4b1058ed56", "author": {"user": {"login": "vladak", "name": "Vladimir Kotal"}}, "url": "https://github.com/oracle/opengrok/commit/e573bb4ae074847089fbf838c502ac4b1058ed56", "committedDate": "2020-10-26T08:58:43Z", "message": "try with resources"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "07eb0018b0bbd68e68a538ed2cf5dda9c9f79635", "author": {"user": {"login": "vladak", "name": "Vladimir Kotal"}}, "url": "https://github.com/oracle/opengrok/commit/07eb0018b0bbd68e68a538ed2cf5dda9c9f79635", "committedDate": "2020-10-26T08:59:14Z", "message": "handle exceptions from EftarFileReader#getNode() in extraListTo()\n\nfixes #3316"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e82dcfd66c4f44d7ea95750e0465af441a2a4cb", "author": {"user": {"login": "vladak", "name": "Vladimir Kotal"}}, "url": "https://github.com/oracle/opengrok/commit/4e82dcfd66c4f44d7ea95750e0465af441a2a4cb", "committedDate": "2020-10-26T09:19:06Z", "message": "add test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE2ODIyOTQ4", "url": "https://github.com/oracle/opengrok/pull/3317#pullrequestreview-516822948", "createdAt": "2020-10-26T14:18:18Z", "commit": {"oid": "4e82dcfd66c4f44d7ea95750e0465af441a2a4cb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNDoxODoxOFrOHoRqQQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNDoxODoxOFrOHoRqQQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTk5NDQzMw==", "bodyText": "The test looks weird without any assertion. It's not clear what is being tested. I'd definitely welcome a comment. I don't know of a nice way how to express in JUnit that the code should not throw an exception. I guess it's implied :D", "url": "https://github.com/oracle/opengrok/pull/3317#discussion_r511994433", "createdAt": "2020-10-26T14:18:18Z", "author": {"login": "ahornace"}, "path": "opengrok-web/src/test/java/org/opengrok/web/DirectoryListingTest.java", "diffHunk": "@@ -365,4 +373,14 @@ public void directoryListing() throws Exception {\n             validateEntry((Element) nl.item(i));\n         }\n     }\n+\n+    @Test\n+    public void directoryListingWithEftarException() throws IOException, HistoryException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4e82dcfd66c4f44d7ea95750e0465af441a2a4cb"}, "originalPosition": 40}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "48964303d46940b6e9b20fb0ba71525dcdf3aba3", "author": {"user": {"login": "vladak", "name": "Vladimir Kotal"}}, "url": "https://github.com/oracle/opengrok/commit/48964303d46940b6e9b20fb0ba71525dcdf3aba3", "committedDate": "2020-10-26T14:44:57Z", "message": "add verify()"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "932bd238d11b61b8e1e7cd3a9d966dc8487a2439", "author": {"user": {"login": "vladak", "name": "Vladimir Kotal"}}, "url": "https://github.com/oracle/opengrok/commit/932bd238d11b61b8e1e7cd3a9d966dc8487a2439", "committedDate": "2020-10-26T14:46:12Z", "message": "bump the count"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE2ODU1Mzkx", "url": "https://github.com/oracle/opengrok/pull/3317#pullrequestreview-516855391", "createdAt": "2020-10-26T14:48:45Z", "commit": {"oid": "932bd238d11b61b8e1e7cd3a9d966dc8487a2439"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNDo0ODo0NVrOHoTJIQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNDo0ODo0NVrOHoTJIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjAxODcyMQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    verify(mockWriter, atLeast(20)). write(anyString());\n          \n          \n            \n                    verify(mockWriter, atLeast(20)).write(anyString());", "url": "https://github.com/oracle/opengrok/pull/3317#discussion_r512018721", "createdAt": "2020-10-26T14:48:45Z", "author": {"login": "ahornace"}, "path": "opengrok-web/src/test/java/org/opengrok/web/DirectoryListingTest.java", "diffHunk": "@@ -365,4 +372,16 @@ public void directoryListing() throws Exception {\n             validateEntry((Element) nl.item(i));\n         }\n     }\n+\n+    @Test\n+    public void directoryListingWithEftarException() throws IOException, HistoryException {\n+        EftarFileReader mockReader = mock(EftarFileReader.class);\n+        when(mockReader.getNode(anyString())).thenThrow(IOException.class);\n+        DirectoryListing instance = new DirectoryListing(mockReader);\n+        File file = new File(directory, \"foo\");\n+        StringWriter mockWriter = spy(StringWriter.class);\n+        instance.extraListTo(\"ctx\", directory, mockWriter, directory.getPath(),\n+                Collections.singletonList(new DirectoryEntry(file)));\n+        verify(mockWriter, atLeast(20)). write(anyString());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "932bd238d11b61b8e1e7cd3a9d966dc8487a2439"}, "originalPosition": 47}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE2ODU1ODI3", "url": "https://github.com/oracle/opengrok/pull/3317#pullrequestreview-516855827", "createdAt": "2020-10-26T14:49:06Z", "commit": {"oid": "932bd238d11b61b8e1e7cd3a9d966dc8487a2439"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "659af3879560aee5b960d569a922423c2ca420e5", "author": {"user": {"login": "vladak", "name": "Vladimir Kotal"}}, "url": "https://github.com/oracle/opengrok/commit/659af3879560aee5b960d569a922423c2ca420e5", "committedDate": "2020-10-26T14:50:54Z", "message": "remove extra space"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE2ODU3OTI3", "url": "https://github.com/oracle/opengrok/pull/3317#pullrequestreview-516857927", "createdAt": "2020-10-26T14:50:55Z", "commit": {"oid": "932bd238d11b61b8e1e7cd3a9d966dc8487a2439"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e4724de3985dfdedddbf594a6a23fb53efe4f916", "author": {"user": {"login": "vladak", "name": "Vladimir Kotal"}}, "url": "https://github.com/oracle/opengrok/commit/e4724de3985dfdedddbf594a6a23fb53efe4f916", "committedDate": "2020-10-26T14:53:07Z", "message": "avoid wildcard imports"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 257, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}