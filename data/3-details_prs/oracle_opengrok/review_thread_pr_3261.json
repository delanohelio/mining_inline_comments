{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk3NzQ0OTE3", "number": 3261, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxMzo1NDoyMlrOEqVDyA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxMzo1NjoxM1rOEqVG9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEyODIwNjgwOnYy", "diffSide": "LEFT", "path": "opengrok-indexer/src/main/java/org/opengrok/indexer/history/HistoryGuru.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxMzo1NDoyMlrOHceKhw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxNDoxOTowN1rOHcfN5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTYxNjM5MQ==", "bodyText": ":(", "url": "https://github.com/oracle/opengrok/pull/3261#discussion_r499616391", "createdAt": "2020-10-05T13:54:22Z", "author": {"login": "tulinkry"}, "path": "opengrok-indexer/src/main/java/org/opengrok/indexer/history/HistoryGuru.java", "diffHunk": "@@ -731,24 +729,16 @@ public void ensureHistoryCacheExists(File file) throws HistoryException {\n \n         Repository repository = getRepository(file);\n         if (repository == null) {\n-            // no repository -> no history :(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1e03c471c766ae1b0fdd4455b5b458e9f09d785b"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTYzMzYzNw==", "bodyText": "depends on point of view I guess. Also, emojis are now the cool thing to have in (UTF-8 encoded) source code.", "url": "https://github.com/oracle/opengrok/pull/3261#discussion_r499633637", "createdAt": "2020-10-05T14:19:07Z", "author": {"login": "vladak"}, "path": "opengrok-indexer/src/main/java/org/opengrok/indexer/history/HistoryGuru.java", "diffHunk": "@@ -731,24 +729,16 @@ public void ensureHistoryCacheExists(File file) throws HistoryException {\n \n         Repository repository = getRepository(file);\n         if (repository == null) {\n-            // no repository -> no history :(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTYxNjM5MQ=="}, "originalCommit": {"oid": "1e03c471c766ae1b0fdd4455b5b458e9f09d785b"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEyODIxNDk0OnYy", "diffSide": "LEFT", "path": "opengrok-indexer/src/main/java/org/opengrok/indexer/history/HistoryGuru.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxMzo1NjoxM1rOHcePjw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxNDoyMDoyMVrOHcfRZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTYxNzY3OQ==", "bodyText": "but what if it has history but for older revision?", "url": "https://github.com/oracle/opengrok/pull/3261#discussion_r499617679", "createdAt": "2020-10-05T13:56:13Z", "author": {"login": "tulinkry"}, "path": "opengrok-indexer/src/main/java/org/opengrok/indexer/history/HistoryGuru.java", "diffHunk": "@@ -731,24 +729,16 @@ public void ensureHistoryCacheExists(File file) throws HistoryException {\n \n         Repository repository = getRepository(file);\n         if (repository == null) {\n-            // no repository -> no history :(\n+            // no repository -> no history\n             return;\n         }\n \n-        String sinceRevision = null;\n-\n-        if (historyCache.hasCacheForDirectory(file, repository)) {\n-            sinceRevision = historyCache.getLatestCachedRevision(repository);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1e03c471c766ae1b0fdd4455b5b458e9f09d785b"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTYzNDUzNA==", "bodyText": "That would fall through. However I think this is not the place to catch this.", "url": "https://github.com/oracle/opengrok/pull/3261#discussion_r499634534", "createdAt": "2020-10-05T14:20:21Z", "author": {"login": "vladak"}, "path": "opengrok-indexer/src/main/java/org/opengrok/indexer/history/HistoryGuru.java", "diffHunk": "@@ -731,24 +729,16 @@ public void ensureHistoryCacheExists(File file) throws HistoryException {\n \n         Repository repository = getRepository(file);\n         if (repository == null) {\n-            // no repository -> no history :(\n+            // no repository -> no history\n             return;\n         }\n \n-        String sinceRevision = null;\n-\n-        if (historyCache.hasCacheForDirectory(file, repository)) {\n-            sinceRevision = historyCache.getLatestCachedRevision(repository);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTYxNzY3OQ=="}, "originalCommit": {"oid": "1e03c471c766ae1b0fdd4455b5b458e9f09d785b"}, "originalPosition": 23}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4975, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}