{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY5NjQxMTYz", "number": 3031, "title": "use kwargs in get_repository(), get_repos_for_project()", "bodyText": "This is a follow-up to #3025, making the changes suggested by @ericsaintetienne and adding better tests.", "createdAt": "2020-01-31T15:41:34Z", "url": "https://github.com/oracle/opengrok/pull/3031", "merged": true, "mergeCommit": {"oid": "a8b461b6380ba8c585643d29a34d9d0ccf0a0fde"}, "closed": true, "closedAt": "2020-02-06T14:38:49Z", "author": {"login": "vladak"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb_wVNXAH2gAyMzY5NjQxMTYzOjVhYmI3YTYxNjMzYzk2YWQ3NWIxZmRhMzlkZjg5ZDViMmYyMGZiZWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcApFOlAH2gAyMzY5NjQxMTYzOjYyOWFkNzIzNzNhZWIxMGUzOWMxYTE2M2E0NDIxNDBjMTU0MmQ3Nzc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5abb7a61633c96ad75b1fda39df89d5b2f20fbed", "author": {"user": {"login": "vladak", "name": "Vladimir Kotal"}}, "url": "https://github.com/oracle/opengrok/commit/5abb7a61633c96ad75b1fda39df89d5b2f20fbed", "committedDate": "2020-01-31T14:50:46Z", "message": "fix get_repos() pydoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f6d7e1fa2a2b367aaea0d78577d68dfa26e4b38d", "author": {"user": {"login": "vladak", "name": "Vladimir Kotal"}}, "url": "https://github.com/oracle/opengrok/commit/f6d7e1fa2a2b367aaea0d78577d68dfa26e4b38d", "committedDate": "2020-01-31T14:52:35Z", "message": "make get_repos_for_project(), get_repository use kwargs\n\nadd tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "52d1916b52dc93847789f22f0361c09e1acc28b5", "author": {"user": {"login": "vladak", "name": "Vladimir Kotal"}}, "url": "https://github.com/oracle/opengrok/commit/52d1916b52dc93847789f22f0361c09e1acc28b5", "committedDate": "2020-01-31T15:29:53Z", "message": "fix style"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "50197fb0d38d8cf3727857efae364f907325c70b", "author": {"user": {"login": "vladak", "name": "Vladimir Kotal"}}, "url": "https://github.com/oracle/opengrok/commit/50197fb0d38d8cf3727857efae364f907325c70b", "committedDate": "2020-01-31T15:30:11Z", "message": "add the actual assertions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d45ddffda90931fd2023b32d7ce85bbde88841f5", "author": {"user": {"login": "vladak", "name": "Vladimir Kotal"}}, "url": "https://github.com/oracle/opengrok/commit/d45ddffda90931fd2023b32d7ce85bbde88841f5", "committedDate": "2020-01-31T15:37:22Z", "message": "compare dictionaries properly"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxNTk0ODcz", "url": "https://github.com/oracle/opengrok/pull/3031#pullrequestreview-351594873", "createdAt": "2020-01-31T15:47:04Z", "commit": {"oid": "d45ddffda90931fd2023b32d7ce85bbde88841f5"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMVQxNTo0NzowNVrOFkPfdw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMVQxNTo0OTowN1rOFkPjdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzU0Njg3MQ==", "bodyText": "That only works with orderable dictionnaries which are a feature of python 3.6+\nJust checking you're sure that nobody will use an earlier version (it will likely fail if that were the case)", "url": "https://github.com/oracle/opengrok/pull/3031#discussion_r373546871", "createdAt": "2020-01-31T15:47:05Z", "author": {"login": "eric-saintetienne"}, "path": "opengrok-tools/src/test/python/test_mirror.py", "diffHunk": "@@ -318,7 +319,7 @@ def mock_get_repo_type(*args):\n             git_repo = repos[0]\n             assert git_repo.timeout == timeout\n             assert git_repo.command == git_cmd_path\n-            assert git_repo.env == proxy_dict  # XXX contains\n+            assert git_repo.env.items() >= proxy_dict.items()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d45ddffda90931fd2023b32d7ce85bbde88841f5"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzU0Nzg5Mg==", "bodyText": "Personally I would swap lines 317 and 318, that is to say first assign repos[0] to git_repo and then assert ...(git_repo,...), it looks neater this way round but that's just my preference.", "url": "https://github.com/oracle/opengrok/pull/3031#discussion_r373547892", "createdAt": "2020-01-31T15:49:07Z", "author": {"login": "eric-saintetienne"}, "path": "opengrok-tools/src/test/python/test_mirror.py", "diffHunk": "@@ -311,11 +313,14 @@ def mock_get_repo_type(*args):\n                                           commands=commands,\n                                           proxy=proxy_dict,\n                                           command_timeout=timeout)\n-            print(repos)\n             assert len(repos) == 1\n+            assert isinstance(repos[0], GitRepository)\n+            git_repo = repos[0]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "50197fb0d38d8cf3727857efae364f907325c70b"}, "originalPosition": 25}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9794cbbd47d8cdbd3969ca54ba180be3ff56ce26", "author": {"user": {"login": "vladak", "name": "Vladimir Kotal"}}, "url": "https://github.com/oracle/opengrok/commit/9794cbbd47d8cdbd3969ca54ba180be3ff56ce26", "committedDate": "2020-02-03T08:56:06Z", "message": "fix comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "629ad72373aeb10e39c1a163a442140c1542d777", "author": {"user": {"login": "vladak", "name": "Vladimir Kotal"}}, "url": "https://github.com/oracle/opengrok/commit/629ad72373aeb10e39c1a163a442140c1542d777", "committedDate": "2020-02-03T08:57:54Z", "message": "mention the Python 3.6 requirement"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 274, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}