{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAyMjA0ODkw", "number": 3487, "title": "[bitmex, core] Improved getFundingRecordHistory of BitMEX", "bodyText": "Added support for paging through results\n\n\nCreated adapter methods to remove redundant mapping of \"BTC/XBT\" to \"XBt\" and vice versa.\n\n\nAdded support for additional FundingRecord.Types: REALISED_PROFIT and REALISED_LOSS, which is kind of a interest you get from your futures and is added to or subtracted form your balance\n\n\nCorrected the parsing of the Timestamp", "createdAt": "2020-04-11T15:23:56Z", "url": "https://github.com/knowm/XChange/pull/3487", "merged": true, "mergeCommit": {"oid": "b35eebacf7960674d8ec318433928942f1d24864"}, "closed": true, "closedAt": "2020-04-19T11:21:58Z", "author": {"login": "Yampersand"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcWk_rSgH2gAyNDAyMjA0ODkwOjg3ZjQ1MWUxZTY4ZWMzNmM4ZjU2Y2JjMGNlNTY4NGVmYWYyMDMyMGU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcYx0wNAH2gAyNDAyMjA0ODkwOjgwMTRiOTUwNGU4ODExYTE3NWJlZDVlYzUwNmJkNTRmODc4Y2NiMjc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "87f451e1e68ec36c8f56cbc0ce5684efaf20320e", "author": {"user": {"login": "Yampersand", "name": "Jan Handrich"}}, "url": "https://github.com/knowm/XChange/commit/87f451e1e68ec36c8f56cbc0ce5684efaf20320e", "committedDate": "2020-04-11T12:38:33Z", "message": "[bitmex] Support paging form FundingRecords"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "97e0fe46d6c34719a573760b83c978caea42e665", "author": {"user": {"login": "Yampersand", "name": "Jan Handrich"}}, "url": "https://github.com/knowm/XChange/commit/97e0fe46d6c34719a573760b83c978caea42e665", "committedDate": "2020-04-11T12:40:19Z", "message": "[bitmex] Replaced multiple currency adaptions with adapter method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "905a114ae8c9cf2b4836e40918bfeedcf72f6b18", "author": {"user": {"login": "Yampersand", "name": "Jan Handrich"}}, "url": "https://github.com/knowm/XChange/commit/905a114ae8c9cf2b4836e40918bfeedcf72f6b18", "committedDate": "2020-04-11T15:07:20Z", "message": "[core] Added missing FundingRecord.Types"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9dbf5bae574db6f107660ee106839a757359638c", "author": {"user": {"login": "Yampersand", "name": "Jan Handrich"}}, "url": "https://github.com/knowm/XChange/commit/9dbf5bae574db6f107660ee106839a757359638c", "committedDate": "2020-04-11T15:09:04Z", "message": "[bitmex] Improved getFundingHistory to include all types and status"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2872f45c17f42be313fb79513862983b63fb001f", "author": {"user": {"login": "Yampersand", "name": "Jan Handrich"}}, "url": "https://github.com/knowm/XChange/commit/2872f45c17f42be313fb79513862983b63fb001f", "committedDate": "2020-04-11T16:06:00Z", "message": "[bitmex] Corrected parsing of FundingRecord timestamp"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a02916f1417fb3da79d3ae1639c990e5ac0f263b", "author": {"user": {"login": "Yampersand", "name": "Jan Handrich"}}, "url": "https://github.com/knowm/XChange/commit/a02916f1417fb3da79d3ae1639c990e5ac0f263b", "committedDate": "2020-04-11T17:38:52Z", "message": "[core] Fixed Type in new Type"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk0MzgzMjE2", "url": "https://github.com/knowm/XChange/pull/3487#pullrequestreview-394383216", "createdAt": "2020-04-16T07:54:42Z", "commit": {"oid": "a02916f1417fb3da79d3ae1639c990e5ac0f263b"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQwNzo1NDo0MlrOGGZAGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQwNzo1Nzo1OFrOGGZIaw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTM1NDI2Ng==", "bodyText": "we could just use Date instead of String for the WalletTransaction#transactTime attribute and proper Jackson annotations to make Jackson parse this", "url": "https://github.com/knowm/XChange/pull/3487#discussion_r409354266", "createdAt": "2020-04-16T07:54:42Z", "author": {"login": "walec51"}, "path": "xchange-bitmex/src/main/java/org/knowm/xchange/bitmex/BitmexAdapters.java", "diffHunk": "@@ -352,37 +372,58 @@ private static OrderType convertType(String side) {\n   public static FundingRecord adaptFundingRecord(BitmexWalletTransaction walletTransaction) {\n \n     String datePattern = \"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'\";\n-\n     SimpleDateFormat dateFormat = new SimpleDateFormat(datePattern);\n-    Date dateFunding = null;\n+    dateFormat.setTimeZone(TimeZone.getTimeZone(\"UTC\"));\n \n-    try {\n-      dateFunding = dateFormat.parse(walletTransaction.getTransactTime());\n-    } catch (ParseException e) {\n-      throw new IllegalArgumentException(e);\n+    Date dateFunding = null;\n+    if (walletTransaction.getTransactTime() != null) {\n+      try {\n+        dateFunding = dateFormat.parse(walletTransaction.getTransactTime());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a02916f1417fb3da79d3ae1639c990e5ac0f263b"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTM1NjM5NQ==", "bodyText": "is this something that exists on many exchanges with derivatives or is it something specific to bitmex?\ncould you provide an example of another exchange that has a similar type in its API?", "url": "https://github.com/knowm/XChange/pull/3487#discussion_r409356395", "createdAt": "2020-04-16T07:57:58Z", "author": {"login": "walec51"}, "path": "xchange-core/src/main/java/org/knowm/xchange/dto/account/FundingRecord.java", "diffHunk": "@@ -304,7 +304,13 @@ public String toString() {\n     INTERNAL_WITHDRAWAL(false),\n \n     /** Used for transfers between exchanges accounts */\n-    INTERNAL_DEPOSIT(true);\n+    INTERNAL_DEPOSIT(true),\n+\n+    /** Used for realised losses from derivatives */\n+    REALISED_LOSS(false),\n+\n+    /** Used for realised profits from derivatives */\n+    REALISED_PROFIT(true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a02916f1417fb3da79d3ae1639c990e5ac0f263b"}, "originalPosition": 11}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8014b9504e8811a175bed5ec506bd54f878ccb27", "author": {"user": {"login": "Yampersand", "name": "Jan Handrich"}}, "url": "https://github.com/knowm/XChange/commit/8014b9504e8811a175bed5ec506bd54f878ccb27", "committedDate": "2020-04-18T08:43:14Z", "message": "[bitmex] Improved JSON deserializaion"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2548, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}