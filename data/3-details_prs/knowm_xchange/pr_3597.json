{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ1Mzg3Nzc5", "number": 3597, "title": "[core]Proposal for instrument enhancements and FuturesContract", "bodyText": "We are trying to implement the kraken futures and binance futures APIs. While implementing the *Raw services is straight forward, we are struggling with the non-*Raw services.\nFor some of those challenges this pull request offers solutions:\n\n\nsome DTOs were still accepting only CurrencyPair, those now support Instrument\n\n\nsome service methods accept only CurrencyPair, those now accept neutral Params\n\n\nThere was no OpenPositions method: I added it to AccountInfo, because from our point of view a open positions is quite similar to a balance.\n\n\nI added some interfaces and implementations for *InstrumentParam classes toi mirror existing *CurrencyPairParam classes\n\n\nI added a proposal for a FuturesContract, but I'm not very confided that it is already in a state to be used universally like CurrencyPair. As far as I can evaluate it, it is good enough for our use cases.\n\n\nThis proposal does not include any code for an equivalent of CurrencyPairMetaData for Instruments or FuturesContracts. I tried a couple of different approaches to make the Exchange and/ or CurrencyPairMetaData generic but I was not successful without breaking the current API-Interface.\nSo I' m very open to ideas how to deal with ExchangeMetaData. As far as I can see, that's the last building block preventing us to  implement the futures APIs for Kraken and Binance.\nWith this proposal I tried to stick closely to the discussion in #3171. My FuturesContract is inspired by #3461", "createdAt": "2020-07-07T12:42:58Z", "url": "https://github.com/knowm/XChange/pull/3597", "merged": true, "mergeCommit": {"oid": "c1268c27defa3ba83c5a39675c53713b6e199302"}, "closed": true, "closedAt": "2020-07-20T19:18:07Z", "author": {"login": "Yampersand"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcykN77AH2gAyNDQ1Mzg3Nzc5OmJjZDM1YTEwNDEwMTI5OGVjNzg1M2NmMDMyY2MyOGQyZDk4MjA5ZTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc2s3hyAH2gAyNDQ1Mzg3Nzc5OmNiZmNkZjdiZjkyNjk2YmI2OGUxODQ4NmZiM2Y1YThlMTc5YmI3Yzk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "bcd35a104101298ec7853cf032cc28d2d98209e4", "author": {"user": {"login": "Yampersand", "name": "Jan Handrich"}}, "url": "https://github.com/knowm/XChange/commit/bcd35a104101298ec7853cf032cc28d2d98209e4", "committedDate": "2020-07-07T11:34:06Z", "message": "[core] Enhancing DTOs to use Instrument instead of CurrencyPair"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "55f967d59e0421abbf24ec5bc9fe47eaabb6aa84", "author": {"user": {"login": "Yampersand", "name": "Jan Handrich"}}, "url": "https://github.com/knowm/XChange/commit/55f967d59e0421abbf24ec5bc9fe47eaabb6aa84", "committedDate": "2020-07-07T11:36:11Z", "message": "[core] Enhancing AccountService to be usable with Futures"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0360d74ce613081cfed2b22c388c59108c95ee54", "author": {"user": {"login": "Yampersand", "name": "Jan Handrich"}}, "url": "https://github.com/knowm/XChange/commit/0360d74ce613081cfed2b22c388c59108c95ee54", "committedDate": "2020-07-07T11:37:59Z", "message": "[core] Enhancing MarketDataService to be usable without CurrencyPair"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8972ffa1cf242102565ad3a15364c12a963e01a4", "author": {"user": {"login": "Yampersand", "name": "Jan Handrich"}}, "url": "https://github.com/knowm/XChange/commit/8972ffa1cf242102565ad3a15364c12a963e01a4", "committedDate": "2020-07-07T11:40:24Z", "message": "[core] Enhance Exchange interface to be usable with Instruments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9487072b32544eda8d4c99040ede5db2653ca124", "author": {"user": {"login": "Yampersand", "name": "Jan Handrich"}}, "url": "https://github.com/knowm/XChange/commit/9487072b32544eda8d4c99040ede5db2653ca124", "committedDate": "2020-07-07T11:43:03Z", "message": "[core] Providing Param interfaces and implementations for TradeService\n\nSupplying interfaces and implementations for *InstrumentParams to match *CurrencyPairParam counterparts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c9dc8f771ea89b98e758299381076f8fc9b6d79b", "author": {"user": {"login": "Yampersand", "name": "Jan Handrich"}}, "url": "https://github.com/knowm/XChange/commit/c9dc8f771ea89b98e758299381076f8fc9b6d79b", "committedDate": "2020-07-07T11:44:22Z", "message": "[core] Exception for all Instruments not just CurrencyPairs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c62ffb8ab31a24e5187a2c9cd25836cca9117314", "author": {"user": {"login": "Yampersand", "name": "Jan Handrich"}}, "url": "https://github.com/knowm/XChange/commit/c62ffb8ab31a24e5187a2c9cd25836cca9117314", "committedDate": "2020-07-07T12:19:30Z", "message": "[core] Proposal for a FuturesContract-Instrument"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1c83725a66367ba377186ce0c0e8e0b0a56faf37", "author": {"user": {"login": "Yampersand", "name": "Jan Handrich"}}, "url": "https://github.com/knowm/XChange/commit/1c83725a66367ba377186ce0c0e8e0b0a56faf37", "committedDate": "2020-07-08T06:02:29Z", "message": "[core] Fixed InstrumentDeserializer for broken test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e705b8d6d74cb1bb1c5bf34a5159c0bfbb413ca", "author": {"user": {"login": "Yampersand", "name": "Jan Handrich"}}, "url": "https://github.com/knowm/XChange/commit/1e705b8d6d74cb1bb1c5bf34a5159c0bfbb413ca", "committedDate": "2020-07-08T06:35:41Z", "message": "[kraken] Fixed CurrencyPair usage in UserTrade"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f56dd1a8f29d9896135d5b8ae8713df8959103c7", "author": {"user": {"login": "Yampersand", "name": "Jan Handrich"}}, "url": "https://github.com/knowm/XChange/commit/f56dd1a8f29d9896135d5b8ae8713df8959103c7", "committedDate": "2020-07-08T06:35:51Z", "message": "[ripple] Fixed CurrencyPair usage of UserTrade"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxMTcwNDI1", "url": "https://github.com/knowm/XChange/pull/3597#pullrequestreview-451170425", "createdAt": "2020-07-19T22:58:57Z", "commit": {"oid": "f56dd1a8f29d9896135d5b8ae8713df8959103c7"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOVQyMjo1ODo1N1rOGzy__g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOVQyMzowODoyOFrOGzzDbw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njk2NjE0Mg==", "bodyText": "I think a good default implementation would be\ndefault List<Instrument> getExchangeInstruments() {\n    return new ArrayList<Instrument>(getExchangeSymbols());\n  }\n\nas most exchanges don't have any derivatives and a CurrencyPair is a more concrete Instrument", "url": "https://github.com/knowm/XChange/pull/3597#discussion_r456966142", "createdAt": "2020-07-19T22:58:57Z", "author": {"login": "walec51"}, "path": "xchange-core/src/main/java/org/knowm/xchange/Exchange.java", "diffHunk": "@@ -42,6 +43,16 @@\n    */\n   List<CurrencyPair> getExchangeSymbols();\n \n+  /**\n+   * Returns a list of Instrument objects. This list can either come originally from a loaded json\n+   * file or from a remote call if the implementation override's the `remoteInit` method.\n+   *\n+   * @return The exchange's instruments\n+   */\n+  default List<Instrument> getExchangeInstruments() {\n+    throw new NotYetImplementedForExchangeException();\n+  }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f56dd1a8f29d9896135d5b8ae8713df8959103c7"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njk2NzAyMw==", "bodyText": "this should replace the pair / pairs fields rather then co-oexist with them\nyou can implement the CurrencyPair method using just instument / instruments", "url": "https://github.com/knowm/XChange/pull/3597#discussion_r456967023", "createdAt": "2020-07-19T23:08:28Z", "author": {"login": "walec51"}, "path": "xchange-core/src/main/java/org/knowm/xchange/service/trade/params/TradeHistoryParamsAll.java", "diffHunk": "@@ -30,6 +34,8 @@\n   private Long offset;\n   private CurrencyPair pair;\n   private Collection<CurrencyPair> pairs = Collections.emptySet();\n+  private Instrument instrument;\n+  private Collection<Instrument> instruments = Collections.emptySet();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f56dd1a8f29d9896135d5b8ae8713df8959103c7"}, "originalPosition": 24}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e3c9159e12305149c9876fd38ae7c4810ca72019", "author": {"user": {"login": "Yampersand", "name": "Jan Handrich"}}, "url": "https://github.com/knowm/XChange/commit/e3c9159e12305149c9876fd38ae7c4810ca72019", "committedDate": "2020-07-20T07:53:51Z", "message": "[core] Improved Exchange.getExchangeInstruments()"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cbfcdf7bf92696bb68e18486fb3f5a8e179bb7c9", "author": {"user": {"login": "Yampersand", "name": "Jan Handrich"}}, "url": "https://github.com/knowm/XChange/commit/cbfcdf7bf92696bb68e18486fb3f5a8e179bb7c9", "committedDate": "2020-07-20T07:54:28Z", "message": "[core] Improved TradeHistoryParamsAll by removing CurrencyPair members"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2494, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}