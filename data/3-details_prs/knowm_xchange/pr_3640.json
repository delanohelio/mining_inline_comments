{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYyODc5Nzk4", "number": 3640, "title": "[Coinmate] add support for orderById", "bodyText": "Add support for getting order by id on Coinmate.io exchange", "createdAt": "2020-08-04T16:39:19Z", "url": "https://github.com/knowm/XChange/pull/3640", "merged": true, "mergeCommit": {"oid": "96327a6bc4058d05c8f1f2e9fec032bfb9bfc2c3"}, "closed": true, "closedAt": "2020-09-14T13:27:58Z", "author": {"login": "stachon"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc7UOf0gH2gAyNDYyODc5Nzk4OjQ3NDYyODRlN2YxOTU3OTg5YWIzMjA3MGI0Njc2ZDNiYjE1ZGM0MzU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdHiME0AFqTQ4NjAzMzA0Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4746284e7f1957989ab32070b4676d3bb15dc435", "author": {"user": {"login": "stachon", "name": "Martin Stachon"}}, "url": "https://github.com/knowm/XChange/commit/4746284e7f1957989ab32070b4676d3bb15dc435", "committedDate": "2020-08-03T16:01:33Z", "message": "add orderById"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77f7ae5fda5b1fc157d81a295bd9a593ea724f4e", "author": {"user": {"login": "stachon", "name": "Martin Stachon"}}, "url": "https://github.com/knowm/XChange/commit/77f7ae5fda5b1fc157d81a295bd9a593ea724f4e", "committedDate": "2020-08-04T16:37:21Z", "message": "order is not returned as array"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1NTMwODY3", "url": "https://github.com/knowm/XChange/pull/3640#pullrequestreview-485530867", "createdAt": "2020-09-10T02:55:03Z", "commit": {"oid": "77f7ae5fda5b1fc157d81a295bd9a593ea724f4e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQwMjo1NTowM1rOHPhEmg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQwMjo1NTowM1rOHPhEmg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjAzMjUzOA==", "bodyText": "small typo in adaptOrders", "url": "https://github.com/knowm/XChange/pull/3640#discussion_r486032538", "createdAt": "2020-09-10T02:55:03Z", "author": {"login": "earce"}, "path": "xchange-coinmate/src/main/java/org/knowm/xchange/coinmate/CoinmateAdapters.java", "diffHunk": "@@ -338,4 +336,50 @@ public static String adaptSortOrder(TradeHistoryParamsSorted.Order order) {\n         throw new IllegalArgumentException();\n     }\n   }\n+\n+  public static List<Order> apdaptOrders(CoinmateOrders coinmateOrders) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77f7ae5fda5b1fc157d81a295bd9a593ea724f4e"}, "originalPosition": 41}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "01499abe20839acaa7277f740c379bc5e3de3567", "author": {"user": {"login": "stachon", "name": "Martin Stachon"}}, "url": "https://github.com/knowm/XChange/commit/01499abe20839acaa7277f740c379bc5e3de3567", "committedDate": "2020-09-10T08:27:01Z", "message": "fix typo apdaptOrders"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2MDI4NTgx", "url": "https://github.com/knowm/XChange/pull/3640#pullrequestreview-486028581", "createdAt": "2020-09-10T15:00:24Z", "commit": {"oid": "01499abe20839acaa7277f740c379bc5e3de3567"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNTowMDoyNFrOHP4W9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNTowMDoyNFrOHP4W9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQxNDA3MA==", "bodyText": "should currency pair not be added into this as well?", "url": "https://github.com/knowm/XChange/pull/3640#discussion_r486414070", "createdAt": "2020-09-10T15:00:24Z", "author": {"login": "earce"}, "path": "xchange-coinmate/src/main/java/org/knowm/xchange/coinmate/CoinmateAdapters.java", "diffHunk": "@@ -338,4 +336,50 @@ public static String adaptSortOrder(TradeHistoryParamsSorted.Order order) {\n         throw new IllegalArgumentException();\n     }\n   }\n+\n+  public static List<Order> adaptOrders(CoinmateOrders coinmateOrders) {\n+    List<Order> ordersList = new ArrayList<>(1);\n+\n+    CoinmateOrder entry = coinmateOrders.getData();\n+\n+    Order.OrderType orderType;\n+\n+    if (\"BUY\".equals(entry.getType())) {\n+      orderType = Order.OrderType.BID;\n+    } else if (\"SELL\".equals(entry.getType())) {\n+      orderType = Order.OrderType.ASK;\n+    } else {\n+      throw new CoinmateException(\"Unknown order type\");\n+    }\n+    Order.OrderStatus orderStatus;\n+    if (\"CANCELLED\".equals(entry.getStatus())) {\n+      orderStatus = Order.OrderStatus.CANCELED;\n+    } else if (\"FILLED\".equals(entry.getStatus())) {\n+      orderStatus = Order.OrderStatus.FILLED;\n+    } else if (\"PARTIALLY_FILLED\".equals(entry.getStatus())) {\n+      orderStatus = Order.OrderStatus.PARTIALLY_FILLED;\n+    } else if (\"OPEN\".equals(entry.getStatus())) {\n+      orderStatus = Order.OrderStatus.NEW;\n+    } else {\n+      orderStatus = Order.OrderStatus.UNKNOWN;\n+    }\n+\n+    // TODO: we can probably use `orderTradeType` to distinguish between Market and Limit order\n+    Order order =\n+        new MarketOrder(orderType,\n+            entry.getOriginalAmount(),\n+            null,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01499abe20839acaa7277f740c379bc5e3de3567"}, "originalPosition": 72}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2MDI4NzY3", "url": "https://github.com/knowm/XChange/pull/3640#pullrequestreview-486028767", "createdAt": "2020-09-10T15:00:34Z", "commit": {"oid": "01499abe20839acaa7277f740c379bc5e3de3567"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNTowMDozNVrOHP4XgQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNTowMDozNVrOHP4XgQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQxNDIwOQ==", "bodyText": "should currency pair not be added into this as well?", "url": "https://github.com/knowm/XChange/pull/3640#discussion_r486414209", "createdAt": "2020-09-10T15:00:35Z", "author": {"login": "earce"}, "path": "xchange-coinmate/src/main/java/org/knowm/xchange/coinmate/dto/trade/CoinmateOrder.java", "diffHunk": "@@ -0,0 +1,83 @@\n+package org.knowm.xchange.coinmate.dto.trade;\n+\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+\n+import java.math.BigDecimal;\n+\n+public class CoinmateOrder {\n+\n+  private final long id;\n+  private final long timestamp;\n+  private final String type;\n+  private final BigDecimal price;\n+  private final BigDecimal remainingAmount;\n+  private final BigDecimal originalAmount;\n+  private final BigDecimal stopPrice;\n+  private final String status;\n+  private final String orderTradeType;\n+  private final BigDecimal avgPrice;\n+\n+  public CoinmateOrder(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01499abe20839acaa7277f740c379bc5e3de3567"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2MDMzMDQy", "url": "https://github.com/knowm/XChange/pull/3640#pullrequestreview-486033042", "createdAt": "2020-09-10T15:04:40Z", "commit": {"oid": "01499abe20839acaa7277f740c379bc5e3de3567"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNTowNDo0MFrOHP4jOQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNTowNDo0MFrOHP4jOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQxNzIwOQ==", "bodyText": "Not necessary but a bit more elegant you can do something like\nreturn Collections.singletonList(new MarketOrder(orderType,  \n    entry.getOriginalAmount(),\n    null,  \n    Long.toString(entry.getId()),  \n    new Date(entry.getTimestamp()),  \n    entry.getAvgPrice(),  \n    entry.getOriginalAmount().subtract(entry.getRemainingAmount()),  \n    null,  \n    orderStatus,  \n    null));", "url": "https://github.com/knowm/XChange/pull/3640#discussion_r486417209", "createdAt": "2020-09-10T15:04:40Z", "author": {"login": "earce"}, "path": "xchange-coinmate/src/main/java/org/knowm/xchange/coinmate/CoinmateAdapters.java", "diffHunk": "@@ -338,4 +336,50 @@ public static String adaptSortOrder(TradeHistoryParamsSorted.Order order) {\n         throw new IllegalArgumentException();\n     }\n   }\n+\n+  public static List<Order> adaptOrders(CoinmateOrders coinmateOrders) {\n+    List<Order> ordersList = new ArrayList<>(1);\n+\n+    CoinmateOrder entry = coinmateOrders.getData();\n+\n+    Order.OrderType orderType;\n+\n+    if (\"BUY\".equals(entry.getType())) {\n+      orderType = Order.OrderType.BID;\n+    } else if (\"SELL\".equals(entry.getType())) {\n+      orderType = Order.OrderType.ASK;\n+    } else {\n+      throw new CoinmateException(\"Unknown order type\");\n+    }\n+    Order.OrderStatus orderStatus;\n+    if (\"CANCELLED\".equals(entry.getStatus())) {\n+      orderStatus = Order.OrderStatus.CANCELED;\n+    } else if (\"FILLED\".equals(entry.getStatus())) {\n+      orderStatus = Order.OrderStatus.FILLED;\n+    } else if (\"PARTIALLY_FILLED\".equals(entry.getStatus())) {\n+      orderStatus = Order.OrderStatus.PARTIALLY_FILLED;\n+    } else if (\"OPEN\".equals(entry.getStatus())) {\n+      orderStatus = Order.OrderStatus.NEW;\n+    } else {\n+      orderStatus = Order.OrderStatus.UNKNOWN;\n+    }\n+\n+    // TODO: we can probably use `orderTradeType` to distinguish between Market and Limit order\n+    Order order =\n+        new MarketOrder(orderType,\n+            entry.getOriginalAmount(),\n+            null,\n+            Long.toString(entry.getId()),\n+            new Date(entry.getTimestamp()),\n+            entry.getAvgPrice(),\n+            entry.getOriginalAmount().subtract(entry.getRemainingAmount()),\n+            null,\n+            orderStatus,\n+            null);\n+\n+\n+    ordersList.add(order);\n+\n+    return ordersList;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01499abe20839acaa7277f740c379bc5e3de3567"}, "originalPosition": 84}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2499, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}