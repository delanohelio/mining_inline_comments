{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE5NDQ5NjMw", "number": 13305, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQwMDozMjoyNFrOE60s8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxNzoxOTozMlrOFGToVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMwMTE2MzM4OnYy", "diffSide": "RIGHT", "path": "sdks/java/extensions/sql/src/main/java/org/apache/beam/sdk/extensions/sql/ApplyMethod.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQwMDozMjoyNFrOH2H12w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQwMjowNzozNVrOIGoeJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjUxMzYyNw==", "bodyText": "Should this interface be nested within ScalarFn?", "url": "https://github.com/apache/beam/pull/13305#discussion_r526513627", "createdAt": "2020-11-19T00:32:24Z", "author": {"login": "apilloud"}, "path": "sdks/java/extensions/sql/src/main/java/org/apache/beam/sdk/extensions/sql/ApplyMethod.java", "diffHunk": "@@ -0,0 +1,32 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.beam.sdk.extensions.sql;\n+\n+import java.lang.annotation.ElementType;\n+import java.lang.annotation.Retention;\n+import java.lang.annotation.RetentionPolicy;\n+import java.lang.annotation.Target;\n+import org.apache.beam.sdk.annotations.Experimental;\n+\n+/**\n+ * Annotates the single method in {@link ScalarFn} that is to be applied to SQL function arguments.\n+ */\n+@Retention(RetentionPolicy.RUNTIME)\n+@Target(ElementType.METHOD)\n+@Experimental\n+public @interface ApplyMethod {}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c04009d55cafe61d5878bb7c5eca8b103b4e33f"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODAyOTUxMQ==", "bodyText": "Yes (if we do decide to go with the annotations route).", "url": "https://github.com/apache/beam/pull/13305#discussion_r528029511", "createdAt": "2020-11-20T23:53:18Z", "author": {"login": "ibzib"}, "path": "sdks/java/extensions/sql/src/main/java/org/apache/beam/sdk/extensions/sql/ApplyMethod.java", "diffHunk": "@@ -0,0 +1,32 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.beam.sdk.extensions.sql;\n+\n+import java.lang.annotation.ElementType;\n+import java.lang.annotation.Retention;\n+import java.lang.annotation.RetentionPolicy;\n+import java.lang.annotation.Target;\n+import org.apache.beam.sdk.annotations.Experimental;\n+\n+/**\n+ * Annotates the single method in {@link ScalarFn} that is to be applied to SQL function arguments.\n+ */\n+@Retention(RetentionPolicy.RUNTIME)\n+@Target(ElementType.METHOD)\n+@Experimental\n+public @interface ApplyMethod {}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjUxMzYyNw=="}, "originalCommit": {"oid": "5c04009d55cafe61d5878bb7c5eca8b103b4e33f"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzgyNTQ0NQ==", "bodyText": "Done.", "url": "https://github.com/apache/beam/pull/13305#discussion_r543825445", "createdAt": "2020-12-16T02:07:35Z", "author": {"login": "ibzib"}, "path": "sdks/java/extensions/sql/src/main/java/org/apache/beam/sdk/extensions/sql/ApplyMethod.java", "diffHunk": "@@ -0,0 +1,32 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.beam.sdk.extensions.sql;\n+\n+import java.lang.annotation.ElementType;\n+import java.lang.annotation.Retention;\n+import java.lang.annotation.RetentionPolicy;\n+import java.lang.annotation.Target;\n+import org.apache.beam.sdk.annotations.Experimental;\n+\n+/**\n+ * Annotates the single method in {@link ScalarFn} that is to be applied to SQL function arguments.\n+ */\n+@Retention(RetentionPolicy.RUNTIME)\n+@Target(ElementType.METHOD)\n+@Experimental\n+public @interface ApplyMethod {}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjUxMzYyNw=="}, "originalCommit": {"oid": "5c04009d55cafe61d5878bb7c5eca8b103b4e33f"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxNzgyMTU3OnYy", "diffSide": "RIGHT", "path": "sdks/java/extensions/sql/udf/src/main/java/org/apache/beam/sdk/extensions/sql/udf/ScalarFn.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQwMzo1OToyMVrOIGtlng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxNzozNTowNFrOIHRE1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzkwOTI3OA==", "bodyText": "Should be marked as @experimental?", "url": "https://github.com/apache/beam/pull/13305#discussion_r543909278", "createdAt": "2020-12-16T03:59:21Z", "author": {"login": "amaliujia"}, "path": "sdks/java/extensions/sql/udf/src/main/java/org/apache/beam/sdk/extensions/sql/udf/ScalarFn.java", "diffHunk": "@@ -0,0 +1,50 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.beam.sdk.extensions.sql.udf;\n+\n+import java.io.Serializable;\n+import java.lang.annotation.ElementType;\n+import java.lang.annotation.Retention;\n+import java.lang.annotation.RetentionPolicy;\n+import java.lang.annotation.Target;\n+\n+/**\n+ * A scalar function that can be executed as part of a SQL query. Subclasses must contain exactly\n+ * one method annotated with {@link ApplyMethod}, which will be applied to the SQL function\n+ * arguments at runtime.\n+ *\n+ * <p>For example:\n+ *\n+ * <pre><code>\n+ * public class IncrementFn extends ScalarFn {\n+ *  {@literal @ApplyMethod}\n+ *   public Long increment(Long i) {\n+ *     return i + 1;\n+ *   }\n+ * }\n+ * </code></pre>\n+ */\n+public abstract class ScalarFn implements Serializable {\n+  /**\n+   * Annotates the single method in a {@link ScalarFn} implementation that is to be applied to SQL\n+   * function arguments.\n+   */\n+  @Retention(RetentionPolicy.RUNTIME)\n+  @Target(ElementType.METHOD)\n+  public static @interface ApplyMethod {}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2c43ccb591427f67e7b476f0a5615d2f2b929b1c"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDQ5MDcxMQ==", "bodyText": "Experimental itself is a part of Beam java core: https://github.com/apache/beam/blob/486d23007dac513f9f90bb08c2a039cd72a7ec94/sdks/java/core/src/main/java/org/apache/beam/sdk/annotations/Experimental.java\nI added a note to the javadoc instead.", "url": "https://github.com/apache/beam/pull/13305#discussion_r544490711", "createdAt": "2020-12-16T17:35:04Z", "author": {"login": "ibzib"}, "path": "sdks/java/extensions/sql/udf/src/main/java/org/apache/beam/sdk/extensions/sql/udf/ScalarFn.java", "diffHunk": "@@ -0,0 +1,50 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.beam.sdk.extensions.sql.udf;\n+\n+import java.io.Serializable;\n+import java.lang.annotation.ElementType;\n+import java.lang.annotation.Retention;\n+import java.lang.annotation.RetentionPolicy;\n+import java.lang.annotation.Target;\n+\n+/**\n+ * A scalar function that can be executed as part of a SQL query. Subclasses must contain exactly\n+ * one method annotated with {@link ApplyMethod}, which will be applied to the SQL function\n+ * arguments at runtime.\n+ *\n+ * <p>For example:\n+ *\n+ * <pre><code>\n+ * public class IncrementFn extends ScalarFn {\n+ *  {@literal @ApplyMethod}\n+ *   public Long increment(Long i) {\n+ *     return i + 1;\n+ *   }\n+ * }\n+ * </code></pre>\n+ */\n+public abstract class ScalarFn implements Serializable {\n+  /**\n+   * Annotates the single method in a {@link ScalarFn} implementation that is to be applied to SQL\n+   * function arguments.\n+   */\n+  @Retention(RetentionPolicy.RUNTIME)\n+  @Target(ElementType.METHOD)\n+  public static @interface ApplyMethod {}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzkwOTI3OA=="}, "originalCommit": {"oid": "2c43ccb591427f67e7b476f0a5615d2f2b929b1c"}, "originalPosition": 49}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQyMTU3Mzk4OnYy", "diffSide": "RIGHT", "path": "sdks/java/extensions/sql/udf/build.gradle", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxNzoxOTozMlrOIHQaFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxNzozMzoxMFrOIHQ_0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDQ3OTc2NQ==", "bodyText": "Might be worth adding a comment about not adding dependencies here.", "url": "https://github.com/apache/beam/pull/13305#discussion_r544479765", "createdAt": "2020-12-16T17:19:32Z", "author": {"login": "apilloud"}, "path": "sdks/java/extensions/sql/udf/build.gradle", "diffHunk": "@@ -0,0 +1,21 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * License); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an AS IS BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+plugins { id 'org.apache.beam.module' }\n+\n+applyJavaNature(automaticModuleName: 'org.apache.beam.sdk.extensions.sql.udf')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2c43ccb591427f67e7b476f0a5615d2f2b929b1c"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDQ4OTQyNw==", "bodyText": "Done.", "url": "https://github.com/apache/beam/pull/13305#discussion_r544489427", "createdAt": "2020-12-16T17:33:10Z", "author": {"login": "ibzib"}, "path": "sdks/java/extensions/sql/udf/build.gradle", "diffHunk": "@@ -0,0 +1,21 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * License); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an AS IS BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+plugins { id 'org.apache.beam.module' }\n+\n+applyJavaNature(automaticModuleName: 'org.apache.beam.sdk.extensions.sql.udf')", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDQ3OTc2NQ=="}, "originalCommit": {"oid": "2c43ccb591427f67e7b476f0a5615d2f2b929b1c"}, "originalPosition": 21}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2753, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}