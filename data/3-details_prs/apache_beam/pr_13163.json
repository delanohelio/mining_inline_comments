{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA3ODE4Njgw", "number": 13163, "title": "[BEAM-11092] Add protos for new process wide HarnessMonitoringInfos, and BigQuery IO metrics", "bodyText": "[BEAM-11092] Add protos for new process wide HarnessMonitoringInfos, and BigQuery IO metrics\nDefined here\nhttps://s.apache.org/beam-gcp-debuggability\n\nThank you for your contribution! Follow this checklist to help us incorporate your contribution quickly and easily:\n\n Choose reviewer(s) and mention them in a comment (R: @username).\n Format the pull request title like [BEAM-XXX] Fixes bug in ApproximateQuantiles, where you replace BEAM-XXX with the appropriate JIRA issue, if applicable. This will automatically link the pull request to the issue.\n Update CHANGES.md with noteworthy changes.\n If this contribution is large, please file an Apache Individual Contributor License Agreement.\n\nSee the Contributor Guide for more tips on how to make review process smoother.\nPost-Commit Tests Status (on master branch)\n\n\n\nLang\nSDK\nDataflow\nFlink\nSamza\nSpark\nTwister2\n\n\n\n\nGo\n\n---\n\n---\n\n---\n\n\nJava\n\n\n\n\n\n\n\n\nPython\n\n\n\n---\n\n---\n\n\nXLang\n\n---\n\n---\n\n---\n\n\n\nPre-Commit Tests Status (on master branch)\n\n\n\n---\nJava\nPython\nGo\nWebsite\nWhitespace\nTypescript\n\n\n\n\nNon-portable\n\n \n\n\n\n\n\n\nPortable\n---\n\n---\n---\n---\n---\n\n\n\nSee .test-infra/jenkins/README for trigger phrase, status and link of all Jenkins jobs.\nGitHub Actions Tests Status (on master branch)\n\n\n\nSee CI.md for more information about GitHub Actions CI.", "createdAt": "2020-10-21T19:39:20Z", "url": "https://github.com/apache/beam/pull/13163", "merged": true, "mergeCommit": {"oid": "7eb0e956dad87f84622d3523369579812ff82f0a"}, "closed": true, "closedAt": "2020-10-23T01:41:39Z", "author": {"login": "ajamato"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdUzY-5ABqjM5MDU4MjkxNzU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdVMd9pAFqTUxNTIyNDQ0Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0d93933eb5ad1ad4c9e93edb2b7daf76e5644f96", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/0d93933eb5ad1ad4c9e93edb2b7daf76e5644f96", "committedDate": "2020-10-21T19:38:43Z", "message": "Add protos for new process wide HarnessMonitoringInfos, and BigQuery IO metrics"}, "afterCommit": {"oid": "e115d1c855d94ac2ea7fb87e0da525769cf58ea8", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/e115d1c855d94ac2ea7fb87e0da525769cf58ea8", "committedDate": "2020-10-21T20:27:33Z", "message": "Add protos for new process wide HarnessMonitoringInfos, and BigQuery IO metrics"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e115d1c855d94ac2ea7fb87e0da525769cf58ea8", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/e115d1c855d94ac2ea7fb87e0da525769cf58ea8", "committedDate": "2020-10-21T20:27:33Z", "message": "Add protos for new process wide HarnessMonitoringInfos, and BigQuery IO metrics"}, "afterCommit": {"oid": "0232e2342694097199c62d83477f58567029a634", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/0232e2342694097199c62d83477f58567029a634", "committedDate": "2020-10-21T21:49:08Z", "message": "[BEAM-11092] Add protos for new process wide HarnessMonitoringInfos, and BigQuery IO metrics"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0232e2342694097199c62d83477f58567029a634", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/0232e2342694097199c62d83477f58567029a634", "committedDate": "2020-10-21T21:49:08Z", "message": "[BEAM-11092] Add protos for new process wide HarnessMonitoringInfos, and BigQuery IO metrics"}, "afterCommit": {"oid": "d489bfb28daed4cf6d602c7d67dec312893c8b94", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/d489bfb28daed4cf6d602c7d67dec312893c8b94", "committedDate": "2020-10-21T21:53:02Z", "message": "[BEAM-11092] Add protos for new process wide HarnessMonitoringInfos, and BigQuery IO metrics"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d489bfb28daed4cf6d602c7d67dec312893c8b94", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/d489bfb28daed4cf6d602c7d67dec312893c8b94", "committedDate": "2020-10-21T21:53:02Z", "message": "[BEAM-11092] Add protos for new process wide HarnessMonitoringInfos, and BigQuery IO metrics"}, "afterCommit": {"oid": "61ba5e6fbe4959b8d063cac4aa00954168cba060", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/61ba5e6fbe4959b8d063cac4aa00954168cba060", "committedDate": "2020-10-21T22:01:32Z", "message": "[BEAM-11092] Add protos for new process wide HarnessMonitoringInfos, and BigQuery IO metrics"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "61ba5e6fbe4959b8d063cac4aa00954168cba060", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/61ba5e6fbe4959b8d063cac4aa00954168cba060", "committedDate": "2020-10-21T22:01:32Z", "message": "[BEAM-11092] Add protos for new process wide HarnessMonitoringInfos, and BigQuery IO metrics"}, "afterCommit": {"oid": "2b0033a65591f5e6402deb9416c0dcb9397a9644", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/2b0033a65591f5e6402deb9416c0dcb9397a9644", "committedDate": "2020-10-21T22:19:09Z", "message": "[BEAM-11092] Add protos for new process wide HarnessMonitoringInfos, and BigQuery IO metrics"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2b0033a65591f5e6402deb9416c0dcb9397a9644", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/2b0033a65591f5e6402deb9416c0dcb9397a9644", "committedDate": "2020-10-21T22:19:09Z", "message": "[BEAM-11092] Add protos for new process wide HarnessMonitoringInfos, and BigQuery IO metrics"}, "afterCommit": {"oid": "a43aab904cc4efa8cccd7d6d9de5d9ab80fd1761", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/a43aab904cc4efa8cccd7d6d9de5d9ab80fd1761", "committedDate": "2020-10-21T22:39:39Z", "message": "[BEAM-11092] Add protos for new process wide HarnessMonitoringInfos, and BigQuery IO metrics"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a43aab904cc4efa8cccd7d6d9de5d9ab80fd1761", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/a43aab904cc4efa8cccd7d6d9de5d9ab80fd1761", "committedDate": "2020-10-21T22:39:39Z", "message": "[BEAM-11092] Add protos for new process wide HarnessMonitoringInfos, and BigQuery IO metrics"}, "afterCommit": {"oid": "ff701ba7ee9b78e8d0274032fbbbfb4571146662", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/ff701ba7ee9b78e8d0274032fbbbfb4571146662", "committedDate": "2020-10-22T20:09:01Z", "message": "[BEAM-11092] Add protos for new process wide HarnessMonitoringInfos, and BigQuery IO metrics"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1MTQ3NDY4", "url": "https://github.com/apache/beam/pull/13163#pullrequestreview-515147468", "createdAt": "2020-10-22T21:54:07Z", "commit": {"oid": "ff701ba7ee9b78e8d0274032fbbbfb4571146662"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQyMTo1NDowN1rOHm1PTA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQyMjowMToxOVrOHm1bbQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDQ4MDIwNA==", "bodyText": "I thought that this would be covered by MonitoringInfosMetadataRequest\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                HarnessMonitoringInfosMetadataRequest harness_monitoring_infos_metadata = 1007;", "url": "https://github.com/apache/beam/pull/13163#discussion_r510480204", "createdAt": "2020-10-22T21:54:07Z", "author": {"login": "lukecwik"}, "path": "model/fn-execution/src/main/proto/beam_fn_api.proto", "diffHunk": "@@ -108,6 +108,8 @@ message InstructionRequest {\n     ProcessBundleSplitRequest process_bundle_split = 1003;\n     FinalizeBundleRequest finalize_bundle = 1004;\n     MonitoringInfosMetadataRequest monitoring_infos = 1005;\n+    HarnessMonitoringInfosRequest harness_monitoring_infos = 1006;\n+    HarnessMonitoringInfosMetadataRequest harness_monitoring_infos_metadata = 1007;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ff701ba7ee9b78e8d0274032fbbbfb4571146662"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDQ4MDQxMQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                HarnessMonitoringInfosMetadataResponse harness_monitoring_infos_metadata = 1007;", "url": "https://github.com/apache/beam/pull/13163#discussion_r510480411", "createdAt": "2020-10-22T21:54:37Z", "author": {"login": "lukecwik"}, "path": "model/fn-execution/src/main/proto/beam_fn_api.proto", "diffHunk": "@@ -135,12 +137,55 @@ message InstructionResponse {\n     ProcessBundleSplitResponse process_bundle_split = 1003;\n     FinalizeBundleResponse finalize_bundle = 1004;\n     MonitoringInfosMetadataResponse monitoring_infos = 1005;\n+    HarnessMonitoringInfosResponse harness_monitoring_infos = 1006;\n+    HarnessMonitoringInfosMetadataResponse harness_monitoring_infos_metadata = 1007;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ff701ba7ee9b78e8d0274032fbbbfb4571146662"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDQ4MDY3Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            // The SDK is allowed to reuse the identifiers across multiple bundles as long\n          \n          \n            \n            // as the MonitoringInfo could be reconstructed fully by overwriting its\n          \n          \n            \n            // payload field with the bytes specified here.\n          \n          \n            \n            // The SDK is allowed to reuse the identifiers for the lifetime of the associated control connection as long\n          \n          \n            \n            // as the MonitoringInfo could be reconstructed fully by overwriting its\n          \n          \n            \n            // payload field with the bytes specified here.", "url": "https://github.com/apache/beam/pull/13163#discussion_r510480672", "createdAt": "2020-10-22T21:55:14Z", "author": {"login": "lukecwik"}, "path": "model/fn-execution/src/main/proto/beam_fn_api.proto", "diffHunk": "@@ -135,12 +137,55 @@ message InstructionResponse {\n     ProcessBundleSplitResponse process_bundle_split = 1003;\n     FinalizeBundleResponse finalize_bundle = 1004;\n     MonitoringInfosMetadataResponse monitoring_infos = 1005;\n+    HarnessMonitoringInfosResponse harness_monitoring_infos = 1006;\n+    HarnessMonitoringInfosMetadataResponse harness_monitoring_infos_metadata = 1007;\n \n     // DEPRECATED\n     RegisterResponse register = 1000;\n   }\n }\n \n+// A request to provide full MonitoringInfo associated with the entire SDK\n+// harness process, not specific to a bundle.\n+//\n+// An SDK can report metrics using an identifier that only contains the\n+// associated payload. A runner who wants to receive the full metrics\n+// information can request all the monitoring metadata via a\n+// MonitoringInfosMetadataRequest providing a list of ids as necessary.\n+//\n+// The SDK is allowed to reuse the identifiers across multiple bundles as long\n+// as the MonitoringInfo could be reconstructed fully by overwriting its\n+// payload field with the bytes specified here.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ff701ba7ee9b78e8d0274032fbbbfb4571146662"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDQ4MDgyNg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              // Metrics associated with the sdk harness process, not a specific bundle.\n          \n          \n            \n              // Metrics associated with the SDK harness, not a specific bundle.", "url": "https://github.com/apache/beam/pull/13163#discussion_r510480826", "createdAt": "2020-10-22T21:55:31Z", "author": {"login": "lukecwik"}, "path": "model/fn-execution/src/main/proto/beam_fn_api.proto", "diffHunk": "@@ -135,12 +137,55 @@ message InstructionResponse {\n     ProcessBundleSplitResponse process_bundle_split = 1003;\n     FinalizeBundleResponse finalize_bundle = 1004;\n     MonitoringInfosMetadataResponse monitoring_infos = 1005;\n+    HarnessMonitoringInfosResponse harness_monitoring_infos = 1006;\n+    HarnessMonitoringInfosMetadataResponse harness_monitoring_infos_metadata = 1007;\n \n     // DEPRECATED\n     RegisterResponse register = 1000;\n   }\n }\n \n+// A request to provide full MonitoringInfo associated with the entire SDK\n+// harness process, not specific to a bundle.\n+//\n+// An SDK can report metrics using an identifier that only contains the\n+// associated payload. A runner who wants to receive the full metrics\n+// information can request all the monitoring metadata via a\n+// MonitoringInfosMetadataRequest providing a list of ids as necessary.\n+//\n+// The SDK is allowed to reuse the identifiers across multiple bundles as long\n+// as the MonitoringInfo could be reconstructed fully by overwriting its\n+// payload field with the bytes specified here.\n+message HarnessMonitoringInfosRequest {\n+}\n+\n+message HarnessMonitoringInfosResponse {\n+  // An identifier to MonitoringInfo.payload mapping containing\n+  // Metrics associated with the sdk harness process, not a specific bundle.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ff701ba7ee9b78e8d0274032fbbbfb4571146662"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDQ4MDk1MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              // The SDK is allowed to reuse the identifiers across multiple bundles as long\n          \n          \n            \n              // The SDK is allowed to reuse the identifiers for the lifetime of the associated control connection as long", "url": "https://github.com/apache/beam/pull/13163#discussion_r510480950", "createdAt": "2020-10-22T21:55:49Z", "author": {"login": "lukecwik"}, "path": "model/fn-execution/src/main/proto/beam_fn_api.proto", "diffHunk": "@@ -135,12 +137,55 @@ message InstructionResponse {\n     ProcessBundleSplitResponse process_bundle_split = 1003;\n     FinalizeBundleResponse finalize_bundle = 1004;\n     MonitoringInfosMetadataResponse monitoring_infos = 1005;\n+    HarnessMonitoringInfosResponse harness_monitoring_infos = 1006;\n+    HarnessMonitoringInfosMetadataResponse harness_monitoring_infos_metadata = 1007;\n \n     // DEPRECATED\n     RegisterResponse register = 1000;\n   }\n }\n \n+// A request to provide full MonitoringInfo associated with the entire SDK\n+// harness process, not specific to a bundle.\n+//\n+// An SDK can report metrics using an identifier that only contains the\n+// associated payload. A runner who wants to receive the full metrics\n+// information can request all the monitoring metadata via a\n+// MonitoringInfosMetadataRequest providing a list of ids as necessary.\n+//\n+// The SDK is allowed to reuse the identifiers across multiple bundles as long\n+// as the MonitoringInfo could be reconstructed fully by overwriting its\n+// payload field with the bytes specified here.\n+message HarnessMonitoringInfosRequest {\n+}\n+\n+message HarnessMonitoringInfosResponse {\n+  // An identifier to MonitoringInfo.payload mapping containing\n+  // Metrics associated with the sdk harness process, not a specific bundle.\n+  //\n+  // An SDK can report metrics using an identifier that only contains the\n+  // associated payload. A runner who wants to receive the full metrics\n+  // information can request all the monitoring metadata via a\n+  // MonitoringInfosMetadataRequest providing a list of ids as necessary.\n+  //\n+  // The SDK is allowed to reuse the identifiers across multiple bundles as long", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ff701ba7ee9b78e8d0274032fbbbfb4571146662"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDQ4MTA2Mw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            message HarnessMonitoringInfosMetadataRequest {\n          \n          \n            \n              // A list of ids for which the full MonitoringInfo is requested for.\n          \n          \n            \n              repeated string monitoring_info_id = 1;\n          \n          \n            \n            }\n          \n          \n            \n            \n          \n          \n            \n            message HarnessMonitoringInfosMetadataResponse {\n          \n          \n            \n              // A mapping from an identifier to the full metrics information.\n          \n          \n            \n              // The \u201cbytes payload\u201d field is not populated on the MonitoringInfo\n          \n          \n            \n              map<string, org.apache.beam.model.pipeline.v1.MonitoringInfo>\n          \n          \n            \n                  monitoring_infos = 1;\n          \n          \n            \n            }", "url": "https://github.com/apache/beam/pull/13163#discussion_r510481063", "createdAt": "2020-10-22T21:56:03Z", "author": {"login": "lukecwik"}, "path": "model/fn-execution/src/main/proto/beam_fn_api.proto", "diffHunk": "@@ -135,12 +137,55 @@ message InstructionResponse {\n     ProcessBundleSplitResponse process_bundle_split = 1003;\n     FinalizeBundleResponse finalize_bundle = 1004;\n     MonitoringInfosMetadataResponse monitoring_infos = 1005;\n+    HarnessMonitoringInfosResponse harness_monitoring_infos = 1006;\n+    HarnessMonitoringInfosMetadataResponse harness_monitoring_infos_metadata = 1007;\n \n     // DEPRECATED\n     RegisterResponse register = 1000;\n   }\n }\n \n+// A request to provide full MonitoringInfo associated with the entire SDK\n+// harness process, not specific to a bundle.\n+//\n+// An SDK can report metrics using an identifier that only contains the\n+// associated payload. A runner who wants to receive the full metrics\n+// information can request all the monitoring metadata via a\n+// MonitoringInfosMetadataRequest providing a list of ids as necessary.\n+//\n+// The SDK is allowed to reuse the identifiers across multiple bundles as long\n+// as the MonitoringInfo could be reconstructed fully by overwriting its\n+// payload field with the bytes specified here.\n+message HarnessMonitoringInfosRequest {\n+}\n+\n+message HarnessMonitoringInfosResponse {\n+  // An identifier to MonitoringInfo.payload mapping containing\n+  // Metrics associated with the sdk harness process, not a specific bundle.\n+  //\n+  // An SDK can report metrics using an identifier that only contains the\n+  // associated payload. A runner who wants to receive the full metrics\n+  // information can request all the monitoring metadata via a\n+  // MonitoringInfosMetadataRequest providing a list of ids as necessary.\n+  //\n+  // The SDK is allowed to reuse the identifiers across multiple bundles as long\n+  // as the MonitoringInfo could be reconstructed fully by overwriting its\n+  // payload field with the bytes specified here.\n+  map<string, bytes> monitoring_data = 1;\n+}\n+\n+message HarnessMonitoringInfosMetadataRequest {\n+  // A list of ids for which the full MonitoringInfo is requested for.\n+  repeated string monitoring_info_id = 1;\n+}\n+\n+message HarnessMonitoringInfosMetadataResponse {\n+  // A mapping from an identifier to the full metrics information.\n+  // The \u201cbytes payload\u201d field is not populated on the MonitoringInfo\n+  map<string, org.apache.beam.model.pipeline.v1.MonitoringInfo>\n+      monitoring_infos = 1;\n+}\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ff701ba7ee9b78e8d0274032fbbbfb4571146662"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDQ4MTE4Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            // The SDK is allowed to reuse the identifiers across multiple bundles as long\n          \n          \n            \n            // The SDK is allowed to reuse the identifiers for the lifetime of the associated control connection as long", "url": "https://github.com/apache/beam/pull/13163#discussion_r510481186", "createdAt": "2020-10-22T21:56:19Z", "author": {"login": "lukecwik"}, "path": "model/fn-execution/src/main/proto/beam_fn_api.proto", "diffHunk": "@@ -306,18 +351,18 @@ message ProcessBundleProgressRequest {\n   string instruction_id = 1;\n }\n \n-// A request to provide full MonitoringInfo for a given id.\n+// A request to provide full MonitoringInfo for a given bundle.\n //\n // An SDK can report metrics using an identifier that only contains the\n // associated payload. A runner who wants to receive the full metrics\n // information can request all the monitoring metadata via a\n // MonitoringInfosMetadataRequest providing a list of ids as necessary.\n //\n-// The MonitoringInfo ids are scoped to the associated control connection. For\n-// example, an SDK may reuse the ids across multiple bundles.\n+// The SDK is allowed to reuse the identifiers across multiple bundles as long", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ff701ba7ee9b78e8d0274032fbbbfb4571146662"}, "originalPosition": 79}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDQ4MTM4OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            // The SDK is allowed to reuse the identifiers across multiple bundles as long\n          \n          \n            \n            // The SDK is allowed to reuse the identifiers for the lifetime of the associated control connection as long", "url": "https://github.com/apache/beam/pull/13163#discussion_r510481389", "createdAt": "2020-10-22T21:56:49Z", "author": {"login": "lukecwik"}, "path": "model/fn-execution/src/main/proto/beam_fn_api.proto", "diffHunk": "@@ -349,11 +394,11 @@ message ProcessBundleProgressResponse {\n // information can request all the monitoring metadata via a\n // MonitoringInfosMetadataRequest providing a list of ids as necessary.\n //\n-// The MonitoringInfo ids are scoped to the associated control connection. For\n-// example an SDK may reuse the ids across multiple bundles.\n+// The SDK is allowed to reuse the identifiers across multiple bundles as long", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ff701ba7ee9b78e8d0274032fbbbfb4571146662"}, "originalPosition": 95}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDQ4MTY3Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            // A request to provide full MonitoringInfo for a given bundle.\n          \n          \n            \n            // A request to provide full MonitoringInfo for a set of provided ids.", "url": "https://github.com/apache/beam/pull/13163#discussion_r510481672", "createdAt": "2020-10-22T21:57:31Z", "author": {"login": "lukecwik"}, "path": "model/fn-execution/src/main/proto/beam_fn_api.proto", "diffHunk": "@@ -306,18 +351,18 @@ message ProcessBundleProgressRequest {\n   string instruction_id = 1;\n }\n \n-// A request to provide full MonitoringInfo for a given id.\n+// A request to provide full MonitoringInfo for a given bundle.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ff701ba7ee9b78e8d0274032fbbbfb4571146662"}, "originalPosition": 70}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDQ4MzMwOQ==", "bodyText": "Can you copy the update to say for the lifetime of the associated control connection in ProcessBundleProgressResponse and ProcessBundleResponse", "url": "https://github.com/apache/beam/pull/13163#discussion_r510483309", "createdAt": "2020-10-22T22:01:19Z", "author": {"login": "lukecwik"}, "path": "model/fn-execution/src/main/proto/beam_fn_api.proto", "diffHunk": "@@ -306,18 +351,18 @@ message ProcessBundleProgressRequest {\n   string instruction_id = 1;\n }\n \n-// A request to provide full MonitoringInfo for a given id.\n+// A request to provide full MonitoringInfo for a given bundle.\n //\n // An SDK can report metrics using an identifier that only contains the\n // associated payload. A runner who wants to receive the full metrics\n // information can request all the monitoring metadata via a\n // MonitoringInfosMetadataRequest providing a list of ids as necessary.\n //\n-// The MonitoringInfo ids are scoped to the associated control connection. For\n-// example, an SDK may reuse the ids across multiple bundles.\n+// The SDK is allowed to reuse the identifiers across multiple bundles as long\n+// as the MonitoringInfo could be reconstructed fully by overwriting its\n+// payload field with the bytes specified here.\n message MonitoringInfosMetadataRequest {\n-  // A list of ids for which MonitoringInfo are requested. All but the payload\n-  // field will be populated.\n+  // A list of ids for which the full MonitoringInfo is requested for.\n   repeated string monitoring_info_id = 1;\n }\n ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ff701ba7ee9b78e8d0274032fbbbfb4571146662"}, "originalPosition": 88}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "59fe19a6e03e00d1a93425120533e36cdbbfc7b4", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/59fe19a6e03e00d1a93425120533e36cdbbfc7b4", "committedDate": "2020-10-22T22:45:33Z", "message": "Apply suggestions from code review\n\nCo-authored-by: Lukasz Cwik <lcwik@google.com>"}, "afterCommit": {"oid": "0f61037c9b3e8881e616f7857be8c52f54edb99e", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/0f61037c9b3e8881e616f7857be8c52f54edb99e", "committedDate": "2020-10-22T23:05:05Z", "message": "[BEAM-11092] Add protos for new process wide HarnessMonitoringInfos, and BigQuery IO metrics"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0432f138f2bfb8d4d9543c4569581bdd3f8782db", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/0432f138f2bfb8d4d9543c4569581bdd3f8782db", "committedDate": "2020-10-22T23:07:01Z", "message": "[BEAM-11092] Add protos for new process wide HarnessMonitoringInfos, and BigQuery IO metrics"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0f61037c9b3e8881e616f7857be8c52f54edb99e", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/0f61037c9b3e8881e616f7857be8c52f54edb99e", "committedDate": "2020-10-22T23:05:05Z", "message": "[BEAM-11092] Add protos for new process wide HarnessMonitoringInfos, and BigQuery IO metrics"}, "afterCommit": {"oid": "0432f138f2bfb8d4d9543c4569581bdd3f8782db", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/0432f138f2bfb8d4d9543c4569581bdd3f8782db", "committedDate": "2020-10-22T23:07:01Z", "message": "[BEAM-11092] Add protos for new process wide HarnessMonitoringInfos, and BigQuery IO metrics"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1MjI0NDQy", "url": "https://github.com/apache/beam/pull/13163#pullrequestreview-515224442", "createdAt": "2020-10-23T01:41:14Z", "commit": {"oid": "0432f138f2bfb8d4d9543c4569581bdd3f8782db"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2174, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}