{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ5MTQ3NTY5", "number": 12257, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwMTozNTo0NFrOEOfbGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwMDo1MDozNFrOEXbmJg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzNjMwMzYyOnYy", "diffSide": "RIGHT", "path": "sdks/python/setup.py", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwMTozNTo0NFrOGxrB8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwMTozNTo0NFrOGxrB8Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDczODQxNw==", "bodyText": "Alternatively, this could be a dependency just for py38-cloud. That would make more sense since no other Tox environment requires coverage. Should I move it?", "url": "https://github.com/apache/beam/pull/12257#discussion_r454738417", "createdAt": "2020-07-15T01:35:44Z", "author": {"login": "saavannanavati"}, "path": "sdks/python/setup.py", "diffHunk": "@@ -193,6 +193,8 @@ def get_version():\n     'requests_mock>=1.7,<2.0',\n     'tenacity>=5.0.2,<6.0',\n     'pytest>=4.4.0,<5.0',\n+    # More recent versions of pytest-cov do not support pytest 4.4.0\n+    'pytest-cov==2.9.0',", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7e9d684698adbe2654fb59a734553c4f1682c356"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2ODQyOTU1OnYy", "diffSide": "RIGHT", "path": "sdks/python/test-suites/tox/py38/build.gradle", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxNzo1MzowN1rOG2VWQA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxNzo1MzowN1rOG2VWQA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTYyNjA0OA==", "bodyText": "No need to run testPy38Cloud", "url": "https://github.com/apache/beam/pull/12257#discussion_r459626048", "createdAt": "2020-07-23T17:53:07Z", "author": {"login": "udim"}, "path": "sdks/python/test-suites/tox/py38/build.gradle", "diffHunk": "@@ -29,7 +29,10 @@ pythonVersion = '3.8'\n toxTask \"formatter\", \"py3-yapf-check\"\n check.dependsOn formatter\n \n+toxTask \"testPy38CloudCoverage\", \"py38-cloudcoverage\"\n+test.dependsOn \"testPy38CloudCoverage\"\n+\n apply from: \"../common.gradle\"\n \n // TODO(BEAM-8954): Remove this once tox uses isolated builds.\n-testPy38Cython.mustRunAfter testPython38, testPy38Cloud\n+testPy38Cython.mustRunAfter testPython38, testPy38Cloud, testPy38CloudCoverage", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5aef112d0d5c8d5eab333d0ca9f199c7a090cc74"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxNDQ3MzY5OnYy", "diffSide": "RIGHT", "path": "sdks/python/test-suites/tox/common.gradle", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxODozMzo1N1rOG8_ivg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxODozMzo1N1rOG8_ivg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjYwODgzMA==", "bodyText": "Cool!", "url": "https://github.com/apache/beam/pull/12257#discussion_r466608830", "createdAt": "2020-08-06T18:33:57Z", "author": {"login": "udim"}, "path": "sdks/python/test-suites/tox/common.gradle", "diffHunk": "@@ -27,6 +27,13 @@ test.dependsOn \"testPy${pythonVersionSuffix}Cloud\"\n toxTask \"testPy${pythonVersionSuffix}Cython\", \"py${pythonVersionSuffix}-cython\"\n test.dependsOn \"testPy${pythonVersionSuffix}Cython\"\n \n+toxTask \"testPy38CloudCoverage\", \"py38-cloudcoverage\"\n+test.dependsOn \"testPy38CloudCoverage\"\n+\n project.task(\"preCommitPy${pythonVersionSuffix}\") {\n-      dependsOn = [\"testPy${pythonVersionSuffix}Cloud\", \"testPy${pythonVersionSuffix}Cython\"]\n+      if (pythonVersionSuffix.equals('38')) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "daff0ae3179f44775920b3701c3dc720fa9a6c98"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxNDQ5NzgwOnYy", "diffSide": "RIGHT", "path": "sdks/python/test-suites/tox/py38/build.gradle", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxODo0MToyMFrOG8_x6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxODo0Mzo1OVrOG8_3NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjYxMjcxNQ==", "bodyText": "I think you meant testPy38CloudCoverage", "url": "https://github.com/apache/beam/pull/12257#discussion_r466612715", "createdAt": "2020-08-06T18:41:20Z", "author": {"login": "udim"}, "path": "sdks/python/test-suites/tox/py38/build.gradle", "diffHunk": "@@ -32,4 +32,4 @@ check.dependsOn formatter\n apply from: \"../common.gradle\"\n \n // TODO(BEAM-8954): Remove this once tox uses isolated builds.\n-testPy38Cython.mustRunAfter testPython38, testPy38Cloud\n+testPy38Cython.mustRunAfter testPython38, python38CloudCoverage", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "daff0ae3179f44775920b3701c3dc720fa9a6c98"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjYxNDA2OA==", "bodyText": "Thanks! Fixed", "url": "https://github.com/apache/beam/pull/12257#discussion_r466614068", "createdAt": "2020-08-06T18:43:59Z", "author": {"login": "saavannanavati"}, "path": "sdks/python/test-suites/tox/py38/build.gradle", "diffHunk": "@@ -32,4 +32,4 @@ check.dependsOn formatter\n apply from: \"../common.gradle\"\n \n // TODO(BEAM-8954): Remove this once tox uses isolated builds.\n-testPy38Cython.mustRunAfter testPython38, testPy38Cloud\n+testPy38Cython.mustRunAfter testPython38, python38CloudCoverage", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjYxMjcxNQ=="}, "originalCommit": {"oid": "daff0ae3179f44775920b3701c3dc720fa9a6c98"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkzMDA0ODM4OnYy", "diffSide": "RIGHT", "path": "sdks/python/tox.ini", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwMDo1MDozNFrOG_OCCA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwMTowMzoxNVrOG_OPOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODk0MzM2OA==", "bodyText": "CODECOV_TOKEN is the default value, so no need to specify.", "url": "https://github.com/apache/beam/pull/12257#discussion_r468943368", "createdAt": "2020-08-12T00:50:34Z", "author": {"login": "udim"}, "path": "sdks/python/tox.ini", "diffHunk": "@@ -172,6 +172,17 @@ extras = test,gcp,interactive,aws\n commands =\n   {toxinidir}/scripts/run_pytest.sh {envname} \"{posargs}\"\n \n+[testenv:py38-cloudcoverage]\n+# More recent versions of pytest-cov do not support pytest 4.4.0\n+deps =\n+  codecov\n+  pytest-cov==2.9.0\n+passenv = GIT_* BUILD_* ghprb* CHANGE_ID BRANCH_NAME JENKINS_* CODECOV_*\n+extras = test,gcp,interactive,aws\n+commands =\n+  {toxinidir}/scripts/run_pytest.sh {envname} \"{posargs}\" --cov=apache_beam\n+  codecov -t CODECOV_TOKEN", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "14d0f87ea9ea38feec1aef63c21efb153873cfa1"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODk0Njc0NA==", "bodyText": "What I mean is that by default it will look at the CODECOV_TOKEN environment variable. The current value being passed is not a UUID.", "url": "https://github.com/apache/beam/pull/12257#discussion_r468946744", "createdAt": "2020-08-12T01:03:15Z", "author": {"login": "udim"}, "path": "sdks/python/tox.ini", "diffHunk": "@@ -172,6 +172,17 @@ extras = test,gcp,interactive,aws\n commands =\n   {toxinidir}/scripts/run_pytest.sh {envname} \"{posargs}\"\n \n+[testenv:py38-cloudcoverage]\n+# More recent versions of pytest-cov do not support pytest 4.4.0\n+deps =\n+  codecov\n+  pytest-cov==2.9.0\n+passenv = GIT_* BUILD_* ghprb* CHANGE_ID BRANCH_NAME JENKINS_* CODECOV_*\n+extras = test,gcp,interactive,aws\n+commands =\n+  {toxinidir}/scripts/run_pytest.sh {envname} \"{posargs}\" --cov=apache_beam\n+  codecov -t CODECOV_TOKEN", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODk0MzM2OA=="}, "originalCommit": {"oid": "14d0f87ea9ea38feec1aef63c21efb153873cfa1"}, "originalPosition": 22}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1048, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}