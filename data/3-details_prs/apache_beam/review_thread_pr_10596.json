{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYyOTIxMDg3", "number": 10596, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNVQyMjozMDoyNlrODYVTyA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNVQyMjozMTo1NVrODYVVLw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2ODQxNTQ0OnYy", "diffSide": "RIGHT", "path": "sdks/python/apache_beam/runners/dataflow/dataflow_runner.py", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNVQyMjozMDoyNlrOFeIkKg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QxOToyNDo1MlrOFfC6wg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzE0MTkzMA==", "bodyText": "This will be only needed for streaming pipelines.", "url": "https://github.com/apache/beam/pull/10596#discussion_r367141930", "createdAt": "2020-01-15T22:30:26Z", "author": {"login": "angoenka"}, "path": "sdks/python/apache_beam/runners/dataflow/dataflow_runner.py", "diffHunk": "@@ -950,6 +950,10 @@ def run_ParDo(self, transform_node, options):\n       step.add_property(PropertyNames.RESTRICTION_ENCODING,\n                         self._get_cloud_encoding(restriction_coder))\n \n+    from apache_beam.runners.common import DoFnSignature\n+    if DoFnSignature(transform.dofn).is_stateful_dofn():", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e213de285aaf8dcde385873407b6c3ea5ac2cf89"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzE0ODgyNw==", "bodyText": "should we distinguish streaming pipelines from batch here?", "url": "https://github.com/apache/beam/pull/10596#discussion_r367148827", "createdAt": "2020-01-15T22:49:47Z", "author": {"login": "y1chi"}, "path": "sdks/python/apache_beam/runners/dataflow/dataflow_runner.py", "diffHunk": "@@ -950,6 +950,10 @@ def run_ParDo(self, transform_node, options):\n       step.add_property(PropertyNames.RESTRICTION_ENCODING,\n                         self._get_cloud_encoding(restriction_coder))\n \n+    from apache_beam.runners.common import DoFnSignature\n+    if DoFnSignature(transform.dofn).is_stateful_dofn():", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzE0MTkzMA=="}, "originalCommit": {"oid": "e213de285aaf8dcde385873407b6c3ea5ac2cf89"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzc1NDA0NA==", "bodyText": "Yes, java side we do the same.\n\n  \n    \n      beam/runners/google-cloud-dataflow-java/src/main/java/org/apache/beam/runners/dataflow/DataflowPipelineTranslator.java\n    \n    \n         Line 1260\n      in\n      2fd785d\n    \n    \n    \n    \n\n        \n          \n           stepContext.addInput(PropertyNames.USES_KEYED_STATE, \"true\");", "url": "https://github.com/apache/beam/pull/10596#discussion_r367754044", "createdAt": "2020-01-17T03:26:07Z", "author": {"login": "angoenka"}, "path": "sdks/python/apache_beam/runners/dataflow/dataflow_runner.py", "diffHunk": "@@ -950,6 +950,10 @@ def run_ParDo(self, transform_node, options):\n       step.add_property(PropertyNames.RESTRICTION_ENCODING,\n                         self._get_cloud_encoding(restriction_coder))\n \n+    from apache_beam.runners.common import DoFnSignature\n+    if DoFnSignature(transform.dofn).is_stateful_dofn():", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzE0MTkzMA=="}, "originalCommit": {"oid": "e213de285aaf8dcde385873407b6c3ea5ac2cf89"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODA5Nzk4Ng==", "bodyText": "I see, done.", "url": "https://github.com/apache/beam/pull/10596#discussion_r368097986", "createdAt": "2020-01-17T19:24:52Z", "author": {"login": "y1chi"}, "path": "sdks/python/apache_beam/runners/dataflow/dataflow_runner.py", "diffHunk": "@@ -950,6 +950,10 @@ def run_ParDo(self, transform_node, options):\n       step.add_property(PropertyNames.RESTRICTION_ENCODING,\n                         self._get_cloud_encoding(restriction_coder))\n \n+    from apache_beam.runners.common import DoFnSignature\n+    if DoFnSignature(transform.dofn).is_stateful_dofn():", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzE0MTkzMA=="}, "originalCommit": {"oid": "e213de285aaf8dcde385873407b6c3ea5ac2cf89"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2ODQxOTAzOnYy", "diffSide": "RIGHT", "path": "sdks/python/apache_beam/runners/dataflow/dataflow_runner.py", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNVQyMjozMTo1NVrOFeImQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQwMjo0NDozNFrOFeMilA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzE0MjQ2Ng==", "bodyText": "Lets import it at the top of the file.", "url": "https://github.com/apache/beam/pull/10596#discussion_r367142466", "createdAt": "2020-01-15T22:31:55Z", "author": {"login": "angoenka"}, "path": "sdks/python/apache_beam/runners/dataflow/dataflow_runner.py", "diffHunk": "@@ -950,6 +950,10 @@ def run_ParDo(self, transform_node, options):\n       step.add_property(PropertyNames.RESTRICTION_ENCODING,\n                         self._get_cloud_encoding(restriction_coder))\n \n+    from apache_beam.runners.common import DoFnSignature", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e213de285aaf8dcde385873407b6c3ea5ac2cf89"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzIwNzA2MA==", "bodyText": "done.", "url": "https://github.com/apache/beam/pull/10596#discussion_r367207060", "createdAt": "2020-01-16T02:44:34Z", "author": {"login": "y1chi"}, "path": "sdks/python/apache_beam/runners/dataflow/dataflow_runner.py", "diffHunk": "@@ -950,6 +950,10 @@ def run_ParDo(self, transform_node, options):\n       step.add_property(PropertyNames.RESTRICTION_ENCODING,\n                         self._get_cloud_encoding(restriction_coder))\n \n+    from apache_beam.runners.common import DoFnSignature", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzE0MjQ2Ng=="}, "originalCommit": {"oid": "e213de285aaf8dcde385873407b6c3ea5ac2cf89"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2373, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}