{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc4NjA2MDQ2", "number": 10940, "title": "[BEAM-9288] Not bundle conscrypt in gRPC vendor", "bodyText": "Exclude conscrypt from the vendored grpc for now, more detail of discussion can be found in https://issues.apache.org/jira/browse/BEAM-9288.\nPost-Commit Tests Status (on master branch)\n\n\n\nLang\nSDK\nApex\nDataflow\nFlink\nGearpump\nSamza\nSpark\n\n\n\n\nGo\n\n---\n---\n\n---\n---\n\n\n\nJava\n\n\n\n\n\n\n\n\n\nPython\n\n---\n\n\n---\n---\n\n\n\nXLang\n---\n---\n---\n\n---\n---\n\n\n\n\nPre-Commit Tests Status (on master branch)\n\n\n\n---\nJava\nPython\nGo\nWebsite\n\n\n\n\nNon-portable\n\n\n\n\n\n\nPortable\n---\n\n---\n---\n\n\n\nSee .test-infra/jenkins/README for trigger phrase, status and link of all Jenkins jobs.", "createdAt": "2020-02-22T16:24:20Z", "url": "https://github.com/apache/beam/pull/10940", "merged": true, "mergeCommit": {"oid": "d69a852df30291579425b3b80ab389a0f2ab2b25"}, "closed": true, "closedAt": "2020-03-02T03:47:03Z", "author": {"login": "sunjincheng121"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcG92QdABqjMwNjMwNzA5MDE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcIzdxMgFqTM2NjU2NzMxMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6376969f225117476e1ed9073d4ca118a26f3500", "author": {"user": {"login": "sunjincheng121", "name": "Jincheng Sun"}}, "url": "https://github.com/apache/beam/commit/6376969f225117476e1ed9073d4ca118a26f3500", "committedDate": "2020-02-22T16:20:00Z", "message": "[BEAM-9288] Not bundle conscrypt in gRPC vendor"}, "afterCommit": {"oid": "b99483876084f2576aa99a6389ff90002abe1cb2", "author": {"user": {"login": "sunjincheng121", "name": "Jincheng Sun"}}, "url": "https://github.com/apache/beam/commit/b99483876084f2576aa99a6389ff90002abe1cb2", "committedDate": "2020-02-23T00:31:58Z", "message": "[BEAM-9288] Not bundle conscrypt in gRPC vendor"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MDc3Mzkz", "url": "https://github.com/apache/beam/pull/10940#pullrequestreview-366077393", "createdAt": "2020-02-27T23:44:08Z", "commit": {"oid": "b99483876084f2576aa99a6389ff90002abe1cb2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QyMzo0NDowOVrOFvlDZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QyMzo0NDowOVrOFvlDZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTQzNDQ2OQ==", "bodyText": "This does not include the classifier. And since leaving out the classifier is equal to jar (I think always?) it is not just a string comparison.\nDoes Gradle utilities have anything to parse the unshadedDependencies into ProjectDependency objects and then use equality on that object?", "url": "https://github.com/apache/beam/pull/10940#discussion_r385434469", "createdAt": "2020-02-27T23:44:09Z", "author": {"login": "kennknowles"}, "path": "buildSrc/src/main/groovy/org/apache/beam/gradle/VendorJavaPlugin.groovy", "diffHunk": "@@ -286,8 +288,23 @@ artifactId=${project.name}\n               pom.withXml {\n                 def root = asNode()\n                 def dependenciesNode = root.appendNode('dependencies')\n+                def unshaded = { dependency ->\n+                  if (dependency instanceof ProjectDependency) {\n+                    def groupId = dependency.getDependencyProject().mavenGroupId\n+                    def artifactId = dependency.getDependencyProject().archivesBaseName\n+                    def version = dependency.version\n+                    return config.unshadedDependencies != null && config.unshadedDependencies.contains(\"$groupId:$artifactId:$version\")\n+                  } else {\n+                    def groupId = dependency.group\n+                    def artifactId = dependency.name\n+                    def version = dependency.version\n+                    return config.unshadedDependencies != null && config.unshadedDependencies.contains(\"$groupId:$artifactId:$version\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b99483876084f2576aa99a6389ff90002abe1cb2"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MDk0MjUw", "url": "https://github.com/apache/beam/pull/10940#pullrequestreview-366094250", "createdAt": "2020-02-28T00:34:23Z", "commit": {"oid": "b99483876084f2576aa99a6389ff90002abe1cb2"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f9dc1e64428c679067079eb7a1b8424d917bb536", "author": {"user": {"login": "sunjincheng121", "name": "Jincheng Sun"}}, "url": "https://github.com/apache/beam/commit/f9dc1e64428c679067079eb7a1b8424d917bb536", "committedDate": "2020-02-28T08:26:03Z", "message": "[BEAM-9288] Not bundle conscrypt in gRPC vendor"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b99483876084f2576aa99a6389ff90002abe1cb2", "author": {"user": {"login": "sunjincheng121", "name": "Jincheng Sun"}}, "url": "https://github.com/apache/beam/commit/b99483876084f2576aa99a6389ff90002abe1cb2", "committedDate": "2020-02-23T00:31:58Z", "message": "[BEAM-9288] Not bundle conscrypt in gRPC vendor"}, "afterCommit": {"oid": "f9dc1e64428c679067079eb7a1b8424d917bb536", "author": {"user": {"login": "sunjincheng121", "name": "Jincheng Sun"}}, "url": "https://github.com/apache/beam/commit/f9dc1e64428c679067079eb7a1b8424d917bb536", "committedDate": "2020-02-28T08:26:03Z", "message": "[BEAM-9288] Not bundle conscrypt in gRPC vendor"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2NTQ0MTIx", "url": "https://github.com/apache/beam/pull/10940#pullrequestreview-366544121", "createdAt": "2020-02-28T16:56:17Z", "commit": {"oid": "f9dc1e64428c679067079eb7a1b8424d917bb536"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2NTY3MzEx", "url": "https://github.com/apache/beam/pull/10940#pullrequestreview-366567311", "createdAt": "2020-02-28T17:35:09Z", "commit": {"oid": "f9dc1e64428c679067079eb7a1b8424d917bb536"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2857, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}