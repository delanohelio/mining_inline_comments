{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY3Njk1NzUw", "number": 12576, "title": "[BEAM-10671] Add environment configuration fields as first-class pipeline options.", "bodyText": "This PR only changes the Python SDK. The Java and Go SDKs also have\nthese options, which can be changed in future PRs.\n\nThank you for your contribution! Follow this checklist to help us incorporate your contribution quickly and easily:\n\n Choose reviewer(s) and mention them in a comment (R: @username).\n Format the pull request title like [BEAM-XXX] Fixes bug in ApproximateQuantiles, where you replace BEAM-XXX with the appropriate JIRA issue, if applicable. This will automatically link the pull request to the issue.\n Update CHANGES.md with noteworthy changes.\n If this contribution is large, please file an Apache Individual Contributor License Agreement.\n\nSee the Contributor Guide for more tips on how to make review process smoother.\nPost-Commit Tests Status (on master branch)\n\n\n\nLang\nSDK\nDataflow\nFlink\nSamza\nSpark\nTwister2\n\n\n\n\nGo\n\n---\n\n---\n\n---\n\n\nJava\n\n\n\n\n\n\n\n\nPython\n\n\n\n---\n\n---\n\n\nXLang\n\n---\n\n---\n\n---\n\n\n\nPre-Commit Tests Status (on master branch)\n\n\n\n---\nJava\nPython\nGo\nWebsite\n\n\n\n\nNon-portable\n\n\n\n\n\n\nPortable\n---\n\n---\n---\n\n\n\nSee .test-infra/jenkins/README for trigger phrase, status and link of all Jenkins jobs.\nGitHub Actions Tests Status (on master branch)\n\nSee CI.md for more information about GitHub Actions CI.", "createdAt": "2020-08-13T23:57:03Z", "url": "https://github.com/apache/beam/pull/12576", "merged": true, "mergeCommit": {"oid": "d0fbcb25946b8b89cefbe899fc8fe0fd99717632"}, "closed": true, "closedAt": "2020-09-30T13:55:31Z", "author": {"login": "ibzib"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc-7cUXgBqjM2NTc3NDE1NTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdNre8XAFqTQ5ODcxMTMwNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "04f6f48e8f14af1b58a30e2fbcde46de76253d3d", "author": {"user": {"login": "ibzib", "name": "Kyle Weaver"}}, "url": "https://github.com/apache/beam/commit/04f6f48e8f14af1b58a30e2fbcde46de76253d3d", "committedDate": "2020-08-14T21:17:21Z", "message": "lint"}, "afterCommit": {"oid": "231ce8f56c1cb3b3da55ac8cee54f5eac74e1a3c", "author": {"user": {"login": "ibzib", "name": "Kyle Weaver"}}, "url": "https://github.com/apache/beam/commit/231ce8f56c1cb3b3da55ac8cee54f5eac74e1a3c", "committedDate": "2020-08-14T21:24:27Z", "message": "Remove warning about SDK container Python version.\n\nSince the image name itself contains the Python version, a mismatch is unlikely."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "feb1346145af32db66cb6cb03a077b3d61cbba23", "author": {"user": {"login": "ibzib", "name": "Kyle Weaver"}}, "url": "https://github.com/apache/beam/commit/feb1346145af32db66cb6cb03a077b3d61cbba23", "committedDate": "2020-08-18T23:01:18Z", "message": "Add test for environment_type is None"}, "afterCommit": {"oid": "e96b70d03c6007f3b1852ba5d250fe1765702c9a", "author": {"user": {"login": "ibzib", "name": "Kyle Weaver"}}, "url": "https://github.com/apache/beam/commit/e96b70d03c6007f3b1852ba5d250fe1765702c9a", "committedDate": "2020-09-14T22:41:37Z", "message": "Remove warning about SDK container Python version.\n\nSince the image name itself contains the Python version, a mismatch is unlikely."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e96b70d03c6007f3b1852ba5d250fe1765702c9a", "author": {"user": {"login": "ibzib", "name": "Kyle Weaver"}}, "url": "https://github.com/apache/beam/commit/e96b70d03c6007f3b1852ba5d250fe1765702c9a", "committedDate": "2020-09-14T22:41:37Z", "message": "Remove warning about SDK container Python version.\n\nSince the image name itself contains the Python version, a mismatch is unlikely."}, "afterCommit": {"oid": "edb10f3fea029230f4859d1afbff08d23b3e5297", "author": {"user": {"login": "ibzib", "name": "Kyle Weaver"}}, "url": "https://github.com/apache/beam/commit/edb10f3fea029230f4859d1afbff08d23b3e5297", "committedDate": "2020-09-14T22:41:31Z", "message": "[BEAM-10671] Add environment configuration fields as first-class\npipeline options.\n\nThis PR only changes the Python SDK. The Java and Go SDKs also have\nthese options, which can be changed in future PRs."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4NTU4Nzc1", "url": "https://github.com/apache/beam/pull/12576#pullrequestreview-488558775", "createdAt": "2020-09-15T10:51:24Z", "commit": {"oid": "edb10f3fea029230f4859d1afbff08d23b3e5297"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxMDo1MToyNFrOHR8BVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxMDo1MToyNFrOHR8BVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODU3MTIyMg==", "bodyText": "Could we change the option name pattern to env_<type>_<option>?", "url": "https://github.com/apache/beam/pull/12576#discussion_r488571222", "createdAt": "2020-09-15T10:51:24Z", "author": {"login": "mxm"}, "path": "sdks/python/apache_beam/options/pipeline_options.py", "diffHunk": "@@ -1044,7 +1044,12 @@ def _add_argparse_args(cls, parser):\n             'form {\"os\": \"<OS>\", \"arch\": \"<ARCHITECTURE>\", \"command\": '\n             '\"<process to execute>\", \"env\":{\"<Environment variables 1>\": '\n             '\"<ENV_VAL>\"} }. All fields in the json are optional except '\n-            'command.'))\n+            'command.\\n\\nPlease consider using the following '\n+            'options instead, depending on the environment type:\\n'\n+            ' --docker_env_container_image\\n'\n+            ' --process_env_command\\n'\n+            ' --process_env_variables\\n'\n+            ' --external_env_service_address'))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "edb10f3fea029230f4859d1afbff08d23b3e5297"}, "originalPosition": 10}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkwNzE5Mzc1", "url": "https://github.com/apache/beam/pull/12576#pullrequestreview-490719375", "createdAt": "2020-09-17T15:26:32Z", "commit": {"oid": "2710a0e5bc160ba529a7975705df8ee2199e409d"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkxMjk4MzQx", "url": "https://github.com/apache/beam/pull/12576#pullrequestreview-491298341", "createdAt": "2020-09-18T09:26:10Z", "commit": {"oid": "22e3192b3a8552d42b7eaaba70e300ae1e154412"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQwOToyNjoxMVrOHUFQUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQwOToyNjoxMVrOHUFQUw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDgxOTY2Nw==", "bodyText": "We could think about dropping the env_ prefix for the options, e.g. container_image instead of docker_container_image.", "url": "https://github.com/apache/beam/pull/12576#discussion_r490819667", "createdAt": "2020-09-18T09:26:11Z", "author": {"login": "mxm"}, "path": "sdks/python/apache_beam/options/pipeline_options_validator_test.py", "diffHunk": "@@ -613,31 +615,29 @@ def test_environment_options(self):\n         {\n             'options': [\n                 '--environment_type=pRoCeSs',\n-                '--env_process_command=foo',\n+                '--environment_options=process_command=foo',\n                 '--environment_config=foo'\n             ],\n             'errors': ['environment_config']\n         },\n         {\n             'options': [\n                 '--environment_type=pRoCeSs',\n-                '--env_process_command=foo',\n-                '--env_process_variables=foo=bar',\n-                '--env_docker_container_image=foo',\n-                '--env_external_service_address=foo'\n+                '--environment_options=process_command=foo',\n+                '--environment_options=process_variables=foo=bar',\n+                '--environment_options=docker_container_image=foo',\n+                '--environment_options=external_service_address=foo'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "22e3192b3a8552d42b7eaaba70e300ae1e154412"}, "originalPosition": 81}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3MzAyNzYz", "url": "https://github.com/apache/beam/pull/12576#pullrequestreview-497302763", "createdAt": "2020-09-28T08:43:19Z", "commit": {"oid": "51a9819cda81dff35c4bbedaaecc29ba15d95dc6"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "51a9819cda81dff35c4bbedaaecc29ba15d95dc6", "author": {"user": {"login": "ibzib", "name": "Kyle Weaver"}}, "url": "https://github.com/apache/beam/commit/51a9819cda81dff35c4bbedaaecc29ba15d95dc6", "committedDate": "2020-09-18T19:33:05Z", "message": "Update documentation, examples, and tests."}, "afterCommit": {"oid": "8f60bd68ffddd5d654487233fbd30a06024d43ba", "author": {"user": {"login": "ibzib", "name": "Kyle Weaver"}}, "url": "https://github.com/apache/beam/commit/8f60bd68ffddd5d654487233fbd30a06024d43ba", "committedDate": "2020-09-28T20:27:50Z", "message": "[BEAM-10671] Add environment configuration fields as a repeated\npipeline option.\n\nThis PR only changes the Python SDK. The Java and Go SDKs also have\nthese options, which can be changed in future PRs."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk4NTIzNTk5", "url": "https://github.com/apache/beam/pull/12576#pullrequestreview-498523599", "createdAt": "2020-09-29T14:20:30Z", "commit": {"oid": "8f60bd68ffddd5d654487233fbd30a06024d43ba"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c032963eccdb723d2d2ec304df78653923568c25", "author": {"user": {"login": "ibzib", "name": "Kyle Weaver"}}, "url": "https://github.com/apache/beam/commit/c032963eccdb723d2d2ec304df78653923568c25", "committedDate": "2020-09-29T17:06:41Z", "message": "[BEAM-10671] Add environment configuration fields as a repeated pipeline option.\n\nThis PR only changes the Python SDK. The Java and Go SDKs also have these options, which can be changed in future PRs."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8f60bd68ffddd5d654487233fbd30a06024d43ba", "author": {"user": {"login": "ibzib", "name": "Kyle Weaver"}}, "url": "https://github.com/apache/beam/commit/8f60bd68ffddd5d654487233fbd30a06024d43ba", "committedDate": "2020-09-28T20:27:50Z", "message": "[BEAM-10671] Add environment configuration fields as a repeated\npipeline option.\n\nThis PR only changes the Python SDK. The Java and Go SDKs also have\nthese options, which can be changed in future PRs."}, "afterCommit": {"oid": "c032963eccdb723d2d2ec304df78653923568c25", "author": {"user": {"login": "ibzib", "name": "Kyle Weaver"}}, "url": "https://github.com/apache/beam/commit/c032963eccdb723d2d2ec304df78653923568c25", "committedDate": "2020-09-29T17:06:41Z", "message": "[BEAM-10671] Add environment configuration fields as a repeated pipeline option.\n\nThis PR only changes the Python SDK. The Java and Go SDKs also have these options, which can be changed in future PRs."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk4NzExMzA1", "url": "https://github.com/apache/beam/pull/12576#pullrequestreview-498711305", "createdAt": "2020-09-29T17:17:58Z", "commit": {"oid": "c032963eccdb723d2d2ec304df78653923568c25"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3520, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}