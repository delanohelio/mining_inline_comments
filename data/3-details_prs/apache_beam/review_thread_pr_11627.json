{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE0Mzc5MjUz", "number": 11627, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQyMzo0Mzo1MVrOD6CQPQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQyMzo0Mzo1MVrOD6CQPQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYyMTgwOTI1OnYy", "diffSide": "RIGHT", "path": "sdks/python/apache_beam/utils/subprocess_server.py", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQyMzo0Mzo1MVrOGRpRFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QwMDowMzowOFrOGRpomA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTE1NTA5Mw==", "bodyText": "Additional _BEAM_SERVICES?\nIt seems like creating a subclass of threading.local() would work in this case. Why type also works?", "url": "https://github.com/apache/beam/pull/11627#discussion_r421155093", "createdAt": "2020-05-06T23:43:51Z", "author": {"login": "boyuanzz"}, "path": "sdks/python/apache_beam/utils/subprocess_server.py", "diffHunk": "@@ -161,8 +161,9 @@ class JavaJarServer(SubprocessServer):\n   BEAM_GROUP_ID = 'org.apache.beam'\n   JAR_CACHE = os.path.expanduser(\"~/.apache_beam/cache/jars\")\n \n-  _BEAM_SERVICES = threading.local()\n-  _BEAM_SERVICES.replacements = {}\n+  _BEAM_SERVICES = _BEAM_SERVICES = type(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6505ea0046b386f9667c25ced9e5af4868b7ba8f"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTE2MDI5Mw==", "bodyText": "Hmm... not sure how the duplicate got in there.\ntype(...) is actually creating a subclass here.", "url": "https://github.com/apache/beam/pull/11627#discussion_r421160293", "createdAt": "2020-05-07T00:00:34Z", "author": {"login": "robertwb"}, "path": "sdks/python/apache_beam/utils/subprocess_server.py", "diffHunk": "@@ -161,8 +161,9 @@ class JavaJarServer(SubprocessServer):\n   BEAM_GROUP_ID = 'org.apache.beam'\n   JAR_CACHE = os.path.expanduser(\"~/.apache_beam/cache/jars\")\n \n-  _BEAM_SERVICES = threading.local()\n-  _BEAM_SERVICES.replacements = {}\n+  _BEAM_SERVICES = _BEAM_SERVICES = type(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTE1NTA5Mw=="}, "originalCommit": {"oid": "6505ea0046b386f9667c25ced9e5af4868b7ba8f"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTE2MTExMg==", "bodyText": "Thanks! I'll merge it after all tests pass.", "url": "https://github.com/apache/beam/pull/11627#discussion_r421161112", "createdAt": "2020-05-07T00:03:08Z", "author": {"login": "boyuanzz"}, "path": "sdks/python/apache_beam/utils/subprocess_server.py", "diffHunk": "@@ -161,8 +161,9 @@ class JavaJarServer(SubprocessServer):\n   BEAM_GROUP_ID = 'org.apache.beam'\n   JAR_CACHE = os.path.expanduser(\"~/.apache_beam/cache/jars\")\n \n-  _BEAM_SERVICES = threading.local()\n-  _BEAM_SERVICES.replacements = {}\n+  _BEAM_SERVICES = _BEAM_SERVICES = type(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTE1NTA5Mw=="}, "originalCommit": {"oid": "6505ea0046b386f9667c25ced9e5af4868b7ba8f"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3876, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}