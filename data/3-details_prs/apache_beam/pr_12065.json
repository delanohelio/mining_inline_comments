{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM4NDY5NDIx", "number": 12065, "title": "[BEAM-10306] Add latency measurements to Python Flink load test ", "bodyText": "There are currently no latency metrics in the load tests which makes it impossible to monitor latency regressions.\nThis change adds latency to the existing benchmarks.\nDashboard with latency results: https://apache-beam-testing.appspot.com/explore?dashboard=5751884853805056\nPost-Commit Tests Status (on master branch)\n\n\n\nLang\nSDK\nDataflow\nFlink\nSamza\nSpark\n\n\n\n\nGo\n\n---\n\n---\n\n\n\nJava\n\n\n\n\n\n\n\nPython\n\n\n\n---\n\n\n\nXLang\n---\n---\n\n---\n---\n\n\n\nPre-Commit Tests Status (on master branch)\n\n\n\n---\nJava\nPython\nGo\nWebsite\n\n\n\n\nNon-portable\n\n\n\n\n\n\nPortable\n---\n\n---\n---\n\n\n\nSee .test-infra/jenkins/README for trigger phrase, status and link of all Jenkins jobs.", "createdAt": "2020-06-23T10:15:28Z", "url": "https://github.com/apache/beam/pull/12065", "merged": true, "mergeCommit": {"oid": "efaa35f5a4e1a82dd4c84ed3d503c49368cf7507"}, "closed": true, "closedAt": "2020-07-27T15:15:41Z", "author": {"login": "mxm"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcuC4a1ABqjM0NzIyNjI0MjU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc3xzHlAFqTQ1NDI5MDYzMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "873449e9d70339c5c2299f87736a4c94df9fa843", "author": {"user": {"login": "mxm", "name": "Maximilian Michels"}}, "url": "https://github.com/apache/beam/commit/873449e9d70339c5c2299f87736a4c94df9fa843", "committedDate": "2020-06-23T10:15:08Z", "message": "[BEAM-10306] Add load test with windowing and groupbykey"}, "afterCommit": {"oid": "d019de20baeeb8d0492e4ff350d37081d7c7d07e", "author": {"user": {"login": "mxm", "name": "Maximilian Michels"}}, "url": "https://github.com/apache/beam/commit/d019de20baeeb8d0492e4ff350d37081d7c7d07e", "committedDate": "2020-06-23T10:27:23Z", "message": "[BEAM-10306] Add load test with windowing and groupbykey"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d019de20baeeb8d0492e4ff350d37081d7c7d07e", "author": {"user": {"login": "mxm", "name": "Maximilian Michels"}}, "url": "https://github.com/apache/beam/commit/d019de20baeeb8d0492e4ff350d37081d7c7d07e", "committedDate": "2020-06-23T10:27:23Z", "message": "[BEAM-10306] Add load test with windowing and groupbykey"}, "afterCommit": {"oid": "ec721814c9c25906f217ab605ed93b1950b2c162", "author": {"user": {"login": "mxm", "name": "Maximilian Michels"}}, "url": "https://github.com/apache/beam/commit/ec721814c9c25906f217ab605ed93b1950b2c162", "committedDate": "2020-06-23T11:28:28Z", "message": "[BEAM-10306] Add load test with windowing and groupbykey"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0e5974d026ba90831fca0da1e1f7163b755126b7", "author": {"user": {"login": "mxm", "name": "Maximilian Michels"}}, "url": "https://github.com/apache/beam/commit/0e5974d026ba90831fca0da1e1f7163b755126b7", "committedDate": "2020-06-23T12:37:51Z", "message": "Avoid using save_main_session"}, "afterCommit": {"oid": "44aba35acb6573f8943bbabc5533e4acc6a90095", "author": {"user": {"login": "mxm", "name": "Maximilian Michels"}}, "url": "https://github.com/apache/beam/commit/44aba35acb6573f8943bbabc5533e4acc6a90095", "committedDate": "2020-06-23T12:43:11Z", "message": "Avoid using save_main_session"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b1905d4bc5f1b567040b83fa860295b8f84032d9", "author": {"user": {"login": "mxm", "name": "Maximilian Michels"}}, "url": "https://github.com/apache/beam/commit/b1905d4bc5f1b567040b83fa860295b8f84032d9", "committedDate": "2020-06-26T11:15:15Z", "message": "[BEAM-10306] Use event time for timestamps and watermarks"}, "afterCommit": {"oid": "c2d46a679da1170301e5b3fea2d416230c9a2e67", "author": {"user": {"login": "mxm", "name": "Maximilian Michels"}}, "url": "https://github.com/apache/beam/commit/c2d46a679da1170301e5b3fea2d416230c9a2e67", "committedDate": "2020-06-26T13:08:06Z", "message": "[BEAM-10306] Use event time for timestamps and watermarks"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c2d46a679da1170301e5b3fea2d416230c9a2e67", "author": {"user": {"login": "mxm", "name": "Maximilian Michels"}}, "url": "https://github.com/apache/beam/commit/c2d46a679da1170301e5b3fea2d416230c9a2e67", "committedDate": "2020-06-26T13:08:06Z", "message": "[BEAM-10306] Use event time for timestamps and watermarks"}, "afterCommit": {"oid": "dcba242190e49ef81d7aa781ff29f1d2d268cad6", "author": {"user": {"login": "mxm", "name": "Maximilian Michels"}}, "url": "https://github.com/apache/beam/commit/dcba242190e49ef81d7aa781ff29f1d2d268cad6", "committedDate": "2020-06-26T14:28:08Z", "message": "[BEAM-10306] Use event time for timestamps and watermarks"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwMTYwMzI3", "url": "https://github.com/apache/beam/pull/12065#pullrequestreview-440160327", "createdAt": "2020-06-30T15:55:51Z", "commit": {"oid": "dcba242190e49ef81d7aa781ff29f1d2d268cad6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQxNTo1NTo1MVrOGrDNng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQxNTo1NTo1MVrOGrDNng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzc5NDU5MA==", "bodyText": "Just out of curiosity, could you explain, why do we need GroupByKey in this place?", "url": "https://github.com/apache/beam/pull/12065#discussion_r447794590", "createdAt": "2020-06-30T15:55:51Z", "author": {"login": "kamilwu"}, "path": "sdks/python/apache_beam/testing/load_tests/pardo_test.py", "diffHunk": "@@ -147,10 +151,18 @@ def process(self, element, state=state_param):\n               CounterOperation(\n                   self.number_of_counters, self.number_of_operations)))\n \n+    if self.window:\n+      pc = (\n+          pc\n+          | beam.WindowInto(beam.window.FixedWindows(1))\n+          | beam.GroupByKey())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dcba242190e49ef81d7aa781ff29f1d2d268cad6"}, "originalPosition": 33}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dcba242190e49ef81d7aa781ff29f1d2d268cad6", "author": {"user": {"login": "mxm", "name": "Maximilian Michels"}}, "url": "https://github.com/apache/beam/commit/dcba242190e49ef81d7aa781ff29f1d2d268cad6", "committedDate": "2020-06-26T14:28:08Z", "message": "[BEAM-10306] Use event time for timestamps and watermarks"}, "afterCommit": {"oid": "1c78e3170e711178d212d3e1026b49462caccc97", "author": {"user": {"login": "mxm", "name": "Maximilian Michels"}}, "url": "https://github.com/apache/beam/commit/1c78e3170e711178d212d3e1026b49462caccc97", "committedDate": "2020-07-07T15:49:18Z", "message": "[BEAM-10306] Advance watermark for windowing and state cleanup"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1c78e3170e711178d212d3e1026b49462caccc97", "author": {"user": {"login": "mxm", "name": "Maximilian Michels"}}, "url": "https://github.com/apache/beam/commit/1c78e3170e711178d212d3e1026b49462caccc97", "committedDate": "2020-07-07T15:49:18Z", "message": "[BEAM-10306] Advance watermark for windowing and state cleanup"}, "afterCommit": {"oid": "e5a61e8c05f28db5b399f4395181370f794ff976", "author": {"user": {"login": "mxm", "name": "Maximilian Michels"}}, "url": "https://github.com/apache/beam/commit/e5a61e8c05f28db5b399f4395181370f794ff976", "committedDate": "2020-07-21T15:29:23Z", "message": "[BEAM-10306] Add latency measurements to Python Flink load test\n\nThere are currently no latency metrics in the load tests which makes it\nimpossible to monitor latency regressions."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1184987f6b288dfd1cab4d94f4ff6148c1d32bbf", "author": {"user": {"login": "mxm", "name": "Maximilian Michels"}}, "url": "https://github.com/apache/beam/commit/1184987f6b288dfd1cab4d94f4ff6148c1d32bbf", "committedDate": "2020-07-21T15:40:12Z", "message": "[BEAM-10306] Add latency measurements to Python Flink ParDo load test\n\nThere are currently no latency metrics in the load tests which makes it\nimpossible to monitor latency regressions."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "716bba405571c462d107e33cc123fbff08594990", "author": {"user": {"login": "mxm", "name": "Maximilian Michels"}}, "url": "https://github.com/apache/beam/commit/716bba405571c462d107e33cc123fbff08594990", "committedDate": "2020-07-21T15:40:13Z", "message": "[BEAM-10306] Add latency measurements to Python Flink GroupByKey load test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e5a61e8c05f28db5b399f4395181370f794ff976", "author": {"user": {"login": "mxm", "name": "Maximilian Michels"}}, "url": "https://github.com/apache/beam/commit/e5a61e8c05f28db5b399f4395181370f794ff976", "committedDate": "2020-07-21T15:29:23Z", "message": "[BEAM-10306] Add latency measurements to Python Flink load test\n\nThere are currently no latency metrics in the load tests which makes it\nimpossible to monitor latency regressions."}, "afterCommit": {"oid": "716bba405571c462d107e33cc123fbff08594990", "author": {"user": {"login": "mxm", "name": "Maximilian Michels"}}, "url": "https://github.com/apache/beam/commit/716bba405571c462d107e33cc123fbff08594990", "committedDate": "2020-07-21T15:40:13Z", "message": "[BEAM-10306] Add latency measurements to Python Flink GroupByKey load test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU0MjkwNjMx", "url": "https://github.com/apache/beam/pull/12065#pullrequestreview-454290631", "createdAt": "2020-07-23T16:13:06Z", "commit": {"oid": "716bba405571c462d107e33cc123fbff08594990"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3730, "cost": 1, "resetAt": "2021-10-28T16:48:13Z"}}}