{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI3NzczNTg0", "number": 13432, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxODoxMDozMlrOE-xwKg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxODoxMjoxNlrOE-xy1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM0MjYyMzE0OnYy", "diffSide": "RIGHT", "path": "sdks/python/apache_beam/runners/portability/fn_api_runner/translations.py", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxODoxMDozMlrOH8HcyQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQwMDo0NDo0NVrOH8Toew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjc5ODY2NQ==", "bodyText": "s/lsat/last/", "url": "https://github.com/apache/beam/pull/13432#discussion_r532798665", "createdAt": "2020-11-30T18:10:32Z", "author": {"login": "robertwb"}, "path": "sdks/python/apache_beam/runners/portability/fn_api_runner/translations.py", "diffHunk": "@@ -557,8 +557,13 @@ def add_parent(child, parent):\n             pipeline_proto.components.transforms[parent])\n         copy_output_pcollections(components.transforms[parent])\n         del components.transforms[parent].subtransforms[:]\n-        add_parent(parent, parents.get(parent))\n+      # Ensure that child is the lsat item in the parent's subtransforms.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "219217f447a11e03043a58f4895149c9c66368f2"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjk5ODI2Nw==", "bodyText": "Thanks for catching; fixed.", "url": "https://github.com/apache/beam/pull/13432#discussion_r532998267", "createdAt": "2020-12-01T00:44:45Z", "author": {"login": "yifanmai"}, "path": "sdks/python/apache_beam/runners/portability/fn_api_runner/translations.py", "diffHunk": "@@ -557,8 +557,13 @@ def add_parent(child, parent):\n             pipeline_proto.components.transforms[parent])\n         copy_output_pcollections(components.transforms[parent])\n         del components.transforms[parent].subtransforms[:]\n-        add_parent(parent, parents.get(parent))\n+      # Ensure that child is the lsat item in the parent's subtransforms.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjc5ODY2NQ=="}, "originalCommit": {"oid": "219217f447a11e03043a58f4895149c9c66368f2"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM0MjYyOTk5OnYy", "diffSide": "RIGHT", "path": "sdks/python/apache_beam/runners/portability/fn_api_runner/translations.py", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxODoxMjoxNlrOH8Hg6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQwMDo0NjoyNFrOH8TqtQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjc5OTcyMw==", "bodyText": "Isn't sort_stages called before this? Or did you mean this is required to maintain the topolicial order from sort_stages?", "url": "https://github.com/apache/beam/pull/13432#discussion_r532799723", "createdAt": "2020-11-30T18:12:16Z", "author": {"login": "robertwb"}, "path": "sdks/python/apache_beam/runners/portability/fn_api_runner/translations.py", "diffHunk": "@@ -557,8 +557,13 @@ def add_parent(child, parent):\n             pipeline_proto.components.transforms[parent])\n         copy_output_pcollections(components.transforms[parent])\n         del components.transforms[parent].subtransforms[:]\n-        add_parent(parent, parents.get(parent))\n+      # Ensure that child is the lsat item in the parent's subtransforms.\n+      # This is required to maintain topological order with sort_stages.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "219217f447a11e03043a58f4895149c9c66368f2"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjk5ODgzNw==", "bodyText": "Rephrased to make this clearer (topological order is maintained only if sort_stages was previously called).", "url": "https://github.com/apache/beam/pull/13432#discussion_r532998837", "createdAt": "2020-12-01T00:46:24Z", "author": {"login": "yifanmai"}, "path": "sdks/python/apache_beam/runners/portability/fn_api_runner/translations.py", "diffHunk": "@@ -557,8 +557,13 @@ def add_parent(child, parent):\n             pipeline_proto.components.transforms[parent])\n         copy_output_pcollections(components.transforms[parent])\n         del components.transforms[parent].subtransforms[:]\n-        add_parent(parent, parents.get(parent))\n+      # Ensure that child is the lsat item in the parent's subtransforms.\n+      # This is required to maintain topological order with sort_stages.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjc5OTcyMw=="}, "originalCommit": {"oid": "219217f447a11e03043a58f4895149c9c66368f2"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2671, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}