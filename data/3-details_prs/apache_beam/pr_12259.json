{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ5MTc5Mzgx", "number": 12259, "title": "[BEAM-9561] Run Pandas tests on Beam.", "bodyText": "Few tests are actually run at this point, but we can enable them as implementations are added and/or validated.\n\nThank you for your contribution! Follow this checklist to help us incorporate your contribution quickly and easily:\n\n Choose reviewer(s) and mention them in a comment (R: @username).\n Format the pull request title like [BEAM-XXX] Fixes bug in ApproximateQuantiles, where you replace BEAM-XXX with the appropriate JIRA issue, if applicable. This will automatically link the pull request to the issue.\n Update CHANGES.md with noteworthy changes.\n If this contribution is large, please file an Apache Individual Contributor License Agreement.\n\nSee the Contributor Guide for more tips on how to make review process smoother.\nPost-Commit Tests Status (on master branch)\n\n\n\nLang\nSDK\nDataflow\nFlink\nSamza\nSpark\nTwister2\n\n\n\n\nGo\n\n---\n\n---\n\n---\n\n\nJava\n\n\n\n\n\n\n\n\nPython\n\n\n\n---\n\n---\n\n\nXLang\n\n---\n\n---\n\n---\n\n\n\nPre-Commit Tests Status (on master branch)\n\n\n\n---\nJava\nPython\nGo\nWebsite\n\n\n\n\nNon-portable\n\n\n\n\n\n\nPortable\n---\n\n---\n---\n\n\n\nSee .test-infra/jenkins/README for trigger phrase, status and link of all Jenkins jobs.", "createdAt": "2020-07-15T00:35:21Z", "url": "https://github.com/apache/beam/pull/12259", "merged": true, "mergeCommit": {"oid": "063a1025be1eac66284a4d645424917e4230d843"}, "closed": true, "closedAt": "2020-07-17T17:23:13Z", "author": {"login": "robertwb"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc0_j5FAH2gAyNDQ5MTc5MzgxOjIzNWM5MDVhNDIwZGFhMmI4YTAwNzk3Zjg3MWJlMTk5MTIzNmNlYTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc12gMDABqjM1NTg5MTkyNTc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "235c905a420daa2b8a00797f871be1991236cea5", "author": {"user": {"login": "robertwb", "name": "Robert Bradshaw"}}, "url": "https://github.com/apache/beam/commit/235c905a420daa2b8a00797f871be1991236cea5", "committedDate": "2020-07-15T00:33:22Z", "message": "Ignore NameErrors right after WontImplementErrors."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5538d9e73d94cf30a87b9a4cd78a426b7a6b2d86", "author": {"user": {"login": "robertwb", "name": "Robert Bradshaw"}}, "url": "https://github.com/apache/beam/commit/5538d9e73d94cf30a87b9a4cd78a426b7a6b2d86", "committedDate": "2020-07-15T00:33:22Z", "message": "Add doctest skipping framework."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwMjA3MDI1", "url": "https://github.com/apache/beam/pull/12259#pullrequestreview-450207025", "createdAt": "2020-07-16T20:51:40Z", "commit": {"oid": "b646a6e1f3a06a5d978515d385092e464ab3f6ce"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQyMDo1Njo1M1rOGy8f_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQyMTowMDowNFrOGy8mKw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjA3MzIxMg==", "bodyText": "Should we support regex matching here, or is that overkill?", "url": "https://github.com/apache/beam/pull/12259#discussion_r456073212", "createdAt": "2020-07-16T20:56:53Z", "author": {"login": "ibzib"}, "path": "sdks/python/apache_beam/dataframe/doctests.py", "diffHunk": "@@ -240,13 +256,31 @@ class BeamDataframeDoctestRunner(doctest.DocTestRunner):\n   \"\"\"A Doctest runner suitable for replacing the `pd` module with one backed\n   by beam.\n   \"\"\"\n-  def __init__(self, env, use_beam=True, **kwargs):\n+  def __init__(self, env, use_beam=True, skip=None, **kwargs):\n     self._test_env = env\n+\n+    def to_callable(cond):\n+      if cond == '*':", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b646a6e1f3a06a5d978515d385092e464ab3f6ce"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjA3NDc5NQ==", "bodyText": "Why should running one line successfully reset _seen_wont_implement?", "url": "https://github.com/apache/beam/pull/12259#discussion_r456074795", "createdAt": "2020-07-16T21:00:04Z", "author": {"login": "ibzib"}, "path": "sdks/python/apache_beam/dataframe/doctests_test.py", "diffHunk": "@@ -63,6 +63,20 @@\n ignored result\n '''\n \n+ERROR_RAISING_NAME_ERROR_TESTS = '''\n+>>> import apache_beam\n+>>> raise apache_beam.dataframe.frame_base.WontImplementError('anything')\n+ignored exception\n+>>> raise NameError\n+ignored exception\n+>>> undefined_name\n+ignored exception\n+>>> 2 + 2", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b646a6e1f3a06a5d978515d385092e464ab3f6ce"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwMzEwMTgw", "url": "https://github.com/apache/beam/pull/12259#pullrequestreview-450310180", "createdAt": "2020-07-17T01:02:30Z", "commit": {"oid": "b646a6e1f3a06a5d978515d385092e464ab3f6ce"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QwMTowMjozMVrOGzB1Lg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QwMTowMjozMVrOGzB1Lg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjE2MDU1OA==", "bodyText": "That sounds fine. If we encounter an issue like this example simulates, I assume we can always manually add the test to the skip map.", "url": "https://github.com/apache/beam/pull/12259#discussion_r456160558", "createdAt": "2020-07-17T01:02:31Z", "author": {"login": "ibzib"}, "path": "sdks/python/apache_beam/dataframe/doctests_test.py", "diffHunk": "@@ -63,6 +63,20 @@\n ignored result\n '''\n \n+ERROR_RAISING_NAME_ERROR_TESTS = '''\n+>>> import apache_beam\n+>>> raise apache_beam.dataframe.frame_base.WontImplementError('anything')\n+ignored exception\n+>>> raise NameError\n+ignored exception\n+>>> undefined_name\n+ignored exception\n+>>> 2 + 2", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjA3NDc5NQ=="}, "originalCommit": {"oid": "b646a6e1f3a06a5d978515d385092e464ab3f6ce"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e324b5cd94988021ed8def741e2ac54e094ec7f3", "author": {"user": {"login": "robertwb", "name": "Robert Bradshaw"}}, "url": "https://github.com/apache/beam/commit/e324b5cd94988021ed8def741e2ac54e094ec7f3", "committedDate": "2020-07-17T16:33:52Z", "message": "Add tests for all Pandas DataFrame and Series tests.\n\nCurrently all tests are skipped, but we can unskip them as we validate\nthe Beam implementations."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b646a6e1f3a06a5d978515d385092e464ab3f6ce", "author": {"user": {"login": "robertwb", "name": "Robert Bradshaw"}}, "url": "https://github.com/apache/beam/commit/b646a6e1f3a06a5d978515d385092e464ab3f6ce", "committedDate": "2020-07-16T03:39:01Z", "message": "lint"}, "afterCommit": {"oid": "e324b5cd94988021ed8def741e2ac54e094ec7f3", "author": {"user": {"login": "robertwb", "name": "Robert Bradshaw"}}, "url": "https://github.com/apache/beam/commit/e324b5cd94988021ed8def741e2ac54e094ec7f3", "committedDate": "2020-07-17T16:33:52Z", "message": "Add tests for all Pandas DataFrame and Series tests.\n\nCurrently all tests are skipped, but we can unskip them as we validate\nthe Beam implementations."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4105, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}