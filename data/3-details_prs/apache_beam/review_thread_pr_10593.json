{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYyODk4MDIz", "number": 10593, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQwMDoxODo0N1rODYWj7w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQwMDoyNToyN1rODYWobQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2ODYyMDYzOnYy", "diffSide": "RIGHT", "path": "sdks/python/apache_beam/runners/common.py", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQwMDoxODo0N1rOFeKicw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQyMjozODoxNlrOFgtfnA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzE3NDI1OQ==", "bodyText": "Feels like it's time to make a named tuple here...", "url": "https://github.com/apache/beam/pull/10593#discussion_r367174259", "createdAt": "2020-01-16T00:18:47Z", "author": {"login": "robertwb"}, "path": "sdks/python/apache_beam/runners/common.py", "diffHunk": "@@ -61,6 +61,9 @@\n   from apache_beam.transforms import sideinputs\n   from apache_beam.transforms.core import TimerSpec\n \n+SplitResultType = Tuple[", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6abebd91acd26fdb377ae3fd6d1e80ee102d1559"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzE4NTU0Mw==", "bodyText": "I agree it would help a bit.  I searched around for places where we access individual elements of this tuple, and there aren't many cases. Here's the one I found:\n  def bundle_application(self,\n                         op,  # type: operations.DoOperation\n                         primary  # type: common.SplitResultType\n                        ):\n    ((element_and_restriction, output_watermark),\n     _) = primary\n    return self.construct_bundle_application(\n        op, output_watermark, element_and_restriction)\nWhat name would you give to each item?\nSplitResult = NamedTuple(\n    'SplitResult', [\n        ('???', Tuple[WindowedValue, Optional[Timestamp]]), \n        ('???', Optional[Timestamp])\n    ])", "url": "https://github.com/apache/beam/pull/10593#discussion_r367185543", "createdAt": "2020-01-16T01:04:25Z", "author": {"login": "chadrik"}, "path": "sdks/python/apache_beam/runners/common.py", "diffHunk": "@@ -61,6 +61,9 @@\n   from apache_beam.transforms import sideinputs\n   from apache_beam.transforms.core import TimerSpec\n \n+SplitResultType = Tuple[", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzE3NDI1OQ=="}, "originalCommit": {"oid": "6abebd91acd26fdb377ae3fd6d1e80ee102d1559"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTg0NDEyNA==", "bodyText": "Maybe WatermarkedElement and CallbackTimestamp? Talking to @boyuanzz this code is actively being developed, so it might make sense to hold off a bit. In particular, the splits are not entirely symmetric (e.g. a primary only ever has the WindowedValue, while the Residual is more properly a Tuple[WindowedValue, Optiona[Timestamp], Optional[Timestamp]].", "url": "https://github.com/apache/beam/pull/10593#discussion_r369844124", "createdAt": "2020-01-22T22:38:16Z", "author": {"login": "robertwb"}, "path": "sdks/python/apache_beam/runners/common.py", "diffHunk": "@@ -61,6 +61,9 @@\n   from apache_beam.transforms import sideinputs\n   from apache_beam.transforms.core import TimerSpec\n \n+SplitResultType = Tuple[", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzE3NDI1OQ=="}, "originalCommit": {"oid": "6abebd91acd26fdb377ae3fd6d1e80ee102d1559"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2ODYzMjEzOnYy", "diffSide": "RIGHT", "path": "sdks/python/apache_beam/runners/worker/bundle_processor.py", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQwMDoyNToyN1rOFeKpVQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQwMDoyNToyN1rOFeKpVQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzE3NjAyMQ==", "bodyText": "Some named tuples, or even a named type, could help for Optional[Tuple[operations.DoOperation, common.SplitResultType]]", "url": "https://github.com/apache/beam/pull/10593#discussion_r367176021", "createdAt": "2020-01-16T00:25:27Z", "author": {"login": "robertwb"}, "path": "sdks/python/apache_beam/runners/worker/bundle_processor.py", "diffHunk": "@@ -205,16 +205,17 @@ def process_encoded(self, encoded_windowed_values):\n       self.output(decoded_value)\n \n   def try_split(self, fraction_of_remainder, total_buffer_size):\n+    # type: (...) -> Optional[Tuple[int, Optional[Tuple[operations.DoOperation, common.SplitResultType]], Optional[Tuple[operations.DoOperation, common.SplitResultType]], int]]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6abebd91acd26fdb377ae3fd6d1e80ee102d1559"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2366, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}