{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc0OTk5NjIy", "number": 12708, "title": "[BEAM-10670] Update Flink to be opt-out for SplittableDoFn powering the Read transform.", "bodyText": "Thank you for your contribution! Follow this checklist to help us incorporate your contribution quickly and easily:\n\n Choose reviewer(s) and mention them in a comment (R: @username).\n Format the pull request title like [BEAM-XXX] Fixes bug in ApproximateQuantiles, where you replace BEAM-XXX with the appropriate JIRA issue, if applicable. This will automatically link the pull request to the issue.\n Update CHANGES.md with noteworthy changes.\n If this contribution is large, please file an Apache Individual Contributor License Agreement.\n\nSee the Contributor Guide for more tips on how to make review process smoother.\nPost-Commit Tests Status (on master branch)\n\n\n\nLang\nSDK\nDataflow\nFlink\nSamza\nSpark\nTwister2\n\n\n\n\nGo\n\n---\n\n---\n\n---\n\n\nJava\n\n\n\n\n\n\n\n\nPython\n\n\n\n---\n\n---\n\n\nXLang\n\n---\n\n---\n\n---\n\n\n\nPre-Commit Tests Status (on master branch)\n\n\n\n---\nJava\nPython\nGo\nWebsite\nWhitespace\n\n\n\n\nNon-portable\n\n \n\n\n\n\n\nPortable\n---\n\n---\n---\n---\n\n\n\nSee .test-infra/jenkins/README for trigger phrase, status and link of all Jenkins jobs.\nGitHub Actions Tests Status (on master branch)\n\n\n\nSee CI.md for more information about GitHub Actions CI.", "createdAt": "2020-08-27T23:18:23Z", "url": "https://github.com/apache/beam/pull/12708", "merged": true, "mergeCommit": {"oid": "80599ad8e89b2d833f5ae499caeced79ed03248c"}, "closed": true, "closedAt": "2020-09-11T20:10:18Z", "author": {"login": "lukecwik"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdDHdPegH2gAyNDc0OTk5NjIyOmI2NGE5ZTgzMjg4OTNhNDdjZjJhNmJjZDUyMjE4MjUzZDY1ZmVmYmM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdDXIL9AFqTQ3Nzg0Mzg5Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b64a9e8328893a47cf2a6bcd52218253d65fefbc", "author": {"user": {"login": "lukecwik", "name": "Lukasz Cwik"}}, "url": "https://github.com/apache/beam/commit/b64a9e8328893a47cf2a6bcd52218253d65fefbc", "committedDate": "2020-08-27T21:40:17Z", "message": "[BEAM-10670] Add support for bundle finalization to DoFnOperator for non-portable streaming pipelines.\n\nI used the UnboundedSourceFunction as a guide to implementing the bundle finalization hook for the DoFnOperator.\nSince checkpointing support is only supported when using shutdownSourcesAfterIdleMs so I added a new validates runner task that runs a subset of the tests that rely on bundle finalization.\n\nI also added support for Impulse translation for non-portable streaming pipelines."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1947ab0770f2bd90dfb9bea8d2c461f3a6656e6c", "author": {"user": {"login": "lukecwik", "name": "Lukasz Cwik"}}, "url": "https://github.com/apache/beam/commit/1947ab0770f2bd90dfb9bea8d2c461f3a6656e6c", "committedDate": "2020-08-27T23:16:14Z", "message": "[BEAM-10670] Make Flink to be opt-out for SplittableDoFn powering the Read transform."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "35dfe25f5ee41ccc09faa4e0749ecd9a10f904bc", "author": {"user": {"login": "lukecwik", "name": "Lukasz Cwik"}}, "url": "https://github.com/apache/beam/commit/35dfe25f5ee41ccc09faa4e0749ecd9a10f904bc", "committedDate": "2020-08-28T04:30:09Z", "message": "fixup! Fix translation issue where we should never be translating composite Read transforms."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3NDY5ODI0", "url": "https://github.com/apache/beam/pull/12708#pullrequestreview-477469824", "createdAt": "2020-08-28T08:08:43Z", "commit": {"oid": "35dfe25f5ee41ccc09faa4e0749ecd9a10f904bc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQwODowODo0NFrOHIu7TQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQwODowODo0NFrOHIu7TQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODkxOTUwMQ==", "bodyText": "How will this work with the opt-out of SDF? Will primitive Reads still be translated then?", "url": "https://github.com/apache/beam/pull/12708#discussion_r478919501", "createdAt": "2020-08-28T08:08:44Z", "author": {"login": "mxm"}, "path": "runners/flink/src/main/java/org/apache/beam/runners/flink/FlinkStreamingPipelineTranslator.java", "diffHunk": "@@ -99,6 +99,13 @@ public CompositeBehavior enterCompositeTransform(TransformHierarchy.Node node) {\n \n     PTransform<?, ?> transform = node.getTransform();\n     if (transform != null) {\n+      // TODO(BEAM-10670): Remove this and the ReadTranslator once the \"use_deprecated_read\"\n+      // experiment is removed. Don't translate composite Read transforms since we expect the\n+      // primitive expansion containing an SDF to be used.\n+      if (PTransformTranslation.READ_TRANSFORM_URN.equals(\n+          PTransformTranslation.urnForTransformOrNull(transform))) {\n+        return CompositeBehavior.ENTER_TRANSFORM;\n+      }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "35dfe25f5ee41ccc09faa4e0749ecd9a10f904bc"}, "originalPosition": 10}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3ODQzODk3", "url": "https://github.com/apache/beam/pull/12708#pullrequestreview-477843897", "createdAt": "2020-08-28T15:55:46Z", "commit": {"oid": "35dfe25f5ee41ccc09faa4e0749ecd9a10f904bc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4522, "cost": 1, "resetAt": "2021-10-28T16:48:13Z"}}}