{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA2MzE1NTYz", "number": 13142, "title": "[BEAM-5939] - Deduplicate constants", "bodyText": "This should solve this Jira issue.\napache_beam/runners/dataflow/internal/names.py\napache_beam/runners/portability/stager.py\nhad same constants defined in both files, this pull request should resolve it.", "createdAt": "2020-10-19T22:24:49Z", "url": "https://github.com/apache/beam/pull/13142", "merged": true, "mergeCommit": {"oid": "f4bf9c509450b8c76ff286da2d771965221d6e85"}, "closed": true, "closedAt": "2020-11-02T13:34:27Z", "author": {"login": "tszerszen"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdUt_VzABqjM5MDQxMjg0MDU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdXkMnFgH2gAyNTA2MzE1NTYzOjU3ZGY5M2EyMTgwM2UxZDA2YWJlZWUyNjY5ZTc4YTQ1YzQ2ZWY5NWU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0ea7d44d9a472549b2b1dd49a2c6c74c82527b7e", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/0ea7d44d9a472549b2b1dd49a2c6c74c82527b7e", "committedDate": "2020-10-21T07:27:07Z", "message": "#5939 fix linting errors"}, "afterCommit": {"oid": "ea4400c460485ecbe7a5523598ad5736bccd9efc", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/ea4400c460485ecbe7a5523598ad5736bccd9efc", "committedDate": "2020-10-21T14:09:50Z", "message": "[BEAM-5939] - Deduplicate constants"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ea4400c460485ecbe7a5523598ad5736bccd9efc", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/ea4400c460485ecbe7a5523598ad5736bccd9efc", "committedDate": "2020-10-21T14:09:50Z", "message": "[BEAM-5939] - Deduplicate constants"}, "afterCommit": {"oid": "0ea7d44d9a472549b2b1dd49a2c6c74c82527b7e", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/0ea7d44d9a472549b2b1dd49a2c6c74c82527b7e", "committedDate": "2020-10-21T07:27:07Z", "message": "#5939 fix linting errors"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0ea7d44d9a472549b2b1dd49a2c6c74c82527b7e", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/0ea7d44d9a472549b2b1dd49a2c6c74c82527b7e", "committedDate": "2020-10-21T07:27:07Z", "message": "#5939 fix linting errors"}, "afterCommit": {"oid": "720e1f965a29bb54359b81c49c605c0d3348eb40", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/720e1f965a29bb54359b81c49c605c0d3348eb40", "committedDate": "2020-10-21T14:16:23Z", "message": "[BEAM-5939] - Deduplicate constants\n\n[BEAM-5939] - Deduplicate constants"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "846b3839a93813fcea739ea29d2c33fb68635f06", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/846b3839a93813fcea739ea29d2c33fb68635f06", "committedDate": "2020-10-28T08:09:05Z", "message": "[BEAM-5939] - Deduplicate constants"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ceea5297bb8b0be00f2f0c2001020a5d5c1921cf", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/ceea5297bb8b0be00f2f0c2001020a5d5c1921cf", "committedDate": "2020-10-27T12:22:52Z", "message": "fix stager and test"}, "afterCommit": {"oid": "846b3839a93813fcea739ea29d2c33fb68635f06", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/846b3839a93813fcea739ea29d2c33fb68635f06", "committedDate": "2020-10-28T08:09:05Z", "message": "[BEAM-5939] - Deduplicate constants"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f15bb54853c004e5d39a0d7b49e5dc93e867260f", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/f15bb54853c004e5d39a0d7b49e5dc93e867260f", "committedDate": "2020-10-28T08:50:03Z", "message": "[BEAM-5939] - Deduplicate constants: run pre-commit run --all-files"}, "afterCommit": {"oid": "846b3839a93813fcea739ea29d2c33fb68635f06", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/846b3839a93813fcea739ea29d2c33fb68635f06", "committedDate": "2020-10-28T08:09:05Z", "message": "[BEAM-5939] - Deduplicate constants"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5MTI0NjA3", "url": "https://github.com/apache/beam/pull/13142#pullrequestreview-519124607", "createdAt": "2020-10-28T22:13:59Z", "commit": {"oid": "846b3839a93813fcea739ea29d2c33fb68635f06"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQyMjoxMzo1OVrOHp_eJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQyMjozNToyOFrOHqAAQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzc5MzU3Mw==", "bodyText": "Let's rename this to:\nSTAGED_SDK_SOURCES_FILENAME = 'dataflow_python_sdk.tar'  # Current value is hardcoded in Dataflow internal infrastructure; please don't change without a review from Dataflow maintainers.", "url": "https://github.com/apache/beam/pull/13142#discussion_r513793573", "createdAt": "2020-10-28T22:13:59Z", "author": {"login": "tvalentyn"}, "path": "sdks/python/apache_beam/runners/internal/names.py", "diffHunk": "@@ -20,8 +20,11 @@\n # All constants are for internal use only; no backwards-compatibility\n # guarantees.\n \n+DATAFLOW_SDK_TARBALL_FILE = 'dataflow_python_sdk.tar'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "846b3839a93813fcea739ea29d2c33fb68635f06"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzgwMjMwNg==", "bodyText": "I think we could avoid importing all of these except for PICKLED_MAIN_SESSION_FILE, and update all references in Beam codeabase to use apache_beam.runners.internal.names instead, similar what we do in apiclient.py.\n# pylint: disable=unused-import\n# Used by Dataflow legacy worker. \nfrom apache_beam.runners.internal.names import PICKLED_MAIN_SESSION_FILE", "url": "https://github.com/apache/beam/pull/13142#discussion_r513802306", "createdAt": "2020-10-28T22:35:28Z", "author": {"login": "tvalentyn"}, "path": "sdks/python/apache_beam/runners/dataflow/internal/names.py", "diffHunk": "@@ -27,7 +27,13 @@\n # Standard file names used for staging files.\n from builtins import object\n \n-DATAFLOW_SDK_TARBALL_FILE = 'dataflow_python_sdk.tar'\n+# pylint: disable=unused-import\n+from apache_beam.runners.internal.names import DATAFLOW_SDK_TARBALL_FILE\n+from apache_beam.runners.internal.names import PICKLED_MAIN_SESSION_FILE", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "846b3839a93813fcea739ea29d2c33fb68635f06"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e6346d132c362770fc72ce04e684600eb006529", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/8e6346d132c362770fc72ce04e684600eb006529", "committedDate": "2020-10-29T07:28:21Z", "message": "[BEAM-5939] - Deduplicate constants"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "762cb65fbf49d3ee9dd9cf29527e91e92cb25c38", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/762cb65fbf49d3ee9dd9cf29527e91e92cb25c38", "committedDate": "2020-10-29T09:48:29Z", "message": "[BEAM-5939] - Deduplicate constants"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "57df93a21803e1d06abeee2669e78a45c46ef95e", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/57df93a21803e1d06abeee2669e78a45c46ef95e", "committedDate": "2020-10-30T10:27:51Z", "message": "[BEAM-5939] - Deduplicate constants"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2131, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}