{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAxODcxNTcz", "number": 13080, "title": "[BEAM-11056] Fix warning message and rename old APIs", "bodyText": "Replaced capture with record in top level APIs accessible by\nusers.\nFixed some formatting in the loggings.\n\n\nThank you for your contribution! Follow this checklist to help us incorporate your contribution quickly and easily:\n\n Choose reviewer(s) and mention them in a comment (R: @username).\n Format the pull request title like [BEAM-XXX] Fixes bug in ApproximateQuantiles, where you replace BEAM-XXX with the appropriate JIRA issue, if applicable. This will automatically link the pull request to the issue.\n Update CHANGES.md with noteworthy changes.\n If this contribution is large, please file an Apache Individual Contributor License Agreement.\n\nSee the Contributor Guide for more tips on how to make review process smoother.\nPost-Commit Tests Status (on master branch)\n\n\n\nLang\nSDK\nDataflow\nFlink\nSamza\nSpark\nTwister2\n\n\n\n\nGo\n\n---\n\n---\n\n---\n\n\nJava\n\n\n\n\n\n\n\n\nPython\n\n\n\n---\n\n---\n\n\nXLang\n\n---\n\n---\n\n---\n\n\n\nPre-Commit Tests Status (on master branch)\n\n\n\n---\nJava\nPython\nGo\nWebsite\nWhitespace\nTypescript\n\n\n\n\nNon-portable\n\n \n\n\n\n\n\n\nPortable\n---\n\n---\n---\n---\n---\n\n\n\nSee .test-infra/jenkins/README for trigger phrase, status and link of all Jenkins jobs.\nGitHub Actions Tests Status (on master branch)\n\n\n\nSee CI.md for more information about GitHub Actions CI.", "createdAt": "2020-10-12T23:16:58Z", "url": "https://github.com/apache/beam/pull/13080", "merged": true, "mergeCommit": {"oid": "11dc94d5b5c76de2c82f039c31b76a687b37b3b1"}, "closed": true, "closedAt": "2020-10-13T16:01:31Z", "author": {"login": "KevinGG"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdR8WjQgH2gAyNTAxODcxNTczOmFjOTc3MmVlN2EwYjk4NWUyNjQyNzQwZTJmNTE2NWQ0NDgyNTM5ZmI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdR-xMuAH2gAyNTAxODcxNTczOmRmZmIzMTgxNDQ3MzgxNGVlM2RmYjYyNzdkYTE3ZDU3YTA2ZTIyMTc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ac9772ee7a0b985e2642740e2f5165d4482539fb", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/ac9772ee7a0b985e2642740e2f5165d4482539fb", "committedDate": "2020-10-12T23:12:53Z", "message": "[BEAM-11056] Fix warning message and rename old APIs\n\n1. Replaced `capture` with `record` in top level APIs accessible by\n   users.\n2. Fixed some formatting in the loggings."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2OTk5NzMy", "url": "https://github.com/apache/beam/pull/13080#pullrequestreview-506999732", "createdAt": "2020-10-13T00:48:54Z", "commit": {"oid": "ac9772ee7a0b985e2642740e2f5165d4482539fb"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QwMDo0ODo1NFrOHgRwtw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QwMDo1MjowMFrOHgRzfg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzYwNzQ3OQ==", "bodyText": "\"Background caching job\" -> \"Background source recording job\". Please check all occurrences.", "url": "https://github.com/apache/beam/pull/13080#discussion_r503607479", "createdAt": "2020-10-13T00:48:54Z", "author": {"login": "davidyan74"}, "path": "sdks/python/apache_beam/runners/interactive/background_caching_job.py", "diffHunk": "@@ -19,21 +19,21 @@\n \n For internal use only; no backwards-compatibility guarantees.\n \n-A background caching job is a job that captures events for all capturable\n+A background caching job is a job that records events for all recordable", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ac9772ee7a0b985e2642740e2f5165d4482539fb"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzYwNzYwOA==", "bodyText": "recording", "url": "https://github.com/apache/beam/pull/13080#discussion_r503607608", "createdAt": "2020-10-13T00:49:27Z", "author": {"login": "davidyan74"}, "path": "sdks/python/apache_beam/runners/interactive/background_caching_job.py", "diffHunk": "@@ -19,21 +19,21 @@\n \n For internal use only; no backwards-compatibility guarantees.\n \n-A background caching job is a job that captures events for all capturable\n+A background caching job is a job that records events for all recordable\n sources of a given pipeline. With Interactive Beam, one such job is started when\n a pipeline run happens (which produces a main job in contrast to the background\n caching job) and meets the following conditions:\n \n-  #. The pipeline contains capturable sources, configured through\n-     interactive_beam.options.capturable_sources.\n+  #. The pipeline contains recordable sources, configured through\n+     interactive_beam.options.recordable_sources.\n   #. No such background job is running.\n   #. No such background job has completed successfully and the cached events are\n-     still valid (invalidated when capturable sources change in the pipeline).\n+     still valid (invalidated when recordable sources change in the pipeline).\n \n Once started, the background caching job runs asynchronously until it hits some\n-capture limit configured in interactive_beam.options. Meanwhile, the main job\n+record limit configured in interactive_beam.options. Meanwhile, the main job", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ac9772ee7a0b985e2642740e2f5165d4482539fb"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzYwNzczNg==", "bodyText": "recording", "url": "https://github.com/apache/beam/pull/13080#discussion_r503607736", "createdAt": "2020-10-13T00:50:05Z", "author": {"login": "davidyan74"}, "path": "sdks/python/apache_beam/runners/interactive/background_caching_job.py", "diffHunk": "@@ -56,7 +56,7 @@ class BackgroundCachingJob(object):\n   \"\"\"A simple abstraction that controls necessary components of a timed and\n   space limited background caching job.\n \n-  A background caching job successfully completes source data capture in 2\n+  A background caching job successfully completes source data record in 2", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ac9772ee7a0b985e2642740e2f5165d4482539fb"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzYwNzc4NQ==", "bodyText": "recording", "url": "https://github.com/apache/beam/pull/13080#discussion_r503607785", "createdAt": "2020-10-13T00:50:16Z", "author": {"login": "davidyan74"}, "path": "sdks/python/apache_beam/runners/interactive/background_caching_job.py", "diffHunk": "@@ -165,9 +165,9 @@ def is_background_caching_job_needed(user_pipeline):\n   # If this is True, we can invalidate a previous done/running job if there is\n   # one.\n   cache_changed = is_source_to_cache_changed(user_pipeline)\n-  # When capture replay is disabled, cache is always needed for capturable\n+  # When record replay is disabled, cache is always needed for recordable", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ac9772ee7a0b985e2642740e2f5165d4482539fb"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzYwNzg3OA==", "bodyText": "enable_recording_replay", "url": "https://github.com/apache/beam/pull/13080#discussion_r503607878", "createdAt": "2020-10-13T00:50:43Z", "author": {"login": "davidyan74"}, "path": "sdks/python/apache_beam/runners/interactive/background_caching_job.py", "diffHunk": "@@ -165,9 +165,9 @@ def is_background_caching_job_needed(user_pipeline):\n   # If this is True, we can invalidate a previous done/running job if there is\n   # one.\n   cache_changed = is_source_to_cache_changed(user_pipeline)\n-  # When capture replay is disabled, cache is always needed for capturable\n+  # When record replay is disabled, cache is always needed for recordable\n   # sources (if any).\n-  if need_cache and not ie.current_env().options.enable_capture_replay:\n+  if need_cache and not ie.current_env().options.enable_record_replay:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ac9772ee7a0b985e2642740e2f5165d4482539fb"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzYwNzkwOA==", "bodyText": "recording_duration", "url": "https://github.com/apache/beam/pull/13080#discussion_r503607908", "createdAt": "2020-10-13T00:50:56Z", "author": {"login": "davidyan74"}, "path": "sdks/python/apache_beam/runners/interactive/background_caching_job.py", "diffHunk": "@@ -301,13 +301,13 @@ def sizeof_fmt(num, suffix='B'):\n             'In order to have a deterministic replay, a segment of data will '\n             'be recorded from all sources for %s seconds or until a total of '\n             '%s have been written to disk.',\n-            options.capture_duration.total_seconds(),\n-            sizeof_fmt(options.capture_size_limit))\n+            options.record_duration.total_seconds(),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ac9772ee7a0b985e2642740e2f5165d4482539fb"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzYwNzkzOQ==", "bodyText": "recording_size_limit", "url": "https://github.com/apache/beam/pull/13080#discussion_r503607939", "createdAt": "2020-10-13T00:51:05Z", "author": {"login": "davidyan74"}, "path": "sdks/python/apache_beam/runners/interactive/background_caching_job.py", "diffHunk": "@@ -301,13 +301,13 @@ def sizeof_fmt(num, suffix='B'):\n             'In order to have a deterministic replay, a segment of data will '\n             'be recorded from all sources for %s seconds or until a total of '\n             '%s have been written to disk.',\n-            options.capture_duration.total_seconds(),\n-            sizeof_fmt(options.capture_size_limit))\n+            options.record_duration.total_seconds(),\n+            sizeof_fmt(options.record_size_limit))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ac9772ee7a0b985e2642740e2f5165d4482539fb"}, "originalPosition": 67}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzYwODE5MA==", "bodyText": "enable_recording_replay. Basically, if \"capture\" is used as a noun, change it to \"recording\" instead of \"record\", since \"record\" used as a noun usually means an individual record instead of the act of recording. Please check all occurrences.", "url": "https://github.com/apache/beam/pull/13080#discussion_r503608190", "createdAt": "2020-10-13T00:52:00Z", "author": {"login": "davidyan74"}, "path": "sdks/python/apache_beam/runners/interactive/interactive_beam.py", "diffHunk": "@@ -52,98 +53,116 @@\n class Options(interactive_options.InteractiveOptions):\n   \"\"\"Options that guide how Interactive Beam works.\"\"\"\n   @property\n-  def enable_capture_replay(self):\n-    \"\"\"Whether replayable source data capture should be replayed for multiple\n-    PCollection evaluations and pipeline runs as long as the data captured is\n+  def enable_record_replay(self):", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ac9772ee7a0b985e2642740e2f5165d4482539fb"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3MDAwOTkz", "url": "https://github.com/apache/beam/pull/13080#pullrequestreview-507000993", "createdAt": "2020-10-13T00:54:02Z", "commit": {"oid": "ac9772ee7a0b985e2642740e2f5165d4482539fb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "06ede36b4bda68503217862450b1c1975234da37", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/06ede36b4bda68503217862450b1c1975234da37", "committedDate": "2020-10-13T01:29:08Z", "message": "Changes based on comments."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3MDExNTg0", "url": "https://github.com/apache/beam/pull/13080#pullrequestreview-507011584", "createdAt": "2020-10-13T01:33:25Z", "commit": {"oid": "06ede36b4bda68503217862450b1c1975234da37"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QwMTozMzoyNVrOHgSZPg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QwMTozMzoyNVrOHgSZPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzYxNzg1NA==", "bodyText": "background source recording job", "url": "https://github.com/apache/beam/pull/13080#discussion_r503617854", "createdAt": "2020-10-13T01:33:25Z", "author": {"login": "davidyan74"}, "path": "sdks/python/apache_beam/runners/interactive/interactive_beam.py", "diffHunk": "@@ -91,23 +91,23 @@ def recordable_sources(self):\n     return self.capture_control._capturable_sources\n \n   @property\n-  def record_duration(self):\n-    \"\"\"The data record of sources ends as soon as the background caching job\n+  def recording_duration(self):\n+    \"\"\"The data recording of sources ends as soon as the background caching job", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06ede36b4bda68503217862450b1c1975234da37"}, "originalPosition": 31}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3314f5ebd97f256b1f0508eb5600c04b514ff117", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/3314f5ebd97f256b1f0508eb5600c04b514ff117", "committedDate": "2020-10-13T01:43:44Z", "message": "Some additional fixes."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3MDE3OTg5", "url": "https://github.com/apache/beam/pull/13080#pullrequestreview-507017989", "createdAt": "2020-10-13T01:57:14Z", "commit": {"oid": "3314f5ebd97f256b1f0508eb5600c04b514ff117"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dffb31814473814ee3dfb6277da17d57a06e2217", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/dffb31814473814ee3dfb6277da17d57a06e2217", "committedDate": "2020-10-13T02:01:48Z", "message": "Fixed line too long."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1972, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}