{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc1MzcwMTUx", "number": 10865, "title": "[BEAM-9301] Checkout the hash of master instead of the branch in beam linkage checker script", "bodyText": "R: @suztomo", "createdAt": "2020-02-14T12:41:09Z", "url": "https://github.com/apache/beam/pull/10865", "merged": true, "mergeCommit": {"oid": "97d63502c1004237103b8055bd2c73317751d818"}, "closed": true, "closedAt": "2020-02-15T00:08:44Z", "author": {"login": "iemejia"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcEO7BVgBqjMwMzg2MDMzNTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcEYqrZgFqTM1OTI4MTcwOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "345650d3187ff86b949393b485492837b5fd5bf0", "author": {"user": {"login": "iemejia", "name": "Isma\u00ebl Mej\u00eda"}}, "url": "https://github.com/apache/beam/commit/345650d3187ff86b949393b485492837b5fd5bf0", "committedDate": "2020-02-14T12:38:40Z", "message": "Checkout the hash of master instead of the branch in beam linkage checker\n\nThis avoids a failure when the branch is checked out elsewhere, e.g. if\nusing git worktrees."}, "afterCommit": {"oid": "30ccce706d5e17528746f5ec261d0b4ef8770a62", "author": {"user": {"login": "iemejia", "name": "Isma\u00ebl Mej\u00eda"}}, "url": "https://github.com/apache/beam/commit/30ccce706d5e17528746f5ec261d0b4ef8770a62", "committedDate": "2020-02-14T12:44:14Z", "message": "[BEAM-9301] Checkout the hash of master instead of the branch in beam linkage checker script\n\nThis avoids a failure when the branch is checked out elsewhere, e.g. if\nusing git worktrees."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "30ccce706d5e17528746f5ec261d0b4ef8770a62", "author": {"user": {"login": "iemejia", "name": "Isma\u00ebl Mej\u00eda"}}, "url": "https://github.com/apache/beam/commit/30ccce706d5e17528746f5ec261d0b4ef8770a62", "committedDate": "2020-02-14T12:44:14Z", "message": "[BEAM-9301] Checkout the hash of master instead of the branch in beam linkage checker script\n\nThis avoids a failure when the branch is checked out elsewhere, e.g. if\nusing git worktrees."}, "afterCommit": {"oid": "30e641004e240257c9a4dcadc212532482508ed7", "author": {"user": {"login": "iemejia", "name": "Isma\u00ebl Mej\u00eda"}}, "url": "https://github.com/apache/beam/commit/30e641004e240257c9a4dcadc212532482508ed7", "committedDate": "2020-02-14T14:18:06Z", "message": "[BEAM-9301] Checkout the hash of master instead of the branch in beam linkage checker script\n\nThis avoids a failure when the branch is checked out elsewhere, e.g. if\nusing git worktrees."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU4OTgyMzc0", "url": "https://github.com/apache/beam/pull/10865#pullrequestreview-358982374", "createdAt": "2020-02-14T14:35:36Z", "commit": {"oid": "30e641004e240257c9a4dcadc212532482508ed7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQxNDozNTozNlrOFp4itA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQxNDozNTozNlrOFp4itA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTQ2MjMyNA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            MASTER_COMMIT=`git rev-parse --short=8 master`\n          \n          \n            \n            MASTER_COMMIT=`git rev-parse --short=8 origin/master`\n          \n      \n    \n    \n  \n\nlocal master and remote master branch are different until \u201cgit pull\u201d", "url": "https://github.com/apache/beam/pull/10865#discussion_r379462324", "createdAt": "2020-02-14T14:35:36Z", "author": {"login": "suztomo"}, "path": "sdks/java/build-tools/beam-linkage-check.sh", "diffHunk": "@@ -84,9 +84,9 @@ function runLinkageCheck () {\n BRANCH_COMMIT=`git rev-parse --short=8 HEAD`\n runLinkageCheck $BRANCH_COMMIT\n \n-git checkout master\n-git pull\n-MASTER_COMMIT=`git rev-parse --short=8 HEAD`\n+git fetch\n+MASTER_COMMIT=`git rev-parse --short=8 master`", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "30e641004e240257c9a4dcadc212532482508ed7"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d020e93947bde64ae50f544afdcf8a94c072756f", "author": {"user": {"login": "iemejia", "name": "Isma\u00ebl Mej\u00eda"}}, "url": "https://github.com/apache/beam/commit/d020e93947bde64ae50f544afdcf8a94c072756f", "committedDate": "2020-02-14T23:05:57Z", "message": "[BEAM-9301] Checkout the hash of master instead of the branch in beam linkage checker script\n\nThis avoids a failure when the branch is checked out elsewhere, e.g. if\nusing git worktrees."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "30e641004e240257c9a4dcadc212532482508ed7", "author": {"user": {"login": "iemejia", "name": "Isma\u00ebl Mej\u00eda"}}, "url": "https://github.com/apache/beam/commit/30e641004e240257c9a4dcadc212532482508ed7", "committedDate": "2020-02-14T14:18:06Z", "message": "[BEAM-9301] Checkout the hash of master instead of the branch in beam linkage checker script\n\nThis avoids a failure when the branch is checked out elsewhere, e.g. if\nusing git worktrees."}, "afterCommit": {"oid": "d020e93947bde64ae50f544afdcf8a94c072756f", "author": {"user": {"login": "iemejia", "name": "Isma\u00ebl Mej\u00eda"}}, "url": "https://github.com/apache/beam/commit/d020e93947bde64ae50f544afdcf8a94c072756f", "committedDate": "2020-02-14T23:05:57Z", "message": "[BEAM-9301] Checkout the hash of master instead of the branch in beam linkage checker script\n\nThis avoids a failure when the branch is checked out elsewhere, e.g. if\nusing git worktrees."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5MjgxNzA5", "url": "https://github.com/apache/beam/pull/10865#pullrequestreview-359281709", "createdAt": "2020-02-15T00:06:08Z", "commit": {"oid": "d020e93947bde64ae50f544afdcf8a94c072756f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3146, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}