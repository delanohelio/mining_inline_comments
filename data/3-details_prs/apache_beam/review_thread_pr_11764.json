{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIxMDExNDc1", "number": 11764, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQyMzozMTo0NFrOD-bQIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQyMzozNDo1MlrOD-bSqw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2Nzg0ODAyOnYy", "diffSide": "RIGHT", "path": "website/www/site/content/en/contribute/release-guide.md", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQyMzozMTo0NFrOGYhUhg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxNjo0MDoyMlrOGY6T-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODM2NDkzNA==", "bodyText": "nit: say \"by clicking the CLOSE button\". I was confused on how to close.", "url": "https://github.com/apache/beam/pull/11764#discussion_r428364934", "createdAt": "2020-05-20T23:31:44Z", "author": {"login": "amaliujia"}, "path": "website/www/site/content/en/contribute/release-guide.md", "diffHunk": "@@ -583,189 +582,44 @@ For this step, we recommend you using automation script to create a RC, but you\n   1. Stage source release into dist.apache.org dev [repo](https://dist.apache.org/repos/dist/dev/beam/).\n   1. Stage,sign and hash python binaries into dist.apache.ord dev repo python dir\n   1. Stage SDK docker images to [docker hub Apache organization](https://hub.docker.com/search?q=apache%2Fbeam&type=image).\n-  1. Create a PR to update beam and beam-site, changes includes:\n+  1. Create a PR to update beam-site, changes includes:\n      * Copy python doc into beam-site\n      * Copy java doc into beam-site\n-     * Update release version into [_config.yml](https://github.com/apache/beam/blob/master/website/_config.yml).\n      \n #### Tasks you need to do manually\n-  1. Add new release into `website/src/get-started/downloads.md`.\n-  1. Update last release download links in `website/src/get-started/downloads.md`.\n-  1. Update `website/src/.htaccess` to redirect to the new version.\n-  1. Build and stage python wheels.\n+  1. Verify the script worked.\n+      1. Verify that the source and Python binaries are present in [dist.apache.org](https://dist.apache.org/repos/dist/dev/beam).\n+      1. Verify Docker images are published. How to find images:\n+          1. Visit [https://hub.docker.com/u/apache](https://hub.docker.com/search?q=apache%2Fbeam&type=image)\n+          2. Visit each repository and navigate to *tags* tab.\n+          3. Verify images are pushed with tags: ${RELEASE}_rc{RC_NUM}\n+      1. Verify that third party licenses are included in Docker containers by logging in to the images.\n+          - For Python SDK images, there should be around 80 ~ 100 dependencies.\n+          Please note that dependencies for the SDKs with different Python versions vary.\n+          Need to verify all Python images by replacing `${ver}` with each supported Python version `X.Y`.\n+          ```\n+          docker run -it --entrypoint=/bin/bash apache/beam_python${ver}_sdk:${RELEASE}_rc{RC_NUM}\n+          ls -al /opt/apache/beam/third_party_licenses/ | wc -l\n+          ```\n+          - For Java SDK images, there should be around 1400 dependencies.\n+          ```\n+          docker run -it --entrypoint=/bin/bash apache/beam_java_sdk:${RELEASE}_rc{RC_NUM}\n+          ls -al /opt/apache/beam/third_party_licenses/ | wc -l\n+          ```\n   1. Publish staging artifacts\n-      1. Go to the staging repo to close the staging repository on [Apache Nexus](https://repository.apache.org/#stagingRepositories). \n+      1. Go to the staging repo to close the staging repository on [Apache Nexus](https://repository.apache.org/#stagingRepositories).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1404c6a1ab3ca7e9ff3267c7bd28e18472c33e2a"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODc3NDM5Mg==", "bodyText": "I added more detailed instructions.", "url": "https://github.com/apache/beam/pull/11764#discussion_r428774392", "createdAt": "2020-05-21T16:40:22Z", "author": {"login": "ibzib"}, "path": "website/www/site/content/en/contribute/release-guide.md", "diffHunk": "@@ -583,189 +582,44 @@ For this step, we recommend you using automation script to create a RC, but you\n   1. Stage source release into dist.apache.org dev [repo](https://dist.apache.org/repos/dist/dev/beam/).\n   1. Stage,sign and hash python binaries into dist.apache.ord dev repo python dir\n   1. Stage SDK docker images to [docker hub Apache organization](https://hub.docker.com/search?q=apache%2Fbeam&type=image).\n-  1. Create a PR to update beam and beam-site, changes includes:\n+  1. Create a PR to update beam-site, changes includes:\n      * Copy python doc into beam-site\n      * Copy java doc into beam-site\n-     * Update release version into [_config.yml](https://github.com/apache/beam/blob/master/website/_config.yml).\n      \n #### Tasks you need to do manually\n-  1. Add new release into `website/src/get-started/downloads.md`.\n-  1. Update last release download links in `website/src/get-started/downloads.md`.\n-  1. Update `website/src/.htaccess` to redirect to the new version.\n-  1. Build and stage python wheels.\n+  1. Verify the script worked.\n+      1. Verify that the source and Python binaries are present in [dist.apache.org](https://dist.apache.org/repos/dist/dev/beam).\n+      1. Verify Docker images are published. How to find images:\n+          1. Visit [https://hub.docker.com/u/apache](https://hub.docker.com/search?q=apache%2Fbeam&type=image)\n+          2. Visit each repository and navigate to *tags* tab.\n+          3. Verify images are pushed with tags: ${RELEASE}_rc{RC_NUM}\n+      1. Verify that third party licenses are included in Docker containers by logging in to the images.\n+          - For Python SDK images, there should be around 80 ~ 100 dependencies.\n+          Please note that dependencies for the SDKs with different Python versions vary.\n+          Need to verify all Python images by replacing `${ver}` with each supported Python version `X.Y`.\n+          ```\n+          docker run -it --entrypoint=/bin/bash apache/beam_python${ver}_sdk:${RELEASE}_rc{RC_NUM}\n+          ls -al /opt/apache/beam/third_party_licenses/ | wc -l\n+          ```\n+          - For Java SDK images, there should be around 1400 dependencies.\n+          ```\n+          docker run -it --entrypoint=/bin/bash apache/beam_java_sdk:${RELEASE}_rc{RC_NUM}\n+          ls -al /opt/apache/beam/third_party_licenses/ | wc -l\n+          ```\n   1. Publish staging artifacts\n-      1. Go to the staging repo to close the staging repository on [Apache Nexus](https://repository.apache.org/#stagingRepositories). \n+      1. Go to the staging repo to close the staging repository on [Apache Nexus](https://repository.apache.org/#stagingRepositories).", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODM2NDkzNA=="}, "originalCommit": {"oid": "1404c6a1ab3ca7e9ff3267c7bd28e18472c33e2a"}, "originalPosition": 44}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2Nzg0OTE1OnYy", "diffSide": "LEFT", "path": "website/www/site/content/en/contribute/release-guide.md", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQyMzozMjoyM1rOGYhVRg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxNjozMjozNlrOGY6Cdg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODM2NTEyNg==", "bodyText": "Removing this big chunk of text because?", "url": "https://github.com/apache/beam/pull/11764#discussion_r428365126", "createdAt": "2020-05-20T23:32:23Z", "author": {"login": "amaliujia"}, "path": "website/www/site/content/en/contribute/release-guide.md", "diffHunk": "@@ -583,189 +582,44 @@ For this step, we recommend you using automation script to create a RC, but you\n   1. Stage source release into dist.apache.org dev [repo](https://dist.apache.org/repos/dist/dev/beam/).\n   1. Stage,sign and hash python binaries into dist.apache.ord dev repo python dir\n   1. Stage SDK docker images to [docker hub Apache organization](https://hub.docker.com/search?q=apache%2Fbeam&type=image).\n-  1. Create a PR to update beam and beam-site, changes includes:\n+  1. Create a PR to update beam-site, changes includes:\n      * Copy python doc into beam-site\n      * Copy java doc into beam-site\n-     * Update release version into [_config.yml](https://github.com/apache/beam/blob/master/website/_config.yml).\n      \n #### Tasks you need to do manually\n-  1. Add new release into `website/src/get-started/downloads.md`.\n-  1. Update last release download links in `website/src/get-started/downloads.md`.\n-  1. Update `website/src/.htaccess` to redirect to the new version.\n-  1. Build and stage python wheels.\n+  1. Verify the script worked.\n+      1. Verify that the source and Python binaries are present in [dist.apache.org](https://dist.apache.org/repos/dist/dev/beam).\n+      1. Verify Docker images are published. How to find images:\n+          1. Visit [https://hub.docker.com/u/apache](https://hub.docker.com/search?q=apache%2Fbeam&type=image)\n+          2. Visit each repository and navigate to *tags* tab.\n+          3. Verify images are pushed with tags: ${RELEASE}_rc{RC_NUM}\n+      1. Verify that third party licenses are included in Docker containers by logging in to the images.\n+          - For Python SDK images, there should be around 80 ~ 100 dependencies.\n+          Please note that dependencies for the SDKs with different Python versions vary.\n+          Need to verify all Python images by replacing `${ver}` with each supported Python version `X.Y`.\n+          ```\n+          docker run -it --entrypoint=/bin/bash apache/beam_python${ver}_sdk:${RELEASE}_rc{RC_NUM}\n+          ls -al /opt/apache/beam/third_party_licenses/ | wc -l\n+          ```\n+          - For Java SDK images, there should be around 1400 dependencies.\n+          ```\n+          docker run -it --entrypoint=/bin/bash apache/beam_java_sdk:${RELEASE}_rc{RC_NUM}\n+          ls -al /opt/apache/beam/third_party_licenses/ | wc -l\n+          ```\n   1. Publish staging artifacts\n-      1. Go to the staging repo to close the staging repository on [Apache Nexus](https://repository.apache.org/#stagingRepositories). \n+      1. Go to the staging repo to close the staging repository on [Apache Nexus](https://repository.apache.org/#stagingRepositories).\n       1. When prompted for a description, enter \u201cApache Beam, version X, release candidate Y\u201d.\n-\n-\n-### (Alternative) Run all steps manually", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1404c6a1ab3ca7e9ff3267c7bd28e18472c33e2a"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODc2OTkxMA==", "bodyText": "Because it's mostly an exact copy of build_release_candidate.sh. Any part of this block that wasn't part of build_release_candidate.sh was moved into the \"manual steps\" section.", "url": "https://github.com/apache/beam/pull/11764#discussion_r428769910", "createdAt": "2020-05-21T16:32:36Z", "author": {"login": "ibzib"}, "path": "website/www/site/content/en/contribute/release-guide.md", "diffHunk": "@@ -583,189 +582,44 @@ For this step, we recommend you using automation script to create a RC, but you\n   1. Stage source release into dist.apache.org dev [repo](https://dist.apache.org/repos/dist/dev/beam/).\n   1. Stage,sign and hash python binaries into dist.apache.ord dev repo python dir\n   1. Stage SDK docker images to [docker hub Apache organization](https://hub.docker.com/search?q=apache%2Fbeam&type=image).\n-  1. Create a PR to update beam and beam-site, changes includes:\n+  1. Create a PR to update beam-site, changes includes:\n      * Copy python doc into beam-site\n      * Copy java doc into beam-site\n-     * Update release version into [_config.yml](https://github.com/apache/beam/blob/master/website/_config.yml).\n      \n #### Tasks you need to do manually\n-  1. Add new release into `website/src/get-started/downloads.md`.\n-  1. Update last release download links in `website/src/get-started/downloads.md`.\n-  1. Update `website/src/.htaccess` to redirect to the new version.\n-  1. Build and stage python wheels.\n+  1. Verify the script worked.\n+      1. Verify that the source and Python binaries are present in [dist.apache.org](https://dist.apache.org/repos/dist/dev/beam).\n+      1. Verify Docker images are published. How to find images:\n+          1. Visit [https://hub.docker.com/u/apache](https://hub.docker.com/search?q=apache%2Fbeam&type=image)\n+          2. Visit each repository and navigate to *tags* tab.\n+          3. Verify images are pushed with tags: ${RELEASE}_rc{RC_NUM}\n+      1. Verify that third party licenses are included in Docker containers by logging in to the images.\n+          - For Python SDK images, there should be around 80 ~ 100 dependencies.\n+          Please note that dependencies for the SDKs with different Python versions vary.\n+          Need to verify all Python images by replacing `${ver}` with each supported Python version `X.Y`.\n+          ```\n+          docker run -it --entrypoint=/bin/bash apache/beam_python${ver}_sdk:${RELEASE}_rc{RC_NUM}\n+          ls -al /opt/apache/beam/third_party_licenses/ | wc -l\n+          ```\n+          - For Java SDK images, there should be around 1400 dependencies.\n+          ```\n+          docker run -it --entrypoint=/bin/bash apache/beam_java_sdk:${RELEASE}_rc{RC_NUM}\n+          ls -al /opt/apache/beam/third_party_licenses/ | wc -l\n+          ```\n   1. Publish staging artifacts\n-      1. Go to the staging repo to close the staging repository on [Apache Nexus](https://repository.apache.org/#stagingRepositories). \n+      1. Go to the staging repo to close the staging repository on [Apache Nexus](https://repository.apache.org/#stagingRepositories).\n       1. When prompted for a description, enter \u201cApache Beam, version X, release candidate Y\u201d.\n-\n-\n-### (Alternative) Run all steps manually", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODM2NTEyNg=="}, "originalCommit": {"oid": "1404c6a1ab3ca7e9ff3267c7bd28e18472c33e2a"}, "originalPosition": 48}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2Nzg1NDUxOnYy", "diffSide": "RIGHT", "path": "release/src/main/scripts/build_release_candidate.sh", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQyMzozNDo1MlrOGYhYfg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxNjozMzo0MVrOGY6Exg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODM2NTk1MA==", "bodyText": "Add that ssh-add trick to cache ssh password?", "url": "https://github.com/apache/beam/pull/11764#discussion_r428365950", "createdAt": "2020-05-20T23:34:52Z", "author": {"login": "amaliujia"}, "path": "release/src/main/scripts/build_release_candidate.sh", "diffHunk": "@@ -113,7 +113,7 @@ if [[ $confirmation = \"y\" ]]; then\n   echo \"-------------Staging Java Artifacts into Maven---------------\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1404c6a1ab3ca7e9ff3267c7bd28e18472c33e2a"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODc3MDUwMg==", "bodyText": "I wasn't sure the best way to do that. Maybe we can add it in a later PR.", "url": "https://github.com/apache/beam/pull/11764#discussion_r428770502", "createdAt": "2020-05-21T16:33:41Z", "author": {"login": "ibzib"}, "path": "release/src/main/scripts/build_release_candidate.sh", "diffHunk": "@@ -113,7 +113,7 @@ if [[ $confirmation = \"y\" ]]; then\n   echo \"-------------Staging Java Artifacts into Maven---------------\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODM2NTk1MA=="}, "originalCommit": {"oid": "1404c6a1ab3ca7e9ff3267c7bd28e18472c33e2a"}, "originalPosition": 1}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3829, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}