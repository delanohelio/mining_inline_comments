{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkwNzIxMTg1", "number": 11166, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxODoyMDo0NFrODpoBdQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxODoyNToyMVrODpoIAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0OTczOTQxOnYy", "diffSide": "RIGHT", "path": "sdks/python/apache_beam/runners/interactive/interactive_beam.py", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxODoyMDo0NFrOF469VA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxODoyMDo0NFrOF469VA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTIzMDU0OA==", "bodyText": "Replayed for replayability? How about this? I'm not sure what's a good phrasing, but...\nAlso, maybe capture->captured data?\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                      'computations will be replayed for replayability. If no capture is '\n          \n          \n            \n                      'computations will be replayed for consistent results. If no captured data is '", "url": "https://github.com/apache/beam/pull/11166#discussion_r395230548", "createdAt": "2020-03-19T18:20:44Z", "author": {"login": "pabloem"}, "path": "sdks/python/apache_beam/runners/interactive/interactive_beam.py", "diffHunk": "@@ -64,11 +67,33 @@ def enable_capture_replay(self, value):\n     and pipeline runs always use the same data captured; False - Disables\n     capture of replayable source data so that following PCollection evaluation\n     and pipeline runs always use new data from sources.\"\"\"\n+    # This makes sure the log handler is configured correctly in case the\n+    # options are configured in an early stage.\n+    _ = ie.current_env()\n+    if value:\n+      _LOGGER.info(\n+          'Capture replay is enabled. When a PCollection is evaluated or the '\n+          'pipeline is executed, existing data captured from previous '\n+          'computations will be replayed for replayability. If no capture is '", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "de965ae87c5ea4cf93792c16293fb3fbc8fbf405"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0OTc0MDkxOnYy", "diffSide": "RIGHT", "path": "sdks/python/apache_beam/runners/interactive/interactive_beam.py", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxODoyMToxMFrOF46-VQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxODoyMToxMFrOF46-VQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTIzMDgwNQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                      'You have disabled capture replay. The next time a PCollection is '\n          \n          \n            \n                      'Capture replay is disabled. The next time a PCollection is '", "url": "https://github.com/apache/beam/pull/11166#discussion_r395230805", "createdAt": "2020-03-19T18:21:10Z", "author": {"login": "pabloem"}, "path": "sdks/python/apache_beam/runners/interactive/interactive_beam.py", "diffHunk": "@@ -64,11 +67,33 @@ def enable_capture_replay(self, value):\n     and pipeline runs always use the same data captured; False - Disables\n     capture of replayable source data so that following PCollection evaluation\n     and pipeline runs always use new data from sources.\"\"\"\n+    # This makes sure the log handler is configured correctly in case the\n+    # options are configured in an early stage.\n+    _ = ie.current_env()\n+    if value:\n+      _LOGGER.info(\n+          'Capture replay is enabled. When a PCollection is evaluated or the '\n+          'pipeline is executed, existing data captured from previous '\n+          'computations will be replayed for replayability. If no capture is '\n+          'available, new data from capturable sources will be captured.')\n+    else:\n+      _LOGGER.info(\n+          'You have disabled capture replay. The next time a PCollection is '", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "de965ae87c5ea4cf93792c16293fb3fbc8fbf405"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0OTc0MzM2OnYy", "diffSide": "RIGHT", "path": "sdks/python/apache_beam/runners/interactive/interactive_beam.py", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxODoyMTo1MFrOF46_4A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxODoyMTo1MFrOF46_4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTIzMTIwMA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                      'captured from capturable sources. You will not have replayability '\n          \n          \n            \n                      'consumed from sources in the pipeline. You will not have replayability '", "url": "https://github.com/apache/beam/pull/11166#discussion_r395231200", "createdAt": "2020-03-19T18:21:50Z", "author": {"login": "pabloem"}, "path": "sdks/python/apache_beam/runners/interactive/interactive_beam.py", "diffHunk": "@@ -64,11 +67,33 @@ def enable_capture_replay(self, value):\n     and pipeline runs always use the same data captured; False - Disables\n     capture of replayable source data so that following PCollection evaluation\n     and pipeline runs always use new data from sources.\"\"\"\n+    # This makes sure the log handler is configured correctly in case the\n+    # options are configured in an early stage.\n+    _ = ie.current_env()\n+    if value:\n+      _LOGGER.info(\n+          'Capture replay is enabled. When a PCollection is evaluated or the '\n+          'pipeline is executed, existing data captured from previous '\n+          'computations will be replayed for replayability. If no capture is '\n+          'available, new data from capturable sources will be captured.')\n+    else:\n+      _LOGGER.info(\n+          'You have disabled capture replay. The next time a PCollection is '\n+          'evaluated or the pipeline is executed, new data will always be '\n+          'captured from capturable sources. You will not have replayability '", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "de965ae87c5ea4cf93792c16293fb3fbc8fbf405"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0OTc1MDgzOnYy", "diffSide": "RIGHT", "path": "sdks/python/apache_beam/runners/interactive/interactive_beam.py", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxODoyMzo1M1rOF47ElQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxODoyMzo1M1rOF47ElQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTIzMjQwNQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                      'allow new data being captured under the updated size limit the '\n          \n          \n            \n                      'allow new data to be captured under the updated size limit, the '", "url": "https://github.com/apache/beam/pull/11166#discussion_r395232405", "createdAt": "2020-03-19T18:23:53Z", "author": {"login": "pabloem"}, "path": "sdks/python/apache_beam/runners/interactive/interactive_beam.py", "diffHunk": "@@ -109,7 +144,16 @@ def capture_size_limit(self, value):\n       # Sets the capture size limit to 1GB.\n       interactive_beam.options.capture_size_limit = 1e9\n     \"\"\"\n-    self.capture_control._capture_size_limit = value\n+    if self.capture_control._capture_size_limit != value:\n+      _ = ie.current_env()\n+      _LOGGER.info(\n+          'You have changed capture size limit from %s bytes to %s bytes. To '\n+          'allow new data being captured under the updated size limit the '", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "de965ae87c5ea4cf93792c16293fb3fbc8fbf405"}, "originalPosition": 80}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0OTc1MzU1OnYy", "diffSide": "RIGHT", "path": "sdks/python/apache_beam/runners/interactive/interactive_beam.py", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxODoyNDozNlrOF47GVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxODoyNDozNlrOF47GVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTIzMjg1NA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                      'To allow new data being captured for the updated duration the next '\n          \n          \n            \n                      'To allow new data to be captured for the updated duration, the next '", "url": "https://github.com/apache/beam/pull/11166#discussion_r395232854", "createdAt": "2020-03-19T18:24:36Z", "author": {"login": "pabloem"}, "path": "sdks/python/apache_beam/runners/interactive/interactive_beam.py", "diffHunk": "@@ -92,7 +117,17 @@ def capture_duration(self, value):\n       interactive_beam.collect(some_pcoll)\n     \"\"\"\n     assert value.total_seconds() > 0, 'Duration must be a positive value.'\n-    self.capture_control._capture_duration = value\n+    if self.capture_control._capture_duration.total_seconds(\n+    ) != value.total_seconds():\n+      _ = ie.current_env()\n+      _LOGGER.info(\n+          'You have changed capture duration from %s seconds to %s seconds. '\n+          'To allow new data being captured for the updated duration the next '", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "de965ae87c5ea4cf93792c16293fb3fbc8fbf405"}, "originalPosition": 62}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0OTc1NjE2OnYy", "diffSide": "RIGHT", "path": "sdks/python/apache_beam/runners/interactive/interactive_beam.py", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxODoyNToyMVrOF47IAA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxODoyNToyMVrOF47IAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTIzMzI4MA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    'altered sources being captured the next time a PCollection is '\n          \n          \n            \n                    'altered sources to be captured the next time a PCollection is '", "url": "https://github.com/apache/beam/pull/11166#discussion_r395233280", "createdAt": "2020-03-19T18:25:21Z", "author": {"login": "pabloem"}, "path": "sdks/python/apache_beam/runners/interactive/interactive_beam.py", "diffHunk": "@@ -64,11 +67,33 @@ def enable_capture_replay(self, value):\n     and pipeline runs always use the same data captured; False - Disables\n     capture of replayable source data so that following PCollection evaluation\n     and pipeline runs always use new data from sources.\"\"\"\n+    # This makes sure the log handler is configured correctly in case the\n+    # options are configured in an early stage.\n+    _ = ie.current_env()\n+    if value:\n+      _LOGGER.info(\n+          'Capture replay is enabled. When a PCollection is evaluated or the '\n+          'pipeline is executed, existing data captured from previous '\n+          'computations will be replayed for replayability. If no capture is '\n+          'available, new data from capturable sources will be captured.')\n+    else:\n+      _LOGGER.info(\n+          'You have disabled capture replay. The next time a PCollection is '\n+          'evaluated or the pipeline is executed, new data will always be '\n+          'captured from capturable sources. You will not have replayability '\n+          'until re-enabling this option.')\n     self.capture_control._enable_capture_replay = value\n \n   @property\n   def capturable_sources(self):\n-    \"\"\"Interactive Beam automatically captures data from sources in this set.\"\"\"\n+    \"\"\"Interactive Beam automatically captures data from sources in this set.\n+    \"\"\"\n+    _ = ie.current_env()\n+    _LOGGER.info(\n+        'If you alter the capturable sources, to allow new data for the '\n+        'altered sources being captured the next time a PCollection is '", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "de965ae87c5ea4cf93792c16293fb3fbc8fbf405"}, "originalPosition": 46}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1693, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}