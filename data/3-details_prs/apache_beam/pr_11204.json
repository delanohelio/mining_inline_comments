{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkyNzYzMjA1", "number": 11204, "title": "[BEAM-9579] Fix numpy logic operators", "bodyText": "Replacing deprecated '-' logical operators.\n\nThank you for your contribution! Follow this checklist to help us incorporate your contribution quickly and easily:\n\n Choose reviewer(s) and mention them in a comment (R: @username).\n Format the pull request title like [BEAM-XXX] Fixes bug in ApproximateQuantiles, where you replace BEAM-XXX with the appropriate JIRA issue, if applicable. This will automatically link the pull request to the issue.\n Update CHANGES.md with noteworthy changes.\n If this contribution is large, please file an Apache Individual Contributor License Agreement.\n\nSee the Contributor Guide for more tips on how to make review process smoother.\nPost-Commit Tests Status (on master branch)\n\n\n\nLang\nSDK\nApex\nDataflow\nFlink\nGearpump\nSamza\nSpark\n\n\n\n\nGo\n\n---\n---\n\n---\n---\n\n\n\nJava\n\n\n\n\n\n\n\n\n\nPython\n\n---\n\n\n---\n---\n\n\n\nXLang\n---\n---\n---\n\n---\n---\n\n\n\n\nPre-Commit Tests Status (on master branch)\n\n\n\n---\nJava\nPython\nGo\nWebsite\n\n\n\n\nNon-portable\n\n\n\n\n\n\nPortable\n---\n\n---\n---\n\n\n\nSee .test-infra/jenkins/README for trigger phrase, status and link of all Jenkins jobs.", "createdAt": "2020-03-24T04:02:42Z", "url": "https://github.com/apache/beam/pull/11204", "merged": true, "mergeCommit": {"oid": "1713b241c5f897017e86dd440bdf3d9b9b3e4c0c"}, "closed": true, "closedAt": "2020-03-24T20:19:38Z", "author": {"login": "chrisgorgo"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcQqudpAH2gAyMzkyNzYzMjA1OjcxYjg0ZjhhMDJkZWY0OTMxZTZmZTkzODI5MTA3OGZiNTQ2YWQ2ZjU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcQ3UIJAH2gAyMzkyNzYzMjA1OmVkNzU1NTU3MTEzZGIxYjQyZWNlNDNkOGU2MmE5OGQwN2IxZmJmZmM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "71b84f8a02def4931e6fe938291078fb546ad6f5", "author": {"user": {"login": "chrisgorgo", "name": "Chris Gorgolewski"}}, "url": "https://github.com/apache/beam/commit/71b84f8a02def4931e6fe938291078fb546ad6f5", "committedDate": "2020-03-24T03:55:38Z", "message": "[BEAM-9579] Fix numpy logic operators"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c72a72626e201e71ba31cd794c652d837ae1c8cf", "author": {"user": {"login": "chrisgorgo", "name": "Chris Gorgolewski"}}, "url": "https://github.com/apache/beam/commit/c72a72626e201e71ba31cd794c652d837ae1c8cf", "committedDate": "2020-03-24T04:01:38Z", "message": "added changelog message"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgwNTAyNDgx", "url": "https://github.com/apache/beam/pull/11204#pullrequestreview-380502481", "createdAt": "2020-03-24T16:47:05Z", "commit": {"oid": "c72a72626e201e71ba31cd794c652d837ae1c8cf"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQxNjo0NzowNVrOF65j2w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQxNjo0NzozMVrOF65lOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzMwNDc5NQ==", "bodyText": "@amaliujia - Should we wrap up the 2.20 release section and start a new section. This is the first release we are trying out changes.md, so we may need to figure out a good point where we need to update this file.\nMaybe we can do it after release branch cut. What do you think?", "url": "https://github.com/apache/beam/pull/11204#discussion_r397304795", "createdAt": "2020-03-24T16:47:05Z", "author": {"login": "aaltay"}, "path": "CHANGES.md", "diffHunk": "@@ -116,6 +116,7 @@\n \n ## Bugfixes\n \n+* Fixed numpy operators in ApproximateQuantiles (Python) ([BEAM-9579](https://issues.apache.org/jira/browse/BEAM-9579)).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c72a72626e201e71ba31cd794c652d837ae1c8cf"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzMwNTE0Nw==", "bodyText": "Maybe I am missing something here, but I think here we use - to get +1, 0 or -1 and ^ operator would not give us.", "url": "https://github.com/apache/beam/pull/11204#discussion_r397305147", "createdAt": "2020-03-24T16:47:31Z", "author": {"login": "aaltay"}, "path": "sdks/python/apache_beam/transforms/stats.py", "diffHunk": "@@ -430,11 +430,11 @@ class ApproximateQuantilesCombineFn(CombineFn):\n   def __init__(\n       self, num_quantiles, buffer_size, num_buffers, key=None, reverse=False):\n     if key:\n-      self._comparator = lambda a, b: (key(a) < key(b)) - (key(a) > key(b)) \\\n-        if reverse else (key(a) > key(b)) - (key(a) < key(b))\n+      self._comparator = lambda a, b: (key(a) < key(b)) ^ (key(a) > key(b)) \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c72a72626e201e71ba31cd794c652d837ae1c8cf"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed755557113db1b42ece43d8e62a98d07b1fbffc", "author": {"user": {"login": "chrisgorgo", "name": "Chris Gorgolewski"}}, "url": "https://github.com/apache/beam/commit/ed755557113db1b42ece43d8e62a98d07b1fbffc", "committedDate": "2020-03-24T18:35:38Z", "message": "refactor"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4646, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}