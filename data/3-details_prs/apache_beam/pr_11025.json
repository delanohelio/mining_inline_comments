{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgyODM0Mzc5", "number": 11025, "title": "[BEAM-6428] Improve select performance with codegen", "bodyText": "The schema select functionality is currently very inefficient - it walks through the schema resolution on each element selected in order to figure out how to properly distribute the select. Select is used by the select transform, but it is also used by the Group, Join, and any conversion transforms.\nThis PR analyzes the select predicate (e.g. a.b[].c.*), and generates bytecode to perform the select. All the schema resolution code that previously was done per element is now done once in order to determine what bytecode to generate.", "createdAt": "2020-03-03T09:25:02Z", "url": "https://github.com/apache/beam/pull/11025", "merged": true, "mergeCommit": {"oid": "8abc90bb13fd0b8c46a26fc59752161b012a9f03"}, "closed": true, "closedAt": "2020-03-04T18:57:01Z", "author": {"login": "reuvenlax"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcJ_CDqAH2gAyMzgyODM0Mzc5OmQ2NmQ1NjNjMzI2Y2JmZDk5ODg0YmY1ZjY4ODkwZjA3YTIyZGNmOTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcKbfElAFqTM2OTAzMDQwOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d66d563c326cbfd99884bf5f68890f07a22dcf92", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/d66d563c326cbfd99884bf5f68890f07a22dcf92", "committedDate": "2020-03-03T09:37:40Z", "message": "foo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2287be8680f420f1ccfbafdba9fa2a204022820", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/e2287be8680f420f1ccfbafdba9fa2a204022820", "committedDate": "2020-03-03T09:37:40Z", "message": "add codegen for Select"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ae0939924f32000d3849ae616efee7906dcf6039", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/ae0939924f32000d3849ae616efee7906dcf6039", "committedDate": "2020-03-03T09:24:07Z", "message": "add codegen for Select"}, "afterCommit": {"oid": "e2287be8680f420f1ccfbafdba9fa2a204022820", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/e2287be8680f420f1ccfbafdba9fa2a204022820", "committedDate": "2020-03-03T09:37:40Z", "message": "add codegen for Select"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a347252941b18f9dcfe5ac036765f9d1b254b778", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/a347252941b18f9dcfe5ac036765f9d1b254b778", "committedDate": "2020-03-03T09:42:39Z", "message": "Update ByteBuddy."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e14837010ce300588f21e1e2faa8234f2802feb", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/8e14837010ce300588f21e1e2faa8234f2802feb", "committedDate": "2020-03-03T22:00:15Z", "message": "refactor code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e52d8d539017198f3103ba7f981b85d48d28e8a", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/2e52d8d539017198f3103ba7f981b85d48d28e8a", "committedDate": "2020-03-03T22:11:41Z", "message": "fix Select transform"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4NTU1NjUy", "url": "https://github.com/apache/beam/pull/11025#pullrequestreview-368555652", "createdAt": "2020-03-04T07:36:02Z", "commit": {"oid": "2e52d8d539017198f3103ba7f981b85d48d28e8a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwNzozNjowM1rOFxikzw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwNzozNjowM1rOFxikzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQ5MTAyMw==", "bodyText": "I was wondering if SelectByteBuddyHelpers is still used after this removal (and would be able to be deleted). But I don't find it (org.apache.beam.sdk.schemas.utils.SelectByteBuddyHelpers) in the current master.", "url": "https://github.com/apache/beam/pull/11025#discussion_r387491023", "createdAt": "2020-03-04T07:36:03Z", "author": {"login": "alexvanboxel"}, "path": "sdks/java/core/src/main/java/org/apache/beam/sdk/schemas/transforms/Select.java", "diffHunk": "@@ -28,8 +28,8 @@\n import org.apache.beam.sdk.schemas.FieldAccessDescriptor;\n import org.apache.beam.sdk.schemas.Schema;\n import org.apache.beam.sdk.schemas.utils.RowSelector;\n-import org.apache.beam.sdk.schemas.utils.SelectByteBuddyHelpers;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2e52d8d539017198f3103ba7f981b85d48d28e8a"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5MDMwNDA5", "url": "https://github.com/apache/beam/pull/11025#pullrequestreview-369030409", "createdAt": "2020-03-04T18:46:42Z", "commit": {"oid": "2e52d8d539017198f3103ba7f981b85d48d28e8a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2968, "cost": 1, "resetAt": "2021-10-28T16:48:13Z"}}}