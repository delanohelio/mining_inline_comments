{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE5NDg4OTgz", "number": 13309, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQwMDoyMzoyMlrOE37gJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QyMToyNDowMFrOE6PabA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI3MDgyMDIwOnYy", "diffSide": "RIGHT", "path": "sdks/java/extensions/sql/zetasql/src/main/java/org/apache/beam/sdk/extensions/sql/zetasql/translation/SqlOperators.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQwMDoyMzoyMlrOHxjxyw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQwMDoyMzoyMlrOHxjxyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTcyODQ1OQ==", "bodyText": "for these ZETASQL_FUNCTION_GROUP_NAME, eventually I think we will migrate it off from createUdfOperator.", "url": "https://github.com/apache/beam/pull/13309#discussion_r521728459", "createdAt": "2020-11-12T00:23:22Z", "author": {"login": "amaliujia"}, "path": "sdks/java/extensions/sql/zetasql/src/main/java/org/apache/beam/sdk/extensions/sql/zetasql/translation/SqlOperators.java", "diffHunk": "@@ -82,58 +83,85 @@\n           new UdafImpl<>(new StringAgg.StringAggString()));\n \n   public static final SqlOperator START_WITHS =\n-      createUdfOperator(\"STARTS_WITH\", BeamBuiltinMethods.STARTS_WITH_METHOD);\n+      createUdfOperator(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "22228c112ca3ce23906a74bd2b87191ff24ba993"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI5NTA0NzIzOnYy", "diffSide": "RIGHT", "path": "sdks/java/extensions/sql/zetasql/src/main/java/org/apache/beam/sdk/extensions/sql/zetasql/translation/SqlOperators.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QyMToyMjowNFrOH1L9yg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQwMjo0OTo1NFrOH27gMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTUzMjYxOA==", "bodyText": "nit: It seems like SqlAnalyzer.ZETASQL_FUNCTION_GROUP_NAME is the only thing ever passed to funGroup here and below. Should it really be an argument?", "url": "https://github.com/apache/beam/pull/13309#discussion_r525532618", "createdAt": "2020-11-17T21:22:04Z", "author": {"login": "apilloud"}, "path": "sdks/java/extensions/sql/zetasql/src/main/java/org/apache/beam/sdk/extensions/sql/zetasql/translation/SqlOperators.java", "diffHunk": "@@ -177,26 +205,25 @@ private static SqlUserDefinedFunction createUdfOperator(\n       Class<?> methodClass,\n       String methodName,\n       SqlReturnTypeInference returnTypeInference,\n-      List<RelDataType> paramTypes) {\n+      List<RelDataType> paramTypes,\n+      String funGroup) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "22228c112ca3ce23906a74bd2b87191ff24ba993"}, "originalPosition": 124}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzM2MDA0OA==", "bodyText": "The full implementation uses the group name to distinguish built-in functions from user-defined functions. (Whether that's a good idea or not is up for debate.)", "url": "https://github.com/apache/beam/pull/13309#discussion_r527360048", "createdAt": "2020-11-20T02:49:54Z", "author": {"login": "ibzib"}, "path": "sdks/java/extensions/sql/zetasql/src/main/java/org/apache/beam/sdk/extensions/sql/zetasql/translation/SqlOperators.java", "diffHunk": "@@ -177,26 +205,25 @@ private static SqlUserDefinedFunction createUdfOperator(\n       Class<?> methodClass,\n       String methodName,\n       SqlReturnTypeInference returnTypeInference,\n-      List<RelDataType> paramTypes) {\n+      List<RelDataType> paramTypes,\n+      String funGroup) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTUzMjYxOA=="}, "originalCommit": {"oid": "22228c112ca3ce23906a74bd2b87191ff24ba993"}, "originalPosition": 124}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI5NTA1Mzg4OnYy", "diffSide": "RIGHT", "path": "sdks/java/extensions/sql/zetasql/src/main/java/org/apache/beam/sdk/extensions/sql/zetasql/translation/SqlOperators.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QyMToyNDowMFrOH1MB3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQwMjo0ODozNlrOH27erw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTUzMzY2Mw==", "bodyText": "This (and createUdfOperator) is intended to be a (slightly hacky) helper function for implementing ZetaSQL operators via the UDF interface. Why do you need to make them public?", "url": "https://github.com/apache/beam/pull/13309#discussion_r525533663", "createdAt": "2020-11-17T21:24:00Z", "author": {"login": "apilloud"}, "path": "sdks/java/extensions/sql/zetasql/src/main/java/org/apache/beam/sdk/extensions/sql/zetasql/translation/SqlOperators.java", "diffHunk": "@@ -158,7 +186,7 @@ public static SqlFunction createZetaSqlFunction(String name, SqlTypeName returnT\n         SqlFunctionCategory.USER_DEFINED_FUNCTION);\n   }\n \n-  private static SqlUserDefinedAggFunction createUdafOperator(\n+  public static SqlUserDefinedAggFunction createUdafOperator(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "22228c112ca3ce23906a74bd2b87191ff24ba993"}, "originalPosition": 114}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzM1OTY2Mw==", "bodyText": "In the original PR, I used createUdfOperator in ExpressionConverter, and createUdafOperator in AggregateScanConverter. So they can be package-private instead of public.", "url": "https://github.com/apache/beam/pull/13309#discussion_r527359663", "createdAt": "2020-11-20T02:48:36Z", "author": {"login": "ibzib"}, "path": "sdks/java/extensions/sql/zetasql/src/main/java/org/apache/beam/sdk/extensions/sql/zetasql/translation/SqlOperators.java", "diffHunk": "@@ -158,7 +186,7 @@ public static SqlFunction createZetaSqlFunction(String name, SqlTypeName returnT\n         SqlFunctionCategory.USER_DEFINED_FUNCTION);\n   }\n \n-  private static SqlUserDefinedAggFunction createUdafOperator(\n+  public static SqlUserDefinedAggFunction createUdafOperator(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTUzMzY2Mw=="}, "originalCommit": {"oid": "22228c112ca3ce23906a74bd2b87191ff24ba993"}, "originalPosition": 114}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2760, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}