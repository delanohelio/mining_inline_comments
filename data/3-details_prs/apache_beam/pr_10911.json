{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc3NTAxNzEw", "number": 10911, "title": "[BEAM-9339] Declare capabilities for Go SDK.", "bodyText": "Thank you for your contribution! Follow this checklist to help us incorporate your contribution quickly and easily:\n\n Choose reviewer(s) and mention them in a comment (R: @username).\n Format the pull request title like [BEAM-XXX] Fixes bug in ApproximateQuantiles, where you replace BEAM-XXX with the appropriate JIRA issue, if applicable. This will automatically link the pull request to the issue.\n Update CHANGES.md with noteworthy changes.\n If this contribution is large, please file an Apache Individual Contributor License Agreement.\n\nSee the Contributor Guide for more tips on how to make review process smoother.\nPost-Commit Tests Status (on master branch)\n\n\n\nLang\nSDK\nApex\nDataflow\nFlink\nGearpump\nSamza\nSpark\n\n\n\n\nGo\n\n---\n---\n\n---\n---\n\n\n\nJava\n\n\n\n\n\n\n\n\n\nPython\n\n---\n\n\n---\n---\n\n\n\nXLang\n---\n---\n---\n\n---\n---\n---\n\n\n\nPre-Commit Tests Status (on master branch)\n\n\n\n---\nJava\nPython\nGo\nWebsite\n\n\n\n\nNon-portable\n\n\n\n\n\n\nPortable\n---\n\n---\n---\n\n\n\nSee .test-infra/jenkins/README for trigger phrase, status and link of all Jenkins jobs.", "createdAt": "2020-02-20T01:21:40Z", "url": "https://github.com/apache/beam/pull/10911", "merged": true, "mergeCommit": {"oid": "6ab6b1252daf2ad7ba3299aa7ecbb47b7469cba8"}, "closed": true, "closedAt": "2020-02-21T17:33:37Z", "author": {"login": "robertwb"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcGAtUuAH2gAyMzc3NTAxNzEwOjQxYmYyZGUzZDIwZTdmOTk0MjlhOWZlNjI4ZGJiYmRlMjg1OTA0MmM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcGUOPYgBqjMwNTg3NjAwNDQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "41bf2de3d20e7f99429a9fe628dbbbde2859042c", "author": {"user": {"login": "robertwb", "name": "Robert Bradshaw"}}, "url": "https://github.com/apache/beam/commit/41bf2de3d20e7f99429a9fe628dbbbde2859042c", "committedDate": "2020-02-20T01:19:08Z", "message": "Update go beam runner generated protos."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxNTg1Mjk1", "url": "https://github.com/apache/beam/pull/10911#pullrequestreview-361585295", "createdAt": "2020-02-20T01:48:59Z", "commit": {"oid": "45effd744be7ee6d28e3e4e03b09b22d81ec304f"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwMTo0ODo1OVrOFr-k1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwMTo1MTozM1rOFr-qag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTY1ODMyNQ==", "bodyText": "Accidentally duped.\nurnMultiCore?", "url": "https://github.com/apache/beam/pull/10911#discussion_r381658325", "createdAt": "2020-02-20T01:48:59Z", "author": {"login": "lostluck"}, "path": "sdks/go/pkg/beam/runners/universal/universal.go", "diffHunk": "@@ -78,6 +78,20 @@ func Execute(ctx context.Context, p *beam.Pipeline) error {\n \treturn err\n }\n \n+const (\n+\turnLegacyProgressReporting = \"beam:protocol:progress_reporting:v0\"\n+\turnMultiCore               = \"beam:protocol:multi_core_bundle_processing:v1\"\n+)\n+\n+func goCapabilities() []string {\n+\tcapabilities := []string{\n+\t\turnLegacyProgressReporting,\n+\t\turnLegacyProgressReporting,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "45effd744be7ee6d28e3e4e03b09b22d81ec304f"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTY1OTc1NA==", "bodyText": "You can return straight from the append and save a line.", "url": "https://github.com/apache/beam/pull/10911#discussion_r381659754", "createdAt": "2020-02-20T01:51:33Z", "author": {"login": "lostluck"}, "path": "sdks/go/pkg/beam/runners/universal/universal.go", "diffHunk": "@@ -78,6 +78,20 @@ func Execute(ctx context.Context, p *beam.Pipeline) error {\n \treturn err\n }\n \n+const (\n+\turnLegacyProgressReporting = \"beam:protocol:progress_reporting:v0\"\n+\turnMultiCore               = \"beam:protocol:multi_core_bundle_processing:v1\"\n+)\n+\n+func goCapabilities() []string {\n+\tcapabilities := []string{\n+\t\turnLegacyProgressReporting,\n+\t\turnLegacyProgressReporting,\n+\t}\n+\tcapabilities = append(capabilities, graphx.KnownStandardCoders()...)\n+\treturn capabilities\n+}\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "45effd744be7ee6d28e3e4e03b09b22d81ec304f"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYyMTE0NDAz", "url": "https://github.com/apache/beam/pull/10911#pullrequestreview-362114403", "createdAt": "2020-02-20T18:00:06Z", "commit": {"oid": "779319df0afa99ca0acad81a8c7ec61dff2b97c6"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYyMjcwOTgz", "url": "https://github.com/apache/beam/pull/10911#pullrequestreview-362270983", "createdAt": "2020-02-20T22:10:22Z", "commit": {"oid": "b147a5900ad144eb8c3f7d73ccff90c6fa4deea7"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQyMjoxMDoyMlrOFsk55Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQyMjoxMTo1OFrOFsk8nA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjI4NjMwOQ==", "bodyText": "Since this lives in the same package as the caller, we can make the function un-exported (lowercase k for knownStandardCoders() instead).\nIt's reasonably to have this function live here, due to locality with the coder URNs", "url": "https://github.com/apache/beam/pull/10911#discussion_r382286309", "createdAt": "2020-02-20T22:10:22Z", "author": {"login": "lostluck"}, "path": "sdks/go/pkg/beam/core/runtime/graphx/coder.go", "diffHunk": "@@ -50,6 +50,22 @@ const (\n \turnCoGBKList   = \"beam:go:coder:cogbklist:v1\" // CoGBK representation. Not a coder.\n )\n \n+func KnownStandardCoders() []string {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b147a5900ad144eb8c3f7d73ccff90c6fa4deea7"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjI4NzAwNA==", "bodyText": "I don't like that we're importing this package here. jobopts creates flags, which could be unexpected or unnecessary for certain runners.\nCould we instead just pass the environment urn in as a string? (the only thing we actually use from the package).", "url": "https://github.com/apache/beam/pull/10911#discussion_r382287004", "createdAt": "2020-02-20T22:11:58Z", "author": {"login": "lostluck"}, "path": "sdks/go/pkg/beam/core/runtime/graphx/translate.go", "diffHunk": "@@ -26,6 +27,7 @@ import (\n \t\"github.com/apache/beam/sdks/go/pkg/beam/core/util/protox\"\n \t\"github.com/apache/beam/sdks/go/pkg/beam/internal/errors\"\n \tpb \"github.com/apache/beam/sdks/go/pkg/beam/model/pipeline_v1\"\n+\t\"github.com/apache/beam/sdks/go/pkg/beam/options/jobopts\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b147a5900ad144eb8c3f7d73ccff90c6fa4deea7"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYyMzAzMDU2", "url": "https://github.com/apache/beam/pull/10911#pullrequestreview-362303056", "createdAt": "2020-02-20T23:16:30Z", "commit": {"oid": "14594c4b0bd3576f071bf348c7ea5fd33a630d3f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f46b678e001d55621e5de719cf782160b1ba67d", "author": {"user": {"login": "robertwb", "name": "Robert Bradshaw"}}, "url": "https://github.com/apache/beam/commit/5f46b678e001d55621e5de719cf782160b1ba67d", "committedDate": "2020-02-21T00:03:08Z", "message": "[BEAM-9339] Declare capabilities for Go SDK."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "14594c4b0bd3576f071bf348c7ea5fd33a630d3f", "author": {"user": {"login": "robertwb", "name": "Robert Bradshaw"}}, "url": "https://github.com/apache/beam/commit/14594c4b0bd3576f071bf348c7ea5fd33a630d3f", "committedDate": "2020-02-20T23:13:17Z", "message": "a couple more fixes"}, "afterCommit": {"oid": "5f46b678e001d55621e5de719cf782160b1ba67d", "author": {"user": {"login": "robertwb", "name": "Robert Bradshaw"}}, "url": "https://github.com/apache/beam/commit/5f46b678e001d55621e5de719cf782160b1ba67d", "committedDate": "2020-02-21T00:03:08Z", "message": "[BEAM-9339] Declare capabilities for Go SDK."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2800, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}