{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkwNjI3NDI1", "number": 11162, "title": "[BEAM-9339, BEAM-2939] Drop splittable field from ParDoPayload, add splittable dofn requirement to Python SDK.", "bodyText": "Thank you for your contribution! Follow this checklist to help us incorporate your contribution quickly and easily:\n\n Choose reviewer(s) and mention them in a comment (R: @username).\n Format the pull request title like [BEAM-XXX] Fixes bug in ApproximateQuantiles, where you replace BEAM-XXX with the appropriate JIRA issue, if applicable. This will automatically link the pull request to the issue.\n Update CHANGES.md with noteworthy changes.\n If this contribution is large, please file an Apache Individual Contributor License Agreement.\n\nSee the Contributor Guide for more tips on how to make review process smoother.\nPost-Commit Tests Status (on master branch)\n\n\n\nLang\nSDK\nApex\nDataflow\nFlink\nGearpump\nSamza\nSpark\n\n\n\n\nGo\n\n---\n---\n\n---\n---\n\n\n\nJava\n\n\n\n\n\n\n\n\n\nPython\n\n---\n\n\n---\n---\n\n\n\nXLang\n---\n---\n---\n\n---\n---\n\n\n\n\nPre-Commit Tests Status (on master branch)\n\n\n\n---\nJava\nPython\nGo\nWebsite\n\n\n\n\nNon-portable\n\n\n\n\n\n\nPortable\n---\n\n---\n---\n\n\n\nSee .test-infra/jenkins/README for trigger phrase, status and link of all Jenkins jobs.", "createdAt": "2020-03-18T19:37:59Z", "url": "https://github.com/apache/beam/pull/11162", "merged": true, "mergeCommit": {"oid": "cd8a00ccf343056d30e0a13f6e44aef9c3473276"}, "closed": true, "closedAt": "2020-03-20T18:54:59Z", "author": {"login": "lukecwik"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcO9vPlABqjMxNDMxMzY5NTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcPix8MAFqTM3ODYxNjA4Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "221184ba931dbb6f64e67f70bc91ac8ecdec956b", "author": {"user": {"login": "lukecwik", "name": "Lukasz Cwik"}}, "url": "https://github.com/apache/beam/commit/221184ba931dbb6f64e67f70bc91ac8ecdec956b", "committedDate": "2020-03-18T19:36:18Z", "message": "[BEAM-9339, BEAM-2939] Drop splittable field from proto, add splittable dofn capability to Python SDK."}, "afterCommit": {"oid": "0d245c79c44a72c3e7d479c26e7075f431dc0f18", "author": {"user": {"login": "lukecwik", "name": "Lukasz Cwik"}}, "url": "https://github.com/apache/beam/commit/0d245c79c44a72c3e7d479c26e7075f431dc0f18", "committedDate": "2020-03-18T20:56:04Z", "message": "[BEAM-9339, BEAM-2939] Drop splittable field from proto, add splittable dofn capability to Python SDK.\n\nAdd requirement URNs to Java SDK."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "17b021624d249dde650980e552f41a6c6fd44994", "author": {"user": {"login": "lukecwik", "name": "Lukasz Cwik"}}, "url": "https://github.com/apache/beam/commit/17b021624d249dde650980e552f41a6c6fd44994", "committedDate": "2020-03-18T22:14:32Z", "message": "[BEAM-9339, BEAM-2939] Drop splittable field from proto, add splittable dofn capability to Python SDK.\n\nAdd requirement URNs to Java SDK."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0d245c79c44a72c3e7d479c26e7075f431dc0f18", "author": {"user": {"login": "lukecwik", "name": "Lukasz Cwik"}}, "url": "https://github.com/apache/beam/commit/0d245c79c44a72c3e7d479c26e7075f431dc0f18", "committedDate": "2020-03-18T20:56:04Z", "message": "[BEAM-9339, BEAM-2939] Drop splittable field from proto, add splittable dofn capability to Python SDK.\n\nAdd requirement URNs to Java SDK."}, "afterCommit": {"oid": "17b021624d249dde650980e552f41a6c6fd44994", "author": {"user": {"login": "lukecwik", "name": "Lukasz Cwik"}}, "url": "https://github.com/apache/beam/commit/17b021624d249dde650980e552f41a6c6fd44994", "committedDate": "2020-03-18T22:14:32Z", "message": "[BEAM-9339, BEAM-2939] Drop splittable field from proto, add splittable dofn capability to Python SDK.\n\nAdd requirement URNs to Java SDK."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3OTU4NzYz", "url": "https://github.com/apache/beam/pull/11162#pullrequestreview-377958763", "createdAt": "2020-03-19T17:50:38Z", "commit": {"oid": "17b021624d249dde650980e552f41a6c6fd44994"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxNzo1MDozOFrOF4538g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxNzo1MTo1NVrOF4562Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTIxMjc4Ng==", "bodyText": "I'm not convinced that using the presence of a restriction coder is better than explicitly marking things as splittable, but could possibly be persuaded.", "url": "https://github.com/apache/beam/pull/11162#discussion_r395212786", "createdAt": "2020-03-19T17:50:38Z", "author": {"login": "robertwb"}, "path": "model/pipeline/src/main/proto/beam_runner_api.proto", "diffHunk": "@@ -457,10 +457,9 @@ message ParDoPayload {\n   // be placed in the pipeline requirements.\n   map<string, TimerFamilySpec> timer_family_specs = 9;\n \n-  // Whether the DoFn is splittable\n-  bool splittable = 6;\n-\n-  // (Required if splittable == true) Id of the restriction coder.\n+  // (Optional) Only set when this ParDo contains a splittable DoFn.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "17b021624d249dde650980e552f41a6c6fd44994"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTIxMzUyOQ==", "bodyText": "Is this a requirement, given that the pipeline would still execute correctly were expansion not performed? (Maybe the performance is bad enough to merit this, but then again, maybe SDF is so primitive that all runners should do something do support sources.)", "url": "https://github.com/apache/beam/pull/11162#discussion_r395213529", "createdAt": "2020-03-19T17:51:55Z", "author": {"login": "robertwb"}, "path": "model/pipeline/src/main/proto/beam_runner_api.proto", "diffHunk": "@@ -1355,6 +1355,10 @@ message StandardRequirements {\n     // This requirement indicates the requires_time_sorted_input field of ParDo\n     // transform payloads must be inspected.\n     REQUIRES_TIME_SORTED_INPUT = 3 [(beam_urn) = \"beam:requirement:pardo:time_sorted_input:v1\"];\n+\n+    // This requirement indicates the restriction_coder_id field of ParDo\n+    // transform payloads must be inspected.\n+    REQUIRES_SPLITTABLE_DOFN = 4 [(beam_urn) = \"beam:requirement:pardo:splittable_dofn:v1\"];", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "17b021624d249dde650980e552f41a6c6fd44994"}, "originalPosition": 38}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4NjE2MDg3", "url": "https://github.com/apache/beam/pull/11162#pullrequestreview-378616087", "createdAt": "2020-03-20T16:06:16Z", "commit": {"oid": "17b021624d249dde650980e552f41a6c6fd44994"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2817, "cost": 1, "resetAt": "2021-10-28T16:48:13Z"}}}