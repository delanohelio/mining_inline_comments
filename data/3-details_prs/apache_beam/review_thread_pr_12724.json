{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc1NjgyMjk1", "number": 12724, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxNzo1NDowM1rOEeaDJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxNzo1NDowM1rOEeaDJA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAwMzE5NTI0OnYy", "diffSide": "RIGHT", "path": "sdks/java/harness/src/main/java/org/apache/beam/fn/harness/FnApiDoFnRunner.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxNzo1NDowM1rOHKCrGQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxODowNjo1MlrOHKDFgQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDI5MTYwOQ==", "bodyText": "Can't windowedSplitResult itself be null here?", "url": "https://github.com/apache/beam/pull/12724#discussion_r480291609", "createdAt": "2020-08-31T17:54:03Z", "author": {"login": "ibzib"}, "path": "sdks/java/harness/src/main/java/org/apache/beam/fn/harness/FnApiDoFnRunner.java", "diffHunk": "@@ -1642,43 +1642,45 @@ public Object restriction() {\n               .build());\n     }\n \n-    ByteString.Output primaryBytes = ByteString.newOutput();\n-    ByteString.Output residualBytes = ByteString.newOutput();\n-    try {\n-      fullInputCoder.encode(windowedSplitResult.getPrimarySplitRoot(), primaryBytes);\n-      fullInputCoder.encode(windowedSplitResult.getResidualSplitRoot(), residualBytes);\n-    } catch (IOException e) {\n-      throw new RuntimeException(e);\n+    if (windowedSplitResult.getResidualSplitRoot() != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d8318789374299c716e5c96078058f7c6fca4624"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDI5NjI2MA==", "bodyText": "windowedSplitResult can be null and it has been checked above https://github.com/apache/beam/blob/master/sdks/java/harness/src/main/java/org/apache/beam/fn/harness/FnApiDoFnRunner.java#L1579-L1588.\nI'm working on a refactor #12710, which will provide much more test coverage. Sorry for the inconvenience.", "url": "https://github.com/apache/beam/pull/12724#discussion_r480296260", "createdAt": "2020-08-31T18:02:42Z", "author": {"login": "boyuanzz"}, "path": "sdks/java/harness/src/main/java/org/apache/beam/fn/harness/FnApiDoFnRunner.java", "diffHunk": "@@ -1642,43 +1642,45 @@ public Object restriction() {\n               .build());\n     }\n \n-    ByteString.Output primaryBytes = ByteString.newOutput();\n-    ByteString.Output residualBytes = ByteString.newOutput();\n-    try {\n-      fullInputCoder.encode(windowedSplitResult.getPrimarySplitRoot(), primaryBytes);\n-      fullInputCoder.encode(windowedSplitResult.getResidualSplitRoot(), residualBytes);\n-    } catch (IOException e) {\n-      throw new RuntimeException(e);\n+    if (windowedSplitResult.getResidualSplitRoot() != null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDI5MTYwOQ=="}, "originalCommit": {"oid": "d8318789374299c716e5c96078058f7c6fca4624"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDI5ODM2OQ==", "bodyText": "No worries. Please close this PR though if you don't think it's the best solution.", "url": "https://github.com/apache/beam/pull/12724#discussion_r480298369", "createdAt": "2020-08-31T18:06:52Z", "author": {"login": "ibzib"}, "path": "sdks/java/harness/src/main/java/org/apache/beam/fn/harness/FnApiDoFnRunner.java", "diffHunk": "@@ -1642,43 +1642,45 @@ public Object restriction() {\n               .build());\n     }\n \n-    ByteString.Output primaryBytes = ByteString.newOutput();\n-    ByteString.Output residualBytes = ByteString.newOutput();\n-    try {\n-      fullInputCoder.encode(windowedSplitResult.getPrimarySplitRoot(), primaryBytes);\n-      fullInputCoder.encode(windowedSplitResult.getResidualSplitRoot(), residualBytes);\n-    } catch (IOException e) {\n-      throw new RuntimeException(e);\n+    if (windowedSplitResult.getResidualSplitRoot() != null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDI5MTYwOQ=="}, "originalCommit": {"oid": "d8318789374299c716e5c96078058f7c6fca4624"}, "originalPosition": 11}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 398, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}