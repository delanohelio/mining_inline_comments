{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI5Nzc3NzIw", "number": 13444, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxODoxMjoxM1rOFAZDnA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxODoxMjoxM1rOFAZDnA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM1OTU0ODQ0OnYy", "diffSide": "RIGHT", "path": "sdks/java/extensions/ml/build.gradle", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxODoxMjoxM1rOH-qTyA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxODoxODozNVrOH-qpOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTQ2Njk1Mg==", "bodyText": "Just want to note that \"UP-TO-DATE\" and \"FROM-CACHE\" are two different Gradle statuses for a task. I presume if it is never up to date it is also never cached...", "url": "https://github.com/apache/beam/pull/13444#discussion_r535466952", "createdAt": "2020-12-03T18:12:13Z", "author": {"login": "kennknowles"}, "path": "sdks/java/extensions/ml/build.gradle", "diffHunk": "@@ -44,11 +44,30 @@ dependencies {\n     testRuntimeOnly project(\":runners:google-cloud-dataflow-java\")\n }\n \n-project.test {\n-    def gcpProject = project.findProperty(\"gcpProject\") ?: 'apache-beam-testing'\n-    include \"**/**IT.class\"\n-    def pipelineOptions = [\n-            \"--project=${gcpProject}\"\n-    ]\n-    systemProperty \"beamTestPipelineOptions\", JsonOutput.toJson(pipelineOptions)\n+/**\n+ * These are integration tests with the GCP ML services and the DirectRunner.\n+ */\n+task integrationTest(type: Test) {\n+  group = \"Verification\"\n+  def gcpProject = project.findProperty('gcpProject') ?: 'apache-beam-testing'\n+  def gcpTempRoot = project.findProperty('gcpTempRoot') ?: 'gs://temp-storage-for-end-to-end-tests'\n+  systemProperty \"beamTestPipelineOptions\", JsonOutput.toJson([\n+          \"--runner=DirectRunner\",\n+          \"--project=${gcpProject}\",\n+          \"--tempRoot=${gcpTempRoot}\",\n+  ])\n+\n+  // Disable Gradle cache: these ITs interact with live service that should always be considered \"out of date\"\n+  outputs.upToDateWhen { false }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "42df9779199daf146059fd4a6c95c0ea873002a1"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTQ3MjQ0MA==", "bodyText": "I copied this from \n  \n    \n      beam/sdks/java/extensions/google-cloud-platform-core/build.gradle\n    \n    \n        Lines 76 to 77\n      in\n      c5d5b9a\n    \n    \n    \n    \n\n        \n          \n           // Disable Gradle cache: these ITs interact with live service that should always be considered \"out of date\" \n        \n\n        \n          \n           outputs.upToDateWhen { false } \n        \n    \n  \n\n\nI can update the comments in both places to be more correct - it sounds like just dropping \"Disable Gradle cache:\" would address it?", "url": "https://github.com/apache/beam/pull/13444#discussion_r535472440", "createdAt": "2020-12-03T18:18:35Z", "author": {"login": "TheNeuralBit"}, "path": "sdks/java/extensions/ml/build.gradle", "diffHunk": "@@ -44,11 +44,30 @@ dependencies {\n     testRuntimeOnly project(\":runners:google-cloud-dataflow-java\")\n }\n \n-project.test {\n-    def gcpProject = project.findProperty(\"gcpProject\") ?: 'apache-beam-testing'\n-    include \"**/**IT.class\"\n-    def pipelineOptions = [\n-            \"--project=${gcpProject}\"\n-    ]\n-    systemProperty \"beamTestPipelineOptions\", JsonOutput.toJson(pipelineOptions)\n+/**\n+ * These are integration tests with the GCP ML services and the DirectRunner.\n+ */\n+task integrationTest(type: Test) {\n+  group = \"Verification\"\n+  def gcpProject = project.findProperty('gcpProject') ?: 'apache-beam-testing'\n+  def gcpTempRoot = project.findProperty('gcpTempRoot') ?: 'gs://temp-storage-for-end-to-end-tests'\n+  systemProperty \"beamTestPipelineOptions\", JsonOutput.toJson([\n+          \"--runner=DirectRunner\",\n+          \"--project=${gcpProject}\",\n+          \"--tempRoot=${gcpTempRoot}\",\n+  ])\n+\n+  // Disable Gradle cache: these ITs interact with live service that should always be considered \"out of date\"\n+  outputs.upToDateWhen { false }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTQ2Njk1Mg=="}, "originalCommit": {"oid": "42df9779199daf146059fd4a6c95c0ea873002a1"}, "originalPosition": 25}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2692, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}