{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYyNTA4ODIz", "number": 10578, "title": "[BEAM-9030] Migrate Beam to use beam-vendor-grpc-1_26_0", "bodyText": "As the vendored artifact beam-vendor-grpc-1_26_0 has been released, we can update the existing source of Beam to use it.\nPost-Commit Tests Status (on master branch)\n\n\n\nLang\nSDK\nApex\nDataflow\nFlink\nGearpump\nSamza\nSpark\n\n\n\n\nGo\n\n---\n---\n\n---\n---\n\n\n\nJava\n\n\n\n\n\n\n\n\n\nPython\n\n---\n\n\n---\n---\n\n\n\nXLang\n---\n---\n---\n\n---\n---\n---\n\n\n\nPre-Commit Tests Status (on master branch)\n\n\n\n---\nJava\nPython\nGo\nWebsite\n\n\n\n\nNon-portable\n\n\n\n\n\n\nPortable\n---\n\n---\n---\n\n\n\nSee .test-infra/jenkins/README for trigger phrase, status and link of all Jenkins jobs.", "createdAt": "2020-01-14T08:33:01Z", "url": "https://github.com/apache/beam/pull/10578", "merged": true, "mergeCommit": {"oid": "2fd785dedb979a248e63c6385f978fd18fd2fbc4"}, "closed": true, "closedAt": "2020-01-15T21:31:43Z", "author": {"login": "sunjincheng121"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb6MtH2gH2gAyMzYyNTA4ODIzOmRjYTM0ZTJhZDc3ZWYxMjRiYjRmNDQzMDY5ZjI5NTY4NWQ4N2EzYWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb6seYwgFqTM0MzUzNDk3NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "dca34e2ad77ef124bb4f443069f295685d87a3ad", "author": {"user": {"login": "sunjincheng121", "name": "Jincheng Sun"}}, "url": "https://github.com/apache/beam/commit/dca34e2ad77ef124bb4f443069f295685d87a3ad", "committedDate": "2020-01-14T08:30:41Z", "message": "[BEAM-9030] Migrate Beam to use beam-vendor-grpc-1_26_0"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQyNzM5MDUw", "url": "https://github.com/apache/beam/pull/10578#pullrequestreview-342739050", "createdAt": "2020-01-14T18:18:15Z", "commit": {"oid": "dca34e2ad77ef124bb4f443069f295685d87a3ad"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQxODoxODoxNVrOFdhJ9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQxODoyNzo1MFrOFdhbWQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjQ5NjI0Ng==", "bodyText": "I don't think you want to update the non-vendored gRPC version.", "url": "https://github.com/apache/beam/pull/10578#discussion_r366496246", "createdAt": "2020-01-14T18:18:15Z", "author": {"login": "lukecwik"}, "path": "buildSrc/src/main/groovy/org/apache/beam/gradle/BeamModulePlugin.groovy", "diffHunk": "@@ -372,7 +372,7 @@ class BeamModulePlugin implements Plugin<Project> {\n     def google_cloud_bigdataoss_version = \"1.9.16\"\n     def google_cloud_core_version = \"1.61.0\"\n     def google_cloud_spanner_version = \"1.6.0\"\n-    def grpc_version = \"1.17.1\"\n+    def grpc_version = \"1.26.0\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dca34e2ad77ef124bb4f443069f295685d87a3ad"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjQ5Nzg2NA==", "bodyText": "This is also for the non-vendored gRPC version. I also believe it should be $grpc_version and the protoc should be $protobuf_version.", "url": "https://github.com/apache/beam/pull/10578#discussion_r366497864", "createdAt": "2020-01-14T18:21:51Z", "author": {"login": "lukecwik"}, "path": "buildSrc/src/main/groovy/org/apache/beam/gradle/BeamModulePlugin.groovy", "diffHunk": "@@ -1444,7 +1444,7 @@ class BeamModulePlugin implements Plugin<Project> {\n           // An artifact spec for a protoc plugin, with \"grpc\" as\n           // the identifier, which can be referred to in the \"plugins\"\n           // container of the \"generateProtoTasks\" closure.\n-          grpc { artifact = \"io.grpc:protoc-gen-grpc-java:1.13.1\" }\n+          grpc { artifact = \"io.grpc:protoc-gen-grpc-java:1.26.0\" }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dca34e2ad77ef124bb4f443069f295685d87a3ad"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjUwMDY5Nw==", "bodyText": "Can we expose the protobuf and guava version from GrpcVendoring_1_26_0.groovy so its obvious that we want to use the versions related to our vendored gRPC.", "url": "https://github.com/apache/beam/pull/10578#discussion_r366500697", "createdAt": "2020-01-14T18:27:50Z", "author": {"login": "lukecwik"}, "path": "vendor/sdks-java-extensions-protobuf/build.gradle", "diffHunk": "@@ -23,7 +23,7 @@ applyJavaNature(\n   shadowClosure: {\n     dependencies {\n         include(dependency('com.google.guava:guava:26.0-jre'))\n-        include(dependency('com.google.protobuf:protobuf-java:3.7.1'))\n+        include(dependency('com.google.protobuf:protobuf-java:3.11.0'))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dca34e2ad77ef124bb4f443069f295685d87a3ad"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "130b402fada823e7c6c17e6f5eb20e2bee20db54", "author": {"user": {"login": "sunjincheng121", "name": "Jincheng Sun"}}, "url": "https://github.com/apache/beam/commit/130b402fada823e7c6c17e6f5eb20e2bee20db54", "committedDate": "2020-01-15T03:39:31Z", "message": "fixup! [BEAM-9030] Migrate Beam to use beam-vendor-grpc-1_26_0"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQzNTMxNTg5", "url": "https://github.com/apache/beam/pull/10578#pullrequestreview-343531589", "createdAt": "2020-01-15T21:25:26Z", "commit": {"oid": "130b402fada823e7c6c17e6f5eb20e2bee20db54"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNVQyMToyNToyNlrOFeG7jw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNVQyMToyNjo0NFrOFeG9mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzExNTE1MQ==", "bodyText": "applyPortabilityNature uses the vendored grpc artifacts and should use protoc/protoc-gen-grpc-java related to the vendored grpc version.", "url": "https://github.com/apache/beam/pull/10578#discussion_r367115151", "createdAt": "2020-01-15T21:25:26Z", "author": {"login": "lukecwik"}, "path": "buildSrc/src/main/groovy/org/apache/beam/gradle/BeamModulePlugin.groovy", "diffHunk": "@@ -1515,14 +1515,14 @@ class BeamModulePlugin implements Plugin<Project> {\n       project.protobuf {\n         protoc {\n           // The artifact spec for the Protobuf Compiler\n-          artifact = \"com.google.protobuf:protoc:3.11.0\" }\n+          artifact = \"com.google.protobuf:protoc:$protobuf_version\" }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "130b402fada823e7c6c17e6f5eb20e2bee20db54"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzExNTY3NQ==", "bodyText": "applyGrpcNature works on the unvendored gRPC version and as such is correct in using $protobuf_version and $grpc_version.", "url": "https://github.com/apache/beam/pull/10578#discussion_r367115675", "createdAt": "2020-01-15T21:26:44Z", "author": {"login": "lukecwik"}, "path": "buildSrc/src/main/groovy/org/apache/beam/gradle/BeamModulePlugin.groovy", "diffHunk": "@@ -1437,14 +1437,14 @@ class BeamModulePlugin implements Plugin<Project> {\n       project.protobuf {\n         protoc {\n           // The artifact spec for the Protobuf Compiler\n-          artifact = \"com.google.protobuf:protoc:3.6.0\" }\n+          artifact = \"com.google.protobuf:protoc:$protobuf_version\" }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "130b402fada823e7c6c17e6f5eb20e2bee20db54"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQzNTM0OTc1", "url": "https://github.com/apache/beam/pull/10578#pullrequestreview-343534975", "createdAt": "2020-01-15T21:31:33Z", "commit": {"oid": "130b402fada823e7c6c17e6f5eb20e2bee20db54"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3788, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}