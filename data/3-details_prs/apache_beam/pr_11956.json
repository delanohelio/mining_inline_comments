{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMxNzYwMjcz", "number": 11956, "title": "[BEAM-8133] Publishing results of Nexmark tests to InfluxDB", "bodyText": "Thank you for your contribution! Follow this checklist to help us incorporate your contribution quickly and easily:\n\n Choose reviewer(s) and mention them in a comment (R: @username).\n Format the pull request title like [BEAM-XXX] Fixes bug in ApproximateQuantiles, where you replace BEAM-XXX with the appropriate JIRA issue, if applicable. This will automatically link the pull request to the issue.\n Update CHANGES.md with noteworthy changes.\n If this contribution is large, please file an Apache Individual Contributor License Agreement.\n\nSee the Contributor Guide for more tips on how to make review process smoother.\nPost-Commit Tests Status (on master branch)\n\n\n\nLang\nSDK\nApex\nDataflow\nFlink\nGearpump\nSamza\nSpark\n\n\n\n\nGo\n\n---\n---\n\n---\n---\n\n\n\nJava\n\n\n\n\n\n\n\n\n\nPython\n\n---\n\n\n---\n---\n\n\n\nXLang\n---\n---\n---\n\n---\n---\n\n\n\n\nPre-Commit Tests Status (on master branch)\n\n\n\n---\nJava\nPython\nGo\nWebsite\n\n\n\n\nNon-portable\n\n\n\n\n\n\nPortable\n---\n\n---\n---\n\n\n\nSee .test-infra/jenkins/README for trigger phrase, status and link of all Jenkins jobs.", "createdAt": "2020-06-09T12:34:06Z", "url": "https://github.com/apache/beam/pull/11956", "merged": true, "mergeCommit": {"oid": "3f1db411b9e605b417f5fad194fda371056d4f81"}, "closed": true, "closedAt": "2020-06-25T16:33:34Z", "author": {"login": "kamilwu"}, "timelineItems": {"totalCount": 20, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcp6QRvgBqjM0Mjk4MzkzODk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcuwhsvgBqjM0ODI5ODk0OTc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8644628985563cb6c12126225eaf3940a9a1dfd0", "author": {"user": {"login": "pawelpasterz", "name": null}}, "url": "https://github.com/apache/beam/commit/8644628985563cb6c12126225eaf3940a9a1dfd0", "committedDate": "2020-06-10T13:51:35Z", "message": "Fix condition"}, "afterCommit": {"oid": "7f2be4379c341e6a2ea8d067cbac147c6e78e0bd", "author": {"user": {"login": "kamilwu", "name": "Kamil Wasilewski"}}, "url": "https://github.com/apache/beam/commit/7f2be4379c341e6a2ea8d067cbac147c6e78e0bd", "committedDate": "2020-06-10T14:09:01Z", "message": "[BEAM-8133]\u00a0Build new Grafana images conditionally"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7f2be4379c341e6a2ea8d067cbac147c6e78e0bd", "author": {"user": {"login": "kamilwu", "name": "Kamil Wasilewski"}}, "url": "https://github.com/apache/beam/commit/7f2be4379c341e6a2ea8d067cbac147c6e78e0bd", "committedDate": "2020-06-10T14:09:01Z", "message": "[BEAM-8133]\u00a0Build new Grafana images conditionally"}, "afterCommit": {"oid": "fab9cff7006b35c6a14937e5bb90d7f6530062b2", "author": {"user": {"login": "kamilwu", "name": "Kamil Wasilewski"}}, "url": "https://github.com/apache/beam/commit/fab9cff7006b35c6a14937e5bb90d7f6530062b2", "committedDate": "2020-06-10T14:12:31Z", "message": "[BEAM-8133]\u00a0Build new Grafana images conditionally"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fab9cff7006b35c6a14937e5bb90d7f6530062b2", "author": {"user": {"login": "kamilwu", "name": "Kamil Wasilewski"}}, "url": "https://github.com/apache/beam/commit/fab9cff7006b35c6a14937e5bb90d7f6530062b2", "committedDate": "2020-06-10T14:12:31Z", "message": "[BEAM-8133]\u00a0Build new Grafana images conditionally"}, "afterCommit": {"oid": "5fedf7e4ebe8b44de12267986cfd5c61d11334f7", "author": {"user": {"login": "kamilwu", "name": "Kamil Wasilewski"}}, "url": "https://github.com/apache/beam/commit/5fedf7e4ebe8b44de12267986cfd5c61d11334f7", "committedDate": "2020-06-10T15:23:15Z", "message": "[BEAM-8133]\u00a0Build new Grafana images conditionally"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5fedf7e4ebe8b44de12267986cfd5c61d11334f7", "author": {"user": {"login": "kamilwu", "name": "Kamil Wasilewski"}}, "url": "https://github.com/apache/beam/commit/5fedf7e4ebe8b44de12267986cfd5c61d11334f7", "committedDate": "2020-06-10T15:23:15Z", "message": "[BEAM-8133]\u00a0Build new Grafana images conditionally"}, "afterCommit": {"oid": "e89172cd82451d8aabd4ffc04f38cf83e9b3b575", "author": {"user": {"login": "kamilwu", "name": "Kamil Wasilewski"}}, "url": "https://github.com/apache/beam/commit/e89172cd82451d8aabd4ffc04f38cf83e9b3b575", "committedDate": "2020-06-11T17:25:51Z", "message": "[BEAM-8133]\u00a0Build new Grafana images conditionally"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e89172cd82451d8aabd4ffc04f38cf83e9b3b575", "author": {"user": {"login": "kamilwu", "name": "Kamil Wasilewski"}}, "url": "https://github.com/apache/beam/commit/e89172cd82451d8aabd4ffc04f38cf83e9b3b575", "committedDate": "2020-06-11T17:25:51Z", "message": "[BEAM-8133]\u00a0Build new Grafana images conditionally"}, "afterCommit": {"oid": "1586c7522cefe122ab47df1be28635673e45ca11", "author": {"user": {"login": "kamilwu", "name": "Kamil Wasilewski"}}, "url": "https://github.com/apache/beam/commit/1586c7522cefe122ab47df1be28635673e45ca11", "committedDate": "2020-06-15T11:07:50Z", "message": "[BEAM-8133]\u00a0Build new Grafana images conditionally"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyMTQyOTUz", "url": "https://github.com/apache/beam/pull/11956#pullrequestreview-432142953", "createdAt": "2020-06-17T07:48:04Z", "commit": {"oid": "1586c7522cefe122ab47df1be28635673e45ca11"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QwNzo0ODowNFrOGk5ysg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QwNzo0ODowNFrOGk5ysg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTM0ODc4Ng==", "bodyText": "I'm wondering if it would make sense to extract the appends of keys and values to a method, but I can't find a nice and clean way of doing it. @kamilwu do you have any thoughts about it?", "url": "https://github.com/apache/beam/pull/11956#discussion_r441348786", "createdAt": "2020-06-17T07:48:04Z", "author": {"login": "mwalenia"}, "path": "sdks/java/testing/test-utils/src/main/java/org/apache/beam/sdk/testutils/publishing/InfluxDBPublisher.java", "diffHunk": "@@ -40,34 +43,72 @@\n \n   private InfluxDBPublisher() {}\n \n+  public static void publishNexmarkResults(\n+      final Collection<Map<String, Object>> results, final InfluxDBSettings settings) {\n+    publishWithCheck(settings, () -> publishNexmark(results, settings));\n+  }\n+\n   public static void publishWithSettings(\n       final Collection<NamedTestResult> results, final InfluxDBSettings settings) {\n+    publishWithCheck(settings, () -> publishCommon(results, settings));\n+  }\n+\n+  private static void publishWithCheck(\n+      final InfluxDBSettings settings, final PublishFunction publishFunction) {\n     requireNonNull(settings, \"InfluxDB settings must not be null\");\n     if (isNoneBlank(settings.measurement, settings.database)) {\n       try {\n-        publish(results, settings);\n-      } catch (final Exception exception) {\n+        publishFunction.publish();\n+      } catch (Exception exception) {\n         LOG.warn(\"Unable to publish metrics due to error: {}\", exception.getMessage(), exception);\n       }\n     } else {\n       LOG.warn(\"Missing property -- measurement/database. Metrics won't be published.\");\n     }\n   }\n \n-  private static void publish(\n-      final Collection<NamedTestResult> results, final InfluxDBSettings settings) throws Exception {\n+  private static void publishNexmark(\n+      final Collection<Map<String, Object>> results, final InfluxDBSettings settings)\n+      throws Exception {\n \n-    final HttpClientBuilder builder = HttpClientBuilder.create();\n+    final HttpClientBuilder builder = provideHttpBuilder(settings);\n+    final HttpPost postRequest = providePOSTRequest(settings);\n+    final StringBuilder metricBuilder = new StringBuilder();\n+    results.forEach(\n+        map ->\n+            metricBuilder\n+                .append(map.get(\"measurement\"))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1586c7522cefe122ab47df1be28635673e45ca11"}, "originalPosition": 61}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1586c7522cefe122ab47df1be28635673e45ca11", "author": {"user": {"login": "kamilwu", "name": "Kamil Wasilewski"}}, "url": "https://github.com/apache/beam/commit/1586c7522cefe122ab47df1be28635673e45ca11", "committedDate": "2020-06-15T11:07:50Z", "message": "[BEAM-8133]\u00a0Build new Grafana images conditionally"}, "afterCommit": {"oid": "92d802f6762acd3cae1c7064589635ec3ad983d7", "author": {"user": {"login": "pawelpasterz", "name": null}}, "url": "https://github.com/apache/beam/commit/92d802f6762acd3cae1c7064589635ec3ad983d7", "committedDate": "2020-06-15T11:07:50Z", "message": "[BEAM-8133] Update publish logic"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "92d802f6762acd3cae1c7064589635ec3ad983d7", "author": {"user": {"login": "pawelpasterz", "name": null}}, "url": "https://github.com/apache/beam/commit/92d802f6762acd3cae1c7064589635ec3ad983d7", "committedDate": "2020-06-15T11:07:50Z", "message": "[BEAM-8133] Update publish logic"}, "afterCommit": {"oid": "116ad4ad78b37d1ddc4e14eaac1babd6db7f961a", "author": {"user": {"login": "pawelpasterz", "name": null}}, "url": "https://github.com/apache/beam/commit/116ad4ad78b37d1ddc4e14eaac1babd6db7f961a", "committedDate": "2020-06-19T09:09:37Z", "message": "[BEAM-8133] Update publish logic"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "116ad4ad78b37d1ddc4e14eaac1babd6db7f961a", "author": {"user": {"login": "pawelpasterz", "name": null}}, "url": "https://github.com/apache/beam/commit/116ad4ad78b37d1ddc4e14eaac1babd6db7f961a", "committedDate": "2020-06-19T09:09:37Z", "message": "[BEAM-8133] Update publish logic"}, "afterCommit": {"oid": "b52dc6d043a5df203b229496d8167cd9f4faf83e", "author": {"user": {"login": "pawelpasterz", "name": null}}, "url": "https://github.com/apache/beam/commit/b52dc6d043a5df203b229496d8167cd9f4faf83e", "committedDate": "2020-06-19T12:58:49Z", "message": "[BEAM-8133] Update publish logic"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2NDYzNDMw", "url": "https://github.com/apache/beam/pull/11956#pullrequestreview-436463430", "createdAt": "2020-06-24T09:08:41Z", "commit": {"oid": "b52dc6d043a5df203b229496d8167cd9f4faf83e"}, "state": "COMMENTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwOTowODo0MlrOGoJoWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxMjo0Nzo1NVrOGoQkjg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc1NDAwOA==", "bodyText": "<3", "url": "https://github.com/apache/beam/pull/11956#discussion_r444754008", "createdAt": "2020-06-24T09:08:42Z", "author": {"login": "iemejia"}, "path": ".test-infra/metrics/kubernetes/beam-influxdb.yaml", "diffHunk": "@@ -24,6 +24,7 @@ metadata:\n data:\n   init-script.iql: |\n     CREATE RETENTION POLICY \"a_year\" ON \"beam_test_metrics\" DURATION 52w REPLICATION 1 DEFAULT\n+    CREATE RETENTION POLICY \"forever\" ON \"beam_test_metrics\" DURATION INF REPLICATION 1", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b52dc6d043a5df203b229496d8167cd9f4faf83e"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc1OTA5NA==", "bodyText": "Since the goal is to improve the existing use case can we make this an integer and use ms instead to make it more precise?", "url": "https://github.com/apache/beam/pull/11956#discussion_r444759094", "createdAt": "2020-06-24T09:17:22Z", "author": {"login": "iemejia"}, "path": "sdks/java/testing/nexmark/src/main/java/org/apache/beam/sdk/nexmark/Main.java", "diffHunk": "@@ -142,21 +148,27 @@ void runAll(String[] args) throws IOException {\n         saveSummary(null, configurations, actual, baseline, start, options);\n       }\n \n-      if (options.getExportSummaryToBigQuery()) {\n-        ImmutableMap<String, String> schema =\n-            ImmutableMap.<String, String>builder()\n-                .put(\"timestamp\", \"timestamp\")\n-                .put(\"runtimeSec\", \"float\")\n-                .put(\"eventsPerSec\", \"float\")\n-                .put(\"numResults\", \"integer\")\n-                .build();\n+      final ImmutableMap<String, String> schema =\n+          ImmutableMap.<String, String>builder()\n+              .put(\"timestamp\", \"timestamp\")\n+              .put(\"runtimeSec\", \"float\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b52dc6d043a5df203b229496d8167cd9f4faf83e"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc1OTYzMQ==", "bodyText": "Do we use this one? it looks with runtimeMs + numResults this is not needed anymore or we can deduce it if someone cares.", "url": "https://github.com/apache/beam/pull/11956#discussion_r444759631", "createdAt": "2020-06-24T09:18:10Z", "author": {"login": "iemejia"}, "path": "sdks/java/testing/nexmark/src/main/java/org/apache/beam/sdk/nexmark/Main.java", "diffHunk": "@@ -142,21 +148,27 @@ void runAll(String[] args) throws IOException {\n         saveSummary(null, configurations, actual, baseline, start, options);\n       }\n \n-      if (options.getExportSummaryToBigQuery()) {\n-        ImmutableMap<String, String> schema =\n-            ImmutableMap.<String, String>builder()\n-                .put(\"timestamp\", \"timestamp\")\n-                .put(\"runtimeSec\", \"float\")\n-                .put(\"eventsPerSec\", \"float\")\n-                .put(\"numResults\", \"integer\")\n-                .build();\n+      final ImmutableMap<String, String> schema =\n+          ImmutableMap.<String, String>builder()\n+              .put(\"timestamp\", \"timestamp\")\n+              .put(\"runtimeSec\", \"float\")\n+              .put(\"eventsPerSec\", \"float\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b52dc6d043a5df203b229496d8167cd9f4faf83e"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc2MTU3Mg==", "bodyText": "Oh I thought timestamps in Influxe were in ms well probably we don't need that level of precision for the start timestamp.", "url": "https://github.com/apache/beam/pull/11956#discussion_r444761572", "createdAt": "2020-06-24T09:21:36Z", "author": {"login": "iemejia"}, "path": "sdks/java/testing/nexmark/src/main/java/org/apache/beam/sdk/nexmark/Main.java", "diffHunk": "@@ -142,21 +148,27 @@ void runAll(String[] args) throws IOException {\n         saveSummary(null, configurations, actual, baseline, start, options);\n       }\n \n-      if (options.getExportSummaryToBigQuery()) {\n-        ImmutableMap<String, String> schema =\n-            ImmutableMap.<String, String>builder()\n-                .put(\"timestamp\", \"timestamp\")\n-                .put(\"runtimeSec\", \"float\")\n-                .put(\"eventsPerSec\", \"float\")\n-                .put(\"numResults\", \"integer\")\n-                .build();\n+      final ImmutableMap<String, String> schema =\n+          ImmutableMap.<String, String>builder()\n+              .put(\"timestamp\", \"timestamp\")\n+              .put(\"runtimeSec\", \"float\")\n+              .put(\"eventsPerSec\", \"float\")\n+              .put(\"numResults\", \"integer\")\n+              .build();\n \n+      if (options.getExportSummaryToBigQuery()) {\n         savePerfsToBigQuery(\n             BigQueryResultsPublisher.create(options.getBigQueryDataset(), schema),\n             options,\n             actual,\n             start);\n       }\n+\n+      if (options.getExportSummaryToInfluxDB()) {\n+        final long timestamp = start.getMillis() / 1000; // seconds", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b52dc6d043a5df203b229496d8167cd9f4faf83e"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc2MjY5Nw==", "bodyText": "\ud83d\udc4d", "url": "https://github.com/apache/beam/pull/11956#discussion_r444762697", "createdAt": "2020-06-24T09:23:33Z", "author": {"login": "iemejia"}, "path": "sdks/java/testing/nexmark/src/main/java/org/apache/beam/sdk/nexmark/NexmarkQueryName.java", "diffHunk": "@@ -42,8 +42,8 @@\n   PROCESSING_TIME_WINDOWS(12), // Query \"12\"\n \n   // Other non-numbered queries\n-  BOUNDED_SIDE_INPUT_JOIN,\n-  SESSION_SIDE_INPUT_JOIN;\n+  BOUNDED_SIDE_INPUT_JOIN(13),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b52dc6d043a5df203b229496d8167cd9f4faf83e"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc2MzYwMQ==", "bodyText": "Do not depend on repackaged commons-lang3 this will probably be removed in the future so better add the explicit commons-lang3 import and corresponding classes.", "url": "https://github.com/apache/beam/pull/11956#discussion_r444763601", "createdAt": "2020-06-24T09:25:06Z", "author": {"login": "iemejia"}, "path": "sdks/java/testing/test-utils/src/main/java/org/apache/beam/sdk/testutils/publishing/InfluxDBPublisher.java", "diffHunk": "@@ -19,14 +19,19 @@\n \n import static java.nio.charset.StandardCharsets.UTF_8;\n import static java.util.Objects.requireNonNull;\n+import static java.util.stream.Collectors.joining;\n+import static org.apache.beam.repackaged.core.org.apache.commons.lang3.StringUtils.isBlank;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b52dc6d043a5df203b229496d8167cd9f4faf83e"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDg2NzcyNg==", "bodyText": "nit: The original code with the strings looks uglier but somehow is easier to understand in a single read (so easier to maintain), the new one requires a lot of methods and jumping back and forth in code for not much. Can we go back to the older approach", "url": "https://github.com/apache/beam/pull/11956#discussion_r444867726", "createdAt": "2020-06-24T12:47:55Z", "author": {"login": "iemejia"}, "path": "sdks/java/testing/test-utils/src/main/java/org/apache/beam/sdk/testutils/publishing/InfluxDBPublisher.java", "diffHunk": "@@ -66,30 +125,43 @@ private static void publish(\n       builder.setDefaultCredentialsProvider(provider);\n     }\n \n-    final HttpPost postRequest = new HttpPost(settings.host + \"/write?db=\" + settings.database);\n+    return builder;\n+  }\n \n-    final StringBuilder metricBuilder = new StringBuilder();\n-    results.stream()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b52dc6d043a5df203b229496d8167cd9f4faf83e"}, "originalPosition": 113}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c1a17b762d1ee5bc4e2caf0af7f609f1c36ea225", "author": {"user": {"login": "kamilwu", "name": "Kamil Wasilewski"}}, "url": "https://github.com/apache/beam/commit/c1a17b762d1ee5bc4e2caf0af7f609f1c36ea225", "committedDate": "2020-06-25T10:27:35Z", "message": "[BEAM-8133] Apply InfluxDB pipeline options in Nexmark tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f58fb616a25d85daf3c50485c0f10d2563686296", "author": {"user": {"login": "kamilwu", "name": "Kamil Wasilewski"}}, "url": "https://github.com/apache/beam/commit/f58fb616a25d85daf3c50485c0f10d2563686296", "committedDate": "2020-06-25T10:27:35Z", "message": "[BEAM-8133] Infinite retention policy for InfluxDB"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b52dc6d043a5df203b229496d8167cd9f4faf83e", "author": {"user": {"login": "pawelpasterz", "name": null}}, "url": "https://github.com/apache/beam/commit/b52dc6d043a5df203b229496d8167cd9f4faf83e", "committedDate": "2020-06-19T12:58:49Z", "message": "[BEAM-8133] Update publish logic"}, "afterCommit": {"oid": "91d0081d8113274a2f41257bb6979f0f9ca1fee6", "author": {"user": {"login": "kamilwu", "name": "Kamil Wasilewski"}}, "url": "https://github.com/apache/beam/commit/91d0081d8113274a2f41257bb6979f0f9ca1fee6", "committedDate": "2020-06-25T11:12:26Z", "message": "fix: change unit from sec to ms, rename runtimeSec to runtimeMs"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "91d0081d8113274a2f41257bb6979f0f9ca1fee6", "author": {"user": {"login": "kamilwu", "name": "Kamil Wasilewski"}}, "url": "https://github.com/apache/beam/commit/91d0081d8113274a2f41257bb6979f0f9ca1fee6", "committedDate": "2020-06-25T11:12:26Z", "message": "fix: change unit from sec to ms, rename runtimeSec to runtimeMs"}, "afterCommit": {"oid": "12f2cbe9d9a22783d683c8414598ded57adea2d6", "author": {"user": {"login": "kamilwu", "name": "Kamil Wasilewski"}}, "url": "https://github.com/apache/beam/commit/12f2cbe9d9a22783d683c8414598ded57adea2d6", "committedDate": "2020-06-25T11:17:12Z", "message": "[BEAM-8133] Update dashboards to reflect model changes\n\n* changed unit from seconds to milliseconds\n* renamed `runtimeSec` field to `runtimeMs`"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3NDc3NjE0", "url": "https://github.com/apache/beam/pull/11956#pullrequestreview-437477614", "createdAt": "2020-06-25T13:10:59Z", "commit": {"oid": "12f2cbe9d9a22783d683c8414598ded57adea2d6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxMzoxMDo1OVrOGo5-Ng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxMzoxMDo1OVrOGo5-Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTU0NjAzOA==", "bodyText": "argh this commons import escaped here too. Can you use the non repackaged version please.", "url": "https://github.com/apache/beam/pull/11956#discussion_r445546038", "createdAt": "2020-06-25T13:10:59Z", "author": {"login": "iemejia"}, "path": "sdks/java/testing/test-utils/src/main/java/org/apache/beam/sdk/testutils/publishing/InfluxDBPublisher.java", "diffHunk": "@@ -19,14 +19,16 @@\n \n import static java.nio.charset.StandardCharsets.UTF_8;\n import static java.util.Objects.requireNonNull;\n-import static org.apache.beam.repackaged.core.org.apache.commons.lang3.StringUtils.isNoneBlank;\n \n import java.io.IOException;\n import java.util.Collection;\n+import java.util.Map;\n+import org.apache.beam.repackaged.core.org.apache.commons.lang3.StringUtils;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "12f2cbe9d9a22783d683c8414598ded57adea2d6"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3NDc4MDg1", "url": "https://github.com/apache/beam/pull/11956#pullrequestreview-437478085", "createdAt": "2020-06-25T13:11:32Z", "commit": {"oid": "12f2cbe9d9a22783d683c8414598ded57adea2d6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "49d5e872012a1786a604e3ac95dce7c92f0adefe", "author": {"user": {"login": "pawelpasterz", "name": null}}, "url": "https://github.com/apache/beam/commit/49d5e872012a1786a604e3ac95dce7c92f0adefe", "committedDate": "2020-06-25T14:53:13Z", "message": "[BEAM-8133] Update publish logic"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "12f2cbe9d9a22783d683c8414598ded57adea2d6", "author": {"user": {"login": "kamilwu", "name": "Kamil Wasilewski"}}, "url": "https://github.com/apache/beam/commit/12f2cbe9d9a22783d683c8414598ded57adea2d6", "committedDate": "2020-06-25T11:17:12Z", "message": "[BEAM-8133] Update dashboards to reflect model changes\n\n* changed unit from seconds to milliseconds\n* renamed `runtimeSec` field to `runtimeMs`"}, "afterCommit": {"oid": "abfb1dd58c84f00e0d7b96bc7700dc154eb1766c", "author": {"user": {"login": "kamilwu", "name": "Kamil Wasilewski"}}, "url": "https://github.com/apache/beam/commit/abfb1dd58c84f00e0d7b96bc7700dc154eb1766c", "committedDate": "2020-06-25T14:53:13Z", "message": "[BEAM-8133] Update dashboards to reflect model changes\n\n* changed unit from seconds to milliseconds\n* renamed `runtimeSec` field to `runtimeMs`"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e89324f43b186a3f26d68d11b74e916a47a21907", "author": {"user": {"login": "kamilwu", "name": "Kamil Wasilewski"}}, "url": "https://github.com/apache/beam/commit/e89324f43b186a3f26d68d11b74e916a47a21907", "committedDate": "2020-06-25T15:33:36Z", "message": "[BEAM-8133] Update dashboards to reflect model changes\n\n* changed unit from seconds to milliseconds\n* renamed `runtimeSec` field to `runtimeMs`"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "abfb1dd58c84f00e0d7b96bc7700dc154eb1766c", "author": {"user": {"login": "kamilwu", "name": "Kamil Wasilewski"}}, "url": "https://github.com/apache/beam/commit/abfb1dd58c84f00e0d7b96bc7700dc154eb1766c", "committedDate": "2020-06-25T14:53:13Z", "message": "[BEAM-8133] Update dashboards to reflect model changes\n\n* changed unit from seconds to milliseconds\n* renamed `runtimeSec` field to `runtimeMs`"}, "afterCommit": {"oid": "e89324f43b186a3f26d68d11b74e916a47a21907", "author": {"user": {"login": "kamilwu", "name": "Kamil Wasilewski"}}, "url": "https://github.com/apache/beam/commit/e89324f43b186a3f26d68d11b74e916a47a21907", "committedDate": "2020-06-25T15:33:36Z", "message": "[BEAM-8133] Update dashboards to reflect model changes\n\n* changed unit from seconds to milliseconds\n* renamed `runtimeSec` field to `runtimeMs`"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4166, "cost": 1, "resetAt": "2021-10-28T16:48:13Z"}}}