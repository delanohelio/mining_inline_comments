{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAyODExOTY2", "number": 11405, "title": "[BEAM-9747] Deprecate RedisIO.readAll() and add RedisIO.readKeyPatterns as a replacement", "bodyText": "The idea is to let this deprecation for two releases before introducing the ReadAll pattern based on Reads for RedisIO to like proposed in BEAM-9403.\nR: @aromanenko-dev", "createdAt": "2020-04-13T19:57:12Z", "url": "https://github.com/apache/beam/pull/11405", "merged": true, "mergeCommit": {"oid": "4dfc8a1351cf2a53deb310cc401eb3ed765ca499"}, "closed": true, "closedAt": "2020-06-22T15:17:52Z", "author": {"login": "iemejia"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcrkifigFqTQzMDg3MDc2NQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABctybExAFqTQzNTAyNzA1Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwODcwNzY1", "url": "https://github.com/apache/beam/pull/11405#pullrequestreview-430870765", "createdAt": "2020-06-15T17:58:09Z", "commit": {"oid": "8ff459eaaf30b706f07a09d95f58ed154afffe47"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxNzo1ODowOVrOGj80FQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxNzo1ODowOVrOGj80FQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDM0OTcxNw==", "bodyText": "There is API breakage here since some users could rely on the fact that readAll() returns ReadAll. I think we should keep the same signature for now but just deprecate it. Then remove it after 3 releases or change it to make consistent with all other ReadAll patterns that take PCollection<Read> as an input.\nIn the same time, we still can add a new transform ReadKeyPatterns, available through readKeyPatterns(), and ask users to use it instead.", "url": "https://github.com/apache/beam/pull/11405#discussion_r440349717", "createdAt": "2020-06-15T17:58:09Z", "author": {"login": "aromanenko-dev"}, "path": "sdks/java/io/redis/src/main/java/org/apache/beam/sdk/io/redis/RedisIO.java", "diffHunk": "@@ -123,8 +123,24 @@ public static Read read() {\n    * Like {@link #read()} but executes multiple instances of the Redis query substituting each\n    * element of a {@link PCollection} as key pattern.\n    */\n-  public static ReadAll readAll() {\n-    return new AutoValue_RedisIO_ReadAll.Builder()\n+  public static ReadKeyPatterns readKeyPatterns() {\n+    return new AutoValue_RedisIO_ReadKeyPatterns.Builder()\n+        .setConnectionConfiguration(RedisConnectionConfiguration.create())\n+        .setBatchSize(1000)\n+        .setOutputParallelization(true)\n+        .build();\n+  }\n+\n+  /**\n+   * Like {@link #read()} but executes multiple instances of the Redis query substituting each\n+   * element of a {@link PCollection} as key pattern.\n+   *\n+   * @deprecated This method is not consistent with the readAll pattern of other transforms and will\n+   *     be remove soon. Please update you code to use {@link #readKeyPatterns()} instead.\n+   */\n+  @Deprecated\n+  public static ReadKeyPatterns readAll() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8ff459eaaf30b706f07a09d95f58ed154afffe47"}, "originalPosition": 39}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8ff459eaaf30b706f07a09d95f58ed154afffe47", "author": {"user": {"login": "iemejia", "name": "Isma\u00ebl Mej\u00eda"}}, "url": "https://github.com/apache/beam/commit/8ff459eaaf30b706f07a09d95f58ed154afffe47", "committedDate": "2020-04-13T19:52:55Z", "message": "[BEAM-9747] Deprecate RedisIO.readAll() and add RedisIO.readKeyPatterns as a replacement"}, "afterCommit": {"oid": "cf1d32d356149c9e3882103bd1a99cfb2537f558", "author": {"user": {"login": "iemejia", "name": "Isma\u00ebl Mej\u00eda"}}, "url": "https://github.com/apache/beam/commit/cf1d32d356149c9e3882103bd1a99cfb2537f558", "committedDate": "2020-06-20T20:45:56Z", "message": "[BEAM-9747] Deprecate RedisIO.readAll() and add RedisIO.readKeyPatterns as a replacement"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c37efb737d3607ec395831cbf0553368cb3ac92b", "author": {"user": {"login": "iemejia", "name": "Isma\u00ebl Mej\u00eda"}}, "url": "https://github.com/apache/beam/commit/c37efb737d3607ec395831cbf0553368cb3ac92b", "committedDate": "2020-06-20T20:51:10Z", "message": "[BEAM-9747] Deprecate RedisIO.readAll() and add RedisIO.readKeyPatterns as a replacement"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cf1d32d356149c9e3882103bd1a99cfb2537f558", "author": {"user": {"login": "iemejia", "name": "Isma\u00ebl Mej\u00eda"}}, "url": "https://github.com/apache/beam/commit/cf1d32d356149c9e3882103bd1a99cfb2537f558", "committedDate": "2020-06-20T20:45:56Z", "message": "[BEAM-9747] Deprecate RedisIO.readAll() and add RedisIO.readKeyPatterns as a replacement"}, "afterCommit": {"oid": "c37efb737d3607ec395831cbf0553368cb3ac92b", "author": {"user": {"login": "iemejia", "name": "Isma\u00ebl Mej\u00eda"}}, "url": "https://github.com/apache/beam/commit/c37efb737d3607ec395831cbf0553368cb3ac92b", "committedDate": "2020-06-20T20:51:10Z", "message": "[BEAM-9747] Deprecate RedisIO.readAll() and add RedisIO.readKeyPatterns as a replacement"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM1MDI3MDU3", "url": "https://github.com/apache/beam/pull/11405#pullrequestreview-435027057", "createdAt": "2020-06-22T15:17:30Z", "commit": {"oid": "c37efb737d3607ec395831cbf0553368cb3ac92b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4190, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}