{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM2NzMyMjYw", "number": 12035, "title": "[BEAM-10220] Add support for REQUIRE_MISSING in RowJsonDeserializer, Make ACCEPT_MISSING_OR_NULL the default behavior.", "bodyText": "Adds a third option, REQUIRE_MISSING, where we throw an error if there's a null value. Only a missing field can encode an error.\nThis also tweaks RowJsonTest so we can re-use ValueTest to exercise the new options.\nPost-Commit Tests Status (on master branch)\n\n\n\nLang\nSDK\nApex\nDataflow\nFlink\nSamza\nSpark\n\n\n\n\nGo\n\n---\n---\n\n---\n\n\n\nJava\n\n\n\n\n\n\n\n\nPython\n\n---\n\n\n---\n\n\n\nXLang\n---\n---\n---\n\n---\n---\n\n\n\nPre-Commit Tests Status (on master branch)\n\n\n\n---\nJava\nPython\nGo\nWebsite\n\n\n\n\nNon-portable\n\n\n\n\n\n\nPortable\n---\n\n---\n---\n\n\n\nSee .test-infra/jenkins/README for trigger phrase, status and link of all Jenkins jobs.", "createdAt": "2020-06-18T19:56:52Z", "url": "https://github.com/apache/beam/pull/12035", "merged": true, "mergeCommit": {"oid": "5098152afc59d331c2312a0337dda8f1842f51a4"}, "closed": true, "closedAt": "2020-06-30T22:46:44Z", "author": {"login": "TheNeuralBit"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABct19dDAFqTQzNTIwNzQwNg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcwG1ZWAH2gAyNDM2NzMyMjYwOmRiYmJmOTM5YWM1MmM3YTEzNjA1MjI4N2M4MjhjODQ5MjhmOGQzMzI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM1MjA3NDA2", "url": "https://github.com/apache/beam/pull/12035#pullrequestreview-435207406", "createdAt": "2020-06-22T19:20:52Z", "commit": {"oid": "916b0dc8f000bbd8f76c8f25feb3a74fe2ea1c0e"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQxOToyMDo1MlrOGnN2TQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQxOToyMDo1MlrOGnN2TQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzc3NDU0MQ==", "bodyText": "Maybe could rephrase the first phrase like Requires fields with null values to be represented with a missing key. ? - (or something else? I found it a little confusing the first time I read it)\n\nRequires fields with null values to be represented with a missing key.\nRequires fields with null values to be missing from JSON representation.", "url": "https://github.com/apache/beam/pull/12035#discussion_r443774541", "createdAt": "2020-06-22T19:20:52Z", "author": {"login": "pabloem"}, "path": "sdks/java/core/src/main/java/org/apache/beam/sdk/util/RowJson.java", "diffHunk": "@@ -159,9 +159,16 @@ public String toString() {\n \n     private static final boolean SEQUENTIAL = false;\n \n-    public enum MissingFieldBehavior {\n-      ALLOW_MISSING,\n-      REQUIRE_NULL\n+    // Configure how we should attempt to parse null values when deserializing JSON\n+    public enum NullBehavior {\n+      // Interpret either a missing field or a null value is a null\n+      ALLOW_MISSING_OR_NULL,\n+      // Require nulls to be represented as a null value. If the key is missing for a nullable field\n+      // an error will be thrown.\n+      REQUIRE_NULL,\n+      // Require nulls to be represented as a missing field. If the key exists with a null value an", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "916b0dc8f000bbd8f76c8f25feb3a74fe2ea1c0e"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fcee78a31a15ad3710437eec92a714880ff1044c", "author": {"user": {"login": "TheNeuralBit", "name": "Brian Hulette"}}, "url": "https://github.com/apache/beam/commit/fcee78a31a15ad3710437eec92a714880ff1044c", "committedDate": "2020-06-27T00:36:30Z", "message": "Add support for REQUIRE_MISSING in RowJsonDeserializer"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "754b730a618d4076bb4b3288830b71cd1736da55", "author": {"user": {"login": "TheNeuralBit", "name": "Brian Hulette"}}, "url": "https://github.com/apache/beam/commit/754b730a618d4076bb4b3288830b71cd1736da55", "committedDate": "2020-06-27T00:36:30Z", "message": "spotless"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ec17fc44669df378783114bfb4c8c0be43538614", "author": {"user": {"login": "TheNeuralBit", "name": "Brian Hulette"}}, "url": "https://github.com/apache/beam/commit/ec17fc44669df378783114bfb4c8c0be43538614", "committedDate": "2020-06-27T00:36:30Z", "message": "update javadoc, change default to the permissive mode"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "609e0c1c7f0c1b3628f89fce000350a649ddce01", "author": {"user": {"login": "TheNeuralBit", "name": "Brian Hulette"}}, "url": "https://github.com/apache/beam/commit/609e0c1c7f0c1b3628f89fce000350a649ddce01", "committedDate": "2020-06-27T00:36:30Z", "message": "Update CHANGES.md"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5ed39140cadbdf3a6ff20e1d0c32809cb0688b29", "author": {"user": {"login": "TheNeuralBit", "name": "Brian Hulette"}}, "url": "https://github.com/apache/beam/commit/5ed39140cadbdf3a6ff20e1d0c32809cb0688b29", "committedDate": "2020-06-27T00:55:22Z", "message": "test fixes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6b1347bab6cac4212791d558ab006bf6c3ff2d32", "author": {"user": {"login": "TheNeuralBit", "name": "Brian Hulette"}}, "url": "https://github.com/apache/beam/commit/6b1347bab6cac4212791d558ab006bf6c3ff2d32", "committedDate": "2020-06-26T20:42:18Z", "message": "Update CHANGES.md"}, "afterCommit": {"oid": "5ed39140cadbdf3a6ff20e1d0c32809cb0688b29", "author": {"user": {"login": "TheNeuralBit", "name": "Brian Hulette"}}, "url": "https://github.com/apache/beam/commit/5ed39140cadbdf3a6ff20e1d0c32809cb0688b29", "committedDate": "2020-06-27T00:55:22Z", "message": "test fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e88d79fcfef047bc11636370fbf934b4d4b6124b", "author": {"user": {"login": "TheNeuralBit", "name": "Brian Hulette"}}, "url": "https://github.com/apache/beam/commit/e88d79fcfef047bc11636370fbf934b4d4b6124b", "committedDate": "2020-06-29T17:13:01Z", "message": "fix PubsubMessageToRowTest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dbbbf939ac52c7a136052287c828c84928f8d332", "author": {"user": {"login": "TheNeuralBit", "name": "Brian Hulette"}}, "url": "https://github.com/apache/beam/commit/dbbbf939ac52c7a136052287c828c84928f8d332", "committedDate": "2020-06-29T20:12:12Z", "message": "checkstyle"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3596, "cost": 1, "resetAt": "2021-10-28T16:48:13Z"}}}