{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkxMTM1NTY5", "number": 12906, "title": "[BEAM-7372] Drop Python 2 shims and update docstring in apache_beam.typehints.schemas", "bodyText": "R: @ibzib\nPost-Commit Tests Status (on master branch)\n\n\n\nLang\nSDK\nDataflow\nFlink\nSamza\nSpark\nTwister2\n\n\n\n\nGo\n\n---\n\n---\n\n---\n\n\nJava\n\n\n\n\n\n\n\n\nPython\n](https://ci-beam.apache.org/job/beam_PostCommit_Python36/lastCompletedBuild/)\n\n\n---\n\n---\n\n\nXLang\n\n---\n\n---\n\n---\n\n\n\nPre-Commit Tests Status (on master branch)\n\n\n\n---\nJava\nPython\nGo\nWebsite\nWhitespace\nTypescript\n\n\n\n\nNon-portable\n\n \n\n\n\n\n\n\nPortable\n---\n\n---\n---\n---\n---\n\n\n\nSee .test-infra/jenkins/README for trigger phrase, status and link of all Jenkins jobs.\nGitHub Actions Tests Status (on master branch)\n\n\n\nSee CI.md for more information about GitHub Actions CI.", "createdAt": "2020-09-22T19:02:28Z", "url": "https://github.com/apache/beam/pull/12906", "merged": true, "mergeCommit": {"oid": "65047c6adc4e681207d4e35fb4ceac95cd4b195e"}, "closed": true, "closedAt": "2020-09-23T02:55:28Z", "author": {"login": "TheNeuralBit"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdLcxhTAH2gAyNDkxMTM1NTY5OjA0YjllNTJiNWE4MDRjODU4NjE5MjNkMDMwOWNjOGVlZDMzYTgwNTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdLiqs8gH2gAyNDkxMTM1NTY5OmFiY2QxYzEzYjI4YTlkMzY3YTYwY2ZlODQ5OWM0NDYzNTc4NjJlYzU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "04b9e52b5a804c85861923d0309cc8eed33a8054", "author": {"user": {"login": "TheNeuralBit", "name": "Brian Hulette"}}, "url": "https://github.com/apache/beam/commit/04b9e52b5a804c85861923d0309cc8eed33a8054", "committedDate": "2020-09-22T19:01:50Z", "message": "Fix apache_beam.typehints.schemas docstring"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzOTI2MDAy", "url": "https://github.com/apache/beam/pull/12906#pullrequestreview-493926002", "createdAt": "2020-09-23T00:07:40Z", "commit": {"oid": "04b9e52b5a804c85861923d0309cc8eed33a8054"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QwMDowNzo0MFrOHWQeNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QwMDowNzo0NFrOHWQeSQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzEwMDU5OQ==", "bodyText": "What does ---/  mean? That these types have no equivalent in schemas?", "url": "https://github.com/apache/beam/pull/12906#discussion_r493100599", "createdAt": "2020-09-23T00:07:40Z", "author": {"login": "ibzib"}, "path": "sdks/python/apache_beam/typehints/schemas.py", "diffHunk": "@@ -17,36 +17,42 @@\n \n \"\"\" Support for mapping python types to proto Schemas and back again.\n \n-Python              Schema\n-np.int8     <-----> BYTE\n-np.int16    <-----> INT16\n-np.int32    <-----> INT32\n-np.int64    <-----> INT64\n-int         ---/\n-np.float32  <-----> FLOAT\n-np.float64  <-----> DOUBLE\n-float       ---/\n-bool        <-----> BOOLEAN\n-Timestamp   <-----> LogicalType(urn=\"beam:logical_type:micros_instant:v1\")\n-Mapping     <-----> MapType\n-Sequence    <-----> ArrayType\n-NamedTuple  <-----> RowType\n-beam.Row    ---/\n-\n-nullable=True on a Beam FieldType is represented in Python by wrapping the\n-typing in Optional.\n-\n-The mappings for STRING and BYTES are different between python 2 and python 3,\n-because of the changes to str:\n-py3:\n-str/unicode <-----> STRING\n-bytes       <-----> BYTES\n-ByteString  ---/\n-\n-py2:\n-str will be rejected since it is ambiguous.\n-unicode     <-----> STRING\n-ByteString  <-----> BYTES\n+Imposes a mapping between common Python types and Beam portable schemas\n+(https://s.apache.org/beam-schemas)::\n+\n+  Python              Schema\n+  np.int8     <-----> BYTE\n+  np.int16    <-----> INT16\n+  np.int32    <-----> INT32\n+  np.int64    <-----> INT64\n+  int         ---/", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04b9e52b5a804c85861923d0309cc8eed33a8054"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzEwMDYxNw==", "bodyText": "Should we get rid of this since we're dropping Python 2 support?", "url": "https://github.com/apache/beam/pull/12906#discussion_r493100617", "createdAt": "2020-09-23T00:07:44Z", "author": {"login": "ibzib"}, "path": "sdks/python/apache_beam/typehints/schemas.py", "diffHunk": "@@ -17,36 +17,42 @@\n \n \"\"\" Support for mapping python types to proto Schemas and back again.\n \n-Python              Schema\n-np.int8     <-----> BYTE\n-np.int16    <-----> INT16\n-np.int32    <-----> INT32\n-np.int64    <-----> INT64\n-int         ---/\n-np.float32  <-----> FLOAT\n-np.float64  <-----> DOUBLE\n-float       ---/\n-bool        <-----> BOOLEAN\n-Timestamp   <-----> LogicalType(urn=\"beam:logical_type:micros_instant:v1\")\n-Mapping     <-----> MapType\n-Sequence    <-----> ArrayType\n-NamedTuple  <-----> RowType\n-beam.Row    ---/\n-\n-nullable=True on a Beam FieldType is represented in Python by wrapping the\n-typing in Optional.\n-\n-The mappings for STRING and BYTES are different between python 2 and python 3,\n-because of the changes to str:\n-py3:\n-str/unicode <-----> STRING\n-bytes       <-----> BYTES\n-ByteString  ---/\n-\n-py2:\n-str will be rejected since it is ambiguous.\n-unicode     <-----> STRING\n-ByteString  <-----> BYTES\n+Imposes a mapping between common Python types and Beam portable schemas\n+(https://s.apache.org/beam-schemas)::\n+\n+  Python              Schema\n+  np.int8     <-----> BYTE\n+  np.int16    <-----> INT16\n+  np.int32    <-----> INT32\n+  np.int64    <-----> INT64\n+  int         ---/\n+  np.float32  <-----> FLOAT\n+  np.float64  <-----> DOUBLE\n+  float       ---/\n+  bool        <-----> BOOLEAN\n+  Timestamp   <-----> LogicalType(urn=\"beam:logical_type:micros_instant:v1\")\n+  Mapping     <-----> MapType\n+  Sequence    <-----> ArrayType\n+  NamedTuple  <-----> RowType\n+  beam.Row    ---/\n+\n+:code:`nullable=True` on a Beam :code:`FieldType` is represented in Python by\n+wrapping the type in :code:`Optional`.\n+\n+The mappings for :code:`STRING` and :code:`BYTES` are different between python\n+2 and python 3, because of the changes to str.\n+\n+Python 3.x::\n+\n+  str/unicode <-----> STRING\n+  bytes       <-----> BYTES\n+  ByteString  ---/\n+\n+Python 2.x::", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04b9e52b5a804c85861923d0309cc8eed33a8054"}, "originalPosition": 65}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d3a929b718d801a2af8556babf79c5c92e6db720", "author": {"user": {"login": "TheNeuralBit", "name": "Brian Hulette"}}, "url": "https://github.com/apache/beam/commit/d3a929b718d801a2af8556babf79c5c92e6db720", "committedDate": "2020-09-23T00:45:27Z", "message": "Remove Python 2 shims"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dcf180968cf5a2ab40493d6e928d8b084e34bf3b", "author": {"user": {"login": "TheNeuralBit", "name": "Brian Hulette"}}, "url": "https://github.com/apache/beam/commit/dcf180968cf5a2ab40493d6e928d8b084e34bf3b", "committedDate": "2020-09-23T01:04:02Z", "message": "Make ascii are clearer"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzOTQzMjky", "url": "https://github.com/apache/beam/pull/12906#pullrequestreview-493943292", "createdAt": "2020-09-23T01:07:18Z", "commit": {"oid": "dcf180968cf5a2ab40493d6e928d8b084e34bf3b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QwMTowNzoxOFrOHWRckw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QwMTowNzoxOFrOHWRckw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzExNjU2Mw==", "bodyText": "Thanks for the note, this definitely helps.", "url": "https://github.com/apache/beam/pull/12906#discussion_r493116563", "createdAt": "2020-09-23T01:07:18Z", "author": {"login": "ibzib"}, "path": "sdks/python/apache_beam/typehints/schemas.py", "diffHunk": "@@ -17,36 +17,36 @@\n \n \"\"\" Support for mapping python types to proto Schemas and back again.\n \n-Python              Schema\n-np.int8     <-----> BYTE\n-np.int16    <-----> INT16\n-np.int32    <-----> INT32\n-np.int64    <-----> INT64\n-int         ---/\n-np.float32  <-----> FLOAT\n-np.float64  <-----> DOUBLE\n-float       ---/\n-bool        <-----> BOOLEAN\n-Timestamp   <-----> LogicalType(urn=\"beam:logical_type:micros_instant:v1\")\n-Mapping     <-----> MapType\n-Sequence    <-----> ArrayType\n-NamedTuple  <-----> RowType\n-beam.Row    ---/\n-\n-nullable=True on a Beam FieldType is represented in Python by wrapping the\n-typing in Optional.\n-\n-The mappings for STRING and BYTES are different between python 2 and python 3,\n-because of the changes to str:\n-py3:\n-str/unicode <-----> STRING\n-bytes       <-----> BYTES\n-ByteString  ---/\n-\n-py2:\n-str will be rejected since it is ambiguous.\n-unicode     <-----> STRING\n-ByteString  <-----> BYTES\n+Imposes a mapping between common Python types and Beam portable schemas\n+(https://s.apache.org/beam-schemas)::\n+\n+  Python              Schema\n+  np.int8     <-----> BYTE\n+  np.int16    <-----> INT16\n+  np.int32    <-----> INT32\n+  np.int64    <-----> INT64\n+  int         ------> INT64\n+  np.float32  <-----> FLOAT\n+  np.float64  <-----> DOUBLE\n+  float       ------> DOUBLE\n+  bool        <-----> BOOLEAN\n+  str/unicode <-----> STRING\n+  bytes       <-----> BYTES\n+  ByteString  ------> BYTES\n+  Timestamp   <-----> LogicalType(urn=\"beam:logical_type:micros_instant:v1\")\n+  Mapping     <-----> MapType\n+  Sequence    <-----> ArrayType\n+  NamedTuple  <-----> RowType\n+  beam.Row    ------> RowType\n+\n+Note that some of these mappings are provided as conveniences,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dcf180968cf5a2ab40493d6e928d8b084e34bf3b"}, "originalPosition": 56}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzOTQ0MTgz", "url": "https://github.com/apache/beam/pull/12906#pullrequestreview-493944183", "createdAt": "2020-09-23T01:08:22Z", "commit": {"oid": "dcf180968cf5a2ab40493d6e928d8b084e34bf3b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "abcd1c13b28a9d367a60cfe8499c446357862ec5", "author": {"user": {"login": "TheNeuralBit", "name": "Brian Hulette"}}, "url": "https://github.com/apache/beam/commit/abcd1c13b28a9d367a60cfe8499c446357862ec5", "committedDate": "2020-09-23T01:53:49Z", "message": "Remove unuused import sys"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2474, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}