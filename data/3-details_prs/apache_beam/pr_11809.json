{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIyNzU0NDQ2", "number": 11809, "title": "[BEAM-10073] Add pubsub performance tests results to the grafana dashboards", "bodyText": "Add influx params to pubsub python performance tests.\nAdd grafana dashboard for pubsub tests.\nR: @kamilwu\n\nThank you for your contribution! Follow this checklist to help us incorporate your contribution quickly and easily:\n\n Choose reviewer(s) and mention them in a comment (R: @username).\n Format the pull request title like [BEAM-XXX] Fixes bug in ApproximateQuantiles, where you replace BEAM-XXX with the appropriate JIRA issue, if applicable. This will automatically link the pull request to the issue.\n Update CHANGES.md with noteworthy changes.\n If this contribution is large, please file an Apache Individual Contributor License Agreement.\n\nSee the Contributor Guide for more tips on how to make review process smoother.\nPost-Commit Tests Status (on master branch)\n\n\n\nLang\nSDK\nApex\nDataflow\nFlink\nGearpump\nSamza\nSpark\n\n\n\n\nGo\n\n---\n---\n\n---\n---\n\n\n\nJava\n\n\n\n\n\n\n\n\n\nPython\n\n---\n\n\n---\n---\n\n\n\nXLang\n---\n---\n---\n\n---\n---\n\n\n\n\nPre-Commit Tests Status (on master branch)\n\n\n\n---\nJava\nPython\nGo\nWebsite\n\n\n\n\nNon-portable\n\n\n\n\n\n\nPortable\n---\n\n---\n---\n\n\n\nSee .test-infra/jenkins/README for trigger phrase, status and link of all Jenkins jobs.", "createdAt": "2020-05-25T13:33:11Z", "url": "https://github.com/apache/beam/pull/11809", "merged": true, "mergeCommit": {"oid": "79dcab9cab04b70d9e16f8c924fc52237f13622f"}, "closed": true, "closedAt": "2020-05-26T11:26:54Z", "author": {"login": "piotr-szuberski"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABckwlyCAH2gAyNDIyNzU0NDQ2OjM4NDc2MWFlMzQ5YzBkNDQzYTQyYzg5YTM3ZmNhYjAyM2RlMzgyOGM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABclC1_qAH2gAyNDIyNzU0NDQ2OjUzZTZjZmFiODY2YTRhZTMwNjYyYjkxNjM4MDJjODhhOTc4NjNjZDA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "384761ae349c0d443a42c89a37fcab023de3828c", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/384761ae349c0d443a42c89a37fcab023de3828c", "committedDate": "2020-05-25T14:04:04Z", "message": "[BEAM-10073] Fix typo in pubsub io performance test job metrics table"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6e77377d176d1ecad692a713b09081149eb9753d", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/6e77377d176d1ecad692a713b09081149eb9753d", "committedDate": "2020-05-25T14:04:42Z", "message": "[BEAM-10073] Add InfluxDB params to pubsub performance tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1cf4e668ac686a6714a0f31f4a7d056c8d37ce11", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/1cf4e668ac686a6714a0f31f4a7d056c8d37ce11", "committedDate": "2020-05-25T13:29:08Z", "message": "[BEAM-10073] Add PubsubIO dashboard to load tests in grafana"}, "afterCommit": {"oid": "6e49397cdfc97be5e86d7b985cc9ff272037df0f", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/6e49397cdfc97be5e86d7b985cc9ff272037df0f", "committedDate": "2020-05-25T14:07:14Z", "message": "[BEAM-10073] Add PubsubIO dashboard to load tests in grafana"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3ODA3ODg0", "url": "https://github.com/apache/beam/pull/11809#pullrequestreview-417807884", "createdAt": "2020-05-25T16:42:16Z", "commit": {"oid": "dfbb5588cae1db1f4d3890d6bb5488da6276d6a2"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQxNjo0NDozOFrOGaGDng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQxNjo0NTo1M1rOGaGFSw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDAxNTM5MA==", "bodyText": "Is there any particular reason why \"15\"?", "url": "https://github.com/apache/beam/pull/11809#discussion_r430015390", "createdAt": "2020-05-25T16:44:38Z", "author": {"login": "kamilwu"}, "path": ".test-infra/metrics/grafana/dashboards/perftests_metrics/Python_IO_IT_Tests_Dataflow.json", "diffHunk": "@@ -35,7 +35,7 @@\n       },\n       \"hiddenSeries\": false,\n       \"id\": 2,\n-      \"interval\": \"\",\n+      \"interval\": \"15h\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dfbb5588cae1db1f4d3890d6bb5488da6276d6a2"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDAxNTgxOQ==", "bodyText": "We should also specify that the test is a streaming job and uses a native Dataflow IO. These are very important information for everyone seeing that chart.", "url": "https://github.com/apache/beam/pull/11809#discussion_r430015819", "createdAt": "2020-05-25T16:45:53Z", "author": {"login": "kamilwu"}, "path": ".test-infra/metrics/grafana/dashboards/perftests_metrics/Python_IO_IT_Tests_Dataflow.json", "diffHunk": "@@ -261,6 +261,250 @@\n         \"align\": false,\n         \"alignLevel\": null\n       }\n+    },\n+    {\n+      \"aliasColors\": {},\n+      \"bars\": false,\n+      \"cacheTimeout\": null,\n+      \"dashLength\": 10,\n+      \"dashes\": false,\n+      \"datasource\": \"BeamInfluxDB\",\n+      \"fill\": 1,\n+      \"fillGradient\": 0,\n+      \"gridPos\": {\n+        \"h\": 9,\n+        \"w\": 12,\n+        \"x\": 0,\n+        \"y\": 9\n+      },\n+      \"hiddenSeries\": false,\n+      \"id\": 4,\n+      \"interval\": \"15h\",\n+      \"legend\": {\n+        \"avg\": false,\n+        \"current\": false,\n+        \"max\": false,\n+        \"min\": false,\n+        \"show\": false,\n+        \"total\": false,\n+        \"values\": false\n+      },\n+      \"lines\": true,\n+      \"linewidth\": 2,\n+      \"links\": [],\n+      \"nullPointMode\": \"connected\",\n+      \"options\": {\n+        \"dataLinks\": []\n+      },\n+      \"percentage\": false,\n+      \"pluginVersion\": \"6.7.2\",\n+      \"pointradius\": 2,\n+      \"points\": true,\n+      \"renderer\": \"flot\",\n+      \"seriesOverrides\": [],\n+      \"spaceLength\": 10,\n+      \"stack\": false,\n+      \"steppedLine\": false,\n+      \"targets\": [\n+        {\n+          \"alias\": \"read_time\",\n+          \"groupBy\": [\n+            {\n+              \"params\": [\n+                \"$__interval\"\n+              ],\n+              \"type\": \"time\"\n+            }\n+          ],\n+          \"measurement\": \"python_bqio_read\",\n+          \"orderByTime\": \"ASC\",\n+          \"policy\": \"default\",\n+          \"query\": \"SELECT mean(\\\"value\\\") FROM \\\"python_psio_2GB_results\\\" WHERE \\\"metric\\\" = \\\"pubsub_io_perf_read_runtime\\\" AND $timeFilter GROUP BY time($__interval), \\\"metric\\\"\",\n+          \"rawQuery\": true,\n+          \"refId\": \"A\",\n+          \"resultFormat\": \"time_series\",\n+          \"select\": [\n+            [\n+              {\n+                \"params\": [\n+                  \"value\"\n+                ],\n+                \"type\": \"field\"\n+              },\n+              {\n+                \"params\": [],\n+                \"type\": \"mean\"\n+              }\n+            ]\n+          ],\n+          \"tags\": []\n+        }\n+      ],\n+      \"thresholds\": [],\n+      \"timeFrom\": null,\n+      \"timeRegions\": [],\n+      \"timeShift\": null,\n+      \"title\": \"Reading 2GB of data | Pubsub IO\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dfbb5588cae1db1f4d3890d6bb5488da6276d6a2"}, "originalPosition": 123}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dfbb5588cae1db1f4d3890d6bb5488da6276d6a2", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/dfbb5588cae1db1f4d3890d6bb5488da6276d6a2", "committedDate": "2020-05-25T14:27:57Z", "message": "[BEAM-10073] Add interval to python dataflow grafana dashboards"}, "afterCommit": {"oid": "144de27e2b147b8351556869de5c8e698f4f0f7b", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/144de27e2b147b8351556869de5c8e698f4f0f7b", "committedDate": "2020-05-25T17:22:25Z", "message": "[BEAM-10073] Add PubsubIO performance tests to grafana dashboard"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "09a3a82d8eec86acb3c8d31a990bb0cb12a64422", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/09a3a82d8eec86acb3c8d31a990bb0cb12a64422", "committedDate": "2020-05-26T09:48:54Z", "message": "[BEAM-10073] Add PubsubIO performance tests to grafana dashboard"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "144de27e2b147b8351556869de5c8e698f4f0f7b", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/144de27e2b147b8351556869de5c8e698f4f0f7b", "committedDate": "2020-05-25T17:22:25Z", "message": "[BEAM-10073] Add PubsubIO performance tests to grafana dashboard"}, "afterCommit": {"oid": "09a3a82d8eec86acb3c8d31a990bb0cb12a64422", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/09a3a82d8eec86acb3c8d31a990bb0cb12a64422", "committedDate": "2020-05-26T09:48:54Z", "message": "[BEAM-10073] Add PubsubIO performance tests to grafana dashboard"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "53e6cfab866a4ae30662b9163802c88a97863cd0", "author": {"user": {"login": "kamilwu", "name": "Kamil Wasilewski"}}, "url": "https://github.com/apache/beam/commit/53e6cfab866a4ae30662b9163802c88a97863cd0", "committedDate": "2020-05-26T11:20:04Z", "message": "Update Grafana's image tag"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4324, "cost": 1, "resetAt": "2021-10-28T16:48:13Z"}}}