{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDExMDQ3ODY3", "number": 11575, "title": "[BEAM-9699] Add test verifying we can use ZetaSQL in Python SqlTransform", "bodyText": "Adds a simple tests that sends the planner_name option through to the SQL expansion service, and verifies it worked with a ZetaSQL-specific query.\nIncludes changes from #11574\nPost-Commit Tests Status (on master branch)\n\n\n\nLang\nSDK\nApex\nDataflow\nFlink\nGearpump\nSamza\nSpark\n\n\n\n\nGo\n\n---\n---\n\n---\n---\n\n\n\nJava\n\n\n\n\n\n\n\n\n\nPython\n\n---\n\n\n---\n---\n\n\n\nXLang\n---\n---\n---\n\n---\n---\n\n\n\n\nPre-Commit Tests Status (on master branch)\n\n\n\n---\nJava\nPython\nGo\nWebsite\n\n\n\n\nNon-portable\n\n\n\n\n\n\nPortable\n---\n\n---\n---\n\n\n\nSee .test-infra/jenkins/README for trigger phrase, status and link of all Jenkins jobs.", "createdAt": "2020-04-30T00:54:15Z", "url": "https://github.com/apache/beam/pull/11575", "merged": true, "mergeCommit": {"oid": "9818fa823a4ef35840a281503b3402723b5c82fe"}, "closed": true, "closedAt": "2020-05-20T21:59:42Z", "author": {"login": "TheNeuralBit"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABceGOpFABqjMzMDE3NTQzMTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcjNXi_gH2gAyNDExMDQ3ODY3OjdmMmVjOTg1N2FiODk1ZDU0YzE2M2M1MjRiZmVmMWY1ZGNhYzc5Yzg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1791dd727966d273d35c446b70085d85a792ef8e", "author": {"user": {"login": "TheNeuralBit", "name": "Brian Hulette"}}, "url": "https://github.com/apache/beam/commit/1791dd727966d273d35c446b70085d85a792ef8e", "committedDate": "2020-04-30T15:40:51Z", "message": "Add zetasql to SQL expansion service"}, "afterCommit": {"oid": "7aca5df2034f2611138977a8f3391427b779339f", "author": {"user": {"login": "TheNeuralBit", "name": "Brian Hulette"}}, "url": "https://github.com/apache/beam/commit/7aca5df2034f2611138977a8f3391427b779339f", "committedDate": "2020-05-04T21:17:01Z", "message": "Add zetasql to SQL expansion service"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fd0ef426fd3bb3bf8f2581d364fb085d82878fa7", "author": {"user": {"login": "TheNeuralBit", "name": "Brian Hulette"}}, "url": "https://github.com/apache/beam/commit/fd0ef426fd3bb3bf8f2581d364fb085d82878fa7", "committedDate": "2020-05-14T00:10:23Z", "message": "Add zetasql to SQL expansion service"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9e016264e665ba5576a7940ade70938c8c1c73ac", "author": {"user": {"login": "TheNeuralBit", "name": "Brian Hulette"}}, "url": "https://github.com/apache/beam/commit/9e016264e665ba5576a7940ade70938c8c1c73ac", "committedDate": "2020-05-14T00:24:21Z", "message": "Add support for ZetaSQL in Python SqlTransform\n\nplumbs through queryPlannerClassName param"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6af6a65f3629d4202443200d19ee0a836333a355", "author": {"user": {"login": "TheNeuralBit", "name": "Brian Hulette"}}, "url": "https://github.com/apache/beam/commit/6af6a65f3629d4202443200d19ee0a836333a355", "committedDate": "2020-05-04T22:27:17Z", "message": "yapf"}, "afterCommit": {"oid": "9e016264e665ba5576a7940ade70938c8c1c73ac", "author": {"user": {"login": "TheNeuralBit", "name": "Brian Hulette"}}, "url": "https://github.com/apache/beam/commit/9e016264e665ba5576a7940ade70938c8c1c73ac", "committedDate": "2020-05-14T00:24:21Z", "message": "Add support for ZetaSQL in Python SqlTransform\n\nplumbs through queryPlannerClassName param"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0NjgxOTIx", "url": "https://github.com/apache/beam/pull/11575#pullrequestreview-414681921", "createdAt": "2020-05-19T17:45:19Z", "commit": {"oid": "9e016264e665ba5576a7940ade70938c8c1c73ac"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxNzo0NToxOVrOGXrqdw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxNzo0NToxOVrOGXrqdw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQ4NTgxNQ==", "bodyText": "I wonder if it would make more sense for this mapping to live on the Java side, and to have this parameter by called \"dialect\" or similar.", "url": "https://github.com/apache/beam/pull/11575#discussion_r427485815", "createdAt": "2020-05-19T17:45:19Z", "author": {"login": "robertwb"}, "path": "sdks/python/apache_beam/transforms/sql.py", "diffHunk": "@@ -31,8 +31,15 @@\n \n __all__ = ['SqlTransform']\n \n+_SQL_PLANNERS = {\n+    'zetasql': 'org.apache.beam.sdk.extensions.sql.zetasql.ZetaSQLQueryPlanner',", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9e016264e665ba5576a7940ade70938c8c1c73ac"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71b9af1d6d32f3a130682e912a1a8707a3d73744", "author": {"user": {"login": "TheNeuralBit", "name": "Brian Hulette"}}, "url": "https://github.com/apache/beam/commit/71b9af1d6d32f3a130682e912a1a8707a3d73744", "committedDate": "2020-05-20T17:45:16Z", "message": "Move dialect -> planner class resolution to Java\n\nRequires moving ExternalTransform classes to\nextensions/sql/expansion-service so we can reference ZetaSQL"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f2ec9857ab895d54c163c524bfef1f5dcac79c8", "author": {"user": {"login": "TheNeuralBit", "name": "Brian Hulette"}}, "url": "https://github.com/apache/beam/commit/7f2ec9857ab895d54c163c524bfef1f5dcac79c8", "committedDate": "2020-05-20T18:27:55Z", "message": "add expansion-service package-info (checkstyle)"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4113, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}