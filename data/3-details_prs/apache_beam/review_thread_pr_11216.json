{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzMzYyMTE0", "number": 11216, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNToyMToxOFrODrQ3xA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNToyNTo1MVrODrRA2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2NjkxNzgwOnYy", "diffSide": "RIGHT", "path": "model/pipeline/src/main/proto/beam_runner_api.proto", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNToyMToxOFrOF7gVgw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNToyMToxOFrOF7gVgw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzk0MDA5OQ==", "bodyText": "I would suggest not changing the proto tag numbers otherwise you'll have a more difficult import/update issue with Google.\nIt will be much easier as a separate change to renumber them in increasing order, so timer_family_specs is 5, restriction_coder_id is 6, requests_finalization is 7, ... (making the import into Google much simpler to do).", "url": "https://github.com/apache/beam/pull/11216#discussion_r397940099", "createdAt": "2020-03-25T15:21:18Z", "author": {"login": "lukecwik"}, "path": "model/pipeline/src/main/proto/beam_runner_api.proto", "diffHunk": "@@ -442,35 +442,30 @@ message ParDoPayload {\n   // be placed in the pipeline requirements.\n   map<string, StateSpec> state_specs = 4;\n \n-  // (Optional) A mapping of local timer names to timer specifications.\n-  // If this is set, the stateful processing requirement should also\n-  // be placed in the pipeline requirements.\n-  map<string, TimerSpec> timer_specs = 5;\n-\n-  // (Optional) A mapping of local timer family names to timer specifications.\n-  // If this is set, the stateful processing requirement should also\n-  // be placed in the pipeline requirements.\n-  map<string, TimerFamilySpec> timer_family_specs = 9;\n+  // (Optional) A mapping of local timer family names to timer family\n+  // specifications. If this is set, the stateful processing requirement should\n+  // also be placed in the pipeline requirements.\n+  map<string, TimerFamilySpec> timer_family_specs = 8;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b0a0b85e4f6b6a1e0679bfdf8caea499f9d46157"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2NjkzNDM4OnYy", "diffSide": "RIGHT", "path": "sdks/python/apache_beam/transforms/userstate.py", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNToyNDoyN1rOF7gfxg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxODozMTozOVrOF8U5AA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzk0MjcyNg==", "bodyText": "shouldn't this method replace to_runner_api?", "url": "https://github.com/apache/beam/pull/11216#discussion_r397942726", "createdAt": "2020-03-25T15:24:27Z", "author": {"login": "lukecwik"}, "path": "sdks/python/apache_beam/transforms/userstate.py", "diffHunk": "@@ -141,6 +143,13 @@ def __init__(self, name, time_domain):\n   def __repr__(self):\n     return '%s(%s)' % (self.__class__.__name__, self.name)\n \n+  def to_timer_family_runner_api(self, context):", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b0a0b85e4f6b6a1e0679bfdf8caea499f9d46157"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODAxMTk2NQ==", "bodyText": "I'm working on the Java changes meanwhile having some python tests to run to catch any breakages. Changing to to_runner_api is the next step. We should also remove TimerSpec definition from proto as long as nowhere else uses it.", "url": "https://github.com/apache/beam/pull/11216#discussion_r398011965", "createdAt": "2020-03-25T16:52:54Z", "author": {"login": "boyuanzz"}, "path": "sdks/python/apache_beam/transforms/userstate.py", "diffHunk": "@@ -141,6 +143,13 @@ def __init__(self, name, time_domain):\n   def __repr__(self):\n     return '%s(%s)' % (self.__class__.__name__, self.name)\n \n+  def to_timer_family_runner_api(self, context):", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzk0MjcyNg=="}, "originalCommit": {"oid": "b0a0b85e4f6b6a1e0679bfdf8caea499f9d46157"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODY5MTY5Ng==", "bodyText": "+1 on TimerSpec removal", "url": "https://github.com/apache/beam/pull/11216#discussion_r398691696", "createdAt": "2020-03-26T16:02:58Z", "author": {"login": "lukecwik"}, "path": "sdks/python/apache_beam/transforms/userstate.py", "diffHunk": "@@ -141,6 +143,13 @@ def __init__(self, name, time_domain):\n   def __repr__(self):\n     return '%s(%s)' % (self.__class__.__name__, self.name)\n \n+  def to_timer_family_runner_api(self, context):", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzk0MjcyNg=="}, "originalCommit": {"oid": "b0a0b85e4f6b6a1e0679bfdf8caea499f9d46157"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODgwMTE1Mg==", "bodyText": "You can rename this method to to_runner_api and remove the method below.", "url": "https://github.com/apache/beam/pull/11216#discussion_r398801152", "createdAt": "2020-03-26T18:31:39Z", "author": {"login": "lukecwik"}, "path": "sdks/python/apache_beam/transforms/userstate.py", "diffHunk": "@@ -141,6 +143,13 @@ def __init__(self, name, time_domain):\n   def __repr__(self):\n     return '%s(%s)' % (self.__class__.__name__, self.name)\n \n+  def to_timer_family_runner_api(self, context):", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzk0MjcyNg=="}, "originalCommit": {"oid": "b0a0b85e4f6b6a1e0679bfdf8caea499f9d46157"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2Njk0MTA1OnYy", "diffSide": "RIGHT", "path": "sdks/python/apache_beam/transforms/userstate.py", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNToyNTo1MVrOF7gkFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNToyNTo1MVrOF7gkFQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzk0MzgyOQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # TODO(BEAM-9602): Provide support of dynamic timer\n          \n          \n            \n            # TODO(BEAM-9602): Provide support for dynamic timer", "url": "https://github.com/apache/beam/pull/11216#discussion_r397943829", "createdAt": "2020-03-25T15:25:51Z", "author": {"login": "lukecwik"}, "path": "sdks/python/apache_beam/transforms/userstate.py", "diffHunk": "@@ -149,6 +158,26 @@ def to_runner_api(self, context):\n             coders._TimerCoder(coders.SingletonCoder(None))))\n \n \n+# TODO(BEAM-9602): Provide support of dynamic timer", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b0a0b85e4f6b6a1e0679bfdf8caea499f9d46157"}, "originalPosition": 30}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1519, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}