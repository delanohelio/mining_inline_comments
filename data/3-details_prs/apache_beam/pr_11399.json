{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAyMzcxMzQ5", "number": 11399, "title": "Interpolate publish credentials as expected for Maven settings.xml", "bodyText": "Allow for expansion of environment variables as supported by Maven. Example:\n<server>\n   <username>${env.CREDENTIALS_MAVEN_USERNAME}</username>\n   <password>${env.CREDENTIALS_MAVEN_PASSWORD}</password>\n   <id>private-repository</id>\n</server>\n\nPost-Commit Tests Status (on master branch)\n\n\n\nLang\nSDK\nApex\nDataflow\nFlink\nGearpump\nSamza\nSpark\n\n\n\n\nGo\n\n---\n---\n\n---\n---\n\n\n\nJava\n\n\n\n\n\n\n\n\n\nPython\n\n---\n\n\n---\n---\n\n\n\nXLang\n---\n---\n---\n\n---\n---\n\n\n\n\nPre-Commit Tests Status (on master branch)\n\n\n\n---\nJava\nPython\nGo\nWebsite\n\n\n\n\nNon-portable\n\n\n\n\n\n\nPortable\n---\n\n---\n---\n\n\n\nSee .test-infra/jenkins/README for trigger phrase, status and link of all Jenkins jobs.", "createdAt": "2020-04-12T17:23:29Z", "url": "https://github.com/apache/beam/pull/11399", "merged": true, "mergeCommit": {"oid": "1658d9054bcbdf1437295ac434825be53acce4fd"}, "closed": true, "closedAt": "2020-04-15T21:19:05Z", "author": {"login": "tweise"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcXQVa0gFqTM5MjIwNDY2NQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcX5s9NAFqTM5Mzg3OTk5Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyMjA0NjY1", "url": "https://github.com/apache/beam/pull/11399#pullrequestreview-392204665", "createdAt": "2020-04-13T15:07:38Z", "commit": {"oid": "ee0bb68c859d99900f1ea429cf43825506477506"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xM1QxNTowNzozOFrOGEpfHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xM1QxNTowNzozOFrOGEpfHA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzUyNzE5Ng==", "bodyText": "Does this not change the semantics from using the username/password found in the settings to interpreting them as environment variables names and loading them from the environment? If so, shouldn't this be configurable?", "url": "https://github.com/apache/beam/pull/11399#discussion_r407527196", "createdAt": "2020-04-13T15:07:38Z", "author": {"login": "mxm"}, "path": "buildSrc/src/main/groovy/org/apache/beam/gradle/BeamModulePlugin.groovy", "diffHunk": "@@ -600,9 +600,10 @@ class BeamModulePlugin implements Plugin<Project> {\n                   ? 'apache.releases.https' : 'apache.snapshots.https')\n           def m2SettingCreds = new XmlSlurper().parse(settingsXml).servers.server.find { server -> serverId.equals(server.id.text()) }\n           if (m2SettingCreds) {\n+            def GroovyShell shell = new GroovyShell(new Binding([env:System.getenv()]))\n             credentials {\n-              username m2SettingCreds.username.text()\n-              password m2SettingCreds.password.text()\n+              username shell.evaluate('\"' + m2SettingCreds.username.text() +'\"')\n+              password shell.evaluate('\"' + m2SettingCreds.password.text() +'\"')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ee0bb68c859d99900f1ea429cf43825506477506"}, "originalPosition": 9}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bac799e036683aca5f8cc82dfb7239e1bf3ee1b0", "author": {"user": {"login": "tweise", "name": "Thomas Weise"}}, "url": "https://github.com/apache/beam/commit/bac799e036683aca5f8cc82dfb7239e1bf3ee1b0", "committedDate": "2020-04-14T04:15:03Z", "message": "maven settings.xml plugin"}, "afterCommit": {"oid": "cd48609fbcad3a8de1e8ab6a0cc44ed16fcbadc2", "author": {"user": {"login": "tweise", "name": "Thomas Weise"}}, "url": "https://github.com/apache/beam/commit/cd48609fbcad3a8de1e8ab6a0cc44ed16fcbadc2", "committedDate": "2020-04-14T04:45:26Z", "message": "maven settings.xml plugin"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyNjg4MDQx", "url": "https://github.com/apache/beam/pull/11399#pullrequestreview-392688041", "createdAt": "2020-04-14T07:58:20Z", "commit": {"oid": "cd48609fbcad3a8de1e8ab6a0cc44ed16fcbadc2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzMzUxODQ3", "url": "https://github.com/apache/beam/pull/11399#pullrequestreview-393351847", "createdAt": "2020-04-14T22:59:34Z", "commit": {"oid": "cd48609fbcad3a8de1e8ab6a0cc44ed16fcbadc2"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a562f1e3c1660f6d9f2eacc244841bcd55303469", "author": {"user": {"login": "tweise", "name": "Thomas Weise"}}, "url": "https://github.com/apache/beam/commit/a562f1e3c1660f6d9f2eacc244841bcd55303469", "committedDate": "2020-04-14T23:09:24Z", "message": "Fix py37-lint"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7438265f53b85a774b32a7c65a0901dbd0636a50", "author": {"user": {"login": "tweise", "name": "Thomas Weise"}}, "url": "https://github.com/apache/beam/commit/7438265f53b85a774b32a7c65a0901dbd0636a50", "committedDate": "2020-04-14T23:09:49Z", "message": "Maven compatible publish repository authentication via settings.xml\n\nAllow for expansion of environment variables as supported by Maven. Example:\n\n<server>\n   <username>${env.CREDENTIALS_MAVEN_USERNAME}</username>\n   <password>${env.CREDENTIALS_MAVEN_PASSWORD}</password>\n   <id>private-repository</id>\n</server>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cd48609fbcad3a8de1e8ab6a0cc44ed16fcbadc2", "author": {"user": {"login": "tweise", "name": "Thomas Weise"}}, "url": "https://github.com/apache/beam/commit/cd48609fbcad3a8de1e8ab6a0cc44ed16fcbadc2", "committedDate": "2020-04-14T04:45:26Z", "message": "maven settings.xml plugin"}, "afterCommit": {"oid": "7438265f53b85a774b32a7c65a0901dbd0636a50", "author": {"user": {"login": "tweise", "name": "Thomas Weise"}}, "url": "https://github.com/apache/beam/commit/7438265f53b85a774b32a7c65a0901dbd0636a50", "committedDate": "2020-04-14T23:09:49Z", "message": "Maven compatible publish repository authentication via settings.xml\n\nAllow for expansion of environment variables as supported by Maven. Example:\n\n<server>\n   <username>${env.CREDENTIALS_MAVEN_USERNAME}</username>\n   <password>${env.CREDENTIALS_MAVEN_PASSWORD}</password>\n   <id>private-repository</id>\n</server>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzODc5OTkz", "url": "https://github.com/apache/beam/pull/11399#pullrequestreview-393879993", "createdAt": "2020-04-15T15:20:03Z", "commit": {"oid": "7438265f53b85a774b32a7c65a0901dbd0636a50"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4186, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}