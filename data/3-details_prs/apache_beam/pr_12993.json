{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk2NTkzNTAy", "number": 12993, "title": "[BEAM-10991] Cherrypick #12980 to 2.25.0: Revert \"[BEAM-8543] Dataflow streaming timers are not strictly time ordered when set earlier mid-bundle (#11924)\"", "bodyText": "This change is a serious regression in 2.24.0 so should be cherrypicked back to 2.25.0\n\nThank you for your contribution! Follow this checklist to help us incorporate your contribution quickly and easily:\n\n Choose reviewer(s) and mention them in a comment (R: @username).\n Format the pull request title like [BEAM-XXX] Fixes bug in ApproximateQuantiles, where you replace BEAM-XXX with the appropriate JIRA issue, if applicable. This will automatically link the pull request to the issue.\n Update CHANGES.md with noteworthy changes.\n If this contribution is large, please file an Apache Individual Contributor License Agreement.\n\nSee the Contributor Guide for more tips on how to make review process smoother.\nPost-Commit Tests Status (on master branch)\n\n\n\nLang\nSDK\nDataflow\nFlink\nSamza\nSpark\nTwister2\n\n\n\n\nGo\n\n---\n\n---\n\n---\n\n\nJava\n\n\n\n\n\n\n\n\nPython\n\n\n\n---\n\n---\n\n\nXLang\n\n---\n\n---\n\n---\n\n\n\nPre-Commit Tests Status (on master branch)\n\n\n\n---\nJava\nPython\nGo\nWebsite\nWhitespace\nTypescript\n\n\n\n\nNon-portable\n\n \n\n\n\n\n\n\nPortable\n---\n\n---\n---\n---\n---\n\n\n\nSee .test-infra/jenkins/README for trigger phrase, status and link of all Jenkins jobs.\nGitHub Actions Tests Status (on master branch)\n\n\n\nSee CI.md for more information about GitHub Actions CI.", "createdAt": "2020-10-01T23:08:17Z", "url": "https://github.com/apache/beam/pull/12993", "merged": true, "mergeCommit": {"oid": "01040fd6185504c69bddc3e83925debeb1d9c2cd"}, "closed": true, "closedAt": "2020-10-05T22:37:20Z", "author": {"login": "kennknowles"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdOZbuUgH2gAyNDk2NTkzNTAyOjI2OTZkNjI0Y2Y4NWYzZDkyZTYwZGJlY2QyMGRkZmU4MWFjZGExODA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdPnHpcgFqTUwMjI2NDkzNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2696d624cf85f3d92e60dbecd20ddfe81acda180", "author": {"user": {"login": "kennknowles", "name": "Kenn Knowles"}}, "url": "https://github.com/apache/beam/commit/2696d624cf85f3d92e60dbecd20ddfe81acda180", "committedDate": "2020-10-01T22:50:05Z", "message": "Revert \"[BEAM-8543] Dataflow streaming timers are not strictly time ordered when set earlier mid-bundle (#11924)\"\n\nThis reverts commit 88acc5267f759d81e9836a9db17b9e0ee521c785.\n\nThere is a bug in this commit that causes deleted timers to not clear their\nwatermark holds, resulting in stuck pipelines. See\nhttps://issues.apache.org/jira/browse/BEAM-10991"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwNzc1NDI1", "url": "https://github.com/apache/beam/pull/12993#pullrequestreview-500775425", "createdAt": "2020-10-01T23:09:47Z", "commit": {"oid": "2696d624cf85f3d92e60dbecd20ddfe81acda180"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1f24fec70462fcdbcac0f14ef42d812cc81791eb", "author": {"user": {"login": "kennknowles", "name": "Kenn Knowles"}}, "url": "https://github.com/apache/beam/commit/1f24fec70462fcdbcac0f14ef42d812cc81791eb", "committedDate": "2020-10-02T02:26:15Z", "message": "[BEAM-10991] Adjust CHANGES.md to indicate rollback of fix for BEAM-8543"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyMjY0OTM0", "url": "https://github.com/apache/beam/pull/12993#pullrequestreview-502264934", "createdAt": "2020-10-05T17:20:45Z", "commit": {"oid": "1f24fec70462fcdbcac0f14ef42d812cc81791eb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxNzoyMDo0NVrOHcmmDQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxNzoyMDo0NVrOHcmmDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTc1NDUwOQ==", "bodyText": "Are we missing one line here?\nIn #12997 we have\nDataflow streaming timers are not strictly time ordered when set earlier mid-bundle ([BEAM-8543](https://issues.apache.org/jira/browse/BEAM-8543)).", "url": "https://github.com/apache/beam/pull/12993#discussion_r499754509", "createdAt": "2020-10-05T17:20:45Z", "author": {"login": "robinyqiu"}, "path": "CHANGES.md", "diffHunk": "@@ -131,6 +132,9 @@\n   --temp_location, or pass method=\"STREAMING_INSERTS\" to WriteToBigQuery ([BEAM-6928](https://issues.apache.org/jira/browse/BEAM-6928)).\n * Python SDK now understands `typing.FrozenSet` type hints, which are not interchangeable with `typing.Set`. You may need to update your pipelines if type checking fails. ([BEAM-10197](https://issues.apache.org/jira/browse/BEAM-10197))\n \n+## Known issues\n+\n+* When a timer fires but is reset prior to being executed, a watermark hold may be leaked, causing a stuck pipeline [BEAM-10991](https://issues.apache.org/jira/browse/BEAM-10991).\n ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1f24fec70462fcdbcac0f14ef42d812cc81791eb"}, "originalPosition": 15}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2237, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}