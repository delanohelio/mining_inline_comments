{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkyNDYwMjU3", "number": 11193, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQyMDozMzo0NlrODq9azg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNDo0NDo0M1rODwBqmw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2MzczMDcwOnYy", "diffSide": "RIGHT", "path": ".test-infra/dataproc/init-actions/flink.sh", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQyMDozMzo0NlrOF7B_uQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQyMDozMzo0NlrOF7B_uQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzQ0MzAwMQ==", "bodyText": "The correct option name is: taskmanager.memory.jvm-metaspace.size: https://ci.apache.org/projects/flink/flink-docs-release-1.10/ops/config.html#taskmanager-memory-jvm-metaspace-size", "url": "https://github.com/apache/beam/pull/11193#discussion_r397443001", "createdAt": "2020-03-24T20:33:46Z", "author": {"login": "mxm"}, "path": ".test-infra/dataproc/init-actions/flink.sh", "diffHunk": "@@ -155,7 +155,8 @@ function configure_flink() {\n # Settings applied by Cloud Dataproc initialization action\n jobmanager.rpc.address: ${master_hostname}\n jobmanager.heap.mb: ${flink_jobmanager_memory}\n-taskmanager.heap.mb: ${flink_taskmanager_memory}\n+taskmanager.memory.process.mb: ${flink_taskmanager_memory}\n+taskmanager.memory.jvm-metaspace.mb: 512", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f11ef3ccd806e69c17e4788ebf37b8a50889d2e"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2MzczMjgzOnYy", "diffSide": "RIGHT", "path": ".test-infra/dataproc/init-actions/flink.sh", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQyMDozNDoyM1rOF7CA_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQyMDozNDoyM1rOF7CA_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzQ0MzMyNw==", "bodyText": "Also this one is taskmanager.memory.process.size: https://ci.apache.org/projects/flink/flink-docs-release-1.10/ops/config.html#taskmanager-memory-process-size", "url": "https://github.com/apache/beam/pull/11193#discussion_r397443327", "createdAt": "2020-03-24T20:34:23Z", "author": {"login": "mxm"}, "path": ".test-infra/dataproc/init-actions/flink.sh", "diffHunk": "@@ -155,7 +155,8 @@ function configure_flink() {\n # Settings applied by Cloud Dataproc initialization action\n jobmanager.rpc.address: ${master_hostname}\n jobmanager.heap.mb: ${flink_jobmanager_memory}\n-taskmanager.heap.mb: ${flink_taskmanager_memory}\n+taskmanager.memory.process.mb: ${flink_taskmanager_memory}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f11ef3ccd806e69c17e4788ebf37b8a50889d2e"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2MzczNDAyOnYy", "diffSide": "RIGHT", "path": ".test-infra/dataproc/init-actions/flink.sh", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQyMDozNDo0OFrOF7CByQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQyMDozNDo0OFrOF7CByQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzQ0MzUyOQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # Flink config entry: taskmanager.memory.process.mb.\n          \n          \n            \n            # Flink config entry: taskmanager.memory.process.size", "url": "https://github.com/apache/beam/pull/11193#discussion_r397443529", "createdAt": "2020-03-24T20:34:48Z", "author": {"login": "mxm"}, "path": ".test-infra/dataproc/init-actions/flink.sh", "diffHunk": "@@ -46,7 +46,7 @@ readonly FLINK_NETWORK_NUM_BUFFERS=2048\n readonly FLINK_JOBMANAGER_MEMORY_FRACTION='1.0'\n \n # Heap memory used by the task managers (slaves) determined by the physical (free) memory of the servers.\n-# Flink config entry: taskmanager.heap.mb.\n+# Flink config entry: taskmanager.memory.process.mb.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f11ef3ccd806e69c17e4788ebf37b8a50889d2e"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUxNjg1NTMxOnYy", "diffSide": "RIGHT", "path": ".test-infra/dataproc/init-actions/flink.sh", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNDo0NDo0M1rOGCyoHw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNjoxODozM1rOGC2ymQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTU3OTgwNw==", "bodyText": "Should we set a fixed amount of memory here? 0.5 could be a lot.", "url": "https://github.com/apache/beam/pull/11193#discussion_r405579807", "createdAt": "2020-04-08T14:44:43Z", "author": {"login": "mxm"}, "path": ".test-infra/dataproc/init-actions/flink.sh", "diffHunk": "@@ -155,7 +155,9 @@ function configure_flink() {\n # Settings applied by Cloud Dataproc initialization action\n jobmanager.rpc.address: ${master_hostname}\n jobmanager.heap.mb: ${flink_jobmanager_memory}\n-taskmanager.heap.mb: ${flink_taskmanager_memory}\n+taskmanager.memory.process.size: \"${flink_taskmanager_memory} mb\"\n+taskmanager.memory.jvm-metaspace.size: 512 mb\n+taskmanager.memory.managed.fraction: 0.5", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a068c430e73ed52c7f415caf9679a4b47e30154f"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTU4MTU2OQ==", "bodyText": "If you needed 0.5, then that's fine.", "url": "https://github.com/apache/beam/pull/11193#discussion_r405581569", "createdAt": "2020-04-08T14:47:05Z", "author": {"login": "mxm"}, "path": ".test-infra/dataproc/init-actions/flink.sh", "diffHunk": "@@ -155,7 +155,9 @@ function configure_flink() {\n # Settings applied by Cloud Dataproc initialization action\n jobmanager.rpc.address: ${master_hostname}\n jobmanager.heap.mb: ${flink_jobmanager_memory}\n-taskmanager.heap.mb: ${flink_taskmanager_memory}\n+taskmanager.memory.process.size: \"${flink_taskmanager_memory} mb\"\n+taskmanager.memory.jvm-metaspace.size: 512 mb\n+taskmanager.memory.managed.fraction: 0.5", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTU3OTgwNw=="}, "originalCommit": {"oid": "a068c430e73ed52c7f415caf9679a4b47e30154f"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTY0MzI0OA==", "bodyText": "Yes, the jobs started working after setting the fraction to 0.5. The default value is 0.4, so the difference might not be that huge.", "url": "https://github.com/apache/beam/pull/11193#discussion_r405643248", "createdAt": "2020-04-08T16:11:25Z", "author": {"login": "kamilwu"}, "path": ".test-infra/dataproc/init-actions/flink.sh", "diffHunk": "@@ -155,7 +155,9 @@ function configure_flink() {\n # Settings applied by Cloud Dataproc initialization action\n jobmanager.rpc.address: ${master_hostname}\n jobmanager.heap.mb: ${flink_jobmanager_memory}\n-taskmanager.heap.mb: ${flink_taskmanager_memory}\n+taskmanager.memory.process.size: \"${flink_taskmanager_memory} mb\"\n+taskmanager.memory.jvm-metaspace.size: 512 mb\n+taskmanager.memory.managed.fraction: 0.5", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTU3OTgwNw=="}, "originalCommit": {"oid": "a068c430e73ed52c7f415caf9679a4b47e30154f"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTY0ODAyNQ==", "bodyText": "Sounds good!", "url": "https://github.com/apache/beam/pull/11193#discussion_r405648025", "createdAt": "2020-04-08T16:18:33Z", "author": {"login": "mxm"}, "path": ".test-infra/dataproc/init-actions/flink.sh", "diffHunk": "@@ -155,7 +155,9 @@ function configure_flink() {\n # Settings applied by Cloud Dataproc initialization action\n jobmanager.rpc.address: ${master_hostname}\n jobmanager.heap.mb: ${flink_jobmanager_memory}\n-taskmanager.heap.mb: ${flink_taskmanager_memory}\n+taskmanager.memory.process.size: \"${flink_taskmanager_memory} mb\"\n+taskmanager.memory.jvm-metaspace.size: 512 mb\n+taskmanager.memory.managed.fraction: 0.5", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTU3OTgwNw=="}, "originalCommit": {"oid": "a068c430e73ed52c7f415caf9679a4b47e30154f"}, "originalPosition": 16}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1740, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}