{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzNzMwMDMz", "number": 11221, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxNToxNjo1M1rODrsavg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxNToxNjo1M1rODrsavg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3MTQzMTAyOnYy", "diffSide": "RIGHT", "path": "runners/core-construction-java/src/main/java/org/apache/beam/runners/core/construction/Environments.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxNToxNjo1M1rOF8L8xw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxODo1Njo0OFrOF8V4pg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODY1NDY2Mw==", "bodyText": "What about going with \"beam:sdk:version:\" + ReleaseInfo.getReleaseInfo().getSdkVersion() and \"beam:sdk:language:java\"?\nAny detection we do about container image paths should likely be done from the container manifest itself.\nWe could add beam:sdk:language:go to the Go SDK.", "url": "https://github.com/apache/beam/pull/11221#discussion_r398654663", "createdAt": "2020-03-26T15:16:53Z", "author": {"login": "lukecwik"}, "path": "runners/core-construction-java/src/main/java/org/apache/beam/runners/core/construction/Environments.java", "diffHunk": "@@ -239,6 +239,7 @@ public static Environment createProcessEnvironment(\n     capabilities.addAll(ModelCoders.urns());\n     capabilities.add(BeamUrns.getUrn(StandardProtocols.Enum.MULTI_CORE_BUNDLE_PROCESSING));\n     capabilities.add(BeamUrns.getUrn(StandardProtocols.Enum.PROGRESS_REPORTING));\n+    capabilities.add(\"beam:version:sdk_base:\" + JAVA_SDK_HARNESS_CONTAINER_URL);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d872287454f6bb3734b47a414afe0a0c20e3210a"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODczNTk3OQ==", "bodyText": "I did this because the languages might be versioned as well (as they are in Python, and may be in Java). This version may not align precisely with the version used during construction, but the default container should always be compatible with it to whatever level of granularity our containers are build. I also don't think we should be encourage any branching on beam:sdk:version. However, if you feel strongly we could split these out.\nAdding a generic marker for go.", "url": "https://github.com/apache/beam/pull/11221#discussion_r398735979", "createdAt": "2020-03-26T16:59:41Z", "author": {"login": "robertwb"}, "path": "runners/core-construction-java/src/main/java/org/apache/beam/runners/core/construction/Environments.java", "diffHunk": "@@ -239,6 +239,7 @@ public static Environment createProcessEnvironment(\n     capabilities.addAll(ModelCoders.urns());\n     capabilities.add(BeamUrns.getUrn(StandardProtocols.Enum.MULTI_CORE_BUNDLE_PROCESSING));\n     capabilities.add(BeamUrns.getUrn(StandardProtocols.Enum.PROGRESS_REPORTING));\n+    capabilities.add(\"beam:version:sdk_base:\" + JAVA_SDK_HARNESS_CONTAINER_URL);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODY1NDY2Mw=="}, "originalCommit": {"oid": "d872287454f6bb3734b47a414afe0a0c20e3210a"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODc3NDczOQ==", "bodyText": "The language version is an interesting point and brings up an issue where you could be using the same base container but the user submitting the pipeline is using a different version.\nI just feel as though people will attempt to \"parse\" the language and version out of the container URL but if it comes to that we can always add more capabilities and remove existing ones.", "url": "https://github.com/apache/beam/pull/11221#discussion_r398774739", "createdAt": "2020-03-26T17:53:29Z", "author": {"login": "lukecwik"}, "path": "runners/core-construction-java/src/main/java/org/apache/beam/runners/core/construction/Environments.java", "diffHunk": "@@ -239,6 +239,7 @@ public static Environment createProcessEnvironment(\n     capabilities.addAll(ModelCoders.urns());\n     capabilities.add(BeamUrns.getUrn(StandardProtocols.Enum.MULTI_CORE_BUNDLE_PROCESSING));\n     capabilities.add(BeamUrns.getUrn(StandardProtocols.Enum.PROGRESS_REPORTING));\n+    capabilities.add(\"beam:version:sdk_base:\" + JAVA_SDK_HARNESS_CONTAINER_URL);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODY1NDY2Mw=="}, "originalCommit": {"oid": "d872287454f6bb3734b47a414afe0a0c20e3210a"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODgxNzQ0Ng==", "bodyText": "Yeah, we can't rule out people trying to parse these, but at least then they'll know they're on shaky ground. And as you say, these aren't terribly sticky. (I hope we never have to use them.)", "url": "https://github.com/apache/beam/pull/11221#discussion_r398817446", "createdAt": "2020-03-26T18:56:48Z", "author": {"login": "robertwb"}, "path": "runners/core-construction-java/src/main/java/org/apache/beam/runners/core/construction/Environments.java", "diffHunk": "@@ -239,6 +239,7 @@ public static Environment createProcessEnvironment(\n     capabilities.addAll(ModelCoders.urns());\n     capabilities.add(BeamUrns.getUrn(StandardProtocols.Enum.MULTI_CORE_BUNDLE_PROCESSING));\n     capabilities.add(BeamUrns.getUrn(StandardProtocols.Enum.PROGRESS_REPORTING));\n+    capabilities.add(\"beam:version:sdk_base:\" + JAVA_SDK_HARNESS_CONTAINER_URL);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODY1NDY2Mw=="}, "originalCommit": {"oid": "d872287454f6bb3734b47a414afe0a0c20e3210a"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1522, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}