{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU3NDcwNDc1", "number": 12384, "title": "Fix various issues in release instructions and scripts observed while preparing 2.23.0.", "bodyText": "Post-Commit Tests Status (on master branch)\n\n\n\nLang\nSDK\nDataflow\nFlink\nSamza\nSpark\nTwister2\n\n\n\n\nGo\n\n---\n\n---\n\n---\n\n\nJava\n\n\n\n\n\n\n\n\nPython\n\n\n\n---\n\n---\n\n\nXLang\n\n---\n\n---\n\n---\n\n\n\nPre-Commit Tests Status (on master branch)\n\n\n\n---\nJava\nPython\nGo\nWebsite\n\n\n\n\nNon-portable\n\n\n\n\n\n\nPortable\n---\n\n---\n---\n\n\n\nSee .test-infra/jenkins/README for trigger phrase, status and link of all Jenkins jobs.", "createdAt": "2020-07-28T00:27:30Z", "url": "https://github.com/apache/beam/pull/12384", "merged": true, "mergeCommit": {"oid": "41ec8b1dbc897ee1332ebef064847cf8baf87aa4"}, "closed": true, "closedAt": "2020-07-28T20:31:07Z", "author": {"login": "tvalentyn"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc5KdlmAH2gAyNDU3NDcwNDc1OmRhZGYxOTAwMDMzYmUzNTgyYjEzM2FmNzE5NWEyZmRkM2U0ZTI0YTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc5YdK-gFqTQ1Njc2MjkyMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "dadf1900033be3582b133af7195a2fdd3e4e24a7", "author": {"user": {"login": "tvalentyn", "name": null}}, "url": "https://github.com/apache/beam/commit/dadf1900033be3582b133af7195a2fdd3e4e24a7", "committedDate": "2020-07-27T23:31:08Z", "message": "Build Py3.8 docker containers."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b0748a5ef20669c9a1f039e2dabbf7dc89a447ed", "author": {"user": {"login": "tvalentyn", "name": null}}, "url": "https://github.com/apache/beam/commit/b0748a5ef20669c9a1f039e2dabbf7dc89a447ed", "committedDate": "2020-07-27T23:32:21Z", "message": "Correct docs tox task."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0aa52d13f1e2c31ffe73b026ccb9cb49030570e3", "author": {"user": {"login": "tvalentyn", "name": null}}, "url": "https://github.com/apache/beam/commit/0aa52d13f1e2c31ffe73b026ccb9cb49030570e3", "committedDate": "2020-07-27T23:36:35Z", "message": "Correct the commit hash used in docs generation."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0e99293d66c6cd13add73ad2cbaa162ebd4fc15a", "author": {"user": {"login": "tvalentyn", "name": null}}, "url": "https://github.com/apache/beam/commit/0e99293d66c6cd13add73ad2cbaa162ebd4fc15a", "committedDate": "2020-07-27T23:40:01Z", "message": "Exit gracefully when docs PR was created on previous RC."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "990d63203d65b9e09a05d6344a93a783511c2399", "author": {"user": {"login": "tvalentyn", "name": null}}, "url": "https://github.com/apache/beam/commit/990d63203d65b9e09a05d6344a93a783511c2399", "committedDate": "2020-07-27T23:41:27Z", "message": "Add Py38 Postcommits to the list of suites to trigger."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2d2a4278e17ac0b1c013961c4531ddace66fa61f", "author": {"user": {"login": "tvalentyn", "name": null}}, "url": "https://github.com/apache/beam/commit/2d2a4278e17ac0b1c013961c4531ddace66fa61f", "committedDate": "2020-07-27T23:45:42Z", "message": "Removes unclear instruction."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2NzYyOTIy", "url": "https://github.com/apache/beam/pull/12384#pullrequestreview-456762922", "createdAt": "2020-07-28T15:40:15Z", "commit": {"oid": "2d2a4278e17ac0b1c013961c4531ddace66fa61f"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNTo0MDoxNVrOG4SwIw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNTo0Mzo1NVrOG4S6EA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTY4MDY3NQ==", "bodyText": "Is this approach generally preferred over virtualenv --python=python3 (just asking for my own edification)?", "url": "https://github.com/apache/beam/pull/12384#discussion_r461680675", "createdAt": "2020-07-28T15:40:15Z", "author": {"login": "TheNeuralBit"}, "path": "release/src/main/scripts/build_release_candidate.sh", "diffHunk": "@@ -288,14 +288,15 @@ if [[ $confirmation = \"y\" ]]; then\n   mkdir -p ${LOCAL_WEBSITE_REPO}\n \n   echo \"------------------Building Python Doc------------------------\"\n-  virtualenv ${LOCAL_PYTHON_VIRTUALENV}\n-  source ${LOCAL_PYTHON_VIRTUALENV}/bin/activate\n+  python3 -m venv \"${LOCAL_PYTHON_VIRTUALENV}\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2d2a4278e17ac0b1c013961c4531ddace66fa61f"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTY4MzIxNg==", "bodyText": "Good catch", "url": "https://github.com/apache/beam/pull/12384#discussion_r461683216", "createdAt": "2020-07-28T15:43:55Z", "author": {"login": "TheNeuralBit"}, "path": "release/src/main/scripts/build_release_candidate.sh", "diffHunk": "@@ -288,14 +288,15 @@ if [[ $confirmation = \"y\" ]]; then\n   mkdir -p ${LOCAL_WEBSITE_REPO}\n \n   echo \"------------------Building Python Doc------------------------\"\n-  virtualenv ${LOCAL_PYTHON_VIRTUALENV}\n-  source ${LOCAL_PYTHON_VIRTUALENV}/bin/activate\n+  python3 -m venv \"${LOCAL_PYTHON_VIRTUALENV}\"\n+  source \"${LOCAL_PYTHON_VIRTUALENV}/bin/activate\"\n   cd ${LOCAL_PYTHON_DOC}\n   pip install tox\n   git clone ${GIT_REPO_URL}\n   cd ${BEAM_ROOT_DIR}\n   git checkout ${RELEASE_BRANCH}\n-  cd sdks/python && pip install -r build-requirements.txt && tox -e py37-docs\n+  RELEASE_COMMIT=$(git rev-parse --verify ${RELEASE_BRANCH})", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2d2a4278e17ac0b1c013961c4531ddace66fa61f"}, "originalPosition": 23}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3957, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}