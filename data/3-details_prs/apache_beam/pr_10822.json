{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzczMzE1NzU1", "number": 10822, "title": "[BEAM-7746] Minor typing updates / fixes", "bodyText": "This PR corrects a few problems that have occurred over the past few weeks:\n\nbad annotations added in PRs\nmangling of type ignore comments by yapf  (fixed up the issues and added an option to the config to prevent it in the future)\n\nPlus it adds some more type annotations.  Nothing too radical or dangerous here.\n\nThank you for your contribution! Follow this checklist to help us incorporate your contribution quickly and easily:\n\n Choose reviewer(s) and mention them in a comment (R: @username).\n Format the pull request title like [BEAM-XXX] Fixes bug in ApproximateQuantiles, where you replace BEAM-XXX with the appropriate JIRA issue, if applicable. This will automatically link the pull request to the issue.\n Update CHANGES.md with noteworthy changes.\n If this contribution is large, please file an Apache Individual Contributor License Agreement.\n\nSee the Contributor Guide for more tips on how to make review process smoother.\nPost-Commit Tests Status (on master branch)\n\n\n\nLang\nSDK\nApex\nDataflow\nFlink\nGearpump\nSamza\nSpark\n\n\n\n\nGo\n\n---\n---\n\n---\n---\n\n\n\nJava\n\n\n\n\n\n\n\n\n\nPython\n\n---\n\n\n---\n---\n\n\n\nXLang\n---\n---\n---\n\n---\n---\n---\n\n\n\nPre-Commit Tests Status (on master branch)\n\n\n\n---\nJava\nPython\nGo\nWebsite\n\n\n\n\nNon-portable\n\n\n\n\n\n\nPortable\n---\n\n---\n---\n\n\n\nSee .test-infra/jenkins/README for trigger phrase, status and link of all Jenkins jobs.", "createdAt": "2020-02-10T19:41:13Z", "url": "https://github.com/apache/beam/pull/10822", "merged": true, "mergeCommit": {"oid": "2f10df9c4845f2527f6e5ce0119515834488645a"}, "closed": true, "closedAt": "2020-02-28T22:43:02Z", "author": {"login": "chadrik"}, "timelineItems": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcDelnzABqjMwMjkzMDE2Nzg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcIzaiKgBqjMwODI4MTg4ODY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "df9a769116d9a0e6eae07347ccfa23b20c372f2c", "author": {"user": {"login": "chadrik", "name": "Chad Dombrova"}}, "url": "https://github.com/apache/beam/commit/df9a769116d9a0e6eae07347ccfa23b20c372f2c", "committedDate": "2020-02-09T00:44:40Z", "message": "more typing fixes"}, "afterCommit": {"oid": "35258c78a35af368ff63efd501025e6f9bd796b6", "author": {"user": {"login": "chadrik", "name": "Chad Dombrova"}}, "url": "https://github.com/apache/beam/commit/35258c78a35af368ff63efd501025e6f9bd796b6", "committedDate": "2020-02-12T04:25:44Z", "message": "more typing fixes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "35258c78a35af368ff63efd501025e6f9bd796b6", "author": {"user": {"login": "chadrik", "name": "Chad Dombrova"}}, "url": "https://github.com/apache/beam/commit/35258c78a35af368ff63efd501025e6f9bd796b6", "committedDate": "2020-02-12T04:25:44Z", "message": "more typing fixes"}, "afterCommit": {"oid": "9d5ed3e93516bfd51a71651fc66e92abd72252dd", "author": {"user": {"login": "chadrik", "name": "Chad Dombrova"}}, "url": "https://github.com/apache/beam/commit/9d5ed3e93516bfd51a71651fc66e92abd72252dd", "committedDate": "2020-02-22T19:28:55Z", "message": "more typing fixes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9d5ed3e93516bfd51a71651fc66e92abd72252dd", "author": {"user": {"login": "chadrik", "name": "Chad Dombrova"}}, "url": "https://github.com/apache/beam/commit/9d5ed3e93516bfd51a71651fc66e92abd72252dd", "committedDate": "2020-02-22T19:28:55Z", "message": "more typing fixes"}, "afterCommit": {"oid": "9b2ab75152a3d614fa26e42f76d69a3f652f3e4f", "author": {"user": {"login": "chadrik", "name": "Chad Dombrova"}}, "url": "https://github.com/apache/beam/commit/9b2ab75152a3d614fa26e42f76d69a3f652f3e4f", "committedDate": "2020-02-23T20:50:15Z", "message": "more typing fixes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "31237a14435f1f3d57cfba2a13182d29135193b3", "author": {"user": {"login": "chadrik", "name": "Chad Dombrova"}}, "url": "https://github.com/apache/beam/commit/31237a14435f1f3d57cfba2a13182d29135193b3", "committedDate": "2020-02-23T23:12:16Z", "message": "Use native/embedded version of typing module"}, "afterCommit": {"oid": "e112249cbf0fdb7daca294b80dfdd57a49b1d653", "author": {"user": {"login": "chadrik", "name": "Chad Dombrova"}}, "url": "https://github.com/apache/beam/commit/e112249cbf0fdb7daca294b80dfdd57a49b1d653", "committedDate": "2020-02-24T05:12:25Z", "message": "Fix typing issue with python 3.5.2"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e112249cbf0fdb7daca294b80dfdd57a49b1d653", "author": {"user": {"login": "chadrik", "name": "Chad Dombrova"}}, "url": "https://github.com/apache/beam/commit/e112249cbf0fdb7daca294b80dfdd57a49b1d653", "committedDate": "2020-02-24T05:12:25Z", "message": "Fix typing issue with python 3.5.2"}, "afterCommit": {"oid": "19ba9d8e6f54be306d28b305ade429908035335d", "author": {"user": {"login": "chadrik", "name": "Chad Dombrova"}}, "url": "https://github.com/apache/beam/commit/19ba9d8e6f54be306d28b305ade429908035335d", "committedDate": "2020-02-25T17:19:12Z", "message": "Fix typing issue with python 3.5.2"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1MTE5Mjgz", "url": "https://github.com/apache/beam/pull/10822#pullrequestreview-365119283", "createdAt": "2020-02-26T18:00:53Z", "commit": {"oid": "19ba9d8e6f54be306d28b305ade429908035335d"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQxODowMDo1M1rOFu2I-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQxODowODoxNlrOFu2YPQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDY2NTg1MQ==", "bodyText": "I don't know that we want to restrict this to integral values.", "url": "https://github.com/apache/beam/pull/10822#discussion_r384665851", "createdAt": "2020-02-26T18:00:53Z", "author": {"login": "robertwb"}, "path": "sdks/python/apache_beam/io/iobase.py", "diffHunk": "@@ -1289,9 +1289,9 @@ class RestrictionProgress(object):\n   \"\"\"\n   def __init__(self, **kwargs):\n     # Only accept keyword arguments.\n-    self._fraction = kwargs.pop('fraction', None)\n-    self._completed = kwargs.pop('completed', None)\n-    self._remaining = kwargs.pop('remaining', None)\n+    self._fraction = kwargs.pop('fraction', None)  # type: Optional[float]\n+    self._completed = kwargs.pop('completed', None)  # type: Optional[int]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19ba9d8e6f54be306d28b305ade429908035335d"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDY2NjU1OA==", "bodyText": "Why this change? (And below.)", "url": "https://github.com/apache/beam/pull/10822#discussion_r384666558", "createdAt": "2020-02-26T18:02:07Z", "author": {"login": "robertwb"}, "path": "sdks/python/apache_beam/runners/common.py", "diffHunk": "@@ -375,7 +379,7 @@ class DoFnInvoker(object):\n   represented by a given DoFnSignature.\"\"\"\n \n   def __init__(self,\n-               output_processor,  # type: OutputProcessor\n+               output_processor,  # type: _OutputProcessor", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19ba9d8e6f54be306d28b305ade429908035335d"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDY2NjcxNg==", "bodyText": "Same.", "url": "https://github.com/apache/beam/pull/10822#discussion_r384666716", "createdAt": "2020-02-26T18:02:25Z", "author": {"login": "robertwb"}, "path": "sdks/python/apache_beam/runners/common.py", "diffHunk": "@@ -529,7 +530,7 @@ class SimpleInvoker(DoFnInvoker):\n   \"\"\"An invoker that processes elements ignoring windowing information.\"\"\"\n \n   def __init__(self,\n-               output_processor,  # type: OutputProcessor\n+               output_processor,  # type: _OutputProcessor", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19ba9d8e6f54be306d28b305ade429908035335d"}, "originalPosition": 86}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDY2OTc1Nw==", "bodyText": "I prefer the previous format, where there was single assignment rather than re-assignment. Is there any benefit to typing this?", "url": "https://github.com/apache/beam/pull/10822#discussion_r384669757", "createdAt": "2020-02-26T18:08:16Z", "author": {"login": "robertwb"}, "path": "sdks/python/apache_beam/transforms/external_java.py", "diffHunk": "@@ -37,18 +39,19 @@\n \n # Protect against environments where apitools library is not available.\n # pylint: disable=wrong-import-order, wrong-import-position\n+apiclient = None  # type: Optional[types.ModuleType]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19ba9d8e6f54be306d28b305ade429908035335d"}, "originalPosition": 13}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "19ba9d8e6f54be306d28b305ade429908035335d", "author": {"user": {"login": "chadrik", "name": "Chad Dombrova"}}, "url": "https://github.com/apache/beam/commit/19ba9d8e6f54be306d28b305ade429908035335d", "committedDate": "2020-02-25T17:19:12Z", "message": "Fix typing issue with python 3.5.2"}, "afterCommit": {"oid": "e60fb10d58dcdad883af7d51672c63590d3e8cd1", "author": {"user": {"login": "chadrik", "name": "Chad Dombrova"}}, "url": "https://github.com/apache/beam/commit/e60fb10d58dcdad883af7d51672c63590d3e8cd1", "committedDate": "2020-02-26T19:02:21Z", "message": "fixes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e60fb10d58dcdad883af7d51672c63590d3e8cd1", "author": {"user": {"login": "chadrik", "name": "Chad Dombrova"}}, "url": "https://github.com/apache/beam/commit/e60fb10d58dcdad883af7d51672c63590d3e8cd1", "committedDate": "2020-02-26T19:02:21Z", "message": "fixes"}, "afterCommit": {"oid": "d16797bb19cb432e0dba1f1ac0064a2730271356", "author": {"user": {"login": "chadrik", "name": "Chad Dombrova"}}, "url": "https://github.com/apache/beam/commit/d16797bb19cb432e0dba1f1ac0064a2730271356", "committedDate": "2020-02-26T19:06:17Z", "message": "fixes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d16797bb19cb432e0dba1f1ac0064a2730271356", "author": {"user": {"login": "chadrik", "name": "Chad Dombrova"}}, "url": "https://github.com/apache/beam/commit/d16797bb19cb432e0dba1f1ac0064a2730271356", "committedDate": "2020-02-26T19:06:17Z", "message": "fixes"}, "afterCommit": {"oid": "22b349bf337ae5cd0e344c6434382e92bc9f75d9", "author": {"user": {"login": "chadrik", "name": "Chad Dombrova"}}, "url": "https://github.com/apache/beam/commit/22b349bf337ae5cd0e344c6434382e92bc9f75d9", "committedDate": "2020-02-26T19:18:53Z", "message": "fixes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dae90ee2af5154af162bb8710505edcca1aa5bb8", "author": {"user": {"login": "chadrik", "name": "Chad Dombrova"}}, "url": "https://github.com/apache/beam/commit/dae90ee2af5154af162bb8710505edcca1aa5bb8", "committedDate": "2020-02-26T23:43:03Z", "message": "Improve the idiom used for conditional imports"}, "afterCommit": {"oid": "432ca174f82a0ac9cda637ee87d2b815dcb052dd", "author": {"user": {"login": "chadrik", "name": "Chad Dombrova"}}, "url": "https://github.com/apache/beam/commit/432ca174f82a0ac9cda637ee87d2b815dcb052dd", "committedDate": "2020-02-26T23:47:06Z", "message": "Improve the idiom used for conditional imports"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "432ca174f82a0ac9cda637ee87d2b815dcb052dd", "author": {"user": {"login": "chadrik", "name": "Chad Dombrova"}}, "url": "https://github.com/apache/beam/commit/432ca174f82a0ac9cda637ee87d2b815dcb052dd", "committedDate": "2020-02-26T23:47:06Z", "message": "Improve the idiom used for conditional imports"}, "afterCommit": {"oid": "7852b4b666129d69cfe0f63fe6dda18854aee5f1", "author": {"user": {"login": "chadrik", "name": "Chad Dombrova"}}, "url": "https://github.com/apache/beam/commit/7852b4b666129d69cfe0f63fe6dda18854aee5f1", "committedDate": "2020-02-26T23:47:42Z", "message": "Improve the idiom used for conditional imports"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7852b4b666129d69cfe0f63fe6dda18854aee5f1", "author": {"user": {"login": "chadrik", "name": "Chad Dombrova"}}, "url": "https://github.com/apache/beam/commit/7852b4b666129d69cfe0f63fe6dda18854aee5f1", "committedDate": "2020-02-26T23:47:42Z", "message": "Improve the idiom used for conditional imports"}, "afterCommit": {"oid": "b6afeb23d9eb909801d3e89aa61ef754a4907a5d", "author": {"user": {"login": "chadrik", "name": "Chad Dombrova"}}, "url": "https://github.com/apache/beam/commit/b6afeb23d9eb909801d3e89aa61ef754a4907a5d", "committedDate": "2020-02-26T23:49:00Z", "message": "Improve the idiom used for conditional imports"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b6afeb23d9eb909801d3e89aa61ef754a4907a5d", "author": {"user": {"login": "chadrik", "name": "Chad Dombrova"}}, "url": "https://github.com/apache/beam/commit/b6afeb23d9eb909801d3e89aa61ef754a4907a5d", "committedDate": "2020-02-26T23:49:00Z", "message": "Improve the idiom used for conditional imports"}, "afterCommit": {"oid": "13797174bcace9c8b41e3331e1a3b4731d5ababd", "author": {"user": {"login": "chadrik", "name": "Chad Dombrova"}}, "url": "https://github.com/apache/beam/commit/13797174bcace9c8b41e3331e1a3b4731d5ababd", "committedDate": "2020-02-27T07:01:44Z", "message": "Fix more issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7a50378841d3a7c15ba444b5ab059b6e25bbdb9d", "author": {"user": {"login": "chadrik", "name": "Chad Dombrova"}}, "url": "https://github.com/apache/beam/commit/7a50378841d3a7c15ba444b5ab059b6e25bbdb9d", "committedDate": "2020-02-28T17:31:07Z", "message": "more typing fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ad25c11938ba78935bcec175af405e86d858d9b", "author": {"user": {"login": "chadrik", "name": "Chad Dombrova"}}, "url": "https://github.com/apache/beam/commit/6ad25c11938ba78935bcec175af405e86d858d9b", "committedDate": "2020-02-28T17:31:07Z", "message": "Fix typing issue with python 3.5.2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e5cfa131e8e25f30810054a3c88794237b5c7c91", "author": {"user": {"login": "chadrik", "name": "Chad Dombrova"}}, "url": "https://github.com/apache/beam/commit/e5cfa131e8e25f30810054a3c88794237b5c7c91", "committedDate": "2020-02-28T17:31:07Z", "message": "fixes\n\nMore fixes\n\nLint fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aaa5fc2f3db23219f3884d027a68f3ea6275c2ff", "author": {"user": {"login": "chadrik", "name": "Chad Dombrova"}}, "url": "https://github.com/apache/beam/commit/aaa5fc2f3db23219f3884d027a68f3ea6275c2ff", "committedDate": "2020-02-28T17:31:07Z", "message": "Address more issues discovered after rebase\n\nLint fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2cdde4a2403ecaaf854d96c601e2d47dc244a41d", "author": {"user": {"login": "chadrik", "name": "Chad Dombrova"}}, "url": "https://github.com/apache/beam/commit/2cdde4a2403ecaaf854d96c601e2d47dc244a41d", "committedDate": "2020-02-28T17:31:07Z", "message": "Improve the idiom used for conditional imports"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d63d08f65e155c1388da224ea163125ce21ab984", "author": {"user": {"login": "chadrik", "name": "Chad Dombrova"}}, "url": "https://github.com/apache/beam/commit/d63d08f65e155c1388da224ea163125ce21ab984", "committedDate": "2020-02-28T17:31:07Z", "message": "Fix more issues\n\nA few more fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "114bbc4170c69f1078a0c5807ddc034193f79901", "author": {"user": {"login": "chadrik", "name": "Chad Dombrova"}}, "url": "https://github.com/apache/beam/commit/114bbc4170c69f1078a0c5807ddc034193f79901", "committedDate": "2020-02-28T17:31:07Z", "message": "Update to latest mypy version"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f5f4193e14c0749e0af249f8e56d9a049d954843", "author": {"user": {"login": "chadrik", "name": "Chad Dombrova"}}, "url": "https://github.com/apache/beam/commit/f5f4193e14c0749e0af249f8e56d9a049d954843", "committedDate": "2020-02-27T17:56:09Z", "message": "Update to latest mypy version"}, "afterCommit": {"oid": "114bbc4170c69f1078a0c5807ddc034193f79901", "author": {"user": {"login": "chadrik", "name": "Chad Dombrova"}}, "url": "https://github.com/apache/beam/commit/114bbc4170c69f1078a0c5807ddc034193f79901", "committedDate": "2020-02-28T17:31:07Z", "message": "Update to latest mypy version"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3040, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}