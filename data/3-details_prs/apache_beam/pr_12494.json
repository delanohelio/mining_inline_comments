{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY0NDMzNDA2", "number": 12494, "title": "[BEAM-10658] Update BigQuery storage sources to v1 API", "bodyText": "This pull request updates the BigQuery storage sources -- stream, table, and query -- to use v1 of the BigQuery storage API, rather than the now-legacy v1beta1 API, in preparation for turning down v1beta1.\n\nThank you for your contribution! Follow this checklist to help us incorporate your contribution quickly and easily:\n\n Choose reviewer(s) and mention them in a comment (R: @username).\n Format the pull request title like [BEAM-XXX] Fixes bug in ApproximateQuantiles, where you replace BEAM-XXX with the appropriate JIRA issue, if applicable. This will automatically link the pull request to the issue.\n Update CHANGES.md with noteworthy changes.\n If this contribution is large, please file an Apache Individual Contributor License Agreement.\n\nSee the Contributor Guide for more tips on how to make review process smoother.\nPost-Commit Tests Status (on master branch)\n\n\n\nLang\nSDK\nDataflow\nFlink\nSamza\nSpark\nTwister2\n\n\n\n\nGo\n\n---\n\n---\n\n---\n\n\nJava\n\n\n\n\n\n\n\n\nPython\n\n\n\n---\n\n---\n\n\nXLang\n\n---\n\n---\n\n---\n\n\n\nPre-Commit Tests Status (on master branch)\n\n\n\n---\nJava\nPython\nGo\nWebsite\n\n\n\n\nNon-portable\n\n\n\n\n\n\nPortable\n---\n\n---\n---\n\n\n\nSee .test-infra/jenkins/README for trigger phrase, status and link of all Jenkins jobs.\nGitHub Actions Tests Status (on master branch)\n\nSee CI.md for more information about GitHub Actions CI.", "createdAt": "2020-08-07T07:04:51Z", "url": "https://github.com/apache/beam/pull/12494", "merged": true, "mergeCommit": {"oid": "1efe5c38e9e6a1fd6e9b038e0ed76d3ad965b292"}, "closed": true, "closedAt": "2020-08-25T23:35:46Z", "author": {"login": "kmjung"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdCLovEAFqTQ3Mzk5NTcwNw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdCf5nEAFqTQ3NTA1NDU0OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDczOTk1NzA3", "url": "https://github.com/apache/beam/pull/12494#pullrequestreview-473995707", "createdAt": "2020-08-24T23:32:24Z", "commit": {"oid": "b993977b4021c666f9699ff65e83d64cc397b67d"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQyMzozMjoyNFrOHF6WjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQyMzozMjozMFrOHF6W3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTk2MDk3Mg==", "bodyText": "Is this format standardized ? If so can we add a reference here ?", "url": "https://github.com/apache/beam/pull/12494#discussion_r475960972", "createdAt": "2020-08-24T23:32:24Z", "author": {"login": "chamikaramj"}, "path": "sdks/java/io/google-cloud-platform/src/main/java/org/apache/beam/sdk/io/gcp/bigquery/BigQueryHelpers.java", "diffHunk": "@@ -348,22 +347,17 @@ static RetryJobIdResult getRetryJobId(\n     UNKNOWN,\n   }\n \n-  @VisibleForTesting\n-  static TableReferenceProto.TableReference toTableRefProto(TableReference ref) {\n-    TableReferenceProto.TableReference.Builder builder =\n-        TableReferenceProto.TableReference.newBuilder();\n-    if (ref.getProjectId() != null) {\n-      builder.setProjectId(ref.getProjectId());\n-    }\n-    return builder.setDatasetId(ref.getDatasetId()).setTableId(ref.getTableId()).build();\n+  static String toProjectResourceName(String projectName) {\n+    return \"projects/\" + projectName;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b993977b4021c666f9699ff65e83d64cc397b67d"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTk2MTA1NQ==", "bodyText": "Ditto.", "url": "https://github.com/apache/beam/pull/12494#discussion_r475961055", "createdAt": "2020-08-24T23:32:30Z", "author": {"login": "chamikaramj"}, "path": "sdks/java/io/google-cloud-platform/src/main/java/org/apache/beam/sdk/io/gcp/bigquery/BigQueryHelpers.java", "diffHunk": "@@ -348,22 +347,17 @@ static RetryJobIdResult getRetryJobId(\n     UNKNOWN,\n   }\n \n-  @VisibleForTesting\n-  static TableReferenceProto.TableReference toTableRefProto(TableReference ref) {\n-    TableReferenceProto.TableReference.Builder builder =\n-        TableReferenceProto.TableReference.newBuilder();\n-    if (ref.getProjectId() != null) {\n-      builder.setProjectId(ref.getProjectId());\n-    }\n-    return builder.setDatasetId(ref.getDatasetId()).setTableId(ref.getTableId()).build();\n+  static String toProjectResourceName(String projectName) {\n+    return \"projects/\" + projectName;\n   }\n \n-  @VisibleForTesting\n-  static TableReference toTableRef(TableReferenceProto.TableReference ref) {\n-    return new TableReference()\n-        .setProjectId(ref.getProjectId())\n-        .setDatasetId(ref.getDatasetId())\n-        .setTableId(ref.getTableId());\n+  static String toTableResourceName(TableReference tableReference) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b993977b4021c666f9699ff65e83d64cc397b67d"}, "originalPosition": 30}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed865476eb34a0aed7cff30741c31587b0eb4508", "author": {"user": {"login": "kmjung", "name": "Kenneth Jung"}}, "url": "https://github.com/apache/beam/commit/ed865476eb34a0aed7cff30741c31587b0eb4508", "committedDate": "2020-08-25T16:27:44Z", "message": "Update BigQuery storage API source to v1"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e7e98685635d936bb5574cde9d9c2cf5f82983b9", "author": {"user": {"login": "kmjung", "name": "Kenneth Jung"}}, "url": "https://github.com/apache/beam/commit/e7e98685635d936bb5574cde9d9c2cf5f82983b9", "committedDate": "2020-08-25T16:27:44Z", "message": "Make stream progress reporting work with v1 API"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "36a14df52c35e97005e22590ebbc17f250a94500", "author": {"user": {"login": "kmjung", "name": "Kenneth Jung"}}, "url": "https://github.com/apache/beam/commit/36a14df52c35e97005e22590ebbc17f250a94500", "committedDate": "2020-08-25T16:27:44Z", "message": "Clean up some leftovers"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a298af189b46d6d74a8d8742e523c0780fabdb26", "author": {"user": {"login": "kmjung", "name": "Kenneth Jung"}}, "url": "https://github.com/apache/beam/commit/a298af189b46d6d74a8d8742e523c0780fabdb26", "committedDate": "2020-08-25T16:27:44Z", "message": "Address code review feedback"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b993977b4021c666f9699ff65e83d64cc397b67d", "author": {"user": {"login": "kmjung", "name": "Kenneth Jung"}}, "url": "https://github.com/apache/beam/commit/b993977b4021c666f9699ff65e83d64cc397b67d", "committedDate": "2020-08-07T16:41:46Z", "message": "Clean up some leftovers"}, "afterCommit": {"oid": "a298af189b46d6d74a8d8742e523c0780fabdb26", "author": {"user": {"login": "kmjung", "name": "Kenneth Jung"}}, "url": "https://github.com/apache/beam/commit/a298af189b46d6d74a8d8742e523c0780fabdb26", "committedDate": "2020-08-25T16:27:44Z", "message": "Address code review feedback"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1MDU0NTQ5", "url": "https://github.com/apache/beam/pull/12494#pullrequestreview-475054549", "createdAt": "2020-08-25T23:35:04Z", "commit": {"oid": "a298af189b46d6d74a8d8742e523c0780fabdb26"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3804, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}