{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI2MDA5MTg1", "number": 11877, "title": "[BEAM-10184] Build python wheels on GitHub Actions for Linux/MacOS", "bodyText": "Build python on GitHub actions for easier release process in the future.\nGitHub Actions can be previewed on in fork: https://github.com/TobKed/beam/tree/github-actions-build-wheels-linux-macos\nFiles on GCS Bucket\nPattern\ngs://[BUCKET_NAME]/[BRANCH_NAME]/[COMMIT-SHA1]-[WORKFLOW_RUN_ID]/\nFiles\n\n*.tar.gz, *.zip - python source distribution\n*.whl - wheels\nevent.json - github action event payload.\ngithub_action_info - additional variables not available in event.json\n\nExample output on GCS Bucket:\nhttps://github.com/TobKed/beam/runs/793751247?check_suite_focus=true\ngs://***/master/8121a1172413214a774a7efabb32fde268133498-143078997-98/apache-beam-2.23.0.dev0.tar.gz\ngs://***/master/8121a1172413214a774a7efabb32fde268133498-143078997-98/apache-beam-2.23.0.dev0.zip\ngs://***/master/8121a1172413214a774a7efabb32fde268133498-143078997-98/apache_beam-2.23.0.dev0-cp27-cp27m-macosx_10_9_x86_64.whl\ngs://***/master/8121a1172413214a774a7efabb32fde268133498-143078997-98/apache_beam-2.23.0.dev0-cp27-cp27m-manylinux1_i686.whl\ngs://***/master/8121a1172413214a774a7efabb32fde268133498-143078997-98/apache_beam-2.23.0.dev0-cp27-cp27m-manylinux1_x86_64.whl\ngs://***/master/8121a1172413214a774a7efabb32fde268133498-143078997-98/apache_beam-2.23.0.dev0-cp27-cp27m-manylinux2010_i686.whl\ngs://***/master/8121a1172413214a774a7efabb32fde268133498-143078997-98/apache_beam-2.23.0.dev0-cp27-cp27m-manylinux2010_x86_64.whl\ngs://***/master/8121a1172413214a774a7efabb32fde268133498-143078997-98/apache_beam-2.23.0.dev0-cp27-cp27mu-manylinux1_i686.whl\ngs://***/master/8121a1172413214a774a7efabb32fde268133498-143078997-98/apache_beam-2.23.0.dev0-cp27-cp27mu-manylinux1_x86_64.whl\ngs://***/master/8121a1172413214a774a7efabb32fde268133498-143078997-98/apache_beam-2.23.0.dev0-cp27-cp27mu-manylinux2010_i686.whl\ngs://***/master/8121a1172413214a774a7efabb32fde268133498-143078997-98/apache_beam-2.23.0.dev0-cp27-cp27mu-manylinux2010_x86_64.whl\ngs://***/master/8121a1172413214a774a7efabb32fde268133498-143078997-98/apache_beam-2.23.0.dev0-cp35-cp35m-macosx_10_9_x86_64.whl\ngs://***/master/8121a1172413214a774a7efabb32fde268133498-143078997-98/apache_beam-2.23.0.dev0-cp35-cp35m-manylinux1_i686.whl\ngs://***/master/8121a1172413214a774a7efabb32fde268133498-143078997-98/apache_beam-2.23.0.dev0-cp35-cp35m-manylinux1_x86_64.whl\ngs://***/master/8121a1172413214a774a7efabb32fde268133498-143078997-98/apache_beam-2.23.0.dev0-cp35-cp35m-manylinux2010_i686.whl\ngs://***/master/8121a1172413214a774a7efabb32fde268133498-143078997-98/apache_beam-2.23.0.dev0-cp35-cp35m-manylinux2010_x86_64.whl\ngs://***/master/8121a1172413214a774a7efabb32fde268133498-143078997-98/apache_beam-2.23.0.dev0-cp36-cp36m-macosx_10_9_x86_64.whl\ngs://***/master/8121a1172413214a774a7efabb32fde268133498-143078997-98/apache_beam-2.23.0.dev0-cp36-cp36m-manylinux1_i686.whl\ngs://***/master/8121a1172413214a774a7efabb32fde268133498-143078997-98/apache_beam-2.23.0.dev0-cp36-cp36m-manylinux1_x86_64.whl\ngs://***/master/8121a1172413214a774a7efabb32fde268133498-143078997-98/apache_beam-2.23.0.dev0-cp36-cp36m-manylinux2010_i686.whl\ngs://***/master/8121a1172413214a774a7efabb32fde268133498-143078997-98/apache_beam-2.23.0.dev0-cp36-cp36m-manylinux2010_x86_64.whl\ngs://***/master/8121a1172413214a774a7efabb32fde268133498-143078997-98/apache_beam-2.23.0.dev0-cp37-cp37m-macosx_10_9_x86_64.whl\ngs://***/master/8121a1172413214a774a7efabb32fde268133498-143078997-98/apache_beam-2.23.0.dev0-cp37-cp37m-manylinux1_i686.whl\ngs://***/master/8121a1172413214a774a7efabb32fde268133498-143078997-98/apache_beam-2.23.0.dev0-cp37-cp37m-manylinux1_x86_64.whl\ngs://***/master/8121a1172413214a774a7efabb32fde268133498-143078997-98/apache_beam-2.23.0.dev0-cp37-cp37m-manylinux2010_i686.whl\ngs://***/master/8121a1172413214a774a7efabb32fde268133498-143078997-98/apache_beam-2.23.0.dev0-cp37-cp37m-manylinux2010_x86_64.whl\ngs://***/master/8121a1172413214a774a7efabb32fde268133498-143078997-98/apache_beam-2.23.0.dev0-cp38-cp38-macosx_10_9_x86_64.whl\ngs://***/master/8121a1172413214a774a7efabb32fde268133498-143078997-98/apache_beam-2.23.0.dev0-cp38-cp38-manylinux1_i686.whl\ngs://***/master/8121a1172413214a774a7efabb32fde268133498-143078997-98/apache_beam-2.23.0.dev0-cp38-cp38-manylinux1_x86_64.whl\ngs://***/master/8121a1172413214a774a7efabb32fde268133498-143078997-98/apache_beam-2.23.0.dev0-cp38-cp38-manylinux2010_i686.whl\ngs://***/master/8121a1172413214a774a7efabb32fde268133498-143078997-98/apache_beam-2.23.0.dev0-cp38-cp38-manylinux2010_x86_64.whl\ngs://***/master/8121a1172413214a774a7efabb32fde268133498-143078997-98/event.json\ngs://***/master/8121a1172413214a774a7efabb32fde268133498-143078997-98/github_action_info\n\nBefore merging\nBefore merging it is required to setup related secrets:\n\nGCP_PROJECT_ID - ID of the Google Cloud project e.g: apache-beam-testing\nGCP_SA_EMAIL - Service account email address to use for authentication. Service account requires Storage Object Admin role. e.g.: beam-wheels-staging-sa@bapache-beam-testing.iam.gserviceaccount.com\nGCP_SA_KEY - The service account key which will be used for authentication. Service account requires Storage Object Admin role. This key should be created, encoded as a Base64 string (eg. cat my-key.json | base64 on macOS)\nEdit: since 992ee80 this is not required anymore.  GCP_BUCKET - name of the GCS Bucket e.g: beam-wheels-staging\n\nStaging Bucket settings\nFor practical reasons staging bucket shall have versioning and lifecycle management.\nObject versioning\nit will keep previous versions of uploaded files in case of rerunning workflow.\ne.g. paths:\n\ngs://bucket-name/branch-name/8121a1...-140818789/  - first build\ngs://bucket-name/branch-name/8121a1...-140818789/  - rerun workflow, new files versions\ngs://bucket-name/branch-name/2323b0...-140818794/  - new commit\n\nObject versioning cen be enabled by command:\ngsutil versioning set on gs://[BUCKET_NAME]\n\nhttps://cloud.google.com/storage/docs/using-object-versioning\nLifecycle management\nLifecycle management is able to delete files which are older than some given age.\nIt will prevent accumulating old files.\nI propose lifecycle settings as follows:\n{\n   \"lifecycle\": {\n      \"rule\": [\n         {\n            \"action\": {\n               \"type\": \"Delete\"\n            },\n            \"condition\": {\n               \"age\": 365,\n               \"isLive\": true\n            }\n         },\n         {\n            \"action\": {\n               \"type\": \"Delete\"\n            },\n            \"condition\": {\n               \"age\": 90,\n               \"isLive\": false\n            }\n         }\n      ]\n   }\n}\ngsutil commnad:\ngsutil lifecycle set lifecycle.json gs://[BUCKET_NAME]\n\nhttps://cloud.google.com/storage/docs/managing-lifecycles\nJIRA\nSubtask of BEAM-9388 - Consider using github actions for building python wheels and more (aka. Transition from Travis)\n\nThank you for your contribution! Follow this checklist to help us incorporate your contribution quickly and easily:\n\n Choose reviewer(s) and mention them in a comment (R: @username).\n Format the pull request title like [BEAM-XXX] Fixes bug in ApproximateQuantiles, where you replace BEAM-XXX with the appropriate JIRA issue, if applicable. This will automatically link the pull request to the issue.\n Update CHANGES.md with noteworthy changes.\n If this contribution is large, please file an Apache Individual Contributor License Agreement.\n\nSee the Contributor Guide for more tips on how to make review process smoother.\nPost-Commit Tests Status (on master branch)\n\n\n\nLang\nSDK\nApex\nDataflow\nFlink\nGearpump\nSamza\nSpark\n\n\n\n\nGo\n\n---\n---\n\n---\n---\n\n\n\nJava\n\n\n\n\n\n\n\n\n\nPython\n\n---\n\n\n---\n---\n\n\n\nXLang\n---\n---\n---\n\n---\n---\n\n\n\n\nPre-Commit Tests Status (on master branch)\n\n\n\n---\nJava\nPython\nGo\nWebsite\n\n\n\n\nNon-portable\n\n\n\n\n\n\nPortable\n---\n\n---\n---\n\n\n\nSee .test-infra/jenkins/README for trigger phrase, status and link of all Jenkins jobs.", "createdAt": "2020-06-01T14:17:37Z", "url": "https://github.com/apache/beam/pull/11877", "merged": true, "mergeCommit": {"oid": "8a54c17235f768f089b36265d79e69ee9b27a2ce"}, "closed": true, "closedAt": "2020-06-29T16:56:16Z", "author": {"login": "TobKed"}, "timelineItems": {"totalCount": 31, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcnF_yyAFqTQyMjE0NDk0Ng==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcwEBPEgFqTQzOTMzMTUyOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyMTQ0OTQ2", "url": "https://github.com/apache/beam/pull/11877#pullrequestreview-422144946", "createdAt": "2020-06-01T20:08:18Z", "commit": {"oid": "4c564874666d4b1fb691a3b557d506b11b8d86d5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQyMDowODoxOFrOGdYZBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQyMDowODoxOFrOGdYZBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzQ2MTUxMQ==", "bodyText": "Should we pin the version of python here?", "url": "https://github.com/apache/beam/pull/11877#discussion_r433461511", "createdAt": "2020-06-01T20:08:18Z", "author": {"login": "epicfaace"}, "path": ".github/workflows/build_wheels.yml", "diffHunk": "@@ -0,0 +1,91 @@\n+on: [push]\n+name: Build python wheels\n+\n+\n+jobs:\n+\n+  build_source:\n+    runs-on: ubuntu-18.04\n+    steps:\n+      - name: Checkout code\n+        uses: actions/checkout@v2\n+      - name: Install python\n+        uses: actions/setup-python@v1", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c564874666d4b1fb691a3b557d506b11b8d86d5"}, "originalPosition": 13}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "391627b254948f2b82627aa87c79360947f5dacd", "author": {"user": {"login": "TobKed", "name": "Tobiasz K\u0119dzierski"}}, "url": "https://github.com/apache/beam/commit/391627b254948f2b82627aa87c79360947f5dacd", "committedDate": "2020-06-02T09:53:25Z", "message": "fixup! Build python wheels on GItHub actions for Linux and MacOS"}, "afterCommit": {"oid": "557209a3e876d489d52d05c85c3a89a5aba48ed5", "author": {"user": {"login": "TobKed", "name": "Tobiasz K\u0119dzierski"}}, "url": "https://github.com/apache/beam/commit/557209a3e876d489d52d05c85c3a89a5aba48ed5", "committedDate": "2020-06-03T13:28:33Z", "message": "Build python wheels on GItHub actions for Linux and MacOS"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzNzU3MzUx", "url": "https://github.com/apache/beam/pull/11877#pullrequestreview-423757351", "createdAt": "2020-06-03T17:02:56Z", "commit": {"oid": "c9282b21d37ab619cb647b509c791f9d0cfeed69"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxNzowMjo1NlrOGelRSw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxNzoxNDo0MlrOGelrGQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDcyMTA5OQ==", "bodyText": "@tvalentyn - is py3.8 ready to be added here?", "url": "https://github.com/apache/beam/pull/11877#discussion_r434721099", "createdAt": "2020-06-03T17:02:56Z", "author": {"login": "aaltay"}, "path": ".github/workflows/build_wheels.yml", "diffHunk": "@@ -0,0 +1,141 @@\n+name: Build python wheels\n+\n+on:\n+  push:\n+    branches:\n+      - master\n+      - release-*\n+    tags:\n+      - v*\n+\n+jobs:\n+\n+  build_source:\n+    runs-on: ubuntu-18.04\n+    steps:\n+      - name: Checkout code\n+        uses: actions/checkout@v2\n+      - name: Install python\n+        uses: actions/setup-python@v2\n+        with:\n+          python-version: 3.7\n+      - name: Get build dependencies\n+        working-directory: ./sdks/python\n+        run: python3 -m pip install cython && python3 -m pip install -r build-requirements.txt\n+      - name: Install wheels\n+        run: python3 -m pip install wheel\n+      - name: Buld source\n+        working-directory: ./sdks/python\n+        run: python3 setup.py sdist --formats=gztar,zip\n+      - name: Unzip source\n+        working-directory: ./sdks/python\n+        run: unzip dist/$(ls dist | grep .zip | head -n 1)\n+      - name: Rename source directory\n+        working-directory: ./sdks/python\n+        run: mv $(ls | grep apache-beam) apache-beam-source\n+      - name: Upload source\n+        uses: actions/upload-artifact@v2\n+        with:\n+          name: source\n+          path: sdks/python/apache-beam-source\n+      - name: Upload compressed sources\n+        uses: actions/upload-artifact@v2\n+        with:\n+          name: source_gztar_zip\n+          path: sdks/python/dist\n+\n+  prepare_gcs:\n+    name: Prepare GCS\n+    needs: build_source\n+    runs-on: ubuntu-18.04\n+    steps:\n+      - name: Authenticate on GCP\n+        uses: GoogleCloudPlatform/github-actions/setup-gcloud@master\n+        with:\n+          service_account_email: ${{ secrets.CCP_SA_EMAIL }}\n+          service_account_key: ${{ secrets.CCP_SA_KEY }}\n+      - name: Remove existing files on GCS bucket\n+        run: gsutil rm -r \"gs://${{ secrets.CCP_BUCKET }}/${GITHUB_REF##*/}/\" || true\n+\n+  upload_source_to_gcs:\n+    name: Upload source to GCS bucket\n+    needs: prepare_gcs\n+    runs-on: ubuntu-18.04\n+    steps:\n+      - name: Download wheels\n+        uses: actions/download-artifact@v2\n+        with:\n+          name: source_gztar_zip\n+          path: source/\n+      - name: Authenticate on GCP\n+        uses: GoogleCloudPlatform/github-actions/setup-gcloud@master\n+        with:\n+          service_account_email: ${{ secrets.CCP_SA_EMAIL }}\n+          service_account_key: ${{ secrets.CCP_SA_KEY }}\n+      - name: Copy sources to GCS bucket\n+        run: gsutil cp -r -a public-read source/* gs://${{ secrets.CCP_BUCKET }}/${GITHUB_REF##*/}/\n+      - name: List sources on GCS bucket\n+        run: |\n+          gsutil ls \"gs://${{ secrets.CCP_BUCKET }}/${GITHUB_REF##*/}/*.tar.gz\"\n+          gsutil ls \"gs://${{ secrets.CCP_BUCKET }}/${GITHUB_REF##*/}/*.zip\"\n+\n+  build_wheels:\n+    name: Build wheels on ${{ matrix.os }}\n+    needs: prepare_gcs\n+    runs-on: ${{ matrix.os }}\n+    strategy:\n+      matrix:\n+        os : [ubuntu-18.04, macos-10.15]\n+    steps:\n+    - name: Download source\n+      uses: actions/download-artifact@v2\n+      with:\n+        name: source\n+        path: apache-beam-source\n+    - name: Install Python\n+      uses: actions/setup-python@v2\n+      with:\n+        python-version: 3.7\n+    - name: Install packages on Mac\n+      if: startsWith(matrix.os, 'macos')\n+      run: |\n+        brew update\n+        brew install pkg-config\n+    - name: Install cibuildwheel\n+      run: pip install cibuildwheel==1.4.2\n+    - name: Build wheel\n+      working-directory: apache-beam-source\n+      env:\n+        CIBW_BUILD: cp27-* cp35-* cp36-* cp37-*", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c9282b21d37ab619cb647b509c791f9d0cfeed69"}, "originalPosition": 109}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDcyMTc1Nw==", "bodyText": "I am not familiar with github ci. This is a question for my learning. Does each build step (job?) work in a different os environment?", "url": "https://github.com/apache/beam/pull/11877#discussion_r434721757", "createdAt": "2020-06-03T17:04:03Z", "author": {"login": "aaltay"}, "path": ".github/workflows/build_wheels.yml", "diffHunk": "@@ -0,0 +1,141 @@\n+name: Build python wheels\n+\n+on:\n+  push:\n+    branches:\n+      - master\n+      - release-*\n+    tags:\n+      - v*\n+\n+jobs:\n+\n+  build_source:\n+    runs-on: ubuntu-18.04", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c9282b21d37ab619cb647b509c791f9d0cfeed69"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDcyMjc3MA==", "bodyText": "Should we use ubuntu-20.04 instead?\n(Apparently this is now supported: actions/virtual-environments#228)", "url": "https://github.com/apache/beam/pull/11877#discussion_r434722770", "createdAt": "2020-06-03T17:05:53Z", "author": {"login": "aaltay"}, "path": ".github/workflows/build_wheels.yml", "diffHunk": "@@ -0,0 +1,141 @@\n+name: Build python wheels\n+\n+on:\n+  push:\n+    branches:\n+      - master\n+      - release-*\n+    tags:\n+      - v*\n+\n+jobs:\n+\n+  build_source:\n+    runs-on: ubuntu-18.04", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c9282b21d37ab619cb647b509c791f9d0cfeed69"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDcyNDE1Nw==", "bodyText": "What does this do? Is it re-compressing the source folder. I wonder if we can use the sdist output as it?\n(Ideally the resulting GCS output look something close enoguh to a release output, e.g. https://dist.apache.org/repos/dist/release/beam/2.21.0/python/ )", "url": "https://github.com/apache/beam/pull/11877#discussion_r434724157", "createdAt": "2020-06-03T17:08:18Z", "author": {"login": "aaltay"}, "path": ".github/workflows/build_wheels.yml", "diffHunk": "@@ -0,0 +1,141 @@\n+name: Build python wheels\n+\n+on:\n+  push:\n+    branches:\n+      - master\n+      - release-*\n+    tags:\n+      - v*\n+\n+jobs:\n+\n+  build_source:\n+    runs-on: ubuntu-18.04\n+    steps:\n+      - name: Checkout code\n+        uses: actions/checkout@v2\n+      - name: Install python\n+        uses: actions/setup-python@v2\n+        with:\n+          python-version: 3.7\n+      - name: Get build dependencies\n+        working-directory: ./sdks/python\n+        run: python3 -m pip install cython && python3 -m pip install -r build-requirements.txt\n+      - name: Install wheels\n+        run: python3 -m pip install wheel\n+      - name: Buld source\n+        working-directory: ./sdks/python\n+        run: python3 setup.py sdist --formats=gztar,zip\n+      - name: Unzip source\n+        working-directory: ./sdks/python\n+        run: unzip dist/$(ls dist | grep .zip | head -n 1)\n+      - name: Rename source directory\n+        working-directory: ./sdks/python\n+        run: mv $(ls | grep apache-beam) apache-beam-source\n+      - name: Upload source\n+        uses: actions/upload-artifact@v2\n+        with:\n+          name: source\n+          path: sdks/python/apache-beam-source\n+      - name: Upload compressed sources\n+        uses: actions/upload-artifact@v2\n+        with:\n+          name: source_gztar_zip", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c9282b21d37ab619cb647b509c791f9d0cfeed69"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDcyNzcwNQ==", "bodyText": "Are we planning to add windows here or to another file?", "url": "https://github.com/apache/beam/pull/11877#discussion_r434727705", "createdAt": "2020-06-03T17:14:42Z", "author": {"login": "aaltay"}, "path": ".github/workflows/build_wheels.yml", "diffHunk": "@@ -0,0 +1,141 @@\n+name: Build python wheels\n+\n+on:\n+  push:\n+    branches:\n+      - master\n+      - release-*\n+    tags:\n+      - v*\n+\n+jobs:\n+\n+  build_source:\n+    runs-on: ubuntu-18.04\n+    steps:\n+      - name: Checkout code\n+        uses: actions/checkout@v2\n+      - name: Install python\n+        uses: actions/setup-python@v2\n+        with:\n+          python-version: 3.7\n+      - name: Get build dependencies\n+        working-directory: ./sdks/python\n+        run: python3 -m pip install cython && python3 -m pip install -r build-requirements.txt\n+      - name: Install wheels\n+        run: python3 -m pip install wheel\n+      - name: Buld source\n+        working-directory: ./sdks/python\n+        run: python3 setup.py sdist --formats=gztar,zip\n+      - name: Unzip source\n+        working-directory: ./sdks/python\n+        run: unzip dist/$(ls dist | grep .zip | head -n 1)\n+      - name: Rename source directory\n+        working-directory: ./sdks/python\n+        run: mv $(ls | grep apache-beam) apache-beam-source\n+      - name: Upload source\n+        uses: actions/upload-artifact@v2\n+        with:\n+          name: source\n+          path: sdks/python/apache-beam-source\n+      - name: Upload compressed sources\n+        uses: actions/upload-artifact@v2\n+        with:\n+          name: source_gztar_zip\n+          path: sdks/python/dist\n+\n+  prepare_gcs:\n+    name: Prepare GCS\n+    needs: build_source\n+    runs-on: ubuntu-18.04\n+    steps:\n+      - name: Authenticate on GCP\n+        uses: GoogleCloudPlatform/github-actions/setup-gcloud@master\n+        with:\n+          service_account_email: ${{ secrets.CCP_SA_EMAIL }}\n+          service_account_key: ${{ secrets.CCP_SA_KEY }}\n+      - name: Remove existing files on GCS bucket\n+        run: gsutil rm -r \"gs://${{ secrets.CCP_BUCKET }}/${GITHUB_REF##*/}/\" || true\n+\n+  upload_source_to_gcs:\n+    name: Upload source to GCS bucket\n+    needs: prepare_gcs\n+    runs-on: ubuntu-18.04\n+    steps:\n+      - name: Download wheels\n+        uses: actions/download-artifact@v2\n+        with:\n+          name: source_gztar_zip\n+          path: source/\n+      - name: Authenticate on GCP\n+        uses: GoogleCloudPlatform/github-actions/setup-gcloud@master\n+        with:\n+          service_account_email: ${{ secrets.CCP_SA_EMAIL }}\n+          service_account_key: ${{ secrets.CCP_SA_KEY }}\n+      - name: Copy sources to GCS bucket\n+        run: gsutil cp -r -a public-read source/* gs://${{ secrets.CCP_BUCKET }}/${GITHUB_REF##*/}/\n+      - name: List sources on GCS bucket\n+        run: |\n+          gsutil ls \"gs://${{ secrets.CCP_BUCKET }}/${GITHUB_REF##*/}/*.tar.gz\"\n+          gsutil ls \"gs://${{ secrets.CCP_BUCKET }}/${GITHUB_REF##*/}/*.zip\"\n+\n+  build_wheels:\n+    name: Build wheels on ${{ matrix.os }}\n+    needs: prepare_gcs\n+    runs-on: ${{ matrix.os }}\n+    strategy:\n+      matrix:\n+        os : [ubuntu-18.04, macos-10.15]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c9282b21d37ab619cb647b509c791f9d0cfeed69"}, "originalPosition": 88}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0MjM0OTAw", "url": "https://github.com/apache/beam/pull/11877#pullrequestreview-424234900", "createdAt": "2020-06-04T08:51:37Z", "commit": {"oid": "c9282b21d37ab619cb647b509c791f9d0cfeed69"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwODo1MTozN1rOGe8G5w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwODo1MTozN1rOGe8G5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTA5NTI3MQ==", "bodyText": "typo", "url": "https://github.com/apache/beam/pull/11877#discussion_r435095271", "createdAt": "2020-06-04T08:51:37Z", "author": {"login": "kamilwu"}, "path": ".github/workflows/build_wheels.yml", "diffHunk": "@@ -0,0 +1,141 @@\n+name: Build python wheels\n+\n+on:\n+  push:\n+    branches:\n+      - master\n+      - release-*\n+    tags:\n+      - v*\n+\n+jobs:\n+\n+  build_source:\n+    runs-on: ubuntu-18.04\n+    steps:\n+      - name: Checkout code\n+        uses: actions/checkout@v2\n+      - name: Install python\n+        uses: actions/setup-python@v2\n+        with:\n+          python-version: 3.7\n+      - name: Get build dependencies\n+        working-directory: ./sdks/python\n+        run: python3 -m pip install cython && python3 -m pip install -r build-requirements.txt\n+      - name: Install wheels\n+        run: python3 -m pip install wheel\n+      - name: Buld source", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c9282b21d37ab619cb647b509c791f9d0cfeed69"}, "originalPosition": 27}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0MjQwNjc1", "url": "https://github.com/apache/beam/pull/11877#pullrequestreview-424240675", "createdAt": "2020-06-04T08:58:43Z", "commit": {"oid": "c9282b21d37ab619cb647b509c791f9d0cfeed69"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwODo1ODo0M1rOGe8X1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwODo1ODo0M1rOGe8X1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTA5OTYwNw==", "bodyText": "Do we need higher verbosity normally?", "url": "https://github.com/apache/beam/pull/11877#discussion_r435099607", "createdAt": "2020-06-04T08:58:43Z", "author": {"login": "kamilwu"}, "path": ".github/workflows/build_wheels.yml", "diffHunk": "@@ -0,0 +1,141 @@\n+name: Build python wheels\n+\n+on:\n+  push:\n+    branches:\n+      - master\n+      - release-*\n+    tags:\n+      - v*\n+\n+jobs:\n+\n+  build_source:\n+    runs-on: ubuntu-18.04\n+    steps:\n+      - name: Checkout code\n+        uses: actions/checkout@v2\n+      - name: Install python\n+        uses: actions/setup-python@v2\n+        with:\n+          python-version: 3.7\n+      - name: Get build dependencies\n+        working-directory: ./sdks/python\n+        run: python3 -m pip install cython && python3 -m pip install -r build-requirements.txt\n+      - name: Install wheels\n+        run: python3 -m pip install wheel\n+      - name: Buld source\n+        working-directory: ./sdks/python\n+        run: python3 setup.py sdist --formats=gztar,zip\n+      - name: Unzip source\n+        working-directory: ./sdks/python\n+        run: unzip dist/$(ls dist | grep .zip | head -n 1)\n+      - name: Rename source directory\n+        working-directory: ./sdks/python\n+        run: mv $(ls | grep apache-beam) apache-beam-source\n+      - name: Upload source\n+        uses: actions/upload-artifact@v2\n+        with:\n+          name: source\n+          path: sdks/python/apache-beam-source\n+      - name: Upload compressed sources\n+        uses: actions/upload-artifact@v2\n+        with:\n+          name: source_gztar_zip\n+          path: sdks/python/dist\n+\n+  prepare_gcs:\n+    name: Prepare GCS\n+    needs: build_source\n+    runs-on: ubuntu-18.04\n+    steps:\n+      - name: Authenticate on GCP\n+        uses: GoogleCloudPlatform/github-actions/setup-gcloud@master\n+        with:\n+          service_account_email: ${{ secrets.CCP_SA_EMAIL }}\n+          service_account_key: ${{ secrets.CCP_SA_KEY }}\n+      - name: Remove existing files on GCS bucket\n+        run: gsutil rm -r \"gs://${{ secrets.CCP_BUCKET }}/${GITHUB_REF##*/}/\" || true\n+\n+  upload_source_to_gcs:\n+    name: Upload source to GCS bucket\n+    needs: prepare_gcs\n+    runs-on: ubuntu-18.04\n+    steps:\n+      - name: Download wheels\n+        uses: actions/download-artifact@v2\n+        with:\n+          name: source_gztar_zip\n+          path: source/\n+      - name: Authenticate on GCP\n+        uses: GoogleCloudPlatform/github-actions/setup-gcloud@master\n+        with:\n+          service_account_email: ${{ secrets.CCP_SA_EMAIL }}\n+          service_account_key: ${{ secrets.CCP_SA_KEY }}\n+      - name: Copy sources to GCS bucket\n+        run: gsutil cp -r -a public-read source/* gs://${{ secrets.CCP_BUCKET }}/${GITHUB_REF##*/}/\n+      - name: List sources on GCS bucket\n+        run: |\n+          gsutil ls \"gs://${{ secrets.CCP_BUCKET }}/${GITHUB_REF##*/}/*.tar.gz\"\n+          gsutil ls \"gs://${{ secrets.CCP_BUCKET }}/${GITHUB_REF##*/}/*.zip\"\n+\n+  build_wheels:\n+    name: Build wheels on ${{ matrix.os }}\n+    needs: prepare_gcs\n+    runs-on: ${{ matrix.os }}\n+    strategy:\n+      matrix:\n+        os : [ubuntu-18.04, macos-10.15]\n+    steps:\n+    - name: Download source\n+      uses: actions/download-artifact@v2\n+      with:\n+        name: source\n+        path: apache-beam-source\n+    - name: Install Python\n+      uses: actions/setup-python@v2\n+      with:\n+        python-version: 3.7\n+    - name: Install packages on Mac\n+      if: startsWith(matrix.os, 'macos')\n+      run: |\n+        brew update\n+        brew install pkg-config\n+    - name: Install cibuildwheel\n+      run: pip install cibuildwheel==1.4.2\n+    - name: Build wheel\n+      working-directory: apache-beam-source\n+      env:\n+        CIBW_BUILD: cp27-* cp35-* cp36-* cp37-*\n+        CIBW_BUILD_VERBOSITY: 3", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c9282b21d37ab619cb647b509c791f9d0cfeed69"}, "originalPosition": 110}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0MjUxMjU1", "url": "https://github.com/apache/beam/pull/11877#pullrequestreview-424251255", "createdAt": "2020-06-04T09:11:55Z", "commit": {"oid": "c9282b21d37ab619cb647b509c791f9d0cfeed69"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwOToxMTo1NVrOGe83gw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwOToxMTo1NVrOGe83gw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTEwNzcxNQ==", "bodyText": "I think we don't need cython at this point, since it's installed and used in build_wheels job. Most probably the same applies to wheels.", "url": "https://github.com/apache/beam/pull/11877#discussion_r435107715", "createdAt": "2020-06-04T09:11:55Z", "author": {"login": "kamilwu"}, "path": ".github/workflows/build_wheels.yml", "diffHunk": "@@ -0,0 +1,141 @@\n+name: Build python wheels\n+\n+on:\n+  push:\n+    branches:\n+      - master\n+      - release-*\n+    tags:\n+      - v*\n+\n+jobs:\n+\n+  build_source:\n+    runs-on: ubuntu-18.04\n+    steps:\n+      - name: Checkout code\n+        uses: actions/checkout@v2\n+      - name: Install python\n+        uses: actions/setup-python@v2\n+        with:\n+          python-version: 3.7\n+      - name: Get build dependencies\n+        working-directory: ./sdks/python\n+        run: python3 -m pip install cython && python3 -m pip install -r build-requirements.txt", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c9282b21d37ab619cb647b509c791f9d0cfeed69"}, "originalPosition": 24}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c7d96304f2fc2646f547b2d5af6b0a422e479b67", "author": {"user": {"login": "TobKed", "name": "Tobiasz K\u0119dzierski"}}, "url": "https://github.com/apache/beam/commit/c7d96304f2fc2646f547b2d5af6b0a422e479b67", "committedDate": "2020-06-05T17:07:08Z", "message": "Refactor trigger events"}, "afterCommit": {"oid": "32cdf7a8e0834817ee439ded282529834c20c561", "author": {"user": {"login": "TobKed", "name": "Tobiasz K\u0119dzierski"}}, "url": "https://github.com/apache/beam/commit/32cdf7a8e0834817ee439ded282529834c20c561", "committedDate": "2020-06-08T23:00:39Z", "message": "Upload files to GCS only for pushes to relese and release candidate branches"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f53ac909c692fd9d5205cb759877bfee4c7ceac3", "author": {"user": {"login": "TobKed", "name": "Tobiasz K\u0119dzierski"}}, "url": "https://github.com/apache/beam/commit/f53ac909c692fd9d5205cb759877bfee4c7ceac3", "committedDate": "2020-06-16T09:03:06Z", "message": "Build python wheels on GItHub actions for Linux and MacOS"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "025f6d8e68432a2b1cd5913cd5d65ec18833bd74", "author": {"user": {"login": "TobKed", "name": "Tobiasz K\u0119dzierski"}}, "url": "https://github.com/apache/beam/commit/025f6d8e68432a2b1cd5913cd5d65ec18833bd74", "committedDate": "2020-06-16T09:03:06Z", "message": "Add licence header"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b80ee1f06ad7e3bde24d2062d75141c2fbe07fb9", "author": {"user": {"login": "TobKed", "name": "Tobiasz K\u0119dzierski"}}, "url": "https://github.com/apache/beam/commit/b80ee1f06ad7e3bde24d2062d75141c2fbe07fb9", "committedDate": "2020-06-16T09:03:06Z", "message": "Set environments labels to the 'latest'"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b38e8f22851aff0164dd0004ae5a855ee73cee2", "author": {"user": {"login": "TobKed", "name": "Tobiasz K\u0119dzierski"}}, "url": "https://github.com/apache/beam/commit/5b38e8f22851aff0164dd0004ae5a855ee73cee2", "committedDate": "2020-06-16T09:03:06Z", "message": "Fix typos"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3e86ab61d47e208b1768d8eef999f72eaffdf5ea", "author": {"user": {"login": "TobKed", "name": "Tobiasz K\u0119dzierski"}}, "url": "https://github.com/apache/beam/commit/3e86ab61d47e208b1768d8eef999f72eaffdf5ea", "committedDate": "2020-06-16T09:03:06Z", "message": "Use default verbosity for cibuildwheel"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "17370b9dbeeda822b2522604d52f09fe596faa8b", "author": {"user": {"login": "TobKed", "name": "Tobiasz K\u0119dzierski"}}, "url": "https://github.com/apache/beam/commit/17370b9dbeeda822b2522604d52f09fe596faa8b", "committedDate": "2020-06-16T09:03:06Z", "message": "Add Python 3.8 version for wheels"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "730ccf39de81ddbd3d2f91cf3df02f67df4295c7", "author": {"user": {"login": "TobKed", "name": "Tobiasz K\u0119dzierski"}}, "url": "https://github.com/apache/beam/commit/730ccf39de81ddbd3d2f91cf3df02f67df4295c7", "committedDate": "2020-06-16T09:03:06Z", "message": "Simplify steps"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c9e6dd6aabd30b768cae575aa1e00767b836d88", "author": {"user": {"login": "TobKed", "name": "Tobiasz K\u0119dzierski"}}, "url": "https://github.com/apache/beam/commit/8c9e6dd6aabd30b768cae575aa1e00767b836d88", "committedDate": "2020-06-16T09:03:07Z", "message": "Refactor trigger events"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cefa392096b7e3929dc81215fa0c3dc9c58ce944", "author": {"user": {"login": "TobKed", "name": "Tobiasz K\u0119dzierski"}}, "url": "https://github.com/apache/beam/commit/cefa392096b7e3929dc81215fa0c3dc9c58ce944", "committedDate": "2020-06-16T09:03:07Z", "message": "List files uploaded to GCS in seperate job"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "91c5b22a186a8d458cf510128583d28d7291589e", "author": {"user": {"login": "TobKed", "name": "Tobiasz K\u0119dzierski"}}, "url": "https://github.com/apache/beam/commit/91c5b22a186a8d458cf510128583d28d7291589e", "committedDate": "2020-06-16T09:03:07Z", "message": "Update step naming"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dc9eac2fcb67ee6f0da455a6c12f74f6e72cb610", "author": {"user": {"login": "TobKed", "name": "Tobiasz K\u0119dzierski"}}, "url": "https://github.com/apache/beam/commit/dc9eac2fcb67ee6f0da455a6c12f74f6e72cb610", "committedDate": "2020-06-16T09:03:07Z", "message": "Add nightly master build with automatic tagging"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "877a082868bd60e97ea14b7350f2b7ed48b50e59", "author": {"user": {"login": "TobKed", "name": "Tobiasz K\u0119dzierski"}}, "url": "https://github.com/apache/beam/commit/877a082868bd60e97ea14b7350f2b7ed48b50e59", "committedDate": "2020-06-16T09:03:07Z", "message": "Cancel running builds on second push to PR\n\nBased on Apache Airflow cancel workflow\nhttps://github.com/apache/airflow/blob/master/.github/workflows/cancel.yml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e57eecf6e3100ad81531e40216dc3492d909ff1b", "author": {"user": {"login": "TobKed", "name": "Tobiasz K\u0119dzierski"}}, "url": "https://github.com/apache/beam/commit/e57eecf6e3100ad81531e40216dc3492d909ff1b", "committedDate": "2020-06-16T09:03:07Z", "message": "Upload files to GCS only for pushes to relese and release candidate branches"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "40c5934b48aff6de0def63dbb4314271f52a31bb", "author": {"user": {"login": "TobKed", "name": "Tobiasz K\u0119dzierski"}}, "url": "https://github.com/apache/beam/commit/40c5934b48aff6de0def63dbb4314271f52a31bb", "committedDate": "2020-06-16T09:03:07Z", "message": "Add pattern to match release candidate branch"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dc0cde5c8622edfef2176c30d8571587b8f1fb18", "author": {"user": {"login": "TobKed", "name": "Tobiasz K\u0119dzierski"}}, "url": "https://github.com/apache/beam/commit/dc0cde5c8622edfef2176c30d8571587b8f1fb18", "committedDate": "2020-06-16T09:03:07Z", "message": "Add paths filter for pull requests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "349f6f0022e86f07a9b4e2a136d8b6fca100ec2a", "author": {"user": {"login": "TobKed", "name": "Tobiasz K\u0119dzierski"}}, "url": "https://github.com/apache/beam/commit/349f6f0022e86f07a9b4e2a136d8b6fca100ec2a", "committedDate": "2020-06-16T09:03:07Z", "message": "fixup! Add paths filter for pull requests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f675d003780f9ec162c30921ed8c3d5eb966ddb3", "author": {"user": {"login": "TobKed", "name": "Tobiasz K\u0119dzierski"}}, "url": "https://github.com/apache/beam/commit/f675d003780f9ec162c30921ed8c3d5eb966ddb3", "committedDate": "2020-06-16T09:03:07Z", "message": "fixup! Cancel running builds on second push to PR"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5581b661e955b40069de0167d2f392a7314f7fd3", "author": {"user": {"login": "TobKed", "name": "Tobiasz K\u0119dzierski"}}, "url": "https://github.com/apache/beam/commit/5581b661e955b40069de0167d2f392a7314f7fd3", "committedDate": "2020-06-10T15:52:24Z", "message": "fixup! Cancel running builds on second push to PR"}, "afterCommit": {"oid": "f675d003780f9ec162c30921ed8c3d5eb966ddb3", "author": {"user": {"login": "TobKed", "name": "Tobiasz K\u0119dzierski"}}, "url": "https://github.com/apache/beam/commit/f675d003780f9ec162c30921ed8c3d5eb966ddb3", "committedDate": "2020-06-16T09:03:07Z", "message": "fixup! Cancel running builds on second push to PR"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9772965ef5fb60546b224022c3ecc7fa3a727634", "author": {"user": {"login": "TobKed", "name": "Tobiasz K\u0119dzierski"}}, "url": "https://github.com/apache/beam/commit/9772965ef5fb60546b224022c3ecc7fa3a727634", "committedDate": "2020-06-18T16:34:32Z", "message": "Fix trigering patterns"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2323b009507680798737fed815ea962ae40aabef", "author": {"user": {"login": "TobKed", "name": "Tobiasz K\u0119dzierski"}}, "url": "https://github.com/apache/beam/commit/2323b009507680798737fed815ea962ae40aabef", "committedDate": "2020-06-19T13:05:39Z", "message": "Upload additional files with information about buld"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6237068ac587f284cd6636e4a412dab0b07a4bac", "author": {"user": {"login": "TobKed", "name": "Tobiasz K\u0119dzierski"}}, "url": "https://github.com/apache/beam/commit/6237068ac587f284cd6636e4a412dab0b07a4bac", "committedDate": "2020-06-19T13:53:41Z", "message": "Hange GCS path for uploading artifacts to prevent overwriting during rerun\n\nPreviously every build on given branch would ovewrite files:\n\tgs://bucket-name/branch-name/  # first build\n\tgs://bucket-name/branch-name/  # rerun worklow\n\tgs://bucket-name/branch-name/  # new commit\n\nNow they will be differentiated:\n\tgs://bucket-name/branch-name/8121a1...-140818789/  # first build\n\tgs://bucket-name/branch-name/8121a1...-140818789/  # rerun worklow, new files versions\n\tgs://bucket-name/branch-name/2323b0...-140818794/  # new commit\n\nWersions of reruns files could be checked with objects versioning\n  (if enabled on the bucket)\n\nIt will allow better builds tracking: e.g. night-builds"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9559e71e8b7671cb263f92ef10c870042040bd72", "author": {"user": {"login": "TobKed", "name": "Tobiasz K\u0119dzierski"}}, "url": "https://github.com/apache/beam/commit/9559e71e8b7671cb263f92ef10c870042040bd72", "committedDate": "2020-06-19T13:50:55Z", "message": "Hange GCS path for uploading artifacts to prevent overwriting during rerun\n\nPreviously every build on given branch would ovewrite files:\n\tgs://bucket-name/branch-name/  # first build\n\tgs://bucket-name/branch-name/  # rerun worklow\n\tgs://bucket-name/branch-name/  # new commit\n\nNow they will be differentiated:\n\tgs://bucket-name/branch-name/8121a1...-140818789/  # first build\n\tgs://bucket-name/branch-name/8121a1...-140818789/  # rerun worklow, new files versions\n\tgs://bucket-name/branch-name/2323b0...-140818794/  # new commit\n\nWersions of reruns files could be checked with objects versioning\n  (if enabled on the bucket)\n\nIt will allow better builds tracking: e.g. night-builds"}, "afterCommit": {"oid": "6237068ac587f284cd6636e4a412dab0b07a4bac", "author": {"user": {"login": "TobKed", "name": "Tobiasz K\u0119dzierski"}}, "url": "https://github.com/apache/beam/commit/6237068ac587f284cd6636e4a412dab0b07a4bac", "committedDate": "2020-06-19T13:53:41Z", "message": "Hange GCS path for uploading artifacts to prevent overwriting during rerun\n\nPreviously every build on given branch would ovewrite files:\n\tgs://bucket-name/branch-name/  # first build\n\tgs://bucket-name/branch-name/  # rerun worklow\n\tgs://bucket-name/branch-name/  # new commit\n\nNow they will be differentiated:\n\tgs://bucket-name/branch-name/8121a1...-140818789/  # first build\n\tgs://bucket-name/branch-name/8121a1...-140818789/  # rerun worklow, new files versions\n\tgs://bucket-name/branch-name/2323b0...-140818794/  # new commit\n\nWersions of reruns files could be checked with objects versioning\n  (if enabled on the bucket)\n\nIt will allow better builds tracking: e.g. night-builds"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "992ee80003573d1a9e3b536ddc9bc41f30e5d08b", "author": {"user": {"login": "TobKed", "name": "Tobiasz K\u0119dzierski"}}, "url": "https://github.com/apache/beam/commit/992ee80003573d1a9e3b536ddc9bc41f30e5d08b", "committedDate": "2020-06-25T06:47:32Z", "message": "Put bucket name directly into the workflow"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM5MzMxNTI5", "url": "https://github.com/apache/beam/pull/11877#pullrequestreview-439331529", "createdAt": "2020-06-29T16:55:25Z", "commit": {"oid": "992ee80003573d1a9e3b536ddc9bc41f30e5d08b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4491, "cost": 1, "resetAt": "2021-10-28T16:48:13Z"}}}