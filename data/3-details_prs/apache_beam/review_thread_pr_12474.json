{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYzNjIyNjQz", "number": 12474, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxODowODozOFrOEV8AzQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQyMDo0ODowN1rOEV_MuQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxNDM4Nzk3OnYy", "diffSide": "RIGHT", "path": "sdks/java/core/src/main/java/org/apache/beam/sdk/state/OrderedListState.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxODowODozOFrOG8-tcg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQyMDoyNzowMFrOG9DFyQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjU5NTE4Ng==", "bodyText": "Need a readRangeLater(...) too", "url": "https://github.com/apache/beam/pull/12474#discussion_r466595186", "createdAt": "2020-08-06T18:08:38Z", "author": {"login": "dpmills"}, "path": "sdks/java/core/src/main/java/org/apache/beam/sdk/state/OrderedListState.java", "diffHunk": "@@ -0,0 +1,60 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.beam.sdk.state;\n+\n+import org.apache.beam.sdk.annotations.Experimental;\n+import org.apache.beam.sdk.annotations.Experimental.Kind;\n+import org.apache.beam.sdk.values.TimestampedValue;\n+import org.joda.time.Instant;\n+\n+/**\n+ * A {@link ReadableState} cell containing a list of values sorted by timestamp. Timestamped values\n+ * can be added to the list, and subranges can be read out in order. Subranges of the list can be\n+ * deleted as well.\n+ */\n+@Experimental(Kind.STATE)\n+public interface OrderedListState<T>\n+    extends GroupingState<TimestampedValue<T>, Iterable<TimestampedValue<T>>> {\n+\n+  /** Read the entire list ordered by timestamp. */\n+  @Override\n+  Iterable<TimestampedValue<T>> read();\n+\n+  /**\n+   * Read a timestamp-limited subrange of the list. The result is ordered by timestamp.\n+   *\n+   * <p>All values with timestamps >= minTimestamp and < limitTimestamp will be in the resuling\n+   * iterable.\n+   */\n+  Iterable<TimestampedValue<T>> readRange(Instant minTimestamp, Instant limitTimestamp);\n+\n+  /** Clear all values in the list. */\n+  @Override\n+  void clear();\n+\n+  /**\n+   * Clear a timestamp-limited subrange of the list.\n+   *\n+   * <p>All values with timestamps >= minTimestamp and < limitTimestamp will be removed from the\n+   * list.\n+   */\n+  void clearRange(Instant minTimestamp, Instant limitTimestamp);\n+\n+  @Override\n+  OrderedListState<T> readLater();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "38a58fa67313c91fb86670fc74cfea3aa0f074df"}, "originalPosition": 59}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjY2Njk1Mw==", "bodyText": "Done", "url": "https://github.com/apache/beam/pull/12474#discussion_r466666953", "createdAt": "2020-08-06T20:27:00Z", "author": {"login": "reuvenlax"}, "path": "sdks/java/core/src/main/java/org/apache/beam/sdk/state/OrderedListState.java", "diffHunk": "@@ -0,0 +1,60 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.beam.sdk.state;\n+\n+import org.apache.beam.sdk.annotations.Experimental;\n+import org.apache.beam.sdk.annotations.Experimental.Kind;\n+import org.apache.beam.sdk.values.TimestampedValue;\n+import org.joda.time.Instant;\n+\n+/**\n+ * A {@link ReadableState} cell containing a list of values sorted by timestamp. Timestamped values\n+ * can be added to the list, and subranges can be read out in order. Subranges of the list can be\n+ * deleted as well.\n+ */\n+@Experimental(Kind.STATE)\n+public interface OrderedListState<T>\n+    extends GroupingState<TimestampedValue<T>, Iterable<TimestampedValue<T>>> {\n+\n+  /** Read the entire list ordered by timestamp. */\n+  @Override\n+  Iterable<TimestampedValue<T>> read();\n+\n+  /**\n+   * Read a timestamp-limited subrange of the list. The result is ordered by timestamp.\n+   *\n+   * <p>All values with timestamps >= minTimestamp and < limitTimestamp will be in the resuling\n+   * iterable.\n+   */\n+  Iterable<TimestampedValue<T>> readRange(Instant minTimestamp, Instant limitTimestamp);\n+\n+  /** Clear all values in the list. */\n+  @Override\n+  void clear();\n+\n+  /**\n+   * Clear a timestamp-limited subrange of the list.\n+   *\n+   * <p>All values with timestamps >= minTimestamp and < limitTimestamp will be removed from the\n+   * list.\n+   */\n+  void clearRange(Instant minTimestamp, Instant limitTimestamp);\n+\n+  @Override\n+  OrderedListState<T> readLater();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjU5NTE4Ng=="}, "originalCommit": {"oid": "38a58fa67313c91fb86670fc74cfea3aa0f074df"}, "originalPosition": 59}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxNDM5NjE3OnYy", "diffSide": "RIGHT", "path": "runners/google-cloud-dataflow-java/worker/src/main/java/org/apache/beam/runners/dataflow/worker/WindmillStateInternals.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxODoxMDo1OVrOG8-ylQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQyMDoyNzowOFrOG9DGAQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjU5NjUwMQ==", "bodyText": "If you are intentionally not implementing this for streaming DataflowRunner yet, better to throw an UnsupportedOperationException instead of returning null for these methods.\nAlso add a comment to the class saying that it's unsupported, maybe linking to a JIRA issue that tracks support", "url": "https://github.com/apache/beam/pull/12474#discussion_r466596501", "createdAt": "2020-08-06T18:10:59Z", "author": {"login": "dpmills"}, "path": "runners/google-cloud-dataflow-java/worker/src/main/java/org/apache/beam/runners/dataflow/worker/WindmillStateInternals.java", "diffHunk": "@@ -456,6 +470,64 @@ protected WorkItemCommitRequest persistDirectly(WindmillStateCache.ForKey cache)\n     }\n   }\n \n+  private static class WindmillOrderedList<T> extends SimpleWindmillState\n+      implements OrderedListState<T> {\n+\n+    private final StateNamespace namespace;\n+    private final StateTag<OrderedListState<T>> spec;\n+    private final ByteString stateKey;\n+    private final String stateFamily;\n+    private final Coder<T> elemCoder;\n+\n+    private WindmillOrderedList(\n+        StateNamespace namespace,\n+        StateTag<OrderedListState<T>> spec,\n+        String stateFamily,\n+        Coder<T> elemCoder,\n+        boolean isNewKey) {\n+      this.namespace = namespace;\n+      this.spec = spec;\n+      this.stateKey = encodeKey(namespace, spec);\n+      this.stateFamily = stateFamily;\n+      this.elemCoder = elemCoder;\n+    }\n+\n+    @Override\n+    public Iterable<TimestampedValue<T>> read() {\n+      return null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "38a58fa67313c91fb86670fc74cfea3aa0f074df"}, "originalPosition": 71}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjY2NzAwOQ==", "bodyText": "done", "url": "https://github.com/apache/beam/pull/12474#discussion_r466667009", "createdAt": "2020-08-06T20:27:08Z", "author": {"login": "reuvenlax"}, "path": "runners/google-cloud-dataflow-java/worker/src/main/java/org/apache/beam/runners/dataflow/worker/WindmillStateInternals.java", "diffHunk": "@@ -456,6 +470,64 @@ protected WorkItemCommitRequest persistDirectly(WindmillStateCache.ForKey cache)\n     }\n   }\n \n+  private static class WindmillOrderedList<T> extends SimpleWindmillState\n+      implements OrderedListState<T> {\n+\n+    private final StateNamespace namespace;\n+    private final StateTag<OrderedListState<T>> spec;\n+    private final ByteString stateKey;\n+    private final String stateFamily;\n+    private final Coder<T> elemCoder;\n+\n+    private WindmillOrderedList(\n+        StateNamespace namespace,\n+        StateTag<OrderedListState<T>> spec,\n+        String stateFamily,\n+        Coder<T> elemCoder,\n+        boolean isNewKey) {\n+      this.namespace = namespace;\n+      this.spec = spec;\n+      this.stateKey = encodeKey(namespace, spec);\n+      this.stateFamily = stateFamily;\n+      this.elemCoder = elemCoder;\n+    }\n+\n+    @Override\n+    public Iterable<TimestampedValue<T>> read() {\n+      return null;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjU5NjUwMQ=="}, "originalCommit": {"oid": "38a58fa67313c91fb86670fc74cfea3aa0f074df"}, "originalPosition": 71}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxNDY3NTc5OnYy", "diffSide": "RIGHT", "path": "sdks/java/core/src/main/java/org/apache/beam/sdk/state/OrderedListState.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxOTozNTowM1rOG9BgEA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQyMDoyNzoxMFrOG9DGGQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjY0MDkxMg==", "bodyText": "Don't need to include the inherited methods here.  If you do include them, include all of them, including isEmpty", "url": "https://github.com/apache/beam/pull/12474#discussion_r466640912", "createdAt": "2020-08-06T19:35:03Z", "author": {"login": "dpmills"}, "path": "sdks/java/core/src/main/java/org/apache/beam/sdk/state/OrderedListState.java", "diffHunk": "@@ -0,0 +1,60 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.beam.sdk.state;\n+\n+import org.apache.beam.sdk.annotations.Experimental;\n+import org.apache.beam.sdk.annotations.Experimental.Kind;\n+import org.apache.beam.sdk.values.TimestampedValue;\n+import org.joda.time.Instant;\n+\n+/**\n+ * A {@link ReadableState} cell containing a list of values sorted by timestamp. Timestamped values\n+ * can be added to the list, and subranges can be read out in order. Subranges of the list can be\n+ * deleted as well.\n+ */\n+@Experimental(Kind.STATE)\n+public interface OrderedListState<T>\n+    extends GroupingState<TimestampedValue<T>, Iterable<TimestampedValue<T>>> {\n+\n+  /** Read the entire list ordered by timestamp. */\n+  @Override\n+  Iterable<TimestampedValue<T>> read();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "38a58fa67313c91fb86670fc74cfea3aa0f074df"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjY2NzAzMw==", "bodyText": "Removed", "url": "https://github.com/apache/beam/pull/12474#discussion_r466667033", "createdAt": "2020-08-06T20:27:10Z", "author": {"login": "reuvenlax"}, "path": "sdks/java/core/src/main/java/org/apache/beam/sdk/state/OrderedListState.java", "diffHunk": "@@ -0,0 +1,60 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.beam.sdk.state;\n+\n+import org.apache.beam.sdk.annotations.Experimental;\n+import org.apache.beam.sdk.annotations.Experimental.Kind;\n+import org.apache.beam.sdk.values.TimestampedValue;\n+import org.joda.time.Instant;\n+\n+/**\n+ * A {@link ReadableState} cell containing a list of values sorted by timestamp. Timestamped values\n+ * can be added to the list, and subranges can be read out in order. Subranges of the list can be\n+ * deleted as well.\n+ */\n+@Experimental(Kind.STATE)\n+public interface OrderedListState<T>\n+    extends GroupingState<TimestampedValue<T>, Iterable<TimestampedValue<T>>> {\n+\n+  /** Read the entire list ordered by timestamp. */\n+  @Override\n+  Iterable<TimestampedValue<T>> read();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjY0MDkxMg=="}, "originalCommit": {"oid": "38a58fa67313c91fb86670fc74cfea3aa0f074df"}, "originalPosition": 36}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxNDY5MDE0OnYy", "diffSide": "RIGHT", "path": "sdks/java/core/src/main/java/org/apache/beam/sdk/state/OrderedListState.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxOTozOTowOVrOG9BofQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQyMDoyNzoxM1rOG9DGMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjY0MzA2OQ==", "bodyText": "Using an exclusive upper limit means that Instant(Long.MAX_VALUE) isn't a supported timestamp.  Do we care?  Regardless, document the exact supported timestamps for this interface", "url": "https://github.com/apache/beam/pull/12474#discussion_r466643069", "createdAt": "2020-08-06T19:39:09Z", "author": {"login": "dpmills"}, "path": "sdks/java/core/src/main/java/org/apache/beam/sdk/state/OrderedListState.java", "diffHunk": "@@ -0,0 +1,60 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.beam.sdk.state;\n+\n+import org.apache.beam.sdk.annotations.Experimental;\n+import org.apache.beam.sdk.annotations.Experimental.Kind;\n+import org.apache.beam.sdk.values.TimestampedValue;\n+import org.joda.time.Instant;\n+\n+/**\n+ * A {@link ReadableState} cell containing a list of values sorted by timestamp. Timestamped values\n+ * can be added to the list, and subranges can be read out in order. Subranges of the list can be\n+ * deleted as well.\n+ */\n+@Experimental(Kind.STATE)\n+public interface OrderedListState<T>\n+    extends GroupingState<TimestampedValue<T>, Iterable<TimestampedValue<T>>> {\n+\n+  /** Read the entire list ordered by timestamp. */\n+  @Override\n+  Iterable<TimestampedValue<T>> read();\n+\n+  /**\n+   * Read a timestamp-limited subrange of the list. The result is ordered by timestamp.\n+   *\n+   * <p>All values with timestamps >= minTimestamp and < limitTimestamp will be in the resuling", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "38a58fa67313c91fb86670fc74cfea3aa0f074df"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjY2NzA1OA==", "bodyText": "Added documentation to this effect.", "url": "https://github.com/apache/beam/pull/12474#discussion_r466667058", "createdAt": "2020-08-06T20:27:13Z", "author": {"login": "reuvenlax"}, "path": "sdks/java/core/src/main/java/org/apache/beam/sdk/state/OrderedListState.java", "diffHunk": "@@ -0,0 +1,60 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.beam.sdk.state;\n+\n+import org.apache.beam.sdk.annotations.Experimental;\n+import org.apache.beam.sdk.annotations.Experimental.Kind;\n+import org.apache.beam.sdk.values.TimestampedValue;\n+import org.joda.time.Instant;\n+\n+/**\n+ * A {@link ReadableState} cell containing a list of values sorted by timestamp. Timestamped values\n+ * can be added to the list, and subranges can be read out in order. Subranges of the list can be\n+ * deleted as well.\n+ */\n+@Experimental(Kind.STATE)\n+public interface OrderedListState<T>\n+    extends GroupingState<TimestampedValue<T>, Iterable<TimestampedValue<T>>> {\n+\n+  /** Read the entire list ordered by timestamp. */\n+  @Override\n+  Iterable<TimestampedValue<T>> read();\n+\n+  /**\n+   * Read a timestamp-limited subrange of the list. The result is ordered by timestamp.\n+   *\n+   * <p>All values with timestamps >= minTimestamp and < limitTimestamp will be in the resuling", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjY0MzA2OQ=="}, "originalCommit": {"oid": "38a58fa67313c91fb86670fc74cfea3aa0f074df"}, "originalPosition": 41}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxNDkxMDAxOnYy", "diffSide": "RIGHT", "path": "sdks/java/core/src/main/java/org/apache/beam/sdk/state/OrderedListState.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQyMDo0ODowN1rOG9Du1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQyMjo1OTowNlrOG9G6jw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjY3NzQ2Mw==", "bodyText": "Add a method comment", "url": "https://github.com/apache/beam/pull/12474#discussion_r466677463", "createdAt": "2020-08-06T20:48:07Z", "author": {"login": "dpmills"}, "path": "sdks/java/core/src/main/java/org/apache/beam/sdk/state/OrderedListState.java", "diffHunk": "@@ -0,0 +1,51 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.beam.sdk.state;\n+\n+import org.apache.beam.sdk.annotations.Experimental;\n+import org.apache.beam.sdk.annotations.Experimental.Kind;\n+import org.apache.beam.sdk.values.TimestampedValue;\n+import org.joda.time.Instant;\n+\n+/**\n+ * A {@link ReadableState} cell containing a list of values sorted by timestamp. Timestamped values\n+ * can be added to the list, and subranges can be read out in order. Subranges of the list can be\n+ * deleted as well.\n+ */\n+@Experimental(Kind.STATE)\n+public interface OrderedListState<T>\n+    extends GroupingState<TimestampedValue<T>, Iterable<TimestampedValue<T>>> {\n+  /**\n+   * Read a timestamp-limited subrange of the list. The result is ordered by timestamp.\n+   *\n+   * <p>All values with timestamps >= minTimestamp and < limitTimestamp will be in the resuling\n+   * iterable. This means that only timestamps strictly less than\n+   * Instant.ofEpochMilli(Long.MAX_VALUE) can be used as timestamps.\n+   */\n+  Iterable<TimestampedValue<T>> readRange(Instant minTimestamp, Instant limitTimestamp);\n+\n+  /**\n+   * Clear a timestamp-limited subrange of the list.\n+   *\n+   * <p>All values with timestamps >= minTimestamp and < limitTimestamp will be removed from the\n+   * list.\n+   */\n+  void clearRange(Instant minTimestamp, Instant limitTimestamp);\n+\n+  OrderedListState<T> readRangeLater(Instant minTimestamp, Instant limitTimestamp);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "56a6a7c906ee8eb2c156c5812964d538401f317a"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjcyOTYxNQ==", "bodyText": "done", "url": "https://github.com/apache/beam/pull/12474#discussion_r466729615", "createdAt": "2020-08-06T22:59:06Z", "author": {"login": "reuvenlax"}, "path": "sdks/java/core/src/main/java/org/apache/beam/sdk/state/OrderedListState.java", "diffHunk": "@@ -0,0 +1,51 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.beam.sdk.state;\n+\n+import org.apache.beam.sdk.annotations.Experimental;\n+import org.apache.beam.sdk.annotations.Experimental.Kind;\n+import org.apache.beam.sdk.values.TimestampedValue;\n+import org.joda.time.Instant;\n+\n+/**\n+ * A {@link ReadableState} cell containing a list of values sorted by timestamp. Timestamped values\n+ * can be added to the list, and subranges can be read out in order. Subranges of the list can be\n+ * deleted as well.\n+ */\n+@Experimental(Kind.STATE)\n+public interface OrderedListState<T>\n+    extends GroupingState<TimestampedValue<T>, Iterable<TimestampedValue<T>>> {\n+  /**\n+   * Read a timestamp-limited subrange of the list. The result is ordered by timestamp.\n+   *\n+   * <p>All values with timestamps >= minTimestamp and < limitTimestamp will be in the resuling\n+   * iterable. This means that only timestamps strictly less than\n+   * Instant.ofEpochMilli(Long.MAX_VALUE) can be used as timestamps.\n+   */\n+  Iterable<TimestampedValue<T>> readRange(Instant minTimestamp, Instant limitTimestamp);\n+\n+  /**\n+   * Clear a timestamp-limited subrange of the list.\n+   *\n+   * <p>All values with timestamps >= minTimestamp and < limitTimestamp will be removed from the\n+   * list.\n+   */\n+  void clearRange(Instant minTimestamp, Instant limitTimestamp);\n+\n+  OrderedListState<T> readRangeLater(Instant minTimestamp, Instant limitTimestamp);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjY3NzQ2Mw=="}, "originalCommit": {"oid": "56a6a7c906ee8eb2c156c5812964d538401f317a"}, "originalPosition": 50}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 829, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}