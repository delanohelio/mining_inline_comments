{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU4Mzc3Njcy", "number": 12406, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQyMzo1OTo1NVrOETeCLQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQwMDowMTozOVrOETeDeg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4ODUwNDc3OnYy", "diffSide": "RIGHT", "path": "sdks/python/apache_beam/io/external/xlang_jdbcio_it_test.py", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQyMzo1OTo1NVrOG5OTzw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQwNjo0NDo0NFrOG5VUxw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjY1NjQ2Mw==", "bodyText": "Should we log ?", "url": "https://github.com/apache/beam/pull/12406#discussion_r462656463", "createdAt": "2020-07-29T23:59:55Z", "author": {"login": "chamikaramj"}, "path": "sdks/python/apache_beam/io/external/xlang_jdbcio_it_test.py", "diffHunk": "@@ -91,7 +90,12 @@ def setUp(self):\n         self.host, self.port, self.database_name)\n \n   def tearDown(self):\n-    self.postgres.stop()\n+    # Sometimes stopping the container raises ReadTimeout. We can ignore it\n+    # here to avoid the test failure.\n+    try:\n+      self.postgres.stop()\n+    except:  # pylint: disable=bare-except", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "84636d1ea00de224e6169c8f8505d53fc69e1604"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjc3MTM5OQ==", "bodyText": "Yes, I think so. Done.", "url": "https://github.com/apache/beam/pull/12406#discussion_r462771399", "createdAt": "2020-07-30T06:44:44Z", "author": {"login": "piotr-szuberski"}, "path": "sdks/python/apache_beam/io/external/xlang_jdbcio_it_test.py", "diffHunk": "@@ -91,7 +90,12 @@ def setUp(self):\n         self.host, self.port, self.database_name)\n \n   def tearDown(self):\n-    self.postgres.stop()\n+    # Sometimes stopping the container raises ReadTimeout. We can ignore it\n+    # here to avoid the test failure.\n+    try:\n+      self.postgres.stop()\n+    except:  # pylint: disable=bare-except", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjY1NjQ2Mw=="}, "originalCommit": {"oid": "84636d1ea00de224e6169c8f8505d53fc69e1604"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4ODUwODEwOnYy", "diffSide": "RIGHT", "path": "sdks/python/apache_beam/io/external/xlang_jdbcio_it_test.py", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQwMDowMTozOVrOG5OV1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQwNjo0NTo1OFrOG5VYtA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjY1Njk4Mg==", "bodyText": "Log the error ?", "url": "https://github.com/apache/beam/pull/12406#discussion_r462656982", "createdAt": "2020-07-30T00:01:39Z", "author": {"login": "chamikaramj"}, "path": "sdks/python/apache_beam/io/external/xlang_jdbcio_it_test.py", "diffHunk": "@@ -150,6 +154,18 @@ def test_xlang_jdbc_read(self):\n       assert_that(\n           result, equal_to([JdbcReadTestRow(i) for i in range(ROW_COUNT)]))\n \n+  # Creating a container with testcontainers sometimes raises ReadTimeout\n+  # error. In java there are 2 retries set by default.\n+  def start_postgres_container(self, retries):\n+    for i in range(retries):\n+      try:\n+        self.postgres = PostgresContainer('postgres:12.3')\n+        self.postgres.start()\n+        break\n+      except:  # pylint: disable=bare-except\n+        if i == retries - 1:\n+          raise RuntimeError('Unable to initialize postgres container.')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "84636d1ea00de224e6169c8f8505d53fc69e1604"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjc3MjQwNA==", "bodyText": "I added the log and reraised the primary exception.", "url": "https://github.com/apache/beam/pull/12406#discussion_r462772404", "createdAt": "2020-07-30T06:45:58Z", "author": {"login": "piotr-szuberski"}, "path": "sdks/python/apache_beam/io/external/xlang_jdbcio_it_test.py", "diffHunk": "@@ -150,6 +154,18 @@ def test_xlang_jdbc_read(self):\n       assert_that(\n           result, equal_to([JdbcReadTestRow(i) for i in range(ROW_COUNT)]))\n \n+  # Creating a container with testcontainers sometimes raises ReadTimeout\n+  # error. In java there are 2 retries set by default.\n+  def start_postgres_container(self, retries):\n+    for i in range(retries):\n+      try:\n+        self.postgres = PostgresContainer('postgres:12.3')\n+        self.postgres.start()\n+        break\n+      except:  # pylint: disable=bare-except\n+        if i == retries - 1:\n+          raise RuntimeError('Unable to initialize postgres container.')", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjY1Njk4Mg=="}, "originalCommit": {"oid": "84636d1ea00de224e6169c8f8505d53fc69e1604"}, "originalPosition": 38}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 724, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}