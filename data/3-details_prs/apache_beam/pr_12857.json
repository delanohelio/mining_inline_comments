{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg4MjE3MDQ2", "number": 12857, "title": "[BEAM-9547] Add not_implemented_ok", "bodyText": "Adds an additional option to doctest, not_implemented_ok, which works identically to wont_implement_ok, but allows NotImplementedError to be raised.\nMy goal is to minimize the number of skipped tests, so anything unsupported raises WontImplementError or NotImplementedError. NotImplementedErrors should link to a jira so users can indicate interest in a feature and track it's support.\nPost-Commit Tests Status (on master branch)\n\n\n\nLang\nSDK\nDataflow\nFlink\nSamza\nSpark\nTwister2\n\n\n\n\nGo\n\n---\n\n---\n\n---\n\n\nJava\n\n\n\n\n\n\n\n\nPython\n\n\n\n---\n\n---\n\n\nXLang\n\n---\n\n---\n\n---\n\n\n\nPre-Commit Tests Status (on master branch)\n\n\n\n---\nJava\nPython\nGo\nWebsite\nWhitespace\nTypescript\n\n\n\n\nNon-portable\n\n \n\n\n\n\n\n\nPortable\n---\n\n---\n---\n---\n---\n\n\n\nSee .test-infra/jenkins/README for trigger phrase, status and link of all Jenkins jobs.\nGitHub Actions Tests Status (on master branch)\n\n\n\nSee CI.md for more information about GitHub Actions CI.", "createdAt": "2020-09-16T20:05:59Z", "url": "https://github.com/apache/beam/pull/12857", "merged": true, "mergeCommit": {"oid": "c0fcac0781343a2b9b83b78434848a5067ed6e15"}, "closed": true, "closedAt": "2020-09-19T01:20:25Z", "author": {"login": "TheNeuralBit"}, "timelineItems": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdJh-BfAH2gAyNDg4MjE3MDQ2OjQ4YjNkYTNkMTI1ZmM1ZDgxZGE4YzI2ZmQxYTQ2MTk1NzI1NzMwYTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdJyz44gFqTQ5MDMwMjAzNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "48b3da3d125fc5d81da8c26fd1a46195725730a7", "author": {"user": {"login": "TheNeuralBit", "name": "Brian Hulette"}}, "url": "https://github.com/apache/beam/commit/48b3da3d125fc5d81da8c26fd1a46195725730a7", "committedDate": "2020-09-16T19:57:10Z", "message": "Add not_implemented_ok"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkwMzAyMDM1", "url": "https://github.com/apache/beam/pull/12857#pullrequestreview-490302035", "createdAt": "2020-09-17T07:10:43Z", "commit": {"oid": "48b3da3d125fc5d81da8c26fd1a46195725730a7"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QwNzoxMDo0NFrOHTUaRg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QwNzoxMDo0NFrOHTUaRg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDAxOTM5OA==", "bodyText": "What about doctests where both wont_implement_error and not_implemented_ok are True? (On that note, since we're also handling name errors, does the contents of this really matter anymore?)", "url": "https://github.com/apache/beam/pull/12857#discussion_r490019398", "createdAt": "2020-09-17T07:10:44Z", "author": {"login": "robertwb"}, "path": "sdks/python/apache_beam/dataframe/doctests.py", "diffHunk": "@@ -316,31 +354,39 @@ def run(self, test, **kwargs):\n         example.source = 'pass'\n         example.want = ''\n         self.skipped += 1\n-      elif example.exc_msg is None and any(\n-          wont_implement(example)\n-          for wont_implement in self._wont_implement_ok.get(test.name, [])):\n+      elif example.exc_msg is None and self._is_wont_implement_ok(example,\n+                                                                  test):\n+        # Don't fail doctests that raise this error.\n+        example.exc_msg = '%s: ...' % WONT_IMPLEMENT\n+      elif example.exc_msg is None and self._is_not_implemented_ok(example,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "48b3da3d125fc5d81da8c26fd1a46195725730a7"}, "originalPosition": 116}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2772, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}