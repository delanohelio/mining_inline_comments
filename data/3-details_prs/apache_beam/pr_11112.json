{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg3NDIwMTgy", "number": 11112, "title": "Color Jenkins logs support", "bodyText": "Colors enabled for:\n\ntox: forced with PY_COLORS=1\ndocker: always outputs in color\n\nNot enabled for:\n\ngradle: can force colors with --console=rich output, but without a terminal the captured Jenkins output contains a lot of repeated progress text. gradle/gradle#6843\npytest: can force colors with --colors=yes on the command line (pytest.ini didn't work). Looks bad on a white background, so not enabled. Using the gnome-terminal theme of colorizeOutput() helps since it uses a dark background, but empty log lines are jarringly bright (might be fixed by setting a dark theme on Jenkins, but I don't have access and wouldn't want to change the theme for everyone).\n\n\nThank you for your contribution! Follow this checklist to help us incorporate your contribution quickly and easily:\n\n Choose reviewer(s) and mention them in a comment (R: @username).\n Format the pull request title like [BEAM-XXX] Fixes bug in ApproximateQuantiles, where you replace BEAM-XXX with the appropriate JIRA issue, if applicable. This will automatically link the pull request to the issue.\n Update CHANGES.md with noteworthy changes.\n If this contribution is large, please file an Apache Individual Contributor License Agreement.\n\nSee the Contributor Guide for more tips on how to make review process smoother.\nPost-Commit Tests Status (on master branch)\n\n\n\nLang\nSDK\nApex\nDataflow\nFlink\nGearpump\nSamza\nSpark\n\n\n\n\nGo\n\n---\n---\n\n---\n---\n\n\n\nJava\n\n\n\n\n\n\n\n\n\nPython\n\n---\n\n\n---\n---\n\n\n\nXLang\n---\n---\n---\n\n---\n---\n\n\n\n\nPre-Commit Tests Status (on master branch)\n\n\n\n---\nJava\nPython\nGo\nWebsite\n\n\n\n\nNon-portable\n\n\n\n\n\n\nPortable\n---\n\n---\n---\n\n\n\nSee .test-infra/jenkins/README for trigger phrase, status and link of all Jenkins jobs.", "createdAt": "2020-03-12T18:58:13Z", "url": "https://github.com/apache/beam/pull/11112", "merged": true, "mergeCommit": {"oid": "6b472e1de8ba5769127f6c330a23cc7c0af80527"}, "closed": true, "closedAt": "2020-08-21T16:48:45Z", "author": {"login": "udim"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcNCR6CABqjMxMjQ1MTQ1ODE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdAmU0XAFqTQ3MTA3NTY1NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "98fe08e78b21f87f26076b25c3caee1f38e8faf1", "author": {"user": {"login": "udim", "name": "Udi Meiri"}}, "url": "https://github.com/apache/beam/commit/98fe08e78b21f87f26076b25c3caee1f38e8faf1", "committedDate": "2020-03-12T18:57:11Z", "message": "Color Jenkins logs support"}, "afterCommit": {"oid": "3b57f50a354d42cc86b6efb5ebd2ca4e8d9094a0", "author": {"user": {"login": "udim", "name": "Udi Meiri"}}, "url": "https://github.com/apache/beam/commit/3b57f50a354d42cc86b6efb5ebd2ca4e8d9094a0", "committedDate": "2020-03-12T21:06:15Z", "message": "Color Jenkins logs support"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2489cf1e6f7d9772449a052165de3139c5d2e8a1", "author": {"user": {"login": "udim", "name": "Udi Meiri"}}, "url": "https://github.com/apache/beam/commit/2489cf1e6f7d9772449a052165de3139c5d2e8a1", "committedDate": "2020-08-17T19:25:01Z", "message": "Color Jenkins logs support\n\nEnables support for ANSI color codes in the logs. This is output\nby many tools and should enhance readability.\n\nDepends on https://issues.apache.org/jira/browse/INFRA-20682\n\nThis should also fix codecov links that have ANSI color codes at the\nend. https://issues.apache.org/jira/browse/BEAM-10701"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0168f74a226fbc182e02f19a884c1e9b5d654842", "author": {"user": {"login": "udim", "name": "Udi Meiri"}}, "url": "https://github.com/apache/beam/commit/0168f74a226fbc182e02f19a884c1e9b5d654842", "committedDate": "2020-03-13T17:38:00Z", "message": "Try gnome-terminal colormap."}, "afterCommit": {"oid": "2489cf1e6f7d9772449a052165de3139c5d2e8a1", "author": {"user": {"login": "udim", "name": "Udi Meiri"}}, "url": "https://github.com/apache/beam/commit/2489cf1e6f7d9772449a052165de3139c5d2e8a1", "committedDate": "2020-08-17T19:25:01Z", "message": "Color Jenkins logs support\n\nEnables support for ANSI color codes in the logs. This is output\nby many tools and should enhance readability.\n\nDepends on https://issues.apache.org/jira/browse/INFRA-20682\n\nThis should also fix codecov links that have ANSI color codes at the\nend. https://issues.apache.org/jira/browse/BEAM-10701"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxMDc1MTg1", "url": "https://github.com/apache/beam/pull/11112#pullrequestreview-471075185", "createdAt": "2020-08-20T01:54:52Z", "commit": {"oid": "2489cf1e6f7d9772449a052165de3139c5d2e8a1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwMTo1NDo1NFrOHDl2fQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwMTo1NDo1NFrOHDl2fQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzUyNzkzMw==", "bodyText": "For my education, where is this defined?", "url": "https://github.com/apache/beam/pull/11112#discussion_r473527933", "createdAt": "2020-08-20T01:54:54Z", "author": {"login": "tvalentyn"}, "path": ".test-infra/jenkins/CommonJobProperties.groovy", "diffHunk": "@@ -97,6 +97,7 @@ class CommonJobProperties {\n         string(\"COVERALLS_REPO_TOKEN\", \"beam-coveralls-token\")\n       }\n       timestamps()\n+      colorizeOutput()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2489cf1e6f7d9772449a052165de3139c5d2e8a1"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxMDc1NjU1", "url": "https://github.com/apache/beam/pull/11112#pullrequestreview-471075655", "createdAt": "2020-08-20T01:56:22Z", "commit": {"oid": "2489cf1e6f7d9772449a052165de3139c5d2e8a1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4924, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}