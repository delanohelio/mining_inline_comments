{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE5NDg4OTgz", "number": 13309, "title": "[BEAM-10925] Create ZetaSQL-specific subclass of ScalarFunctionImpl t\u2026", "bodyText": "\u2026hat knows which function group it belongs to.\nThis will be important for differentiating ZetaSQL built-in functions from UDFs.\nAlso resolves the nullability error in findMethod.\nR: @amaliujia @kennknowles\n\nThank you for your contribution! Follow this checklist to help us incorporate your contribution quickly and easily:\n\n Choose reviewer(s) and mention them in a comment (R: @username).\n Format the pull request title like [BEAM-XXX] Fixes bug in ApproximateQuantiles, where you replace BEAM-XXX with the appropriate JIRA issue, if applicable. This will automatically link the pull request to the issue.\n Update CHANGES.md with noteworthy changes.\n If this contribution is large, please file an Apache Individual Contributor License Agreement.\n\nSee the Contributor Guide for more tips on how to make review process smoother.\nPost-Commit Tests Status (on master branch)\n\n\n\nLang\nSDK\nDataflow\nFlink\nSamza\nSpark\nTwister2\n\n\n\n\nGo\n\n---\n\n---\n\n---\n\n\nJava\n\n\n\n\n\n\n\n\nPython\n\n\n\n---\n\n---\n\n\nXLang\n\n---\n\n---\n\n---\n\n\n\nPre-Commit Tests Status (on master branch)\n\n\n\n---\nJava\nPython\nGo\nWebsite\nWhitespace\nTypescript\n\n\n\n\nNon-portable\n\n \n\n\n\n\n\n\nPortable\n---\n\n---\n---\n---\n---\n\n\n\nSee .test-infra/jenkins/README for trigger phrase, status and link of all Jenkins jobs.\nGitHub Actions Tests Status (on master branch)\n\n\n\nSee CI.md for more information about GitHub Actions CI.", "createdAt": "2020-11-11T22:35:22Z", "url": "https://github.com/apache/beam/pull/13309", "merged": true, "mergeCommit": {"oid": "1466db958ca22222ae8badf1f21a860267d46d31"}, "closed": true, "closedAt": "2020-12-19T02:51:32Z", "author": {"login": "ibzib"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdbnV9-gFqTUyODY0ODg4OQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdiaJorgBqjQwNjUzMTgzNTE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4NjQ4ODg5", "url": "https://github.com/apache/beam/pull/13309#pullrequestreview-528648889", "createdAt": "2020-11-12T00:23:22Z", "commit": {"oid": "22228c112ca3ce23906a74bd2b87191ff24ba993"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQwMDoyMzoyMlrOHxjxyw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQwMDoyMzoyMlrOHxjxyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTcyODQ1OQ==", "bodyText": "for these ZETASQL_FUNCTION_GROUP_NAME, eventually I think we will migrate it off from createUdfOperator.", "url": "https://github.com/apache/beam/pull/13309#discussion_r521728459", "createdAt": "2020-11-12T00:23:22Z", "author": {"login": "amaliujia"}, "path": "sdks/java/extensions/sql/zetasql/src/main/java/org/apache/beam/sdk/extensions/sql/zetasql/translation/SqlOperators.java", "diffHunk": "@@ -82,58 +83,85 @@\n           new UdafImpl<>(new StringAgg.StringAggString()));\n \n   public static final SqlOperator START_WITHS =\n-      createUdfOperator(\"STARTS_WITH\", BeamBuiltinMethods.STARTS_WITH_METHOD);\n+      createUdfOperator(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "22228c112ca3ce23906a74bd2b87191ff24ba993"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMyODIyNzIw", "url": "https://github.com/apache/beam/pull/13309#pullrequestreview-532822720", "createdAt": "2020-11-17T21:22:04Z", "commit": {"oid": "22228c112ca3ce23906a74bd2b87191ff24ba993"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QyMToyMjowNFrOH1L9yg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QyMToyNDowMFrOH1MB3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTUzMjYxOA==", "bodyText": "nit: It seems like SqlAnalyzer.ZETASQL_FUNCTION_GROUP_NAME is the only thing ever passed to funGroup here and below. Should it really be an argument?", "url": "https://github.com/apache/beam/pull/13309#discussion_r525532618", "createdAt": "2020-11-17T21:22:04Z", "author": {"login": "apilloud"}, "path": "sdks/java/extensions/sql/zetasql/src/main/java/org/apache/beam/sdk/extensions/sql/zetasql/translation/SqlOperators.java", "diffHunk": "@@ -177,26 +205,25 @@ private static SqlUserDefinedFunction createUdfOperator(\n       Class<?> methodClass,\n       String methodName,\n       SqlReturnTypeInference returnTypeInference,\n-      List<RelDataType> paramTypes) {\n+      List<RelDataType> paramTypes,\n+      String funGroup) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "22228c112ca3ce23906a74bd2b87191ff24ba993"}, "originalPosition": 124}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTUzMzY2Mw==", "bodyText": "This (and createUdfOperator) is intended to be a (slightly hacky) helper function for implementing ZetaSQL operators via the UDF interface. Why do you need to make them public?", "url": "https://github.com/apache/beam/pull/13309#discussion_r525533663", "createdAt": "2020-11-17T21:24:00Z", "author": {"login": "apilloud"}, "path": "sdks/java/extensions/sql/zetasql/src/main/java/org/apache/beam/sdk/extensions/sql/zetasql/translation/SqlOperators.java", "diffHunk": "@@ -158,7 +186,7 @@ public static SqlFunction createZetaSqlFunction(String name, SqlTypeName returnT\n         SqlFunctionCategory.USER_DEFINED_FUNCTION);\n   }\n \n-  private static SqlUserDefinedAggFunction createUdafOperator(\n+  public static SqlUserDefinedAggFunction createUdafOperator(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "22228c112ca3ce23906a74bd2b87191ff24ba993"}, "originalPosition": 114}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c4b1359c275e2f753021c0bdf3ccd45db2ac7df6", "author": {"user": {"login": "ibzib", "name": "Kyle Weaver"}}, "url": "https://github.com/apache/beam/commit/c4b1359c275e2f753021c0bdf3ccd45db2ac7df6", "committedDate": "2020-11-20T02:55:39Z", "message": "[BEAM-10925] Create ZetaSQL-specific subclass of ScalarFunctionImpl that knows which function group it belongs to.\n\nThis will be important for differentiating ZetaSQL built-in functions from UDFs.\n\nAlso resolves the nullability error in findMethod."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b1aae6969cd3c882f6a122705c5f732e9bce1f94", "author": {"user": {"login": "ibzib", "name": "Kyle Weaver"}}, "url": "https://github.com/apache/beam/commit/b1aae6969cd3c882f6a122705c5f732e9bce1f94", "committedDate": "2020-11-20T02:50:58Z", "message": "Make createUd(a)fOperator methods package-private."}, "afterCommit": {"oid": "6c4eea4d9a2c711c661503f015361c8b18e29588", "author": {"user": {"login": "ibzib", "name": "Kyle Weaver"}}, "url": "https://github.com/apache/beam/commit/6c4eea4d9a2c711c661503f015361c8b18e29588", "committedDate": "2020-11-20T02:55:43Z", "message": "Make createUd(a)fOperator methods package-private."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "542e8ceb40a690ffc5a297c465f559840c9e965f", "author": {"user": {"login": "ibzib", "name": "Kyle Weaver"}}, "url": "https://github.com/apache/beam/commit/542e8ceb40a690ffc5a297c465f559840c9e965f", "committedDate": "2020-12-03T02:58:15Z", "message": "Make createUd(a)fOperator methods package-private."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6c4eea4d9a2c711c661503f015361c8b18e29588", "author": {"user": {"login": "ibzib", "name": "Kyle Weaver"}}, "url": "https://github.com/apache/beam/commit/6c4eea4d9a2c711c661503f015361c8b18e29588", "committedDate": "2020-11-20T02:55:43Z", "message": "Make createUd(a)fOperator methods package-private."}, "afterCommit": {"oid": "542e8ceb40a690ffc5a297c465f559840c9e965f", "author": {"user": {"login": "ibzib", "name": "Kyle Weaver"}}, "url": "https://github.com/apache/beam/commit/542e8ceb40a690ffc5a297c465f559840c9e965f", "committedDate": "2020-12-03T02:58:15Z", "message": "Make createUd(a)fOperator methods package-private."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4796, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}