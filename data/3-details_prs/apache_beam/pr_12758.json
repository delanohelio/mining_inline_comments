{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc3NzIyMzgz", "number": 12758, "title": "[BEAM-9898] Move snowflake.py from apache_beam.io to apache_beam.io.external for backwards compatibility", "bodyText": "The problem is that read has already been merged to the 2.24 RC and in there snowflake.py is in apache_beam.io.external while after write merge into 2.25 it was moved to apache_beam.io, as this is the preferred place to put cross-language ios.\nThere are 2 possibilities:\n\nMove snowflake.py back to apache_beam.io.external\nMake a redirect file with imports from apache_beam.io.snowflake and add a deprecation warning like in kafka.py\n\nThere are also changes to versions in CHANGES.md - cross-language Read and write dispositions were added in 2.24, not 2.23\n\nThank you for your contribution! Follow this checklist to help us incorporate your contribution quickly and easily:\n\n Choose reviewer(s) and mention them in a comment (R: @username).\n Format the pull request title like [BEAM-XXX] Fixes bug in ApproximateQuantiles, where you replace BEAM-XXX with the appropriate JIRA issue, if applicable. This will automatically link the pull request to the issue.\n Update CHANGES.md with noteworthy changes.\n If this contribution is large, please file an Apache Individual Contributor License Agreement.\n\nSee the Contributor Guide for more tips on how to make review process smoother.\nPost-Commit Tests Status (on master branch)\n\n\n\nLang\nSDK\nDataflow\nFlink\nSamza\nSpark\nTwister2\n\n\n\n\nGo\n\n---\n\n---\n\n---\n\n\nJava\n\n\n\n\n\n\n\n\nPython\n\n\n\n---\n\n---\n\n\nXLang\n\n---\n\n---\n\n---\n\n\n\nPre-Commit Tests Status (on master branch)\n\n\n\n---\nJava\nPython\nGo\nWebsite\nWhitespace\nTypescript\n\n\n\n\nNon-portable\n\n \n\n\n\n\n\n\nPortable\n---\n\n---\n---\n---\n---\n\n\n\nSee .test-infra/jenkins/README for trigger phrase, status and link of all Jenkins jobs.\nGitHub Actions Tests Status (on master branch)\n\n\n\nSee CI.md for more information about GitHub Actions CI.", "createdAt": "2020-09-02T10:24:59Z", "url": "https://github.com/apache/beam/pull/12758", "merged": true, "mergeCommit": {"oid": "dad847069ed37ab060b7e505e0a4251aad547e80"}, "closed": true, "closedAt": "2020-09-22T07:43:23Z", "author": {"login": "piotr-szuberski"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdE-b5XgBqjM3MjA2NTg3OTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdJCMUQgBqjM3NjY3MDY4Nzc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bc2a716923754f703e66037a1724ca11fd932d76", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/bc2a716923754f703e66037a1724ca11fd932d76", "committedDate": "2020-09-02T16:15:05Z", "message": "[BEAM-9898] Move info about snowflake cross-language and write dispositions in CHANGES.md from 2.23 to 2.24"}, "afterCommit": {"oid": "c80daff5812c10cdf9400dbd40b36f73e8c42d5a", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/c80daff5812c10cdf9400dbd40b36f73e8c42d5a", "committedDate": "2020-09-02T16:15:33Z", "message": "[BEAM-9898] Move info about snowflake cross-language and write dispositions in CHANGES.md from 2.23 to 2.24"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgxNTkwMjI4", "url": "https://github.com/apache/beam/pull/12758#pullrequestreview-481590228", "createdAt": "2020-09-03T08:00:08Z", "commit": {"oid": "c80daff5812c10cdf9400dbd40b36f73e8c42d5a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QwODowMDowOFrOHMazMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QwODowMDowOFrOHMazMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mjc4NDA1MQ==", "bodyText": "@youngoli Could I also ask you to change these lines in CHANGES.md (103, 104, 140, 141)? I've noticed that snowflake dispositions and cross-language read was added in 2.24, not 2.23 (it was pushed at 2.23 but was merged after the 2.23 release) and it's a bit mess.\nIt would also be great to move snowflake.py from apache_beam.io.external to apache_beam.io to avoid backward compatibility issues, it's just moving this file, there are no other files that depend on it (integration tests and cross-language write are in 2.25.0).\nOn the other hand we could add apache_beam/io/snowflake.py and apache_beam/io/external/xlang_snowflakeio_it_test.py from the current master to the 2.24.0 RC and remove apache_beam/io/external/snowflake.py - it would be not a lot more work, these tests don't run on jenkins, so they won't break anything. We would have snowflake read and write for python at once in 2.24 without much work.\nBut I probably am asking for too much at once - I don't know how much are you willing to do so I understand if you decide to stop at 1). 2) would be of similiar complexity and could avoid backwards compatibility issues. 3) would require to take files from the current master but there are just 2 whole files to be moved.\nTL;DR - choose one of them:\n\njust remove lines 140-141 and add 103-104\ndo 1) and move apache_beam/io/external/snowflake.py to apache_beam/io/snowflake.py - then in  CHANGES.md:104 should be apache_beam.io.snowflake instead of apache_beam.io.external.snowflake\nTake following from current master apache_beam/io/snowflake.py and apache_beam/io/external/xlang_snowflakeio_it_test.py, remove apache_beam/io/external/snowflake.py and do 1), but in CHANGES.md:104 paste\n* Add cross-language support to SnowflakeIO now available in the Python module `apache_beam.io.snowflake` ([BEAM-9897](https://issues.apache.org/jira/browse/BEAM-9897), [BEAM-9898](https://issues.apache.org/jira/browse/BEAM-9898)).\n\nSorry for the troubles and thanks in advance! Whatever option you choose it will save users a lot of confusion!", "url": "https://github.com/apache/beam/pull/12758#discussion_r482784051", "createdAt": "2020-09-03T08:00:08Z", "author": {"login": "piotr-szuberski"}, "path": "CHANGES.md", "diffHunk": "@@ -100,6 +100,8 @@\n * Support for X source added (Java/Python) ([BEAM-X](https://issues.apache.org/jira/browse/BEAM-X)).\n * Add streaming support to SnowflakeIO in Java SDK ([BEAM-9896](https://issues.apache.org/jira/browse/BEAM-9896  ))\n * Support reading and writing to Google Healthcare DICOM APIs in Python SDK ([BEAM-10601](https://issues.apache.org/jira/browse/BEAM-10601))\n+* Add dispositions for SnowflakeIO.write ([BEAM-10343](https://issues.apache.org/jira/browse/BEAM-10343))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c80daff5812c10cdf9400dbd40b36f73e8c42d5a"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0MjE1MDUz", "url": "https://github.com/apache/beam/pull/12758#pullrequestreview-484215053", "createdAt": "2020-09-08T14:45:26Z", "commit": {"oid": "0651b25b324ca07f321a9d787f9193e5033c310a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNDo0NToyNlrOHOgsfg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNDo0NToyNlrOHOgsfg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDk3Nzc5MA==", "bodyText": "apache_beam.io.snowflake ?", "url": "https://github.com/apache/beam/pull/12758#discussion_r484977790", "createdAt": "2020-09-08T14:45:26Z", "author": {"login": "chamikaramj"}, "path": "CHANGES.md", "diffHunk": "@@ -100,6 +101,8 @@\n * Support for X source added (Java/Python) ([BEAM-X](https://issues.apache.org/jira/browse/BEAM-X)).\n * Add streaming support to SnowflakeIO in Java SDK ([BEAM-9896](https://issues.apache.org/jira/browse/BEAM-9896  ))\n * Support reading and writing to Google Healthcare DICOM APIs in Python SDK ([BEAM-10601](https://issues.apache.org/jira/browse/BEAM-10601))\n+* Add dispositions for SnowflakeIO.write ([BEAM-10343](https://issues.apache.org/jira/browse/BEAM-10343))\n+* Add cross-language support to SnowflakeIO.Read now available in the Python module `apache_beam.io.external.snowflake` ([BEAM-9897](https://issues.apache.org/jira/browse/BEAM-9897)).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0651b25b324ca07f321a9d787f9193e5033c310a"}, "originalPosition": 22}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0651b25b324ca07f321a9d787f9193e5033c310a", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/0651b25b324ca07f321a9d787f9193e5033c310a", "committedDate": "2020-09-04T07:41:21Z", "message": "Add deprecation about ReadFromSnowflake to CHANGES.md"}, "afterCommit": {"oid": "00ac9be6aa079aa0f6fd91d69f2c35ca3ab45d47", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/00ac9be6aa079aa0f6fd91d69f2c35ca3ab45d47", "committedDate": "2020-09-10T06:00:14Z", "message": "Add deprecation about ReadFromSnowflake to CHANGES.md"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "00ac9be6aa079aa0f6fd91d69f2c35ca3ab45d47", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/00ac9be6aa079aa0f6fd91d69f2c35ca3ab45d47", "committedDate": "2020-09-10T06:00:14Z", "message": "Add deprecation about ReadFromSnowflake to CHANGES.md"}, "afterCommit": {"oid": "36ed52a7fd275b5b8e715ae3407354276ff6e6da", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/36ed52a7fd275b5b8e715ae3407354276ff6e6da", "committedDate": "2020-09-11T11:00:03Z", "message": "[BEAM-9898] Add stub with imports to apache_beam.io.snowflake.ReadFromSnowflake"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ded8d4159bdfe84e512ac86824b14dfcf740db14", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/ded8d4159bdfe84e512ac86824b14dfcf740db14", "committedDate": "2020-09-15T06:55:36Z", "message": "[BEAM-9898] Add stub with imports to apache_beam.io.snowflake"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "36ed52a7fd275b5b8e715ae3407354276ff6e6da", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/36ed52a7fd275b5b8e715ae3407354276ff6e6da", "committedDate": "2020-09-11T11:00:03Z", "message": "[BEAM-9898] Add stub with imports to apache_beam.io.snowflake.ReadFromSnowflake"}, "afterCommit": {"oid": "ded8d4159bdfe84e512ac86824b14dfcf740db14", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/ded8d4159bdfe84e512ac86824b14dfcf740db14", "committedDate": "2020-09-15T06:55:36Z", "message": "[BEAM-9898] Add stub with imports to apache_beam.io.snowflake"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4626, "cost": 1, "resetAt": "2021-10-28T16:48:13Z"}}}