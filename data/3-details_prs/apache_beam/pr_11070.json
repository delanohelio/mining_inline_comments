{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg1MDgwMTQz", "number": 11070, "title": "[BEAM-8280] Blog post: Python typing changes", "bodyText": "Announcing changes in typing.\n\nThank you for your contribution! Follow this checklist to help us incorporate your contribution quickly and easily:\n\n Choose reviewer(s) and mention them in a comment (R: @username).\n Format the pull request title like [BEAM-XXX] Fixes bug in ApproximateQuantiles, where you replace BEAM-XXX with the appropriate JIRA issue, if applicable. This will automatically link the pull request to the issue.\n Update CHANGES.md with noteworthy changes.\n If this contribution is large, please file an Apache Individual Contributor License Agreement.\n\nSee the Contributor Guide for more tips on how to make review process smoother.\nPost-Commit Tests Status (on master branch)\n\n\n\nLang\nSDK\nApex\nDataflow\nFlink\nGearpump\nSamza\nSpark\n\n\n\n\nGo\n\n---\n---\n\n---\n---\n\n\n\nJava\n\n\n\n\n\n\n\n\n\nPython\n\n---\n\n\n---\n---\n\n\n\nXLang\n---\n---\n---\n\n---\n---\n\n\n\n\nPre-Commit Tests Status (on master branch)\n\n\n\n---\nJava\nPython\nGo\nWebsite\n\n\n\n\nNon-portable\n\n\n\n\n\n\nPortable\n---\n\n---\n---\n\n\n\nSee .test-infra/jenkins/README for trigger phrase, status and link of all Jenkins jobs.", "createdAt": "2020-03-07T00:55:51Z", "url": "https://github.com/apache/beam/pull/11070", "merged": true, "mergeCommit": {"oid": "775ad8edbb95244b03e56e2bd0bbf20b11eba22d"}, "closed": true, "closedAt": "2020-05-28T22:14:37Z", "author": {"login": "udim"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcLKyTvgFqTM3MDcxMjM1MA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABclxPtLgH2gAyMzg1MDgwMTQzOjk0YTM2MzVlYjU3MTI2Njg2ZDMwMGJhMjQ1ZTQ5ZTlhZjgzY2U5Y2Y=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwNzEyMzUw", "url": "https://github.com/apache/beam/pull/11070#pullrequestreview-370712350", "createdAt": "2020-03-07T01:53:15Z", "commit": {"oid": "9861d24f0c85dd072653f9cf45a88b34705bf80a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QwMTo1MzoxNVrOFzL4AQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QwMTo1MzoxNVrOFzL4AQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIxNjI1Nw==", "bodyText": "It could be nice to clarify that these annotations are used at runtime. e.g.\n\nthus getting additional runtime type checking for free.", "url": "https://github.com/apache/beam/pull/11070#discussion_r389216257", "createdAt": "2020-03-07T01:53:15Z", "author": {"login": "chadrik"}, "path": "website/src/_posts/2020-03-06-python-typing.md", "diffHunk": "@@ -0,0 +1,118 @@\n+---\n+layout: post\n+title:  \"Python SDK Typing Changes\"\n+date:   2020-03-06 00:00:01 -0800\n+excerpt_separator: <!--more-->\n+categories: blog python typing\n+authors:\n+  - chadrik\n+  - udim\n+\n+---\n+<!--\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+you may not use this file except in compliance with the License.\n+You may obtain a copy of the License at\n+\n+http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing, software\n+distributed under the License is distributed on an \"AS IS\" BASIS,\n+WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+See the License for the specific language governing permissions and\n+limitations under the License.\n+-->\n+\n+TODO excerpt\n+\n+<!--more-->\n+\n+Python supports type annotations on functions (PEP 484). Static type checkers,\n+such as mypy, are used to verify adherence to these types.\n+For example:\n+```py\n+def f(v: int) -> int:\n+  return v[0]\n+```\n+Running mypy on the above code will give the error:\n+`Value of type \"int\" is not indexable`.\n+\n+We've recently made changes to Beam in 2 areas:\n+\n+Adding type hints throughout Beam. TODO expand\n+\n+Second, we've added support for Python 3 type annotations. This allows SDK\n+users to specify a DoFn's type hints in one place. \n+We've also expanded Beam's support of `typing` module types.\n+\n+For more background see: \n+[Ensuring Python Type Safety](https://beam.apache.org/documentation/sdks/python-type-safety/).\n+\n+# Beam Is Typed\n+\n+TODO\n+\n+# New Ways to Annotate\n+\n+## Python 3 Syntax Annotations\n+\n+Coming in Beam 2.21 (BEAM-8280), you will be able to using Python annotation\n+syntax to specify input and output types.\n+\n+For example, this new form:\n+```py\n+class MyDoFn(beam.DoFn):\n+  def process(self, element: int) -> typing.Text:\n+    yield str(element)\n+```\n+is equivalent to this:\n+```py\n+@beam.typehints.with_input_types(int)\n+@beam.typehints.with_output_types(typing.Text)\n+class MyDoFn(beam.DoFn):\n+  def process(self, element):\n+    yield str(element)\n+```\n+\n+One of the advantages of the new form is that you may already be using it\n+in tandem with a static type checker such as mypy, thus getting additional\n+type checking for free.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9861d24f0c85dd072653f9cf45a88b34705bf80a"}, "originalPosition": 79}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwNzEyNDMy", "url": "https://github.com/apache/beam/pull/11070#pullrequestreview-370712432", "createdAt": "2020-03-07T01:54:09Z", "commit": {"oid": "9861d24f0c85dd072653f9cf45a88b34705bf80a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QwMTo1NDowOVrOFzL4ZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QwMTo1NDowOVrOFzL4ZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIxNjM1Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Uses of Beam's with_input_type, with_output_type methods and decorators will \n          \n          \n            \n            still work and take precedence over annotations.\n          \n          \n            \n            Uses of Beam's `with_input_type`, `with_output_type` methods and decorators will \n          \n          \n            \n            still work and take precedence over annotations.", "url": "https://github.com/apache/beam/pull/11070#discussion_r389216356", "createdAt": "2020-03-07T01:54:09Z", "author": {"login": "chadrik"}, "path": "website/src/_posts/2020-03-06-python-typing.md", "diffHunk": "@@ -0,0 +1,118 @@\n+---\n+layout: post\n+title:  \"Python SDK Typing Changes\"\n+date:   2020-03-06 00:00:01 -0800\n+excerpt_separator: <!--more-->\n+categories: blog python typing\n+authors:\n+  - chadrik\n+  - udim\n+\n+---\n+<!--\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+you may not use this file except in compliance with the License.\n+You may obtain a copy of the License at\n+\n+http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing, software\n+distributed under the License is distributed on an \"AS IS\" BASIS,\n+WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+See the License for the specific language governing permissions and\n+limitations under the License.\n+-->\n+\n+TODO excerpt\n+\n+<!--more-->\n+\n+Python supports type annotations on functions (PEP 484). Static type checkers,\n+such as mypy, are used to verify adherence to these types.\n+For example:\n+```py\n+def f(v: int) -> int:\n+  return v[0]\n+```\n+Running mypy on the above code will give the error:\n+`Value of type \"int\" is not indexable`.\n+\n+We've recently made changes to Beam in 2 areas:\n+\n+Adding type hints throughout Beam. TODO expand\n+\n+Second, we've added support for Python 3 type annotations. This allows SDK\n+users to specify a DoFn's type hints in one place. \n+We've also expanded Beam's support of `typing` module types.\n+\n+For more background see: \n+[Ensuring Python Type Safety](https://beam.apache.org/documentation/sdks/python-type-safety/).\n+\n+# Beam Is Typed\n+\n+TODO\n+\n+# New Ways to Annotate\n+\n+## Python 3 Syntax Annotations\n+\n+Coming in Beam 2.21 (BEAM-8280), you will be able to using Python annotation\n+syntax to specify input and output types.\n+\n+For example, this new form:\n+```py\n+class MyDoFn(beam.DoFn):\n+  def process(self, element: int) -> typing.Text:\n+    yield str(element)\n+```\n+is equivalent to this:\n+```py\n+@beam.typehints.with_input_types(int)\n+@beam.typehints.with_output_types(typing.Text)\n+class MyDoFn(beam.DoFn):\n+  def process(self, element):\n+    yield str(element)\n+```\n+\n+One of the advantages of the new form is that you may already be using it\n+in tandem with a static type checker such as mypy, thus getting additional\n+type checking for free.\n+\n+This feature will be enabled by default, and there will be 2 mechanisms in\n+place to disable it:\n+1. Calling `apache_beam.typehints.disable_type_annotations()` before pipeline\n+construction will disable the new feature completely.\n+1. Decorating a function with `@apache_beam.typehints.no_annotations` will\n+tell Beam to ignore annotations for it. \n+ \n+Uses of Beam's with_input_type, with_output_type methods and decorators will \n+still work and take precedence over annotations.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9861d24f0c85dd072653f9cf45a88b34705bf80a"}, "originalPosition": 89}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwNzEyNDYy", "url": "https://github.com/apache/beam/pull/11070#pullrequestreview-370712462", "createdAt": "2020-03-07T01:54:34Z", "commit": {"oid": "9861d24f0c85dd072653f9cf45a88b34705bf80a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QwMTo1NDozNVrOFzL4fg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QwMTo1NDozNVrOFzL4fg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIxNjM4Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Coming in Beam 2.21 (BEAM-8280), you will be able to using Python annotation\n          \n          \n            \n            Coming in Beam 2.21 (BEAM-8280), you will be able to use Python annotation", "url": "https://github.com/apache/beam/pull/11070#discussion_r389216382", "createdAt": "2020-03-07T01:54:35Z", "author": {"login": "chadrik"}, "path": "website/src/_posts/2020-03-06-python-typing.md", "diffHunk": "@@ -0,0 +1,118 @@\n+---\n+layout: post\n+title:  \"Python SDK Typing Changes\"\n+date:   2020-03-06 00:00:01 -0800\n+excerpt_separator: <!--more-->\n+categories: blog python typing\n+authors:\n+  - chadrik\n+  - udim\n+\n+---\n+<!--\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+you may not use this file except in compliance with the License.\n+You may obtain a copy of the License at\n+\n+http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing, software\n+distributed under the License is distributed on an \"AS IS\" BASIS,\n+WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+See the License for the specific language governing permissions and\n+limitations under the License.\n+-->\n+\n+TODO excerpt\n+\n+<!--more-->\n+\n+Python supports type annotations on functions (PEP 484). Static type checkers,\n+such as mypy, are used to verify adherence to these types.\n+For example:\n+```py\n+def f(v: int) -> int:\n+  return v[0]\n+```\n+Running mypy on the above code will give the error:\n+`Value of type \"int\" is not indexable`.\n+\n+We've recently made changes to Beam in 2 areas:\n+\n+Adding type hints throughout Beam. TODO expand\n+\n+Second, we've added support for Python 3 type annotations. This allows SDK\n+users to specify a DoFn's type hints in one place. \n+We've also expanded Beam's support of `typing` module types.\n+\n+For more background see: \n+[Ensuring Python Type Safety](https://beam.apache.org/documentation/sdks/python-type-safety/).\n+\n+# Beam Is Typed\n+\n+TODO\n+\n+# New Ways to Annotate\n+\n+## Python 3 Syntax Annotations\n+\n+Coming in Beam 2.21 (BEAM-8280), you will be able to using Python annotation", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9861d24f0c85dd072653f9cf45a88b34705bf80a"}, "originalPosition": 59}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4MTkyMjU1", "url": "https://github.com/apache/beam/pull/11070#pullrequestreview-378192255", "createdAt": "2020-03-20T01:25:16Z", "commit": {"oid": "746a7eb9beaba7cbd7d386284045e50d20f27d56"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQwMToyNToxN1rOF5Fcyw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQwMToyNToxN1rOF5Fcyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTQwMjQ0Mw==", "bodyText": "@chadrik LMK if you want to write about the new type hints, mypy checking, other stuff you've added related to types.", "url": "https://github.com/apache/beam/pull/11070#discussion_r395402443", "createdAt": "2020-03-20T01:25:17Z", "author": {"login": "udim"}, "path": "website/src/_posts/2020-03-06-python-typing.md", "diffHunk": "@@ -0,0 +1,117 @@\n+---\n+layout: post\n+title:  \"Python SDK Typing Changes\"\n+date:   2020-03-06 00:00:01 -0800\n+excerpt_separator: <!--more-->\n+categories: blog python typing\n+authors:\n+  - chadrik\n+  - udim\n+\n+---\n+<!--\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+you may not use this file except in compliance with the License.\n+You may obtain a copy of the License at\n+\n+http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing, software\n+distributed under the License is distributed on an \"AS IS\" BASIS,\n+WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+See the License for the specific language governing permissions and\n+limitations under the License.\n+-->\n+\n+TODO excerpt\n+\n+<!--more-->\n+\n+Python supports type annotations on functions (PEP 484). Static type checkers,\n+such as mypy, are used to verify adherence to these types.\n+For example:\n+```py\n+def f(v: int) -> int:\n+  return v[0]\n+```\n+Running mypy on the above code will give the error:\n+`Value of type \"int\" is not indexable`.\n+\n+We've recently made changes to Beam in 2 areas:\n+\n+Adding type hints throughout Beam. TODO expand\n+\n+Second, we've added support for Python 3 type annotations. This allows SDK\n+users to specify a DoFn's type hints in one place. \n+We've also expanded Beam's support of `typing` module types.\n+\n+For more background see: \n+[Ensuring Python Type Safety](https://beam.apache.org/documentation/sdks/python-type-safety/).\n+\n+# Beam Is Typed\n+\n+TODO", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "746a7eb9beaba7cbd7d386284045e50d20f27d56"}, "originalPosition": 53}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4NTY3OTM1", "url": "https://github.com/apache/beam/pull/11070#pullrequestreview-408567935", "createdAt": "2020-05-08T22:49:01Z", "commit": {"oid": "746a7eb9beaba7cbd7d386284045e50d20f27d56"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQyMjo0OTowMVrOGS11WQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQyMjo0OTowMVrOGS11WQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQwOTU2MQ==", "bodyText": "I don't fully understand the issue presented here.  Ignoring pipelines that are dynamically generated at runtime, I think it should be possible for mypy to track the types of many pipelines, as long as A) developers avoid certain pitfalls (like lambdas), and B) we write a mypy plugin to smooth over some gaps.", "url": "https://github.com/apache/beam/pull/11070#discussion_r422409561", "createdAt": "2020-05-08T22:49:01Z", "author": {"login": "chadrik"}, "path": "website/src/_posts/2020-03-06-python-typing.md", "diffHunk": "@@ -0,0 +1,117 @@\n+---\n+layout: post\n+title:  \"Python SDK Typing Changes\"\n+date:   2020-03-06 00:00:01 -0800\n+excerpt_separator: <!--more-->\n+categories: blog python typing\n+authors:\n+  - chadrik\n+  - udim\n+\n+---\n+<!--\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+you may not use this file except in compliance with the License.\n+You may obtain a copy of the License at\n+\n+http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing, software\n+distributed under the License is distributed on an \"AS IS\" BASIS,\n+WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+See the License for the specific language governing permissions and\n+limitations under the License.\n+-->\n+\n+TODO excerpt\n+\n+<!--more-->\n+\n+Python supports type annotations on functions (PEP 484). Static type checkers,\n+such as mypy, are used to verify adherence to these types.\n+For example:\n+```py\n+def f(v: int) -> int:\n+  return v[0]\n+```\n+Running mypy on the above code will give the error:\n+`Value of type \"int\" is not indexable`.\n+\n+We've recently made changes to Beam in 2 areas:\n+\n+Adding type hints throughout Beam. TODO expand\n+\n+Second, we've added support for Python 3 type annotations. This allows SDK\n+users to specify a DoFn's type hints in one place. \n+We've also expanded Beam's support of `typing` module types.\n+\n+For more background see: \n+[Ensuring Python Type Safety](https://beam.apache.org/documentation/sdks/python-type-safety/).\n+\n+# Beam Is Typed\n+\n+TODO\n+\n+# New Ways to Annotate\n+\n+## Python 3 Syntax Annotations\n+\n+Coming in Beam 2.21 (BEAM-8280), you will be able to use Python annotation\n+syntax to specify input and output types.\n+\n+For example, this new form:\n+```py\n+class MyDoFn(beam.DoFn):\n+  def process(self, element: int) -> typing.Text:\n+    yield str(element)\n+```\n+is equivalent to this:\n+```py\n+@beam.typehints.with_input_types(int)\n+@beam.typehints.with_output_types(typing.Text)\n+class MyDoFn(beam.DoFn):\n+  def process(self, element):\n+    yield str(element)\n+```\n+\n+One of the advantages of the new form is that you may already be using it\n+in tandem with a static type checker such as mypy, thus getting additional\n+type checking for free.\n+\n+This feature will be enabled by default, and there will be 2 mechanisms in\n+place to disable it:\n+1. Calling `apache_beam.typehints.disable_type_annotations()` before pipeline\n+construction will disable the new feature completely.\n+1. Decorating a function with `@apache_beam.typehints.no_annotations` will\n+tell Beam to ignore annotations for it. \n+ \n+Uses of Beam's `with_input_type`, `with_output_type` methods and decorators will \n+still work and take precedence over annotations.\n+\n+Sidebar:\n+\n+> You might ask: couldn't we use mypy to type check Beam pipelines? The main issue\n+is that such a tool would have to understand type relations between\n+pipeline graph nodes, e.g., that the type of element passed to a transform\n+should be consistent with its annotated input type.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "746a7eb9beaba7cbd7d386284045e50d20f27d56"}, "originalPosition": 96}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEyOTc4MTk0", "url": "https://github.com/apache/beam/pull/11070#pullrequestreview-412978194", "createdAt": "2020-05-15T21:27:18Z", "commit": {"oid": "746a7eb9beaba7cbd7d386284045e50d20f27d56"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQyMToyNzoxOVrOGWUVOQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQyMToyNzoxOVrOGWUVOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjA1NDk2OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            TODO\n          \n          \n            \n            In tandem with the new type annotation support within DoFns, we've invested a\n          \n          \n            \n            great deal of time adding type annotations to the Beam python code itself.\n          \n          \n            \n            With this in place, we have begun using mypy, a static type \n          \n          \n            \n            checker, as part of Beam's code review process, which ensures higher quality \n          \n          \n            \n            contributions and fewer bugs.\n          \n          \n            \n            The added context and insight that type annotations add throughout Beam is \n          \n          \n            \n            useful for all Beam developers, contributors and end users alike, but\n          \n          \n            \n            it is especially beneficial for developers who are new to the project.\n          \n          \n            \n            If you use an IDE that understands type annotations, it will provide richer\n          \n          \n            \n            type completions and warnings than before.\n          \n          \n            \n            You'll also be able to use your IDE to inspect the types of Beam functions and \n          \n          \n            \n            transforms to better understand how they work, which will ease your own \n          \n          \n            \n            development.\n          \n          \n            \n            Finally, once Beam is fully annotated, end users will be able to benefit from\n          \n          \n            \n            the use of static type analysis on their own pipelines and custom transforms.", "url": "https://github.com/apache/beam/pull/11070#discussion_r426054969", "createdAt": "2020-05-15T21:27:19Z", "author": {"login": "chadrik"}, "path": "website/src/_posts/2020-03-06-python-typing.md", "diffHunk": "@@ -0,0 +1,117 @@\n+---\n+layout: post\n+title:  \"Python SDK Typing Changes\"\n+date:   2020-03-06 00:00:01 -0800\n+excerpt_separator: <!--more-->\n+categories: blog python typing\n+authors:\n+  - chadrik\n+  - udim\n+\n+---\n+<!--\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+you may not use this file except in compliance with the License.\n+You may obtain a copy of the License at\n+\n+http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing, software\n+distributed under the License is distributed on an \"AS IS\" BASIS,\n+WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+See the License for the specific language governing permissions and\n+limitations under the License.\n+-->\n+\n+TODO excerpt\n+\n+<!--more-->\n+\n+Python supports type annotations on functions (PEP 484). Static type checkers,\n+such as mypy, are used to verify adherence to these types.\n+For example:\n+```py\n+def f(v: int) -> int:\n+  return v[0]\n+```\n+Running mypy on the above code will give the error:\n+`Value of type \"int\" is not indexable`.\n+\n+We've recently made changes to Beam in 2 areas:\n+\n+Adding type hints throughout Beam. TODO expand\n+\n+Second, we've added support for Python 3 type annotations. This allows SDK\n+users to specify a DoFn's type hints in one place. \n+We've also expanded Beam's support of `typing` module types.\n+\n+For more background see: \n+[Ensuring Python Type Safety](https://beam.apache.org/documentation/sdks/python-type-safety/).\n+\n+# Beam Is Typed\n+\n+TODO", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "746a7eb9beaba7cbd7d386284045e50d20f27d56"}, "originalPosition": 53}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEyOTc4Mzk1", "url": "https://github.com/apache/beam/pull/11070#pullrequestreview-412978395", "createdAt": "2020-05-15T21:27:44Z", "commit": {"oid": "746a7eb9beaba7cbd7d386284045e50d20f27d56"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQyMToyNzo0NVrOGWUV5g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQyMToyNzo0NVrOGWUV5g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjA1NTE0Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Adding type hints throughout Beam. TODO expand\n          \n          \n            \n            Adding type annotations throughout Beam.  Type annotations make a large and \n          \n          \n            \n            sophisticated codebase like Beam easier to comprehend and navigate in your \n          \n          \n            \n            favorite IDE.", "url": "https://github.com/apache/beam/pull/11070#discussion_r426055142", "createdAt": "2020-05-15T21:27:45Z", "author": {"login": "chadrik"}, "path": "website/src/_posts/2020-03-06-python-typing.md", "diffHunk": "@@ -0,0 +1,117 @@\n+---\n+layout: post\n+title:  \"Python SDK Typing Changes\"\n+date:   2020-03-06 00:00:01 -0800\n+excerpt_separator: <!--more-->\n+categories: blog python typing\n+authors:\n+  - chadrik\n+  - udim\n+\n+---\n+<!--\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+you may not use this file except in compliance with the License.\n+You may obtain a copy of the License at\n+\n+http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing, software\n+distributed under the License is distributed on an \"AS IS\" BASIS,\n+WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+See the License for the specific language governing permissions and\n+limitations under the License.\n+-->\n+\n+TODO excerpt\n+\n+<!--more-->\n+\n+Python supports type annotations on functions (PEP 484). Static type checkers,\n+such as mypy, are used to verify adherence to these types.\n+For example:\n+```py\n+def f(v: int) -> int:\n+  return v[0]\n+```\n+Running mypy on the above code will give the error:\n+`Value of type \"int\" is not indexable`.\n+\n+We've recently made changes to Beam in 2 areas:\n+\n+Adding type hints throughout Beam. TODO expand", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "746a7eb9beaba7cbd7d386284045e50d20f27d56"}, "originalPosition": 42}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEyOTc4NTk0", "url": "https://github.com/apache/beam/pull/11070#pullrequestreview-412978594", "createdAt": "2020-05-15T21:28:08Z", "commit": {"oid": "746a7eb9beaba7cbd7d386284045e50d20f27d56"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQyMToyODowOVrOGWUWgA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQyMToyODowOVrOGWUWgA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjA1NTI5Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            type checking for free.\n          \n          \n            \n            runtime type checking for free.", "url": "https://github.com/apache/beam/pull/11070#discussion_r426055296", "createdAt": "2020-05-15T21:28:09Z", "author": {"login": "chadrik"}, "path": "website/src/_posts/2020-03-06-python-typing.md", "diffHunk": "@@ -0,0 +1,117 @@\n+---\n+layout: post\n+title:  \"Python SDK Typing Changes\"\n+date:   2020-03-06 00:00:01 -0800\n+excerpt_separator: <!--more-->\n+categories: blog python typing\n+authors:\n+  - chadrik\n+  - udim\n+\n+---\n+<!--\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+you may not use this file except in compliance with the License.\n+You may obtain a copy of the License at\n+\n+http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing, software\n+distributed under the License is distributed on an \"AS IS\" BASIS,\n+WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+See the License for the specific language governing permissions and\n+limitations under the License.\n+-->\n+\n+TODO excerpt\n+\n+<!--more-->\n+\n+Python supports type annotations on functions (PEP 484). Static type checkers,\n+such as mypy, are used to verify adherence to these types.\n+For example:\n+```py\n+def f(v: int) -> int:\n+  return v[0]\n+```\n+Running mypy on the above code will give the error:\n+`Value of type \"int\" is not indexable`.\n+\n+We've recently made changes to Beam in 2 areas:\n+\n+Adding type hints throughout Beam. TODO expand\n+\n+Second, we've added support for Python 3 type annotations. This allows SDK\n+users to specify a DoFn's type hints in one place. \n+We've also expanded Beam's support of `typing` module types.\n+\n+For more background see: \n+[Ensuring Python Type Safety](https://beam.apache.org/documentation/sdks/python-type-safety/).\n+\n+# Beam Is Typed\n+\n+TODO\n+\n+# New Ways to Annotate\n+\n+## Python 3 Syntax Annotations\n+\n+Coming in Beam 2.21 (BEAM-8280), you will be able to use Python annotation\n+syntax to specify input and output types.\n+\n+For example, this new form:\n+```py\n+class MyDoFn(beam.DoFn):\n+  def process(self, element: int) -> typing.Text:\n+    yield str(element)\n+```\n+is equivalent to this:\n+```py\n+@beam.typehints.with_input_types(int)\n+@beam.typehints.with_output_types(typing.Text)\n+class MyDoFn(beam.DoFn):\n+  def process(self, element):\n+    yield str(element)\n+```\n+\n+One of the advantages of the new form is that you may already be using it\n+in tandem with a static type checker such as mypy, thus getting additional\n+type checking for free.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "746a7eb9beaba7cbd7d386284045e50d20f27d56"}, "originalPosition": 79}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c391f6a8598012947114583708d8d2ca39984734", "author": {"user": {"login": "udim", "name": "Udi Meiri"}}, "url": "https://github.com/apache/beam/commit/c391f6a8598012947114583708d8d2ca39984734", "committedDate": "2020-05-22T01:11:46Z", "message": "[BEAM-8280] Blog post: Python typing changes\n\nCo-authored-by: Chad Dombrova <chadrik@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e376f3da5a71bb40f7cc6c8e9f6d4bfa27fbdde3", "author": {"user": {"login": "udim", "name": "Udi Meiri"}}, "url": "https://github.com/apache/beam/commit/e376f3da5a71bb40f7cc6c8e9f6d4bfa27fbdde3", "committedDate": "2020-05-22T00:41:52Z", "message": "Update website/src/_posts/2020-03-06-python-typing.md\n\nCo-authored-by: Chad Dombrova <chadrik@gmail.com>"}, "afterCommit": {"oid": "c391f6a8598012947114583708d8d2ca39984734", "author": {"user": {"login": "udim", "name": "Udi Meiri"}}, "url": "https://github.com/apache/beam/commit/c391f6a8598012947114583708d8d2ca39984734", "committedDate": "2020-05-22T01:11:46Z", "message": "[BEAM-8280] Blog post: Python typing changes\n\nCo-authored-by: Chad Dombrova <chadrik@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9b95061e4b49035e916615745be8a60a8b74c630", "author": {"user": {"login": "udim", "name": "Udi Meiri"}}, "url": "https://github.com/apache/beam/commit/9b95061e4b49035e916615745be8a60a8b74c630", "committedDate": "2020-05-22T02:04:19Z", "message": "Added excerpt and reworked sidebar."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f7151cb3ea38831b05de7588b677f31d3c77350b", "author": {"user": {"login": "udim", "name": "Udi Meiri"}}, "url": "https://github.com/apache/beam/commit/f7151cb3ea38831b05de7588b677f31d3c77350b", "committedDate": "2020-05-22T02:13:39Z", "message": "Rename file to match new style and update headers\n\nMore cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9a0bae90ba213e4d63bd21aa3a222e5ba1e191fe", "author": {"user": {"login": "udim", "name": "Udi Meiri"}}, "url": "https://github.com/apache/beam/commit/9a0bae90ba213e4d63bd21aa3a222e5ba1e191fe", "committedDate": "2020-05-22T02:47:16Z", "message": "More fixes, blog with dates in the future don't\n\nappear so I changed the date today."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e7f7edc62a607ab124e6513b68b20fb9179c68d", "author": {"user": {"login": "udim", "name": "Udi Meiri"}}, "url": "https://github.com/apache/beam/commit/7e7f7edc62a607ab124e6513b68b20fb9179c68d", "committedDate": "2020-05-22T06:12:35Z", "message": "Also update link to blog post"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "94a3635eb57126686d300ba245e49e9af83ce9cf", "author": {"user": {"login": "udim", "name": "Udi Meiri"}}, "url": "https://github.com/apache/beam/commit/94a3635eb57126686d300ba245e49e9af83ce9cf", "committedDate": "2020-05-28T17:23:47Z", "message": "Update date to today"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3093, "cost": 1, "resetAt": "2021-10-28T16:48:13Z"}}}