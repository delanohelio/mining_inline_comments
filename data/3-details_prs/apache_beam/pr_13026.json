{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk5MTMxMjc5", "number": 13026, "title": "[BEAM-7003 BEAM-8639 BEAM-8774] Update Kafka dependencies, enable IT test in Postcommit", "bodyText": "Update Kafka dependencies to the latest stable versions\nAdd tests for previous compatible versions\nAdd possibility to use testcontainers in the IT test suite\n\n\nThank you for your contribution! Follow this checklist to help us incorporate your contribution quickly and easily:\n\n Choose reviewer(s) and mention them in a comment (R: @username).\n Format the pull request title like [BEAM-XXX] Fixes bug in ApproximateQuantiles, where you replace BEAM-XXX with the appropriate JIRA issue, if applicable. This will automatically link the pull request to the issue.\n Update CHANGES.md with noteworthy changes.\n If this contribution is large, please file an Apache Individual Contributor License Agreement.\n\nSee the Contributor Guide for more tips on how to make review process smoother.\nPost-Commit Tests Status (on master branch)\n\n\n\nLang\nSDK\nDataflow\nFlink\nSamza\nSpark\nTwister2\n\n\n\n\nGo\n\n---\n\n---\n\n---\n\n\nJava\n\n\n\n\n\n\n\n\nPython\n\n\n\n---\n\n---\n\n\nXLang\n\n---\n\n---\n\n---\n\n\n\nPre-Commit Tests Status (on master branch)\n\n\n\n---\nJava\nPython\nGo\nWebsite\nWhitespace\nTypescript\n\n\n\n\nNon-portable\n\n \n\n\n\n\n\n\nPortable\n---\n\n---\n---\n---\n---\n\n\n\nSee .test-infra/jenkins/README for trigger phrase, status and link of all Jenkins jobs.\nGitHub Actions Tests Status (on master branch)\n\n\n\nSee CI.md for more information about GitHub Actions CI.", "createdAt": "2020-10-07T10:01:15Z", "url": "https://github.com/apache/beam/pull/13026", "merged": true, "mergeCommit": {"oid": "4ba51cdb24da5b3707d32e593f46bca042f5800f"}, "closed": true, "closedAt": "2020-11-30T14:28:26Z", "author": {"login": "piotr-szuberski"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdQKCllABqjM4NDk2NzEzNzM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdhmMzngFqTU0MDk1NzQ3Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5ffb59497e778c738de4a5a8e621fe38f11b4fe8", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/5ffb59497e778c738de4a5a8e621fe38f11b4fe8", "committedDate": "2020-10-02T11:13:41Z", "message": "Remove the hack to use 2.1.0 version of kafka clients in io/kafka"}, "afterCommit": {"oid": "000ac07f2883d4708b6abbfc935fd004405aae19", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/000ac07f2883d4708b6abbfc935fd004405aae19", "committedDate": "2020-10-07T10:01:43Z", "message": "Remove the hack to use 2.1.0 version of kafka clients in io/kafka"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "000ac07f2883d4708b6abbfc935fd004405aae19", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/000ac07f2883d4708b6abbfc935fd004405aae19", "committedDate": "2020-10-07T10:01:43Z", "message": "Remove the hack to use 2.1.0 version of kafka clients in io/kafka"}, "afterCommit": {"oid": "8a7d821fae28ab8545ac71f47796170df11d1b5f", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/8a7d821fae28ab8545ac71f47796170df11d1b5f", "committedDate": "2020-10-11T00:54:16Z", "message": "[BEAM-8639 BEAM-8774] Update kafka_2.11 from 1.0.0 to 2.4.1 and kafka-clients to 2.6.0"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8a7d821fae28ab8545ac71f47796170df11d1b5f", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/8a7d821fae28ab8545ac71f47796170df11d1b5f", "committedDate": "2020-10-11T00:54:16Z", "message": "[BEAM-8639 BEAM-8774] Update kafka_2.11 from 1.0.0 to 2.4.1 and kafka-clients to 2.6.0"}, "afterCommit": {"oid": "5885e43a9f31f1b29611c096d007e6f4e0004965", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/5885e43a9f31f1b29611c096d007e6f4e0004965", "committedDate": "2020-11-09T14:37:36Z", "message": "[BEAM-8639 BEAM-8774] Update Kafka dependencies and add tests for the previous versions"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5885e43a9f31f1b29611c096d007e6f4e0004965", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/5885e43a9f31f1b29611c096d007e6f4e0004965", "committedDate": "2020-11-09T14:37:36Z", "message": "[BEAM-8639 BEAM-8774] Update Kafka dependencies and add tests for the previous versions"}, "afterCommit": {"oid": "5648bc00e71aca5006c92c20edd927f60242cf27", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/5648bc00e71aca5006c92c20edd927f60242cf27", "committedDate": "2020-11-09T14:51:19Z", "message": "[BEAM-7003 BEAM-8639 BEAM-8774] Update Kafka dependencies and add tests for the previous versions"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5648bc00e71aca5006c92c20edd927f60242cf27", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/5648bc00e71aca5006c92c20edd927f60242cf27", "committedDate": "2020-11-09T14:51:19Z", "message": "[BEAM-7003 BEAM-8639 BEAM-8774] Update Kafka dependencies and add tests for the previous versions"}, "afterCommit": {"oid": "321315cea9c4e7f06bc3e02bb3bae2e1cab97b17", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/321315cea9c4e7f06bc3e02bb3bae2e1cab97b17", "committedDate": "2020-11-09T21:32:54Z", "message": "[BEAM-7003 BEAM-8639 BEAM-8774] Update Kafka dependencies and add tests for the previous versions"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMwMTQ2Nzk3", "url": "https://github.com/apache/beam/pull/13026#pullrequestreview-530146797", "createdAt": "2020-11-13T15:15:55Z", "commit": {"oid": "321315cea9c4e7f06bc3e02bb3bae2e1cab97b17"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QxNToxNTo1NVrOHyyUNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QxNToyMjozMlrOHyylRA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzAxNTIyMw==", "bodyText": "Will it require to include all these different Kafka client version jars into regular build as deps?", "url": "https://github.com/apache/beam/pull/13026#discussion_r523015223", "createdAt": "2020-11-13T15:15:55Z", "author": {"login": "aromanenko-dev"}, "path": "sdks/java/io/kafka/build.gradle", "diffHunk": "@@ -65,26 +76,68 @@ dependencies {\n   testCompile library.java.junit\n   testCompile library.java.powermock\n   testCompile library.java.powermock_mockito\n+  testCompile library.java.testcontainers_kafka\n   testRuntimeOnly library.java.slf4j_jdk14\n   testRuntimeOnly project(path: \":runners:direct-java\", configuration: \"shadow\")\n-  kafkaVersion210 \"org.apache.kafka:kafka-clients:2.1.0\"\n+  kafkaVersions.each {\"kafkaVersion$it.key\" \"org.apache.kafka:kafka-clients:$it.value\"}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "321315cea9c4e7f06bc3e02bb3bae2e1cab97b17"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzAxOTU4OA==", "bodyText": "I think this task was used to run KafkaIO unit tests against specific client version. It's not a case now?", "url": "https://github.com/apache/beam/pull/13026#discussion_r523019588", "createdAt": "2020-11-13T15:22:32Z", "author": {"login": "aromanenko-dev"}, "path": "sdks/java/io/kafka/build.gradle", "diffHunk": "@@ -65,26 +76,68 @@ dependencies {\n   testCompile library.java.junit\n   testCompile library.java.powermock\n   testCompile library.java.powermock_mockito\n+  testCompile library.java.testcontainers_kafka\n   testRuntimeOnly library.java.slf4j_jdk14\n   testRuntimeOnly project(path: \":runners:direct-java\", configuration: \"shadow\")\n-  kafkaVersion210 \"org.apache.kafka:kafka-clients:2.1.0\"\n+  kafkaVersions.each {\"kafkaVersion$it.key\" \"org.apache.kafka:kafka-clients:$it.value\"}\n }\n \n-configurations.kafkaVersion210 {\n-  resolutionStrategy {\n-    force \"org.apache.kafka:kafka-clients:2.1.0\"\n+kafkaVersions.each { kv ->\n+  configurations.\"kafkaVersion$kv.key\" {\n+    resolutionStrategy {\n+      force \"org.apache.kafka:kafka-clients:$kv.value\"\n+    }\n   }\n }\n \n-task kafkaVersion210Test(type: Test) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "321315cea9c4e7f06bc3e02bb3bae2e1cab97b17"}, "originalPosition": 55}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "321315cea9c4e7f06bc3e02bb3bae2e1cab97b17", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/321315cea9c4e7f06bc3e02bb3bae2e1cab97b17", "committedDate": "2020-11-09T21:32:54Z", "message": "[BEAM-7003 BEAM-8639 BEAM-8774] Update Kafka dependencies and add tests for the previous versions"}, "afterCommit": {"oid": "d15f3d030969cf96eeab312da40911d7227bc0cc", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/d15f3d030969cf96eeab312da40911d7227bc0cc", "committedDate": "2020-11-13T20:28:04Z", "message": "[BEAM-7003 BEAM-8639 BEAM-8774] Update Kafka dependencies and add tests for the previous versions"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d15f3d030969cf96eeab312da40911d7227bc0cc", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/d15f3d030969cf96eeab312da40911d7227bc0cc", "committedDate": "2020-11-13T20:28:04Z", "message": "[BEAM-7003 BEAM-8639 BEAM-8774] Update Kafka dependencies and add tests for the previous versions"}, "afterCommit": {"oid": "3309f670077755cf7a44e8e76171835cdd1ca7f1", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/3309f670077755cf7a44e8e76171835cdd1ca7f1", "committedDate": "2020-11-16T12:14:20Z", "message": "[BEAM-7003 BEAM-8639 BEAM-8774] Update Kafka dependencies and add tests for the previous versions"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3309f670077755cf7a44e8e76171835cdd1ca7f1", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/3309f670077755cf7a44e8e76171835cdd1ca7f1", "committedDate": "2020-11-16T12:14:20Z", "message": "[BEAM-7003 BEAM-8639 BEAM-8774] Update Kafka dependencies and add tests for the previous versions"}, "afterCommit": {"oid": "84fbee776f114e0e05ec3c746b1aa23107ecff24", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/84fbee776f114e0e05ec3c746b1aa23107ecff24", "committedDate": "2020-11-16T12:15:30Z", "message": "[BEAM-7003 BEAM-8639 BEAM-8774] Update Kafka dependencies and add tests for the previous versions"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "84fbee776f114e0e05ec3c746b1aa23107ecff24", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/84fbee776f114e0e05ec3c746b1aa23107ecff24", "committedDate": "2020-11-16T12:15:30Z", "message": "[BEAM-7003 BEAM-8639 BEAM-8774] Update Kafka dependencies and add tests for the previous versions"}, "afterCommit": {"oid": "dbba3aafef2385ead1fb8e352fe2241c682408cb", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/dbba3aafef2385ead1fb8e352fe2241c682408cb", "committedDate": "2020-11-16T12:26:23Z", "message": "[BEAM-7003 BEAM-8639 BEAM-8774] Update Kafka dependencies and add tests for the previous versions"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dbba3aafef2385ead1fb8e352fe2241c682408cb", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/dbba3aafef2385ead1fb8e352fe2241c682408cb", "committedDate": "2020-11-16T12:26:23Z", "message": "[BEAM-7003 BEAM-8639 BEAM-8774] Update Kafka dependencies and add tests for the previous versions"}, "afterCommit": {"oid": "f7d06baa0a098475cd45f497efa6581ac5d75e7b", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/f7d06baa0a098475cd45f497efa6581ac5d75e7b", "committedDate": "2020-11-16T18:39:10Z", "message": "[BEAM-7003 BEAM-8639 BEAM-8774] Update Kafka dependencies and add tests for the previous versions"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f7d06baa0a098475cd45f497efa6581ac5d75e7b", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/f7d06baa0a098475cd45f497efa6581ac5d75e7b", "committedDate": "2020-11-16T18:39:10Z", "message": "[BEAM-7003 BEAM-8639 BEAM-8774] Update Kafka dependencies and add tests for the previous versions"}, "afterCommit": {"oid": "7a4660b180e21d682b4079c9c9e6bfbff9f3f7d6", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/7a4660b180e21d682b4079c9c9e6bfbff9f3f7d6", "committedDate": "2020-11-17T14:21:55Z", "message": "[BEAM-7003 BEAM-8639 BEAM-8774] Update Kafka dependencies and add tests for the previous versions"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c355a97f4602b621be029949f85b6d2e5160cece", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/c355a97f4602b621be029949f85b6d2e5160cece", "committedDate": "2020-11-18T21:39:25Z", "message": "add 0.9.0 version to check if the approach actually works on Jenkins"}, "afterCommit": {"oid": "bd392dc87195eb0567177746838b2840443a9262", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/bd392dc87195eb0567177746838b2840443a9262", "committedDate": "2020-11-23T08:54:00Z", "message": "[BEAM-7003 BEAM-8639 BEAM-8774] Update Kafka dependencies and add tests for the previous versions"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "195e60d8c36f1e9b5a63da61f6cebb0275b6e336", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/195e60d8c36f1e9b5a63da61f6cebb0275b6e336", "committedDate": "2020-11-25T11:54:29Z", "message": "Try to rename test reports xml files"}, "afterCommit": {"oid": "8b2a7f33bd7f858eeaf6c0d05aaf26d9457dfe13", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/8b2a7f33bd7f858eeaf6c0d05aaf26d9457dfe13", "committedDate": "2020-11-25T13:49:14Z", "message": "Try to rename test reports xml files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1ff41dba9507c7b279b4b5a5ae0e4f25712dd86", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/d1ff41dba9507c7b279b4b5a5ae0e4f25712dd86", "committedDate": "2020-11-26T17:34:03Z", "message": "[BEAM-7003 BEAM-8639 BEAM-8774] Update Kafka dependencies and add tests for the previous versions"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8b2a7f33bd7f858eeaf6c0d05aaf26d9457dfe13", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/8b2a7f33bd7f858eeaf6c0d05aaf26d9457dfe13", "committedDate": "2020-11-25T13:49:14Z", "message": "Try to rename test reports xml files"}, "afterCommit": {"oid": "d1ff41dba9507c7b279b4b5a5ae0e4f25712dd86", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/d1ff41dba9507c7b279b4b5a5ae0e4f25712dd86", "committedDate": "2020-11-26T17:34:03Z", "message": "[BEAM-7003 BEAM-8639 BEAM-8774] Update Kafka dependencies and add tests for the previous versions"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQwOTU3NDc2", "url": "https://github.com/apache/beam/pull/13026#pullrequestreview-540957476", "createdAt": "2020-11-30T14:27:07Z", "commit": {"oid": "d1ff41dba9507c7b279b4b5a5ae0e4f25712dd86"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2312, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}