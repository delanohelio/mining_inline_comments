{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE1Njk2OTEy", "number": 13264, "title": "[BEAM-9547] Add basic support for `DataFrame.{eval,query}`", "bodyText": "Adds support for executing eval and query as element-wise methods. Restricts most kwargs to their defaults for simplicity, only parser, engine and truediv are still allowed to be changed.\nThis PR also includes a commit to pass *args through maybe_inplace as not having it breaks eval.\nPost-Commit Tests Status (on master branch)\n\n\n\nLang\nSDK\nDataflow\nFlink\nSamza\nSpark\nTwister2\n\n\n\n\nGo\n\n---\n\n---\n\n---\n\n\nJava\n\n\n\n\n\n\n\n\nPython\n\n\n\n---\n\n---\n\n\nXLang\n\n---\n\n---\n\n---\n\n\n\nPre-Commit Tests Status (on master branch)\n\n\n\n---\nJava\nPython\nGo\nWebsite\nWhitespace\nTypescript\n\n\n\n\nNon-portable\n\n \n\n\n\n\n\n\nPortable\n---\n\n---\n---\n---\n---\n\n\n\nSee .test-infra/jenkins/README for trigger phrase, status and link of all Jenkins jobs.\nGitHub Actions Tests Status (on master branch)\n\n\n\nSee CI.md for more information about GitHub Actions CI.", "createdAt": "2020-11-04T23:30:24Z", "url": "https://github.com/apache/beam/pull/13264", "merged": true, "mergeCommit": {"oid": "96610c9c0f56a21e4e06388bb83685131b3b1c55"}, "closed": true, "closedAt": "2020-11-09T22:01:58Z", "author": {"login": "TheNeuralBit"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdZWajBgFqTUyMzgxMjAwNA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABda694WgH2gAyNTE1Njk2OTEyOmRjYjVjZmZlN2U1OTgyM2M4NzQ3NWJiYjE3MDhhYjJmYjEzOTdhNzY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIzODEyMDA0", "url": "https://github.com/apache/beam/pull/13264#pullrequestreview-523812004", "createdAt": "2020-11-04T23:32:14Z", "commit": {"oid": "8eed466263bcc6fb2894687ba126424a4367f132"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQyMzozMjoxNVrOHttdUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQyMzozMjoxNVrOHttdUw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzY5Mjc1NQ==", "bodyText": "Currently if the user specifies a local variable in expr with @<local> this will fail at construction time (when generating the proxy), but the error message isn't helpful, it just indicates <local> doesn't exist.", "url": "https://github.com/apache/beam/pull/13264#discussion_r517692755", "createdAt": "2020-11-04T23:32:15Z", "author": {"login": "TheNeuralBit"}, "path": "sdks/python/apache_beam/dataframe/frames.py", "diffHunk": "@@ -1069,6 +1069,23 @@ def dropna(self, axis, **kwargs):\n             preserves_partition_by=partitionings.Singleton(),\n             requires_partition_by=requires_partition_by))\n \n+\n+  # TODO(BEAM-XXXX): support @<local> in eval and query. Currently fails in\n+  # proxy generation", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8eed466263bcc6fb2894687ba126424a4367f132"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c60b16bfe728930e31abf6984ddaa56ac5eaa8f", "author": {"user": {"login": "TheNeuralBit", "name": "Brian Hulette"}}, "url": "https://github.com/apache/beam/commit/8c60b16bfe728930e31abf6984ddaa56ac5eaa8f", "committedDate": "2020-11-04T23:32:49Z", "message": "Add basic Dataframe eval/query support"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb6a5bb4bbc6745c3deb6027d5e734de0ab2501b", "author": {"user": {"login": "TheNeuralBit", "name": "Brian Hulette"}}, "url": "https://github.com/apache/beam/commit/cb6a5bb4bbc6745c3deb6027d5e734de0ab2501b", "committedDate": "2020-11-04T23:33:54Z", "message": "Pass through *args in maybe_inplace"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8eed466263bcc6fb2894687ba126424a4367f132", "author": {"user": {"login": "TheNeuralBit", "name": "Brian Hulette"}}, "url": "https://github.com/apache/beam/commit/8eed466263bcc6fb2894687ba126424a4367f132", "committedDate": "2020-11-04T23:07:22Z", "message": "Pass through *args in maybe_inplace"}, "afterCommit": {"oid": "cb6a5bb4bbc6745c3deb6027d5e734de0ab2501b", "author": {"user": {"login": "TheNeuralBit", "name": "Brian Hulette"}}, "url": "https://github.com/apache/beam/commit/cb6a5bb4bbc6745c3deb6027d5e734de0ab2501b", "committedDate": "2020-11-04T23:33:54Z", "message": "Pass through *args in maybe_inplace"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0NTMyODIz", "url": "https://github.com/apache/beam/pull/13264#pullrequestreview-524532823", "createdAt": "2020-11-05T18:07:23Z", "commit": {"oid": "cb6a5bb4bbc6745c3deb6027d5e734de0ab2501b"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQxODowNzoyM1rOHuQBgQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQwNzoyOTo1NVrOHui1Kw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODI1OTA3Mw==", "bodyText": "This is dangerous, as it won't catch if inplace was passed as a non-keyword argument.", "url": "https://github.com/apache/beam/pull/13264#discussion_r518259073", "createdAt": "2020-11-05T18:07:23Z", "author": {"login": "robertwb"}, "path": "sdks/python/apache_beam/dataframe/frame_base.py", "diffHunk": "@@ -318,8 +318,8 @@ def wrapper(self, *args, **kwargs):\n \n def maybe_inplace(func):\n   @functools.wraps(func)\n-  def wrapper(self, inplace=False, **kwargs):\n-    result = func(self, **kwargs)\n+  def wrapper(self, *args, inplace=False, **kwargs):", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cb6a5bb4bbc6745c3deb6027d5e734de0ab2501b"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODU2NzIxMQ==", "bodyText": "Go ahead and create the jira. Can we give a better message if @ is in the expression?", "url": "https://github.com/apache/beam/pull/13264#discussion_r518567211", "createdAt": "2020-11-06T07:29:55Z", "author": {"login": "robertwb"}, "path": "sdks/python/apache_beam/dataframe/frames.py", "diffHunk": "@@ -1069,6 +1069,23 @@ def dropna(self, axis, **kwargs):\n             preserves_partition_by=partitionings.Singleton(),\n             requires_partition_by=requires_partition_by))\n \n+\n+  # TODO(BEAM-XXXX): support @<local> in eval and query. Currently fails in\n+  # proxy generation", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzY5Mjc1NQ=="}, "originalCommit": {"oid": "8eed466263bcc6fb2894687ba126424a4367f132"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "30a2f71a09d216c863fbd6a9dfab881ebe9cd7e5", "author": {"user": {"login": "TheNeuralBit", "name": "Brian Hulette"}}, "url": "https://github.com/apache/beam/commit/30a2f71a09d216c863fbd6a9dfab881ebe9cd7e5", "committedDate": "2020-11-07T01:47:24Z", "message": "Add explicit check for @<local>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "51b9bc1da95dc17803ce35982b557fe7168a4f21", "author": {"user": {"login": "TheNeuralBit", "name": "Brian Hulette"}}, "url": "https://github.com/apache/beam/commit/51b9bc1da95dc17803ce35982b557fe7168a4f21", "committedDate": "2020-11-07T01:48:26Z", "message": "Revert \"Pass through *args in maybe_inplace\"\n\nThis reverts commit cb6a5bb4bbc6745c3deb6027d5e734de0ab2501b."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2NjE3MjU0", "url": "https://github.com/apache/beam/pull/13264#pullrequestreview-526617254", "createdAt": "2020-11-09T20:12:26Z", "commit": {"oid": "51b9bc1da95dc17803ce35982b557fe7168a4f21"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c05050bd942081c80756494d3c1f2438583ce6c", "author": {"user": {"login": "TheNeuralBit", "name": "Brian Hulette"}}, "url": "https://github.com/apache/beam/commit/8c05050bd942081c80756494d3c1f2438583ce6c", "committedDate": "2020-11-09T20:41:05Z", "message": "Fix unsupported kwargs check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dcb5cffe7e59823c87475bbb1708ab2fb1397a76", "author": {"user": {"login": "TheNeuralBit", "name": "Brian Hulette"}}, "url": "https://github.com/apache/beam/commit/dcb5cffe7e59823c87475bbb1708ab2fb1397a76", "committedDate": "2020-11-09T20:41:21Z", "message": "lint"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1896, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}