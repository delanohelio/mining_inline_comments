{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQyNDU5Njkx", "number": 12145, "title": "[BEAM-10136] [BEAM-10135] Add JdbcIO for cross-language with python wrapper", "bodyText": "Encountered problems:\n\nFor now the python transforms are very limited as RowCoder is yet to be upgraded:\n\n\nWrite can accept only primitive types without boolean, bytes\nRead can accept even more limited types because LogicalTypes are not implemented in python\n\n\nWrite transform uses JdbcIO.write() - it would be better to use writeRows() with automated Row coder when it's implemented.\n\nIn general coders need to be upgraded before these transforms are usable.\nR: @TheNeuralBit\n\nThank you for your contribution! Follow this checklist to help us incorporate your contribution quickly and easily:\n\n Choose reviewer(s) and mention them in a comment (R: @username).\n Format the pull request title like [BEAM-XXX] Fixes bug in ApproximateQuantiles, where you replace BEAM-XXX with the appropriate JIRA issue, if applicable. This will automatically link the pull request to the issue.\n Update CHANGES.md with noteworthy changes.\n If this contribution is large, please file an Apache Individual Contributor License Agreement.\n\nSee the Contributor Guide for more tips on how to make review process smoother.\nPost-Commit Tests Status (on master branch)\n\n\n\nLang\nSDK\nDataflow\nFlink\nSamza\nSpark\nTwister2\n\n\n\n\nGo\n\n---\n\n---\n\n---\n\n\nJava\n\n\n\n\n\n\n\n\nPython\n\n\n\n---\n\n---\n\n\nXLang\n---\n---\n\n---\n---\n\n\n\n\nPre-Commit Tests Status (on master branch)\n\n\n\n---\nJava\nPython\nGo\nWebsite\n\n\n\n\nNon-portable\n\n\n\n\n\n\nPortable\n---\n\n---\n---\n\n\n\nSee .test-infra/jenkins/README for trigger phrase, status and link of all Jenkins jobs.", "createdAt": "2020-07-01T05:52:12Z", "url": "https://github.com/apache/beam/pull/12145", "merged": true, "mergeCommit": {"oid": "e6b9ee57bab285fbe1f453ac567843da9debe337"}, "closed": true, "closedAt": "2020-07-20T06:40:29Z", "author": {"login": "piotr-szuberski"}, "timelineItems": {"totalCount": 59, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcwkCFDABqjM1MDA4Mjk3OTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc16fpqAFqTQ1MDk2MDgwNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5933e3a386bfa3a13c4765f40a10b973fffbe324", "author": {"user": {"login": "piotr-szuberski", "name": "Piotr Szuberski"}}, "url": "https://github.com/apache/beam/commit/5933e3a386bfa3a13c4765f40a10b973fffbe324", "committedDate": "2020-07-01T06:05:23Z", "message": "Update build.gradle"}, "afterCommit": {"oid": "2d4f92aeb85b441037dba8f80ca3ca57791efb40", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/2d4f92aeb85b441037dba8f80ca3ca57791efb40", "committedDate": "2020-07-01T06:11:54Z", "message": "[BEAM-10135] Add jdbc xlang read"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2d4f92aeb85b441037dba8f80ca3ca57791efb40", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/2d4f92aeb85b441037dba8f80ca3ca57791efb40", "committedDate": "2020-07-01T06:11:54Z", "message": "[BEAM-10135] Add jdbc xlang read"}, "afterCommit": {"oid": "9f8adf0d80898e852a2014d2157dafa9afe31853", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/9f8adf0d80898e852a2014d2157dafa9afe31853", "committedDate": "2020-07-01T07:11:16Z", "message": "[BEAM-10135] Add jdbc xlang read"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9f8adf0d80898e852a2014d2157dafa9afe31853", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/9f8adf0d80898e852a2014d2157dafa9afe31853", "committedDate": "2020-07-01T07:11:16Z", "message": "[BEAM-10135] Add jdbc xlang read"}, "afterCommit": {"oid": "400188bf81318d9257c00dda8f4f6528458fc8ee", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/400188bf81318d9257c00dda8f4f6528458fc8ee", "committedDate": "2020-07-01T07:37:23Z", "message": "[BEAM-10135] Add jdbc xlang read"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "400188bf81318d9257c00dda8f4f6528458fc8ee", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/400188bf81318d9257c00dda8f4f6528458fc8ee", "committedDate": "2020-07-01T07:37:23Z", "message": "[BEAM-10135] Add jdbc xlang read"}, "afterCommit": {"oid": "2da703eb22e9735504ff69a76f62d91f8ed2d779", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/2da703eb22e9735504ff69a76f62d91f8ed2d779", "committedDate": "2020-07-01T08:43:43Z", "message": "[BEAM-10135] Add jdbc xlang read"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2da703eb22e9735504ff69a76f62d91f8ed2d779", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/2da703eb22e9735504ff69a76f62d91f8ed2d779", "committedDate": "2020-07-01T08:43:43Z", "message": "[BEAM-10135] Add jdbc xlang read"}, "afterCommit": {"oid": "909fdefd7e2afe7db42b36738852d0a63f79f6b0", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/909fdefd7e2afe7db42b36738852d0a63f79f6b0", "committedDate": "2020-07-01T10:16:59Z", "message": "[BEAM-10136][BEAM-10135] Add info to changes and website"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "909fdefd7e2afe7db42b36738852d0a63f79f6b0", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/909fdefd7e2afe7db42b36738852d0a63f79f6b0", "committedDate": "2020-07-01T10:16:59Z", "message": "[BEAM-10136][BEAM-10135] Add info to changes and website"}, "afterCommit": {"oid": "079a4939623190c2105f5a717ba9f12cfd48af1e", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/079a4939623190c2105f5a717ba9f12cfd48af1e", "committedDate": "2020-07-01T10:21:35Z", "message": "[BEAM-10136][BEAM-10135] Add info to changes and website"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "079a4939623190c2105f5a717ba9f12cfd48af1e", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/079a4939623190c2105f5a717ba9f12cfd48af1e", "committedDate": "2020-07-01T10:21:35Z", "message": "[BEAM-10136][BEAM-10135] Add info to changes and website"}, "afterCommit": {"oid": "7244bb824821283a351dc504d3b132e72038e7d3", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/7244bb824821283a351dc504d3b132e72038e7d3", "committedDate": "2020-07-01T17:39:08Z", "message": "[BEAM-10136][BEAM-10135] Add info to changes and website"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7244bb824821283a351dc504d3b132e72038e7d3", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/7244bb824821283a351dc504d3b132e72038e7d3", "committedDate": "2020-07-01T17:39:08Z", "message": "[BEAM-10136][BEAM-10135] Add info to changes and website"}, "afterCommit": {"oid": "6223f564eac9ac90727e59ec17849487629465ca", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/6223f564eac9ac90727e59ec17849487629465ca", "committedDate": "2020-07-02T06:49:45Z", "message": "[BEAM-10136][BEAM-10135] Add info to CHANGES.md and portability website"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6223f564eac9ac90727e59ec17849487629465ca", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/6223f564eac9ac90727e59ec17849487629465ca", "committedDate": "2020-07-02T06:49:45Z", "message": "[BEAM-10136][BEAM-10135] Add info to CHANGES.md and portability website"}, "afterCommit": {"oid": "dc4e8de83a4f737ae3ca40694c9621dea6e2ca15", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/dc4e8de83a4f737ae3ca40694c9621dea6e2ca15", "committedDate": "2020-07-02T06:57:15Z", "message": "[BEAM-10171] Add info about Cross-language JdbcIO to CHANGES.md and portability website"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dc4e8de83a4f737ae3ca40694c9621dea6e2ca15", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/dc4e8de83a4f737ae3ca40694c9621dea6e2ca15", "committedDate": "2020-07-02T06:57:15Z", "message": "[BEAM-10171] Add info about Cross-language JdbcIO to CHANGES.md and portability website"}, "afterCommit": {"oid": "61acea79a67ec3efb08e4e52e45bff9740490067", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/61acea79a67ec3efb08e4e52e45bff9740490067", "committedDate": "2020-07-02T09:52:03Z", "message": "[BEAM-10171] Add info about Cross-language JdbcIO to CHANGES.md and portability website"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "61acea79a67ec3efb08e4e52e45bff9740490067", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/61acea79a67ec3efb08e4e52e45bff9740490067", "committedDate": "2020-07-02T09:52:03Z", "message": "[BEAM-10171] Add info about Cross-language JdbcIO to CHANGES.md and portability website"}, "afterCommit": {"oid": "13b0f61a406fdc6fe2a8b966f93d6900f443506a", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/13b0f61a406fdc6fe2a8b966f93d6900f443506a", "committedDate": "2020-07-02T10:45:15Z", "message": "[BEAM-10171] Add info about Cross-language JdbcIO to CHANGES.md and portability website"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "13b0f61a406fdc6fe2a8b966f93d6900f443506a", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/13b0f61a406fdc6fe2a8b966f93d6900f443506a", "committedDate": "2020-07-02T10:45:15Z", "message": "[BEAM-10171] Add info about Cross-language JdbcIO to CHANGES.md and portability website"}, "afterCommit": {"oid": "671b1b1f3dd080c7202fa0dadf881839ab354b7b", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/671b1b1f3dd080c7202fa0dadf881839ab354b7b", "committedDate": "2020-07-05T15:07:20Z", "message": "[BEAM-10171] Add info about Cross-language JdbcIO to CHANGES.md and portability website"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "671b1b1f3dd080c7202fa0dadf881839ab354b7b", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/671b1b1f3dd080c7202fa0dadf881839ab354b7b", "committedDate": "2020-07-05T15:07:20Z", "message": "[BEAM-10171] Add info about Cross-language JdbcIO to CHANGES.md and portability website"}, "afterCommit": {"oid": "859f1d1777b22c4398901f4f1b8a7e79a5564318", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/859f1d1777b22c4398901f4f1b8a7e79a5564318", "committedDate": "2020-07-05T18:04:15Z", "message": "[BEAM-10171] Add info about Cross-language JdbcIO to CHANGES.md and portability website"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "859f1d1777b22c4398901f4f1b8a7e79a5564318", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/859f1d1777b22c4398901f4f1b8a7e79a5564318", "committedDate": "2020-07-05T18:04:15Z", "message": "[BEAM-10171] Add info about Cross-language JdbcIO to CHANGES.md and portability website"}, "afterCommit": {"oid": "bc5b88120aff2767a1864adf2ef73e048de252a9", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/bc5b88120aff2767a1864adf2ef73e048de252a9", "committedDate": "2020-07-05T18:05:48Z", "message": "[BEAM-10171] Add info about Cross-language JdbcIO to CHANGES.md and portability website"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bc5b88120aff2767a1864adf2ef73e048de252a9", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/bc5b88120aff2767a1864adf2ef73e048de252a9", "committedDate": "2020-07-05T18:05:48Z", "message": "[BEAM-10171] Add info about Cross-language JdbcIO to CHANGES.md and portability website"}, "afterCommit": {"oid": "5daf3147a2d4ff890359a2375425d302e90e9a93", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/5daf3147a2d4ff890359a2375425d302e90e9a93", "committedDate": "2020-07-06T09:15:39Z", "message": "[BEAM-10171] Add info about Cross-language JdbcIO to CHANGES.md and portability website"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5daf3147a2d4ff890359a2375425d302e90e9a93", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/5daf3147a2d4ff890359a2375425d302e90e9a93", "committedDate": "2020-07-06T09:15:39Z", "message": "[BEAM-10171] Add info about Cross-language JdbcIO to CHANGES.md and portability website"}, "afterCommit": {"oid": "385cae01d1b860846d872ac18955f1db92f3e71b", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/385cae01d1b860846d872ac18955f1db92f3e71b", "committedDate": "2020-07-06T09:51:16Z", "message": "[BEAM-10171] Add info about Cross-language JdbcIO to CHANGES.md and portability website"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "756c3b97df784b345eb401975676589fd3994b2d", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/756c3b97df784b345eb401975676589fd3994b2d", "committedDate": "2020-07-06T13:13:24Z", "message": "Add localhost differentation like in kafka test"}, "afterCommit": {"oid": "ea242c5b83ad9f2dfb5b7e811f6e9f2a1ba5e71f", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/ea242c5b83ad9f2dfb5b7e811f6e9f2a1ba5e71f", "committedDate": "2020-07-06T13:29:36Z", "message": "Add localhost differentation like in kafka test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ea242c5b83ad9f2dfb5b7e811f6e9f2a1ba5e71f", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/ea242c5b83ad9f2dfb5b7e811f6e9f2a1ba5e71f", "committedDate": "2020-07-06T13:29:36Z", "message": "Add localhost differentation like in kafka test"}, "afterCommit": {"oid": "85d72fe1fb1620f0896626ee6286c246513eb6e0", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/85d72fe1fb1620f0896626ee6286c246513eb6e0", "committedDate": "2020-07-06T11:00:41Z", "message": "Add jdbc dependency to the test expansion service"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9d857fb01665687d5ef7f22a9f08d4c269bf3c92", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/9d857fb01665687d5ef7f22a9f08d4c269bf3c92", "committedDate": "2020-07-07T06:33:22Z", "message": "Try with testExpansionService in python code"}, "afterCommit": {"oid": "300c98406324960c434bc7208f36e49a965349b9", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/300c98406324960c434bc7208f36e49a965349b9", "committedDate": "2020-07-07T06:35:34Z", "message": "Try with testExpansionService in python code"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e19dac8881e3344771c5bbfeea5021ae9daf7e8b", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/e19dac8881e3344771c5bbfeea5021ae9daf7e8b", "committedDate": "2020-07-08T06:25:53Z", "message": "Move execution of Jdbc test to portable postcommit"}, "afterCommit": {"oid": "090a99e14a4369ae2c8b24abc62359cd162cf287", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/090a99e14a4369ae2c8b24abc62359cd162cf287", "committedDate": "2020-07-08T06:37:40Z", "message": "Move execution of Jdbc test to portable postcommit"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "090a99e14a4369ae2c8b24abc62359cd162cf287", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/090a99e14a4369ae2c8b24abc62359cd162cf287", "committedDate": "2020-07-08T06:37:40Z", "message": "Move execution of Jdbc test to portable postcommit"}, "afterCommit": {"oid": "f01ff649aaaba379efb611e24be5b6cc1439d0d9", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/f01ff649aaaba379efb611e24be5b6cc1439d0d9", "committedDate": "2020-07-08T06:38:10Z", "message": "Move execution of Jdbc test to portable postcommit"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f01ff649aaaba379efb611e24be5b6cc1439d0d9", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/f01ff649aaaba379efb611e24be5b6cc1439d0d9", "committedDate": "2020-07-08T06:38:10Z", "message": "Move execution of Jdbc test to portable postcommit"}, "afterCommit": {"oid": "4ea535f7f82f5ea44e14689f27bc0c3111ea4713", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/4ea535f7f82f5ea44e14689f27bc0c3111ea4713", "committedDate": "2020-07-08T08:13:21Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4ea535f7f82f5ea44e14689f27bc0c3111ea4713", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/4ea535f7f82f5ea44e14689f27bc0c3111ea4713", "committedDate": "2020-07-08T08:13:21Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}, "afterCommit": {"oid": "d47c018b74fbd41c35617cafbb142d2f752a7490", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/d47c018b74fbd41c35617cafbb142d2f752a7490", "committedDate": "2020-07-08T08:18:53Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d47c018b74fbd41c35617cafbb142d2f752a7490", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/d47c018b74fbd41c35617cafbb142d2f752a7490", "committedDate": "2020-07-08T08:18:53Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}, "afterCommit": {"oid": "5d059b48a1da4ed5145c0afee958a9f9fa9fe25d", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/5d059b48a1da4ed5145c0afee958a9f9fa9fe25d", "committedDate": "2020-07-08T08:39:17Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5d059b48a1da4ed5145c0afee958a9f9fa9fe25d", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/5d059b48a1da4ed5145c0afee958a9f9fa9fe25d", "committedDate": "2020-07-08T08:39:17Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}, "afterCommit": {"oid": "d1ca780fa37f3a5e5b530e3201976856884abb21", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/d1ca780fa37f3a5e5b530e3201976856884abb21", "committedDate": "2020-07-08T10:18:16Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d1ca780fa37f3a5e5b530e3201976856884abb21", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/d1ca780fa37f3a5e5b530e3201976856884abb21", "committedDate": "2020-07-08T10:18:16Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}, "afterCommit": {"oid": "5eec16547c5b0d2a416f3d193f83d6dbb1c18321", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/5eec16547c5b0d2a416f3d193f83d6dbb1c18321", "committedDate": "2020-07-08T11:23:01Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5eec16547c5b0d2a416f3d193f83d6dbb1c18321", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/5eec16547c5b0d2a416f3d193f83d6dbb1c18321", "committedDate": "2020-07-08T11:23:01Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}, "afterCommit": {"oid": "649ed637239c8c33e86488bdebdcfd0fa6350058", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/649ed637239c8c33e86488bdebdcfd0fa6350058", "committedDate": "2020-07-08T20:52:20Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "649ed637239c8c33e86488bdebdcfd0fa6350058", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/649ed637239c8c33e86488bdebdcfd0fa6350058", "committedDate": "2020-07-08T20:52:20Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}, "afterCommit": {"oid": "439d71dc619de750ce112332bff82a0e1391124c", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/439d71dc619de750ce112332bff82a0e1391124c", "committedDate": "2020-07-09T05:31:03Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1ODc2OTQw", "url": "https://github.com/apache/beam/pull/12145#pullrequestreview-445876940", "createdAt": "2020-07-09T18:43:03Z", "commit": {"oid": "439d71dc619de750ce112332bff82a0e1391124c"}, "state": "APPROVED", "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxODo0MzowM1rOGvdZ7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxOTowNzo1OFrOGveNWQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjQxODAyOQ==", "bodyText": "Looks like this will be in 2.24.0", "url": "https://github.com/apache/beam/pull/12145#discussion_r452418029", "createdAt": "2020-07-09T18:43:03Z", "author": {"login": "TheNeuralBit"}, "path": "CHANGES.md", "diffHunk": "@@ -78,6 +78,8 @@\n   is experimental. It reads data from BigQuery by exporting data to Avro files, and reading those files. It also supports\n   reading data by exporting to JSON files. This has small differences in behavior for Time and Date-related fields. See\n   Pydoc for more information.\n+* Add cross-language support to JdbcIO.ReadRows([BEAM-10135](https://issues.apache.org/jira/browse/BEAM-10135)).\n+* Add cross-language support to JdbcIO.Write([BEAM-10136](https://issues.apache.org/jira/browse/BEAM-10136)).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "439d71dc619de750ce112332bff82a0e1391124c"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjQyMjE5Mw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              \"\"\"An external PTransform which reads Rows from the specified database.\n          \n          \n            \n              \"\"\"A PTransform which reads Rows from the specified database via JDBC.", "url": "https://github.com/apache/beam/pull/12145#discussion_r452422193", "createdAt": "2020-07-09T18:50:54Z", "author": {"login": "TheNeuralBit"}, "path": "sdks/python/apache_beam/io/external/jdbc.py", "diffHunk": "@@ -0,0 +1,254 @@\n+#\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0\n+# (the \"License\"); you may not use this file except in compliance with\n+# the License.  You may obtain a copy of the License at\n+#\n+#    http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+#\n+\n+\"\"\"PTransforms for supporting Jdbc in Python pipelines.\n+\n+  These transforms are currently supported by Beam portable runners (for\n+  example, portable Flink and Spark) as well as Dataflow runner.\n+\n+  **Setup**\n+\n+  Transforms provided in this module are cross-language transforms\n+  implemented in the Beam Java SDK. During the pipeline construction, Python SDK\n+  will connect to a Java expansion service to expand these transforms.\n+  To facilitate this, a small amount of setup is needed before using these\n+  transforms in a Beam Python pipeline.\n+\n+  There are several ways to setup cross-language Jdbc transforms.\n+\n+  * Option 1: use the default expansion service\n+  * Option 2: specify a custom expansion service\n+\n+  See below for details regarding each of these options.\n+\n+  *Option 1: Use the default expansion service*\n+\n+  This is the recommended and easiest setup option for using Python Jdbc\n+  transforms. This option is only available for Beam 2.22.0 and later.\n+\n+  This option requires following pre-requisites before running the Beam\n+  pipeline.\n+\n+  * Install Java runtime in the computer from where the pipeline is constructed\n+    and make sure that 'java' command is available.\n+\n+  In this option, Python SDK will either download (for released Beam version) or\n+  build (when running from a Beam Git clone) a expansion service jar and use\n+  that to expand transforms. Currently Jdbc transforms use the\n+  'beam-sdks-java-io-expansion-service' jar for this purpose.\n+\n+  *Option 2: specify a custom expansion service*\n+\n+  In this option, you startup your own expansion service and provide that as\n+  a parameter when using the transforms provided in this module.\n+\n+  This option requires following pre-requisites before running the Beam\n+  pipeline.\n+\n+  * Startup your own expansion service.\n+  * Update your pipeline to provide the expansion service address when\n+    initiating Jdbc transforms provided in this module.\n+\n+  Flink Users can use the built-in Expansion Service of the Flink Runner's\n+  Job Server. If you start Flink's Job Server, the expansion service will be\n+  started on port 8097. For a different address, please set the\n+  expansion_service parameter.\n+\n+  **More information**\n+\n+  For more information regarding cross-language transforms see:\n+  - https://beam.apache.org/roadmap/portability/\n+\n+  For more information specific to Flink runner see:\n+  - https://beam.apache.org/documentation/runners/flink/\n+\"\"\"\n+\n+# pytype: skip-file\n+\n+from __future__ import absolute_import\n+\n+import typing\n+\n+from past.builtins import unicode\n+\n+from apache_beam.transforms.external import BeamJarExpansionService\n+from apache_beam.transforms.external import ExternalTransform\n+from apache_beam.transforms.external import NamedTupleBasedPayloadBuilder\n+\n+__all__ = [\n+    'WriteToJdbc',\n+    'ReadFromJdbc',\n+]\n+\n+\n+def default_io_expansion_service():\n+  return BeamJarExpansionService('sdks:java:io:expansion-service:shadowJar')\n+\n+\n+WriteToJdbcSchema = typing.NamedTuple(\n+    'WriteToJdbcSchema',\n+    [\n+        ('driver_class_name', unicode),\n+        ('jdbc_url', unicode),\n+        ('username', unicode),\n+        ('password', unicode),\n+        ('connection_properties', typing.Optional[unicode]),\n+        ('connection_init_sqls', typing.Optional[typing.List[unicode]]),\n+        ('statement', unicode),\n+    ],\n+)\n+\n+\n+class WriteToJdbc(ExternalTransform):\n+  \"\"\"An external PTransform which writes Rows to the specified database.\n+\n+  This transform receives Rows defined as NamedTuple type and registered in\n+  the coders registry, e.g.::\n+\n+    ExampleRow = typing.NamedTuple('ExampleRow',\n+                                   [('id', int), ('name', unicode)])\n+    coders.registry.register_coder(ExampleRow, coders.RowCoder)\n+\n+  An example can be found in\n+  `apache_beam.examples.xlang_jdbcio_it_test`\n+  \"\"\"\n+\n+  URN = 'beam:external:java:jdbc:write:v1'\n+\n+  def __init__(\n+      self,\n+      driver_class_name,\n+      jdbc_url,\n+      username,\n+      password,\n+      statement,\n+      connection_properties=None,\n+      connection_init_sqls=None,\n+      expansion_service=None,\n+  ):\n+    \"\"\"\n+    Initializes a write operation to Jdbc.\n+\n+    :param driver_class_name: name of the jdbc driver class\n+    :param jdbc_url: full jdbc url to the database.\n+    :param username: database username\n+    :param password: database password\n+    :param statement: sql statement to be executed\n+    :param connection_properties: properties of the jdbc connection\n+                                  passed as string with format\n+                                  [propertyName=property;]*\n+    :param connection_init_sqls: required only for MySql and MariaDB.\n+                                 passed as list of strings\n+    :param expansion_service: The address (host:port) of the ExpansionService.\n+    \"\"\"\n+\n+    super(WriteToJdbc, self).__init__(\n+        self.URN,\n+        NamedTupleBasedPayloadBuilder(\n+            WriteToJdbcSchema(\n+                driver_class_name=driver_class_name,\n+                jdbc_url=jdbc_url,\n+                username=username,\n+                password=password,\n+                statement=statement,\n+                connection_properties=connection_properties,\n+                connection_init_sqls=connection_init_sqls,\n+            ),\n+        ),\n+        expansion_service or default_io_expansion_service(),\n+    )\n+\n+\n+ReadFromJdbcSchema = typing.NamedTuple(\n+    'ReadFromJdbcSchema',\n+    [\n+        ('driver_class_name', unicode),\n+        ('jdbc_url', unicode),\n+        ('username', unicode),\n+        ('password', unicode),\n+        ('connection_properties', typing.Optional[unicode]),\n+        ('connection_init_sqls', typing.Optional[typing.List[unicode]]),\n+        ('query', unicode),\n+        ('fetch_size', typing.Optional[int]),\n+        ('output_parallelization', typing.Optional[bool]),\n+    ],\n+)\n+\n+\n+class ReadFromJdbc(ExternalTransform):\n+  \"\"\"An external PTransform which reads Rows from the specified database.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "439d71dc619de750ce112332bff82a0e1391124c"}, "originalPosition": 193}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjQyMjQ1Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              \"\"\"An external PTransform which writes Rows to the specified database.\n          \n          \n            \n              \"\"\"A PTransform which writes Rows to the specified database via JDBC.", "url": "https://github.com/apache/beam/pull/12145#discussion_r452422452", "createdAt": "2020-07-09T18:51:19Z", "author": {"login": "TheNeuralBit"}, "path": "sdks/python/apache_beam/io/external/jdbc.py", "diffHunk": "@@ -0,0 +1,254 @@\n+#\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0\n+# (the \"License\"); you may not use this file except in compliance with\n+# the License.  You may obtain a copy of the License at\n+#\n+#    http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+#\n+\n+\"\"\"PTransforms for supporting Jdbc in Python pipelines.\n+\n+  These transforms are currently supported by Beam portable runners (for\n+  example, portable Flink and Spark) as well as Dataflow runner.\n+\n+  **Setup**\n+\n+  Transforms provided in this module are cross-language transforms\n+  implemented in the Beam Java SDK. During the pipeline construction, Python SDK\n+  will connect to a Java expansion service to expand these transforms.\n+  To facilitate this, a small amount of setup is needed before using these\n+  transforms in a Beam Python pipeline.\n+\n+  There are several ways to setup cross-language Jdbc transforms.\n+\n+  * Option 1: use the default expansion service\n+  * Option 2: specify a custom expansion service\n+\n+  See below for details regarding each of these options.\n+\n+  *Option 1: Use the default expansion service*\n+\n+  This is the recommended and easiest setup option for using Python Jdbc\n+  transforms. This option is only available for Beam 2.22.0 and later.\n+\n+  This option requires following pre-requisites before running the Beam\n+  pipeline.\n+\n+  * Install Java runtime in the computer from where the pipeline is constructed\n+    and make sure that 'java' command is available.\n+\n+  In this option, Python SDK will either download (for released Beam version) or\n+  build (when running from a Beam Git clone) a expansion service jar and use\n+  that to expand transforms. Currently Jdbc transforms use the\n+  'beam-sdks-java-io-expansion-service' jar for this purpose.\n+\n+  *Option 2: specify a custom expansion service*\n+\n+  In this option, you startup your own expansion service and provide that as\n+  a parameter when using the transforms provided in this module.\n+\n+  This option requires following pre-requisites before running the Beam\n+  pipeline.\n+\n+  * Startup your own expansion service.\n+  * Update your pipeline to provide the expansion service address when\n+    initiating Jdbc transforms provided in this module.\n+\n+  Flink Users can use the built-in Expansion Service of the Flink Runner's\n+  Job Server. If you start Flink's Job Server, the expansion service will be\n+  started on port 8097. For a different address, please set the\n+  expansion_service parameter.\n+\n+  **More information**\n+\n+  For more information regarding cross-language transforms see:\n+  - https://beam.apache.org/roadmap/portability/\n+\n+  For more information specific to Flink runner see:\n+  - https://beam.apache.org/documentation/runners/flink/\n+\"\"\"\n+\n+# pytype: skip-file\n+\n+from __future__ import absolute_import\n+\n+import typing\n+\n+from past.builtins import unicode\n+\n+from apache_beam.transforms.external import BeamJarExpansionService\n+from apache_beam.transforms.external import ExternalTransform\n+from apache_beam.transforms.external import NamedTupleBasedPayloadBuilder\n+\n+__all__ = [\n+    'WriteToJdbc',\n+    'ReadFromJdbc',\n+]\n+\n+\n+def default_io_expansion_service():\n+  return BeamJarExpansionService('sdks:java:io:expansion-service:shadowJar')\n+\n+\n+WriteToJdbcSchema = typing.NamedTuple(\n+    'WriteToJdbcSchema',\n+    [\n+        ('driver_class_name', unicode),\n+        ('jdbc_url', unicode),\n+        ('username', unicode),\n+        ('password', unicode),\n+        ('connection_properties', typing.Optional[unicode]),\n+        ('connection_init_sqls', typing.Optional[typing.List[unicode]]),\n+        ('statement', unicode),\n+    ],\n+)\n+\n+\n+class WriteToJdbc(ExternalTransform):\n+  \"\"\"An external PTransform which writes Rows to the specified database.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "439d71dc619de750ce112332bff82a0e1391124c"}, "originalPosition": 117}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjQyMjgyMw==", "bodyText": "I think this change and the changes in sdks/java/container/build.gradle are no longer necessary (like the Dockerfile one from here: #12022 (comment)). I think they were required before we had artifact staging.", "url": "https://github.com/apache/beam/pull/12145#discussion_r452422823", "createdAt": "2020-07-09T18:51:54Z", "author": {"login": "TheNeuralBit"}, "path": "sdks/java/container/boot.go", "diffHunk": "@@ -122,6 +122,7 @@ func main() {\n \t\tfilepath.Join(jarsDir, \"beam-sdks-java-harness.jar\"),\n \t\tfilepath.Join(jarsDir, \"beam-sdks-java-io-kafka.jar\"),\n \t\tfilepath.Join(jarsDir, \"kafka-clients.jar\"),\n+\t\tfilepath.Join(jarsDir, \"beam-sdks-java-io-jdbc.jar\"),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "439d71dc619de750ce112332bff82a0e1391124c"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjQyNDQ2MA==", "bodyText": "This looks great, thanks!", "url": "https://github.com/apache/beam/pull/12145#discussion_r452424460", "createdAt": "2020-07-09T18:54:57Z", "author": {"login": "TheNeuralBit"}, "path": "sdks/python/apache_beam/io/external/jdbc.py", "diffHunk": "@@ -0,0 +1,254 @@\n+#\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0\n+# (the \"License\"); you may not use this file except in compliance with\n+# the License.  You may obtain a copy of the License at\n+#\n+#    http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+#\n+\n+\"\"\"PTransforms for supporting Jdbc in Python pipelines.\n+\n+  These transforms are currently supported by Beam portable runners (for\n+  example, portable Flink and Spark) as well as Dataflow runner.\n+\n+  **Setup**\n+\n+  Transforms provided in this module are cross-language transforms\n+  implemented in the Beam Java SDK. During the pipeline construction, Python SDK\n+  will connect to a Java expansion service to expand these transforms.\n+  To facilitate this, a small amount of setup is needed before using these\n+  transforms in a Beam Python pipeline.\n+\n+  There are several ways to setup cross-language Jdbc transforms.\n+\n+  * Option 1: use the default expansion service\n+  * Option 2: specify a custom expansion service\n+\n+  See below for details regarding each of these options.\n+\n+  *Option 1: Use the default expansion service*\n+\n+  This is the recommended and easiest setup option for using Python Jdbc\n+  transforms. This option is only available for Beam 2.22.0 and later.\n+\n+  This option requires following pre-requisites before running the Beam\n+  pipeline.\n+\n+  * Install Java runtime in the computer from where the pipeline is constructed\n+    and make sure that 'java' command is available.\n+\n+  In this option, Python SDK will either download (for released Beam version) or\n+  build (when running from a Beam Git clone) a expansion service jar and use\n+  that to expand transforms. Currently Jdbc transforms use the\n+  'beam-sdks-java-io-expansion-service' jar for this purpose.\n+\n+  *Option 2: specify a custom expansion service*\n+\n+  In this option, you startup your own expansion service and provide that as\n+  a parameter when using the transforms provided in this module.\n+\n+  This option requires following pre-requisites before running the Beam\n+  pipeline.\n+\n+  * Startup your own expansion service.\n+  * Update your pipeline to provide the expansion service address when\n+    initiating Jdbc transforms provided in this module.\n+\n+  Flink Users can use the built-in Expansion Service of the Flink Runner's\n+  Job Server. If you start Flink's Job Server, the expansion service will be\n+  started on port 8097. For a different address, please set the\n+  expansion_service parameter.\n+\n+  **More information**\n+\n+  For more information regarding cross-language transforms see:\n+  - https://beam.apache.org/roadmap/portability/\n+\n+  For more information specific to Flink runner see:\n+  - https://beam.apache.org/documentation/runners/flink/", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "439d71dc619de750ce112332bff82a0e1391124c"}, "originalPosition": 77}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjQyNTk2NA==", "bodyText": "Could you add this dependency in :sdks:java:io:expansion-service instead? I think that would have the same effect, but saves users who don't need it from pulling it in.", "url": "https://github.com/apache/beam/pull/12145#discussion_r452425964", "createdAt": "2020-07-09T18:57:49Z", "author": {"login": "TheNeuralBit"}, "path": "sdks/java/io/jdbc/build.gradle", "diffHunk": "@@ -25,6 +25,7 @@ description = \"Apache Beam :: SDKs :: Java :: IO :: JDBC\"\n ext.summary = \"IO to read and write on JDBC datasource.\"\n \n dependencies {\n+  compile library.java.postgres", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "439d71dc619de750ce112332bff82a0e1391124c"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjQyODgxNw==", "bodyText": "Ah sorry, I see now that this is how you know it's running on Flink and Spark :)", "url": "https://github.com/apache/beam/pull/12145#discussion_r452428817", "createdAt": "2020-07-09T19:03:17Z", "author": {"login": "TheNeuralBit"}, "path": "build.gradle", "diffHunk": "@@ -273,6 +273,7 @@ task python37PostCommit() {\n \n task python38PostCommit() {\n   dependsOn \":sdks:python:test-suites:portable:py38:crossLanguagePythonJavaKafkaIOFlink\"\n+  dependsOn \":sdks:python:test-suites:portable:py38:crossLanguagePythonJavaJdbcIO\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "439d71dc619de750ce112332bff82a0e1391124c"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjQzMTE5Mw==", "bodyText": "wouldn't it be preferable to make false the default? I'd think most tox tasks do not need this.", "url": "https://github.com/apache/beam/pull/12145#discussion_r452431193", "createdAt": "2020-07-09T19:07:58Z", "author": {"login": "TheNeuralBit"}, "path": "buildSrc/src/main/groovy/org/apache/beam/gradle/BeamModulePlugin.groovy", "diffHunk": "@@ -1982,17 +1982,25 @@ class BeamModulePlugin implements Plugin<Project> {\n         return argList.join(' ')\n       }\n \n-      project.ext.toxTask = { name, tox_env ->\n+      project.ext.toxTask = { name, tox_env, needsExpansionServiceJar = true ->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "439d71dc619de750ce112332bff82a0e1391124c"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "df998fb7ceeb33a3ffd69bec4f68f513c7989af9", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/df998fb7ceeb33a3ffd69bec4f68f513c7989af9", "committedDate": "2020-07-10T04:03:57Z", "message": "Add expansion service jar to cython, remove from py2 as it doesn not have testcontainers"}, "afterCommit": {"oid": "6d6cbea658767c87c3df663af4c29c6ba793a088", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/6d6cbea658767c87c3df663af4c29c6ba793a088", "committedDate": "2020-07-10T04:42:04Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2NDk5ODkw", "url": "https://github.com/apache/beam/pull/12145#pullrequestreview-446499890", "createdAt": "2020-07-10T15:35:02Z", "commit": {"oid": "6d6cbea658767c87c3df663af4c29c6ba793a088"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQxNTozNTowMlrOGv7-tg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQxNTozOTowNVrOGv8HzA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjkxODk2Ng==", "bodyText": "nit: It might not be clear why this is here\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              runtime library.java.postgres\n          \n          \n            \n              // Include postgres so it can be used with external JDBC\n          \n          \n            \n              runtime library.java.postgres", "url": "https://github.com/apache/beam/pull/12145#discussion_r452918966", "createdAt": "2020-07-10T15:35:02Z", "author": {"login": "TheNeuralBit"}, "path": "sdks/java/io/expansion-service/build.gradle", "diffHunk": "@@ -33,6 +33,8 @@ ext.summary = \"Expansion service serving several Java IOs\"\n dependencies {\n   compile project(\":sdks:java:expansion-service\")\n   compile project(\":sdks:java:io:kafka\")\n+  runtime project(\":sdks:java:io:jdbc\")\n   runtime library.java.kafka_clients\n+  runtime library.java.postgres", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6d6cbea658767c87c3df663af4c29c6ba793a088"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjkyMTI5Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Add cross-language support to JdbcIO.ReadRows([BEAM-10135](https://issues.apache.org/jira/browse/BEAM-10135)).\n          \n          \n            \n            * Add cross-language support to JdbcIO.Write([BEAM-10136](https://issues.apache.org/jira/browse/BEAM-10136)).\n          \n          \n            \n            * Add cross-language support to Java's JdbcIO, now available in the Python module `apache_beam.io.external.jdbc` ([BEAM-10135](https://issues.apache.org/jira/browse/BEAM-10135), [BEAM-10136](https://issues.apache.org/jira/browse/BEAM-10136)).", "url": "https://github.com/apache/beam/pull/12145#discussion_r452921292", "createdAt": "2020-07-10T15:39:05Z", "author": {"login": "TheNeuralBit"}, "path": "CHANGES.md", "diffHunk": "@@ -55,6 +55,8 @@\n \n * New overloads for BigtableIO.Read.withKeyRange() and BigtableIO.Read.withRowFilter()\n   methods that take ValueProvider as a parameter (Java) ([BEAM-10283](https://issues.apache.org/jira/browse/BEAM-10283)).\n+* Add cross-language support to JdbcIO.ReadRows([BEAM-10135](https://issues.apache.org/jira/browse/BEAM-10135)).\n+* Add cross-language support to JdbcIO.Write([BEAM-10136](https://issues.apache.org/jira/browse/BEAM-10136)).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6d6cbea658767c87c3df663af4c29c6ba793a088"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6d6cbea658767c87c3df663af4c29c6ba793a088", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/6d6cbea658767c87c3df663af4c29c6ba793a088", "committedDate": "2020-07-10T04:42:04Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}, "afterCommit": {"oid": "a9a07c2668a7ec6f3b9a915d56d9672dd4e50f55", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/a9a07c2668a7ec6f3b9a915d56d9672dd4e50f55", "committedDate": "2020-07-10T17:14:41Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2NjA5MjEw", "url": "https://github.com/apache/beam/pull/12145#pullrequestreview-446609210", "createdAt": "2020-07-10T18:26:34Z", "commit": {"oid": "a9a07c2668a7ec6f3b9a915d56d9672dd4e50f55"}, "state": "COMMENTED", "comments": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQxODoyNjozNFrOGwBMxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQxOToxOToyOVrOGwDDAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzAwNDQ4NQ==", "bodyText": "Could you clarify why this copy is needed ? Is building \":sdks:java:io:expansion-service\" inadequate for some reason ?", "url": "https://github.com/apache/beam/pull/12145#discussion_r453004485", "createdAt": "2020-07-10T18:26:34Z", "author": {"login": "chamikaramj"}, "path": "buildSrc/src/main/groovy/org/apache/beam/gradle/BeamModulePlugin.groovy", "diffHunk": "@@ -1982,17 +1982,25 @@ class BeamModulePlugin implements Plugin<Project> {\n         return argList.join(' ')\n       }\n \n-      project.ext.toxTask = { name, tox_env ->\n+      project.ext.toxTask = { name, tox_env, needsExpansionServiceJar = false ->\n+        project.evaluationDependsOn(\":sdks:java:io:expansion-service\")\n         project.tasks.create(name) {\n           dependsOn 'setupVirtualenv'\n           dependsOn ':sdks:python:sdist'\n+          if (needsExpansionServiceJar) {\n+            dependsOn ':sdks:java:io:expansion-service:shadowJar'\n+          }\n \n           doLast {\n             // Python source directory is also tox execution workspace, We want\n             // to isolate them per tox suite to avoid conflict when running\n             // multiple tox suites in parallel.\n             project.copy { from project.pythonSdkDeps; into copiedSrcRoot }\n-\n+            if (needsExpansionServiceJar) {\n+              def expansionServiceJar =  project.project(':sdks:java:io:expansion-service').shadowJar.archivePath\n+              def expansionServiceDestinationDir = \"${copiedSrcRoot}/sdks/java/io/expansion-service/build/libs\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a9a07c2668a7ec6f3b9a915d56d9672dd4e50f55"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzAyMDQ3Mw==", "bodyText": "These runtime dependencies are not included in the shadow jar ? How do they get staged for the runner ?", "url": "https://github.com/apache/beam/pull/12145#discussion_r453020473", "createdAt": "2020-07-10T18:52:45Z", "author": {"login": "chamikaramj"}, "path": "sdks/java/io/expansion-service/build.gradle", "diffHunk": "@@ -33,6 +33,9 @@ ext.summary = \"Expansion service serving several Java IOs\"\n dependencies {\n   compile project(\":sdks:java:expansion-service\")\n   compile project(\":sdks:java:io:kafka\")\n+  runtime project(\":sdks:java:io:jdbc\")\n   runtime library.java.kafka_clients\n+  // Include postgres so it can be used with external JDBC\n+  runtime library.java.postgres", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a9a07c2668a7ec6f3b9a915d56d9672dd4e50f55"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzAyNjcwNA==", "bodyText": "How about renaming this to \"JdbcReadRowsRegistrar\". Current name make this sounds like a transform while in reality this is just a utility to register the existing transform with the expansion service.", "url": "https://github.com/apache/beam/pull/12145#discussion_r453026704", "createdAt": "2020-07-10T19:01:15Z", "author": {"login": "chamikaramj"}, "path": "sdks/java/io/jdbc/src/main/java/org/apache/beam/sdk/io/jdbc/external/JdbcExternalRead.java", "diffHunk": "@@ -0,0 +1,85 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.beam.sdk.io.jdbc.external;\n+\n+import com.google.auto.service.AutoService;\n+import java.util.Map;\n+import org.apache.beam.sdk.annotations.Experimental;\n+import org.apache.beam.sdk.annotations.Experimental.Kind;\n+import org.apache.beam.sdk.expansion.ExternalTransformRegistrar;\n+import org.apache.beam.sdk.io.jdbc.JdbcIO;\n+import org.apache.beam.sdk.io.jdbc.JdbcIO.DataSourceConfiguration;\n+import org.apache.beam.sdk.transforms.ExternalTransformBuilder;\n+import org.apache.beam.sdk.transforms.PTransform;\n+import org.apache.beam.sdk.values.PBegin;\n+import org.apache.beam.sdk.values.PCollection;\n+import org.apache.beam.sdk.values.Row;\n+import org.apache.beam.vendor.guava.v26_0_jre.com.google.common.collect.ImmutableMap;\n+\n+/** Exposes {@link JdbcIO.ReadRows} as an external transform for cross-language usage. */\n+@Experimental(Kind.PORTABILITY)\n+@AutoService(ExternalTransformRegistrar.class)\n+public class JdbcExternalRead implements ExternalTransformRegistrar {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a9a07c2668a7ec6f3b9a915d56d9672dd4e50f55"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzAyNzM3MQ==", "bodyText": "Probably \"beam:external:java:jdbc:read_rows:v1\" is more unique to this transform", "url": "https://github.com/apache/beam/pull/12145#discussion_r453027371", "createdAt": "2020-07-10T19:02:46Z", "author": {"login": "chamikaramj"}, "path": "sdks/java/io/jdbc/src/main/java/org/apache/beam/sdk/io/jdbc/external/JdbcExternalRead.java", "diffHunk": "@@ -0,0 +1,85 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.beam.sdk.io.jdbc.external;\n+\n+import com.google.auto.service.AutoService;\n+import java.util.Map;\n+import org.apache.beam.sdk.annotations.Experimental;\n+import org.apache.beam.sdk.annotations.Experimental.Kind;\n+import org.apache.beam.sdk.expansion.ExternalTransformRegistrar;\n+import org.apache.beam.sdk.io.jdbc.JdbcIO;\n+import org.apache.beam.sdk.io.jdbc.JdbcIO.DataSourceConfiguration;\n+import org.apache.beam.sdk.transforms.ExternalTransformBuilder;\n+import org.apache.beam.sdk.transforms.PTransform;\n+import org.apache.beam.sdk.values.PBegin;\n+import org.apache.beam.sdk.values.PCollection;\n+import org.apache.beam.sdk.values.Row;\n+import org.apache.beam.vendor.guava.v26_0_jre.com.google.common.collect.ImmutableMap;\n+\n+/** Exposes {@link JdbcIO.ReadRows} as an external transform for cross-language usage. */\n+@Experimental(Kind.PORTABILITY)\n+@AutoService(ExternalTransformRegistrar.class)\n+public class JdbcExternalRead implements ExternalTransformRegistrar {\n+\n+  public static final String URN = \"beam:external:java:jdbc:read:v1\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a9a07c2668a7ec6f3b9a915d56d9672dd4e50f55"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzAyODE1NA==", "bodyText": "JdbcWriteRegistrar", "url": "https://github.com/apache/beam/pull/12145#discussion_r453028154", "createdAt": "2020-07-10T19:04:28Z", "author": {"login": "chamikaramj"}, "path": "sdks/java/io/jdbc/src/main/java/org/apache/beam/sdk/io/jdbc/external/JdbcExternalWrite.java", "diffHunk": "@@ -0,0 +1,121 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.beam.sdk.io.jdbc.external;\n+\n+import com.google.auto.service.AutoService;\n+import java.sql.Date;\n+import java.sql.PreparedStatement;\n+import java.sql.SQLException;\n+import java.util.List;\n+import java.util.Map;\n+import org.apache.beam.sdk.annotations.Experimental;\n+import org.apache.beam.sdk.annotations.Experimental.Kind;\n+import org.apache.beam.sdk.expansion.ExternalTransformRegistrar;\n+import org.apache.beam.sdk.io.jdbc.JdbcIO;\n+import org.apache.beam.sdk.io.jdbc.JdbcIO.DataSourceConfiguration;\n+import org.apache.beam.sdk.schemas.Schema;\n+import org.apache.beam.sdk.transforms.ExternalTransformBuilder;\n+import org.apache.beam.sdk.transforms.PTransform;\n+import org.apache.beam.sdk.values.PCollection;\n+import org.apache.beam.sdk.values.PDone;\n+import org.apache.beam.sdk.values.Row;\n+import org.apache.beam.vendor.guava.v26_0_jre.com.google.common.collect.ImmutableMap;\n+\n+/** Exposes {@link JdbcIO.Write} as an external transform for cross-language usage. */\n+@Experimental(Kind.PORTABILITY)\n+@AutoService(ExternalTransformRegistrar.class)\n+public class JdbcExternalWrite implements ExternalTransformRegistrar {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a9a07c2668a7ec6f3b9a915d56d9672dd4e50f55"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzAyODY4Mw==", "bodyText": "How about calling this \"BeamRowPreparedStatementSetter\" and moving this out of external directory ? This sounds like a more generic utility.", "url": "https://github.com/apache/beam/pull/12145#discussion_r453028683", "createdAt": "2020-07-10T19:05:41Z", "author": {"login": "chamikaramj"}, "path": "sdks/java/io/jdbc/src/main/java/org/apache/beam/sdk/io/jdbc/external/JdbcExternalWrite.java", "diffHunk": "@@ -0,0 +1,121 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.beam.sdk.io.jdbc.external;\n+\n+import com.google.auto.service.AutoService;\n+import java.sql.Date;\n+import java.sql.PreparedStatement;\n+import java.sql.SQLException;\n+import java.util.List;\n+import java.util.Map;\n+import org.apache.beam.sdk.annotations.Experimental;\n+import org.apache.beam.sdk.annotations.Experimental.Kind;\n+import org.apache.beam.sdk.expansion.ExternalTransformRegistrar;\n+import org.apache.beam.sdk.io.jdbc.JdbcIO;\n+import org.apache.beam.sdk.io.jdbc.JdbcIO.DataSourceConfiguration;\n+import org.apache.beam.sdk.schemas.Schema;\n+import org.apache.beam.sdk.transforms.ExternalTransformBuilder;\n+import org.apache.beam.sdk.transforms.PTransform;\n+import org.apache.beam.sdk.values.PCollection;\n+import org.apache.beam.sdk.values.PDone;\n+import org.apache.beam.sdk.values.Row;\n+import org.apache.beam.vendor.guava.v26_0_jre.com.google.common.collect.ImmutableMap;\n+\n+/** Exposes {@link JdbcIO.Write} as an external transform for cross-language usage. */\n+@Experimental(Kind.PORTABILITY)\n+@AutoService(ExternalTransformRegistrar.class)\n+public class JdbcExternalWrite implements ExternalTransformRegistrar {\n+\n+  public static final String URN = \"beam:external:java:jdbc:write:v1\";\n+\n+  @Override\n+  public Map<String, Class<? extends ExternalTransformBuilder>> knownBuilders() {\n+    return ImmutableMap.of(URN, JdbcExternalWrite.Builder.class);\n+  }\n+\n+  /** Parameters class to expose the Write transform to an external SDK. */\n+  public static class WriteConfiguration extends Configuration {\n+    private String statement;\n+\n+    public void setStatement(String statement) {\n+      this.statement = statement;\n+    }\n+  }\n+\n+  public static class Builder\n+      implements ExternalTransformBuilder<WriteConfiguration, PCollection<Row>, PDone> {\n+    @Override\n+    public PTransform<PCollection<Row>, PDone> buildExternal(WriteConfiguration configuration) {\n+      DataSourceConfiguration dataSourceConfiguration = configuration.getDataSourceConfiguration();\n+\n+      // TODO: BEAM-10396 use writeRows() when it's available\n+      return JdbcIO.<Row>write()\n+          .withDataSourceConfiguration(dataSourceConfiguration)\n+          .withStatement(configuration.statement)\n+          .withPreparedStatementSetter(new XlangPreparedStatementSetter());\n+    }\n+\n+    private static class XlangPreparedStatementSetter", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a9a07c2668a7ec6f3b9a915d56d9672dd4e50f55"}, "originalPosition": 73}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzAzMTQyOQ==", "bodyText": "Please add unit tests for these conversions.", "url": "https://github.com/apache/beam/pull/12145#discussion_r453031429", "createdAt": "2020-07-10T19:12:11Z", "author": {"login": "chamikaramj"}, "path": "sdks/java/io/jdbc/src/main/java/org/apache/beam/sdk/io/jdbc/external/JdbcExternalWrite.java", "diffHunk": "@@ -0,0 +1,121 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.beam.sdk.io.jdbc.external;\n+\n+import com.google.auto.service.AutoService;\n+import java.sql.Date;\n+import java.sql.PreparedStatement;\n+import java.sql.SQLException;\n+import java.util.List;\n+import java.util.Map;\n+import org.apache.beam.sdk.annotations.Experimental;\n+import org.apache.beam.sdk.annotations.Experimental.Kind;\n+import org.apache.beam.sdk.expansion.ExternalTransformRegistrar;\n+import org.apache.beam.sdk.io.jdbc.JdbcIO;\n+import org.apache.beam.sdk.io.jdbc.JdbcIO.DataSourceConfiguration;\n+import org.apache.beam.sdk.schemas.Schema;\n+import org.apache.beam.sdk.transforms.ExternalTransformBuilder;\n+import org.apache.beam.sdk.transforms.PTransform;\n+import org.apache.beam.sdk.values.PCollection;\n+import org.apache.beam.sdk.values.PDone;\n+import org.apache.beam.sdk.values.Row;\n+import org.apache.beam.vendor.guava.v26_0_jre.com.google.common.collect.ImmutableMap;\n+\n+/** Exposes {@link JdbcIO.Write} as an external transform for cross-language usage. */\n+@Experimental(Kind.PORTABILITY)\n+@AutoService(ExternalTransformRegistrar.class)\n+public class JdbcExternalWrite implements ExternalTransformRegistrar {\n+\n+  public static final String URN = \"beam:external:java:jdbc:write:v1\";\n+\n+  @Override\n+  public Map<String, Class<? extends ExternalTransformBuilder>> knownBuilders() {\n+    return ImmutableMap.of(URN, JdbcExternalWrite.Builder.class);\n+  }\n+\n+  /** Parameters class to expose the Write transform to an external SDK. */\n+  public static class WriteConfiguration extends Configuration {\n+    private String statement;\n+\n+    public void setStatement(String statement) {\n+      this.statement = statement;\n+    }\n+  }\n+\n+  public static class Builder\n+      implements ExternalTransformBuilder<WriteConfiguration, PCollection<Row>, PDone> {\n+    @Override\n+    public PTransform<PCollection<Row>, PDone> buildExternal(WriteConfiguration configuration) {\n+      DataSourceConfiguration dataSourceConfiguration = configuration.getDataSourceConfiguration();\n+\n+      // TODO: BEAM-10396 use writeRows() when it's available\n+      return JdbcIO.<Row>write()\n+          .withDataSourceConfiguration(dataSourceConfiguration)\n+          .withStatement(configuration.statement)\n+          .withPreparedStatementSetter(new XlangPreparedStatementSetter());\n+    }\n+\n+    private static class XlangPreparedStatementSetter\n+        implements JdbcIO.PreparedStatementSetter<Row> {\n+      @Override\n+      public void setParameters(Row row, PreparedStatement statement) throws SQLException {\n+        List<Schema.Field> fieldTypes = row.getSchema().getFields();\n+        for (int i = 0; i < fieldTypes.size(); ++i) {\n+          Schema.TypeName typeName = fieldTypes.get(i).getType().getTypeName();\n+          switch (typeName) {\n+            case DATETIME:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a9a07c2668a7ec6f3b9a915d56d9672dd4e50f55"}, "originalPosition": 81}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzAzMTY0Nw==", "bodyText": "Please move this to io module directly. \"apache_beam/io/jdbc.py\"", "url": "https://github.com/apache/beam/pull/12145#discussion_r453031647", "createdAt": "2020-07-10T19:12:47Z", "author": {"login": "chamikaramj"}, "path": "sdks/python/apache_beam/io/external/jdbc.py", "diffHunk": "@@ -0,0 +1,254 @@\n+#\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a9a07c2668a7ec6f3b9a915d56d9672dd4e50f55"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzAzMTk1NA==", "bodyText": "Is support for Dataflow runner confirmed and tested ?", "url": "https://github.com/apache/beam/pull/12145#discussion_r453031954", "createdAt": "2020-07-10T19:13:24Z", "author": {"login": "chamikaramj"}, "path": "sdks/python/apache_beam/io/external/jdbc.py", "diffHunk": "@@ -0,0 +1,254 @@\n+#\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0\n+# (the \"License\"); you may not use this file except in compliance with\n+# the License.  You may obtain a copy of the License at\n+#\n+#    http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+#\n+\n+\"\"\"PTransforms for supporting Jdbc in Python pipelines.\n+\n+  These transforms are currently supported by Beam portable runners (for\n+  example, portable Flink and Spark) as well as Dataflow runner.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a9a07c2668a7ec6f3b9a915d56d9672dd4e50f55"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzAzMjUwNg==", "bodyText": "This should be Beam 2.24.0 for Jdbc.", "url": "https://github.com/apache/beam/pull/12145#discussion_r453032506", "createdAt": "2020-07-10T19:14:27Z", "author": {"login": "chamikaramj"}, "path": "sdks/python/apache_beam/io/external/jdbc.py", "diffHunk": "@@ -0,0 +1,254 @@\n+#\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0\n+# (the \"License\"); you may not use this file except in compliance with\n+# the License.  You may obtain a copy of the License at\n+#\n+#    http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+#\n+\n+\"\"\"PTransforms for supporting Jdbc in Python pipelines.\n+\n+  These transforms are currently supported by Beam portable runners (for\n+  example, portable Flink and Spark) as well as Dataflow runner.\n+\n+  **Setup**\n+\n+  Transforms provided in this module are cross-language transforms\n+  implemented in the Beam Java SDK. During the pipeline construction, Python SDK\n+  will connect to a Java expansion service to expand these transforms.\n+  To facilitate this, a small amount of setup is needed before using these\n+  transforms in a Beam Python pipeline.\n+\n+  There are several ways to setup cross-language Jdbc transforms.\n+\n+  * Option 1: use the default expansion service\n+  * Option 2: specify a custom expansion service\n+\n+  See below for details regarding each of these options.\n+\n+  *Option 1: Use the default expansion service*\n+\n+  This is the recommended and easiest setup option for using Python Jdbc", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a9a07c2668a7ec6f3b9a915d56d9672dd4e50f55"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzAzMzAzNQ==", "bodyText": "How about adding unit tests for Builder classes for read and write ?", "url": "https://github.com/apache/beam/pull/12145#discussion_r453033035", "createdAt": "2020-07-10T19:15:39Z", "author": {"login": "chamikaramj"}, "path": "sdks/java/io/jdbc/src/main/java/org/apache/beam/sdk/io/jdbc/external/JdbcExternalRead.java", "diffHunk": "@@ -0,0 +1,85 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.beam.sdk.io.jdbc.external;\n+\n+import com.google.auto.service.AutoService;\n+import java.util.Map;\n+import org.apache.beam.sdk.annotations.Experimental;\n+import org.apache.beam.sdk.annotations.Experimental.Kind;\n+import org.apache.beam.sdk.expansion.ExternalTransformRegistrar;\n+import org.apache.beam.sdk.io.jdbc.JdbcIO;\n+import org.apache.beam.sdk.io.jdbc.JdbcIO.DataSourceConfiguration;\n+import org.apache.beam.sdk.transforms.ExternalTransformBuilder;\n+import org.apache.beam.sdk.transforms.PTransform;\n+import org.apache.beam.sdk.values.PBegin;\n+import org.apache.beam.sdk.values.PCollection;\n+import org.apache.beam.sdk.values.Row;\n+import org.apache.beam.vendor.guava.v26_0_jre.com.google.common.collect.ImmutableMap;\n+\n+/** Exposes {@link JdbcIO.ReadRows} as an external transform for cross-language usage. */\n+@Experimental(Kind.PORTABILITY)\n+@AutoService(ExternalTransformRegistrar.class)\n+public class JdbcExternalRead implements ExternalTransformRegistrar {\n+\n+  public static final String URN = \"beam:external:java:jdbc:read:v1\";\n+\n+  @Override\n+  public Map<String, Class<? extends ExternalTransformBuilder>> knownBuilders() {\n+    return ImmutableMap.of(URN, JdbcExternalRead.Builder.class);\n+  }\n+\n+  /** Parameters class to expose the Read transform to an external SDK. */\n+  public static class ReadConfiguration extends Configuration {\n+    private String query;\n+    private Integer fetchSize;\n+    private Boolean outputParallelization;\n+\n+    public void setOutputParallelization(Boolean outputParallelization) {\n+      this.outputParallelization = outputParallelization;\n+    }\n+\n+    public void setFetchSize(Integer fetchSize) {\n+      this.fetchSize = fetchSize;\n+    }\n+\n+    public void setQuery(String query) {\n+      this.query = query;\n+    }\n+  }\n+\n+  public static class Builder\n+      implements ExternalTransformBuilder<ReadConfiguration, PBegin, PCollection<Row>> {\n+    @Override\n+    public PTransform<PBegin, PCollection<Row>> buildExternal(ReadConfiguration configuration) {\n+      DataSourceConfiguration dataSourceConfiguration = configuration.getDataSourceConfiguration();\n+\n+      JdbcIO.ReadRows readRows =", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a9a07c2668a7ec6f3b9a915d56d9672dd4e50f55"}, "originalPosition": 71}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzAzNDA0Ng==", "bodyText": "Is this example being added in a separate PR ?", "url": "https://github.com/apache/beam/pull/12145#discussion_r453034046", "createdAt": "2020-07-10T19:17:53Z", "author": {"login": "chamikaramj"}, "path": "sdks/python/apache_beam/io/external/jdbc.py", "diffHunk": "@@ -0,0 +1,254 @@\n+#\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0\n+# (the \"License\"); you may not use this file except in compliance with\n+# the License.  You may obtain a copy of the License at\n+#\n+#    http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+#\n+\n+\"\"\"PTransforms for supporting Jdbc in Python pipelines.\n+\n+  These transforms are currently supported by Beam portable runners (for\n+  example, portable Flink and Spark) as well as Dataflow runner.\n+\n+  **Setup**\n+\n+  Transforms provided in this module are cross-language transforms\n+  implemented in the Beam Java SDK. During the pipeline construction, Python SDK\n+  will connect to a Java expansion service to expand these transforms.\n+  To facilitate this, a small amount of setup is needed before using these\n+  transforms in a Beam Python pipeline.\n+\n+  There are several ways to setup cross-language Jdbc transforms.\n+\n+  * Option 1: use the default expansion service\n+  * Option 2: specify a custom expansion service\n+\n+  See below for details regarding each of these options.\n+\n+  *Option 1: Use the default expansion service*\n+\n+  This is the recommended and easiest setup option for using Python Jdbc\n+  transforms. This option is only available for Beam 2.22.0 and later.\n+\n+  This option requires following pre-requisites before running the Beam\n+  pipeline.\n+\n+  * Install Java runtime in the computer from where the pipeline is constructed\n+    and make sure that 'java' command is available.\n+\n+  In this option, Python SDK will either download (for released Beam version) or\n+  build (when running from a Beam Git clone) a expansion service jar and use\n+  that to expand transforms. Currently Jdbc transforms use the\n+  'beam-sdks-java-io-expansion-service' jar for this purpose.\n+\n+  *Option 2: specify a custom expansion service*\n+\n+  In this option, you startup your own expansion service and provide that as\n+  a parameter when using the transforms provided in this module.\n+\n+  This option requires following pre-requisites before running the Beam\n+  pipeline.\n+\n+  * Startup your own expansion service.\n+  * Update your pipeline to provide the expansion service address when\n+    initiating Jdbc transforms provided in this module.\n+\n+  Flink Users can use the built-in Expansion Service of the Flink Runner's\n+  Job Server. If you start Flink's Job Server, the expansion service will be\n+  started on port 8097. For a different address, please set the\n+  expansion_service parameter.\n+\n+  **More information**\n+\n+  For more information regarding cross-language transforms see:\n+  - https://beam.apache.org/roadmap/portability/\n+\n+  For more information specific to Flink runner see:\n+  - https://beam.apache.org/documentation/runners/flink/\n+\"\"\"\n+\n+# pytype: skip-file\n+\n+from __future__ import absolute_import\n+\n+import typing\n+\n+from past.builtins import unicode\n+\n+from apache_beam.transforms.external import BeamJarExpansionService\n+from apache_beam.transforms.external import ExternalTransform\n+from apache_beam.transforms.external import NamedTupleBasedPayloadBuilder\n+\n+__all__ = [\n+    'WriteToJdbc',\n+    'ReadFromJdbc',\n+]\n+\n+\n+def default_io_expansion_service():\n+  return BeamJarExpansionService('sdks:java:io:expansion-service:shadowJar')\n+\n+\n+WriteToJdbcSchema = typing.NamedTuple(\n+    'WriteToJdbcSchema',\n+    [\n+        ('driver_class_name', unicode),\n+        ('jdbc_url', unicode),\n+        ('username', unicode),\n+        ('password', unicode),\n+        ('connection_properties', typing.Optional[unicode]),\n+        ('connection_init_sqls', typing.Optional[typing.List[unicode]]),\n+        ('statement', unicode),\n+    ],\n+)\n+\n+\n+class WriteToJdbc(ExternalTransform):\n+  \"\"\"A PTransform which writes Rows to the specified database via JDBC.\n+\n+  This transform receives Rows defined as NamedTuple type and registered in\n+  the coders registry, e.g.::\n+\n+    ExampleRow = typing.NamedTuple('ExampleRow',\n+                                   [('id', int), ('name', unicode)])\n+    coders.registry.register_coder(ExampleRow, coders.RowCoder)\n+\n+  An example can be found in", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a9a07c2668a7ec6f3b9a915d56d9672dd4e50f55"}, "originalPosition": 126}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzAzNDU2Mw==", "bodyText": "Let's add a simple code example here to showcase the usage of this transform.", "url": "https://github.com/apache/beam/pull/12145#discussion_r453034563", "createdAt": "2020-07-10T19:19:04Z", "author": {"login": "chamikaramj"}, "path": "sdks/python/apache_beam/io/external/jdbc.py", "diffHunk": "@@ -0,0 +1,254 @@\n+#\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0\n+# (the \"License\"); you may not use this file except in compliance with\n+# the License.  You may obtain a copy of the License at\n+#\n+#    http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+#\n+\n+\"\"\"PTransforms for supporting Jdbc in Python pipelines.\n+\n+  These transforms are currently supported by Beam portable runners (for\n+  example, portable Flink and Spark) as well as Dataflow runner.\n+\n+  **Setup**\n+\n+  Transforms provided in this module are cross-language transforms\n+  implemented in the Beam Java SDK. During the pipeline construction, Python SDK\n+  will connect to a Java expansion service to expand these transforms.\n+  To facilitate this, a small amount of setup is needed before using these\n+  transforms in a Beam Python pipeline.\n+\n+  There are several ways to setup cross-language Jdbc transforms.\n+\n+  * Option 1: use the default expansion service\n+  * Option 2: specify a custom expansion service\n+\n+  See below for details regarding each of these options.\n+\n+  *Option 1: Use the default expansion service*\n+\n+  This is the recommended and easiest setup option for using Python Jdbc\n+  transforms. This option is only available for Beam 2.22.0 and later.\n+\n+  This option requires following pre-requisites before running the Beam\n+  pipeline.\n+\n+  * Install Java runtime in the computer from where the pipeline is constructed\n+    and make sure that 'java' command is available.\n+\n+  In this option, Python SDK will either download (for released Beam version) or\n+  build (when running from a Beam Git clone) a expansion service jar and use\n+  that to expand transforms. Currently Jdbc transforms use the\n+  'beam-sdks-java-io-expansion-service' jar for this purpose.\n+\n+  *Option 2: specify a custom expansion service*\n+\n+  In this option, you startup your own expansion service and provide that as\n+  a parameter when using the transforms provided in this module.\n+\n+  This option requires following pre-requisites before running the Beam\n+  pipeline.\n+\n+  * Startup your own expansion service.\n+  * Update your pipeline to provide the expansion service address when\n+    initiating Jdbc transforms provided in this module.\n+\n+  Flink Users can use the built-in Expansion Service of the Flink Runner's\n+  Job Server. If you start Flink's Job Server, the expansion service will be\n+  started on port 8097. For a different address, please set the\n+  expansion_service parameter.\n+\n+  **More information**\n+\n+  For more information regarding cross-language transforms see:\n+  - https://beam.apache.org/roadmap/portability/\n+\n+  For more information specific to Flink runner see:\n+  - https://beam.apache.org/documentation/runners/flink/\n+\"\"\"\n+\n+# pytype: skip-file\n+\n+from __future__ import absolute_import\n+\n+import typing\n+\n+from past.builtins import unicode\n+\n+from apache_beam.transforms.external import BeamJarExpansionService\n+from apache_beam.transforms.external import ExternalTransform\n+from apache_beam.transforms.external import NamedTupleBasedPayloadBuilder\n+\n+__all__ = [\n+    'WriteToJdbc',\n+    'ReadFromJdbc',\n+]\n+\n+\n+def default_io_expansion_service():\n+  return BeamJarExpansionService('sdks:java:io:expansion-service:shadowJar')\n+\n+\n+WriteToJdbcSchema = typing.NamedTuple(\n+    'WriteToJdbcSchema',\n+    [\n+        ('driver_class_name', unicode),\n+        ('jdbc_url', unicode),\n+        ('username', unicode),\n+        ('password', unicode),\n+        ('connection_properties', typing.Optional[unicode]),\n+        ('connection_init_sqls', typing.Optional[typing.List[unicode]]),\n+        ('statement', unicode),\n+    ],\n+)\n+\n+\n+class WriteToJdbc(ExternalTransform):\n+  \"\"\"A PTransform which writes Rows to the specified database via JDBC.\n+\n+  This transform receives Rows defined as NamedTuple type and registered in\n+  the coders registry, e.g.::\n+\n+    ExampleRow = typing.NamedTuple('ExampleRow',\n+                                   [('id', int), ('name', unicode)])\n+    coders.registry.register_coder(ExampleRow, coders.RowCoder)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a9a07c2668a7ec6f3b9a915d56d9672dd4e50f55"}, "originalPosition": 124}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzAzNDc1NA==", "bodyText": "Ditto regarding adding a simple code example here.", "url": "https://github.com/apache/beam/pull/12145#discussion_r453034754", "createdAt": "2020-07-10T19:19:29Z", "author": {"login": "chamikaramj"}, "path": "sdks/python/apache_beam/io/external/jdbc.py", "diffHunk": "@@ -0,0 +1,254 @@\n+#\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0\n+# (the \"License\"); you may not use this file except in compliance with\n+# the License.  You may obtain a copy of the License at\n+#\n+#    http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+#\n+\n+\"\"\"PTransforms for supporting Jdbc in Python pipelines.\n+\n+  These transforms are currently supported by Beam portable runners (for\n+  example, portable Flink and Spark) as well as Dataflow runner.\n+\n+  **Setup**\n+\n+  Transforms provided in this module are cross-language transforms\n+  implemented in the Beam Java SDK. During the pipeline construction, Python SDK\n+  will connect to a Java expansion service to expand these transforms.\n+  To facilitate this, a small amount of setup is needed before using these\n+  transforms in a Beam Python pipeline.\n+\n+  There are several ways to setup cross-language Jdbc transforms.\n+\n+  * Option 1: use the default expansion service\n+  * Option 2: specify a custom expansion service\n+\n+  See below for details regarding each of these options.\n+\n+  *Option 1: Use the default expansion service*\n+\n+  This is the recommended and easiest setup option for using Python Jdbc\n+  transforms. This option is only available for Beam 2.22.0 and later.\n+\n+  This option requires following pre-requisites before running the Beam\n+  pipeline.\n+\n+  * Install Java runtime in the computer from where the pipeline is constructed\n+    and make sure that 'java' command is available.\n+\n+  In this option, Python SDK will either download (for released Beam version) or\n+  build (when running from a Beam Git clone) a expansion service jar and use\n+  that to expand transforms. Currently Jdbc transforms use the\n+  'beam-sdks-java-io-expansion-service' jar for this purpose.\n+\n+  *Option 2: specify a custom expansion service*\n+\n+  In this option, you startup your own expansion service and provide that as\n+  a parameter when using the transforms provided in this module.\n+\n+  This option requires following pre-requisites before running the Beam\n+  pipeline.\n+\n+  * Startup your own expansion service.\n+  * Update your pipeline to provide the expansion service address when\n+    initiating Jdbc transforms provided in this module.\n+\n+  Flink Users can use the built-in Expansion Service of the Flink Runner's\n+  Job Server. If you start Flink's Job Server, the expansion service will be\n+  started on port 8097. For a different address, please set the\n+  expansion_service parameter.\n+\n+  **More information**\n+\n+  For more information regarding cross-language transforms see:\n+  - https://beam.apache.org/roadmap/portability/\n+\n+  For more information specific to Flink runner see:\n+  - https://beam.apache.org/documentation/runners/flink/\n+\"\"\"\n+\n+# pytype: skip-file\n+\n+from __future__ import absolute_import\n+\n+import typing\n+\n+from past.builtins import unicode\n+\n+from apache_beam.transforms.external import BeamJarExpansionService\n+from apache_beam.transforms.external import ExternalTransform\n+from apache_beam.transforms.external import NamedTupleBasedPayloadBuilder\n+\n+__all__ = [\n+    'WriteToJdbc',\n+    'ReadFromJdbc',\n+]\n+\n+\n+def default_io_expansion_service():\n+  return BeamJarExpansionService('sdks:java:io:expansion-service:shadowJar')\n+\n+\n+WriteToJdbcSchema = typing.NamedTuple(\n+    'WriteToJdbcSchema',\n+    [\n+        ('driver_class_name', unicode),\n+        ('jdbc_url', unicode),\n+        ('username', unicode),\n+        ('password', unicode),\n+        ('connection_properties', typing.Optional[unicode]),\n+        ('connection_init_sqls', typing.Optional[typing.List[unicode]]),\n+        ('statement', unicode),\n+    ],\n+)\n+\n+\n+class WriteToJdbc(ExternalTransform):\n+  \"\"\"A PTransform which writes Rows to the specified database via JDBC.\n+\n+  This transform receives Rows defined as NamedTuple type and registered in\n+  the coders registry, e.g.::\n+\n+    ExampleRow = typing.NamedTuple('ExampleRow',\n+                                   [('id', int), ('name', unicode)])\n+    coders.registry.register_coder(ExampleRow, coders.RowCoder)\n+\n+  An example can be found in\n+  `apache_beam.examples.xlang_jdbcio_it_test`\n+  \"\"\"\n+\n+  URN = 'beam:external:java:jdbc:write:v1'\n+\n+  def __init__(\n+      self,\n+      driver_class_name,\n+      jdbc_url,\n+      username,\n+      password,\n+      statement,\n+      connection_properties=None,\n+      connection_init_sqls=None,\n+      expansion_service=None,\n+  ):\n+    \"\"\"\n+    Initializes a write operation to Jdbc.\n+\n+    :param driver_class_name: name of the jdbc driver class\n+    :param jdbc_url: full jdbc url to the database.\n+    :param username: database username\n+    :param password: database password\n+    :param statement: sql statement to be executed\n+    :param connection_properties: properties of the jdbc connection\n+                                  passed as string with format\n+                                  [propertyName=property;]*\n+    :param connection_init_sqls: required only for MySql and MariaDB.\n+                                 passed as list of strings\n+    :param expansion_service: The address (host:port) of the ExpansionService.\n+    \"\"\"\n+\n+    super(WriteToJdbc, self).__init__(\n+        self.URN,\n+        NamedTupleBasedPayloadBuilder(\n+            WriteToJdbcSchema(\n+                driver_class_name=driver_class_name,\n+                jdbc_url=jdbc_url,\n+                username=username,\n+                password=password,\n+                statement=statement,\n+                connection_properties=connection_properties,\n+                connection_init_sqls=connection_init_sqls,\n+            ),\n+        ),\n+        expansion_service or default_io_expansion_service(),\n+    )\n+\n+\n+ReadFromJdbcSchema = typing.NamedTuple(\n+    'ReadFromJdbcSchema',\n+    [\n+        ('driver_class_name', unicode),\n+        ('jdbc_url', unicode),\n+        ('username', unicode),\n+        ('password', unicode),\n+        ('connection_properties', typing.Optional[unicode]),\n+        ('connection_init_sqls', typing.Optional[typing.List[unicode]]),\n+        ('query', unicode),\n+        ('fetch_size', typing.Optional[int]),\n+        ('output_parallelization', typing.Optional[bool]),\n+    ],\n+)\n+\n+\n+class ReadFromJdbc(ExternalTransform):\n+  \"\"\"A PTransform which reads Rows from the specified database via JDBC.\n+\n+  This transform delivers Rows defined as NamedTuple registered in\n+  the coders registry, e.g.::\n+\n+    ExampleRow = typing.NamedTuple('ExampleRow',\n+                                   [('id', int), ('name', unicode)])\n+    coders.registry.register_coder(ExampleRow, coders.RowCoder)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a9a07c2668a7ec6f3b9a915d56d9672dd4e50f55"}, "originalPosition": 200}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a9a07c2668a7ec6f3b9a915d56d9672dd4e50f55", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/a9a07c2668a7ec6f3b9a915d56d9672dd4e50f55", "committedDate": "2020-07-10T17:14:41Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}, "afterCommit": {"oid": "c53cdb84d2b8e8a823649bd646d6d28697aa1cec", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/c53cdb84d2b8e8a823649bd646d6d28697aa1cec", "committedDate": "2020-07-10T20:53:22Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c53cdb84d2b8e8a823649bd646d6d28697aa1cec", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/c53cdb84d2b8e8a823649bd646d6d28697aa1cec", "committedDate": "2020-07-10T20:53:22Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}, "afterCommit": {"oid": "544aacd6e8b24e7652ec310c00764b9ae7c7f7c2", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/544aacd6e8b24e7652ec310c00764b9ae7c7f7c2", "committedDate": "2020-07-11T06:08:34Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "544aacd6e8b24e7652ec310c00764b9ae7c7f7c2", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/544aacd6e8b24e7652ec310c00764b9ae7c7f7c2", "committedDate": "2020-07-11T06:08:34Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}, "afterCommit": {"oid": "c5454cd24107987b06edfb4a77d176000fa54146", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/c5454cd24107987b06edfb4a77d176000fa54146", "committedDate": "2020-07-11T06:17:21Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c5454cd24107987b06edfb4a77d176000fa54146", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/c5454cd24107987b06edfb4a77d176000fa54146", "committedDate": "2020-07-11T06:17:21Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}, "afterCommit": {"oid": "bcb8f5df583becce16e7c4ff501bacb05a8f3ef6", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/bcb8f5df583becce16e7c4ff501bacb05a8f3ef6", "committedDate": "2020-07-11T06:20:14Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bcb8f5df583becce16e7c4ff501bacb05a8f3ef6", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/bcb8f5df583becce16e7c4ff501bacb05a8f3ef6", "committedDate": "2020-07-11T06:20:14Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}, "afterCommit": {"oid": "b0cf052e93a4d50c7572dcaa24051e594279cca0", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/b0cf052e93a4d50c7572dcaa24051e594279cca0", "committedDate": "2020-07-11T06:28:49Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b0cf052e93a4d50c7572dcaa24051e594279cca0", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/b0cf052e93a4d50c7572dcaa24051e594279cca0", "committedDate": "2020-07-11T06:28:49Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}, "afterCommit": {"oid": "a115bc0920562b5cc41ea959e9eac1e9fbe9baf3", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/a115bc0920562b5cc41ea959e9eac1e9fbe9baf3", "committedDate": "2020-07-13T08:12:57Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a115bc0920562b5cc41ea959e9eac1e9fbe9baf3", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/a115bc0920562b5cc41ea959e9eac1e9fbe9baf3", "committedDate": "2020-07-13T08:12:57Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}, "afterCommit": {"oid": "7b91748df57ef30ad902849af200d06fe1138e74", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/7b91748df57ef30ad902849af200d06fe1138e74", "committedDate": "2020-07-13T09:27:41Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7b91748df57ef30ad902849af200d06fe1138e74", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/7b91748df57ef30ad902849af200d06fe1138e74", "committedDate": "2020-07-13T09:27:41Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}, "afterCommit": {"oid": "17255a59a0e34e942e3d7c0b918e5a8f2a582a43", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/17255a59a0e34e942e3d7c0b918e5a8f2a582a43", "committedDate": "2020-07-14T15:23:04Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "17255a59a0e34e942e3d7c0b918e5a8f2a582a43", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/17255a59a0e34e942e3d7c0b918e5a8f2a582a43", "committedDate": "2020-07-14T15:23:04Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}, "afterCommit": {"oid": "7abf51914584b06e6a7ffafd584ff7e44d0acaea", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/7abf51914584b06e6a7ffafd584ff7e44d0acaea", "committedDate": "2020-07-14T15:33:51Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7abf51914584b06e6a7ffafd584ff7e44d0acaea", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/7abf51914584b06e6a7ffafd584ff7e44d0acaea", "committedDate": "2020-07-14T15:33:51Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}, "afterCommit": {"oid": "17f7bb4069fe90576594510a8dc1b9a16abbc788", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/17f7bb4069fe90576594510a8dc1b9a16abbc788", "committedDate": "2020-07-14T16:45:04Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "17f7bb4069fe90576594510a8dc1b9a16abbc788", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/17f7bb4069fe90576594510a8dc1b9a16abbc788", "committedDate": "2020-07-14T16:45:04Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}, "afterCommit": {"oid": "378c626e7383c975b0dab2917bf0805be04ece45", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/378c626e7383c975b0dab2917bf0805be04ece45", "committedDate": "2020-07-15T08:34:23Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "378c626e7383c975b0dab2917bf0805be04ece45", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/378c626e7383c975b0dab2917bf0805be04ece45", "committedDate": "2020-07-15T08:34:23Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}, "afterCommit": {"oid": "8e5957d4223c84944e6acd534d2e74b39980454b", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/8e5957d4223c84944e6acd534d2e74b39980454b", "committedDate": "2020-07-15T08:47:59Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8e5957d4223c84944e6acd534d2e74b39980454b", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/8e5957d4223c84944e6acd534d2e74b39980454b", "committedDate": "2020-07-15T08:47:59Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}, "afterCommit": {"oid": "5b56f7f5beaedd6a4269152e09ed75ca85f094ac", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/5b56f7f5beaedd6a4269152e09ed75ca85f094ac", "committedDate": "2020-07-15T09:30:24Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5b56f7f5beaedd6a4269152e09ed75ca85f094ac", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/5b56f7f5beaedd6a4269152e09ed75ca85f094ac", "committedDate": "2020-07-15T09:30:24Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}, "afterCommit": {"oid": "ccf95a03749d834d039f51832b8f760c7dc5ff68", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/ccf95a03749d834d039f51832b8f760c7dc5ff68", "committedDate": "2020-07-17T08:01:29Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwNTA1OTg3", "url": "https://github.com/apache/beam/pull/12145#pullrequestreview-450505987", "createdAt": "2020-07-17T09:21:36Z", "commit": {"oid": "ccf95a03749d834d039f51832b8f760c7dc5ff68"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QwOToyMTozNlrOGzL7mg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QwOToyNToyNFrOGzMDkg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjMyNjA0Mg==", "bodyText": "Probably add to other post-commits as well ?", "url": "https://github.com/apache/beam/pull/12145#discussion_r456326042", "createdAt": "2020-07-17T09:21:36Z", "author": {"login": "chamikaramj"}, "path": "build.gradle", "diffHunk": "@@ -273,6 +273,7 @@ task python37PostCommit() {\n \n task python38PostCommit() {\n   dependsOn \":sdks:python:test-suites:portable:py38:crossLanguagePythonJavaKafkaIOFlink\"\n+  dependsOn \":sdks:python:test-suites:portable:py38:crossLanguagePythonJavaJdbcIO\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ccf95a03749d834d039f51832b8f760c7dc5ff68"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjMyODA4Mg==", "bodyText": "Let's mark new transforms here as experimental.", "url": "https://github.com/apache/beam/pull/12145#discussion_r456328082", "createdAt": "2020-07-17T09:25:24Z", "author": {"login": "chamikaramj"}, "path": "sdks/python/apache_beam/io/jdbc.py", "diffHunk": "@@ -0,0 +1,272 @@\n+#\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0\n+# (the \"License\"); you may not use this file except in compliance with\n+# the License.  You may obtain a copy of the License at\n+#\n+#    http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+#\n+\n+\"\"\"PTransforms for supporting Jdbc in Python pipelines.\n+\n+  These transforms are currently supported by Beam portable\n+  Flink and Spark runners.\n+\n+  **Setup**\n+\n+  Transforms provided in this module are cross-language transforms\n+  implemented in the Beam Java SDK. During the pipeline construction, Python SDK\n+  will connect to a Java expansion service to expand these transforms.\n+  To facilitate this, a small amount of setup is needed before using these\n+  transforms in a Beam Python pipeline.\n+\n+  There are several ways to setup cross-language Jdbc transforms.\n+\n+  * Option 1: use the default expansion service\n+  * Option 2: specify a custom expansion service\n+\n+  See below for details regarding each of these options.\n+\n+  *Option 1: Use the default expansion service*\n+\n+  This is the recommended and easiest setup option for using Python Jdbc\n+  transforms. This option is only available for Beam 2.24.0 and later.\n+\n+  This option requires following pre-requisites before running the Beam\n+  pipeline.\n+\n+  * Install Java runtime in the computer from where the pipeline is constructed\n+    and make sure that 'java' command is available.\n+\n+  In this option, Python SDK will either download (for released Beam version) or\n+  build (when running from a Beam Git clone) a expansion service jar and use\n+  that to expand transforms. Currently Jdbc transforms use the\n+  'beam-sdks-java-io-expansion-service' jar for this purpose.\n+\n+  *Option 2: specify a custom expansion service*\n+\n+  In this option, you startup your own expansion service and provide that as\n+  a parameter when using the transforms provided in this module.\n+\n+  This option requires following pre-requisites before running the Beam\n+  pipeline.\n+\n+  * Startup your own expansion service.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ccf95a03749d834d039f51832b8f760c7dc5ff68"}, "originalPosition": 62}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e5ac84a71cfeaa6d8f3f668e994eddf862e8a9e", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/7e5ac84a71cfeaa6d8f3f668e994eddf862e8a9e", "committedDate": "2020-07-17T13:43:35Z", "message": "[BEAM-10136] Add JdbcIO Write Cross-language transform"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "74dcab3f1ed292fd0a3cd68600feb1c01225b3fa", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/74dcab3f1ed292fd0a3cd68600feb1c01225b3fa", "committedDate": "2020-07-17T13:43:35Z", "message": "[BEAM-10135] Add JdbcIO Read Cross-language transform"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ccf95a03749d834d039f51832b8f760c7dc5ff68", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/ccf95a03749d834d039f51832b8f760c7dc5ff68", "committedDate": "2020-07-17T08:01:29Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}, "afterCommit": {"oid": "5a51cc2a79c210c344deb6074498a01a0cc64dca", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/5a51cc2a79c210c344deb6074498a01a0cc64dca", "committedDate": "2020-07-17T13:54:01Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "12c2bb80755494d2163c06ff652a7ff5dc102c3d", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/12c2bb80755494d2163c06ff652a7ff5dc102c3d", "committedDate": "2020-07-17T13:56:30Z", "message": "[BEAM-10135][BEAM-10136] Add Python wrapper for Cross-language JdbcIO transforms"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1f51cb4c8e2265543aa250868534f3de78c22db5", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/1f51cb4c8e2265543aa250868534f3de78c22db5", "committedDate": "2020-07-17T13:56:34Z", "message": "[BEAM-10135][BEAM-10136] Add integration tests for JdbcIO python wrapper"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5a51cc2a79c210c344deb6074498a01a0cc64dca", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/5a51cc2a79c210c344deb6074498a01a0cc64dca", "committedDate": "2020-07-17T13:54:01Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}, "afterCommit": {"oid": "7e7c06f00755a9258c840b02d8c2b613281df87e", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/7e7c06f00755a9258c840b02d8c2b613281df87e", "committedDate": "2020-07-17T13:56:42Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "60ac9d3092687927b28ee8fd6fce8b999c2a3e3b", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/60ac9d3092687927b28ee8fd6fce8b999c2a3e3b", "committedDate": "2020-07-17T18:25:12Z", "message": "Run Jdbc cross-language tests in postcommit instead of separate gradle task"}, "afterCommit": {"oid": "c82c6ecfeb6432f59359a1455fc691f500af71ef", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/c82c6ecfeb6432f59359a1455fc691f500af71ef", "committedDate": "2020-07-17T18:27:30Z", "message": "Run Jdbc cross-language tests in postcommit instead of separate gradle task"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c4b1577b38269e63d939b2b89e2ee9bba930190", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/4c4b1577b38269e63d939b2b89e2ee9bba930190", "committedDate": "2020-07-17T19:44:52Z", "message": "[BEAM-10135][BEAM-10136] AddJdbcIO python wrapper integration tests to Python postcommit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "62a8342fb8558a4bb29505af83ac263ba5fe052d", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/62a8342fb8558a4bb29505af83ac263ba5fe052d", "committedDate": "2020-07-17T19:45:02Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c82c6ecfeb6432f59359a1455fc691f500af71ef", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/c82c6ecfeb6432f59359a1455fc691f500af71ef", "committedDate": "2020-07-17T18:27:30Z", "message": "Run Jdbc cross-language tests in postcommit instead of separate gradle task"}, "afterCommit": {"oid": "62a8342fb8558a4bb29505af83ac263ba5fe052d", "author": {"user": null}, "url": "https://github.com/apache/beam/commit/62a8342fb8558a4bb29505af83ac263ba5fe052d", "committedDate": "2020-07-17T19:45:02Z", "message": "[BEAM-10171] Update the website with JdbcIO cross-language support completed"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwOTYwODA2", "url": "https://github.com/apache/beam/pull/12145#pullrequestreview-450960806", "createdAt": "2020-07-17T21:13:08Z", "commit": {"oid": "62a8342fb8558a4bb29505af83ac263ba5fe052d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3280, "cost": 1, "resetAt": "2021-10-28T16:48:13Z"}}}