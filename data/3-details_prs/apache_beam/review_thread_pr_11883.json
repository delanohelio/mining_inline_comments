{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI2MjEzNDgx", "number": 11883, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNTowOToxOVrOECaDlg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNDo0ODo0MlrOECmO1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwOTU5NTEwOnYy", "diffSide": "RIGHT", "path": "learning/katas/go/Core Transforms/Combine/CombineFn/pkg/task/task.go", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNTowOToxOVrOGe2AsA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNTowOToxOVrOGe2AsA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDk5NTM3Ng==", "bodyText": "Why should the input be casted to float?\nI think since the inputs are all int, the Sum can be int?", "url": "https://github.com/apache/beam/pull/11883#discussion_r434995376", "createdAt": "2020-06-04T05:09:19Z", "author": {"login": "henryken"}, "path": "learning/katas/go/Core Transforms/Combine/CombineFn/pkg/task/task.go", "diffHunk": "@@ -0,0 +1,55 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+//    http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+\n+package task\n+\n+import (\n+\t\"github.com/apache/beam/sdks/go/pkg/beam\"\n+)\n+\n+func ApplyTransform(s beam.Scope, input beam.PCollection) beam.PCollection {\n+\treturn beam.Combine(s, &averageFn{}, input)\n+}\n+\n+type averageAccum struct {\n+\tCount int64\n+\tSum float64\n+}\n+\n+type averageFn struct{}\n+\n+func (c *averageFn) CreateAccumulator() averageAccum {\n+\treturn averageAccum{}\n+}\n+\n+func (c *averageFn) AddInput(accum averageAccum, input int) averageAccum {\n+\taccum.Count++\n+\taccum.Sum += float64(input)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "23795853277a8f3d52d673077336622a67c8246c"}, "originalPosition": 39}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwOTYwODY4OnYy", "diffSide": "RIGHT", "path": "learning/katas/go/Core Transforms/Combine/CombineFn/pkg/task/task.go", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNToxNzozNVrOGe2I3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNToyMzozMFrOGfLSiA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDk5NzQ2OA==", "bodyText": "Is there any good documentation that outlines what function names that need to be implemented?", "url": "https://github.com/apache/beam/pull/11883#discussion_r434997468", "createdAt": "2020-06-04T05:17:35Z", "author": {"login": "henryken"}, "path": "learning/katas/go/Core Transforms/Combine/CombineFn/pkg/task/task.go", "diffHunk": "@@ -0,0 +1,55 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+//    http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+\n+package task\n+\n+import (\n+\t\"github.com/apache/beam/sdks/go/pkg/beam\"\n+)\n+\n+func ApplyTransform(s beam.Scope, input beam.PCollection) beam.PCollection {\n+\treturn beam.Combine(s, &averageFn{}, input)\n+}\n+\n+type averageAccum struct {\n+\tCount int64\n+\tSum float64\n+}\n+\n+type averageFn struct{}\n+\n+func (c *averageFn) CreateAccumulator() averageAccum {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "23795853277a8f3d52d673077336622a67c8246c"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTMwMzc4NA==", "bodyText": "Apologies, I couldn't find any.  I looked into the code for stats.Mean for how this is implemented and tailored this for the katas.", "url": "https://github.com/apache/beam/pull/11883#discussion_r435303784", "createdAt": "2020-06-04T14:30:19Z", "author": {"login": "damondouglas"}, "path": "learning/katas/go/Core Transforms/Combine/CombineFn/pkg/task/task.go", "diffHunk": "@@ -0,0 +1,55 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+//    http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+\n+package task\n+\n+import (\n+\t\"github.com/apache/beam/sdks/go/pkg/beam\"\n+)\n+\n+func ApplyTransform(s beam.Scope, input beam.PCollection) beam.PCollection {\n+\treturn beam.Combine(s, &averageFn{}, input)\n+}\n+\n+type averageAccum struct {\n+\tCount int64\n+\tSum float64\n+}\n+\n+type averageFn struct{}\n+\n+func (c *averageFn) CreateAccumulator() averageAccum {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDk5NzQ2OA=="}, "originalCommit": {"oid": "23795853277a8f3d52d673077336622a67c8246c"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTMxNDc1Nw==", "bodyText": "Ok noted. Thanks for your info.", "url": "https://github.com/apache/beam/pull/11883#discussion_r435314757", "createdAt": "2020-06-04T14:44:39Z", "author": {"login": "henryken"}, "path": "learning/katas/go/Core Transforms/Combine/CombineFn/pkg/task/task.go", "diffHunk": "@@ -0,0 +1,55 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+//    http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+\n+package task\n+\n+import (\n+\t\"github.com/apache/beam/sdks/go/pkg/beam\"\n+)\n+\n+func ApplyTransform(s beam.Scope, input beam.PCollection) beam.PCollection {\n+\treturn beam.Combine(s, &averageFn{}, input)\n+}\n+\n+type averageAccum struct {\n+\tCount int64\n+\tSum float64\n+}\n+\n+type averageFn struct{}\n+\n+func (c *averageFn) CreateAccumulator() averageAccum {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDk5NzQ2OA=="}, "originalCommit": {"oid": "23795853277a8f3d52d673077336622a67c8246c"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTM0NDAwOA==", "bodyText": "Yup. Documentation hasn't been updated meaningfully in a long while. This is on the list of things to do before no longer being experimental.", "url": "https://github.com/apache/beam/pull/11883#discussion_r435344008", "createdAt": "2020-06-04T15:23:30Z", "author": {"login": "lostluck"}, "path": "learning/katas/go/Core Transforms/Combine/CombineFn/pkg/task/task.go", "diffHunk": "@@ -0,0 +1,55 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+//    http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+\n+package task\n+\n+import (\n+\t\"github.com/apache/beam/sdks/go/pkg/beam\"\n+)\n+\n+func ApplyTransform(s beam.Scope, input beam.PCollection) beam.PCollection {\n+\treturn beam.Combine(s, &averageFn{}, input)\n+}\n+\n+type averageAccum struct {\n+\tCount int64\n+\tSum float64\n+}\n+\n+type averageFn struct{}\n+\n+func (c *averageFn) CreateAccumulator() averageAccum {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDk5NzQ2OA=="}, "originalCommit": {"oid": "23795853277a8f3d52d673077336622a67c8246c"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwOTYxMTEwOnYy", "diffSide": "RIGHT", "path": "learning/katas/go/Core Transforms/Combine/CombineFn/pkg/task/task.go", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNToxODo1OFrOGe2Kag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNToxODo1OFrOGe2Kag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDk5Nzg2Ng==", "bodyText": "I would suggest this to be part of answer placeholder as well.", "url": "https://github.com/apache/beam/pull/11883#discussion_r434997866", "createdAt": "2020-06-04T05:18:58Z", "author": {"login": "henryken"}, "path": "learning/katas/go/Core Transforms/Combine/CombineFn/pkg/task/task.go", "diffHunk": "@@ -0,0 +1,55 @@\n+// Licensed to the Apache Software Foundation (ASF) under one or more\n+// contributor license agreements.  See the NOTICE file distributed with\n+// this work for additional information regarding copyright ownership.\n+// The ASF licenses this file to You under the Apache License, Version 2.0\n+// (the \"License\"); you may not use this file except in compliance with\n+// the License.  You may obtain a copy of the License at\n+//\n+//    http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+\n+package task\n+\n+import (\n+\t\"github.com/apache/beam/sdks/go/pkg/beam\"\n+)\n+\n+func ApplyTransform(s beam.Scope, input beam.PCollection) beam.PCollection {\n+\treturn beam.Combine(s, &averageFn{}, input)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "23795853277a8f3d52d673077336622a67c8246c"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxMTU4OTk5OnYy", "diffSide": "RIGHT", "path": "learning/katas/go/Core Transforms/Combine/CombineFn/pkg/task/task.go", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNDo0ODo0M1rOGfJseQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNjozOToyOVrOGfOiwQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTMxNzg4MQ==", "bodyText": "Actually the ExtractOutput type was correct to use float since average can be non-int.", "url": "https://github.com/apache/beam/pull/11883#discussion_r435317881", "createdAt": "2020-06-04T14:48:43Z", "author": {"login": "henryken"}, "path": "learning/katas/go/Core Transforms/Combine/CombineFn/pkg/task/task.go", "diffHunk": "@@ -47,9 +47,9 @@ func (c *averageFn) MergeAccumulators(accumA, accumB averageAccum) averageAccum\n \t}\n }\n \n-func (c *averageFn) ExtractOutput(accum averageAccum) float64 {\n+func (c *averageFn) ExtractOutput(accum averageAccum) int {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c35366781ccf46006e16ba54e74e498e3d8ef982"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTM0OTg2Ng==", "bodyText": "Thank you, Henry.  Are we ok with this then?\nfunc (c *averageFn) ExtractOutput(accum averageAccum) float64 {\n\tif accum.Count == 0 {\n\t\treturn 0\n\t}\n\treturn float64(accum.Sum / accum.Count)\n}", "url": "https://github.com/apache/beam/pull/11883#discussion_r435349866", "createdAt": "2020-06-04T15:31:30Z", "author": {"login": "damondouglas"}, "path": "learning/katas/go/Core Transforms/Combine/CombineFn/pkg/task/task.go", "diffHunk": "@@ -47,9 +47,9 @@ func (c *averageFn) MergeAccumulators(accumA, accumB averageAccum) averageAccum\n \t}\n }\n \n-func (c *averageFn) ExtractOutput(accum averageAccum) float64 {\n+func (c *averageFn) ExtractOutput(accum averageAccum) int {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTMxNzg4MQ=="}, "originalCommit": {"oid": "c35366781ccf46006e16ba54e74e498e3d8ef982"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTM5Mzg4OA==", "bodyText": "I think you should do this in Go?\nreturn float64(accum.Sum) / float64(accum.Count)", "url": "https://github.com/apache/beam/pull/11883#discussion_r435393888", "createdAt": "2020-06-04T16:33:56Z", "author": {"login": "henryken"}, "path": "learning/katas/go/Core Transforms/Combine/CombineFn/pkg/task/task.go", "diffHunk": "@@ -47,9 +47,9 @@ func (c *averageFn) MergeAccumulators(accumA, accumB averageAccum) averageAccum\n \t}\n }\n \n-func (c *averageFn) ExtractOutput(accum averageAccum) float64 {\n+func (c *averageFn) ExtractOutput(accum averageAccum) int {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTMxNzg4MQ=="}, "originalCommit": {"oid": "c35366781ccf46006e16ba54e74e498e3d8ef982"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTM5NzMxMw==", "bodyText": "Henry's right.\nfloat64(accum.Sum / accum.Count) will have integer division fraction truncation errors, while float64(accum.Sum) / float64(accum.Count) will not.\nGo is very specific about requiring explicit conversions between numeric types to avoid this kind of error accidentally.", "url": "https://github.com/apache/beam/pull/11883#discussion_r435397313", "createdAt": "2020-06-04T16:39:29Z", "author": {"login": "lostluck"}, "path": "learning/katas/go/Core Transforms/Combine/CombineFn/pkg/task/task.go", "diffHunk": "@@ -47,9 +47,9 @@ func (c *averageFn) MergeAccumulators(accumA, accumB averageAccum) averageAccum\n \t}\n }\n \n-func (c *averageFn) ExtractOutput(accum averageAccum) float64 {\n+func (c *averageFn) ExtractOutput(accum averageAccum) int {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTMxNzg4MQ=="}, "originalCommit": {"oid": "c35366781ccf46006e16ba54e74e498e3d8ef982"}, "originalPosition": 25}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3751, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}