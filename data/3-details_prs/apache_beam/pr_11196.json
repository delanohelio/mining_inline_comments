{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkyNTI5NTAy", "number": 11196, "title": "[BEAM-9574] Ensure that instances of generated NamedTuple classes can be pickled", "bodyText": "Attempting to pickle an instance of a generated NamedTuple class results in the following:\n_pickle.PicklingError: Can't pickle <class 'apache_beam.typehints.schemas.BeamSchema_a7de91e0_ae11_4c52_a041_0b58ada35ac1'>: attribute lookup BeamSchema_a7de91e0_ae11_4c52_a041_0b58ada35ac1 on apache_beam.typehints.schemas failed\n\nIn general, we shouldn't be pickling these instances, but occasionally it may be necessary, and we should allow it rather than failing hard.\nPost-Commit Tests Status (on master branch)\n\n\n\nLang\nSDK\nApex\nDataflow\nFlink\nGearpump\nSamza\nSpark\n\n\n\n\nGo\n\n---\n---\n\n---\n---\n\n\n\nJava\n\n\n\n\n\n\n\n\n\nPython\n\n---\n\n\n---\n---\n\n\n\nXLang\n---\n---\n---\n\n---\n---\n\n\n\n\nPre-Commit Tests Status (on master branch)\n\n\n\n---\nJava\nPython\nGo\nWebsite\n\n\n\n\nNon-portable\n\n\n\n\n\n\nPortable\n---\n\n---\n---\n\n\n\nSee .test-infra/jenkins/README for trigger phrase, status and link of all Jenkins jobs.", "createdAt": "2020-03-23T17:23:23Z", "url": "https://github.com/apache/beam/pull/11196", "merged": true, "mergeCommit": {"oid": "f5a4a5afcd9425c0ddb9ec9c70067a5d5c0bc769"}, "closed": true, "closedAt": "2020-03-27T00:34:51Z", "author": {"login": "TheNeuralBit"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcQjdtgABqjMxNTY3NjgwNDc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcRg5fSgFqTM4MjMyNjE0MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8e5decea823aadc04af499e7f0e67ed5e7dc2636", "author": {"user": {"login": "TheNeuralBit", "name": "Brian Hulette"}}, "url": "https://github.com/apache/beam/commit/8e5decea823aadc04af499e7f0e67ed5e7dc2636", "committedDate": "2020-03-23T17:20:26Z", "message": "Ensure that instances of generated namedtuple classes can be pickled"}, "afterCommit": {"oid": "bb3295bcc60f83d0959dc3cece582c3be6656879", "author": {"user": {"login": "TheNeuralBit", "name": "Brian Hulette"}}, "url": "https://github.com/apache/beam/commit/bb3295bcc60f83d0959dc3cece582c3be6656879", "committedDate": "2020-03-23T19:27:37Z", "message": "Ensure that instances of generated namedtuple classes can be pickled"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bb3295bcc60f83d0959dc3cece582c3be6656879", "author": {"user": {"login": "TheNeuralBit", "name": "Brian Hulette"}}, "url": "https://github.com/apache/beam/commit/bb3295bcc60f83d0959dc3cece582c3be6656879", "committedDate": "2020-03-23T19:27:37Z", "message": "Ensure that instances of generated namedtuple classes can be pickled"}, "afterCommit": {"oid": "e2c371130d67fe26a62a2be4e9a7455d42d895bb", "author": {"user": {"login": "TheNeuralBit", "name": "Brian Hulette"}}, "url": "https://github.com/apache/beam/commit/e2c371130d67fe26a62a2be4e9a7455d42d895bb", "committedDate": "2020-03-24T00:04:47Z", "message": "Ensure that instances of generated namedtuple classes can be pickled"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "96af8e48864a24865f27656b856a1ee401057dad", "author": {"user": {"login": "TheNeuralBit", "name": "Brian Hulette"}}, "url": "https://github.com/apache/beam/commit/96af8e48864a24865f27656b856a1ee401057dad", "committedDate": "2020-03-25T17:41:39Z", "message": "Ensure that instances of generated namedtuple classes can be pickled"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e2c371130d67fe26a62a2be4e9a7455d42d895bb", "author": {"user": {"login": "TheNeuralBit", "name": "Brian Hulette"}}, "url": "https://github.com/apache/beam/commit/e2c371130d67fe26a62a2be4e9a7455d42d895bb", "committedDate": "2020-03-24T00:04:47Z", "message": "Ensure that instances of generated namedtuple classes can be pickled"}, "afterCommit": {"oid": "96af8e48864a24865f27656b856a1ee401057dad", "author": {"user": {"login": "TheNeuralBit", "name": "Brian Hulette"}}, "url": "https://github.com/apache/beam/commit/96af8e48864a24865f27656b856a1ee401057dad", "committedDate": "2020-03-25T17:41:39Z", "message": "Ensure that instances of generated namedtuple classes can be pickled"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyMzI2MTQw", "url": "https://github.com/apache/beam/pull/11196#pullrequestreview-382326140", "createdAt": "2020-03-26T19:01:58Z", "commit": {"oid": "96af8e48864a24865f27656b856a1ee401057dad"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxOTowMTo1OFrOF8WFaw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxOTowMTo1OFrOF8WFaw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODgyMDcxNQ==", "bodyText": "Does it makes sense to memoize this?", "url": "https://github.com/apache/beam/pull/11196#discussion_r398820715", "createdAt": "2020-03-26T19:01:58Z", "author": {"login": "robertwb"}, "path": "sdks/python/apache_beam/typehints/schemas.py", "diffHunk": "@@ -205,6 +218,11 @@ def typing_from_runner_api(fieldtype_proto):\n     pass  # TODO\n \n \n+def _hydrate_namedtuple_instance(encoded_schema, values):\n+  return named_tuple_from_schema(\n+      proto_utils.parse_Bytes(encoded_schema, schema_pb2.Schema))(*values)\n+\n+\n def named_tuple_from_schema(schema):", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "96af8e48864a24865f27656b856a1ee401057dad"}, "originalPosition": 42}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4615, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}