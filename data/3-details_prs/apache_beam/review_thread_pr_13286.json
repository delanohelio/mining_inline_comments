{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE3OTc0MTky", "number": 13286, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQwMTowNjozN1rOE3eleQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQwMToxMjo1NVrOE3evYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2NjA4MjQ5OnYy", "diffSide": "RIGHT", "path": "sdks/python/apache_beam/dataframe/pandas_docs_test.py", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQwMTowNjozN1rOHw2DbA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxOToyMjo1NFrOHxbDkQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDk3OTMwOA==", "bodyText": "nit: add a help string indicating the default is 0, which will use the cpu count", "url": "https://github.com/apache/beam/pull/13286#discussion_r520979308", "createdAt": "2020-11-11T01:06:37Z", "author": {"login": "TheNeuralBit"}, "path": "sdks/python/apache_beam/dataframe/pandas_docs_test.py", "diffHunk": "@@ -33,10 +39,15 @@\n PANDAS_DIR = os.path.expanduser(\"~/.apache_beam/cache/pandas-\" + PANDAS_VERSION)\n PANDAS_DOCS_SOURCE = os.path.join(PANDAS_DIR, 'doc', 'source')\n \n+parallelism = None\n+\n \n def main():\n-  # Not available for Python 2.\n-  import urllib.request\n+  parser = argparse.ArgumentParser()\n+  parser.add_argument('-p', '--parallel', type=int, default=0)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e4e8dc9bba4710653484b576739f3df21b3791cf"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTU4NTU1Mw==", "bodyText": "Done.", "url": "https://github.com/apache/beam/pull/13286#discussion_r521585553", "createdAt": "2020-11-11T19:22:54Z", "author": {"login": "robertwb"}, "path": "sdks/python/apache_beam/dataframe/pandas_docs_test.py", "diffHunk": "@@ -33,10 +39,15 @@\n PANDAS_DIR = os.path.expanduser(\"~/.apache_beam/cache/pandas-\" + PANDAS_VERSION)\n PANDAS_DOCS_SOURCE = os.path.join(PANDAS_DIR, 'doc', 'source')\n \n+parallelism = None\n+\n \n def main():\n-  # Not available for Python 2.\n-  import urllib.request\n+  parser = argparse.ArgumentParser()\n+  parser.add_argument('-p', '--parallel', type=int, default=0)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDk3OTMwOA=="}, "originalCommit": {"oid": "e4e8dc9bba4710653484b576739f3df21b3791cf"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2NjEwNzg3OnYy", "diffSide": "RIGHT", "path": "sdks/python/apache_beam/dataframe/pandas_docs_test.py", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQwMToxMjo1NVrOHw2ULg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxOToyMjo1MVrOHxbDew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDk4MzU5OA==", "bodyText": "Is this needed because parallelism is used in run_tests? Instead of branching on parallelism inside run_tests could we just make a different method for the parallel vs single-threaded cases?", "url": "https://github.com/apache/beam/pull/13286#discussion_r520983598", "createdAt": "2020-11-11T01:12:55Z", "author": {"login": "TheNeuralBit"}, "path": "sdks/python/apache_beam/dataframe/pandas_docs_test.py", "diffHunk": "@@ -74,22 +85,56 @@ def main():\n         if any(filter in path for filter in filters):\n           paths.append(path)\n \n+  # Using a global here is a bit hacky, but avoids pickling issues when used\n+  # with multiprocessing.\n+  global parallelism", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e4e8dc9bba4710653484b576739f3df21b3791cf"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTU4NTUzMQ==", "bodyText": "Sure.", "url": "https://github.com/apache/beam/pull/13286#discussion_r521585531", "createdAt": "2020-11-11T19:22:51Z", "author": {"login": "robertwb"}, "path": "sdks/python/apache_beam/dataframe/pandas_docs_test.py", "diffHunk": "@@ -74,22 +85,56 @@ def main():\n         if any(filter in path for filter in filters):\n           paths.append(path)\n \n+  # Using a global here is a bit hacky, but avoids pickling issues when used\n+  # with multiprocessing.\n+  global parallelism", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDk4MzU5OA=="}, "originalCommit": {"oid": "e4e8dc9bba4710653484b576739f3df21b3791cf"}, "originalPosition": 48}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2733, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}