{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkxODIwMzk1", "number": 12913, "title": "Minor fixes to the get-started/wordcount-example webpage.", "bodyText": "As I was going through the wordcount example in the Get started tutorial, I've noticed two minor issues.\n\n\nIn the Python example of adding timestamps to data, the AddTimestampFn is initialized with a single parameter, but the class actually takes two, as is visible in the later example, where the class is defined.\n\n\nThe streaming wordcount example, uses deprecated methods ReadStringsFromPubSub and WriteStringsToPubSub. These are replaced by ReadFromPubSub and WriteToPubSub.\n\n\n\nThank you for your contribution! Follow this checklist to help us incorporate your contribution quickly and easily:\n\n Choose reviewer(s) and mention them in a comment (R: @username).\n Format the pull request title like [BEAM-XXX] Fixes bug in ApproximateQuantiles, where you replace BEAM-XXX with the appropriate JIRA issue, if applicable. This will automatically link the pull request to the issue.\n Update CHANGES.md with noteworthy changes.\n If this contribution is large, please file an Apache Individual Contributor License Agreement.\n\nSee the Contributor Guide for more tips on how to make review process smoother.\nPost-Commit Tests Status (on master branch)\n\n\n\nLang\nSDK\nDataflow\nFlink\nSamza\nSpark\nTwister2\n\n\n\n\nGo\n\n---\n\n---\n\n---\n\n\nJava\n\n\n\n\n\n\n\n\nPython\n](https://ci-beam.apache.org/job/beam_PostCommit_Python36/lastCompletedBuild/)\n\n\n---\n\n---\n\n\nXLang\n\n---\n\n---\n\n---\n\n\n\nPre-Commit Tests Status (on master branch)\n\n\n\n---\nJava\nPython\nGo\nWebsite\nWhitespace\nTypescript\n\n\n\n\nNon-portable\n\n \n\n\n\n\n\n\nPortable\n---\n\n---\n---\n---\n---\n\n\n\nSee .test-infra/jenkins/README for trigger phrase, status and link of all Jenkins jobs.\nGitHub Actions Tests Status (on master branch)\n\n\n\nSee CI.md for more information about GitHub Actions CI.", "createdAt": "2020-09-23T14:24:29Z", "url": "https://github.com/apache/beam/pull/12913", "merged": true, "mergeCommit": {"oid": "b138502ef747de4cca33ac3ac184b738e25a313c"}, "closed": true, "closedAt": "2020-10-05T18:11:24Z", "author": {"login": "milancermak"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdLtQJZAH2gAyNDkxODIwMzk1OmM1MGY0YThkZTRkNjQyZDRmNWMyZTQzMjRmYjA4OWY2NjI0YWNjYWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdPn0tPAFqTUwMjMwMDMxMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c50f4a8de4d642d4f5c2e4324fb089f6624accad", "author": {"user": {"login": "milancermak", "name": "Milan Cermak"}}, "url": "https://github.com/apache/beam/commit/c50f4a8de4d642d4f5c2e4324fb089f6624accad", "committedDate": "2020-09-23T14:13:46Z", "message": "Minor fixes to the get-started/wordcount-example webpage.\n\n* Fixes incorrect parameters to the `AddTimestampFn` Python example.\n* Updates deprecated mention of ReadStringsFromPubSub / WriteStringsToPubSub"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxNDQ1NDYz", "url": "https://github.com/apache/beam/pull/12913#pullrequestreview-501445463", "createdAt": "2020-10-02T21:01:51Z", "commit": {"oid": "c50f4a8de4d642d4f5c2e4324fb089f6624accad"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQyMTowMTo1MVrOHb7g-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQyMTowNToxOFrOHb7mUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTA0ODY5OA==", "bodyText": "An important difference is that ReadFromPubSub returns a bytes object (the raw message data).\nI would:\n\nrename lines to data\nadd an additional step below: lines = data | 'DecodeString' >> beam.Map(lambda d: d.decode('utf-8')))", "url": "https://github.com/apache/beam/pull/12913#discussion_r499048698", "createdAt": "2020-10-02T21:01:51Z", "author": {"login": "udim"}, "path": "website/www/site/content/en/get-started/wordcount-example.md", "diffHunk": "@@ -1405,10 +1405,10 @@ messages from a Pub/Sub subscription or topic using\n {{< highlight py >}}\n   # Read from Pub/Sub into a PCollection.\n   if known_args.input_subscription:\n-    lines = p | beam.io.ReadStringsFromPubSub(\n+    lines = p | beam.io.ReadFromPubSub(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c50f4a8de4d642d4f5c2e4324fb089f6624accad"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTA1MDA2NQ==", "bodyText": "Similarly here, assuming that strings are being written they would have to be converted to bytes first.\n_ = (output \n     | 'EncodeString' >> Map(lambda s: s.encode('utf-8'))\n     | beam.io.WriteToPubSub(known_args.output_topic))", "url": "https://github.com/apache/beam/pull/12913#discussion_r499050065", "createdAt": "2020-10-02T21:05:18Z", "author": {"login": "udim"}, "path": "website/www/site/content/en/get-started/wordcount-example.md", "diffHunk": "@@ -1424,15 +1424,15 @@ outputs.\n \n This example uses an unbounded `PCollection` and streams the results to\n Google Pub/Sub. The code formats the results and writes them to a Pub/Sub topic\n-using [`beam.io.WriteStringsToPubSub`](https://beam.apache.org/releases/pydoc/{{< param release_latest >}}/apache_beam.io.gcp.pubsub.html#apache_beam.io.gcp.pubsub.WriteStringsToPubSub).\n+using [`beam.io.WriteToPubSub`](https://beam.apache.org/releases/pydoc/{{< param release_latest >}}/apache_beam.io.gcp.pubsub.html#apache_beam.io.gcp.pubsub.WriteToPubSub).\n \n {{< highlight java >}}\n   // This example is not currently available for the Beam SDK for Java.\n {{< /highlight >}}\n \n {{< highlight py >}}\n   # Write to Pub/Sub\n-  output | beam.io.WriteStringsToPubSub(known_args.output_topic)\n+  output | beam.io.WriteToPubSub(known_args.output_topic)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c50f4a8de4d642d4f5c2e4324fb089f6624accad"}, "originalPosition": 45}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "74e65c0cf96561e0a520a6ea974f6446434e3358", "author": {"user": {"login": "milancermak", "name": "Milan Cermak"}}, "url": "https://github.com/apache/beam/commit/74e65c0cf96561e0a520a6ea974f6446434e3358", "committedDate": "2020-10-03T14:11:06Z", "message": "Decode/encode when reading/writing a string from/to PubSub"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyMzAwMzEz", "url": "https://github.com/apache/beam/pull/12913#pullrequestreview-502300313", "createdAt": "2020-10-05T18:09:58Z", "commit": {"oid": "74e65c0cf96561e0a520a6ea974f6446434e3358"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2491, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}