{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA0OTA0MTk1", "number": 11443, "title": "[BEAM-9775] Add Go support for SDF StandardRequirements.", "bodyText": "This fills in just the SDF requirement for pipelines (defined in\nbeam_runner_api.proto). The way it's implemented should be pretty\nsimple to expand for future requirements too.\n\nThank you for your contribution! Follow this checklist to help us incorporate your contribution quickly and easily:\n\n Choose reviewer(s) and mention them in a comment (R: @username).\n Format the pull request title like [BEAM-XXX] Fixes bug in ApproximateQuantiles, where you replace BEAM-XXX with the appropriate JIRA issue, if applicable. This will automatically link the pull request to the issue.\n Update CHANGES.md with noteworthy changes.\n If this contribution is large, please file an Apache Individual Contributor License Agreement.\n\nSee the Contributor Guide for more tips on how to make review process smoother.\nPost-Commit Tests Status (on master branch)\n\n\n\nLang\nSDK\nApex\nDataflow\nFlink\nGearpump\nSamza\nSpark\n\n\n\n\nGo\n\n---\n---\n\n---\n---\n\n\n\nJava\n\n\n\n\n\n\n\n\n\nPython\n\n---\n\n\n---\n---\n\n\n\nXLang\n---\n---\n---\n\n---\n---\n\n\n\n\nPre-Commit Tests Status (on master branch)\n\n\n\n---\nJava\nPython\nGo\nWebsite\n\n\n\n\nNon-portable\n\n\n\n\n\n\nPortable\n---\n\n---\n---\n\n\n\nSee .test-infra/jenkins/README for trigger phrase, status and link of all Jenkins jobs.", "createdAt": "2020-04-17T03:42:23Z", "url": "https://github.com/apache/beam/pull/11443", "merged": true, "mergeCommit": {"oid": "fbf1775cb7fc5bee0633250f096a845216f6162b"}, "closed": true, "closedAt": "2020-04-20T21:00:27Z", "author": {"login": "youngoli"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcYY5qRAH2gAyNDA0OTA0MTk1OmNkMzYyNzRjNGE1ODkzNzIyODk4YjI1OTM1YWY3MzFhM2MxNDE3YjA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcYqJyVAH2gAyNDA0OTA0MTk1OjU4ZDA0ZmZhMmYyNjllZTI2MzZmMThkNmEzNTEwYjBhYzRkYWQ1OGU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "cd36274c4a5893722898b25935af731a3c1417b0", "author": {"user": {"login": "youngoli", "name": "Daniel Oliveira"}}, "url": "https://github.com/apache/beam/commit/cd36274c4a5893722898b25935af731a3c1417b0", "committedDate": "2020-04-17T03:40:58Z", "message": "[BEAM-9775] Add Go support for SDF StandardRequirements.\n\nThis fills in just the SDF requirement for pipelines (defined in\nbeam_runner_api.proto). The way it's implemented should be pretty\nsimple to expand for future requirements too."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1NjY2NzAz", "url": "https://github.com/apache/beam/pull/11443#pullrequestreview-395666703", "createdAt": "2020-04-17T18:05:42Z", "commit": {"oid": "cd36274c4a5893722898b25935af731a3c1417b0"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QxODowNTo0MlrOGHYApg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QxODozNzoyN1rOGHY_iw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDM4NjU5OA==", "bodyText": "While this is testing the Marshal it's not validating that the Requirements are populated as expected. Consider checking the new change in the resulting proto, if not the length like the other tests.", "url": "https://github.com/apache/beam/pull/11443#discussion_r410386598", "createdAt": "2020-04-17T18:05:42Z", "author": {"login": "lostluck"}, "path": "sdks/go/pkg/beam/core/runtime/graphx/translate_test.go", "diffHunk": "@@ -87,29 +89,38 @@ func TestMarshal(t *testing.T) {\n \t\tname                     string\n \t\tmakeGraph                func(t *testing.T, g *graph.Graph)\n \t\tedges, transforms, roots int\n+\t\trequirements             []string\n \t}{\n \t\t{\n \t\t\tname: \"ParDo\",\n \t\t\tmakeGraph: func(t *testing.T, g *graph.Graph) {\n-\t\t\t\taddDoFn(t, g, pickFn, g.Root(), []*graph.Node{newIntInput(g)}, []*coder.Coder{intCoder(), intCoder()})\n+\t\t\t\taddDoFn(t, g, pickFn, g.Root(), []*graph.Node{newIntInput(g)}, []*coder.Coder{intCoder(), intCoder()}, nil)\n \t\t\t},\n \t\t\tedges:      1,\n \t\t\ttransforms: 1,\n \t\t\troots:      1,\n \t\t}, {\n \t\t\tname: \"ScopedParDo\",\n \t\t\tmakeGraph: func(t *testing.T, g *graph.Graph) {\n-\t\t\t\taddDoFn(t, g, pickFn, g.NewScope(g.Root(), \"sub\"), []*graph.Node{newIntInput(g)}, []*coder.Coder{intCoder(), intCoder()})\n+\t\t\t\taddDoFn(t, g, pickFn, g.NewScope(g.Root(), \"sub\"), []*graph.Node{newIntInput(g)}, []*coder.Coder{intCoder(), intCoder()}, nil)\n \t\t\t},\n \t\t\tedges:      1,\n \t\t\ttransforms: 2,\n \t\t\troots:      1,\n+\t\t}, {\n+\t\t\tname: \"SplittableParDo\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cd36274c4a5893722898b25935af731a3c1417b0"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDQwMjY5OQ==", "bodyText": "This doesn't look like a necessary change, and groups the standard library imports with the rest of them. Consider reverting this change.", "url": "https://github.com/apache/beam/pull/11443#discussion_r410402699", "createdAt": "2020-04-17T18:37:27Z", "author": {"login": "lostluck"}, "path": "sdks/go/pkg/beam/pardo.go", "diffHunk": "@@ -17,10 +17,9 @@ package beam\n \n import (\n \t\"fmt\"\n+\t\"github.com/apache/beam/sdks/go/pkg/beam/core/graph\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cd36274c4a5893722898b25935af731a3c1417b0"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3bce12be0629a9d74e30953a675a38bc41d90e9f", "author": {"user": {"login": "youngoli", "name": "Daniel Oliveira"}}, "url": "https://github.com/apache/beam/commit/3bce12be0629a9d74e30953a675a38bc41d90e9f", "committedDate": "2020-04-17T20:35:55Z", "message": "[BEAM-9775] fixup"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1NzAzODg0", "url": "https://github.com/apache/beam/pull/11443#pullrequestreview-395703884", "createdAt": "2020-04-17T19:04:32Z", "commit": {"oid": "cd36274c4a5893722898b25935af731a3c1417b0"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QxOTowNDozMlrOGHZzVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QxOTowNzozNFrOGHZ4sw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDQxNTk1OA==", "bodyText": "Whoops. That was the plan, but I forgot to actually add the validation. >_<", "url": "https://github.com/apache/beam/pull/11443#discussion_r410415958", "createdAt": "2020-04-17T19:04:32Z", "author": {"login": "youngoli"}, "path": "sdks/go/pkg/beam/core/runtime/graphx/translate_test.go", "diffHunk": "@@ -87,29 +89,38 @@ func TestMarshal(t *testing.T) {\n \t\tname                     string\n \t\tmakeGraph                func(t *testing.T, g *graph.Graph)\n \t\tedges, transforms, roots int\n+\t\trequirements             []string\n \t}{\n \t\t{\n \t\t\tname: \"ParDo\",\n \t\t\tmakeGraph: func(t *testing.T, g *graph.Graph) {\n-\t\t\t\taddDoFn(t, g, pickFn, g.Root(), []*graph.Node{newIntInput(g)}, []*coder.Coder{intCoder(), intCoder()})\n+\t\t\t\taddDoFn(t, g, pickFn, g.Root(), []*graph.Node{newIntInput(g)}, []*coder.Coder{intCoder(), intCoder()}, nil)\n \t\t\t},\n \t\t\tedges:      1,\n \t\t\ttransforms: 1,\n \t\t\troots:      1,\n \t\t}, {\n \t\t\tname: \"ScopedParDo\",\n \t\t\tmakeGraph: func(t *testing.T, g *graph.Graph) {\n-\t\t\t\taddDoFn(t, g, pickFn, g.NewScope(g.Root(), \"sub\"), []*graph.Node{newIntInput(g)}, []*coder.Coder{intCoder(), intCoder()})\n+\t\t\t\taddDoFn(t, g, pickFn, g.NewScope(g.Root(), \"sub\"), []*graph.Node{newIntInput(g)}, []*coder.Coder{intCoder(), intCoder()}, nil)\n \t\t\t},\n \t\t\tedges:      1,\n \t\t\ttransforms: 2,\n \t\t\troots:      1,\n+\t\t}, {\n+\t\t\tname: \"SplittableParDo\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDM4NjU5OA=="}, "originalCommit": {"oid": "cd36274c4a5893722898b25935af731a3c1417b0"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDQxNzMzMQ==", "bodyText": "This shouldn't have been here, just forgot to erase some changes. Reverting it.", "url": "https://github.com/apache/beam/pull/11443#discussion_r410417331", "createdAt": "2020-04-17T19:07:34Z", "author": {"login": "youngoli"}, "path": "sdks/go/pkg/beam/pardo.go", "diffHunk": "@@ -17,10 +17,9 @@ package beam\n \n import (\n \t\"fmt\"\n+\t\"github.com/apache/beam/sdks/go/pkg/beam/core/graph\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDQwMjY5OQ=="}, "originalCommit": {"oid": "cd36274c4a5893722898b25935af731a3c1417b0"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1ODEzMDMz", "url": "https://github.com/apache/beam/pull/11443#pullrequestreview-395813033", "createdAt": "2020-04-17T22:45:16Z", "commit": {"oid": "3bce12be0629a9d74e30953a675a38bc41d90e9f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QyMjo0NToxNlrOGHfKCQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QyMjo0NToxNlrOGHfKCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDUwMzY4OQ==", "bodyText": "Since order doesn't matter for the results, but in the future the SDK might add more than this requirement, consider adding a transformer to sort the slices for the equals check.\nhttps://godoc.corp.google.com/pkg/google3/third_party/golang/cmp/cmp#example_Option_sortedSlice", "url": "https://github.com/apache/beam/pull/11443#discussion_r410503689", "createdAt": "2020-04-17T22:45:16Z", "author": {"login": "lostluck"}, "path": "sdks/go/pkg/beam/core/runtime/graphx/translate_test.go", "diffHunk": "@@ -157,8 +170,34 @@ func TestMarshal(t *testing.T) {\n \t\t\tif got, want := len(p.GetRootTransformIds()), test.roots; got != want {\n \t\t\t\tt.Errorf(\"got %d roots, want %d : %v\", got, want, proto.MarshalTextString(p))\n \t\t\t}\n+\t\t\tif got, want := p.GetRequirements(), test.requirements; !cmp.Equal(got, want) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3bce12be0629a9d74e30953a675a38bc41d90e9f"}, "originalPosition": 93}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "58d04ffa2f269ee2636f18d6a3510b0ac4dad58e", "author": {"user": {"login": "youngoli", "name": "Daniel Oliveira"}}, "url": "https://github.com/apache/beam/commit/58d04ffa2f269ee2636f18d6a3510b0ac4dad58e", "committedDate": "2020-04-17T23:46:58Z", "message": "[BEAM-9775] fixup2"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4267, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}