{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAwODE1NDkz", "number": 8676, "title": "SAK-29425 forums > add percent read and num authored to individual statistics UI", "bodyText": "https://jira.sakaiproject.org/browse/SAK-29425\nUse case: Instructor would like for information displayed in the table on the Statistics page in Forums (msgcntr) to also display on each individual student's page.", "createdAt": "2020-10-09T20:53:19Z", "url": "https://github.com/sakaiproject/sakai/pull/8676", "merged": true, "mergeCommit": {"oid": "e632966f6899d2c766a753233f9975c75ab76617"}, "closed": true, "closedAt": "2020-10-13T19:56:58Z", "author": {"login": "bjones86"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdQ8i11gH2gAyNTAwODE1NDkzOjNkMjZlMGEwZTgxNGY3NTlkN2EzODQ5ZDJhZmQwMDMxYmI1ZjMwODc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdSNMvKgH2gAyNTAwODE1NDkzOmE2ZTlhZWZjMWRiM2YwNmQ5NThjMDU1NzljMTcyMjdhYTk4ZTAyZDI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3d26e0a0e814f759d7a3849d2afd0031bb5f3087", "author": {"user": {"login": "bjones86", "name": "Brian Jones"}}, "url": "https://github.com/sakaiproject/sakai/commit/3d26e0a0e814f759d7a3849d2afd0031bb5f3087", "committedDate": "2020-10-09T20:52:23Z", "message": "SAK-29425 forums > add percent read and num authored to individual statistics UI"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1OTgzMjU2", "url": "https://github.com/sakaiproject/sakai/pull/8676#pullrequestreview-505983256", "createdAt": "2020-10-09T20:54:04Z", "commit": {"oid": "3d26e0a0e814f759d7a3849d2afd0031bb5f3087"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQyMDo1NDowNFrOHfYU-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQyMDo1NDowNFrOHfYU-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjY2NjQ5MQ==", "bodyText": "This can be reduced to 1 line:\ntotalPosts = studentAuthoredStats.stream().map( (pair) -> ((Long) pair[1]).intValue() ).reduce( totalPosts, Integer::sum );\nHowever, I'm not sure if it's more or less readable.", "url": "https://github.com/sakaiproject/sakai/pull/8676#discussion_r502666491", "createdAt": "2020-10-09T20:54:04Z", "author": {"login": "bjones86"}, "path": "msgcntr/messageforums-app/src/java/org/sakaiproject/tool/messageforums/ui/MessageForumStatisticsBean.java", "diffHunk": "@@ -3112,4 +3112,17 @@ private boolean isUseAnonymousId(Topic topic)\n \t\t// Condenses to:\n \t\treturn topic.getPostAnonymous() && (!topic.getRevealIDsToRoles() || !uiPermissionsManager.isIdentifyAnonAuthors((DiscussionTopic) topic));\n \t}\n+\n+    public int getPercentRead()\n+    {\n+        int totalPosts = 0;\n+        List<Object[]> studentAuthoredStats = messageManager.findAuthoredMessageCountForAllStudents();\n+        for (Object[] pair : studentAuthoredStats)\n+        {\n+            totalPosts += ((Long) pair[1]).intValue();\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d26e0a0e814f759d7a3849d2afd0031bb5f3087"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3NzEzNjYw", "url": "https://github.com/sakaiproject/sakai/pull/8676#pullrequestreview-507713660", "createdAt": "2020-10-13T18:19:53Z", "commit": {"oid": "3d26e0a0e814f759d7a3849d2afd0031bb5f3087"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxODoxOTo1M1rOHgz2jw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxODoxOTo1M1rOHgz2jw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDE2NjAzMQ==", "bodyText": "These <span>'s are probably better to have in the JSP. Let me know if I should refactor.", "url": "https://github.com/sakaiproject/sakai/pull/8676#discussion_r504166031", "createdAt": "2020-10-13T18:19:53Z", "author": {"login": "bjones86"}, "path": "msgcntr/messageforums-api/src/bundle/org/sakaiproject/api/app/messagecenter/bundle/Messages.properties", "diffHunk": "@@ -100,6 +100,8 @@ stat_sort_by_date=Sort by Date\n stat_byUser=by User\n stat_byTopic=by Topic\n stat_totalMessages=Total Messages\n+stat_percent_read=<span class=\"statsTally\">Percent Read:</span> {0}%\n+stat_num_authored=<span class=\"statsTally\">Messages Authored:</span> {0}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d26e0a0e814f759d7a3849d2afd0031bb5f3087"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3NzE1NDg5", "url": "https://github.com/sakaiproject/sakai/pull/8676#pullrequestreview-507715489", "createdAt": "2020-10-13T18:22:39Z", "commit": {"oid": "3d26e0a0e814f759d7a3849d2afd0031bb5f3087"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxODoyMjozOVrOHgz8aA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxODoyMjozOVrOHgz8aA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDE2NzUyOA==", "bodyText": "this just smells like it can blow up, no?", "url": "https://github.com/sakaiproject/sakai/pull/8676#discussion_r504167528", "createdAt": "2020-10-13T18:22:39Z", "author": {"login": "ottenhoff"}, "path": "msgcntr/messageforums-app/src/java/org/sakaiproject/tool/messageforums/ui/MessageForumStatisticsBean.java", "diffHunk": "@@ -3112,4 +3112,17 @@ private boolean isUseAnonymousId(Topic topic)\n \t\t// Condenses to:\n \t\treturn topic.getPostAnonymous() && (!topic.getRevealIDsToRoles() || !uiPermissionsManager.isIdentifyAnonAuthors((DiscussionTopic) topic));\n \t}\n+\n+    public int getPercentRead()\n+    {\n+        int totalPosts = 0;\n+        List<Object[]> studentAuthoredStats = messageManager.findAuthoredMessageCountForAllStudents();\n+        for (Object[] pair : studentAuthoredStats)\n+        {\n+            totalPosts += ((Long) pair[1]).intValue();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d26e0a0e814f759d7a3849d2afd0031bb5f3087"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3NzMzNDYx", "url": "https://github.com/sakaiproject/sakai/pull/8676#pullrequestreview-507733461", "createdAt": "2020-10-13T18:48:21Z", "commit": {"oid": "3d26e0a0e814f759d7a3849d2afd0031bb5f3087"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxODo0ODoyMVrOHg0zbA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxODo0ODoyMVrOHg0zbA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDE4MTYxMg==", "bodyText": "can just use #666 instead ? it's widely used in in other files", "url": "https://github.com/sakaiproject/sakai/pull/8676#discussion_r504181612", "createdAt": "2020-10-13T18:48:21Z", "author": {"login": "ottenhoff"}, "path": "library/src/morpheus-master/sass/modules/tool/forums/_forums.scss", "diffHunk": "@@ -295,4 +295,9 @@\n \t\t\tmargin: 0 $standard-space $standard-space 0;\n \t\t}\n \t}\n+\n+\t.statsTally {\n+\t\tcolor: #655f62;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d26e0a0e814f759d7a3849d2afd0031bb5f3087"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3NzMzNjIz", "url": "https://github.com/sakaiproject/sakai/pull/8676#pullrequestreview-507733623", "createdAt": "2020-10-13T18:48:34Z", "commit": {"oid": "3d26e0a0e814f759d7a3849d2afd0031bb5f3087"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a6e9aefc1db3f06d958c05579c17227aa98e02d2", "author": {"user": {"login": "bjones86", "name": "Brian Jones"}}, "url": "https://github.com/sakaiproject/sakai/commit/a6e9aefc1db3f06d958c05579c17227aa98e02d2", "committedDate": "2020-10-13T18:50:33Z", "message": "Update _forums.scss"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2554, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}