{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMzODgzMzAz", "number": 8291, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QxMzozMzozOVrOEFQRsQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QxMzozNDo0MlrOEFQR2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczOTQ1MDA5OnYy", "diffSide": "RIGHT", "path": "sitestats/sitestats-tool/src/java/org/sakaiproject/sitestats/tool/wicket/pages/ReportsEditPage.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QxMzozMzozOVrOGjXlRg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQyMTo0NTo0N1rOGkuSvQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTczOTcxOA==", "bodyText": "exclude admin my workspace as well \"~admin\"?", "url": "https://github.com/sakaiproject/sakai/pull/8291#discussion_r439739718", "createdAt": "2020-06-13T13:33:39Z", "author": {"login": "ern"}, "path": "sitestats/sitestats-tool/src/java/org/sakaiproject/sitestats/tool/wicket/pages/ReportsEditPage.java", "diffHunk": "@@ -1194,7 +1202,7 @@ private boolean validReportParameters() {\n \n \t\t// check WHO\n \t\tif(getReportParams().getWho().equals(ReportManager.WHO_ROLE)){\n-\t\t\tif(site.getUsersHasRole(getReportParams().getWhoRoleId()).isEmpty())\n+\t\t\tif(!siteId.equals(\"!admin\") && site.getUsersHasRole(getReportParams().getWhoRoleId()).isEmpty())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9cfb0d4960acd3e6ed557773ea051982fd392d97"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTE2MDM4MQ==", "bodyText": "agreed", "url": "https://github.com/sakaiproject/sakai/pull/8291#discussion_r441160381", "createdAt": "2020-06-16T21:45:47Z", "author": {"login": "ottenhoff"}, "path": "sitestats/sitestats-tool/src/java/org/sakaiproject/sitestats/tool/wicket/pages/ReportsEditPage.java", "diffHunk": "@@ -1194,7 +1202,7 @@ private boolean validReportParameters() {\n \n \t\t// check WHO\n \t\tif(getReportParams().getWho().equals(ReportManager.WHO_ROLE)){\n-\t\t\tif(site.getUsersHasRole(getReportParams().getWhoRoleId()).isEmpty())\n+\t\t\tif(!siteId.equals(\"!admin\") && site.getUsersHasRole(getReportParams().getWhoRoleId()).isEmpty())", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTczOTcxOA=="}, "originalCommit": {"oid": "9cfb0d4960acd3e6ed557773ea051982fd392d97"}, "originalPosition": 47}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczOTQ1MDUwOnYy", "diffSide": "RIGHT", "path": "sitestats/sitestats-tool/src/java/org/sakaiproject/sitestats/tool/wicket/pages/ReportsEditPage.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QxMzozNDo0MlrOGjXlew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQyMTo0NTozOFrOGkuSgw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTczOTc3MQ==", "bodyText": "Also add \"~admin\" my workspace?", "url": "https://github.com/sakaiproject/sakai/pull/8291#discussion_r439739771", "createdAt": "2020-06-13T13:34:42Z", "author": {"login": "ern"}, "path": "sitestats/sitestats-tool/src/java/org/sakaiproject/sitestats/tool/wicket/pages/ReportsEditPage.java", "diffHunk": "@@ -1119,16 +1119,24 @@ public IModel getModel(Object value) {\n \t}\n \t\n \tprivate List<String> getRoles() {\n+\t\tSet<String> siteIdWithRoles = new HashSet<>(Arrays.asList(siteId));\n+\n+\t\tif (\"!admin\".equals(siteId)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9cfb0d4960acd3e6ed557773ea051982fd392d97"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTE2MDMyMw==", "bodyText": "agree", "url": "https://github.com/sakaiproject/sakai/pull/8291#discussion_r441160323", "createdAt": "2020-06-16T21:45:38Z", "author": {"login": "ottenhoff"}, "path": "sitestats/sitestats-tool/src/java/org/sakaiproject/sitestats/tool/wicket/pages/ReportsEditPage.java", "diffHunk": "@@ -1119,16 +1119,24 @@ public IModel getModel(Object value) {\n \t}\n \t\n \tprivate List<String> getRoles() {\n+\t\tSet<String> siteIdWithRoles = new HashSet<>(Arrays.asList(siteId));\n+\n+\t\tif (\"!admin\".equals(siteId)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTczOTc3MQ=="}, "originalCommit": {"oid": "9cfb0d4960acd3e6ed557773ea051982fd392d97"}, "originalPosition": 15}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2210, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}