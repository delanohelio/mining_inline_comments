{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY0MDI2OTY0", "number": 8437, "title": "SAK-41140:  Change initial run of updatePresence to be delayed if function doesn't exist yet.", "bodyText": "This changes the running of updatePresence so that it is run when it exists i.e. after morpheus.scripts.min.js is loaded.\nNow the initial code just waits 5 seconds (default) and then tries running the function - this checks in 5 seconds, if it doesn't exist it tries again in another 5 seconds and so forth.", "createdAt": "2020-08-06T13:27:03Z", "url": "https://github.com/sakaiproject/sakai/pull/8437", "merged": true, "mergeCommit": {"oid": "f41bd0617f03bdb6473369e4f0f39c74e0e057e5"}, "closed": true, "closedAt": "2020-08-18T14:36:24Z", "author": {"login": "TurRil"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc8TLnGgFqTQ2MjcyNjcxOA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc_w5P0gFqTQ2ODM4OTAxNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyNzI2NzE4", "url": "https://github.com/sakaiproject/sakai/pull/8437#pullrequestreview-462726718", "createdAt": "2020-08-06T17:22:26Z", "commit": {"oid": "89e357ea7d062e36844bc9396cc548e3f82947aa"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0ODgwNzkz", "url": "https://github.com/sakaiproject/sakai/pull/8437#pullrequestreview-464880793", "createdAt": "2020-08-11T09:02:56Z", "commit": {"oid": "89e357ea7d062e36844bc9396cc548e3f82947aa"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQwOTowMjo1NlrOG-u7Jg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQwOTowMjo1NlrOG-u7Jg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODQzMzcwMg==", "bodyText": "I would change the name of this function. It's always run, just with a possible delay first time round.", "url": "https://github.com/sakaiproject/sakai/pull/8437#discussion_r468433702", "createdAt": "2020-08-11T09:02:56Z", "author": {"login": "adrianfish"}, "path": "portal/portal-render-engine-impl/impl/src/webapp/vm/morpheus/includeFooterExtras.vm", "diffHunk": "@@ -293,7 +293,14 @@\n                 //these are global variables...\n                 var sakaiPresenceTimeDelay = ${sitePages.sakaiPresenceTimeDelay};\n                 var sakaiPresenceFragment = \"${sitePages.pageNavPresenceUrl}?output_fragment=yes&auto=true\";\n-                var sakaiLastPresenceTimeOut = setTimeout('updatePresence()', sakaiPresenceTimeDelay); \n+                var sakaiLastPresenceTimeOut = setTimeout('firstRun()', sakaiPresenceTimeDelay);\n+                var firstRun = function() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "89e357ea7d062e36844bc9396cc548e3f82947aa"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed04b53920b24e02ef9ee5ce1e6675548179dae0", "author": {"user": {"login": "TurRil", "name": null}}, "url": "https://github.com/sakaiproject/sakai/commit/ed04b53920b24e02ef9ee5ce1e6675548179dae0", "committedDate": "2020-08-12T07:30:26Z", "message": "SAK-41140:  Change initial run of updatePresence to be delayed if function doesn't exist yet."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "89e357ea7d062e36844bc9396cc548e3f82947aa", "author": {"user": {"login": "TurRil", "name": null}}, "url": "https://github.com/sakaiproject/sakai/commit/89e357ea7d062e36844bc9396cc548e3f82947aa", "committedDate": "2020-08-06T13:23:21Z", "message": "SAK-41140:  Change initial run of updatePresence to be delayed if function doesn't exist yet."}, "afterCommit": {"oid": "ed04b53920b24e02ef9ee5ce1e6675548179dae0", "author": {"user": {"login": "TurRil", "name": null}}, "url": "https://github.com/sakaiproject/sakai/commit/ed04b53920b24e02ef9ee5ce1e6675548179dae0", "committedDate": "2020-08-12T07:30:26Z", "message": "SAK-41140:  Change initial run of updatePresence to be delayed if function doesn't exist yet."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "654497ee9ec980c25cf4f6eb19ce9c3d91d22c5f", "author": {"user": {"login": "TurRil", "name": null}}, "url": "https://github.com/sakaiproject/sakai/commit/654497ee9ec980c25cf4f6eb19ce9c3d91d22c5f", "committedDate": "2020-08-12T07:33:26Z", "message": "SAK-41140: On review changed the name of the function to be more descriptive."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY4Mzg5MDE2", "url": "https://github.com/sakaiproject/sakai/pull/8437#pullrequestreview-468389016", "createdAt": "2020-08-17T11:41:17Z", "commit": {"oid": "654497ee9ec980c25cf4f6eb19ce9c3d91d22c5f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2900, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}