{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk1NzE4MDk4", "number": 8641, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxOTowNToyOFrOEpKmMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxOToyMTozMlrOEpK7NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzExNjAwNjkxOnYy", "diffSide": "RIGHT", "path": "samigo/samigo-app/src/webapp/jsf/delivery/discrepancyInData.jsp", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxOTowNToyOFrOHarceQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxOToxOTo1MFrOHar5wg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzczNjgyNQ==", "bodyText": "should this be delivery.publishedURL instead of delivery.getPublishedURL() ?", "url": "https://github.com/sakaiproject/sakai/pull/8641#discussion_r497736825", "createdAt": "2020-09-30T19:05:28Z", "author": {"login": "ottenhoff"}, "path": "samigo/samigo-app/src/webapp/jsf/delivery/discrepancyInData.jsp", "diffHunk": "@@ -58,11 +58,12 @@\n \n  <h:form id=\"discrepancyInData\">\n  <p class=\"act\">\n-       <h:commandButton value=\"#{deliveryMessages.button_return}\" type=\"submit\"\n-         styleClass=\"active\" action=\"select\" rendered=\"#{delivery.actionString=='takeAssessment'}\">\n-          <f:actionListener\n-            type=\"org.sakaiproject.tool.assessment.ui.listener.select.SelectActionListener\" />\n+       <h:commandButton value=\"#{deliveryMessages.button_return}\" type=\"submit\" styleClass=\"active\" action=\"select\" rendered=\"#{delivery.actionString=='takeAssessment'}\">\n+          <f:actionListener type=\"org.sakaiproject.tool.assessment.ui.listener.select.SelectActionListener\" />\n        </h:commandButton>\n+       <h:outputLink rendered=\"#{delivery.actionString == 'takeAssessmentViaUrl'}\" value=\"#{delivery.getPublishedURL()}\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9918706e468c2864fcb05898ad3681f27beac6a2"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Nzc0MzQ0NA==", "bodyText": "No, publishedURL isn't a member of the bean, it's a newly introduced method. Without the get...() it tries to access a member variable of that name via standard getter. At least this is my understanding of JSF. It does work as is though.", "url": "https://github.com/sakaiproject/sakai/pull/8641#discussion_r497743444", "createdAt": "2020-09-30T19:18:03Z", "author": {"login": "bjones86"}, "path": "samigo/samigo-app/src/webapp/jsf/delivery/discrepancyInData.jsp", "diffHunk": "@@ -58,11 +58,12 @@\n \n  <h:form id=\"discrepancyInData\">\n  <p class=\"act\">\n-       <h:commandButton value=\"#{deliveryMessages.button_return}\" type=\"submit\"\n-         styleClass=\"active\" action=\"select\" rendered=\"#{delivery.actionString=='takeAssessment'}\">\n-          <f:actionListener\n-            type=\"org.sakaiproject.tool.assessment.ui.listener.select.SelectActionListener\" />\n+       <h:commandButton value=\"#{deliveryMessages.button_return}\" type=\"submit\" styleClass=\"active\" action=\"select\" rendered=\"#{delivery.actionString=='takeAssessment'}\">\n+          <f:actionListener type=\"org.sakaiproject.tool.assessment.ui.listener.select.SelectActionListener\" />\n        </h:commandButton>\n+       <h:outputLink rendered=\"#{delivery.actionString == 'takeAssessmentViaUrl'}\" value=\"#{delivery.getPublishedURL()}\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzczNjgyNQ=="}, "originalCommit": {"oid": "9918706e468c2864fcb05898ad3681f27beac6a2"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Nzc0NDMyMg==", "bodyText": "yeah that's the correct understanding AFAIK!", "url": "https://github.com/sakaiproject/sakai/pull/8641#discussion_r497744322", "createdAt": "2020-09-30T19:19:50Z", "author": {"login": "ottenhoff"}, "path": "samigo/samigo-app/src/webapp/jsf/delivery/discrepancyInData.jsp", "diffHunk": "@@ -58,11 +58,12 @@\n \n  <h:form id=\"discrepancyInData\">\n  <p class=\"act\">\n-       <h:commandButton value=\"#{deliveryMessages.button_return}\" type=\"submit\"\n-         styleClass=\"active\" action=\"select\" rendered=\"#{delivery.actionString=='takeAssessment'}\">\n-          <f:actionListener\n-            type=\"org.sakaiproject.tool.assessment.ui.listener.select.SelectActionListener\" />\n+       <h:commandButton value=\"#{deliveryMessages.button_return}\" type=\"submit\" styleClass=\"active\" action=\"select\" rendered=\"#{delivery.actionString=='takeAssessment'}\">\n+          <f:actionListener type=\"org.sakaiproject.tool.assessment.ui.listener.select.SelectActionListener\" />\n        </h:commandButton>\n+       <h:outputLink rendered=\"#{delivery.actionString == 'takeAssessmentViaUrl'}\" value=\"#{delivery.getPublishedURL()}\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzczNjgyNQ=="}, "originalCommit": {"oid": "9918706e468c2864fcb05898ad3681f27beac6a2"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzExNjA2MDY4OnYy", "diffSide": "RIGHT", "path": "samigo/samigo-app/src/java/org/sakaiproject/tool/assessment/ui/bean/author/PublishedAssessmentSettingsBean.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxOToyMTozMlrOHar9lA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxOTozODowNVrOHashYA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Nzc0NTMwMA==", "bodyText": "minor, but i find it easier to visualize what code is doing when\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  generatePublishedURL(assessment);\n          \n          \n            \n                  this.publishedUrl = generatePublishedURL(assessment);", "url": "https://github.com/sakaiproject/sakai/pull/8641#discussion_r497745300", "createdAt": "2020-09-30T19:21:32Z", "author": {"login": "ottenhoff"}, "path": "samigo/samigo-app/src/java/org/sakaiproject/tool/assessment/ui/bean/author/PublishedAssessmentSettingsBean.java", "diffHunk": "@@ -411,18 +411,8 @@ public void setAssessment(PublishedAssessmentFacade assessment) {\n       setIpAddresses(assessment);\n \n       // publishedUrl\n-      FacesContext context = FacesContext.getCurrentInstance();\n-      ExternalContext extContext = context.getExternalContext();\n-      // get the alias to the pub assessment\n-      this.alias = assessment.getAssessmentMetaDataByLabel(\n-          AssessmentMetaDataIfc.ALIAS);\n-      String server = ( (javax.servlet.http.HttpServletRequest) extContext.\n-                       getRequest()).getRequestURL().toString();\n-      int index = server.indexOf(extContext.getRequestContextPath() + \"/\"); // \"/samigo-app/\"\n-      server = server.substring(0, index);\n-      String url = server + extContext.getRequestContextPath();\n-      this.publishedUrl = url + \"/servlet/Login?id=\" + this.alias;\n-      \n+      generatePublishedURL(assessment);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9918706e468c2864fcb05898ad3681f27beac6a2"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Nzc0NzkwOQ==", "bodyText": "Currently the function doesn't return anything, I just copied/pasted the code to a new method so i wouldn't have to run .setAssessment() in entirety to get the URL generated.\nWould you prefer the new method to return the URL rather than set it internally? I don't have a strong preference either way.", "url": "https://github.com/sakaiproject/sakai/pull/8641#discussion_r497747909", "createdAt": "2020-09-30T19:26:12Z", "author": {"login": "bjones86"}, "path": "samigo/samigo-app/src/java/org/sakaiproject/tool/assessment/ui/bean/author/PublishedAssessmentSettingsBean.java", "diffHunk": "@@ -411,18 +411,8 @@ public void setAssessment(PublishedAssessmentFacade assessment) {\n       setIpAddresses(assessment);\n \n       // publishedUrl\n-      FacesContext context = FacesContext.getCurrentInstance();\n-      ExternalContext extContext = context.getExternalContext();\n-      // get the alias to the pub assessment\n-      this.alias = assessment.getAssessmentMetaDataByLabel(\n-          AssessmentMetaDataIfc.ALIAS);\n-      String server = ( (javax.servlet.http.HttpServletRequest) extContext.\n-                       getRequest()).getRequestURL().toString();\n-      int index = server.indexOf(extContext.getRequestContextPath() + \"/\"); // \"/samigo-app/\"\n-      server = server.substring(0, index);\n-      String url = server + extContext.getRequestContextPath();\n-      this.publishedUrl = url + \"/servlet/Login?id=\" + this.alias;\n-      \n+      generatePublishedURL(assessment);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Nzc0NTMwMA=="}, "originalCommit": {"oid": "9918706e468c2864fcb05898ad3681f27beac6a2"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Nzc1MzMwMw==", "bodyText": "i think it's more readable when it just returns a String .... but not a big deal", "url": "https://github.com/sakaiproject/sakai/pull/8641#discussion_r497753303", "createdAt": "2020-09-30T19:36:01Z", "author": {"login": "ottenhoff"}, "path": "samigo/samigo-app/src/java/org/sakaiproject/tool/assessment/ui/bean/author/PublishedAssessmentSettingsBean.java", "diffHunk": "@@ -411,18 +411,8 @@ public void setAssessment(PublishedAssessmentFacade assessment) {\n       setIpAddresses(assessment);\n \n       // publishedUrl\n-      FacesContext context = FacesContext.getCurrentInstance();\n-      ExternalContext extContext = context.getExternalContext();\n-      // get the alias to the pub assessment\n-      this.alias = assessment.getAssessmentMetaDataByLabel(\n-          AssessmentMetaDataIfc.ALIAS);\n-      String server = ( (javax.servlet.http.HttpServletRequest) extContext.\n-                       getRequest()).getRequestURL().toString();\n-      int index = server.indexOf(extContext.getRequestContextPath() + \"/\"); // \"/samigo-app/\"\n-      server = server.substring(0, index);\n-      String url = server + extContext.getRequestContextPath();\n-      this.publishedUrl = url + \"/servlet/Login?id=\" + this.alias;\n-      \n+      generatePublishedURL(assessment);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Nzc0NTMwMA=="}, "originalCommit": {"oid": "9918706e468c2864fcb05898ad3681f27beac6a2"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Nzc1NDQ2NA==", "bodyText": "No worries, I'll change it. Just requires a little more refactoring than your suggested patch. Incoming...", "url": "https://github.com/sakaiproject/sakai/pull/8641#discussion_r497754464", "createdAt": "2020-09-30T19:38:05Z", "author": {"login": "bjones86"}, "path": "samigo/samigo-app/src/java/org/sakaiproject/tool/assessment/ui/bean/author/PublishedAssessmentSettingsBean.java", "diffHunk": "@@ -411,18 +411,8 @@ public void setAssessment(PublishedAssessmentFacade assessment) {\n       setIpAddresses(assessment);\n \n       // publishedUrl\n-      FacesContext context = FacesContext.getCurrentInstance();\n-      ExternalContext extContext = context.getExternalContext();\n-      // get the alias to the pub assessment\n-      this.alias = assessment.getAssessmentMetaDataByLabel(\n-          AssessmentMetaDataIfc.ALIAS);\n-      String server = ( (javax.servlet.http.HttpServletRequest) extContext.\n-                       getRequest()).getRequestURL().toString();\n-      int index = server.indexOf(extContext.getRequestContextPath() + \"/\"); // \"/samigo-app/\"\n-      server = server.substring(0, index);\n-      String url = server + extContext.getRequestContextPath();\n-      this.publishedUrl = url + \"/servlet/Login?id=\" + this.alias;\n-      \n+      generatePublishedURL(assessment);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Nzc0NTMwMA=="}, "originalCommit": {"oid": "9918706e468c2864fcb05898ad3681f27beac6a2"}, "originalPosition": 16}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2697, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}