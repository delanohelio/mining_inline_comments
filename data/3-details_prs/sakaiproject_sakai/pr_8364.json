{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ4ODE0ODcx", "number": 8364, "title": "SAK-41502: Excusing an individual grade should be reflected in score's", "bodyText": "SAK-41502: Excusing an individual grade should be reflected in score's\nDatabase changes: sakaiproject/sakai-reference#90", "createdAt": "2020-07-14T11:14:56Z", "url": "https://github.com/sakaiproject/sakai/pull/8364", "merged": true, "mergeCommit": {"oid": "5ff84b860c76e0f916c542c7e4a090ba9d68b047"}, "closed": true, "closedAt": "2020-12-03T10:06:57Z", "author": {"login": "victorGomollon"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc03kqVAFqTQ0ODIwNTU5MQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdigQD_AFqTU0Mzc5MjAyOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4MjA1NTkx", "url": "https://github.com/sakaiproject/sakai/pull/8364#pullrequestreview-448205591", "createdAt": "2020-07-14T15:14:52Z", "commit": {"oid": "ec8cf3d41009a9d1c702b041415f58f4c505431f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxNToxNDo1M1rOGxYbjg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxNToxNDo1M1rOGxYbjg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDQzMzY3OA==", "bodyText": "As with the reference PR, I believe this column should be not-nullable. Conceptually, there is only two states: grade is included, or grade is excluded. Eliminating the 3rd state (null) makes this feature cleaner, easier to understand, and better conforms to standard database design practises.", "url": "https://github.com/sakaiproject/sakai/pull/8364#discussion_r454433678", "createdAt": "2020-07-14T15:14:53Z", "author": {"login": "bjones86"}, "path": "edu-services/gradebook-service/hibernate/src/hibernate/org/sakaiproject/tool/gradebook/GradingEvent.hbm.xml", "diffHunk": "@@ -20,6 +20,7 @@\n \t\t<property name=\"studentId\" column=\"STUDENT_ID\" type=\"string\" not-null=\"true\"/>\n \t\t<property name=\"dateGraded\" column=\"DATE_GRADED\" type=\"timestamp\" not-null=\"true\"/>\n \t\t<property name=\"grade\" column=\"GRADE\" type=\"string\" />\n+\t\t<property name=\"excluded\" column=\"IS_EXCLUDED\" type=\"boolean\" not-null=\"false\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ec8cf3d41009a9d1c702b041415f58f4c505431f"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxNzA3MTAw", "url": "https://github.com/sakaiproject/sakai/pull/8364#pullrequestreview-451707100", "createdAt": "2020-07-20T15:17:30Z", "commit": {"oid": "6625c922d9b40bf91cdfa00ffc4fb8feb29c3c93"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyNTUzNzQ3", "url": "https://github.com/sakaiproject/sakai/pull/8364#pullrequestreview-452553747", "createdAt": "2020-07-21T15:06:17Z", "commit": {"oid": "6625c922d9b40bf91cdfa00ffc4fb8feb29c3c93"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNTowNjoxN1rOG08fug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNTowNzowNlrOG08iHw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODE3MDI5OA==", "bodyText": "This would make a great enum", "url": "https://github.com/sakaiproject/sakai/pull/8364#discussion_r458170298", "createdAt": "2020-07-21T15:06:17Z", "author": {"login": "ern"}, "path": "edu-services/gradebook-service/api/src/java/org/sakaiproject/service/gradebook/shared/GradebookService.java", "diffHunk": "@@ -58,6 +58,10 @@\n \tpublic static final int CATEGORY_TYPE_ONLY_CATEGORY = 2;\n \tpublic static final int CATEGORY_TYPE_WEIGHTED_CATEGORY = 3;\n \n+\tpublic static final int GRADE_UPDATE_GRADE = 0;\n+\tpublic static final int GRADE_EXCLUDED_GRADE = 1;\n+\tpublic static final int GRADE_INCLUDED_GRADE = 2;\n+\n \tpublic static final String[] validLetterGrade = { \"a+\", \"a\", \"a-\", \"b+\", \"b\", \"b-\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6625c922d9b40bf91cdfa00ffc4fb8feb29c3c93"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODE3MDkxMQ==", "bodyText": "With hibernate its best to use Objects that better map to the state of the database, so Integer makes more sense here.", "url": "https://github.com/sakaiproject/sakai/pull/8364#discussion_r458170911", "createdAt": "2020-07-21T15:07:06Z", "author": {"login": "ern"}, "path": "edu-services/gradebook-service/hibernate/src/java/org/sakaiproject/tool/gradebook/GradingEvent.java", "diffHunk": "@@ -37,6 +38,7 @@\n     private GradableObject gradableObject;\n     private String grade;\n     private Date dateGraded;\n+    private int excluded;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6625c922d9b40bf91cdfa00ffc4fb8feb29c3c93"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyODEzOTU1", "url": "https://github.com/sakaiproject/sakai/pull/8364#pullrequestreview-482813955", "createdAt": "2020-09-04T16:53:17Z", "commit": {"oid": "f79bd4f215cfb72a9c83bc093fc8ab8cb8079199"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f79bd4f215cfb72a9c83bc093fc8ab8cb8079199", "author": {"user": {"login": "victorGomollon", "name": null}}, "url": "https://github.com/sakaiproject/sakai/commit/f79bd4f215cfb72a9c83bc093fc8ab8cb8079199", "committedDate": "2020-09-01T10:22:36Z", "message": "Merge branch 'SAK-41502' of https://github.com/victorGomollon/sakai into SAK-41502"}, "afterCommit": {"oid": "d268121f89b31a6edf5546ee4ab5f96056699b7b", "author": {"user": {"login": "victorGomollon", "name": null}}, "url": "https://github.com/sakaiproject/sakai/commit/d268121f89b31a6edf5546ee4ab5f96056699b7b", "committedDate": "2020-09-08T10:42:01Z", "message": "SAK-41502: Resolve Issues"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzNTQ1NzY5", "url": "https://github.com/sakaiproject/sakai/pull/8364#pullrequestreview-493545769", "createdAt": "2020-09-22T14:50:12Z", "commit": {"oid": "e53b7899d8ddffa6e93ab90626c607f43c5beaf3"}, "state": "DISMISSED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxNDo1MDoxMlrOHV-A8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxNDo1MjoxOFrOHV-HfA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjc5ODE5NA==", "bodyText": "The action the instructor takes is called \"Excuse\", so let's use this terminology:\nScore of <b>{1}</b> excused by {2}", "url": "https://github.com/sakaiproject/sakai/pull/8364#discussion_r492798194", "createdAt": "2020-09-22T14:50:12Z", "author": {"login": "fostersdesign"}, "path": "gradebookng/bundle/src/main/bundle/gradebookng.properties", "diffHunk": "@@ -389,6 +389,8 @@ grade.log.entry = {0} - Score set to <b>{1}</b> by {2}\n grade.log.none = No grades have been entered for this cell.\n grade.outof = /{0}\n grade.menulabel = Open menu for student {0} and assignment {1} cell\n+grade.log.excluded={0} - Score <b>{1}</b> excluded by {2}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e53b7899d8ddffa6e93ab90626c607f43c5beaf3"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjc5OTg2OA==", "bodyText": "To match the above change, let's use:\nScore of <b>{1}</b> included by {2}", "url": "https://github.com/sakaiproject/sakai/pull/8364#discussion_r492799868", "createdAt": "2020-09-22T14:52:18Z", "author": {"login": "fostersdesign"}, "path": "gradebookng/bundle/src/main/bundle/gradebookng.properties", "diffHunk": "@@ -389,6 +389,8 @@ grade.log.entry = {0} - Score set to <b>{1}</b> by {2}\n grade.log.none = No grades have been entered for this cell.\n grade.outof = /{0}\n grade.menulabel = Open menu for student {0} and assignment {1} cell\n+grade.log.excluded={0} - Score <b>{1}</b> excluded by {2}\n+grade.log.included={0} - Score <b>{1}</b> included by {2}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e53b7899d8ddffa6e93ab90626c607f43c5beaf3"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzNTQzNTg2", "url": "https://github.com/sakaiproject/sakai/pull/8364#pullrequestreview-493543586", "createdAt": "2020-09-22T14:48:10Z", "commit": {"oid": "e53b7899d8ddffa6e93ab90626c607f43c5beaf3"}, "state": "DISMISSED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxNDo0ODoxMFrOHV96ag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxNDo1NjoyMVrOHV-Uvw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjc5NjUyMg==", "bodyText": "maybe\nGradingEventStatus {\nGRADE_NONE(0)\nGRADE_EXCLUDED(1)\nGRADE_INCLUDED(2)\n}", "url": "https://github.com/sakaiproject/sakai/pull/8364#discussion_r492796522", "createdAt": "2020-09-22T14:48:10Z", "author": {"login": "ern"}, "path": "edu-services/gradebook-service/api/src/java/org/sakaiproject/service/gradebook/shared/GradebookService.java", "diffHunk": "@@ -57,6 +57,22 @@\n \tpublic static final int CATEGORY_TYPE_NO_CATEGORY = 1;\n \tpublic static final int CATEGORY_TYPE_ONLY_CATEGORY = 2;\n \tpublic static final int CATEGORY_TYPE_WEIGHTED_CATEGORY = 3;\n+\t\n+\tpublic enum GradeState {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e53b7899d8ddffa6e93ab90626c607f43c5beaf3"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjc5NzU1Nw==", "bodyText": "this.excluded = GradebookService.GradeEventState.GRADE_UPDATE_GRADE;", "url": "https://github.com/sakaiproject/sakai/pull/8364#discussion_r492797557", "createdAt": "2020-09-22T14:49:27Z", "author": {"login": "ern"}, "path": "edu-services/gradebook-service/hibernate/src/java/org/sakaiproject/tool/gradebook/GradingEvent.java", "diffHunk": "@@ -50,6 +52,7 @@ public GradingEvent(GradableObject gradableObject, String graderId, String stude\n         \tthis.grade = grade.toString();\n         }\n         this.dateGraded = new Date();\n+        this.excluded = GradebookService.GradeState.GRADE_UPDATE_GRADE.getValue();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e53b7899d8ddffa6e93ab90626c607f43c5beaf3"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjc5Nzk4MQ==", "bodyText": "private GradingEventStatus excluded;", "url": "https://github.com/sakaiproject/sakai/pull/8364#discussion_r492797981", "createdAt": "2020-09-22T14:49:56Z", "author": {"login": "ern"}, "path": "edu-services/gradebook-service/hibernate/src/java/org/sakaiproject/tool/gradebook/GradingEvent.java", "diffHunk": "@@ -37,6 +38,7 @@\n     private GradableObject gradableObject;\n     private String grade;\n     private Date dateGraded;\n+    private Integer excluded;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e53b7899d8ddffa6e93ab90626c607f43c5beaf3"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjc5ODY0MQ==", "bodyText": "private final GradingEventStatus excluded;", "url": "https://github.com/sakaiproject/sakai/pull/8364#discussion_r492798641", "createdAt": "2020-09-22T14:50:45Z", "author": {"login": "ern"}, "path": "gradebookng/tool/src/java/org/sakaiproject/gradebookng/business/model/GbGradeLog.java", "diffHunk": "@@ -41,11 +41,15 @@\n \n \t@Getter\n \tprivate final String grade;\n-\n+\t\n+\t@Getter\n+\tprivate final Integer excluded;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e53b7899d8ddffa6e93ab90626c607f43c5beaf3"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjgwMTk2NA==", "bodyText": "this.status = ge.getStatus();", "url": "https://github.com/sakaiproject/sakai/pull/8364#discussion_r492801964", "createdAt": "2020-09-22T14:54:47Z", "author": {"login": "ern"}, "path": "gradebookng/tool/src/java/org/sakaiproject/gradebookng/business/model/GbGradeLog.java", "diffHunk": "@@ -41,11 +41,15 @@\n \n \t@Getter\n \tprivate final String grade;\n-\n+\t\n+\t@Getter\n+\tprivate final Integer excluded;\n+\t\n \tpublic GbGradeLog(final GradingEvent ge) {\n \t\tthis.dateGraded = ge.getDateGraded();\n \t\tthis.graderUuid = ge.getGraderId();\n \t\tthis.grade = ge.getGrade();\n+\t\tthis.excluded = ge.getExcluded();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e53b7899d8ddffa6e93ab90626c607f43c5beaf3"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjgwMjc1OA==", "bodyText": "public GradingEventStatus getStatus();", "url": "https://github.com/sakaiproject/sakai/pull/8364#discussion_r492802758", "createdAt": "2020-09-22T14:55:44Z", "author": {"login": "ern"}, "path": "edu-services/gradebook-service/hibernate/src/java/org/sakaiproject/tool/gradebook/GradingEvent.java", "diffHunk": "@@ -100,6 +103,14 @@ public void setStudentId(String studentId) {\n \t\tthis.studentId = studentId;\n \t}\n \n+\tpublic Integer getExcluded() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e53b7899d8ddffa6e93ab90626c607f43c5beaf3"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjgwMzI2Mw==", "bodyText": "public GradingEventStatus setStatus(GradingEventStatus status);", "url": "https://github.com/sakaiproject/sakai/pull/8364#discussion_r492803263", "createdAt": "2020-09-22T14:56:21Z", "author": {"login": "ern"}, "path": "edu-services/gradebook-service/hibernate/src/java/org/sakaiproject/tool/gradebook/GradingEvent.java", "diffHunk": "@@ -100,6 +103,14 @@ public void setStudentId(String studentId) {\n \t\tthis.studentId = studentId;\n \t}\n \n+\tpublic Integer getExcluded() {\n+\t\treturn excluded;\n+\t}\n+\n+\tpublic void setExcluded(Integer excluded) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e53b7899d8ddffa6e93ab90626c607f43c5beaf3"}, "originalPosition": 32}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fc0915620ed116d4ef0c7ad800711305d3a13be2", "author": {"user": {"login": "victorGomollon", "name": null}}, "url": "https://github.com/sakaiproject/sakai/commit/fc0915620ed116d4ef0c7ad800711305d3a13be2", "committedDate": "2020-12-02T08:25:24Z", "message": "SAK-41502: Excusing an individual grade should be reflected in Grade Log scores"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3acf38be3b9e00ae1693166bc264dd2bef73c93d", "author": {"user": {"login": "jorgecanovas", "name": null}}, "url": "https://github.com/sakaiproject/sakai/commit/3acf38be3b9e00ae1693166bc264dd2bef73c93d", "committedDate": "2020-12-01T10:24:21Z", "message": "SAK-41502: Codacy changes"}, "afterCommit": {"oid": "fc0915620ed116d4ef0c7ad800711305d3a13be2", "author": {"user": {"login": "victorGomollon", "name": null}}, "url": "https://github.com/sakaiproject/sakai/commit/fc0915620ed116d4ef0c7ad800711305d3a13be2", "committedDate": "2020-12-02T08:25:24Z", "message": "SAK-41502: Excusing an individual grade should be reflected in Grade Log scores"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzNzkyMDI5", "url": "https://github.com/sakaiproject/sakai/pull/8364#pullrequestreview-543792029", "createdAt": "2020-12-03T10:05:10Z", "commit": {"oid": "fc0915620ed116d4ef0c7ad800711305d3a13be2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2831, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}