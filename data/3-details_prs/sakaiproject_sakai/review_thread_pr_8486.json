{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc1MDQ4NjE2", "number": 8486, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxNDozMzo0MlrOEeVVTg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQxNTozMjo1MFrOEgbjOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAwMjQyMjU0OnYy", "diffSide": "RIGHT", "path": "lessonbuilder/tool/src/java/org/sakaiproject/lessonbuildertool/tool/producers/ShowPageProducer.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxNDozMzo0MlrOHJ7XhQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxOTowNzozMFrOHKFEvA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDE3MTkwOQ==", "bodyText": "Why not just use ResourceProperties.PROP_DISPLAY_NAME?\nAlso, you could use StringUtils.isBlank  on the displayName test.", "url": "https://github.com/sakaiproject/sakai/pull/8486#discussion_r480171909", "createdAt": "2020-08-31T14:33:42Z", "author": {"login": "adrianfish"}, "path": "lessonbuilder/tool/src/java/org/sakaiproject/lessonbuildertool/tool/producers/ShowPageProducer.java", "diffHunk": "@@ -3096,6 +3097,19 @@ public int compare(SimpleStudentPage o1, SimpleStudentPage o2) {\n \t\t\t\t\t\tString folderName = folderPath[folderPath.length-1];\n \t\t\t\t\t\tif (dataDirectory.endsWith(\"//\")){\n \t\t\t\t\t\t\tfolderName = simplePageBean.getCurrentSite().getTitle();\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\ttry {\n+\t\t\t\t\t\t\t\tContentHostingService contentHostingService = (ContentHostingService) ComponentManager.get(\"org.sakaiproject.content.api.ContentHostingService\");\n+\t\t\t\t\t\t\t\tContentCollection collection = contentHostingService.getCollection(dataDirectory.replace(\"//\", \"/\"));\n+\t\t\t\t\t\t\t\tif (collection != null) {\n+\t\t\t\t\t\t\t\t\tString displayName = collection.getProperties().getProperty(collection.getProperties().getNamePropDisplayName());\n+\t\t\t\t\t\t\t\t\tif (displayName != null && displayName != \"\") {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "96c0ed520676f628f54b829ed46ed118ceef2918"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDMzMDk0MA==", "bodyText": "fixed", "url": "https://github.com/sakaiproject/sakai/pull/8486#discussion_r480330940", "createdAt": "2020-08-31T19:07:30Z", "author": {"login": "austin48"}, "path": "lessonbuilder/tool/src/java/org/sakaiproject/lessonbuildertool/tool/producers/ShowPageProducer.java", "diffHunk": "@@ -3096,6 +3097,19 @@ public int compare(SimpleStudentPage o1, SimpleStudentPage o2) {\n \t\t\t\t\t\tString folderName = folderPath[folderPath.length-1];\n \t\t\t\t\t\tif (dataDirectory.endsWith(\"//\")){\n \t\t\t\t\t\t\tfolderName = simplePageBean.getCurrentSite().getTitle();\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\ttry {\n+\t\t\t\t\t\t\t\tContentHostingService contentHostingService = (ContentHostingService) ComponentManager.get(\"org.sakaiproject.content.api.ContentHostingService\");\n+\t\t\t\t\t\t\t\tContentCollection collection = contentHostingService.getCollection(dataDirectory.replace(\"//\", \"/\"));\n+\t\t\t\t\t\t\t\tif (collection != null) {\n+\t\t\t\t\t\t\t\t\tString displayName = collection.getProperties().getProperty(collection.getProperties().getNamePropDisplayName());\n+\t\t\t\t\t\t\t\t\tif (displayName != null && displayName != \"\") {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDE3MTkwOQ=="}, "originalCommit": {"oid": "96c0ed520676f628f54b829ed46ed118ceef2918"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAwMjQzMTU0OnYy", "diffSide": "RIGHT", "path": "lessonbuilder/tool/src/java/org/sakaiproject/lessonbuildertool/tool/producers/ShowPageProducer.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxNDozNTozOVrOHJ7crA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxOTowNzo0NFrOHKFFRw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDE3MzIyOA==", "bodyText": "You should probably use log.error(\"error message\", e) here.", "url": "https://github.com/sakaiproject/sakai/pull/8486#discussion_r480173228", "createdAt": "2020-08-31T14:35:39Z", "author": {"login": "adrianfish"}, "path": "lessonbuilder/tool/src/java/org/sakaiproject/lessonbuildertool/tool/producers/ShowPageProducer.java", "diffHunk": "@@ -3096,6 +3097,19 @@ public int compare(SimpleStudentPage o1, SimpleStudentPage o2) {\n \t\t\t\t\t\tString folderName = folderPath[folderPath.length-1];\n \t\t\t\t\t\tif (dataDirectory.endsWith(\"//\")){\n \t\t\t\t\t\t\tfolderName = simplePageBean.getCurrentSite().getTitle();\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\ttry {\n+\t\t\t\t\t\t\t\tContentHostingService contentHostingService = (ContentHostingService) ComponentManager.get(\"org.sakaiproject.content.api.ContentHostingService\");\n+\t\t\t\t\t\t\t\tContentCollection collection = contentHostingService.getCollection(dataDirectory.replace(\"//\", \"/\"));\n+\t\t\t\t\t\t\t\tif (collection != null) {\n+\t\t\t\t\t\t\t\t\tString displayName = collection.getProperties().getProperty(collection.getProperties().getNamePropDisplayName());\n+\t\t\t\t\t\t\t\t\tif (displayName != null && displayName != \"\") {\n+\t\t\t\t\t\t\t\t\t\tfolderName = displayName;\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t} catch (Exception e) {\n+\t\t\t\t\t\t\t\tlog.error(\"Error getting content resource\" + e);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "96c0ed520676f628f54b829ed46ed118ceef2918"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDMzMTA3OQ==", "bodyText": "fixed.  thanks for the suggestions", "url": "https://github.com/sakaiproject/sakai/pull/8486#discussion_r480331079", "createdAt": "2020-08-31T19:07:44Z", "author": {"login": "austin48"}, "path": "lessonbuilder/tool/src/java/org/sakaiproject/lessonbuildertool/tool/producers/ShowPageProducer.java", "diffHunk": "@@ -3096,6 +3097,19 @@ public int compare(SimpleStudentPage o1, SimpleStudentPage o2) {\n \t\t\t\t\t\tString folderName = folderPath[folderPath.length-1];\n \t\t\t\t\t\tif (dataDirectory.endsWith(\"//\")){\n \t\t\t\t\t\t\tfolderName = simplePageBean.getCurrentSite().getTitle();\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\ttry {\n+\t\t\t\t\t\t\t\tContentHostingService contentHostingService = (ContentHostingService) ComponentManager.get(\"org.sakaiproject.content.api.ContentHostingService\");\n+\t\t\t\t\t\t\t\tContentCollection collection = contentHostingService.getCollection(dataDirectory.replace(\"//\", \"/\"));\n+\t\t\t\t\t\t\t\tif (collection != null) {\n+\t\t\t\t\t\t\t\t\tString displayName = collection.getProperties().getProperty(collection.getProperties().getNamePropDisplayName());\n+\t\t\t\t\t\t\t\t\tif (displayName != null && displayName != \"\") {\n+\t\t\t\t\t\t\t\t\t\tfolderName = displayName;\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t} catch (Exception e) {\n+\t\t\t\t\t\t\t\tlog.error(\"Error getting content resource\" + e);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDE3MzIyOA=="}, "originalCommit": {"oid": "96c0ed520676f628f54b829ed46ed118ceef2918"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAyNDQxMjczOnYy", "diffSide": "RIGHT", "path": "lessonbuilder/tool/src/java/org/sakaiproject/lessonbuildertool/tool/producers/ShowPageProducer.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQxNTozMjo1MFrOHNSV4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQxNTo0ODoyMFrOHNTISQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzY5NDA1MA==", "bodyText": "Can you outdent these two lines?", "url": "https://github.com/sakaiproject/sakai/pull/8486#discussion_r483694050", "createdAt": "2020-09-04T15:32:50Z", "author": {"login": "adrianfish"}, "path": "lessonbuilder/tool/src/java/org/sakaiproject/lessonbuildertool/tool/producers/ShowPageProducer.java", "diffHunk": "@@ -4289,18 +4286,9 @@ private void createToolBar(UIContainer tofill, SimplePage currentPage) {\n \n \t\t    // add website.\n \t\t    // Are we running a kernel with KNL-273?\n-\t\t    Class contentHostingInterface = ContentHostingService.class;\n-\t\t    try {\n-\t\t\tMethod expandMethod = contentHostingInterface.getMethod(\"expandZippedResource\", new Class[] { String.class });\n-\t\t\t\n \t\t\tUIOutput.make(tofill, \"addwebsite-li\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "028c9f55812a217bde9965d64da2350813ed0ec2"}, "originalPosition": 70}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzcwNjk1Mw==", "bodyText": "yeah the indentation is mixed here, lines are using 2 tabs and 4 spaces so decided not to update it to keep history", "url": "https://github.com/sakaiproject/sakai/pull/8486#discussion_r483706953", "createdAt": "2020-09-04T15:48:20Z", "author": {"login": "ern"}, "path": "lessonbuilder/tool/src/java/org/sakaiproject/lessonbuildertool/tool/producers/ShowPageProducer.java", "diffHunk": "@@ -4289,18 +4286,9 @@ private void createToolBar(UIContainer tofill, SimplePage currentPage) {\n \n \t\t    // add website.\n \t\t    // Are we running a kernel with KNL-273?\n-\t\t    Class contentHostingInterface = ContentHostingService.class;\n-\t\t    try {\n-\t\t\tMethod expandMethod = contentHostingInterface.getMethod(\"expandZippedResource\", new Class[] { String.class });\n-\t\t\t\n \t\t\tUIOutput.make(tofill, \"addwebsite-li\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzY5NDA1MA=="}, "originalCommit": {"oid": "028c9f55812a217bde9965d64da2350813ed0ec2"}, "originalPosition": 70}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2725, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}