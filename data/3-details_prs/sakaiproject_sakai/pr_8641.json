{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk1NzE4MDk4", "number": 8641, "title": "SAK-44383 samigo > provide return link on DD UI for URL delivered quizzes", "bodyText": "https://jira.sakaiproject.org/browse/SAK-44383\nUsage of samigo has increased drastically due to the pandemic. As an extension, more instructors are delivering quizzes using the published assessment URL. Due to other issues, it can be quite easy for students to get click happy and/or become impatient and refresh the page before it finishes loading. The result is that the students are taken to the \"Data Discrepancy\" page.\nIn a normal situation, this Data Discrepancy page provides the user with a button to return to the samigo landing page (quiz listing UI). However, in the case of a quiz delivered by published URL, this button does not appear (nor should it in this case, the instructor intended for the user to take a specific quiz, not give them the option to take other quizzes in the site as well, plus the tool itself may be intentionally hidden by the instructor).\nSo in the case of a quiz delivered by URL, upon reaching the Data Discrepancy page there is no way for the user to return to the quiz (unless they're critical thinkers and paste in the published assessment URL again into their URL bar). This has lead to a lot of complaints and support calls at our institution, which is becoming burdensome.\nOne way to address this (for quizzes delivered by URL) is to present the user with a link to take them back to the \"Continue Assessment\" page, so they're easily and quickly able to resume their quiz attempt without intervention or support.\nAdditional mitigation (blocking them from getting click happy) is handled in another ticket: SAK-44248.", "createdAt": "2020-09-30T18:58:28Z", "url": "https://github.com/sakaiproject/sakai/pull/8641", "merged": true, "mergeCommit": {"oid": "3ba38463ca166d3a790fcc539e0a585745a7b17a"}, "closed": true, "closedAt": "2020-09-30T20:18:17Z", "author": {"login": "bjones86"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdN_KbyAH2gAyNDk1NzE4MDk4Ojk5MTg3MDZlNDY4YzI4NjRmY2IwNTg5OGFkMzY4MWYyN2JlYWM2YTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdOCIxbABqjM4MjYxNTY1OTA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9918706e468c2864fcb05898ad3681f27beac6a2", "author": {"user": {"login": "bjones86", "name": "Brian Jones"}}, "url": "https://github.com/sakaiproject/sakai/commit/9918706e468c2864fcb05898ad3681f27beac6a2", "committedDate": "2020-09-30T16:13:40Z", "message": "SAK-44383 samigo > provide return link on DD UI for URL delivered quizzes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk5NzI5NTkz", "url": "https://github.com/sakaiproject/sakai/pull/8641#pullrequestreview-499729593", "createdAt": "2020-09-30T19:05:28Z", "commit": {"oid": "9918706e468c2864fcb05898ad3681f27beac6a2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxOTowNToyOFrOHarceQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxOTowNToyOFrOHarceQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzczNjgyNQ==", "bodyText": "should this be delivery.publishedURL instead of delivery.getPublishedURL() ?", "url": "https://github.com/sakaiproject/sakai/pull/8641#discussion_r497736825", "createdAt": "2020-09-30T19:05:28Z", "author": {"login": "ottenhoff"}, "path": "samigo/samigo-app/src/webapp/jsf/delivery/discrepancyInData.jsp", "diffHunk": "@@ -58,11 +58,12 @@\n \n  <h:form id=\"discrepancyInData\">\n  <p class=\"act\">\n-       <h:commandButton value=\"#{deliveryMessages.button_return}\" type=\"submit\"\n-         styleClass=\"active\" action=\"select\" rendered=\"#{delivery.actionString=='takeAssessment'}\">\n-          <f:actionListener\n-            type=\"org.sakaiproject.tool.assessment.ui.listener.select.SelectActionListener\" />\n+       <h:commandButton value=\"#{deliveryMessages.button_return}\" type=\"submit\" styleClass=\"active\" action=\"select\" rendered=\"#{delivery.actionString=='takeAssessment'}\">\n+          <f:actionListener type=\"org.sakaiproject.tool.assessment.ui.listener.select.SelectActionListener\" />\n        </h:commandButton>\n+       <h:outputLink rendered=\"#{delivery.actionString == 'takeAssessmentViaUrl'}\" value=\"#{delivery.getPublishedURL()}\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9918706e468c2864fcb05898ad3681f27beac6a2"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk5NzM5NDY4", "url": "https://github.com/sakaiproject/sakai/pull/8641#pullrequestreview-499739468", "createdAt": "2020-09-30T19:20:00Z", "commit": {"oid": "9918706e468c2864fcb05898ad3681f27beac6a2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk5NzQwNjEz", "url": "https://github.com/sakaiproject/sakai/pull/8641#pullrequestreview-499740613", "createdAt": "2020-09-30T19:21:32Z", "commit": {"oid": "9918706e468c2864fcb05898ad3681f27beac6a2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxOToyMTozMlrOHar9lA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxOToyMTozMlrOHar9lA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Nzc0NTMwMA==", "bodyText": "minor, but i find it easier to visualize what code is doing when\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  generatePublishedURL(assessment);\n          \n          \n            \n                  this.publishedUrl = generatePublishedURL(assessment);", "url": "https://github.com/sakaiproject/sakai/pull/8641#discussion_r497745300", "createdAt": "2020-09-30T19:21:32Z", "author": {"login": "ottenhoff"}, "path": "samigo/samigo-app/src/java/org/sakaiproject/tool/assessment/ui/bean/author/PublishedAssessmentSettingsBean.java", "diffHunk": "@@ -411,18 +411,8 @@ public void setAssessment(PublishedAssessmentFacade assessment) {\n       setIpAddresses(assessment);\n \n       // publishedUrl\n-      FacesContext context = FacesContext.getCurrentInstance();\n-      ExternalContext extContext = context.getExternalContext();\n-      // get the alias to the pub assessment\n-      this.alias = assessment.getAssessmentMetaDataByLabel(\n-          AssessmentMetaDataIfc.ALIAS);\n-      String server = ( (javax.servlet.http.HttpServletRequest) extContext.\n-                       getRequest()).getRequestURL().toString();\n-      int index = server.indexOf(extContext.getRequestContextPath() + \"/\"); // \"/samigo-app/\"\n-      server = server.substring(0, index);\n-      String url = server + extContext.getRequestContextPath();\n-      this.publishedUrl = url + \"/servlet/Login?id=\" + this.alias;\n-      \n+      generatePublishedURL(assessment);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9918706e468c2864fcb05898ad3681f27beac6a2"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "32b7b1f7d5631536321e218aa98477f0e0659a03", "author": {"user": {"login": "bjones86", "name": "Brian Jones"}}, "url": "https://github.com/sakaiproject/sakai/commit/32b7b1f7d5631536321e218aa98477f0e0659a03", "committedDate": "2020-09-30T19:41:21Z", "message": "suggestion from sam"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "18ceff016996c52cc38eae5088e5917e75a381a1", "author": {"user": {"login": "bjones86", "name": "Brian Jones"}}, "url": "https://github.com/sakaiproject/sakai/commit/18ceff016996c52cc38eae5088e5917e75a381a1", "committedDate": "2020-09-30T19:40:03Z", "message": "suggestion from sam"}, "afterCommit": {"oid": "32b7b1f7d5631536321e218aa98477f0e0659a03", "author": {"user": {"login": "bjones86", "name": "Brian Jones"}}, "url": "https://github.com/sakaiproject/sakai/commit/32b7b1f7d5631536321e218aa98477f0e0659a03", "committedDate": "2020-09-30T19:41:21Z", "message": "suggestion from sam"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2719, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}