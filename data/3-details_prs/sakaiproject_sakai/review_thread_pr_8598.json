{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg5OTQ1NDAw", "number": 8598, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxMjo0NzowMFrOEmEQEQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxMjo1MjoyMlrOEmEYng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA4MzUwOTkzOnYy", "diffSide": "RIGHT", "path": "kernel/kernel-impl/src/main/java/org/sakaiproject/component/impl/BasicConfigurationService.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxMjo0NzowMFrOHV4RxA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQyMTozMDozNVrOHWNF0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjcwNDE5Ng==", "bodyText": "This method can just be \"return NumberUtils.toLong(getString(name), dflt);\". It will handle NumberFormatException also.", "url": "https://github.com/sakaiproject/sakai/pull/8598#discussion_r492704196", "createdAt": "2020-09-22T12:47:00Z", "author": {"login": "plukasew"}, "path": "kernel/kernel-impl/src/main/java/org/sakaiproject/component/impl/BasicConfigurationService.java", "diffHunk": "@@ -625,6 +625,18 @@ protected int dereferenceConfig() {\n         return rv;\n     }\n \n+    /**\n+     * {@inheritDoc}\n+     */\n+    public long getLong(String name, long dflt)\n+    {\n+        String value = getString(name);\n+\n+        if (StringUtils.isEmpty(value)) return dflt;\n+\n+        return Long.parseLong(value);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "09495ea5133b26f14c7a884a562211ab8e6b2216"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzA0NTIwMQ==", "bodyText": "Thanks, I was just re-using the existing pattern and didn't put much thought into improving this. NumberUtils here would probably reduce more code.", "url": "https://github.com/sakaiproject/sakai/pull/8598#discussion_r493045201", "createdAt": "2020-09-22T21:30:35Z", "author": {"login": "jonespm"}, "path": "kernel/kernel-impl/src/main/java/org/sakaiproject/component/impl/BasicConfigurationService.java", "diffHunk": "@@ -625,6 +625,18 @@ protected int dereferenceConfig() {\n         return rv;\n     }\n \n+    /**\n+     * {@inheritDoc}\n+     */\n+    public long getLong(String name, long dflt)\n+    {\n+        String value = getString(name);\n+\n+        if (StringUtils.isEmpty(value)) return dflt;\n+\n+        return Long.parseLong(value);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjcwNDE5Ng=="}, "originalCommit": {"oid": "09495ea5133b26f14c7a884a562211ab8e6b2216"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA4MzUzMTgyOnYy", "diffSide": "RIGHT", "path": "kernel/kernel-impl/src/main/java/org/sakaiproject/component/impl/BasicConfigurationService.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxMjo1MjoyMlrOHV4fSw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQyMTo0NzozN1rOHWNi_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjcwNzY1OQ==", "bodyText": "defaultvalue is a Long already so you can just cast directly to Long: this.getLong(name, (Long) defaultValue);", "url": "https://github.com/sakaiproject/sakai/pull/8598#discussion_r492707659", "createdAt": "2020-09-22T12:52:22Z", "author": {"login": "plukasew"}, "path": "kernel/kernel-impl/src/main/java/org/sakaiproject/component/impl/BasicConfigurationService.java", "diffHunk": "@@ -1093,9 +1105,16 @@ protected ConfigItemImpl findConfigItem(String name, Object defaultValue) {\n             }\n         } else {\n             if (defaultValue instanceof Number) {\n-                int num = ((Number) defaultValue).intValue();\n-                int intValue = this.getInt(name, num);\n-                returnValue = (T) Integer.valueOf(intValue);\n+                if (defaultValue instanceof Long) {\n+                    long num = ((Number) defaultValue).longValue();\n+                    long longValue = this.getLong(name, num);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "09495ea5133b26f14c7a884a562211ab8e6b2216"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzA1MjY2OA==", "bodyText": "Thanks!", "url": "https://github.com/sakaiproject/sakai/pull/8598#discussion_r493052668", "createdAt": "2020-09-22T21:47:37Z", "author": {"login": "jonespm"}, "path": "kernel/kernel-impl/src/main/java/org/sakaiproject/component/impl/BasicConfigurationService.java", "diffHunk": "@@ -1093,9 +1105,16 @@ protected ConfigItemImpl findConfigItem(String name, Object defaultValue) {\n             }\n         } else {\n             if (defaultValue instanceof Number) {\n-                int num = ((Number) defaultValue).intValue();\n-                int intValue = this.getInt(name, num);\n-                returnValue = (T) Integer.valueOf(intValue);\n+                if (defaultValue instanceof Long) {\n+                    long num = ((Number) defaultValue).longValue();\n+                    long longValue = this.getLong(name, num);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjcwNzY1OQ=="}, "originalCommit": {"oid": "09495ea5133b26f14c7a884a562211ab8e6b2216"}, "originalPosition": 28}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2666, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}