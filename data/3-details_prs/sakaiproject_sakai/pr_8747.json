{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEwMzkyMTky", "number": 8747, "title": "SAK-44553 handle scenario where tab is backgrounded and XHR syncing submission status is missing", "bodyText": "CC: @dnhutchins", "createdAt": "2020-10-27T00:50:42Z", "url": "https://github.com/sakaiproject/sakai/pull/8747", "merged": true, "mergeCommit": {"oid": "d820f9e32de1a82c2c9098e0ec948d577e42881b"}, "closed": true, "closedAt": "2020-10-29T13:32:53Z", "author": {"login": "ottenhoff"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdWeHF2AH2gAyNTEwMzkyMTkyOjM1OTlkOWE5OTUyNDZlNThiODRiYzQzMzk1YzVkODUwNzE1NjNiYzM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdXSEIlAFqTUxOTY1NTE0MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3599d9a995246e58b84bc43395c5d85071563bc3", "author": {"user": {"login": "ottenhoff", "name": "Sam Ottenhoff"}}, "url": "https://github.com/sakaiproject/sakai/commit/3599d9a995246e58b84bc43395c5d85071563bc3", "committedDate": "2020-10-27T00:48:28Z", "message": "SAK-44553 handle scenario where tab is backgrounded and XHR syncing submission status is missing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d267b7c20ab4694a8ea10b24ff8a4d100a77570e", "author": {"user": {"login": "ottenhoff", "name": "Sam Ottenhoff"}}, "url": "https://github.com/sakaiproject/sakai/commit/d267b7c20ab4694a8ea10b24ff8a4d100a77570e", "committedDate": "2020-10-27T00:51:01Z", "message": "not typed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed8e114d700c131af16d627949c985e65e1699a8", "author": {"user": {"login": "ottenhoff", "name": "Sam Ottenhoff"}}, "url": "https://github.com/sakaiproject/sakai/commit/ed8e114d700c131af16d627949c985e65e1699a8", "committedDate": "2020-10-27T00:52:16Z", "message": "tabs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3Mjc1MTAw", "url": "https://github.com/sakaiproject/sakai/pull/8747#pullrequestreview-517275100", "createdAt": "2020-10-27T00:53:54Z", "commit": {"oid": "ed8e114d700c131af16d627949c985e65e1699a8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwMDo1Mzo1NFrOHonkBg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwMDo1Mzo1NFrOHonkBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjM1MzI4Ng==", "bodyText": "Main mod is here is adding submissionStatus to the getTimerProgress XHR call so that there is no chance a user can background a tab and then come back to an already-submitted/already-expired exam and continue working on it", "url": "https://github.com/sakaiproject/sakai/pull/8747#discussion_r512353286", "createdAt": "2020-10-27T00:53:54Z", "author": {"login": "ottenhoff"}, "path": "samigo/samigo-app/src/webapp/jsf/widget/timerBar/timerbar.js", "diffHunk": "@@ -282,7 +282,9 @@\n       $.getJSON(routePrefix + \"getTimerProgress\" + routeSuffix, ajaxQuery, function(data) {\n           totalTime = data[0];\n           elapsedTime = data[1];\n-          if (totalTime === elapsedTime) {\n+          submissionStatus = data[2];\n+\n+          if (submissionStatus == 0 || totalTime === elapsedTime) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ed8e114d700c131af16d627949c985e65e1699a8"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5Mzg1ODcz", "url": "https://github.com/sakaiproject/sakai/pull/8747#pullrequestreview-519385873", "createdAt": "2020-10-29T07:15:26Z", "commit": {"oid": "ed8e114d700c131af16d627949c985e65e1699a8"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5NjU1MTQw", "url": "https://github.com/sakaiproject/sakai/pull/8747#pullrequestreview-519655140", "createdAt": "2020-10-29T13:20:18Z", "commit": {"oid": "ed8e114d700c131af16d627949c985e65e1699a8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2370, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}