{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAwODE1NDkz", "number": 8676, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQyMDo1NDowNFrOEsMbjg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxODo0ODoyMVrOEtLX4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0Nzc2NDYyOnYy", "diffSide": "RIGHT", "path": "msgcntr/messageforums-app/src/java/org/sakaiproject/tool/messageforums/ui/MessageForumStatisticsBean.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQyMDo1NDowNFrOHfYU-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQyMDo1NDowNFrOHfYU-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjY2NjQ5MQ==", "bodyText": "This can be reduced to 1 line:\ntotalPosts = studentAuthoredStats.stream().map( (pair) -> ((Long) pair[1]).intValue() ).reduce( totalPosts, Integer::sum );\nHowever, I'm not sure if it's more or less readable.", "url": "https://github.com/sakaiproject/sakai/pull/8676#discussion_r502666491", "createdAt": "2020-10-09T20:54:04Z", "author": {"login": "bjones86"}, "path": "msgcntr/messageforums-app/src/java/org/sakaiproject/tool/messageforums/ui/MessageForumStatisticsBean.java", "diffHunk": "@@ -3112,4 +3112,17 @@ private boolean isUseAnonymousId(Topic topic)\n \t\t// Condenses to:\n \t\treturn topic.getPostAnonymous() && (!topic.getRevealIDsToRoles() || !uiPermissionsManager.isIdentifyAnonAuthors((DiscussionTopic) topic));\n \t}\n+\n+    public int getPercentRead()\n+    {\n+        int totalPosts = 0;\n+        List<Object[]> studentAuthoredStats = messageManager.findAuthoredMessageCountForAllStudents();\n+        for (Object[] pair : studentAuthoredStats)\n+        {\n+            totalPosts += ((Long) pair[1]).intValue();\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d26e0a0e814f759d7a3849d2afd0031bb5f3087"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE1Nzk3ODc1OnYy", "diffSide": "RIGHT", "path": "msgcntr/messageforums-api/src/bundle/org/sakaiproject/api/app/messagecenter/bundle/Messages.properties", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxODoxOTo1M1rOHgz2jw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxODoxOTo1M1rOHgz2jw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDE2NjAzMQ==", "bodyText": "These <span>'s are probably better to have in the JSP. Let me know if I should refactor.", "url": "https://github.com/sakaiproject/sakai/pull/8676#discussion_r504166031", "createdAt": "2020-10-13T18:19:53Z", "author": {"login": "bjones86"}, "path": "msgcntr/messageforums-api/src/bundle/org/sakaiproject/api/app/messagecenter/bundle/Messages.properties", "diffHunk": "@@ -100,6 +100,8 @@ stat_sort_by_date=Sort by Date\n stat_byUser=by User\n stat_byTopic=by Topic\n stat_totalMessages=Total Messages\n+stat_percent_read=<span class=\"statsTally\">Percent Read:</span> {0}%\n+stat_num_authored=<span class=\"statsTally\">Messages Authored:</span> {0}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d26e0a0e814f759d7a3849d2afd0031bb5f3087"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE1Nzk4ODQ5OnYy", "diffSide": "RIGHT", "path": "msgcntr/messageforums-app/src/java/org/sakaiproject/tool/messageforums/ui/MessageForumStatisticsBean.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxODoyMjozOVrOHgz8aA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxODo0NjozOFrOHg0wJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDE2NzUyOA==", "bodyText": "this just smells like it can blow up, no?", "url": "https://github.com/sakaiproject/sakai/pull/8676#discussion_r504167528", "createdAt": "2020-10-13T18:22:39Z", "author": {"login": "ottenhoff"}, "path": "msgcntr/messageforums-app/src/java/org/sakaiproject/tool/messageforums/ui/MessageForumStatisticsBean.java", "diffHunk": "@@ -3112,4 +3112,17 @@ private boolean isUseAnonymousId(Topic topic)\n \t\t// Condenses to:\n \t\treturn topic.getPostAnonymous() && (!topic.getRevealIDsToRoles() || !uiPermissionsManager.isIdentifyAnonAuthors((DiscussionTopic) topic));\n \t}\n+\n+    public int getPercentRead()\n+    {\n+        int totalPosts = 0;\n+        List<Object[]> studentAuthoredStats = messageManager.findAuthoredMessageCountForAllStudents();\n+        for (Object[] pair : studentAuthoredStats)\n+        {\n+            totalPosts += ((Long) pair[1]).intValue();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d26e0a0e814f759d7a3849d2afd0031bb5f3087"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDE3ODk2OQ==", "bodyText": "I've tested it for both users that have read some, and those who have read none: no explosions.\nIt's certainly not how I would have coded findAuthoredMessageCountForAllStudents(), but it does seem to gaurantee zeros instead of nulls.", "url": "https://github.com/sakaiproject/sakai/pull/8676#discussion_r504178969", "createdAt": "2020-10-13T18:43:20Z", "author": {"login": "bjones86"}, "path": "msgcntr/messageforums-app/src/java/org/sakaiproject/tool/messageforums/ui/MessageForumStatisticsBean.java", "diffHunk": "@@ -3112,4 +3112,17 @@ private boolean isUseAnonymousId(Topic topic)\n \t\t// Condenses to:\n \t\treturn topic.getPostAnonymous() && (!topic.getRevealIDsToRoles() || !uiPermissionsManager.isIdentifyAnonAuthors((DiscussionTopic) topic));\n \t}\n+\n+    public int getPercentRead()\n+    {\n+        int totalPosts = 0;\n+        List<Object[]> studentAuthoredStats = messageManager.findAuthoredMessageCountForAllStudents();\n+        for (Object[] pair : studentAuthoredStats)\n+        {\n+            totalPosts += ((Long) pair[1]).intValue();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDE2NzUyOA=="}, "originalCommit": {"oid": "3d26e0a0e814f759d7a3849d2afd0031bb5f3087"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDE4MDc3NQ==", "bodyText": "ok not sure how but ok !", "url": "https://github.com/sakaiproject/sakai/pull/8676#discussion_r504180775", "createdAt": "2020-10-13T18:46:38Z", "author": {"login": "ottenhoff"}, "path": "msgcntr/messageforums-app/src/java/org/sakaiproject/tool/messageforums/ui/MessageForumStatisticsBean.java", "diffHunk": "@@ -3112,4 +3112,17 @@ private boolean isUseAnonymousId(Topic topic)\n \t\t// Condenses to:\n \t\treturn topic.getPostAnonymous() && (!topic.getRevealIDsToRoles() || !uiPermissionsManager.isIdentifyAnonAuthors((DiscussionTopic) topic));\n \t}\n+\n+    public int getPercentRead()\n+    {\n+        int totalPosts = 0;\n+        List<Object[]> studentAuthoredStats = messageManager.findAuthoredMessageCountForAllStudents();\n+        for (Object[] pair : studentAuthoredStats)\n+        {\n+            totalPosts += ((Long) pair[1]).intValue();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDE2NzUyOA=="}, "originalCommit": {"oid": "3d26e0a0e814f759d7a3849d2afd0031bb5f3087"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE1ODA3NzE0OnYy", "diffSide": "RIGHT", "path": "library/src/morpheus-master/sass/modules/tool/forums/_forums.scss", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxODo0ODoyMVrOHg0zbA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxODo0ODoyMVrOHg0zbA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDE4MTYxMg==", "bodyText": "can just use #666 instead ? it's widely used in in other files", "url": "https://github.com/sakaiproject/sakai/pull/8676#discussion_r504181612", "createdAt": "2020-10-13T18:48:21Z", "author": {"login": "ottenhoff"}, "path": "library/src/morpheus-master/sass/modules/tool/forums/_forums.scss", "diffHunk": "@@ -295,4 +295,9 @@\n \t\t\tmargin: 0 $standard-space $standard-space 0;\n \t\t}\n \t}\n+\n+\t.statsTally {\n+\t\tcolor: #655f62;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d26e0a0e814f759d7a3849d2afd0031bb5f3087"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2582, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}