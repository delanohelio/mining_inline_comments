{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk5ODIwODUz", "number": 8663, "title": "SAK-44353 Group Manager and Date Manager do not change idiom", "bodyText": "When the applications with Thymeleaf DateManager and GroupManager were initialized when the server was started, they took the default language of the platform, of the operating system of the machine. So, what I have done is to allow that when the entry point of these two applications is accessed, the language of the user session indicated in preferences is taken. This way it works properly.\nI do the pull request with the changes.\nPlease merge with Sakai 21.x and 20.x.\nThank you.", "createdAt": "2020-10-08T10:30:20Z", "url": "https://github.com/sakaiproject/sakai/pull/8663", "merged": true, "mergeCommit": {"oid": "3c26a209ab2a3d570e7b4b2e3df9f23ec7b80c36"}, "closed": true, "closedAt": "2020-12-03T13:17:45Z", "author": {"login": "MRutea"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdQfL80ABqjM4NTQ3NDA5ODg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdh2iI_AFqTU0MTcwNzMyMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ec06c794fdcedd38b81cc83500dc23b349981f9d", "author": {"user": {"login": "MRutea", "name": null}}, "url": "https://github.com/sakaiproject/sakai/commit/ec06c794fdcedd38b81cc83500dc23b349981f9d", "committedDate": "2020-10-08T10:39:42Z", "message": "SAK-44353 Group Manager and Date Manager do not change idiom"}, "afterCommit": {"oid": "7dfaa176a86dd94ce5ed78347acf172d67a09aa7", "author": {"user": {"login": "MRutea", "name": null}}, "url": "https://github.com/sakaiproject/sakai/commit/7dfaa176a86dd94ce5ed78347acf172d67a09aa7", "committedDate": "2020-10-08T10:39:57Z", "message": "SAK-44353 Group Manager and Date Manager do not change idiom\n\n\nSAK-44353 Group Manager and Date Manager do not change idiom"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c42abe2a1b5f1571a8006d885e69448344d27c35", "author": {"user": {"login": "MRutea", "name": null}}, "url": "https://github.com/sakaiproject/sakai/commit/c42abe2a1b5f1571a8006d885e69448344d27c35", "committedDate": "2020-10-08T13:31:10Z", "message": "SAK-44353 Group Manager and Date Manager do not change idiom"}, "afterCommit": {"oid": "720d60314fea29ced972b2739e0317c338526e8d", "author": {"user": {"login": "MRutea", "name": null}}, "url": "https://github.com/sakaiproject/sakai/commit/720d60314fea29ced972b2739e0317c338526e8d", "committedDate": "2020-10-08T13:31:23Z", "message": "SAK-44353 Group Manager and Date Manager do not change idiom\n\n\nSAK-44353 Group Manager and Date Manager do not change idiom\n\n\nSAK-44353 Group Manager and Date Manager do not change idiom"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1426d1e7b45a1347bc17c7f51c98525698925c5e", "author": {"user": {"login": "MRutea", "name": null}}, "url": "https://github.com/sakaiproject/sakai/commit/1426d1e7b45a1347bc17c7f51c98525698925c5e", "committedDate": "2020-10-08T13:33:54Z", "message": "SAK-44353 Group Manager and Date Manager do not change idiom"}, "afterCommit": {"oid": "ff9f37d72a3f019e8636ec9026589af1e0a83f0b", "author": {"user": {"login": "MRutea", "name": null}}, "url": "https://github.com/sakaiproject/sakai/commit/ff9f37d72a3f019e8636ec9026589af1e0a83f0b", "committedDate": "2020-10-08T13:34:11Z", "message": "SAK-44353 Group Manager and Date Manager do not change idiom\n\n\nSAK-44353 Group Manager and Date Manager do not change idiom\n\n\nSAK-44353 Group Manager and Date Manager do not change idiom\n\n\nSAK-44353 Group Manager and Date Manager do not change idiom"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9eb571a53092561b4f4bc7ecdb1b66e5629d591a", "author": {"user": {"login": "MRutea", "name": null}}, "url": "https://github.com/sakaiproject/sakai/commit/9eb571a53092561b4f4bc7ecdb1b66e5629d591a", "committedDate": "2020-10-08T13:37:45Z", "message": "SAK-44353 Group Manager and Date Manager do not change idiom"}, "afterCommit": {"oid": "06b6ea84f5c6d5ca25f7a5e0d994b01c6b3b8c0b", "author": {"user": {"login": "MRutea", "name": null}}, "url": "https://github.com/sakaiproject/sakai/commit/06b6ea84f5c6d5ca25f7a5e0d994b01c6b3b8c0b", "committedDate": "2020-10-08T13:38:03Z", "message": "SAK-44353 Group Manager and Date Manager do not change idiom\n\n\nSAK-44353 Group Manager and Date Manager do not change idiom\n\n\nSAK-44353 Group Manager and Date Manager do not change idiom\n\n\nSAK-44353 Group Manager and Date Manager do not change idiom\n\n\nSAK-44353 Group Manager and Date Manager do not change idiom"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEyNDU5NTAw", "url": "https://github.com/sakaiproject/sakai/pull/8663#pullrequestreview-512459500", "createdAt": "2020-10-20T08:31:22Z", "commit": {"oid": "06b6ea84f5c6d5ca25f7a5e0d994b01c6b3b8c0b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQwODozMToyMlrOHkwzZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQwODo0Njo0N1rOHkxcoQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODMxMDM3NA==", "bodyText": "need spaces around the !=", "url": "https://github.com/sakaiproject/sakai/pull/8663#discussion_r508310374", "createdAt": "2020-10-20T08:31:22Z", "author": {"login": "adrianfish"}, "path": "site-manage/datemanager/tool/src/main/java/org/sakaiproject/datemanager/tool/MainController.java", "diffHunk": "@@ -47,10 +52,29 @@\n @Controller\n public class MainController {\n \n-\t@Inject private DateManagerService dateManagerService;\n-\n-\t@RequestMapping(value = {\"/\", \"/index\"}, method = RequestMethod.GET)\n-\tpublic String showIndex(@RequestParam(required=false) String code, Model model) {\n+    @Inject private DateManagerService dateManagerService;\n+\t\n+    @Autowired\n+    private SessionManager sessionManager;\n+    \n+    @Autowired\n+    private PreferencesService preferencesService;\n+\n+    @RequestMapping(value = {\"/\", \"/index\"}, method = RequestMethod.GET)\n+    public String showIndex(@RequestParam(required=false) String code, Model model, HttpServletRequest request, HttpServletResponse response) {\n+\t\t\n+        Locale.setDefault(Locale.US);\n+        String userId = sessionManager.getCurrentSessionUserId();\n+        Locale loc = null;\n+        if (userId!=null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b6ea84f5c6d5ca25f7a5e0d994b01c6b3b8c0b"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODMxNDgwMA==", "bodyText": "This is an anti pattern. You should never need to do this as Locale.getDefault picks up the settings from the JVM.", "url": "https://github.com/sakaiproject/sakai/pull/8663#discussion_r508314800", "createdAt": "2020-10-20T08:37:53Z", "author": {"login": "adrianfish"}, "path": "site-manage/datemanager/tool/src/main/java/org/sakaiproject/datemanager/tool/MainController.java", "diffHunk": "@@ -47,10 +52,29 @@\n @Controller\n public class MainController {\n \n-\t@Inject private DateManagerService dateManagerService;\n-\n-\t@RequestMapping(value = {\"/\", \"/index\"}, method = RequestMethod.GET)\n-\tpublic String showIndex(@RequestParam(required=false) String code, Model model) {\n+    @Inject private DateManagerService dateManagerService;\n+\t\n+    @Autowired\n+    private SessionManager sessionManager;\n+    \n+    @Autowired\n+    private PreferencesService preferencesService;\n+\n+    @RequestMapping(value = {\"/\", \"/index\"}, method = RequestMethod.GET)\n+    public String showIndex(@RequestParam(required=false) String code, Model model, HttpServletRequest request, HttpServletResponse response) {\n+\t\t\n+        Locale.setDefault(Locale.US);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b6ea84f5c6d5ca25f7a5e0d994b01c6b3b8c0b"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODMxNTM1Nw==", "bodyText": "Should use loc = Locale.getDefault() here.", "url": "https://github.com/sakaiproject/sakai/pull/8663#discussion_r508315357", "createdAt": "2020-10-20T08:38:43Z", "author": {"login": "adrianfish"}, "path": "site-manage/datemanager/tool/src/main/java/org/sakaiproject/datemanager/tool/MainController.java", "diffHunk": "@@ -47,10 +52,29 @@\n @Controller\n public class MainController {\n \n-\t@Inject private DateManagerService dateManagerService;\n-\n-\t@RequestMapping(value = {\"/\", \"/index\"}, method = RequestMethod.GET)\n-\tpublic String showIndex(@RequestParam(required=false) String code, Model model) {\n+    @Inject private DateManagerService dateManagerService;\n+\t\n+    @Autowired\n+    private SessionManager sessionManager;\n+    \n+    @Autowired\n+    private PreferencesService preferencesService;\n+\n+    @RequestMapping(value = {\"/\", \"/index\"}, method = RequestMethod.GET)\n+    public String showIndex(@RequestParam(required=false) String code, Model model, HttpServletRequest request, HttpServletResponse response) {\n+\t\t\n+        Locale.setDefault(Locale.US);\n+        String userId = sessionManager.getCurrentSessionUserId();\n+        Locale loc = null;\n+        if (userId!=null) {\n+            loc = preferencesService.getLocale(userId);\n+        } else {\n+            loc = Locale.US;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b6ea84f5c6d5ca25f7a5e0d994b01c6b3b8c0b"}, "originalPosition": 56}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODMyMDkyOQ==", "bodyText": "I'm pretty sure you can just replace all this with ResourceLoaderMessageSource.\n@bean\npublic MessageSource messageSource() {\nResourceLoaderMessageSource messages = new ResourceLoaderMessageSource();\nmessages.setBasename(\"Messages\");\nreturn messages;\n}\nTake a look at:\nsite/sakai-message-bundle-manager-tool/src/main/java/org/sakaiproject/mbm/ThymeleafConfig.java", "url": "https://github.com/sakaiproject/sakai/pull/8663#discussion_r508320929", "createdAt": "2020-10-20T08:46:47Z", "author": {"login": "adrianfish"}, "path": "site-manage/datemanager/tool/src/main/java/org/sakaiproject/datemanager/ThymeleafConfig.java", "diffHunk": "@@ -76,4 +81,23 @@ private ITemplateResolver templateResolver() {\n \t\ttemplateResolver.setTemplateMode(TemplateMode.HTML);\n \t\treturn templateResolver;\n \t}\n+\t\n+    @Bean\n+\tpublic LocaleResolver localeResolver() {\n+\t    SessionLocaleResolver slr = new SessionLocaleResolver();\n+\t    slr.setDefaultLocale(Locale.US);\n+\t    return slr;\n+\t}\n+    \n+    @Bean\n+\tpublic LocaleChangeInterceptor localeChangeInterceptor() {\n+\t    LocaleChangeInterceptor lci = new LocaleChangeInterceptor();\n+\t    lci.setParamName(\"lang\");\n+\t    return lci;\n+\t}\n+    \n+    @Override\n+\tpublic void addInterceptors(InterceptorRegistry registry) {\n+\t    registry.addInterceptor(localeChangeInterceptor());\n+\t}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06b6ea84f5c6d5ca25f7a5e0d994b01c6b3b8c0b"}, "originalPosition": 44}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "40665a2269ecc9c6d9cf21917a0be3c12904b840", "author": {"user": {"login": "MRutea", "name": null}}, "url": "https://github.com/sakaiproject/sakai/commit/40665a2269ecc9c6d9cf21917a0be3c12904b840", "committedDate": "2020-10-23T09:39:15Z", "message": "SAK-44353 Group Manager and Date Manager do not change idiom"}, "afterCommit": {"oid": "b96739ad00943efc74623a686ca1ac2820b32d32", "author": {"user": {"login": "MRutea", "name": null}}, "url": "https://github.com/sakaiproject/sakai/commit/b96739ad00943efc74623a686ca1ac2820b32d32", "committedDate": "2020-10-23T09:40:02Z", "message": "SAK-44353 Group Manager and Date Manager do not change idiom\n\n\nSAK-44353 Group Manager and Date Manager do not change idiom\n\n\nSAK-44353 Group Manager and Date Manager do not change idiom\n\n\nSAK-44353 Group Manager and Date Manager do not change idiom\n\n\nSAK-44353 Group Manager and Date Manager do not change idiom\n\n\nSAK-44353 Group Manager and Date Manager do not change idiom"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "07803b8f5604b6001213583a80aef6bbf7fa27ab", "author": {"user": {"login": "MRutea", "name": null}}, "url": "https://github.com/sakaiproject/sakai/commit/07803b8f5604b6001213583a80aef6bbf7fa27ab", "committedDate": "2020-10-23T09:41:16Z", "message": "SAK-44353 Group Manager and Date Manager do not change idiom"}, "afterCommit": {"oid": "dd7b46a8da55648d3accd50c73f875b583e46e98", "author": {"user": {"login": "MRutea", "name": null}}, "url": "https://github.com/sakaiproject/sakai/commit/dd7b46a8da55648d3accd50c73f875b583e46e98", "committedDate": "2020-10-23T09:41:41Z", "message": "SAK-44353 Group Manager and Date Manager do not change idiom\n\n\nSAK-44353 Group Manager and Date Manager do not change idiom\n\n\nSAK-44353 Group Manager and Date Manager do not change idiom\n\n\nSAK-44353 Group Manager and Date Manager do not change idiom\n\n\nSAK-44353 Group Manager and Date Manager do not change idiom\n\n\nSAK-44353 Group Manager and Date Manager do not change idiom\n\n\nSAK-44353 Group Manager and Date Manager do not change idiom"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyNjkwMDQ2", "url": "https://github.com/sakaiproject/sakai/pull/8663#pullrequestreview-522690046", "createdAt": "2020-11-03T16:47:59Z", "commit": {"oid": "dd7b46a8da55648d3accd50c73f875b583e46e98"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QxNjo0Nzo1OVrOHs3omw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QxNjo0OTo1M1rOHs3tvQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjgxMDkwNw==", "bodyText": "final Locale loc = StringUtils.isNotBlank(userId) ? preferencesService.getLocale(userId) : Locale.getDefault();", "url": "https://github.com/sakaiproject/sakai/pull/8663#discussion_r516810907", "createdAt": "2020-11-03T16:47:59Z", "author": {"login": "adrianfish"}, "path": "site-manage/datemanager/tool/src/main/java/org/sakaiproject/datemanager/tool/MainController.java", "diffHunk": "@@ -47,10 +52,28 @@\n @Controller\n public class MainController {\n \n-\t@Inject private DateManagerService dateManagerService;\n-\n-\t@RequestMapping(value = {\"/\", \"/index\"}, method = RequestMethod.GET)\n-\tpublic String showIndex(@RequestParam(required=false) String code, Model model) {\n+    @Inject private DateManagerService dateManagerService;\n+\t\n+    @Autowired\n+    private SessionManager sessionManager;\n+    \n+    @Autowired\n+    private PreferencesService preferencesService;\n+\n+    @RequestMapping(value = {\"/\", \"/index\"}, method = RequestMethod.GET)\n+    public String showIndex(@RequestParam(required=false) String code, Model model, HttpServletRequest request, HttpServletResponse response) {\n+\n+        String userId = sessionManager.getCurrentSessionUserId();\n+        Locale loc = null;\n+        if (userId != null) {\n+            loc = preferencesService.getLocale(userId);\n+        } else {\n+        \tloc = Locale.getDefault();\n+        }\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dd7b46a8da55648d3accd50c73f875b583e46e98"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjgxMjIyMQ==", "bodyText": "Indentation seems off here.", "url": "https://github.com/sakaiproject/sakai/pull/8663#discussion_r516812221", "createdAt": "2020-11-03T16:49:53Z", "author": {"login": "adrianfish"}, "path": "site-manage/datemanager/tool/src/main/java/org/sakaiproject/datemanager/tool/MainController.java", "diffHunk": "@@ -47,10 +52,28 @@\n @Controller\n public class MainController {\n \n-\t@Inject private DateManagerService dateManagerService;\n-\n-\t@RequestMapping(value = {\"/\", \"/index\"}, method = RequestMethod.GET)\n-\tpublic String showIndex(@RequestParam(required=false) String code, Model model) {\n+    @Inject private DateManagerService dateManagerService;\n+\t\n+    @Autowired\n+    private SessionManager sessionManager;\n+    \n+    @Autowired\n+    private PreferencesService preferencesService;\n+\n+    @RequestMapping(value = {\"/\", \"/index\"}, method = RequestMethod.GET)\n+    public String showIndex(@RequestParam(required=false) String code, Model model, HttpServletRequest request, HttpServletResponse response) {\n+\n+        String userId = sessionManager.getCurrentSessionUserId();\n+        Locale loc = null;\n+        if (userId != null) {\n+            loc = preferencesService.getLocale(userId);\n+        } else {\n+        \tloc = Locale.getDefault();\n+        }\n+\n+        LocaleResolver localeResolver = RequestContextUtils.getLocaleResolver(request);\n+        localeResolver.setLocale(request, response, loc);\n+        ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dd7b46a8da55648d3accd50c73f875b583e46e98"}, "originalPosition": 60}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7820659f2c7ab4a7cea378c7a69525618f81f208", "author": {"user": {"login": "MRutea", "name": null}}, "url": "https://github.com/sakaiproject/sakai/commit/7820659f2c7ab4a7cea378c7a69525618f81f208", "committedDate": "2020-11-04T08:03:41Z", "message": "SAK-44353 Group Manager and Date Manager do not change idiom"}, "afterCommit": {"oid": "c5b38d6e44e458a58ca5d0f337b1380f823885f1", "author": {"user": {"login": "MRutea", "name": null}}, "url": "https://github.com/sakaiproject/sakai/commit/c5b38d6e44e458a58ca5d0f337b1380f823885f1", "committedDate": "2020-11-04T08:05:05Z", "message": "SAK-44353 Group Manager and Date Manager do not change idiom\n\n\nSAK-44353 Group Manager and Date Manager do not change idiom\n\n\nSAK-44353 Group Manager and Date Manager do not change idiom\n\n\nSAK-44353 Group Manager and Date Manager do not change idiom\n\n\nSAK-44353 Group Manager and Date Manager do not change idiom\n\n\nSAK-44353 Group Manager and Date Manager do not change idiom\n\n\nSAK-44353 Group Manager and Date Manager do not change idiom\n\n\nSAK-44353 Group Manager and Date Manager do not change idiom"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQwOTgzMjA1", "url": "https://github.com/sakaiproject/sakai/pull/8663#pullrequestreview-540983205", "createdAt": "2020-11-30T14:53:33Z", "commit": {"oid": "c5b38d6e44e458a58ca5d0f337b1380f823885f1"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxNDo1MzozM1rOH7-sig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxNDo1NDozMlrOH7-vhg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjY1NTI0Mg==", "bodyText": "Sorry I've been neglecting this PR review \ud83d\udc4d\nWhy are you bothering to create a new locale object here? You have it already at line 67.", "url": "https://github.com/sakaiproject/sakai/pull/8663#discussion_r532655242", "createdAt": "2020-11-30T14:53:33Z", "author": {"login": "adrianfish"}, "path": "site-manage/datemanager/tool/src/main/java/org/sakaiproject/datemanager/tool/MainController.java", "diffHunk": "@@ -47,12 +52,24 @@\n @Controller\n public class MainController {\n \n-\t@Inject private DateManagerService dateManagerService;\n+    @Inject private DateManagerService dateManagerService;\n+\t\n+    @Autowired\n+    private SessionManager sessionManager;\n+    \n+    @Autowired\n+    private PreferencesService preferencesService;\n+\n+    @RequestMapping(value = {\"/\", \"/index\"}, method = RequestMethod.GET)\n+    public String showIndex(@RequestParam(required=false) String code, Model model, HttpServletRequest request, HttpServletResponse response) {\n+\n+        String userId = sessionManager.getCurrentSessionUserId();\n+        final Locale loc = StringUtils.isNotBlank(userId) ? preferencesService.getLocale(userId) : Locale.getDefault();\n+        LocaleResolver localeResolver = RequestContextUtils.getLocaleResolver(request);\n+        localeResolver.setLocale(request, response, loc);\n \n-\t@RequestMapping(value = {\"/\", \"/index\"}, method = RequestMethod.GET)\n-\tpublic String showIndex(@RequestParam(required=false) String code, Model model) {\n-\t\tLocale locale = dateManagerService.getUserLocale();\n-\t\tString siteId = dateManagerService.getCurrentSiteId();\n+        Locale locale = dateManagerService.getUserLocale();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c5b38d6e44e458a58ca5d0f337b1380f823885f1"}, "originalPosition": 56}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjY1NjAwNg==", "bodyText": "You can use GetMapping here. Bit simpler.", "url": "https://github.com/sakaiproject/sakai/pull/8663#discussion_r532656006", "createdAt": "2020-11-30T14:54:32Z", "author": {"login": "adrianfish"}, "path": "site-manage/datemanager/tool/src/main/java/org/sakaiproject/datemanager/tool/MainController.java", "diffHunk": "@@ -47,12 +52,24 @@\n @Controller\n public class MainController {\n \n-\t@Inject private DateManagerService dateManagerService;\n+    @Inject private DateManagerService dateManagerService;\n+\t\n+    @Autowired\n+    private SessionManager sessionManager;\n+    \n+    @Autowired\n+    private PreferencesService preferencesService;\n+\n+    @RequestMapping(value = {\"/\", \"/index\"}, method = RequestMethod.GET)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c5b38d6e44e458a58ca5d0f337b1380f823885f1"}, "originalPosition": 44}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fbc5b0143363890730eefd70c41c44f145cfb66c", "author": {"user": {"login": "MRutea", "name": null}}, "url": "https://github.com/sakaiproject/sakai/commit/fbc5b0143363890730eefd70c41c44f145cfb66c", "committedDate": "2020-12-01T09:25:13Z", "message": "SAK-44353 Group Manager and Date Manager do not change idiom\n\n\nSAK-44353 Group Manager and Date Manager do not change idiom\n\n\nSAK-44353 Group Manager and Date Manager do not change idiom\n\n\nSAK-44353 Group Manager and Date Manager do not change idiom\n\n\nSAK-44353 Group Manager and Date Manager do not change idiom\n\n\nSAK-44353 Group Manager and Date Manager do not change idiom\n\n\nSAK-44353 Group Manager and Date Manager do not change idiom\n\n\nSAK-44353 Group Manager and Date Manager do not change idiom\n\n\nSAK-44353 Group Manager and Date Manager do not change idiom"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "50a3cfc63e42c99ebe4f6a068baba7cc48adde58", "author": {"user": {"login": "MRutea", "name": null}}, "url": "https://github.com/sakaiproject/sakai/commit/50a3cfc63e42c99ebe4f6a068baba7cc48adde58", "committedDate": "2020-12-01T09:24:47Z", "message": "SAK-44353 Group Manager and Date Manager do not change idiom"}, "afterCommit": {"oid": "fbc5b0143363890730eefd70c41c44f145cfb66c", "author": {"user": {"login": "MRutea", "name": null}}, "url": "https://github.com/sakaiproject/sakai/commit/fbc5b0143363890730eefd70c41c44f145cfb66c", "committedDate": "2020-12-01T09:25:13Z", "message": "SAK-44353 Group Manager and Date Manager do not change idiom\n\n\nSAK-44353 Group Manager and Date Manager do not change idiom\n\n\nSAK-44353 Group Manager and Date Manager do not change idiom\n\n\nSAK-44353 Group Manager and Date Manager do not change idiom\n\n\nSAK-44353 Group Manager and Date Manager do not change idiom\n\n\nSAK-44353 Group Manager and Date Manager do not change idiom\n\n\nSAK-44353 Group Manager and Date Manager do not change idiom\n\n\nSAK-44353 Group Manager and Date Manager do not change idiom\n\n\nSAK-44353 Group Manager and Date Manager do not change idiom"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQxNzA3MzIw", "url": "https://github.com/sakaiproject/sakai/pull/8663#pullrequestreview-541707320", "createdAt": "2020-12-01T09:28:54Z", "commit": {"oid": "fbc5b0143363890730eefd70c41c44f145cfb66c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2535, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}