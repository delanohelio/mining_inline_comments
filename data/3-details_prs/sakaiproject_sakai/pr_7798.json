{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY2MDI2ODg0", "number": 7798, "title": "SAK-42980 - Assignment submission list - comparator has errors when sorting by content review", "bodyText": "https://jira.sakaiproject.org/browse/SAK-42980\nSee ticket in jira for details", "createdAt": "2020-01-22T19:35:14Z", "url": "https://github.com/sakaiproject/sakai/pull/7798", "merged": true, "mergeCommit": {"oid": "def8cc41ce0a1df3cbd1d914687cd91815bbf83a"}, "closed": true, "closedAt": "2020-01-23T15:16:34Z", "author": {"login": "bbailla2"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb86-v4gH2gAyMzY2MDI2ODg0OjU3NWYzMTk4OWFmMjZkMjQzNzIzNzZhODg0MjVkOTBhZjc5OTA4ZmM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb8_X1JAFqTM0Njk5OTM5MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "575f31989af26d24372376a88425d90af79908fc", "author": {"user": {"login": "bbailla2", "name": "Brian Baillargeon"}}, "url": "https://github.com/sakaiproject/sakai/commit/575f31989af26d24372376a88425d90af79908fc", "committedDate": "2020-01-22T19:33:25Z", "message": "SAK-42980 - Assignment submission list - comparator has errors when sorting by content review"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2ODUwMjk1", "url": "https://github.com/sakaiproject/sakai/pull/7798#pullrequestreview-346850295", "createdAt": "2020-01-22T19:38:03Z", "commit": {"oid": "575f31989af26d24372376a88425d90af79908fc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQxOTozODowNFrOFgoiOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQxOTozODowNFrOFgoiOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc2Mjg3NQ==", "bodyText": "Note to reviewers: I've done this change as this method is invoked pretty frequently for content review items that are in 'Error' status (e.g. student submission is less than 20 words, etc.). It contributes to log bloat with lines like:\n:getReviewReport(ContentResource) Report status: 2", "url": "https://github.com/sakaiproject/sakai/pull/7798#discussion_r369762875", "createdAt": "2020-01-22T19:38:04Z", "author": {"login": "bbailla2"}, "path": "assignment/impl/src/java/org/sakaiproject/assignment/impl/AssignmentServiceImpl.java", "diffHunk": "@@ -4319,7 +4337,7 @@ private String getReviewReport(ContentResource cr, String assignmentReference) {\n                 return contentReviewService.getReviewReportStudent(contentId, assignmentReference, userDirectoryService.getCurrentUser().getId());\n             }\n         } catch (Exception e) {\n-            log.warn(\":getReviewReport(ContentResource) {}\", e.getMessage());\n+            log.debug(\":getReviewReport(ContentResource) {}\", e.getMessage());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "575f31989af26d24372376a88425d90af79908fc"}, "originalPosition": 30}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1b2089ba8071727c971d64c13a0342d47b24942", "author": {"user": {"login": "bbailla2", "name": "Brian Baillargeon"}}, "url": "https://github.com/sakaiproject/sakai/commit/d1b2089ba8071727c971d64c13a0342d47b24942", "committedDate": "2020-01-22T19:41:44Z", "message": "SAK-42980 - removing unnecessary comment"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2OTQ2MTYx", "url": "https://github.com/sakaiproject/sakai/pull/7798#pullrequestreview-346946161", "createdAt": "2020-01-22T22:22:59Z", "commit": {"oid": "d1b2089ba8071727c971d64c13a0342d47b24942"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQyMjoyMjo1OVrOFgtGiw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQyMjoyMjo1OVrOFgtGiw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTgzNzcwNw==", "bodyText": "We can't delete all of this sorting logic and just call getSortedContentReviewResults instead?", "url": "https://github.com/sakaiproject/sakai/pull/7798#discussion_r369837707", "createdAt": "2020-01-22T22:22:59Z", "author": {"login": "ottenhoff"}, "path": "assignment/tool/src/java/org/sakaiproject/assignment/tool/AssignmentAction.java", "diffHunk": "@@ -14528,7 +14528,9 @@ else if (m_criteria.equals(SORTED_GRADE_SUBMISSION_CONTENTREVIEW)) {\n                         List<ContentReviewResult> r1 = assignmentService.getContentReviewResults(s1);\n                         List<ContentReviewResult> r2 = assignmentService.getContentReviewResults(s2);\n \n-                        if (CollectionUtils.isEmpty(r1)) {\n+                        if (CollectionUtils.isEmpty(r1) && CollectionUtils.isEmpty(r2)) {\n+                            result = 0;\n+                        } else if (CollectionUtils.isEmpty(r1)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d1b2089ba8071727c971d64c13a0342d47b24942"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2OTk5Mzkx", "url": "https://github.com/sakaiproject/sakai/pull/7798#pullrequestreview-346999391", "createdAt": "2020-01-23T00:40:26Z", "commit": {"oid": "d1b2089ba8071727c971d64c13a0342d47b24942"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1924, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}