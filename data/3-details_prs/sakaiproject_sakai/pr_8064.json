{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkyNDIwODUy", "number": 8064, "title": "SAK-41964 - Tests&Quizzes: Edit Question form fields are not associat\u2026", "bodyText": "\u2026ed with their respective labels", "createdAt": "2020-03-23T14:29:34Z", "url": "https://github.com/sakaiproject/sakai/pull/8064", "merged": true, "mergeCommit": {"oid": "e984a386330ae35908c566f6d7c1acb13bb00263"}, "closed": true, "closedAt": "2020-03-24T15:27:18Z", "author": {"login": "mpellicer"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcQfMkDgFqTM3OTQ4MzA5Mw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcQ0nfUAFqTM4MDQyMzA3Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5NDgzMDkz", "url": "https://github.com/sakaiproject/sakai/pull/8064#pullrequestreview-379483093", "createdAt": "2020-03-23T14:29:39Z", "commit": {"oid": "3d5e8981a009708d0ee36b7a0454faff0ad9c198"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxNDoyOTozOVrOF6H_4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxNDoyOTozOVrOF6H_4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjQ5Mjc2OQ==", "bodyText": "Looks like there's a label missing for this input. That makes it hard for people using screen readers or voice control to use the input.", "url": "https://github.com/sakaiproject/sakai/pull/8064#discussion_r396492769", "createdAt": "2020-03-23T14:29:39Z", "author": {"login": "accesslint"}, "path": "samigo/samigo-app/src/java/org/sakaiproject/jsf/renderer/RichTextEditArea.java", "diffHunk": "@@ -222,8 +225,9 @@ private void encodeCK(ResponseWriter writer, String value, String identity, Stri\n     else {\n         \tvalue = ComponentManager.get(FormattedText.class).escapeHtmlFormattedTextarea((String) value);\n     }\n-    \n-    writer.write(\"<textarea name=\\\"\" + clientId + \"_textinput\\\" id=\\\"\" + clientId + \"_textinput\\\" \" + getIdentityAttribute(identity) + \" rows=\\\"\"+ textBoxRows + \"\\\" cols=\\\"\"+ textBoxCols + \"\\\" class=\\\"simple_text_area\\\">\");\n+\n+    String inputTextArea = \"<textarea name='%s' id='%s' rows='%d' cols='%d' class='%s'>\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d5e8981a009708d0ee36b7a0454faff0ad9c198"}, "originalPosition": 24}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "53c98a3d800d982d7131cec63892d63e927fe8f2", "author": {"user": {"login": "mpellicer", "name": "Miguel Pellicer"}}, "url": "https://github.com/sakaiproject/sakai/commit/53c98a3d800d982d7131cec63892d63e927fe8f2", "committedDate": "2020-03-24T09:07:00Z", "message": "SAK-41964 - Tests&Quizzes: Edit Question form fields are not associated with their respective labels"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3d5e8981a009708d0ee36b7a0454faff0ad9c198", "author": {"user": {"login": "mpellicer", "name": "Miguel Pellicer"}}, "url": "https://github.com/sakaiproject/sakai/commit/3d5e8981a009708d0ee36b7a0454faff0ad9c198", "committedDate": "2020-03-23T14:28:33Z", "message": "SAK-41964 - Tests&Quizzes: Edit Question form fields are not associated with their respective labels"}, "afterCommit": {"oid": "53c98a3d800d982d7131cec63892d63e927fe8f2", "author": {"user": {"login": "mpellicer", "name": "Miguel Pellicer"}}, "url": "https://github.com/sakaiproject/sakai/commit/53c98a3d800d982d7131cec63892d63e927fe8f2", "committedDate": "2020-03-24T09:07:00Z", "message": "SAK-41964 - Tests&Quizzes: Edit Question form fields are not associated with their respective labels"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgwMTE2MzIz", "url": "https://github.com/sakaiproject/sakai/pull/8064#pullrequestreview-380116323", "createdAt": "2020-03-24T09:08:58Z", "commit": {"oid": "53c98a3d800d982d7131cec63892d63e927fe8f2"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQwOTowODo1OFrOF6m2ew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQwOTowODo1OFrOF6m2hA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njk5ODI2Nw==", "bodyText": "Looks like there's a label missing for this input. That makes it hard for people using screen readers or voice control to use the input.", "url": "https://github.com/sakaiproject/sakai/pull/8064#discussion_r396998267", "createdAt": "2020-03-24T09:08:58Z", "author": {"login": "accesslint"}, "path": "samigo/samigo-app/src/java/org/sakaiproject/jsf/renderer/RichTextEditArea.java", "diffHunk": "@@ -217,33 +221,33 @@ private void encodeCK(ResponseWriter writer, String value, String identity, Stri\n     if(shouldToggle && !disableWysiwyg)\n     {    \t\n     \tString show_editor = rb.getString(\"show_editor\");\n-    \twriter.write(\"<div class=\\\"toggle_link_container\\\"><a class=\\\"toggle_link\\\" id=\\\"\" +clientId+ \"_toggle\\\" href=\\\"javascript:show_editor('\" +  clientId + \"', '\" + samigoFrameId + \"');\\\">\" + show_editor + \"</a></div>\\n\");\n+    \twriter.write(\"<div class=\\\"toggle_link_container\\\"><a class=\\\"toggle_link\\\" id=\\\"\" +componentId+ \"_toggle\\\" href=\\\"javascript:show_editor('\" + componentId + \"', '\" + samigoFrameId + \"');\\\">\" + show_editor + \"</a></div>\\n\");\n     }\n     else {\n         \tvalue = ComponentManager.get(FormattedText.class).escapeHtmlFormattedTextarea((String) value);\n     }\n-    \n-    writer.write(\"<textarea name=\\\"\" + clientId + \"_textinput\\\" id=\\\"\" + clientId + \"_textinput\\\" \" + getIdentityAttribute(identity) + \" rows=\\\"\"+ textBoxRows + \"\\\" cols=\\\"\"+ textBoxCols + \"\\\" class=\\\"simple_text_area\\\">\");\n+\n+    String inputTextArea = \"<textarea name='%s' id='%s' rows='%d' cols='%d' class='%s'>\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53c98a3d800d982d7131cec63892d63e927fe8f2"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njk5ODI3MQ==", "bodyText": "Looks like there's a label missing for this input. That makes it hard for people using screen readers or voice control to use the input.", "url": "https://github.com/sakaiproject/sakai/pull/8064#discussion_r396998271", "createdAt": "2020-03-24T09:08:58Z", "author": {"login": "accesslint"}, "path": "samigo/samigo-app/src/java/org/sakaiproject/jsf/renderer/RichTextEditArea.java", "diffHunk": "@@ -217,33 +221,33 @@ private void encodeCK(ResponseWriter writer, String value, String identity, Stri\n     if(shouldToggle && !disableWysiwyg)\n     {    \t\n     \tString show_editor = rb.getString(\"show_editor\");\n-    \twriter.write(\"<div class=\\\"toggle_link_container\\\"><a class=\\\"toggle_link\\\" id=\\\"\" +clientId+ \"_toggle\\\" href=\\\"javascript:show_editor('\" +  clientId + \"', '\" + samigoFrameId + \"');\\\">\" + show_editor + \"</a></div>\\n\");\n+    \twriter.write(\"<div class=\\\"toggle_link_container\\\"><a class=\\\"toggle_link\\\" id=\\\"\" +componentId+ \"_toggle\\\" href=\\\"javascript:show_editor('\" + componentId + \"', '\" + samigoFrameId + \"');\\\">\" + show_editor + \"</a></div>\\n\");\n     }\n     else {\n         \tvalue = ComponentManager.get(FormattedText.class).escapeHtmlFormattedTextarea((String) value);\n     }\n-    \n-    writer.write(\"<textarea name=\\\"\" + clientId + \"_textinput\\\" id=\\\"\" + clientId + \"_textinput\\\" \" + getIdentityAttribute(identity) + \" rows=\\\"\"+ textBoxRows + \"\\\" cols=\\\"\"+ textBoxCols + \"\\\" class=\\\"simple_text_area\\\">\");\n+\n+    String inputTextArea = \"<textarea name='%s' id='%s' rows='%d' cols='%d' class='%s'>\";\n+    writer.write(String.format(inputTextArea, clientId + \"_textinput\", componentId + \"_textinput\", textBoxRows, textBoxCols, \"simple_text_area\"));\n     writer.write((String) value);\n     writer.write(\"</textarea>\");\n     if (!disableWysiwyg) \n     \tif (shouldToggle) {\n-    \t\twriter.write(\"<input type=\\\"hidden\\\" name=\\\"\" + clientId + \"_textinput_current_status\\\" id=\\\"\" + clientId + \"_textinput_current_status\\\" value=\\\"firsttime\\\">\");\n+    \t\twriter.write(\"<input type=\\\"hidden\\\" name=\\\"\" + clientId + \"_textinput_current_status\\\" id=\\\"\" + componentId + \"_textinput_current_status\\\" value=\\\"firsttime\\\">\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53c98a3d800d982d7131cec63892d63e927fe8f2"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njk5ODI3Mw==", "bodyText": "Looks like there's a label missing for this input. That makes it hard for people using screen readers or voice control to use the input.", "url": "https://github.com/sakaiproject/sakai/pull/8064#discussion_r396998273", "createdAt": "2020-03-24T09:08:58Z", "author": {"login": "accesslint"}, "path": "samigo/samigo-app/src/java/org/sakaiproject/jsf/renderer/RichTextEditArea.java", "diffHunk": "@@ -217,33 +221,33 @@ private void encodeCK(ResponseWriter writer, String value, String identity, Stri\n     if(shouldToggle && !disableWysiwyg)\n     {    \t\n     \tString show_editor = rb.getString(\"show_editor\");\n-    \twriter.write(\"<div class=\\\"toggle_link_container\\\"><a class=\\\"toggle_link\\\" id=\\\"\" +clientId+ \"_toggle\\\" href=\\\"javascript:show_editor('\" +  clientId + \"', '\" + samigoFrameId + \"');\\\">\" + show_editor + \"</a></div>\\n\");\n+    \twriter.write(\"<div class=\\\"toggle_link_container\\\"><a class=\\\"toggle_link\\\" id=\\\"\" +componentId+ \"_toggle\\\" href=\\\"javascript:show_editor('\" + componentId + \"', '\" + samigoFrameId + \"');\\\">\" + show_editor + \"</a></div>\\n\");\n     }\n     else {\n         \tvalue = ComponentManager.get(FormattedText.class).escapeHtmlFormattedTextarea((String) value);\n     }\n-    \n-    writer.write(\"<textarea name=\\\"\" + clientId + \"_textinput\\\" id=\\\"\" + clientId + \"_textinput\\\" \" + getIdentityAttribute(identity) + \" rows=\\\"\"+ textBoxRows + \"\\\" cols=\\\"\"+ textBoxCols + \"\\\" class=\\\"simple_text_area\\\">\");\n+\n+    String inputTextArea = \"<textarea name='%s' id='%s' rows='%d' cols='%d' class='%s'>\";\n+    writer.write(String.format(inputTextArea, clientId + \"_textinput\", componentId + \"_textinput\", textBoxRows, textBoxCols, \"simple_text_area\"));\n     writer.write((String) value);\n     writer.write(\"</textarea>\");\n     if (!disableWysiwyg) \n     \tif (shouldToggle) {\n-    \t\twriter.write(\"<input type=\\\"hidden\\\" name=\\\"\" + clientId + \"_textinput_current_status\\\" id=\\\"\" + clientId + \"_textinput_current_status\\\" value=\\\"firsttime\\\">\");\n+    \t\twriter.write(\"<input type=\\\"hidden\\\" name=\\\"\" + clientId + \"_textinput_current_status\\\" id=\\\"\" + componentId + \"_textinput_current_status\\\" value=\\\"firsttime\\\">\");\n     \t}\n     \telse if(hasToggle.equals(\"plain\") && !valueHasRichText){\n-        \twriter.write(\"<input type=\\\"hidden\\\" name=\\\"\" + clientId + \"_textinput_current_status\\\" id=\\\"\" + clientId + \"_textinput_current_status\\\" value=\\\"fckonly\\\" data-first=\\\"\" + clientId + \"\\\" data-second=\\\"\" + samigoFrameId + \"\\\">\");\n+        \twriter.write(\"<input type=\\\"hidden\\\" name=\\\"\" + clientId + \"_textinput_current_status\\\" id=\\\"\" + componentId + \"_textinput_current_status\\\" value=\\\"fckonly\\\" data-first=\\\"\" + componentId + \"\\\" data-second=\\\"\" + samigoFrameId + \"\\\">\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53c98a3d800d982d7131cec63892d63e927fe8f2"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njk5ODI3Ng==", "bodyText": "Looks like there's a label missing for this input. That makes it hard for people using screen readers or voice control to use the input.", "url": "https://github.com/sakaiproject/sakai/pull/8064#discussion_r396998276", "createdAt": "2020-03-24T09:08:58Z", "author": {"login": "accesslint"}, "path": "samigo/samigo-app/src/java/org/sakaiproject/jsf/renderer/RichTextEditArea.java", "diffHunk": "@@ -217,33 +221,33 @@ private void encodeCK(ResponseWriter writer, String value, String identity, Stri\n     if(shouldToggle && !disableWysiwyg)\n     {    \t\n     \tString show_editor = rb.getString(\"show_editor\");\n-    \twriter.write(\"<div class=\\\"toggle_link_container\\\"><a class=\\\"toggle_link\\\" id=\\\"\" +clientId+ \"_toggle\\\" href=\\\"javascript:show_editor('\" +  clientId + \"', '\" + samigoFrameId + \"');\\\">\" + show_editor + \"</a></div>\\n\");\n+    \twriter.write(\"<div class=\\\"toggle_link_container\\\"><a class=\\\"toggle_link\\\" id=\\\"\" +componentId+ \"_toggle\\\" href=\\\"javascript:show_editor('\" + componentId + \"', '\" + samigoFrameId + \"');\\\">\" + show_editor + \"</a></div>\\n\");\n     }\n     else {\n         \tvalue = ComponentManager.get(FormattedText.class).escapeHtmlFormattedTextarea((String) value);\n     }\n-    \n-    writer.write(\"<textarea name=\\\"\" + clientId + \"_textinput\\\" id=\\\"\" + clientId + \"_textinput\\\" \" + getIdentityAttribute(identity) + \" rows=\\\"\"+ textBoxRows + \"\\\" cols=\\\"\"+ textBoxCols + \"\\\" class=\\\"simple_text_area\\\">\");\n+\n+    String inputTextArea = \"<textarea name='%s' id='%s' rows='%d' cols='%d' class='%s'>\";\n+    writer.write(String.format(inputTextArea, clientId + \"_textinput\", componentId + \"_textinput\", textBoxRows, textBoxCols, \"simple_text_area\"));\n     writer.write((String) value);\n     writer.write(\"</textarea>\");\n     if (!disableWysiwyg) \n     \tif (shouldToggle) {\n-    \t\twriter.write(\"<input type=\\\"hidden\\\" name=\\\"\" + clientId + \"_textinput_current_status\\\" id=\\\"\" + clientId + \"_textinput_current_status\\\" value=\\\"firsttime\\\">\");\n+    \t\twriter.write(\"<input type=\\\"hidden\\\" name=\\\"\" + clientId + \"_textinput_current_status\\\" id=\\\"\" + componentId + \"_textinput_current_status\\\" value=\\\"firsttime\\\">\");\n     \t}\n     \telse if(hasToggle.equals(\"plain\") && !valueHasRichText){\n-        \twriter.write(\"<input type=\\\"hidden\\\" name=\\\"\" + clientId + \"_textinput_current_status\\\" id=\\\"\" + clientId + \"_textinput_current_status\\\" value=\\\"fckonly\\\" data-first=\\\"\" + clientId + \"\\\" data-second=\\\"\" + samigoFrameId + \"\\\">\");\n+        \twriter.write(\"<input type=\\\"hidden\\\" name=\\\"\" + clientId + \"_textinput_current_status\\\" id=\\\"\" + componentId + \"_textinput_current_status\\\" value=\\\"fckonly\\\" data-first=\\\"\" + componentId + \"\\\" data-second=\\\"\" + samigoFrameId + \"\\\">\");\n         }\n     \telse {\n-    \t\twriter.write(\"<input type=\\\"hidden\\\" name=\\\"\" + clientId + \"_textinput_current_status\\\" id=\\\"\" + clientId + \"_textinput_current_status\\\" value=\\\"fckonly\\\">\");\n+    \t\twriter.write(\"<input type=\\\"hidden\\\" name=\\\"\" + clientId + \"_textinput_current_status\\\" id=\\\"\" + componentId + \"_textinput_current_status\\\" value=\\\"fckonly\\\">\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53c98a3d800d982d7131cec63892d63e927fe8f2"}, "originalPosition": 50}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgwNDIzMDc2", "url": "https://github.com/sakaiproject/sakai/pull/8064#pullrequestreview-380423076", "createdAt": "2020-03-24T15:27:04Z", "commit": {"oid": "53c98a3d800d982d7131cec63892d63e927fe8f2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2110, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}