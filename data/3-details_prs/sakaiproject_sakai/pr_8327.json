{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQyOTI4ODI5", "number": 8327, "title": "SAK-43878 better handling when authzgroup does not exist", "bodyText": "", "createdAt": "2020-07-01T19:27:17Z", "url": "https://github.com/sakaiproject/sakai/pull/8327", "merged": true, "mergeCommit": {"oid": "1fa64e950c86e64f80c206bff1a0fc1f9a45cf84"}, "closed": true, "closedAt": "2020-07-21T18:47:24Z", "author": {"login": "ottenhoff"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcwvYr-gH2gAyNDQyOTI4ODI5OjA0OTAyN2JmYmNjZGY0YzcyYTVlNGE4MTk4Y2U0MDY5NmFhM2IxZWY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc3ID8gAH2gAyNDQyOTI4ODI5OjE3NzRmOWRjYTkyNmRkNzFmZGZmMmZiMmE5NjQ4MmNjMjMzNjc1MTA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "049027bfbccdf4c72a5e4a8198ce40696aa3b1ef", "author": {"user": {"login": "ottenhoff", "name": "Sam Ottenhoff"}}, "url": "https://github.com/sakaiproject/sakai/commit/049027bfbccdf4c72a5e4a8198ce40696aa3b1ef", "committedDate": "2020-07-01T19:26:57Z", "message": "SAK-43878 better handling when authzgroup does not exist"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxMTc5Mzky", "url": "https://github.com/sakaiproject/sakai/pull/8327#pullrequestreview-441179392", "createdAt": "2020-07-01T20:35:51Z", "commit": {"oid": "049027bfbccdf4c72a5e4a8198ce40696aa3b1ef"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQyMDozNTo1MVrOGr0hVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQyMDo0NjozMFrOGr00pg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODYwMjQ1NA==", "bodyText": "Are we sure you want to see these as warnings in the log? how about debug?", "url": "https://github.com/sakaiproject/sakai/pull/8327#discussion_r448602454", "createdAt": "2020-07-01T20:35:51Z", "author": {"login": "ern"}, "path": "sitestats/sitestats-tool/src/java/org/sakaiproject/sitestats/tool/wicket/pages/ReportsEditPage.java", "diffHunk": "@@ -1127,19 +1127,18 @@ public IModel getModel(Object value) {\n \t\t\tLocator.getFacade().getSiteService().getSiteTypes().stream().map(s -> \"!site.template.\" + s).forEach(siteIdWithRoles::add);\n \t\t}\n \n-\t\tList<String> roles = new ArrayList<String>();\n-\t\ttry {\n-\t\t\tfor (String s : siteIdWithRoles) {\n+\t\tSet<String> roles = new HashSet<String>();\n+\t\tfor (String s : siteIdWithRoles) {\n+\t\t\ttry {\n \t\t\t\tSet<Role> roleSet = Locator.getFacade().getAuthzGroupService().getAuthzGroup(s).getRoles();\n \t\t\t\tfor (Role r : roleSet) {\n \t\t\t\t\troles.add(r.getId());\n \t\t\t\t}\n+\t\t\t} catch (GroupNotDefinedException e) {\n+\t\t\t\tlog.warn(\"AuthzGroup does not exist, skipping: {}\", s);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "049027bfbccdf4c72a5e4a8198ce40696aa3b1ef"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODYwNzM5OA==", "bodyText": "Reduce to one line:\nLocator.getFacade().getAuthzGroupService().getAuthzGroup(s).getRoles().forEach(r -> roles.add(r.getId()));", "url": "https://github.com/sakaiproject/sakai/pull/8327#discussion_r448607398", "createdAt": "2020-07-01T20:46:30Z", "author": {"login": "ern"}, "path": "sitestats/sitestats-tool/src/java/org/sakaiproject/sitestats/tool/wicket/pages/ReportsEditPage.java", "diffHunk": "@@ -1127,19 +1127,18 @@ public IModel getModel(Object value) {\n \t\t\tLocator.getFacade().getSiteService().getSiteTypes().stream().map(s -> \"!site.template.\" + s).forEach(siteIdWithRoles::add);\n \t\t}\n \n-\t\tList<String> roles = new ArrayList<String>();\n-\t\ttry {\n-\t\t\tfor (String s : siteIdWithRoles) {\n+\t\tSet<String> roles = new HashSet<String>();\n+\t\tfor (String s : siteIdWithRoles) {\n+\t\t\ttry {\n \t\t\t\tSet<Role> roleSet = Locator.getFacade().getAuthzGroupService().getAuthzGroup(s).getRoles();\n \t\t\t\tfor (Role r : roleSet) {\n \t\t\t\t\troles.add(r.getId());\n \t\t\t\t}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "049027bfbccdf4c72a5e4a8198ce40696aa3b1ef"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "93ed5cb2cc4823cbb11f2fb590b85d786b811774", "author": {"user": {"login": "ottenhoff", "name": "Sam Ottenhoff"}}, "url": "https://github.com/sakaiproject/sakai/commit/93ed5cb2cc4823cbb11f2fb590b85d786b811774", "committedDate": "2020-07-01T21:03:57Z", "message": "@ern suggestions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1774f9dca926dd71fdff2fb2a96482cc23367510", "author": {"user": {"login": "ottenhoff", "name": "Sam Ottenhoff"}}, "url": "https://github.com/sakaiproject/sakai/commit/1774f9dca926dd71fdff2fb2a96482cc23367510", "committedDate": "2020-07-21T15:35:28Z", "message": "Fix return"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2914, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}