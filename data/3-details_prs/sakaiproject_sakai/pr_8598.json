{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg5OTQ1NDAw", "number": 8598, "title": "SAK-39751 - Add getLong method to ServerConfigurationService", "bodyText": "", "createdAt": "2020-09-20T19:16:47Z", "url": "https://github.com/sakaiproject/sakai/pull/8598", "merged": true, "mergeCommit": {"oid": "e2686bbda2396043f968b68ebf9ebc3dbfa40500"}, "closed": true, "closedAt": "2020-09-23T18:41:18Z", "author": {"login": "jonespm"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdKzvweAH2gAyNDg5OTQ1NDAwOjA5NDk1ZWE1MTMzYjI2ZjE0YzdhODg0YTU2MjIxMWFiOGU2YjIyMTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdLtdh1gFqTQ5NDcyMjE1OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "09495ea5133b26f14c7a884a562211ab8e6b2216", "author": {"user": {"login": "jonespm", "name": "Code Hugger (Matthew Jones)"}}, "url": "https://github.com/sakaiproject/sakai/commit/09495ea5133b26f14c7a884a562211ab8e6b2216", "committedDate": "2020-09-20T19:13:48Z", "message": "SAK-39751 - Add getLong method to ServerConfigurationService"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyMjI2Nzc2", "url": "https://github.com/sakaiproject/sakai/pull/8598#pullrequestreview-492226776", "createdAt": "2020-09-20T22:05:19Z", "commit": {"oid": "09495ea5133b26f14c7a884a562211ab8e6b2216"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyODg2NjM2", "url": "https://github.com/sakaiproject/sakai/pull/8598#pullrequestreview-492886636", "createdAt": "2020-09-21T18:45:11Z", "commit": {"oid": "09495ea5133b26f14c7a884a562211ab8e6b2216"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzNDIwMzg1", "url": "https://github.com/sakaiproject/sakai/pull/8598#pullrequestreview-493420385", "createdAt": "2020-09-22T12:47:00Z", "commit": {"oid": "09495ea5133b26f14c7a884a562211ab8e6b2216"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxMjo0NzowMFrOHV4RxA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxMjo0NzowMFrOHV4RxA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjcwNDE5Ng==", "bodyText": "This method can just be \"return NumberUtils.toLong(getString(name), dflt);\". It will handle NumberFormatException also.", "url": "https://github.com/sakaiproject/sakai/pull/8598#discussion_r492704196", "createdAt": "2020-09-22T12:47:00Z", "author": {"login": "plukasew"}, "path": "kernel/kernel-impl/src/main/java/org/sakaiproject/component/impl/BasicConfigurationService.java", "diffHunk": "@@ -625,6 +625,18 @@ protected int dereferenceConfig() {\n         return rv;\n     }\n \n+    /**\n+     * {@inheritDoc}\n+     */\n+    public long getLong(String name, long dflt)\n+    {\n+        String value = getString(name);\n+\n+        if (StringUtils.isEmpty(value)) return dflt;\n+\n+        return Long.parseLong(value);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "09495ea5133b26f14c7a884a562211ab8e6b2216"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzNDI0ODc5", "url": "https://github.com/sakaiproject/sakai/pull/8598#pullrequestreview-493424879", "createdAt": "2020-09-22T12:52:22Z", "commit": {"oid": "09495ea5133b26f14c7a884a562211ab8e6b2216"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxMjo1MjoyMlrOHV4fSw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxMjo1MjoyMlrOHV4fSw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjcwNzY1OQ==", "bodyText": "defaultvalue is a Long already so you can just cast directly to Long: this.getLong(name, (Long) defaultValue);", "url": "https://github.com/sakaiproject/sakai/pull/8598#discussion_r492707659", "createdAt": "2020-09-22T12:52:22Z", "author": {"login": "plukasew"}, "path": "kernel/kernel-impl/src/main/java/org/sakaiproject/component/impl/BasicConfigurationService.java", "diffHunk": "@@ -1093,9 +1105,16 @@ protected ConfigItemImpl findConfigItem(String name, Object defaultValue) {\n             }\n         } else {\n             if (defaultValue instanceof Number) {\n-                int num = ((Number) defaultValue).intValue();\n-                int intValue = this.getInt(name, num);\n-                returnValue = (T) Integer.valueOf(intValue);\n+                if (defaultValue instanceof Long) {\n+                    long num = ((Number) defaultValue).longValue();\n+                    long longValue = this.getLong(name, num);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "09495ea5133b26f14c7a884a562211ab8e6b2216"}, "originalPosition": 28}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b7a5cfab4868370b10a96c5f5bbdb2a4dec4a81", "author": {"user": {"login": "jonespm", "name": "Code Hugger (Matthew Jones)"}}, "url": "https://github.com/sakaiproject/sakai/commit/5b7a5cfab4868370b10a96c5f5bbdb2a4dec4a81", "committedDate": "2020-09-22T21:45:19Z", "message": "Simplifying methods using NumberUtils\nUpdating mock\nUpdating number of values in test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e7530c1e527eebc4c0901e823442a9c32a1dfe9d", "author": {"user": {"login": "plukasew", "name": null}}, "url": "https://github.com/sakaiproject/sakai/commit/e7530c1e527eebc4c0901e823442a9c32a1dfe9d", "committedDate": "2020-09-22T21:48:30Z", "message": "defaultvalue is a Long already so you can just cast directly to Long: this.getLong(name, (Long) defaultValue);"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk0NzIyMTU5", "url": "https://github.com/sakaiproject/sakai/pull/8598#pullrequestreview-494722159", "createdAt": "2020-09-23T14:28:23Z", "commit": {"oid": "e7530c1e527eebc4c0901e823442a9c32a1dfe9d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2672, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}