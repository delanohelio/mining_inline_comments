{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE3NzM0MzQ3", "number": 8796, "title": "SAK-44638: Bugs fixes for SAK-42856: Message destination error", "bodyText": "https://jira.sakaiproject.org/browse/SAK-44638\nBugs fixes for SAK-42856: Message destination error", "createdAt": "2020-11-09T12:41:02Z", "url": "https://github.com/sakaiproject/sakai/pull/8796", "merged": true, "mergeCommit": {"oid": "b8e3b02c63e1864bc2ec204ceb204c25e0f8b313"}, "closed": true, "closedAt": "2020-12-03T10:05:55Z", "author": {"login": "victorGomollon"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABda0BlyAH2gAyNTE3NzM0MzQ3OmIzMTc3ZDk1MTVlOWJiZTUxYzgzOWFiNDZmNzdhNzhhOWNjOWU4NmY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdigQnJAFqTU0Mzc5MjUzOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b3177d9515e9bbe51c839ab46f77a78a9cc9e86f", "author": {"user": {"login": "victorGomollon", "name": null}}, "url": "https://github.com/sakaiproject/sakai/commit/b3177d9515e9bbe51c839ab46f77a78a9cc9e86f", "committedDate": "2020-11-09T12:36:04Z", "message": "SAK-44638: Bugs fixes for SAK-42856: Message destination error"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMyNDg4MjY0", "url": "https://github.com/sakaiproject/sakai/pull/8796#pullrequestreview-532488264", "createdAt": "2020-11-17T15:27:16Z", "commit": {"oid": "b3177d9515e9bbe51c839ab46f77a78a9cc9e86f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxNToyNzoxNlrOH06gyw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxNToyNzoxNlrOH06gyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTI0NjY2Nw==", "bodyText": "Why are we switching to DES here?", "url": "https://github.com/sakaiproject/sakai/pull/8796#discussion_r525246667", "createdAt": "2020-11-17T15:27:16Z", "author": {"login": "ern"}, "path": "msgcntr/messageforums-component-impl/src/java/org/sakaiproject/component/app/messageforums/ui/PrivateMessageManagerImpl.java", "diffHunk": "@@ -2269,15 +2270,15 @@ public void processPvtMsgReplySentAction(PrivateMessage currentMessage, PrivateM\n   private String encrypt(String value) {\n \t  try {\n \t\t  IvParameterSpec iv = new IvParameterSpec(INIT_VECTOR.getBytes(StandardCharsets.UTF_8));\n-\t\t  String key = serverConfigurationService.getString(\"msgcntr.no.reply.secret\", \"1111111111111111\");\n-\t\t  SecretKeySpec skeySpec = new SecretKeySpec(key.getBytes(StandardCharsets.UTF_8), \"AES\");\n+\t\t  String key = serverConfigurationService.getString(\"msgcntr.no.reply.secret\", \"11111111\");\n+\t\t  SecretKeySpec skeySpec = new SecretKeySpec(key.getBytes(StandardCharsets.UTF_8), \"DES\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b3177d9515e9bbe51c839ab46f77a78a9cc9e86f"}, "originalPosition": 33}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMyNTA4NjAw", "url": "https://github.com/sakaiproject/sakai/pull/8796#pullrequestreview-532508600", "createdAt": "2020-11-17T15:45:50Z", "commit": {"oid": "b3177d9515e9bbe51c839ab46f77a78a9cc9e86f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxNTo0NTo1MFrOH07uvg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxNTo0NTo1MFrOH07uvg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTI2NjYyMg==", "bodyText": "Please move this mailSupport variable to line 193 ...... and then it can be removed from line 203", "url": "https://github.com/sakaiproject/sakai/pull/8796#discussion_r525266622", "createdAt": "2020-11-17T15:45:50Z", "author": {"login": "ottenhoff"}, "path": "mailarchive/mailarchive-subetha/src/java/org/sakaiproject/mailarchive/SakaiMessageHandlerFactory.java", "diffHunk": "@@ -185,7 +187,25 @@ public void recipient(String to) throws RejectException {\n                 if (StringUtils.isNotBlank(fromReply) && to.startsWith(serverConfigurationService.getString(FROM_REPLY, StringUtils.EMPTY))) {\n                     isMessageId = true;\n                     String id = to.replace(serverConfigurationService.getString(FROM_REPLY), StringUtils.EMPTY).split(\"@\")[0];\n-                    currentMessage = synopticMsgcntrManager.getPvtMessageManager().getPrivateMessage(id);\n+                    try {\n+                        currentMessage = synopticMsgcntrManager.getPvtMessageManager().getPrivateMessage(id);\n+                    } catch (MessagingException me) {\n+                        if (me.getMessage().startsWith(MESSAGE_ERROR_521)) {\n+                            // BOUNCE REPLY - send a message back to the user to let them know their email failed\n+                            String errMsg = rb.getString(\"mail.support.521\") + \"\\n\\n\";\n+                            String mailSupport = StringUtils.trimToNull(serverConfigurationService.getString(\"mail.support\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b3177d9515e9bbe51c839ab46f77a78a9cc9e86f"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8debb5f584a8f5a47e772f4125eaff90dadcba5a", "author": {"user": {"login": "victorGomollon", "name": null}}, "url": "https://github.com/sakaiproject/sakai/commit/8debb5f584a8f5a47e772f4125eaff90dadcba5a", "committedDate": "2020-11-20T07:56:48Z", "message": "SAK-44638: Resolved Issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b8fb41b84b500885a2ae7f92873b5e1ec123aea1", "author": {"user": {"login": "victorGomollon", "name": null}}, "url": "https://github.com/sakaiproject/sakai/commit/b8fb41b84b500885a2ae7f92873b5e1ec123aea1", "committedDate": "2020-12-01T15:55:26Z", "message": "SAK-44638: Resolved issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dea5968446add5d9c68caf025f7ebbc8c80a2fd8", "author": {"user": {"login": "victorGomollon", "name": null}}, "url": "https://github.com/sakaiproject/sakai/commit/dea5968446add5d9c68caf025f7ebbc8c80a2fd8", "committedDate": "2020-12-01T16:08:38Z", "message": "SAK-44638: Midified name properties"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzNzkyNTM5", "url": "https://github.com/sakaiproject/sakai/pull/8796#pullrequestreview-543792539", "createdAt": "2020-12-03T10:05:46Z", "commit": {"oid": "dea5968446add5d9c68caf025f7ebbc8c80a2fd8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2460, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}