{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzMDA2NTk4", "number": 8068, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQxMzo1OTozM1rODqzc-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQxNDoyODoyNlrODq0RQA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2MjA5Nzg1OnYy", "diffSide": "RIGHT", "path": "content-review/impl/turnitin-oc/src/main/java/org/sakaiproject/contentreview/turnitin/oc/ContentReviewServiceTurnitinOC.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQxMzo1OTozM1rOF6xifQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQxMzo1OTozM1rOF6xifQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzE3MzM3Mw==", "bodyText": "I just looked through the existing default templates... are there any default Sakai roles that I may have missed? Custom roles can be mapped in the sakai.properties?", "url": "https://github.com/sakaiproject/sakai/pull/8068#discussion_r397173373", "createdAt": "2020-03-24T13:59:33Z", "author": {"login": "baholladay"}, "path": "content-review/impl/turnitin-oc/src/main/java/org/sakaiproject/contentreview/turnitin/oc/ContentReviewServiceTurnitinOC.java", "diffHunk": "@@ -159,8 +166,26 @@\n \tprivate static final String VIEWER_PERMISSION_MAY_VIEW_SUBMISSIONS_FULL_SOURCE = \"may_view_submission_full_source\";\n \tprivate static final String VIEWER_PERMISSION_MAY_VIEW_MATCH_SUBMISSION_INFO = \"may_view_match_submission_info\";\n \tprivate static final String VIEWER_DEFAULT_PERMISSIONS = \"viewer_default_permission_set\";\n-\tprivate static final String INSTRUCTOR = \"INSTRUCTOR\";\n-\tprivate static final String LEARNER = \"LEARNER\";\n+\tprivate enum ROLES{\n+\t\tINSTRUCTOR(Arrays.asList(\"Faculty\", \"Instructor\", \"Mentor\", \"Staff\", \"maintain\", \"Teaching Assistant\")),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8b64d039a31ebd926c020ef91787ebe4f80f1b1d"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2MjIzMTY4OnYy", "diffSide": "RIGHT", "path": "content-review/impl/turnitin-oc/src/main/java/org/sakaiproject/contentreview/turnitin/oc/ContentReviewServiceTurnitinOC.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQxNDoyODoyNlrOF6y3uw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQxNDoyODoyNlrOF6y3uw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzE5NTE5NQ==", "bodyText": "Can this be put into the above if(site != null) block? Conditional seems duplicated.\nEdit: disregard, I didn't notice the check on submitterID", "url": "https://github.com/sakaiproject/sakai/pull/8068#discussion_r397195195", "createdAt": "2020-03-24T14:28:26Z", "author": {"login": "bjones86"}, "path": "content-review/impl/turnitin-oc/src/main/java/org/sakaiproject/contentreview/turnitin/oc/ContentReviewServiceTurnitinOC.java", "diffHunk": "@@ -883,8 +911,14 @@ private String getSubmissionId(ContentReviewItem item, String fileName, Site sit\n \t\t\t// Build header maps\n \t\t\tMap<String, Object> data = new HashMap<String, Object>();\n \t\t\tdata.put(\"owner\", userID);\n+\t\t\tif(site != null) {\n+\t\t\t\tdata.put(\"owner_default_permission_set\", mapUserRole(userID, site.getId(), false));\n+\t\t\t}\n \t\t\tif (StringUtils.isNotBlank(submitterID)) {\n-\t\t\t\tdata.put(\"submitter\", submitterID);\t\n+\t\t\t\tdata.put(\"submitter\", submitterID);\n+\t\t\t\tif(site != null) {\n+\t\t\t\t\tdata.put(\"submitter_default_permission_set\", mapUserRole(submitterID, site.getId(), false));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8b64d039a31ebd926c020ef91787ebe4f80f1b1d"}, "originalPosition": 91}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2302, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}