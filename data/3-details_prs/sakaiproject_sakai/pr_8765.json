{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE0MDQ3MzEz", "number": 8765, "title": "SAK-44587 Site creation date not being saved", "bodyText": "", "createdAt": "2020-11-02T13:08:02Z", "url": "https://github.com/sakaiproject/sakai/pull/8765", "merged": true, "mergeCommit": {"oid": "b3ffbcf95cb7c5de06476c3932699b7852e926d5"}, "closed": true, "closedAt": "2020-12-03T13:16:49Z", "author": {"login": "bgarciaentornos"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdYku_0AFqTUyMTYzMjMwMQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdhmf3WAFqTU0MDk3NzU2OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxNjMyMzAx", "url": "https://github.com/sakaiproject/sakai/pull/8765#pullrequestreview-521632301", "createdAt": "2020-11-02T13:36:07Z", "commit": {"oid": "4539417e26fb596d60bf34aafaaad20295980109"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxMzozNjowOFrOHsEnHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxMzozODoxNVrOHsErxA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTk3NDk0Mg==", "bodyText": "I'd just set this up in a variable, rather than passing the time service into the velocity render. We want to make these templates simpler, dumber, in the end.", "url": "https://github.com/sakaiproject/sakai/pull/8765#discussion_r515974942", "createdAt": "2020-11-02T13:36:08Z", "author": {"login": "adrianfish"}, "path": "site-manage/site-manage-tool/tool/src/webapp/vm/sitesetup/chef_site-list.vm", "diffHunk": "@@ -248,9 +248,7 @@\n \t\t\t\t\t\t\t\t\t#end\n \t\t\t\t\t\t\t\t</td>\n \t\t\t\t\t\t\t\t<td headers=\"createdOn\">\n-\t\t\t\t\t\t\t\t\t#set($createdTime=\"\")\n-\t\t\t\t\t\t\t\t\t#set($createdTime = $!site.getCreatedTime())\n-\t\t\t\t\t\t\t\t\t$!createdTime.toStringLocalFull()\n+\t\t\t\t\t\t\t\t\t#if ($site.CreatedDate) $userTimeService.dateTimeFormat($site.CreatedDate, $tlang.Locale, 2) #end", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4539417e26fb596d60bf34aafaaad20295980109"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTk3NTU3MQ==", "bodyText": "I'd compute the actual value and pass that as a variable.", "url": "https://github.com/sakaiproject/sakai/pull/8765#discussion_r515975571", "createdAt": "2020-11-02T13:37:13Z", "author": {"login": "adrianfish"}, "path": "site-manage/site-manage-tool/tool/src/java/org/sakaiproject/site/tool/SiteAction.java", "diffHunk": "@@ -1323,6 +1323,7 @@ public String buildMainPanelContext(VelocityPortlet portlet,\n \t\t\tboolean inShortcut) {\n \t\tcontext.put(\"tlang\", rb);\n \t\tcontext.put(\"clang\", cfgRb);\n+\t\tcontext.put(\"userTimeService\", userTimeService);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4539417e26fb596d60bf34aafaaad20295980109"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTk3NjEzMg==", "bodyText": "return m_createdTime != null ? new Date(m_createdTime.toEpochMilli()) : null;", "url": "https://github.com/sakaiproject/sakai/pull/8765#discussion_r515976132", "createdAt": "2020-11-02T13:38:15Z", "author": {"login": "adrianfish"}, "path": "kernel/kernel-impl/src/main/java/org/sakaiproject/site/impl/BaseSite.java", "diffHunk": "@@ -837,7 +837,7 @@ public User getModifiedBy()\n \tpublic Date getCreatedDate() {\n \t\tDate date = null;\n \t\tif (m_createdTime != null) {\n-\t\t\tnew Date(m_createdTime.toEpochMilli());\n+\t\t\tdate = new Date(m_createdTime.toEpochMilli());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4539417e26fb596d60bf34aafaaad20295980109"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "69068e96ff22a51e13b7021efc648156ed02ccba", "author": {"user": {"login": "bgarciaentornos", "name": null}}, "url": "https://github.com/sakaiproject/sakai/commit/69068e96ff22a51e13b7021efc648156ed02ccba", "committedDate": "2020-11-03T08:26:17Z", "message": "SAK-44587 Site creation date not being saved"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4539417e26fb596d60bf34aafaaad20295980109", "author": {"user": {"login": "bgarciaentornos", "name": null}}, "url": "https://github.com/sakaiproject/sakai/commit/4539417e26fb596d60bf34aafaaad20295980109", "committedDate": "2020-11-02T13:07:06Z", "message": "SAK-44587 Site creation date not being saved"}, "afterCommit": {"oid": "69068e96ff22a51e13b7021efc648156ed02ccba", "author": {"user": {"login": "bgarciaentornos", "name": null}}, "url": "https://github.com/sakaiproject/sakai/commit/69068e96ff22a51e13b7021efc648156ed02ccba", "committedDate": "2020-11-03T08:26:17Z", "message": "SAK-44587 Site creation date not being saved"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQwOTc3NTY5", "url": "https://github.com/sakaiproject/sakai/pull/8765#pullrequestreview-540977569", "createdAt": "2020-11-30T14:47:56Z", "commit": {"oid": "69068e96ff22a51e13b7021efc648156ed02ccba"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2406, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}