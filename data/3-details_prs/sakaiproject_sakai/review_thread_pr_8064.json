{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkyNDIwODUy", "number": 8064, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxNDoyOTozOVrODqZvuw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQwOTowODo1OFrODqs1tQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1Nzg4NjAzOnYy", "diffSide": "RIGHT", "path": "samigo/samigo-app/src/java/org/sakaiproject/jsf/renderer/RichTextEditArea.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxNDoyOTozOVrOF6H_4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxNDoyOTozOVrOF6H_4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjQ5Mjc2OQ==", "bodyText": "Looks like there's a label missing for this input. That makes it hard for people using screen readers or voice control to use the input.", "url": "https://github.com/sakaiproject/sakai/pull/8064#discussion_r396492769", "createdAt": "2020-03-23T14:29:39Z", "author": {"login": "accesslint"}, "path": "samigo/samigo-app/src/java/org/sakaiproject/jsf/renderer/RichTextEditArea.java", "diffHunk": "@@ -222,8 +225,9 @@ private void encodeCK(ResponseWriter writer, String value, String identity, Stri\n     else {\n         \tvalue = ComponentManager.get(FormattedText.class).escapeHtmlFormattedTextarea((String) value);\n     }\n-    \n-    writer.write(\"<textarea name=\\\"\" + clientId + \"_textinput\\\" id=\\\"\" + clientId + \"_textinput\\\" \" + getIdentityAttribute(identity) + \" rows=\\\"\"+ textBoxRows + \"\\\" cols=\\\"\"+ textBoxCols + \"\\\" class=\\\"simple_text_area\\\">\");\n+\n+    String inputTextArea = \"<textarea name='%s' id='%s' rows='%d' cols='%d' class='%s'>\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d5e8981a009708d0ee36b7a0454faff0ad9c198"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2MTAxNDIyOnYy", "diffSide": "RIGHT", "path": "samigo/samigo-app/src/java/org/sakaiproject/jsf/renderer/RichTextEditArea.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQwOTowODo1OFrOF6m2ew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQwOTowODo1OFrOF6m2ew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njk5ODI2Nw==", "bodyText": "Looks like there's a label missing for this input. That makes it hard for people using screen readers or voice control to use the input.", "url": "https://github.com/sakaiproject/sakai/pull/8064#discussion_r396998267", "createdAt": "2020-03-24T09:08:58Z", "author": {"login": "accesslint"}, "path": "samigo/samigo-app/src/java/org/sakaiproject/jsf/renderer/RichTextEditArea.java", "diffHunk": "@@ -217,33 +221,33 @@ private void encodeCK(ResponseWriter writer, String value, String identity, Stri\n     if(shouldToggle && !disableWysiwyg)\n     {    \t\n     \tString show_editor = rb.getString(\"show_editor\");\n-    \twriter.write(\"<div class=\\\"toggle_link_container\\\"><a class=\\\"toggle_link\\\" id=\\\"\" +clientId+ \"_toggle\\\" href=\\\"javascript:show_editor('\" +  clientId + \"', '\" + samigoFrameId + \"');\\\">\" + show_editor + \"</a></div>\\n\");\n+    \twriter.write(\"<div class=\\\"toggle_link_container\\\"><a class=\\\"toggle_link\\\" id=\\\"\" +componentId+ \"_toggle\\\" href=\\\"javascript:show_editor('\" + componentId + \"', '\" + samigoFrameId + \"');\\\">\" + show_editor + \"</a></div>\\n\");\n     }\n     else {\n         \tvalue = ComponentManager.get(FormattedText.class).escapeHtmlFormattedTextarea((String) value);\n     }\n-    \n-    writer.write(\"<textarea name=\\\"\" + clientId + \"_textinput\\\" id=\\\"\" + clientId + \"_textinput\\\" \" + getIdentityAttribute(identity) + \" rows=\\\"\"+ textBoxRows + \"\\\" cols=\\\"\"+ textBoxCols + \"\\\" class=\\\"simple_text_area\\\">\");\n+\n+    String inputTextArea = \"<textarea name='%s' id='%s' rows='%d' cols='%d' class='%s'>\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53c98a3d800d982d7131cec63892d63e927fe8f2"}, "originalPosition": 35}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2MTAxNDI2OnYy", "diffSide": "RIGHT", "path": "samigo/samigo-app/src/java/org/sakaiproject/jsf/renderer/RichTextEditArea.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQwOTowODo1OFrOF6m2fw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQwOTowODo1OFrOF6m2fw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njk5ODI3MQ==", "bodyText": "Looks like there's a label missing for this input. That makes it hard for people using screen readers or voice control to use the input.", "url": "https://github.com/sakaiproject/sakai/pull/8064#discussion_r396998271", "createdAt": "2020-03-24T09:08:58Z", "author": {"login": "accesslint"}, "path": "samigo/samigo-app/src/java/org/sakaiproject/jsf/renderer/RichTextEditArea.java", "diffHunk": "@@ -217,33 +221,33 @@ private void encodeCK(ResponseWriter writer, String value, String identity, Stri\n     if(shouldToggle && !disableWysiwyg)\n     {    \t\n     \tString show_editor = rb.getString(\"show_editor\");\n-    \twriter.write(\"<div class=\\\"toggle_link_container\\\"><a class=\\\"toggle_link\\\" id=\\\"\" +clientId+ \"_toggle\\\" href=\\\"javascript:show_editor('\" +  clientId + \"', '\" + samigoFrameId + \"');\\\">\" + show_editor + \"</a></div>\\n\");\n+    \twriter.write(\"<div class=\\\"toggle_link_container\\\"><a class=\\\"toggle_link\\\" id=\\\"\" +componentId+ \"_toggle\\\" href=\\\"javascript:show_editor('\" + componentId + \"', '\" + samigoFrameId + \"');\\\">\" + show_editor + \"</a></div>\\n\");\n     }\n     else {\n         \tvalue = ComponentManager.get(FormattedText.class).escapeHtmlFormattedTextarea((String) value);\n     }\n-    \n-    writer.write(\"<textarea name=\\\"\" + clientId + \"_textinput\\\" id=\\\"\" + clientId + \"_textinput\\\" \" + getIdentityAttribute(identity) + \" rows=\\\"\"+ textBoxRows + \"\\\" cols=\\\"\"+ textBoxCols + \"\\\" class=\\\"simple_text_area\\\">\");\n+\n+    String inputTextArea = \"<textarea name='%s' id='%s' rows='%d' cols='%d' class='%s'>\";\n+    writer.write(String.format(inputTextArea, clientId + \"_textinput\", componentId + \"_textinput\", textBoxRows, textBoxCols, \"simple_text_area\"));\n     writer.write((String) value);\n     writer.write(\"</textarea>\");\n     if (!disableWysiwyg) \n     \tif (shouldToggle) {\n-    \t\twriter.write(\"<input type=\\\"hidden\\\" name=\\\"\" + clientId + \"_textinput_current_status\\\" id=\\\"\" + clientId + \"_textinput_current_status\\\" value=\\\"firsttime\\\">\");\n+    \t\twriter.write(\"<input type=\\\"hidden\\\" name=\\\"\" + clientId + \"_textinput_current_status\\\" id=\\\"\" + componentId + \"_textinput_current_status\\\" value=\\\"firsttime\\\">\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53c98a3d800d982d7131cec63892d63e927fe8f2"}, "originalPosition": 42}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2MTAxNDI4OnYy", "diffSide": "RIGHT", "path": "samigo/samigo-app/src/java/org/sakaiproject/jsf/renderer/RichTextEditArea.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQwOTowODo1OFrOF6m2gQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQwOTowODo1OFrOF6m2gQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njk5ODI3Mw==", "bodyText": "Looks like there's a label missing for this input. That makes it hard for people using screen readers or voice control to use the input.", "url": "https://github.com/sakaiproject/sakai/pull/8064#discussion_r396998273", "createdAt": "2020-03-24T09:08:58Z", "author": {"login": "accesslint"}, "path": "samigo/samigo-app/src/java/org/sakaiproject/jsf/renderer/RichTextEditArea.java", "diffHunk": "@@ -217,33 +221,33 @@ private void encodeCK(ResponseWriter writer, String value, String identity, Stri\n     if(shouldToggle && !disableWysiwyg)\n     {    \t\n     \tString show_editor = rb.getString(\"show_editor\");\n-    \twriter.write(\"<div class=\\\"toggle_link_container\\\"><a class=\\\"toggle_link\\\" id=\\\"\" +clientId+ \"_toggle\\\" href=\\\"javascript:show_editor('\" +  clientId + \"', '\" + samigoFrameId + \"');\\\">\" + show_editor + \"</a></div>\\n\");\n+    \twriter.write(\"<div class=\\\"toggle_link_container\\\"><a class=\\\"toggle_link\\\" id=\\\"\" +componentId+ \"_toggle\\\" href=\\\"javascript:show_editor('\" + componentId + \"', '\" + samigoFrameId + \"');\\\">\" + show_editor + \"</a></div>\\n\");\n     }\n     else {\n         \tvalue = ComponentManager.get(FormattedText.class).escapeHtmlFormattedTextarea((String) value);\n     }\n-    \n-    writer.write(\"<textarea name=\\\"\" + clientId + \"_textinput\\\" id=\\\"\" + clientId + \"_textinput\\\" \" + getIdentityAttribute(identity) + \" rows=\\\"\"+ textBoxRows + \"\\\" cols=\\\"\"+ textBoxCols + \"\\\" class=\\\"simple_text_area\\\">\");\n+\n+    String inputTextArea = \"<textarea name='%s' id='%s' rows='%d' cols='%d' class='%s'>\";\n+    writer.write(String.format(inputTextArea, clientId + \"_textinput\", componentId + \"_textinput\", textBoxRows, textBoxCols, \"simple_text_area\"));\n     writer.write((String) value);\n     writer.write(\"</textarea>\");\n     if (!disableWysiwyg) \n     \tif (shouldToggle) {\n-    \t\twriter.write(\"<input type=\\\"hidden\\\" name=\\\"\" + clientId + \"_textinput_current_status\\\" id=\\\"\" + clientId + \"_textinput_current_status\\\" value=\\\"firsttime\\\">\");\n+    \t\twriter.write(\"<input type=\\\"hidden\\\" name=\\\"\" + clientId + \"_textinput_current_status\\\" id=\\\"\" + componentId + \"_textinput_current_status\\\" value=\\\"firsttime\\\">\");\n     \t}\n     \telse if(hasToggle.equals(\"plain\") && !valueHasRichText){\n-        \twriter.write(\"<input type=\\\"hidden\\\" name=\\\"\" + clientId + \"_textinput_current_status\\\" id=\\\"\" + clientId + \"_textinput_current_status\\\" value=\\\"fckonly\\\" data-first=\\\"\" + clientId + \"\\\" data-second=\\\"\" + samigoFrameId + \"\\\">\");\n+        \twriter.write(\"<input type=\\\"hidden\\\" name=\\\"\" + clientId + \"_textinput_current_status\\\" id=\\\"\" + componentId + \"_textinput_current_status\\\" value=\\\"fckonly\\\" data-first=\\\"\" + componentId + \"\\\" data-second=\\\"\" + samigoFrameId + \"\\\">\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53c98a3d800d982d7131cec63892d63e927fe8f2"}, "originalPosition": 46}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2MTAxNDI5OnYy", "diffSide": "RIGHT", "path": "samigo/samigo-app/src/java/org/sakaiproject/jsf/renderer/RichTextEditArea.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQwOTowODo1OFrOF6m2hA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQwOTowODo1OFrOF6m2hA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njk5ODI3Ng==", "bodyText": "Looks like there's a label missing for this input. That makes it hard for people using screen readers or voice control to use the input.", "url": "https://github.com/sakaiproject/sakai/pull/8064#discussion_r396998276", "createdAt": "2020-03-24T09:08:58Z", "author": {"login": "accesslint"}, "path": "samigo/samigo-app/src/java/org/sakaiproject/jsf/renderer/RichTextEditArea.java", "diffHunk": "@@ -217,33 +221,33 @@ private void encodeCK(ResponseWriter writer, String value, String identity, Stri\n     if(shouldToggle && !disableWysiwyg)\n     {    \t\n     \tString show_editor = rb.getString(\"show_editor\");\n-    \twriter.write(\"<div class=\\\"toggle_link_container\\\"><a class=\\\"toggle_link\\\" id=\\\"\" +clientId+ \"_toggle\\\" href=\\\"javascript:show_editor('\" +  clientId + \"', '\" + samigoFrameId + \"');\\\">\" + show_editor + \"</a></div>\\n\");\n+    \twriter.write(\"<div class=\\\"toggle_link_container\\\"><a class=\\\"toggle_link\\\" id=\\\"\" +componentId+ \"_toggle\\\" href=\\\"javascript:show_editor('\" + componentId + \"', '\" + samigoFrameId + \"');\\\">\" + show_editor + \"</a></div>\\n\");\n     }\n     else {\n         \tvalue = ComponentManager.get(FormattedText.class).escapeHtmlFormattedTextarea((String) value);\n     }\n-    \n-    writer.write(\"<textarea name=\\\"\" + clientId + \"_textinput\\\" id=\\\"\" + clientId + \"_textinput\\\" \" + getIdentityAttribute(identity) + \" rows=\\\"\"+ textBoxRows + \"\\\" cols=\\\"\"+ textBoxCols + \"\\\" class=\\\"simple_text_area\\\">\");\n+\n+    String inputTextArea = \"<textarea name='%s' id='%s' rows='%d' cols='%d' class='%s'>\";\n+    writer.write(String.format(inputTextArea, clientId + \"_textinput\", componentId + \"_textinput\", textBoxRows, textBoxCols, \"simple_text_area\"));\n     writer.write((String) value);\n     writer.write(\"</textarea>\");\n     if (!disableWysiwyg) \n     \tif (shouldToggle) {\n-    \t\twriter.write(\"<input type=\\\"hidden\\\" name=\\\"\" + clientId + \"_textinput_current_status\\\" id=\\\"\" + clientId + \"_textinput_current_status\\\" value=\\\"firsttime\\\">\");\n+    \t\twriter.write(\"<input type=\\\"hidden\\\" name=\\\"\" + clientId + \"_textinput_current_status\\\" id=\\\"\" + componentId + \"_textinput_current_status\\\" value=\\\"firsttime\\\">\");\n     \t}\n     \telse if(hasToggle.equals(\"plain\") && !valueHasRichText){\n-        \twriter.write(\"<input type=\\\"hidden\\\" name=\\\"\" + clientId + \"_textinput_current_status\\\" id=\\\"\" + clientId + \"_textinput_current_status\\\" value=\\\"fckonly\\\" data-first=\\\"\" + clientId + \"\\\" data-second=\\\"\" + samigoFrameId + \"\\\">\");\n+        \twriter.write(\"<input type=\\\"hidden\\\" name=\\\"\" + clientId + \"_textinput_current_status\\\" id=\\\"\" + componentId + \"_textinput_current_status\\\" value=\\\"fckonly\\\" data-first=\\\"\" + componentId + \"\\\" data-second=\\\"\" + samigoFrameId + \"\\\">\");\n         }\n     \telse {\n-    \t\twriter.write(\"<input type=\\\"hidden\\\" name=\\\"\" + clientId + \"_textinput_current_status\\\" id=\\\"\" + clientId + \"_textinput_current_status\\\" value=\\\"fckonly\\\">\");\n+    \t\twriter.write(\"<input type=\\\"hidden\\\" name=\\\"\" + clientId + \"_textinput_current_status\\\" id=\\\"\" + componentId + \"_textinput_current_status\\\" value=\\\"fckonly\\\">\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53c98a3d800d982d7131cec63892d63e927fe8f2"}, "originalPosition": 50}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2296, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}