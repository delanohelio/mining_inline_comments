{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ0NzI2NTA3", "number": 8339, "title": "SAK-43901: add wicket library for reusable components", "bodyText": "https://jira.sakaiproject.org/browse/SAK-43901\nSakai has several tools that use the Wicket framework. It would be beneficial to have a library of reusable Wicket components for use in these tools, like we have for JSF and Velocity.\nThis PR creates a Wicket library containing a single component, SakaiDateTimeField, as a starting point. There are two versions of the library, one for tools using Wicket 6, and another for tools using Wicket 8.\nSakaiDateTimeField was previously developed for SiteStats (Wicket 6). The PR introduces it to Gradebook (Wicket 6) and Term Manager (Wicket 8). It will also be useful for the SCORM (Wicket 8) contrib tool, which currently has its own copy of SakaiDateTimeField.\nUsing SakaiDateTimeField in these additional tools also resolves SAK-43658 and SAK-41997.", "createdAt": "2020-07-06T11:55:21Z", "url": "https://github.com/sakaiproject/sakai/pull/8339", "merged": true, "mergeCommit": {"oid": "92d746a15c541beeda0eb629cf6bc395f9d5e647"}, "closed": true, "closedAt": "2020-07-08T18:23:46Z", "author": {"login": "plukasew"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcyP4k0AH2gAyNDQ0NzI2NTA3OmRlZGY1MzY1NzA4OGM2MDUzMzkzZGMyYzRkMDQyYjQ1MGVhNjE0OTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcyqeU7AFqTQ0NDE2MjA4OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "dedf53657088c6053393dc2c4d042b450ea61491", "author": {"user": {"login": "plukasew", "name": null}}, "url": "https://github.com/sakaiproject/sakai/commit/dedf53657088c6053393dc2c4d042b450ea61491", "committedDate": "2020-07-06T11:52:40Z", "message": "SAK-43901: add wicket library for reusable components"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5a267a9e098c53765cd23bd2135baee0d989471b", "author": {"user": {"login": "plukasew", "name": null}}, "url": "https://github.com/sakaiproject/sakai/commit/5a267a9e098c53765cd23bd2135baee0d989471b", "committedDate": "2020-07-06T12:15:13Z", "message": "SAK-43901: fixup for bad merge conflict resolution"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQzMDIxNzE0", "url": "https://github.com/sakaiproject/sakai/pull/8339#pullrequestreview-443021714", "createdAt": "2020-07-06T12:15:52Z", "commit": {"oid": "5a267a9e098c53765cd23bd2135baee0d989471b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNlQxMjoxNTo1MlrOGtUzOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNlQxMjoxNTo1MlrOGtUzOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDE3OTg5OA==", "bodyText": "Looks like there's a label missing for this input. That makes it hard for people using screen readers or voice control to use the input.", "url": "https://github.com/sakaiproject/sakai/pull/8339#discussion_r450179898", "createdAt": "2020-07-06T12:15:52Z", "author": {"login": "accesslint"}, "path": "gradebookng/tool/src/java/org/sakaiproject/gradebookng/tool/panels/AddOrEditGradeItemPanelContent.html", "diffHunk": "@@ -49,46 +49,8 @@\n \t\t\t\t<label wicket:for=\"duedate\" class=\"col-xs-3 control-label\">\n \t\t\t\t\t<wicket:message key=\"label.addgradeitem.due\" />\n \t\t\t\t</label>\n-\t\t\t\t<div class=\"col-xs-6\">\n-\t\t\t\t\t<div class=\"input-group\">\n-\t\t\t\t\t\t<input wicket:id=\"duedate\" type=\"text\" class=\"form-control gb-datepicker\" aria-describedby=\"duedate-help\" />\n-\t\t\t\t\t\t<span class=\"input-group-btn\">\n-\t\t\t\t\t\t\t<button class=\"btn btn-sm btn-default invoke-datepicker-btn\" type=\"button\"><span class=\"glyphicon glyphicon-calendar\"></span></button>\n-\t\t\t\t\t\t\t<button class=\"btn btn-sm btn-default clear-datepicker-btn\" type=\"button\"><span class=\"glyphicon glyphicon-remove\"></span></button>\n-\t\t\t\t\t\t</span>\n-\t\t\t\t\t</div>\n-                    <script>\n-                        var initDatePickers = function () {\n-                            $('.gb-datepicker').each(function() {\n-                                var $datepicker = $(this);\n-\n-\t\t\t\t// This method is hardcoded to duedate_iso8601 so .each will only work with one date picker. \n-\t\t\t\t// Would need to adjust this or create a wicket component to support multiple dates.\n-                                localDatePicker({\n-                                    input: '#' + $datepicker.attr('id'),\n-                                    useTime: 0,\n-                                    icon: 0,\n-                                    allowEmptyDate: true,\n-                                    parseFormat: 'YYYY-MM-DD',\n-                                    val: $datepicker.val(),\n-                                    ashidden: { iso8601: 'duedate_iso8601' }\n-                                })\n-    \n-                                // setup input button to trigger date-time picker\n-                                $datepicker.parent().find(\".invoke-datepicker-btn\").click(function() {\n-                                    $datepicker.focus();\n-                                });\n-    \n-                                // add clear action if present\n-                                $datepicker.parent().find(\".clear-datepicker-btn\").click(function() {\n-                                    $datepicker.val(\"\");\n-\t\t\t\t    // Clear the hidden date too, possibly a better way to do this\n-\t    \t\t\t    $datepicker.siblings(\"#duedate_iso8601\").val(\"\")\n-                                });\n-                            });\n-                        };\n-                        initDatePickers();\n-                    </script>\n+\t\t\t\t<div class=\"col-xs-6 form-inline\">\n+\t\t\t\t\t<input wicket:id=\"duedate\" type=\"text\" class=\"form-control gb-datepicker\" aria-describedby=\"duedate-help\" />", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5a267a9e098c53765cd23bd2135baee0d989471b"}, "originalPosition": 45}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "23b37ca9a6b6c4941225970b52f304deeace36b5", "author": {"user": {"login": "plukasew", "name": null}}, "url": "https://github.com/sakaiproject/sakai/commit/23b37ca9a6b6c4941225970b52f304deeace36b5", "committedDate": "2020-07-06T13:29:32Z", "message": "SAK-43901: remove obsolete comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e81e8e066693f61d23ca17e9dfe07bde18b5225f", "author": {"user": {"login": "plukasew", "name": null}}, "url": "https://github.com/sakaiproject/sakai/commit/e81e8e066693f61d23ca17e9dfe07bde18b5225f", "committedDate": "2020-07-07T16:56:57Z", "message": "SAK-43901: directory restructure"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0MTYyMDg5", "url": "https://github.com/sakaiproject/sakai/pull/8339#pullrequestreview-444162089", "createdAt": "2020-07-07T18:51:26Z", "commit": {"oid": "e81e8e066693f61d23ca17e9dfe07bde18b5225f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2925, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}