{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg4NzQ4ODc3", "number": 8585, "title": "SAK-44309 Save event when student upload or delete an attachment in samigo", "bodyText": "", "createdAt": "2020-09-17T15:23:21Z", "url": "https://github.com/sakaiproject/sakai/pull/8585", "merged": true, "mergeCommit": {"oid": "e6ce2481decb9a1ca6f7794b56a964b74bf774aa"}, "closed": true, "closedAt": "2020-09-30T14:43:05Z", "author": {"login": "joaquinmarques"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdJyqkNAH2gAyNDg4NzQ4ODc3OjA0M2FlYWM5MTRhZjBjZTA3NTIxZTU5YzkyMGFhYWI1N2U2ZGY4MmM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdNpZ9ngH2gAyNDg4NzQ4ODc3OjU1Y2FlZTBlYTY4NThkZmQ1OTMwMWQyYzg0OTQzOGEyMjQwYjczN2E=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "043aeac914af0ce07521e59c920aaab57e6df82c", "author": {"user": {"login": "joaquinmarques", "name": null}}, "url": "https://github.com/sakaiproject/sakai/commit/043aeac914af0ce07521e59c920aaab57e6df82c", "committedDate": "2020-09-17T15:24:18Z", "message": "SAK-44309 Save event when student upload or delete an attachment in samigo"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk4NTU2OTAx", "url": "https://github.com/sakaiproject/sakai/pull/8585#pullrequestreview-498556901", "createdAt": "2020-09-29T14:50:39Z", "commit": {"oid": "043aeac914af0ce07521e59c920aaab57e6df82c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQxNDo1MDozOVrOHZxMNA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQxNDo1MDozOVrOHZxMNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njc4MjM4OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        EventTrackingService.post(EventTrackingService.newEvent(SamigoConstants.EVENT_ASSESSMENT_ATTACHMENT_DELETE, \"itemGradingId=\"+itemGradingData.getItemGradingId()+\", \"+mediaFilename, null, true, NotificationService.NOTI_REQUIRED));\n          \n          \n            \n                        EventTrackingService.post(EventTrackingService.newEvent(SamigoConstants.EVENT_ASSESSMENT_ATTACHMENT_DELETE, \"itemGradingId=\" + itemGradingData.getItemGradingId() + \", \" + mediaFilename, null, true, NotificationService.NOTI_REQUIRED));", "url": "https://github.com/sakaiproject/sakai/pull/8585#discussion_r496782388", "createdAt": "2020-09-29T14:50:39Z", "author": {"login": "ern"}, "path": "samigo/samigo-services/src/java/org/sakaiproject/tool/assessment/facade/AssessmentGradingFacadeQueries.java", "diffHunk": "@@ -748,6 +753,7 @@ public void removeMediaById(Long mediaId, Long itemGradingId) {\n             ItemGradingData itemGradingData = getItemGrading(itemGradingId);\n             itemGradingData.setAutoScore(Double.valueOf(0));\n             saveItemGrading(itemGradingData);\n+            EventTrackingService.post(EventTrackingService.newEvent(SamigoConstants.EVENT_ASSESSMENT_ATTACHMENT_DELETE, \"itemGradingId=\"+itemGradingData.getItemGradingId()+\", \"+mediaFilename, null, true, NotificationService.NOTI_REQUIRED));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "043aeac914af0ce07521e59c920aaab57e6df82c"}, "originalPosition": 35}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk4NTU3NjE5", "url": "https://github.com/sakaiproject/sakai/pull/8585#pullrequestreview-498557619", "createdAt": "2020-09-29T14:51:17Z", "commit": {"oid": "043aeac914af0ce07521e59c920aaab57e6df82c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQxNDo1MToxN1rOHZxOTg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQxNDo1MToxN1rOHZxOTg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njc4MjkyNg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                EventTrackingService.post(EventTrackingService.newEvent(SamigoConstants.EVENT_ASSESSMENT_ATTACHMENT_NEW, \"itemGradingId=\"+itemGradingData.getItemGradingId()+\", \"+mediaData.getFilename(), null, true, NotificationService.NOTI_REQUIRED));\n          \n          \n            \n                EventTrackingService.post(EventTrackingService.newEvent(SamigoConstants.EVENT_ASSESSMENT_ATTACHMENT_NEW, \"itemGradingId=\" + itemGradingData.getItemGradingId() + \", \" + mediaData.getFilename(), null, true, NotificationService.NOTI_REQUIRED));", "url": "https://github.com/sakaiproject/sakai/pull/8585#discussion_r496782926", "createdAt": "2020-09-29T14:51:17Z", "author": {"login": "ern"}, "path": "samigo/samigo-app/src/java/org/sakaiproject/tool/assessment/ui/bean/delivery/DeliveryBean.java", "diffHunk": "@@ -1603,6 +1603,7 @@ public void saveMedia(String agent, String mediaLocation, ItemGradingData itemGr\n     log.debug(\"***7. addMediaToItemGrading, adata={}\", adata);\n     itemGradingData.setAnswerText(mediaId + \"\");\n     gradingService.saveItemGrading(itemGradingData);\n+    EventTrackingService.post(EventTrackingService.newEvent(SamigoConstants.EVENT_ASSESSMENT_ATTACHMENT_NEW, \"itemGradingId=\"+itemGradingData.getItemGradingId()+\", \"+mediaData.getFilename(), null, true, NotificationService.NOTI_REQUIRED));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "043aeac914af0ce07521e59c920aaab57e6df82c"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk4NTU4NzYx", "url": "https://github.com/sakaiproject/sakai/pull/8585#pullrequestreview-498558761", "createdAt": "2020-09-29T14:52:21Z", "commit": {"oid": "043aeac914af0ce07521e59c920aaab57e6df82c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "14ec72480d6c7fba58d708129232b1fc534bee9e", "author": {"user": {"login": "ern", "name": "Earle Nietzel"}}, "url": "https://github.com/sakaiproject/sakai/commit/14ec72480d6c7fba58d708129232b1fc534bee9e", "committedDate": "2020-09-29T14:52:36Z", "message": "Update samigo/samigo-app/src/java/org/sakaiproject/tool/assessment/ui/bean/delivery/DeliveryBean.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "55caee0ea6858dfd59301d2c849438a2240b737a", "author": {"user": {"login": "ern", "name": "Earle Nietzel"}}, "url": "https://github.com/sakaiproject/sakai/commit/55caee0ea6858dfd59301d2c849438a2240b737a", "committedDate": "2020-09-29T14:52:43Z", "message": "Update samigo/samigo-services/src/java/org/sakaiproject/tool/assessment/facade/AssessmentGradingFacadeQueries.java"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2651, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}