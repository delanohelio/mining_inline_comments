{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc1MDQ4NjE2", "number": 8486, "title": "SAK-44171 Lessons tool does not display Resource folder displayname", "bodyText": "", "createdAt": "2020-08-28T02:23:28Z", "url": "https://github.com/sakaiproject/sakai/pull/8486", "merged": true, "mergeCommit": {"oid": "ca7625fb2305604427105886b45aff0c80bf67e5"}, "closed": true, "closedAt": "2020-09-04T15:48:51Z", "author": {"login": "austin48"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdETyV9gFqTQ3ODY2OTc5MA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdFnCJdAFqTQ4Mjc1NTg1OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4NjY5Nzkw", "url": "https://github.com/sakaiproject/sakai/pull/8486#pullrequestreview-478669790", "createdAt": "2020-08-31T14:33:42Z", "commit": {"oid": "96c0ed520676f628f54b829ed46ed118ceef2918"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxNDozMzo0MlrOHJ7XhQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxNDozNTozOVrOHJ7crA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDE3MTkwOQ==", "bodyText": "Why not just use ResourceProperties.PROP_DISPLAY_NAME?\nAlso, you could use StringUtils.isBlank  on the displayName test.", "url": "https://github.com/sakaiproject/sakai/pull/8486#discussion_r480171909", "createdAt": "2020-08-31T14:33:42Z", "author": {"login": "adrianfish"}, "path": "lessonbuilder/tool/src/java/org/sakaiproject/lessonbuildertool/tool/producers/ShowPageProducer.java", "diffHunk": "@@ -3096,6 +3097,19 @@ public int compare(SimpleStudentPage o1, SimpleStudentPage o2) {\n \t\t\t\t\t\tString folderName = folderPath[folderPath.length-1];\n \t\t\t\t\t\tif (dataDirectory.endsWith(\"//\")){\n \t\t\t\t\t\t\tfolderName = simplePageBean.getCurrentSite().getTitle();\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\ttry {\n+\t\t\t\t\t\t\t\tContentHostingService contentHostingService = (ContentHostingService) ComponentManager.get(\"org.sakaiproject.content.api.ContentHostingService\");\n+\t\t\t\t\t\t\t\tContentCollection collection = contentHostingService.getCollection(dataDirectory.replace(\"//\", \"/\"));\n+\t\t\t\t\t\t\t\tif (collection != null) {\n+\t\t\t\t\t\t\t\t\tString displayName = collection.getProperties().getProperty(collection.getProperties().getNamePropDisplayName());\n+\t\t\t\t\t\t\t\t\tif (displayName != null && displayName != \"\") {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "96c0ed520676f628f54b829ed46ed118ceef2918"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDE3MzIyOA==", "bodyText": "You should probably use log.error(\"error message\", e) here.", "url": "https://github.com/sakaiproject/sakai/pull/8486#discussion_r480173228", "createdAt": "2020-08-31T14:35:39Z", "author": {"login": "adrianfish"}, "path": "lessonbuilder/tool/src/java/org/sakaiproject/lessonbuildertool/tool/producers/ShowPageProducer.java", "diffHunk": "@@ -3096,6 +3097,19 @@ public int compare(SimpleStudentPage o1, SimpleStudentPage o2) {\n \t\t\t\t\t\tString folderName = folderPath[folderPath.length-1];\n \t\t\t\t\t\tif (dataDirectory.endsWith(\"//\")){\n \t\t\t\t\t\t\tfolderName = simplePageBean.getCurrentSite().getTitle();\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\ttry {\n+\t\t\t\t\t\t\t\tContentHostingService contentHostingService = (ContentHostingService) ComponentManager.get(\"org.sakaiproject.content.api.ContentHostingService\");\n+\t\t\t\t\t\t\t\tContentCollection collection = contentHostingService.getCollection(dataDirectory.replace(\"//\", \"/\"));\n+\t\t\t\t\t\t\t\tif (collection != null) {\n+\t\t\t\t\t\t\t\t\tString displayName = collection.getProperties().getProperty(collection.getProperties().getNamePropDisplayName());\n+\t\t\t\t\t\t\t\t\tif (displayName != null && displayName != \"\") {\n+\t\t\t\t\t\t\t\t\t\tfolderName = displayName;\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t} catch (Exception e) {\n+\t\t\t\t\t\t\t\tlog.error(\"Error getting content resource\" + e);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "96c0ed520676f628f54b829ed46ed118ceef2918"}, "originalPosition": 23}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ab0181586757048b8be85192cd9995989fa7744a", "author": {"user": {"login": "austin48", "name": null}}, "url": "https://github.com/sakaiproject/sakai/commit/ab0181586757048b8be85192cd9995989fa7744a", "committedDate": "2020-09-04T14:29:57Z", "message": "SAK-44171 Lessons tool does not display Resource folder displayname"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4531998d65815e654de3dcd1280d590943162c29", "author": {"user": {"login": "austin48", "name": null}}, "url": "https://github.com/sakaiproject/sakai/commit/4531998d65815e654de3dcd1280d590943162c29", "committedDate": "2020-09-04T14:29:58Z", "message": "SAK-44171 Lessons tool does not display Resource folder displayname\n\nadd improvements suggested in github comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8197092f04a18ad9208ec135ee46ea9fd14dda90", "author": {"user": {"login": "austin48", "name": null}}, "url": "https://github.com/sakaiproject/sakai/commit/8197092f04a18ad9208ec135ee46ea9fd14dda90", "committedDate": "2020-09-04T14:29:58Z", "message": "SAK-44171 Lessons tool does not display Resource folder displayname\n\nexception displays the collection id so we don't need to include it."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c786f097fd99f5786c2eafa377d9cff6a6a26809", "author": {"user": {"login": "austin48", "name": null}}, "url": "https://github.com/sakaiproject/sakai/commit/c786f097fd99f5786c2eafa377d9cff6a6a26809", "committedDate": "2020-08-31T19:48:41Z", "message": "SAK-44171 Lessons tool does not display Resource folder displayname\n\nexception displays the collection id so we don't need to include it."}, "afterCommit": {"oid": "48929efce5216eca913933a7fd660f9e53254ded", "author": {"user": {"login": "ern", "name": "Earle Nietzel"}}, "url": "https://github.com/sakaiproject/sakai/commit/48929efce5216eca913933a7fd660f9e53254ded", "committedDate": "2020-09-04T14:29:58Z", "message": "Refactor of original PR"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "48929efce5216eca913933a7fd660f9e53254ded", "author": {"user": {"login": "ern", "name": "Earle Nietzel"}}, "url": "https://github.com/sakaiproject/sakai/commit/48929efce5216eca913933a7fd660f9e53254ded", "committedDate": "2020-09-04T14:29:58Z", "message": "Refactor of original PR"}, "afterCommit": {"oid": "1a07a0f1e0ae31d73e84ce369f1619b66359ceb7", "author": {"user": {"login": "ern", "name": "Earle Nietzel"}}, "url": "https://github.com/sakaiproject/sakai/commit/1a07a0f1e0ae31d73e84ce369f1619b66359ceb7", "committedDate": "2020-09-04T15:16:07Z", "message": "Refactor of original PR"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "028c9f55812a217bde9965d64da2350813ed0ec2", "author": {"user": {"login": "ern", "name": "Earle Nietzel"}}, "url": "https://github.com/sakaiproject/sakai/commit/028c9f55812a217bde9965d64da2350813ed0ec2", "committedDate": "2020-09-04T15:16:56Z", "message": "Refactor of original PR"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1a07a0f1e0ae31d73e84ce369f1619b66359ceb7", "author": {"user": {"login": "ern", "name": "Earle Nietzel"}}, "url": "https://github.com/sakaiproject/sakai/commit/1a07a0f1e0ae31d73e84ce369f1619b66359ceb7", "committedDate": "2020-09-04T15:16:07Z", "message": "Refactor of original PR"}, "afterCommit": {"oid": "028c9f55812a217bde9965d64da2350813ed0ec2", "author": {"user": {"login": "ern", "name": "Earle Nietzel"}}, "url": "https://github.com/sakaiproject/sakai/commit/028c9f55812a217bde9965d64da2350813ed0ec2", "committedDate": "2020-09-04T15:16:56Z", "message": "Refactor of original PR"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyNzU1ODU5", "url": "https://github.com/sakaiproject/sakai/pull/8486#pullrequestreview-482755859", "createdAt": "2020-09-04T15:32:50Z", "commit": {"oid": "028c9f55812a217bde9965d64da2350813ed0ec2"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQxNTozMjo1MFrOHNSV4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQxNTozMjo1MFrOHNSV4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzY5NDA1MA==", "bodyText": "Can you outdent these two lines?", "url": "https://github.com/sakaiproject/sakai/pull/8486#discussion_r483694050", "createdAt": "2020-09-04T15:32:50Z", "author": {"login": "adrianfish"}, "path": "lessonbuilder/tool/src/java/org/sakaiproject/lessonbuildertool/tool/producers/ShowPageProducer.java", "diffHunk": "@@ -4289,18 +4286,9 @@ private void createToolBar(UIContainer tofill, SimplePage currentPage) {\n \n \t\t    // add website.\n \t\t    // Are we running a kernel with KNL-273?\n-\t\t    Class contentHostingInterface = ContentHostingService.class;\n-\t\t    try {\n-\t\t\tMethod expandMethod = contentHostingInterface.getMethod(\"expandZippedResource\", new Class[] { String.class });\n-\t\t\t\n \t\t\tUIOutput.make(tofill, \"addwebsite-li\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "028c9f55812a217bde9965d64da2350813ed0ec2"}, "originalPosition": 70}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2762, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}