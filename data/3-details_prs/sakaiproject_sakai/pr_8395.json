{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU3Mzg2MDc2", "number": 8395, "title": "SAK-43890 - Support LineItem", "bodyText": "Also incorporates SAK-40043", "createdAt": "2020-07-27T20:30:35Z", "url": "https://github.com/sakaiproject/sakai/pull/8395", "merged": true, "mergeCommit": {"oid": "110c32c22c05f7870d65755763260ebf20f5c207"}, "closed": true, "closedAt": "2020-07-28T01:25:53Z", "author": {"login": "csev"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc5H3MLgH2gAyNDU3Mzg2MDc2OjQwYzkwZTYyMmMzZWVmNDFjMjY3NzAyMDM3Mjg5MGIxNzY4MTk5MzE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc5LB9uAH2gAyNDU3Mzg2MDc2OjczY2JjZWFkODU2ZmFmNzE2NTI3NTJkNjhjZGYyMzEyOTI2NGM4M2M=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "40c90e622c3eef41c2677020372890b176819931", "author": {"user": {"login": "csev", "name": "Charles Severance"}}, "url": "https://github.com/sakaiproject/sakai/commit/40c90e622c3eef41c2677020372890b176819931", "committedDate": "2020-07-27T20:29:23Z", "message": "SAK-43890 - Support LineItem"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2MTQyNDEw", "url": "https://github.com/sakaiproject/sakai/pull/8395#pullrequestreview-456142410", "createdAt": "2020-07-27T21:17:59Z", "commit": {"oid": "40c90e622c3eef41c2677020372890b176819931"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QyMToxODowMFrOG3z8FQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QyMToxODowMFrOG3z8FQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE3NTgyOQ==", "bodyText": "system out", "url": "https://github.com/sakaiproject/sakai/pull/8395#discussion_r461175829", "createdAt": "2020-07-27T21:18:00Z", "author": {"login": "ottenhoff"}, "path": "basiclti/basiclti-common/src/java/org/sakaiproject/lti13/LineItemUtil.java", "diffHunk": "@@ -106,16 +106,25 @@ public static String constructExternalId(Long tool_id, Map<String, Object> conte\n \t\treturn retval;\n \t}\n \n-\tpublic static Assignment createLineItem(Site site, Long tool_id, Map<String, Object> content, LineItem lineItem) {\n+\tpublic static Assignment createLineItem(Site site, Long tool_id, Map<String, Object> content, SakaiLineItem lineItem) {\n+\t\tString context_id = site.getId();\n+\t\treturn createLineItem(context_id, tool_id, content, lineItem);\n+\t}\n+\n+\tpublic static Assignment createLineItem(String context_id, Long tool_id, Map<String, Object> content, SakaiLineItem lineItem) {\n \t\t// Look up the assignment so we can find the max points\n \t\tGradebookService g = (GradebookService) ComponentManager\n \t\t\t\t.get(\"org.sakaiproject.service.gradebook.GradebookService\");\n \n-\t\tString context_id = site.getId();\n \t\tif (lineItem.scoreMaximum == null) {\n \t\t\tlineItem.scoreMaximum = 100.0;\n \t\t}\n \n+System.out.println(\"createLineItem=\"+lineItem.toString());\n+System.out.println(\"SakaiLineItem.label=\"+lineItem.label);\n+System.out.println(\"SakaiLineItem.scoreMaximum=\"+lineItem.scoreMaximum);\n+System.out.println(\"SakaiLineItem.includeInComputation=\"+lineItem.includeInComputation);\n+System.out.println(\"SakaiLineItem.releaseToStudent=\"+lineItem.releaseToStudent);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "40c90e622c3eef41c2677020372890b176819931"}, "originalPosition": 42}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2MTQyNDg2", "url": "https://github.com/sakaiproject/sakai/pull/8395#pullrequestreview-456142486", "createdAt": "2020-07-27T21:18:08Z", "commit": {"oid": "40c90e622c3eef41c2677020372890b176819931"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QyMToxODowOFrOG3z8Ug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QyMToxODowOFrOG3z8Ug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE3NTg5MA==", "bodyText": "system out", "url": "https://github.com/sakaiproject/sakai/pull/8395#discussion_r461175890", "createdAt": "2020-07-27T21:18:08Z", "author": {"login": "ottenhoff"}, "path": "basiclti/basiclti-common/src/java/org/sakaiproject/lti13/LineItemUtil.java", "diffHunk": "@@ -125,6 +134,7 @@ public static Assignment createLineItem(Site site, Long tool_id, Map<String, Obj\n \t\t}\n \n \t\tString external_id = constructExternalId(tool_id, content, lineItem);\n+System.out.println(\"external_id=\"+external_id);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "40c90e622c3eef41c2677020372890b176819931"}, "originalPosition": 50}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "954e7e401068b4115e1e48debf0804e20241d7eb", "author": {"user": {"login": "csev", "name": "Charles Severance"}}, "url": "https://github.com/sakaiproject/sakai/commit/954e7e401068b4115e1e48debf0804e20241d7eb", "committedDate": "2020-07-27T22:43:37Z", "message": "SAK-43890 - Fix code review issues."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "73cbcead856faf71652752d68cdf23129264c83c", "author": {"user": {"login": "csev", "name": "Charles Severance"}}, "url": "https://github.com/sakaiproject/sakai/commit/73cbcead856faf71652752d68cdf23129264c83c", "committedDate": "2020-07-28T00:10:52Z", "message": "SAK-43890 - More code review issues"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2861, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}