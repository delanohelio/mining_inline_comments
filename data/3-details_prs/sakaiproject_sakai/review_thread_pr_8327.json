{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQyOTI4ODI5", "number": 8327, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQyMDozNTo1MVrOEKpyJg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQyMDo0NjozMFrOEKp-Zg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5NjA1Nzk4OnYy", "diffSide": "RIGHT", "path": "sitestats/sitestats-tool/src/java/org/sakaiproject/sitestats/tool/wicket/pages/ReportsEditPage.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQyMDozNTo1MVrOGr0hVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQyMTowMjoyMVrOGr1QhQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODYwMjQ1NA==", "bodyText": "Are we sure you want to see these as warnings in the log? how about debug?", "url": "https://github.com/sakaiproject/sakai/pull/8327#discussion_r448602454", "createdAt": "2020-07-01T20:35:51Z", "author": {"login": "ern"}, "path": "sitestats/sitestats-tool/src/java/org/sakaiproject/sitestats/tool/wicket/pages/ReportsEditPage.java", "diffHunk": "@@ -1127,19 +1127,18 @@ public IModel getModel(Object value) {\n \t\t\tLocator.getFacade().getSiteService().getSiteTypes().stream().map(s -> \"!site.template.\" + s).forEach(siteIdWithRoles::add);\n \t\t}\n \n-\t\tList<String> roles = new ArrayList<String>();\n-\t\ttry {\n-\t\t\tfor (String s : siteIdWithRoles) {\n+\t\tSet<String> roles = new HashSet<String>();\n+\t\tfor (String s : siteIdWithRoles) {\n+\t\t\ttry {\n \t\t\t\tSet<Role> roleSet = Locator.getFacade().getAuthzGroupService().getAuthzGroup(s).getRoles();\n \t\t\t\tfor (Role r : roleSet) {\n \t\t\t\t\troles.add(r.getId());\n \t\t\t\t}\n+\t\t\t} catch (GroupNotDefinedException e) {\n+\t\t\t\tlog.warn(\"AuthzGroup does not exist, skipping: {}\", s);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "049027bfbccdf4c72a5e4a8198ce40696aa3b1ef"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODYxNDUzMw==", "bodyText": "agree", "url": "https://github.com/sakaiproject/sakai/pull/8327#discussion_r448614533", "createdAt": "2020-07-01T21:02:21Z", "author": {"login": "ottenhoff"}, "path": "sitestats/sitestats-tool/src/java/org/sakaiproject/sitestats/tool/wicket/pages/ReportsEditPage.java", "diffHunk": "@@ -1127,19 +1127,18 @@ public IModel getModel(Object value) {\n \t\t\tLocator.getFacade().getSiteService().getSiteTypes().stream().map(s -> \"!site.template.\" + s).forEach(siteIdWithRoles::add);\n \t\t}\n \n-\t\tList<String> roles = new ArrayList<String>();\n-\t\ttry {\n-\t\t\tfor (String s : siteIdWithRoles) {\n+\t\tSet<String> roles = new HashSet<String>();\n+\t\tfor (String s : siteIdWithRoles) {\n+\t\t\ttry {\n \t\t\t\tSet<Role> roleSet = Locator.getFacade().getAuthzGroupService().getAuthzGroup(s).getRoles();\n \t\t\t\tfor (Role r : roleSet) {\n \t\t\t\t\troles.add(r.getId());\n \t\t\t\t}\n+\t\t\t} catch (GroupNotDefinedException e) {\n+\t\t\t\tlog.warn(\"AuthzGroup does not exist, skipping: {}\", s);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODYwMjQ1NA=="}, "originalCommit": {"oid": "049027bfbccdf4c72a5e4a8198ce40696aa3b1ef"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5NjA4OTM0OnYy", "diffSide": "RIGHT", "path": "sitestats/sitestats-tool/src/java/org/sakaiproject/sitestats/tool/wicket/pages/ReportsEditPage.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQyMDo0NjozMFrOGr00pg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQyMTowNDoxMVrOGr1TTg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODYwNzM5OA==", "bodyText": "Reduce to one line:\nLocator.getFacade().getAuthzGroupService().getAuthzGroup(s).getRoles().forEach(r -> roles.add(r.getId()));", "url": "https://github.com/sakaiproject/sakai/pull/8327#discussion_r448607398", "createdAt": "2020-07-01T20:46:30Z", "author": {"login": "ern"}, "path": "sitestats/sitestats-tool/src/java/org/sakaiproject/sitestats/tool/wicket/pages/ReportsEditPage.java", "diffHunk": "@@ -1127,19 +1127,18 @@ public IModel getModel(Object value) {\n \t\t\tLocator.getFacade().getSiteService().getSiteTypes().stream().map(s -> \"!site.template.\" + s).forEach(siteIdWithRoles::add);\n \t\t}\n \n-\t\tList<String> roles = new ArrayList<String>();\n-\t\ttry {\n-\t\t\tfor (String s : siteIdWithRoles) {\n+\t\tSet<String> roles = new HashSet<String>();\n+\t\tfor (String s : siteIdWithRoles) {\n+\t\t\ttry {\n \t\t\t\tSet<Role> roleSet = Locator.getFacade().getAuthzGroupService().getAuthzGroup(s).getRoles();\n \t\t\t\tfor (Role r : roleSet) {\n \t\t\t\t\troles.add(r.getId());\n \t\t\t\t}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "049027bfbccdf4c72a5e4a8198ce40696aa3b1ef"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODYxNTI0Ng==", "bodyText": "done", "url": "https://github.com/sakaiproject/sakai/pull/8327#discussion_r448615246", "createdAt": "2020-07-01T21:04:11Z", "author": {"login": "ottenhoff"}, "path": "sitestats/sitestats-tool/src/java/org/sakaiproject/sitestats/tool/wicket/pages/ReportsEditPage.java", "diffHunk": "@@ -1127,19 +1127,18 @@ public IModel getModel(Object value) {\n \t\t\tLocator.getFacade().getSiteService().getSiteTypes().stream().map(s -> \"!site.template.\" + s).forEach(siteIdWithRoles::add);\n \t\t}\n \n-\t\tList<String> roles = new ArrayList<String>();\n-\t\ttry {\n-\t\t\tfor (String s : siteIdWithRoles) {\n+\t\tSet<String> roles = new HashSet<String>();\n+\t\tfor (String s : siteIdWithRoles) {\n+\t\t\ttry {\n \t\t\t\tSet<Role> roleSet = Locator.getFacade().getAuthzGroupService().getAuthzGroup(s).getRoles();\n \t\t\t\tfor (Role r : roleSet) {\n \t\t\t\t\troles.add(r.getId());\n \t\t\t\t}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODYwNzM5OA=="}, "originalCommit": {"oid": "049027bfbccdf4c72a5e4a8198ce40696aa3b1ef"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2823, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}