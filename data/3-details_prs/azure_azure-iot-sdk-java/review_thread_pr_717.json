{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgxMTIzNzkz", "number": 717, "reviewThreads": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQxOTozNToxM1rODj7aXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QwMTozOTowOVrODnr95Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5MDAwMTU4OnYy", "diffSide": "RIGHT", "path": "deps/src/main/java/com/microsoft/azure/sdk/iot/deps/serializer/StorageAuthenticationType.java", "isResolved": true, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQxOTozNToxM1rOFwAdMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QwMToyOTo0OVrOF105tg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTg4MzQ0Mw==", "bodyText": "Should this be CAPS or CamelCasing?", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r385883443", "createdAt": "2020-02-28T19:35:13Z", "author": {"login": "prmathur-microsoft"}, "path": "deps/src/main/java/com/microsoft/azure/sdk/iot/deps/serializer/StorageAuthenticationType.java", "diffHunk": "@@ -0,0 +1,14 @@\n+package com.microsoft.azure.sdk.iot.deps.serializer;\n+\n+import com.google.gson.annotations.SerializedName;\n+/* Specifies authentication type being used for connecting to storage account */\n+public enum StorageAuthenticationType\n+{\n+    /* Use a shared access key for authentication */\n+    @SerializedName(\"keyBased\")\n+    KEY,\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e8ad5067b5494ac83fd511ef5d1bb77ceea57994"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTI2ODA2OQ==", "bodyText": "Can change to CamelCase if that's the standard we are following in java", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r391268069", "createdAt": "2020-03-11T21:06:39Z", "author": {"login": "bikamani"}, "path": "deps/src/main/java/com/microsoft/azure/sdk/iot/deps/serializer/StorageAuthenticationType.java", "diffHunk": "@@ -0,0 +1,14 @@\n+package com.microsoft.azure.sdk.iot.deps.serializer;\n+\n+import com.google.gson.annotations.SerializedName;\n+/* Specifies authentication type being used for connecting to storage account */\n+public enum StorageAuthenticationType\n+{\n+    /* Use a shared access key for authentication */\n+    @SerializedName(\"keyBased\")\n+    KEY,\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTg4MzQ0Mw=="}, "originalCommit": {"oid": "e8ad5067b5494ac83fd511ef5d1bb77ceea57994"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTgxNDI3OA==", "bodyText": "Please visit our coding guidelines and reconvene", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r391814278", "createdAt": "2020-03-12T18:30:48Z", "author": {"login": "prmathur-microsoft"}, "path": "deps/src/main/java/com/microsoft/azure/sdk/iot/deps/serializer/StorageAuthenticationType.java", "diffHunk": "@@ -0,0 +1,14 @@\n+package com.microsoft.azure.sdk.iot.deps.serializer;\n+\n+import com.google.gson.annotations.SerializedName;\n+/* Specifies authentication type being used for connecting to storage account */\n+public enum StorageAuthenticationType\n+{\n+    /* Use a shared access key for authentication */\n+    @SerializedName(\"keyBased\")\n+    KEY,\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTg4MzQ0Mw=="}, "originalCommit": {"oid": "e8ad5067b5494ac83fd511ef5d1bb77ceea57994"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTk1MTg5Nw==", "bodyText": "Doesn't say anything about enums.", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r391951897", "createdAt": "2020-03-12T23:09:13Z", "author": {"login": "bikamani"}, "path": "deps/src/main/java/com/microsoft/azure/sdk/iot/deps/serializer/StorageAuthenticationType.java", "diffHunk": "@@ -0,0 +1,14 @@\n+package com.microsoft.azure.sdk.iot.deps.serializer;\n+\n+import com.google.gson.annotations.SerializedName;\n+/* Specifies authentication type being used for connecting to storage account */\n+public enum StorageAuthenticationType\n+{\n+    /* Use a shared access key for authentication */\n+    @SerializedName(\"keyBased\")\n+    KEY,\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTg4MzQ0Mw=="}, "originalCommit": {"oid": "e8ad5067b5494ac83fd511ef5d1bb77ceea57994"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTk3NTAwNg==", "bodyText": "We should leave it as is. If I rem enums should be caps. wanted to confirm that.", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r391975006", "createdAt": "2020-03-13T00:41:23Z", "author": {"login": "prmathur-microsoft"}, "path": "deps/src/main/java/com/microsoft/azure/sdk/iot/deps/serializer/StorageAuthenticationType.java", "diffHunk": "@@ -0,0 +1,14 @@\n+package com.microsoft.azure.sdk.iot.deps.serializer;\n+\n+import com.google.gson.annotations.SerializedName;\n+/* Specifies authentication type being used for connecting to storage account */\n+public enum StorageAuthenticationType\n+{\n+    /* Use a shared access key for authentication */\n+    @SerializedName(\"keyBased\")\n+    KEY,\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTg4MzQ0Mw=="}, "originalCommit": {"oid": "e8ad5067b5494ac83fd511ef5d1bb77ceea57994"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTk4NTU5MA==", "bodyText": "A quick check of the Java repo shows you have about half of your enums as all caps, and the other half camelCased.", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r391985590", "createdAt": "2020-03-13T01:29:49Z", "author": {"login": "drwill-ms"}, "path": "deps/src/main/java/com/microsoft/azure/sdk/iot/deps/serializer/StorageAuthenticationType.java", "diffHunk": "@@ -0,0 +1,14 @@\n+package com.microsoft.azure.sdk.iot.deps.serializer;\n+\n+import com.google.gson.annotations.SerializedName;\n+/* Specifies authentication type being used for connecting to storage account */\n+public enum StorageAuthenticationType\n+{\n+    /* Use a shared access key for authentication */\n+    @SerializedName(\"keyBased\")\n+    KEY,\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTg4MzQ0Mw=="}, "originalCommit": {"oid": "e8ad5067b5494ac83fd511ef5d1bb77ceea57994"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxMTU0MDMyOnYy", "diffSide": "RIGHT", "path": "service/iot-service-client/src/main/java/com/microsoft/azure/sdk/iot/service/JobProperties.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QwMTowMDowN1rOFzLeEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQyMjo0OToxOFrOF1L5nQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIwOTYxOQ==", "bodyText": "Add description here", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r389209619", "createdAt": "2020-03-07T01:00:07Z", "author": {"login": "prmathur-microsoft"}, "path": "service/iot-service-client/src/main/java/com/microsoft/azure/sdk/iot/service/JobProperties.java", "diffHunk": "@@ -156,40 +172,32 @@ public void setOutputBlobContainerUri(String outputBlobContainerUri) {\n     }\n \n     /**\n-     * @return whether the keys are included in export or not.\n+     * @return\n      */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d8ff8fd90932cbda2c213fc235640c4540ce0fa3"}, "originalPosition": 78}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY5NzcwNg==", "bodyText": "Where ever we expose a public API, we need better description, params etc. This data gets pulled into API reference doc we publish during release.", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r390697706", "createdAt": "2020-03-11T01:18:50Z", "author": {"login": "prmathur-microsoft"}, "path": "service/iot-service-client/src/main/java/com/microsoft/azure/sdk/iot/service/JobProperties.java", "diffHunk": "@@ -156,40 +172,32 @@ public void setOutputBlobContainerUri(String outputBlobContainerUri) {\n     }\n \n     /**\n-     * @return whether the keys are included in export or not.\n+     * @return\n      */", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIwOTYxOQ=="}, "originalCommit": {"oid": "d8ff8fd90932cbda2c213fc235640c4540ce0fa3"}, "originalPosition": 78}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTMxMzgyMQ==", "bodyText": "Agreed, added comments.", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r391313821", "createdAt": "2020-03-11T22:49:18Z", "author": {"login": "bikamani"}, "path": "service/iot-service-client/src/main/java/com/microsoft/azure/sdk/iot/service/JobProperties.java", "diffHunk": "@@ -156,40 +172,32 @@ public void setOutputBlobContainerUri(String outputBlobContainerUri) {\n     }\n \n     /**\n-     * @return whether the keys are included in export or not.\n+     * @return\n      */", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIwOTYxOQ=="}, "originalCommit": {"oid": "d8ff8fd90932cbda2c213fc235640c4540ce0fa3"}, "originalPosition": 78}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxMTU1NDI1OnYy", "diffSide": "RIGHT", "path": "deps/src/main/java/com/microsoft/azure/sdk/iot/deps/serializer/JobPropertiesParser.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QwMToxNToxNVrOFzLmWg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QwMTo1Mjo0NVrOFzL31w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIxMTczOA==", "bodyText": "Shouldn't the serialized name be \"storageAuthenticationType\"?", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r389211738", "createdAt": "2020-03-07T01:15:15Z", "author": {"login": "drwill-ms"}, "path": "deps/src/main/java/com/microsoft/azure/sdk/iot/deps/serializer/JobPropertiesParser.java", "diffHunk": "@@ -66,6 +66,11 @@\n     @SerializedName(FAILURE_REASON_NAME)\n     private String failureReason;\n \n+    private static final String STORAGE_AUTHENTICATION_TYPE = \"storageAuthenticationType\";\n+    @Expose(serialize = true, deserialize = true)\n+    @SerializedName(STORAGE_AUTHENTICATION_TYPE)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d8ff8fd90932cbda2c213fc235640c4540ce0fa3"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIxNDQxNw==", "bodyText": "Yes that's what it is. Did I miss something?", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r389214417", "createdAt": "2020-03-07T01:37:06Z", "author": {"login": "bikamani"}, "path": "deps/src/main/java/com/microsoft/azure/sdk/iot/deps/serializer/JobPropertiesParser.java", "diffHunk": "@@ -66,6 +66,11 @@\n     @SerializedName(FAILURE_REASON_NAME)\n     private String failureReason;\n \n+    private static final String STORAGE_AUTHENTICATION_TYPE = \"storageAuthenticationType\";\n+    @Expose(serialize = true, deserialize = true)\n+    @SerializedName(STORAGE_AUTHENTICATION_TYPE)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIxMTczOA=="}, "originalCommit": {"oid": "d8ff8fd90932cbda2c213fc235640c4540ce0fa3"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIxNjIxNQ==", "bodyText": "No, I'm just new to Java. That is a string constant that has the value we want. I get it now. :)", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r389216215", "createdAt": "2020-03-07T01:52:45Z", "author": {"login": "drwill-ms"}, "path": "deps/src/main/java/com/microsoft/azure/sdk/iot/deps/serializer/JobPropertiesParser.java", "diffHunk": "@@ -66,6 +66,11 @@\n     @SerializedName(FAILURE_REASON_NAME)\n     private String failureReason;\n \n+    private static final String STORAGE_AUTHENTICATION_TYPE = \"storageAuthenticationType\";\n+    @Expose(serialize = true, deserialize = true)\n+    @SerializedName(STORAGE_AUTHENTICATION_TYPE)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIxMTczOA=="}, "originalCommit": {"oid": "d8ff8fd90932cbda2c213fc235640c4540ce0fa3"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxMTU1NTg3OnYy", "diffSide": "RIGHT", "path": "deps/src/main/java/com/microsoft/azure/sdk/iot/deps/serializer/StorageAuthenticationType.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QwMToxNjozMFrOFzLnLg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QwMTozODozMlrOFzLxaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIxMTk1MA==", "bodyText": "This is missing the extra comment I added: This means authentication must be supplied in the storage URI(s)", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r389211950", "createdAt": "2020-03-07T01:16:30Z", "author": {"login": "drwill-ms"}, "path": "deps/src/main/java/com/microsoft/azure/sdk/iot/deps/serializer/StorageAuthenticationType.java", "diffHunk": "@@ -0,0 +1,14 @@\n+package com.microsoft.azure.sdk.iot.deps.serializer;\n+\n+import com.google.gson.annotations.SerializedName;\n+/* Specifies authentication type being used for connecting to storage account */\n+public enum StorageAuthenticationType\n+{\n+    /** Use a shared access key for authentication */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d8ff8fd90932cbda2c213fc235640c4540ce0fa3"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIxNDU2OQ==", "bodyText": "added", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r389214569", "createdAt": "2020-03-07T01:38:32Z", "author": {"login": "bikamani"}, "path": "deps/src/main/java/com/microsoft/azure/sdk/iot/deps/serializer/StorageAuthenticationType.java", "diffHunk": "@@ -0,0 +1,14 @@\n+package com.microsoft.azure.sdk.iot.deps.serializer;\n+\n+import com.google.gson.annotations.SerializedName;\n+/* Specifies authentication type being used for connecting to storage account */\n+public enum StorageAuthenticationType\n+{\n+    /** Use a shared access key for authentication */", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIxMTk1MA=="}, "originalCommit": {"oid": "d8ff8fd90932cbda2c213fc235640c4540ce0fa3"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxMTU2NTgwOnYy", "diffSide": "RIGHT", "path": "service/iot-service-client/src/main/java/com/microsoft/azure/sdk/iot/service/JobProperties.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QwMToyODoyMlrOFzLtGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QwMDoxMDozNlrOF1z1KA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIxMzQ2Ng==", "bodyText": "\"containing SAS token\" is only true if the storageAuthenticationType is keyBased.\nCheck all these comments, and compare them against the updated ones in the c# PR.", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r389213466", "createdAt": "2020-03-07T01:28:22Z", "author": {"login": "drwill-ms"}, "path": "service/iot-service-client/src/main/java/com/microsoft/azure/sdk/iot/service/JobProperties.java", "diffHunk": "@@ -126,6 +127,21 @@ public void setProgress(int progress) {\n         this.progress = progress;\n     }\n \n+    /**\n+     * @return System generated. Ignored at creation.\n+     * If status == failure, this represents a string containing the reason.\n+     */\n+    public String getFailureReason() {\n+        return failureReason;\n+    }\n+\n+    /**\n+     * @param failureReason the failure reason.\n+     */\n+    public void setFailureReason(String failureReason) {\n+        this.failureReason = failureReason;\n+    }\n+\n     /**\n      * @return URI containing SAS token to a blob container that contains registry data to sync.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d8ff8fd90932cbda2c213fc235640c4540ce0fa3"}, "originalPosition": 70}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTMxMzA1MA==", "bodyText": "I looked at your PR and seeing same comment for this context. Did I miss something?", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r391313050", "createdAt": "2020-03-11T22:47:00Z", "author": {"login": "bikamani"}, "path": "service/iot-service-client/src/main/java/com/microsoft/azure/sdk/iot/service/JobProperties.java", "diffHunk": "@@ -126,6 +127,21 @@ public void setProgress(int progress) {\n         this.progress = progress;\n     }\n \n+    /**\n+     * @return System generated. Ignored at creation.\n+     * If status == failure, this represents a string containing the reason.\n+     */\n+    public String getFailureReason() {\n+        return failureReason;\n+    }\n+\n+    /**\n+     * @param failureReason the failure reason.\n+     */\n+    public void setFailureReason(String failureReason) {\n+        this.failureReason = failureReason;\n+    }\n+\n     /**\n      * @return URI containing SAS token to a blob container that contains registry data to sync.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIxMzQ2Ng=="}, "originalCommit": {"oid": "d8ff8fd90932cbda2c213fc235640c4540ce0fa3"}, "originalPosition": 70}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTk2ODA0MA==", "bodyText": "Done", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r391968040", "createdAt": "2020-03-13T00:10:36Z", "author": {"login": "bikamani"}, "path": "service/iot-service-client/src/main/java/com/microsoft/azure/sdk/iot/service/JobProperties.java", "diffHunk": "@@ -126,6 +127,21 @@ public void setProgress(int progress) {\n         this.progress = progress;\n     }\n \n+    /**\n+     * @return System generated. Ignored at creation.\n+     * If status == failure, this represents a string containing the reason.\n+     */\n+    public String getFailureReason() {\n+        return failureReason;\n+    }\n+\n+    /**\n+     * @param failureReason the failure reason.\n+     */\n+    public void setFailureReason(String failureReason) {\n+        this.failureReason = failureReason;\n+    }\n+\n     /**\n      * @return URI containing SAS token to a blob container that contains registry data to sync.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIxMzQ2Ng=="}, "originalCommit": {"oid": "d8ff8fd90932cbda2c213fc235640c4540ce0fa3"}, "originalPosition": 70}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMTI0MjE1OnYy", "diffSide": "RIGHT", "path": "iot-e2e-tests/common/src/main/java/com/microsoft/azure/sdk/iot/common/tests/iothub/serviceclient/ExportImportTests.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwMTowODoxOVrOF0mJSQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQyMTowNzo1NFrOF1JJJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY5NTI0MQ==", "bodyText": "minor: space between \"if\" and \"(\"", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r390695241", "createdAt": "2020-03-11T01:08:19Z", "author": {"login": "drwill-ms"}, "path": "iot-e2e-tests/common/src/main/java/com/microsoft/azure/sdk/iot/common/tests/iothub/serviceclient/ExportImportTests.java", "diffHunk": "@@ -160,8 +213,18 @@ public void export_import_e2e() throws Exception\n         {\n             try\n             {\n-                exportJob = registryManager.exportDevices(containerSasUri, excludeKeys);\n-                exportJobScheduled = true;\n+                if(storageAuthenticationType.isPresent())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "86690e2b24ec14c19cdb85fca8bf131919f16d3a"}, "originalPosition": 151}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTI2ODY0Nw==", "bodyText": "done", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r391268647", "createdAt": "2020-03-11T21:07:54Z", "author": {"login": "bikamani"}, "path": "iot-e2e-tests/common/src/main/java/com/microsoft/azure/sdk/iot/common/tests/iothub/serviceclient/ExportImportTests.java", "diffHunk": "@@ -160,8 +213,18 @@ public void export_import_e2e() throws Exception\n         {\n             try\n             {\n-                exportJob = registryManager.exportDevices(containerSasUri, excludeKeys);\n-                exportJobScheduled = true;\n+                if(storageAuthenticationType.isPresent())", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY5NTI0MQ=="}, "originalCommit": {"oid": "86690e2b24ec14c19cdb85fca8bf131919f16d3a"}, "originalPosition": 151}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMTI0NDg4OnYy", "diffSide": "RIGHT", "path": "service/iot-service-client/src/main/java/com/microsoft/azure/sdk/iot/service/JobProperties.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwMTowOTo1OFrOF0mK3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwMTowOTo1OFrOF0mK3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY5NTY0NQ==", "bodyText": "minor, extra space before ending parenthesis", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r390695645", "createdAt": "2020-03-11T01:09:58Z", "author": {"login": "drwill-ms"}, "path": "service/iot-service-client/src/main/java/com/microsoft/azure/sdk/iot/service/JobProperties.java", "diffHunk": "@@ -272,4 +290,76 @@ JobPropertiesParser toJobPropertiesParser()\n \n         return jobPropertiesParser;\n     }\n+\n+    /**\n+     * Creates an instance of JobProperties with parameters ready to start an Import job\n+     *\n+     * @param inputBlobContainerUri URI containing SAS token to a blob container that contains registry data to sync\n+     * @param outputBlobContainerUri URI containing SAS token to a blob container.  This is used to output the status of the job and the results.\n+     * @return An instance of JobProperties\n+     */\n+    public static JobProperties createForImportJob(\n+            String inputBlobContainerUri,\n+            String outputBlobContainerUri)\n+    {\n+        StorageAuthenticationType storageAuthenticationType = StorageAuthenticationType.KEY;\n+        return createForImportJob(inputBlobContainerUri, outputBlobContainerUri, storageAuthenticationType);\n+    }\n+\n+    /**\n+     * Creates an instance of JobProperties with parameters ready to start an Import job\n+     *\n+     * @param inputBlobContainerUri URI containing SAS token to a blob container that contains registry data to sync\n+     * @param outputBlobContainerUri URI containing SAS token to a blob container.  This is used to output the status of the job and the results.\n+     * @param storageAuthenticationType Specifies authentication type being used for connecting to storage account\n+     * @return An instance of JobProperties\n+     */\n+    public static JobProperties createForImportJob(\n+            String inputBlobContainerUri,\n+            String outputBlobContainerUri,\n+            StorageAuthenticationType storageAuthenticationType)\n+    {\n+        JobProperties importJobProperties = new JobProperties();\n+        importJobProperties.setType(JobProperties.JobType.IMPORT);\n+        importJobProperties.setInputBlobContainerUri(inputBlobContainerUri);\n+        importJobProperties.setOutputBlobContainerUri(outputBlobContainerUri);\n+        importJobProperties.setStorageAuthenticationType(storageAuthenticationType);\n+        return importJobProperties;\n+    }\n+\n+    /**\n+     * Creates an instance of JobProperties with parameters ready to start an Export job\n+     *\n+     * @param outputBlobContainerUri URI containing SAS token to a blob container.  This is used to output the status of the job and the results.\n+     * @param excludeKeysInExport Indicates if authorization keys are included in export output\n+     * @return An instance of JobProperties\n+     */\n+    public static JobProperties createForExportJob(\n+            String outputBlobContainerUri,\n+            Boolean excludeKeysInExport )", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "86690e2b24ec14c19cdb85fca8bf131919f16d3a"}, "originalPosition": 221}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMTI0NzEzOnYy", "diffSide": "RIGHT", "path": "service/iot-service-client/src/main/java/com/microsoft/azure/sdk/iot/service/RegistryManager.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwMToxMToyOVrOF0mMMg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwMToxMToyOVrOF0mMMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY5NTk4Ng==", "bodyText": "in c# we don't use multiple empty lines between class members. I don't now what Java's style guidelines are, but here's a note for you to check on that.", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r390695986", "createdAt": "2020-03-11T01:11:29Z", "author": {"login": "drwill-ms"}, "path": "service/iot-service-client/src/main/java/com/microsoft/azure/sdk/iot/service/RegistryManager.java", "diffHunk": "@@ -1439,6 +1579,7 @@ private String CreateImportJobPropertiesJson(String importBlobContainerUri, Stri\n         return jobProperties.toJobPropertiesParser().toJson();\n     }\n \n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "86690e2b24ec14c19cdb85fca8bf131919f16d3a"}, "originalPosition": 158}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMTI1MDM4OnYy", "diffSide": "RIGHT", "path": "deps/src/main/java/com/microsoft/azure/sdk/iot/deps/serializer/JobPropertiesParser.java", "isResolved": true, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwMToxMzozNVrOF0mOOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQxODo1NjoxMFrOF1rRaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY5NjUwNw==", "bodyText": "Why not use primitive?", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r390696507", "createdAt": "2020-03-11T01:13:35Z", "author": {"login": "prmathur-microsoft"}, "path": "deps/src/main/java/com/microsoft/azure/sdk/iot/deps/serializer/JobPropertiesParser.java", "diffHunk": "@@ -59,13 +59,18 @@\n     private static final String EXCLUDE_KEYS_IN_EXPORT_NAME = \"excludeKeysInExport\";\n     @Expose(serialize = true, deserialize = true)\n     @SerializedName(EXCLUDE_KEYS_IN_EXPORT_NAME)\n-    private boolean excludeKeysInExport;\n+    private Boolean excludeKeysInExport;\n ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "86690e2b24ec14c19cdb85fca8bf131919f16d3a"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTI2NjcyNA==", "bodyText": "validating the get value as NULL or not in new changes. Not possible in boolean.", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r391266724", "createdAt": "2020-03-11T21:03:48Z", "author": {"login": "bikamani"}, "path": "deps/src/main/java/com/microsoft/azure/sdk/iot/deps/serializer/JobPropertiesParser.java", "diffHunk": "@@ -59,13 +59,18 @@\n     private static final String EXCLUDE_KEYS_IN_EXPORT_NAME = \"excludeKeysInExport\";\n     @Expose(serialize = true, deserialize = true)\n     @SerializedName(EXCLUDE_KEYS_IN_EXPORT_NAME)\n-    private boolean excludeKeysInExport;\n+    private Boolean excludeKeysInExport;\n ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY5NjUwNw=="}, "originalCommit": {"oid": "86690e2b24ec14c19cdb85fca8bf131919f16d3a"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTgxMzI3Nw==", "bodyText": "Why would excludeKeysInExport be null? what is it set in swagger?", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r391813277", "createdAt": "2020-03-12T18:28:54Z", "author": {"login": "prmathur-microsoft"}, "path": "deps/src/main/java/com/microsoft/azure/sdk/iot/deps/serializer/JobPropertiesParser.java", "diffHunk": "@@ -59,13 +59,18 @@\n     private static final String EXCLUDE_KEYS_IN_EXPORT_NAME = \"excludeKeysInExport\";\n     @Expose(serialize = true, deserialize = true)\n     @SerializedName(EXCLUDE_KEYS_IN_EXPORT_NAME)\n-    private boolean excludeKeysInExport;\n+    private Boolean excludeKeysInExport;\n ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY5NjUwNw=="}, "originalCommit": {"oid": "86690e2b24ec14c19cdb85fca8bf131919f16d3a"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTgxMzUwOQ==", "bodyText": "Ideally we shouldn't validate anything on the client side. Why are we validating this?", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r391813509", "createdAt": "2020-03-12T18:29:20Z", "author": {"login": "prmathur-microsoft"}, "path": "deps/src/main/java/com/microsoft/azure/sdk/iot/deps/serializer/JobPropertiesParser.java", "diffHunk": "@@ -59,13 +59,18 @@\n     private static final String EXCLUDE_KEYS_IN_EXPORT_NAME = \"excludeKeysInExport\";\n     @Expose(serialize = true, deserialize = true)\n     @SerializedName(EXCLUDE_KEYS_IN_EXPORT_NAME)\n-    private boolean excludeKeysInExport;\n+    private Boolean excludeKeysInExport;\n ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY5NjUwNw=="}, "originalCommit": {"oid": "86690e2b24ec14c19cdb85fca8bf131919f16d3a"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTgyMzgyOQ==", "bodyText": "Are you sure we shouldn't be validating? I see our Import Export APIs (without storage Auth) validating mandatory parameters. Unit tests are also making sure we do this.\nIf that's not required, I can remove this change.", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r391823829", "createdAt": "2020-03-12T18:48:37Z", "author": {"login": "bikamani"}, "path": "deps/src/main/java/com/microsoft/azure/sdk/iot/deps/serializer/JobPropertiesParser.java", "diffHunk": "@@ -59,13 +59,18 @@\n     private static final String EXCLUDE_KEYS_IN_EXPORT_NAME = \"excludeKeysInExport\";\n     @Expose(serialize = true, deserialize = true)\n     @SerializedName(EXCLUDE_KEYS_IN_EXPORT_NAME)\n-    private boolean excludeKeysInExport;\n+    private Boolean excludeKeysInExport;\n ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY5NjUwNw=="}, "originalCommit": {"oid": "86690e2b24ec14c19cdb85fca8bf131919f16d3a"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTgyNzgxNw==", "bodyText": "Yeah we were doing that in the very beginning time of SDK. However we got away from that practice  because we can keep track of service changes. So we don't validate anymore and reply on service to validate for us.", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r391827817", "createdAt": "2020-03-12T18:56:10Z", "author": {"login": "prmathur-microsoft"}, "path": "deps/src/main/java/com/microsoft/azure/sdk/iot/deps/serializer/JobPropertiesParser.java", "diffHunk": "@@ -59,13 +59,18 @@\n     private static final String EXCLUDE_KEYS_IN_EXPORT_NAME = \"excludeKeysInExport\";\n     @Expose(serialize = true, deserialize = true)\n     @SerializedName(EXCLUDE_KEYS_IN_EXPORT_NAME)\n-    private boolean excludeKeysInExport;\n+    private Boolean excludeKeysInExport;\n ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY5NjUwNw=="}, "originalCommit": {"oid": "86690e2b24ec14c19cdb85fca8bf131919f16d3a"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMTI1NDYwOnYy", "diffSide": "RIGHT", "path": "iot-e2e-tests/common/src/main/java/com/microsoft/azure/sdk/iot/common/tests/iothub/serviceclient/ExportImportTests.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwMToxNjozOFrOF0mQ3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQyMjozMTowN1rOF1Lgyg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY5NzE4Mw==", "bodyText": "In my experience running several tests at once now, I've run into an JobQuotaExceededException. I thought of different ways of handling this, including using a semaphore, but that would only prevent tests in the same process from running at the same time.\nI eventually landed on just guarding against that exception and retrying a certain number of times.\nYou'll want to do the same, otherwise these tests will occasionally fail and be considered flaky.", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r390697183", "createdAt": "2020-03-11T01:16:38Z", "author": {"login": "drwill-ms"}, "path": "iot-e2e-tests/common/src/main/java/com/microsoft/azure/sdk/iot/common/tests/iothub/serviceclient/ExportImportTests.java", "diffHunk": "@@ -160,8 +213,18 @@ public void export_import_e2e() throws Exception\n         {\n             try\n             {\n-                exportJob = registryManager.exportDevices(containerSasUri, excludeKeys);\n-                exportJobScheduled = true;\n+                if(storageAuthenticationType.isPresent())\n+                {\n+                    JobProperties exportJobProperties = JobProperties.createForExportJob(containerSasUri, excludeKeys, storageAuthenticationType.get());\n+                    exportJob = registryManager.exportDevices(exportJobProperties);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "86690e2b24ec14c19cdb85fca8bf131919f16d3a"}, "originalPosition": 154}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY5Nzg3Ng==", "bodyText": "I see a catch for IotHubTooManyDevicesException, which seems like a weird one to throw, but maybe in Java it is a differently named exception.\nIf that is the same, you have it covered, although I think a 30 second sleep is a bit much. We don't need tests taking longer than they need to. In my test, I loop for a max of 30 times, sleeping 1 second each time. If I need to increase the iteration count because of failures, I will, but I'd rather know the jobs are taking a long time or that we have too many concurrent ones before I let tests run too long.", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r390697876", "createdAt": "2020-03-11T01:19:41Z", "author": {"login": "drwill-ms"}, "path": "iot-e2e-tests/common/src/main/java/com/microsoft/azure/sdk/iot/common/tests/iothub/serviceclient/ExportImportTests.java", "diffHunk": "@@ -160,8 +213,18 @@ public void export_import_e2e() throws Exception\n         {\n             try\n             {\n-                exportJob = registryManager.exportDevices(containerSasUri, excludeKeys);\n-                exportJobScheduled = true;\n+                if(storageAuthenticationType.isPresent())\n+                {\n+                    JobProperties exportJobProperties = JobProperties.createForExportJob(containerSasUri, excludeKeys, storageAuthenticationType.get());\n+                    exportJob = registryManager.exportDevices(exportJobProperties);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY5NzE4Mw=="}, "originalCommit": {"oid": "86690e2b24ec14c19cdb85fca8bf131919f16d3a"}, "originalPosition": 154}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTMwNzQ2Ng==", "bodyText": "yes you are right, it's a same exception, error code: 403. I will change sleep time .", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r391307466", "createdAt": "2020-03-11T22:31:07Z", "author": {"login": "bikamani"}, "path": "iot-e2e-tests/common/src/main/java/com/microsoft/azure/sdk/iot/common/tests/iothub/serviceclient/ExportImportTests.java", "diffHunk": "@@ -160,8 +213,18 @@ public void export_import_e2e() throws Exception\n         {\n             try\n             {\n-                exportJob = registryManager.exportDevices(containerSasUri, excludeKeys);\n-                exportJobScheduled = true;\n+                if(storageAuthenticationType.isPresent())\n+                {\n+                    JobProperties exportJobProperties = JobProperties.createForExportJob(containerSasUri, excludeKeys, storageAuthenticationType.get());\n+                    exportJob = registryManager.exportDevices(exportJobProperties);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY5NzE4Mw=="}, "originalCommit": {"oid": "86690e2b24ec14c19cdb85fca8bf131919f16d3a"}, "originalPosition": 154}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyODI4MDIyOnYy", "diffSide": "RIGHT", "path": "deps/src/main/java/com/microsoft/azure/sdk/iot/deps/serializer/JobPropertiesParser.java", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQxODozMDoxOVrOF1qbfA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQyMzoyNzowOVrOF1zJog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTgxNDAxMg==", "bodyText": "As this is a public API I would be hesistant to make this change. If we absolutely have to then we should follow the deprecation process here. Can you justify why?", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r391814012", "createdAt": "2020-03-12T18:30:19Z", "author": {"login": "prmathur-microsoft"}, "path": "deps/src/main/java/com/microsoft/azure/sdk/iot/deps/serializer/JobPropertiesParser.java", "diffHunk": "@@ -270,7 +296,7 @@ public int getProgress()\n      *\n      * @return The value of excludeKeysInExport\n      */\n-    public boolean isExcludeKeysInExport()\n+    public Boolean isExcludeKeysInExport()\n     {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "57b7e242907d551002946c7757e03e3ca8cb6575"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTgxNjkxNA==", "bodyText": "I see, is there a better way to do this? -> https://github.com/Azure/azure-iot-sdk-java/pull/717/files#diff-85f710f651a02e7437edb830cfaafa4fR737\nThis is the main reason I had to change it to Boolean for null checking using JobProperties.", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r391816914", "createdAt": "2020-03-12T18:35:53Z", "author": {"login": "bikamani"}, "path": "deps/src/main/java/com/microsoft/azure/sdk/iot/deps/serializer/JobPropertiesParser.java", "diffHunk": "@@ -270,7 +296,7 @@ public int getProgress()\n      *\n      * @return The value of excludeKeysInExport\n      */\n-    public boolean isExcludeKeysInExport()\n+    public Boolean isExcludeKeysInExport()\n     {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTgxNDAxMg=="}, "originalCommit": {"oid": "57b7e242907d551002946c7757e03e3ca8cb6575"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTgyOTQ0MA==", "bodyText": "So if it is boolean and not Boolean then customers can never set it to null and will be forced to provide a value. So I don't see value here in this check. What was the motivation for this check?", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r391829440", "createdAt": "2020-03-12T18:59:17Z", "author": {"login": "prmathur-microsoft"}, "path": "deps/src/main/java/com/microsoft/azure/sdk/iot/deps/serializer/JobPropertiesParser.java", "diffHunk": "@@ -270,7 +296,7 @@ public int getProgress()\n      *\n      * @return The value of excludeKeysInExport\n      */\n-    public boolean isExcludeKeysInExport()\n+    public Boolean isExcludeKeysInExport()\n     {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTgxNDAxMg=="}, "originalCommit": {"oid": "57b7e242907d551002946c7757e03e3ca8cb6575"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTk1MTU0Mg==", "bodyText": "That's only true for earlier APIs. In new API it is JobProperties and if excludeKeys is not set, we are sending the request to service without mandatory requirements. Motivation of this check is to make sure these two necessary parameters are provided at least.", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r391951542", "createdAt": "2020-03-12T23:07:54Z", "author": {"login": "bikamani"}, "path": "deps/src/main/java/com/microsoft/azure/sdk/iot/deps/serializer/JobPropertiesParser.java", "diffHunk": "@@ -270,7 +296,7 @@ public int getProgress()\n      *\n      * @return The value of excludeKeysInExport\n      */\n-    public boolean isExcludeKeysInExport()\n+    public Boolean isExcludeKeysInExport()\n     {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTgxNDAxMg=="}, "originalCommit": {"oid": "57b7e242907d551002946c7757e03e3ca8cb6575"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTk1Njg5OA==", "bodyText": "As per our conversation offline, removing the validation for import export API and reverting back changes for boolean -> Boolean", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r391956898", "createdAt": "2020-03-12T23:27:09Z", "author": {"login": "bikamani"}, "path": "deps/src/main/java/com/microsoft/azure/sdk/iot/deps/serializer/JobPropertiesParser.java", "diffHunk": "@@ -270,7 +296,7 @@ public int getProgress()\n      *\n      * @return The value of excludeKeysInExport\n      */\n-    public boolean isExcludeKeysInExport()\n+    public Boolean isExcludeKeysInExport()\n     {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTgxNDAxMg=="}, "originalCommit": {"oid": "57b7e242907d551002946c7757e03e3ca8cb6575"}, "originalPosition": 61}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyODQxNTY1OnYy", "diffSide": "RIGHT", "path": "service/iot-service-client/src/main/java/com/microsoft/azure/sdk/iot/service/JobProperties.java", "isResolved": false, "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQxOToxMzowN1rOF1ryew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QxNjo1MDowOFrOF2LHzg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTgzNjI4Mw==", "bodyText": "why static? wouldn't it vary per instance of the job?", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r391836283", "createdAt": "2020-03-12T19:13:07Z", "author": {"login": "prmathur-microsoft"}, "path": "service/iot-service-client/src/main/java/com/microsoft/azure/sdk/iot/service/JobProperties.java", "diffHunk": "@@ -272,4 +298,76 @@ JobPropertiesParser toJobPropertiesParser()\n \n         return jobPropertiesParser;\n     }\n+\n+    /**\n+     * Creates an instance of JobProperties with parameters ready to start an Import job\n+     *\n+     * @param inputBlobContainerUri URI containing SAS token to a blob container that contains registry data to sync\n+     * @param outputBlobContainerUri URI containing SAS token to a blob container.  This is used to output the status of the job and the results.\n+     * @return An instance of JobProperties\n+     */\n+    public static JobProperties createForImportJob(\n+            String inputBlobContainerUri,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "57b7e242907d551002946c7757e03e3ca8cb6575"}, "originalPosition": 201}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTk1MDkzOQ==", "bodyText": "This is static as customer does not need to create object of class before accessing this method. I am not sure what you mean as per instance of the job here?", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r391950939", "createdAt": "2020-03-12T23:05:46Z", "author": {"login": "bikamani"}, "path": "service/iot-service-client/src/main/java/com/microsoft/azure/sdk/iot/service/JobProperties.java", "diffHunk": "@@ -272,4 +298,76 @@ JobPropertiesParser toJobPropertiesParser()\n \n         return jobPropertiesParser;\n     }\n+\n+    /**\n+     * Creates an instance of JobProperties with parameters ready to start an Import job\n+     *\n+     * @param inputBlobContainerUri URI containing SAS token to a blob container that contains registry data to sync\n+     * @param outputBlobContainerUri URI containing SAS token to a blob container.  This is used to output the status of the job and the results.\n+     * @return An instance of JobProperties\n+     */\n+    public static JobProperties createForImportJob(\n+            String inputBlobContainerUri,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTgzNjI4Mw=="}, "originalCommit": {"oid": "57b7e242907d551002946c7757e03e3ca8cb6575"}, "originalPosition": 201}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTk2NDg5Nw==", "bodyText": "Static because one doesn't need an instance to call it, rather it returns an instance. It is a factory method.", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r391964897", "createdAt": "2020-03-12T23:58:05Z", "author": {"login": "drwill-ms"}, "path": "service/iot-service-client/src/main/java/com/microsoft/azure/sdk/iot/service/JobProperties.java", "diffHunk": "@@ -272,4 +298,76 @@ JobPropertiesParser toJobPropertiesParser()\n \n         return jobPropertiesParser;\n     }\n+\n+    /**\n+     * Creates an instance of JobProperties with parameters ready to start an Import job\n+     *\n+     * @param inputBlobContainerUri URI containing SAS token to a blob container that contains registry data to sync\n+     * @param outputBlobContainerUri URI containing SAS token to a blob container.  This is used to output the status of the job and the results.\n+     * @return An instance of JobProperties\n+     */\n+    public static JobProperties createForImportJob(\n+            String inputBlobContainerUri,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTgzNjI4Mw=="}, "originalCommit": {"oid": "57b7e242907d551002946c7757e03e3ca8cb6575"}, "originalPosition": 201}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTk2NTMzNw==", "bodyText": "I changed mine to:\n/// URI to a blob container that contains registry data to sync. Including a SAS token is dependent on the  parameter.\n/// URI to a blob container.  This is used to output the status of the job and the results. Including a SAS token is dependent on the  parameter.", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r391965337", "createdAt": "2020-03-12T23:59:52Z", "author": {"login": "drwill-ms"}, "path": "service/iot-service-client/src/main/java/com/microsoft/azure/sdk/iot/service/JobProperties.java", "diffHunk": "@@ -272,4 +298,76 @@ JobPropertiesParser toJobPropertiesParser()\n \n         return jobPropertiesParser;\n     }\n+\n+    /**\n+     * Creates an instance of JobProperties with parameters ready to start an Import job\n+     *\n+     * @param inputBlobContainerUri URI containing SAS token to a blob container that contains registry data to sync\n+     * @param outputBlobContainerUri URI containing SAS token to a blob container.  This is used to output the status of the job and the results.\n+     * @return An instance of JobProperties\n+     */\n+    public static JobProperties createForImportJob(\n+            String inputBlobContainerUri,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTgzNjI4Mw=="}, "originalCommit": {"oid": "57b7e242907d551002946c7757e03e3ca8cb6575"}, "originalPosition": 201}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTk3MjkxNw==", "bodyText": "factory in java...cool. Haven't seen  that in a while", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r391972917", "createdAt": "2020-03-13T00:32:00Z", "author": {"login": "prmathur-microsoft"}, "path": "service/iot-service-client/src/main/java/com/microsoft/azure/sdk/iot/service/JobProperties.java", "diffHunk": "@@ -272,4 +298,76 @@ JobPropertiesParser toJobPropertiesParser()\n \n         return jobPropertiesParser;\n     }\n+\n+    /**\n+     * Creates an instance of JobProperties with parameters ready to start an Import job\n+     *\n+     * @param inputBlobContainerUri URI containing SAS token to a blob container that contains registry data to sync\n+     * @param outputBlobContainerUri URI containing SAS token to a blob container.  This is used to output the status of the job and the results.\n+     * @return An instance of JobProperties\n+     */\n+    public static JobProperties createForImportJob(\n+            String inputBlobContainerUri,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTgzNjI4Mw=="}, "originalCommit": {"oid": "57b7e242907d551002946c7757e03e3ca8cb6575"}, "originalPosition": 201}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTk3Mzc4OQ==", "bodyText": "won't make you go back and redesign, but in java we usually use builder in these cases. factory is frowned upon.", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r391973789", "createdAt": "2020-03-13T00:35:57Z", "author": {"login": "prmathur-microsoft"}, "path": "service/iot-service-client/src/main/java/com/microsoft/azure/sdk/iot/service/JobProperties.java", "diffHunk": "@@ -272,4 +298,76 @@ JobPropertiesParser toJobPropertiesParser()\n \n         return jobPropertiesParser;\n     }\n+\n+    /**\n+     * Creates an instance of JobProperties with parameters ready to start an Import job\n+     *\n+     * @param inputBlobContainerUri URI containing SAS token to a blob container that contains registry data to sync\n+     * @param outputBlobContainerUri URI containing SAS token to a blob container.  This is used to output the status of the job and the results.\n+     * @return An instance of JobProperties\n+     */\n+    public static JobProperties createForImportJob(\n+            String inputBlobContainerUri,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTgzNjI4Mw=="}, "originalCommit": {"oid": "57b7e242907d551002946c7757e03e3ca8cb6575"}, "originalPosition": 201}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTk4NjIyMQ==", "bodyText": "What do people have against factory pattern? Genuinely curious.", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r391986221", "createdAt": "2020-03-13T01:32:32Z", "author": {"login": "drwill-ms"}, "path": "service/iot-service-client/src/main/java/com/microsoft/azure/sdk/iot/service/JobProperties.java", "diffHunk": "@@ -272,4 +298,76 @@ JobPropertiesParser toJobPropertiesParser()\n \n         return jobPropertiesParser;\n     }\n+\n+    /**\n+     * Creates an instance of JobProperties with parameters ready to start an Import job\n+     *\n+     * @param inputBlobContainerUri URI containing SAS token to a blob container that contains registry data to sync\n+     * @param outputBlobContainerUri URI containing SAS token to a blob container.  This is used to output the status of the job and the results.\n+     * @return An instance of JobProperties\n+     */\n+    public static JobProperties createForImportJob(\n+            String inputBlobContainerUri,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTgzNjI4Mw=="}, "originalCommit": {"oid": "57b7e242907d551002946c7757e03e3ca8cb6575"}, "originalPosition": 201}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjM0OTY0Ng==", "bodyText": "+1,I also want to know.", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r392349646", "createdAt": "2020-03-13T16:50:08Z", "author": {"login": "bikamani"}, "path": "service/iot-service-client/src/main/java/com/microsoft/azure/sdk/iot/service/JobProperties.java", "diffHunk": "@@ -272,4 +298,76 @@ JobPropertiesParser toJobPropertiesParser()\n \n         return jobPropertiesParser;\n     }\n+\n+    /**\n+     * Creates an instance of JobProperties with parameters ready to start an Import job\n+     *\n+     * @param inputBlobContainerUri URI containing SAS token to a blob container that contains registry data to sync\n+     * @param outputBlobContainerUri URI containing SAS token to a blob container.  This is used to output the status of the job and the results.\n+     * @return An instance of JobProperties\n+     */\n+    public static JobProperties createForImportJob(\n+            String inputBlobContainerUri,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTgzNjI4Mw=="}, "originalCommit": {"oid": "57b7e242907d551002946c7757e03e3ca8cb6575"}, "originalPosition": 201}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyOTMyMjExOnYy", "diffSide": "RIGHT", "path": "service/iot-service-client/src/test/java/tests/unit/com/microsoft/azure/sdk/iot/service/RegistryManagerTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QwMDozMzozMFrOF10Jcw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QwMTozNzozMlrOF11ANQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTk3MzIzNQ==", "bodyText": "So where are you setting the env for this to work?", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r391973235", "createdAt": "2020-03-13T00:33:30Z", "author": {"login": "prmathur-microsoft"}, "path": "service/iot-service-client/src/test/java/tests/unit/com/microsoft/azure/sdk/iot/service/RegistryManagerTest.java", "diffHunk": "@@ -1162,7 +1163,74 @@ public Device getStatistics() throws IOException, IotHubException\n         registryManager.getStatisticsAsync();\n     }\n \n+    @Test\n+    public void exportDevices_jobProperties_good_case() throws Exception\n+    {\n+        String connectionString = \"HostName=aaa.bbb.ccc;SharedAccessKeyName=XXX;SharedAccessKey=YYY\";\n+\n+        new NonStrictExpectations()\n+        {\n+            {\n+                IotHubConnectionStringBuilder.createConnectionString(connectionString);\n+                result = iotHubConnectionString;\n+                iotHubConnectionString.getUrlCreateExportImportJob();\n+                result = mockUrl;\n+                mockHttpRequest.send();\n+                result = mockHttpResponse;\n+                mockIotHubExceptionManager.httpResponseVerification((HttpResponse) any);\n+                mockHttpResponse.getBody();\n+                result = jobPropertiesJson.getBytes();\n+            }\n+        };\n+\n+        RegistryManager registryManager = RegistryManager.createFromConnectionString(connectionString);\n+        JobProperties exportJobProperties =\n+                JobProperties.createForExportJob(\"blob1\", true, StorageAuthenticationType.IDENTITY);\n+        JobProperties jobProperties = registryManager.exportDevices(exportJobProperties);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c72d55ef23e4255205c1c26f457c515749f53d33"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTk4NzI1Mw==", "bodyText": "For .NET, I'm setting it locally when I test.\nFor our pipeline, we can't set the env var because this api-version will not be rolled to west us, so the test would fail. We'll have to wait for the feature to make it to west us, and enable our hubs with identity (still a TODO for me, so I created this PBI: https://msazure.visualstudio.com/One/_boards/board/t/IoT-Developers%20and%20Devices-Managed/Backlog%20items/?workitem=6454493).\nFor now, we're relying on local testing to validate the new functionality.", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r391987253", "createdAt": "2020-03-13T01:37:32Z", "author": {"login": "drwill-ms"}, "path": "service/iot-service-client/src/test/java/tests/unit/com/microsoft/azure/sdk/iot/service/RegistryManagerTest.java", "diffHunk": "@@ -1162,7 +1163,74 @@ public Device getStatistics() throws IOException, IotHubException\n         registryManager.getStatisticsAsync();\n     }\n \n+    @Test\n+    public void exportDevices_jobProperties_good_case() throws Exception\n+    {\n+        String connectionString = \"HostName=aaa.bbb.ccc;SharedAccessKeyName=XXX;SharedAccessKey=YYY\";\n+\n+        new NonStrictExpectations()\n+        {\n+            {\n+                IotHubConnectionStringBuilder.createConnectionString(connectionString);\n+                result = iotHubConnectionString;\n+                iotHubConnectionString.getUrlCreateExportImportJob();\n+                result = mockUrl;\n+                mockHttpRequest.send();\n+                result = mockHttpResponse;\n+                mockIotHubExceptionManager.httpResponseVerification((HttpResponse) any);\n+                mockHttpResponse.getBody();\n+                result = jobPropertiesJson.getBytes();\n+            }\n+        };\n+\n+        RegistryManager registryManager = RegistryManager.createFromConnectionString(connectionString);\n+        JobProperties exportJobProperties =\n+                JobProperties.createForExportJob(\"blob1\", true, StorageAuthenticationType.IDENTITY);\n+        JobProperties jobProperties = registryManager.exportDevices(exportJobProperties);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTk3MzIzNQ=="}, "originalCommit": {"oid": "c72d55ef23e4255205c1c26f457c515749f53d33"}, "originalPosition": 35}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyOTQwMzU0OnYy", "diffSide": "RIGHT", "path": "service/iot-service-client/src/main/java/com/microsoft/azure/sdk/iot/service/IotHubConnectionString.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QwMTozMToyNFrOF107WA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QxNjo1MTowM1rOF2LJ4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTk4NjAwOA==", "bodyText": "Does this set the new api-version globally, or just for import/export devices job?", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r391986008", "createdAt": "2020-03-13T01:31:24Z", "author": {"login": "drwill-ms"}, "path": "service/iot-service-client/src/main/java/com/microsoft/azure/sdk/iot/service/IotHubConnectionString.java", "diffHunk": "@@ -632,7 +647,19 @@ public URL getUrlCreateExportImportJob() throws MalformedURLException\n         stringBuilder.append(URL_SEPARATOR_0);\n         stringBuilder.append(\"create\");\n         stringBuilder.append(URL_SEPARATOR_1);\n-        stringBuilder.append(URL_API_VERSION);\n+        // The new api-version is only available in a few initial regions\n+        // Control access via an environment variable. If a user wishes to try it out,\n+        // they can set \"EnabledStorageIdentity\" to \"1\". Otherwise, the SDK will still\n+        // default to the latest, broadly-supported api-version used in this SDK.\n+        IotHubConnectionString iotHubConnectionString = new IotHubConnectionString();\n+        if (iotHubConnectionString.IsStorageIdentityEnabled)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1f9d47ac2de3877551e496b897afb31b0b179355"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjM0NTQ5Mw==", "bodyText": "Thanks for catching this. It is setting only for import export currently, will change it to all.", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r392345493", "createdAt": "2020-03-13T16:43:22Z", "author": {"login": "bikamani"}, "path": "service/iot-service-client/src/main/java/com/microsoft/azure/sdk/iot/service/IotHubConnectionString.java", "diffHunk": "@@ -632,7 +647,19 @@ public URL getUrlCreateExportImportJob() throws MalformedURLException\n         stringBuilder.append(URL_SEPARATOR_0);\n         stringBuilder.append(\"create\");\n         stringBuilder.append(URL_SEPARATOR_1);\n-        stringBuilder.append(URL_API_VERSION);\n+        // The new api-version is only available in a few initial regions\n+        // Control access via an environment variable. If a user wishes to try it out,\n+        // they can set \"EnabledStorageIdentity\" to \"1\". Otherwise, the SDK will still\n+        // default to the latest, broadly-supported api-version used in this SDK.\n+        IotHubConnectionString iotHubConnectionString = new IotHubConnectionString();\n+        if (iotHubConnectionString.IsStorageIdentityEnabled)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTk4NjAwOA=="}, "originalCommit": {"oid": "1f9d47ac2de3877551e496b897afb31b0b179355"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjM0ODczMg==", "bodyText": "No, we want it only for import/export job. Not all. Sorry for the confusion.", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r392348732", "createdAt": "2020-03-13T16:48:26Z", "author": {"login": "drwill-ms"}, "path": "service/iot-service-client/src/main/java/com/microsoft/azure/sdk/iot/service/IotHubConnectionString.java", "diffHunk": "@@ -632,7 +647,19 @@ public URL getUrlCreateExportImportJob() throws MalformedURLException\n         stringBuilder.append(URL_SEPARATOR_0);\n         stringBuilder.append(\"create\");\n         stringBuilder.append(URL_SEPARATOR_1);\n-        stringBuilder.append(URL_API_VERSION);\n+        // The new api-version is only available in a few initial regions\n+        // Control access via an environment variable. If a user wishes to try it out,\n+        // they can set \"EnabledStorageIdentity\" to \"1\". Otherwise, the SDK will still\n+        // default to the latest, broadly-supported api-version used in this SDK.\n+        IotHubConnectionString iotHubConnectionString = new IotHubConnectionString();\n+        if (iotHubConnectionString.IsStorageIdentityEnabled)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTk4NjAwOA=="}, "originalCommit": {"oid": "1f9d47ac2de3877551e496b897afb31b0b179355"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjM1MDE3Nw==", "bodyText": "As discussed offline, this is only required for import export which is what it is currently. No changes required, resolving", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r392350177", "createdAt": "2020-03-13T16:51:03Z", "author": {"login": "bikamani"}, "path": "service/iot-service-client/src/main/java/com/microsoft/azure/sdk/iot/service/IotHubConnectionString.java", "diffHunk": "@@ -632,7 +647,19 @@ public URL getUrlCreateExportImportJob() throws MalformedURLException\n         stringBuilder.append(URL_SEPARATOR_0);\n         stringBuilder.append(\"create\");\n         stringBuilder.append(URL_SEPARATOR_1);\n-        stringBuilder.append(URL_API_VERSION);\n+        // The new api-version is only available in a few initial regions\n+        // Control access via an environment variable. If a user wishes to try it out,\n+        // they can set \"EnabledStorageIdentity\" to \"1\". Otherwise, the SDK will still\n+        // default to the latest, broadly-supported api-version used in this SDK.\n+        IotHubConnectionString iotHubConnectionString = new IotHubConnectionString();\n+        if (iotHubConnectionString.IsStorageIdentityEnabled)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTk4NjAwOA=="}, "originalCommit": {"oid": "1f9d47ac2de3877551e496b897afb31b0b179355"}, "originalPosition": 52}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyOTQxNDEzOnYy", "diffSide": "RIGHT", "path": "service/iot-service-client/src/main/java/com/microsoft/azure/sdk/iot/service/RegistryManager.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QwMTozOTowOVrOF11BnA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QxNjo0NTo1M1rOF2K94A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTk4NzYxMg==", "bodyText": "If this feature is off, you need to make sure the storageAuthenticationType is not serialized into the json, otherwise the service will reject the request.", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r391987612", "createdAt": "2020-03-13T01:39:09Z", "author": {"login": "drwill-ms"}, "path": "service/iot-service-client/src/main/java/com/microsoft/azure/sdk/iot/service/RegistryManager.java", "diffHunk": "@@ -718,6 +718,69 @@ public JobProperties exportDevices(String exportBlobContainerUri, Boolean exclud\n         return future;\n     }\n \n+    /**\n+     * Create a bulk export job.\n+     *\n+     * @param exportDevicesParameters A JobProperties object containing input parameters for export Devices job\n+     *\n+     * @return A JobProperties object for the newly created bulk export job\n+     *\n+     * @throws IllegalArgumentException This exception is thrown if the exportBlobContainerUri or excludeKeys parameters are null\n+     * @throws IOException This exception is thrown if the IO operation failed\n+     * @throws IotHubException This exception is thrown if the response verification failed\n+     */\n+    public JobProperties exportDevices(JobProperties exportDevicesParameters)\n+            throws IllegalArgumentException, IOException, IotHubException, JsonSyntaxException\n+    {\n+        // CODES_SRS_SERVICE_SDK_JAVA_REGISTRYMANAGER_15_062: [The function shall get the URL for the bulk export job creation]\n+        URL url = iotHubConnectionString.getUrlCreateExportImportJob();\n+\n+        // CODES_SRS_SERVICE_SDK_JAVA_REGISTRYMANAGER_15_063: [The function shall create a new SAS token for the bulk export job]\n+        String sasTokenString = new IotHubServiceSasToken(this.iotHubConnectionString).toString();\n+\n+        // CODES_SRS_SERVICE_SDK_JAVA_REGISTRYMANAGER_15_064: [The function shall create a new HttpRequest for the bulk export job creation ]\n+        exportDevicesParameters.setType(JobProperties.JobType.EXPORT);\n+        String jobPropertiesJson = exportDevicesParameters.toJobPropertiesParser().toJson();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1f9d47ac2de3877551e496b897afb31b0b179355"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjM0NzEwNA==", "bodyText": "It is checked in toJobPropertiesParser. It won't be serialized into json", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/717#discussion_r392347104", "createdAt": "2020-03-13T16:45:53Z", "author": {"login": "bikamani"}, "path": "service/iot-service-client/src/main/java/com/microsoft/azure/sdk/iot/service/RegistryManager.java", "diffHunk": "@@ -718,6 +718,69 @@ public JobProperties exportDevices(String exportBlobContainerUri, Boolean exclud\n         return future;\n     }\n \n+    /**\n+     * Create a bulk export job.\n+     *\n+     * @param exportDevicesParameters A JobProperties object containing input parameters for export Devices job\n+     *\n+     * @return A JobProperties object for the newly created bulk export job\n+     *\n+     * @throws IllegalArgumentException This exception is thrown if the exportBlobContainerUri or excludeKeys parameters are null\n+     * @throws IOException This exception is thrown if the IO operation failed\n+     * @throws IotHubException This exception is thrown if the response verification failed\n+     */\n+    public JobProperties exportDevices(JobProperties exportDevicesParameters)\n+            throws IllegalArgumentException, IOException, IotHubException, JsonSyntaxException\n+    {\n+        // CODES_SRS_SERVICE_SDK_JAVA_REGISTRYMANAGER_15_062: [The function shall get the URL for the bulk export job creation]\n+        URL url = iotHubConnectionString.getUrlCreateExportImportJob();\n+\n+        // CODES_SRS_SERVICE_SDK_JAVA_REGISTRYMANAGER_15_063: [The function shall create a new SAS token for the bulk export job]\n+        String sasTokenString = new IotHubServiceSasToken(this.iotHubConnectionString).toString();\n+\n+        // CODES_SRS_SERVICE_SDK_JAVA_REGISTRYMANAGER_15_064: [The function shall create a new HttpRequest for the bulk export job creation ]\n+        exportDevicesParameters.setType(JobProperties.JobType.EXPORT);\n+        String jobPropertiesJson = exportDevicesParameters.toJobPropertiesParser().toJson();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTk4NzYxMg=="}, "originalCommit": {"oid": "1f9d47ac2de3877551e496b897afb31b0b179355"}, "originalPosition": 26}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2973, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}