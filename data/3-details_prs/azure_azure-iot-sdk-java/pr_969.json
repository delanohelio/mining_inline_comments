{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAyODM3NzU1", "number": 969, "title": "refactor(samples): Minor improvements to samples", "bodyText": "Checklist\n\n I have read the [contribution guidelines] (https://github.com/Azure/azure-iot-sdk-java/blob/master/.github/CONTRIBUTING.md).\n I added or modified the existing tests to cover the change (we do not allow our test coverage to go down).\nIf this is a modification that impacts the behavior of a public API\n\n I edited the corresponding document in the devdoc folder and added or modified requirements.\n\n\nI submitted this PR against the correct branch:\n\n This pull-request is submitted against the master branch.\n\n\n\nReference/Link to the issue solved with this PR (if any)\nDescription of the problem\n\nDescription of the solution", "createdAt": "2020-10-13T21:02:00Z", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/969", "merged": true, "mergeCommit": {"oid": "6e7640dcaeeefb191fe88839c72ffbca8c78dc2d"}, "closed": true, "closedAt": "2020-10-13T21:41:57Z", "author": {"login": "vinagesh"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdSPEv1AH2gAyNTAyODM3NzU1OmUxYjk5MmYxZWNhZjg3ZGJkMjllOTIwODI2NDFkMDdjOWY2NWEyYWI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdSPkRaAFqTUwNzg0NjQ2MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e1b992f1ecaf87dbd29e92082641d07c9f65a2ab", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/e1b992f1ecaf87dbd29e92082641d07c9f65a2ab", "committedDate": "2020-10-13T21:01:38Z", "message": "Minor improvements to samples"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3ODI2MjE4", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/969#pullrequestreview-507826218", "createdAt": "2020-10-13T21:02:20Z", "commit": {"oid": "e1b992f1ecaf87dbd29e92082641d07c9f65a2ab"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QyMTowMjoyMFrOHg5X7w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QyMTowMjoyMFrOHg5X7w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDI1NjQ5NQ==", "bodyText": "DISABLED is not used", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/969#discussion_r504256495", "createdAt": "2020-10-13T21:02:20Z", "author": {"login": "vinagesh"}, "path": "device/iot-device-samples/device-twin-sample/src/main/java/samples/com/microsoft/azure/sdk/iot/DeviceTwinSample.java", "diffHunk": "@@ -18,7 +18,7 @@\n  */\n public class DeviceTwinSample\n {\n-    private enum LIGHTS{ ON, OFF, DISABLED }\n+    private enum LIGHTS{ ON, OFF }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e1b992f1ecaf87dbd29e92082641d07c9f65a2ab"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3ODI2NDE0", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/969#pullrequestreview-507826414", "createdAt": "2020-10-13T21:02:38Z", "commit": {"oid": "e1b992f1ecaf87dbd29e92082641d07c9f65a2ab"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QyMTowMjozOFrOHg5YeA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QyMTowMjozOFrOHg5YeA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDI1NjYzMg==", "bodyText": "https is not supported", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/969#discussion_r504256632", "createdAt": "2020-10-13T21:02:38Z", "author": {"login": "vinagesh"}, "path": "device/iot-device-samples/module-method-sample/src/main/java/samples/com/microsoft/azure/sdk/iot/ModuleMethodSample.java", "diffHunk": "@@ -23,12 +23,8 @@\n             + \"2. (mqtt | amqps | amqps_ws | mqtt_ws)\\n\";\n \n     private static String SAMPLE_USAGE_WITH_WRONG_ARGS = \"Expected 2 or 3 arguments but received: %d.\\n\" + SAMPLE_USAGE;\n-    private static String SAMPLE_USAGE_WITH_INVALID_PROTOCOL = \"Expected argument 2 to be one of 'mqtt', 'https', 'amqps' or 'amqps_ws' but received %s\\n\" + SAMPLE_USAGE;\n-\n-    private static IotHubClientProtocol protocol = IotHubClientProtocol.MQTT;\n+    private static String SAMPLE_USAGE_WITH_INVALID_PROTOCOL = \"Expected argument 2 to be one of 'mqtt', 'amqps' or 'amqps_ws' but received %s\\n\" + SAMPLE_USAGE;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e1b992f1ecaf87dbd29e92082641d07c9f65a2ab"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3ODI2NTA3", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/969#pullrequestreview-507826507", "createdAt": "2020-10-13T21:02:46Z", "commit": {"oid": "e1b992f1ecaf87dbd29e92082641d07c9f65a2ab"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QyMTowMjo0NlrOHg5Ywg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QyMTowMjo0NlrOHg5Ywg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDI1NjcwNg==", "bodyText": "not used", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/969#discussion_r504256706", "createdAt": "2020-10-13T21:02:46Z", "author": {"login": "vinagesh"}, "path": "device/iot-device-samples/module-method-sample/src/main/java/samples/com/microsoft/azure/sdk/iot/ModuleMethodSample.java", "diffHunk": "@@ -23,12 +23,8 @@\n             + \"2. (mqtt | amqps | amqps_ws | mqtt_ws)\\n\";\n \n     private static String SAMPLE_USAGE_WITH_WRONG_ARGS = \"Expected 2 or 3 arguments but received: %d.\\n\" + SAMPLE_USAGE;\n-    private static String SAMPLE_USAGE_WITH_INVALID_PROTOCOL = \"Expected argument 2 to be one of 'mqtt', 'https', 'amqps' or 'amqps_ws' but received %s\\n\" + SAMPLE_USAGE;\n-\n-    private static IotHubClientProtocol protocol = IotHubClientProtocol.MQTT;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e1b992f1ecaf87dbd29e92082641d07c9f65a2ab"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3ODI2NTYy", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/969#pullrequestreview-507826562", "createdAt": "2020-10-13T21:02:52Z", "commit": {"oid": "e1b992f1ecaf87dbd29e92082641d07c9f65a2ab"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QyMTowMjo1MlrOHg5Y9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QyMTowMjo1MlrOHg5Y9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDI1Njc1OA==", "bodyText": "not used", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/969#discussion_r504256758", "createdAt": "2020-10-13T21:02:52Z", "author": {"login": "vinagesh"}, "path": "device/iot-device-samples/module-twin-sample/src/main/java/samples/com/microsoft/azure/sdk/iot/ModuleTwinSample.java", "diffHunk": "@@ -24,9 +24,9 @@\n             + \"2. (mqtt | amqps | amqps_ws | mqtt_ws)\\n\";\n \n     private static String SAMPLE_USAGE_WITH_WRONG_ARGS = \"Expected 2 or 3 arguments but received: %d.\\n\" + SAMPLE_USAGE;\n-    private static String SAMPLE_USAGE_WITH_INVALID_PROTOCOL = \"Expected argument 2 to be one of 'mqtt', 'https', 'amqps' or 'amqps_ws' but received %s\\n\" + SAMPLE_USAGE;\n+    private static String SAMPLE_USAGE_WITH_INVALID_PROTOCOL = \"Expected argument 2 to be one of 'mqtt', 'amqps' or 'amqps_ws' but received %s\\n\" + SAMPLE_USAGE;\n \n-    private enum LIGHTS{ ON, OFF, DISABLED }\n+    private enum LIGHTS{ ON, OFF }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e1b992f1ecaf87dbd29e92082641d07c9f65a2ab"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3ODI2NjM3", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/969#pullrequestreview-507826637", "createdAt": "2020-10-13T21:02:59Z", "commit": {"oid": "e1b992f1ecaf87dbd29e92082641d07c9f65a2ab"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QyMTowMjo1OVrOHg5ZMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QyMTowMjo1OVrOHg5ZMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDI1NjgxNg==", "bodyText": "https is not supported", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/969#discussion_r504256816", "createdAt": "2020-10-13T21:02:59Z", "author": {"login": "vinagesh"}, "path": "device/iot-device-samples/module-twin-sample/src/main/java/samples/com/microsoft/azure/sdk/iot/ModuleTwinSample.java", "diffHunk": "@@ -24,9 +24,9 @@\n             + \"2. (mqtt | amqps | amqps_ws | mqtt_ws)\\n\";\n \n     private static String SAMPLE_USAGE_WITH_WRONG_ARGS = \"Expected 2 or 3 arguments but received: %d.\\n\" + SAMPLE_USAGE;\n-    private static String SAMPLE_USAGE_WITH_INVALID_PROTOCOL = \"Expected argument 2 to be one of 'mqtt', 'https', 'amqps' or 'amqps_ws' but received %s\\n\" + SAMPLE_USAGE;\n+    private static String SAMPLE_USAGE_WITH_INVALID_PROTOCOL = \"Expected argument 2 to be one of 'mqtt', 'amqps' or 'amqps_ws' but received %s\\n\" + SAMPLE_USAGE;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e1b992f1ecaf87dbd29e92082641d07c9f65a2ab"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3ODI2ODQ4", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/969#pullrequestreview-507826848", "createdAt": "2020-10-13T21:03:20Z", "commit": {"oid": "e1b992f1ecaf87dbd29e92082641d07c9f65a2ab"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QyMTowMzoyMFrOHg5Zuw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QyMTowMzoyMFrOHg5Zuw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDI1Njk1NQ==", "bodyText": "We should not accidentally check in these values so changed to using env variables", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/969#discussion_r504256955", "createdAt": "2020-10-13T21:03:20Z", "author": {"login": "vinagesh"}, "path": "service/iot-service-samples/device-twin-sample/src/main/java/samples/com/microsoft/azure/sdk/iot/DeviceTwinSample.java", "diffHunk": "@@ -16,8 +16,8 @@\n /** Manages device twin operations on IotHub */\n public class DeviceTwinSample\n {\n-    public static final String iotHubConnectionString = \"[IOT HUB Connection String]\";\n-    public static final String deviceId = \"[Device ID]\";\n+    private static final String iotHubConnectionString  = System.getenv(\"IOTHUB_CONNECTION_STRING\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e1b992f1ecaf87dbd29e92082641d07c9f65a2ab"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3ODI2OTUz", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/969#pullrequestreview-507826953", "createdAt": "2020-10-13T21:03:29Z", "commit": {"oid": "e1b992f1ecaf87dbd29e92082641d07c9f65a2ab"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QyMTowMzozMFrOHg5aBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QyMTowMzozMFrOHg5aBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDI1NzAzMQ==", "bodyText": "Sample does not work without this", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/969#discussion_r504257031", "createdAt": "2020-10-13T21:03:30Z", "author": {"login": "vinagesh"}, "path": "service/iot-service-samples/device-twin-sample/src/main/java/samples/com/microsoft/azure/sdk/iot/DeviceTwinSample.java", "diffHunk": "@@ -121,6 +121,8 @@ private static void scheduleUpdateDesiredProperties(DeviceTwin twinClient, Devic\n         desiredProperties.add(new Pair(\"temp\", new Random().nextInt(TEMPERATURE_RANGE)));\n         desiredProperties.add(new Pair(\"hum\", new Random().nextInt(HUMIDITY_RANGE)));\n         device.setDesiredProperties(desiredProperties);\n+        // ScheduleUpdateTwin job type is a force update, which only accepts '*' as the Etag\n+        device.setETag(\"*\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e1b992f1ecaf87dbd29e92082641d07c9f65a2ab"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3ODMzMjI2", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/969#pullrequestreview-507833226", "createdAt": "2020-10-13T21:13:41Z", "commit": {"oid": "e1b992f1ecaf87dbd29e92082641d07c9f65a2ab"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QyMToxMzo0MVrOHg5tVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QyMToxMzo0MVrOHg5tVw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDI2MTk3NQ==", "bodyText": "Is this correct though? I see schedule update call next to this line", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/969#discussion_r504261975", "createdAt": "2020-10-13T21:13:41Z", "author": {"login": "bikamani"}, "path": "service/iot-service-samples/device-twin-sample/src/main/java/samples/com/microsoft/azure/sdk/iot/DeviceTwinSample.java", "diffHunk": "@@ -152,14 +154,16 @@ private static void cancelJob(DeviceTwin twinClient, DeviceTwinDevice device) th\n         desiredProperties.add(new Pair(\"temp\", new Random().nextInt(TEMPERATURE_RANGE)));\n         desiredProperties.add(new Pair(\"hum\", new Random().nextInt(HUMIDITY_RANGE)));\n         device.setDesiredProperties(desiredProperties);\n+        // ScheduleUpdateTwin job type is a force update, which only accepts '*' as the Etag\n+        device.setETag(\"*\");\n \n         // date when the update shall be executed\n         Date updateDateInFuture = new Date(new Date().getTime() + ADD_10_MINUTES_IN_MILLISECONDS); // 10 minutes in the future.\n \n         // query condition that defines the list of device to be updated\n         String queryCondition = \"DeviceId IN ['\" + deviceId + \"']\";\n \n-        System.out.println(\"Schedule updating Device twin (new temp, hum) in 10 minutes\");\n+        System.out.println(\"Cancel updating Device twin (new temp, hum) in 10 minutes\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e1b992f1ecaf87dbd29e92082641d07c9f65a2ab"}, "originalPosition": 34}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3ODM0MDU0", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/969#pullrequestreview-507834054", "createdAt": "2020-10-13T21:14:58Z", "commit": {"oid": "e1b992f1ecaf87dbd29e92082641d07c9f65a2ab"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3ODM4NTkx", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/969#pullrequestreview-507838591", "createdAt": "2020-10-13T21:22:19Z", "commit": {"oid": "e1b992f1ecaf87dbd29e92082641d07c9f65a2ab"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3ODQwNTk5", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/969#pullrequestreview-507840599", "createdAt": "2020-10-13T21:25:48Z", "commit": {"oid": "e1b992f1ecaf87dbd29e92082641d07c9f65a2ab"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QyMToyNTo0OFrOHg6EQQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QyMToyNTo0OFrOHg6EQQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDI2Nzg0MQ==", "bodyText": "I didn't get this point - does this refer to the sequence of sending message from service and then setting callback on the device?", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/969#discussion_r504267841", "createdAt": "2020-10-13T21:25:48Z", "author": {"login": "abhipsaMisra"}, "path": "device/iot-device-samples/handle-messages/src/main/java/samples/com/microsoft/azure/sdk/iot/HandleMessages.java", "diffHunk": "@@ -223,7 +223,7 @@ else if (protocolStr.equals(\"mqtt_ws\"))\n \n         System.out.println(\"Opened connection to IoT Hub.\");\n \n-        System.out.println(\"Beginning to receive messages...\");\n+        System.out.println(\"Beginning to receive messages(only for MQTT and AMQP). To receive in Https, send message and then start the sample...\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e1b992f1ecaf87dbd29e92082641d07c9f65a2ab"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3ODQ2NDYw", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/969#pullrequestreview-507846460", "createdAt": "2020-10-13T21:36:04Z", "commit": {"oid": "e1b992f1ecaf87dbd29e92082641d07c9f65a2ab"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1598, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}