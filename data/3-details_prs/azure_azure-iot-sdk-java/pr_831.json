{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQyODg1ODA4", "number": 831, "title": "fix(iot-dev): Fix issue where clients couldn't queue messages while reconnecting", "bodyText": "InternalClient methods such as subscribeToTwinDesiredProperties check this isOpen() method before queueing messages.\nThe previous behavior was to allow users to queue messages and send subscription messages even when the client is in a reconnecting state.", "createdAt": "2020-07-01T18:41:19Z", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/831", "merged": true, "mergeCommit": {"oid": "33b7cef9f718a0a6790de6fba8b2ec4a902f729d"}, "closed": true, "closedAt": "2020-07-01T22:08:45Z", "author": {"login": "timtay-microsoft"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcwutK0gH2gAyNDQyODg1ODA4OjkyYjZjODdhOThiYjkyZmJjOGEwMzA2MGRjYzliMzJmNjM1ZmMwMmU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcwxC34AFqTQ0MTIwNTU3MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "92b6c87a98bb92fbc8a03060dcc9b32f635fc02e", "author": {"user": {"login": "timtay-microsoft", "name": null}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/92b6c87a98bb92fbc8a03060dcc9b32f635fc02e", "committedDate": "2020-07-01T18:39:25Z", "message": "fix(iot-dev): Fix issue where clients couldn't queue messages while reconnecting\n\nInternalClient methods such as subscribeToTwinDesiredProperties check this isOpen method before queueing messages.\n\nThe previous behavior was to allow users to queue messages and send subscription messages even when the client is in a reconnecting state."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e862ba9d5ac7d5c36510eea133bb9f2bf2637093", "author": {"user": {"login": "timtay-microsoft", "name": null}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/e862ba9d5ac7d5c36510eea133bb9f2bf2637093", "committedDate": "2020-07-01T18:41:11Z", "message": "squash"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "67cf93e4dfa0337f44ac895972acf435cc0b4a9f", "author": {"user": {"login": "timtay-microsoft", "name": null}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/67cf93e4dfa0337f44ac895972acf435cc0b4a9f", "committedDate": "2020-07-01T18:46:59Z", "message": "Merge branch 'master' into timtay/isOpen"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxMTE3MjU2", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/831#pullrequestreview-441117256", "createdAt": "2020-07-01T18:49:28Z", "commit": {"oid": "67cf93e4dfa0337f44ac895972acf435cc0b4a9f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQxODo0OToyOFrOGrxjYA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQxODo0OToyOFrOGrxjYA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODU1MzgyNA==", "bodyText": "\ud83d\udc4d", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/831#discussion_r448553824", "createdAt": "2020-07-01T18:49:28Z", "author": {"login": "prmathur-microsoft"}, "path": "device/iot-device-client/src/main/java/com/microsoft/azure/sdk/iot/device/DeviceIO.java", "diffHunk": "@@ -400,12 +400,13 @@ public IotHubClientProtocol getProtocol()\n     /**\n      * Getter for the connection state.\n      *\n-     * @return a boolean true if the connection is open, or false if it is closed.\n+     * @return a boolean true if the connection is open or reconnecting, and false otherwise.\n      */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67cf93e4dfa0337f44ac895972acf435cc0b4a9f"}, "originalPosition": 37}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bac62bbd9401246e4a9c763e034d8004e633306e", "author": {"user": {"login": "timtay-microsoft", "name": null}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/bac62bbd9401246e4a9c763e034d8004e633306e", "committedDate": "2020-07-01T18:49:31Z", "message": "fixup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "28e037fb8d98ba0c71454d6d045ada2b1e232b4a", "author": {"user": {"login": "timtay-microsoft", "name": null}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/28e037fb8d98ba0c71454d6d045ada2b1e232b4a", "committedDate": "2020-07-01T18:49:48Z", "message": "Merge branch 'timtay/isOpen' of https://github.com/Azure/azure-iot-sdk-java into timtay/isOpen"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxMTE3NTY4", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/831#pullrequestreview-441117568", "createdAt": "2020-07-01T18:49:57Z", "commit": {"oid": "67cf93e4dfa0337f44ac895972acf435cc0b4a9f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQxODo0OTo1OFrOGrxkPQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQxODo0OTo1OFrOGrxkPQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODU1NDA0NQ==", "bodyText": "Do we already have e2e/UT reflecting this behavior?", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/831#discussion_r448554045", "createdAt": "2020-07-01T18:49:58Z", "author": {"login": "prmathur-microsoft"}, "path": "device/iot-device-client/src/main/java/com/microsoft/azure/sdk/iot/device/DeviceIO.java", "diffHunk": "@@ -146,7 +146,7 @@ void open() throws IOException\n     {\n         synchronized (this.stateLock)\n         {\n-            if (this.state == IotHubConnectionStatus.CONNECTED || this.state == IotHubConnectionStatus.DISCONNECTED_RETRYING)\n+            if (this.isOpen())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67cf93e4dfa0337f44ac895972acf435cc0b4a9f"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxMjA1NTcw", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/831#pullrequestreview-441205570", "createdAt": "2020-07-01T21:22:56Z", "commit": {"oid": "28e037fb8d98ba0c71454d6d045ada2b1e232b4a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1706, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}