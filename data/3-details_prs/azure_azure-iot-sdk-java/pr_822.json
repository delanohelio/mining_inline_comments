{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM5NTc2Mjk4", "number": 822, "title": "feat(iot-service): Add model id support for PnP", "bodyText": "", "createdAt": "2020-06-24T23:48:09Z", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/822", "merged": true, "mergeCommit": {"oid": "4b1ff98dec59f55c558cb87787ba61586a786e14"}, "closed": true, "closedAt": "2020-07-01T21:24:39Z", "author": {"login": "bikamani"}, "timelineItems": {"totalCount": 20, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcuOSVrAH2gAyNDM5NTc2Mjk4OjBlZGU2ZDZlMmU5YTZmNzcwNzY0ZDk3ZmM3MjE2YTcyYmU4M2MyZGU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcwxEH9AFqTQ0MTIwNjMyMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0ede6d6e2e9a6f770764d97fc7216a72be83c2de", "author": {"user": {"login": "bikamani", "name": null}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/0ede6d6e2e9a6f770764d97fc7216a72be83c2de", "committedDate": "2020-06-23T23:45:18Z", "message": "initial changes for service client and uts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "812e72dd9bbac2259b0c41d9d190e99f2e0467d2", "author": {"user": {"login": "bikamani", "name": null}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/812e72dd9bbac2259b0c41d9d190e99f2e0467d2", "committedDate": "2020-06-23T23:57:03Z", "message": "update comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8a1f4c33a74d37ee72d8f47e471667b4fde49b38", "author": {"user": {"login": "bikamani", "name": null}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/8a1f4c33a74d37ee72d8f47e471667b4fde49b38", "committedDate": "2020-06-24T18:53:19Z", "message": "remove unnecessary changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef495818e2e43470bb266f74402c4e5c5c2fa76b", "author": {"user": {"login": "bikamani", "name": null}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/ef495818e2e43470bb266f74402c4e5c5c2fa76b", "committedDate": "2020-06-24T21:00:14Z", "message": "remove device changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "950b7e27ea9a1c6a835766cac560aeefa5a3d6a2", "author": {"user": {"login": "bikamani", "name": null}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/950b7e27ea9a1c6a835766cac560aeefa5a3d6a2", "committedDate": "2020-06-24T23:36:27Z", "message": "Merge branch 'preview' into bikamani/modelIdPreview"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b252acb0f6153cc09799f96d95e41dd3714a22ce", "author": {"user": {"login": "bikamani", "name": null}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/b252acb0f6153cc09799f96d95e41dd3714a22ce", "committedDate": "2020-06-24T23:40:44Z", "message": " revert some changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "039b4f3ad0ebbffdb2d9583847f47563b9cf3d1b", "author": {"user": {"login": "bikamani", "name": null}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/039b4f3ad0ebbffdb2d9583847f47563b9cf3d1b", "committedDate": "2020-06-24T23:46:18Z", "message": "preview api version"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3MDgwOTkx", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/822#pullrequestreview-437080991", "createdAt": "2020-06-24T23:51:40Z", "commit": {"oid": "039b4f3ad0ebbffdb2d9583847f47563b9cf3d1b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQyMzo1MTo0MFrOGom27w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQyMzo1MTo0MFrOGom27w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTIzMjg3OQ==", "bodyText": "Unit Test to check whether this value is set correctly for Twin", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/822#discussion_r445232879", "createdAt": "2020-06-24T23:51:40Z", "author": {"login": "bikamani"}, "path": "service/iot-service-client/src/test/java/tests/unit/com/microsoft/azure/sdk/iot/service/devicetwin/DeviceTwinTest.java", "diffHunk": "@@ -946,20 +946,19 @@ public void nextRetrievesCorrectlyWithoutModuleId() throws IotHubException, IOEx\n         final String connectionString = \"testString\";\n         DeviceTwin testTwin = DeviceTwin.createFromConnectionString(connectionString);\n         final String expectedString = \"testJsonAsNext\";\n+        final String modelId = \"testModelId\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "039b4f3ad0ebbffdb2d9583847f47563b9cf3d1b"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8747d71ae55fdfc18f81e8f627984268aab6130f", "author": {"user": {"login": "bikamani", "name": null}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/8747d71ae55fdfc18f81e8f627984268aab6130f", "committedDate": "2020-06-25T00:26:39Z", "message": "fix twinstate uts"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwNDMyMjc0", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/822#pullrequestreview-440432274", "createdAt": "2020-06-30T22:35:20Z", "commit": {"oid": "8747d71ae55fdfc18f81e8f627984268aab6130f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQyMjozNToyMFrOGrQyiQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQyMjozNToyMFrOGrQyiQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODAxNzAzMw==", "bodyText": "Is this needed now that modelid sits on device twin?", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/822#discussion_r448017033", "createdAt": "2020-06-30T22:35:20Z", "author": {"login": "prmathur-microsoft"}, "path": "deps/src/main/java/com/microsoft/azure/sdk/iot/deps/twin/RegisterManager.java", "diffHunk": "@@ -123,6 +125,17 @@\n     @SerializedName(CAPABILITIES_TAG)\n     protected DeviceCapabilities capabilities = null;\n \n+    /**\n+     * The Digital Twin model id of the device and module\n+     * The value will be null for a non-pnp device.\n+     * The value will be null for a pnp device until the device connects and registers with the model id.\n+     */\n+    private static final String MODEL_ID = \"digital-twin-model-id\";\n+    @Expose(serialize = true, deserialize = true)\n+    @SerializedName(MODEL_ID)\n+    @Setter\n+    @Getter\n+    protected String modelId = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8747d71ae55fdfc18f81e8f627984268aab6130f"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwNDMzMTEz", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/822#pullrequestreview-440433113", "createdAt": "2020-06-30T22:37:27Z", "commit": {"oid": "8747d71ae55fdfc18f81e8f627984268aab6130f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQyMjozNzoyN1rOGrQ1Sw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQyMjozNzoyN1rOGrQ1Sw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODAxNzczOQ==", "bodyText": "Why is this check needed? What would happen if a null or empty is placed on parser.", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/822#discussion_r448017739", "createdAt": "2020-06-30T22:37:27Z", "author": {"login": "prmathur-microsoft"}, "path": "service/iot-service-client/src/main/java/com/microsoft/azure/sdk/iot/service/devicetwin/DeviceTwinDevice.java", "diffHunk": "@@ -536,6 +542,10 @@ public String toString()\n         {\n             thisDevice.append(\"Version: \" + this.getVersion() + \"\\n\");\n         }\n+        if(this.modelId != null && !this.modelId.isEmpty())\n+        {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8747d71ae55fdfc18f81e8f627984268aab6130f"}, "originalPosition": 32}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwNDM0NTA1", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/822#pullrequestreview-440434505", "createdAt": "2020-06-30T22:40:59Z", "commit": {"oid": "8747d71ae55fdfc18f81e8f627984268aab6130f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQyMjo0MDo1OVrOGrQ5qw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQyMjo0MDo1OVrOGrQ5qw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODAxODg1OQ==", "bodyText": "Questions : 1. Where is this verified to be working?\n2. Will e2e be another PR? Is the task captured?", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/822#discussion_r448018859", "createdAt": "2020-06-30T22:40:59Z", "author": {"login": "prmathur-microsoft"}, "path": "deps/src/main/java/com/microsoft/azure/sdk/iot/deps/twin/RegisterManager.java", "diffHunk": "@@ -8,6 +8,8 @@\n import com.microsoft.azure.sdk.iot.deps.serializer.ConfigurationContentParser;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8747d71ae55fdfc18f81e8f627984268aab6130f"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwNDM0NTc2", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/822#pullrequestreview-440434576", "createdAt": "2020-06-30T22:41:10Z", "commit": {"oid": "8747d71ae55fdfc18f81e8f627984268aab6130f"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwNDM1Mzky", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/822#pullrequestreview-440435392", "createdAt": "2020-06-30T22:43:08Z", "commit": {"oid": "8747d71ae55fdfc18f81e8f627984268aab6130f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQyMjo0MzowOFrOGrQ8rw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQyMjo0MzowOFrOGrQ8rw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODAxOTYzMQ==", "bodyText": "Same comment here", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/822#discussion_r448019631", "createdAt": "2020-06-30T22:43:08Z", "author": {"login": "prmathur-microsoft"}, "path": "service/iot-service-client/src/main/java/com/microsoft/azure/sdk/iot/service/devicetwin/DeviceTwin.java", "diffHunk": "@@ -504,6 +505,11 @@ private DeviceTwinDevice jsonToDeviceTwinDevice(String json) throws IOException\n         deviceTwinDevice.setConnectionState(twinState.getConnectionState());\n         deviceTwinDevice.setConfigurations(twinState.getConfigurations());\n \n+        if (twinState.getModelId() != null && !twinState.getModelId().isEmpty())\n+        {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8747d71ae55fdfc18f81e8f627984268aab6130f"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwNDM2NTU2", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/822#pullrequestreview-440436556", "createdAt": "2020-06-30T22:46:09Z", "commit": {"oid": "8747d71ae55fdfc18f81e8f627984268aab6130f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQyMjo0NjowOVrOGrRASw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQyMjo0NjowOVrOGrRASw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODAyMDU1NQ==", "bodyText": "unrelated to this PR, but why did we name this DeviceTwinDevice? Is it to separate a device twin from a module twin? Is it public? Can we rename it?", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/822#discussion_r448020555", "createdAt": "2020-06-30T22:46:09Z", "author": {"login": "abhipsaMisra"}, "path": "service/iot-service-client/src/main/java/com/microsoft/azure/sdk/iot/service/devicetwin/DeviceTwin.java", "diffHunk": "@@ -504,6 +505,11 @@ private DeviceTwinDevice jsonToDeviceTwinDevice(String json) throws IOException\n         deviceTwinDevice.setConnectionState(twinState.getConnectionState());\n         deviceTwinDevice.setConfigurations(twinState.getConfigurations());\n \n+        if (twinState.getModelId() != null && !twinState.getModelId().isEmpty())\n+        {\n+            deviceTwinDevice.setModelId(twinState.getModelId());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8747d71ae55fdfc18f81e8f627984268aab6130f"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxMDc0MDI5", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/822#pullrequestreview-441074029", "createdAt": "2020-07-01T17:41:08Z", "commit": {"oid": "8747d71ae55fdfc18f81e8f627984268aab6130f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxMDg2MDcw", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/822#pullrequestreview-441086070", "createdAt": "2020-07-01T17:59:38Z", "commit": {"oid": "8747d71ae55fdfc18f81e8f627984268aab6130f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c99db4361474ae17773827f48ebf863ec065e5f0", "author": {"user": {"login": "bikamani", "name": null}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/c99db4361474ae17773827f48ebf863ec065e5f0", "committedDate": "2020-07-01T18:17:16Z", "message": "remove null check"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxMTEzOTQx", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/822#pullrequestreview-441113941", "createdAt": "2020-07-01T18:44:09Z", "commit": {"oid": "c99db4361474ae17773827f48ebf863ec065e5f0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQxODo0NDoxMFrOGrxZEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQxODo0NDoxMFrOGrxZEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODU1MTE4Nw==", "bodyText": "Have you verified that this works for non PnP device before making the change?", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/822#discussion_r448551187", "createdAt": "2020-07-01T18:44:10Z", "author": {"login": "prmathur-microsoft"}, "path": "service/iot-service-client/src/main/java/com/microsoft/azure/sdk/iot/service/devicetwin/DeviceTwin.java", "diffHunk": "@@ -504,11 +504,7 @@ private DeviceTwinDevice jsonToDeviceTwinDevice(String json) throws IOException\n         deviceTwinDevice.setCapabilities(twinState.getCapabilities());\n         deviceTwinDevice.setConnectionState(twinState.getConnectionState());\n         deviceTwinDevice.setConfigurations(twinState.getConfigurations());\n-", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c99db4361474ae17773827f48ebf863ec065e5f0"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxMjA2MzIy", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/822#pullrequestreview-441206322", "createdAt": "2020-07-01T21:24:18Z", "commit": {"oid": "c99db4361474ae17773827f48ebf863ec065e5f0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1691, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}