{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg5NDY3NTk0", "number": 921, "title": "fix(iot-dev): fix issue where edgelet hsm requests did not support http", "bodyText": "Some edgelet uris are http requests to localhosts, so the SDK needs to support that.\nissue #914", "createdAt": "2020-09-18T18:12:13Z", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/921", "merged": true, "mergeCommit": {"oid": "7ea6d7fe20fbe632613eac2a9b65ba602c154197"}, "closed": true, "closedAt": "2020-09-21T17:12:52Z", "author": {"login": "timtay-microsoft"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdKJqF8AH2gAyNDg5NDY3NTk0OjI4MDNhNDkxMjc2Mjg2NzZjNjI3MmQxOWVlMjQxN2U3NTMwZWE5MDA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdLGBOLAH2gAyNDg5NDY3NTk0OjkxZDNlNzM2MTc0MmFkMDUwODExMGUzNWNiZTJiMjA3OWVlYjU3NmE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2803a49127628676c6272d19ee2417e7530ea900", "author": {"user": {"login": "timtay-microsoft", "name": null}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/2803a49127628676c6272d19ee2417e7530ea900", "committedDate": "2020-09-18T18:11:36Z", "message": "fix(iot-dev): fix issue where edgelet hsm requests did not support http\n\nSome edgelet uris are http requests to localhosts, so the SDK needs to support that.\n\nissue #914"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1c3dd086b6c5fbf8aa874a6045b26ff311d6a914", "author": {"user": {"login": "timtay-microsoft", "name": null}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/1c3dd086b6c5fbf8aa874a6045b26ff311d6a914", "committedDate": "2020-09-18T18:12:42Z", "message": "Merge branch 'master' into timtay/http"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkxNzc0MjMy", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/921#pullrequestreview-491774232", "createdAt": "2020-09-18T20:52:00Z", "commit": {"oid": "1c3dd086b6c5fbf8aa874a6045b26ff311d6a914"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQyMDo1MjowMFrOHUbj7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQyMDo1MjowMFrOHUbj7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTE4NTEzNA==", "bodyText": "you added javadocs so might as well add @param isHttps", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/921#discussion_r491185134", "createdAt": "2020-09-18T20:52:00Z", "author": {"login": "azabbasi"}, "path": "device/iot-device-client/src/main/java/com/microsoft/azure/sdk/iot/device/transport/https/HttpsRequest.java", "diffHunk": "@@ -93,13 +93,41 @@ public HttpsRequest(URL url, HttpsMethod method, byte[] body, String userAgentSt\n      * input/output streams could not be accessed.\n      */\n     public HttpsResponse send() throws TransportException\n+    {\n+        return send(true);\n+    }\n+\n+    /**\n+     * Executes the HTTPS request as an HTTP request. This method should only be called when a user supplied\n+     * url contains HTTP rather than HTTPS. Currently, this only happens from the {@link com.microsoft.azure.sdk.iot.device.hsm.HttpsHsmClient}\n+     * for some edge workload urls.\n+     *\n+     * @return an HTTPS response.\n+     *\n+     * @throws TransportException if the connection could not be established, or the\n+     * input/output streams could not be accessed.\n+     */\n+    public HttpsResponse sendAsHttpRequest() throws TransportException\n+    {\n+        return send(false);\n+    }\n+\n+    /**\n+     * Executes the HTTPS request.\n+     *\n+     * @return an HTTPS response.\n+     *\n+     * @throws TransportException if the connection could not be established, or the\n+     * input/output streams could not be accessed.\n+     */\n+    private HttpsResponse send(boolean isHttps) throws TransportException", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1c3dd086b6c5fbf8aa874a6045b26ff311d6a914"}, "originalPosition": 31}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkxNzc3Nzgw", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/921#pullrequestreview-491777780", "createdAt": "2020-09-18T20:59:22Z", "commit": {"oid": "1c3dd086b6c5fbf8aa874a6045b26ff311d6a914"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "873b0c83f1dd77f89001d66e1fedcc85ff927363", "author": {"user": {"login": "timtay-microsoft", "name": null}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/873b0c83f1dd77f89001d66e1fedcc85ff927363", "committedDate": "2020-09-18T21:35:16Z", "message": "squash"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "91d3e7361742ad0508110e35cbe2b2079eeb576a", "author": {"user": {"login": "timtay-microsoft", "name": null}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/91d3e7361742ad0508110e35cbe2b2079eeb576a", "committedDate": "2020-09-21T16:31:10Z", "message": "Merge branch 'master' into timtay/http"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1559, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}