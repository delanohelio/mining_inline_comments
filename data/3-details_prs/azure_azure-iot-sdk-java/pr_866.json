{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU1Mzk0ODg3", "number": 866, "title": "Merge master to preview and move pnp helper to device only", "bodyText": "Checklist\n\n I have read the [contribution guidelines] (https://github.com/Azure/azure-iot-sdk-java/blob/master/.github/CONTRIBUTING.md).\n I added or modified the existing tests to cover the change (we do not allow our test coverage to go down).\nIf this is a modification that impacts the behavior of a public API\n\n I edited the corresponding document in the devdoc folder and added or modified requirements.\n\n\nI submitted this PR against the correct branch:\n\n This pull-request is submitted against the master branch.\n\n\n\nReference/Link to the issue solved with this PR (if any)\nDescription of the problem\n\nDescription of the solution", "createdAt": "2020-07-22T22:54:42Z", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/866", "merged": true, "mergeCommit": {"oid": "29dfa5183b3c3d4d421981b305c88fcb33e4d210"}, "closed": true, "closedAt": "2020-07-24T00:05:26Z", "author": {"login": "prmathur-microsoft"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABczY9SYgH2gAyNDU1Mzk0ODg3OmI4ZjQwZGRmZDgzYzk2MDk5YjA4NjE3MzJjYWY4OTdiMTU2NTU3MTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc3jZhKABqjM1Nzc5MDk1NjA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b8f40ddfd83c96099b0861732caf897b15655718", "author": {"user": {"login": "timtay-microsoft", "name": null}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/b8f40ddfd83c96099b0861732caf897b15655718", "committedDate": "2020-07-10T01:00:53Z", "message": "refactor(e2e): Remove validation of file upload notifications from e2e tests (#846)\n\nThis step in the test has never been reliable from the service side, so there is no reason to keep testing it"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d09663374e3e0e544d089bcdae6b787af4393c2", "author": {"user": {"login": "abhipsaMisra", "name": "Abhipsa Misra"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/6d09663374e3e0e544d089bcdae6b787af4393c2", "committedDate": "2020-07-10T18:02:13Z", "message": "doc(samples): Add readme for pnp device samples (#857)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ca2881abb57c7dc58117f60918dd77610454fc29", "author": {"user": {"login": "timtay-microsoft", "name": null}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/ca2881abb57c7dc58117f60918dd77610454fc29", "committedDate": "2020-07-10T20:08:48Z", "message": "refactor(e2e): Add sdk logging to all test runs (#859)\n\nWhile system.out will get very busy thanks to our tests running in parallel, Azure Devops is smart enough to allow you to view the logs for each individual test run without other test run's logs getting in the mix."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fc2ed8189b341e4df47d49a07269067a88a123ab", "author": {"user": {"login": "timtay-microsoft", "name": null}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/fc2ed8189b341e4df47d49a07269067a88a123ab", "committedDate": "2020-07-11T15:32:51Z", "message": "fix(iot-dev): Fix issue with ordering of queue within amqp layer (#858)\n\nIf two messages are queued, one for subscribing to twin, and one for getting a twin, and the latter is queued first, then the SDK gets stuck trying to send the get twin request repeatedly without trying to send the subscribe message first.\r\n\r\nThis change ensures that any message that is failed to send is placed at the back of the queue and that the next message stays at the front of the queue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0efbf95e9085ac5bac64e1f285034208e8a45406", "author": {"user": {"login": "timtay-microsoft", "name": null}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/0efbf95e9085ac5bac64e1f285034208e8a45406", "committedDate": "2020-07-16T23:48:26Z", "message": "doc(readme): Update main readme with latest LTS pointers"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "96c3dc8649c771fba82c7921973c6ca7ae64447c", "author": {"user": {"login": "timtay-microsoft", "name": null}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/96c3dc8649c771fba82c7921973c6ca7ae64447c", "committedDate": "2020-07-16T23:48:26Z", "message": "fix(vsts): Fix smart gate not ignoring iothub/provisioning tests when told to skip them"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "52cf1b0182a30aa9ea31d41225536f0d026bd329", "author": {"user": {"login": "timtay-microsoft", "name": null}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/52cf1b0182a30aa9ea31d41225536f0d026bd329", "committedDate": "2020-07-17T01:04:42Z", "message": "refactor(iot-dev): Remove unused executor service\n\nIt spawned no threads and wasn't used anywhere, so it should be removed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aae4ae3d4b1b19a3eed35003f957b5d85d19c311", "author": {"user": {"login": "timtay-microsoft", "name": null}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/aae4ae3d4b1b19a3eed35003f957b5d85d19c311", "committedDate": "2020-07-17T01:04:42Z", "message": "refactor(vsts): longer timeout for waiting on android emulator to start"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "139a989fc085d0ef5f139607180ab959774bdee2", "author": {"user": {"login": "prmathur-microsoft", "name": "prmathur"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/139a989fc085d0ef5f139607180ab959774bdee2", "committedDate": "2020-07-22T16:46:23Z", "message": "docs(sample) : Move pnp helper to device"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7051f017a19da8cb1eb8a604fb8970c55e3eccf5", "author": {"user": {"login": "prmathur-microsoft", "name": "prmathur"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/7051f017a19da8cb1eb8a604fb8970c55e3eccf5", "committedDate": "2020-07-22T22:33:44Z", "message": "Merge branch 'master' of https://github.com/Azure/azure-iot-sdk-java into HEAD"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUzNzQzNjA3", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/866#pullrequestreview-453743607", "createdAt": "2020-07-22T23:04:59Z", "commit": {"oid": "c4458d1b092054dbe374706ce200db4817fd10d3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQyMzowNDo1OVrOG13NqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQyMzowNDo1OVrOG13NqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTEzMjMyOA==", "bodyText": "Is this defined somewhere? I see that it was removed from the root pom.", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/866#discussion_r459132328", "createdAt": "2020-07-22T23:04:59Z", "author": {"login": "vinagesh"}, "path": "device/iot-device-samples/pnp-device-sample/pom.xml", "diffHunk": "@@ -22,8 +22,14 @@\n         <gson.version>2.8.6</gson.version>\n         <slf4j-version>1.7.25</slf4j-version>\n         <maven-jar-plugin-version>3.1.0</maven-jar-plugin-version>\n+        <pnp-helper-version>1.0.0</pnp-helper-version>\n     </properties>\n     <dependencies>\n+        <dependency>\n+            <groupId>com.microsoft.azure.sdk.iot.pnp</groupId>\n+            <artifactId>pnp-helper</artifactId>\n+            <version>${pnp-helper-version}</version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c4458d1b092054dbe374706ce200db4817fd10d3"}, "originalPosition": 10}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUzNzQ0MTUz", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/866#pullrequestreview-453744153", "createdAt": "2020-07-22T23:06:27Z", "commit": {"oid": "c4458d1b092054dbe374706ce200db4817fd10d3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQyMzowNjoyN1rOG13PhA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQyMzowNjoyN1rOG13PhA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTEzMjgwNA==", "bodyText": "Can you add the comment we had in the helper which was showing how the patch json should look like?", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/866#discussion_r459132804", "createdAt": "2020-07-22T23:06:27Z", "author": {"login": "vinagesh"}, "path": "service/iot-service-samples/pnp-service-sample/temperature-controller-service-sample/src/main/java/samples/com/microsoft/azure/sdk/iot/service/TemperatureController.java", "diffHunk": "@@ -61,7 +64,10 @@ private static void GetAndUpdateTwin() throws IOException, IotHubException {\n         String propertyName = \"targetTemperature\";\n         double propertyValue = 60.2;\n         String componentName = \"thermostat1\";\n-        twin.setDesiredProperties(PnpHelper.CreateComponentPropertyPatch(propertyName, propertyValue, componentName));\n+        JsonObject patchJson = new JsonObject();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c4458d1b092054dbe374706ce200db4817fd10d3"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUzNzQ0MzAw", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/866#pullrequestreview-453744300", "createdAt": "2020-07-22T23:06:51Z", "commit": {"oid": "c4458d1b092054dbe374706ce200db4817fd10d3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQyMzowNjo1MVrOG13QEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQyMzowNjo1MVrOG13QEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTEzMjk0Nw==", "bodyText": "Can you add the comments we had for this as well in the helper earlier?", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/866#discussion_r459132947", "createdAt": "2020-07-22T23:06:51Z", "author": {"login": "vinagesh"}, "path": "service/iot-service-samples/pnp-service-sample/temperature-controller-service-sample/src/main/java/samples/com/microsoft/azure/sdk/iot/service/TemperatureController.java", "diffHunk": "@@ -89,7 +95,7 @@ private static void InvokeMethodOnRootLevel() throws IOException, IotHubExceptio\n     }\n \n     private static void InvokeMethodOnComponent() throws IOException, IotHubException {\n-        String methodToInvoke = PnpHelper.CreateComponentCommandName(\"thermostat1\", \"getMaxMinReport\");\n+        String methodToInvoke = \"thermostat1\" + \"*\" +  \"getMaxMinReport\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c4458d1b092054dbe374706ce200db4817fd10d3"}, "originalPosition": 42}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUzNzQ0NTI4", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/866#pullrequestreview-453744528", "createdAt": "2020-07-22T23:07:32Z", "commit": {"oid": "c4458d1b092054dbe374706ce200db4817fd10d3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "26cb521b6a2cd330215c5b6d0eea44d425715f60", "author": {"user": {"login": "prmathur-microsoft", "name": "prmathur"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/26cb521b6a2cd330215c5b6d0eea44d425715f60", "committedDate": "2020-07-22T23:25:49Z", "message": "docs(samples) : Remove service sample dependency on pnp helper"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c4458d1b092054dbe374706ce200db4817fd10d3", "author": {"user": {"login": "prmathur-microsoft", "name": "prmathur"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/c4458d1b092054dbe374706ce200db4817fd10d3", "committedDate": "2020-07-22T22:50:04Z", "message": "docs(samples) : Remove service sample dependency on pnp helper"}, "afterCommit": {"oid": "26cb521b6a2cd330215c5b6d0eea44d425715f60", "author": {"user": {"login": "prmathur-microsoft", "name": "prmathur"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/26cb521b6a2cd330215c5b6d0eea44d425715f60", "committedDate": "2020-07-22T23:25:49Z", "message": "docs(samples) : Remove service sample dependency on pnp helper"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1760, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}