{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcxMjc0NTkx", "number": 899, "title": "refactor(vsts): Automate javadoc generation", "bodyText": "generateJavadocs.ps1 will generate javadocs for the checked out branch (configurable to master, preview, etc as needed) then create a new branch based on the current gh-pages branch that contains the up to date javadocs. We'll still have to manually create a PR to merge that branch into gh-pages.\nTODO is for me to update our internal repo's release notes to include this new step, and to point to the release pipeline that will use this new generateJavadocs.ps1 script. Once this PR is merged in, I'll take care of that", "createdAt": "2020-08-20T22:33:52Z", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/899", "merged": true, "mergeCommit": {"oid": "eedd775138a57936f40a96a6c4b705af592e33e7"}, "closed": true, "closedAt": "2020-08-24T23:21:45Z", "author": {"login": "timtay-microsoft"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdA4Pn3gFqTQ3MjAzNTk2Mw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdCKTURABqjM2ODc0NTA2OTI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyMDM1OTYz", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/899#pullrequestreview-472035963", "createdAt": "2020-08-20T22:48:59Z", "commit": {"oid": "ea399b48097fcb36cd49f4b5b411c4fd0e642a5e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQyMjo0ODo1OVrOHEVzIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQyMjo0ODo1OVrOHEVzIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDMxMzUwNg==", "bodyText": "Is this intended to be commented out?", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/899#discussion_r474313506", "createdAt": "2020-08-20T22:48:59Z", "author": {"login": "abhipsaMisra"}, "path": "vsts/generateJavadocs.ps1", "diffHunk": "@@ -0,0 +1,93 @@\n+\ufeff# Copyright (c) Microsoft. All rights reserved.\n+# Licensed under the MIT license. See LICENSE file in the project root for full license information.\n+\n+# This script generates javadocs for the currently checked out branch and creates a new git branch based off of the current\n+# gh-pages branch. This new branch will contain the generated javadocs. After running this script, you will manually\n+# need to create a pull request from the new branch (\"gh-pages-<current date>\") to \"gh-pages\".\n+\n+# This script is designed to be used only by an Azure Devops release pipeline. Running it locally will not work\n+# due to some assumptions this script makes about working directory.\n+\n+git.exe config user.email $env:GitHubEmail\n+git.exe config user.name $env:GitHubName\n+\n+Write-Host \"Generating javadocs for current branch\"\n+cd _Azure_azure-iot-sdk-java\n+\n+#Some local samples rely on packages we don't publish publicly, so install everything locally before generating javadocs\n+Write-Host \"Installing jars locally\"\n+mvn `-DskipTests `-Dmaven.javadoc.skip=true install -T 2C\n+\n+Write-Host \"Generating javadocs, placing them in apidocs folder at the root of the repository\"\n+mvn javadoc:javadoc\n+\n+$date = Get-Date -Format \"MM_dd_yyyy\"\n+$newBranchName = \"gh-pages-\" + $date\n+\n+Write-Host \"Creating branch\" $newBranchName \" based off of branch gh-pages\"\n+git fetch\n+git branch $newBranchName gh-pages\n+\n+Write-Host \"Checking out new github pages branch, bringing over generated javadocs\"\n+git checkout $newBranchName\n+\n+# copy the generated javadocs to the expected folder structure, replacing/updating any existing files there\n+#Write-Host \"Copying generated javadocs to replace current javadocs\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ea399b48097fcb36cd49f4b5b411c4fd0e642a5e"}, "originalPosition": 35}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyMDM2MDM3", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/899#pullrequestreview-472036037", "createdAt": "2020-08-20T22:49:11Z", "commit": {"oid": "ea399b48097fcb36cd49f4b5b411c4fd0e642a5e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c9151fd2320db77353b0e31a83251ce6dcb2420e", "author": {"user": {"login": "timtay-microsoft", "name": null}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/c9151fd2320db77353b0e31a83251ce6dcb2420e", "committedDate": "2020-08-24T19:02:18Z", "message": "asdf"}, "afterCommit": {"oid": "2304f3de96841c5878a7dba378ec2df1d503ae40", "author": {"user": {"login": "timtay-microsoft", "name": null}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/2304f3de96841c5878a7dba378ec2df1d503ae40", "committedDate": "2020-08-24T19:19:45Z", "message": "refactor(vsts): Automate javadoc generation\n\ngenerateJavadocs.ps1 will generate javadocs for the checked out branch (configurable to master, preview, etc as needed) then create a new branch based on the current gh-pages branch that contains the up to date javadocs. We'll still have to manually create a PR to merge that branch into gh-pages"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1e86a52442bd0b98d5940a0666b13887dea1f45", "author": {"user": {"login": "timtay-microsoft", "name": null}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/d1e86a52442bd0b98d5940a0666b13887dea1f45", "committedDate": "2020-08-24T22:25:06Z", "message": "refactor(vsts): Automate javadoc generation\n\ngenerateJavadocs.ps1 will generate javadocs for the checked out branch (configurable to master, preview, etc as needed) then create a new branch based on the current gh-pages branch that contains the up to date javadocs. We'll still have to manually create a PR to merge that branch into gh-pages"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f563928769c6f26a1aea9ebc0208e99721e5ac42", "author": {"user": {"login": "timtay-microsoft", "name": null}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/f563928769c6f26a1aea9ebc0208e99721e5ac42", "committedDate": "2020-08-24T22:25:06Z", "message": "refactor(e2e): Use GPU for android emulation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6dad51de4f2e4166b0a119f2e132859d4b111e05", "author": {"user": {"login": "timtay-microsoft", "name": null}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/6dad51de4f2e4166b0a119f2e132859d4b111e05", "committedDate": "2020-08-24T21:40:47Z", "message": "Merge branch 'master' into timtay/masterTest"}, "afterCommit": {"oid": "f563928769c6f26a1aea9ebc0208e99721e5ac42", "author": {"user": {"login": "timtay-microsoft", "name": null}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/f563928769c6f26a1aea9ebc0208e99721e5ac42", "committedDate": "2020-08-24T22:25:06Z", "message": "refactor(e2e): Use GPU for android emulation"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1544, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}