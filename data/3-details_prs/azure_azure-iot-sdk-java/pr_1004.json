{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI0MzUwNDAz", "number": 1004, "title": "fix(documentation): Adding conditional docs generation", "bodyText": "Checklist\n\n I have read the [contribution guidelines] (https://github.com/Azure/azure-iot-sdk-java/blob/master/.github/CONTRIBUTING.md).\n I added or modified the existing tests to cover the change (we do not allow our test coverage to go down).\nIf this is a modification that impacts the behavior of a public API\n\n I edited the corresponding document in the devdoc folder and added or modified requirements.\n\n\nI submitted this PR against the correct branch:\n\n This pull-request is submitted against the master branch.\n\n\n\nReference/Link to the issue solved with this PR (if any)\nDescription of the problem\nAs we have created a new preview branch, all packages have the same version as master and not the latest preview version. This leads to generation of incorrect docs as we have only released a new device-client preview. To ensure that the gh-pages are only updated for the corresponding package, I have added a conditional generation which can be set in the pipeline. This way, we can just generate the required documentation and keep the others ones as is.\nThis change will go to preview when I merge master to preview.\nPipeline now has the following options. They will be used once this PR is checked in.", "createdAt": "2020-11-20T01:35:04Z", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/1004", "merged": true, "mergeCommit": {"oid": "320ab06a3359c69f67f4d4fb7bd0a4fc508b61cc"}, "closed": true, "closedAt": "2020-11-20T19:01:00Z", "author": {"login": "vinagesh"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdeNMTXABqjQwMTg2ODYwMzk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdeNeFDgFqTUzNTAxNzk4Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dd92f4cb1f64a24bd42d05884ad6807805eb20cc", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/dd92f4cb1f64a24bd42d05884ad6807805eb20cc", "committedDate": "2020-11-20T01:32:11Z", "message": "fix(documentation): Adding conditional docs generation"}, "afterCommit": {"oid": "53e690776d49ee3e536bfc685e72aabea460c82b", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/53e690776d49ee3e536bfc685e72aabea460c82b", "committedDate": "2020-11-20T01:37:01Z", "message": "fix(documentation): Adding conditional docs generation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e923ab6ea891ddd1007c8675d2ed6ede64979a2", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/8e923ab6ea891ddd1007c8675d2ed6ede64979a2", "committedDate": "2020-11-20T01:47:56Z", "message": "fix(documentation): Adding conditional docs generation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "53e690776d49ee3e536bfc685e72aabea460c82b", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/53e690776d49ee3e536bfc685e72aabea460c82b", "committedDate": "2020-11-20T01:37:01Z", "message": "fix(documentation): Adding conditional docs generation"}, "afterCommit": {"oid": "8e923ab6ea891ddd1007c8675d2ed6ede64979a2", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/8e923ab6ea891ddd1007c8675d2ed6ede64979a2", "committedDate": "2020-11-20T01:47:56Z", "message": "fix(documentation): Adding conditional docs generation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM1MDE3MTc1", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/1004#pullrequestreview-535017175", "createdAt": "2020-11-20T01:54:08Z", "commit": {"oid": "8e923ab6ea891ddd1007c8675d2ed6ede64979a2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQwMTo1NDowOFrOH26hJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQwMTo1NDowOFrOH26hJA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzM0MzkwOA==", "bodyText": "There are several clients within the provisioning folder, so this could be more specific. We have provisioning device client, provisioning service client, security provider, etc.", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/1004#discussion_r527343908", "createdAt": "2020-11-20T01:54:08Z", "author": {"login": "timtay-microsoft"}, "path": "vsts/generate_javadocs_branch.ps1", "diffHunk": "@@ -104,10 +114,26 @@ function CreateJavadocReleaseBranch($GitHubName, $GitHubEmail, $Sources, $Folder\n \n     # Move the generated content to the correct folder. The folder will be different for master and preview branches.\n     New-Item -Path ../$FolderName -ItemType Directory\n-    Move-Item -Force -Path ..\\deps -Destination ..\\$FolderName\\deps\n-    Move-Item -Force -Path ..\\device -Destination ..\\$FolderName\\device\n-    Move-Item -Force -Path ..\\service -Destination ..\\$FolderName\\service\n-    Move-Item -Force -Path ..\\provisioning -Destination ..\\$FolderName\\provisioning\n+\n+    if($UpdateDepsDocs)\n+    {\n+        Move-Item -Force -Path ..\\deps -Destination ..\\$FolderName\\deps\n+    }\n+\n+    if($UpdateDeviceClientDocs)\n+    {\n+        Move-Item -Force -Path ..\\device -Destination ..\\$FolderName\\device\n+    }\n+\n+    if($UpdateServiceClientDocs)\n+    {\n+        Move-Item -Force -Path ..\\service -Destination ..\\$FolderName\\service\n+    }\n+\n+    if($UpdateProvisioningClientDocs)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e923ab6ea891ddd1007c8675d2ed6ede64979a2"}, "originalPosition": 50}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM1MDE3OTgy", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/1004#pullrequestreview-535017982", "createdAt": "2020-11-20T01:56:35Z", "commit": {"oid": "8e923ab6ea891ddd1007c8675d2ed6ede64979a2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1510, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}