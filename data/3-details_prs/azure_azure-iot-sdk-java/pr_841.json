{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ1MDU4ODU1", "number": 841, "title": "feat(samples): Updating and adding samples for pnp summer refresh", "bodyText": "Checklist\n\n I have read the [contribution guidelines] (https://github.com/Azure/azure-iot-sdk-java/blob/master/.github/CONTRIBUTING.md).\n I added or modified the existing tests to cover the change (we do not allow our test coverage to go down).\nIf this is a modification that impacts the behavior of a public API\n\n I edited the corresponding document in the devdoc folder and added or modified requirements.\n\n\nI submitted this PR against the correct branch:\n\n This pull-request is submitted against the master branch.\n\n\n\nDescription of the solution\n\nAdding samples for pnp device with component based on model - https://github.com/Azure/opendigitaltwins-dtdl/blob/master/DTDL/v2/samples/TemperatureController.json\nUpdated sample for pnp device without component based on model - https://github.com/Azure/opendigitaltwins-dtdl/blob/master/DTDL/v2/samples/Thermostat.json", "createdAt": "2020-07-06T23:54:55Z", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/841", "merged": true, "mergeCommit": {"oid": "2d5a217421ffb5669584f99d71a3d2891ddf5e07"}, "closed": true, "closedAt": "2020-07-08T23:21:28Z", "author": {"login": "vinagesh"}, "timelineItems": {"totalCount": 48, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcyaZgMgBqjM1MTgwNjY3MjU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABczC6BGAFqTQ0NTE5MTI1Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1d5e61deb75945c9a80407986c28e0d855ef855a", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/1d5e61deb75945c9a80407986c28e0d855ef855a", "committedDate": "2020-07-06T23:49:29Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}, "afterCommit": {"oid": "4ba9a31e1c79dc563aceeddf50162f3b90412ef0", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/4ba9a31e1c79dc563aceeddf50162f3b90412ef0", "committedDate": "2020-07-07T00:07:24Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4ba9a31e1c79dc563aceeddf50162f3b90412ef0", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/4ba9a31e1c79dc563aceeddf50162f3b90412ef0", "committedDate": "2020-07-07T00:07:24Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}, "afterCommit": {"oid": "dd62370873bf38400b380b8f1aaff18e9c1bc85e", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/dd62370873bf38400b380b8f1aaff18e9c1bc85e", "committedDate": "2020-07-07T00:19:48Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dd62370873bf38400b380b8f1aaff18e9c1bc85e", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/dd62370873bf38400b380b8f1aaff18e9c1bc85e", "committedDate": "2020-07-07T00:19:48Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}, "afterCommit": {"oid": "44d2343ec5695a951a46922aadc5a422f6aabba3", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/44d2343ec5695a951a46922aadc5a422f6aabba3", "committedDate": "2020-07-07T00:24:44Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "44d2343ec5695a951a46922aadc5a422f6aabba3", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/44d2343ec5695a951a46922aadc5a422f6aabba3", "committedDate": "2020-07-07T00:24:44Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}, "afterCommit": {"oid": "9238951d14854658271888e220a85cf9300f4cad", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/9238951d14854658271888e220a85cf9300f4cad", "committedDate": "2020-07-07T00:25:10Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQzNDg3Nzc0", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/841#pullrequestreview-443487774", "createdAt": "2020-07-07T00:36:05Z", "commit": {"oid": "9238951d14854658271888e220a85cf9300f4cad"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwMDozNjowNlrOGtrToQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwMDozNjowNlrOGtrToQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDU0ODY0MQ==", "bodyText": "I was not very clear if helper meant helper class or method. Will move it to a class if that is what it means.", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/841#discussion_r450548641", "createdAt": "2020-07-07T00:36:06Z", "author": {"login": "vinagesh"}, "path": "service/iot-service-samples/pnp-service-sample/src/main/java/samples/com/microsoft/azure/sdk/iot/TemperatureController.java", "diffHunk": "@@ -0,0 +1,143 @@\n+package samples.com.microsoft.azure.sdk.iot;\n+\n+import com.google.gson.JsonElement;\n+import com.google.gson.JsonObject;\n+import com.microsoft.azure.sdk.iot.service.devicetwin.*;\n+import com.microsoft.azure.sdk.iot.service.exceptions.IotHubException;\n+\n+import javax.json.Json;\n+import java.io.IOException;\n+import java.time.ZoneOffset;\n+import java.time.ZonedDateTime;\n+import java.time.format.DateTimeFormatter;\n+import java.util.*;\n+import java.util.concurrent.TimeUnit;\n+\n+// This sample uses the model - https://github.com/Azure/opendigitaltwins-dtdl/blob/master/DTDL/v2/samples/TemperatureController.json\n+public class TemperatureController {\n+    // Get connection string and device id inputs\n+    private static final String hubConnectionString  = \"HostName=summerrelease-test-04.private.azure-devices-int.net;SharedAccessKeyName=iothubowner;SharedAccessKey=lkm4Gvm5gN9nWDgK4Cwwwgj47q/8w1qxgF5bRbi6yNM=\";\n+    private static final String deviceId = \"vinageshpnpdevice1\";\n+\n+    private static DeviceTwin twinClient;\n+    private static DeviceMethod methodClient;\n+\n+    public static void main(String[] args) throws Exception {\n+        RunSample();\n+    }\n+\n+    private static void RunSample() throws IOException, IotHubException {\n+        System.out.println(\"Initialize the service client.\");\n+        InitializeServiceClient();\n+\n+        System.out.println(\"Get Twin model Id and Update Twin\");\n+        GetAndUpdateTwin();\n+\n+        System.out.println(\"Invoke a method on component\");\n+        InvokeMethodOnComponent();\n+\n+        System.out.println(\"Invoke a method on root level\");\n+        InvokeMethodOnRootLevel();\n+    }\n+\n+    private static void InitializeServiceClient() throws IOException {\n+        twinClient = DeviceTwin.createFromConnectionString(hubConnectionString);\n+        methodClient = DeviceMethod.createFromConnectionString(hubConnectionString);\n+    }\n+\n+    private static void GetAndUpdateTwin() throws IOException, IotHubException {\n+        // Get a Twin and retrieves model Id set by Device client\n+        DeviceTwinDevice twin = new DeviceTwinDevice(deviceId);\n+        twinClient.getTwin(twin);\n+        System.out.println(\"Model Id of this Twin is: \" + twin.getModelId());\n+\n+        // Update the twin - Update the thermostat1 component\n+        twin.setDesiredProperties(CreatePropertyPatch());\n+        System.out.println(\"Updating Device twin property\");\n+        twinClient.updateTwin(twin);\n+\n+        twinClient.getTwin(twin);\n+        System.out.println(\"The updated desired properties: \" + twin.getDesiredProperties().iterator().next().getValue());\n+    }\n+\n+    private static Set<Pair> CreatePropertyPatch()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9238951d14854658271888e220a85cf9300f4cad"}, "originalPosition": 63}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9238951d14854658271888e220a85cf9300f4cad", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/9238951d14854658271888e220a85cf9300f4cad", "committedDate": "2020-07-07T00:25:10Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}, "afterCommit": {"oid": "6cf554f3d8a187ab1b4fab44f5bc2c64188abd26", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/6cf554f3d8a187ab1b4fab44f5bc2c64188abd26", "committedDate": "2020-07-07T04:18:45Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6cf554f3d8a187ab1b4fab44f5bc2c64188abd26", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/6cf554f3d8a187ab1b4fab44f5bc2c64188abd26", "committedDate": "2020-07-07T04:18:45Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}, "afterCommit": {"oid": "050ff763f171434c4c5dcedf5cd2ddfe1525ae8e", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/050ff763f171434c4c5dcedf5cd2ddfe1525ae8e", "committedDate": "2020-07-07T04:21:34Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQzNTU0Mzc3", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/841#pullrequestreview-443554377", "createdAt": "2020-07-07T04:30:39Z", "commit": {"oid": "050ff763f171434c4c5dcedf5cd2ddfe1525ae8e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwNDozMDozOVrOGtuuWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwNDozMDozOVrOGtuuWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDYwNDYzMg==", "bodyText": "I'm not very sure of this in java. The IDE automatically added 1.0.1. Is this the latest? All the existing flattened.pom have this value and other places I see this:\n<dependency> <groupId>com.microsoft.azure.sdk.iot</groupId> <artifactId>iot-service-client-preview</artifactId> <version>${iot-service-client-version}</version> </dependency>", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/841#discussion_r450604632", "createdAt": "2020-07-07T04:30:39Z", "author": {"login": "vinagesh"}, "path": "pnp-helper/pom.xml", "diffHunk": "@@ -0,0 +1,29 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+    <parent>\n+        <artifactId>iot-sdk-java</artifactId>\n+        <groupId>com.microsoft.azure.sdk.iot</groupId>\n+        <version>0.26.0</version>\n+    </parent>\n+    <modelVersion>4.0.0</modelVersion>\n+\n+    <artifactId>pnp-helper</artifactId>\n+    <dependencies>\n+        <dependency>\n+            <groupId>com.google.code.gson</groupId>\n+            <artifactId>gson</artifactId>\n+            <version>2.8.1</version>\n+            <scope>compile</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>com.microsoft.azure.sdk.iot</groupId>\n+            <artifactId>iot-service-client-preview</artifactId>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "050ff763f171434c4c5dcedf5cd2ddfe1525ae8e"}, "originalPosition": 22}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "050ff763f171434c4c5dcedf5cd2ddfe1525ae8e", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/050ff763f171434c4c5dcedf5cd2ddfe1525ae8e", "committedDate": "2020-07-07T04:21:34Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}, "afterCommit": {"oid": "952a50df9925165c507a7c1c603be60c7047453b", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/952a50df9925165c507a7c1c603be60c7047453b", "committedDate": "2020-07-07T04:34:55Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "952a50df9925165c507a7c1c603be60c7047453b", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/952a50df9925165c507a7c1c603be60c7047453b", "committedDate": "2020-07-07T04:34:55Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}, "afterCommit": {"oid": "16d10631d7b72ba1749830505b4e97ba0f193563", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/16d10631d7b72ba1749830505b4e97ba0f193563", "committedDate": "2020-07-07T04:35:13Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "16d10631d7b72ba1749830505b4e97ba0f193563", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/16d10631d7b72ba1749830505b4e97ba0f193563", "committedDate": "2020-07-07T04:35:13Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}, "afterCommit": {"oid": "fc954c6abad94f033f091d8f67dde3dd770b7ee1", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/fc954c6abad94f033f091d8f67dde3dd770b7ee1", "committedDate": "2020-07-07T04:36:39Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fc954c6abad94f033f091d8f67dde3dd770b7ee1", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/fc954c6abad94f033f091d8f67dde3dd770b7ee1", "committedDate": "2020-07-07T04:36:39Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}, "afterCommit": {"oid": "0ff65e4c3ec563484d4ef11bf4a1059380bb434d", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/0ff65e4c3ec563484d4ef11bf4a1059380bb434d", "committedDate": "2020-07-07T04:42:40Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0ff65e4c3ec563484d4ef11bf4a1059380bb434d", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/0ff65e4c3ec563484d4ef11bf4a1059380bb434d", "committedDate": "2020-07-07T04:42:40Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}, "afterCommit": {"oid": "93a4d39192526f7219c5d4595506fdc0d732b10f", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/93a4d39192526f7219c5d4595506fdc0d732b10f", "committedDate": "2020-07-07T04:43:44Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "93a4d39192526f7219c5d4595506fdc0d732b10f", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/93a4d39192526f7219c5d4595506fdc0d732b10f", "committedDate": "2020-07-07T04:43:44Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}, "afterCommit": {"oid": "e64fed3858c542aa3f80aed1117da27df72da933", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/e64fed3858c542aa3f80aed1117da27df72da933", "committedDate": "2020-07-07T04:45:11Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e64fed3858c542aa3f80aed1117da27df72da933", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/e64fed3858c542aa3f80aed1117da27df72da933", "committedDate": "2020-07-07T04:45:11Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}, "afterCommit": {"oid": "e7594692868ffedc7340aceb7a986078f95c52d0", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/e7594692868ffedc7340aceb7a986078f95c52d0", "committedDate": "2020-07-07T04:45:48Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0MDczNTI2", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/841#pullrequestreview-444073526", "createdAt": "2020-07-07T16:47:21Z", "commit": {"oid": "e7594692868ffedc7340aceb7a986078f95c52d0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QxNjo0NzoyMVrOGuHHCw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QxNjo0NzoyMVrOGuHHCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTAwNDE3MQ==", "bodyText": "I have plaved the helper under the package com.microsoft.azure.sdk.iot.pnphelpers: https://github.com/Azure/azure-iot-sdk-java/blob/abmisr/thermostat/pnp/src/main/java/com/microsoft/azure/sdk/iot/pnphelpers/PnpHelper.java\nWhat do you think of this as the folder/ package structure?\nI would rather not have the word \"samples\" in the package and folder path.", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/841#discussion_r451004171", "createdAt": "2020-07-07T16:47:21Z", "author": {"login": "abhipsaMisra"}, "path": "pnp-helper/src/main/java/samples/com/microsoft/azure/sdk/iot/helper/PnpHelper.java", "diffHunk": "@@ -0,0 +1,73 @@\n+package samples.com.microsoft.azure.sdk.iot.helper;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e7594692868ffedc7340aceb7a986078f95c52d0"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0MDc4Mzcx", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/841#pullrequestreview-444078371", "createdAt": "2020-07-07T16:53:29Z", "commit": {"oid": "e7594692868ffedc7340aceb7a986078f95c52d0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QxNjo1MzoyOVrOGuHVGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QxNjo1MzoyOVrOGuHVGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTAwNzc3MQ==", "bodyText": "nit: this can also be done in a single statement:\nreturn Collections.singleton(new Pair(properyName, propertyValue));", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/841#discussion_r451007771", "createdAt": "2020-07-07T16:53:29Z", "author": {"login": "abhipsaMisra"}, "path": "pnp-helper/src/main/java/samples/com/microsoft/azure/sdk/iot/helper/PnpHelper.java", "diffHunk": "@@ -0,0 +1,73 @@\n+package samples.com.microsoft.azure.sdk.iot.helper;\n+\n+import com.google.gson.JsonObject;\n+import com.microsoft.azure.sdk.iot.service.devicetwin.*;\n+\n+import java.util.HashMap;\n+import java.util.HashSet;\n+import java.util.Map;\n+import java.util.Set;\n+\n+public class PnpHelper {\n+    public static Set<Pair> CreatePropertyPatch(String propertyName, String propertyValue)\n+    {\n+        // The update patch for a property on the root level or a device without component should be in the format:\n+        // \"desired\": {\n+        //    \"propertyName\": {\n+        //      \"value\": \"hello\"\n+        //  }\n+        Set<Pair> desiredProperties = new HashSet<Pair>();\n+        desiredProperties.add(new Pair(propertyName, propertyValue));\n+        return desiredProperties;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e7594692868ffedc7340aceb7a986078f95c52d0"}, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0MDc4OTAx", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/841#pullrequestreview-444078901", "createdAt": "2020-07-07T16:54:10Z", "commit": {"oid": "e7594692868ffedc7340aceb7a986078f95c52d0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QxNjo1NDoxMFrOGuHWfA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QxNjo1NDoxMFrOGuHWfA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTAwODEyNA==", "bodyText": "nice!", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/841#discussion_r451008124", "createdAt": "2020-07-07T16:54:10Z", "author": {"login": "abhipsaMisra"}, "path": "pnp-helper/src/main/java/samples/com/microsoft/azure/sdk/iot/helper/PnpHelper.java", "diffHunk": "@@ -0,0 +1,73 @@\n+package samples.com.microsoft.azure.sdk.iot.helper;\n+\n+import com.google.gson.JsonObject;\n+import com.microsoft.azure.sdk.iot.service.devicetwin.*;\n+\n+import java.util.HashMap;\n+import java.util.HashSet;\n+import java.util.Map;\n+import java.util.Set;\n+\n+public class PnpHelper {\n+    public static Set<Pair> CreatePropertyPatch(String propertyName, String propertyValue)\n+    {\n+        // The update patch for a property on the root level or a device without component should be in the format:\n+        // \"desired\": {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e7594692868ffedc7340aceb7a986078f95c52d0"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0MDc5MzA5", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/841#pullrequestreview-444079309", "createdAt": "2020-07-07T16:54:39Z", "commit": {"oid": "e7594692868ffedc7340aceb7a986078f95c52d0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QxNjo1NDo0MFrOGuHXtg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QxNjo1NDo0MFrOGuHXtg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTAwODQzOA==", "bodyText": "I've added doc comments for these public helpers: https://github.com/Azure/azure-iot-sdk-java/blob/abmisr/thermostat/pnp/src/main/java/com/microsoft/azure/sdk/iot/pnphelpers/PnpHelper.java#L66-L76", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/841#discussion_r451008438", "createdAt": "2020-07-07T16:54:40Z", "author": {"login": "abhipsaMisra"}, "path": "pnp-helper/src/main/java/samples/com/microsoft/azure/sdk/iot/helper/PnpHelper.java", "diffHunk": "@@ -0,0 +1,73 @@\n+package samples.com.microsoft.azure.sdk.iot.helper;\n+\n+import com.google.gson.JsonObject;\n+import com.microsoft.azure.sdk.iot.service.devicetwin.*;\n+\n+import java.util.HashMap;\n+import java.util.HashSet;\n+import java.util.Map;\n+import java.util.Set;\n+\n+public class PnpHelper {\n+    public static Set<Pair> CreatePropertyPatch(String propertyName, String propertyValue)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e7594692868ffedc7340aceb7a986078f95c52d0"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0MDgwMTY3", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/841#pullrequestreview-444080167", "createdAt": "2020-07-07T16:55:45Z", "commit": {"oid": "e7594692868ffedc7340aceb7a986078f95c52d0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QxNjo1NTo0NVrOGuHaNg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QxNjo1NTo0NVrOGuHaNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTAwOTA3OA==", "bodyText": "nit: same, can be replaced by returning Collections.singleton().", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/841#discussion_r451009078", "createdAt": "2020-07-07T16:55:45Z", "author": {"login": "abhipsaMisra"}, "path": "pnp-helper/src/main/java/samples/com/microsoft/azure/sdk/iot/helper/PnpHelper.java", "diffHunk": "@@ -0,0 +1,73 @@\n+package samples.com.microsoft.azure.sdk.iot.helper;\n+\n+import com.google.gson.JsonObject;\n+import com.microsoft.azure.sdk.iot.service.devicetwin.*;\n+\n+import java.util.HashMap;\n+import java.util.HashSet;\n+import java.util.Map;\n+import java.util.Set;\n+\n+public class PnpHelper {\n+    public static Set<Pair> CreatePropertyPatch(String propertyName, String propertyValue)\n+    {\n+        // The update patch for a property on the root level or a device without component should be in the format:\n+        // \"desired\": {\n+        //    \"propertyName\": {\n+        //      \"value\": \"hello\"\n+        //  }\n+        Set<Pair> desiredProperties = new HashSet<Pair>();\n+        desiredProperties.add(new Pair(propertyName, propertyValue));\n+        return desiredProperties;\n+    }\n+\n+    public static Set<Pair> CreatePropertyPatch(String propertyName, String propertyValue, String componentName)\n+    {\n+        // The update patch for a property of a component should be in the format:\n+        // \"desired\": {\n+        //    \"componentName\": {\n+        //      \"__t\": \"c\",\n+        //      \"propertyName\": {\n+        //        \"value\": \"hello\"\n+        //      }\n+        //  }\n+        JsonObject patchJson = new JsonObject();\n+        // The following property is required to specify that the update is for a component and not root level.\n+        patchJson.addProperty(\"__t\", \"c\");\n+        patchJson.addProperty(propertyName, propertyValue);\n+\n+        Set<Pair> desiredProperties = new HashSet<Pair>();\n+        Pair desiredProperty = new Pair(\n+                componentName,\n+                patchJson);\n+        desiredProperties.add(desiredProperty);\n+\n+        return desiredProperties;\n+    }\n+\n+    public static Map<String, Object> CreateMethodPayload(String methodValue)\n+    {\n+        // The method payload should be in the following format:\n+        // \"payload\": {\n+        //   \"commandRequest\": {\n+        //   \"value\": \"hello\"\n+        //  }\n+        JsonObject commandPayload = new JsonObject();\n+        commandPayload.addProperty(\"value\", methodValue);\n+        Map<String, Object> payload = new HashMap<String, Object>()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e7594692868ffedc7340aceb7a986078f95c52d0"}, "originalPosition": 57}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0MDgwODg3", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/841#pullrequestreview-444080887", "createdAt": "2020-07-07T16:56:41Z", "commit": {"oid": "e7594692868ffedc7340aceb7a986078f95c52d0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QxNjo1Njo0MVrOGuHclQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QxNjo1Njo0MVrOGuHclQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTAwOTY4NQ==", "bodyText": "I like this name, I had named the module \"pnp\" in my PR, but I can take this change if your PR goes in first.", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/841#discussion_r451009685", "createdAt": "2020-07-07T16:56:41Z", "author": {"login": "abhipsaMisra"}, "path": "pom.xml", "diffHunk": "@@ -20,6 +20,7 @@\n         <module>iot-e2e-tests</module>\n         <module>provisioning</module>\n         <module>digital-twin</module>\n+        <module>pnp-helper</module>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e7594692868ffedc7340aceb7a986078f95c52d0"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0MDgyNDY3", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/841#pullrequestreview-444082467", "createdAt": "2020-07-07T16:58:39Z", "commit": {"oid": "e7594692868ffedc7340aceb7a986078f95c52d0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QxNjo1ODozOVrOGuHhXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QxNjo1ODozOVrOGuHhXg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTAxMDkxMA==", "bodyText": "I see these samples as 2 separate java projects, each having their own pom file. That way, they are completely independent of each other.", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/841#discussion_r451010910", "createdAt": "2020-07-07T16:58:39Z", "author": {"login": "abhipsaMisra"}, "path": "service/iot-service-samples/pnp-service-sample/pom.xml", "diffHunk": "@@ -10,6 +10,14 @@\n     <modelVersion>4.0.0</modelVersion>\n \n     <artifactId>pnp-service-sample</artifactId>\n+    <dependencies>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e7594692868ffedc7340aceb7a986078f95c52d0"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0MDg0MjI5", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/841#pullrequestreview-444084229", "createdAt": "2020-07-07T17:00:48Z", "commit": {"oid": "e7594692868ffedc7340aceb7a986078f95c52d0"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e7594692868ffedc7340aceb7a986078f95c52d0", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/e7594692868ffedc7340aceb7a986078f95c52d0", "committedDate": "2020-07-07T04:45:48Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}, "afterCommit": {"oid": "6766c1a29aad186a2bd0e74313f3d6b33b316989", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/6766c1a29aad186a2bd0e74313f3d6b33b316989", "committedDate": "2020-07-07T19:38:33Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6766c1a29aad186a2bd0e74313f3d6b33b316989", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/6766c1a29aad186a2bd0e74313f3d6b33b316989", "committedDate": "2020-07-07T19:38:33Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}, "afterCommit": {"oid": "ff44191af8decfeb9db7e3be50d73f1cad548b50", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/ff44191af8decfeb9db7e3be50d73f1cad548b50", "committedDate": "2020-07-07T19:41:40Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ff44191af8decfeb9db7e3be50d73f1cad548b50", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/ff44191af8decfeb9db7e3be50d73f1cad548b50", "committedDate": "2020-07-07T19:41:40Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}, "afterCommit": {"oid": "9ff8666c13ecea440252a043811f91c3369e9de0", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/9ff8666c13ecea440252a043811f91c3369e9de0", "committedDate": "2020-07-07T22:37:21Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9ff8666c13ecea440252a043811f91c3369e9de0", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/9ff8666c13ecea440252a043811f91c3369e9de0", "committedDate": "2020-07-07T22:37:21Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}, "afterCommit": {"oid": "fa2010ae9634a9c42fbb454b4255e59b6fb737c8", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/fa2010ae9634a9c42fbb454b4255e59b6fb737c8", "committedDate": "2020-07-08T00:41:30Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fa2010ae9634a9c42fbb454b4255e59b6fb737c8", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/fa2010ae9634a9c42fbb454b4255e59b6fb737c8", "committedDate": "2020-07-08T00:41:30Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}, "afterCommit": {"oid": "d57d2e67bf52dd6fc34ae097f1939e1bbf4a5a15", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/d57d2e67bf52dd6fc34ae097f1939e1bbf4a5a15", "committedDate": "2020-07-08T00:54:01Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d57d2e67bf52dd6fc34ae097f1939e1bbf4a5a15", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/d57d2e67bf52dd6fc34ae097f1939e1bbf4a5a15", "committedDate": "2020-07-08T00:54:01Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}, "afterCommit": {"oid": "b9f61d7e2bc77a10762052cf57c0ebd1226341f6", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/b9f61d7e2bc77a10762052cf57c0ebd1226341f6", "committedDate": "2020-07-08T00:56:49Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b9f61d7e2bc77a10762052cf57c0ebd1226341f6", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/b9f61d7e2bc77a10762052cf57c0ebd1226341f6", "committedDate": "2020-07-08T00:56:49Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}, "afterCommit": {"oid": "aff97a571b15490ea3d27aff8447c5ef7d221750", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/aff97a571b15490ea3d27aff8447c5ef7d221750", "committedDate": "2020-07-08T00:58:21Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0MzU3NzA5", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/841#pullrequestreview-444357709", "createdAt": "2020-07-08T01:45:09Z", "commit": {"oid": "aff97a571b15490ea3d27aff8447c5ef7d221750"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwMTo0NTowOVrOGuVNiw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwMTo0NTowOVrOGuVNiw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTIzNTIxMQ==", "bodyText": "is this code similar to line 16?", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/841#discussion_r451235211", "createdAt": "2020-07-08T01:45:09Z", "author": {"login": "bikamani"}, "path": "pnp-helper/src/main/java/com/microsoft/azure/sdk/iot/PnpHelper.java", "diffHunk": "@@ -0,0 +1,63 @@\n+package com.microsoft.azure.sdk.iot;\n+\n+import com.google.gson.JsonObject;\n+import com.microsoft.azure.sdk.iot.service.devicetwin.*;\n+\n+import java.util.*;\n+\n+public class PnpHelper {\n+    public static Set<Pair> CreatePropertyPatch(String propertyName, String propertyValue)\n+    {\n+        // The update patch for a property on the root level or a device without component should be in the format:\n+        // \"desired\": {\n+        //    \"propertyName\": {\n+        //      \"value\": \"hello\"\n+        //  }\n+        return Collections.singleton(new Pair(propertyName, propertyValue));\n+    }\n+\n+    public static Set<Pair> CreatePropertyPatch(String propertyName, String propertyValue, String componentName)\n+    {\n+        // The update patch for a property of a component should be in the format:\n+        // \"desired\": {\n+        //    \"componentName\": {\n+        //      \"__t\": \"c\",\n+        //      \"propertyName\": {\n+        //        \"value\": \"hello\"\n+        //      }\n+        //  }\n+        JsonObject patchJson = new JsonObject();\n+        // The following property is required to specify that the update is for a component and not root level.\n+        patchJson.addProperty(\"__t\", \"c\");\n+        patchJson.addProperty(propertyName, propertyValue);\n+\n+        Set<Pair> desiredProperties = new HashSet<Pair>()\n+        {\n+            {\n+                new Pair(componentName, patchJson);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aff97a571b15490ea3d27aff8447c5ef7d221750"}, "originalPosition": 37}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0MzU5MDEw", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/841#pullrequestreview-444359010", "createdAt": "2020-07-08T01:49:33Z", "commit": {"oid": "aff97a571b15490ea3d27aff8447c5ef7d221750"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwMTo0OTozM1rOGuVRxg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwMTo0OTozM1rOGuVRxg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTIzNjI5NA==", "bodyText": "I was wondering if this should be on top. That's the approach I took in C#.\nDon't have a strong opinion though", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/841#discussion_r451236294", "createdAt": "2020-07-08T01:49:33Z", "author": {"login": "bikamani"}, "path": "service/iot-service-samples/pnp-service-sample/TemperatureController/src/main/java/samples/com/microsoft/azure/sdk/iot/TemperatureController.java", "diffHunk": "@@ -0,0 +1,100 @@\n+package samples.com.microsoft.azure.sdk.iot;\n+\n+import com.microsoft.azure.sdk.iot.PnpHelper;\n+import com.microsoft.azure.sdk.iot.service.devicetwin.*;\n+import com.microsoft.azure.sdk.iot.service.exceptions.IotHubException;\n+\n+import java.io.IOException;\n+import java.time.ZoneOffset;\n+import java.time.ZonedDateTime;\n+import java.time.format.DateTimeFormatter;\n+import java.util.concurrent.TimeUnit;\n+\n+// This sample uses the model - https://github.com/Azure/opendigitaltwins-dtdl/blob/master/DTDL/v2/samples/TemperatureController.json.\n+public class TemperatureController {\n+    // Get connection string and device id inputs.\n+    private static final String iotHubConnectionString  = System.getenv(\"IOTHUB_CONNECTION_STRING\");\n+    private static final String deviceId = System.getenv(\"DEVICE_ID\");\n+\n+    private static DeviceTwin twinClient;\n+    private static DeviceMethod methodClient;\n+\n+    public static void main(String[] args) throws Exception {\n+        RunSample();\n+    }\n+\n+    private static void RunSample() throws IOException, IotHubException {\n+        System.out.println(\"Initialize the service client.\");\n+        InitializeServiceClient();\n+\n+        System.out.println(\"Get Twin model Id and Update Twin\");\n+        GetAndUpdateTwin();\n+\n+        System.out.println(\"Invoke a method on component\");\n+        InvokeMethodOnComponent();\n+\n+        System.out.println(\"Invoke a method on root level\");\n+        InvokeMethodOnRootLevel();\n+    }\n+\n+    private static void InitializeServiceClient() throws IOException {\n+        twinClient = DeviceTwin.createFromConnectionString(iotHubConnectionString);\n+        methodClient = DeviceMethod.createFromConnectionString(iotHubConnectionString);\n+    }\n+\n+    private static void GetAndUpdateTwin() throws IOException, IotHubException {\n+        // Get the twin and retrieve model Id set by Device client.\n+        DeviceTwinDevice twin = new DeviceTwinDevice(deviceId);\n+        twinClient.getTwin(twin);\n+        System.out.println(\"Model Id of this Twin is: \" + twin.getModelId());\n+\n+        // Update the twin for thermostat1 component.\n+        System.out.println(\"Updating Device twin property\");\n+        String propertyName = \"targetTemperature\";\n+        String propertyValue = \"60\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aff97a571b15490ea3d27aff8447c5ef7d221750"}, "originalPosition": 54}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0MzU5NDcy", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/841#pullrequestreview-444359472", "createdAt": "2020-07-08T01:51:03Z", "commit": {"oid": "aff97a571b15490ea3d27aff8447c5ef7d221750"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwMTo1MTowM1rOGuVTTA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwMTo1MTowM1rOGuVTTA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTIzNjY4NA==", "bodyText": "This makes me think if we really need no component sample \ud83d\ude04", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/841#discussion_r451236684", "createdAt": "2020-07-08T01:51:03Z", "author": {"login": "bikamani"}, "path": "service/iot-service-samples/pnp-service-sample/TemperatureController/src/main/java/samples/com/microsoft/azure/sdk/iot/TemperatureController.java", "diffHunk": "@@ -0,0 +1,100 @@\n+package samples.com.microsoft.azure.sdk.iot;\n+\n+import com.microsoft.azure.sdk.iot.PnpHelper;\n+import com.microsoft.azure.sdk.iot.service.devicetwin.*;\n+import com.microsoft.azure.sdk.iot.service.exceptions.IotHubException;\n+\n+import java.io.IOException;\n+import java.time.ZoneOffset;\n+import java.time.ZonedDateTime;\n+import java.time.format.DateTimeFormatter;\n+import java.util.concurrent.TimeUnit;\n+\n+// This sample uses the model - https://github.com/Azure/opendigitaltwins-dtdl/blob/master/DTDL/v2/samples/TemperatureController.json.\n+public class TemperatureController {\n+    // Get connection string and device id inputs.\n+    private static final String iotHubConnectionString  = System.getenv(\"IOTHUB_CONNECTION_STRING\");\n+    private static final String deviceId = System.getenv(\"DEVICE_ID\");\n+\n+    private static DeviceTwin twinClient;\n+    private static DeviceMethod methodClient;\n+\n+    public static void main(String[] args) throws Exception {\n+        RunSample();\n+    }\n+\n+    private static void RunSample() throws IOException, IotHubException {\n+        System.out.println(\"Initialize the service client.\");\n+        InitializeServiceClient();\n+\n+        System.out.println(\"Get Twin model Id and Update Twin\");\n+        GetAndUpdateTwin();\n+\n+        System.out.println(\"Invoke a method on component\");\n+        InvokeMethodOnComponent();\n+\n+        System.out.println(\"Invoke a method on root level\");\n+        InvokeMethodOnRootLevel();\n+    }\n+\n+    private static void InitializeServiceClient() throws IOException {\n+        twinClient = DeviceTwin.createFromConnectionString(iotHubConnectionString);\n+        methodClient = DeviceMethod.createFromConnectionString(iotHubConnectionString);\n+    }\n+\n+    private static void GetAndUpdateTwin() throws IOException, IotHubException {\n+        // Get the twin and retrieve model Id set by Device client.\n+        DeviceTwinDevice twin = new DeviceTwinDevice(deviceId);\n+        twinClient.getTwin(twin);\n+        System.out.println(\"Model Id of this Twin is: \" + twin.getModelId());\n+\n+        // Update the twin for thermostat1 component.\n+        System.out.println(\"Updating Device twin property\");\n+        String propertyName = \"targetTemperature\";\n+        String propertyValue = \"60\";\n+        String componentName = \"thermostat1\";\n+        twin.setDesiredProperties(PnpHelper.CreatePropertyPatch(propertyName, propertyValue, componentName));\n+        twinClient.updateTwin(twin);\n+\n+        // Get the updated twin properties.\n+        twinClient.getTwin(twin);\n+        System.out.println(\"The updated desired properties: \" + twin.getDesiredProperties().iterator().next().getValue());\n+    }\n+\n+    private static void InvokeMethodOnRootLevel() throws IOException, IotHubException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aff97a571b15490ea3d27aff8447c5ef7d221750"}, "originalPosition": 64}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0MzYwMjAy", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/841#pullrequestreview-444360202", "createdAt": "2020-07-08T01:53:29Z", "commit": {"oid": "aff97a571b15490ea3d27aff8447c5ef7d221750"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwMTo1MzoyOVrOGuVVzw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwMTo1MzoyOVrOGuVVzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTIzNzMyNw==", "bodyText": "\ud83c\udd92", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/841#discussion_r451237327", "createdAt": "2020-07-08T01:53:29Z", "author": {"login": "bikamani"}, "path": "service/iot-service-samples/readme.md", "diffHunk": "@@ -6,6 +6,7 @@ This folder contains simple samples showing how to use the various features of t\n \n * [Device manager sample](device-manager-sample): Shows how to work with the device ID registry of IoT Hub. \n * [Service client sample](service-client-sample): Shows how to send Cloud to Device messages through IoT Hub. \n+* [Plug and play samples](https://github.com/Azure/azure-iot-sdk-java/tree/preview/service/iot-service-samples/pnp-service-sample): Shows how to get the plug and play model ID, update properties on the twin and invoke commands. ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aff97a571b15490ea3d27aff8447c5ef7d221750"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0MzYwMzAx", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/841#pullrequestreview-444360301", "createdAt": "2020-07-08T01:53:47Z", "commit": {"oid": "aff97a571b15490ea3d27aff8447c5ef7d221750"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "aff97a571b15490ea3d27aff8447c5ef7d221750", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/aff97a571b15490ea3d27aff8447c5ef7d221750", "committedDate": "2020-07-08T00:58:21Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}, "afterCommit": {"oid": "49e95db7e68e888fed75bf8d7efe24bec5dfb5e9", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/49e95db7e68e888fed75bf8d7efe24bec5dfb5e9", "committedDate": "2020-07-08T05:35:02Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "49e95db7e68e888fed75bf8d7efe24bec5dfb5e9", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/49e95db7e68e888fed75bf8d7efe24bec5dfb5e9", "committedDate": "2020-07-08T05:35:02Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}, "afterCommit": {"oid": "862be06470742e96f430e35021514986463f61a9", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/862be06470742e96f430e35021514986463f61a9", "committedDate": "2020-07-08T05:42:19Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "862be06470742e96f430e35021514986463f61a9", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/862be06470742e96f430e35021514986463f61a9", "committedDate": "2020-07-08T05:42:19Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}, "afterCommit": {"oid": "cfff0ea1c8767802611f17d102dd646e5758d249", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/cfff0ea1c8767802611f17d102dd646e5758d249", "committedDate": "2020-07-08T05:45:19Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cfff0ea1c8767802611f17d102dd646e5758d249", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/cfff0ea1c8767802611f17d102dd646e5758d249", "committedDate": "2020-07-08T05:45:19Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}, "afterCommit": {"oid": "0f2c336421682cad40d60c5118ed817ce733964c", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/0f2c336421682cad40d60c5118ed817ce733964c", "committedDate": "2020-07-08T19:04:39Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0f2c336421682cad40d60c5118ed817ce733964c", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/0f2c336421682cad40d60c5118ed817ce733964c", "committedDate": "2020-07-08T19:04:39Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}, "afterCommit": {"oid": "33110d7dd3b495f3086d33f7aee1469d9a7b053d", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/33110d7dd3b495f3086d33f7aee1469d9a7b053d", "committedDate": "2020-07-08T20:52:14Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "33110d7dd3b495f3086d33f7aee1469d9a7b053d", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/33110d7dd3b495f3086d33f7aee1469d9a7b053d", "committedDate": "2020-07-08T20:52:14Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}, "afterCommit": {"oid": "e1cb8385041b8638554530695473f025b645f85e", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/e1cb8385041b8638554530695473f025b645f85e", "committedDate": "2020-07-08T20:53:11Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e1cb8385041b8638554530695473f025b645f85e", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/e1cb8385041b8638554530695473f025b645f85e", "committedDate": "2020-07-08T20:53:11Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}, "afterCommit": {"oid": "29b7aac75cbc8aebd0ca02e4d48ac435c10b33ca", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/29b7aac75cbc8aebd0ca02e4d48ac435c10b33ca", "committedDate": "2020-07-08T21:14:37Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1MTM1MTAy", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/841#pullrequestreview-445135102", "createdAt": "2020-07-08T21:16:10Z", "commit": {"oid": "29b7aac75cbc8aebd0ca02e4d48ac435c10b33ca"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQyMToxNjoxMFrOGu5hPw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQyMToxNjoxMFrOGu5hPw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTgzMDA3OQ==", "bodyText": "This will be gone with Abhipsa's commit", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/841#discussion_r451830079", "createdAt": "2020-07-08T21:16:10Z", "author": {"login": "vinagesh"}, "path": "pnp-helper/pom.xml", "diffHunk": "@@ -30,7 +30,7 @@\n     </scm>\n     <properties>\n         <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n-        <iot-device-client-version>1.23.0</iot-device-client-version>\n+        <iot-device-client-version>1.24.0</iot-device-client-version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "29b7aac75cbc8aebd0ca02e4d48ac435c10b33ca"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "29b7aac75cbc8aebd0ca02e4d48ac435c10b33ca", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/29b7aac75cbc8aebd0ca02e4d48ac435c10b33ca", "committedDate": "2020-07-08T21:14:37Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}, "afterCommit": {"oid": "d31fa16021325d1204dd8674aba90a32d155a3b2", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/d31fa16021325d1204dd8674aba90a32d155a3b2", "committedDate": "2020-07-08T21:18:36Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d31fa16021325d1204dd8674aba90a32d155a3b2", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/d31fa16021325d1204dd8674aba90a32d155a3b2", "committedDate": "2020-07-08T21:18:36Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}, "afterCommit": {"oid": "1f1bc25383ff9921b8557662dc84d7de9ddc20b2", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/1f1bc25383ff9921b8557662dc84d7de9ddc20b2", "committedDate": "2020-07-08T21:22:24Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bbc489c885c11f93ef0aa1bb2c35e569497b2d16", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/bbc489c885c11f93ef0aa1bb2c35e569497b2d16", "committedDate": "2020-07-08T21:25:19Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1f1bc25383ff9921b8557662dc84d7de9ddc20b2", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/1f1bc25383ff9921b8557662dc84d7de9ddc20b2", "committedDate": "2020-07-08T21:22:24Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}, "afterCommit": {"oid": "bbc489c885c11f93ef0aa1bb2c35e569497b2d16", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/bbc489c885c11f93ef0aa1bb2c35e569497b2d16", "committedDate": "2020-07-08T21:25:19Z", "message": "feat(samples): Updating and adding samples for pnp summer refresh"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1MTkxMjU3", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/841#pullrequestreview-445191257", "createdAt": "2020-07-08T23:19:24Z", "commit": {"oid": "bbc489c885c11f93ef0aa1bb2c35e569497b2d16"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1726, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}