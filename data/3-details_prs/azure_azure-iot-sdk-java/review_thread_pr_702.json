{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcyMDk4NjUx", "number": 702, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQyMDo0Njo0N1rODd0z8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQyMDo0NzowN1rODd00aA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMyNjAwNTYzOnYy", "diffSide": "RIGHT", "path": "iot-e2e-tests/common/src/main/java/com/microsoft/azure/sdk/iot/common/tests/iothub/TokenRenewalTests.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQyMDo0Njo0N1rOFmpqjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQyMToyNjozOFrOFmqxEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjA3Mjg0NQ==", "bodyText": "Is the comment below up to date? Is it 5 minute or 10 minutes?", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/702#discussion_r376072845", "createdAt": "2020-02-06T20:46:47Z", "author": {"login": "bikamani"}, "path": "iot-e2e-tests/common/src/main/java/com/microsoft/azure/sdk/iot/common/tests/iothub/TokenRenewalTests.java", "diffHunk": "@@ -75,9 +75,9 @@ public static void stopProxy()\n     @Test\n     public void tokenRenewalWorks() throws Exception\n     {\n-        final long SECONDS_FOR_SAS_TOKEN_TO_LIVE_BEFORE_RENEWAL = 60;\n-        final long EXPIRED_SAS_TOKEN_GRACE_PERIOD_SECONDS = 600;\n-        final long EXTRA_BUFFER_TO_ENSURE_TOKEN_EXPIRED_SECONDS = 30;\n+        final long SECONDS_FOR_SAS_TOKEN_TO_LIVE_BEFORE_RENEWAL = 30;\n+        final long EXPIRED_SAS_TOKEN_GRACE_PERIOD_SECONDS = 600; //service extends 10 minute grace period after a token has expired\n+        final long EXTRA_BUFFER_TO_ENSURE_TOKEN_EXPIRED_SECONDS = 120; //wait time beyond the expected grace period, just in case\n \n         List<InternalClient> clients = createClientsToTest();\n ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "161815f6f8df0d603229e34f6ebcd80f1aa55a67"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjA5MDg5OQ==", "bodyText": "The below comment is wrong, I'll update it. It should be 10", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/702#discussion_r376090899", "createdAt": "2020-02-06T21:26:38Z", "author": {"login": "timtay-microsoft"}, "path": "iot-e2e-tests/common/src/main/java/com/microsoft/azure/sdk/iot/common/tests/iothub/TokenRenewalTests.java", "diffHunk": "@@ -75,9 +75,9 @@ public static void stopProxy()\n     @Test\n     public void tokenRenewalWorks() throws Exception\n     {\n-        final long SECONDS_FOR_SAS_TOKEN_TO_LIVE_BEFORE_RENEWAL = 60;\n-        final long EXPIRED_SAS_TOKEN_GRACE_PERIOD_SECONDS = 600;\n-        final long EXTRA_BUFFER_TO_ENSURE_TOKEN_EXPIRED_SECONDS = 30;\n+        final long SECONDS_FOR_SAS_TOKEN_TO_LIVE_BEFORE_RENEWAL = 30;\n+        final long EXPIRED_SAS_TOKEN_GRACE_PERIOD_SECONDS = 600; //service extends 10 minute grace period after a token has expired\n+        final long EXTRA_BUFFER_TO_ENSURE_TOKEN_EXPIRED_SECONDS = 120; //wait time beyond the expected grace period, just in case\n \n         List<InternalClient> clients = createClientsToTest();\n ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjA3Mjg0NQ=="}, "originalCommit": {"oid": "161815f6f8df0d603229e34f6ebcd80f1aa55a67"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMyNjAwNjgwOnYy", "diffSide": "RIGHT", "path": "iot-e2e-tests/common/src/main/java/com/microsoft/azure/sdk/iot/common/tests/iothub/TokenRenewalTests.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQyMDo0NzowN1rOFmprNA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQyMToyNzo1MVrOFmqzMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjA3MzAxMg==", "bodyText": "so we need 2 extra minutes for the test to succeed?", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/702#discussion_r376073012", "createdAt": "2020-02-06T20:47:07Z", "author": {"login": "bikamani"}, "path": "iot-e2e-tests/common/src/main/java/com/microsoft/azure/sdk/iot/common/tests/iothub/TokenRenewalTests.java", "diffHunk": "@@ -75,9 +75,9 @@ public static void stopProxy()\n     @Test\n     public void tokenRenewalWorks() throws Exception\n     {\n-        final long SECONDS_FOR_SAS_TOKEN_TO_LIVE_BEFORE_RENEWAL = 60;\n-        final long EXPIRED_SAS_TOKEN_GRACE_PERIOD_SECONDS = 600;\n-        final long EXTRA_BUFFER_TO_ENSURE_TOKEN_EXPIRED_SECONDS = 30;\n+        final long SECONDS_FOR_SAS_TOKEN_TO_LIVE_BEFORE_RENEWAL = 30;\n+        final long EXPIRED_SAS_TOKEN_GRACE_PERIOD_SECONDS = 600; //service extends 10 minute grace period after a token has expired\n+        final long EXTRA_BUFFER_TO_ENSURE_TOKEN_EXPIRED_SECONDS = 120; //wait time beyond the expected grace period, just in case", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "161815f6f8df0d603229e34f6ebcd80f1aa55a67"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjA5MTQ0Mw==", "bodyText": "Yes, this test needs to open a connection, let the first token expire, and then let the service grace period expire. Only after all of that will the test check things like that the MQTT connection was lost.", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/702#discussion_r376091443", "createdAt": "2020-02-06T21:27:51Z", "author": {"login": "timtay-microsoft"}, "path": "iot-e2e-tests/common/src/main/java/com/microsoft/azure/sdk/iot/common/tests/iothub/TokenRenewalTests.java", "diffHunk": "@@ -75,9 +75,9 @@ public static void stopProxy()\n     @Test\n     public void tokenRenewalWorks() throws Exception\n     {\n-        final long SECONDS_FOR_SAS_TOKEN_TO_LIVE_BEFORE_RENEWAL = 60;\n-        final long EXPIRED_SAS_TOKEN_GRACE_PERIOD_SECONDS = 600;\n-        final long EXTRA_BUFFER_TO_ENSURE_TOKEN_EXPIRED_SECONDS = 30;\n+        final long SECONDS_FOR_SAS_TOKEN_TO_LIVE_BEFORE_RENEWAL = 30;\n+        final long EXPIRED_SAS_TOKEN_GRACE_PERIOD_SECONDS = 600; //service extends 10 minute grace period after a token has expired\n+        final long EXTRA_BUFFER_TO_ENSURE_TOKEN_EXPIRED_SECONDS = 120; //wait time beyond the expected grace period, just in case", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjA3MzAxMg=="}, "originalCommit": {"oid": "161815f6f8df0d603229e34f6ebcd80f1aa55a67"}, "originalPosition": 9}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2964, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}