{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQzNzYzNjYx", "number": 836, "title": "feat(samples): Add pnp Thermostat(no component) samples", "bodyText": "Checklist\n\n I have read the [contribution guidelines] (https://github.com/Azure/azure-iot-sdk-java/blob/master/.github/CONTRIBUTING.md).\n I added or modified the existing tests to cover the change (we do not allow our test coverage to go down).\nIf this is a modification that impacts the behavior of a public API\n\n I edited the corresponding document in the devdoc folder and added or modified requirements.\n\n\nI submitted this PR against the correct branch:\n\n This pull-request is submitted against the master branch.\n\n\n\nReference/Link to the issue solved with this PR (if any)\nDescription of the problem\nAdding samples for pnp service client - No component", "createdAt": "2020-07-02T22:13:11Z", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/836", "merged": true, "mergeCommit": {"oid": "39c8b5563a747add77111c4de8264a9acdf91350"}, "closed": true, "closedAt": "2020-07-03T00:50:01Z", "author": {"login": "vinagesh"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcxGqODgFqTQ0MjA1Mzk1MQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcxINEOgBqjM1MDkxMzA2NjI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyMDUzOTUx", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/836#pullrequestreview-442053951", "createdAt": "2020-07-02T22:33:55Z", "commit": {"oid": "651aa0bb352de60f89668288aee724c3ff330ba1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyMDU3MTgz", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/836#pullrequestreview-442057183", "createdAt": "2020-07-02T22:44:21Z", "commit": {"oid": "651aa0bb352de60f89668288aee724c3ff330ba1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQyMjo0NDoyMVrOGse8KA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQyMjo0NDoyMVrOGse8KA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTI5NzQ0OA==", "bodyText": "Is this the name we want to use?", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/836#discussion_r449297448", "createdAt": "2020-07-02T22:44:21Z", "author": {"login": "prmathur-microsoft"}, "path": "service/iot-service-samples/pnp-service-sample/src/main/java/samples/com/microsoft/azure/sdk/iot/PnPNoComponentSample.java", "diffHunk": "@@ -0,0 +1,60 @@\n+package samples.com.microsoft.azure.sdk.iot;\n+\n+import com.microsoft.azure.sdk.iot.service.devicetwin.*;\n+\n+import java.io.IOException;\n+import java.util.HashMap;\n+import java.util.HashSet;\n+import java.util.Map;\n+import java.util.Set;\n+import java.util.concurrent.TimeUnit;\n+\n+public class PnPNoComponentSample {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "651aa0bb352de60f89668288aee724c3ff330ba1"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyMDU4MDk5", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/836#pullrequestreview-442058099", "createdAt": "2020-07-02T22:47:28Z", "commit": {"oid": "651aa0bb352de60f89668288aee724c3ff330ba1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQyMjo0NzoyOFrOGse_Yg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQyMjo0NzoyOFrOGse_Yg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTI5ODI3NA==", "bodyText": "Can we add a readme explaining the usage of both Device and Service samples togther? And a brief explanation of both the samples?", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/836#discussion_r449298274", "createdAt": "2020-07-02T22:47:28Z", "author": {"login": "prmathur-microsoft"}, "path": "service/iot-service-samples/pnp-service-sample/src/main/java/samples/com/microsoft/azure/sdk/iot/PnPNoComponentSample.java", "diffHunk": "@@ -0,0 +1,60 @@\n+package samples.com.microsoft.azure.sdk.iot;\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "651aa0bb352de60f89668288aee724c3ff330ba1"}, "originalPosition": 2}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyMDU4MjY2", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/836#pullrequestreview-442058266", "createdAt": "2020-07-02T22:48:03Z", "commit": {"oid": "651aa0bb352de60f89668288aee724c3ff330ba1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQyMjo0ODowM1rOGse_7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQyMjo0ODowM1rOGse_7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTI5ODQxMg==", "bodyText": "Is this suppose to be DeviceConString or IotHub connection string?", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/836#discussion_r449298412", "createdAt": "2020-07-02T22:48:03Z", "author": {"login": "prmathur-microsoft"}, "path": "service/iot-service-samples/pnp-service-sample/src/main/java/samples/com/microsoft/azure/sdk/iot/PnPNoComponentSample.java", "diffHunk": "@@ -0,0 +1,60 @@\n+package samples.com.microsoft.azure.sdk.iot;\n+\n+import com.microsoft.azure.sdk.iot.service.devicetwin.*;\n+\n+import java.io.IOException;\n+import java.util.HashMap;\n+import java.util.HashSet;\n+import java.util.Map;\n+import java.util.Set;\n+import java.util.concurrent.TimeUnit;\n+\n+public class PnPNoComponentSample {\n+    private static final String propertyName = \"targetTemperature\";\n+    private static final double propertyValue = 75.5;\n+    private static final String methodName = \"reboot\";\n+    private static final Long responseTimeout = TimeUnit.SECONDS.toSeconds(200);\n+    private static final Long connectTimeout = TimeUnit.SECONDS.toSeconds(5);\n+\n+    public static void main(String[] args) throws Exception {\n+        System.out.println(\"Starting sample...\");\n+        // get user inputs from environment variables\n+        String iotHubConnectionString = System.getenv(\"IOTHUB_DEVICE_CONNECTION_STRING\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "651aa0bb352de60f89668288aee724c3ff330ba1"}, "originalPosition": 22}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "651aa0bb352de60f89668288aee724c3ff330ba1", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/651aa0bb352de60f89668288aee724c3ff330ba1", "committedDate": "2020-07-02T22:09:35Z", "message": "feat(samples): Add pnp no component samples"}, "afterCommit": {"oid": "c6e0ec3b08da4f4c5e3567a832f56d83a8927ec4", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/c6e0ec3b08da4f4c5e3567a832f56d83a8927ec4", "committedDate": "2020-07-02T22:54:08Z", "message": "feat(samples): Add pnp no component samples"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c6e0ec3b08da4f4c5e3567a832f56d83a8927ec4", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/c6e0ec3b08da4f4c5e3567a832f56d83a8927ec4", "committedDate": "2020-07-02T22:54:08Z", "message": "feat(samples): Add pnp no component samples"}, "afterCommit": {"oid": "7e7a6a96c951db1e109889227d9d3f79484069b8", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/7e7a6a96c951db1e109889227d9d3f79484069b8", "committedDate": "2020-07-02T23:07:58Z", "message": "feat(samples): Add pnp no component samples"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyMDcyNTE2", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/836#pullrequestreview-442072516", "createdAt": "2020-07-02T23:40:28Z", "commit": {"oid": "7e7a6a96c951db1e109889227d9d3f79484069b8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQyMzo0MDoyOFrOGsfxDA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQyMzo0MDoyOFrOGsfxDA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTMxMDk4OA==", "bodyText": "It would be good to add way to create payload based on user input as you have for methodname", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/836#discussion_r449310988", "createdAt": "2020-07-02T23:40:28Z", "author": {"login": "bikamani"}, "path": "service/iot-service-samples/pnp-service-sample/src/main/java/samples/com/microsoft/azure/sdk/iot/Thermostat.java", "diffHunk": "@@ -0,0 +1,60 @@\n+package samples.com.microsoft.azure.sdk.iot;\n+\n+import com.microsoft.azure.sdk.iot.service.devicetwin.*;\n+\n+import java.io.IOException;\n+import java.util.HashMap;\n+import java.util.HashSet;\n+import java.util.Map;\n+import java.util.Set;\n+import java.util.concurrent.TimeUnit;\n+\n+public class Thermostat {\n+    private static final String propertyName = \"targetTemperature\";\n+    private static final double propertyValue = 75.5;\n+    private static final String methodName = \"reboot\";\n+    private static final Long responseTimeout = TimeUnit.SECONDS.toSeconds(200);\n+    private static final Long connectTimeout = TimeUnit.SECONDS.toSeconds(5);\n+\n+    public static void main(String[] args) throws Exception {\n+        System.out.println(\"Starting sample...\");\n+\n+        // get user inputs from environment variables\n+        String iotHubConnectionString = System.getenv(\"IOTHUB_CONNECTION_STRING\");\n+        String deviceId = System.getenv(\"DEVICE_ID\");\n+\n+        // connect to the IotHub\n+        DeviceTwin twinClient = DeviceTwin.createFromConnectionString(iotHubConnectionString);\n+        DeviceTwinDevice device = new DeviceTwinDevice(deviceId);\n+\n+        // get the device twin\n+        System.out.println(\"Getting the Device twin\");\n+        twinClient.getTwin(device);\n+        // display the pnp model id property of the device\n+        System.out.println(\"The pnp model id is: \" + device.getModelId());\n+\n+        // update the device twin properties\n+        Set<Pair> desiredProperties = new HashSet<Pair>();\n+        desiredProperties.add(new Pair(propertyName, propertyValue));\n+        device.setDesiredProperties(desiredProperties);\n+        System.out.println(\"Updating Device twin (targetTemperature, 75)\");\n+        twinClient.updateTwin(device);\n+        System.out.println(\"The targetTemperature is set to: \" + device.getDesiredProperties().iterator().next().getValue());\n+\n+        // invoke command on the device\n+        System.out.println(\"Invoking Reboot command\");\n+        DeviceMethod methodClient = DeviceMethod.createFromConnectionString(iotHubConnectionString);\n+        Map<String, Object> payload = new HashMap<String, Object>()\n+        {\n+            {\n+                put(\"delay\", 1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7e7a6a96c951db1e109889227d9d3f79484069b8"}, "originalPosition": 50}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyMDcyNjUz", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/836#pullrequestreview-442072653", "createdAt": "2020-07-02T23:41:02Z", "commit": {"oid": "7e7a6a96c951db1e109889227d9d3f79484069b8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7e7a6a96c951db1e109889227d9d3f79484069b8", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/7e7a6a96c951db1e109889227d9d3f79484069b8", "committedDate": "2020-07-02T23:07:58Z", "message": "feat(samples): Add pnp no component samples"}, "afterCommit": {"oid": "dcc32548247c0cdc22b7267556f182285330e995", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/dcc32548247c0cdc22b7267556f182285330e995", "committedDate": "2020-07-02T23:55:38Z", "message": "feat(samples): Add pnp no component samples"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2c46afaf3e9c1834d8537c3e8ad3f23d2f569257", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/2c46afaf3e9c1834d8537c3e8ad3f23d2f569257", "committedDate": "2020-07-03T00:21:29Z", "message": "feat(samples): Add pnp no component samples"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dcc32548247c0cdc22b7267556f182285330e995", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/dcc32548247c0cdc22b7267556f182285330e995", "committedDate": "2020-07-02T23:55:38Z", "message": "feat(samples): Add pnp no component samples"}, "afterCommit": {"oid": "2c46afaf3e9c1834d8537c3e8ad3f23d2f569257", "author": {"user": {"login": "vinagesh", "name": "Sindhu Nagesh"}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/2c46afaf3e9c1834d8537c3e8ad3f23d2f569257", "committedDate": "2020-07-03T00:21:29Z", "message": "feat(samples): Add pnp no component samples"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1716, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}