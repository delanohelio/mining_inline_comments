{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcyMDk4NjUx", "number": 702, "title": "refactor(e2e): Adjust timing in token renewal tests", "bodyText": "test sometimes fails with case that mqtt connection never lost connection to hub. This implied that the test didn't wait long enough before checking that the grace period had ended. Adding more buffer time to ensure that the grace period ends before we check that mqtt connection was lost", "createdAt": "2020-02-06T20:32:21Z", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/702", "merged": true, "mergeCommit": {"oid": "98d90b95210d8712628c2e48650184be03af05c7"}, "closed": true, "closedAt": "2020-02-07T00:09:06Z", "author": {"login": "timtay-microsoft"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcBwzwhgH2gAyMzcyMDk4NjUxOjE2MTgxNWY2ZjhkZjBkNjAzMjI5ZTM0ZjZlYmNkODBmMWFhNTVhNjc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcByWh0AFqTM1NDgxMzQzNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "161815f6f8df0d603229e34f6ebcd80f1aa55a67", "author": {"user": {"login": "timtay-microsoft", "name": null}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/161815f6f8df0d603229e34f6ebcd80f1aa55a67", "committedDate": "2020-02-06T20:31:59Z", "message": "refactor(e2e): Adjust timing in token renewal tests\n\ntest sometimes fails with case that mqtt connection never lost connection to hub. This implied that the test didn't wait long enough before checking that the grace period had ended. Adding more buffer time to ensure that the grace period ends before we check that mqtt connection was lost"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0NzYwMTE0", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/702#pullrequestreview-354760114", "createdAt": "2020-02-06T20:46:47Z", "commit": {"oid": "161815f6f8df0d603229e34f6ebcd80f1aa55a67"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQyMDo0Njo0N1rOFmpqjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQyMDo0Njo0N1rOFmpqjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjA3Mjg0NQ==", "bodyText": "Is the comment below up to date? Is it 5 minute or 10 minutes?", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/702#discussion_r376072845", "createdAt": "2020-02-06T20:46:47Z", "author": {"login": "bikamani"}, "path": "iot-e2e-tests/common/src/main/java/com/microsoft/azure/sdk/iot/common/tests/iothub/TokenRenewalTests.java", "diffHunk": "@@ -75,9 +75,9 @@ public static void stopProxy()\n     @Test\n     public void tokenRenewalWorks() throws Exception\n     {\n-        final long SECONDS_FOR_SAS_TOKEN_TO_LIVE_BEFORE_RENEWAL = 60;\n-        final long EXPIRED_SAS_TOKEN_GRACE_PERIOD_SECONDS = 600;\n-        final long EXTRA_BUFFER_TO_ENSURE_TOKEN_EXPIRED_SECONDS = 30;\n+        final long SECONDS_FOR_SAS_TOKEN_TO_LIVE_BEFORE_RENEWAL = 30;\n+        final long EXPIRED_SAS_TOKEN_GRACE_PERIOD_SECONDS = 600; //service extends 10 minute grace period after a token has expired\n+        final long EXTRA_BUFFER_TO_ENSURE_TOKEN_EXPIRED_SECONDS = 120; //wait time beyond the expected grace period, just in case\n \n         List<InternalClient> clients = createClientsToTest();\n ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "161815f6f8df0d603229e34f6ebcd80f1aa55a67"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0NzYwMzEy", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/702#pullrequestreview-354760312", "createdAt": "2020-02-06T20:47:07Z", "commit": {"oid": "161815f6f8df0d603229e34f6ebcd80f1aa55a67"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQyMDo0NzowN1rOFmprNA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQyMDo0NzowN1rOFmprNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjA3MzAxMg==", "bodyText": "so we need 2 extra minutes for the test to succeed?", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/702#discussion_r376073012", "createdAt": "2020-02-06T20:47:07Z", "author": {"login": "bikamani"}, "path": "iot-e2e-tests/common/src/main/java/com/microsoft/azure/sdk/iot/common/tests/iothub/TokenRenewalTests.java", "diffHunk": "@@ -75,9 +75,9 @@ public static void stopProxy()\n     @Test\n     public void tokenRenewalWorks() throws Exception\n     {\n-        final long SECONDS_FOR_SAS_TOKEN_TO_LIVE_BEFORE_RENEWAL = 60;\n-        final long EXPIRED_SAS_TOKEN_GRACE_PERIOD_SECONDS = 600;\n-        final long EXTRA_BUFFER_TO_ENSURE_TOKEN_EXPIRED_SECONDS = 30;\n+        final long SECONDS_FOR_SAS_TOKEN_TO_LIVE_BEFORE_RENEWAL = 30;\n+        final long EXPIRED_SAS_TOKEN_GRACE_PERIOD_SECONDS = 600; //service extends 10 minute grace period after a token has expired\n+        final long EXTRA_BUFFER_TO_ENSURE_TOKEN_EXPIRED_SECONDS = 120; //wait time beyond the expected grace period, just in case", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "161815f6f8df0d603229e34f6ebcd80f1aa55a67"}, "originalPosition": 9}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "99b49bb54f9d6ff0104902645e6f47bfd454ae6e", "author": {"user": {"login": "timtay-microsoft", "name": null}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/99b49bb54f9d6ff0104902645e6f47bfd454ae6e", "committedDate": "2020-02-06T21:28:01Z", "message": "address cr comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bf3194642c99997c75c582e037dc36ac4a3884e9", "author": {"user": {"login": "timtay-microsoft", "name": null}}, "url": "https://github.com/Azure/azure-iot-sdk-java/commit/bf3194642c99997c75c582e037dc36ac4a3884e9", "committedDate": "2020-02-06T21:30:39Z", "message": "address cr part 2"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0ODEzNDM0", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/702#pullrequestreview-354813434", "createdAt": "2020-02-06T22:19:52Z", "commit": {"oid": "bf3194642c99997c75c582e037dc36ac4a3884e9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1811, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}