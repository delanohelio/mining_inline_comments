{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQzNjY5NzI5", "number": 833, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwMToyNzozM1rOEL5POw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwMToyODo1OFrOEL5QDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgwOTA3NTc5OnYy", "diffSide": "RIGHT", "path": "provisioning/provisioning-service-client/src/main/java/com/microsoft/azure/sdk/iot/provisioning/service/contract/ContractApiHttp.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwMToyNzozM1rOGtsFsw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QxNjowMjoxOVrOGuFYkA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDU2MTQ1OQ==", "bodyText": "If this is not a hard requirement, why was it throwing failure only occasionally?", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/833#discussion_r450561459", "createdAt": "2020-07-07T01:27:33Z", "author": {"login": "bikamani"}, "path": "provisioning/provisioning-service-client/src/main/java/com/microsoft/azure/sdk/iot/provisioning/service/contract/ContractApiHttp.java", "diffHunk": "@@ -183,6 +184,7 @@ private HttpRequest createRequest(URL url, HttpMethod method, Map<String, String\n         request.setHeaderField(HEADER_FIELD_NAME_ACCEPT, HEADER_FIELD_VALUE_ACCEPT);\n         request.setHeaderField(HEADER_FIELD_NAME_CONTENT_TYPE, HEADER_FIELD_VALUE_CONTENT_TYPE);\n         request.setHeaderField(HEADER_FIELD_NAME_CHARSET, HEADER_FIELD_VALUE_CHARSET);\n+        request.setHeaderField(HEADER_FIELD_NAME_CONTENT_LENGTH, payload != null ? String.valueOf(payload.length) : \"0\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f0d0916ce33a93d45d68415b1924907aa52d2ba"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDk3NTg4OA==", "bodyText": "I'm not sure. Service folks didn't answer me when I asked if it was a hard requirement. This seems like a safe change to make regardless, though", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/833#discussion_r450975888", "createdAt": "2020-07-07T16:02:19Z", "author": {"login": "timtay-microsoft"}, "path": "provisioning/provisioning-service-client/src/main/java/com/microsoft/azure/sdk/iot/provisioning/service/contract/ContractApiHttp.java", "diffHunk": "@@ -183,6 +184,7 @@ private HttpRequest createRequest(URL url, HttpMethod method, Map<String, String\n         request.setHeaderField(HEADER_FIELD_NAME_ACCEPT, HEADER_FIELD_VALUE_ACCEPT);\n         request.setHeaderField(HEADER_FIELD_NAME_CONTENT_TYPE, HEADER_FIELD_VALUE_CONTENT_TYPE);\n         request.setHeaderField(HEADER_FIELD_NAME_CHARSET, HEADER_FIELD_VALUE_CHARSET);\n+        request.setHeaderField(HEADER_FIELD_NAME_CONTENT_LENGTH, payload != null ? String.valueOf(payload.length) : \"0\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDU2MTQ1OQ=="}, "originalCommit": {"oid": "7f0d0916ce33a93d45d68415b1924907aa52d2ba"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgwOTA3Nzg5OnYy", "diffSide": "RIGHT", "path": "provisioning/provisioning-device-client/src/main/java/com/microsoft/azure/sdk/iot/provisioning/device/internal/contract/http/ContractAPIHttp.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwMToyODo1OFrOGtsG-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QxNjowMTo0MFrOGuFW3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDU2MTc4Nw==", "bodyText": "Do we not have any e2e tests for this change?", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/833#discussion_r450561787", "createdAt": "2020-07-07T01:28:58Z", "author": {"login": "bikamani"}, "path": "provisioning/provisioning-device-client/src/main/java/com/microsoft/azure/sdk/iot/provisioning/device/internal/contract/http/ContractAPIHttp.java", "diffHunk": "@@ -126,6 +127,7 @@ private HttpRequest prepareRequest(\n         request.setHeaderField(USER_AGENT, userAgentValue);\n         request.setHeaderField(ACCEPT, ACCEPT_VALUE);\n         request.setHeaderField(CONTENT_TYPE, ACCEPT_VALUE + \"; \" + ACCEPT_CHARSET);\n+        request.setHeaderField(CONTENT_LENGTH, payload != null ? String.valueOf(payload.length) : \"0\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f0d0916ce33a93d45d68415b1924907aa52d2ba"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDk3NTQ1NQ==", "bodyText": "Our e2e tests already hit both the device and service side of this change. The fact that I've stopped seeing those 411 errors is about as close as I can get to verifying that this works.", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/833#discussion_r450975455", "createdAt": "2020-07-07T16:01:40Z", "author": {"login": "timtay-microsoft"}, "path": "provisioning/provisioning-device-client/src/main/java/com/microsoft/azure/sdk/iot/provisioning/device/internal/contract/http/ContractAPIHttp.java", "diffHunk": "@@ -126,6 +127,7 @@ private HttpRequest prepareRequest(\n         request.setHeaderField(USER_AGENT, userAgentValue);\n         request.setHeaderField(ACCEPT, ACCEPT_VALUE);\n         request.setHeaderField(CONTENT_TYPE, ACCEPT_VALUE + \"; \" + ACCEPT_CHARSET);\n+        request.setHeaderField(CONTENT_LENGTH, payload != null ? String.valueOf(payload.length) : \"0\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDU2MTc4Nw=="}, "originalCommit": {"oid": "7f0d0916ce33a93d45d68415b1924907aa52d2ba"}, "originalPosition": 12}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2881, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}