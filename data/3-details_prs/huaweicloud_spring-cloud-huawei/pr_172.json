{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAyNTQ2MTIw", "number": 172, "title": "add server center watch by websocket", "bodyText": "add watch for discovery:\n\nuse event to notify change.\nuse websocket to wait for receive messages.\n\n\nadd backoff algorithm.", "createdAt": "2020-04-13T08:54:41Z", "url": "https://github.com/huaweicloud/spring-cloud-huawei/pull/172", "merged": true, "mergeCommit": {"oid": "06205437c5d1d549ed485279817784800679a638"}, "closed": true, "closedAt": "2020-04-22T07:16:04Z", "author": {"login": "GuoYL123"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcXYjSGAFqTM5MjUyOTk1Nw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcZ-e0fABqjMyNTg1MTgzMjg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyNTI5OTU3", "url": "https://github.com/huaweicloud/spring-cloud-huawei/pull/172#pullrequestreview-392529957", "createdAt": "2020-04-14T00:42:35Z", "commit": {"oid": "5218558324d9eaec1d3d6e210da64a6b257d19cc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwMDo0MjozNVrOGE6HEA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwMDo0MjozNVrOGE6HEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzc5OTU2OA==", "bodyText": "\u4e0d\u4f7f\u7528\u7684\u4ee3\u7801\u5220\u9664", "url": "https://github.com/huaweicloud/spring-cloud-huawei/pull/172#discussion_r407799568", "createdAt": "2020-04-14T00:42:35Z", "author": {"login": "liubao68"}, "path": "spring-cloud-huawei-servicecomb-discovery/src/main/java/com/huaweicloud/servicecomb/discovery/ribbon/ServiceCombRibbonClientConfiguration.java", "diffHunk": "@@ -41,4 +43,15 @@\n     serverList.initWithNiwsConfig(config);\n     return serverList;\n   }\n+\n+//  @Bean\n+//  public ServerEndpointExporter serverEndpointExporter() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5218558324d9eaec1d3d6e210da64a6b257d19cc"}, "originalPosition": 22}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyNTMwMzQ3", "url": "https://github.com/huaweicloud/spring-cloud-huawei/pull/172#pullrequestreview-392530347", "createdAt": "2020-04-14T00:43:55Z", "commit": {"oid": "5218558324d9eaec1d3d6e210da64a6b257d19cc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwMDo0Mzo1NVrOGE6Ikg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwMDo0Mzo1NVrOGE6Ikg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzc5OTk1NA==", "bodyText": "\u65e0\u7528\u7684\u4ee3\u7801\u5220\u9664", "url": "https://github.com/huaweicloud/spring-cloud-huawei/pull/172#discussion_r407799954", "createdAt": "2020-04-14T00:43:55Z", "author": {"login": "liubao68"}, "path": "spring-cloud-huawei-servicecomb-discovery/src/main/java/com/huaweicloud/servicecomb/discovery/ribbon/WebSocketConfig.java", "diffHunk": "@@ -0,0 +1,15 @@\n+package com.huaweicloud.servicecomb.discovery.ribbon;\n+\n+import org.springframework.context.annotation.Configuration;\n+import org.springframework.web.socket.config.annotation.EnableWebSocketMessageBroker;\n+import org.springframework.web.socket.config.annotation.WebSocketMessageBrokerConfigurer;\n+\n+/**\n+ * @Author GuoYl123\n+ * @Date 2020/4/13\n+ **/\n+//@Configuration\n+//@EnableWebSocketMessageBroker\n+public class WebSocketConfig implements WebSocketMessageBrokerConfigurer {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5218558324d9eaec1d3d6e210da64a6b257d19cc"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6dd333a4ea1cbe1ef8129cf39fa61fab1571cabc", "author": {"user": {"login": "GuoYL123", "name": "GuoYL"}}, "url": "https://github.com/huaweicloud/spring-cloud-huawei/commit/6dd333a4ea1cbe1ef8129cf39fa61fab1571cabc", "committedDate": "2020-04-18T09:50:33Z", "message": "add server center watch"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5218558324d9eaec1d3d6e210da64a6b257d19cc", "author": {"user": {"login": "GuoYL123", "name": "GuoYL"}}, "url": "https://github.com/huaweicloud/spring-cloud-huawei/commit/5218558324d9eaec1d3d6e210da64a6b257d19cc", "committedDate": "2020-04-13T08:51:34Z", "message": "add server center watch"}, "afterCommit": {"oid": "6dd333a4ea1cbe1ef8129cf39fa61fab1571cabc", "author": {"user": {"login": "GuoYL123", "name": "GuoYL"}}, "url": "https://github.com/huaweicloud/spring-cloud-huawei/commit/6dd333a4ea1cbe1ef8129cf39fa61fab1571cabc", "committedDate": "2020-04-18T09:50:33Z", "message": "add server center watch"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c3796cb144e3054faf9e3b502ade21a9443eab8b", "author": {"user": {"login": "GuoYL123", "name": "GuoYL"}}, "url": "https://github.com/huaweicloud/spring-cloud-huawei/commit/c3796cb144e3054faf9e3b502ade21a9443eab8b", "committedDate": "2020-04-18T10:13:11Z", "message": "Merge remote-tracking branch 'remotes/upstream/master' into websocket\n\n# Conflicts:\n#\tspring-cloud-huawei-common/src/main/java/com/huaweicloud/common/transport/URLConfig.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "83925243be61705b9a3f3e8e42680f62ae759b1c", "author": {"user": {"login": "GuoYL123", "name": "GuoYL"}}, "url": "https://github.com/huaweicloud/spring-cloud-huawei/commit/83925243be61705b9a3f3e8e42680f62ae759b1c", "committedDate": "2020-04-18T10:23:16Z", "message": "add config control watch"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cfcab034cd283289dc933dc4f0174b72dd3f90da", "author": {"user": {"login": "GuoYL123", "name": "GuoYL"}}, "url": "https://github.com/huaweicloud/spring-cloud-huawei/commit/cfcab034cd283289dc933dc4f0174b72dd3f90da", "committedDate": "2020-04-18T10:42:13Z", "message": "Merge remote-tracking branch 'remotes/upstream/master' into websocket"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f9b3c8b7b0e10b2570fad71595af24036d8bd15e", "author": {"user": {"login": "GuoYL123", "name": "GuoYL"}}, "url": "https://github.com/huaweicloud/spring-cloud-huawei/commit/f9b3c8b7b0e10b2570fad71595af24036d8bd15e", "committedDate": "2020-04-18T11:04:04Z", "message": "when watch is true don't check empty list"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b1f87bd8c0c1642e509d9e128156a7598b647cf", "author": {"user": {"login": "GuoYL123", "name": "GuoYL"}}, "url": "https://github.com/huaweicloud/spring-cloud-huawei/commit/5b1f87bd8c0c1642e509d9e128156a7598b647cf", "committedDate": "2020-04-20T01:00:23Z", "message": "fix ut"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6c4a79df2c4d8f2c313c8ae56529909380b0e013", "author": {"user": {"login": "GuoYL123", "name": "GuoYL"}}, "url": "https://github.com/huaweicloud/spring-cloud-huawei/commit/6c4a79df2c4d8f2c313c8ae56529909380b0e013", "committedDate": "2020-04-20T07:25:53Z", "message": "refactory"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5eec8905edb9a27faea052b236dd5c0f79c763dd", "author": {"user": {"login": "GuoYL123", "name": "GuoYL"}}, "url": "https://github.com/huaweicloud/spring-cloud-huawei/commit/5eec8905edb9a27faea052b236dd5c0f79c763dd", "committedDate": "2020-04-20T07:50:46Z", "message": "if list is empty, maybe the service center is restarted , check before clear"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b1818a6ee33400a2cef1c2957e24b974f482408c", "author": {"user": {"login": "GuoYL123", "name": "GuoYL"}}, "url": "https://github.com/huaweicloud/spring-cloud-huawei/commit/b1818a6ee33400a2cef1c2957e24b974f482408c", "committedDate": "2020-04-20T08:49:31Z", "message": "optimization"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80b3ae12d147257fa65de84b4b0010d4f2b2e77a", "author": {"user": {"login": "GuoYL123", "name": "GuoYL"}}, "url": "https://github.com/huaweicloud/spring-cloud-huawei/commit/80b3ae12d147257fa65de84b4b0010d4f2b2e77a", "committedDate": "2020-04-21T07:39:34Z", "message": "fix ut"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b030f0ce8f476a26fef50c027fbe6faeea4a1cca", "author": {"user": {"login": "GuoYL123", "name": "GuoYL"}}, "url": "https://github.com/huaweicloud/spring-cloud-huawei/commit/b030f0ce8f476a26fef50c027fbe6faeea4a1cca", "committedDate": "2020-04-20T12:05:35Z", "message": "fix ut"}, "afterCommit": {"oid": "80b3ae12d147257fa65de84b4b0010d4f2b2e77a", "author": {"user": {"login": "GuoYL123", "name": "GuoYL"}}, "url": "https://github.com/huaweicloud/spring-cloud-huawei/commit/80b3ae12d147257fa65de84b4b0010d4f2b2e77a", "committedDate": "2020-04-21T07:39:34Z", "message": "fix ut"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2dee378386cdfe9c2a1d55dc3be57124d3ee9a1c", "author": {"user": {"login": "GuoYL123", "name": "GuoYL"}}, "url": "https://github.com/huaweicloud/spring-cloud-huawei/commit/2dee378386cdfe9c2a1d55dc3be57124d3ee9a1c", "committedDate": "2020-04-22T02:01:34Z", "message": "optimization"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1bbe92a0c5289e3f7d42665ae072f5cc2b291239", "author": {"user": {"login": "GuoYL123", "name": "GuoYL"}}, "url": "https://github.com/huaweicloud/spring-cloud-huawei/commit/1bbe92a0c5289e3f7d42665ae072f5cc2b291239", "committedDate": "2020-04-22T01:50:11Z", "message": "optimization"}, "afterCommit": {"oid": "2dee378386cdfe9c2a1d55dc3be57124d3ee9a1c", "author": {"user": {"login": "GuoYL123", "name": "GuoYL"}}, "url": "https://github.com/huaweicloud/spring-cloud-huawei/commit/2dee378386cdfe9c2a1d55dc3be57124d3ee9a1c", "committedDate": "2020-04-22T02:01:34Z", "message": "optimization"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1842, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}