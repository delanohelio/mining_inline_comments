{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY2NDU1OTA4", "number": 1253, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwNzowNDoyMlrOEXf3ow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwNzowNDoyMlrOEXf3ow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkzMDc0ODUxOnYy", "diffSide": "RIGHT", "path": "helix-core/src/test/java/org/apache/helix/spectator/TestRoutingDataCache.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwNzowNDoyMlrOG_Uapg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwNzozNjoyMVrOG_VZaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTA0Nzk3NA==", "bodyText": "Good work!\nSince the original issue mentions that the instability is caused by a non-deterministic execution order of tests, should we add the dependsOnMethods annotation to enforce the order across different environments?", "url": "https://github.com/apache/helix/pull/1253#discussion_r469047974", "createdAt": "2020-08-12T07:04:22Z", "author": {"login": "narendly"}, "path": "helix-core/src/test/java/org/apache/helix/spectator/TestRoutingDataCache.java", "diffHunk": "@@ -24,20 +24,21 @@\n import org.apache.helix.HelixConstants;\n import org.apache.helix.PropertyType;\n import org.apache.helix.TestHelper;\n-import org.apache.helix.zookeeper.datamodel.ZNRecord;\n import org.apache.helix.integration.common.ZkStandAloneCMTestBase;\n+import org.apache.helix.integration.manager.MockParticipantManager;\n import org.apache.helix.manager.zk.ZkBaseDataAccessor;\n import org.apache.helix.mock.MockZkHelixDataAccessor;\n import org.apache.helix.model.CurrentState;\n import org.apache.helix.tools.ClusterVerifiers.BestPossibleExternalViewVerifier;\n import org.apache.helix.tools.ClusterVerifiers.ZkHelixClusterVerifier;\n+import org.apache.helix.zookeeper.datamodel.ZNRecord;\n import org.testng.Assert;\n import org.testng.annotations.Test;\n \n public class TestRoutingDataCache extends ZkStandAloneCMTestBase {\n \n-  @Test()\n-  public void testUpdateOnNotification() throws Exception {\n+  @Test\n+  public void testUpdateOnNotification() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2bea25eb79661f36a62b1b082b8dacc585f492a2"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTA2NDA0MQ==", "bodyText": "I thought about it. But since testCurrentStatesSelectiveUpdate does not necessarily depend on the other two tests, adding dependsOnMethods may hide flaw of test. This test should be independent with other tests -- it should not change the global/parent states that may affect other tests -- it should restore the original states after the method.\nSo making it independent should be a better idea: no matter what the running order is, the tests should not fail.", "url": "https://github.com/apache/helix/pull/1253#discussion_r469064041", "createdAt": "2020-08-12T07:36:21Z", "author": {"login": "huizhilu"}, "path": "helix-core/src/test/java/org/apache/helix/spectator/TestRoutingDataCache.java", "diffHunk": "@@ -24,20 +24,21 @@\n import org.apache.helix.HelixConstants;\n import org.apache.helix.PropertyType;\n import org.apache.helix.TestHelper;\n-import org.apache.helix.zookeeper.datamodel.ZNRecord;\n import org.apache.helix.integration.common.ZkStandAloneCMTestBase;\n+import org.apache.helix.integration.manager.MockParticipantManager;\n import org.apache.helix.manager.zk.ZkBaseDataAccessor;\n import org.apache.helix.mock.MockZkHelixDataAccessor;\n import org.apache.helix.model.CurrentState;\n import org.apache.helix.tools.ClusterVerifiers.BestPossibleExternalViewVerifier;\n import org.apache.helix.tools.ClusterVerifiers.ZkHelixClusterVerifier;\n+import org.apache.helix.zookeeper.datamodel.ZNRecord;\n import org.testng.Assert;\n import org.testng.annotations.Test;\n \n public class TestRoutingDataCache extends ZkStandAloneCMTestBase {\n \n-  @Test()\n-  public void testUpdateOnNotification() throws Exception {\n+  @Test\n+  public void testUpdateOnNotification() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTA0Nzk3NA=="}, "originalCommit": {"oid": "2bea25eb79661f36a62b1b082b8dacc585f492a2"}, "originalPosition": 21}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 883, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}