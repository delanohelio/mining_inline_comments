{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU5NzA3MjIz", "number": 673, "title": "Add Helix Distributed lock module", "bodyText": "Issues\n\n My PR addresses the following Helix issues and references them in the PR description:\n\n(#672)\nDescription\n\n Here are some details about my PR, including screenshots of any UI changes:\n\nFor distributed systems that use Helix, there is a common request for a mechanism to make sure different processes can cooperate correctly. For example, if two processes that run on different machines, or different networks, or even different data centers would like to work on the same resource, we must have a mutually exclusive lock to secure their operations do not step on each other. Only when a process acquires the lock, it can perform the operation.\nTherefore, we want to implement a distributed lock in Helix to benefit clients. This PR adds the new Helix distributed lock module in Helix repo.\nTests\n\n The following is the result of the \"mvn test\" command on the appropriate module:\nWaiting for time window to expire\n\nEND TestParticipantMonitor\nSTART test at Mon Jan 06 12:19:14 PST 2020\nSTART TestZKPathDataDumpTask_test at Mon Jan 06 12:19:14 PST 2020\nEND TestZKPathDataDumpTask_test at Mon Jan 06 12:19:14 PST 2020\nEND test at Mon Jan 06 12:19:14 PST 2020, took: 204ms.\nSTART testCapacityReached at Mon Jan 06 12:19:14 PST 2020\nSTART TestZKPathDataDumpTask_testCapacityReached at Mon Jan 06 12:19:14 PST 2020\nEND testCapacityReached at Mon Jan 06 12:19:14 PST 2020, took: 221ms.\nSTART testBasic at Mon Jan 06 12:19:20 PST 2020\nSTART TestHelixConfigAccessor_testBasic at Mon Jan 06 12:19:20 PST 2020\nEND TestHelixConfigAccessor_testBasic at Mon Jan 06 12:19:20 PST 2020\nEND testBasic at Mon Jan 06 12:19:20 PST 2020, took: 292ms.\nSTART testSetNonexistentParticipantConfig at Mon Jan 06 12:19:20 PST 2020\nSTART TestHelixConfigAccessor_testSetNonexistentParticipantConfig at Mon Jan 06 12:19:20 PST 2020\n3251077 [TestNGInvoker-testSetNonexistentParticipantConfig()] ERROR org.apache.helix.manager.zk.ZKUtil  - Invalid instance setup, missing znode path: /TestHelixConfigAccessor_testSetNonexistentParticipantConfig/CONFIGS/PARTICIPANT/localhost_12918\n3251092 [TestNGInvoker-testSetNonexistentParticipantConfig()] ERROR org.apache.helix.manager.zk.ZKUtil  - Invalid instance setup, missing znode path: /TestHelixConfigAccessor_testSetNonexistentParticipantConfig/INSTANCES/localhost_12918/MESSAGES\n3251092 [TestNGInvoker-testSetNonexistentParticipantConfig()] ERROR org.apache.helix.manager.zk.ZKUtil  - Invalid instance setup, missing znode path: /TestHelixConfigAccessor_testSetNonexistentParticipantConfig/INSTANCES/localhost_12918/CURRENTSTATES\n3251092 [TestNGInvoker-testSetNonexistentParticipantConfig()] ERROR org.apache.helix.manager.zk.ZKUtil  - Invalid instance setup, missing znode path: /TestHelixConfigAccessor_testSetNonexistentParticipantConfig/INSTANCES/localhost_12918/STATUSUPDATES\n3251093 [TestNGInvoker-testSetNonexistentParticipantConfig()] ERROR org.apache.helix.manager.zk.ZKUtil  - Invalid instance setup, missing znode path: /TestHelixConfigAccessor_testSetNonexistentParticipantConfig/INSTANCES/localhost_12918/ERRORS\nEND TestHelixConfigAccessor_testSetNonexistentParticipantConfig at Mon Jan 06 12:19:20 PST 2020\nEND testSetNonexistentParticipantConfig at Mon Jan 06 12:19:20 PST 2020, took: 110ms.\nShut down zookeeper at port 2183 in thread main\n[INFO] Tests run: 890, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 3,264.509 s - in TestSuite\n[INFO]\n[INFO] Results:\n[INFO]\n[INFO] Tests run: 890, Failures: 0, Errors: 0, Skipped: 0\n[INFO]\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  54:28 min\n[INFO] Finished at: 2020-01-06T12:19:26-08:00\n[INFO] ------------------------------------------------------------------------\nCommits\n\n My commits all reference appropriate Apache Helix GitHub issues in their subject lines, and I have squashed multiple commits if they address the same issue. In addition, my commits follow the guidelines from \"How to write a good git commit message\":\n\nSubject is separated from body by a blank line\nSubject is limited to 50 characters (not including Jira issue reference)\nSubject does not end with a period\nSubject uses the imperative mood (\"add\", not \"adding\")\nBody wraps at 72 characters\nBody explains \"what\" and \"why\", not \"how\"\n\n\n\nCode Quality\n\n My diff has been formatted using helix-style.xml", "createdAt": "2020-01-06T20:46:22Z", "url": "https://github.com/apache/helix/pull/673", "merged": true, "mergeCommit": {"oid": "1767f41b97694b63591e0ece820b46c3f853fc4f"}, "closed": true, "closedAt": "2020-01-15T01:11:25Z", "author": {"login": "zhangmeng916"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb3zq8tAH2gAyMzU5NzA3MjIzOjc4ZGE2Y2ZhNTViOGJkOWFiYmMyM2E1ZDQ1NjU5NjhiMWZhMTA4MmE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb6WlWvgH2gAyMzU5NzA3MjIzOjg5ZDY2MTg0MzZiNzRkNDhiYjAwZjU4MDg3YzcxOTY1NzUyMjA3ZDM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "78da6cfa55b8bd9abbc23a5d4565968b1fa1082a", "author": {"user": {"login": "zhangmeng916", "name": "Meng Zhang"}}, "url": "https://github.com/apache/helix/commit/78da6cfa55b8bd9abbc23a5d4565968b1fa1082a", "committedDate": "2020-01-06T22:12:50Z", "message": "add Helix Distributed lock based on zookeeper"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "11e69e4663c73a3174a23c3caee4e0a9121a0131", "author": {"user": {"login": "zhangmeng916", "name": "Meng Zhang"}}, "url": "https://github.com/apache/helix/commit/11e69e4663c73a3174a23c3caee4e0a9121a0131", "committedDate": "2020-01-06T22:09:32Z", "message": "update java doc"}, "afterCommit": {"oid": "78da6cfa55b8bd9abbc23a5d4565968b1fa1082a", "author": {"user": {"login": "zhangmeng916", "name": "Meng Zhang"}}, "url": "https://github.com/apache/helix/commit/78da6cfa55b8bd9abbc23a5d4565968b1fa1082a", "committedDate": "2020-01-06T22:12:50Z", "message": "add Helix Distributed lock based on zookeeper"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4OTU2NjMx", "url": "https://github.com/apache/helix/pull/673#pullrequestreview-338956631", "createdAt": "2020-01-06T23:27:56Z", "commit": {"oid": "78da6cfa55b8bd9abbc23a5d4565968b1fa1082a"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d59d2f980dcb308b9cc4cbf478691cab1bad7e5", "author": {"user": {"login": "zhangmeng916", "name": "Meng Zhang"}}, "url": "https://github.com/apache/helix/commit/4d59d2f980dcb308b9cc4cbf478691cab1bad7e5", "committedDate": "2020-01-06T23:37:17Z", "message": "remove detail implementation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5NDQ0MTM2", "url": "https://github.com/apache/helix/pull/673#pullrequestreview-339444136", "createdAt": "2020-01-07T19:09:12Z", "commit": {"oid": "4d59d2f980dcb308b9cc4cbf478691cab1bad7e5"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QxOTowOToxM1rOFbC6ng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QxOTowOTo1NVrOFbC7yg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzkwMzY0Ng==", "bodyText": "Do you need all these?", "url": "https://github.com/apache/helix/pull/673#discussion_r363903646", "createdAt": "2020-01-07T19:09:13Z", "author": {"login": "junkaixue"}, "path": "helix-lock/helix-lock-0.9.2-SNAPSHOT.ivy", "diffHunk": "@@ -0,0 +1,54 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<ivy-module version=\"1.0\">\n+\t<info organisation=\"org.apache.helix\"\n+\t\tmodule=\"helix-lock\"\n+\t\trevision=\"0.9.2-SNAPSHOT\"\n+\t\tstatus=\"integration\"\n+\t\tpublication=\"20170128141623\"\n+\t/>\n+\t<configurations>\n+\t\t<conf name=\"default\" visibility=\"public\" description=\"runtime dependencies and master artifact can be used with this conf\" extends=\"runtime,master\"/>\n+\t\t<conf name=\"master\" visibility=\"public\" description=\"contains only the artifact published by this module itself, with no transitive dependencies\"/>\n+\t\t<conf name=\"compile\" visibility=\"public\" description=\"this is the default scope, used if none is specified. Compile dependencies are available in all classpaths.\"/>\n+\t\t<conf name=\"provided\" visibility=\"public\" description=\"this is much like compile, but indicates you expect the JDK or a container to provide it. It is only available on the compilation classpath, and is not transitive.\"/>\n+\t\t<conf name=\"runtime\" visibility=\"public\" description=\"this scope indicates that the dependency is not required for compilation, but is for execution. It is in the runtime and test classpaths, but not the compile classpath.\" extends=\"compile\"/>\n+\t\t<conf name=\"test\" visibility=\"private\" description=\"this scope indicates that the dependency is not required for normal use of the application, and is only available for the test compilation and execution phases.\"/>\n+\t\t<conf name=\"system\" visibility=\"public\" description=\"this scope is similar to provided except that you have to provide the JAR which contains it explicitly. The artifact is always available and is not looked up in a repository.\"/>\n+\t</configurations>\n+\t<publications>\n+\t\t<artifact name=\"helix-lock\" type=\"jar\" ext=\"jar\" conf=\"master\"/>\n+\t</publications>\n+\t<dependencies>\n+\t  <dependency org=\"org.slf4j\" name=\"slf4j-api\" rev=\"1.7.25\" force=\"true\" conf=\"compile->compile(*),master(*);runtime->runtime(*)\">\n+        <artifact name=\"slf4j-api\" ext=\"jar\"/>\n+    </dependency>\n+    <dependency org=\"org.slf4j\" name=\"slf4j-log4j12\" rev=\"1.7.14\" force=\"true\" conf=\"compile->compile(*),master(*);runtime->runtime(*)\">\n+        <artifact name=\"slf4j-log4j12\" ext=\"jar\"/>\n+    </dependency>\n+    <dependency org=\"org.yaml\" name=\"snakeyaml\" rev=\"1.17\">\n+        <artifact name=\"snakeyaml\" m:classifier=\"sources\" ext=\"jar\"/>\n+    </dependency>\n+\t\t<dependency org=\"org.apache.helix\" name=\"helix-core\" rev=\"0.9.2-SNAPSHOT\" force=\"true\" conf=\"compile->compile(*),master(*);runtime->runtime(*)\"/>\n+\t\t<dependency org=\"org.codehaus.jackson\" name=\"jackson-core-asl\" rev=\"1.8.5\" force=\"true\" conf=\"compile->compile(*),master(*);runtime->runtime(*)\"/>\n+\t\t<dependency org=\"org.codehaus.jackson\" name=\"jackson-mapper-asl\" rev=\"1.8.5\" force=\"true\" conf=\"compile->compile(*),master(*);runtime->runtime(*)\"/>\n+\t\t<dependency org=\"commons-cli\" name=\"commons-cli\" rev=\"1.2\" force=\"true\" conf=\"compile->compile(*),master(*);runtime->runtime(*)\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4d59d2f980dcb308b9cc4cbf478691cab1bad7e5"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzkwMzk0Ng==", "bodyText": "Same for this file. Remove all the components, which are unnecessary. Otherwise, the file is too large and imports are not required.", "url": "https://github.com/apache/helix/pull/673#discussion_r363903946", "createdAt": "2020-01-07T19:09:55Z", "author": {"login": "junkaixue"}, "path": "helix-lock/pom.xml", "diffHunk": "@@ -0,0 +1,189 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4d59d2f980dcb308b9cc4cbf478691cab1bad7e5"}, "originalPosition": 1}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a6f53fd721f9729cccd0c530220a6544726e50aa", "author": {"user": {"login": "zhangmeng916", "name": "Meng Zhang"}}, "url": "https://github.com/apache/helix/commit/a6f53fd721f9729cccd0c530220a6544726e50aa", "committedDate": "2020-01-07T21:54:30Z", "message": "remove unecessary dependencies"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5NTUyODA4", "url": "https://github.com/apache/helix/pull/673#pullrequestreview-339552808", "createdAt": "2020-01-07T22:38:13Z", "commit": {"oid": "a6f53fd721f9729cccd0c530220a6544726e50aa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QyMjozODoxM1rOFbH9cw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QyMjozODoxM1rOFbH9cw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzk4NjI5MQ==", "bodyText": "These dependencies are the same in the parent pom. I think it would be more clear and easier to maintain if you remove these dependencies in this child pom, because this child pom file will inherit all properties and dependencies from parent POM. Unless you want to use a different version/additional dependency.\nSame with following duplicate dependencies.", "url": "https://github.com/apache/helix/pull/673#discussion_r363986291", "createdAt": "2020-01-07T22:38:13Z", "author": {"login": "huizhilu"}, "path": "helix-lock/pom.xml", "diffHunk": "@@ -0,0 +1,162 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <parent>\n+    <groupId>org.apache.helix</groupId>\n+    <artifactId>helix</artifactId>\n+    <version>0.9.2-SNAPSHOT</version>\n+  </parent>\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <artifactId>helix-lock</artifactId>\n+  <packaging>bundle</packaging>\n+  <name>Apache Helix :: Distributed Lock</name>\n+\n+  <properties>\n+    <osgi.import>\n+      org.apache.helix*,\n+      org.slf4j*;version=\"[1.6,2)\",\n+      *\n+    </osgi.import>\n+    <osgi.export>org.apache.helix.lock*;version=\"${project.version};-noimport:=true</osgi.export>\n+  </properties>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>org.yaml</groupId>\n+      <artifactId>snakeyaml</artifactId>\n+      <version>1.17</version>\n+    </dependency>\n+    <dependency>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a6f53fd721f9729cccd0c530220a6544726e50aa"}, "originalPosition": 47}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d902fe3e18078eb67c0409ee10dceb308b9b924", "author": {"user": {"login": "zhangmeng916", "name": "Meng Zhang"}}, "url": "https://github.com/apache/helix/commit/8d902fe3e18078eb67c0409ee10dceb308b9b924", "committedDate": "2020-01-08T01:05:45Z", "message": "remove non necessary dependencies in pom"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5NjQyMTc1", "url": "https://github.com/apache/helix/pull/673#pullrequestreview-339642175", "createdAt": "2020-01-08T04:34:36Z", "commit": {"oid": "8d902fe3e18078eb67c0409ee10dceb308b9b924"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQwNDozNDozNlrOFbMfrQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQwNDozNDozNlrOFbMfrQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDA2MDU4OQ==", "bodyText": "I see that the parent pom also has jetty-server dependency:\n      <dependency>\n        <groupId>org.eclipse.jetty</groupId>\n        <artifactId>jetty-server</artifactId>\n        <version>8.1.8.v20121106</version>\n      </dependency>\n\nIs there any reason you want to use this specific version(9.1.0.RC0)? To me, 8.1.8.v20121106 is pretty old. Not sure if it is time to upgrade this dependency in the parent pom, too.", "url": "https://github.com/apache/helix/pull/673#discussion_r364060589", "createdAt": "2020-01-08T04:34:36Z", "author": {"login": "huizhilu"}, "path": "helix-lock/pom.xml", "diffHunk": "@@ -0,0 +1,152 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <parent>\n+    <groupId>org.apache.helix</groupId>\n+    <artifactId>helix</artifactId>\n+    <version>0.9.2-SNAPSHOT</version>\n+  </parent>\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <artifactId>helix-lock</artifactId>\n+  <packaging>bundle</packaging>\n+  <name>Apache Helix :: Distributed Lock</name>\n+\n+  <properties>\n+    <osgi.import>\n+      org.apache.helix*,\n+      org.slf4j*;version=\"[1.6,2)\",\n+      *\n+    </osgi.import>\n+    <osgi.export>org.apache.helix.lock*;version=\"${project.version};-noimport:=true</osgi.export>\n+  </properties>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>org.yaml</groupId>\n+      <artifactId>snakeyaml</artifactId>\n+      <version>1.17</version>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.apache.helix</groupId>\n+      <artifactId>helix-core</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.apache.commons</groupId>\n+      <artifactId>commons-lang3</artifactId>\n+      <version>3.8.1</version>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.apache.httpcomponents</groupId>\n+      <artifactId>httpclient</artifactId>\n+      <version>4.5.8</version>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.eclipse.jetty</groupId>\n+      <artifactId>jetty-server</artifactId>\n+      <version>9.1.0.RC0</version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8d902fe3e18078eb67c0409ee10dceb308b9b924"}, "originalPosition": 64}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxMzE0MTQ3", "url": "https://github.com/apache/helix/pull/673#pullrequestreview-341314147", "createdAt": "2020-01-10T17:31:33Z", "commit": {"oid": "8d902fe3e18078eb67c0409ee10dceb308b9b924"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQxNzozMTozNFrOFcbCkQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQxNzozOTowNlrOFcbN3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM0NzQ3Mw==", "bodyText": "Nit, I understand the other modules' names are also hardcoded. I would just make a variable module_name=\"helix-lock\" (Or better, can read from pom file) and reuse the module. I've seen duplicated code in this script, which a for loop could handle. Maybe we can have another PR to clean this script.", "url": "https://github.com/apache/helix/pull/673#discussion_r365347473", "createdAt": "2020-01-10T17:31:34Z", "author": {"login": "huizhilu"}, "path": "bump-up.command", "diffHunk": "@@ -92,6 +92,23 @@ else\n   echo \"helix-rest/$ivy_file not exist\"\n fi\n \n+echo \"bump up helix-lock/pom.xml\"\n+sed -i \"s/${version}/${new_version}/g\" helix-lock/pom.xml\n+grep -C 1 \"$new_version\" helix-lock/pom.xml\n+# git diff helix-lock/pom.xml\n+\n+ivy_file=\"helix-lock-\"$version\".ivy\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8d902fe3e18078eb67c0409ee10dceb308b9b924"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM0ODY4Mw==", "bodyText": "Nit, DEBUG and WARN? What level is expected?", "url": "https://github.com/apache/helix/pull/673#discussion_r365348683", "createdAt": "2020-01-10T17:34:45Z", "author": {"login": "huizhilu"}, "path": "helix-lock/src/main/config/log4j.properties", "diffHunk": "@@ -0,0 +1,32 @@\n+#\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+#\n+\n+# Set root logger level to DEBUG and its only appender to A1.\n+log4j.rootLogger=WARN,A1", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8d902fe3e18078eb67c0409ee10dceb308b9b924"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM1MDM2Nw==", "bodyText": "My point is, you are using an RC version 9.1.0.RC0 here for jetty-server. RC version is a release candidate. If you have any specific reason to use another version than 8.1.8.v20121106 in parent, you may want to choose a release version. What do you think?", "url": "https://github.com/apache/helix/pull/673#discussion_r365350367", "createdAt": "2020-01-10T17:39:06Z", "author": {"login": "huizhilu"}, "path": "helix-lock/pom.xml", "diffHunk": "@@ -0,0 +1,152 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <parent>\n+    <groupId>org.apache.helix</groupId>\n+    <artifactId>helix</artifactId>\n+    <version>0.9.2-SNAPSHOT</version>\n+  </parent>\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <artifactId>helix-lock</artifactId>\n+  <packaging>bundle</packaging>\n+  <name>Apache Helix :: Distributed Lock</name>\n+\n+  <properties>\n+    <osgi.import>\n+      org.apache.helix*,\n+      org.slf4j*;version=\"[1.6,2)\",\n+      *\n+    </osgi.import>\n+    <osgi.export>org.apache.helix.lock*;version=\"${project.version};-noimport:=true</osgi.export>\n+  </properties>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>org.yaml</groupId>\n+      <artifactId>snakeyaml</artifactId>\n+      <version>1.17</version>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.apache.helix</groupId>\n+      <artifactId>helix-core</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.apache.commons</groupId>\n+      <artifactId>commons-lang3</artifactId>\n+      <version>3.8.1</version>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.apache.httpcomponents</groupId>\n+      <artifactId>httpclient</artifactId>\n+      <version>4.5.8</version>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.eclipse.jetty</groupId>\n+      <artifactId>jetty-server</artifactId>\n+      <version>9.1.0.RC0</version>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDA2MDU4OQ=="}, "originalCommit": {"oid": "8d902fe3e18078eb67c0409ee10dceb308b9b924"}, "originalPosition": 64}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxMzE4MzI3", "url": "https://github.com/apache/helix/pull/673#pullrequestreview-341318327", "createdAt": "2020-01-10T17:39:41Z", "commit": {"oid": "8d902fe3e18078eb67c0409ee10dceb308b9b924"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQxNzozOTo0MVrOFcbOng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQxNzozOTo0MVrOFcbOng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM1MDU1OA==", "bodyText": "Question: My understanding is that this distributed lock is supposed to be a general module that does not assume the use of Helix. Should we call this something like zk-distributed-lock?", "url": "https://github.com/apache/helix/pull/673#discussion_r365350558", "createdAt": "2020-01-10T17:39:41Z", "author": {"login": "narendly"}, "path": "pom.xml", "diffHunk": "@@ -243,6 +243,7 @@ under the License.\n     <module>helix-core</module>\n     <module>helix-admin-webapp</module>\n     <module>helix-rest</module>\n+    <module>helix-lock</module>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8d902fe3e18078eb67c0409ee10dceb308b9b924"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxMzE5MDE0", "url": "https://github.com/apache/helix/pull/673#pullrequestreview-341319014", "createdAt": "2020-01-10T17:41:03Z", "commit": {"oid": "8d902fe3e18078eb67c0409ee10dceb308b9b924"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQxNzo0MTowM1rOFcbQmQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQxNzo0MTowM1rOFcbQmQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM1MTA2NQ==", "bodyText": "Are we planning on adding ivy files? Otherwise, this won't do anything...", "url": "https://github.com/apache/helix/pull/673#discussion_r365351065", "createdAt": "2020-01-10T17:41:03Z", "author": {"login": "narendly"}, "path": "bump-up.command", "diffHunk": "@@ -92,6 +92,23 @@ else\n   echo \"helix-rest/$ivy_file not exist\"\n fi\n \n+echo \"bump up helix-lock/pom.xml\"\n+sed -i \"s/${version}/${new_version}/g\" helix-lock/pom.xml\n+grep -C 1 \"$new_version\" helix-lock/pom.xml\n+# git diff helix-lock/pom.xml\n+\n+ivy_file=\"helix-lock-\"$version\".ivy\"\n+new_ivy_file=\"helix-lock-\"$new_version\".ivy\"\n+# echo \"$ivy_file\"\n+if [ -f helix-rest/$ivy_file ]; then\n+  echo \"bump up helix-lock/$ivy_file\"\n+  git mv \"helix-lock/$ivy_file\" \"helix-lock/$new_ivy_file\"\n+  sed -i \"s/${version}/${new_version}/g\" \"helix-lock/$new_ivy_file\"\n+  grep -C 1 \"$new_version\" \"helix-lock/$new_ivy_file\"\n+else\n+  echo \"helix-lock/$ivy_file not exist\"\n+fi", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8d902fe3e18078eb67c0409ee10dceb308b9b924"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea16aaa6f726495af4074639dd33c4817f7b763a", "author": {"user": {"login": "zhangmeng916", "name": "Meng Zhang"}}, "url": "https://github.com/apache/helix/commit/ea16aaa6f726495af4074639dd33c4817f7b763a", "committedDate": "2020-01-10T22:31:14Z", "message": "minor change"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQyNzk4MDAy", "url": "https://github.com/apache/helix/pull/673#pullrequestreview-342798002", "createdAt": "2020-01-14T19:53:40Z", "commit": {"oid": "ea16aaa6f726495af4074639dd33c4817f7b763a"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQxOTo1Mzo0MFrOFdj6CQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQxOTo1NTowOVrOFdj82Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjU0MTMyMQ==", "bodyText": "helix-rest -> helix-lock", "url": "https://github.com/apache/helix/pull/673#discussion_r366541321", "createdAt": "2020-01-14T19:53:40Z", "author": {"login": "jiajunwang"}, "path": "bump-up.command", "diffHunk": "@@ -92,6 +92,23 @@ else\n   echo \"helix-rest/$ivy_file not exist\"\n fi\n \n+echo \"bump up helix-lock/pom.xml\"\n+sed -i \"s/${version}/${new_version}/g\" helix-lock/pom.xml\n+grep -C 1 \"$new_version\" helix-lock/pom.xml\n+# git diff helix-lock/pom.xml\n+\n+ivy_file=\"helix-lock-\"$version\".ivy\"\n+new_ivy_file=\"helix-lock-\"$new_version\".ivy\"\n+# echo \"$ivy_file\"\n+if [ -f helix-rest/$ivy_file ]; then", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ea16aaa6f726495af4074639dd33c4817f7b763a"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjU0MjA0MQ==", "bodyText": "Nit, This timestamp should be newer, I guess.", "url": "https://github.com/apache/helix/pull/673#discussion_r366542041", "createdAt": "2020-01-14T19:55:09Z", "author": {"login": "jiajunwang"}, "path": "helix-lock/helix-lock-0.9.2-SNAPSHOT.ivy", "diffHunk": "@@ -0,0 +1,51 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<ivy-module version=\"1.0\">\n+\t<info organisation=\"org.apache.helix\"\n+\t\tmodule=\"helix-lock\"\n+\t\trevision=\"0.9.2-SNAPSHOT\"\n+\t\tstatus=\"integration\"\n+\t\tpublication=\"20170128141623\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ea16aaa6f726495af4074639dd33c4817f7b763a"}, "originalPosition": 25}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89d6618436b74d48bb00f58087c71965752207d3", "author": {"user": {"login": "zhangmeng916", "name": "Meng Zhang"}}, "url": "https://github.com/apache/helix/commit/89d6618436b74d48bb00f58087c71965752207d3", "committedDate": "2020-01-14T20:01:15Z", "message": "fix"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4845, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}