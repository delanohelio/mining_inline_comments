{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYzNjczODA2", "number": 1221, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxODo1OTozNFrOEWUnwg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxODo1OTozNFrOEWUnwg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxODQxOTg2OnYy", "diffSide": "RIGHT", "path": "helix-core/src/main/java/org/apache/helix/manager/zk/ParticipantManager.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxODo1OTozNFrOG9kp8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QyMToxMjoxNFrOG9n89A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzIxNjg4Mg==", "bodyText": "If we skip it, do we skip the operation for deleting old current states?", "url": "https://github.com/apache/helix/pull/1221#discussion_r467216882", "createdAt": "2020-08-07T18:59:34Z", "author": {"login": "junkaixue"}, "path": "helix-core/src/main/java/org/apache/helix/manager/zk/ParticipantManager.java", "diffHunk": "@@ -350,6 +351,12 @@ private void carryOverPreviousCurrentState() {\n                   + lastCurState);\n           continue;\n         }\n+\n+        // If the the current state is related to tasks, there is no need to carry it over to new session.\n+        if (stateModelDefRef.equals(TaskConstants.STATE_MODEL_NAME)) {\n+          continue;\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5d80d69fde9bf4b78a0eb6f11e2d4ebef3ab0e03"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzI3MDkwMA==", "bodyText": "When we establishing new session, we will carryover the old current states. If we skip this carry over for the task related current states, then the session will no longer have task related current states. Hence, there is no need to the controller to drop the current state in this case.", "url": "https://github.com/apache/helix/pull/1221#discussion_r467270900", "createdAt": "2020-08-07T21:12:14Z", "author": {"login": "alirezazamani"}, "path": "helix-core/src/main/java/org/apache/helix/manager/zk/ParticipantManager.java", "diffHunk": "@@ -350,6 +351,12 @@ private void carryOverPreviousCurrentState() {\n                   + lastCurState);\n           continue;\n         }\n+\n+        // If the the current state is related to tasks, there is no need to carry it over to new session.\n+        if (stateModelDefRef.equals(TaskConstants.STATE_MODEL_NAME)) {\n+          continue;\n+        }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzIxNjg4Mg=="}, "originalCommit": {"oid": "5d80d69fde9bf4b78a0eb6f11e2d4ebef3ab0e03"}, "originalPosition": 16}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 863, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}