{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEyNjQ4OTg5", "number": 992, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQwMzoyODoxMVrOD4192w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxNzo1NToxMVrOD5GV4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYwOTMxMDM1OnYy", "diffSide": "RIGHT", "path": "helix-core/src/main/java/org/apache/helix/controller/stages/CompatibilityCheckStage.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQwMzoyODoxMVrOGPx_jQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxNzo0NDoxOFrOGQLGpg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTIwMDkwOQ==", "bodyText": "What's the difference here?", "url": "https://github.com/apache/helix/pull/992#discussion_r419200909", "createdAt": "2020-05-04T03:28:11Z", "author": {"login": "junkaixue"}, "path": "helix-core/src/main/java/org/apache/helix/controller/stages/CompatibilityCheckStage.java", "diffHunk": "@@ -55,7 +55,7 @@ public void process(ClusterEvent event) throws Exception {\n             \"incompatible participant. pipeline will not continue. \" + \"controller: \"\n                 + manager.getInstanceName() + \", controllerVersion: \" + properties.getVersion()\n                 + \", minimumSupportedParticipantVersion: \"\n-                + properties.getProperty(\"miminum_supported_version.participant\")\n+                + properties.getProperty(\"minimum_supported_version.participant\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3a2c5e0d3025f92fdd80c462c85feaa732d543df"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTYxMTI0NQ==", "bodyText": "The previous one has a typo.", "url": "https://github.com/apache/helix/pull/992#discussion_r419611245", "createdAt": "2020-05-04T17:42:30Z", "author": {"login": "zhangmeng916"}, "path": "helix-core/src/main/java/org/apache/helix/controller/stages/CompatibilityCheckStage.java", "diffHunk": "@@ -55,7 +55,7 @@ public void process(ClusterEvent event) throws Exception {\n             \"incompatible participant. pipeline will not continue. \" + \"controller: \"\n                 + manager.getInstanceName() + \", controllerVersion: \" + properties.getVersion()\n                 + \", minimumSupportedParticipantVersion: \"\n-                + properties.getProperty(\"miminum_supported_version.participant\")\n+                + properties.getProperty(\"minimum_supported_version.participant\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTIwMDkwOQ=="}, "originalCommit": {"oid": "3a2c5e0d3025f92fdd80c462c85feaa732d543df"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTYxMjMyNg==", "bodyText": "And it caused the log to always show \"null\" for minimum support version, as it cannot find it in the property file. So the log is very confusing during debug.", "url": "https://github.com/apache/helix/pull/992#discussion_r419612326", "createdAt": "2020-05-04T17:44:18Z", "author": {"login": "zhangmeng916"}, "path": "helix-core/src/main/java/org/apache/helix/controller/stages/CompatibilityCheckStage.java", "diffHunk": "@@ -55,7 +55,7 @@ public void process(ClusterEvent event) throws Exception {\n             \"incompatible participant. pipeline will not continue. \" + \"controller: \"\n                 + manager.getInstanceName() + \", controllerVersion: \" + properties.getVersion()\n                 + \", minimumSupportedParticipantVersion: \"\n-                + properties.getProperty(\"miminum_supported_version.participant\")\n+                + properties.getProperty(\"minimum_supported_version.participant\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTIwMDkwOQ=="}, "originalCommit": {"oid": "3a2c5e0d3025f92fdd80c462c85feaa732d543df"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxMTk5MzMwOnYy", "diffSide": "RIGHT", "path": "helix-core/src/main/java/org/apache/helix/HelixManagerProperties.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxNzo1NToxMVrOGQLhKw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxODoxNzoyN1rOGQMWtQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTYxOTExNQ==", "bodyText": "This just ignore the check, right? Can we make the logic correct here, say 1.0.x > 0.9.x?", "url": "https://github.com/apache/helix/pull/992#discussion_r419619115", "createdAt": "2020-05-04T17:55:11Z", "author": {"login": "lei-xia"}, "path": "helix-core/src/main/java/org/apache/helix/HelixManagerProperties.java", "diffHunk": "@@ -116,6 +116,8 @@ static boolean versionNoLessThan(String version1, String version2) {\n \n         if (versionNum1 < versionNum2) {\n           return false;\n+        } else if (versionNum1 > versionNum2) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3a2c5e0d3025f92fdd80c462c85feaa732d543df"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTYzMDk0NA==", "bodyText": "This is not to ignore the check. This is a digit by digit comparison. See above code, the version is already split. So we are comparing \"1\" to \"0\", which breaks the loop. If it's \"0\" to \"0\", we will continue to compare next digit. It should be complete.", "url": "https://github.com/apache/helix/pull/992#discussion_r419630944", "createdAt": "2020-05-04T18:14:14Z", "author": {"login": "zhangmeng916"}, "path": "helix-core/src/main/java/org/apache/helix/HelixManagerProperties.java", "diffHunk": "@@ -116,6 +116,8 @@ static boolean versionNoLessThan(String version1, String version2) {\n \n         if (versionNum1 < versionNum2) {\n           return false;\n+        } else if (versionNum1 > versionNum2) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTYxOTExNQ=="}, "originalCommit": {"oid": "3a2c5e0d3025f92fdd80c462c85feaa732d543df"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTYzMjgyMQ==", "bodyText": "Previous error is just that it didn't break even the digit is larger the minimum version. I guess it didn't consider we might bump to 1.0.0.0.", "url": "https://github.com/apache/helix/pull/992#discussion_r419632821", "createdAt": "2020-05-04T18:17:27Z", "author": {"login": "zhangmeng916"}, "path": "helix-core/src/main/java/org/apache/helix/HelixManagerProperties.java", "diffHunk": "@@ -116,6 +116,8 @@ static boolean versionNoLessThan(String version1, String version2) {\n \n         if (versionNum1 < versionNum2) {\n           return false;\n+        } else if (versionNum1 > versionNum2) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTYxOTExNQ=="}, "originalCommit": {"oid": "3a2c5e0d3025f92fdd80c462c85feaa732d543df"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1483, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}