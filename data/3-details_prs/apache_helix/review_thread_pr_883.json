{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg2Mzk4ODg2", "number": 883, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQyMDoyNDoyMVrODnPWAA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQxNzowMzoyNVrODnjLEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyNDcyNDQ4OnYy", "diffSide": "RIGHT", "path": "helix-core/src/main/java/org/apache/helix/task/JobConfig.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQyMDoyNDoyMVrOF1H2eA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQyMDoyNDoyMVrOF1H2eA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTI0NzQ4MA==", "bodyText": "It is redundant to check containsKey: if the value is not set, parseBoolean still returns false.\nUnless the default value enableCompression is true, but I don't think this should be the case.", "url": "https://github.com/apache/helix/pull/883#discussion_r391247480", "createdAt": "2020-03-11T20:24:21Z", "author": {"login": "huizhilu"}, "path": "helix-core/src/main/java/org/apache/helix/task/JobConfig.java", "diffHunk": "@@ -553,7 +556,11 @@ public static Builder fromMap(Map<String, String> cfg) {\n       }\n       if (cfg.containsKey(JobConfigProperty.RebalanceRunningTask.name())) {\n         b.setRebalanceRunningTask(\n-            Boolean.valueOf(cfg.get(JobConfigProperty.RebalanceRunningTask.name())));\n+            Boolean.parseBoolean(cfg.get(JobConfigProperty.RebalanceRunningTask.name())));\n+      }\n+      if (cfg.containsKey(ZNRecord.ENABLE_COMPRESSION_BOOLEAN_FIELD)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ddf865025cac7a8dbf5475ab2c52bf9f5f16c25"}, "originalPosition": 38}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyNDcyNjkzOnYy", "diffSide": "RIGHT", "path": "helix-core/src/main/java/org/apache/helix/task/WorkflowConfig.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQyMDoyNTowOVrOF1H4Bw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQyMDoyNTowOVrOF1H4Bw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTI0Nzg3OQ==", "bodyText": "No need to check containsKey, unless the default value enableCompression is true.", "url": "https://github.com/apache/helix/pull/883#discussion_r391247879", "createdAt": "2020-03-11T20:25:09Z", "author": {"login": "huizhilu"}, "path": "helix-core/src/main/java/org/apache/helix/task/WorkflowConfig.java", "diffHunk": "@@ -552,6 +559,11 @@ public Builder setConfigMap(Map<String, String> cfg) {\n         }\n       }\n \n+      if (cfg.containsKey(ZNRecord.ENABLE_COMPRESSION_BOOLEAN_FIELD)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ddf865025cac7a8dbf5475ab2c52bf9f5f16c25"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyNzk3MzMxOnYy", "diffSide": "RIGHT", "path": "helix-core/src/main/java/org/apache/helix/task/JobConfig.java", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQxNzowMzoyNVrOF1nW0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQwNToxMDo0M1rOF2X1HQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTc2MzY2NQ==", "bodyText": "Then we should do a check here, right? If get null, we will get exception for parse boolean.", "url": "https://github.com/apache/helix/pull/883#discussion_r391763665", "createdAt": "2020-03-12T17:03:25Z", "author": {"login": "junkaixue"}, "path": "helix-core/src/main/java/org/apache/helix/task/JobConfig.java", "diffHunk": "@@ -553,8 +556,11 @@ public static Builder fromMap(Map<String, String> cfg) {\n       }\n       if (cfg.containsKey(JobConfigProperty.RebalanceRunningTask.name())) {\n         b.setRebalanceRunningTask(\n-            Boolean.valueOf(cfg.get(JobConfigProperty.RebalanceRunningTask.name())));\n+            Boolean.parseBoolean(cfg.get(JobConfigProperty.RebalanceRunningTask.name())));\n       }\n+      // If not set, parseBoolean returns false for null\n+      b.setEnableCompression(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "92729613cbc3eef1c43eb37d33f627c06bae3025"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTc5OTYyNQ==", "bodyText": "@dasahcc\nThis is the implementation for parseBoolean() if the comment wasn't clear:\n    public static boolean parseBoolean(String s) {\n        return ((s != null) && s.equalsIgnoreCase(\"true\"));\n    }\n\nDo you see why the null check is not necessary?", "url": "https://github.com/apache/helix/pull/883#discussion_r391799625", "createdAt": "2020-03-12T18:03:35Z", "author": {"login": "narendly"}, "path": "helix-core/src/main/java/org/apache/helix/task/JobConfig.java", "diffHunk": "@@ -553,8 +556,11 @@ public static Builder fromMap(Map<String, String> cfg) {\n       }\n       if (cfg.containsKey(JobConfigProperty.RebalanceRunningTask.name())) {\n         b.setRebalanceRunningTask(\n-            Boolean.valueOf(cfg.get(JobConfigProperty.RebalanceRunningTask.name())));\n+            Boolean.parseBoolean(cfg.get(JobConfigProperty.RebalanceRunningTask.name())));\n       }\n+      // If not set, parseBoolean returns false for null\n+      b.setEnableCompression(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTc2MzY2NQ=="}, "originalCommit": {"oid": "92729613cbc3eef1c43eb37d33f627c06bae3025"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTc5OTkyNA==", "bodyText": "public static boolean parseBoolean(String s) {\n        return ((s != null) && s.equalsIgnoreCase(\"true\"));\n    }", "url": "https://github.com/apache/helix/pull/883#discussion_r391799924", "createdAt": "2020-03-12T18:04:07Z", "author": {"login": "narendly"}, "path": "helix-core/src/main/java/org/apache/helix/task/JobConfig.java", "diffHunk": "@@ -553,8 +556,11 @@ public static Builder fromMap(Map<String, String> cfg) {\n       }\n       if (cfg.containsKey(JobConfigProperty.RebalanceRunningTask.name())) {\n         b.setRebalanceRunningTask(\n-            Boolean.valueOf(cfg.get(JobConfigProperty.RebalanceRunningTask.name())));\n+            Boolean.parseBoolean(cfg.get(JobConfigProperty.RebalanceRunningTask.name())));\n       }\n+      // If not set, parseBoolean returns false for null\n+      b.setEnableCompression(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTc2MzY2NQ=="}, "originalCommit": {"oid": "92729613cbc3eef1c43eb37d33f627c06bae3025"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjQxOTY3Mg==", "bodyText": "OK. The null should be final. But it make this entry explicitly in ZNRecord, right? Usually, our check is if the entry is not in ZNRecord, we use default value. But we dont carry the default value and explicitly set in ZNRecord to reduce the size of data set.\nIn this case, it is better we follow our convention: do the check when we carry it over.", "url": "https://github.com/apache/helix/pull/883#discussion_r392419672", "createdAt": "2020-03-13T19:09:01Z", "author": {"login": "junkaixue"}, "path": "helix-core/src/main/java/org/apache/helix/task/JobConfig.java", "diffHunk": "@@ -553,8 +556,11 @@ public static Builder fromMap(Map<String, String> cfg) {\n       }\n       if (cfg.containsKey(JobConfigProperty.RebalanceRunningTask.name())) {\n         b.setRebalanceRunningTask(\n-            Boolean.valueOf(cfg.get(JobConfigProperty.RebalanceRunningTask.name())));\n+            Boolean.parseBoolean(cfg.get(JobConfigProperty.RebalanceRunningTask.name())));\n       }\n+      // If not set, parseBoolean returns false for null\n+      b.setEnableCompression(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTc2MzY2NQ=="}, "originalCommit": {"oid": "92729613cbc3eef1c43eb37d33f627c06bae3025"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU1Nzg1Mw==", "bodyText": "Okay I see what you mean. I will revert to the original pattern.", "url": "https://github.com/apache/helix/pull/883#discussion_r392557853", "createdAt": "2020-03-14T05:10:43Z", "author": {"login": "narendly"}, "path": "helix-core/src/main/java/org/apache/helix/task/JobConfig.java", "diffHunk": "@@ -553,8 +556,11 @@ public static Builder fromMap(Map<String, String> cfg) {\n       }\n       if (cfg.containsKey(JobConfigProperty.RebalanceRunningTask.name())) {\n         b.setRebalanceRunningTask(\n-            Boolean.valueOf(cfg.get(JobConfigProperty.RebalanceRunningTask.name())));\n+            Boolean.parseBoolean(cfg.get(JobConfigProperty.RebalanceRunningTask.name())));\n       }\n+      // If not set, parseBoolean returns false for null\n+      b.setEnableCompression(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTc2MzY2NQ=="}, "originalCommit": {"oid": "92729613cbc3eef1c43eb37d33f627c06bae3025"}, "originalPosition": 39}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1369, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}