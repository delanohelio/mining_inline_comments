{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI1MzcwMzM1", "number": 1041, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMFQwODowOToxMFrOEBF-fQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwNTo1Nzo1OVrOECArTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5NTgxOTQ5OnYy", "diffSide": "RIGHT", "path": "helix-rest/src/main/java/org/apache/helix/rest/server/json/instance/StoppableCheck.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMFQwODowOToxMFrOGcxVSA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxODoyMzo1OFrOGdVMvg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjgyMTU3Ng==", "bodyText": "There are other fields in the response json as below.\n{\n  \"instance_stoppable_parallel\" : [ ],\n  \"instance_not_stoppable_with_reasons\" : {\n    \"localhost_8080\": [\n        \"CustomPartition:partion1\",\n        \"CustomPartition:partition2\"\n    ]\n  }\n}\n\n{\n  \"instance_stoppable_parallel\" : [ ],\n  \"instance_not_stoppable_with_reasons\" : {\n    \"localhost_8080\" : [ \"CustomInstance:localhost_8080\" ]\n  }\n}\n\nShall we make the keys format consistent: custom_health_failure_instance: ? (_instance at the end indicates the value is an instance. And add a space after colon :?) It looks more consistent and clearer to me.\n{\n  \"instance_stoppable_parallel\" : [ ],\n  \"instance_not_stoppable_with_reasons\" : {\n    \"localhost_8080\": [\n        \"custom_health_failure_partition: partion1\",\n        \"custom_health_failure_partition: partition2\"\n    ]\n  }\n}\n\nJust a thought: not sure if we have to consider backward-compatibility: if some tools are parsing the json response to determine stoppable, this change will break the tools. Internal code search doesn't show such code usage.", "url": "https://github.com/apache/helix/pull/1041#discussion_r432821576", "createdAt": "2020-05-30T08:09:10Z", "author": {"login": "huizhilu"}, "path": "helix-rest/src/main/java/org/apache/helix/rest/server/json/instance/StoppableCheck.java", "diffHunk": "@@ -30,8 +30,8 @@\n   // Category to differentiate which step the check fails\n   public enum Category {\n     HELIX_OWN_CHECK(\"Helix:\"),\n-    CUSTOM_INSTANCE_CHECK(\"CustomInstance:\"),\n-    CUSTOM_PARTITION_CHECK(\"CustomPartition:\");\n+    CUSTOM_INSTANCE_CHECK(\"CustomInstanceHealthFailure:\"),\n+    CUSTOM_PARTITION_CHECK(\"CustomPartitionHealthFailure:\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f2e1e223b5399e40df43568b4606826b5a9d7427"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzQwOTIxNA==", "bodyText": "Good suggestion.", "url": "https://github.com/apache/helix/pull/1041#discussion_r433409214", "createdAt": "2020-06-01T18:23:58Z", "author": {"login": "junkaixue"}, "path": "helix-rest/src/main/java/org/apache/helix/rest/server/json/instance/StoppableCheck.java", "diffHunk": "@@ -30,8 +30,8 @@\n   // Category to differentiate which step the check fails\n   public enum Category {\n     HELIX_OWN_CHECK(\"Helix:\"),\n-    CUSTOM_INSTANCE_CHECK(\"CustomInstance:\"),\n-    CUSTOM_PARTITION_CHECK(\"CustomPartition:\");\n+    CUSTOM_INSTANCE_CHECK(\"CustomInstanceHealthFailure:\"),\n+    CUSTOM_PARTITION_CHECK(\"CustomPartitionHealthFailure:\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjgyMTU3Ng=="}, "originalCommit": {"oid": "f2e1e223b5399e40df43568b4606826b5a9d7427"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwNTQzNjkzOnYy", "diffSide": "RIGHT", "path": "helix-rest/src/main/java/org/apache/helix/rest/server/json/instance/StoppableCheck.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwNTo1Nzo1OVrOGeNE7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwMzo1Njo0NlrOGe0-GA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMyNDcxNw==", "bodyText": "Do you think lower case would be more consistent with other fields and easier to read? Adding a space after colon is clearer?", "url": "https://github.com/apache/helix/pull/1041#discussion_r434324717", "createdAt": "2020-06-03T05:57:59Z", "author": {"login": "huizhilu"}, "path": "helix-rest/src/main/java/org/apache/helix/rest/server/json/instance/StoppableCheck.java", "diffHunk": "@@ -29,9 +29,9 @@\n public class StoppableCheck {\n   // Category to differentiate which step the check fails\n   public enum Category {\n-    HELIX_OWN_CHECK(\"Helix:\"),\n-    CUSTOM_INSTANCE_CHECK(\"CustomInstance:\"),\n-    CUSTOM_PARTITION_CHECK(\"CustomPartition:\");\n+    HELIX_OWN_CHECK(\"HELIX:\"),\n+    CUSTOM_INSTANCE_CHECK(\"CUSTOM_INSTANCE_HEALTH_FAILURE:\"),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "db54e3d753146a2e423109806a8f59933c2bcbc0"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDg2NzI0Mw==", "bodyText": "I would prefer to put the \":\" into the string formatting part later. The enum info should be cleaner the better.", "url": "https://github.com/apache/helix/pull/1041#discussion_r434867243", "createdAt": "2020-06-03T21:26:25Z", "author": {"login": "jiajunwang"}, "path": "helix-rest/src/main/java/org/apache/helix/rest/server/json/instance/StoppableCheck.java", "diffHunk": "@@ -29,9 +29,9 @@\n public class StoppableCheck {\n   // Category to differentiate which step the check fails\n   public enum Category {\n-    HELIX_OWN_CHECK(\"Helix:\"),\n-    CUSTOM_INSTANCE_CHECK(\"CustomInstance:\"),\n-    CUSTOM_PARTITION_CHECK(\"CustomPartition:\");\n+    HELIX_OWN_CHECK(\"HELIX:\"),\n+    CUSTOM_INSTANCE_CHECK(\"CUSTOM_INSTANCE_HEALTH_FAILURE:\"),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMyNDcxNw=="}, "originalCommit": {"oid": "db54e3d753146a2e423109806a8f59933c2bcbc0"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDg4ODAzNg==", "bodyText": "Yeah.. I think the best way is to have a json class for this.. But that would need more work. Maybe we could do it later in helix rest improvement.", "url": "https://github.com/apache/helix/pull/1041#discussion_r434888036", "createdAt": "2020-06-03T22:15:51Z", "author": {"login": "huizhilu"}, "path": "helix-rest/src/main/java/org/apache/helix/rest/server/json/instance/StoppableCheck.java", "diffHunk": "@@ -29,9 +29,9 @@\n public class StoppableCheck {\n   // Category to differentiate which step the check fails\n   public enum Category {\n-    HELIX_OWN_CHECK(\"Helix:\"),\n-    CUSTOM_INSTANCE_CHECK(\"CustomInstance:\"),\n-    CUSTOM_PARTITION_CHECK(\"CustomPartition:\");\n+    HELIX_OWN_CHECK(\"HELIX:\"),\n+    CUSTOM_INSTANCE_CHECK(\"CUSTOM_INSTANCE_HEALTH_FAILURE:\"),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMyNDcxNw=="}, "originalCommit": {"oid": "db54e3d753146a2e423109806a8f59933c2bcbc0"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDk3ODMyOA==", "bodyText": "This require more factor work for the TODO as we discussed before. This change only helps make clear understanding of the error. Better to address in different PR.", "url": "https://github.com/apache/helix/pull/1041#discussion_r434978328", "createdAt": "2020-06-04T03:56:46Z", "author": {"login": "junkaixue"}, "path": "helix-rest/src/main/java/org/apache/helix/rest/server/json/instance/StoppableCheck.java", "diffHunk": "@@ -29,9 +29,9 @@\n public class StoppableCheck {\n   // Category to differentiate which step the check fails\n   public enum Category {\n-    HELIX_OWN_CHECK(\"Helix:\"),\n-    CUSTOM_INSTANCE_CHECK(\"CustomInstance:\"),\n-    CUSTOM_PARTITION_CHECK(\"CustomPartition:\");\n+    HELIX_OWN_CHECK(\"HELIX:\"),\n+    CUSTOM_INSTANCE_CHECK(\"CUSTOM_INSTANCE_HEALTH_FAILURE:\"),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMyNDcxNw=="}, "originalCommit": {"oid": "db54e3d753146a2e423109806a8f59933c2bcbc0"}, "originalPosition": 8}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1099, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}