{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkwMTU0NTcy", "number": 902, "reviewThreads": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQwMDo1OToxNFrODo7-bA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQwNTo0ODo0NFrODo-gEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0MjUyMjY4OnYy", "diffSide": "RIGHT", "path": "helix-rest/src/main/java/org/apache/helix/rest/metadatastore/accessor/ZkRoutingDataWriter.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQwMDo1OToxNFrOF3zBug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQwMToxMzozMlrOF3zOqw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDA1MjAyNg==", "bodyText": "http://webreference.com/html/tutorial2/2.html\nUsually port is an optional concept in a URL. Let's not throw an exception. If it's null or empty, we simply don't append it.", "url": "https://github.com/apache/helix/pull/902#discussion_r394052026", "createdAt": "2020-03-18T00:59:14Z", "author": {"login": "narendly"}, "path": "helix-rest/src/main/java/org/apache/helix/rest/metadatastore/accessor/ZkRoutingDataWriter.java", "diffHunk": "@@ -87,16 +87,18 @@ public ZkRoutingDataWriter(String namespace, String zkAddress) {\n \n     // Get the hostname (REST endpoint) from System property\n     String hostName = System.getProperty(MetadataStoreRoutingConstants.MSDS_SERVER_HOSTNAME_KEY);\n+    String port = System.getProperty(MetadataStoreRoutingConstants.MSDS_SERVER_PORT_KEY);\n     if (hostName == null || hostName.isEmpty()) {\n       throw new IllegalStateException(\n-          \"Unable to get the hostname of this server instance. System.getProperty fails to fetch \"\n+          \"Unable to get the hostname of this server instance or the hostname is empty. System.getProperty fails to fetch \"\n               + MetadataStoreRoutingConstants.MSDS_SERVER_HOSTNAME_KEY + \".\");\n     }\n-    // remove trailing slash\n-    if (hostName.charAt(hostName.length() - 1) == '/') {\n-      hostName = hostName.substring(0, hostName.length() - 1);\n+    if (port == null || port.isEmpty()) {\n+      throw new IllegalStateException(\n+          \"Unable to get the port of this server instance or the port is empty. System.getProperty fails to fetch \"\n+              + MetadataStoreRoutingConstants.MSDS_SERVER_PORT_KEY + \".\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "605d2a8e365c5a683efb5e4ef6a90b3f04cf408f"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDA1NTMzOQ==", "bodyText": "Resolved offline.", "url": "https://github.com/apache/helix/pull/902#discussion_r394055339", "createdAt": "2020-03-18T01:13:32Z", "author": {"login": "NealSun96"}, "path": "helix-rest/src/main/java/org/apache/helix/rest/metadatastore/accessor/ZkRoutingDataWriter.java", "diffHunk": "@@ -87,16 +87,18 @@ public ZkRoutingDataWriter(String namespace, String zkAddress) {\n \n     // Get the hostname (REST endpoint) from System property\n     String hostName = System.getProperty(MetadataStoreRoutingConstants.MSDS_SERVER_HOSTNAME_KEY);\n+    String port = System.getProperty(MetadataStoreRoutingConstants.MSDS_SERVER_PORT_KEY);\n     if (hostName == null || hostName.isEmpty()) {\n       throw new IllegalStateException(\n-          \"Unable to get the hostname of this server instance. System.getProperty fails to fetch \"\n+          \"Unable to get the hostname of this server instance or the hostname is empty. System.getProperty fails to fetch \"\n               + MetadataStoreRoutingConstants.MSDS_SERVER_HOSTNAME_KEY + \".\");\n     }\n-    // remove trailing slash\n-    if (hostName.charAt(hostName.length() - 1) == '/') {\n-      hostName = hostName.substring(0, hostName.length() - 1);\n+    if (port == null || port.isEmpty()) {\n+      throw new IllegalStateException(\n+          \"Unable to get the port of this server instance or the port is empty. System.getProperty fails to fetch \"\n+              + MetadataStoreRoutingConstants.MSDS_SERVER_PORT_KEY + \".\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDA1MjAyNg=="}, "originalCommit": {"oid": "605d2a8e365c5a683efb5e4ef6a90b3f04cf408f"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0MjUzNzM3OnYy", "diffSide": "RIGHT", "path": "helix-rest/src/main/java/org/apache/helix/rest/metadatastore/accessor/ZkRoutingDataWriter.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQwMTowOToxNFrOF3zKxA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQwMjoyNDowMFrOF30RMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDA1NDM0MA==", "bodyText": "Using a vanilla hostname would be enough here. Let's create a ZNRecord with two simple fields added: hostname and port?", "url": "https://github.com/apache/helix/pull/902#discussion_r394054340", "createdAt": "2020-03-18T01:09:14Z", "author": {"login": "narendly"}, "path": "helix-rest/src/main/java/org/apache/helix/rest/metadatastore/accessor/ZkRoutingDataWriter.java", "diffHunk": "@@ -87,16 +87,18 @@ public ZkRoutingDataWriter(String namespace, String zkAddress) {\n \n     // Get the hostname (REST endpoint) from System property\n     String hostName = System.getProperty(MetadataStoreRoutingConstants.MSDS_SERVER_HOSTNAME_KEY);\n+    String port = System.getProperty(MetadataStoreRoutingConstants.MSDS_SERVER_PORT_KEY);\n     if (hostName == null || hostName.isEmpty()) {\n       throw new IllegalStateException(\n-          \"Unable to get the hostname of this server instance. System.getProperty fails to fetch \"\n+          \"Unable to get the hostname of this server instance or the hostname is empty. System.getProperty fails to fetch \"\n               + MetadataStoreRoutingConstants.MSDS_SERVER_HOSTNAME_KEY + \".\");\n     }\n-    // remove trailing slash\n-    if (hostName.charAt(hostName.length() - 1) == '/') {\n-      hostName = hostName.substring(0, hostName.length() - 1);\n+    if (port == null || port.isEmpty()) {\n+      throw new IllegalStateException(\n+          \"Unable to get the port of this server instance or the port is empty. System.getProperty fails to fetch \"\n+              + MetadataStoreRoutingConstants.MSDS_SERVER_PORT_KEY + \".\");\n     }\n-    _myHostName = HttpConstants.HTTP_PROTOCOL_PREFIX + hostName;\n+    _myHostName = HttpConstants.HTTP_PROTOCOL_PREFIX + hostName + \":\" + port;\n     ZNRecord myServerInfo = new ZNRecord(_myHostName);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "605d2a8e365c5a683efb5e4ef6a90b3f04cf408f"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDA3MjM3MA==", "bodyText": "updated with a znode with 3 fields, as we discussed.", "url": "https://github.com/apache/helix/pull/902#discussion_r394072370", "createdAt": "2020-03-18T02:24:00Z", "author": {"login": "NealSun96"}, "path": "helix-rest/src/main/java/org/apache/helix/rest/metadatastore/accessor/ZkRoutingDataWriter.java", "diffHunk": "@@ -87,16 +87,18 @@ public ZkRoutingDataWriter(String namespace, String zkAddress) {\n \n     // Get the hostname (REST endpoint) from System property\n     String hostName = System.getProperty(MetadataStoreRoutingConstants.MSDS_SERVER_HOSTNAME_KEY);\n+    String port = System.getProperty(MetadataStoreRoutingConstants.MSDS_SERVER_PORT_KEY);\n     if (hostName == null || hostName.isEmpty()) {\n       throw new IllegalStateException(\n-          \"Unable to get the hostname of this server instance. System.getProperty fails to fetch \"\n+          \"Unable to get the hostname of this server instance or the hostname is empty. System.getProperty fails to fetch \"\n               + MetadataStoreRoutingConstants.MSDS_SERVER_HOSTNAME_KEY + \".\");\n     }\n-    // remove trailing slash\n-    if (hostName.charAt(hostName.length() - 1) == '/') {\n-      hostName = hostName.substring(0, hostName.length() - 1);\n+    if (port == null || port.isEmpty()) {\n+      throw new IllegalStateException(\n+          \"Unable to get the port of this server instance or the port is empty. System.getProperty fails to fetch \"\n+              + MetadataStoreRoutingConstants.MSDS_SERVER_PORT_KEY + \".\");\n     }\n-    _myHostName = HttpConstants.HTTP_PROTOCOL_PREFIX + hostName;\n+    _myHostName = HttpConstants.HTTP_PROTOCOL_PREFIX + hostName + \":\" + port;\n     ZNRecord myServerInfo = new ZNRecord(_myHostName);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDA1NDM0MA=="}, "originalCommit": {"oid": "605d2a8e365c5a683efb5e4ef6a90b3f04cf408f"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0MjU0MzIzOnYy", "diffSide": "RIGHT", "path": "helix-rest/src/main/java/org/apache/helix/rest/metadatastore/accessor/ZkRoutingDataWriter.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQwMToxMzoxOVrOF3zOdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQwMToxNDowN1rOF3zPKw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDA1NTI4Ng==", "bodyText": "Add some JavaDoc explaining what you're doing with examples please? This is one of the things that when you look back at it 6 months from now, you'll have to do some digging around to understand what youre doing. Having a comment with an example would help :)", "url": "https://github.com/apache/helix/pull/902#discussion_r394055286", "createdAt": "2020-03-18T01:13:19Z", "author": {"login": "narendly"}, "path": "helix-rest/src/main/java/org/apache/helix/rest/metadatastore/accessor/ZkRoutingDataWriter.java", "diffHunk": "@@ -344,6 +346,11 @@ protected boolean deleteZkShardingKey(String realm, String shardingKey) {\n   private String constructUrlSuffix(String... urlParams) {\n     List<String> allUrlParameters = new ArrayList<>(\n         Arrays.asList(MetadataStoreRoutingConstants.MSDS_NAMESPACES_URL_PREFIX, \"/\", _namespace));\n+    String contextUrlPrefix =\n+        System.getProperty(MetadataStoreRoutingConstants.MSDS_CONTEXT_URL_PREFIX_KEY);\n+    if (contextUrlPrefix != null && !contextUrlPrefix.isEmpty()) {\n+      allUrlParameters.add(0, contextUrlPrefix);\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "605d2a8e365c5a683efb5e4ef6a90b3f04cf408f"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDA1NTQ2Nw==", "bodyText": "Sure thing.", "url": "https://github.com/apache/helix/pull/902#discussion_r394055467", "createdAt": "2020-03-18T01:14:07Z", "author": {"login": "NealSun96"}, "path": "helix-rest/src/main/java/org/apache/helix/rest/metadatastore/accessor/ZkRoutingDataWriter.java", "diffHunk": "@@ -344,6 +346,11 @@ protected boolean deleteZkShardingKey(String realm, String shardingKey) {\n   private String constructUrlSuffix(String... urlParams) {\n     List<String> allUrlParameters = new ArrayList<>(\n         Arrays.asList(MetadataStoreRoutingConstants.MSDS_NAMESPACES_URL_PREFIX, \"/\", _namespace));\n+    String contextUrlPrefix =\n+        System.getProperty(MetadataStoreRoutingConstants.MSDS_CONTEXT_URL_PREFIX_KEY);\n+    if (contextUrlPrefix != null && !contextUrlPrefix.isEmpty()) {\n+      allUrlParameters.add(0, contextUrlPrefix);\n+    }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDA1NTI4Ng=="}, "originalCommit": {"oid": "605d2a8e365c5a683efb5e4ef6a90b3f04cf408f"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0MjU0MzgzOnYy", "diffSide": "RIGHT", "path": "helix-rest/src/main/java/org/apache/helix/rest/server/resources/metadatastore/MetadataStoreDirectoryAccessor.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQwMToxMzo0N1rOF3zO4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQwMToxNDozMlrOF3zPgw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDA1NTM5NQ==", "bodyText": "Why was this change needed?", "url": "https://github.com/apache/helix/pull/902#discussion_r394055395", "createdAt": "2020-03-18T01:13:47Z", "author": {"login": "narendly"}, "path": "helix-rest/src/main/java/org/apache/helix/rest/server/resources/metadatastore/MetadataStoreDirectoryAccessor.java", "diffHunk": "@@ -235,7 +235,9 @@ public Response setRoutingData(String jsonContent) {\n       Map<String, List<String>> routingData =\n           OBJECT_MAPPER.readValue(jsonContent, new TypeReference<HashMap<String, List<String>>>() {\n           });\n-      _metadataStoreDirectory.setNamespaceRoutingData(_namespace, routingData);\n+      if (!_metadataStoreDirectory.setNamespaceRoutingData(_namespace, routingData)) {\n+        return serverError();\n+      }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "605d2a8e365c5a683efb5e4ef6a90b3f04cf408f"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDA1NTU1NQ==", "bodyText": "One of the issues I found out: SetRoutingData does not respect the return value of the underlying function.", "url": "https://github.com/apache/helix/pull/902#discussion_r394055555", "createdAt": "2020-03-18T01:14:32Z", "author": {"login": "NealSun96"}, "path": "helix-rest/src/main/java/org/apache/helix/rest/server/resources/metadatastore/MetadataStoreDirectoryAccessor.java", "diffHunk": "@@ -235,7 +235,9 @@ public Response setRoutingData(String jsonContent) {\n       Map<String, List<String>> routingData =\n           OBJECT_MAPPER.readValue(jsonContent, new TypeReference<HashMap<String, List<String>>>() {\n           });\n-      _metadataStoreDirectory.setNamespaceRoutingData(_namespace, routingData);\n+      if (!_metadataStoreDirectory.setNamespaceRoutingData(_namespace, routingData)) {\n+        return serverError();\n+      }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDA1NTM5NQ=="}, "originalCommit": {"oid": "605d2a8e365c5a683efb5e4ef6a90b3f04cf408f"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0MjU0NDg3OnYy", "diffSide": "RIGHT", "path": "helix-rest/src/test/java/org/apache/helix/rest/server/TestMSDAccessorLeaderElection.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQwMToxNDozNlrOF3zPlQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQwMToxOTowMVrOF3zTiQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDA1NTU3Mw==", "bodyText": "Do these not need to be cleared after the test?", "url": "https://github.com/apache/helix/pull/902#discussion_r394055573", "createdAt": "2020-03-18T01:14:36Z", "author": {"login": "narendly"}, "path": "helix-rest/src/test/java/org/apache/helix/rest/server/TestMSDAccessorLeaderElection.java", "diffHunk": "@@ -99,7 +99,9 @@ public void beforeClass() throws Exception {\n \n     // Set the new uri to be used in leader election\n     System.setProperty(MetadataStoreRoutingConstants.MSDS_SERVER_HOSTNAME_KEY,\n-        getBaseUri().getHost() + \":\" + newPort);\n+        getBaseUri().getHost());\n+    System\n+        .setProperty(MetadataStoreRoutingConstants.MSDS_SERVER_PORT_KEY, Integer.toString(newPort));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "605d2a8e365c5a683efb5e4ef6a90b3f04cf408f"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDA1NjU4NQ==", "bodyText": "Nope, the test base it extends clears up the system properties. These 2 lines are overwriting the old properties set by the test base, and the test base cleans up after itself.", "url": "https://github.com/apache/helix/pull/902#discussion_r394056585", "createdAt": "2020-03-18T01:19:01Z", "author": {"login": "NealSun96"}, "path": "helix-rest/src/test/java/org/apache/helix/rest/server/TestMSDAccessorLeaderElection.java", "diffHunk": "@@ -99,7 +99,9 @@ public void beforeClass() throws Exception {\n \n     // Set the new uri to be used in leader election\n     System.setProperty(MetadataStoreRoutingConstants.MSDS_SERVER_HOSTNAME_KEY,\n-        getBaseUri().getHost() + \":\" + newPort);\n+        getBaseUri().getHost());\n+    System\n+        .setProperty(MetadataStoreRoutingConstants.MSDS_SERVER_PORT_KEY, Integer.toString(newPort));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDA1NTU3Mw=="}, "originalCommit": {"oid": "605d2a8e365c5a683efb5e4ef6a90b3f04cf408f"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0MjkzMzYzOnYy", "diffSide": "RIGHT", "path": "helix-rest/src/main/java/org/apache/helix/rest/metadatastore/accessor/ZkRoutingDataWriter.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQwNTo0NzowOVrOF33DzA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxNTo1MDowMlrOF4LY2A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDExODA5Mg==", "bodyText": "Why is leader's host name removed? This was very useful information in debugging.", "url": "https://github.com/apache/helix/pull/902#discussion_r394118092", "createdAt": "2020-03-18T05:47:09Z", "author": {"login": "narendly"}, "path": "helix-rest/src/main/java/org/apache/helix/rest/metadatastore/accessor/ZkRoutingDataWriter.java", "diffHunk": "@@ -391,8 +422,8 @@ protected boolean sendRequestToLeader(HttpUriRequest request, int expectedRespon\n       }\n     } catch (IOException e) {\n       LOG.error(\n-          \"The forwarded request to leader raised an exception. Uri: {} Current hostname: {} Leader hostname: {}\",\n-          request.getURI(), _myHostName, leaderHostName, e);\n+          \"The forwarded request to leader raised an exception. Uri: {} Current hostname: {} \",\n+          request.getURI(), _myHostName, e);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "70018701baddb1f8088f7bbd2705845261d37769"}, "originalPosition": 138}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDQ1MTE2MA==", "bodyText": "Because the leader endpoint is already included in request.getURI(). Logging an extra copy is redundant.", "url": "https://github.com/apache/helix/pull/902#discussion_r394451160", "createdAt": "2020-03-18T15:50:02Z", "author": {"login": "NealSun96"}, "path": "helix-rest/src/main/java/org/apache/helix/rest/metadatastore/accessor/ZkRoutingDataWriter.java", "diffHunk": "@@ -391,8 +422,8 @@ protected boolean sendRequestToLeader(HttpUriRequest request, int expectedRespon\n       }\n     } catch (IOException e) {\n       LOG.error(\n-          \"The forwarded request to leader raised an exception. Uri: {} Current hostname: {} Leader hostname: {}\",\n-          request.getURI(), _myHostName, leaderHostName, e);\n+          \"The forwarded request to leader raised an exception. Uri: {} Current hostname: {} \",\n+          request.getURI(), _myHostName, e);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDExODA5Mg=="}, "originalCommit": {"oid": "70018701baddb1f8088f7bbd2705845261d37769"}, "originalPosition": 138}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0MjkzNjQ5OnYy", "diffSide": "RIGHT", "path": "helix-rest/src/main/java/org/apache/helix/rest/metadatastore/accessor/ZkRoutingDataWriter.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQwNTo0ODo0NFrOF33Feg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxNTo1MDoyNVrOF4LaDw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDExODUyMg==", "bodyText": "\"Host name is not set or is empty\" would be better.", "url": "https://github.com/apache/helix/pull/902#discussion_r394118522", "createdAt": "2020-03-18T05:48:44Z", "author": {"login": "narendly"}, "path": "helix-rest/src/main/java/org/apache/helix/rest/metadatastore/accessor/ZkRoutingDataWriter.java", "diffHunk": "@@ -89,15 +94,27 @@ public ZkRoutingDataWriter(String namespace, String zkAddress) {\n     String hostName = System.getProperty(MetadataStoreRoutingConstants.MSDS_SERVER_HOSTNAME_KEY);\n     if (hostName == null || hostName.isEmpty()) {\n       throw new IllegalStateException(\n-          \"Unable to get the hostname of this server instance. System.getProperty fails to fetch \"\n+          \"Unable to get the hostname of this server instance or the hostname is empty. System.getProperty fails to fetch \"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "70018701baddb1f8088f7bbd2705845261d37769"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDQ1MTQ3MQ==", "bodyText": "Ok.", "url": "https://github.com/apache/helix/pull/902#discussion_r394451471", "createdAt": "2020-03-18T15:50:25Z", "author": {"login": "NealSun96"}, "path": "helix-rest/src/main/java/org/apache/helix/rest/metadatastore/accessor/ZkRoutingDataWriter.java", "diffHunk": "@@ -89,15 +94,27 @@ public ZkRoutingDataWriter(String namespace, String zkAddress) {\n     String hostName = System.getProperty(MetadataStoreRoutingConstants.MSDS_SERVER_HOSTNAME_KEY);\n     if (hostName == null || hostName.isEmpty()) {\n       throw new IllegalStateException(\n-          \"Unable to get the hostname of this server instance. System.getProperty fails to fetch \"\n+          \"Unable to get the hostname of this server instance or the hostname is empty. System.getProperty fails to fetch \"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDExODUyMg=="}, "originalCommit": {"oid": "70018701baddb1f8088f7bbd2705845261d37769"}, "originalPosition": 24}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1402, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}