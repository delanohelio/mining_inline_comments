{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgzNzc4MzQz", "number": 856, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxODo0NTozOFrODlKPxw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxODo1NDowOFrODlKalw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwMjkxNzgzOnYy", "diffSide": "RIGHT", "path": "helix-core/src/main/java/org/apache/helix/ConfigAccessor.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxODo0NTozOFrOFx5MIw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxODo0NTozOFrOFx5MIw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzg2MTUzOQ==", "bodyText": "Nit: change the java doc: \"HelixZkClient\" -> \"RealmAwareZkClient\"", "url": "https://github.com/apache/helix/pull/856#discussion_r387861539", "createdAt": "2020-03-04T18:45:38Z", "author": {"login": "huizhilu"}, "path": "helix-core/src/main/java/org/apache/helix/ConfigAccessor.java", "diffHunk": "@@ -111,7 +111,7 @@ private ConfigAccessor(Builder builder) throws IOException, InvalidRoutingDataEx\n    * @param zkClient", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3671e098e9998f687d1850f75844a6dda6d65c33"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwMjk0NTUxOnYy", "diffSide": "RIGHT", "path": "helix-core/src/main/java/org/apache/helix/ConfigAccessor.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxODo1NDowOFrOFx5eQA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxODo1NzozNFrOFx5lnQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzg2NjE3Ng==", "bodyText": "IllegalStateException floated from HttpRoutingDataReader should also be caught.", "url": "https://github.com/apache/helix/pull/856#discussion_r387866176", "createdAt": "2020-03-04T18:54:08Z", "author": {"login": "huizhilu"}, "path": "helix-core/src/main/java/org/apache/helix/ConfigAccessor.java", "diffHunk": "@@ -123,9 +123,22 @@ public ConfigAccessor(HelixZkClient zkClient) {\n    * @param zkAddress\n    */\n   public ConfigAccessor(String zkAddress) {\n-    _zkClient = SharedZkClientFactory.getInstance()\n-        .buildZkClient(new HelixZkClient.ZkConnectionConfig(zkAddress),\n-            new HelixZkClient.ZkClientConfig().setZkSerializer(new ZNRecordSerializer()));\n+    // First, attempt to connect on multi-realm mode using FederatedZkClient\n+    RealmAwareZkClient zkClient;\n+    try {\n+      zkClient = new FederatedZkClient(\n+          new RealmAwareZkClient.RealmAwareZkConnectionConfig.Builder().build(),\n+          new RealmAwareZkClient.RealmAwareZkClientConfig());\n+    } catch (IOException | InvalidRoutingDataException e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3671e098e9998f687d1850f75844a6dda6d65c33"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzg2ODA2MQ==", "bodyText": "Good catch! Got those sharp eyes on you :)", "url": "https://github.com/apache/helix/pull/856#discussion_r387868061", "createdAt": "2020-03-04T18:57:34Z", "author": {"login": "narendly"}, "path": "helix-core/src/main/java/org/apache/helix/ConfigAccessor.java", "diffHunk": "@@ -123,9 +123,22 @@ public ConfigAccessor(HelixZkClient zkClient) {\n    * @param zkAddress\n    */\n   public ConfigAccessor(String zkAddress) {\n-    _zkClient = SharedZkClientFactory.getInstance()\n-        .buildZkClient(new HelixZkClient.ZkConnectionConfig(zkAddress),\n-            new HelixZkClient.ZkClientConfig().setZkSerializer(new ZNRecordSerializer()));\n+    // First, attempt to connect on multi-realm mode using FederatedZkClient\n+    RealmAwareZkClient zkClient;\n+    try {\n+      zkClient = new FederatedZkClient(\n+          new RealmAwareZkClient.RealmAwareZkConnectionConfig.Builder().build(),\n+          new RealmAwareZkClient.RealmAwareZkClientConfig());\n+    } catch (IOException | InvalidRoutingDataException e) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzg2NjE3Ng=="}, "originalCommit": {"oid": "3671e098e9998f687d1850f75844a6dda6d65c33"}, "originalPosition": 22}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1335, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}