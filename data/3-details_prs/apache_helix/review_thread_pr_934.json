{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAxMDI0Mjc5", "number": 934, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQwNTowMzozMVrODwpd5A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQwNTowNDozNFrODwpehg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyMzM3NjM2OnYy", "diffSide": "RIGHT", "path": "helix-core/src/main/java/org/apache/helix/controller/dataproviders/ResourceControllerDataProvider.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQwNTowMzozMVrOGDxGPg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQwNTowMzozMVrOGDxGPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjYwMzMyNg==", "bodyText": "nit, You can move this condition out of the loop by checking and adding key if not exists.\nThen in the loop, you only need to set property.", "url": "https://github.com/apache/helix/pull/934#discussion_r406603326", "createdAt": "2020-04-10T05:03:31Z", "author": {"login": "jiajunwang"}, "path": "helix-core/src/main/java/org/apache/helix/controller/dataproviders/ResourceControllerDataProvider.java", "diffHunk": "@@ -257,6 +258,24 @@ public void updateExternalViews(List<ExternalView> externalViews) {\n     }\n   }\n \n+  /**\n+   * Update the cached customized view map\n+   * @param customizedViews\n+   */\n+  public void updateCustomizedViews(String customizedStateType,\n+      List<CustomizedView> customizedViews) {\n+    for (CustomizedView cv : customizedViews) {\n+      if (_customizedViewCacheMap.containsKey(customizedStateType)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0f08b1b4e3fa2c5f6e6cac637dc1f0c1441a9d40"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyMzM3Nzk4OnYy", "diffSide": "RIGHT", "path": "helix-core/src/main/java/org/apache/helix/controller/dataproviders/ResourceControllerDataProvider.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQwNTowNDozNFrOGDxHGA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQwNTowNDozNFrOGDxHGA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjYwMzU0NA==", "bodyText": "Safer to check if the stateType exists or not.", "url": "https://github.com/apache/helix/pull/934#discussion_r406603544", "createdAt": "2020-04-10T05:04:34Z", "author": {"login": "jiajunwang"}, "path": "helix-core/src/main/java/org/apache/helix/controller/dataproviders/ResourceControllerDataProvider.java", "diffHunk": "@@ -281,12 +300,24 @@ public void removeExternalViews(List<String> resourceNames) {\n    * @param stateTypeNames\n    */\n \n-  private void removeCustomizedViewTypes(Set<String> stateTypeNames) {\n+  public void removeCustomizedViewTypes(Set<String> stateTypeNames) {\n     for (String stateType : stateTypeNames) {\n       _customizedViewCacheMap.remove(stateType);\n     }\n   }\n \n+  /**\n+   * Remove dead customized views for a certain state type from customized view cache\n+   * @param stateType a specific customized state type\n+   * @param resourceNames the names of resources whose customized view is stale\n+   */\n+  public void removeCustomizedViews(String stateType, List<String> resourceNames) {\n+    for (String resourceName : resourceNames) {\n+      _customizedViewCacheMap.get(stateType).getCustomizedViewCache()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0f08b1b4e3fa2c5f6e6cac637dc1f0c1441a9d40"}, "originalPosition": 51}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1434, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}