{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEwMzY3NDA5", "number": 1485, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxODowNzozMlrOEyfI7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxODozMToyOVrOEyfxDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxMzc0NDQ2OnYy", "diffSide": "RIGHT", "path": "helix-core/src/main/java/org/apache/helix/model/ClusterConfig.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxODowNzozMlrOHpKC_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxODowNzozMlrOHpKC_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjkxODI3MQ==", "bodyText": "nit, additional \"I\" at end of this line.", "url": "https://github.com/apache/helix/pull/1485#discussion_r512918271", "createdAt": "2020-10-27T18:07:32Z", "author": {"login": "kaisun2000"}, "path": "helix-core/src/main/java/org/apache/helix/model/ClusterConfig.java", "diffHunk": "@@ -937,6 +940,27 @@ public long getOfflineNodeTimeOutForMaintenanceMode() {\n             OFFLINE_NODE_TIME_OUT_FOR_MAINTENANCE_MODE_NOT_SET);\n   }\n \n+  /**\n+   * Set the default time out window for offline nodes to be purged. If an offline node has been\n+   * offline for more than this specified time period, when users call purge participants API,\n+   * the node will be dropped.\n+   * @param timeOut timeout window in milliseconds.\n+   */\n+  public void setOfflineNodeTimeOutForPurge(long timeOut) {\n+    _record.setLongField(ClusterConfigProperty.OFFLINE_NODE_TIME_OUT_FOR_PURGE.name(),\n+        timeOut);\n+  }\n+\n+  /**\n+   * Get the default time out window for offline nodes to be purged. I", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc9b2209d57966614a31f9e914555441d19e5204"}, "originalPosition": 35}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxMzc1NjgwOnYy", "diffSide": "RIGHT", "path": "helix-core/src/test/java/org/apache/helix/model/TestClusterConfig.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxODowOTo1OFrOHpKKlA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxODozMjoxOVrOHpLFBQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjkyMDIxMg==", "bodyText": "This test really is not necessary. All the logic seems tested in testGetOfflineNodeTimeOutForPurge() anyway.", "url": "https://github.com/apache/helix/pull/1485#discussion_r512920212", "createdAt": "2020-10-27T18:09:58Z", "author": {"login": "kaisun2000"}, "path": "helix-core/src/test/java/org/apache/helix/model/TestClusterConfig.java", "diffHunk": "@@ -320,6 +320,29 @@ public void testSetOfflineNodeTimeOutForMaintenanceMode() {\n             -1), 10000L);\n   }\n \n+\n+  @Test\n+  public void testGetOfflineNodeTimeOutForPurge() {\n+    ClusterConfig testConfig = new ClusterConfig(\"testId\");\n+    Assert.assertEquals(testConfig.getOfflineNodeTimeOutForPurge(), -1);\n+\n+    testConfig.getRecord()\n+        .setLongField(ClusterConfig.ClusterConfigProperty.OFFLINE_NODE_TIME_OUT_FOR_PURGE\n+                .name(),\n+            10000L);\n+    Assert.assertEquals(testConfig.getOfflineNodeTimeOutForPurge(), 10000L);\n+  }\n+\n+  @Test\n+  public void testSetOfflineNodeTimeOutForPurge() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc9b2209d57966614a31f9e914555441d19e5204"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjkzNTE3Mw==", "bodyText": "Tiny difference in how they set the field. But I agree they're doing the same thing.", "url": "https://github.com/apache/helix/pull/1485#discussion_r512935173", "createdAt": "2020-10-27T18:32:19Z", "author": {"login": "zhangmeng916"}, "path": "helix-core/src/test/java/org/apache/helix/model/TestClusterConfig.java", "diffHunk": "@@ -320,6 +320,29 @@ public void testSetOfflineNodeTimeOutForMaintenanceMode() {\n             -1), 10000L);\n   }\n \n+\n+  @Test\n+  public void testGetOfflineNodeTimeOutForPurge() {\n+    ClusterConfig testConfig = new ClusterConfig(\"testId\");\n+    Assert.assertEquals(testConfig.getOfflineNodeTimeOutForPurge(), -1);\n+\n+    testConfig.getRecord()\n+        .setLongField(ClusterConfig.ClusterConfigProperty.OFFLINE_NODE_TIME_OUT_FOR_PURGE\n+                .name(),\n+            10000L);\n+    Assert.assertEquals(testConfig.getOfflineNodeTimeOutForPurge(), 10000L);\n+  }\n+\n+  @Test\n+  public void testSetOfflineNodeTimeOutForPurge() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjkyMDIxMg=="}, "originalCommit": {"oid": "cc9b2209d57966614a31f9e914555441d19e5204"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxMzgzNDUyOnYy", "diffSide": "RIGHT", "path": "helix-core/src/main/java/org/apache/helix/model/ClusterConfig.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxODoyODoyNFrOHpK7aQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxODoyODoyNFrOHpK7aQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjkzMjcxMw==", "bodyText": "nit, comment to explain the option please", "url": "https://github.com/apache/helix/pull/1485#discussion_r512932713", "createdAt": "2020-10-27T18:28:24Z", "author": {"login": "jiajunwang"}, "path": "helix-core/src/main/java/org/apache/helix/model/ClusterConfig.java", "diffHunk": "@@ -128,7 +128,9 @@\n     // offline for more than this specified time period, it's treated as offline for the rest of\n     // the maintenance mode's duration even when it comes online.\n     // The unit is milliseconds.\n-    OFFLINE_NODE_TIME_OUT_FOR_MAINTENANCE_MODE\n+    OFFLINE_NODE_TIME_OUT_FOR_MAINTENANCE_MODE,\n+\n+    OFFLINE_NODE_TIME_OUT_FOR_PURGE", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc9b2209d57966614a31f9e914555441d19e5204"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxMzg0NzE3OnYy", "diffSide": "RIGHT", "path": "helix-core/src/main/java/org/apache/helix/model/ClusterConfig.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxODozMToyOVrOHpLDKw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxODozMToyOVrOHpLDKw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjkzNDY5OQ==", "bodyText": "not necessarily to be changed here, but maybe we want to have one single static var VALUE_NOT_SET = -1.", "url": "https://github.com/apache/helix/pull/1485#discussion_r512934699", "createdAt": "2020-10-27T18:31:29Z", "author": {"login": "jiajunwang"}, "path": "helix-core/src/main/java/org/apache/helix/model/ClusterConfig.java", "diffHunk": "@@ -158,6 +160,7 @@\n   public final static boolean DEFAULT_GLOBAL_REBALANCE_ASYNC_MODE_ENABLED = true;\n   private static final int GLOBAL_TARGET_TASK_THREAD_POOL_SIZE_NOT_SET = -1;\n   private static final long OFFLINE_NODE_TIME_OUT_FOR_MAINTENANCE_MODE_NOT_SET = -1;\n+  private static final long OFFLINE_NODE_TIME_OUT_FOR_PURGE_NOT_SET = -1;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc9b2209d57966614a31f9e914555441d19e5204"}, "originalPosition": 15}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1047, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}