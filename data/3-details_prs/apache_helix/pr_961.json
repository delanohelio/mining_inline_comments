{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA3NTk1MDg1", "number": 961, "title": "Change DistributedLock interface APIs", "bodyText": "Issues\n\n My PR addresses the following Helix issues and references them in the PR description:\n\nCurrent DistributedLock interface API names can be confusing for users, since they are not following java convention. For example: we have acquireLock for both blocking (wait until the lock is release to acquire the lock) and nonblocking locks (return result immediately when called to acquire the lock).\nDescription\n\n Here are some details about my PR, including screenshots of any UI changes:\nAPI changes:\n\nacquireLock -> tryLock: nonblocking lock\nreleaseLock -> unlock\nAPI not included in this PR:\naquireLock -> lock: blocking lock\nThis API is not included in the interface yet, because it is not in the current scope. The API is written here so it is clear that now we will be able to have two different APIs to acquire the lock according to different mechanism.\nAlso this PR changed some imports for ZooKeeper related APIs because we have a separate module for ZK APIs now.\nTests\n\n The following is the result of the \"mvn test\" command on the appropriate module:\n\n[INFO] Results:\n[INFO]\n[ERROR] Failures:\n[ERROR]   TestStateTransitionTimeoutWithResource.testStateTransitionTimeOut:171 expected: but was:\n[INFO]\n[ERROR] Tests run: 1122, Failures: 1, Errors: 0, Skipped: 0\n[INFO]\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  01:13 h\n[INFO] Finished at: 2020-04-22T16:02:23-07:00\n[INFO] ------------------------------------------------\nCommits\n\n My commits all reference appropriate Apache Helix GitHub issues in their subject lines. In addition, my commits follow the guidelines from \"How to write a good git commit message\":\n\nSubject is separated from body by a blank line\nSubject is limited to 50 characters (not including Jira issue reference)\nSubject does not end with a period\nSubject uses the imperative mood (\"add\", not \"adding\")\nBody wraps at 72 characters\nBody explains \"what\" and \"why\", not \"how\"\n\n\n\nDocumentation (Optional)\n\n In case of new functionality, my PR adds documentation in the following wiki page:\n\n(Link the GitHub wiki you added)\nCode Quality\n\n My diff has been formatted using helix-style.xml\n(helix-style-intellij.xml if IntelliJ IDE is used)", "createdAt": "2020-04-22T23:17:31Z", "url": "https://github.com/apache/helix/pull/961", "merged": true, "mergeCommit": {"oid": "3244aa8b32ffe5c50a608fcfdf730d1b3cc0dd54"}, "closed": true, "closedAt": "2020-04-23T19:34:57Z", "author": {"login": "mgao0"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcaQr82AH2gAyNDA3NTk1MDg1Ojg5MTA5MDk5Mzg0ZjE1ZTVkN2M3NGM5NDNhYTFkNWQ4NGRmMmVlZDA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcag-AQAFqTM5OTM1NTExMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "89109099384f15e5d7c74c943aa1d5d84df2eed0", "author": {"user": {"login": "mgao0", "name": "Molly Gao"}}, "url": "https://github.com/apache/helix/commit/89109099384f15e5d7c74c943aa1d5d84df2eed0", "committedDate": "2020-04-22T23:14:36Z", "message": "Changed DistributedLock interface APIs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4NzAyMjg3", "url": "https://github.com/apache/helix/pull/961#pullrequestreview-398702287", "createdAt": "2020-04-23T01:40:08Z", "commit": {"oid": "89109099384f15e5d7c74c943aa1d5d84df2eed0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QwMTo0MDowOFrOGKSyUg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QwMTo0MDowOFrOGKSyUg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzQ0NjczOA==", "bodyText": "unlock", "url": "https://github.com/apache/helix/pull/961#discussion_r413446738", "createdAt": "2020-04-23T01:40:08Z", "author": {"login": "junkaixue"}, "path": "helix-lock/src/main/java/org/apache/helix/lock/DistributedLock.java", "diffHunk": "@@ -24,18 +24,18 @@\n  */\n public interface DistributedLock {\n   /**\n-   * Blocking call to acquire a lock\n+   * Blocking call to acquire a lock if it is free at the time of request\n    * @return true if the lock was successfully acquired,\n    * false if the lock could not be acquired\n    */\n-  boolean acquireLock();\n+  boolean tryLock();\n \n   /**\n    * Blocking call to release a lock", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "89109099384f15e5d7c74c943aa1d5d84df2eed0"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4NzAyNDM5", "url": "https://github.com/apache/helix/pull/961#pullrequestreview-398702439", "createdAt": "2020-04-23T01:40:37Z", "commit": {"oid": "89109099384f15e5d7c74c943aa1d5d84df2eed0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0dce6b8d29da09e14c8afdbcc3b4ae15591d1ef3", "author": {"user": {"login": "mgao0", "name": "Molly Gao"}}, "url": "https://github.com/apache/helix/commit/0dce6b8d29da09e14c8afdbcc3b4ae15591d1ef3", "committedDate": "2020-04-23T01:54:29Z", "message": "Change method description"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk5MzU1MTEz", "url": "https://github.com/apache/helix/pull/961#pullrequestreview-399355113", "createdAt": "2020-04-23T18:12:48Z", "commit": {"oid": "0dce6b8d29da09e14c8afdbcc3b4ae15591d1ef3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4780, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}