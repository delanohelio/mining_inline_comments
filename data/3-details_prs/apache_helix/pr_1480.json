{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA3OTMyNTE5", "number": 1480, "title": "Make byte array data accessor use RealmAwareZkClient", "bodyText": "Issues\n\n My PR addresses the following Helix issues and references them in the PR description:\n\nFixes #1479\nDescription\n\n Here are some details about my PR, including screenshots of any UI changes:\n\nThis change was left out of the ZooScalability migration of helix-rest, making ZooKeeperAccessor endpoints fail in a multi-zk setting. This change fixes this.\nTests\n\n The following tests are written for this issue:\n\nTests already exist for this part of the code.\n\n The following is the result of the \"mvn test\" command on the appropriate module:\n\nhelix-rest module:\n\n[INFO] Tests run: 168, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 33.257 s - in TestSuite\n[INFO] \n[INFO] Results:\n[INFO] \n[INFO] Tests run: 168, Failures: 0, Errors: 0, Skipped: 0\n[INFO] \n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  38.829 s\n[INFO] Finished at: 2020-10-21T17:08:58-07:00\n[INFO] ------------------------------------------------------------------------\n\nCommits\n\nMy commits all reference appropriate Apache Helix GitHub issues in their subject lines. In addition, my commits follow the guidelines from \"How to write a good git commit message\":\n\nSubject is separated from body by a blank line\nSubject is limited to 50 characters (not including Jira issue reference)\nSubject does not end with a period\nSubject uses the imperative mood (\"add\", not \"adding\")\nBody wraps at 72 characters\nBody explains \"what\" and \"why\", not \"how\"\n\n\n\nCode Quality\n\nMy diff has been formatted using helix-style.xml\n(helix-style-intellij.xml if IntelliJ IDE is used)", "createdAt": "2020-10-22T00:13:25Z", "url": "https://github.com/apache/helix/pull/1480", "merged": true, "mergeCommit": {"oid": "acaf13fbfa37a3bd5a80d32cd15d90057ae342b6"}, "closed": true, "closedAt": "2020-10-22T04:08:59Z", "author": {"login": "narendly"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdU1y3hgH2gAyNTA3OTMyNTE5OmMwYjM0ZTMzNDQ1MzEwODIxMzUzNmEzM2E1ODg1ZDNjZGIxNDMzMjQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdU56O_gFqTUxNDM0NDI4Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c0b34e334453108213536a33a5885d3cdb143324", "author": {"user": {"login": "narendly", "name": "Hunter Lee"}}, "url": "https://github.com/apache/helix/commit/c0b34e334453108213536a33a5885d3cdb143324", "committedDate": "2020-10-21T23:16:15Z", "message": "Make byte array data accessor use RealmAwareZkClient\n\nThis change was left out of the ZooScalability migration of helix-rest, making ZooKeeperAccessor endpoints fail in a multi-zk setting. This change fixes this."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "29cf37253f77381656535101be40cb8a2cd46c45", "author": {"user": {"login": "narendly", "name": "Hunter Lee"}}, "url": "https://github.com/apache/helix/commit/29cf37253f77381656535101be40cb8a2cd46c45", "committedDate": "2020-10-22T00:04:15Z", "message": "fix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE0MjgyMzE0", "url": "https://github.com/apache/helix/pull/1480#pullrequestreview-514282314", "createdAt": "2020-10-22T00:34:06Z", "commit": {"oid": "29cf37253f77381656535101be40cb8a2cd46c45"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQwMDozNDowNlrOHmMdKw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQwMDozNDowNlrOHmMdKw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTgxMjAxMQ==", "bodyText": "Just have one suggestion. There are many duplicated pieces with previous function. Can we abstract it as a private function and called in both public method?", "url": "https://github.com/apache/helix/pull/1480#discussion_r509812011", "createdAt": "2020-10-22T00:34:06Z", "author": {"login": "junkaixue"}, "path": "helix-rest/src/main/java/org/apache/helix/rest/server/ServerContext.java", "diffHunk": "@@ -157,6 +158,50 @@ public RealmAwareZkClient getRealmAwareZkClient() {\n     return _zkClient;\n   }\n \n+  /**\n+   * Returns a RealmAWareZkClient with ByteArraySerializer with double-checked locking.\n+   * NOTE: this is different from getRealmAwareZkClient in that it does not reset listeners for\n+   * _zkClientForListener because this RealmAwareZkClient is independent from routing data changes.\n+   * @return\n+   */\n+  public RealmAwareZkClient getByteArrayRealmAwareZkClient() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "29cf37253f77381656535101be40cb8a2cd46c45"}, "originalPosition": 34}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6cf2d658500db87c6847e57d98eeaa6cad79ef19", "author": {"user": {"login": "narendly", "name": "Hunter Lee"}}, "url": "https://github.com/apache/helix/commit/6cf2d658500db87c6847e57d98eeaa6cad79ef19", "committedDate": "2020-10-22T03:50:58Z", "message": "Refactor"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE0MzQ0Mjgy", "url": "https://github.com/apache/helix/pull/1480#pullrequestreview-514344282", "createdAt": "2020-10-22T04:03:55Z", "commit": {"oid": "6cf2d658500db87c6847e57d98eeaa6cad79ef19"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4366, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}