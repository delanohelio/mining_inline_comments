{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI1NjY3MjEw", "number": 1045, "title": "Update ivy dependencies to be same as pom dependencies", "bodyText": "Issues\n\n My PR addresses the following Helix issues and references them in the PR description:\n\nFixes #1044\nDescription\n\n Here are some details about my PR, including screenshots of any UI changes:\n\n\n\nHelix jars built based on ivy dependencies don't have the same dependencies as open source helix jars built with pom files. Eg., open source helix-core-1.0.0.jar depends on helix-common-1.0.0.jar, but the helix-core jar built with ivy files does't have such dependency.\nThis issue could cause inconsistent behaviors between internal helix lib release and open source lib release. Eg., Duplicate and Conflicting Class MonitorDomainNames happened in open source but not in internal release built with ivy dependencies.\nWe would like to make these dependencies consistent so issues like the example could be caught in release certification. This PR updates ivy dependencies.\n\n\nTo address some different dependency versions in helix and resolve potential version conflicts, this PR also upgrades some old dependency versions to the the newer ones in helix.\n\n\nAfter updating:\n\nTests\n\n The following tests are written for this issue:\n\n(List the names of added unit/integration tests)\n\n The following is the result of the \"mvn test\" command on the appropriate module:\n\nRunning...\nCommits\n\n My commits all reference appropriate Apache Helix GitHub issues in their subject lines. In addition, my commits follow the guidelines from \"How to write a good git commit message\":\n\nSubject is separated from body by a blank line\nSubject is limited to 50 characters (not including Jira issue reference)\nSubject does not end with a period\nSubject uses the imperative mood (\"add\", not \"adding\")\nBody wraps at 72 characters\nBody explains \"what\" and \"why\", not \"how\"\n\n\n\nDocumentation (Optional)\n\n In case of new functionality, my PR adds documentation in the following wiki page:\n\n(Link the GitHub wiki you added)\nCode Quality\n\n My diff has been formatted using helix-style.xml\n(helix-style-intellij.xml if IntelliJ IDE is used)", "createdAt": "2020-05-31T20:40:02Z", "url": "https://github.com/apache/helix/pull/1045", "merged": true, "mergeCommit": {"oid": "0e51cbba0eaa53c5e6ff563eb6ed458f532df6f8"}, "closed": true, "closedAt": "2020-07-23T18:46:48Z", "author": {"login": "huizhilu"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcm1BOvgFqTQyMTU0MjU2MQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc3mfswAH2gAyNDI1NjY3MjEwOjc1MTc2NTNlZTdkNTgwYjVjODJiZmRhM2U5NWFjZmU2OTI4ZThlZjg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxNTQyNTYx", "url": "https://github.com/apache/helix/pull/1045#pullrequestreview-421542561", "createdAt": "2020-06-01T00:21:31Z", "commit": {"oid": "6b2e16cdd3b3c7aad6bc8d01221f752a5691b0d3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQwMDoyMTozMVrOGc8N9A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQwMDoyMTozMVrOGc8N9A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjk5OTkyNA==", "bodyText": "Is this version bump up necessary?\nSometimes open source libraries aren't always backward compatible and could cause unwarranted code behavior change. So if there's no clear reason, we'd prefer to keep the version we know to be working.", "url": "https://github.com/apache/helix/pull/1045#discussion_r432999924", "createdAt": "2020-06-01T00:21:31Z", "author": {"login": "narendly"}, "path": "helix-admin-webapp/pom.xml", "diffHunk": "@@ -79,12 +79,12 @@ under the License.\n     <dependency>\n       <groupId>org.codehaus.jackson</groupId>\n       <artifactId>jackson-core-asl</artifactId>\n-      <version>1.8.5</version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6b2e16cdd3b3c7aad6bc8d01221f752a5691b0d3"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxNTQyNzcw", "url": "https://github.com/apache/helix/pull/1045#pullrequestreview-421542770", "createdAt": "2020-06-01T00:23:07Z", "commit": {"oid": "6b2e16cdd3b3c7aad6bc8d01221f752a5691b0d3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQwMDoyMzowN1rOGc8Olw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQwMDoyMzowN1rOGc8Olw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzAwMDA4Nw==", "bodyText": "I'm not sure if this is the correct version we should use in .ivy file. Could you double check that our version bump up script replaces these versions to the correct one at build time?", "url": "https://github.com/apache/helix/pull/1045#discussion_r433000087", "createdAt": "2020-06-01T00:23:07Z", "author": {"login": "narendly"}, "path": "helix-common/helix-common-1.0.1-SNAPSHOT.ivy", "diffHunk": "@@ -43,9 +43,7 @@ under the License.\n     <dependency org=\"org.slf4j\" name=\"slf4j-log4j12\" rev=\"1.7.14\" force=\"true\" conf=\"compile->compile(*),master(*);runtime->runtime(*)\">\n         <artifact name=\"slf4j-log4j12\" ext=\"jar\"/>\n     </dependency>\n-    <dependency org=\"org.yaml\" name=\"snakeyaml\" rev=\"1.12\" conf=\"compile->compile(default);runtime->runtime(default);default->default\"/>\n-\t\t<dependency org=\"org.codehaus.jackson\" name=\"jackson-core-asl\" rev=\"1.8.5\" force=\"true\" conf=\"compile->compile(*),master(*);runtime->runtime(*)\"/>\n-\t\t<dependency org=\"org.codehaus.jackson\" name=\"jackson-mapper-asl\" rev=\"1.8.5\" force=\"true\" conf=\"compile->compile(*),master(*);runtime->runtime(*)\"/>\n-\t\t<dependency org=\"commons-cli\" name=\"commons-cli\" rev=\"1.2\" force=\"true\" conf=\"compile->compile(*),master(*);runtime->runtime(*)\"/>\n+    <dependency org=\"org.apache.helix\" name=\"metrics-common\" rev=\"1.0.1-SNAPSHOT\" force=\"true\" conf=\"compile->compile(*),master(*);runtime->runtime(*)\"/>\n+    <dependency org=\"org.apache.helix\" name=\"zookeeper-api\" rev=\"1.0.1-SNAPSHOT\" force=\"true\" conf=\"compile->compile(*),master(*);runtime->runtime(*)\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6b2e16cdd3b3c7aad6bc8d01221f752a5691b0d3"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxNTQyOTUz", "url": "https://github.com/apache/helix/pull/1045#pullrequestreview-421542953", "createdAt": "2020-06-01T00:24:31Z", "commit": {"oid": "6b2e16cdd3b3c7aad6bc8d01221f752a5691b0d3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQwMDoyNDozMVrOGc8PXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQwMDoyNDozMVrOGc8PXw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzAwMDI4Nw==", "bodyText": "Same comment on yaml. Although with YAML, I think it should be fine to upgrade. It's not as crucial to Helix pipeline as Jackson. \"If it ain't broke, don't fix it\" works with open source libraries.", "url": "https://github.com/apache/helix/pull/1045#discussion_r433000287", "createdAt": "2020-06-01T00:24:31Z", "author": {"login": "narendly"}, "path": "helix-core/pom.xml", "diffHunk": "@@ -128,30 +128,10 @@ under the License.\n       <artifactId>commons-math3</artifactId>\n       <version>3.6.1</version>\n     </dependency>\n-    <dependency>\n-      <groupId>commons-codec</groupId>\n-      <artifactId>commons-codec</artifactId>\n-      <version>1.6</version>\n-    </dependency>\n-    <dependency>\n-      <groupId>com.google.guava</groupId>\n-      <artifactId>guava</artifactId>\n-      <version>15.0</version>\n-    </dependency>\n     <dependency>\n       <groupId>org.yaml</groupId>\n       <artifactId>snakeyaml</artifactId>\n-      <version>1.12</version>\n-    </dependency>\n-    <dependency>\n-      <groupId>io.dropwizard.metrics</groupId>\n-      <artifactId>metrics-core</artifactId>\n-      <version>3.2.3</version>\n-    </dependency>\n-    <dependency>\n-      <groupId>org.apache.httpcomponents</groupId>\n-      <artifactId>httpclient</artifactId>\n-      <version>4.5.8</version>\n+      <version>1.17</version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6b2e16cdd3b3c7aad6bc8d01221f752a5691b0d3"}, "originalPosition": 43}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxNTQzMTcx", "url": "https://github.com/apache/helix/pull/1045#pullrequestreview-421543171", "createdAt": "2020-06-01T00:26:15Z", "commit": {"oid": "6b2e16cdd3b3c7aad6bc8d01221f752a5691b0d3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQwMDoyNjoxNVrOGc8QMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQwMDoyNjoxNVrOGc8QMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzAwMDQ5Nw==", "bodyText": "I am not sure if this library would be needed in the ivy file. We may not need to include this because we don't need this available other than build time to create a JAR.", "url": "https://github.com/apache/helix/pull/1045#discussion_r433000497", "createdAt": "2020-06-01T00:26:15Z", "author": {"login": "narendly"}, "path": "metrics-common/metrics-common-0.9.2-SNAPSHOT.ivy", "diffHunk": "@@ -43,5 +43,6 @@ under the License.\n     <dependency org=\"org.slf4j\" name=\"slf4j-log4j12\" rev=\"1.7.14\" force=\"true\" conf=\"compile->compile(*),master(*);runtime->runtime(*)\">\n         <artifact name=\"slf4j-log4j12\" ext=\"jar\"/>\n     </dependency>\n+    <dependency org=\"io.dropwizard.metrics\" name=\"metrics-core\" rev=\"3.2.3\" conf=\"compile->compile(*),master(*);runtime->runtime(*)/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6b2e16cdd3b3c7aad6bc8d01221f752a5691b0d3"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxNTQ0MzE5", "url": "https://github.com/apache/helix/pull/1045#pullrequestreview-421544319", "createdAt": "2020-06-01T00:35:30Z", "commit": {"oid": "6b2e16cdd3b3c7aad6bc8d01221f752a5691b0d3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQwMDozNTozMFrOGc8UAw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQwMDozNTozMFrOGc8UAw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzAwMTQ3NQ==", "bodyText": "Probably not necessary for the same reason for metrics-core above.", "url": "https://github.com/apache/helix/pull/1045#discussion_r433001475", "createdAt": "2020-06-01T00:35:30Z", "author": {"login": "narendly"}, "path": "zookeeper-api/zookeeper-api-1.0.1-SNAPSHOT.ivy", "diffHunk": "@@ -43,9 +43,10 @@ under the License.\n     <dependency org=\"org.slf4j\" name=\"slf4j-log4j12\" rev=\"1.7.14\" force=\"true\" conf=\"compile->compile(*),master(*);runtime->runtime(*)\">\n         <artifact name=\"slf4j-log4j12\" ext=\"jar\"/>\n     </dependency>\n-\t\t<dependency org=\"org.codehaus.jackson\" name=\"jackson-core-asl\" rev=\"1.8.5\" force=\"true\" conf=\"compile->compile(*),master(*);runtime->runtime(*)\"/>\n-\t\t<dependency org=\"org.codehaus.jackson\" name=\"jackson-mapper-asl\" rev=\"1.8.5\" force=\"true\" conf=\"compile->compile(*),master(*);runtime->runtime(*)\"/>\n-\t\t<dependency org=\"commons-cli\" name=\"commons-cli\" rev=\"1.2\" force=\"true\" conf=\"compile->compile(*),master(*);runtime->runtime(*)\"/>\n-\t\t<dependency org=\"org.apache.httpcomponents\" name=\"httpclient\" rev=\"4.5.8\" force=\"true\" conf=\"compile->compile(*),master(*);runtime->runtime(*)\"/>\n+    <dependency org=\"org.apache.helix\" name=\"metrics-common\" rev=\"1.0.1-SNAPSHOT\" force=\"true\" conf=\"compile->compile(*),master(*);runtime->runtime(*)\"/>\n+    <dependency org=\"org.apache.helix\" name=\"metadata-store-directory-common\" rev=\"1.0.1-SNAPSHOT\" force=\"true\" conf=\"compile->compile(*),master(*);runtime->runtime(*)\"/>\n+    <dependency org=\"org.apache.zookeeper\" name=\"zookeeper\" rev=\"3.4.13\" force=\"true\" conf=\"compile->compile(*),master(*);runtime->runtime(*)\"/>\n+    <dependency org=\"org.codehaus.jackson\" name=\"jackson-mapper-asl\" rev=\"1.9.13\" force=\"true\" conf=\"compile->compile(*),master(*);runtime->runtime(*)\"/>\n+    <dependency org=\"commons-codec\" name=\"commons-codec\" rev=\"1.14\" conf=\"compile->compile(default);runtime->runtime(default);default->default\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6b2e16cdd3b3c7aad6bc8d01221f752a5691b0d3"}, "originalPosition": 12}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "eaa811c4ac351b77a3bcd97043218948de647d1b", "author": {"user": {"login": "huizhilu", "name": "Huizhi Lu"}}, "url": "https://github.com/apache/helix/commit/eaa811c4ac351b77a3bcd97043218948de647d1b", "committedDate": "2020-06-11T00:38:47Z", "message": "Revert"}, "afterCommit": {"oid": "d4e414e792c33b27db54520d3ad3ccb74783e923", "author": {"user": {"login": "huizhilu", "name": "Huizhi Lu"}}, "url": "https://github.com/apache/helix/commit/d4e414e792c33b27db54520d3ad3ccb74783e923", "committedDate": "2020-06-11T00:55:55Z", "message": "Update ivy dependencies to be same as pom dependencies"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3MDQ3Mzk5", "url": "https://github.com/apache/helix/pull/1045#pullrequestreview-437047399", "createdAt": "2020-06-24T22:23:28Z", "commit": {"oid": "9687fc6d7b561240012c4598f51b37b9336c75a9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "47abd4afc20177ec68ea07f0b5878df305868e51", "author": {"user": {"login": "huizhilu", "name": "Huizhi Lu"}}, "url": "https://github.com/apache/helix/commit/47abd4afc20177ec68ea07f0b5878df305868e51", "committedDate": "2020-07-23T02:54:09Z", "message": "Update ivy dependencies to be same as pom dependencies"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb4033e5a68e74784b09bcc0d36ac3cbd3d1c752", "author": {"user": {"login": "huizhilu", "name": "Huizhi Lu"}}, "url": "https://github.com/apache/helix/commit/eb4033e5a68e74784b09bcc0d36ac3cbd3d1c752", "committedDate": "2020-07-23T02:55:21Z", "message": "Upgrade restlet.jse version"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9687fc6d7b561240012c4598f51b37b9336c75a9", "author": {"user": {"login": "huizhilu", "name": "Huizhi Lu"}}, "url": "https://github.com/apache/helix/commit/9687fc6d7b561240012c4598f51b37b9336c75a9", "committedDate": "2020-06-24T21:43:19Z", "message": "Upgrade restlet.jse version"}, "afterCommit": {"oid": "eb4033e5a68e74784b09bcc0d36ac3cbd3d1c752", "author": {"user": {"login": "huizhilu", "name": "Huizhi Lu"}}, "url": "https://github.com/apache/helix/commit/eb4033e5a68e74784b09bcc0d36ac3cbd3d1c752", "committedDate": "2020-07-23T02:55:21Z", "message": "Upgrade restlet.jse version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7517653ee7d580b5c82bfda3e95acfe6928e8ef8", "author": {"user": {"login": "huizhilu", "name": "Huizhi Lu"}}, "url": "https://github.com/apache/helix/commit/7517653ee7d580b5c82bfda3e95acfe6928e8ef8", "committedDate": "2020-07-23T03:02:56Z", "message": "Upgrade helix modules to 1.0.2-SNAPSHOT"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4426, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}