{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk3MTY4NDA3", "number": 1432, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQwMDoxMjozM1rOEqheWQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQwMDoxMzoxM1rOEqhezg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEzMDI0MDg5OnYy", "diffSide": "RIGHT", "path": "helix-core/src/main/java/org/apache/helix/tools/ClusterVerifiers/BestPossibleExternalViewVerifier.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQwMDoxMjozM1rOHcx0Rg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQwMTowMzoxM1rOHcylnQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTkzODM3NA==", "bodyText": "Note that these constructors are deprecated and suggest to use builder. So you may also want to add this new parameter to the builder.", "url": "https://github.com/apache/helix/pull/1432#discussion_r499938374", "createdAt": "2020-10-06T00:12:33Z", "author": {"login": "zhangmeng916"}, "path": "helix-core/src/main/java/org/apache/helix/tools/ClusterVerifiers/BestPossibleExternalViewVerifier.java", "diffHunk": "@@ -78,8 +78,8 @@\n    */\n   @Deprecated\n   public BestPossibleExternalViewVerifier(String zkAddr, String clusterName, Set<String> resources,\n-      Map<String, Map<String, String>> errStates, Set<String> expectLiveInstances) {\n-    super(zkAddr, clusterName);\n+      Map<String, Map<String, String>> errStates, Set<String> expectLiveInstances, int waitTillVerify) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7a8a70c898322e1eee73e192b5a7af843ea7d9ae"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTk1MTAwNQ==", "bodyText": "This is good point.\nIn fact, we already added them in the builder. See this pull, https://github.com/apache/helix/pull/1328/files\nThe thing is that in  pull 1328, we missed some places which is addressed in this pull.\nThe big pull #1227 validated that all missing ones are all addressed here. No more missing ones.", "url": "https://github.com/apache/helix/pull/1432#discussion_r499951005", "createdAt": "2020-10-06T01:03:13Z", "author": {"login": "kaisun2000"}, "path": "helix-core/src/main/java/org/apache/helix/tools/ClusterVerifiers/BestPossibleExternalViewVerifier.java", "diffHunk": "@@ -78,8 +78,8 @@\n    */\n   @Deprecated\n   public BestPossibleExternalViewVerifier(String zkAddr, String clusterName, Set<String> resources,\n-      Map<String, Map<String, String>> errStates, Set<String> expectLiveInstances) {\n-    super(zkAddr, clusterName);\n+      Map<String, Map<String, String>> errStates, Set<String> expectLiveInstances, int waitTillVerify) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTkzODM3NA=="}, "originalCommit": {"oid": "7a8a70c898322e1eee73e192b5a7af843ea7d9ae"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEzMDI0MjA2OnYy", "diffSide": "RIGHT", "path": "helix-core/src/main/java/org/apache/helix/tools/ClusterVerifiers/BestPossibleExternalViewVerifier.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQwMDoxMzoxM1rOHcx08Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQwMToxNDo1OVrOHcyw_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTkzODU0NQ==", "bodyText": "Could you please add some doc about the rationale of adding waiting time?", "url": "https://github.com/apache/helix/pull/1432#discussion_r499938545", "createdAt": "2020-10-06T00:13:13Z", "author": {"login": "zhangmeng916"}, "path": "helix-core/src/main/java/org/apache/helix/tools/ClusterVerifiers/BestPossibleExternalViewVerifier.java", "diffHunk": "@@ -78,8 +78,8 @@\n    */\n   @Deprecated\n   public BestPossibleExternalViewVerifier(String zkAddr, String clusterName, Set<String> resources,\n-      Map<String, Map<String, String>> errStates, Set<String> expectLiveInstances) {\n-    super(zkAddr, clusterName);\n+      Map<String, Map<String, String>> errStates, Set<String> expectLiveInstances, int waitTillVerify) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7a8a70c898322e1eee73e192b5a7af843ea7d9ae"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTk1MTA5MQ==", "bodyText": "Good point, let me do it.", "url": "https://github.com/apache/helix/pull/1432#discussion_r499951091", "createdAt": "2020-10-06T01:03:37Z", "author": {"login": "kaisun2000"}, "path": "helix-core/src/main/java/org/apache/helix/tools/ClusterVerifiers/BestPossibleExternalViewVerifier.java", "diffHunk": "@@ -78,8 +78,8 @@\n    */\n   @Deprecated\n   public BestPossibleExternalViewVerifier(String zkAddr, String clusterName, Set<String> resources,\n-      Map<String, Map<String, String>> errStates, Set<String> expectLiveInstances) {\n-    super(zkAddr, clusterName);\n+      Map<String, Map<String, String>> errStates, Set<String> expectLiveInstances, int waitTillVerify) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTkzODU0NQ=="}, "originalCommit": {"oid": "7a8a70c898322e1eee73e192b5a7af843ea7d9ae"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTk1MzkxNw==", "bodyText": "This is added.\n   /**\n     * The class of verify() methods in this class and its subclass such as \n     * BestPossibleExternalViewVerifier is intend to wait for the cluster converging to a stable \n     * state after changes in the cluster. However, after making changes, it would take some time\n     * till controller taking the changes in. Thus, if we verify() too early, before controller\n     * taking the changes, the class may mistake the previous stable cluster state as new (expected)\n     * stable state. This would cause various issues. Thus, we supply a waitPeriod before starting\n     * to validate next expected state to avoid this pre-mature stable state validation.\n     */\n    public B setWaitTillVerify(int waitPeriod) {\n      _waitPeriodTillVerify = waitPeriod;\n      return (B) this;\n    }", "url": "https://github.com/apache/helix/pull/1432#discussion_r499953917", "createdAt": "2020-10-06T01:14:59Z", "author": {"login": "kaisun2000"}, "path": "helix-core/src/main/java/org/apache/helix/tools/ClusterVerifiers/BestPossibleExternalViewVerifier.java", "diffHunk": "@@ -78,8 +78,8 @@\n    */\n   @Deprecated\n   public BestPossibleExternalViewVerifier(String zkAddr, String clusterName, Set<String> resources,\n-      Map<String, Map<String, String>> errStates, Set<String> expectLiveInstances) {\n-    super(zkAddr, clusterName);\n+      Map<String, Map<String, String>> errStates, Set<String> expectLiveInstances, int waitTillVerify) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTkzODU0NQ=="}, "originalCommit": {"oid": "7a8a70c898322e1eee73e192b5a7af843ea7d9ae"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 989, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}