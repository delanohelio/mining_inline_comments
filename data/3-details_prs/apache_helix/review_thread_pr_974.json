{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEwMzU5MzM2", "number": 974, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQyMToyMzoyMlrOD3Yu6g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxODoxNzo1NVrOD8mNMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5NDAzNDk4OnYy", "diffSide": "RIGHT", "path": "helix-core/src/main/java/org/apache/helix/messaging/DefaultMessagingService.java", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQyMToyMzoyMlrOGNnfMg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQyMjo0MTo0MFrOGVwqNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjkzMTYzNA==", "bodyText": "Are we retrying for these? Or we need some way to monitor the failure ones.", "url": "https://github.com/apache/helix/pull/974#discussion_r416931634", "createdAt": "2020-04-28T21:23:22Z", "author": {"login": "junkaixue"}, "path": "helix-core/src/main/java/org/apache/helix/messaging/DefaultMessagingService.java", "diffHunk": "@@ -186,7 +186,8 @@ private HelixDataAccessor getRecipientDataAccessor(final Criteria recipientCrite\n       Map<String, String> sessionIdMap = new HashMap<String, String>();\n       if (recipientCriteria.isSessionSpecific()) {\n         Builder keyBuilder = targetDataAccessor.keyBuilder();\n-        List<LiveInstance> liveInstances = targetDataAccessor.getChildValues(keyBuilder.liveInstances());\n+        List<LiveInstance> liveInstances =\n+            targetDataAccessor.getChildValues(keyBuilder.liveInstances(), true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44d4766a3d15d0cb7344381b54354f40e2459d74"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjk0MTY4Ng==", "bodyText": "Retry is in #970.\nI thought about this. If the liveInstance list is not complete, I guess we will only send partial messages, I guess it would be bad since there might be some relationship between the messages if they are done within the same pipeline.\nBut I don't have a strong preference. After PR 970 is in, there is very little chance we see this error. Please let me know if you think this shall be false (and why). I can change it and comment with the reason.", "url": "https://github.com/apache/helix/pull/974#discussion_r416941686", "createdAt": "2020-04-28T21:42:20Z", "author": {"login": "jiajunwang"}, "path": "helix-core/src/main/java/org/apache/helix/messaging/DefaultMessagingService.java", "diffHunk": "@@ -186,7 +186,8 @@ private HelixDataAccessor getRecipientDataAccessor(final Criteria recipientCrite\n       Map<String, String> sessionIdMap = new HashMap<String, String>();\n       if (recipientCriteria.isSessionSpecific()) {\n         Builder keyBuilder = targetDataAccessor.keyBuilder();\n-        List<LiveInstance> liveInstances = targetDataAccessor.getChildValues(keyBuilder.liveInstances());\n+        List<LiveInstance> liveInstances =\n+            targetDataAccessor.getChildValues(keyBuilder.liveInstances(), true);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjkzMTYzNA=="}, "originalCommit": {"oid": "44d4766a3d15d0cb7344381b54354f40e2459d74"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzUwNjQzNw==", "bodyText": "I agree it will have little chance. Was worrying about if we throw an exception, it could totally miss the message delivery.", "url": "https://github.com/apache/helix/pull/974#discussion_r417506437", "createdAt": "2020-04-29T17:58:51Z", "author": {"login": "junkaixue"}, "path": "helix-core/src/main/java/org/apache/helix/messaging/DefaultMessagingService.java", "diffHunk": "@@ -186,7 +186,8 @@ private HelixDataAccessor getRecipientDataAccessor(final Criteria recipientCrite\n       Map<String, String> sessionIdMap = new HashMap<String, String>();\n       if (recipientCriteria.isSessionSpecific()) {\n         Builder keyBuilder = targetDataAccessor.keyBuilder();\n-        List<LiveInstance> liveInstances = targetDataAccessor.getChildValues(keyBuilder.liveInstances());\n+        List<LiveInstance> liveInstances =\n+            targetDataAccessor.getChildValues(keyBuilder.liveInstances(), true);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjkzMTYzNA=="}, "originalCommit": {"oid": "44d4766a3d15d0cb7344381b54354f40e2459d74"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ1NjkyMA==", "bodyText": "I still not suggest to have this for DefaultMessaging service. Because this changes behavior and it is used by customer. It may break their logic.\nExcept this one, others are in our control and should be fine for me.", "url": "https://github.com/apache/helix/pull/974#discussion_r425456920", "createdAt": "2020-05-14T22:04:28Z", "author": {"login": "junkaixue"}, "path": "helix-core/src/main/java/org/apache/helix/messaging/DefaultMessagingService.java", "diffHunk": "@@ -186,7 +186,8 @@ private HelixDataAccessor getRecipientDataAccessor(final Criteria recipientCrite\n       Map<String, String> sessionIdMap = new HashMap<String, String>();\n       if (recipientCriteria.isSessionSpecific()) {\n         Builder keyBuilder = targetDataAccessor.keyBuilder();\n-        List<LiveInstance> liveInstances = targetDataAccessor.getChildValues(keyBuilder.liveInstances());\n+        List<LiveInstance> liveInstances =\n+            targetDataAccessor.getChildValues(keyBuilder.liveInstances(), true);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjkzMTYzNA=="}, "originalCommit": {"oid": "44d4766a3d15d0cb7344381b54354f40e2459d74"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ3MDUxOQ==", "bodyText": "Reasonable, I will change this to false.", "url": "https://github.com/apache/helix/pull/974#discussion_r425470519", "createdAt": "2020-05-14T22:41:40Z", "author": {"login": "jiajunwang"}, "path": "helix-core/src/main/java/org/apache/helix/messaging/DefaultMessagingService.java", "diffHunk": "@@ -186,7 +186,8 @@ private HelixDataAccessor getRecipientDataAccessor(final Criteria recipientCrite\n       Map<String, String> sessionIdMap = new HashMap<String, String>();\n       if (recipientCriteria.isSessionSpecific()) {\n         Builder keyBuilder = targetDataAccessor.keyBuilder();\n-        List<LiveInstance> liveInstances = targetDataAccessor.getChildValues(keyBuilder.liveInstances());\n+        List<LiveInstance> liveInstances =\n+            targetDataAccessor.getChildValues(keyBuilder.liveInstances(), true);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjkzMTYzNA=="}, "originalCommit": {"oid": "44d4766a3d15d0cb7344381b54354f40e2459d74"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxNjQ0ODEyOnYy", "diffSide": "RIGHT", "path": "helix-core/src/main/java/org/apache/helix/BaseDataAccessor.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxODoxOToyMFrOGQ16yw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxODo0NToyMFrOGRgm7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDMxMzgwMw==", "bodyText": "What is the unit of retryInterval, second or millisecond?  Should be use long?  Usually have three consecutive parameters with the same type is not easy to use.", "url": "https://github.com/apache/helix/pull/974#discussion_r420313803", "createdAt": "2020-05-05T18:19:20Z", "author": {"login": "lei-xia"}, "path": "helix-core/src/main/java/org/apache/helix/BaseDataAccessor.java", "diffHunk": "@@ -166,6 +167,7 @@\n    * @param options Set the type of ZNode see the valid values in {@link AccessOption}\n    * @return A list of children of the parent ZNode\n    */\n+  @Deprecated\n   List<T> getChildren(String parentPath, List<Stat> stats, int options);\n \n   /**", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cba4ec72a1ea2b7e0bfacbdbb881fa5118016f4e"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDMxODQ4NQ==", "bodyText": "Lei, let's address the interface design question in separate PR if necessary? This design is not changed here.\nIn the current change, I am retrying once in the callers. But zero retry also works, I think, since we have added the async internal retry on connectivity issues. Do you think we shall just make it zero retry?", "url": "https://github.com/apache/helix/pull/974#discussion_r420318485", "createdAt": "2020-05-05T18:27:22Z", "author": {"login": "jiajunwang"}, "path": "helix-core/src/main/java/org/apache/helix/BaseDataAccessor.java", "diffHunk": "@@ -166,6 +167,7 @@\n    * @param options Set the type of ZNode see the valid values in {@link AccessOption}\n    * @return A list of children of the parent ZNode\n    */\n+  @Deprecated\n   List<T> getChildren(String parentPath, List<Stat> stats, int options);\n \n   /**", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDMxMzgwMw=="}, "originalCommit": {"oid": "cba4ec72a1ea2b7e0bfacbdbb881fa5118016f4e"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTAxMzIyOA==", "bodyText": "Since we already checked in the zkclient async call retry PR, let me change to zero retry for the newly changed callers in this PR.", "url": "https://github.com/apache/helix/pull/974#discussion_r421013228", "createdAt": "2020-05-06T18:45:20Z", "author": {"login": "jiajunwang"}, "path": "helix-core/src/main/java/org/apache/helix/BaseDataAccessor.java", "diffHunk": "@@ -166,6 +167,7 @@\n    * @param options Set the type of ZNode see the valid values in {@link AccessOption}\n    * @return A list of children of the parent ZNode\n    */\n+  @Deprecated\n   List<T> getChildren(String parentPath, List<Stat> stats, int options);\n \n   /**", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDMxMzgwMw=="}, "originalCommit": {"oid": "cba4ec72a1ea2b7e0bfacbdbb881fa5118016f4e"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYyMDc1MTY0OnYy", "diffSide": "RIGHT", "path": "helix-core/src/main/java/org/apache/helix/messaging/handling/HelixTaskExecutor.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxODowNjozMVrOGRfLKg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxODoxMzozN1rOGRfb7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDk4OTczOA==", "bodyText": "This is not a good idea. If we throws exception here, then there is no event to trigger message read. Then it could only relies on @mgao0 's periodical message refresh. But if user does not set this up?\nDo not throw exception at least can read some message back and process them. Also when ST done with these partial messages, delete message operation can trigger another round of read. I know relies on this logic is not robust. But at least, it is not worse scenario than throw exception here.", "url": "https://github.com/apache/helix/pull/974#discussion_r420989738", "createdAt": "2020-05-06T18:06:31Z", "author": {"login": "junkaixue"}, "path": "helix-core/src/main/java/org/apache/helix/messaging/handling/HelixTaskExecutor.java", "diffHunk": "@@ -701,7 +701,7 @@ private void syncSessionToController(HelixManager manager) {\n       }\n     }\n \n-    List<Message> newMessages = accessor.getProperty(keys);\n+    List<Message> newMessages = accessor.getProperty(keys, true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cba4ec72a1ea2b7e0bfacbdbb881fa5118016f4e"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDk5NDAzMA==", "bodyText": "Good point. I will change it back and add this to the comment.\nPlease help to check the other changes. My goal is to make all calls strictly checked unless we have a good reason.", "url": "https://github.com/apache/helix/pull/974#discussion_r420994030", "createdAt": "2020-05-06T18:13:37Z", "author": {"login": "jiajunwang"}, "path": "helix-core/src/main/java/org/apache/helix/messaging/handling/HelixTaskExecutor.java", "diffHunk": "@@ -701,7 +701,7 @@ private void syncSessionToController(HelixManager manager) {\n       }\n     }\n \n-    List<Message> newMessages = accessor.getProperty(keys);\n+    List<Message> newMessages = accessor.getProperty(keys, true);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDk4OTczOA=="}, "originalCommit": {"oid": "cba4ec72a1ea2b7e0bfacbdbb881fa5118016f4e"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0ODYzOTQ3OnYy", "diffSide": "RIGHT", "path": "helix-core/src/main/java/org/apache/helix/common/caches/TaskDataCache.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxODowODo0OFrOGVoaxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxOToxMjoxNFrOGVqlZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTMzNTQ5Mw==", "bodyText": "Does it mean if passing true here, it would throw exception? Then how do we handle this exception?", "url": "https://github.com/apache/helix/pull/974#discussion_r425335493", "createdAt": "2020-05-14T18:08:48Z", "author": {"login": "kaisun2000"}, "path": "helix-core/src/main/java/org/apache/helix/common/caches/TaskDataCache.java", "diffHunk": "@@ -194,9 +194,9 @@ private void refreshContextsAndPreviousAssignments(HelixDataAccessor accessor) {\n       }\n     }\n \n-    List<ZNRecord> contexts = accessor.getBaseDataAccessor().get(contextPaths, null, 0);\n+    List<ZNRecord> contexts = accessor.getBaseDataAccessor().get(contextPaths, null, 0, true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3e0b70e17f96b9bc004755ea795d6c4459bed261"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTMzNTc4Ng==", "bodyText": "By the way, if passing false here, it would retry this batch async reads infinitely?", "url": "https://github.com/apache/helix/pull/974#discussion_r425335786", "createdAt": "2020-05-14T18:09:26Z", "author": {"login": "kaisun2000"}, "path": "helix-core/src/main/java/org/apache/helix/common/caches/TaskDataCache.java", "diffHunk": "@@ -194,9 +194,9 @@ private void refreshContextsAndPreviousAssignments(HelixDataAccessor accessor) {\n       }\n     }\n \n-    List<ZNRecord> contexts = accessor.getBaseDataAccessor().get(contextPaths, null, 0);\n+    List<ZNRecord> contexts = accessor.getBaseDataAccessor().get(contextPaths, null, 0, true);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTMzNTQ5Mw=="}, "originalCommit": {"oid": "3e0b70e17f96b9bc004755ea795d6c4459bed261"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM3MDk4Mw==", "bodyText": "It will fail the current pipeline, which is what we want. Otherwise, the rebalance will be done based on incomplete information.\nIf false, it will return partial result.", "url": "https://github.com/apache/helix/pull/974#discussion_r425370983", "createdAt": "2020-05-14T19:12:14Z", "author": {"login": "jiajunwang"}, "path": "helix-core/src/main/java/org/apache/helix/common/caches/TaskDataCache.java", "diffHunk": "@@ -194,9 +194,9 @@ private void refreshContextsAndPreviousAssignments(HelixDataAccessor accessor) {\n       }\n     }\n \n-    List<ZNRecord> contexts = accessor.getBaseDataAccessor().get(contextPaths, null, 0);\n+    List<ZNRecord> contexts = accessor.getBaseDataAccessor().get(contextPaths, null, 0, true);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTMzNTQ5Mw=="}, "originalCommit": {"oid": "3e0b70e17f96b9bc004755ea795d6c4459bed261"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0ODY3MTIyOnYy", "diffSide": "RIGHT", "path": "helix-core/src/main/java/org/apache/helix/manager/zk/CallbackHandler.java", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxODoxNzo1NVrOGVouyw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQyMzoyNDoyM1rOGVxc_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM0MDYxOQ==", "bodyText": "Same question. Before this change, partial read would not terminate rest flow, so onLiveInstance(), onMessage() etc would be called.\nNow if exception thrown, this is not the case. This would\n1/ result onLiveInstance() etc not called, but the exception got caught in the ZkEvent thread.\n2/ For Molly's change to add perodical checking messages PULL request, this would break the time thread which calls onMessage(). Basically if the exception thrown from onMessage() when timer thread calls this one, this would stop later timer thread I believe. (We can test. I recall Java Concurrency Controller book mentioned this issue there.) This would defeat the purpose of Molly's change.", "url": "https://github.com/apache/helix/pull/974#discussion_r425340619", "createdAt": "2020-05-14T18:17:55Z", "author": {"login": "kaisun2000"}, "path": "helix-core/src/main/java/org/apache/helix/manager/zk/CallbackHandler.java", "diffHunk": "@@ -525,7 +526,7 @@ public void invoke(NotificationContext changeContext) throws Exception {\n \n   private <T extends HelixProperty> List<T> preFetch(PropertyKey key) {\n     if (_preFetchEnabled) {\n-      return _accessor.getChildValues(key);\n+      return _accessor.getChildValues(key, true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3e0b70e17f96b9bc004755ea795d6c4459bed261"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM3MzY3OA==", "bodyText": "\"partial read would not terminate rest flow\", true. But it will cause the controller to make the wrong decision. Which is even worse. To prevent this is the target of this change.\nI don't think it will fail the ZkEvent thread. All the callers as I can find has been try-catched. Do you have an example of exception?", "url": "https://github.com/apache/helix/pull/974#discussion_r425373678", "createdAt": "2020-05-14T19:17:30Z", "author": {"login": "jiajunwang"}, "path": "helix-core/src/main/java/org/apache/helix/manager/zk/CallbackHandler.java", "diffHunk": "@@ -525,7 +526,7 @@ public void invoke(NotificationContext changeContext) throws Exception {\n \n   private <T extends HelixProperty> List<T> preFetch(PropertyKey key) {\n     if (_preFetchEnabled) {\n-      return _accessor.getChildValues(key);\n+      return _accessor.getChildValues(key, true);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM0MDYxOQ=="}, "originalCommit": {"oid": "3e0b70e17f96b9bc004755ea795d6c4459bed261"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ0NjE4OA==", "bodyText": "Note, if exception thrown. For this CallbackHandler, before this change, partial read result would be feed to OnMessage() or OnWhatever; now, onMessage() would not be called, instead, zkEvent would get an exception, catch the exception nad do logging. This is what we want.\nThen, in Molly's case, the timer thread can see exception too, right? The thing is that I suspect that timer's internal thread may not schedule more OnMessage() if the previous one has exception thrown.  This needs to be tested and verified. Otherwise, the timer thread may never work after exception thrown if my suspicion is right.", "url": "https://github.com/apache/helix/pull/974#discussion_r425446188", "createdAt": "2020-05-14T21:38:45Z", "author": {"login": "kaisun2000"}, "path": "helix-core/src/main/java/org/apache/helix/manager/zk/CallbackHandler.java", "diffHunk": "@@ -525,7 +526,7 @@ public void invoke(NotificationContext changeContext) throws Exception {\n \n   private <T extends HelixProperty> List<T> preFetch(PropertyKey key) {\n     if (_preFetchEnabled) {\n-      return _accessor.getChildValues(key);\n+      return _accessor.getChildValues(key, true);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM0MDYxOQ=="}, "originalCommit": {"oid": "3e0b70e17f96b9bc004755ea795d6c4459bed261"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ3MzI0MA==", "bodyText": "@kaisun2000, that change has not been checked in yet. But it is a good point.\n@mgao0, Please be aware of what Kai mentioned.", "url": "https://github.com/apache/helix/pull/974#discussion_r425473240", "createdAt": "2020-05-14T22:50:17Z", "author": {"login": "jiajunwang"}, "path": "helix-core/src/main/java/org/apache/helix/manager/zk/CallbackHandler.java", "diffHunk": "@@ -525,7 +526,7 @@ public void invoke(NotificationContext changeContext) throws Exception {\n \n   private <T extends HelixProperty> List<T> preFetch(PropertyKey key) {\n     if (_preFetchEnabled) {\n-      return _accessor.getChildValues(key);\n+      return _accessor.getChildValues(key, true);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM0MDYxOQ=="}, "originalCommit": {"oid": "3e0b70e17f96b9bc004755ea795d6c4459bed261"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ4MzUxNw==", "bodyText": "Let me add this point to @mgao0's pull request.", "url": "https://github.com/apache/helix/pull/974#discussion_r425483517", "createdAt": "2020-05-14T23:24:23Z", "author": {"login": "kaisun2000"}, "path": "helix-core/src/main/java/org/apache/helix/manager/zk/CallbackHandler.java", "diffHunk": "@@ -525,7 +526,7 @@ public void invoke(NotificationContext changeContext) throws Exception {\n \n   private <T extends HelixProperty> List<T> preFetch(PropertyKey key) {\n     if (_preFetchEnabled) {\n-      return _accessor.getChildValues(key);\n+      return _accessor.getChildValues(key, true);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM0MDYxOQ=="}, "originalCommit": {"oid": "3e0b70e17f96b9bc004755ea795d6c4459bed261"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1472, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}