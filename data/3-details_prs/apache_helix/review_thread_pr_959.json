{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA2MjkzMjMz", "number": 959, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQyMDo1ODowN1rODz66Gw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQyMDo1ODowN1rODz66Gw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1NzY5MTE1OnYy", "diffSide": "RIGHT", "path": "helix-rest/src/test/java/org/apache/helix/rest/server/TestResourceAccessor.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQyMDo1ODowN1rOGInZ4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQyMjoyODozMlrOGIqQxg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTY4NzM5Mw==", "bodyText": "Why do you need to create a HelixAdmin object every time this is called? Also, why do you need to wrap this into a private method especially when the function signatures are exactly the same?", "url": "https://github.com/apache/helix/pull/959#discussion_r411687393", "createdAt": "2020-04-20T20:58:07Z", "author": {"login": "narendly"}, "path": "helix-rest/src/test/java/org/apache/helix/rest/server/TestResourceAccessor.java", "diffHunk": "@@ -657,19 +660,9 @@ private void createDummyMapping(String clusterName, String resourceName,\n     System.out.println(\"End test :\" + TestHelper.getTestMethodName());\n   }\n \n-  private void stopClustersControllers() {\n-    for (ClusterControllerManager cm : _clusterControllerManagers) {\n-      if (cm != null && cm.isConnected()) {\n-        cm.syncStop();\n-      }\n-    }\n+  private void enableCluster(String clusterName, boolean enable) {\n+    HelixAdmin helixAdmin = new ZKHelixAdmin(_gZkClient);\n+    helixAdmin.enableCluster(clusterName, enable);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5751b4d9461a20e75abe523dbe4de7dafae37b38"}, "originalPosition": 87}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTY4ODc0OQ==", "bodyText": "Also, don't we already have a HelixAdmin in the parent abstract class created with _gZkClient already?", "url": "https://github.com/apache/helix/pull/959#discussion_r411688749", "createdAt": "2020-04-20T21:00:24Z", "author": {"login": "narendly"}, "path": "helix-rest/src/test/java/org/apache/helix/rest/server/TestResourceAccessor.java", "diffHunk": "@@ -657,19 +660,9 @@ private void createDummyMapping(String clusterName, String resourceName,\n     System.out.println(\"End test :\" + TestHelper.getTestMethodName());\n   }\n \n-  private void stopClustersControllers() {\n-    for (ClusterControllerManager cm : _clusterControllerManagers) {\n-      if (cm != null && cm.isConnected()) {\n-        cm.syncStop();\n-      }\n-    }\n+  private void enableCluster(String clusterName, boolean enable) {\n+    HelixAdmin helixAdmin = new ZKHelixAdmin(_gZkClient);\n+    helixAdmin.enableCluster(clusterName, enable);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTY4NzM5Mw=="}, "originalCommit": {"oid": "5751b4d9461a20e75abe523dbe4de7dafae37b38"}, "originalPosition": 87}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTY5MjI5Mw==", "bodyText": "+1. I believe _gSetupTool.getClusterManagementTool() gives you helix admin and this function enableCluster(). So _gSetupTool.getClusterManagementTool().enableCluster() is one line you need. This private method may not be needed.", "url": "https://github.com/apache/helix/pull/959#discussion_r411692293", "createdAt": "2020-04-20T21:06:32Z", "author": {"login": "huizhilu"}, "path": "helix-rest/src/test/java/org/apache/helix/rest/server/TestResourceAccessor.java", "diffHunk": "@@ -657,19 +660,9 @@ private void createDummyMapping(String clusterName, String resourceName,\n     System.out.println(\"End test :\" + TestHelper.getTestMethodName());\n   }\n \n-  private void stopClustersControllers() {\n-    for (ClusterControllerManager cm : _clusterControllerManagers) {\n-      if (cm != null && cm.isConnected()) {\n-        cm.syncStop();\n-      }\n-    }\n+  private void enableCluster(String clusterName, boolean enable) {\n+    HelixAdmin helixAdmin = new ZKHelixAdmin(_gZkClient);\n+    helixAdmin.enableCluster(clusterName, enable);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTY4NzM5Mw=="}, "originalCommit": {"oid": "5751b4d9461a20e75abe523dbe4de7dafae37b38"}, "originalPosition": 87}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTczNDIxNA==", "bodyText": "Wasn't able to find HelixAdmin in the parent class, but @pkuwm is correct. Thank you for the pointers and updated accordingly!", "url": "https://github.com/apache/helix/pull/959#discussion_r411734214", "createdAt": "2020-04-20T22:28:32Z", "author": {"login": "NealSun96"}, "path": "helix-rest/src/test/java/org/apache/helix/rest/server/TestResourceAccessor.java", "diffHunk": "@@ -657,19 +660,9 @@ private void createDummyMapping(String clusterName, String resourceName,\n     System.out.println(\"End test :\" + TestHelper.getTestMethodName());\n   }\n \n-  private void stopClustersControllers() {\n-    for (ClusterControllerManager cm : _clusterControllerManagers) {\n-      if (cm != null && cm.isConnected()) {\n-        cm.syncStop();\n-      }\n-    }\n+  private void enableCluster(String clusterName, boolean enable) {\n+    HelixAdmin helixAdmin = new ZKHelixAdmin(_gZkClient);\n+    helixAdmin.enableCluster(clusterName, enable);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTY4NzM5Mw=="}, "originalCommit": {"oid": "5751b4d9461a20e75abe523dbe4de7dafae37b38"}, "originalPosition": 87}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1453, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}