{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIwODIxNjk5", "number": 247, "title": "Pip Inspector: Find requirements.txt", "bodyText": "PipInspector now will search for files named requirements.txt if detect.pip.requirements.paths is not set", "createdAt": "2020-11-13T20:05:45Z", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/247", "merged": true, "mergeCommit": {"oid": "81274ba1cf190689c2a249c2b00e71b073132870"}, "closed": true, "closedAt": "2020-11-13T21:32:13Z", "author": {"login": "rottebds"}, "timelineItems": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdcM1rCAH2gAyNTIwODIxNjk5OmIyNjFlOGVhN2MzM2QwZTUxYWU1M2EwYWQ5YTFlOTI3ZGI4NDQ2YWI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdcNL63AFqTUzMDM4MDE2Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b261e8ea7c33d0e51ae53a0ad9a1e927db8446ab", "author": {"user": {"login": "rottebds", "name": "Richard Otte"}}, "url": "https://github.com/blackducksoftware/synopsys-detect/commit/b261e8ea7c33d0e51ae53a0ad9a1e927db8446ab", "committedDate": "2020-11-13T20:04:36Z", "message": "feat: PipInspector now will search for files named requirements.txt if detect.pip.requirements.paths is not set"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMwMzgwMTYz", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/247#pullrequestreview-530380163", "createdAt": "2020-11-13T20:23:59Z", "commit": {"oid": "b261e8ea7c33d0e51ae53a0ad9a1e927db8446ab"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QyMDoyMzo1OVrOHy901A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QyMDoyODo0NVrOHy99WA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzIwMzc5Ng==", "bodyText": "Does the current file finder take into account search depth? I know some customers are going to have requirements files not at root level, for that we could just say use the property.", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/247#discussion_r523203796", "createdAt": "2020-11-13T20:23:59Z", "author": {"login": "JakeMathews"}, "path": "detectable/src/main/java/com/synopsys/integration/detectable/detectables/pip/PipInspectorDetectable.java", "diffHunk": "@@ -69,12 +76,21 @@ public PipInspectorDetectable(final DetectableEnvironment environment, final Fil\n     @Override\n     public DetectableResult applicable() {\n         setupFile = fileFinder.findFile(environment.getDirectory(), SETUPTOOLS_DEFAULT_FILE_NAME);\n-        final boolean hasSetups = setupFile != null;\n-        final boolean hasRequirements = pipInspectorDetectableOptions.getRequirementsFilePaths() != null && pipInspectorDetectableOptions.getRequirementsFilePaths().size() > 0;\n+        boolean hasSetups = setupFile != null;\n+\n+        requirementsFiles = pipInspectorDetectableOptions.getRequirementsFilePaths();\n+        if (CollectionUtils.isEmpty(pipInspectorDetectableOptions.getRequirementsFilePaths())) {\n+            requirementsFiles = fileFinder.findFiles(environment.getDirectory(), REQUIREMENTS_DEFAULT_FILE_NAME)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b261e8ea7c33d0e51ae53a0ad9a1e927db8446ab"}, "originalPosition": 58}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzIwNTk3Ng==", "bodyText": "Any reason for not using requirementFiles.isEmpty()?", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/247#discussion_r523205976", "createdAt": "2020-11-13T20:28:45Z", "author": {"login": "JakeMathews"}, "path": "detectable/src/main/java/com/synopsys/integration/detectable/detectables/pip/PipInspectorDetectable.java", "diffHunk": "@@ -69,12 +76,21 @@ public PipInspectorDetectable(final DetectableEnvironment environment, final Fil\n     @Override\n     public DetectableResult applicable() {\n         setupFile = fileFinder.findFile(environment.getDirectory(), SETUPTOOLS_DEFAULT_FILE_NAME);\n-        final boolean hasSetups = setupFile != null;\n-        final boolean hasRequirements = pipInspectorDetectableOptions.getRequirementsFilePaths() != null && pipInspectorDetectableOptions.getRequirementsFilePaths().size() > 0;\n+        boolean hasSetups = setupFile != null;\n+\n+        requirementsFiles = pipInspectorDetectableOptions.getRequirementsFilePaths();\n+        if (CollectionUtils.isEmpty(pipInspectorDetectableOptions.getRequirementsFilePaths())) {\n+            requirementsFiles = fileFinder.findFiles(environment.getDirectory(), REQUIREMENTS_DEFAULT_FILE_NAME)\n+                                    .stream()\n+                                    .map(File::toPath)\n+                                    .collect(Collectors.toList());\n+        }\n+        boolean hasRequirements = CollectionUtils.isNotEmpty(requirementsFiles);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b261e8ea7c33d0e51ae53a0ad9a1e927db8446ab"}, "originalPosition": 63}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3237, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}