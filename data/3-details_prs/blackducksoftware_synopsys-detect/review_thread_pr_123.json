{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgxMDQ3OTA4", "number": 123, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQyMjoyMTozNVrODkcgkA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzoyNDozN1rODwfw8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5NTQyNDE2OnYy", "diffSide": "RIGHT", "path": "detectable/src/test/java/com/synopsys/integration/detectable/detectables/npm/lockfile/functional/NpmLockDetectableTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQyMjoyMTozNVrOFwxe1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQyMjoyMTozNVrOFwxe1A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY4NjY3Ng==", "bodyText": "Can you make an assert for this dependency?", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/123#discussion_r386686676", "createdAt": "2020-03-02T22:21:35Z", "author": {"login": "JakeMathews"}, "path": "detectable/src/test/java/com/synopsys/integration/detectable/detectables/npm/lockfile/functional/NpmLockDetectableTest.java", "diffHunk": "@@ -0,0 +1,71 @@\n+package com.synopsys.integration.detectable.detectables.npm.lockfile.functional;\n+\n+import java.io.IOException;\n+import java.nio.file.Paths;\n+\n+import org.jetbrains.annotations.NotNull;\n+import org.junit.jupiter.api.Assertions;\n+\n+import com.synopsys.integration.bdio.model.Forge;\n+import com.synopsys.integration.detectable.Detectable;\n+import com.synopsys.integration.detectable.DetectableEnvironment;\n+import com.synopsys.integration.detectable.Extraction;\n+import com.synopsys.integration.detectable.detectables.npm.lockfile.NpmLockfileOptions;\n+import com.synopsys.integration.detectable.functional.DetectableFunctionalTest;\n+import com.synopsys.integration.detectable.util.graph.NameVersionGraphAssert;\n+\n+public class NpmLockDetectableTest extends DetectableFunctionalTest {\n+\n+    public NpmLockDetectableTest() throws IOException {\n+        super(\"npmLock\");\n+    }\n+\n+    @Override\n+    public void setup() throws IOException {\n+        addFile(Paths.get(\"package-lock.json\"),\n+            \"{\",\n+            \"   \\\"name\\\": \\\"knockout-tournament\\\",\",\n+            \"   \\\"version\\\": \\\"1.0.0\\\",\",\n+            \"   \\\"lockfileVersion\\\": 1,\",\n+            \"   \\\"requires\\\": true,\",\n+            \"   \\\"dependencies\\\": {\",\n+            \"       \\\"balanced-match\\\": {\",\n+            \"           \\\"version\\\": \\\"1.0.0\\\",\",\n+            \"           \\\"resolved\\\": \\\"https://registry.npmjs.org/balanced-match/-/balanced-match-1.0.0.tgz\\\",\",\n+            \"           \\\"integrity\\\": \\\"sha1-ibTRmasr7kneFk6gK4nORi1xt2c=\\\",\",\n+            \"           \\\"dev\\\": true\",\n+            \"       },\",\n+            \"       \\\"brace-expansion\\\": {\",\n+            \"           \\\"version\\\": \\\"1.1.8\\\",\",\n+            \"           \\\"resolved\\\": \\\"https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.8.tgz\\\",\",\n+            \"           \\\"integrity\\\": \\\"sha1-wHshHHyVLsH479Uad+8NHTmQopI=\\\",\",\n+            \"           \\\"dev\\\": true,\",\n+            \"           \\\"requires\\\": {\",\n+            \"               \\\"balanced-match\\\": \\\"1.0.0\\\",\",\n+            \"               \\\"concat-map\\\": \\\"0.0.1\\\"\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d315451772f1ea508b0b2532c21b544fd7466f0d"}, "originalPosition": 45}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5NTQzNTUxOnYy", "diffSide": "RIGHT", "path": "detectable/src/test/java/com/synopsys/integration/detectable/detectables/npm/lockfile/functional/NpmOutputParserTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQyMjoyNTozOFrOFwxlsQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQyMjoyNTozOFrOFwxlsQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY4ODQzMw==", "bodyText": "Can you move the resources file into the test.", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/123#discussion_r386688433", "createdAt": "2020-03-02T22:25:38Z", "author": {"login": "JakeMathews"}, "path": "detectable/src/test/java/com/synopsys/integration/detectable/detectables/npm/lockfile/functional/NpmOutputParserTest.java", "diffHunk": "@@ -24,23 +24,31 @@\n \n import org.junit.jupiter.api.Assertions;\n import org.junit.jupiter.api.Test;\n-import org.junit.jupiter.api.Disabled;\n+\n+import com.synopsys.integration.bdio.model.Forge;\n import com.synopsys.integration.bdio.model.externalid.ExternalIdFactory;\n import com.synopsys.integration.detectable.detectables.npm.cli.parse.NpmCliParser;\n import com.synopsys.integration.detectable.detectables.npm.lockfile.model.NpmParseResult;\n import com.synopsys.integration.detectable.util.FunctionalTestFiles;\n-import com.synopsys.integration.detectable.util.GraphCompare;\n+import com.synopsys.integration.detectable.util.graph.NameVersionGraphAssert;\n \n public class NpmOutputParserTest {\n     @Test\n-    @Disabled\n     public void npmCliDependencyFinder() {\n         final NpmCliParser parser = new NpmCliParser(new ExternalIdFactory());\n         final String testIn = FunctionalTestFiles.asString(\"/npm/packman_proj_dependencies.json\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d315451772f1ea508b0b2532c21b544fd7466f0d"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5NTQzODI4OnYy", "diffSide": "RIGHT", "path": "detectable/src/test/java/com/synopsys/integration/detectable/detectables/npm/lockfile/functional/NpmShrinkwrapDetectableTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQyMjoyNjoyN1rOFwxnRQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQyMjoyNjoyN1rOFwxnRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY4ODgzNw==", "bodyText": "Can you assert on this dependency.", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/123#discussion_r386688837", "createdAt": "2020-03-02T22:26:27Z", "author": {"login": "JakeMathews"}, "path": "detectable/src/test/java/com/synopsys/integration/detectable/detectables/npm/lockfile/functional/NpmShrinkwrapDetectableTest.java", "diffHunk": "@@ -0,0 +1,73 @@\n+package com.synopsys.integration.detectable.detectables.npm.lockfile.functional;\n+\n+import java.io.IOException;\n+import java.nio.file.Paths;\n+\n+import org.jetbrains.annotations.NotNull;\n+import org.junit.jupiter.api.Assertions;\n+\n+import com.synopsys.integration.bdio.model.Forge;\n+import com.synopsys.integration.detectable.Detectable;\n+import com.synopsys.integration.detectable.DetectableEnvironment;\n+import com.synopsys.integration.detectable.Extraction;\n+import com.synopsys.integration.detectable.detectables.npm.lockfile.NpmLockfileOptions;\n+import com.synopsys.integration.detectable.functional.DetectableFunctionalTest;\n+import com.synopsys.integration.detectable.util.graph.NameVersionGraphAssert;\n+\n+public class NpmShrinkwrapDetectableTest extends DetectableFunctionalTest {\n+\n+    public NpmShrinkwrapDetectableTest() throws IOException {\n+        super(\"npmShrinkwrap\");\n+    }\n+\n+    @Override\n+    protected void setup() throws IOException {\n+        addFile(Paths.get(\"npm-shrinkwrap.json\"),\n+            \"{\",\n+            \"   \\\"name\\\": \\\"fec-builder\\\",\",\n+            \"   \\\"version\\\": \\\"1.3.7\\\",\",\n+            \"   \\\"lockfileVersion\\\": 1,\",\n+            \"   \\\"requires\\\": true,\",\n+            \"   \\\"dependencies\\\": {\",\n+            \"       \\\"abbrev\\\": {\",\n+            \"           \\\"version\\\": \\\"1.0.9\\\"\",\n+            \"       },\",\n+            \"       \\\"accepts\\\": {\",\n+            \"           \\\"version\\\": \\\"1.3.3\\\",\",\n+            \"           \\\"requires\\\": {\",\n+            \"               \\\"mime-types\\\": \\\"2.1.14\\\",\",\n+            \"               \\\"negotiator\\\": \\\"0.6.1\\\"\",\n+            \"           }\",\n+            \"       },\",\n+            \"        \\\"mime-types\\\": {\",\n+            \"           \\\"version\\\": \\\"https://registry.npmjs.org/mime-types/-/mime-types-2.1.13.tgz\\\",\",\n+            \"           \\\"integrity\\\": \\\"sha1-4HqqnGxrmnyjASxpADrSWjnpKog=\\\",\",\n+            \"           \\\"requires\\\": {\",\n+            \"               \\\"mime-db\\\": \\\"https://registry.npmjs.org/mime-db/-/mime-db-1.25.0.tgz\\\"\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d315451772f1ea508b0b2532c21b544fd7466f0d"}, "originalPosition": 46}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxNjU0MzAyOnYy", "diffSide": "RIGHT", "path": "detectable/src/test/java/com/synopsys/integration/detectable/detectables/npm/lockfile/functional/NpmOutputParserTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQyMDo1NDoyNFrOFz5AuA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQyMDo1NDoyNFrOFz5AuA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTk1NTc2OA==", "bodyText": "I'd prefer something like the following.\nStringUtils.join(\n            \"line1\",\n            \"line2\",\n            \"line3\"\n        , System.lineSeparator()\n);\n\nThat's a lot of String concatenation, its hard to read, and the \"\\n\" might cause issues on Windows.", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/123#discussion_r389955768", "createdAt": "2020-03-09T20:54:24Z", "author": {"login": "JakeMathews"}, "path": "detectable/src/test/java/com/synopsys/integration/detectable/detectables/npm/lockfile/functional/NpmOutputParserTest.java", "diffHunk": "@@ -24,23 +24,65 @@\n \n import org.junit.jupiter.api.Assertions;\n import org.junit.jupiter.api.Test;\n-import org.junit.jupiter.api.Disabled;\n+\n+import com.synopsys.integration.bdio.model.Forge;\n import com.synopsys.integration.bdio.model.externalid.ExternalIdFactory;\n import com.synopsys.integration.detectable.detectables.npm.cli.parse.NpmCliParser;\n import com.synopsys.integration.detectable.detectables.npm.lockfile.model.NpmParseResult;\n-import com.synopsys.integration.detectable.util.FunctionalTestFiles;\n-import com.synopsys.integration.detectable.util.GraphCompare;\n+import com.synopsys.integration.detectable.util.graph.NameVersionGraphAssert;\n \n public class NpmOutputParserTest {\n     @Test\n-    @Disabled\n     public void npmCliDependencyFinder() {\n         final NpmCliParser parser = new NpmCliParser(new ExternalIdFactory());\n-        final String testIn = FunctionalTestFiles.asString(\"/npm/packman_proj_dependencies.json\");\n+        final String testIn =\n+            \"{\" + \"\\n\" +\n+                \"   \\\"name\\\": \\\"node-js\\\",\" + \"\\n\" +\n+                \"   \\\"version\\\": \\\"0.2.0\\\",\" + \"\\n\" +\n+                \"   \\\"dependencies\\\": {\" + \"\\n\" +\n+                \"       \\\"upper-case\\\": {\" + \"\\n\" +\n+                \"       \\\"version\\\": \\\"1.1.3\\\",\" + \"\\n\" +\n+                \"       \\\"from\\\": \\\"upper-case@latest\\\",\" + \"\\n\" +\n+                \"       \\\"resolved\\\": \\\"https://registry.npmjs.org/upper-case/-/upper-case-1.1.3.tgz\\\"\" + \"\\n\" +\n+                \"       },\" + \"\\n\" +\n+                \"       \\\"xml2js\\\": {\" + \"\\n\" +\n+                \"           \\\"version\\\": \\\"0.4.17\\\",\" + \"\\n\" +\n+                \"           \\\"from\\\": \\\"xml2js@latest\\\",\" + \"\\n\" +\n+                \"           \\\"resolved\\\": \\\"https://registry.npmjs.org/xml2js/-/xml2js-0.4.17.tgz\\\",\" + \"\\n\" +\n+                \"            \\\"dependencies\\\": {\" + \"\\n\" +\n+                \"               \\\"sax\\\": {\" + \"\\n\" +\n+                \"                   \\\"version\\\": \\\"1.2.2\\\",\" + \"\\n\" +\n+                \"                   \\\"from\\\": \\\"sax@>=0.6.0\\\",\" + \"\\n\" +\n+                \"                   \\\"resolved\\\": \\\"https://registry.npmjs.org/sax/-/sax-1.2.2.tgz\\\"\" + \"\\n\" +\n+                \"               },\" + \"\\n\" +\n+                \"               \\\"xmlbuilder\\\": {\" + \"\\n\" +\n+                \"                   \\\"version\\\": \\\"4.2.1\\\",\" + \"\\n\" +\n+                \"                   \\\"from\\\": \\\"xmlbuilder@>=4.1.0 <5.0.0\\\",\" + \"\\n\" +\n+                \"                   \\\"resolved\\\": \\\"https://registry.npmjs.org/xmlbuilder/-/xmlbuilder-4.2.1.tgz\\\",\" + \"\\n\" +\n+                \"                   \\\"dependencies\\\": {\" + \"\\n\" +\n+                \"                       \\\"lodash\\\": {\" + \"\\n\" +\n+                \"                           \\\"version\\\": \\\"4.17.4\\\",\" + \"\\n\" +\n+                \"                           \\\"from\\\": \\\"lodash@>=4.0.0 <5.0.0\\\",\" + \"\\n\" +\n+                \"                           \\\"resolved\\\": \\\"https://registry.npmjs.org/lodash/-/lodash-4.17.4.tgz\\\"\" + \"\\n\" +\n+                \"                       }\" + \"\\n\" +\n+                \"                   }\" + \"\\n\" +\n+                \"               }\" + \"\\n\" +\n+                \"           }\" + \"\\n\" +\n+                \"       }\" + \"\\n\" +\n+                \"   }\" + \"\\n\" +\n+                \"}\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d161dd0696f95e1804a9ea9935fc34b7961d218c"}, "originalPosition": 55}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyMTc4Njc0OnYy", "diffSide": "RIGHT", "path": "detectable/src/test/java/com/synopsys/integration/detectable/detectables/npm/lockfile/functional/NpmLockfileParserTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzoyNDozN1rOGDiO4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzoyNDozN1rOGDiO4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM1OTc3Nw==", "bodyText": "These seem redundant with the new Detectable test. Feel free to remove.", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/123#discussion_r406359777", "createdAt": "2020-04-09T17:24:37Z", "author": {"login": "JakeMathews"}, "path": "detectable/src/test/java/com/synopsys/integration/detectable/detectables/npm/lockfile/functional/NpmLockfileParserTest.java", "diffHunk": "@@ -47,24 +47,15 @@ public void init() {\n         npmLockfileParser = new NpmLockfileParser(new GsonBuilder().setPrettyPrinting().create(), new ExternalIdFactory());\n     }\n \n-    @Test\n-    @Disabled\n-    public void parseLockFileWithRecreatedJsonTest() {\n-        final String lockFileText = FunctionalTestFiles.asString(\"/npm/package-lock.json\");\n \n-        final NpmParseResult result = npmLockfileParser.parse(recreatePackageJsonFromLock(lockFileText), lockFileText, true);\n-\n-        Assertions.assertEquals(\"knockout-tournament\", result.getProjectName());\n-        Assertions.assertEquals(\"1.0.0\", result.getProjectVersion());\n-        GraphCompare.assertEqualsResource(\"/npm/packageLockExpected_graph.json\", result.getCodeLocation().getDependencyGraph());\n-    }\n+    /*  Are these <...>WithRecreatedJson tests important? */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "605328271aeccac59c4e6df5a466a65237086d52"}, "originalPosition": 15}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1563, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}