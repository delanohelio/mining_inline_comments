{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc0MDA5NjY4", "number": 215, "title": "feat(status): Detectors field in status.json now has more concise and\u2026", "bodyText": "\u2026 expressive codes and messages (IDETECT-2188)\nImproving how we display detector results in status.json, as per IDETECT-2188.\nSlimmed fields in \"detectors\" section, provide a status, status code (derived from runtime class of the returned DetectResult), and status reason (an explanation for the code).", "createdAt": "2020-08-26T16:08:24Z", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/215", "merged": true, "mergeCommit": {"oid": "fe86c87fd3f4381941e8f740edb0ac1c8c935a79"}, "closed": true, "closedAt": "2020-09-11T20:03:26Z", "author": {"login": "crowleySynopsys"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdCdlpVgH2gAyNDc0MDA5NjY4OjZmZjBkNTk3YzBiYTgzOTQyZDA4ZTQ5ZWI3ODQyNTU3OTI3MWYwYjg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdH6vWVgFqTQ4NzA3NjUzNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6ff0d597c0ba83942d08e49eb78425579271f0b8", "author": {"user": {"login": "crowleySynopsys", "name": null}}, "url": "https://github.com/blackducksoftware/synopsys-detect/commit/6ff0d597c0ba83942d08e49eb78425579271f0b8", "committedDate": "2020-08-25T20:53:27Z", "message": "feat(status): Detectors field in status.json now has more concise and expressive codes and messages (IDETECT-2188)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1NjY4ODkw", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/215#pullrequestreview-475668890", "createdAt": "2020-08-26T16:40:24Z", "commit": {"oid": "6ff0d597c0ba83942d08e49eb78425579271f0b8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxNjo0MDoyNFrOHHUkDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxNjo0MDoyNFrOHHUkDg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzQzODk5MA==", "bodyText": "I think this should be done before this class is constructed - ie, this class is given the formatted result name.", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/215#discussion_r477438990", "createdAt": "2020-08-26T16:40:24Z", "author": {"login": "taikuukaits"}, "path": "detector/src/main/java/com/synopsys/integration/detector/result/DetectorResult.java", "diffHunk": "@@ -42,4 +44,27 @@ public boolean getPassed() {\n     public String getDescription() {\n         return description;\n     }\n+\n+    public String getStatusCode() {\n+        if (!passed) {\n+            return formatResultNameToStatusCode(resultName);\n+        }\n+        return \"PASSED\";\n+    }\n+\n+    private String formatResultNameToStatusCode(String resultName) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6ff0d597c0ba83942d08e49eb78425579271f0b8"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1NjcwMTMx", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/215#pullrequestreview-475670131", "createdAt": "2020-08-26T16:42:00Z", "commit": {"oid": "6ff0d597c0ba83942d08e49eb78425579271f0b8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxNjo0MjowMFrOHHUn-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxNjo0MjowMFrOHHUn-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzQzOTk5Mw==", "bodyText": "Your example contains \"DetectResult\" but you try to strip it here?", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/215#discussion_r477439993", "createdAt": "2020-08-26T16:42:00Z", "author": {"login": "taikuukaits"}, "path": "detector/src/main/java/com/synopsys/integration/detector/result/DetectorResult.java", "diffHunk": "@@ -42,4 +44,27 @@ public boolean getPassed() {\n     public String getDescription() {\n         return description;\n     }\n+\n+    public String getStatusCode() {\n+        if (!passed) {\n+            return formatResultNameToStatusCode(resultName);\n+        }\n+        return \"PASSED\";\n+    }\n+\n+    private String formatResultNameToStatusCode(String resultName) {\n+        // Regular Expression\n+        String regex = \"([a-z])([A-Z]+)\";\n+\n+        // Replacement string\n+        String replacement = \"$1_$2\";\n+\n+        // Strip fully qualified class name\n+        String[] classnamePieces = resultName.split(\"\\\\.\");\n+        String actualResultName = classnamePieces[classnamePieces.length-1].replace(\"DetectResult\", \"\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6ff0d597c0ba83942d08e49eb78425579271f0b8"}, "originalPosition": 35}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1NjcwMjkx", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/215#pullrequestreview-475670291", "createdAt": "2020-08-26T16:42:12Z", "commit": {"oid": "6ff0d597c0ba83942d08e49eb78425579271f0b8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxNjo0MjoxMlrOHHUobw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxNjo0MjoxMlrOHHUobw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzQ0MDExMQ==", "bodyText": "Comments seem unnecessary.", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/215#discussion_r477440111", "createdAt": "2020-08-26T16:42:12Z", "author": {"login": "taikuukaits"}, "path": "detector/src/main/java/com/synopsys/integration/detector/result/DetectorResult.java", "diffHunk": "@@ -42,4 +44,27 @@ public boolean getPassed() {\n     public String getDescription() {\n         return description;\n     }\n+\n+    public String getStatusCode() {\n+        if (!passed) {\n+            return formatResultNameToStatusCode(resultName);\n+        }\n+        return \"PASSED\";\n+    }\n+\n+    private String formatResultNameToStatusCode(String resultName) {\n+        // Regular Expression", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6ff0d597c0ba83942d08e49eb78425579271f0b8"}, "originalPosition": 27}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1NjcwNTk4", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/215#pullrequestreview-475670598", "createdAt": "2020-08-26T16:42:38Z", "commit": {"oid": "6ff0d597c0ba83942d08e49eb78425579271f0b8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxNjo0MjozOFrOHHUpZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxNjo0MjozOFrOHHUpZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzQ0MDM1Nw==", "bodyText": "Don't see why the regex needs to be on its own line and defined before it's used.", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/215#discussion_r477440357", "createdAt": "2020-08-26T16:42:38Z", "author": {"login": "taikuukaits"}, "path": "detector/src/main/java/com/synopsys/integration/detector/result/DetectorResult.java", "diffHunk": "@@ -42,4 +44,27 @@ public boolean getPassed() {\n     public String getDescription() {\n         return description;\n     }\n+\n+    public String getStatusCode() {\n+        if (!passed) {\n+            return formatResultNameToStatusCode(resultName);\n+        }\n+        return \"PASSED\";\n+    }\n+\n+    private String formatResultNameToStatusCode(String resultName) {\n+        // Regular Expression\n+        String regex = \"([a-z])([A-Z]+)\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6ff0d597c0ba83942d08e49eb78425579271f0b8"}, "originalPosition": 28}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0d24c803234949b463f6782d87dd0abb146bdf60", "author": {"user": {"login": "crowleySynopsys", "name": null}}, "url": "https://github.com/blackducksoftware/synopsys-detect/commit/0d24c803234949b463f6782d87dd0abb146bdf60", "committedDate": "2020-08-26T18:09:00Z", "message": "refactor: Pass regex and replacement directly to replace method, remove comments."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "072d0c08d873802522a3c3b48d083853f6c519ae", "author": {"user": {"login": "crowleySynopsys", "name": null}}, "url": "https://github.com/blackducksoftware/synopsys-detect/commit/072d0c08d873802522a3c3b48d083853f6c519ae", "committedDate": "2020-08-27T17:29:31Z", "message": "refactor: Pass name of detector result class to FormattedOutputManager."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ab4c356fffc5cdf89c5ccaaf44626ff91dff8421", "author": {"user": {"login": "crowleySynopsys", "name": null}}, "url": "https://github.com/blackducksoftware/synopsys-detect/commit/ab4c356fffc5cdf89c5ccaaf44626ff91dff8421", "committedDate": "2020-08-27T20:32:47Z", "message": "feat: Added test for format of new detector items in status.json."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2MDU5Mjcy", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/215#pullrequestreview-486059272", "createdAt": "2020-09-10T15:31:25Z", "commit": {"oid": "ab4c356fffc5cdf89c5ccaaf44626ff91dff8421"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3MDc2NTM3", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/215#pullrequestreview-487076537", "createdAt": "2020-09-11T19:40:55Z", "commit": {"oid": "ab4c356fffc5cdf89c5ccaaf44626ff91dff8421"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3356, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}