{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM3MjU5Nzcy", "number": 196, "title": "Cognitive complexity", "bodyText": "Addressing some of the cognitive complexity issues as defined by SonarCloud.\nThe issues addressed in this PR can be found here: https://sonarcloud.io/project/issues?assignees=JakeMathews%40github&id=com.synopsys.integration%3Asynopsys-detect&resolved=false&rules=java%3AS3776", "createdAt": "2020-06-19T19:17:51Z", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/196", "merged": true, "mergeCommit": {"oid": "d517281d4a3fe5318a365a15fb848690af72f1d3"}, "closed": true, "closedAt": "2020-06-30T15:08:57Z", "author": {"login": "JakeMathews"}, "timelineItems": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcr62uxAH2gAyNDM3MjU5NzcyOmViNTliYzVkOTU3MDM5Zjc4Mjc4YzAwOTVkMmU2YWE2YzU5ZTQ0Mzg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcuHwjZAFqTQzNTkzNzU2Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "eb59bc5d957039f78278c0095d2e6aa6c59e4438", "author": {"user": {"login": "JakeMathews", "name": "Jake Mathews"}}, "url": "https://github.com/blackducksoftware/synopsys-detect/commit/eb59bc5d957039f78278c0095d2e6aa6c59e4438", "committedDate": "2020-06-16T19:59:06Z", "message": "refactor(sonar): Reduced cognitive complexity by moving Gradle execution code to its own class."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b62a4f465b87423265b4f07cf710f45af0dbac26", "author": {"user": {"login": "JakeMathews", "name": "Jake Mathews"}}, "url": "https://github.com/blackducksoftware/synopsys-detect/commit/b62a4f465b87423265b4f07cf710f45af0dbac26", "committedDate": "2020-06-16T20:08:13Z", "message": "refactor(sonar): Reduced cognitive complexity by moving logic chunks into methods."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d95382d64d9c62cf02e0b368596109e2b9a1af31", "author": {"user": {"login": "JakeMathews", "name": "Jake Mathews"}}, "url": "https://github.com/blackducksoftware/synopsys-detect/commit/d95382d64d9c62cf02e0b368596109e2b9a1af31", "committedDate": "2020-06-18T14:46:10Z", "message": "refactor(sonar): Reduced cognitive complexity by moving filtering to Stream operations."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee3898cae6d791a024ae2cb5b41b5835be4be125", "author": {"user": {"login": "JakeMathews", "name": "Jake Mathews"}}, "url": "https://github.com/blackducksoftware/synopsys-detect/commit/ee3898cae6d791a024ae2cb5b41b5835be4be125", "committedDate": "2020-06-18T14:57:00Z", "message": "refactor(sonar): Reduced cognitive complexity by exiting method early."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e384c1e3e986961e388aeff4eadb614c3b5aa59", "author": {"user": {"login": "JakeMathews", "name": "Jake Mathews"}}, "url": "https://github.com/blackducksoftware/synopsys-detect/commit/4e384c1e3e986961e388aeff4eadb614c3b5aa59", "committedDate": "2020-06-18T15:59:41Z", "message": "refactor(sonar): Reduced cognitive complexity by moving logic chunks into methods."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ea4a5cabd2603eb3ba14fa233ab1273c39eb742", "author": {"user": {"login": "JakeMathews", "name": "Jake Mathews"}}, "url": "https://github.com/blackducksoftware/synopsys-detect/commit/2ea4a5cabd2603eb3ba14fa233ab1273c39eb742", "committedDate": "2020-06-18T20:02:45Z", "message": "refactor(sonar): Reduced cognitive complexity by moving logic chunks into methods."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d28f994a54270936235a813ea1d5e81669927892", "author": {"user": {"login": "JakeMathews", "name": "Jake Mathews"}}, "url": "https://github.com/blackducksoftware/synopsys-detect/commit/d28f994a54270936235a813ea1d5e81669927892", "committedDate": "2020-06-18T21:39:37Z", "message": "refactor(sonar): Reduced cognitive complexity by simplifying if statements."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "75279768a388cb2aa965622049e1fb131bfc7ec2", "author": {"user": {"login": "JakeMathews", "name": "Jake Mathews"}}, "url": "https://github.com/blackducksoftware/synopsys-detect/commit/75279768a388cb2aa965622049e1fb131bfc7ec2", "committedDate": "2020-06-18T21:57:11Z", "message": "refactor(sonar): Reduced cognitive complexity by removing unnecessary if checks."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c74d466c5fb97251965c3e4851d361a6698aec01", "author": {"user": {"login": "JakeMathews", "name": "Jake Mathews"}}, "url": "https://github.com/blackducksoftware/synopsys-detect/commit/c74d466c5fb97251965c3e4851d361a6698aec01", "committedDate": "2020-06-18T22:04:02Z", "message": "refactor(sonar): Reduced cognitive complexity by moving logic chunks into methods."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8350680d1edc8efb86f9fd290f481fdbdfced85f", "author": {"user": {"login": "JakeMathews", "name": "Jake Mathews"}}, "url": "https://github.com/blackducksoftware/synopsys-detect/commit/8350680d1edc8efb86f9fd290f481fdbdfced85f", "committedDate": "2020-06-19T15:01:14Z", "message": "fix(product-boot): Fixing bug introduced by sonar refactor."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c699a68233ce114be7be659e18897f33d3942e35", "author": {"user": {"login": "JakeMathews", "name": "Jake Mathews"}}, "url": "https://github.com/blackducksoftware/synopsys-detect/commit/c699a68233ce114be7be659e18897f33d3942e35", "committedDate": "2020-06-19T15:10:33Z", "message": "Merge branch 'master' into cognitive-complexity\n\n# Conflicts:\n#\tsrc/main/java/com/synopsys/integration/detect/lifecycle/run/RunManager.java\n#\tsrc/main/java/com/synopsys/integration/detect/tool/signaturescanner/BlackDuckSignatureScanner.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "49dc94ceb364912c83d0de18be0cbffdce756b98", "author": {"user": {"login": "JakeMathews", "name": "Jake Mathews"}}, "url": "https://github.com/blackducksoftware/synopsys-detect/commit/49dc94ceb364912c83d0de18be0cbffdce756b98", "committedDate": "2020-06-19T16:07:03Z", "message": "fix(sonar): Fixing compilation errors introduced by sonar refactor."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "88fc62a3916a13945fe98d48e3d450472e3baa66", "author": {"user": {"login": "JakeMathews", "name": "Jake Mathews"}}, "url": "https://github.com/blackducksoftware/synopsys-detect/commit/88fc62a3916a13945fe98d48e3d450472e3baa66", "committedDate": "2020-06-19T18:42:39Z", "message": "refactor(sonar): Reduced cognitive complexity by moving logic chunks into methods and utilizing Streams."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "086d57688ca5e21bc396789bf577e18e222153eb", "author": {"user": {"login": "JakeMathews", "name": "Jake Mathews"}}, "url": "https://github.com/blackducksoftware/synopsys-detect/commit/086d57688ca5e21bc396789bf577e18e222153eb", "committedDate": "2020-06-19T18:51:48Z", "message": "refactor(sonar): Moved event publishing."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5cff6fa85e9cea08f3ed11301e5072ca63816b9a", "author": {"user": {"login": "JakeMathews", "name": "Jake Mathews"}}, "url": "https://github.com/blackducksoftware/synopsys-detect/commit/5cff6fa85e9cea08f3ed11301e5072ca63816b9a", "committedDate": "2020-06-19T18:59:51Z", "message": "refactor(sonar): Simplified BlackDuckSignatureScanner::reportErrors."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b2383426e1987c2a897fc91f57c01d95142b0371", "author": {"user": {"login": "JakeMathews", "name": "Jake Mathews"}}, "url": "https://github.com/blackducksoftware/synopsys-detect/commit/b2383426e1987c2a897fc91f57c01d95142b0371", "committedDate": "2020-06-19T19:09:44Z", "message": "refactor(sonar): Simplified Stream in NpmCliParser."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM1OTM3NDEy", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/196#pullrequestreview-435937412", "createdAt": "2020-06-23T16:08:48Z", "commit": {"oid": "b2383426e1987c2a897fc91f57c01d95142b0371"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxNjowODo0OFrOGnwb9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxNjowODo0OFrOGnwb9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDM0MTIzOA==", "bodyText": "did these changes for runBlackDuckProduct reduce the complexity enough?", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/196#discussion_r444341238", "createdAt": "2020-06-23T16:08:48Z", "author": {"login": "crowleySynopsys"}, "path": "src/main/java/com/synopsys/integration/detect/lifecycle/run/RunManager.java", "diffHunk": "@@ -401,17 +414,17 @@ private void runBlackDuckProduct(final ProductRunData productRunData, final Dete\n         logger.info(ReportConstants.RUN_SEPARATOR);\n         if (null != blackDuckServicesFactory) {\n             logger.info(\"Will perform Black Duck post actions.\");\n-            final BlackDuckPostOptions blackDuckPostOptions = detectConfigurationFactory.createBlackDuckPostOptions();\n-            final BlackDuckPostActions blackDuckPostActions = new BlackDuckPostActions(blackDuckServicesFactory, eventSystem);\n+            BlackDuckPostOptions blackDuckPostOptions = detectConfigurationFactory.createBlackDuckPostOptions();\n+            BlackDuckPostActions blackDuckPostActions = new BlackDuckPostActions(blackDuckServicesFactory, eventSystem);\n             blackDuckPostActions.perform(blackDuckPostOptions, codeLocationWaitController, projectVersionWrapper, detectConfigurationFactory.findTimeoutInSeconds());\n \n-            if ((bdioResult.getUploadTargets().size() > 0 || detectToolFilter.shouldInclude(DetectTool.SIGNATURE_SCAN))) {\n-                final Optional<String> componentsLink = Optional.ofNullable(projectVersionWrapper)\n-                                                            .map(ProjectVersionWrapper::getProjectVersionView)\n-                                                            .flatMap(projectVersionView -> projectVersionView.getFirstLink(ProjectVersionView.COMPONENTS_LINK));\n+            if ((!bdioResult.getUploadTargets().isEmpty() || detectToolFilter.shouldInclude(DetectTool.SIGNATURE_SCAN))) {\n+                Optional<String> componentsLink = Optional.ofNullable(projectVersionWrapper)\n+                                                      .map(ProjectVersionWrapper::getProjectVersionView)\n+                                                      .flatMap(projectVersionView -> projectVersionView.getFirstLink(ProjectVersionView.COMPONENTS_LINK));\n \n                 if (componentsLink.isPresent()) {\n-                    final DetectResult detectResult = new BlackDuckBomDetectResult(componentsLink.get());\n+                    DetectResult detectResult = new BlackDuckBomDetectResult(componentsLink.get());\n                     eventSystem.publishEvent(Event.ResultProduced, detectResult);\n                 }\n             }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b2383426e1987c2a897fc91f57c01d95142b0371"}, "originalPosition": 349}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM1OTM3NTY2", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/196#pullrequestreview-435937566", "createdAt": "2020-06-23T16:08:59Z", "commit": {"oid": "b2383426e1987c2a897fc91f57c01d95142b0371"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3336, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}