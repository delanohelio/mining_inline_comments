{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM1NDA3MzU2", "number": 192, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQyMDo1OToxMFrOEGG01Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QyMTo0NTowNFrOEGhy4w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0ODM4NzQxOnYy", "diffSide": "RIGHT", "path": "docs/templates/content/advanced/troubleshooting/general-troubleshooting.ftl", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQyMDo1OToxMFrOGks86g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQyMTowODo1NVrOGktP0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTEzODQxMA==", "bodyText": "prepending each of these three items with \"\u00a0\u00a0\u00a0\u00a0* \" (4 spaces, a *, then another space) would produce a nested bulleted list (but you probably need to do it outside IntelliJ since it likes to remove the leading spaces.", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/192#discussion_r441138410", "createdAt": "2020-06-16T20:59:10Z", "author": {"login": "stevebillings"}, "path": "docs/templates/content/advanced/troubleshooting/general-troubleshooting.ftl", "diffHunk": "@@ -20,23 +20,35 @@ ${solution_name}'s diagnostic mode automatically enabled debug logging (where po\n \n Diagnostic mode options are:\n \n--d: When enabled, diagnostic mode collects all files generated by ${solution_name} and zips the files using a unique run ID. It includes logs, BDIO files, extraction files, and reports.\n+-d --diagnostic: When enabled, diagnostic mode collects all files generated by ${solution_name} and zips the files using a unique run ID. It includes logs, BDIO files, extraction files, and reports.\n+\n -de --diagnosticExtended: When diagnosticExtended is enabled, ${solution_name} collects relevant files such as lock files and build artifacts.\n+\n+${solution_name} also has the ability to enable diagnostic modes through [normal properties](../../../properties/configuration/debug/#diagnostic-mode).\n+\n The zip file is created inside the ${solution_name} output directory, and must be provided when support issues are opened.\n \n Synopsys does not recommend keeping this option on, as it does not clean up the zip file(s); regardless of the ${solution_name} cleanup flag.\n \n Diagnostic mode:\n \n * Sets the output log level to DEBUG.\n+\n * Zips the entire run directory of ${solution_name} which includes:\n+\n * All BDIO files created by ${solution_name}.\n+\n * Any intermediary files generated by ${solution_name}, such as Gradle inspector output files.\n+\n * Includes any additional reports ${solution_name} might make such as dependency counts.\n+\n * Additionally -de or -diagnosticExtended includes additional relevant files such as:\n-* Npm package locks.\n-* vendor.config.\n-* C/C++ compilation database.\n+\n+Npm package locks.\n+\n+vendor.config.\n+\n+C/C++ compilation database.\n ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67e56e85955468d69f38204a716a218ddf850779"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTE0MzI0OQ==", "bodyText": "I'll give it a shot!", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/192#discussion_r441143249", "createdAt": "2020-06-16T21:08:55Z", "author": {"login": "JakeMathews"}, "path": "docs/templates/content/advanced/troubleshooting/general-troubleshooting.ftl", "diffHunk": "@@ -20,23 +20,35 @@ ${solution_name}'s diagnostic mode automatically enabled debug logging (where po\n \n Diagnostic mode options are:\n \n--d: When enabled, diagnostic mode collects all files generated by ${solution_name} and zips the files using a unique run ID. It includes logs, BDIO files, extraction files, and reports.\n+-d --diagnostic: When enabled, diagnostic mode collects all files generated by ${solution_name} and zips the files using a unique run ID. It includes logs, BDIO files, extraction files, and reports.\n+\n -de --diagnosticExtended: When diagnosticExtended is enabled, ${solution_name} collects relevant files such as lock files and build artifacts.\n+\n+${solution_name} also has the ability to enable diagnostic modes through [normal properties](../../../properties/configuration/debug/#diagnostic-mode).\n+\n The zip file is created inside the ${solution_name} output directory, and must be provided when support issues are opened.\n \n Synopsys does not recommend keeping this option on, as it does not clean up the zip file(s); regardless of the ${solution_name} cleanup flag.\n \n Diagnostic mode:\n \n * Sets the output log level to DEBUG.\n+\n * Zips the entire run directory of ${solution_name} which includes:\n+\n * All BDIO files created by ${solution_name}.\n+\n * Any intermediary files generated by ${solution_name}, such as Gradle inspector output files.\n+\n * Includes any additional reports ${solution_name} might make such as dependency counts.\n+\n * Additionally -de or -diagnosticExtended includes additional relevant files such as:\n-* Npm package locks.\n-* vendor.config.\n-* C/C++ compilation database.\n+\n+Npm package locks.\n+\n+vendor.config.\n+\n+C/C++ compilation database.\n ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTEzODQxMA=="}, "originalCommit": {"oid": "67e56e85955468d69f38204a716a218ddf850779"}, "originalPosition": 37}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1MjgwMzAxOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/synopsys/integration/detect/lifecycle/boot/DetectBoot.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QyMTo0Mzo0NlrOGlYeDA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QyMTo0Mzo0NlrOGlYeDA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg1MTQwNA==", "bodyText": "If this is all the method does, why even have this in a method?", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/192#discussion_r441851404", "createdAt": "2020-06-17T21:43:46Z", "author": {"login": "taikuukaits"}, "path": "src/main/java/com/synopsys/integration/detect/lifecycle/boot/DetectBoot.java", "diffHunk": "@@ -387,15 +391,14 @@ private DetectArgumentState parseDetectArgumentState(String[] sourceArgs) {\n         return detectArgumentState;\n     }\n \n-    private Optional<DiagnosticSystem> createDiagnostics(\n-        PropertyConfiguration propertyConfiguration, DetectRun detectRun, DetectInfo detectInfo, DetectArgumentState detectArgumentState, EventSystem eventSystem, DirectoryManager directoryManager) {\n-        if (detectArgumentState.isDiagnostic() || detectArgumentState.isDiagnosticExtended()) {\n-            boolean extendedMode = detectArgumentState.isDiagnosticExtended();\n-            DiagnosticSystem diagnosticSystem = new DiagnosticSystem(extendedMode, propertyConfiguration, detectRun, detectInfo, directoryManager, eventSystem);\n-            return Optional.of(diagnosticSystem);\n-        } else {\n-            return Optional.empty();\n+    private Optional<DiagnosticSystem> createDiagnostics(PropertyConfiguration propertyConfiguration, DetectRun detectRun, DetectInfo detectInfo, DiagnosticsDecider diagnosticsDecider, EventSystem eventSystem,\n+        DirectoryManager directoryManager) {\n+        DiagnosticSystem diagnosticSystem = null;\n+        if (diagnosticsDecider.isConfiguredForDiagnostic()) {\n+            diagnosticSystem = new DiagnosticSystem(diagnosticsDecider.isDiagnosticExtended(), propertyConfiguration, detectRun, detectInfo, directoryManager, eventSystem);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67e56e85955468d69f38204a716a218ddf850779"}, "originalPosition": 43}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1MjgwNjExOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/synopsys/integration/detect/workflow/diagnostic/DiagnosticsDecider.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QyMTo0NTowNFrOGlYgBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQxOToxNTo0NFrOGnNsjA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg1MTkxMQ==", "bodyText": "Did you consider having a single method that returned a result object?", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/192#discussion_r441851911", "createdAt": "2020-06-17T21:45:04Z", "author": {"login": "taikuukaits"}, "path": "src/main/java/com/synopsys/integration/detect/workflow/diagnostic/DiagnosticsDecider.java", "diffHunk": "@@ -0,0 +1,49 @@\n+/**\n+ * synopsys-detect\n+ *\n+ * Copyright (c) 2020 Synopsys, Inc.\n+ *\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package com.synopsys.integration.detect.workflow.diagnostic;\n+\n+import com.synopsys.integration.configuration.config.PropertyConfiguration;\n+import com.synopsys.integration.detect.configuration.DetectProperties;\n+import com.synopsys.integration.detect.help.DetectArgumentState;\n+\n+public class DiagnosticsDecider {\n+    private final DetectArgumentState detectArgumentState;\n+    private final PropertyConfiguration propertyConfiguration;\n+\n+    public DiagnosticsDecider(DetectArgumentState detectArgumentState, PropertyConfiguration propertyConfiguration) {\n+        this.detectArgumentState = detectArgumentState;\n+        this.propertyConfiguration = propertyConfiguration;\n+    }\n+\n+    public boolean isDiagnostic() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67e56e85955468d69f38204a716a218ddf850779"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzc3MjA0NA==", "bodyText": "I've made DiagnosticsDecider return a DiagnosticsDecision.", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/192#discussion_r443772044", "createdAt": "2020-06-22T19:15:44Z", "author": {"login": "JakeMathews"}, "path": "src/main/java/com/synopsys/integration/detect/workflow/diagnostic/DiagnosticsDecider.java", "diffHunk": "@@ -0,0 +1,49 @@\n+/**\n+ * synopsys-detect\n+ *\n+ * Copyright (c) 2020 Synopsys, Inc.\n+ *\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package com.synopsys.integration.detect.workflow.diagnostic;\n+\n+import com.synopsys.integration.configuration.config.PropertyConfiguration;\n+import com.synopsys.integration.detect.configuration.DetectProperties;\n+import com.synopsys.integration.detect.help.DetectArgumentState;\n+\n+public class DiagnosticsDecider {\n+    private final DetectArgumentState detectArgumentState;\n+    private final PropertyConfiguration propertyConfiguration;\n+\n+    public DiagnosticsDecider(DetectArgumentState detectArgumentState, PropertyConfiguration propertyConfiguration) {\n+        this.detectArgumentState = detectArgumentState;\n+        this.propertyConfiguration = propertyConfiguration;\n+    }\n+\n+    public boolean isDiagnostic() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg1MTkxMQ=="}, "originalCommit": {"oid": "67e56e85955468d69f38204a716a218ddf850779"}, "originalPosition": 38}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1623, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}