{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAwMjEyNDgz", "number": 238, "title": "Reduce Congnitive Complexity in Interactive Mode", "bodyText": "InteractiveMode previously was made up of interaction helper methods, property helper methods, and a decision tree method, left abstract for implementers like DefaultInteractiveMode.\nI've refactored InteractiveMode into \"Interactions\"-- leaving the helper methods and logic largely where they were, but abstracting the decision tree method into a decision tree object and several branch objects to break up the cognitive complexity.\nInteractions and InteractiveModeDecisionTree are both created by InteractiveManager, and Interactions is passed into InteractiveModeDecisionTree, which instantiates its branches and passes Interactions along as necessary. All property state is kept in Interactions, and at the end of the InteractiveModeDecisionTree, we use the stored properties to create the final PropertySource.\nAlso this PR removes OperatingSystemType, since that class is available via Integration-Common", "createdAt": "2020-10-08T21:57:18Z", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/238", "merged": true, "mergeCommit": {"oid": "9bdaaf0d1902772174f82fe068573bc697e7175c"}, "closed": true, "closedAt": "2020-11-12T14:29:45Z", "author": {"login": "rottebds"}, "timelineItems": {"totalCount": 24, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdOoa5CgH2gAyNTAwMjEyNDgzOjVlMDMyODEzZTgyNWNiNzc2ZWRiZDQxNDE3ODM3MTIwOGI5YjQ1Yjc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdble_uAH2gAyNTAwMjEyNDgzOjQwNDc1MmYzNTMyODllMTRmNGZiOTE1ODEwNjZiNWI2YjJkM2Q1M2M=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5e032813e825cb776edbd414178371208b9b45b7", "author": {"user": {"login": "rottebds", "name": "Richard Otte"}}, "url": "https://github.com/blackducksoftware/synopsys-detect/commit/5e032813e825cb776edbd414178371208b9b45b7", "committedDate": "2020-10-02T16:17:45Z", "message": "refactor: Removing OperatingSystemType from Detect since we can get it from integration-common"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "321573150ef4bf6805ac023af8bcadf02bad658d", "author": {"user": {"login": "rottebds", "name": "Richard Otte"}}, "url": "https://github.com/blackducksoftware/synopsys-detect/commit/321573150ef4bf6805ac023af8bcadf02bad658d", "committedDate": "2020-10-07T21:56:55Z", "message": "refactor: Replace InteractiveMode inheritence with InteractionTree composition to reduce cognitive complexity"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fc6d7c630828214e764ca4995c5d887a990fcb82", "author": {"user": {"login": "rottebds", "name": "Richard Otte"}}, "url": "https://github.com/blackducksoftware/synopsys-detect/commit/fc6d7c630828214e764ca4995c5d887a990fcb82", "committedDate": "2020-10-08T20:16:21Z", "message": "Merge branch 'master' into reduce-cognitive-complexity"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c04548653f6365fe653fd193502623f6a1c0f23a", "author": {"user": {"login": "rottebds", "name": "Richard Otte"}}, "url": "https://github.com/blackducksoftware/synopsys-detect/commit/c04548653f6365fe653fd193502623f6a1c0f23a", "committedDate": "2020-10-08T20:17:57Z", "message": "refactor: Remove ManagerFactory"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "83c08a83a8e816892fe2ca86000b56b96f0c7242", "author": {"user": {"login": "rottebds", "name": "Richard Otte"}}, "url": "https://github.com/blackducksoftware/synopsys-detect/commit/83c08a83a8e816892fe2ca86000b56b96f0c7242", "committedDate": "2020-10-08T21:35:56Z", "message": "refactor: Renaming and repackaging"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8fd2ee0b31750e32f7fb673da8010abbdf4ad05a", "author": {"user": {"login": "rottebds", "name": "Richard Otte"}}, "url": "https://github.com/blackducksoftware/synopsys-detect/commit/8fd2ee0b31750e32f7fb673da8010abbdf4ad05a", "committedDate": "2020-10-08T22:00:02Z", "message": "chore: Updating license header"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "149824e39db6bf94735b7ea63124bed9390a6497", "author": {"user": {"login": "rottebds", "name": "Richard Otte"}}, "url": "https://github.com/blackducksoftware/synopsys-detect/commit/149824e39db6bf94735b7ea63124bed9390a6497", "committedDate": "2020-10-23T17:38:28Z", "message": "Merge branch 'master' into reduce-cognitive-complexity"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e6f7584bf0e4ba0761135ba987c55f73bb065e6b", "author": {"user": {"login": "rottebds", "name": "Richard Otte"}}, "url": "https://github.com/blackducksoftware/synopsys-detect/commit/e6f7584bf0e4ba0761135ba987c55f73bb065e6b", "committedDate": "2020-10-23T17:43:01Z", "message": "Merge branch 'master' into reduce-cognitive-complexity"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1OTEzNDY3", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/238#pullrequestreview-515913467", "createdAt": "2020-10-23T18:32:43Z", "commit": {"oid": "e6f7584bf0e4ba0761135ba987c55f73bb065e6b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1OTY3ODQ5", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/238#pullrequestreview-515967849", "createdAt": "2020-10-23T19:47:55Z", "commit": {"oid": "e6f7584bf0e4ba0761135ba987c55f73bb065e6b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QxOTo0Nzo1NlrOHncUZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QxOTo0Nzo1NlrOHncUZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTEyMDQ4Ng==", "bodyText": "BLACKDUCK_HUB_PASSWORD should be changed, but not relevant to your PR :)", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/238#discussion_r511120486", "createdAt": "2020-10-23T19:47:56Z", "author": {"login": "taikuukaits"}, "path": "src/main/java/com/synopsys/integration/detect/interactive/BlackDuckServerDecisionBranch.java", "diffHunk": "@@ -0,0 +1,69 @@\n+/**\n+ * synopsys-detect\n+ *\n+ * Copyright (c) 2020 Synopsys, Inc.\n+ *\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package com.synopsys.integration.detect.interactive;\n+\n+import com.synopsys.integration.detect.configuration.DetectProperties;\n+\n+public class BlackDuckServerDecisionBranch implements DecisionTree {\n+    public void traverse(Interactions interactions) {\n+        interactions.setPropertyFromQuestion(DetectProperties.BLACKDUCK_URL.getProperty(), \"What is the Black Duck server url?\");\n+\n+        interactions\n+            .println(\"You can now configure Black Duck with either an API token -OR- a username and password. The API token must already exist on the Black Duck server, but it is the preferred approach to configure your connection.\");\n+        Boolean useApiToken = interactions.askYesOrNo(\"Would you like to use an existing API token?\");\n+        if (useApiToken) {\n+            interactions.setPropertyFromQuestion(DetectProperties.BLACKDUCK_API_TOKEN.getProperty(), \"What is the API token?\");\n+        } else {\n+            interactions.setPropertyFromQuestion(DetectProperties.BLACKDUCK_USERNAME.getProperty(), \"What is the username?\");\n+\n+            Boolean setHubPassword = interactions.askYesOrNoWithMessage(\"Would you like to set the password?\",\n+                \"WARNING: If you choose to save the settings, this password will be stored in plain text. You can set this password as an environment variable BLACKDUCK_HUB_PASSWORD.\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e6f7584bf0e4ba0761135ba987c55f73bb065e6b"}, "originalPosition": 40}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1OTY5NTc2", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/238#pullrequestreview-515969576", "createdAt": "2020-10-23T19:50:04Z", "commit": {"oid": "e6f7584bf0e4ba0761135ba987c55f73bb065e6b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f1926ee68620a03d761552b86ee22db98c172fff", "author": {"user": {"login": "rottebds", "name": "Richard Otte"}}, "url": "https://github.com/blackducksoftware/synopsys-detect/commit/f1926ee68620a03d761552b86ee22db98c172fff", "committedDate": "2020-10-27T14:27:50Z", "message": "refactor: Splitting Interactions into a builder and a writer"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e85cc2a08029463783d2499c86590271f1397d83", "author": {"user": {"login": "rottebds", "name": "Richard Otte"}}, "url": "https://github.com/blackducksoftware/synopsys-detect/commit/e85cc2a08029463783d2499c86590271f1397d83", "committedDate": "2020-10-28T17:06:48Z", "message": "Merge branch 'master' into reduce-cognitive-complexity"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5MDAwMjcw", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/238#pullrequestreview-519000270", "createdAt": "2020-10-28T19:09:53Z", "commit": {"oid": "f1926ee68620a03d761552b86ee22db98c172fff"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxOTowOTo1M1rOHp5hIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxOTowOTo1M1rOHp5hIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzY5NjAzNA==", "bodyText": "This also, I assume, has nothing to do with this PR, but instead of \"CLI scan\", I believe we usually use \"signature scan\".", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/238#discussion_r513696034", "createdAt": "2020-10-28T19:09:53Z", "author": {"login": "stevebillings"}, "path": "src/main/java/com/synopsys/integration/detect/interactive/CliDecisionBranch.java", "diffHunk": "@@ -0,0 +1,52 @@\n+/**\n+ * synopsys-detect\n+ *\n+ * Copyright (c) 2020 Synopsys, Inc.\n+ *\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package com.synopsys.integration.detect.interactive;\n+\n+import com.synopsys.integration.detect.configuration.DetectProperties;\n+\n+public class CliDecisionBranch implements DecisionTree {\n+    private final boolean connectedToBlackDuck;\n+\n+    public CliDecisionBranch(boolean connectedToBlackDuck) {\n+        this.connectedToBlackDuck = connectedToBlackDuck;\n+    }\n+\n+    public void traverse(InteractivePropertySourceBuilder propertySourceBuilder, InteractiveWriter writer) {\n+        if (connectedToBlackDuck) {\n+            Boolean upload = writer.askYesOrNo(\"Would you like to upload CLI scan results to the Black Duck server?\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f1926ee68620a03d761552b86ee22db98c172fff"}, "originalPosition": 36}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5MDAxNjIz", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/238#pullrequestreview-519001623", "createdAt": "2020-10-28T19:11:48Z", "commit": {"oid": "f1926ee68620a03d761552b86ee22db98c172fff"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxOToxMTo0OFrOHp5lDQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxOToxMTo0OFrOHp5lDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzY5NzAzNw==", "bodyText": "along the same vein (irrelevant to this PR), since everything is now called a scanner, it would be good to clarify this language at some point (to specify \"signature scanner\").", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/238#discussion_r513697037", "createdAt": "2020-10-28T19:11:48Z", "author": {"login": "stevebillings"}, "path": "src/main/java/com/synopsys/integration/detect/interactive/CliDecisionBranch.java", "diffHunk": "@@ -0,0 +1,52 @@\n+/**\n+ * synopsys-detect\n+ *\n+ * Copyright (c) 2020 Synopsys, Inc.\n+ *\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package com.synopsys.integration.detect.interactive;\n+\n+import com.synopsys.integration.detect.configuration.DetectProperties;\n+\n+public class CliDecisionBranch implements DecisionTree {\n+    private final boolean connectedToBlackDuck;\n+\n+    public CliDecisionBranch(boolean connectedToBlackDuck) {\n+        this.connectedToBlackDuck = connectedToBlackDuck;\n+    }\n+\n+    public void traverse(InteractivePropertySourceBuilder propertySourceBuilder, InteractiveWriter writer) {\n+        if (connectedToBlackDuck) {\n+            Boolean upload = writer.askYesOrNo(\"Would you like to upload CLI scan results to the Black Duck server?\");\n+            if (!upload) {\n+                propertySourceBuilder.setProperty(DetectProperties.DETECT_BLACKDUCK_SIGNATURE_SCANNER_DRY_RUN.getProperty(), \"true\");\n+            }\n+        }\n+\n+        Boolean customScanner = writer.askYesOrNo(\"Would you like to provide a custom scanner?\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f1926ee68620a03d761552b86ee22db98c172fff"}, "originalPosition": 42}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d0374e59bb15b4dab94dfce458ab25e180a8465a", "author": {"user": {"login": "rottebds", "name": "Richard Otte"}}, "url": "https://github.com/blackducksoftware/synopsys-detect/commit/d0374e59bb15b4dab94dfce458ab25e180a8465a", "committedDate": "2020-10-28T21:05:29Z", "message": "fix: Using correct property environment variable names in Interactive Mode"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "635a75250d6e1758654f30715e64398bd3b1d1dd", "author": {"user": {"login": "rottebds", "name": "Richard Otte"}}, "url": "https://github.com/blackducksoftware/synopsys-detect/commit/635a75250d6e1758654f30715e64398bd3b1d1dd", "committedDate": "2020-10-28T21:05:56Z", "message": "test: Adding InteractiveModeDecisionTreeTest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "06f20ef0d16b406f8517263d024d40255501c059", "author": {"user": {"login": "rottebds", "name": "Richard Otte"}}, "url": "https://github.com/blackducksoftware/synopsys-detect/commit/06f20ef0d16b406f8517263d024d40255501c059", "committedDate": "2020-10-30T21:57:00Z", "message": "test: Adding more comprehensive tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f3f9dbad95e63414e2a84771b1535ab084b9c9d", "author": {"user": {"login": "rottebds", "name": "Richard Otte"}}, "url": "https://github.com/blackducksoftware/synopsys-detect/commit/9f3f9dbad95e63414e2a84771b1535ab084b9c9d", "committedDate": "2020-11-02T19:30:45Z", "message": "test: Improving coverage of the unit tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "68fae7286286d60cf2943cd150952ffe7318173f", "author": {"user": {"login": "rottebds", "name": "Richard Otte"}}, "url": "https://github.com/blackducksoftware/synopsys-detect/commit/68fae7286286d60cf2943cd150952ffe7318173f", "committedDate": "2020-11-02T21:58:07Z", "message": "test: Converting to nonparameterized for clarity"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d8b86e2e2d141449b82f9b2d36c21628bb8a71aa", "author": {"user": {"login": "rottebds", "name": "Richard Otte"}}, "url": "https://github.com/blackducksoftware/synopsys-detect/commit/d8b86e2e2d141449b82f9b2d36c21628bb8a71aa", "committedDate": "2020-11-02T21:58:32Z", "message": "Merge branch 'master' into reduce-cognitive-complexity"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a4b698a73147ec8048372673d2d0a83fab9cf4fd", "author": {"user": {"login": "rottebds", "name": "Richard Otte"}}, "url": "https://github.com/blackducksoftware/synopsys-detect/commit/a4b698a73147ec8048372673d2d0a83fab9cf4fd", "committedDate": "2020-11-04T15:00:08Z", "message": "refactor: CLI Scan and 'scanner' changed to signature scan and signature scanner"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2b614cf449d3444f16eb32e697ef0d269b1108b8", "author": {"user": {"login": "rottebds", "name": "Richard Otte"}}, "url": "https://github.com/blackducksoftware/synopsys-detect/commit/2b614cf449d3444f16eb32e697ef0d269b1108b8", "committedDate": "2020-11-11T22:13:14Z", "message": "refactor: Using BlackDuckConnectivityChecker instead of rolling our own logic in Interactive mode"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "404752f353289e14f4fb91581066b5b6b2d3d53c", "author": {"user": {"login": "rottebds", "name": "Richard Otte"}}, "url": "https://github.com/blackducksoftware/synopsys-detect/commit/404752f353289e14f4fb91581066b5b6b2d3d53c", "committedDate": "2020-11-11T22:13:32Z", "message": "Merge branch 'master' into reduce-cognitive-complexity"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3227, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}