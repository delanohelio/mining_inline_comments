{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM0NjY4OTA2", "number": 3374, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQyMjo0MDowOFrOFCobgw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQyMjo0MToxMVrOFCoc7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM4MzAzODc1OnYy", "diffSide": "RIGHT", "path": "artemis-server/src/main/java/org/apache/activemq/artemis/core/server/impl/QueueImpl.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQyMjo0MDowOFrOIB5hnA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQyMzo0MToyMFrOIB7bJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODg2MTk4MA==", "bodyText": "Whats the purpose of this?", "url": "https://github.com/apache/activemq-artemis/pull/3374#discussion_r538861980", "createdAt": "2020-12-08T22:40:08Z", "author": {"login": "michaelandrepearce"}, "path": "artemis-server/src/main/java/org/apache/activemq/artemis/core/server/impl/QueueImpl.java", "diffHunk": "@@ -2140,6 +2140,7 @@ private int iterQueue(final int flushLimit,\n                                       QueueIterateAction messageAction) throws Exception {\n       int count = 0;\n       int txCount = 0;\n+      Integer expectedHits = messageAction.expectedHits();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "825341734a84807634f44c6bd14c40b7379182f2"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODg5MzA5NQ==", "bodyText": "QueueControl.expire with a messageID will only expire a single record, however the iteration will go until the end. it's sort of an optimization.", "url": "https://github.com/apache/activemq-artemis/pull/3374#discussion_r538893095", "createdAt": "2020-12-08T23:41:20Z", "author": {"login": "clebertsuconic"}, "path": "artemis-server/src/main/java/org/apache/activemq/artemis/core/server/impl/QueueImpl.java", "diffHunk": "@@ -2140,6 +2140,7 @@ private int iterQueue(final int flushLimit,\n                                       QueueIterateAction messageAction) throws Exception {\n       int count = 0;\n       int txCount = 0;\n+      Integer expectedHits = messageAction.expectedHits();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODg2MTk4MA=="}, "originalCommit": {"oid": "825341734a84807634f44c6bd14c40b7379182f2"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM4MzA0MjM4OnYy", "diffSide": "RIGHT", "path": "artemis-server/src/main/java/org/apache/activemq/artemis/core/server/Queue.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQyMjo0MToxMVrOIB5jsw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQwMDozNjo0MlrOIB8vhw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODg2MjUxNQ==", "bodyText": "Why default method? Its been implemented in queueimpl", "url": "https://github.com/apache/activemq-artemis/pull/3374#discussion_r538862515", "createdAt": "2020-12-08T22:41:11Z", "author": {"login": "michaelandrepearce"}, "path": "artemis-server/src/main/java/org/apache/activemq/artemis/core/server/Queue.java", "diffHunk": "@@ -361,6 +361,10 @@ int moveReferences(int flushLimit,\n \n    int retryMessages(Filter filter) throws Exception;\n \n+   default int retryMessages(Filter filter, Integer expectedHits) throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "825341734a84807634f44c6bd14c40b7379182f2"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODg5MjgyOQ==", "bodyText": "there are a bunch of Fakes that don't require implementing anything.", "url": "https://github.com/apache/activemq-artemis/pull/3374#discussion_r538892829", "createdAt": "2020-12-08T23:40:37Z", "author": {"login": "clebertsuconic"}, "path": "artemis-server/src/main/java/org/apache/activemq/artemis/core/server/Queue.java", "diffHunk": "@@ -361,6 +361,10 @@ int moveReferences(int flushLimit,\n \n    int retryMessages(Filter filter) throws Exception;\n \n+   default int retryMessages(Filter filter, Integer expectedHits) throws Exception {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODg2MjUxNQ=="}, "originalCommit": {"oid": "825341734a84807634f44c6bd14c40b7379182f2"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODkxNDY5NQ==", "bodyText": "@michaelandrepearce I could go without the default.. but having the default here minimized the number of changes on Fakes.. etc... It was just for simplicity and minimize the number of lines changed.", "url": "https://github.com/apache/activemq-artemis/pull/3374#discussion_r538914695", "createdAt": "2020-12-09T00:36:42Z", "author": {"login": "clebertsuconic"}, "path": "artemis-server/src/main/java/org/apache/activemq/artemis/core/server/Queue.java", "diffHunk": "@@ -361,6 +361,10 @@ int moveReferences(int flushLimit,\n \n    int retryMessages(Filter filter) throws Exception;\n \n+   default int retryMessages(Filter filter, Integer expectedHits) throws Exception {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODg2MjUxNQ=="}, "originalCommit": {"oid": "825341734a84807634f44c6bd14c40b7379182f2"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3935, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}