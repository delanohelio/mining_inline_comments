{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM1NTY3MTE1", "number": 3377, "title": "ARTEMIS-3026 Allow \"re-encode\" of amqp large messages", "bodyText": "notice the quotes on \"re-encode\", as this is just replacing the set of application properties, properties and headers by a new set\nif a flag reEncoded is set to true on AMQPLargeMessage", "createdAt": "2020-12-10T01:09:28Z", "url": "https://github.com/apache/activemq-artemis/pull/3377", "merged": true, "mergeCommit": {"oid": "d1738cd165dacc271cd230c4d2f36cd42981935c"}, "closed": true, "closedAt": "2020-12-10T15:10:40Z", "author": {"login": "clebertsuconic"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdko099ABqjQwOTI2OTgyMjU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdksnXoABqjQwOTMyNjU1MzQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "341c4359ed32b931835b975e3ba0aa1eb39dc2d9", "author": {"user": {"login": "clebertsuconic", "name": null}}, "url": "https://github.com/apache/activemq-artemis/commit/341c4359ed32b931835b975e3ba0aa1eb39dc2d9", "committedDate": "2020-12-10T01:08:16Z", "message": "ARTEMIS-3026 Allow \"re-encode\" of amqp large messages\n\nnotice the quotes on \"re-encode\", as this is just replacing the set of application properties, properties and headers by a new set\nif a flag reEncoded is set to true on AMQPLargeMessage"}, "afterCommit": {"oid": "f8bd6b6c0937fb99cd8d115e5be0fbf5b0d0f87e", "author": {"user": {"login": "clebertsuconic", "name": null}}, "url": "https://github.com/apache/activemq-artemis/commit/f8bd6b6c0937fb99cd8d115e5be0fbf5b0d0f87e", "committedDate": "2020-12-10T01:12:09Z", "message": "ARTEMIS-3026 Allow \"re-encode\" of amqp large messages\n\nnotice the quotes on \"re-encode\", as this is just replacing the set of application properties, properties and headers by a new set\nif a flag reEncoded is set to true on AMQPLargeMessage"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f8bd6b6c0937fb99cd8d115e5be0fbf5b0d0f87e", "author": {"user": {"login": "clebertsuconic", "name": null}}, "url": "https://github.com/apache/activemq-artemis/commit/f8bd6b6c0937fb99cd8d115e5be0fbf5b0d0f87e", "committedDate": "2020-12-10T01:12:09Z", "message": "ARTEMIS-3026 Allow \"re-encode\" of amqp large messages\n\nnotice the quotes on \"re-encode\", as this is just replacing the set of application properties, properties and headers by a new set\nif a flag reEncoded is set to true on AMQPLargeMessage"}, "afterCommit": {"oid": "55bcb63e37c949377bd416d261e10559f2d6236f", "author": {"user": {"login": "clebertsuconic", "name": null}}, "url": "https://github.com/apache/activemq-artemis/commit/55bcb63e37c949377bd416d261e10559f2d6236f", "committedDate": "2020-12-10T01:14:25Z", "message": "ARTEMIS-3026 Allow \"re-encode\" of amqp large messages\n\nnotice the quotes on \"re-encode\", as this is just replacing the set of application properties, properties and headers by a new set\nif a flag reEncoded is set to true on AMQPLargeMessage"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "55bcb63e37c949377bd416d261e10559f2d6236f", "author": {"user": {"login": "clebertsuconic", "name": null}}, "url": "https://github.com/apache/activemq-artemis/commit/55bcb63e37c949377bd416d261e10559f2d6236f", "committedDate": "2020-12-10T01:14:25Z", "message": "ARTEMIS-3026 Allow \"re-encode\" of amqp large messages\n\nnotice the quotes on \"re-encode\", as this is just replacing the set of application properties, properties and headers by a new set\nif a flag reEncoded is set to true on AMQPLargeMessage"}, "afterCommit": {"oid": "c2dde5b4cfa7042ac94f80368bf05d281b46ef9c", "author": {"user": {"login": "clebertsuconic", "name": null}}, "url": "https://github.com/apache/activemq-artemis/commit/c2dde5b4cfa7042ac94f80368bf05d281b46ef9c", "committedDate": "2020-12-10T01:34:58Z", "message": "ARTEMIS-3026 Allow \"re-encode\" of amqp large messages\n\nnotice the quotes on \"re-encode\", as this is just replacing the set of application properties, properties and headers by a new set\nif a flag reEncoded is set to true on AMQPLargeMessage"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c2dde5b4cfa7042ac94f80368bf05d281b46ef9c", "author": {"user": {"login": "clebertsuconic", "name": null}}, "url": "https://github.com/apache/activemq-artemis/commit/c2dde5b4cfa7042ac94f80368bf05d281b46ef9c", "committedDate": "2020-12-10T01:34:58Z", "message": "ARTEMIS-3026 Allow \"re-encode\" of amqp large messages\n\nnotice the quotes on \"re-encode\", as this is just replacing the set of application properties, properties and headers by a new set\nif a flag reEncoded is set to true on AMQPLargeMessage"}, "afterCommit": {"oid": "934339c9b47008b3b637b94f97e1913b362345b5", "author": {"user": {"login": "clebertsuconic", "name": null}}, "url": "https://github.com/apache/activemq-artemis/commit/934339c9b47008b3b637b94f97e1913b362345b5", "committedDate": "2020-12-10T01:40:40Z", "message": "ARTEMIS-3026 Allow \"re-encode\" of amqp large messages\n\nnotice the quotes on \"re-encode\", as this is just replacing the set of application properties, properties and headers by a new set\nif a flag reEncoded is set to true on AMQPLargeMessage"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "934339c9b47008b3b637b94f97e1913b362345b5", "author": {"user": {"login": "clebertsuconic", "name": null}}, "url": "https://github.com/apache/activemq-artemis/commit/934339c9b47008b3b637b94f97e1913b362345b5", "committedDate": "2020-12-10T01:40:40Z", "message": "ARTEMIS-3026 Allow \"re-encode\" of amqp large messages\n\nnotice the quotes on \"re-encode\", as this is just replacing the set of application properties, properties and headers by a new set\nif a flag reEncoded is set to true on AMQPLargeMessage"}, "afterCommit": {"oid": "7e67204d0afd28a0535d294563d18ce3321299d1", "author": {"user": {"login": "clebertsuconic", "name": null}}, "url": "https://github.com/apache/activemq-artemis/commit/7e67204d0afd28a0535d294563d18ce3321299d1", "committedDate": "2020-12-10T01:59:07Z", "message": "ARTEMIS-3026 Allow \"re-encode\" of amqp large messages\n\nnotice the quotes on \"re-encode\", as this is just replacing the set of application properties, properties and headers by a new set\nif a flag reEncoded is set to true on AMQPLargeMessage"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7e67204d0afd28a0535d294563d18ce3321299d1", "author": {"user": {"login": "clebertsuconic", "name": null}}, "url": "https://github.com/apache/activemq-artemis/commit/7e67204d0afd28a0535d294563d18ce3321299d1", "committedDate": "2020-12-10T01:59:07Z", "message": "ARTEMIS-3026 Allow \"re-encode\" of amqp large messages\n\nnotice the quotes on \"re-encode\", as this is just replacing the set of application properties, properties and headers by a new set\nif a flag reEncoded is set to true on AMQPLargeMessage"}, "afterCommit": {"oid": "ffa7f9ff85347105e2737a189b3fc4e50fe7f893", "author": {"user": {"login": "clebertsuconic", "name": null}}, "url": "https://github.com/apache/activemq-artemis/commit/ffa7f9ff85347105e2737a189b3fc4e50fe7f893", "committedDate": "2020-12-10T02:02:09Z", "message": "ARTEMIS-3026 Allow \"re-encode\" of amqp large messages\n\nnotice the quotes on \"re-encode\", as this is just replacing the set of application properties, properties and headers by a new set\nif a flag reEncoded is set to true on AMQPLargeMessage"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4ODIxOTA2", "url": "https://github.com/apache/activemq-artemis/pull/3377#pullrequestreview-548821906", "createdAt": "2020-12-10T05:07:32Z", "commit": {"oid": "ffa7f9ff85347105e2737a189b3fc4e50fe7f893"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwNTowNzozM1rOIC1wQA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwNTowNzozM1rOIC1wQA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTg0ODc2OA==", "bodyText": "Nit. Why is the E capitalised. Reencoded is a single word. https://en.m.wiktionary.org/wiki/reencoded", "url": "https://github.com/apache/activemq-artemis/pull/3377#discussion_r539848768", "createdAt": "2020-12-10T05:07:33Z", "author": {"login": "michaelandrepearce"}, "path": "artemis-protocols/artemis-amqp-protocol/src/main/java/org/apache/activemq/artemis/protocol/amqp/broker/AMQPLargeMessage.java", "diffHunk": "@@ -622,7 +624,15 @@ public long getPersistentSize() throws ActiveMQException {\n \n    @Override\n    public void reencode() {\n+      reEncoded = true;\n+   }\n+\n+   public void setReEncoded(boolean reEncoded) {\n+      this.reEncoded = reEncoded;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ffa7f9ff85347105e2737a189b3fc4e50fe7f893"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4ODI0NTU1", "url": "https://github.com/apache/activemq-artemis/pull/3377#pullrequestreview-548824555", "createdAt": "2020-12-10T05:15:49Z", "commit": {"oid": "ffa7f9ff85347105e2737a189b3fc4e50fe7f893"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwNToxNTo0OVrOIC16ug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwNToxNTo0OVrOIC16ug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTg1MTQ1MA==", "bodyText": "Why isnt the reencoding happening immediately like for other messages (amqp standard, core etc) and expected behaviour, e.g. other areas of code and plugins are expecting the message to rencoded by calling this without doing extra work. I can be missing something.", "url": "https://github.com/apache/activemq-artemis/pull/3377#discussion_r539851450", "createdAt": "2020-12-10T05:15:49Z", "author": {"login": "michaelandrepearce"}, "path": "artemis-protocols/artemis-amqp-protocol/src/main/java/org/apache/activemq/artemis/protocol/amqp/broker/AMQPLargeMessage.java", "diffHunk": "@@ -622,7 +624,15 @@ public long getPersistentSize() throws ActiveMQException {\n \n    @Override\n    public void reencode() {\n+      reEncoded = true;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ffa7f9ff85347105e2737a189b3fc4e50fe7f893"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "94f1857914424638db8b6e49f08f326bd49e6809", "author": {"user": {"login": "clebertsuconic", "name": null}}, "url": "https://github.com/apache/activemq-artemis/commit/94f1857914424638db8b6e49f08f326bd49e6809", "committedDate": "2020-12-10T05:37:11Z", "message": "ARTEMIS-3026 Allow \"re-encode\" of amqp large messages\n\nnotice the quotes on \"re-encode\", as this is just replacing the set of application properties, properties and headers by a new set\nif a flag reEncoded is set to true on AMQPLargeMessage"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ffa7f9ff85347105e2737a189b3fc4e50fe7f893", "author": {"user": {"login": "clebertsuconic", "name": null}}, "url": "https://github.com/apache/activemq-artemis/commit/ffa7f9ff85347105e2737a189b3fc4e50fe7f893", "committedDate": "2020-12-10T02:02:09Z", "message": "ARTEMIS-3026 Allow \"re-encode\" of amqp large messages\n\nnotice the quotes on \"re-encode\", as this is just replacing the set of application properties, properties and headers by a new set\nif a flag reEncoded is set to true on AMQPLargeMessage"}, "afterCommit": {"oid": "94f1857914424638db8b6e49f08f326bd49e6809", "author": {"user": {"login": "clebertsuconic", "name": null}}, "url": "https://github.com/apache/activemq-artemis/commit/94f1857914424638db8b6e49f08f326bd49e6809", "committedDate": "2020-12-10T05:37:11Z", "message": "ARTEMIS-3026 Allow \"re-encode\" of amqp large messages\n\nnotice the quotes on \"re-encode\", as this is just replacing the set of application properties, properties and headers by a new set\nif a flag reEncoded is set to true on AMQPLargeMessage"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1571, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}