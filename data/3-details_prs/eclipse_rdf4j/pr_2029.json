{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkxODcxNjUy", "number": 2029, "title": "GH-1873 fixing incorrect cardinality calculation", "bodyText": "GitHub issue resolved: #1873\n\nreassigned the vars list (list -> set -> list) so that it contains only distinct elements\nadded a new package optimizers under core/sail/federation/src/test/java/org/eclipse/rdf4j/sail/federation as suggested by @hmottestad\nadded tests in a new file, CardinalityTest.java in the package optimizers, also added the header comment in the new file", "createdAt": "2020-03-21T15:17:13Z", "url": "https://github.com/eclipse/rdf4j/pull/2029", "merged": true, "mergeCommit": {"oid": "ef1ab8521ef8b3c35b787740b8b3eaabf3e547e2"}, "closed": true, "closedAt": "2020-03-22T07:09:33Z", "author": {"login": "reeshabhranjan"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcP2hXkAH2gAyMzkxODcxNjUyOjZkZjhjZjE0MDBhYmQ0ZDI1YzdkNjMwMjM2NzM3MDMyZTRjOTgwYzg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcQESaSAFqTM3ODk3NzQ2Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6df8cf1400abd4d25c7d630236737032e4c980c8", "author": {"user": {"login": "reeshabhranjan", "name": "Reeshabh Kumar Ranjan"}}, "url": "https://github.com/eclipse/rdf4j/commit/6df8cf1400abd4d25c7d630236737032e4c980c8", "committedDate": "2020-03-21T15:06:16Z", "message": "#1873 re-assigned the vars list so that it contains distinct elements, added related tests\n\nSigned-off-by: Reeshabh Kumar Ranjan <reeshabhkumarranjan@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ddd4a999ce34deb1819469e19bf9081bb25ee22", "author": {"user": {"login": "reeshabhranjan", "name": "Reeshabh Kumar Ranjan"}}, "url": "https://github.com/eclipse/rdf4j/commit/4ddd4a999ce34deb1819469e19bf9081bb25ee22", "committedDate": "2020-03-21T15:11:58Z", "message": "#1873 added header comment in CardinalityTest.java\n\nSigned-off-by: Reeshabh Kumar Ranjan <reeshabhkumarranjan@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4OTYyMjg2", "url": "https://github.com/eclipse/rdf4j/pull/2029#pullrequestreview-378962286", "createdAt": "2020-03-22T00:27:27Z", "commit": {"oid": "4ddd4a999ce34deb1819469e19bf9081bb25ee22"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMlQwMDoyNzoyOFrOF5seZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMlQwMDozMzozNFrOF5sfqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjA0MTgzMQ==", "bodyText": "Looks as if your editor forgot to replace ${year} with the actual year!", "url": "https://github.com/eclipse/rdf4j/pull/2029#discussion_r396041831", "createdAt": "2020-03-22T00:27:28Z", "author": {"login": "jeenbroekstra"}, "path": "core/sail/federation/src/test/java/org/eclipse/rdf4j/sail/federation/optimizers/CardinalityTest.java", "diffHunk": "@@ -0,0 +1,66 @@\n+/*******************************************************************************\n+ * Copyright (c) ${year} Eclipse RDF4J contributors.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ddd4a999ce34deb1819469e19bf9081bb25ee22"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjA0MjE1Mg==", "bodyText": "I think you can also just do:\nSet<Var> vars = new HashSet<>(pattern.getVarList());\n\nI don't think the rest of the method requires that vars is an ArrayList (or even a list), so no need to create an arraylist back out of the set. Saves having to copy the elements over twice.", "url": "https://github.com/eclipse/rdf4j/pull/2029#discussion_r396042152", "createdAt": "2020-03-22T00:33:34Z", "author": {"login": "jeenbroekstra"}, "path": "core/sail/federation/src/main/java/org/eclipse/rdf4j/sail/federation/optimizers/EvaluationStatistics.java", "diffHunk": "@@ -82,6 +85,8 @@ public void meet(Slice slice) {\n \n \t\tprotected double getCardinality(StatementPattern pattern) {\n \t\t\tList<Var> vars = pattern.getVarList();\n+\t\t\tSet<Var> varSet = new HashSet<Var>(vars);\n+\t\t\tvars = new ArrayList<Var>(varSet);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ddd4a999ce34deb1819469e19bf9081bb25ee22"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "73d4d545c44c114793e32f4a4d03a994c0b67d7c", "author": {"user": {"login": "reeshabhranjan", "name": "Reeshabh Kumar Ranjan"}}, "url": "https://github.com/eclipse/rdf4j/commit/73d4d545c44c114793e32f4a4d03a994c0b67d7c", "committedDate": "2020-03-22T05:40:57Z", "message": "#1873 a set is iterable, so passed the set directly to `countConstantVars()` method, as suggested by @jeenbroekstra; added the actual year in the header comment in CardinalityTest.java\n\nSigned-off-by: Reeshabh Kumar Ranjan <reeshabhkumarranjan@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4OTc3NDYy", "url": "https://github.com/eclipse/rdf4j/pull/2029#pullrequestreview-378977462", "createdAt": "2020-03-22T07:08:36Z", "commit": {"oid": "73d4d545c44c114793e32f4a4d03a994c0b67d7c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 8, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}