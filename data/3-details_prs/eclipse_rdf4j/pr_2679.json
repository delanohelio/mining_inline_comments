{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI4Mzg5Mjg2", "number": 2679, "title": "GH-2675 add new RepositoryConnection.prepare method", "bodyText": "GitHub issue resolved: #2675  \nBriefly describe the changes proposed in this PR:\n\nadded RepositoryConnection.prepare and implementations in core classes\nadded handling over remote protocol\nadded tests, including a SHACL-specific use case test\n\n\nPR Author Checklist (see the contributor guidelines for more details):\n\n my pull request is self-contained\n I've added tests for the changes I made\n I've applied code formatting (you can use mvn process-resources to format from the command line)\n I've squashed my commits down to one or a few meaningful commits\n every commit message starts with the issue number (GH-xxxx) followed by a meaningful description of the change\n every commit has been signed off", "createdAt": "2020-11-27T04:39:58Z", "url": "https://github.com/eclipse/rdf4j/pull/2679", "merged": true, "mergeCommit": {"oid": "adca251f9062830e5c1f51b30c4b5ef5f052a19e"}, "closed": true, "closedAt": "2020-12-01T05:44:49Z", "author": {"login": "jeenbroekstra"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdg1bbEAH2gAyNTI4Mzg5Mjg2OmI0ZTljYTI4ZGFlNTBkMDBjZTUyZGU0YmVlM2Y1ZGYwOWQ3YTFkZmM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdhHM29gH2gAyNTI4Mzg5Mjg2OjE4MWZiMmIzYTViNDBjMmZkZGNmYmRkZjgwMTZlZTM1YjIzYTRlODI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b4e9ca28dae50d00ce52de4bee3f5df09d7a1dfc", "author": {"user": {"login": "jeenbroekstra", "name": "Jeen Broekstra"}}, "url": "https://github.com/eclipse/rdf4j/commit/b4e9ca28dae50d00ce52de4bee3f5df09d7a1dfc", "committedDate": "2020-11-28T05:37:44Z", "message": "GH-2675 add new RepositoryConnection.prepare method"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f76afe191687d9b2d0fd1b6e7558bbe9ace81801", "author": {"user": {"login": "jeenbroekstra", "name": "Jeen Broekstra"}}, "url": "https://github.com/eclipse/rdf4j/commit/f76afe191687d9b2d0fd1b6e7558bbe9ace81801", "committedDate": "2020-11-27T04:37:13Z", "message": "GH-2675 add new RepositoryConnection.prepare method"}, "afterCommit": {"oid": "b4e9ca28dae50d00ce52de4bee3f5df09d7a1dfc", "author": {"user": {"login": "jeenbroekstra", "name": "Jeen Broekstra"}}, "url": "https://github.com/eclipse/rdf4j/commit/b4e9ca28dae50d00ce52de4bee3f5df09d7a1dfc", "committedDate": "2020-11-28T05:37:44Z", "message": "GH-2675 add new RepositoryConnection.prepare method"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQwMzU0MTMw", "url": "https://github.com/eclipse/rdf4j/pull/2679#pullrequestreview-540354130", "createdAt": "2020-11-28T09:18:08Z", "commit": {"oid": "b4e9ca28dae50d00ce52de4bee3f5df09d7a1dfc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yOFQwOToxODowOFrOH7XR2A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yOFQwOToxODowOFrOH7XR2A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjAwOTQzMg==", "bodyText": "Could you log an error message here?", "url": "https://github.com/eclipse/rdf4j/pull/2679#discussion_r532009432", "createdAt": "2020-11-28T09:18:08Z", "author": {"login": "hmottestad"}, "path": "core/repository/http/src/main/java/org/eclipse/rdf4j/repository/http/HTTPRepositoryConnection.java", "diffHunk": "@@ -294,6 +294,23 @@ public long size(Resource... contexts) throws RepositoryException {\n \t\t}\n \t}\n \n+\t@Override\n+\tpublic void prepare() throws RepositoryException {\n+\t\tif (this.getRepository().getServerProtocolVersion() < 12) {\n+\t\t\t// Action.PREPARE is not supported in Servers using protocols older than version 12.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4e9ca28dae50d00ce52de4bee3f5df09d7a1dfc"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQwMzU0MTg5", "url": "https://github.com/eclipse/rdf4j/pull/2679#pullrequestreview-540354189", "createdAt": "2020-11-28T09:19:28Z", "commit": {"oid": "b4e9ca28dae50d00ce52de4bee3f5df09d7a1dfc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yOFQwOToxOToyOVrOH7XSNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yOFQwOToxOToyOVrOH7XSNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjAwOTUyNw==", "bodyText": "I would prefer an unsupported operation exception, so users don\u2019t spend time trying to figure out why prepare isn\u2019t doing anything.", "url": "https://github.com/eclipse/rdf4j/pull/2679#discussion_r532009527", "createdAt": "2020-11-28T09:19:29Z", "author": {"login": "hmottestad"}, "path": "core/repository/sparql/src/main/java/org/eclipse/rdf4j/repository/sparql/SPARQLConnection.java", "diffHunk": "@@ -405,6 +404,11 @@ public TupleQuery prepareTupleQuery(QueryLanguage ql, String query, String base)\n \t\tthrow new UnsupportedQueryLanguageException(\"Unsupported query language \" + ql);\n \t}\n \n+\t@Override\n+\tpublic void prepare() throws RepositoryException {\n+\t\t// no-op, not supported in SPARQL protocol", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4e9ca28dae50d00ce52de4bee3f5df09d7a1dfc"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "181fb2b3a5b40c2fddcfbddf8016ee35b23a4e82", "author": {"user": {"login": "jeenbroekstra", "name": "Jeen Broekstra"}}, "url": "https://github.com/eclipse/rdf4j/commit/181fb2b3a5b40c2fddcfbddf8016ee35b23a4e82", "committedDate": "2020-11-29T02:20:07Z", "message": "GH-2675 throw UnsupportedOperationException and/or log warning"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 83, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}