{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgwOTUwMDU5", "number": 1950, "title": "GH-1484: Compatibility serialization for RDF* in RDF and RDF* serialization for tuple query results", "bodyText": "This introduces:\n\nCompatibility serialization of RDF* triples in formats (both RDF and query results) that don't support RDF*.\n\nThe triples are serialized as special IRIs starting with urn:rdf4j:triple: followed by the base64-encoded (the URL-safe variant) of the N-Triples serialization of the triple. This is controlled by a boolean writer setting and it is ON by default. The setting is ignored by writers that support RDF* natively.\nSuch special IRIs are converted back to triples on parsing. This is controlled by a boolean parser setting and it is ON by default. It is respected by all parsers including those with native RDF* support.\n\n\nRDF* support for tuple query results\n\nBinary query results supports it out of the box without introducing a new format, much like the binary RDF format.\nIntroduced SPARQL* JSON format based on SPARQL JSON (see SPARQLStarResultsJSONConstants for example of triple serialization).\nIntroduced SPARQL* TSV format based on SPARQL TSV. Triples are serialized in their N-Triples form (much like all other values in TSV).\n\n\n\nOther changes:\n\nAdded another MIME type for Turtle* to better reflect its Turtle origin\nParser/writer (both RDF and query result) cleanup and contract enforcement, improved tests\n\nAbstractRDFWriter defines a new abstract protected method handleStatementImpl that implementing classes must override instead of handleStatement.\nThe sequence startRDF() ... handleXXX() ... endRDF() is now enforced strictly (there were some cases where handleXXX() was called before startRDF().\nAbstractQueryResultWriter defines a new abstract protected method handleSolutionImpl that implementing classes must override instead of handleSolution.\n\n\nNTriplesUtil moved outside NTriples module (similar to some other NTriples related classes used in multiple places)", "createdAt": "2020-02-27T16:34:13Z", "url": "https://github.com/eclipse/rdf4j/pull/1950", "merged": true, "mergeCommit": {"oid": "37c98f04aeb9f157effb8facd95b9b0ddea1ab64"}, "closed": true, "closedAt": "2020-03-06T04:38:45Z", "author": {"login": "avataar"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcJn1bDgFqTM2Njk3Mjc3Ng==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcK4jNaAFqTM3MDA3ODMxMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2OTcyNzc2", "url": "https://github.com/eclipse/rdf4j/pull/1950#pullrequestreview-366972776", "createdAt": "2020-03-02T06:31:08Z", "commit": {"oid": "ef15be8529ce330d98d3296b91e653e341ca708e"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQwNjozMTowOFrOFwUwKw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQwNjozMzozN1rOFwUybw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjIxNTk3OQ==", "bodyText": "Could we add the functionality to the existing sparql-json module, instead of introducing a new module? Same for the text one.", "url": "https://github.com/eclipse/rdf4j/pull/1950#discussion_r386215979", "createdAt": "2020-03-02T06:31:08Z", "author": {"login": "jeenbroekstra"}, "path": "bom/pom.xml", "diffHunk": "@@ -83,6 +83,11 @@\n \t\t\t\t<artifactId>rdf4j-queryresultio-sparqljson</artifactId>\n \t\t\t\t<version>${project.version}</version>\n \t\t\t</dependency>\n+\t\t\t<dependency>\n+\t\t\t\t<groupId>org.eclipse.rdf4j</groupId>\n+\t\t\t\t<artifactId>rdf4j-queryresultio-sparqlstarjson</artifactId>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ef15be8529ce330d98d3296b91e653e341ca708e"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjIxNjU1OQ==", "bodyText": "Clever.", "url": "https://github.com/eclipse/rdf4j/pull/1950#discussion_r386216559", "createdAt": "2020-03-02T06:33:37Z", "author": {"login": "jeenbroekstra"}, "path": "core/queryresultio/api/src/main/java/org/eclipse/rdf4j/query/resultio/ValueMappingBindingSet.java", "diffHunk": "@@ -0,0 +1,93 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 Eclipse RDF4J contributors.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Distribution License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/org/documents/edl-v10.php.\n+ *******************************************************************************/\n+package org.eclipse.rdf4j.query.resultio;\n+\n+import org.eclipse.rdf4j.model.Value;\n+import org.eclipse.rdf4j.query.AbstractBindingSet;\n+import org.eclipse.rdf4j.query.Binding;\n+import org.eclipse.rdf4j.query.BindingSet;\n+\n+import java.util.Iterator;\n+import java.util.Set;\n+import java.util.function.Function;\n+\n+/**\n+ * A {@link BindingSet} that provides a mechanism to map values by using a custom {@link Function}.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ef15be8529ce330d98d3296b91e653e341ca708e"}, "originalPosition": 20}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ef15be8529ce330d98d3296b91e653e341ca708e", "author": {"user": null}, "url": "https://github.com/eclipse/rdf4j/commit/ef15be8529ce330d98d3296b91e653e341ca708e", "committedDate": "2020-02-27T16:12:36Z", "message": "GH-1484: RDF* serialization for Binary query results (extended existing format) and two new formats, SPARQL* JSON and SPARQL* TSV\n\nGH-1484: RDF* compatibility serialization (as IRIs) for all RDF formats\n\nGH-1484: Added another MIME type for Turtle* to better reflect its Turtle origin\n\nGH-1484: Parser/writer (both RDF and query result) cleanup and contract enforcement, improved tests\n\nGH-1484: NTriplesUtil moved outside NTriples module (similar to some other NTriples related classes used in multiple places)\nSigned-off-by: Pavel Mihaylov <pavel@ontotext.com>"}, "afterCommit": {"oid": "8afede47bec2b1b39d260b9753190aaaf2292be0", "author": {"user": null}, "url": "https://github.com/eclipse/rdf4j/commit/8afede47bec2b1b39d260b9753190aaaf2292be0", "committedDate": "2020-03-04T13:04:44Z", "message": "GH-1484: RDF* serialization for Binary query results (extended existing format) and two new formats, SPARQL* JSON and SPARQL* TSV\n\nGH-1484: RDF* compatibility serialization (as IRIs) for all RDF formats\n\nGH-1484: Added another MIME type for Turtle* to better reflect its Turtle origin\n\nGH-1484: Parser/writer (both RDF and query result) cleanup and contract enforcement, improved tests\n\nGH-1484: NTriplesUtil moved outside NTriples module (similar to some other NTriples related classes used in multiple places)\nSigned-off-by: Pavel Mihaylov <pavel@ontotext.com>\n\nGH-1484: Moved Turtle* and TriG* to Turtle and TriG modules instead of separate modules\n\nSigned-off-by: Pavel Mihaylov <pavel@ontotext.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "25e9d05307483f7e0c7b2aeb64b03539eee82a08", "author": {"user": null}, "url": "https://github.com/eclipse/rdf4j/commit/25e9d05307483f7e0c7b2aeb64b03539eee82a08", "committedDate": "2020-03-04T13:36:40Z", "message": "GH-1484: RDF* serialization for Binary query results (extended existing format) and two new formats, SPARQL* JSON and SPARQL* TSV\n\nGH-1484: RDF* compatibility serialization (as IRIs) for all RDF formats\n\nGH-1484: Added another MIME type for Turtle* to better reflect its Turtle origin\n\nGH-1484: Parser/writer (both RDF and query result) cleanup and contract enforcement, improved tests\n\nGH-1484: NTriplesUtil moved outside NTriples module (similar to some other NTriples related classes used in multiple places)\nSigned-off-by: Pavel Mihaylov <pavel@ontotext.com>\n\nGH-1484: Moved Turtle* and TriG* to Turtle and TriG modules instead of separate modules\n\nGH-1484: Compare Triple in ValueComparator\n\nSigned-off-by: Pavel Mihaylov <pavel@ontotext.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f4c201a9eba9ca138982b9a33039d31e8660ca90", "author": {"user": null}, "url": "https://github.com/eclipse/rdf4j/commit/f4c201a9eba9ca138982b9a33039d31e8660ca90", "committedDate": "2020-03-04T13:36:17Z", "message": "GH-1484: Compare Triple in ValueComparator\n\nSigned-off-by: Pavel Mihaylov <pavel@ontotext.com>"}, "afterCommit": {"oid": "25e9d05307483f7e0c7b2aeb64b03539eee82a08", "author": {"user": null}, "url": "https://github.com/eclipse/rdf4j/commit/25e9d05307483f7e0c7b2aeb64b03539eee82a08", "committedDate": "2020-03-04T13:36:40Z", "message": "GH-1484: RDF* serialization for Binary query results (extended existing format) and two new formats, SPARQL* JSON and SPARQL* TSV\n\nGH-1484: RDF* compatibility serialization (as IRIs) for all RDF formats\n\nGH-1484: Added another MIME type for Turtle* to better reflect its Turtle origin\n\nGH-1484: Parser/writer (both RDF and query result) cleanup and contract enforcement, improved tests\n\nGH-1484: NTriplesUtil moved outside NTriples module (similar to some other NTriples related classes used in multiple places)\nSigned-off-by: Pavel Mihaylov <pavel@ontotext.com>\n\nGH-1484: Moved Turtle* and TriG* to Turtle and TriG modules instead of separate modules\n\nGH-1484: Compare Triple in ValueComparator\n\nSigned-off-by: Pavel Mihaylov <pavel@ontotext.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwMDc4MzEy", "url": "https://github.com/eclipse/rdf4j/pull/1950#pullrequestreview-370078312", "createdAt": "2020-03-06T04:38:29Z", "commit": {"oid": "25e9d05307483f7e0c7b2aeb64b03539eee82a08"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 71, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}