{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ4NDgzMjE1", "number": 2358, "title": "GH-2357 Add NTripletsParser comment lines handling", "bodyText": "Signed-off-by: Elad Shaked elad.shaked@sparkbeyond.com\nGitHub issue resolved: #2357\nIn NTriplesParser, lines starting with a hash tag ('#') are send to rdfHander.handleComment rather than being ignored\n\nPR Author Checklist (see the contributor guidelines for more details):\n\n my pull request is self-contained\n I've added tests for the changes I made\n I've applied code formatting (you can use mvn process-resources to format from the command line)\n every commit message starts with the issue number (GH-xxxx) followed by a meaningful description of the change\n every commit has been signed off\n\nNote: we merge all feature pull requests using squash and merge. See RDF4J git merge strategy for more details.", "createdAt": "2020-07-13T20:51:49Z", "url": "https://github.com/eclipse/rdf4j/pull/2358", "merged": true, "mergeCommit": {"oid": "ab860f2f2c425dabb5492eb7d40b5968e474df38"}, "closed": true, "closedAt": "2020-07-14T09:29:08Z", "author": {"login": "elad-shaked"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc0nxYpgH2gAyNDQ4NDgzMjE1OjgxNmU2OWVlY2JlYzExYjcwNGE3YThjNGI0NDU5YzEwZTlkMjBjOTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc0ynO5gFqTQ0Nzk0MTY5Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "816e69eecbec11b704a7a8c4b4459c10e9d20c91", "author": {"user": {"login": "elad-shaked", "name": null}}, "url": "https://github.com/eclipse/rdf4j/commit/816e69eecbec11b704a7a8c4b4459c10e9d20c91", "committedDate": "2020-07-13T20:50:23Z", "message": "GH-2357 Add NTripletsParser comment lines handling\n\nSigned-off-by: Elad Shaked <elad.shaked@sparkbeyond.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3Njk4OTc0", "url": "https://github.com/eclipse/rdf4j/pull/2358#pullrequestreview-447698974", "createdAt": "2020-07-14T00:16:41Z", "commit": {"oid": "816e69eecbec11b704a7a8c4b4459c10e9d20c91"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQwMDoxNjo0MlrOGw_R4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQwMDoxNjo0MlrOGw_R4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDAyMTYwMQ==", "bodyText": "rdfHandler may be null (e.g. when the parser is used for verification only) so you need a null-check here.", "url": "https://github.com/eclipse/rdf4j/pull/2358#discussion_r454021601", "createdAt": "2020-07-14T00:16:42Z", "author": {"login": "jeenbroekstra"}, "path": "core/rio/ntriples/src/main/java/org/eclipse/rdf4j/rio/ntriples/NTriplesParser.java", "diffHunk": "@@ -240,6 +247,17 @@ protected int skipLine(int c) throws IOException {\n \t\treturn c;\n \t}\n \n+\tprotected int skipLine(int c) throws IOException {\n+\t\treturn skipLine(c, null);\n+\t}\n+\n+\tprivate int parseComment(int c) throws IOException {\n+\t\tStringBuilder sb = new StringBuilder(100);\n+\t\tint res = skipLine(c, sb);\n+\t\trdfHandler.handleComment(sb.toString());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "816e69eecbec11b704a7a8c4b4459c10e9d20c91"}, "originalPosition": 40}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3NzAyMzM1", "url": "https://github.com/eclipse/rdf4j/pull/2358#pullrequestreview-447702335", "createdAt": "2020-07-14T00:27:11Z", "commit": {"oid": "816e69eecbec11b704a7a8c4b4459c10e9d20c91"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQwMDoyNzoxMlrOGw_eAw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQwMDoyNzoxMlrOGw_eAw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDAyNDcwNw==", "bodyText": "We discourage the use of wildcard imports - could you tweak your editor settings?", "url": "https://github.com/eclipse/rdf4j/pull/2358#discussion_r454024707", "createdAt": "2020-07-14T00:27:12Z", "author": {"login": "jeenbroekstra"}, "path": "core/rio/ntriples/src/test/java/org/eclipse/rdf4j/rio/ntriples/AbstractNTriplesParserUnitTest.java", "diffHunk": "@@ -12,15 +12,15 @@\n \n import java.io.InputStream;\n import java.io.StringReader;\n-import java.util.ArrayList;\n-import java.util.Collections;\n-import java.util.List;\n+import java.util.*;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "816e69eecbec11b704a7a8c4b4459c10e9d20c91"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3NzA5NTc5", "url": "https://github.com/eclipse/rdf4j/pull/2358#pullrequestreview-447709579", "createdAt": "2020-07-14T00:49:02Z", "commit": {"oid": "816e69eecbec11b704a7a8c4b4459c10e9d20c91"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQwMDo0OTowMlrOGw_5SA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQwMDo0OTowMlrOGw_5SA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDAzMTY4OA==", "bodyText": "I just had a closer look and you get a test failure because this does not check if c (after reading the code point on line 216) is -1.", "url": "https://github.com/eclipse/rdf4j/pull/2358#discussion_r454031688", "createdAt": "2020-07-14T00:49:02Z", "author": {"login": "jeenbroekstra"}, "path": "core/rio/ntriples/src/main/java/org/eclipse/rdf4j/rio/ntriples/NTriplesParser.java", "diffHunk": "@@ -211,9 +211,16 @@ protected int skipToEndOfLine(int c) throws IOException {\n \t * Reads characters from reader until the first EOL has been read. The first character after the EOL is returned. In\n \t * case the end of the character stream has been reached, -1 is returned.\n \t */\n-\tprotected int skipLine(int c) throws IOException {\n+\tprotected int skipLine(int c, StringBuilder sb) throws IOException {\n \t\twhile (c != -1 && c != '\\r' && c != '\\n') {\n \t\t\tc = readCodePoint();\n+\t\t\tif (sb != null) {\n+\t\t\t\tsb.append(Character.toChars(c));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "816e69eecbec11b704a7a8c4b4459c10e9d20c91"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8a32983e071d9c53fa7222999d92bc37d18fb310", "author": {"user": {"login": "elad-shaked", "name": null}}, "url": "https://github.com/eclipse/rdf4j/commit/8a32983e071d9c53fa7222999d92bc37d18fb310", "committedDate": "2020-07-14T06:35:29Z", "message": "GH-2357 Fixes a per review\n\nSigned-off-by: Elad Shaked <elad.shaked@sparkbeyond.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "13b509a2460927194929085e3b080f9867f80c65", "author": {"user": {"login": "elad-shaked", "name": null}}, "url": "https://github.com/eclipse/rdf4j/commit/13b509a2460927194929085e3b080f9867f80c65", "committedDate": "2020-07-14T06:39:29Z", "message": "GH-2357 Fixed formatting\n\nSigned-off-by: Elad Shaked <elad.shaked@sparkbeyond.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3OTQxNjkz", "url": "https://github.com/eclipse/rdf4j/pull/2358#pullrequestreview-447941693", "createdAt": "2020-07-14T09:28:15Z", "commit": {"oid": "13b509a2460927194929085e3b080f9867f80c65"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 130, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}