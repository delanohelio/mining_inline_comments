{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk2MjMwNjYx", "number": 2568, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQwMDowMTowMVrOEpqaMg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQwMDowMTowMVrOEpqaMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEyMTIxOTA2OnYy", "diffSide": "RIGHT", "path": "site/content/documentation/programming/shacl.md", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQwMDowMTowMVrOHbeIOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQwMDoxNTozNFrOHbeUjA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODU2NzIyNw==", "bodyText": "Could you replace the {{< highlight >}} shortcode with  ```java .... ```?", "url": "https://github.com/eclipse/rdf4j/pull/2568#discussion_r498567227", "createdAt": "2020-10-02T00:01:01Z", "author": {"login": "jeenbroekstra"}, "path": "site/content/documentation/programming/shacl.md", "diffHunk": "@@ -51,15 +51,31 @@ Utilize a normal connection to load your shapes into this graph. SPARQL is not s\n \n {{< highlight java >}}\n ShaclSail shaclSail = new ShaclSail(new MemoryStore());\n-SailRepository sailRepository = new SailRepository(shaclSail);\n+Repository repo = new SailRepository(shaclSail);\n \n-try (SailRepositoryConnection connection = sailRepository.getConnection()) {\n-    connection.begin();\n+try (RepositoryConnection connection = repo.getConnection()) {\n \n     Reader shaclRules = ....\n \n+    // add shapes\n+    connection.begin();\n+    connection.add(shaclRules, \"\", RDFFormat.TURTLE, RDF4J.SHACL_SHAPE_GRAPH);\n+    connection.commit();\n+    \n+    // clear existing shapes and add new ones in single transaction (eg. update shapes)\n+    connection.begin();\n+    connection.clear(RDF4J.SHACL_SHAPE_GRAPH);\n     connection.add(shaclRules, \"\", RDFFormat.TURTLE, RDF4J.SHACL_SHAPE_GRAPH);\n     connection.commit();\n+\n+    // clear all shapes\n+    connection.begin();\n+    connection.clear(RDF4J.SHACL_SHAPE_GRAPH);\n+    connection.commit();\n+    \n+    // connection.clear(); will not clear the Shapes graph!\n+\n+\n }\n {{< / highlight >}}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "763c6b53d38a8002bc37de598cd84f6f3f017dc3"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODU3MDM4MA==", "bodyText": "Otherwise looks good to me.", "url": "https://github.com/eclipse/rdf4j/pull/2568#discussion_r498570380", "createdAt": "2020-10-02T00:15:34Z", "author": {"login": "jeenbroekstra"}, "path": "site/content/documentation/programming/shacl.md", "diffHunk": "@@ -51,15 +51,31 @@ Utilize a normal connection to load your shapes into this graph. SPARQL is not s\n \n {{< highlight java >}}\n ShaclSail shaclSail = new ShaclSail(new MemoryStore());\n-SailRepository sailRepository = new SailRepository(shaclSail);\n+Repository repo = new SailRepository(shaclSail);\n \n-try (SailRepositoryConnection connection = sailRepository.getConnection()) {\n-    connection.begin();\n+try (RepositoryConnection connection = repo.getConnection()) {\n \n     Reader shaclRules = ....\n \n+    // add shapes\n+    connection.begin();\n+    connection.add(shaclRules, \"\", RDFFormat.TURTLE, RDF4J.SHACL_SHAPE_GRAPH);\n+    connection.commit();\n+    \n+    // clear existing shapes and add new ones in single transaction (eg. update shapes)\n+    connection.begin();\n+    connection.clear(RDF4J.SHACL_SHAPE_GRAPH);\n     connection.add(shaclRules, \"\", RDFFormat.TURTLE, RDF4J.SHACL_SHAPE_GRAPH);\n     connection.commit();\n+\n+    // clear all shapes\n+    connection.begin();\n+    connection.clear(RDF4J.SHACL_SHAPE_GRAPH);\n+    connection.commit();\n+    \n+    // connection.clear(); will not clear the Shapes graph!\n+\n+\n }\n {{< / highlight >}}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODU2NzIyNw=="}, "originalCommit": {"oid": "763c6b53d38a8002bc37de598cd84f6f3f017dc3"}, "originalPosition": 33}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1393, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}