{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY0OTkxNjY5", "number": 1859, "title": "GH-1555: add example on how to use FedX with RemoteRepositoryManager", "bodyText": "GitHub issue resolved: #1555\nJust another demo snippet", "createdAt": "2020-01-20T20:28:06Z", "url": "https://github.com/eclipse/rdf4j/pull/1859", "merged": true, "mergeCommit": {"oid": "c0ba144bd3f7e828aa294defc5f73390b021dcce"}, "closed": true, "closedAt": "2020-01-22T16:56:32Z", "author": {"login": "aschwarte10"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb8UHYegFqTM0NTU1MTgyOA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABb8c1QlAFqTM0NTY5ODYyNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ1NTUxODI4", "url": "https://github.com/eclipse/rdf4j/pull/1859#pullrequestreview-345551828", "createdAt": "2020-01-20T22:11:04Z", "commit": {"oid": "44990bb440e8eea881ffd8f806217c2a30491a48"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQyMjoxMTowNFrOFfqMiA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQyMjoxNTo1N1rOFfqQgQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODc0MTUxMg==", "bodyText": "Missing copyright header.", "url": "https://github.com/eclipse/rdf4j/pull/1859#discussion_r368741512", "createdAt": "2020-01-20T22:11:04Z", "author": {"login": "jeenbroekstra"}, "path": "tools/federation/src/test/java/demos/FedXWithRemoteRepositoryManager.java", "diffHunk": "@@ -0,0 +1,47 @@\n+package demos;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44990bb440e8eea881ffd8f806217c2a30491a48"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODc0MTk4Ng==", "bodyText": "This reminds me: calling init() should not be mandatory. I'm not sure if the FedXRepository implements that (as it's a fairly new thing).", "url": "https://github.com/eclipse/rdf4j/pull/1859#discussion_r368741986", "createdAt": "2020-01-20T22:13:27Z", "author": {"login": "jeenbroekstra"}, "path": "tools/federation/src/test/java/demos/FedXWithRemoteRepositoryManager.java", "diffHunk": "@@ -0,0 +1,47 @@\n+package demos;\n+\n+import org.eclipse.rdf4j.federated.FedXFactory;\n+import org.eclipse.rdf4j.model.Statement;\n+import org.eclipse.rdf4j.model.vocabulary.FOAF;\n+import org.eclipse.rdf4j.model.vocabulary.RDF;\n+import org.eclipse.rdf4j.repository.Repository;\n+import org.eclipse.rdf4j.repository.RepositoryConnection;\n+import org.eclipse.rdf4j.repository.RepositoryResult;\n+import org.eclipse.rdf4j.repository.manager.RemoteRepositoryManager;\n+import org.eclipse.rdf4j.repository.manager.RepositoryManager;\n+\n+/**\n+ * Demo which shows an example of a local federation which uses repositories from a remote RDF4J instance as federation\n+ * members.\n+ * \n+ * @author Andreas Schwarte\n+ *\n+ */\n+public class FedXWithRemoteRepositoryManager {\n+\n+\tpublic static void main(String[] args) throws Exception {\n+\n+\t\t// connection URL of a RDF4J server which manages the repositories\n+\t\tString serverUrl = \"http://localhost:8080/rdf4j-server\";\n+\t\tRepositoryManager repoManager = new RemoteRepositoryManager(serverUrl);\n+\n+\t\t// assumes that remote repositories exist\n+\t\tRepository repo = FedXFactory.newFederation()\n+\t\t\t\t.withRepositoryResolver(repoManager)\n+\t\t\t\t.withResolvableEndpoint(\"my-repository-1\")\n+\t\t\t\t.withResolvableEndpoint(\"my-repository-2\")\n+\t\t\t\t.create();\n+\n+\t\trepo.init();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44990bb440e8eea881ffd8f806217c2a30491a48"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODc0MjUyOQ==", "bodyText": "You can just do a shutDown on the repoManager, it will shut down the actual repository for you. And perhaps, if we're a bit paranoid, this should be in a finally clause.", "url": "https://github.com/eclipse/rdf4j/pull/1859#discussion_r368742529", "createdAt": "2020-01-20T22:15:57Z", "author": {"login": "jeenbroekstra"}, "path": "tools/federation/src/test/java/demos/FedXWithRemoteRepositoryManager.java", "diffHunk": "@@ -0,0 +1,47 @@\n+package demos;\n+\n+import org.eclipse.rdf4j.federated.FedXFactory;\n+import org.eclipse.rdf4j.model.Statement;\n+import org.eclipse.rdf4j.model.vocabulary.FOAF;\n+import org.eclipse.rdf4j.model.vocabulary.RDF;\n+import org.eclipse.rdf4j.repository.Repository;\n+import org.eclipse.rdf4j.repository.RepositoryConnection;\n+import org.eclipse.rdf4j.repository.RepositoryResult;\n+import org.eclipse.rdf4j.repository.manager.RemoteRepositoryManager;\n+import org.eclipse.rdf4j.repository.manager.RepositoryManager;\n+\n+/**\n+ * Demo which shows an example of a local federation which uses repositories from a remote RDF4J instance as federation\n+ * members.\n+ * \n+ * @author Andreas Schwarte\n+ *\n+ */\n+public class FedXWithRemoteRepositoryManager {\n+\n+\tpublic static void main(String[] args) throws Exception {\n+\n+\t\t// connection URL of a RDF4J server which manages the repositories\n+\t\tString serverUrl = \"http://localhost:8080/rdf4j-server\";\n+\t\tRepositoryManager repoManager = new RemoteRepositoryManager(serverUrl);\n+\n+\t\t// assumes that remote repositories exist\n+\t\tRepository repo = FedXFactory.newFederation()\n+\t\t\t\t.withRepositoryResolver(repoManager)\n+\t\t\t\t.withResolvableEndpoint(\"my-repository-1\")\n+\t\t\t\t.withResolvableEndpoint(\"my-repository-2\")\n+\t\t\t\t.create();\n+\n+\t\trepo.init();\n+\n+\t\ttry (RepositoryConnection conn = repo.getConnection()) {\n+\t\t\ttry (RepositoryResult<Statement> repoResult = conn.getStatements(null, RDF.TYPE, FOAF.PERSON)) {\n+\t\t\t\trepoResult.forEach(st -> System.out.println(st));\n+\t\t\t}\n+\t\t}\n+\n+\t\trepo.shutDown();\n+\t\trepoManager.shutDown();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44990bb440e8eea881ffd8f806217c2a30491a48"}, "originalPosition": 44}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "00d9f95cf245891d165d0f45e1592048fcd207dc", "author": {"user": {"login": "aschwarte10", "name": "Andreas Schwarte"}}, "url": "https://github.com/eclipse/rdf4j/commit/00d9f95cf245891d165d0f45e1592048fcd207dc", "committedDate": "2020-01-21T07:16:52Z", "message": "GH-1555: add example on how to use FedX with RemoteRepositoryManager"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "44990bb440e8eea881ffd8f806217c2a30491a48", "author": {"user": {"login": "aschwarte10", "name": "Andreas Schwarte"}}, "url": "https://github.com/eclipse/rdf4j/commit/44990bb440e8eea881ffd8f806217c2a30491a48", "committedDate": "2020-01-20T20:27:00Z", "message": "GH-1555: add example on how to use FedX with RemoteRepositoryManager"}, "afterCommit": {"oid": "00d9f95cf245891d165d0f45e1592048fcd207dc", "author": {"user": {"login": "aschwarte10", "name": "Andreas Schwarte"}}, "url": "https://github.com/eclipse/rdf4j/commit/00d9f95cf245891d165d0f45e1592048fcd207dc", "committedDate": "2020-01-21T07:16:52Z", "message": "GH-1555: add example on how to use FedX with RemoteRepositoryManager"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ1Njk4NjI0", "url": "https://github.com/eclipse/rdf4j/pull/1859#pullrequestreview-345698624", "createdAt": "2020-01-21T08:25:54Z", "commit": {"oid": "00d9f95cf245891d165d0f45e1592048fcd207dc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 55, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}