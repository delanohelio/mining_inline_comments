{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI0NzI1MTcw", "number": 2290, "title": "GH-543 rdfxml rdf parse type literal", "bodyText": "GitHub issue resolved: #543  \nBriefly describe the changes proposed in this PR:\n\nAccording to the suggestions on our PR #2280 we have cherry-picked the commits related to this issue and made the required changes.\nPR Author Checklist (see the contributor guidelines for more details):\n\n my pull request is self-contained\n I've added tests for the changes I made\n I've applied code formatting (you can use mvn process-resources to format from the command line)\n every commit message starts with the issue number (GH-xxxx) followed by a meaningful description of the change\n every commit has been signed off\n\nNote: we merge all feature pull requests using squash and merge. See RDF4J git merge strategy for more details.", "createdAt": "2020-05-28T20:44:39Z", "url": "https://github.com/eclipse/rdf4j/pull/2290", "merged": true, "mergeCommit": {"oid": "37cd8687e9054cc1d0131c5fd9fc92c5805f5392"}, "closed": true, "closedAt": "2020-05-30T01:00:13Z", "author": {"login": "deepali17043"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABclyuzHgH2gAyNDI0NzI1MTcwOjE3YjQ3MDYwNDhmOGM5NmI2YzdhNzRmNjgzYmVjMmQyNDA0NjY5YzQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcmMXAwAFqTQyMTM2MjkxOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "17b4706048f8c96b6c7a74f683bec2d2404669c4", "author": {"user": {"login": "anmolsinghal98", "name": "Anmol Singhal"}}, "url": "https://github.com/eclipse/rdf4j/commit/17b4706048f8c96b6c7a74f683bec2d2404669c4", "committedDate": "2020-05-28T19:07:39Z", "message": "GH-543: insertUsedContextPrefixes() changed, currently adds namespace to all tags\n\nSigned-off-by: Anmol Singhal <anmol17332@iiitd.ac.in>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "56d9b5bfbf7f010100419a0666aff469673410e3", "author": {"user": {"login": "deepali17043", "name": null}}, "url": "https://github.com/eclipse/rdf4j/commit/56d9b5bfbf7f010100419a0666aff469673410e3", "committedDate": "2020-05-28T20:51:56Z", "message": "GH-543: Namespace added to outer tags\n\nSigned-off-by: Deepali <deepali17043@iiitd.ac.in>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "afe2ded0c00d11ec5ec6fbbfc65ac6710ee74cdc", "author": {"user": {"login": "deepali17043", "name": null}}, "url": "https://github.com/eclipse/rdf4j/commit/afe2ded0c00d11ec5ec6fbbfc65ac6710ee74cdc", "committedDate": "2020-05-28T20:42:41Z", "message": "namespace added to outermost tags\n\nSigned-off-by: Deepali <deepali17043@iiitd.ac.in>"}, "afterCommit": {"oid": "56d9b5bfbf7f010100419a0666aff469673410e3", "author": {"user": {"login": "deepali17043", "name": null}}, "url": "https://github.com/eclipse/rdf4j/commit/56d9b5bfbf7f010100419a0666aff469673410e3", "committedDate": "2020-05-28T20:51:56Z", "message": "GH-543: Namespace added to outer tags\n\nSigned-off-by: Deepali <deepali17043@iiitd.ac.in>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIwNTg3NzI4", "url": "https://github.com/eclipse/rdf4j/pull/2290#pullrequestreview-420587728", "createdAt": "2020-05-29T00:58:20Z", "commit": {"oid": "56d9b5bfbf7f010100419a0666aff469673410e3"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQwMDo1ODoyMFrOGcLhnA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQwMDo1ODo0NFrOGcLh8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjIwMjE0MA==", "bodyText": "I guess you put these there for debugging. Can you take this back out?", "url": "https://github.com/eclipse/rdf4j/pull/2290#discussion_r432202140", "createdAt": "2020-05-29T00:58:20Z", "author": {"login": "jeenbroekstra"}, "path": "core/rio/rdfxml/src/main/java/org/eclipse/rdf4j/rio/rdfxml/SAXFilter.java", "diffHunk": "@@ -558,13 +558,35 @@ private void insertUsedContextPrefixes() {\n \t\t\t\tString prefix = unknownPrefixesInXMLLiteral.get(i);\n \t\t\t\tString namespace = topElement.getNamespace(prefix);\n \t\t\t\tif (namespace != null) {\n+\t\t\t\t\tSystem.out.println(prefix);\n+\t\t\t\t\tSystem.out.println(namespace);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "56d9b5bfbf7f010100419a0666aff469673410e3"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjIwMjIyNg==", "bodyText": "Same here - useful for debugging obviously but we don't want this in the finished code.", "url": "https://github.com/eclipse/rdf4j/pull/2290#discussion_r432202226", "createdAt": "2020-05-29T00:58:44Z", "author": {"login": "jeenbroekstra"}, "path": "core/rio/rdfxml/src/main/java/org/eclipse/rdf4j/rio/rdfxml/SAXFilter.java", "diffHunk": "@@ -558,13 +558,35 @@ private void insertUsedContextPrefixes() {\n \t\t\t\tString prefix = unknownPrefixesInXMLLiteral.get(i);\n \t\t\t\tString namespace = topElement.getNamespace(prefix);\n \t\t\t\tif (namespace != null) {\n+\t\t\t\t\tSystem.out.println(prefix);\n+\t\t\t\t\tSystem.out.println(namespace);\n \t\t\t\t\tappendNamespaceDecl(contextPrefixes, prefix, namespace);\n \t\t\t\t}\n \t\t\t}\n \n-\t\t\t// Insert this String before the first '>' character\n-\t\t\tint endOfFirstStartTag = charBuf.indexOf(\">\");\n-\t\t\tcharBuf.insert(endOfFirstStartTag, contextPrefixes.toString());\n+\t\t\tint i = 0;\n+\t\t\tint opentag = 0;\n+\t\t\twhile (i < charBuf.length()) {\n+\t\t\t\tchar ch = charBuf.charAt(i);\n+\t\t\t\tif (ch == '<') {\n+\t\t\t\t\tif ((i + 1) < charBuf.length()) {\n+\t\t\t\t\t\tchar nextChar = charBuf.charAt(i + 1);\n+\t\t\t\t\t\tif (nextChar != '/' && opentag == 0) {\n+\t\t\t\t\t\t\topentag++;\n+\t\t\t\t\t\t\tint endOfFirstStartTag = charBuf.substring(i).indexOf(\">\");\n+\t\t\t\t\t\t\t// System.out.println(endOfFirstStartTag);\n+\t\t\t\t\t\t\tcharBuf.insert(endOfFirstStartTag + i, contextPrefixes.toString());\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\topentag--;\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t\ti += 1;\n+\t\t\t}\n+\n+\t\t\tSystem.out.println(\"Charbuf after insert: \");\n+\t\t\tSystem.out.println(charBuf);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "56d9b5bfbf7f010100419a0666aff469673410e3"}, "originalPosition": 34}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3a2b84f0f16b2a20f77a770446a74a56a9f7a578", "author": {"user": {"login": "deepali17043", "name": null}}, "url": "https://github.com/eclipse/rdf4j/commit/3a2b84f0f16b2a20f77a770446a74a56a9f7a578", "committedDate": "2020-05-29T06:45:12Z", "message": "GH-543: Removed print statements meant for debugging\n\nSigned-off-by: Deepali <deepali17043@iiitd.ac.in>"}, "afterCommit": {"oid": "56d9b5bfbf7f010100419a0666aff469673410e3", "author": {"user": {"login": "deepali17043", "name": null}}, "url": "https://github.com/eclipse/rdf4j/commit/56d9b5bfbf7f010100419a0666aff469673410e3", "committedDate": "2020-05-28T20:51:56Z", "message": "GH-543: Namespace added to outer tags\n\nSigned-off-by: Deepali <deepali17043@iiitd.ac.in>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "15c52ab30b92b11ffab1726174b135ca3d85b67f", "author": {"user": {"login": "anmolsinghal98", "name": "Anmol Singhal"}}, "url": "https://github.com/eclipse/rdf4j/commit/15c52ab30b92b11ffab1726174b135ca3d85b67f", "committedDate": "2020-05-29T09:35:49Z", "message": "GH-543: Added test for InsertUsedContextPrefixes()\n\nSigned-off-by: Anmol Singhal <anmol17332@iiitd.ac.in>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxMzYyOTE4", "url": "https://github.com/eclipse/rdf4j/pull/2290#pullrequestreview-421362918", "createdAt": "2020-05-30T00:59:12Z", "commit": {"oid": "15c52ab30b92b11ffab1726174b135ca3d85b67f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 119, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}