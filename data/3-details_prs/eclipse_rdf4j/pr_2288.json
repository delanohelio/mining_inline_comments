{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI0NDUxNTk4", "number": 2288, "title": "GH-2158: Added getAllValues function to QueryResults", "bodyText": "Signed-off-by: shubhi0108 shubhi16267@iiitd.ac.in\nGH-2158: Formatted getAllValues function\nSigned-off-by: navdhaagarwal navdha16250@iiitd.ac.in\nGH-2158: Added a test\nSigned-off-by: navdhaagarwal navdha16250@iiitd.ac.in\nGH-2158: changed function name\nSigned-off-by: navdhaagarwal navdha16250@iiitd.ac.in\nGH2158: Final check with one more test\nSigned-off-by: navdhaagarwal navdha16250@iiitd.ac.in\nGitHub issue resolved: #2158\nAdded a new utility function getAllValues() to QueryResults for fetching all the values of a binding variable from the TupleQueryResult\n\nPR Author Checklist (see the contributor guidelines for more details):\n\n my pull request is self-contained\n I've added tests for the changes I made\n I've applied code formatting (you can use mvn process-resources to format from the command line)\n every commit message starts with the issue number (GH-xxxx) followed by a meaningful description of the change\n every commit has been signed off\n\nNote: we merge all feature pull requests using squash and merge. See RDF4J git merge strategy for more details.", "createdAt": "2020-05-28T12:24:12Z", "url": "https://github.com/eclipse/rdf4j/pull/2288", "merged": true, "mergeCommit": {"oid": "d460c7e29a62eadc5f132b708a68ee48ff8f1bf8"}, "closed": true, "closedAt": "2020-05-29T09:19:27Z", "author": {"login": "navdhaagarwal"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcl2PRVAFqTQyMDU0ODIwMg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcl9hF1AFqTQyMDcyMTc5OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIwNTQ4MjAy", "url": "https://github.com/eclipse/rdf4j/pull/2288#pullrequestreview-420548202", "createdAt": "2020-05-28T22:59:07Z", "commit": {"oid": "cc326a0b12163f9c0183c2d5273395b6347df1b2"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQyMjo1OTowN1rOGcJhAw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQyMzoxMTo1NFrOGcJw7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE2OTIxOQ==", "bodyText": "The code is correct, but it is possible to write it in a slightly shorter way, since in this case the compiler already knows the result type: I'd suggest to use return ArrayList<>(); instead of return ArrayList<Value>()", "url": "https://github.com/eclipse/rdf4j/pull/2288#discussion_r432169219", "createdAt": "2020-05-28T22:59:07Z", "author": {"login": "barthanssens"}, "path": "core/query/src/main/java/org/eclipse/rdf4j/query/QueryResults.java", "diffHunk": "@@ -87,6 +88,24 @@ public static Model asModel(CloseableIteration<? extends Statement, ? extends RD\n \t\treturn model;\n \t}\n \n+\t/**\n+\t * Returns a list of values of a particular variable out of the QueryResult.\n+\t *\n+\t * @param result\n+\t * @param var    variable for which list of values needs to be returned\n+\t * @return a list of Values of var\n+\t * @throws QueryEvaluationException\n+\t */\n+\tpublic static List<Value> getAllValues(TupleQueryResult result, String var) throws QueryEvaluationException {\n+\t\ttry (Stream<BindingSet> stream = result.stream()) {\n+\t\t\tif (result.getBindingNames().contains(var)) {\n+\t\t\t\treturn stream.map(bs -> bs.getValue(var)).collect(Collectors.toList());\n+\t\t\t} else {\n+\t\t\t\treturn new ArrayList<Value>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc326a0b12163f9c0183c2d5273395b6347df1b2"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE3MzI5Mw==", "bodyText": "A second way to reduce the amount of code even further would be to use a ternary operator, but that's just a matter of taste (some people like this style, some don't because it can be harder to read).\nI.e.\nreturn result.getBindingNames().contains(var) \n          ? stream.map(..\n          : new ArrayList<>();", "url": "https://github.com/eclipse/rdf4j/pull/2288#discussion_r432173293", "createdAt": "2020-05-28T23:11:54Z", "author": {"login": "barthanssens"}, "path": "core/query/src/main/java/org/eclipse/rdf4j/query/QueryResults.java", "diffHunk": "@@ -87,6 +88,24 @@ public static Model asModel(CloseableIteration<? extends Statement, ? extends RD\n \t\treturn model;\n \t}\n \n+\t/**\n+\t * Returns a list of values of a particular variable out of the QueryResult.\n+\t *\n+\t * @param result\n+\t * @param var    variable for which list of values needs to be returned\n+\t * @return a list of Values of var\n+\t * @throws QueryEvaluationException\n+\t */\n+\tpublic static List<Value> getAllValues(TupleQueryResult result, String var) throws QueryEvaluationException {\n+\t\ttry (Stream<BindingSet> stream = result.stream()) {\n+\t\t\tif (result.getBindingNames().contains(var)) {\n+\t\t\t\treturn stream.map(bs -> bs.getValue(var)).collect(Collectors.toList());\n+\t\t\t} else {\n+\t\t\t\treturn new ArrayList<Value>();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE2OTIxOQ=="}, "originalCommit": {"oid": "cc326a0b12163f9c0183c2d5273395b6347df1b2"}, "originalPosition": 25}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c3dba032a1f23dd2badc642b10ad30eb7863a5c0", "author": {"user": {"login": "shubhi0108", "name": "Shubhi Jain"}}, "url": "https://github.com/eclipse/rdf4j/commit/c3dba032a1f23dd2badc642b10ad30eb7863a5c0", "committedDate": "2020-05-29T07:18:50Z", "message": "GH-2158: Added getAllValues function to QueryResults\n\nSigned-off-by: shubhi0108 <shubhi16267@iiitd.ac.in>\n\nGH-2158: Formatted getAllValues function\n\nSigned-off-by: navdhaagarwal <navdha16250@iiitd.ac.in>\n\nGH-2158: Added a test\n\nSigned-off-by: navdhaagarwal <navdha16250@iiitd.ac.in>\n\nGH-2158: changed function name\n\nSigned-off-by: navdhaagarwal <navdha16250@iiitd.ac.in>\n\nGH2158: Final check with one more test\n\nSigned-off-by: navdhaagarwal <navdha16250@iiitd.ac.in>\n\nGH2158: changes made\n\nSigned-off-by: navdhaagarwal <navdha16250@iiitd.ac.in>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cc326a0b12163f9c0183c2d5273395b6347df1b2", "author": {"user": {"login": "shubhi0108", "name": "Shubhi Jain"}}, "url": "https://github.com/eclipse/rdf4j/commit/cc326a0b12163f9c0183c2d5273395b6347df1b2", "committedDate": "2020-05-28T12:07:24Z", "message": "GH-2158: Added getAllValues function to QueryResults\n\nSigned-off-by: shubhi0108 <shubhi16267@iiitd.ac.in>\n\nGH-2158: Formatted getAllValues function\n\nSigned-off-by: navdhaagarwal <navdha16250@iiitd.ac.in>\n\nGH-2158: Added a test\n\nSigned-off-by: navdhaagarwal <navdha16250@iiitd.ac.in>\n\nGH-2158: changed function name\n\nSigned-off-by: navdhaagarwal <navdha16250@iiitd.ac.in>\n\nGH2158: Final check with one more test\n\nSigned-off-by: navdhaagarwal <navdha16250@iiitd.ac.in>"}, "afterCommit": {"oid": "c3dba032a1f23dd2badc642b10ad30eb7863a5c0", "author": {"user": {"login": "shubhi0108", "name": "Shubhi Jain"}}, "url": "https://github.com/eclipse/rdf4j/commit/c3dba032a1f23dd2badc642b10ad30eb7863a5c0", "committedDate": "2020-05-29T07:18:50Z", "message": "GH-2158: Added getAllValues function to QueryResults\n\nSigned-off-by: shubhi0108 <shubhi16267@iiitd.ac.in>\n\nGH-2158: Formatted getAllValues function\n\nSigned-off-by: navdhaagarwal <navdha16250@iiitd.ac.in>\n\nGH-2158: Added a test\n\nSigned-off-by: navdhaagarwal <navdha16250@iiitd.ac.in>\n\nGH-2158: changed function name\n\nSigned-off-by: navdhaagarwal <navdha16250@iiitd.ac.in>\n\nGH2158: Final check with one more test\n\nSigned-off-by: navdhaagarwal <navdha16250@iiitd.ac.in>\n\nGH2158: changes made\n\nSigned-off-by: navdhaagarwal <navdha16250@iiitd.ac.in>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIwNzIxNzk5", "url": "https://github.com/eclipse/rdf4j/pull/2288#pullrequestreview-420721799", "createdAt": "2020-05-29T07:41:38Z", "commit": {"oid": "c3dba032a1f23dd2badc642b10ad30eb7863a5c0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 117, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}