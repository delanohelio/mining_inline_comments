{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAwNzI0NTU3", "number": 2080, "title": "GH-2078 property path negation and inversion", "bodyText": "GitHub issue resolved: #2078 \nBriefly describe the changes proposed in this PR:\n\n\nPR Author Checklist:\n\n my pull request is self-contained\n I've added tests for the changes I made\n every commit message starts with the issue number (GH-xxxx) followed by a meaningful description of the change\n every commit has been signed off\n\nNote: we merge all feature pull requests using squash and merge. See RDF4J git merge strategy for more details.", "createdAt": "2020-04-08T09:09:36Z", "url": "https://github.com/eclipse/rdf4j/pull/2080", "merged": true, "mergeCommit": {"oid": "fc4e23a426fa7bc9d054b2fcdfe9ccfa5b392745"}, "closed": true, "closedAt": "2020-04-10T13:12:49Z", "author": {"login": "hmottestad"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcVkOx2gFqTM4OTc5MTA4Mg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcWO8xcABqjMyMjE1Mjc1OTc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5NzkxMDgy", "url": "https://github.com/eclipse/rdf4j/pull/2080#pullrequestreview-389791082", "createdAt": "2020-04-08T09:11:13Z", "commit": {"oid": "474c966a6de74469a9dc0d874e60a25e3fa1395f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQwOToxMToxM1rOGCmKDQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQwOToxMToxM1rOGCmKDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTM3NTUwMQ==", "bodyText": "@jeenbroekstra I'm wondering about these tests suites.....couldn't find that they were being run anywhere, created my own classes to run them, quite a few of them are failing.....do we run these somewhere else? Or have we abandoned them?", "url": "https://github.com/eclipse/rdf4j/pull/2080#discussion_r405375501", "createdAt": "2020-04-08T09:11:13Z", "author": {"login": "hmottestad"}, "path": "compliance/sparql/src/test/java/org/eclipse/rdf4j/sail/memory/MemorySPARQL11QueryTest.java", "diffHunk": "@@ -0,0 +1,59 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 Eclipse RDF4J contributors.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Distribution License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/org/documents/edl-v10.php.\n+ *******************************************************************************/\n+package org.eclipse.rdf4j.sail.memory;\n+\n+import junit.framework.Test;\n+import org.eclipse.rdf4j.query.Dataset;\n+import org.eclipse.rdf4j.query.parser.sparql.manifest.SPARQL11ManifestTest;\n+import org.eclipse.rdf4j.query.parser.sparql.manifest.SPARQLQueryTest;\n+import org.eclipse.rdf4j.repository.Repository;\n+import org.eclipse.rdf4j.repository.sail.SailRepository;\n+\n+import java.net.URL;\n+\n+public class MemorySPARQL11QueryTest extends SPARQLQueryTest {\n+\n+\tpublic static Test suite() throws Exception {\n+\n+\t\tURL manifestUrl = SPARQL11ManifestTest.class.getResource(\"/testcases-sparql-1.1/manifest-evaluation.ttl\");\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "474c966a6de74469a9dc0d874e60a25e3fa1395f"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5NzkxNjc1", "url": "https://github.com/eclipse/rdf4j/pull/2080#pullrequestreview-389791675", "createdAt": "2020-04-08T09:11:59Z", "commit": {"oid": "474c966a6de74469a9dc0d874e60a25e3fa1395f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQwOToxMTo1OVrOGCmL_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQwOToxMTo1OVrOGCmL_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTM3NTk5OA==", "bodyText": "Going to need help with fixing the underlying issue for this test.", "url": "https://github.com/eclipse/rdf4j/pull/2080#discussion_r405375998", "createdAt": "2020-04-08T09:11:59Z", "author": {"login": "hmottestad"}, "path": "core/queryparser/sparql/src/test/java/org/eclipse/rdf4j/query/parser/sparql/SPARQLParserTest.java", "diffHunk": "@@ -283,4 +287,34 @@ public void testLongUnicode() throws Exception {\n \t\tassertEquals(\"\\uD83D\\uDE1F\", lines[lines.length - 1].replaceAll(\".*\\\"(.*)\\\".*\", \"$1\"));\n \t}\n \n+\t@Test\n+\tpublic void testWildCardPathFixedEnd() {\n+\n+\t\tString query = \"PREFIX : <http://example.org/>\\n ASK {:IBM ((:|!:)|(^:|!^:))* :Jane.} \";\n+\n+\t\tParsedQuery parsedQuery = parser.parseQuery(query, null);\n+\n+\t\t// parsing should not throw exception\n+\t\tTupleExpr tupleExpr = parsedQuery.getTupleExpr();\n+\n+\t}\n+\n+\t@Test\n+\tpublic void testWildCardPathOpenEnd() {\n+\n+\t\tString query = \"PREFIX : <http://example.org/>\\n ASK {:IBM ^(:|!:) ?jane.} \";\n+\n+\t\tParsedQuery parsedQuery = parser.parseQuery(query, null);\n+\t\tTupleExpr tupleExpr = parsedQuery.getTupleExpr();\n+\n+\t\tSlice slice = (Slice) tupleExpr;\n+\t\tUnion union = (Union) slice.getArg();\n+\n+\t\tVar leftSubjectVar = ((StatementPattern) union.getLeftArg()).getSubjectVar();\n+\t\tVar rightSubjectVar = ((StatementPattern) ((Filter) union.getRightArg()).getArg()).getSubjectVar();\n+\n+\t\tassertEquals(leftSubjectVar, rightSubjectVar);\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "474c966a6de74469a9dc0d874e60a25e3fa1395f"}, "originalPosition": 60}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwMzk2MTgw", "url": "https://github.com/eclipse/rdf4j/pull/2080#pullrequestreview-390396180", "createdAt": "2020-04-08T23:23:32Z", "commit": {"oid": "474c966a6de74469a9dc0d874e60a25e3fa1395f"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQyMzoyMzozMlrOGDEXCQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQyMzoyNDoyNFrOGDEYQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTg3MDM0NQ==", "bodyText": "This duplicates org.eclipse.rdf4j.query.parser.sparql.manifest.SPARQL12QueryTest.", "url": "https://github.com/eclipse/rdf4j/pull/2080#discussion_r405870345", "createdAt": "2020-04-08T23:23:32Z", "author": {"login": "jeenbroekstra"}, "path": "compliance/sparql/src/test/java/org/eclipse/rdf4j/sail/memory/MemorySPARQL12QueryTest.java", "diffHunk": "@@ -0,0 +1,59 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 Eclipse RDF4J contributors.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Distribution License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/org/documents/edl-v10.php.\n+ *******************************************************************************/\n+package org.eclipse.rdf4j.sail.memory;\n+\n+import junit.framework.Test;\n+import org.eclipse.rdf4j.query.Dataset;\n+import org.eclipse.rdf4j.query.parser.sparql.manifest.SPARQL11ManifestTest;\n+import org.eclipse.rdf4j.query.parser.sparql.manifest.SPARQLQueryTest;\n+import org.eclipse.rdf4j.repository.Repository;\n+import org.eclipse.rdf4j.repository.sail.SailRepository;\n+\n+import java.net.URL;\n+\n+public class MemorySPARQL12QueryTest extends SPARQLQueryTest {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "474c966a6de74469a9dc0d874e60a25e3fa1395f"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTg3MDY1OA==", "bodyText": "This duplicates org.eclipse.rdf4j.query.parser.sparql.manifest.W3CApprovedSPARQL11QueryTest.", "url": "https://github.com/eclipse/rdf4j/pull/2080#discussion_r405870658", "createdAt": "2020-04-08T23:24:24Z", "author": {"login": "jeenbroekstra"}, "path": "compliance/sparql/src/test/java/org/eclipse/rdf4j/sail/memory/MemorySPARQL11W3CQueryTest.java", "diffHunk": "@@ -0,0 +1,60 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 Eclipse RDF4J contributors.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Distribution License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/org/documents/edl-v10.php.\n+ *******************************************************************************/\n+package org.eclipse.rdf4j.sail.memory;\n+\n+import junit.framework.Test;\n+import org.eclipse.rdf4j.query.Dataset;\n+import org.eclipse.rdf4j.query.parser.sparql.manifest.SPARQL11ManifestTest;\n+import org.eclipse.rdf4j.query.parser.sparql.manifest.SPARQLQueryTest;\n+import org.eclipse.rdf4j.repository.Repository;\n+import org.eclipse.rdf4j.repository.sail.SailRepository;\n+\n+import java.net.URL;\n+\n+public class MemorySPARQL11W3CQueryTest extends SPARQLQueryTest {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "474c966a6de74469a9dc0d874e60a25e3fa1395f"}, "originalPosition": 19}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwNDEzNjk2", "url": "https://github.com/eclipse/rdf4j/pull/2080#pullrequestreview-390413696", "createdAt": "2020-04-09T00:13:53Z", "commit": {"oid": "474c966a6de74469a9dc0d874e60a25e3fa1395f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQwMDoxMzo1M1rOGDFU4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQwMDoxMzo1M1rOGDFU4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTg4NjE3Nw==", "bodyText": "This duplicates org.eclipse.rdf4j.query.parser.sparql.manifest.W3CApprovedSPARQL10QueryTest.", "url": "https://github.com/eclipse/rdf4j/pull/2080#discussion_r405886177", "createdAt": "2020-04-09T00:13:53Z", "author": {"login": "jeenbroekstra"}, "path": "compliance/sparql/src/test/java/org/eclipse/rdf4j/sail/memory/MemorySPARQL10W3CQueryTest.java", "diffHunk": "@@ -0,0 +1,59 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 Eclipse RDF4J contributors.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Distribution License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/org/documents/edl-v10.php.\n+ *******************************************************************************/\n+package org.eclipse.rdf4j.sail.memory;\n+\n+import junit.framework.Test;\n+import org.eclipse.rdf4j.query.Dataset;\n+import org.eclipse.rdf4j.query.parser.sparql.manifest.SPARQL11ManifestTest;\n+import org.eclipse.rdf4j.query.parser.sparql.manifest.SPARQLQueryTest;\n+import org.eclipse.rdf4j.repository.Repository;\n+import org.eclipse.rdf4j.repository.sail.SailRepository;\n+\n+import java.net.URL;\n+\n+public class MemorySPARQL10W3CQueryTest extends SPARQLQueryTest {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "474c966a6de74469a9dc0d874e60a25e3fa1395f"}, "originalPosition": 19}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8adb315e2e94fdaadffc9c5c3fce950856a923ba", "author": {"user": {"login": "jeenbroekstra", "name": "Jeen Broekstra"}}, "url": "https://github.com/eclipse/rdf4j/commit/8adb315e2e94fdaadffc9c5c3fce950856a923ba", "committedDate": "2020-04-09T02:37:23Z", "message": "GH-2078 fix handling of inverted negated property set\n\n- added test cases to ComplexSPARQLQueryTest\n- removed redundant manifest test executors"}, "afterCommit": {"oid": "de8f9d89dce861688bbf8a29611d2a8bed616134", "author": {"user": {"login": "jeenbroekstra", "name": "Jeen Broekstra"}}, "url": "https://github.com/eclipse/rdf4j/commit/de8f9d89dce861688bbf8a29611d2a8bed616134", "committedDate": "2020-04-09T02:41:09Z", "message": "GH-2078 fix handling of inverted negated property set\n\n- added test cases to ComplexSPARQLQueryTest\n- removed redundant manifest test executors"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwNTQ1MjE1", "url": "https://github.com/eclipse/rdf4j/pull/2080#pullrequestreview-390545215", "createdAt": "2020-04-09T07:18:16Z", "commit": {"oid": "cccc1e8a0f0c328baa2b3c39db3e39054ca24974"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9d770dc3d31e50d376b12ed613aaf8ea1bf9646c", "author": {"user": {"login": "hmottestad", "name": null}}, "url": "https://github.com/eclipse/rdf4j/commit/9d770dc3d31e50d376b12ed613aaf8ea1bf9646c", "committedDate": "2020-04-09T14:40:16Z", "message": "GH-2078 added more test cases\n\nSigned-off-by: Ha\u030avard Ottestad <hmottestad@gmail.com>"}, "afterCommit": {"oid": "e3980577f68bbadbd831a917815dc27b25db685b", "author": {"user": {"login": "hmottestad", "name": null}}, "url": "https://github.com/eclipse/rdf4j/commit/e3980577f68bbadbd831a917815dc27b25db685b", "committedDate": "2020-04-10T10:37:59Z", "message": "GH-2078 added more test cases\n\nSigned-off-by: Ha\u030avard Ottestad <hmottestad@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e3980577f68bbadbd831a917815dc27b25db685b", "author": {"user": {"login": "hmottestad", "name": null}}, "url": "https://github.com/eclipse/rdf4j/commit/e3980577f68bbadbd831a917815dc27b25db685b", "committedDate": "2020-04-10T10:37:59Z", "message": "GH-2078 added more test cases\n\nSigned-off-by: Ha\u030avard Ottestad <hmottestad@gmail.com>"}, "afterCommit": {"oid": "57d890755fcf968df4cd87e9d8b75fa8c70c291a", "author": {"user": {"login": "hmottestad", "name": null}}, "url": "https://github.com/eclipse/rdf4j/commit/57d890755fcf968df4cd87e9d8b75fa8c70c291a", "committedDate": "2020-04-10T10:41:32Z", "message": "GH-2078 added more test cases\n\nSigned-off-by: Ha\u030avard Ottestad <hmottestad@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "57d890755fcf968df4cd87e9d8b75fa8c70c291a", "author": {"user": {"login": "hmottestad", "name": null}}, "url": "https://github.com/eclipse/rdf4j/commit/57d890755fcf968df4cd87e9d8b75fa8c70c291a", "committedDate": "2020-04-10T10:41:32Z", "message": "GH-2078 added more test cases\n\nSigned-off-by: Ha\u030avard Ottestad <hmottestad@gmail.com>"}, "afterCommit": {"oid": "14cb209768c74b5fdcf1bd200d7e70b2020f9653", "author": {"user": {"login": "hmottestad", "name": null}}, "url": "https://github.com/eclipse/rdf4j/commit/14cb209768c74b5fdcf1bd200d7e70b2020f9653", "committedDate": "2020-04-10T10:44:54Z", "message": "GH-2078 added more test cases\n\nSigned-off-by: Ha\u030avard Ottestad <hmottestad@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d3947afc50973c69d61d7c1d45e3f380da00599", "author": {"user": {"login": "hmottestad", "name": null}}, "url": "https://github.com/eclipse/rdf4j/commit/1d3947afc50973c69d61d7c1d45e3f380da00599", "committedDate": "2020-04-10T10:52:17Z", "message": "GH-2078 create specific tests for two bugs and fix one bug\n\nSigned-off-by: Ha\u030avard Ottestad <hmottestad@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "716168769e238bfd463b59b30f03cfcfa5d0f1ae", "author": {"user": {"login": "hmottestad", "name": null}}, "url": "https://github.com/eclipse/rdf4j/commit/716168769e238bfd463b59b30f03cfcfa5d0f1ae", "committedDate": "2020-04-10T10:56:11Z", "message": "GH-2078 fix handling of inverted negated property set\n\n- added test cases to ComplexSPARQLQueryTest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "98b40d6e59c2c695cc5be8db20f632ccaaacad63", "author": {"user": {"login": "jeenbroekstra", "name": "Jeen Broekstra"}}, "url": "https://github.com/eclipse/rdf4j/commit/98b40d6e59c2c695cc5be8db20f632ccaaacad63", "committedDate": "2020-04-10T10:56:11Z", "message": "GH-2078 corner case where inverted path element is part of longer\nsequence"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "44e63678beb9ebc901a333ef4de64feff45e144d", "author": {"user": {"login": "hmottestad", "name": null}}, "url": "https://github.com/eclipse/rdf4j/commit/44e63678beb9ebc901a333ef4de64feff45e144d", "committedDate": "2020-04-10T10:56:11Z", "message": "GH-2078 added more test cases\n\nSigned-off-by: Ha\u030avard Ottestad <hmottestad@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "14cb209768c74b5fdcf1bd200d7e70b2020f9653", "author": {"user": {"login": "hmottestad", "name": null}}, "url": "https://github.com/eclipse/rdf4j/commit/14cb209768c74b5fdcf1bd200d7e70b2020f9653", "committedDate": "2020-04-10T10:44:54Z", "message": "GH-2078 added more test cases\n\nSigned-off-by: Ha\u030avard Ottestad <hmottestad@gmail.com>"}, "afterCommit": {"oid": "44e63678beb9ebc901a333ef4de64feff45e144d", "author": {"user": {"login": "hmottestad", "name": null}}, "url": "https://github.com/eclipse/rdf4j/commit/44e63678beb9ebc901a333ef4de64feff45e144d", "committedDate": "2020-04-10T10:56:11Z", "message": "GH-2078 added more test cases\n\nSigned-off-by: Ha\u030avard Ottestad <hmottestad@gmail.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 32, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}