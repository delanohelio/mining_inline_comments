{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI0MDg0MDYz", "number": 2281, "title": "GH-1079 INLINE_BLANK_NODES-lose-bnode", "bodyText": "Signed-off-by: Mirr99 mihir17166@iiitd.ac.in\nGitHub issue resolved: #1079\nBriefly describe the changes proposed in this PR:\n\nAdded a function call to queueBlankStatements(SubjectInContext key) to ensure that the statements related to a repeated BNode are also written.\n\nPlease let me know if a test case is required.", "createdAt": "2020-05-27T19:58:48Z", "url": "https://github.com/eclipse/rdf4j/pull/2281", "merged": true, "mergeCommit": {"oid": "b1c7cc140d6535ecd68ee1729e76a4a938af1de6"}, "closed": true, "closedAt": "2020-05-30T01:25:07Z", "author": {"login": "Mirr99"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcld817gH2gAyNDI0MDg0MDYzOjZhM2Q2MGIyMjZlMDYyMWQxNzA2MmMwNzY1YzJlODlhZmNhNzY4YmY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcmMuV6gFqTQyMTM2NTU0Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6a3d60b226e0621d17062c0765c2e89afca768bf", "author": {"user": {"login": "Mirr99", "name": null}}, "url": "https://github.com/eclipse/rdf4j/commit/6a3d60b226e0621d17062c0765c2e89afca768bf", "committedDate": "2020-05-27T18:54:59Z", "message": "GH-1079 INLINE_BLANK_NODES-lose-bnode\n\nSigned-off-by: Mirr99 <mihir17166@iiitd.ac.in>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0a0483df62c46676940789d93fd8fa837efdc77f", "author": {"user": {"login": "Mirr99", "name": null}}, "url": "https://github.com/eclipse/rdf4j/commit/0a0483df62c46676940789d93fd8fa837efdc77f", "committedDate": "2020-05-28T05:01:50Z", "message": "GH-1079 test case added\n\nSigned-off-by: Mirr99 <mihir17166@iiitd.ac.in>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5OTA1Nzkz", "url": "https://github.com/eclipse/rdf4j/pull/2281#pullrequestreview-419905793", "createdAt": "2020-05-28T08:51:46Z", "commit": {"oid": "0a0483df62c46676940789d93fd8fa837efdc77f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwODo1MTo0NlrOGbrwfw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwODo1MTo0NlrOGbrwfw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTY4MTY2Mw==", "bodyText": "I like the structure of the test, but I'm not sure I agree that the expected output is correct - see also the comment I left on the issue.", "url": "https://github.com/eclipse/rdf4j/pull/2281#discussion_r431681663", "createdAt": "2020-05-28T08:51:46Z", "author": {"login": "jeenbroekstra"}, "path": "core/rio/turtle/src/test/java/org/eclipse/rdf4j/rio/turtle/ArrangedWriterTest.java", "diffHunk": "@@ -70,6 +81,38 @@ public void testWriteSingleStatementWithSubjectNamespace() {\n \t\tassertEquals(expectedResult, outputWriter.toString());\n \t}\n \n+\t@Test\n+\tpublic void testWriteRepeatedInlineBlankNode() {\n+\t\tModel model = new ModelBuilder().subject(exNs + \"subject\")\n+\t\t\t\t.add(vf.createIRI(exNs, \"rel1\"), bnode)\n+\t\t\t\t.add(vf.createIRI(exNs, \"rel2\"), bnode)\n+\t\t\t\t.subject(bnode)\n+\t\t\t\t.add(RDFS.LABEL, \"the bnode\")\n+\t\t\t\t.build();\n+\n+\t\tmodel.setNamespace(RDFS.NS);\n+\t\tmodel.setNamespace(\"ex\", exNs);\n+\n+\t\tStringWriter stringWriter = new StringWriter();\n+\t\tBufferedWriter writer = new BufferedWriter(stringWriter);\n+\t\tWriterConfig config = new WriterConfig();\n+\t\tconfig.set(BasicWriterSettings.INLINE_BLANK_NODES, true);\n+\t\tRio.write(model, writer, RDFFormat.TURTLE, config);\n+\n+\t\tString sep = System.lineSeparator();\n+\t\tString expectedResult = \"@prefix ex: <http://example.org/> .\" + sep +\n+\t\t\t\t\"@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .\" + sep +\n+\t\t\t\t\"@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .\" + sep + sep +\n+\t\t\t\t\"ex:subject ex:rel1 [\" + sep +\n+\t\t\t\t\"      rdfs:label \\\"the bnode\\\"\" + sep +\n+\t\t\t\t\"    ];\" + sep +\n+\t\t\t\t\"  ex:rel2 [\" + sep +\n+\t\t\t\t\"      rdfs:label \\\"the bnode\\\"\" + sep +\n+\t\t\t\t\"    ] .\" + sep;\n+\n+\t\tassertEquals(expectedResult, stringWriter.toString());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0a0483df62c46676940789d93fd8fa837efdc77f"}, "originalPosition": 72}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a11291df8b0c282139d1a5a666cdbe3655fbe760", "author": {"user": {"login": "Mirr99", "name": null}}, "url": "https://github.com/eclipse/rdf4j/commit/a11291df8b0c282139d1a5a666cdbe3655fbe760", "committedDate": "2020-05-28T11:29:56Z", "message": "GH-1079 No inlining for repeated BNode\n\nSigned-off-by: Mirr99 <mihir17166@iiitd.ac.in>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxMzY1NTQ3", "url": "https://github.com/eclipse/rdf4j/pull/2281#pullrequestreview-421365547", "createdAt": "2020-05-30T01:24:41Z", "commit": {"oid": "a11291df8b0c282139d1a5a666cdbe3655fbe760"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 116, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}