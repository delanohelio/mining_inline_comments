{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY4MTQ5OTEw", "number": 1884, "title": "GH-1882: basic support for property path in FedX engine", "bodyText": "GitHub issue resolved: #1882\nThis change adds basic support for property paths in the federation\nengine.\nExample patterns:\n\n?subClass rdfs:subClassOf/rdfs:label ?label\n?class rdfs:subClassOf+ ?class\n?concept rdfs:label|skos:altLabel ?label\n\nNote that some adjustments to queryalgebra PathIteration were required:\n\nas in FedX we generate SPARQL query strings, variables must not\ncontain the \"-\" character (which is invalid for SPARQL queries). This\ncharacter is replaced with _\nin the FedX engine we are not seeing \"QueryBindingSet\" instances, but\n\"MapBindingSet\" instances. The addBinding method is made robust to\nsupport both instance types\nin remote settings we even see ListBindingSet. In the check we make\nsure to convert the BindingSet instance if required\n\nNote also that the cost model estimation now only shows a warning if the\ntype of the node is unknown.", "createdAt": "2020-01-28T17:55:52Z", "url": "https://github.com/eclipse/rdf4j/pull/1884", "merged": true, "mergeCommit": {"oid": "9e7acff64e73176739e3e03fda07fb3600dc652e"}, "closed": true, "closedAt": "2020-01-29T07:25:44Z", "author": {"login": "aschwarte10"}, "timelineItems": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb-1JkLgH2gAyMzY4MTQ5OTEwOjkzMmEwMzZmODhjYWFjNjU2OWUzYTM0MmM4N2IwOGNjZTFmZDFkZDc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb--AM1AFqTM0OTg1MTgxMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "932a036f88caac6569e3a342c87b08cce1fd1dd7", "author": {"user": {"login": "aschwarte10", "name": "Andreas Schwarte"}}, "url": "https://github.com/eclipse/rdf4j/commit/932a036f88caac6569e3a342c87b08cce1fd1dd7", "committedDate": "2020-01-28T17:53:39Z", "message": "GH-1882: basic support for property path in FedX engine\n\nThis change adds basic support for property paths in the federation\nengine.\n\nExample patterns:\n\n* ?subClass rdfs:subClassOf/rdfs:label ?label\n* ?class rdfs:subClassOf+ ?class\n* ?concept rdfs:label|skos:altLabel ?label\n\nNote that some adjustments to queryalgebra PathIteration were required:\n\n* as in FedX we generate SPARQL query strings, variables must not\ncontain the \"-\" character (which is invalid for SPARQL queries). This\ncharacter is replaced with _\n* in the FedX engine we are not seeing \"QueryBindingSet\" instances, but\n\"MapBindingSet\" instances. The addBinding method is made robust to\nsupport both instance types\n* in remote settings we even see ListBindingSet. In the check we make\nsure to convert the BindingSet instance if required\n\nNote also that the cost model estimation now only shows a warning if the\ntype of the node is unknown."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5ODUxODEy", "url": "https://github.com/eclipse/rdf4j/pull/1884#pullrequestreview-349851812", "createdAt": "2020-01-29T04:12:20Z", "commit": {"oid": "932a036f88caac6569e3a342c87b08cce1fd1dd7"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQwNDoxMjoyMFrOFi8GhQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQwNDoxMjoyMFrOFi8GhQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjE4MDYxMw==", "bodyText": "FWIW I have long thought that we are using the various bindingset implementations inconsistently throughout the framework. It could do with straightening out.", "url": "https://github.com/eclipse/rdf4j/pull/1884#discussion_r372180613", "createdAt": "2020-01-29T04:12:20Z", "author": {"login": "jeenbroekstra"}, "path": "core/queryalgebra/evaluation/src/main/java/org/eclipse/rdf4j/query/algebra/evaluation/iterator/PathIteration.java", "diffHunk": "@@ -190,6 +195,16 @@ protected BindingSet getNextElement() throws QueryEvaluationException {\n \t\t}\n \t}\n \n+\tprivate void addBinding(BindingSet bs, String name, Value value) {\n+\t\tif (bs instanceof QueryBindingSet) {\n+\t\t\t((QueryBindingSet) bs).addBinding(name, value);\n+\t\t} else if (bs instanceof MapBindingSet) {\n+\t\t\t((MapBindingSet) bs).addBinding(name, value);\n+\t\t} else {\n+\t\t\tthrow new IllegalStateException(\"Unexpected BindingSet implementation: \" + bs.getClass());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "932a036f88caac6569e3a342c87b08cce1fd1dd7"}, "originalPosition": 81}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 60, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}