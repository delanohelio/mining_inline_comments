{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAyODgxMjAz", "number": 2088, "title": "GH-2085 naive implementation of RDFStarTripleSource for memory store", "bodyText": "GitHub issue resolved: #2085 \nBriefly describe the changes proposed in this PR:\n\nThis enables SPARQL* querying on in-memory stores.\n\nadded getTriples to SailDataset and related classes\nadded implementation to SailDatasetTripleSource (which is used by memory store and native store)\nadded memory store specific triple iterator\n\n\nPR Author Checklist:\n\n my pull request is self-contained\n I've added tests for the changes I made\n every commit message starts with the issue number (GH-xxxx) followed by a meaningful description of the change\n every commit has been signed off\n\nNote: we merge all feature pull requests using squash and merge. See RDF4J git merge strategy for more details.", "createdAt": "2020-04-13T22:59:16Z", "url": "https://github.com/eclipse/rdf4j/pull/2088", "merged": true, "mergeCommit": {"oid": "a4add8a060c987639527cb9399d12f4427f51589"}, "closed": true, "closedAt": "2020-04-19T02:03:57Z", "author": {"login": "jeenbroekstra"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcXXAUHAH2gAyNDAyODgxMjAzOjQzOTQzYjE1YTliODhhZDdiZWU5NzUzYjExMDAxNTVlOTFkNjIwYTA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcXyX1xAH2gAyNDAyODgxMjAzOmIwNDllOTg3ZDQzYjg4YjMzYjM5MjMwNTVlZGQ4OTU5NjQxZWE2MDg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "43943b15a9b88ad7bee9753b1100155e91d620a0", "author": {"user": {"login": "jeenbroekstra", "name": "Jeen Broekstra"}}, "url": "https://github.com/eclipse/rdf4j/commit/43943b15a9b88ad7bee9753b1100155e91d620a0", "committedDate": "2020-04-13T22:54:30Z", "message": "GH-2085 naive implementation of RDFStarTripleSource for memory store"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "15f38a245792a831c527d37fb85644697c26a82d", "author": {"user": {"login": "jeenbroekstra", "name": "Jeen Broekstra"}}, "url": "https://github.com/eclipse/rdf4j/commit/15f38a245792a831c527d37fb85644697c26a82d", "committedDate": "2020-04-14T01:46:28Z", "message": "code formatting and javadoc cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d2bbabe89c1fb2f68c380f163c69b86f252a20d5", "author": {"user": {"login": "jeenbroekstra", "name": "Jeen Broekstra"}}, "url": "https://github.com/eclipse/rdf4j/commit/d2bbabe89c1fb2f68c380f163c69b86f252a20d5", "committedDate": "2020-04-14T02:04:49Z", "message": "GH-2085 default implementation for stores that do not support RDF*"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1605ffbb10fd16bd41bee590b614486a0ab92a5d", "author": {"user": {"login": "jeenbroekstra", "name": "Jeen Broekstra"}}, "url": "https://github.com/eclipse/rdf4j/commit/1605ffbb10fd16bd41bee590b614486a0ab92a5d", "committedDate": "2020-04-15T01:39:47Z", "message": "GH-2085 added simple SPARQL* query test case"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzNDA0MDMx", "url": "https://github.com/eclipse/rdf4j/pull/2088#pullrequestreview-393404031", "createdAt": "2020-04-15T01:44:10Z", "commit": {"oid": "1605ffbb10fd16bd41bee590b614486a0ab92a5d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQwMTo0NDoxMFrOGFm1bg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQwMTo0NDoxMFrOGFm1bg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODUzMjMzNA==", "bodyText": "FWIW I need to take a closer look at this to make sure, but it's possible that we don't need to handle this here, because it will be filtered out higher up the chain (when statements that use these triples as either subject or object are retrieved).", "url": "https://github.com/eclipse/rdf4j/pull/2088#discussion_r408532334", "createdAt": "2020-04-15T01:44:10Z", "author": {"login": "jeenbroekstra"}, "path": "core/sail/base/src/main/java/org/eclipse/rdf4j/sail/base/SailDatasetImpl.java", "diffHunk": "@@ -285,6 +286,39 @@ public void handleClose() throws SailException {\n \t\t}\n \t}\n \n+\t@Override\n+\tpublic CloseableIteration<? extends Triple, SailException> getTriples(Resource subj, IRI pred, Value obj)\n+\t\t\tthrows SailException {\n+\t\tCloseableIteration<? extends Triple, SailException> iter;\n+\t\tif (changes.isStatementCleared()) {\n+\t\t\titer = null;\n+\t\t} else {\n+\t\t\titer = derivedFrom.getTriples(subj, pred, obj);\n+\t\t}\n+\n+\t\tif (iter == null) {\n+\t\t\treturn new EmptyIteration<>();\n+\t\t}\n+\t\treturn iter; // TODO we will need to figure out a way to handle transaction isolation with deprecated and\n+\t\t\t\t\t\t// approved data", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1605ffbb10fd16bd41bee590b614486a0ab92a5d"}, "originalPosition": 26}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "789e15e0b39bf20c798c8f1c3a904cc10f609191", "author": {"user": {"login": "jeenbroekstra", "name": "Jeen Broekstra"}}, "url": "https://github.com/eclipse/rdf4j/commit/789e15e0b39bf20c798c8f1c3a904cc10f609191", "committedDate": "2020-04-15T06:17:52Z", "message": "GH-2085 ensure source triple iteration is wrapped to handle close"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b049e987d43b88b33b3923055edd8959641ea608", "author": {"user": {"login": "jeenbroekstra", "name": "Jeen Broekstra"}}, "url": "https://github.com/eclipse/rdf4j/commit/b049e987d43b88b33b3923055edd8959641ea608", "committedDate": "2020-04-15T06:47:38Z", "message": "GH-2085 filter out triples that do not match the extValue"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 34, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}