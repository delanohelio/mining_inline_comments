{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY1MTExNDcx", "number": 2433, "title": "GH-2431 all benchmarks now have a main, and a fat jar", "bodyText": "GitHub issue resolved: #2431 \nBriefly describe the changes proposed in this PR:\n\nmain method makes direct execution from IDE possible\nfat jar (target/jmh-benchmark.jar) makes command line execution\npossible\n\nto run benchmarks from command line (example: memory store benchmarks):\n\ncd core/sail/memory\nmvn package -Pquick\njava -jar target/jmh-benchmarks.jar MemoryBenchmark.load (to run the specific load benchmark test).\n\nTo run from Eclipse, you can right-click on the benchmark and select \"Run as Java application\". Occassionally you may need to run a mvn clean install beforehand to make this work. Adapt the OptionBuilder in the benchmark's main class to control which exact benchmark tests get run.\n\nPR Author Checklist (see the contributor guidelines for more details):\n\n my pull request is self-contained\n I've added tests for the changes I made\n I've applied code formatting (you can use mvn process-resources to format from the command line)\n every commit message starts with the issue number (GH-xxxx) followed by a meaningful description of the change\n every commit has been signed off\n\nNote: we merge all feature pull requests using squash and merge. See RDF4J git merge strategy for more details.", "createdAt": "2020-08-09T05:54:52Z", "url": "https://github.com/eclipse/rdf4j/pull/2433", "merged": true, "mergeCommit": {"oid": "17c1b12aa083f5513fb29975dcf10db9d50f892b"}, "closed": true, "closedAt": "2020-08-11T08:51:31Z", "author": {"login": "jeenbroekstra"}, "timelineItems": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc9G5-YgH2gAyNDY1MTExNDcxOmEwZGI2MTVkMTUwNDM4MDhmMzcyOGVhNTY5YzA4NTRiMmIzNjM5ZGE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc9Ltk6AFqTQ2Mzg2NDg2Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a0db615d15043808f3728ea569c0854b2b3639da", "author": {"user": {"login": "jeenbroekstra", "name": "Jeen Broekstra"}}, "url": "https://github.com/eclipse/rdf4j/commit/a0db615d15043808f3728ea569c0854b2b3639da", "committedDate": "2020-08-09T05:38:13Z", "message": "GH-2431 all benchmarks now have a main, and a fat jar\n\n- main method makes direct execution from IDE possible\n- fat jar (target/jmh-benchmark.jar) makes command line execution\npossible"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzODY0ODY3", "url": "https://github.com/eclipse/rdf4j/pull/2433#pullrequestreview-463864867", "createdAt": "2020-08-09T11:12:31Z", "commit": {"oid": "a0db615d15043808f3728ea569c0854b2b3639da"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOVQxMToxMjozMlrOG96N5g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOVQxMToxMzo1M1rOG96Onw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU3MDE1MA==", "bodyText": "Btw. The stack profiler is terrible. It's more often than not gives the wrong results because it only benchmarks safe points. 20 stack lines is also a bit little. I think you need a hundred or maybe more.\nI just Java Flight Recorder for profiling.", "url": "https://github.com/eclipse/rdf4j/pull/2433#discussion_r467570150", "createdAt": "2020-08-09T11:12:32Z", "author": {"login": "hmottestad"}, "path": "core/sail/memory/src/test/java/org/eclipse/rdf4j/sail/memory/benchmark/MemoryBenchmark.java", "diffHunk": "@@ -45,6 +49,16 @@\n \n \tprivate List<Statement> statementList = getStatements();\n \n+\tpublic static void main(String[] args) throws RunnerException {\n+\t\tOptions opt = new OptionsBuilder()\n+\t\t\t\t.include(\"MemoryBenchmark.load\") // adapt to run other benchmark tests\n+\t\t\t\t// .addProfiler(\"stack\", \"lines=20;period=1;top=20\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a0db615d15043808f3728ea569c0854b2b3639da"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU3MDMzNQ==", "bodyText": "I also noticed that you added main methods to each file. I'll have to try with IntelliJ to see if it doesn't mess up the plugins detection of what to run. I'm away from my computer for a week now, so just merge it and I'll give it a go sometime later. \ufffc", "url": "https://github.com/eclipse/rdf4j/pull/2433#discussion_r467570335", "createdAt": "2020-08-09T11:13:53Z", "author": {"login": "hmottestad"}, "path": "core/sail/memory/src/test/java/org/eclipse/rdf4j/sail/memory/benchmark/QueryBenchmark.java", "diffHunk": "@@ -68,6 +72,16 @@\n \n \tList<Statement> statementList;\n \n+\tpublic static void main(String[] args) throws RunnerException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a0db615d15043808f3728ea569c0854b2b3639da"}, "originalPosition": 15}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 89, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}