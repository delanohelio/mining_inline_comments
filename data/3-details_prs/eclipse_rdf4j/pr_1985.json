{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg1MzM2OTY2", "number": 1985, "title": "GH-1960 treat commit as no-op if no updates in the txn", "bodyText": "GitHub issue resolved: #1960 \nBriefly describe the changes proposed in this PR:\n\ncheck if transaction string is not empty before sending update\nadded regression test", "createdAt": "2020-03-09T00:49:46Z", "url": "https://github.com/eclipse/rdf4j/pull/1985", "merged": true, "mergeCommit": {"oid": "f0b1e96e04d3758534e72d375968d4321d70f4e3"}, "closed": true, "closedAt": "2020-03-10T07:48:55Z", "author": {"login": "jeenbroekstra"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcL6FzggFqTM3MDk5ODYzNg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcMF7sZABqjMxMTI2NTc2NDE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwOTk4NjM2", "url": "https://github.com/eclipse/rdf4j/pull/1985#pullrequestreview-370998636", "createdAt": "2020-03-09T09:00:05Z", "commit": {"oid": "5955bfb3ab8c87cdf7e32d4c4f42c5a49cb18c77"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQwOTowMDowNVrOFzfBnA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQwOTowMDowNVrOFzfBnA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTUzMDAxMg==", "bodyText": "Would be nice if you could add a comment here.\n// empty transactions commit as no-op, some SPARQL endpoints don't handle empty transactions", "url": "https://github.com/eclipse/rdf4j/pull/1985#discussion_r389530012", "createdAt": "2020-03-09T09:00:05Z", "author": {"login": "hmottestad"}, "path": "core/repository/sparql/src/main/java/org/eclipse/rdf4j/repository/sparql/SPARQLConnection.java", "diffHunk": "@@ -391,11 +392,13 @@ public void commit() throws RepositoryException {\n \t\tsynchronized (transactionLock) {\n \t\t\tif (isActive()) {\n \t\t\t\tsynchronized (transactionLock) {\n-\t\t\t\t\tSPARQLUpdate transaction = new SPARQLUpdate(client, null, sparqlTransaction.toString());\n-\t\t\t\t\ttry {\n-\t\t\t\t\t\ttransaction.execute();\n-\t\t\t\t\t} catch (UpdateExecutionException e) {\n-\t\t\t\t\t\tthrow new RepositoryException(\"error executing transaction\", e);\n+\t\t\t\t\tif (sparqlTransaction.length() > 0) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5955bfb3ab8c87cdf7e32d4c4f42c5a49cb18c77"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "802b4cb09c4dd60c20e3246e535f1fabe75624fd", "author": {"user": {"login": "jeenbroekstra", "name": "Jeen Broekstra"}}, "url": "https://github.com/eclipse/rdf4j/commit/802b4cb09c4dd60c20e3246e535f1fabe75624fd", "committedDate": "2020-03-09T22:46:47Z", "message": "GH-1960 treat commit as no-op if no updates in the txn\n\n- check if txn string has content before sending update\n- added regression test\n- minor refactor: use StringBuilder instead of StringBuffer"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5955bfb3ab8c87cdf7e32d4c4f42c5a49cb18c77", "author": {"user": {"login": "jeenbroekstra", "name": "Jeen Broekstra"}}, "url": "https://github.com/eclipse/rdf4j/commit/5955bfb3ab8c87cdf7e32d4c4f42c5a49cb18c77", "committedDate": "2020-03-09T00:46:50Z", "message": "GH-1960 treat commit as no-op if no updates in the txn"}, "afterCommit": {"oid": "802b4cb09c4dd60c20e3246e535f1fabe75624fd", "author": {"user": {"login": "jeenbroekstra", "name": "Jeen Broekstra"}}, "url": "https://github.com/eclipse/rdf4j/commit/802b4cb09c4dd60c20e3246e535f1fabe75624fd", "committedDate": "2020-03-09T22:46:47Z", "message": "GH-1960 treat commit as no-op if no updates in the txn\n\n- check if txn string has content before sending update\n- added regression test\n- minor refactor: use StringBuilder instead of StringBuffer"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4997, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}