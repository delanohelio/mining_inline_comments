{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM0MTk1NTgx", "number": 2316, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNFQyMzoyODozNVrOEFWx_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNFQyMzoyODozNVrOEFWx_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0MDUxNTgxOnYy", "diffSide": "RIGHT", "path": "core/rio/turtle/src/main/java/org/eclipse/rdf4j/rio/turtle/TurtleParser.java", "isResolved": false, "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNFQyMzoyODozNVrOGjgDPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxNjoyNTo1MFrOGkjbQQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTg3ODQ2MA==", "bodyText": "Good catch, thanks!", "url": "https://github.com/eclipse/rdf4j/pull/2316#discussion_r439878460", "createdAt": "2020-06-14T23:28:35Z", "author": {"login": "jeenbroekstra"}, "path": "core/rio/turtle/src/main/java/org/eclipse/rdf4j/rio/turtle/TurtleParser.java", "diffHunk": "@@ -1254,13 +1254,16 @@ protected void unread(int codePoint) throws IOException {\n \t * @throws IOException\n \t */\n \tprotected void unread(String string) throws IOException {\n-\t\tfor (int i = string.codePointCount(0, string.length()); i >= 1; i--) {\n+\t\tint i = string.codePointCount(0, string.length());\n+\t\twhile ( i > 0 ) {\n \t\t\tfinal int codePoint = string.codePointBefore(i);\n \t\t\tif (Character.isSupplementaryCodePoint(codePoint)) {\n \t\t\t\tfinal char[] surrogatePair = Character.toChars(codePoint);\n \t\t\t\treader.unread(surrogatePair);\n+\t\t\t\ti -= surrogatePair.length();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19e94e7614be73267a7e43a7aeac364167ca34c6"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDI5NTQyMg==", "bodyText": "@jeenbroekstra I added a test, which sadly shows this still fail, and fix was not enough.\nI'm not sure where the problem lies. Also not sure If I'll have time to continue debugging this.\nWill you be able to take this from here?", "url": "https://github.com/eclipse/rdf4j/pull/2316#discussion_r440295422", "createdAt": "2020-06-15T16:21:52Z", "author": {"login": "hochgi"}, "path": "core/rio/turtle/src/main/java/org/eclipse/rdf4j/rio/turtle/TurtleParser.java", "diffHunk": "@@ -1254,13 +1254,16 @@ protected void unread(int codePoint) throws IOException {\n \t * @throws IOException\n \t */\n \tprotected void unread(String string) throws IOException {\n-\t\tfor (int i = string.codePointCount(0, string.length()); i >= 1; i--) {\n+\t\tint i = string.codePointCount(0, string.length());\n+\t\twhile ( i > 0 ) {\n \t\t\tfinal int codePoint = string.codePointBefore(i);\n \t\t\tif (Character.isSupplementaryCodePoint(codePoint)) {\n \t\t\t\tfinal char[] surrogatePair = Character.toChars(codePoint);\n \t\t\t\treader.unread(surrogatePair);\n+\t\t\t\ti -= surrogatePair.length();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTg3ODQ2MA=="}, "originalCommit": {"oid": "19e94e7614be73267a7e43a7aeac364167ca34c6"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQ5MzI1MQ==", "bodyText": "No problem - though can you still make sure you sign the ECA so we can continue from your work? Otherwise, I'm afraid we'll have to drop this and start from scratch.", "url": "https://github.com/eclipse/rdf4j/pull/2316#discussion_r440493251", "createdAt": "2020-06-15T23:02:54Z", "author": {"login": "jeenbroekstra"}, "path": "core/rio/turtle/src/main/java/org/eclipse/rdf4j/rio/turtle/TurtleParser.java", "diffHunk": "@@ -1254,13 +1254,16 @@ protected void unread(int codePoint) throws IOException {\n \t * @throws IOException\n \t */\n \tprotected void unread(String string) throws IOException {\n-\t\tfor (int i = string.codePointCount(0, string.length()); i >= 1; i--) {\n+\t\tint i = string.codePointCount(0, string.length());\n+\t\twhile ( i > 0 ) {\n \t\t\tfinal int codePoint = string.codePointBefore(i);\n \t\t\tif (Character.isSupplementaryCodePoint(codePoint)) {\n \t\t\t\tfinal char[] surrogatePair = Character.toChars(codePoint);\n \t\t\t\treader.unread(surrogatePair);\n+\t\t\t\ti -= surrogatePair.length();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTg3ODQ2MA=="}, "originalCommit": {"oid": "19e94e7614be73267a7e43a7aeac364167ca34c6"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQ5NDk2OA==", "bodyText": "@hochgi Oh hang, I see you've signed off and that your ECA has been completed as well, so that's all good.\nIt's currently failing because this PR also contains a commit by @elad-shaked, who has signed off, but their e-mail address (elad.shaked @ sparkbeyond.com) is not recognized by the ECA verifier. @elad-shaked if you could sign the ECA that'd be great. Otherwise, since your commit is only formatting-related related, I can work around it by cherrypicking the other fixes onto a new branch.", "url": "https://github.com/eclipse/rdf4j/pull/2316#discussion_r440494968", "createdAt": "2020-06-15T23:08:39Z", "author": {"login": "jeenbroekstra"}, "path": "core/rio/turtle/src/main/java/org/eclipse/rdf4j/rio/turtle/TurtleParser.java", "diffHunk": "@@ -1254,13 +1254,16 @@ protected void unread(int codePoint) throws IOException {\n \t * @throws IOException\n \t */\n \tprotected void unread(String string) throws IOException {\n-\t\tfor (int i = string.codePointCount(0, string.length()); i >= 1; i--) {\n+\t\tint i = string.codePointCount(0, string.length());\n+\t\twhile ( i > 0 ) {\n \t\t\tfinal int codePoint = string.codePointBefore(i);\n \t\t\tif (Character.isSupplementaryCodePoint(codePoint)) {\n \t\t\t\tfinal char[] surrogatePair = Character.toChars(codePoint);\n \t\t\t\treader.unread(surrogatePair);\n+\t\t\t\ti -= surrogatePair.length();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTg3ODQ2MA=="}, "originalCommit": {"oid": "19e94e7614be73267a7e43a7aeac364167ca34c6"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDYwMDkzNA==", "bodyText": "as per @elad-shaked's request I just squashed his changes into mine.", "url": "https://github.com/eclipse/rdf4j/pull/2316#discussion_r440600934", "createdAt": "2020-06-16T05:51:48Z", "author": {"login": "hochgi"}, "path": "core/rio/turtle/src/main/java/org/eclipse/rdf4j/rio/turtle/TurtleParser.java", "diffHunk": "@@ -1254,13 +1254,16 @@ protected void unread(int codePoint) throws IOException {\n \t * @throws IOException\n \t */\n \tprotected void unread(String string) throws IOException {\n-\t\tfor (int i = string.codePointCount(0, string.length()); i >= 1; i--) {\n+\t\tint i = string.codePointCount(0, string.length());\n+\t\twhile ( i > 0 ) {\n \t\t\tfinal int codePoint = string.codePointBefore(i);\n \t\t\tif (Character.isSupplementaryCodePoint(codePoint)) {\n \t\t\t\tfinal char[] surrogatePair = Character.toChars(codePoint);\n \t\t\t\treader.unread(surrogatePair);\n+\t\t\t\ti -= surrogatePair.length();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTg3ODQ2MA=="}, "originalCommit": {"oid": "19e94e7614be73267a7e43a7aeac364167ca34c6"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDkxNjM2OA==", "bodyText": "@jeenbroekstra just committed a fix suggested by @elad-shaked, and this seems to work \ud83d\udc4d", "url": "https://github.com/eclipse/rdf4j/pull/2316#discussion_r440916368", "createdAt": "2020-06-16T14:55:57Z", "author": {"login": "hochgi"}, "path": "core/rio/turtle/src/main/java/org/eclipse/rdf4j/rio/turtle/TurtleParser.java", "diffHunk": "@@ -1254,13 +1254,16 @@ protected void unread(int codePoint) throws IOException {\n \t * @throws IOException\n \t */\n \tprotected void unread(String string) throws IOException {\n-\t\tfor (int i = string.codePointCount(0, string.length()); i >= 1; i--) {\n+\t\tint i = string.codePointCount(0, string.length());\n+\t\twhile ( i > 0 ) {\n \t\t\tfinal int codePoint = string.codePointBefore(i);\n \t\t\tif (Character.isSupplementaryCodePoint(codePoint)) {\n \t\t\t\tfinal char[] surrogatePair = Character.toChars(codePoint);\n \t\t\t\treader.unread(surrogatePair);\n+\t\t\t\ti -= surrogatePair.length();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTg3ODQ2MA=="}, "originalCommit": {"oid": "19e94e7614be73267a7e43a7aeac364167ca34c6"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDk4MjMzNw==", "bodyText": "@jeenbroekstra running mvn test from core passes locally but fails in CI \ud83d\ude15", "url": "https://github.com/eclipse/rdf4j/pull/2316#discussion_r440982337", "createdAt": "2020-06-16T16:25:50Z", "author": {"login": "hochgi"}, "path": "core/rio/turtle/src/main/java/org/eclipse/rdf4j/rio/turtle/TurtleParser.java", "diffHunk": "@@ -1254,13 +1254,16 @@ protected void unread(int codePoint) throws IOException {\n \t * @throws IOException\n \t */\n \tprotected void unread(String string) throws IOException {\n-\t\tfor (int i = string.codePointCount(0, string.length()); i >= 1; i--) {\n+\t\tint i = string.codePointCount(0, string.length());\n+\t\twhile ( i > 0 ) {\n \t\t\tfinal int codePoint = string.codePointBefore(i);\n \t\t\tif (Character.isSupplementaryCodePoint(codePoint)) {\n \t\t\t\tfinal char[] surrogatePair = Character.toChars(codePoint);\n \t\t\t\treader.unread(surrogatePair);\n+\t\t\t\ti -= surrogatePair.length();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTg3ODQ2MA=="}, "originalCommit": {"oid": "19e94e7614be73267a7e43a7aeac364167ca34c6"}, "originalPosition": 11}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1428, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}