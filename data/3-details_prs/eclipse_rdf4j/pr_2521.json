{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkwNzA1NDkx", "number": 2521, "title": "GH-2479 repo config documentation", "bodyText": "GitHub issue resolved: #2479 \nBriefly describe the changes proposed in this PR:\n\nadded a new reference document on the syntax for configuration files of repositories and sails\nadded autonumbering for sections for easier reference\nsome general cleanup and updates around the site while I was at it.\n\nI deliberately left out the LuceneSail for now, because I was having trouble actually figuring out which parameters are supported and what the syntax should be. Worth a followup I guess - there's some archeology involved...\n\nPR Author Checklist (see the contributor guidelines for more details):\n\n my pull request is self-contained\n I've added tests for the changes I made\n I've applied code formatting (you can use mvn process-resources to format from the command line)\n every commit message starts with the issue number (GH-xxxx) followed by a meaningful description of the change\n every commit has been signed off\n\nNote: we merge all feature pull requests using squash and merge. See RDF4J git merge strategy for more details.", "createdAt": "2020-09-22T05:49:00Z", "url": "https://github.com/eclipse/rdf4j/pull/2521", "merged": true, "mergeCommit": {"oid": "f8ee154922950633614d4514892f21b65f90a04c"}, "closed": true, "closedAt": "2020-09-23T05:47:42Z", "author": {"login": "jeenbroekstra"}, "timelineItems": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdLR3bkABqjM3OTE2MzQ1NzE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdLhz6HAH2gAyNDkwNzA1NDkxOjg4NjYxNjZmMDU4ZTg0Y2NjOTA5ZDVkYjQxYWZmNTVjZDliNTFjZmI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9636e2bb76a7077881f9ed602d343f9faa661d28", "author": {"user": {"login": "jeenbroekstra", "name": "Jeen Broekstra"}}, "url": "https://github.com/eclipse/rdf4j/commit/9636e2bb76a7077881f9ed602d343f9faa661d28", "committedDate": "2020-09-22T05:45:40Z", "message": "GH-2479 finalized config doco and added numbered sections"}, "afterCommit": {"oid": "952f87e99a9eccda1aa3151d89e5ab7fde5cf95b", "author": {"user": {"login": "jeenbroekstra", "name": "Jeen Broekstra"}}, "url": "https://github.com/eclipse/rdf4j/commit/952f87e99a9eccda1aa3151d89e5ab7fde5cf95b", "committedDate": "2020-09-22T06:19:08Z", "message": "GH-2479 finalized config doco and added numbered sections"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzMTUyNjM2", "url": "https://github.com/eclipse/rdf4j/pull/2521#pullrequestreview-493152636", "createdAt": "2020-09-22T06:21:25Z", "commit": {"oid": "952f87e99a9eccda1aa3151d89e5ab7fde5cf95b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwNjoyMToyNVrOHVrlYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwNjoyMToyNVrOHVrlYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjQ5NjIyNQ==", "bodyText": "This page is the actual new content. Everything else in the diff is mostly about the numbered sections and/or minor editorial updates.", "url": "https://github.com/eclipse/rdf4j/pull/2521#discussion_r492496225", "createdAt": "2020-09-22T06:21:25Z", "author": {"login": "jeenbroekstra"}, "path": "site/content/documentation/reference/configuration.md", "diffHunk": "@@ -0,0 +1,458 @@\n+---\n+title: \"Repository and SAIL configuration\"\n+toc: true\n+weight: 4\n+autonumbering: true\n+---\n+\n+RDF4J repositories and SAIL configuration can be set up and changed by means of a configuration file in Turtle syntax. Here, we document the way the various components (repositories and SAILs) work together and how a full database configuration can be defined by \"stacking\" SAILs and wrapping in a Repository implementation.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "952f87e99a9eccda1aa3151d89e5ab7fde5cf95b"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1fb9c1f812aa7d4203622f23137513d905ee8e87", "author": {"user": {"login": "jeenbroekstra", "name": "Jeen Broekstra"}}, "url": "https://github.com/eclipse/rdf4j/commit/1fb9c1f812aa7d4203622f23137513d905ee8e87", "committedDate": "2020-09-22T07:01:54Z", "message": "GH-2479 new configuration reference document [WIP]"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "626e91d9f4edfe9bd26a5e512595a766f40ec8c1", "author": {"user": {"login": "jeenbroekstra", "name": "Jeen Broekstra"}}, "url": "https://github.com/eclipse/rdf4j/commit/626e91d9f4edfe9bd26a5e512595a766f40ec8c1", "committedDate": "2020-09-22T07:01:54Z", "message": "GH-2479 added more details on various sails"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "97f456c5aa08fc1663ce5d80cb2b6b34e159a72b", "author": {"user": {"login": "jeenbroekstra", "name": "Jeen Broekstra"}}, "url": "https://github.com/eclipse/rdf4j/commit/97f456c5aa08fc1663ce5d80cb2b6b34e159a72b", "committedDate": "2020-09-22T07:01:54Z", "message": "Less indentation for Table of Contents"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f12a40964e30487f887e13b876cd4b48aeed927", "author": {"user": {"login": "jeenbroekstra", "name": "Jeen Broekstra"}}, "url": "https://github.com/eclipse/rdf4j/commit/6f12a40964e30487f887e13b876cd4b48aeed927", "committedDate": "2020-09-22T07:01:54Z", "message": "GH-2479 FTS sails"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f3ac9db70ddbc9f385d984bbeb0a1fef72c5fff7", "author": {"user": {"login": "jeenbroekstra", "name": "Jeen Broekstra"}}, "url": "https://github.com/eclipse/rdf4j/commit/f3ac9db70ddbc9f385d984bbeb0a1fef72c5fff7", "committedDate": "2020-09-22T07:02:34Z", "message": "GH-2479 finalized config doco and added numbered sections"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "952f87e99a9eccda1aa3151d89e5ab7fde5cf95b", "author": {"user": {"login": "jeenbroekstra", "name": "Jeen Broekstra"}}, "url": "https://github.com/eclipse/rdf4j/commit/952f87e99a9eccda1aa3151d89e5ab7fde5cf95b", "committedDate": "2020-09-22T06:19:08Z", "message": "GH-2479 finalized config doco and added numbered sections"}, "afterCommit": {"oid": "f3ac9db70ddbc9f385d984bbeb0a1fef72c5fff7", "author": {"user": {"login": "jeenbroekstra", "name": "Jeen Broekstra"}}, "url": "https://github.com/eclipse/rdf4j/commit/f3ac9db70ddbc9f385d984bbeb0a1fef72c5fff7", "committedDate": "2020-09-22T07:02:34Z", "message": "GH-2479 finalized config doco and added numbered sections"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzMjQ4ODEw", "url": "https://github.com/eclipse/rdf4j/pull/2521#pullrequestreview-493248810", "createdAt": "2020-09-22T08:49:30Z", "commit": {"oid": "f3ac9db70ddbc9f385d984bbeb0a1fef72c5fff7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwODo0OTozMVrOHVwPPQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwODo0OTozMVrOHVwPPQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjU3MjQ3Nw==", "bodyText": "So java highlighting works now?", "url": "https://github.com/eclipse/rdf4j/pull/2521#discussion_r492572477", "createdAt": "2020-09-22T08:49:31Z", "author": {"login": "hmottestad"}, "path": "site/content/documentation/tutorials/sparqlbuilder.md", "diffHunk": "@@ -150,53 +153,53 @@ GraphPatternNotTriple union = GraphPatterns.union(book.has(dc10.iri(\"title\"), ti\n \tbook.has(dc11.iri(\"title\"), title);\n System.out.println(union.getQueryString());\n // ==> { ?book dc10:title ?title } UNION { ?book dc11:title ?title }\n-{{< / highlight >}}\n+```\n \n `GraphPatterns#optional()` creates an optional group graph pattern, consisting of the passed in `GraphPattern`s:\n \n-{{< highlight java \"linenos=table\" >}}\n+```java\n GraphPatternNotTriple optionalPattern = GraphPatterns.optional(GraphPatterns.tp(x, foaf.iri(\"mbox\"), mbox));\n System.out.println(optionalPattern.getQueryString());\n // ==> OPTIONAL { ?x foaf:mbox ?mbox }\n-{{< / highlight >}}\n+```\n \n ### Sub-select\n \n Finally, GraphPatterns#select() creates an instance of a SubSelect, which represents a SPARQL subquery:\n \n-{{< highlight java \"linenos=table\" >}}\n+```java\n SubSelect subQuery = GraphPatterns.select();\n-{{< / highlight >}}\n+```\n \n ## Query Constraints\n \n You can create SPARQL query constraints using the Expressions class which provides static methods to create Expression objects representing SPARQL\u2019s built-in expressions:\n \n-{{< highlight java \"linenos=table\" >}}\n+```java\n Variable name = SparqlBuilder.var(\"name\");\n Expression<?> regexExpression = Expressions.regex(name, \"Smith\");\n System.out.println(regexExpression.getQueryString());\n // ==> REGEX( ?name, \"Smith\" )\n-{{< / highlight >}}\n+```\n \n `Expression`s take `Operand` instances as arguments. Operand is implemented by the types you would expect (Variable, the RDF model interface RdfValue, and Expression itself). Where possible, Expressions has included wrappers to take appropriate Java primitives as parameters as well:\n \n-{{< highlight java \"linenos=table\" >}}\n+```java\n Variable price = SparqlBuilder.var(\"price\");\n Expression<?> priceLimit = Expressions.lt(price, 100);\n System.out.println(priceLimit.getQueryString());\n // ==> ?price < 100\n-{{< / highlight >}}\n+```\n \n For those places where a wrapper has not (yet) been created, `RdfLiteral`s can be used instead. The `Rdf` class provides factory methods to create StringLiteral, NumericLiteral, and BooleanLiteral instances:\n \n-{{< highlight java \"linenos=table\" >}}\n+```java\n Variable price = SparqlBuilder.var(\"price\");\n ExpressionOperand discount = Rdf.literalOf(0.9);\n Expression<?> discountedPrice = Expressions.multiply(price, discount);\n System.out.println(discountedPrice.getQueryString());\n // ==> ( ?price * 0.9 )\n-{{< / highlight >}}\n+```", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f3ac9db70ddbc9f385d984bbeb0a1fef72c5fff7"}, "originalPosition": 218}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzMjQ5ODYx", "url": "https://github.com/eclipse/rdf4j/pull/2521#pullrequestreview-493249861", "createdAt": "2020-09-22T08:50:47Z", "commit": {"oid": "f3ac9db70ddbc9f385d984bbeb0a1fef72c5fff7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwODo1MDo0N1rOHVwSWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwODo1MDo0N1rOHVwSWw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjU3MzI3NQ==", "bodyText": "This was part of the css changes i did to stop the code examples from wrapping, and instead scrolling horizontally. Does that still work now?", "url": "https://github.com/eclipse/rdf4j/pull/2521#discussion_r492573275", "createdAt": "2020-09-22T08:50:47Z", "author": {"login": "hmottestad"}, "path": "site/static/css/rdf4j.css", "diffHunk": "@@ -79,3 +83,17 @@ pre code {\n pre {\n   word-wrap: unset !important;\n }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f3ac9db70ddbc9f385d984bbeb0a1fef72c5fff7"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzMjUyMzQ3", "url": "https://github.com/eclipse/rdf4j/pull/2521#pullrequestreview-493252347", "createdAt": "2020-09-22T08:53:58Z", "commit": {"oid": "f3ac9db70ddbc9f385d984bbeb0a1fef72c5fff7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwODo1Mzo1OFrOHVwZuQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwODo1Mzo1OFrOHVwZuQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjU3NTE2MQ==", "bodyText": "Would be nice if this was a full example., eg. not with ....", "url": "https://github.com/eclipse/rdf4j/pull/2521#discussion_r492575161", "createdAt": "2020-09-22T08:53:58Z", "author": {"login": "hmottestad"}, "path": "site/content/documentation/reference/configuration.md", "diffHunk": "@@ -0,0 +1,458 @@\n+---\n+title: \"Repository and SAIL configuration\"\n+toc: true\n+weight: 4\n+autonumbering: true\n+---\n+\n+RDF4J repositories and SAIL configuration can be set up and changed by means of a configuration file in Turtle syntax. Here, we document the way the various components (repositories and SAILs) work together and how a full database configuration can be defined by \"stacking\" SAILs and wrapping in a Repository implementation.\n+\n+<!--more-->\n+\n+## Repository configuration\n+\n+A Repository configuration consists of a single RDF subject of type `rep:Repository`. Typically this subject is a blank node (`[]` in Turtle syntax), and is assigned its configuration parameters through use of RDF properties.\n+\n+The parameter namespace is `http://www.openrdf.org/config/repository#`, commonly abbreviated to `rep`.\n+It takes following configuration parameters:\n+\n+- `rep:repositoryID` (String): the repository identifier (required). This must be unique within the running system.\n+- `rdfs:label` (String): a human-readable name or short description of the repository (optional).\n+- `rep:repositoryImpl`: this specifies and configures the specific repository implementation (required). This is typically supplied as a nested blank node, which in turns has the implementation-specific configuration parameter. Every repository implemenation _must_ specify a `rep:repositoryType`.\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"SPARQL endpoint at http://example.org/\" ;\n+   rep:repositoryImpl [ rep:repositoryType \"example:repositoryType\";\n+                        # your implementation config here\n+   ].\n+```\n+\n+### SPARQLRepository\n+\n+The `SPARQLRepository` repository implementation is a client interface for a remote SPARQL endpoint.\n+Its `rep:repositoryType` value is `\"openrdf:SPARQLRepository\"`.\n+\n+The parameter namespace is `http://www.openrdf.org/config/repository/sparql#`, commonly abbreviated to `sparql`.\n+It takes the following configuration parameters:\n+\n+- `sparql:query-endpoint` (IRI): the SPARQL _query_ endpoint URL (required).\n+- `sparql:update-endpoint` (IRI): the SPARQL _update_ endpoint URL (optional). Only needs to be defined if different from the query endpoint.\n+\n+#### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sparql: <http://www.openrdf.org/config/repository/sparql#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"SPARQL endpoint at http://example.org/\" .\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:SPARQLRepository\" ;\n+      sparql:query-endpoint <http://example.org/sparql> ;\n+      sparql:update-endpoint <http://example.org/sparql/update> ;\n+   ];\n+```\n+\n+### HTTPRepository\n+\n+The `HTTPRepository` repository implementation is a client interface for a\n+store on a (remote) RDF4J Server. It differs from `SPARQLRepository` in that it\n+implements several RDF4J-specific  extensions to the standard SPARQL Protocol\n+which enhance transactional support and general performance.  Its\n+`rep:repositoryType` value is `\"openrdf:HTTPRepository\"`.\n+\n+The parameter namespace is `http://www.openrdf.org/config/repository/http#`, commonly abbreviated to `hr`.\n+It takes the following configuration parameters:\n+\n+- `hr:repositoryURL` (IRI): the location of the repository on an RDF4J Server (required).\n+- `hr:username` (string): username for basic authentication (optional).\n+- `hr:password` (string): password for basic authentication (optional).\n+\n+#### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix hr: <http://www.openrdf.org/config/repository/http#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"example repository on locally running RDF4J Server\" .\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:HTTPRepository\" ;\n+      hr:repositoryURL <http://localhost:8080/rdf4j-server/repositories/test>\n+   ];\n+```\n+\n+### SailRepository\n+\n+The {{< javadoc \"SailRepository\" \"repository/sail/SailRepository.html\" >}} repository implementation is the main implementation for direct access to a local RDF database (a SAIL implementation). Its `rep:repositoryType` is `openrdf:SailRepository`.\n+\n+The parameter namespace is `http://www.openrdf.org/config/repository/sail#`, commonly abbreviated to `sr`.\n+It takes the following configuration parameters:\n+\n+- `sr:sailImpl`: this specifies and configures the specific SAIL implementation (required). This is typically supplied as a nested blank node, which in turns has the SAIL-specific configuration parameters. Every SAIL implementation _must_ specify a `sail:sailType` property.\n+\n+#### Example configuration\n+\n+In this example we configure a simple SailRepository using a MemoryStore SAIL. See the section [SAIL Configuration](#sail-configuration) for more details.\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n+@prefix sail: <http://www.openrdf.org/config/sail#>.\n+@prefix ms: <http://www.openrdf.org/config/sail/memory#>.\n+@prefix sb: <http://www.openrdf.org/config/sail/base#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example Memory store\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:SailRepository\" ;\n+      sr:sailImpl [\n+         sail:sailType \"openrdf:MemoryStore\" ;\n+         sail:iterationCacheSyncThreshold \"10000\";\n+         ms:persist true;\n+         ms:syncDelay 0;\n+         sb:evaluationStrategyFactory \"org.eclipse.rdf4j.query.algebra.evaluation.impl.StrictEvaluationStrategyFactory\"\n+      ]\n+   ].\n+```\n+\n+### DatasetRepository\n+\n+The {{< javadoc \"DatasetRepository\" \"repository/dataset/DatasetRepository.html\" >}} is a wrapper around a `SailRepository` that dynamically loads datasets specified in the `FROM` and `FROM NAMED` clauses in SPARQL queries.\n+\n+#### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example Dataset Repository\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:DatasetRepository\" ;\n+      rep:delegate [\n+        rep:repositoryType \"openrdf:SailRepository\" ;\n+        sr:sailImpl [\n+          ...\n+        ]\n+      ]\n+   ].\n+```\n+\n+### ContextAwareRepository\n+\n+The {{< javadoc \"ContextAwareRepository\" \"repository/contextaware/ContextAwareRepository.html\" >}} is a wrapper around any other `Repository`. It can be used to configure the default context(s) on which query, update, or delete operations operate per default.\n+\n+The parameter namespace is `http://www.openrdf.org/config/repository/contextaware#`, commonly abbreviated to `car`.\n+It takes the following parameters:\n+\n+- `car:readContext`. Specifies the context(s) used per default when executing read operations (including SPARQL queries). Can be specified with multiple values to include more than one context;\n+- `car:insertContext`. Specifies the context used for insertion operations.\n+- `car:removeContext`. Specifies the context(s) used for delete operations. Can be specified with multiple values to include more than one context.\n+\n+#### Example configuration\n+\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix car: <http://www.openrdf.org/config/repository/contextaware#>.\n+@prefix ex: <http://example.org/>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example Context-aware repository\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:ContextAwareRepository\" ;\n+      car:readContext ex:namedGraph1, ex:namedGraph2;\n+      rep:delegate [\n+        rep:repositoryType \"openrdf:HTTPRepository\" ;\n+      ]\n+   ].\n+```\n+\n+## Sail Configuration\n+\n+Sail implementations come in two basic types: _base_ Sails, and Sail wrappers / adapters (sometimes also referred to as \"Stackable Sails\").\n+\n+Each Sail configuration identifies one base Sail, which typically functions as the actual database layer. This base Sail configuration can optionally be wrapped in one or more Stackable Sail configurations. The entire \"Sail stack\" is then usually wrapped as part of a [SailRepository configuration](#SailRepository).\n+\n+The parameter namespace is `http://www.openrdf.org/config/sail#`, commonly abbreviated to `sail`.\n+Every Sail in a Sail configuration has at least one required parameter:\n+\n+- `sail:sailType` - this identifies the type of Sail being configured.\n+- `sail:iterationCacheSyncThreshold` (integer). Specifies the size of the internal cache for query result iterations before on-disk overflow is enabled.\n+\n+### Base Sails\n+\n+Base Sail implementations are responsible for persistence of data and handling of queries, transactions and update operations on that data. A base Sail is typically a database.\n+\n+The parameter namespace for common parameters of base Sails is `http://www.openrdf.org/config/sail/base#`, commonly abbreviated to `sb`.\n+\n+Base Sails commonly take the following parameter:\n+\n+- `sb:evaluationStrategyFactory` (string). Specifies the full classname of the `EvaluationStrategyFactory` implementation used for this store. This controls how SPARQL queries are evaluated.\n+\n+#### Memory Store\n+\n+A Memory Store is an RDF4J database that keeps all data in main memory, with optional persistence on disk. Its `sail:sailType` value is `\"openrdf:MemoryStore\"`.\n+\n+The parameter namespace for Memory Store  is `http://www.openrdf.org/config/sail/memory#`, commonly abbreviated to `ms`.\n+It takes the following configuration options:\n+\n+- `ms:persist` (boolean). Specifies if the store persists its data to disk (required). Persistent memory stores write their data to disk before being shut down and read this data back in the next time they are initialized. Non-persistent memory stores are always empty upon initialization.\n+- `ms:syncDelay` (integer). Specifies the amount of time (in milliseconds) between an update operation completing and the store syncing its contents to disk (optional). By default, the memory store persistence mechanism synchronizes the disk backup directly upon any change to the contents of the store. Setting a delay on this synchronization can be useful if your application performs several transactions in sequence and you want to prevent disk synchronization in the middle of this sequence to improve update performance.\n+\n+##### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n+@prefix sail: <http://www.openrdf.org/config/sail#>.\n+@prefix ms: <http://www.openrdf.org/config/sail/memory#>.\n+@prefix sb: <http://www.openrdf.org/config/sail/base#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example Memory store\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:SailRepository\" ;\n+      sr:sailImpl [\n+         sail:sailType \"openrdf:MemoryStore\" ;\n+         sail:iterationCacheSyncThreshold \"10000\";\n+         ms:persist true;\n+         ms:syncDelay 0;\n+         sb:evaluationStrategyFactory \"org.eclipse.rdf4j.query.algebra.evaluation.impl.StrictEvaluationStrategyFactory\"\n+      ]\n+   ].\n+```\n+\n+#### Native Store\n+\n+A Native Store is an RDF4J database that persists all data directly on disk in an indexed binary format. Its `sail:sailType` value is `\"openrdf:NativeStore\"`.\n+\n+The parameter namespace for Native Store  is `http://www.openrdf.org/config/sail/native#`, commonly abbreviated to `ns`.\n+It takes the following configuration options:\n+\n+- `ns:tripleIndex` (string).  Specifices a comma-separated list of indexes for the store to use (optional).\n+- `ns:forceSync` (boolean). Specifies if an OS-level force sync should be executed after every update (optional).\n+- `ns:valueCacheSize` (integer). Specifies the size of the value cache (optional).\n+- `ns:valueIDCacheSize` (integer). Specifices the size of the value ID cache (optional).\n+- `ns:namespaceCacheSize` (integer). Specifies the size of the namespace cache (optional).\n+- `ns:namespaceIDCacheSize` (integer). Specifies the size of the namespace ID cache (optional).\n+\n+##### Native store indexes\n+\n+The native store uses on-disk indexes to speed up querying. It uses B-Trees for indexing statements, where the index key consists of four fields: subject (s), predicate (p), object (o) and context (c). The order in which each of these fields is used in the key determines the usability of an index on a specify statement query pattern: searching statements with a specific subject in an index that has the subject as the first field is significantly faster than searching these same statements in an index where the subject field is second or third. In the worst case, the \u2018wrong\u2019 statement pattern will result in a sequential scan over the entire set of statements.\n+\n+By default, the native repository only uses two indexes, one with a subject-predicate-object-context (spoc) key pattern and one with a predicate-object-subject-context (posc) key pattern. However, it is possible to define more or other indexes for the native repository, using the `ns:tripleIndex` parameter. This can be used to optimize performance for query patterns that occur frequently.\n+\n+The subject, predicate, object and context fields are represented by the characters \u2018s\u2019, \u2018p\u2019, \u2018o\u2019 and \u2018c\u2019 respectively. Indexes can be specified by creating 4-letter words from these four characters. Multiple indexes can be specified by separating these words with commas, spaces and/or tabs. For example, the string \u201cspoc, posc\u201d specifies two indexes; a subject-predicate-object-context index and a predicate-object-subject-context index.\n+\n+Creating more indexes potentially speeds up querying (a lot), but also adds overhead for maintaining the indexes. Also, every added index takes up additional disk space.\n+\n+The native store automatically creates/drops indexes upon (re)initialization, so the parameter can be adjusted and upon the first refresh of the configuration the native store will change its indexing strategy, without loss of data.\n+\n+##### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n+@prefix sail: <http://www.openrdf.org/config/sail#>.\n+@prefix ns: <http://www.openrdf.org/config/sail/native#>.\n+@prefix sb: <http://www.openrdf.org/config/sail/base#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example Native store\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:SailRepository\" ;\n+      sr:sailImpl [\n+         sail:sailType \"openrdf:NativeStore\" ;\n+         sail:iterationCacheSyncThreshold \"10000\";\n+         sb:evaluationStrategyFactory \"org.eclipse.rdf4j.query.algebra.evaluation.impl.StrictEvaluationStrategyFactory\" ;\n+         ns:tripleIndexes \"spoc,posc\"\n+      ]\n+   ].\n+```\n+\n+#### Elasticsearch Store\n+\n+The Elasticsearch Store is an RDF4J database that persists all data directly in Elasticsearch (not to be confused with the Elasticsearch Fulltext Search Sail, which is an adapter Sail implementation to provided full-text search indexing on top of other RDF databases). Its `sail:sailType` value is `\"rdf4j:ElasticsearchStore\"`.\n+\n+The parameter namespace for Elasticsearch Store is `http://rdf4j.org/config/sail/elasticsearchstore`, commonly abbreviated to `ess`. It takes the following configuration options:\n+\n+- `ess:hostname` (string). Specifies the hostname to use for connecting to Elasticsearch (required).\n+- `ess:port` (int). Specifies the port number to use for connecting to Elasticsearch (optional).\n+- `ess:clusterName` (string). Specifies the Elasticsearch cluster name (optional).\n+- `ess:index` (string). Specifies the index name to use for storage and  retrieval of data (optional).\n+\n+##### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n+@prefix sail: <http://www.openrdf.org/config/sail#>.\n+@prefix ess: <http://rdf4j.org/config/sail/elasticsearchstore#>.\n+@prefix sb: <http://www.openrdf.org/config/sail/base#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example Elasticsearch store\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:SailRepository\" ;\n+      sr:sailImpl [\n+         sail:sailType \"rdf4j:ElasticsearchStore\" ;\n+         sail:iterationCacheSyncThreshold \"10000\";\n+         ess:hostname \"localhost\";\n+         ess:port 9200;\n+         ess:clusterName \"myCluster\";\n+         ess:index \"myIndex\";\n+         sb:evaluationStrategyFactory \"org.eclipse.rdf4j.query.algebra.evaluation.impl.StrictEvaluationStrategyFactory\"\n+      ]\n+   ].\n+```\n+\n+### Sail Adapter implementations\n+\n+Sail Adapters, or \"Stackable Sails\", are Sail implementations that implement intercepting behavior for operations on RDF databases before delegating down to the wrapped Sail implementation (ultimately a [base Sail](#base-sails), though of course multiple Stackable Sails can be stacked on top of each other as well).\n+\n+Every Sail Adapter has at least one required parameter:\n+\n+- `sail:delegate`. Specifies and configures the wrapped Sail implementation (required). This is typically supplied as a nested blank node, which in turns has the implementation-specific configuration parameter.\n+\n+#### RDF Schema inferencer\n+\n+The RDF Schema inferencer is an Sail Adapter that performs rule-based entailment as defined in the [RDF 1.1 Semantics](https://www.w3.org/TR/rdf11-mt/) recommendation. Reasoning happens in a forward-chaining manner on update operations, and the entailed statements are sent to be persisted by the wrapped Sail. The inferencer also caches RDF Schema statements to speed up entailment and retrieval operations.\n+\n+The `sail:sailType` value for the RDF Schema inferencer is `\"rdf4j:SchemaCachingRDFSInferencer\"`.\n+\n+##### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n+@prefix sail: <http://www.openrdf.org/config/sail#>.\n+@prefix ms: <http://www.openrdf.org/config/sail/memory#>.\n+@prefix sb: <http://www.openrdf.org/config/sail/base#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example memory store with RDF Schema entailment\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:SailRepository\" ;\n+      sr:sailImpl [\n+         sail:sailType \"rdf4j:SchemaCachingRDFSInferencer\";\n+         sail:delegate [\n+             sail:sailType \"openrdf:MemoryStore\" ;\n+             ...\n+         ];\n+      ]\n+   ].", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f3ac9db70ddbc9f385d984bbeb0a1fef72c5fff7"}, "originalPosition": 369}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzMjUzNzAw", "url": "https://github.com/eclipse/rdf4j/pull/2521#pullrequestreview-493253700", "createdAt": "2020-09-22T08:55:39Z", "commit": {"oid": "f3ac9db70ddbc9f385d984bbeb0a1fef72c5fff7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwODo1NTozOVrOHVweFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwODo1NTozOVrOHVweFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjU3NjI3OQ==", "bodyText": "This is, or will be, deprecated.", "url": "https://github.com/eclipse/rdf4j/pull/2521#discussion_r492576279", "createdAt": "2020-09-22T08:55:39Z", "author": {"login": "hmottestad"}, "path": "site/content/documentation/reference/configuration.md", "diffHunk": "@@ -0,0 +1,458 @@\n+---\n+title: \"Repository and SAIL configuration\"\n+toc: true\n+weight: 4\n+autonumbering: true\n+---\n+\n+RDF4J repositories and SAIL configuration can be set up and changed by means of a configuration file in Turtle syntax. Here, we document the way the various components (repositories and SAILs) work together and how a full database configuration can be defined by \"stacking\" SAILs and wrapping in a Repository implementation.\n+\n+<!--more-->\n+\n+## Repository configuration\n+\n+A Repository configuration consists of a single RDF subject of type `rep:Repository`. Typically this subject is a blank node (`[]` in Turtle syntax), and is assigned its configuration parameters through use of RDF properties.\n+\n+The parameter namespace is `http://www.openrdf.org/config/repository#`, commonly abbreviated to `rep`.\n+It takes following configuration parameters:\n+\n+- `rep:repositoryID` (String): the repository identifier (required). This must be unique within the running system.\n+- `rdfs:label` (String): a human-readable name or short description of the repository (optional).\n+- `rep:repositoryImpl`: this specifies and configures the specific repository implementation (required). This is typically supplied as a nested blank node, which in turns has the implementation-specific configuration parameter. Every repository implemenation _must_ specify a `rep:repositoryType`.\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"SPARQL endpoint at http://example.org/\" ;\n+   rep:repositoryImpl [ rep:repositoryType \"example:repositoryType\";\n+                        # your implementation config here\n+   ].\n+```\n+\n+### SPARQLRepository\n+\n+The `SPARQLRepository` repository implementation is a client interface for a remote SPARQL endpoint.\n+Its `rep:repositoryType` value is `\"openrdf:SPARQLRepository\"`.\n+\n+The parameter namespace is `http://www.openrdf.org/config/repository/sparql#`, commonly abbreviated to `sparql`.\n+It takes the following configuration parameters:\n+\n+- `sparql:query-endpoint` (IRI): the SPARQL _query_ endpoint URL (required).\n+- `sparql:update-endpoint` (IRI): the SPARQL _update_ endpoint URL (optional). Only needs to be defined if different from the query endpoint.\n+\n+#### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sparql: <http://www.openrdf.org/config/repository/sparql#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"SPARQL endpoint at http://example.org/\" .\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:SPARQLRepository\" ;\n+      sparql:query-endpoint <http://example.org/sparql> ;\n+      sparql:update-endpoint <http://example.org/sparql/update> ;\n+   ];\n+```\n+\n+### HTTPRepository\n+\n+The `HTTPRepository` repository implementation is a client interface for a\n+store on a (remote) RDF4J Server. It differs from `SPARQLRepository` in that it\n+implements several RDF4J-specific  extensions to the standard SPARQL Protocol\n+which enhance transactional support and general performance.  Its\n+`rep:repositoryType` value is `\"openrdf:HTTPRepository\"`.\n+\n+The parameter namespace is `http://www.openrdf.org/config/repository/http#`, commonly abbreviated to `hr`.\n+It takes the following configuration parameters:\n+\n+- `hr:repositoryURL` (IRI): the location of the repository on an RDF4J Server (required).\n+- `hr:username` (string): username for basic authentication (optional).\n+- `hr:password` (string): password for basic authentication (optional).\n+\n+#### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix hr: <http://www.openrdf.org/config/repository/http#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"example repository on locally running RDF4J Server\" .\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:HTTPRepository\" ;\n+      hr:repositoryURL <http://localhost:8080/rdf4j-server/repositories/test>\n+   ];\n+```\n+\n+### SailRepository\n+\n+The {{< javadoc \"SailRepository\" \"repository/sail/SailRepository.html\" >}} repository implementation is the main implementation for direct access to a local RDF database (a SAIL implementation). Its `rep:repositoryType` is `openrdf:SailRepository`.\n+\n+The parameter namespace is `http://www.openrdf.org/config/repository/sail#`, commonly abbreviated to `sr`.\n+It takes the following configuration parameters:\n+\n+- `sr:sailImpl`: this specifies and configures the specific SAIL implementation (required). This is typically supplied as a nested blank node, which in turns has the SAIL-specific configuration parameters. Every SAIL implementation _must_ specify a `sail:sailType` property.\n+\n+#### Example configuration\n+\n+In this example we configure a simple SailRepository using a MemoryStore SAIL. See the section [SAIL Configuration](#sail-configuration) for more details.\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n+@prefix sail: <http://www.openrdf.org/config/sail#>.\n+@prefix ms: <http://www.openrdf.org/config/sail/memory#>.\n+@prefix sb: <http://www.openrdf.org/config/sail/base#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example Memory store\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:SailRepository\" ;\n+      sr:sailImpl [\n+         sail:sailType \"openrdf:MemoryStore\" ;\n+         sail:iterationCacheSyncThreshold \"10000\";\n+         ms:persist true;\n+         ms:syncDelay 0;\n+         sb:evaluationStrategyFactory \"org.eclipse.rdf4j.query.algebra.evaluation.impl.StrictEvaluationStrategyFactory\"\n+      ]\n+   ].\n+```\n+\n+### DatasetRepository\n+\n+The {{< javadoc \"DatasetRepository\" \"repository/dataset/DatasetRepository.html\" >}} is a wrapper around a `SailRepository` that dynamically loads datasets specified in the `FROM` and `FROM NAMED` clauses in SPARQL queries.\n+\n+#### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example Dataset Repository\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:DatasetRepository\" ;\n+      rep:delegate [\n+        rep:repositoryType \"openrdf:SailRepository\" ;\n+        sr:sailImpl [\n+          ...\n+        ]\n+      ]\n+   ].\n+```\n+\n+### ContextAwareRepository\n+\n+The {{< javadoc \"ContextAwareRepository\" \"repository/contextaware/ContextAwareRepository.html\" >}} is a wrapper around any other `Repository`. It can be used to configure the default context(s) on which query, update, or delete operations operate per default.\n+\n+The parameter namespace is `http://www.openrdf.org/config/repository/contextaware#`, commonly abbreviated to `car`.\n+It takes the following parameters:\n+\n+- `car:readContext`. Specifies the context(s) used per default when executing read operations (including SPARQL queries). Can be specified with multiple values to include more than one context;\n+- `car:insertContext`. Specifies the context used for insertion operations.\n+- `car:removeContext`. Specifies the context(s) used for delete operations. Can be specified with multiple values to include more than one context.\n+\n+#### Example configuration\n+\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix car: <http://www.openrdf.org/config/repository/contextaware#>.\n+@prefix ex: <http://example.org/>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example Context-aware repository\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:ContextAwareRepository\" ;\n+      car:readContext ex:namedGraph1, ex:namedGraph2;\n+      rep:delegate [\n+        rep:repositoryType \"openrdf:HTTPRepository\" ;\n+      ]\n+   ].\n+```\n+\n+## Sail Configuration\n+\n+Sail implementations come in two basic types: _base_ Sails, and Sail wrappers / adapters (sometimes also referred to as \"Stackable Sails\").\n+\n+Each Sail configuration identifies one base Sail, which typically functions as the actual database layer. This base Sail configuration can optionally be wrapped in one or more Stackable Sail configurations. The entire \"Sail stack\" is then usually wrapped as part of a [SailRepository configuration](#SailRepository).\n+\n+The parameter namespace is `http://www.openrdf.org/config/sail#`, commonly abbreviated to `sail`.\n+Every Sail in a Sail configuration has at least one required parameter:\n+\n+- `sail:sailType` - this identifies the type of Sail being configured.\n+- `sail:iterationCacheSyncThreshold` (integer). Specifies the size of the internal cache for query result iterations before on-disk overflow is enabled.\n+\n+### Base Sails\n+\n+Base Sail implementations are responsible for persistence of data and handling of queries, transactions and update operations on that data. A base Sail is typically a database.\n+\n+The parameter namespace for common parameters of base Sails is `http://www.openrdf.org/config/sail/base#`, commonly abbreviated to `sb`.\n+\n+Base Sails commonly take the following parameter:\n+\n+- `sb:evaluationStrategyFactory` (string). Specifies the full classname of the `EvaluationStrategyFactory` implementation used for this store. This controls how SPARQL queries are evaluated.\n+\n+#### Memory Store\n+\n+A Memory Store is an RDF4J database that keeps all data in main memory, with optional persistence on disk. Its `sail:sailType` value is `\"openrdf:MemoryStore\"`.\n+\n+The parameter namespace for Memory Store  is `http://www.openrdf.org/config/sail/memory#`, commonly abbreviated to `ms`.\n+It takes the following configuration options:\n+\n+- `ms:persist` (boolean). Specifies if the store persists its data to disk (required). Persistent memory stores write their data to disk before being shut down and read this data back in the next time they are initialized. Non-persistent memory stores are always empty upon initialization.\n+- `ms:syncDelay` (integer). Specifies the amount of time (in milliseconds) between an update operation completing and the store syncing its contents to disk (optional). By default, the memory store persistence mechanism synchronizes the disk backup directly upon any change to the contents of the store. Setting a delay on this synchronization can be useful if your application performs several transactions in sequence and you want to prevent disk synchronization in the middle of this sequence to improve update performance.\n+\n+##### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n+@prefix sail: <http://www.openrdf.org/config/sail#>.\n+@prefix ms: <http://www.openrdf.org/config/sail/memory#>.\n+@prefix sb: <http://www.openrdf.org/config/sail/base#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example Memory store\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:SailRepository\" ;\n+      sr:sailImpl [\n+         sail:sailType \"openrdf:MemoryStore\" ;\n+         sail:iterationCacheSyncThreshold \"10000\";\n+         ms:persist true;\n+         ms:syncDelay 0;\n+         sb:evaluationStrategyFactory \"org.eclipse.rdf4j.query.algebra.evaluation.impl.StrictEvaluationStrategyFactory\"\n+      ]\n+   ].\n+```\n+\n+#### Native Store\n+\n+A Native Store is an RDF4J database that persists all data directly on disk in an indexed binary format. Its `sail:sailType` value is `\"openrdf:NativeStore\"`.\n+\n+The parameter namespace for Native Store  is `http://www.openrdf.org/config/sail/native#`, commonly abbreviated to `ns`.\n+It takes the following configuration options:\n+\n+- `ns:tripleIndex` (string).  Specifices a comma-separated list of indexes for the store to use (optional).\n+- `ns:forceSync` (boolean). Specifies if an OS-level force sync should be executed after every update (optional).\n+- `ns:valueCacheSize` (integer). Specifies the size of the value cache (optional).\n+- `ns:valueIDCacheSize` (integer). Specifices the size of the value ID cache (optional).\n+- `ns:namespaceCacheSize` (integer). Specifies the size of the namespace cache (optional).\n+- `ns:namespaceIDCacheSize` (integer). Specifies the size of the namespace ID cache (optional).\n+\n+##### Native store indexes\n+\n+The native store uses on-disk indexes to speed up querying. It uses B-Trees for indexing statements, where the index key consists of four fields: subject (s), predicate (p), object (o) and context (c). The order in which each of these fields is used in the key determines the usability of an index on a specify statement query pattern: searching statements with a specific subject in an index that has the subject as the first field is significantly faster than searching these same statements in an index where the subject field is second or third. In the worst case, the \u2018wrong\u2019 statement pattern will result in a sequential scan over the entire set of statements.\n+\n+By default, the native repository only uses two indexes, one with a subject-predicate-object-context (spoc) key pattern and one with a predicate-object-subject-context (posc) key pattern. However, it is possible to define more or other indexes for the native repository, using the `ns:tripleIndex` parameter. This can be used to optimize performance for query patterns that occur frequently.\n+\n+The subject, predicate, object and context fields are represented by the characters \u2018s\u2019, \u2018p\u2019, \u2018o\u2019 and \u2018c\u2019 respectively. Indexes can be specified by creating 4-letter words from these four characters. Multiple indexes can be specified by separating these words with commas, spaces and/or tabs. For example, the string \u201cspoc, posc\u201d specifies two indexes; a subject-predicate-object-context index and a predicate-object-subject-context index.\n+\n+Creating more indexes potentially speeds up querying (a lot), but also adds overhead for maintaining the indexes. Also, every added index takes up additional disk space.\n+\n+The native store automatically creates/drops indexes upon (re)initialization, so the parameter can be adjusted and upon the first refresh of the configuration the native store will change its indexing strategy, without loss of data.\n+\n+##### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n+@prefix sail: <http://www.openrdf.org/config/sail#>.\n+@prefix ns: <http://www.openrdf.org/config/sail/native#>.\n+@prefix sb: <http://www.openrdf.org/config/sail/base#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example Native store\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:SailRepository\" ;\n+      sr:sailImpl [\n+         sail:sailType \"openrdf:NativeStore\" ;\n+         sail:iterationCacheSyncThreshold \"10000\";\n+         sb:evaluationStrategyFactory \"org.eclipse.rdf4j.query.algebra.evaluation.impl.StrictEvaluationStrategyFactory\" ;\n+         ns:tripleIndexes \"spoc,posc\"\n+      ]\n+   ].\n+```\n+\n+#### Elasticsearch Store\n+\n+The Elasticsearch Store is an RDF4J database that persists all data directly in Elasticsearch (not to be confused with the Elasticsearch Fulltext Search Sail, which is an adapter Sail implementation to provided full-text search indexing on top of other RDF databases). Its `sail:sailType` value is `\"rdf4j:ElasticsearchStore\"`.\n+\n+The parameter namespace for Elasticsearch Store is `http://rdf4j.org/config/sail/elasticsearchstore`, commonly abbreviated to `ess`. It takes the following configuration options:\n+\n+- `ess:hostname` (string). Specifies the hostname to use for connecting to Elasticsearch (required).\n+- `ess:port` (int). Specifies the port number to use for connecting to Elasticsearch (optional).\n+- `ess:clusterName` (string). Specifies the Elasticsearch cluster name (optional).\n+- `ess:index` (string). Specifies the index name to use for storage and  retrieval of data (optional).\n+\n+##### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n+@prefix sail: <http://www.openrdf.org/config/sail#>.\n+@prefix ess: <http://rdf4j.org/config/sail/elasticsearchstore#>.\n+@prefix sb: <http://www.openrdf.org/config/sail/base#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example Elasticsearch store\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:SailRepository\" ;\n+      sr:sailImpl [\n+         sail:sailType \"rdf4j:ElasticsearchStore\" ;\n+         sail:iterationCacheSyncThreshold \"10000\";\n+         ess:hostname \"localhost\";\n+         ess:port 9200;\n+         ess:clusterName \"myCluster\";\n+         ess:index \"myIndex\";\n+         sb:evaluationStrategyFactory \"org.eclipse.rdf4j.query.algebra.evaluation.impl.StrictEvaluationStrategyFactory\"\n+      ]\n+   ].\n+```\n+\n+### Sail Adapter implementations\n+\n+Sail Adapters, or \"Stackable Sails\", are Sail implementations that implement intercepting behavior for operations on RDF databases before delegating down to the wrapped Sail implementation (ultimately a [base Sail](#base-sails), though of course multiple Stackable Sails can be stacked on top of each other as well).\n+\n+Every Sail Adapter has at least one required parameter:\n+\n+- `sail:delegate`. Specifies and configures the wrapped Sail implementation (required). This is typically supplied as a nested blank node, which in turns has the implementation-specific configuration parameter.\n+\n+#### RDF Schema inferencer\n+\n+The RDF Schema inferencer is an Sail Adapter that performs rule-based entailment as defined in the [RDF 1.1 Semantics](https://www.w3.org/TR/rdf11-mt/) recommendation. Reasoning happens in a forward-chaining manner on update operations, and the entailed statements are sent to be persisted by the wrapped Sail. The inferencer also caches RDF Schema statements to speed up entailment and retrieval operations.\n+\n+The `sail:sailType` value for the RDF Schema inferencer is `\"rdf4j:SchemaCachingRDFSInferencer\"`.\n+\n+##### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n+@prefix sail: <http://www.openrdf.org/config/sail#>.\n+@prefix ms: <http://www.openrdf.org/config/sail/memory#>.\n+@prefix sb: <http://www.openrdf.org/config/sail/base#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example memory store with RDF Schema entailment\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:SailRepository\" ;\n+      sr:sailImpl [\n+         sail:sailType \"rdf4j:SchemaCachingRDFSInferencer\";\n+         sail:delegate [\n+             sail:sailType \"openrdf:MemoryStore\" ;\n+             ...\n+         ];\n+      ]\n+   ].\n+```\n+\n+#### Direct Type inferencer\n+\n+The Direct Type inferencer is an Sail Adapter that performs entailment on the\n+the class and instance inheritance hierarchy, asserting specific \"shortcut\"\n+properties (`sesame:directType`, `sesame:directSubClassOf` and\n+`sesame:directSubPropertyOf`) that allow querying for the _direct_ type or\n+subclass of a resource.  Reasoning happens in a forward-chaining manner on\n+update operations, and the entailed statements are sent to be persisted by the\n+wrapped Sail.\n+\n+The `sail:sailType` value is `\"openrdf:DirectTypeHierarchyInferencer\"`.\n+\n+##### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n+@prefix sail: <http://www.openrdf.org/config/sail#>.\n+@prefix ms: <http://www.openrdf.org/config/sail/memory#>.\n+@prefix sb: <http://www.openrdf.org/config/sail/base#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example Memory store with direct type entailment\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:SailRepository\" ;\n+      sr:sailImpl [\n+         sail:sailType \"openrdf:DirectTypeHierarchyInferencer\";\n+         sail:delegate [\n+             sail:sailType \"openrdf:MemoryStore\" ;\n+             ...\n+         ];\n+      ]\n+   ].\n+```\n+\n+#### SHACL Sail\n+\n+The SHACL Sail is a Sail Adapter that performs transaction validation using the Shapes Constraint Language [SHACL](https://www.w3.org/TR/shacl/). More information about the use of the SHACL Sail can be found in [Validation with SHACL](/documentation/programming/shacl).\n+\n+The `sail:sailType` value of the SHACL Sail is `\"rdf4j:ShaclSail\"`. Its parameter namespace is `http://rdf4j.org/config/sail/shacl#`, commonly abbreviated to `ssc`. It takes the following configuration options:\n+\n+- `ssc:parallelValidation` (boolean): Enables parallel validation (optional).\n+- `ssc:undefinedTargetValidatesAllSubjects` (boolean): Specifies if an undefined target in a shape leads to validating all subject (optional).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f3ac9db70ddbc9f385d984bbeb0a1fef72c5fff7"}, "originalPosition": 416}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzMjUzODk0", "url": "https://github.com/eclipse/rdf4j/pull/2521#pullrequestreview-493253894", "createdAt": "2020-09-22T08:55:53Z", "commit": {"oid": "f3ac9db70ddbc9f385d984bbeb0a1fef72c5fff7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwODo1NTo1M1rOHVwepA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwODo1NTo1M1rOHVwepA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjU3NjQyMA==", "bodyText": "This is, or will be, deprecated too.", "url": "https://github.com/eclipse/rdf4j/pull/2521#discussion_r492576420", "createdAt": "2020-09-22T08:55:53Z", "author": {"login": "hmottestad"}, "path": "site/content/documentation/reference/configuration.md", "diffHunk": "@@ -0,0 +1,458 @@\n+---\n+title: \"Repository and SAIL configuration\"\n+toc: true\n+weight: 4\n+autonumbering: true\n+---\n+\n+RDF4J repositories and SAIL configuration can be set up and changed by means of a configuration file in Turtle syntax. Here, we document the way the various components (repositories and SAILs) work together and how a full database configuration can be defined by \"stacking\" SAILs and wrapping in a Repository implementation.\n+\n+<!--more-->\n+\n+## Repository configuration\n+\n+A Repository configuration consists of a single RDF subject of type `rep:Repository`. Typically this subject is a blank node (`[]` in Turtle syntax), and is assigned its configuration parameters through use of RDF properties.\n+\n+The parameter namespace is `http://www.openrdf.org/config/repository#`, commonly abbreviated to `rep`.\n+It takes following configuration parameters:\n+\n+- `rep:repositoryID` (String): the repository identifier (required). This must be unique within the running system.\n+- `rdfs:label` (String): a human-readable name or short description of the repository (optional).\n+- `rep:repositoryImpl`: this specifies and configures the specific repository implementation (required). This is typically supplied as a nested blank node, which in turns has the implementation-specific configuration parameter. Every repository implemenation _must_ specify a `rep:repositoryType`.\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"SPARQL endpoint at http://example.org/\" ;\n+   rep:repositoryImpl [ rep:repositoryType \"example:repositoryType\";\n+                        # your implementation config here\n+   ].\n+```\n+\n+### SPARQLRepository\n+\n+The `SPARQLRepository` repository implementation is a client interface for a remote SPARQL endpoint.\n+Its `rep:repositoryType` value is `\"openrdf:SPARQLRepository\"`.\n+\n+The parameter namespace is `http://www.openrdf.org/config/repository/sparql#`, commonly abbreviated to `sparql`.\n+It takes the following configuration parameters:\n+\n+- `sparql:query-endpoint` (IRI): the SPARQL _query_ endpoint URL (required).\n+- `sparql:update-endpoint` (IRI): the SPARQL _update_ endpoint URL (optional). Only needs to be defined if different from the query endpoint.\n+\n+#### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sparql: <http://www.openrdf.org/config/repository/sparql#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"SPARQL endpoint at http://example.org/\" .\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:SPARQLRepository\" ;\n+      sparql:query-endpoint <http://example.org/sparql> ;\n+      sparql:update-endpoint <http://example.org/sparql/update> ;\n+   ];\n+```\n+\n+### HTTPRepository\n+\n+The `HTTPRepository` repository implementation is a client interface for a\n+store on a (remote) RDF4J Server. It differs from `SPARQLRepository` in that it\n+implements several RDF4J-specific  extensions to the standard SPARQL Protocol\n+which enhance transactional support and general performance.  Its\n+`rep:repositoryType` value is `\"openrdf:HTTPRepository\"`.\n+\n+The parameter namespace is `http://www.openrdf.org/config/repository/http#`, commonly abbreviated to `hr`.\n+It takes the following configuration parameters:\n+\n+- `hr:repositoryURL` (IRI): the location of the repository on an RDF4J Server (required).\n+- `hr:username` (string): username for basic authentication (optional).\n+- `hr:password` (string): password for basic authentication (optional).\n+\n+#### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix hr: <http://www.openrdf.org/config/repository/http#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"example repository on locally running RDF4J Server\" .\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:HTTPRepository\" ;\n+      hr:repositoryURL <http://localhost:8080/rdf4j-server/repositories/test>\n+   ];\n+```\n+\n+### SailRepository\n+\n+The {{< javadoc \"SailRepository\" \"repository/sail/SailRepository.html\" >}} repository implementation is the main implementation for direct access to a local RDF database (a SAIL implementation). Its `rep:repositoryType` is `openrdf:SailRepository`.\n+\n+The parameter namespace is `http://www.openrdf.org/config/repository/sail#`, commonly abbreviated to `sr`.\n+It takes the following configuration parameters:\n+\n+- `sr:sailImpl`: this specifies and configures the specific SAIL implementation (required). This is typically supplied as a nested blank node, which in turns has the SAIL-specific configuration parameters. Every SAIL implementation _must_ specify a `sail:sailType` property.\n+\n+#### Example configuration\n+\n+In this example we configure a simple SailRepository using a MemoryStore SAIL. See the section [SAIL Configuration](#sail-configuration) for more details.\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n+@prefix sail: <http://www.openrdf.org/config/sail#>.\n+@prefix ms: <http://www.openrdf.org/config/sail/memory#>.\n+@prefix sb: <http://www.openrdf.org/config/sail/base#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example Memory store\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:SailRepository\" ;\n+      sr:sailImpl [\n+         sail:sailType \"openrdf:MemoryStore\" ;\n+         sail:iterationCacheSyncThreshold \"10000\";\n+         ms:persist true;\n+         ms:syncDelay 0;\n+         sb:evaluationStrategyFactory \"org.eclipse.rdf4j.query.algebra.evaluation.impl.StrictEvaluationStrategyFactory\"\n+      ]\n+   ].\n+```\n+\n+### DatasetRepository\n+\n+The {{< javadoc \"DatasetRepository\" \"repository/dataset/DatasetRepository.html\" >}} is a wrapper around a `SailRepository` that dynamically loads datasets specified in the `FROM` and `FROM NAMED` clauses in SPARQL queries.\n+\n+#### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example Dataset Repository\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:DatasetRepository\" ;\n+      rep:delegate [\n+        rep:repositoryType \"openrdf:SailRepository\" ;\n+        sr:sailImpl [\n+          ...\n+        ]\n+      ]\n+   ].\n+```\n+\n+### ContextAwareRepository\n+\n+The {{< javadoc \"ContextAwareRepository\" \"repository/contextaware/ContextAwareRepository.html\" >}} is a wrapper around any other `Repository`. It can be used to configure the default context(s) on which query, update, or delete operations operate per default.\n+\n+The parameter namespace is `http://www.openrdf.org/config/repository/contextaware#`, commonly abbreviated to `car`.\n+It takes the following parameters:\n+\n+- `car:readContext`. Specifies the context(s) used per default when executing read operations (including SPARQL queries). Can be specified with multiple values to include more than one context;\n+- `car:insertContext`. Specifies the context used for insertion operations.\n+- `car:removeContext`. Specifies the context(s) used for delete operations. Can be specified with multiple values to include more than one context.\n+\n+#### Example configuration\n+\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix car: <http://www.openrdf.org/config/repository/contextaware#>.\n+@prefix ex: <http://example.org/>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example Context-aware repository\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:ContextAwareRepository\" ;\n+      car:readContext ex:namedGraph1, ex:namedGraph2;\n+      rep:delegate [\n+        rep:repositoryType \"openrdf:HTTPRepository\" ;\n+      ]\n+   ].\n+```\n+\n+## Sail Configuration\n+\n+Sail implementations come in two basic types: _base_ Sails, and Sail wrappers / adapters (sometimes also referred to as \"Stackable Sails\").\n+\n+Each Sail configuration identifies one base Sail, which typically functions as the actual database layer. This base Sail configuration can optionally be wrapped in one or more Stackable Sail configurations. The entire \"Sail stack\" is then usually wrapped as part of a [SailRepository configuration](#SailRepository).\n+\n+The parameter namespace is `http://www.openrdf.org/config/sail#`, commonly abbreviated to `sail`.\n+Every Sail in a Sail configuration has at least one required parameter:\n+\n+- `sail:sailType` - this identifies the type of Sail being configured.\n+- `sail:iterationCacheSyncThreshold` (integer). Specifies the size of the internal cache for query result iterations before on-disk overflow is enabled.\n+\n+### Base Sails\n+\n+Base Sail implementations are responsible for persistence of data and handling of queries, transactions and update operations on that data. A base Sail is typically a database.\n+\n+The parameter namespace for common parameters of base Sails is `http://www.openrdf.org/config/sail/base#`, commonly abbreviated to `sb`.\n+\n+Base Sails commonly take the following parameter:\n+\n+- `sb:evaluationStrategyFactory` (string). Specifies the full classname of the `EvaluationStrategyFactory` implementation used for this store. This controls how SPARQL queries are evaluated.\n+\n+#### Memory Store\n+\n+A Memory Store is an RDF4J database that keeps all data in main memory, with optional persistence on disk. Its `sail:sailType` value is `\"openrdf:MemoryStore\"`.\n+\n+The parameter namespace for Memory Store  is `http://www.openrdf.org/config/sail/memory#`, commonly abbreviated to `ms`.\n+It takes the following configuration options:\n+\n+- `ms:persist` (boolean). Specifies if the store persists its data to disk (required). Persistent memory stores write their data to disk before being shut down and read this data back in the next time they are initialized. Non-persistent memory stores are always empty upon initialization.\n+- `ms:syncDelay` (integer). Specifies the amount of time (in milliseconds) between an update operation completing and the store syncing its contents to disk (optional). By default, the memory store persistence mechanism synchronizes the disk backup directly upon any change to the contents of the store. Setting a delay on this synchronization can be useful if your application performs several transactions in sequence and you want to prevent disk synchronization in the middle of this sequence to improve update performance.\n+\n+##### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n+@prefix sail: <http://www.openrdf.org/config/sail#>.\n+@prefix ms: <http://www.openrdf.org/config/sail/memory#>.\n+@prefix sb: <http://www.openrdf.org/config/sail/base#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example Memory store\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:SailRepository\" ;\n+      sr:sailImpl [\n+         sail:sailType \"openrdf:MemoryStore\" ;\n+         sail:iterationCacheSyncThreshold \"10000\";\n+         ms:persist true;\n+         ms:syncDelay 0;\n+         sb:evaluationStrategyFactory \"org.eclipse.rdf4j.query.algebra.evaluation.impl.StrictEvaluationStrategyFactory\"\n+      ]\n+   ].\n+```\n+\n+#### Native Store\n+\n+A Native Store is an RDF4J database that persists all data directly on disk in an indexed binary format. Its `sail:sailType` value is `\"openrdf:NativeStore\"`.\n+\n+The parameter namespace for Native Store  is `http://www.openrdf.org/config/sail/native#`, commonly abbreviated to `ns`.\n+It takes the following configuration options:\n+\n+- `ns:tripleIndex` (string).  Specifices a comma-separated list of indexes for the store to use (optional).\n+- `ns:forceSync` (boolean). Specifies if an OS-level force sync should be executed after every update (optional).\n+- `ns:valueCacheSize` (integer). Specifies the size of the value cache (optional).\n+- `ns:valueIDCacheSize` (integer). Specifices the size of the value ID cache (optional).\n+- `ns:namespaceCacheSize` (integer). Specifies the size of the namespace cache (optional).\n+- `ns:namespaceIDCacheSize` (integer). Specifies the size of the namespace ID cache (optional).\n+\n+##### Native store indexes\n+\n+The native store uses on-disk indexes to speed up querying. It uses B-Trees for indexing statements, where the index key consists of four fields: subject (s), predicate (p), object (o) and context (c). The order in which each of these fields is used in the key determines the usability of an index on a specify statement query pattern: searching statements with a specific subject in an index that has the subject as the first field is significantly faster than searching these same statements in an index where the subject field is second or third. In the worst case, the \u2018wrong\u2019 statement pattern will result in a sequential scan over the entire set of statements.\n+\n+By default, the native repository only uses two indexes, one with a subject-predicate-object-context (spoc) key pattern and one with a predicate-object-subject-context (posc) key pattern. However, it is possible to define more or other indexes for the native repository, using the `ns:tripleIndex` parameter. This can be used to optimize performance for query patterns that occur frequently.\n+\n+The subject, predicate, object and context fields are represented by the characters \u2018s\u2019, \u2018p\u2019, \u2018o\u2019 and \u2018c\u2019 respectively. Indexes can be specified by creating 4-letter words from these four characters. Multiple indexes can be specified by separating these words with commas, spaces and/or tabs. For example, the string \u201cspoc, posc\u201d specifies two indexes; a subject-predicate-object-context index and a predicate-object-subject-context index.\n+\n+Creating more indexes potentially speeds up querying (a lot), but also adds overhead for maintaining the indexes. Also, every added index takes up additional disk space.\n+\n+The native store automatically creates/drops indexes upon (re)initialization, so the parameter can be adjusted and upon the first refresh of the configuration the native store will change its indexing strategy, without loss of data.\n+\n+##### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n+@prefix sail: <http://www.openrdf.org/config/sail#>.\n+@prefix ns: <http://www.openrdf.org/config/sail/native#>.\n+@prefix sb: <http://www.openrdf.org/config/sail/base#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example Native store\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:SailRepository\" ;\n+      sr:sailImpl [\n+         sail:sailType \"openrdf:NativeStore\" ;\n+         sail:iterationCacheSyncThreshold \"10000\";\n+         sb:evaluationStrategyFactory \"org.eclipse.rdf4j.query.algebra.evaluation.impl.StrictEvaluationStrategyFactory\" ;\n+         ns:tripleIndexes \"spoc,posc\"\n+      ]\n+   ].\n+```\n+\n+#### Elasticsearch Store\n+\n+The Elasticsearch Store is an RDF4J database that persists all data directly in Elasticsearch (not to be confused with the Elasticsearch Fulltext Search Sail, which is an adapter Sail implementation to provided full-text search indexing on top of other RDF databases). Its `sail:sailType` value is `\"rdf4j:ElasticsearchStore\"`.\n+\n+The parameter namespace for Elasticsearch Store is `http://rdf4j.org/config/sail/elasticsearchstore`, commonly abbreviated to `ess`. It takes the following configuration options:\n+\n+- `ess:hostname` (string). Specifies the hostname to use for connecting to Elasticsearch (required).\n+- `ess:port` (int). Specifies the port number to use for connecting to Elasticsearch (optional).\n+- `ess:clusterName` (string). Specifies the Elasticsearch cluster name (optional).\n+- `ess:index` (string). Specifies the index name to use for storage and  retrieval of data (optional).\n+\n+##### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n+@prefix sail: <http://www.openrdf.org/config/sail#>.\n+@prefix ess: <http://rdf4j.org/config/sail/elasticsearchstore#>.\n+@prefix sb: <http://www.openrdf.org/config/sail/base#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example Elasticsearch store\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:SailRepository\" ;\n+      sr:sailImpl [\n+         sail:sailType \"rdf4j:ElasticsearchStore\" ;\n+         sail:iterationCacheSyncThreshold \"10000\";\n+         ess:hostname \"localhost\";\n+         ess:port 9200;\n+         ess:clusterName \"myCluster\";\n+         ess:index \"myIndex\";\n+         sb:evaluationStrategyFactory \"org.eclipse.rdf4j.query.algebra.evaluation.impl.StrictEvaluationStrategyFactory\"\n+      ]\n+   ].\n+```\n+\n+### Sail Adapter implementations\n+\n+Sail Adapters, or \"Stackable Sails\", are Sail implementations that implement intercepting behavior for operations on RDF databases before delegating down to the wrapped Sail implementation (ultimately a [base Sail](#base-sails), though of course multiple Stackable Sails can be stacked on top of each other as well).\n+\n+Every Sail Adapter has at least one required parameter:\n+\n+- `sail:delegate`. Specifies and configures the wrapped Sail implementation (required). This is typically supplied as a nested blank node, which in turns has the implementation-specific configuration parameter.\n+\n+#### RDF Schema inferencer\n+\n+The RDF Schema inferencer is an Sail Adapter that performs rule-based entailment as defined in the [RDF 1.1 Semantics](https://www.w3.org/TR/rdf11-mt/) recommendation. Reasoning happens in a forward-chaining manner on update operations, and the entailed statements are sent to be persisted by the wrapped Sail. The inferencer also caches RDF Schema statements to speed up entailment and retrieval operations.\n+\n+The `sail:sailType` value for the RDF Schema inferencer is `\"rdf4j:SchemaCachingRDFSInferencer\"`.\n+\n+##### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n+@prefix sail: <http://www.openrdf.org/config/sail#>.\n+@prefix ms: <http://www.openrdf.org/config/sail/memory#>.\n+@prefix sb: <http://www.openrdf.org/config/sail/base#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example memory store with RDF Schema entailment\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:SailRepository\" ;\n+      sr:sailImpl [\n+         sail:sailType \"rdf4j:SchemaCachingRDFSInferencer\";\n+         sail:delegate [\n+             sail:sailType \"openrdf:MemoryStore\" ;\n+             ...\n+         ];\n+      ]\n+   ].\n+```\n+\n+#### Direct Type inferencer\n+\n+The Direct Type inferencer is an Sail Adapter that performs entailment on the\n+the class and instance inheritance hierarchy, asserting specific \"shortcut\"\n+properties (`sesame:directType`, `sesame:directSubClassOf` and\n+`sesame:directSubPropertyOf`) that allow querying for the _direct_ type or\n+subclass of a resource.  Reasoning happens in a forward-chaining manner on\n+update operations, and the entailed statements are sent to be persisted by the\n+wrapped Sail.\n+\n+The `sail:sailType` value is `\"openrdf:DirectTypeHierarchyInferencer\"`.\n+\n+##### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n+@prefix sail: <http://www.openrdf.org/config/sail#>.\n+@prefix ms: <http://www.openrdf.org/config/sail/memory#>.\n+@prefix sb: <http://www.openrdf.org/config/sail/base#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example Memory store with direct type entailment\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:SailRepository\" ;\n+      sr:sailImpl [\n+         sail:sailType \"openrdf:DirectTypeHierarchyInferencer\";\n+         sail:delegate [\n+             sail:sailType \"openrdf:MemoryStore\" ;\n+             ...\n+         ];\n+      ]\n+   ].\n+```\n+\n+#### SHACL Sail\n+\n+The SHACL Sail is a Sail Adapter that performs transaction validation using the Shapes Constraint Language [SHACL](https://www.w3.org/TR/shacl/). More information about the use of the SHACL Sail can be found in [Validation with SHACL](/documentation/programming/shacl).\n+\n+The `sail:sailType` value of the SHACL Sail is `\"rdf4j:ShaclSail\"`. Its parameter namespace is `http://rdf4j.org/config/sail/shacl#`, commonly abbreviated to `ssc`. It takes the following configuration options:\n+\n+- `ssc:parallelValidation` (boolean): Enables parallel validation (optional).\n+- `ssc:undefinedTargetValidatesAllSubjects` (boolean): Specifies if an undefined target in a shape leads to validating all subject (optional).\n+- `ssc:logValidationPlans` (boolean): Specifies if validation plans are sent to the logging framework (optional).\n+- `ssc:logValidationViolations` (boolean): Specifies if shape violations are sent to the logging framework (optional).\n+- `ssc:ignoreNoShapesLoadedException` (boolean): Specifies if the \"no shapes loaded\" error is ignored (optional).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f3ac9db70ddbc9f385d984bbeb0a1fef72c5fff7"}, "originalPosition": 419}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzMjU1MTg2", "url": "https://github.com/eclipse/rdf4j/pull/2521#pullrequestreview-493255186", "createdAt": "2020-09-22T08:57:29Z", "commit": {"oid": "f3ac9db70ddbc9f385d984bbeb0a1fef72c5fff7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwODo1NzoyOVrOHVwinA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwODo1NzoyOVrOHVwinA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjU3NzQzNg==", "bodyText": "Explanation: When combined with transactions using isolation level SNAPSHOT the validation guarantee is equivalent to using SERIALIZABLE without the performance impact.", "url": "https://github.com/eclipse/rdf4j/pull/2521#discussion_r492577436", "createdAt": "2020-09-22T08:57:29Z", "author": {"login": "hmottestad"}, "path": "site/content/documentation/reference/configuration.md", "diffHunk": "@@ -0,0 +1,458 @@\n+---\n+title: \"Repository and SAIL configuration\"\n+toc: true\n+weight: 4\n+autonumbering: true\n+---\n+\n+RDF4J repositories and SAIL configuration can be set up and changed by means of a configuration file in Turtle syntax. Here, we document the way the various components (repositories and SAILs) work together and how a full database configuration can be defined by \"stacking\" SAILs and wrapping in a Repository implementation.\n+\n+<!--more-->\n+\n+## Repository configuration\n+\n+A Repository configuration consists of a single RDF subject of type `rep:Repository`. Typically this subject is a blank node (`[]` in Turtle syntax), and is assigned its configuration parameters through use of RDF properties.\n+\n+The parameter namespace is `http://www.openrdf.org/config/repository#`, commonly abbreviated to `rep`.\n+It takes following configuration parameters:\n+\n+- `rep:repositoryID` (String): the repository identifier (required). This must be unique within the running system.\n+- `rdfs:label` (String): a human-readable name or short description of the repository (optional).\n+- `rep:repositoryImpl`: this specifies and configures the specific repository implementation (required). This is typically supplied as a nested blank node, which in turns has the implementation-specific configuration parameter. Every repository implemenation _must_ specify a `rep:repositoryType`.\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"SPARQL endpoint at http://example.org/\" ;\n+   rep:repositoryImpl [ rep:repositoryType \"example:repositoryType\";\n+                        # your implementation config here\n+   ].\n+```\n+\n+### SPARQLRepository\n+\n+The `SPARQLRepository` repository implementation is a client interface for a remote SPARQL endpoint.\n+Its `rep:repositoryType` value is `\"openrdf:SPARQLRepository\"`.\n+\n+The parameter namespace is `http://www.openrdf.org/config/repository/sparql#`, commonly abbreviated to `sparql`.\n+It takes the following configuration parameters:\n+\n+- `sparql:query-endpoint` (IRI): the SPARQL _query_ endpoint URL (required).\n+- `sparql:update-endpoint` (IRI): the SPARQL _update_ endpoint URL (optional). Only needs to be defined if different from the query endpoint.\n+\n+#### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sparql: <http://www.openrdf.org/config/repository/sparql#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"SPARQL endpoint at http://example.org/\" .\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:SPARQLRepository\" ;\n+      sparql:query-endpoint <http://example.org/sparql> ;\n+      sparql:update-endpoint <http://example.org/sparql/update> ;\n+   ];\n+```\n+\n+### HTTPRepository\n+\n+The `HTTPRepository` repository implementation is a client interface for a\n+store on a (remote) RDF4J Server. It differs from `SPARQLRepository` in that it\n+implements several RDF4J-specific  extensions to the standard SPARQL Protocol\n+which enhance transactional support and general performance.  Its\n+`rep:repositoryType` value is `\"openrdf:HTTPRepository\"`.\n+\n+The parameter namespace is `http://www.openrdf.org/config/repository/http#`, commonly abbreviated to `hr`.\n+It takes the following configuration parameters:\n+\n+- `hr:repositoryURL` (IRI): the location of the repository on an RDF4J Server (required).\n+- `hr:username` (string): username for basic authentication (optional).\n+- `hr:password` (string): password for basic authentication (optional).\n+\n+#### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix hr: <http://www.openrdf.org/config/repository/http#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"example repository on locally running RDF4J Server\" .\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:HTTPRepository\" ;\n+      hr:repositoryURL <http://localhost:8080/rdf4j-server/repositories/test>\n+   ];\n+```\n+\n+### SailRepository\n+\n+The {{< javadoc \"SailRepository\" \"repository/sail/SailRepository.html\" >}} repository implementation is the main implementation for direct access to a local RDF database (a SAIL implementation). Its `rep:repositoryType` is `openrdf:SailRepository`.\n+\n+The parameter namespace is `http://www.openrdf.org/config/repository/sail#`, commonly abbreviated to `sr`.\n+It takes the following configuration parameters:\n+\n+- `sr:sailImpl`: this specifies and configures the specific SAIL implementation (required). This is typically supplied as a nested blank node, which in turns has the SAIL-specific configuration parameters. Every SAIL implementation _must_ specify a `sail:sailType` property.\n+\n+#### Example configuration\n+\n+In this example we configure a simple SailRepository using a MemoryStore SAIL. See the section [SAIL Configuration](#sail-configuration) for more details.\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n+@prefix sail: <http://www.openrdf.org/config/sail#>.\n+@prefix ms: <http://www.openrdf.org/config/sail/memory#>.\n+@prefix sb: <http://www.openrdf.org/config/sail/base#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example Memory store\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:SailRepository\" ;\n+      sr:sailImpl [\n+         sail:sailType \"openrdf:MemoryStore\" ;\n+         sail:iterationCacheSyncThreshold \"10000\";\n+         ms:persist true;\n+         ms:syncDelay 0;\n+         sb:evaluationStrategyFactory \"org.eclipse.rdf4j.query.algebra.evaluation.impl.StrictEvaluationStrategyFactory\"\n+      ]\n+   ].\n+```\n+\n+### DatasetRepository\n+\n+The {{< javadoc \"DatasetRepository\" \"repository/dataset/DatasetRepository.html\" >}} is a wrapper around a `SailRepository` that dynamically loads datasets specified in the `FROM` and `FROM NAMED` clauses in SPARQL queries.\n+\n+#### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example Dataset Repository\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:DatasetRepository\" ;\n+      rep:delegate [\n+        rep:repositoryType \"openrdf:SailRepository\" ;\n+        sr:sailImpl [\n+          ...\n+        ]\n+      ]\n+   ].\n+```\n+\n+### ContextAwareRepository\n+\n+The {{< javadoc \"ContextAwareRepository\" \"repository/contextaware/ContextAwareRepository.html\" >}} is a wrapper around any other `Repository`. It can be used to configure the default context(s) on which query, update, or delete operations operate per default.\n+\n+The parameter namespace is `http://www.openrdf.org/config/repository/contextaware#`, commonly abbreviated to `car`.\n+It takes the following parameters:\n+\n+- `car:readContext`. Specifies the context(s) used per default when executing read operations (including SPARQL queries). Can be specified with multiple values to include more than one context;\n+- `car:insertContext`. Specifies the context used for insertion operations.\n+- `car:removeContext`. Specifies the context(s) used for delete operations. Can be specified with multiple values to include more than one context.\n+\n+#### Example configuration\n+\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix car: <http://www.openrdf.org/config/repository/contextaware#>.\n+@prefix ex: <http://example.org/>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example Context-aware repository\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:ContextAwareRepository\" ;\n+      car:readContext ex:namedGraph1, ex:namedGraph2;\n+      rep:delegate [\n+        rep:repositoryType \"openrdf:HTTPRepository\" ;\n+      ]\n+   ].\n+```\n+\n+## Sail Configuration\n+\n+Sail implementations come in two basic types: _base_ Sails, and Sail wrappers / adapters (sometimes also referred to as \"Stackable Sails\").\n+\n+Each Sail configuration identifies one base Sail, which typically functions as the actual database layer. This base Sail configuration can optionally be wrapped in one or more Stackable Sail configurations. The entire \"Sail stack\" is then usually wrapped as part of a [SailRepository configuration](#SailRepository).\n+\n+The parameter namespace is `http://www.openrdf.org/config/sail#`, commonly abbreviated to `sail`.\n+Every Sail in a Sail configuration has at least one required parameter:\n+\n+- `sail:sailType` - this identifies the type of Sail being configured.\n+- `sail:iterationCacheSyncThreshold` (integer). Specifies the size of the internal cache for query result iterations before on-disk overflow is enabled.\n+\n+### Base Sails\n+\n+Base Sail implementations are responsible for persistence of data and handling of queries, transactions and update operations on that data. A base Sail is typically a database.\n+\n+The parameter namespace for common parameters of base Sails is `http://www.openrdf.org/config/sail/base#`, commonly abbreviated to `sb`.\n+\n+Base Sails commonly take the following parameter:\n+\n+- `sb:evaluationStrategyFactory` (string). Specifies the full classname of the `EvaluationStrategyFactory` implementation used for this store. This controls how SPARQL queries are evaluated.\n+\n+#### Memory Store\n+\n+A Memory Store is an RDF4J database that keeps all data in main memory, with optional persistence on disk. Its `sail:sailType` value is `\"openrdf:MemoryStore\"`.\n+\n+The parameter namespace for Memory Store  is `http://www.openrdf.org/config/sail/memory#`, commonly abbreviated to `ms`.\n+It takes the following configuration options:\n+\n+- `ms:persist` (boolean). Specifies if the store persists its data to disk (required). Persistent memory stores write their data to disk before being shut down and read this data back in the next time they are initialized. Non-persistent memory stores are always empty upon initialization.\n+- `ms:syncDelay` (integer). Specifies the amount of time (in milliseconds) between an update operation completing and the store syncing its contents to disk (optional). By default, the memory store persistence mechanism synchronizes the disk backup directly upon any change to the contents of the store. Setting a delay on this synchronization can be useful if your application performs several transactions in sequence and you want to prevent disk synchronization in the middle of this sequence to improve update performance.\n+\n+##### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n+@prefix sail: <http://www.openrdf.org/config/sail#>.\n+@prefix ms: <http://www.openrdf.org/config/sail/memory#>.\n+@prefix sb: <http://www.openrdf.org/config/sail/base#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example Memory store\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:SailRepository\" ;\n+      sr:sailImpl [\n+         sail:sailType \"openrdf:MemoryStore\" ;\n+         sail:iterationCacheSyncThreshold \"10000\";\n+         ms:persist true;\n+         ms:syncDelay 0;\n+         sb:evaluationStrategyFactory \"org.eclipse.rdf4j.query.algebra.evaluation.impl.StrictEvaluationStrategyFactory\"\n+      ]\n+   ].\n+```\n+\n+#### Native Store\n+\n+A Native Store is an RDF4J database that persists all data directly on disk in an indexed binary format. Its `sail:sailType` value is `\"openrdf:NativeStore\"`.\n+\n+The parameter namespace for Native Store  is `http://www.openrdf.org/config/sail/native#`, commonly abbreviated to `ns`.\n+It takes the following configuration options:\n+\n+- `ns:tripleIndex` (string).  Specifices a comma-separated list of indexes for the store to use (optional).\n+- `ns:forceSync` (boolean). Specifies if an OS-level force sync should be executed after every update (optional).\n+- `ns:valueCacheSize` (integer). Specifies the size of the value cache (optional).\n+- `ns:valueIDCacheSize` (integer). Specifices the size of the value ID cache (optional).\n+- `ns:namespaceCacheSize` (integer). Specifies the size of the namespace cache (optional).\n+- `ns:namespaceIDCacheSize` (integer). Specifies the size of the namespace ID cache (optional).\n+\n+##### Native store indexes\n+\n+The native store uses on-disk indexes to speed up querying. It uses B-Trees for indexing statements, where the index key consists of four fields: subject (s), predicate (p), object (o) and context (c). The order in which each of these fields is used in the key determines the usability of an index on a specify statement query pattern: searching statements with a specific subject in an index that has the subject as the first field is significantly faster than searching these same statements in an index where the subject field is second or third. In the worst case, the \u2018wrong\u2019 statement pattern will result in a sequential scan over the entire set of statements.\n+\n+By default, the native repository only uses two indexes, one with a subject-predicate-object-context (spoc) key pattern and one with a predicate-object-subject-context (posc) key pattern. However, it is possible to define more or other indexes for the native repository, using the `ns:tripleIndex` parameter. This can be used to optimize performance for query patterns that occur frequently.\n+\n+The subject, predicate, object and context fields are represented by the characters \u2018s\u2019, \u2018p\u2019, \u2018o\u2019 and \u2018c\u2019 respectively. Indexes can be specified by creating 4-letter words from these four characters. Multiple indexes can be specified by separating these words with commas, spaces and/or tabs. For example, the string \u201cspoc, posc\u201d specifies two indexes; a subject-predicate-object-context index and a predicate-object-subject-context index.\n+\n+Creating more indexes potentially speeds up querying (a lot), but also adds overhead for maintaining the indexes. Also, every added index takes up additional disk space.\n+\n+The native store automatically creates/drops indexes upon (re)initialization, so the parameter can be adjusted and upon the first refresh of the configuration the native store will change its indexing strategy, without loss of data.\n+\n+##### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n+@prefix sail: <http://www.openrdf.org/config/sail#>.\n+@prefix ns: <http://www.openrdf.org/config/sail/native#>.\n+@prefix sb: <http://www.openrdf.org/config/sail/base#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example Native store\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:SailRepository\" ;\n+      sr:sailImpl [\n+         sail:sailType \"openrdf:NativeStore\" ;\n+         sail:iterationCacheSyncThreshold \"10000\";\n+         sb:evaluationStrategyFactory \"org.eclipse.rdf4j.query.algebra.evaluation.impl.StrictEvaluationStrategyFactory\" ;\n+         ns:tripleIndexes \"spoc,posc\"\n+      ]\n+   ].\n+```\n+\n+#### Elasticsearch Store\n+\n+The Elasticsearch Store is an RDF4J database that persists all data directly in Elasticsearch (not to be confused with the Elasticsearch Fulltext Search Sail, which is an adapter Sail implementation to provided full-text search indexing on top of other RDF databases). Its `sail:sailType` value is `\"rdf4j:ElasticsearchStore\"`.\n+\n+The parameter namespace for Elasticsearch Store is `http://rdf4j.org/config/sail/elasticsearchstore`, commonly abbreviated to `ess`. It takes the following configuration options:\n+\n+- `ess:hostname` (string). Specifies the hostname to use for connecting to Elasticsearch (required).\n+- `ess:port` (int). Specifies the port number to use for connecting to Elasticsearch (optional).\n+- `ess:clusterName` (string). Specifies the Elasticsearch cluster name (optional).\n+- `ess:index` (string). Specifies the index name to use for storage and  retrieval of data (optional).\n+\n+##### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n+@prefix sail: <http://www.openrdf.org/config/sail#>.\n+@prefix ess: <http://rdf4j.org/config/sail/elasticsearchstore#>.\n+@prefix sb: <http://www.openrdf.org/config/sail/base#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example Elasticsearch store\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:SailRepository\" ;\n+      sr:sailImpl [\n+         sail:sailType \"rdf4j:ElasticsearchStore\" ;\n+         sail:iterationCacheSyncThreshold \"10000\";\n+         ess:hostname \"localhost\";\n+         ess:port 9200;\n+         ess:clusterName \"myCluster\";\n+         ess:index \"myIndex\";\n+         sb:evaluationStrategyFactory \"org.eclipse.rdf4j.query.algebra.evaluation.impl.StrictEvaluationStrategyFactory\"\n+      ]\n+   ].\n+```\n+\n+### Sail Adapter implementations\n+\n+Sail Adapters, or \"Stackable Sails\", are Sail implementations that implement intercepting behavior for operations on RDF databases before delegating down to the wrapped Sail implementation (ultimately a [base Sail](#base-sails), though of course multiple Stackable Sails can be stacked on top of each other as well).\n+\n+Every Sail Adapter has at least one required parameter:\n+\n+- `sail:delegate`. Specifies and configures the wrapped Sail implementation (required). This is typically supplied as a nested blank node, which in turns has the implementation-specific configuration parameter.\n+\n+#### RDF Schema inferencer\n+\n+The RDF Schema inferencer is an Sail Adapter that performs rule-based entailment as defined in the [RDF 1.1 Semantics](https://www.w3.org/TR/rdf11-mt/) recommendation. Reasoning happens in a forward-chaining manner on update operations, and the entailed statements are sent to be persisted by the wrapped Sail. The inferencer also caches RDF Schema statements to speed up entailment and retrieval operations.\n+\n+The `sail:sailType` value for the RDF Schema inferencer is `\"rdf4j:SchemaCachingRDFSInferencer\"`.\n+\n+##### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n+@prefix sail: <http://www.openrdf.org/config/sail#>.\n+@prefix ms: <http://www.openrdf.org/config/sail/memory#>.\n+@prefix sb: <http://www.openrdf.org/config/sail/base#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example memory store with RDF Schema entailment\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:SailRepository\" ;\n+      sr:sailImpl [\n+         sail:sailType \"rdf4j:SchemaCachingRDFSInferencer\";\n+         sail:delegate [\n+             sail:sailType \"openrdf:MemoryStore\" ;\n+             ...\n+         ];\n+      ]\n+   ].\n+```\n+\n+#### Direct Type inferencer\n+\n+The Direct Type inferencer is an Sail Adapter that performs entailment on the\n+the class and instance inheritance hierarchy, asserting specific \"shortcut\"\n+properties (`sesame:directType`, `sesame:directSubClassOf` and\n+`sesame:directSubPropertyOf`) that allow querying for the _direct_ type or\n+subclass of a resource.  Reasoning happens in a forward-chaining manner on\n+update operations, and the entailed statements are sent to be persisted by the\n+wrapped Sail.\n+\n+The `sail:sailType` value is `\"openrdf:DirectTypeHierarchyInferencer\"`.\n+\n+##### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n+@prefix sail: <http://www.openrdf.org/config/sail#>.\n+@prefix ms: <http://www.openrdf.org/config/sail/memory#>.\n+@prefix sb: <http://www.openrdf.org/config/sail/base#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example Memory store with direct type entailment\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:SailRepository\" ;\n+      sr:sailImpl [\n+         sail:sailType \"openrdf:DirectTypeHierarchyInferencer\";\n+         sail:delegate [\n+             sail:sailType \"openrdf:MemoryStore\" ;\n+             ...\n+         ];\n+      ]\n+   ].\n+```\n+\n+#### SHACL Sail\n+\n+The SHACL Sail is a Sail Adapter that performs transaction validation using the Shapes Constraint Language [SHACL](https://www.w3.org/TR/shacl/). More information about the use of the SHACL Sail can be found in [Validation with SHACL](/documentation/programming/shacl).\n+\n+The `sail:sailType` value of the SHACL Sail is `\"rdf4j:ShaclSail\"`. Its parameter namespace is `http://rdf4j.org/config/sail/shacl#`, commonly abbreviated to `ssc`. It takes the following configuration options:\n+\n+- `ssc:parallelValidation` (boolean): Enables parallel validation (optional).\n+- `ssc:undefinedTargetValidatesAllSubjects` (boolean): Specifies if an undefined target in a shape leads to validating all subject (optional).\n+- `ssc:logValidationPlans` (boolean): Specifies if validation plans are sent to the logging framework (optional).\n+- `ssc:logValidationViolations` (boolean): Specifies if shape violations are sent to the logging framework (optional).\n+- `ssc:ignoreNoShapesLoadedException` (boolean): Specifies if the \"no shapes loaded\" error is ignored (optional).\n+- `ssc:validationEnabled` (boolean): Specifies if transaction valudation is enabled by default (optional).\n+- `ssc:cacheSelectNodes` (boolean): Specifies if select nodes are cached (optional).\n+- `ssc:globalLogValidationExecution` (boolean): Specifies if validation execution details are sent to the logging framework (optional).\n+- `ssc:rdfsSubClassReasoning` (boolean): Enables RDF Schema Subclass entailment (optional).\n+- `ssc:performanceLogging` (boolean): Enables performance logging (optional).\n+- `ssc:serializableValidation` (boolean):", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f3ac9db70ddbc9f385d984bbeb0a1fef72c5fff7"}, "originalPosition": 425}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzMjU2NjQy", "url": "https://github.com/eclipse/rdf4j/pull/2521#pullrequestreview-493256642", "createdAt": "2020-09-22T08:59:21Z", "commit": {"oid": "f3ac9db70ddbc9f385d984bbeb0a1fef72c5fff7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwODo1OToyMVrOHVwnBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwODo1OToyMVrOHVwnBQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjU3ODU2NQ==", "bodyText": "Link: http://rdf4j.org/shacl-extensions#", "url": "https://github.com/eclipse/rdf4j/pull/2521#discussion_r492578565", "createdAt": "2020-09-22T08:59:21Z", "author": {"login": "hmottestad"}, "path": "site/content/documentation/reference/configuration.md", "diffHunk": "@@ -0,0 +1,458 @@\n+---\n+title: \"Repository and SAIL configuration\"\n+toc: true\n+weight: 4\n+autonumbering: true\n+---\n+\n+RDF4J repositories and SAIL configuration can be set up and changed by means of a configuration file in Turtle syntax. Here, we document the way the various components (repositories and SAILs) work together and how a full database configuration can be defined by \"stacking\" SAILs and wrapping in a Repository implementation.\n+\n+<!--more-->\n+\n+## Repository configuration\n+\n+A Repository configuration consists of a single RDF subject of type `rep:Repository`. Typically this subject is a blank node (`[]` in Turtle syntax), and is assigned its configuration parameters through use of RDF properties.\n+\n+The parameter namespace is `http://www.openrdf.org/config/repository#`, commonly abbreviated to `rep`.\n+It takes following configuration parameters:\n+\n+- `rep:repositoryID` (String): the repository identifier (required). This must be unique within the running system.\n+- `rdfs:label` (String): a human-readable name or short description of the repository (optional).\n+- `rep:repositoryImpl`: this specifies and configures the specific repository implementation (required). This is typically supplied as a nested blank node, which in turns has the implementation-specific configuration parameter. Every repository implemenation _must_ specify a `rep:repositoryType`.\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"SPARQL endpoint at http://example.org/\" ;\n+   rep:repositoryImpl [ rep:repositoryType \"example:repositoryType\";\n+                        # your implementation config here\n+   ].\n+```\n+\n+### SPARQLRepository\n+\n+The `SPARQLRepository` repository implementation is a client interface for a remote SPARQL endpoint.\n+Its `rep:repositoryType` value is `\"openrdf:SPARQLRepository\"`.\n+\n+The parameter namespace is `http://www.openrdf.org/config/repository/sparql#`, commonly abbreviated to `sparql`.\n+It takes the following configuration parameters:\n+\n+- `sparql:query-endpoint` (IRI): the SPARQL _query_ endpoint URL (required).\n+- `sparql:update-endpoint` (IRI): the SPARQL _update_ endpoint URL (optional). Only needs to be defined if different from the query endpoint.\n+\n+#### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sparql: <http://www.openrdf.org/config/repository/sparql#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"SPARQL endpoint at http://example.org/\" .\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:SPARQLRepository\" ;\n+      sparql:query-endpoint <http://example.org/sparql> ;\n+      sparql:update-endpoint <http://example.org/sparql/update> ;\n+   ];\n+```\n+\n+### HTTPRepository\n+\n+The `HTTPRepository` repository implementation is a client interface for a\n+store on a (remote) RDF4J Server. It differs from `SPARQLRepository` in that it\n+implements several RDF4J-specific  extensions to the standard SPARQL Protocol\n+which enhance transactional support and general performance.  Its\n+`rep:repositoryType` value is `\"openrdf:HTTPRepository\"`.\n+\n+The parameter namespace is `http://www.openrdf.org/config/repository/http#`, commonly abbreviated to `hr`.\n+It takes the following configuration parameters:\n+\n+- `hr:repositoryURL` (IRI): the location of the repository on an RDF4J Server (required).\n+- `hr:username` (string): username for basic authentication (optional).\n+- `hr:password` (string): password for basic authentication (optional).\n+\n+#### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix hr: <http://www.openrdf.org/config/repository/http#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"example repository on locally running RDF4J Server\" .\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:HTTPRepository\" ;\n+      hr:repositoryURL <http://localhost:8080/rdf4j-server/repositories/test>\n+   ];\n+```\n+\n+### SailRepository\n+\n+The {{< javadoc \"SailRepository\" \"repository/sail/SailRepository.html\" >}} repository implementation is the main implementation for direct access to a local RDF database (a SAIL implementation). Its `rep:repositoryType` is `openrdf:SailRepository`.\n+\n+The parameter namespace is `http://www.openrdf.org/config/repository/sail#`, commonly abbreviated to `sr`.\n+It takes the following configuration parameters:\n+\n+- `sr:sailImpl`: this specifies and configures the specific SAIL implementation (required). This is typically supplied as a nested blank node, which in turns has the SAIL-specific configuration parameters. Every SAIL implementation _must_ specify a `sail:sailType` property.\n+\n+#### Example configuration\n+\n+In this example we configure a simple SailRepository using a MemoryStore SAIL. See the section [SAIL Configuration](#sail-configuration) for more details.\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n+@prefix sail: <http://www.openrdf.org/config/sail#>.\n+@prefix ms: <http://www.openrdf.org/config/sail/memory#>.\n+@prefix sb: <http://www.openrdf.org/config/sail/base#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example Memory store\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:SailRepository\" ;\n+      sr:sailImpl [\n+         sail:sailType \"openrdf:MemoryStore\" ;\n+         sail:iterationCacheSyncThreshold \"10000\";\n+         ms:persist true;\n+         ms:syncDelay 0;\n+         sb:evaluationStrategyFactory \"org.eclipse.rdf4j.query.algebra.evaluation.impl.StrictEvaluationStrategyFactory\"\n+      ]\n+   ].\n+```\n+\n+### DatasetRepository\n+\n+The {{< javadoc \"DatasetRepository\" \"repository/dataset/DatasetRepository.html\" >}} is a wrapper around a `SailRepository` that dynamically loads datasets specified in the `FROM` and `FROM NAMED` clauses in SPARQL queries.\n+\n+#### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example Dataset Repository\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:DatasetRepository\" ;\n+      rep:delegate [\n+        rep:repositoryType \"openrdf:SailRepository\" ;\n+        sr:sailImpl [\n+          ...\n+        ]\n+      ]\n+   ].\n+```\n+\n+### ContextAwareRepository\n+\n+The {{< javadoc \"ContextAwareRepository\" \"repository/contextaware/ContextAwareRepository.html\" >}} is a wrapper around any other `Repository`. It can be used to configure the default context(s) on which query, update, or delete operations operate per default.\n+\n+The parameter namespace is `http://www.openrdf.org/config/repository/contextaware#`, commonly abbreviated to `car`.\n+It takes the following parameters:\n+\n+- `car:readContext`. Specifies the context(s) used per default when executing read operations (including SPARQL queries). Can be specified with multiple values to include more than one context;\n+- `car:insertContext`. Specifies the context used for insertion operations.\n+- `car:removeContext`. Specifies the context(s) used for delete operations. Can be specified with multiple values to include more than one context.\n+\n+#### Example configuration\n+\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix car: <http://www.openrdf.org/config/repository/contextaware#>.\n+@prefix ex: <http://example.org/>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example Context-aware repository\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:ContextAwareRepository\" ;\n+      car:readContext ex:namedGraph1, ex:namedGraph2;\n+      rep:delegate [\n+        rep:repositoryType \"openrdf:HTTPRepository\" ;\n+      ]\n+   ].\n+```\n+\n+## Sail Configuration\n+\n+Sail implementations come in two basic types: _base_ Sails, and Sail wrappers / adapters (sometimes also referred to as \"Stackable Sails\").\n+\n+Each Sail configuration identifies one base Sail, which typically functions as the actual database layer. This base Sail configuration can optionally be wrapped in one or more Stackable Sail configurations. The entire \"Sail stack\" is then usually wrapped as part of a [SailRepository configuration](#SailRepository).\n+\n+The parameter namespace is `http://www.openrdf.org/config/sail#`, commonly abbreviated to `sail`.\n+Every Sail in a Sail configuration has at least one required parameter:\n+\n+- `sail:sailType` - this identifies the type of Sail being configured.\n+- `sail:iterationCacheSyncThreshold` (integer). Specifies the size of the internal cache for query result iterations before on-disk overflow is enabled.\n+\n+### Base Sails\n+\n+Base Sail implementations are responsible for persistence of data and handling of queries, transactions and update operations on that data. A base Sail is typically a database.\n+\n+The parameter namespace for common parameters of base Sails is `http://www.openrdf.org/config/sail/base#`, commonly abbreviated to `sb`.\n+\n+Base Sails commonly take the following parameter:\n+\n+- `sb:evaluationStrategyFactory` (string). Specifies the full classname of the `EvaluationStrategyFactory` implementation used for this store. This controls how SPARQL queries are evaluated.\n+\n+#### Memory Store\n+\n+A Memory Store is an RDF4J database that keeps all data in main memory, with optional persistence on disk. Its `sail:sailType` value is `\"openrdf:MemoryStore\"`.\n+\n+The parameter namespace for Memory Store  is `http://www.openrdf.org/config/sail/memory#`, commonly abbreviated to `ms`.\n+It takes the following configuration options:\n+\n+- `ms:persist` (boolean). Specifies if the store persists its data to disk (required). Persistent memory stores write their data to disk before being shut down and read this data back in the next time they are initialized. Non-persistent memory stores are always empty upon initialization.\n+- `ms:syncDelay` (integer). Specifies the amount of time (in milliseconds) between an update operation completing and the store syncing its contents to disk (optional). By default, the memory store persistence mechanism synchronizes the disk backup directly upon any change to the contents of the store. Setting a delay on this synchronization can be useful if your application performs several transactions in sequence and you want to prevent disk synchronization in the middle of this sequence to improve update performance.\n+\n+##### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n+@prefix sail: <http://www.openrdf.org/config/sail#>.\n+@prefix ms: <http://www.openrdf.org/config/sail/memory#>.\n+@prefix sb: <http://www.openrdf.org/config/sail/base#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example Memory store\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:SailRepository\" ;\n+      sr:sailImpl [\n+         sail:sailType \"openrdf:MemoryStore\" ;\n+         sail:iterationCacheSyncThreshold \"10000\";\n+         ms:persist true;\n+         ms:syncDelay 0;\n+         sb:evaluationStrategyFactory \"org.eclipse.rdf4j.query.algebra.evaluation.impl.StrictEvaluationStrategyFactory\"\n+      ]\n+   ].\n+```\n+\n+#### Native Store\n+\n+A Native Store is an RDF4J database that persists all data directly on disk in an indexed binary format. Its `sail:sailType` value is `\"openrdf:NativeStore\"`.\n+\n+The parameter namespace for Native Store  is `http://www.openrdf.org/config/sail/native#`, commonly abbreviated to `ns`.\n+It takes the following configuration options:\n+\n+- `ns:tripleIndex` (string).  Specifices a comma-separated list of indexes for the store to use (optional).\n+- `ns:forceSync` (boolean). Specifies if an OS-level force sync should be executed after every update (optional).\n+- `ns:valueCacheSize` (integer). Specifies the size of the value cache (optional).\n+- `ns:valueIDCacheSize` (integer). Specifices the size of the value ID cache (optional).\n+- `ns:namespaceCacheSize` (integer). Specifies the size of the namespace cache (optional).\n+- `ns:namespaceIDCacheSize` (integer). Specifies the size of the namespace ID cache (optional).\n+\n+##### Native store indexes\n+\n+The native store uses on-disk indexes to speed up querying. It uses B-Trees for indexing statements, where the index key consists of four fields: subject (s), predicate (p), object (o) and context (c). The order in which each of these fields is used in the key determines the usability of an index on a specify statement query pattern: searching statements with a specific subject in an index that has the subject as the first field is significantly faster than searching these same statements in an index where the subject field is second or third. In the worst case, the \u2018wrong\u2019 statement pattern will result in a sequential scan over the entire set of statements.\n+\n+By default, the native repository only uses two indexes, one with a subject-predicate-object-context (spoc) key pattern and one with a predicate-object-subject-context (posc) key pattern. However, it is possible to define more or other indexes for the native repository, using the `ns:tripleIndex` parameter. This can be used to optimize performance for query patterns that occur frequently.\n+\n+The subject, predicate, object and context fields are represented by the characters \u2018s\u2019, \u2018p\u2019, \u2018o\u2019 and \u2018c\u2019 respectively. Indexes can be specified by creating 4-letter words from these four characters. Multiple indexes can be specified by separating these words with commas, spaces and/or tabs. For example, the string \u201cspoc, posc\u201d specifies two indexes; a subject-predicate-object-context index and a predicate-object-subject-context index.\n+\n+Creating more indexes potentially speeds up querying (a lot), but also adds overhead for maintaining the indexes. Also, every added index takes up additional disk space.\n+\n+The native store automatically creates/drops indexes upon (re)initialization, so the parameter can be adjusted and upon the first refresh of the configuration the native store will change its indexing strategy, without loss of data.\n+\n+##### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n+@prefix sail: <http://www.openrdf.org/config/sail#>.\n+@prefix ns: <http://www.openrdf.org/config/sail/native#>.\n+@prefix sb: <http://www.openrdf.org/config/sail/base#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example Native store\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:SailRepository\" ;\n+      sr:sailImpl [\n+         sail:sailType \"openrdf:NativeStore\" ;\n+         sail:iterationCacheSyncThreshold \"10000\";\n+         sb:evaluationStrategyFactory \"org.eclipse.rdf4j.query.algebra.evaluation.impl.StrictEvaluationStrategyFactory\" ;\n+         ns:tripleIndexes \"spoc,posc\"\n+      ]\n+   ].\n+```\n+\n+#### Elasticsearch Store\n+\n+The Elasticsearch Store is an RDF4J database that persists all data directly in Elasticsearch (not to be confused with the Elasticsearch Fulltext Search Sail, which is an adapter Sail implementation to provided full-text search indexing on top of other RDF databases). Its `sail:sailType` value is `\"rdf4j:ElasticsearchStore\"`.\n+\n+The parameter namespace for Elasticsearch Store is `http://rdf4j.org/config/sail/elasticsearchstore`, commonly abbreviated to `ess`. It takes the following configuration options:\n+\n+- `ess:hostname` (string). Specifies the hostname to use for connecting to Elasticsearch (required).\n+- `ess:port` (int). Specifies the port number to use for connecting to Elasticsearch (optional).\n+- `ess:clusterName` (string). Specifies the Elasticsearch cluster name (optional).\n+- `ess:index` (string). Specifies the index name to use for storage and  retrieval of data (optional).\n+\n+##### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n+@prefix sail: <http://www.openrdf.org/config/sail#>.\n+@prefix ess: <http://rdf4j.org/config/sail/elasticsearchstore#>.\n+@prefix sb: <http://www.openrdf.org/config/sail/base#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example Elasticsearch store\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:SailRepository\" ;\n+      sr:sailImpl [\n+         sail:sailType \"rdf4j:ElasticsearchStore\" ;\n+         sail:iterationCacheSyncThreshold \"10000\";\n+         ess:hostname \"localhost\";\n+         ess:port 9200;\n+         ess:clusterName \"myCluster\";\n+         ess:index \"myIndex\";\n+         sb:evaluationStrategyFactory \"org.eclipse.rdf4j.query.algebra.evaluation.impl.StrictEvaluationStrategyFactory\"\n+      ]\n+   ].\n+```\n+\n+### Sail Adapter implementations\n+\n+Sail Adapters, or \"Stackable Sails\", are Sail implementations that implement intercepting behavior for operations on RDF databases before delegating down to the wrapped Sail implementation (ultimately a [base Sail](#base-sails), though of course multiple Stackable Sails can be stacked on top of each other as well).\n+\n+Every Sail Adapter has at least one required parameter:\n+\n+- `sail:delegate`. Specifies and configures the wrapped Sail implementation (required). This is typically supplied as a nested blank node, which in turns has the implementation-specific configuration parameter.\n+\n+#### RDF Schema inferencer\n+\n+The RDF Schema inferencer is an Sail Adapter that performs rule-based entailment as defined in the [RDF 1.1 Semantics](https://www.w3.org/TR/rdf11-mt/) recommendation. Reasoning happens in a forward-chaining manner on update operations, and the entailed statements are sent to be persisted by the wrapped Sail. The inferencer also caches RDF Schema statements to speed up entailment and retrieval operations.\n+\n+The `sail:sailType` value for the RDF Schema inferencer is `\"rdf4j:SchemaCachingRDFSInferencer\"`.\n+\n+##### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n+@prefix sail: <http://www.openrdf.org/config/sail#>.\n+@prefix ms: <http://www.openrdf.org/config/sail/memory#>.\n+@prefix sb: <http://www.openrdf.org/config/sail/base#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example memory store with RDF Schema entailment\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:SailRepository\" ;\n+      sr:sailImpl [\n+         sail:sailType \"rdf4j:SchemaCachingRDFSInferencer\";\n+         sail:delegate [\n+             sail:sailType \"openrdf:MemoryStore\" ;\n+             ...\n+         ];\n+      ]\n+   ].\n+```\n+\n+#### Direct Type inferencer\n+\n+The Direct Type inferencer is an Sail Adapter that performs entailment on the\n+the class and instance inheritance hierarchy, asserting specific \"shortcut\"\n+properties (`sesame:directType`, `sesame:directSubClassOf` and\n+`sesame:directSubPropertyOf`) that allow querying for the _direct_ type or\n+subclass of a resource.  Reasoning happens in a forward-chaining manner on\n+update operations, and the entailed statements are sent to be persisted by the\n+wrapped Sail.\n+\n+The `sail:sailType` value is `\"openrdf:DirectTypeHierarchyInferencer\"`.\n+\n+##### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n+@prefix sail: <http://www.openrdf.org/config/sail#>.\n+@prefix ms: <http://www.openrdf.org/config/sail/memory#>.\n+@prefix sb: <http://www.openrdf.org/config/sail/base#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example Memory store with direct type entailment\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:SailRepository\" ;\n+      sr:sailImpl [\n+         sail:sailType \"openrdf:DirectTypeHierarchyInferencer\";\n+         sail:delegate [\n+             sail:sailType \"openrdf:MemoryStore\" ;\n+             ...\n+         ];\n+      ]\n+   ].\n+```\n+\n+#### SHACL Sail\n+\n+The SHACL Sail is a Sail Adapter that performs transaction validation using the Shapes Constraint Language [SHACL](https://www.w3.org/TR/shacl/). More information about the use of the SHACL Sail can be found in [Validation with SHACL](/documentation/programming/shacl).\n+\n+The `sail:sailType` value of the SHACL Sail is `\"rdf4j:ShaclSail\"`. Its parameter namespace is `http://rdf4j.org/config/sail/shacl#`, commonly abbreviated to `ssc`. It takes the following configuration options:\n+\n+- `ssc:parallelValidation` (boolean): Enables parallel validation (optional).\n+- `ssc:undefinedTargetValidatesAllSubjects` (boolean): Specifies if an undefined target in a shape leads to validating all subject (optional).\n+- `ssc:logValidationPlans` (boolean): Specifies if validation plans are sent to the logging framework (optional).\n+- `ssc:logValidationViolations` (boolean): Specifies if shape violations are sent to the logging framework (optional).\n+- `ssc:ignoreNoShapesLoadedException` (boolean): Specifies if the \"no shapes loaded\" error is ignored (optional).\n+- `ssc:validationEnabled` (boolean): Specifies if transaction valudation is enabled by default (optional).\n+- `ssc:cacheSelectNodes` (boolean): Specifies if select nodes are cached (optional).\n+- `ssc:globalLogValidationExecution` (boolean): Specifies if validation execution details are sent to the logging framework (optional).\n+- `ssc:rdfsSubClassReasoning` (boolean): Enables RDF Schema Subclass entailment (optional).\n+- `ssc:performanceLogging` (boolean): Enables performance logging (optional).\n+- `ssc:serializableValidation` (boolean):\n+- `ssc:eclipseRdf4jShaclExtensions` (boolean): Enables RDF4J-specific extensions to the SHACL proposal (optional).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f3ac9db70ddbc9f385d984bbeb0a1fef72c5fff7"}, "originalPosition": 426}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzMjU2OTQ0", "url": "https://github.com/eclipse/rdf4j/pull/2521#pullrequestreview-493256944", "createdAt": "2020-09-22T08:59:43Z", "commit": {"oid": "f3ac9db70ddbc9f385d984bbeb0a1fef72c5fff7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwODo1OTo0M1rOHVwn4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwODo1OTo0M1rOHVwn4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjU3ODc4NQ==", "bodyText": "Link: http://datashapes.org/dash", "url": "https://github.com/eclipse/rdf4j/pull/2521#discussion_r492578785", "createdAt": "2020-09-22T08:59:43Z", "author": {"login": "hmottestad"}, "path": "site/content/documentation/reference/configuration.md", "diffHunk": "@@ -0,0 +1,458 @@\n+---\n+title: \"Repository and SAIL configuration\"\n+toc: true\n+weight: 4\n+autonumbering: true\n+---\n+\n+RDF4J repositories and SAIL configuration can be set up and changed by means of a configuration file in Turtle syntax. Here, we document the way the various components (repositories and SAILs) work together and how a full database configuration can be defined by \"stacking\" SAILs and wrapping in a Repository implementation.\n+\n+<!--more-->\n+\n+## Repository configuration\n+\n+A Repository configuration consists of a single RDF subject of type `rep:Repository`. Typically this subject is a blank node (`[]` in Turtle syntax), and is assigned its configuration parameters through use of RDF properties.\n+\n+The parameter namespace is `http://www.openrdf.org/config/repository#`, commonly abbreviated to `rep`.\n+It takes following configuration parameters:\n+\n+- `rep:repositoryID` (String): the repository identifier (required). This must be unique within the running system.\n+- `rdfs:label` (String): a human-readable name or short description of the repository (optional).\n+- `rep:repositoryImpl`: this specifies and configures the specific repository implementation (required). This is typically supplied as a nested blank node, which in turns has the implementation-specific configuration parameter. Every repository implemenation _must_ specify a `rep:repositoryType`.\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"SPARQL endpoint at http://example.org/\" ;\n+   rep:repositoryImpl [ rep:repositoryType \"example:repositoryType\";\n+                        # your implementation config here\n+   ].\n+```\n+\n+### SPARQLRepository\n+\n+The `SPARQLRepository` repository implementation is a client interface for a remote SPARQL endpoint.\n+Its `rep:repositoryType` value is `\"openrdf:SPARQLRepository\"`.\n+\n+The parameter namespace is `http://www.openrdf.org/config/repository/sparql#`, commonly abbreviated to `sparql`.\n+It takes the following configuration parameters:\n+\n+- `sparql:query-endpoint` (IRI): the SPARQL _query_ endpoint URL (required).\n+- `sparql:update-endpoint` (IRI): the SPARQL _update_ endpoint URL (optional). Only needs to be defined if different from the query endpoint.\n+\n+#### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sparql: <http://www.openrdf.org/config/repository/sparql#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"SPARQL endpoint at http://example.org/\" .\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:SPARQLRepository\" ;\n+      sparql:query-endpoint <http://example.org/sparql> ;\n+      sparql:update-endpoint <http://example.org/sparql/update> ;\n+   ];\n+```\n+\n+### HTTPRepository\n+\n+The `HTTPRepository` repository implementation is a client interface for a\n+store on a (remote) RDF4J Server. It differs from `SPARQLRepository` in that it\n+implements several RDF4J-specific  extensions to the standard SPARQL Protocol\n+which enhance transactional support and general performance.  Its\n+`rep:repositoryType` value is `\"openrdf:HTTPRepository\"`.\n+\n+The parameter namespace is `http://www.openrdf.org/config/repository/http#`, commonly abbreviated to `hr`.\n+It takes the following configuration parameters:\n+\n+- `hr:repositoryURL` (IRI): the location of the repository on an RDF4J Server (required).\n+- `hr:username` (string): username for basic authentication (optional).\n+- `hr:password` (string): password for basic authentication (optional).\n+\n+#### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix hr: <http://www.openrdf.org/config/repository/http#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"example repository on locally running RDF4J Server\" .\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:HTTPRepository\" ;\n+      hr:repositoryURL <http://localhost:8080/rdf4j-server/repositories/test>\n+   ];\n+```\n+\n+### SailRepository\n+\n+The {{< javadoc \"SailRepository\" \"repository/sail/SailRepository.html\" >}} repository implementation is the main implementation for direct access to a local RDF database (a SAIL implementation). Its `rep:repositoryType` is `openrdf:SailRepository`.\n+\n+The parameter namespace is `http://www.openrdf.org/config/repository/sail#`, commonly abbreviated to `sr`.\n+It takes the following configuration parameters:\n+\n+- `sr:sailImpl`: this specifies and configures the specific SAIL implementation (required). This is typically supplied as a nested blank node, which in turns has the SAIL-specific configuration parameters. Every SAIL implementation _must_ specify a `sail:sailType` property.\n+\n+#### Example configuration\n+\n+In this example we configure a simple SailRepository using a MemoryStore SAIL. See the section [SAIL Configuration](#sail-configuration) for more details.\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n+@prefix sail: <http://www.openrdf.org/config/sail#>.\n+@prefix ms: <http://www.openrdf.org/config/sail/memory#>.\n+@prefix sb: <http://www.openrdf.org/config/sail/base#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example Memory store\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:SailRepository\" ;\n+      sr:sailImpl [\n+         sail:sailType \"openrdf:MemoryStore\" ;\n+         sail:iterationCacheSyncThreshold \"10000\";\n+         ms:persist true;\n+         ms:syncDelay 0;\n+         sb:evaluationStrategyFactory \"org.eclipse.rdf4j.query.algebra.evaluation.impl.StrictEvaluationStrategyFactory\"\n+      ]\n+   ].\n+```\n+\n+### DatasetRepository\n+\n+The {{< javadoc \"DatasetRepository\" \"repository/dataset/DatasetRepository.html\" >}} is a wrapper around a `SailRepository` that dynamically loads datasets specified in the `FROM` and `FROM NAMED` clauses in SPARQL queries.\n+\n+#### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example Dataset Repository\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:DatasetRepository\" ;\n+      rep:delegate [\n+        rep:repositoryType \"openrdf:SailRepository\" ;\n+        sr:sailImpl [\n+          ...\n+        ]\n+      ]\n+   ].\n+```\n+\n+### ContextAwareRepository\n+\n+The {{< javadoc \"ContextAwareRepository\" \"repository/contextaware/ContextAwareRepository.html\" >}} is a wrapper around any other `Repository`. It can be used to configure the default context(s) on which query, update, or delete operations operate per default.\n+\n+The parameter namespace is `http://www.openrdf.org/config/repository/contextaware#`, commonly abbreviated to `car`.\n+It takes the following parameters:\n+\n+- `car:readContext`. Specifies the context(s) used per default when executing read operations (including SPARQL queries). Can be specified with multiple values to include more than one context;\n+- `car:insertContext`. Specifies the context used for insertion operations.\n+- `car:removeContext`. Specifies the context(s) used for delete operations. Can be specified with multiple values to include more than one context.\n+\n+#### Example configuration\n+\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix car: <http://www.openrdf.org/config/repository/contextaware#>.\n+@prefix ex: <http://example.org/>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example Context-aware repository\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:ContextAwareRepository\" ;\n+      car:readContext ex:namedGraph1, ex:namedGraph2;\n+      rep:delegate [\n+        rep:repositoryType \"openrdf:HTTPRepository\" ;\n+      ]\n+   ].\n+```\n+\n+## Sail Configuration\n+\n+Sail implementations come in two basic types: _base_ Sails, and Sail wrappers / adapters (sometimes also referred to as \"Stackable Sails\").\n+\n+Each Sail configuration identifies one base Sail, which typically functions as the actual database layer. This base Sail configuration can optionally be wrapped in one or more Stackable Sail configurations. The entire \"Sail stack\" is then usually wrapped as part of a [SailRepository configuration](#SailRepository).\n+\n+The parameter namespace is `http://www.openrdf.org/config/sail#`, commonly abbreviated to `sail`.\n+Every Sail in a Sail configuration has at least one required parameter:\n+\n+- `sail:sailType` - this identifies the type of Sail being configured.\n+- `sail:iterationCacheSyncThreshold` (integer). Specifies the size of the internal cache for query result iterations before on-disk overflow is enabled.\n+\n+### Base Sails\n+\n+Base Sail implementations are responsible for persistence of data and handling of queries, transactions and update operations on that data. A base Sail is typically a database.\n+\n+The parameter namespace for common parameters of base Sails is `http://www.openrdf.org/config/sail/base#`, commonly abbreviated to `sb`.\n+\n+Base Sails commonly take the following parameter:\n+\n+- `sb:evaluationStrategyFactory` (string). Specifies the full classname of the `EvaluationStrategyFactory` implementation used for this store. This controls how SPARQL queries are evaluated.\n+\n+#### Memory Store\n+\n+A Memory Store is an RDF4J database that keeps all data in main memory, with optional persistence on disk. Its `sail:sailType` value is `\"openrdf:MemoryStore\"`.\n+\n+The parameter namespace for Memory Store  is `http://www.openrdf.org/config/sail/memory#`, commonly abbreviated to `ms`.\n+It takes the following configuration options:\n+\n+- `ms:persist` (boolean). Specifies if the store persists its data to disk (required). Persistent memory stores write their data to disk before being shut down and read this data back in the next time they are initialized. Non-persistent memory stores are always empty upon initialization.\n+- `ms:syncDelay` (integer). Specifies the amount of time (in milliseconds) between an update operation completing and the store syncing its contents to disk (optional). By default, the memory store persistence mechanism synchronizes the disk backup directly upon any change to the contents of the store. Setting a delay on this synchronization can be useful if your application performs several transactions in sequence and you want to prevent disk synchronization in the middle of this sequence to improve update performance.\n+\n+##### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n+@prefix sail: <http://www.openrdf.org/config/sail#>.\n+@prefix ms: <http://www.openrdf.org/config/sail/memory#>.\n+@prefix sb: <http://www.openrdf.org/config/sail/base#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example Memory store\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:SailRepository\" ;\n+      sr:sailImpl [\n+         sail:sailType \"openrdf:MemoryStore\" ;\n+         sail:iterationCacheSyncThreshold \"10000\";\n+         ms:persist true;\n+         ms:syncDelay 0;\n+         sb:evaluationStrategyFactory \"org.eclipse.rdf4j.query.algebra.evaluation.impl.StrictEvaluationStrategyFactory\"\n+      ]\n+   ].\n+```\n+\n+#### Native Store\n+\n+A Native Store is an RDF4J database that persists all data directly on disk in an indexed binary format. Its `sail:sailType` value is `\"openrdf:NativeStore\"`.\n+\n+The parameter namespace for Native Store  is `http://www.openrdf.org/config/sail/native#`, commonly abbreviated to `ns`.\n+It takes the following configuration options:\n+\n+- `ns:tripleIndex` (string).  Specifices a comma-separated list of indexes for the store to use (optional).\n+- `ns:forceSync` (boolean). Specifies if an OS-level force sync should be executed after every update (optional).\n+- `ns:valueCacheSize` (integer). Specifies the size of the value cache (optional).\n+- `ns:valueIDCacheSize` (integer). Specifices the size of the value ID cache (optional).\n+- `ns:namespaceCacheSize` (integer). Specifies the size of the namespace cache (optional).\n+- `ns:namespaceIDCacheSize` (integer). Specifies the size of the namespace ID cache (optional).\n+\n+##### Native store indexes\n+\n+The native store uses on-disk indexes to speed up querying. It uses B-Trees for indexing statements, where the index key consists of four fields: subject (s), predicate (p), object (o) and context (c). The order in which each of these fields is used in the key determines the usability of an index on a specify statement query pattern: searching statements with a specific subject in an index that has the subject as the first field is significantly faster than searching these same statements in an index where the subject field is second or third. In the worst case, the \u2018wrong\u2019 statement pattern will result in a sequential scan over the entire set of statements.\n+\n+By default, the native repository only uses two indexes, one with a subject-predicate-object-context (spoc) key pattern and one with a predicate-object-subject-context (posc) key pattern. However, it is possible to define more or other indexes for the native repository, using the `ns:tripleIndex` parameter. This can be used to optimize performance for query patterns that occur frequently.\n+\n+The subject, predicate, object and context fields are represented by the characters \u2018s\u2019, \u2018p\u2019, \u2018o\u2019 and \u2018c\u2019 respectively. Indexes can be specified by creating 4-letter words from these four characters. Multiple indexes can be specified by separating these words with commas, spaces and/or tabs. For example, the string \u201cspoc, posc\u201d specifies two indexes; a subject-predicate-object-context index and a predicate-object-subject-context index.\n+\n+Creating more indexes potentially speeds up querying (a lot), but also adds overhead for maintaining the indexes. Also, every added index takes up additional disk space.\n+\n+The native store automatically creates/drops indexes upon (re)initialization, so the parameter can be adjusted and upon the first refresh of the configuration the native store will change its indexing strategy, without loss of data.\n+\n+##### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n+@prefix sail: <http://www.openrdf.org/config/sail#>.\n+@prefix ns: <http://www.openrdf.org/config/sail/native#>.\n+@prefix sb: <http://www.openrdf.org/config/sail/base#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example Native store\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:SailRepository\" ;\n+      sr:sailImpl [\n+         sail:sailType \"openrdf:NativeStore\" ;\n+         sail:iterationCacheSyncThreshold \"10000\";\n+         sb:evaluationStrategyFactory \"org.eclipse.rdf4j.query.algebra.evaluation.impl.StrictEvaluationStrategyFactory\" ;\n+         ns:tripleIndexes \"spoc,posc\"\n+      ]\n+   ].\n+```\n+\n+#### Elasticsearch Store\n+\n+The Elasticsearch Store is an RDF4J database that persists all data directly in Elasticsearch (not to be confused with the Elasticsearch Fulltext Search Sail, which is an adapter Sail implementation to provided full-text search indexing on top of other RDF databases). Its `sail:sailType` value is `\"rdf4j:ElasticsearchStore\"`.\n+\n+The parameter namespace for Elasticsearch Store is `http://rdf4j.org/config/sail/elasticsearchstore`, commonly abbreviated to `ess`. It takes the following configuration options:\n+\n+- `ess:hostname` (string). Specifies the hostname to use for connecting to Elasticsearch (required).\n+- `ess:port` (int). Specifies the port number to use for connecting to Elasticsearch (optional).\n+- `ess:clusterName` (string). Specifies the Elasticsearch cluster name (optional).\n+- `ess:index` (string). Specifies the index name to use for storage and  retrieval of data (optional).\n+\n+##### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n+@prefix sail: <http://www.openrdf.org/config/sail#>.\n+@prefix ess: <http://rdf4j.org/config/sail/elasticsearchstore#>.\n+@prefix sb: <http://www.openrdf.org/config/sail/base#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example Elasticsearch store\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:SailRepository\" ;\n+      sr:sailImpl [\n+         sail:sailType \"rdf4j:ElasticsearchStore\" ;\n+         sail:iterationCacheSyncThreshold \"10000\";\n+         ess:hostname \"localhost\";\n+         ess:port 9200;\n+         ess:clusterName \"myCluster\";\n+         ess:index \"myIndex\";\n+         sb:evaluationStrategyFactory \"org.eclipse.rdf4j.query.algebra.evaluation.impl.StrictEvaluationStrategyFactory\"\n+      ]\n+   ].\n+```\n+\n+### Sail Adapter implementations\n+\n+Sail Adapters, or \"Stackable Sails\", are Sail implementations that implement intercepting behavior for operations on RDF databases before delegating down to the wrapped Sail implementation (ultimately a [base Sail](#base-sails), though of course multiple Stackable Sails can be stacked on top of each other as well).\n+\n+Every Sail Adapter has at least one required parameter:\n+\n+- `sail:delegate`. Specifies and configures the wrapped Sail implementation (required). This is typically supplied as a nested blank node, which in turns has the implementation-specific configuration parameter.\n+\n+#### RDF Schema inferencer\n+\n+The RDF Schema inferencer is an Sail Adapter that performs rule-based entailment as defined in the [RDF 1.1 Semantics](https://www.w3.org/TR/rdf11-mt/) recommendation. Reasoning happens in a forward-chaining manner on update operations, and the entailed statements are sent to be persisted by the wrapped Sail. The inferencer also caches RDF Schema statements to speed up entailment and retrieval operations.\n+\n+The `sail:sailType` value for the RDF Schema inferencer is `\"rdf4j:SchemaCachingRDFSInferencer\"`.\n+\n+##### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n+@prefix sail: <http://www.openrdf.org/config/sail#>.\n+@prefix ms: <http://www.openrdf.org/config/sail/memory#>.\n+@prefix sb: <http://www.openrdf.org/config/sail/base#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example memory store with RDF Schema entailment\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:SailRepository\" ;\n+      sr:sailImpl [\n+         sail:sailType \"rdf4j:SchemaCachingRDFSInferencer\";\n+         sail:delegate [\n+             sail:sailType \"openrdf:MemoryStore\" ;\n+             ...\n+         ];\n+      ]\n+   ].\n+```\n+\n+#### Direct Type inferencer\n+\n+The Direct Type inferencer is an Sail Adapter that performs entailment on the\n+the class and instance inheritance hierarchy, asserting specific \"shortcut\"\n+properties (`sesame:directType`, `sesame:directSubClassOf` and\n+`sesame:directSubPropertyOf`) that allow querying for the _direct_ type or\n+subclass of a resource.  Reasoning happens in a forward-chaining manner on\n+update operations, and the entailed statements are sent to be persisted by the\n+wrapped Sail.\n+\n+The `sail:sailType` value is `\"openrdf:DirectTypeHierarchyInferencer\"`.\n+\n+##### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n+@prefix sail: <http://www.openrdf.org/config/sail#>.\n+@prefix ms: <http://www.openrdf.org/config/sail/memory#>.\n+@prefix sb: <http://www.openrdf.org/config/sail/base#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example Memory store with direct type entailment\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:SailRepository\" ;\n+      sr:sailImpl [\n+         sail:sailType \"openrdf:DirectTypeHierarchyInferencer\";\n+         sail:delegate [\n+             sail:sailType \"openrdf:MemoryStore\" ;\n+             ...\n+         ];\n+      ]\n+   ].\n+```\n+\n+#### SHACL Sail\n+\n+The SHACL Sail is a Sail Adapter that performs transaction validation using the Shapes Constraint Language [SHACL](https://www.w3.org/TR/shacl/). More information about the use of the SHACL Sail can be found in [Validation with SHACL](/documentation/programming/shacl).\n+\n+The `sail:sailType` value of the SHACL Sail is `\"rdf4j:ShaclSail\"`. Its parameter namespace is `http://rdf4j.org/config/sail/shacl#`, commonly abbreviated to `ssc`. It takes the following configuration options:\n+\n+- `ssc:parallelValidation` (boolean): Enables parallel validation (optional).\n+- `ssc:undefinedTargetValidatesAllSubjects` (boolean): Specifies if an undefined target in a shape leads to validating all subject (optional).\n+- `ssc:logValidationPlans` (boolean): Specifies if validation plans are sent to the logging framework (optional).\n+- `ssc:logValidationViolations` (boolean): Specifies if shape violations are sent to the logging framework (optional).\n+- `ssc:ignoreNoShapesLoadedException` (boolean): Specifies if the \"no shapes loaded\" error is ignored (optional).\n+- `ssc:validationEnabled` (boolean): Specifies if transaction valudation is enabled by default (optional).\n+- `ssc:cacheSelectNodes` (boolean): Specifies if select nodes are cached (optional).\n+- `ssc:globalLogValidationExecution` (boolean): Specifies if validation execution details are sent to the logging framework (optional).\n+- `ssc:rdfsSubClassReasoning` (boolean): Enables RDF Schema Subclass entailment (optional).\n+- `ssc:performanceLogging` (boolean): Enables performance logging (optional).\n+- `ssc:serializableValidation` (boolean):\n+- `ssc:eclipseRdf4jShaclExtensions` (boolean): Enables RDF4J-specific extensions to the SHACL proposal (optional).\n+- `ssc:dashDataShapes` (boolean): Enables use of DASH data shapes (optional).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f3ac9db70ddbc9f385d984bbeb0a1fef72c5fff7"}, "originalPosition": 427}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzMjU3MzEw", "url": "https://github.com/eclipse/rdf4j/pull/2521#pullrequestreview-493257310", "createdAt": "2020-09-22T09:00:12Z", "commit": {"oid": "f3ac9db70ddbc9f385d984bbeb0a1fef72c5fff7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwOTowMDoxMlrOHVwo7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwOTowMDoxMlrOHVwo7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjU3OTA1Mg==", "bodyText": "-1 for unlimited.", "url": "https://github.com/eclipse/rdf4j/pull/2521#discussion_r492579052", "createdAt": "2020-09-22T09:00:12Z", "author": {"login": "hmottestad"}, "path": "site/content/documentation/reference/configuration.md", "diffHunk": "@@ -0,0 +1,458 @@\n+---\n+title: \"Repository and SAIL configuration\"\n+toc: true\n+weight: 4\n+autonumbering: true\n+---\n+\n+RDF4J repositories and SAIL configuration can be set up and changed by means of a configuration file in Turtle syntax. Here, we document the way the various components (repositories and SAILs) work together and how a full database configuration can be defined by \"stacking\" SAILs and wrapping in a Repository implementation.\n+\n+<!--more-->\n+\n+## Repository configuration\n+\n+A Repository configuration consists of a single RDF subject of type `rep:Repository`. Typically this subject is a blank node (`[]` in Turtle syntax), and is assigned its configuration parameters through use of RDF properties.\n+\n+The parameter namespace is `http://www.openrdf.org/config/repository#`, commonly abbreviated to `rep`.\n+It takes following configuration parameters:\n+\n+- `rep:repositoryID` (String): the repository identifier (required). This must be unique within the running system.\n+- `rdfs:label` (String): a human-readable name or short description of the repository (optional).\n+- `rep:repositoryImpl`: this specifies and configures the specific repository implementation (required). This is typically supplied as a nested blank node, which in turns has the implementation-specific configuration parameter. Every repository implemenation _must_ specify a `rep:repositoryType`.\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"SPARQL endpoint at http://example.org/\" ;\n+   rep:repositoryImpl [ rep:repositoryType \"example:repositoryType\";\n+                        # your implementation config here\n+   ].\n+```\n+\n+### SPARQLRepository\n+\n+The `SPARQLRepository` repository implementation is a client interface for a remote SPARQL endpoint.\n+Its `rep:repositoryType` value is `\"openrdf:SPARQLRepository\"`.\n+\n+The parameter namespace is `http://www.openrdf.org/config/repository/sparql#`, commonly abbreviated to `sparql`.\n+It takes the following configuration parameters:\n+\n+- `sparql:query-endpoint` (IRI): the SPARQL _query_ endpoint URL (required).\n+- `sparql:update-endpoint` (IRI): the SPARQL _update_ endpoint URL (optional). Only needs to be defined if different from the query endpoint.\n+\n+#### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sparql: <http://www.openrdf.org/config/repository/sparql#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"SPARQL endpoint at http://example.org/\" .\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:SPARQLRepository\" ;\n+      sparql:query-endpoint <http://example.org/sparql> ;\n+      sparql:update-endpoint <http://example.org/sparql/update> ;\n+   ];\n+```\n+\n+### HTTPRepository\n+\n+The `HTTPRepository` repository implementation is a client interface for a\n+store on a (remote) RDF4J Server. It differs from `SPARQLRepository` in that it\n+implements several RDF4J-specific  extensions to the standard SPARQL Protocol\n+which enhance transactional support and general performance.  Its\n+`rep:repositoryType` value is `\"openrdf:HTTPRepository\"`.\n+\n+The parameter namespace is `http://www.openrdf.org/config/repository/http#`, commonly abbreviated to `hr`.\n+It takes the following configuration parameters:\n+\n+- `hr:repositoryURL` (IRI): the location of the repository on an RDF4J Server (required).\n+- `hr:username` (string): username for basic authentication (optional).\n+- `hr:password` (string): password for basic authentication (optional).\n+\n+#### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix hr: <http://www.openrdf.org/config/repository/http#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"example repository on locally running RDF4J Server\" .\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:HTTPRepository\" ;\n+      hr:repositoryURL <http://localhost:8080/rdf4j-server/repositories/test>\n+   ];\n+```\n+\n+### SailRepository\n+\n+The {{< javadoc \"SailRepository\" \"repository/sail/SailRepository.html\" >}} repository implementation is the main implementation for direct access to a local RDF database (a SAIL implementation). Its `rep:repositoryType` is `openrdf:SailRepository`.\n+\n+The parameter namespace is `http://www.openrdf.org/config/repository/sail#`, commonly abbreviated to `sr`.\n+It takes the following configuration parameters:\n+\n+- `sr:sailImpl`: this specifies and configures the specific SAIL implementation (required). This is typically supplied as a nested blank node, which in turns has the SAIL-specific configuration parameters. Every SAIL implementation _must_ specify a `sail:sailType` property.\n+\n+#### Example configuration\n+\n+In this example we configure a simple SailRepository using a MemoryStore SAIL. See the section [SAIL Configuration](#sail-configuration) for more details.\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n+@prefix sail: <http://www.openrdf.org/config/sail#>.\n+@prefix ms: <http://www.openrdf.org/config/sail/memory#>.\n+@prefix sb: <http://www.openrdf.org/config/sail/base#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example Memory store\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:SailRepository\" ;\n+      sr:sailImpl [\n+         sail:sailType \"openrdf:MemoryStore\" ;\n+         sail:iterationCacheSyncThreshold \"10000\";\n+         ms:persist true;\n+         ms:syncDelay 0;\n+         sb:evaluationStrategyFactory \"org.eclipse.rdf4j.query.algebra.evaluation.impl.StrictEvaluationStrategyFactory\"\n+      ]\n+   ].\n+```\n+\n+### DatasetRepository\n+\n+The {{< javadoc \"DatasetRepository\" \"repository/dataset/DatasetRepository.html\" >}} is a wrapper around a `SailRepository` that dynamically loads datasets specified in the `FROM` and `FROM NAMED` clauses in SPARQL queries.\n+\n+#### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example Dataset Repository\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:DatasetRepository\" ;\n+      rep:delegate [\n+        rep:repositoryType \"openrdf:SailRepository\" ;\n+        sr:sailImpl [\n+          ...\n+        ]\n+      ]\n+   ].\n+```\n+\n+### ContextAwareRepository\n+\n+The {{< javadoc \"ContextAwareRepository\" \"repository/contextaware/ContextAwareRepository.html\" >}} is a wrapper around any other `Repository`. It can be used to configure the default context(s) on which query, update, or delete operations operate per default.\n+\n+The parameter namespace is `http://www.openrdf.org/config/repository/contextaware#`, commonly abbreviated to `car`.\n+It takes the following parameters:\n+\n+- `car:readContext`. Specifies the context(s) used per default when executing read operations (including SPARQL queries). Can be specified with multiple values to include more than one context;\n+- `car:insertContext`. Specifies the context used for insertion operations.\n+- `car:removeContext`. Specifies the context(s) used for delete operations. Can be specified with multiple values to include more than one context.\n+\n+#### Example configuration\n+\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix car: <http://www.openrdf.org/config/repository/contextaware#>.\n+@prefix ex: <http://example.org/>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example Context-aware repository\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:ContextAwareRepository\" ;\n+      car:readContext ex:namedGraph1, ex:namedGraph2;\n+      rep:delegate [\n+        rep:repositoryType \"openrdf:HTTPRepository\" ;\n+      ]\n+   ].\n+```\n+\n+## Sail Configuration\n+\n+Sail implementations come in two basic types: _base_ Sails, and Sail wrappers / adapters (sometimes also referred to as \"Stackable Sails\").\n+\n+Each Sail configuration identifies one base Sail, which typically functions as the actual database layer. This base Sail configuration can optionally be wrapped in one or more Stackable Sail configurations. The entire \"Sail stack\" is then usually wrapped as part of a [SailRepository configuration](#SailRepository).\n+\n+The parameter namespace is `http://www.openrdf.org/config/sail#`, commonly abbreviated to `sail`.\n+Every Sail in a Sail configuration has at least one required parameter:\n+\n+- `sail:sailType` - this identifies the type of Sail being configured.\n+- `sail:iterationCacheSyncThreshold` (integer). Specifies the size of the internal cache for query result iterations before on-disk overflow is enabled.\n+\n+### Base Sails\n+\n+Base Sail implementations are responsible for persistence of data and handling of queries, transactions and update operations on that data. A base Sail is typically a database.\n+\n+The parameter namespace for common parameters of base Sails is `http://www.openrdf.org/config/sail/base#`, commonly abbreviated to `sb`.\n+\n+Base Sails commonly take the following parameter:\n+\n+- `sb:evaluationStrategyFactory` (string). Specifies the full classname of the `EvaluationStrategyFactory` implementation used for this store. This controls how SPARQL queries are evaluated.\n+\n+#### Memory Store\n+\n+A Memory Store is an RDF4J database that keeps all data in main memory, with optional persistence on disk. Its `sail:sailType` value is `\"openrdf:MemoryStore\"`.\n+\n+The parameter namespace for Memory Store  is `http://www.openrdf.org/config/sail/memory#`, commonly abbreviated to `ms`.\n+It takes the following configuration options:\n+\n+- `ms:persist` (boolean). Specifies if the store persists its data to disk (required). Persistent memory stores write their data to disk before being shut down and read this data back in the next time they are initialized. Non-persistent memory stores are always empty upon initialization.\n+- `ms:syncDelay` (integer). Specifies the amount of time (in milliseconds) between an update operation completing and the store syncing its contents to disk (optional). By default, the memory store persistence mechanism synchronizes the disk backup directly upon any change to the contents of the store. Setting a delay on this synchronization can be useful if your application performs several transactions in sequence and you want to prevent disk synchronization in the middle of this sequence to improve update performance.\n+\n+##### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n+@prefix sail: <http://www.openrdf.org/config/sail#>.\n+@prefix ms: <http://www.openrdf.org/config/sail/memory#>.\n+@prefix sb: <http://www.openrdf.org/config/sail/base#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example Memory store\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:SailRepository\" ;\n+      sr:sailImpl [\n+         sail:sailType \"openrdf:MemoryStore\" ;\n+         sail:iterationCacheSyncThreshold \"10000\";\n+         ms:persist true;\n+         ms:syncDelay 0;\n+         sb:evaluationStrategyFactory \"org.eclipse.rdf4j.query.algebra.evaluation.impl.StrictEvaluationStrategyFactory\"\n+      ]\n+   ].\n+```\n+\n+#### Native Store\n+\n+A Native Store is an RDF4J database that persists all data directly on disk in an indexed binary format. Its `sail:sailType` value is `\"openrdf:NativeStore\"`.\n+\n+The parameter namespace for Native Store  is `http://www.openrdf.org/config/sail/native#`, commonly abbreviated to `ns`.\n+It takes the following configuration options:\n+\n+- `ns:tripleIndex` (string).  Specifices a comma-separated list of indexes for the store to use (optional).\n+- `ns:forceSync` (boolean). Specifies if an OS-level force sync should be executed after every update (optional).\n+- `ns:valueCacheSize` (integer). Specifies the size of the value cache (optional).\n+- `ns:valueIDCacheSize` (integer). Specifices the size of the value ID cache (optional).\n+- `ns:namespaceCacheSize` (integer). Specifies the size of the namespace cache (optional).\n+- `ns:namespaceIDCacheSize` (integer). Specifies the size of the namespace ID cache (optional).\n+\n+##### Native store indexes\n+\n+The native store uses on-disk indexes to speed up querying. It uses B-Trees for indexing statements, where the index key consists of four fields: subject (s), predicate (p), object (o) and context (c). The order in which each of these fields is used in the key determines the usability of an index on a specify statement query pattern: searching statements with a specific subject in an index that has the subject as the first field is significantly faster than searching these same statements in an index where the subject field is second or third. In the worst case, the \u2018wrong\u2019 statement pattern will result in a sequential scan over the entire set of statements.\n+\n+By default, the native repository only uses two indexes, one with a subject-predicate-object-context (spoc) key pattern and one with a predicate-object-subject-context (posc) key pattern. However, it is possible to define more or other indexes for the native repository, using the `ns:tripleIndex` parameter. This can be used to optimize performance for query patterns that occur frequently.\n+\n+The subject, predicate, object and context fields are represented by the characters \u2018s\u2019, \u2018p\u2019, \u2018o\u2019 and \u2018c\u2019 respectively. Indexes can be specified by creating 4-letter words from these four characters. Multiple indexes can be specified by separating these words with commas, spaces and/or tabs. For example, the string \u201cspoc, posc\u201d specifies two indexes; a subject-predicate-object-context index and a predicate-object-subject-context index.\n+\n+Creating more indexes potentially speeds up querying (a lot), but also adds overhead for maintaining the indexes. Also, every added index takes up additional disk space.\n+\n+The native store automatically creates/drops indexes upon (re)initialization, so the parameter can be adjusted and upon the first refresh of the configuration the native store will change its indexing strategy, without loss of data.\n+\n+##### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n+@prefix sail: <http://www.openrdf.org/config/sail#>.\n+@prefix ns: <http://www.openrdf.org/config/sail/native#>.\n+@prefix sb: <http://www.openrdf.org/config/sail/base#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example Native store\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:SailRepository\" ;\n+      sr:sailImpl [\n+         sail:sailType \"openrdf:NativeStore\" ;\n+         sail:iterationCacheSyncThreshold \"10000\";\n+         sb:evaluationStrategyFactory \"org.eclipse.rdf4j.query.algebra.evaluation.impl.StrictEvaluationStrategyFactory\" ;\n+         ns:tripleIndexes \"spoc,posc\"\n+      ]\n+   ].\n+```\n+\n+#### Elasticsearch Store\n+\n+The Elasticsearch Store is an RDF4J database that persists all data directly in Elasticsearch (not to be confused with the Elasticsearch Fulltext Search Sail, which is an adapter Sail implementation to provided full-text search indexing on top of other RDF databases). Its `sail:sailType` value is `\"rdf4j:ElasticsearchStore\"`.\n+\n+The parameter namespace for Elasticsearch Store is `http://rdf4j.org/config/sail/elasticsearchstore`, commonly abbreviated to `ess`. It takes the following configuration options:\n+\n+- `ess:hostname` (string). Specifies the hostname to use for connecting to Elasticsearch (required).\n+- `ess:port` (int). Specifies the port number to use for connecting to Elasticsearch (optional).\n+- `ess:clusterName` (string). Specifies the Elasticsearch cluster name (optional).\n+- `ess:index` (string). Specifies the index name to use for storage and  retrieval of data (optional).\n+\n+##### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n+@prefix sail: <http://www.openrdf.org/config/sail#>.\n+@prefix ess: <http://rdf4j.org/config/sail/elasticsearchstore#>.\n+@prefix sb: <http://www.openrdf.org/config/sail/base#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example Elasticsearch store\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:SailRepository\" ;\n+      sr:sailImpl [\n+         sail:sailType \"rdf4j:ElasticsearchStore\" ;\n+         sail:iterationCacheSyncThreshold \"10000\";\n+         ess:hostname \"localhost\";\n+         ess:port 9200;\n+         ess:clusterName \"myCluster\";\n+         ess:index \"myIndex\";\n+         sb:evaluationStrategyFactory \"org.eclipse.rdf4j.query.algebra.evaluation.impl.StrictEvaluationStrategyFactory\"\n+      ]\n+   ].\n+```\n+\n+### Sail Adapter implementations\n+\n+Sail Adapters, or \"Stackable Sails\", are Sail implementations that implement intercepting behavior for operations on RDF databases before delegating down to the wrapped Sail implementation (ultimately a [base Sail](#base-sails), though of course multiple Stackable Sails can be stacked on top of each other as well).\n+\n+Every Sail Adapter has at least one required parameter:\n+\n+- `sail:delegate`. Specifies and configures the wrapped Sail implementation (required). This is typically supplied as a nested blank node, which in turns has the implementation-specific configuration parameter.\n+\n+#### RDF Schema inferencer\n+\n+The RDF Schema inferencer is an Sail Adapter that performs rule-based entailment as defined in the [RDF 1.1 Semantics](https://www.w3.org/TR/rdf11-mt/) recommendation. Reasoning happens in a forward-chaining manner on update operations, and the entailed statements are sent to be persisted by the wrapped Sail. The inferencer also caches RDF Schema statements to speed up entailment and retrieval operations.\n+\n+The `sail:sailType` value for the RDF Schema inferencer is `\"rdf4j:SchemaCachingRDFSInferencer\"`.\n+\n+##### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n+@prefix sail: <http://www.openrdf.org/config/sail#>.\n+@prefix ms: <http://www.openrdf.org/config/sail/memory#>.\n+@prefix sb: <http://www.openrdf.org/config/sail/base#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example memory store with RDF Schema entailment\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:SailRepository\" ;\n+      sr:sailImpl [\n+         sail:sailType \"rdf4j:SchemaCachingRDFSInferencer\";\n+         sail:delegate [\n+             sail:sailType \"openrdf:MemoryStore\" ;\n+             ...\n+         ];\n+      ]\n+   ].\n+```\n+\n+#### Direct Type inferencer\n+\n+The Direct Type inferencer is an Sail Adapter that performs entailment on the\n+the class and instance inheritance hierarchy, asserting specific \"shortcut\"\n+properties (`sesame:directType`, `sesame:directSubClassOf` and\n+`sesame:directSubPropertyOf`) that allow querying for the _direct_ type or\n+subclass of a resource.  Reasoning happens in a forward-chaining manner on\n+update operations, and the entailed statements are sent to be persisted by the\n+wrapped Sail.\n+\n+The `sail:sailType` value is `\"openrdf:DirectTypeHierarchyInferencer\"`.\n+\n+##### Example configuration\n+\n+```turtle\n+@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n+@prefix rep: <http://www.openrdf.org/config/repository#>.\n+@prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n+@prefix sail: <http://www.openrdf.org/config/sail#>.\n+@prefix ms: <http://www.openrdf.org/config/sail/memory#>.\n+@prefix sb: <http://www.openrdf.org/config/sail/base#>.\n+\n+[] a rep:Repository ;\n+   rep:repositoryID \"example\" ;\n+   rdfs:label \"Example Memory store with direct type entailment\" ;\n+   rep:repositoryImpl [\n+      rep:repositoryType \"openrdf:SailRepository\" ;\n+      sr:sailImpl [\n+         sail:sailType \"openrdf:DirectTypeHierarchyInferencer\";\n+         sail:delegate [\n+             sail:sailType \"openrdf:MemoryStore\" ;\n+             ...\n+         ];\n+      ]\n+   ].\n+```\n+\n+#### SHACL Sail\n+\n+The SHACL Sail is a Sail Adapter that performs transaction validation using the Shapes Constraint Language [SHACL](https://www.w3.org/TR/shacl/). More information about the use of the SHACL Sail can be found in [Validation with SHACL](/documentation/programming/shacl).\n+\n+The `sail:sailType` value of the SHACL Sail is `\"rdf4j:ShaclSail\"`. Its parameter namespace is `http://rdf4j.org/config/sail/shacl#`, commonly abbreviated to `ssc`. It takes the following configuration options:\n+\n+- `ssc:parallelValidation` (boolean): Enables parallel validation (optional).\n+- `ssc:undefinedTargetValidatesAllSubjects` (boolean): Specifies if an undefined target in a shape leads to validating all subject (optional).\n+- `ssc:logValidationPlans` (boolean): Specifies if validation plans are sent to the logging framework (optional).\n+- `ssc:logValidationViolations` (boolean): Specifies if shape violations are sent to the logging framework (optional).\n+- `ssc:ignoreNoShapesLoadedException` (boolean): Specifies if the \"no shapes loaded\" error is ignored (optional).\n+- `ssc:validationEnabled` (boolean): Specifies if transaction valudation is enabled by default (optional).\n+- `ssc:cacheSelectNodes` (boolean): Specifies if select nodes are cached (optional).\n+- `ssc:globalLogValidationExecution` (boolean): Specifies if validation execution details are sent to the logging framework (optional).\n+- `ssc:rdfsSubClassReasoning` (boolean): Enables RDF Schema Subclass entailment (optional).\n+- `ssc:performanceLogging` (boolean): Enables performance logging (optional).\n+- `ssc:serializableValidation` (boolean):\n+- `ssc:eclipseRdf4jShaclExtensions` (boolean): Enables RDF4J-specific extensions to the SHACL proposal (optional).\n+- `ssc:dashDataShapes` (boolean): Enables use of DASH data shapes (optional).\n+- `ssc:validationResultsLimitTotal` (integer): Specifies a limit on the total number of validation results sent in a validation report (optional).\n+- `ssc:validationResultsLimitPerConstraint` (integer): Specifies a limit on the number of validation results sent per constraint in a validation report (optional).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f3ac9db70ddbc9f385d984bbeb0a1fef72c5fff7"}, "originalPosition": 429}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8866166f058e84ccc909d5db41aff55cd9b51cfb", "author": {"user": {"login": "jeenbroekstra", "name": "Jeen Broekstra"}}, "url": "https://github.com/eclipse/rdf4j/commit/8866166f058e84ccc909d5db41aff55cd9b51cfb", "committedDate": "2020-09-23T00:53:58Z", "message": "GH-2479 minor changes from review feedback"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 102, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}