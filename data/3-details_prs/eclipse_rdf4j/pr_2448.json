{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY5MDE3NjM5", "number": 2448, "title": "GH-2442 value comparator benchmarks and equals", "bodyText": "GitHub issue resolved: #2442  \nBriefly describe the changes proposed in this PR:\n\nbenchmarks\nremoved .equals use from the ValueComparator\n\n\n\nPR Author Checklist (see the contributor guidelines for more details):\n\n my pull request is self-contained\n I've added tests for the changes I made\n I've applied code formatting (you can use mvn process-resources to format from the command line)\n every commit message starts with the issue number (GH-xxxx) followed by a meaningful description of the change\n every commit has been signed off\n\nNote: we merge all feature pull requests using squash and merge. See RDF4J git merge strategy for more details.", "createdAt": "2020-08-17T19:08:16Z", "url": "https://github.com/eclipse/rdf4j/pull/2448", "merged": true, "mergeCommit": {"oid": "879f6bb8b07c56cc93d3df4c49beb7d0e76c6453"}, "closed": true, "closedAt": "2020-08-19T21:24:57Z", "author": {"login": "hmottestad"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc_1CEEAH2gAyNDY5MDE3NjM5OjY4MjY3OWRmNGUzMWU0ZDNlNDYxZWIxNjdjMDI2NDUwMjMwZTYzMzU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdAZAMAAH2gAyNDY5MDE3NjM5OmEyZWNhNTE3M2Q2ZTdiNTg4YzQ3ZjBhZGY1YTA0NDAzYTdkODg0N2Y=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "682679df4e31e4d3e461eb167c026450230e6335", "author": {"user": {"login": "hmottestad", "name": null}}, "url": "https://github.com/eclipse/rdf4j/commit/682679df4e31e4d3e461eb167c026450230e6335", "committedDate": "2020-08-17T16:30:32Z", "message": "GH-2442 benchmarks\n\nSigned-off-by: Ha\u030avard Ottestad <hmottestad@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6eb04ee7aed78ec3d8ab70c33b65558a3499b03d", "author": {"user": {"login": "hmottestad", "name": null}}, "url": "https://github.com/eclipse/rdf4j/commit/6eb04ee7aed78ec3d8ab70c33b65558a3499b03d", "committedDate": "2020-08-17T16:30:32Z", "message": "GH-2442 simplify comparison by not doing a full .equals comparison initially\n\nSigned-off-by: Ha\u030avard Ottestad <hmottestad@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY4OTk3MTU5", "url": "https://github.com/eclipse/rdf4j/pull/2448#pullrequestreview-468997159", "createdAt": "2020-08-18T05:18:33Z", "commit": {"oid": "6eb04ee7aed78ec3d8ab70c33b65558a3499b03d"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQwNToxODozM1rOHCDsxw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQwNToxODo1NlrOHCDtNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTkxOTgxNQ==", "bodyText": "The license header looks like it got mangled a bit", "url": "https://github.com/eclipse/rdf4j/pull/2448#discussion_r471919815", "createdAt": "2020-08-18T05:18:33Z", "author": {"login": "jeenbroekstra"}, "path": "core/queryalgebra/evaluation/src/test/java/org/eclipse/rdf4j/query/algebra/evaluation/util/benchmark/ValueComparatorBenchmark.java", "diffHunk": "@@ -0,0 +1,179 @@\n+/**\n+ * ****************************************************************************", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6eb04ee7aed78ec3d8ab70c33b65558a3499b03d"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTkxOTkyNg==", "bodyText": "Could you add a standard main method?", "url": "https://github.com/eclipse/rdf4j/pull/2448#discussion_r471919926", "createdAt": "2020-08-18T05:18:56Z", "author": {"login": "jeenbroekstra"}, "path": "core/queryalgebra/evaluation/src/test/java/org/eclipse/rdf4j/query/algebra/evaluation/util/benchmark/ValueComparatorBenchmark.java", "diffHunk": "@@ -0,0 +1,179 @@\n+/**\n+ * ****************************************************************************\n+ *  Copyright (c) 2020 Eclipse RDF4J contributors.\n+ *  All rights reserved. This program and the accompanying materials\n+ *  are made available under the terms of the Eclipse Distribution License v1.0\n+ *  which accompanies this distribution, and is available at\n+ *  http://www.eclipse.org/org/documents/edl-v10.php.\n+ * *****************************************************************************\n+ */\n+package org.eclipse.rdf4j.query.algebra.evaluation.util.benchmark;\n+\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.util.ArrayList;\n+import java.util.Collections;\n+import java.util.Date;\n+import java.util.List;\n+import java.util.Random;\n+import java.util.concurrent.TimeUnit;\n+import java.util.stream.Collectors;\n+\n+import org.eclipse.rdf4j.model.BNode;\n+import org.eclipse.rdf4j.model.IRI;\n+import org.eclipse.rdf4j.model.Model;\n+import org.eclipse.rdf4j.model.Value;\n+import org.eclipse.rdf4j.model.impl.SimpleValueFactory;\n+import org.eclipse.rdf4j.query.algebra.evaluation.util.ValueComparator;\n+import org.eclipse.rdf4j.rio.RDFFormat;\n+import org.eclipse.rdf4j.rio.Rio;\n+import org.openjdk.jmh.annotations.Benchmark;\n+import org.openjdk.jmh.annotations.BenchmarkMode;\n+import org.openjdk.jmh.annotations.Fork;\n+import org.openjdk.jmh.annotations.Level;\n+import org.openjdk.jmh.annotations.Measurement;\n+import org.openjdk.jmh.annotations.Mode;\n+import org.openjdk.jmh.annotations.OutputTimeUnit;\n+import org.openjdk.jmh.annotations.Scope;\n+import org.openjdk.jmh.annotations.Setup;\n+import org.openjdk.jmh.annotations.State;\n+import org.openjdk.jmh.annotations.Warmup;\n+\n+/**\n+ * @author H\u00e5vard Ottestad\n+ */\n+@State(Scope.Benchmark)\n+@Warmup(iterations = 20)\n+@BenchmarkMode({ Mode.AverageTime })\n+@Fork(value = 1, jvmArgs = { \"-Xms8G\", \"-Xmx8G\", \"-Xmn4G\", \"-XX:+UseSerialGC\" })\n+//@Fork(value = 1, jvmArgs = {\"-Xms8G\", \"-Xmx8G\", \"-Xmn4G\", \"-XX:+UseSerialGC\", \"-XX:+UnlockCommercialFeatures\", \"-XX:StartFlightRecording=delay=5s,duration=120s,filename=recording.jfr,settings=profile\", \"-XX:FlightRecorderOptions=samplethreads=true,stackdepth=1024\", \"-XX:+UnlockDiagnosticVMOptions\", \"-XX:+DebugNonSafepoints\"})\n+@Measurement(iterations = 10)\n+@OutputTimeUnit(TimeUnit.MILLISECONDS)\n+public class ValueComparatorBenchmark {\n+\n+\tList<Value> subjects;\n+\tList<Value> predicates;\n+\tList<Value> objects;\n+\tList<Value> manyPointerEquals;\n+\tList<Value> manyDeepEquals;\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6eb04ee7aed78ec3d8ab70c33b65558a3499b03d"}, "originalPosition": 59}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a2eca5173d6e7b588c47f0adf5a04403a7d8847f", "author": {"user": {"login": "hmottestad", "name": null}}, "url": "https://github.com/eclipse/rdf4j/commit/a2eca5173d6e7b588c47f0adf5a04403a7d8847f", "committedDate": "2020-08-19T10:25:04Z", "message": "review"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 94, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}