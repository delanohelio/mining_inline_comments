{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAzNjg3MTI5", "number": 2098, "title": "GH-2097 Optimise clear() in ShaclSail", "bodyText": "GitHub issue resolved: #2097  \nBriefly describe the changes proposed in this PR:\nTrack if sail is empty, if it is (because clear() was called) then we don't need to do so much validation. Especially useful for minCount which considers removed statements.\n\n\nPR Author Checklist:\n\n my pull request is self-contained\n I've added tests for the changes I made\n every commit message starts with the issue number (GH-xxxx) followed by a meaningful description of the change\n every commit has been signed off\n\nNote: we merge all feature pull requests using squash and merge. See RDF4J git merge strategy for more details.", "createdAt": "2020-04-15T10:54:22Z", "url": "https://github.com/eclipse/rdf4j/pull/2098", "merged": true, "mergeCommit": {"oid": "b64125c2bde50264fb0bb7867c506d189fbd72d6"}, "closed": true, "closedAt": "2020-04-15T15:43:18Z", "author": {"login": "hmottestad"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcX2A14ABqjMyMzQ5NzYxMzM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcX4q5qgBqjMyMzU2NjA2MDc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "12efde2210400010715f5a402133e34495ae1741", "author": {"user": {"login": "hmottestad", "name": null}}, "url": "https://github.com/eclipse/rdf4j/commit/12efde2210400010715f5a402133e34495ae1741", "committedDate": "2020-04-15T10:52:28Z", "message": "GH-2097 added stats for tracking if the sail is empty and use this to optimize validation when clear() has been called\n\nSigned-off-by: Ha\u030avard Ottestad <hmottestad@gmail.com>"}, "afterCommit": {"oid": "eeed5c32caadd092f574e4e39d415a5b408a6205", "author": {"user": {"login": "hmottestad", "name": null}}, "url": "https://github.com/eclipse/rdf4j/commit/eeed5c32caadd092f574e4e39d415a5b408a6205", "committedDate": "2020-04-15T11:01:45Z", "message": "GH-2097 added stats for tracking if the sail is empty and use this to optimize validation when clear() has been called\n\nSigned-off-by: Ha\u030avard Ottestad <hmottestad@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzNzkwMjc0", "url": "https://github.com/eclipse/rdf4j/pull/2098#pullrequestreview-393790274", "createdAt": "2020-04-15T13:48:19Z", "commit": {"oid": "eeed5c32caadd092f574e4e39d415a5b408a6205"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQxMzo0ODoxOVrOGF6j-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQxMzo0ODoxOVrOGF6j-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODg1NTU0NQ==", "bodyText": "Missing curlies.", "url": "https://github.com/eclipse/rdf4j/pull/2098#discussion_r408855545", "createdAt": "2020-04-15T13:48:19Z", "author": {"login": "jeenbroekstra"}, "path": "core/sail/shacl/src/main/java/org/eclipse/rdf4j/sail/shacl/AST/SimplePath.java", "diffHunk": "@@ -31,7 +32,10 @@\n \t}\n \n \t@Override\n-\tpublic boolean requiresEvaluation(SailConnection addedStatements, SailConnection removedStatements) {\n+\tpublic boolean requiresEvaluation(SailConnection addedStatements, SailConnection removedStatements, Stats stats) {\n+\n+\t\tif (stats.isEmpty())\n+\t\t\treturn false;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eeed5c32caadd092f574e4e39d415a5b408a6205"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aec604640a3f87376d90b2063abbd99b3c90beac", "author": {"user": {"login": "hmottestad", "name": null}}, "url": "https://github.com/eclipse/rdf4j/commit/aec604640a3f87376d90b2063abbd99b3c90beac", "committedDate": "2020-04-15T14:07:28Z", "message": "GH-2097 added stats for tracking if the sail is empty and use this to optimize validation when clear() has been called\n\nSigned-off-by: Ha\u030avard Ottestad <hmottestad@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "eeed5c32caadd092f574e4e39d415a5b408a6205", "author": {"user": {"login": "hmottestad", "name": null}}, "url": "https://github.com/eclipse/rdf4j/commit/eeed5c32caadd092f574e4e39d415a5b408a6205", "committedDate": "2020-04-15T11:01:45Z", "message": "GH-2097 added stats for tracking if the sail is empty and use this to optimize validation when clear() has been called\n\nSigned-off-by: Ha\u030avard Ottestad <hmottestad@gmail.com>"}, "afterCommit": {"oid": "aec604640a3f87376d90b2063abbd99b3c90beac", "author": {"user": {"login": "hmottestad", "name": null}}, "url": "https://github.com/eclipse/rdf4j/commit/aec604640a3f87376d90b2063abbd99b3c90beac", "committedDate": "2020-04-15T14:07:28Z", "message": "GH-2097 added stats for tracking if the sail is empty and use this to optimize validation when clear() has been called\n\nSigned-off-by: Ha\u030avard Ottestad <hmottestad@gmail.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 40, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}