{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk2MjMwNjYx", "number": 2568, "title": "GH-2567 update documentation on how to update or clear the shacl shapes", "bodyText": "GitHub issue resolved: #2567 \nBriefly describe the changes proposed in this PR:\n\nUpdate docs.\n\nPR Author Checklist (see the contributor guidelines for more details):\n\n my pull request is self-contained\n I've added tests for the changes I made\n I've applied code formatting (you can use mvn process-resources to format from the command line)\n every commit message starts with the issue number (GH-xxxx) followed by a meaningful description of the change\n every commit has been signed off\n\nNote: we merge all feature pull requests using squash and merge. See RDF4J git merge strategy for more details.", "createdAt": "2020-10-01T12:44:49Z", "url": "https://github.com/eclipse/rdf4j/pull/2568", "merged": true, "mergeCommit": {"oid": "6f6c13b126ee803c26867ed70f0d2bbfd65a24de"}, "closed": true, "closedAt": "2020-10-02T07:45:42Z", "author": {"login": "hmottestad"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdOQw5iAH2gAyNDk2MjMwNjYxOjc2M2M2YjUzZDM4YTgwMDJiYzM3ZGU1OThjZDg0ZjZmM2YwMTdkYzM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdOgK1JAH2gAyNDk2MjMwNjYxOjI3YzhmODdmM2ZmNmEzMmYzNjU2NmZhOWE1NWNjMWQzMWY0MDM0NTE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "763c6b53d38a8002bc37de598cd84f6f3f017dc3", "author": {"user": {"login": "hmottestad", "name": null}}, "url": "https://github.com/eclipse/rdf4j/commit/763c6b53d38a8002bc37de598cd84f6f3f017dc3", "committedDate": "2020-10-01T12:44:04Z", "message": "update documentation on how to update or clear the shacl shapes\n\nSigned-off-by: Ha\u030avard Ottestad <hmottestad@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwNzkxODk4", "url": "https://github.com/eclipse/rdf4j/pull/2568#pullrequestreview-500791898", "createdAt": "2020-10-02T00:01:01Z", "commit": {"oid": "763c6b53d38a8002bc37de598cd84f6f3f017dc3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQwMDowMTowMVrOHbeIOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQwMDowMTowMVrOHbeIOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODU2NzIyNw==", "bodyText": "Could you replace the {{< highlight >}} shortcode with  ```java .... ```?", "url": "https://github.com/eclipse/rdf4j/pull/2568#discussion_r498567227", "createdAt": "2020-10-02T00:01:01Z", "author": {"login": "jeenbroekstra"}, "path": "site/content/documentation/programming/shacl.md", "diffHunk": "@@ -51,15 +51,31 @@ Utilize a normal connection to load your shapes into this graph. SPARQL is not s\n \n {{< highlight java >}}\n ShaclSail shaclSail = new ShaclSail(new MemoryStore());\n-SailRepository sailRepository = new SailRepository(shaclSail);\n+Repository repo = new SailRepository(shaclSail);\n \n-try (SailRepositoryConnection connection = sailRepository.getConnection()) {\n-    connection.begin();\n+try (RepositoryConnection connection = repo.getConnection()) {\n \n     Reader shaclRules = ....\n \n+    // add shapes\n+    connection.begin();\n+    connection.add(shaclRules, \"\", RDFFormat.TURTLE, RDF4J.SHACL_SHAPE_GRAPH);\n+    connection.commit();\n+    \n+    // clear existing shapes and add new ones in single transaction (eg. update shapes)\n+    connection.begin();\n+    connection.clear(RDF4J.SHACL_SHAPE_GRAPH);\n     connection.add(shaclRules, \"\", RDFFormat.TURTLE, RDF4J.SHACL_SHAPE_GRAPH);\n     connection.commit();\n+\n+    // clear all shapes\n+    connection.begin();\n+    connection.clear(RDF4J.SHACL_SHAPE_GRAPH);\n+    connection.commit();\n+    \n+    // connection.clear(); will not clear the Shapes graph!\n+\n+\n }\n {{< / highlight >}}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "763c6b53d38a8002bc37de598cd84f6f3f017dc3"}, "originalPosition": 33}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "27c8f87f3ff6a32f36566fa9a55cc1d31f403451", "author": {"user": {"login": "hmottestad", "name": null}}, "url": "https://github.com/eclipse/rdf4j/commit/27c8f87f3ff6a32f36566fa9a55cc1d31f403451", "committedDate": "2020-10-02T06:40:58Z", "message": "review\n\nSigned-off-by: Ha\u030avard Ottestad <hmottestad@gmail.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 109, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}