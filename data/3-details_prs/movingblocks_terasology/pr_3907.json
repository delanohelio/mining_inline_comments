{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA4NzAxNTMz", "number": 3907, "title": "feat: Add events to scale character", "bodyText": "This PR refactors the adaptions for height changes to be tied to a new events: ScaleCharacterEvent.\nTwo events for slightly different sementics regarding the way an entity should be scaled:\n\nScaleByRequest(factor) an event to request that an entity should be scaled by the given factor. This is a semantic operation, and as such is consumable (to cancel the request).\nScaleToRequest(value) an event to request that an entity should be scaled to a given value. Again, this is a semantic operation and is consumable.\n\nIf the events are not cancelled, they'll eventually reach an event handler with low priority that \"accepts\" the request and turns it into a notification event for systems to react on:\n\nOnScaleEvent(oldValue, newValue) is an immutable event that informs about a change. Systems should listen to this event in case they want to act upon scaling of characters.\n\nThis event is used by the debug command, and it is intended to be used by modules to trigger changes to a player's (or mob's) height. This could be a shrinking potion, or a magic effect.\n\nThere are some TODO comments in the code for follow-ups. Further adjustments to the functions for adjusting the values of the character component are also required.\nThese event also allow to react on scaling a character for more components, e.g., adjust the size of the floating cube in multiplayer, ...", "createdAt": "2020-04-24T18:28:37Z", "url": "https://github.com/MovingBlocks/Terasology/pull/3907", "merged": true, "mergeCommit": {"oid": "1d13d2b6496db31f88936dfaa31bf09b5a36309c"}, "closed": true, "closedAt": "2020-04-28T15:56:21Z", "author": {"login": "skaldarnar"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABca1yKEAH2gAyNDA4NzAxNTMzOmNlYmJjMzM2N2QwN2U4Zjg2OGViYzZhNmQ5MGFkOWMzMDQ2Mjc0Zjc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABccEtYYgFqTQwMTg4OTQ1MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "cebbc3367d07e8f868ebc6a6d90ad9c3046274f7", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/cebbc3367d07e8f868ebc6a6d90ad9c3046274f7", "committedDate": "2020-04-24T18:27:52Z", "message": "feat: Add event to scale character"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ad54797413de6a938b54ab5fc5a752715d6d1b2f", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/ad54797413de6a938b54ab5fc5a752715d6d1b2f", "committedDate": "2020-04-26T16:44:46Z", "message": "fix: Loop through all vertical blocks a character occupies in checkBlockEntry"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5e9b663089e29d0a47dde04b0fba43c8ff831d52", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/5e9b663089e29d0a47dde04b0fba43c8ff831d52", "committedDate": "2020-04-26T17:19:10Z", "message": "fix: refresh the character collider after scaling"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "830f11181719cabafe26563da050f06ec7be9746", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/830f11181719cabafe26563da050f06ec7be9746", "committedDate": "2020-04-26T19:55:39Z", "message": "doc: Add Javadoc and utility methods for ScaleCharacterEvent"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b405d807a1469b5e7e691ac36ecac3617e59e1a8", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/b405d807a1469b5e7e691ac36ecac3617e59e1a8", "committedDate": "2020-04-26T20:04:29Z", "message": "chore: Remove BoxShape component from player"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d8fdcd4c1fa7541cfc0b22a9dbdfb97a2bd2afcd", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/d8fdcd4c1fa7541cfc0b22a9dbdfb97a2bd2afcd", "committedDate": "2020-04-26T20:30:26Z", "message": "feat: Store original and target value instead of factor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "908ad99891cee997c780426bfd000b4395fe235f", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/908ad99891cee997c780426bfd000b4395fe235f", "committedDate": "2020-04-26T20:52:48Z", "message": "feat: Move gaze mount point handling to proper system (+ doc)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e5ba789b329f68b8ac41ec5d143d35a810181917", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/e5ba789b329f68b8ac41ec5d143d35a810181917", "committedDate": "2020-04-27T20:42:24Z", "message": "feat: Introduce scale request and on scale notification events"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d8689f1710fb567d6ddfa3f2f9e6d4d09aedd768", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/d8689f1710fb567d6ddfa3f2f9e6d4d09aedd768", "committedDate": "2020-04-27T21:05:56Z", "message": "feat: adjust player location on scaling"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAxMzMwMjc4", "url": "https://github.com/MovingBlocks/Terasology/pull/3907#pullrequestreview-401330278", "createdAt": "2020-04-27T21:12:13Z", "commit": {"oid": "d8689f1710fb567d6ddfa3f2f9e6d4d09aedd768"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMToxMjoxM1rOGM363w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMToxODozN1rOGM4InA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjE1MjI4Nw==", "bodyText": "are you planning on added some javadocs to this class?", "url": "https://github.com/MovingBlocks/Terasology/pull/3907#discussion_r416152287", "createdAt": "2020-04-27T21:12:13Z", "author": {"login": "pollend"}, "path": "engine/src/main/java/org/terasology/logic/characters/CharacterSystem.java", "diffHunk": "@@ -62,7 +64,10 @@\n import org.terasology.world.block.BlockComponent;\n import org.terasology.world.block.regions.ActAsBlockComponent;\n \n+import java.util.Optional;\n+\n /**\n+ *\n  */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d8689f1710fb567d6ddfa3f2f9e6d4d09aedd768"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjE1Mzc3Mw==", "bodyText": "does the mount point update before the game starts?", "url": "https://github.com/MovingBlocks/Terasology/pull/3907#discussion_r416153773", "createdAt": "2020-04-27T21:15:04Z", "author": {"login": "pollend"}, "path": "engine/src/main/resources/assets/prefabs/player/player.prefab", "diffHunk": "@@ -74,11 +67,5 @@\n         \"translate\": [-0.4, 0.45, 0.3],\n         \"scale\": 0.35\n   },\n-  \"GazeMountPoint\": {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d8689f1710fb567d6ddfa3f2f9e6d4d09aedd768"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjE1NTgwNA==", "bodyText": "do we still need the BoxShape and does it still serve a purpose? I remember there was some discussion about the there being two colliders on the player.", "url": "https://github.com/MovingBlocks/Terasology/pull/3907#discussion_r416155804", "createdAt": "2020-04-27T21:18:37Z", "author": {"login": "pollend"}, "path": "engine/src/main/resources/assets/prefabs/player/player.prefab", "diffHunk": "@@ -20,13 +20,6 @@\n   },\n   \"VisualCharacter\": {\n   },\n-  \"BoxShape\": {\n-    \"extents\": [\n-      1.5,\n-      1.8,\n-      1.5\n-    ]\n-  },", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d8689f1710fb567d6ddfa3f2f9e6d4d09aedd768"}, "originalPosition": 10}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAxODg5NDUw", "url": "https://github.com/MovingBlocks/Terasology/pull/3907#pullrequestreview-401889450", "createdAt": "2020-04-28T14:25:09Z", "commit": {"oid": "d8689f1710fb567d6ddfa3f2f9e6d4d09aedd768"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1754, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}