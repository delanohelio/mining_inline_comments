{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIwMjM2NzM5", "number": 3970, "title": "maint: upgrade gradle to 6.4 from 6.0", "bodyText": "This updates Gradle from 6.0 to the current release 6.4.1.\nIt fixes all gradle's deprecation warnings during build, and cleans up a few debugging print statements.\nIt also includes a new groovy-wrapper.jar.\nThis is intended to be the \u201csafe\u201d parts of the work that started in #3959.\nI don't think we have anything blocked waiting for gradle 6.4, but using current gradle provides a better baseline for other build streamlining work. Also brings it even with Launcher.\nHow to test\n\nmake sure your local dev builds still work\nalso make sure we can still build releases\n\nOutstanding before Merge\n\n merge #3954 (.idea), this branch is based on it.", "createdAt": "2020-05-19T16:39:38Z", "url": "https://github.com/MovingBlocks/Terasology/pull/3970", "merged": true, "mergeCommit": {"oid": "1367fa1c066042d2417cab7007f99ab0ce70e844"}, "closed": true, "closedAt": "2020-05-25T00:55:23Z", "author": {"login": "keturn"}, "timelineItems": {"totalCount": 34, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABckK9iGgBqjMzNjcyOTI3MTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABckip0GABqjMzNjgzNDA0OTk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c7cd698868f07779b706b1302d75fc9aa397c1ea", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/c7cd698868f07779b706b1302d75fc9aa397c1ea", "committedDate": "2020-05-20T15:40:55Z", "message": "Merge branch 'maint/dot-idea' into maint/gradle64"}, "afterCommit": {"oid": "204d3cb694a0d745d5f44ef22636992aa8116570", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/204d3cb694a0d745d5f44ef22636992aa8116570", "committedDate": "2020-05-23T17:47:34Z", "message": "maint: include module classes in :facades:PC:run"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3MzEyNzQw", "url": "https://github.com/MovingBlocks/Terasology/pull/3970#pullrequestreview-417312740", "createdAt": "2020-05-23T22:19:38Z", "commit": {"oid": "00effbea0e0b310633e430a088ff0c28f8069e14"}, "state": "COMMENTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yM1QyMjoxOTozOFrOGZro1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yM1QyMjozMTowOFrOGZrrUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU4MjU1MA==", "bodyText": "\ud83d\udc4d", "url": "https://github.com/MovingBlocks/Terasology/pull/3970#discussion_r429582550", "createdAt": "2020-05-23T22:19:38Z", "author": {"login": "skaldarnar"}, "path": "build.gradle", "diffHunk": "@@ -90,7 +87,9 @@ repositories {\n \n     // MovingBlocks Artifactory instance for libs not readily available elsewhere plus our own libs\n     maven {\n+        name \"Terasology Artifactory\"\n         url \"http://artifactory.terasology.org/artifactory/virtual-repo-live\"\n+        allowInsecureProtocol true  // \ud83d\ude31", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "00effbea0e0b310633e430a088ff0c28f8069e14"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU4MjY1OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                    allowInsecureProtocol true\n          \n          \n            \n                                    allowInsecureProtocol true // \ud83d\ude31", "url": "https://github.com/MovingBlocks/Terasology/pull/3970#discussion_r429582659", "createdAt": "2020-05-23T22:21:56Z", "author": {"login": "skaldarnar"}, "path": "config/gradle/publish.gradle", "diffHunk": "@@ -20,7 +36,8 @@ publishing {\n                     if (rootProject.hasProperty(\"publishRepo\")) {\n                         // This first option is good for local testing, you can set a full explicit target repo in gradle.properties\n                         url = \"http://artifactory.terasology.org/artifactory/$publishRepo\"\n-                        println \"Changing PUBLISH repoKey set via Gradle property to $publishRepo\"\n+                        allowInsecureProtocol true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "00effbea0e0b310633e430a088ff0c28f8069e14"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU4MjY5NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                return gitBranch != null && gitBranch != \"\" && gitBranch.equals(\"master\");\n          \n          \n            \n                return gitBranch != null && gitBranch.equals(\"master\");", "url": "https://github.com/MovingBlocks/Terasology/pull/3970#discussion_r429582694", "createdAt": "2020-05-23T22:22:28Z", "author": {"login": "skaldarnar"}, "path": "config/gradle/publish.gradle", "diffHunk": "@@ -56,7 +74,7 @@ publishing {\n     }\n }\n \n-def isMaster(gitBranch) {\n+static def isMaster(gitBranch) {\n     return gitBranch != null && gitBranch != \"\" && gitBranch.equals(\"master\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "00effbea0e0b310633e430a088ff0c28f8069e14"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU4Mjc1Ng==", "bodyText": "I think terasology.github.io got moved to MovingBlocks/ModuleSite ... \ud83e\udd14\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                def excludedItems = [\"engine\", \"BuilderSampleGameplay\", \"Index\", \"terasology.github.io\", \"out\", \"build\"]\n          \n          \n            \n                def excludedItems = [\"engine\", \"BuilderSampleGameplay\", \"Index\", \"out\", \"build\"]", "url": "https://github.com/MovingBlocks/Terasology/pull/3970#discussion_r429582756", "createdAt": "2020-05-23T22:23:21Z", "author": {"login": "skaldarnar"}, "path": "config/groovy/module.groovy", "diffHunk": "@@ -1,7 +1,23 @@\n+/*\n+ * Copyright 2020 MovingBlocks\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n import groovy.json.JsonSlurper\n \n class module {\n-    def excludedItems = [\"engine\", \"BuilderSampleGameplay\", \"Index\", \"terasology.github.io\"]\n+    def excludedItems = [\"engine\", \"BuilderSampleGameplay\", \"Index\", \"terasology.github.io\", \"out\", \"build\"]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "00effbea0e0b310633e430a088ff0c28f8069e14"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU4Mjg0OA==", "bodyText": "Did a spare \"not\" sneak in here?\nLooking at this, I'd like to go over this and allow for module.json as alternative to .txt...", "url": "https://github.com/MovingBlocks/Terasology/pull/3970#discussion_r429582848", "createdAt": "2020-05-23T22:25:02Z", "author": {"login": "skaldarnar"}, "path": "config/groovy/module.groovy", "diffHunk": "@@ -79,6 +95,10 @@ class module {\n \n     def refreshGradle(File targetDir) {\n         // Copy in the template build.gradle for modules\n+        if (!new File(targetDir, \"module.txt\").exists()) {\n+            println \"$targetDir has no module.txt, it must not want a fresh build.gradle\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "00effbea0e0b310633e430a088ff0c28f8069e14"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU4MzE4NQ==", "bodyText": "Using Optional::get surrounded by try-catch is an anti-pattern to me. Instead, use Optional::orElseThrow:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    try {\n          \n          \n            \n                        this.textureMat = Assets.getMaterial(\"engine:UITexture\").get();\n          \n          \n            \n                    } catch (java.util.NoSuchElementException noSuch) {\n          \n          \n            \n                        // Some extra attention to how this is reported, because this is often the first asset we try to load.\n          \n          \n            \n                        throw new RuntimeException(\"Failing to find engine textures\", noSuch);\n          \n          \n            \n                    }\n          \n          \n            \n                    this.textureMat = \n          \n          \n            \n                        Assets.getMaterial(\"engine:UITexture\")\n          \n          \n            \n                            .orElseThrow(e -> throw new RuntimeException(\"Failing to find engine textures\", e));", "url": "https://github.com/MovingBlocks/Terasology/pull/3970#discussion_r429583185", "createdAt": "2020-05-23T22:31:08Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/rendering/nui/internal/LwjglCanvasRenderer.java", "diffHunk": "@@ -113,7 +113,12 @@\n \n     public LwjglCanvasRenderer(Context context) {\n         // TODO use context to get assets instead of static methods\n-        this.textureMat = Assets.getMaterial(\"engine:UITexture\").get();\n+        try {\n+            this.textureMat = Assets.getMaterial(\"engine:UITexture\").get();\n+        } catch (java.util.NoSuchElementException noSuch) {\n+            // Some extra attention to how this is reported, because this is often the first asset we try to load.\n+            throw new RuntimeException(\"Failing to find engine textures\", noSuch);\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "00effbea0e0b310633e430a088ff0c28f8069e14"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3MzQ3MTY4", "url": "https://github.com/MovingBlocks/Terasology/pull/3970#pullrequestreview-417347168", "createdAt": "2020-05-24T10:52:39Z", "commit": {"oid": "fbaf5f4807050f8545b4dfc88430b5f0c1d7ab81"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3MzYxMzI4", "url": "https://github.com/MovingBlocks/Terasology/pull/3970#pullrequestreview-417361328", "createdAt": "2020-05-24T14:00:17Z", "commit": {"oid": "fbaf5f4807050f8545b4dfc88430b5f0c1d7ab81"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQxNDowMDoxOFrOGZvIXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQxNDowNjo1NVrOGZvK0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYzOTc3NA==", "bodyText": "This is must be api, otherwise junit5 tests in module cannot work.", "url": "https://github.com/MovingBlocks/Terasology/pull/3970#discussion_r429639774", "createdAt": "2020-05-24T14:00:18Z", "author": {"login": "DarkWeird"}, "path": "engine-tests/build.gradle", "diffHunk": "@@ -55,21 +56,21 @@ dependencies {\n     implementation group: 'org.codehaus.plexus', name: 'plexus-utils', version: '1.5.6'\n     implementation group: 'com.google.protobuf', name: 'protobuf-java', version: '2.6.1'\n     implementation group: 'ch.qos.logback', name: 'logback-classic', version: '1.2.3'\n-    runtime group: 'org.slf4j', name: 'jul-to-slf4j', version: '1.7.21'\n+    runtimeOnly group: 'org.slf4j', name: 'jul-to-slf4j', version: '1.7.21'\n     implementation group: 'org.reflections', name: 'reflections', version: '0.9.10'\n \n     // Test lib dependencies\n-    compile(\"org.junit.jupiter:junit-jupiter-api:5.5.2\")\n-    compile(\"org.junit.jupiter:junit-jupiter-params:5.5.2\")\n-    compile group: 'org.mockito', name: 'mockito-junit-jupiter', version: '3.2.0'\n+    implementation(\"org.junit.jupiter:junit-jupiter-api:5.5.2\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fbaf5f4807050f8545b4dfc88430b5f0c1d7ab81"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY0MDQwMQ==", "bodyText": "you can reduce lines by fold api and implementation  by libs.\napi contains implementation (checked on jupiter deps in engine-tests)", "url": "https://github.com/MovingBlocks/Terasology/pull/3970#discussion_r429640401", "createdAt": "2020-05-24T14:06:55Z", "author": {"login": "DarkWeird"}, "path": "engine/build.gradle", "diffHunk": "@@ -71,18 +91,18 @@ configurations.all {\n // Primary dependencies definition\n dependencies {\n     // White list packages {@see ExternalApiWhiteList class}\n-    apiElements group: 'com.google.guava', name: 'guava', version: '23.0'\n-    apiElements group: 'com.google.code.gson', name: 'gson', version: '2.6.2'\n-    apiElements group: 'net.sf.trove4j', name: 'trove4j', version: '3.0.3'\n-    apiElements group: 'org.lwjgl.lwjgl', name: 'lwjgl', version: LwjglVersion\n-    apiElements(group: 'com.snowplowanalytics', name: 'snowplow-java-tracker', version: '0.8.0') {\n+    api group: 'com.google.guava', name: 'guava', version: '23.0'\n+    api group: 'com.google.code.gson', name: 'gson', version: '2.6.2'\n+    api group: 'net.sf.trove4j', name: 'trove4j', version: '3.0.3'\n+    api group: 'org.lwjgl.lwjgl', name: 'lwjgl', version: LwjglVersion\n+    api(group: 'com.snowplowanalytics', name: 'snowplow-java-tracker', version: '0.9.0') {\n         exclude group: 'org.slf4j', module: 'slf4j-simple'\n     }\n-    apiElements group: 'org.joml', name: 'joml', version: '1.9.24'\n-    apiElements group: 'java3d', name: 'vecmath', version: '1.3.1'\n+    api group: 'org.joml', name: 'joml', version: '1.9.24'\n+    api group: 'java3d', name: 'vecmath', version: '1.3.1'\n     // Light and Shadow use it\n-    apiElements group: 'com.miglayout', name: 'miglayout-core', version: '5.0'\n-    apiElements group: 'org.codehaus.plexus', name: 'plexus-utils', version: '1.5.6'\n+    api group: 'com.miglayout', name: 'miglayout-core', version: '5.0'\n+    api group: 'org.codehaus.plexus', name: 'plexus-utils', version: '1.5.6'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fbaf5f4807050f8545b4dfc88430b5f0c1d7ab81"}, "originalPosition": 72}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3MzczMTEx", "url": "https://github.com/MovingBlocks/Terasology/pull/3970#pullrequestreview-417373111", "createdAt": "2020-05-24T16:32:01Z", "commit": {"oid": "fbaf5f4807050f8545b4dfc88430b5f0c1d7ab81"}, "state": "APPROVED", "comments": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQxNjozMjowMVrOGZv9oQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQxOToyNzoxNVrOGZwzag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY1MzQwOQ==", "bodyText": "Thanks for that - hopefully it'll be temporary and we can use a shiny new instance of something rather than the poor old Artifactory sometime soon ;-)", "url": "https://github.com/MovingBlocks/Terasology/pull/3970#discussion_r429653409", "createdAt": "2020-05-24T16:32:01Z", "author": {"login": "Cervator"}, "path": "build.gradle", "diffHunk": "@@ -90,7 +87,9 @@ repositories {\n \n     // MovingBlocks Artifactory instance for libs not readily available elsewhere plus our own libs\n     maven {\n+        name \"Terasology Artifactory\"\n         url \"http://artifactory.terasology.org/artifactory/virtual-repo-live\"\n+        allowInsecureProtocol true  // \ud83d\ude31", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU4MjU1MA=="}, "originalCommit": {"oid": "00effbea0e0b310633e430a088ff0c28f8069e14"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY1NDA5Mg==", "bodyText": "This looks fancy, what do? Attaches a descriptor of some sort rather than bother with optional debug logging?", "url": "https://github.com/MovingBlocks/Terasology/pull/3970#discussion_r429654092", "createdAt": "2020-05-24T16:40:32Z", "author": {"login": "Cervator"}, "path": "config/gradle/common.gradle", "diffHunk": "@@ -36,20 +52,23 @@ repositories {\n         def repoViaEnv = System.getenv()[\"RESOLUTION_REPO\"]\n         if (rootProject.hasProperty(\"alternativeResolutionRepo\")) {\n             // If the user supplies an alternative repo via gradle.properties then use that\n-            // println \"Changing RESOLUTION repo set via gradle.properties to $alternativeResolutionRepo\"\n+            name \"from alternativeResolutionRepo property\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fbaf5f4807050f8545b4dfc88430b5f0c1d7ab81"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY1NDE5Nw==", "bodyText": "This one we have less control over fixing, alas ;-) But maybe they'll fix it themselves sometime, might be hard to notice (just throwing https in there didn't make my browser sparkle with joy just now)", "url": "https://github.com/MovingBlocks/Terasology/pull/3970#discussion_r429654197", "createdAt": "2020-05-24T16:41:49Z", "author": {"login": "Cervator"}, "path": "config/gradle/common.gradle", "diffHunk": "@@ -36,20 +52,23 @@ repositories {\n         def repoViaEnv = System.getenv()[\"RESOLUTION_REPO\"]\n         if (rootProject.hasProperty(\"alternativeResolutionRepo\")) {\n             // If the user supplies an alternative repo via gradle.properties then use that\n-            // println \"Changing RESOLUTION repo set via gradle.properties to $alternativeResolutionRepo\"\n+            name \"from alternativeResolutionRepo property\"\n             url alternativeResolutionRepo\n         } else if (repoViaEnv != null && repoViaEnv != \"\") {\n-            // println \"Changing RESOLUTION repoKey set via env var to $repoViaEnv\"\n+            name \"from \\$RESOLUTION_REPO\"\n             url = repoViaEnv\n         } else {\n             // Our default is the main virtual repo containing everything except repos for testing Artifactory itself\n+            name \"Terasology Artifactory\"\n             url \"http://artifactory.terasology.org/artifactory/virtual-repo-live\"\n+            allowInsecureProtocol true  // \ud83d\ude31\n         }\n     }\n \n-    // snowplow for telemetry\n     maven {\n+        name \"snowplow (pre-0.9)\"\n         url \"http://maven.snplow.com/releases\"\n+        allowInsecureProtocol true  // \ud83d\ude31", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fbaf5f4807050f8545b4dfc88430b5f0c1d7ab81"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY1NDMwNQ==", "bodyText": "I will fully own up to just kinda rushing past some of these bits anyway. That was one of those \"Hmm, this one improvement should help and can't take that long\" followed by a later and later evening ...", "url": "https://github.com/MovingBlocks/Terasology/pull/3970#discussion_r429654305", "createdAt": "2020-05-24T16:43:03Z", "author": {"login": "Cervator"}, "path": "config/gradle/publish.gradle", "diffHunk": "@@ -56,7 +74,7 @@ publishing {\n     }\n }\n \n-def isMaster(gitBranch) {\n+static def isMaster(gitBranch) {\n     return gitBranch != null && gitBranch != \"\" && gitBranch.equals(\"master\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU4MjY5NA=="}, "originalCommit": {"oid": "00effbea0e0b310633e430a088ff0c28f8069e14"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY1NDQwNQ==", "bodyText": "Yep, and the goal was to move the Index repo too, just sort of stalled out on progress there for a while. Hopefully can rejuvenate that approach soon \u2122\ufe0f", "url": "https://github.com/MovingBlocks/Terasology/pull/3970#discussion_r429654405", "createdAt": "2020-05-24T16:44:41Z", "author": {"login": "Cervator"}, "path": "config/groovy/module.groovy", "diffHunk": "@@ -1,7 +1,23 @@\n+/*\n+ * Copyright 2020 MovingBlocks\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n import groovy.json.JsonSlurper\n \n class module {\n-    def excludedItems = [\"engine\", \"BuilderSampleGameplay\", \"Index\", \"terasology.github.io\"]\n+    def excludedItems = [\"engine\", \"BuilderSampleGameplay\", \"Index\", \"terasology.github.io\", \"out\", \"build\"]", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU4Mjc1Ng=="}, "originalCommit": {"oid": "00effbea0e0b310633e430a088ff0c28f8069e14"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY1NDg4OA==", "bodyText": "engine-tests isn't really a library, but I guess this brings in something useful?", "url": "https://github.com/MovingBlocks/Terasology/pull/3970#discussion_r429654888", "createdAt": "2020-05-24T16:51:36Z", "author": {"login": "Cervator"}, "path": "engine-tests/build.gradle", "diffHunk": "@@ -2,6 +2,7 @@\n \n // Grab all the common stuff like plugins to use, artifact repositories, code analysis config\n apply from: \"$rootDir/config/gradle/publish.gradle\"\n+apply plugin: \"java-library\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fbaf5f4807050f8545b4dfc88430b5f0c1d7ab81"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY1NTI0Mg==", "bodyText": "So this allows us to get rid of the duplication? Like having Guava both apiElements and implementation just so it'll both work in engine + in modules? We only need api then?", "url": "https://github.com/MovingBlocks/Terasology/pull/3970#discussion_r429655242", "createdAt": "2020-05-24T16:56:03Z", "author": {"login": "Cervator"}, "path": "engine/build.gradle", "diffHunk": "@@ -71,18 +91,18 @@ configurations.all {\n // Primary dependencies definition\n dependencies {\n     // White list packages {@see ExternalApiWhiteList class}\n-    apiElements group: 'com.google.guava', name: 'guava', version: '23.0'\n-    apiElements group: 'com.google.code.gson', name: 'gson', version: '2.6.2'\n-    apiElements group: 'net.sf.trove4j', name: 'trove4j', version: '3.0.3'\n-    apiElements group: 'org.lwjgl.lwjgl', name: 'lwjgl', version: LwjglVersion\n-    apiElements(group: 'com.snowplowanalytics', name: 'snowplow-java-tracker', version: '0.8.0') {\n+    api group: 'com.google.guava', name: 'guava', version: '23.0'\n+    api group: 'com.google.code.gson', name: 'gson', version: '2.6.2'\n+    api group: 'net.sf.trove4j', name: 'trove4j', version: '3.0.3'\n+    api group: 'org.lwjgl.lwjgl', name: 'lwjgl', version: LwjglVersion\n+    api(group: 'com.snowplowanalytics', name: 'snowplow-java-tracker', version: '0.9.0') {\n         exclude group: 'org.slf4j', module: 'slf4j-simple'\n     }\n-    apiElements group: 'org.joml', name: 'joml', version: '1.9.24'\n-    apiElements group: 'java3d', name: 'vecmath', version: '1.3.1'\n+    api group: 'org.joml', name: 'joml', version: '1.9.24'\n+    api group: 'java3d', name: 'vecmath', version: '1.3.1'\n     // Light and Shadow use it\n-    apiElements group: 'com.miglayout', name: 'miglayout-core', version: '5.0'\n-    apiElements group: 'org.codehaus.plexus', name: 'plexus-utils', version: '1.5.6'\n+    api group: 'com.miglayout', name: 'miglayout-core', version: '5.0'\n+    api group: 'org.codehaus.plexus', name: 'plexus-utils', version: '1.5.6'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY0MDQwMQ=="}, "originalCommit": {"oid": "fbaf5f4807050f8545b4dfc88430b5f0c1d7ab81"}, "originalPosition": 72}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY1NTQ1Nw==", "bodyText": "If you bump this 4.0.0 to 4.1.0 it'll be in sync with the duplicate dependency in the engine (caused trouble for me on an IntelliJ pre 2020.1). Separate story to actually fix there being two.\nCould probably even just centralize a variable holding the version so it can't drift. Could leave a TODO on such a var to remove it when we resolve whatever needed the dep in engine instead of facade one day. I think it is because there's a button in the UI to open the CrashReporter as a milder \"Issue Reporter\" meaning the act of opening the CR happens from the engine rather than the facade", "url": "https://github.com/MovingBlocks/Terasology/pull/3970#discussion_r429655457", "createdAt": "2020-05-24T16:59:14Z", "author": {"login": "Cervator"}, "path": "facades/PC/build.gradle", "diffHunk": "@@ -62,7 +85,7 @@ dependencies {\n \n         implementation project(':libs:CrashReporter:cr-terasology')\n     } else {\n-        println \"*** Setting a CrashReporter binary dependency, not present as source\"\n+        logger.debug(\"*** Setting a CrashReporter binary dependency, not present as source\")\n         implementation group: 'org.terasology.crashreporter', name: 'cr-terasology', version: '4.0.0'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fbaf5f4807050f8545b4dfc88430b5f0c1d7ab81"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY2NjU1Mw==", "bodyText": "Trivial but: two lines instead of three here? Can probably combine the first two and still have the .orElseThrow flow nicely?", "url": "https://github.com/MovingBlocks/Terasology/pull/3970#discussion_r429666553", "createdAt": "2020-05-24T19:18:12Z", "author": {"login": "Cervator"}, "path": "engine/src/main/java/org/terasology/rendering/nui/internal/LwjglCanvasRenderer.java", "diffHunk": "@@ -113,7 +113,9 @@\n \n     public LwjglCanvasRenderer(Context context) {\n         // TODO use context to get assets instead of static methods\n-        this.textureMat = Assets.getMaterial(\"engine:UITexture\").get();\n+        this.textureMat = ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fbaf5f4807050f8545b4dfc88430b5f0c1d7ab81"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY2NjYzNw==", "bodyText": "I'm guessing this is new with the application plugin, but if so shouldn't it replace the game task? Or maybe they can be used in different cases with one doing something more advanced than another\nAlso as a reminder there's a new exec task in here, so might want to rebase to grab it :-)", "url": "https://github.com/MovingBlocks/Terasology/pull/3970#discussion_r429666637", "createdAt": "2020-05-24T19:19:53Z", "author": {"login": "Cervator"}, "path": "facades/PC/build.gradle", "diffHunk": "@@ -86,6 +109,17 @@ configurations {\n     }\n }\n \n+run {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fbaf5f4807050f8545b4dfc88430b5f0c1d7ab81"}, "originalPosition": 58}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY2NzE3OA==", "bodyText": "Trivial, but may want to either use lots of asterisks or none for both logging statements :-)", "url": "https://github.com/MovingBlocks/Terasology/pull/3970#discussion_r429667178", "createdAt": "2020-05-24T19:27:15Z", "author": {"login": "Cervator"}, "path": "modules/subprojects.gradle", "diffHunk": "@@ -1,16 +1,33 @@\n+/*\n+ * Copyright 2020 MovingBlocks\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n // This magically allows subdirs in this subproject to themselves become sub-subprojects in a proper tree structure\n new File(rootDir, 'modules').eachDir { possibleSubprojectDir ->\n-    def subprojectName = 'modules:' + possibleSubprojectDir.name\n-    //println \"Gradle is reviewing module $subprojectName for inclusion as a sub-project\"\n+    def subprojectName = ':modules:' + possibleSubprojectDir.name\n     File buildFile = new File(possibleSubprojectDir, \"build.gradle\")\n-    if (buildFile.exists()) {\n-        println \"Module $subprojectName has a build file so counting it complete and including it\"\n-        include subprojectName\n-        def subprojectPath = ':' + subprojectName\n-        def subproject = project(subprojectPath)\n-        subproject.projectDir = possibleSubprojectDir\n-    } else {\n-        println \"***** WARNING: Found a module without a build.gradle, corrupt dir? NOT including $subprojectName *****\"\n+    File moduleTxt = new File(possibleSubprojectDir, \"module.txt\")\n+    if (!buildFile.exists()) {\n+        logger.warn(\"***** WARNING: Found a module without a build.gradle, corrupt dir? NOT including $subprojectName *****\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fbaf5f4807050f8545b4dfc88430b5f0c1d7ab81"}, "originalPosition": 33}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e05bdeaa72a476da078100d7f9229eb7a130ef42", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/e05bdeaa72a476da078100d7f9229eb7a130ef42", "committedDate": "2020-05-24T21:12:22Z", "message": "gradle: modernize dependency declarations\n\nthese were deprecated."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1c75727e67378d3184032e7a0222f580051f0671", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/1c75727e67378d3184032e7a0222f580051f0671", "committedDate": "2020-05-24T21:12:22Z", "message": "gradle: update snowplow to 0.9.0\n\nthey've started publishing to jcenter and bintray, no longer need their own repository."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4717e12f47f1a1bb9256cf636967eccc424c40c5", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/4717e12f47f1a1bb9256cf636967eccc424c40c5", "committedDate": "2020-05-24T21:12:22Z", "message": "gradle: it's spelled EXCLUDE"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e9cd37e4811198650f5f3ac120c02b9867d49f17", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/e9cd37e4811198650f5f3ac120c02b9867d49f17", "committedDate": "2020-05-24T21:12:22Z", "message": "tidy unused import"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4664bff959ec3bda05f3b273dd524725282e5aea", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/4664bff959ec3bda05f3b273dd524725282e5aea", "committedDate": "2020-05-24T21:12:22Z", "message": "gradle upgrade to 6.4.1"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c24b4bcbc2b0df98c77340203ee847a9a77e055f", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/c24b4bcbc2b0df98c77340203ee847a9a77e055f", "committedDate": "2020-05-24T21:12:22Z", "message": "gradle: use java \"application\" plugin for the facade."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "48fdae4f79cf8aaf02226ebee18ae5beb54c9a1e", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/48fdae4f79cf8aaf02226ebee18ae5beb54c9a1e", "committedDate": "2020-05-24T21:12:22Z", "message": "update gradle & groovy wrappers\n\nmakes groovy work with post-2018 gradle.\nhttps://github.com/MovingBlocks/groovy-wrapper/pull/4"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "129a914be8e7503e204da67cfa9cae9b5dd29899", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/129a914be8e7503e204da67cfa9cae9b5dd29899", "committedDate": "2020-05-24T21:12:22Z", "message": "gradle(modules): skip modules without modules.txt\n\nand remove some redundant directory-setting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "57bd4dfcc0994314c0f117d8e11922163ff3173c", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/57bd4dfcc0994314c0f117d8e11922163ff3173c", "committedDate": "2020-05-24T21:12:22Z", "message": "maint(gradle): tidy some repository declarations"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd20b4f4461a6e98c73677e28966287653557a27", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/cd20b4f4461a6e98c73677e28966287653557a27", "committedDate": "2020-05-24T21:12:22Z", "message": "feat(facades): provide run tasks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ffa463e81f39c98bf21e294362f7ec77b11a6ce", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/8ffa463e81f39c98bf21e294362f7ec77b11a6ce", "committedDate": "2020-05-24T21:12:22Z", "message": "maint(gradle): tidy"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f0c0b27c15505d923c4693d38a7a094c1bfff6e2", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/f0c0b27c15505d923c4693d38a7a094c1bfff6e2", "committedDate": "2020-05-24T21:12:22Z", "message": "maint(gradle): snowplow needn't be both impl and api"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a92737ddbc67a8961cdfaa7ad40d61ed007289c", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/3a92737ddbc67a8961cdfaa7ad40d61ed007289c", "committedDate": "2020-05-24T21:12:22Z", "message": "feat(groovyw): don't refresh build.gradle for directories without module.txt"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "be55e2ae79022c22855f0eee808b92ae39c0325d", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/be55e2ae79022c22855f0eee808b92ae39c0325d", "committedDate": "2020-05-24T21:12:22Z", "message": "maint(gradle): clean up logging/prints"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6be6cf1381341eb409a671c3cb704fcbafe2ad84", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/6be6cf1381341eb409a671c3cb704fcbafe2ad84", "committedDate": "2020-05-24T21:12:22Z", "message": "maint(gradle): allowInsecureProtocol where necessary"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f5c9d4f8b773c588e298e0f6a5ebc443a53d1d70", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/f5c9d4f8b773c588e298e0f6a5ebc443a53d1d70", "committedDate": "2020-05-24T21:12:22Z", "message": "maint: include module classes in :facades:PC:run"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "769ffcdceb7402f9698c70b74d387673ee2e804f", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/769ffcdceb7402f9698c70b74d387673ee2e804f", "committedDate": "2020-05-24T21:12:22Z", "message": "fix(engine): null checks and exception messages\n\nFor various things I ran in to while my build was a little messed up. Doesn't make things less broken, but hopefully makes it easier to see what the broken part is."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6cc2a20f997e56d82b7ddb8362ac4e4aaeb4e1ef", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/6cc2a20f997e56d82b7ddb8362ac4e4aaeb4e1ef", "committedDate": "2020-05-24T21:12:22Z", "message": "fix(build): artifactory is insecure \ud83d\ude31"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed4a915f15c9bdc563f0de24c308d8667153fb68", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/ed4a915f15c9bdc563f0de24c308d8667153fb68", "committedDate": "2020-05-24T21:12:22Z", "message": "fix(build): be sure copyResourcesToClasses always runs when `classes` task does\n\n`classes` depends on both compileJava and resources.\n\nThis is enabling the jank, but I am trying to limit the scope of this PR."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2cc7f75eb161395b87109a08af07be80f78db921", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/2cc7f75eb161395b87109a08af07be80f78db921", "committedDate": "2020-05-24T21:12:22Z", "message": "fix(build): remove stray debug settings"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3104f79674cadea14e7237b56bc07c0fcbb5860a", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/3104f79674cadea14e7237b56bc07c0fcbb5860a", "committedDate": "2020-05-24T21:12:22Z", "message": "doc(gradle): insecure repositories are scary\n\nCo-authored-by: Tobias Nett <skaldarnar@googlemail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9e6f33e1e5e4c24b9f26c0b6a5a5540d4f34df78", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/9e6f33e1e5e4c24b9f26c0b6a5a5540d4f34df78", "committedDate": "2020-05-24T21:12:22Z", "message": "refactor(engine): prefer `orElseThrow` on Option instead of try/catch\n\nCo-authored-by: Tobias Nett <skaldarnar@googlemail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7afa3fd8609609952af3de28fb8e144d9ab5116d", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/7afa3fd8609609952af3de28fb8e144d9ab5116d", "committedDate": "2020-05-24T21:12:22Z", "message": "refactor(build): declare module test dependencies"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1a57e3194d14160c47098ff8aa06dc9f53245042", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/1a57e3194d14160c47098ff8aa06dc9f53245042", "committedDate": "2020-05-24T21:33:17Z", "message": "refactor(build): remove duplicate api & implementation dependencies"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d70d1c2e969a31d763261c5ff3ea57a41165d0d0", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/d70d1c2e969a31d763261c5ff3ea57a41165d0d0", "committedDate": "2020-05-24T21:33:53Z", "message": "chore(build): match crashreporter version to engine's"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0e947302705b4b0e2c04b7f03130f9e525549f81", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/0e947302705b4b0e2c04b7f03130f9e525549f81", "committedDate": "2020-05-24T21:35:24Z", "message": "chore: tidying\n\nreviewers assure me these aren't needed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "386a127f08d8aa5102907bee43a74222f9c1edb9", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/386a127f08d8aa5102907bee43a74222f9c1edb9", "committedDate": "2020-05-24T21:44:09Z", "message": "doc: explain why this asset gets extra error handling"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4bb290128f336657d09faf7b3ae059a3a2d45648", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/4bb290128f336657d09faf7b3ae059a3a2d45648", "committedDate": "2020-05-24T21:44:41Z", "message": "config(idea): wrap long lines at some point"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fbaf5f4807050f8545b4dfc88430b5f0c1d7ab81", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/fbaf5f4807050f8545b4dfc88430b5f0c1d7ab81", "committedDate": "2020-05-24T03:16:52Z", "message": "fixup! refactor(engine): prefer `orElseThrow` on Option instead of try/catch"}, "afterCommit": {"oid": "4bb290128f336657d09faf7b3ae059a3a2d45648", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/4bb290128f336657d09faf7b3ae059a3a2d45648", "committedDate": "2020-05-24T21:44:41Z", "message": "config(idea): wrap long lines at some point"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1562, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}