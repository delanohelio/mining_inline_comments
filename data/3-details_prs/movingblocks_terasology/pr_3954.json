{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE3MDUxMzAy", "number": 3954, "title": "add IntelliJ configuration", "bodyText": "I was working on #3951 and came to the conclusion that it's counterproductive to try to manually tweak gradle and Intellij configs to sync their compiler-output directories.\nWondering \u201cwhat if I don't do that?\u201d led me to \u201cwhat if we don't use ./gradlew idea at all?\u201d\nSo I let IntelliJ import the gradle project and save its project configuration.\nWhat needs to be done to confirm that this is no less broken than the gradlew idea version?\nContains\nSupport for IntelliJ IDEA 2020.1. Some of it might be backwards-compatible with 2019 versions, but I recommend only trying to support 2020.1+\nAn .idea/ directory\nwith the project configuration, including features from the prior ide.gradle:\n\nCheckstyle\nCopyright template\nTerasology-specific annotations marked as entry points\nall the Run Configs.\n\nas well as:\n\nA startup task that runs gradlew extractConfigs extractNatives copyInMissingTemplates so they'll be in place right away.\nCode style setting to not use * imports with fewer than 999 imports. (yes, there's really no way to turn it off, setting it to a ridiculously high number is what everyone recommends.)\n\nOmitted:\n\ngit stuff. I haven't tested this extensively, but I think recent intellij figures out git roots pretty well on its own?\ncompiler \"build project automatically\" setting. Seems to be stored with the workspace settings, much easier for us to not try to mess with those.\n\ngitignore changes\n\nremoves some IntelliJ-IDEA ignores, because we want the .idea directory tracked now. The IDE seems to also think you don't want configs tracked if you ignore .ipr files, though this uses the directory-based format instead of IPRs.\nSome general clean-up. I think we all have a \"somewhat recent git version\" compared to that comment from 2015.\nA few things are ignored in .idea/.gitignore. I started writing notes in there and it turned in to a lot of words about how to store .idea in git. I can cross-post that to the forum or wiki or something if that would help.\n\nHow to Test\nThings to try, each from a clean checkout (no old build results, no old IntelliJ configs):\n\nmake sure ./gradlew game works without ever opening it in IntelliJ.\nopen in IntelliJ 2020.1\n\nagree to the Import Gradle prompt\nmake sure the TerasologyPC run configuration works without ever manually running gradle.\n\n\nopen in IntelliJ 2020.1\n\nagree to the Import Gradle prompt\nbefore building, open Settings / Build, Execution, Deployment / Build Tools / Gradle, and set the \"Build and run using\" option to \"Intellij IDEA.\"\nMake sure the TerasologyPC run configuration works without ever manually running gradle.\n\n\n\nOnce you've confirmed that starting from a clean slate works, you'll want to make sure you don't have to strictly commit to one approach or the other. Building in IntelliJ and then later on building from gradle should still work, for example.\nTo be really thorough, test under all operating systems you want to have people contributing from, and try some variants like:\n\non a machine that's never had IntelliJ installed on it before\non a machine that doesn't have a JDK with JavaFX\ntry IntelliJ's \"New Project from Version Control\" and give it the GitHub URL, instead of checking it out on the command line before opening it.\nsay \"gradle\" backwards three times while spinning counterclockwise\ndo your groovy things with the modules and stuff?\n\nOutstanding Before Merging\n\n review will be less messy if #3955 is merged first\n\u2026?\n\nPost-Merge Tasks\n\n find all the developer-documentation places that say things like \"don't use Import Gradle\" or \"run gradlew idea\" and update or remove them.", "createdAt": "2020-05-13T00:54:49Z", "url": "https://github.com/MovingBlocks/Terasology/pull/3954", "merged": true, "mergeCommit": {"oid": "af5872dae4c4de4a84ad80d777f6bcd868efbf92"}, "closed": true, "closedAt": "2020-05-21T17:13:22Z", "author": {"login": "keturn"}, "timelineItems": {"totalCount": 24, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcguACcAH2gAyNDE3MDUxMzAyOmU0Y2M0MzFiZjEwZDc2OTMzN2EzYjlmMjUyZTE4MDgwMmM5Mzg4NDA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcjg6DOAFqTQxNjMzMjUxMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e4cc431bf10d769337a3b9f252e180802c938840", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/e4cc431bf10d769337a3b9f252e180802c938840", "committedDate": "2020-05-13T00:47:20Z", "message": "add IntelliJ configuration (version 2020.1)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9a1d90030181594d49ee018d8c7d10bf74b0dd03", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/9a1d90030181594d49ee018d8c7d10bf74b0dd03", "committedDate": "2020-05-13T01:44:06Z", "message": ".idea: keep the run configurations in here\n\nLooks like the only reason to have them elsewhere is if .idea is gitignored.\n\nhttps://blog.jetbrains.com/idea/2020/03/intellij-idea-2020-1-beta2/#store_run_configurations_as_files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b393f382b12b543f9a583ceddd96905ea36eb902", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/b393f382b12b543f9a583ceddd96905ea36eb902", "committedDate": "2020-05-14T01:09:00Z", "message": "comments on gitignores"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "604b9413dd9fcc1a82d65c1c80bc1d8e4b228955", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/604b9413dd9fcc1a82d65c1c80bc1d8e4b228955", "committedDate": "2020-05-14T01:09:54Z", "message": ".idea: @In annotation indicates an entry point"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c669d9465a319f4a3ba2530f970da4f68139fbb9", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/c669d9465a319f4a3ba2530f970da4f68139fbb9", "committedDate": "2020-05-14T01:16:00Z", "message": ".idea: all the old run configs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f67e78d226d226e53526e792c782c56a662d67a", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/5f67e78d226d226e53526e792c782c56a662d67a", "committedDate": "2020-05-14T01:51:58Z", "message": ".idea: set the module name in the run configs\n\nthis is the IDEA-module-name, not the Teresology-module-name, or the Java-module-name."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5375178393f517954a27ad16508bef84ed7111c9", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/5375178393f517954a27ad16508bef84ed7111c9", "committedDate": "2020-05-14T01:53:11Z", "message": ".idea: remove my demo run configs now that we converted the others"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "75b4ddf1f97141c411e55b13e0a639a3621e41d4", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/75b4ddf1f97141c411e55b13e0a639a3621e41d4", "committedDate": "2020-05-14T01:59:42Z", "message": ".idea: extract configs on startup\n\nto get the checkstyle config"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2c1bc917e39d25d9478d5e52c30e20b4c14edbf7", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/2c1bc917e39d25d9478d5e52c30e20b4c14edbf7", "committedDate": "2020-05-14T02:06:07Z", "message": ".idea: test coverage\n\nshow test coverage for engine, not all Java packages in the universe"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3397b9e2176195fb07515aaf39872f3e85080d40", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/3397b9e2176195fb07515aaf39872f3e85080d40", "committedDate": "2020-05-14T02:14:07Z", "message": ".idea: extract natives as well as configs on startup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bbfb3e3b5777556447db8434b7fbc8dc275be5e8", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/bbfb3e3b5777556447db8434b7fbc8dc275be5e8", "committedDate": "2020-05-14T02:38:54Z", "message": ".idea: set copyright profile name to match the old config"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "339a970965c8c05a3e545eae94bdf1b0a1374c0b", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/339a970965c8c05a3e545eae94bdf1b0a1374c0b", "committedDate": "2020-05-14T03:45:02Z", "message": "chore: remove stray engine-tests outputs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0542a416389b0ab5244d131a902fc64b03cf1987", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/0542a416389b0ab5244d131a902fc64b03cf1987", "committedDate": "2020-05-14T13:45:36Z", "message": ".idea: add copyInMissingTemplates to startup task"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8aceb03b8f181f45e7e50646cda9a3ae56c329c6", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/8aceb03b8f181f45e7e50646cda9a3ae56c329c6", "committedDate": "2020-05-14T19:46:23Z", "message": "gradle: remove the direct xml modifications of idea configs\n\nThe goal is to keep the configs checked-in under .idea/, or as settings on the gradle builds or the gradle idea plugin, rather than direct XML hacking."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "071598b9483f1f1e8671ad4a943197111089a811", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/071598b9483f1f1e8671ad4a943197111089a811", "committedDate": "2020-05-15T14:36:11Z", "message": "Merge remote-tracking branch 'origin/develop' into maint/dot-idea\n\n# Conflicts:\n#\t.gitignore"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa94facb548c11e56b0a1ad6cec2fc5085b8e1f7", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/aa94facb548c11e56b0a1ad6cec2fc5085b8e1f7", "committedDate": "2020-05-16T15:32:40Z", "message": "style(idea): don't even use * with awt"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "518e46e4c110ca2db09c53728bc38f6494f0b74c", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/518e46e4c110ca2db09c53728bc38f6494f0b74c", "committedDate": "2020-05-17T23:43:27Z", "message": "idea: some demonstration scopes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e5349393e98b6cd7d0c625be998449103bae173c", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/e5349393e98b6cd7d0c625be998449103bae173c", "committedDate": "2020-05-19T16:23:41Z", "message": "idea: don't put a big copyright statement in .properties files"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1NDE0OTc1", "url": "https://github.com/MovingBlocks/Terasology/pull/3954#pullrequestreview-415414975", "createdAt": "2020-05-20T14:47:31Z", "commit": {"oid": "e5349393e98b6cd7d0c625be998449103bae173c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "92a192d9c7b4f51ca6bba6c712a8db29bcd0534d", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/92a192d9c7b4f51ca6bba6c712a8db29bcd0534d", "committedDate": "2020-05-20T15:28:29Z", "message": "enhancement(gradle): automatically set \"build and run using: IntelliJ IDEA\""}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c35b65cf4612dbbca3fadb0ebc61197a2d976620", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/c35b65cf4612dbbca3fadb0ebc61197a2d976620", "committedDate": "2020-05-20T15:29:52Z", "message": "Merge remote-tracking branch 'origin/develop' into maint/dot-idea"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f1e796282a1d7a3d00fb6babe6fdf11f82d1580", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/5f1e796282a1d7a3d00fb6babe6fdf11f82d1580", "committedDate": "2020-05-21T16:00:25Z", "message": "Merge remote-tracking branch 'origin/develop' into maint/dot-idea"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2Mjk0MTgx", "url": "https://github.com/MovingBlocks/Terasology/pull/3954#pullrequestreview-416294181", "createdAt": "2020-05-21T16:17:44Z", "commit": {"oid": "5f1e796282a1d7a3d00fb6babe6fdf11f82d1580"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2MzMyNTEz", "url": "https://github.com/MovingBlocks/Terasology/pull/3954#pullrequestreview-416332513", "createdAt": "2020-05-21T17:08:52Z", "commit": {"oid": "5f1e796282a1d7a3d00fb6babe6fdf11f82d1580"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxNzowODo1M1rOGY7UOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxNzowOTozMFrOGY7VlA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODc5MDg0MA==", "bodyText": "It is your dictionare.", "url": "https://github.com/MovingBlocks/Terasology/pull/3954#discussion_r428790840", "createdAt": "2020-05-21T17:08:53Z", "author": {"login": "DarkWeird"}, "path": ".idea/dictionaries/kevint.xml", "diffHunk": "@@ -0,0 +1,7 @@\n+<component name=\"ProjectDictionaryState\">\n+  <dictionary name=\"kevint\">\n+    <words>\n+      <w>terasology</w>\n+    </words>\n+  </dictionary>\n+</component>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5f1e796282a1d7a3d00fb6babe6fdf11f82d1580"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODc5MTE4OA==", "bodyText": "project-jdk-name - machine specified parameter", "url": "https://github.com/MovingBlocks/Terasology/pull/3954#discussion_r428791188", "createdAt": "2020-05-21T17:09:30Z", "author": {"login": "DarkWeird"}, "path": ".idea/misc.xml", "diffHunk": "@@ -0,0 +1,16 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project version=\"4\">\n+  <component name=\"EntryPointsManager\">\n+    <list size=\"4\">\n+      <item index=\"0\" class=\"java.lang.String\" itemvalue=\"org.terasology.entitySystem.event.ReceiveEvent\" />\n+      <item index=\"1\" class=\"java.lang.String\" itemvalue=\"org.terasology.entitySystem.systems.RegisterSystem\" />\n+      <item index=\"2\" class=\"java.lang.String\" itemvalue=\"org.terasology.logic.console.commandSystem.annotations.Command\" />\n+      <item index=\"3\" class=\"java.lang.String\" itemvalue=\"org.terasology.registry.In\" />\n+    </list>\n+    <writeAnnotations>\n+      <writeAnnotation name=\"org.terasology.registry.In\" />\n+    </writeAnnotations>\n+  </component>\n+  <component name=\"ExternalStorageConfigurationManager\" enabled=\"true\" />\n+  <component name=\"ProjectRootManager\" version=\"2\" languageLevel=\"JDK_1_8\" default=\"false\" project-jdk-name=\"liberica-11\" project-jdk-type=\"JavaSDK\" />", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5f1e796282a1d7a3d00fb6babe6fdf11f82d1580"}, "originalPosition": 15}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1532, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}