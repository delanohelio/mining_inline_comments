{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI4MTE3MjMx", "number": 4280, "title": "perf(chunkprovider): add sorting for incoming request on chunk loading/generation.", "bodyText": "Contains\nNearest chunks should loads faster.\nBonus: you don't see \"Compacting cache\" anymore.\nHow to test\n\nOpen TS.\nCreate world\ntry to compare chunk loading speed.", "createdAt": "2020-11-26T14:38:12Z", "url": "https://github.com/MovingBlocks/Terasology/pull/4280", "merged": true, "mergeCommit": {"oid": "24e4cdf89e2d44a397a4de5c0001081035428235"}, "closed": true, "closedAt": "2020-12-04T18:21:20Z", "author": {"login": "DarkWeird"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdgT8HMAH2gAyNTI4MTE3MjMxOmYwNDY3NGQzODFiNGJlNWQzNjJjNzFhOTE1YjY2ZTk1YWY4MmUwNWE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdi7ufDAH2gAyNTI4MTE3MjMxOjAyODdiYmI0NWViZjljNTExNTExY2IwNGRhMWMyYmI2ZDc5NmIzNjQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f04674d381b4be5d362c71a915b66e95af82e05a", "author": {"user": {"login": "DarkWeird", "name": "Nail Khanipov"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/f04674d381b4be5d362c71a915b66e95af82e05a", "committedDate": "2020-11-26T14:36:40Z", "message": "pref(chunkprovider): add sorting for incoming request on chunk loading/generation. chunks should ready faster then before"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bbf7661c9cf99b36fbc15bc67cd09f1c538a5299", "author": {"user": {"login": "DarkWeird", "name": "Nail Khanipov"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/bbf7661c9cf99b36fbc15bc67cd09f1c538a5299", "committedDate": "2020-11-26T14:38:51Z", "message": "Merge branch 'develop' into perf/chunkprovider-change-sorting"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1MTU5MDQ0", "url": "https://github.com/MovingBlocks/Terasology/pull/4280#pullrequestreview-545159044", "createdAt": "2020-12-04T17:31:46Z", "commit": {"oid": "bbf7661c9cf99b36fbc15bc67cd09f1c538a5299"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQxNzozMTo0NlrOH_ayMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQxNzo0NTozMFrOH_bTJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjI2MTE3MQ==", "bodyText": "\ud83d\udc4d", "url": "https://github.com/MovingBlocks/Terasology/pull/4280#discussion_r536261171", "createdAt": "2020-12-04T17:31:46Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/world/chunks/localChunkProvider/LocalChunkProvider.java", "diffHunk": "@@ -284,7 +284,6 @@ private void deactivateBlocks() {\n     private void checkForUnload() {\n         PerformanceMonitor.startActivity(\"Unloading irrelevant chunks\");\n         int unloaded = 0;\n-        logger.debug(\"Compacting cache\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bbf7661c9cf99b36fbc15bc67cd09f1c538a5299"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjI2MTc0Nw==", "bodyText": "Do we just need fewer tasks, or is this part of a greater picture (take less threads here, but use more somewhere else)?", "url": "https://github.com/MovingBlocks/Terasology/pull/4280#discussion_r536261747", "createdAt": "2020-12-04T17:32:39Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/world/chunks/pipeline/ChunkProcessingPipeline.java", "diffHunk": "@@ -43,17 +44,16 @@\n  */\n public class ChunkProcessingPipeline {\n \n-    private static final int NUM_TASK_THREADS = 8;\n+    private static final int NUM_TASK_THREADS = 4;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bbf7661c9cf99b36fbc15bc67cd09f1c538a5299"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjI2OTYwNQ==", "bodyText": "this is indeed black magic - where doe the order come from?", "url": "https://github.com/MovingBlocks/Terasology/pull/4280#discussion_r536269605", "createdAt": "2020-12-04T17:45:30Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/world/chunks/pipeline/ChunkProcessingPipeline.java", "diffHunk": "@@ -82,6 +82,18 @@ public ChunkProcessingPipeline(Function<Vector3ic, Chunk> chunkProvider, Compara\n         reactor.start();\n     }\n \n+    /**\n+     * BlackMagic method: {@link ExecutorCompletionService} wraps task with QueueingFuture (private access)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bbf7661c9cf99b36fbc15bc67cd09f1c538a5299"}, "originalPosition": 55}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0287bbb45ebf9c511511cb04da1c2bb6d796b364", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/0287bbb45ebf9c511511cb04da1c2bb6d796b364", "committedDate": "2020-12-04T18:05:50Z", "message": "Merge branch 'develop' into perf/chunkprovider-change-sorting"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1330, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}