{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM0OTEzNjA1", "number": 4306, "reviewThreads": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMlQyMDozOTo0OVrOFEhkpA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNlQyMzo0ODoxOVrOFJTDdg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwMjg4Njc2OnYy", "diffSide": "RIGHT", "path": "engine/src/main/java/org/terasology/math/ChunkMath.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMlQyMDozOTo0OVrOIEra0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMlQyMDozOTo0OVrOIEra0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTc3NjU5Mg==", "bodyText": "\"This method\"? \ud83e\udd14", "url": "https://github.com/MovingBlocks/Terasology/pull/4306#discussion_r541776592", "createdAt": "2020-12-12T20:39:49Z", "author": {"login": "jdrueckert"}, "path": "engine/src/main/java/org/terasology/math/ChunkMath.java", "diffHunk": "@@ -28,8 +28,10 @@\n \n /**\n  * Collection of math functions.\n- *\n+ * @deprecated This method is scheduled for removal in an upcoming version.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f5e88d2c1401db970c264092ba5ae10b4e213c8"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwMjg4OTAwOnYy", "diffSide": "RIGHT", "path": "engine/src/main/java/org/terasology/math/ChunkMath.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMlQyMDo0MTozNlrOIErbyA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xM1QxMjozODowMFrOIEz_-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTc3Njg0MA==", "bodyText": "Is there a replacement yet? If so, please link it here.", "url": "https://github.com/MovingBlocks/Terasology/pull/4306#discussion_r541776840", "createdAt": "2020-12-12T20:41:36Z", "author": {"login": "jdrueckert"}, "path": "engine/src/main/java/org/terasology/math/ChunkMath.java", "diffHunk": "@@ -486,7 +488,9 @@ public static Region3i getChunkRegionAroundWorldPos(Vector3i pos, int extent) {\n      * @param pos the world position\n      * @param extent the extent\n      * @return chunk region\n+     *\n      */\n+    @Deprecated", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f5e88d2c1401db970c264092ba5ae10b4e213c8"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTkxNzE3OA==", "bodyText": "It is mentioned in the docstring. Probably the hidden part is that we don't offer a replacement for the exact signature but ask the caller to create a block region from center and extents:\nChunks.toChunkRegion(BlockRegions.createFromCenterAndExtents(pos, extent))\n(Writing this makes me thing whether we should rename createFrom... to just from... on BlockRegions \ud83e\udd14 )", "url": "https://github.com/MovingBlocks/Terasology/pull/4306#discussion_r541917178", "createdAt": "2020-12-13T12:38:00Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/math/ChunkMath.java", "diffHunk": "@@ -486,7 +488,9 @@ public static Region3i getChunkRegionAroundWorldPos(Vector3i pos, int extent) {\n      * @param pos the world position\n      * @param extent the extent\n      * @return chunk region\n+     *\n      */\n+    @Deprecated", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTc3Njg0MA=="}, "originalCommit": {"oid": "9f5e88d2c1401db970c264092ba5ae10b4e213c8"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwMjg5MDIwOnYy", "diffSide": "RIGHT", "path": "engine/src/main/java/org/terasology/world/block/BlockRegion.java", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMlQyMDo0MjoxOVrOIErcUA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMlQyMTo1NzoyNVrOIEsJHQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTc3Njk3Ng==", "bodyText": "maybe:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public BlockRegion edge(Side side, BlockRegion dest) {\n          \n          \n            \n                public BlockRegion calculateEdge(Side side, BlockRegion dest) {\n          \n      \n    \n    \n  \n\nor\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public BlockRegion edge(Side side, BlockRegion dest) {\n          \n          \n            \n                public BlockRegion getEdge(Side side, BlockRegion dest) {", "url": "https://github.com/MovingBlocks/Terasology/pull/4306#discussion_r541776976", "createdAt": "2020-12-12T20:42:19Z", "author": {"login": "jdrueckert"}, "path": "engine/src/main/java/org/terasology/world/block/BlockRegion.java", "diffHunk": "@@ -802,6 +803,38 @@ public BlockRegion addExtents(float extentX, float extentY, float extentZ, Block\n         return dest;\n     }\n \n+    /**\n+     * calculates a 1 width region that borders the provided {@link Side} of a region\n+     *\n+     * @param side the side of the region\n+     * @param dest will hold the result\n+     * @return dest\n+     */\n+    public BlockRegion edge(Side side, BlockRegion dest) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f5e88d2c1401db970c264092ba5ae10b4e213c8"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTc4MDA4MQ==", "bodyText": "why calculate? when isn't it not doing calculation :?", "url": "https://github.com/MovingBlocks/Terasology/pull/4306#discussion_r541780081", "createdAt": "2020-12-12T21:03:20Z", "author": {"login": "pollend"}, "path": "engine/src/main/java/org/terasology/world/block/BlockRegion.java", "diffHunk": "@@ -802,6 +803,38 @@ public BlockRegion addExtents(float extentX, float extentY, float extentZ, Block\n         return dest;\n     }\n \n+    /**\n+     * calculates a 1 width region that borders the provided {@link Side} of a region\n+     *\n+     * @param side the side of the region\n+     * @param dest will hold the result\n+     * @return dest\n+     */\n+    public BlockRegion edge(Side side, BlockRegion dest) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTc3Njk3Ng=="}, "originalCommit": {"oid": "9f5e88d2c1401db970c264092ba5ae10b4e213c8"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTc4MDQyNA==", "bodyText": "getEdge is fine too, only edge seems a bit blank though", "url": "https://github.com/MovingBlocks/Terasology/pull/4306#discussion_r541780424", "createdAt": "2020-12-12T21:05:36Z", "author": {"login": "jdrueckert"}, "path": "engine/src/main/java/org/terasology/world/block/BlockRegion.java", "diffHunk": "@@ -802,6 +803,38 @@ public BlockRegion addExtents(float extentX, float extentY, float extentZ, Block\n         return dest;\n     }\n \n+    /**\n+     * calculates a 1 width region that borders the provided {@link Side} of a region\n+     *\n+     * @param side the side of the region\n+     * @param dest will hold the result\n+     * @return dest\n+     */\n+    public BlockRegion edge(Side side, BlockRegion dest) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTc3Njk3Ng=="}, "originalCommit": {"oid": "9f5e88d2c1401db970c264092ba5ae10b4e213c8"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTc4NzQ4Ng==", "bodyText": "that sounds better.", "url": "https://github.com/MovingBlocks/Terasology/pull/4306#discussion_r541787486", "createdAt": "2020-12-12T21:51:28Z", "author": {"login": "pollend"}, "path": "engine/src/main/java/org/terasology/world/block/BlockRegion.java", "diffHunk": "@@ -802,6 +803,38 @@ public BlockRegion addExtents(float extentX, float extentY, float extentZ, Block\n         return dest;\n     }\n \n+    /**\n+     * calculates a 1 width region that borders the provided {@link Side} of a region\n+     *\n+     * @param side the side of the region\n+     * @param dest will hold the result\n+     * @return dest\n+     */\n+    public BlockRegion edge(Side side, BlockRegion dest) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTc3Njk3Ng=="}, "originalCommit": {"oid": "9f5e88d2c1401db970c264092ba5ae10b4e213c8"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTc4ODQ0NQ==", "bodyText": "getBlockFace, getFace,", "url": "https://github.com/MovingBlocks/Terasology/pull/4306#discussion_r541788445", "createdAt": "2020-12-12T21:57:25Z", "author": {"login": "pollend"}, "path": "engine/src/main/java/org/terasology/world/block/BlockRegion.java", "diffHunk": "@@ -802,6 +803,38 @@ public BlockRegion addExtents(float extentX, float extentY, float extentZ, Block\n         return dest;\n     }\n \n+    /**\n+     * calculates a 1 width region that borders the provided {@link Side} of a region\n+     *\n+     * @param side the side of the region\n+     * @param dest will hold the result\n+     * @return dest\n+     */\n+    public BlockRegion edge(Side side, BlockRegion dest) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTc3Njk3Ng=="}, "originalCommit": {"oid": "9f5e88d2c1401db970c264092ba5ae10b4e213c8"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwMjkxMjI1OnYy", "diffSide": "RIGHT", "path": "engine/src/main/java/org/terasology/world/chunks/ChunkConstants.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMlQyMDo1ODo1MlrOIErl0g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNlQyMzo0NzowNFrOILm9bw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTc3OTQxMA==", "bodyText": "\"This method\"? \ud83e\udd14", "url": "https://github.com/MovingBlocks/Terasology/pull/4306#discussion_r541779410", "createdAt": "2020-12-12T20:58:52Z", "author": {"login": "jdrueckert"}, "path": "engine/src/main/java/org/terasology/world/chunks/ChunkConstants.java", "diffHunk": "@@ -22,9 +22,13 @@\n import org.terasology.math.geom.Vector3i;\n import org.terasology.module.sandbox.API;\n \n+\n /**\n+ * @deprecated This method is scheduled for removal in an upcoming version.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f5e88d2c1401db970c264092ba5ae10b4e213c8"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTkyMDUxOA==", "bodyText": "I'm not sure this pure constants class should be deprecated. It is exactly that, a pure static class holding some constants, which are decoupled from Chunk or Chunks in general.\nOnly argument for merging this with ChunkMath into Chunks is that there is one file less to look at. Probably doesn't matter in the end \ud83e\udd37", "url": "https://github.com/MovingBlocks/Terasology/pull/4306#discussion_r541920518", "createdAt": "2020-12-13T12:57:53Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/world/chunks/ChunkConstants.java", "diffHunk": "@@ -22,9 +22,13 @@\n import org.terasology.math.geom.Vector3i;\n import org.terasology.module.sandbox.API;\n \n+\n /**\n+ * @deprecated This method is scheduled for removal in an upcoming version.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTc3OTQxMA=="}, "originalCommit": {"oid": "9f5e88d2c1401db970c264092ba5ae10b4e213c8"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjI1Njc2Mg==", "bodyText": "ChunkaMath and ChunkConstants are coupled together so I thought it was simpler to just combine them.", "url": "https://github.com/MovingBlocks/Terasology/pull/4306#discussion_r546256762", "createdAt": "2020-12-19T16:31:36Z", "author": {"login": "pollend"}, "path": "engine/src/main/java/org/terasology/world/chunks/ChunkConstants.java", "diffHunk": "@@ -22,9 +22,13 @@\n import org.terasology.math.geom.Vector3i;\n import org.terasology.module.sandbox.API;\n \n+\n /**\n+ * @deprecated This method is scheduled for removal in an upcoming version.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTc3OTQxMA=="}, "originalCommit": {"oid": "9f5e88d2c1401db970c264092ba5ae10b4e213c8"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTA0MzU2Nw==", "bodyText": "They are coupled, but fortunately only in one direction - ChunkMath, as well as other classes, depends on ChunkConstants...\nI don't have a strong opinion here. @4Denthusiast, what do you think?", "url": "https://github.com/MovingBlocks/Terasology/pull/4306#discussion_r549043567", "createdAt": "2020-12-26T23:47:04Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/world/chunks/ChunkConstants.java", "diffHunk": "@@ -22,9 +22,13 @@\n import org.terasology.math.geom.Vector3i;\n import org.terasology.module.sandbox.API;\n \n+\n /**\n+ * @deprecated This method is scheduled for removal in an upcoming version.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTc3OTQxMA=="}, "originalCommit": {"oid": "9f5e88d2c1401db970c264092ba5ae10b4e213c8"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwNDE1NTQ0OnYy", "diffSide": "RIGHT", "path": "engine-tests/src/test/java/org/terasology/math/BlockRegionTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xM1QxMjoyOTozMlrOIEz6cQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xM1QxMjoyOTozMlrOIEz6cQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTkxNTc2MQ==", "bodyText": "I think assertEquals takes the expected value as first argument, and the actual value as second argument. So I think these assertion arguments should be the other way around.", "url": "https://github.com/MovingBlocks/Terasology/pull/4306#discussion_r541915761", "createdAt": "2020-12-13T12:29:32Z", "author": {"login": "skaldarnar"}, "path": "engine-tests/src/test/java/org/terasology/math/BlockRegionTest.java", "diffHunk": "@@ -189,6 +189,23 @@ public void testCorrectBoundsFlip() {\n         assertEquals(max, region.getMax(new Vector3i()));\n     }\n \n+    @Test\n+    public void testEdge() {\n+        BlockRegion region = BlockRegions.createFromMinAndMax(new Vector3i(), new Vector3i(32, 32, 32));\n+        assertEquals(region.blockFace(Side.LEFT, new BlockRegion()), BlockRegions.createFromMinAndMax(new Vector3i(),\n+            new Vector3i(0, 32, 32)));\n+        assertEquals(region.blockFace(Side.RIGHT, new BlockRegion()), BlockRegions.createFromMinAndMax(new Vector3i(32, 0,\n+            0), new Vector3i(32, 32, 32)));\n+        assertEquals(region.blockFace(Side.FRONT, new BlockRegion()), BlockRegions.createFromMinAndMax(new Vector3i(0, 0,\n+            0), new Vector3i(32, 32, 0)));\n+        assertEquals(region.blockFace(Side.BACK, new BlockRegion()), BlockRegions.createFromMinAndMax(new Vector3i(0, 0,\n+            32), new Vector3i(32, 32, 32)));\n+        assertEquals(region.blockFace(Side.BOTTOM, new BlockRegion()), BlockRegions.createFromMinAndMax(new Vector3i(),\n+            new Vector3i(32, 0, 32)));\n+        assertEquals(region.blockFace(Side.TOP, new BlockRegion()), BlockRegions.createFromMinAndMax(new Vector3i(0, 32,\n+            0), new Vector3i(32, 32, 32)));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f18fe748926d91de85b40615ff2d573ca1a5d01e"}, "originalPosition": 38}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwNDE1OTMxOnYy", "diffSide": "RIGHT", "path": "engine-tests/src/test/java/org/terasology/math/ChunkMathTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xM1QxMjozMjowN1rOIEz8IQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xM1QxMjozMjowN1rOIEz8IQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTkxNjE5Mw==", "bodyText": "I think these tests should use the chunk constants instead of hard-coded numbers.", "url": "https://github.com/MovingBlocks/Terasology/pull/4306#discussion_r541916193", "createdAt": "2020-12-13T12:32:07Z", "author": {"login": "skaldarnar"}, "path": "engine-tests/src/test/java/org/terasology/math/ChunkMathTest.java", "diffHunk": "@@ -15,105 +15,70 @@\n  */\n package org.terasology.math;\n \n+import org.joml.Vector3f;\n+import org.joml.Vector3i;\n import org.junit.jupiter.api.Test;\n import org.terasology.config.Config;\n import org.terasology.context.internal.ContextImpl;\n import org.terasology.context.internal.MockContext;\n-import org.terasology.math.geom.Vector3i;\n import org.terasology.registry.CoreRegistry;\n import org.terasology.world.block.BlockRegion;\n+import org.terasology.world.block.BlockRegions;\n+import org.terasology.world.chunks.Chunks;\n \n import static org.junit.jupiter.api.Assertions.assertEquals;\n-import static org.junit.jupiter.api.Assertions.assertTrue;\n \n public class ChunkMathTest {\n \n-    @Test\n-    public void testGetEdgeRegion() {\n-        Region3i region = Region3i.createFromMinAndSize(new Vector3i(16, 0, 16), new Vector3i(16, 128, 16));\n-        assertEquals(Region3i.createFromMinMax(new Vector3i(16, 0, 16), new Vector3i(16, 127, 31)), ChunkMath.getEdgeRegion(region, Side.LEFT));\n-    }\n \n     @Test\n     public void testRegionPositions() {\n         CoreRegistry.setContext(new ContextImpl());\n         CoreRegistry.put(Config.class, new Config(new MockContext()));\n \n-        assertEquals(1, ChunkMath.calcChunkPos(Region3i.createFromMinMax(new Vector3i(0, 0, 0), new Vector3i(0, 0, 0))).length);\n-        assertEquals(1, ChunkMath.calcChunkPos(Region3i.createFromMinMax(new Vector3i(0, 0, 0), new Vector3i(31, 63, 31))).length);\n-        assertEquals(2, ChunkMath.calcChunkPos(Region3i.createFromMinMax(new Vector3i(0, 0, 0), new Vector3i(32, 63, 31))).length);\n-        assertEquals(4, ChunkMath.calcChunkPos(Region3i.createFromMinMax(new Vector3i(0, 0, 0), new Vector3i(32, 63, 32))).length);\n-        assertEquals(8, ChunkMath.calcChunkPos(Region3i.createFromMinMax(new Vector3i(0, 0, 0), new Vector3i(32, 64, 32))).length);\n-        assertEquals(12, ChunkMath.calcChunkPos(Region3i.createFromMinMax(new Vector3i(-1, 0, 0), new Vector3i(32, 64, 32))).length);\n+        assertEquals(BlockRegions.createFromMinAndMax(0,0,0,0,0,0), Chunks.toChunkRegion(BlockRegions.createFromMinAndMax(new Vector3i(0, 0, 0), new Vector3i(0, 0, 0)), new BlockRegion()));\n+        assertEquals(BlockRegions.createFromMinAndMax(0,0,0,0,0,0), Chunks.toChunkRegion(BlockRegions.createFromMinAndMax(new Vector3i(0, 0, 0), new Vector3i(31, 63, 31)), new BlockRegion()));\n+        assertEquals(BlockRegions.createFromMinAndMax(0,0,0,1,0,0), Chunks.toChunkRegion(BlockRegions.createFromMinAndMax(new Vector3i(0, 0, 0), new Vector3i(32, 63, 31)), new BlockRegion()));\n+        assertEquals(BlockRegions.createFromMinAndMax(0,0,0,1,0,1), Chunks.toChunkRegion(BlockRegions.createFromMinAndMax(new Vector3i(0, 0, 0), new Vector3i(32, 63, 32)), new BlockRegion()));\n+        assertEquals(BlockRegions.createFromMinAndMax(0,0,0,1,1,1), Chunks.toChunkRegion(BlockRegions.createFromMinAndMax(new Vector3i(0, 0, 0), new Vector3i(32, 64, 32)), new BlockRegion()));\n+        assertEquals(BlockRegions.createFromMinAndMax(-1,0,0,1,1,1), Chunks.toChunkRegion(BlockRegions.createFromMinAndMax(new Vector3i(-1, 0, 0), new Vector3i(32, 64, 32)), new BlockRegion()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f18fe748926d91de85b40615ff2d573ca1a5d01e"}, "originalPosition": 43}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwNDE2MTA5OnYy", "diffSide": "RIGHT", "path": "engine-tests/src/test/java/org/terasology/math/ChunkMathTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xM1QxMjozMzoyMFrOIEz88g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xM1QxMjozMzo1OVrOIEz9Sg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTkxNjQwMg==", "bodyText": "Swap the arguments (actual vs expected) around.", "url": "https://github.com/MovingBlocks/Terasology/pull/4306#discussion_r541916402", "createdAt": "2020-12-13T12:33:20Z", "author": {"login": "skaldarnar"}, "path": "engine-tests/src/test/java/org/terasology/math/ChunkMathTest.java", "diffHunk": "@@ -15,105 +15,70 @@\n  */\n package org.terasology.math;\n \n+import org.joml.Vector3f;\n+import org.joml.Vector3i;\n import org.junit.jupiter.api.Test;\n import org.terasology.config.Config;\n import org.terasology.context.internal.ContextImpl;\n import org.terasology.context.internal.MockContext;\n-import org.terasology.math.geom.Vector3i;\n import org.terasology.registry.CoreRegistry;\n import org.terasology.world.block.BlockRegion;\n+import org.terasology.world.block.BlockRegions;\n+import org.terasology.world.chunks.Chunks;\n \n import static org.junit.jupiter.api.Assertions.assertEquals;\n-import static org.junit.jupiter.api.Assertions.assertTrue;\n \n public class ChunkMathTest {\n \n-    @Test\n-    public void testGetEdgeRegion() {\n-        Region3i region = Region3i.createFromMinAndSize(new Vector3i(16, 0, 16), new Vector3i(16, 128, 16));\n-        assertEquals(Region3i.createFromMinMax(new Vector3i(16, 0, 16), new Vector3i(16, 127, 31)), ChunkMath.getEdgeRegion(region, Side.LEFT));\n-    }\n \n     @Test\n     public void testRegionPositions() {\n         CoreRegistry.setContext(new ContextImpl());\n         CoreRegistry.put(Config.class, new Config(new MockContext()));\n \n-        assertEquals(1, ChunkMath.calcChunkPos(Region3i.createFromMinMax(new Vector3i(0, 0, 0), new Vector3i(0, 0, 0))).length);\n-        assertEquals(1, ChunkMath.calcChunkPos(Region3i.createFromMinMax(new Vector3i(0, 0, 0), new Vector3i(31, 63, 31))).length);\n-        assertEquals(2, ChunkMath.calcChunkPos(Region3i.createFromMinMax(new Vector3i(0, 0, 0), new Vector3i(32, 63, 31))).length);\n-        assertEquals(4, ChunkMath.calcChunkPos(Region3i.createFromMinMax(new Vector3i(0, 0, 0), new Vector3i(32, 63, 32))).length);\n-        assertEquals(8, ChunkMath.calcChunkPos(Region3i.createFromMinMax(new Vector3i(0, 0, 0), new Vector3i(32, 64, 32))).length);\n-        assertEquals(12, ChunkMath.calcChunkPos(Region3i.createFromMinMax(new Vector3i(-1, 0, 0), new Vector3i(32, 64, 32))).length);\n+        assertEquals(BlockRegions.createFromMinAndMax(0,0,0,0,0,0), Chunks.toChunkRegion(BlockRegions.createFromMinAndMax(new Vector3i(0, 0, 0), new Vector3i(0, 0, 0)), new BlockRegion()));\n+        assertEquals(BlockRegions.createFromMinAndMax(0,0,0,0,0,0), Chunks.toChunkRegion(BlockRegions.createFromMinAndMax(new Vector3i(0, 0, 0), new Vector3i(31, 63, 31)), new BlockRegion()));\n+        assertEquals(BlockRegions.createFromMinAndMax(0,0,0,1,0,0), Chunks.toChunkRegion(BlockRegions.createFromMinAndMax(new Vector3i(0, 0, 0), new Vector3i(32, 63, 31)), new BlockRegion()));\n+        assertEquals(BlockRegions.createFromMinAndMax(0,0,0,1,0,1), Chunks.toChunkRegion(BlockRegions.createFromMinAndMax(new Vector3i(0, 0, 0), new Vector3i(32, 63, 32)), new BlockRegion()));\n+        assertEquals(BlockRegions.createFromMinAndMax(0,0,0,1,1,1), Chunks.toChunkRegion(BlockRegions.createFromMinAndMax(new Vector3i(0, 0, 0), new Vector3i(32, 64, 32)), new BlockRegion()));\n+        assertEquals(BlockRegions.createFromMinAndMax(-1,0,0,1,1,1), Chunks.toChunkRegion(BlockRegions.createFromMinAndMax(new Vector3i(-1, 0, 0), new Vector3i(32, 64, 32)), new BlockRegion()));\n \n-        Vector3i[] chunks = ChunkMath.calcChunkPos(Region3i.createFromMinMax(new Vector3i(0, 0, 0), new Vector3i(32, 63, 31)));\n-        assertEquals(new Vector3i(0, 0, 0), chunks[0]);\n-        assertEquals(new Vector3i(1, 0, 0), chunks[1]);\n     }\n \n     @Test\n     public void testCalcChunk() {\n-        assertEquals(0, ChunkMath.calcChunkPos(10, 6));\n-        assertEquals(-1, ChunkMath.calcChunkPos(-1, 6));\n-        assertEquals(1, ChunkMath.calcChunkPos(100, 6));\n-        assertEquals(3, ChunkMath.calcChunkPos(200, 6));\n-    }\n-\n-    @Test\n-    public void testCalcChunkPosX() {\n-        assertEquals(0, ChunkMath.calcChunkPosX(10));\n-        assertEquals(-1, ChunkMath.calcChunkPosX(-1));\n-        assertEquals(3, ChunkMath.calcChunkPosX(100));\n-        assertEquals(6, ChunkMath.calcChunkPosX(200));\n-        assertEquals(21, ChunkMath.calcChunkPosX(700));\n-    }\n-\n-    @Test\n-    public void testCalcChunkPosY() {\n-        assertEquals(0, ChunkMath.calcChunkPosY(10));\n-        assertEquals(-1, ChunkMath.calcChunkPosY(-1));\n-        assertEquals(1, ChunkMath.calcChunkPosY(100));\n-        assertEquals(3, ChunkMath.calcChunkPosY(200));\n-        assertEquals(10, ChunkMath.calcChunkPosY(700));\n-    }\n-\n-    @Test\n-    public void testCalcChunkPosZ() {\n-        assertEquals(0, ChunkMath.calcChunkPosZ(10));\n-        assertEquals(-1, ChunkMath.calcChunkPosZ(-1));\n-        assertEquals(6, ChunkMath.calcChunkPosZ(200));\n-        assertEquals(21, ChunkMath.calcChunkPosZ(700));\n+        assertEquals(0, Chunks.toChunkPos(10, 6));\n+        assertEquals(-1, Chunks.toChunkPos(-1, 6));\n+        assertEquals(1, Chunks.toChunkPos(100, 6));\n+        assertEquals(3, Chunks.toChunkPos(200, 6));\n     }\n \n     @Test\n     public void testCalcChunkPos() {\n         org.joml.Vector3i temp = new org.joml.Vector3i();\n-        assertTrue(ChunkMath.calcChunkPos(700, 700, 700, temp).equals(21, 10, 21));\n-        assertTrue(ChunkMath.calcChunkPos(200, 700, -1, temp).equals(6, 10, -1));\n-        assertTrue(ChunkMath.calcChunkPos(200, 200, 200, temp).equals(6, 3, 6));\n-        assertTrue(ChunkMath.calcChunkPos(10, 10, 10, temp).equals(0, 0, 0));\n-    }\n-\n-    @Test\n-    public void testChunkRegionAroundWorldPos() {\n-        assertEquals(ChunkMath.getChunkRegionAroundWorldPos(new org.joml.Vector3i(0, 0, 0), 100),\n-            new BlockRegion(-4, -2, -4, 3, 1, 3));\n-        assertEquals(ChunkMath.getChunkRegionAroundWorldPos(new org.joml.Vector3i(-30, -30, -30), 100),\n-            new BlockRegion(-5, -3, -5, 2, 1, 2));\n-        assertEquals(ChunkMath.getChunkRegionAroundWorldPos(new org.joml.Vector3i(0, 0, 0), 10),\n-            new BlockRegion(-1, -1, -1, 0, 0, 0));\n+        assertEquals(Chunks.toChunkPos(700, 700, 700, temp), new Vector3i(21, 10, 21));\n+        assertEquals(Chunks.toChunkPos(200, 700, -1, temp), new Vector3i(6, 10, -1));\n+        assertEquals(Chunks.toChunkPos(200, 200, 200, temp), new Vector3i(6, 3, 6));\n+        assertEquals(Chunks.toChunkPos(10, 10, 10, temp), new Vector3i(0, 0, 0));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f18fe748926d91de85b40615ff2d573ca1a5d01e"}, "originalPosition": 108}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTkxNjQ5MA==", "bodyText": "We may also turn this into parameterized tests...", "url": "https://github.com/MovingBlocks/Terasology/pull/4306#discussion_r541916490", "createdAt": "2020-12-13T12:33:59Z", "author": {"login": "skaldarnar"}, "path": "engine-tests/src/test/java/org/terasology/math/ChunkMathTest.java", "diffHunk": "@@ -15,105 +15,70 @@\n  */\n package org.terasology.math;\n \n+import org.joml.Vector3f;\n+import org.joml.Vector3i;\n import org.junit.jupiter.api.Test;\n import org.terasology.config.Config;\n import org.terasology.context.internal.ContextImpl;\n import org.terasology.context.internal.MockContext;\n-import org.terasology.math.geom.Vector3i;\n import org.terasology.registry.CoreRegistry;\n import org.terasology.world.block.BlockRegion;\n+import org.terasology.world.block.BlockRegions;\n+import org.terasology.world.chunks.Chunks;\n \n import static org.junit.jupiter.api.Assertions.assertEquals;\n-import static org.junit.jupiter.api.Assertions.assertTrue;\n \n public class ChunkMathTest {\n \n-    @Test\n-    public void testGetEdgeRegion() {\n-        Region3i region = Region3i.createFromMinAndSize(new Vector3i(16, 0, 16), new Vector3i(16, 128, 16));\n-        assertEquals(Region3i.createFromMinMax(new Vector3i(16, 0, 16), new Vector3i(16, 127, 31)), ChunkMath.getEdgeRegion(region, Side.LEFT));\n-    }\n \n     @Test\n     public void testRegionPositions() {\n         CoreRegistry.setContext(new ContextImpl());\n         CoreRegistry.put(Config.class, new Config(new MockContext()));\n \n-        assertEquals(1, ChunkMath.calcChunkPos(Region3i.createFromMinMax(new Vector3i(0, 0, 0), new Vector3i(0, 0, 0))).length);\n-        assertEquals(1, ChunkMath.calcChunkPos(Region3i.createFromMinMax(new Vector3i(0, 0, 0), new Vector3i(31, 63, 31))).length);\n-        assertEquals(2, ChunkMath.calcChunkPos(Region3i.createFromMinMax(new Vector3i(0, 0, 0), new Vector3i(32, 63, 31))).length);\n-        assertEquals(4, ChunkMath.calcChunkPos(Region3i.createFromMinMax(new Vector3i(0, 0, 0), new Vector3i(32, 63, 32))).length);\n-        assertEquals(8, ChunkMath.calcChunkPos(Region3i.createFromMinMax(new Vector3i(0, 0, 0), new Vector3i(32, 64, 32))).length);\n-        assertEquals(12, ChunkMath.calcChunkPos(Region3i.createFromMinMax(new Vector3i(-1, 0, 0), new Vector3i(32, 64, 32))).length);\n+        assertEquals(BlockRegions.createFromMinAndMax(0,0,0,0,0,0), Chunks.toChunkRegion(BlockRegions.createFromMinAndMax(new Vector3i(0, 0, 0), new Vector3i(0, 0, 0)), new BlockRegion()));\n+        assertEquals(BlockRegions.createFromMinAndMax(0,0,0,0,0,0), Chunks.toChunkRegion(BlockRegions.createFromMinAndMax(new Vector3i(0, 0, 0), new Vector3i(31, 63, 31)), new BlockRegion()));\n+        assertEquals(BlockRegions.createFromMinAndMax(0,0,0,1,0,0), Chunks.toChunkRegion(BlockRegions.createFromMinAndMax(new Vector3i(0, 0, 0), new Vector3i(32, 63, 31)), new BlockRegion()));\n+        assertEquals(BlockRegions.createFromMinAndMax(0,0,0,1,0,1), Chunks.toChunkRegion(BlockRegions.createFromMinAndMax(new Vector3i(0, 0, 0), new Vector3i(32, 63, 32)), new BlockRegion()));\n+        assertEquals(BlockRegions.createFromMinAndMax(0,0,0,1,1,1), Chunks.toChunkRegion(BlockRegions.createFromMinAndMax(new Vector3i(0, 0, 0), new Vector3i(32, 64, 32)), new BlockRegion()));\n+        assertEquals(BlockRegions.createFromMinAndMax(-1,0,0,1,1,1), Chunks.toChunkRegion(BlockRegions.createFromMinAndMax(new Vector3i(-1, 0, 0), new Vector3i(32, 64, 32)), new BlockRegion()));\n \n-        Vector3i[] chunks = ChunkMath.calcChunkPos(Region3i.createFromMinMax(new Vector3i(0, 0, 0), new Vector3i(32, 63, 31)));\n-        assertEquals(new Vector3i(0, 0, 0), chunks[0]);\n-        assertEquals(new Vector3i(1, 0, 0), chunks[1]);\n     }\n \n     @Test\n     public void testCalcChunk() {\n-        assertEquals(0, ChunkMath.calcChunkPos(10, 6));\n-        assertEquals(-1, ChunkMath.calcChunkPos(-1, 6));\n-        assertEquals(1, ChunkMath.calcChunkPos(100, 6));\n-        assertEquals(3, ChunkMath.calcChunkPos(200, 6));\n-    }\n-\n-    @Test\n-    public void testCalcChunkPosX() {\n-        assertEquals(0, ChunkMath.calcChunkPosX(10));\n-        assertEquals(-1, ChunkMath.calcChunkPosX(-1));\n-        assertEquals(3, ChunkMath.calcChunkPosX(100));\n-        assertEquals(6, ChunkMath.calcChunkPosX(200));\n-        assertEquals(21, ChunkMath.calcChunkPosX(700));\n-    }\n-\n-    @Test\n-    public void testCalcChunkPosY() {\n-        assertEquals(0, ChunkMath.calcChunkPosY(10));\n-        assertEquals(-1, ChunkMath.calcChunkPosY(-1));\n-        assertEquals(1, ChunkMath.calcChunkPosY(100));\n-        assertEquals(3, ChunkMath.calcChunkPosY(200));\n-        assertEquals(10, ChunkMath.calcChunkPosY(700));\n-    }\n-\n-    @Test\n-    public void testCalcChunkPosZ() {\n-        assertEquals(0, ChunkMath.calcChunkPosZ(10));\n-        assertEquals(-1, ChunkMath.calcChunkPosZ(-1));\n-        assertEquals(6, ChunkMath.calcChunkPosZ(200));\n-        assertEquals(21, ChunkMath.calcChunkPosZ(700));\n+        assertEquals(0, Chunks.toChunkPos(10, 6));\n+        assertEquals(-1, Chunks.toChunkPos(-1, 6));\n+        assertEquals(1, Chunks.toChunkPos(100, 6));\n+        assertEquals(3, Chunks.toChunkPos(200, 6));\n     }\n \n     @Test\n     public void testCalcChunkPos() {\n         org.joml.Vector3i temp = new org.joml.Vector3i();\n-        assertTrue(ChunkMath.calcChunkPos(700, 700, 700, temp).equals(21, 10, 21));\n-        assertTrue(ChunkMath.calcChunkPos(200, 700, -1, temp).equals(6, 10, -1));\n-        assertTrue(ChunkMath.calcChunkPos(200, 200, 200, temp).equals(6, 3, 6));\n-        assertTrue(ChunkMath.calcChunkPos(10, 10, 10, temp).equals(0, 0, 0));\n-    }\n-\n-    @Test\n-    public void testChunkRegionAroundWorldPos() {\n-        assertEquals(ChunkMath.getChunkRegionAroundWorldPos(new org.joml.Vector3i(0, 0, 0), 100),\n-            new BlockRegion(-4, -2, -4, 3, 1, 3));\n-        assertEquals(ChunkMath.getChunkRegionAroundWorldPos(new org.joml.Vector3i(-30, -30, -30), 100),\n-            new BlockRegion(-5, -3, -5, 2, 1, 2));\n-        assertEquals(ChunkMath.getChunkRegionAroundWorldPos(new org.joml.Vector3i(0, 0, 0), 10),\n-            new BlockRegion(-1, -1, -1, 0, 0, 0));\n+        assertEquals(Chunks.toChunkPos(700, 700, 700, temp), new Vector3i(21, 10, 21));\n+        assertEquals(Chunks.toChunkPos(200, 700, -1, temp), new Vector3i(6, 10, -1));\n+        assertEquals(Chunks.toChunkPos(200, 200, 200, temp), new Vector3i(6, 3, 6));\n+        assertEquals(Chunks.toChunkPos(10, 10, 10, temp), new Vector3i(0, 0, 0));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTkxNjQwMg=="}, "originalCommit": {"oid": "f18fe748926d91de85b40615ff2d573ca1a5d01e"}, "originalPosition": 108}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwNDE2ODM1OnYy", "diffSide": "RIGHT", "path": "engine/src/main/java/org/terasology/math/ChunkMath.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xM1QxMjozODozOVrOIE0ASA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOVQxNzowNzoyN1rOII9Frg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTkxNzI1Ng==", "bodyText": "Should this be on BlockRegion or BlockRegions (utility class)?", "url": "https://github.com/MovingBlocks/Terasology/pull/4306#discussion_r541917256", "createdAt": "2020-12-13T12:38:39Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/math/ChunkMath.java", "diffHunk": "@@ -569,7 +575,9 @@ public static Region3i getEdgeRegion(Region3i region, Side side) {\n      * @param side the side to border\n      * @param dest will hold the result\n      * @return dest\n+     * @deprecated use {@link BlockRegion#blockFace(Side, BlockRegion)}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f18fe748926d91de85b40615ff2d573ca1a5d01e"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjI2MDM5OA==", "bodyText": "I guess you could move it to the utility class but it seems more complicated. (source, Face) or (source, Face, Dest) if we want to be able to write it somewhere.", "url": "https://github.com/MovingBlocks/Terasology/pull/4306#discussion_r546260398", "createdAt": "2020-12-19T17:07:27Z", "author": {"login": "pollend"}, "path": "engine/src/main/java/org/terasology/math/ChunkMath.java", "diffHunk": "@@ -569,7 +575,9 @@ public static Region3i getEdgeRegion(Region3i region, Side side) {\n      * @param side the side to border\n      * @param dest will hold the result\n      * @return dest\n+     * @deprecated use {@link BlockRegion#blockFace(Side, BlockRegion)}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTkxNzI1Ng=="}, "originalCommit": {"oid": "f18fe748926d91de85b40615ff2d573ca1a5d01e"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwNDE2OTY1OnYy", "diffSide": "RIGHT", "path": "engine/src/main/java/org/terasology/world/block/BlockRegion.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xM1QxMjozOToyNlrOIE0A1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNlQyMzo0NToyN1rOILm8yQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTkxNzM5Ng==", "bodyText": "Should this be implemented on BlockRegion or BlockRegions (utility class)?", "url": "https://github.com/MovingBlocks/Terasology/pull/4306#discussion_r541917396", "createdAt": "2020-12-13T12:39:26Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/world/block/BlockRegion.java", "diffHunk": "@@ -802,6 +803,38 @@ public BlockRegion addExtents(float extentX, float extentY, float extentZ, Block\n         return dest;\n     }\n \n+    /**\n+     * calculates a 1 width region that borders the provided {@link Side} of a region\n+     *\n+     * @param side the side of the region\n+     * @param dest will hold the result\n+     * @return dest\n+     */\n+    public BlockRegion blockFace(Side side, BlockRegion dest) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f18fe748926d91de85b40615ff2d573ca1a5d01e"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTk0MzMyNQ==", "bodyText": "I think it should be fine as a base method. Any particular reason it needs be in the utility class.", "url": "https://github.com/MovingBlocks/Terasology/pull/4306#discussion_r541943325", "createdAt": "2020-12-13T15:07:30Z", "author": {"login": "pollend"}, "path": "engine/src/main/java/org/terasology/world/block/BlockRegion.java", "diffHunk": "@@ -802,6 +803,38 @@ public BlockRegion addExtents(float extentX, float extentY, float extentZ, Block\n         return dest;\n     }\n \n+    /**\n+     * calculates a 1 width region that borders the provided {@link Side} of a region\n+     *\n+     * @param side the side of the region\n+     * @param dest will hold the result\n+     * @return dest\n+     */\n+    public BlockRegion blockFace(Side side, BlockRegion dest) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTkxNzM5Ng=="}, "originalCommit": {"oid": "f18fe748926d91de85b40615ff2d573ca1a5d01e"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTA0MzQwMQ==", "bodyText": "This method with dest should be moved to BlockRegionc as default method.\nThe in-place variant BlockRegion::blockFace(Side side) should be added to BlockRegion itself.\n\nQuestion: is blockFace a good/the best name for it? Would getSide be better (but then it would not be clear that this would modify the region if we implement (2) from above \ud83e\udd14 )", "url": "https://github.com/MovingBlocks/Terasology/pull/4306#discussion_r549043401", "createdAt": "2020-12-26T23:45:27Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/world/block/BlockRegion.java", "diffHunk": "@@ -802,6 +803,38 @@ public BlockRegion addExtents(float extentX, float extentY, float extentZ, Block\n         return dest;\n     }\n \n+    /**\n+     * calculates a 1 width region that borders the provided {@link Side} of a region\n+     *\n+     * @param side the side of the region\n+     * @param dest will hold the result\n+     * @return dest\n+     */\n+    public BlockRegion blockFace(Side side, BlockRegion dest) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTkxNzM5Ng=="}, "originalCommit": {"oid": "f18fe748926d91de85b40615ff2d573ca1a5d01e"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwNDE3Mjg3OnYy", "diffSide": "RIGHT", "path": "engine/src/main/java/org/terasology/world/block/BlockRegions.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xM1QxMjo0MTozOVrOIE0CQA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOVQwOTo1Njo0N1rOII6kCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTkxNzc2MA==", "bodyText": "The docstring needs to be adjusted to the different method semantics.", "url": "https://github.com/MovingBlocks/Terasology/pull/4306#discussion_r541917760", "createdAt": "2020-12-13T12:41:39Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/world/block/BlockRegions.java", "diffHunk": "@@ -16,6 +16,25 @@\n     private BlockRegions() {\n     }\n \n+    /**\n+     * Creates a new region spanning the smallest axis-aligned bounding box (AABB) containing both, min and max.\n+     * <p>\n+     * Note that each component of {@code min} should be smaller or equal to the respective component in {@code max}. If\n+     * a dimension of {@code min} is greater than the respective dimension of {@code max} the resulting block region\n+     * will have a size of 0 along that dimension.\n+     * <p>\n+     * Consider using {@link #encompassing(Vector3ic...)} as an alternative.\n+     *\n+     * @return new block region\n+     */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f18fe748926d91de85b40615ff2d573ca1a5d01e"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTkyMzkwMQ==", "bodyText": "We already have that method added by another PR.\nSo let's drop this here and fix the docstring for the one that's already there below.", "url": "https://github.com/MovingBlocks/Terasology/pull/4306#discussion_r541923901", "createdAt": "2020-12-13T13:17:32Z", "author": {"login": "jdrueckert"}, "path": "engine/src/main/java/org/terasology/world/block/BlockRegions.java", "diffHunk": "@@ -16,6 +16,25 @@\n     private BlockRegions() {\n     }\n \n+    /**\n+     * Creates a new region spanning the smallest axis-aligned bounding box (AABB) containing both, min and max.\n+     * <p>\n+     * Note that each component of {@code min} should be smaller or equal to the respective component in {@code max}. If\n+     * a dimension of {@code min} is greater than the respective dimension of {@code max} the resulting block region\n+     * will have a size of 0 along that dimension.\n+     * <p>\n+     * Consider using {@link #encompassing(Vector3ic...)} as an alternative.\n+     *\n+     * @return new block region\n+     */", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTkxNzc2MA=="}, "originalCommit": {"oid": "f18fe748926d91de85b40615ff2d573ca1a5d01e"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjIxOTAxNw==", "bodyText": "I removed the duplicate method, but the docstring of the existing one still needs adjusting.", "url": "https://github.com/MovingBlocks/Terasology/pull/4306#discussion_r546219017", "createdAt": "2020-12-19T09:56:47Z", "author": {"login": "jdrueckert"}, "path": "engine/src/main/java/org/terasology/world/block/BlockRegions.java", "diffHunk": "@@ -16,6 +16,25 @@\n     private BlockRegions() {\n     }\n \n+    /**\n+     * Creates a new region spanning the smallest axis-aligned bounding box (AABB) containing both, min and max.\n+     * <p>\n+     * Note that each component of {@code min} should be smaller or equal to the respective component in {@code max}. If\n+     * a dimension of {@code min} is greater than the respective dimension of {@code max} the resulting block region\n+     * will have a size of 0 along that dimension.\n+     * <p>\n+     * Consider using {@link #encompassing(Vector3ic...)} as an alternative.\n+     *\n+     * @return new block region\n+     */", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTkxNzc2MA=="}, "originalCommit": {"oid": "f18fe748926d91de85b40615ff2d573ca1a5d01e"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwNDIxMjY3OnYy", "diffSide": "RIGHT", "path": "engine/src/main/java/org/terasology/world/chunks/Chunks.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xM1QxMzowODozMVrOIE0T8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xM1QxMzoxMToyMVrOIE0V3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTkyMjI4OQ==", "bodyText": "The chunk position is a single integer - what does this position mean?", "url": "https://github.com/MovingBlocks/Terasology/pull/4306#discussion_r541922289", "createdAt": "2020-12-13T13:08:31Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/world/chunks/Chunks.java", "diffHunk": "@@ -0,0 +1,306 @@\n+// Copyright 2020 The Terasology Foundation\n+// SPDX-License-Identifier: Apache-2.0\n+\n+package org.terasology.world.chunks;\n+\n+import org.joml.Math;\n+import org.joml.RoundingMode;\n+import org.joml.Vector3fc;\n+import org.joml.Vector3i;\n+import org.joml.Vector3ic;\n+import org.terasology.module.sandbox.API;\n+import org.terasology.world.block.BlockRegion;\n+import org.terasology.world.block.BlockRegions;\n+\n+@API\n+public final class Chunks {\n+    public static final int SIZE_X = 32;\n+    public static final int SIZE_Y = 64;\n+    public static final int SIZE_Z = 32;\n+\n+    public static final int INNER_CHUNK_POS_FILTER_X = Integer.highestOneBit(SIZE_X) - 1;\n+    public static final int INNER_CHUNK_POS_FILTER_Y = Integer.highestOneBit(SIZE_Y) - 1;\n+    public static final int INNER_CHUNK_POS_FILTER_Z = Integer.highestOneBit(SIZE_Z) - 1;\n+\n+    public static final int POWER_X = Integer.numberOfTrailingZeros(SIZE_X);\n+    public static final int POWER_Y = Integer.numberOfTrailingZeros(SIZE_Y);\n+    public static final int POWER_Z = Integer.numberOfTrailingZeros(SIZE_Z);\n+\n+    public static final byte MAX_LIGHT = 0x0f; // max light for a light source 0-15\n+    public static final byte MAX_SUNLIGHT = 0x0f; // max sunlight for sunlight bounded 0-15\n+    public static final byte MAX_SUNLIGHT_REGEN = 63;\n+    public static final byte SUNLIGHT_REGEN_THRESHOLD = 48;\n+\n+    public static final Vector3ic CHUNK_POWER = new Vector3i(POWER_X, POWER_Y, POWER_Z);\n+    public static final Vector3ic CHUNK_SIZE = new Vector3i(SIZE_X, SIZE_Y, SIZE_Z);\n+    public static final Vector3ic INNER_CHUNK_POS_FILTER = new org.joml.Vector3i(INNER_CHUNK_POS_FILTER_X, INNER_CHUNK_POS_FILTER_Y, INNER_CHUNK_POS_FILTER_Z);\n+    public static final BlockRegion CHUNK_REGION = BlockRegions.createFromMinAndSize(new Vector3i(), CHUNK_SIZE);\n+\n+    public static final Vector3ic LOCAL_REGION_EXTENTS = new Vector3i(1, 1, 1);\n+\n+    private Chunks() {\n+    }\n+\n+    /**\n+     * Returns the chunk position of a given coordinate.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f18fe748926d91de85b40615ff2d573ca1a5d01e"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTkyMjc4MQ==", "bodyText": "And should this method ever be used directly (with a different chunkPower than the one from the constants)?", "url": "https://github.com/MovingBlocks/Terasology/pull/4306#discussion_r541922781", "createdAt": "2020-12-13T13:11:21Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/world/chunks/Chunks.java", "diffHunk": "@@ -0,0 +1,306 @@\n+// Copyright 2020 The Terasology Foundation\n+// SPDX-License-Identifier: Apache-2.0\n+\n+package org.terasology.world.chunks;\n+\n+import org.joml.Math;\n+import org.joml.RoundingMode;\n+import org.joml.Vector3fc;\n+import org.joml.Vector3i;\n+import org.joml.Vector3ic;\n+import org.terasology.module.sandbox.API;\n+import org.terasology.world.block.BlockRegion;\n+import org.terasology.world.block.BlockRegions;\n+\n+@API\n+public final class Chunks {\n+    public static final int SIZE_X = 32;\n+    public static final int SIZE_Y = 64;\n+    public static final int SIZE_Z = 32;\n+\n+    public static final int INNER_CHUNK_POS_FILTER_X = Integer.highestOneBit(SIZE_X) - 1;\n+    public static final int INNER_CHUNK_POS_FILTER_Y = Integer.highestOneBit(SIZE_Y) - 1;\n+    public static final int INNER_CHUNK_POS_FILTER_Z = Integer.highestOneBit(SIZE_Z) - 1;\n+\n+    public static final int POWER_X = Integer.numberOfTrailingZeros(SIZE_X);\n+    public static final int POWER_Y = Integer.numberOfTrailingZeros(SIZE_Y);\n+    public static final int POWER_Z = Integer.numberOfTrailingZeros(SIZE_Z);\n+\n+    public static final byte MAX_LIGHT = 0x0f; // max light for a light source 0-15\n+    public static final byte MAX_SUNLIGHT = 0x0f; // max sunlight for sunlight bounded 0-15\n+    public static final byte MAX_SUNLIGHT_REGEN = 63;\n+    public static final byte SUNLIGHT_REGEN_THRESHOLD = 48;\n+\n+    public static final Vector3ic CHUNK_POWER = new Vector3i(POWER_X, POWER_Y, POWER_Z);\n+    public static final Vector3ic CHUNK_SIZE = new Vector3i(SIZE_X, SIZE_Y, SIZE_Z);\n+    public static final Vector3ic INNER_CHUNK_POS_FILTER = new org.joml.Vector3i(INNER_CHUNK_POS_FILTER_X, INNER_CHUNK_POS_FILTER_Y, INNER_CHUNK_POS_FILTER_Z);\n+    public static final BlockRegion CHUNK_REGION = BlockRegions.createFromMinAndSize(new Vector3i(), CHUNK_SIZE);\n+\n+    public static final Vector3ic LOCAL_REGION_EXTENTS = new Vector3i(1, 1, 1);\n+\n+    private Chunks() {\n+    }\n+\n+    /**\n+     * Returns the chunk position of a given coordinate.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTkyMjI4OQ=="}, "originalCommit": {"oid": "f18fe748926d91de85b40615ff2d573ca1a5d01e"}, "originalPosition": 45}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwNDIyMDAyOnYy", "diffSide": "RIGHT", "path": "engine/src/main/java/org/terasology/world/chunks/Chunks.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xM1QxMzoxMzowNVrOIE0XMg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xM1QxMzoxMzowNVrOIE0XMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTkyMzEyMg==", "bodyText": "This method does not take any arguments to set the size of a chunk... Does this method actually do the following:\n\nreturns the position of the chunk that encompasses the given world position", "url": "https://github.com/MovingBlocks/Terasology/pull/4306#discussion_r541923122", "createdAt": "2020-12-13T13:13:05Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/world/chunks/Chunks.java", "diffHunk": "@@ -0,0 +1,306 @@\n+// Copyright 2020 The Terasology Foundation\n+// SPDX-License-Identifier: Apache-2.0\n+\n+package org.terasology.world.chunks;\n+\n+import org.joml.Math;\n+import org.joml.RoundingMode;\n+import org.joml.Vector3fc;\n+import org.joml.Vector3i;\n+import org.joml.Vector3ic;\n+import org.terasology.module.sandbox.API;\n+import org.terasology.world.block.BlockRegion;\n+import org.terasology.world.block.BlockRegions;\n+\n+@API\n+public final class Chunks {\n+    public static final int SIZE_X = 32;\n+    public static final int SIZE_Y = 64;\n+    public static final int SIZE_Z = 32;\n+\n+    public static final int INNER_CHUNK_POS_FILTER_X = Integer.highestOneBit(SIZE_X) - 1;\n+    public static final int INNER_CHUNK_POS_FILTER_Y = Integer.highestOneBit(SIZE_Y) - 1;\n+    public static final int INNER_CHUNK_POS_FILTER_Z = Integer.highestOneBit(SIZE_Z) - 1;\n+\n+    public static final int POWER_X = Integer.numberOfTrailingZeros(SIZE_X);\n+    public static final int POWER_Y = Integer.numberOfTrailingZeros(SIZE_Y);\n+    public static final int POWER_Z = Integer.numberOfTrailingZeros(SIZE_Z);\n+\n+    public static final byte MAX_LIGHT = 0x0f; // max light for a light source 0-15\n+    public static final byte MAX_SUNLIGHT = 0x0f; // max sunlight for sunlight bounded 0-15\n+    public static final byte MAX_SUNLIGHT_REGEN = 63;\n+    public static final byte SUNLIGHT_REGEN_THRESHOLD = 48;\n+\n+    public static final Vector3ic CHUNK_POWER = new Vector3i(POWER_X, POWER_Y, POWER_Z);\n+    public static final Vector3ic CHUNK_SIZE = new Vector3i(SIZE_X, SIZE_Y, SIZE_Z);\n+    public static final Vector3ic INNER_CHUNK_POS_FILTER = new org.joml.Vector3i(INNER_CHUNK_POS_FILTER_X, INNER_CHUNK_POS_FILTER_Y, INNER_CHUNK_POS_FILTER_Z);\n+    public static final BlockRegion CHUNK_REGION = BlockRegions.createFromMinAndSize(new Vector3i(), CHUNK_SIZE);\n+\n+    public static final Vector3ic LOCAL_REGION_EXTENTS = new Vector3i(1, 1, 1);\n+\n+    private Chunks() {\n+    }\n+\n+    /**\n+     * Returns the chunk position of a given coordinate.\n+     *\n+     * @param val The coordinate of the block\n+     * @param chunkPower the size of the chunk in powers of 2\n+     * @return The coordinate of the chunk\n+     */\n+    public static int toChunkPos(int val, int chunkPower) {\n+        return (val >> chunkPower);\n+    }\n+\n+    /**\n+     * The position of the chunk given the coordinate and size of chunk in powers of 2.\n+     * This uses the default power {@link #POWER_X}.\n+     *\n+     * @param x the x component\n+     * @return The coordinate of the chunk\n+     */\n+    public static int toChunkPosX(int x) {\n+        return toChunkPos(x, CHUNK_POWER.x());\n+    }\n+\n+    /**\n+     * The position of the chunk given the coordinate and size of chunk in powers of 2.\n+     * This uses the default power {@link #POWER_Y}\n+     *\n+     * @param y the y component\n+     * @return The coordinate of the chunk\n+     */\n+    public static int toChunkPosY(int y) {\n+        return toChunkPos(y, CHUNK_POWER.y());\n+    }\n+\n+    /**\n+     * The position of the chunk given the coordinate and size of chunk in powers of 2.\n+     * This uses the default power {@link #POWER_Z}\n+     *\n+     * @param z the z component\n+     * @return The coordinate of the chunk\n+     */\n+    public static int toChunkPosZ(int z) {\n+        return toChunkPos(z, CHUNK_POWER.z());\n+    }\n+\n+\n+    /**\n+     * The position of the chunk given the coordinate and size of chunk in powers of 2.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f18fe748926d91de85b40615ff2d573ca1a5d01e"}, "originalPosition": 90}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ1MjkzNjg2OnYy", "diffSide": "RIGHT", "path": "engine/src/main/java/org/terasology/world/chunks/Chunks.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNlQyMzo0ODoxOVrOILm9zg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNlQyMzo0ODoxOVrOILm9zg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTA0MzY2Mg==", "bodyText": "This should expose the constant region:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public static final BlockRegion CHUNK_REGION = new BlockRegion(new Vector3i()).setSize(CHUNK_SIZE);\n          \n          \n            \n                public static final BlockRegionc CHUNK_REGION = new BlockRegion(0, 0, 0).setSize(CHUNK_SIZE);", "url": "https://github.com/MovingBlocks/Terasology/pull/4306#discussion_r549043662", "createdAt": "2020-12-26T23:48:19Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/world/chunks/Chunks.java", "diffHunk": "@@ -0,0 +1,305 @@\n+// Copyright 2020 The Terasology Foundation\n+// SPDX-License-Identifier: Apache-2.0\n+\n+package org.terasology.world.chunks;\n+\n+import org.joml.Math;\n+import org.joml.RoundingMode;\n+import org.joml.Vector3fc;\n+import org.joml.Vector3i;\n+import org.joml.Vector3ic;\n+import org.terasology.module.sandbox.API;\n+import org.terasology.world.block.BlockRegion;\n+\n+@API\n+public final class Chunks {\n+    public static final int SIZE_X = 32;\n+    public static final int SIZE_Y = 64;\n+    public static final int SIZE_Z = 32;\n+\n+    public static final int INNER_CHUNK_POS_FILTER_X = Integer.highestOneBit(SIZE_X) - 1;\n+    public static final int INNER_CHUNK_POS_FILTER_Y = Integer.highestOneBit(SIZE_Y) - 1;\n+    public static final int INNER_CHUNK_POS_FILTER_Z = Integer.highestOneBit(SIZE_Z) - 1;\n+\n+    public static final int POWER_X = Integer.numberOfTrailingZeros(SIZE_X);\n+    public static final int POWER_Y = Integer.numberOfTrailingZeros(SIZE_Y);\n+    public static final int POWER_Z = Integer.numberOfTrailingZeros(SIZE_Z);\n+\n+    public static final byte MAX_LIGHT = 0x0f; // max light for a light source 0-15\n+    public static final byte MAX_SUNLIGHT = 0x0f; // max sunlight for sunlight bounded 0-15\n+    public static final byte MAX_SUNLIGHT_REGEN = 63;\n+    public static final byte SUNLIGHT_REGEN_THRESHOLD = 48;\n+\n+    public static final Vector3ic CHUNK_POWER = new Vector3i(POWER_X, POWER_Y, POWER_Z);\n+    public static final Vector3ic CHUNK_SIZE = new Vector3i(SIZE_X, SIZE_Y, SIZE_Z);\n+    public static final Vector3ic INNER_CHUNK_POS_FILTER = new org.joml.Vector3i(INNER_CHUNK_POS_FILTER_X, INNER_CHUNK_POS_FILTER_Y, INNER_CHUNK_POS_FILTER_Z);\n+    public static final BlockRegion CHUNK_REGION = new BlockRegion(new Vector3i()).setSize(CHUNK_SIZE);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fecd302cabf14edcacc726489c3de8b24e440e4c"}, "originalPosition": 36}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 178, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}