{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI1OTY4NTc1", "number": 4016, "title": "refactor: remove dead code", "bodyText": "As @pollend found out in #3961 there are unused classes and other dead code in the engine.\nTested in Omega workspace, can run Josharias Survival without any (new) issues.", "createdAt": "2020-06-01T13:07:58Z", "url": "https://github.com/MovingBlocks/Terasology/pull/4016", "merged": true, "mergeCommit": {"oid": "012985ccb97b6872af9d5bfdb3c589845ab98605"}, "closed": true, "closedAt": "2020-06-06T15:54:35Z", "author": {"login": "skaldarnar"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcm_qPtAH2gAyNDI1OTY4NTc1OmQ5MTI1MDk2N2Y5ZjAzMzQyZDE3ZmI2MmEyY2FlMzViNzYwZDFiOTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcopFTOgH2gAyNDI1OTY4NTc1Ojk5OTBjMTYwYjIyN2MwYjBkY2E3OWU5OGRiMTg1YjgxZmRjZWE2NzM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d91250967f9f03342d17fb62a2cae35b760d1b97", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/d91250967f9f03342d17fb62a2cae35b760d1b97", "committedDate": "2020-06-01T12:45:22Z", "message": "refactor: remove dead code; reduce logging"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "59c45e2e14fa02bf000765db89bb335985bc4cf2", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/59c45e2e14fa02bf000765db89bb335985bc4cf2", "committedDate": "2020-06-01T12:45:47Z", "message": "chore: remove unused internal class BlockUpdate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "345951bccbe04ce6b7cd6ef09a21c21f6925b2a5", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/345951bccbe04ce6b7cd6ef09a21c21f6925b2a5", "committedDate": "2020-06-01T13:42:37Z", "message": "chore: remove unused imports"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "993e7164a9f22164b96a578086f8d48e285ed3c3", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/993e7164a9f22164b96a578086f8d48e285ed3c3", "committedDate": "2020-06-01T14:09:28Z", "message": "chore: remove duplicated ComponentClassTypeHandler"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyMDE2NTAy", "url": "https://github.com/MovingBlocks/Terasology/pull/4016#pullrequestreview-422016502", "createdAt": "2020-06-01T16:56:58Z", "commit": {"oid": "993e7164a9f22164b96a578086f8d48e285ed3c3"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxNjo1Njo1OFrOGdSY5Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxNjo1Njo1OFrOGdSY5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM2MzE3Mw==", "bodyText": "newline\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            }\n          \n          \n            \n            }", "url": "https://github.com/MovingBlocks/Terasology/pull/4016#discussion_r433363173", "createdAt": "2020-06-01T16:56:58Z", "author": {"login": "jdrueckert"}, "path": "engine/src/main/java/org/terasology/persistence/typeHandling/extensionTypes/ComponentClassTypeHandler.java", "diffHunk": "@@ -17,22 +17,23 @@\n \n import org.terasology.entitySystem.Component;\n import org.terasology.persistence.typeHandling.StringRepresentationTypeHandler;\n+import org.terasology.persistence.typeHandling.TypeHandlerContext;\n \n public class ComponentClassTypeHandler extends StringRepresentationTypeHandler<Class<? extends Component>> {\n \n+    TypeHandlerContext context;\n+\n+    public ComponentClassTypeHandler(final TypeHandlerContext context) {\n+        this.context = context;\n+    }\n+\n     @Override\n     public String getAsString(Class<? extends Component> item) {\n-        return item.getName();\n+        return context.getSandbox().getSubTypeIdentifier(item, Component.class);\n     }\n \n     @Override\n     public Class<? extends Component> getFromString(String representation) {\n-        try {\n-            final Class<? extends Component> clazz = Class.forName(representation).asSubclass(Component.class);\n-            return clazz;\n-        } catch (ClassNotFoundException e) {\n-            e.printStackTrace();\n-            return null;\n-        }\n+        return context.getSandbox().findSubTypeOf(representation, Component.class).orElse(null);\n     }\n-}\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "993e7164a9f22164b96a578086f8d48e285ed3c3"}, "originalPosition": 32}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bfd81e3909ae5a5d8e19f21dccfb55481ea0c5b7", "author": {"user": {"login": "jdrueckert", "name": null}}, "url": "https://github.com/MovingBlocks/Terasology/commit/bfd81e3909ae5a5d8e19f21dccfb55481ea0c5b7", "committedDate": "2020-06-01T21:15:58Z", "message": "Update engine/src/main/java/org/terasology/persistence/typeHandling/extensionTypes/ComponentClassTypeHandler.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa506136c1dd3e265bef84df667ae8ad4c1737c3", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/aa506136c1dd3e265bef84df667ae8ad4c1737c3", "committedDate": "2020-06-01T21:21:47Z", "message": "Merge branch 'develop' into topic/remove-dead-code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0a20f22e15ed660e32d68538e833653a53e2c8a9", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/0a20f22e15ed660e32d68538e833653a53e2c8a9", "committedDate": "2020-06-01T21:33:18Z", "message": "fix: reset WorldRendererImpl"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyMjkxMjQy", "url": "https://github.com/MovingBlocks/Terasology/pull/4016#pullrequestreview-422291242", "createdAt": "2020-06-02T01:53:10Z", "commit": {"oid": "0a20f22e15ed660e32d68538e833653a53e2c8a9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQwMTo1MzoxMFrOGdfjPQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQwMTo1MzoxMFrOGdfjPQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzU3ODgxMw==", "bodyText": "This is the only thing in this PR that's not just a straight deletion. And it looks okay from here.\nIt does change the constructor, but presumably that's the sort of thing that you'd find out pretty fast as soon as you tried to compile against it.\nActually ... where is this class used? it's not in my workspace.", "url": "https://github.com/MovingBlocks/Terasology/pull/4016#discussion_r433578813", "createdAt": "2020-06-02T01:53:10Z", "author": {"login": "keturn"}, "path": "engine/src/main/java/org/terasology/persistence/typeHandling/extensionTypes/ComponentClassTypeHandler.java", "diffHunk": "@@ -17,22 +17,23 @@\n \n import org.terasology.entitySystem.Component;\n import org.terasology.persistence.typeHandling.StringRepresentationTypeHandler;\n+import org.terasology.persistence.typeHandling.TypeHandlerContext;\n \n public class ComponentClassTypeHandler extends StringRepresentationTypeHandler<Class<? extends Component>> {\n \n+    TypeHandlerContext context;\n+\n+    public ComponentClassTypeHandler(final TypeHandlerContext context) {\n+        this.context = context;\n+    }\n+\n     @Override\n     public String getAsString(Class<? extends Component> item) {\n-        return item.getName();\n+        return context.getSandbox().getSubTypeIdentifier(item, Component.class);\n     }\n \n     @Override\n     public Class<? extends Component> getFromString(String representation) {\n-        try {\n-            final Class<? extends Component> clazz = Class.forName(representation).asSubclass(Component.class);\n-            return clazz;\n-        } catch (ClassNotFoundException e) {\n-            e.printStackTrace();\n-            return null;\n-        }\n+        return context.getSandbox().findSubTypeOf(representation, Component.class).orElse(null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0a20f22e15ed660e32d68538e833653a53e2c8a9"}, "originalPosition": 29}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyMzE1OTA2", "url": "https://github.com/MovingBlocks/Terasology/pull/4016#pullrequestreview-422315906", "createdAt": "2020-06-02T03:20:43Z", "commit": {"oid": "0a20f22e15ed660e32d68538e833653a53e2c8a9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyMzE1OTg2", "url": "https://github.com/MovingBlocks/Terasology/pull/4016#pullrequestreview-422315986", "createdAt": "2020-06-02T03:21:05Z", "commit": {"oid": "0a20f22e15ed660e32d68538e833653a53e2c8a9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9990c160b227c0b0dca79e98db185b81fdcea673", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/9990c160b227c0b0dca79e98db185b81fdcea673", "committedDate": "2020-06-06T15:34:57Z", "message": "Merge remote-tracking branch 'origin/develop' into topic/remove-dead-code"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1638, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}