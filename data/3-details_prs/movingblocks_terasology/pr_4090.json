{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUzODE0NzUz", "number": 4090, "title": "feat(FlowLayout): Add option for horizontal spacing", "bodyText": "Contains\nSummary\nEnhancement of FlowLayout: the option to put vertical spacing in between the items included withing that FlowLayout.\nAdditions\nAdded a variable named horizontalSpacing, which can be set within the UI file that used a FlowLayout. Using #4089 's verticalSpacing as reference.\nHow to test\nSteps\n\nSearch for inventoryHud.ui file within the Inventory module\nPlace right below the \"id\": \"toolbar\", the line \"horizontalSpacing\": 30,\nFind the line \"use-content-width\": true, at the layoutInfo\" of the \"FlowLayout\" element (line 56) and replace it with \"width\": 150,\nRun a game of any module that uses the quickslot module (if you use a module that overrides the above file, then make the above changes there. You can check if a file gets overridden if there is a file with this path: `modules/YourModule/overrides/inventory/ui/hud/inventoryHud.ui)\nNotice the quickslot\n\nResult\nIssues\n\n Add spacing\n Remove spacing from the last element of each row - not an error\n Bring the hidden part of the lowest row back inside the screen\n Quickslot is not stuck at its position formating", "createdAt": "2020-07-20T20:35:46Z", "url": "https://github.com/MovingBlocks/Terasology/pull/4090", "merged": true, "mergeCommit": {"oid": "5a996503c8a89a3c8372457723313029eb6713d5"}, "closed": true, "closedAt": "2020-07-29T20:30:25Z", "author": {"login": "stefaniamak"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc23gtfAH2gAyNDUzODE0NzUzOmE5YzE0NTliOTU2Mjk2ODQ3NTM0YzYzYTJhN2YwMWNlMTNmNWZmYWE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc5wxxDAFqTQ1Nzg1OTE0NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a9c1459b956296847534c63a2a7f01ce13f5ffaa", "author": {"user": {"login": "stefaniamak", "name": "Stefania Makrygiannaki"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/a9c1459b956296847534c63a2a7f01ce13f5ffaa", "committedDate": "2020-07-20T20:18:30Z", "message": "feat: adds horizontal space in quickslot (but with issues)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxOTU3NDgz", "url": "https://github.com/MovingBlocks/Terasology/pull/4090#pullrequestreview-451957483", "createdAt": "2020-07-20T21:03:04Z", "commit": {"oid": "a9c1459b956296847534c63a2a7f01ce13f5ffaa"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQyMTowMzowNFrOG0fMdw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQyMTowMzoyNlrOG0fNEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzY5MDIzMQ==", "bodyText": "I think this check also needs to take the spacing into account. If we add both the spacing and the size of the next element to the currently filled width, do we exceed the canvas size?", "url": "https://github.com/MovingBlocks/Terasology/pull/4090#discussion_r457690231", "createdAt": "2020-07-20T21:03:04Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/rendering/nui/layouts/FlowLayout.java", "diffHunk": "@@ -51,16 +58,17 @@ public void removeAllWidgets() {\n     public void onDraw(Canvas canvas) {\n         int filledWidth = 0;\n         int filledHeight = 0;\n+        int widthOffset = 0;\n         int heightOffset = 0;\n         for (UIWidget widget : contents) {\n             Vector2i size = canvas.calculatePreferredSize(widget);\n-            if (filledWidth != 0 && filledWidth + size.x  > canvas.size().x) {\n+            if (filledWidth != 0 && filledWidth + size.x > canvas.size().x) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a9c1459b956296847534c63a2a7f01ce13f5ffaa"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzY5MDM4NA==", "bodyText": "Same here.", "url": "https://github.com/MovingBlocks/Terasology/pull/4090#discussion_r457690384", "createdAt": "2020-07-20T21:03:26Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/rendering/nui/layouts/FlowLayout.java", "diffHunk": "@@ -72,13 +80,13 @@ public Vector2i getPreferredContentSize(Canvas canvas, Vector2i sizeHint) {\n         int filledHeight = 0;\n         for (UIWidget widget : contents) {\n             Vector2i size = canvas.calculatePreferredSize(widget);\n-            if (filledWidth != 0 && filledWidth + size.x  > sizeHint.x) {\n+            if (filledWidth != 0 && filledWidth + size.x > sizeHint.x) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a9c1459b956296847534c63a2a7f01ce13f5ffaa"}, "originalPosition": 46}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f459f62ed5fcc2cd8155aaf25b4f7a3f820f732a", "author": {"user": {"login": "stefaniamak", "name": "Stefania Makrygiannaki"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/f459f62ed5fcc2cd8155aaf25b4f7a3f820f732a", "committedDate": "2020-07-21T17:39:44Z", "message": "fix: issue for extra spacing at end of row & issue about hidden row"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyNjkyOTAx", "url": "https://github.com/MovingBlocks/Terasology/pull/4090#pullrequestreview-452692901", "createdAt": "2020-07-21T17:48:29Z", "commit": {"oid": "f459f62ed5fcc2cd8155aaf25b4f7a3f820f732a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNzo0ODoyOVrOG1DMJw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNzo0ODoyOVrOG1DMJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODI3OTk3NQ==", "bodyText": "This worked at first with 2 test, but the rest tests proven for this not being the correct solution.", "url": "https://github.com/MovingBlocks/Terasology/pull/4090#discussion_r458279975", "createdAt": "2020-07-21T17:48:29Z", "author": {"login": "stefaniamak"}, "path": "engine/src/main/java/org/terasology/rendering/nui/layouts/FlowLayout.java", "diffHunk": "@@ -72,10 +80,10 @@ public Vector2i getPreferredContentSize(Canvas canvas, Vector2i sizeHint) {\n         int filledHeight = 0;\n         for (UIWidget widget : contents) {\n             Vector2i size = canvas.calculatePreferredSize(widget);\n-            if (filledWidth != 0 && filledWidth + size.x  > sizeHint.x) {\n+            if (filledWidth != 0 && filledWidth + size.x > sizeHint.x) {\n                 result.x = Math.max(result.x, filledWidth);\n                 result.y += filledHeight;\n-                filledWidth = size.x;\n+                filledWidth = size.x + horizontalSpacing * (contents.size() - 1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f459f62ed5fcc2cd8155aaf25b4f7a3f820f732a"}, "originalPosition": 50}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2db9ae8d10cf37b0c397fe7e2daffa1e49d152bd", "author": {"user": {"login": "stefaniamak", "name": "Stefania Makrygiannaki"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/2db9ae8d10cf37b0c397fe7e2daffa1e49d152bd", "committedDate": "2020-07-21T19:06:33Z", "message": "Merge branch 'develop-upstream' into FlowLayoutHorizontalSpacing"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyNzYyOTc1", "url": "https://github.com/MovingBlocks/Terasology/pull/4090#pullrequestreview-452762975", "createdAt": "2020-07-21T19:26:05Z", "commit": {"oid": "2db9ae8d10cf37b0c397fe7e2daffa1e49d152bd"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxOToyNjowNVrOG1GkiQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxOTozMDozNFrOG1GtuQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODMzNTM2OQ==", "bodyText": "I think the docstrings are now flipped for setHorizontalSpacing and setVerticalSpacing \ud83d\ude05", "url": "https://github.com/MovingBlocks/Terasology/pull/4090#discussion_r458335369", "createdAt": "2020-07-21T19:26:05Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/rendering/nui/layouts/FlowLayout.java", "diffHunk": "@@ -121,6 +138,17 @@ public int getVerticalSpacing() {\n      * @param spacing The spacing, in pixels\n      * @return This {@code FlowLayout}\n      */\n+    public FlowLayout setHorizontalSpacing(int spacing) {\n+        this.horizontalSpacing = spacing;\n+        return this;\n+    }\n+\n+    /**\n+     * Sets the horizontal spacing between adjacent widgets in this {@code FlowLayout}.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2db9ae8d10cf37b0c397fe7e2daffa1e49d152bd"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODMzNjU5Mg==", "bodyText": "I think the solution for this is similar to the vertical case - just add the horizontalSpacing each time when adding size.x somewhere.", "url": "https://github.com/MovingBlocks/Terasology/pull/4090#discussion_r458336592", "createdAt": "2020-07-21T19:28:21Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/rendering/nui/layouts/FlowLayout.java", "diffHunk": "@@ -72,10 +80,10 @@ public Vector2i getPreferredContentSize(Canvas canvas, Vector2i sizeHint) {\n         int filledHeight = 0;\n         for (UIWidget widget : contents) {\n             Vector2i size = canvas.calculatePreferredSize(widget);\n-            if (filledWidth != 0 && filledWidth + size.x  > sizeHint.x) {\n+            if (filledWidth != 0 && filledWidth + size.x > sizeHint.x) {\n                 result.x = Math.max(result.x, filledWidth);\n                 result.y += filledHeight;\n-                filledWidth = size.x;\n+                filledWidth = size.x + horizontalSpacing * (contents.size() - 1);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODI3OTk3NQ=="}, "originalCommit": {"oid": "f459f62ed5fcc2cd8155aaf25b4f7a3f820f732a"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODMzNzcyMQ==", "bodyText": "Yeah, you're probably right - that's also where \"remove from last element\" comes from \ud83e\udd14  so this check is indeed correct, because the \"previous\" gap is already contained in filledWidth... \ud83d\udc4d", "url": "https://github.com/MovingBlocks/Terasology/pull/4090#discussion_r458337721", "createdAt": "2020-07-21T19:30:34Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/rendering/nui/layouts/FlowLayout.java", "diffHunk": "@@ -51,16 +58,17 @@ public void removeAllWidgets() {\n     public void onDraw(Canvas canvas) {\n         int filledWidth = 0;\n         int filledHeight = 0;\n+        int widthOffset = 0;\n         int heightOffset = 0;\n         for (UIWidget widget : contents) {\n             Vector2i size = canvas.calculatePreferredSize(widget);\n-            if (filledWidth != 0 && filledWidth + size.x  > canvas.size().x) {\n+            if (filledWidth != 0 && filledWidth + size.x > canvas.size().x) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzY5MDIzMQ=="}, "originalCommit": {"oid": "a9c1459b956296847534c63a2a7f01ce13f5ffaa"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyNzc0Nzgy", "url": "https://github.com/MovingBlocks/Terasology/pull/4090#pullrequestreview-452774782", "createdAt": "2020-07-21T19:44:03Z", "commit": {"oid": "2db9ae8d10cf37b0c397fe7e2daffa1e49d152bd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxOTo0NDowM1rOG1HIhg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxOTo0NDowM1rOG1HIhg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODM0NDU4Mg==", "bodyText": "Also this changed to double SpacingSpacing for some reason \ud83d\ude06", "url": "https://github.com/MovingBlocks/Terasology/pull/4090#discussion_r458344582", "createdAt": "2020-07-21T19:44:03Z", "author": {"login": "stefaniamak"}, "path": "engine/src/main/java/org/terasology/rendering/nui/layouts/FlowLayout.java", "diffHunk": "@@ -107,6 +115,15 @@ public Vector2i getMaxContentSize(Canvas canvas) {\n     }\n \n     /**\n+     * Retrieves the horizontal spacing between adjacent widgets in this {@code FlowLayout}.\n+     *\n+     * @return The spacing, in pixels\n+     */\n+    public int getHorizontalSpacingSpacing() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2db9ae8d10cf37b0c397fe7e2daffa1e49d152bd"}, "originalPosition": 48}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e97a8801431bd54d3b020de300bd3c80b48ecec8", "author": {"user": {"login": "stefaniamak", "name": "Stefania Makrygiannaki"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/e97a8801431bd54d3b020de300bd3c80b48ecec8", "committedDate": "2020-07-21T19:44:55Z", "message": "fix: merging errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "30e8a11950ce83a556c21a400e422360e8cd568c", "author": {"user": {"login": "stefaniamak", "name": "Stefania Makrygiannaki"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/30e8a11950ce83a556c21a400e422360e8cd568c", "committedDate": "2020-07-29T17:46:20Z", "message": "Merge branch 'develop' into FlowLayoutHorizontalSpacing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f6fb4f7509113ae0f55bc0598f97c1f4b0f90629", "author": {"user": {"login": "stefaniamak", "name": "Stefania Makrygiannaki"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/f6fb4f7509113ae0f55bc0598f97c1f4b0f90629", "committedDate": "2020-07-29T18:55:47Z", "message": "fix: quicklot doesn't move around the screen anymore"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5ace7f79c82ae8f076eafa0f2a6a35a8dd20afe0", "author": {"user": {"login": "stefaniamak", "name": "Stefania Makrygiannaki"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/5ace7f79c82ae8f076eafa0f2a6a35a8dd20afe0", "committedDate": "2020-07-29T19:48:53Z", "message": "\"overflowing\" error fixed (?)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU3ODQ2NDg5", "url": "https://github.com/MovingBlocks/Terasology/pull/4090#pullrequestreview-457846489", "createdAt": "2020-07-29T19:58:34Z", "commit": {"oid": "5ace7f79c82ae8f076eafa0f2a6a35a8dd20afe0"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQxOTo1ODozNFrOG5H7dA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQxOTo1ODozNFrOG5H7dA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU1MTkyNA==", "bodyText": "unused, can be removed\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    int widthOffset = 0;", "url": "https://github.com/MovingBlocks/Terasology/pull/4090#discussion_r462551924", "createdAt": "2020-07-29T19:58:34Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/rendering/nui/layouts/FlowLayout.java", "diffHunk": "@@ -59,6 +65,7 @@ public void removeAllWidgets() {\n     public void onDraw(Canvas canvas) {\n         int filledWidth = 0;\n         int filledHeight = 0;\n+        int widthOffset = 0;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5ace7f79c82ae8f076eafa0f2a6a35a8dd20afe0"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "93acf8e457884987c2de4eaa5250f6282982140d", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/93acf8e457884987c2de4eaa5250f6282982140d", "committedDate": "2020-07-29T20:07:23Z", "message": "remove unused field"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU3ODU5MTQ0", "url": "https://github.com/MovingBlocks/Terasology/pull/4090#pullrequestreview-457859144", "createdAt": "2020-07-29T20:09:34Z", "commit": {"oid": "93acf8e457884987c2de4eaa5250f6282982140d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1382, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}