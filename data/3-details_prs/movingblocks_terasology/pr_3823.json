{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYyMjc5MjU5", "number": 3823, "title": "Handle unexpected (old or weird) OSes that may not support our directory detection.", "bodyText": "Contains\nThis PR deals with errors thrown during directory detection, specifically giving a chance to run the game again if the default directory detection fails.\nIn case of headless servers we have defaulted to choosing the home path as the current directory.\nFixes #3566\nHow to test\nRun the game on Windows XP. If you can find something with XP on it or a wierd OS that throws our directory detection out of the window.\nOutstanding before merging\nIf anything. You can use neat checkboxes! Feel free to delete if not needed\n\n[ x ] Still have to adjust the wiki doc\nThe doc has to be updated if in case we hit any such OSes in the future.", "createdAt": "2020-01-13T19:19:41Z", "url": "https://github.com/MovingBlocks/Terasology/pull/3823", "merged": true, "mergeCommit": {"oid": "a9263f7d1a5a0ee41cb981b47a5e9115f560c015"}, "closed": true, "closedAt": "2020-02-19T13:16:38Z", "author": {"login": "sladyn98"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb4qT2dgH2gAyMzYyMjc5MjU5OmI1ZWUxNTE5MTQwZWM0MTU5YmE2MWFjZTYwNTFkODhjMTMyZjlhMjE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcF2WYAgFqTM2MTA5ODQ0NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b5ee1519140ec4159ba61ace6051d88c132f9a21", "author": {"user": null}, "url": "https://github.com/MovingBlocks/Terasology/commit/b5ee1519140ec4159ba61ace6051d88c132f9a21", "committedDate": "2020-01-09T13:52:23Z", "message": "Added manual path chooser"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "55de00b1c71128f805390dfa47cdd607660fa9f8", "author": {"user": null}, "url": "https://github.com/MovingBlocks/Terasology/commit/55de00b1c71128f805390dfa47cdd607660fa9f8", "committedDate": "2020-01-13T19:15:00Z", "message": "PathManager.java: Added user prompt on failure due to error in windowsXP. Giving the user a second chance to run the game.\nAdded a headless server condition to set the homepath as current directory."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQzNTcyMDYy", "url": "https://github.com/MovingBlocks/Terasology/pull/3823#pullrequestreview-343572062", "createdAt": "2020-01-15T22:42:22Z", "commit": {"oid": "55de00b1c71128f805390dfa47cdd607660fa9f8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNVQyMjo0MjoyMlrOFeI1GA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNVQyMjo0MjoyMlrOFeI1GA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzE0NjI2NA==", "bodyText": "ex/e?", "url": "https://github.com/MovingBlocks/Terasology/pull/3823#discussion_r367146264", "createdAt": "2020-01-15T22:42:22Z", "author": {"login": "SoniEx2"}, "path": "facades/PC/src/main/java/org/terasology/engine/Terasology.java", "diffHunk": "@@ -363,6 +364,12 @@ private static void handleLaunchArguments(String[] args) {\n \n         } catch (IOException e) {\n             reportException(e);\n+            try {\n+                PathManager.getInstance().chooseHomePathManually();\n+            } catch (IOException ex) {\n+                reportException(e);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "55de00b1c71128f805390dfa47cdd607660fa9f8"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQzNTcyMjM4", "url": "https://github.com/MovingBlocks/Terasology/pull/3823#pullrequestreview-343572238", "createdAt": "2020-01-15T22:42:48Z", "commit": {"oid": "55de00b1c71128f805390dfa47cdd607660fa9f8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNVQyMjo0Mjo0OFrOFeI1rA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNVQyMjo0Mjo0OFrOFeI1rA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzE0NjQxMg==", "bodyText": "shouldn't this be taken out?", "url": "https://github.com/MovingBlocks/Terasology/pull/3823#discussion_r367146412", "createdAt": "2020-01-15T22:42:48Z", "author": {"login": "SoniEx2"}, "path": "facades/PC/src/main/java/org/terasology/engine/Terasology.java", "diffHunk": "@@ -363,6 +364,12 @@ private static void handleLaunchArguments(String[] args) {\n \n         } catch (IOException e) {\n             reportException(e);\n+            try {\n+                PathManager.getInstance().chooseHomePathManually();\n+            } catch (IOException ex) {\n+                reportException(e);\n+                System.exit(0);\n+            }\n             System.exit(0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "55de00b1c71128f805390dfa47cdd607660fa9f8"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2dce469b1d75e8e1c675430c1094344500132c26", "author": {"user": null}, "url": "https://github.com/MovingBlocks/Terasology/commit/2dce469b1d75e8e1c675430c1094344500132c26", "committedDate": "2020-01-18T13:24:16Z", "message": "Corrected typos"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ1NTQ5NTMw", "url": "https://github.com/MovingBlocks/Terasology/pull/3823#pullrequestreview-345549530", "createdAt": "2020-01-20T22:02:44Z", "commit": {"oid": "2dce469b1d75e8e1c675430c1094344500132c26"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQyMjowMjo0NFrOFfqFWg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQyMjowNDoxOFrOFfqGmg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODczOTY3NA==", "bodyText": "Should/can this be part of useDefaultHomePath?", "url": "https://github.com/MovingBlocks/Terasology/pull/3823#discussion_r368739674", "createdAt": "2020-01-20T22:02:44Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/engine/paths/PathManager.java", "diffHunk": "@@ -188,6 +196,24 @@ public void useDefaultHomePath() throws IOException {\n         updateDirs();\n     }\n \n+    /**\n+     * Gives user the option to manually choose home path.\n+     * @throws IOException Thrown when required directories cannot be accessed.\n+     */\n+    public void chooseHomePathManually() throws IOException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2dce469b1d75e8e1c675430c1094344500132c26"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODczOTk5NA==", "bodyText": "If this can recover any exception that was thrown before, there is no need to reportException before trying the backup. At least, it should not be reported as an error (maybe as a warning, or probably just on INFO level).", "url": "https://github.com/MovingBlocks/Terasology/pull/3823#discussion_r368739994", "createdAt": "2020-01-20T22:04:18Z", "author": {"login": "skaldarnar"}, "path": "facades/PC/src/main/java/org/terasology/engine/Terasology.java", "diffHunk": "@@ -363,7 +364,12 @@ private static void handleLaunchArguments(String[] args) {\n \n         } catch (IOException e) {\n             reportException(e);\n-            System.exit(0);\n+            try {\n+                PathManager.getInstance().chooseHomePathManually();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2dce469b1d75e8e1c675430c1094344500132c26"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f6874fe045f76c5d5c617b6cda0ad2c045294b4d", "author": {"user": null}, "url": "https://github.com/MovingBlocks/Terasology/commit/f6874fe045f76c5d5c617b6cda0ad2c045294b4d", "committedDate": "2020-01-21T15:02:40Z", "message": "Added logger"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxMDk4NDQ0", "url": "https://github.com/MovingBlocks/Terasology/pull/3823#pullrequestreview-361098444", "createdAt": "2020-02-19T13:15:01Z", "commit": {"oid": "f6874fe045f76c5d5c617b6cda0ad2c045294b4d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1672, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}