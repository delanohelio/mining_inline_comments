{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUzODE0NzUz", "number": 4090, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQyMTowMzowNFrOEQXtdQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQxOTo1ODozNFrOETZ6qw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1NjAxMTQxOnYy", "diffSide": "RIGHT", "path": "engine/src/main/java/org/terasology/rendering/nui/layouts/FlowLayout.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQyMTowMzowNFrOG0fMdw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxOTozMDozNFrOG1GtuQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzY5MDIzMQ==", "bodyText": "I think this check also needs to take the spacing into account. If we add both the spacing and the size of the next element to the currently filled width, do we exceed the canvas size?", "url": "https://github.com/MovingBlocks/Terasology/pull/4090#discussion_r457690231", "createdAt": "2020-07-20T21:03:04Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/rendering/nui/layouts/FlowLayout.java", "diffHunk": "@@ -51,16 +58,17 @@ public void removeAllWidgets() {\n     public void onDraw(Canvas canvas) {\n         int filledWidth = 0;\n         int filledHeight = 0;\n+        int widthOffset = 0;\n         int heightOffset = 0;\n         for (UIWidget widget : contents) {\n             Vector2i size = canvas.calculatePreferredSize(widget);\n-            if (filledWidth != 0 && filledWidth + size.x  > canvas.size().x) {\n+            if (filledWidth != 0 && filledWidth + size.x > canvas.size().x) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a9c1459b956296847534c63a2a7f01ce13f5ffaa"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODI4Mjk0OQ==", "bodyText": "Considering we add the spacing right afterwards, yes that probably should include the spacing as well. Generally though, wouldn't we want for the item to be added if it fits to the row, no matter the spacing we set in between the other items?\nSo what my understanding of the code is that it adds the item and the spacing (to its right) in one loop, and then go to the next item. Is that how it works? Because I still feel like there is a detail within the two methods that I still haven't understood yet.", "url": "https://github.com/MovingBlocks/Terasology/pull/4090#discussion_r458282949", "createdAt": "2020-07-21T17:53:29Z", "author": {"login": "stefaniamak"}, "path": "engine/src/main/java/org/terasology/rendering/nui/layouts/FlowLayout.java", "diffHunk": "@@ -51,16 +58,17 @@ public void removeAllWidgets() {\n     public void onDraw(Canvas canvas) {\n         int filledWidth = 0;\n         int filledHeight = 0;\n+        int widthOffset = 0;\n         int heightOffset = 0;\n         for (UIWidget widget : contents) {\n             Vector2i size = canvas.calculatePreferredSize(widget);\n-            if (filledWidth != 0 && filledWidth + size.x  > canvas.size().x) {\n+            if (filledWidth != 0 && filledWidth + size.x > canvas.size().x) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzY5MDIzMQ=="}, "originalCommit": {"oid": "a9c1459b956296847534c63a2a7f01ce13f5ffaa"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODMzNzcyMQ==", "bodyText": "Yeah, you're probably right - that's also where \"remove from last element\" comes from \ud83e\udd14  so this check is indeed correct, because the \"previous\" gap is already contained in filledWidth... \ud83d\udc4d", "url": "https://github.com/MovingBlocks/Terasology/pull/4090#discussion_r458337721", "createdAt": "2020-07-21T19:30:34Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/rendering/nui/layouts/FlowLayout.java", "diffHunk": "@@ -51,16 +58,17 @@ public void removeAllWidgets() {\n     public void onDraw(Canvas canvas) {\n         int filledWidth = 0;\n         int filledHeight = 0;\n+        int widthOffset = 0;\n         int heightOffset = 0;\n         for (UIWidget widget : contents) {\n             Vector2i size = canvas.calculatePreferredSize(widget);\n-            if (filledWidth != 0 && filledWidth + size.x  > canvas.size().x) {\n+            if (filledWidth != 0 && filledWidth + size.x > canvas.size().x) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzY5MDIzMQ=="}, "originalCommit": {"oid": "a9c1459b956296847534c63a2a7f01ce13f5ffaa"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1NjAxMjI1OnYy", "diffSide": "RIGHT", "path": "engine/src/main/java/org/terasology/rendering/nui/layouts/FlowLayout.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQyMTowMzoyNlrOG0fNEA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQyMTowMzoyNlrOG0fNEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzY5MDM4NA==", "bodyText": "Same here.", "url": "https://github.com/MovingBlocks/Terasology/pull/4090#discussion_r457690384", "createdAt": "2020-07-20T21:03:26Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/rendering/nui/layouts/FlowLayout.java", "diffHunk": "@@ -72,13 +80,13 @@ public Vector2i getPreferredContentSize(Canvas canvas, Vector2i sizeHint) {\n         int filledHeight = 0;\n         for (UIWidget widget : contents) {\n             Vector2i size = canvas.calculatePreferredSize(widget);\n-            if (filledWidth != 0 && filledWidth + size.x  > sizeHint.x) {\n+            if (filledWidth != 0 && filledWidth + size.x > sizeHint.x) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a9c1459b956296847534c63a2a7f01ce13f5ffaa"}, "originalPosition": 46}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1OTgwNDY1OnYy", "diffSide": "RIGHT", "path": "engine/src/main/java/org/terasology/rendering/nui/layouts/FlowLayout.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNzo0ODoyOVrOG1DMJw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxOToyODoyMVrOG1GpUA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODI3OTk3NQ==", "bodyText": "This worked at first with 2 test, but the rest tests proven for this not being the correct solution.", "url": "https://github.com/MovingBlocks/Terasology/pull/4090#discussion_r458279975", "createdAt": "2020-07-21T17:48:29Z", "author": {"login": "stefaniamak"}, "path": "engine/src/main/java/org/terasology/rendering/nui/layouts/FlowLayout.java", "diffHunk": "@@ -72,10 +80,10 @@ public Vector2i getPreferredContentSize(Canvas canvas, Vector2i sizeHint) {\n         int filledHeight = 0;\n         for (UIWidget widget : contents) {\n             Vector2i size = canvas.calculatePreferredSize(widget);\n-            if (filledWidth != 0 && filledWidth + size.x  > sizeHint.x) {\n+            if (filledWidth != 0 && filledWidth + size.x > sizeHint.x) {\n                 result.x = Math.max(result.x, filledWidth);\n                 result.y += filledHeight;\n-                filledWidth = size.x;\n+                filledWidth = size.x + horizontalSpacing * (contents.size() - 1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f459f62ed5fcc2cd8155aaf25b4f7a3f820f732a"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODMzNjU5Mg==", "bodyText": "I think the solution for this is similar to the vertical case - just add the horizontalSpacing each time when adding size.x somewhere.", "url": "https://github.com/MovingBlocks/Terasology/pull/4090#discussion_r458336592", "createdAt": "2020-07-21T19:28:21Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/rendering/nui/layouts/FlowLayout.java", "diffHunk": "@@ -72,10 +80,10 @@ public Vector2i getPreferredContentSize(Canvas canvas, Vector2i sizeHint) {\n         int filledHeight = 0;\n         for (UIWidget widget : contents) {\n             Vector2i size = canvas.calculatePreferredSize(widget);\n-            if (filledWidth != 0 && filledWidth + size.x  > sizeHint.x) {\n+            if (filledWidth != 0 && filledWidth + size.x > sizeHint.x) {\n                 result.x = Math.max(result.x, filledWidth);\n                 result.y += filledHeight;\n-                filledWidth = size.x;\n+                filledWidth = size.x + horizontalSpacing * (contents.size() - 1);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODI3OTk3NQ=="}, "originalCommit": {"oid": "f459f62ed5fcc2cd8155aaf25b4f7a3f820f732a"}, "originalPosition": 50}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2MDE0NTI0OnYy", "diffSide": "RIGHT", "path": "engine/src/main/java/org/terasology/rendering/nui/layouts/FlowLayout.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxOToyNjowNVrOG1GkiQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxOTo0MzoxMlrOG1HGrA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODMzNTM2OQ==", "bodyText": "I think the docstrings are now flipped for setHorizontalSpacing and setVerticalSpacing \ud83d\ude05", "url": "https://github.com/MovingBlocks/Terasology/pull/4090#discussion_r458335369", "createdAt": "2020-07-21T19:26:05Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/rendering/nui/layouts/FlowLayout.java", "diffHunk": "@@ -121,6 +138,17 @@ public int getVerticalSpacing() {\n      * @param spacing The spacing, in pixels\n      * @return This {@code FlowLayout}\n      */\n+    public FlowLayout setHorizontalSpacing(int spacing) {\n+        this.horizontalSpacing = spacing;\n+        return this;\n+    }\n+\n+    /**\n+     * Sets the horizontal spacing between adjacent widgets in this {@code FlowLayout}.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2db9ae8d10cf37b0c397fe7e2daffa1e49d152bd"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODM0NDEwOA==", "bodyText": "And I did double check... On it \ud83d\udc4d", "url": "https://github.com/MovingBlocks/Terasology/pull/4090#discussion_r458344108", "createdAt": "2020-07-21T19:43:12Z", "author": {"login": "stefaniamak"}, "path": "engine/src/main/java/org/terasology/rendering/nui/layouts/FlowLayout.java", "diffHunk": "@@ -121,6 +138,17 @@ public int getVerticalSpacing() {\n      * @param spacing The spacing, in pixels\n      * @return This {@code FlowLayout}\n      */\n+    public FlowLayout setHorizontalSpacing(int spacing) {\n+        this.horizontalSpacing = spacing;\n+        return this;\n+    }\n+\n+    /**\n+     * Sets the horizontal spacing between adjacent widgets in this {@code FlowLayout}.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODMzNTM2OQ=="}, "originalCommit": {"oid": "2db9ae8d10cf37b0c397fe7e2daffa1e49d152bd"}, "originalPosition": 66}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2MDIwMjQxOnYy", "diffSide": "RIGHT", "path": "engine/src/main/java/org/terasology/rendering/nui/layouts/FlowLayout.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxOTo0NDowM1rOG1HIhg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxOTo0NDowM1rOG1HIhg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODM0NDU4Mg==", "bodyText": "Also this changed to double SpacingSpacing for some reason \ud83d\ude06", "url": "https://github.com/MovingBlocks/Terasology/pull/4090#discussion_r458344582", "createdAt": "2020-07-21T19:44:03Z", "author": {"login": "stefaniamak"}, "path": "engine/src/main/java/org/terasology/rendering/nui/layouts/FlowLayout.java", "diffHunk": "@@ -107,6 +115,15 @@ public Vector2i getMaxContentSize(Canvas canvas) {\n     }\n \n     /**\n+     * Retrieves the horizontal spacing between adjacent widgets in this {@code FlowLayout}.\n+     *\n+     * @return The spacing, in pixels\n+     */\n+    public int getHorizontalSpacingSpacing() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2db9ae8d10cf37b0c397fe7e2daffa1e49d152bd"}, "originalPosition": 48}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4NzgzMDE5OnYy", "diffSide": "RIGHT", "path": "engine/src/main/java/org/terasology/rendering/nui/layouts/FlowLayout.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQxOTo1ODozNFrOG5H7dA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQxOTo1ODozNFrOG5H7dA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU1MTkyNA==", "bodyText": "unused, can be removed\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    int widthOffset = 0;", "url": "https://github.com/MovingBlocks/Terasology/pull/4090#discussion_r462551924", "createdAt": "2020-07-29T19:58:34Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/rendering/nui/layouts/FlowLayout.java", "diffHunk": "@@ -59,6 +65,7 @@ public void removeAllWidgets() {\n     public void onDraw(Canvas canvas) {\n         int filledWidth = 0;\n         int filledHeight = 0;\n+        int widthOffset = 0;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5ace7f79c82ae8f076eafa0f2a6a35a8dd20afe0"}, "originalPosition": 17}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 325, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}