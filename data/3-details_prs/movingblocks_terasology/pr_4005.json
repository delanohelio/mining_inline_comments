{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI1NDEwNjY0", "number": 4005, "title": "chore: more descriptive error message on spawn failure", "bodyText": "This changes an error message from being a NoSuchElementException to\n\njava.lang.RuntimeException: Failed to find an acceptable spawn location.\n\nis RuntimeException the right thing to use for this?\nNoSuchElementException is a direct subclass of RuntimeException so it's probably not very wrong, but maybe we have a more fitting type for this kind of thing.", "createdAt": "2020-05-30T04:07:55Z", "url": "https://github.com/MovingBlocks/Terasology/pull/4005", "merged": true, "mergeCommit": {"oid": "e7f23fd754666a9a358dd09adee3ad750e0aa3a4"}, "closed": true, "closedAt": "2020-06-01T16:56:54Z", "author": {"login": "keturn"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcmO_1cAH2gAyNDI1NDEwNjY0OjllOTNkNmNhYzM4YzBlMzlkMzUxM2NiZmI4YTM4Mjg0Yzc4YWU2Mzk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcnCFYagFqTQyMTk1NDcyNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9e93d6cac38c0e39d3513cbfb8a38284c78ae639", "author": {"user": {"login": "keturn", "name": "Kevin Turner"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/9e93d6cac38c0e39d3513cbfb8a38284c78ae639", "committedDate": "2020-05-30T04:03:36Z", "message": "chore: more descriptive error message on spawn failure"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxODE4MTE2", "url": "https://github.com/MovingBlocks/Terasology/pull/4005#pullrequestreview-421818116", "createdAt": "2020-06-01T12:53:11Z", "commit": {"oid": "9e93d6cac38c0e39d3513cbfb8a38284c78ae639"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxMjo1MzoxMVrOGdJZQA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxMjo1MzoxMVrOGdJZQA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzIxNTgwOA==", "bodyText": "I think the \"right\" fix for this is to change the method signature to return an Optional<Vector3f>. Imho there is nothing exceptional about a find... method not finding something.\nAn alternative which leaves the signature as is would be to return null instead (another way of encoding the no spawn position was found).\nI like the Optional better as it forces the calling site to react on the possibility of failure.\nI don't think that a plain RuntimeException is the right thing to use here, as it is way too generic, and not really necessary. If we'd go for \"exception-based programming\" we'd introduce a NoSpawnPositionFoundException to catch further up the chain...", "url": "https://github.com/MovingBlocks/Terasology/pull/4005#discussion_r433215808", "createdAt": "2020-06-01T12:53:11Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/logic/players/PlayerFactory.java", "diffHunk": "@@ -93,7 +93,9 @@ public Vector3f findSpawnPositionFromLocationComponent(LocationComponent locatio\n         EntityBuilder builder = entityManager.newBuilder(\"engine:player\");\n         float extraSpace = 0.5f;  // spawn a little bit above the ground\n         float entityHeight = getHeightOf(builder) + extraSpace;\n-        return findSpawnPos(JomlUtil.from(locationComponent.getWorldPosition()), entityHeight).get(); // TODO: Handle Optional being empty\n+        return findSpawnPos(JomlUtil.from(locationComponent.getWorldPosition()), entityHeight)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9e93d6cac38c0e39d3513cbfb8a38284c78ae639"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxOTU0NzI3", "url": "https://github.com/MovingBlocks/Terasology/pull/4005#pullrequestreview-421954727", "createdAt": "2020-06-01T15:34:45Z", "commit": {"oid": "9e93d6cac38c0e39d3513cbfb8a38284c78ae639"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxNTozNDo0NVrOGdPJQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxNTozNDo0NVrOGdPJQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzMxMDAxOA==", "bodyText": "Right, the TODO is still there \ud83d\ude05 Baby step improvements ^^", "url": "https://github.com/MovingBlocks/Terasology/pull/4005#discussion_r433310018", "createdAt": "2020-06-01T15:34:45Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/logic/players/PlayerFactory.java", "diffHunk": "@@ -93,7 +93,9 @@ public Vector3f findSpawnPositionFromLocationComponent(LocationComponent locatio\n         EntityBuilder builder = entityManager.newBuilder(\"engine:player\");\n         float extraSpace = 0.5f;  // spawn a little bit above the ground\n         float entityHeight = getHeightOf(builder) + extraSpace;\n-        return findSpawnPos(JomlUtil.from(locationComponent.getWorldPosition()), entityHeight).get(); // TODO: Handle Optional being empty\n+        return findSpawnPos(JomlUtil.from(locationComponent.getWorldPosition()), entityHeight)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzIxNTgwOA=="}, "originalCommit": {"oid": "9e93d6cac38c0e39d3513cbfb8a38284c78ae639"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1618, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}