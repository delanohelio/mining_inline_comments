{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAxMTY4Mjc4", "number": 4193, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQxMDozNjowOFrOEskx7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQxMDozODoyN1rOEsk0tA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE1MTc1NDA2OnYy", "diffSide": "RIGHT", "path": "engine/src/main/java/org/terasology/world/block/items/BlockItemSystem.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQxMDozNjowOFrOHf5B1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQxMDozNjowOFrOHf5B1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzIwMjI2Mw==", "bodyText": "Seems there must be -=", "url": "https://github.com/MovingBlocks/Terasology/pull/4193#discussion_r503202263", "createdAt": "2020-10-12T10:36:08Z", "author": {"login": "DarkWeird"}, "path": "engine/src/main/java/org/terasology/world/block/items/BlockItemSystem.java", "diffHunk": "@@ -189,30 +190,33 @@ private boolean canPlaceBlock(Block block, Vector3i targetBlock, Vector3i blockP\n         // Prevent players from placing blocks inside their bounding boxes\n         if (!block.isPenetrable()) {\n             Physics physics = CoreRegistry.get(Physics.class);\n-            AABB blockBounds = block.getBounds(blockPos);\n-            Vector3f min = new Vector3f(blockBounds.getMin());\n-            Vector3f max = new Vector3f(blockBounds.getMax());\n+            AABBf blockBounds = JomlUtil.from(block.getBounds(JomlUtil.from(blockPos)));\n \n             /**\n              * Characters can enter other solid objects/blocks for certain amount. This is does to detect collsion\n              * start and end without noise. So if the user walked as close to a block as possible it is only natural\n              * to let it place a block exactly above it even if that technically would mean a collision start.\n              */\n-            min.x += KinematicCharacterMover.HORIZONTAL_PENETRATION;\n-            max.x -= KinematicCharacterMover.HORIZONTAL_PENETRATION;\n-            min.y += KinematicCharacterMover.VERTICAL_PENETRATION;\n-            max.y -= KinematicCharacterMover.VERTICAL_PENETRATION;\n-            min.z += KinematicCharacterMover.HORIZONTAL_PENETRATION;\n-            max.z -= KinematicCharacterMover.HORIZONTAL_PENETRATION;\n+            blockBounds.minX += KinematicCharacterMover.HORIZONTAL_PENETRATION;\n+            blockBounds.maxX -= KinematicCharacterMover.HORIZONTAL_PENETRATION;\n+            blockBounds.minY += KinematicCharacterMover.VERTICAL_PENETRATION;\n+            blockBounds.maxY -= KinematicCharacterMover.VERTICAL_PENETRATION;\n+            blockBounds.minZ += KinematicCharacterMover.HORIZONTAL_PENETRATION;\n+            blockBounds.maxZ -= KinematicCharacterMover.HORIZONTAL_PENETRATION;\n \n             /*\n              * Calculations aren't exact and in the corner cases it is better to let the user place the block.\n              */\n-            min.add(ADDITIONAL_ALLOWED_PENETRATION, ADDITIONAL_ALLOWED_PENETRATION, ADDITIONAL_ALLOWED_PENETRATION);\n-            max.sub(ADDITIONAL_ALLOWED_PENETRATION, ADDITIONAL_ALLOWED_PENETRATION, ADDITIONAL_ALLOWED_PENETRATION);\n+            blockBounds.minX += ADDITIONAL_ALLOWED_PENETRATION;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "541b46e3cff8bd92623245183a2f82b48503e206"}, "originalPosition": 110}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE1MTc2MTE2OnYy", "diffSide": "RIGHT", "path": "engine/src/main/java/org/terasology/physics/bullet/BulletPhysics.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQxMDozODoyN1rOHf5GUg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQxMDozODoyN1rOHf5GUg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzIwMzQxMA==", "bodyText": "Duplication with old method.", "url": "https://github.com/MovingBlocks/Terasology/pull/4193#discussion_r503203410", "createdAt": "2020-10-12T10:38:27Z", "author": {"login": "DarkWeird"}, "path": "engine/src/main/java/org/terasology/physics/bullet/BulletPhysics.java", "diffHunk": "@@ -200,6 +206,30 @@ public short combineGroups(Iterable<CollisionGroup> groups) {\n         return result;\n     }\n \n+    @Override\n+    public List<EntityRef> scanArea(AABBf area, Iterable<CollisionGroup> collisionFilter) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "541b46e3cff8bd92623245183a2f82b48503e206"}, "originalPosition": 25}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 231, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}