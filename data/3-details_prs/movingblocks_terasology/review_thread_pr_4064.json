{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQzOTI2MzEz", "number": 4064, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQyMDozNToyMVrOENaGkw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQyMDo0ODoxOVrOENaTEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgyNDk0NjExOnYy", "diffSide": "RIGHT", "path": "engine-tests/src/test/java/org/terasology/rendering/nui/layers/mainMenu/savedGames/GameProviderTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQyMDozNToyMVrOGwE5yg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QxMDo0NTo0NlrOGwjN_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzA2NTE2Mg==", "bodyText": "isn't this check included in the next one?", "url": "https://github.com/MovingBlocks/Terasology/pull/4064#discussion_r453065162", "createdAt": "2020-07-10T20:35:21Z", "author": {"login": "skaldarnar"}, "path": "engine-tests/src/test/java/org/terasology/rendering/nui/layers/mainMenu/savedGames/GameProviderTest.java", "diffHunk": "@@ -162,6 +178,15 @@ public void getNextGameNameDefaultNoSavesTest() {\n         assertEquals(GAME_1, name);\n     }\n \n+    @Test\n+    public void getNextGameNameCustomNoSavesTest() {\n+        String gameName = \"Custom\";\n+        final String name = GameProvider.getNextGameName(gameName);\n+\n+        assertNotNull(name);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "58bfa5a13f887eb5fa914e86c4fcf4f2d4650b07"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzU2MTg1Mw==", "bodyText": "No.we already have \"saved\" game  in next test . there - not.", "url": "https://github.com/MovingBlocks/Terasology/pull/4064#discussion_r453561853", "createdAt": "2020-07-13T10:45:46Z", "author": {"login": "DarkWeird"}, "path": "engine-tests/src/test/java/org/terasology/rendering/nui/layers/mainMenu/savedGames/GameProviderTest.java", "diffHunk": "@@ -162,6 +178,15 @@ public void getNextGameNameDefaultNoSavesTest() {\n         assertEquals(GAME_1, name);\n     }\n \n+    @Test\n+    public void getNextGameNameCustomNoSavesTest() {\n+        String gameName = \"Custom\";\n+        final String name = GameProvider.getNextGameName(gameName);\n+\n+        assertNotNull(name);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzA2NTE2Mg=="}, "originalCommit": {"oid": "58bfa5a13f887eb5fa914e86c4fcf4f2d4650b07"}, "originalPosition": 57}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgyNDk1MjUyOnYy", "diffSide": "RIGHT", "path": "engine-tests/src/test/java/org/terasology/rendering/nui/layers/mainMenu/savedGames/GameProviderTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQyMDozNzo1OFrOGwE9pQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQyMDozNzo1OFrOGwE9pQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzA2NjE0OQ==", "bodyText": "What do you think of creating a method for this called mimicSaveGame(customSavesFolder, gameName)?", "url": "https://github.com/MovingBlocks/Terasology/pull/4064#discussion_r453066149", "createdAt": "2020-07-10T20:37:58Z", "author": {"login": "skaldarnar"}, "path": "engine-tests/src/test/java/org/terasology/rendering/nui/layers/mainMenu/savedGames/GameProviderTest.java", "diffHunk": "@@ -175,6 +200,21 @@ public void getNextGameNameNumberTest() throws IOException {\n         assertEquals(\"Game 2\", name);\n     }\n \n+    @ParameterizedTest(name = \"getNextGameName(\\\"{0}\\\") -> \\\"{1}\\\"\")\n+    @MethodSource(\"nextGameNamesProvider\")\n+    public void getNextGameNameNumberCustomNameTest(String gameName, String nextGameName) throws IOException {\n+\n+        Path customSaveFolder = TMP_SAVES_FOLDER_PATH.resolve(gameName);\n+        Files.createDirectories(customSaveFolder);\n+        Path manifestFilePath = customSaveFolder.resolve(GameManifest.DEFAULT_FILE_NAME);\n+        writeToFile(manifestFilePath, MANIFEST_EXAMPLE.replace(GAME_1, gameName));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "58bfa5a13f887eb5fa914e86c4fcf4f2d4650b07"}, "originalPosition": 75}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgyNDk1NjAwOnYy", "diffSide": "RIGHT", "path": "engine/src/main/java/org/terasology/rendering/nui/layers/mainMenu/savedGames/GameProvider.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQyMDozOTozNFrOGwE_1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QxMDo0MjoxMlrOGwjGSw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzA2NjcwOA==", "bodyText": "Why is this necessary? shouldn't this be covered by getNextGameName(gameName)?", "url": "https://github.com/MovingBlocks/Terasology/pull/4064#discussion_r453066708", "createdAt": "2020-07-10T20:39:34Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/rendering/nui/layers/mainMenu/savedGames/GameProvider.java", "diffHunk": "@@ -110,21 +111,42 @@ public static boolean isSavesFolderEmpty() {\n     }\n \n     /**\n-     * Generates the game name based on the game number of the last saved game\n+     * Generates the game name based on the game number of the last saved game Uses {@link\n+     * GameProvider#DEFAULT_GAME_NAME_PREFIX} for resolve.\n      */\n     public static String getNextGameName() {\n+        String nextGameName = getNextGameName(DEFAULT_GAME_NAME_PREFIX);\n+        if (nextGameName.equals(DEFAULT_GAME_NAME_PREFIX)) {\n+            return nextGameName + 1;\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "58bfa5a13f887eb5fa914e86c4fcf4f2d4650b07"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzU1OTg4Mw==", "bodyText": "Default name is \"Game 1\"\nIf move this it getNextGameName(gameName) then any custom gamenames will have suffix \" 1\"", "url": "https://github.com/MovingBlocks/Terasology/pull/4064#discussion_r453559883", "createdAt": "2020-07-13T10:42:12Z", "author": {"login": "DarkWeird"}, "path": "engine/src/main/java/org/terasology/rendering/nui/layers/mainMenu/savedGames/GameProvider.java", "diffHunk": "@@ -110,21 +111,42 @@ public static boolean isSavesFolderEmpty() {\n     }\n \n     /**\n-     * Generates the game name based on the game number of the last saved game\n+     * Generates the game name based on the game number of the last saved game Uses {@link\n+     * GameProvider#DEFAULT_GAME_NAME_PREFIX} for resolve.\n      */\n     public static String getNextGameName() {\n+        String nextGameName = getNextGameName(DEFAULT_GAME_NAME_PREFIX);\n+        if (nextGameName.equals(DEFAULT_GAME_NAME_PREFIX)) {\n+            return nextGameName + 1;\n+        }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzA2NjcwOA=="}, "originalCommit": {"oid": "58bfa5a13f887eb5fa914e86c4fcf4f2d4650b07"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgyNDk3ODA5OnYy", "diffSide": "RIGHT", "path": "engine/src/main/java/org/terasology/rendering/nui/layers/mainMenu/savedGames/GameProvider.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQyMDo0ODoxOVrOGwFNMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQyMDo0ODoxOVrOGwFNMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzA3MDEyOQ==", "bodyText": "This prefix match and handling looks a bit shaky to me. We probably should define way more tests to define what we expect here...", "url": "https://github.com/MovingBlocks/Terasology/pull/4064#discussion_r453070129", "createdAt": "2020-07-10T20:48:19Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/rendering/nui/layers/mainMenu/savedGames/GameProvider.java", "diffHunk": "@@ -110,21 +111,42 @@ public static boolean isSavesFolderEmpty() {\n     }\n \n     /**\n-     * Generates the game name based on the game number of the last saved game\n+     * Generates the game name based on the game number of the last saved game Uses {@link\n+     * GameProvider#DEFAULT_GAME_NAME_PREFIX} for resolve.\n      */\n     public static String getNextGameName() {\n+        String nextGameName = getNextGameName(DEFAULT_GAME_NAME_PREFIX);\n+        if (nextGameName.equals(DEFAULT_GAME_NAME_PREFIX)) {\n+            return nextGameName + 1;\n+        }\n+        return nextGameName;\n+    }\n+\n+    /**\n+     * Generates the game name based on the game number of the last saved game\n+     *\n+     * @param gameName will to use as game prefix, if saves contains this game name\n+     * @return next game name with number. Example: \"Game\" -> \"Game 1\", \"Game 1 -> Game 2\"\n+     */\n+    public static String getNextGameName(String gameName) {\n         int gameNumber = 1;\n+        String name = gameName;\n         for (GameInfo info : GameProvider.getSavedGames()) {\n-            if (info.getManifest().getTitle().startsWith(DEFAULT_GAME_NAME_PREFIX)) {\n-                String remainder = info.getManifest().getTitle().substring(DEFAULT_GAME_NAME_PREFIX.length());\n+            if (info.getManifest().getTitle().startsWith(name)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "58bfa5a13f887eb5fa914e86c4fcf4f2d4650b07"}, "originalPosition": 47}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 313, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}