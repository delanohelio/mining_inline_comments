{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA2NDI5MzUw", "number": 3902, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxMTo1ODo0N1rOD0t5dg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxMjowMTo1N1rOD0t-6Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2NjA0NTM0OnYy", "diffSide": "RIGHT", "path": "engine/src/main/java/org/terasology/logic/characters/KinematicCharacterMover.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxMTo1ODo0N1rOGJyhCA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxMTo1ODo0N1rOGJyhCA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjkxODAyNA==", "bodyText": "I suggest using the following for simplification. There is another instance of this below.\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            rotation.rotationYXZ(TeraMath.DEG_TO_RAD * state.getYaw(), 0, 0);\n          \n          \n            \n                            rotation.rotationY(TeraMath.DEG_TO_RAD * state.getYaw());", "url": "https://github.com/MovingBlocks/Terasology/pull/3902#discussion_r412918024", "createdAt": "2020-04-22T11:58:47Z", "author": {"login": "kBlaszczyk"}, "path": "engine/src/main/java/org/terasology/logic/characters/KinematicCharacterMover.java", "diffHunk": "@@ -773,30 +777,28 @@ private void climb(final CharacterStateEvent state, CharacterMoveInputEvent inpu\n             } else {\n                 float pitchAmount = state.isGrounded() ? 45f : 90f;\n                 float pitch = input.getPitch() > 30f ? pitchAmount : -pitchAmount;\n-                rotation = new Quat4f(TeraMath.DEG_TO_RAD * state.getYaw(), TeraMath.DEG_TO_RAD * pitch, 0);\n-                rotation.rotate(desiredVelocity, desiredVelocity);\n+                rotation.rotationYXZ(TeraMath.DEG_TO_RAD * state.getYaw(), TeraMath.DEG_TO_RAD * pitch, 0);\n+                desiredVelocity.rotate(rotation);\n             }\n \n             // looking sidewards from ladder\n         } else if (angleToClimbDirection < Math.PI * 3.0 / 4.0) {\n             float rollAmount = state.isGrounded() ? 45f : 90f;\n             tmp = new Vector3f();\n-            rotation.rotate(climbDir3f, tmp);\n+            climbDir3f.rotate(rotation,tmp);\n             float leftOrRight = tmp.x;\n             float plusOrMinus = (leftOrRight < 0f ? -1.0f : 1.0f) * (climbDir3i.x != 0 ? -1.0f : 1.0f);\n             if (jumpOrCrouchActive) {\n-                rotation = new Quat4f(TeraMath.DEG_TO_RAD * state.getYaw(), 0, 0);\n+                rotation.rotationYXZ(TeraMath.DEG_TO_RAD * state.getYaw(), 0, 0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e0e7b1b3680e00d14eead5e1fcef94e9de3b318a"}, "originalPosition": 429}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2NjA1OTI5OnYy", "diffSide": "RIGHT", "path": "engine/src/main/java/org/terasology/logic/characters/CharacterMovementSystemUtility.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxMjowMTo1N1rOGJypQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxMjowMTo1N1rOGJypQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjkyMDEzMA==", "bodyText": "Could be simplified to:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    Quaternionf rotation = new Quaternionf().rotationYXZ(0f, TeraMath.DEG_TO_RAD * state.getPitch(), 0f);\n          \n          \n            \n                    Quaternionf rotation = new Quaternionf().rotationX(TeraMath.DEG_TO_RAD * state.getPitch());", "url": "https://github.com/MovingBlocks/Terasology/pull/3902#discussion_r412920130", "createdAt": "2020-04-22T12:01:57Z", "author": {"login": "kBlaszczyk"}, "path": "engine/src/main/java/org/terasology/logic/characters/CharacterMovementSystemUtility.java", "diffHunk": "@@ -63,27 +62,27 @@ public void setToState(EntityRef entity, CharacterStateEvent state) {\n         movementComp.footstepDelta = state.getFootstepDelta();\n         entity.saveComponent(movementComp);\n \n-        setPhysicsLocation(entity, state.getPosition());\n+        setPhysicsLocation(entity, JomlUtil.from(state.getPosition()));\n \n         // set the pitch to the character's gaze entity\n-        Quat4f rotation = new Quat4f(0f, TeraMath.DEG_TO_RAD * state.getPitch(), 0f);\n+        Quaternionf rotation = new Quaternionf().rotationYXZ(0f, TeraMath.DEG_TO_RAD * state.getPitch(), 0f);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e0e7b1b3680e00d14eead5e1fcef94e9de3b318a"}, "originalPosition": 26}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 578, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}