{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUyMDg5NTQx", "number": 4089, "title": "feat(FlowLayout): add option for vertical spacing", "bodyText": "Contains\nSummary\nEnhancement of FlowLayout: the option to put vertical spacing in between the items included withing that FlowLayout.\nAdditions\nAdded a variable named verticalSpacing, which can be set within the UI file that used a FlowLayout. I used RowLayout.java's implementation of horizontalSpacing.\nHow to test\nSteps\n\nGet an up-to-date version of the LightAndShadow module\nGo to file LightAndShadow/overrides/Inventory/ui/hud/inventoryHud.ui\nFind where the \"flowLayout\" is located at, and add the line \"verticalSpacing\": 10, (or any number instead of 10). Place the line somewhere between lines with \"type\" and \"contents\", e.g. like this:\n\n\"type\": \"flowLayout\",\n\"id\": \"toolbar\",\n\"verticalSpacing\": 10,\n\"contents\": [\n\nRun your build and create/open a LaS game\nNotice the spacing between the quickslot slots\n\nResult\nThere should be spacing in between the slots, like the image below:\n\nOutstanding before merging\nQ: Should I add the feature to add horizontal spacing as well, considering it is probably done similarly? If yes, should this PR be merged, and then make a new one for the other new feature?", "createdAt": "2020-07-18T19:09:49Z", "url": "https://github.com/MovingBlocks/Terasology/pull/4089", "merged": true, "mergeCommit": {"oid": "b2db69791fb19fff58c3b0cf06bce22371b0a42c"}, "closed": true, "closedAt": "2020-07-20T20:29:20Z", "author": {"login": "stefaniamak"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc2M8JagH2gAyNDUyMDg5NTQxOjQ2NzcxOWE5OWM5ZTg2ZDQxMGYwMDI5ZjI1MTI4YTc4ZWQwMWUxMDA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc23kqagFqTQ1MTkzMTM0Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "467719a99c9e86d410f0029f25128a78ed01e100", "author": {"user": {"login": "stefaniamak", "name": "Stefania Makrygiannaki"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/467719a99c9e86d410f0029f25128a78ed01e100", "committedDate": "2020-07-18T18:42:33Z", "message": "feat(FlowLayout): added option to add vertical spacing between inserted items"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1cfa1a03abcdd0ba4c4e505ef99b63cb25479c39", "author": {"user": {"login": "stefaniamak", "name": "Stefania Makrygiannaki"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/1cfa1a03abcdd0ba4c4e505ef99b63cb25479c39", "committedDate": "2020-07-18T18:47:40Z", "message": "just code formating"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxMDc3MzI5", "url": "https://github.com/MovingBlocks/Terasology/pull/4089#pullrequestreview-451077329", "createdAt": "2020-07-18T19:25:42Z", "commit": {"oid": "1cfa1a03abcdd0ba4c4e505ef99b63cb25479c39"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOFQxOToyNTo0M1rOGzqFVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOFQxOToyNjozOFrOGzqFpw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjgyMDA1NQ==", "bodyText": "This adds a height offset after each element, but I think this should only happen in case there is a \"wrap\", i.e., inside the conditional above.", "url": "https://github.com/MovingBlocks/Terasology/pull/4089#discussion_r456820055", "createdAt": "2020-07-18T19:25:43Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/rendering/nui/layouts/FlowLayout.java", "diffHunk": "@@ -54,14 +62,15 @@ public void onDraw(Canvas canvas) {\n         int heightOffset = 0;\n         for (UIWidget widget : contents) {\n             Vector2i size = canvas.calculatePreferredSize(widget);\n-            if (filledWidth != 0 && filledWidth + size.x  > canvas.size().x) {\n+            if (filledWidth != 0 && filledWidth + size.x > canvas.size().x) {\n                 heightOffset += filledHeight;\n                 filledWidth = 0;\n                 filledHeight = 0;\n             }\n             canvas.drawWidget(widget, Rect2i.createFromMinAndSize(filledWidth, heightOffset, size.x, size.y));\n             filledWidth += size.x;\n             filledHeight = Math.max(filledHeight, size.y);\n+            heightOffset += verticalSpacing;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1cfa1a03abcdd0ba4c4e505ef99b63cb25479c39"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjgyMDEzNQ==", "bodyText": "I think the vertical spacing should be added here, instead:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            heightOffset += filledHeight;\n          \n          \n            \n                            heightOffset += filledHeight;\n          \n          \n            \n                            heightOffset += verticalSpacing;\n          \n      \n    \n    \n  \n\nThis part of the code resets the filled width and height after increasing the height offset, e.g., after wrapping the line.", "url": "https://github.com/MovingBlocks/Terasology/pull/4089#discussion_r456820135", "createdAt": "2020-07-18T19:26:38Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/rendering/nui/layouts/FlowLayout.java", "diffHunk": "@@ -54,14 +62,15 @@ public void onDraw(Canvas canvas) {\n         int heightOffset = 0;\n         for (UIWidget widget : contents) {\n             Vector2i size = canvas.calculatePreferredSize(widget);\n-            if (filledWidth != 0 && filledWidth + size.x  > canvas.size().x) {\n+            if (filledWidth != 0 && filledWidth + size.x > canvas.size().x) {\n                 heightOffset += filledHeight;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1cfa1a03abcdd0ba4c4e505ef99b63cb25479c39"}, "originalPosition": 33}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c65364ac8819f4f671316b8cc002b86a0324b10", "author": {"user": {"login": "stefaniamak", "name": "Stefania Makrygiannaki"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/4c65364ac8819f4f671316b8cc002b86a0324b10", "committedDate": "2020-07-18T19:43:01Z", "message": "Addition of spacing only within wrapping lines, not within each element\n\nCo-authored-by: Tobias Nett <skaldarnar@googlemail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f5035508c378a6ae1b400e884e04723b53a88dac", "author": {"user": {"login": "stefaniamak", "name": "Stefania Makrygiannaki"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/f5035508c378a6ae1b400e884e04723b53a88dac", "committedDate": "2020-07-18T19:47:57Z", "message": "removed duplicated line"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxMzc3NDI2", "url": "https://github.com/MovingBlocks/Terasology/pull/4089#pullrequestreview-451377426", "createdAt": "2020-07-20T07:58:34Z", "commit": {"oid": "f5035508c378a6ae1b400e884e04723b53a88dac"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQwNzo1ODozNVrOGz-PjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQwNzo1ODozNVrOGz-PjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzE1MDM0OQ==", "bodyText": "Good point - that's something I missed before \ud83d\udc4d\nI think you can only multiply with the number of elements in the content if you can make sure that there is only one element per row. However, if you make the flow are bigger, you should see that there might be multiple widgets in the same row before the automatic wrapping kicks in.", "url": "https://github.com/MovingBlocks/Terasology/pull/4089#discussion_r457150349", "createdAt": "2020-07-20T07:58:35Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/rendering/nui/layouts/FlowLayout.java", "diffHunk": "@@ -83,7 +92,7 @@ public Vector2i getPreferredContentSize(Canvas canvas, Vector2i sizeHint) {\n             }\n         }\n         result.x = Math.max(result.x, filledWidth);\n-        result.y += filledHeight;\n+        result.y += filledHeight + verticalSpacing * (contents.size() - 1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f5035508c378a6ae1b400e884e04723b53a88dac"}, "originalPosition": 52}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe82279581ce3c9a061539ddeb48daafabde4c8b", "author": {"user": {"login": "stefaniamak", "name": "Stefania Makrygiannaki"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/fe82279581ce3c9a061539ddeb48daafabde4c8b", "committedDate": "2020-07-20T18:27:49Z", "message": "fix: space is added only whenever a wrapping happens"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "27e0d6e50e29111ec440fe6246b11559082effcc", "author": {"user": {"login": "stefaniamak", "name": "Stefania Makrygiannaki"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/27e0d6e50e29111ec440fe6246b11559082effcc", "committedDate": "2020-07-20T18:49:19Z", "message": "chore: comment corrections"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxOTMxMzQy", "url": "https://github.com/MovingBlocks/Terasology/pull/4089#pullrequestreview-451931342", "createdAt": "2020-07-20T20:22:49Z", "commit": {"oid": "27e0d6e50e29111ec440fe6246b11559082effcc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1378, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}