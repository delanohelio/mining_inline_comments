{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUyMDg5NTQx", "number": 4089, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOFQxOToyNTo0M1rOEPyLNg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQwNzo1ODozNVrOEQBuTA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg0OTg2MTY2OnYy", "diffSide": "RIGHT", "path": "engine/src/main/java/org/terasology/rendering/nui/layouts/FlowLayout.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOFQxOToyNTo0M1rOGzqFVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOFQxOTozODoyNVrOGzqJVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjgyMDA1NQ==", "bodyText": "This adds a height offset after each element, but I think this should only happen in case there is a \"wrap\", i.e., inside the conditional above.", "url": "https://github.com/MovingBlocks/Terasology/pull/4089#discussion_r456820055", "createdAt": "2020-07-18T19:25:43Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/rendering/nui/layouts/FlowLayout.java", "diffHunk": "@@ -54,14 +62,15 @@ public void onDraw(Canvas canvas) {\n         int heightOffset = 0;\n         for (UIWidget widget : contents) {\n             Vector2i size = canvas.calculatePreferredSize(widget);\n-            if (filledWidth != 0 && filledWidth + size.x  > canvas.size().x) {\n+            if (filledWidth != 0 && filledWidth + size.x > canvas.size().x) {\n                 heightOffset += filledHeight;\n                 filledWidth = 0;\n                 filledHeight = 0;\n             }\n             canvas.drawWidget(widget, Rect2i.createFromMinAndSize(filledWidth, heightOffset, size.x, size.y));\n             filledWidth += size.x;\n             filledHeight = Math.max(filledHeight, size.y);\n+            heightOffset += verticalSpacing;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1cfa1a03abcdd0ba4c4e505ef99b63cb25479c39"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjgyMTA3Ng==", "bodyText": "oh indeed, I'll look into adding it only when there is a wrap, and then make a commit for it!", "url": "https://github.com/MovingBlocks/Terasology/pull/4089#discussion_r456821076", "createdAt": "2020-07-18T19:38:25Z", "author": {"login": "stefaniamak"}, "path": "engine/src/main/java/org/terasology/rendering/nui/layouts/FlowLayout.java", "diffHunk": "@@ -54,14 +62,15 @@ public void onDraw(Canvas canvas) {\n         int heightOffset = 0;\n         for (UIWidget widget : contents) {\n             Vector2i size = canvas.calculatePreferredSize(widget);\n-            if (filledWidth != 0 && filledWidth + size.x  > canvas.size().x) {\n+            if (filledWidth != 0 && filledWidth + size.x > canvas.size().x) {\n                 heightOffset += filledHeight;\n                 filledWidth = 0;\n                 filledHeight = 0;\n             }\n             canvas.drawWidget(widget, Rect2i.createFromMinAndSize(filledWidth, heightOffset, size.x, size.y));\n             filledWidth += size.x;\n             filledHeight = Math.max(filledHeight, size.y);\n+            heightOffset += verticalSpacing;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjgyMDA1NQ=="}, "originalCommit": {"oid": "1cfa1a03abcdd0ba4c4e505ef99b63cb25479c39"}, "originalPosition": 40}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg0OTg2MjM0OnYy", "diffSide": "RIGHT", "path": "engine/src/main/java/org/terasology/rendering/nui/layouts/FlowLayout.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOFQxOToyNjozOFrOGzqFpw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOFQxOTo0MjowMFrOGzqKfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjgyMDEzNQ==", "bodyText": "I think the vertical spacing should be added here, instead:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            heightOffset += filledHeight;\n          \n          \n            \n                            heightOffset += filledHeight;\n          \n          \n            \n                            heightOffset += verticalSpacing;\n          \n      \n    \n    \n  \n\nThis part of the code resets the filled width and height after increasing the height offset, e.g., after wrapping the line.", "url": "https://github.com/MovingBlocks/Terasology/pull/4089#discussion_r456820135", "createdAt": "2020-07-18T19:26:38Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/rendering/nui/layouts/FlowLayout.java", "diffHunk": "@@ -54,14 +62,15 @@ public void onDraw(Canvas canvas) {\n         int heightOffset = 0;\n         for (UIWidget widget : contents) {\n             Vector2i size = canvas.calculatePreferredSize(widget);\n-            if (filledWidth != 0 && filledWidth + size.x  > canvas.size().x) {\n+            if (filledWidth != 0 && filledWidth + size.x > canvas.size().x) {\n                 heightOffset += filledHeight;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1cfa1a03abcdd0ba4c4e505ef99b63cb25479c39"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjgyMTM3Mw==", "bodyText": "I see I see, that seems like it, yes. Placed it in that position at the very start (because the other filledHeight was there, not because I had the wrapping in mind), but among my other changes till I reach the correct solution I changed it. I'll commit the suggestion \ud83d\udc4d", "url": "https://github.com/MovingBlocks/Terasology/pull/4089#discussion_r456821373", "createdAt": "2020-07-18T19:42:00Z", "author": {"login": "stefaniamak"}, "path": "engine/src/main/java/org/terasology/rendering/nui/layouts/FlowLayout.java", "diffHunk": "@@ -54,14 +62,15 @@ public void onDraw(Canvas canvas) {\n         int heightOffset = 0;\n         for (UIWidget widget : contents) {\n             Vector2i size = canvas.calculatePreferredSize(widget);\n-            if (filledWidth != 0 && filledWidth + size.x  > canvas.size().x) {\n+            if (filledWidth != 0 && filledWidth + size.x > canvas.size().x) {\n                 heightOffset += filledHeight;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjgyMDEzNQ=="}, "originalCommit": {"oid": "1cfa1a03abcdd0ba4c4e505ef99b63cb25479c39"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1MjQwOTA4OnYy", "diffSide": "RIGHT", "path": "engine/src/main/java/org/terasology/rendering/nui/layouts/FlowLayout.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQwNzo1ODozNVrOGz-PjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQwOToxNDowNFrOG0BtKg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzE1MDM0OQ==", "bodyText": "Good point - that's something I missed before \ud83d\udc4d\nI think you can only multiply with the number of elements in the content if you can make sure that there is only one element per row. However, if you make the flow are bigger, you should see that there might be multiple widgets in the same row before the automatic wrapping kicks in.", "url": "https://github.com/MovingBlocks/Terasology/pull/4089#discussion_r457150349", "createdAt": "2020-07-20T07:58:35Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/rendering/nui/layouts/FlowLayout.java", "diffHunk": "@@ -83,7 +92,7 @@ public Vector2i getPreferredContentSize(Canvas canvas, Vector2i sizeHint) {\n             }\n         }\n         result.x = Math.max(result.x, filledWidth);\n-        result.y += filledHeight;\n+        result.y += filledHeight + verticalSpacing * (contents.size() - 1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f5035508c378a6ae1b400e884e04723b53a88dac"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzE2MTU3Mw==", "bodyText": "Indeed, this is a similar note with the one for adding the spacing in the first place, should have thought about that. I'll look into changing contents.size() - 1 with a variable that counts the rows of the FlowLayout!", "url": "https://github.com/MovingBlocks/Terasology/pull/4089#discussion_r457161573", "createdAt": "2020-07-20T08:14:21Z", "author": {"login": "stefaniamak"}, "path": "engine/src/main/java/org/terasology/rendering/nui/layouts/FlowLayout.java", "diffHunk": "@@ -83,7 +92,7 @@ public Vector2i getPreferredContentSize(Canvas canvas, Vector2i sizeHint) {\n             }\n         }\n         result.x = Math.max(result.x, filledWidth);\n-        result.y += filledHeight;\n+        result.y += filledHeight + verticalSpacing * (contents.size() - 1);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzE1MDM0OQ=="}, "originalCommit": {"oid": "f5035508c378a6ae1b400e884e04723b53a88dac"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzIwNzA4Mg==", "bodyText": "I think it might be enough to just increment result.y by verticalSpacing whenever the spacing is applied to the offset.", "url": "https://github.com/MovingBlocks/Terasology/pull/4089#discussion_r457207082", "createdAt": "2020-07-20T09:14:04Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/rendering/nui/layouts/FlowLayout.java", "diffHunk": "@@ -83,7 +92,7 @@ public Vector2i getPreferredContentSize(Canvas canvas, Vector2i sizeHint) {\n             }\n         }\n         result.x = Math.max(result.x, filledWidth);\n-        result.y += filledHeight;\n+        result.y += filledHeight + verticalSpacing * (contents.size() - 1);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzE1MDM0OQ=="}, "originalCommit": {"oid": "f5035508c378a6ae1b400e884e04723b53a88dac"}, "originalPosition": 52}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 322, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}