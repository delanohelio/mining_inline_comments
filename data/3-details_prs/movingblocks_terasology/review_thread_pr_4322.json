{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM5MDIxOTI3", "number": 4322, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNVQyMDo1MzoyOFrOFJL7nQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNVQyMToxNzowN1rOFJMB_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ1MTc2OTg5OnYy", "diffSide": "RIGHT", "path": "engine-tests/src/test/java/org/terasology/world/generation/facets/BaseBooleanFacetTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNVQyMDo1MzoyOFrOILe3FQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNVQyMDo1MzoyOFrOILe3FQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODkxMDg2OQ==", "bodyText": "Unused import?", "url": "https://github.com/MovingBlocks/Terasology/pull/4322#discussion_r548910869", "createdAt": "2020-12-25T20:53:28Z", "author": {"login": "skaldarnar"}, "path": "engine-tests/src/test/java/org/terasology/world/generation/facets/BaseBooleanFacetTest.java", "diffHunk": "@@ -17,6 +17,7 @@\n package org.terasology.world.generation.facets;\n \n import org.terasology.math.Region3i;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53d33adf323df621215df73fa3d324e56e89bc10"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ1MTc3NjA4OnYy", "diffSide": "RIGHT", "path": "engine/src/main/java/org/terasology/rendering/nui/layers/mainMenu/preview/FacetLayerPreview.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNVQyMTowMzowMFrOILe5pA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNVQyMTowMzowMFrOILe5pA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODkxMTUyNA==", "bodyText": "We can avoid the vector allocation here:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    Vector3i extent = region.getRegion().getSize(new Vector3i());\n          \n          \n            \n                    int width = extent.x;\n          \n          \n            \n                    int height = extent.z;\n          \n          \n            \n                    int width =  region.getRegion().getSizeX();\n          \n          \n            \n                    int height =  region.getRegion().getSizeZ();", "url": "https://github.com/MovingBlocks/Terasology/pull/4322#discussion_r548911524", "createdAt": "2020-12-25T21:03:00Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/rendering/nui/layers/mainMenu/preview/FacetLayerPreview.java", "diffHunk": "@@ -201,7 +201,7 @@ private static Rect2i worldToTileArea(Rect2i area) {\n      */\n     private BufferedImage rasterize(Region region) {\n \n-        Vector3i extent = region.getRegion().size();\n+        Vector3i extent = region.getRegion().getSize(new Vector3i());\n         int width = extent.x;\n         int height = extent.z;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53d33adf323df621215df73fa3d324e56e89bc10"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ1MTc3NzE0OnYy", "diffSide": "RIGHT", "path": "engine/src/main/java/org/terasology/utilities/procedural/SubSampledNoise.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNVQyMTowNDozMlrOILe6FA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNVQyMTowNDozMlrOILe6FA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODkxMTYzNg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    float[] fullData = new float[fullRegion.getSizeX() * fullRegion.getSizeY() * fullRegion.getSizeZ()];\n          \n          \n            \n                    float[] fullData = new float[fullRegion.volume()];", "url": "https://github.com/MovingBlocks/Terasology/pull/4322#discussion_r548911636", "createdAt": "2020-12-25T21:04:32Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/utilities/procedural/SubSampledNoise.java", "diffHunk": "@@ -178,11 +177,11 @@ public float noise(float x, float y, float z) {\n         }\n     }\n \n-    private float[] mapExpand(float[] keyData, Region3i fullRegion) {\n-        float[] fullData = new float[fullRegion.sizeX() * fullRegion.sizeY() * fullRegion.sizeZ()];\n-        int samplesX = fullRegion.sizeX() / sampleRate + 1;\n-        int samplesY = fullRegion.sizeY() / sampleRate + 1;\n-        int samplesZ = fullRegion.sizeZ() / sampleRate + 1;\n+    private float[] mapExpand(float[] keyData, BlockRegion fullRegion) {\n+        float[] fullData = new float[fullRegion.getSizeX() * fullRegion.getSizeY() * fullRegion.getSizeZ()];", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53d33adf323df621215df73fa3d324e56e89bc10"}, "originalPosition": 71}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ1MTc4MDg3OnYy", "diffSide": "RIGHT", "path": "engine/src/main/java/org/terasology/world/chunks/internal/ChunkImpl.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNVQyMTowODo1NlrOILe7ng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNVQyMTowODo1NlrOILe7ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODkxMjAzMA==", "bodyText": "avoid vector creation here and use the individual chunk extents directly.", "url": "https://github.com/MovingBlocks/Terasology/pull/4322#discussion_r548912030", "createdAt": "2020-12-25T21:08:56Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/world/chunks/internal/ChunkImpl.java", "diffHunk": "@@ -102,8 +102,8 @@ public ChunkImpl(Vector3i chunkPos, TeraArray blocks, TeraArray[] extra, BlockMa\n         lightData = new TeraDenseArray8Bit(getChunkSizeX(), getChunkSizeY(), getChunkSizeZ());\n         dirty = true;\n         this.blockManager = blockManager;\n-        region = Region3i.createFromMinAndSize(new Vector3i(chunkPos.x * ChunkConstants.SIZE_X, chunkPos.y * ChunkConstants.SIZE_Y, chunkPos.z * ChunkConstants.SIZE_Z),\n-                ChunkConstants.CHUNK_SIZE);\n+        region = new BlockRegion(chunkPos.x * ChunkConstants.SIZE_X, chunkPos.y * ChunkConstants.SIZE_Y,\n+                chunkPos.z * ChunkConstants.SIZE_Z).setSize(JomlUtil.from(ChunkConstants.CHUNK_SIZE));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53d33adf323df621215df73fa3d324e56e89bc10"}, "originalPosition": 50}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ1MTc4NDQ4OnYy", "diffSide": "RIGHT", "path": "engine/src/main/java/org/terasology/world/generation/facets/base/BaseFieldFacet3D.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNVQyMToxNToyMlrOILe9Gw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNVQyMToxNToyMlrOILe9Gw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODkxMjQxMQ==", "bodyText": "Use .volume directly.", "url": "https://github.com/MovingBlocks/Terasology/pull/4322#discussion_r548912411", "createdAt": "2020-12-25T21:15:22Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/world/generation/facets/base/BaseFieldFacet3D.java", "diffHunk": "@@ -26,9 +27,9 @@\n \n     private float[] data;\n \n-    public BaseFieldFacet3D(Region3i targetRegion, Border3D border) {\n+    public BaseFieldFacet3D(BlockRegion targetRegion, Border3D border) {\n         super(targetRegion, border);\n-        Vector3i size = getRelativeRegion().size();\n+        Vector3i size = getRelativeRegion().getSize(new Vector3i());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53d33adf323df621215df73fa3d324e56e89bc10"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ1MTc4NjIyOnYy", "diffSide": "RIGHT", "path": "engine/src/main/java/org/terasology/world/generation/facets/base/BaseObjectFacet3D.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNVQyMToxNzowN1rOILe9zg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNVQyMToxNzowN1rOILe9zg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODkxMjU5MA==", "bodyText": "same here, avoid allocation and use volume directly", "url": "https://github.com/MovingBlocks/Terasology/pull/4322#discussion_r548912590", "createdAt": "2020-12-25T21:17:07Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/world/generation/facets/base/BaseObjectFacet3D.java", "diffHunk": "@@ -32,9 +31,9 @@\n public abstract class BaseObjectFacet3D<T> extends BaseFacet3D implements ObjectFacet3D<T> {\n     private T[] data;\n \n-    public BaseObjectFacet3D(Region3i targetRegion, Border3D border, Class<T> objectType) {\n+    public BaseObjectFacet3D(BlockRegion targetRegion, Border3D border, Class<T> objectType) {\n         super(targetRegion, border);\n-        Vector3i size = getRelativeRegion().size();\n+        Vector3i size = getRelativeRegion().getSize(new Vector3i());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53d33adf323df621215df73fa3d324e56e89bc10"}, "originalPosition": 28}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 189, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}