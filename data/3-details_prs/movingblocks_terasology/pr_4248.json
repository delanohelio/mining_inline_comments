{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIxMDM5MTAy", "number": 4248, "title": "fix: remove afk screen", "bodyText": "removed the afk screen and moved the console messages to logging instead. having an popup show up every minute or so is kind of obnoxious. probably just enough to mark the player as afk rather then also notify them that they are afk. I don't think there is really a need to convey this to player in the first place. in single player this popup shows up constantly so that needs to be addressed as well. it would need to be disabled in singe player since afk is not really relevant in this case. mostly to signal other players that the given player is not available to interact with.\nref: #3571", "createdAt": "2020-11-14T17:55:57Z", "url": "https://github.com/MovingBlocks/Terasology/pull/4248", "merged": true, "mergeCommit": {"oid": "516ae2435eecc4c30992aa222df8d5d20f599d56"}, "closed": true, "closedAt": "2020-11-16T21:24:23Z", "author": {"login": "pollend"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdcfjIugH2gAyNTIxMDM5MTAyOjIyYzdkMmFiZGEzMmM1OGVjYTYwNGUzMWYzNDhiZDI5ZmQwODU0MmY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABddJC5egFqTUzMTU4MTc2OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "22c7d2abda32c58eca604e31f348bd29fd08542f", "author": {"user": {"login": "pollend", "name": "Michael Pollind"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/22c7d2abda32c58eca604e31f348bd29fd08542f", "committedDate": "2020-11-14T17:52:33Z", "message": "remove afk screen"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMwNTk4NjM0", "url": "https://github.com/MovingBlocks/Terasology/pull/4248#pullrequestreview-530598634", "createdAt": "2020-11-14T19:16:58Z", "commit": {"oid": "22c7d2abda32c58eca604e31f348bd29fd08542f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNFQxOToxNjo1OFrOHzNB2g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNFQyMDowNjoyMVrOHzNU2A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzQ1Mjg5MA==", "bodyText": "Maybe we can/should change this to some higher number, maybe 5 minutes?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                private static final long AFK_TIMEOUT = 60 * 1000;\n          \n          \n            \n                private static final long AFK_TIMEOUT = 5 * 60 * 1000;", "url": "https://github.com/MovingBlocks/Terasology/pull/4248#discussion_r523452890", "createdAt": "2020-11-14T19:16:58Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/logic/afk/AfkClientSystem.java", "diffHunk": "@@ -27,18 +29,18 @@\n @RegisterSystem(RegisterMode.CLIENT)\n public class AfkClientSystem extends BaseComponentSystem {\n \n-    /** Duration in milliseconds (ms). */\n+    private static final Logger logger = LoggerFactory.getLogger(AfkClientSystem.class);\n+\n+    /**\n+     * Duration in milliseconds (ms).\n+     */\n     public static final long AFK_FREEDOM = 5 * 1000;\n \n-    /** Duration in milliseconds (ms). */\n+    /**\n+     * Duration in milliseconds (ms).\n+     */\n     private static final long AFK_TIMEOUT = 60 * 1000;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "22c7d2abda32c58eca604e31f348bd29fd08542f"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzQ1NzcxNw==", "bodyText": "I think some form of confirmation would be nice... Console is the text box in the bottom left, right? I think we could also print to the dev console by returning a String from this command method.", "url": "https://github.com/MovingBlocks/Terasology/pull/4248#discussion_r523457717", "createdAt": "2020-11-14T20:06:05Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/logic/afk/AfkClientSystem.java", "diffHunk": "@@ -77,14 +79,11 @@ public void onCommand() {\n         component.afk = !component.afk;\n         entity.addOrSaveComponent(component);\n         if (component.afk) {\n-            nuiManager.pushScreen(SCREEN_URL, AfkScreen.class).setAfkClientSystem(this);\n-            nuiManager.closeScreen(CONSOLE_SCREEN_URL);\n             enableDiscord();\n-            console.addMessage(\"[AFK] You are AFK now!\");\n+            logger.info(\"[AFK] You are AFK now!\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "22c7d2abda32c58eca604e31f348bd29fd08542f"}, "originalPosition": 62}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzQ1Nzc1Mg==", "bodyText": "Same here, application logs are not visible to the player.", "url": "https://github.com/MovingBlocks/Terasology/pull/4248#discussion_r523457752", "createdAt": "2020-11-14T20:06:21Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/logic/afk/AfkClientSystem.java", "diffHunk": "@@ -77,14 +79,11 @@ public void onCommand() {\n         component.afk = !component.afk;\n         entity.addOrSaveComponent(component);\n         if (component.afk) {\n-            nuiManager.pushScreen(SCREEN_URL, AfkScreen.class).setAfkClientSystem(this);\n-            nuiManager.closeScreen(CONSOLE_SCREEN_URL);\n             enableDiscord();\n-            console.addMessage(\"[AFK] You are AFK now!\");\n+            logger.info(\"[AFK] You are AFK now!\");\n         } else {\n-            nuiManager.closeScreen(SCREEN_URL);\n             disableDiscord();\n-            console.addMessage(\"[AFK] You are no longer AFK!\");\n+            logger.info(\"[AFK] You are no longer AFK!\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "22c7d2abda32c58eca604e31f348bd29fd08542f"}, "originalPosition": 67}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1f94b65eb6a6fdcaffb30f25984f7e16dbc97a46", "author": {"user": {"login": "pollend", "name": "Michael Pollind"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/1f94b65eb6a6fdcaffb30f25984f7e16dbc97a46", "committedDate": "2020-11-14T20:15:59Z", "message": "Update engine/src/main/java/org/terasology/logic/afk/AfkClientSystem.java\n\nCo-authored-by: Tobias Nett <skaldarnar@googlemail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1fd0f8035476e25e929d9f970a984823b10d570c", "author": {"user": {"login": "pollend", "name": "Michael Pollind"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/1fd0f8035476e25e929d9f970a984823b10d570c", "committedDate": "2020-11-14T20:25:15Z", "message": "add consile message for afk but moved error to logging"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a0b69483cb7bf83fae68070fb46ffb8881d057b", "author": {"user": {"login": "pollend", "name": "Michael Pollind"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/2a0b69483cb7bf83fae68070fb46ffb8881d057b", "committedDate": "2020-11-14T20:25:58Z", "message": "Merge branch 'feature/remove-afk-screen' of github.com:pollend/Terasology into feature/remove-afk-screen"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMwNjAzMzQ4", "url": "https://github.com/MovingBlocks/Terasology/pull/4248#pullrequestreview-530603348", "createdAt": "2020-11-14T20:40:00Z", "commit": {"oid": "2a0b69483cb7bf83fae68070fb46ffb8881d057b"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a78f1b6b54dec8355fba841829c25c09f58119f6", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/a78f1b6b54dec8355fba841829c25c09f58119f6", "committedDate": "2020-11-14T20:41:22Z", "message": "Merge branch 'develop' into feature/remove-afk-screen"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2b32ee915b38a70d7f43d5aba31a8abf753874cb", "author": {"user": {"login": "pollend", "name": "Michael Pollind"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/2b32ee915b38a70d7f43d5aba31a8abf753874cb", "committedDate": "2020-11-14T21:04:06Z", "message": "add message back for console command"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a726dbad3a064b1992988608e97d0ad86dadcee3", "author": {"user": {"login": "pollend", "name": "Michael Pollind"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/a726dbad3a064b1992988608e97d0ad86dadcee3", "committedDate": "2020-11-14T21:04:31Z", "message": "Merge branch 'feature/remove-afk-screen' of github.com:pollend/Terasology into feature/remove-afk-screen"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "26c598b4c7d13d07db1282546a1adcf58fef8723", "author": {"user": {"login": "DarkWeird", "name": "Nail Khanipov"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/26c598b4c7d13d07db1282546a1adcf58fef8723", "committedDate": "2020-11-16T05:21:47Z", "message": "Merge branch 'develop' into feature/remove-afk-screen"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e87c1c8cd6e6f156f428644f8e4e4bbb7c88d598", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/e87c1c8cd6e6f156f428644f8e4e4bbb7c88d598", "committedDate": "2020-11-16T18:13:04Z", "message": "Merge branch 'develop' into feature/remove-afk-screen"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMxNTgxNzY4", "url": "https://github.com/MovingBlocks/Terasology/pull/4248#pullrequestreview-531581768", "createdAt": "2020-11-16T18:13:21Z", "commit": {"oid": "26c598b4c7d13d07db1282546a1adcf58fef8723"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1300, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}