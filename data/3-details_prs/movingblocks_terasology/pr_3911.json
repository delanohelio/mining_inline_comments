{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA5MTUxMDIz", "number": 3911, "title": "fix: Add logic check to allow visible water under other blocks", "bodyText": "Contains\nFixes bug #3889\nHow to test\nVerify water surface is visible when under other block as in below photos:\nBefore:\n\nAfter", "createdAt": "2020-04-26T20:19:22Z", "url": "https://github.com/MovingBlocks/Terasology/pull/3911", "merged": true, "mergeCommit": {"oid": "8c27226ef2f4adf2f518231070f35ca869bac82b"}, "closed": true, "closedAt": "2020-04-28T09:59:55Z", "author": {"login": "cvennel"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcbgC1rAH2gAyNDA5MTUxMDIzOmExNTg5YjBlNDA4MDkwYTQxMjhhMTU4ZTIwZWJlYjY5MWUyODhjZDk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcbtpiSAH2gAyNDA5MTUxMDIzOjE3YWUwYjFiZmIzYjI4NDVkNjkzYzE2YzAxN2U3YTliNjAwMGEzMWM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a1589b0e408090a4128a158e20ebeb691e288cd9", "author": {"user": {"login": "cvennel", "name": "Chris Vennel"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/a1589b0e408090a4128a158e20ebeb691e288cd9", "committedDate": "2020-04-26T19:42:06Z", "message": "Add logic check to allow visible water under other blocks"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwNzI5NjQx", "url": "https://github.com/MovingBlocks/Terasology/pull/3911#pullrequestreview-400729641", "createdAt": "2020-04-27T08:23:35Z", "commit": {"oid": "a1589b0e408090a4128a158e20ebeb691e288cd9"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QwODoyMzozNVrOGMW5vQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QwODoyMzozNVrOGMW5vQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTYxMTMyNQ==", "bodyText": "Please add a //TODO: ... comment here to indicate that this only fixes part of a broader problem:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if (currentBlock.isWater() && (side == Side.TOP) && !blockToCheck.isWater()){\n          \n          \n            \n                    //TODO: This only fixes the \"water under block\" issue of the top side not being rendered.\n          \n          \n            \n                    //      Find a more general way to handle this for \"engine:loweredCube\" shapes.\n          \n          \n            \n                    if (currentBlock.isWater() && (side == Side.TOP) && !blockToCheck.isWater()){", "url": "https://github.com/MovingBlocks/Terasology/pull/3911#discussion_r415611325", "createdAt": "2020-04-27T08:23:35Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/rendering/primitives/BlockMeshGeneratorSingleShape.java", "diffHunk": "@@ -142,6 +142,10 @@ private boolean isSideVisibleForBlockTypes(Block blockToCheck, Block currentBloc\n             return false;\n         }\n \n+        if (currentBlock.isWater() && (side == Side.TOP) && !blockToCheck.isWater()){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a1589b0e408090a4128a158e20ebeb691e288cd9"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "17ae0b1bfb3b2845d693c16c017e7a9b6000a31c", "author": {"user": {"login": "cvennel", "name": "Chris Vennel"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/17ae0b1bfb3b2845d693c16c017e7a9b6000a31c", "committedDate": "2020-04-27T11:33:08Z", "message": "Added todo note"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1488, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}