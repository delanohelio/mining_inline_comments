{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQzMTIzMTc0", "number": 4326, "title": "refactor!(BlockRegion): full API overhaul", "bodyText": "Follow up to #4321\nModule PRs\n\n MultiBlock\n IRLCorp\n StructureTemplates\n Rails\n WorkstationCrafting\n ClimateConditions\n MetalRenegades\n LightAndShadow\n DynamicCities\n CombatSystem\n WoodAndStone\n Furnishings\n Smithing\n Health\n MasterOfOreon\n\nfor m in MultiBlock IRLCorp StructureTemplates Rails WorkstationCrafting ClimateConditions MetalRenegades LightAndShadow DynamicCities CombatSystem WoodAndStone Furnishings Smithing Health; do pushd modules/$m; git fetch; git checkout topic/block-region; git pull; popd; done", "createdAt": "2020-12-20T19:52:13Z", "url": "https://github.com/MovingBlocks/Terasology/pull/4326", "merged": true, "mergeCommit": {"oid": "bad53694cc2295377f78103b34ad410bada4f912"}, "closed": true, "closedAt": "2020-12-24T22:24:18Z", "author": {"login": "skaldarnar"}, "timelineItems": {"totalCount": 60, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdoHOfRAH2gAyNTQzMTIzMTc0OmY0NjYwZjEyYWQzOTIwNzg4YTQ0NTE5MTBjODY0MmNjMmQwNGMwNmY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdpa4pSAFqTU1ODcxODMwMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f4660f12ad3920788a4451910c8642cc2d04c06f", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/f4660f12ad3920788a4451910c8642cc2d04c06f", "committedDate": "2020-12-20T20:19:22Z", "message": "chore(BlockRegions): rename methods for creation; add JavaDoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a3008773516cfbbfc9ae2b0f9a63284a5ee5cbb0", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/a3008773516cfbbfc9ae2b0f9a63284a5ee5cbb0", "committedDate": "2020-12-20T20:19:23Z", "message": "doc(BlockRegion): docs for constructors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1fb8b0d861b6b1afba587698fa28c5df9ad01ca3", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/1fb8b0d861b6b1afba587698fa28c5df9ad01ca3", "committedDate": "2020-12-20T20:19:24Z", "message": "doc(BlockRegion): docs for copy-setters and min"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d4395c4c63b53e49b3eb87de212ee55b8682880", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/8d4395c4c63b53e49b3eb87de212ee55b8682880", "committedDate": "2020-12-20T20:19:25Z", "message": "doc(BlockRegion): docs for max"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2b1498fa6b6a17a1cb16ebc74e30410a4398518a", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/2b1498fa6b6a17a1cb16ebc74e30410a4398518a", "committedDate": "2020-12-20T20:19:25Z", "message": "test(BlockRegion): size"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb4ff81103d4e378e11ce00b749ccf18d4860264", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/cb4ff81103d4e378e11ce00b749ccf18d4860264", "committedDate": "2020-12-20T20:19:26Z", "message": "doc(BlockRegion): docs for size"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "50a6c997b83bbdcc7896579d970e0ccb1c074770", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/50a6c997b83bbdcc7896579d970e0ccb1c074770", "committedDate": "2020-12-20T20:19:27Z", "message": "doc(BlockRegion): docs for getBounds and center"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "15b1f09bf2b9829571de34cff4a5d2fd58e19a9c", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/15b1f09bf2b9829571de34cff4a5d2fd58e19a9c", "committedDate": "2020-12-20T20:19:28Z", "message": "doc(BlockRegion): docs for union"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "07a9ffc1a5d231840e0a07221084b6a7a0b8cefd", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/07a9ffc1a5d231840e0a07221084b6a7a0b8cefd", "committedDate": "2020-12-20T20:19:29Z", "message": "doc(BlockRegion): docs for intersect"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1b41e50929a6d0d32feac63100b634362f216be4", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/1b41e50929a6d0d32feac63100b634362f216be4", "committedDate": "2020-12-20T20:14:49Z", "message": "Merge branch 'develop' into docs/BlockRegion"}, "afterCommit": {"oid": "07a9ffc1a5d231840e0a07221084b6a7a0b8cefd", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/07a9ffc1a5d231840e0a07221084b6a7a0b8cefd", "committedDate": "2020-12-20T20:19:29Z", "message": "doc(BlockRegion): docs for intersect"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "23fc48b6c5cf2479ec042c74311e6b903d2fd790", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/23fc48b6c5cf2479ec042c74311e6b903d2fd790", "committedDate": "2020-12-20T20:36:39Z", "message": "doc(BlockRegion): general formatting changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b0c672634e1732f31be51b94f1603e5e9799c2e", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/1b0c672634e1732f31be51b94f1603e5e9799c2e", "committedDate": "2020-12-20T20:41:40Z", "message": "doc(BlockRegion): docs for `translate`"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b092ae047e829c7e6a4651dc7f40df2ac6128e13", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/b092ae047e829c7e6a4651dc7f40df2ac6128e13", "committedDate": "2020-12-20T20:48:49Z", "message": "doc(BlockRegion): docs for `extend`"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e4eb7b525a4bf77e0e9c05f88034064e837d0453", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/e4eb7b525a4bf77e0e9c05f88034064e837d0453", "committedDate": "2020-12-20T20:53:13Z", "message": "doc(BlockRegion): docs for `transform`"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8dd65816f2a39b33106a33a793a20807a7505e3b", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/8dd65816f2a39b33106a33a793a20807a7505e3b", "committedDate": "2020-12-20T21:00:43Z", "message": "doc(BlockRegion): docs for `contains`"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a698a2a11b3289a5469f143b2477a519ff803c26", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/a698a2a11b3289a5469f143b2477a519ff803c26", "committedDate": "2020-12-20T21:04:59Z", "message": "refactor!(BlockRegion): name all `contains` check consistently\n\nBREAKING CHANGE: checks for blocks coordinates and world coordinates where previously separated by names as we assumed their semantics to be different.\n\nThis was changed, e.g., the check returns the same result when used with integer values."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0841d8e2f39b90422e5cb7b6daf02eef05da93ba", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/0841d8e2f39b90422e5cb7b6daf02eef05da93ba", "committedDate": "2020-12-20T21:26:38Z", "message": "doc(BlockRegion): small adjustments for `intersects...` checks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "79925c6c0b386d0731a6f65b7183fe8d0b4267a7", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/79925c6c0b386d0731a6f65b7183fe8d0b4267a7", "committedDate": "2020-12-20T21:28:10Z", "message": "doc(BlockRegion): `equals` and small adjustment to string representation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2MDYzMzQ0", "url": "https://github.com/MovingBlocks/Terasology/pull/4326#pullrequestreview-556063344", "createdAt": "2020-12-20T21:32:10Z", "commit": {"oid": "79925c6c0b386d0731a6f65b7183fe8d0b4267a7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMFQyMTozMjoxMVrOIJH_rw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMFQyMTozMjoxMVrOIJH_rw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjQzOTA4Nw==", "bodyText": "This bit is a bit nasty, as this is currently the only way how to get an invalid region I think...", "url": "https://github.com/MovingBlocks/Terasology/pull/4326#discussion_r546439087", "createdAt": "2020-12-20T21:32:11Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/world/block/BlockRegion.java", "diffHunk": "@@ -528,9 +577,12 @@ public BlockRegion union(EntityRef blockRef) {\n     // ---------------------------------------------------------------------------------------------------------------//\n \n     /**\n-     * calculate the BlockRegion that is intersected between another region\n+     * Compute the intersection of this region with the {@code other} region.\n+     * <p>\n+     * NOTE: If the regions don't intersect this region will become invalid!", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "79925c6c0b386d0731a6f65b7183fe8d0b4267a7"}, "originalPosition": 415}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2MDYzMjgy", "url": "https://github.com/MovingBlocks/Terasology/pull/4326#pullrequestreview-556063282", "createdAt": "2020-12-20T21:31:10Z", "commit": {"oid": "79925c6c0b386d0731a6f65b7183fe8d0b4267a7"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMFQyMTozMToxMFrOIJH_Pw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMFQyMTozMToxMFrOIJH_Pw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjQzODk3NQ==", "bodyText": "this seems kind of redundant. do we need this?", "url": "https://github.com/MovingBlocks/Terasology/pull/4326#discussion_r546438975", "createdAt": "2020-12-20T21:31:10Z", "author": {"login": "pollend"}, "path": "engine/src/main/java/org/terasology/world/block/BlockRegion.java", "diffHunk": "@@ -116,6 +143,11 @@ public BlockRegion set(BlockRegion source) {\n         return this;\n     }\n \n+    /**\n+     * Create a fresh copy of this block region.\n+     *\n+     * @see BlockRegion#BlockRegion(BlockRegion)\n+     */\n     public BlockRegion copy() {\n         return new BlockRegion(this);\n     }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "79925c6c0b386d0731a6f65b7183fe8d0b4267a7"}, "originalPosition": 97}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "57bef6796e22331061c2d0ebcca51c48d946dd87", "author": {"user": {"login": "jdrueckert", "name": null}}, "url": "https://github.com/MovingBlocks/Terasology/commit/57bef6796e22331061c2d0ebcca51c48d946dd87", "committedDate": "2020-12-21T11:40:48Z", "message": "Merge branch 'develop' into docs/BlockRegion"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2MzIwMzkz", "url": "https://github.com/MovingBlocks/Terasology/pull/4326#pullrequestreview-556320393", "createdAt": "2020-12-21T11:43:37Z", "commit": {"oid": "57bef6796e22331061c2d0ebcca51c48d946dd87"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e0f0c7bbd1cc845e106627ad64b3e7a8c9065e4c", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/e0f0c7bbd1cc845e106627ad64b3e7a8c9065e4c", "committedDate": "2020-12-21T12:21:39Z", "message": "feat(BlockRegions): expose INVALID region to be used for reduction"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed1c725d7493b3296dcdc2f8e39401b4fc1444ef", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/ed1c725d7493b3296dcdc2f8e39401b4fc1444ef", "committedDate": "2020-12-21T12:29:15Z", "message": "Merge remote-tracking branch 'origin/docs/BlockRegion' into docs/BlockRegion"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2MzQ2MTM3", "url": "https://github.com/MovingBlocks/Terasology/pull/4326#pullrequestreview-556346137", "createdAt": "2020-12-21T12:32:58Z", "commit": {"oid": "ed1c725d7493b3296dcdc2f8e39401b4fc1444ef"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxMjozMjo1OFrOIJWwXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxMjozMjo1OFrOIJWwXw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjY4MDkyNw==", "bodyText": "I've asked about this on Discord: https://discord.com/channels/270264625419911192/701818347238588561/790546593911799808", "url": "https://github.com/MovingBlocks/Terasology/pull/4326#discussion_r546680927", "createdAt": "2020-12-21T12:32:58Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/world/block/BlockRegions.java", "diffHunk": "@@ -16,98 +17,134 @@\n import java.util.stream.StreamSupport;\n \n public final class BlockRegions {\n+    /**\n+     * An invalid block region.\n+     * <p>\n+     * CAUTION: Behavior for this region may be undeterministic for some operations. Avoid extensive use and encode an\n+     * <i>empty region</i> by other means, e.g., by using {@code null} or {@link java.util.Optional}.\n+     * <p>\n+     * This region may be used as initial value for reductions on block regions. For instance, to compute the union (the\n+     * region that encompasses all regions in some collection {@code regions}) the following Stream-API snippet can be\n+     * used:\n+     * <pre>\n+     *     BlockRegion union = regions.stream().reduce(BlockRegions.INVALID, BlockRegion::union, BlockRegion::union);\n+     * </pre>\n+     */\n+    public static final BlockRegion INVALID = new BlockRegion();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ed1c725d7493b3296dcdc2f8e39401b4fc1444ef"}, "originalPosition": 25}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d9cc440128ca3e8b5e568a596614ddede22fdca2", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/d9cc440128ca3e8b5e568a596614ddede22fdca2", "committedDate": "2020-12-21T12:47:10Z", "message": "feat(BlockRegion): re-add `getSize...` getters (duplicates of `size...`)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f7ac93f0698378f4ad0c7937fd21ca91efa32a49", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/f7ac93f0698378f4ad0c7937fd21ca91efa32a49", "committedDate": "2020-12-21T13:44:19Z", "message": "feat(BlockRegions): add variant with 6 int args for `fromCenterAndExtents`"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2ODAxMTAz", "url": "https://github.com/MovingBlocks/Terasology/pull/4326#pullrequestreview-556801103", "createdAt": "2020-12-22T03:47:58Z", "commit": {"oid": "f7ac93f0698378f4ad0c7937fd21ca91efa32a49"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQwMzo0Nzo1OFrOIJtX5A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQwMzo1MDowNFrOIJtZxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzA1MTQ5Mg==", "bodyText": "I just realized this precondition might be a problem if you setMin above max and then aftewards you setmax. The final region is going to be valid but you're going to hit this exception. Its an extra burden to require the min and max to be set once or always assume that its going to be valid.\nBlockRegions.createFromMinAndMax(0,0,0,0,0,0).setMin(1,1,1).setMax(2,2,2);", "url": "https://github.com/MovingBlocks/Terasology/pull/4326#discussion_r547051492", "createdAt": "2020-12-22T03:47:58Z", "author": {"login": "pollend"}, "path": "engine/src/main/java/org/terasology/world/block/BlockRegion.java", "diffHunk": "@@ -210,31 +245,32 @@ public BlockRegion minZ(int z) {\n     }\n \n     /**\n-     * Get the block coordinate minimum corner.\n+     * Get the block coordinate of the minimum corner.\n      *\n      * @param dest will hold the result\n+     * @return {@code dest} after the result has been set\n      */\n     public Vector3i getMin(Vector3i dest) {\n         return dest.set(minX, minY, minZ);\n     }\n \n     /**\n-     * Sets the minimum coordinate of the first block for <code>this</code> {@link BlockRegion}\n+     * Set the coordinates of the minimum corner for this region.\n      *\n-     * @param min the first coordinate of the first block\n-     * @return this\n+     * @return this region (after modification)\n+     * @throws IllegalArgumentException if any dimension is greater than the respective component of the max\n+     *         corner\n      */\n     public BlockRegion setMin(Vector3ic min) {\n         return this.setMin(min.x(), min.y(), min.z());\n     }\n \n     /**\n-     * sets the minimum block for this {@link BlockRegion}\n+     * Set the coordinates of the minimum corner for this region.\n      *\n-     * @param minX the x coordinate of the first block\n-     * @param minY the y coordinate of the first block\n-     * @param minZ the z coordinate of the first block\n-     * @return this\n+     * @return this region (after modification)\n+     * @throws IllegalArgumentException if any dimension is greater than the respective component of the max\n+     *         corner\n      */\n     public BlockRegion setMin(int minX, int minY, int minZ) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f7ac93f0698378f4ad0c7937fd21ca91efa32a49"}, "originalPosition": 177}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzA1MTc1OQ==", "bodyText": "similar problem here.", "url": "https://github.com/MovingBlocks/Terasology/pull/4326#discussion_r547051759", "createdAt": "2020-12-22T03:49:03Z", "author": {"login": "pollend"}, "path": "engine/src/main/java/org/terasology/world/block/BlockRegion.java", "diffHunk": "@@ -267,9 +303,10 @@ public int getMaxX() {\n     }\n \n     /**\n-     * set the maximum coordinate of the second block x\n+     * Set the maximum x-coordinate of this region.\n      *\n-     * @return the minX\n+     * @return this region (after modification)\n+     * @throws IllegalArgumentException if {@code x} is smaller than the minimum x-coordinate\n      */\n     public BlockRegion maxX(int x) {\n         Preconditions.checkArgument(x >= this.minX || this.minX == Integer.MAX_VALUE);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f7ac93f0698378f4ad0c7937fd21ca91efa32a49"}, "originalPosition": 191}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzA1MTk3Mw==", "bodyText": "There is really no need to offer both. it's either getSizeX or sizeX().", "url": "https://github.com/MovingBlocks/Terasology/pull/4326#discussion_r547051973", "createdAt": "2020-12-22T03:50:04Z", "author": {"login": "pollend"}, "path": "engine/src/main/java/org/terasology/world/block/BlockRegion.java", "diffHunk": "@@ -413,34 +455,58 @@ public Vector3i getSize(Vector3i dest) {\n     }\n \n     /**\n-     * The number of blocks on the X axis\n-     *\n-     * @return number of blocks in the X axis\n+     * The number of blocks on the x axis.\n      */\n     public int sizeX() {\n         return this.maxX - this.minX + 1;\n     }\n \n     /**\n-     * The number of blocks on the Y axis\n-     *\n-     * @return number of blocks in the Y axis\n+     * @see #sizeX()\n+     */\n+    public int getSizeX() {\n+        return sizeX();\n+    }\n+\n+    /**\n+     * The number of blocks on the y axis.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f7ac93f0698378f4ad0c7937fd21ca91efa32a49"}, "originalPosition": 318}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a5ce0758fffb146e617c841aabc95ab16e8d56c0", "author": {"user": {"login": "jdrueckert", "name": null}}, "url": "https://github.com/MovingBlocks/Terasology/commit/a5ce0758fffb146e617c841aabc95ab16e8d56c0", "committedDate": "2020-12-22T11:11:42Z", "message": "Merge branch 'develop' into docs/BlockRegion"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "967b037582324f6aff818f65b85e3b9ccd71f386", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/967b037582324f6aff818f65b85e3b9ccd71f386", "committedDate": "2020-12-23T14:00:10Z", "message": "feat(BlockRegion): add immutable interface `BlockRegionc`"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89c958e8bd8b32e51c9d6572ae9a878c0d8db2ff", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/89c958e8bd8b32e51c9d6572ae9a878c0d8db2ff", "committedDate": "2020-12-23T15:25:49Z", "message": "doc(BlockRegion): add JavaDoc for BlockRegionc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6799c3ad88cc478e6dfeac8279416677b54c833e", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/6799c3ad88cc478e6dfeac8279416677b54c833e", "committedDate": "2020-12-23T15:27:26Z", "message": "refactor(BlockRegion): implement BlockRegion in terms of BlockRegionc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8a66bfd95203c932c0f4c185819f381a9b00e896", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/8a66bfd95203c932c0f4c185819f381a9b00e896", "committedDate": "2020-12-23T15:45:00Z", "message": "doc(BlockRegion): add docs for BlockRegionc::iterator"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b8f32f559246faae7ed6c4931353edab7490a2a6", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/b8f32f559246faae7ed6c4931353edab7490a2a6", "committedDate": "2020-12-23T16:17:46Z", "message": "refactor!(BlockRegion): remove BlockRegions and BlockRegionIterable"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b9e4b9204f22b1a66258d1bc76f644ba3edecfdd", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/b9e4b9204f22b1a66258d1bc76f644ba3edecfdd", "committedDate": "2020-12-23T16:58:16Z", "message": "refactor!(BlockRegion): use BlockRegionc (super type) instead of specific subtype"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "533fd585860012b1ee8b3d136c67e68d95909278", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/533fd585860012b1ee8b3d136c67e68d95909278", "committedDate": "2020-12-23T16:58:45Z", "message": "test(BlockRegion): update test cases; merge BlockRegionIterableTest into BlockRegionTest"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4MTczMjkw", "url": "https://github.com/MovingBlocks/Terasology/pull/4326#pullrequestreview-558173290", "createdAt": "2020-12-23T18:50:52Z", "commit": {"oid": "533fd585860012b1ee8b3d136c67e68d95909278"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QxODo1MDo1MlrOIKvkIQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QxODo1NTozMVrOIKvzKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODEzNTk2OQ==", "bodyText": "@pollend would you be okay with addToMin?", "url": "https://github.com/MovingBlocks/Terasology/pull/4326#discussion_r548135969", "createdAt": "2020-12-23T18:50:52Z", "author": {"login": "jdrueckert"}, "path": "engine/src/main/java/org/terasology/world/block/BlockRegion.java", "diffHunk": "@@ -93,550 +114,397 @@\n      *\n      * @param source the block region to copy.\n      */\n-    public BlockRegion(BlockRegion source) {\n+    public BlockRegion(BlockRegionc source) {\n         this.set(source);\n     }\n \n+    // -- ITERABLE ---------------------------------------------------------------------------------------------------//\n+\n+    @Override\n+    public Iterator<Vector3ic> iterator() {\n+        return new Iterator<Vector3ic>() {\n+            private Vector3i current = null;\n+            private final Vector3i next = getMin(new Vector3i());\n+\n+            public boolean findNext() {\n+                if (current.equals(next)) {\n+                    next.z++;\n+                    if (next.z > maxZ) {\n+                        next.z = minZ;\n+                        next.y++;\n+                        if (next.y > maxY) {\n+                            next.y = minY;\n+                            next.x++;\n+                        }\n+                    }\n+                    return contains(next);\n+                }\n+                return true;\n+            }\n+\n+            @Override\n+            public boolean hasNext() {\n+                if (!isValid()) {\n+                    return false;\n+                }\n+                if (current == null) {\n+                    return true;\n+                }\n+\n+                if (current.equals(next)) {\n+                    return findNext();\n+                }\n+                return contains(next);\n+            }\n+\n+            @Override\n+            public Vector3ic next() {\n+                if (current == null) {\n+                    current = new Vector3i(next);\n+                    return next;\n+                }\n+\n+                if (current.equals(next)) {\n+                    if (findNext()) {\n+                        return next;\n+                    }\n+                    return null;\n+                }\n+                current.set(next);\n+                return next;\n+            }\n+        };\n+    }\n+\n     // -- GETTERS & SETTERS ------------------------------------------------------------------------------------------//\n \n     /**\n-     * set source to current region\n+     * Reset both the minimum and maximum corner of this region.\n      *\n-     * @param source the source region\n-     * @return this\n+     * @return this region (after modification)\n+     * @throws IllegalArgumentException if the given coordinates for min and max are {@link #isValid()\n+     *         invalid}.\n      */\n-    public BlockRegion set(BlockRegion source) {\n-        this.minX = source.minX;\n-        this.minY = source.minY;\n-        this.minZ = source.minZ;\n-\n-        this.maxX = source.maxX;\n-        this.maxY = source.maxY;\n-        this.maxZ = source.maxZ;\n-        return this;\n-    }\n+    public BlockRegion set(int minX, int minY, int minZ, int maxX, int maxY, int maxZ) {\n+        Preconditions.checkArgument(minX <= maxX || (minX == INVALID.minX() && maxX == INVALID.maxX()));\n+        Preconditions.checkArgument(minY <= maxY || (minY == INVALID.minY() && maxY == INVALID.maxY()));\n+        Preconditions.checkArgument(minZ <= maxZ || (minZ == INVALID.minZ() && maxZ == INVALID.maxZ()));\n+        this.minX = minX;\n+        this.minY = minY;\n+        this.minZ = minZ;\n \n-    public BlockRegion copy() {\n-        return new BlockRegion(this);\n+        this.maxX = maxX;\n+        this.maxY = maxY;\n+        this.maxZ = maxZ;\n+        return this;\n     }\n \n-    // -- min --------------------------------------------------------------------------------------------------------//\n-\n     /**\n-     * The x-coordinate of the minimum corner\n+     * Reset both the minimum and maximum corner of this region.\n+     *\n+     * @return this region (after modification)\n+     * @throws IllegalArgumentException if the given coordinates for min and max are {@link #isValid()\n+     *         invalid}.\n      */\n-    public int minX() {\n-        return this.minX;\n+    public BlockRegion set(Vector3ic min, Vector3ic max) {\n+        return this.set(min.x(), min.y(), min.z(), max.x(), max.y(), max.z());\n     }\n \n     /**\n-     * the minimum coordinate of the first block x\n+     * Reset this region to have the same minimum and maximum corner as the {@code source} region.\n      *\n-     * @return the minimum coordinate x\n-     * @deprecated use {@link #minX()}\n+     * @return this region (after modification)\n+     * @throws IllegalArgumentException if the given coordinates for min and max are {@link #isValid()\n+     *         invalid}.\n      */\n-    @Deprecated\n-    public int getMinX() {\n-        return this.minX;\n+    public BlockRegion set(BlockRegionc source) {\n+        return this.set(source.minX(), source.minY(), source.minZ(), source.maxX(), source.maxY(), source.maxZ());\n     }\n \n-    /**\n-     * set the minimum coordinate of the first block x\n-     *\n-     * @return the minX\n-     */\n-    public BlockRegion minX(int x) {\n-        Preconditions.checkArgument(x <= this.maxX || this.maxX == Integer.MIN_VALUE);\n-        this.minX = x;\n-        return this;\n+    // -- min --------------------------------------------------------------------------------------------------------//\n+\n+    @Override\n+    public int minX() {\n+        return this.minX;\n     }\n \n-    /**\n-     * The y-coordinate of the minimum corner\n-     */\n+    @Override\n     public int minY() {\n         return this.minY;\n     }\n \n-    /**\n-     * the minimum coordinate of the first block y\n-     *\n-     * @return the minimum coordinate y\n-     * @deprecated use {@link #minY()}\n-     */\n-    @Deprecated\n-    public int getMinY() {\n-        return this.minY;\n+    @Override\n+    public int minZ() {\n+        return this.minZ;\n     }\n \n-    /**\n-     * set the minimum coordinate of the first block y\n-     *\n-     * @return the minY\n-     */\n-    public BlockRegion minY(int y) {\n-        Preconditions.checkArgument(y <= this.maxY || this.maxY == Integer.MIN_VALUE);\n-        this.minY = y;\n-        return this;\n+    @Override\n+    public BlockRegion minX(int x, BlockRegion dest) {\n+        Preconditions.checkArgument(x <= this.maxX || this.maxX == Integer.MIN_VALUE);\n+        dest.minX = x;\n+        return dest;\n     }\n \n-    /**\n-     * The z-coordinate of the minimum corner\n-     */\n-    public int minZ() {\n-        return this.minZ;\n+    public BlockRegion minX(int x) {\n+        return this.minX(x, this);\n     }\n \n-    /**\n-     * the minimum coordinate of the first block z\n-     *\n-     * @return the minimum coordinate z\n-     * @deprecated use {@link #minZ()}\n-     */\n-    @Deprecated\n-    public int getMinZ() {\n-        return this.minZ;\n+    @Override\n+    public BlockRegion minY(int y, BlockRegion dest) {\n+        Preconditions.checkArgument(y <= this.maxY || this.maxY == Integer.MIN_VALUE);\n+        dest.minY = y;\n+        return dest;\n     }\n \n-    /**\n-     * set the minimum coordinate of the first block z\n-     *\n-     * @return the minZ\n-     */\n-    public BlockRegion minZ(int z) {\n-        Preconditions.checkArgument(z <= this.maxZ || this.maxZ == Integer.MIN_VALUE);\n-        this.minZ = z;\n-        return this;\n+    public BlockRegion minY(int y) {\n+        return this.minY(y, this);\n     }\n \n-    /**\n-     * Get the block coordinate minimum corner.\n-     *\n-     * @param dest will hold the result\n-     */\n-    public Vector3i getMin(Vector3i dest) {\n-        return dest.set(minX, minY, minZ);\n+    @Override\n+    public BlockRegion minZ(int z, BlockRegion dest) {\n+        Preconditions.checkArgument(z <= this.maxZ || this.maxZ == Integer.MIN_VALUE);\n+        dest.minZ = z;\n+        return dest;\n     }\n \n-    /**\n-     * Sets the minimum coordinate of the first block for <code>this</code> {@link BlockRegion}\n-     *\n-     * @param min the first coordinate of the first block\n-     * @return this\n-     */\n-    public BlockRegion setMin(Vector3ic min) {\n-        return this.setMin(min.x(), min.y(), min.z());\n+    public BlockRegion minZ(int z) {\n+        return this.minZ(z, this);\n     }\n \n-    /**\n-     * sets the minimum block for this {@link BlockRegion}\n-     *\n-     * @param minX the x coordinate of the first block\n-     * @param minY the y coordinate of the first block\n-     * @param minZ the z coordinate of the first block\n-     * @return this\n-     */\n-    public BlockRegion setMin(int minX, int minY, int minZ) {\n+    @Override\n+    public BlockRegion setMin(int minX, int minY, int minZ, BlockRegion dest) {\n         Preconditions.checkArgument(minX <= this.maxX || this.maxX == Integer.MIN_VALUE);\n         Preconditions.checkArgument(minY <= this.maxY || this.maxX == Integer.MIN_VALUE);\n         Preconditions.checkArgument(minZ <= this.maxZ || this.maxX == Integer.MIN_VALUE);\n-        this.minX = minX;\n-        this.minY = minY;\n-        this.minZ = minZ;\n-        return this;\n+        dest.minX = minX;\n+        dest.minY = minY;\n+        dest.minZ = minZ;\n+        return dest;\n     }\n \n-    // -- max --------------------------------------------------------------------------------------------------------//\n-\n-    /**\n-     * The x-coordinate of the maximum corner\n-     */\n-    public int maxX() {\n-        return this.maxX;\n+    public BlockRegion setMin(int x, int y, int z) {\n+        return this.setMin(x, y, z, this);\n     }\n \n-    /**\n-     * the maximum coordinate of the second block x\n-     *\n-     * @return the minimum coordinate x\n-     * @deprecated use {@link #maxX()}\n-     */\n-    @Deprecated\n-    public int getMaxX() {\n-        return this.maxX;\n+    public BlockRegion setMin(Vector3ic min) {\n+        return this.setMin(min, this);\n     }\n \n-    /**\n-     * set the maximum coordinate of the second block x\n-     *\n-     * @return the minX\n-     */\n-    public BlockRegion maxX(int x) {\n-        Preconditions.checkArgument(x >= this.minX || this.minX == Integer.MAX_VALUE);\n-        this.maxX = x;\n-        return this;\n+    public BlockRegion addMin(int dx, int dy, int dz) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "533fd585860012b1ee8b3d136c67e68d95909278"}, "originalPosition": 412}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODEzNjMxNg==", "bodyText": "@pollend would you be okay with addToMax?", "url": "https://github.com/MovingBlocks/Terasology/pull/4326#discussion_r548136316", "createdAt": "2020-12-23T18:51:16Z", "author": {"login": "jdrueckert"}, "path": "engine/src/main/java/org/terasology/world/block/BlockRegion.java", "diffHunk": "@@ -93,550 +114,397 @@\n      *\n      * @param source the block region to copy.\n      */\n-    public BlockRegion(BlockRegion source) {\n+    public BlockRegion(BlockRegionc source) {\n         this.set(source);\n     }\n \n+    // -- ITERABLE ---------------------------------------------------------------------------------------------------//\n+\n+    @Override\n+    public Iterator<Vector3ic> iterator() {\n+        return new Iterator<Vector3ic>() {\n+            private Vector3i current = null;\n+            private final Vector3i next = getMin(new Vector3i());\n+\n+            public boolean findNext() {\n+                if (current.equals(next)) {\n+                    next.z++;\n+                    if (next.z > maxZ) {\n+                        next.z = minZ;\n+                        next.y++;\n+                        if (next.y > maxY) {\n+                            next.y = minY;\n+                            next.x++;\n+                        }\n+                    }\n+                    return contains(next);\n+                }\n+                return true;\n+            }\n+\n+            @Override\n+            public boolean hasNext() {\n+                if (!isValid()) {\n+                    return false;\n+                }\n+                if (current == null) {\n+                    return true;\n+                }\n+\n+                if (current.equals(next)) {\n+                    return findNext();\n+                }\n+                return contains(next);\n+            }\n+\n+            @Override\n+            public Vector3ic next() {\n+                if (current == null) {\n+                    current = new Vector3i(next);\n+                    return next;\n+                }\n+\n+                if (current.equals(next)) {\n+                    if (findNext()) {\n+                        return next;\n+                    }\n+                    return null;\n+                }\n+                current.set(next);\n+                return next;\n+            }\n+        };\n+    }\n+\n     // -- GETTERS & SETTERS ------------------------------------------------------------------------------------------//\n \n     /**\n-     * set source to current region\n+     * Reset both the minimum and maximum corner of this region.\n      *\n-     * @param source the source region\n-     * @return this\n+     * @return this region (after modification)\n+     * @throws IllegalArgumentException if the given coordinates for min and max are {@link #isValid()\n+     *         invalid}.\n      */\n-    public BlockRegion set(BlockRegion source) {\n-        this.minX = source.minX;\n-        this.minY = source.minY;\n-        this.minZ = source.minZ;\n-\n-        this.maxX = source.maxX;\n-        this.maxY = source.maxY;\n-        this.maxZ = source.maxZ;\n-        return this;\n-    }\n+    public BlockRegion set(int minX, int minY, int minZ, int maxX, int maxY, int maxZ) {\n+        Preconditions.checkArgument(minX <= maxX || (minX == INVALID.minX() && maxX == INVALID.maxX()));\n+        Preconditions.checkArgument(minY <= maxY || (minY == INVALID.minY() && maxY == INVALID.maxY()));\n+        Preconditions.checkArgument(minZ <= maxZ || (minZ == INVALID.minZ() && maxZ == INVALID.maxZ()));\n+        this.minX = minX;\n+        this.minY = minY;\n+        this.minZ = minZ;\n \n-    public BlockRegion copy() {\n-        return new BlockRegion(this);\n+        this.maxX = maxX;\n+        this.maxY = maxY;\n+        this.maxZ = maxZ;\n+        return this;\n     }\n \n-    // -- min --------------------------------------------------------------------------------------------------------//\n-\n     /**\n-     * The x-coordinate of the minimum corner\n+     * Reset both the minimum and maximum corner of this region.\n+     *\n+     * @return this region (after modification)\n+     * @throws IllegalArgumentException if the given coordinates for min and max are {@link #isValid()\n+     *         invalid}.\n      */\n-    public int minX() {\n-        return this.minX;\n+    public BlockRegion set(Vector3ic min, Vector3ic max) {\n+        return this.set(min.x(), min.y(), min.z(), max.x(), max.y(), max.z());\n     }\n \n     /**\n-     * the minimum coordinate of the first block x\n+     * Reset this region to have the same minimum and maximum corner as the {@code source} region.\n      *\n-     * @return the minimum coordinate x\n-     * @deprecated use {@link #minX()}\n+     * @return this region (after modification)\n+     * @throws IllegalArgumentException if the given coordinates for min and max are {@link #isValid()\n+     *         invalid}.\n      */\n-    @Deprecated\n-    public int getMinX() {\n-        return this.minX;\n+    public BlockRegion set(BlockRegionc source) {\n+        return this.set(source.minX(), source.minY(), source.minZ(), source.maxX(), source.maxY(), source.maxZ());\n     }\n \n-    /**\n-     * set the minimum coordinate of the first block x\n-     *\n-     * @return the minX\n-     */\n-    public BlockRegion minX(int x) {\n-        Preconditions.checkArgument(x <= this.maxX || this.maxX == Integer.MIN_VALUE);\n-        this.minX = x;\n-        return this;\n+    // -- min --------------------------------------------------------------------------------------------------------//\n+\n+    @Override\n+    public int minX() {\n+        return this.minX;\n     }\n \n-    /**\n-     * The y-coordinate of the minimum corner\n-     */\n+    @Override\n     public int minY() {\n         return this.minY;\n     }\n \n-    /**\n-     * the minimum coordinate of the first block y\n-     *\n-     * @return the minimum coordinate y\n-     * @deprecated use {@link #minY()}\n-     */\n-    @Deprecated\n-    public int getMinY() {\n-        return this.minY;\n+    @Override\n+    public int minZ() {\n+        return this.minZ;\n     }\n \n-    /**\n-     * set the minimum coordinate of the first block y\n-     *\n-     * @return the minY\n-     */\n-    public BlockRegion minY(int y) {\n-        Preconditions.checkArgument(y <= this.maxY || this.maxY == Integer.MIN_VALUE);\n-        this.minY = y;\n-        return this;\n+    @Override\n+    public BlockRegion minX(int x, BlockRegion dest) {\n+        Preconditions.checkArgument(x <= this.maxX || this.maxX == Integer.MIN_VALUE);\n+        dest.minX = x;\n+        return dest;\n     }\n \n-    /**\n-     * The z-coordinate of the minimum corner\n-     */\n-    public int minZ() {\n-        return this.minZ;\n+    public BlockRegion minX(int x) {\n+        return this.minX(x, this);\n     }\n \n-    /**\n-     * the minimum coordinate of the first block z\n-     *\n-     * @return the minimum coordinate z\n-     * @deprecated use {@link #minZ()}\n-     */\n-    @Deprecated\n-    public int getMinZ() {\n-        return this.minZ;\n+    @Override\n+    public BlockRegion minY(int y, BlockRegion dest) {\n+        Preconditions.checkArgument(y <= this.maxY || this.maxY == Integer.MIN_VALUE);\n+        dest.minY = y;\n+        return dest;\n     }\n \n-    /**\n-     * set the minimum coordinate of the first block z\n-     *\n-     * @return the minZ\n-     */\n-    public BlockRegion minZ(int z) {\n-        Preconditions.checkArgument(z <= this.maxZ || this.maxZ == Integer.MIN_VALUE);\n-        this.minZ = z;\n-        return this;\n+    public BlockRegion minY(int y) {\n+        return this.minY(y, this);\n     }\n \n-    /**\n-     * Get the block coordinate minimum corner.\n-     *\n-     * @param dest will hold the result\n-     */\n-    public Vector3i getMin(Vector3i dest) {\n-        return dest.set(minX, minY, minZ);\n+    @Override\n+    public BlockRegion minZ(int z, BlockRegion dest) {\n+        Preconditions.checkArgument(z <= this.maxZ || this.maxZ == Integer.MIN_VALUE);\n+        dest.minZ = z;\n+        return dest;\n     }\n \n-    /**\n-     * Sets the minimum coordinate of the first block for <code>this</code> {@link BlockRegion}\n-     *\n-     * @param min the first coordinate of the first block\n-     * @return this\n-     */\n-    public BlockRegion setMin(Vector3ic min) {\n-        return this.setMin(min.x(), min.y(), min.z());\n+    public BlockRegion minZ(int z) {\n+        return this.minZ(z, this);\n     }\n \n-    /**\n-     * sets the minimum block for this {@link BlockRegion}\n-     *\n-     * @param minX the x coordinate of the first block\n-     * @param minY the y coordinate of the first block\n-     * @param minZ the z coordinate of the first block\n-     * @return this\n-     */\n-    public BlockRegion setMin(int minX, int minY, int minZ) {\n+    @Override\n+    public BlockRegion setMin(int minX, int minY, int minZ, BlockRegion dest) {\n         Preconditions.checkArgument(minX <= this.maxX || this.maxX == Integer.MIN_VALUE);\n         Preconditions.checkArgument(minY <= this.maxY || this.maxX == Integer.MIN_VALUE);\n         Preconditions.checkArgument(minZ <= this.maxZ || this.maxX == Integer.MIN_VALUE);\n-        this.minX = minX;\n-        this.minY = minY;\n-        this.minZ = minZ;\n-        return this;\n+        dest.minX = minX;\n+        dest.minY = minY;\n+        dest.minZ = minZ;\n+        return dest;\n     }\n \n-    // -- max --------------------------------------------------------------------------------------------------------//\n-\n-    /**\n-     * The x-coordinate of the maximum corner\n-     */\n-    public int maxX() {\n-        return this.maxX;\n+    public BlockRegion setMin(int x, int y, int z) {\n+        return this.setMin(x, y, z, this);\n     }\n \n-    /**\n-     * the maximum coordinate of the second block x\n-     *\n-     * @return the minimum coordinate x\n-     * @deprecated use {@link #maxX()}\n-     */\n-    @Deprecated\n-    public int getMaxX() {\n-        return this.maxX;\n+    public BlockRegion setMin(Vector3ic min) {\n+        return this.setMin(min, this);\n     }\n \n-    /**\n-     * set the maximum coordinate of the second block x\n-     *\n-     * @return the minX\n-     */\n-    public BlockRegion maxX(int x) {\n-        Preconditions.checkArgument(x >= this.minX || this.minX == Integer.MAX_VALUE);\n-        this.maxX = x;\n-        return this;\n+    public BlockRegion addMin(int dx, int dy, int dz) {\n+        return this.addMin(dx, dy, dz, this);\n     }\n \n-    /**\n-     * The y-coordinate of the maximum corner\n-     */\n-    public int maxY() {\n-        return this.maxY;\n+    public BlockRegion addMin(Vector3ic dmin) {\n+        return this.addMin(dmin, this);\n     }\n \n-    /**\n-     * the maximum coordinate of the second block y\n-     *\n-     * @return the minimum coordinate y\n-     * @deprecated use {@link #maxY()}\n-     */\n-    @Deprecated\n-    public int getMaxY() {\n-        return this.maxY;\n+\n+    // -- max --------------------------------------------------------------------------------------------------------//\n+\n+    @Override\n+    public int maxX() {\n+        return this.maxX;\n     }\n \n-    /**\n-     * set the maximum coordinate of the second block y\n-     *\n-     * @return the minY\n-     */\n-    public BlockRegion maxY(int y) {\n-        Preconditions.checkArgument(y >= this.minY || this.minY == Integer.MAX_VALUE);\n-        this.maxY = y;\n-        return this;\n+    @Override\n+    public int maxY() {\n+        return this.maxY;\n     }\n \n-    /**\n-     * The z-coordinate of the maximum corner\n-     */\n+    @Override\n     public int maxZ() {\n         return this.maxZ;\n     }\n \n-    /**\n-     * the maximum coordinate of the second block z\n-     *\n-     * @return the minimum coordinate z\n-     * @deprecated use {@link #maxZ()}\n-     */\n-    @Deprecated\n-    public int getMaxZ() {\n-        return this.maxZ;\n+    @Override\n+    public BlockRegion maxX(int x, BlockRegion dest) {\n+        Preconditions.checkArgument(x >= this.minX || this.minX == Integer.MAX_VALUE);\n+        dest.maxX = x;\n+        return dest;\n     }\n \n-    /**\n-     * set the maximum coordinate of the second block z\n-     *\n-     * @return the minZ\n-     */\n-    public BlockRegion maxZ(int z) {\n-        Preconditions.checkArgument(z >= this.minZ || this.minZ == Integer.MAX_VALUE);\n-        this.maxZ = z;\n-        return this;\n+    public BlockRegion maxX(int x) {\n+        return this.maxX(x, this);\n     }\n \n-    /**\n-     * Get the block coordinate of the maximum corner.\n-     *\n-     * @param dest will hold the result\n-     */\n-    public Vector3i getMax(Vector3i dest) {\n-        return dest.set(maxX, maxY, maxZ);\n+    @Override\n+    public BlockRegion maxY(int y, BlockRegion dest) {\n+        Preconditions.checkArgument(y >= this.minY || this.minY == Integer.MAX_VALUE);\n+        dest.maxY = y;\n+        return dest;\n     }\n \n-    /**\n-     * Sets the maximum coordinate of the second block for <code>this</code> {@link BlockRegion}\n-     *\n-     * @param max the second coordinate of the second block\n-     * @return this\n-     */\n-    public BlockRegion setMax(Vector3ic max) {\n-        return this.setMax(max.x(), max.y(), max.z());\n+    public BlockRegion maxY(int y) {\n+        return this.maxY(y, this);\n     }\n \n-    /**\n-     * sets the maximum block for this {@link BlockRegion}\n-     *\n-     * @param maxX the x coordinate of the first block\n-     * @param maxY the y coordinate of the first block\n-     * @param maxZ the z coordinate of the first block\n-     * @return this\n-     */\n-    public BlockRegion setMax(int maxX, int maxY, int maxZ) {\n-        Preconditions.checkArgument(maxX >= this.minX || this.minX == Integer.MAX_VALUE);\n-        Preconditions.checkArgument(maxY >= this.minY || this.minY == Integer.MAX_VALUE);\n-        Preconditions.checkArgument(maxZ >= this.minZ || this.minZ == Integer.MAX_VALUE);\n-        this.maxX = maxX;\n-        this.maxY = maxY;\n-        this.maxZ = maxZ;\n-        return this;\n+    @Override\n+    public BlockRegion maxZ(int z, BlockRegion dest) {\n+        Preconditions.checkArgument(z >= this.minZ || this.minZ == Integer.MAX_VALUE);\n+        dest.maxZ = z;\n+        return dest;\n     }\n \n-    // -- size -------------------------------------------------------------------------------------------------------//\n-\n-    /**\n-     * Set the size of the block region from minimum the minimum corner.\n-     *\n-     * @param x the x coordinate to set the size; must be > 0\n-     * @param y the y coordinate to set the size; must be > 0\n-     * @param z the z coordinate to set the size; must be > 0\n-     * @return this after modification\n-     */\n-    public BlockRegion setSize(int x, int y, int z) {\n-        Preconditions.checkArgument(x > 0);\n-        Preconditions.checkArgument(y > 0);\n-        Preconditions.checkArgument(z > 0);\n-        this.maxX = this.minX + x - 1;\n-        this.maxY = this.minY + y - 1;\n-        this.maxZ = this.minZ + z - 1;\n-        return this;\n+    public BlockRegion maxZ(int z) {\n+        return this.maxZ(z, this);\n     }\n \n-    /**\n-     * Set the size of the block region from minimum the minimum corner.\n-     *\n-     * @param size the size to set; all dimensions must be > 0\n-     * @return this after modification\n-     */\n-    public BlockRegion setSize(Vector3ic size) {\n-        return setSize(size.x(), size.y(), size.z());\n+    @Override\n+    public BlockRegion setMax(int x, int y, int z, BlockRegion dest) {\n+        Preconditions.checkArgument(x >= this.minX || this.minX == Integer.MAX_VALUE);\n+        Preconditions.checkArgument(y >= this.minY || this.minY == Integer.MAX_VALUE);\n+        Preconditions.checkArgument(z >= this.minZ || this.minZ == Integer.MAX_VALUE);\n+        dest.maxX = x;\n+        dest.maxY = y;\n+        dest.maxZ = z;\n+        return dest;\n     }\n \n-    /**\n-     * the number of blocks for the +x, +y, +z from the minimum to the maximum\n-     *\n-     * @param dest will hold the result\n-     * @return dest\n-     */\n-    public Vector3i getSize(Vector3i dest) {\n-        return dest.set(sizeX(), sizeY(), sizeZ());\n+    public BlockRegion setMax(int x, int y, int z) {\n+        return this.setMax(x, y, z, this);\n     }\n \n-    /**\n-     * The number of blocks on the X axis\n-     *\n-     * @return number of blocks in the X axis\n-     */\n-    public int sizeX() {\n-        return this.maxX - this.minX + 1;\n+    public BlockRegion setMax(Vector3ic max) {\n+        return this.setMax(max, this);\n     }\n \n-    /**\n-     * The number of blocks on the Y axis\n-     *\n-     * @return number of blocks in the Y axis\n-     */\n-    public int sizeY() {\n-        return this.maxY - this.minY + 1;\n+    public BlockRegion addMax(int dx, int dy, int dz) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "533fd585860012b1ee8b3d136c67e68d95909278"}, "originalPosition": 613}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODEzOTYwNQ==", "bodyText": "Or alternatively moveMin?", "url": "https://github.com/MovingBlocks/Terasology/pull/4326#discussion_r548139605", "createdAt": "2020-12-23T18:55:16Z", "author": {"login": "jdrueckert"}, "path": "engine/src/main/java/org/terasology/world/block/BlockRegion.java", "diffHunk": "@@ -93,550 +114,397 @@\n      *\n      * @param source the block region to copy.\n      */\n-    public BlockRegion(BlockRegion source) {\n+    public BlockRegion(BlockRegionc source) {\n         this.set(source);\n     }\n \n+    // -- ITERABLE ---------------------------------------------------------------------------------------------------//\n+\n+    @Override\n+    public Iterator<Vector3ic> iterator() {\n+        return new Iterator<Vector3ic>() {\n+            private Vector3i current = null;\n+            private final Vector3i next = getMin(new Vector3i());\n+\n+            public boolean findNext() {\n+                if (current.equals(next)) {\n+                    next.z++;\n+                    if (next.z > maxZ) {\n+                        next.z = minZ;\n+                        next.y++;\n+                        if (next.y > maxY) {\n+                            next.y = minY;\n+                            next.x++;\n+                        }\n+                    }\n+                    return contains(next);\n+                }\n+                return true;\n+            }\n+\n+            @Override\n+            public boolean hasNext() {\n+                if (!isValid()) {\n+                    return false;\n+                }\n+                if (current == null) {\n+                    return true;\n+                }\n+\n+                if (current.equals(next)) {\n+                    return findNext();\n+                }\n+                return contains(next);\n+            }\n+\n+            @Override\n+            public Vector3ic next() {\n+                if (current == null) {\n+                    current = new Vector3i(next);\n+                    return next;\n+                }\n+\n+                if (current.equals(next)) {\n+                    if (findNext()) {\n+                        return next;\n+                    }\n+                    return null;\n+                }\n+                current.set(next);\n+                return next;\n+            }\n+        };\n+    }\n+\n     // -- GETTERS & SETTERS ------------------------------------------------------------------------------------------//\n \n     /**\n-     * set source to current region\n+     * Reset both the minimum and maximum corner of this region.\n      *\n-     * @param source the source region\n-     * @return this\n+     * @return this region (after modification)\n+     * @throws IllegalArgumentException if the given coordinates for min and max are {@link #isValid()\n+     *         invalid}.\n      */\n-    public BlockRegion set(BlockRegion source) {\n-        this.minX = source.minX;\n-        this.minY = source.minY;\n-        this.minZ = source.minZ;\n-\n-        this.maxX = source.maxX;\n-        this.maxY = source.maxY;\n-        this.maxZ = source.maxZ;\n-        return this;\n-    }\n+    public BlockRegion set(int minX, int minY, int minZ, int maxX, int maxY, int maxZ) {\n+        Preconditions.checkArgument(minX <= maxX || (minX == INVALID.minX() && maxX == INVALID.maxX()));\n+        Preconditions.checkArgument(minY <= maxY || (minY == INVALID.minY() && maxY == INVALID.maxY()));\n+        Preconditions.checkArgument(minZ <= maxZ || (minZ == INVALID.minZ() && maxZ == INVALID.maxZ()));\n+        this.minX = minX;\n+        this.minY = minY;\n+        this.minZ = minZ;\n \n-    public BlockRegion copy() {\n-        return new BlockRegion(this);\n+        this.maxX = maxX;\n+        this.maxY = maxY;\n+        this.maxZ = maxZ;\n+        return this;\n     }\n \n-    // -- min --------------------------------------------------------------------------------------------------------//\n-\n     /**\n-     * The x-coordinate of the minimum corner\n+     * Reset both the minimum and maximum corner of this region.\n+     *\n+     * @return this region (after modification)\n+     * @throws IllegalArgumentException if the given coordinates for min and max are {@link #isValid()\n+     *         invalid}.\n      */\n-    public int minX() {\n-        return this.minX;\n+    public BlockRegion set(Vector3ic min, Vector3ic max) {\n+        return this.set(min.x(), min.y(), min.z(), max.x(), max.y(), max.z());\n     }\n \n     /**\n-     * the minimum coordinate of the first block x\n+     * Reset this region to have the same minimum and maximum corner as the {@code source} region.\n      *\n-     * @return the minimum coordinate x\n-     * @deprecated use {@link #minX()}\n+     * @return this region (after modification)\n+     * @throws IllegalArgumentException if the given coordinates for min and max are {@link #isValid()\n+     *         invalid}.\n      */\n-    @Deprecated\n-    public int getMinX() {\n-        return this.minX;\n+    public BlockRegion set(BlockRegionc source) {\n+        return this.set(source.minX(), source.minY(), source.minZ(), source.maxX(), source.maxY(), source.maxZ());\n     }\n \n-    /**\n-     * set the minimum coordinate of the first block x\n-     *\n-     * @return the minX\n-     */\n-    public BlockRegion minX(int x) {\n-        Preconditions.checkArgument(x <= this.maxX || this.maxX == Integer.MIN_VALUE);\n-        this.minX = x;\n-        return this;\n+    // -- min --------------------------------------------------------------------------------------------------------//\n+\n+    @Override\n+    public int minX() {\n+        return this.minX;\n     }\n \n-    /**\n-     * The y-coordinate of the minimum corner\n-     */\n+    @Override\n     public int minY() {\n         return this.minY;\n     }\n \n-    /**\n-     * the minimum coordinate of the first block y\n-     *\n-     * @return the minimum coordinate y\n-     * @deprecated use {@link #minY()}\n-     */\n-    @Deprecated\n-    public int getMinY() {\n-        return this.minY;\n+    @Override\n+    public int minZ() {\n+        return this.minZ;\n     }\n \n-    /**\n-     * set the minimum coordinate of the first block y\n-     *\n-     * @return the minY\n-     */\n-    public BlockRegion minY(int y) {\n-        Preconditions.checkArgument(y <= this.maxY || this.maxY == Integer.MIN_VALUE);\n-        this.minY = y;\n-        return this;\n+    @Override\n+    public BlockRegion minX(int x, BlockRegion dest) {\n+        Preconditions.checkArgument(x <= this.maxX || this.maxX == Integer.MIN_VALUE);\n+        dest.minX = x;\n+        return dest;\n     }\n \n-    /**\n-     * The z-coordinate of the minimum corner\n-     */\n-    public int minZ() {\n-        return this.minZ;\n+    public BlockRegion minX(int x) {\n+        return this.minX(x, this);\n     }\n \n-    /**\n-     * the minimum coordinate of the first block z\n-     *\n-     * @return the minimum coordinate z\n-     * @deprecated use {@link #minZ()}\n-     */\n-    @Deprecated\n-    public int getMinZ() {\n-        return this.minZ;\n+    @Override\n+    public BlockRegion minY(int y, BlockRegion dest) {\n+        Preconditions.checkArgument(y <= this.maxY || this.maxY == Integer.MIN_VALUE);\n+        dest.minY = y;\n+        return dest;\n     }\n \n-    /**\n-     * set the minimum coordinate of the first block z\n-     *\n-     * @return the minZ\n-     */\n-    public BlockRegion minZ(int z) {\n-        Preconditions.checkArgument(z <= this.maxZ || this.maxZ == Integer.MIN_VALUE);\n-        this.minZ = z;\n-        return this;\n+    public BlockRegion minY(int y) {\n+        return this.minY(y, this);\n     }\n \n-    /**\n-     * Get the block coordinate minimum corner.\n-     *\n-     * @param dest will hold the result\n-     */\n-    public Vector3i getMin(Vector3i dest) {\n-        return dest.set(minX, minY, minZ);\n+    @Override\n+    public BlockRegion minZ(int z, BlockRegion dest) {\n+        Preconditions.checkArgument(z <= this.maxZ || this.maxZ == Integer.MIN_VALUE);\n+        dest.minZ = z;\n+        return dest;\n     }\n \n-    /**\n-     * Sets the minimum coordinate of the first block for <code>this</code> {@link BlockRegion}\n-     *\n-     * @param min the first coordinate of the first block\n-     * @return this\n-     */\n-    public BlockRegion setMin(Vector3ic min) {\n-        return this.setMin(min.x(), min.y(), min.z());\n+    public BlockRegion minZ(int z) {\n+        return this.minZ(z, this);\n     }\n \n-    /**\n-     * sets the minimum block for this {@link BlockRegion}\n-     *\n-     * @param minX the x coordinate of the first block\n-     * @param minY the y coordinate of the first block\n-     * @param minZ the z coordinate of the first block\n-     * @return this\n-     */\n-    public BlockRegion setMin(int minX, int minY, int minZ) {\n+    @Override\n+    public BlockRegion setMin(int minX, int minY, int minZ, BlockRegion dest) {\n         Preconditions.checkArgument(minX <= this.maxX || this.maxX == Integer.MIN_VALUE);\n         Preconditions.checkArgument(minY <= this.maxY || this.maxX == Integer.MIN_VALUE);\n         Preconditions.checkArgument(minZ <= this.maxZ || this.maxX == Integer.MIN_VALUE);\n-        this.minX = minX;\n-        this.minY = minY;\n-        this.minZ = minZ;\n-        return this;\n+        dest.minX = minX;\n+        dest.minY = minY;\n+        dest.minZ = minZ;\n+        return dest;\n     }\n \n-    // -- max --------------------------------------------------------------------------------------------------------//\n-\n-    /**\n-     * The x-coordinate of the maximum corner\n-     */\n-    public int maxX() {\n-        return this.maxX;\n+    public BlockRegion setMin(int x, int y, int z) {\n+        return this.setMin(x, y, z, this);\n     }\n \n-    /**\n-     * the maximum coordinate of the second block x\n-     *\n-     * @return the minimum coordinate x\n-     * @deprecated use {@link #maxX()}\n-     */\n-    @Deprecated\n-    public int getMaxX() {\n-        return this.maxX;\n+    public BlockRegion setMin(Vector3ic min) {\n+        return this.setMin(min, this);\n     }\n \n-    /**\n-     * set the maximum coordinate of the second block x\n-     *\n-     * @return the minX\n-     */\n-    public BlockRegion maxX(int x) {\n-        Preconditions.checkArgument(x >= this.minX || this.minX == Integer.MAX_VALUE);\n-        this.maxX = x;\n-        return this;\n+    public BlockRegion addMin(int dx, int dy, int dz) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODEzNTk2OQ=="}, "originalCommit": {"oid": "533fd585860012b1ee8b3d136c67e68d95909278"}, "originalPosition": 412}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODEzOTgxNg==", "bodyText": "Or alternatively moveMax?", "url": "https://github.com/MovingBlocks/Terasology/pull/4326#discussion_r548139816", "createdAt": "2020-12-23T18:55:31Z", "author": {"login": "jdrueckert"}, "path": "engine/src/main/java/org/terasology/world/block/BlockRegion.java", "diffHunk": "@@ -93,550 +114,397 @@\n      *\n      * @param source the block region to copy.\n      */\n-    public BlockRegion(BlockRegion source) {\n+    public BlockRegion(BlockRegionc source) {\n         this.set(source);\n     }\n \n+    // -- ITERABLE ---------------------------------------------------------------------------------------------------//\n+\n+    @Override\n+    public Iterator<Vector3ic> iterator() {\n+        return new Iterator<Vector3ic>() {\n+            private Vector3i current = null;\n+            private final Vector3i next = getMin(new Vector3i());\n+\n+            public boolean findNext() {\n+                if (current.equals(next)) {\n+                    next.z++;\n+                    if (next.z > maxZ) {\n+                        next.z = minZ;\n+                        next.y++;\n+                        if (next.y > maxY) {\n+                            next.y = minY;\n+                            next.x++;\n+                        }\n+                    }\n+                    return contains(next);\n+                }\n+                return true;\n+            }\n+\n+            @Override\n+            public boolean hasNext() {\n+                if (!isValid()) {\n+                    return false;\n+                }\n+                if (current == null) {\n+                    return true;\n+                }\n+\n+                if (current.equals(next)) {\n+                    return findNext();\n+                }\n+                return contains(next);\n+            }\n+\n+            @Override\n+            public Vector3ic next() {\n+                if (current == null) {\n+                    current = new Vector3i(next);\n+                    return next;\n+                }\n+\n+                if (current.equals(next)) {\n+                    if (findNext()) {\n+                        return next;\n+                    }\n+                    return null;\n+                }\n+                current.set(next);\n+                return next;\n+            }\n+        };\n+    }\n+\n     // -- GETTERS & SETTERS ------------------------------------------------------------------------------------------//\n \n     /**\n-     * set source to current region\n+     * Reset both the minimum and maximum corner of this region.\n      *\n-     * @param source the source region\n-     * @return this\n+     * @return this region (after modification)\n+     * @throws IllegalArgumentException if the given coordinates for min and max are {@link #isValid()\n+     *         invalid}.\n      */\n-    public BlockRegion set(BlockRegion source) {\n-        this.minX = source.minX;\n-        this.minY = source.minY;\n-        this.minZ = source.minZ;\n-\n-        this.maxX = source.maxX;\n-        this.maxY = source.maxY;\n-        this.maxZ = source.maxZ;\n-        return this;\n-    }\n+    public BlockRegion set(int minX, int minY, int minZ, int maxX, int maxY, int maxZ) {\n+        Preconditions.checkArgument(minX <= maxX || (minX == INVALID.minX() && maxX == INVALID.maxX()));\n+        Preconditions.checkArgument(minY <= maxY || (minY == INVALID.minY() && maxY == INVALID.maxY()));\n+        Preconditions.checkArgument(minZ <= maxZ || (minZ == INVALID.minZ() && maxZ == INVALID.maxZ()));\n+        this.minX = minX;\n+        this.minY = minY;\n+        this.minZ = minZ;\n \n-    public BlockRegion copy() {\n-        return new BlockRegion(this);\n+        this.maxX = maxX;\n+        this.maxY = maxY;\n+        this.maxZ = maxZ;\n+        return this;\n     }\n \n-    // -- min --------------------------------------------------------------------------------------------------------//\n-\n     /**\n-     * The x-coordinate of the minimum corner\n+     * Reset both the minimum and maximum corner of this region.\n+     *\n+     * @return this region (after modification)\n+     * @throws IllegalArgumentException if the given coordinates for min and max are {@link #isValid()\n+     *         invalid}.\n      */\n-    public int minX() {\n-        return this.minX;\n+    public BlockRegion set(Vector3ic min, Vector3ic max) {\n+        return this.set(min.x(), min.y(), min.z(), max.x(), max.y(), max.z());\n     }\n \n     /**\n-     * the minimum coordinate of the first block x\n+     * Reset this region to have the same minimum and maximum corner as the {@code source} region.\n      *\n-     * @return the minimum coordinate x\n-     * @deprecated use {@link #minX()}\n+     * @return this region (after modification)\n+     * @throws IllegalArgumentException if the given coordinates for min and max are {@link #isValid()\n+     *         invalid}.\n      */\n-    @Deprecated\n-    public int getMinX() {\n-        return this.minX;\n+    public BlockRegion set(BlockRegionc source) {\n+        return this.set(source.minX(), source.minY(), source.minZ(), source.maxX(), source.maxY(), source.maxZ());\n     }\n \n-    /**\n-     * set the minimum coordinate of the first block x\n-     *\n-     * @return the minX\n-     */\n-    public BlockRegion minX(int x) {\n-        Preconditions.checkArgument(x <= this.maxX || this.maxX == Integer.MIN_VALUE);\n-        this.minX = x;\n-        return this;\n+    // -- min --------------------------------------------------------------------------------------------------------//\n+\n+    @Override\n+    public int minX() {\n+        return this.minX;\n     }\n \n-    /**\n-     * The y-coordinate of the minimum corner\n-     */\n+    @Override\n     public int minY() {\n         return this.minY;\n     }\n \n-    /**\n-     * the minimum coordinate of the first block y\n-     *\n-     * @return the minimum coordinate y\n-     * @deprecated use {@link #minY()}\n-     */\n-    @Deprecated\n-    public int getMinY() {\n-        return this.minY;\n+    @Override\n+    public int minZ() {\n+        return this.minZ;\n     }\n \n-    /**\n-     * set the minimum coordinate of the first block y\n-     *\n-     * @return the minY\n-     */\n-    public BlockRegion minY(int y) {\n-        Preconditions.checkArgument(y <= this.maxY || this.maxY == Integer.MIN_VALUE);\n-        this.minY = y;\n-        return this;\n+    @Override\n+    public BlockRegion minX(int x, BlockRegion dest) {\n+        Preconditions.checkArgument(x <= this.maxX || this.maxX == Integer.MIN_VALUE);\n+        dest.minX = x;\n+        return dest;\n     }\n \n-    /**\n-     * The z-coordinate of the minimum corner\n-     */\n-    public int minZ() {\n-        return this.minZ;\n+    public BlockRegion minX(int x) {\n+        return this.minX(x, this);\n     }\n \n-    /**\n-     * the minimum coordinate of the first block z\n-     *\n-     * @return the minimum coordinate z\n-     * @deprecated use {@link #minZ()}\n-     */\n-    @Deprecated\n-    public int getMinZ() {\n-        return this.minZ;\n+    @Override\n+    public BlockRegion minY(int y, BlockRegion dest) {\n+        Preconditions.checkArgument(y <= this.maxY || this.maxY == Integer.MIN_VALUE);\n+        dest.minY = y;\n+        return dest;\n     }\n \n-    /**\n-     * set the minimum coordinate of the first block z\n-     *\n-     * @return the minZ\n-     */\n-    public BlockRegion minZ(int z) {\n-        Preconditions.checkArgument(z <= this.maxZ || this.maxZ == Integer.MIN_VALUE);\n-        this.minZ = z;\n-        return this;\n+    public BlockRegion minY(int y) {\n+        return this.minY(y, this);\n     }\n \n-    /**\n-     * Get the block coordinate minimum corner.\n-     *\n-     * @param dest will hold the result\n-     */\n-    public Vector3i getMin(Vector3i dest) {\n-        return dest.set(minX, minY, minZ);\n+    @Override\n+    public BlockRegion minZ(int z, BlockRegion dest) {\n+        Preconditions.checkArgument(z <= this.maxZ || this.maxZ == Integer.MIN_VALUE);\n+        dest.minZ = z;\n+        return dest;\n     }\n \n-    /**\n-     * Sets the minimum coordinate of the first block for <code>this</code> {@link BlockRegion}\n-     *\n-     * @param min the first coordinate of the first block\n-     * @return this\n-     */\n-    public BlockRegion setMin(Vector3ic min) {\n-        return this.setMin(min.x(), min.y(), min.z());\n+    public BlockRegion minZ(int z) {\n+        return this.minZ(z, this);\n     }\n \n-    /**\n-     * sets the minimum block for this {@link BlockRegion}\n-     *\n-     * @param minX the x coordinate of the first block\n-     * @param minY the y coordinate of the first block\n-     * @param minZ the z coordinate of the first block\n-     * @return this\n-     */\n-    public BlockRegion setMin(int minX, int minY, int minZ) {\n+    @Override\n+    public BlockRegion setMin(int minX, int minY, int minZ, BlockRegion dest) {\n         Preconditions.checkArgument(minX <= this.maxX || this.maxX == Integer.MIN_VALUE);\n         Preconditions.checkArgument(minY <= this.maxY || this.maxX == Integer.MIN_VALUE);\n         Preconditions.checkArgument(minZ <= this.maxZ || this.maxX == Integer.MIN_VALUE);\n-        this.minX = minX;\n-        this.minY = minY;\n-        this.minZ = minZ;\n-        return this;\n+        dest.minX = minX;\n+        dest.minY = minY;\n+        dest.minZ = minZ;\n+        return dest;\n     }\n \n-    // -- max --------------------------------------------------------------------------------------------------------//\n-\n-    /**\n-     * The x-coordinate of the maximum corner\n-     */\n-    public int maxX() {\n-        return this.maxX;\n+    public BlockRegion setMin(int x, int y, int z) {\n+        return this.setMin(x, y, z, this);\n     }\n \n-    /**\n-     * the maximum coordinate of the second block x\n-     *\n-     * @return the minimum coordinate x\n-     * @deprecated use {@link #maxX()}\n-     */\n-    @Deprecated\n-    public int getMaxX() {\n-        return this.maxX;\n+    public BlockRegion setMin(Vector3ic min) {\n+        return this.setMin(min, this);\n     }\n \n-    /**\n-     * set the maximum coordinate of the second block x\n-     *\n-     * @return the minX\n-     */\n-    public BlockRegion maxX(int x) {\n-        Preconditions.checkArgument(x >= this.minX || this.minX == Integer.MAX_VALUE);\n-        this.maxX = x;\n-        return this;\n+    public BlockRegion addMin(int dx, int dy, int dz) {\n+        return this.addMin(dx, dy, dz, this);\n     }\n \n-    /**\n-     * The y-coordinate of the maximum corner\n-     */\n-    public int maxY() {\n-        return this.maxY;\n+    public BlockRegion addMin(Vector3ic dmin) {\n+        return this.addMin(dmin, this);\n     }\n \n-    /**\n-     * the maximum coordinate of the second block y\n-     *\n-     * @return the minimum coordinate y\n-     * @deprecated use {@link #maxY()}\n-     */\n-    @Deprecated\n-    public int getMaxY() {\n-        return this.maxY;\n+\n+    // -- max --------------------------------------------------------------------------------------------------------//\n+\n+    @Override\n+    public int maxX() {\n+        return this.maxX;\n     }\n \n-    /**\n-     * set the maximum coordinate of the second block y\n-     *\n-     * @return the minY\n-     */\n-    public BlockRegion maxY(int y) {\n-        Preconditions.checkArgument(y >= this.minY || this.minY == Integer.MAX_VALUE);\n-        this.maxY = y;\n-        return this;\n+    @Override\n+    public int maxY() {\n+        return this.maxY;\n     }\n \n-    /**\n-     * The z-coordinate of the maximum corner\n-     */\n+    @Override\n     public int maxZ() {\n         return this.maxZ;\n     }\n \n-    /**\n-     * the maximum coordinate of the second block z\n-     *\n-     * @return the minimum coordinate z\n-     * @deprecated use {@link #maxZ()}\n-     */\n-    @Deprecated\n-    public int getMaxZ() {\n-        return this.maxZ;\n+    @Override\n+    public BlockRegion maxX(int x, BlockRegion dest) {\n+        Preconditions.checkArgument(x >= this.minX || this.minX == Integer.MAX_VALUE);\n+        dest.maxX = x;\n+        return dest;\n     }\n \n-    /**\n-     * set the maximum coordinate of the second block z\n-     *\n-     * @return the minZ\n-     */\n-    public BlockRegion maxZ(int z) {\n-        Preconditions.checkArgument(z >= this.minZ || this.minZ == Integer.MAX_VALUE);\n-        this.maxZ = z;\n-        return this;\n+    public BlockRegion maxX(int x) {\n+        return this.maxX(x, this);\n     }\n \n-    /**\n-     * Get the block coordinate of the maximum corner.\n-     *\n-     * @param dest will hold the result\n-     */\n-    public Vector3i getMax(Vector3i dest) {\n-        return dest.set(maxX, maxY, maxZ);\n+    @Override\n+    public BlockRegion maxY(int y, BlockRegion dest) {\n+        Preconditions.checkArgument(y >= this.minY || this.minY == Integer.MAX_VALUE);\n+        dest.maxY = y;\n+        return dest;\n     }\n \n-    /**\n-     * Sets the maximum coordinate of the second block for <code>this</code> {@link BlockRegion}\n-     *\n-     * @param max the second coordinate of the second block\n-     * @return this\n-     */\n-    public BlockRegion setMax(Vector3ic max) {\n-        return this.setMax(max.x(), max.y(), max.z());\n+    public BlockRegion maxY(int y) {\n+        return this.maxY(y, this);\n     }\n \n-    /**\n-     * sets the maximum block for this {@link BlockRegion}\n-     *\n-     * @param maxX the x coordinate of the first block\n-     * @param maxY the y coordinate of the first block\n-     * @param maxZ the z coordinate of the first block\n-     * @return this\n-     */\n-    public BlockRegion setMax(int maxX, int maxY, int maxZ) {\n-        Preconditions.checkArgument(maxX >= this.minX || this.minX == Integer.MAX_VALUE);\n-        Preconditions.checkArgument(maxY >= this.minY || this.minY == Integer.MAX_VALUE);\n-        Preconditions.checkArgument(maxZ >= this.minZ || this.minZ == Integer.MAX_VALUE);\n-        this.maxX = maxX;\n-        this.maxY = maxY;\n-        this.maxZ = maxZ;\n-        return this;\n+    @Override\n+    public BlockRegion maxZ(int z, BlockRegion dest) {\n+        Preconditions.checkArgument(z >= this.minZ || this.minZ == Integer.MAX_VALUE);\n+        dest.maxZ = z;\n+        return dest;\n     }\n \n-    // -- size -------------------------------------------------------------------------------------------------------//\n-\n-    /**\n-     * Set the size of the block region from minimum the minimum corner.\n-     *\n-     * @param x the x coordinate to set the size; must be > 0\n-     * @param y the y coordinate to set the size; must be > 0\n-     * @param z the z coordinate to set the size; must be > 0\n-     * @return this after modification\n-     */\n-    public BlockRegion setSize(int x, int y, int z) {\n-        Preconditions.checkArgument(x > 0);\n-        Preconditions.checkArgument(y > 0);\n-        Preconditions.checkArgument(z > 0);\n-        this.maxX = this.minX + x - 1;\n-        this.maxY = this.minY + y - 1;\n-        this.maxZ = this.minZ + z - 1;\n-        return this;\n+    public BlockRegion maxZ(int z) {\n+        return this.maxZ(z, this);\n     }\n \n-    /**\n-     * Set the size of the block region from minimum the minimum corner.\n-     *\n-     * @param size the size to set; all dimensions must be > 0\n-     * @return this after modification\n-     */\n-    public BlockRegion setSize(Vector3ic size) {\n-        return setSize(size.x(), size.y(), size.z());\n+    @Override\n+    public BlockRegion setMax(int x, int y, int z, BlockRegion dest) {\n+        Preconditions.checkArgument(x >= this.minX || this.minX == Integer.MAX_VALUE);\n+        Preconditions.checkArgument(y >= this.minY || this.minY == Integer.MAX_VALUE);\n+        Preconditions.checkArgument(z >= this.minZ || this.minZ == Integer.MAX_VALUE);\n+        dest.maxX = x;\n+        dest.maxY = y;\n+        dest.maxZ = z;\n+        return dest;\n     }\n \n-    /**\n-     * the number of blocks for the +x, +y, +z from the minimum to the maximum\n-     *\n-     * @param dest will hold the result\n-     * @return dest\n-     */\n-    public Vector3i getSize(Vector3i dest) {\n-        return dest.set(sizeX(), sizeY(), sizeZ());\n+    public BlockRegion setMax(int x, int y, int z) {\n+        return this.setMax(x, y, z, this);\n     }\n \n-    /**\n-     * The number of blocks on the X axis\n-     *\n-     * @return number of blocks in the X axis\n-     */\n-    public int sizeX() {\n-        return this.maxX - this.minX + 1;\n+    public BlockRegion setMax(Vector3ic max) {\n+        return this.setMax(max, this);\n     }\n \n-    /**\n-     * The number of blocks on the Y axis\n-     *\n-     * @return number of blocks in the Y axis\n-     */\n-    public int sizeY() {\n-        return this.maxY - this.minY + 1;\n+    public BlockRegion addMax(int dx, int dy, int dz) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODEzNjMxNg=="}, "originalCommit": {"oid": "533fd585860012b1ee8b3d136c67e68d95909278"}, "originalPosition": 613}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4MjIzMTMx", "url": "https://github.com/MovingBlocks/Terasology/pull/4326#pullrequestreview-558223131", "createdAt": "2020-12-23T20:51:02Z", "commit": {"oid": "533fd585860012b1ee8b3d136c67e68d95909278"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QyMDo1MTowMlrOIK1HaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QyMDo1MTowMlrOIK1HaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODIyNjkyMQ==", "bodyText": "This check is out of sync with set(...). Can we just use 'set` in the constructor?\n    public BlockRegion(int minX, int minY, int minZ, int maxX, int maxY, int maxZ) {\n      this.set(minX, minY, minZ, maxX, maxY, maxZ);\n    }", "url": "https://github.com/MovingBlocks/Terasology/pull/4326#discussion_r548226921", "createdAt": "2020-12-23T20:51:02Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/world/block/BlockRegion.java", "diffHunk": "@@ -76,15 +80,32 @@\n         this.maxZ = maxZ;\n     }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "533fd585860012b1ee8b3d136c67e68d95909278"}, "originalPosition": 65}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4MjI2ODQw", "url": "https://github.com/MovingBlocks/Terasology/pull/4326#pullrequestreview-558226840", "createdAt": "2020-12-23T21:00:54Z", "commit": {"oid": "533fd585860012b1ee8b3d136c67e68d95909278"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QyMTowMDo1NFrOIK1iiA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QyMTowMDo1NFrOIK1iiA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODIzMzg2NA==", "bodyText": "This implementation is wrong!\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public BlockRegion minX(int x, BlockRegion dest) {\n          \n          \n            \n                    Preconditions.checkArgument(x <= this.maxX || this.maxX == Integer.MIN_VALUE);\n          \n          \n            \n                    dest.minX = x;\n          \n          \n            \n                    return dest;\n          \n          \n            \n                public BlockRegion minX(int x, BlockRegion dest) {\n          \n          \n            \n                    return dest.set(x, minY, minZ, maxX, maxY, maxZ);\n          \n      \n    \n    \n  \n\nSame for the other methods of the same pattern.", "url": "https://github.com/MovingBlocks/Terasology/pull/4326#discussion_r548233864", "createdAt": "2020-12-23T21:00:54Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/world/block/BlockRegion.java", "diffHunk": "@@ -93,550 +114,397 @@\n      *\n      * @param source the block region to copy.\n      */\n-    public BlockRegion(BlockRegion source) {\n+    public BlockRegion(BlockRegionc source) {\n         this.set(source);\n     }\n \n+    // -- ITERABLE ---------------------------------------------------------------------------------------------------//\n+\n+    @Override\n+    public Iterator<Vector3ic> iterator() {\n+        return new Iterator<Vector3ic>() {\n+            private Vector3i current = null;\n+            private final Vector3i next = getMin(new Vector3i());\n+\n+            public boolean findNext() {\n+                if (current.equals(next)) {\n+                    next.z++;\n+                    if (next.z > maxZ) {\n+                        next.z = minZ;\n+                        next.y++;\n+                        if (next.y > maxY) {\n+                            next.y = minY;\n+                            next.x++;\n+                        }\n+                    }\n+                    return contains(next);\n+                }\n+                return true;\n+            }\n+\n+            @Override\n+            public boolean hasNext() {\n+                if (!isValid()) {\n+                    return false;\n+                }\n+                if (current == null) {\n+                    return true;\n+                }\n+\n+                if (current.equals(next)) {\n+                    return findNext();\n+                }\n+                return contains(next);\n+            }\n+\n+            @Override\n+            public Vector3ic next() {\n+                if (current == null) {\n+                    current = new Vector3i(next);\n+                    return next;\n+                }\n+\n+                if (current.equals(next)) {\n+                    if (findNext()) {\n+                        return next;\n+                    }\n+                    return null;\n+                }\n+                current.set(next);\n+                return next;\n+            }\n+        };\n+    }\n+\n     // -- GETTERS & SETTERS ------------------------------------------------------------------------------------------//\n \n     /**\n-     * set source to current region\n+     * Reset both the minimum and maximum corner of this region.\n      *\n-     * @param source the source region\n-     * @return this\n+     * @return this region (after modification)\n+     * @throws IllegalArgumentException if the given coordinates for min and max are {@link #isValid()\n+     *         invalid}.\n      */\n-    public BlockRegion set(BlockRegion source) {\n-        this.minX = source.minX;\n-        this.minY = source.minY;\n-        this.minZ = source.minZ;\n-\n-        this.maxX = source.maxX;\n-        this.maxY = source.maxY;\n-        this.maxZ = source.maxZ;\n-        return this;\n-    }\n+    public BlockRegion set(int minX, int minY, int minZ, int maxX, int maxY, int maxZ) {\n+        Preconditions.checkArgument(minX <= maxX || (minX == INVALID.minX() && maxX == INVALID.maxX()));\n+        Preconditions.checkArgument(minY <= maxY || (minY == INVALID.minY() && maxY == INVALID.maxY()));\n+        Preconditions.checkArgument(minZ <= maxZ || (minZ == INVALID.minZ() && maxZ == INVALID.maxZ()));\n+        this.minX = minX;\n+        this.minY = minY;\n+        this.minZ = minZ;\n \n-    public BlockRegion copy() {\n-        return new BlockRegion(this);\n+        this.maxX = maxX;\n+        this.maxY = maxY;\n+        this.maxZ = maxZ;\n+        return this;\n     }\n \n-    // -- min --------------------------------------------------------------------------------------------------------//\n-\n     /**\n-     * The x-coordinate of the minimum corner\n+     * Reset both the minimum and maximum corner of this region.\n+     *\n+     * @return this region (after modification)\n+     * @throws IllegalArgumentException if the given coordinates for min and max are {@link #isValid()\n+     *         invalid}.\n      */\n-    public int minX() {\n-        return this.minX;\n+    public BlockRegion set(Vector3ic min, Vector3ic max) {\n+        return this.set(min.x(), min.y(), min.z(), max.x(), max.y(), max.z());\n     }\n \n     /**\n-     * the minimum coordinate of the first block x\n+     * Reset this region to have the same minimum and maximum corner as the {@code source} region.\n      *\n-     * @return the minimum coordinate x\n-     * @deprecated use {@link #minX()}\n+     * @return this region (after modification)\n+     * @throws IllegalArgumentException if the given coordinates for min and max are {@link #isValid()\n+     *         invalid}.\n      */\n-    @Deprecated\n-    public int getMinX() {\n-        return this.minX;\n+    public BlockRegion set(BlockRegionc source) {\n+        return this.set(source.minX(), source.minY(), source.minZ(), source.maxX(), source.maxY(), source.maxZ());\n     }\n \n-    /**\n-     * set the minimum coordinate of the first block x\n-     *\n-     * @return the minX\n-     */\n-    public BlockRegion minX(int x) {\n-        Preconditions.checkArgument(x <= this.maxX || this.maxX == Integer.MIN_VALUE);\n-        this.minX = x;\n-        return this;\n+    // -- min --------------------------------------------------------------------------------------------------------//\n+\n+    @Override\n+    public int minX() {\n+        return this.minX;\n     }\n \n-    /**\n-     * The y-coordinate of the minimum corner\n-     */\n+    @Override\n     public int minY() {\n         return this.minY;\n     }\n \n-    /**\n-     * the minimum coordinate of the first block y\n-     *\n-     * @return the minimum coordinate y\n-     * @deprecated use {@link #minY()}\n-     */\n-    @Deprecated\n-    public int getMinY() {\n-        return this.minY;\n+    @Override\n+    public int minZ() {\n+        return this.minZ;\n     }\n \n-    /**\n-     * set the minimum coordinate of the first block y\n-     *\n-     * @return the minY\n-     */\n-    public BlockRegion minY(int y) {\n-        Preconditions.checkArgument(y <= this.maxY || this.maxY == Integer.MIN_VALUE);\n-        this.minY = y;\n-        return this;\n+    @Override\n+    public BlockRegion minX(int x, BlockRegion dest) {\n+        Preconditions.checkArgument(x <= this.maxX || this.maxX == Integer.MIN_VALUE);\n+        dest.minX = x;\n+        return dest;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "533fd585860012b1ee8b3d136c67e68d95909278"}, "originalPosition": 288}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4MjMyODg5", "url": "https://github.com/MovingBlocks/Terasology/pull/4326#pullrequestreview-558232889", "createdAt": "2020-12-23T21:18:28Z", "commit": {"oid": "533fd585860012b1ee8b3d136c67e68d95909278"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QyMToxODoyOFrOIK2VEg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QyMToxODoyOFrOIK2VEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODI0NjgwMg==", "bodyText": "Should this be called setMin or min, analogous to minX/minY?\nnevermind, this would get crazy with overloading things...", "url": "https://github.com/MovingBlocks/Terasology/pull/4326#discussion_r548246802", "createdAt": "2020-12-23T21:18:28Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/world/block/BlockRegion.java", "diffHunk": "@@ -93,550 +114,397 @@\n      *\n      * @param source the block region to copy.\n      */\n-    public BlockRegion(BlockRegion source) {\n+    public BlockRegion(BlockRegionc source) {\n         this.set(source);\n     }\n \n+    // -- ITERABLE ---------------------------------------------------------------------------------------------------//\n+\n+    @Override\n+    public Iterator<Vector3ic> iterator() {\n+        return new Iterator<Vector3ic>() {\n+            private Vector3i current = null;\n+            private final Vector3i next = getMin(new Vector3i());\n+\n+            public boolean findNext() {\n+                if (current.equals(next)) {\n+                    next.z++;\n+                    if (next.z > maxZ) {\n+                        next.z = minZ;\n+                        next.y++;\n+                        if (next.y > maxY) {\n+                            next.y = minY;\n+                            next.x++;\n+                        }\n+                    }\n+                    return contains(next);\n+                }\n+                return true;\n+            }\n+\n+            @Override\n+            public boolean hasNext() {\n+                if (!isValid()) {\n+                    return false;\n+                }\n+                if (current == null) {\n+                    return true;\n+                }\n+\n+                if (current.equals(next)) {\n+                    return findNext();\n+                }\n+                return contains(next);\n+            }\n+\n+            @Override\n+            public Vector3ic next() {\n+                if (current == null) {\n+                    current = new Vector3i(next);\n+                    return next;\n+                }\n+\n+                if (current.equals(next)) {\n+                    if (findNext()) {\n+                        return next;\n+                    }\n+                    return null;\n+                }\n+                current.set(next);\n+                return next;\n+            }\n+        };\n+    }\n+\n     // -- GETTERS & SETTERS ------------------------------------------------------------------------------------------//\n \n     /**\n-     * set source to current region\n+     * Reset both the minimum and maximum corner of this region.\n      *\n-     * @param source the source region\n-     * @return this\n+     * @return this region (after modification)\n+     * @throws IllegalArgumentException if the given coordinates for min and max are {@link #isValid()\n+     *         invalid}.\n      */\n-    public BlockRegion set(BlockRegion source) {\n-        this.minX = source.minX;\n-        this.minY = source.minY;\n-        this.minZ = source.minZ;\n-\n-        this.maxX = source.maxX;\n-        this.maxY = source.maxY;\n-        this.maxZ = source.maxZ;\n-        return this;\n-    }\n+    public BlockRegion set(int minX, int minY, int minZ, int maxX, int maxY, int maxZ) {\n+        Preconditions.checkArgument(minX <= maxX || (minX == INVALID.minX() && maxX == INVALID.maxX()));\n+        Preconditions.checkArgument(minY <= maxY || (minY == INVALID.minY() && maxY == INVALID.maxY()));\n+        Preconditions.checkArgument(minZ <= maxZ || (minZ == INVALID.minZ() && maxZ == INVALID.maxZ()));\n+        this.minX = minX;\n+        this.minY = minY;\n+        this.minZ = minZ;\n \n-    public BlockRegion copy() {\n-        return new BlockRegion(this);\n+        this.maxX = maxX;\n+        this.maxY = maxY;\n+        this.maxZ = maxZ;\n+        return this;\n     }\n \n-    // -- min --------------------------------------------------------------------------------------------------------//\n-\n     /**\n-     * The x-coordinate of the minimum corner\n+     * Reset both the minimum and maximum corner of this region.\n+     *\n+     * @return this region (after modification)\n+     * @throws IllegalArgumentException if the given coordinates for min and max are {@link #isValid()\n+     *         invalid}.\n      */\n-    public int minX() {\n-        return this.minX;\n+    public BlockRegion set(Vector3ic min, Vector3ic max) {\n+        return this.set(min.x(), min.y(), min.z(), max.x(), max.y(), max.z());\n     }\n \n     /**\n-     * the minimum coordinate of the first block x\n+     * Reset this region to have the same minimum and maximum corner as the {@code source} region.\n      *\n-     * @return the minimum coordinate x\n-     * @deprecated use {@link #minX()}\n+     * @return this region (after modification)\n+     * @throws IllegalArgumentException if the given coordinates for min and max are {@link #isValid()\n+     *         invalid}.\n      */\n-    @Deprecated\n-    public int getMinX() {\n-        return this.minX;\n+    public BlockRegion set(BlockRegionc source) {\n+        return this.set(source.minX(), source.minY(), source.minZ(), source.maxX(), source.maxY(), source.maxZ());\n     }\n \n-    /**\n-     * set the minimum coordinate of the first block x\n-     *\n-     * @return the minX\n-     */\n-    public BlockRegion minX(int x) {\n-        Preconditions.checkArgument(x <= this.maxX || this.maxX == Integer.MIN_VALUE);\n-        this.minX = x;\n-        return this;\n+    // -- min --------------------------------------------------------------------------------------------------------//\n+\n+    @Override\n+    public int minX() {\n+        return this.minX;\n     }\n \n-    /**\n-     * The y-coordinate of the minimum corner\n-     */\n+    @Override\n     public int minY() {\n         return this.minY;\n     }\n \n-    /**\n-     * the minimum coordinate of the first block y\n-     *\n-     * @return the minimum coordinate y\n-     * @deprecated use {@link #minY()}\n-     */\n-    @Deprecated\n-    public int getMinY() {\n-        return this.minY;\n+    @Override\n+    public int minZ() {\n+        return this.minZ;\n     }\n \n-    /**\n-     * set the minimum coordinate of the first block y\n-     *\n-     * @return the minY\n-     */\n-    public BlockRegion minY(int y) {\n-        Preconditions.checkArgument(y <= this.maxY || this.maxY == Integer.MIN_VALUE);\n-        this.minY = y;\n-        return this;\n+    @Override\n+    public BlockRegion minX(int x, BlockRegion dest) {\n+        Preconditions.checkArgument(x <= this.maxX || this.maxX == Integer.MIN_VALUE);\n+        dest.minX = x;\n+        return dest;\n     }\n \n-    /**\n-     * The z-coordinate of the minimum corner\n-     */\n-    public int minZ() {\n-        return this.minZ;\n+    public BlockRegion minX(int x) {\n+        return this.minX(x, this);\n     }\n \n-    /**\n-     * the minimum coordinate of the first block z\n-     *\n-     * @return the minimum coordinate z\n-     * @deprecated use {@link #minZ()}\n-     */\n-    @Deprecated\n-    public int getMinZ() {\n-        return this.minZ;\n+    @Override\n+    public BlockRegion minY(int y, BlockRegion dest) {\n+        Preconditions.checkArgument(y <= this.maxY || this.maxY == Integer.MIN_VALUE);\n+        dest.minY = y;\n+        return dest;\n     }\n \n-    /**\n-     * set the minimum coordinate of the first block z\n-     *\n-     * @return the minZ\n-     */\n-    public BlockRegion minZ(int z) {\n-        Preconditions.checkArgument(z <= this.maxZ || this.maxZ == Integer.MIN_VALUE);\n-        this.minZ = z;\n-        return this;\n+    public BlockRegion minY(int y) {\n+        return this.minY(y, this);\n     }\n \n-    /**\n-     * Get the block coordinate minimum corner.\n-     *\n-     * @param dest will hold the result\n-     */\n-    public Vector3i getMin(Vector3i dest) {\n-        return dest.set(minX, minY, minZ);\n+    @Override\n+    public BlockRegion minZ(int z, BlockRegion dest) {\n+        Preconditions.checkArgument(z <= this.maxZ || this.maxZ == Integer.MIN_VALUE);\n+        dest.minZ = z;\n+        return dest;\n     }\n \n-    /**\n-     * Sets the minimum coordinate of the first block for <code>this</code> {@link BlockRegion}\n-     *\n-     * @param min the first coordinate of the first block\n-     * @return this\n-     */\n-    public BlockRegion setMin(Vector3ic min) {\n-        return this.setMin(min.x(), min.y(), min.z());\n+    public BlockRegion minZ(int z) {\n+        return this.minZ(z, this);\n     }\n \n-    /**\n-     * sets the minimum block for this {@link BlockRegion}\n-     *\n-     * @param minX the x coordinate of the first block\n-     * @param minY the y coordinate of the first block\n-     * @param minZ the z coordinate of the first block\n-     * @return this\n-     */\n-    public BlockRegion setMin(int minX, int minY, int minZ) {\n+    @Override\n+    public BlockRegion setMin(int minX, int minY, int minZ, BlockRegion dest) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "533fd585860012b1ee8b3d136c67e68d95909278"}, "originalPosition": 365}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "12ce7edb0167dd39a3eb7c9821cfe1c2acbb2e96", "author": {"user": {"login": "jdrueckert", "name": null}}, "url": "https://github.com/MovingBlocks/Terasology/commit/12ce7edb0167dd39a3eb7c9821cfe1c2acbb2e96", "committedDate": "2020-12-23T21:38:37Z", "message": "refactor: rename addM[in|ax] to addToM[in|ax]"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4MjQyOTU2", "url": "https://github.com/MovingBlocks/Terasology/pull/4326#pullrequestreview-558242956", "createdAt": "2020-12-23T21:49:29Z", "commit": {"oid": "533fd585860012b1ee8b3d136c67e68d95909278"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QyMTo0OTozMFrOIK3rgw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QyMTo0OTozMFrOIK3rgw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODI2ODkzMQ==", "bodyText": "I'm not sure this is correct \ud83e\udd14 I think we are missing the 0.5f margin to each side, e.g.,\n// bounding box: (.5, .5, .5)..(1.5, 1.5, 1.5)\nnew BlockRegion(1,1,1).expand(0.5f, 0.5f, 0.5f) == new BlockRegion(0,0,0, 2,2,2)\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    return this.expand(\n          \n          \n            \n                            Math.roundUsing(dx, RoundingMode.FLOOR),\n          \n          \n            \n                            Math.roundUsing(dy, RoundingMode.FLOOR),\n          \n          \n            \n                            Math.roundUsing(dz, RoundingMode.FLOOR),\n          \n          \n            \n                            dest);\n          \n          \n            \n                }\n          \n          \n            \n                    return this.expand(\n          \n          \n            \n                            Math.roundUsing(dx + 0.5f, RoundingMode.FLOOR),\n          \n          \n            \n                            Math.roundUsing(dy + 0.5f, RoundingMode.FLOOR),\n          \n          \n            \n                            Math.roundUsing(dz + 0.5f, RoundingMode.FLOOR),\n          \n          \n            \n                            dest);\n          \n          \n            \n                }", "url": "https://github.com/MovingBlocks/Terasology/pull/4326#discussion_r548268931", "createdAt": "2020-12-23T21:49:30Z", "author": {"login": "skaldarnar"}, "path": "engine/src/main/java/org/terasology/world/block/BlockRegionc.java", "diffHunk": "@@ -0,0 +1,799 @@\n+// Copyright 2020 The Terasology Foundation\n+// SPDX-License-Identifier: Apache-2.0\n+package org.terasology.world.block;\n+\n+import org.joml.AABBf;\n+import org.joml.Intersectionf;\n+import org.joml.LineSegmentf;\n+import org.joml.Math;\n+import org.joml.Matrix4fc;\n+import org.joml.Planef;\n+import org.joml.Rayf;\n+import org.joml.RoundingMode;\n+import org.joml.Spheref;\n+import org.joml.Vector2f;\n+import org.joml.Vector3f;\n+import org.joml.Vector3fc;\n+import org.joml.Vector3i;\n+import org.joml.Vector3ic;\n+\n+import java.util.Iterator;\n+import java.util.Optional;\n+\n+/**\n+ * An immutable, bounded, axis-aligned volume in space denoting a collection of blocks contained within.\n+ */\n+public interface BlockRegionc extends Iterable<Vector3ic> {\n+\n+    // -- ITERABLE ---------------------------------------------------------------------------------------------------//\n+\n+    /**\n+     * Iterate over the blocks in the block region, where the same {@link Vector3ic} is reused for low memory\n+     * footprint.\n+     * <p>\n+     * Do not store the elements directly or use them outside the context of the iterator as they will change when the\n+     * iterator is advanced. You may create new vectors from the elements if necessary, e.g.:\n+     * <pre>\n+     *     for (Vector3ic p : region) {\n+     *         Vector3i pos = new Vector3i(p);\n+     *         // use 'pos' instead of 'p'\n+     *     }\n+     * </pre>\n+     */\n+    Iterator<Vector3ic> iterator();\n+\n+    // -- min -------------------------------------------------------------------------------------------------------//\n+\n+    /**\n+     * The x-coordinate of the minimum corner\n+     */\n+    int minX();\n+\n+    /**\n+     * The y-coordinate of the minimum corner\n+     */\n+    int minY();\n+\n+    /**\n+     * The z-coordinate of the minimum corner\n+     */\n+    int minZ();\n+\n+    /**\n+     * Get the block coordinate of the minimum corner.\n+     *\n+     * @param dest will hold the result\n+     * @return {@code dest}\n+     */\n+    default Vector3i getMin(Vector3i dest) {\n+        return dest.set(minX(), minY(), minZ());\n+    }\n+\n+    /**\n+     * Set the minimum x-coordinate of the region.\n+     *\n+     * @param dest destination; will hold the result\n+     * @return {@code dest} (after modification)\n+     * @throws IllegalArgumentException if {@code x} is greater than the maximum x coordinate\n+     */\n+    BlockRegion minX(int x, BlockRegion dest);\n+\n+    /**\n+     * Set the minimum y-coordinate of the region.\n+     *\n+     * @param dest destination; will hold the result\n+     * @return {@code dest} (after modification)\n+     * @throws IllegalArgumentException if {@code y} is greater than the maximum y coordinate\n+     */\n+    BlockRegion minY(int y, BlockRegion dest);\n+\n+    /**\n+     * Set the minimum z-coordinate of the region.\n+     *\n+     * @param dest destination; will hold the result\n+     * @return {@code dest} (after modification)\n+     * @throws IllegalArgumentException if {@code z} is greater than the maximum z coordinate\n+     */\n+    BlockRegion minZ(int z, BlockRegion dest);\n+\n+    /**\n+     * Set the coordinates of the minimum corner for this region.\n+     *\n+     * @param dest destination; will hold the result\n+     * @return {@code dest} (after modification)\n+     * @throws IllegalArgumentException if any dimension is greater than the respective component of the maximum\n+     *         corner\n+     */\n+    BlockRegion setMin(int x, int y, int z, BlockRegion dest);\n+\n+    /**\n+     * Set the coordinates of the minimum corner for this region.\n+     *\n+     * @param dest destination; will hold the result\n+     * @return {@code dest} (after modification)\n+     * @throws IllegalArgumentException if any dimension is greater than the respective component of the maximum\n+     *         corner\n+     */\n+    default BlockRegion setMin(Vector3ic min, BlockRegion dest) {\n+        return this.setMin(min.x(), min.y(), min.z(), dest);\n+    }\n+\n+    /**\n+     * Translate the minimum corner of the region by adding given {@code (dx, dy, dz)}.\n+     *\n+     * @param dx the number of blocks to add to the minimum corner on the x axis\n+     * @param dy the number of blocks to add to the minimum corner on the y axis\n+     * @param dz the number of blocks to add to the minimum corner on the z axis\n+     * @param dest destination; will hold the result\n+     * @return {@code dest} (after modification)\n+     * @throws IllegalArgumentException if the resulting region would be {@link #isValid() invalid}.\n+     */\n+    default BlockRegion addMin(int dx, int dy, int dz, BlockRegion dest) {\n+        return this.setMin(minX() + dx, minY() + dy, minZ() + dz, dest);\n+    }\n+\n+    /**\n+     * Translate the minimum corner of the region by adding given {@code (dx, dy, dz)}.\n+     *\n+     * @param dmin the translation vector for the minimum corner\n+     * @param dest destination; will hold the result\n+     * @return {@code dest} (after modification)\n+     * @throws IllegalArgumentException if the resulting region would be {@link #isValid() invalid}.\n+     */\n+    default BlockRegion addMin(Vector3ic dmin, BlockRegion dest) {\n+        return this.addMin(dmin.x(), dmin.y(), dmin.z(), dest);\n+    }\n+\n+    // -- max -------------------------------------------------------------------------------------------------------//\n+\n+    /**\n+     * The x-coordinate of the maximum corner\n+     */\n+    int maxX();\n+\n+    /**\n+     * The y-coordinate of the maximum corner\n+     */\n+    int maxY();\n+\n+    /**\n+     * The z-coordinate of the maximum corner\n+     */\n+    int maxZ();\n+\n+    /**\n+     * Get the block coordinate of the maximum corner.\n+     *\n+     * @param dest will hold the result\n+     * @return {@code dest}\n+     */\n+    default Vector3i getMax(Vector3i dest) {\n+        return dest.set(maxX(), maxY(), maxZ());\n+    }\n+\n+    /**\n+     * Set the maximum x-coordinate of the region.\n+     *\n+     * @param dest destination; will hold the result\n+     * @return {@code dest} (after modification)\n+     * @throws IllegalArgumentException if {@code x} is smaller than the minimum x-coordinate\n+     */\n+    BlockRegion maxX(int x, BlockRegion dest);\n+\n+    /**\n+     * Set the maximum y-coordinate of the region.\n+     *\n+     * @param dest destination; will hold the result\n+     * @return {@code dest} (after modification)\n+     * @throws IllegalArgumentException if {@code x} is smaller than the minimum x-coordinate\n+     */\n+    BlockRegion maxY(int y, BlockRegion dest);\n+\n+    /**\n+     * Set the maximum z-coordinate of the region.\n+     *\n+     * @param dest destination; will hold the result\n+     * @return {@code dest} (after modification)\n+     * @throws IllegalArgumentException if {@code x} is smaller than the minimum x-coordinate\n+     */\n+    BlockRegion maxZ(int z, BlockRegion dest);\n+\n+    /**\n+     * Set the coordinates of the maximum corner for this region.\n+     *\n+     * @param dest destination; will hold the result\n+     * @return {@code dest} (after modification)\n+     * @throws IllegalArgumentException if any dimension is smaller than the respective component of the minimum\n+     *         corner\n+     */\n+    BlockRegion setMax(int x, int y, int z, BlockRegion dest);\n+\n+    /**\n+     * Set the coordinates of the maximum corner for this region.\n+     *\n+     * @param dest destination; will hold the result\n+     * @return {@code dest} (after modification)\n+     * @throws IllegalArgumentException if any dimension is smaller than the respective component of the minimum\n+     *         corner\n+     */\n+    default BlockRegion setMax(Vector3ic max, BlockRegion dest) {\n+        return this.setMax(max.x(), max.y(), max.z(), dest);\n+    }\n+\n+    /**\n+     * Translate the maximum corner of the region by adding given {@code (dx, dy, dz)}.\n+     *\n+     * @param dx the number of blocks to add to the maximum corner on the x axis\n+     * @param dy the number of blocks to add to the maximum corner on the y axis\n+     * @param dz the number of blocks to add to the maximum corner on the z axis\n+     * @param dest destination; will hold the result\n+     * @return {@code dest} (after modification)\n+     * @throws IllegalArgumentException if the resulting region would be {@link #isValid() invalid}.\n+     */\n+    default BlockRegion addMax(int dx, int dy, int dz, BlockRegion dest) {\n+        return this.setMax(maxX() + dx, maxY() + dy, maxZ() + dz, dest);\n+    }\n+\n+    /**\n+     * Translate the maximum corner of the region by adding given {@code (dx, dy, dz)}.\n+     *\n+     * @param dmax the translation vector for the maximum corner\n+     * @return {@code dest} (after modification)\n+     * @throws IllegalArgumentException if the resulting region would be {@link #isValid() invalid}.\n+     */\n+    default BlockRegion addMax(Vector3ic dmax, BlockRegion dest) {\n+        return this.addMax(dmax.x(), dmax.y(), dmax.z(), dest);\n+    }\n+\n+    // -- size ------------------------------------------------------------------------------------------------------//\n+\n+    /**\n+     * The number of blocks on the x axis.\n+     */\n+    default int getSizeX() {\n+        return maxX() - minX() + 1;\n+    }\n+\n+    /**\n+     * The number of blocks on the y axis.\n+     */\n+    default int getSizeY() {\n+        return maxY() - minY() + 1;\n+    }\n+\n+    /**\n+     * The number of blocks on the z axis.\n+     */\n+    default int getSizeZ() {\n+        return maxZ() - minZ() + 1;\n+    }\n+\n+    /**\n+     * The number of blocks in this region along the +x, +y, +z  axis from the minimum to the maximum corner.\n+     *\n+     * @param dest will hold the result\n+     * @return dest\n+     */\n+    default Vector3i getSize(Vector3i dest) {\n+        return dest.set(getSizeX(), getSizeY(), getSizeZ());\n+    }\n+\n+    /**\n+     * Set the size of the block region from the minimum corner.\n+     *\n+     * @param x the x coordinate to set the size; must be > 0\n+     * @param y the y coordinate to set the size; must be > 0\n+     * @param z the z coordinate to set the size; must be >\n+     * @param dest destination; will hold the result\n+     * @return {@code dest} (after modification)\n+     * @throws IllegalArgumentException if the size is smaller than or equal to 0 in any dimension\n+     */\n+    BlockRegion setSize(int x, int y, int z, BlockRegion dest);\n+\n+    /**\n+     * Set the size of the block region from the minimum corner.\n+     *\n+     * @param size the size to set; all dimensions must be > 0\n+     * @param dest destination; will hold the result\n+     * @return {@code dest} (after modification)\n+     * @throws IllegalArgumentException if the size is smaller than or equal to 0 in any dimension\n+     */\n+    default BlockRegion setSize(Vector3ic size, BlockRegion dest) {\n+        return this.setSize(size.x(), size.y(), size.z(), dest);\n+    }\n+\n+    /**\n+     * The volume of this region in blocks, i.e., the number of blocks contained in this region.\n+     * <p>\n+     * The volume is computed by\n+     * <pre>\n+     *     volume = sizeX * sizeY * sizeZ;\n+     * </pre>\n+     *\n+     * @return the volume in blocks\n+     */\n+    default int volume() {\n+        return getSizeX() * getSizeY() * getSizeZ();\n+    }\n+\n+    // -- world -----------------------------------------------------------------------------------------------------//\n+\n+    /**\n+     * The bounding box in world coordinates.\n+     * <p>\n+     * The bounding box of a single block at {@code (x, y, z)} is centered at the integer coordinate {@code (x, y, z)}\n+     * and extents by {@code 0.5} in each dimension.\n+     *\n+     * @param dest will hold the result\n+     * @return {@code dest}\n+     */\n+    //TODO: 1.9.26 has a constant interface for aabbf\n+    default AABBf getBounds(AABBf dest) {\n+        dest.minX = minX() - .5f;\n+        dest.minY = minY() - .5f;\n+        dest.minZ = minZ() - .5f;\n+\n+        dest.maxX = maxX() + .5f;\n+        dest.maxY = maxY() + .5f;\n+        dest.maxZ = maxZ() + .5f;\n+\n+        return dest;\n+    }\n+\n+    /**\n+     * The center of the region in world coordinates if the region is valid; {@link Float#NaN} otherwise.\n+     *\n+     * @param dest will hold the result\n+     * @return {@code dest}\n+     */\n+    default Vector3f center(Vector3f dest) {\n+        if (!this.isValid()) {\n+            return dest.set(Float.NaN);\n+        }\n+        return dest.set(\n+                (this.minX() - .5f) + ((this.maxX() - this.minX() + 1.0f) / 2.0f),\n+                (this.minY() - .5f) + ((this.maxY() - this.minY() + 1.0f) / 2.0f),\n+                (this.minZ() - .5f) + ((this.maxZ() - this.minZ() + 1.0f) / 2.0f)\n+        );\n+    }\n+\n+    // -- IN-PLACE MUTATION -----------------------------------------------------------------------------------------//\n+    // -- union -----------------------------------------------------------------------------------------------------//\n+\n+    /**\n+     * Compute the union of this region and the given block coordinate.\n+     *\n+     * @param x the x coordinate of the block\n+     * @param y the y coordinate of the block\n+     * @param z the z coordinate of the block\n+     * @param dest destination; will hold the result\n+     * @return {@code dest} (after modification)\n+     */\n+    BlockRegion union(int x, int y, int z, BlockRegion dest);\n+\n+    /**\n+     * Compute the union of this region and the given block coordinate.\n+     *\n+     * @param pos the position of the block\n+     * @param dest destination; will hold the result\n+     * @return {@code dest} (after modification)\n+     */\n+    default BlockRegion union(Vector3ic pos, BlockRegion dest) {\n+        return this.union(pos.x(), pos.y(), pos.z(), dest);\n+    }\n+\n+    /**\n+     * Compute the union of this region and the other region.\n+     *\n+     * @param other {@link BlockRegion}\n+     * @param dest destination; will hold the result\n+     * @return @code dest} (after modification)\n+     */\n+    default BlockRegion union(BlockRegionc other, BlockRegion dest) {\n+        return this.union(other.minX(), other.minY(), other.minZ(), dest)\n+                .union(other.maxX(), other.maxY(), other.maxZ(), dest);\n+    }\n+\n+    // -- intersect -------------------------------------------------------------------------------------------------//\n+\n+    /**\n+     * Compute the intersection of this region with the {@code other} region.\n+     * <p>\n+     * NOTE: If the regions don't intersect the destination region will become invalid!\n+     *\n+     * @param other the other region\n+     * @param dest destination; will hold the result\n+     * @return {@code dest} (after modification) or {@link Optional#empty()} if the regions don't intersect\n+     */\n+    Optional<BlockRegion> intersect(BlockRegionc other, BlockRegion dest);\n+\n+    // ---------------------------------------------------------------------------------------------------------------//\n+\n+    /**\n+     * Translate this region by the given vector {@code (x, y, z))}.\n+     *\n+     * @param dx the x coordinate to translate by\n+     * @param dy the y coordinate to translate by\n+     * @param dz the z coordinate to translate by\n+     * @param dest destination; will hold the result\n+     * @return {@code dest} (after modification)\n+     */\n+    BlockRegion translate(int dx, int dy, int dz, BlockRegion dest);\n+\n+    /**\n+     * Translate this region by the given vector {@code vec}.\n+     *\n+     * @param vec the vector to translate by\n+     * @param dest destination; will hold the result\n+     * @return {@code dest} (after modification)\n+     */\n+    default BlockRegion translate(Vector3ic vec, BlockRegion dest) {\n+        return this.translate(vec.x(), vec.y(), vec.z(), dest);\n+    }\n+\n+    // -- expand -----------------------------------------------------------------------------------------------------//\n+\n+    /**\n+     * Expand this region by adding the given {@code extents} for each face of the region.\n+     *\n+     * @param dx the amount of blocks to extend this region by along the x axis in both directions\n+     * @param dy the amount of blocks to extend this region by along the y axis in both directions\n+     * @param dz the amount of blocks to extend this region by along the z axis in both directions\n+     * @param dest destination; will hold the result\n+     * @return {@code dest} (after modification)\n+     * @throws IllegalArgumentException if extending this region would result in any non-positive dimension\n+     */\n+    BlockRegion expand(int dx, int dy, int dz, BlockRegion dest);\n+\n+    /**\n+     * Expand this region by adding the given {@code extents} for each face of a region.\n+     *\n+     * @param vec the amount of blocks to expand this region by\n+     * @param dest destination; will hold the result\n+     * @return {@code dest} (after modification)\n+     * @throws IllegalArgumentException if extending this region would result in any non-positive dimension\n+     */\n+    default BlockRegion expand(Vector3ic vec, BlockRegion dest) {\n+        return this.expand(vec.x(), vec.y(), vec.z(), dest);\n+    }\n+\n+    /**\n+     * Extend this region by adding the given {@code extents} for each face of a region.\n+     * <p>\n+     * The extents will be floored for each dimension.\n+     *\n+     * @param dx the amount of blocks to extend this region by along the x axis in both directions\n+     * @param dy the amount of blocks to extend this region by along the y axis in both directions\n+     * @param dz the amount of blocks to extend this region by along the z axis in both directions\n+     * @param dest destination; will hold the result\n+     * @return {@code dest} (after modification)\n+     * @throws IllegalArgumentException if extending this region would result in any non-positive dimension\n+     */\n+    //TODO: why do we offer float variants here?\n+    default BlockRegion expand(float dx, float dy, float dz, BlockRegion dest) {\n+        return this.expand(\n+                Math.roundUsing(dx, RoundingMode.FLOOR),\n+                Math.roundUsing(dy, RoundingMode.FLOOR),\n+                Math.roundUsing(dz, RoundingMode.FLOOR),\n+                dest);\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "533fd585860012b1ee8b3d136c67e68d95909278"}, "originalPosition": 479}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "067a5dca8b24f8ceb55e6e899770e2966aad1c1a", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/067a5dca8b24f8ceb55e6e899770e2966aad1c1a", "committedDate": "2020-12-23T22:42:30Z", "message": "fix: rename rename addM[in|ax] to addToM[in|ax] in interface class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fd8b77246293594425aa72ea03135dc2f9334370", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/fd8b77246293594425aa72ea03135dc2f9334370", "committedDate": "2020-12-23T22:43:55Z", "message": "remove expand with float arguments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b359b2e64c078c8ddf0e72bce03b9fd4776a0584", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/b359b2e64c078c8ddf0e72bce03b9fd4776a0584", "committedDate": "2020-12-23T22:47:07Z", "message": "fix(BlockRegion): correct some implementation errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe5423f19b2c1103a403ae96a65e6a7611f6c389", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/fe5423f19b2c1103a403ae96a65e6a7611f6c389", "committedDate": "2020-12-23T22:59:12Z", "message": "test(BlockRegion): fix broken test; remove expand(float) tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4MzA4MDIw", "url": "https://github.com/MovingBlocks/Terasology/pull/4326#pullrequestreview-558308020", "createdAt": "2020-12-24T02:32:32Z", "commit": {"oid": "fe5423f19b2c1103a403ae96a65e6a7611f6c389"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNFQwMjozMjozMlrOIK87Ow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNFQwMjo1MzoyMFrOIK9Lig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODM1NDg3NQ==", "bodyText": "A setter like this just looks kind of strange to me. all it does is write to the dest with a substitution of a single value.  I don't really seeing this adding much to the API.\nBlockRegion a = new BlockRegion(0,0,0);\n\nBlockRegion b = new BlockRegion(a).minY(-1);\nvs\nBlockRegion b = a.minY(-1, new BlockRegion(BlockRegion.INVALID));", "url": "https://github.com/MovingBlocks/Terasology/pull/4326#discussion_r548354875", "createdAt": "2020-12-24T02:32:32Z", "author": {"login": "pollend"}, "path": "engine/src/main/java/org/terasology/world/block/BlockRegion.java", "diffHunk": "@@ -93,550 +104,349 @@\n      *\n      * @param source the block region to copy.\n      */\n-    public BlockRegion(BlockRegion source) {\n+    public BlockRegion(BlockRegionc source) {\n         this.set(source);\n     }\n \n+    // -- ITERABLE ---------------------------------------------------------------------------------------------------//\n+\n+    @Override\n+    public Iterator<Vector3ic> iterator() {\n+        return new Iterator<Vector3ic>() {\n+            private Vector3i current = null;\n+            private final Vector3i next = getMin(new Vector3i());\n+\n+            public boolean findNext() {\n+                if (current.equals(next)) {\n+                    next.z++;\n+                    if (next.z > maxZ) {\n+                        next.z = minZ;\n+                        next.y++;\n+                        if (next.y > maxY) {\n+                            next.y = minY;\n+                            next.x++;\n+                        }\n+                    }\n+                    return contains(next);\n+                }\n+                return true;\n+            }\n+\n+            @Override\n+            public boolean hasNext() {\n+                if (!isValid()) {\n+                    return false;\n+                }\n+                if (current == null) {\n+                    return true;\n+                }\n+\n+                if (current.equals(next)) {\n+                    return findNext();\n+                }\n+                return contains(next);\n+            }\n+\n+            @Override\n+            public Vector3ic next() {\n+                if (current == null) {\n+                    current = new Vector3i(next);\n+                    return next;\n+                }\n+\n+                if (current.equals(next)) {\n+                    if (findNext()) {\n+                        return next;\n+                    }\n+                    return null;\n+                }\n+                current.set(next);\n+                return next;\n+            }\n+        };\n+    }\n+\n     // -- GETTERS & SETTERS ------------------------------------------------------------------------------------------//\n \n     /**\n-     * set source to current region\n+     * Reset both the minimum and maximum corner of this region.\n      *\n-     * @param source the source region\n-     * @return this\n+     * @return this region (after modification)\n+     * @throws IllegalArgumentException if the given coordinates for min and max are {@link #isValid()\n+     *         invalid}.\n      */\n-    public BlockRegion set(BlockRegion source) {\n-        this.minX = source.minX;\n-        this.minY = source.minY;\n-        this.minZ = source.minZ;\n-\n-        this.maxX = source.maxX;\n-        this.maxY = source.maxY;\n-        this.maxZ = source.maxZ;\n-        return this;\n-    }\n+    public BlockRegion set(int minX, int minY, int minZ, int maxX, int maxY, int maxZ) {\n+        Preconditions.checkArgument(minX <= maxX || (minX == INVALID.minX() && maxX == INVALID.maxX()));\n+        Preconditions.checkArgument(minY <= maxY || (minY == INVALID.minY() && maxY == INVALID.maxY()));\n+        Preconditions.checkArgument(minZ <= maxZ || (minZ == INVALID.minZ() && maxZ == INVALID.maxZ()));\n+        this.minX = minX;\n+        this.minY = minY;\n+        this.minZ = minZ;\n \n-    public BlockRegion copy() {\n-        return new BlockRegion(this);\n+        this.maxX = maxX;\n+        this.maxY = maxY;\n+        this.maxZ = maxZ;\n+        return this;\n     }\n \n-    // -- min --------------------------------------------------------------------------------------------------------//\n-\n     /**\n-     * The x-coordinate of the minimum corner\n+     * Reset both the minimum and maximum corner of this region.\n+     *\n+     * @return this region (after modification)\n+     * @throws IllegalArgumentException if the given coordinates for min and max are {@link #isValid()\n+     *         invalid}.\n      */\n-    public int minX() {\n-        return this.minX;\n+    public BlockRegion set(Vector3ic min, Vector3ic max) {\n+        return this.set(min.x(), min.y(), min.z(), max.x(), max.y(), max.z());\n     }\n \n     /**\n-     * the minimum coordinate of the first block x\n+     * Reset this region to have the same minimum and maximum corner as the {@code source} region.\n      *\n-     * @return the minimum coordinate x\n-     * @deprecated use {@link #minX()}\n+     * @return this region (after modification)\n+     * @throws IllegalArgumentException if the given coordinates for min and max are {@link #isValid()\n+     *         invalid}.\n      */\n-    @Deprecated\n-    public int getMinX() {\n-        return this.minX;\n+    public BlockRegion set(BlockRegionc source) {\n+        return this.set(source.minX(), source.minY(), source.minZ(), source.maxX(), source.maxY(), source.maxZ());\n     }\n \n-    /**\n-     * set the minimum coordinate of the first block x\n-     *\n-     * @return the minX\n-     */\n-    public BlockRegion minX(int x) {\n-        Preconditions.checkArgument(x <= this.maxX || this.maxX == Integer.MIN_VALUE);\n-        this.minX = x;\n-        return this;\n+    // -- min --------------------------------------------------------------------------------------------------------//\n+\n+    @Override\n+    public int minX() {\n+        return this.minX;\n     }\n \n-    /**\n-     * The y-coordinate of the minimum corner\n-     */\n+    @Override\n     public int minY() {\n         return this.minY;\n     }\n \n-    /**\n-     * the minimum coordinate of the first block y\n-     *\n-     * @return the minimum coordinate y\n-     * @deprecated use {@link #minY()}\n-     */\n-    @Deprecated\n-    public int getMinY() {\n-        return this.minY;\n+    @Override\n+    public int minZ() {\n+        return this.minZ;\n     }\n \n-    /**\n-     * set the minimum coordinate of the first block y\n-     *\n-     * @return the minY\n-     */\n-    public BlockRegion minY(int y) {\n-        Preconditions.checkArgument(y <= this.maxY || this.maxY == Integer.MIN_VALUE);\n-        this.minY = y;\n-        return this;\n+    @Override\n+    public BlockRegion minX(int x, BlockRegion dest) {\n+        return dest.set(x, this.minY, this.minZ, this.maxX, this.maxY, this.maxZ);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe5423f19b2c1103a403ae96a65e6a7611f6c389"}, "originalPosition": 295}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODM1NTkzNQ==", "bodyText": "I would drop this as well.", "url": "https://github.com/MovingBlocks/Terasology/pull/4326#discussion_r548355935", "createdAt": "2020-12-24T02:37:46Z", "author": {"login": "pollend"}, "path": "engine/src/main/java/org/terasology/world/block/BlockRegion.java", "diffHunk": "@@ -93,550 +104,349 @@\n      *\n      * @param source the block region to copy.\n      */\n-    public BlockRegion(BlockRegion source) {\n+    public BlockRegion(BlockRegionc source) {\n         this.set(source);\n     }\n \n+    // -- ITERABLE ---------------------------------------------------------------------------------------------------//\n+\n+    @Override\n+    public Iterator<Vector3ic> iterator() {\n+        return new Iterator<Vector3ic>() {\n+            private Vector3i current = null;\n+            private final Vector3i next = getMin(new Vector3i());\n+\n+            public boolean findNext() {\n+                if (current.equals(next)) {\n+                    next.z++;\n+                    if (next.z > maxZ) {\n+                        next.z = minZ;\n+                        next.y++;\n+                        if (next.y > maxY) {\n+                            next.y = minY;\n+                            next.x++;\n+                        }\n+                    }\n+                    return contains(next);\n+                }\n+                return true;\n+            }\n+\n+            @Override\n+            public boolean hasNext() {\n+                if (!isValid()) {\n+                    return false;\n+                }\n+                if (current == null) {\n+                    return true;\n+                }\n+\n+                if (current.equals(next)) {\n+                    return findNext();\n+                }\n+                return contains(next);\n+            }\n+\n+            @Override\n+            public Vector3ic next() {\n+                if (current == null) {\n+                    current = new Vector3i(next);\n+                    return next;\n+                }\n+\n+                if (current.equals(next)) {\n+                    if (findNext()) {\n+                        return next;\n+                    }\n+                    return null;\n+                }\n+                current.set(next);\n+                return next;\n+            }\n+        };\n+    }\n+\n     // -- GETTERS & SETTERS ------------------------------------------------------------------------------------------//\n \n     /**\n-     * set source to current region\n+     * Reset both the minimum and maximum corner of this region.\n      *\n-     * @param source the source region\n-     * @return this\n+     * @return this region (after modification)\n+     * @throws IllegalArgumentException if the given coordinates for min and max are {@link #isValid()\n+     *         invalid}.\n      */\n-    public BlockRegion set(BlockRegion source) {\n-        this.minX = source.minX;\n-        this.minY = source.minY;\n-        this.minZ = source.minZ;\n-\n-        this.maxX = source.maxX;\n-        this.maxY = source.maxY;\n-        this.maxZ = source.maxZ;\n-        return this;\n-    }\n+    public BlockRegion set(int minX, int minY, int minZ, int maxX, int maxY, int maxZ) {\n+        Preconditions.checkArgument(minX <= maxX || (minX == INVALID.minX() && maxX == INVALID.maxX()));\n+        Preconditions.checkArgument(minY <= maxY || (minY == INVALID.minY() && maxY == INVALID.maxY()));\n+        Preconditions.checkArgument(minZ <= maxZ || (minZ == INVALID.minZ() && maxZ == INVALID.maxZ()));\n+        this.minX = minX;\n+        this.minY = minY;\n+        this.minZ = minZ;\n \n-    public BlockRegion copy() {\n-        return new BlockRegion(this);\n+        this.maxX = maxX;\n+        this.maxY = maxY;\n+        this.maxZ = maxZ;\n+        return this;\n     }\n \n-    // -- min --------------------------------------------------------------------------------------------------------//\n-\n     /**\n-     * The x-coordinate of the minimum corner\n+     * Reset both the minimum and maximum corner of this region.\n+     *\n+     * @return this region (after modification)\n+     * @throws IllegalArgumentException if the given coordinates for min and max are {@link #isValid()\n+     *         invalid}.\n      */\n-    public int minX() {\n-        return this.minX;\n+    public BlockRegion set(Vector3ic min, Vector3ic max) {\n+        return this.set(min.x(), min.y(), min.z(), max.x(), max.y(), max.z());\n     }\n \n     /**\n-     * the minimum coordinate of the first block x\n+     * Reset this region to have the same minimum and maximum corner as the {@code source} region.\n      *\n-     * @return the minimum coordinate x\n-     * @deprecated use {@link #minX()}\n+     * @return this region (after modification)\n+     * @throws IllegalArgumentException if the given coordinates for min and max are {@link #isValid()\n+     *         invalid}.\n      */\n-    @Deprecated\n-    public int getMinX() {\n-        return this.minX;\n+    public BlockRegion set(BlockRegionc source) {\n+        return this.set(source.minX(), source.minY(), source.minZ(), source.maxX(), source.maxY(), source.maxZ());\n     }\n \n-    /**\n-     * set the minimum coordinate of the first block x\n-     *\n-     * @return the minX\n-     */\n-    public BlockRegion minX(int x) {\n-        Preconditions.checkArgument(x <= this.maxX || this.maxX == Integer.MIN_VALUE);\n-        this.minX = x;\n-        return this;\n+    // -- min --------------------------------------------------------------------------------------------------------//\n+\n+    @Override\n+    public int minX() {\n+        return this.minX;\n     }\n \n-    /**\n-     * The y-coordinate of the minimum corner\n-     */\n+    @Override\n     public int minY() {\n         return this.minY;\n     }\n \n-    /**\n-     * the minimum coordinate of the first block y\n-     *\n-     * @return the minimum coordinate y\n-     * @deprecated use {@link #minY()}\n-     */\n-    @Deprecated\n-    public int getMinY() {\n-        return this.minY;\n+    @Override\n+    public int minZ() {\n+        return this.minZ;\n     }\n \n-    /**\n-     * set the minimum coordinate of the first block y\n-     *\n-     * @return the minY\n-     */\n-    public BlockRegion minY(int y) {\n-        Preconditions.checkArgument(y <= this.maxY || this.maxY == Integer.MIN_VALUE);\n-        this.minY = y;\n-        return this;\n+    @Override\n+    public BlockRegion minX(int x, BlockRegion dest) {\n+        return dest.set(x, this.minY, this.minZ, this.maxX, this.maxY, this.maxZ);\n     }\n \n-    /**\n-     * The z-coordinate of the minimum corner\n-     */\n-    public int minZ() {\n-        return this.minZ;\n+    public BlockRegion minX(int x) {\n+        return this.minX(x, this);\n     }\n \n-    /**\n-     * the minimum coordinate of the first block z\n-     *\n-     * @return the minimum coordinate z\n-     * @deprecated use {@link #minZ()}\n-     */\n-    @Deprecated\n-    public int getMinZ() {\n-        return this.minZ;\n+    @Override\n+    public BlockRegion minY(int y, BlockRegion dest) {\n+        return dest.set(this.minX, y, this.minZ, this.maxX, this.maxY, this.maxZ);\n     }\n \n-    /**\n-     * set the minimum coordinate of the first block z\n-     *\n-     * @return the minZ\n-     */\n-    public BlockRegion minZ(int z) {\n-        Preconditions.checkArgument(z <= this.maxZ || this.maxZ == Integer.MIN_VALUE);\n-        this.minZ = z;\n-        return this;\n+    public BlockRegion minY(int y) {\n+        return this.minY(y, this);\n     }\n \n-    /**\n-     * Get the block coordinate minimum corner.\n-     *\n-     * @param dest will hold the result\n-     */\n-    public Vector3i getMin(Vector3i dest) {\n-        return dest.set(minX, minY, minZ);\n+    @Override\n+    public BlockRegion minZ(int z, BlockRegion dest) {\n+        return dest.set(this.minX, this.minY, z, this.maxX, this.maxY, this.maxZ);\n     }\n \n-    /**\n-     * Sets the minimum coordinate of the first block for <code>this</code> {@link BlockRegion}\n-     *\n-     * @param min the first coordinate of the first block\n-     * @return this\n-     */\n-    public BlockRegion setMin(Vector3ic min) {\n-        return this.setMin(min.x(), min.y(), min.z());\n+    public BlockRegion minZ(int z) {\n+        return this.minZ(z, this);\n     }\n \n-    /**\n-     * sets the minimum block for this {@link BlockRegion}\n-     *\n-     * @param minX the x coordinate of the first block\n-     * @param minY the y coordinate of the first block\n-     * @param minZ the z coordinate of the first block\n-     * @return this\n-     */\n-    public BlockRegion setMin(int minX, int minY, int minZ) {\n-        Preconditions.checkArgument(minX <= this.maxX || this.maxX == Integer.MIN_VALUE);\n-        Preconditions.checkArgument(minY <= this.maxY || this.maxX == Integer.MIN_VALUE);\n-        Preconditions.checkArgument(minZ <= this.maxZ || this.maxX == Integer.MIN_VALUE);\n-        this.minX = minX;\n-        this.minY = minY;\n-        this.minZ = minZ;\n-        return this;\n+    @Override\n+    public BlockRegion setMin(int minX, int minY, int minZ, BlockRegion dest) {\n+        return dest.set(minX, minY, minZ, this.maxX, this.maxY, this.maxZ);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe5423f19b2c1103a403ae96a65e6a7611f6c389"}, "originalPosition": 376}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODM1NjY3Ng==", "bodyText": "I would drop this as well. just as easy to just do new BlockRegion(a).setSize(3,3,3) or b.set(a).setSize(3,3,3) vs a.setSize(3,3,3, new BlockRegion(BlockRegion.INVALID));. A setter that sets the value of another object is kind of strange?", "url": "https://github.com/MovingBlocks/Terasology/pull/4326#discussion_r548356676", "createdAt": "2020-12-24T02:41:38Z", "author": {"login": "pollend"}, "path": "engine/src/main/java/org/terasology/world/block/BlockRegion.java", "diffHunk": "@@ -93,550 +104,349 @@\n      *\n      * @param source the block region to copy.\n      */\n-    public BlockRegion(BlockRegion source) {\n+    public BlockRegion(BlockRegionc source) {\n         this.set(source);\n     }\n \n+    // -- ITERABLE ---------------------------------------------------------------------------------------------------//\n+\n+    @Override\n+    public Iterator<Vector3ic> iterator() {\n+        return new Iterator<Vector3ic>() {\n+            private Vector3i current = null;\n+            private final Vector3i next = getMin(new Vector3i());\n+\n+            public boolean findNext() {\n+                if (current.equals(next)) {\n+                    next.z++;\n+                    if (next.z > maxZ) {\n+                        next.z = minZ;\n+                        next.y++;\n+                        if (next.y > maxY) {\n+                            next.y = minY;\n+                            next.x++;\n+                        }\n+                    }\n+                    return contains(next);\n+                }\n+                return true;\n+            }\n+\n+            @Override\n+            public boolean hasNext() {\n+                if (!isValid()) {\n+                    return false;\n+                }\n+                if (current == null) {\n+                    return true;\n+                }\n+\n+                if (current.equals(next)) {\n+                    return findNext();\n+                }\n+                return contains(next);\n+            }\n+\n+            @Override\n+            public Vector3ic next() {\n+                if (current == null) {\n+                    current = new Vector3i(next);\n+                    return next;\n+                }\n+\n+                if (current.equals(next)) {\n+                    if (findNext()) {\n+                        return next;\n+                    }\n+                    return null;\n+                }\n+                current.set(next);\n+                return next;\n+            }\n+        };\n+    }\n+\n     // -- GETTERS & SETTERS ------------------------------------------------------------------------------------------//\n \n     /**\n-     * set source to current region\n+     * Reset both the minimum and maximum corner of this region.\n      *\n-     * @param source the source region\n-     * @return this\n+     * @return this region (after modification)\n+     * @throws IllegalArgumentException if the given coordinates for min and max are {@link #isValid()\n+     *         invalid}.\n      */\n-    public BlockRegion set(BlockRegion source) {\n-        this.minX = source.minX;\n-        this.minY = source.minY;\n-        this.minZ = source.minZ;\n-\n-        this.maxX = source.maxX;\n-        this.maxY = source.maxY;\n-        this.maxZ = source.maxZ;\n-        return this;\n-    }\n+    public BlockRegion set(int minX, int minY, int minZ, int maxX, int maxY, int maxZ) {\n+        Preconditions.checkArgument(minX <= maxX || (minX == INVALID.minX() && maxX == INVALID.maxX()));\n+        Preconditions.checkArgument(minY <= maxY || (minY == INVALID.minY() && maxY == INVALID.maxY()));\n+        Preconditions.checkArgument(minZ <= maxZ || (minZ == INVALID.minZ() && maxZ == INVALID.maxZ()));\n+        this.minX = minX;\n+        this.minY = minY;\n+        this.minZ = minZ;\n \n-    public BlockRegion copy() {\n-        return new BlockRegion(this);\n+        this.maxX = maxX;\n+        this.maxY = maxY;\n+        this.maxZ = maxZ;\n+        return this;\n     }\n \n-    // -- min --------------------------------------------------------------------------------------------------------//\n-\n     /**\n-     * The x-coordinate of the minimum corner\n+     * Reset both the minimum and maximum corner of this region.\n+     *\n+     * @return this region (after modification)\n+     * @throws IllegalArgumentException if the given coordinates for min and max are {@link #isValid()\n+     *         invalid}.\n      */\n-    public int minX() {\n-        return this.minX;\n+    public BlockRegion set(Vector3ic min, Vector3ic max) {\n+        return this.set(min.x(), min.y(), min.z(), max.x(), max.y(), max.z());\n     }\n \n     /**\n-     * the minimum coordinate of the first block x\n+     * Reset this region to have the same minimum and maximum corner as the {@code source} region.\n      *\n-     * @return the minimum coordinate x\n-     * @deprecated use {@link #minX()}\n+     * @return this region (after modification)\n+     * @throws IllegalArgumentException if the given coordinates for min and max are {@link #isValid()\n+     *         invalid}.\n      */\n-    @Deprecated\n-    public int getMinX() {\n-        return this.minX;\n+    public BlockRegion set(BlockRegionc source) {\n+        return this.set(source.minX(), source.minY(), source.minZ(), source.maxX(), source.maxY(), source.maxZ());\n     }\n \n-    /**\n-     * set the minimum coordinate of the first block x\n-     *\n-     * @return the minX\n-     */\n-    public BlockRegion minX(int x) {\n-        Preconditions.checkArgument(x <= this.maxX || this.maxX == Integer.MIN_VALUE);\n-        this.minX = x;\n-        return this;\n+    // -- min --------------------------------------------------------------------------------------------------------//\n+\n+    @Override\n+    public int minX() {\n+        return this.minX;\n     }\n \n-    /**\n-     * The y-coordinate of the minimum corner\n-     */\n+    @Override\n     public int minY() {\n         return this.minY;\n     }\n \n-    /**\n-     * the minimum coordinate of the first block y\n-     *\n-     * @return the minimum coordinate y\n-     * @deprecated use {@link #minY()}\n-     */\n-    @Deprecated\n-    public int getMinY() {\n-        return this.minY;\n+    @Override\n+    public int minZ() {\n+        return this.minZ;\n     }\n \n-    /**\n-     * set the minimum coordinate of the first block y\n-     *\n-     * @return the minY\n-     */\n-    public BlockRegion minY(int y) {\n-        Preconditions.checkArgument(y <= this.maxY || this.maxY == Integer.MIN_VALUE);\n-        this.minY = y;\n-        return this;\n+    @Override\n+    public BlockRegion minX(int x, BlockRegion dest) {\n+        return dest.set(x, this.minY, this.minZ, this.maxX, this.maxY, this.maxZ);\n     }\n \n-    /**\n-     * The z-coordinate of the minimum corner\n-     */\n-    public int minZ() {\n-        return this.minZ;\n+    public BlockRegion minX(int x) {\n+        return this.minX(x, this);\n     }\n \n-    /**\n-     * the minimum coordinate of the first block z\n-     *\n-     * @return the minimum coordinate z\n-     * @deprecated use {@link #minZ()}\n-     */\n-    @Deprecated\n-    public int getMinZ() {\n-        return this.minZ;\n+    @Override\n+    public BlockRegion minY(int y, BlockRegion dest) {\n+        return dest.set(this.minX, y, this.minZ, this.maxX, this.maxY, this.maxZ);\n     }\n \n-    /**\n-     * set the minimum coordinate of the first block z\n-     *\n-     * @return the minZ\n-     */\n-    public BlockRegion minZ(int z) {\n-        Preconditions.checkArgument(z <= this.maxZ || this.maxZ == Integer.MIN_VALUE);\n-        this.minZ = z;\n-        return this;\n+    public BlockRegion minY(int y) {\n+        return this.minY(y, this);\n     }\n \n-    /**\n-     * Get the block coordinate minimum corner.\n-     *\n-     * @param dest will hold the result\n-     */\n-    public Vector3i getMin(Vector3i dest) {\n-        return dest.set(minX, minY, minZ);\n+    @Override\n+    public BlockRegion minZ(int z, BlockRegion dest) {\n+        return dest.set(this.minX, this.minY, z, this.maxX, this.maxY, this.maxZ);\n     }\n \n-    /**\n-     * Sets the minimum coordinate of the first block for <code>this</code> {@link BlockRegion}\n-     *\n-     * @param min the first coordinate of the first block\n-     * @return this\n-     */\n-    public BlockRegion setMin(Vector3ic min) {\n-        return this.setMin(min.x(), min.y(), min.z());\n+    public BlockRegion minZ(int z) {\n+        return this.minZ(z, this);\n     }\n \n-    /**\n-     * sets the minimum block for this {@link BlockRegion}\n-     *\n-     * @param minX the x coordinate of the first block\n-     * @param minY the y coordinate of the first block\n-     * @param minZ the z coordinate of the first block\n-     * @return this\n-     */\n-    public BlockRegion setMin(int minX, int minY, int minZ) {\n-        Preconditions.checkArgument(minX <= this.maxX || this.maxX == Integer.MIN_VALUE);\n-        Preconditions.checkArgument(minY <= this.maxY || this.maxX == Integer.MIN_VALUE);\n-        Preconditions.checkArgument(minZ <= this.maxZ || this.maxX == Integer.MIN_VALUE);\n-        this.minX = minX;\n-        this.minY = minY;\n-        this.minZ = minZ;\n-        return this;\n+    @Override\n+    public BlockRegion setMin(int minX, int minY, int minZ, BlockRegion dest) {\n+        return dest.set(minX, minY, minZ, this.maxX, this.maxY, this.maxZ);\n     }\n \n-    // -- max --------------------------------------------------------------------------------------------------------//\n-\n-    /**\n-     * The x-coordinate of the maximum corner\n-     */\n-    public int maxX() {\n-        return this.maxX;\n+    public BlockRegion setMin(int x, int y, int z) {\n+        return this.setMin(x, y, z, this);\n     }\n \n-    /**\n-     * the maximum coordinate of the second block x\n-     *\n-     * @return the minimum coordinate x\n-     * @deprecated use {@link #maxX()}\n-     */\n-    @Deprecated\n-    public int getMaxX() {\n-        return this.maxX;\n+    public BlockRegion setMin(Vector3ic min) {\n+        return this.setMin(min, this);\n     }\n \n-    /**\n-     * set the maximum coordinate of the second block x\n-     *\n-     * @return the minX\n-     */\n-    public BlockRegion maxX(int x) {\n-        Preconditions.checkArgument(x >= this.minX || this.minX == Integer.MAX_VALUE);\n-        this.maxX = x;\n-        return this;\n+    public BlockRegion addToMin(int dx, int dy, int dz) {\n+        return this.addToMin(dx, dy, dz, this);\n     }\n \n-    /**\n-     * The y-coordinate of the maximum corner\n-     */\n-    public int maxY() {\n-        return this.maxY;\n+    public BlockRegion addToMin(Vector3ic dmin) {\n+        return this.addToMin(dmin, this);\n     }\n \n-    /**\n-     * the maximum coordinate of the second block y\n-     *\n-     * @return the minimum coordinate y\n-     * @deprecated use {@link #maxY()}\n-     */\n-    @Deprecated\n-    public int getMaxY() {\n-        return this.maxY;\n+\n+    // -- max --------------------------------------------------------------------------------------------------------//\n+\n+    @Override\n+    public int maxX() {\n+        return this.maxX;\n     }\n \n-    /**\n-     * set the maximum coordinate of the second block y\n-     *\n-     * @return the minY\n-     */\n-    public BlockRegion maxY(int y) {\n-        Preconditions.checkArgument(y >= this.minY || this.minY == Integer.MAX_VALUE);\n-        this.maxY = y;\n-        return this;\n+    @Override\n+    public int maxY() {\n+        return this.maxY;\n     }\n \n-    /**\n-     * The z-coordinate of the maximum corner\n-     */\n+    @Override\n     public int maxZ() {\n         return this.maxZ;\n     }\n \n-    /**\n-     * the maximum coordinate of the second block z\n-     *\n-     * @return the minimum coordinate z\n-     * @deprecated use {@link #maxZ()}\n-     */\n-    @Deprecated\n-    public int getMaxZ() {\n-        return this.maxZ;\n+    @Override\n+    public BlockRegion maxX(int x, BlockRegion dest) {\n+        return dest.set(this.minX, this.minY, this.minZ, x, this.maxY, this.maxZ);\n     }\n \n-    /**\n-     * set the maximum coordinate of the second block z\n-     *\n-     * @return the minZ\n-     */\n-    public BlockRegion maxZ(int z) {\n-        Preconditions.checkArgument(z >= this.minZ || this.minZ == Integer.MAX_VALUE);\n-        this.maxZ = z;\n-        return this;\n+    public BlockRegion maxX(int x) {\n+        return this.maxX(x, this);\n     }\n \n-    /**\n-     * Get the block coordinate of the maximum corner.\n-     *\n-     * @param dest will hold the result\n-     */\n-    public Vector3i getMax(Vector3i dest) {\n-        return dest.set(maxX, maxY, maxZ);\n+    @Override\n+    public BlockRegion maxY(int y, BlockRegion dest) {\n+        return dest.set(this.minX, this.minY, this.minZ, this.maxX, y, this.maxZ);\n     }\n \n-    /**\n-     * Sets the maximum coordinate of the second block for <code>this</code> {@link BlockRegion}\n-     *\n-     * @param max the second coordinate of the second block\n-     * @return this\n-     */\n-    public BlockRegion setMax(Vector3ic max) {\n-        return this.setMax(max.x(), max.y(), max.z());\n+    public BlockRegion maxY(int y) {\n+        return this.maxY(y, this);\n     }\n \n-    /**\n-     * sets the maximum block for this {@link BlockRegion}\n-     *\n-     * @param maxX the x coordinate of the first block\n-     * @param maxY the y coordinate of the first block\n-     * @param maxZ the z coordinate of the first block\n-     * @return this\n-     */\n-    public BlockRegion setMax(int maxX, int maxY, int maxZ) {\n-        Preconditions.checkArgument(maxX >= this.minX || this.minX == Integer.MAX_VALUE);\n-        Preconditions.checkArgument(maxY >= this.minY || this.minY == Integer.MAX_VALUE);\n-        Preconditions.checkArgument(maxZ >= this.minZ || this.minZ == Integer.MAX_VALUE);\n-        this.maxX = maxX;\n-        this.maxY = maxY;\n-        this.maxZ = maxZ;\n-        return this;\n+    @Override\n+    public BlockRegion maxZ(int z, BlockRegion dest) {\n+        return dest.set(this.minX, this.minY, this.minZ, this.maxX, this.maxY, z);\n     }\n \n-    // -- size -------------------------------------------------------------------------------------------------------//\n-\n-    /**\n-     * Set the size of the block region from minimum the minimum corner.\n-     *\n-     * @param x the x coordinate to set the size; must be > 0\n-     * @param y the y coordinate to set the size; must be > 0\n-     * @param z the z coordinate to set the size; must be > 0\n-     * @return this after modification\n-     */\n-    public BlockRegion setSize(int x, int y, int z) {\n-        Preconditions.checkArgument(x > 0);\n-        Preconditions.checkArgument(y > 0);\n-        Preconditions.checkArgument(z > 0);\n-        this.maxX = this.minX + x - 1;\n-        this.maxY = this.minY + y - 1;\n-        this.maxZ = this.minZ + z - 1;\n-        return this;\n+    public BlockRegion maxZ(int z) {\n+        return this.maxZ(z, this);\n     }\n \n-    /**\n-     * Set the size of the block region from minimum the minimum corner.\n-     *\n-     * @param size the size to set; all dimensions must be > 0\n-     * @return this after modification\n-     */\n-    public BlockRegion setSize(Vector3ic size) {\n-        return setSize(size.x(), size.y(), size.z());\n+    @Override\n+    public BlockRegion setMax(int x, int y, int z, BlockRegion dest) {\n+        return dest.set(this.minX, this.minY, this.minZ, maxX, maxY, maxZ);\n     }\n \n-    /**\n-     * the number of blocks for the +x, +y, +z from the minimum to the maximum\n-     *\n-     * @param dest will hold the result\n-     * @return dest\n-     */\n-    public Vector3i getSize(Vector3i dest) {\n-        return dest.set(sizeX(), sizeY(), sizeZ());\n+    public BlockRegion setMax(int x, int y, int z) {\n+        return this.setMax(x, y, z, this);\n     }\n \n-    /**\n-     * The number of blocks on the X axis\n-     *\n-     * @return number of blocks in the X axis\n-     */\n-    public int sizeX() {\n-        return this.maxX - this.minX + 1;\n+    public BlockRegion setMax(Vector3ic max) {\n+        return this.setMax(max, this);\n     }\n \n-    /**\n-     * The number of blocks on the Y axis\n-     *\n-     * @return number of blocks in the Y axis\n-     */\n-    public int sizeY() {\n-        return this.maxY - this.minY + 1;\n+    public BlockRegion addToMax(int dx, int dy, int dz) {\n+        return this.addToMax(dx, dy, dz, this);\n     }\n \n-    /**\n-     * The number of blocks on the Z axis\n-     *\n-     * @return number of blocks in the Z axis\n-     */\n-    public int sizeZ() {\n-        return this.maxZ - this.minZ + 1;\n+    public BlockRegion addToMax(Vector3ic dmax) {\n+        return this.addToMax(dmax, this);\n     }\n \n-    // -- world ------------------------------------------------------------------------------------------------------//\n-\n-    //TODO: 1.9.26 has a constant interface for aabbf\n-    public AABBf getBounds(AABBf dest) {\n-        dest.minX = minX - .5f;\n-        dest.minY = minY - .5f;\n-        dest.minZ = minZ - .5f;\n+    // -- size -------------------------------------------------------------------------------------------------------//\n \n-        dest.maxX = maxX + .5f;\n-        dest.maxY = maxY + .5f;\n-        dest.maxZ = maxZ + .5f;\n+    @Override\n+    public BlockRegion setSize(int x, int y, int z, BlockRegion dest) {\n+        return dest.set(this.minX, this.minY, this.minZ, this.minX + x, this.minY + y, this.minZ + z);\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe5423f19b2c1103a403ae96a65e6a7611f6c389"}, "originalPosition": 631}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODM1OTAzMw==", "bodyText": "I would drop this as well.", "url": "https://github.com/MovingBlocks/Terasology/pull/4326#discussion_r548359033", "createdAt": "2020-12-24T02:53:13Z", "author": {"login": "pollend"}, "path": "engine/src/main/java/org/terasology/world/block/BlockRegion.java", "diffHunk": "@@ -93,550 +104,349 @@\n      *\n      * @param source the block region to copy.\n      */\n-    public BlockRegion(BlockRegion source) {\n+    public BlockRegion(BlockRegionc source) {\n         this.set(source);\n     }\n \n+    // -- ITERABLE ---------------------------------------------------------------------------------------------------//\n+\n+    @Override\n+    public Iterator<Vector3ic> iterator() {\n+        return new Iterator<Vector3ic>() {\n+            private Vector3i current = null;\n+            private final Vector3i next = getMin(new Vector3i());\n+\n+            public boolean findNext() {\n+                if (current.equals(next)) {\n+                    next.z++;\n+                    if (next.z > maxZ) {\n+                        next.z = minZ;\n+                        next.y++;\n+                        if (next.y > maxY) {\n+                            next.y = minY;\n+                            next.x++;\n+                        }\n+                    }\n+                    return contains(next);\n+                }\n+                return true;\n+            }\n+\n+            @Override\n+            public boolean hasNext() {\n+                if (!isValid()) {\n+                    return false;\n+                }\n+                if (current == null) {\n+                    return true;\n+                }\n+\n+                if (current.equals(next)) {\n+                    return findNext();\n+                }\n+                return contains(next);\n+            }\n+\n+            @Override\n+            public Vector3ic next() {\n+                if (current == null) {\n+                    current = new Vector3i(next);\n+                    return next;\n+                }\n+\n+                if (current.equals(next)) {\n+                    if (findNext()) {\n+                        return next;\n+                    }\n+                    return null;\n+                }\n+                current.set(next);\n+                return next;\n+            }\n+        };\n+    }\n+\n     // -- GETTERS & SETTERS ------------------------------------------------------------------------------------------//\n \n     /**\n-     * set source to current region\n+     * Reset both the minimum and maximum corner of this region.\n      *\n-     * @param source the source region\n-     * @return this\n+     * @return this region (after modification)\n+     * @throws IllegalArgumentException if the given coordinates for min and max are {@link #isValid()\n+     *         invalid}.\n      */\n-    public BlockRegion set(BlockRegion source) {\n-        this.minX = source.minX;\n-        this.minY = source.minY;\n-        this.minZ = source.minZ;\n-\n-        this.maxX = source.maxX;\n-        this.maxY = source.maxY;\n-        this.maxZ = source.maxZ;\n-        return this;\n-    }\n+    public BlockRegion set(int minX, int minY, int minZ, int maxX, int maxY, int maxZ) {\n+        Preconditions.checkArgument(minX <= maxX || (minX == INVALID.minX() && maxX == INVALID.maxX()));\n+        Preconditions.checkArgument(minY <= maxY || (minY == INVALID.minY() && maxY == INVALID.maxY()));\n+        Preconditions.checkArgument(minZ <= maxZ || (minZ == INVALID.minZ() && maxZ == INVALID.maxZ()));\n+        this.minX = minX;\n+        this.minY = minY;\n+        this.minZ = minZ;\n \n-    public BlockRegion copy() {\n-        return new BlockRegion(this);\n+        this.maxX = maxX;\n+        this.maxY = maxY;\n+        this.maxZ = maxZ;\n+        return this;\n     }\n \n-    // -- min --------------------------------------------------------------------------------------------------------//\n-\n     /**\n-     * The x-coordinate of the minimum corner\n+     * Reset both the minimum and maximum corner of this region.\n+     *\n+     * @return this region (after modification)\n+     * @throws IllegalArgumentException if the given coordinates for min and max are {@link #isValid()\n+     *         invalid}.\n      */\n-    public int minX() {\n-        return this.minX;\n+    public BlockRegion set(Vector3ic min, Vector3ic max) {\n+        return this.set(min.x(), min.y(), min.z(), max.x(), max.y(), max.z());\n     }\n \n     /**\n-     * the minimum coordinate of the first block x\n+     * Reset this region to have the same minimum and maximum corner as the {@code source} region.\n      *\n-     * @return the minimum coordinate x\n-     * @deprecated use {@link #minX()}\n+     * @return this region (after modification)\n+     * @throws IllegalArgumentException if the given coordinates for min and max are {@link #isValid()\n+     *         invalid}.\n      */\n-    @Deprecated\n-    public int getMinX() {\n-        return this.minX;\n+    public BlockRegion set(BlockRegionc source) {\n+        return this.set(source.minX(), source.minY(), source.minZ(), source.maxX(), source.maxY(), source.maxZ());\n     }\n \n-    /**\n-     * set the minimum coordinate of the first block x\n-     *\n-     * @return the minX\n-     */\n-    public BlockRegion minX(int x) {\n-        Preconditions.checkArgument(x <= this.maxX || this.maxX == Integer.MIN_VALUE);\n-        this.minX = x;\n-        return this;\n+    // -- min --------------------------------------------------------------------------------------------------------//\n+\n+    @Override\n+    public int minX() {\n+        return this.minX;\n     }\n \n-    /**\n-     * The y-coordinate of the minimum corner\n-     */\n+    @Override\n     public int minY() {\n         return this.minY;\n     }\n \n-    /**\n-     * the minimum coordinate of the first block y\n-     *\n-     * @return the minimum coordinate y\n-     * @deprecated use {@link #minY()}\n-     */\n-    @Deprecated\n-    public int getMinY() {\n-        return this.minY;\n+    @Override\n+    public int minZ() {\n+        return this.minZ;\n     }\n \n-    /**\n-     * set the minimum coordinate of the first block y\n-     *\n-     * @return the minY\n-     */\n-    public BlockRegion minY(int y) {\n-        Preconditions.checkArgument(y <= this.maxY || this.maxY == Integer.MIN_VALUE);\n-        this.minY = y;\n-        return this;\n+    @Override\n+    public BlockRegion minX(int x, BlockRegion dest) {\n+        return dest.set(x, this.minY, this.minZ, this.maxX, this.maxY, this.maxZ);\n     }\n \n-    /**\n-     * The z-coordinate of the minimum corner\n-     */\n-    public int minZ() {\n-        return this.minZ;\n+    public BlockRegion minX(int x) {\n+        return this.minX(x, this);\n     }\n \n-    /**\n-     * the minimum coordinate of the first block z\n-     *\n-     * @return the minimum coordinate z\n-     * @deprecated use {@link #minZ()}\n-     */\n-    @Deprecated\n-    public int getMinZ() {\n-        return this.minZ;\n+    @Override\n+    public BlockRegion minY(int y, BlockRegion dest) {\n+        return dest.set(this.minX, y, this.minZ, this.maxX, this.maxY, this.maxZ);\n     }\n \n-    /**\n-     * set the minimum coordinate of the first block z\n-     *\n-     * @return the minZ\n-     */\n-    public BlockRegion minZ(int z) {\n-        Preconditions.checkArgument(z <= this.maxZ || this.maxZ == Integer.MIN_VALUE);\n-        this.minZ = z;\n-        return this;\n+    public BlockRegion minY(int y) {\n+        return this.minY(y, this);\n     }\n \n-    /**\n-     * Get the block coordinate minimum corner.\n-     *\n-     * @param dest will hold the result\n-     */\n-    public Vector3i getMin(Vector3i dest) {\n-        return dest.set(minX, minY, minZ);\n+    @Override\n+    public BlockRegion minZ(int z, BlockRegion dest) {\n+        return dest.set(this.minX, this.minY, z, this.maxX, this.maxY, this.maxZ);\n     }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe5423f19b2c1103a403ae96a65e6a7611f6c389"}, "originalPosition": 344}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODM1OTA1MA==", "bodyText": "I would drop this as well.", "url": "https://github.com/MovingBlocks/Terasology/pull/4326#discussion_r548359050", "createdAt": "2020-12-24T02:53:20Z", "author": {"login": "pollend"}, "path": "engine/src/main/java/org/terasology/world/block/BlockRegion.java", "diffHunk": "@@ -93,550 +104,349 @@\n      *\n      * @param source the block region to copy.\n      */\n-    public BlockRegion(BlockRegion source) {\n+    public BlockRegion(BlockRegionc source) {\n         this.set(source);\n     }\n \n+    // -- ITERABLE ---------------------------------------------------------------------------------------------------//\n+\n+    @Override\n+    public Iterator<Vector3ic> iterator() {\n+        return new Iterator<Vector3ic>() {\n+            private Vector3i current = null;\n+            private final Vector3i next = getMin(new Vector3i());\n+\n+            public boolean findNext() {\n+                if (current.equals(next)) {\n+                    next.z++;\n+                    if (next.z > maxZ) {\n+                        next.z = minZ;\n+                        next.y++;\n+                        if (next.y > maxY) {\n+                            next.y = minY;\n+                            next.x++;\n+                        }\n+                    }\n+                    return contains(next);\n+                }\n+                return true;\n+            }\n+\n+            @Override\n+            public boolean hasNext() {\n+                if (!isValid()) {\n+                    return false;\n+                }\n+                if (current == null) {\n+                    return true;\n+                }\n+\n+                if (current.equals(next)) {\n+                    return findNext();\n+                }\n+                return contains(next);\n+            }\n+\n+            @Override\n+            public Vector3ic next() {\n+                if (current == null) {\n+                    current = new Vector3i(next);\n+                    return next;\n+                }\n+\n+                if (current.equals(next)) {\n+                    if (findNext()) {\n+                        return next;\n+                    }\n+                    return null;\n+                }\n+                current.set(next);\n+                return next;\n+            }\n+        };\n+    }\n+\n     // -- GETTERS & SETTERS ------------------------------------------------------------------------------------------//\n \n     /**\n-     * set source to current region\n+     * Reset both the minimum and maximum corner of this region.\n      *\n-     * @param source the source region\n-     * @return this\n+     * @return this region (after modification)\n+     * @throws IllegalArgumentException if the given coordinates for min and max are {@link #isValid()\n+     *         invalid}.\n      */\n-    public BlockRegion set(BlockRegion source) {\n-        this.minX = source.minX;\n-        this.minY = source.minY;\n-        this.minZ = source.minZ;\n-\n-        this.maxX = source.maxX;\n-        this.maxY = source.maxY;\n-        this.maxZ = source.maxZ;\n-        return this;\n-    }\n+    public BlockRegion set(int minX, int minY, int minZ, int maxX, int maxY, int maxZ) {\n+        Preconditions.checkArgument(minX <= maxX || (minX == INVALID.minX() && maxX == INVALID.maxX()));\n+        Preconditions.checkArgument(minY <= maxY || (minY == INVALID.minY() && maxY == INVALID.maxY()));\n+        Preconditions.checkArgument(minZ <= maxZ || (minZ == INVALID.minZ() && maxZ == INVALID.maxZ()));\n+        this.minX = minX;\n+        this.minY = minY;\n+        this.minZ = minZ;\n \n-    public BlockRegion copy() {\n-        return new BlockRegion(this);\n+        this.maxX = maxX;\n+        this.maxY = maxY;\n+        this.maxZ = maxZ;\n+        return this;\n     }\n \n-    // -- min --------------------------------------------------------------------------------------------------------//\n-\n     /**\n-     * The x-coordinate of the minimum corner\n+     * Reset both the minimum and maximum corner of this region.\n+     *\n+     * @return this region (after modification)\n+     * @throws IllegalArgumentException if the given coordinates for min and max are {@link #isValid()\n+     *         invalid}.\n      */\n-    public int minX() {\n-        return this.minX;\n+    public BlockRegion set(Vector3ic min, Vector3ic max) {\n+        return this.set(min.x(), min.y(), min.z(), max.x(), max.y(), max.z());\n     }\n \n     /**\n-     * the minimum coordinate of the first block x\n+     * Reset this region to have the same minimum and maximum corner as the {@code source} region.\n      *\n-     * @return the minimum coordinate x\n-     * @deprecated use {@link #minX()}\n+     * @return this region (after modification)\n+     * @throws IllegalArgumentException if the given coordinates for min and max are {@link #isValid()\n+     *         invalid}.\n      */\n-    @Deprecated\n-    public int getMinX() {\n-        return this.minX;\n+    public BlockRegion set(BlockRegionc source) {\n+        return this.set(source.minX(), source.minY(), source.minZ(), source.maxX(), source.maxY(), source.maxZ());\n     }\n \n-    /**\n-     * set the minimum coordinate of the first block x\n-     *\n-     * @return the minX\n-     */\n-    public BlockRegion minX(int x) {\n-        Preconditions.checkArgument(x <= this.maxX || this.maxX == Integer.MIN_VALUE);\n-        this.minX = x;\n-        return this;\n+    // -- min --------------------------------------------------------------------------------------------------------//\n+\n+    @Override\n+    public int minX() {\n+        return this.minX;\n     }\n \n-    /**\n-     * The y-coordinate of the minimum corner\n-     */\n+    @Override\n     public int minY() {\n         return this.minY;\n     }\n \n-    /**\n-     * the minimum coordinate of the first block y\n-     *\n-     * @return the minimum coordinate y\n-     * @deprecated use {@link #minY()}\n-     */\n-    @Deprecated\n-    public int getMinY() {\n-        return this.minY;\n+    @Override\n+    public int minZ() {\n+        return this.minZ;\n     }\n \n-    /**\n-     * set the minimum coordinate of the first block y\n-     *\n-     * @return the minY\n-     */\n-    public BlockRegion minY(int y) {\n-        Preconditions.checkArgument(y <= this.maxY || this.maxY == Integer.MIN_VALUE);\n-        this.minY = y;\n-        return this;\n+    @Override\n+    public BlockRegion minX(int x, BlockRegion dest) {\n+        return dest.set(x, this.minY, this.minZ, this.maxX, this.maxY, this.maxZ);\n     }\n \n-    /**\n-     * The z-coordinate of the minimum corner\n-     */\n-    public int minZ() {\n-        return this.minZ;\n+    public BlockRegion minX(int x) {\n+        return this.minX(x, this);\n     }\n \n-    /**\n-     * the minimum coordinate of the first block z\n-     *\n-     * @return the minimum coordinate z\n-     * @deprecated use {@link #minZ()}\n-     */\n-    @Deprecated\n-    public int getMinZ() {\n-        return this.minZ;\n+    @Override\n+    public BlockRegion minY(int y, BlockRegion dest) {\n+        return dest.set(this.minX, y, this.minZ, this.maxX, this.maxY, this.maxZ);\n     }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe5423f19b2c1103a403ae96a65e6a7611f6c389"}, "originalPosition": 319}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6e0585c20f6bf6dc300e0caa1b82a0228af67ea7", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/6e0585c20f6bf6dc300e0caa1b82a0228af67ea7", "committedDate": "2020-12-24T11:49:01Z", "message": "refactor!(BlockRegion): remove modifiers with explicit destination"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d05c5b3bbbdc7e6ee692eb2c1ae92e952a8c48b1", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/d05c5b3bbbdc7e6ee692eb2c1ae92e952a8c48b1", "committedDate": "2020-12-24T11:49:30Z", "message": "feat(BlockRegion): add `setPosition` modifier"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4NjgzNTE1", "url": "https://github.com/MovingBlocks/Terasology/pull/4326#pullrequestreview-558683515", "createdAt": "2020-12-24T16:45:54Z", "commit": {"oid": "6e0585c20f6bf6dc300e0caa1b82a0228af67ea7"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNFQxNjo0NTo1NFrOILMmgw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNFQxNjo0NjoyNFrOILMoNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODYxMTcxNQ==", "bodyText": "why did you drop this?", "url": "https://github.com/MovingBlocks/Terasology/pull/4326#discussion_r548611715", "createdAt": "2020-12-24T16:45:54Z", "author": {"login": "pollend"}, "path": "engine/src/main/java/org/terasology/world/block/BlockRegion.java", "diffHunk": "@@ -294,132 +311,171 @@ public int maxZ() {\n         return this.maxZ;\n     }\n \n-    @Override\n-    public BlockRegion maxX(int x, BlockRegion dest) {\n-        return dest.set(this.minX, this.minY, this.minZ, x, this.maxY, this.maxZ);\n-    }\n-\n+    /**\n+     * Set the maximum x-coordinate of the region.\n+     *\n+     * @return {@code this} (after modification)\n+     * @throws IllegalArgumentException if the resulting region would become {@link #isValid() invalid}.\n+     */\n     public BlockRegion maxX(int x) {\n-        return this.maxX(x, this);\n-    }\n-\n-    @Override\n-    public BlockRegion maxY(int y, BlockRegion dest) {\n-        return dest.set(this.minX, this.minY, this.minZ, this.maxX, y, this.maxZ);\n+        Preconditions.checkArgument(x >= minX);\n+        this.maxX = x;\n+        return this;\n     }\n \n+    /**\n+     * Set the maximum y-coordinate of the region.\n+     *\n+     * @return {@code this} (after modification)\n+     * @throws IllegalArgumentException if the resulting region would become {@link #isValid() invalid}.\n+     */\n     public BlockRegion maxY(int y) {\n-        return this.maxY(y, this);\n-    }\n-\n-    @Override\n-    public BlockRegion maxZ(int z, BlockRegion dest) {\n-        return dest.set(this.minX, this.minY, this.minZ, this.maxX, this.maxY, z);\n+        Preconditions.checkArgument(y >= minY);\n+        this.maxY = y;\n+        return this;\n     }\n \n+    /**\n+     * Set the maximum z-coordinate of the region.\n+     *\n+     * @return {@code this} (after modification)\n+     * @throws IllegalArgumentException if the resulting region would become {@link #isValid() invalid}.\n+     */\n     public BlockRegion maxZ(int z) {\n-        return this.maxZ(z, this);\n-    }\n-\n-    @Override\n-    public BlockRegion setMax(int x, int y, int z, BlockRegion dest) {\n-        return dest.set(this.minX, this.minY, this.minZ, maxX, maxY, maxZ);\n+        Preconditions.checkArgument(z >= minZ);\n+        this.maxZ = z;\n+        return this;\n     }\n \n+    /**\n+     * Set the coordinates of the maximum corner for this region.\n+     *\n+     * @return {@code this} (after modification)\n+     * @throws IllegalArgumentException if the resulting region would become {@link #isValid() invalid}.\n+     */\n     public BlockRegion setMax(int x, int y, int z) {\n-        return this.setMax(x, y, z, this);\n+        return this.set(this.minX, this.minY, this.minZ, x, y, z);\n     }\n \n     public BlockRegion setMax(Vector3ic max) {\n-        return this.setMax(max, this);\n+        return this.setMax(max.x(), max.y(), max.z());\n     }\n \n+    /**\n+     * Translate the maximum corner of the region by adding given {@code (dx, dy, dz)}.\n+     *\n+     * @param dx the number of blocks to add to the maximum corner on the x axis\n+     * @param dy the number of blocks to add to the maximum corner on the y axis\n+     * @param dz the number of blocks to add to the maximum corner on the z axis\n+     * @return {@code this} (after modification)\n+     * @throws IllegalArgumentException if the resulting region would become {@link #isValid() invalid}.\n+     */\n     public BlockRegion addToMax(int dx, int dy, int dz) {\n-        return this.addToMax(dx, dy, dz, this);\n+        return this.setMax(this.maxX + dx, this.maxY + dy, this.maxZ + dz);\n     }\n \n     public BlockRegion addToMax(Vector3ic dmax) {\n-        return this.addToMax(dmax, this);\n+        return this.addToMax(dmax.x(), dmax.y(), dmax.z());\n     }\n \n     // -- size -------------------------------------------------------------------------------------------------------//\n \n-    @Override\n-    public BlockRegion setSize(int x, int y, int z, BlockRegion dest) {\n-        return dest.set(this.minX, this.minY, this.minZ, this.minX + x, this.minY + y, this.minZ + z);\n-    }\n-\n+    /**\n+     * Set the size of the block region from the minimum corner.\n+     *\n+     * @param x the x coordinate to set the size; must be > 0\n+     * @param y the y coordinate to set the size; must be > 0\n+     * @param z the z coordinate to set the size; must be > 0\n+     * @return {@code this} (after modification)\n+     * @throws IllegalArgumentException if the size is smaller than or equal to 0 in any dimension\n+     */\n     public BlockRegion setSize(int x, int y, int z) {\n-        return this.setSize(x, y, z, this);\n+        return this.setMax(this.minX + x, this.minY + y, this.minZ);\n     }\n \n     public BlockRegion setSize(Vector3ic size) {\n         return setSize(size.x(), size.y(), size.z());\n     }\n \n     // -- IN-PLACE MUTATION ------------------------------------------------------------------------------------------//\n-    @Override\n-    public BlockRegion union(int x, int y, int z, BlockRegion dest) {\n-        dest.minX = Math.min(this.minX, x);\n-        dest.minY = Math.min(this.minY, y);\n-        dest.minZ = Math.min(this.minZ, z);\n-\n-        dest.maxX = Math.max(this.maxX, x);\n-        dest.maxY = Math.max(this.maxY, y);\n-        dest.maxZ = Math.max(this.maxZ, z);\n-        return dest;\n-    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6e0585c20f6bf6dc300e0caa1b82a0228af67ea7"}, "originalPosition": 245}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODYxMTg4Ng==", "bodyText": "this one is also fine.", "url": "https://github.com/MovingBlocks/Terasology/pull/4326#discussion_r548611886", "createdAt": "2020-12-24T16:46:10Z", "author": {"login": "pollend"}, "path": "engine/src/main/java/org/terasology/world/block/BlockRegion.java", "diffHunk": "@@ -294,132 +311,171 @@ public int maxZ() {\n         return this.maxZ;\n     }\n \n-    @Override\n-    public BlockRegion maxX(int x, BlockRegion dest) {\n-        return dest.set(this.minX, this.minY, this.minZ, x, this.maxY, this.maxZ);\n-    }\n-\n+    /**\n+     * Set the maximum x-coordinate of the region.\n+     *\n+     * @return {@code this} (after modification)\n+     * @throws IllegalArgumentException if the resulting region would become {@link #isValid() invalid}.\n+     */\n     public BlockRegion maxX(int x) {\n-        return this.maxX(x, this);\n-    }\n-\n-    @Override\n-    public BlockRegion maxY(int y, BlockRegion dest) {\n-        return dest.set(this.minX, this.minY, this.minZ, this.maxX, y, this.maxZ);\n+        Preconditions.checkArgument(x >= minX);\n+        this.maxX = x;\n+        return this;\n     }\n \n+    /**\n+     * Set the maximum y-coordinate of the region.\n+     *\n+     * @return {@code this} (after modification)\n+     * @throws IllegalArgumentException if the resulting region would become {@link #isValid() invalid}.\n+     */\n     public BlockRegion maxY(int y) {\n-        return this.maxY(y, this);\n-    }\n-\n-    @Override\n-    public BlockRegion maxZ(int z, BlockRegion dest) {\n-        return dest.set(this.minX, this.minY, this.minZ, this.maxX, this.maxY, z);\n+        Preconditions.checkArgument(y >= minY);\n+        this.maxY = y;\n+        return this;\n     }\n \n+    /**\n+     * Set the maximum z-coordinate of the region.\n+     *\n+     * @return {@code this} (after modification)\n+     * @throws IllegalArgumentException if the resulting region would become {@link #isValid() invalid}.\n+     */\n     public BlockRegion maxZ(int z) {\n-        return this.maxZ(z, this);\n-    }\n-\n-    @Override\n-    public BlockRegion setMax(int x, int y, int z, BlockRegion dest) {\n-        return dest.set(this.minX, this.minY, this.minZ, maxX, maxY, maxZ);\n+        Preconditions.checkArgument(z >= minZ);\n+        this.maxZ = z;\n+        return this;\n     }\n \n+    /**\n+     * Set the coordinates of the maximum corner for this region.\n+     *\n+     * @return {@code this} (after modification)\n+     * @throws IllegalArgumentException if the resulting region would become {@link #isValid() invalid}.\n+     */\n     public BlockRegion setMax(int x, int y, int z) {\n-        return this.setMax(x, y, z, this);\n+        return this.set(this.minX, this.minY, this.minZ, x, y, z);\n     }\n \n     public BlockRegion setMax(Vector3ic max) {\n-        return this.setMax(max, this);\n+        return this.setMax(max.x(), max.y(), max.z());\n     }\n \n+    /**\n+     * Translate the maximum corner of the region by adding given {@code (dx, dy, dz)}.\n+     *\n+     * @param dx the number of blocks to add to the maximum corner on the x axis\n+     * @param dy the number of blocks to add to the maximum corner on the y axis\n+     * @param dz the number of blocks to add to the maximum corner on the z axis\n+     * @return {@code this} (after modification)\n+     * @throws IllegalArgumentException if the resulting region would become {@link #isValid() invalid}.\n+     */\n     public BlockRegion addToMax(int dx, int dy, int dz) {\n-        return this.addToMax(dx, dy, dz, this);\n+        return this.setMax(this.maxX + dx, this.maxY + dy, this.maxZ + dz);\n     }\n \n     public BlockRegion addToMax(Vector3ic dmax) {\n-        return this.addToMax(dmax, this);\n+        return this.addToMax(dmax.x(), dmax.y(), dmax.z());\n     }\n \n     // -- size -------------------------------------------------------------------------------------------------------//\n \n-    @Override\n-    public BlockRegion setSize(int x, int y, int z, BlockRegion dest) {\n-        return dest.set(this.minX, this.minY, this.minZ, this.minX + x, this.minY + y, this.minZ + z);\n-    }\n-\n+    /**\n+     * Set the size of the block region from the minimum corner.\n+     *\n+     * @param x the x coordinate to set the size; must be > 0\n+     * @param y the y coordinate to set the size; must be > 0\n+     * @param z the z coordinate to set the size; must be > 0\n+     * @return {@code this} (after modification)\n+     * @throws IllegalArgumentException if the size is smaller than or equal to 0 in any dimension\n+     */\n     public BlockRegion setSize(int x, int y, int z) {\n-        return this.setSize(x, y, z, this);\n+        return this.setMax(this.minX + x, this.minY + y, this.minZ);\n     }\n \n     public BlockRegion setSize(Vector3ic size) {\n         return setSize(size.x(), size.y(), size.z());\n     }\n \n     // -- IN-PLACE MUTATION ------------------------------------------------------------------------------------------//\n-    @Override\n-    public BlockRegion union(int x, int y, int z, BlockRegion dest) {\n-        dest.minX = Math.min(this.minX, x);\n-        dest.minY = Math.min(this.minY, y);\n-        dest.minZ = Math.min(this.minZ, z);\n-\n-        dest.maxX = Math.max(this.maxX, x);\n-        dest.maxY = Math.max(this.maxY, y);\n-        dest.maxZ = Math.max(this.maxZ, z);\n-        return dest;\n-    }\n \n+    /**\n+     * Compute the union of this region and the given block coordinate.\n+     *\n+     * @param x the x coordinate of the block\n+     * @param y the y coordinate of the block\n+     * @param z the z coordinate of the block\n+     * @return {@code this} (after modification)\n+     */\n     public BlockRegion union(int x, int y, int z) {\n-        return this.union(x, y, z, this);\n+        this.minX = Math.min(this.minX, x);\n+        this.minY = Math.min(this.minY, y);\n+        this.minZ = Math.min(this.minZ, z);\n+\n+        this.maxX = Math.max(this.maxX, x);\n+        this.maxY = Math.max(this.maxY, y);\n+        this.maxZ = Math.max(this.maxZ, z);\n+        return this;\n     }\n \n     public BlockRegion union(Vector3ic pos) {\n-        return union(pos.x(), pos.y(), pos.z(), this);\n+        return union(pos.x(), pos.y(), pos.z());\n     }\n \n+    /**\n+     * Compute the union of this region and the other region.\n+     *\n+     * @param other {@link BlockRegion}\n+     * @return @code this} (after modification)\n+     */\n     public BlockRegion union(BlockRegionc other) {\n-        return this.union(other, this);\n+        return this.union(other.minX(), other.minY(), other.minZ()).union(other.maxX(), other.maxY(), other.maxZ());\n     }\n \n     // ---------------------------------------------------------------------------------------------------------------//\n \n-    @Override\n-    public Optional<BlockRegion> intersect(BlockRegionc other, BlockRegion dest) {\n-        dest.minX = Math.max(minX, other.minX());\n-        dest.minY = Math.max(minY, other.minY());\n-        dest.minZ = Math.max(minZ, other.minZ());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6e0585c20f6bf6dc300e0caa1b82a0228af67ea7"}, "originalPosition": 289}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODYxMjE0OQ==", "bodyText": "you can keep this one to.", "url": "https://github.com/MovingBlocks/Terasology/pull/4326#discussion_r548612149", "createdAt": "2020-12-24T16:46:24Z", "author": {"login": "pollend"}, "path": "engine/src/main/java/org/terasology/world/block/BlockRegion.java", "diffHunk": "@@ -294,132 +311,171 @@ public int maxZ() {\n         return this.maxZ;\n     }\n \n-    @Override\n-    public BlockRegion maxX(int x, BlockRegion dest) {\n-        return dest.set(this.minX, this.minY, this.minZ, x, this.maxY, this.maxZ);\n-    }\n-\n+    /**\n+     * Set the maximum x-coordinate of the region.\n+     *\n+     * @return {@code this} (after modification)\n+     * @throws IllegalArgumentException if the resulting region would become {@link #isValid() invalid}.\n+     */\n     public BlockRegion maxX(int x) {\n-        return this.maxX(x, this);\n-    }\n-\n-    @Override\n-    public BlockRegion maxY(int y, BlockRegion dest) {\n-        return dest.set(this.minX, this.minY, this.minZ, this.maxX, y, this.maxZ);\n+        Preconditions.checkArgument(x >= minX);\n+        this.maxX = x;\n+        return this;\n     }\n \n+    /**\n+     * Set the maximum y-coordinate of the region.\n+     *\n+     * @return {@code this} (after modification)\n+     * @throws IllegalArgumentException if the resulting region would become {@link #isValid() invalid}.\n+     */\n     public BlockRegion maxY(int y) {\n-        return this.maxY(y, this);\n-    }\n-\n-    @Override\n-    public BlockRegion maxZ(int z, BlockRegion dest) {\n-        return dest.set(this.minX, this.minY, this.minZ, this.maxX, this.maxY, z);\n+        Preconditions.checkArgument(y >= minY);\n+        this.maxY = y;\n+        return this;\n     }\n \n+    /**\n+     * Set the maximum z-coordinate of the region.\n+     *\n+     * @return {@code this} (after modification)\n+     * @throws IllegalArgumentException if the resulting region would become {@link #isValid() invalid}.\n+     */\n     public BlockRegion maxZ(int z) {\n-        return this.maxZ(z, this);\n-    }\n-\n-    @Override\n-    public BlockRegion setMax(int x, int y, int z, BlockRegion dest) {\n-        return dest.set(this.minX, this.minY, this.minZ, maxX, maxY, maxZ);\n+        Preconditions.checkArgument(z >= minZ);\n+        this.maxZ = z;\n+        return this;\n     }\n \n+    /**\n+     * Set the coordinates of the maximum corner for this region.\n+     *\n+     * @return {@code this} (after modification)\n+     * @throws IllegalArgumentException if the resulting region would become {@link #isValid() invalid}.\n+     */\n     public BlockRegion setMax(int x, int y, int z) {\n-        return this.setMax(x, y, z, this);\n+        return this.set(this.minX, this.minY, this.minZ, x, y, z);\n     }\n \n     public BlockRegion setMax(Vector3ic max) {\n-        return this.setMax(max, this);\n+        return this.setMax(max.x(), max.y(), max.z());\n     }\n \n+    /**\n+     * Translate the maximum corner of the region by adding given {@code (dx, dy, dz)}.\n+     *\n+     * @param dx the number of blocks to add to the maximum corner on the x axis\n+     * @param dy the number of blocks to add to the maximum corner on the y axis\n+     * @param dz the number of blocks to add to the maximum corner on the z axis\n+     * @return {@code this} (after modification)\n+     * @throws IllegalArgumentException if the resulting region would become {@link #isValid() invalid}.\n+     */\n     public BlockRegion addToMax(int dx, int dy, int dz) {\n-        return this.addToMax(dx, dy, dz, this);\n+        return this.setMax(this.maxX + dx, this.maxY + dy, this.maxZ + dz);\n     }\n \n     public BlockRegion addToMax(Vector3ic dmax) {\n-        return this.addToMax(dmax, this);\n+        return this.addToMax(dmax.x(), dmax.y(), dmax.z());\n     }\n \n     // -- size -------------------------------------------------------------------------------------------------------//\n \n-    @Override\n-    public BlockRegion setSize(int x, int y, int z, BlockRegion dest) {\n-        return dest.set(this.minX, this.minY, this.minZ, this.minX + x, this.minY + y, this.minZ + z);\n-    }\n-\n+    /**\n+     * Set the size of the block region from the minimum corner.\n+     *\n+     * @param x the x coordinate to set the size; must be > 0\n+     * @param y the y coordinate to set the size; must be > 0\n+     * @param z the z coordinate to set the size; must be > 0\n+     * @return {@code this} (after modification)\n+     * @throws IllegalArgumentException if the size is smaller than or equal to 0 in any dimension\n+     */\n     public BlockRegion setSize(int x, int y, int z) {\n-        return this.setSize(x, y, z, this);\n+        return this.setMax(this.minX + x, this.minY + y, this.minZ);\n     }\n \n     public BlockRegion setSize(Vector3ic size) {\n         return setSize(size.x(), size.y(), size.z());\n     }\n \n     // -- IN-PLACE MUTATION ------------------------------------------------------------------------------------------//\n-    @Override\n-    public BlockRegion union(int x, int y, int z, BlockRegion dest) {\n-        dest.minX = Math.min(this.minX, x);\n-        dest.minY = Math.min(this.minY, y);\n-        dest.minZ = Math.min(this.minZ, z);\n-\n-        dest.maxX = Math.max(this.maxX, x);\n-        dest.maxY = Math.max(this.maxY, y);\n-        dest.maxZ = Math.max(this.maxZ, z);\n-        return dest;\n-    }\n \n+    /**\n+     * Compute the union of this region and the given block coordinate.\n+     *\n+     * @param x the x coordinate of the block\n+     * @param y the y coordinate of the block\n+     * @param z the z coordinate of the block\n+     * @return {@code this} (after modification)\n+     */\n     public BlockRegion union(int x, int y, int z) {\n-        return this.union(x, y, z, this);\n+        this.minX = Math.min(this.minX, x);\n+        this.minY = Math.min(this.minY, y);\n+        this.minZ = Math.min(this.minZ, z);\n+\n+        this.maxX = Math.max(this.maxX, x);\n+        this.maxY = Math.max(this.maxY, y);\n+        this.maxZ = Math.max(this.maxZ, z);\n+        return this;\n     }\n \n     public BlockRegion union(Vector3ic pos) {\n-        return union(pos.x(), pos.y(), pos.z(), this);\n+        return union(pos.x(), pos.y(), pos.z());\n     }\n \n+    /**\n+     * Compute the union of this region and the other region.\n+     *\n+     * @param other {@link BlockRegion}\n+     * @return @code this} (after modification)\n+     */\n     public BlockRegion union(BlockRegionc other) {\n-        return this.union(other, this);\n+        return this.union(other.minX(), other.minY(), other.minZ()).union(other.maxX(), other.maxY(), other.maxZ());\n     }\n \n     // ---------------------------------------------------------------------------------------------------------------//\n \n-    @Override\n-    public Optional<BlockRegion> intersect(BlockRegionc other, BlockRegion dest) {\n-        dest.minX = Math.max(minX, other.minX());\n-        dest.minY = Math.max(minY, other.minY());\n-        dest.minZ = Math.max(minZ, other.minZ());\n+    /**\n+     * Compute the intersection of this region with the {@code other} region.\n+     * <p>\n+     * NOTE: If the regions don't intersect this region will become invalid!\n+     *\n+     * @param other the other region\n+     * @return {@code this} (after modification) or {@link Optional#empty()} if the regions don't intersect\n+     */\n+    public Optional<BlockRegion> intersect(BlockRegionc other) {\n+        this.minX = Math.max(minX, other.minX());\n+        this.minY = Math.max(minY, other.minY());\n+        this.minZ = Math.max(minZ, other.minZ());\n \n-        dest.maxX = Math.min(maxX, other.maxX());\n-        dest.maxY = Math.min(maxY, other.maxY());\n-        dest.maxZ = Math.min(maxZ, other.maxZ());\n+        this.maxX = Math.min(maxX, other.maxX());\n+        this.maxY = Math.min(maxY, other.maxY());\n+        this.maxZ = Math.min(maxZ, other.maxZ());\n \n-        if (dest.isValid()) {\n-            return Optional.of(dest);\n+        if (this.isValid()) {\n+            return Optional.of(this);\n         } else {\n             return Optional.empty();\n         }\n     }\n \n-    public Optional<BlockRegion> intersect(BlockRegionc other) {\n-        return this.intersect(other, this);\n-    }\n-\n     // ---------------------------------------------------------------------------------------------------------------//\n \n-    @Override\n-    public BlockRegion translate(int x, int y, int z, BlockRegion dest) {\n-        dest.minX = this.minX + x;\n-        dest.minY = this.minY + y;\n-        dest.minZ = this.minZ + z;\n-        dest.maxX = this.maxX + x;\n-        dest.maxY = this.maxY + y;\n-        dest.maxZ = this.maxZ + z;\n-        return dest;\n-    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6e0585c20f6bf6dc300e0caa1b82a0228af67ea7"}, "originalPosition": 334}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4Njg0OTI3", "url": "https://github.com/MovingBlocks/Terasology/pull/4326#pullrequestreview-558684927", "createdAt": "2020-12-24T16:52:04Z", "commit": {"oid": "6e0585c20f6bf6dc300e0caa1b82a0228af67ea7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNFQxNjo1MjowNFrOILM4nw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNFQxNjo1MjowNFrOILM4nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODYxNjM1MQ==", "bodyText": "this one is also fine.", "url": "https://github.com/MovingBlocks/Terasology/pull/4326#discussion_r548616351", "createdAt": "2020-12-24T16:52:04Z", "author": {"login": "pollend"}, "path": "engine/src/main/java/org/terasology/world/block/BlockRegion.java", "diffHunk": "@@ -428,14 +484,20 @@ public BlockRegion translate(Vector3ic vec) {\n \n     // -- extend -----------------------------------------------------------------------------------------------------//\n \n-    @Override\n-    public BlockRegion expand(int dx, int dy, int dz, BlockRegion dest) {\n-        return dest.set(this.minX - dx, this.minY - dy, this.minZ - dz,\n-                this.maxX + dx, this.maxY + dy, this.maxZ + dz);\n-    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6e0585c20f6bf6dc300e0caa1b82a0228af67ea7"}, "originalPosition": 365}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4Njg0OTky", "url": "https://github.com/MovingBlocks/Terasology/pull/4326#pullrequestreview-558684992", "createdAt": "2020-12-24T16:52:23Z", "commit": {"oid": "6e0585c20f6bf6dc300e0caa1b82a0228af67ea7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNFQxNjo1MjoyNFrOILM5ew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNFQxNjo1MjoyNFrOILM5ew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODYxNjU3MQ==", "bodyText": "you can keep this one to.", "url": "https://github.com/MovingBlocks/Terasology/pull/4326#discussion_r548616571", "createdAt": "2020-12-24T16:52:24Z", "author": {"login": "pollend"}, "path": "engine/src/main/java/org/terasology/world/block/BlockRegion.java", "diffHunk": "@@ -444,8 +506,16 @@ public BlockRegion expand(Vector3ic extents) {\n \n     // -- transform --------------------------------------------------------------------------------------------------//\n \n-    @Override\n-    public BlockRegion transform(Matrix4fc m, BlockRegion dest) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6e0585c20f6bf6dc300e0caa1b82a0228af67ea7"}, "originalPosition": 389}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4Njk1Mzg0", "url": "https://github.com/MovingBlocks/Terasology/pull/4326#pullrequestreview-558695384", "createdAt": "2020-12-24T17:54:12Z", "commit": {"oid": "d05c5b3bbbdc7e6ee692eb2c1ae92e952a8c48b1"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNFQxNzo1NDoxMlrOILPeVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNFQxNzo1NDoxMlrOILPeVw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODY1ODc3NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    return this.setMax(this.minX + x, this.minY + y, this.minZ);\n          \n          \n            \n                    return this.setMax(this.minX + x - 1, this.minY + y - 1, this.minZ + z - 1);\n          \n      \n    \n    \n  \n\nA size of one is new BlockRegion(0,0,0,0,0,0) so you need to subtract one.", "url": "https://github.com/MovingBlocks/Terasology/pull/4326#discussion_r548658775", "createdAt": "2020-12-24T17:54:12Z", "author": {"login": "pollend"}, "path": "engine/src/main/java/org/terasology/world/block/BlockRegion.java", "diffHunk": "@@ -93,392 +103,309 @@\n      *\n      * @param source the block region to copy.\n      */\n-    public BlockRegion(BlockRegion source) {\n+    public BlockRegion(BlockRegionc source) {\n         this.set(source);\n     }\n \n+    // -- ITERABLE ---------------------------------------------------------------------------------------------------//\n+\n+    @Override\n+    public Iterator<Vector3ic> iterator() {\n+        return new Iterator<Vector3ic>() {\n+            private Vector3i current = null;\n+            private final Vector3i next = getMin(new Vector3i());\n+\n+            public boolean findNext() {\n+                if (current.equals(next)) {\n+                    next.z++;\n+                    if (next.z > maxZ) {\n+                        next.z = minZ;\n+                        next.y++;\n+                        if (next.y > maxY) {\n+                            next.y = minY;\n+                            next.x++;\n+                        }\n+                    }\n+                    return contains(next);\n+                }\n+                return true;\n+            }\n+\n+            @Override\n+            public boolean hasNext() {\n+                if (!isValid()) {\n+                    return false;\n+                }\n+                if (current == null) {\n+                    return true;\n+                }\n+\n+                if (current.equals(next)) {\n+                    return findNext();\n+                }\n+                return contains(next);\n+            }\n+\n+            @Override\n+            public Vector3ic next() {\n+                if (current == null) {\n+                    current = new Vector3i(next);\n+                    return next;\n+                }\n+\n+                if (current.equals(next)) {\n+                    if (findNext()) {\n+                        return next;\n+                    }\n+                    return null;\n+                }\n+                current.set(next);\n+                return next;\n+            }\n+        };\n+    }\n+\n     // -- GETTERS & SETTERS ------------------------------------------------------------------------------------------//\n \n     /**\n-     * set source to current region\n+     * Reset both the minimum and maximum corner of this region.\n      *\n-     * @param source the source region\n-     * @return this\n+     * @return this region (after modification)\n+     * @throws IllegalArgumentException if the given coordinates for min and max are {@link #isValid()\n+     *         invalid}.\n      */\n-    public BlockRegion set(BlockRegion source) {\n-        this.minX = source.minX;\n-        this.minY = source.minY;\n-        this.minZ = source.minZ;\n-\n-        this.maxX = source.maxX;\n-        this.maxY = source.maxY;\n-        this.maxZ = source.maxZ;\n-        return this;\n-    }\n+    public BlockRegion set(int minX, int minY, int minZ, int maxX, int maxY, int maxZ) {\n+        Preconditions.checkArgument(minX <= maxX || (minX == INVALID.minX() && maxX == INVALID.maxX()));\n+        Preconditions.checkArgument(minY <= maxY || (minY == INVALID.minY() && maxY == INVALID.maxY()));\n+        Preconditions.checkArgument(minZ <= maxZ || (minZ == INVALID.minZ() && maxZ == INVALID.maxZ()));\n+        this.minX = minX;\n+        this.minY = minY;\n+        this.minZ = minZ;\n \n-    public BlockRegion copy() {\n-        return new BlockRegion(this);\n+        this.maxX = maxX;\n+        this.maxY = maxY;\n+        this.maxZ = maxZ;\n+        return this;\n     }\n \n-    // -- min --------------------------------------------------------------------------------------------------------//\n-\n     /**\n-     * The x-coordinate of the minimum corner\n+     * Reset both the minimum and maximum corner of this region.\n+     *\n+     * @return this region (after modification)\n+     * @throws IllegalArgumentException if the given coordinates for min and max are {@link #isValid()\n+     *         invalid}.\n      */\n-    public int minX() {\n-        return this.minX;\n+    public BlockRegion set(Vector3ic min, Vector3ic max) {\n+        return this.set(min.x(), min.y(), min.z(), max.x(), max.y(), max.z());\n     }\n \n     /**\n-     * the minimum coordinate of the first block x\n+     * Reset this region to have the same minimum and maximum corner as the {@code source} region.\n      *\n-     * @return the minimum coordinate x\n-     * @deprecated use {@link #minX()}\n+     * @return this region (after modification)\n+     * @throws IllegalArgumentException if the given coordinates for min and max are {@link #isValid()\n+     *         invalid}.\n      */\n-    @Deprecated\n-    public int getMinX() {\n-        return this.minX;\n+    public BlockRegion set(BlockRegionc source) {\n+        return this.set(source.minX(), source.minY(), source.minZ(), source.maxX(), source.maxY(), source.maxZ());\n     }\n \n-    /**\n-     * set the minimum coordinate of the first block x\n-     *\n-     * @return the minX\n-     */\n-    public BlockRegion minX(int x) {\n-        Preconditions.checkArgument(x <= this.maxX || this.maxX == Integer.MIN_VALUE);\n-        this.minX = x;\n-        return this;\n+    // -- min --------------------------------------------------------------------------------------------------------//\n+\n+    @Override\n+    public int minX() {\n+        return this.minX;\n     }\n \n-    /**\n-     * The y-coordinate of the minimum corner\n-     */\n+    @Override\n     public int minY() {\n         return this.minY;\n     }\n \n-    /**\n-     * the minimum coordinate of the first block y\n-     *\n-     * @return the minimum coordinate y\n-     * @deprecated use {@link #minY()}\n-     */\n-    @Deprecated\n-    public int getMinY() {\n-        return this.minY;\n+    @Override\n+    public int minZ() {\n+        return this.minZ;\n     }\n \n     /**\n-     * set the minimum coordinate of the first block y\n+     * Set the minimum x-coordinate of the region.\n      *\n-     * @return the minY\n+     * @return {@code this} (after modification)\n+     * @throws IllegalArgumentException if the resulting region would become {@link #isValid() invalid}.\n      */\n-    public BlockRegion minY(int y) {\n-        Preconditions.checkArgument(y <= this.maxY || this.maxY == Integer.MIN_VALUE);\n-        this.minY = y;\n+    public BlockRegion minX(int x) {\n+        Preconditions.checkArgument(x <= maxX);\n+        this.minX = x;\n         return this;\n     }\n \n     /**\n-     * The z-coordinate of the minimum corner\n-     */\n-    public int minZ() {\n-        return this.minZ;\n-    }\n-\n-    /**\n-     * the minimum coordinate of the first block z\n+     * Set the minimum y-coordinate of the region.\n      *\n-     * @return the minimum coordinate z\n-     * @deprecated use {@link #minZ()}\n+     * @return {@code this} (after modification)\n+     * @throws IllegalArgumentException if the resulting region would become {@link #isValid() invalid}.\n      */\n-    @Deprecated\n-    public int getMinZ() {\n-        return this.minZ;\n+    public BlockRegion minY(int y) {\n+        Preconditions.checkArgument(y <= maxY);\n+        this.minY = y;\n+        return this;\n     }\n \n     /**\n-     * set the minimum coordinate of the first block z\n+     * Set the minimum z-coordinate of the region.\n      *\n-     * @return the minZ\n+     * @return {@code this} (after modification)\n+     * @throws IllegalArgumentException if the resulting region would become {@link #isValid() invalid}.\n      */\n     public BlockRegion minZ(int z) {\n-        Preconditions.checkArgument(z <= this.maxZ || this.maxZ == Integer.MIN_VALUE);\n+        Preconditions.checkArgument(z <= maxZ);\n         this.minZ = z;\n         return this;\n     }\n \n     /**\n-     * Get the block coordinate minimum corner.\n+     * Set the coordinates of the minimum corner for this region.\n      *\n-     * @param dest will hold the result\n+     * @return {@code this} (after modification)\n+     * @throws IllegalArgumentException if the resulting region would become {@link #isValid() invalid}.\n      */\n-    public Vector3i getMin(Vector3i dest) {\n-        return dest.set(minX, minY, minZ);\n+    public BlockRegion setMin(int minX, int minY, int minZ) {\n+        return this.set(minX, minY, minZ, this.maxX, this.maxY, this.maxZ);\n     }\n \n-    /**\n-     * Sets the minimum coordinate of the first block for <code>this</code> {@link BlockRegion}\n-     *\n-     * @param min the first coordinate of the first block\n-     * @return this\n-     */\n     public BlockRegion setMin(Vector3ic min) {\n         return this.setMin(min.x(), min.y(), min.z());\n     }\n \n     /**\n-     * sets the minimum block for this {@link BlockRegion}\n+     * Translate the minimum corner of the region by adding given {@code (dx, dy, dz)}.\n      *\n-     * @param minX the x coordinate of the first block\n-     * @param minY the y coordinate of the first block\n-     * @param minZ the z coordinate of the first block\n-     * @return this\n+     * @param dx the number of blocks to add to the minimum corner on the x axis\n+     * @param dy the number of blocks to add to the minimum corner on the y axis\n+     * @param dz the number of blocks to add to the minimum corner on the z axis\n+     * @return {@code this} (after modification)\n+     * @throws IllegalArgumentException if the resulting region would become {@link #isValid() invalid}.\n      */\n-    public BlockRegion setMin(int minX, int minY, int minZ) {\n-        Preconditions.checkArgument(minX <= this.maxX || this.maxX == Integer.MIN_VALUE);\n-        Preconditions.checkArgument(minY <= this.maxY || this.maxX == Integer.MIN_VALUE);\n-        Preconditions.checkArgument(minZ <= this.maxZ || this.maxX == Integer.MIN_VALUE);\n-        this.minX = minX;\n-        this.minY = minY;\n-        this.minZ = minZ;\n-        return this;\n+    public BlockRegion addToMin(int dx, int dy, int dz) {\n+        return this.setMin(minX() + dx, minY() + dy, minZ() + dz);\n+    }\n+\n+    public BlockRegion addToMin(Vector3ic dmin) {\n+        return this.addToMin(dmin.x(), dmin.y(), dmin.z());\n     }\n \n     // -- max --------------------------------------------------------------------------------------------------------//\n \n-    /**\n-     * The x-coordinate of the maximum corner\n-     */\n+    @Override\n     public int maxX() {\n         return this.maxX;\n     }\n \n-    /**\n-     * the maximum coordinate of the second block x\n-     *\n-     * @return the minimum coordinate x\n-     * @deprecated use {@link #maxX()}\n-     */\n-    @Deprecated\n-    public int getMaxX() {\n-        return this.maxX;\n+    @Override\n+    public int maxY() {\n+        return this.maxY;\n+    }\n+\n+    @Override\n+    public int maxZ() {\n+        return this.maxZ;\n     }\n \n     /**\n-     * set the maximum coordinate of the second block x\n+     * Set the maximum x-coordinate of the region.\n      *\n-     * @return the minX\n+     * @return {@code this} (after modification)\n+     * @throws IllegalArgumentException if the resulting region would become {@link #isValid() invalid}.\n      */\n     public BlockRegion maxX(int x) {\n-        Preconditions.checkArgument(x >= this.minX || this.minX == Integer.MAX_VALUE);\n+        Preconditions.checkArgument(x >= minX);\n         this.maxX = x;\n         return this;\n     }\n \n     /**\n-     * The y-coordinate of the maximum corner\n-     */\n-    public int maxY() {\n-        return this.maxY;\n-    }\n-\n-    /**\n-     * the maximum coordinate of the second block y\n+     * Set the maximum y-coordinate of the region.\n      *\n-     * @return the minimum coordinate y\n-     * @deprecated use {@link #maxY()}\n-     */\n-    @Deprecated\n-    public int getMaxY() {\n-        return this.maxY;\n-    }\n-\n-    /**\n-     * set the maximum coordinate of the second block y\n-     *\n-     * @return the minY\n+     * @return {@code this} (after modification)\n+     * @throws IllegalArgumentException if the resulting region would become {@link #isValid() invalid}.\n      */\n     public BlockRegion maxY(int y) {\n-        Preconditions.checkArgument(y >= this.minY || this.minY == Integer.MAX_VALUE);\n+        Preconditions.checkArgument(y >= minY);\n         this.maxY = y;\n         return this;\n     }\n \n     /**\n-     * The z-coordinate of the maximum corner\n-     */\n-    public int maxZ() {\n-        return this.maxZ;\n-    }\n-\n-    /**\n-     * the maximum coordinate of the second block z\n+     * Set the maximum z-coordinate of the region.\n      *\n-     * @return the minimum coordinate z\n-     * @deprecated use {@link #maxZ()}\n-     */\n-    @Deprecated\n-    public int getMaxZ() {\n-        return this.maxZ;\n-    }\n-\n-    /**\n-     * set the maximum coordinate of the second block z\n-     *\n-     * @return the minZ\n+     * @return {@code this} (after modification)\n+     * @throws IllegalArgumentException if the resulting region would become {@link #isValid() invalid}.\n      */\n     public BlockRegion maxZ(int z) {\n-        Preconditions.checkArgument(z >= this.minZ || this.minZ == Integer.MAX_VALUE);\n+        Preconditions.checkArgument(z >= minZ);\n         this.maxZ = z;\n         return this;\n     }\n \n     /**\n-     * Get the block coordinate of the maximum corner.\n+     * Set the coordinates of the maximum corner for this region.\n      *\n-     * @param dest will hold the result\n+     * @return {@code this} (after modification)\n+     * @throws IllegalArgumentException if the resulting region would become {@link #isValid() invalid}.\n      */\n-    public Vector3i getMax(Vector3i dest) {\n-        return dest.set(maxX, maxY, maxZ);\n+    public BlockRegion setMax(int x, int y, int z) {\n+        return this.set(this.minX, this.minY, this.minZ, x, y, z);\n     }\n \n-    /**\n-     * Sets the maximum coordinate of the second block for <code>this</code> {@link BlockRegion}\n-     *\n-     * @param max the second coordinate of the second block\n-     * @return this\n-     */\n     public BlockRegion setMax(Vector3ic max) {\n         return this.setMax(max.x(), max.y(), max.z());\n     }\n \n     /**\n-     * sets the maximum block for this {@link BlockRegion}\n+     * Translate the maximum corner of the region by adding given {@code (dx, dy, dz)}.\n      *\n-     * @param maxX the x coordinate of the first block\n-     * @param maxY the y coordinate of the first block\n-     * @param maxZ the z coordinate of the first block\n-     * @return this\n+     * @param dx the number of blocks to add to the maximum corner on the x axis\n+     * @param dy the number of blocks to add to the maximum corner on the y axis\n+     * @param dz the number of blocks to add to the maximum corner on the z axis\n+     * @return {@code this} (after modification)\n+     * @throws IllegalArgumentException if the resulting region would become {@link #isValid() invalid}.\n      */\n-    public BlockRegion setMax(int maxX, int maxY, int maxZ) {\n-        Preconditions.checkArgument(maxX >= this.minX || this.minX == Integer.MAX_VALUE);\n-        Preconditions.checkArgument(maxY >= this.minY || this.minY == Integer.MAX_VALUE);\n-        Preconditions.checkArgument(maxZ >= this.minZ || this.minZ == Integer.MAX_VALUE);\n-        this.maxX = maxX;\n-        this.maxY = maxY;\n-        this.maxZ = maxZ;\n-        return this;\n+    public BlockRegion addToMax(int dx, int dy, int dz) {\n+        return this.setMax(this.maxX + dx, this.maxY + dy, this.maxZ + dz);\n+    }\n+\n+    public BlockRegion addToMax(Vector3ic dmax) {\n+        return this.addToMax(dmax.x(), dmax.y(), dmax.z());\n     }\n \n     // -- size -------------------------------------------------------------------------------------------------------//\n \n     /**\n-     * Set the size of the block region from minimum the minimum corner.\n+     * Set the size of the block region from the minimum corner.\n      *\n      * @param x the x coordinate to set the size; must be > 0\n      * @param y the y coordinate to set the size; must be > 0\n      * @param z the z coordinate to set the size; must be > 0\n-     * @return this after modification\n+     * @return {@code this} (after modification)\n+     * @throws IllegalArgumentException if the size is smaller than or equal to 0 in any dimension\n      */\n     public BlockRegion setSize(int x, int y, int z) {\n-        Preconditions.checkArgument(x > 0);\n-        Preconditions.checkArgument(y > 0);\n-        Preconditions.checkArgument(z > 0);\n-        this.maxX = this.minX + x - 1;\n-        this.maxY = this.minY + y - 1;\n-        this.maxZ = this.minZ + z - 1;\n-        return this;\n+        return this.setMax(this.minX + x, this.minY + y, this.minZ);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d05c5b3bbbdc7e6ee692eb2c1ae92e952a8c48b1"}, "originalPosition": 580}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7962383de4a81f2613fb579202c20392c411b526", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/7962383de4a81f2613fb579202c20392c411b526", "committedDate": "2020-12-24T21:03:47Z", "message": "Revert \"refactor!(BlockRegion): remove modifiers with explicit destination\"\n\nThis reverts commit 6e0585c20f6bf6dc300e0caa1b82a0228af67ea7."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e656d11ba4577449c8ebec7a1b3c935171dde75", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/1e656d11ba4577449c8ebec7a1b3c935171dde75", "committedDate": "2020-12-24T21:09:46Z", "message": "fix(BlockRegion): address review comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c4a928d135e8be4bcfaf9935211c058c10eedad", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/8c4a928d135e8be4bcfaf9935211c058c10eedad", "committedDate": "2020-12-24T21:10:08Z", "message": "feat(BlockRegion): add `dest` variants for `setPosition`"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3088d19312dc39113e9a8e82a93e52ceeb41d1e7", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/3088d19312dc39113e9a8e82a93e52ceeb41d1e7", "committedDate": "2020-12-24T21:38:57Z", "message": "fix(BlockRegion): fix failing tests; fix bugs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4NzE3ODQ2", "url": "https://github.com/MovingBlocks/Terasology/pull/4326#pullrequestreview-558717846", "createdAt": "2020-12-24T21:40:13Z", "commit": {"oid": "8c4a928d135e8be4bcfaf9935211c058c10eedad"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNFQyMTo0MDoxM1rOILVMIw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNFQyMTo0MDoxM1rOILVMIw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODc1MjQxOQ==", "bodyText": "for these you need to use set the dest can become invalid between setMin and setMax", "url": "https://github.com/MovingBlocks/Terasology/pull/4326#discussion_r548752419", "createdAt": "2020-12-24T21:40:13Z", "author": {"login": "pollend"}, "path": "engine/src/main/java/org/terasology/math/ChunkMath.java", "diffHunk": "@@ -575,67 +574,67 @@ public static BlockRegion getEdgeRegion(BlockRegion region, Side side, BlockRegi\n         switch (side) {\n             case TOP:\n                 return dest.setMin(\n-                    region.getMinX(),\n-                    region.getMaxY(),\n-                    region.getMinZ()\n+                    region.minX(),\n+                    region.maxY(),\n+                    region.minZ()\n                 ).setMax(\n-                    region.getMaxX(),\n-                    region.getMaxY(),\n-                    region.getMaxZ());\n+                    region.maxX(),\n+                    region.maxY(),\n+                    region.maxZ());\n             case BOTTOM:\n                 return dest.setMin(\n-                    region.getMinX(),\n-                    region.getMinY(),\n-                    region.getMinZ()\n+                    region.minX(),\n+                    region.minY(),\n+                    region.minZ()\n                 ).setMax(\n-                    region.getMaxX(),\n-                    region.getMinY(),\n-                    region.getMaxZ());\n+                    region.maxX(),\n+                    region.minY(),\n+                    region.maxZ());\n             case LEFT:\n                 return dest.setMin(\n-                    region.getMinX(),\n-                    region.getMinY(),\n-                    region.getMinZ()\n+                    region.minX(),\n+                    region.minY(),\n+                    region.minZ()\n                 ).setMax(\n-                    region.getMinX(),\n-                    region.getMaxY(),\n-                    region.getMaxZ());\n+                    region.minX(),\n+                    region.maxY(),\n+                    region.maxZ());\n             case RIGHT:\n                 return dest.setMin(\n-                    region.getMaxX(),\n-                    region.getMinY(),\n-                    region.getMinZ()\n+                    region.maxX(),\n+                    region.minY(),\n+                    region.minZ()\n                 ).setMax(\n-                    region.getMaxX(),\n-                    region.getMaxY(),\n-                    region.getMaxZ());\n+                    region.maxX(),\n+                    region.maxY(),\n+                    region.maxZ());\n             case FRONT:\n                 return dest.setMin(\n-                    region.getMinX(),\n-                    region.getMinY(),\n-                    region.getMinZ()\n+                    region.minX(),\n+                    region.minY(),\n+                    region.minZ()\n                 ).setMax(\n-                    region.getMaxX(),\n-                    region.getMaxY(),\n-                    region.getMinZ());\n+                    region.maxX(),\n+                    region.maxY(),\n+                    region.minZ());\n             case BACK:\n                 return dest.setMin(\n-                    region.getMinX(),\n-                    region.getMinY(),\n-                    region.getMaxZ()\n+                    region.minX(),\n+                    region.minY(),\n+                    region.maxZ()\n                 ).setMax(\n-                    region.getMaxX(),\n-                    region.getMaxY(),\n-                    region.getMaxZ());\n+                    region.maxX(),\n+                    region.maxY(),\n+                    region.maxZ());\n             default:\n                 return dest.setMin(\n-                    region.getMinX(),\n-                    region.getMinY(),\n-                    region.getMinZ()\n+                    region.minX(),\n+                    region.minY(),\n+                    region.minZ()\n                 ).setMax(\n-                    region.getMaxX(),\n-                    region.getMaxY(),\n-                    region.getMaxZ()\n+                    region.maxX(),\n+                    region.maxY(),\n+                    region.maxZ()\n                 );", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c4a928d135e8be4bcfaf9935211c058c10eedad"}, "originalPosition": 135}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e71e0ca31aabf9a566d8011f833f500ede25425", "author": {"user": {"login": "skaldarnar", "name": "Tobias Nett"}}, "url": "https://github.com/MovingBlocks/Terasology/commit/4e71e0ca31aabf9a566d8011f833f500ede25425", "committedDate": "2020-12-24T21:44:13Z", "message": "fix(ChunkMath): address review comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4NzE4MzAw", "url": "https://github.com/MovingBlocks/Terasology/pull/4326#pullrequestreview-558718300", "createdAt": "2020-12-24T21:47:32Z", "commit": {"oid": "4e71e0ca31aabf9a566d8011f833f500ede25425"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1214, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}