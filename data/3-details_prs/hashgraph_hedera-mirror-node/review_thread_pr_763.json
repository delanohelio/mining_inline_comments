{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE4NzgyMjU2", "number": 763, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQyMDo0MTowOVrOD9AnyA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQyMTo1MzoyOFrOD9BpQA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1Mjk5OTEyOnYy", "diffSide": "RIGHT", "path": "hedera-mirror-importer/src/main/java/com/hedera/mirror/importer/config/MirrorImporterConfiguration.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQyMDo0MTowOVrOGWTOTw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQyMToyODozOFrOGWUXIw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjAzNjgxNQ==", "bodyText": "I would prefer we hardcode the mainnet time for mainnet deploy that is currently scheduled on status.hedera.com for Thursday, May 21st, at 17:00 UTC. We can always update it later if it changes.\nWe wanted it to fail fast on deploy to mainnet, but the version that we will actually deploy to mainnet that runs this patch will be 0.10.1 anyway and that will fail fast if this is not populated. So we are fine with a possibly inaccurate timestamp for mainnet for 0.12.x.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/763#discussion_r426036815", "createdAt": "2020-05-15T20:41:09Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-importer/src/main/java/com/hedera/mirror/importer/config/MirrorImporterConfiguration.java", "diffHunk": "@@ -103,6 +110,25 @@ AwsCredentialsProvider awsCredentialsProvider(CommonDownloaderProperties downloa\n         return awsCredentials;\n     }\n \n+    @Bean\n+    FlywayConfigurationCustomizer flywayConfigurationCustomizer() {\n+        return configuration -> {\n+            Long timestamp = mirrorProperties.getTopicRunningHashV2AddedTimestamp();\n+            if (timestamp == null) {\n+                if (mirrorProperties.getNetwork() == HederaNetwork.MAINNET) {\n+                    throw new IllegalArgumentException(\"topicRunningHashV2AddedTimestamp is unknown for MAINNET. To \" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0f1f7c338832230f305c680944c9e06eb73dbf79"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjA1NTQ1OQ==", "bodyText": "Updated timestamp to mainnet release time.\nAm not worried about us. We know all about it.\nJust that, I don't want anyone to have corrupt data if they upgrade from before 0.10.0  to 0.12.x. Also BRD has its wanted fix in 0.12.x too.\nAs long as we put right timestamp in 0.12.0, even if it means delaying release a couple days, it's good.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/763#discussion_r426055459", "createdAt": "2020-05-15T21:28:38Z", "author": {"login": "apeksharma"}, "path": "hedera-mirror-importer/src/main/java/com/hedera/mirror/importer/config/MirrorImporterConfiguration.java", "diffHunk": "@@ -103,6 +110,25 @@ AwsCredentialsProvider awsCredentialsProvider(CommonDownloaderProperties downloa\n         return awsCredentials;\n     }\n \n+    @Bean\n+    FlywayConfigurationCustomizer flywayConfigurationCustomizer() {\n+        return configuration -> {\n+            Long timestamp = mirrorProperties.getTopicRunningHashV2AddedTimestamp();\n+            if (timestamp == null) {\n+                if (mirrorProperties.getNetwork() == HederaNetwork.MAINNET) {\n+                    throw new IllegalArgumentException(\"topicRunningHashV2AddedTimestamp is unknown for MAINNET. To \" +", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjAzNjgxNQ=="}, "originalCommit": {"oid": "0f1f7c338832230f305c680944c9e06eb73dbf79"}, "originalPosition": 41}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1MzE2NjcyOnYy", "diffSide": "RIGHT", "path": "docs/configuration.md", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQyMTo1MzoyOFrOGWU2Qw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNlQwOTowNzo1NlrOGWZP5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjA2MzQyNw==", "bodyText": "Now inaccurate after last commit. Now that we're auto-filling it, this can probably be greatly simplified. I like the old description more. You can just add a note that it's automatically populated via code based upon network and to use this setting is to override it.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/763#discussion_r426063427", "createdAt": "2020-05-15T21:53:28Z", "author": {"login": "steven-sheehy"}, "path": "docs/configuration.md", "diffHunk": "@@ -71,7 +71,7 @@ value, it is recommended to only populate overridden properties in the custom `a\n | `hedera.mirror.importer.parser.record.entity.persist.transactionBytes`      | false                   | Persist raw transaction bytes to the database                                                  |\n | `hedera.mirror.importer.parser.record.entity.sql.batchSize`                 | 100                     | When inserting transactions into db, executeBatches() is called every these many transactions  |\n | `hedera.mirror.importer.parser.record.pubsub.topicName`                     |                         | Pubsub topic to publish transactions to                                                        |\n-| `hedera.mirror.importer.topicRunningHashV2AddedTimestamp`            |                         | The Unix timestamp when topic message running hash v2 was introduced                           |\n+| `hedera.mirror.importer.topicRunningHashV2AddedTimestamp`            | If network is `MAINNET`, then null, otherwise 1588706343553042000  | Used for setting running hash version of topic messages when migrating from v1 to v2. Messages with consensusTimestamp >= this value will be marked version 2, and those less will be marked version 1 |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b1449d5bfdf17e7a9ec1d684cdd4d6e188ac0669"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjEzNTUyNQ==", "bodyText": "done.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/763#discussion_r426135525", "createdAt": "2020-05-16T09:07:56Z", "author": {"login": "apeksharma"}, "path": "docs/configuration.md", "diffHunk": "@@ -71,7 +71,7 @@ value, it is recommended to only populate overridden properties in the custom `a\n | `hedera.mirror.importer.parser.record.entity.persist.transactionBytes`      | false                   | Persist raw transaction bytes to the database                                                  |\n | `hedera.mirror.importer.parser.record.entity.sql.batchSize`                 | 100                     | When inserting transactions into db, executeBatches() is called every these many transactions  |\n | `hedera.mirror.importer.parser.record.pubsub.topicName`                     |                         | Pubsub topic to publish transactions to                                                        |\n-| `hedera.mirror.importer.topicRunningHashV2AddedTimestamp`            |                         | The Unix timestamp when topic message running hash v2 was introduced                           |\n+| `hedera.mirror.importer.topicRunningHashV2AddedTimestamp`            | If network is `MAINNET`, then null, otherwise 1588706343553042000  | Used for setting running hash version of topic messages when migrating from v1 to v2. Messages with consensusTimestamp >= this value will be marked version 2, and those less will be marked version 1 |", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjA2MzQyNw=="}, "originalCommit": {"oid": "b1449d5bfdf17e7a9ec1d684cdd4d6e188ac0669"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1041, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}