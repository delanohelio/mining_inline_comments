{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc1MDc0MjY4", "number": 532, "title": "Acceptance test improvements to support subscribe and publish only scenarios", "bodyText": "Detailed description:\nThe acceptance tests currently all create a new topic with a submit signature and publish to this topic. The result is quick tests to publish to an existing topic or just subscribe require modifications.\nThis change adds a few scenarios to\n\ncreate open topics (i.e. allow anyone to submit)\npublish only scenarios to an existing topic\nNot wait for a receipt when publishing\nPublish multiple messages in batches over time\nreadme update of above\n\nSpecial notes for your reviewer:\nI used these changes to test against Mainnet with multiple instances of each client.\nChecklist\n\n Documentation added\n Tests updated", "createdAt": "2020-02-13T20:32:32Z", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/532", "merged": true, "mergeCommit": {"oid": "381f33515ab556a5064fd4676c7a4b778131b3f1"}, "closed": true, "closedAt": "2020-02-14T22:40:47Z", "author": {"login": "Nana-EC"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcD-kc3gH2gAyMzc1MDc0MjY4OmRhNTJiNWU2ZDYyMDc1YzI1ODg0ZTc1NDA2NTA0OTUzZTBmMjJkMmQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcEV5rRgFqTM1OTEzNDk0OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "da52b5e6d62075c25884e75406504953e0f22d2d", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/da52b5e6d62075c25884e75406504953e0f22d2d", "committedDate": "2020-02-13T17:41:47Z", "message": "Added support for publishonly and subscribe only\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9bca6b060aab0307280276f887bab9eb5c64b2a2", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/9bca6b060aab0307280276f887bab9eb5c64b2a2", "committedDate": "2020-02-13T18:09:09Z", "message": "Fix subscribe message count\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dd5ce11a8c5bbac9df5130c41b34cbf2eb9dd1a3", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/dd5ce11a8c5bbac9df5130c41b34cbf2eb9dd1a3", "committedDate": "2020-02-13T20:16:41Z", "message": "Tagged Acceptance tests scenarios and verified runs against mainnet\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee4665fd4becaf9033bfbff6090907e8a42ee2e8", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/ee4665fd4becaf9033bfbff6090907e8a42ee2e8", "committedDate": "2020-02-13T20:26:09Z", "message": "Updated readme\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "04a23bf502be3e9376c8746a4b501c341a2c4245", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/04a23bf502be3e9376c8746a4b501c341a2c4245", "committedDate": "2020-02-13T23:04:40Z", "message": "Fixed issue with getting start time on publish only\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d006bf1334268e0cef68793b7b7ae79351832f5", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/6d006bf1334268e0cef68793b7b7ae79351832f5", "committedDate": "2020-02-13T23:13:43Z", "message": "Check for null publishedTransactionReceipts when not verifying published messages\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5MTM0OTQ5", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/532#pullrequestreview-359134949", "createdAt": "2020-02-14T18:28:14Z", "commit": {"oid": "6d006bf1334268e0cef68793b7b7ae79351832f5"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQxODoyODoxNFrOFp_s5Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQxODoyODoxNFrOFp_s5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTU3OTYyMQ==", "bodyText": "nit I publish and verify {int} messages sent to differentiate from the receive of X messages", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/532#discussion_r379579621", "createdAt": "2020-02-14T18:28:14Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-test/src/test/java/com/hedera/mirror/test/e2e/acceptance/steps/TopicFeature.java", "diffHunk": "@@ -169,12 +189,23 @@ public void verifySubscriptionChannelConnection() throws Throwable {\n         assertNotNull(subscriptionResponse);\n     }\n \n-    @When(\"I publish {int} messages\")\n-    public void verifyTopicMessagePublish(int messageCount) throws InterruptedException, HederaStatusException {\n-        numMessages = messageCount;\n-        List<TransactionReceipt> transactionReceipts = topicClient\n-                .publishMessagesToTopic(consensusTopicId, \"New message\", submitKey, messageCount);\n-        assertEquals(messageCount, transactionReceipts.size());\n+    @When(\"I publish {int} batches of {int} messages every {long} milliseconds\")\n+    public void publishTopicMessages(int numGroups, int messageCount, long milliSleep) throws InterruptedException,\n+            HederaStatusException {\n+        for (int i = 0; i < numGroups; i++) {\n+            topicClient.publishMessagesToTopic(consensusTopicId, \"New message\", submitKey, messageCount, false);\n+            Thread.sleep(milliSleep, 0);\n+        }\n+\n+        messageSubscribeCount = numGroups * messageCount;\n+    }\n+\n+    @When(\"I publish and verify {int} messages\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6d006bf1334268e0cef68793b7b7ae79351832f5"}, "originalPosition": 122}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3241, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}