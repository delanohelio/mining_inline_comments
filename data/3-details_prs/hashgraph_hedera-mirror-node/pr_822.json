{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMzMTg1MDI5", "number": 822, "title": "Containerize acceptance tests", "bodyText": "Detailed description:\nAs part of upcoming Kubernetes flows and deployments a containerized version of the acceptance tests is needed to allow for ease of use and movement\nThis change\n\nAdds a Dockerfile and bash script for use at container start to the hedera-mirror-test  test resources. Dockerfile pulls in local repo code and runs maven install to ensure all dependencies are available. File supports both acceptance and perf tests from Hedera-mirror-tests module\nUpdated the hedera-mirror-test pom to build and push the new image\nUpdated 3rd party license and sources download to cover test container. These are added to the container.\nImproved jmeter perf test logic to handle relative time starts\nImproved jmeter perf test rate logging logic to make it easier to see the different rates times for historic, incoming and total\n\nWhich issue(s) this PR fixes:\nFixes #758\nSpecial notes for your reviewer:\nCreated image is about 2.4GB in size and take about 5 minutes to build locally\nBoth application.yml for acceptance tests and user.properties for performance tests can be provided to modify test runs\nChecklist\n\n Documentation added\n Tests updated", "createdAt": "2020-06-11T16:03:46Z", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/822", "merged": true, "mergeCommit": {"oid": "4124cedd79de3a2dcf6ae35bcfc0add96d1f0a27"}, "closed": true, "closedAt": "2020-06-22T15:46:30Z", "author": {"login": "Nana-EC"}, "timelineItems": {"totalCount": 45, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcqQiRagFqTQyOTA2Njk0MA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABctyuzdgFqTQzNTA0NjU3OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5MDY2OTQw", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/822#pullrequestreview-429066940", "createdAt": "2020-06-11T16:06:48Z", "commit": {"oid": "8da6ef4938e232f4543b65e2be28a8608d1ee81d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxNjowNjo0OVrOGikgPw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxNjowNjo0OVrOGikgPw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODkwMjg0Nw==", "bodyText": "There's a bug where newer version of NETTY don't seem to play nice with and this was the last supported version that doesn't block the tests from running\nException in thread \"grpc\n-default-executor-0\" java.lang.NoSuchFieldError: NETTY_SHADED\nat io.grpc.netty.shaded.io.grpc.netty.NettyClientStream.<clinit>(NettyClientStream.java:59)\nat io.grpc.netty.shaded.io.grpc.netty.NettyClientTransport.newStream(NettyClientTransport.java:177)\nat io.grpc.internal.CallCredentialsApplyingTransportFactory$CallCredentialsApplyingTransport.newStream(CallCredentialsApplyingTransportFactory.java:117)\n\nat io.grpc.internal.ForwardingConnectionClientTransport.newStream(ForwardingConnectionClientTransport.java:49)\nat io.grpc.internal.InternalSubchannel$CallTracingTransport.newStream(InternalSubchannel.java:635)\nat io.grpc.internal.DelayedClientTransport$PendingStream.createRealStream(DelayedClientTransport.java:353)\nat io.grpc.internal.DelayedClientTransport$PendingStream.access$300(DelayedClientTransport.java:341)\nat io.grpc.internal.DelayedClientTransport$5.run(DelayedClientTransport.java:300)\nat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\nat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\nat java.base/java.lang.Thread.run(Thread.java:834)", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/822#discussion_r438902847", "createdAt": "2020-06-11T16:06:49Z", "author": {"login": "Nana-EC"}, "path": "hedera-mirror-test/pom.xml", "diffHunk": "@@ -32,7 +32,7 @@\n         <dependency>\n             <groupId>io.grpc</groupId>\n             <artifactId>grpc-netty-shaded</artifactId>\n-            <version>${grpc.version}</version>\n+            <version>1.27.2</version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8da6ef4938e232f4543b65e2be28a8608d1ee81d"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5MDY4MDE3", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/822#pullrequestreview-429068017", "createdAt": "2020-06-11T16:08:03Z", "commit": {"oid": "8da6ef4938e232f4543b65e2be28a8608d1ee81d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxNjowODowM1rOGikjRg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxNjowODowM1rOGikjRg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODkwMzYyMg==", "bodyText": "One option to reduce image size and build time is to move this to the script and do it at container start when a test is run", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/822#discussion_r438903622", "createdAt": "2020-06-11T16:08:03Z", "author": {"login": "Nana-EC"}, "path": "scripts/test-container/Dockerfile", "diffHunk": "@@ -0,0 +1,30 @@\n+# Containerizes hedera-mirror-node tests that can be run against various endpoints\n+# docker build -f scripts/test-container/Dockerfile . -t gcr.io/mirrornode/hedera-mirror-test:<project-version>\n+FROM adoptopenjdk:11-jdk-hotspot\n+\n+RUN mkdir /usr/etc\n+\n+WORKDIR /usr/etc\n+\n+RUN mkdir /usr/etc/hedera-mirror-node/\n+COPY . /usr/etc/hedera-mirror-node/\n+\n+WORKDIR /usr/etc/hedera-mirror-node\n+\n+ENV testProfile acceptance\n+ENV cucumberFlags \"@BalanceCheck\"\n+ENV subscribeThreadCount 30\n+ENV jmeterTestPlan E2E_Subscribe_Only.jmx\n+\n+# ensure all maven dependecies are placed ahead of test run\n+RUN ./mvnw install -DskipTests -Djib.skip -Ddocker.skip --no-transfer-progress \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8da6ef4938e232f4543b65e2be28a8608d1ee81d"}, "originalPosition": 20}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "928a877697ae97adfad969a93eada6e80aa12bba", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/928a877697ae97adfad969a93eada6e80aa12bba", "committedDate": "2020-06-11T21:21:47Z", "message": "Add aggregate-third-party-report logic\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}, "afterCommit": {"oid": "d2c9dd3b4f64266d11e0604b05d0c9884e5ca2ca", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/d2c9dd3b4f64266d11e0604b05d0c9884e5ca2ca", "committedDate": "2020-06-11T21:24:16Z", "message": "Add aggregate-third-party-report logic\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5NzkzMTE1", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/822#pullrequestreview-429793115", "createdAt": "2020-06-12T14:35:02Z", "commit": {"oid": "9b8952cb37276c62bda120a2320d03178fabb2b5"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQxNDozNTowM1rOGjGVVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxNzozMzowOVrOGj7-zQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTQ1NzExMQ==", "bodyText": "Should add a short comment to the pom otherwise this will just get changed later.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/822#discussion_r439457111", "createdAt": "2020-06-12T14:35:03Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-test/pom.xml", "diffHunk": "@@ -32,7 +32,7 @@\n         <dependency>\n             <groupId>io.grpc</groupId>\n             <artifactId>grpc-netty-shaded</artifactId>\n-            <version>${grpc.version}</version>\n+            <version>1.27.2</version>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODkwMjg0Nw=="}, "originalCommit": {"oid": "8da6ef4938e232f4543b65e2be28a8608d1ee81d"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTQ1ODAwNg==", "bodyText": "This should be moved to BUILDING.md", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/822#discussion_r439458006", "createdAt": "2020-06-12T14:36:31Z", "author": {"login": "steven-sheehy"}, "path": "charts/marketplace/gcp/README.md", "diffHunk": "@@ -358,6 +358,7 @@ kubectl scale -n \"${NAMESPACE}\" --replicas=1 \"statefulset/${APP_NAME}-importer\"\n ```\n \n # Upgrade\n+    ./mvnw clean deploy -N -Ddocker.skip.customfiles=false -Ddocker.tags.0=0.12 -Ddocker.tag.version=0.12.0-rc1", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b8952cb37276c62bda120a2320d03178fabb2b5"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDMyMzUyNg==", "bodyText": "This should probably be removed. We don't need to produce a report every build as no one is looking at them. We just need to do it ad hoc.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/822#discussion_r440323526", "createdAt": "2020-06-15T17:10:17Z", "author": {"login": "steven-sheehy"}, "path": "pom.xml", "diffHunk": "@@ -276,6 +276,18 @@\n                                 <organizeLicensesByDependencies>true</organizeLicensesByDependencies>\n                             </configuration>\n                         </execution>\n+                        <execution>\n+                            <id>default-cli</id>\n+                            <phase>verify</phase>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "386bc0cdde6000df3c500a0f291fc04c638a07b8"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDMyNTIwMA==", "bodyText": "The docker build for the hedera-mirror-test module should be within the hedera-mirror-test module even if the contextDir is the root dir.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/822#discussion_r440325200", "createdAt": "2020-06-15T17:13:34Z", "author": {"login": "steven-sheehy"}, "path": "pom.xml", "diffHunk": "@@ -345,8 +357,18 @@\n                             </build>\n                             <name>${docker.push.repository}/hedera-mirror-node/deployer:${docker.tag.version}</name>\n                         </image>\n+                        <image>\n+                            <build>\n+                                <contextDir>${project.basedir}</contextDir>\n+                                <dockerFile>${project.basedir}/scripts/test-container/Dockerfile</dockerFile>\n+                                <args>\n+                                    <tag>${docker.tag.version}</tag>\n+                                </args>\n+                            </build>\n+                            <name>${docker.push.repository}/hedera-mirror-test:${docker.tag.version}</name>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "386bc0cdde6000df3c500a0f291fc04c638a07b8"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDMyNTQxNQ==", "bodyText": "It's not clear from the name what this is for. Recommend reverting to deployer and moving test image to test module.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/822#discussion_r440325415", "createdAt": "2020-06-15T17:13:59Z", "author": {"login": "steven-sheehy"}, "path": "pom.xml", "diffHunk": "@@ -57,7 +57,7 @@\n         <docker-maven-plugin.version>0.33.0</docker-maven-plugin.version>\n         <docker.push.repository>gcr.io/mirrornode</docker.push.repository>\n         <docker.resources>${project.build.directory}/container</docker.resources>\n-        <docker.skip.deployer>true</docker.skip.deployer>\n+        <docker.skip.customfiles>true</docker.skip.customfiles>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "386bc0cdde6000df3c500a0f291fc04c638a07b8"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDMyNzk4OA==", "bodyText": "File can be removed as we don't need to produce the report in the build and logic should move to test module anyway. Instead, you should pass a <licensesConfigFile> to the top level config for license-maven-plugin that supplies the license for the oro dependency.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/822#discussion_r440327988", "createdAt": "2020-06-15T17:18:34Z", "author": {"login": "steven-sheehy"}, "path": "licenses/THIRD-PARTY.properties", "diffHunk": "@@ -0,0 +1 @@\n+oro--oro--2.0.8=Apache License, Version 1.1", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "386bc0cdde6000df3c500a0f291fc04c638a07b8"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDMyODYzMg==", "bodyText": "Very hard to read. Please move rate calculation to variables for clarity.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/822#discussion_r440328632", "createdAt": "2020-06-15T17:19:49Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-grpc/src/test/java/com/hedera/mirror/grpc/jmeter/sampler/result/HCSSamplerResult.java", "diffHunk": "@@ -74,10 +88,17 @@ public void onNext(T result) {\n \n     public void onComplete() {\n         String errorMessage = subscribeError == null ? \"\" : subscribeError.getMessage();\n-        log.info(\"Observed {} historic and {} incoming messages in {} ({}/s). Last message received {} ago. {}\",\n-                historicalMessageCount,\n-                incomingMessageCount, stopwatch, getMessageRate(), lastMessage, success ? \"Success\" :\n+        log.info(\"Observed {} total messages in {} ({}/s). Last message received {} ago. {}.\",\n+                getTotalMessageCount(), totalStopwatch, String\n+                        .format(\"%.02f\", getMessageRate(getTotalMessageCount(), totalStopwatch)), lastMessage,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "386bc0cdde6000df3c500a0f291fc04c638a07b8"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDMzMTY2Nw==", "bodyText": "You need to fix the download-licenses for the new test module. You need to change excludedScope to include test only for the test module. Please verify contents of image contain the source code and licenses for all hedera-mirror-test dependencies.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/822#discussion_r440331667", "createdAt": "2020-06-15T17:25:12Z", "author": {"login": "steven-sheehy"}, "path": "pom.xml", "diffHunk": "@@ -276,6 +276,18 @@\n                                 <organizeLicensesByDependencies>true</organizeLicensesByDependencies>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "386bc0cdde6000df3c500a0f291fc04c638a07b8"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDMzMTkzNg==", "bodyText": "Move the contents of test-container folder to hedera-mirror-test module", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/822#discussion_r440331936", "createdAt": "2020-06-15T17:25:40Z", "author": {"login": "steven-sheehy"}, "path": "scripts/test-container/.maven-dockerignore", "diffHunk": "@@ -0,0 +1,5 @@\n+target/", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "386bc0cdde6000df3c500a0f291fc04c638a07b8"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDMzMzg4MA==", "bodyText": "These 5 lines can be consolidated to:\nWORKDIR /usr/src/hedera-mirror-test\nCOPY . .", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/822#discussion_r440333880", "createdAt": "2020-06-15T17:29:02Z", "author": {"login": "steven-sheehy"}, "path": "scripts/test-container/Dockerfile", "diffHunk": "@@ -0,0 +1,30 @@\n+# Containerizes hedera-mirror-node tests that can be run against various endpoints\n+# docker build -f scripts/test-container/Dockerfile . -t gcr.io/mirrornode/hedera-mirror-test:<project-version>\n+FROM adoptopenjdk:11-jdk-hotspot\n+\n+RUN mkdir /usr/etc", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "386bc0cdde6000df3c500a0f291fc04c638a07b8"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDMzNDk2Ng==", "bodyText": "That would increase run time though, which is way worse.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/822#discussion_r440334966", "createdAt": "2020-06-15T17:31:04Z", "author": {"login": "steven-sheehy"}, "path": "scripts/test-container/Dockerfile", "diffHunk": "@@ -0,0 +1,30 @@\n+# Containerizes hedera-mirror-node tests that can be run against various endpoints\n+# docker build -f scripts/test-container/Dockerfile . -t gcr.io/mirrornode/hedera-mirror-test:<project-version>\n+FROM adoptopenjdk:11-jdk-hotspot\n+\n+RUN mkdir /usr/etc\n+\n+WORKDIR /usr/etc\n+\n+RUN mkdir /usr/etc/hedera-mirror-node/\n+COPY . /usr/etc/hedera-mirror-node/\n+\n+WORKDIR /usr/etc/hedera-mirror-node\n+\n+ENV testProfile acceptance\n+ENV cucumberFlags \"@BalanceCheck\"\n+ENV subscribeThreadCount 30\n+ENV jmeterTestPlan E2E_Subscribe_Only.jmx\n+\n+# ensure all maven dependecies are placed ahead of test run\n+RUN ./mvnw install -DskipTests -Djib.skip -Ddocker.skip --no-transfer-progress \\", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODkwMzYyMg=="}, "originalCommit": {"oid": "8da6ef4938e232f4543b65e2be28a8608d1ee81d"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDMzNTU1MQ==", "bodyText": "We use the following to download dependencies in CircleCI:\n./mvnw ${MAVEN_CLI_OPTS} de.qaware.maven:go-offline-maven-plugin:resolve-dependencies", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/822#discussion_r440335551", "createdAt": "2020-06-15T17:32:10Z", "author": {"login": "steven-sheehy"}, "path": "scripts/test-container/Dockerfile", "diffHunk": "@@ -0,0 +1,30 @@\n+# Containerizes hedera-mirror-node tests that can be run against various endpoints\n+# docker build -f scripts/test-container/Dockerfile . -t gcr.io/mirrornode/hedera-mirror-test:<project-version>\n+FROM adoptopenjdk:11-jdk-hotspot\n+\n+RUN mkdir /usr/etc\n+\n+WORKDIR /usr/etc\n+\n+RUN mkdir /usr/etc/hedera-mirror-node/\n+COPY . /usr/etc/hedera-mirror-node/\n+\n+WORKDIR /usr/etc/hedera-mirror-node\n+\n+ENV testProfile acceptance\n+ENV cucumberFlags \"@BalanceCheck\"\n+ENV subscribeThreadCount 30\n+ENV jmeterTestPlan E2E_Subscribe_Only.jmx\n+\n+# ensure all maven dependecies are placed ahead of test run\n+RUN ./mvnw install -DskipTests -Djib.skip -Ddocker.skip --no-transfer-progress \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "386bc0cdde6000df3c500a0f291fc04c638a07b8"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDMzNjA3Nw==", "bodyText": "This should be moved to the test README to document how to run the containerized acceptance tests", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/822#discussion_r440336077", "createdAt": "2020-06-15T17:33:09Z", "author": {"login": "steven-sheehy"}, "path": "scripts/test-container/Dockerfile", "diffHunk": "@@ -0,0 +1,30 @@\n+# Containerizes hedera-mirror-node tests that can be run against various endpoints\n+# docker build -f scripts/test-container/Dockerfile . -t gcr.io/mirrornode/hedera-mirror-test:<project-version>\n+FROM adoptopenjdk:11-jdk-hotspot\n+\n+RUN mkdir /usr/etc\n+\n+WORKDIR /usr/etc\n+\n+RUN mkdir /usr/etc/hedera-mirror-node/\n+COPY . /usr/etc/hedera-mirror-node/\n+\n+WORKDIR /usr/etc/hedera-mirror-node\n+\n+ENV testProfile acceptance\n+ENV cucumberFlags \"@BalanceCheck\"\n+ENV subscribeThreadCount 30\n+ENV jmeterTestPlan E2E_Subscribe_Only.jmx\n+\n+# ensure all maven dependecies are placed ahead of test run\n+RUN ./mvnw install -DskipTests -Djib.skip -Ddocker.skip --no-transfer-progress \\\n+    --batch-mode -Dorg.slf4j.simpleLogger.log.org.apache.maven.cli.transfer.Slf4jMavenTransferListener=warn\n+\n+ENTRYPOINT scripts/test-container/run-tests.sh\n+\n+# docker run -d -e testProfile=acceptance -e cucumberFlags=\"@SubscribeOnly\" \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "386bc0cdde6000df3c500a0f291fc04c638a07b8"}, "originalPosition": 25}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "978e9b1695a622d8b4b9db98fabd7dc216237bd9", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/978e9b1695a622d8b4b9db98fabd7dc216237bd9", "committedDate": "2020-06-18T02:03:41Z", "message": "Added base docker file with account balancecheck entrypoint\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c81f11e6d1d40c9eca03f1dac5566d973fff5301", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/c81f11e6d1d40c9eca03f1dac5566d973fff5301", "committedDate": "2020-06-18T02:03:41Z", "message": "Moved test run to bash script for more options\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80f9db70fb031bfdd0d95ee19b44aaf67e825c75", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/80f9db70fb031bfdd0d95ee19b44aaf67e825c75", "committedDate": "2020-06-18T02:03:42Z", "message": "Go with junit-platform-console-standalone and copy target with deps to DOcker Image\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0734d3f6949696cf1ea916a7321199c83383a1a6", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/0734d3f6949696cf1ea916a7321199c83383a1a6", "committedDate": "2020-06-18T02:03:42Z", "message": "cleaned up dependency generation\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "50a0112694009a400289b259f8b30789174d9fdf", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/50a0112694009a400289b259f8b30789174d9fdf", "committedDate": "2020-06-18T02:03:42Z", "message": "Switched back to maven and github pull approach\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c44b0e8e1632ea678e29db94e684696d5c0aae00", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/c44b0e8e1632ea678e29db94e684696d5c0aae00", "committedDate": "2020-06-18T02:03:42Z", "message": "Moved Dockerfile to base dir and added to maven flow\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7dc12de698780a2d83b495b9ff281af9e4bfa825", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/7dc12de698780a2d83b495b9ff281af9e4bfa825", "committedDate": "2020-06-18T02:03:42Z", "message": "Added 3rd party license report\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d96a4ddf9bb24161602d68c527156fb4122ea5a0", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/d96a4ddf9bb24161602d68c527156fb4122ea5a0", "committedDate": "2020-06-18T02:03:42Z", "message": "Remove thrid party report\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2882d5a169f40708fa8b3c7007b198f9f69a925", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/e2882d5a169f40708fa8b3c7007b198f9f69a925", "committedDate": "2020-06-18T02:03:43Z", "message": "Add aggregate-third-party-report logic\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed53e3144a41f4e48574a5440d5c40b201149010", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/ed53e3144a41f4e48574a5440d5c40b201149010", "committedDate": "2020-06-18T02:03:43Z", "message": "Add image cleanup logic for test images\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "07f5911ae710b26e87cc56724532eaa8ee4072d7", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/07f5911ae710b26e87cc56724532eaa8ee4072d7", "committedDate": "2020-06-18T02:03:43Z", "message": "Set bacth mode\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ed84e5aa1919781cab8e777e2c2522f5305957e", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/1ed84e5aa1919781cab8e777e2c2522f5305957e", "committedDate": "2020-06-18T02:03:43Z", "message": "Added support for subscribe x seconds ago for  historic and incoming subscribe\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5ede725f806c74e94cdadafd388b637e22886c40", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/5ede725f806c74e94cdadafd388b637e22886c40", "committedDate": "2020-06-18T02:03:43Z", "message": "Improves logging for subscribe perf scenario and avoids jmeter report folder issue when no clean is done\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d33f7305f841cee88f442181fd427a4ad0712e1", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/6d33f7305f841cee88f442181fd427a4ad0712e1", "committedDate": "2020-06-18T02:03:43Z", "message": " Fix subscribe logic failure due to stopwatch\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c530ceda1e3ac69b7a34aa5515574eb1527e121f", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/c530ceda1e3ac69b7a34aa5515574eb1527e121f", "committedDate": "2020-06-18T02:03:43Z", "message": "Wrap stopwatch stops to prevent errors\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4072f7135409716cf0515b71b4f5cee913136d85", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/4072f7135409716cf0515b71b4f5cee913136d85", "committedDate": "2020-06-18T02:03:43Z", "message": "Improved rate accuracy calculation\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "44c9461d858661dd3ff185530c20ae49fd8a011b", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/44c9461d858661dd3ff185530c20ae49fd8a011b", "committedDate": "2020-06-18T02:03:43Z", "message": "Added comment for netty downgrade\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8336f9555d32983211ebe96e40e2ab6a2ecbe8cd", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/8336f9555d32983211ebe96e40e2ab6a2ecbe8cd", "committedDate": "2020-06-18T02:04:17Z", "message": "Added base docker file with account balancecheck entrypoint\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e866b0e61fb366906311d688b3efaa4b3c760a6", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/1e866b0e61fb366906311d688b3efaa4b3c760a6", "committedDate": "2020-06-18T02:04:17Z", "message": "Moved test run to bash script for more options\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "26a1a9d704f52ae68476921972e14ba0eceb6b94", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/26a1a9d704f52ae68476921972e14ba0eceb6b94", "committedDate": "2020-06-18T02:04:17Z", "message": "Go with junit-platform-console-standalone and copy target with deps to DOcker Image\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "432e126ff7a1a007e9fcc29b267c28273da5da33", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/432e126ff7a1a007e9fcc29b267c28273da5da33", "committedDate": "2020-06-18T02:04:17Z", "message": "cleaned up dependency generation\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dee058ffe3e5b9ee72428d683389e381def9ff13", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/dee058ffe3e5b9ee72428d683389e381def9ff13", "committedDate": "2020-06-18T02:04:17Z", "message": "Switched back to maven and github pull approach\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b3f7a4fc138f38861b957ecba55787b6b29df0f7", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/b3f7a4fc138f38861b957ecba55787b6b29df0f7", "committedDate": "2020-06-18T02:05:36Z", "message": "Moved Dockerfile to base dir and added to maven flow\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3120aabc9ea76af394ea38a520d02bbda18a01c2", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/3120aabc9ea76af394ea38a520d02bbda18a01c2", "committedDate": "2020-06-18T02:05:36Z", "message": "Added 3rd party license report\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ad438c603e8d59daf6e717e8a9a92de753a8908", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/1ad438c603e8d59daf6e717e8a9a92de753a8908", "committedDate": "2020-06-18T02:05:36Z", "message": "Remove thrid party report\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "76a24f3729ba0f3cba9fdbeb89d3a3808390e30a", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/76a24f3729ba0f3cba9fdbeb89d3a3808390e30a", "committedDate": "2020-06-18T02:05:53Z", "message": "Set bacth mode\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "931932aa1088743a02b50149dbd19dcece76b145", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/931932aa1088743a02b50149dbd19dcece76b145", "committedDate": "2020-06-18T02:08:33Z", "message": "Improves logging for subscribe perf scenario and avoids jmeter report folder issue when no clean is done\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f7d5debaa7546d11c75dd6753e79e7e66f2062e7", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/f7d5debaa7546d11c75dd6753e79e7e66f2062e7", "committedDate": "2020-06-18T02:08:33Z", "message": "Move license logic to test module\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dcc858aa6722734cacc118b27fbd6af878fa57c9", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/dcc858aa6722734cacc118b27fbd6af878fa57c9", "committedDate": "2020-06-18T02:08:33Z", "message": "Moved docker containerization to test module\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e29b630398e7b8bd490ef5a4e7024b1d10dc359", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/8e29b630398e7b8bd490ef5a4e7024b1d10dc359", "committedDate": "2020-06-18T02:08:33Z", "message": "Added logic to print status every 1 min in perf tests\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "33c98d447482c6a83755bcc9f3a3997776fdcaca", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/33c98d447482c6a83755bcc9f3a3997776fdcaca", "committedDate": "2020-06-18T02:08:33Z", "message": " Correct grc tag\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1668b73a274fa24d53ffbccc8604178a9fa1d66e", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/1668b73a274fa24d53ffbccc8604178a9fa1d66e", "committedDate": "2020-06-18T00:52:15Z", "message": " Correct grc tag\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}, "afterCommit": {"oid": "33c98d447482c6a83755bcc9f3a3997776fdcaca", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/33c98d447482c6a83755bcc9f3a3997776fdcaca", "committedDate": "2020-06-18T02:08:33Z", "message": " Correct grc tag\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c4e23bcd295086f5d576482a24f74f94a33422c3", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/c4e23bcd295086f5d576482a24f74f94a33422c3", "committedDate": "2020-06-18T02:21:39Z", "message": "Fix rebase conflict\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3c9e5cdfdf4d1137c532fa5f85e237ebba877365", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/3c9e5cdfdf4d1137c532fa5f85e237ebba877365", "committedDate": "2020-06-18T17:39:42Z", "message": "Resolve license download issues\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8f369bd32b1d438c1796325cac2da61ced153ade", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/8f369bd32b1d438c1796325cac2da61ced153ade", "committedDate": "2020-06-18T17:43:05Z", "message": "Fixed dependency naming for xpp3\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzNjEzNDcy", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/822#pullrequestreview-433613472", "createdAt": "2020-06-18T20:13:04Z", "commit": {"oid": "8f369bd32b1d438c1796325cac2da61ced153ade"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQyMDoxMzowNFrOGl-pxg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQyMDo0ODo0NFrOGl_sNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQ3Njk5OA==", "bodyText": "Please put this back and remove from BUILDING.md. This is a user guide for customers. I only meant that any instructions on building images should be in BUILDING.md. But looks like those instructions have now moved to hedera-mirror-test/README instead", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/822#discussion_r442476998", "createdAt": "2020-06-18T20:13:04Z", "author": {"login": "steven-sheehy"}, "path": "charts/marketplace/gcp/README.md", "diffHunk": "@@ -357,26 +357,6 @@ Scale the importer back up\n kubectl scale -n \"${NAMESPACE}\" --replicas=1 \"statefulset/${APP_NAME}-importer\"\n ```\n \n-# Upgrade", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f369bd32b1d438c1796325cac2da61ced153ade"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQ4MDIzNQ==", "bodyText": "Would prefer Dockerfile in default location of src/main/docker so we don't have to configure plugin and use non-standard scripts folder", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/822#discussion_r442480235", "createdAt": "2020-06-18T20:19:59Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-test/pom.xml", "diffHunk": "@@ -103,8 +105,74 @@\n             <artifactId>spring-boot-starter-aop</artifactId>\n             <scope>test</scope>\n         </dependency>\n+        <!-- Manually added for license and dependency reference in deployed containers-->\n+        <dependency>\n+            <groupId>org.apache.jmeter</groupId>\n+            <artifactId>ApacheJMeter_core</artifactId>\n+            <version>${jmeter.version}</version>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.apache.jmeter</groupId>\n+            <artifactId>ApacheJMeter_java</artifactId>\n+            <version>${jmeter.version}</version>\n+            <scope>test</scope>\n+        </dependency>\n     </dependencies>\n \n+    <build>\n+        <plugins>\n+            <plugin>\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-dependency-plugin</artifactId>\n+                <executions>\n+                    <execution>\n+                        <configuration>\n+                            <includeScope>test</includeScope>\n+                        </configuration>\n+                    </execution>\n+                </executions>\n+            </plugin>\n+            <plugin>\n+                <groupId>org.codehaus.mojo</groupId>\n+                <artifactId>license-maven-plugin</artifactId>\n+                <executions>\n+                    <execution>\n+                        <id>download-licenses-for-container</id>\n+                        <configuration>\n+                            <licenseUrlReplacements>\n+                                <licenseUrlReplacement>\n+                                    <regexp>\\Qhttps://github.com/mockito/mockito/blob/master/LICENSE\\E</regexp>\n+                                    <replacement>https://github.com/mockito/mockito/blob/release/3.x/LICENSE\n+                                    </replacement>\n+                                </licenseUrlReplacement>\n+                            </licenseUrlReplacements>\n+                            <licensesConfigFile>${project.basedir}/src/license/licenses.xml</licensesConfigFile>\n+                        </configuration>\n+                    </execution>\n+                </executions>\n+            </plugin>\n+            <plugin>\n+                <groupId>io.fabric8</groupId>\n+                <artifactId>docker-maven-plugin</artifactId>\n+                <inherited>false</inherited>\n+                <configuration>\n+                    <images>\n+                        <image>\n+                            <build>\n+                                <contextDir>${maven.multiModuleProjectDirectory}</contextDir>\n+                                <dockerFile>${project.basedir}/scripts/Dockerfile</dockerFile>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f369bd32b1d438c1796325cac2da61ced153ade"}, "originalPosition": 71}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQ4MjkwOA==", "bodyText": "scheduler is null at this point resulting in a NPE, right?", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/822#discussion_r442482908", "createdAt": "2020-06-18T20:25:43Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-grpc/src/test/java/com/hedera/mirror/grpc/jmeter/sampler/HCSDirectStubTopicSampler.java", "diffHunk": "@@ -109,19 +110,20 @@ public void onCompleted() {\n                 result.onComplete();\n             }\n         };\n+        ScheduledExecutorService scheduler = null;\n \n         try {\n             asyncStub.subscribeTopic(request, responseObserver);\n+            scheduler.scheduleAtFixedRate(() -> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f369bd32b1d438c1796325cac2da61ced153ade"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQ4MzcwMg==", "bodyText": "I still see this file", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/822#discussion_r442483702", "createdAt": "2020-06-18T20:27:20Z", "author": {"login": "steven-sheehy"}, "path": "licenses/THIRD-PARTY.properties", "diffHunk": "@@ -0,0 +1 @@\n+oro--oro--2.0.8=Apache License, Version 1.1", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDMyNzk4OA=="}, "originalCommit": {"oid": "386bc0cdde6000df3c500a0f291fc04c638a07b8"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQ5MTg3Ng==", "bodyText": "Would prefer file either at hedera-mirror-test root or src/main/resources", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/822#discussion_r442491876", "createdAt": "2020-06-18T20:44:33Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-test/pom.xml", "diffHunk": "@@ -103,8 +105,74 @@\n             <artifactId>spring-boot-starter-aop</artifactId>\n             <scope>test</scope>\n         </dependency>\n+        <!-- Manually added for license and dependency reference in deployed containers-->\n+        <dependency>\n+            <groupId>org.apache.jmeter</groupId>\n+            <artifactId>ApacheJMeter_core</artifactId>\n+            <version>${jmeter.version}</version>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.apache.jmeter</groupId>\n+            <artifactId>ApacheJMeter_java</artifactId>\n+            <version>${jmeter.version}</version>\n+            <scope>test</scope>\n+        </dependency>\n     </dependencies>\n \n+    <build>\n+        <plugins>\n+            <plugin>\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-dependency-plugin</artifactId>\n+                <executions>\n+                    <execution>\n+                        <configuration>\n+                            <includeScope>test</includeScope>\n+                        </configuration>\n+                    </execution>\n+                </executions>\n+            </plugin>\n+            <plugin>\n+                <groupId>org.codehaus.mojo</groupId>\n+                <artifactId>license-maven-plugin</artifactId>\n+                <executions>\n+                    <execution>\n+                        <id>download-licenses-for-container</id>\n+                        <configuration>\n+                            <licenseUrlReplacements>\n+                                <licenseUrlReplacement>\n+                                    <regexp>\\Qhttps://github.com/mockito/mockito/blob/master/LICENSE\\E</regexp>\n+                                    <replacement>https://github.com/mockito/mockito/blob/release/3.x/LICENSE\n+                                    </replacement>\n+                                </licenseUrlReplacement>\n+                            </licenseUrlReplacements>\n+                            <licensesConfigFile>${project.basedir}/src/license/licenses.xml</licensesConfigFile>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f369bd32b1d438c1796325cac2da61ced153ade"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQ5NDAwNA==", "bodyText": "Do we need to specify all this information for all these dependencies when a URL replacement in the pom.xml would suffice (besides oro, who has no URL to replace)?", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/822#discussion_r442494004", "createdAt": "2020-06-18T20:48:44Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-test/src/license/licenses.xml", "diffHunk": "@@ -0,0 +1,78 @@\n+<?xml version=\"1.0\"?>\n+\n+<licenseSummary xmlns=\"http://mojo.codehaus.org/\"\n+                xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+                xsi:schemaLocation=\"http://mojo.codehaus.org/ licenses.xsd\">\n+    <dependencies>\n+        <dependency>\n+            <groupId>oro</groupId>\n+            <artifactId>oro</artifactId>\n+            <licenses>\n+                <license>\n+                    <name>Apache License, Version 1.1</name>\n+                    <url>https://www.apache.org/licenses/LICENSE-1.1</url>\n+                </license>\n+            </licenses>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.mockito</groupId>\n+            <artifactId>mockito-core</artifactId>\n+            <licenses>\n+                <license>\n+                    <name>MIT License</name>\n+                    <url>https://github.com/mockito/mockito/blob/release/3.x/LICENSE</url>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f369bd32b1d438c1796325cac2da61ced153ade"}, "originalPosition": 23}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2af763d6e83283609d2ba967e40c6f00367688d5", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/2af763d6e83283609d2ba967e40c6f00367688d5", "committedDate": "2020-06-22T04:38:47Z", "message": "Addressed feedback on files locations and license replace logic\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0OTc4NDcy", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/822#pullrequestreview-434978472", "createdAt": "2020-06-22T14:28:26Z", "commit": {"oid": "2af763d6e83283609d2ba967e40c6f00367688d5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQxNDoyODoyNlrOGnDLMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQxNDoyODoyNlrOGnDLMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzU5OTY2NA==", "bodyText": "This should still be removed from this file.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/822#discussion_r443599664", "createdAt": "2020-06-22T14:28:26Z", "author": {"login": "steven-sheehy"}, "path": "charts/marketplace/gcp/README.md", "diffHunk": "@@ -358,6 +358,7 @@ kubectl scale -n \"${NAMESPACE}\" --replicas=1 \"statefulset/${APP_NAME}-importer\"\n ```\n \n # Upgrade\n+    ./mvnw clean deploy -N -Ddocker.skip.deployer=false -Ddocker.tags.0=0.12 -Ddocker.tag.version=0.12.0-rc1", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2af763d6e83283609d2ba967e40c6f00367688d5"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0OTgwODA3", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/822#pullrequestreview-434980807", "createdAt": "2020-06-22T14:30:42Z", "commit": {"oid": "2af763d6e83283609d2ba967e40c6f00367688d5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQxNDozMDo0MlrOGnDSEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQxNDozMDo0MlrOGnDSEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzYwMTQyNw==", "bodyText": "Dockerfile should be in same folder as run-tests.sh. Since run-tests.sh is in src/main/resources can just move this there.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/822#discussion_r443601427", "createdAt": "2020-06-22T14:30:42Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-test/pom.xml", "diffHunk": "@@ -103,8 +105,83 @@\n             <artifactId>spring-boot-starter-aop</artifactId>\n             <scope>test</scope>\n         </dependency>\n+        <!-- Manually added for license and dependency reference in deployed containers-->\n+        <dependency>\n+            <groupId>org.apache.jmeter</groupId>\n+            <artifactId>ApacheJMeter_core</artifactId>\n+            <version>${jmeter.version}</version>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.apache.jmeter</groupId>\n+            <artifactId>ApacheJMeter_java</artifactId>\n+            <version>${jmeter.version}</version>\n+            <scope>test</scope>\n+        </dependency>\n     </dependencies>\n \n+    <build>\n+        <plugins>\n+            <plugin>\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-dependency-plugin</artifactId>\n+                <executions>\n+                    <execution>\n+                        <configuration>\n+                            <includeScope>test</includeScope>\n+                        </configuration>\n+                    </execution>\n+                </executions>\n+            </plugin>\n+            <plugin>\n+                <groupId>org.codehaus.mojo</groupId>\n+                <artifactId>license-maven-plugin</artifactId>\n+                <executions>\n+                    <execution>\n+                        <id>download-licenses-for-container</id>\n+                        <configuration>\n+                            <licenseUrlReplacements>\n+                                <licenseUrlReplacement>\n+                                    <regexp>\\Qhttps://github.com/mockito/mockito/blob/master/LICENSE\\E</regexp>\n+                                    <replacement>https://github.com/mockito/mockito/blob/release/3.x/LICENSE\n+                                    </replacement>\n+                                </licenseUrlReplacement>\n+                                <licenseUrlReplacement>\n+                                    <regexp>\\Qhttp://asm.objectweb.org/license.html\\E</regexp>\n+                                    <replacement>https://asm.ow2.io/license.html</replacement>\n+                                </licenseUrlReplacement>\n+                                <licenseUrlReplacement>\n+                                    <regexp>\\Qhttp://jtidy.svn.sourceforge.net/viewvc/jtidy/trunk/jtidy/LICENSE.txt?revision=95\\E</regexp>\n+                                    <replacement>http://jtidy.sourceforge.net/license.html</replacement>\n+                                </licenseUrlReplacement>\n+                            </licenseUrlReplacements>\n+                            <licensesConfigFile>${project.basedir}/src/test/resources/license/licenses.xml\n+                            </licensesConfigFile>\n+                        </configuration>\n+                    </execution>\n+                </executions>\n+            </plugin>\n+            <plugin>\n+                <groupId>io.fabric8</groupId>\n+                <artifactId>docker-maven-plugin</artifactId>\n+                <inherited>false</inherited>\n+                <configuration>\n+                    <images>\n+                        <image>\n+                            <build>\n+                                <contextDir>${maven.multiModuleProjectDirectory}</contextDir>\n+                                <dockerFile>${project.basedir}/src/main/Dockerfile</dockerFile>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2af763d6e83283609d2ba967e40c6f00367688d5"}, "originalPosition": 80}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a32622b80b64cacbfd18c1c88ca7b84f3dc8cfdd", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/a32622b80b64cacbfd18c1c88ca7b84f3dc8cfdd", "committedDate": "2020-06-22T15:06:11Z", "message": "Moved docker file and updated documentation\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM1MDQ2NTc5", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/822#pullrequestreview-435046579", "createdAt": "2020-06-22T15:39:03Z", "commit": {"oid": "a32622b80b64cacbfd18c1c88ca7b84f3dc8cfdd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3189, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}