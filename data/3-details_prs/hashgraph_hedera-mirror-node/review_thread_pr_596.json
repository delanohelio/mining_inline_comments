{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg3NDg5ODI4", "number": 596, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQyMjoyNjo0OFrODnqEeA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQyMjoyODoxNFrODnqFvA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyOTEwMzI4OnYy", "diffSide": "RIGHT", "path": "hedera-mirror-importer/src/main/java/com/hedera/mirror/importer/parser/balance/BalanceFileParser.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQyMjoyNjo0OFrOF1yDUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQyMjoyNjo0OFrOF1yDUw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTkzODg5OQ==", "bodyText": "Should this method be something that lives in Utility class. Taking in a boolean of whether to move or delete and the name\ne.g.\npublic void moveOrDeleteParsedFile(boolean move, String fileName) {\n        if (moved) {\n             Utility.moveFileToParsedDir(fileName, \"/parsedBalanceFiles/\");\n         } else {\n             Utility.deleteParsedFile(fileName);\n         }\n}\n\nThat way The FileParser classes only have to call\n\nUtility. moveOrDeleteParsedFile(parserProperties.isKeepFiles(), PARSED_DIR)", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/596#discussion_r391938899", "createdAt": "2020-03-12T22:26:48Z", "author": {"login": "Nana-EC"}, "path": "hedera-mirror-importer/src/main/java/com/hedera/mirror/importer/parser/balance/BalanceFileParser.java", "diffHunk": "@@ -97,23 +94,26 @@ private void processAllFilesForHistory() {\n \n     private void processLastBalanceFile() {\n         Stopwatch stopwatch = Stopwatch.createStarted();\n-\n         try {\n             File balanceFile = getLatestBalanceFile();\n-\n             if (balanceFile == null) {\n                 return;\n             }\n-\n             log.debug(\"Processing last balance file {}\", balanceFile);\n-\n             if (new AccountBalancesFileLoader((BalanceParserProperties) parserProperties, balanceFile.toPath())\n                     .loadAccountBalances()) {\n-                // move it\n-                Utility.moveFileToParsedDir(balanceFile.getCanonicalPath(), \"/parsedBalanceFiles/\");\n+                moveOrDeleteParsedFile(balanceFile.getCanonicalPath());\n             }\n         } catch (Exception e) {\n             log.error(\"Error processing balances files after {}\", stopwatch, e);\n         }\n     }\n+\n+    private void moveOrDeleteParsedFile(String fileName) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "42875c07c680e23a2f61c46f04ade38e571808bd"}, "originalPosition": 46}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyOTEwNjUyOnYy", "diffSide": "RIGHT", "path": "docs/configuration.md", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQyMjoyODoxNFrOF1yFOQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQyMjo0Mzo1NVrOF1yYZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTkzOTM4NQ==", "bodyText": "The code defaults to true but this file says it's false. You should clarify which one is right. I think we're going for false by default now no?", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/596#discussion_r391939385", "createdAt": "2020-03-12T22:28:14Z", "author": {"login": "Nana-EC"}, "path": "docs/configuration.md", "diffHunk": "@@ -114,10 +114,13 @@ value, it is recommended to only populate overridden properties in the custom `a\n | `hedera.mirror.parser.balance.batchSize`                   | 2000                    | The number of balances to insert before committing                                             |\n | `hedera.mirror.parser.balance.enabled`                     | true                    | Whether to enable balance file parsing                                                         |\n | `hedera.mirror.parser.balance.fileBufferSize`              | 200000                  | The size of the buffer to use when reading in the balance file                                 |\n+| `hedera.mirror.parser.balance.keepFiles`                   | false                   | Whether to keep parsed files after successful parsing. If false, files are deleted.            |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "42875c07c680e23a2f61c46f04ade38e571808bd"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTk0NDI5NQ==", "bodyText": "oops, should be false everywhere. Changed. Thanks.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/596#discussion_r391944295", "createdAt": "2020-03-12T22:43:55Z", "author": {"login": "apeksharma"}, "path": "docs/configuration.md", "diffHunk": "@@ -114,10 +114,13 @@ value, it is recommended to only populate overridden properties in the custom `a\n | `hedera.mirror.parser.balance.batchSize`                   | 2000                    | The number of balances to insert before committing                                             |\n | `hedera.mirror.parser.balance.enabled`                     | true                    | Whether to enable balance file parsing                                                         |\n | `hedera.mirror.parser.balance.fileBufferSize`              | 200000                  | The size of the buffer to use when reading in the balance file                                 |\n+| `hedera.mirror.parser.balance.keepFiles`                   | false                   | Whether to keep parsed files after successful parsing. If false, files are deleted.            |", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTkzOTM4NQ=="}, "originalCommit": {"oid": "42875c07c680e23a2f61c46f04ade38e571808bd"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1218, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}