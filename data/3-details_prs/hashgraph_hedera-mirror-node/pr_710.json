{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA3NjEzMjE4", "number": 710, "title": "Utilize plural rest api endpoints without breaking support", "bodyText": "Detailed description:\nThe /api/v1/topic(s) endpoint introduced inconsistencies in resource path names.\nThis change subscribes to consistently use plural resource names as they refer to collections unless an exception resource or path arises.\n\nUpdate servers.js topic routes to use plural.\nUtilize regex ? to still match old non plurals to not break any customers.\nUpdates singular references in tests and comments\n\nWhich issue(s) this PR fixes:\nFixes #700\nSpecial notes for your reviewer:\nThis is a non breaking change and utilizes expresses support of regex match.\nGoing forward we should conform to the plural\nChecklist\n\n Documentation added\n Tests updated", "createdAt": "2020-04-23T00:22:40Z", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/710", "merged": true, "mergeCommit": {"oid": "a8c82bd559f0a190439b9dd83430f7526a637d8f"}, "closed": true, "closedAt": "2020-04-23T23:38:00Z", "author": {"login": "Nana-EC"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcaRi5cgH2gAyNDA3NjEzMjE4OmMyNWE5ZDE1NjcyZmExZjc0ODlkMzM2NmYxYTExMjc2MTM1MzEzNTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcalG3bAFqTM5OTUzNTI1NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c25a9d15672fa1f7489d3366f1a1127613531353", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/c25a9d15672fa1f7489d3366f1a1127613531353", "committedDate": "2020-04-23T00:14:37Z", "message": "Utilize plural rest api endpoints without breaking support\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4NzE4MDI1", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/710#pullrequestreview-398718025", "createdAt": "2020-04-23T02:32:32Z", "commit": {"oid": "c25a9d15672fa1f7489d3366f1a1127613531353"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QwMjozMjozMlrOGKT2Mw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QwMjozMjozMlrOGKT2Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzQ2NDExNQ==", "bodyText": "When do we plan to remove '?' regex match?\nNo need for backward compatibility - that's the whole premise everyone agreed on when adding these apis. I intend to use it.\nThere should be only 2 users for these apis. Let's talk to atul, get in touch with these guys, notify them and remove '?' in 0.12.0.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/710#discussion_r413464115", "createdAt": "2020-04-23T02:32:32Z", "author": {"login": "apeksharma"}, "path": "hedera-mirror-rest/server.js", "diffHunk": "@@ -101,20 +101,21 @@ if (config.api.metrics.enabled) {\n \n let apiPrefix = '/api/v1';\n \n-// routes\n-app.getAsync(apiPrefix + '/transactions', transactions.getTransactions);\n-app.getAsync(apiPrefix + '/transactions/:id', transactions.getOneTransaction);\n-app.getAsync(apiPrefix + '/balances', balances.getBalances);\n+// accounts routes\n app.getAsync(apiPrefix + '/accounts', accounts.getAccounts);\n app.getAsync(apiPrefix + '/accounts/:id', accounts.getOneAccount);\n-app.getAsync(apiPrefix + '/topic/message/:consensusTimestamp', topicmessage.getMessageByConsensusTimestamp);\n \n-// support singular and plural resource naming for single topic message via id and sequence\n-app.getAsync(apiPrefix + '/topic/:id/message/:sequencenumber', topicmessage.getMessageByTopicAndSequenceRequest);\n-app.getAsync(apiPrefix + '/topics/:id/messages/:sequencenumber', topicmessage.getMessageByTopicAndSequenceRequest);\n+// balances routes\n+app.getAsync(apiPrefix + '/balances', balances.getBalances);\n+\n+// transactions routes\n+app.getAsync(apiPrefix + '/transactions', transactions.getTransactions);\n+app.getAsync(apiPrefix + '/transactions/:id', transactions.getOneTransaction);\n \n-app.getAsync(apiPrefix + '/topics/:id/messages', topicmessage.getTopicMessages);\n-app.getAsync(apiPrefix + '/topic/:id/messages', topicmessage.getTopicMessages);\n+// topics routes\n+app.getAsync(apiPrefix + '/topics/:id/messages?', topicmessage.getTopicMessages);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c25a9d15672fa1f7489d3366f1a1127613531353"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4NzIwNzUy", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/710#pullrequestreview-398720752", "createdAt": "2020-04-23T02:41:50Z", "commit": {"oid": "c25a9d15672fa1f7489d3366f1a1127613531353"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b4f2272b0204d14848909b51be4627353342e226", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/b4f2272b0204d14848909b51be4627353342e226", "committedDate": "2020-04-23T20:08:01Z", "message": "Only backwards support the ConsensusTimestamp endpoint\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk5NTM1MjU0", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/710#pullrequestreview-399535254", "createdAt": "2020-04-23T23:02:06Z", "commit": {"oid": "b4f2272b0204d14848909b51be4627353342e226"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3096, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}