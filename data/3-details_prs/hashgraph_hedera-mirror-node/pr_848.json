{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQxMTY0OTkx", "number": 848, "title": "Add Additional Importer and grpc latency metrics", "bodyText": "Detailed description:\nAdded additional metrics to parser and grpc to shed light on E2E HCS flow\n\nconsensusToPublishMetric - Latency from transaction consensus until gRPC API publishes to client\nparseDelayMetric - Latency between between the consensus time of the last transaction in the recordfile and when the mirror node processes the record file. Gives us a sense of how far behind the parser is during high TPS\n\nWhich issue(s) this PR fixes:\nFixes #852\nSpecial notes for your reviewer:\nChecklist\n\n Documentation added\n Tests updated", "createdAt": "2020-06-29T02:47:41Z", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/848", "merged": true, "mergeCommit": {"oid": "eff35d978a5e5f8bf4cb2474ea3866a19d82ca59"}, "closed": true, "closedAt": "2020-06-30T23:30:24Z", "author": {"login": "Nana-EC"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcwFbXoAH2gAyNDQxMTY0OTkxOmUwMzA2NzI5ODg1NGVhMzgzMzJlODgxMmViYzU3MTViNWJhMjI2MWM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcwc6c5AFqTQ0MDQxNDE1MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e03067298854ea38332e8812ebc5715b5ba2261c", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/e03067298854ea38332e8812ebc5715b5ba2261c", "committedDate": "2020-06-29T18:33:52Z", "message": "Add importer and grpc latency metrics\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5399388f9fcbd2f89459f58162c1ca01ffe157aa", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/5399388f9fcbd2f89459f58162c1ca01ffe157aa", "committedDate": "2020-06-29T18:33:52Z", "message": "Switch from TransactionConsensusLongTime to ransactionValidStartTime and fixed a test\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6921c612aad83f2b116d99b9cfbc3215b76bfbff", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/6921c612aad83f2b116d99b9cfbc3215b76bfbff", "committedDate": "2020-06-29T02:34:46Z", "message": "Add importer and grpc latency metrics\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}, "afterCommit": {"oid": "5399388f9fcbd2f89459f58162c1ca01ffe157aa", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/5399388f9fcbd2f89459f58162c1ca01ffe157aa", "committedDate": "2020-06-29T18:33:52Z", "message": "Switch from TransactionConsensusLongTime to ransactionValidStartTime and fixed a test\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ebca538b4f6c8791be217e1f6d1dfc5bd3fc6bf3", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/ebca538b4f6c8791be217e1f6d1dfc5bd3fc6bf3", "committedDate": "2020-06-29T19:11:21Z", "message": "renamed metric\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa2afb1213a7467bef331b1bdaef3eea83a03795", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/aa2afb1213a7467bef331b1bdaef3eea83a03795", "committedDate": "2020-06-29T19:17:08Z", "message": "Renamed metrics from consensus to validStart\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4ODYyODE5", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/848#pullrequestreview-438862819", "createdAt": "2020-06-29T03:18:51Z", "commit": {"oid": "6921c612aad83f2b116d99b9cfbc3215b76bfbff"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQwMzoxODo1MVrOGqDfLA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwMTowOTozOVrOGqn-YQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njc1MDUwOA==", "bodyText": "Since there's no dynamic tags, you should register this in constructor for performance reasons.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/848#discussion_r446750508", "createdAt": "2020-06-29T03:18:51Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-grpc/src/main/java/com/hedera/mirror/grpc/service/TopicMessageServiceImpl.java", "diffHunk": "@@ -207,6 +214,9 @@ void onNext(TopicMessage topicMessage) {\n             }\n \n             lastTopicMessage = topicMessage;\n+            consensusToPublishMetric\n+                    .register(meterRegistry)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6921c612aad83f2b116d99b9cfbc3215b76bfbff"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njc1MTE3OA==", "bodyText": "Putting this metric in topic message service means it runs for both historic messages and incoming, producing inaccurate results. Since this metric should really track when it was first published, it should be placed inside the CompositeTopicListener.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/848#discussion_r446751178", "createdAt": "2020-06-29T03:22:07Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-grpc/src/main/java/com/hedera/mirror/grpc/service/TopicMessageServiceImpl.java", "diffHunk": "@@ -53,6 +56,10 @@\n     private final TopicListener topicListener;\n     private final EntityRepository entityRepository;\n     private final TopicMessageRetriever topicMessageRetriever;\n+    private final MeterRegistry meterRegistry;\n+    private final Timer.Builder consensusToPublishMetric = Timer.builder(\"hedera.mirror.message.latency\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6921c612aad83f2b116d99b9cfbc3215b76bfbff"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njc1Mjk5Mw==", "bodyText": "I did a lot of work to reduce construction of temporary objects in this flow recently. It would be better to use System.currentTimeMillis() - topicMessage.getConsensusTimestampInstant().toEpochMillis(). Please verify accuracy of calculation. Potentially also System.nanoTime() - topicMessage.getConsensusTimestamp().\nNote that's nanoTime and not nanaTime. :D", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/848#discussion_r446752993", "createdAt": "2020-06-29T03:31:08Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-grpc/src/main/java/com/hedera/mirror/grpc/service/TopicMessageServiceImpl.java", "diffHunk": "@@ -207,6 +214,9 @@ void onNext(TopicMessage topicMessage) {\n             }\n \n             lastTopicMessage = topicMessage;\n+            consensusToPublishMetric\n+                    .register(meterRegistry)\n+                    .record(Duration.between(topicMessage.getConsensusTimestampInstant(), Instant.now()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6921c612aad83f2b116d99b9cfbc3215b76bfbff"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njc1MzI3OA==", "bodyText": "Would prefer hedera.mirror.topicmessage.latency for clarity.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/848#discussion_r446753278", "createdAt": "2020-06-29T03:32:23Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-grpc/src/main/java/com/hedera/mirror/grpc/service/TopicMessageServiceImpl.java", "diffHunk": "@@ -53,6 +56,10 @@\n     private final TopicListener topicListener;\n     private final EntityRepository entityRepository;\n     private final TopicMessageRetriever topicMessageRetriever;\n+    private final MeterRegistry meterRegistry;\n+    private final Timer.Builder consensusToPublishMetric = Timer.builder(\"hedera.mirror.message.latency\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6921c612aad83f2b116d99b9cfbc3215b76bfbff"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njc1MzkyMA==", "bodyText": "I would not use the term push because it's not a) synchronously pushing when you record and b) only elastic actually pushes while prometheus pulls. Recommend record instead of push.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/848#discussion_r446753920", "createdAt": "2020-06-29T03:35:34Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-importer/src/main/java/com/hedera/mirror/importer/parser/record/RecordFileParser.java", "diffHunk": "@@ -101,6 +106,8 @@ public RecordFileParser(ApplicationStatusRepository applicationStatusRepository,\n      */\n     public void loadRecordFile(StreamFileData streamFileData) {\n         Instant startTime = Instant.now();\n+        pushParserFallBehindMetric(streamFileData.getFilename(), startTime);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6921c612aad83f2b116d99b9cfbc3215b76bfbff"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njc1NDIzMw==", "bodyText": "Instead of parsing the filename, we should use the RecordFile object which has already retrieved the consensus timestamp. In fact, can just rf.loadend - rf.consensusend, don't need to pass in start time and convert to instants and durations.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/848#discussion_r446754233", "createdAt": "2020-06-29T03:37:16Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-importer/src/main/java/com/hedera/mirror/importer/parser/record/RecordFileParser.java", "diffHunk": "@@ -188,6 +195,19 @@ private void loadRecordFiles(List<String> fileNames) {\n         }\n     }\n \n+    private void pushParserFallBehindMetric(String filePath, Instant startTime) {\n+        try {\n+            String fileName = Utility.getFileName(filePath);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6921c612aad83f2b116d99b9cfbc3215b76bfbff"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njc1NDI2OQ==", "bodyText": "Register in constructor", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/848#discussion_r446754269", "createdAt": "2020-06-29T03:37:30Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-importer/src/main/java/com/hedera/mirror/importer/parser/record/RecordFileParser.java", "diffHunk": "@@ -188,6 +195,19 @@ private void loadRecordFiles(List<String> fileNames) {\n         }\n     }\n \n+    private void pushParserFallBehindMetric(String filePath, Instant startTime) {\n+        try {\n+            String fileName = Utility.getFileName(filePath);\n+            String fileTimeStamp = fileName.replace(\".rcd\", \"\").replace('_', ':');\n+            Instant fileCreateTime = Instant.parse(fileTimeStamp);\n+            parserFallBehindMetric\n+                    .register(meterRegistry)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6921c612aad83f2b116d99b9cfbc3215b76bfbff"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njc1NDQ1Ng==", "bodyText": "The description states milliseconds but we only have second granularity. Can we do ms here?", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/848#discussion_r446754456", "createdAt": "2020-06-29T03:38:24Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-importer/src/main/java/com/hedera/mirror/importer/parser/record/RecordFileParser.java", "diffHunk": "@@ -188,6 +195,19 @@ private void loadRecordFiles(List<String> fileNames) {\n         }\n     }\n \n+    private void pushParserFallBehindMetric(String filePath, Instant startTime) {\n+        try {\n+            String fileName = Utility.getFileName(filePath);\n+            String fileTimeStamp = fileName.replace(\".rcd\", \"\").replace('_', ':');\n+            Instant fileCreateTime = Instant.parse(fileTimeStamp);\n+            parserFallBehindMetric\n+                    .register(meterRegistry)\n+                    .record(Duration.between(fileCreateTime, startTime).getSeconds(), TimeUnit.SECONDS);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6921c612aad83f2b116d99b9cfbc3215b76bfbff"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzMxNDI3NQ==", "bodyText": "Inaccurate description. Not serialization but consensus timestamp of first transaction.\nAlso, I think it might be more accurate to compare against last consensus timestamp in file instead of first.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/848#discussion_r447314275", "createdAt": "2020-06-29T23:23:08Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-importer/src/main/java/com/hedera/mirror/importer/parser/record/RecordFileParser.java", "diffHunk": "@@ -89,6 +90,10 @@ public RecordFileParser(ApplicationStatusRepository applicationStatusRepository,\n                 .description(\"The duration in seconds it took to parse the file and store it in the database\")\n                 .tag(\"type\", parserProperties.getStreamType().toString());\n \n+        parserFallBehindMetric = Timer.builder(\"hedera.mirror.file.age\")\n+                .description(\"The difference in ms between the serialization of the file and when the mirror node \" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aa2afb1213a7467bef331b1bdaef3eea83a03795"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzMxNTA5MQ==", "bodyText": "Move tag and register to constructor or @PostConstruct (not onStart())", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/848#discussion_r447315091", "createdAt": "2020-06-29T23:25:40Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-importer/src/main/java/com/hedera/mirror/importer/parser/record/entity/sql/SqlEntityListener.java", "diffHunk": "@@ -193,13 +211,28 @@ private void executeBatches() {\n                             \"claims: {}, topic messages: {}, non-fee transfers: {}\",\n                     transactions, entityIds, transferLists, fileData, contractResult, liveHashes, topicMessages,\n                     nonFeeTransfers);\n+            batchInsertMetric.tag(\"entity\", \"transactions\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aa2afb1213a7467bef331b1bdaef3eea83a03795"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzMyODU4MQ==", "bodyText": "Would prefer hedera.mirror.parse.delay to closer match related hedera.mirror.parse.duration", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/848#discussion_r447328581", "createdAt": "2020-06-30T00:06:35Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-importer/src/main/java/com/hedera/mirror/importer/parser/record/RecordFileParser.java", "diffHunk": "@@ -89,6 +90,10 @@ public RecordFileParser(ApplicationStatusRepository applicationStatusRepository,\n                 .description(\"The duration in seconds it took to parse the file and store it in the database\")\n                 .tag(\"type\", parserProperties.getStreamType().toString());\n \n+        parserFallBehindMetric = Timer.builder(\"hedera.mirror.file.age\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aa2afb1213a7467bef331b1bdaef3eea83a03795"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzMzMDAxOA==", "bodyText": "Move to constructor or @PostConstruct. Constructor would be preferable to make final.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/848#discussion_r447330018", "createdAt": "2020-06-30T00:11:24Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-importer/src/main/java/com/hedera/mirror/importer/parser/record/entity/sql/SqlEntityListener.java", "diffHunk": "@@ -75,13 +79,27 @@\n     private PreparedStatement sqlInsertTopicMessage;\n     private Connection connection;\n \n+    // Metrics\n+    private final MeterRegistry meterRegistry;\n+    private Timer.Builder batchInsertMetric;\n+    private Timer.Builder validStartTimeToDBInsertMetric;\n+    private int validStartTimeOfFirstTransactionInBatch = Instant.now().getNano();\n+\n     @Override\n     public void onStart(StreamFileData streamFileData) {\n         String fileName = streamFileData.getFilename();\n         entityIds = new HashSet<>();\n         if (recordFileRepository.findByName(fileName).size() > 0) {\n             throw new DuplicateFileException(\"File already exists in the database: \" + fileName);\n         }\n+\n+        batchInsertMetric = Timer.builder(\"hedera.mirror.db.batch.insert\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aa2afb1213a7467bef331b1bdaef3eea83a03795"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzMzMDk2MQ==", "bodyText": "Move tag and register to constructor or @PostConstruct (not onStart())", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/848#discussion_r447330961", "createdAt": "2020-06-30T00:14:17Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-importer/src/main/java/com/hedera/mirror/importer/parser/record/entity/sql/SqlEntityListener.java", "diffHunk": "@@ -193,13 +211,28 @@ private void executeBatches() {\n                             \"claims: {}, topic messages: {}, non-fee transfers: {}\",\n                     transactions, entityIds, transferLists, fileData, contractResult, liveHashes, topicMessages,\n                     nonFeeTransfers);\n+            batchInsertMetric.tag(\"entity\", \"transactions\")\n+                    .register(meterRegistry)\n+                    .record(transactions.timeTakenInMs, TimeUnit.MILLISECONDS);\n         } catch (SQLException e) {\n             log.error(\"Error committing sql insert batch \", e);\n             throw new ParserSQLException(e);\n         }\n         batch_count = 0;\n     }\n \n+    private ExecuteBatchResult executeTransactionInsertBatch(PreparedStatement ps) throws SQLException {\n+        var executeResult = executeBatch(ps);\n+\n+        validStartTimeToDBInsertMetric.tag(\"entity\", \"transactions\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aa2afb1213a7467bef331b1bdaef3eea83a03795"}, "originalPosition": 68}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzMzOTUxMg==", "bodyText": "I don't think this is correct. Instant.now().get(ChronoField.NANO_OF_SECOND) would just return the 9 digit nanosecond part of the current time, not the number of nano seconds from epoch.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/848#discussion_r447339512", "createdAt": "2020-06-30T00:39:37Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-importer/src/main/java/com/hedera/mirror/importer/parser/record/entity/sql/SqlEntityListener.java", "diffHunk": "@@ -193,13 +211,28 @@ private void executeBatches() {\n                             \"claims: {}, topic messages: {}, non-fee transfers: {}\",\n                     transactions, entityIds, transferLists, fileData, contractResult, liveHashes, topicMessages,\n                     nonFeeTransfers);\n+            batchInsertMetric.tag(\"entity\", \"transactions\")\n+                    .register(meterRegistry)\n+                    .record(transactions.timeTakenInMs, TimeUnit.MILLISECONDS);\n         } catch (SQLException e) {\n             log.error(\"Error committing sql insert batch \", e);\n             throw new ParserSQLException(e);\n         }\n         batch_count = 0;\n     }\n \n+    private ExecuteBatchResult executeTransactionInsertBatch(PreparedStatement ps) throws SQLException {\n+        var executeResult = executeBatch(ps);\n+\n+        validStartTimeToDBInsertMetric.tag(\"entity\", \"transactions\")\n+                .register(meterRegistry)\n+                .record((Instant.now()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aa2afb1213a7467bef331b1bdaef3eea83a03795"}, "originalPosition": 70}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzM0ODMyMQ==", "bodyText": "This should not record just once per batch but for every transaction. Should use System.nanoTime() -  transaction.getValidStartNs() (double check this). In which case, this can probably move to RecordFileParser and implemented similar to the other latency metric.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/848#discussion_r447348321", "createdAt": "2020-06-30T01:09:39Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-importer/src/main/java/com/hedera/mirror/importer/parser/record/entity/sql/SqlEntityListener.java", "diffHunk": "@@ -193,13 +211,28 @@ private void executeBatches() {\n                             \"claims: {}, topic messages: {}, non-fee transfers: {}\",\n                     transactions, entityIds, transferLists, fileData, contractResult, liveHashes, topicMessages,\n                     nonFeeTransfers);\n+            batchInsertMetric.tag(\"entity\", \"transactions\")\n+                    .register(meterRegistry)\n+                    .record(transactions.timeTakenInMs, TimeUnit.MILLISECONDS);\n         } catch (SQLException e) {\n             log.error(\"Error committing sql insert batch \", e);\n             throw new ParserSQLException(e);\n         }\n         batch_count = 0;\n     }\n \n+    private ExecuteBatchResult executeTransactionInsertBatch(PreparedStatement ps) throws SQLException {\n+        var executeResult = executeBatch(ps);\n+\n+        validStartTimeToDBInsertMetric.tag(\"entity\", \"transactions\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aa2afb1213a7467bef331b1bdaef3eea83a03795"}, "originalPosition": 68}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aec547a56f83a88bec75b024249add36368d2407", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/aec547a56f83a88bec75b024249add36368d2407", "committedDate": "2020-06-30T20:18:26Z", "message": "Addressed feedback\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "12cc9f87f06696b753d1db4e9b4eb6a4225bf258", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/12cc9f87f06696b753d1db4e9b4eb6a4225bf258", "committedDate": "2020-06-30T20:48:12Z", "message": " Removed space\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwNDE0MTUw", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/848#pullrequestreview-440414150", "createdAt": "2020-06-30T21:55:38Z", "commit": {"oid": "12cc9f87f06696b753d1db4e9b4eb6a4225bf258"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4055, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}