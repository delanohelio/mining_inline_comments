{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI0ODA5NDk1", "number": 1282, "title": "Improve gRPC missing message handling in TopicMessageService", "bodyText": "Detailed description:\n\nAdd unthrottled mode to topic retriever\nUse unthrottled mode to retrieve missing topic messages at full speed in TopicMessageServiceImpl\nFix the issue in retriever when topic filter limit is multiple of max page size, more messages will be retrieved than the limit\nUpdate configuration.md\nUpdate tests\n\nWhich issue(s) this PR fixes:\nFixes #1221\nSpecial notes for your reviewer:\nChecklist\n\n Documentation added\n Tests updated", "createdAt": "2020-11-20T16:19:52Z", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1282", "merged": true, "mergeCommit": {"oid": "052e2433a4258ef054fab022a8cfab51f18ca3fe"}, "closed": true, "closedAt": "2020-11-23T19:18:03Z", "author": {"login": "xin-hedera"}, "timelineItems": {"totalCount": 20, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdbfgr8gH2gAyNTI0ODA5NDk1OjZhZTg4MzdjNmM3YTIxZDE0ZjY5YTExYzZlYWFkYTA3Njc1MTU4OGQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdfZ1OZgFqTUzNjc1ODM2OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6ae8837c6c7a21d14f69a11c6eaada076751588d", "author": {"user": {"login": "xin-hedera", "name": "Xin Li"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/6ae8837c6c7a21d14f69a11c6eaada076751588d", "committedDate": "2020-11-11T15:15:57Z", "message": "new timeout mechanism\n\nSigned-off-by: Xin Li <xin.li@swirlds.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "be6ba65755aeb2bd746e068d8f93e18fcc8947f2", "author": {"user": {"login": "xin-hedera", "name": "Xin Li"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/be6ba65755aeb2bd746e068d8f93e18fcc8947f2", "committedDate": "2020-11-13T15:18:43Z", "message": "reduce the number of chained flux operations, optimize filters\n\nSigned-off-by: Xin Li <xin.li@swirlds.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "af319dcb4e68d19aa3e32fa866d84d012ce992a1", "author": {"user": {"login": "xin-hedera", "name": "Xin Li"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/af319dcb4e68d19aa3e32fa866d84d012ce992a1", "committedDate": "2020-11-13T17:22:01Z", "message": "revert TopicMessage back to use AtomicReference, fix integration test case\n\nSigned-off-by: Xin Li <xin.li@swirlds.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f0dade1547d44a6820f5fc998b3278c7d5f9d803", "author": {"user": {"login": "xin-hedera", "name": "Xin Li"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/f0dade1547d44a6820f5fc998b3278c7d5f9d803", "committedDate": "2020-11-17T16:26:10Z", "message": "clean up and fix integration test failures\n\nSigned-off-by: Xin Li <xin.li@swirlds.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "086e036aa6ffd37474ed063fb23032d8f6aa308f", "author": {"user": {"login": "xin-hedera", "name": "Xin Li"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/086e036aa6ffd37474ed063fb23032d8f6aa308f", "committedDate": "2020-11-17T16:27:36Z", "message": "increase grpc container cpu and memory limits\n\nSigned-off-by: Xin Li <xin.li@swirlds.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae24d1350cee7dac7490ea507b34c92dc649b0eb", "author": {"user": {"login": "xin-hedera", "name": "Xin Li"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/ae24d1350cee7dac7490ea507b34c92dc649b0eb", "committedDate": "2020-11-17T16:28:16Z", "message": "Merge branch 'master' into grpc-timeout"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5dc58cf600420ccbc36cf69a5ebd6d5b85218e32", "author": {"user": {"login": "xin-hedera", "name": "Xin Li"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/5dc58cf600420ccbc36cf69a5ebd6d5b85218e32", "committedDate": "2020-11-17T16:51:24Z", "message": "sonacloud says code smell\n\nSigned-off-by: Xin Li <xin.li@swirlds.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b36e2afb86dc469a81a61667b1f32bbc6dae31fe", "author": {"user": {"login": "xin-hedera", "name": "Xin Li"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/b36e2afb86dc469a81a61667b1f32bbc6dae31fe", "committedDate": "2020-11-17T17:18:31Z", "message": "fix test failure\n\nSigned-off-by: Xin Li <xin.li@swirlds.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "206ca8a45658a88651a214016473c4ec0c9799b2", "author": {"user": {"login": "xin-hedera", "name": "Xin Li"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/206ca8a45658a88651a214016473c4ec0c9799b2", "committedDate": "2020-11-17T20:01:47Z", "message": "Merge branch 'master' into grpc-improve-gap-handling"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1dbf35252202021577f574f7ce5cf5e8dfc32875", "author": {"user": {"login": "xin-hedera", "name": "Xin Li"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/1dbf35252202021577f574f7ce5cf5e8dfc32875", "committedDate": "2020-11-18T23:07:41Z", "message": "address review feedback\n\nSigned-off-by: Xin Li <xin.li@swirlds.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7d53af27c62a04d7f83cf9a76418c57d79c8a8a6", "author": {"user": {"login": "xin-hedera", "name": "Xin Li"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/7d53af27c62a04d7f83cf9a76418c57d79c8a8a6", "committedDate": "2020-11-19T04:57:53Z", "message": "Merge branch 'grpc-optmization' into grpc-improve-gap-handling"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "418bb4d986dd33943730a5569fb6da32b88d20bf", "author": {"user": {"login": "xin-hedera", "name": "Xin Li"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/418bb4d986dd33943730a5569fb6da32b88d20bf", "committedDate": "2020-11-20T15:47:41Z", "message": "add unthrottled mode to TopicMessageRetriever and use it for full speed missing message retrieval in TopicMessageService\n\nSigned-off-by: Xin Li <xin.li@swirlds.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c573c3e5790b9aeca9c2ade50ae812f12ba150b7", "author": {"user": {"login": "xin-hedera", "name": "Xin Li"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/c573c3e5790b9aeca9c2ade50ae812f12ba150b7", "committedDate": "2020-11-20T16:14:02Z", "message": "Merge branch 'master' into grpc-improve-gap-handling\n\nSigned-off-by: Xin Li <xin.li@swirlds.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM1NzU5MzI5", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1282#pullrequestreview-535759329", "createdAt": "2020-11-20T20:36:31Z", "commit": {"oid": "c573c3e5790b9aeca9c2ade50ae812f12ba150b7"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQyMDozNjozMVrOH3f75A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQyMTozMTowMFrOH3hcJg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzk1Njk2NA==", "bodyText": "Can we add a DurationMin?", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1282#discussion_r527956964", "createdAt": "2020-11-20T20:36:31Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-grpc/src/main/java/com/hedera/mirror/grpc/retriever/RetrieverProperties.java", "diffHunk": "@@ -45,4 +45,13 @@\n \n     @NotNull\n     private Duration timeout = Duration.ofSeconds(60L);\n+\n+    @Min(1000)\n+    private int unthrottledMaxPageSize = 5000;\n+\n+    @NotNull", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c573c3e5790b9aeca9c2ade50ae812f12ba150b7"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzk1NzQxNg==", "bodyText": "Can we add a nested object to group these and simplify the naming?", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1282#discussion_r527957416", "createdAt": "2020-11-20T20:37:33Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-grpc/src/main/java/com/hedera/mirror/grpc/retriever/RetrieverProperties.java", "diffHunk": "@@ -45,4 +45,13 @@\n \n     @NotNull\n     private Duration timeout = Duration.ofSeconds(60L);\n+\n+    @Min(1000)\n+    private int unthrottledMaxPageSize = 5000;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c573c3e5790b9aeca9c2ade50ae812f12ba150b7"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzk2NzE5MQ==", "bodyText": "Is there a scenario where missing messages could return less than page size and not be complete?", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1282#discussion_r527967191", "createdAt": "2020-11-20T20:59:56Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-grpc/src/main/java/com/hedera/mirror/grpc/retriever/PollingTopicMessageRetriever.java", "diffHunk": "@@ -98,19 +98,45 @@ public PollingTopicMessageRetriever(RetrieverProperties retrieverProperties,\n     private class PollingContext {\n \n         private final TopicMessageFilter filter;\n+        private final boolean throttled;\n+        private final Duration frequency;\n+        private final int maxPageSize;\n+        private final long numRepeats;\n         private final AtomicLong pageSize = new AtomicLong(0L);\n         private final Stopwatch stopwatch = Stopwatch.createStarted();\n         private final AtomicLong total = new AtomicLong(0L);\n         private volatile TopicMessage last;\n \n+        public PollingContext(TopicMessageFilter filter, boolean throttled) {\n+            this.filter = filter;\n+            this.throttled = throttled;\n+\n+            if (throttled) {\n+                numRepeats = Long.MAX_VALUE;\n+                frequency = retrieverProperties.getPollingFrequency();\n+                maxPageSize = retrieverProperties.getMaxPageSize();\n+            } else {\n+                numRepeats = retrieverProperties.getUnthrottledMaxPolls();\n+                frequency = retrieverProperties.getUnthrottledPollingFrequency();\n+                maxPageSize = retrieverProperties.getUnthrottledMaxPageSize();\n+            }\n+        }\n+\n         /**\n          * Checks if this publisher is complete by comparing if the number of results in the last page was less than the\n-         * page size. This avoids the extra query if we were to just check if last page was empty.\n+         * page size or if the limit has reached if it's set. This avoids the extra query if we were to just check\n+         * if last page was empty.\n          *\n          * @return whether all historic messages have been returned\n          */\n         boolean isComplete() {\n-            return pageSize.get() < retrieverProperties.getMaxPageSize();\n+            boolean limitHit = filter.hasLimit() && filter.getLimit() == total.get();\n+\n+            if (throttled) {\n+                return pageSize.get() < retrieverProperties.getMaxPageSize() || limitHit;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c573c3e5790b9aeca9c2ade50ae812f12ba150b7"}, "originalPosition": 79}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzk3NzkxNg==", "bodyText": "This equals 250K TPS. Perhaps we should lower the limits a bit. Also, 5K might be a bit high for page size depending upon how large the messages are. At 6K message size a 5K poll would return 30MB+ of data. Perhaps we should keep max page size at 1000 and just increase polling frequency?", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1282#discussion_r527977916", "createdAt": "2020-11-20T21:24:51Z", "author": {"login": "steven-sheehy"}, "path": "docs/configuration.md", "diffHunk": "@@ -174,9 +174,12 @@ value, it is recommended to only populate overridden properties in the custom `a\n | `hedera.mirror.grpc.port`                                   | 5600             | The GRPC API port                                                                              |\n | `hedera.mirror.grpc.retriever.enabled`                      | true             | Whether to retrieve historical massages or not                                                 |\n | `hedera.mirror.grpc.retriever.maxPageSize`                  | 1000             | The maximum number of messages the retriever can return in a single call to the database       |\n-| `hedera.mirror.grpc.retriever.pollingFrequency`             | 2s               | How often to polling for historical messages. Can accept duration units like `50ms`, `10s` etc |\n+| `hedera.mirror.grpc.retriever.pollingFrequency`             | 2s               | How often to poll for historical messages. Can accept duration units like `50ms`, `10s` etc    |\n | `hedera.mirror.grpc.retriever.threadMultiplier`             | 4                | Multiplied by the CPU count to calculate the number of retriever threads                       |\n | `hedera.mirror.grpc.retriever.timeout`                      | 60s              | How long to wait between emission of messages before returning an error                        |\n+| `hedera.mirror.grpc.retriever.unthrottledMaxPageSize`       | 5000             | The maximum number of messages the retriever can return in a single call to the database when unthrottled |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c573c3e5790b9aeca9c2ade50ae812f12ba150b7"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzk4MTYwNg==", "bodyText": "What happens when unthrottled max polls is reached but there are still messages? PollingTopicMessageRetriever will complete but will TopicMessageServiceImpl ever complete? Will it error? We should add a test if possible.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1282#discussion_r527981606", "createdAt": "2020-11-20T21:31:00Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-grpc/src/main/java/com/hedera/mirror/grpc/retriever/PollingTopicMessageRetriever.java", "diffHunk": "@@ -98,19 +98,45 @@ public PollingTopicMessageRetriever(RetrieverProperties retrieverProperties,\n     private class PollingContext {\n \n         private final TopicMessageFilter filter;\n+        private final boolean throttled;\n+        private final Duration frequency;\n+        private final int maxPageSize;\n+        private final long numRepeats;\n         private final AtomicLong pageSize = new AtomicLong(0L);\n         private final Stopwatch stopwatch = Stopwatch.createStarted();\n         private final AtomicLong total = new AtomicLong(0L);\n         private volatile TopicMessage last;\n \n+        public PollingContext(TopicMessageFilter filter, boolean throttled) {\n+            this.filter = filter;\n+            this.throttled = throttled;\n+\n+            if (throttled) {\n+                numRepeats = Long.MAX_VALUE;\n+                frequency = retrieverProperties.getPollingFrequency();\n+                maxPageSize = retrieverProperties.getMaxPageSize();\n+            } else {\n+                numRepeats = retrieverProperties.getUnthrottledMaxPolls();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c573c3e5790b9aeca9c2ade50ae812f12ba150b7"}, "originalPosition": 60}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM1NzkwNzk3", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1282#pullrequestreview-535790797", "createdAt": "2020-11-20T21:31:43Z", "commit": {"oid": "c573c3e5790b9aeca9c2ade50ae812f12ba150b7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQyMTozMTo0M1rOH3hdUA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQyMTozMTo0M1rOH3hdUA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzk4MTkwNA==", "bodyText": "Should the throttled have a lower value than Long.MAX_VALUE\nIt's likely in the unthrottled cases the value would be less than that, especially with a default of 12", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1282#discussion_r527981904", "createdAt": "2020-11-20T21:31:43Z", "author": {"login": "Nana-EC"}, "path": "hedera-mirror-grpc/src/main/java/com/hedera/mirror/grpc/retriever/PollingTopicMessageRetriever.java", "diffHunk": "@@ -98,19 +98,45 @@ public PollingTopicMessageRetriever(RetrieverProperties retrieverProperties,\n     private class PollingContext {\n \n         private final TopicMessageFilter filter;\n+        private final boolean throttled;\n+        private final Duration frequency;\n+        private final int maxPageSize;\n+        private final long numRepeats;\n         private final AtomicLong pageSize = new AtomicLong(0L);\n         private final Stopwatch stopwatch = Stopwatch.createStarted();\n         private final AtomicLong total = new AtomicLong(0L);\n         private volatile TopicMessage last;\n \n+        public PollingContext(TopicMessageFilter filter, boolean throttled) {\n+            this.filter = filter;\n+            this.throttled = throttled;\n+\n+            if (throttled) {\n+                numRepeats = Long.MAX_VALUE;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c573c3e5790b9aeca9c2ade50ae812f12ba150b7"}, "originalPosition": 56}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9de0d30feda9ae5c76c1cfc822991dc722b0800b", "author": {"user": {"login": "xin-hedera", "name": "Xin Li"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/9de0d30feda9ae5c76c1cfc822991dc722b0800b", "committedDate": "2020-11-21T04:06:38Z", "message": "group the properties for unthrottled mode and add DurationMin to unthrottled pollingFrequency\n\nSigned-off-by: Xin Li <xin.li@swirlds.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "67302f30f3e66fa97be63e48ccb095b7ddbf8015", "author": {"user": {"login": "xin-hedera", "name": "Xin Li"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/67302f30f3e66fa97be63e48ccb095b7ddbf8015", "committedDate": "2020-11-22T21:43:19Z", "message": "update doc and test cases\n\nSigned-off-by: Xin Li <xin.li@swirlds.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2NTc0MzM4", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1282#pullrequestreview-536574338", "createdAt": "2020-11-23T15:20:50Z", "commit": {"oid": "67302f30f3e66fa97be63e48ccb095b7ddbf8015"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNToyMDo1MFrOH4SMsQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNToyMTozM1rOH4SOwg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODc4MDQ2NQ==", "bodyText": "@NotNull", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1282#discussion_r528780465", "createdAt": "2020-11-23T15:20:50Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-grpc/src/main/java/com/hedera/mirror/grpc/retriever/RetrieverProperties.java", "diffHunk": "@@ -45,4 +46,19 @@\n \n     @NotNull\n     private Duration timeout = Duration.ofSeconds(60L);\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67302f30f3e66fa97be63e48ccb095b7ddbf8015"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODc4MDk5NA==", "bodyText": "@NotNull", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1282#discussion_r528780994", "createdAt": "2020-11-23T15:21:33Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-grpc/src/main/java/com/hedera/mirror/grpc/retriever/RetrieverProperties.java", "diffHunk": "@@ -45,4 +46,19 @@\n \n     @NotNull\n     private Duration timeout = Duration.ofSeconds(60L);\n+\n+    private UnthrottledProperties unthrottled = new UnthrottledProperties();\n+\n+    @Data\n+    public static class UnthrottledProperties {\n+\n+        @Min(1000)\n+        private int maxPageSize = 5000;\n+\n+        @Min(4)\n+        private long maxPolls = 12;\n+\n+        @DurationMin(millis = 10)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67302f30f3e66fa97be63e48ccb095b7ddbf8015"}, "originalPosition": 24}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "13b4b71fe418c1d1c4173e63e98d3a41952df55f", "author": {"user": {"login": "steven-sheehy", "name": "Steven Sheehy"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/13b4b71fe418c1d1c4173e63e98d3a41952df55f", "committedDate": "2020-11-23T18:53:35Z", "message": "Fix property validation\n\nSigned-off-by: Steven Sheehy <steven.sheehy@hedera.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2NzU4MzY4", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1282#pullrequestreview-536758368", "createdAt": "2020-11-23T18:54:39Z", "commit": {"oid": "13b4b71fe418c1d1c4173e63e98d3a41952df55f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3527, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}