{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA0NjE1NTQ4", "number": 1135, "title": "HTS REST Performance Tests", "bodyText": "Signed-off-by: Ian Jungmann ian.jungmann@hedera.com\nDetailed description:\n\nAdd REST performance tests for /tokens, /tokens/{id}, and /tokens/{id}/balances\nAdd support for performance testing endpoints that require id values (e.g. /tokens/{id})\n\nWhich issue(s) this PR fixes:\nFixes #1108\nSpecial notes for your reviewer:\nChecklist\n\n Documentation added\n Tests updated", "createdAt": "2020-10-16T06:20:12Z", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1135", "merged": true, "mergeCommit": {"oid": "d9425abf200c24784a928b766f651944792147ad"}, "closed": true, "closedAt": "2020-10-26T15:52:41Z", "author": {"login": "ijungmann"}, "timelineItems": {"totalCount": 20, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdTAL3_AH2gAyNTA0NjE1NTQ4OmUyM2FmMzg4YmI0ZGM2Yjg2NDU4MWQyZTZlOTA4MjBmN2VlZDUzMTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdWWVC2AFqTUxNjkxNDA2Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e23af388bb4dc6b864581d2e6e90820f7eed5317", "author": {"user": {"login": "ijungmann", "name": "Ian Jungmann"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/e23af388bb4dc6b864581d2e6e90820f7eed5317", "committedDate": "2020-10-16T06:14:46Z", "message": "Add performance rest tests for /tokens\n\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c63741932547ea51bfde64fd7278bd80ec2f168", "author": {"user": {"login": "ijungmann", "name": "Ian Jungmann"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/8c63741932547ea51bfde64fd7278bd80ec2f168", "committedDate": "2020-10-20T06:54:23Z", "message": "Add very rough draft of token balances perf test\n\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8f463621f525035d1df1e5fcacf12c9be6c65862", "author": {"user": {"login": "ijungmann", "name": "Ian Jungmann"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/8f463621f525035d1df1e5fcacf12c9be6c65862", "committedDate": "2020-10-20T17:40:04Z", "message": "Merge branch 'master' into hts_rest_performance_tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b342749e071b968f4d308cf9050236e447577c5b", "author": {"user": {"login": "ijungmann", "name": "Ian Jungmann"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/b342749e071b968f4d308cf9050236e447577c5b", "committedDate": "2020-10-21T03:39:50Z", "message": "Add HTS Performance jmeter tests (#1134)\n    - Add test to publish batches of token transfers and later retrieve via REST\n    - Add test to publish and immediately retrieve token transfers via REST\n    - Add k8s manifests to run tests\n    - Update documentation with new tests\n\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f17cbbb8ec388f397444fefa7222706ed7c503b9", "author": {"user": {"login": "ijungmann", "name": "Ian Jungmann"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/f17cbbb8ec388f397444fefa7222706ed7c503b9", "committedDate": "2020-10-21T16:17:08Z", "message": "Merge branch 'master' into hts_rest_performance_tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5bca282cc320432f90d9da30423117962e6d6295", "author": {"user": {"login": "ijungmann", "name": "Ian Jungmann"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/5bca282cc320432f90d9da30423117962e6d6295", "committedDate": "2020-10-21T17:55:10Z", "message": "Refactor REST perf tests to be cleaner and less duplicate code, and add test for token info\n\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba342ab2196ad6637fef3fb6aad3c786b697f45f", "author": {"user": {"login": "ijungmann", "name": "Ian Jungmann"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/ba342ab2196ad6637fef3fb6aad3c786b697f45f", "committedDate": "2020-10-21T17:59:14Z", "message": "Merge branch 'master' into hts_rest_performance_tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "92f4631fb9a3e6989553e312e5a31c512cedeb84", "author": {"user": {"login": "ijungmann", "name": "Ian Jungmann"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/92f4631fb9a3e6989553e312e5a31c512cedeb84", "committedDate": "2020-10-21T19:47:59Z", "message": "Add documentation for new test format\n\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7decf4dd3c88ea44981b165cffb23f4ae0ddfa3f", "author": {"user": {"login": "ijungmann", "name": "Ian Jungmann"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/7decf4dd3c88ea44981b165cffb23f4ae0ddfa3f", "committedDate": "2020-10-21T19:48:07Z", "message": "Merge branch 'hts_rest_performance_tests' of github.com:hashgraph/hedera-mirror-node into hts_rest_performance_tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "25aaddfbd3e54ba72c222cccbf880507243dcad3", "author": {"user": {"login": "ijungmann", "name": "Ian Jungmann"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/25aaddfbd3e54ba72c222cccbf880507243dcad3", "committedDate": "2020-10-21T19:52:17Z", "message": "Reword readme\n\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE0OTczNTc2", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1135#pullrequestreview-514973576", "createdAt": "2020-10-22T17:44:24Z", "commit": {"oid": "25aaddfbd3e54ba72c222cccbf880507243dcad3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQxNzo0NDoyNFrOHmtBlQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQxNzo0NDoyNFrOHmtBlQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDM0NTYyMQ==", "bodyText": "Leftover log?", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1135#discussion_r510345621", "createdAt": "2020-10-22T17:44:24Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-rest/__performancetests__/generateQuerySets.js", "diffHunk": "@@ -151,6 +170,34 @@ const makeQuerySet = async (test) => {\n   };\n };\n \n+const makeIdsQuerySet = async (test) => {\n+  let idValues;\n+  if (test.idAxis === 'TOKENID') {\n+    idValues = await populateIdValues(test, sampleTokenIds, (sample) => {\n+      return '' + sample;\n+    });\n+  }\n+  console.log('Here there be ' + idValues);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "25aaddfbd3e54ba72c222cccbf880507243dcad3"}, "originalPosition": 78}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1MDgxMDc0", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1135#pullrequestreview-515081074", "createdAt": "2020-10-22T20:10:13Z", "commit": {"oid": "25aaddfbd3e54ba72c222cccbf880507243dcad3"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQyMDoxMDoxM1rOHmyBMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQyMDoxMzo0N1rOHmyJLQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDQyNzQ0Mw==", "bodyText": "I believe this should also cover the ACCOUNTID also right?\nYou could add that case", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1135#discussion_r510427443", "createdAt": "2020-10-22T20:10:13Z", "author": {"login": "Nana-EC"}, "path": "hedera-mirror-rest/__performancetests__/generateQuerySets.js", "diffHunk": "@@ -151,6 +170,34 @@ const makeQuerySet = async (test) => {\n   };\n };\n \n+const makeIdsQuerySet = async (test) => {\n+  let idValues;\n+  if (test.idAxis === 'TOKENID') {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "25aaddfbd3e54ba72c222cccbf880507243dcad3"}, "originalPosition": 73}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDQyNzk2Mw==", "bodyText": "With the added logic you can also support e.g.\n- name: 'account transactions - accountid point lookup'\n     query: '/accounts/%d'\n\t idAxis: ACCOUNTID\n     count: 100", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1135#discussion_r510427963", "createdAt": "2020-10-22T20:11:04Z", "author": {"login": "Nana-EC"}, "path": "hedera-mirror-rest/__performancetests__/tests.yml", "diffHunk": "@@ -72,3 +72,23 @@ tests:\n     filterAxis: BALANCE\n     count: 100\n     rangeTinyHbars: 1000_00_000_000 # 1000\u210f\n+    # Tests for /tokens\n+  - name: 'tokens - tokenid point lookup'\n+    query: '/tokens'\n+    filterAxis: TOKENID\n+    count: 100\n+  - name: 'tokens - token ids range (100)'\n+    query: '/tokens'\n+    filterAxis: TOKENID\n+    count: 5\n+    rangeNumTokens: 100\n+    # Tests for /tokens/{id}\n+  - name: 'token info - tokenid point lookup'\n+    query: '/tokens/%d'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "25aaddfbd3e54ba72c222cccbf880507243dcad3"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDQyOTQ4NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            -   `idAxis` is the primary axis to filter results based on ids (e.g. `/tokens/{id}`).  It can only have one value.\n          \n          \n            \n            -   `idAxis` is the primary axis to filter results based on ids in the query path (e.g. `/tokens/{id}`).  It can only have one value.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1135#discussion_r510429485", "createdAt": "2020-10-22T20:13:47Z", "author": {"login": "Nana-EC"}, "path": "docs/testing.md", "diffHunk": "@@ -47,16 +48,20 @@ Where\n -   `name` is user defined name for the test\n -   `query` is any arbitrary REST query. \\\n     It should NOT include `http://host:port/api/v1` as prefix. It should also NOT include param set by `filterAxis`.\n--   `filterAxis` is primary axis to filter results. It can have one of the three values:\n+-   `filterAxis` is primary axis to filter results based on query params. It can have one of the four values.  Either it or `idAxis` are required:\n     -   `ACCOUNTID`: Sets `account.id` param. Values for this param are sampled from `entity_num` column in `t_entities`.\n     -   `CONSENSUS_TIMESTAMP`: Sets `timestamp` param. Values for this param are sampled from `consensus_ns` column in\n         `transaction`.\n     -   `BALANCE`: Sets `account.balance` param. Values for this param are sampled from `balance` column in\n         `account_balance`.\n+    -   `TOKENID`: Sets `token.id` param. Values for this param are sampled from `token_id` column in `token`.\n+-   `idAxis` is the primary axis to filter results based on ids (e.g. `/tokens/{id}`).  It can only have one value.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "25aaddfbd3e54ba72c222cccbf880507243dcad3"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0a81fce16753a1623f48f4277f5fad822eee08a8", "author": {"user": {"login": "ijungmann", "name": "Ian Jungmann"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/0a81fce16753a1623f48f4277f5fad822eee08a8", "committedDate": "2020-10-23T20:53:32Z", "message": "Add perf test for account transaction, and remove temp logging\n\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "262b04a8b20d97639164d84b9724419f8540cc19", "author": {"user": {"login": "ijungmann", "name": "Ian Jungmann"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/262b04a8b20d97639164d84b9724419f8540cc19", "committedDate": "2020-10-23T20:55:00Z", "message": "Update testing documentation\n\nCo-authored-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "731961b346d62a0725b398f3b5ddc6c73c4122b9", "author": {"user": {"login": "ijungmann", "name": "Ian Jungmann"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/731961b346d62a0725b398f3b5ddc6c73c4122b9", "committedDate": "2020-10-23T20:56:51Z", "message": "Add new idAxis to testing document\n\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d08d0ad282c8c6851726861e692495c3ec0a1119", "author": {"user": {"login": "ijungmann", "name": "Ian Jungmann"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/d08d0ad282c8c6851726861e692495c3ec0a1119", "committedDate": "2020-10-23T20:57:49Z", "message": "Add new idAxis to testing document\n\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "00e46bac158bd6f9f5c11f1cbe7d0cdf1e09b293", "author": {"user": {"login": "ijungmann", "name": "Ian Jungmann"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/00e46bac158bd6f9f5c11f1cbe7d0cdf1e09b293", "committedDate": "2020-10-26T14:57:27Z", "message": "Correct error missing else in if, else if statement\n\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "508ea9d35c95acb0539d5d8f3b7b2d12bd4b9e76", "author": {"user": {"login": "ijungmann", "name": "Ian Jungmann"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/508ea9d35c95acb0539d5d8f3b7b2d12bd4b9e76", "committedDate": "2020-10-23T20:59:41Z", "message": "Correct error missing else in if, else if statement\n\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>"}, "afterCommit": {"oid": "59bced4e9717a779ad33d0e38bd21f6733753b03", "author": {"user": {"login": "ijungmann", "name": "Ian Jungmann"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/59bced4e9717a779ad33d0e38bd21f6733753b03", "committedDate": "2020-10-26T14:57:27Z", "message": "Correct error missing else in if, else if statement\n\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "59bced4e9717a779ad33d0e38bd21f6733753b03", "author": {"user": {"login": "ijungmann", "name": "Ian Jungmann"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/59bced4e9717a779ad33d0e38bd21f6733753b03", "committedDate": "2020-10-26T14:57:27Z", "message": "Correct error missing else in if, else if statement\n\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>"}, "afterCommit": {"oid": "00e46bac158bd6f9f5c11f1cbe7d0cdf1e09b293", "author": {"user": {"login": "ijungmann", "name": "Ian Jungmann"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/00e46bac158bd6f9f5c11f1cbe7d0cdf1e09b293", "committedDate": "2020-10-26T14:57:27Z", "message": "Correct error missing else in if, else if statement\n\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE2OTE0MDYy", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1135#pullrequestreview-516914062", "createdAt": "2020-10-26T15:44:28Z", "commit": {"oid": "00e46bac158bd6f9f5c11f1cbe7d0cdf1e09b293"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3606, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}