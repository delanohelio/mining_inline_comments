{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc3NDIyMjc5", "number": 545, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQwNDozOToxNlrODhw0tQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQwNDo0MTowNFrODhw1eQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM2NzI5NTI1OnYy", "diffSide": "RIGHT", "path": "hedera-mirror-grpc/src/main/java/com/hedera/mirror/grpc/config/GrpcConfiguration.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQwNDozOToxNlrOFsreUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMlQwMDoyOTo0OFrOFtINuQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjM5MzkzNw==", "bodyText": "maxInboundMessageSize doesn't seem to be netty property, it's looks like grpc property?", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/545#discussion_r382393937", "createdAt": "2020-02-21T04:39:16Z", "author": {"login": "apeksharma"}, "path": "hedera-mirror-grpc/src/main/java/com/hedera/mirror/grpc/config/GrpcConfiguration.java", "diffHunk": "@@ -53,7 +53,11 @@ CompositeHealthContributor grpcServices(GrpcServiceDiscoverer grpcServiceDiscove\n \n     @Bean\n     public GrpcServerConfigurer grpcServerConfigurer(GrpcProperties grpcProperties) {\n+        NettyProperties nettyProperties = grpcProperties.getNetty();\n         return serverBuilder -> ((NettyServerBuilder) serverBuilder)\n-                .maxConcurrentCallsPerConnection(grpcProperties.getNetty().getMaxConcurrentCallsPerConnection());\n+                .flowControlWindow(nettyProperties.getFlowControlWindow())\n+                .maxConcurrentCallsPerConnection(nettyProperties.getMaxConcurrentCallsPerConnection())\n+                .maxInboundMessageSize(nettyProperties.getMaxMessageSize())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6789db30f3b6f16e28abcc1ae49db8d74c496d93"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjg2NDgyNQ==", "bodyText": "Addressed this comment in a new PR", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/545#discussion_r382864825", "createdAt": "2020-02-22T00:29:48Z", "author": {"login": "Nana-EC"}, "path": "hedera-mirror-grpc/src/main/java/com/hedera/mirror/grpc/config/GrpcConfiguration.java", "diffHunk": "@@ -53,7 +53,11 @@ CompositeHealthContributor grpcServices(GrpcServiceDiscoverer grpcServiceDiscove\n \n     @Bean\n     public GrpcServerConfigurer grpcServerConfigurer(GrpcProperties grpcProperties) {\n+        NettyProperties nettyProperties = grpcProperties.getNetty();\n         return serverBuilder -> ((NettyServerBuilder) serverBuilder)\n-                .maxConcurrentCallsPerConnection(grpcProperties.getNetty().getMaxConcurrentCallsPerConnection());\n+                .flowControlWindow(nettyProperties.getFlowControlWindow())\n+                .maxConcurrentCallsPerConnection(nettyProperties.getMaxConcurrentCallsPerConnection())\n+                .maxInboundMessageSize(nettyProperties.getMaxMessageSize())", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjM5MzkzNw=="}, "originalCommit": {"oid": "6789db30f3b6f16e28abcc1ae49db8d74c496d93"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM2NzI5NzIxOnYy", "diffSide": "RIGHT", "path": "hedera-mirror-grpc/src/main/java/com/hedera/mirror/grpc/config/NettyProperties.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQwNDo0MTowNFrOFsrfnw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMlQwMDoyOToyM1rOFtINdw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjM5NDI3MQ==", "bodyText": "let's name these exactly as grpc's/netty's internal property names. Will save us from having to keep extra mapping in mind when debugging things.\nI understand setting min for these two 'size' configs is weird since we'll never set them to low values like 10 or even 100. But a value like 8 seems mysterious. Why 8, why not 9 or 7? has to do something with int/long size?\nI'd suggest setting the Mins values to 0 to avoid attracting unneeded curiousness.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/545#discussion_r382394271", "createdAt": "2020-02-21T04:41:04Z", "author": {"login": "apeksharma"}, "path": "hedera-mirror-grpc/src/main/java/com/hedera/mirror/grpc/config/NettyProperties.java", "diffHunk": "@@ -27,6 +27,15 @@\n @Data\n @Validated\n public class NettyProperties {\n+    @Min(1024) // 64 kb\n+    private int flowControlWindow = 64 * 1024;\n+\n     @Min(1)\n     private int maxConcurrentCallsPerConnection = 5;\n+\n+    @Min(8) // 6 kb\n+    private int maxMessageSize = 6 * 1024;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6789db30f3b6f16e28abcc1ae49db8d74c496d93"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjg2NDczMQ==", "bodyText": "8b was what I was seeing for our proto query message size, so figured it was a good start", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/545#discussion_r382864731", "createdAt": "2020-02-22T00:29:10Z", "author": {"login": "Nana-EC"}, "path": "hedera-mirror-grpc/src/main/java/com/hedera/mirror/grpc/config/NettyProperties.java", "diffHunk": "@@ -27,6 +27,15 @@\n @Data\n @Validated\n public class NettyProperties {\n+    @Min(1024) // 64 kb\n+    private int flowControlWindow = 64 * 1024;\n+\n     @Min(1)\n     private int maxConcurrentCallsPerConnection = 5;\n+\n+    @Min(8) // 6 kb\n+    private int maxMessageSize = 6 * 1024;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjM5NDI3MQ=="}, "originalCommit": {"oid": "6789db30f3b6f16e28abcc1ae49db8d74c496d93"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjg2NDc1OQ==", "bodyText": "Addressed this in a new PR", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/545#discussion_r382864759", "createdAt": "2020-02-22T00:29:23Z", "author": {"login": "Nana-EC"}, "path": "hedera-mirror-grpc/src/main/java/com/hedera/mirror/grpc/config/NettyProperties.java", "diffHunk": "@@ -27,6 +27,15 @@\n @Data\n @Validated\n public class NettyProperties {\n+    @Min(1024) // 64 kb\n+    private int flowControlWindow = 64 * 1024;\n+\n     @Min(1)\n     private int maxConcurrentCallsPerConnection = 5;\n+\n+    @Min(8) // 6 kb\n+    private int maxMessageSize = 6 * 1024;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjM5NDI3MQ=="}, "originalCommit": {"oid": "6789db30f3b6f16e28abcc1ae49db8d74c496d93"}, "originalPosition": 11}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1157, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}