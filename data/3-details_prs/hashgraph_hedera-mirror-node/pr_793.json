{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI0ODY5MzM5", "number": 793, "title": "GCP Requester Pays - add project id config", "bodyText": "Detailed description:\n\nRemove test specific configuration in CommonDownloaderProperties\nRemove hard-coded testing value in prod code. Was used for local testing with mock S3.\nAdditionally, endpointOverride config makes it possible to run mirrornode with any S3\ncompatible cloud storage system, not just S3 and GCS. It can be azure, wasabi, etc\nTested with mainnet bucket and my personal GCP account's keys.\n\nSigned-off-by: Apekshit Sharma apekshit.sharma@hedera.com\nWhich issue(s) this PR fixes:\nFixes #792\nSpecial notes for your reviewer:\nChecklist\n\n Documentation added\n Tests updated", "createdAt": "2020-05-29T03:53:48Z", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/793", "merged": true, "mergeCommit": {"oid": "474ab1f9742246fc74ef10814338d7ad2ca817a7"}, "closed": true, "closedAt": "2020-05-29T18:24:25Z", "author": {"login": "apeksharma"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcl6NHbAH2gAyNDI0ODY5MzM5OjQwMmZmOTRhODRlYzczODE5NTI5ZWJiOTViNmRlN2U4MWM3Njc5YzM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcmGsKGAFqTQyMTE4MTYyOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "402ff94a84ec73819529ebb95b6de7e81c7679c3", "author": {"user": {"login": "apeksharma", "name": "Apekshit Sharma"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/402ff94a84ec73819529ebb95b6de7e81c7679c3", "committedDate": "2020-05-29T03:50:06Z", "message": "GCP Requester Pays - add project id config\n\n- Remove test specific configuration in CommonDownloaderProperties\n- Remove hard-coded testing value in prod code. Was used for local testing with mock S3.\n- Additionally, `endpointOverride` config makes it possible to run mirrornode with any S3\n  compatible cloud storage system, not just S3 and GCS. It can be azure, wasabi, etc\n- Tested with mainnet bucket and my personal GCP account's keys.\n\nSigned-off-by: Apekshit Sharma <apekshit.sharma@hedera.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxMDQxMjgw", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/793#pullrequestreview-421041280", "createdAt": "2020-05-29T15:06:50Z", "commit": {"oid": "402ff94a84ec73819529ebb95b6de7e81c7679c3"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQxNTowNjo1MFrOGcgvdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQxNTowNjo1MFrOGcgvdg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjU0OTc1MA==", "bodyText": "Need to remove LOCAL", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/793#discussion_r432549750", "createdAt": "2020-05-29T15:06:50Z", "author": {"login": "steven-sheehy"}, "path": "docs/configuration.md", "diffHunk": "@@ -39,6 +39,8 @@ value, it is recommended to only populate overridden properties in the custom `a\n | `hedera.mirror.importer.downloader.balance.threads`                  | 13                      | The number of threads to search for new files to download                                      |\n | `hedera.mirror.importer.downloader.bucketName`                       | \"hedera-demo-streams\"   | The cloud storage bucket name to download streamed files                                       |\n | `hedera.mirror.importer.downloader.cloudProvider`                    | S3                      | The cloud provider to download files from. Either `S3`, `GCP` or `LOCAL`                       |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "402ff94a84ec73819529ebb95b6de7e81c7679c3"}, "originalPosition": 3}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxMTgxNjI4", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/793#pullrequestreview-421181628", "createdAt": "2020-05-29T18:16:37Z", "commit": {"oid": "402ff94a84ec73819529ebb95b6de7e81c7679c3"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQxODoxNjozN1rOGcnSwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQxODoxNjozN1rOGcnSwA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjY1NzA4OA==", "bodyText": "q: should the region be parametized, with the above as default of course.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/793#discussion_r432657088", "createdAt": "2020-05-29T18:16:37Z", "author": {"login": "Nana-EC"}, "path": "hedera-mirror-importer/src/main/java/com/hedera/mirror/importer/config/MirrorImporterConfiguration.java", "diffHunk": "@@ -67,47 +71,63 @@ LeaderAspect leaderAspect() {\n     }\n \n     @Bean\n-    public S3AsyncClient s3AsyncClient(ExecutionInterceptor metricsExecutionInterceptor) {\n+    @ConditionalOnProperty(prefix = \"hedera.mirror.importer.downloader\", name = \"cloudProvider\", havingValue = \"GCP\")\n+    public S3AsyncClient gcpCloudStorageClient() {\n+        log.info(\"Configured to download from GCP with bucket name '{}'\", downloaderProperties.getBucketName());\n+        // Any valid region for aws client. Ignored by GCP.\n+        S3AsyncClientBuilder clientBuilder = asyncClientBuilder(\"us-east-1\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "402ff94a84ec73819529ebb95b6de7e81c7679c3"}, "originalPosition": 28}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3167, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}