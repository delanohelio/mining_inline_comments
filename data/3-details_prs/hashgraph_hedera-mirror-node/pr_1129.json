{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAzMTgyMjc5", "number": 1129, "title": "Rosetta: Unit tests for domain types and tools", "bodyText": "Detailed description:\n\nAdd unit tests for all of the domain types: account.go, address_book_entry.go, amount.go, block.go, operation.go, transaction.go\nAdd unit tests for the tools package\n\nWhich issue(s) this PR fixes:\nRelated to LimeChain #103\nSpecial notes for your reviewer:\nChecklist\n\n Documentation added\n Tests updated", "createdAt": "2020-10-14T07:48:56Z", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1129", "merged": true, "mergeCommit": {"oid": "27debae35a882bb86d9ffce9ac4e48cc51df4161"}, "closed": true, "closedAt": "2020-10-15T15:49:25Z", "author": {"login": "Daniel-K-Ivanov"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdSYYphgH2gAyNTAzMTgyMjc5OmJhMjcyN2I5OTQ1Njk5Y2VlNjVjMzI1NzU5MzIzZjc4ZWRkMjVmYTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdSzeCDAFqTUwOTUwMzI3Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ba2727b9945699cee65c325759323f78edd25fa2", "author": {"user": {"login": "Daniel-K-Ivanov", "name": "Daniel Ivanov"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/ba2727b9945699cee65c325759323f78edd25fa2", "committedDate": "2020-10-14T07:52:31Z", "message": "Merge Util Unit tests into new branch (#148)\n\nSigned-off-by: Georgi Yazovaliyski <georgi.yazovaliiski@gmail.com>\n\nSigned-off-by: Daniel Ivanov <daniel.k.ivanov95@gmail.com>\n\nSigned-off-by: failfmi <oscurocalma@gmail.com>\nSigned-off-by: Daniel <Daniel.K.Ivanov95@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "19bb697371613ce8edfa0d8ec07e424bdf279eb9", "author": {"user": {"login": "Daniel-K-Ivanov", "name": "Daniel Ivanov"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/19bb697371613ce8edfa0d8ec07e424bdf279eb9", "committedDate": "2020-10-14T07:45:10Z", "message": "Merge Util Unit tests into new branch (#148)\n\nSigned-off-by: Georgi Yazovaliyski <georgi.yazovaliiski@gmail.com>\r\n\r\nSigned-off-by: Daniel Ivanov <daniel.k.ivanov95@gmail.com>\r\n\r\nSigned-off-by: failfmi <oscurocalma@gmail.com>"}, "afterCommit": {"oid": "ba2727b9945699cee65c325759323f78edd25fa2", "author": {"user": {"login": "Daniel-K-Ivanov", "name": "Daniel Ivanov"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/ba2727b9945699cee65c325759323f78edd25fa2", "committedDate": "2020-10-14T07:52:31Z", "message": "Merge Util Unit tests into new branch (#148)\n\nSigned-off-by: Georgi Yazovaliyski <georgi.yazovaliiski@gmail.com>\n\nSigned-off-by: Daniel Ivanov <daniel.k.ivanov95@gmail.com>\n\nSigned-off-by: failfmi <oscurocalma@gmail.com>\nSigned-off-by: Daniel <Daniel.K.Ivanov95@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4Njk2OTE4", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1129#pullrequestreview-508696918", "createdAt": "2020-10-14T20:18:45Z", "commit": {"oid": "ba2727b9945699cee65c325759323f78edd25fa2"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQyMDoxODo0NVrOHhjjxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQyMTowMDowMlrOHhk3LA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDk0NzY1Mw==", "bodyText": "should assert err is nil", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1129#discussion_r504947653", "createdAt": "2020-10-14T20:18:45Z", "author": {"login": "xin-hedera"}, "path": "hedera-mirror-rosetta/app/domain/types/account_test.go", "diffHunk": "@@ -0,0 +1,171 @@\n+/*-\n+ * \u200c\n+ * Hedera Mirror Node\n+ *\n+ * Copyright (C) 2019 - 2020 Hedera Hashgraph, LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ * \u200d\n+ */\n+\n+package types\n+\n+import (\n+\t\"github.com/coinbase/rosetta-sdk-go/types\"\n+\tentityid \"github.com/hashgraph/hedera-mirror-node/hedera-mirror-rosetta/app/domain/services/encoding\"\n+\t\"github.com/hashgraph/hedera-mirror-node/hedera-mirror-rosetta/app/errors\"\n+\t\"github.com/stretchr/testify/assert\"\n+\t\"testing\"\n+)\n+\n+func exampleAccount() *Account {\n+\treturn &Account{\n+\t\tentityid.EntityId{\n+\t\t\tShardNum:  0,\n+\t\t\tRealmNum:  0,\n+\t\t\tEntityNum: 0,\n+\t\t},\n+\t}\n+}\n+\n+func exampleAccountWith(shard, realm, entity int64) *Account {\n+\treturn &Account{\n+\t\tentityid.EntityId{\n+\t\t\tShardNum:  shard,\n+\t\t\tRealmNum:  realm,\n+\t\t\tEntityNum: entity,\n+\t\t},\n+\t}\n+}\n+\n+func expectedAccount() *types.AccountIdentifier {\n+\treturn &types.AccountIdentifier{\n+\t\tAddress:    \"0.0.0\",\n+\t\tSubAccount: nil,\n+\t\tMetadata:   nil,\n+\t}\n+}\n+\n+func expectedAccountWith(shard int64, realm int64, number int64) *Account {\n+\treturn &Account{\n+\t\tentityid.EntityId{\n+\t\t\tShardNum:  shard,\n+\t\t\tRealmNum:  realm,\n+\t\t\tEntityNum: number,\n+\t\t},\n+\t}\n+}\n+\n+func TestToRosettaAccount(t *testing.T) {\n+\t// when:\n+\trosettaAccount := exampleAccount().ToRosetta()\n+\n+\t// then:\n+\tassert.Equal(t, expectedAccount(), rosettaAccount)\n+}\n+\n+func TestNewAccountFromEncodedID(t *testing.T) {\n+\t// given:\n+\tvar testData = []struct {\n+\t\tinput, shard, realm, number int64\n+\t}{\n+\t\t{0, 0, 0, 0},\n+\t\t{10, 0, 0, 10},\n+\t\t{4294967295, 0, 0, 4294967295},\n+\t\t{2814792716779530, 10, 10, 10},\n+\t\t{9223372036854775807, 32767, 65535, 4294967295},\n+\t\t{9223090561878065152, 32767, 0, 0},\n+\t}\n+\n+\tfor _, tt := range testData {\n+\t\t// when:\n+\t\tres, _ := NewAccountFromEncodedID(tt.input)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba2727b9945699cee65c325759323f78edd25fa2"}, "originalPosition": 92}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDk0ODcwMQ==", "bodyText": "these are all negative test data, should test data which can be successfully encoded.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1129#discussion_r504948701", "createdAt": "2020-10-14T20:20:40Z", "author": {"login": "xin-hedera"}, "path": "hedera-mirror-rosetta/app/domain/types/account_test.go", "diffHunk": "@@ -0,0 +1,171 @@\n+/*-\n+ * \u200c\n+ * Hedera Mirror Node\n+ *\n+ * Copyright (C) 2019 - 2020 Hedera Hashgraph, LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ * \u200d\n+ */\n+\n+package types\n+\n+import (\n+\t\"github.com/coinbase/rosetta-sdk-go/types\"\n+\tentityid \"github.com/hashgraph/hedera-mirror-node/hedera-mirror-rosetta/app/domain/services/encoding\"\n+\t\"github.com/hashgraph/hedera-mirror-node/hedera-mirror-rosetta/app/errors\"\n+\t\"github.com/stretchr/testify/assert\"\n+\t\"testing\"\n+)\n+\n+func exampleAccount() *Account {\n+\treturn &Account{\n+\t\tentityid.EntityId{\n+\t\t\tShardNum:  0,\n+\t\t\tRealmNum:  0,\n+\t\t\tEntityNum: 0,\n+\t\t},\n+\t}\n+}\n+\n+func exampleAccountWith(shard, realm, entity int64) *Account {\n+\treturn &Account{\n+\t\tentityid.EntityId{\n+\t\t\tShardNum:  shard,\n+\t\t\tRealmNum:  realm,\n+\t\t\tEntityNum: entity,\n+\t\t},\n+\t}\n+}\n+\n+func expectedAccount() *types.AccountIdentifier {\n+\treturn &types.AccountIdentifier{\n+\t\tAddress:    \"0.0.0\",\n+\t\tSubAccount: nil,\n+\t\tMetadata:   nil,\n+\t}\n+}\n+\n+func expectedAccountWith(shard int64, realm int64, number int64) *Account {\n+\treturn &Account{\n+\t\tentityid.EntityId{\n+\t\t\tShardNum:  shard,\n+\t\t\tRealmNum:  realm,\n+\t\t\tEntityNum: number,\n+\t\t},\n+\t}\n+}\n+\n+func TestToRosettaAccount(t *testing.T) {\n+\t// when:\n+\trosettaAccount := exampleAccount().ToRosetta()\n+\n+\t// then:\n+\tassert.Equal(t, expectedAccount(), rosettaAccount)\n+}\n+\n+func TestNewAccountFromEncodedID(t *testing.T) {\n+\t// given:\n+\tvar testData = []struct {\n+\t\tinput, shard, realm, number int64\n+\t}{\n+\t\t{0, 0, 0, 0},\n+\t\t{10, 0, 0, 10},\n+\t\t{4294967295, 0, 0, 4294967295},\n+\t\t{2814792716779530, 10, 10, 10},\n+\t\t{9223372036854775807, 32767, 65535, 4294967295},\n+\t\t{9223090561878065152, 32767, 0, 0},\n+\t}\n+\n+\tfor _, tt := range testData {\n+\t\t// when:\n+\t\tres, _ := NewAccountFromEncodedID(tt.input)\n+\n+\t\t// then:\n+\t\tassert.Equal(t, expectedAccountWith(tt.shard, tt.realm, tt.number), res)\n+\t}\n+}\n+\n+func TestComputeEncodedID(t *testing.T) {\n+\tvar testData = []struct {\n+\t\tshard, realm, number int64\n+\t}{\n+\t\t{-1, 123, 246},\n+\t\t{123, -123, 246},\n+\t\t{123, 23, -246},", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba2727b9945699cee65c325759323f78edd25fa2"}, "originalPosition": 105}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDk1MjQ4NQ==", "bodyText": "nit: better to move this test func right after TestNewAccountFromEncodedID, or group the test cases for the same function like:\nfunc TestNewAccountFromEncodedID(t *testing.T) {\n  t.Run(\"first test case\", func(t *testing.T) {\n    ...\n  });\n\n  t.Run(\"second test case\", func(t *testing.T) {\n    ...\n  });\n}", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1129#discussion_r504952485", "createdAt": "2020-10-14T20:27:50Z", "author": {"login": "xin-hedera"}, "path": "hedera-mirror-rosetta/app/domain/types/account_test.go", "diffHunk": "@@ -0,0 +1,171 @@\n+/*-\n+ * \u200c\n+ * Hedera Mirror Node\n+ *\n+ * Copyright (C) 2019 - 2020 Hedera Hashgraph, LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ * \u200d\n+ */\n+\n+package types\n+\n+import (\n+\t\"github.com/coinbase/rosetta-sdk-go/types\"\n+\tentityid \"github.com/hashgraph/hedera-mirror-node/hedera-mirror-rosetta/app/domain/services/encoding\"\n+\t\"github.com/hashgraph/hedera-mirror-node/hedera-mirror-rosetta/app/errors\"\n+\t\"github.com/stretchr/testify/assert\"\n+\t\"testing\"\n+)\n+\n+func exampleAccount() *Account {\n+\treturn &Account{\n+\t\tentityid.EntityId{\n+\t\t\tShardNum:  0,\n+\t\t\tRealmNum:  0,\n+\t\t\tEntityNum: 0,\n+\t\t},\n+\t}\n+}\n+\n+func exampleAccountWith(shard, realm, entity int64) *Account {\n+\treturn &Account{\n+\t\tentityid.EntityId{\n+\t\t\tShardNum:  shard,\n+\t\t\tRealmNum:  realm,\n+\t\t\tEntityNum: entity,\n+\t\t},\n+\t}\n+}\n+\n+func expectedAccount() *types.AccountIdentifier {\n+\treturn &types.AccountIdentifier{\n+\t\tAddress:    \"0.0.0\",\n+\t\tSubAccount: nil,\n+\t\tMetadata:   nil,\n+\t}\n+}\n+\n+func expectedAccountWith(shard int64, realm int64, number int64) *Account {\n+\treturn &Account{\n+\t\tentityid.EntityId{\n+\t\t\tShardNum:  shard,\n+\t\t\tRealmNum:  realm,\n+\t\t\tEntityNum: number,\n+\t\t},\n+\t}\n+}\n+\n+func TestToRosettaAccount(t *testing.T) {\n+\t// when:\n+\trosettaAccount := exampleAccount().ToRosetta()\n+\n+\t// then:\n+\tassert.Equal(t, expectedAccount(), rosettaAccount)\n+}\n+\n+func TestNewAccountFromEncodedID(t *testing.T) {\n+\t// given:\n+\tvar testData = []struct {\n+\t\tinput, shard, realm, number int64\n+\t}{\n+\t\t{0, 0, 0, 0},\n+\t\t{10, 0, 0, 10},\n+\t\t{4294967295, 0, 0, 4294967295},\n+\t\t{2814792716779530, 10, 10, 10},\n+\t\t{9223372036854775807, 32767, 65535, 4294967295},\n+\t\t{9223090561878065152, 32767, 0, 0},\n+\t}\n+\n+\tfor _, tt := range testData {\n+\t\t// when:\n+\t\tres, _ := NewAccountFromEncodedID(tt.input)\n+\n+\t\t// then:\n+\t\tassert.Equal(t, expectedAccountWith(tt.shard, tt.realm, tt.number), res)\n+\t}\n+}\n+\n+func TestComputeEncodedID(t *testing.T) {\n+\tvar testData = []struct {\n+\t\tshard, realm, number int64\n+\t}{\n+\t\t{-1, 123, 246},\n+\t\t{123, -123, 246},\n+\t\t{123, 23, -246},\n+\t}\n+\n+\tfor _, tt := range testData {\n+\t\tres, e := exampleAccountWith(tt.shard, tt.realm, tt.number).ComputeEncodedID()\n+\t\tassert.Zero(t, res)\n+\t\tassert.NotNil(t, e)\n+\t}\n+}\n+\n+func TestNewAccountFromEncodedIDThrows(t *testing.T) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba2727b9945699cee65c325759323f78edd25fa2"}, "originalPosition": 115}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDk1MjY2OQ==", "bodyText": "should assert err is nil", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1129#discussion_r504952669", "createdAt": "2020-10-14T20:28:13Z", "author": {"login": "xin-hedera"}, "path": "hedera-mirror-rosetta/app/domain/types/account_test.go", "diffHunk": "@@ -0,0 +1,171 @@\n+/*-\n+ * \u200c\n+ * Hedera Mirror Node\n+ *\n+ * Copyright (C) 2019 - 2020 Hedera Hashgraph, LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ * \u200d\n+ */\n+\n+package types\n+\n+import (\n+\t\"github.com/coinbase/rosetta-sdk-go/types\"\n+\tentityid \"github.com/hashgraph/hedera-mirror-node/hedera-mirror-rosetta/app/domain/services/encoding\"\n+\t\"github.com/hashgraph/hedera-mirror-node/hedera-mirror-rosetta/app/errors\"\n+\t\"github.com/stretchr/testify/assert\"\n+\t\"testing\"\n+)\n+\n+func exampleAccount() *Account {\n+\treturn &Account{\n+\t\tentityid.EntityId{\n+\t\t\tShardNum:  0,\n+\t\t\tRealmNum:  0,\n+\t\t\tEntityNum: 0,\n+\t\t},\n+\t}\n+}\n+\n+func exampleAccountWith(shard, realm, entity int64) *Account {\n+\treturn &Account{\n+\t\tentityid.EntityId{\n+\t\t\tShardNum:  shard,\n+\t\t\tRealmNum:  realm,\n+\t\t\tEntityNum: entity,\n+\t\t},\n+\t}\n+}\n+\n+func expectedAccount() *types.AccountIdentifier {\n+\treturn &types.AccountIdentifier{\n+\t\tAddress:    \"0.0.0\",\n+\t\tSubAccount: nil,\n+\t\tMetadata:   nil,\n+\t}\n+}\n+\n+func expectedAccountWith(shard int64, realm int64, number int64) *Account {\n+\treturn &Account{\n+\t\tentityid.EntityId{\n+\t\t\tShardNum:  shard,\n+\t\t\tRealmNum:  realm,\n+\t\t\tEntityNum: number,\n+\t\t},\n+\t}\n+}\n+\n+func TestToRosettaAccount(t *testing.T) {\n+\t// when:\n+\trosettaAccount := exampleAccount().ToRosetta()\n+\n+\t// then:\n+\tassert.Equal(t, expectedAccount(), rosettaAccount)\n+}\n+\n+func TestNewAccountFromEncodedID(t *testing.T) {\n+\t// given:\n+\tvar testData = []struct {\n+\t\tinput, shard, realm, number int64\n+\t}{\n+\t\t{0, 0, 0, 0},\n+\t\t{10, 0, 0, 10},\n+\t\t{4294967295, 0, 0, 4294967295},\n+\t\t{2814792716779530, 10, 10, 10},\n+\t\t{9223372036854775807, 32767, 65535, 4294967295},\n+\t\t{9223090561878065152, 32767, 0, 0},\n+\t}\n+\n+\tfor _, tt := range testData {\n+\t\t// when:\n+\t\tres, _ := NewAccountFromEncodedID(tt.input)\n+\n+\t\t// then:\n+\t\tassert.Equal(t, expectedAccountWith(tt.shard, tt.realm, tt.number), res)\n+\t}\n+}\n+\n+func TestComputeEncodedID(t *testing.T) {\n+\tvar testData = []struct {\n+\t\tshard, realm, number int64\n+\t}{\n+\t\t{-1, 123, 246},\n+\t\t{123, -123, 246},\n+\t\t{123, 23, -246},\n+\t}\n+\n+\tfor _, tt := range testData {\n+\t\tres, e := exampleAccountWith(tt.shard, tt.realm, tt.number).ComputeEncodedID()\n+\t\tassert.Zero(t, res)\n+\t\tassert.NotNil(t, e)\n+\t}\n+}\n+\n+func TestNewAccountFromEncodedIDThrows(t *testing.T) {\n+\t// given:\n+\ttestData := int64(-1)\n+\n+\t// when:\n+\tres, err := NewAccountFromEncodedID(testData)\n+\n+\t// then:\n+\tassert.Nil(t, res)\n+\tassert.NotNil(t, err)\n+}\n+\n+func TestAccountFromString(t *testing.T) {\n+\t// given:\n+\tvar testData = []struct {\n+\t\tinput                string\n+\t\tshard, realm, number int64\n+\t}{\n+\t\t{\"0.0.0\", 0, 0, 0},\n+\t\t{\"0.0.10\", 0, 0, 10},\n+\t\t{\"0.0.4294967295\", 0, 0, 4294967295},\n+\t\t{\"10.10.10\", 10, 10, 10},\n+\t\t{\"32767.65535.4294967295\", 32767, 65535, 4294967295},\n+\t\t{\"32767.0.0\", 32767, 0, 0},\n+\t}\n+\n+\tfor _, tt := range testData {\n+\t\t// when:\n+\t\tres, _ := AccountFromString(tt.input)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba2727b9945699cee65c325759323f78edd25fa2"}, "originalPosition": 143}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDk1NTk4OA==", "bodyText": "should add a test case for Account.String()", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1129#discussion_r504955988", "createdAt": "2020-10-14T20:34:39Z", "author": {"login": "xin-hedera"}, "path": "hedera-mirror-rosetta/app/domain/types/account_test.go", "diffHunk": "@@ -0,0 +1,171 @@\n+/*-\n+ * \u200c\n+ * Hedera Mirror Node\n+ *\n+ * Copyright (C) 2019 - 2020 Hedera Hashgraph, LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ * \u200d\n+ */\n+\n+package types\n+\n+import (\n+\t\"github.com/coinbase/rosetta-sdk-go/types\"\n+\tentityid \"github.com/hashgraph/hedera-mirror-node/hedera-mirror-rosetta/app/domain/services/encoding\"\n+\t\"github.com/hashgraph/hedera-mirror-node/hedera-mirror-rosetta/app/errors\"\n+\t\"github.com/stretchr/testify/assert\"\n+\t\"testing\"\n+)\n+\n+func exampleAccount() *Account {\n+\treturn &Account{\n+\t\tentityid.EntityId{\n+\t\t\tShardNum:  0,\n+\t\t\tRealmNum:  0,\n+\t\t\tEntityNum: 0,\n+\t\t},\n+\t}\n+}\n+\n+func exampleAccountWith(shard, realm, entity int64) *Account {\n+\treturn &Account{\n+\t\tentityid.EntityId{\n+\t\t\tShardNum:  shard,\n+\t\t\tRealmNum:  realm,\n+\t\t\tEntityNum: entity,\n+\t\t},\n+\t}\n+}\n+\n+func expectedAccount() *types.AccountIdentifier {\n+\treturn &types.AccountIdentifier{\n+\t\tAddress:    \"0.0.0\",\n+\t\tSubAccount: nil,\n+\t\tMetadata:   nil,\n+\t}\n+}\n+\n+func expectedAccountWith(shard int64, realm int64, number int64) *Account {\n+\treturn &Account{\n+\t\tentityid.EntityId{\n+\t\t\tShardNum:  shard,\n+\t\t\tRealmNum:  realm,\n+\t\t\tEntityNum: number,\n+\t\t},\n+\t}\n+}\n+\n+func TestToRosettaAccount(t *testing.T) {\n+\t// when:\n+\trosettaAccount := exampleAccount().ToRosetta()\n+\n+\t// then:\n+\tassert.Equal(t, expectedAccount(), rosettaAccount)\n+}\n+\n+func TestNewAccountFromEncodedID(t *testing.T) {\n+\t// given:\n+\tvar testData = []struct {\n+\t\tinput, shard, realm, number int64\n+\t}{\n+\t\t{0, 0, 0, 0},\n+\t\t{10, 0, 0, 10},\n+\t\t{4294967295, 0, 0, 4294967295},\n+\t\t{2814792716779530, 10, 10, 10},\n+\t\t{9223372036854775807, 32767, 65535, 4294967295},\n+\t\t{9223090561878065152, 32767, 0, 0},\n+\t}\n+\n+\tfor _, tt := range testData {\n+\t\t// when:\n+\t\tres, _ := NewAccountFromEncodedID(tt.input)\n+\n+\t\t// then:\n+\t\tassert.Equal(t, expectedAccountWith(tt.shard, tt.realm, tt.number), res)\n+\t}\n+}\n+\n+func TestComputeEncodedID(t *testing.T) {\n+\tvar testData = []struct {\n+\t\tshard, realm, number int64\n+\t}{\n+\t\t{-1, 123, 246},\n+\t\t{123, -123, 246},\n+\t\t{123, 23, -246},\n+\t}\n+\n+\tfor _, tt := range testData {\n+\t\tres, e := exampleAccountWith(tt.shard, tt.realm, tt.number).ComputeEncodedID()\n+\t\tassert.Zero(t, res)\n+\t\tassert.NotNil(t, e)\n+\t}\n+}\n+\n+func TestNewAccountFromEncodedIDThrows(t *testing.T) {\n+\t// given:\n+\ttestData := int64(-1)\n+\n+\t// when:\n+\tres, err := NewAccountFromEncodedID(testData)\n+\n+\t// then:\n+\tassert.Nil(t, res)\n+\tassert.NotNil(t, err)\n+}\n+\n+func TestAccountFromString(t *testing.T) {\n+\t// given:\n+\tvar testData = []struct {\n+\t\tinput                string\n+\t\tshard, realm, number int64\n+\t}{\n+\t\t{\"0.0.0\", 0, 0, 0},\n+\t\t{\"0.0.10\", 0, 0, 10},\n+\t\t{\"0.0.4294967295\", 0, 0, 4294967295},\n+\t\t{\"10.10.10\", 10, 10, 10},\n+\t\t{\"32767.65535.4294967295\", 32767, 65535, 4294967295},\n+\t\t{\"32767.0.0\", 32767, 0, 0},\n+\t}\n+\n+\tfor _, tt := range testData {\n+\t\t// when:\n+\t\tres, _ := AccountFromString(tt.input)\n+\n+\t\t// then:\n+\t\tassert.Equal(t, expectedAccountWith(tt.shard, tt.realm, tt.number), res)\n+\t}\n+}\n+\n+func TestAccountFromStringThrows(t *testing.T) {\n+\t// given:\n+\tvar testData = []struct {\n+\t\tinput string\n+\t}{\n+\t\t{\"a.0.0\"},\n+\t\t{\"0.b.0\"},\n+\t\t{\"0.0c\"},\n+\t\t{\"0.0.c\"},\n+\t}\n+\n+\tvar expectedNil *Account = nil\n+\n+\tfor _, tt := range testData {\n+\t\t// when:\n+\t\tres, err := AccountFromString(tt.input)\n+\n+\t\t// then:\n+\t\tassert.Equal(t, expectedNil, res)\n+\t\tassert.Equal(t, errors.Errors[errors.InvalidAccount], err)\n+\t}\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba2727b9945699cee65c325759323f78edd25fa2"}, "originalPosition": 171}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDk1ODMxOA==", "bodyText": "should test ToRosetta with AddressBookEntries with different sizes", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1129#discussion_r504958318", "createdAt": "2020-10-14T20:39:20Z", "author": {"login": "xin-hedera"}, "path": "hedera-mirror-rosetta/app/domain/types/address_book_entry_test.go", "diffHunk": "@@ -0,0 +1,55 @@\n+package types\n+\n+import (\n+\t\"github.com/coinbase/rosetta-sdk-go/types\"\n+\tentityid \"github.com/hashgraph/hedera-mirror-node/hedera-mirror-rosetta/app/domain/services/encoding\"\n+\t\"github.com/stretchr/testify/assert\"\n+\t\"testing\"\n+)\n+\n+func exampleAddressBookEntries() *AddressBookEntries {\n+\treturn &AddressBookEntries{\n+\t\t[]*AddressBookEntry{\n+\t\t\t{\n+\t\t\t\tPeerId: &Account{\n+\t\t\t\t\tentityid.EntityId{\n+\t\t\t\t\t\tShardNum:  0,\n+\t\t\t\t\t\tRealmNum:  0,\n+\t\t\t\t\t\tEntityNum: 0,\n+\t\t\t\t\t},\n+\t\t\t\t},\n+\t\t\t\tMetadata: map[string]interface{}{\n+\t\t\t\t\t\"ip\":   \"123\",\n+\t\t\t\t\t\"port\": \"20514\",\n+\t\t\t\t},\n+\t\t\t},\n+\t\t},\n+\t}\n+}\n+\n+func expectedRosettaPeers() []*types.Peer {\n+\treturn []*types.Peer{\n+\t\t{\n+\t\t\tPeerID: (&Account{\n+\t\t\t\tentityid.EntityId{\n+\t\t\t\t\tShardNum:  0,\n+\t\t\t\t\tRealmNum:  0,\n+\t\t\t\t\tEntityNum: 0,\n+\t\t\t\t},\n+\t\t\t}).String(),\n+\t\t\tMetadata: map[string]interface{}{\n+\t\t\t\t\"ip\":   \"123\",\n+\t\t\t\t\"port\": \"20514\",\n+\t\t\t},\n+\t\t},\n+\t}\n+}\n+\n+func TestToRosettaPeers(t *testing.T) {\n+\t// when:\n+\tresult := exampleAddressBookEntries().ToRosetta()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba2727b9945699cee65c325759323f78edd25fa2"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDk2MjM3MQ==", "bodyText": "assigning 10000000 to  exampleBlock.ConsensusStartNanos is redundant", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1129#discussion_r504962371", "createdAt": "2020-10-14T20:47:05Z", "author": {"login": "xin-hedera"}, "path": "hedera-mirror-rosetta/app/domain/types/block_test.go", "diffHunk": "@@ -0,0 +1,85 @@\n+/*-\n+ * \u200c\n+ * Hedera Mirror Node\n+ *\n+ * Copyright (C) 2019 - 2020 Hedera Hashgraph, LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ * \u200d\n+ */\n+\n+package types\n+\n+import (\n+\t\"github.com/coinbase/rosetta-sdk-go/types\"\n+\t\"github.com/stretchr/testify/assert\"\n+\t\"testing\"\n+)\n+\n+func exampleBlock() *Block {\n+\treturn &Block{\n+\t\tIndex:               2,\n+\t\tHash:                \"somehash\",\n+\t\tConsensusStartNanos: 10000000,\n+\t\tConsensusEndNanos:   12300000,\n+\t\tParentIndex:         1,\n+\t\tParentHash:          \"someparenthash\",\n+\t\tTransactions: []*Transaction{\n+\t\t\t{\n+\t\t\t\tHash:       \"somehash\",\n+\t\t\t\tOperations: []*Operation{},\n+\t\t\t},\n+\t\t},\n+\t}\n+}\n+\n+func expectedBlock() *types.Block {\n+\treturn &types.Block{\n+\t\tBlockIdentifier: &types.BlockIdentifier{\n+\t\t\tIndex: 2,\n+\t\t\tHash:  \"0xsomehash\",\n+\t\t},\n+\t\tParentBlockIdentifier: &types.BlockIdentifier{\n+\t\t\tIndex: 1,\n+\t\t\tHash:  \"0xsomeparenthash\",\n+\t\t},\n+\t\tTimestamp: int64(10),\n+\t\tTransactions: []*types.Transaction{\n+\t\t\t{\n+\t\t\t\tTransactionIdentifier: &types.TransactionIdentifier{Hash: \"somehash\"},\n+\t\t\t\tOperations:            []*types.Operation{},\n+\t\t\t\tMetadata:              nil,\n+\t\t\t},\n+\t\t},\n+\t}\n+}\n+\n+func TestToRosettaBlock(t *testing.T) {\n+\t// when:\n+\trosettaBlockResult := exampleBlock().ToRosetta()\n+\n+\t// then:\n+\tassert.Equal(t, expectedBlock(), rosettaBlockResult)\n+}\n+\n+func TestGetTimestampMillis(t *testing.T) {\n+\t// given:\n+\texampleBlock := exampleBlock()\n+\texampleBlock.ConsensusStartNanos = 10000000", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba2727b9945699cee65c325759323f78edd25fa2"}, "originalPosition": 78}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDk2NTUyNQ==", "bodyText": "swap result and expectedData[i].result", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1129#discussion_r504965525", "createdAt": "2020-10-14T20:53:16Z", "author": {"login": "xin-hedera"}, "path": "hedera-mirror-rosetta/tools/hex/hex_test.go", "diffHunk": "@@ -0,0 +1,95 @@\n+/*-\n+ * \u200c\n+ * Hedera Mirror Node\n+ *\n+ * Copyright (C) 2019 - 2020 Hedera Hashgraph, LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ * \u200d\n+ */\n+\n+package hex\n+\n+import (\n+\t\"github.com/stretchr/testify/assert\"\n+\t\"testing\"\n+)\n+\n+func TestAddsPrefixCorrectly(t *testing.T) {\n+\t// given:\n+\tvar testData = []struct {\n+\t\tstring string\n+\t}{\n+\t\t{\"addprefix\"},\n+\t\t{\"\"},\n+\t\t{\"123\"},\n+\t\t{\"0x\"},\n+\t\t{\"0x \"},\n+\t\t{\"0x123aasd\"},\n+\t}\n+\n+\tvar expectedData = []struct {\n+\t\tresult string\n+\t}{\n+\t\t{\"0xaddprefix\"},\n+\t\t{\"0x\"},\n+\t\t{\"0x123\"},\n+\t\t{\"0x\"},\n+\t\t{\"0x \"},\n+\t\t{\"0x123aasd\"},\n+\t}\n+\n+\tfor i, tt := range testData {\n+\t\t// when:\n+\t\tresult := SafeAddHexPrefix(tt.string)\n+\n+\t\t// then:\n+\t\tassert.Equal(t, result, expectedData[i].result)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba2727b9945699cee65c325759323f78edd25fa2"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDk2NTgyNg==", "bodyText": "swap result and expectedData[i].result", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1129#discussion_r504965826", "createdAt": "2020-10-14T20:53:53Z", "author": {"login": "xin-hedera"}, "path": "hedera-mirror-rosetta/tools/hex/hex_test.go", "diffHunk": "@@ -0,0 +1,95 @@\n+/*-\n+ * \u200c\n+ * Hedera Mirror Node\n+ *\n+ * Copyright (C) 2019 - 2020 Hedera Hashgraph, LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ * \u200d\n+ */\n+\n+package hex\n+\n+import (\n+\t\"github.com/stretchr/testify/assert\"\n+\t\"testing\"\n+)\n+\n+func TestAddsPrefixCorrectly(t *testing.T) {\n+\t// given:\n+\tvar testData = []struct {\n+\t\tstring string\n+\t}{\n+\t\t{\"addprefix\"},\n+\t\t{\"\"},\n+\t\t{\"123\"},\n+\t\t{\"0x\"},\n+\t\t{\"0x \"},\n+\t\t{\"0x123aasd\"},\n+\t}\n+\n+\tvar expectedData = []struct {\n+\t\tresult string\n+\t}{\n+\t\t{\"0xaddprefix\"},\n+\t\t{\"0x\"},\n+\t\t{\"0x123\"},\n+\t\t{\"0x\"},\n+\t\t{\"0x \"},\n+\t\t{\"0x123aasd\"},\n+\t}\n+\n+\tfor i, tt := range testData {\n+\t\t// when:\n+\t\tresult := SafeAddHexPrefix(tt.string)\n+\n+\t\t// then:\n+\t\tassert.Equal(t, result, expectedData[i].result)\n+\t}\n+}\n+\n+func TestRemovesPrefixCorrectly(t *testing.T) {\n+\t// given:\n+\tvar testData = []struct {\n+\t\tstring string\n+\t}{\n+\t\t{\"0xaddprefix\"},\n+\t\t{\"0x\"},\n+\t\t{\"0x123\"},\n+\t\t{\"0x\"},\n+\t\t{\"0x \"},\n+\t\t{\"0x123aasd\"},\n+\t\t{\"0xaasd\"},\n+\t\t{\"234123\"},\n+\t}\n+\n+\tvar expectedData = []struct {\n+\t\tresult string\n+\t}{\n+\t\t{\"addprefix\"},\n+\t\t{\"\"},\n+\t\t{\"123\"},\n+\t\t{\"\"},\n+\t\t{\" \"},\n+\t\t{\"123aasd\"},\n+\t\t{\"aasd\"},\n+\t\t{\"234123\"},\n+\t}\n+\n+\tfor i, tt := range testData {\n+\t\t// when:\n+\t\tresult := SafeRemoveHexPrefix(tt.string)\n+\t\t// then:\n+\t\tassert.Equal(t, result, expectedData[i].result)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba2727b9945699cee65c325759323f78edd25fa2"}, "originalPosition": 93}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDk2NjM1Mg==", "bodyText": "duplicate of row 2", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1129#discussion_r504966352", "createdAt": "2020-10-14T20:54:55Z", "author": {"login": "xin-hedera"}, "path": "hedera-mirror-rosetta/tools/hex/hex_test.go", "diffHunk": "@@ -0,0 +1,95 @@\n+/*-\n+ * \u200c\n+ * Hedera Mirror Node\n+ *\n+ * Copyright (C) 2019 - 2020 Hedera Hashgraph, LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ * \u200d\n+ */\n+\n+package hex\n+\n+import (\n+\t\"github.com/stretchr/testify/assert\"\n+\t\"testing\"\n+)\n+\n+func TestAddsPrefixCorrectly(t *testing.T) {\n+\t// given:\n+\tvar testData = []struct {\n+\t\tstring string\n+\t}{\n+\t\t{\"addprefix\"},\n+\t\t{\"\"},\n+\t\t{\"123\"},\n+\t\t{\"0x\"},\n+\t\t{\"0x \"},\n+\t\t{\"0x123aasd\"},\n+\t}\n+\n+\tvar expectedData = []struct {\n+\t\tresult string\n+\t}{\n+\t\t{\"0xaddprefix\"},\n+\t\t{\"0x\"},\n+\t\t{\"0x123\"},\n+\t\t{\"0x\"},\n+\t\t{\"0x \"},\n+\t\t{\"0x123aasd\"},\n+\t}\n+\n+\tfor i, tt := range testData {\n+\t\t// when:\n+\t\tresult := SafeAddHexPrefix(tt.string)\n+\n+\t\t// then:\n+\t\tassert.Equal(t, result, expectedData[i].result)\n+\t}\n+}\n+\n+func TestRemovesPrefixCorrectly(t *testing.T) {\n+\t// given:\n+\tvar testData = []struct {\n+\t\tstring string\n+\t}{\n+\t\t{\"0xaddprefix\"},\n+\t\t{\"0x\"},\n+\t\t{\"0x123\"},\n+\t\t{\"0x\"},", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba2727b9945699cee65c325759323f78edd25fa2"}, "originalPosition": 69}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDk2NzUwNw==", "bodyText": "should have testData of different sizes", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1129#discussion_r504967507", "createdAt": "2020-10-14T20:57:00Z", "author": {"login": "xin-hedera"}, "path": "hedera-mirror-rosetta/tools/maphelper/maphelper_test.go", "diffHunk": "@@ -0,0 +1,63 @@\n+/*-\n+ * \u200c\n+ * Hedera Mirror Node\n+ *\n+ * Copyright (C) 2019 - 2020 Hedera Hashgraph, LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ * \u200d\n+ */\n+\n+package maphelper\n+\n+import (\n+\t\"fmt\"\n+\t\"github.com/coinbase/rosetta-sdk-go/types\"\n+\t\"github.com/hashgraph/hedera-mirror-node/hedera-mirror-rosetta/app/errors\"\n+\t\"github.com/stretchr/testify/assert\"\n+\t\"testing\"\n+)\n+\n+func TestGetsCorrectStringValuesFromMap(t *testing.T) {\n+\t// given:\n+\ttestData := map[int]string{", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba2727b9945699cee65c325759323f78edd25fa2"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDk2NzU3OA==", "bodyText": "should have testData of different sizes", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1129#discussion_r504967578", "createdAt": "2020-10-14T20:57:07Z", "author": {"login": "xin-hedera"}, "path": "hedera-mirror-rosetta/tools/maphelper/maphelper_test.go", "diffHunk": "@@ -0,0 +1,63 @@\n+/*-\n+ * \u200c\n+ * Hedera Mirror Node\n+ *\n+ * Copyright (C) 2019 - 2020 Hedera Hashgraph, LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ * \u200d\n+ */\n+\n+package maphelper\n+\n+import (\n+\t\"fmt\"\n+\t\"github.com/coinbase/rosetta-sdk-go/types\"\n+\t\"github.com/hashgraph/hedera-mirror-node/hedera-mirror-rosetta/app/errors\"\n+\t\"github.com/stretchr/testify/assert\"\n+\t\"testing\"\n+)\n+\n+func TestGetsCorrectStringValuesFromMap(t *testing.T) {\n+\t// given:\n+\ttestData := map[int]string{\n+\t\t1: \"abc\",\n+\t}\n+\n+\t// when:\n+\tresult := GetStringValuesFromIntStringMap(testData)\n+\n+\t// then:\n+\tassert.Equal(t, 1, len(result))\n+\tassert.Equal(t, \"abc\", result[0])\n+}\n+\n+func TestGetsCorrectErrorValuesFromMap(t *testing.T) {\n+\t// given:\n+\terror := newErrorDummy(32, true)\n+\n+\ttestData := map[string]*types.Error{", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba2727b9945699cee65c325759323f78edd25fa2"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDk2OTAwNA==", "bodyText": "better to separate multiple calls into the testData struct array methodology", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1129#discussion_r504969004", "createdAt": "2020-10-14T21:00:02Z", "author": {"login": "xin-hedera"}, "path": "hedera-mirror-rosetta/tools/validator/validator_test.go", "diffHunk": "@@ -0,0 +1,72 @@\n+/*-\n+ * \u200c\n+ * Hedera Mirror Node\n+ *\n+ * Copyright (C) 2019 - 2020 Hedera Hashgraph, LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ * \u200d\n+ */\n+\n+package validator\n+\n+import (\n+\t\"github.com/coinbase/rosetta-sdk-go/types\"\n+\t\"github.com/hashgraph/hedera-mirror-node/hedera-mirror-rosetta/app/errors\"\n+\t\"github.com/stretchr/testify/assert\"\n+\t\"testing\"\n+)\n+\n+func TestValidateOperationsSum(t *testing.T) {\n+\t// given:\n+\toperationDummy := newOperationDummy(\"100\")\n+\toperationDummy2 := newOperationDummy(\"-100\")\n+\tinvalidOperationDummy := newOperationDummy(\"-100H\")\n+\n+\ttestData := []*types.Operation{\n+\t\toperationDummy,\n+\t\toperationDummy2,\n+\t}\n+\n+\tvar nil *types.Error = nil\n+\texpectedInvalidOperationsTotalAmountError := errors.Errors[errors.InvalidOperationsTotalAmount]\n+\texpectedInvalidAmountError := errors.Errors[errors.InvalidAmount]\n+\n+\t// when:\n+\tresult := ValidateOperationsSum(testData)\n+\n+\t// then:\n+\tassert.Equal(t, nil, result)\n+\n+\t// and:\n+\ttestData = append(testData, operationDummy2)\n+\n+\t// then:\n+\tresult = ValidateOperationsSum(testData)\n+\tassert.Equal(t, expectedInvalidOperationsTotalAmountError, result)\n+\n+\t// and:\n+\ttestData = append(testData, invalidOperationDummy)\n+\n+\t// then:\n+\tresult = ValidateOperationsSum(testData)\n+\tassert.Equal(t, expectedInvalidAmountError, result)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba2727b9945699cee65c325759323f78edd25fa2"}, "originalPosition": 63}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5b00b0e5ae9ec57ed74085e5a534145be4621d7", "author": {"user": {"login": "georgiyazovaliiski", "name": "Georgi Yazovaliyski"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/d5b00b0e5ae9ec57ed74085e5a534145be4621d7", "committedDate": "2020-10-15T11:03:34Z", "message": "PR Comments resolution (#150)\n\nSigned-off-by: Georgi Yazovaliyski <georgi.yazovaliiski@gmail.com>\r\nSigned-off-by: Daniel Ivanov <daniel.k.ivanov95@gmail.com>\r\nSigned-off-by: Daniel <Daniel.K.Ivanov95@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5NTAzMjcy", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1129#pullrequestreview-509503272", "createdAt": "2020-10-15T15:25:50Z", "commit": {"oid": "d5b00b0e5ae9ec57ed74085e5a534145be4621d7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3596, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}