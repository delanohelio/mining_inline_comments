{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE2MzcyNDc3", "number": 753, "title": "Stop polling bucket when finished downloading demo data", "bodyText": "Detailed description:\n\nStop polling bucket when finished downloading demo data\nAdd hedera_mirror_download_request_seconds metric which tracks The time in seconds it took to receive the response from S3\nAdd hedera_mirror_download_response_bytes metric which tracks The size of the response in bytes returned from S3\nAdd hedera_mirror_signature_verification_total metric which tracks The number of signatures verified from a particular node\nAdd hedera_mirror_stream_verification_seconds metric which tracks The duration in seconds it took to verify consensus and hash chain of a stream file\nRemove unused Util.stringToAccountID()\n\nWhich issue(s) this PR fixes:\nFixes #673\nAlmost takes care of #81 (missing balance metrics)\nSpecial notes for your reviewer:\n$ curl -s http://localhost:8080/actuator/prometheus | grep -E \"^hedera\" | sort\nhedera_mirror_download_request_seconds_count{action=\"list\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"3\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 1.0\nhedera_mirror_download_request_seconds_count{action=\"list\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"3\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 27.0\nhedera_mirror_download_request_seconds_count{action=\"list\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"4\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 1.0\nhedera_mirror_download_request_seconds_count{action=\"list\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"4\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 27.0\nhedera_mirror_download_request_seconds_count{action=\"list\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"5\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 5.0\nhedera_mirror_download_request_seconds_count{action=\"list\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"5\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 27.0\nhedera_mirror_download_request_seconds_count{action=\"list\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"6\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 1.0\nhedera_mirror_download_request_seconds_count{action=\"list\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"6\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 27.0\nhedera_mirror_download_request_seconds_count{action=\"signature\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"3\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 11.0\nhedera_mirror_download_request_seconds_count{action=\"signature\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"3\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 1032.0\nhedera_mirror_download_request_seconds_count{action=\"signature\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"4\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 10.0\nhedera_mirror_download_request_seconds_count{action=\"signature\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"4\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 1036.0\nhedera_mirror_download_request_seconds_count{action=\"signature\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"5\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 10.0\nhedera_mirror_download_request_seconds_count{action=\"signature\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"5\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 1027.0\nhedera_mirror_download_request_seconds_count{action=\"signature\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"6\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 11.0\nhedera_mirror_download_request_seconds_count{action=\"signature\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"6\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 1027.0\nhedera_mirror_download_request_seconds_count{action=\"signed\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"3\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 11.0\nhedera_mirror_download_request_seconds_count{action=\"signed\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"3\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 1030.0\nhedera_mirror_download_request_seconds_max{action=\"list\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"3\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 0.0\nhedera_mirror_download_request_seconds_max{action=\"list\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"3\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 0.0\nhedera_mirror_download_request_seconds_max{action=\"list\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"4\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 0.0\nhedera_mirror_download_request_seconds_max{action=\"list\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"4\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 0.0\nhedera_mirror_download_request_seconds_max{action=\"list\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"5\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 0.0\nhedera_mirror_download_request_seconds_max{action=\"list\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"5\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 0.0\nhedera_mirror_download_request_seconds_max{action=\"list\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"6\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 0.0\nhedera_mirror_download_request_seconds_max{action=\"list\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"6\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 0.0\nhedera_mirror_download_request_seconds_max{action=\"signature\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"3\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 0.0\nhedera_mirror_download_request_seconds_max{action=\"signature\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"3\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 0.0\nhedera_mirror_download_request_seconds_max{action=\"signature\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"4\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 0.0\nhedera_mirror_download_request_seconds_max{action=\"signature\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"4\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 0.0\nhedera_mirror_download_request_seconds_max{action=\"signature\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"5\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 0.0\nhedera_mirror_download_request_seconds_max{action=\"signature\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"5\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 0.0\nhedera_mirror_download_request_seconds_max{action=\"signature\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"6\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 0.0\nhedera_mirror_download_request_seconds_max{action=\"signature\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"6\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 0.0\nhedera_mirror_download_request_seconds_max{action=\"signed\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"3\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 0.0\nhedera_mirror_download_request_seconds_max{action=\"signed\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"3\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 0.0\nhedera_mirror_download_request_seconds_sum{action=\"list\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"3\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 0.060144\nhedera_mirror_download_request_seconds_sum{action=\"list\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"3\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 9.224944\nhedera_mirror_download_request_seconds_sum{action=\"list\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"4\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 0.060714\nhedera_mirror_download_request_seconds_sum{action=\"list\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"4\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 8.847479\nhedera_mirror_download_request_seconds_sum{action=\"list\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"5\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 22.332564\nhedera_mirror_download_request_seconds_sum{action=\"list\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"5\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 8.860829\nhedera_mirror_download_request_seconds_sum{action=\"list\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"6\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 0.060183\nhedera_mirror_download_request_seconds_sum{action=\"list\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"6\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 8.75576\nhedera_mirror_download_request_seconds_sum{action=\"signature\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"3\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 7.306715\nhedera_mirror_download_request_seconds_sum{action=\"signature\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"3\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 406.254727\nhedera_mirror_download_request_seconds_sum{action=\"signature\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"4\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 6.815952\nhedera_mirror_download_request_seconds_sum{action=\"signature\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"4\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 362.173058\nhedera_mirror_download_request_seconds_sum{action=\"signature\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"5\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 9.243659\nhedera_mirror_download_request_seconds_sum{action=\"signature\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"5\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 467.094914\nhedera_mirror_download_request_seconds_sum{action=\"signature\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"6\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 5.224257\nhedera_mirror_download_request_seconds_sum{action=\"signature\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"6\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 524.081182\nhedera_mirror_download_request_seconds_sum{action=\"signed\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"3\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 2.513609\nhedera_mirror_download_request_seconds_sum{action=\"signed\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"3\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 98.610902\nhedera_mirror_download_response_bytes_count{action=\"list\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"3\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 2.0\nhedera_mirror_download_response_bytes_count{action=\"list\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"3\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 27.0\nhedera_mirror_download_response_bytes_count{action=\"list\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"4\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 2.0\nhedera_mirror_download_response_bytes_count{action=\"list\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"4\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 27.0\nhedera_mirror_download_response_bytes_count{action=\"list\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"5\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 2.0\nhedera_mirror_download_response_bytes_count{action=\"list\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"5\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 27.0\nhedera_mirror_download_response_bytes_count{action=\"list\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"6\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 2.0\nhedera_mirror_download_response_bytes_count{action=\"list\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"6\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 27.0\nhedera_mirror_download_response_bytes_count{action=\"signature\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"3\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 11.0\nhedera_mirror_download_response_bytes_count{action=\"signature\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"3\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 1033.0\nhedera_mirror_download_response_bytes_count{action=\"signature\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"4\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 11.0\nhedera_mirror_download_response_bytes_count{action=\"signature\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"4\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 1033.0\nhedera_mirror_download_response_bytes_count{action=\"signature\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"5\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 10.0\nhedera_mirror_download_response_bytes_count{action=\"signature\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"5\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 1026.0\nhedera_mirror_download_response_bytes_count{action=\"signature\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"6\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 10.0\nhedera_mirror_download_response_bytes_count{action=\"signature\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"6\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 1030.0\nhedera_mirror_download_response_bytes_count{action=\"signed\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"3\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 11.0\nhedera_mirror_download_response_bytes_count{action=\"signed\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"3\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 1030.0\nhedera_mirror_download_response_bytes_max{action=\"list\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"3\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 0.0\nhedera_mirror_download_response_bytes_max{action=\"list\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"3\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 0.0\nhedera_mirror_download_response_bytes_max{action=\"list\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"4\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 0.0\nhedera_mirror_download_response_bytes_max{action=\"list\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"4\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 0.0\nhedera_mirror_download_response_bytes_max{action=\"list\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"5\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 0.0\nhedera_mirror_download_response_bytes_max{action=\"list\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"5\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 0.0\nhedera_mirror_download_response_bytes_max{action=\"list\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"6\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 0.0\nhedera_mirror_download_response_bytes_max{action=\"list\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"6\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 0.0\nhedera_mirror_download_response_bytes_max{action=\"signature\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"3\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 0.0\nhedera_mirror_download_response_bytes_max{action=\"signature\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"3\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 0.0\nhedera_mirror_download_response_bytes_max{action=\"signature\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"4\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 0.0\nhedera_mirror_download_response_bytes_max{action=\"signature\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"4\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 0.0\nhedera_mirror_download_response_bytes_max{action=\"signature\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"5\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 0.0\nhedera_mirror_download_response_bytes_max{action=\"signature\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"5\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 0.0\nhedera_mirror_download_response_bytes_max{action=\"signature\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"6\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 0.0\nhedera_mirror_download_response_bytes_max{action=\"signature\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"6\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 0.0\nhedera_mirror_download_response_bytes_max{action=\"signed\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"3\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 0.0\nhedera_mirror_download_response_bytes_max{action=\"signed\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"3\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 0.0\nhedera_mirror_download_response_bytes_sum{action=\"list\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"3\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 6591.0\nhedera_mirror_download_response_bytes_sum{action=\"list\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"3\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 537419.0\nhedera_mirror_download_response_bytes_sum{action=\"list\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"4\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 6591.0\nhedera_mirror_download_response_bytes_sum{action=\"list\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"4\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 537419.0\nhedera_mirror_download_response_bytes_sum{action=\"list\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"5\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 6591.0\nhedera_mirror_download_response_bytes_sum{action=\"list\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"5\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 537419.0\nhedera_mirror_download_response_bytes_sum{action=\"list\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"6\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 6591.0\nhedera_mirror_download_response_bytes_sum{action=\"list\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"6\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 537419.0\nhedera_mirror_download_response_bytes_sum{action=\"signature\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"3\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 4994.0\nhedera_mirror_download_response_bytes_sum{action=\"signature\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"3\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 468982.0\nhedera_mirror_download_response_bytes_sum{action=\"signature\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"4\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 4994.0\nhedera_mirror_download_response_bytes_sum{action=\"signature\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"4\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 468982.0\nhedera_mirror_download_response_bytes_sum{action=\"signature\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"5\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 4540.0\nhedera_mirror_download_response_bytes_sum{action=\"signature\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"5\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 465804.0\nhedera_mirror_download_response_bytes_sum{action=\"signature\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"6\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 4540.0\nhedera_mirror_download_response_bytes_sum{action=\"signature\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"6\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 467620.0\nhedera_mirror_download_response_bytes_sum{action=\"signed\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"3\",realm=\"0\",shard=\"0\",status=\"200\",type=\"BALANCE\",} 9908527.0\nhedera_mirror_download_response_bytes_sum{action=\"signed\",application=\"hedera-mirror-importer\",method=\"GET\",node=\"3\",realm=\"0\",shard=\"0\",status=\"200\",type=\"RECORD\",} 4601065.0\nhedera_mirror_parse_duration_seconds_count{application=\"hedera-mirror-importer\",success=\"true\",type=\"RECORD\",version=\"2\",} 1030.0\nhedera_mirror_parse_duration_seconds_max{application=\"hedera-mirror-importer\",success=\"true\",type=\"RECORD\",version=\"2\",} 0.0\nhedera_mirror_parse_duration_seconds_sum{application=\"hedera-mirror-importer\",success=\"true\",type=\"RECORD\",version=\"2\",} 37.133931005\nhedera_mirror_signature_verification_total{application=\"hedera-mirror-importer\",node=\"3\",realm=\"0\",shard=\"0\",status=\"CONSENSUS_REACHED\",type=\"BALANCE\",} 11.0\nhedera_mirror_signature_verification_total{application=\"hedera-mirror-importer\",node=\"3\",realm=\"0\",shard=\"0\",status=\"CONSENSUS_REACHED\",type=\"RECORD\",} 1030.0\nhedera_mirror_signature_verification_total{application=\"hedera-mirror-importer\",node=\"4\",realm=\"0\",shard=\"0\",status=\"CONSENSUS_REACHED\",type=\"BALANCE\",} 11.0\nhedera_mirror_signature_verification_total{application=\"hedera-mirror-importer\",node=\"4\",realm=\"0\",shard=\"0\",status=\"CONSENSUS_REACHED\",type=\"RECORD\",} 1030.0\nhedera_mirror_signature_verification_total{application=\"hedera-mirror-importer\",node=\"5\",realm=\"0\",shard=\"0\",status=\"CONSENSUS_REACHED\",type=\"BALANCE\",} 11.0\nhedera_mirror_signature_verification_total{application=\"hedera-mirror-importer\",node=\"5\",realm=\"0\",shard=\"0\",status=\"CONSENSUS_REACHED\",type=\"RECORD\",} 1030.0\nhedera_mirror_signature_verification_total{application=\"hedera-mirror-importer\",node=\"6\",realm=\"0\",shard=\"0\",status=\"CONSENSUS_REACHED\",type=\"BALANCE\",} 11.0\nhedera_mirror_signature_verification_total{application=\"hedera-mirror-importer\",node=\"6\",realm=\"0\",shard=\"0\",status=\"CONSENSUS_REACHED\",type=\"RECORD\",} 1030.0\nhedera_mirror_stream_verification_seconds_count{application=\"hedera-mirror-importer\",success=\"true\",type=\"BALANCE\",} 11.0\nhedera_mirror_stream_verification_seconds_count{application=\"hedera-mirror-importer\",success=\"true\",type=\"RECORD\",} 1030.0\nhedera_mirror_stream_verification_seconds_max{application=\"hedera-mirror-importer\",success=\"true\",type=\"BALANCE\",} 0.0\nhedera_mirror_stream_verification_seconds_max{application=\"hedera-mirror-importer\",success=\"true\",type=\"RECORD\",} 0.0\nhedera_mirror_stream_verification_seconds_sum{application=\"hedera-mirror-importer\",success=\"true\",type=\"BALANCE\",} 2.801912\nhedera_mirror_stream_verification_seconds_sum{application=\"hedera-mirror-importer\",success=\"true\",type=\"RECORD\",} 116.439319\nChecklist\n\n Documentation added\n Tests updated", "createdAt": "2020-05-11T22:03:08Z", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/753", "merged": true, "mergeCommit": {"oid": "fbebd0ed106fd0f5662011568971a09713ee21a5"}, "closed": true, "closedAt": "2020-05-12T15:42:55Z", "author": {"login": "steven-sheehy"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcgW6LbgH2gAyNDE2MzcyNDc3OjM0YzIzM2IyZTE5ZjgxNjk2MjZmNzczNjE1OGNkZGZmOWVkYTkyODg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcgmKZ8gFqTQxMDE3MTk5Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "34c233b2e19f8169626f7736158cddff9eda9288", "author": {"user": {"login": "steven-sheehy", "name": "Steven Sheehy"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/34c233b2e19f8169626f7736158cddff9eda9288", "committedDate": "2020-05-11T21:53:07Z", "message": "Stop polling bucket when finished downloading demo data\n\nSigned-off-by: Steven Sheehy <steven.sheehy@hedera.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5NTc2MTQ2", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/753#pullrequestreview-409576146", "createdAt": "2020-05-11T22:30:15Z", "commit": {"oid": "34c233b2e19f8169626f7736158cddff9eda9288"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQyMjozMDoxNVrOGTvpqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQyMjo0NjoyMFrOGTwAaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzM1Njg0Mw==", "bodyText": "If the following scenarios are handled we should have asserts for them too\n-Null type\n-Negative values\n-Out of range values\n-Non integer chars", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/753#discussion_r423356843", "createdAt": "2020-05-11T22:30:15Z", "author": {"login": "Nana-EC"}, "path": "hedera-mirror-importer/src/test/java/com/hedera/mirror/importer/domain/EntityIdTest.java", "diffHunk": "@@ -0,0 +1,40 @@\n+package com.hedera.mirror.importer.domain;\n+\n+/*-\n+ * \u200c\n+ * Hedera Mirror Node\n+ * \u200b\n+ * Copyright (C) 2019 - 2020 Hedera Hashgraph, LLC\n+ * \u200b\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ * \u200d\n+ */\n+\n+import static org.assertj.core.api.Assertions.assertThat;\n+import static org.assertj.core.api.Assertions.assertThatThrownBy;\n+\n+import org.junit.jupiter.api.Test;\n+\n+public class EntityIdTest {\n+    @Test\n+    void ofString() {\n+        EntityTypeEnum type = EntityTypeEnum.ACCOUNT;\n+        assertThat(EntityId.of(\"0.0.1\", type)).isEqualTo(EntityId.of(0, 0, 1, type));\n+        assertThat(EntityId.of(\"0.0.0\", type)).isNull();\n+        assertThatThrownBy(() -> EntityId.of(null, type)).isInstanceOf(IllegalArgumentException.class);\n+        assertThatThrownBy(() -> EntityId.of(\"\", type)).isInstanceOf(IllegalArgumentException.class);\n+        assertThatThrownBy(() -> EntityId.of(\"0\", type)).isInstanceOf(IllegalArgumentException.class);\n+        assertThatThrownBy(() -> EntityId.of(\"0.0\", type)).isInstanceOf(IllegalArgumentException.class);\n+        assertThatThrownBy(() -> EntityId.of(\"0.0.0.1\", type)).isInstanceOf(IllegalArgumentException.class);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34c233b2e19f8169626f7736158cddff9eda9288"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzM2MjY2NQ==", "bodyText": "We should also guard against negative  and out of range numbers", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/753#discussion_r423362665", "createdAt": "2020-05-11T22:46:20Z", "author": {"login": "Nana-EC"}, "path": "hedera-mirror-importer/src/main/java/com/hedera/mirror/importer/domain/EntityId.java", "diffHunk": "@@ -76,7 +83,17 @@ public static EntityId of(TopicID topicID) {\n         return of(topicID.getShardNum(), topicID.getRealmNum(), topicID.getTopicNum(), EntityTypeEnum.TOPIC);\n     }\n \n-    private static EntityId of(long entityShard, long entityRealm, long entityNum, EntityTypeEnum type) {\n+    public static EntityId of(String entityId, EntityTypeEnum type) {\n+        List<Long> parts = SPLITTER.splitToStream(Objects.requireNonNullElse(entityId, \"\"))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34c233b2e19f8169626f7736158cddff9eda9288"}, "originalPosition": 31}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd8f0507beb497ca7f6b8cd37f71c4155e6c9aef", "author": {"user": {"login": "steven-sheehy", "name": "Steven Sheehy"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/cd8f0507beb497ca7f6b8cd37f71c4155e6c9aef", "committedDate": "2020-05-11T23:32:04Z", "message": "Check for invalid EntityId values\n\nSigned-off-by: Steven Sheehy <steven.sheehy@hedera.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cec579b7caa34a59366486d9d0d178c949770782", "author": {"user": {"login": "steven-sheehy", "name": "Steven Sheehy"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/cec579b7caa34a59366486d9d0d178c949770782", "committedDate": "2020-05-11T23:28:22Z", "message": "Check for negative EntityId\n\nSigned-off-by: Steven Sheehy <steven.sheehy@hedera.com>"}, "afterCommit": {"oid": "cd8f0507beb497ca7f6b8cd37f71c4155e6c9aef", "author": {"user": {"login": "steven-sheehy", "name": "Steven Sheehy"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/cd8f0507beb497ca7f6b8cd37f71c4155e6c9aef", "committedDate": "2020-05-11T23:32:04Z", "message": "Check for invalid EntityId values\n\nSigned-off-by: Steven Sheehy <steven.sheehy@hedera.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5NjAyNTY0", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/753#pullrequestreview-409602564", "createdAt": "2020-05-11T23:37:12Z", "commit": {"oid": "cd8f0507beb497ca7f6b8cd37f71c4155e6c9aef"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5Njc2Njk2", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/753#pullrequestreview-409676696", "createdAt": "2020-05-12T03:39:50Z", "commit": {"oid": "cd8f0507beb497ca7f6b8cd37f71c4155e6c9aef"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQwMzozOTo1MFrOGT07EA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQwMzo1OToyMlrOGT1NVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzQ0MzIxNg==", "bodyText": "please add class comment.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/753#discussion_r423443216", "createdAt": "2020-05-12T03:39:50Z", "author": {"login": "apeksharma"}, "path": "hedera-mirror-importer/src/main/java/com/hedera/mirror/importer/config/MetricsExecutionInterceptor.java", "diffHunk": "@@ -0,0 +1,181 @@\n+package com.hedera.mirror.importer.config;\n+\n+/*-\n+ * \u200c\n+ * Hedera Mirror Node\n+ * \u200b\n+ * Copyright (C) 2019 - 2020 Hedera Hashgraph, LLC\n+ * \u200b\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ * \u200d\n+ */\n+\n+import io.micrometer.core.instrument.DistributionSummary;\n+import io.micrometer.core.instrument.MeterRegistry;\n+import io.micrometer.core.instrument.Timer;\n+import java.nio.ByteBuffer;\n+import java.time.Duration;\n+import java.time.Instant;\n+import java.util.Optional;\n+import java.util.regex.Matcher;\n+import java.util.regex.Pattern;\n+import javax.inject.Named;\n+import lombok.Getter;\n+import lombok.RequiredArgsConstructor;\n+import lombok.extern.log4j.Log4j2;\n+import org.reactivestreams.Publisher;\n+import org.reactivestreams.Subscriber;\n+import org.reactivestreams.Subscription;\n+import software.amazon.awssdk.core.interceptor.Context;\n+import software.amazon.awssdk.core.interceptor.ExecutionAttribute;\n+import software.amazon.awssdk.core.interceptor.ExecutionAttributes;\n+import software.amazon.awssdk.core.interceptor.ExecutionInterceptor;\n+\n+import com.hedera.mirror.importer.domain.EntityId;\n+import com.hedera.mirror.importer.domain.EntityTypeEnum;\n+import com.hedera.mirror.importer.domain.StreamType;\n+\n+@Log4j2\n+@Named\n+@RequiredArgsConstructor", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cd8f0507beb497ca7f6b8cd37f71c4155e6c9aef"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzQ0NjcyNQ==", "bodyText": "curious, why not use annotation?", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/753#discussion_r423446725", "createdAt": "2020-05-12T03:54:16Z", "author": {"login": "apeksharma"}, "path": "hedera-mirror-importer/src/main/java/com/hedera/mirror/importer/downloader/Downloader.java", "diffHunk": "@@ -54,35 +59,51 @@\n import software.amazon.awssdk.services.s3.model.RequestPayer;\n import software.amazon.awssdk.services.s3.model.S3Object;\n \n+import com.hedera.mirror.importer.MirrorProperties;\n import com.hedera.mirror.importer.addressbook.NetworkAddressBook;\n import com.hedera.mirror.importer.domain.ApplicationStatusCode;\n+import com.hedera.mirror.importer.domain.EntityId;\n+import com.hedera.mirror.importer.domain.EntityTypeEnum;\n import com.hedera.mirror.importer.domain.FileStreamSignature;\n+import com.hedera.mirror.importer.domain.HederaNetwork;\n import com.hedera.mirror.importer.domain.NodeAddress;\n import com.hedera.mirror.importer.exception.SignatureVerificationException;\n import com.hedera.mirror.importer.repository.ApplicationStatusRepository;\n import com.hedera.mirror.importer.util.ShutdownHelper;\n import com.hedera.mirror.importer.util.Utility;\n \n public abstract class Downloader {\n-    protected final Logger log = LogManager.getLogger(getClass());\n \n+    protected final Logger log = LogManager.getLogger(getClass());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cd8f0507beb497ca7f6b8cd37f71c4155e6c9aef"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzQ0Nzg5NA==", "bodyText": "For signature metrics, recording node as dimension is indeed useful for filtering later. We can store full \"0.0.X\" as the tag value.\nIndividual realm, shard and num as dimensions don't seem useful.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/753#discussion_r423447894", "createdAt": "2020-05-12T03:59:22Z", "author": {"login": "apeksharma"}, "path": "hedera-mirror-importer/src/main/java/com/hedera/mirror/importer/downloader/Downloader.java", "diffHunk": "@@ -284,10 +317,24 @@ private void verifySigsAndDownloadDataFiles(Multimap<String, FileStreamSignature\n                 return;\n             }\n \n+            Instant startTime = Instant.now();\n             Collection<FileStreamSignature> signatures = sigFilesMap.get(sigFileName);\n-            nodeSignatureVerifier.verify(signatures);\n             boolean valid = false;\n \n+            try {\n+                nodeSignatureVerifier.verify(signatures);\n+            } finally {\n+                for (FileStreamSignature signature : signatures) {\n+                    EntityId nodeAccountId = EntityId.of(signature.getNode(), EntityTypeEnum.ACCOUNT);\n+                    signatureVerificationMetric.tag(\"node\", nodeAccountId.getEntityNum().toString())\n+                            .tag(\"realm\", nodeAccountId.getRealmNum().toString())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cd8f0507beb497ca7f6b8cd37f71c4155e6c9aef"}, "originalPosition": 128}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "74244ba4903d3a82e4ad7fd8c67dcad072869814", "author": {"user": {"login": "steven-sheehy", "name": "Steven Sheehy"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/74244ba4903d3a82e4ad7fd8c67dcad072869814", "committedDate": "2020-05-12T15:27:36Z", "message": "Review feedback\n\nSigned-off-by: Steven Sheehy <steven.sheehy@hedera.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEwMTcxOTky", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/753#pullrequestreview-410171992", "createdAt": "2020-05-12T15:39:25Z", "commit": {"oid": "74244ba4903d3a82e4ad7fd8c67dcad072869814"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3133, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}