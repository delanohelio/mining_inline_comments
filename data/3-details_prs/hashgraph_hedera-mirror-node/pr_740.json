{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE0MjA1MDcy", "number": 740, "title": "Added deployer folder structure with schema and docker file", "bodyText": "Detailed description:\nGoogle Cloud Marketplace requires a Helm deployer image to be created to manage deployments.\nThis change\n\nAdds a  hedera-mirror-gcp-marketplace folder under charts\nAdds a Schema.yaml required by marketplace\nAdds a values-gcp-marketplace.yaml file for use\nAdds a Dockerfile to house the charts - Swaps values-gcp-marketplace.yaml into values.yaml and archives file\nSets pom to build deployer image using Docker file\nSets pom install phase to build and deploy deployer image\nRemoved latest tag setting and default\nUpdated CircleCI logic to add additional . tag on release builds\n\nWhich issue(s) this PR fixes:\nPartially addresses #736\nSpecial notes for your reviewer:\nMarketplace provides a model tool 'mpdev' set to help check this.\nUsed mpdev install and verify to ensure deployer images and created resources operate appropriately in cluster.\nAlso looking into the details of ensuring the images from the staging repo are copied over the  marketplace grc\nItems left to be covered in #766\n\nResolve postgres repmgr password issues\nResolve pgpool startup issue\n\nChecklist\n\n Documentation added\n Tests updated", "createdAt": "2020-05-06T16:33:24Z", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740", "merged": true, "mergeCommit": {"oid": "6074e99b83e4d620b72e5af545de919a5870ccbc"}, "closed": true, "closedAt": "2020-05-20T04:38:49Z", "author": {"login": "Nana-EC"}, "timelineItems": {"totalCount": 52, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABce_OAuABqjMzMTM1MDIzMzQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABci9OEagFqTQxNDg5NTk3MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bc1b0b55f3ad42fd666bb8672c6ecceb86413213", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/bc1b0b55f3ad42fd666bb8672c6ecceb86413213", "committedDate": "2020-05-07T15:26:29Z", "message": "Merge branch 'helm-deployer-image' of https://github.com/hashgraph/hedera-mirror-node into helm-deployer-image"}, "afterCommit": {"oid": "19c65ee41a5d1333e0cfb755c5824ad75be968a9", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/19c65ee41a5d1333e0cfb755c5824ad75be968a9", "committedDate": "2020-05-07T15:41:44Z", "message": "Moved Dockerfile up a level\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA3NzQzNDgz", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#pullrequestreview-407743483", "createdAt": "2020-05-07T18:48:01Z", "commit": {"oid": "6da318eacde516514e59b7a3718269e04fc97197"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxODo1NDo1NlrOGSL8HA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxOTozMDozOFrOGSNItw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTcyMzE2NA==", "bodyText": "nit: hedera-mirror-node.tar.gz", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r421723164", "createdAt": "2020-05-07T18:54:56Z", "author": {"login": "apeksharma"}, "path": "hedera-mirror-gcp-marketplace/Dockerfile", "diffHunk": "@@ -0,0 +1,32 @@\n+FROM gcr.io/cloud-marketplace-tools/k8s/deployer_helm AS build\n+\n+## pull in chart, swap values file and archive chart\n+ADD chart /tmp/chart\n+RUN mv /tmp/chart/values-gcp-marketplace.yaml /tmp/chart/values.yaml\n+RUN cd /tmp && tar -czvf /tmp/hedera-mirror.tar.gz chart", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6da318eacde516514e59b7a3718269e04fc97197"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTcyMzMxOQ==", "bodyText": "remove unused code here and below", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r421723319", "createdAt": "2020-05-07T18:55:11Z", "author": {"login": "apeksharma"}, "path": "hedera-mirror-gcp-marketplace/Dockerfile", "diffHunk": "@@ -0,0 +1,32 @@\n+FROM gcr.io/cloud-marketplace-tools/k8s/deployer_helm AS build\n+\n+## pull in chart, swap values file and archive chart\n+ADD chart /tmp/chart\n+RUN mv /tmp/chart/values-gcp-marketplace.yaml /tmp/chart/values.yaml\n+RUN cd /tmp && tar -czvf /tmp/hedera-mirror.tar.gz chart\n+\n+##ADD apptest/deployer/hedera-mirror /tmp/test/chart", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6da318eacde516514e59b7a3718269e04fc97197"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTcyNTA4NQ==", "bodyText": "couldn't find REGISTRY in schema.yaml. what am i missing?", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r421725085", "createdAt": "2020-05-07T18:58:26Z", "author": {"login": "apeksharma"}, "path": "hedera-mirror-gcp-marketplace/Dockerfile", "diffHunk": "@@ -0,0 +1,32 @@\n+FROM gcr.io/cloud-marketplace-tools/k8s/deployer_helm AS build\n+\n+## pull in chart, swap values file and archive chart\n+ADD chart /tmp/chart\n+RUN mv /tmp/chart/values-gcp-marketplace.yaml /tmp/chart/values.yaml\n+RUN cd /tmp && tar -czvf /tmp/hedera-mirror.tar.gz chart\n+\n+##ADD apptest/deployer/hedera-mirror /tmp/test/chart\n+##RUN cd /tmp/test \\\n+##    && tar -czvf /tmp/test/hedera-mirror.tar.gz chart/\n+\n+ADD schema.yaml /tmp/schema.yaml\n+\n+ARG REGISTRY\n+ARG TAG\n+\n+RUN cat /tmp/schema.yaml \\\n+    | env -i \"REGISTRY=$REGISTRY\" \"TAG=$TAG\" envsubst \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6da318eacde516514e59b7a3718269e04fc97197"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTcyNzIxOQ==", "bodyText": "remove.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r421727219", "createdAt": "2020-05-07T19:02:13Z", "author": {"login": "apeksharma"}, "path": "hedera-mirror-gcp-marketplace/pom.xml", "diffHunk": "@@ -0,0 +1,87 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n+<project xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+\n+    <artifactId>hedera-mirror-gcp-marketplace</artifactId>\n+    <description>Google Cloud Platform Marketplace solution for the Hedera Mirror Node</description>\n+    <modelVersion>4.0.0</modelVersion>\n+    <name>Hedera Mirror Node GCP Marketplace</name>\n+    <packaging>pom</packaging>\n+\n+    <parent>\n+        <groupId>com.hedera</groupId>\n+        <artifactId>hedera-mirror-node</artifactId>\n+        <version>0.11.0-rc1</version>\n+    </parent>\n+\n+    <properties>\n+        <docker.buildArg.registry>${docker.push.repository}/hedera-mirror-node</docker.buildArg.registry>\n+        <docker.buildArg.tag>${gmp.track}</docker.buildArg.tag>\n+    </properties>\n+\n+    <build>\n+        <plugins>\n+            <plugin>\n+                <artifactId>maven-resources-plugin</artifactId>\n+                <version>3.1.0</version>\n+                <executions>\n+                    <execution>\n+                        <id>copy-chart</id>\n+                        <!-- here the phase you need -->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6da318eacde516514e59b7a3718269e04fc97197"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTczNDgyMg==", "bodyText": "can be removed?", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r421734822", "createdAt": "2020-05-07T19:15:59Z", "author": {"login": "apeksharma"}, "path": "charts/hedera-mirror/values-gcp-marketplace.yaml", "diffHunk": "@@ -0,0 +1,86 @@\n+#properties:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6da318eacde516514e59b7a3718269e04fc97197"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTc0MDkwOQ==", "bodyText": "properties (global scope) are not good way, please use plugin's configuration to pass args to the docker build.\nhttps://dmp.fabric8.io/#build-buildargs", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r421740909", "createdAt": "2020-05-07T19:27:09Z", "author": {"login": "apeksharma"}, "path": "hedera-mirror-gcp-marketplace/pom.xml", "diffHunk": "@@ -0,0 +1,87 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n+<project xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+\n+    <artifactId>hedera-mirror-gcp-marketplace</artifactId>\n+    <description>Google Cloud Platform Marketplace solution for the Hedera Mirror Node</description>\n+    <modelVersion>4.0.0</modelVersion>\n+    <name>Hedera Mirror Node GCP Marketplace</name>\n+    <packaging>pom</packaging>\n+\n+    <parent>\n+        <groupId>com.hedera</groupId>\n+        <artifactId>hedera-mirror-node</artifactId>\n+        <version>0.11.0-rc1</version>\n+    </parent>\n+\n+    <properties>\n+        <docker.buildArg.registry>${docker.push.repository}/hedera-mirror-node</docker.buildArg.registry>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6da318eacde516514e59b7a3718269e04fc97197"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTc0MTkwNA==", "bodyText": "We should keep all marketplace related files in single place. schema.yaml here and values-....yaml in other folder should be in single place.\nWe can keep them both in charts/mirror-node/marketplace/....", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r421741904", "createdAt": "2020-05-07T19:28:58Z", "author": {"login": "apeksharma"}, "path": "hedera-mirror-gcp-marketplace/schema.yaml", "diffHunk": "@@ -0,0 +1,89 @@\n+x-google-marketplace:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6da318eacde516514e59b7a3718269e04fc97197"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTc0Mjc3NQ==", "bodyText": "what's the significance of this?\nAlso, not used in multiple poms, please move it to the single pom using it.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r421742775", "createdAt": "2020-05-07T19:30:38Z", "author": {"login": "apeksharma"}, "path": "pom.xml", "diffHunk": "@@ -57,6 +58,7 @@\n         <docker.push.repository>gcr.io/mirrornode</docker.push.repository>\n         <docker.tag.version>${project.version}</docker.tag.version>\n         <docker.tag.latest>latest</docker.tag.latest>\n+        <gmp.track>0.11</gmp.track>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6da318eacde516514e59b7a3718269e04fc97197"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA3Nzc5MDc3", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#pullrequestreview-407779077", "createdAt": "2020-05-07T19:39:57Z", "commit": {"oid": "6da318eacde516514e59b7a3718269e04fc97197"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxOTozOTo1N1rOGSNceg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxOTo0MjozMFrOGSNh8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTc0NzgzNA==", "bodyText": "Use COPY\nhttps://docs.docker.com/develop/develop-images/dockerfile_best-practices/#add-or-copy", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r421747834", "createdAt": "2020-05-07T19:39:57Z", "author": {"login": "apeksharma"}, "path": "hedera-mirror-gcp-marketplace/Dockerfile", "diffHunk": "@@ -0,0 +1,32 @@\n+FROM gcr.io/cloud-marketplace-tools/k8s/deployer_helm AS build\n+\n+## pull in chart, swap values file and archive chart\n+ADD chart /tmp/chart", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6da318eacde516514e59b7a3718269e04fc97197"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTc0OTIzNA==", "bodyText": "no need of this plugin just to copy dir.\nPass ${project.basedir}/../charts/hedera-mirror as arg srcChartDir to docker builder, and in Dockerfile use COPY ${srcChartDir} <to>", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r421749234", "createdAt": "2020-05-07T19:42:30Z", "author": {"login": "apeksharma"}, "path": "hedera-mirror-gcp-marketplace/pom.xml", "diffHunk": "@@ -0,0 +1,87 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n+<project xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+\n+    <artifactId>hedera-mirror-gcp-marketplace</artifactId>\n+    <description>Google Cloud Platform Marketplace solution for the Hedera Mirror Node</description>\n+    <modelVersion>4.0.0</modelVersion>\n+    <name>Hedera Mirror Node GCP Marketplace</name>\n+    <packaging>pom</packaging>\n+\n+    <parent>\n+        <groupId>com.hedera</groupId>\n+        <artifactId>hedera-mirror-node</artifactId>\n+        <version>0.11.0-rc1</version>\n+    </parent>\n+\n+    <properties>\n+        <docker.buildArg.registry>${docker.push.repository}/hedera-mirror-node</docker.buildArg.registry>\n+        <docker.buildArg.tag>${gmp.track}</docker.buildArg.tag>\n+    </properties>\n+\n+    <build>\n+        <plugins>\n+            <plugin>\n+                <artifactId>maven-resources-plugin</artifactId>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6da318eacde516514e59b7a3718269e04fc97197"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA3ODg2MDEx", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#pullrequestreview-407886011", "createdAt": "2020-05-07T22:41:35Z", "commit": {"oid": "6da318eacde516514e59b7a3718269e04fc97197"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QyMjo0MTozNVrOGSSynw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QyMjo0MTozNVrOGSSynw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgzNTQyMw==", "bodyText": "share common parts of this plugin with Rest module by adding to pluginManagement in root pom.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r421835423", "createdAt": "2020-05-07T22:41:35Z", "author": {"login": "apeksharma"}, "path": "hedera-mirror-gcp-marketplace/pom.xml", "diffHunk": "@@ -0,0 +1,87 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n+<project xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+\n+    <artifactId>hedera-mirror-gcp-marketplace</artifactId>\n+    <description>Google Cloud Platform Marketplace solution for the Hedera Mirror Node</description>\n+    <modelVersion>4.0.0</modelVersion>\n+    <name>Hedera Mirror Node GCP Marketplace</name>\n+    <packaging>pom</packaging>\n+\n+    <parent>\n+        <groupId>com.hedera</groupId>\n+        <artifactId>hedera-mirror-node</artifactId>\n+        <version>0.11.0-rc1</version>\n+    </parent>\n+\n+    <properties>\n+        <docker.buildArg.registry>${docker.push.repository}/hedera-mirror-node</docker.buildArg.registry>\n+        <docker.buildArg.tag>${gmp.track}</docker.buildArg.tag>\n+    </properties>\n+\n+    <build>\n+        <plugins>\n+            <plugin>\n+                <artifactId>maven-resources-plugin</artifactId>\n+                <version>3.1.0</version>\n+                <executions>\n+                    <execution>\n+                        <id>copy-chart</id>\n+                        <!-- here the phase you need -->\n+                        <phase>install</phase>\n+                        <goals>\n+                            <goal>copy-resources</goal>\n+                        </goals>\n+                        <configuration>\n+                            <outputDirectory>${basedir}/chart</outputDirectory>\n+                            <resources>\n+                                <resource>\n+                                    <directory>${project.basedir}/../charts/hedera-mirror</directory>\n+                                    <filtering>true</filtering>\n+                                </resource>\n+                            </resources>\n+                        </configuration>\n+                    </execution>\n+                </executions>\n+            </plugin>\n+            <plugin>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6da318eacde516514e59b7a3718269e04fc97197"}, "originalPosition": 47}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c756693a9494074f7776d303505450da726890e7", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/c756693a9494074f7776d303505450da726890e7", "committedDate": "2020-05-13T22:41:30Z", "message": "Added deployer folder structure with schema and docker file\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "90d9445e848845cc09eec2ae6d79292380fc5ba3", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/90d9445e848845cc09eec2ae6d79292380fc5ba3", "committedDate": "2020-05-13T22:41:30Z", "message": "Removed application.yaml and Makefile and updated image urls in values\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1bf9791817384cc928d8a45a279ad651b87e2adb", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/1bf9791817384cc928d8a45a279ad651b87e2adb", "committedDate": "2020-05-13T22:42:55Z", "message": "Configure pom to create gmp deployer image\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "291a2cc414b1156947d4931ae3715cdae5e46d75", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/291a2cc414b1156947d4931ae3715cdae5e46d75", "committedDate": "2020-05-13T22:42:56Z", "message": "Added pom to marketplace dir and updated build args\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "54d6323039aad8581ff58e4685d25093d07b25de", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/54d6323039aad8581ff58e4685d25093d07b25de", "committedDate": "2020-05-13T22:42:56Z", "message": "Added missing submodule reference to base pom\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "54d0f6cea64faa3a8d9ce3080a6d08e421325ab1", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/54d0f6cea64faa3a8d9ce3080a6d08e421325ab1", "committedDate": "2020-05-13T22:42:56Z", "message": "Fixed dockerfile location\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9fb7d6471c6bdb6961c89290d5c1112d4c80ef43", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/9fb7d6471c6bdb6961c89290d5c1112d4c80ef43", "committedDate": "2020-05-13T22:42:56Z", "message": "Moved Dockerfile up a level\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b02c8e5c6e60346345f70ef2e8b49094a84a073e", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/b02c8e5c6e60346345f70ef2e8b49094a84a073e", "committedDate": "2020-05-13T22:42:56Z", "message": "Verify current docker context\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6de4fcdef177b76ae34419b44aab0b6e126e8855", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/6de4fcdef177b76ae34419b44aab0b6e126e8855", "committedDate": "2020-05-13T22:42:56Z", "message": "Added maven dockerignore file\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "974a7e3bc73c083f1cd4b926b63014fc1cd80df7", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/974a7e3bc73c083f1cd4b926b63014fc1cd80df7", "committedDate": "2020-05-13T22:42:56Z", "message": "Updated docker ignore target path\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "465b76fa455f2210fb766dd5a1eec6904581d8c8", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/465b76fa455f2210fb766dd5a1eec6904581d8c8", "committedDate": "2020-05-13T22:42:56Z", "message": "Updated pom to copy chart in and use appropraite build context\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bcdaf7a70898f68ff41a75ff0653c88f045dd60b", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/bcdaf7a70898f68ff41a75ff0653c88f045dd60b", "committedDate": "2020-05-13T22:42:56Z", "message": "Updated ignore files and correct repo path\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9043ded043712e9de32ac96fd7207ff479331f6c", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/9043ded043712e9de32ac96fd7207ff479331f6c", "committedDate": "2020-05-13T22:42:56Z", "message": "Added deployer folder structure with schema and docker file\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1c1c235b3ce4ccbcf5a79ccc38dfcd547d7b84b6", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/1c1c235b3ce4ccbcf5a79ccc38dfcd547d7b84b6", "committedDate": "2020-05-13T22:42:56Z", "message": "Removed application.yaml and Makefile and updated image urls in values\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "32c3297d7208966b3585f005d0a98706fd12ea89", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/32c3297d7208966b3585f005d0a98706fd12ea89", "committedDate": "2020-05-13T22:42:56Z", "message": "Configure pom to create gmp deployer image\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d7db3f1a322feb763baef08b55b496fc1aae8289", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/d7db3f1a322feb763baef08b55b496fc1aae8289", "committedDate": "2020-05-13T22:42:56Z", "message": "Added pom to marketplace dir and updated build args\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6c115218f737757aa4ad8e72220d905e962a815f", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/6c115218f737757aa4ad8e72220d905e962a815f", "committedDate": "2020-05-13T22:42:56Z", "message": "Moved Dockerfile up a level\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "283ce45b789c620bb831ae3a0bb939e8455f183d", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/283ce45b789c620bb831ae3a0bb939e8455f183d", "committedDate": "2020-05-13T22:42:56Z", "message": "Fixed schema duplicate from rebasing\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "85b5b156ef7e81fee9a5758a66fe8a59253cb2fe", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/85b5b156ef7e81fee9a5758a66fe8a59253cb2fe", "committedDate": "2020-05-13T22:42:56Z", "message": "Fixed pom version mismatch from rebase\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c2d5d0ea9822192b8ad4d97c13c3298143dbdcb", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/0c2d5d0ea9822192b8ad4d97c13c3298143dbdcb", "committedDate": "2020-05-13T22:42:56Z", "message": "Updated tagging logic in circle ci and pom. Also put some base wording for README\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "266283426c5d1bddb9facbd9ee1ff1aa62fb06e3", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/266283426c5d1bddb9facbd9ee1ff1aa62fb06e3", "committedDate": "2020-05-13T22:42:57Z", "message": "Moved docker build args up to configurable properties\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a1cb8a94590fa2a269c511391bb8b4d1e47a6419", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/a1cb8a94590fa2a269c511391bb8b4d1e47a6419", "committedDate": "2020-05-13T22:44:01Z", "message": "Updated marketplace tag value and pushed schema.yaml to /data-test also\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0eccc357d53444c480d1aede6be87138d4c1672a", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/0eccc357d53444c480d1aede6be87138d4c1672a", "committedDate": "2020-05-13T22:44:01Z", "message": "Create /data-test folder for schema\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b86420f875c59c2e4ea0b853930a2ceabff08d3", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/7b86420f875c59c2e4ea0b853930a2ceabff08d3", "committedDate": "2020-05-13T22:44:01Z", "message": "Modified mv to copy for data-test schema\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "45529babe9d73ea3f9b6fbc62a523fe5c57391b0", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/45529babe9d73ea3f9b6fbc62a523fe5c57391b0", "committedDate": "2020-05-13T22:44:01Z", "message": "Deployer image modifications 1\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "27db2f5210aeaf8ea6484fc7333959e4797212b8", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/27db2f5210aeaf8ea6484fc7333959e4797212b8", "committedDate": "2020-05-13T22:44:22Z", "message": "Updated templates and Dockerfile to support deployer rollout\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc40842a466cb7ca3f1d04f65445babaae652db1", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/cc40842a466cb7ca3f1d04f65445babaae652db1", "committedDate": "2020-05-13T22:44:52Z", "message": "Cleaned up and shared some code in pom\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3705e7840e4c413985f846655199c4686f157a5b", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/3705e7840e4c413985f846655199c4686f157a5b", "committedDate": "2020-05-13T22:36:32Z", "message": "Cleaned up and shared some code in pom\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}, "afterCommit": {"oid": "cc40842a466cb7ca3f1d04f65445babaae652db1", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/cc40842a466cb7ca3f1d04f65445babaae652db1", "committedDate": "2020-05-13T22:44:52Z", "message": "Cleaned up and shared some code in pom\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExMzY4Njk5", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#pullrequestreview-411368699", "createdAt": "2020-05-13T23:32:20Z", "commit": {"oid": "cc40842a466cb7ca3f1d04f65445babaae652db1"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QyMzozMjoyMFrOGVHDYw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQwMDoyNzoyM1rOGVICMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDc4ODgzNQ==", "bodyText": "not being used anywhere?", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r424788835", "createdAt": "2020-05-13T23:32:20Z", "author": {"login": "apeksharma"}, "path": "pom.xml", "diffHunk": "@@ -59,7 +60,9 @@\n         <docker.resources>${project.build.directory}/container</docker.resources>\n         <docker.tag.version>${project.version}</docker.tag.version>\n         <docker.tag.latest>latest</docker.tag.latest>\n+        <gmp.track>0.11.0</gmp.track>\n         <grpc.version>1.29.0</grpc.version>\n+        <guava.version>28.2-jre</guava.version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc40842a466cb7ca3f1d04f65445babaae652db1"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDgwMTk4MA==", "bodyText": "I was thinking of something like this 1351c54  if you guys okay with keeping all marketplace stuff (values and schema) together in charts/marketplace/...", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r424801980", "createdAt": "2020-05-14T00:16:50Z", "author": {"login": "apeksharma"}, "path": "hedera-mirror-gcp-marketplace/pom.xml", "diffHunk": "@@ -0,0 +1,87 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n+<project xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+\n+    <artifactId>hedera-mirror-gcp-marketplace</artifactId>\n+    <description>Google Cloud Platform Marketplace solution for the Hedera Mirror Node</description>\n+    <modelVersion>4.0.0</modelVersion>\n+    <name>Hedera Mirror Node GCP Marketplace</name>\n+    <packaging>pom</packaging>\n+\n+    <parent>\n+        <groupId>com.hedera</groupId>\n+        <artifactId>hedera-mirror-node</artifactId>\n+        <version>0.11.0-rc1</version>\n+    </parent>\n+\n+    <properties>\n+        <docker.buildArg.registry>${docker.push.repository}/hedera-mirror-node</docker.buildArg.registry>\n+        <docker.buildArg.tag>${gmp.track}</docker.buildArg.tag>\n+    </properties>\n+\n+    <build>\n+        <plugins>\n+            <plugin>\n+                <artifactId>maven-resources-plugin</artifactId>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTc0OTIzNA=="}, "originalCommit": {"oid": "6da318eacde516514e59b7a3718269e04fc97197"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDgwMjA1Mg==", "bodyText": "no need to specify dockerFile if it's directly under contextDir", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r424802052", "createdAt": "2020-05-14T00:17:06Z", "author": {"login": "apeksharma"}, "path": "hedera-mirror-gcp-marketplace/pom.xml", "diffHunk": "@@ -0,0 +1,65 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n+<project xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+\n+    <artifactId>hedera-mirror-gcp-marketplace</artifactId>\n+    <description>Google Cloud Platform Marketplace solution for the Hedera Mirror Node</description>\n+    <modelVersion>4.0.0</modelVersion>\n+    <name>Hedera Mirror Node GCP Marketplace</name>\n+    <packaging>pom</packaging>\n+\n+    <parent>\n+        <groupId>com.hedera</groupId>\n+        <artifactId>hedera-mirror-node</artifactId>\n+        <version>0.11.0-rc1</version>\n+    </parent>\n+\n+    <build>\n+        <plugins>\n+            <plugin>\n+                <artifactId>maven-resources-plugin</artifactId>\n+                <version>3.1.0</version>\n+                <executions>\n+                    <execution>\n+                        <id>copy-chart</id>\n+                        <phase>install</phase>\n+                        <goals>\n+                            <goal>copy-resources</goal>\n+                        </goals>\n+                        <configuration>\n+                            <outputDirectory>${basedir}/chart</outputDirectory>\n+                            <resources>\n+                                <resource>\n+                                    <directory>${project.basedir}/../charts/hedera-mirror</directory>\n+                                </resource>\n+                            </resources>\n+                        </configuration>\n+                    </execution>\n+                </executions>\n+            </plugin>\n+            <plugin>\n+                <groupId>io.fabric8</groupId>\n+                <artifactId>docker-maven-plugin</artifactId>\n+                <configuration>\n+                    <images>\n+                        <image>\n+                            <build>\n+                                <contextDir>${project.basedir}/</contextDir>\n+                                <dockerFile>${project.basedir}/Dockerfile</dockerFile>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc40842a466cb7ca3f1d04f65445babaae652db1"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDgwMjQ2Ng==", "bodyText": "delete /tmp dir in the end", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r424802466", "createdAt": "2020-05-14T00:18:38Z", "author": {"login": "apeksharma"}, "path": "hedera-mirror-gcp-marketplace/Dockerfile", "diffHunk": "@@ -0,0 +1,32 @@\n+FROM gcr.io/cloud-marketplace-tools/k8s/deployer_helm AS build\n+\n+## pull in chart\n+COPY chart /tmp/chart\n+\n+# get yq and merge values files\n+RUN apt-get update \\\n+    && apt-get install -y --no-install-recommends software-properties-common \\\n+    && add-apt-repository ppa:rmescandon/yq\n+RUN apt update && apt install -y --no-install-recommends yq\n+RUN yq m -x /tmp/chart/values.yaml /tmp/chart/values-marketplace.yaml > /tmp/chart/values-merged.yaml\n+\n+# helm template to render and verify templates\n+RUN helm template /tmp/chart -f /tmp/chart/values-merged.yaml\n+\n+# overwrite values file and archive\n+RUN mv /tmp/chart/values-merged.yaml /tmp/chart/values.yaml\n+RUN cd /tmp && tar -czvf /tmp/hedera-mirror-node.tar.gz chart/\n+\n+# Pull in and update schema for marketplace deployer\n+ARG tag\n+COPY schema.yaml /tmp/schema.yaml\n+RUN cat /tmp/schema.yaml \\\n+    | env -i \"TAG=$tag\" envsubst \\\n+    > /tmp/schema.yaml.new \\\n+    && mv /tmp/schema.yaml.new /tmp/schema.yaml\n+\n+# move chart and schema to expected /data folder structure\n+RUN mv /tmp/hedera-mirror-node.tar.gz /data/chart/\n+RUN mv /tmp/schema.yaml /data/schema.yaml\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc40842a466cb7ca3f1d04f65445babaae652db1"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDgwMzEyMQ==", "bodyText": "Why not directly write to /data/schema.yml rather than write to x, move to y, then move to z.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r424803121", "createdAt": "2020-05-14T00:20:58Z", "author": {"login": "apeksharma"}, "path": "hedera-mirror-gcp-marketplace/Dockerfile", "diffHunk": "@@ -0,0 +1,32 @@\n+FROM gcr.io/cloud-marketplace-tools/k8s/deployer_helm AS build\n+\n+## pull in chart\n+COPY chart /tmp/chart\n+\n+# get yq and merge values files\n+RUN apt-get update \\\n+    && apt-get install -y --no-install-recommends software-properties-common \\\n+    && add-apt-repository ppa:rmescandon/yq\n+RUN apt update && apt install -y --no-install-recommends yq\n+RUN yq m -x /tmp/chart/values.yaml /tmp/chart/values-marketplace.yaml > /tmp/chart/values-merged.yaml\n+\n+# helm template to render and verify templates\n+RUN helm template /tmp/chart -f /tmp/chart/values-merged.yaml\n+\n+# overwrite values file and archive\n+RUN mv /tmp/chart/values-merged.yaml /tmp/chart/values.yaml\n+RUN cd /tmp && tar -czvf /tmp/hedera-mirror-node.tar.gz chart/\n+\n+# Pull in and update schema for marketplace deployer\n+ARG tag\n+COPY schema.yaml /tmp/schema.yaml\n+RUN cat /tmp/schema.yaml \\\n+    | env -i \"TAG=$tag\" envsubst \\\n+    > /tmp/schema.yaml.new \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc40842a466cb7ca3f1d04f65445babaae652db1"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDgwNDAwMA==", "bodyText": "'tag' is very overloaded right now.\nWe can rename just the arg to its purpose - 'publishedVersion' or something more specific.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r424804000", "createdAt": "2020-05-14T00:24:14Z", "author": {"login": "apeksharma"}, "path": "hedera-mirror-gcp-marketplace/pom.xml", "diffHunk": "@@ -0,0 +1,65 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n+<project xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+\n+    <artifactId>hedera-mirror-gcp-marketplace</artifactId>\n+    <description>Google Cloud Platform Marketplace solution for the Hedera Mirror Node</description>\n+    <modelVersion>4.0.0</modelVersion>\n+    <name>Hedera Mirror Node GCP Marketplace</name>\n+    <packaging>pom</packaging>\n+\n+    <parent>\n+        <groupId>com.hedera</groupId>\n+        <artifactId>hedera-mirror-node</artifactId>\n+        <version>0.11.0-rc1</version>\n+    </parent>\n+\n+    <build>\n+        <plugins>\n+            <plugin>\n+                <artifactId>maven-resources-plugin</artifactId>\n+                <version>3.1.0</version>\n+                <executions>\n+                    <execution>\n+                        <id>copy-chart</id>\n+                        <phase>install</phase>\n+                        <goals>\n+                            <goal>copy-resources</goal>\n+                        </goals>\n+                        <configuration>\n+                            <outputDirectory>${basedir}/chart</outputDirectory>\n+                            <resources>\n+                                <resource>\n+                                    <directory>${project.basedir}/../charts/hedera-mirror</directory>\n+                                </resource>\n+                            </resources>\n+                        </configuration>\n+                    </execution>\n+                </executions>\n+            </plugin>\n+            <plugin>\n+                <groupId>io.fabric8</groupId>\n+                <artifactId>docker-maven-plugin</artifactId>\n+                <configuration>\n+                    <images>\n+                        <image>\n+                            <build>\n+                                <contextDir>${project.basedir}/</contextDir>\n+                                <dockerFile>${project.basedir}/Dockerfile</dockerFile>\n+                                <nocache>true</nocache>\n+                                <assembly>\n+                                    <exportTargetDir>false</exportTargetDir>\n+                                </assembly>\n+                                <args>\n+                                    <tag>${docker.tag.version}</tag>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc40842a466cb7ca3f1d04f65445babaae652db1"}, "originalPosition": 54}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDgwNDkxMw==", "bodyText": "remove Dockerfile from ignore list. let it be sent with the context.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r424804913", "createdAt": "2020-05-14T00:27:23Z", "author": {"login": "apeksharma"}, "path": "hedera-mirror-gcp-marketplace/.maven-dockerignore", "diffHunk": "@@ -0,0 +1,2 @@\n+Dockerfile", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc40842a466cb7ca3f1d04f65445babaae652db1"}, "originalPosition": 1}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6189a45010b22513865d2f7aaf4ab6f30646311f", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/6189a45010b22513865d2f7aaf4ab6f30646311f", "committedDate": "2020-05-14T14:09:35Z", "message": "Cleanup up circle ci and chart configs\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExOTMyODIw", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#pullrequestreview-411932820", "createdAt": "2020-05-14T15:39:22Z", "commit": {"oid": "6189a45010b22513865d2f7aaf4ab6f30646311f"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxNTo0NTo0MFrOGVikqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxNTo1ODo1MlrOGVjK7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTIzOTcyMA==", "bodyText": "Might be a merge issue when I rebased. Not a part of my changes. I can remove it since I see it specified in the importer.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r425239720", "createdAt": "2020-05-14T15:45:40Z", "author": {"login": "Nana-EC"}, "path": "pom.xml", "diffHunk": "@@ -59,7 +60,9 @@\n         <docker.resources>${project.build.directory}/container</docker.resources>\n         <docker.tag.version>${project.version}</docker.tag.version>\n         <docker.tag.latest>latest</docker.tag.latest>\n+        <gmp.track>0.11.0</gmp.track>\n         <grpc.version>1.29.0</grpc.version>\n+        <guava.version>28.2-jre</guava.version>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDc4ODgzNQ=="}, "originalCommit": {"oid": "cc40842a466cb7ca3f1d04f65445babaae652db1"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTI0OTUxNg==", "bodyText": "Will figure out how to not have to hard code this.\nThe json parser marketplace uses wouldn't accept {{ .Values }} so I did this as a work around. Lots of other solution also hard code these as they don't change often.\nWill come back to it", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r425249516", "createdAt": "2020-05-14T15:58:52Z", "author": {"login": "Nana-EC"}, "path": "charts/hedera-mirror/templates/application.yaml", "diffHunk": "@@ -4,40 +4,34 @@ kind: Application\n metadata:\n   annotations:\n     kubernetes-engine.cloud.google.com/icon: data:image/png;base64,{{ .Files.Get \"logo.png\" | b64enc }}\n-    marketplace.cloud.google.com/deploy-info: |-\n-      {\n-        partner_id: {{ .Values.applicationResource.partnerId | quote }},\n-        partner_name: {{ .Values.applicationResource.partnerName | quote }},\n-        product_id: {{ .Values.applicationResource.productId | quote }}\n-      }\n+    marketplace.cloud.google.com/deploy-info: '{ \"partner_id\": \"hederaPartnerId\", \"partner_name\": \"partner_name\", \"product_id\": \"hederaMirrorSolutionId\" }'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6189a45010b22513865d2f7aaf4ab6f30646311f"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ad2b08a3b7d4c4411aba12a34c27de65be73002", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/3ad2b08a3b7d4c4411aba12a34c27de65be73002", "committedDate": "2020-05-14T17:42:05Z", "message": "Addressed Appy feedback\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA3OTAyNzIz", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#pullrequestreview-407902723", "createdAt": "2020-05-07T23:26:35Z", "commit": {"oid": "6da318eacde516514e59b7a3718269e04fc97197"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 27, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxNDo0MzozNVrOGVfr8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxNzo0NzowNlrOGVnnqw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTE5MjQzNQ==", "bodyText": "This if should be around the export SERVICE_IP and grafana sections as well", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r425192435", "createdAt": "2020-05-14T14:43:35Z", "author": {"login": "steven-sheehy"}, "path": "charts/hedera-mirror/templates/NOTES.txt", "diffHunk": "@@ -3,11 +3,13 @@ Hedera Mirror Node {{ .Chart.AppVersion }} successfully installed.\n To get the load balancer IP:\n   export SERVICE_IP=$(kubectl get svc -n {{ include \"hedera-mirror.namespace\" . }} {{ .Values.traefik.fullnameOverride }} -o jsonpath=\"{.status.loadBalancer.ingress[0].ip}\")\n \n+{{ if and .Values.traefik.enabled -}}\n To access the GRPC API:\n   grpcurl -plaintext ${SERVICE_IP}:{{ .Values.traefik.ports.web.exposedPort }} list\n \n To access the REST API:\n   curl -s \"http://${SERVICE_IP}:{{ .Values.traefik.ports.web.exposedPort }}/api/v1/transactions?limit=1\"\n+{{- end -}}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6189a45010b22513865d2f7aaf4ab6f30646311f"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTE5MjgzOQ==", "bodyText": "This can probably stay {{ include \"hedera-mirror.namespace\" . }}", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r425192839", "createdAt": "2020-05-14T14:44:09Z", "author": {"login": "steven-sheehy"}, "path": "charts/hedera-mirror/templates/application.yaml", "diffHunk": "@@ -4,40 +4,34 @@ kind: Application\n metadata:\n   annotations:\n     kubernetes-engine.cloud.google.com/icon: data:image/png;base64,{{ .Files.Get \"logo.png\" | b64enc }}\n-    marketplace.cloud.google.com/deploy-info: |-\n-      {\n-        partner_id: {{ .Values.applicationResource.partnerId | quote }},\n-        partner_name: {{ .Values.applicationResource.partnerName | quote }},\n-        product_id: {{ .Values.applicationResource.productId | quote }}\n-      }\n+    marketplace.cloud.google.com/deploy-info: '{ \"partner_id\": \"hederaPartnerId\", \"partner_name\": \"partner_name\", \"product_id\": \"hederaMirrorSolutionId\" }'\n   labels:\n     {{- include \"hedera-mirror.labels\" . | nindent 4 }}\n-  name: {{ include \"hedera-mirror.fullname\" . }}\n-  namespace: {{ include \"hedera-mirror.namespace\" . }}\n+    app.kubernetes.io/name: {{ .Release.Name }}\n+  name: {{ .Release.Name }}\n+  namespace: {{ .Release.Namespace }}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6189a45010b22513865d2f7aaf4ab6f30646311f"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTE5NDQ4OQ==", "bodyText": "All of the plugin declaration in child pom can be removed except the groupId and artifactId", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r425194489", "createdAt": "2020-05-14T14:46:13Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-rest/pom.xml", "diffHunk": "@@ -37,13 +37,6 @@\n                 <configuration>\n                     <images>\n                         <image>\n-                            <build>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6189a45010b22513865d2f7aaf4ab6f30646311f"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTI1NjE1OA==", "bodyText": "Rest of file is sorted. Would prefer new elements sorted as well.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r425256158", "createdAt": "2020-05-14T16:08:16Z", "author": {"login": "steven-sheehy"}, "path": "charts/hedera-mirror/values.yaml", "diffHunk": "@@ -350,3 +350,6 @@ traefik:\n     - name: traefik\n       mountPath: /etc/traefik/\n       type: configMap\n+\n+priorityClass:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6189a45010b22513865d2f7aaf4ab6f30646311f"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTI1Nzg5OQ==", "bodyText": "These should be templated", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r425257899", "createdAt": "2020-05-14T16:10:47Z", "author": {"login": "steven-sheehy"}, "path": "charts/hedera-mirror/templates/application.yaml", "diffHunk": "@@ -4,40 +4,34 @@ kind: Application\n metadata:\n   annotations:\n     kubernetes-engine.cloud.google.com/icon: data:image/png;base64,{{ .Files.Get \"logo.png\" | b64enc }}\n-    marketplace.cloud.google.com/deploy-info: |-\n-      {\n-        partner_id: {{ .Values.applicationResource.partnerId | quote }},\n-        partner_name: {{ .Values.applicationResource.partnerName | quote }},\n-        product_id: {{ .Values.applicationResource.productId | quote }}\n-      }\n+    marketplace.cloud.google.com/deploy-info: '{ \"partner_id\": \"hederaPartnerId\", \"partner_name\": \"partner_name\", \"product_id\": \"hederaMirrorSolutionId\" }'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6189a45010b22513865d2f7aaf4ab6f30646311f"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTI1ODk4NA==", "bodyText": "This is already the value in values.yaml, no need to duplicate", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r425258984", "createdAt": "2020-05-14T16:12:22Z", "author": {"login": "steven-sheehy"}, "path": "charts/hedera-mirror/values-marketplace.yaml", "diffHunk": "@@ -9,28 +30,66 @@ grpc:\n     create: false\n   serviceMonitor:\n     enabled: false\n+  image:\n+    repository: gcr.io/mirrornode/hedera-mirror-node/grpc\n+    <<: *versiontag\n+  service:\n+    type: LoadBalancer\n+\n importer:\n   podMonitor:\n     enabled: false\n+  priorityClassName: \"\"\n   rbac:\n     enabled: false\n   replicas: 1\n   serviceAccount:\n     create: false\n+  image:\n+    repository: gcr.io/mirrornode/hedera-mirror-node/importer\n+    <<: *versiontag\n+\n+labels: {}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6189a45010b22513865d2f7aaf4ab6f30646311f"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTI1OTA2OQ==", "bodyText": "This is already the value in values.yaml, no need to duplicate", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r425259069", "createdAt": "2020-05-14T16:12:31Z", "author": {"login": "steven-sheehy"}, "path": "charts/hedera-mirror/values-marketplace.yaml", "diffHunk": "@@ -9,28 +30,66 @@ grpc:\n     create: false\n   serviceMonitor:\n     enabled: false\n+  image:\n+    repository: gcr.io/mirrornode/hedera-mirror-node/grpc\n+    <<: *versiontag\n+  service:\n+    type: LoadBalancer\n+\n importer:\n   podMonitor:\n     enabled: false\n+  priorityClassName: \"\"\n   rbac:\n     enabled: false\n   replicas: 1\n   serviceAccount:\n     create: false\n+  image:\n+    repository: gcr.io/mirrornode/hedera-mirror-node/importer\n+    <<: *versiontag\n+\n+labels: {}\n+\n loki:\n   enabled: false\n+\n+networkPolicy:\n+  enabled: false", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6189a45010b22513865d2f7aaf4ab6f30646311f"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTI2MTE3NA==", "bodyText": "Don't like the name gmp.track. Also, tagging latest minor version has value even for non marketplace deployments. Would suggest docker.tag.minor", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r425261174", "createdAt": "2020-05-14T16:15:33Z", "author": {"login": "steven-sheehy"}, "path": "pom.xml", "diffHunk": "@@ -59,7 +60,9 @@\n         <docker.resources>${project.build.directory}/container</docker.resources>\n         <docker.tag.version>${project.version}</docker.tag.version>\n         <docker.tag.latest>latest</docker.tag.latest>\n+        <gmp.track>0.11.0</gmp.track>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6189a45010b22513865d2f7aaf4ab6f30646311f"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTI2MTcxNQ==", "bodyText": "How would this value get handled for master tags?", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r425261715", "createdAt": "2020-05-14T16:16:15Z", "author": {"login": "steven-sheehy"}, "path": "pom.xml", "diffHunk": "@@ -185,6 +188,7 @@\n                             <tags>\n                                 <tag>${docker.tag.latest}</tag>\n                                 <tag>${docker.tag.version}</tag>\n+                                <tag>${gmp.track}</tag>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6189a45010b22513865d2f7aaf4ab6f30646311f"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTI2OTU0Nw==", "bodyText": "Shouldn't this be separated into pgpool and postgresql image sections?", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r425269547", "createdAt": "2020-05-14T16:25:47Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-gcp-marketplace/schema.yaml", "diffHunk": "@@ -0,0 +1,80 @@\n+x-google-marketplace:\n+  schemaVersion: v2\n+\n+  applicationApiVersion: v1beta1\n+\n+  # The release version, MUST match the release tag on the the deployer.\n+  publishedVersion: \"$TAG\"\n+  publishedVersionMetadata:\n+    releaseNote: >-\n+      A mirror-node update.\n+    # releaseTypes list is optional. Feature | BugFix | Security\n+    # \"Security\" should only be used if this is an important update to patch\n+    # an existing vulnerability, as such updates will display more prominently for users.\n+    releaseTypes:\n+      - Feature\n+    # If \"recommended\" is \"true\", users using older releases are encouraged\n+    # to update as soon as possible. This is useful if, for example, this release\n+    # fixes a critical issue.\n+    recommended: false\n+\n+  # images for subcharts. Primary image is importer\n+  images:\n+    '':\n+      properties:\n+        mirrornode.image.repository:\n+          type: REPO_WITH_REGISTRY\n+        mirrornode.image.tag:\n+          type: TAG\n+    grpc:\n+      properties:\n+        grpc.image.repository:\n+          type: REPO_WITH_REGISTRY\n+        grpc.image.tag:\n+          type: TAG\n+    rest:\n+      properties:\n+        rest.image.repository:\n+          type: REPO_WITH_REGISTRY\n+        rest.image.tag:\n+          type: TAG\n+    postgresql:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6189a45010b22513865d2f7aaf4ab6f30646311f"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTI3MDk4OQ==", "bodyText": "Initial release of the Hedera Mirror Node", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r425270989", "createdAt": "2020-05-14T16:27:24Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-gcp-marketplace/schema.yaml", "diffHunk": "@@ -0,0 +1,80 @@\n+x-google-marketplace:\n+  schemaVersion: v2\n+\n+  applicationApiVersion: v1beta1\n+\n+  # The release version, MUST match the release tag on the the deployer.\n+  publishedVersion: \"$TAG\"\n+  publishedVersionMetadata:\n+    releaseNote: >-\n+      A mirror-node update.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6189a45010b22513865d2f7aaf4ab6f30646311f"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTI3Mjc0OA==", "bodyText": "We should also expose replicas property and passwords for all components. Replicas default to 1 but passwords should be empty and require input.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r425272748", "createdAt": "2020-05-14T16:30:01Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-gcp-marketplace/schema.yaml", "diffHunk": "@@ -0,0 +1,80 @@\n+x-google-marketplace:\n+  schemaVersion: v2\n+\n+  applicationApiVersion: v1beta1\n+\n+  # The release version, MUST match the release tag on the the deployer.\n+  publishedVersion: \"$TAG\"\n+  publishedVersionMetadata:\n+    releaseNote: >-\n+      A mirror-node update.\n+    # releaseTypes list is optional. Feature | BugFix | Security\n+    # \"Security\" should only be used if this is an important update to patch\n+    # an existing vulnerability, as such updates will display more prominently for users.\n+    releaseTypes:\n+      - Feature\n+    # If \"recommended\" is \"true\", users using older releases are encouraged\n+    # to update as soon as possible. This is useful if, for example, this release\n+    # fixes a critical issue.\n+    recommended: false\n+\n+  # images for subcharts. Primary image is importer\n+  images:\n+    '':\n+      properties:\n+        mirrornode.image.repository:\n+          type: REPO_WITH_REGISTRY\n+        mirrornode.image.tag:\n+          type: TAG\n+    grpc:\n+      properties:\n+        grpc.image.repository:\n+          type: REPO_WITH_REGISTRY\n+        grpc.image.tag:\n+          type: TAG\n+    rest:\n+      properties:\n+        rest.image.repository:\n+          type: REPO_WITH_REGISTRY\n+        rest.image.tag:\n+          type: TAG\n+    postgresql:\n+      properties:\n+        postgresql.postgresqlImage.registry:\n+          type: REGISTRY\n+        postgresql.postgresqlImage.repository:\n+          type: REPO_WITHOUT_REGISTRY\n+        postgresql.postgresqlImage.tag:\n+          type: TAG\n+        postgresql.pgpoolImage.registry:\n+          type: REGISTRY\n+        postgresql.pgpoolImage.repository:\n+          type: REPO_WITHOUT_REGISTRY\n+        postgresql.pgpoolImage.tag:\n+          type: TAG\n+\n+  # Other fields, like clusterConstraints, can be included here.\n+\n+  # The Properties and Required sections of v2 are structured the same as those of v1.\n+  # IMPORTANT: These IDs must match your listing ID in Marketplace.\n+  partnerId: hederaPartnerId\n+  solutionId: hederaMirrorSolutionId\n+\n+properties:\n+  name:\n+    type: string\n+    x-google-marketplace:\n+      type: NAME\n+  namespace:\n+    type: string\n+    x-google-marketplace:\n+      type: NAMESPACE\n+  deployer.image:\n+    type: string\n+    x-google-marketplace:\n+      type: DEPLOYER_IMAGE", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6189a45010b22513865d2f7aaf4ab6f30646311f"}, "originalPosition": 75}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTI4MDg2Mw==", "bodyText": "Combine these two lines. Move add-apt-repository as first then you can install all in one command", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r425280863", "createdAt": "2020-05-14T16:42:32Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-gcp-marketplace/Dockerfile", "diffHunk": "@@ -0,0 +1,32 @@\n+FROM gcr.io/cloud-marketplace-tools/k8s/deployer_helm AS build\n+\n+## pull in chart\n+COPY chart /tmp/chart\n+\n+# get yq and merge values files\n+RUN apt-get update \\\n+    && apt-get install -y --no-install-recommends software-properties-common \\\n+    && add-apt-repository ppa:rmescandon/yq\n+RUN apt update && apt install -y --no-install-recommends yq", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6189a45010b22513865d2f7aaf4ab6f30646311f"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTI4MTIzNg==", "bodyText": "Nice!", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r425281236", "createdAt": "2020-05-14T16:43:04Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-gcp-marketplace/Dockerfile", "diffHunk": "@@ -0,0 +1,32 @@\n+FROM gcr.io/cloud-marketplace-tools/k8s/deployer_helm AS build\n+\n+## pull in chart\n+COPY chart /tmp/chart\n+\n+# get yq and merge values files\n+RUN apt-get update \\\n+    && apt-get install -y --no-install-recommends software-properties-common \\\n+    && add-apt-repository ppa:rmescandon/yq\n+RUN apt update && apt install -y --no-install-recommends yq\n+RUN yq m -x /tmp/chart/values.yaml /tmp/chart/values-marketplace.yaml > /tmp/chart/values-merged.yaml", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6189a45010b22513865d2f7aaf4ab6f30646311f"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTI4OTczNQ==", "bodyText": "This command is not necessary if you just merge two files above directly to values.yaml", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r425289735", "createdAt": "2020-05-14T16:56:21Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-gcp-marketplace/Dockerfile", "diffHunk": "@@ -0,0 +1,32 @@\n+FROM gcr.io/cloud-marketplace-tools/k8s/deployer_helm AS build\n+\n+## pull in chart\n+COPY chart /tmp/chart\n+\n+# get yq and merge values files\n+RUN apt-get update \\\n+    && apt-get install -y --no-install-recommends software-properties-common \\\n+    && add-apt-repository ppa:rmescandon/yq\n+RUN apt update && apt install -y --no-install-recommends yq\n+RUN yq m -x /tmp/chart/values.yaml /tmp/chart/values-marketplace.yaml > /tmp/chart/values-merged.yaml\n+\n+# helm template to render and verify templates\n+RUN helm template /tmp/chart -f /tmp/chart/values-merged.yaml\n+\n+# overwrite values file and archive\n+RUN mv /tmp/chart/values-merged.yaml /tmp/chart/values.yaml", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6189a45010b22513865d2f7aaf4ab6f30646311f"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTI5NzQxNw==", "bodyText": "This should be a multi-stage build so that all the prebuild utilities and folders don't get carried over.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r425297417", "createdAt": "2020-05-14T17:08:13Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-gcp-marketplace/Dockerfile", "diffHunk": "@@ -0,0 +1,32 @@\n+FROM gcr.io/cloud-marketplace-tools/k8s/deployer_helm AS build\n+\n+## pull in chart\n+COPY chart /tmp/chart\n+\n+# get yq and merge values files\n+RUN apt-get update \\\n+    && apt-get install -y --no-install-recommends software-properties-common \\\n+    && add-apt-repository ppa:rmescandon/yq\n+RUN apt update && apt install -y --no-install-recommends yq\n+RUN yq m -x /tmp/chart/values.yaml /tmp/chart/values-marketplace.yaml > /tmp/chart/values-merged.yaml\n+\n+# helm template to render and verify templates\n+RUN helm template /tmp/chart -f /tmp/chart/values-merged.yaml\n+\n+# overwrite values file and archive\n+RUN mv /tmp/chart/values-merged.yaml /tmp/chart/values.yaml\n+RUN cd /tmp && tar -czvf /tmp/hedera-mirror-node.tar.gz chart/\n+\n+# Pull in and update schema for marketplace deployer\n+ARG tag\n+COPY schema.yaml /tmp/schema.yaml\n+RUN cat /tmp/schema.yaml \\\n+    | env -i \"TAG=$tag\" envsubst \\\n+    > /tmp/schema.yaml.new \\\n+    && mv /tmp/schema.yaml.new /tmp/schema.yaml\n+\n+# move chart and schema to expected /data folder structure", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6189a45010b22513865d2f7aaf4ab6f30646311f"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTMwMjI0MQ==", "bodyText": "Add mpdev", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r425302241", "createdAt": "2020-05-14T17:15:18Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-gcp-marketplace/README.md", "diffHunk": "@@ -0,0 +1,31 @@\n+# Overview\n+\n+This submodule contains logic to support the development and deployment of the Hedera Mirror Node in a Kubernetes cluster in GCP Marketplace.\n+\n+The module takes in the wrapper hedera-mirror Helm chart and bundles it into the required deployer image which is built and pushed to GCR repo on maven deploy.\n+\n+# Setup\n+\n+## Prerequisites\n+\n+### Command line tools\n+\n+- [gcloud](https://cloud.google.com/sdk/gcloud/)\n+- [kubectl](https://kubernetes.io/docs/tasks/tools/install-kubectl/)\n+- [docker](https://docs.docker.com/install/)\n+- [helm](https://helm.sh/docs/using_helm/#installing-helm)\n+- [git](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6189a45010b22513865d2f7aaf4ab6f30646311f"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTMwMjgyMQ==", "bodyText": "Can remove", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r425302821", "createdAt": "2020-05-14T17:16:11Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-gcp-marketplace/Dockerfile", "diffHunk": "@@ -0,0 +1,32 @@\n+FROM gcr.io/cloud-marketplace-tools/k8s/deployer_helm AS build\n+\n+## pull in chart\n+COPY chart /tmp/chart\n+\n+# get yq and merge values files\n+RUN apt-get update \\\n+    && apt-get install -y --no-install-recommends software-properties-common \\\n+    && add-apt-repository ppa:rmescandon/yq\n+RUN apt update && apt install -y --no-install-recommends yq\n+RUN yq m -x /tmp/chart/values.yaml /tmp/chart/values-marketplace.yaml > /tmp/chart/values-merged.yaml\n+\n+# helm template to render and verify templates\n+RUN helm template /tmp/chart -f /tmp/chart/values-merged.yaml\n+\n+# overwrite values file and archive\n+RUN mv /tmp/chart/values-merged.yaml /tmp/chart/values.yaml\n+RUN cd /tmp && tar -czvf /tmp/hedera-mirror-node.tar.gz chart/\n+\n+# Pull in and update schema for marketplace deployer\n+ARG tag\n+COPY schema.yaml /tmp/schema.yaml\n+RUN cat /tmp/schema.yaml \\\n+    | env -i \"TAG=$tag\" envsubst \\\n+    > /tmp/schema.yaml.new \\\n+    && mv /tmp/schema.yaml.new /tmp/schema.yaml\n+\n+# move chart and schema to expected /data folder structure\n+RUN mv /tmp/hedera-mirror-node.tar.gz /data/chart/\n+RUN mv /tmp/schema.yaml /data/schema.yaml\n+\n+#RUN cp /data/schema.yaml /data-test/schema.yaml", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6189a45010b22513865d2f7aaf4ab6f30646311f"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTMwNjMwOQ==", "bodyText": "I like this idea. I'm not a fan of a new submodule that then has to have access to other folders outside its project to complete its task. Might as well just have charts/marketplace and add extra docker-maven-plugin in root pom.xml", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r425306309", "createdAt": "2020-05-14T17:22:16Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-gcp-marketplace/pom.xml", "diffHunk": "@@ -0,0 +1,87 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n+<project xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+\n+    <artifactId>hedera-mirror-gcp-marketplace</artifactId>\n+    <description>Google Cloud Platform Marketplace solution for the Hedera Mirror Node</description>\n+    <modelVersion>4.0.0</modelVersion>\n+    <name>Hedera Mirror Node GCP Marketplace</name>\n+    <packaging>pom</packaging>\n+\n+    <parent>\n+        <groupId>com.hedera</groupId>\n+        <artifactId>hedera-mirror-node</artifactId>\n+        <version>0.11.0-rc1</version>\n+    </parent>\n+\n+    <properties>\n+        <docker.buildArg.registry>${docker.push.repository}/hedera-mirror-node</docker.buildArg.registry>\n+        <docker.buildArg.tag>${gmp.track}</docker.buildArg.tag>\n+    </properties>\n+\n+    <build>\n+        <plugins>\n+            <plugin>\n+                <artifactId>maven-resources-plugin</artifactId>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTc0OTIzNA=="}, "originalCommit": {"oid": "6da318eacde516514e59b7a3718269e04fc97197"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTMwNzI5Ng==", "bodyText": "We don't need to override pullSecrets since [] is already default", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r425307296", "createdAt": "2020-05-14T17:23:54Z", "author": {"login": "steven-sheehy"}, "path": "charts/hedera-mirror/values-marketplace.yaml", "diffHunk": "@@ -9,28 +30,66 @@ grpc:\n     create: false\n   serviceMonitor:\n     enabled: false\n+  image:\n+    repository: gcr.io/mirrornode/hedera-mirror-node/grpc\n+    <<: *versiontag\n+  service:\n+    type: LoadBalancer\n+\n importer:\n   podMonitor:\n     enabled: false\n+  priorityClassName: \"\"\n   rbac:\n     enabled: false\n   replicas: 1\n   serviceAccount:\n     create: false\n+  image:\n+    repository: gcr.io/mirrornode/hedera-mirror-node/importer\n+    <<: *versiontag\n+\n+labels: {}\n+\n loki:\n   enabled: false\n+\n+networkPolicy:\n+  enabled: false\n+\n postgresql:\n   metrics:\n     enabled: false\n   pgpool:\n+    priorityClassName: \"\"\n     replicaCount: 1\n+  postgresqlImage:\n+    registry: gcr.io\n+    repository: mirrornode/hedera-mirror-node/postgresql\n+    <<: *tracktag\n+    pullSecrets: []", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6189a45010b22513865d2f7aaf4ab6f30646311f"}, "originalPosition": 67}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTMwNzg1Ng==", "bodyText": "There is no metrics section in values.yaml. This can be removed", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r425307856", "createdAt": "2020-05-14T17:24:52Z", "author": {"login": "steven-sheehy"}, "path": "charts/hedera-mirror/values-marketplace.yaml", "diffHunk": "@@ -41,5 +100,21 @@ rest:\n     create: false\n   serviceMonitor:\n     enabled: false\n+  image:\n+    repository: gcr.io/mirrornode/hedera-mirror-node/rest\n+    <<: *versiontag\n+  service:\n+    type: LoadBalancer\n+\n traefik:\n   enabled: false\n+  ports:\n+    web:\n+\n+metrics:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6189a45010b22513865d2f7aaf4ab6f30646311f"}, "originalPosition": 108}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTMwODkyOQ==", "bodyText": "I don't think this section is necessary anymore now that you merge the yamls", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r425308929", "createdAt": "2020-05-14T17:26:36Z", "author": {"login": "steven-sheehy"}, "path": "charts/hedera-mirror/values-marketplace.yaml", "diffHunk": "@@ -9,28 +30,66 @@ grpc:\n     create: false\n   serviceMonitor:\n     enabled: false\n+  image:\n+    repository: gcr.io/mirrornode/hedera-mirror-node/grpc\n+    <<: *versiontag\n+  service:\n+    type: LoadBalancer\n+\n importer:\n   podMonitor:\n     enabled: false\n+  priorityClassName: \"\"\n   rbac:\n     enabled: false\n   replicas: 1\n   serviceAccount:\n     create: false\n+  image:\n+    repository: gcr.io/mirrornode/hedera-mirror-node/importer\n+    <<: *versiontag\n+\n+labels: {}\n+\n loki:\n   enabled: false\n+\n+networkPolicy:\n+  enabled: false\n+\n postgresql:\n   metrics:\n     enabled: false\n   pgpool:\n+    priorityClassName: \"\"\n     replicaCount: 1\n+  postgresqlImage:\n+    registry: gcr.io\n+    repository: mirrornode/hedera-mirror-node/postgresql\n+    <<: *tracktag\n+    pullSecrets: []\n   postgresql:\n+    priorityClassName: \"\"\n     replicaCount: 1\n+  pgpoolImage:\n+    registry: gcr.io\n+    repository: mirrornode/hedera-mirror-node/pgpool\n+    <<: *tracktag\n+    pullSecrets: []\n+\n prometheus-adapter:\n   enabled: false\n+\n prometheus:\n   enabled: false\n+  grafana:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6189a45010b22513865d2f7aaf4ab6f30646311f"}, "originalPosition": 82}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTMxMDk4OA==", "bodyText": "This should be importer.image.repository. Same for next", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r425310988", "createdAt": "2020-05-14T17:29:40Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-gcp-marketplace/schema.yaml", "diffHunk": "@@ -0,0 +1,80 @@\n+x-google-marketplace:\n+  schemaVersion: v2\n+\n+  applicationApiVersion: v1beta1\n+\n+  # The release version, MUST match the release tag on the the deployer.\n+  publishedVersion: \"$TAG\"\n+  publishedVersionMetadata:\n+    releaseNote: >-\n+      A mirror-node update.\n+    # releaseTypes list is optional. Feature | BugFix | Security\n+    # \"Security\" should only be used if this is an important update to patch\n+    # an existing vulnerability, as such updates will display more prominently for users.\n+    releaseTypes:\n+      - Feature\n+    # If \"recommended\" is \"true\", users using older releases are encouraged\n+    # to update as soon as possible. This is useful if, for example, this release\n+    # fixes a critical issue.\n+    recommended: false\n+\n+  # images for subcharts. Primary image is importer\n+  images:\n+    '':\n+      properties:\n+        mirrornode.image.repository:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6189a45010b22513865d2f7aaf4ab6f30646311f"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTMxMTE5MQ==", "bodyText": "This section can be removed", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r425311191", "createdAt": "2020-05-14T17:29:59Z", "author": {"login": "steven-sheehy"}, "path": "charts/hedera-mirror/values-marketplace.yaml", "diffHunk": "@@ -1,4 +1,25 @@\n+applicationResource:\n+  enabled: true\n+  partnerId: hederaPartnerId\n+  partnerName: partner_name\n+  projectId: hederaMirrorSolutionId\n+\n+track-tag: &tracktag\n+  tag: 0.11.0\n+\n+version-tag: &versiontag\n+  tag: 0.11.0-rc1\n+\n+mirrornode:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6189a45010b22513865d2f7aaf4ab6f30646311f"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTMxMjY5NQ==", "bodyText": "You shouldn't use track tags for image versions. Needs to be full version for all components.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r425312695", "createdAt": "2020-05-14T17:32:34Z", "author": {"login": "steven-sheehy"}, "path": "charts/hedera-mirror/values-marketplace.yaml", "diffHunk": "@@ -1,4 +1,25 @@\n+applicationResource:\n+  enabled: true\n+  partnerId: hederaPartnerId\n+  partnerName: partner_name\n+  projectId: hederaMirrorSolutionId\n+\n+track-tag: &tracktag", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6189a45010b22513865d2f7aaf4ab6f30646311f"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTMxMzU1OA==", "bodyText": "Not necessary with other changes", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r425313558", "createdAt": "2020-05-14T17:34:00Z", "author": {"login": "steven-sheehy"}, "path": "charts/hedera-mirror/values-marketplace.yaml", "diffHunk": "@@ -41,5 +100,21 @@ rest:\n     create: false\n   serviceMonitor:\n     enabled: false\n+  image:\n+    repository: gcr.io/mirrornode/hedera-mirror-node/rest\n+    <<: *versiontag\n+  service:\n+    type: LoadBalancer\n+\n traefik:\n   enabled: false\n+  ports:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6189a45010b22513865d2f7aaf4ab6f30646311f"}, "originalPosition": 105}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTMyMjQxMQ==", "bodyText": "These are already the default versions, not need to respecify them again in this file. Main thing is just that schema.yaml can override them, which you have. The only exception is postgresql as its version would differ from default", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r425322411", "createdAt": "2020-05-14T17:47:06Z", "author": {"login": "steven-sheehy"}, "path": "charts/hedera-mirror/values-marketplace.yaml", "diffHunk": "@@ -1,4 +1,25 @@\n+applicationResource:\n+  enabled: true\n+  partnerId: hederaPartnerId\n+  partnerName: partner_name\n+  projectId: hederaMirrorSolutionId\n+\n+track-tag: &tracktag\n+  tag: 0.11.0\n+\n+version-tag: &versiontag\n+  tag: 0.11.0-rc1", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6189a45010b22513865d2f7aaf4ab6f30646311f"}, "originalPosition": 11}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0288845c4a89ddc46e99dbba27157f90e021d0ba", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/0288845c4a89ddc46e99dbba27157f90e021d0ba", "committedDate": "2020-05-14T20:04:03Z", "message": "Made gcp marketplace a sub folder instead of a sub module\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b70a7975d05e5929ec0e1cc85b86a0f9c2757ca3", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/b70a7975d05e5929ec0e1cc85b86a0f9c2757ca3", "committedDate": "2020-05-14T20:31:20Z", "message": "Shared docker build logic and addressed some config modifications\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5c44fc6bda1f9eeefc3c401d6faaac93c1f44a9b", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/5c44fc6bda1f9eeefc3c401d6faaac93c1f44a9b", "committedDate": "2020-05-15T05:46:36Z", "message": "Cleaned up values and made docker file multi stage\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "88fcc3e0ef423047cbd76e9f9ab000786c76ae36", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/88fcc3e0ef423047cbd76e9f9ab000786c76ae36", "committedDate": "2020-05-15T23:25:59Z", "message": "Remove latest tag and added password and replica properties to schema\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "363f04d8cc90ea1185f1fcbc27e830eeec06e3f2", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/363f04d8cc90ea1185f1fcbc27e830eeec06e3f2", "committedDate": "2020-05-18T16:21:47Z", "message": "Added minor tag logic to circle ci and fixed main image and postgres pull\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2561e95bc4d5e83adbb5ac54bd32368a7b04f0c7", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/2561e95bc4d5e83adbb5ac54bd32368a7b04f0c7", "committedDate": "2020-05-18T22:35:31Z", "message": "Remove docker latest tag\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f009612b2d0bda6ed7038abb74541f641f6cd620", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/f009612b2d0bda6ed7038abb74541f641f6cd620", "committedDate": "2020-05-18T22:36:06Z", "message": "Signed-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>\nMerge branch 'master' into helm-deployer-image"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "81efbfd985ad501adffbe51698c0e70b25c58c90", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/81efbfd985ad501adffbe51698c0e70b25c58c90", "committedDate": "2020-05-19T03:27:10Z", "message": " Add  minor flag to jib case also\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0MDExMDAy", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#pullrequestreview-414011002", "createdAt": "2020-05-18T23:51:40Z", "commit": {"oid": "f009612b2d0bda6ed7038abb74541f641f6cd620"}, "state": "COMMENTED", "comments": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMzo1MTo0MFrOGXLItg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxNTozMzoyOFrOGXmSVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjk1Mjg4Ng==", "bodyText": "Misspelled here and other places", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r426952886", "createdAt": "2020-05-18T23:51:40Z", "author": {"login": "steven-sheehy"}, "path": "charts/marketplace/gcp/schema.yaml", "diffHunk": "@@ -0,0 +1,141 @@\n+x-google-marketplace:\n+  schemaVersion: v2\n+\n+  applicationApiVersion: v1beta1\n+\n+  # The release version, MUST match the release tag on the the deployer.\n+  publishedVersion: \"$TAG\"\n+  publishedVersionMetadata:\n+    releaseNote: >-\n+      Initial release of the Hedera Mirror Node\n+    # releaseTypes list is optional. Feature | BugFix | Security\n+    # \"Security\" should only be used if this is an important update to patch\n+    # an existing vulnerability, as such updates will display more prominently for users.\n+    releaseTypes:\n+      - Feature\n+    # If \"recommended\" is \"true\", users using older releases are encouraged\n+    # to update as soon as possible. This is useful if, for example, this release\n+    # fixes a critical issue.\n+    recommended: false\n+\n+  # images for subcharts. Primary image is importer\n+  images:\n+    '':\n+      properties:\n+        mirrornode.image.repository:\n+          type: REPO_WITH_REGISTRY\n+        mirrornode.image.tag:\n+          type: TAG\n+    grpc:\n+      properties:\n+        grpc.image.repository:\n+          type: REPO_WITH_REGISTRY\n+        grpc.image.tag:\n+          type: TAG\n+    rest:\n+      properties:\n+        rest.image.repository:\n+          type: REPO_WITH_REGISTRY\n+        rest.image.tag:\n+          type: TAG\n+    postgresql:\n+      properties:\n+        postgresql.postgresqlImage.registry:\n+          type: REGISTRY\n+        postgresql.postgresqlImage.repository:\n+          type: REPO_WITHOUT_REGISTRY\n+        postgresql.postgresqlImage.tag:\n+          type: TAG\n+    pgpool:\n+      properties:\n+        postgresql.pgpoolImage.registry:\n+          type: REGISTRY\n+        postgresql.pgpoolImage.repository:\n+          type: REPO_WITHOUT_REGISTRY\n+        postgresql.pgpoolImage.tag:\n+          type: TAG\n+\n+  # Other fields, like clusterConstraints, can be included here.\n+\n+  # The Properties and Required sections of v2 are structured the same as those of v1.\n+  # IMPORTANT: These IDs must match your listing ID in Marketplace.\n+  partnerId: hederaPartnerId\n+  solutionId: hederaMirrorSolutionId\n+\n+properties:\n+  name:\n+    type: string\n+    x-google-marketplace:\n+      type: NAME\n+  namespace:\n+    type: string\n+    x-google-marketplace:\n+      type: NAMESPACE\n+  deployer.image:\n+    type: string\n+    x-google-marketplace:\n+      type: DEPLOYER_IMAGE\n+  grpc.config.hedera.mirror.grpc.db.password:\n+    type: string\n+    default: ''\n+    description: The grpc user password\n+    title: grpc user password\n+    x-google-marketplace:\n+      type: MASKED_FIELD\n+  grpc.replicas:\n+    type: integer\n+    default: 1\n+    description: Number of grpc node replicas\n+    title: gRPC replicas\n+    minimun: 1\n+    maximum: 10\n+  importer.config.hedera.mirror.importer.db.password:\n+    type: string\n+    default: ''\n+    description: The importer user password\n+    title: importer user password\n+    x-google-marketplace:\n+      type: MASKED_FIELD\n+  importer.replicas:\n+    type: integer\n+    default: 1\n+    description: Number of importer node replicas\n+    title: importer replicas\n+    minimun: 1", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f009612b2d0bda6ed7038abb74541f641f6cd620"}, "originalPosition": 104}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjk1MzExMg==", "bodyText": "We should probably allow 0 min for rest and grpc replicas", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r426953112", "createdAt": "2020-05-18T23:52:27Z", "author": {"login": "steven-sheehy"}, "path": "charts/marketplace/gcp/schema.yaml", "diffHunk": "@@ -0,0 +1,141 @@\n+x-google-marketplace:\n+  schemaVersion: v2\n+\n+  applicationApiVersion: v1beta1\n+\n+  # The release version, MUST match the release tag on the the deployer.\n+  publishedVersion: \"$TAG\"\n+  publishedVersionMetadata:\n+    releaseNote: >-\n+      Initial release of the Hedera Mirror Node\n+    # releaseTypes list is optional. Feature | BugFix | Security\n+    # \"Security\" should only be used if this is an important update to patch\n+    # an existing vulnerability, as such updates will display more prominently for users.\n+    releaseTypes:\n+      - Feature\n+    # If \"recommended\" is \"true\", users using older releases are encouraged\n+    # to update as soon as possible. This is useful if, for example, this release\n+    # fixes a critical issue.\n+    recommended: false\n+\n+  # images for subcharts. Primary image is importer\n+  images:\n+    '':\n+      properties:\n+        mirrornode.image.repository:\n+          type: REPO_WITH_REGISTRY\n+        mirrornode.image.tag:\n+          type: TAG\n+    grpc:\n+      properties:\n+        grpc.image.repository:\n+          type: REPO_WITH_REGISTRY\n+        grpc.image.tag:\n+          type: TAG\n+    rest:\n+      properties:\n+        rest.image.repository:\n+          type: REPO_WITH_REGISTRY\n+        rest.image.tag:\n+          type: TAG\n+    postgresql:\n+      properties:\n+        postgresql.postgresqlImage.registry:\n+          type: REGISTRY\n+        postgresql.postgresqlImage.repository:\n+          type: REPO_WITHOUT_REGISTRY\n+        postgresql.postgresqlImage.tag:\n+          type: TAG\n+    pgpool:\n+      properties:\n+        postgresql.pgpoolImage.registry:\n+          type: REGISTRY\n+        postgresql.pgpoolImage.repository:\n+          type: REPO_WITHOUT_REGISTRY\n+        postgresql.pgpoolImage.tag:\n+          type: TAG\n+\n+  # Other fields, like clusterConstraints, can be included here.\n+\n+  # The Properties and Required sections of v2 are structured the same as those of v1.\n+  # IMPORTANT: These IDs must match your listing ID in Marketplace.\n+  partnerId: hederaPartnerId\n+  solutionId: hederaMirrorSolutionId\n+\n+properties:\n+  name:\n+    type: string\n+    x-google-marketplace:\n+      type: NAME\n+  namespace:\n+    type: string\n+    x-google-marketplace:\n+      type: NAMESPACE\n+  deployer.image:\n+    type: string\n+    x-google-marketplace:\n+      type: DEPLOYER_IMAGE\n+  grpc.config.hedera.mirror.grpc.db.password:\n+    type: string\n+    default: ''\n+    description: The grpc user password\n+    title: grpc user password\n+    x-google-marketplace:\n+      type: MASKED_FIELD\n+  grpc.replicas:\n+    type: integer\n+    default: 1\n+    description: Number of grpc node replicas\n+    title: gRPC replicas\n+    minimun: 1", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f009612b2d0bda6ed7038abb74541f641f6cd620"}, "originalPosition": 90}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzM0NTE4Mw==", "bodyText": "Can be removed", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r427345183", "createdAt": "2020-05-19T14:26:27Z", "author": {"login": "steven-sheehy"}, "path": ".gitignore", "diffHunk": "@@ -39,6 +39,7 @@ hedera-mirror-*/application.yml\n /db/\n *.log\n !/charts/**/*.tgz\n+hedera-mirror-gcp-marketplace/chart/", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "81efbfd985ad501adffbe51698c0e70b25c58c90"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzM0NTY2Mw==", "bodyText": "nit: Can remove and", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r427345663", "createdAt": "2020-05-19T14:27:06Z", "author": {"login": "steven-sheehy"}, "path": "charts/hedera-mirror/templates/NOTES.txt", "diffHunk": "@@ -1,5 +1,6 @@\n Hedera Mirror Node {{ .Chart.AppVersion }} successfully installed.\n \n+{{ if and .Values.traefik.enabled -}}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "81efbfd985ad501adffbe51698c0e70b25c58c90"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzM1MjM1Ng==", "bodyText": "Not removed", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r427352356", "createdAt": "2020-05-19T14:35:18Z", "author": {"login": "steven-sheehy"}, "path": "charts/hedera-mirror/values-marketplace.yaml", "diffHunk": "@@ -1,4 +1,25 @@\n+applicationResource:\n+  enabled: true\n+  partnerId: hederaPartnerId\n+  partnerName: partner_name\n+  projectId: hederaMirrorSolutionId\n+\n+track-tag: &tracktag\n+  tag: 0.11.0\n+\n+version-tag: &versiontag\n+  tag: 0.11.0-rc1\n+\n+mirrornode:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTMxMTE5MQ=="}, "originalCommit": {"oid": "6189a45010b22513865d2f7aaf4ab6f30646311f"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzM2MDM2Mw==", "bodyText": "It doesn't make sense to have the deployer image in the values file as it is the deployer image itself that's running and inspecting the schema.yaml and values yaml. Also, I don't think it needs to be in the schema.yaml either for the same reason and because users don't need to edit it. I see it in some of the click-to-deploy apps but not in others like nginx.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r427360363", "createdAt": "2020-05-19T14:44:54Z", "author": {"login": "steven-sheehy"}, "path": "charts/hedera-mirror/values-marketplace.yaml", "diffHunk": "@@ -1,36 +1,76 @@\n+applicationResource:\n+  enabled: true\n+  partnerId: hederaPartnerId\n+  partnerName: partner_name\n+  projectId: hederaMirrorSolutionId\n+\n+mirrornode:\n+  image:\n+    repository: gcr.io/mirrornode/hedera-mirror-node\n+\n+deployer:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "81efbfd985ad501adffbe51698c0e70b25c58c90"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzM2MzI3NA==", "bodyText": "To reduce the number of base images to download, can you just use gcr.io/cloud-marketplace-tools/k8s/deployer_helm here as well?", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r427363274", "createdAt": "2020-05-19T14:48:46Z", "author": {"login": "steven-sheehy"}, "path": "charts/marketplace/gcp/Dockerfile", "diffHunk": "@@ -0,0 +1,33 @@\n+FROM ubuntu:19.10 AS build", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "81efbfd985ad501adffbe51698c0e70b25c58c90"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzM2NTYyOQ==", "bodyText": "These two commands should be in build stage. You should also only copy the tgz and schema.yaml from build container instead of a directory. Can remove rm -r chart", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r427365629", "createdAt": "2020-05-19T14:51:40Z", "author": {"login": "steven-sheehy"}, "path": "charts/marketplace/gcp/Dockerfile", "diffHunk": "@@ -0,0 +1,33 @@\n+FROM ubuntu:19.10 AS build\n+\n+## pull in chart\n+COPY hedera-mirror /tmp/chart\n+\n+# get yq and merge values files\n+RUN apt-get update \\\n+    && apt-get install -y software-properties-common \\\n+    && add-apt-repository ppa:rmescandon/yq \\\n+    && apt-get install -y --no-install-recommends yq gettext-base\n+\n+RUN yq m -i --overwrite /tmp/chart/values.yaml /tmp/chart/values-marketplace.yaml\n+\n+# Pull in and update schema for marketplace deployer\n+ARG tag\n+COPY marketplace/gcp/schema.yaml /tmp/schema.yaml\n+RUN cat /tmp/schema.yaml \\\n+    | env -i \"TAG=$tag\" envsubst \\\n+    > /tmp/schema.yaml.new \\\n+    && mv /tmp/schema.yaml.new /tmp/schema.yaml\n+\n+# Setup marketplace structure on helm deployer image base\n+FROM gcr.io/cloud-marketplace-tools/k8s/deployer_helm\n+COPY --from=build /tmp/ .\n+\n+# helm template to render and verify templates\n+RUN helm template chart -f chart/values.yaml", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "81efbfd985ad501adffbe51698c0e70b25c58c90"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzM2ODg5OQ==", "bodyText": "Mentioned before, but this has to be importer.image.* to override the values.yaml", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r427368899", "createdAt": "2020-05-19T14:55:45Z", "author": {"login": "steven-sheehy"}, "path": "charts/marketplace/gcp/schema.yaml", "diffHunk": "@@ -0,0 +1,148 @@\n+x-google-marketplace:\n+  schemaVersion: v2\n+\n+  applicationApiVersion: v1beta1\n+\n+  # The release version, MUST match the release tag on the the deployer.\n+  publishedVersion: \"$TAG\"\n+  publishedVersionMetadata:\n+    releaseNote: >-\n+      Initial release of the Hedera Mirror Node\n+    # releaseTypes list is optional. Feature | BugFix | Security\n+    # \"Security\" should only be used if this is an important update to patch\n+    # an existing vulnerability, as such updates will display more prominently for users.\n+    releaseTypes:\n+      - Feature\n+    # If \"recommended\" is \"true\", users using older releases are encouraged\n+    # to update as soon as possible. This is useful if, for example, this release\n+    # fixes a critical issue.\n+    recommended: false\n+\n+  # images for subcharts. Primary image is importer\n+  images:\n+    '':\n+      properties:\n+        mirrornode.image.repository:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "81efbfd985ad501adffbe51698c0e70b25c58c90"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzM2OTQ1Mg==", "bodyText": "nit: Can remove comments", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r427369452", "createdAt": "2020-05-19T14:56:25Z", "author": {"login": "steven-sheehy"}, "path": "charts/marketplace/gcp/schema.yaml", "diffHunk": "@@ -0,0 +1,148 @@\n+x-google-marketplace:\n+  schemaVersion: v2\n+\n+  applicationApiVersion: v1beta1\n+\n+  # The release version, MUST match the release tag on the the deployer.\n+  publishedVersion: \"$TAG\"\n+  publishedVersionMetadata:\n+    releaseNote: >-\n+      Initial release of the Hedera Mirror Node\n+    # releaseTypes list is optional. Feature | BugFix | Security\n+    # \"Security\" should only be used if this is an important update to patch\n+    # an existing vulnerability, as such updates will display more prominently for users.\n+    releaseTypes:\n+      - Feature\n+    # If \"recommended\" is \"true\", users using older releases are encouraged\n+    # to update as soon as possible. This is useful if, for example, this release\n+    # fixes a critical issue.\n+    recommended: false\n+\n+  # images for subcharts. Primary image is importer\n+  images:\n+    '':\n+      properties:\n+        mirrornode.image.repository:\n+          type: REPO_WITH_REGISTRY\n+        mirrornode.image.tag:\n+          type: TAG\n+    grpc:\n+      properties:\n+        grpc.image.repository:\n+          type: REPO_WITH_REGISTRY\n+        grpc.image.tag:\n+          type: TAG\n+    rest:\n+      properties:\n+        rest.image.repository:\n+          type: REPO_WITH_REGISTRY\n+        rest.image.tag:\n+          type: TAG\n+    postgresql:\n+      properties:\n+        postgresql.postgresqlImage.registry:\n+          type: REGISTRY\n+        postgresql.postgresqlImage.repository:\n+          type: REPO_WITHOUT_REGISTRY\n+        postgresql.postgresqlImage.tag:\n+          type: TAG\n+    pgpool:\n+      properties:\n+        postgresql.pgpoolImage.registry:\n+          type: REGISTRY\n+        postgresql.pgpoolImage.repository:\n+          type: REPO_WITHOUT_REGISTRY\n+        postgresql.pgpoolImage.tag:\n+          type: TAG\n+\n+  # Other fields, like clusterConstraints, can be included here.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "81efbfd985ad501adffbe51698c0e70b25c58c90"}, "originalPosition": 58}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzM3MTQ2NQ==", "bodyText": "Use docker-maven-plugin.version", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r427371465", "createdAt": "2020-05-19T14:58:53Z", "author": {"login": "steven-sheehy"}, "path": "pom.xml", "diffHunk": "@@ -282,6 +277,44 @@\n                         </execution>\n                     </executions>\n                 </plugin>\n+                <plugin>\n+                    <groupId>io.fabric8</groupId>\n+                    <artifactId>docker-maven-plugin</artifactId>\n+                    <version>0.33.0</version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "81efbfd985ad501adffbe51698c0e70b25c58c90"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzM3MzUwMw==", "bodyText": "Can remove version if in parent pluginManagement", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r427373503", "createdAt": "2020-05-19T15:01:33Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-rest/pom.xml", "diffHunk": "@@ -20,34 +20,6 @@\n                 <groupId>io.fabric8</groupId>\n                 <artifactId>docker-maven-plugin</artifactId>\n                 <version>${docker-maven-plugin.version}</version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "81efbfd985ad501adffbe51698c0e70b25c58c90"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzM4Njg4NA==", "bodyText": "We do want to cache.  We build locally and don't want to have to re-download node_modules all the time.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r427386884", "createdAt": "2020-05-19T15:19:11Z", "author": {"login": "steven-sheehy"}, "path": "pom.xml", "diffHunk": "@@ -282,6 +277,44 @@\n                         </execution>\n                     </executions>\n                 </plugin>\n+                <plugin>\n+                    <groupId>io.fabric8</groupId>\n+                    <artifactId>docker-maven-plugin</artifactId>\n+                    <version>0.33.0</version>\n+                    <executions>\n+                        <execution>\n+                            <id>dockerBuild</id>\n+                            <goals>\n+                                <goal>build</goal>\n+                            </goals>\n+                        </execution>\n+                        <execution>\n+                            <id>dockerPush</id>\n+                            <goals>\n+                                <goal>push</goal>\n+                            </goals>\n+                        </execution>\n+                    </executions>\n+                    <configuration>\n+                        <images>\n+                            <image>\n+                                <external>\n+                                    <type>properties</type>\n+                                    <prefix>docker</prefix>\n+                                    <mode>override</mode>\n+                                </external>\n+                                <build>\n+                                    <contextDir>${project.basedir}</contextDir>\n+                                    <assembly>\n+                                        <exportTargetDir>false</exportTargetDir>\n+                                    </assembly>\n+                                    <noCache>true</noCache>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "81efbfd985ad501adffbe51698c0e70b25c58c90"}, "originalPosition": 56}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzM4NzQ2OQ==", "bodyText": "docker.tag.latest was removed in pom. This needs to be adjusted somehow", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r427387469", "createdAt": "2020-05-19T15:19:54Z", "author": {"login": "steven-sheehy"}, "path": ".circleci/config.yml", "diffHunk": "@@ -376,6 +376,13 @@ jobs:\n             if [ \"$CIRCLE_BRANCH\" = \"master\" ]; then\n                 DOCKER_TAG_OVERRIDE=\"-Ddocker.tag.version=${CIRCLE_BRANCH}-${CIRCLE_SHA1} -Ddocker.tag.latest=master\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "81efbfd985ad501adffbe51698c0e70b25c58c90"}, "originalPosition": 78}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzM5NzcxOA==", "bodyText": "Unfortunately, we also have to set importer.config.hedera.mirror.importer.db.restPassword. Is there a way to set multiple values from the same user input?", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r427397718", "createdAt": "2020-05-19T15:33:28Z", "author": {"login": "steven-sheehy"}, "path": "charts/marketplace/gcp/schema.yaml", "diffHunk": "@@ -0,0 +1,148 @@\n+x-google-marketplace:\n+  schemaVersion: v2\n+\n+  applicationApiVersion: v1beta1\n+\n+  # The release version, MUST match the release tag on the the deployer.\n+  publishedVersion: \"$TAG\"\n+  publishedVersionMetadata:\n+    releaseNote: >-\n+      Initial release of the Hedera Mirror Node\n+    # releaseTypes list is optional. Feature | BugFix | Security\n+    # \"Security\" should only be used if this is an important update to patch\n+    # an existing vulnerability, as such updates will display more prominently for users.\n+    releaseTypes:\n+      - Feature\n+    # If \"recommended\" is \"true\", users using older releases are encouraged\n+    # to update as soon as possible. This is useful if, for example, this release\n+    # fixes a critical issue.\n+    recommended: false\n+\n+  # images for subcharts. Primary image is importer\n+  images:\n+    '':\n+      properties:\n+        mirrornode.image.repository:\n+          type: REPO_WITH_REGISTRY\n+        mirrornode.image.tag:\n+          type: TAG\n+    grpc:\n+      properties:\n+        grpc.image.repository:\n+          type: REPO_WITH_REGISTRY\n+        grpc.image.tag:\n+          type: TAG\n+    rest:\n+      properties:\n+        rest.image.repository:\n+          type: REPO_WITH_REGISTRY\n+        rest.image.tag:\n+          type: TAG\n+    postgresql:\n+      properties:\n+        postgresql.postgresqlImage.registry:\n+          type: REGISTRY\n+        postgresql.postgresqlImage.repository:\n+          type: REPO_WITHOUT_REGISTRY\n+        postgresql.postgresqlImage.tag:\n+          type: TAG\n+    pgpool:\n+      properties:\n+        postgresql.pgpoolImage.registry:\n+          type: REGISTRY\n+        postgresql.pgpoolImage.repository:\n+          type: REPO_WITHOUT_REGISTRY\n+        postgresql.pgpoolImage.tag:\n+          type: TAG\n+\n+  # Other fields, like clusterConstraints, can be included here.\n+\n+  # The Properties and Required sections of v2 are structured the same as those of v1.\n+  # IMPORTANT: These IDs must match your listing ID in Marketplace.\n+  partnerId: hederaPartnerId\n+  solutionId: hederaMirrorSolutionId\n+\n+properties:\n+  name:\n+    type: string\n+    x-google-marketplace:\n+      type: NAME\n+  namespace:\n+    type: string\n+    x-google-marketplace:\n+      type: NAMESPACE\n+  deployer.image:\n+    type: string\n+    x-google-marketplace:\n+      type: DEPLOYER_IMAGE\n+  grpc.config.hedera.mirror.grpc.db.password:\n+    type: string\n+    default: ''\n+    description: The grpc user password\n+    title: grpc user password\n+    x-google-marketplace:\n+      type: MASKED_FIELD\n+  grpc.replicas:\n+    type: integer\n+    default: 1\n+    description: Number of grpc node replicas\n+    title: gRPC replicas\n+    minimun: 1\n+    maximum: 10\n+  importer.config.hedera.mirror.importer.db.password:\n+    type: string\n+    default: ''\n+    description: The importer user password\n+    title: importer user password\n+    x-google-marketplace:\n+      type: MASKED_FIELD\n+  importer.replicas:\n+    type: integer\n+    default: 1\n+    description: Number of importer node replicas\n+    title: importer replicas\n+    minimun: 1\n+    maximum: 10\n+  postgresql.pgpool.replicaCount:\n+    type: integer\n+    default: 1\n+    description: Number of pgpool node replicas\n+    title: pgpool replicas\n+    minimun: 1\n+    maximum: 10\n+  postgresql.postgresql.replicaCount:\n+    type: integer\n+    default: 1\n+    description: Number of postgres node replicas\n+    title: pgpool replicas\n+    minimun: 1\n+    maximum: 10\n+  postgresql.postgresql.repmgrPassword:\n+    type: string\n+    default: ''\n+    description: The repmgr user password\n+    title: repmgr user password\n+    x-google-marketplace:\n+      type: MASKED_FIELD\n+  rest.config.hedera.mirror.rest.db.password:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "81efbfd985ad501adffbe51698c0e70b25c58c90"}, "originalPosition": 127}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9958f1743264435100a779aeff85ede01507db56", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/9958f1743264435100a779aeff85ede01507db56", "committedDate": "2020-05-19T16:05:50Z", "message": "Use postgresql-repmgr naming\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b4d52f83678e3087696bfb5df43342e813075d12", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/b4d52f83678e3087696bfb5df43342e813075d12", "committedDate": "2020-05-19T18:55:50Z", "message": "Addressed feedback\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "137a60e9c90d3986d6ab82ccac79b7c28bc47c70", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/137a60e9c90d3986d6ab82ccac79b7c28bc47c70", "committedDate": "2020-05-19T20:26:39Z", "message": "Removed mirrornode property in place of importer\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6a3d297ed554d17f7dd97522bc5206b932545622", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/6a3d297ed554d17f7dd97522bc5206b932545622", "committedDate": "2020-05-19T20:37:51Z", "message": "Pull amd64 not 386 yq binary\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0ODAxNDUz", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#pullrequestreview-414801453", "createdAt": "2020-05-19T20:33:36Z", "commit": {"oid": "137a60e9c90d3986d6ab82ccac79b7c28bc47c70"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQyMDozMzozNlrOGXxj5g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQyMDozODo0NFrOGXxujg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzU4MjQzOA==", "bodyText": "Can move values-marketplace.yaml to charts/marketplace/gcp/values.yaml in follow up", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r427582438", "createdAt": "2020-05-19T20:33:36Z", "author": {"login": "steven-sheehy"}, "path": "charts/marketplace/gcp/Dockerfile", "diffHunk": "@@ -0,0 +1,29 @@\n+# build image to format chart structure and verify templates\n+FROM gcr.io/cloud-marketplace-tools/k8s/deployer_helm AS build\n+\n+# pull in chart\n+COPY hedera-mirror /tmp/chart\n+\n+# get yq and merge values files\n+RUN wget https://github.com/mikefarah/yq/releases/download/2.4.0/yq_linux_386 \\\n+    && mv yq_linux_386 /usr/local/bin/yq \\\n+    && chmod +x /usr/local/bin/yq\n+\n+RUN yq m -i --overwrite /tmp/chart/values.yaml /tmp/chart/values-marketplace.yaml", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "137a60e9c90d3986d6ab82ccac79b7c28bc47c70"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzU4NDQ0MQ==", "bodyText": "dc -> database", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r427584441", "createdAt": "2020-05-19T20:37:22Z", "author": {"login": "steven-sheehy"}, "path": "charts/marketplace/gcp/schema.yaml", "diffHunk": "@@ -0,0 +1,152 @@\n+x-google-marketplace:\n+  schemaVersion: v2\n+\n+  applicationApiVersion: v1beta1\n+\n+  # The release version, MUST match the release tag on the the deployer.\n+  publishedVersion: \"$TAG\"\n+  publishedVersionMetadata:\n+    releaseNote: >-\n+      Initial release of the Hedera Mirror Node\n+    # releaseTypes - Feature | BugFix | Security\n+    releaseTypes:\n+      - Feature\n+    # If \"recommended\" is \"true\", users using older releases are encouraged\n+    # to update as soon as possible. This is useful if, for example, this release\n+    # fixes a critical issue.\n+    recommended: false\n+\n+  # images for subcharts. Primary image is importer\n+  images:\n+    '':\n+      properties:\n+        importer.image.repository:\n+          type: REPO_WITH_REGISTRY\n+        importer.image.tag:\n+          type: TAG\n+    grpc:\n+      properties:\n+        grpc.image.repository:\n+          type: REPO_WITH_REGISTRY\n+        grpc.image.tag:\n+          type: TAG\n+    rest:\n+      properties:\n+        rest.image.repository:\n+          type: REPO_WITH_REGISTRY\n+        rest.image.tag:\n+          type: TAG\n+    postgresql-repmgr:\n+      properties:\n+        postgresql.postgresqlImage.registry:\n+          type: REGISTRY\n+        postgresql.postgresqlImage.repository:\n+          type: REPO_WITHOUT_REGISTRY\n+        postgresql.postgresqlImage.tag:\n+          type: TAG\n+    pgpool:\n+      properties:\n+        postgresql.pgpoolImage.registry:\n+          type: REGISTRY\n+        postgresql.pgpoolImage.repository:\n+          type: REPO_WITHOUT_REGISTRY\n+        postgresql.pgpoolImage.tag:\n+          type: TAG\n+\n+  # Other fields, like clusterConstraints, can be included here.\n+\n+  # The Properties and Required sections of v2 are structured the same as those of v1.\n+  # IMPORTANT: These IDs must match your listing ID in Marketplace.\n+  partnerId: hederaPartnerId\n+  solutionId: hederaMirrorSolutionId\n+\n+properties:\n+  name:\n+    type: string\n+    x-google-marketplace:\n+      type: NAME\n+  namespace:\n+    type: string\n+    x-google-marketplace:\n+      type: NAMESPACE\n+  deployer.image:\n+    type: string\n+    x-google-marketplace:\n+      type: DEPLOYER_IMAGE\n+  grpc.config.hedera.mirror.grpc.db.password:\n+    type: string\n+    default: ''\n+    description: The grpc user password\n+    title: grpc user password\n+    x-google-marketplace:\n+      type: MASKED_FIELD\n+  grpc.replicas:\n+    type: integer\n+    default: 1\n+    description: Number of grpc node replicas\n+    title: gRPC replicas\n+    minimum: 0\n+    maximum: 10\n+  importer.config.hedera.mirror.importer.db.password:\n+    type: string\n+    default: ''\n+    description: The importer user password\n+    title: importer user password\n+    x-google-marketplace:\n+      type: MASKED_FIELD\n+  importer.config.hedera.mirror.importer.db.restPassword:\n+    type: string\n+    default: ''\n+    description: The importer dc rest user password", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "137a60e9c90d3986d6ab82ccac79b7c28bc47c70"}, "originalPosition": 100}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzU4NTE2Ng==", "bodyText": "Would like all these titles to use proper casing since it appears in front of users: REST API database password", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#discussion_r427585166", "createdAt": "2020-05-19T20:38:44Z", "author": {"login": "steven-sheehy"}, "path": "charts/marketplace/gcp/schema.yaml", "diffHunk": "@@ -0,0 +1,152 @@\n+x-google-marketplace:\n+  schemaVersion: v2\n+\n+  applicationApiVersion: v1beta1\n+\n+  # The release version, MUST match the release tag on the the deployer.\n+  publishedVersion: \"$TAG\"\n+  publishedVersionMetadata:\n+    releaseNote: >-\n+      Initial release of the Hedera Mirror Node\n+    # releaseTypes - Feature | BugFix | Security\n+    releaseTypes:\n+      - Feature\n+    # If \"recommended\" is \"true\", users using older releases are encouraged\n+    # to update as soon as possible. This is useful if, for example, this release\n+    # fixes a critical issue.\n+    recommended: false\n+\n+  # images for subcharts. Primary image is importer\n+  images:\n+    '':\n+      properties:\n+        importer.image.repository:\n+          type: REPO_WITH_REGISTRY\n+        importer.image.tag:\n+          type: TAG\n+    grpc:\n+      properties:\n+        grpc.image.repository:\n+          type: REPO_WITH_REGISTRY\n+        grpc.image.tag:\n+          type: TAG\n+    rest:\n+      properties:\n+        rest.image.repository:\n+          type: REPO_WITH_REGISTRY\n+        rest.image.tag:\n+          type: TAG\n+    postgresql-repmgr:\n+      properties:\n+        postgresql.postgresqlImage.registry:\n+          type: REGISTRY\n+        postgresql.postgresqlImage.repository:\n+          type: REPO_WITHOUT_REGISTRY\n+        postgresql.postgresqlImage.tag:\n+          type: TAG\n+    pgpool:\n+      properties:\n+        postgresql.pgpoolImage.registry:\n+          type: REGISTRY\n+        postgresql.pgpoolImage.repository:\n+          type: REPO_WITHOUT_REGISTRY\n+        postgresql.pgpoolImage.tag:\n+          type: TAG\n+\n+  # Other fields, like clusterConstraints, can be included here.\n+\n+  # The Properties and Required sections of v2 are structured the same as those of v1.\n+  # IMPORTANT: These IDs must match your listing ID in Marketplace.\n+  partnerId: hederaPartnerId\n+  solutionId: hederaMirrorSolutionId\n+\n+properties:\n+  name:\n+    type: string\n+    x-google-marketplace:\n+      type: NAME\n+  namespace:\n+    type: string\n+    x-google-marketplace:\n+      type: NAMESPACE\n+  deployer.image:\n+    type: string\n+    x-google-marketplace:\n+      type: DEPLOYER_IMAGE\n+  grpc.config.hedera.mirror.grpc.db.password:\n+    type: string\n+    default: ''\n+    description: The grpc user password\n+    title: grpc user password\n+    x-google-marketplace:\n+      type: MASKED_FIELD\n+  grpc.replicas:\n+    type: integer\n+    default: 1\n+    description: Number of grpc node replicas\n+    title: gRPC replicas\n+    minimum: 0\n+    maximum: 10\n+  importer.config.hedera.mirror.importer.db.password:\n+    type: string\n+    default: ''\n+    description: The importer user password\n+    title: importer user password\n+    x-google-marketplace:\n+      type: MASKED_FIELD\n+  importer.config.hedera.mirror.importer.db.restPassword:\n+    type: string\n+    default: ''\n+    description: The importer dc rest user password\n+    title: importer db rest user password\n+    x-google-marketplace:\n+      type: MASKED_FIELD\n+  importer.replicas:\n+    type: integer\n+    default: 1\n+    description: Number of importer node replicas\n+    title: importer replicas\n+    minimum: 1\n+    maximum: 10\n+  postgresql.pgpool.replicaCount:\n+    type: integer\n+    default: 1\n+    description: Number of pgpool node replicas\n+    title: pgpool replicas\n+    minimum: 1\n+    maximum: 10\n+  postgresql.postgresql.replicaCount:\n+    type: integer\n+    default: 1\n+    description: Number of postgres node replicas\n+    title: pgpool replicas\n+    minimum: 1\n+    maximum: 10\n+  postgresql.postgresql.repmgrPassword:\n+    type: string\n+    default: ''\n+    description: The repmgr user password\n+    title: repmgr user password\n+    x-google-marketplace:\n+      type: MASKED_FIELD\n+  rest.config.hedera.mirror.rest.db.password:\n+    type: string\n+    default: ''\n+    description: The rest user password\n+    title: rest user password", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "137a60e9c90d3986d6ab82ccac79b7c28bc47c70"}, "originalPosition": 136}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0ODk1OTcx", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/740#pullrequestreview-414895971", "createdAt": "2020-05-19T23:39:05Z", "commit": {"oid": "6a3d297ed554d17f7dd97522bc5206b932545622"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3120, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}