{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDExMTA1MDcz", "number": 727, "title": "Port running hash version to V0.10", "bodyText": "Detailed description:\n\nCherry pick Hedera Protobuf 0.4.2 r5-rc4 update (#721)\nCherry pick Added running_hash_version migration (#726)\nBumped version to 0.10.0-rc2\n\nWhich issue(s) this PR fixes:\nSpecial notes for your reviewer:\nChecklist\n\n Documentation added\n Tests updated", "createdAt": "2020-04-30T03:38:22Z", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/727", "merged": true, "mergeCommit": {"oid": "9023f407f10269c6e62554c92d2422b862641240"}, "closed": true, "closedAt": "2020-04-30T20:58:00Z", "author": {"login": "Nana-EC"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABccijiYgH2gAyNDExMTA1MDczOjY4OWE4Y2RiNzBiYzAyYTI1NTE3ZWYxMzIxNTcxMGFjYzc5MzFiMGU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcczT4RAFqTQwMzg2Mjg0MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "689a8cdb70bc02a25517ef13215710acc7931b0e", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/689a8cdb70bc02a25517ef13215710acc7931b0e", "committedDate": "2020-04-30T01:11:33Z", "message": "Pull in Hedera Protobuf 0.4.2 for r5-rc4 update (#721)\n\n* Pull in Hedera Protobug 0.4.2 for r5-rc4 update\r\nDetailed description:\r\nThe r5-rc4 update contained a few changes and additions.\r\nThis change\r\n\r\nupdates hedera-protobuf-java-api to v0.4.2\r\nadd migration v1.23 which updates t_transaction_types and t_transaction_results tables\r\nUpdates TransactionTypeEnum, TransactionHandlerFactory, RecordItemParser with updated Claim => LiveHash change\r\nUpdates tests with appropriate change logic\r\nWhich issue(s) this PR fixes:\r\nFixes #722\r\n\r\n\r\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>\r\n\r\n* Addressed feedback\r\n\r\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>\r\n\r\n* Fixed arrangement\r\n\r\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>\r\n\r\n* minor variable rename\r\n\r\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "daefc161c583c3d1f3b9479307c4a691a6e6a934", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/daefc161c583c3d1f3b9479307c4a691a6e6a934", "committedDate": "2020-04-30T01:28:00Z", "message": "Bump version for v0.10.0.rc2\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "348973809f50cdf929238b80015ad95840aa4c14", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/348973809f50cdf929238b80015ad95840aa4c14", "committedDate": "2020-04-30T02:40:19Z", "message": "Added running_hash_version migration (#726)\n\n* Migrate db to add runningHashVersion\nDetailed description:\nThe r5-rc4 update contained a few changes and additions.\nThis change\n\nAdds the running_hash_version column to the topic_message table\nSets running_hash_version of topic_message table if null. Based on comparison of consensus_timestamp with r5-rc4 deployDate it will be set to default\nSets default running hash version as configureable value\nWhich issue(s) this PR fixes:\nFixes #688\n\nSpecial notes for your reviewer:\nRan migration locally to verify cases of\n\nNo running_hash_version with messages pre and post deploy date\nrunning_hash_version column present with empty values\nrunning_hash_version column present and set\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>\n\n* Set time to May 5th, at 19:00 UTC and updated config name\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>\n\n* Address feedback on naming and constraints\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>\n\n* Fixed repeated runing_hash column\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>\n\n* Removed value of topicRunningHashV2AddedTimestamp to enforce deployment time set\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a7588d0ab72c0b04432333825ec838966d3a51f6", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/a7588d0ab72c0b04432333825ec838966d3a51f6", "committedDate": "2020-04-30T16:18:20Z", "message": "Updated topicRunningHashV2AddedTimestamp comment\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9da4d8eeab4643f857ceae258b7405189c449e00", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/9da4d8eeab4643f857ceae258b7405189c449e00", "committedDate": "2020-04-30T16:22:13Z", "message": "Corrected topicRunningHashV2AddedTimestamp  comment for current migration logic\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAzNzc1OTIx", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/727#pullrequestreview-403775921", "createdAt": "2020-04-30T18:32:03Z", "commit": {"oid": "9da4d8eeab4643f857ceae258b7405189c449e00"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a10e009fc0e6a81353a7c0659bb42f8bf4240b42", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/a10e009fc0e6a81353a7c0659bb42f8bf4240b42", "committedDate": "2020-04-30T19:49:36Z", "message": "Helm chart dependency upgrades\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAzODI3NjE0", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/727#pullrequestreview-403827614", "createdAt": "2020-04-30T19:48:08Z", "commit": {"oid": "9da4d8eeab4643f857ceae258b7405189c449e00"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQxOTo0ODowOFrOGO36Hw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQxOTo0ODowOFrOGO36Hw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODI0OTI0Nw==", "bodyText": "These are indented wrong and will be ignored. Please undo", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/727#discussion_r418249247", "createdAt": "2020-04-30T19:48:08Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-importer/src/main/resources/application.yml", "diffHunk": "@@ -63,14 +66,15 @@ spring:\n       api-user: ${hedera.mirror.db.api-username}\n       db-name: ${hedera.mirror.db.name}\n       db-user: ${hedera.mirror.db.username}\n-  jpa:\n-    properties:\n-      hibernate:\n-        generate_statistics: true\n-  task:\n-    scheduling:\n-      pool:\n-        size: 6\n-  test:\n-    database:\n-      replace: NONE\n+      topicRunningHashV2AddedTimestamp: ${hedera.mirror.topicRunningHashV2AddedTimestamp}\n+jpa:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9da4d8eeab4643f857ceae258b7405189c449e00"}, "originalPosition": 26}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "55d1606c12bf18311aacc07b5ce12b20e2dfe478", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/55d1606c12bf18311aacc07b5ce12b20e2dfe478", "committedDate": "2020-04-30T20:19:35Z", "message": "Fixed indentation of spring jpa, task and test\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAzODYyODQw", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/727#pullrequestreview-403862840", "createdAt": "2020-04-30T20:42:50Z", "commit": {"oid": "55d1606c12bf18311aacc07b5ce12b20e2dfe478"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3111, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}