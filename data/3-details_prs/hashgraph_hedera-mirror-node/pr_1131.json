{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAzNzU1ODIw", "number": 1131, "title": "Updated Acceptance test to support base HTS scenarios", "bodyText": "Detailed description:\n\nAdd hts.feature file to describe basic HTS tests\nAdd setup.feature file to support occasional setup operations such as funding accounts and establishing 2 well funded and associated token accounts\nUpdate sdk version with new its alpha support in v1\nUpdate client files to better share transaction execution logic\nAdd logic to easily calculate transaction costs based on tests run\n\nWhich issue(s) this PR fixes:\nFixes #1132\nSpecial notes for your reviewer:\nInitial coverage.\nSome improvements could be made but would like to get this in and cherry picked for v0.20 so it can be a part of the testing as it's rolled out.\nChecklist\n\n Documentation added\n Tests updated", "createdAt": "2020-10-15T02:16:55Z", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1131", "merged": true, "mergeCommit": {"oid": "66ea0f03e951444bf0e023fa0ed01cc493864f02"}, "closed": true, "closedAt": "2020-10-16T15:36:50Z", "author": {"login": "Nana-EC"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdSoHvoAH2gAyNTAzNzU1ODIwOjQ0MDYwNmQxOTM5ZjBhNjcxY2Q1MzBlMWJlMGQ3NzhkZDg5NTNhYTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdTIEYEgFqTUxMDU1MjQ1Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "440606d1939f0a671cd530e1be0d778dd8953aa4", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/440606d1939f0a671cd530e1be0d778dd8953aa4", "committedDate": "2020-10-15T02:12:32Z", "message": "Updated Acceptance test to support base HTS scenarios\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5NjE4Njkz", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1131#pullrequestreview-509618693", "createdAt": "2020-10-15T17:38:59Z", "commit": {"oid": "440606d1939f0a671cd530e1be0d778dd8953aa4"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d8c77347812dfb15305d68aa0251e9640998b27e", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/d8c77347812dfb15305d68aa0251e9640998b27e", "committedDate": "2020-10-15T23:52:22Z", "message": "Added simple REST API verifications post token transctions\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwNTUyNDU3", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1131#pullrequestreview-510552457", "createdAt": "2020-10-16T14:58:40Z", "commit": {"oid": "d8c77347812dfb15305d68aa0251e9640998b27e"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxNDo1ODo0MFrOHjDRAQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxNDo1OTozMFrOHjDVQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjUxNTcxMw==", "bodyText": "Shouldn't construct a client for every request. Create it as a bean once and reuse it.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1131#discussion_r506515713", "createdAt": "2020-10-16T14:58:40Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-test/src/test/java/com/hedera/mirror/test/e2e/acceptance/client/MirrorNodeClient.java", "diffHunk": "@@ -108,6 +118,50 @@ public SubscriptionResponse subscribeToTopicAndRetrieveMessages(MirrorConsensusT\n         return subscriptionResponse;\n     }\n \n+    public ClientResponse verifyAccountRestEndpoint(String accountId, int lastCount) {\n+        log.debug(\"Verify account {} is returned by Mirror Node\", accountId);\n+        String endpoint = String.format(\"/api/v1/accounts/%s?order=desc&limit=%d\", accountId, lastCount);\n+        return verifyRestEndpoint(endpoint);\n+    }\n+\n+    public ClientResponse verifyAccountBalanceRestEndpoint(String accountId) {\n+        log.debug(\"Verify balance {} is returned by Mirror Node\", accountId);\n+        String endpoint = String.format(\"/api/v1/balances?account.id=%s\", accountId);\n+        return verifyRestEndpoint(endpoint);\n+    }\n+\n+    public ClientResponse verifyTransactionRestEntity(String transactionId) {\n+        log.debug(\"Verify transaction {} is returned by Mirror Node\", transactionId);\n+        String endpoint = \"/api/v1/transactions/\" + transactionId;\n+        return verifyRestEndpoint(endpoint);\n+    }\n+\n+    public ClientResponse verifyRestEndpoint(String apiEndpoint) {\n+        TcpClient tcpClient = TcpClient", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d8c77347812dfb15305d68aa0251e9640998b27e"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjUxNjgwMw==", "bodyText": "Shouldn't use string concatenation and formatting to construct URI as it doesn't properly escape variables. Use UriBuilder.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1131#discussion_r506516803", "createdAt": "2020-10-16T14:59:30Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-test/src/test/java/com/hedera/mirror/test/e2e/acceptance/client/MirrorNodeClient.java", "diffHunk": "@@ -108,6 +118,50 @@ public SubscriptionResponse subscribeToTopicAndRetrieveMessages(MirrorConsensusT\n         return subscriptionResponse;\n     }\n \n+    public ClientResponse verifyAccountRestEndpoint(String accountId, int lastCount) {\n+        log.debug(\"Verify account {} is returned by Mirror Node\", accountId);\n+        String endpoint = String.format(\"/api/v1/accounts/%s?order=desc&limit=%d\", accountId, lastCount);\n+        return verifyRestEndpoint(endpoint);\n+    }\n+\n+    public ClientResponse verifyAccountBalanceRestEndpoint(String accountId) {\n+        log.debug(\"Verify balance {} is returned by Mirror Node\", accountId);\n+        String endpoint = String.format(\"/api/v1/balances?account.id=%s\", accountId);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d8c77347812dfb15305d68aa0251e9640998b27e"}, "originalPosition": 37}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3600, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}