{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEwNDMwMTc4", "number": 721, "title": "Update protobuf for Hedera Node 0.5.0", "bodyText": "Detailed description:\nThe r5-rc4 update contained a few changes and additions.\nThis change\n\nupdates hedera-protobuf-java-api to v0.4.2\nadd migration v1.23 which updates t_transaction_types  and t_transaction_results tables\nUpdates TransactionTypeEnum, TransactionHandlerFactory, RecordItemParser with updated Claim => LiveHash change\nUpdates tests with appropriate change logic\n\nWhich issue(s) this PR fixes:\nFixes #722\nSpecial notes for your reviewer:\nChecklist\n\n Documentation added\n Tests updated", "createdAt": "2020-04-29T00:40:07Z", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/721", "merged": true, "mergeCommit": {"oid": "1019451a6235449b9c316f8a9b78b1d330a3e4ca"}, "closed": true, "closedAt": "2020-04-29T19:02:24Z", "author": {"login": "Nana-EC"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABccNZhKAH2gAyNDEwNDMwMTc4OjJlYmM4YWRkZmRmYjQ5NDI4ZTMyN2JmMjdiMDc4NzczZTJhYmZhYWE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABccdPcwgFqTQwMjk1Mjc1OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2ebc8addfdfb49428e327bf27b078773e2abfaaa", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/2ebc8addfdfb49428e327bf27b078773e2abfaaa", "committedDate": "2020-04-29T00:32:36Z", "message": "Pull in Hedera Protobug 0.4.2 for r5-rc4 update\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyNzI2NTMw", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/721#pullrequestreview-402726530", "createdAt": "2020-04-29T14:31:15Z", "commit": {"oid": "2ebc8addfdfb49428e327bf27b078773e2abfaaa"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxNDozMToxNlrOGOBvHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxNDozMTo1NlrOGOBxTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzM2MTY5NA==", "bodyText": "Let's standardize on always having major.minor.bugfix so it sorts properly and we can add a V1.23.1 without it looking weird: V1.23.0", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/721#discussion_r417361694", "createdAt": "2020-04-29T14:31:16Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-importer/src/main/resources/db/migration/V1.23__r5_rc4_proto_updates.sql", "diffHunk": "@@ -0,0 +1,12 @@\n+-- update transaction_types", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2ebc8addfdfb49428e327bf27b078773e2abfaaa"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzM2MjI1Mw==", "bodyText": "Why is proto_id quoted? It's an integer", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/721#discussion_r417362253", "createdAt": "2020-04-29T14:31:56Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-importer/src/main/resources/db/migration/V1.23__r5_rc4_proto_updates.sql", "diffHunk": "@@ -0,0 +1,12 @@\n+-- update transaction_types\n+UPDATE t_transaction_types set name = 'CRYPTOADDLIVEHASH' WHERE proto_id = '10';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2ebc8addfdfb49428e327bf27b078773e2abfaaa"}, "originalPosition": 2}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "847c4b7a340c086fecedb49f35000cc73f725ab5", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/847c4b7a340c086fecedb49f35000cc73f725ab5", "committedDate": "2020-04-29T15:10:39Z", "message": "Addressed feedback\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyODkwMzIw", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/721#pullrequestreview-402890320", "createdAt": "2020-04-29T17:35:57Z", "commit": {"oid": "847c4b7a340c086fecedb49f35000cc73f725ab5"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyODkyMjkw", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/721#pullrequestreview-402892290", "createdAt": "2020-04-29T17:38:35Z", "commit": {"oid": "847c4b7a340c086fecedb49f35000cc73f725ab5"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxNzozODozNVrOGOJyBA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxNzo0MToyN1rOGOJ4sw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzQ5MzUwOA==", "bodyText": "please rename the fn too", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/721#discussion_r417493508", "createdAt": "2020-04-29T17:38:35Z", "author": {"login": "apeksharma"}, "path": "hedera-mirror-importer/src/main/java/com/hedera/mirror/importer/parser/record/RecordItemParser.java", "diffHunk": "@@ -133,8 +133,8 @@ public void onItem(RecordItem recordItem) throws ImporterException {\n         if (isSuccessful) {\n             if (body.hasConsensusSubmitMessage()) {\n                 insertConsensusTopicMessage(body.getConsensusSubmitMessage(), txRecord);\n-            } else if (body.hasCryptoAddClaim()) {\n-                insertCryptoAddClaim(consensusNs, body.getCryptoAddClaim());\n+            } else if (body.hasCryptoAddLiveHash()) {\n+                insertCryptoAddClaim(consensusNs, body.getCryptoAddLiveHash());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "847c4b7a340c086fecedb49f35000cc73f725ab5"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzQ5NDgwMA==", "bodyText": "we tend to keep tests before helper fns.\nSteven suggested it earlier, i like it too. If you're good with it, please move it back.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/721#discussion_r417494800", "createdAt": "2020-04-29T17:40:46Z", "author": {"login": "apeksharma"}, "path": "hedera-mirror-importer/src/test/java/com/hedera/mirror/importer/parser/domain/PubSubMessageTest.java", "diffHunk": "@@ -234,4 +176,63 @@ private static String getExpectedTransactionRecord() {\n                 \"  }\" +\n                 \"}\";\n     }\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "847c4b7a340c086fecedb49f35000cc73f725ab5"}, "originalPosition": 80}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzQ5NTIxOQ==", "bodyText": "same. Other helper fns are in the end too, let's keep them together.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/721#discussion_r417495219", "createdAt": "2020-04-29T17:41:27Z", "author": {"login": "apeksharma"}, "path": "hedera-mirror-importer/src/test/java/com/hedera/mirror/importer/parser/record/RecordItemParserCryptoTest.java", "diffHunk": "@@ -77,6 +76,33 @@\n     private static final long[] transferAccounts = {98, 2002, 3};\n     private static final long[] transferAmounts = {1000, -2000, 20};\n \n+    private static Transaction cryptoUpdateTransaction() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "847c4b7a340c086fecedb49f35000cc73f725ab5"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "33be74d96d4ff9e8ee6fdfedc6e9bbf1556d69f5", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/33be74d96d4ff9e8ee6fdfedc6e9bbf1556d69f5", "committedDate": "2020-04-29T18:46:54Z", "message": "Fixed arrangement\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f764f67ecda05acf0d63b758dda67e64a6b6069d", "author": {"user": {"login": "Nana-EC", "name": null}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/f764f67ecda05acf0d63b758dda67e64a6b6069d", "committedDate": "2020-04-29T18:53:54Z", "message": "minor variable rename\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyOTUxNjkz", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/721#pullrequestreview-402951693", "createdAt": "2020-04-29T18:58:35Z", "commit": {"oid": "f764f67ecda05acf0d63b758dda67e64a6b6069d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyOTUyNzU5", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/721#pullrequestreview-402952759", "createdAt": "2020-04-29T19:00:05Z", "commit": {"oid": "f764f67ecda05acf0d63b758dda67e64a6b6069d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3102, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}