{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkxMTk4MDIw", "number": 1074, "title": "stateproof: download record file from stored node", "bodyText": "Signed-off-by: Xin Li xin.li@swirlds.com\n\nDetailed description:\nUpdates state proof alpha REST service to download record file from the node used to download and verify the file in importer.\n\nChanges to download the record file from the stored node which was used to download and verify the file in impoter\nAdds integration test case for the scenario that the record file is missing from the stored node\n\nWhich issue(s) this PR fixes:\nFixes #1069\nSpecial notes for your reviewer:\nChecklist\n\n Documentation added\n Tests updated", "createdAt": "2020-09-22T21:11:56Z", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1074", "merged": true, "mergeCommit": {"oid": "e471843e48fb85e8fabf6f84c3ddaeeace4e71a6"}, "closed": true, "closedAt": "2020-09-23T18:02:05Z", "author": {"login": "xin-hedera"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdLej5nAH2gAyNDkxMTk4MDIwOmU2MTZjNDAxMGU0NzQ3NTUwYjIwODNhMWIxNThmZDFjYzczMWM3YzY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdLvfaVgFqTQ5NDg1ODAzMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e616c4010e4747550b2083a1b158fd1cc731c7c6", "author": {"user": {"login": "xin-hedera", "name": "Xin Li"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/e616c4010e4747550b2083a1b158fd1cc731c7c6", "committedDate": "2020-09-22T21:06:46Z", "message": "stateproof: download record file from the node used for download and verification in importer\n\nSigned-off-by: Xin Li <xin.li@swirlds.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzODUxNTA0", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1074#pullrequestreview-493851504", "createdAt": "2020-09-22T21:13:46Z", "commit": {"oid": "e616c4010e4747550b2083a1b158fd1cc731c7c6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQyMToxMzo0NlrOHWMm7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQyMToxMzo0NlrOHWMm7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzAzNzI5Mw==", "bodyText": "address the issue config is overridden but not restored after a test case finishes. the issue was introduced in a previous ticket limiting address books to the one current to the queried transaction's consensus time", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1074#discussion_r493037293", "createdAt": "2020-09-22T21:13:46Z", "author": {"login": "xin-hedera"}, "path": "hedera-mirror-rest/__tests__/integration.test.js", "diffHunk": "@@ -367,6 +371,19 @@ describe('DB integration test - spec based', () => {\n     }\n \n     _.merge(config, override);\n+    configOverriden = true;\n+  };\n+\n+  const restoreConfig = () => {\n+    if (configOverriden) {\n+      Object.assign(config, configClone);\n+      Object.keys(config).forEach((key) => {\n+        if (!(key in configClone)) {\n+          delete config[key];\n+        }\n+      });\n+      configOverriden = false;\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e616c4010e4747550b2083a1b158fd1cc731c7c6"}, "originalPosition": 38}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzOTM0NzMz", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1074#pullrequestreview-493934733", "createdAt": "2020-09-23T00:37:22Z", "commit": {"oid": "e616c4010e4747550b2083a1b158fd1cc731c7c6"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk0ODI2MzYx", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1074#pullrequestreview-494826361", "createdAt": "2020-09-23T16:12:26Z", "commit": {"oid": "e616c4010e4747550b2083a1b158fd1cc731c7c6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QxNjoxMjoyNlrOHW2Kbg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QxNjoxMjoyNlrOHW2Kbg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzcxODEyNg==", "bodyText": "This description mentions 2019-10-11T13_32_41.443132Z.rcd while the error mentions 2019-10-11T13_35_45.120768Z.rcd. Guessing description is wrong?", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1074#discussion_r493718126", "createdAt": "2020-09-23T16:12:26Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-rest/__tests__/specs/stateproof-09-no-record-file-found-from-0.0.4.spec.json", "diffHunk": "@@ -0,0 +1,27 @@\n+{\n+  \"description\": \"Stateproof api calls with valid transaction ID but no record file found from node 0.0.4\",\n+  \"extendedDescription\": [\n+    \"When querying stateproof for transaction 0.0.111152-1570800932-629451400, expect to find it in record file \",\n+    \"2019-10-11T13_32_41.443132Z.rcd with stored node account id 0.0.4 and all 4 signature files exist. However, \",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e616c4010e4747550b2083a1b158fd1cc731c7c6"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7db5d3e4dfbb083d4b51ad471bc5f887df942a5f", "author": {"user": {"login": "xin-hedera", "name": "Xin Li"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/7db5d3e4dfbb083d4b51ad471bc5f887df942a5f", "committedDate": "2020-09-23T16:38:06Z", "message": "fix record file name in description of stateproof-09-no-record-file-found-from-0.0.4.spec.json\n\nSigned-off-by: Xin Li <xin.li@swirlds.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk0ODU4MDMz", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1074#pullrequestreview-494858033", "createdAt": "2020-09-23T16:50:15Z", "commit": {"oid": "7db5d3e4dfbb083d4b51ad471bc5f887df942a5f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3552, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}