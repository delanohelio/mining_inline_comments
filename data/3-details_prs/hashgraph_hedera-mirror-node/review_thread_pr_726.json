{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEwOTMzMzgy", "number": 726, "reviewThreads": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQyMDo0NDozMFrOD3y18w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQwMjo0MzozN1rOD33s2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5ODMxMjgzOnYy", "diffSide": "RIGHT", "path": "docs/configuration.md", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQyMDo0NDozMFrOGOQRXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQyMjo1MTozOFrOGOT1xA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU5OTgzOA==", "bodyText": "I don't think a runningHashDefaultVersion provides any value. I assume it was added in case a 3rd party runs this much later when a runningHashVersion=3+ is available? But in that case the migration logic is wrong either way as it doesn't differentiate v2 from v3 rows properly.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/726#discussion_r417599838", "createdAt": "2020-04-29T20:44:30Z", "author": {"login": "steven-sheehy"}, "path": "docs/configuration.md", "diffHunk": "@@ -68,6 +68,8 @@ value, it is recommended to only populate overridden properties in the custom `a\n | `hedera.mirror.importer.parser.record.persist.nonFeeTransfers`       | false                   | Persist non-fee transfers for transactions that explicitly request hbar transfers              |\n | `hedera.mirror.importer.parser.record.persist.systemFiles`           | true                    | Persist only system files (number lower than `1000`) to the database                           |\n | `hedera.mirror.importer.parser.record.persist.transactionBytes`      | false                   | Persist raw transaction bytes to the database                                                  |\n+| `hedera.mirror.importer.r5-rc4-deployDate`                           | 1588636800000000001     | The deployment date of the r5-rc4 version which introduced the running hash version            |\n+| `hedera.mirror.importer.runningHashDefaultVersion`                   | 2                       | The default running hash version used by service. Is 2 as of r5-rc4                            |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "207809aa02b4419543dc979ecc3aacfa4c8edabf"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYxOTkwNg==", "bodyText": "Yeah exactly. Added in case migration happens much later and the version is now > 2.\nWould it be better to remove this altogether and just hard code 2 or make the current version of 1 also configurable?", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/726#discussion_r417619906", "createdAt": "2020-04-29T21:22:06Z", "author": {"login": "Nana-EC"}, "path": "docs/configuration.md", "diffHunk": "@@ -68,6 +68,8 @@ value, it is recommended to only populate overridden properties in the custom `a\n | `hedera.mirror.importer.parser.record.persist.nonFeeTransfers`       | false                   | Persist non-fee transfers for transactions that explicitly request hbar transfers              |\n | `hedera.mirror.importer.parser.record.persist.systemFiles`           | true                    | Persist only system files (number lower than `1000`) to the database                           |\n | `hedera.mirror.importer.parser.record.persist.transactionBytes`      | false                   | Persist raw transaction bytes to the database                                                  |\n+| `hedera.mirror.importer.r5-rc4-deployDate`                           | 1588636800000000001     | The deployment date of the r5-rc4 version which introduced the running hash version            |\n+| `hedera.mirror.importer.runningHashDefaultVersion`                   | 2                       | The default running hash version used by service. Is 2 as of r5-rc4                            |", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU5OTgzOA=="}, "originalCommit": {"oid": "207809aa02b4419543dc979ecc3aacfa4c8edabf"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzY1ODMwOA==", "bodyText": "Removed", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/726#discussion_r417658308", "createdAt": "2020-04-29T22:51:38Z", "author": {"login": "Nana-EC"}, "path": "docs/configuration.md", "diffHunk": "@@ -68,6 +68,8 @@ value, it is recommended to only populate overridden properties in the custom `a\n | `hedera.mirror.importer.parser.record.persist.nonFeeTransfers`       | false                   | Persist non-fee transfers for transactions that explicitly request hbar transfers              |\n | `hedera.mirror.importer.parser.record.persist.systemFiles`           | true                    | Persist only system files (number lower than `1000`) to the database                           |\n | `hedera.mirror.importer.parser.record.persist.transactionBytes`      | false                   | Persist raw transaction bytes to the database                                                  |\n+| `hedera.mirror.importer.r5-rc4-deployDate`                           | 1588636800000000001     | The deployment date of the r5-rc4 version which introduced the running hash version            |\n+| `hedera.mirror.importer.runningHashDefaultVersion`                   | 2                       | The default running hash version used by service. Is 2 as of r5-rc4                            |", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU5OTgzOA=="}, "originalCommit": {"oid": "207809aa02b4419543dc979ecc3aacfa4c8edabf"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5ODMzMjIyOnYy", "diffSide": "RIGHT", "path": "docs/configuration.md", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQyMDo1MDoxOVrOGOQdnw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQyMDo1MDoxOVrOGOQdnw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYwMjk3NQ==", "bodyText": "Thinking of maybe changing this to 'hedera.service.v05-deployDate' & 'hedera.service.runningHashDefaultVersion'", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/726#discussion_r417602975", "createdAt": "2020-04-29T20:50:19Z", "author": {"login": "Nana-EC"}, "path": "docs/configuration.md", "diffHunk": "@@ -68,6 +68,8 @@ value, it is recommended to only populate overridden properties in the custom `a\n | `hedera.mirror.importer.parser.record.persist.nonFeeTransfers`       | false                   | Persist non-fee transfers for transactions that explicitly request hbar transfers              |\n | `hedera.mirror.importer.parser.record.persist.systemFiles`           | true                    | Persist only system files (number lower than `1000`) to the database                           |\n | `hedera.mirror.importer.parser.record.persist.transactionBytes`      | false                   | Persist raw transaction bytes to the database                                                  |\n+| `hedera.mirror.importer.r5-rc4-deployDate`                           | 1588636800000000001     | The deployment date of the r5-rc4 version which introduced the running hash version            |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "207809aa02b4419543dc979ecc3aacfa4c8edabf"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5ODMzMzMwOnYy", "diffSide": "RIGHT", "path": "docs/configuration.md", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQyMDo1MDo0MVrOGOQeUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQyMTozNjoyNVrOGOR7qw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYwMzE1Mw==", "bodyText": "Should be named after the field being added and not the release name. Maybe hedera.mirror.importer.runningHashVersionAdded. Comments should mention it's a Unix timestamp not a date. Not sure default needs to be nanosecond resolution.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/726#discussion_r417603153", "createdAt": "2020-04-29T20:50:41Z", "author": {"login": "steven-sheehy"}, "path": "docs/configuration.md", "diffHunk": "@@ -68,6 +68,8 @@ value, it is recommended to only populate overridden properties in the custom `a\n | `hedera.mirror.importer.parser.record.persist.nonFeeTransfers`       | false                   | Persist non-fee transfers for transactions that explicitly request hbar transfers              |\n | `hedera.mirror.importer.parser.record.persist.systemFiles`           | true                    | Persist only system files (number lower than `1000`) to the database                           |\n | `hedera.mirror.importer.parser.record.persist.transactionBytes`      | false                   | Persist raw transaction bytes to the database                                                  |\n+| `hedera.mirror.importer.r5-rc4-deployDate`                           | 1588636800000000001     | The deployment date of the r5-rc4 version which introduced the running hash version            |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "207809aa02b4419543dc979ecc3aacfa4c8edabf"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYyMDkyNQ==", "bodyText": "Good suggestion. I made it nanosecond resolution cause of the row level comparison made of consensustimestamps. I didn't want there to be any need for data types conversion or confusion during the migration", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/726#discussion_r417620925", "createdAt": "2020-04-29T21:24:09Z", "author": {"login": "Nana-EC"}, "path": "docs/configuration.md", "diffHunk": "@@ -68,6 +68,8 @@ value, it is recommended to only populate overridden properties in the custom `a\n | `hedera.mirror.importer.parser.record.persist.nonFeeTransfers`       | false                   | Persist non-fee transfers for transactions that explicitly request hbar transfers              |\n | `hedera.mirror.importer.parser.record.persist.systemFiles`           | true                    | Persist only system files (number lower than `1000`) to the database                           |\n | `hedera.mirror.importer.parser.record.persist.transactionBytes`      | false                   | Persist raw transaction bytes to the database                                                  |\n+| `hedera.mirror.importer.r5-rc4-deployDate`                           | 1588636800000000001     | The deployment date of the r5-rc4 version which introduced the running hash version            |", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYwMzE1Mw=="}, "originalCommit": {"oid": "207809aa02b4419543dc979ecc3aacfa4c8edabf"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYyNzA1MQ==", "bodyText": "Merging this suggestion and Appy's below to go with 'hcsRunningHashV2AddedTimestamp'", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/726#discussion_r417627051", "createdAt": "2020-04-29T21:36:25Z", "author": {"login": "Nana-EC"}, "path": "docs/configuration.md", "diffHunk": "@@ -68,6 +68,8 @@ value, it is recommended to only populate overridden properties in the custom `a\n | `hedera.mirror.importer.parser.record.persist.nonFeeTransfers`       | false                   | Persist non-fee transfers for transactions that explicitly request hbar transfers              |\n | `hedera.mirror.importer.parser.record.persist.systemFiles`           | true                    | Persist only system files (number lower than `1000`) to the database                           |\n | `hedera.mirror.importer.parser.record.persist.transactionBytes`      | false                   | Persist raw transaction bytes to the database                                                  |\n+| `hedera.mirror.importer.r5-rc4-deployDate`                           | 1588636800000000001     | The deployment date of the r5-rc4 version which introduced the running hash version            |", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYwMzE1Mw=="}, "originalCommit": {"oid": "207809aa02b4419543dc979ecc3aacfa4c8edabf"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5ODMzNDkzOnYy", "diffSide": "RIGHT", "path": "hedera-mirror-importer/src/main/resources/application.yml", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQyMDo1MTowOFrOGOQfVA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQyMToyMjozMVrOGORgmQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYwMzQxMg==", "bodyText": "Will remove to ensure it's correctly set at deployment time. Will leave tests", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/726#discussion_r417603412", "createdAt": "2020-04-29T20:51:08Z", "author": {"login": "Nana-EC"}, "path": "hedera-mirror-importer/src/main/resources/application.yml", "diffHunk": "@@ -9,6 +9,9 @@ hedera:\n         restPassword: mirror_api_pass\n         restUsername: mirror_api\n         username: mirror_node\n+      # service r5-rc4 deployDate in consensus_timestamp format e.g. 1588636800000000001, must be set for v1.23.1 migration\n+      r5-rc4-deployDate: 1588636800000000001", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "207809aa02b4419543dc979ecc3aacfa4c8edabf"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYxMzUzMw==", "bodyText": "How will you ensure it's properly set? Does it fail if unset?", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/726#discussion_r417613533", "createdAt": "2020-04-29T21:09:53Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-importer/src/main/resources/application.yml", "diffHunk": "@@ -9,6 +9,9 @@ hedera:\n         restPassword: mirror_api_pass\n         restUsername: mirror_api\n         username: mirror_node\n+      # service r5-rc4 deployDate in consensus_timestamp format e.g. 1588636800000000001, must be set for v1.23.1 migration\n+      r5-rc4-deployDate: 1588636800000000001", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYwMzQxMg=="}, "originalCommit": {"oid": "207809aa02b4419543dc979ecc3aacfa4c8edabf"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYxODkxNw==", "bodyText": "Thought I could remove but looks like I can't. It fails if unset. Setting to the expected testnet deployment for now", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/726#discussion_r417618917", "createdAt": "2020-04-29T21:20:16Z", "author": {"login": "Nana-EC"}, "path": "hedera-mirror-importer/src/main/resources/application.yml", "diffHunk": "@@ -9,6 +9,9 @@ hedera:\n         restPassword: mirror_api_pass\n         restUsername: mirror_api\n         username: mirror_node\n+      # service r5-rc4 deployDate in consensus_timestamp format e.g. 1588636800000000001, must be set for v1.23.1 migration\n+      r5-rc4-deployDate: 1588636800000000001", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYwMzQxMg=="}, "originalCommit": {"oid": "207809aa02b4419543dc979ecc3aacfa4c8edabf"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYyMDEyMQ==", "bodyText": "Don't we want it to fail? We want all the tests to have a default so they don't fail but we want deploys to fail.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/726#discussion_r417620121", "createdAt": "2020-04-29T21:22:31Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-importer/src/main/resources/application.yml", "diffHunk": "@@ -9,6 +9,9 @@ hedera:\n         restPassword: mirror_api_pass\n         restUsername: mirror_api\n         username: mirror_node\n+      # service r5-rc4 deployDate in consensus_timestamp format e.g. 1588636800000000001, must be set for v1.23.1 migration\n+      r5-rc4-deployDate: 1588636800000000001", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYwMzQxMg=="}, "originalCommit": {"oid": "207809aa02b4419543dc979ecc3aacfa4c8edabf"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5ODMzOTQ0OnYy", "diffSide": "RIGHT", "path": "hedera-mirror-importer/src/main/resources/db/migration/V1.23.1__add_topicmessage_runninghashversion.sql", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQyMDo1MjoyNFrOGOQiIQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQyMDo1MjoyNFrOGOQiIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYwNDEyOQ==", "bodyText": "alter table if exists", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/726#discussion_r417604129", "createdAt": "2020-04-29T20:52:24Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-importer/src/main/resources/db/migration/V1.23.1__add_topicmessage_runninghashversion.sql", "diffHunk": "@@ -0,0 +1,5 @@\n+-- add the running_hash_version column conditionally\n+alter table topic_message add column if not exists running_hash_version smallint null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "207809aa02b4419543dc979ecc3aacfa4c8edabf"}, "originalPosition": 2}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5ODM0MDYyOnYy", "diffSide": "RIGHT", "path": "hedera-mirror-importer/src/main/java/com/hedera/mirror/importer/domain/TopicMessage.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQyMDo1Mjo0M1rOGOQi1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQyMTo0NDoyN1rOGOSK2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYwNDMwOQ==", "bodyText": "int like the schema", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/726#discussion_r417604309", "createdAt": "2020-04-29T20:52:43Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-importer/src/main/java/com/hedera/mirror/importer/domain/TopicMessage.java", "diffHunk": "@@ -44,4 +44,6 @@\n     private long sequenceNumber;\n \n     private int topicNum;\n+\n+    private long runningHashVersion;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "207809aa02b4419543dc979ecc3aacfa4c8edabf"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYzMDkzOA==", "bodyText": "I thought that too but the transaction receipt proto returns this as long, so I opted for that and converting at write time.\nCan flip it", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/726#discussion_r417630938", "createdAt": "2020-04-29T21:44:27Z", "author": {"login": "Nana-EC"}, "path": "hedera-mirror-importer/src/main/java/com/hedera/mirror/importer/domain/TopicMessage.java", "diffHunk": "@@ -44,4 +44,6 @@\n     private long sequenceNumber;\n \n     private int topicNum;\n+\n+    private long runningHashVersion;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYwNDMwOQ=="}, "originalCommit": {"oid": "207809aa02b4419543dc979ecc3aacfa4c8edabf"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5ODM0OTQxOnYy", "diffSide": "RIGHT", "path": "hedera-mirror-importer/src/main/resources/db/migration/V1.23.1__add_topicmessage_runninghashversion.sql", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQyMDo1NToxNVrOGOQoWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQyMTo0NDo1M1rOGOSLlQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYwNTcyMw==", "bodyText": "Mixing case with previous statement. Prefer all lowercase to match majority of other migrations", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/726#discussion_r417605723", "createdAt": "2020-04-29T20:55:15Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-importer/src/main/resources/db/migration/V1.23.1__add_topicmessage_runninghashversion.sql", "diffHunk": "@@ -0,0 +1,5 @@\n+-- add the running_hash_version column conditionally\n+alter table topic_message add column if not exists running_hash_version smallint null;\n+\n+-- set rows with empty running_hash_version to 1 if r5-rc4 is not yet released and to the default value if it is\n+UPDATE topic_message SET running_hash_version = CASE WHEN consensus_timestamp < ${r5-rc4-deployDate} THEN 1 ELSE ${runningHashDefaultVersion} END WHERE running_hash_version IS NULL;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "207809aa02b4419543dc979ecc3aacfa4c8edabf"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYzMTEyNQ==", "bodyText": "Also prefer lowercase myself. Missed this in my cleanup", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/726#discussion_r417631125", "createdAt": "2020-04-29T21:44:53Z", "author": {"login": "Nana-EC"}, "path": "hedera-mirror-importer/src/main/resources/db/migration/V1.23.1__add_topicmessage_runninghashversion.sql", "diffHunk": "@@ -0,0 +1,5 @@\n+-- add the running_hash_version column conditionally\n+alter table topic_message add column if not exists running_hash_version smallint null;\n+\n+-- set rows with empty running_hash_version to 1 if r5-rc4 is not yet released and to the default value if it is\n+UPDATE topic_message SET running_hash_version = CASE WHEN consensus_timestamp < ${r5-rc4-deployDate} THEN 1 ELSE ${runningHashDefaultVersion} END WHERE running_hash_version IS NULL;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYwNTcyMw=="}, "originalCommit": {"oid": "207809aa02b4419543dc979ecc3aacfa4c8edabf"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5ODM1Nzc5OnYy", "diffSide": "RIGHT", "path": "hedera-mirror-importer/src/main/resources/db/migration/V1.23.1__add_topicmessage_runninghashversion.sql", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQyMDo1Nzo0N1rOGOQtoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQyMjo1Mjo1MVrOGOT3WQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYwNzA3Mg==", "bodyText": "Column should be constrained to be not null by the end of this migration. Can add an additional statement to add the constraint or can set to not null here and set a default of 0 or -1.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/726#discussion_r417607072", "createdAt": "2020-04-29T20:57:47Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-importer/src/main/resources/db/migration/V1.23.1__add_topicmessage_runninghashversion.sql", "diffHunk": "@@ -0,0 +1,5 @@\n+-- add the running_hash_version column conditionally\n+alter table topic_message add column if not exists running_hash_version smallint null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "207809aa02b4419543dc979ecc3aacfa4c8edabf"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYzNDA2Nw==", "bodyText": "Good suggestion. Will add the constraint", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/726#discussion_r417634067", "createdAt": "2020-04-29T21:51:20Z", "author": {"login": "Nana-EC"}, "path": "hedera-mirror-importer/src/main/resources/db/migration/V1.23.1__add_topicmessage_runninghashversion.sql", "diffHunk": "@@ -0,0 +1,5 @@\n+-- add the running_hash_version column conditionally\n+alter table topic_message add column if not exists running_hash_version smallint null;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYwNzA3Mg=="}, "originalCommit": {"oid": "207809aa02b4419543dc979ecc3aacfa4c8edabf"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzY1ODcxMw==", "bodyText": "This enforced some changes to grpc end for writing. Will leave rest of logic for PR that will expose this in the API's", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/726#discussion_r417658713", "createdAt": "2020-04-29T22:52:51Z", "author": {"login": "Nana-EC"}, "path": "hedera-mirror-importer/src/main/resources/db/migration/V1.23.1__add_topicmessage_runninghashversion.sql", "diffHunk": "@@ -0,0 +1,5 @@\n+-- add the running_hash_version column conditionally\n+alter table topic_message add column if not exists running_hash_version smallint null;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYwNzA3Mg=="}, "originalCommit": {"oid": "207809aa02b4419543dc979ecc3aacfa4c8edabf"}, "originalPosition": 2}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5ODM2NTMzOnYy", "diffSide": "RIGHT", "path": "hedera-mirror-rest/config/.node-flywaydb.integration.conf", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQyMTowMDowNFrOGOQyTw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQyMjo1MzoxNVrOGOT3-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYwODI3MQ==", "bodyText": "Missing similar change in integrationDbOps.js", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/726#discussion_r417608271", "createdAt": "2020-04-29T21:00:04Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-rest/config/.node-flywaydb.integration.conf", "diffHunk": "@@ -1,14 +1,16 @@\n module.exports = {\n     flywayArgs: {\n         'placeholders.api-user': 'mirror_api'\n-        ,'placeholders.api-password': 'mirror_api_pass'\n-        ,'placeholders.db-name': 'mirror_node_integration'\n-        ,'placeholders.db-user': 'mirror_node'\n+        , 'placeholders.api-password': 'mirror_api_pass'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "207809aa02b4419543dc979ecc3aacfa4c8edabf"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzY1ODg3Mg==", "bodyText": "Added thanks", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/726#discussion_r417658872", "createdAt": "2020-04-29T22:53:15Z", "author": {"login": "Nana-EC"}, "path": "hedera-mirror-rest/config/.node-flywaydb.integration.conf", "diffHunk": "@@ -1,14 +1,16 @@\n module.exports = {\n     flywayArgs: {\n         'placeholders.api-user': 'mirror_api'\n-        ,'placeholders.api-password': 'mirror_api_pass'\n-        ,'placeholders.db-name': 'mirror_node_integration'\n-        ,'placeholders.db-user': 'mirror_node'\n+        , 'placeholders.api-password': 'mirror_api_pass'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYwODI3MQ=="}, "originalCommit": {"oid": "207809aa02b4419543dc979ecc3aacfa4c8edabf"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5ODM2ODE4OnYy", "diffSide": "RIGHT", "path": "hedera-mirror-importer/src/main/resources/application.yml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQyMTowMDo1NFrOGOQ0Eg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQyMjo1MzozMFrOGOT4Ww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYwODcyMg==", "bodyText": "Missing similar change in datagenerator", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/726#discussion_r417608722", "createdAt": "2020-04-29T21:00:54Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-importer/src/main/resources/application.yml", "diffHunk": "@@ -64,6 +67,8 @@ spring:\n       api-user: ${hedera.mirror.importer.db.restUsername}\n       db-name: ${hedera.mirror.importer.db.name}\n       db-user: ${hedera.mirror.importer.db.username}\n+      r5-rc4-deployDate: ${hedera.mirror.importer.r5-rc4-deployDate}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "207809aa02b4419543dc979ecc3aacfa4c8edabf"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzY1ODk3MQ==", "bodyText": "Added", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/726#discussion_r417658971", "createdAt": "2020-04-29T22:53:30Z", "author": {"login": "Nana-EC"}, "path": "hedera-mirror-importer/src/main/resources/application.yml", "diffHunk": "@@ -64,6 +67,8 @@ spring:\n       api-user: ${hedera.mirror.importer.db.restUsername}\n       db-name: ${hedera.mirror.importer.db.name}\n       db-user: ${hedera.mirror.importer.db.username}\n+      r5-rc4-deployDate: ${hedera.mirror.importer.r5-rc4-deployDate}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYwODcyMg=="}, "originalCommit": {"oid": "207809aa02b4419543dc979ecc3aacfa4c8edabf"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5ODM3NzYyOnYy", "diffSide": "RIGHT", "path": "hedera-mirror-importer/src/main/java/com/hedera/mirror/importer/parser/record/RecordItemParser.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQyMTowMzozNVrOGOQ55Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQyMjo1Mzo0NVrOGOT4sQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYxMDIxMw==", "bodyText": "This doesn't normalize 0 to 1 in case this is deployed before R5 or when processing pre-R5 transactions during catch up.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/726#discussion_r417610213", "createdAt": "2020-04-29T21:03:35Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-importer/src/main/java/com/hedera/mirror/importer/parser/record/RecordItemParser.java", "diffHunk": "@@ -202,7 +202,7 @@ private void insertConsensusTopicMessage(ConsensusSubmitMessageTransactionBody t\n                 Utility.timeStampInNanos(transactionRecord.getConsensusTimestamp()),\n                 transactionBody.getMessage().toByteArray(), (int) topicId.getRealmNum(),\n                 receipt.getTopicRunningHash().toByteArray(), receipt.getTopicSequenceNumber(),\n-                (int) topicId.getTopicNum());\n+                (int) topicId.getTopicNum(), receipt.getTopicRunningHashVersion());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "207809aa02b4419543dc979ecc3aacfa4c8edabf"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzY1OTA1Nw==", "bodyText": "Added normalize logic", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/726#discussion_r417659057", "createdAt": "2020-04-29T22:53:45Z", "author": {"login": "Nana-EC"}, "path": "hedera-mirror-importer/src/main/java/com/hedera/mirror/importer/parser/record/RecordItemParser.java", "diffHunk": "@@ -202,7 +202,7 @@ private void insertConsensusTopicMessage(ConsensusSubmitMessageTransactionBody t\n                 Utility.timeStampInNanos(transactionRecord.getConsensusTimestamp()),\n                 transactionBody.getMessage().toByteArray(), (int) topicId.getRealmNum(),\n                 receipt.getTopicRunningHash().toByteArray(), receipt.getTopicSequenceNumber(),\n-                (int) topicId.getTopicNum());\n+                (int) topicId.getTopicNum(), receipt.getTopicRunningHashVersion());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYxMDIxMw=="}, "originalCommit": {"oid": "207809aa02b4419543dc979ecc3aacfa4c8edabf"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5ODk3OTA4OnYy", "diffSide": "RIGHT", "path": "hedera-mirror-importer/src/test/resources/application-default.yml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQwMToyMzo1N1rOGOWn1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQwMToyMzo1N1rOGOWn1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzcwMzg5Mw==", "bodyText": "I wouldn't think this line would be necessary.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/726#discussion_r417703893", "createdAt": "2020-04-30T01:23:57Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-importer/src/test/resources/application-default.yml", "diffHunk": "@@ -12,7 +12,12 @@ hedera:\n         exclude:\n           - entity: 0.0.999\n       network: TESTNET\n+      # timestamp service added running hash v2 in Unix timestamp format e.g. 1588705200000000000, must be set for v1.23.1 migration\n+      topicRunningHashV2AddedTimestamp: 1588705200000000000\n spring:\n   task:\n     scheduling:\n       enabled: false\n+  flyway:\n+    placeholders:\n+      topicRunningHashV2AddedTimestamp: ${hedera.mirror.importer.topicRunningHashV2AddedTimestamp}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9d9ae7310f0265e609b99db39486be0f047fdb05"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5OTAzOTY1OnYy", "diffSide": "RIGHT", "path": "hedera-mirror-grpc/src/test/resources/application-default.yml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQwMjowMDo1MlrOGOXLyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQwMjowMDo1MlrOGOXLyg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzcxMzA5OA==", "bodyText": "set to 0", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/726#discussion_r417713098", "createdAt": "2020-04-30T02:00:52Z", "author": {"login": "apeksharma"}, "path": "hedera-mirror-grpc/src/test/resources/application-default.yml", "diffHunk": "@@ -36,3 +36,4 @@ spring:\n       api-user: mirror_api\n       db-name: ${hedera.mirror.grpc.db.name}\n       db-user: ${hedera.mirror.grpc.db.username}\n+      topicRunningHashV2AddedTimestamp: 1588705200000000000", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9d9ae7310f0265e609b99db39486be0f047fdb05"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5OTA0MDU2OnYy", "diffSide": "RIGHT", "path": "hedera-mirror-datagenerator/src/main/resources/application.yml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQwMjowMToyM1rOGOXMSA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQwMjowMToyM1rOGOXMSA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzcxMzIyNA==", "bodyText": "set to 0", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/726#discussion_r417713224", "createdAt": "2020-04-30T02:01:23Z", "author": {"login": "apeksharma"}, "path": "hedera-mirror-datagenerator/src/main/resources/application.yml", "diffHunk": "@@ -59,3 +59,4 @@ spring:\n       api-user: ${hedera.mirror.datagenerator.db.restUsername}\n       db-name: ${hedera.mirror.datagenerator.db.name}\n       db-user: ${hedera.mirror.datagenerator.db.username}\n+      topicRunningHashV2AddedTimestamp: 1588705200000000000", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9d9ae7310f0265e609b99db39486be0f047fdb05"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5OTEwMzU5OnYy", "diffSide": "RIGHT", "path": "docs/configuration.md", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQwMjo0MDoxMFrOGOXw-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQxNjowNjo0N1rOGOwMPw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzcyMjYxOQ==", "bodyText": "This configuration represents time of an event which hasn't happened yet. It shouldn't have a value unless the real value is known.\nUse 0 to represent undefined.\nMigration\nupdate topic_message\nset running_hash_version =\n    case\n        when ${topicRunningHashV2AddedTimestamp} == 0 then 1\n        else case \n            when consensus_timestamp < ${topicRunningHashV2AddedTimestamp} then 1\n            else 2\n        end\n    end\nwhere running_hash_version is null;\n\nThen set the config to 0 for all tests since they start with clean db.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/726#discussion_r417722619", "createdAt": "2020-04-30T02:40:10Z", "author": {"login": "apeksharma"}, "path": "docs/configuration.md", "diffHunk": "@@ -69,6 +69,7 @@ value, it is recommended to only populate overridden properties in the custom `a\n | `hedera.mirror.importer.parser.record.persist.systemFiles`           | true                    | Persist only system files (number lower than `1000`) to the database                           |\n | `hedera.mirror.importer.parser.record.persist.transactionBytes`      | false                   | Persist raw transaction bytes to the database                                                  |\n | `hedera.mirror.importer.parser.record.sql.batchSize`                 | 100                     | When inserting transactions into db, executeBatches() is called every these many transactions  |\n+| `hedera.mirror.importer.topicRunningHashV2AddedTimestamp`            | 1588636800000000001     | The Unix timestamp when topic message running hash v2 was introduced                           |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9d9ae7310f0265e609b99db39486be0f047fdb05"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODEyMjgxNQ==", "bodyText": "This is already captured by the current logic. undefined is captured by not defining the value by default in the application.yml file used for deployment.\nI'm not sure we want to set a default 0 there and have people forget to set it.\nOn the test side the logic as is also sufficient. Setting to 0 hides the fact that versions 1 & 2 will exist in the db. We want to naturally get that reflection of production data as tests run with historic and new messages.\nAlso once we've confirmed the deployment time this value will be set appropriately.\nGonna think on this more but that's my current thinking.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/726#discussion_r418122815", "createdAt": "2020-04-30T16:06:47Z", "author": {"login": "Nana-EC"}, "path": "docs/configuration.md", "diffHunk": "@@ -69,6 +69,7 @@ value, it is recommended to only populate overridden properties in the custom `a\n | `hedera.mirror.importer.parser.record.persist.systemFiles`           | true                    | Persist only system files (number lower than `1000`) to the database                           |\n | `hedera.mirror.importer.parser.record.persist.transactionBytes`      | false                   | Persist raw transaction bytes to the database                                                  |\n | `hedera.mirror.importer.parser.record.sql.batchSize`                 | 100                     | When inserting transactions into db, executeBatches() is called every these many transactions  |\n+| `hedera.mirror.importer.topicRunningHashV2AddedTimestamp`            | 1588636800000000001     | The Unix timestamp when topic message running hash v2 was introduced                           |", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzcyMjYxOQ=="}, "originalCommit": {"oid": "9d9ae7310f0265e609b99db39486be0f047fdb05"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5OTEwODczOnYy", "diffSide": "RIGHT", "path": "hedera-mirror-importer/src/main/resources/application.yml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQwMjo0MzozN1rOGOX0BQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQxNjoxMDoxM1rOGOwVIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzcyMzM5Nw==", "bodyText": "comment can be made more useful\n\"Used for setting running hash version of topic messages when migrating from v1 to v2. If non-zero, all messages with consensusTimestamp >= this value will be marked version 2, and those less will be marked version 1. If zero, all messages are marked version 1\"", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/726#discussion_r417723397", "createdAt": "2020-04-30T02:43:37Z", "author": {"login": "apeksharma"}, "path": "hedera-mirror-importer/src/main/resources/application.yml", "diffHunk": "@@ -9,6 +9,8 @@ hedera:\n         restPassword: mirror_api_pass\n         restUsername: mirror_api\n         username: mirror_node\n+      # service v05 AddedTimestamp in consensus_timestamp format e.g. 1588636800000000001, must be set for v1.23.1 migration", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9d9ae7310f0265e609b99db39486be0f047fdb05"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODEyNTA4OQ==", "bodyText": "Will update in a future PR but  will apply to the v0.10.0 patch", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/726#discussion_r418125089", "createdAt": "2020-04-30T16:10:13Z", "author": {"login": "Nana-EC"}, "path": "hedera-mirror-importer/src/main/resources/application.yml", "diffHunk": "@@ -9,6 +9,8 @@ hedera:\n         restPassword: mirror_api_pass\n         restUsername: mirror_api\n         username: mirror_node\n+      # service v05 AddedTimestamp in consensus_timestamp format e.g. 1588636800000000001, must be set for v1.23.1 migration", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzcyMzM5Nw=="}, "originalCommit": {"oid": "9d9ae7310f0265e609b99db39486be0f047fdb05"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1007, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}