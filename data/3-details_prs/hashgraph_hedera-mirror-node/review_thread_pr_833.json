{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM2MjM4MDcw", "number": 833, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQyMToyNjozNFrOEG6xww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQyMToyNjozNFrOEG6xww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1Njg5OTIzOnYy", "diffSide": "RIGHT", "path": "charts/marketplace/gcp/release.sh", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQyMToyNjozNFrOGmAyKA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQxNTo0MDo0OFrOGnGXwA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjUxMTkxMg==", "bodyText": "You should be able to reduce this to just `docker push \"${registry}/deployer\" since you tagged it during build. All the tags should pushed along", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/833#discussion_r442511912", "createdAt": "2020-06-18T21:26:34Z", "author": {"login": "Nana-EC"}, "path": "charts/marketplace/gcp/release.sh", "diffHunk": "@@ -0,0 +1,46 @@\n+#!/usr/bin/env bash\n+set -ex\n+\n+if [[ \"$#\" -ne 1 ]]; then\n+  echo \"You must provide the Mirror Node image tag\"\n+  exit 1\n+fi\n+\n+tag=\"${1}\"\n+tag_minor=\"${tag%\\.*}\"\n+bats_tag=\"latest\"\n+postgresql_tag=\"latest\"\n+registry=\"gcr.io/mirror-node-public/hedera-mirror-node\"\n+\n+function retag() {\n+  local source=${1}\n+  local image=${2}\n+  local target=\"${registry}/${image}\"\n+\n+  # Main image\n+  if [[ -z \"${image}\" ]]; then\n+    target=\"${registry}\"\n+  fi\n+\n+  docker pull \"${source}\"\n+  docker tag \"${source}\" \"${target}:${tag}\"\n+  docker tag \"${source}\" \"${target}:${tag_minor}\"\n+  docker push \"${target}:${tag}\"\n+  docker push \"${target}:${tag_minor}\"\n+}\n+\n+# Build Marketplace deployer image\n+docker build -f ./Dockerfile -t \"${registry}/deployer:${tag}\" -t \"${registry}/deployer:${tag_minor}\" --build-arg tag=${tag} ../..\n+docker push \"${registry}/deployer:${tag}\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2c9e5f8f51f87ed342048430c7de347a631cf97e"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzY1MjAzMg==", "bodyText": "I originally had that, but then it also pushed a rc1 that I had locally. I would prefer we explicitly specify the tags to push so we don't accidentally push anything else like pre-release builds.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/833#discussion_r443652032", "createdAt": "2020-06-22T15:40:48Z", "author": {"login": "steven-sheehy"}, "path": "charts/marketplace/gcp/release.sh", "diffHunk": "@@ -0,0 +1,46 @@\n+#!/usr/bin/env bash\n+set -ex\n+\n+if [[ \"$#\" -ne 1 ]]; then\n+  echo \"You must provide the Mirror Node image tag\"\n+  exit 1\n+fi\n+\n+tag=\"${1}\"\n+tag_minor=\"${tag%\\.*}\"\n+bats_tag=\"latest\"\n+postgresql_tag=\"latest\"\n+registry=\"gcr.io/mirror-node-public/hedera-mirror-node\"\n+\n+function retag() {\n+  local source=${1}\n+  local image=${2}\n+  local target=\"${registry}/${image}\"\n+\n+  # Main image\n+  if [[ -z \"${image}\" ]]; then\n+    target=\"${registry}\"\n+  fi\n+\n+  docker pull \"${source}\"\n+  docker tag \"${source}\" \"${target}:${tag}\"\n+  docker tag \"${source}\" \"${target}:${tag_minor}\"\n+  docker push \"${target}:${tag}\"\n+  docker push \"${target}:${tag_minor}\"\n+}\n+\n+# Build Marketplace deployer image\n+docker build -f ./Dockerfile -t \"${registry}/deployer:${tag}\" -t \"${registry}/deployer:${tag_minor}\" --build-arg tag=${tag} ../..\n+docker push \"${registry}/deployer:${tag}\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjUxMTkxMg=="}, "originalCommit": {"oid": "2c9e5f8f51f87ed342048430c7de347a631cf97e"}, "originalPosition": 34}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1099, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}