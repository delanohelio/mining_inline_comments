{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE4NzAzMDM4", "number": 762, "title": "Add consensus_start and consensus_end to t_record_files", "bodyText": "Detailed description:\n\nAdd consensus_start and consensus_end to t_record_files\nRemove unused methods in Utility\n\nWhich issue(s) this PR fixes:\nFixes #724\nSpecial notes for your reviewer:\nConfirmed with BRD that we don't need to migrate existing data, we can just add the columns and populate new entries with the data. This sidesteps a lot of difficulty with inserting a migration into the past that runs for them but not for us since we don't have the foreign key anymore.\nChecklist\n\n Documentation added\n Tests updated", "createdAt": "2020-05-15T17:03:14Z", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/762", "merged": true, "mergeCommit": {"oid": "8d860d5ad9c6d257055f500e8c4a253375313d50"}, "closed": true, "closedAt": "2020-05-16T01:57:24Z", "author": {"login": "steven-sheehy"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABchmDfHgFqTQxMjg1NjcxNQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABchseWCgFqTQxMzAzNTQwNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEyODU2NzE1", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/762#pullrequestreview-412856715", "createdAt": "2020-05-15T17:59:53Z", "commit": {"oid": "a62e5ea51a8d77c1736fc78d2267e65662bc389c"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxNzo1OTo1M1rOGWOq5Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxODowNTo0MFrOGWO15Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTk2MjIxMw==", "bodyText": "hmm, curious why is 'add column' not highlighted in sql keyword color.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/762#discussion_r425962213", "createdAt": "2020-05-15T17:59:53Z", "author": {"login": "apeksharma"}, "path": "hedera-mirror-importer/src/main/resources/db/migration/V1.24.0__t_record_files_timestamps.sql", "diffHunk": "@@ -0,0 +1,3 @@\n+alter table if exists t_record_files\n+    add column if not exists consensus_start bigint not null default 0,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a62e5ea51a8d77c1736fc78d2267e65662bc389c"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTk2NTAyOQ==", "bodyText": "With the change that went in today, we can simply use first and last RecordItem to calculate start and end timestamps.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/762#discussion_r425965029", "createdAt": "2020-05-15T18:05:40Z", "author": {"login": "apeksharma"}, "path": "hedera-mirror-importer/src/main/java/com/hedera/mirror/importer/parser/record/RecordFileParser.java", "diffHunk": "@@ -193,13 +200,20 @@ public void loadRecordFile(StreamFileData streamFileData) throws IOException {\n                         dis.readFully(recordRawBytes);\n                         RecordItem recordItem = new RecordItem(transactionRawBytes, recordRawBytes);\n \n+                        long consensusTimestamp = Utility", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a62e5ea51a8d77c1736fc78d2267e65662bc389c"}, "originalPosition": 59}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "291554146a7df5544350a71210cb9e1c06e05b3e", "author": {"user": {"login": "steven-sheehy", "name": "Steven Sheehy"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/291554146a7df5544350a71210cb9e1c06e05b3e", "committedDate": "2020-05-15T21:30:06Z", "message": "Add consensus_start and consensus_end to t_record_files\n\nSigned-off-by: Steven Sheehy <steven.sheehy@hedera.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e7f2a6dc1bfb922176094ebf2be42343012fb10", "author": {"user": {"login": "steven-sheehy", "name": "Steven Sheehy"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/2e7f2a6dc1bfb922176094ebf2be42343012fb10", "committedDate": "2020-05-15T21:57:43Z", "message": "Fix merge conflicts\n\nSigned-off-by: Steven Sheehy <steven.sheehy@hedera.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a62e5ea51a8d77c1736fc78d2267e65662bc389c", "author": {"user": {"login": "steven-sheehy", "name": "Steven Sheehy"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/a62e5ea51a8d77c1736fc78d2267e65662bc389c", "committedDate": "2020-05-15T16:54:21Z", "message": "Add consensus_start and consensus_end to t_record_files\n\nSigned-off-by: Steven Sheehy <steven.sheehy@hedera.com>"}, "afterCommit": {"oid": "2e7f2a6dc1bfb922176094ebf2be42343012fb10", "author": {"user": {"login": "steven-sheehy", "name": "Steven Sheehy"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/2e7f2a6dc1bfb922176094ebf2be42343012fb10", "committedDate": "2020-05-15T21:57:43Z", "message": "Fix merge conflicts\n\nSigned-off-by: Steven Sheehy <steven.sheehy@hedera.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bacba60b457cc7638ee8a13dbfcb8368a81d5921", "author": {"user": {"login": "steven-sheehy", "name": "Steven Sheehy"}}, "url": "https://github.com/hashgraph/hedera-mirror-node/commit/bacba60b457cc7638ee8a13dbfcb8368a81d5921", "committedDate": "2020-05-15T22:05:19Z", "message": "Merge issue\n\nSigned-off-by: Steven Sheehy <steven.sheehy@hedera.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzMDM1NDA2", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/762#pullrequestreview-413035406", "createdAt": "2020-05-16T01:34:33Z", "commit": {"oid": "bacba60b457cc7638ee8a13dbfcb8368a81d5921"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3141, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}