{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY1NzUzNDYx", "number": 944, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQyMzoxNzowMFrOEW_uvA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQwMDowMTozNlrOEXATQQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyNTQ4Mjg0OnYy", "diffSide": "RIGHT", "path": "hedera-mirror-rest/Dockerfile", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQyMzoxNzowMFrOG-i6OQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQwMDowMjozM1rOG-jw7w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODIzNjg1Nw==", "bodyText": "Q: Is this the load balancer IP. Should it be configureable?", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/944#discussion_r468236857", "createdAt": "2020-08-10T23:17:00Z", "author": {"login": "Nana-EC"}, "path": "hedera-mirror-rest/Dockerfile", "diffHunk": "@@ -1,11 +1,16 @@\n-FROM node:13.12.0-alpine3.11 as build\n-WORKDIR /usr/src/app\n-COPY package*.json ./\n-RUN npm install --no-package-lock\n+FROM node:14.7.0-alpine3.12\n+LABEL maintainer=\"mirrornode@hedera.com\"\n \n-FROM node:13.12.0-alpine3.11\n-WORKDIR /usr/src/app\n-COPY --from=build /usr/src/app .\n-COPY . ./\n+# Setup\n+WORKDIR /home/node/app/\n+RUN chown -R node:node .\n+COPY --chown=node:node . ./\n USER node\n-CMD npm start --no-update-notifier\n+\n+# Build\n+ENV NODE_ENV production\n+RUN npm ci --only=production && npm cache clean --force --loglevel=error\n+\n+# Run\n+EXPOSE 5551", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c5ec5eab174c4e8f06006f2af7c2b8fd130c0fa3"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODI0NjkwNQ==", "bodyText": "It's the default port in the config. It's not used by Kubernetes at all. If they're using straight Docker/Docker Compose they can still map it to another port. It's basically used only for documentation purpose and does not actually publish any port.", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/944#discussion_r468246905", "createdAt": "2020-08-10T23:49:56Z", "author": {"login": "steven-sheehy"}, "path": "hedera-mirror-rest/Dockerfile", "diffHunk": "@@ -1,11 +1,16 @@\n-FROM node:13.12.0-alpine3.11 as build\n-WORKDIR /usr/src/app\n-COPY package*.json ./\n-RUN npm install --no-package-lock\n+FROM node:14.7.0-alpine3.12\n+LABEL maintainer=\"mirrornode@hedera.com\"\n \n-FROM node:13.12.0-alpine3.11\n-WORKDIR /usr/src/app\n-COPY --from=build /usr/src/app .\n-COPY . ./\n+# Setup\n+WORKDIR /home/node/app/\n+RUN chown -R node:node .\n+COPY --chown=node:node . ./\n USER node\n-CMD npm start --no-update-notifier\n+\n+# Build\n+ENV NODE_ENV production\n+RUN npm ci --only=production && npm cache clean --force --loglevel=error\n+\n+# Run\n+EXPOSE 5551", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODIzNjg1Nw=="}, "originalCommit": {"oid": "c5ec5eab174c4e8f06006f2af7c2b8fd130c0fa3"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODI1MDg2Mw==", "bodyText": "Gotcha", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/944#discussion_r468250863", "createdAt": "2020-08-11T00:02:33Z", "author": {"login": "Nana-EC"}, "path": "hedera-mirror-rest/Dockerfile", "diffHunk": "@@ -1,11 +1,16 @@\n-FROM node:13.12.0-alpine3.11 as build\n-WORKDIR /usr/src/app\n-COPY package*.json ./\n-RUN npm install --no-package-lock\n+FROM node:14.7.0-alpine3.12\n+LABEL maintainer=\"mirrornode@hedera.com\"\n \n-FROM node:13.12.0-alpine3.11\n-WORKDIR /usr/src/app\n-COPY --from=build /usr/src/app .\n-COPY . ./\n+# Setup\n+WORKDIR /home/node/app/\n+RUN chown -R node:node .\n+COPY --chown=node:node . ./\n USER node\n-CMD npm start --no-update-notifier\n+\n+# Build\n+ENV NODE_ENV production\n+RUN npm ci --only=production && npm cache clean --force --loglevel=error\n+\n+# Run\n+EXPOSE 5551", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODIzNjg1Nw=="}, "originalCommit": {"oid": "c5ec5eab174c4e8f06006f2af7c2b8fd130c0fa3"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyNTU3NjMzOnYy", "diffSide": "RIGHT", "path": ".circleci/config.yml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQwMDowMTozNlrOG-jv7w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQwNDoxNjozNFrOG-nxqw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODI1MDYwNw==", "bodyText": "nit: missing an s\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                      command: ./mvnw ${MAVEN_CLI_OPTS} deploy -DskipTest\n          \n          \n            \n                      command: ./mvnw ${MAVEN_CLI_OPTS} deploy -DskipTests", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/944#discussion_r468250607", "createdAt": "2020-08-11T00:01:36Z", "author": {"login": "Nana-EC"}, "path": ".circleci/config.yml", "diffHunk": "@@ -352,7 +352,7 @@ jobs:\n       - restore_maven_cache\n       - run:\n           name: Running maven deploy\n-          command: ./mvnw ${MAVEN_CLI_OPTS} deploy -DskipTests ${DOCKER_TAG_OVERRIDE}\n+          command: ./mvnw ${MAVEN_CLI_OPTS} deploy -DskipTest", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "745249350e138967482fc6190319e7179b9eef75"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODMxNjU4Nw==", "bodyText": "Thanks, fixed", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/944#discussion_r468316587", "createdAt": "2020-08-11T04:16:34Z", "author": {"login": "steven-sheehy"}, "path": ".circleci/config.yml", "diffHunk": "@@ -352,7 +352,7 @@ jobs:\n       - restore_maven_cache\n       - run:\n           name: Running maven deploy\n-          command: ./mvnw ${MAVEN_CLI_OPTS} deploy -DskipTests ${DOCKER_TAG_OVERRIDE}\n+          command: ./mvnw ${MAVEN_CLI_OPTS} deploy -DskipTest", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODI1MDYwNw=="}, "originalCommit": {"oid": "745249350e138967482fc6190319e7179b9eef75"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 942, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}