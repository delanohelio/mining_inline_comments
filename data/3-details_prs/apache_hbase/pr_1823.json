{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI1ODc5OTQx", "number": 1823, "title": "HBASE-24485 Backport to branch-1 HBASE-17738 BucketCache startup is slow", "bodyText": "", "createdAt": "2020-06-01T10:07:57Z", "url": "https://github.com/apache/hbase/pull/1823", "merged": true, "mergeCommit": {"oid": "d3d527637f0e83d3022d79ab5675a9b54c67be10"}, "closed": true, "closedAt": "2020-06-05T03:48:24Z", "author": {"login": "thangTang"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcm_CKRgBqjMzOTI4MTYyOTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcoJh7-AFqTQyNDk2MjQzOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c8d59655b8b42f151923f1cb692f38c6f7c8e201", "author": {"user": null}, "url": "https://github.com/apache/hbase/commit/c8d59655b8b42f151923f1cb692f38c6f7c8e201", "committedDate": "2020-06-01T10:05:31Z", "message": "HBASE-24485 Backport to branch-1 HBASE-17738 BucketCache startup is slow"}, "afterCommit": {"oid": "a4ebb5c4c0215aa681737983240a85c0229cdbbc", "author": {"user": null}, "url": "https://github.com/apache/hbase/commit/a4ebb5c4c0215aa681737983240a85c0229cdbbc", "committedDate": "2020-06-01T12:01:14Z", "message": "HBASE-24485 Backport to branch-1 HBASE-17738 BucketCache startup is slow"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a4ebb5c4c0215aa681737983240a85c0229cdbbc", "author": {"user": null}, "url": "https://github.com/apache/hbase/commit/a4ebb5c4c0215aa681737983240a85c0229cdbbc", "committedDate": "2020-06-01T12:01:14Z", "message": "HBASE-24485 Backport to branch-1 HBASE-17738 BucketCache startup is slow"}, "afterCommit": {"oid": "a50e20be41c4e504c4f67faee602840599bb9b6b", "author": {"user": null}, "url": "https://github.com/apache/hbase/commit/a50e20be41c4e504c4f67faee602840599bb9b6b", "committedDate": "2020-06-01T15:22:57Z", "message": "HBASE-24485 Backport to branch-1 HBASE-17738 BucketCache startup is slow"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyNTAxNjY5", "url": "https://github.com/apache/hbase/pull/1823#pullrequestreview-422501669", "createdAt": "2020-06-02T09:28:25Z", "commit": {"oid": "a50e20be41c4e504c4f67faee602840599bb9b6b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQwOToyODoyNVrOGdpllQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQwOToyODoyNVrOGdpllQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzc0MzI1Mw==", "bodyText": "Why change this? Seems this not belong to HBASE-17738?", "url": "https://github.com/apache/hbase/pull/1823#discussion_r433743253", "createdAt": "2020-06-02T09:28:25Z", "author": {"login": "infraio"}, "path": "hbase-common/src/main/java/org/apache/hadoop/hbase/util/ByteBufferArray.java", "diffHunk": "@@ -102,8 +170,8 @@ public int getMultiple(long start, int len, byte[] dstArray, int dstOffset) {\n \n   private final static Visitor GET_MULTIPLE_VISTOR = new Visitor() {\n     @Override\n-    public void visit(ByteBuffer bb, byte[] array, int arrayIdx, int len) {\n-      bb.get(array, arrayIdx, len);\n+    public void visit(ByteBuffer bb, int pos, byte[] array, int arrayIdx, int len) {\n+      ByteBufferUtils.copyFromBufferToArray(array, bb, pos, arrayIdx, len);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a50e20be41c4e504c4f67faee602840599bb9b6b"}, "originalPosition": 139}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyNTAxNzc2", "url": "https://github.com/apache/hbase/pull/1823#pullrequestreview-422501776", "createdAt": "2020-06-02T09:28:34Z", "commit": {"oid": "a50e20be41c4e504c4f67faee602840599bb9b6b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQwOToyODozNFrOGdpl5w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQwOToyODozNFrOGdpl5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzc0MzMzNQ==", "bodyText": "Ditto.", "url": "https://github.com/apache/hbase/pull/1823#discussion_r433743335", "createdAt": "2020-06-02T09:28:34Z", "author": {"login": "infraio"}, "path": "hbase-common/src/main/java/org/apache/hadoop/hbase/util/ByteBufferArray.java", "diffHunk": "@@ -142,11 +210,12 @@ public void visit(ByteBuffer bb, byte[] array, int arrayIdx, int len) {\n      * bytes from the buffer to the destination array, else if it is a write\n      * action, we will transfer the bytes from the source array to the buffer\n      * @param bb byte buffer\n+     * @param pos Start position in ByteBuffer\n      * @param array a source or destination byte array\n      * @param arrayOffset offset of the byte array\n      * @param len read/write length\n      */\n-    void visit(ByteBuffer bb, byte[] array, int arrayOffset, int len);\n+    void visit(ByteBuffer bb, int pos, byte[] array, int arrayOffset, int len);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a50e20be41c4e504c4f67faee602840599bb9b6b"}, "originalPosition": 164}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyNTAyMDI5", "url": "https://github.com/apache/hbase/pull/1823#pullrequestreview-422502029", "createdAt": "2020-06-02T09:28:53Z", "commit": {"oid": "a50e20be41c4e504c4f67faee602840599bb9b6b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQwOToyODo1M1rOGdpmtQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQwOToyODo1M1rOGdpmtQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzc0MzU0MQ==", "bodyText": "Ditto.", "url": "https://github.com/apache/hbase/pull/1823#discussion_r433743541", "createdAt": "2020-06-02T09:28:53Z", "author": {"login": "infraio"}, "path": "hbase-common/src/main/java/org/apache/hadoop/hbase/util/ByteBufferArray.java", "diffHunk": "@@ -169,34 +238,29 @@ void multiple(long start, int len, byte[] array, int arrayOffset, Visitor visito\n     assert startBuffer >= 0 && startBuffer < bufferCount;\n     assert (endBuffer >= 0 && endBuffer < bufferCount)\n         || (endBuffer == bufferCount && endOffset == 0);\n-    if (startBuffer >= locks.length || startBuffer < 0) {\n+    if (startBuffer >= buffers.length || startBuffer < 0) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a50e20be41c4e504c4f67faee602840599bb9b6b"}, "originalPosition": 173}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "537ab214a767851c875f9a57e3a7a612d664b3da", "author": {"user": null}, "url": "https://github.com/apache/hbase/commit/537ab214a767851c875f9a57e3a7a612d664b3da", "committedDate": "2020-06-04T04:08:51Z", "message": "HBASE-24485 Backport to branch-1 HBASE-17738 BucketCache startup is slow"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a50e20be41c4e504c4f67faee602840599bb9b6b", "author": {"user": null}, "url": "https://github.com/apache/hbase/commit/a50e20be41c4e504c4f67faee602840599bb9b6b", "committedDate": "2020-06-01T15:22:57Z", "message": "HBASE-24485 Backport to branch-1 HBASE-17738 BucketCache startup is slow"}, "afterCommit": {"oid": "537ab214a767851c875f9a57e3a7a612d664b3da", "author": {"user": null}, "url": "https://github.com/apache/hbase/commit/537ab214a767851c875f9a57e3a7a612d664b3da", "committedDate": "2020-06-04T04:08:51Z", "message": "HBASE-24485 Backport to branch-1 HBASE-17738 BucketCache startup is slow"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0MjYwNjc0", "url": "https://github.com/apache/hbase/pull/1823#pullrequestreview-424260674", "createdAt": "2020-06-04T09:24:05Z", "commit": {"oid": "537ab214a767851c875f9a57e3a7a612d664b3da"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0OTYyNDM5", "url": "https://github.com/apache/hbase/pull/1823#pullrequestreview-424962439", "createdAt": "2020-06-05T02:49:16Z", "commit": {"oid": "537ab214a767851c875f9a57e3a7a612d664b3da"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4490, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}