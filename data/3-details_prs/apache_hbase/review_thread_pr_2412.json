{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg4MzUyMzUx", "number": 2412, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QwNTo0NTowOFrOEkX_wA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QwNTo0NTowOFrOEkX_wA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA2NTc3MzQ0OnYy", "diffSide": "LEFT", "path": "hbase-mapreduce/src/main/java/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QwNTo0NTowOFrOHTSQ9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QwNjo0MTo0NlrOHTTlDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTk4NDI0NQ==", "bodyText": "Why this removed? This affect what?", "url": "https://github.com/apache/hbase/pull/2412#discussion_r489984245", "createdAt": "2020-09-17T05:45:08Z", "author": {"login": "infraio"}, "path": "hbase-mapreduce/src/main/java/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.java", "diffHunk": "@@ -819,7 +819,6 @@ public static void addHBaseDependencyJars(Configuration conf) throws IOException\n       org.apache.hbase.thirdparty.com.google.protobuf.UnsafeByteOperations.class, // hb-sh-protobuf\n       org.apache.hbase.thirdparty.io.netty.channel.Channel.class,    // hbase-shaded-netty\n       org.apache.zookeeper.ZooKeeper.class,                          // zookeeper\n-      com.google.protobuf.Message.class,                             // protobuf", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3aec1989ebe05884645be052b9217967da500f70"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDAwMTkwNg==", "bodyText": "You can see the comment on jira. The maven shade plugin will also relocate this line and then cause class not found error. I tried to not relocated protobuf, but then it leads to other problems when building hbase-shaded-client. So I suppose there are still other problems. But anyway, for master, we do not depend on protobuf any more, in hbase we all use our thirdparty protobuf, so here we could just remove it. And removing it can fix the class not found problem.", "url": "https://github.com/apache/hbase/pull/2412#discussion_r490001906", "createdAt": "2020-09-17T06:32:48Z", "author": {"login": "Apache9"}, "path": "hbase-mapreduce/src/main/java/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.java", "diffHunk": "@@ -819,7 +819,6 @@ public static void addHBaseDependencyJars(Configuration conf) throws IOException\n       org.apache.hbase.thirdparty.com.google.protobuf.UnsafeByteOperations.class, // hb-sh-protobuf\n       org.apache.hbase.thirdparty.io.netty.channel.Channel.class,    // hbase-shaded-netty\n       org.apache.zookeeper.ZooKeeper.class,                          // zookeeper\n-      com.google.protobuf.Message.class,                             // protobuf", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTk4NDI0NQ=="}, "originalCommit": {"oid": "3aec1989ebe05884645be052b9217967da500f70"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDAwNTc3Mw==", "bodyText": "https://issues.apache.org/jira/browse/HBASE-25049", "url": "https://github.com/apache/hbase/pull/2412#discussion_r490005773", "createdAt": "2020-09-17T06:41:46Z", "author": {"login": "Apache9"}, "path": "hbase-mapreduce/src/main/java/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.java", "diffHunk": "@@ -819,7 +819,6 @@ public static void addHBaseDependencyJars(Configuration conf) throws IOException\n       org.apache.hbase.thirdparty.com.google.protobuf.UnsafeByteOperations.class, // hb-sh-protobuf\n       org.apache.hbase.thirdparty.io.netty.channel.Channel.class,    // hbase-shaded-netty\n       org.apache.zookeeper.ZooKeeper.class,                          // zookeeper\n-      com.google.protobuf.Message.class,                             // protobuf", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTk4NDI0NQ=="}, "originalCommit": {"oid": "3aec1989ebe05884645be052b9217967da500f70"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2487, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}