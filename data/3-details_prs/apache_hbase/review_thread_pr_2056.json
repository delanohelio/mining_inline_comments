{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ4MjI3NDYy", "number": 2056, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxNjoxMzowMVrOEOwTSw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxNjozMjowMVrOEOwvcg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzOTA2ODkxOnYy", "diffSide": "RIGHT", "path": "hbase-common/src/saveVersion.sh", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxNjoxMzowMVrOGyFRLA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxNjo0NDowMlrOGyGa2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTE2ODMwMA==", "bodyText": "I think dropping the | between sort and xargs is a bug. I believe this calculates the sha512 of the sort error message, not the sha512 of the sha512s of the contents of all the files.\nOn a mac anyway, I get\n$ find hbase-common/src/main/ | grep -e \"\\.java\" | LC_ALL=C sort xargs gpg --print-md sha512\nsort: unrecognized option `--print-md'\nUsage: sort [-bcCdfigMmnrsuz] [-kPOS1[,POS2] ... ] [+POS1 [-POS2]] [-S memsize] [-T tmpdir] [-t separator] [-o outfile] [--batch-size size] [--files0-from file] [--heapsort] [--mergesort] [--radixsort] [--qsort] [--mmap] [--parallel thread_no] [--human-numeric-sort] [--version-sort] [--random-sort [--random-source file]] [--compress-program program] [file ...]\n$ find hbase-common/src/main/ | grep -e \"\\.java\" | LC_ALL=C sort xargs openssl dgst -sha512\nsort: invalid option -- a\nUsage: sort [-bcCdfigMmnrsuz] [-kPOS1[,POS2] ... ] [+POS1 [-POS2]] [-S memsize] [-T tmpdir] [-t separator] [-o outfile] [--batch-size size] [--files0-from file] [--heapsort] [--mergesort] [--radixsort] [--qsort] [--mmap] [--parallel thread_no] [--human-numeric-sort] [--version-sort] [--random-sort [--random-source file]] [--compress-program program] [file ...]", "url": "https://github.com/apache/hbase/pull/2056#discussion_r455168300", "createdAt": "2020-07-15T16:13:01Z", "author": {"login": "ndimiduk"}, "path": "hbase-common/src/saveVersion.sh", "diffHunk": "@@ -30,34 +30,34 @@ nativeOutputDirectory=\"$2/native/utils/\"\n pushd .\n cd ..\n \n-user=`whoami | sed -n -e 's/\\\\\\/\\\\\\\\\\\\\\\\/p'`\n+user=$(whoami | sed -n -e \"s/\\\\\\/\\\\\\\\\\\\\\\\/p\")\n if [ \"$user\" == \"\" ]\n then\n-  user=`whoami`\n+  user=$(whoami)\n fi\n-date=`date`\n-cwd=`pwd`\n+date=$(date)\n+cwd=$(pwd)\n if [ -d .svn ]; then\n-  revision=`(svn info | sed -n -e 's/Last Changed Rev: \\(.*\\)/\\1/p') || true`\n-  url=`(svn info | sed -n -e 's/^URL: \\(.*\\)/\\1/p') || true`\n+  revision=$( (svn info | sed -n -e \"s/Last Changed Rev: \\(.*\\)/\\1/p\") || true)\n+  url=$( (svn info | sed -n -e 's/^URL: \\(.*\\)/\\1/p') || true)\n elif [ -d .git ]; then\n-  revision=`git log -1 --no-show-signature --pretty=format:\"%H\" || true`\n-  hostname=`hostname`\n+  revision=$(git log -1 --no-show-signature --pretty=format:\"%H\" || true)\n+  hostname=$(hostname)\n   url=\"git://${hostname}${cwd}\"\n fi\n if [ -z \"${revision}\" ]; then\n   echo \"[WARN] revision info is empty! either we're not in VCS or VCS commands failed.\" >&2\n   revision=\"Unknown\"\n   url=\"file://$cwd\"\n fi\n-if ! [  -x \"$(command -v openssl)\" ]; then\n+if ! [ -x \"$(command -v openssl)\" ]; then\n   if ! [ -x \"$(command -v gpg)\" ]; then\n     srcChecksum=\"Unknown\"\n   else\n-    srcChecksum=`find hbase-*/src/main/ | grep -e \"\\.java\" -e \"\\.proto\" | LC_ALL=C sort | xargs gpg --print-md sha512 | gpg --print-md sha512 | cut -d ' ' -f 1`\n+    srcChecksum=$(find hbase-*/src/main/ | grep -e \"\\.java\" -e \"\\.proto\" | LC_ALL=C sort xargs gpg --print-md sha512 | gpg --print-md sha512 | tr '\\n' ' ' | sed 's/[[:space:]]*//g')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "686e04177674de657c5ee8aca6580c65a5a58166"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTE4NzE2Mg==", "bodyText": "Yes, dropping | is a bug, let me fix it.", "url": "https://github.com/apache/hbase/pull/2056#discussion_r455187162", "createdAt": "2020-07-15T16:44:02Z", "author": {"login": "petersomogyi"}, "path": "hbase-common/src/saveVersion.sh", "diffHunk": "@@ -30,34 +30,34 @@ nativeOutputDirectory=\"$2/native/utils/\"\n pushd .\n cd ..\n \n-user=`whoami | sed -n -e 's/\\\\\\/\\\\\\\\\\\\\\\\/p'`\n+user=$(whoami | sed -n -e \"s/\\\\\\/\\\\\\\\\\\\\\\\/p\")\n if [ \"$user\" == \"\" ]\n then\n-  user=`whoami`\n+  user=$(whoami)\n fi\n-date=`date`\n-cwd=`pwd`\n+date=$(date)\n+cwd=$(pwd)\n if [ -d .svn ]; then\n-  revision=`(svn info | sed -n -e 's/Last Changed Rev: \\(.*\\)/\\1/p') || true`\n-  url=`(svn info | sed -n -e 's/^URL: \\(.*\\)/\\1/p') || true`\n+  revision=$( (svn info | sed -n -e \"s/Last Changed Rev: \\(.*\\)/\\1/p\") || true)\n+  url=$( (svn info | sed -n -e 's/^URL: \\(.*\\)/\\1/p') || true)\n elif [ -d .git ]; then\n-  revision=`git log -1 --no-show-signature --pretty=format:\"%H\" || true`\n-  hostname=`hostname`\n+  revision=$(git log -1 --no-show-signature --pretty=format:\"%H\" || true)\n+  hostname=$(hostname)\n   url=\"git://${hostname}${cwd}\"\n fi\n if [ -z \"${revision}\" ]; then\n   echo \"[WARN] revision info is empty! either we're not in VCS or VCS commands failed.\" >&2\n   revision=\"Unknown\"\n   url=\"file://$cwd\"\n fi\n-if ! [  -x \"$(command -v openssl)\" ]; then\n+if ! [ -x \"$(command -v openssl)\" ]; then\n   if ! [ -x \"$(command -v gpg)\" ]; then\n     srcChecksum=\"Unknown\"\n   else\n-    srcChecksum=`find hbase-*/src/main/ | grep -e \"\\.java\" -e \"\\.proto\" | LC_ALL=C sort | xargs gpg --print-md sha512 | gpg --print-md sha512 | cut -d ' ' -f 1`\n+    srcChecksum=$(find hbase-*/src/main/ | grep -e \"\\.java\" -e \"\\.proto\" | LC_ALL=C sort xargs gpg --print-md sha512 | gpg --print-md sha512 | tr '\\n' ' ' | sed 's/[[:space:]]*//g')", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTE2ODMwMA=="}, "originalCommit": {"oid": "686e04177674de657c5ee8aca6580c65a5a58166"}, "originalPosition": 38}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzOTEyNzE5OnYy", "diffSide": "LEFT", "path": "hbase-common/src/saveVersion.sh", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxNjoyODozOFrOGyF18w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQyMzowMjowOVrOG0iM0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTE3NzcxNQ==", "bodyText": "Previous use of cut here at the end is surprising. It took only the first block...", "url": "https://github.com/apache/hbase/pull/2056#discussion_r455177715", "createdAt": "2020-07-15T16:28:38Z", "author": {"login": "ndimiduk"}, "path": "hbase-common/src/saveVersion.sh", "diffHunk": "@@ -30,34 +30,34 @@ nativeOutputDirectory=\"$2/native/utils/\"\n pushd .\n cd ..\n \n-user=`whoami | sed -n -e 's/\\\\\\/\\\\\\\\\\\\\\\\/p'`\n+user=$(whoami | sed -n -e \"s/\\\\\\/\\\\\\\\\\\\\\\\/p\")\n if [ \"$user\" == \"\" ]\n then\n-  user=`whoami`\n+  user=$(whoami)\n fi\n-date=`date`\n-cwd=`pwd`\n+date=$(date)\n+cwd=$(pwd)\n if [ -d .svn ]; then\n-  revision=`(svn info | sed -n -e 's/Last Changed Rev: \\(.*\\)/\\1/p') || true`\n-  url=`(svn info | sed -n -e 's/^URL: \\(.*\\)/\\1/p') || true`\n+  revision=$( (svn info | sed -n -e \"s/Last Changed Rev: \\(.*\\)/\\1/p\") || true)\n+  url=$( (svn info | sed -n -e 's/^URL: \\(.*\\)/\\1/p') || true)\n elif [ -d .git ]; then\n-  revision=`git log -1 --no-show-signature --pretty=format:\"%H\" || true`\n-  hostname=`hostname`\n+  revision=$(git log -1 --no-show-signature --pretty=format:\"%H\" || true)\n+  hostname=$(hostname)\n   url=\"git://${hostname}${cwd}\"\n fi\n if [ -z \"${revision}\" ]; then\n   echo \"[WARN] revision info is empty! either we're not in VCS or VCS commands failed.\" >&2\n   revision=\"Unknown\"\n   url=\"file://$cwd\"\n fi\n-if ! [  -x \"$(command -v openssl)\" ]; then\n+if ! [ -x \"$(command -v openssl)\" ]; then\n   if ! [ -x \"$(command -v gpg)\" ]; then\n     srcChecksum=\"Unknown\"\n   else\n-    srcChecksum=`find hbase-*/src/main/ | grep -e \"\\.java\" -e \"\\.proto\" | LC_ALL=C sort | xargs gpg --print-md sha512 | gpg --print-md sha512 | cut -d ' ' -f 1`", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "686e04177674de657c5ee8aca6580c65a5a58166"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTE4OTEzMw==", "bodyText": "Based on history it was used for md5 and md5sum commands but it wasn't removed when SHA512 was introduced in saveVersion.sh.\nroot@8224f4c69e6f:/# echo \"foo\" | md5sum\nd3b07384d113edec49eaa6238ad5ff00  -", "url": "https://github.com/apache/hbase/pull/2056#discussion_r455189133", "createdAt": "2020-07-15T16:47:02Z", "author": {"login": "petersomogyi"}, "path": "hbase-common/src/saveVersion.sh", "diffHunk": "@@ -30,34 +30,34 @@ nativeOutputDirectory=\"$2/native/utils/\"\n pushd .\n cd ..\n \n-user=`whoami | sed -n -e 's/\\\\\\/\\\\\\\\\\\\\\\\/p'`\n+user=$(whoami | sed -n -e \"s/\\\\\\/\\\\\\\\\\\\\\\\/p\")\n if [ \"$user\" == \"\" ]\n then\n-  user=`whoami`\n+  user=$(whoami)\n fi\n-date=`date`\n-cwd=`pwd`\n+date=$(date)\n+cwd=$(pwd)\n if [ -d .svn ]; then\n-  revision=`(svn info | sed -n -e 's/Last Changed Rev: \\(.*\\)/\\1/p') || true`\n-  url=`(svn info | sed -n -e 's/^URL: \\(.*\\)/\\1/p') || true`\n+  revision=$( (svn info | sed -n -e \"s/Last Changed Rev: \\(.*\\)/\\1/p\") || true)\n+  url=$( (svn info | sed -n -e 's/^URL: \\(.*\\)/\\1/p') || true)\n elif [ -d .git ]; then\n-  revision=`git log -1 --no-show-signature --pretty=format:\"%H\" || true`\n-  hostname=`hostname`\n+  revision=$(git log -1 --no-show-signature --pretty=format:\"%H\" || true)\n+  hostname=$(hostname)\n   url=\"git://${hostname}${cwd}\"\n fi\n if [ -z \"${revision}\" ]; then\n   echo \"[WARN] revision info is empty! either we're not in VCS or VCS commands failed.\" >&2\n   revision=\"Unknown\"\n   url=\"file://$cwd\"\n fi\n-if ! [  -x \"$(command -v openssl)\" ]; then\n+if ! [ -x \"$(command -v openssl)\" ]; then\n   if ! [ -x \"$(command -v gpg)\" ]; then\n     srcChecksum=\"Unknown\"\n   else\n-    srcChecksum=`find hbase-*/src/main/ | grep -e \"\\.java\" -e \"\\.proto\" | LC_ALL=C sort | xargs gpg --print-md sha512 | gpg --print-md sha512 | cut -d ' ' -f 1`", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTE3NzcxNQ=="}, "originalCommit": {"oid": "686e04177674de657c5ee8aca6580c65a5a58166"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjU3NDcxMg==", "bodyText": "Does tr -d '[:space:]' work? It's simpler and shorter than tr '\\n' ' ' | sed 's/[[:space:]]*//g'", "url": "https://github.com/apache/hbase/pull/2056#discussion_r456574712", "createdAt": "2020-07-17T17:23:31Z", "author": {"login": "liuml07"}, "path": "hbase-common/src/saveVersion.sh", "diffHunk": "@@ -30,34 +30,34 @@ nativeOutputDirectory=\"$2/native/utils/\"\n pushd .\n cd ..\n \n-user=`whoami | sed -n -e 's/\\\\\\/\\\\\\\\\\\\\\\\/p'`\n+user=$(whoami | sed -n -e \"s/\\\\\\/\\\\\\\\\\\\\\\\/p\")\n if [ \"$user\" == \"\" ]\n then\n-  user=`whoami`\n+  user=$(whoami)\n fi\n-date=`date`\n-cwd=`pwd`\n+date=$(date)\n+cwd=$(pwd)\n if [ -d .svn ]; then\n-  revision=`(svn info | sed -n -e 's/Last Changed Rev: \\(.*\\)/\\1/p') || true`\n-  url=`(svn info | sed -n -e 's/^URL: \\(.*\\)/\\1/p') || true`\n+  revision=$( (svn info | sed -n -e \"s/Last Changed Rev: \\(.*\\)/\\1/p\") || true)\n+  url=$( (svn info | sed -n -e 's/^URL: \\(.*\\)/\\1/p') || true)\n elif [ -d .git ]; then\n-  revision=`git log -1 --no-show-signature --pretty=format:\"%H\" || true`\n-  hostname=`hostname`\n+  revision=$(git log -1 --no-show-signature --pretty=format:\"%H\" || true)\n+  hostname=$(hostname)\n   url=\"git://${hostname}${cwd}\"\n fi\n if [ -z \"${revision}\" ]; then\n   echo \"[WARN] revision info is empty! either we're not in VCS or VCS commands failed.\" >&2\n   revision=\"Unknown\"\n   url=\"file://$cwd\"\n fi\n-if ! [  -x \"$(command -v openssl)\" ]; then\n+if ! [ -x \"$(command -v openssl)\" ]; then\n   if ! [ -x \"$(command -v gpg)\" ]; then\n     srcChecksum=\"Unknown\"\n   else\n-    srcChecksum=`find hbase-*/src/main/ | grep -e \"\\.java\" -e \"\\.proto\" | LC_ALL=C sort | xargs gpg --print-md sha512 | gpg --print-md sha512 | cut -d ' ' -f 1`", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTE3NzcxNQ=="}, "originalCommit": {"oid": "686e04177674de657c5ee8aca6580c65a5a58166"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzM5MDYwNw==", "bodyText": "I get a different output from your command, an extra %.\nfind hbase-*/src/main/ | grep -e \"\\.java\" -e \"\\.proto\" | LC_ALL=C sort | xargs gpg --print-md sha512 | gpg --print-md sha512 | tr -d '[:space:]'\n3BF4CCC275112769C7AB0EDC302793FB81005BDC9681E1604BD965918363FC93311FC60B24000563DD4D3EFDA10685F549721A28428F23487813A7397FBC9BD0%\nind hbase-*/src/main/ | grep -e \"\\.java\" -e \"\\.proto\" | LC_ALL=C sort | xargs gpg --print-md sha512 | gpg --print-md sha512 | tr '\\n' ' ' | sed 's/[[:space:]]*//g'\n3BF4CCC275112769C7AB0EDC302793FB81005BDC9681E1604BD965918363FC93311FC60B24000563DD4D3EFDA10685F549721A28428F23487813A7397FBC9BD0", "url": "https://github.com/apache/hbase/pull/2056#discussion_r457390607", "createdAt": "2020-07-20T13:37:11Z", "author": {"login": "petersomogyi"}, "path": "hbase-common/src/saveVersion.sh", "diffHunk": "@@ -30,34 +30,34 @@ nativeOutputDirectory=\"$2/native/utils/\"\n pushd .\n cd ..\n \n-user=`whoami | sed -n -e 's/\\\\\\/\\\\\\\\\\\\\\\\/p'`\n+user=$(whoami | sed -n -e \"s/\\\\\\/\\\\\\\\\\\\\\\\/p\")\n if [ \"$user\" == \"\" ]\n then\n-  user=`whoami`\n+  user=$(whoami)\n fi\n-date=`date`\n-cwd=`pwd`\n+date=$(date)\n+cwd=$(pwd)\n if [ -d .svn ]; then\n-  revision=`(svn info | sed -n -e 's/Last Changed Rev: \\(.*\\)/\\1/p') || true`\n-  url=`(svn info | sed -n -e 's/^URL: \\(.*\\)/\\1/p') || true`\n+  revision=$( (svn info | sed -n -e \"s/Last Changed Rev: \\(.*\\)/\\1/p\") || true)\n+  url=$( (svn info | sed -n -e 's/^URL: \\(.*\\)/\\1/p') || true)\n elif [ -d .git ]; then\n-  revision=`git log -1 --no-show-signature --pretty=format:\"%H\" || true`\n-  hostname=`hostname`\n+  revision=$(git log -1 --no-show-signature --pretty=format:\"%H\" || true)\n+  hostname=$(hostname)\n   url=\"git://${hostname}${cwd}\"\n fi\n if [ -z \"${revision}\" ]; then\n   echo \"[WARN] revision info is empty! either we're not in VCS or VCS commands failed.\" >&2\n   revision=\"Unknown\"\n   url=\"file://$cwd\"\n fi\n-if ! [  -x \"$(command -v openssl)\" ]; then\n+if ! [ -x \"$(command -v openssl)\" ]; then\n   if ! [ -x \"$(command -v gpg)\" ]; then\n     srcChecksum=\"Unknown\"\n   else\n-    srcChecksum=`find hbase-*/src/main/ | grep -e \"\\.java\" -e \"\\.proto\" | LC_ALL=C sort | xargs gpg --print-md sha512 | gpg --print-md sha512 | cut -d ' ' -f 1`", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTE3NzcxNQ=="}, "originalCommit": {"oid": "686e04177674de657c5ee8aca6580c65a5a58166"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzczOTQ3Mg==", "bodyText": "That's weird. I did not see in my macOS and Ubuntu Linux. But since this is not reliable, I guess we can stay with your script tr and sed - which works for me on both macOS and Ubuntu.", "url": "https://github.com/apache/hbase/pull/2056#discussion_r457739472", "createdAt": "2020-07-20T23:02:09Z", "author": {"login": "liuml07"}, "path": "hbase-common/src/saveVersion.sh", "diffHunk": "@@ -30,34 +30,34 @@ nativeOutputDirectory=\"$2/native/utils/\"\n pushd .\n cd ..\n \n-user=`whoami | sed -n -e 's/\\\\\\/\\\\\\\\\\\\\\\\/p'`\n+user=$(whoami | sed -n -e \"s/\\\\\\/\\\\\\\\\\\\\\\\/p\")\n if [ \"$user\" == \"\" ]\n then\n-  user=`whoami`\n+  user=$(whoami)\n fi\n-date=`date`\n-cwd=`pwd`\n+date=$(date)\n+cwd=$(pwd)\n if [ -d .svn ]; then\n-  revision=`(svn info | sed -n -e 's/Last Changed Rev: \\(.*\\)/\\1/p') || true`\n-  url=`(svn info | sed -n -e 's/^URL: \\(.*\\)/\\1/p') || true`\n+  revision=$( (svn info | sed -n -e \"s/Last Changed Rev: \\(.*\\)/\\1/p\") || true)\n+  url=$( (svn info | sed -n -e 's/^URL: \\(.*\\)/\\1/p') || true)\n elif [ -d .git ]; then\n-  revision=`git log -1 --no-show-signature --pretty=format:\"%H\" || true`\n-  hostname=`hostname`\n+  revision=$(git log -1 --no-show-signature --pretty=format:\"%H\" || true)\n+  hostname=$(hostname)\n   url=\"git://${hostname}${cwd}\"\n fi\n if [ -z \"${revision}\" ]; then\n   echo \"[WARN] revision info is empty! either we're not in VCS or VCS commands failed.\" >&2\n   revision=\"Unknown\"\n   url=\"file://$cwd\"\n fi\n-if ! [  -x \"$(command -v openssl)\" ]; then\n+if ! [ -x \"$(command -v openssl)\" ]; then\n   if ! [ -x \"$(command -v gpg)\" ]; then\n     srcChecksum=\"Unknown\"\n   else\n-    srcChecksum=`find hbase-*/src/main/ | grep -e \"\\.java\" -e \"\\.proto\" | LC_ALL=C sort | xargs gpg --print-md sha512 | gpg --print-md sha512 | cut -d ' ' -f 1`", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTE3NzcxNQ=="}, "originalCommit": {"oid": "686e04177674de657c5ee8aca6580c65a5a58166"}, "originalPosition": 37}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzOTE0MDk4OnYy", "diffSide": "RIGHT", "path": "hbase-common/src/saveVersion.sh", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxNjozMjowMVrOGyF-XA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxNjozNDo1NFrOGyGFLA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTE3OTg2OA==", "bodyText": "what is the purpose of the final sed? I see no difference.\n$ echo \"foo\" | openssl dgst -sha512 | sed 's/^.* //'\n0cf9180a764aba863a67b6d72f0918bc131c6772642cb2dce5a34f0a702f9470ddc2bf125c12198b1995c233c34b4afd346c54a2334c350a948a51b6e8b4e6b6\n$ echo \"foo\" | openssl dgst -sha512\n0cf9180a764aba863a67b6d72f0918bc131c6772642cb2dce5a34f0a702f9470ddc2bf125c12198b1995c233c34b4afd346c54a2334c350a948a51b6e8b4e6b6", "url": "https://github.com/apache/hbase/pull/2056#discussion_r455179868", "createdAt": "2020-07-15T16:32:01Z", "author": {"login": "ndimiduk"}, "path": "hbase-common/src/saveVersion.sh", "diffHunk": "@@ -30,34 +30,34 @@ nativeOutputDirectory=\"$2/native/utils/\"\n pushd .\n cd ..\n \n-user=`whoami | sed -n -e 's/\\\\\\/\\\\\\\\\\\\\\\\/p'`\n+user=$(whoami | sed -n -e \"s/\\\\\\/\\\\\\\\\\\\\\\\/p\")\n if [ \"$user\" == \"\" ]\n then\n-  user=`whoami`\n+  user=$(whoami)\n fi\n-date=`date`\n-cwd=`pwd`\n+date=$(date)\n+cwd=$(pwd)\n if [ -d .svn ]; then\n-  revision=`(svn info | sed -n -e 's/Last Changed Rev: \\(.*\\)/\\1/p') || true`\n-  url=`(svn info | sed -n -e 's/^URL: \\(.*\\)/\\1/p') || true`\n+  revision=$( (svn info | sed -n -e \"s/Last Changed Rev: \\(.*\\)/\\1/p\") || true)\n+  url=$( (svn info | sed -n -e 's/^URL: \\(.*\\)/\\1/p') || true)\n elif [ -d .git ]; then\n-  revision=`git log -1 --no-show-signature --pretty=format:\"%H\" || true`\n-  hostname=`hostname`\n+  revision=$(git log -1 --no-show-signature --pretty=format:\"%H\" || true)\n+  hostname=$(hostname)\n   url=\"git://${hostname}${cwd}\"\n fi\n if [ -z \"${revision}\" ]; then\n   echo \"[WARN] revision info is empty! either we're not in VCS or VCS commands failed.\" >&2\n   revision=\"Unknown\"\n   url=\"file://$cwd\"\n fi\n-if ! [  -x \"$(command -v openssl)\" ]; then\n+if ! [ -x \"$(command -v openssl)\" ]; then\n   if ! [ -x \"$(command -v gpg)\" ]; then\n     srcChecksum=\"Unknown\"\n   else\n-    srcChecksum=`find hbase-*/src/main/ | grep -e \"\\.java\" -e \"\\.proto\" | LC_ALL=C sort | xargs gpg --print-md sha512 | gpg --print-md sha512 | cut -d ' ' -f 1`\n+    srcChecksum=$(find hbase-*/src/main/ | grep -e \"\\.java\" -e \"\\.proto\" | LC_ALL=C sort xargs gpg --print-md sha512 | gpg --print-md sha512 | tr '\\n' ' ' | sed 's/[[:space:]]*//g')\n   fi\n else\n-  srcChecksum=`find hbase-*/src/main/ | grep -e \"\\.java\" -e \"\\.proto\" | LC_ALL=C sort | xargs openssl dgst -sha512 | openssl dgst -sha512 | cut -d ' ' -f 1`\n+  srcChecksum=$(find hbase-*/src/main/ | grep -e \"\\.java\" -e \"\\.proto\" | LC_ALL=C sort xargs openssl dgst -sha512 | openssl dgst -sha512 | sed 's/^.* //')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "686e04177674de657c5ee8aca6580c65a5a58166"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTE4MTYxMg==", "bodyText": "Oh, this is the example from your comment on JIRA, a difference between the mac and linux versions of openssl dgst. Disregard.", "url": "https://github.com/apache/hbase/pull/2056#discussion_r455181612", "createdAt": "2020-07-15T16:34:54Z", "author": {"login": "ndimiduk"}, "path": "hbase-common/src/saveVersion.sh", "diffHunk": "@@ -30,34 +30,34 @@ nativeOutputDirectory=\"$2/native/utils/\"\n pushd .\n cd ..\n \n-user=`whoami | sed -n -e 's/\\\\\\/\\\\\\\\\\\\\\\\/p'`\n+user=$(whoami | sed -n -e \"s/\\\\\\/\\\\\\\\\\\\\\\\/p\")\n if [ \"$user\" == \"\" ]\n then\n-  user=`whoami`\n+  user=$(whoami)\n fi\n-date=`date`\n-cwd=`pwd`\n+date=$(date)\n+cwd=$(pwd)\n if [ -d .svn ]; then\n-  revision=`(svn info | sed -n -e 's/Last Changed Rev: \\(.*\\)/\\1/p') || true`\n-  url=`(svn info | sed -n -e 's/^URL: \\(.*\\)/\\1/p') || true`\n+  revision=$( (svn info | sed -n -e \"s/Last Changed Rev: \\(.*\\)/\\1/p\") || true)\n+  url=$( (svn info | sed -n -e 's/^URL: \\(.*\\)/\\1/p') || true)\n elif [ -d .git ]; then\n-  revision=`git log -1 --no-show-signature --pretty=format:\"%H\" || true`\n-  hostname=`hostname`\n+  revision=$(git log -1 --no-show-signature --pretty=format:\"%H\" || true)\n+  hostname=$(hostname)\n   url=\"git://${hostname}${cwd}\"\n fi\n if [ -z \"${revision}\" ]; then\n   echo \"[WARN] revision info is empty! either we're not in VCS or VCS commands failed.\" >&2\n   revision=\"Unknown\"\n   url=\"file://$cwd\"\n fi\n-if ! [  -x \"$(command -v openssl)\" ]; then\n+if ! [ -x \"$(command -v openssl)\" ]; then\n   if ! [ -x \"$(command -v gpg)\" ]; then\n     srcChecksum=\"Unknown\"\n   else\n-    srcChecksum=`find hbase-*/src/main/ | grep -e \"\\.java\" -e \"\\.proto\" | LC_ALL=C sort | xargs gpg --print-md sha512 | gpg --print-md sha512 | cut -d ' ' -f 1`\n+    srcChecksum=$(find hbase-*/src/main/ | grep -e \"\\.java\" -e \"\\.proto\" | LC_ALL=C sort xargs gpg --print-md sha512 | gpg --print-md sha512 | tr '\\n' ' ' | sed 's/[[:space:]]*//g')\n   fi\n else\n-  srcChecksum=`find hbase-*/src/main/ | grep -e \"\\.java\" -e \"\\.proto\" | LC_ALL=C sort | xargs openssl dgst -sha512 | openssl dgst -sha512 | cut -d ' ' -f 1`\n+  srcChecksum=$(find hbase-*/src/main/ | grep -e \"\\.java\" -e \"\\.proto\" | LC_ALL=C sort xargs openssl dgst -sha512 | openssl dgst -sha512 | sed 's/^.* //')", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTE3OTg2OA=="}, "originalCommit": {"oid": "686e04177674de657c5ee8aca6580c65a5a58166"}, "originalPosition": 42}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2779, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}