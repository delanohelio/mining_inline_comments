{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk5NDc5ODY4", "number": 1439, "title": "HBASE-24121 [Authorization] ServiceAuthorizationManager isn't dynamically updatable. And it should be", "bodyText": "JIRA link: HBASE-24121", "createdAt": "2020-04-06T08:46:57Z", "url": "https://github.com/apache/hbase/pull/1439", "merged": true, "mergeCommit": {"oid": "1fb693b998e7d018446e8bd6733a2ee23d48e62c"}, "closed": true, "closedAt": "2020-04-09T08:28:23Z", "author": {"login": "Reidddddd"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcU6qTWAH2gAyMzk5NDc5ODY4OmVmYzJlMDI3ZjIxYzk1YWM3NGYzZjUyNmIyZDM1ODA3NzFkNjI1MTA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcV1remgH2gAyMzk5NDc5ODY4OmJiYWRmZGY1YTlhN2IxMjg3MTk2Zjg0MjBlYzQ2Mjk3Y2ViYWFjNTM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "efc2e027f21c95ac74f3f526b2d3580771d62510", "author": {"user": {"login": "Reidddddd", "name": "Reid Chan"}}, "url": "https://github.com/apache/hbase/commit/efc2e027f21c95ac74f3f526b2d3580771d62510", "committedDate": "2020-04-06T08:45:16Z", "message": "HBASE-24121 [Authorization] ServiceAuthorizationManager isn't dynamically updatable. And it should be."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg4NDQ0MjYx", "url": "https://github.com/apache/hbase/pull/1439#pullrequestreview-388444261", "createdAt": "2020-04-06T17:00:12Z", "commit": {"oid": "efc2e027f21c95ac74f3f526b2d3580771d62510"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxNzowMDoxMlrOGBhRUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxNzowMDoxMlrOGBhRUw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDI0Njg2Nw==", "bodyText": "Regarding thread-safety, do we need to synchronize on authManager while this happens? Otherwise authorize() requests and this init can race and can result in some weird authz results..", "url": "https://github.com/apache/hbase/pull/1439#discussion_r404246867", "createdAt": "2020-04-06T17:00:12Z", "author": {"login": "bharathv"}, "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/ipc/RpcServer.java", "diffHunk": "@@ -313,6 +314,7 @@ public void onConfigurationChange(Configuration newConf) {\n     if (scheduler instanceof ConfigurationObserver) {\n       ((ConfigurationObserver) scheduler).onConfigurationChange(newConf);\n     }\n+    HBasePolicyProvider.init(newConf, authManager);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "efc2e027f21c95ac74f3f526b2d3580771d62510"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "02daa1541707536f523ffab34670f8d97844ef64", "author": {"user": {"login": "Reidddddd", "name": "Reid Chan"}}, "url": "https://github.com/apache/hbase/commit/02daa1541707536f523ffab34670f8d97844ef64", "committedDate": "2020-04-07T09:40:07Z", "message": "Address review comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5MzgyOTU4", "url": "https://github.com/apache/hbase/pull/1439#pullrequestreview-389382958", "createdAt": "2020-04-07T18:30:10Z", "commit": {"oid": "02daa1541707536f523ffab34670f8d97844ef64"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QxODozMDoxMVrOGCQukQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QxODozMDoxMVrOGCQukQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTAyNDQwMQ==", "bodyText": "nit: Add a quick log that we are re-setting the authManager state, probably helps with debugging races later if any..", "url": "https://github.com/apache/hbase/pull/1439#discussion_r405024401", "createdAt": "2020-04-07T18:30:11Z", "author": {"login": "bharathv"}, "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/ipc/RpcServer.java", "diffHunk": "@@ -313,6 +315,10 @@ public void onConfigurationChange(Configuration newConf) {\n     if (scheduler instanceof ConfigurationObserver) {\n       ((ConfigurationObserver) scheduler).onConfigurationChange(newConf);\n     }\n+    synchronized (authManager) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "02daa1541707536f523ffab34670f8d97844ef64"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "38881ae685f7553e95970b534adff28a19c83538", "author": {"user": {"login": "Reidddddd", "name": "Reid Chan"}}, "url": "https://github.com/apache/hbase/commit/38881ae685f7553e95970b534adff28a19c83538", "committedDate": "2020-04-09T04:30:53Z", "message": "LOG.info for refreshing policy file"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwNDkzOTM1", "url": "https://github.com/apache/hbase/pull/1439#pullrequestreview-390493935", "createdAt": "2020-04-09T05:08:38Z", "commit": {"oid": "38881ae685f7553e95970b534adff28a19c83538"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bbadfdf5a9a7b1287196f8420ec46297cebaac53", "author": {"user": {"login": "Reidddddd", "name": "Reid Chan"}}, "url": "https://github.com/apache/hbase/commit/bbadfdf5a9a7b1287196f8420ec46297cebaac53", "committedDate": "2020-04-09T05:30:57Z", "message": "Hard code log info"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2313, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}