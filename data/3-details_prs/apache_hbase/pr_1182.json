{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc2NDcyMjQ3", "number": 1182, "title": "HBASE-23864 No need to submit SplitTableRegionProcedure/MergeTableReg\u2026", "bodyText": "\u2026ionsProcedure when split/merge is disabled", "createdAt": "2020-02-18T08:05:32Z", "url": "https://github.com/apache/hbase/pull/1182", "merged": true, "mergeCommit": {"oid": "53afc1dc101933fbb593cbf5755c497078025ecc"}, "closed": true, "closedAt": "2020-02-19T10:20:13Z", "author": {"login": "infraio"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcFdtHrAFqTM2MDE0NjExNg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcFxW-mgFqTM2MDg4NzkwMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwMTQ2MTE2", "url": "https://github.com/apache/hbase/pull/1182#pullrequestreview-360146116", "createdAt": "2020-02-18T08:32:08Z", "commit": {"oid": "950d0d7c7596eb984dfe37593765652fbe550f55"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQwODozMjowOFrOFq5KVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQwODozMjowOFrOFq5KVw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDUyMTA0Nw==", "bodyText": "You can add extra checks before scheduling the procedure to make the request fail fast, but I do not think we should remove the checks in the procedure? There could be race, that when scheduling, split and merge are enabled but when you actually execute the procedure, the flags are turned to disabled...", "url": "https://github.com/apache/hbase/pull/1182#discussion_r380521047", "createdAt": "2020-02-18T08:32:08Z", "author": {"login": "Apache9"}, "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/master/assignment/MergeTableRegionsProcedure.java", "diffHunk": "@@ -453,13 +453,6 @@ private boolean prepareMergeRegion(final MasterProcedureEnv env) throws IOExcept\n       throw new MergeRegionException(\"Skip merging regions \" +\n           RegionInfo.getShortNameToLog(regionsToMerge) + \", because we are snapshotting \" + tn);\n     }\n-    if (!env.getMasterServices().isSplitOrMergeEnabled(MasterSwitchType.MERGE)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "950d0d7c7596eb984dfe37593765652fbe550f55"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "950d0d7c7596eb984dfe37593765652fbe550f55", "author": {"user": {"login": "infraio", "name": "Guanghao Zhang"}}, "url": "https://github.com/apache/hbase/commit/950d0d7c7596eb984dfe37593765652fbe550f55", "committedDate": "2020-02-18T08:01:00Z", "message": "HBASE-23864 No need to submit SplitTableRegionProcedure/MergeTableRegionsProcedure when split/merge is disabled"}, "afterCommit": {"oid": "76d1db861716d9185b72a57033369a4caa4344ed", "author": {"user": {"login": "infraio", "name": "Guanghao Zhang"}}, "url": "https://github.com/apache/hbase/commit/76d1db861716d9185b72a57033369a4caa4344ed", "committedDate": "2020-02-18T13:34:01Z", "message": "HBASE-23864 No need to submit SplitTableRegionProcedure/MergeTableRegionsProcedure when split/merge is disabled"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "76d1db861716d9185b72a57033369a4caa4344ed", "author": {"user": {"login": "infraio", "name": "Guanghao Zhang"}}, "url": "https://github.com/apache/hbase/commit/76d1db861716d9185b72a57033369a4caa4344ed", "committedDate": "2020-02-18T13:34:01Z", "message": "HBASE-23864 No need to submit SplitTableRegionProcedure/MergeTableRegionsProcedure when split/merge is disabled"}, "afterCommit": {"oid": "719550bf605e34da128b8258a7fc5947f42891db", "author": {"user": {"login": "infraio", "name": "Guanghao Zhang"}}, "url": "https://github.com/apache/hbase/commit/719550bf605e34da128b8258a7fc5947f42891db", "committedDate": "2020-02-18T23:37:33Z", "message": "HBASE-23864 No need to submit SplitTableRegionProcedure/MergeTableRegionsProcedure when split/merge is disabled"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ab99ea6332b786b05acae01c0f484cb79e1db310", "author": {"user": {"login": "infraio", "name": "Guanghao Zhang"}}, "url": "https://github.com/apache/hbase/commit/ab99ea6332b786b05acae01c0f484cb79e1db310", "committedDate": "2020-02-18T23:40:08Z", "message": "HBASE-23864 No need to submit SplitTableRegionProcedure/MergeTableRegionsProcedure when split/merge is disabled"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "719550bf605e34da128b8258a7fc5947f42891db", "author": {"user": {"login": "infraio", "name": "Guanghao Zhang"}}, "url": "https://github.com/apache/hbase/commit/719550bf605e34da128b8258a7fc5947f42891db", "committedDate": "2020-02-18T23:37:33Z", "message": "HBASE-23864 No need to submit SplitTableRegionProcedure/MergeTableRegionsProcedure when split/merge is disabled"}, "afterCommit": {"oid": "ab99ea6332b786b05acae01c0f484cb79e1db310", "author": {"user": {"login": "infraio", "name": "Guanghao Zhang"}}, "url": "https://github.com/apache/hbase/commit/ab99ea6332b786b05acae01c0f484cb79e1db310", "committedDate": "2020-02-18T23:40:08Z", "message": "HBASE-23864 No need to submit SplitTableRegionProcedure/MergeTableRegionsProcedure when split/merge is disabled"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwODg3OTAy", "url": "https://github.com/apache/hbase/pull/1182#pullrequestreview-360887902", "createdAt": "2020-02-19T07:26:09Z", "commit": {"oid": "ab99ea6332b786b05acae01c0f484cb79e1db310"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2810, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}