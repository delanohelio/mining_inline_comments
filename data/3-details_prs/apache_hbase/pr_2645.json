{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE4OTI5NTA4", "number": 2645, "title": "HBASE-25272 Support scan on a specific replica", "bodyText": "", "createdAt": "2020-11-11T04:07:35Z", "url": "https://github.com/apache/hbase/pull/2645", "merged": true, "mergeCommit": {"oid": "b19df076a47ad8a76b3927a23c1f3c4956a6ee65"}, "closed": true, "closedAt": "2020-11-12T13:25:53Z", "author": {"login": "Apache9"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdbWAs0AFqTUyNzg0ODk4Nw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdbuEsYgH2gAyNTE4OTI5NTA4OmExOTc2ZjYxM2Y2YWU5MGI1MmNmMjljZTBjMmJkZTYyYmQ0ZmJiYzU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3ODQ4OTg3", "url": "https://github.com/apache/hbase/pull/2645#pullrequestreview-527848987", "createdAt": "2020-11-11T04:11:52Z", "commit": {"oid": "d545591849ec4403aa9d1c88c54703f23fafe073"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4MzQ0MjA5", "url": "https://github.com/apache/hbase/pull/2645#pullrequestreview-528344209", "createdAt": "2020-11-11T16:40:08Z", "commit": {"oid": "d545591849ec4403aa9d1c88c54703f23fafe073"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxNjo0MDowOVrOHxVKOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxNjo0MDowOVrOHxVKOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTQ4ODk1NQ==", "bodyText": "More changes are needed in ScannerCallableWithReplicas. It is hard to copy the diff in the right format, so I post the patch in the jira. Put the link here.\ncode diff", "url": "https://github.com/apache/hbase/pull/2645#discussion_r521488955", "createdAt": "2020-11-11T16:40:09Z", "author": {"login": "huaxiangsun"}, "path": "hbase-client/src/main/java/org/apache/hadoop/hbase/client/ScannerCallableWithReplicas.java", "diffHunk": "@@ -209,13 +209,13 @@ public MoreResults moreResultsForScan() {\n         LOG.debug(\"Scan with primary region returns \" + e.getCause());\n       }\n \n-      // If rl's size is 1 or scan's consitency is strong, it needs to throw\n-      // out the exception from the primary replica\n-      if ((regionReplication == 1) || (scan.getConsistency() == Consistency.STRONG)) {\n+      // If rl's size is 1 or scan's consistency is strong or a specific replica id has been\n+      // specified, it needs to throw out the exception from the first tried replica\n+      if (regionReplication == 1 || scan.getConsistency() == Consistency.STRONG ||\n+        scan.getReplicaId() >= 0) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d545591849ec4403aa9d1c88c54703f23fafe073"}, "originalPosition": 19}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4Njc5OTAw", "url": "https://github.com/apache/hbase/pull/2645#pullrequestreview-528679900", "createdAt": "2020-11-12T01:57:40Z", "commit": {"oid": "d545591849ec4403aa9d1c88c54703f23fafe073"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb8e8d4f313914a87914f12304a3b9a28e44c32f", "author": {"user": {"login": "Apache9", "name": "Duo Zhang"}}, "url": "https://github.com/apache/hbase/commit/cb8e8d4f313914a87914f12304a3b9a28e44c32f", "committedDate": "2020-11-12T03:51:20Z", "message": "HBASE-25272 Support scan on a specific replica"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d545591849ec4403aa9d1c88c54703f23fafe073", "author": {"user": {"login": "Apache9", "name": "Duo Zhang"}}, "url": "https://github.com/apache/hbase/commit/d545591849ec4403aa9d1c88c54703f23fafe073", "committedDate": "2020-11-11T04:06:41Z", "message": "HBASE-25272 Support scan on a specific replica"}, "afterCommit": {"oid": "cb8e8d4f313914a87914f12304a3b9a28e44c32f", "author": {"user": {"login": "Apache9", "name": "Duo Zhang"}}, "url": "https://github.com/apache/hbase/commit/cb8e8d4f313914a87914f12304a3b9a28e44c32f", "committedDate": "2020-11-12T03:51:20Z", "message": "HBASE-25272 Support scan on a specific replica"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4NzQ3NzAy", "url": "https://github.com/apache/hbase/pull/2645#pullrequestreview-528747702", "createdAt": "2020-11-12T04:50:14Z", "commit": {"oid": "cb8e8d4f313914a87914f12304a3b9a28e44c32f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a1976f613f6ae90b52cf29ce0c2bde62bd4fbbc5", "author": {"user": {"login": "Apache9", "name": "Duo Zhang"}}, "url": "https://github.com/apache/hbase/commit/a1976f613f6ae90b52cf29ce0c2bde62bd4fbbc5", "committedDate": "2020-11-12T08:13:57Z", "message": "fix checkstyle issue"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1921, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}