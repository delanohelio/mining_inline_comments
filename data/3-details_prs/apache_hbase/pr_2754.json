{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM0NjU5NDQ0", "number": 2754, "title": "HBASE-25375 Provide a VM-based release environment", "bodyText": "This adds a Vagrantfile and supporting automation that creates a virtual machine environment\nsuitable for running the create-release scriping.", "createdAt": "2020-12-08T19:01:57Z", "url": "https://github.com/apache/hbase/pull/2754", "merged": true, "mergeCommit": {"oid": "3cc24683001998f995d22591ce8d1c74f67fb9f7"}, "closed": true, "closedAt": "2021-01-14T19:21:10Z", "author": {"login": "ndimiduk"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdkTNqtAFqTU0NzczMzk3OQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdt3xJKgBqjQxODA5NzI5MTM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3NzMzOTc5", "url": "https://github.com/apache/hbase/pull/2754#pullrequestreview-547733979", "createdAt": "2020-12-09T00:01:38Z", "commit": {"oid": "db41ba11d56e821b9d9b8b59be2481d1a7d0aa5d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4NDk4NDQy", "url": "https://github.com/apache/hbase/pull/2754#pullrequestreview-548498442", "createdAt": "2020-12-09T18:46:57Z", "commit": {"oid": "db41ba11d56e821b9d9b8b59be2481d1a7d0aa5d"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "db41ba11d56e821b9d9b8b59be2481d1a7d0aa5d", "author": {"user": {"login": "ndimiduk", "name": "Nick Dimiduk"}}, "url": "https://github.com/apache/hbase/commit/db41ba11d56e821b9d9b8b59be2481d1a7d0aa5d", "committedDate": "2020-12-08T18:59:37Z", "message": "HBASE-25375 Provide a VM-based release environment\n\nThis adds a Vagrantfile and supporting automation that creates a virtual machine environment\nsuitable for running the create-release scriping."}, "afterCommit": {"oid": "1bb54660a69cb122a99f6a7c91109b554c52ad69", "author": {"user": {"login": "ndimiduk", "name": "Nick Dimiduk"}}, "url": "https://github.com/apache/hbase/commit/1bb54660a69cb122a99f6a7c91109b554c52ad69", "committedDate": "2020-12-09T20:25:05Z", "message": "HBASE-25375 Provide a VM-based release environment\n\nThis adds a Vagrantfile and supporting automation that creates a virtual machine environment\nsuitable for running the create-release scriping."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1bb54660a69cb122a99f6a7c91109b554c52ad69", "author": {"user": {"login": "ndimiduk", "name": "Nick Dimiduk"}}, "url": "https://github.com/apache/hbase/commit/1bb54660a69cb122a99f6a7c91109b554c52ad69", "committedDate": "2020-12-09T20:25:05Z", "message": "HBASE-25375 Provide a VM-based release environment\n\nThis adds a Vagrantfile and supporting automation that creates a virtual machine environment\nsuitable for running the create-release scriping."}, "afterCommit": {"oid": "3d0a08091e1cf649c0e93a15ff31d1ed7adbd200", "author": {"user": {"login": "ndimiduk", "name": "Nick Dimiduk"}}, "url": "https://github.com/apache/hbase/commit/3d0a08091e1cf649c0e93a15ff31d1ed7adbd200", "committedDate": "2021-01-05T23:40:26Z", "message": "HBASE-25375 Provide a VM-based release environment\n\nThis adds a Vagrantfile and supporting automation that creates a virtual machine environment\nsuitable for running the create-release scriping."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3d0a08091e1cf649c0e93a15ff31d1ed7adbd200", "author": {"user": {"login": "ndimiduk", "name": "Nick Dimiduk"}}, "url": "https://github.com/apache/hbase/commit/3d0a08091e1cf649c0e93a15ff31d1ed7adbd200", "committedDate": "2021-01-05T23:40:26Z", "message": "HBASE-25375 Provide a VM-based release environment\n\nThis adds a Vagrantfile and supporting automation that creates a virtual machine environment\nsuitable for running the create-release scriping."}, "afterCommit": {"oid": "7bdb27bf6b51cf28431b70f036e0582f7c803bc2", "author": {"user": {"login": "ndimiduk", "name": "Nick Dimiduk"}}, "url": "https://github.com/apache/hbase/commit/7bdb27bf6b51cf28431b70f036e0582f7c803bc2", "committedDate": "2021-01-05T23:42:47Z", "message": "HBASE-25375 Provide a VM-based release environment\n\nThis adds a Vagrantfile and supporting automation that creates a virtual machine environment\nsuitable for running the create-release scriping."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7bdb27bf6b51cf28431b70f036e0582f7c803bc2", "author": {"user": {"login": "ndimiduk", "name": "Nick Dimiduk"}}, "url": "https://github.com/apache/hbase/commit/7bdb27bf6b51cf28431b70f036e0582f7c803bc2", "committedDate": "2021-01-05T23:42:47Z", "message": "HBASE-25375 Provide a VM-based release environment\n\nThis adds a Vagrantfile and supporting automation that creates a virtual machine environment\nsuitable for running the create-release scriping."}, "afterCommit": {"oid": "342b6d142260f56a9527d6d52b0f43e26c68313a", "author": {"user": {"login": "ndimiduk", "name": "Nick Dimiduk"}}, "url": "https://github.com/apache/hbase/commit/342b6d142260f56a9527d6d52b0f43e26c68313a", "committedDate": "2021-01-06T00:21:51Z", "message": "HBASE-25375 Provide a VM-based release environment\n\nThis adds a Vagrantfile and supporting automation that creates a virtual machine environment\nsuitable for running the create-release scriping."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYyMjYyMTI2", "url": "https://github.com/apache/hbase/pull/2754#pullrequestreview-562262126", "createdAt": "2021-01-06T01:14:03Z", "commit": {"oid": "342b6d142260f56a9527d6d52b0f43e26c68313a"}, "state": "COMMENTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNlQwMToxNDowM1rOIOuQbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNlQwMTo1MDo1NFrOIOu4OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjMwODg0Nw==", "bodyText": "I think whats missing here is that the cwd is ./release-vm so the .pub is in an importable location and the vagrant up just works?", "url": "https://github.com/apache/hbase/pull/2754#discussion_r552308847", "createdAt": "2021-01-06T01:14:03Z", "author": {"login": "saintstack"}, "path": "dev-support/release-vm/README.md", "diffHunk": "@@ -0,0 +1,63 @@\n+# HBase Release Env\n+\n+This is a vagrant project that provides a virtual machine environment suitable\n+for running an Apache HBase release.\n+\n+Requires:\n+* VirtualBox\n+* Vagrant\n+* The private portion of your signing key avilable in the local GPG agent\n+* The private portion of your Github authentication key available in the local GPG agent\n+\n+## Usage\n+\n+Unlock the local keyring before proceeding (this should prompt you for your GPG passphrase). For\n+example, assuming you have an authentication key configured in your keyring, this will do the\n+trick.\n+\n+```sh\n+$ ssh -T git@github.com\n+Hi <you>! You've successfully authenticated, but GitHub does not provide shell access.\n+```\n+\n+Export the public portion of your signing credentials where the guest VM can access it,\n+\n+```sh\n+$ gpg --export <you>@apache.org > gpg.<you>.apache.pub", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "342b6d142260f56a9527d6d52b0f43e26c68313a"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjMxNzA0Ng==", "bodyText": "I had to resupply my password for my gpg key here. I didn't expect that. I even logged out, reset my gpg agent with\ngpgconf --kill all && gpg-connect-agent /bye\n... signed something off the vm (which required me to fill in my password)..... I then did vagrant ssh and had to provide password again.", "url": "https://github.com/apache/hbase/pull/2754#discussion_r552317046", "createdAt": "2021-01-06T01:44:27Z", "author": {"login": "saintstack"}, "path": "dev-support/release-vm/README.md", "diffHunk": "@@ -0,0 +1,63 @@\n+# HBase Release Env\n+\n+This is a vagrant project that provides a virtual machine environment suitable\n+for running an Apache HBase release.\n+\n+Requires:\n+* VirtualBox\n+* Vagrant\n+* The private portion of your signing key avilable in the local GPG agent\n+* The private portion of your Github authentication key available in the local GPG agent\n+\n+## Usage\n+\n+Unlock the local keyring before proceeding (this should prompt you for your GPG passphrase). For\n+example, assuming you have an authentication key configured in your keyring, this will do the\n+trick.\n+\n+```sh\n+$ ssh -T git@github.com\n+Hi <you>! You've successfully authenticated, but GitHub does not provide shell access.\n+```\n+\n+Export the public portion of your signing credentials where the guest VM can access it,\n+\n+```sh\n+$ gpg --export <you>@apache.org > gpg.<you>.apache.pub\n+```\n+\n+Launch the VM\n+\n+```sh\n+$ vagrant up\n+```\n+\n+Connect to the VM. This should forward your ssh- and gpg-agent session.\n+\n+```sh\n+$ vagrant ssh\n+```\n+\n+Now from the VM, import your identity and verify the gpg-agent passthrough is working correctly.\n+\n+```sh\n+$ gpg --no-autostart --import /vagrant/gpg.<you>.apache.pub\n+...\n+gpg: Total number processed: 1\n+gpg:               imported: 1\n+$ gpg --no-autostart --detach --armor --sign repos/hbase/pom.xml", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "342b6d142260f56a9527d6d52b0f43e26c68313a"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjMxNzI0Nw==", "bodyText": "I didn't expect to have to reprovide my gpg password if forwarding going on.", "url": "https://github.com/apache/hbase/pull/2754#discussion_r552317247", "createdAt": "2021-01-06T01:45:07Z", "author": {"login": "saintstack"}, "path": "dev-support/release-vm/README.md", "diffHunk": "@@ -0,0 +1,63 @@\n+# HBase Release Env\n+\n+This is a vagrant project that provides a virtual machine environment suitable\n+for running an Apache HBase release.\n+\n+Requires:\n+* VirtualBox\n+* Vagrant\n+* The private portion of your signing key avilable in the local GPG agent\n+* The private portion of your Github authentication key available in the local GPG agent\n+\n+## Usage\n+\n+Unlock the local keyring before proceeding (this should prompt you for your GPG passphrase). For\n+example, assuming you have an authentication key configured in your keyring, this will do the\n+trick.\n+\n+```sh\n+$ ssh -T git@github.com\n+Hi <you>! You've successfully authenticated, but GitHub does not provide shell access.\n+```\n+\n+Export the public portion of your signing credentials where the guest VM can access it,\n+\n+```sh\n+$ gpg --export <you>@apache.org > gpg.<you>.apache.pub\n+```\n+\n+Launch the VM\n+\n+```sh\n+$ vagrant up\n+```\n+\n+Connect to the VM. This should forward your ssh- and gpg-agent session.\n+\n+```sh\n+$ vagrant ssh\n+```\n+\n+Now from the VM, import your identity and verify the gpg-agent passthrough is working correctly.\n+\n+```sh\n+$ gpg --no-autostart --import /vagrant/gpg.<you>.apache.pub\n+...\n+gpg: Total number processed: 1\n+gpg:               imported: 1\n+$ gpg --no-autostart --detach --armor --sign repos/hbase/pom.xml", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjMxNzA0Ng=="}, "originalCommit": {"oid": "342b6d142260f56a9527d6d52b0f43e26c68313a"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjMxNzQ1Mw==", "bodyText": "Signing a new file, I did not have to provide my password... which is good. I have a vm up that does not have my private key which is good.....", "url": "https://github.com/apache/hbase/pull/2754#discussion_r552317453", "createdAt": "2021-01-06T01:45:54Z", "author": {"login": "saintstack"}, "path": "dev-support/release-vm/README.md", "diffHunk": "@@ -0,0 +1,63 @@\n+# HBase Release Env\n+\n+This is a vagrant project that provides a virtual machine environment suitable\n+for running an Apache HBase release.\n+\n+Requires:\n+* VirtualBox\n+* Vagrant\n+* The private portion of your signing key avilable in the local GPG agent\n+* The private portion of your Github authentication key available in the local GPG agent\n+\n+## Usage\n+\n+Unlock the local keyring before proceeding (this should prompt you for your GPG passphrase). For\n+example, assuming you have an authentication key configured in your keyring, this will do the\n+trick.\n+\n+```sh\n+$ ssh -T git@github.com\n+Hi <you>! You've successfully authenticated, but GitHub does not provide shell access.\n+```\n+\n+Export the public portion of your signing credentials where the guest VM can access it,\n+\n+```sh\n+$ gpg --export <you>@apache.org > gpg.<you>.apache.pub\n+```\n+\n+Launch the VM\n+\n+```sh\n+$ vagrant up\n+```\n+\n+Connect to the VM. This should forward your ssh- and gpg-agent session.\n+\n+```sh\n+$ vagrant ssh\n+```\n+\n+Now from the VM, import your identity and verify the gpg-agent passthrough is working correctly.\n+\n+```sh\n+$ gpg --no-autostart --import /vagrant/gpg.<you>.apache.pub\n+...\n+gpg: Total number processed: 1\n+gpg:               imported: 1\n+$ gpg --no-autostart --detach --armor --sign repos/hbase/pom.xml", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjMxNzA0Ng=="}, "originalCommit": {"oid": "342b6d142260f56a9527d6d52b0f43e26c68313a"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjMxNzY4NA==", "bodyText": "Why am I doing this?", "url": "https://github.com/apache/hbase/pull/2754#discussion_r552317684", "createdAt": "2021-01-06T01:46:38Z", "author": {"login": "saintstack"}, "path": "dev-support/release-vm/README.md", "diffHunk": "@@ -0,0 +1,63 @@\n+# HBase Release Env\n+\n+This is a vagrant project that provides a virtual machine environment suitable\n+for running an Apache HBase release.\n+\n+Requires:\n+* VirtualBox\n+* Vagrant\n+* The private portion of your signing key avilable in the local GPG agent\n+* The private portion of your Github authentication key available in the local GPG agent\n+\n+## Usage\n+\n+Unlock the local keyring before proceeding (this should prompt you for your GPG passphrase). For\n+example, assuming you have an authentication key configured in your keyring, this will do the\n+trick.\n+\n+```sh\n+$ ssh -T git@github.com\n+Hi <you>! You've successfully authenticated, but GitHub does not provide shell access.\n+```\n+\n+Export the public portion of your signing credentials where the guest VM can access it,\n+\n+```sh\n+$ gpg --export <you>@apache.org > gpg.<you>.apache.pub\n+```\n+\n+Launch the VM\n+\n+```sh\n+$ vagrant up\n+```\n+\n+Connect to the VM. This should forward your ssh- and gpg-agent session.\n+\n+```sh\n+$ vagrant ssh\n+```\n+\n+Now from the VM, import your identity and verify the gpg-agent passthrough is working correctly.\n+\n+```sh\n+$ gpg --no-autostart --import /vagrant/gpg.<you>.apache.pub\n+...\n+gpg: Total number processed: 1\n+gpg:               imported: 1\n+$ gpg --no-autostart --detach --armor --sign repos/hbase/pom.xml\n+$ gpg --no-autostart --verify repos/hbase/pom.xml.asc\n+gpg: assuming signed data in 'repos/hbase/pom.xml'\n+...\n+$ ssh -T git@github.com", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "342b6d142260f56a9527d6d52b0f43e26c68313a"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjMxOTAzMw==", "bodyText": "Just to launch ssh agent? I need it?", "url": "https://github.com/apache/hbase/pull/2754#discussion_r552319033", "createdAt": "2021-01-06T01:50:54Z", "author": {"login": "saintstack"}, "path": "dev-support/release-vm/README.md", "diffHunk": "@@ -0,0 +1,63 @@\n+# HBase Release Env\n+\n+This is a vagrant project that provides a virtual machine environment suitable\n+for running an Apache HBase release.\n+\n+Requires:\n+* VirtualBox\n+* Vagrant\n+* The private portion of your signing key avilable in the local GPG agent\n+* The private portion of your Github authentication key available in the local GPG agent\n+\n+## Usage\n+\n+Unlock the local keyring before proceeding (this should prompt you for your GPG passphrase). For\n+example, assuming you have an authentication key configured in your keyring, this will do the\n+trick.\n+\n+```sh\n+$ ssh -T git@github.com\n+Hi <you>! You've successfully authenticated, but GitHub does not provide shell access.\n+```\n+\n+Export the public portion of your signing credentials where the guest VM can access it,\n+\n+```sh\n+$ gpg --export <you>@apache.org > gpg.<you>.apache.pub\n+```\n+\n+Launch the VM\n+\n+```sh\n+$ vagrant up\n+```\n+\n+Connect to the VM. This should forward your ssh- and gpg-agent session.\n+\n+```sh\n+$ vagrant ssh\n+```\n+\n+Now from the VM, import your identity and verify the gpg-agent passthrough is working correctly.\n+\n+```sh\n+$ gpg --no-autostart --import /vagrant/gpg.<you>.apache.pub\n+...\n+gpg: Total number processed: 1\n+gpg:               imported: 1\n+$ gpg --no-autostart --detach --armor --sign repos/hbase/pom.xml\n+$ gpg --no-autostart --verify repos/hbase/pom.xml.asc\n+gpg: assuming signed data in 'repos/hbase/pom.xml'\n+...\n+$ ssh -T git@github.com", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjMxNzY4NA=="}, "originalCommit": {"oid": "342b6d142260f56a9527d6d52b0f43e26c68313a"}, "originalPosition": 52}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYyODY5NDky", "url": "https://github.com/apache/hbase/pull/2754#pullrequestreview-562869492", "createdAt": "2021-01-06T16:47:16Z", "commit": {"oid": "342b6d142260f56a9527d6d52b0f43e26c68313a"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNlQxNjo0NzoxNlrOIPMEoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNlQxNjo0Nzo1OVrOIPMG-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Mjc5NzM0NA==", "bodyText": "I destroyed the old vm before running this test but did it in virutalbox, not with vagrant destroy. I just tried it and this time I did not have to supply my key password testing signing up in the vm.", "url": "https://github.com/apache/hbase/pull/2754#discussion_r552797344", "createdAt": "2021-01-06T16:47:16Z", "author": {"login": "saintstack"}, "path": "dev-support/release-vm/README.md", "diffHunk": "@@ -0,0 +1,63 @@\n+# HBase Release Env\n+\n+This is a vagrant project that provides a virtual machine environment suitable\n+for running an Apache HBase release.\n+\n+Requires:\n+* VirtualBox\n+* Vagrant\n+* The private portion of your signing key avilable in the local GPG agent\n+* The private portion of your Github authentication key available in the local GPG agent\n+\n+## Usage\n+\n+Unlock the local keyring before proceeding (this should prompt you for your GPG passphrase). For\n+example, assuming you have an authentication key configured in your keyring, this will do the\n+trick.\n+\n+```sh\n+$ ssh -T git@github.com\n+Hi <you>! You've successfully authenticated, but GitHub does not provide shell access.\n+```\n+\n+Export the public portion of your signing credentials where the guest VM can access it,\n+\n+```sh\n+$ gpg --export <you>@apache.org > gpg.<you>.apache.pub\n+```\n+\n+Launch the VM\n+\n+```sh\n+$ vagrant up\n+```\n+\n+Connect to the VM. This should forward your ssh- and gpg-agent session.\n+\n+```sh\n+$ vagrant ssh\n+```\n+\n+Now from the VM, import your identity and verify the gpg-agent passthrough is working correctly.\n+\n+```sh\n+$ gpg --no-autostart --import /vagrant/gpg.<you>.apache.pub\n+...\n+gpg: Total number processed: 1\n+gpg:               imported: 1\n+$ gpg --no-autostart --detach --armor --sign repos/hbase/pom.xml", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjMxNzA0Ng=="}, "originalCommit": {"oid": "342b6d142260f56a9527d6d52b0f43e26c68313a"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Mjc5Nzk0Ng==", "bodyText": "No harm I suppose and ensures an ssh-agent is up... so leave it.", "url": "https://github.com/apache/hbase/pull/2754#discussion_r552797946", "createdAt": "2021-01-06T16:47:59Z", "author": {"login": "saintstack"}, "path": "dev-support/release-vm/README.md", "diffHunk": "@@ -0,0 +1,63 @@\n+# HBase Release Env\n+\n+This is a vagrant project that provides a virtual machine environment suitable\n+for running an Apache HBase release.\n+\n+Requires:\n+* VirtualBox\n+* Vagrant\n+* The private portion of your signing key avilable in the local GPG agent\n+* The private portion of your Github authentication key available in the local GPG agent\n+\n+## Usage\n+\n+Unlock the local keyring before proceeding (this should prompt you for your GPG passphrase). For\n+example, assuming you have an authentication key configured in your keyring, this will do the\n+trick.\n+\n+```sh\n+$ ssh -T git@github.com\n+Hi <you>! You've successfully authenticated, but GitHub does not provide shell access.\n+```\n+\n+Export the public portion of your signing credentials where the guest VM can access it,\n+\n+```sh\n+$ gpg --export <you>@apache.org > gpg.<you>.apache.pub\n+```\n+\n+Launch the VM\n+\n+```sh\n+$ vagrant up\n+```\n+\n+Connect to the VM. This should forward your ssh- and gpg-agent session.\n+\n+```sh\n+$ vagrant ssh\n+```\n+\n+Now from the VM, import your identity and verify the gpg-agent passthrough is working correctly.\n+\n+```sh\n+$ gpg --no-autostart --import /vagrant/gpg.<you>.apache.pub\n+...\n+gpg: Total number processed: 1\n+gpg:               imported: 1\n+$ gpg --no-autostart --detach --armor --sign repos/hbase/pom.xml\n+$ gpg --no-autostart --verify repos/hbase/pom.xml.asc\n+gpg: assuming signed data in 'repos/hbase/pom.xml'\n+...\n+$ ssh -T git@github.com", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjMxNzY4NA=="}, "originalCommit": {"oid": "342b6d142260f56a9527d6d52b0f43e26c68313a"}, "originalPosition": 52}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "342b6d142260f56a9527d6d52b0f43e26c68313a", "author": {"user": {"login": "ndimiduk", "name": "Nick Dimiduk"}}, "url": "https://github.com/apache/hbase/commit/342b6d142260f56a9527d6d52b0f43e26c68313a", "committedDate": "2021-01-06T00:21:51Z", "message": "HBASE-25375 Provide a VM-based release environment\n\nThis adds a Vagrantfile and supporting automation that creates a virtual machine environment\nsuitable for running the create-release scriping."}, "afterCommit": {"oid": "fc180728849c0e75f2a5744ae26c182219a3ed61", "author": {"user": {"login": "ndimiduk", "name": "Nick Dimiduk"}}, "url": "https://github.com/apache/hbase/commit/fc180728849c0e75f2a5744ae26c182219a3ed61", "committedDate": "2021-01-06T17:38:06Z", "message": "HBASE-25375 Provide a VM-based release environment\n\nThis adds a Vagrantfile and supporting automation that creates a virtual machine environment\nsuitable for running the create-release scriping."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fc180728849c0e75f2a5744ae26c182219a3ed61", "author": {"user": {"login": "ndimiduk", "name": "Nick Dimiduk"}}, "url": "https://github.com/apache/hbase/commit/fc180728849c0e75f2a5744ae26c182219a3ed61", "committedDate": "2021-01-06T17:38:06Z", "message": "HBASE-25375 Provide a VM-based release environment\n\nThis adds a Vagrantfile and supporting automation that creates a virtual machine environment\nsuitable for running the create-release scriping."}, "afterCommit": {"oid": "762e7159b9587eb61a7702c83734c0d3e87713fe", "author": {"user": {"login": "ndimiduk", "name": "Nick Dimiduk"}}, "url": "https://github.com/apache/hbase/commit/762e7159b9587eb61a7702c83734c0d3e87713fe", "committedDate": "2021-01-06T17:40:34Z", "message": "HBASE-25375 Provide a VM-based release environment\n\nThis adds a Vagrantfile and supporting automation that creates a virtual machine environment\nsuitable for running the create-release scriping."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYyOTMxMTA5", "url": "https://github.com/apache/hbase/pull/2754#pullrequestreview-562931109", "createdAt": "2021-01-06T18:09:23Z", "commit": {"oid": "762e7159b9587eb61a7702c83734c0d3e87713fe"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNlQxODowOToyM1rOIPQvTA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNlQxODowOToyM1rOIPQvTA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Mjg3MzgwNA==", "bodyText": "Actually, I don't think we need any of maven, openjdk-8-jdk-headless, openjdk-11-jdk-headless because all these tools are provided by the docker environment. Is there a reason to keep these when the whole point of the VM is to establish a reasonable docker environment?", "url": "https://github.com/apache/hbase/pull/2754#discussion_r552873804", "createdAt": "2021-01-06T18:09:23Z", "author": {"login": "ndimiduk"}, "path": "dev-support/release-vm/puppet/production/data/nodes/rmvm.yaml", "diffHunk": "@@ -0,0 +1,34 @@\n+#\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#     http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+#\n+---\n+classes:\n+  - docker\n+  - packages::manage\n+  - ssh\n+\n+packages::latest:\n+  - curl\n+  - git\n+  - gnupg\n+  - gnupg-agent\n+  - maven", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "762e7159b9587eb61a7702c83734c0d3e87713fe"}, "originalPosition": 29}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "762e7159b9587eb61a7702c83734c0d3e87713fe", "author": {"user": {"login": "ndimiduk", "name": "Nick Dimiduk"}}, "url": "https://github.com/apache/hbase/commit/762e7159b9587eb61a7702c83734c0d3e87713fe", "committedDate": "2021-01-06T17:40:34Z", "message": "HBASE-25375 Provide a VM-based release environment\n\nThis adds a Vagrantfile and supporting automation that creates a virtual machine environment\nsuitable for running the create-release scriping."}, "afterCommit": {"oid": "1f7470a13045c05d9fade1b5cd7bcf600ed6f997", "author": {"user": {"login": "ndimiduk", "name": "Nick Dimiduk"}}, "url": "https://github.com/apache/hbase/commit/1f7470a13045c05d9fade1b5cd7bcf600ed6f997", "committedDate": "2021-01-06T19:43:14Z", "message": "HBASE-25375 Provide a VM-based release environment\n\nThis adds a Vagrantfile and supporting automation that creates a virtual machine environment\nsuitable for running the create-release scriping."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYzMDI4MzAy", "url": "https://github.com/apache/hbase/pull/2754#pullrequestreview-563028302", "createdAt": "2021-01-06T20:49:55Z", "commit": {"oid": "1f7470a13045c05d9fade1b5cd7bcf600ed6f997"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNlQyMDo0OTo1NVrOIPVq0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNlQyMDo1MDozMFrOIPVrnw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Mjk1NDU3Ng==", "bodyText": "No cd into release-vm dir?", "url": "https://github.com/apache/hbase/pull/2754#discussion_r552954576", "createdAt": "2021-01-06T20:49:55Z", "author": {"login": "saintstack"}, "path": "dev-support/release-vm/README.md", "diffHunk": "@@ -0,0 +1,141 @@\n+<!---\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+\n+# HBase Release Env\n+\n+This is a vagrant project that provides a virtual machine environment suitable\n+for running an Apache HBase release.\n+\n+Requires:\n+* [VirtualBox](http://virtualbox.org)\n+* [Vagrant](http://virtualbox.org)\n+* The private portion of your signing key avilable in the local GPG agent\n+* The private portion of your Github authentication key available in either the local GPG agent or\n+  local SSH agent\n+\n+## Usage\n+\n+Unlock the local keyring before proceeding (this should prompt you for your GPG passphrase). For\n+example, assuming you have an authentication key configured in your keyring, this will do the\n+trick.\n+\n+All terminal commands used below are assumed to be run with the current working directory as the\n+location containing the `Vagrantfile`.\n+\n+The term \"Host\" is used to mean the environment that runs the Vagrant process. The term \"Guest\" is\n+used to mean the virtual machine managed by the Host.\n+\n+### Ensure credentials work from the Host OS\n+\n+The ssh- and gpg-agent forwarding configuration used here assumes that your credentials work\n+on the Host. Verify both are working before you proceed with the Guest. Additionally, using the\n+credentials requires you to unlock the respective keyring, the state of which is persisted by the\n+agent process or processes running on the Host.\n+\n+See instructions in [`create-release`](../create-release/README.txt) regarding proper\n+configuration of ssh- and gpg-agents.\n+\n+Assuming the git repo origin is on GitHub, the following command will ensure that your ssh\n+credentials are working. On the Host, run:\n+\n+```sh\n+host:~$ ssh -T git@github.com\n+Hi <you>! You've successfully authenticated, but GitHub does not provide shell access.\n+```\n+\n+Likewise, ensure you have an encryption key that can be used to sign a file. Again, on the Host,\n+run:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1f7470a13045c05d9fade1b5cd7bcf600ed6f997"}, "originalPosition": 63}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Mjk1NDc4Mw==", "bodyText": "+1 on stripping them.", "url": "https://github.com/apache/hbase/pull/2754#discussion_r552954783", "createdAt": "2021-01-06T20:50:30Z", "author": {"login": "saintstack"}, "path": "dev-support/release-vm/puppet/production/data/nodes/rmvm.yaml", "diffHunk": "@@ -0,0 +1,34 @@\n+#\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#     http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+#\n+---\n+classes:\n+  - docker\n+  - packages::manage\n+  - ssh\n+\n+packages::latest:\n+  - curl\n+  - git\n+  - gnupg\n+  - gnupg-agent\n+  - maven", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Mjg3MzgwNA=="}, "originalCommit": {"oid": "762e7159b9587eb61a7702c83734c0d3e87713fe"}, "originalPosition": 29}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f1a68e718fed8cdeac3a1d3203508dd84f1d39e3", "author": {"user": {"login": "ndimiduk", "name": "Nick Dimiduk"}}, "url": "https://github.com/apache/hbase/commit/f1a68e718fed8cdeac3a1d3203508dd84f1d39e3", "committedDate": "2021-01-07T17:41:59Z", "message": "HBASE-25375 Provide a VM-based release environment\n\nThis adds a Vagrantfile and supporting automation that creates a virtual machine environment\nsuitable for running the create-release scriping."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1f7470a13045c05d9fade1b5cd7bcf600ed6f997", "author": {"user": {"login": "ndimiduk", "name": "Nick Dimiduk"}}, "url": "https://github.com/apache/hbase/commit/1f7470a13045c05d9fade1b5cd7bcf600ed6f997", "committedDate": "2021-01-06T19:43:14Z", "message": "HBASE-25375 Provide a VM-based release environment\n\nThis adds a Vagrantfile and supporting automation that creates a virtual machine environment\nsuitable for running the create-release scriping."}, "afterCommit": {"oid": "f1a68e718fed8cdeac3a1d3203508dd84f1d39e3", "author": {"user": {"login": "ndimiduk", "name": "Nick Dimiduk"}}, "url": "https://github.com/apache/hbase/commit/f1a68e718fed8cdeac3a1d3203508dd84f1d39e3", "committedDate": "2021-01-07T17:41:59Z", "message": "HBASE-25375 Provide a VM-based release environment\n\nThis adds a Vagrantfile and supporting automation that creates a virtual machine environment\nsuitable for running the create-release scriping."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1823, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}