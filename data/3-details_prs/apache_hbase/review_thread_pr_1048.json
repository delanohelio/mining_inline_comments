{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYzMjQxNjEw", "number": 1048, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNVQyMDo1NjozMlrODYT0tw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNVQyMDo1NjozMlrODYT0tw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2ODE3MjA3OnYy", "diffSide": "RIGHT", "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/procedure2/store/region/RegionProcedureStore.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNVQyMDo1NjozMlrOFeGKuA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QxNzoyODo0MVrOFfAEjw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzEwMjY0OA==", "bodyText": "Why an abort and  not non-abort here? Should this be in finally block? I closed my dupe of this over in HBASE-23696", "url": "https://github.com/apache/hbase/pull/1048#discussion_r367102648", "createdAt": "2020-01-15T20:56:32Z", "author": {"login": "saintstack"}, "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/procedure2/store/region/RegionProcedureStore.java", "diffHunk": "@@ -364,6 +364,7 @@ public void handleCorrupted(ProcedureIterator procIter) throws IOException {\n       throw new IOException(\"Failed to delete the WALProcedureStore migrated proc wal directory \" +\n         procWALDir);\n     }\n+    store.stop(true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a0cf59afdee7ab27a4c11f60f7f1f055dfc62979"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzI2MDc1Nw==", "bodyText": "Do not need to be in finally block. If there are errors we just fail the start up of HMaster. If we pass abort = false then it will try to append a trailer which will cause teh stop to hang there.\nOf course, a better way maybe call store.stop(false) before we delete the proc wal directory, but not a big deal?", "url": "https://github.com/apache/hbase/pull/1048#discussion_r367260757", "createdAt": "2020-01-16T07:10:39Z", "author": {"login": "Apache9"}, "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/procedure2/store/region/RegionProcedureStore.java", "diffHunk": "@@ -364,6 +364,7 @@ public void handleCorrupted(ProcedureIterator procIter) throws IOException {\n       throw new IOException(\"Failed to delete the WALProcedureStore migrated proc wal directory \" +\n         procWALDir);\n     }\n+    store.stop(true);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzEwMjY0OA=="}, "originalCommit": {"oid": "a0cf59afdee7ab27a4c11f60f7f1f055dfc62979"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODA1MTM0Mw==", "bodyText": "Ok. Good enough for now. Thanks.", "url": "https://github.com/apache/hbase/pull/1048#discussion_r368051343", "createdAt": "2020-01-17T17:28:41Z", "author": {"login": "saintstack"}, "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/procedure2/store/region/RegionProcedureStore.java", "diffHunk": "@@ -364,6 +364,7 @@ public void handleCorrupted(ProcedureIterator procIter) throws IOException {\n       throw new IOException(\"Failed to delete the WALProcedureStore migrated proc wal directory \" +\n         procWALDir);\n     }\n+    store.stop(true);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzEwMjY0OA=="}, "originalCommit": {"oid": "a0cf59afdee7ab27a4c11f60f7f1f055dfc62979"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2151, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}