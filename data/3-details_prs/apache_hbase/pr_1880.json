{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMyMTA3ODcy", "number": 1880, "title": "HBASE-24144 Update docs from master", "bodyText": "Bring back documentation from master branch (9ef17c2), using\n$ git checkout master -- src/main/asciidoc/\n$ git checkout master -- src/site/asciidoc/\n\nFollowed up with a commit to revert changes for synchronous replication, which is a feature only on master at this time. What other docs changes need dropped from this commit? I fear some content cannot be simply dropped because the language won't make sense.", "createdAt": "2020-06-09T22:59:30Z", "url": "https://github.com/apache/hbase/pull/1880", "merged": true, "mergeCommit": {"oid": "c592b50b7b1ae3062b4c692dd7946add3305cd2e"}, "closed": true, "closedAt": "2020-06-15T20:23:32Z", "author": {"login": "ndimiduk"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcp_KzoAFqTQyODMyOTAwNg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcrmmHXgBqjM0NDYwNDI4Nzg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI4MzI5MDA2", "url": "https://github.com/apache/hbase/pull/1880#pullrequestreview-428329006", "createdAt": "2020-06-10T18:38:08Z", "commit": {"oid": "6086874e0219ba4bdb3efe922e3a16f1201ef322"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxODozODowOVrOGiBsDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxOTo1MDo0MVrOGiD_4w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODMzMjQzMA==", "bodyText": "@bharathv is there some tweak we can make to this language so that it's applicable to all the back ported branches as well? Backports have happened, so we can now be more precise about what the state is on each branch. Just a small change here saying something to the effect of \"this is the new default in 3.0, but it available as an optional feature in versions 1.x+ and 2.y+\" I see down in configuration.adoc it's very clear about what the state is on 3.x vs 2.3+.\nLet's get it as a separate ticket, I don't want to also make doc changes in this back-port ticket.", "url": "https://github.com/apache/hbase/pull/1880#discussion_r438332430", "createdAt": "2020-06-10T18:38:09Z", "author": {"login": "ndimiduk"}, "path": "src/main/asciidoc/_chapters/architecture.adoc", "diffHunk": "@@ -260,6 +260,73 @@ For region name, we only accept `byte[]` as the parameter type and it may be a f\n \n Information on non-Java clients and custom protocols is covered in <<external_apis>>\n \n+[[client.masterregistry]]\n+=== Master registry (new as of release 3.0.0)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6086874e0219ba4bdb3efe922e3a16f1201ef322"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODM0MjUyNw==", "bodyText": "@bharathv @Apache9 what was the conclusion on RPC hedging? This was reverted, wasn't it? Need to update the docs here?", "url": "https://github.com/apache/hbase/pull/1880#discussion_r438342527", "createdAt": "2020-06-10T18:56:56Z", "author": {"login": "ndimiduk"}, "path": "src/main/asciidoc/_chapters/architecture.adoc", "diffHunk": "@@ -260,6 +260,73 @@ For region name, we only accept `byte[]` as the parameter type and it may be a f\n \n Information on non-Java clients and custom protocols is covered in <<external_apis>>\n \n+[[client.masterregistry]]\n+=== Master registry (new as of release 3.0.0)\n+\n+Client internally works with a _connection registry_ to fetch the metadata needed by connections.\n+This connection registry implementation is responsible for fetching the following metadata.\n+\n+* Active master address\n+* Current meta region(s) locations\n+* Cluster ID (unique to this cluster)\n+\n+This information is needed as a part of various client operations like connection set up, scans,\n+gets etc. Up until releases 2.x.y, the default connection registry is based on ZooKeeper as the\n+source of truth and the the clients fetched the metadata from zookeeper znodes. As of release 3.0.0,\n+the default implementation for connection registry has been switched  to a master based\n+implementation. With this change, the clients now fetch the required metadata from master RPC end\n+points directly. This change was done for the following reasons.\n+\n+* Reduce load on ZooKeeper since that is critical for cluster operation.\n+* Holistic client timeout and retry configurations since the new registry brings all the client\n+operations under HBase rpc framework.\n+* Remove the ZooKeeper client dependency on HBase client library.\n+\n+This means that\n+\n+* At least a single active or stand by master is needed for cluster connection setup. Refer to\n+<<master.runtime>> for more details.\n+* Master can be in a critical path of read/write operations, especially if the client metadata cache\n+is empty or stale.\n+* There is higher connection load on the masters that before since the clients talk directly to\n+HMasters instead of ZooKeeper ensemble`\n+\n+To reduce hot-spotting on a single master, all the masters (active & stand-by) expose the needed\n+service to fetch the connection metadata. This lets the client connect to any master (not just active).\n+\n+==== RPC hedging", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6086874e0219ba4bdb3efe922e3a16f1201ef322"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODM0NjY3NA==", "bodyText": "Yikes! https://issues.apache.org/jira/browse/HBASE-24533", "url": "https://github.com/apache/hbase/pull/1880#discussion_r438346674", "createdAt": "2020-06-10T19:05:09Z", "author": {"login": "ndimiduk"}, "path": "src/main/asciidoc/_chapters/cp.adoc", "diffHunk": "@@ -139,7 +139,7 @@ Referential Integrity::\n \n Secondary Indexes::\n   You can use a coprocessor to maintain secondary indexes. For more information, see\n-  link:https://wiki.apache.org/hadoop/Hbase/SecondaryIndexing[SecondaryIndexing].\n+  link:https://cwiki.apache.org/confluence/display/HADOOP2/Hbase+SecondaryIndexing[SecondaryIndexing].", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6086874e0219ba4bdb3efe922e3a16f1201ef322"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODM0OTM2Nw==", "bodyText": "Circular references are fun! https://issues.apache.org/jira/browse/HBASE-24534", "url": "https://github.com/apache/hbase/pull/1880#discussion_r438349367", "createdAt": "2020-06-10T19:10:19Z", "author": {"login": "ndimiduk"}, "path": "src/main/asciidoc/_chapters/faq.adoc", "diffHunk": "@@ -33,7 +33,7 @@ When should I use HBase?::\n   See <<arch.overview>> in the Architecture chapter.\n \n Are there other HBase FAQs?::\n-  See the FAQ that is up on the wiki, link:https://wiki.apache.org/hadoop/Hbase/FAQ[HBase Wiki FAQ].\n+  See the FAQ that is up on the wiki, link:https://cwiki.apache.org/confluence/display/HADOOP2/Hbase+FAQ[HBase Wiki FAQ].", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6086874e0219ba4bdb3efe922e3a16f1201ef322"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODM3MDI3NQ==", "bodyText": "Looks like I need to revert HBASE-23890 from this patch.", "url": "https://github.com/apache/hbase/pull/1880#discussion_r438370275", "createdAt": "2020-06-10T19:50:41Z", "author": {"login": "ndimiduk"}, "path": "src/main/asciidoc/_chapters/ops_mgt.adoc", "diffHunk": "@@ -3400,20 +3549,10 @@ Here is example using a few of the rsgroup  commands. To add a group, do as foll\n .RegionServer Groups must be Enabled\n [NOTE]\n ====\n-If you have not enabled the rsgroup Coprocessor Endpoint in the master and", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6086874e0219ba4bdb3efe922e3a16f1201ef322"}, "originalPosition": 477}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ee5779b039ebf6a4d562d99850980582d1b63020", "author": {"user": {"login": "ndimiduk", "name": "Nick Dimiduk"}}, "url": "https://github.com/apache/hbase/commit/ee5779b039ebf6a4d562d99850980582d1b63020", "committedDate": "2020-06-10T21:21:01Z", "message": "delete docs re: backup"}, "afterCommit": {"oid": "6bf43354aeb0d73d80a500f61dcf4a805c667cc3", "author": {"user": {"login": "ndimiduk", "name": "Nick Dimiduk"}}, "url": "https://github.com/apache/hbase/commit/6bf43354aeb0d73d80a500f61dcf4a805c667cc3", "committedDate": "2020-06-15T19:17:54Z", "message": "delete docs re: backup"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6bf43354aeb0d73d80a500f61dcf4a805c667cc3", "author": {"user": {"login": "ndimiduk", "name": "Nick Dimiduk"}}, "url": "https://github.com/apache/hbase/commit/6bf43354aeb0d73d80a500f61dcf4a805c667cc3", "committedDate": "2020-06-15T19:17:54Z", "message": "delete docs re: backup"}, "afterCommit": {"oid": "7ef6bec4a08f15aad6e651d68ac2322d67acaba9", "author": {"user": {"login": "ndimiduk", "name": "Nick Dimiduk"}}, "url": "https://github.com/apache/hbase/commit/7ef6bec4a08f15aad6e651d68ac2322d67acaba9", "committedDate": "2020-06-15T20:21:28Z", "message": "Bring back documentation from master branch (2ecbaf130e), using\n\n```\n$ git checkout master -- src/main/asciidoc/\n$ git checkout master -- src/site/asciidoc/\n```\n\nAnd then:\n * remove changes from HBASE-23890\n   This reverts commit 420e38083f13ebf9ca056d2ee2de2192c23801c7.\n * delete docs re: sync_replication\n * delete docs re: backup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1cee6ba5ca0f9d0aae15c11de10ff00e89975734", "author": {"user": {"login": "ndimiduk", "name": "Nick Dimiduk"}}, "url": "https://github.com/apache/hbase/commit/1cee6ba5ca0f9d0aae15c11de10ff00e89975734", "committedDate": "2020-06-15T20:22:28Z", "message": "HBASE-24144 Update docs from master\n\nBring back documentation from master branch (2ecbaf130e), using\n\n```\n$ git checkout master -- src/main/asciidoc/\n$ git checkout master -- src/site/asciidoc/\n```\n\nAnd then:\n * remove changes from HBASE-23890\n   This reverts commit 420e38083f13ebf9ca056d2ee2de2192c23801c7.\n * delete docs re: sync_replication\n * delete docs re: backup"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7ef6bec4a08f15aad6e651d68ac2322d67acaba9", "author": {"user": {"login": "ndimiduk", "name": "Nick Dimiduk"}}, "url": "https://github.com/apache/hbase/commit/7ef6bec4a08f15aad6e651d68ac2322d67acaba9", "committedDate": "2020-06-15T20:21:28Z", "message": "Bring back documentation from master branch (2ecbaf130e), using\n\n```\n$ git checkout master -- src/main/asciidoc/\n$ git checkout master -- src/site/asciidoc/\n```\n\nAnd then:\n * remove changes from HBASE-23890\n   This reverts commit 420e38083f13ebf9ca056d2ee2de2192c23801c7.\n * delete docs re: sync_replication\n * delete docs re: backup"}, "afterCommit": {"oid": "1cee6ba5ca0f9d0aae15c11de10ff00e89975734", "author": {"user": {"login": "ndimiduk", "name": "Nick Dimiduk"}}, "url": "https://github.com/apache/hbase/commit/1cee6ba5ca0f9d0aae15c11de10ff00e89975734", "committedDate": "2020-06-15T20:22:28Z", "message": "HBASE-24144 Update docs from master\n\nBring back documentation from master branch (2ecbaf130e), using\n\n```\n$ git checkout master -- src/main/asciidoc/\n$ git checkout master -- src/site/asciidoc/\n```\n\nAnd then:\n * remove changes from HBASE-23890\n   This reverts commit 420e38083f13ebf9ca056d2ee2de2192c23801c7.\n * delete docs re: sync_replication\n * delete docs re: backup"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4588, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}