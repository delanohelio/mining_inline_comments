{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkwMTM3MzQ1", "number": 2430, "title": "HBASE-25074 Refactor ReplicationSinkManager: reduce code and make it \u2026", "bodyText": "\u2026easy to understand", "createdAt": "2020-09-21T08:41:50Z", "url": "https://github.com/apache/hbase/pull/2430", "merged": true, "mergeCommit": {"oid": "7e910a573f30a9995cb779fa55a6911629ac2e5f"}, "closed": true, "closedAt": "2020-09-23T00:30:44Z", "author": {"login": "infraio"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdK_Z9TgBqjM3ODc1NzEyNjM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdLUZX0gFqTQ5MzI2OTI5MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "be92d6be1b5f5fce088d3e03487082d070daec0f", "author": {"user": {"login": "infraio", "name": "Guanghao Zhang"}}, "url": "https://github.com/apache/hbase/commit/be92d6be1b5f5fce088d3e03487082d070daec0f", "committedDate": "2020-09-21T08:36:55Z", "message": "HBASE-25074 Refactor ReplicationSinkManager: reduce code and make it easy to understand"}, "afterCommit": {"oid": "96204882cf19bfede9862f36a05fbaeb7424426f", "author": {"user": {"login": "infraio", "name": "Guanghao Zhang"}}, "url": "https://github.com/apache/hbase/commit/96204882cf19bfede9862f36a05fbaeb7424426f", "committedDate": "2020-09-21T08:48:25Z", "message": "HBASE-25074 Refactor ReplicationSinkManager: reduce code and make it easy to understand"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyNDA1OTQ2", "url": "https://github.com/apache/hbase/pull/2430#pullrequestreview-492405946", "createdAt": "2020-09-21T09:10:36Z", "commit": {"oid": "96204882cf19bfede9862f36a05fbaeb7424426f"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQwOToxMDozNlrOHVGyYw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQwOToxOTo1OFrOHVHG8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTg5MzM0Nw==", "bodyText": "Can we keep all accessors to ZKWatcher protected or at least, package private? In some cases, custom HBaseReplicationEndpoint implementations may need to access those.", "url": "https://github.com/apache/hbase/pull/2430#discussion_r491893347", "createdAt": "2020-09-21T09:10:36Z", "author": {"login": "wchevreuil"}, "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/replication/HBaseReplicationEndpoint.java", "diffHunk": "@@ -63,7 +121,7 @@ protected synchronized void disconnect() {\n    * A private method used to re-establish a zookeeper session with a peer cluster.\n    * @param ke\n    */\n-  protected void reconnect(KeeperException ke) {\n+  private void reconnect(KeeperException ke) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "96204882cf19bfede9862f36a05fbaeb7424426f"}, "originalPosition": 84}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTg5ODYxMQ==", "bodyText": "Same as my previous comment. Would be nice to allow for custom implementations to access this method.", "url": "https://github.com/apache/hbase/pull/2430#discussion_r491898611", "createdAt": "2020-09-21T09:19:58Z", "author": {"login": "wchevreuil"}, "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/replication/HBaseReplicationEndpoint.java", "diffHunk": "@@ -150,13 +202,19 @@ public boolean isAborted() {\n \n   /**\n    * Get the list of all the region servers from the specified peer\n-   * @param zkw zk connection to use\n+   *\n    * @return list of region server addresses or an empty list if the slave is unavailable\n    */\n-  protected static List<ServerName> fetchSlavesAddresses(ZKWatcher zkw)\n-      throws KeeperException {\n-    List<String> children = ZKUtil.listChildrenAndWatchForNewChildren(zkw,\n-            zkw.getZNodePaths().rsZNode);\n+  private List<ServerName> fetchSlavesAddresses() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "96204882cf19bfede9862f36a05fbaeb7424426f"}, "originalPosition": 129}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "96204882cf19bfede9862f36a05fbaeb7424426f", "author": {"user": {"login": "infraio", "name": "Guanghao Zhang"}}, "url": "https://github.com/apache/hbase/commit/96204882cf19bfede9862f36a05fbaeb7424426f", "committedDate": "2020-09-21T08:48:25Z", "message": "HBASE-25074 Refactor ReplicationSinkManager: reduce code and make it easy to understand"}, "afterCommit": {"oid": "bcd38f73fd901850c01bcb4ed228a7d72eb21214", "author": {"user": {"login": "infraio", "name": "Guanghao Zhang"}}, "url": "https://github.com/apache/hbase/commit/bcd38f73fd901850c01bcb4ed228a7d72eb21214", "committedDate": "2020-09-22T01:54:48Z", "message": "HBASE-25074 Refactor ReplicationSinkManager: reduce code and make it easy to understand"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bcd38f73fd901850c01bcb4ed228a7d72eb21214", "author": {"user": {"login": "infraio", "name": "Guanghao Zhang"}}, "url": "https://github.com/apache/hbase/commit/bcd38f73fd901850c01bcb4ed228a7d72eb21214", "committedDate": "2020-09-22T01:54:48Z", "message": "HBASE-25074 Refactor ReplicationSinkManager: reduce code and make it easy to understand"}, "afterCommit": {"oid": "1cf0dbe9e3a227cb73f7efb94dabc8144f777b7a", "author": {"user": {"login": "infraio", "name": "Guanghao Zhang"}}, "url": "https://github.com/apache/hbase/commit/1cf0dbe9e3a227cb73f7efb94dabc8144f777b7a", "committedDate": "2020-09-22T01:56:32Z", "message": "HBASE-25074 Refactor ReplicationSinkManager: reduce code and make it easy to understand"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzMDkyNDAy", "url": "https://github.com/apache/hbase/pull/2430#pullrequestreview-493092402", "createdAt": "2020-09-22T02:25:18Z", "commit": {"oid": "1cf0dbe9e3a227cb73f7efb94dabc8144f777b7a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "09fc0689aa72eed21ce48751f61497f7ff759986", "author": {"user": {"login": "infraio", "name": "Guanghao Zhang"}}, "url": "https://github.com/apache/hbase/commit/09fc0689aa72eed21ce48751f61497f7ff759986", "committedDate": "2020-09-22T04:39:05Z", "message": "HBASE-25074 Refactor ReplicationSinkManager: reduce code and make it easy to understand"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1cf0dbe9e3a227cb73f7efb94dabc8144f777b7a", "author": {"user": {"login": "infraio", "name": "Guanghao Zhang"}}, "url": "https://github.com/apache/hbase/commit/1cf0dbe9e3a227cb73f7efb94dabc8144f777b7a", "committedDate": "2020-09-22T01:56:32Z", "message": "HBASE-25074 Refactor ReplicationSinkManager: reduce code and make it easy to understand"}, "afterCommit": {"oid": "09fc0689aa72eed21ce48751f61497f7ff759986", "author": {"user": {"login": "infraio", "name": "Guanghao Zhang"}}, "url": "https://github.com/apache/hbase/commit/09fc0689aa72eed21ce48751f61497f7ff759986", "committedDate": "2020-09-22T04:39:05Z", "message": "HBASE-25074 Refactor ReplicationSinkManager: reduce code and make it easy to understand"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzMjY5Mjkw", "url": "https://github.com/apache/hbase/pull/2430#pullrequestreview-493269290", "createdAt": "2020-09-22T09:15:51Z", "commit": {"oid": "09fc0689aa72eed21ce48751f61497f7ff759986"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwOToxNTo1MVrOHVxOUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwOToxNTo1MVrOHVxOUw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjU4ODYyNw==", "bodyText": "So if one user want to use these logics, it is better to copy these code to their implementation.\n\nIt's not that simple, as it would actually require reimplement all other methods currently referring these private ones, leading to a reimplementation of the whole class.\nI agree with @Apache9 , if we are to guarantee a certain level of accessibility here, we should rather discuss about the interfaces audiences. I guess this would be rather a topic for a separate jira/PR, don't want to deviate this current one from it's original purpose.", "url": "https://github.com/apache/hbase/pull/2430#discussion_r492588627", "createdAt": "2020-09-22T09:15:51Z", "author": {"login": "wchevreuil"}, "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/replication/HBaseReplicationEndpoint.java", "diffHunk": "@@ -63,7 +121,7 @@ protected synchronized void disconnect() {\n    * A private method used to re-establish a zookeeper session with a peer cluster.\n    * @param ke\n    */\n-  protected void reconnect(KeeperException ke) {\n+  private void reconnect(KeeperException ke) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTg5MzM0Nw=="}, "originalCommit": {"oid": "96204882cf19bfede9862f36a05fbaeb7424426f"}, "originalPosition": 84}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4523, "cost": 1, "resetAt": "2021-10-28T16:48:13Z"}}}