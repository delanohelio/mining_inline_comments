{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMxMTU3MTI5", "number": 1869, "title": "HBASE-24518 : waitForNamespaceOnline() should return false if any region is offline", "bodyText": "", "createdAt": "2020-06-08T13:54:08Z", "url": "https://github.com/apache/hbase/pull/1869", "merged": true, "mergeCommit": {"oid": "192daded61963716b8502f5446124c7a5e76094e"}, "closed": true, "closedAt": "2020-06-17T14:14:36Z", "author": {"login": "virajjasani"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcpQyXKAH2gAyNDMxMTU3MTI5OjYwZDQ1YWQ1MmMzMDY3NmZhZjNiMDU1MGQ5MmJkZjE3MzQ2ZjZiZGQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcsHRQYAFqTQzMjI2NjcyMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "60d45ad52c30676faf3b0550d92bdf17346f6bdd", "author": {"user": {"login": "virajjasani", "name": "Viraj Jasani"}}, "url": "https://github.com/apache/hbase/commit/60d45ad52c30676faf3b0550d92bdf17346f6bdd", "committedDate": "2020-06-08T13:50:28Z", "message": "HBASE-24518 : waitForNamespaceOnline() should return false if any region is offline"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5MTE4MDY0", "url": "https://github.com/apache/hbase/pull/1869#pullrequestreview-429118064", "createdAt": "2020-06-11T17:12:15Z", "commit": {"oid": "60d45ad52c30676faf3b0550d92bdf17346f6bdd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxNzoxMjoxNVrOGim4OQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxNzoxMjoxNVrOGim4OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk0MTc1Mw==", "bodyText": "Actually isRegionOnline() is waiting in a loop until this region's status become opened and that server is online.  So there is no bug as such right?  isRegionOnline() might return false iff the server is being stopped", "url": "https://github.com/apache/hbase/pull/1869#discussion_r438941753", "createdAt": "2020-06-11T17:12:15Z", "author": {"login": "anoopsjohn"}, "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/master/HMaster.java", "diffHunk": "@@ -1285,7 +1285,9 @@ private boolean waitForNamespaceOnline() throws InterruptedException, IOExceptio\n     }\n     // Else there are namespace regions up in meta. Ensure they are assigned before we go on.\n     for (RegionInfo ri : ris) {\n-      isRegionOnline(ri);\n+      if (!isRegionOnline(ri)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "60d45ad52c30676faf3b0550d92bdf17346f6bdd"}, "originalPosition": 43}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5MTQ5OTU0", "url": "https://github.com/apache/hbase/pull/1869#pullrequestreview-429149954", "createdAt": "2020-06-11T17:45:13Z", "commit": {"oid": "60d45ad52c30676faf3b0550d92bdf17346f6bdd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxNzo0NToxM1rOGioFIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxNzo0NToxM1rOGioFIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk2MTQ0MA==", "bodyText": "Same question. So even if one region is offline you will not wait for namespace correct? That means that indicates some case where regions are gong down? What if a split region was opened and that has status offline? Even then we wont wait for namespace?", "url": "https://github.com/apache/hbase/pull/1869#discussion_r438961440", "createdAt": "2020-06-11T17:45:13Z", "author": {"login": "ramkrish86"}, "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/master/HMaster.java", "diffHunk": "@@ -1285,7 +1285,9 @@ private boolean waitForNamespaceOnline() throws InterruptedException, IOExceptio\n     }\n     // Else there are namespace regions up in meta. Ensure they are assigned before we go on.\n     for (RegionInfo ri : ris) {\n-      isRegionOnline(ri);\n+      if (!isRegionOnline(ri)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk0MTc1Mw=="}, "originalCommit": {"oid": "60d45ad52c30676faf3b0550d92bdf17346f6bdd"}, "originalPosition": 43}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyMjY2NzIz", "url": "https://github.com/apache/hbase/pull/1869#pullrequestreview-432266723", "createdAt": "2020-06-17T10:26:56Z", "commit": {"oid": "60d45ad52c30676faf3b0550d92bdf17346f6bdd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4568, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}