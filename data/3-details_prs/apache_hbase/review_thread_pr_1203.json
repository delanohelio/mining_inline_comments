{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc5Mjg3MDg4", "number": 1203, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQxNToxODozMlrODjHhOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQxNToyODowNFrODjHyWw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4MTQ5OTQ0OnYy", "diffSide": "RIGHT", "path": "hbase-client/src/main/java/org/apache/hadoop/hbase/client/Admin.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQxNToxODozMlrOFuvr4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQxNToxODozMlrOFuvr4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDU2MDA5Nw==", "bodyText": "this version number will need to be updated", "url": "https://github.com/apache/hbase/pull/1203#discussion_r384560097", "createdAt": "2020-02-26T15:18:32Z", "author": {"login": "busbey"}, "path": "hbase-client/src/main/java/org/apache/hadoop/hbase/client/Admin.java", "diffHunk": "@@ -1282,29 +1282,31 @@ void mergeRegions(byte[] nameOfRegionA, byte[] nameOfRegionB,\n \n   /**\n    * Merge two regions. Asynchronous operation.\n-   *\n    * @param nameOfRegionA encoded or full name of region a\n    * @param nameOfRegionB encoded or full name of region b\n-   * @param forcible <code>true</code> if do a compulsory merge, otherwise we will only merge\n-   *          two adjacent regions\n-   * @throws IOException\n+   * @param forcible <code>true</code> if do a compulsory merge, otherwise we will only merge two\n+   *          adjacent regions\n    */\n-  Future<Void> mergeRegionsAsync(\n-      byte[] nameOfRegionA,\n-      byte[] nameOfRegionB,\n-      boolean forcible) throws IOException;\n+  default Future<Void> mergeRegionsAsync(byte[] nameOfRegionA, byte[] nameOfRegionB,\n+      boolean forcible) throws IOException {\n+    byte[][] nameofRegionsToMerge = new byte[2][];\n+    nameofRegionsToMerge[0] = nameOfRegionA;\n+    nameofRegionsToMerge[1] = nameOfRegionB;\n+    return mergeRegionsAsync(nameofRegionsToMerge, forcible);\n+  }\n \n   /**\n    * Merge regions. Asynchronous operation.\n-   *\n+   * <p/>\n+   * You may get a {@code DoNotRetryIOException} if you pass more than two regions in but the master\n+   * does not support merging more than two regions. At least till 2.2.0, we still only support", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "13da56ca9dc1c3f709874b2f1a6543e0137afbc9"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4MTUzMDkyOnYy", "diffSide": "RIGHT", "path": "hbase-client/src/main/java/org/apache/hadoop/hbase/client/AsyncAdmin.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQxNToyNTozMFrOFuv_Yw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQxNToyNTozMFrOFuv_Yw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDU2NTA5MQ==", "bodyText": "this version number will need to be updated", "url": "https://github.com/apache/hbase/pull/1203#discussion_r384565091", "createdAt": "2020-02-26T15:25:30Z", "author": {"login": "busbey"}, "path": "hbase-client/src/main/java/org/apache/hadoop/hbase/client/AsyncAdmin.java", "diffHunk": "@@ -474,8 +475,22 @@\n    * @param forcible true if do a compulsory merge, otherwise we will only merge two adjacent\n    *          regions\n    */\n-  CompletableFuture<Void> mergeRegions(byte[] nameOfRegionA, byte[] nameOfRegionB,\n-      boolean forcible);\n+  default CompletableFuture<Void> mergeRegions(byte[] nameOfRegionA, byte[] nameOfRegionB,\n+      boolean forcible) {\n+    return mergeRegions(Arrays.asList(nameOfRegionA, nameOfRegionB), forcible);\n+  }\n+\n+  /**\n+   * Merge regions.\n+   * <p/>\n+   * You may get a {@code DoNotRetryIOException} if you pass more than two regions in but the master\n+   * does not support merging more than two regions. At least till 2.2.0, we still only support", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "13da56ca9dc1c3f709874b2f1a6543e0137afbc9"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4MTU0MzMxOnYy", "diffSide": "RIGHT", "path": "hbase-client/src/main/java/org/apache/hadoop/hbase/client/RawAsyncHBaseAdmin.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQxNToyODowNFrOFuwHLA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QwOTo1MDo0M1rOFvLmmQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDU2NzA4NA==", "bodyText": "just to confirm my understanding, we're doing this ourselves instead of using Preconditions because guava doesn't have a version of Preconditions that will return a future?", "url": "https://github.com/apache/hbase/pull/1203#discussion_r384567084", "createdAt": "2020-02-26T15:28:04Z", "author": {"login": "busbey"}, "path": "hbase-client/src/main/java/org/apache/hadoop/hbase/client/RawAsyncHBaseAdmin.java", "diffHunk": "@@ -1185,41 +1184,41 @@ private void checkAndGetTableName(byte[] encodeRegionName, AtomicReference<Table\n   }\n \n   @Override\n-  public CompletableFuture<Void> mergeRegions(byte[] nameOfRegionA, byte[] nameOfRegionB,\n-      boolean forcible) {\n+  public CompletableFuture<Void> mergeRegions(List<byte[]> nameOfRegionsToMerge, boolean forcible) {\n+    if (nameOfRegionsToMerge.size() < 2) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "13da56ca9dc1c3f709874b2f1a6543e0137afbc9"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTAxNzQ5Nw==", "bodyText": "I would think so too. Preconditions doesn't seem to have the capability to return a future object that we would need for these functions.", "url": "https://github.com/apache/hbase/pull/1203#discussion_r385017497", "createdAt": "2020-02-27T09:50:43Z", "author": {"login": "jatsakthi"}, "path": "hbase-client/src/main/java/org/apache/hadoop/hbase/client/RawAsyncHBaseAdmin.java", "diffHunk": "@@ -1185,41 +1184,41 @@ private void checkAndGetTableName(byte[] encodeRegionName, AtomicReference<Table\n   }\n \n   @Override\n-  public CompletableFuture<Void> mergeRegions(byte[] nameOfRegionA, byte[] nameOfRegionB,\n-      boolean forcible) {\n+  public CompletableFuture<Void> mergeRegions(List<byte[]> nameOfRegionsToMerge, boolean forcible) {\n+    if (nameOfRegionsToMerge.size() < 2) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDU2NzA4NA=="}, "originalCommit": {"oid": "13da56ca9dc1c3f709874b2f1a6543e0137afbc9"}, "originalPosition": 25}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2095, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}