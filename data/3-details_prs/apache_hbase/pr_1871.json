{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMxMzA4MTc5", "number": 1871, "title": "HBASE-24005 Document maven invocation with JDK11", "bodyText": "Follow-on to HBASE-23997, #1844.", "createdAt": "2020-06-08T18:09:50Z", "url": "https://github.com/apache/hbase/pull/1871", "merged": true, "mergeCommit": {"oid": "9ef17c27841b627c7e38e723b9c2f6dac02fe63a"}, "closed": true, "closedAt": "2020-06-09T22:34:03Z", "author": {"login": "ndimiduk"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcpVXvhgFqTQyNjUzMTczNw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcps3tbgBqjM0MjcwODc0MTI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2NTMxNzM3", "url": "https://github.com/apache/hbase/pull/1871#pullrequestreview-426531737", "createdAt": "2020-06-08T18:59:30Z", "commit": {"oid": "e1123eeb9db25f84791b2d57895996f46598ee9e"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQxODo1OTozMFrOGgrz9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQxOTowOTowNVrOGgsUlQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjkyNTQyOQ==", "bodyText": "NIT: In some sections \"Maven\" with an upper-case \"M\" is used. Here it is lower-cased. I think it is better to stay consistent.", "url": "https://github.com/apache/hbase/pull/1871#discussion_r436925429", "createdAt": "2020-06-08T18:59:30Z", "author": {"login": "HorizonNet"}, "path": "src/main/asciidoc/_chapters/developer.adoc", "diffHunk": "@@ -420,6 +419,27 @@ Tests may not all pass so you may need to pass `-DskipTests` unless you are incl\n \n To pick a particular Hadoop 3.y release, you'd set hadoop-three.version property e.g. `-Dhadoop-three.version=3.0.0`.\n \n+[[maven.build.jdk11_hadoop3]]\n+==== Building with JDK11 and Hadoop3\n+\n+The following guidance applies to HBase versions [2.3, 3), where both JDK8 and JDK11 are supported,\n+and both Hadoop2 and Hadoop3 are supported.\n+\n+HBase manages JDK-specific build settings using maven profiles. The profile appropriate to the JDK", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e1123eeb9db25f84791b2d57895996f46598ee9e"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjkzMzc4MQ==", "bodyText": "Is this really necessary as the hadoop-3.0 profile is active by default (at least on master)? Or better state it to make it generic for all mentioned releases?", "url": "https://github.com/apache/hbase/pull/1871#discussion_r436933781", "createdAt": "2020-06-08T19:09:05Z", "author": {"login": "HorizonNet"}, "path": "src/main/asciidoc/_chapters/developer.adoc", "diffHunk": "@@ -420,6 +419,27 @@ Tests may not all pass so you may need to pass `-DskipTests` unless you are incl\n \n To pick a particular Hadoop 3.y release, you'd set hadoop-three.version property e.g. `-Dhadoop-three.version=3.0.0`.\n \n+[[maven.build.jdk11_hadoop3]]\n+==== Building with JDK11 and Hadoop3\n+\n+The following guidance applies to HBase versions [2.3, 3), where both JDK8 and JDK11 are supported,\n+and both Hadoop2 and Hadoop3 are supported.\n+\n+HBase manages JDK-specific build settings using maven profiles. The profile appropriate to the JDK\n+in use is automatically selected. JDK8 supports both Hadoop2 and Hadoop3. For JDK11, only Hadoop3\n+is supported, which means you must specify `-Dhadoop.profile=3.0` when building with JDK11.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e1123eeb9db25f84791b2d57895996f46598ee9e"}, "originalPosition": 37}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2NTUyMTgx", "url": "https://github.com/apache/hbase/pull/1871#pullrequestreview-426552181", "createdAt": "2020-06-08T19:24:23Z", "commit": {"oid": "e1123eeb9db25f84791b2d57895996f46598ee9e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e1123eeb9db25f84791b2d57895996f46598ee9e", "author": {"user": {"login": "ndimiduk", "name": "Nick Dimiduk"}}, "url": "https://github.com/apache/hbase/commit/e1123eeb9db25f84791b2d57895996f46598ee9e", "committedDate": "2020-06-08T18:06:04Z", "message": "HBASE-24005 Document maven invocation with JDK11"}, "afterCommit": {"oid": "e9c8f0ffb8023bc752dc66238b3a1396591fb1c1", "author": {"user": {"login": "ndimiduk", "name": "Nick Dimiduk"}}, "url": "https://github.com/apache/hbase/commit/e9c8f0ffb8023bc752dc66238b3a1396591fb1c1", "committedDate": "2020-06-08T20:16:44Z", "message": "HBASE-24005 Document maven invocation with JDK11"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3a0eebe72e28d6c81fab2b57a4256844068fe09b", "author": {"user": {"login": "ndimiduk", "name": "Nick Dimiduk"}}, "url": "https://github.com/apache/hbase/commit/3a0eebe72e28d6c81fab2b57a4256844068fe09b", "committedDate": "2020-06-08T21:26:12Z", "message": "PR feedback -- update docs around hadoop profile and version selection"}, "afterCommit": {"oid": "7e695bc508159a15f9f3778c6f281d0e2e4ac0f0", "author": {"user": {"login": "ndimiduk", "name": "Nick Dimiduk"}}, "url": "https://github.com/apache/hbase/commit/7e695bc508159a15f9f3778c6f281d0e2e4ac0f0", "committedDate": "2020-06-08T21:57:59Z", "message": "PR feedback -- update docs around hadoop profile and version selection"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2NjU0NjQ3", "url": "https://github.com/apache/hbase/pull/1871#pullrequestreview-426654647", "createdAt": "2020-06-08T22:05:33Z", "commit": {"oid": "7e695bc508159a15f9f3778c6f281d0e2e4ac0f0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQyMjowNTozNFrOGgyCVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQyMjowNTozNFrOGgyCVw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzAyNzQxNQ==", "bodyText": "nit: we shouldn't be telling folks to build against non-released versions of Apache Hadoop I think?", "url": "https://github.com/apache/hbase/pull/1871#discussion_r437027415", "createdAt": "2020-06-08T22:05:34Z", "author": {"login": "busbey"}, "path": "src/main/asciidoc/_chapters/developer.adoc", "diffHunk": "@@ -397,28 +396,109 @@ mvn clean install -DskipTests\n See the <<hbase.unittests.cmds,hbase.unittests.cmds>> section in <<hbase.unittests,hbase.unittests>>\n \n [[maven.build.hadoop]]\n-==== Building against various hadoop versions.\n+==== Building against various Hadoop versions\n+\n+HBase supports building against Apache Hadoop versions: 2.y and 3.y (early release artifacts).\n+Exactly which version of Hadoop is used by default varies by release branch. See the section\n+<<hadoop,Hadoop>> for the complete breakdown of supported Hadoop version by HBase release.\n+\n+The mechanism for selecting a Hadoop version at build time is identical across all releases. Which\n+version of Hadoop is default varies. We manage Hadoop major version selection by way of Maven\n+profiles. Due to the peculiarities of Maven profile mutual exclusion, the profile that builds\n+against a particular Hadoop version is activated by setting a property, *not* the usual profile\n+activation. Hadoop version profile activation is summarized by the following table.\n+\n+.Hadoop Profile Activation by HBase Release\n+[cols=\"3*^.^\", options=\"header\"]\n+|===\n+| | Hadoop2 Activation | Hadoop3 Activation\n+| HBase 1.3+ | _active by default_ | `-Dhadoop.profile=3.0`\n+| HBase 3.0+ | _not supported_ | _active by default_\n+|===\n+\n+[WARNING]\n+====\n+Please note that where a profile is active by default, `hadoop.profile` must NOT be provided.\n+====\n+\n+Once the Hadoop major version profile is activated, the exact Hadoop version can be\n+specified by overriding the appropriate property value. For Hadoop2 versions, the property name\n+is `hadoop-two.version`. With Hadoop3 versions, the property name is `hadoop-three.version`.\n \n-HBase supports building against Apache Hadoop versions: 2.y and 3.y (early release artifacts). By default we build against Hadoop 2.x.\n+.Example 1, Building HBase 1.7 against Hadoop 2.10.0\n \n-To build against a specific release from the Hadoop 2.y line, set e.g. `-Dhadoop-two.version=2.6.3`.\n+For example, to build HBase 1.7 against Hadoop 2.10.0, the profile is set for Hadoop2 by default,\n+so only `hadoop-two.version` must be specified:\n \n [source,bourne]\n ----\n-mvn -Dhadoop-two.version=2.6.3 ...\n+git checkout branch-1\n+mvn -Dhadoop-two.version=2.10.0 ...\n ----\n \n-To change the major release line of Hadoop we build against, add a hadoop.profile property when you invoke +mvn+:\n+.Example 2, Building HBase 2.3 against Hadoop 3.3.0-SNAPSHOT", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7e695bc508159a15f9f3778c6f281d0e2e4ac0f0"}, "originalPosition": 74}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2ODY0MTQy", "url": "https://github.com/apache/hbase/pull/1871#pullrequestreview-426864142", "createdAt": "2020-06-09T07:36:02Z", "commit": {"oid": "7e695bc508159a15f9f3778c6f281d0e2e4ac0f0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7e695bc508159a15f9f3778c6f281d0e2e4ac0f0", "author": {"user": {"login": "ndimiduk", "name": "Nick Dimiduk"}}, "url": "https://github.com/apache/hbase/commit/7e695bc508159a15f9f3778c6f281d0e2e4ac0f0", "committedDate": "2020-06-08T21:57:59Z", "message": "PR feedback -- update docs around hadoop profile and version selection"}, "afterCommit": {"oid": "8543ac1fdcbe60a484065fc3c4f4854e23d6421e", "author": {"user": {"login": "ndimiduk", "name": "Nick Dimiduk"}}, "url": "https://github.com/apache/hbase/commit/8543ac1fdcbe60a484065fc3c4f4854e23d6421e", "committedDate": "2020-06-09T20:44:20Z", "message": "PR Feedback -- be less flippant about SNAPSHOT examples"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI3NTQ1MjIw", "url": "https://github.com/apache/hbase/pull/1871#pullrequestreview-427545220", "createdAt": "2020-06-09T21:05:55Z", "commit": {"oid": "8543ac1fdcbe60a484065fc3c4f4854e23d6421e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e3d262fba972bf5f77c22b66bd7794f3f2862533", "author": {"user": {"login": "ndimiduk", "name": "Nick Dimiduk"}}, "url": "https://github.com/apache/hbase/commit/e3d262fba972bf5f77c22b66bd7794f3f2862533", "committedDate": "2020-06-09T22:31:57Z", "message": "HBASE-24005 Document maven invocation with JDK11\n\nSigned-off-by: Jan Hentschel <jan.hentschel@ultratendency.com>\nSigned-off-by: Viraj Jasani <vjasani@apache.org>\nSigned-off-by: Sean Busbey <busbey@apache.org>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8543ac1fdcbe60a484065fc3c4f4854e23d6421e", "author": {"user": {"login": "ndimiduk", "name": "Nick Dimiduk"}}, "url": "https://github.com/apache/hbase/commit/8543ac1fdcbe60a484065fc3c4f4854e23d6421e", "committedDate": "2020-06-09T20:44:20Z", "message": "PR Feedback -- be less flippant about SNAPSHOT examples"}, "afterCommit": {"oid": "e3d262fba972bf5f77c22b66bd7794f3f2862533", "author": {"user": {"login": "ndimiduk", "name": "Nick Dimiduk"}}, "url": "https://github.com/apache/hbase/commit/e3d262fba972bf5f77c22b66bd7794f3f2862533", "committedDate": "2020-06-09T22:31:57Z", "message": "HBASE-24005 Document maven invocation with JDK11\n\nSigned-off-by: Jan Hentschel <jan.hentschel@ultratendency.com>\nSigned-off-by: Viraj Jasani <vjasani@apache.org>\nSigned-off-by: Sean Busbey <busbey@apache.org>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4573, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}