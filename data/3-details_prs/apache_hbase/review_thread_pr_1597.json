{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA5NzM0MTQx", "number": 1597, "reviewThreads": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMTowNjoxNFrOD25aBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQxNTo0NjoxNVrOD4ZyOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU4ODkwMjQ1OnYy", "diffSide": "RIGHT", "path": "hbase-common/src/main/java/org/apache/hadoop/hbase/util/CommonFSUtils.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMTowNjoxNFrOGM3suw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMToyMjo0NVrOGM4Rsg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjE0ODY2Nw==", "bodyText": "This was actually correct the first time :)", "url": "https://github.com/apache/hbase/pull/1597#discussion_r416148667", "createdAt": "2020-04-27T21:06:14Z", "author": {"login": "joshelser"}, "path": "hbase-common/src/main/java/org/apache/hadoop/hbase/util/CommonFSUtils.java", "diffHunk": "@@ -348,19 +350,11 @@ public static void setWALRootDir(final Configuration c, final Path root) {\n   public static FileSystem getWALFileSystem(final Configuration c) throws IOException {\n     Path p = getWALRootDir(c);\n     FileSystem fs = p.getFileSystem(c);\n-    // hadoop-core does fs caching, so need to propagate this if set\n+    // hadoop-core does fs caching, so need to propogate this if set", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5f7bd7713cbbe205cefe537b477b3ab95db036ff"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjE1ODEzMA==", "bodyText": "Just reverting the previous patches @joshelser . Spelling fixes will have to come in through a different avenue.", "url": "https://github.com/apache/hbase/pull/1597#discussion_r416158130", "createdAt": "2020-04-27T21:22:45Z", "author": {"login": "ndimiduk"}, "path": "hbase-common/src/main/java/org/apache/hadoop/hbase/util/CommonFSUtils.java", "diffHunk": "@@ -348,19 +350,11 @@ public static void setWALRootDir(final Configuration c, final Path root) {\n   public static FileSystem getWALFileSystem(final Configuration c) throws IOException {\n     Path p = getWALRootDir(c);\n     FileSystem fs = p.getFileSystem(c);\n-    // hadoop-core does fs caching, so need to propagate this if set\n+    // hadoop-core does fs caching, so need to propogate this if set", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjE0ODY2Nw=="}, "originalCommit": {"oid": "5f7bd7713cbbe205cefe537b477b3ab95db036ff"}, "originalPosition": 37}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU4ODkyNDI2OnYy", "diffSide": "RIGHT", "path": "conf/hbase-site.xml", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMToxMToyNlrOGM34_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxODozOTowNVrOGOMArQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjE1MTgwNg==", "bodyText": "Is this copy of hbase-site.xml what makes it into the binary tarball? If so, does that worry you at all?\nI'm lamenting that we don't have a good way to differentiate a \"user doing things locally/in-situ\" vs. \"a user building out a real system\". Eventually, we can't stop someone from shooting themselves in the foot...", "url": "https://github.com/apache/hbase/pull/1597#discussion_r416151806", "createdAt": "2020-04-27T21:11:26Z", "author": {"login": "joshelser"}, "path": "conf/hbase-site.xml", "diffHunk": "@@ -21,4 +20,31 @@\n  */\n -->\n <configuration>\n+  <!--\n+    The following properties are set for running HBase as a single process on a\n+    developer workstation. With this configuration, HBase is running in\n+    \"stand-alone\" mode and without a distributed file system. In this mode, and\n+    without further configuration, HBase and ZooKeeper data are stored on the\n+    local filesystem, in a path under the value configured for `hbase.tmp.dir`.\n+    This value is overridden from its default value of `/tmp` because many\n+    systems clean `/tmp` on a regular basis. Instead, it points to a path within\n+    this HBase installation directory.\n+\n+    Running against the `LocalFileSystem`, as opposed to a distributed\n+    filesystem, runs the risk of data integrity issues and data loss. Normally\n+    HBase will refuse to run in such an environment. Setting\n+    `hbase.unsafe.stream.capability.enforce` to `false` overrides this behavior,\n+    permitting operation. This configuration is for the developer workstation\n+    only and __should not be used in production!__", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5f7bd7713cbbe205cefe537b477b3ab95db036ff"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjE1OTAwNw==", "bodyText": "Yes, this is what gets shipped as conf/hbase-site.xml. Which part has you concerned? Now's the time to air all grievances :)", "url": "https://github.com/apache/hbase/pull/1597#discussion_r416159007", "createdAt": "2020-04-27T21:24:08Z", "author": {"login": "ndimiduk"}, "path": "conf/hbase-site.xml", "diffHunk": "@@ -21,4 +20,31 @@\n  */\n -->\n <configuration>\n+  <!--\n+    The following properties are set for running HBase as a single process on a\n+    developer workstation. With this configuration, HBase is running in\n+    \"stand-alone\" mode and without a distributed file system. In this mode, and\n+    without further configuration, HBase and ZooKeeper data are stored on the\n+    local filesystem, in a path under the value configured for `hbase.tmp.dir`.\n+    This value is overridden from its default value of `/tmp` because many\n+    systems clean `/tmp` on a regular basis. Instead, it points to a path within\n+    this HBase installation directory.\n+\n+    Running against the `LocalFileSystem`, as opposed to a distributed\n+    filesystem, runs the risk of data integrity issues and data loss. Normally\n+    HBase will refuse to run in such an environment. Setting\n+    `hbase.unsafe.stream.capability.enforce` to `false` overrides this behavior,\n+    permitting operation. This configuration is for the developer workstation\n+    only and __should not be used in production!__", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjE1MTgwNg=="}, "originalCommit": {"oid": "5f7bd7713cbbe205cefe537b477b3ab95db036ff"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjE4NTAzNg==", "bodyText": "I'm just trying to think of ways that we can better prevent a user from doing themselves harm, and ways that people could fall into trouble if this is in the distribution's default configuration file. e.g. I could imagine a process which starts with hbase-site.xml from a release tarball, and then additions on top of that. This change would adversely affect them.\nThe only other thing I could think of would be to carry hbase.cluster.distributed=false here to try to be more confident that they are actually changing the config, giving it some thought. I'm mostly just thinking out loud though. I'm not personally convinced that turning off the sync enforcement OOTB is \"worrisome\".", "url": "https://github.com/apache/hbase/pull/1597#discussion_r416185036", "createdAt": "2020-04-27T22:12:13Z", "author": {"login": "joshelser"}, "path": "conf/hbase-site.xml", "diffHunk": "@@ -21,4 +20,31 @@\n  */\n -->\n <configuration>\n+  <!--\n+    The following properties are set for running HBase as a single process on a\n+    developer workstation. With this configuration, HBase is running in\n+    \"stand-alone\" mode and without a distributed file system. In this mode, and\n+    without further configuration, HBase and ZooKeeper data are stored on the\n+    local filesystem, in a path under the value configured for `hbase.tmp.dir`.\n+    This value is overridden from its default value of `/tmp` because many\n+    systems clean `/tmp` on a regular basis. Instead, it points to a path within\n+    this HBase installation directory.\n+\n+    Running against the `LocalFileSystem`, as opposed to a distributed\n+    filesystem, runs the risk of data integrity issues and data loss. Normally\n+    HBase will refuse to run in such an environment. Setting\n+    `hbase.unsafe.stream.capability.enforce` to `false` overrides this behavior,\n+    permitting operation. This configuration is for the developer workstation\n+    only and __should not be used in production!__", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjE1MTgwNg=="}, "originalCommit": {"oid": "5f7bd7713cbbe205cefe537b477b3ab95db036ff"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjE5MDYxMQ==", "bodyText": "The only other thing I could think of would be to carry hbase.cluster.distributed=false here to try to be more confident that they are actually changing the config, giving it some thought. I'm mostly just thinking out loud though. I'm not personally convinced that turning off the sync enforcement OOTB is \"worrisome\".\n\nI suppose it's better here than by default, as was done in the patch that this PR reverts.\nIMHO, without a LocalFIleSystem that's actually safe to use, none of these solutions are very pleasant.", "url": "https://github.com/apache/hbase/pull/1597#discussion_r416190611", "createdAt": "2020-04-27T22:24:12Z", "author": {"login": "ndimiduk"}, "path": "conf/hbase-site.xml", "diffHunk": "@@ -21,4 +20,31 @@\n  */\n -->\n <configuration>\n+  <!--\n+    The following properties are set for running HBase as a single process on a\n+    developer workstation. With this configuration, HBase is running in\n+    \"stand-alone\" mode and without a distributed file system. In this mode, and\n+    without further configuration, HBase and ZooKeeper data are stored on the\n+    local filesystem, in a path under the value configured for `hbase.tmp.dir`.\n+    This value is overridden from its default value of `/tmp` because many\n+    systems clean `/tmp` on a regular basis. Instead, it points to a path within\n+    this HBase installation directory.\n+\n+    Running against the `LocalFileSystem`, as opposed to a distributed\n+    filesystem, runs the risk of data integrity issues and data loss. Normally\n+    HBase will refuse to run in such an environment. Setting\n+    `hbase.unsafe.stream.capability.enforce` to `false` overrides this behavior,\n+    permitting operation. This configuration is for the developer workstation\n+    only and __should not be used in production!__", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjE1MTgwNg=="}, "originalCommit": {"oid": "5f7bd7713cbbe205cefe537b477b3ab95db036ff"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzUzMDAyOQ==", "bodyText": "The only other thing I could think of would be to carry hbase.cluster.distributed=false here to try to be more confident that they are actually changing the config, giving it some thought.\n\nThis is the default value, but sure, I see no harm in adding it here explicitly. A user is expected to edit that value when they go to production anyway, so there's no harm in saving them some typing.\n\nI could imagine a process which starts with hbase-site.xml from a release tarball, and then additions on top of that. This change would adversely affect them.\n\nYou're correct, this change affects them. After reflection, I prefer the change where we ship these defaults configured for development/testing users, instead of the initial change that altered the code.", "url": "https://github.com/apache/hbase/pull/1597#discussion_r417530029", "createdAt": "2020-04-29T18:39:05Z", "author": {"login": "ndimiduk"}, "path": "conf/hbase-site.xml", "diffHunk": "@@ -21,4 +20,31 @@\n  */\n -->\n <configuration>\n+  <!--\n+    The following properties are set for running HBase as a single process on a\n+    developer workstation. With this configuration, HBase is running in\n+    \"stand-alone\" mode and without a distributed file system. In this mode, and\n+    without further configuration, HBase and ZooKeeper data are stored on the\n+    local filesystem, in a path under the value configured for `hbase.tmp.dir`.\n+    This value is overridden from its default value of `/tmp` because many\n+    systems clean `/tmp` on a regular basis. Instead, it points to a path within\n+    this HBase installation directory.\n+\n+    Running against the `LocalFileSystem`, as opposed to a distributed\n+    filesystem, runs the risk of data integrity issues and data loss. Normally\n+    HBase will refuse to run in such an environment. Setting\n+    `hbase.unsafe.stream.capability.enforce` to `false` overrides this behavior,\n+    permitting operation. This configuration is for the developer workstation\n+    only and __should not be used in production!__", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjE1MTgwNg=="}, "originalCommit": {"oid": "5f7bd7713cbbe205cefe537b477b3ab95db036ff"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU4ODkzODU0OnYy", "diffSide": "RIGHT", "path": "conf/hbase-site.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMToxNTozMFrOGM4BlQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMToyNDozOVrOGM4WVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjE1NDAwNQ==", "bodyText": "Oh, so out-of-the-box, these configs are in place?", "url": "https://github.com/apache/hbase/pull/1597#discussion_r416154005", "createdAt": "2020-04-27T21:15:30Z", "author": {"login": "saintstack"}, "path": "conf/hbase-site.xml", "diffHunk": "@@ -21,4 +20,31 @@\n  */\n -->\n <configuration>\n+  <!--\n+    The following properties are set for running HBase as a single process on a\n+    developer workstation. With this configuration, HBase is running in\n+    \"stand-alone\" mode and without a distributed file system. In this mode, and\n+    without further configuration, HBase and ZooKeeper data are stored on the\n+    local filesystem, in a path under the value configured for `hbase.tmp.dir`.\n+    This value is overridden from its default value of `/tmp` because many\n+    systems clean `/tmp` on a regular basis. Instead, it points to a path within\n+    this HBase installation directory.\n+\n+    Running against the `LocalFileSystem`, as opposed to a distributed\n+    filesystem, runs the risk of data integrity issues and data loss. Normally\n+    HBase will refuse to run in such an environment. Setting\n+    `hbase.unsafe.stream.capability.enforce` to `false` overrides this behavior,\n+    permitting operation. This configuration is for the developer workstation\n+    only and __should not be used in production!__\n+\n+    See also https://hbase.apache.org/book.html#standalone_dist\n+  -->\n+  <property>\n+    <name>hbase.tmp.dir</name>\n+    <value>./tmp</value>\n+  </property>\n+  <property>\n+    <name>hbase.unsafe.stream.capability.enforce</name>\n+    <value>false</value>\n+  </property>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5f7bd7713cbbe205cefe537b477b3ab95db036ff"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjE1OTMxNg==", "bodyText": "Yessir, these are what ships in conf/hbase-site.xml.", "url": "https://github.com/apache/hbase/pull/1597#discussion_r416159316", "createdAt": "2020-04-27T21:24:39Z", "author": {"login": "ndimiduk"}, "path": "conf/hbase-site.xml", "diffHunk": "@@ -21,4 +20,31 @@\n  */\n -->\n <configuration>\n+  <!--\n+    The following properties are set for running HBase as a single process on a\n+    developer workstation. With this configuration, HBase is running in\n+    \"stand-alone\" mode and without a distributed file system. In this mode, and\n+    without further configuration, HBase and ZooKeeper data are stored on the\n+    local filesystem, in a path under the value configured for `hbase.tmp.dir`.\n+    This value is overridden from its default value of `/tmp` because many\n+    systems clean `/tmp` on a regular basis. Instead, it points to a path within\n+    this HBase installation directory.\n+\n+    Running against the `LocalFileSystem`, as opposed to a distributed\n+    filesystem, runs the risk of data integrity issues and data loss. Normally\n+    HBase will refuse to run in such an environment. Setting\n+    `hbase.unsafe.stream.capability.enforce` to `false` overrides this behavior,\n+    permitting operation. This configuration is for the developer workstation\n+    only and __should not be used in production!__\n+\n+    See also https://hbase.apache.org/book.html#standalone_dist\n+  -->\n+  <property>\n+    <name>hbase.tmp.dir</name>\n+    <value>./tmp</value>\n+  </property>\n+  <property>\n+    <name>hbase.unsafe.stream.capability.enforce</name>\n+    <value>false</value>\n+  </property>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjE1NDAwNQ=="}, "originalCommit": {"oid": "5f7bd7713cbbe205cefe537b477b3ab95db036ff"}, "originalPosition": 40}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU4ODk0MTg1OnYy", "diffSide": "RIGHT", "path": "hbase-common/src/main/java/org/apache/hadoop/hbase/util/CommonFSUtils.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMToxNjoxNlrOGM4DYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMToyNToxM1rOGM4XgQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjE1NDQ2Ng==", "bodyText": "Old spelling is correct.", "url": "https://github.com/apache/hbase/pull/1597#discussion_r416154466", "createdAt": "2020-04-27T21:16:16Z", "author": {"login": "saintstack"}, "path": "hbase-common/src/main/java/org/apache/hadoop/hbase/util/CommonFSUtils.java", "diffHunk": "@@ -348,19 +350,11 @@ public static void setWALRootDir(final Configuration c, final Path root) {\n   public static FileSystem getWALFileSystem(final Configuration c) throws IOException {\n     Path p = getWALRootDir(c);\n     FileSystem fs = p.getFileSystem(c);\n-    // hadoop-core does fs caching, so need to propagate this if set\n+    // hadoop-core does fs caching, so need to propogate this if set", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5f7bd7713cbbe205cefe537b477b3ab95db036ff"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjE1OTYxNw==", "bodyText": "Okay, I'll retain the spelling fixes from the reverted commits. Man you guys want your cake and to eat it as well!", "url": "https://github.com/apache/hbase/pull/1597#discussion_r416159617", "createdAt": "2020-04-27T21:25:13Z", "author": {"login": "ndimiduk"}, "path": "hbase-common/src/main/java/org/apache/hadoop/hbase/util/CommonFSUtils.java", "diffHunk": "@@ -348,19 +350,11 @@ public static void setWALRootDir(final Configuration c, final Path root) {\n   public static FileSystem getWALFileSystem(final Configuration c) throws IOException {\n     Path p = getWALRootDir(c);\n     FileSystem fs = p.getFileSystem(c);\n-    // hadoop-core does fs caching, so need to propagate this if set\n+    // hadoop-core does fs caching, so need to propogate this if set", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjE1NDQ2Ng=="}, "originalCommit": {"oid": "5f7bd7713cbbe205cefe537b477b3ab95db036ff"}, "originalPosition": 37}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU4ODk0Mjk5OnYy", "diffSide": "LEFT", "path": "hbase-common/src/main/java/org/apache/hadoop/hbase/util/CommonFSUtils.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMToxNjozMFrOGM4D_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMToxNjozMFrOGM4D_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjE1NDYyMg==", "bodyText": "Hurray", "url": "https://github.com/apache/hbase/pull/1597#discussion_r416154622", "createdAt": "2020-04-27T21:16:30Z", "author": {"login": "saintstack"}, "path": "hbase-common/src/main/java/org/apache/hadoop/hbase/util/CommonFSUtils.java", "diffHunk": "@@ -348,19 +350,11 @@ public static void setWALRootDir(final Configuration c, final Path root) {\n   public static FileSystem getWALFileSystem(final Configuration c) throws IOException {\n     Path p = getWALRootDir(c);\n     FileSystem fs = p.getFileSystem(c);\n-    // hadoop-core does fs caching, so need to propagate this if set\n+    // hadoop-core does fs caching, so need to propogate this if set\n     String enforceStreamCapability = c.get(UNSAFE_STREAM_CAPABILITY_ENFORCE);\n     if (enforceStreamCapability != null) {\n       fs.getConf().set(UNSAFE_STREAM_CAPABILITY_ENFORCE, enforceStreamCapability);\n     }\n-    if (fs instanceof LocalFileSystem) {\n-      // running on LocalFileSystem, which does not support the required capabilities `HSYNC`\n-      // and `HFLUSH`. disable enforcement.\n-      final boolean value = false;\n-      LOG.warn(\"Cannot enforce durability guarantees while running on {}. Setting {}={} for\"\n-        + \" this FileSystem.\", fs.getUri(), UNSAFE_STREAM_CAPABILITY_ENFORCE, value);\n-      fs.getConf().setBoolean(UNSAFE_STREAM_CAPABILITY_ENFORCE, value);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5f7bd7713cbbe205cefe537b477b3ab95db036ff"}, "originalPosition": 48}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU4ODk0Nzc1OnYy", "diffSide": "RIGHT", "path": "src/main/asciidoc/_chapters/getting_started.adoc", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMToxNzo0OFrOGM4GwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQwNToyMjozM1rOGNwHaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjE1NTMyOA==", "bodyText": "hbase-env.sh, unexpectedly, lives in conf dir so this change is incorrect (hbase-env.sh manufactures config....)", "url": "https://github.com/apache/hbase/pull/1597#discussion_r416155328", "createdAt": "2020-04-27T21:17:48Z", "author": {"login": "saintstack"}, "path": "src/main/asciidoc/_chapters/getting_started.adoc", "diffHunk": "@@ -55,80 +55,34 @@ See <<java,Java>> for information about supported JDK versions.\n . Choose a download site from this list of link:https://www.apache.org/dyn/closer.lua/hbase/[Apache Download Mirrors].\n   Click on the suggested top link.\n   This will take you to a mirror of _HBase Releases_.\n-  Click on the folder named _stable_ and then download the binary file that looks like\n-  _hbase-<version>-bin.tar.gz_.\n+  Click on the folder named _stable_ and then download the binary file that ends in _.tar.gz_ to your local filesystem.\n+  Do not download the file ending in _src.tar.gz_ for now.\n \n-. Extract the downloaded file and change to the newly-created directory.\n+. Extract the downloaded file, and change to the newly-created directory.\n +\n+[source,subs=\"attributes\"]\n ----\n-$ tar xzvf hbase-<version>-bin.tar.gz\n-$ cd hbase-<version>/\n+\n+$ tar xzvf hbase-{Version}-bin.tar.gz\n+$ cd hbase-{Version}/\n ----\n \n-. Set the `JAVA_HOME` environment variable in _conf/hbase-env.sh_.\n-  First, locate the installation of `java` on your machine. On Unix systems, you can use the\n-  _whereis java_ command. Once you have the location, edit _conf/hbase-env.sh_ file, found inside\n-  the extracted _hbase-<version>_ directory, uncomment the line starting with `#export JAVA_HOME=`,\n-  and then set it to your Java installation path.\n+. You must set the `JAVA_HOME` environment variable before starting HBase.\n+  To make this easier, HBase lets you set it within the _conf/hbase-env.sh_ file. You must locate where Java is\n+  installed on your machine, and one way to find this is by using the _whereis java_ command. Once you have the location,\n+  edit the _conf/hbase-env.sh_ file and uncomment the line starting with _#export JAVA_HOME=_, and then set it to your Java installation path.\n +\n-.Example extract from _conf/hbase-env.sh_ where `JAVA_HOME` is set\n+.Example extract from _hbase-env.sh_ where _JAVA_HOME_ is set", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5f7bd7713cbbe205cefe537b477b3ab95db036ff"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjE2MDI1MA==", "bodyText": "This is just reverting the book to as it was before HBASE-24106.\nWhat's wrong with hbase-env.sh being in conf?", "url": "https://github.com/apache/hbase/pull/1597#discussion_r416160250", "createdAt": "2020-04-27T21:26:10Z", "author": {"login": "ndimiduk"}, "path": "src/main/asciidoc/_chapters/getting_started.adoc", "diffHunk": "@@ -55,80 +55,34 @@ See <<java,Java>> for information about supported JDK versions.\n . Choose a download site from this list of link:https://www.apache.org/dyn/closer.lua/hbase/[Apache Download Mirrors].\n   Click on the suggested top link.\n   This will take you to a mirror of _HBase Releases_.\n-  Click on the folder named _stable_ and then download the binary file that looks like\n-  _hbase-<version>-bin.tar.gz_.\n+  Click on the folder named _stable_ and then download the binary file that ends in _.tar.gz_ to your local filesystem.\n+  Do not download the file ending in _src.tar.gz_ for now.\n \n-. Extract the downloaded file and change to the newly-created directory.\n+. Extract the downloaded file, and change to the newly-created directory.\n +\n+[source,subs=\"attributes\"]\n ----\n-$ tar xzvf hbase-<version>-bin.tar.gz\n-$ cd hbase-<version>/\n+\n+$ tar xzvf hbase-{Version}-bin.tar.gz\n+$ cd hbase-{Version}/\n ----\n \n-. Set the `JAVA_HOME` environment variable in _conf/hbase-env.sh_.\n-  First, locate the installation of `java` on your machine. On Unix systems, you can use the\n-  _whereis java_ command. Once you have the location, edit _conf/hbase-env.sh_ file, found inside\n-  the extracted _hbase-<version>_ directory, uncomment the line starting with `#export JAVA_HOME=`,\n-  and then set it to your Java installation path.\n+. You must set the `JAVA_HOME` environment variable before starting HBase.\n+  To make this easier, HBase lets you set it within the _conf/hbase-env.sh_ file. You must locate where Java is\n+  installed on your machine, and one way to find this is by using the _whereis java_ command. Once you have the location,\n+  edit the _conf/hbase-env.sh_ file and uncomment the line starting with _#export JAVA_HOME=_, and then set it to your Java installation path.\n +\n-.Example extract from _conf/hbase-env.sh_ where `JAVA_HOME` is set\n+.Example extract from _hbase-env.sh_ where _JAVA_HOME_ is set", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjE1NTMyOA=="}, "originalCommit": {"oid": "5f7bd7713cbbe205cefe537b477b3ab95db036ff"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzA3MzAwMQ==", "bodyText": "I read this change wrong. Ignore.", "url": "https://github.com/apache/hbase/pull/1597#discussion_r417073001", "createdAt": "2020-04-29T05:22:33Z", "author": {"login": "saintstack"}, "path": "src/main/asciidoc/_chapters/getting_started.adoc", "diffHunk": "@@ -55,80 +55,34 @@ See <<java,Java>> for information about supported JDK versions.\n . Choose a download site from this list of link:https://www.apache.org/dyn/closer.lua/hbase/[Apache Download Mirrors].\n   Click on the suggested top link.\n   This will take you to a mirror of _HBase Releases_.\n-  Click on the folder named _stable_ and then download the binary file that looks like\n-  _hbase-<version>-bin.tar.gz_.\n+  Click on the folder named _stable_ and then download the binary file that ends in _.tar.gz_ to your local filesystem.\n+  Do not download the file ending in _src.tar.gz_ for now.\n \n-. Extract the downloaded file and change to the newly-created directory.\n+. Extract the downloaded file, and change to the newly-created directory.\n +\n+[source,subs=\"attributes\"]\n ----\n-$ tar xzvf hbase-<version>-bin.tar.gz\n-$ cd hbase-<version>/\n+\n+$ tar xzvf hbase-{Version}-bin.tar.gz\n+$ cd hbase-{Version}/\n ----\n \n-. Set the `JAVA_HOME` environment variable in _conf/hbase-env.sh_.\n-  First, locate the installation of `java` on your machine. On Unix systems, you can use the\n-  _whereis java_ command. Once you have the location, edit _conf/hbase-env.sh_ file, found inside\n-  the extracted _hbase-<version>_ directory, uncomment the line starting with `#export JAVA_HOME=`,\n-  and then set it to your Java installation path.\n+. You must set the `JAVA_HOME` environment variable before starting HBase.\n+  To make this easier, HBase lets you set it within the _conf/hbase-env.sh_ file. You must locate where Java is\n+  installed on your machine, and one way to find this is by using the _whereis java_ command. Once you have the location,\n+  edit the _conf/hbase-env.sh_ file and uncomment the line starting with _#export JAVA_HOME=_, and then set it to your Java installation path.\n +\n-.Example extract from _conf/hbase-env.sh_ where `JAVA_HOME` is set\n+.Example extract from _hbase-env.sh_ where _JAVA_HOME_ is set", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjE1NTMyOA=="}, "originalCommit": {"oid": "5f7bd7713cbbe205cefe537b477b3ab95db036ff"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU4ODk1MTYyOnYy", "diffSide": "RIGHT", "path": "src/main/asciidoc/_chapters/getting_started.adoc", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMToxODo0N1rOGM4JCA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMToxODo0N1rOGM4JCA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjE1NTkxMg==", "bodyText": "Good", "url": "https://github.com/apache/hbase/pull/1597#discussion_r416155912", "createdAt": "2020-04-27T21:18:47Z", "author": {"login": "saintstack"}, "path": "src/main/asciidoc/_chapters/getting_started.adoc", "diffHunk": "@@ -426,7 +386,7 @@ You can stop HBase the same way as in the <<quickstart,quickstart>> procedure, u\n \n \n [[quickstart_fully_distributed]]\n-=== Advanced - Fully Distributed\n+=== Fully Distributed for Production", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5f7bd7713cbbe205cefe537b477b3ab95db036ff"}, "originalPosition": 163}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU4OTc3MzE3OnYy", "diffSide": "RIGHT", "path": "hbase-common/src/main/java/org/apache/hadoop/hbase/util/CommonFSUtils.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQwMjowMTo1NFrOGM_O4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQyMDoxMzozN1rOGNlHMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjI3MjA5OQ==", "bodyText": "Why in the above xml we change ** to * and here we change * to **...", "url": "https://github.com/apache/hbase/pull/1597#discussion_r416272099", "createdAt": "2020-04-28T02:01:54Z", "author": {"login": "Apache9"}, "path": "hbase-common/src/main/java/org/apache/hadoop/hbase/util/CommonFSUtils.java", "diffHunk": "@@ -1,4 +1,4 @@\n-/*\n+/**", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5f7bd7713cbbe205cefe537b477b3ab95db036ff"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjg5MjcyMw==", "bodyText": "Why in the above xml we change ** to * and here we change * to **...\n\nThis reverts the two existing commits. I have not retained the minor improvements they provided.", "url": "https://github.com/apache/hbase/pull/1597#discussion_r416892723", "createdAt": "2020-04-28T20:13:37Z", "author": {"login": "ndimiduk"}, "path": "hbase-common/src/main/java/org/apache/hadoop/hbase/util/CommonFSUtils.java", "diffHunk": "@@ -1,4 +1,4 @@\n-/*\n+/**", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjI3MjA5OQ=="}, "originalCommit": {"oid": "5f7bd7713cbbe205cefe537b477b3ab95db036ff"}, "originalPosition": 2}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5Nzg4MjIzOnYy", "diffSide": "RIGHT", "path": "conf/hbase-site.xml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxODozOTo0NFrOGOMCIw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxODozOTo0NFrOGOMCIw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzUzMDQwMw==", "bodyText": "Hadoop Configuration supports environment variables. Let me make this even my explicit by changing this value to ${env.HBASE_HOME:-.}/tmp.", "url": "https://github.com/apache/hbase/pull/1597#discussion_r417530403", "createdAt": "2020-04-29T18:39:44Z", "author": {"login": "ndimiduk"}, "path": "conf/hbase-site.xml", "diffHunk": "@@ -21,4 +20,31 @@\n  */\n -->\n <configuration>\n+  <!--\n+    The following properties are set for running HBase as a single process on a\n+    developer workstation. With this configuration, HBase is running in\n+    \"stand-alone\" mode and without a distributed file system. In this mode, and\n+    without further configuration, HBase and ZooKeeper data are stored on the\n+    local filesystem, in a path under the value configured for `hbase.tmp.dir`.\n+    This value is overridden from its default value of `/tmp` because many\n+    systems clean `/tmp` on a regular basis. Instead, it points to a path within\n+    this HBase installation directory.\n+\n+    Running against the `LocalFileSystem`, as opposed to a distributed\n+    filesystem, runs the risk of data integrity issues and data loss. Normally\n+    HBase will refuse to run in such an environment. Setting\n+    `hbase.unsafe.stream.capability.enforce` to `false` overrides this behavior,\n+    permitting operation. This configuration is for the developer workstation\n+    only and __should not be used in production!__\n+\n+    See also https://hbase.apache.org/book.html#standalone_dist\n+  -->\n+  <property>\n+    <name>hbase.tmp.dir</name>\n+    <value>./tmp</value>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5f7bd7713cbbe205cefe537b477b3ab95db036ff"}, "originalPosition": 35}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYwNDY5MzA2OnYy", "diffSide": "RIGHT", "path": "src/main/asciidoc/_chapters/getting_started.adoc", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQxNTo0NjoxNVrOGPNV0g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQyMjowOToyN1rOGQUCYA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODYwMDQwMg==", "bodyText": "We should make clear in this paragraph that this quickstart covers a necessary but not sufficient topic for a system that is \"production ready.\"\nJust to be clear that we are only explaining how to get a distributed HBase on top of a distributed filesystem and there exist other topics that need to be considered for a production deployment. Folks should still read through the section \"The Important Configurations\" and should ensure they have monitoring of metrics and log aggregation, for example.", "url": "https://github.com/apache/hbase/pull/1597#discussion_r418600402", "createdAt": "2020-05-01T15:46:15Z", "author": {"login": "busbey"}, "path": "src/main/asciidoc/_chapters/getting_started.adoc", "diffHunk": "@@ -426,7 +386,7 @@ You can stop HBase the same way as in the <<quickstart,quickstart>> procedure, u\n \n \n [[quickstart_fully_distributed]]\n-=== Advanced - Fully Distributed\n+=== Fully Distributed for Production\n \n In reality, you need a fully-distributed configuration to fully test HBase and to use it in real-world scenarios.\n In a distributed configuration, the cluster contains multiple nodes, each of which runs one or more HBase daemon.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "69a9386dcf1ecc67675ff850d9e61047c57dd27b"}, "originalPosition": 166}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc1ODY4OA==", "bodyText": "Maybe drop my addition of \"for Production\" then? I thought it odd that our default operating configuration was flagged as \"advanced\". I agree there's more to a production deploy than just these configs. However, I also don't think it's our job to be prescriptive of what a production deployment looks like, re: monitoring, metrics, log aggregation, &c. I think anything more than a paragraph or two of \"recommended\" or \"strongly encouraged\" supporting infrastructure is beyond the scope of our document.", "url": "https://github.com/apache/hbase/pull/1597#discussion_r419758688", "createdAt": "2020-05-04T22:09:27Z", "author": {"login": "ndimiduk"}, "path": "src/main/asciidoc/_chapters/getting_started.adoc", "diffHunk": "@@ -426,7 +386,7 @@ You can stop HBase the same way as in the <<quickstart,quickstart>> procedure, u\n \n \n [[quickstart_fully_distributed]]\n-=== Advanced - Fully Distributed\n+=== Fully Distributed for Production\n \n In reality, you need a fully-distributed configuration to fully test HBase and to use it in real-world scenarios.\n In a distributed configuration, the cluster contains multiple nodes, each of which runs one or more HBase daemon.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODYwMDQwMg=="}, "originalCommit": {"oid": "69a9386dcf1ecc67675ff850d9e61047c57dd27b"}, "originalPosition": 166}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1837, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}