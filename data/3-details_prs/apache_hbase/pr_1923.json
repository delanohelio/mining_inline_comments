{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM2NDMwMDY3", "number": 1923, "title": "HBASE-24578 [WAL] Add a parameter to config RingBufferEventHandler's SyncFuture count", "bodyText": "", "createdAt": "2020-06-18T12:10:15Z", "url": "https://github.com/apache/hbase/pull/1923", "merged": true, "mergeCommit": {"oid": "44691ce23c735310538616c19b052d3793404fbc"}, "closed": true, "closedAt": "2020-07-06T03:24:10Z", "author": {"login": "WenFeiYi"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcsdVKrgH2gAyNDM2NDMwMDY3OmE4ODg4OGQxMWI1Y2VjZTc0OTRmOGJlNzdhOTAxZmY3MDIwMDI4NDQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcvnKS-AFqTQzODc1MTU1NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a88888d11b5cece7494f8be77a901ff702002844", "author": {"user": null}, "url": "https://github.com/apache/hbase/commit/a88888d11b5cece7494f8be77a901ff702002844", "committedDate": "2020-06-18T12:09:07Z", "message": "HBASE-24578"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzMjQwMjU0", "url": "https://github.com/apache/hbase/pull/1923#pullrequestreview-433240254", "createdAt": "2020-06-18T12:39:47Z", "commit": {"oid": "a88888d11b5cece7494f8be77a901ff702002844"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxMjozOTo0OFrOGltaxA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxMjozOTo0OFrOGltaxA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjE5NDYyOA==", "bodyText": "I think your patch get wrong to my idea. The inching point is maxHandlersCount not hbase.regionserver.hlog.syncer.count", "url": "https://github.com/apache/hbase/pull/1923#discussion_r442194628", "createdAt": "2020-06-18T12:39:48Z", "author": {"login": "Reidddddd"}, "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/FSHLog.java", "diffHunk": "@@ -230,7 +243,7 @@ public FSHLog(final FileSystem fs, final Path rootDir, final String logDir,\n     this.disruptor.getRingBuffer().next();\n     int maxHandlersCount = conf.getInt(HConstants.REGION_SERVER_HANDLER_COUNT, 200);\n     this.ringBufferEventHandler = new RingBufferEventHandler(\n-        conf.getInt(\"hbase.regionserver.hlog.syncer.count\", 5), maxHandlersCount);\n+        conf.getInt(\"hbase.regionserver.hlog.syncer.count\", defaultSyncerCount), maxHandlersCount);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a88888d11b5cece7494f8be77a901ff702002844"}, "originalPosition": 32}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f927d2a109784bdc6707cdc02dff75b8ea7dd22f", "author": {"user": null}, "url": "https://github.com/apache/hbase/commit/f927d2a109784bdc6707cdc02dff75b8ea7dd22f", "committedDate": "2020-06-19T09:03:02Z", "message": "fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7ba12acc0b63a419165533ecee29348a64f18a40", "author": {"user": null}, "url": "https://github.com/apache/hbase/commit/7ba12acc0b63a419165533ecee29348a64f18a40", "committedDate": "2020-06-19T09:20:18Z", "message": "fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3c38a741eabbc30eb21c1934710e846d7afd459a", "author": {"user": null}, "url": "https://github.com/apache/hbase/commit/3c38a741eabbc30eb21c1934710e846d7afd459a", "committedDate": "2020-06-19T09:27:30Z", "message": "fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9fc46959eeb3a117babe636d425eb28625b9a448", "author": {"user": null}, "url": "https://github.com/apache/hbase/commit/9fc46959eeb3a117babe636d425eb28625b9a448", "committedDate": "2020-06-22T05:13:56Z", "message": "fix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2NDQ5Nzg2", "url": "https://github.com/apache/hbase/pull/1923#pullrequestreview-436449786", "createdAt": "2020-06-24T08:50:56Z", "commit": {"oid": "9fc46959eeb3a117babe636d425eb28625b9a448"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwODo1MDo1N1rOGoI_Rw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwODo1MDo1N1rOGoI_Rw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc0MzQ5NQ==", "bodyText": "this name is not good, it is confusing. batch of what? or what batch?", "url": "https://github.com/apache/hbase/pull/1923#discussion_r444743495", "createdAt": "2020-06-24T08:50:57Z", "author": {"login": "Reidddddd"}, "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/FSHLog.java", "diffHunk": "@@ -105,6 +105,16 @@\n   // We use ring buffer sequence as txid of FSWALEntry and SyncFuture.\n   private static final Logger LOG = LoggerFactory.getLogger(FSHLog.class);\n \n+  private static final String TOLERABLE_LOW_REPLICATION = \"hbase.regionserver.hlog.tolerable.lowreplication\";\n+  private static final String LOW_REPLICATION_ROLL_LIMIT = \"hbase.regionserver.hlog.lowreplication.rolllimit\";\n+  private static final int DEFAULT_LOW_REPLICATION_ROLL_LIMIT = 5;\n+  private static final String ROLL_ERRORS_TOLERATED = \"hbase.regionserver.logroll.errors.tolerated\";\n+  private static final int DEFAULT_ROLL_ERRORS_TOLERATED = 2;\n+  private static final String SYNCER_COUNT = \"hbase.regionserver.hlog.syncer.count\";\n+  private static final int DEFAULT_SYNCER_COUNT = 5;\n+  private static final String MAX_BATCH_COUNT = \"hbase.regionserver.hlog.max.batch.count\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9fc46959eeb3a117babe636d425eb28625b9a448"}, "originalPosition": 11}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "478916ec4c4f57637ac8263e6a3390d05df09e55", "author": {"user": null}, "url": "https://github.com/apache/hbase/commit/478916ec4c4f57637ac8263e6a3390d05df09e55", "committedDate": "2020-06-28T02:24:26Z", "message": "fix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4NzUxNTU0", "url": "https://github.com/apache/hbase/pull/1923#pullrequestreview-438751554", "createdAt": "2020-06-28T07:18:04Z", "commit": {"oid": "478916ec4c4f57637ac8263e6a3390d05df09e55"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4346, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}