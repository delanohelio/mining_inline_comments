{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEwNzI4MDc4", "number": 2590, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QyMToyOTo1NFrOEyj-vg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QyMToyOTo1NFrOEyj-vg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxNDUzNzU4OnYy", "diffSide": "RIGHT", "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/master/procedure/HBCKServerCrashProcedure.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QyMToyOTo1NFrOHpRvLQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxNjoxNzozOVrOHpyWDw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzA0NDI2OQ==", "bodyText": "I'm good w/ this. Just need to watch it.\nI've added changes and then found I sometimes made the situation worse. Need to watch out for that here but it is HBCKSCP, run by the operator, so they should be looking at the result when manually running hbck2.", "url": "https://github.com/apache/hbase/pull/2590#discussion_r513044269", "createdAt": "2020-10-27T21:29:54Z", "author": {"login": "saintstack"}, "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/master/procedure/HBCKServerCrashProcedure.java", "diffHunk": "@@ -169,4 +170,16 @@ public boolean visit(Result result) throws IOException {\n       return this.reassigns;\n     }\n   }\n+\n+  /**\n+   * The RegionStateNode will not have a location if a confirm of an OPEN fails. On fail,\n+   * the RegionStateNode regionLocation is set to null. This is 'looser' than the test done\n+   * in the superclass. The HBCKSCP has been scheduled by an operator via hbck2 probably at the\n+   * behest of a report of an 'Unknown Server' in the 'HBCK Report'. Let the operators operation\n+   * succeed even in case where the region location in the RegionStateNode is null.\n+   */\n+  @Override\n+  protected boolean isMatchingRegionLocation(RegionStateNode rsn) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "107e4fbe87a6d18a764f060185fb593c414a7606"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzA0NjUxOQ==", "bodyText": "Is it that the RSN is null but hbase:meta is an 'unknown server'?", "url": "https://github.com/apache/hbase/pull/2590#discussion_r513046519", "createdAt": "2020-10-27T21:34:35Z", "author": {"login": "saintstack"}, "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/master/procedure/HBCKServerCrashProcedure.java", "diffHunk": "@@ -169,4 +170,16 @@ public boolean visit(Result result) throws IOException {\n       return this.reassigns;\n     }\n   }\n+\n+  /**\n+   * The RegionStateNode will not have a location if a confirm of an OPEN fails. On fail,\n+   * the RegionStateNode regionLocation is set to null. This is 'looser' than the test done\n+   * in the superclass. The HBCKSCP has been scheduled by an operator via hbck2 probably at the\n+   * behest of a report of an 'Unknown Server' in the 'HBCK Report'. Let the operators operation\n+   * succeed even in case where the region location in the RegionStateNode is null.\n+   */\n+  @Override\n+  protected boolean isMatchingRegionLocation(RegionStateNode rsn) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzA0NDI2OQ=="}, "originalCommit": {"oid": "107e4fbe87a6d18a764f060185fb593c414a7606"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzA0NzYxMw==", "bodyText": "Yeah... it seems but the compare to RSN fails so we don't clean the unknown server... ok. Got it.", "url": "https://github.com/apache/hbase/pull/2590#discussion_r513047613", "createdAt": "2020-10-27T21:37:01Z", "author": {"login": "saintstack"}, "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/master/procedure/HBCKServerCrashProcedure.java", "diffHunk": "@@ -169,4 +170,16 @@ public boolean visit(Result result) throws IOException {\n       return this.reassigns;\n     }\n   }\n+\n+  /**\n+   * The RegionStateNode will not have a location if a confirm of an OPEN fails. On fail,\n+   * the RegionStateNode regionLocation is set to null. This is 'looser' than the test done\n+   * in the superclass. The HBCKSCP has been scheduled by an operator via hbck2 probably at the\n+   * behest of a report of an 'Unknown Server' in the 'HBCK Report'. Let the operators operation\n+   * succeed even in case where the region location in the RegionStateNode is null.\n+   */\n+  @Override\n+  protected boolean isMatchingRegionLocation(RegionStateNode rsn) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzA0NDI2OQ=="}, "originalCommit": {"oid": "107e4fbe87a6d18a764f060185fb593c414a7606"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzU3ODUxMQ==", "bodyText": "Yes, this is my understanding. Thanks for the review!", "url": "https://github.com/apache/hbase/pull/2590#discussion_r513578511", "createdAt": "2020-10-28T16:17:39Z", "author": {"login": "petersomogyi"}, "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/master/procedure/HBCKServerCrashProcedure.java", "diffHunk": "@@ -169,4 +170,16 @@ public boolean visit(Result result) throws IOException {\n       return this.reassigns;\n     }\n   }\n+\n+  /**\n+   * The RegionStateNode will not have a location if a confirm of an OPEN fails. On fail,\n+   * the RegionStateNode regionLocation is set to null. This is 'looser' than the test done\n+   * in the superclass. The HBCKSCP has been scheduled by an operator via hbck2 probably at the\n+   * behest of a report of an 'Unknown Server' in the 'HBCK Report'. Let the operators operation\n+   * succeed even in case where the region location in the RegionStateNode is null.\n+   */\n+  @Override\n+  protected boolean isMatchingRegionLocation(RegionStateNode rsn) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzA0NDI2OQ=="}, "originalCommit": {"oid": "107e4fbe87a6d18a764f060185fb593c414a7606"}, "originalPosition": 21}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2474, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}