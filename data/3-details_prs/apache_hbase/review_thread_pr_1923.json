{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM2NDMwMDY3", "number": 1923, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxMjozOTo0N1rOEGu36w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwODo1MDo1N1rOEIRuag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1NDk0ODkxOnYy", "diffSide": "RIGHT", "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/FSHLog.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxMjozOTo0OFrOGltaxA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxMjozOTo0OFrOGltaxA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjE5NDYyOA==", "bodyText": "I think your patch get wrong to my idea. The inching point is maxHandlersCount not hbase.regionserver.hlog.syncer.count", "url": "https://github.com/apache/hbase/pull/1923#discussion_r442194628", "createdAt": "2020-06-18T12:39:48Z", "author": {"login": "Reidddddd"}, "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/FSHLog.java", "diffHunk": "@@ -230,7 +243,7 @@ public FSHLog(final FileSystem fs, final Path rootDir, final String logDir,\n     this.disruptor.getRingBuffer().next();\n     int maxHandlersCount = conf.getInt(HConstants.REGION_SERVER_HANDLER_COUNT, 200);\n     this.ringBufferEventHandler = new RingBufferEventHandler(\n-        conf.getInt(\"hbase.regionserver.hlog.syncer.count\", 5), maxHandlersCount);\n+        conf.getInt(\"hbase.regionserver.hlog.syncer.count\", defaultSyncerCount), maxHandlersCount);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a88888d11b5cece7494f8be77a901ff702002844"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3MTE0NDc0OnYy", "diffSide": "RIGHT", "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/FSHLog.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwODo1MDo1N1rOGoI_Rw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwNzo1MjoyOFrOGpXQfg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc0MzQ5NQ==", "bodyText": "this name is not good, it is confusing. batch of what? or what batch?", "url": "https://github.com/apache/hbase/pull/1923#discussion_r444743495", "createdAt": "2020-06-24T08:50:57Z", "author": {"login": "Reidddddd"}, "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/FSHLog.java", "diffHunk": "@@ -105,6 +105,16 @@\n   // We use ring buffer sequence as txid of FSWALEntry and SyncFuture.\n   private static final Logger LOG = LoggerFactory.getLogger(FSHLog.class);\n \n+  private static final String TOLERABLE_LOW_REPLICATION = \"hbase.regionserver.hlog.tolerable.lowreplication\";\n+  private static final String LOW_REPLICATION_ROLL_LIMIT = \"hbase.regionserver.hlog.lowreplication.rolllimit\";\n+  private static final int DEFAULT_LOW_REPLICATION_ROLL_LIMIT = 5;\n+  private static final String ROLL_ERRORS_TOLERATED = \"hbase.regionserver.logroll.errors.tolerated\";\n+  private static final int DEFAULT_ROLL_ERRORS_TOLERATED = 2;\n+  private static final String SYNCER_COUNT = \"hbase.regionserver.hlog.syncer.count\";\n+  private static final int DEFAULT_SYNCER_COUNT = 5;\n+  private static final String MAX_BATCH_COUNT = \"hbase.regionserver.hlog.max.batch.count\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9fc46959eeb3a117babe636d425eb28625b9a448"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjAyNTg1NA==", "bodyText": "After second thought, the new name should use wal instead of hlog which was the name in old version.\nAnd from the context in codes, hbase.regionserver.wal.sync.batch.count sounds good to me", "url": "https://github.com/apache/hbase/pull/1923#discussion_r446025854", "createdAt": "2020-06-26T07:52:28Z", "author": {"login": "Reidddddd"}, "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/FSHLog.java", "diffHunk": "@@ -105,6 +105,16 @@\n   // We use ring buffer sequence as txid of FSWALEntry and SyncFuture.\n   private static final Logger LOG = LoggerFactory.getLogger(FSHLog.class);\n \n+  private static final String TOLERABLE_LOW_REPLICATION = \"hbase.regionserver.hlog.tolerable.lowreplication\";\n+  private static final String LOW_REPLICATION_ROLL_LIMIT = \"hbase.regionserver.hlog.lowreplication.rolllimit\";\n+  private static final int DEFAULT_LOW_REPLICATION_ROLL_LIMIT = 5;\n+  private static final String ROLL_ERRORS_TOLERATED = \"hbase.regionserver.logroll.errors.tolerated\";\n+  private static final int DEFAULT_ROLL_ERRORS_TOLERATED = 2;\n+  private static final String SYNCER_COUNT = \"hbase.regionserver.hlog.syncer.count\";\n+  private static final int DEFAULT_SYNCER_COUNT = 5;\n+  private static final String MAX_BATCH_COUNT = \"hbase.regionserver.hlog.max.batch.count\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc0MzQ5NQ=="}, "originalCommit": {"oid": "9fc46959eeb3a117babe636d425eb28625b9a448"}, "originalPosition": 11}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2837, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}