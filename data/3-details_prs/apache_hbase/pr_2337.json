{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc2NzYyNzgz", "number": 2337, "title": "HBASE-24973 Remove read point parameter in method StoreFlush#performFlush and StoreFlush#createScanner", "bodyText": "", "createdAt": "2020-09-01T02:20:21Z", "url": "https://github.com/apache/hbase/pull/2337", "merged": true, "mergeCommit": {"oid": "4dc08144f364bb899430d381a7717cebde17f647"}, "closed": true, "closedAt": "2020-09-02T09:43:27Z", "author": {"login": "yuqi1129"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdEdyJOgH2gAyNDc2NzYyNzgzOmJjZWYxOTA2MzYzNzBiZDgyZGQ3NDE1ZTcwM2M3Yjg2ZWJiY2Y1MzA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdEovTQAFqTQ3OTgzNjYxNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "bcef190636370bd82dd7415e703c7b86ebbcf530", "author": {"user": {"login": "yuqi1129", "name": "Qi Yu"}}, "url": "https://github.com/apache/hbase/commit/bcef190636370bd82dd7415e703c7b86ebbcf530", "committedDate": "2020-09-01T02:14:57Z", "message": "HBASE-24973 Remove read point parameter in StoreFlush#performFlush"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc5NjUwMTkx", "url": "https://github.com/apache/hbase/pull/2337#pullrequestreview-479650191", "createdAt": "2020-09-01T11:31:45Z", "commit": {"oid": "bcef190636370bd82dd7415e703c7b86ebbcf530"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxMTozMTo0NVrOHKyI3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxMTozMTo0NVrOHKyI3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTA2OTI3Ng==", "bodyText": "Any reason for doing this?", "url": "https://github.com/apache/hbase/pull/2337#discussion_r481069276", "createdAt": "2020-09-01T11:31:45Z", "author": {"login": "virajjasani"}, "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreFlusher.java", "diffHunk": "@@ -73,20 +73,20 @@ protected void finalizeWriter(StoreFileWriter writer, long cacheFlushSeqNum,\n   /**\n    * Creates the scanner for flushing snapshot. Also calls coprocessors.\n    * @param snapshotScanners\n-   * @param smallestReadPoint\n    * @return The scanner; null if coprocessor is canceling the flush.\n    */\n   protected final InternalScanner createScanner(List<KeyValueScanner> snapshotScanners,\n-      long smallestReadPoint, FlushLifeCycleTracker tracker) throws IOException {\n+    FlushLifeCycleTracker tracker) throws IOException {\n     ScanInfo scanInfo;\n     if (store.getCoprocessorHost() != null) {\n       scanInfo = store.getCoprocessorHost().preFlushScannerOpen(store, tracker);\n     } else {\n       scanInfo = store.getScanInfo();\n     }\n+    final long smallestReadPoint = store.getSmallestReadPoint();\n     InternalScanner scanner = new StoreScanner(store, scanInfo, snapshotScanners,\n         ScanType.COMPACT_RETAIN_DELETES, smallestReadPoint, HConstants.OLDEST_TIMESTAMP);\n-    assert scanner != null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bcef190636370bd82dd7415e703c7b86ebbcf530"}, "originalPosition": 19}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc5NzU0MjU5", "url": "https://github.com/apache/hbase/pull/2337#pullrequestreview-479754259", "createdAt": "2020-09-01T13:43:24Z", "commit": {"oid": "bcef190636370bd82dd7415e703c7b86ebbcf530"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxMzo0MzoyNVrOHK26pA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxMzo0MzoyNVrOHK26pA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTE0NzU1Ng==", "bodyText": "This remove the smallestReadPoint parameter from createScanner method, too? Change the issue title to talk about this?", "url": "https://github.com/apache/hbase/pull/2337#discussion_r481147556", "createdAt": "2020-09-01T13:43:25Z", "author": {"login": "infraio"}, "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreFlusher.java", "diffHunk": "@@ -73,20 +73,20 @@ protected void finalizeWriter(StoreFileWriter writer, long cacheFlushSeqNum,\n   /**\n    * Creates the scanner for flushing snapshot. Also calls coprocessors.\n    * @param snapshotScanners\n-   * @param smallestReadPoint\n    * @return The scanner; null if coprocessor is canceling the flush.\n    */\n   protected final InternalScanner createScanner(List<KeyValueScanner> snapshotScanners,\n-      long smallestReadPoint, FlushLifeCycleTracker tracker) throws IOException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bcef190636370bd82dd7415e703c7b86ebbcf530"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc5ODM2NjE1", "url": "https://github.com/apache/hbase/pull/2337#pullrequestreview-479836615", "createdAt": "2020-09-01T15:00:48Z", "commit": {"oid": "bcef190636370bd82dd7415e703c7b86ebbcf530"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4726, "cost": 1, "resetAt": "2021-10-28T16:48:13Z"}}}