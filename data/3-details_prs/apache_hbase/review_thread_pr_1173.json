{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc1NzM4ODYx", "number": 1173, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQxODo1MzoxNVrODicEpw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQxOTowMDoxOVrODicNow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM3NDM4MTE5OnYy", "diffSide": "RIGHT", "path": "hbase-client/src/main/java/org/apache/hadoop/hbase/client/AsyncConnectionImpl.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQxODo1MzoxNVrOFtr4vg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQxODo1MzoxNVrOFtr4vg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzQ0OTI3OA==", "bodyText": "Why WARN and not DEBUG?", "url": "https://github.com/apache/hbase/pull/1173#discussion_r383449278", "createdAt": "2020-02-24T18:53:15Z", "author": {"login": "ndimiduk"}, "path": "hbase-client/src/main/java/org/apache/hadoop/hbase/client/AsyncConnectionImpl.java", "diffHunk": "@@ -165,8 +165,7 @@ public void newDead(ServerName sn) {\n               }\n             }, conf, listenerClass);\n         } catch (IOException e) {\n-          LOG.warn(\"Failed to create ClusterStatusListener, not a critical problem, ignoring...\",\n-            e);\n+          LOG.warn(\"Failed create of ClusterStatusListener, not a critical, ignoring...\", e);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cf63f4d3213fe28cf1b8e6e0a4bfaa5d9e9426d7"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM3NDM4Mjg3OnYy", "diffSide": "RIGHT", "path": "hbase-client/src/main/java/org/apache/hadoop/hbase/client/AsyncConnectionImpl.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQxODo1Mzo0NlrOFtr50Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQxODo1Mzo0NlrOFtr50Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzQ0OTU1Mw==", "bodyText": "nit s/not a critical,/not critical,/", "url": "https://github.com/apache/hbase/pull/1173#discussion_r383449553", "createdAt": "2020-02-24T18:53:46Z", "author": {"login": "ndimiduk"}, "path": "hbase-client/src/main/java/org/apache/hadoop/hbase/client/AsyncConnectionImpl.java", "diffHunk": "@@ -165,8 +165,7 @@ public void newDead(ServerName sn) {\n               }\n             }, conf, listenerClass);\n         } catch (IOException e) {\n-          LOG.warn(\"Failed to create ClusterStatusListener, not a critical problem, ignoring...\",\n-            e);\n+          LOG.warn(\"Failed create of ClusterStatusListener, not a critical, ignoring...\", e);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cf63f4d3213fe28cf1b8e6e0a4bfaa5d9e9426d7"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM3NDM5MTAxOnYy", "diffSide": "RIGHT", "path": "hbase-common/src/main/java/org/apache/hadoop/hbase/ScheduledChore.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQxODo1NjoxOVrOFtr-5w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQxODo1NjoxOVrOFtr-5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzQ1MDg1NQ==", "bodyText": "If you're going to tweak toString() methods, you mind converting over use Commons's ToStringBuilder with the ShortPrefixToStringStyle ?", "url": "https://github.com/apache/hbase/pull/1173#discussion_r383450855", "createdAt": "2020-02-24T18:56:19Z", "author": {"login": "ndimiduk"}, "path": "hbase-common/src/main/java/org/apache/hadoop/hbase/ScheduledChore.java", "diffHunk": "@@ -373,7 +373,7 @@ protected synchronized void cleanup() {\n   @InterfaceAudience.Private\n   @Override\n   public String toString() {\n-    return \"[ScheduledChore: Name: \" + getName() + \" Period: \" + getPeriod() + \" Unit: \"\n-        + getTimeUnit() + \"]\";\n+    return \"ScheduledChore name=\" + getName() + \", period=\" + getPeriod() +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cf63f4d3213fe28cf1b8e6e0a4bfaa5d9e9426d7"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM3NDM5NDI5OnYy", "diffSide": "RIGHT", "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/master/ClusterStatusPublisher.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQxODo1NzoyNlrOFtsBIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQxODo1NzoyNlrOFtsBIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzQ1MTQyNg==", "bodyText": "Likewise with the ToStringBuilder.", "url": "https://github.com/apache/hbase/pull/1173#discussion_r383451426", "createdAt": "2020-02-24T18:57:26Z", "author": {"login": "ndimiduk"}, "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/master/ClusterStatusPublisher.java", "diffHunk": "@@ -126,6 +127,11 @@ public ClusterStatusPublisher(HMaster master, Configuration conf,\n     connected = true;\n   }\n \n+  @Override\n+  public String toString() {\n+    return super.toString() + \", publisher=\" + this.publisher + \", connected=\" + this.connected;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cf63f4d3213fe28cf1b8e6e0a4bfaa5d9e9426d7"}, "originalPosition": 53}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM3NDQwNDE5OnYy", "diffSide": "RIGHT", "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/master/ClusterStatusPublisher.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQxOTowMDoxOVrOFtsHXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQxOTowMDoxOVrOFtsHXg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzQ1MzAyMg==", "bodyText": "What is the expected class/thread that needs this configuration change downstream from here? This seems like it introduces a timing race between this chore thread and the presumed viewer, which may or may not start after this code is hit.\nIs there a better approach to take? This strikes me as fishing for side-effects with global mutable state.", "url": "https://github.com/apache/hbase/pull/1173#discussion_r383453022", "createdAt": "2020-02-24T19:00:19Z", "author": {"login": "ndimiduk"}, "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/master/ClusterStatusPublisher.java", "diffHunk": "@@ -285,27 +295,33 @@ public void connect(Configuration conf) throws IOException {\n         }\n         ni = NetworkInterface.getByInetAddress(localAddress);\n       }\n-\n       Bootstrap b = new Bootstrap();\n       b.group(group)\n         .channelFactory(new HBaseDatagramChannelFactory<Channel>(NioDatagramChannel.class, family))\n         .option(ChannelOption.SO_REUSEADDR, true)\n         .handler(new ClusterMetricsEncoder(isa));\n-\n       try {\n+        LOG.debug(\"Channel bindAddress={}, networkInterface={}, INA={}\", bindAddress, ni, ina);\n         channel = (DatagramChannel) b.bind(bindAddress, 0).sync().channel();\n         channel.joinGroup(ina, ni, null, channel.newPromise()).sync();\n         channel.connect(isa).sync();\n+        // Set into configuration in case many networks available. Do this for tests so that\n+        // server and client use same Interface (presuming share same Configuration).\n+        // TestAsyncTableRSCrashPublish was failing when connected to VPN because extra networks\n+        // available with Master binding on one Interface and client on another so test failed.\n+        if (ni != null) {\n+          conf.set(HConstants.STATUS_MULTICAST_NI_NAME, ni.getName());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cf63f4d3213fe28cf1b8e6e0a4bfaa5d9e9426d7"}, "originalPosition": 100}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2077, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}