{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAyMTAyMzY0", "number": 2537, "title": "HBASE-24977 Meta table shouldn't be modified as read only", "bodyText": "Added a sanity check for meta table before modifying the table schema", "createdAt": "2020-10-13T08:37:30Z", "url": "https://github.com/apache/hbase/pull/2537", "merged": true, "mergeCommit": {"oid": "e3beccf1fcd3dcb1384afd7a98fd2ada0e4e2bc0"}, "closed": true, "closedAt": "2020-10-29T23:34:24Z", "author": {"login": "pankaj72981"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdSVUUGAFqTUwNzk4MjY2NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdSVk6mABqjM4NzQ2NDIxNDY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3OTgyNjY0", "url": "https://github.com/apache/hbase/pull/2537#pullrequestreview-507982664", "createdAt": "2020-10-14T04:16:38Z", "commit": {"oid": "b89dd07b6c60503ab7d2151cce056694687772b0"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQwNDoxNjozOFrOHhBmOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQwNDoxNjozOFrOHhBmOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDM5MTIyNw==", "bodyText": "Super nit/NOT IMPORTANT/NEXT TIME: just pass in the message rather than save to local variable.", "url": "https://github.com/apache/hbase/pull/2537#discussion_r504391227", "createdAt": "2020-10-14T04:16:38Z", "author": {"login": "saintstack"}, "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/util/TableDescriptorChecker.java", "diffHunk": "@@ -150,6 +151,12 @@ public static void sanityCheck(final Configuration c, final TableDescriptor td)\n       warnOrThrowExceptionForFailure(logWarn, message, null);\n     }\n \n+    // Meta table shouldn't be set as read only, otherwise it will impact region assignments\n+    if (td.isReadOnly() && TableName.isMetaTableName(td.getTableName())) {\n+      String message = \"Meta table can't be set as read only.\";\n+      warnOrThrowExceptionForFailure(false, message, null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b89dd07b6c60503ab7d2151cce056694687772b0"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6c22cba320eddc38337503b9ad136e02fb512be9", "author": {"user": {"login": "pankaj72981", "name": "Pankaj"}}, "url": "https://github.com/apache/hbase/commit/6c22cba320eddc38337503b9ad136e02fb512be9", "committedDate": "2020-10-14T04:32:01Z", "message": "HBASE-24977 Meta table shouldn't be modified as read only"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0d695e9e0418bcea76c157d6718b1d2022a47f0e", "author": {"user": {"login": "pankaj72981", "name": "Pankaj"}}, "url": "https://github.com/apache/hbase/commit/0d695e9e0418bcea76c157d6718b1d2022a47f0e", "committedDate": "2020-10-14T04:34:57Z", "message": "HBASE-24977 Meta table shouldn't be modified as read only"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b89dd07b6c60503ab7d2151cce056694687772b0", "author": {"user": {"login": "pankaj72981", "name": "Pankaj"}}, "url": "https://github.com/apache/hbase/commit/b89dd07b6c60503ab7d2151cce056694687772b0", "committedDate": "2020-10-13T08:35:18Z", "message": "HBASE-24977 Meta table shouldn't be modified as read only"}, "afterCommit": {"oid": "0d695e9e0418bcea76c157d6718b1d2022a47f0e", "author": {"user": {"login": "pankaj72981", "name": "Pankaj"}}, "url": "https://github.com/apache/hbase/commit/0d695e9e0418bcea76c157d6718b1d2022a47f0e", "committedDate": "2020-10-14T04:34:57Z", "message": "HBASE-24977 Meta table shouldn't be modified as read only"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4353, "cost": 1, "resetAt": "2021-10-28T16:48:13Z"}}}