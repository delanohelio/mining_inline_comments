{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEyNDIyNzc1", "number": 1627, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMlQxNzoxMToyMlrOD4rR5A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMlQxOToyODozOVrOD4sA2A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYwNzU1OTQwOnYy", "diffSide": "RIGHT", "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/tool/LoadIncrementalHFiles.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMlQxNzoxMToyMlrOGPkshQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QwNjo1NjowMFrOGPpS5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODk4MzA0NQ==", "bodyText": "nit: why not make BulkLoadHFiles.BULK_LOAD_HFILES_BY_FAMILY public, then remove this variable here?", "url": "https://github.com/apache/hbase/pull/1627#discussion_r418983045", "createdAt": "2020-05-02T17:11:22Z", "author": {"login": "wchevreuil"}, "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/tool/LoadIncrementalHFiles.java", "diffHunk": "@@ -141,13 +141,15 @@\n   public final static String IGNORE_UNMATCHED_CF_CONF_KEY =\n     BulkLoadHFiles.IGNORE_UNMATCHED_CF_CONF_KEY;\n   public final static String ALWAYS_COPY_FILES = BulkLoadHFiles.ALWAYS_COPY_FILES;\n+  public final static String BULK_LOAD_HFILES_BY_FAMILY = BulkLoadHFiles.BULK_LOAD_HFILES_BY_FAMILY;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1f2a0c55ee9fb09e0e771653db8daa622d7ddaec"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTA1ODQwNQ==", "bodyText": "yes,I amend it", "url": "https://github.com/apache/hbase/pull/1627#discussion_r419058405", "createdAt": "2020-05-03T06:56:00Z", "author": {"login": "nyl3532016"}, "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/tool/LoadIncrementalHFiles.java", "diffHunk": "@@ -141,13 +141,15 @@\n   public final static String IGNORE_UNMATCHED_CF_CONF_KEY =\n     BulkLoadHFiles.IGNORE_UNMATCHED_CF_CONF_KEY;\n   public final static String ALWAYS_COPY_FILES = BulkLoadHFiles.ALWAYS_COPY_FILES;\n+  public final static String BULK_LOAD_HFILES_BY_FAMILY = BulkLoadHFiles.BULK_LOAD_HFILES_BY_FAMILY;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODk4MzA0NQ=="}, "originalCommit": {"oid": "1f2a0c55ee9fb09e0e771653db8daa622d7ddaec"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYwNzU2Nzc3OnYy", "diffSide": "RIGHT", "path": "hbase-server/src/test/java/org/apache/hadoop/hbase/tool/TestLoadIncrementalHFiles.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMlQxNzoyMDowM1rOGPkwYw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMlQxNzoyMDowM1rOGPkwYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODk4NDAzNQ==", "bodyText": "Is this really needed? Isn't BULK_LOAD_HFILES_BY_FAMILY loaded as false by default if not set on LoadIncrementalHFiles#195? Or perhaps you can move this for a separate method that could be overridden by  TestLoadIncrementalHFilesByFamily to avoid duplicating whole setUpBeforeClass in the child class?", "url": "https://github.com/apache/hbase/pull/1627#discussion_r418984035", "createdAt": "2020-05-02T17:20:03Z", "author": {"login": "wchevreuil"}, "path": "hbase-server/src/test/java/org/apache/hadoop/hbase/tool/TestLoadIncrementalHFiles.java", "diffHunk": "@@ -101,6 +101,7 @@ public static void setUpBeforeClass() throws Exception {\n     // change default behavior so that tag values are returned with normal rpcs\n     util.getConfiguration().set(HConstants.RPC_CODEC_CONF_KEY,\n       KeyValueCodecWithTags.class.getCanonicalName());\n+    util.getConfiguration().setBoolean(BulkLoadHFiles.BULK_LOAD_HFILES_BY_FAMILY, false);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1f2a0c55ee9fb09e0e771653db8daa622d7ddaec"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYwNzY3OTYwOnYy", "diffSide": "RIGHT", "path": "hbase-server/src/test/java/org/apache/hadoop/hbase/tool/TestLoadIncrementalHFilesByFamily.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMlQxOToyODozOVrOGPlmdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QwNzowMDowMlrOGPpUhw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODk5Nzg3OA==", "bodyText": "Does this test class actually make sense, without testing the specific new logic added? I mean, even without the group by family feature this test class will pass, so it's not shielding us from inadvertently changes on the new feature.", "url": "https://github.com/apache/hbase/pull/1627#discussion_r418997878", "createdAt": "2020-05-02T19:28:39Z", "author": {"login": "wchevreuil"}, "path": "hbase-server/src/test/java/org/apache/hadoop/hbase/tool/TestLoadIncrementalHFilesByFamily.java", "diffHunk": "@@ -0,0 +1,42 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one or more contributor license\n+ * agreements. See the NOTICE file distributed with this work for additional information regarding\n+ * copyright ownership. The ASF licenses this file to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance with the License. You may obtain a\n+ * copy of the License at\n+ * <p>\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ * <p>\n+ * Unless required by applicable law or agreed to in writing, software distributed under the License\n+ * is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express\n+ * or implied. See the License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+package org.apache.hadoop.hbase.tool;\n+\n+import org.apache.hadoop.hbase.HBaseClassTestRule;\n+import org.apache.hadoop.hbase.HConstants;\n+import org.apache.hadoop.hbase.codec.KeyValueCodecWithTags;\n+import org.apache.hadoop.hbase.coprocessor.CoprocessorHost;\n+import org.junit.BeforeClass;\n+import org.junit.ClassRule;\n+\n+public class TestLoadIncrementalHFilesByFamily extends TestLoadIncrementalHFiles {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1f2a0c55ee9fb09e0e771653db8daa622d7ddaec"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTA1ODgyMw==", "bodyText": "yes, I delete this test , and add testBulkLoadByFamily ut .\nbulkloadbyFamily only change client side , this config has no affect with server side . no need start another minicluster use different conf for test", "url": "https://github.com/apache/hbase/pull/1627#discussion_r419058823", "createdAt": "2020-05-03T07:00:02Z", "author": {"login": "nyl3532016"}, "path": "hbase-server/src/test/java/org/apache/hadoop/hbase/tool/TestLoadIncrementalHFilesByFamily.java", "diffHunk": "@@ -0,0 +1,42 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one or more contributor license\n+ * agreements. See the NOTICE file distributed with this work for additional information regarding\n+ * copyright ownership. The ASF licenses this file to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance with the License. You may obtain a\n+ * copy of the License at\n+ * <p>\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ * <p>\n+ * Unless required by applicable law or agreed to in writing, software distributed under the License\n+ * is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express\n+ * or implied. See the License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+package org.apache.hadoop.hbase.tool;\n+\n+import org.apache.hadoop.hbase.HBaseClassTestRule;\n+import org.apache.hadoop.hbase.HConstants;\n+import org.apache.hadoop.hbase.codec.KeyValueCodecWithTags;\n+import org.apache.hadoop.hbase.coprocessor.CoprocessorHost;\n+import org.junit.BeforeClass;\n+import org.junit.ClassRule;\n+\n+public class TestLoadIncrementalHFilesByFamily extends TestLoadIncrementalHFiles {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODk5Nzg3OA=="}, "originalCommit": {"oid": "1f2a0c55ee9fb09e0e771653db8daa622d7ddaec"}, "originalPosition": 24}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1723, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}