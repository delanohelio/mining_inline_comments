{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA4MjMzNjA0", "number": 1572, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QyMzoyODoxN1rOD1hR_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxMjoxNzo0OVrOD49kPw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3NDQ2Mzk3OnYy", "diffSide": "RIGHT", "path": "hbase-server/src/main/resources/hbase-webapps/master/hbck.jsp", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QyMzoyODoxN1rOGLAKcg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQwMTowOToxNVrOGLCPHw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE5MDE5NA==", "bodyText": "tooltip \ud83d\udd7a I also started using tooltip in #1485", "url": "https://github.com/apache/hbase/pull/1572#discussion_r414190194", "createdAt": "2020-04-23T23:28:17Z", "author": {"login": "liuml07"}, "path": "hbase-server/src/main/resources/hbase-webapps/master/hbck.jsp", "diffHunk": "@@ -223,8 +224,8 @@\n             </tr>\n             <% for (Pair<RegionInfo, RegionInfo> p : report.getHoles()) { %>\n             <tr>\n-              <td><%= p.getFirst() %></td>\n-              <td><%= p.getSecond() %></td>\n+              <td><span title=\"<%= p.getFirst() %>\"><%= p.getFirst().getEncodedName() %></span></td>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a3bc430280cef2d4054647c3ed30776b281b9731"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE5OTAzNQ==", "bodyText": "I took a look but didn't see it. Mind pointing me to it so I do same as you?", "url": "https://github.com/apache/hbase/pull/1572#discussion_r414199035", "createdAt": "2020-04-23T23:51:26Z", "author": {"login": "saintstack"}, "path": "hbase-server/src/main/resources/hbase-webapps/master/hbck.jsp", "diffHunk": "@@ -223,8 +224,8 @@\n             </tr>\n             <% for (Pair<RegionInfo, RegionInfo> p : report.getHoles()) { %>\n             <tr>\n-              <td><%= p.getFirst() %></td>\n-              <td><%= p.getSecond() %></td>\n+              <td><span title=\"<%= p.getFirst() %>\"><%= p.getFirst().getEncodedName() %></span></td>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE5MDE5NA=="}, "originalCommit": {"oid": "a3bc430280cef2d4054647c3ed30776b281b9731"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDIxODAyMg==", "bodyText": "Oh, I mean this \"title=\" in a <span/> serves as simple tooltip. You are doing this already here and I'm glad we use this as additional information. I also though of doing this similarly.", "url": "https://github.com/apache/hbase/pull/1572#discussion_r414218022", "createdAt": "2020-04-24T00:47:18Z", "author": {"login": "liuml07"}, "path": "hbase-server/src/main/resources/hbase-webapps/master/hbck.jsp", "diffHunk": "@@ -223,8 +224,8 @@\n             </tr>\n             <% for (Pair<RegionInfo, RegionInfo> p : report.getHoles()) { %>\n             <tr>\n-              <td><%= p.getFirst() %></td>\n-              <td><%= p.getSecond() %></td>\n+              <td><span title=\"<%= p.getFirst() %>\"><%= p.getFirst().getEncodedName() %></span></td>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE5MDE5NA=="}, "originalCommit": {"oid": "a3bc430280cef2d4054647c3ed30776b281b9731"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDIyNDE1OQ==", "bodyText": "Thanks for clarification (thought you were doing some bootstrap fancy tooltip thingy).", "url": "https://github.com/apache/hbase/pull/1572#discussion_r414224159", "createdAt": "2020-04-24T01:09:15Z", "author": {"login": "saintstack"}, "path": "hbase-server/src/main/resources/hbase-webapps/master/hbck.jsp", "diffHunk": "@@ -223,8 +224,8 @@\n             </tr>\n             <% for (Pair<RegionInfo, RegionInfo> p : report.getHoles()) { %>\n             <tr>\n-              <td><%= p.getFirst() %></td>\n-              <td><%= p.getSecond() %></td>\n+              <td><span title=\"<%= p.getFirst() %>\"><%= p.getFirst().getEncodedName() %></span></td>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE5MDE5NA=="}, "originalCommit": {"oid": "a3bc430280cef2d4054647c3ed30776b281b9731"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3NDQ2NzI2OnYy", "diffSide": "RIGHT", "path": "hbase-client/src/main/java/org/apache/hadoop/hbase/client/RegionInfo.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QyMzoyOTozM1rOGLAMXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QyMzo1NToyNlrOGLAyhQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE5MDY4NQ==", "bodyText": "If you like, ri -> ri.getShortNameToLog() can be replaced with method reference RegionInfo::getShortNameToLog. Same other places. Good to have class type before method so I personally prefer that.", "url": "https://github.com/apache/hbase/pull/1572#discussion_r414190685", "createdAt": "2020-04-23T23:29:33Z", "author": {"login": "liuml07"}, "path": "hbase-client/src/main/java/org/apache/hadoop/hbase/client/RegionInfo.java", "diffHunk": "@@ -304,12 +304,11 @@ static String getShortNameToLog(RegionInfo...hris) {\n   }\n \n   /**\n-   * @return Return a String of short, printable names for <code>hris</code>\n-   * (usually encoded name) for us logging.\n+   * @return Return a String of short, printable names for <code>hris</code> (usually encoded name)\n+   *   for us logging.\n    */\n   static String getShortNameToLog(final List<RegionInfo> ris) {\n-    return ris.stream().map(ri -> ri.getShortNameToLog()).\n-    collect(Collectors.toList()).toString();\n+    return ris.stream().map(ri -> ri.getShortNameToLog()).collect(Collectors.toList()).toString();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a3bc430280cef2d4054647c3ed30776b281b9731"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDIwMDQ1Mw==", "bodyText": "Yes. Thats better. Let me fix.", "url": "https://github.com/apache/hbase/pull/1572#discussion_r414200453", "createdAt": "2020-04-23T23:55:26Z", "author": {"login": "saintstack"}, "path": "hbase-client/src/main/java/org/apache/hadoop/hbase/client/RegionInfo.java", "diffHunk": "@@ -304,12 +304,11 @@ static String getShortNameToLog(RegionInfo...hris) {\n   }\n \n   /**\n-   * @return Return a String of short, printable names for <code>hris</code>\n-   * (usually encoded name) for us logging.\n+   * @return Return a String of short, printable names for <code>hris</code> (usually encoded name)\n+   *   for us logging.\n    */\n   static String getShortNameToLog(final List<RegionInfo> ris) {\n-    return ris.stream().map(ri -> ri.getShortNameToLog()).\n-    collect(Collectors.toList()).toString();\n+    return ris.stream().map(ri -> ri.getShortNameToLog()).collect(Collectors.toList()).toString();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE5MDY4NQ=="}, "originalCommit": {"oid": "a3bc430280cef2d4054647c3ed30776b281b9731"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3NDQ2ODk5OnYy", "diffSide": "RIGHT", "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/master/MetaFixer.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QyMzozMDoyNFrOGLANaw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QyMzo1ODoxM1rOGLA2pw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE5MDk1NQ==", "bodyText": "Is currentMergeSet.size() also worth in the log message?", "url": "https://github.com/apache/hbase/pull/1572#discussion_r414190955", "createdAt": "2020-04-23T23:30:24Z", "author": {"login": "liuml07"}, "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/master/MetaFixer.java", "diffHunk": "@@ -247,6 +247,10 @@ void fixOverlaps(CatalogJanitor.Report report) throws IOException {\n       if (regionInfoWithlargestEndKey != null) {\n         if (!isOverlap(regionInfoWithlargestEndKey, pair) ||\n             currentMergeSet.size() >= maxMergeCount) {\n+          // Log when we cut-off-merge because we hit the configured maximum merge limit.\n+          if (currentMergeSet.size() >= maxMergeCount) {\n+            LOG.warn(\"Ran into maximum-at-a-time merges limit={}\", maxMergeCount);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a3bc430280cef2d4054647c3ed30776b281b9731"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDIwMTUxMQ==", "bodyText": "Not here.", "url": "https://github.com/apache/hbase/pull/1572#discussion_r414201511", "createdAt": "2020-04-23T23:58:13Z", "author": {"login": "saintstack"}, "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/master/MetaFixer.java", "diffHunk": "@@ -247,6 +247,10 @@ void fixOverlaps(CatalogJanitor.Report report) throws IOException {\n       if (regionInfoWithlargestEndKey != null) {\n         if (!isOverlap(regionInfoWithlargestEndKey, pair) ||\n             currentMergeSet.size() >= maxMergeCount) {\n+          // Log when we cut-off-merge because we hit the configured maximum merge limit.\n+          if (currentMergeSet.size() >= maxMergeCount) {\n+            LOG.warn(\"Ran into maximum-at-a-time merges limit={}\", maxMergeCount);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE5MDk1NQ=="}, "originalCommit": {"oid": "a3bc430280cef2d4054647c3ed30776b281b9731"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3NDQ3MDcxOnYy", "diffSide": "RIGHT", "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/master/assignment/MergeTableRegionsProcedure.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QyMzozMDo1OVrOGLAOVQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QyMzozMDo1OVrOGLAOVQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE5MTE4OQ==", "bodyText": "Not sure if you like String.format.", "url": "https://github.com/apache/hbase/pull/1572#discussion_r414191189", "createdAt": "2020-04-23T23:30:59Z", "author": {"login": "liuml07"}, "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/master/assignment/MergeTableRegionsProcedure.java", "diffHunk": "@@ -134,8 +132,8 @@ private static void checkRegionsToMerge(MasterProcedureEnv env, final RegionInfo\n           throw new MergeRegionException(msg);\n         }\n         if (!force && !ri.isAdjacent(previous) && !ri.isOverlap(previous)) {\n-          String msg = \"Unable to merge non-adjacent or non-overlapping regions \" +\n-              previous.getShortNameToLog() + \", \" + ri.getShortNameToLog() + \" when force=false\";\n+          String msg = \"Unable to merge non-adjacent or non-overlapping regions '\" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a3bc430280cef2d4054647c3ed30776b281b9731"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxMDU1NTUxOnYy", "diffSide": "RIGHT", "path": "hbase-server/src/main/resources/hbase-webapps/master/hbck.jsp", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxMjoxNzo0OVrOGP9uew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxMjoxNzo0OVrOGP9uew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTM5MzE0Nw==", "bodyText": "nit: no holes?", "url": "https://github.com/apache/hbase/pull/1572#discussion_r419393147", "createdAt": "2020-05-04T12:17:49Z", "author": {"login": "petersomogyi"}, "path": "hbase-server/src/main/resources/hbase-webapps/master/hbck.jsp", "diffHunk": "@@ -166,7 +166,8 @@\n       <p>\n         <span>\n           The below are Regions we've lost account of. To be safe, run bulk load of any data found in these Region orphan directories back into the HBase cluster.\n-          First make sure <em>hbase:meta</em> is in a healthy state; run <em>hbck2 fixMeta</em> to be sure. Once this is done, per Region below, run a bulk\n+          First make sure <em>hbase:meta</em> is in a healthy state, that there are not holes, overlaps or inconsistencies (else bulk load may complain);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a5924a540808642125db5ab9c37472c15738ac0"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1820, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}