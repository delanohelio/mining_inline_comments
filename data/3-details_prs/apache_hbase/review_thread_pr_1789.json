{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIzNzk3Mzk2", "number": 1789, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwNDoxMzoxNlrOEAWm9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwNDoxNToxNFrOEAWoFQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4ODA1ODc4OnYy", "diffSide": "RIGHT", "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/rsgroup/RSGroupBasedLoadBalancer.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwNDoxMzoxNlrOGblBXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwNzozMTozN1rOGbo_wg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTU3MTI5NA==", "bodyText": "groups? Allow fallback to more than one group?", "url": "https://github.com/apache/hbase/pull/1789#discussion_r431571294", "createdAt": "2020-05-28T04:13:16Z", "author": {"login": "infraio"}, "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/rsgroup/RSGroupBasedLoadBalancer.java", "diffHunk": "@@ -77,6 +81,23 @@\n   private volatile RSGroupInfoManager rsGroupInfoManager;\n   private LoadBalancer internalBalancer;\n \n+  /** Define the config key of if fallback group is enabled */\n+  public static final String FALLBACK_GROUP_ENABLED_KEY = \"hbase.rsgroup.fallback.groups.enable\";\n+  public static final boolean FALLBACK_GROUP_ENABLED_DEFAULT = false;\n+\n+  /** Define the config key of fallback groups */\n+  public static final String FALLBACK_GROUPS_KEY = \"hbase.rsgroup.fallback.groups\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74613b1c25cf96069b6f20510a62ba8e66e6641d"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTYzNjQxOA==", "bodyText": "Yes, we can config multiple comma-separated group.", "url": "https://github.com/apache/hbase/pull/1789#discussion_r431636418", "createdAt": "2020-05-28T07:31:37Z", "author": {"login": "ddupg"}, "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/rsgroup/RSGroupBasedLoadBalancer.java", "diffHunk": "@@ -77,6 +81,23 @@\n   private volatile RSGroupInfoManager rsGroupInfoManager;\n   private LoadBalancer internalBalancer;\n \n+  /** Define the config key of if fallback group is enabled */\n+  public static final String FALLBACK_GROUP_ENABLED_KEY = \"hbase.rsgroup.fallback.groups.enable\";\n+  public static final boolean FALLBACK_GROUP_ENABLED_DEFAULT = false;\n+\n+  /** Define the config key of fallback groups */\n+  public static final String FALLBACK_GROUPS_KEY = \"hbase.rsgroup.fallback.groups\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTU3MTI5NA=="}, "originalCommit": {"oid": "74613b1c25cf96069b6f20510a62ba8e66e6641d"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4ODA1OTg3OnYy", "diffSide": "RIGHT", "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/rsgroup/RSGroupBasedLoadBalancer.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwNDoxNDowNVrOGblCGA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwNzozNDoyMFrOGbpE7w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTU3MTQ4MA==", "bodyText": "This config doesn't need be introduced? Enable this when config FALLBACK_GROUPS_KEY.", "url": "https://github.com/apache/hbase/pull/1789#discussion_r431571480", "createdAt": "2020-05-28T04:14:05Z", "author": {"login": "infraio"}, "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/rsgroup/RSGroupBasedLoadBalancer.java", "diffHunk": "@@ -77,6 +81,23 @@\n   private volatile RSGroupInfoManager rsGroupInfoManager;\n   private LoadBalancer internalBalancer;\n \n+  /** Define the config key of if fallback group is enabled */\n+  public static final String FALLBACK_GROUP_ENABLED_KEY = \"hbase.rsgroup.fallback.groups.enable\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74613b1c25cf96069b6f20510a62ba8e66e6641d"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTYzNzc0Mw==", "bodyText": "OK, I keep only FALLBACK_GROUPS_KEY and remove FALLBACK_GROUP_ENABLED_KEY.", "url": "https://github.com/apache/hbase/pull/1789#discussion_r431637743", "createdAt": "2020-05-28T07:34:20Z", "author": {"login": "ddupg"}, "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/rsgroup/RSGroupBasedLoadBalancer.java", "diffHunk": "@@ -77,6 +81,23 @@\n   private volatile RSGroupInfoManager rsGroupInfoManager;\n   private LoadBalancer internalBalancer;\n \n+  /** Define the config key of if fallback group is enabled */\n+  public static final String FALLBACK_GROUP_ENABLED_KEY = \"hbase.rsgroup.fallback.groups.enable\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTU3MTQ4MA=="}, "originalCommit": {"oid": "74613b1c25cf96069b6f20510a62ba8e66e6641d"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4ODA2MTY1OnYy", "diffSide": "RIGHT", "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/rsgroup/RSGroupBasedLoadBalancer.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwNDoxNToxNFrOGblDJg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwNzozOTo1OFrOGbpQKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTU3MTc1MA==", "bodyText": "Do we need this chore? This should be work of RSGroupBalancer?", "url": "https://github.com/apache/hbase/pull/1789#discussion_r431571750", "createdAt": "2020-05-28T04:15:14Z", "author": {"login": "infraio"}, "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/rsgroup/RSGroupBasedLoadBalancer.java", "diffHunk": "@@ -77,6 +81,23 @@\n   private volatile RSGroupInfoManager rsGroupInfoManager;\n   private LoadBalancer internalBalancer;\n \n+  /** Define the config key of if fallback group is enabled */\n+  public static final String FALLBACK_GROUP_ENABLED_KEY = \"hbase.rsgroup.fallback.groups.enable\";\n+  public static final boolean FALLBACK_GROUP_ENABLED_DEFAULT = false;\n+\n+  /** Define the config key of fallback groups */\n+  public static final String FALLBACK_GROUPS_KEY = \"hbase.rsgroup.fallback.groups\";\n+  public static final String FALLBACK_GROUPS_DEFAULT = RSGroupInfo.DEFAULT_GROUP;\n+\n+  /** Define the config key of interval to correct fallback regions */\n+  static final String FALLBACK_CORRECT_INTERVAL_KEY = \"hbase.rsgroup.fallback.correct.interval\";\n+  static final int FALLBACK_CORRECT_INTERVAL_DEFAULT = 10 * 60 * 1000; // 10min\n+\n+  private boolean fallbackEnabled;\n+  private List<String> fallbackGroups;\n+  @VisibleForTesting\n+  FallbackCorrector fallbackCorrector;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74613b1c25cf96069b6f20510a62ba8e66e6641d"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTY0MDYxNw==", "bodyText": "I tried and make sure that RSGroupBalancer works for this when the balancer switch is on. Let me remove the code about the chore.", "url": "https://github.com/apache/hbase/pull/1789#discussion_r431640617", "createdAt": "2020-05-28T07:39:58Z", "author": {"login": "ddupg"}, "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/rsgroup/RSGroupBasedLoadBalancer.java", "diffHunk": "@@ -77,6 +81,23 @@\n   private volatile RSGroupInfoManager rsGroupInfoManager;\n   private LoadBalancer internalBalancer;\n \n+  /** Define the config key of if fallback group is enabled */\n+  public static final String FALLBACK_GROUP_ENABLED_KEY = \"hbase.rsgroup.fallback.groups.enable\";\n+  public static final boolean FALLBACK_GROUP_ENABLED_DEFAULT = false;\n+\n+  /** Define the config key of fallback groups */\n+  public static final String FALLBACK_GROUPS_KEY = \"hbase.rsgroup.fallback.groups\";\n+  public static final String FALLBACK_GROUPS_DEFAULT = RSGroupInfo.DEFAULT_GROUP;\n+\n+  /** Define the config key of interval to correct fallback regions */\n+  static final String FALLBACK_CORRECT_INTERVAL_KEY = \"hbase.rsgroup.fallback.correct.interval\";\n+  static final int FALLBACK_CORRECT_INTERVAL_DEFAULT = 10 * 60 * 1000; // 10min\n+\n+  private boolean fallbackEnabled;\n+  private List<String> fallbackGroups;\n+  @VisibleForTesting\n+  FallbackCorrector fallbackCorrector;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTU3MTc1MA=="}, "originalCommit": {"oid": "74613b1c25cf96069b6f20510a62ba8e66e6641d"}, "originalPosition": 41}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3065, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}