{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIyNTMyMDg4", "number": 1771, "title": "HBASE-24425 Run hbck_chore_run and catalogjanitor_run on draw of 'HBC\u2026", "bodyText": "\u2026K Report' page", "createdAt": "2020-05-25T03:57:18Z", "url": "https://github.com/apache/hbase/pull/1771", "merged": true, "mergeCommit": {"oid": "f8a5cc92af031c4af1fccf838158dc06db24c3e7"}, "closed": true, "closedAt": "2020-05-27T02:50:24Z", "author": {"login": "saintstack"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABckrHtvAFqTQxNzUxNzYxMA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABclOjfbgFqTQxODc3NjE4NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3NTE3NjEw", "url": "https://github.com/apache/hbase/pull/1771#pullrequestreview-417517610", "createdAt": "2020-05-25T07:41:42Z", "commit": {"oid": "fa988350db1629bce564889ced9ab8107bf25c05"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3Njg0NzE2", "url": "https://github.com/apache/hbase/pull/1771#pullrequestreview-417684716", "createdAt": "2020-05-25T12:41:42Z", "commit": {"oid": "fa988350db1629bce564889ced9ab8107bf25c05"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQxMjo0MTo0MlrOGZ_5KQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQxMjo0NTozOVrOGZ__ew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTkxNDQwOQ==", "bodyText": "nit: Since we need boolean, we can directly use: Boolean.parseBoolean(cacheParameterValue)", "url": "https://github.com/apache/hbase/pull/1771#discussion_r429914409", "createdAt": "2020-05-25T12:41:42Z", "author": {"login": "virajjasani"}, "path": "hbase-server/src/main/resources/hbase-webapps/master/hbck.jsp", "diffHunk": "@@ -37,9 +37,17 @@\n <%@ page import=\"org.apache.hadoop.hbase.util.Pair\" %>\n <%@ page import=\"org.apache.hadoop.hbase.master.CatalogJanitor\" %>\n <%@ page import=\"org.apache.hadoop.hbase.master.CatalogJanitor.Report\" %>\n+<%@ page import=\"org.apache.hadoop.hbase.util.Threads\" %>\n <%\n+  final String cacheParameterValue = request.getParameter(\"cache\");\n+  boolean cache = Boolean.valueOf(cacheParameterValue);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa988350db1629bce564889ced9ab8107bf25c05"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTkxNTI5Mw==", "bodyText": "MasterRpcServices throw ServiceException for both runHbckChore and runCatalogScan. Maybe we can handle it and print some nice error message?", "url": "https://github.com/apache/hbase/pull/1771#discussion_r429915293", "createdAt": "2020-05-25T12:43:51Z", "author": {"login": "virajjasani"}, "path": "hbase-server/src/main/resources/hbase-webapps/master/hbck.jsp", "diffHunk": "@@ -37,9 +37,17 @@\n <%@ page import=\"org.apache.hadoop.hbase.util.Pair\" %>\n <%@ page import=\"org.apache.hadoop.hbase.master.CatalogJanitor\" %>\n <%@ page import=\"org.apache.hadoop.hbase.master.CatalogJanitor.Report\" %>\n+<%@ page import=\"org.apache.hadoop.hbase.util.Threads\" %>\n <%\n+  final String cacheParameterValue = request.getParameter(\"cache\");\n+  boolean cache = Boolean.valueOf(cacheParameterValue);\n   final HMaster master = (HMaster) getServletContext().getAttribute(HMaster.MASTER);\n   pageContext.setAttribute(\"pageTitle\", \"HBase Master HBCK Report: \" + master.getServerName());\n+  if (!cache) {\n+    // Run the two reporters inline w/ drawing of the page. If exception, will show in page draw.\n+    master.getMasterRpcServices().runHbckChore(null, null);\n+    master.getMasterRpcServices().runCatalogScan(null, null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa988350db1629bce564889ced9ab8107bf25c05"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTkxNjAyNw==", "bodyText": "Not being used it seems.", "url": "https://github.com/apache/hbase/pull/1771#discussion_r429916027", "createdAt": "2020-05-25T12:45:39Z", "author": {"login": "virajjasani"}, "path": "hbase-server/src/main/resources/hbase-webapps/master/hbck.jsp", "diffHunk": "@@ -37,9 +37,17 @@\n <%@ page import=\"org.apache.hadoop.hbase.util.Pair\" %>\n <%@ page import=\"org.apache.hadoop.hbase.master.CatalogJanitor\" %>\n <%@ page import=\"org.apache.hadoop.hbase.master.CatalogJanitor.Report\" %>\n+<%@ page import=\"org.apache.hadoop.hbase.util.Threads\" %>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa988350db1629bce564889ced9ab8107bf25c05"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3ODk2Njgy", "url": "https://github.com/apache/hbase/pull/1771#pullrequestreview-417896682", "createdAt": "2020-05-25T23:08:14Z", "commit": {"oid": "fa988350db1629bce564889ced9ab8107bf25c05"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c8cd39d610e87f7aeed87605447cab8a732a580", "author": {"user": {"login": "saintstack", "name": "Michael Stack"}}, "url": "https://github.com/apache/hbase/commit/0c8cd39d610e87f7aeed87605447cab8a732a580", "committedDate": "2020-05-26T19:20:01Z", "message": "HBASE-24425 Run hbck_chore_run and catalogjanitor_run on draw of 'HBCK Report' page"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fa988350db1629bce564889ced9ab8107bf25c05", "author": {"user": {"login": "saintstack", "name": "Michael Stack"}}, "url": "https://github.com/apache/hbase/commit/fa988350db1629bce564889ced9ab8107bf25c05", "committedDate": "2020-05-25T03:53:43Z", "message": "HBASE-24425 Run hbck_chore_run and catalogjanitor_run on draw of 'HBCK Report' page"}, "afterCommit": {"oid": "0c8cd39d610e87f7aeed87605447cab8a732a580", "author": {"user": {"login": "saintstack", "name": "Michael Stack"}}, "url": "https://github.com/apache/hbase/commit/0c8cd39d610e87f7aeed87605447cab8a732a580", "committedDate": "2020-05-26T19:20:01Z", "message": "HBASE-24425 Run hbck_chore_run and catalogjanitor_run on draw of 'HBCK Report' page"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4Nzc2MTg0", "url": "https://github.com/apache/hbase/pull/1771#pullrequestreview-418776184", "createdAt": "2020-05-27T00:58:43Z", "commit": {"oid": "0c8cd39d610e87f7aeed87605447cab8a732a580"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4732, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}