{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUzODgzNzA2", "number": 2104, "title": "HBASE-24740 Enable journal logging for HBase snapshot operation", "bodyText": "", "createdAt": "2020-07-20T22:09:20Z", "url": "https://github.com/apache/hbase/pull/2104", "merged": true, "mergeCommit": {"oid": "430602aed82c09cfac6781dbd3dc5eba0dfef4af"}, "closed": true, "closedAt": "2020-07-21T01:11:42Z", "author": {"login": "sguggilam"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc25FW5AH2gAyNDUzODgzNzA2Ojg0MGNmMDkwZGM5NDRlNTU0NTJjMjE5ZjI3OTRiMDBiMjRhMGFmNjE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc269bdgFqTQ1MjA0MzIyMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "840cf090dc944e55452c219f2794b00b24a0af61", "author": {"user": null}, "url": "https://github.com/apache/hbase/commit/840cf090dc944e55452c219f2794b00b24a0af61", "committedDate": "2020-07-20T22:08:26Z", "message": "HBASE-24740 Enable journal logging for HBase snapshot operation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyMDI0NzUy", "url": "https://github.com/apache/hbase/pull/2104#pullrequestreview-452024752", "createdAt": "2020-07-20T23:23:50Z", "commit": {"oid": "840cf090dc944e55452c219f2794b00b24a0af61"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQyMzoyMzo1MFrOG0inzw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQyMzoyNToxMlrOG0ipcw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzc0NjM4Mw==", "bodyText": "nit: parameterized logging", "url": "https://github.com/apache/hbase/pull/2104#discussion_r457746383", "createdAt": "2020-07-20T23:23:50Z", "author": {"login": "bharathv"}, "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/SnapshotManifest.java", "diffHunk": "@@ -478,7 +494,7 @@ public void consolidate() throws IOException {\n       FSTableDescriptors.createTableDescriptorForTableDirectory(workingDirFs, workingDir, htd,\n           false);\n     } else {\n-      LOG.debug(\"Convert to Single Snapshot Manifest\");\n+      LOG.debug(\"Convert to Single Snapshot Manifest for \" + this.desc.getName());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "840cf090dc944e55452c219f2794b00b24a0af61"}, "originalPosition": 74}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzc0NjczMg==", "bodyText": "nit: This still requires the isDebugEnabled() guard because ClientSnapshotDescriptionUtils.toString(..) is not a trivial call.", "url": "https://github.com/apache/hbase/pull/2104#discussion_r457746732", "createdAt": "2020-07-20T23:25:01Z", "author": {"login": "bharathv"}, "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/master/snapshot/SnapshotManager.java", "diffHunk": "@@ -654,14 +654,16 @@ private void takeSnapshotInternal(SnapshotDescription snapshot) throws IOExcepti\n     TableName snapshotTable = TableName.valueOf(snapshot.getTable());\n     if (master.getTableStateManager().isTableState(snapshotTable,\n         TableState.State.ENABLED)) {\n-      LOG.debug(\"Table enabled, starting distributed snapshot.\");\n+      LOG.debug(\"Table enabled, starting distributed snapshots for {}\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "840cf090dc944e55452c219f2794b00b24a0af61"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzc0NjgwMw==", "bodyText": "same as above.", "url": "https://github.com/apache/hbase/pull/2104#discussion_r457746803", "createdAt": "2020-07-20T23:25:12Z", "author": {"login": "bharathv"}, "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/master/snapshot/SnapshotManager.java", "diffHunk": "@@ -654,14 +654,16 @@ private void takeSnapshotInternal(SnapshotDescription snapshot) throws IOExcepti\n     TableName snapshotTable = TableName.valueOf(snapshot.getTable());\n     if (master.getTableStateManager().isTableState(snapshotTable,\n         TableState.State.ENABLED)) {\n-      LOG.debug(\"Table enabled, starting distributed snapshot.\");\n+      LOG.debug(\"Table enabled, starting distributed snapshots for {}\",\n+        ClientSnapshotDescriptionUtils.toString(snapshot));\n       snapshotEnabledTable(snapshot);\n       LOG.debug(\"Started snapshot: \" + ClientSnapshotDescriptionUtils.toString(snapshot));\n     }\n     // For disabled table, snapshot is created by the master\n     else if (master.getTableStateManager().isTableState(snapshotTable,\n         TableState.State.DISABLED)) {\n-      LOG.debug(\"Table is disabled, running snapshot entirely on master.\");\n+        LOG.debug(\"Table is disabled, running snapshot entirely on master for {}\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "840cf090dc944e55452c219f2794b00b24a0af61"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c69be59bf01f8832992b1c505496830ebaf2e365", "author": {"user": null}, "url": "https://github.com/apache/hbase/commit/c69be59bf01f8832992b1c505496830ebaf2e365", "committedDate": "2020-07-21T00:07:49Z", "message": "Incorporatte review comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyMDQzMjIy", "url": "https://github.com/apache/hbase/pull/2104#pullrequestreview-452043222", "createdAt": "2020-07-21T00:19:35Z", "commit": {"oid": "c69be59bf01f8832992b1c505496830ebaf2e365"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4316, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}