{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkxOTUzNDQ1", "number": 2449, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQwMjozNzoyM1rOEm2fhA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQwMjozNzoyM1rOEm2fhA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA5MTc0MTQ4OnYy", "diffSide": "RIGHT", "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.java", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQwMjozNzoyM1rOHXHorw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yN1QwNjowMDo0NlrOHYk9hw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDAwNDM5OQ==", "bodyText": "WALFileStartTimeComparator is better? We are comparing Paths here.", "url": "https://github.com/apache/hbase/pull/2449#discussion_r494004399", "createdAt": "2020-09-24T02:37:23Z", "author": {"login": "Apache9"}, "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.java", "diffHunk": "@@ -418,6 +419,30 @@ public static boolean isMetaFile(String p) {\n     return p != null && p.endsWith(META_WAL_PROVIDER_ID);\n   }\n \n+  /**\n+   * Comparator used to compare logs together based on their start time.\n+   * Just compares start times and nothing else.\n+   */\n+  public static class WALsStartTimeComparator implements Comparator<Path> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb3ddfd265403f6fff8abcb0bfd053eb93aaed6e"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDQxNTY1MA==", "bodyText": "It extracts the timestamp from the filename and compares that so, yes, compares the 'start' logging timestamp.", "url": "https://github.com/apache/hbase/pull/2449#discussion_r494415650", "createdAt": "2020-09-24T15:33:53Z", "author": {"login": "saintstack"}, "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.java", "diffHunk": "@@ -418,6 +419,30 @@ public static boolean isMetaFile(String p) {\n     return p != null && p.endsWith(META_WAL_PROVIDER_ID);\n   }\n \n+  /**\n+   * Comparator used to compare logs together based on their start time.\n+   * Just compares start times and nothing else.\n+   */\n+  public static class WALsStartTimeComparator implements Comparator<Path> {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDAwNDM5OQ=="}, "originalCommit": {"oid": "fb3ddfd265403f6fff8abcb0bfd053eb93aaed6e"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDQyMzQ0Ng==", "bodyText": "Here is the original comparator named LogComparator:\n-    @Override\n-    public int compare(Path o1, Path o2) {\n-      return Long.compare(getTS(o1), getTS(o2));\n-    }\n-\n-    /**\n-     * <p>\n-     * Split a path to get the start time\n-     * </p>\n-     * <p>\n-     * For example: 10.20.20.171%3A60020.1277499063250\n-     * </p>\n-     * @param p path to split\n-     * @return start time\n-     */\n-    private static long getTS(Path p) {\n-      return AbstractFSWALProvider.getWALStartTimeFromWALName(p.getName());\n-    }", "url": "https://github.com/apache/hbase/pull/2449#discussion_r494423446", "createdAt": "2020-09-24T15:44:53Z", "author": {"login": "saintstack"}, "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.java", "diffHunk": "@@ -418,6 +419,30 @@ public static boolean isMetaFile(String p) {\n     return p != null && p.endsWith(META_WAL_PROVIDER_ID);\n   }\n \n+  /**\n+   * Comparator used to compare logs together based on their start time.\n+   * Just compares start times and nothing else.\n+   */\n+  public static class WALsStartTimeComparator implements Comparator<Path> {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDAwNDM5OQ=="}, "originalCommit": {"oid": "fb3ddfd265403f6fff8abcb0bfd053eb93aaed6e"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDg0OTk4MA==", "bodyText": "I mean is it better to change 'WALs' to 'WALFile'? Or at least to 'WAL'? 'WALs' looks strange...", "url": "https://github.com/apache/hbase/pull/2449#discussion_r494849980", "createdAt": "2020-09-25T09:01:57Z", "author": {"login": "Apache9"}, "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.java", "diffHunk": "@@ -418,6 +419,30 @@ public static boolean isMetaFile(String p) {\n     return p != null && p.endsWith(META_WAL_PROVIDER_ID);\n   }\n \n+  /**\n+   * Comparator used to compare logs together based on their start time.\n+   * Just compares start times and nothing else.\n+   */\n+  public static class WALsStartTimeComparator implements Comparator<Path> {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDAwNDM5OQ=="}, "originalCommit": {"oid": "fb3ddfd265403f6fff8abcb0bfd053eb93aaed6e"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTUzMzQ0Nw==", "bodyText": "I am +1 for \"WALStartTimeComparator\". :-)", "url": "https://github.com/apache/hbase/pull/2449#discussion_r495533447", "createdAt": "2020-09-27T06:00:46Z", "author": {"login": "infraio"}, "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.java", "diffHunk": "@@ -418,6 +419,30 @@ public static boolean isMetaFile(String p) {\n     return p != null && p.endsWith(META_WAL_PROVIDER_ID);\n   }\n \n+  /**\n+   * Comparator used to compare logs together based on their start time.\n+   * Just compares start times and nothing else.\n+   */\n+  public static class WALsStartTimeComparator implements Comparator<Path> {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDAwNDM5OQ=="}, "originalCommit": {"oid": "fb3ddfd265403f6fff8abcb0bfd053eb93aaed6e"}, "originalPosition": 16}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2509, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}