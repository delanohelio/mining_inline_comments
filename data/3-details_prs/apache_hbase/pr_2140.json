{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU2MzM0MTIw", "number": 2140, "title": "HBASE-24770 Reimplement the Constraints API and revisit the IA annota\u2026", "bodyText": "\u2026tions on related classes", "createdAt": "2020-07-24T14:57:27Z", "url": "https://github.com/apache/hbase/pull/2140", "merged": true, "mergeCommit": {"oid": "7e6e7a7051f71c4f554c53d756538cb753cdfc66"}, "closed": true, "closedAt": "2020-07-28T01:24:56Z", "author": {"login": "Apache9"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc4ug96gBqjM1ODcxNDAzMzk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc5DpAMABqjM1OTA0MzYyNTI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0414cfd4fd14edc8951d245e091a12e477150205", "author": {"user": {"login": "Apache9", "name": "Duo Zhang"}}, "url": "https://github.com/apache/hbase/commit/0414cfd4fd14edc8951d245e091a12e477150205", "committedDate": "2020-07-25T07:09:20Z", "message": "fix checkstyle and javadoc"}, "afterCommit": {"oid": "9cf1014a307e409d9926af3393e5a443b5943d4f", "author": {"user": {"login": "Apache9", "name": "Duo Zhang"}}, "url": "https://github.com/apache/hbase/commit/9cf1014a307e409d9926af3393e5a443b5943d4f", "committedDate": "2020-07-26T14:57:10Z", "message": "HBASE-24770 Reimplement the Constraints API and revisit the IA annotations on related classes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1ODczMjMw", "url": "https://github.com/apache/hbase/pull/2140#pullrequestreview-455873230", "createdAt": "2020-07-27T15:07:18Z", "commit": {"oid": "9cf1014a307e409d9926af3393e5a443b5943d4f"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNTowNzoxOVrOG3mzAw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNToxMjo1MlrOG3nChw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDk2MDUxNQ==", "bodyText": "Adding method to a public interface. For hbase3 only so should be fine. This is filling in missing functionality?", "url": "https://github.com/apache/hbase/pull/2140#discussion_r460960515", "createdAt": "2020-07-27T15:07:19Z", "author": {"login": "saintstack"}, "path": "hbase-client/src/main/java/org/apache/hadoop/hbase/client/TableDescriptorBuilder.java", "diffHunk": "@@ -380,6 +380,10 @@ public TableDescriptorBuilder setCoprocessors(Collection<CoprocessorDescriptor>\n     return this;\n   }\n \n+  public boolean hasCoprocessor(String classNameToMatch) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9cf1014a307e409d9926af3393e5a443b5943d4f"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDk2MzI0Mw==", "bodyText": "Good", "url": "https://github.com/apache/hbase/pull/2140#discussion_r460963243", "createdAt": "2020-07-27T15:11:09Z", "author": {"login": "saintstack"}, "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/constraint/Constraints.java", "diffHunk": "@@ -29,26 +29,24 @@\n import java.util.Map;\n import java.util.Map.Entry;\n import java.util.regex.Pattern;\n-\n-import org.apache.hadoop.hbase.client.TableDescriptorBuilder;\n-import org.apache.yetus.audience.InterfaceAudience;\n-import org.slf4j.Logger;\n-import org.slf4j.LoggerFactory;\n import org.apache.hadoop.conf.Configuration;\n-import org.apache.hadoop.hbase.HTableDescriptor;\n import org.apache.hadoop.hbase.client.TableDescriptor;\n+import org.apache.hadoop.hbase.client.TableDescriptorBuilder;\n import org.apache.hadoop.hbase.util.Bytes;\n import org.apache.hadoop.hbase.util.Pair;\n+import org.apache.yetus.audience.InterfaceAudience;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n \n /**\n  * Utilities for adding/removing constraints from a table.\n- * <p>\n- * Constraints can be added on table load time, via the {@link HTableDescriptor}.\n- * <p>\n- * NOTE: this class is NOT thread safe. Concurrent setting/enabling/disabling of\n- * constraints can cause constraints to be run at incorrect times or not at all.\n+ * <p/>\n+ * Since {@link TableDescriptor} is immutable now, you should use {@link TableDescriptorBuilder}.\n+ * And when disabling or removing constraints, you could use\n+ * {@link TableDescriptorBuilder#newBuilder(TableDescriptor)} to clone the old\n+ * {@link TableDescriptor} and then pass it the below methods.\n  */\n-@InterfaceAudience.Private\n+@InterfaceAudience.Public", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9cf1014a307e409d9926af3393e5a443b5943d4f"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDk2NDQ4Nw==", "bodyText": "missing 'be'?", "url": "https://github.com/apache/hbase/pull/2140#discussion_r460964487", "createdAt": "2020-07-27T15:12:52Z", "author": {"login": "saintstack"}, "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/constraint/package-info.java", "diffHunk": "@@ -18,110 +18,121 @@\n \n /**\n  * Restrict the domain of a data attribute, often times to fulfill business rules/requirements.\n+ * <h2>Table of Contents</h2>\n+ * <ul>\n+ * <li><a href=\"#overview\">Overview</a></li>\n+ * <li><a href=\"#concurrency\">Concurrency and Atomicity</a></li>\n+ * <li><a href=\"#caveats\">Caveats</a></li>\n+ * <li><a href=\"#usage\">Example Usage</a></li>\n+ * </ul>\n+ * <h2><a name=\"overview\">Overview</a></h2> Constraints are used to enforce business rules in a\n+ * database. By checking all {@link org.apache.hadoop.hbase.client.Put Puts} on a given table, you\n+ * can enforce very specific data policies. For instance, you can ensure that a certain column\n+ * family-column qualifier pair always has a value between 1 and 10. Otherwise, the\n+ * {@link org.apache.hadoop.hbase.client.Put} is rejected and the data integrity is maintained.\n+ * <p/>\n+ * Constraints are designed to be configurable, so a constraint can be used across different tables,\n+ * but implement different behavior depending on the specific configuration given to that\n+ * constraint.\n+ * <p/>\n+ * By adding a constraint to a table (see <a href=\"#usage\">Example Usage</a>), constraints will\n+ * automatically enabled. You also then have the option of to disable (just 'turn off') or remove", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9cf1014a307e409d9926af3393e5a443b5943d4f"}, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e10720d4848399b14564e09191c4c38ebb0fb89", "author": {"user": {"login": "Apache9", "name": "Duo Zhang"}}, "url": "https://github.com/apache/hbase/commit/7e10720d4848399b14564e09191c4c38ebb0fb89", "committedDate": "2020-07-27T15:34:03Z", "message": "HBASE-24770 Reimplement the Constraints API and revisit the IA annotations on related classes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9cf1014a307e409d9926af3393e5a443b5943d4f", "author": {"user": {"login": "Apache9", "name": "Duo Zhang"}}, "url": "https://github.com/apache/hbase/commit/9cf1014a307e409d9926af3393e5a443b5943d4f", "committedDate": "2020-07-26T14:57:10Z", "message": "HBASE-24770 Reimplement the Constraints API and revisit the IA annotations on related classes"}, "afterCommit": {"oid": "7e10720d4848399b14564e09191c4c38ebb0fb89", "author": {"user": {"login": "Apache9", "name": "Duo Zhang"}}, "url": "https://github.com/apache/hbase/commit/7e10720d4848399b14564e09191c4c38ebb0fb89", "committedDate": "2020-07-27T15:34:03Z", "message": "HBASE-24770 Reimplement the Constraints API and revisit the IA annotations on related classes"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4077, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}