{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAyMTM4Njc2", "number": 1487, "title": "HBASE-23800 Add documentation about the CECPs changes", "bodyText": "", "createdAt": "2020-04-11T04:31:31Z", "url": "https://github.com/apache/hbase/pull/1487", "merged": true, "mergeCommit": {"oid": "2c8d104d71c996a797426fd7f0ef0921a1657f8a"}, "closed": true, "closedAt": "2020-04-18T01:34:32Z", "author": {"login": "Apache9"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcWmO_dgFqTM5MTc2ODg4OQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcYmZdeAFqTM5NTcxNTY0Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNzY4ODg5", "url": "https://github.com/apache/hbase/pull/1487#pullrequestreview-391768889", "createdAt": "2020-04-11T14:01:12Z", "commit": {"oid": "a03b847c5c6c4efe637282b05dedb23b019633de"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMVQxNDowMToxMlrOGENbjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMVQxNDowNDo0NlrOGENdDw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzA2NzUzMg==", "bodyText": "NIT: \"Since coprocessor is an advanced feature...\"", "url": "https://github.com/apache/hbase/pull/1487#discussion_r407067532", "createdAt": "2020-04-11T14:01:12Z", "author": {"login": "HorizonNet"}, "path": "src/main/asciidoc/_chapters/cp.adoc", "diffHunk": "@@ -178,11 +178,27 @@ average or summation for an entire table which spans hundreds of regions.\n \n In contrast to observer coprocessors, where your code is run transparently, endpoint\n coprocessors must be explicitly invoked using the\n-link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/Table.html#coprocessorService-java.lang.Class-byte:A-byte:A-org.apache.hadoop.hbase.client.coprocessor.Batch.Call-[CoprocessorService()]\n+link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/AsyncTable.html#coprocessorService-java.util.function.Function-org.apache.hadoop.hbase.client.ServiceCaller-byte:A-[CoprocessorService()]\n method available in\n-link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/Table.html[Table]\n-or\n-link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/HTable.html[HTable].\n+link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/AsyncTable.html[AsyncTable].\n+\n+[WARNING]\n+.On using coprocessorService method with sync client\n+====\n+The coprocessorService method in link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/Table.html[Table]\n+has been deprecated.\n+\n+In link:https://issues.apache.org/jira/browse/HBASE-21512[HBASE-21512]\n+we reimplement the sync client based on the async client. And the coprocessorService\n+method defined in `Table` interface references the method from protobuf's\n+`BlockingInterface`, which means we need to use a separated thread pool to execute\n+the method to avoid blocking the async client, which is not good.\n+\n+Since coprocessor is an advance feature, we believe it is OK for coprocessor uses to", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a03b847c5c6c4efe637282b05dedb23b019633de"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzA2NzYyNQ==", "bodyText": "NIT: \"There is a lightweight...\"", "url": "https://github.com/apache/hbase/pull/1487#discussion_r407067625", "createdAt": "2020-04-11T14:02:11Z", "author": {"login": "HorizonNet"}, "path": "src/main/asciidoc/_chapters/cp.adoc", "diffHunk": "@@ -178,11 +178,27 @@ average or summation for an entire table which spans hundreds of regions.\n \n In contrast to observer coprocessors, where your code is run transparently, endpoint\n coprocessors must be explicitly invoked using the\n-link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/Table.html#coprocessorService-java.lang.Class-byte:A-byte:A-org.apache.hadoop.hbase.client.coprocessor.Batch.Call-[CoprocessorService()]\n+link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/AsyncTable.html#coprocessorService-java.util.function.Function-org.apache.hadoop.hbase.client.ServiceCaller-byte:A-[CoprocessorService()]\n method available in\n-link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/Table.html[Table]\n-or\n-link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/HTable.html[HTable].\n+link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/AsyncTable.html[AsyncTable].\n+\n+[WARNING]\n+.On using coprocessorService method with sync client\n+====\n+The coprocessorService method in link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/Table.html[Table]\n+has been deprecated.\n+\n+In link:https://issues.apache.org/jira/browse/HBASE-21512[HBASE-21512]\n+we reimplement the sync client based on the async client. And the coprocessorService\n+method defined in `Table` interface references the method from protobuf's\n+`BlockingInterface`, which means we need to use a separated thread pool to execute\n+the method to avoid blocking the async client, which is not good.\n+\n+Since coprocessor is an advance feature, we believe it is OK for coprocessor uses to\n+make use of the `AsyncTable` directly. And there is a lightweight", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a03b847c5c6c4efe637282b05dedb23b019633de"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzA2NzY0NQ==", "bodyText": "NIT: \"In HBase 2.0.0,...\"", "url": "https://github.com/apache/hbase/pull/1487#discussion_r407067645", "createdAt": "2020-04-11T14:02:29Z", "author": {"login": "HorizonNet"}, "path": "src/main/asciidoc/_chapters/cp.adoc", "diffHunk": "@@ -193,6 +209,12 @@ link:https://issues.apache.org/jira/browse/HBASE-5448[HBASE-5448]). To upgrade y\n HBase cluster from 0.94 or earlier to 0.96 or later, you need to reimplement your\n coprocessor.\n \n+And in HBase 2.0.0, we make use of a shaded version of protobuf 3.x but still keep the", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a03b847c5c6c4efe637282b05dedb23b019633de"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzA2NzcxOQ==", "bodyText": "NIT: \"...protobuf 3.x, but still...\"", "url": "https://github.com/apache/hbase/pull/1487#discussion_r407067719", "createdAt": "2020-04-11T14:03:05Z", "author": {"login": "HorizonNet"}, "path": "src/main/asciidoc/_chapters/cp.adoc", "diffHunk": "@@ -193,6 +209,12 @@ link:https://issues.apache.org/jira/browse/HBASE-5448[HBASE-5448]). To upgrade y\n HBase cluster from 0.94 or earlier to 0.96 or later, you need to reimplement your\n coprocessor.\n \n+And in HBase 2.0.0, we make use of a shaded version of protobuf 3.x but still keep the", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzA2NzY0NQ=="}, "originalCommit": {"oid": "a03b847c5c6c4efe637282b05dedb23b019633de"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzA2NzkxOQ==", "bodyText": "NIT: \"In 3.0.0 we removed all dependencies on ...\"", "url": "https://github.com/apache/hbase/pull/1487#discussion_r407067919", "createdAt": "2020-04-11T14:04:46Z", "author": {"login": "HorizonNet"}, "path": "src/main/asciidoc/_chapters/cp.adoc", "diffHunk": "@@ -193,6 +209,12 @@ link:https://issues.apache.org/jira/browse/HBASE-5448[HBASE-5448]). To upgrade y\n HBase cluster from 0.94 or earlier to 0.96 or later, you need to reimplement your\n coprocessor.\n \n+And in HBase 2.0.0, we make use of a shaded version of protobuf 3.x but still keep the\n+protobuf for coprocessor on 2.5.0. And in 3.0.0, we removed all the dependency on non-shaded", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a03b847c5c6c4efe637282b05dedb23b019633de"}, "originalPosition": 37}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a03b847c5c6c4efe637282b05dedb23b019633de", "author": {"user": {"login": "Apache9", "name": "Duo Zhang"}}, "url": "https://github.com/apache/hbase/commit/a03b847c5c6c4efe637282b05dedb23b019633de", "committedDate": "2020-04-11T04:30:50Z", "message": "HBASE-23800 Add documentation about the CECPs changes"}, "afterCommit": {"oid": "17ace70d477d9bbb81c4169e6d89019e1d8b13fa", "author": {"user": {"login": "Apache9", "name": "Duo Zhang"}}, "url": "https://github.com/apache/hbase/commit/17ace70d477d9bbb81c4169e6d89019e1d8b13fa", "committedDate": "2020-04-13T04:17:15Z", "message": "fix typo"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyNjA2NTE4", "url": "https://github.com/apache/hbase/pull/1487#pullrequestreview-392606518", "createdAt": "2020-04-14T05:09:28Z", "commit": {"oid": "17ace70d477d9bbb81c4169e6d89019e1d8b13fa"}, "state": "COMMENTED", "comments": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwNTowOToyOFrOGE-bHw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwNToyNDowM1rOGE-qfg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzg3MDIzOQ==", "bodyText": "s/And the/The/", "url": "https://github.com/apache/hbase/pull/1487#discussion_r407870239", "createdAt": "2020-04-14T05:09:28Z", "author": {"login": "saintstack"}, "path": "src/main/asciidoc/_chapters/cp.adoc", "diffHunk": "@@ -178,11 +178,27 @@ average or summation for an entire table which spans hundreds of regions.\n \n In contrast to observer coprocessors, where your code is run transparently, endpoint\n coprocessors must be explicitly invoked using the\n-link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/Table.html#coprocessorService-java.lang.Class-byte:A-byte:A-org.apache.hadoop.hbase.client.coprocessor.Batch.Call-[CoprocessorService()]\n+link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/AsyncTable.html#coprocessorService-java.util.function.Function-org.apache.hadoop.hbase.client.ServiceCaller-byte:A-[CoprocessorService()]\n method available in\n-link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/Table.html[Table]\n-or\n-link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/HTable.html[HTable].\n+link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/AsyncTable.html[AsyncTable].\n+\n+[WARNING]\n+.On using coprocessorService method with sync client\n+====\n+The coprocessorService method in link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/Table.html[Table]\n+has been deprecated.\n+\n+In link:https://issues.apache.org/jira/browse/HBASE-21512[HBASE-21512]\n+we reimplement the sync client based on the async client. And the coprocessorService", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "17ace70d477d9bbb81c4169e6d89019e1d8b13fa"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzg3MDU3OQ==", "bodyText": "s/references the/directly references a/", "url": "https://github.com/apache/hbase/pull/1487#discussion_r407870579", "createdAt": "2020-04-14T05:10:37Z", "author": {"login": "saintstack"}, "path": "src/main/asciidoc/_chapters/cp.adoc", "diffHunk": "@@ -178,11 +178,27 @@ average or summation for an entire table which spans hundreds of regions.\n \n In contrast to observer coprocessors, where your code is run transparently, endpoint\n coprocessors must be explicitly invoked using the\n-link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/Table.html#coprocessorService-java.lang.Class-byte:A-byte:A-org.apache.hadoop.hbase.client.coprocessor.Batch.Call-[CoprocessorService()]\n+link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/AsyncTable.html#coprocessorService-java.util.function.Function-org.apache.hadoop.hbase.client.ServiceCaller-byte:A-[CoprocessorService()]\n method available in\n-link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/Table.html[Table]\n-or\n-link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/HTable.html[HTable].\n+link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/AsyncTable.html[AsyncTable].\n+\n+[WARNING]\n+.On using coprocessorService method with sync client\n+====\n+The coprocessorService method in link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/Table.html[Table]\n+has been deprecated.\n+\n+In link:https://issues.apache.org/jira/browse/HBASE-21512[HBASE-21512]\n+we reimplement the sync client based on the async client. And the coprocessorService\n+method defined in `Table` interface references the method from protobuf's", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "17ace70d477d9bbb81c4169e6d89019e1d8b13fa"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzg3MDYxNA==", "bodyText": "s/separated/separate/", "url": "https://github.com/apache/hbase/pull/1487#discussion_r407870614", "createdAt": "2020-04-14T05:10:51Z", "author": {"login": "saintstack"}, "path": "src/main/asciidoc/_chapters/cp.adoc", "diffHunk": "@@ -178,11 +178,27 @@ average or summation for an entire table which spans hundreds of regions.\n \n In contrast to observer coprocessors, where your code is run transparently, endpoint\n coprocessors must be explicitly invoked using the\n-link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/Table.html#coprocessorService-java.lang.Class-byte:A-byte:A-org.apache.hadoop.hbase.client.coprocessor.Batch.Call-[CoprocessorService()]\n+link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/AsyncTable.html#coprocessorService-java.util.function.Function-org.apache.hadoop.hbase.client.ServiceCaller-byte:A-[CoprocessorService()]\n method available in\n-link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/Table.html[Table]\n-or\n-link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/HTable.html[HTable].\n+link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/AsyncTable.html[AsyncTable].\n+\n+[WARNING]\n+.On using coprocessorService method with sync client\n+====\n+The coprocessorService method in link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/Table.html[Table]\n+has been deprecated.\n+\n+In link:https://issues.apache.org/jira/browse/HBASE-21512[HBASE-21512]\n+we reimplement the sync client based on the async client. And the coprocessorService\n+method defined in `Table` interface references the method from protobuf's\n+`BlockingInterface`, which means we need to use a separated thread pool to execute", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "17ace70d477d9bbb81c4169e6d89019e1d8b13fa"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzg3MDgzMA==", "bodyText": "s/to avoid blocking/so we avoid blocking/\ns/, which is not good/(We want to avoid blocking calls in our async implementation).", "url": "https://github.com/apache/hbase/pull/1487#discussion_r407870830", "createdAt": "2020-04-14T05:11:43Z", "author": {"login": "saintstack"}, "path": "src/main/asciidoc/_chapters/cp.adoc", "diffHunk": "@@ -178,11 +178,27 @@ average or summation for an entire table which spans hundreds of regions.\n \n In contrast to observer coprocessors, where your code is run transparently, endpoint\n coprocessors must be explicitly invoked using the\n-link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/Table.html#coprocessorService-java.lang.Class-byte:A-byte:A-org.apache.hadoop.hbase.client.coprocessor.Batch.Call-[CoprocessorService()]\n+link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/AsyncTable.html#coprocessorService-java.util.function.Function-org.apache.hadoop.hbase.client.ServiceCaller-byte:A-[CoprocessorService()]\n method available in\n-link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/Table.html[Table]\n-or\n-link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/HTable.html[HTable].\n+link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/AsyncTable.html[AsyncTable].\n+\n+[WARNING]\n+.On using coprocessorService method with sync client\n+====\n+The coprocessorService method in link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/Table.html[Table]\n+has been deprecated.\n+\n+In link:https://issues.apache.org/jira/browse/HBASE-21512[HBASE-21512]\n+we reimplement the sync client based on the async client. And the coprocessorService\n+method defined in `Table` interface references the method from protobuf's\n+`BlockingInterface`, which means we need to use a separated thread pool to execute\n+the method to avoid blocking the async client, which is not good.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "17ace70d477d9bbb81c4169e6d89019e1d8b13fa"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzg3MTk5OA==", "bodyText": "s/to make use of the/to instead switch over to use/\ns/directly//", "url": "https://github.com/apache/hbase/pull/1487#discussion_r407871998", "createdAt": "2020-04-14T05:16:04Z", "author": {"login": "saintstack"}, "path": "src/main/asciidoc/_chapters/cp.adoc", "diffHunk": "@@ -178,11 +178,27 @@ average or summation for an entire table which spans hundreds of regions.\n \n In contrast to observer coprocessors, where your code is run transparently, endpoint\n coprocessors must be explicitly invoked using the\n-link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/Table.html#coprocessorService-java.lang.Class-byte:A-byte:A-org.apache.hadoop.hbase.client.coprocessor.Batch.Call-[CoprocessorService()]\n+link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/AsyncTable.html#coprocessorService-java.util.function.Function-org.apache.hadoop.hbase.client.ServiceCaller-byte:A-[CoprocessorService()]\n method available in\n-link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/Table.html[Table]\n-or\n-link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/HTable.html[HTable].\n+link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/AsyncTable.html[AsyncTable].\n+\n+[WARNING]\n+.On using coprocessorService method with sync client\n+====\n+The coprocessorService method in link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/Table.html[Table]\n+has been deprecated.\n+\n+In link:https://issues.apache.org/jira/browse/HBASE-21512[HBASE-21512]\n+we reimplement the sync client based on the async client. And the coprocessorService\n+method defined in `Table` interface references the method from protobuf's\n+`BlockingInterface`, which means we need to use a separated thread pool to execute\n+the method to avoid blocking the async client, which is not good.\n+\n+Since coprocessor is an advanced feature, we believe it is OK for coprocessor users to\n+make use of the `AsyncTable` directly. There is a lightweight", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "17ace70d477d9bbb81c4169e6d89019e1d8b13fa"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzg3MjA5OQ==", "bodyText": "s/Connection./Connection if needed./", "url": "https://github.com/apache/hbase/pull/1487#discussion_r407872099", "createdAt": "2020-04-14T05:16:29Z", "author": {"login": "saintstack"}, "path": "src/main/asciidoc/_chapters/cp.adoc", "diffHunk": "@@ -178,11 +178,27 @@ average or summation for an entire table which spans hundreds of regions.\n \n In contrast to observer coprocessors, where your code is run transparently, endpoint\n coprocessors must be explicitly invoked using the\n-link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/Table.html#coprocessorService-java.lang.Class-byte:A-byte:A-org.apache.hadoop.hbase.client.coprocessor.Batch.Call-[CoprocessorService()]\n+link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/AsyncTable.html#coprocessorService-java.util.function.Function-org.apache.hadoop.hbase.client.ServiceCaller-byte:A-[CoprocessorService()]\n method available in\n-link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/Table.html[Table]\n-or\n-link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/HTable.html[HTable].\n+link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/AsyncTable.html[AsyncTable].\n+\n+[WARNING]\n+.On using coprocessorService method with sync client\n+====\n+The coprocessorService method in link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/Table.html[Table]\n+has been deprecated.\n+\n+In link:https://issues.apache.org/jira/browse/HBASE-21512[HBASE-21512]\n+we reimplement the sync client based on the async client. And the coprocessorService\n+method defined in `Table` interface references the method from protobuf's\n+`BlockingInterface`, which means we need to use a separated thread pool to execute\n+the method to avoid blocking the async client, which is not good.\n+\n+Since coprocessor is an advanced feature, we believe it is OK for coprocessor users to\n+make use of the `AsyncTable` directly. There is a lightweight\n+link:https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/Connection.html#toAsyncConnection--[toAsyncConnection]\n+method to get an `AsyncConnection` from `Connection`.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "17ace70d477d9bbb81c4169e6d89019e1d8b13fa"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzg3MjQ0NA==", "bodyText": "s/In HBase 2.0.0/In HBase.2.x/\ns/make/made/\ns/still keep/kept/\ns/coprocessor/coprocessors/", "url": "https://github.com/apache/hbase/pull/1487#discussion_r407872444", "createdAt": "2020-04-14T05:17:52Z", "author": {"login": "saintstack"}, "path": "src/main/asciidoc/_chapters/cp.adoc", "diffHunk": "@@ -193,6 +209,12 @@ link:https://issues.apache.org/jira/browse/HBASE-5448[HBASE-5448]). To upgrade y\n HBase cluster from 0.94 or earlier to 0.96 or later, you need to reimplement your\n coprocessor.\n \n+In HBase 2.0.0, we make use of a shaded version of protobuf 3.x, but still keep the\n+protobuf for coprocessor on 2.5.0. In 3.0.0, we removed all dependencies on non-shaded", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "17ace70d477d9bbb81c4169e6d89019e1d8b13fa"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzg3MzEyMw==", "bodyText": "Oh, so you put together your own .pb file/pb Service, and then use the protobuf version over in hbase-thirdparty to generate stubs.\nif you need to convert your pb to pojos, you build your own. If you want to use internal hbase pb or pojo types, I suppose you just use them?  They are not audience private but limitedprivate to CPEP implementors?", "url": "https://github.com/apache/hbase/pull/1487#discussion_r407873123", "createdAt": "2020-04-14T05:20:18Z", "author": {"login": "saintstack"}, "path": "src/main/asciidoc/_chapters/cp.adoc", "diffHunk": "@@ -193,6 +209,12 @@ link:https://issues.apache.org/jira/browse/HBASE-5448[HBASE-5448]). To upgrade y\n HBase cluster from 0.94 or earlier to 0.96 or later, you need to reimplement your\n coprocessor.\n \n+In HBase 2.0.0, we make use of a shaded version of protobuf 3.x, but still keep the\n+protobuf for coprocessor on 2.5.0. In 3.0.0, we removed all dependencies on non-shaded\n+protobuf so you need to reimplement your coprocessor to make use of the shaded protobuf\n+version provided in hbase-thirdparty. Please see the <<protobuf,protobuf>> section for", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "17ace70d477d9bbb81c4169e6d89019e1d8b13fa"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzg3MzMyMw==", "bodyText": "... this in hadoop 3. what? Should you say that here? The hadoop version that moved pb?", "url": "https://github.com/apache/hbase/pull/1487#discussion_r407873323", "createdAt": "2020-04-14T05:21:04Z", "author": {"login": "saintstack"}, "path": "src/main/asciidoc/_chapters/protobuf.adoc", "diffHunk": "@@ -148,3 +148,67 @@ consider extending it also in\n Going forward, we will provide a new module of common types for use\n by CPEPs that will have the same guarantees against change as does our\n public API. TODO.\n+\n+=== protobuf changes for hbase-3.0.0 (HBASE-23797)\n+Since hadoop also shades protobuf and bumps the version to 3.x, there is no", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "17ace70d477d9bbb81c4169e6d89019e1d8b13fa"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzg3MzQ0OQ==", "bodyText": "Say hbase-3.0.0 because 3.0.0 could get confused w/ hadoop 3.0.0 which you just mentioned", "url": "https://github.com/apache/hbase/pull/1487#discussion_r407873449", "createdAt": "2020-04-14T05:21:37Z", "author": {"login": "saintstack"}, "path": "src/main/asciidoc/_chapters/protobuf.adoc", "diffHunk": "@@ -148,3 +148,67 @@ consider extending it also in\n Going forward, we will provide a new module of common types for use\n by CPEPs that will have the same guarantees against change as does our\n public API. TODO.\n+\n+=== protobuf changes for hbase-3.0.0 (HBASE-23797)\n+Since hadoop also shades protobuf and bumps the version to 3.x, there is no\n+reason for us to stay on protobuf 2.5.0 any more.\n+\n+In 3.0.0, the hbase-protocol module has been purged, the CPEP implementation", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "17ace70d477d9bbb81c4169e6d89019e1d8b13fa"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzg3Mzc1Nw==", "bodyText": "Anything on the audience for this module? Previous it was meant to be private to hbase. Now its exposed for CPEPs.  Should we recognize that by adding annotation or noting it somewhere like here?", "url": "https://github.com/apache/hbase/pull/1487#discussion_r407873757", "createdAt": "2020-04-14T05:22:40Z", "author": {"login": "saintstack"}, "path": "src/main/asciidoc/_chapters/protobuf.adoc", "diffHunk": "@@ -148,3 +148,67 @@ consider extending it also in\n Going forward, we will provide a new module of common types for use\n by CPEPs that will have the same guarantees against change as does our\n public API. TODO.\n+\n+=== protobuf changes for hbase-3.0.0 (HBASE-23797)\n+Since hadoop also shades protobuf and bumps the version to 3.x, there is no\n+reason for us to stay on protobuf 2.5.0 any more.\n+\n+In 3.0.0, the hbase-protocol module has been purged, the CPEP implementation\n+should use the protos in hbase-protocol-shaded module, and also make use of\n+the shaded protobuf in hbase-thirdparty.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "17ace70d477d9bbb81c4169e6d89019e1d8b13fa"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzg3Mzk1Nw==", "bodyText": "Refer users to the hbase-protoocol-shaded module? It does this? Refer them as an example to copy?", "url": "https://github.com/apache/hbase/pull/1487#discussion_r407873957", "createdAt": "2020-04-14T05:23:29Z", "author": {"login": "saintstack"}, "path": "src/main/asciidoc/_chapters/protobuf.adoc", "diffHunk": "@@ -148,3 +148,67 @@ consider extending it also in\n Going forward, we will provide a new module of common types for use\n by CPEPs that will have the same guarantees against change as does our\n public API. TODO.\n+\n+=== protobuf changes for hbase-3.0.0 (HBASE-23797)\n+Since hadoop also shades protobuf and bumps the version to 3.x, there is no\n+reason for us to stay on protobuf 2.5.0 any more.\n+\n+In 3.0.0, the hbase-protocol module has been purged, the CPEP implementation\n+should use the protos in hbase-protocol-shaded module, and also make use of\n+the shaded protobuf in hbase-thirdparty.\n+\n+Add this dependency to your pom:\n+[source,xml]\n+----\n+<dependency>\n+  <groupId>org.apache.hbase.thirdparty</groupId>\n+  <artifactId>hbase-shaded-protobuf</artifactId>\n+  <!-- use the version that your target hbase cluster uses -->\n+  <version>${hbase-thirdparty.version}</version>\n+  <scope>provided</scope>\n+</dependency>\n+----\n+\n+And typically you also need to add this plugin to your pom to make your\n+generated protobuf code also use the shaded and relocated protobuf version\n+in hbase-thirdparty.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "17ace70d477d9bbb81c4169e6d89019e1d8b13fa"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzg3NDE3NA==", "bodyText": "Is there an example updated CPEP that does this? Refer to it in this doc if so?", "url": "https://github.com/apache/hbase/pull/1487#discussion_r407874174", "createdAt": "2020-04-14T05:24:03Z", "author": {"login": "saintstack"}, "path": "src/main/asciidoc/_chapters/protobuf.adoc", "diffHunk": "@@ -148,3 +148,67 @@ consider extending it also in\n Going forward, we will provide a new module of common types for use\n by CPEPs that will have the same guarantees against change as does our\n public API. TODO.\n+\n+=== protobuf changes for hbase-3.0.0 (HBASE-23797)\n+Since hadoop also shades protobuf and bumps the version to 3.x, there is no\n+reason for us to stay on protobuf 2.5.0 any more.\n+\n+In 3.0.0, the hbase-protocol module has been purged, the CPEP implementation\n+should use the protos in hbase-protocol-shaded module, and also make use of\n+the shaded protobuf in hbase-thirdparty.\n+\n+Add this dependency to your pom:\n+[source,xml]\n+----\n+<dependency>\n+  <groupId>org.apache.hbase.thirdparty</groupId>\n+  <artifactId>hbase-shaded-protobuf</artifactId>\n+  <!-- use the version that your target hbase cluster uses -->\n+  <version>${hbase-thirdparty.version}</version>\n+  <scope>provided</scope>\n+</dependency>\n+----\n+\n+And typically you also need to add this plugin to your pom to make your\n+generated protobuf code also use the shaded and relocated protobuf version\n+in hbase-thirdparty.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzg3Mzk1Nw=="}, "originalCommit": {"oid": "17ace70d477d9bbb81c4169e6d89019e1d8b13fa"}, "originalPosition": 27}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "17ace70d477d9bbb81c4169e6d89019e1d8b13fa", "author": {"user": {"login": "Apache9", "name": "Duo Zhang"}}, "url": "https://github.com/apache/hbase/commit/17ace70d477d9bbb81c4169e6d89019e1d8b13fa", "committedDate": "2020-04-13T04:17:15Z", "message": "fix typo"}, "afterCommit": {"oid": "c21f0a7febe45e6ad371261fcbeb1a4ba135e2f2", "author": {"user": {"login": "Apache9", "name": "Duo Zhang"}}, "url": "https://github.com/apache/hbase/commit/c21f0a7febe45e6ad371261fcbeb1a4ba135e2f2", "committedDate": "2020-04-14T12:50:17Z", "message": "change wording"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0f5b075a714afee3e702944a2ba28ddc18b90af7", "author": {"user": {"login": "Apache9", "name": "Duo Zhang"}}, "url": "https://github.com/apache/hbase/commit/0f5b075a714afee3e702944a2ba28ddc18b90af7", "committedDate": "2020-04-15T02:40:47Z", "message": "HBASE-23800 Add documentation about the CECPs changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e504a12ccc57f0191cce318e3cb8a3f097aae85", "author": {"user": {"login": "Apache9", "name": "Duo Zhang"}}, "url": "https://github.com/apache/hbase/commit/1e504a12ccc57f0191cce318e3cb8a3f097aae85", "committedDate": "2020-04-15T02:40:47Z", "message": "fix typo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "985411f92e8b136a19a233b85aa92e6c2b683fbc", "author": {"user": {"login": "Apache9", "name": "Duo Zhang"}}, "url": "https://github.com/apache/hbase/commit/985411f92e8b136a19a233b85aa92e6c2b683fbc", "committedDate": "2020-04-15T02:40:47Z", "message": "change wording"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "03cc23389fec71cb8c2fb5ceff3069586f660df7", "author": {"user": {"login": "Apache9", "name": "Duo Zhang"}}, "url": "https://github.com/apache/hbase/commit/03cc23389fec71cb8c2fb5ceff3069586f660df7", "committedDate": "2020-04-15T02:54:30Z", "message": "rebase and small fix"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c21f0a7febe45e6ad371261fcbeb1a4ba135e2f2", "author": {"user": {"login": "Apache9", "name": "Duo Zhang"}}, "url": "https://github.com/apache/hbase/commit/c21f0a7febe45e6ad371261fcbeb1a4ba135e2f2", "committedDate": "2020-04-14T12:50:17Z", "message": "change wording"}, "afterCommit": {"oid": "03cc23389fec71cb8c2fb5ceff3069586f660df7", "author": {"user": {"login": "Apache9", "name": "Duo Zhang"}}, "url": "https://github.com/apache/hbase/commit/03cc23389fec71cb8c2fb5ceff3069586f660df7", "committedDate": "2020-04-15T02:54:30Z", "message": "rebase and small fix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1NzE1NjQ3", "url": "https://github.com/apache/hbase/pull/1487#pullrequestreview-395715647", "createdAt": "2020-04-17T19:24:28Z", "commit": {"oid": "03cc23389fec71cb8c2fb5ceff3069586f660df7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2402, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}