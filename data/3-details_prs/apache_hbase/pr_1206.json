{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc5NTg4NTg1", "number": 1206, "title": "HBASE-23890 Update the rsgroup section in our ref guide", "bodyText": "", "createdAt": "2020-02-25T13:39:07Z", "url": "https://github.com/apache/hbase/pull/1206", "merged": true, "mergeCommit": {"oid": "4a944511522d5b878ab247a7fb7cbd739073f0fc"}, "closed": true, "closedAt": "2020-02-29T00:52:20Z", "author": {"login": "Apache9"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcHy6tgAFqTM2NDE3MzAzNw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcIthG5AFqTM2NjMwNDIzNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0MTczMDM3", "url": "https://github.com/apache/hbase/pull/1206#pullrequestreview-364173037", "createdAt": "2020-02-25T14:16:57Z", "commit": {"oid": "44bd9592093ba8c20f204b109a1a19e72792eb77"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxNDoxNjo1N1rOFuHsqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxNDoyMjo0M1rOFuH6vw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzkwNDkzOQ==", "bodyText": "Does the DoNotRetryIOException make clear that the feature is off? or does it talk about some other thing that we can give an example of here to distinguish from some coincidental failure?", "url": "https://github.com/apache/hbase/pull/1206#discussion_r383904939", "createdAt": "2020-02-25T14:16:57Z", "author": {"login": "busbey"}, "path": "src/main/asciidoc/_chapters/ops_mgt.adoc", "diffHunk": "@@ -3347,20 +3346,9 @@ Here is example using a few of the rsgroup  commands. To add a group, do as foll\n .RegionServer Groups must be Enabled\n [NOTE]\n ====\n-If you have not enabled the rsgroup Coprocessor Endpoint in the master and\n-you run the any of the rsgroup shell commands, you will see an error message\n-like the below:\n-\n-[source,java]\n-----\n-ERROR: org.apache.hadoop.hbase.exceptions.UnknownProtocolException: No registered master coprocessor service found for name RSGroupAdminService\n-    at org.apache.hadoop.hbase.master.MasterRpcServices.execMasterService(MasterRpcServices.java:604)\n-    at org.apache.hadoop.hbase.shaded.protobuf.generated.MasterProtos$MasterService$2.callBlockingMethod(MasterProtos.java)\n-    at org.apache.hadoop.hbase.ipc.RpcServer.call(RpcServer.java:1140)\n-    at org.apache.hadoop.hbase.ipc.CallRunner.run(CallRunner.java:133)\n-    at org.apache.hadoop.hbase.ipc.RpcExecutor$Handler.run(RpcExecutor.java:277)\n-    at org.apache.hadoop.hbase.ipc.RpcExecutor$Handler.run(RpcExecutor.java:257)\n-----\n+If you have not enabled the rsgroup in the master and you call the any of\n+rsgroup admin methods, or run the any of the rsgroup shell commands, you may\n+see a `DoNotRetryIOException` which tells that 'RSGroup is disabled'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44bd9592093ba8c20f204b109a1a19e72792eb77"}, "originalPosition": 89}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzkwNTc5NA==", "bodyText": "the section on Upgrade Paths needs a call out that points down here.", "url": "https://github.com/apache/hbase/pull/1206#discussion_r383905794", "createdAt": "2020-02-25T14:18:22Z", "author": {"login": "busbey"}, "path": "src/main/asciidoc/_chapters/ops_mgt.adoc", "diffHunk": "@@ -3479,6 +3478,27 @@ To enable ACL, add the following to your hbase-site.xml and restart your Master:\n <property>\n ----\n \n+=== Migrating From Old Implementation", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44bd9592093ba8c20f204b109a1a19e72792eb77"}, "originalPosition": 167}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzkwNjM2OA==", "bodyText": "if they're relying on this side effect of configuring the coprocessor, do they also have to be sure to set the custom balancer (as in the old implementation) or does the flag flipping to true take care of that?", "url": "https://github.com/apache/hbase/pull/1206#discussion_r383906368", "createdAt": "2020-02-25T14:19:16Z", "author": {"login": "busbey"}, "path": "src/main/asciidoc/_chapters/ops_mgt.adoc", "diffHunk": "@@ -3479,6 +3478,27 @@ To enable ACL, add the following to your hbase-site.xml and restart your Master:\n <property>\n ----\n \n+=== Migrating From Old Implementation\n+The coprocessor `org.apache.hadoop.hbase.rsgroup.RSGroupAdminEndpoint` is\n+deprected, but for compatible, if you want the pre 3.0.0 hbase client/shell\n+to communicate with the new hbase cluster, you still need to add this\n+coprocessor to master. And if this coprocessor is specified, the\n+`hbase.balancer.rsgroup.enabled` flag will be set to true automatically to", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44bd9592093ba8c20f204b109a1a19e72792eb77"}, "originalPosition": 172}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzkwNzcyMQ==", "bodyText": "what happens wrt group enforcement during the migration? Will regions for grouped tables/namespaces go outside their assigned servers? Will rsgroup administrative commands I run wait to handle moving things in or out of a rsgroup until the migration is done?", "url": "https://github.com/apache/hbase/pull/1206#discussion_r383907721", "createdAt": "2020-02-25T14:21:20Z", "author": {"login": "busbey"}, "path": "src/main/asciidoc/_chapters/ops_mgt.adoc", "diffHunk": "@@ -3479,6 +3478,27 @@ To enable ACL, add the following to your hbase-site.xml and restart your Master:\n <property>\n ----\n \n+=== Migrating From Old Implementation\n+The coprocessor `org.apache.hadoop.hbase.rsgroup.RSGroupAdminEndpoint` is\n+deprected, but for compatible, if you want the pre 3.0.0 hbase client/shell\n+to communicate with the new hbase cluster, you still need to add this\n+coprocessor to master. And if this coprocessor is specified, the\n+`hbase.balancer.rsgroup.enabled` flag will be set to true automatically to\n+enable rs group feature.\n+\n+The main difference comparing to the old implementation is that, now the\n+rsgroup for a table is stored in TableDescriptor, instead of in RSGroupInfo,\n+so the getTables method of RSGroupInfo has been deprecated. And if you use the\n+Admin methods to get the RSGroupInfo, its getTables method will always return\n+empty. Of course the behavior for the old RSGroupAdminEndpoint is not changed,\n+we will fill the tables field of the RSGroupInfo before returning, to make it\n+compatible with old hbase client/shell.\n+\n+When upgrading, the migration between the RSGroupInfo and TableDescriptor will", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44bd9592093ba8c20f204b109a1a19e72792eb77"}, "originalPosition": 183}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzkwODU0Mw==", "bodyText": "is there an implementation reason we don't fill in the tables for RSGroupInfo in this case?", "url": "https://github.com/apache/hbase/pull/1206#discussion_r383908543", "createdAt": "2020-02-25T14:22:43Z", "author": {"login": "busbey"}, "path": "src/main/asciidoc/_chapters/ops_mgt.adoc", "diffHunk": "@@ -3479,6 +3478,27 @@ To enable ACL, add the following to your hbase-site.xml and restart your Master:\n <property>\n ----\n \n+=== Migrating From Old Implementation\n+The coprocessor `org.apache.hadoop.hbase.rsgroup.RSGroupAdminEndpoint` is\n+deprected, but for compatible, if you want the pre 3.0.0 hbase client/shell\n+to communicate with the new hbase cluster, you still need to add this\n+coprocessor to master. And if this coprocessor is specified, the\n+`hbase.balancer.rsgroup.enabled` flag will be set to true automatically to\n+enable rs group feature.\n+\n+The main difference comparing to the old implementation is that, now the", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44bd9592093ba8c20f204b109a1a19e72792eb77"}, "originalPosition": 175}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "44bd9592093ba8c20f204b109a1a19e72792eb77", "author": {"user": {"login": "Apache9", "name": "Duo Zhang"}}, "url": "https://github.com/apache/hbase/commit/44bd9592093ba8c20f204b109a1a19e72792eb77", "committedDate": "2020-02-25T13:36:41Z", "message": "HBASE-23890 Update the rsgroup section in our ref guide"}, "afterCommit": {"oid": "6c08afde78796762a118dd4e5abe2a0a63463214", "author": {"user": {"login": "Apache9", "name": "Duo Zhang"}}, "url": "https://github.com/apache/hbase/commit/6c08afde78796762a118dd4e5abe2a0a63463214", "committedDate": "2020-02-26T12:11:53Z", "message": "HBASE-23890 Update the rsgroup section in our ref guide"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6c08afde78796762a118dd4e5abe2a0a63463214", "author": {"user": {"login": "Apache9", "name": "Duo Zhang"}}, "url": "https://github.com/apache/hbase/commit/6c08afde78796762a118dd4e5abe2a0a63463214", "committedDate": "2020-02-26T12:11:53Z", "message": "HBASE-23890 Update the rsgroup section in our ref guide"}, "afterCommit": {"oid": "69d8992f151c05cb19d56246194ee9fc3df38c3a", "author": {"user": {"login": "Apache9", "name": "Duo Zhang"}}, "url": "https://github.com/apache/hbase/commit/69d8992f151c05cb19d56246194ee9fc3df38c3a", "committedDate": "2020-02-26T12:21:18Z", "message": "HBASE-23890 Update the rsgroup section in our ref guide"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "384190a516479b211814b34c5416dda5a91c9386", "author": {"user": {"login": "Apache9", "name": "Duo Zhang"}}, "url": "https://github.com/apache/hbase/commit/384190a516479b211814b34c5416dda5a91c9386", "committedDate": "2020-02-27T02:25:37Z", "message": "HBASE-23890 Update the rsgroup section in our ref guide"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "69d8992f151c05cb19d56246194ee9fc3df38c3a", "author": {"user": {"login": "Apache9", "name": "Duo Zhang"}}, "url": "https://github.com/apache/hbase/commit/69d8992f151c05cb19d56246194ee9fc3df38c3a", "committedDate": "2020-02-26T12:21:18Z", "message": "HBASE-23890 Update the rsgroup section in our ref guide"}, "afterCommit": {"oid": "384190a516479b211814b34c5416dda5a91c9386", "author": {"user": {"login": "Apache9", "name": "Duo Zhang"}}, "url": "https://github.com/apache/hbase/commit/384190a516479b211814b34c5416dda5a91c9386", "committedDate": "2020-02-27T02:25:37Z", "message": "HBASE-23890 Update the rsgroup section in our ref guide"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MzA0MjM0", "url": "https://github.com/apache/hbase/pull/1206#pullrequestreview-366304234", "createdAt": "2020-02-28T10:39:22Z", "commit": {"oid": "384190a516479b211814b34c5416dda5a91c9386"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2864, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}