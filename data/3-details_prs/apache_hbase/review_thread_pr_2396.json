{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg2NTI3OTE0", "number": 2396, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxNjowNjoxNVrOEjqhlQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxNjoxMDo1MFrOEjqpOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1ODMyMzQxOnYy", "diffSide": "LEFT", "path": "hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestFromClientSide.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxNjowNjoxNVrOHSJMIQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQwNDoyOToyOVrOHSfoKw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODc4Njk3Nw==", "bodyText": "so this was just a redundant put right?", "url": "https://github.com/apache/hbase/pull/2396#discussion_r488786977", "createdAt": "2020-09-15T16:06:15Z", "author": {"login": "virajjasani"}, "path": "hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestFromClientSide.java", "diffHunk": "@@ -5028,73 +5028,70 @@ public void testCheckAndDeleteWithCompareOp() throws IOException, InterruptedExc\n         FAMILY);\n     TEST_UTIL.waitTableAvailable(TableName.valueOf(\"testCheckAndDeleteWithCompareOp\"), 10000);\n \n-    Put put2 = new Put(ROW);\n-    put2.add(FAMILY, QUALIFIER, value2);\n-    table.put(put2);\n+    Put bbbb = new Put(ROW);\n+    bbbb.add(FAMILY, QUALIFIER, value2);\n \n-    Put put3 = new Put(ROW);\n-    put3.add(FAMILY, QUALIFIER, value3);\n+    Put cccc = new Put(ROW);\n+    cccc.add(FAMILY, QUALIFIER, value3);\n \n     Delete delete = new Delete(ROW);\n     delete.deleteColumns(FAMILY, QUALIFIER);\n \n     // cell = \"bbbb\", using \"aaaa\" to compare only LESS/LESS_OR_EQUAL/NOT_EQUAL\n     // turns out \"match\"\n+    table.put(bbbb);\n     boolean ok = table.checkAndDelete(ROW, FAMILY, QUALIFIER, CompareOp.GREATER, value1, delete);\n-    assertEquals(ok, false);\n+    // aaaa is less than bbbb, > || >= should be false\n+    assertFalse(ok);\n     ok = table.checkAndDelete(ROW, FAMILY, QUALIFIER, CompareOp.EQUAL, value1, delete);\n-    assertEquals(ok, false);\n+    assertFalse(ok);\n     ok = table.checkAndDelete(ROW, FAMILY, QUALIFIER, CompareOp.GREATER_OR_EQUAL, value1, delete);\n-    assertEquals(ok, false);\n+    assertFalse(ok);\n+    // aaaa is less than bbbb, < || <= should be true\n     ok = table.checkAndDelete(ROW, FAMILY, QUALIFIER, CompareOp.LESS, value1, delete);\n-    assertEquals(ok, true);\n-    table.put(put2);\n+    assertTrue(ok);\n+    table.put(bbbb);\n     ok = table.checkAndDelete(ROW, FAMILY, QUALIFIER, CompareOp.LESS_OR_EQUAL, value1, delete);\n-    assertEquals(ok, true);\n-    table.put(put2);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74345240a52ce4684f1ee9d7b84a94d432910517"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTE1NDYwMw==", "bodyText": "Yes.", "url": "https://github.com/apache/hbase/pull/2396#discussion_r489154603", "createdAt": "2020-09-16T04:29:29Z", "author": {"login": "Reidddddd"}, "path": "hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestFromClientSide.java", "diffHunk": "@@ -5028,73 +5028,70 @@ public void testCheckAndDeleteWithCompareOp() throws IOException, InterruptedExc\n         FAMILY);\n     TEST_UTIL.waitTableAvailable(TableName.valueOf(\"testCheckAndDeleteWithCompareOp\"), 10000);\n \n-    Put put2 = new Put(ROW);\n-    put2.add(FAMILY, QUALIFIER, value2);\n-    table.put(put2);\n+    Put bbbb = new Put(ROW);\n+    bbbb.add(FAMILY, QUALIFIER, value2);\n \n-    Put put3 = new Put(ROW);\n-    put3.add(FAMILY, QUALIFIER, value3);\n+    Put cccc = new Put(ROW);\n+    cccc.add(FAMILY, QUALIFIER, value3);\n \n     Delete delete = new Delete(ROW);\n     delete.deleteColumns(FAMILY, QUALIFIER);\n \n     // cell = \"bbbb\", using \"aaaa\" to compare only LESS/LESS_OR_EQUAL/NOT_EQUAL\n     // turns out \"match\"\n+    table.put(bbbb);\n     boolean ok = table.checkAndDelete(ROW, FAMILY, QUALIFIER, CompareOp.GREATER, value1, delete);\n-    assertEquals(ok, false);\n+    // aaaa is less than bbbb, > || >= should be false\n+    assertFalse(ok);\n     ok = table.checkAndDelete(ROW, FAMILY, QUALIFIER, CompareOp.EQUAL, value1, delete);\n-    assertEquals(ok, false);\n+    assertFalse(ok);\n     ok = table.checkAndDelete(ROW, FAMILY, QUALIFIER, CompareOp.GREATER_OR_EQUAL, value1, delete);\n-    assertEquals(ok, false);\n+    assertFalse(ok);\n+    // aaaa is less than bbbb, < || <= should be true\n     ok = table.checkAndDelete(ROW, FAMILY, QUALIFIER, CompareOp.LESS, value1, delete);\n-    assertEquals(ok, true);\n-    table.put(put2);\n+    assertTrue(ok);\n+    table.put(bbbb);\n     ok = table.checkAndDelete(ROW, FAMILY, QUALIFIER, CompareOp.LESS_OR_EQUAL, value1, delete);\n-    assertEquals(ok, true);\n-    table.put(put2);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODc4Njk3Nw=="}, "originalCommit": {"oid": "74345240a52ce4684f1ee9d7b84a94d432910517"}, "originalPosition": 39}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1ODM0Mjk4OnYy", "diffSide": "RIGHT", "path": "hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestFromClientSide.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxNjoxMDo1MFrOHSJYag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQwNDoyOToxNVrOHSfn2w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODc5MDEyMg==", "bodyText": "Curious to know if keeping this put operation on this line is a code improvement or has something to do with flaky behaviour?", "url": "https://github.com/apache/hbase/pull/2396#discussion_r488790122", "createdAt": "2020-09-15T16:10:50Z", "author": {"login": "virajjasani"}, "path": "hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestFromClientSide.java", "diffHunk": "@@ -5028,73 +5028,70 @@ public void testCheckAndDeleteWithCompareOp() throws IOException, InterruptedExc\n         FAMILY);\n     TEST_UTIL.waitTableAvailable(TableName.valueOf(\"testCheckAndDeleteWithCompareOp\"), 10000);\n \n-    Put put2 = new Put(ROW);\n-    put2.add(FAMILY, QUALIFIER, value2);\n-    table.put(put2);\n+    Put bbbb = new Put(ROW);\n+    bbbb.add(FAMILY, QUALIFIER, value2);\n \n-    Put put3 = new Put(ROW);\n-    put3.add(FAMILY, QUALIFIER, value3);\n+    Put cccc = new Put(ROW);\n+    cccc.add(FAMILY, QUALIFIER, value3);\n \n     Delete delete = new Delete(ROW);\n     delete.deleteColumns(FAMILY, QUALIFIER);\n \n     // cell = \"bbbb\", using \"aaaa\" to compare only LESS/LESS_OR_EQUAL/NOT_EQUAL\n     // turns out \"match\"\n+    table.put(bbbb);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74345240a52ce4684f1ee9d7b84a94d432910517"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTE1NDUyMw==", "bodyText": "Just for readability only, this was originally in line 5033. I just separated it from initialization.", "url": "https://github.com/apache/hbase/pull/2396#discussion_r489154523", "createdAt": "2020-09-16T04:29:15Z", "author": {"login": "Reidddddd"}, "path": "hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestFromClientSide.java", "diffHunk": "@@ -5028,73 +5028,70 @@ public void testCheckAndDeleteWithCompareOp() throws IOException, InterruptedExc\n         FAMILY);\n     TEST_UTIL.waitTableAvailable(TableName.valueOf(\"testCheckAndDeleteWithCompareOp\"), 10000);\n \n-    Put put2 = new Put(ROW);\n-    put2.add(FAMILY, QUALIFIER, value2);\n-    table.put(put2);\n+    Put bbbb = new Put(ROW);\n+    bbbb.add(FAMILY, QUALIFIER, value2);\n \n-    Put put3 = new Put(ROW);\n-    put3.add(FAMILY, QUALIFIER, value3);\n+    Put cccc = new Put(ROW);\n+    cccc.add(FAMILY, QUALIFIER, value3);\n \n     Delete delete = new Delete(ROW);\n     delete.deleteColumns(FAMILY, QUALIFIER);\n \n     // cell = \"bbbb\", using \"aaaa\" to compare only LESS/LESS_OR_EQUAL/NOT_EQUAL\n     // turns out \"match\"\n+    table.put(bbbb);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODc5MDEyMg=="}, "originalCommit": {"oid": "74345240a52ce4684f1ee9d7b84a94d432910517"}, "originalPosition": 20}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2620, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}