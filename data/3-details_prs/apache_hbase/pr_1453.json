{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAwNTk4NDYx", "number": 1453, "title": "HBASE-24132 Upgrade to Apache ZooKeeper 3.5.7", "bodyText": "", "createdAt": "2020-04-08T02:48:47Z", "url": "https://github.com/apache/hbase/pull/1453", "merged": true, "mergeCommit": {"oid": "ba34a2ca30d87b581de1d95ed37d75582e61303a"}, "closed": true, "closedAt": "2020-04-13T20:46:38Z", "author": {"login": "francisjjf"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcVewycAH2gAyNDAwNTk4NDYxOjk3MzY3NTMwOGMxZTAyZDU1ZGE5MTM0MDI3OGY1NDFjYjAxOTRjNWU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcXVImAAFqTM5MjQyNTIyMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "973675308c1e02d55da91340278f541cb0194c5e", "author": {"user": null}, "url": "https://github.com/apache/hbase/commit/973675308c1e02d55da91340278f541cb0194c5e", "committedDate": "2020-04-08T02:48:56Z", "message": "HBASE-24132 Upgrade to Apache ZooKeeper 3.5.7"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5ODk4Njgw", "url": "https://github.com/apache/hbase/pull/1453#pullrequestreview-389898680", "createdAt": "2020-04-08T11:48:35Z", "commit": {"oid": "973675308c1e02d55da91340278f541cb0194c5e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxMTo0ODozNlrOGCrh-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxMTo0ODozNlrOGCrh-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTQ2MzU0NA==", "bodyText": "should we also update the jline version? I think it was added because of zookeeper, see https://issues.apache.org/jira/browse/HBASE-20108\nzookeeper 3.5.7 is using jline 2.11\nhowever, if we increment the JLine version, then the assembly:single maven target will fail, as the license part in JLine pom changed a bit (they named it 'The BSD License' instead of 'BSD License'). To make it work, we need to add a new supplement to supplemental-models.xml like:\n  <supplement>\n    <project>\n      <groupId>jline</groupId>\n      <artifactId>jline</artifactId>\n      <name>JLine</name>\n      <version>2.11</version>\n      <licenses>\n        <license>\n          <name>BSD License</name>\n          <url>http://www.opensource.org/licenses/bsd-license.php</url>\n          <distribution>repo</distribution>\n        </license>\n      </licenses>\n    </project>\n  </supplement>", "url": "https://github.com/apache/hbase/pull/1453#discussion_r405463544", "createdAt": "2020-04-08T11:48:36Z", "author": {"login": "symat"}, "path": "pom.xml", "diffHunk": "@@ -1530,8 +1530,7 @@\n     <protobuf.plugin.version>0.6.1</protobuf.plugin.version>\n     <thrift.path>thrift</thrift.path>\n     <thrift.version>0.12.0</thrift.version>\n-    <zookeeper.version>3.4.14</zookeeper.version>\n-    <!-- What ZooKeeper 3.4.x depends on and nothing more -->\n+    <zookeeper.version>3.5.7</zookeeper.version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "973675308c1e02d55da91340278f541cb0194c5e"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwMTU3MjI5", "url": "https://github.com/apache/hbase/pull/1453#pullrequestreview-390157229", "createdAt": "2020-04-08T16:54:07Z", "commit": {"oid": "973675308c1e02d55da91340278f541cb0194c5e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ad46d055e1ab878a54c4c45b2099457d09b53b75", "author": {"user": null}, "url": "https://github.com/apache/hbase/commit/ad46d055e1ab878a54c4c45b2099457d09b53b75", "committedDate": "2020-04-09T03:11:14Z", "message": "HBASE-24132 Upgrade to Apache ZooKeeper 3.5.7"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "148dc5ff62535db8f34f8d7fa70b4628c1c8cdf7", "author": {"user": {"login": "francisjjf", "name": "Jianfei Jiang"}}, "url": "https://github.com/apache/hbase/commit/148dc5ff62535db8f34f8d7fa70b4628c1c8cdf7", "committedDate": "2020-04-10T07:29:22Z", "message": "Merge pull request #1 from apache/master\n\nupdate apache hbase"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxMzExMDc3", "url": "https://github.com/apache/hbase/pull/1453#pullrequestreview-391311077", "createdAt": "2020-04-10T07:41:02Z", "commit": {"oid": "ad46d055e1ab878a54c4c45b2099457d09b53b75"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQwNzo0MTowMlrOGDzkMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQwNzo0MTowMlrOGDzkMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjY0Mzc2MA==", "bodyText": "add a rs all down check here to make the testcase stable.", "url": "https://github.com/apache/hbase/pull/1453#discussion_r406643760", "createdAt": "2020-04-10T07:41:02Z", "author": {"login": "francisjjf"}, "path": "hbase-server/src/test/java/org/apache/hadoop/hbase/master/assignment/TestRegionMoveAndAbandon.java", "diffHunk": "@@ -113,6 +113,9 @@ public void test() throws Exception {\n     cluster.killRegionServer(rs2.getServerName());\n     UTIL.waitFor(30_000, () -> rs2.isStopped() && !rs2.isAlive());\n     UTIL.waitFor(30_000, () -> rs1.isStopped() && !rs1.isAlive());\n+    // make sure none of regionserver threads is alive.\n+    UTIL.waitFor(30_000, () ->\n+      UTIL.getMiniHBaseCluster().getLiveRegionServerThreads().isEmpty());\n     // Start up everything again", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ad46d055e1ab878a54c4c45b2099457d09b53b75"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyMjc5NDc3", "url": "https://github.com/apache/hbase/pull/1453#pullrequestreview-392279477", "createdAt": "2020-04-13T17:00:52Z", "commit": {"oid": "148dc5ff62535db8f34f8d7fa70b4628c1c8cdf7"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyNDI1MjIz", "url": "https://github.com/apache/hbase/pull/1453#pullrequestreview-392425223", "createdAt": "2020-04-13T20:43:44Z", "commit": {"oid": "148dc5ff62535db8f34f8d7fa70b4628c1c8cdf7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2339, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}