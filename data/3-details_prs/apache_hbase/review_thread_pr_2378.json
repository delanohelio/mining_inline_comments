{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgzOTIyOTE1", "number": 2378, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwNzoxNzoxMFrOEi_g7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwNzoxNzoyOFrOEi_hOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1MTI3NjYyOnYy", "diffSide": "RIGHT", "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwNzoxNzoxMFrOHRGxag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwNzoxODo1N1rOHRG0pQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzY5ODc5NA==", "bodyText": "Why need to expose this config? This should be a internal thing?", "url": "https://github.com/apache/hbase/pull/2378#discussion_r487698794", "createdAt": "2020-09-14T07:17:10Z", "author": {"login": "infraio"}, "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java", "diffHunk": "@@ -262,12 +264,9 @@\n     \"hbase.hregion.special.recovered.edits.dir\";\n \n   /**\n-   * Whether to use {@link MetaCellComparator} even if we are not meta region. Used when creating\n-   * master local region.\n+   * The {@link CellComparator} class we want to use. Used when creating master local region.\n    */\n-  public static final String USE_META_CELL_COMPARATOR = \"hbase.region.use.meta.cell.comparator\";\n-\n-  public static final boolean DEFAULT_USE_META_CELL_COMPARATOR = false;\n+  public static final String CELL_COMPARATOR_IMPL = \"hbase.region.cell.comparator.impl\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7525a0b8cf305ddae51ec4970a6059a30e69b700"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzY5OTYyMQ==", "bodyText": "We need to set it in MasterRegion. And HRegion is IA.Private so no big problem?", "url": "https://github.com/apache/hbase/pull/2378#discussion_r487699621", "createdAt": "2020-09-14T07:18:57Z", "author": {"login": "Apache9"}, "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java", "diffHunk": "@@ -262,12 +264,9 @@\n     \"hbase.hregion.special.recovered.edits.dir\";\n \n   /**\n-   * Whether to use {@link MetaCellComparator} even if we are not meta region. Used when creating\n-   * master local region.\n+   * The {@link CellComparator} class we want to use. Used when creating master local region.\n    */\n-  public static final String USE_META_CELL_COMPARATOR = \"hbase.region.use.meta.cell.comparator\";\n-\n-  public static final boolean DEFAULT_USE_META_CELL_COMPARATOR = false;\n+  public static final String CELL_COMPARATOR_IMPL = \"hbase.region.cell.comparator.impl\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzY5ODc5NA=="}, "originalCommit": {"oid": "7525a0b8cf305ddae51ec4970a6059a30e69b700"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1MTI3NzM2OnYy", "diffSide": "RIGHT", "path": "hbase-server/src/test/java/org/apache/hadoop/hbase/util/TestRegionMover2.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwNzoxNzoyOFrOHRGx4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwNzoyMjowMlrOHRG6xQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzY5ODkxNQ==", "bodyText": "Why this change?", "url": "https://github.com/apache/hbase/pull/2378#discussion_r487698915", "createdAt": "2020-09-14T07:17:28Z", "author": {"login": "infraio"}, "path": "hbase-server/src/test/java/org/apache/hadoop/hbase/util/TestRegionMover2.java", "diffHunk": "@@ -116,7 +116,7 @@ public void testWithMergedRegions() throws Exception {\n       .collect(Collectors.toList());\n     RegionMover.RegionMoverBuilder rmBuilder =\n       new RegionMover.RegionMoverBuilder(rsName, TEST_UTIL.getConfiguration()).ack(true)\n-        .maxthreads(8);\n+        .maxthreads(2);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7525a0b8cf305ddae51ec4970a6059a30e69b700"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzcwMTE4OQ==", "bodyText": "It is because now when moving a region at master side, we need locate meta first so we will go to master to ask the location for meta again. Now we only have 3 master rpc handlers so it is easy to dead lock if we have more than 3 parallel move requests...\nAnyway, I've also changed this UT in #2392 and added comments to say this. Let me remove the modification in this PR.", "url": "https://github.com/apache/hbase/pull/2378#discussion_r487701189", "createdAt": "2020-09-14T07:22:02Z", "author": {"login": "Apache9"}, "path": "hbase-server/src/test/java/org/apache/hadoop/hbase/util/TestRegionMover2.java", "diffHunk": "@@ -116,7 +116,7 @@ public void testWithMergedRegions() throws Exception {\n       .collect(Collectors.toList());\n     RegionMover.RegionMoverBuilder rmBuilder =\n       new RegionMover.RegionMoverBuilder(rsName, TEST_UTIL.getConfiguration()).ack(true)\n-        .maxthreads(8);\n+        .maxthreads(2);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzY5ODkxNQ=="}, "originalCommit": {"oid": "7525a0b8cf305ddae51ec4970a6059a30e69b700"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2611, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}