{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA3OTczNjAy", "number": 2578, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QxOTowNTo1N1rOExVJhg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QxOTowODo0MFrOExVNuQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIwMTYyMTgyOnYy", "diffSide": "RIGHT", "path": "hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/RpcConnection.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QxOTowNTo1N1rOHnaYhw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNFQwMTozOTozOVrOHnju1A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTA4ODc3NQ==", "bodyText": "Is there a reason this shouldn't default to 'true'? Otherwise we don't clear the cache and we should?", "url": "https://github.com/apache/hbase/pull/2578#discussion_r511088775", "createdAt": "2020-10-23T19:05:57Z", "author": {"login": "apurtell"}, "path": "hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/RpcConnection.java", "diffHunk": "@@ -126,8 +136,13 @@ protected RpcConnection(Configuration conf, HashedWheelTimer timeoutTimer, Conne\n       LOG.debug(\"Use \" + authMethod + \" authentication for service \" + remoteId.serviceName\n           + \", sasl=\" + useSasl);\n     }\n+\n     reloginMaxBackoff = conf.getInt(\"hbase.security.relogin.maxbackoff\", 5000);\n     this.remoteId = remoteId;\n+\n+    forceReloginEnabled = conf.getBoolean(\"hbase.security.force.relogin.enabled\", false);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "61fc88074569d3010ada9aa1d8de7604be69364c"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTI0MTk0MA==", "bodyText": "Yeah, that's a good point. we can actually default it to true and since the default minimum time between is anyways 10 mins which matches with that of the time in UGI for non forceful logins", "url": "https://github.com/apache/hbase/pull/2578#discussion_r511241940", "createdAt": "2020-10-24T01:39:39Z", "author": {"login": "sguggilam"}, "path": "hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/RpcConnection.java", "diffHunk": "@@ -126,8 +136,13 @@ protected RpcConnection(Configuration conf, HashedWheelTimer timeoutTimer, Conne\n       LOG.debug(\"Use \" + authMethod + \" authentication for service \" + remoteId.serviceName\n           + \", sasl=\" + useSasl);\n     }\n+\n     reloginMaxBackoff = conf.getInt(\"hbase.security.relogin.maxbackoff\", 5000);\n     this.remoteId = remoteId;\n+\n+    forceReloginEnabled = conf.getBoolean(\"hbase.security.force.relogin.enabled\", false);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTA4ODc3NQ=="}, "originalCommit": {"oid": "61fc88074569d3010ada9aa1d8de7604be69364c"}, "originalPosition": 48}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIwMTYzMDI4OnYy", "diffSide": "RIGHT", "path": "hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/RpcConnection.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QxOTowODoxNlrOHnadNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QxOToxMDo1NlrOHnak4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTA4OTk3NQ==", "bodyText": "Isn't this confusing now? Consider an operator or a tech writer looking at this code. What does \"maxbackoff\" mean? It's not the max time we would back off (5 seconds?) when now there is \"hbase.security.force.relogin.backoff\" at 600000 I assume milliseconds. These things need better naming, as an operator I have no clear idea what to do here.", "url": "https://github.com/apache/hbase/pull/2578#discussion_r511089975", "createdAt": "2020-10-23T19:08:16Z", "author": {"login": "apurtell"}, "path": "hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/RpcConnection.java", "diffHunk": "@@ -126,8 +136,13 @@ protected RpcConnection(Configuration conf, HashedWheelTimer timeoutTimer, Conne\n       LOG.debug(\"Use \" + authMethod + \" authentication for service \" + remoteId.serviceName\n           + \", sasl=\" + useSasl);\n     }\n+\n     reloginMaxBackoff = conf.getInt(\"hbase.security.relogin.maxbackoff\", 5000);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "61fc88074569d3010ada9aa1d8de7604be69364c"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTA5MTkzNg==", "bodyText": "While we are at it, please make these configuration keys string constants.", "url": "https://github.com/apache/hbase/pull/2578#discussion_r511091936", "createdAt": "2020-10-23T19:10:56Z", "author": {"login": "apurtell"}, "path": "hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/RpcConnection.java", "diffHunk": "@@ -126,8 +136,13 @@ protected RpcConnection(Configuration conf, HashedWheelTimer timeoutTimer, Conne\n       LOG.debug(\"Use \" + authMethod + \" authentication for service \" + remoteId.serviceName\n           + \", sasl=\" + useSasl);\n     }\n+\n     reloginMaxBackoff = conf.getInt(\"hbase.security.relogin.maxbackoff\", 5000);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTA4OTk3NQ=="}, "originalCommit": {"oid": "61fc88074569d3010ada9aa1d8de7604be69364c"}, "originalPosition": 45}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIwMTYzMjU3OnYy", "diffSide": "RIGHT", "path": "hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/RpcConnection.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QxOTowODo0MFrOHnaeYw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QxOTowODo0MFrOHnaeYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTA5MDI3NQ==", "bodyText": "See above comment. These config names do not help an operator to know what to do at all.", "url": "https://github.com/apache/hbase/pull/2578#discussion_r511090275", "createdAt": "2020-10-23T19:08:40Z", "author": {"login": "apurtell"}, "path": "hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/RpcConnection.java", "diffHunk": "@@ -126,8 +136,13 @@ protected RpcConnection(Configuration conf, HashedWheelTimer timeoutTimer, Conne\n       LOG.debug(\"Use \" + authMethod + \" authentication for service \" + remoteId.serviceName\n           + \", sasl=\" + useSasl);\n     }\n+\n     reloginMaxBackoff = conf.getInt(\"hbase.security.relogin.maxbackoff\", 5000);\n     this.remoteId = remoteId;\n+\n+    forceReloginEnabled = conf.getBoolean(\"hbase.security.force.relogin.enabled\", false);\n+    // Default minimum time between force relogin attempts is 10 minutes\n+    this.forceReloginBackoff = conf.getInt(\"hbase.security.force.relogin.backoff\", 10 * 60 * 1000);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "61fc88074569d3010ada9aa1d8de7604be69364c"}, "originalPosition": 50}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2458, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}