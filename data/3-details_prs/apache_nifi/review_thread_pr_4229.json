{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA4MTMzOTM3", "number": 4229, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMzoyOTo0NVrOD28W_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMzozNTo1OVrOD28eAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU4OTM4NjIyOnYy", "diffSide": "RIGHT", "path": "nifi-nar-bundles/nifi-extension-utils/nifi-prometheus-utils/src/main/java/org/apache/nifi/prometheus/util/BulletinMetricsHolder.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMzoyOTo0NVrOGM79Ug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMzoyOTo0NVrOGM79Ug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjIxODQ1MA==", "bodyText": "Can these and other holder classes be referred as MetricsRegistry (e.g. BulletinMetricsRegistry)?  It seems like that is the real underlying function it's managing.  Also would recommend these classes extend from a common abstract class which sets up what's needed for the CollectorRegistry.", "url": "https://github.com/apache/nifi/pull/4229#discussion_r416218450", "createdAt": "2020-04-27T23:29:45Z", "author": {"login": "YolandaMDavis"}, "path": "nifi-nar-bundles/nifi-extension-utils/nifi-prometheus-utils/src/main/java/org/apache/nifi/prometheus/util/BulletinMetricsHolder.java", "diffHunk": "@@ -0,0 +1,44 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.nifi.prometheus.util;\n+\n+import io.prometheus.client.CollectorRegistry;\n+import io.prometheus.client.Gauge;\n+\n+public class BulletinMetricsHolder {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4f3c016e3bf16868d48a92c0fd7e1f5186b66843"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU4OTQwMTM2OnYy", "diffSide": "RIGHT", "path": "nifi-nar-bundles/nifi-extension-utils/nifi-prometheus-utils/src/main/java/org/apache/nifi/prometheus/util/BulletinMetricsHolder.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMzozNDo1NFrOGM8FmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMzozNDo1NFrOGM8FmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjIyMDU2OA==", "bodyText": "Would also recommend instead of accessing gauges or counters directly that callers use methods which then can set labels and inc/dec/set values as needed.  This may also allow for isolated testing of the holder/registry.", "url": "https://github.com/apache/nifi/pull/4229#discussion_r416220568", "createdAt": "2020-04-27T23:34:54Z", "author": {"login": "YolandaMDavis"}, "path": "nifi-nar-bundles/nifi-extension-utils/nifi-prometheus-utils/src/main/java/org/apache/nifi/prometheus/util/BulletinMetricsHolder.java", "diffHunk": "@@ -0,0 +1,44 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.nifi.prometheus.util;\n+\n+import io.prometheus.client.CollectorRegistry;\n+import io.prometheus.client.Gauge;\n+\n+public class BulletinMetricsHolder {\n+\n+    private CollectorRegistry registry = new CollectorRegistry();\n+\n+    public BulletinMetricsHolder() {\n+    }\n+\n+    public BulletinMetricsHolder(final CollectorRegistry registry) {\n+        this();\n+        this.registry = registry;\n+    }\n+\n+    public CollectorRegistry getRegistry() {\n+        return registry;\n+    }\n+\n+    public final Gauge BULLETIN = Gauge.build()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4f3c016e3bf16868d48a92c0fd7e1f5186b66843"}, "originalPosition": 38}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU4OTQwMjU5OnYy", "diffSide": "RIGHT", "path": "nifi-nar-bundles/nifi-extension-utils/nifi-prometheus-utils/src/main/java/org/apache/nifi/prometheus/util/JvmMetricsHolder.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMzozNToyOFrOGM8GWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMzozNToyOFrOGM8GWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjIyMDc2MA==", "bodyText": "Same as above", "url": "https://github.com/apache/nifi/pull/4229#discussion_r416220760", "createdAt": "2020-04-27T23:35:28Z", "author": {"login": "YolandaMDavis"}, "path": "nifi-nar-bundles/nifi-extension-utils/nifi-prometheus-utils/src/main/java/org/apache/nifi/prometheus/util/JvmMetricsHolder.java", "diffHunk": "@@ -0,0 +1,95 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.nifi.prometheus.util;\n+\n+import io.prometheus.client.CollectorRegistry;\n+import io.prometheus.client.Gauge;\n+\n+public class JvmMetricsHolder {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4f3c016e3bf16868d48a92c0fd7e1f5186b66843"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU4OTQwMzE2OnYy", "diffSide": "RIGHT", "path": "nifi-nar-bundles/nifi-extension-utils/nifi-prometheus-utils/src/main/java/org/apache/nifi/prometheus/util/NiFiMetricsHolder.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMzozNTozN1rOGM8GoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMzozNTozN1rOGM8GoA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjIyMDgzMg==", "bodyText": "Same as above", "url": "https://github.com/apache/nifi/pull/4229#discussion_r416220832", "createdAt": "2020-04-27T23:35:37Z", "author": {"login": "YolandaMDavis"}, "path": "nifi-nar-bundles/nifi-extension-utils/nifi-prometheus-utils/src/main/java/org/apache/nifi/prometheus/util/NiFiMetricsHolder.java", "diffHunk": "@@ -0,0 +1,215 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.nifi.prometheus.util;\n+\n+import io.prometheus.client.CollectorRegistry;\n+import io.prometheus.client.Counter;\n+import io.prometheus.client.Gauge;\n+\n+public class NiFiMetricsHolder {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4f3c016e3bf16868d48a92c0fd7e1f5186b66843"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU4OTQwNDE2OnYy", "diffSide": "RIGHT", "path": "nifi-nar-bundles/nifi-extension-utils/nifi-prometheus-utils/src/main/java/org/apache/nifi/prometheus/util/ConnectionAnalyticsMetricsHolder.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMzozNTo1OVrOGM8HLg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMzozNTo1OVrOGM8HLg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjIyMDk3NA==", "bodyText": "Same as above", "url": "https://github.com/apache/nifi/pull/4229#discussion_r416220974", "createdAt": "2020-04-27T23:35:59Z", "author": {"login": "YolandaMDavis"}, "path": "nifi-nar-bundles/nifi-extension-utils/nifi-prometheus-utils/src/main/java/org/apache/nifi/prometheus/util/ConnectionAnalyticsMetricsHolder.java", "diffHunk": "@@ -0,0 +1,66 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.nifi.prometheus.util;\n+\n+import io.prometheus.client.CollectorRegistry;\n+import io.prometheus.client.Gauge;\n+\n+public class ConnectionAnalyticsMetricsHolder {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4f3c016e3bf16868d48a92c0fd7e1f5186b66843"}, "originalPosition": 22}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 178, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}