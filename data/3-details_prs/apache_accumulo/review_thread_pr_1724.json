{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk5MDI5NTE3", "number": 1724, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxNDo0MTo1N1rOErNq8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxNDo0MTo1N1rOErNq8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEzNzQ4MjA4OnYy", "diffSide": "RIGHT", "path": "assemble/build.sh", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxNDo0MTo1N1rOHd22pQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxNzoxMjo0N1rOHd9cFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTA2OTQ3Nw==", "bodyText": "The prompt to select the fingerprint is nice, this was something I missed.", "url": "https://github.com/apache/accumulo/pull/1724#discussion_r501069477", "createdAt": "2020-10-07T14:41:57Z", "author": {"login": "milleruntime"}, "path": "assemble/build.sh", "diffHunk": "@@ -72,8 +74,43 @@ gitCommits() { pretty %H \"$@\"; }\n gitCommit()  { gitCommits -n1 \"$@\"; }\n gitSubject() { pretty %s \"$@\"; }\n \n+selectFingerprint() {\n+  local f fingerprints=()\n+  if [[ $SELECTED_FINGERPRINT =~ ^[0-9a-fA-F]{40}$ ]]; then\n+    # it's already set, don't set it again\n+    return 0\n+  fi\n+  mapfile -t fingerprints < <(gpg --list-secret-keys --with-colons --with-fingerprint 2>/dev/null | awk -F: '$1 == \"fpr\" {print $10}')\n+  fingerprints+=('Other')\n+  echo\n+  echo \"Select the $(green gpg) key to use:\"\n+  COLUMNS=1\n+  select f in \"${fingerprints[@]}\"; do\n+    if [[ -z $f ]]; then\n+      return 1\n+    elif [[ $f == 'Other' ]]; then\n+      SELECTED_FINGERPRINT=$(prompter \"$(green gpg) key's $(green fingerprint)\" '[0-9a-fA-F]{40}')\n+      return 0\n+    else\n+      SELECTED_FINGERPRINT=\"$f\"\n+      return 0\n+    fi\n+  done\n+}\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fbf6780470e7c22182ef46d94b09775b2ab319b8"}, "originalPosition": 96}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTE3NzM2NA==", "bodyText": "Yeah, it helps me, too, because I have several subkeys, and before this change, it was putting all three in the email and I had to delete the extras. Now, I just have to pick the correct one. :)", "url": "https://github.com/apache/accumulo/pull/1724#discussion_r501177364", "createdAt": "2020-10-07T17:12:47Z", "author": {"login": "ctubbsii"}, "path": "assemble/build.sh", "diffHunk": "@@ -72,8 +74,43 @@ gitCommits() { pretty %H \"$@\"; }\n gitCommit()  { gitCommits -n1 \"$@\"; }\n gitSubject() { pretty %s \"$@\"; }\n \n+selectFingerprint() {\n+  local f fingerprints=()\n+  if [[ $SELECTED_FINGERPRINT =~ ^[0-9a-fA-F]{40}$ ]]; then\n+    # it's already set, don't set it again\n+    return 0\n+  fi\n+  mapfile -t fingerprints < <(gpg --list-secret-keys --with-colons --with-fingerprint 2>/dev/null | awk -F: '$1 == \"fpr\" {print $10}')\n+  fingerprints+=('Other')\n+  echo\n+  echo \"Select the $(green gpg) key to use:\"\n+  COLUMNS=1\n+  select f in \"${fingerprints[@]}\"; do\n+    if [[ -z $f ]]; then\n+      return 1\n+    elif [[ $f == 'Other' ]]; then\n+      SELECTED_FINGERPRINT=$(prompter \"$(green gpg) key's $(green fingerprint)\" '[0-9a-fA-F]{40}')\n+      return 0\n+    else\n+      SELECTED_FINGERPRINT=\"$f\"\n+      return 0\n+    fi\n+  done\n+}\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTA2OTQ3Nw=="}, "originalCommit": {"oid": "fbf6780470e7c22182ef46d94b09775b2ab319b8"}, "originalPosition": 96}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4059, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}