{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc4MTc3NDY1", "number": 1528, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxNToxMTo0NlrODivVjg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxNToxNjo0MVrODivdNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM3NzUzNzQyOnYy", "diffSide": "RIGHT", "path": "core/pom.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxNToxMTo0NlrOFuJ3wg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxNTo0MDo0MlrOFuLC0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzk0MDU0Ng==", "bodyText": "A log4j package with \"impl\" in the name makes me think this isn't public API.  Is this for public use?", "url": "https://github.com/apache/accumulo/pull/1528#discussion_r383940546", "createdAt": "2020-02-25T15:11:46Z", "author": {"login": "milleruntime"}, "path": "core/pom.xml", "diffHunk": "@@ -145,13 +145,13 @@\n       <scope>test</scope>\n     </dependency>\n     <dependency>\n-      <groupId>org.easymock</groupId>\n-      <artifactId>easymock</artifactId>\n+      <groupId>org.apache.logging.log4j</groupId>\n+      <artifactId>log4j-slf4j-impl</artifactId>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2eab3fcc5c1da5f875433c21060be55068c8fe74"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzk1OTc2Mw==", "bodyText": "It is not public API. This is the \"slf4j-api\" implementation that bridges to the \"log4j2-api\" at runtime. It is needed on the runtime classpath.", "url": "https://github.com/apache/accumulo/pull/1528#discussion_r383959763", "createdAt": "2020-02-25T15:40:42Z", "author": {"login": "ctubbsii"}, "path": "core/pom.xml", "diffHunk": "@@ -145,13 +145,13 @@\n       <scope>test</scope>\n     </dependency>\n     <dependency>\n-      <groupId>org.easymock</groupId>\n-      <artifactId>easymock</artifactId>\n+      <groupId>org.apache.logging.log4j</groupId>\n+      <artifactId>log4j-slf4j-impl</artifactId>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzk0MDU0Ng=="}, "originalCommit": {"oid": "2eab3fcc5c1da5f875433c21060be55068c8fe74"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM3NzU0ODc3OnYy", "diffSide": "LEFT", "path": "core/src/main/java/org/apache/accumulo/core/conf/Property.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxNToxNDo0NFrOFuJ_DA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxNTo0MjowMVrOFuLGxA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzk0MjQxMg==", "bodyText": "It looks like this property was only used in MiniAccumulo?", "url": "https://github.com/apache/accumulo/pull/1528#discussion_r383942412", "createdAt": "2020-02-25T15:14:44Z", "author": {"login": "milleruntime"}, "path": "core/src/main/java/org/apache/accumulo/core/conf/Property.java", "diffHunk": "@@ -544,8 +544,6 @@\n       \"Properties in this category affect the behavior of the monitor web server.\"),\n   MONITOR_PORT(\"monitor.port.client\", \"9995\", PropertyType.PORT,\n       \"The listening port for the monitor's http service\"),\n-  MONITOR_LOG4J_PORT(\"monitor.port.log4j\", \"4560\", PropertyType.PORT,\n-      \"The listening port for the monitor's log4j logging collection.\"),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2eab3fcc5c1da5f875433c21060be55068c8fe74"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzk2MDc3Mg==", "bodyText": "Yes, though users could have used it, too. It's a NOOP now. The config property does nothing.", "url": "https://github.com/apache/accumulo/pull/1528#discussion_r383960772", "createdAt": "2020-02-25T15:42:01Z", "author": {"login": "ctubbsii"}, "path": "core/src/main/java/org/apache/accumulo/core/conf/Property.java", "diffHunk": "@@ -544,8 +544,6 @@\n       \"Properties in this category affect the behavior of the monitor web server.\"),\n   MONITOR_PORT(\"monitor.port.client\", \"9995\", PropertyType.PORT,\n       \"The listening port for the monitor's http service\"),\n-  MONITOR_LOG4J_PORT(\"monitor.port.log4j\", \"4560\", PropertyType.PORT,\n-      \"The listening port for the monitor's log4j logging collection.\"),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzk0MjQxMg=="}, "originalCommit": {"oid": "2eab3fcc5c1da5f875433c21060be55068c8fe74"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM3NzU1NzAzOnYy", "diffSide": "RIGHT", "path": "pom.xml", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxNToxNjo0MVrOFuKEHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxNzo0NTo1MVrOFuPUVQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzk0MzcwOA==", "bodyText": "This looks like a new dependency.  Is this needed by log4j2?  What uses this?", "url": "https://github.com/apache/accumulo/pull/1528#discussion_r383943708", "createdAt": "2020-02-25T15:16:41Z", "author": {"login": "milleruntime"}, "path": "pom.xml", "diffHunk": "@@ -235,6 +235,11 @@\n         <artifactId>protobuf-java</artifactId>\n         <version>3.7.1</version>\n       </dependency>\n+      <dependency>\n+        <groupId>com.lmax</groupId>\n+        <artifactId>disruptor</artifactId>\n+        <version>3.4.2</version>\n+      </dependency>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2eab3fcc5c1da5f875433c21060be55068c8fe74"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzk5MDU3MQ==", "bodyText": "So, this is used as an optional dependency of log4j2, that enables the high-performance asynchronous loggers. It is required on the class path if -Dlog4j2.contextSelector=org.apache.logging.log4j.core.async.AsyncLoggerContextSelector system property is set. I set it by default in our example accumulo-env.sh, because there's no good reason to not have it, since it's ALv2 licensed has no deps.", "url": "https://github.com/apache/accumulo/pull/1528#discussion_r383990571", "createdAt": "2020-02-25T16:43:33Z", "author": {"login": "ctubbsii"}, "path": "pom.xml", "diffHunk": "@@ -235,6 +235,11 @@\n         <artifactId>protobuf-java</artifactId>\n         <version>3.7.1</version>\n       </dependency>\n+      <dependency>\n+        <groupId>com.lmax</groupId>\n+        <artifactId>disruptor</artifactId>\n+        <version>3.4.2</version>\n+      </dependency>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzk0MzcwOA=="}, "originalCommit": {"oid": "2eab3fcc5c1da5f875433c21060be55068c8fe74"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDAyOTM5Mw==", "bodyText": "The LMAX disrupter is basically a ring buffer that is designed to minimize locking and from most reports significantly improves performance. We should use it if at all possible.  Enabling it and keeping the dependency seems to make it easier on users.", "url": "https://github.com/apache/accumulo/pull/1528#discussion_r384029393", "createdAt": "2020-02-25T17:45:12Z", "author": {"login": "EdColeman"}, "path": "pom.xml", "diffHunk": "@@ -235,6 +235,11 @@\n         <artifactId>protobuf-java</artifactId>\n         <version>3.7.1</version>\n       </dependency>\n+      <dependency>\n+        <groupId>com.lmax</groupId>\n+        <artifactId>disruptor</artifactId>\n+        <version>3.4.2</version>\n+      </dependency>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzk0MzcwOA=="}, "originalCommit": {"oid": "2eab3fcc5c1da5f875433c21060be55068c8fe74"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDAyOTc4MQ==", "bodyText": "The LMAX disrupter is basically a ring buffer that is designed to minimize locking and from most reports significantly improves performance. We should use it if at all possible.  Enabling it and keeping the dependency seems to make it easier on users and should help to encourage its usage.", "url": "https://github.com/apache/accumulo/pull/1528#discussion_r384029781", "createdAt": "2020-02-25T17:45:51Z", "author": {"login": "EdColeman"}, "path": "pom.xml", "diffHunk": "@@ -235,6 +235,11 @@\n         <artifactId>protobuf-java</artifactId>\n         <version>3.7.1</version>\n       </dependency>\n+      <dependency>\n+        <groupId>com.lmax</groupId>\n+        <artifactId>disruptor</artifactId>\n+        <version>3.4.2</version>\n+      </dependency>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzk0MzcwOA=="}, "originalCommit": {"oid": "2eab3fcc5c1da5f875433c21060be55068c8fe74"}, "originalPosition": 8}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4166, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}