{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI0ODU0MzU2", "number": 1799, "title": "Add getTabletState to TabletMetadata", "bodyText": "Dropped LAST column type and included it in LOCATION type so when any\nlocation gets fetched they all do\nAdded suspend column to data that gets fetched\nAdded testLocationStates() to TabletMetadataTest", "createdAt": "2020-11-20T17:34:16Z", "url": "https://github.com/apache/accumulo/pull/1799", "merged": true, "mergeCommit": {"oid": "f279ae8aa5abde0511fdfefbcfc7338e17f4f7ec"}, "closed": true, "closedAt": "2020-11-24T15:12:38Z", "author": {"login": "milleruntime"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdea1cOAH2gAyNTI0ODU0MzU2OmYxYjJkNTNjN2E5MWI4MmQxZGJlZDQzZGU5ZjYyZWYyOGNhOWVmYmI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdfqy7wAH2gAyNTI0ODU0MzU2OmQyMmFhZjkwZDgwZDkzYjFjNTdkYWQzMGM5NjI5ZjcwMzhhMmRhMWM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f1b2d53c7a91b82d1dbed43de9f62ef28ca9efbb", "author": {"user": {"login": "milleruntime", "name": "Mike Miller"}}, "url": "https://github.com/apache/accumulo/commit/f1b2d53c7a91b82d1dbed43de9f62ef28ca9efbb", "committedDate": "2020-11-20T17:30:52Z", "message": "Add getTabletState to TabletMetadata\n\n* Added suspend column to data that gets fetched\n* Dropped LAST column type and included it in LOCATION type so when any\nlocation gets fetched they all do\n* Added testLocationStates() to TabletMetadataTest"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2NzIwNDM5", "url": "https://github.com/apache/accumulo/pull/1799#pullrequestreview-536720439", "createdAt": "2020-11-23T18:00:43Z", "commit": {"oid": "f1b2d53c7a91b82d1dbed43de9f62ef28ca9efbb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxODowMDo0M1rOH4ZP9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxODowMDo0M1rOH4ZP9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODg5NTk5MA==", "bodyText": "If there's any chance this is serialized, removing the enum changes the ordinals and could break things. Might be safer to mark it as deprecated and add a comment that it is no longer in use.", "url": "https://github.com/apache/accumulo/pull/1799#discussion_r528895990", "createdAt": "2020-11-23T18:00:43Z", "author": {"login": "ctubbsii"}, "path": "core/src/main/java/org/apache/accumulo/core/metadata/schema/TabletMetadata.java", "diffHunk": "@@ -98,11 +104,10 @@\n   }\n \n   public enum ColumnType {\n-    LOCATION,\n+    LOCATION, // includes all types in LocationType + SUSPEND\n     PREV_ROW,\n     OLD_PREV_ROW,\n     FILES,\n-    LAST,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f1b2d53c7a91b82d1dbed43de9f62ef28ca9efbb"}, "originalPosition": 45}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2NzQ4NDAy", "url": "https://github.com/apache/accumulo/pull/1799#pullrequestreview-536748402", "createdAt": "2020-11-23T18:40:04Z", "commit": {"oid": "f1b2d53c7a91b82d1dbed43de9f62ef28ca9efbb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxODo0MDowNFrOH4alVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxODo0MDowNFrOH4alVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODkxNzg0Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        families.add(TabletsSection.SuspendLocationColumn.SUSPEND_COLUMN.getColumnFamily());\n          \n          \n            \n                        families.add(SuspendLocationColumn.SUSPEND_COLUMN.getColumnFamily());", "url": "https://github.com/apache/accumulo/pull/1799#discussion_r528917846", "createdAt": "2020-11-23T18:40:04Z", "author": {"login": "ctubbsii"}, "path": "core/src/main/java/org/apache/accumulo/core/metadata/schema/TabletsMetadata.java", "diffHunk": "@@ -163,15 +163,14 @@ public Options fetch(ColumnType... colsToFetch) {\n           case FLUSH_ID:\n             qualifiers.add(FLUSH_COLUMN);\n             break;\n-          case LAST:\n-            families.add(LastLocationColumnFamily.NAME);\n-            break;\n           case LOADED:\n             families.add(BulkFileColumnFamily.NAME);\n             break;\n           case LOCATION:\n             families.add(CurrentLocationColumnFamily.NAME);\n             families.add(FutureLocationColumnFamily.NAME);\n+            families.add(LastLocationColumnFamily.NAME);\n+            families.add(TabletsSection.SuspendLocationColumn.SUSPEND_COLUMN.getColumnFamily());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f1b2d53c7a91b82d1dbed43de9f62ef28ca9efbb"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2NzQ5NjUx", "url": "https://github.com/apache/accumulo/pull/1799#pullrequestreview-536749651", "createdAt": "2020-11-23T18:41:49Z", "commit": {"oid": "f1b2d53c7a91b82d1dbed43de9f62ef28ca9efbb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxODo0MTo0OVrOH4apRQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxODo0MTo0OVrOH4apRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODkxODg1Mw==", "bodyText": "This still looks like it's fetching the \"loc\" column. It might be more clear if this enum that refers to fetching all locations, was something like ALL_LOCATIONS", "url": "https://github.com/apache/accumulo/pull/1799#discussion_r528918853", "createdAt": "2020-11-23T18:41:49Z", "author": {"login": "ctubbsii"}, "path": "core/src/main/java/org/apache/accumulo/core/metadata/schema/TabletMetadata.java", "diffHunk": "@@ -190,10 +195,15 @@ public boolean hasCurrent() {\n   }\n \n   public Location getLast() {\n-    ensureFetched(ColumnType.LAST);\n+    ensureFetched(ColumnType.LOCATION);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f1b2d53c7a91b82d1dbed43de9f62ef28ca9efbb"}, "originalPosition": 54}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2NzUzNzU4", "url": "https://github.com/apache/accumulo/pull/1799#pullrequestreview-536753758", "createdAt": "2020-11-23T18:47:50Z", "commit": {"oid": "f1b2d53c7a91b82d1dbed43de9f62ef28ca9efbb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxODo0Nzo1MFrOH4a16A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxODo0Nzo1MFrOH4a16A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODkyMjA4OA==", "bodyText": "@ctubbsii I have a comment here.  I could rename it to ALL_LOCATIONS", "url": "https://github.com/apache/accumulo/pull/1799#discussion_r528922088", "createdAt": "2020-11-23T18:47:50Z", "author": {"login": "milleruntime"}, "path": "core/src/main/java/org/apache/accumulo/core/metadata/schema/TabletMetadata.java", "diffHunk": "@@ -98,11 +104,10 @@\n   }\n \n   public enum ColumnType {\n-    LOCATION,\n+    LOCATION, // includes all types in LocationType + SUSPEND", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f1b2d53c7a91b82d1dbed43de9f62ef28ca9efbb"}, "originalPosition": 41}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "03b0e954f3a8fd16e36f6064e5b0867739622f76", "author": {"user": {"login": "milleruntime", "name": "Mike Miller"}}, "url": "https://github.com/apache/accumulo/commit/03b0e954f3a8fd16e36f6064e5b0867739622f76", "committedDate": "2020-11-23T21:53:46Z", "message": "Updates from PR\n\n* Add SUSPEND ColumnType"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4dce7c9eab23ba15bdcbd7f1e382f45c8af35c87", "author": {"user": {"login": "milleruntime", "name": "Mike Miller"}}, "url": "https://github.com/apache/accumulo/commit/4dce7c9eab23ba15bdcbd7f1e382f45c8af35c87", "committedDate": "2020-11-23T22:31:52Z", "message": "format"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2OTE2MjI1", "url": "https://github.com/apache/accumulo/pull/1799#pullrequestreview-536916225", "createdAt": "2020-11-23T23:08:50Z", "commit": {"oid": "4dce7c9eab23ba15bdcbd7f1e382f45c8af35c87"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QyMzowODo1MFrOH4i8aw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QyMzowODo1MFrOH4i8aw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTA1NDgyNw==", "bodyText": "This needs a break statement to avoid unintentional fall-through:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        families.add(SuspendLocationColumn.SUSPEND_COLUMN.getColumnFamily());\n          \n          \n            \n                        families.add(SuspendLocationColumn.SUSPEND_COLUMN.getColumnFamily());\n          \n          \n            \n                        break;", "url": "https://github.com/apache/accumulo/pull/1799#discussion_r529054827", "createdAt": "2020-11-23T23:08:50Z", "author": {"login": "ctubbsii"}, "path": "core/src/main/java/org/apache/accumulo/core/metadata/schema/TabletsMetadata.java", "diffHunk": "@@ -182,6 +183,8 @@ public Options fetch(ColumnType... colsToFetch) {\n           case SCANS:\n             families.add(ScanFileColumnFamily.NAME);\n             break;\n+          case SUSPEND:\n+            families.add(SuspendLocationColumn.SUSPEND_COLUMN.getColumnFamily());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4dce7c9eab23ba15bdcbd7f1e382f45c8af35c87"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d22aaf90d80d93b1c57dad30c9629f7038a2da1c", "author": {"user": {"login": "milleruntime", "name": "Mike Miller"}}, "url": "https://github.com/apache/accumulo/commit/d22aaf90d80d93b1c57dad30c9629f7038a2da1c", "committedDate": "2020-11-24T14:40:32Z", "message": "Update core/src/main/java/org/apache/accumulo/core/metadata/schema/TabletsMetadata.java\n\nCo-authored-by: Christopher Tubbs <ctubbsii@apache.org>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1821, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}