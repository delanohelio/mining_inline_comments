{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMyNzMwODQ4", "number": 1824, "title": "Upgrade to jline3", "bodyText": "There is still some work to be done to this pull request but I wanted to get this out there to get some feedback in some areas.\nI still need to do more robust testing on the shell and go back to a few areas that I commented out. I will also refactor/optimize areas if possible.", "createdAt": "2020-12-04T19:11:00Z", "url": "https://github.com/apache/accumulo/pull/1824", "merged": true, "mergeCommit": {"oid": "68af47a1786714c3a6d22d975bceacd58fffa513"}, "closed": true, "closedAt": "2021-02-01T18:34:38Z", "author": {"login": "Manno15"}, "timelineItems": {"totalCount": 44, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdlHdenABqjQxMDAyMzMzMTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABd17UgSgFqTU4MDYzOTcxMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "22f770b4890d79159b4503ffa660421b394bf7e9", "author": {"user": {"login": "Manno15", "name": "Jeffrey Manno"}}, "url": "https://github.com/apache/accumulo/commit/22f770b4890d79159b4503ffa660421b394bf7e9", "committedDate": "2020-12-11T12:52:48Z", "message": "Optimizations, more changes based on jline3 javadocs"}, "afterCommit": {"oid": "152e5bc99eea54ff151fc1d224f7d4fb6ed5689a", "author": {"user": {"login": "Manno15", "name": "Jeffrey Manno"}}, "url": "https://github.com/apache/accumulo/commit/152e5bc99eea54ff151fc1d224f7d4fb6ed5689a", "committedDate": "2020-12-11T12:53:46Z", "message": "Optimizations, more changes based on jline3 javadocs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6b3935fdea467464230548a3be7ba89d3f49280", "author": {"user": {"login": "Manno15", "name": "Jeffrey Manno"}}, "url": "https://github.com/apache/accumulo/commit/c6b3935fdea467464230548a3be7ba89d3f49280", "committedDate": "2020-12-11T12:56:44Z", "message": "fix conflict"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "da17a92286e640f035814aff5b45b852e10395b9", "author": {"user": {"login": "Manno15", "name": "Jeffrey Manno"}}, "url": "https://github.com/apache/accumulo/commit/da17a92286e640f035814aff5b45b852e10395b9", "committedDate": "2020-12-11T12:56:53Z", "message": "minor changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b5c390d56a04ee19d9ea1955a1092b13130080b4", "author": {"user": {"login": "Manno15", "name": "Jeffrey Manno"}}, "url": "https://github.com/apache/accumulo/commit/b5c390d56a04ee19d9ea1955a1092b13130080b4", "committedDate": "2020-12-11T12:56:53Z", "message": "changes from mailing list suggestions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7e52752033b07fe6ccc6230c04b042fb2c9df99", "author": {"user": {"login": "Manno15", "name": "Jeffrey Manno"}}, "url": "https://github.com/apache/accumulo/commit/b7e52752033b07fe6ccc6230c04b042fb2c9df99", "committedDate": "2020-12-11T12:56:53Z", "message": "changes from testing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cfdcae9ce1883be9d82789dedb3961efb0bb7f1e", "author": {"user": {"login": "Manno15", "name": "Jeffrey Manno"}}, "url": "https://github.com/apache/accumulo/commit/cfdcae9ce1883be9d82789dedb3961efb0bb7f1e", "committedDate": "2020-12-11T12:56:53Z", "message": "Optimizations, more changes based on jline3 javadocs"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "152e5bc99eea54ff151fc1d224f7d4fb6ed5689a", "author": {"user": {"login": "Manno15", "name": "Jeffrey Manno"}}, "url": "https://github.com/apache/accumulo/commit/152e5bc99eea54ff151fc1d224f7d4fb6ed5689a", "committedDate": "2020-12-11T12:53:46Z", "message": "Optimizations, more changes based on jline3 javadocs"}, "afterCommit": {"oid": "cfdcae9ce1883be9d82789dedb3961efb0bb7f1e", "author": {"user": {"login": "Manno15", "name": "Jeffrey Manno"}}, "url": "https://github.com/apache/accumulo/commit/cfdcae9ce1883be9d82789dedb3961efb0bb7f1e", "committedDate": "2020-12-11T12:56:53Z", "message": "Optimizations, more changes based on jline3 javadocs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce6bdcc47470cce89d2ad71185456fd841bf8de1", "author": {"user": {"login": "Manno15", "name": "Jeffrey Manno"}}, "url": "https://github.com/apache/accumulo/commit/ce6bdcc47470cce89d2ad71185456fd841bf8de1", "committedDate": "2020-12-11T13:27:58Z", "message": "fix build error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a0363d04a800c54c1ee23c3730794542c318d170", "author": {"user": {"login": "Manno15", "name": "Jeffrey Manno"}}, "url": "https://github.com/apache/accumulo/commit/a0363d04a800c54c1ee23c3730794542c318d170", "committedDate": "2020-12-11T14:14:32Z", "message": "fix clear command. Add some reader opts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ccc78af60a4d1fe76cba251a1cc856cb3b54372f", "author": {"user": {"login": "Manno15", "name": "Jeffrey Manno"}}, "url": "https://github.com/apache/accumulo/commit/ccc78af60a4d1fe76cba251a1cc856cb3b54372f", "committedDate": "2020-12-11T15:52:57Z", "message": "fix build error, work on more missing pieces"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "756cf19bfdd90de6207403a04d59810e15b77ac4", "author": {"user": {"login": "Manno15", "name": "Jeffrey Manno"}}, "url": "https://github.com/apache/accumulo/commit/756cf19bfdd90de6207403a04d59810e15b77ac4", "committedDate": "2020-12-14T18:22:01Z", "message": "small changes for testing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89ae18c30eb2010656dc85c5d1d0f1fef1a555e3", "author": {"user": {"login": "Manno15", "name": "Jeffrey Manno"}}, "url": "https://github.com/apache/accumulo/commit/89ae18c30eb2010656dc85c5d1d0f1fef1a555e3", "committedDate": "2020-12-22T17:24:10Z", "message": "fix history by disabling timestamp requirment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7accc062ce4a7c60a6e243214402bfe93f159e4c", "author": {"user": {"login": "Manno15", "name": "Jeffrey Manno"}}, "url": "https://github.com/apache/accumulo/commit/7accc062ce4a7c60a6e243214402bfe93f159e4c", "committedDate": "2020-12-22T17:44:36Z", "message": "Merge branch 'main' of https://github.com/apache/accumulo into upgrade_to_Jline3"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "14fd3a474ac0ee44837f9ddbecfdd4af8922d160", "author": {"user": {"login": "Manno15", "name": "Jeffrey Manno"}}, "url": "https://github.com/apache/accumulo/commit/14fd3a474ac0ee44837f9ddbecfdd4af8922d160", "committedDate": "2020-12-28T12:03:55Z", "message": "Merge branch 'main' of https://github.com/apache/accumulo into upgrade_to_Jline3"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "041e2c5debcf094ca92f1d09d4ec2c97407b398c", "author": {"user": {"login": "Manno15", "name": "Jeffrey Manno"}}, "url": "https://github.com/apache/accumulo/commit/041e2c5debcf094ca92f1d09d4ec2c97407b398c", "committedDate": "2020-12-29T13:25:45Z", "message": "formatting and removal of commented code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "35ea10f3ff3f5256e3eb6be22ea2e73e868fcac9", "author": {"user": {"login": "Manno15", "name": "Jeffrey Manno"}}, "url": "https://github.com/apache/accumulo/commit/35ea10f3ff3f5256e3eb6be22ea2e73e868fcac9", "committedDate": "2020-12-29T17:03:23Z", "message": "fix help command so quits on 'q' properly"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2b2cf4767e813382d3e21785095d3293e4f0ffea", "author": {"user": {"login": "Manno15", "name": "Jeffrey Manno"}}, "url": "https://github.com/apache/accumulo/commit/2b2cf4767e813382d3e21785095d3293e4f0ffea", "committedDate": "2020-12-29T17:25:19Z", "message": "formatting and removal of more comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "025276b4dda385c3aea7482a424215a4f4f48b04", "author": {"user": {"login": "Manno15", "name": "Jeffrey Manno"}}, "url": "https://github.com/apache/accumulo/commit/025276b4dda385c3aea7482a424215a4f4f48b04", "committedDate": "2020-12-30T18:45:38Z", "message": "fix clear command/test and history command test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "17bc02be94ec693847c4dbf78d837bf08b1cd637", "author": {"user": {"login": "Manno15", "name": "Jeffrey Manno"}}, "url": "https://github.com/apache/accumulo/commit/17bc02be94ec693847c4dbf78d837bf08b1cd637", "committedDate": "2021-01-05T14:20:05Z", "message": "fix history command test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c225e01f4aa8fb8de16bee5d6013207665c7035", "author": {"user": {"login": "Manno15", "name": "Jeffrey Manno"}}, "url": "https://github.com/apache/accumulo/commit/4c225e01f4aa8fb8de16bee5d6013207665c7035", "committedDate": "2021-01-05T15:03:38Z", "message": "fix SetIterCommand test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ccb92114d9ae1cc60a3f0c65a9a6a3ced3509ebe", "author": {"user": {"login": "Manno15", "name": "Jeffrey Manno"}}, "url": "https://github.com/apache/accumulo/commit/ccb92114d9ae1cc60a3f0c65a9a6a3ced3509ebe", "committedDate": "2021-01-05T16:02:00Z", "message": "add assumption so github QA will pass"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "61a1755547fc0f9fd6290eb4abe704b775657618", "author": {"user": {"login": "Manno15", "name": "Jeffrey Manno"}}, "url": "https://github.com/apache/accumulo/commit/61a1755547fc0f9fd6290eb4abe704b775657618", "committedDate": "2021-01-05T18:13:17Z", "message": "get everything read for review"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYyODM5NjQw", "url": "https://github.com/apache/accumulo/pull/1824#pullrequestreview-562839640", "createdAt": "2021-01-06T16:11:19Z", "commit": {"oid": "61a1755547fc0f9fd6290eb4abe704b775657618"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNlQxNjoxMToxOVrOIPJffw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNlQxNjoxMToxOVrOIPJffw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Mjc1NTA3MQ==", "bodyText": "Does anyone know why the print statements are like this as opposed to one/fewer prints with linebreaks (\\n). It seems as though there might be a reason printlns are used in this way, but it seems like it would be cleaner to consolidate this text into less prints if possible. I see that it was this way before this PR so its not quite related but I was just curious.", "url": "https://github.com/apache/accumulo/pull/1824#discussion_r552755071", "createdAt": "2021-01-06T16:11:19Z", "author": {"login": "DomGarguilo"}, "path": "server/base/src/main/java/org/apache/accumulo/server/init/Initialize.java", "diffHunk": "@@ -271,19 +273,23 @@ static boolean checkInit(VolumeManager fs, SiteConfiguration sconf, Configuratio\n       return false;\n     }\n     if (sconf.get(Property.INSTANCE_SECRET).equals(Property.INSTANCE_SECRET.getDefaultValue())) {\n-      ConsoleReader c = getConsoleReader();\n-      c.beep();\n-      c.println();\n-      c.println();\n-      c.println(\"Warning!!! Your instance secret is still set to the default,\"\n-          + \" this is not secure. We highly recommend you change it.\");\n-      c.println();\n-      c.println();\n-      c.println(\"You can change the instance secret in accumulo by using:\");\n-      c.println(\"   bin/accumulo \" + org.apache.accumulo.server.util.ChangeSecret.class.getName());\n-      c.println(\"You will also need to edit your secret in your configuration\"\n-          + \" file by adding the property instance.secret to your\"\n-          + \" accumulo.properties. Without this accumulo will not operate\" + \" correctly\");\n+      LineReader c = getLineReader();\n+      c.getTerminal().puts(InfoCmp.Capability.bell);\n+      c.getTerminal().writer().println();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "61a1755547fc0f9fd6290eb4abe704b775657618"}, "originalPosition": 53}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYyOTY1ODcx", "url": "https://github.com/apache/accumulo/pull/1824#pullrequestreview-562965871", "createdAt": "2021-01-06T19:01:10Z", "commit": {"oid": "61a1755547fc0f9fd6290eb4abe704b775657618"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNlQxOTowMToxMFrOIPSriQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNlQxOTowMToxMFrOIPSriQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjkwNTYwOQ==", "bodyText": "Could the portion before && be replaced with more?  I know this is unrelated but thought I would point it out.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    delete = line != null && (line.equalsIgnoreCase(\"y\") || line.equalsIgnoreCase(\"yes\"));\n          \n          \n            \n                    delete = more && (line.equalsIgnoreCase(\"y\") || line.equalsIgnoreCase(\"yes\"));", "url": "https://github.com/apache/accumulo/pull/1824#discussion_r552905609", "createdAt": "2021-01-06T19:01:10Z", "author": {"login": "DomGarguilo"}, "path": "shell/src/main/java/org/apache/accumulo/shell/format/DeleterFormatter.java", "diffHunk": "@@ -79,33 +79,36 @@ public String next() {\n     Mutation m = new Mutation(key.getRow());\n     String entryStr = formatEntry(next, isDoTimestamps());\n     boolean delete = force;\n-    try {\n-      if (!force) {\n-        shellState.getReader().flush();\n+    if (!force) {\n+      try {\n+        shellState.getWriter().flush();\n+        // this will cause end of file Exception for one of the formatter tests\n         String line = shellState.getReader().readLine(\"Delete { \" + entryStr + \" } ? \");\n         more = line != null;\n         delete = line != null && (line.equalsIgnoreCase(\"y\") || line.equalsIgnoreCase(\"yes\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "61a1755547fc0f9fd6290eb4abe704b775657618"}, "originalPosition": 29}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTc2NjU1NjYy", "url": "https://github.com/apache/accumulo/pull/1824#pullrequestreview-576655662", "createdAt": "2021-01-26T18:47:30Z", "commit": {"oid": "61a1755547fc0f9fd6290eb4abe704b775657618"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0yNlQxODo0NzozMFrOIalhEQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0yNlQxODo0NzozMFrOIalhEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NDc0ODU2MQ==", "bodyText": "I suggest adding a log.warn or log.error here to capture the exception within the logs.", "url": "https://github.com/apache/accumulo/pull/1824#discussion_r564748561", "createdAt": "2021-01-26T18:47:30Z", "author": {"login": "lbschanno"}, "path": "shell/src/main/java/org/apache/accumulo/shell/Shell.java", "diffHunk": "@@ -584,40 +586,39 @@ public int start() throws IOException {\n \n         // If tab completion is true we need to reset\n         if (tabCompletion) {\n-          if (userCompletor != null) {\n-            reader.removeCompleter(userCompletor);\n-          }\n-\n           userCompletor = setupCompletion();\n-          reader.addCompleter(userCompletor);\n+          ((LineReaderImpl) reader).setCompleter(userCompletor);\n         }\n \n-        reader.setPrompt(getDefaultPrompt());\n-        input = reader.readLine();\n+        input = reader.readLine(getDefaultPrompt());\n         if (input == null) {\n-          reader.println();\n           return exitCode;\n         } // User Canceled (Ctrl+D)\n \n         execCommand(input, disableAuthTimeout, false);\n       } catch (UserInterruptException uie) {\n         // User Cancelled (Ctrl+C)\n-        reader.println();\n+        writer.println();\n \n         String partialLine = uie.getPartialLine();\n         if (partialLine == null || \"\".equals(uie.getPartialLine().trim())) {\n           // No content, actually exit\n           return exitCode;\n         }\n       } finally {\n-        reader.flush();\n+        writer.flush();\n       }\n     }\n   }\n \n   public void shutdown() {\n     if (reader != null) {\n-      reader.close();\n+      try {\n+        terminal.close();\n+        reader = null;\n+      } catch (IOException e) {\n+        e.printStackTrace();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "61a1755547fc0f9fd6290eb4abe704b775657618"}, "originalPosition": 160}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTc2NzIwNTYx", "url": "https://github.com/apache/accumulo/pull/1824#pullrequestreview-576720561", "createdAt": "2021-01-26T20:09:57Z", "commit": {"oid": "61a1755547fc0f9fd6290eb4abe704b775657618"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0yNlQyMDowOTo1N1rOIaor6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0yNlQyMDowOTo1N1rOIaor6w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NDgwMDQ5MQ==", "bodyText": "Did you test CTRL-C without the lines below? Or kill -2 <pid> ?", "url": "https://github.com/apache/accumulo/pull/1824#discussion_r564800491", "createdAt": "2021-01-26T20:09:57Z", "author": {"login": "dlmarion"}, "path": "shell/src/main/java/org/apache/accumulo/shell/Shell.java", "diffHunk": "@@ -543,23 +551,17 @@ public int start() throws IOException {\n     if (!accumuloDir.exists() && !accumuloDir.mkdirs()) {\n       log.warn(\"Unable to make directory for history at {}\", accumuloDir);\n     }\n-    try {\n-      final FileHistory history = new FileHistory(new File(historyPath));\n-      reader.setHistory(history);\n-      // Add shutdown hook to flush file history, per jline javadocs\n-      Runtime.getRuntime().addShutdownHook(new Thread(() -> {\n-        try {\n-          history.flush();\n-        } catch (IOException e) {\n-          log.warn(\"Could not flush history to file.\");\n-        }\n-      }));\n-    } catch (IOException e) {\n-      log.warn(\"Unable to load history file at {}\", historyPath);\n-    }\n+\n+    // Remove Timestamps for history file. Fixes incompatibility issues\n+    reader.unsetOpt(LineReader.Option.HISTORY_TIMESTAMPED);\n+\n+    // Set history file\n+    reader.setVariable(LineReader.HISTORY_FILE, new File(historyPath));\n \n     // Turn Ctrl+C into Exception instead of JVM exit\n-    reader.setHandleUserInterrupt(true);\n+    // Not 100% sure this is necessary anymore.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "61a1755547fc0f9fd6290eb4abe704b775657618"}, "originalPosition": 108}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTc2NzMzMTIx", "url": "https://github.com/apache/accumulo/pull/1824#pullrequestreview-576733121", "createdAt": "2021-01-26T20:27:13Z", "commit": {"oid": "61a1755547fc0f9fd6290eb4abe704b775657618"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTc2NzU0NzA2", "url": "https://github.com/apache/accumulo/pull/1824#pullrequestreview-576754706", "createdAt": "2021-01-26T20:57:42Z", "commit": {"oid": "61a1755547fc0f9fd6290eb4abe704b775657618"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0yNlQyMDo1Nzo0MlrOIaqXCw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0yNlQyMToyMzowNlrOIarOug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NDgyNzkxNQ==", "bodyText": "It might make sense to assign the writer to a new variable, so that way all this line wrapping doesn't occur.\nvar w = c.getTerminal().writer();\nw.println(...);", "url": "https://github.com/apache/accumulo/pull/1824#discussion_r564827915", "createdAt": "2021-01-26T20:57:42Z", "author": {"login": "ctubbsii"}, "path": "server/base/src/main/java/org/apache/accumulo/server/init/Initialize.java", "diffHunk": "@@ -271,19 +273,23 @@ static boolean checkInit(VolumeManager fs, SiteConfiguration sconf, Configuratio\n       return false;\n     }\n     if (sconf.get(Property.INSTANCE_SECRET).equals(Property.INSTANCE_SECRET.getDefaultValue())) {\n-      ConsoleReader c = getConsoleReader();\n-      c.beep();\n-      c.println();\n-      c.println();\n-      c.println(\"Warning!!! Your instance secret is still set to the default,\"\n-          + \" this is not secure. We highly recommend you change it.\");\n-      c.println();\n-      c.println();\n-      c.println(\"You can change the instance secret in accumulo by using:\");\n-      c.println(\"   bin/accumulo \" + org.apache.accumulo.server.util.ChangeSecret.class.getName());\n-      c.println(\"You will also need to edit your secret in your configuration\"\n-          + \" file by adding the property instance.secret to your\"\n-          + \" accumulo.properties. Without this accumulo will not operate\" + \" correctly\");\n+      LineReader c = getLineReader();\n+      c.getTerminal().puts(InfoCmp.Capability.bell);\n+      c.getTerminal().writer().println();\n+      c.getTerminal().writer().println();\n+\n+      c.getTerminal().writer()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "61a1755547fc0f9fd6290eb4abe704b775657618"}, "originalPosition": 56}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NDgyODgwMA==", "bodyText": "These splits should be on separate lines. It seems like either this behavior has changed, or there's a problem with these tests.", "url": "https://github.com/apache/accumulo/pull/1824#discussion_r564828800", "createdAt": "2021-01-26T20:59:13Z", "author": {"login": "ctubbsii"}, "path": "test/src/main/java/org/apache/accumulo/test/ShellServerIT.java", "diffHunk": "@@ -895,7 +904,7 @@ public void clonetableOffline() throws Exception {\n     ts.exec(\"scan\", false, \"TableOfflineException\", true);\n     ts.exec(\"constraint --list -t \" + clone, true, \"VisibilityConstraint=2\", true);\n     ts.exec(\"config -t \" + clone + \" -np\", true, \"123M\", true);\n-    ts.exec(\"getsplits -t \" + clone, true, \"a\\nb\\nc\\n\");\n+    ts.exec(\"getsplits -t \" + clone, true, \"abc\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "61a1755547fc0f9fd6290eb4abe704b775657618"}, "originalPosition": 64}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NDgzMDA0Ng==", "bodyText": "I wonder if it would make more sense to pass in \"terminal\" instead of just the reader?", "url": "https://github.com/apache/accumulo/pull/1824#discussion_r564830046", "createdAt": "2021-01-26T21:01:19Z", "author": {"login": "ctubbsii"}, "path": "test/src/main/java/org/apache/accumulo/test/ShellServerIT.java", "diffHunk": "@@ -182,14 +186,19 @@ public String getErrorMessage() {\n     public TestOutputStream output;\n     public StringInputStream input;\n     public Shell shell;\n+    public LineReader reader;\n+    public Terminal terminal;\n \n     TestShell(String user, String rootPass, String instanceName, String zookeepers, File configFile)\n         throws IOException {\n       ClientInfo info = ClientInfo.from(configFile.toPath());\n       // start the shell\n       output = new TestOutputStream();\n       input = new StringInputStream();\n-      shell = new Shell(new ConsoleReader(input, output));\n+      terminal = new DumbTerminal(input, output);\n+      terminal.setSize(new Size(80, 24));\n+      reader = LineReaderBuilder.builder().terminal(terminal).build();\n+      shell = new Shell(reader);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "61a1755547fc0f9fd6290eb4abe704b775657618"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NDgzMDQwOQ==", "bodyText": "If these tests pass without the newline, then that seems like it would indicate a breaking change to getsplits.", "url": "https://github.com/apache/accumulo/pull/1824#discussion_r564830409", "createdAt": "2021-01-26T21:02:03Z", "author": {"login": "ctubbsii"}, "path": "test/src/main/java/org/apache/accumulo/test/ShellIT.java", "diffHunk": "@@ -207,9 +215,9 @@ public void addGetSplitsTest() throws IOException {\n     exec(\"addsplits arg\", false, \"java.lang.IllegalStateException: Not in a table context\");\n     exec(\"createtable test\", true);\n     exec(\"addsplits 1 \\\\x80\", true);\n-    exec(\"getsplits\", true, \"1\\n\\\\x80\");\n+    exec(\"getsplits\", true, \"1\\\\x80\");\n     exec(\"getsplits -m 1\", true, \"1\");\n-    exec(\"getsplits -b64\", true, \"MQ==\\ngA==\");\n+    exec(\"getsplits -b64\", true, \"MQ==gA==\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "61a1755547fc0f9fd6290eb4abe704b775657618"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NDgzMDc3NQ==", "bodyText": "What's this comment about?", "url": "https://github.com/apache/accumulo/pull/1824#discussion_r564830775", "createdAt": "2021-01-26T21:02:42Z", "author": {"login": "ctubbsii"}, "path": "shell/src/test/java/org/apache/accumulo/shell/format/DeleterFormatterTest.java", "diffHunk": "@@ -133,6 +141,7 @@ public void testNo() throws IOException {\n     assertTrue(formatter.hasNext());\n   }\n \n+  // Need to properly fix this test.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "61a1755547fc0f9fd6290eb4abe704b775657618"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NDgzMjkyNA==", "bodyText": "Is there a way to add the history directly to the terminal, and using its line reader, or do we have to create a new line reader separately from the terminal?", "url": "https://github.com/apache/accumulo/pull/1824#discussion_r564832924", "createdAt": "2021-01-26T21:06:43Z", "author": {"login": "ctubbsii"}, "path": "shell/src/test/java/org/apache/accumulo/shell/commands/HistoryCommandTest.java", "diffHunk": "@@ -56,38 +62,41 @@ public void setUp() throws Exception {\n     expect(cl.hasOption(\"np\")).andReturn(true);\n     replay(cl);\n \n-    History history = new MemoryHistory();\n+    History history = new DefaultHistory();\n     history.add(\"foo\");\n     history.add(\"bar\");\n \n     baos = new ByteArrayOutputStream();\n \n     String input = String.format(\"!1%n\"); // Construct a platform dependent new-line\n-    reader = new ConsoleReader(new ByteArrayInputStream(input.getBytes()), baos);\n-    reader.setHistory(history);\n+    terminal = TerminalBuilder.builder().system(false)\n+        .streams(new ByteArrayInputStream(input.getBytes()), baos).build();\n+    reader = LineReaderBuilder.builder().history(history).terminal(terminal).build();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "61a1755547fc0f9fd6290eb4abe704b775657618"}, "originalPosition": 56}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NDgzMzg0Nw==", "bodyText": "Is it safe to use the impl here? Doing so seems fragile.", "url": "https://github.com/apache/accumulo/pull/1824#discussion_r564833847", "createdAt": "2021-01-26T21:08:13Z", "author": {"login": "ctubbsii"}, "path": "shell/src/test/java/org/apache/accumulo/shell/ShellConfigTest.java", "diffHunk": "@@ -29,14 +29,14 @@\n import java.io.PrintStream;\n import java.nio.file.Files;\n \n+import org.jline.reader.impl.LineReaderImpl;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "61a1755547fc0f9fd6290eb4abe704b775657618"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NDgzNDQ5Nw==", "bodyText": "Which one? Why? Can it be fixed?", "url": "https://github.com/apache/accumulo/pull/1824#discussion_r564834497", "createdAt": "2021-01-26T21:09:20Z", "author": {"login": "ctubbsii"}, "path": "shell/src/main/java/org/apache/accumulo/shell/format/DeleterFormatter.java", "diffHunk": "@@ -79,33 +79,36 @@ public String next() {\n     Mutation m = new Mutation(key.getRow());\n     String entryStr = formatEntry(next, isDoTimestamps());\n     boolean delete = force;\n-    try {\n-      if (!force) {\n-        shellState.getReader().flush();\n+    if (!force) {\n+      try {\n+        shellState.getWriter().flush();\n+        // this will cause end of file Exception for one of the formatter tests", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "61a1755547fc0f9fd6290eb4abe704b775657618"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NDgzNzE4Ng==", "bodyText": "It looks like Iterator was used here previously because .entries() returned a type of Iterator. However, it now looks like .getHistory() returns a type of Iterable, which gives an opportunity to write this differently, using Java streams or something, and to avoid the use of Guava's Iterators.transform() in favor of Java built-ins. It's not important, though. It's fine either way.", "url": "https://github.com/apache/accumulo/pull/1824#discussion_r564837186", "createdAt": "2021-01-26T21:14:21Z", "author": {"login": "ctubbsii"}, "path": "shell/src/main/java/org/apache/accumulo/shell/commands/HistoryCommand.java", "diffHunk": "@@ -39,11 +39,11 @@\n   public int execute(final String fullCommand, final CommandLine cl, final Shell shellState)\n       throws IOException {\n     if (cl.hasOption(clearHist.getOpt())) {\n-      shellState.getReader().getHistory().clear();\n+      shellState.getReader().getHistory().purge();\n     } else {\n-      Iterator<Entry> source = shellState.getReader().getHistory().entries();\n+      Iterator<History.Entry> source = shellState.getReader().getHistory().iterator();\n       Iterator<String> historyIterator = Iterators.transform(source,\n-          input -> String.format(\"%d: %s\", input.index() + 1, input.value()));\n+          input -> String.format(\"%d: %s\", input.index() + 1, input.line()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "61a1755547fc0f9fd6290eb4abe704b775657618"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NDgzNzgyOA==", "bodyText": "Have you tested the bell to make sure it actually rings? (might depend on your local development environment).", "url": "https://github.com/apache/accumulo/pull/1824#discussion_r564837828", "createdAt": "2021-01-26T21:15:33Z", "author": {"login": "ctubbsii"}, "path": "shell/src/main/java/org/apache/accumulo/shell/commands/HiddenCommand.java", "diffHunk": "@@ -42,9 +43,9 @@ public String description() {\n   public int execute(final String fullCommand, final CommandLine cl, final Shell shellState)\n       throws Exception {\n     if (rand.nextInt(10) == 0) {\n-      shellState.getReader().beep();\n-      shellState.getReader().println();\n-      shellState.getReader()\n+      shellState.getTerminal().puts(InfoCmp.Capability.bell);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "61a1755547fc0f9fd6290eb4abe704b775657618"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NDgzOTg0Mg==", "bodyText": "These warning suppressions might not make sense anymore, now that you've added the appropriate generics to the candidates list.", "url": "https://github.com/apache/accumulo/pull/1824#discussion_r564839842", "createdAt": "2021-01-26T21:18:49Z", "author": {"login": "ctubbsii"}, "path": "shell/src/main/java/org/apache/accumulo/shell/ShellCompletor.java", "diffHunk": "@@ -45,13 +48,16 @@ public ShellCompletor(Token rootToken, Map<CompletionSet,Set<String>> options) {\n \n   @Override\n   @SuppressWarnings({\"unchecked\", \"rawtypes\"})", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "61a1755547fc0f9fd6290eb4abe704b775657618"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NDg0MTA1Nw==", "bodyText": "I concur. We don't generally just print stack traces with e.printStackTrace().", "url": "https://github.com/apache/accumulo/pull/1824#discussion_r564841057", "createdAt": "2021-01-26T21:21:00Z", "author": {"login": "ctubbsii"}, "path": "shell/src/main/java/org/apache/accumulo/shell/Shell.java", "diffHunk": "@@ -584,40 +586,39 @@ public int start() throws IOException {\n \n         // If tab completion is true we need to reset\n         if (tabCompletion) {\n-          if (userCompletor != null) {\n-            reader.removeCompleter(userCompletor);\n-          }\n-\n           userCompletor = setupCompletion();\n-          reader.addCompleter(userCompletor);\n+          ((LineReaderImpl) reader).setCompleter(userCompletor);\n         }\n \n-        reader.setPrompt(getDefaultPrompt());\n-        input = reader.readLine();\n+        input = reader.readLine(getDefaultPrompt());\n         if (input == null) {\n-          reader.println();\n           return exitCode;\n         } // User Canceled (Ctrl+D)\n \n         execCommand(input, disableAuthTimeout, false);\n       } catch (UserInterruptException uie) {\n         // User Cancelled (Ctrl+C)\n-        reader.println();\n+        writer.println();\n \n         String partialLine = uie.getPartialLine();\n         if (partialLine == null || \"\".equals(uie.getPartialLine().trim())) {\n           // No content, actually exit\n           return exitCode;\n         }\n       } finally {\n-        reader.flush();\n+        writer.flush();\n       }\n     }\n   }\n \n   public void shutdown() {\n     if (reader != null) {\n-      reader.close();\n+      try {\n+        terminal.close();\n+        reader = null;\n+      } catch (IOException e) {\n+        e.printStackTrace();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NDc0ODU2MQ=="}, "originalCommit": {"oid": "61a1755547fc0f9fd6290eb4abe704b775657618"}, "originalPosition": 160}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NDg0MjE3MA==", "bodyText": "This println previously existed, so the user's bash shell or whatever, wouldn't print its prompt at the end of Accumulo's prompt, when existing by closing the input stream. I assume by removing this println, that no longer occurs? If it does, that should probably be put back.", "url": "https://github.com/apache/accumulo/pull/1824#discussion_r564842170", "createdAt": "2021-01-26T21:23:06Z", "author": {"login": "ctubbsii"}, "path": "shell/src/main/java/org/apache/accumulo/shell/Shell.java", "diffHunk": "@@ -584,40 +586,39 @@ public int start() throws IOException {\n \n         // If tab completion is true we need to reset\n         if (tabCompletion) {\n-          if (userCompletor != null) {\n-            reader.removeCompleter(userCompletor);\n-          }\n-\n           userCompletor = setupCompletion();\n-          reader.addCompleter(userCompletor);\n+          ((LineReaderImpl) reader).setCompleter(userCompletor);\n         }\n \n-        reader.setPrompt(getDefaultPrompt());\n-        input = reader.readLine();\n+        input = reader.readLine(getDefaultPrompt());\n         if (input == null) {\n-          reader.println();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "61a1755547fc0f9fd6290eb4abe704b775657618"}, "originalPosition": 131}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9d0f658e598dadefa66b1c04935623f094a36c8a", "author": {"user": {"login": "Manno15", "name": "Jeffrey Manno"}}, "url": "https://github.com/apache/accumulo/commit/9d0f658e598dadefa66b1c04935623f094a36c8a", "committedDate": "2021-01-27T12:17:47Z", "message": "Merge branch 'main' of https://github.com/apache/accumulo into upgrade_to_Jline3"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "32942afdbba4b65845c5b9160e3c83474afbeffc", "author": {"user": {"login": "Manno15", "name": "Jeffrey Manno"}}, "url": "https://github.com/apache/accumulo/commit/32942afdbba4b65845c5b9160e3c83474afbeffc", "committedDate": "2021-01-27T13:47:51Z", "message": "clarify signal handler and use print exception function"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e5028316e39f4f4837d0ac6f4da4f8fd684a53f", "author": {"user": {"login": "Manno15", "name": "Jeffrey Manno"}}, "url": "https://github.com/apache/accumulo/commit/2e5028316e39f4f4837d0ac6f4da4f8fd684a53f", "committedDate": "2021-01-27T14:18:13Z", "message": "fix line wrapping"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "61d28d841e4316f9ab8bc902da276aaa4eab912b", "author": {"user": {"login": "Manno15", "name": "Jeffrey Manno"}}, "url": "https://github.com/apache/accumulo/commit/61d28d841e4316f9ab8bc902da276aaa4eab912b", "committedDate": "2021-01-27T17:18:26Z", "message": "fix shellIT and shellServerIT"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce9da51cdf75684e6b1587dd9c43543f5a263f28", "author": {"user": {"login": "Manno15", "name": "Jeffrey Manno"}}, "url": "https://github.com/apache/accumulo/commit/ce9da51cdf75684e6b1587dd9c43543f5a263f28", "committedDate": "2021-01-27T17:36:30Z", "message": "fix shellConfigTest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "057588d31ca0b1927a3e5f5fe710b0c560a33f64", "author": {"user": {"login": "Manno15", "name": "Jeffrey Manno"}}, "url": "https://github.com/apache/accumulo/commit/057588d31ca0b1927a3e5f5fe710b0c560a33f64", "committedDate": "2021-01-27T18:02:32Z", "message": "remove suprressed warnings"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "25b84d1cf06c6cc4808dcc8da569bb455a5d046a", "author": {"user": {"login": "Manno15", "name": "Jeffrey Manno"}}, "url": "https://github.com/apache/accumulo/commit/25b84d1cf06c6cc4808dcc8da569bb455a5d046a", "committedDate": "2021-01-27T18:43:37Z", "message": "catch EndOfFileException and add printLn back"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "adc4af6ab35ca4c3a3a85515d3225ce3a2cbc443", "author": {"user": {"login": "Manno15", "name": "Jeffrey Manno"}}, "url": "https://github.com/apache/accumulo/commit/adc4af6ab35ca4c3a3a85515d3225ce3a2cbc443", "committedDate": "2021-01-28T11:50:06Z", "message": "possible fix for deleterFormatterTest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e4af962b245021735f31b96baccf744d7c67198f", "author": {"user": {"login": "Manno15", "name": "Jeffrey Manno"}}, "url": "https://github.com/apache/accumulo/commit/e4af962b245021735f31b96baccf744d7c67198f", "committedDate": "2021-01-28T15:08:21Z", "message": "diable terminal from using Jansi as default"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTc4Nzk5MzU0", "url": "https://github.com/apache/accumulo/pull/1824#pullrequestreview-578799354", "createdAt": "2021-01-28T22:35:06Z", "commit": {"oid": "e4af962b245021735f31b96baccf744d7c67198f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0yOFQyMjozNTowNlrOIcNmug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0yOFQyMjozNTowNlrOIcNmug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NjQ1Mzk0Ng==", "bodyText": "I think this suggestion was made previously, but may have been overlooked.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  delete = line != null && (line.equalsIgnoreCase(\"y\") || line.equalsIgnoreCase(\"yes\"));\n          \n          \n            \n                  delete = more && (line.equalsIgnoreCase(\"y\") || line.equalsIgnoreCase(\"yes\"));", "url": "https://github.com/apache/accumulo/pull/1824#discussion_r566453946", "createdAt": "2021-01-28T22:35:06Z", "author": {"login": "ctubbsii"}, "path": "shell/src/main/java/org/apache/accumulo/shell/format/DeleterFormatter.java", "diffHunk": "@@ -79,33 +79,36 @@ public String next() {\n     Mutation m = new Mutation(key.getRow());\n     String entryStr = formatEntry(next, isDoTimestamps());\n     boolean delete = force;\n-    try {\n-      if (!force) {\n-        shellState.getReader().flush();\n-        String line = shellState.getReader().readLine(\"Delete { \" + entryStr + \" } ? \");\n-        more = line != null;\n-        delete = line != null && (line.equalsIgnoreCase(\"y\") || line.equalsIgnoreCase(\"yes\"));\n+    String line;\n+    if (!force) {\n+      try {\n+        shellState.getWriter().flush();\n+        String prompt = \"Delete { \" + entryStr + \" } ? \";\n+        line = shellState.getReader().readLine(prompt);\n+      } catch (EndOfFileException ignored) {\n+        // Reached the end of file. Line is null to keep old functionality.\n+        line = null;\n       }\n-      if (delete) {\n-        m.putDelete(key.getColumnFamily(), key.getColumnQualifier(),\n-            new ColumnVisibility(key.getColumnVisibility()), key.getTimestamp());\n-        try {\n-          writer.addMutation(m);\n-        } catch (MutationsRejectedException e) {\n-          log.error(e.toString());\n-          if (Shell.log.isTraceEnabled()) {\n-            for (ConstraintViolationSummary cvs : e.getConstraintViolationSummaries()) {\n-              log.trace(cvs.toString());\n-            }\n+      more = line != null;\n+      delete = line != null && (line.equalsIgnoreCase(\"y\") || line.equalsIgnoreCase(\"yes\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e4af962b245021735f31b96baccf744d7c67198f"}, "originalPosition": 48}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea5b2ab6d6c375838da742148785767749826b0d", "author": {"user": {"login": "Manno15", "name": "Jeffrey Manno"}}, "url": "https://github.com/apache/accumulo/commit/ea5b2ab6d6c375838da742148785767749826b0d", "committedDate": "2021-01-29T11:39:09Z", "message": "add code suggestion"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a02bff9b84c6d347f07d8e0cdfa23a997680c93b", "author": {"user": {"login": "Manno15", "name": "Jeffrey Manno"}}, "url": "https://github.com/apache/accumulo/commit/a02bff9b84c6d347f07d8e0cdfa23a997680c93b", "committedDate": "2021-01-29T12:44:06Z", "message": "edit on CTRL-D, remove redundant if statement"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTc5NjYwNzE0", "url": "https://github.com/apache/accumulo/pull/1824#pullrequestreview-579660714", "createdAt": "2021-01-29T22:25:19Z", "commit": {"oid": "a02bff9b84c6d347f07d8e0cdfa23a997680c93b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "18fede4f7186b833155d586e0888b9ef3a951da6", "author": {"user": {"login": "Manno15", "name": "Jeffrey Manno"}}, "url": "https://github.com/apache/accumulo/commit/18fede4f7186b833155d586e0888b9ef3a951da6", "committedDate": "2021-02-01T12:09:11Z", "message": "update license"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "79ecf8d5ba2074a65bb3ea832a60bad5ac0ef9e1", "author": {"user": {"login": "Manno15", "name": "Jeffrey Manno"}}, "url": "https://github.com/apache/accumulo/commit/79ecf8d5ba2074a65bb3ea832a60bad5ac0ef9e1", "committedDate": "2021-02-01T13:57:20Z", "message": "upgrade to 3.19.0"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTgwNjM5NzEx", "url": "https://github.com/apache/accumulo/pull/1824#pullrequestreview-580639711", "createdAt": "2021-02-01T18:22:01Z", "commit": {"oid": "79ecf8d5ba2074a65bb3ea832a60bad5ac0ef9e1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1670, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}