{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg4MTM5MzE4", "number": 1706, "title": "Related #1664. Allow Candidate batch size to be user configurable", "bodyText": "This is in relation to #1664. This allows the batch size for garbage collecting implemented in #1650 to be configurable.\nAfter a discussion with @ctubbsii, I determined that I couldn't fully test out the upper limits (batch sizes of 64MB for example). With that in mind, I went ahead and made it configurable but kept it at its current default batch size.", "createdAt": "2020-09-16T17:33:22Z", "url": "https://github.com/apache/accumulo/pull/1706", "merged": true, "mergeCommit": {"oid": "b79c7f02d4ab788bfa914b9cbec0f87758003942"}, "closed": true, "closedAt": "2020-09-17T16:43:34Z", "author": {"login": "Manno15"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdJflW-gH2gAyNDg4MTM5MzE4Ojk3MDhhM2I4ODQ5ZGFjMGEzOGRkZmI3ZDA0ZWVlMTM2MjYzNzk2ZGQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdJzxJyAFqTQ5MDc5MzIwMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9708a3b8849dac0a38ddfb7d04eee136263796dd", "author": {"user": {"login": "Manno15", "name": "Jeffrey Manno"}}, "url": "https://github.com/apache/accumulo/commit/9708a3b8849dac0a38ddfb7d04eee136263796dd", "committedDate": "2020-09-16T17:10:25Z", "message": "make gc_batch configurable"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5OTE1MDY0", "url": "https://github.com/apache/accumulo/pull/1706#pullrequestreview-489915064", "createdAt": "2020-09-16T18:27:31Z", "commit": {"oid": "9708a3b8849dac0a38ddfb7d04eee136263796dd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxODoyNzozMVrOHS9ITQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxODoyNzozMVrOHS9ITQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTYzNzk2NQ==", "bodyText": "If we make this property of type PropertyType.BYTES, then it may be more user friendly, and the comment about the default can be removed, because it would be redundant. If you do that, then it's a simple matter to divide by 2 to get the approximate number of characters for the count in the implementation. Using PropertyType.BYTES will also make it more user friendly, because users can use the typed-strings, like 16M or 1G or 512K when they change the configuration (and the default can be 8M).", "url": "https://github.com/apache/accumulo/pull/1706#discussion_r489637965", "createdAt": "2020-09-16T18:27:31Z", "author": {"login": "ctubbsii"}, "path": "core/src/main/java/org/apache/accumulo/core/conf/Property.java", "diffHunk": "@@ -568,6 +568,8 @@\n   // accumulo garbage collector properties\n   GC_PREFIX(\"gc.\", null, PropertyType.PREFIX,\n       \"Properties in this category affect the behavior of the accumulo garbage collector.\"),\n+  GC_CANDIDATE_BATCH_SIZE(\"gc.candidate.batch.size\", \"4000000\", PropertyType.COUNT,\n+          \"The batch size used for garbage collection. The default is effectively 8MB\"),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9708a3b8849dac0a38ddfb7d04eee136263796dd"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ac567cbf2453f190a68a1dd5c903ba2ab7a838a", "author": {"user": {"login": "Manno15", "name": "Jeffrey Manno"}}, "url": "https://github.com/apache/accumulo/commit/9ac567cbf2453f190a68a1dd5c903ba2ab7a838a", "committedDate": "2020-09-17T11:47:59Z", "message": "Property to bytes and convert to long"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8bdb74bad3494e6564a86026f318e677966089d4", "author": {"user": {"login": "Manno15", "name": "Jeffrey Manno"}}, "url": "https://github.com/apache/accumulo/commit/8bdb74bad3494e6564a86026f318e677966089d4", "committedDate": "2020-09-17T12:44:33Z", "message": "Formatting"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkwNjA2OTM4", "url": "https://github.com/apache/accumulo/pull/1706#pullrequestreview-490606938", "createdAt": "2020-09-17T13:41:30Z", "commit": {"oid": "8bdb74bad3494e6564a86026f318e677966089d4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxMzo0MTozMVrOHTiz6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxMzo0MTozMVrOHTiz6A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDI1NTMzNg==", "bodyText": "Although our type engine is case-insensitive, it is better to use upper-case, so it looks like MegaBytes, and not milliBytes. \ud83d\ude3a\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              GC_CANDIDATE_BATCH_SIZE(\"gc.candidate.batch.size\", \"8m\", PropertyType.BYTES,\n          \n          \n            \n              GC_CANDIDATE_BATCH_SIZE(\"gc.candidate.batch.size\", \"8M\", PropertyType.BYTES,", "url": "https://github.com/apache/accumulo/pull/1706#discussion_r490255336", "createdAt": "2020-09-17T13:41:31Z", "author": {"login": "ctubbsii"}, "path": "core/src/main/java/org/apache/accumulo/core/conf/Property.java", "diffHunk": "@@ -568,8 +568,8 @@\n   // accumulo garbage collector properties\n   GC_PREFIX(\"gc.\", null, PropertyType.PREFIX,\n       \"Properties in this category affect the behavior of the accumulo garbage collector.\"),\n-  GC_CANDIDATE_BATCH_SIZE(\"gc.candidate.batch.size\", \"4000000\", PropertyType.COUNT,\n-          \"The batch size used for garbage collection. The default is effectively 8MB\"),\n+  GC_CANDIDATE_BATCH_SIZE(\"gc.candidate.batch.size\", \"8m\", PropertyType.BYTES,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8bdb74bad3494e6564a86026f318e677966089d4"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee3c3bc026179142b3c236c473a8ce4053d28831", "author": {"user": {"login": "Manno15", "name": "Jeffrey Manno"}}, "url": "https://github.com/apache/accumulo/commit/ee3c3bc026179142b3c236c473a8ce4053d28831", "committedDate": "2020-09-17T13:56:00Z", "message": "capitalized that M"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkwNzkzMjAw", "url": "https://github.com/apache/accumulo/pull/1706#pullrequestreview-490793200", "createdAt": "2020-09-17T16:41:24Z", "commit": {"oid": "ee3c3bc026179142b3c236c473a8ce4053d28831"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1713, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}