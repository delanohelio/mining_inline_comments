{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgzMTM2MDc2", "number": 1541, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QyMDoxOTo0OFrODkzVnQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxODowOTo0NVrODlJhPw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5OTE2NDQ1OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/org/apache/accumulo/core/client/admin/DiskUsage.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QyMDoxOTo0OFrOFxVHvw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxNDowODozN1rOFxunFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzI3MDU5MQ==", "bodyText": "This could be reduced further using AND, something like:\nreturn Objects.equals(tables, diskUsage.tables) && Objects.equals(usage, diskUsage.usage);\nAlso, any thought to replacing hashCode at the same time to use Objects.hash(tables, usage); - that might help with the constraint that equals and hashCode are consistent.", "url": "https://github.com/apache/accumulo/pull/1541#discussion_r387270591", "createdAt": "2020-03-03T20:19:48Z", "author": {"login": "EdColeman"}, "path": "core/src/main/java/org/apache/accumulo/core/client/admin/DiskUsage.java", "diffHunk": "@@ -47,9 +48,9 @@ public boolean equals(Object o) {\n \n     DiskUsage diskUsage = (DiskUsage) o;\n \n-    if (tables != null ? !tables.equals(diskUsage.tables) : diskUsage.tables != null)\n+    if (!Objects.equals(tables, diskUsage.tables))\n       return false;\n-    return usage != null ? usage.equals(diskUsage.usage) : diskUsage.usage == null;\n+    return Objects.equals(usage, diskUsage.usage);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e13366be9d409e43b14947ab6ceb6a118c161da4"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzI5Mzc0OQ==", "bodyText": "Thanks @EdColeman . Updated to add further simplification and updated hashCode.", "url": "https://github.com/apache/accumulo/pull/1541#discussion_r387293749", "createdAt": "2020-03-03T21:07:01Z", "author": {"login": "jmark99"}, "path": "core/src/main/java/org/apache/accumulo/core/client/admin/DiskUsage.java", "diffHunk": "@@ -47,9 +48,9 @@ public boolean equals(Object o) {\n \n     DiskUsage diskUsage = (DiskUsage) o;\n \n-    if (tables != null ? !tables.equals(diskUsage.tables) : diskUsage.tables != null)\n+    if (!Objects.equals(tables, diskUsage.tables))\n       return false;\n-    return usage != null ? usage.equals(diskUsage.usage) : diskUsage.usage == null;\n+    return Objects.equals(usage, diskUsage.usage);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzI3MDU5MQ=="}, "originalCommit": {"oid": "e13366be9d409e43b14947ab6ceb6a118c161da4"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzI5NDQ0NA==", "bodyText": "I think the same thing could apply to the other 2 classes.", "url": "https://github.com/apache/accumulo/pull/1541#discussion_r387294444", "createdAt": "2020-03-03T21:08:29Z", "author": {"login": "EdColeman"}, "path": "core/src/main/java/org/apache/accumulo/core/client/admin/DiskUsage.java", "diffHunk": "@@ -47,9 +48,9 @@ public boolean equals(Object o) {\n \n     DiskUsage diskUsage = (DiskUsage) o;\n \n-    if (tables != null ? !tables.equals(diskUsage.tables) : diskUsage.tables != null)\n+    if (!Objects.equals(tables, diskUsage.tables))\n       return false;\n-    return usage != null ? usage.equals(diskUsage.usage) : diskUsage.usage == null;\n+    return Objects.equals(usage, diskUsage.usage);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzI3MDU5MQ=="}, "originalCommit": {"oid": "e13366be9d409e43b14947ab6ceb6a118c161da4"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzY4ODIxNQ==", "bodyText": "@EdColeman pushed up changes to the other two classes.", "url": "https://github.com/apache/accumulo/pull/1541#discussion_r387688215", "createdAt": "2020-03-04T14:08:37Z", "author": {"login": "jmark99"}, "path": "core/src/main/java/org/apache/accumulo/core/client/admin/DiskUsage.java", "diffHunk": "@@ -47,9 +48,9 @@ public boolean equals(Object o) {\n \n     DiskUsage diskUsage = (DiskUsage) o;\n \n-    if (tables != null ? !tables.equals(diskUsage.tables) : diskUsage.tables != null)\n+    if (!Objects.equals(tables, diskUsage.tables))\n       return false;\n-    return usage != null ? usage.equals(diskUsage.usage) : diskUsage.usage == null;\n+    return Objects.equals(usage, diskUsage.usage);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzI3MDU5MQ=="}, "originalCommit": {"oid": "e13366be9d409e43b14947ab6ceb6a118c161da4"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwMTg3OTkyOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/org/apache/accumulo/core/data/Condition.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxNDoxODo0NVrOFxu_Hw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxNDozMTowOFrOFxvfkA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzY5NDM2Nw==", "bodyText": "This was changed from instanceof to the use of getClass(), which is not the same. The latter is more narrow. I think it should be changed back to instanceof, although the check for null would be redundant, since instanceof is always false if it's null.", "url": "https://github.com/apache/accumulo/pull/1541#discussion_r387694367", "createdAt": "2020-03-04T14:18:45Z", "author": {"login": "ctubbsii"}, "path": "core/src/main/java/org/apache/accumulo/core/data/Condition.java", "diffHunk": "@@ -308,41 +309,20 @@ public Condition setIterators(IteratorSetting... iterators) {\n \n   @Override\n   public boolean equals(Object o) {\n-    if (o == this) {\n+    if (this == o)\n       return true;\n-    }\n-    if (o == null || !(o instanceof Condition)) {\n-      return false;\n-    }\n-    Condition c = (Condition) o;\n-    if (!(c.cf.equals(cf))) {\n-      return false;\n-    }\n-    if (!(c.cq.equals(cq))) {\n-      return false;\n-    }\n-    if (!(c.cv.equals(cv))) {\n+    if (o == null || getClass() != o.getClass())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6db154a88535ef0a75db052c9f218d1aa33202b5"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzcwMjY3Mg==", "bodyText": "@ctubbsii, I reverted the aforementioned check back to its original form. Thanks.", "url": "https://github.com/apache/accumulo/pull/1541#discussion_r387702672", "createdAt": "2020-03-04T14:31:08Z", "author": {"login": "jmark99"}, "path": "core/src/main/java/org/apache/accumulo/core/data/Condition.java", "diffHunk": "@@ -308,41 +309,20 @@ public Condition setIterators(IteratorSetting... iterators) {\n \n   @Override\n   public boolean equals(Object o) {\n-    if (o == this) {\n+    if (this == o)\n       return true;\n-    }\n-    if (o == null || !(o instanceof Condition)) {\n-      return false;\n-    }\n-    Condition c = (Condition) o;\n-    if (!(c.cf.equals(cf))) {\n-      return false;\n-    }\n-    if (!(c.cq.equals(cq))) {\n-      return false;\n-    }\n-    if (!(c.cv.equals(cv))) {\n+    if (o == null || getClass() != o.getClass())", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzY5NDM2Nw=="}, "originalCommit": {"oid": "6db154a88535ef0a75db052c9f218d1aa33202b5"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwMjc5ODcxOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/org/apache/accumulo/core/data/Condition.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxODowOTo0NVrOFx4Avw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxODowOTo0NVrOFx4Avw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzg0MjIzOQ==", "bodyText": "This could be simplified to:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                if (o == null || !(o instanceof Condition))\n          \n          \n            \n                if (!(o instanceof Condition))", "url": "https://github.com/apache/accumulo/pull/1541#discussion_r387842239", "createdAt": "2020-03-04T18:09:45Z", "author": {"login": "ctubbsii"}, "path": "core/src/main/java/org/apache/accumulo/core/data/Condition.java", "diffHunk": "@@ -308,41 +309,20 @@ public Condition setIterators(IteratorSetting... iterators) {\n \n   @Override\n   public boolean equals(Object o) {\n-    if (o == this) {\n+    if (this == o)\n       return true;\n-    }\n-    if (o == null || !(o instanceof Condition)) {\n-      return false;\n-    }\n-    Condition c = (Condition) o;\n-    if (!(c.cf.equals(cf))) {\n-      return false;\n-    }\n-    if (!(c.cq.equals(cq))) {\n-      return false;\n-    }\n-    if (!(c.cv.equals(cv))) {\n+    if (o == null || !(o instanceof Condition))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fcb4ef91637737ca6492591b9080001bf2a5b6ad"}, "originalPosition": 27}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4181, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}