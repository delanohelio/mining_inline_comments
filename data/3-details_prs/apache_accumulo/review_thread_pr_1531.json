{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc5MzE1NjA2", "number": 1531, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQxMzozOToyNFrODjFDkA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQyMDo1MDo1NVrODjPHXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4MTA5NTg0OnYy", "diffSide": "RIGHT", "path": "minicluster/src/main/java/org/apache/accumulo/miniclusterImpl/MiniAccumuloClusterImpl.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQxMzozOToyNFrOFurzww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQxMzo0MjowN1rOFur5tw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDQ5NjU3OQ==", "bodyText": "Does disabling this avoid executing the code that calls log4j v1?", "url": "https://github.com/apache/accumulo/pull/1531#discussion_r384496579", "createdAt": "2020-02-26T13:39:24Z", "author": {"login": "keith-turner"}, "path": "minicluster/src/main/java/org/apache/accumulo/miniclusterImpl/MiniAccumuloClusterImpl.java", "diffHunk": "@@ -404,6 +404,7 @@ public MiniAccumuloClusterImpl(MiniAccumuloConfigImpl config) throws IOException\n       zooCfg.setProperty(\"maxClientCnxns\", \"1000\");\n       zooCfg.setProperty(\"dataDir\", config.getZooKeeperDir().getAbsolutePath());\n       zooCfg.setProperty(\"4lw.commands.whitelist\", \"ruok\");\n+      zooCfg.setProperty(\"admin.enableServer\", \"false\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "48e239b63895ce24c99d5d6609401a55e95af71c"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDQ5ODEwMw==", "bodyText": "Nevermind I see the discussion on the zookeeper issue.", "url": "https://github.com/apache/accumulo/pull/1531#discussion_r384498103", "createdAt": "2020-02-26T13:42:07Z", "author": {"login": "keith-turner"}, "path": "minicluster/src/main/java/org/apache/accumulo/miniclusterImpl/MiniAccumuloClusterImpl.java", "diffHunk": "@@ -404,6 +404,7 @@ public MiniAccumuloClusterImpl(MiniAccumuloConfigImpl config) throws IOException\n       zooCfg.setProperty(\"maxClientCnxns\", \"1000\");\n       zooCfg.setProperty(\"dataDir\", config.getZooKeeperDir().getAbsolutePath());\n       zooCfg.setProperty(\"4lw.commands.whitelist\", \"ruok\");\n+      zooCfg.setProperty(\"admin.enableServer\", \"false\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDQ5NjU3OQ=="}, "originalCommit": {"oid": "48e239b63895ce24c99d5d6609401a55e95af71c"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4Mjc0Mzk3OnYy", "diffSide": "RIGHT", "path": "test/src/test/java/org/apache/accumulo/test/fate/zookeeper/ZooLockTest.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQyMDo1MDo1NVrOFu7ulg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQyMTozNjoxNVrOFu9KrA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDc1NzM5OA==", "bodyText": "Would be good to make more use of this being autoclosable but that could be a follow on ticket.", "url": "https://github.com/apache/accumulo/pull/1531#discussion_r384757398", "createdAt": "2020-02-26T20:50:55Z", "author": {"login": "milleruntime"}, "path": "test/src/test/java/org/apache/accumulo/test/fate/zookeeper/ZooLockTest.java", "diffHunk": "@@ -274,42 +274,43 @@ public void testUnexpectedEvent() throws Exception {\n     String parent = \"/zltest-\" + this.hashCode() + \"-l\" + pdCount.incrementAndGet();\n \n     ConnectedWatcher watcher = new ConnectedWatcher();\n-    ZooKeeper zk = new ZooKeeper(accumulo.getZooKeepers(), 30000, watcher);\n-    zk.addAuthInfo(\"digest\", \"accumulo:secret\".getBytes(UTF_8));\n+    try (ZooKeeper zk = new ZooKeeper(accumulo.getZooKeepers(), 30000, watcher)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ed459cd77cba482b2c970afc231ec532dc5f7633"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDc3ODIwMA==", "bodyText": "I think these might be the only places we could use try-with-resources (I only fixed these because they generated warnings). But yes, separate issue, if there's anything else to be done with this.", "url": "https://github.com/apache/accumulo/pull/1531#discussion_r384778200", "createdAt": "2020-02-26T21:30:55Z", "author": {"login": "ctubbsii"}, "path": "test/src/test/java/org/apache/accumulo/test/fate/zookeeper/ZooLockTest.java", "diffHunk": "@@ -274,42 +274,43 @@ public void testUnexpectedEvent() throws Exception {\n     String parent = \"/zltest-\" + this.hashCode() + \"-l\" + pdCount.incrementAndGet();\n \n     ConnectedWatcher watcher = new ConnectedWatcher();\n-    ZooKeeper zk = new ZooKeeper(accumulo.getZooKeepers(), 30000, watcher);\n-    zk.addAuthInfo(\"digest\", \"accumulo:secret\".getBytes(UTF_8));\n+    try (ZooKeeper zk = new ZooKeeper(accumulo.getZooKeepers(), 30000, watcher)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDc1NzM5OA=="}, "originalCommit": {"oid": "ed459cd77cba482b2c970afc231ec532dc5f7633"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDc4MDk3Mg==", "bodyText": "I looked again and it looks like this is the only use of this object other than ZooSession (where we are manually closing) so disregard.", "url": "https://github.com/apache/accumulo/pull/1531#discussion_r384780972", "createdAt": "2020-02-26T21:36:15Z", "author": {"login": "milleruntime"}, "path": "test/src/test/java/org/apache/accumulo/test/fate/zookeeper/ZooLockTest.java", "diffHunk": "@@ -274,42 +274,43 @@ public void testUnexpectedEvent() throws Exception {\n     String parent = \"/zltest-\" + this.hashCode() + \"-l\" + pdCount.incrementAndGet();\n \n     ConnectedWatcher watcher = new ConnectedWatcher();\n-    ZooKeeper zk = new ZooKeeper(accumulo.getZooKeepers(), 30000, watcher);\n-    zk.addAuthInfo(\"digest\", \"accumulo:secret\".getBytes(UTF_8));\n+    try (ZooKeeper zk = new ZooKeeper(accumulo.getZooKeepers(), 30000, watcher)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDc1NzM5OA=="}, "originalCommit": {"oid": "ed459cd77cba482b2c970afc231ec532dc5f7633"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4168, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}