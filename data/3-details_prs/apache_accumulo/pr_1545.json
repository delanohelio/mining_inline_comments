{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgzODQ4Nzgw", "number": 1545, "title": "Remove miniDFS from HalfDeadTServerIT", "bodyText": "Remove use of miniDFS from IT, because sometimes miniDFS is slow to\nstart up, and it causes the IT to time out. It is not needed for the\ntest, since the test case works fine on LocalFileSystem-based DFS.\nUse java.util.scanner to clean up boilerplate BufferedReader stuffs.\nSuppress some spammy ZK logs in IT log4j2 config.\nAdd prefix to DumpOutput class in HalfDeadTServerIT to help troubleshoot\nthe IT in future.", "createdAt": "2020-03-04T20:19:33Z", "url": "https://github.com/apache/accumulo/pull/1545", "merged": true, "mergeCommit": {"oid": "5eda6838f0127129cd67ccd9f76d124a7cc30091"}, "closed": true, "closedAt": "2020-03-05T16:18:10Z", "author": {"login": "ctubbsii"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcKcvfEAH2gAyMzgzODQ4NzgwOjEyM2FjZTQ0NTY0YjNjMmFlYjJkYzdhOGViYjI2YTI0ZGE4ZTM5NjA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcKtmX5AH2gAyMzgzODQ4NzgwOjAxMGFjYzc4OWY5MTdjYmI5ZDdiOTNmYzg4OGViOWI3Y2U1MjNkODA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "123ace44564b3c2aeb2dc7a8ebb26a24da8e3960", "author": {"user": {"login": "ctubbsii", "name": "Christopher Tubbs"}}, "url": "https://github.com/apache/accumulo/commit/123ace44564b3c2aeb2dc7a8ebb26a24da8e3960", "committedDate": "2020-03-04T20:14:32Z", "message": "Remove miniDFS from HalfDeadTServerIT\n\nRemove use of miniDFS from IT, because sometimes miniDFS is slow to\nstart up, and it causes the IT to time out. It is not needed for the\ntest, since the test case works fine on LocalFileSystem-based DFS.\n\nUse java.util.scanner to clean up boilerplate BufferedReader stuffs.\n\nSuppress some spammy ZK logs in IT log4j2 config.\n\nAdd prefix to DumpOutput class in HalfDeadTServerIT to help troubleshoot\nthe IT in future."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5MTUxMjgz", "url": "https://github.com/apache/accumulo/pull/1545#pullrequestreview-369151283", "createdAt": "2020-03-04T21:53:36Z", "commit": {"oid": "123ace44564b3c2aeb2dc7a8ebb26a24da8e3960"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5MTYxNTU1", "url": "https://github.com/apache/accumulo/pull/1545#pullrequestreview-369161555", "createdAt": "2020-03-04T22:10:42Z", "commit": {"oid": "123ace44564b3c2aeb2dc7a8ebb26a24da8e3960"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "62bdc2691fc255947cc9d3ad03ee0aa02fb29d5b", "author": {"user": {"login": "ctubbsii", "name": "Christopher Tubbs"}}, "url": "https://github.com/apache/accumulo/commit/62bdc2691fc255947cc9d3ad03ee0aa02fb29d5b", "committedDate": "2020-03-04T22:39:24Z", "message": "Build fake_disk_failure.so only once\n\nBuild shared library for fake_disk_failure.so only once, before the\nclass.\n\nUse ProcessBuilder to connect the IO when building the shared library,\nso any errors from the compiler are shown on the IT's console capture.\n\nRemove compilation warning about unused variable in fake_disk_failure.c"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5NDg4MDI3", "url": "https://github.com/apache/accumulo/pull/1545#pullrequestreview-369488027", "createdAt": "2020-03-05T11:20:25Z", "commit": {"oid": "62bdc2691fc255947cc9d3ad03ee0aa02fb29d5b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxMToyMDoyNVrOFyPxMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxMToyMDoyNVrOFyPxMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODIzMTQ3Mg==", "bodyText": "If the \"so\" exists, do you even need to rec-compile? I guess you run the risk of it being corrupt or an incorrect so, but a clean should remove this as well.", "url": "https://github.com/apache/accumulo/pull/1545#discussion_r388231472", "createdAt": "2020-03-05T11:20:25Z", "author": {"login": "phrocker"}, "path": "test/src/main/java/org/apache/accumulo/test/functional/HalfDeadTServerIT.java", "diffHunk": "@@ -63,7 +66,29 @@ protected int defaultTimeoutSeconds() {\n     return 4 * 60;\n   }\n \n-  class DumpOutput extends Daemon {\n+  private static final AtomicBoolean sharedLibBuilt = new AtomicBoolean(false);\n+\n+  @SuppressFBWarnings(value = \"COMMAND_INJECTION\",\n+      justification = \"command executed is not from user input\")\n+  @BeforeClass\n+  public static void buildSharedLib() throws IOException, InterruptedException {\n+    String root = System.getProperty(\"user.dir\");\n+    String source = root + \"/src/test/c/fake_disk_failure.c\";\n+    String lib = root + \"/target/fake_disk_failure.so\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "62bdc2691fc255947cc9d3ad03ee0aa02fb29d5b"}, "originalPosition": 37}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "010acc789f917cbb9d7b93fc888eb9b7ce523d80", "author": {"user": {"login": "ctubbsii", "name": "Christopher Tubbs"}}, "url": "https://github.com/apache/accumulo/commit/010acc789f917cbb9d7b93fc888eb9b7ce523d80", "committedDate": "2020-03-05T15:52:58Z", "message": "Add comments for HalfDeadTServerIT\n\nAdd comments and make some variables a bit more explicit."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1869, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}