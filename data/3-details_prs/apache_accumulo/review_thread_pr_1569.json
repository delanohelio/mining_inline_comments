{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkyNjk1Njcz", "number": 1569, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQxMjo1ODo0MVrODqx4yA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNDozNTozOVrODrPgsA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2MTg0MTM2OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/org/apache/accumulo/core/conf/Property.java", "isResolved": false, "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQxMjo1ODo0MVrOF6vAdw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQwNTozOToyNVrOF7MwqQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzEzMTg5NQ==", "bodyText": "I wonder if we can combine this with MASTER_BULK_RENAME_THREADS and just have one common value for renames in the Master.", "url": "https://github.com/apache/accumulo/pull/1569#discussion_r397131895", "createdAt": "2020-03-24T12:58:41Z", "author": {"login": "milleruntime"}, "path": "core/src/main/java/org/apache/accumulo/core/conf/Property.java", "diffHunk": "@@ -251,6 +251,9 @@\n   MASTER_BULK_RENAME_THREADS(\"master.bulk.rename.threadpool.size\", \"20\", PropertyType.COUNT,\n       \"The number of threads to use when moving user files to bulk ingest \"\n           + \"directories under accumulo control\"),\n+  MASTER_IMPORTTABLE_RENAME_THREADS(\"master.importtable.rename.threadpool.size\", \"20\",\n+      PropertyType.COUNT,\n+      \"The number of threads to use when renaming user files when importing a table.\"),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "efb5aedcda621b2c1365840257a95684e0e274a0"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzE4MjMzMA==", "bodyText": "Could deprecate the bulk.rename prop and have a new master.import.rename.threadpool.size.   Could use the AccumuloConfiguration.resolve() method in the bulk import code to get the correct property.", "url": "https://github.com/apache/accumulo/pull/1569#discussion_r397182330", "createdAt": "2020-03-24T14:11:59Z", "author": {"login": "keith-turner"}, "path": "core/src/main/java/org/apache/accumulo/core/conf/Property.java", "diffHunk": "@@ -251,6 +251,9 @@\n   MASTER_BULK_RENAME_THREADS(\"master.bulk.rename.threadpool.size\", \"20\", PropertyType.COUNT,\n       \"The number of threads to use when moving user files to bulk ingest \"\n           + \"directories under accumulo control\"),\n+  MASTER_IMPORTTABLE_RENAME_THREADS(\"master.importtable.rename.threadpool.size\", \"20\",\n+      PropertyType.COUNT,\n+      \"The number of threads to use when renaming user files when importing a table.\"),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzEzMTg5NQ=="}, "originalCommit": {"oid": "efb5aedcda621b2c1365840257a95684e0e274a0"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzIwNDc4MA==", "bodyText": "I was thinking deprecate master.bulk.rename.threadpool.size and create something more generic like master.rename.threadpool.size that could be used anywhere in the Master where we want to optimize renames.  Just doing a quick search for \"fs.rename\" the new and old Bulk imports could use this property as well.  My point is I don't think it need to have a property for each fate operation.  If a user is having issues with NN renames, they would benefit in the other operations as well.", "url": "https://github.com/apache/accumulo/pull/1569#discussion_r397204780", "createdAt": "2020-03-24T14:40:50Z", "author": {"login": "milleruntime"}, "path": "core/src/main/java/org/apache/accumulo/core/conf/Property.java", "diffHunk": "@@ -251,6 +251,9 @@\n   MASTER_BULK_RENAME_THREADS(\"master.bulk.rename.threadpool.size\", \"20\", PropertyType.COUNT,\n       \"The number of threads to use when moving user files to bulk ingest \"\n           + \"directories under accumulo control\"),\n+  MASTER_IMPORTTABLE_RENAME_THREADS(\"master.importtable.rename.threadpool.size\", \"20\",\n+      PropertyType.COUNT,\n+      \"The number of threads to use when renaming user files when importing a table.\"),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzEzMTg5NQ=="}, "originalCommit": {"oid": "efb5aedcda621b2c1365840257a95684e0e274a0"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzIyNTAzMw==", "bodyText": "Thank you Mike and Keith - I'll lean on your experience to guide me accordingly. I conceptually agree having one property would be better.", "url": "https://github.com/apache/accumulo/pull/1569#discussion_r397225033", "createdAt": "2020-03-24T15:05:50Z", "author": {"login": "arvindshmicrosoft"}, "path": "core/src/main/java/org/apache/accumulo/core/conf/Property.java", "diffHunk": "@@ -251,6 +251,9 @@\n   MASTER_BULK_RENAME_THREADS(\"master.bulk.rename.threadpool.size\", \"20\", PropertyType.COUNT,\n       \"The number of threads to use when moving user files to bulk ingest \"\n           + \"directories under accumulo control\"),\n+  MASTER_IMPORTTABLE_RENAME_THREADS(\"master.importtable.rename.threadpool.size\", \"20\",\n+      PropertyType.COUNT,\n+      \"The number of threads to use when renaming user files when importing a table.\"),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzEzMTg5NQ=="}, "originalCommit": {"oid": "efb5aedcda621b2c1365840257a95684e0e274a0"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzI1OTQ5Nw==", "bodyText": "Can I proceed to revise this PR with the following:\n\ndeprecate master.bulk.rename.threadpool.size and recommend master.rename.threadpool.size as the new property\nupdate the importdirectory (bulk) code with the appropriate code to resolve the new property and warn about deprecation\nupdate the changed importtable code to leverage the new property\n\nPlease let me know.", "url": "https://github.com/apache/accumulo/pull/1569#discussion_r397259497", "createdAt": "2020-03-24T15:49:27Z", "author": {"login": "arvindshmicrosoft"}, "path": "core/src/main/java/org/apache/accumulo/core/conf/Property.java", "diffHunk": "@@ -251,6 +251,9 @@\n   MASTER_BULK_RENAME_THREADS(\"master.bulk.rename.threadpool.size\", \"20\", PropertyType.COUNT,\n       \"The number of threads to use when moving user files to bulk ingest \"\n           + \"directories under accumulo control\"),\n+  MASTER_IMPORTTABLE_RENAME_THREADS(\"master.importtable.rename.threadpool.size\", \"20\",\n+      PropertyType.COUNT,\n+      \"The number of threads to use when renaming user files when importing a table.\"),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzEzMTg5NQ=="}, "originalCommit": {"oid": "efb5aedcda621b2c1365840257a95684e0e274a0"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzI5MzE4OA==", "bodyText": "Sounds good.  After you finish this PR, I can create a follow on ticket to utilize the new property across the other FATE operations that perform renames.", "url": "https://github.com/apache/accumulo/pull/1569#discussion_r397293188", "createdAt": "2020-03-24T16:31:51Z", "author": {"login": "milleruntime"}, "path": "core/src/main/java/org/apache/accumulo/core/conf/Property.java", "diffHunk": "@@ -251,6 +251,9 @@\n   MASTER_BULK_RENAME_THREADS(\"master.bulk.rename.threadpool.size\", \"20\", PropertyType.COUNT,\n       \"The number of threads to use when moving user files to bulk ingest \"\n           + \"directories under accumulo control\"),\n+  MASTER_IMPORTTABLE_RENAME_THREADS(\"master.importtable.rename.threadpool.size\", \"20\",\n+      PropertyType.COUNT,\n+      \"The number of threads to use when renaming user files when importing a table.\"),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzEzMTg5NQ=="}, "originalCommit": {"oid": "efb5aedcda621b2c1365840257a95684e0e274a0"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzYxOTM2OQ==", "bodyText": "The changes are implemented. Please take a look. I was also curious about what you meant by \"other FATE operations that perform renames\". I think bulk ingest (importdirectory) is one, which is addressed in this PR now, but would like to know where else (of course, I'll leave those changes to a later change as you suggested).", "url": "https://github.com/apache/accumulo/pull/1569#discussion_r397619369", "createdAt": "2020-03-25T05:39:25Z", "author": {"login": "arvindshmicrosoft"}, "path": "core/src/main/java/org/apache/accumulo/core/conf/Property.java", "diffHunk": "@@ -251,6 +251,9 @@\n   MASTER_BULK_RENAME_THREADS(\"master.bulk.rename.threadpool.size\", \"20\", PropertyType.COUNT,\n       \"The number of threads to use when moving user files to bulk ingest \"\n           + \"directories under accumulo control\"),\n+  MASTER_IMPORTTABLE_RENAME_THREADS(\"master.importtable.rename.threadpool.size\", \"20\",\n+      PropertyType.COUNT,\n+      \"The number of threads to use when renaming user files when importing a table.\"),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzEzMTg5NQ=="}, "originalCommit": {"oid": "efb5aedcda621b2c1365840257a95684e0e274a0"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2NjY4Mjc4OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/org/apache/accumulo/core/conf/Property.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNDozMzoyMFrOF7d_NA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNjoyMzoyNVrOF7jXZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzkwMTYyMA==", "bodyText": "Can this be removed?", "url": "https://github.com/apache/accumulo/pull/1569#discussion_r397901620", "createdAt": "2020-03-25T14:33:20Z", "author": {"login": "keith-turner"}, "path": "core/src/main/java/org/apache/accumulo/core/conf/Property.java", "diffHunk": "@@ -248,9 +248,16 @@\n       \"The number of threads to use when coordinating a bulk import.\"),\n   MASTER_BULK_TIMEOUT(\"master.bulk.timeout\", \"5m\", PropertyType.TIMEDURATION,\n       \"The time to wait for a tablet server to process a bulk import request\"),\n+  MASTER_RENAME_THREADS(\"master.rename.threadpool.size\", \"20\", PropertyType.COUNT,\n+      \"The number of threads to use when renaming user files during table import or bulk ingest.\"),\n+  @Deprecated\n+  @ReplacedBy(property = MASTER_RENAME_THREADS)\n   MASTER_BULK_RENAME_THREADS(\"master.bulk.rename.threadpool.size\", \"20\", PropertyType.COUNT,\n       \"The number of threads to use when moving user files to bulk ingest \"\n           + \"directories under accumulo control\"),\n+  MASTER_IMPORTTABLE_RENAME_THREADS(\"master.importtable.rename.threadpool.size\", \"20\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8b530e0598f9831b8e343c7a7f56703ffc45bd92"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzkxOTQ1Nw==", "bodyText": "So sorry, I could have sworn I took care of that. Will address. Sorry again!", "url": "https://github.com/apache/accumulo/pull/1569#discussion_r397919457", "createdAt": "2020-03-25T14:55:20Z", "author": {"login": "arvindshmicrosoft"}, "path": "core/src/main/java/org/apache/accumulo/core/conf/Property.java", "diffHunk": "@@ -248,9 +248,16 @@\n       \"The number of threads to use when coordinating a bulk import.\"),\n   MASTER_BULK_TIMEOUT(\"master.bulk.timeout\", \"5m\", PropertyType.TIMEDURATION,\n       \"The time to wait for a tablet server to process a bulk import request\"),\n+  MASTER_RENAME_THREADS(\"master.rename.threadpool.size\", \"20\", PropertyType.COUNT,\n+      \"The number of threads to use when renaming user files during table import or bulk ingest.\"),\n+  @Deprecated\n+  @ReplacedBy(property = MASTER_RENAME_THREADS)\n   MASTER_BULK_RENAME_THREADS(\"master.bulk.rename.threadpool.size\", \"20\", PropertyType.COUNT,\n       \"The number of threads to use when moving user files to bulk ingest \"\n           + \"directories under accumulo control\"),\n+  MASTER_IMPORTTABLE_RENAME_THREADS(\"master.importtable.rename.threadpool.size\", \"20\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzkwMTYyMA=="}, "originalCommit": {"oid": "8b530e0598f9831b8e343c7a7f56703ffc45bd92"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzk4OTczNA==", "bodyText": "Done.", "url": "https://github.com/apache/accumulo/pull/1569#discussion_r397989734", "createdAt": "2020-03-25T16:23:25Z", "author": {"login": "arvindshmicrosoft"}, "path": "core/src/main/java/org/apache/accumulo/core/conf/Property.java", "diffHunk": "@@ -248,9 +248,16 @@\n       \"The number of threads to use when coordinating a bulk import.\"),\n   MASTER_BULK_TIMEOUT(\"master.bulk.timeout\", \"5m\", PropertyType.TIMEDURATION,\n       \"The time to wait for a tablet server to process a bulk import request\"),\n+  MASTER_RENAME_THREADS(\"master.rename.threadpool.size\", \"20\", PropertyType.COUNT,\n+      \"The number of threads to use when renaming user files during table import or bulk ingest.\"),\n+  @Deprecated\n+  @ReplacedBy(property = MASTER_RENAME_THREADS)\n   MASTER_BULK_RENAME_THREADS(\"master.bulk.rename.threadpool.size\", \"20\", PropertyType.COUNT,\n       \"The number of threads to use when moving user files to bulk ingest \"\n           + \"directories under accumulo control\"),\n+  MASTER_IMPORTTABLE_RENAME_THREADS(\"master.importtable.rename.threadpool.size\", \"20\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzkwMTYyMA=="}, "originalCommit": {"oid": "8b530e0598f9831b8e343c7a7f56703ffc45bd92"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2NjY5NDg4OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/org/apache/accumulo/core/conf/Property.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNDozNTozOVrOF7eGvA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNjoyODo1MFrOF7jnnw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzkwMzU0OA==", "bodyText": "Some of the deprecated properties have the following in their description.  I think this is nice for the generated documentation.\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  \"The number of threads to use when moving user files to bulk ingest \"\n          \n          \n            \n                  \"This property is deprecated since 2.1.0. The number of threads to use when moving user files to bulk ingest \"", "url": "https://github.com/apache/accumulo/pull/1569#discussion_r397903548", "createdAt": "2020-03-25T14:35:39Z", "author": {"login": "keith-turner"}, "path": "core/src/main/java/org/apache/accumulo/core/conf/Property.java", "diffHunk": "@@ -248,9 +248,16 @@\n       \"The number of threads to use when coordinating a bulk import.\"),\n   MASTER_BULK_TIMEOUT(\"master.bulk.timeout\", \"5m\", PropertyType.TIMEDURATION,\n       \"The time to wait for a tablet server to process a bulk import request\"),\n+  MASTER_RENAME_THREADS(\"master.rename.threadpool.size\", \"20\", PropertyType.COUNT,\n+      \"The number of threads to use when renaming user files during table import or bulk ingest.\"),\n+  @Deprecated\n+  @ReplacedBy(property = MASTER_RENAME_THREADS)\n   MASTER_BULK_RENAME_THREADS(\"master.bulk.rename.threadpool.size\", \"20\", PropertyType.COUNT,\n       \"The number of threads to use when moving user files to bulk ingest \"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8b530e0598f9831b8e343c7a7f56703ffc45bd92"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzk5Mzg4Nw==", "bodyText": "Done.", "url": "https://github.com/apache/accumulo/pull/1569#discussion_r397993887", "createdAt": "2020-03-25T16:28:50Z", "author": {"login": "arvindshmicrosoft"}, "path": "core/src/main/java/org/apache/accumulo/core/conf/Property.java", "diffHunk": "@@ -248,9 +248,16 @@\n       \"The number of threads to use when coordinating a bulk import.\"),\n   MASTER_BULK_TIMEOUT(\"master.bulk.timeout\", \"5m\", PropertyType.TIMEDURATION,\n       \"The time to wait for a tablet server to process a bulk import request\"),\n+  MASTER_RENAME_THREADS(\"master.rename.threadpool.size\", \"20\", PropertyType.COUNT,\n+      \"The number of threads to use when renaming user files during table import or bulk ingest.\"),\n+  @Deprecated\n+  @ReplacedBy(property = MASTER_RENAME_THREADS)\n   MASTER_BULK_RENAME_THREADS(\"master.bulk.rename.threadpool.size\", \"20\", PropertyType.COUNT,\n       \"The number of threads to use when moving user files to bulk ingest \"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzkwMzU0OA=="}, "originalCommit": {"oid": "8b530e0598f9831b8e343c7a7f56703ffc45bd92"}, "originalPosition": 9}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4218, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}