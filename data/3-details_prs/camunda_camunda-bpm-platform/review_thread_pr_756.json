{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzNTI1NDEz", "number": 756, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNjowNjoxOFrODrSNzg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNjozMDoyMVrODrS7GQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2NzEzODA2OnYy", "diffSide": "RIGHT", "path": "engine-rest/engine-rest-openapi/src/main/templates/models/org/camunda/bpm/engine/rest/dto/metrics/MetricsIntervalResultDto.ftl", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNjowNjoxOFrOF7ijuw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNjowNjoxOFrOF7ijuw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzk3NjUwNw==", "bodyText": "I think that this is supposed to be:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    type = \"number\"\n          \n          \n            \n                    type = \"integer\"\n          \n          \n            \n                    format = \"int64\"", "url": "https://github.com/camunda/camunda-bpm-platform/pull/756#discussion_r397976507", "createdAt": "2020-03-25T16:06:18Z", "author": {"login": "koevskinikola"}, "path": "engine-rest/engine-rest-openapi/src/main/templates/models/org/camunda/bpm/engine/rest/dto/metrics/MetricsIntervalResultDto.ftl", "diffHunk": "@@ -0,0 +1,25 @@\n+<@lib.dto>\n+\n+    <@lib.property\n+        name = \"timestamp\"\n+        type = \"string\"\n+        format = \"date-time\"\n+        desc = \"The interval timestamp.\"/>\n+\n+    <@lib.property\n+        name = \"name\"\n+        type = \"string\"\n+        desc = \"The name of the metric.\"/>\n+\n+    <@lib.property\n+        name = \"reporter\"\n+        type = \"string\"\n+        desc = \"The reporter of the metric. `null` if the metrics are aggregated by reporter.\"/>\n+\n+    <@lib.property\n+        name = \"value\"\n+        type = \"number\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "79da2e1f6cde037e8e42b5ba499024cb672e077e"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2NzE3Mjg1OnYy", "diffSide": "RIGHT", "path": "engine-rest/engine-rest-openapi/src/main/templates/models/org/camunda/bpm/engine/rest/dto/metrics/MetricsResultDto.ftl", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNjoxMzoxNlrOF7i5WA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNjoxMzoxNlrOF7i5WA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzk4MjA0MA==", "bodyText": "From what I can see from the (only) usage, this is a Java long (see here). The OpenAPI spec defines the number type as float/double. So we need to set this to:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    type = \"number\"\n          \n          \n            \n                    type = \"integer\"\n          \n          \n            \n                    format = \"int64\"", "url": "https://github.com/camunda/camunda-bpm-platform/pull/756#discussion_r397982040", "createdAt": "2020-03-25T16:13:16Z", "author": {"login": "koevskinikola"}, "path": "engine-rest/engine-rest-openapi/src/main/templates/models/org/camunda/bpm/engine/rest/dto/metrics/MetricsResultDto.ftl", "diffHunk": "@@ -0,0 +1,9 @@\n+<@lib.dto>\n+\n+    <@lib.property\n+        name = \"result\"\n+        type = \"number\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "79da2e1f6cde037e8e42b5ba499024cb672e077e"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2NzIwMzg5OnYy", "diffSide": "RIGHT", "path": "engine-rest/engine-rest-openapi/src/main/templates/paths/metrics/get.ftl", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNjoxOTo0OVrOF7jMwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQwNzozMTo0MFrOF76OXw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzk4NzAwOQ==", "bodyText": "Shouldn't we define these as enumValues? The values are limited by the constants in the Metrics class", "url": "https://github.com/camunda/camunda-bpm-platform/pull/756#discussion_r397987009", "createdAt": "2020-03-25T16:19:49Z", "author": {"login": "koevskinikola"}, "path": "engine-rest/engine-rest-openapi/src/main/templates/paths/metrics/get.ftl", "diffHunk": "@@ -0,0 +1,92 @@\n+{\n+  <@lib.endpointInfo\n+      id = \"interval\"\n+      tag = \"Metrics\"\n+      desc = \"Retrieves a list of metrics, aggregated for a given interval.\" />\n+\n+  \"parameters\" : [\n+\n+    <@lib.parameter\n+        name = \"name\"\n+        location = \"query\"\n+        type = \"string\"\n+        desc = \"The name of the metric. Supported names:\n+                `activity-instance-start`,\n+                `activity-instance-end`,\n+                `job-acquisition-attempt`,\n+                `job-acquired-success`,\n+                `job-acquired-failure`,\n+                `job-execution-rejected`,\n+                `job-successful`,\n+                `job-failed`,\n+                `job-locked-exclusive`,\n+                `executed-decision-elements`,\n+                `history-cleanup-removed-process-instances`,\n+                `history-cleanup-removed-case-instances`,\n+                `history-cleanup-removed-decision-instances`,\n+                `history-cleanup-removed-batch-operations`\" />", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "79da2e1f6cde037e8e42b5ba499024cb672e077e"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODM2NDI1NQ==", "bodyText": "Jep, I agree", "url": "https://github.com/camunda/camunda-bpm-platform/pull/756#discussion_r398364255", "createdAt": "2020-03-26T07:31:40Z", "author": {"login": "mboskamp"}, "path": "engine-rest/engine-rest-openapi/src/main/templates/paths/metrics/get.ftl", "diffHunk": "@@ -0,0 +1,92 @@\n+{\n+  <@lib.endpointInfo\n+      id = \"interval\"\n+      tag = \"Metrics\"\n+      desc = \"Retrieves a list of metrics, aggregated for a given interval.\" />\n+\n+  \"parameters\" : [\n+\n+    <@lib.parameter\n+        name = \"name\"\n+        location = \"query\"\n+        type = \"string\"\n+        desc = \"The name of the metric. Supported names:\n+                `activity-instance-start`,\n+                `activity-instance-end`,\n+                `job-acquisition-attempt`,\n+                `job-acquired-success`,\n+                `job-acquired-failure`,\n+                `job-execution-rejected`,\n+                `job-successful`,\n+                `job-failed`,\n+                `job-locked-exclusive`,\n+                `executed-decision-elements`,\n+                `history-cleanup-removed-process-instances`,\n+                `history-cleanup-removed-case-instances`,\n+                `history-cleanup-removed-decision-instances`,\n+                `history-cleanup-removed-batch-operations`\" />", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzk4NzAwOQ=="}, "originalCommit": {"oid": "79da2e1f6cde037e8e42b5ba499024cb672e077e"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2NzI0Mzc5OnYy", "diffSide": "RIGHT", "path": "engine-rest/engine-rest-openapi/src/main/templates/paths/metrics/get.ftl", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNjoyODoxMFrOF7jlww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNjoyODoxMFrOF7jlww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzk5MzQxMQ==", "bodyText": "I thinl that we should add that the defaultValue is 900:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    desc = \"The interval for which the metrics should be aggregated. Time unit is seconds.\n          \n          \n            \n                    defaultValue = \"900\"\n          \n          \n            \n                    desc = \"The interval for which the metrics should be aggregated. Time unit is seconds.", "url": "https://github.com/camunda/camunda-bpm-platform/pull/756#discussion_r397993411", "createdAt": "2020-03-25T16:28:10Z", "author": {"login": "koevskinikola"}, "path": "engine-rest/engine-rest-openapi/src/main/templates/paths/metrics/get.ftl", "diffHunk": "@@ -0,0 +1,92 @@\n+{\n+  <@lib.endpointInfo\n+      id = \"interval\"\n+      tag = \"Metrics\"\n+      desc = \"Retrieves a list of metrics, aggregated for a given interval.\" />\n+\n+  \"parameters\" : [\n+\n+    <@lib.parameter\n+        name = \"name\"\n+        location = \"query\"\n+        type = \"string\"\n+        desc = \"The name of the metric. Supported names:\n+                `activity-instance-start`,\n+                `activity-instance-end`,\n+                `job-acquisition-attempt`,\n+                `job-acquired-success`,\n+                `job-acquired-failure`,\n+                `job-execution-rejected`,\n+                `job-successful`,\n+                `job-failed`,\n+                `job-locked-exclusive`,\n+                `executed-decision-elements`,\n+                `history-cleanup-removed-process-instances`,\n+                `history-cleanup-removed-case-instances`,\n+                `history-cleanup-removed-decision-instances`,\n+                `history-cleanup-removed-batch-operations`\" />\n+\n+    <@lib.parameter\n+        name = \"reporter\"\n+        location = \"query\"\n+        type = \"string\"\n+        desc = \"The name of the reporter (host), on which the metrics was logged. This will have\n+                value provided by the [hostname configuration property](${docsUrl}/reference/deployment-descriptors/tags/process-engine/#hostname).\" />\n+\n+    <@lib.parameter\n+        name = \"startDate\"\n+        location = \"query\"\n+        type = \"string\"\n+        format = \"date-time\"\n+        desc = \"The start date (inclusive).\"/>\n+\n+    <@lib.parameter\n+        name = \"endDate\"\n+        location = \"query\"\n+        type = \"string\"\n+        format = \"date-time\"\n+        desc = \"The end date (exclusive).\"/>\n+\n+    <#include \"/lib/commons/pagination-params.ftl\" >\n+\n+    <@lib.parameter\n+        name = \"interval\"\n+        location = \"query\"\n+        type = \"string\"\n+        desc = \"The interval for which the metrics should be aggregated. Time unit is seconds.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "79da2e1f6cde037e8e42b5ba499024cb672e077e"}, "originalPosition": 56}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2NzI1NDAxOnYy", "diffSide": "RIGHT", "path": "engine-rest/engine-rest-openapi/src/main/templates/paths/metrics/{metrics-name}/sum/get.ftl", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNjozMDoyMVrOF7jsMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNjozMDoyMVrOF7jsMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzk5NTA1Nw==", "bodyText": "Same as above, these can be defined as enumValues.", "url": "https://github.com/camunda/camunda-bpm-platform/pull/756#discussion_r397995057", "createdAt": "2020-03-25T16:30:21Z", "author": {"login": "koevskinikola"}, "path": "engine-rest/engine-rest-openapi/src/main/templates/paths/metrics/{metrics-name}/sum/get.ftl", "diffHunk": "@@ -0,0 +1,59 @@\n+{\n+  <@lib.endpointInfo\n+      id = \"getMetrics\"\n+      tag = \"Metrics\"\n+      desc = \"Retrieves the `sum` (count) for a given metric.\" />\n+\n+  \"parameters\" : [\n+\n+    <@lib.parameter\n+        name = \"metrics-name\"\n+        location = \"path\"\n+        required = true\n+        type = \"string\"\n+        desc = \"The name of the metric. Supported names:\n+                `activity-instance-start`,\n+                `activity-instance-end`,\n+                `job-acquisition-attempt`,\n+                `job-acquired-success`,\n+                `job-acquired-failure`,\n+                `job-execution-rejected`,\n+                `job-successful`,\n+                `job-failed`,\n+                `job-locked-exclusive`,\n+                `executed-decision-elements`,\n+                `history-cleanup-removed-process-instances`,\n+                `history-cleanup-removed-case-instances`,\n+                `history-cleanup-removed-decision-instances`,\n+                `history-cleanup-removed-batch-operations`\" />", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "79da2e1f6cde037e8e42b5ba499024cb672e077e"}, "originalPosition": 28}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4558, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}