{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM0NTIxODA2", "number": 1176, "title": "fix(searches): show only latest result", "bodyText": "related to CAM-12838", "createdAt": "2020-12-08T15:18:26Z", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1176", "merged": true, "mergeCommit": {"oid": "999b4e5b08b51a49d27d9d390eb17b2c25a48362"}, "closed": true, "closedAt": "2021-01-14T15:03:46Z", "author": {"login": "marstamm"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdmDi98AFqTU1MTE4MzkyMA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdwBLwogFqTU2ODA2OTk1Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxMTgzOTIw", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1176#pullrequestreview-551183920", "createdAt": "2020-12-14T09:28:20Z", "commit": {"oid": "1f89b97cd838e17924d57fa8e054e6502b61bf07"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQwOToyODoyMFrOIFHS5w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQwOTo0NTo1OFrOIFIEFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjIzMzMxOQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              default: createNewContext\n          \n          \n            \n              default: debouncePromiseFactory", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1176#discussion_r542233319", "createdAt": "2020-12-14T09:28:20Z", "author": {"login": "tasso94"}, "path": "webapps/ui/cockpit/src/legacy/client/scripts/directives/incidentsTab.js", "diffHunk": "@@ -19,6 +19,10 @@ var angular = require(\"angular\");\n \n var template = require(\"./incidents-tab.html.js\");\n var inspectTemplate = require(\"./incidents-tab-stacktrace.html.js\");\n+const {\n+  default: createNewContext", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1f89b97cd838e17924d57fa8e054e6502b61bf07"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjIzMzM5Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            const debouncePromise = createNewContext();\n          \n          \n            \n            const debouncePromise = debouncePromiseFactory();", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1176#discussion_r542233392", "createdAt": "2020-12-14T09:28:27Z", "author": {"login": "tasso94"}, "path": "webapps/ui/cockpit/src/legacy/client/scripts/directives/incidentsTab.js", "diffHunk": "@@ -19,6 +19,10 @@ var angular = require(\"angular\");\n \n var template = require(\"./incidents-tab.html.js\");\n var inspectTemplate = require(\"./incidents-tab-stacktrace.html.js\");\n+const {\n+  default: createNewContext\n+} = require(\"../../../../modules/debouncePromise.js\");\n+const debouncePromise = createNewContext();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1f89b97cd838e17924d57fa8e054e6502b61bf07"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjIzMzkwNQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              default: createNewContext\n          \n          \n            \n              default: debouncePromiseFactory", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1176#discussion_r542233905", "createdAt": "2020-12-14T09:29:14Z", "author": {"login": "tasso94"}, "path": "webapps/ui/cockpit/src/legacy/plugins/base/app/views/processDefinition/processInstanceTable.js", "diffHunk": "@@ -19,6 +19,11 @@ var angular = require(\"angular\");\n \n var template = require(\"./process-instance-table.html.js\");\n var searchConfig = require(\"./process-instance-search-config.json\");\n+const {\n+  default: createNewContext", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1f89b97cd838e17924d57fa8e054e6502b61bf07"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjIzMzk5MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            const debouncePromise = createNewContext();\n          \n          \n            \n            const debouncePromise = debouncePromiseFactory();", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1176#discussion_r542233991", "createdAt": "2020-12-14T09:29:21Z", "author": {"login": "tasso94"}, "path": "webapps/ui/cockpit/src/legacy/plugins/base/app/views/processDefinition/processInstanceTable.js", "diffHunk": "@@ -19,6 +19,11 @@ var angular = require(\"angular\");\n \n var template = require(\"./process-instance-table.html.js\");\n var searchConfig = require(\"./process-instance-search-config.json\");\n+const {\n+  default: createNewContext\n+} = require(\"../../../../../../modules/debouncePromise.js\");\n+\n+const debouncePromise = createNewContext();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1f89b97cd838e17924d57fa8e054e6502b61bf07"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjI0MzU4Nw==", "bodyText": "In case we are in phase $apply or $digest the $scope.$apply() throws an exception. We could avoid it with the following check:\nvar phase = $scope.$root.$$phase;\nif (phase !== \"$apply\" && phase !== \"$digest\") {\n  $scope.$apply();\n}\nSince we don't respect this at many places in the code base, feel free to skip this review hint.", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1176#discussion_r542243587", "createdAt": "2020-12-14T09:42:39Z", "author": {"login": "tasso94"}, "path": "webapps/ui/cockpit/src/legacy/plugins/base/app/views/processDefinition/processInstanceTable.js", "diffHunk": "@@ -100,10 +105,14 @@ module.exports = [\n               .$promise.then(function(data) {\n                 var total = data.count;\n \n-                return PluginProcessInstanceResource.query(pagingParams, params)\n-                  .$promise.then(function(data) {\n+                return debouncePromise(\n+                  PluginProcessInstanceResource.query(pagingParams, params)\n+                    .$promise\n+                )\n+                  .then(function(data) {\n                     $scope.processInstances = data;\n                     $scope.loadingState = data.length ? \"LOADED\" : \"EMPTY\";\n+                    $scope.$apply();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1f89b97cd838e17924d57fa8e054e6502b61bf07"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjI0NTkxMA==", "bodyText": "Why do we need this logic twice? Isn't it already present in SDK-JS?", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1176#discussion_r542245910", "createdAt": "2020-12-14T09:45:58Z", "author": {"login": "tasso94"}, "path": "webapps/ui/cockpit/src/modules/debouncePromise.js", "diffHunk": "@@ -0,0 +1,34 @@\n+/*\n+ * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n+ * under one or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information regarding copyright\n+ * ownership. Camunda licenses this file to you under the Apache License,\n+ * Version 2.0; you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+export default function debouncePromiseFactory() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1f89b97cd838e17924d57fa8e054e6502b61bf07"}, "originalPosition": 18}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1f89b97cd838e17924d57fa8e054e6502b61bf07", "author": {"user": {"login": "marstamm", "name": "Martin Stamm"}}, "url": "https://github.com/camunda/camunda-bpm-platform/commit/1f89b97cd838e17924d57fa8e054e6502b61bf07", "committedDate": "2020-12-08T13:42:11Z", "message": "fix(searches): show only latest result\n\nrelated to CAM-12838"}, "afterCommit": {"oid": "74581d9437cc87b28699921e86c31a121090390e", "author": {"user": {"login": "marstamm", "name": "Martin Stamm"}}, "url": "https://github.com/camunda/camunda-bpm-platform/commit/74581d9437cc87b28699921e86c31a121090390e", "committedDate": "2021-01-07T13:15:57Z", "message": "Adjust to angularJS and implement review hints"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "65bc38dce9094fb3e4597b43742ebd45423a2efc", "author": {"user": {"login": "marstamm", "name": "Martin Stamm"}}, "url": "https://github.com/camunda/camunda-bpm-platform/commit/65bc38dce9094fb3e4597b43742ebd45423a2efc", "committedDate": "2021-01-12T09:12:45Z", "message": "Adjust to angularJS and implement review hints"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fc0db69be8b50243fa0637c72884bd01ca0e0d79", "author": {"user": {"login": "marstamm", "name": "Martin Stamm"}}, "url": "https://github.com/camunda/camunda-bpm-platform/commit/fc0db69be8b50243fa0637c72884bd01ca0e0d79", "committedDate": "2021-01-13T12:34:17Z", "message": "fix(searchQueries): remove race condition\n\nrelated to CAM-12838"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "74581d9437cc87b28699921e86c31a121090390e", "author": {"user": {"login": "marstamm", "name": "Martin Stamm"}}, "url": "https://github.com/camunda/camunda-bpm-platform/commit/74581d9437cc87b28699921e86c31a121090390e", "committedDate": "2021-01-07T13:15:57Z", "message": "Adjust to angularJS and implement review hints"}, "afterCommit": {"oid": "fc0db69be8b50243fa0637c72884bd01ca0e0d79", "author": {"user": {"login": "marstamm", "name": "Martin Stamm"}}, "url": "https://github.com/camunda/camunda-bpm-platform/commit/fc0db69be8b50243fa0637c72884bd01ca0e0d79", "committedDate": "2021-01-13T12:34:17Z", "message": "fix(searchQueries): remove race condition\n\nrelated to CAM-12838"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY4MDY5OTU3", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1176#pullrequestreview-568069957", "createdAt": "2021-01-14T09:48:21Z", "commit": {"oid": "fc0db69be8b50243fa0637c72884bd01ca0e0d79"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2092, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}