{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg0ODE1NTcy", "number": 709, "reviewThreads": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQwNjo0NToyOFrODsiADA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQwODo1MjozN1rODsktFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ4MDIxMDA0OnYy", "diffSide": "RIGHT", "path": "engine/src/main/java/org/camunda/bpm/engine/externaltask/ExternalTaskQuery.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQwNjo0NToyOFrOF9bltQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxMDoxNjo0MVrOF9i6Pw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTk1OTQ3Nw==", "bodyText": "This newly introduced API method is not covered by dedicated test cases.", "url": "https://github.com/camunda/camunda-bpm-platform/pull/709#discussion_r399959477", "createdAt": "2020-03-30T06:45:28Z", "author": {"login": "tasso94"}, "path": "engine/src/main/java/org/camunda/bpm/engine/externaltask/ExternalTaskQuery.java", "diffHunk": "@@ -31,6 +32,11 @@\n    */\n   ExternalTaskQuery externalTaskId(String externalTaskId);\n \n+  /**\n+   * Only select external tasks with any of the given ids\n+   */\n+  ExternalTaskQuery externalTaskIdIn(Set<String> externalTaskIds);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "139ded1e3c1ef981dd5aa1b8a34346461e3f0476"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDA3OTQyMw==", "bodyText": "Tests added \ud83d\udc4d", "url": "https://github.com/camunda/camunda-bpm-platform/pull/709#discussion_r400079423", "createdAt": "2020-03-30T10:16:41Z", "author": {"login": "tmetzke"}, "path": "engine/src/main/java/org/camunda/bpm/engine/externaltask/ExternalTaskQuery.java", "diffHunk": "@@ -31,6 +32,11 @@\n    */\n   ExternalTaskQuery externalTaskId(String externalTaskId);\n \n+  /**\n+   * Only select external tasks with any of the given ids\n+   */\n+  ExternalTaskQuery externalTaskIdIn(Set<String> externalTaskIds);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTk1OTQ3Nw=="}, "originalCommit": {"oid": "139ded1e3c1ef981dd5aa1b8a34346461e3f0476"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ4MDIxMjUxOnYy", "diffSide": "LEFT", "path": "engine/src/main/java/org/camunda/bpm/engine/impl/batch/deletion/DeleteHistoricProcessInstanceBatchConfigurationJsonConverter.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQwNjo0NjoyOVrOF9bnJg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQwNzozODoxM1rOF9dFEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTk1OTg0Ng==", "bodyText": "Can we try to avoid reorganising imports?", "url": "https://github.com/camunda/camunda-bpm-platform/pull/709#discussion_r399959846", "createdAt": "2020-03-30T06:46:29Z", "author": {"login": "tasso94"}, "path": "engine/src/main/java/org/camunda/bpm/engine/impl/batch/deletion/DeleteHistoricProcessInstanceBatchConfigurationJsonConverter.java", "diffHunk": "@@ -16,12 +16,15 @@\n  */\n package org.camunda.bpm.engine.impl.batch.deletion;\n \n+import java.util.List;\n+\n import org.camunda.bpm.engine.impl.batch.BatchConfiguration;\n+import org.camunda.bpm.engine.impl.batch.DeploymentMappingJsonConverter;\n+import org.camunda.bpm.engine.impl.batch.DeploymentMappings;\n import org.camunda.bpm.engine.impl.json.JsonObjectConverter;\n import org.camunda.bpm.engine.impl.util.JsonUtil;\n-import com.google.gson.JsonObject;\n \n-import java.util.List;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "139ded1e3c1ef981dd5aa1b8a34346461e3f0476"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTk3NzkzNw==", "bodyText": "I changed my IDE setup a bit to avoid automatic reorganization in more situations, thanks for the hint. Would you like me to revert some of the import reorganizations that already happened in this PR? If that helps with the PR, I can surely do that.", "url": "https://github.com/camunda/camunda-bpm-platform/pull/709#discussion_r399977937", "createdAt": "2020-03-30T07:26:32Z", "author": {"login": "tmetzke"}, "path": "engine/src/main/java/org/camunda/bpm/engine/impl/batch/deletion/DeleteHistoricProcessInstanceBatchConfigurationJsonConverter.java", "diffHunk": "@@ -16,12 +16,15 @@\n  */\n package org.camunda.bpm.engine.impl.batch.deletion;\n \n+import java.util.List;\n+\n import org.camunda.bpm.engine.impl.batch.BatchConfiguration;\n+import org.camunda.bpm.engine.impl.batch.DeploymentMappingJsonConverter;\n+import org.camunda.bpm.engine.impl.batch.DeploymentMappings;\n import org.camunda.bpm.engine.impl.json.JsonObjectConverter;\n import org.camunda.bpm.engine.impl.util.JsonUtil;\n-import com.google.gson.JsonObject;\n \n-import java.util.List;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTk1OTg0Ng=="}, "originalCommit": {"oid": "139ded1e3c1ef981dd5aa1b8a34346461e3f0476"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTk3OTM1NQ==", "bodyText": "No need to change this within this PR. Let's keep it in mind for the future.", "url": "https://github.com/camunda/camunda-bpm-platform/pull/709#discussion_r399979355", "createdAt": "2020-03-30T07:29:14Z", "author": {"login": "tasso94"}, "path": "engine/src/main/java/org/camunda/bpm/engine/impl/batch/deletion/DeleteHistoricProcessInstanceBatchConfigurationJsonConverter.java", "diffHunk": "@@ -16,12 +16,15 @@\n  */\n package org.camunda.bpm.engine.impl.batch.deletion;\n \n+import java.util.List;\n+\n import org.camunda.bpm.engine.impl.batch.BatchConfiguration;\n+import org.camunda.bpm.engine.impl.batch.DeploymentMappingJsonConverter;\n+import org.camunda.bpm.engine.impl.batch.DeploymentMappings;\n import org.camunda.bpm.engine.impl.json.JsonObjectConverter;\n import org.camunda.bpm.engine.impl.util.JsonUtil;\n-import com.google.gson.JsonObject;\n \n-import java.util.List;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTk1OTg0Ng=="}, "originalCommit": {"oid": "139ded1e3c1ef981dd5aa1b8a34346461e3f0476"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTk4Mzg4OA==", "bodyText": "Will do \ud83d\udc4d", "url": "https://github.com/camunda/camunda-bpm-platform/pull/709#discussion_r399983888", "createdAt": "2020-03-30T07:38:13Z", "author": {"login": "tmetzke"}, "path": "engine/src/main/java/org/camunda/bpm/engine/impl/batch/deletion/DeleteHistoricProcessInstanceBatchConfigurationJsonConverter.java", "diffHunk": "@@ -16,12 +16,15 @@\n  */\n package org.camunda.bpm.engine.impl.batch.deletion;\n \n+import java.util.List;\n+\n import org.camunda.bpm.engine.impl.batch.BatchConfiguration;\n+import org.camunda.bpm.engine.impl.batch.DeploymentMappingJsonConverter;\n+import org.camunda.bpm.engine.impl.batch.DeploymentMappings;\n import org.camunda.bpm.engine.impl.json.JsonObjectConverter;\n import org.camunda.bpm.engine.impl.util.JsonUtil;\n-import com.google.gson.JsonObject;\n \n-import java.util.List;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTk1OTg0Ng=="}, "originalCommit": {"oid": "139ded1e3c1ef981dd5aa1b8a34346461e3f0476"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ4MDIxNjYwOnYy", "diffSide": "RIGHT", "path": "engine/src/main/java/org/camunda/bpm/engine/impl/batch/deletion/DeleteProcessInstanceBatchConfigurationJsonConverter.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQwNjo0ODowMlrOF9bpcg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQwNzo0MDoxN1rOF9dJVw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTk2MDQzNA==", "bodyText": "?", "url": "https://github.com/camunda/camunda-bpm-platform/pull/709#discussion_r399960434", "createdAt": "2020-03-30T06:48:02Z", "author": {"login": "tasso94"}, "path": "engine/src/main/java/org/camunda/bpm/engine/impl/batch/deletion/DeleteProcessInstanceBatchConfigurationJsonConverter.java", "diffHunk": "@@ -49,9 +54,13 @@ public JsonObject toJsonObject(DeleteProcessInstanceBatchConfiguration configura\n \n   public DeleteProcessInstanceBatchConfiguration toObject(JsonObject json) {\n     DeleteProcessInstanceBatchConfiguration configuration =\n-      new DeleteProcessInstanceBatchConfiguration(readProcessInstanceIds(json), null, JsonUtil.getBoolean(json, SKIP_CUSTOM_LISTENERS), JsonUtil.getBoolean(json, SKIP_SUBPROCESSES), JsonUtil.getBoolean(json, FAIL_IF_NOT_EXISTS));\n+      new DeleteProcessInstanceBatchConfiguration(readProcessInstanceIds(json), readIdMappings(json), null,\n+          JsonUtil.getBoolean(json, SKIP_CUSTOM_LISTENERS), JsonUtil.getBoolean(json, SKIP_SUBPROCESSES),\n+          JsonUtil.getBoolean(json, FAIL_IF_NOT_EXISTS));\n \n     String deleteReason = JsonUtil.getString(json, DELETE_REASON);\n+    deleteReason = JsonUtil.getString(json, DELETE_REASON);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "139ded1e3c1ef981dd5aa1b8a34346461e3f0476"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTk4NDk4Mw==", "bodyText": "Don't know what happened there, thanks for noticing, I'll remove that. \ud83d\udc4d", "url": "https://github.com/camunda/camunda-bpm-platform/pull/709#discussion_r399984983", "createdAt": "2020-03-30T07:40:17Z", "author": {"login": "tmetzke"}, "path": "engine/src/main/java/org/camunda/bpm/engine/impl/batch/deletion/DeleteProcessInstanceBatchConfigurationJsonConverter.java", "diffHunk": "@@ -49,9 +54,13 @@ public JsonObject toJsonObject(DeleteProcessInstanceBatchConfiguration configura\n \n   public DeleteProcessInstanceBatchConfiguration toObject(JsonObject json) {\n     DeleteProcessInstanceBatchConfiguration configuration =\n-      new DeleteProcessInstanceBatchConfiguration(readProcessInstanceIds(json), null, JsonUtil.getBoolean(json, SKIP_CUSTOM_LISTENERS), JsonUtil.getBoolean(json, SKIP_SUBPROCESSES), JsonUtil.getBoolean(json, FAIL_IF_NOT_EXISTS));\n+      new DeleteProcessInstanceBatchConfiguration(readProcessInstanceIds(json), readIdMappings(json), null,\n+          JsonUtil.getBoolean(json, SKIP_CUSTOM_LISTENERS), JsonUtil.getBoolean(json, SKIP_SUBPROCESSES),\n+          JsonUtil.getBoolean(json, FAIL_IF_NOT_EXISTS));\n \n     String deleteReason = JsonUtil.getString(json, DELETE_REASON);\n+    deleteReason = JsonUtil.getString(json, DELETE_REASON);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTk2MDQzNA=="}, "originalCommit": {"oid": "139ded1e3c1ef981dd5aa1b8a34346461e3f0476"}, "originalPosition": 43}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ4MDIyNDI4OnYy", "diffSide": "RIGHT", "path": "engine/src/main/java/org/camunda/bpm/engine/impl/batch/AbstractBatchJobHandler.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQwNjo1MDo1OVrOF9buAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQwNzozMDozMlrOF9c2CA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTk2MTYwMg==", "bodyText": "What is the purpose of having this method separated?", "url": "https://github.com/camunda/camunda-bpm-platform/pull/709#discussion_r399961602", "createdAt": "2020-03-30T06:50:59Z", "author": {"login": "tasso94"}, "path": "engine/src/main/java/org/camunda/bpm/engine/impl/batch/AbstractBatchJobHandler.java", "diffHunk": "@@ -41,19 +42,80 @@\n \n   @Override\n   public boolean createJobs(BatchEntity batch) {\n-    CommandContext commandContext = Context.getCommandContext();\n-    ByteArrayManager byteArrayManager = commandContext.getByteArrayManager();\n-    JobManager jobManager = commandContext.getJobManager();\n-\n     T configuration = readConfiguration(batch.getConfigurationBytes());\n+    return doCreateJobs(batch, configuration);\n+  }\n+\n+  protected boolean doCreateJobs(BatchEntity batch, T configuration) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "139ded1e3c1ef981dd5aa1b8a34346461e3f0476"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTk4MDA0MA==", "bodyText": "Thanks for the hint, I used that method a long time for backwards compatibility implementations but with a refactoring this was not necessary anymore. I missed to reintegrate that method. I will reintegrate the code and remove the extra method. \ud83d\udc4d", "url": "https://github.com/camunda/camunda-bpm-platform/pull/709#discussion_r399980040", "createdAt": "2020-03-30T07:30:32Z", "author": {"login": "tmetzke"}, "path": "engine/src/main/java/org/camunda/bpm/engine/impl/batch/AbstractBatchJobHandler.java", "diffHunk": "@@ -41,19 +42,80 @@\n \n   @Override\n   public boolean createJobs(BatchEntity batch) {\n-    CommandContext commandContext = Context.getCommandContext();\n-    ByteArrayManager byteArrayManager = commandContext.getByteArrayManager();\n-    JobManager jobManager = commandContext.getJobManager();\n-\n     T configuration = readConfiguration(batch.getConfigurationBytes());\n+    return doCreateJobs(batch, configuration);\n+  }\n+\n+  protected boolean doCreateJobs(BatchEntity batch, T configuration) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTk2MTYwMg=="}, "originalCommit": {"oid": "139ded1e3c1ef981dd5aa1b8a34346461e3f0476"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ4MDIyNzE4OnYy", "diffSide": "RIGHT", "path": "engine/src/main/java/org/camunda/bpm/engine/impl/batch/AbstractBatchJobHandler.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQwNjo1MjoxMFrOF9bvyA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQwNzo0NDo0MFrOF9dS_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTk2MjA1Ng==", "bodyText": "Method is never called.", "url": "https://github.com/camunda/camunda-bpm-platform/pull/709#discussion_r399962056", "createdAt": "2020-03-30T06:52:10Z", "author": {"login": "tasso94"}, "path": "engine/src/main/java/org/camunda/bpm/engine/impl/batch/AbstractBatchJobHandler.java", "diffHunk": "@@ -137,5 +194,14 @@ public T readConfiguration(byte[] serializedConfiguration) {\n     return getJsonConverterInstance().toObject(JsonUtil.asObject(serializedConfiguration));\n   }\n \n+  protected void createSingleDeploymentIdMappingForDefinition(T configuration, String processDefinitionId) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "139ded1e3c1ef981dd5aa1b8a34346461e3f0476"}, "originalPosition": 126}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTk4NzQ1Mg==", "bodyText": "Another candidate of being missed to be removed after refactoring the backwards compatibility implementation, thanks!", "url": "https://github.com/camunda/camunda-bpm-platform/pull/709#discussion_r399987452", "createdAt": "2020-03-30T07:44:40Z", "author": {"login": "tmetzke"}, "path": "engine/src/main/java/org/camunda/bpm/engine/impl/batch/AbstractBatchJobHandler.java", "diffHunk": "@@ -137,5 +194,14 @@ public T readConfiguration(byte[] serializedConfiguration) {\n     return getJsonConverterInstance().toObject(JsonUtil.asObject(serializedConfiguration));\n   }\n \n+  protected void createSingleDeploymentIdMappingForDefinition(T configuration, String processDefinitionId) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTk2MjA1Ng=="}, "originalCommit": {"oid": "139ded1e3c1ef981dd5aa1b8a34346461e3f0476"}, "originalPosition": 126}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ4MDMzMDk4OnYy", "diffSide": "RIGHT", "path": "engine/src/main/java/org/camunda/bpm/engine/management/JobDefinition.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQwNzoyNjoxMVrOF9ctHQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQwNzo1ODowM1rOF9dvYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTk3Nzc1Nw==", "bodyText": "Sounds like the documentation of Job#getDeploymentId and not of JobDefinition.", "url": "https://github.com/camunda/camunda-bpm-platform/pull/709#discussion_r399977757", "createdAt": "2020-03-30T07:26:11Z", "author": {"login": "tasso94"}, "path": "engine/src/main/java/org/camunda/bpm/engine/management/JobDefinition.java", "diffHunk": "@@ -97,4 +97,10 @@\n    */\n   String getTenantId();\n \n+  /**\n+   * The id of the deployment this job is related to. In a deployment-aware setup, this", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "139ded1e3c1ef981dd5aa1b8a34346461e3f0476"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTk5NDcyMw==", "bodyText": "I will adjust it a bit \ud83d\udc4d", "url": "https://github.com/camunda/camunda-bpm-platform/pull/709#discussion_r399994723", "createdAt": "2020-03-30T07:58:03Z", "author": {"login": "tmetzke"}, "path": "engine/src/main/java/org/camunda/bpm/engine/management/JobDefinition.java", "diffHunk": "@@ -97,4 +97,10 @@\n    */\n   String getTenantId();\n \n+  /**\n+   * The id of the deployment this job is related to. In a deployment-aware setup, this", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTk3Nzc1Nw=="}, "originalCommit": {"oid": "139ded1e3c1ef981dd5aa1b8a34346461e3f0476"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ4MDQxNTY3OnYy", "diffSide": "RIGHT", "path": "engine/src/main/java/org/camunda/bpm/engine/impl/batch/DeploymentMappings.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQwNzo1MDoyNVrOF9de8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQwNzo1ODo0NVrOF9dw6A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTk5MDUxMw==", "bodyText": "The parameter name is not very self-explanatory\nAlso check linke 43 & 49", "url": "https://github.com/camunda/camunda-bpm-platform/pull/709#discussion_r399990513", "createdAt": "2020-03-30T07:50:25Z", "author": {"login": "tasso94"}, "path": "engine/src/main/java/org/camunda/bpm/engine/impl/batch/DeploymentMappings.java", "diffHunk": "@@ -0,0 +1,61 @@\n+/*\n+ * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n+ * under one or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information regarding copyright\n+ * ownership. Camunda licenses this file to you under the Apache License,\n+ * Version 2.0; you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.camunda.bpm.engine.impl.batch;\n+\n+import java.util.ArrayList;\n+\n+/**\n+ * List of aggregated information on deployment ids and the number of related resources\n+ */\n+public class DeploymentMappings extends ArrayList<DeploymentMapping> {\n+\n+  private static final long serialVersionUID = -868922966819588407L;\n+\n+  protected int overallIdCount;\n+\n+  public static DeploymentMappings of(DeploymentMapping mapping) {\n+    DeploymentMappings mappings = new DeploymentMappings();\n+    mappings.add(mapping);\n+    return mappings;\n+  }\n+\n+  @Override\n+  public boolean add(DeploymentMapping var1) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "139ded1e3c1ef981dd5aa1b8a34346461e3f0476"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTk5NTExMg==", "bodyText": "Yeah, that's true, I will give them a bit more thoughtful names \ud83d\udc4d", "url": "https://github.com/camunda/camunda-bpm-platform/pull/709#discussion_r399995112", "createdAt": "2020-03-30T07:58:45Z", "author": {"login": "tmetzke"}, "path": "engine/src/main/java/org/camunda/bpm/engine/impl/batch/DeploymentMappings.java", "diffHunk": "@@ -0,0 +1,61 @@\n+/*\n+ * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n+ * under one or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information regarding copyright\n+ * ownership. Camunda licenses this file to you under the Apache License,\n+ * Version 2.0; you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.camunda.bpm.engine.impl.batch;\n+\n+import java.util.ArrayList;\n+\n+/**\n+ * List of aggregated information on deployment ids and the number of related resources\n+ */\n+public class DeploymentMappings extends ArrayList<DeploymentMapping> {\n+\n+  private static final long serialVersionUID = -868922966819588407L;\n+\n+  protected int overallIdCount;\n+\n+  public static DeploymentMappings of(DeploymentMapping mapping) {\n+    DeploymentMappings mappings = new DeploymentMappings();\n+    mappings.add(mapping);\n+    return mappings;\n+  }\n+\n+  @Override\n+  public boolean add(DeploymentMapping var1) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTk5MDUxMw=="}, "originalCommit": {"oid": "139ded1e3c1ef981dd5aa1b8a34346461e3f0476"}, "originalPosition": 37}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ4MDQzOTI5OnYy", "diffSide": "RIGHT", "path": "engine/src/main/java/org/camunda/bpm/engine/impl/dmn/cmd/DeleteHistoricDecisionInstancesBatchCmd.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQwNzo1NzowMFrOF9dtCQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQwODoxMDo1NlrOF9eMSQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTk5NDEyMQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  query.decisionInstanceIdIn(historicDecisionInstanceIds.toArray(new String[historicDecisionInstanceIds.size()]));\n          \n          \n            \n                  query.decisionInstanceIdIn(historicDecisionInstanceIds.toArray(new String[0]));", "url": "https://github.com/camunda/camunda-bpm-platform/pull/709#discussion_r399994121", "createdAt": "2020-03-30T07:57:00Z", "author": {"login": "tasso94"}, "path": "engine/src/main/java/org/camunda/bpm/engine/impl/dmn/cmd/DeleteHistoricDecisionInstancesBatchCmd.java", "diffHunk": "@@ -53,44 +50,39 @@ public DeleteHistoricDecisionInstancesBatchCmd(List<String> ids,\n \n   @Override\n   public Batch execute(CommandContext commandContext) {\n-    Collection<String> collectedInstanceIds = collectHistoricDecisionInstanceIds();\n-    ensureNotEmpty(BadUserRequestException.class,\n-        \"historicDecisionInstanceIds\", collectedInstanceIds);\n+    BatchElementConfiguration elementConfiguration = collectHistoricDecisionInstanceIds(commandContext);\n+    ensureNotEmpty(BadUserRequestException.class, \"historicDecisionInstanceIds\", elementConfiguration.getIds());\n \n     return new BatchBuilder(commandContext)\n         .type(Batch.TYPE_HISTORIC_DECISION_INSTANCE_DELETION)\n-        .config(getConfiguration(collectedInstanceIds))\n+        .config(getConfiguration(elementConfiguration))\n         .permission(BatchPermissions.CREATE_BATCH_DELETE_DECISION_INSTANCES)\n         .operationLogHandler(this::writeUserOperationLog)\n         .build();\n   }\n \n-  protected List<String> collectHistoricDecisionInstanceIds() {\n+  protected BatchElementConfiguration collectHistoricDecisionInstanceIds(CommandContext commandContext) {\n \n-    Set<String> collectedDecisionInstanceIds = new HashSet<String>();\n+    BatchElementConfiguration elementConfiguration = new BatchElementConfiguration();\n \n-    List<String> decisionInstanceIds = getHistoricDecisionInstanceIds();\n-    if (decisionInstanceIds != null) {\n-      collectedDecisionInstanceIds.addAll(decisionInstanceIds);\n+    if (!CollectionUtil.isEmpty(historicDecisionInstanceIds)) {\n+      HistoricDecisionInstanceQueryImpl query = new HistoricDecisionInstanceQueryImpl();\n+      query.decisionInstanceIdIn(historicDecisionInstanceIds.toArray(new String[historicDecisionInstanceIds.size()]));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "139ded1e3c1ef981dd5aa1b8a34346461e3f0476"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDAwMjEyMQ==", "bodyText": "Thanks for that learning (I just read https://shipilev.net/blog/2016/arrays-wisdom-ancients/#_empty_array_instantiation)!", "url": "https://github.com/camunda/camunda-bpm-platform/pull/709#discussion_r400002121", "createdAt": "2020-03-30T08:10:56Z", "author": {"login": "tmetzke"}, "path": "engine/src/main/java/org/camunda/bpm/engine/impl/dmn/cmd/DeleteHistoricDecisionInstancesBatchCmd.java", "diffHunk": "@@ -53,44 +50,39 @@ public DeleteHistoricDecisionInstancesBatchCmd(List<String> ids,\n \n   @Override\n   public Batch execute(CommandContext commandContext) {\n-    Collection<String> collectedInstanceIds = collectHistoricDecisionInstanceIds();\n-    ensureNotEmpty(BadUserRequestException.class,\n-        \"historicDecisionInstanceIds\", collectedInstanceIds);\n+    BatchElementConfiguration elementConfiguration = collectHistoricDecisionInstanceIds(commandContext);\n+    ensureNotEmpty(BadUserRequestException.class, \"historicDecisionInstanceIds\", elementConfiguration.getIds());\n \n     return new BatchBuilder(commandContext)\n         .type(Batch.TYPE_HISTORIC_DECISION_INSTANCE_DELETION)\n-        .config(getConfiguration(collectedInstanceIds))\n+        .config(getConfiguration(elementConfiguration))\n         .permission(BatchPermissions.CREATE_BATCH_DELETE_DECISION_INSTANCES)\n         .operationLogHandler(this::writeUserOperationLog)\n         .build();\n   }\n \n-  protected List<String> collectHistoricDecisionInstanceIds() {\n+  protected BatchElementConfiguration collectHistoricDecisionInstanceIds(CommandContext commandContext) {\n \n-    Set<String> collectedDecisionInstanceIds = new HashSet<String>();\n+    BatchElementConfiguration elementConfiguration = new BatchElementConfiguration();\n \n-    List<String> decisionInstanceIds = getHistoricDecisionInstanceIds();\n-    if (decisionInstanceIds != null) {\n-      collectedDecisionInstanceIds.addAll(decisionInstanceIds);\n+    if (!CollectionUtil.isEmpty(historicDecisionInstanceIds)) {\n+      HistoricDecisionInstanceQueryImpl query = new HistoricDecisionInstanceQueryImpl();\n+      query.decisionInstanceIdIn(historicDecisionInstanceIds.toArray(new String[historicDecisionInstanceIds.size()]));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTk5NDEyMQ=="}, "originalCommit": {"oid": "139ded1e3c1ef981dd5aa1b8a34346461e3f0476"}, "originalPosition": 55}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ4MDQ5NDU3OnYy", "diffSide": "RIGHT", "path": "engine/src/main/java/org/camunda/bpm/engine/impl/util/ImmutablePair.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQwODoxMTozNVrOF9eNvA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQwODoyMDo1M1rOF9eixw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDAwMjQ5Mg==", "bodyText": "Modifier private is not allowed for fields and methods. Please also see line 44 & 117", "url": "https://github.com/camunda/camunda-bpm-platform/pull/709#discussion_r400002492", "createdAt": "2020-03-30T08:11:35Z", "author": {"login": "tasso94"}, "path": "engine/src/main/java/org/camunda/bpm/engine/impl/util/ImmutablePair.java", "diffHunk": "@@ -0,0 +1,156 @@\n+/*\n+ * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n+ * under one or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information regarding copyright\n+ * ownership. Camunda licenses this file to you under the Apache License,\n+ * Version 2.0; you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.camunda.bpm.engine.impl.util;\n+\n+import java.io.Serializable;\n+import java.util.Map.Entry;\n+\n+import java.util.Objects;\n+\n+/**\n+ * Immutable representation of a 2-tuple of elements.\n+ *\n+ * Although the implementation is immutable, there is no restriction on the\n+ * objects that may be stored. If mutable objects are stored in the pair, then\n+ * the pair itself effectively becomes mutable.\n+ *\n+ * ThreadSafe if both paired objects are thread-safe\n+ *\n+ * @param <L>\n+ *          the type of the left element\n+ * @param <R>\n+ *          the type of the right element\n+ */\n+public class ImmutablePair<L, R> implements Entry<L, R>, Serializable, Comparable<ImmutablePair<L, R>> {\n+\n+  /** Serialization version */\n+  private static final long serialVersionUID = -7043970803192830955L;\n+\n+  private L left;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "139ded1e3c1ef981dd5aa1b8a34346461e3f0476"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDAwNjcxNw==", "bodyText": "It's fine for the serialVersionUID, right?", "url": "https://github.com/camunda/camunda-bpm-platform/pull/709#discussion_r400006717", "createdAt": "2020-03-30T08:18:43Z", "author": {"login": "tmetzke"}, "path": "engine/src/main/java/org/camunda/bpm/engine/impl/util/ImmutablePair.java", "diffHunk": "@@ -0,0 +1,156 @@\n+/*\n+ * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n+ * under one or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information regarding copyright\n+ * ownership. Camunda licenses this file to you under the Apache License,\n+ * Version 2.0; you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.camunda.bpm.engine.impl.util;\n+\n+import java.io.Serializable;\n+import java.util.Map.Entry;\n+\n+import java.util.Objects;\n+\n+/**\n+ * Immutable representation of a 2-tuple of elements.\n+ *\n+ * Although the implementation is immutable, there is no restriction on the\n+ * objects that may be stored. If mutable objects are stored in the pair, then\n+ * the pair itself effectively becomes mutable.\n+ *\n+ * ThreadSafe if both paired objects are thread-safe\n+ *\n+ * @param <L>\n+ *          the type of the left element\n+ * @param <R>\n+ *          the type of the right element\n+ */\n+public class ImmutablePair<L, R> implements Entry<L, R>, Serializable, Comparable<ImmutablePair<L, R>> {\n+\n+  /** Serialization version */\n+  private static final long serialVersionUID = -7043970803192830955L;\n+\n+  private L left;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDAwMjQ5Mg=="}, "originalCommit": {"oid": "139ded1e3c1ef981dd5aa1b8a34346461e3f0476"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDAwNzg3OQ==", "bodyText": "Yes, as far as I know it's not possible to override static fields anyways.", "url": "https://github.com/camunda/camunda-bpm-platform/pull/709#discussion_r400007879", "createdAt": "2020-03-30T08:20:53Z", "author": {"login": "tasso94"}, "path": "engine/src/main/java/org/camunda/bpm/engine/impl/util/ImmutablePair.java", "diffHunk": "@@ -0,0 +1,156 @@\n+/*\n+ * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n+ * under one or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information regarding copyright\n+ * ownership. Camunda licenses this file to you under the Apache License,\n+ * Version 2.0; you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.camunda.bpm.engine.impl.util;\n+\n+import java.io.Serializable;\n+import java.util.Map.Entry;\n+\n+import java.util.Objects;\n+\n+/**\n+ * Immutable representation of a 2-tuple of elements.\n+ *\n+ * Although the implementation is immutable, there is no restriction on the\n+ * objects that may be stored. If mutable objects are stored in the pair, then\n+ * the pair itself effectively becomes mutable.\n+ *\n+ * ThreadSafe if both paired objects are thread-safe\n+ *\n+ * @param <L>\n+ *          the type of the left element\n+ * @param <R>\n+ *          the type of the right element\n+ */\n+public class ImmutablePair<L, R> implements Entry<L, R>, Serializable, Comparable<ImmutablePair<L, R>> {\n+\n+  /** Serialization version */\n+  private static final long serialVersionUID = -7043970803192830955L;\n+\n+  private L left;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDAwMjQ5Mg=="}, "originalCommit": {"oid": "139ded1e3c1ef981dd5aa1b8a34346461e3f0476"}, "originalPosition": 43}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ4MDUxNTU0OnYy", "diffSide": "RIGHT", "path": "engine/src/main/java/org/camunda/bpm/engine/runtime/JobQuery.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQwODoxNjo1NlrOF9eaMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxMDoxNjo1OFrOF9i68g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDAwNTY4MQ==", "bodyText": "Let's cover this public API by a dedicated test case. Please also do for line 46.", "url": "https://github.com/camunda/camunda-bpm-platform/pull/709#discussion_r400005681", "createdAt": "2020-03-30T08:16:56Z", "author": {"login": "tasso94"}, "path": "engine/src/main/java/org/camunda/bpm/engine/runtime/JobQuery.java", "diffHunk": "@@ -32,12 +33,18 @@\n   /** Only select jobs with the given id */\n   JobQuery jobId(String jobId);\n \n+  /** Only select jobs whose id is in the given set of ids */\n+  JobQuery jobIds(Set<String> ids);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "139ded1e3c1ef981dd5aa1b8a34346461e3f0476"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDA3OTYwMg==", "bodyText": "Tests added \ud83d\udc4d", "url": "https://github.com/camunda/camunda-bpm-platform/pull/709#discussion_r400079602", "createdAt": "2020-03-30T10:16:58Z", "author": {"login": "tmetzke"}, "path": "engine/src/main/java/org/camunda/bpm/engine/runtime/JobQuery.java", "diffHunk": "@@ -32,12 +33,18 @@\n   /** Only select jobs with the given id */\n   JobQuery jobId(String jobId);\n \n+  /** Only select jobs whose id is in the given set of ids */\n+  JobQuery jobIds(Set<String> ids);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDAwNTY4MQ=="}, "originalCommit": {"oid": "139ded1e3c1ef981dd5aa1b8a34346461e3f0476"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ4MDU0Mzg2OnYy", "diffSide": "RIGHT", "path": "engine/src/test/java/org/camunda/bpm/engine/test/api/authorization/batch/DeleteHistoricProcessInstancesBatchAuthorizationTest.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQwODoyNDo0OVrOF9er1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQwODo0OTozOFrOF9fmuA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDAxMDE5OA==", "bodyText": "Why did this change?", "url": "https://github.com/camunda/camunda-bpm-platform/pull/709#discussion_r400010198", "createdAt": "2020-03-30T08:24:49Z", "author": {"login": "tasso94"}, "path": "engine/src/test/java/org/camunda/bpm/engine/test/api/authorization/batch/DeleteHistoricProcessInstancesBatchAuthorizationTest.java", "diffHunk": "@@ -84,7 +84,7 @@ public void cleanBatch() {\n   public static Collection<AuthorizationScenario[]> scenarios() {\n     return AuthorizationTestRule.asParameters(\n         AuthorizationScenarioWithCount.scenario()\n-            .withCount(2L)\n+            .withCount(1L)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dbfad7efba47fff3c24276b98660c37434fc2fcd"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDAyMjg2Ng==", "bodyText": "The historic instances are from different deployments. This count is only used in the test case testWithTwoInvocationsProcessInstancesList. Previously, both instances were processed in the same batch job execution in DeleteHistoricProcessInstancesCmd. In its execute method, both instances were checked for authorization. One of them would not pass and the whole batch job would fail, so no historic instance would be deleted (therefore still 2 instances would exist in the end).\nWith the new implementation, instances of different deployments will not be processed together in one batch job anymore. Therefore, 1 instance will be deleted now and one not.\nI actually consider this the proper implementation for this case now.\nNot sure if we need to document this but I would consider this a bug fix actually.", "url": "https://github.com/camunda/camunda-bpm-platform/pull/709#discussion_r400022866", "createdAt": "2020-03-30T08:45:54Z", "author": {"login": "tmetzke"}, "path": "engine/src/test/java/org/camunda/bpm/engine/test/api/authorization/batch/DeleteHistoricProcessInstancesBatchAuthorizationTest.java", "diffHunk": "@@ -84,7 +84,7 @@ public void cleanBatch() {\n   public static Collection<AuthorizationScenario[]> scenarios() {\n     return AuthorizationTestRule.asParameters(\n         AuthorizationScenarioWithCount.scenario()\n-            .withCount(2L)\n+            .withCount(1L)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDAxMDE5OA=="}, "originalCommit": {"oid": "dbfad7efba47fff3c24276b98660c37434fc2fcd"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDAyNTI3Mg==", "bodyText": "I see! Thanks \ud83d\udc4d", "url": "https://github.com/camunda/camunda-bpm-platform/pull/709#discussion_r400025272", "createdAt": "2020-03-30T08:49:38Z", "author": {"login": "tasso94"}, "path": "engine/src/test/java/org/camunda/bpm/engine/test/api/authorization/batch/DeleteHistoricProcessInstancesBatchAuthorizationTest.java", "diffHunk": "@@ -84,7 +84,7 @@ public void cleanBatch() {\n   public static Collection<AuthorizationScenario[]> scenarios() {\n     return AuthorizationTestRule.asParameters(\n         AuthorizationScenarioWithCount.scenario()\n-            .withCount(2L)\n+            .withCount(1L)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDAxMDE5OA=="}, "originalCommit": {"oid": "dbfad7efba47fff3c24276b98660c37434fc2fcd"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ4MDY1MzAyOnYy", "diffSide": "RIGHT", "path": "engine/src/main/java/org/camunda/bpm/engine/management/JobDefinition.java", "isResolved": true, "comments": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQwODo1MjozN1rOF9fuSA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxMjo0NjozMFrOF9n-Fw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDAyNzIwOA==", "bodyText": "Another request I would like to raise is to always expose newly added API getters to the REST API and cover it with REST API reference docs. I think this should be raised in the team meeting as well to discuss whether we would like to make it a general rule.", "url": "https://github.com/camunda/camunda-bpm-platform/pull/709#discussion_r400027208", "createdAt": "2020-03-30T08:52:37Z", "author": {"login": "tasso94"}, "path": "engine/src/main/java/org/camunda/bpm/engine/management/JobDefinition.java", "diffHunk": "@@ -97,4 +97,10 @@\n    */\n   String getTenantId();\n \n+  /**\n+   * The id of the deployment this job definition is related to. In a deployment-aware setup,\n+   * this leads to all jobs of the same definition being executed on the same node.\n+   */\n+  String getDeploymentId();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dbfad7efba47fff3c24276b98660c37434fc2fcd"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDAzMDI4NQ==", "bodyText": "In general I totally agree, but I guess it also depends on the task itself in which this new API is created. If, as in this case here, it is simply a means to make progress on a different topic than adding the getter itself, I would rather vote for creating a follow-up ticket to add it to the REST API (which I haven't done here yet either though).", "url": "https://github.com/camunda/camunda-bpm-platform/pull/709#discussion_r400030285", "createdAt": "2020-03-30T08:57:27Z", "author": {"login": "tmetzke"}, "path": "engine/src/main/java/org/camunda/bpm/engine/management/JobDefinition.java", "diffHunk": "@@ -97,4 +97,10 @@\n    */\n   String getTenantId();\n \n+  /**\n+   * The id of the deployment this job definition is related to. In a deployment-aware setup,\n+   * this leads to all jobs of the same definition being executed on the same node.\n+   */\n+  String getDeploymentId();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDAyNzIwOA=="}, "originalCommit": {"oid": "dbfad7efba47fff3c24276b98660c37434fc2fcd"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDAzMTY2NQ==", "bodyText": "I simply have the concern that this rule otherwise might blow up the original topic too much.", "url": "https://github.com/camunda/camunda-bpm-platform/pull/709#discussion_r400031665", "createdAt": "2020-03-30T08:59:35Z", "author": {"login": "tmetzke"}, "path": "engine/src/main/java/org/camunda/bpm/engine/management/JobDefinition.java", "diffHunk": "@@ -97,4 +97,10 @@\n    */\n   String getTenantId();\n \n+  /**\n+   * The id of the deployment this job definition is related to. In a deployment-aware setup,\n+   * this leads to all jobs of the same definition being executed on the same node.\n+   */\n+  String getDeploymentId();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDAyNzIwOA=="}, "originalCommit": {"oid": "dbfad7efba47fff3c24276b98660c37434fc2fcd"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDAzMjE4NQ==", "bodyText": "I think it could make sense to have a general rule since it's super easy and fast to achieve it for the one implementing and brings much value for users. How a developer achieves it in the end (e. g. with a follow-up ticket) is a means of individual project management and should not be regulated.", "url": "https://github.com/camunda/camunda-bpm-platform/pull/709#discussion_r400032185", "createdAt": "2020-03-30T09:00:20Z", "author": {"login": "tasso94"}, "path": "engine/src/main/java/org/camunda/bpm/engine/management/JobDefinition.java", "diffHunk": "@@ -97,4 +97,10 @@\n    */\n   String getTenantId();\n \n+  /**\n+   * The id of the deployment this job definition is related to. In a deployment-aware setup,\n+   * this leads to all jobs of the same definition being executed on the same node.\n+   */\n+  String getDeploymentId();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDAyNzIwOA=="}, "originalCommit": {"oid": "dbfad7efba47fff3c24276b98660c37434fc2fcd"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDA0MDA1Mw==", "bodyText": "Totally agree \ud83d\udc4d", "url": "https://github.com/camunda/camunda-bpm-platform/pull/709#discussion_r400040053", "createdAt": "2020-03-30T09:13:02Z", "author": {"login": "tmetzke"}, "path": "engine/src/main/java/org/camunda/bpm/engine/management/JobDefinition.java", "diffHunk": "@@ -97,4 +97,10 @@\n    */\n   String getTenantId();\n \n+  /**\n+   * The id of the deployment this job definition is related to. In a deployment-aware setup,\n+   * this leads to all jobs of the same definition being executed on the same node.\n+   */\n+  String getDeploymentId();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDAyNzIwOA=="}, "originalCommit": {"oid": "dbfad7efba47fff3c24276b98660c37434fc2fcd"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDA4MjAxOA==", "bodyText": "Added it to the DTO", "url": "https://github.com/camunda/camunda-bpm-platform/pull/709#discussion_r400082018", "createdAt": "2020-03-30T10:21:04Z", "author": {"login": "tmetzke"}, "path": "engine/src/main/java/org/camunda/bpm/engine/management/JobDefinition.java", "diffHunk": "@@ -97,4 +97,10 @@\n    */\n   String getTenantId();\n \n+  /**\n+   * The id of the deployment this job definition is related to. In a deployment-aware setup,\n+   * this leads to all jobs of the same definition being executed on the same node.\n+   */\n+  String getDeploymentId();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDAyNzIwOA=="}, "originalCommit": {"oid": "dbfad7efba47fff3c24276b98660c37434fc2fcd"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDEwMzI4MA==", "bodyText": "Let's add a test & docs to the REST API reference", "url": "https://github.com/camunda/camunda-bpm-platform/pull/709#discussion_r400103280", "createdAt": "2020-03-30T10:59:01Z", "author": {"login": "tasso94"}, "path": "engine/src/main/java/org/camunda/bpm/engine/management/JobDefinition.java", "diffHunk": "@@ -97,4 +97,10 @@\n    */\n   String getTenantId();\n \n+  /**\n+   * The id of the deployment this job definition is related to. In a deployment-aware setup,\n+   * this leads to all jobs of the same definition being executed on the same node.\n+   */\n+  String getDeploymentId();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDAyNzIwOA=="}, "originalCommit": {"oid": "dbfad7efba47fff3c24276b98660c37434fc2fcd"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDExODQ3Mw==", "bodyText": "Tests added, documentation will follow \ud83d\ude03", "url": "https://github.com/camunda/camunda-bpm-platform/pull/709#discussion_r400118473", "createdAt": "2020-03-30T11:28:13Z", "author": {"login": "tmetzke"}, "path": "engine/src/main/java/org/camunda/bpm/engine/management/JobDefinition.java", "diffHunk": "@@ -97,4 +97,10 @@\n    */\n   String getTenantId();\n \n+  /**\n+   * The id of the deployment this job definition is related to. In a deployment-aware setup,\n+   * this leads to all jobs of the same definition being executed on the same node.\n+   */\n+  String getDeploymentId();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDAyNzIwOA=="}, "originalCommit": {"oid": "dbfad7efba47fff3c24276b98660c37434fc2fcd"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDE2MjMyNw==", "bodyText": "Documentation in camunda/camunda-docs-manual#501", "url": "https://github.com/camunda/camunda-bpm-platform/pull/709#discussion_r400162327", "createdAt": "2020-03-30T12:46:30Z", "author": {"login": "tmetzke"}, "path": "engine/src/main/java/org/camunda/bpm/engine/management/JobDefinition.java", "diffHunk": "@@ -97,4 +97,10 @@\n    */\n   String getTenantId();\n \n+  /**\n+   * The id of the deployment this job definition is related to. In a deployment-aware setup,\n+   * this leads to all jobs of the same definition being executed on the same node.\n+   */\n+  String getDeploymentId();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDAyNzIwOA=="}, "originalCommit": {"oid": "dbfad7efba47fff3c24276b98660c37434fc2fcd"}, "originalPosition": 8}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4666, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}