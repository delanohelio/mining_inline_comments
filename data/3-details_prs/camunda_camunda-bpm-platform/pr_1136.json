{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI0NTg3OTMy", "number": 1136, "title": "chore(ce-pipeline): adjust archiveArtifacts for ee pipe", "bodyText": "CAM-12788", "createdAt": "2020-11-20T09:56:32Z", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1136", "merged": true, "mergeCommit": {"oid": "0a6195f41f9e52c5d89516fad28338c0991947dd"}, "closed": true, "closedAt": "2020-11-23T12:47:24Z", "author": {"login": "yanavasileva"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdeWA3MgBqjQwMjA1NDkzOTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdfUkU4AFqTUzNjQzOTQ1OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "eef5e7e61b7f24e204409c930dc3eae62d6b55ad", "author": {"user": {"login": "yanavasileva", "name": null}}, "url": "https://github.com/camunda/camunda-bpm-platform/commit/eef5e7e61b7f24e204409c930dc3eae62d6b55ad", "committedDate": "2020-11-20T11:52:00Z", "message": "test branch"}, "afterCommit": {"oid": "89474fbce1f699ebf8da588e380b84aaa6f3ad89", "author": {"user": {"login": "yanavasileva", "name": null}}, "url": "https://github.com/camunda/camunda-bpm-platform/commit/89474fbce1f699ebf8da588e380b84aaa6f3ad89", "committedDate": "2020-11-20T11:53:32Z", "message": "test branch"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "89474fbce1f699ebf8da588e380b84aaa6f3ad89", "author": {"user": {"login": "yanavasileva", "name": null}}, "url": "https://github.com/camunda/camunda-bpm-platform/commit/89474fbce1f699ebf8da588e380b84aaa6f3ad89", "committedDate": "2020-11-20T11:53:32Z", "message": "test branch"}, "afterCommit": {"oid": "c42d7bbe7c71559667ce2f7120ecb4b939d28c37", "author": {"user": {"login": "yanavasileva", "name": null}}, "url": "https://github.com/camunda/camunda-bpm-platform/commit/c42d7bbe7c71559667ce2f7120ecb4b939d28c37", "committedDate": "2020-11-20T12:01:51Z", "message": "test branch"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c42d7bbe7c71559667ce2f7120ecb4b939d28c37", "author": {"user": {"login": "yanavasileva", "name": null}}, "url": "https://github.com/camunda/camunda-bpm-platform/commit/c42d7bbe7c71559667ce2f7120ecb4b939d28c37", "committedDate": "2020-11-20T12:01:51Z", "message": "test branch"}, "afterCommit": {"oid": "fef57f631ec20b9ee8985d39ce79bd9165303077", "author": {"user": {"login": "yanavasileva", "name": null}}, "url": "https://github.com/camunda/camunda-bpm-platform/commit/fef57f631ec20b9ee8985d39ce79bd9165303077", "committedDate": "2020-11-20T12:05:08Z", "message": "test branch"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM1NDE3MjYw", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1136#pullrequestreview-535417260", "createdAt": "2020-11-20T13:16:17Z", "commit": {"oid": "48cc2eae45529be7d0ac41fa451246ed2530aaa1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQxMzoxNjoxN1rOH3POdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQxMzoxNjoxN1rOH3POdg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzY4MzE5MA==", "bodyText": "Note: this will only work if a branch with the same name exists on the EE repo.\nI think that this is acceptable at the current state of development. We can think later how we handle the other use-cases.", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1136#discussion_r527683190", "createdAt": "2020-11-20T13:16:17Z", "author": {"login": "koevskinikola"}, "path": "Jenkinsfile", "diffHunk": "@@ -55,31 +55,27 @@ pipeline {\n       }\n       steps {\n         withMaven(jdk: 'jdk-8-latest', maven: 'maven-3.2-latest', mavenSettingsConfig: 'maven-nexus-settings') {\n-          sh '''\n-            mvn --version\n-            java -version\n-          '''\n           nodejs('nodejs-14.6.0'){\n-            sh '''\n-              node -v\n-              npm version\n-            '''\n              configFileProvider([configFile(fileId: 'maven-nexus-settings', variable: 'MAVEN_SETTINGS_XML')]) {\n                sh \"\"\"\n                  mvn -s \\$MAVEN_SETTINGS_XML clean install source:jar -Pdistro,distro-ce,distro-wildfly,distro-webjar -DskipTests -Dmaven.repo.local=\\$(pwd)/.m2 com.mycila:license-maven-plugin:check -B\n                \"\"\"\n              }\n           }\n-\n-          archiveArtifacts artifacts: '.m2/org/camunda/**/*-SNAPSHOT/**', excludes: '**/*.zip,**/*.tar.gz', followSymlinks: false\n-\n+    \n+          archiveArtifacts artifacts: '.m2/org/camunda/**/*-SNAPSHOT/**/*.jar,.m2/org/camunda/**/*-SNAPSHOT/**/*.pom,.m2/org/camunda/**/*-SNAPSHOT/**/*.xml,.m2/org/camunda/**/*-SNAPSHOT/**/*.txt,.m2/org/camunda/**/*-SNAPSHOT/**/camunda-webapp*frontend-sources.zip', followSymlinks: false\n+          archiveArtifacts artifacts: '.m2/org/camunda/**/camunda-webapp*frontend-sources.zip,.m2/org/camunda/**/license-book*.zip,.m2/org/camunda/**/camunda-webapp*.war,.m2/org/camunda/**/camunda-engine-rest*.war,.m2/org/camunda/**/camunda-example-invoice*.war,.m2/org/camunda/**/camunda-h2-webapp*.war,.m2/org/camunda/**/*-SNAPSHOT/**/*.tar.gz,.m2/org/camunda/**/*-SNAPSHOT/**/camunda-jboss-modules*.zip', followSymlinks: false\n+    \n           stash name: \"platform-stash-runtime\", includes: \".m2/org/camunda/**/*-SNAPSHOT/**\", excludes: \"**/qa/**,**/*qa*/**,**/*.zip,**/*.tar.gz\"\n-          // stash name: \"platform-stash-qa\", includes: \".m2/org/camunda/bpm/**/qa/**/*-SNAPSHOT/**,.m2/org/camunda/bpm/**/*qa*/**/*-SNAPSHOT/**\", excludes: \"**/*.zip,**/*.tar.gz\"\n+          stash name: \"platform-stash-qa\", includes: \".m2/org/camunda/bpm/**/qa/**/*-SNAPSHOT/**,.m2/org/camunda/bpm/**/*qa*/**/*-SNAPSHOT/**\", excludes: \"**/*.zip,**/*.tar.gz\"\n           stash name: \"platform-stash-distro\", includes: \".m2/org/camunda/bpm/**/*-SNAPSHOT/**/*.zip,.m2/org/camunda/bpm/**/*-SNAPSHOT/**/*.tar.gz\"\n          }\n-\n-        build job: 'cambpm-jenkins-pipelines-ee/pipeline-master', parameters: [string(name: 'copyArtifactSelector', value: '<TriggeredBuildSelector plugin=\"copyartifact@1.45.1\">  <upstreamFilterStrategy>UseGlobalSetting</upstreamFilterStrategy>  <allowUpstreamDependencies>false</allowUpstreamDependencies></TriggeredBuildSelector>'), booleanParam(name: 'STANDALONE', value: false)], quietPeriod: 10, wait: false\n-\n+    \n+        build job: \"cambpm-jenkins-pipelines-ee/${env.BRANCH_NAME}\", parameters: [ ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "48cc2eae45529be7d0ac41fa451246ed2530aaa1"}, "originalPosition": 35}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM1NDQ5MjM1", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1136#pullrequestreview-535449235", "createdAt": "2020-11-20T13:58:53Z", "commit": {"oid": "48cc2eae45529be7d0ac41fa451246ed2530aaa1"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQxMzo1ODo1M1rOH3QucQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQxMzo1ODo1M1rOH3QucQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzcwNzc2MQ==", "bodyText": "Let's add code comments to these two lines, so that it's clear what patterns should be added to each.\nWe should also be consistent with the -SNAPSHOT pattern, and use it in both places or in none of them.\nAlso, the camunda-webapp*frontend-sources.zip pattern is duplicated in both lines.", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1136#discussion_r527707761", "createdAt": "2020-11-20T13:58:53Z", "author": {"login": "koevskinikola"}, "path": "Jenkinsfile", "diffHunk": "@@ -55,31 +55,27 @@ pipeline {\n       }\n       steps {\n         withMaven(jdk: 'jdk-8-latest', maven: 'maven-3.2-latest', mavenSettingsConfig: 'maven-nexus-settings') {\n-          sh '''\n-            mvn --version\n-            java -version\n-          '''\n           nodejs('nodejs-14.6.0'){\n-            sh '''\n-              node -v\n-              npm version\n-            '''\n              configFileProvider([configFile(fileId: 'maven-nexus-settings', variable: 'MAVEN_SETTINGS_XML')]) {\n                sh \"\"\"\n                  mvn -s \\$MAVEN_SETTINGS_XML clean install source:jar -Pdistro,distro-ce,distro-wildfly,distro-webjar -DskipTests -Dmaven.repo.local=\\$(pwd)/.m2 com.mycila:license-maven-plugin:check -B\n                \"\"\"\n              }\n           }\n-\n-          archiveArtifacts artifacts: '.m2/org/camunda/**/*-SNAPSHOT/**', excludes: '**/*.zip,**/*.tar.gz', followSymlinks: false\n-\n+    \n+          archiveArtifacts artifacts: '.m2/org/camunda/**/*-SNAPSHOT/**/*.jar,.m2/org/camunda/**/*-SNAPSHOT/**/*.pom,.m2/org/camunda/**/*-SNAPSHOT/**/*.xml,.m2/org/camunda/**/*-SNAPSHOT/**/*.txt,.m2/org/camunda/**/*-SNAPSHOT/**/camunda-webapp*frontend-sources.zip', followSymlinks: false\n+          archiveArtifacts artifacts: '.m2/org/camunda/**/camunda-webapp*frontend-sources.zip,.m2/org/camunda/**/license-book*.zip,.m2/org/camunda/**/camunda-webapp*.war,.m2/org/camunda/**/camunda-engine-rest*.war,.m2/org/camunda/**/camunda-example-invoice*.war,.m2/org/camunda/**/camunda-h2-webapp*.war,.m2/org/camunda/**/*-SNAPSHOT/**/*.tar.gz,.m2/org/camunda/**/*-SNAPSHOT/**/camunda-jboss-modules*.zip', followSymlinks: false", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "48cc2eae45529be7d0ac41fa451246ed2530aaa1"}, "originalPosition": 24}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c9787bc45cc29d17326c73f541689c23801d2553", "author": {"user": {"login": "yanavasileva", "name": null}}, "url": "https://github.com/camunda/camunda-bpm-platform/commit/c9787bc45cc29d17326c73f541689c23801d2553", "committedDate": "2020-11-23T12:23:35Z", "message": "fix local repo\n\nadd configFileProvider\n\nfix branches\n\nadd nsu option\n\nadd debug\n\nremove unstash\n\nfix repo\n\nreturn assembly\n\ntest\n\ntest\n\ncheck repo\n\ntest\n\nfix\n\nadd qa and distro stashes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bf64f8776eed2191d56228c09dd9ddcf4296df81", "author": {"user": {"login": "yanavasileva", "name": null}}, "url": "https://github.com/camunda/camunda-bpm-platform/commit/bf64f8776eed2191d56228c09dd9ddcf4296df81", "committedDate": "2020-11-23T12:23:38Z", "message": "return pipeline-master reference\n\ntest archiveArtifacts\n\nrevert test\n\nadd frontend-sources\n\nadjust artifact pattern\n\nadd webapp war\n\nadd license book zip\n\nadd branch resolve\n\ntest branch\n\narchive more artifacts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f040d28f9d5cfe4d45b057b42ee937f700d8724b", "author": {"user": {"login": "yanavasileva", "name": null}}, "url": "https://github.com/camunda/camunda-bpm-platform/commit/f040d28f9d5cfe4d45b057b42ee937f700d8724b", "committedDate": "2020-11-23T12:23:38Z", "message": "adjust archiveArtifacts"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "01b7eaa8a0539dd977b340b85930dbbf14e14b96", "author": {"user": {"login": "yanavasileva", "name": null}}, "url": "https://github.com/camunda/camunda-bpm-platform/commit/01b7eaa8a0539dd977b340b85930dbbf14e14b96", "committedDate": "2020-11-23T11:20:32Z", "message": "wip"}, "afterCommit": {"oid": "a87aa061977ea2fc15ec7f8227c4400ad1e9cce3", "author": {"user": {"login": "yanavasileva", "name": null}}, "url": "https://github.com/camunda/camunda-bpm-platform/commit/a87aa061977ea2fc15ec7f8227c4400ad1e9cce3", "committedDate": "2020-11-23T12:23:38Z", "message": "wip"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d08700e4645de9f49e4b408eda056424b4a167da", "author": {"user": {"login": "yanavasileva", "name": null}}, "url": "https://github.com/camunda/camunda-bpm-platform/commit/d08700e4645de9f49e4b408eda056424b4a167da", "committedDate": "2020-11-23T12:28:35Z", "message": "wip"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a87aa061977ea2fc15ec7f8227c4400ad1e9cce3", "author": {"user": {"login": "yanavasileva", "name": null}}, "url": "https://github.com/camunda/camunda-bpm-platform/commit/a87aa061977ea2fc15ec7f8227c4400ad1e9cce3", "committedDate": "2020-11-23T12:23:38Z", "message": "wip"}, "afterCommit": {"oid": "d08700e4645de9f49e4b408eda056424b4a167da", "author": {"user": {"login": "yanavasileva", "name": null}}, "url": "https://github.com/camunda/camunda-bpm-platform/commit/d08700e4645de9f49e4b408eda056424b4a167da", "committedDate": "2020-11-23T12:28:35Z", "message": "wip"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "34edafe1d6b184e5cae4efe4e7c3220f3921873c", "author": {"user": {"login": "yanavasileva", "name": null}}, "url": "https://github.com/camunda/camunda-bpm-platform/commit/34edafe1d6b184e5cae4efe4e7c3220f3921873c", "committedDate": "2020-11-23T12:30:27Z", "message": "wip"}, "afterCommit": {"oid": "7038a72b8cce1a670f789b8810c9ca5b28de1b1b", "author": {"user": {"login": "yanavasileva", "name": null}}, "url": "https://github.com/camunda/camunda-bpm-platform/commit/7038a72b8cce1a670f789b8810c9ca5b28de1b1b", "committedDate": "2020-11-23T12:40:07Z", "message": "wip"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a53cb9634d94c876bfa8e09c2fe295e075ebeed7", "author": {"user": {"login": "yanavasileva", "name": null}}, "url": "https://github.com/camunda/camunda-bpm-platform/commit/a53cb9634d94c876bfa8e09c2fe295e075ebeed7", "committedDate": "2020-11-23T12:42:20Z", "message": "wip"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7038a72b8cce1a670f789b8810c9ca5b28de1b1b", "author": {"user": {"login": "yanavasileva", "name": null}}, "url": "https://github.com/camunda/camunda-bpm-platform/commit/7038a72b8cce1a670f789b8810c9ca5b28de1b1b", "committedDate": "2020-11-23T12:40:07Z", "message": "wip"}, "afterCommit": {"oid": "a53cb9634d94c876bfa8e09c2fe295e075ebeed7", "author": {"user": {"login": "yanavasileva", "name": null}}, "url": "https://github.com/camunda/camunda-bpm-platform/commit/a53cb9634d94c876bfa8e09c2fe295e075ebeed7", "committedDate": "2020-11-23T12:42:20Z", "message": "wip"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2NDM5NDU4", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1136#pullrequestreview-536439458", "createdAt": "2020-11-23T12:46:40Z", "commit": {"oid": "a53cb9634d94c876bfa8e09c2fe295e075ebeed7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2041, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}