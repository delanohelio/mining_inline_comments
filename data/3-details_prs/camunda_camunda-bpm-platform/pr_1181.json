{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM1MjAwNzQx", "number": 1181, "title": "CAM-12830: chore(ci): extract trigger downstream", "bodyText": "CAM-12830", "createdAt": "2020-12-09T14:00:10Z", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1181", "merged": true, "mergeCommit": {"oid": "1a888c0eb2215e461550098a105fdfcc19053a86"}, "closed": true, "closedAt": "2020-12-14T11:12:57Z", "author": {"login": "yanavasileva"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdkfg0ogBqjQwOTAxODM3MTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdmDx5_gH2gAyNTM1MjAwNzQxOjIwOWZiY2IxMjBjZjJhYjQyYjFiMjQ3NzYyMWI0NTNjZWQxMzdjMzU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a00d2fe4adf576e1c431f8de8bc1045826d783b0", "author": {"user": {"login": "yanavasileva", "name": null}}, "url": "https://github.com/camunda/camunda-bpm-platform/commit/a00d2fe4adf576e1c431f8de8bc1045826d783b0", "committedDate": "2020-12-09T13:49:26Z", "message": "wip"}, "afterCommit": {"oid": "bb90ad899d5a2f59f5231065cdc59ddd0626e987", "author": {"user": {"login": "yanavasileva", "name": null}}, "url": "https://github.com/camunda/camunda-bpm-platform/commit/bb90ad899d5a2f59f5231065cdc59ddd0626e987", "committedDate": "2020-12-09T14:21:10Z", "message": "wip"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "baa6cf4c8f62a9cbe884ea71a390375687d6c1b5", "author": {"user": {"login": "yanavasileva", "name": null}}, "url": "https://github.com/camunda/camunda-bpm-platform/commit/baa6cf4c8f62a9cbe884ea71a390375687d6c1b5", "committedDate": "2020-12-09T15:49:19Z", "message": "wip"}, "afterCommit": {"oid": "afbe149e579753e2415e121079d8d4fe535fd2be", "author": {"user": {"login": "yanavasileva", "name": null}}, "url": "https://github.com/camunda/camunda-bpm-platform/commit/afbe149e579753e2415e121079d8d4fe535fd2be", "committedDate": "2020-12-10T07:34:10Z", "message": "chore(ci): extract trigger downstream"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "afbe149e579753e2415e121079d8d4fe535fd2be", "author": {"user": {"login": "yanavasileva", "name": null}}, "url": "https://github.com/camunda/camunda-bpm-platform/commit/afbe149e579753e2415e121079d8d4fe535fd2be", "committedDate": "2020-12-10T07:34:10Z", "message": "chore(ci): extract trigger downstream"}, "afterCommit": {"oid": "62373fd2572f127dd9c2e6518297c4fddbf890e9", "author": {"user": {"login": "yanavasileva", "name": null}}, "url": "https://github.com/camunda/camunda-bpm-platform/commit/62373fd2572f127dd9c2e6518297c4fddbf890e9", "committedDate": "2020-12-10T07:35:42Z", "message": "chore(ci): extract trigger downstream"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwMDA5NjA1", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1181#pullrequestreview-550009605", "createdAt": "2020-12-11T11:15:32Z", "commit": {"oid": "62373fd2572f127dd9c2e6518297c4fddbf890e9"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxMToxNTozMlrOID0WGQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxMTozMzoxNlrOID06cQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDg3NDI2NQ==", "bodyText": "We should add a master label here. Otherwise, the EE branch won't be triggered on the master branch.", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1181#discussion_r540874265", "createdAt": "2020-12-11T11:15:32Z", "author": {"login": "koevskinikola"}, "path": "Jenkinsfile", "diffHunk": "@@ -101,31 +101,19 @@ pipeline {\n             params.EE_BRANCH_NAME = 'cambpm-ee-main/pipeline-master'\n           } else {\n             labels = JsonOutput.toJson(pullRequest.labels)\n+            shaCE = sh(script:\"git rev-parse HEAD\", returnStdout: true).trim()\n           }\n \n           if (cambpmWithLabels('webapp-integration','all-as','h2','websphere','weblogic','jbosseap','run','spring-boot','authorizations')) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "62373fd2572f127dd9c2e6518297c4fddbf890e9"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDg4MzU2OQ==", "bodyText": "The method signatures for the downstream branch triggers should be updated if changes to the camunda/cambpm-jenkins-shared-library#7 PR are made.", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1181#discussion_r540883569", "createdAt": "2020-12-11T11:33:16Z", "author": {"login": "koevskinikola"}, "path": "Jenkinsfile", "diffHunk": "@@ -101,31 +101,19 @@ pipeline {\n             params.EE_BRANCH_NAME = 'cambpm-ee-main/pipeline-master'\n           } else {\n             labels = JsonOutput.toJson(pullRequest.labels)\n+            shaCE = sh(script:\"git rev-parse HEAD\", returnStdout: true).trim()\n           }\n \n           if (cambpmWithLabels('webapp-integration','all-as','h2','websphere','weblogic','jbosseap','run','spring-boot','authorizations')) {\n-            build job: \"cambpm-ee/${params.EE_BRANCH_NAME}\", parameters: [\n-                    string(name: 'copyArtifactSelector', value: '<TriggeredBuildSelector plugin=\"copyartifact@1.45.1\">  <upstreamFilterStrategy>UseGlobalSetting</upstreamFilterStrategy>  <allowUpstreamDependencies>false</allowUpstreamDependencies></TriggeredBuildSelector>'),\n-                    booleanParam(name: 'STANDALONE', value: false),\n-                    string(name: 'CE_BRANCH_NAME', value: \"${env.BRANCH_NAME}\"),\n-                    string(name: 'PR_LABELS', value: labels)\n-            ], quietPeriod: 10, wait: false\n+            cambpmTriggerDownstream(\"cambpm-ee/${params.EE_BRANCH_NAME}\", labels, shaCE, true, true)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "62373fd2572f127dd9c2e6518297c4fddbf890e9"}, "originalPosition": 39}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77e2b78959243faf9f83a81575ebff606d52a102", "author": {"user": {"login": "yanavasileva", "name": null}}, "url": "https://github.com/camunda/camunda-bpm-platform/commit/77e2b78959243faf9f83a81575ebff606d52a102", "committedDate": "2020-12-11T13:31:22Z", "message": "chore(ci): extract trigger downstream"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "62373fd2572f127dd9c2e6518297c4fddbf890e9", "author": {"user": {"login": "yanavasileva", "name": null}}, "url": "https://github.com/camunda/camunda-bpm-platform/commit/62373fd2572f127dd9c2e6518297c4fddbf890e9", "committedDate": "2020-12-10T07:35:42Z", "message": "chore(ci): extract trigger downstream"}, "afterCommit": {"oid": "619bda2b7f8a681e8650909b16a70cda9e6ca70a", "author": {"user": {"login": "yanavasileva", "name": null}}, "url": "https://github.com/camunda/camunda-bpm-platform/commit/619bda2b7f8a681e8650909b16a70cda9e6ca70a", "committedDate": "2020-12-11T13:40:15Z", "message": "review hints"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "619bda2b7f8a681e8650909b16a70cda9e6ca70a", "author": {"user": {"login": "yanavasileva", "name": null}}, "url": "https://github.com/camunda/camunda-bpm-platform/commit/619bda2b7f8a681e8650909b16a70cda9e6ca70a", "committedDate": "2020-12-11T13:40:15Z", "message": "review hints"}, "afterCommit": {"oid": "7034d144ecdfb7d0445d2d5dc53ef86a3025c5e7", "author": {"user": {"login": "yanavasileva", "name": null}}, "url": "https://github.com/camunda/camunda-bpm-platform/commit/7034d144ecdfb7d0445d2d5dc53ef86a3025c5e7", "committedDate": "2020-12-11T14:15:16Z", "message": "review hints"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ba5924b5c0c08efbbb88e04578ebe2dbef263ef", "author": {"user": {"login": "yanavasileva", "name": null}}, "url": "https://github.com/camunda/camunda-bpm-platform/commit/2ba5924b5c0c08efbbb88e04578ebe2dbef263ef", "committedDate": "2020-12-11T14:59:44Z", "message": "review hints"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7034d144ecdfb7d0445d2d5dc53ef86a3025c5e7", "author": {"user": {"login": "yanavasileva", "name": null}}, "url": "https://github.com/camunda/camunda-bpm-platform/commit/7034d144ecdfb7d0445d2d5dc53ef86a3025c5e7", "committedDate": "2020-12-11T14:15:16Z", "message": "review hints"}, "afterCommit": {"oid": "2ba5924b5c0c08efbbb88e04578ebe2dbef263ef", "author": {"user": {"login": "yanavasileva", "name": null}}, "url": "https://github.com/camunda/camunda-bpm-platform/commit/2ba5924b5c0c08efbbb88e04578ebe2dbef263ef", "committedDate": "2020-12-11T14:59:44Z", "message": "review hints"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxMjM5NDkw", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1181#pullrequestreview-551239490", "createdAt": "2020-12-14T10:34:45Z", "commit": {"oid": "2ba5924b5c0c08efbbb88e04578ebe2dbef263ef"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxMjQwNDMz", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1181#pullrequestreview-551240433", "createdAt": "2020-12-14T10:35:56Z", "commit": {"oid": "2ba5924b5c0c08efbbb88e04578ebe2dbef263ef"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "209fbcb120cf2ab42b1b2477621b453ced137c35", "author": {"user": {"login": "yanavasileva", "name": null}}, "url": "https://github.com/camunda/camunda-bpm-platform/commit/209fbcb120cf2ab42b1b2477621b453ced137c35", "committedDate": "2020-12-14T11:10:35Z", "message": "remove branch"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2095, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}