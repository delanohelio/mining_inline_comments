{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzczMjQ0NDM5", "number": 2300, "reviewThreads": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxNzowOTo0MFrODeiPWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNVQxOToyNTowM1rODgLGeQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMzMzQ0ODU2OnYy", "diffSide": "RIGHT", "path": "addOns/selenium/src/main/javahelp/org/zaproxy/zap/extension/selenium/resources/help/contents/intro.html", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxNzowOTo0MFrOFnuSqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxOTozMzo1MFrOFo71zQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzE5NzIyNA==", "bodyText": "Drop \"it\" and capitalize \"Add\"? Also for labels and in text should Selenium have a cap as a title/name?", "url": "https://github.com/zaproxy/zap-extensions/pull/2300#discussion_r377197224", "createdAt": "2020-02-10T17:09:40Z", "author": {"login": "kingthorin"}, "path": "addOns/selenium/src/main/javahelp/org/zaproxy/zap/extension/selenium/resources/help/contents/intro.html", "diffHunk": "@@ -10,8 +10,13 @@ <H1>Selenium</H1>\n \t<p>The Selenium add-on provides WebDrivers, for other add-ons, to invoke and remotely\n \t\tcontrol web browsers. It's also bundled the HtmlUnit web browser, an headless Java based\n \t\tweb browser.\n+\t\t\n+\t<p>It add a 'Selenium' script type - these scripts are invoked whenever selenium launches a browser,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "89975f082054e1879b1b59a0d0908abfeadf7caf"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzIwMDM1NA==", "bodyText": "If so, changelog too \ud83d\udc4d", "url": "https://github.com/zaproxy/zap-extensions/pull/2300#discussion_r377200354", "createdAt": "2020-02-10T17:15:12Z", "author": {"login": "kingthorin"}, "path": "addOns/selenium/src/main/javahelp/org/zaproxy/zap/extension/selenium/resources/help/contents/intro.html", "diffHunk": "@@ -10,8 +10,13 @@ <H1>Selenium</H1>\n \t<p>The Selenium add-on provides WebDrivers, for other add-ons, to invoke and remotely\n \t\tcontrol web browsers. It's also bundled the HtmlUnit web browser, an headless Java based\n \t\tweb browser.\n+\t\t\n+\t<p>It add a 'Selenium' script type - these scripts are invoked whenever selenium launches a browser,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzE5NzIyNA=="}, "originalCommit": {"oid": "89975f082054e1879b1b59a0d0908abfeadf7caf"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODQwNzMzMg==", "bodyText": "So this is the help content, not much but its here :)\nBut it should be \"It adds a \"...", "url": "https://github.com/zaproxy/zap-extensions/pull/2300#discussion_r378407332", "createdAt": "2020-02-12T17:38:46Z", "author": {"login": "psiinon"}, "path": "addOns/selenium/src/main/javahelp/org/zaproxy/zap/extension/selenium/resources/help/contents/intro.html", "diffHunk": "@@ -10,8 +10,13 @@ <H1>Selenium</H1>\n \t<p>The Selenium add-on provides WebDrivers, for other add-ons, to invoke and remotely\n \t\tcontrol web browsers. It's also bundled the HtmlUnit web browser, an headless Java based\n \t\tweb browser.\n+\t\t\n+\t<p>It add a 'Selenium' script type - these scripts are invoked whenever selenium launches a browser,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzE5NzIyNA=="}, "originalCommit": {"oid": "89975f082054e1879b1b59a0d0908abfeadf7caf"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODQ2Nzc4OQ==", "bodyText": "Sorry I dunno what I thought this was when I wrote that summary content \ud83d\udc4e\nThanks \u2b50\ufe0f", "url": "https://github.com/zaproxy/zap-extensions/pull/2300#discussion_r378467789", "createdAt": "2020-02-12T19:33:50Z", "author": {"login": "kingthorin"}, "path": "addOns/selenium/src/main/javahelp/org/zaproxy/zap/extension/selenium/resources/help/contents/intro.html", "diffHunk": "@@ -10,8 +10,13 @@ <H1>Selenium</H1>\n \t<p>The Selenium add-on provides WebDrivers, for other add-ons, to invoke and remotely\n \t\tcontrol web browsers. It's also bundled the HtmlUnit web browser, an headless Java based\n \t\tweb browser.\n+\t\t\n+\t<p>It add a 'Selenium' script type - these scripts are invoked whenever selenium launches a browser,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzE5NzIyNA=="}, "originalCommit": {"oid": "89975f082054e1879b1b59a0d0908abfeadf7caf"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMzMzQ1ODIwOnYy", "diffSide": "RIGHT", "path": "addOns/selenium/src/main/zapHomeFiles/scripts/templates/selenium/Selenium Juice Shop.js", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxNzoxMjoxMFrOFnuYaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxNzoxMjoxMFrOFnuYaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzE5ODY5Nw==", "bodyText": "Drop the first \"in \" :)", "url": "https://github.com/zaproxy/zap-extensions/pull/2300#discussion_r377198697", "createdAt": "2020-02-10T17:12:10Z", "author": {"login": "kingthorin"}, "path": "addOns/selenium/src/main/zapHomeFiles/scripts/templates/selenium/Selenium Juice Shop.js", "diffHunk": "@@ -0,0 +1,49 @@\n+// This script will log in a browser into Juice Shop when forced user mode is enabled.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "89975f082054e1879b1b59a0d0908abfeadf7caf"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMzMzQ1OTgwOnYy", "diffSide": "RIGHT", "path": "addOns/selenium/src/main/zapHomeFiles/scripts/templates/selenium/Selenium Juice Shop.js", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxNzoxMjozN1rOFnuZaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxNzoxMjozN1rOFnuZaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzE5ODk1Mw==", "bodyText": "... set up to authenticate correctly.", "url": "https://github.com/zaproxy/zap-extensions/pull/2300#discussion_r377198953", "createdAt": "2020-02-10T17:12:37Z", "author": {"login": "kingthorin"}, "path": "addOns/selenium/src/main/zapHomeFiles/scripts/templates/selenium/Selenium Juice Shop.js", "diffHunk": "@@ -0,0 +1,49 @@\n+// This script will log in a browser into Juice Shop when forced user mode is enabled.\n+// The  'Juice Shop Session Management.js' script must have been set to authenticate up correctly.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "89975f082054e1879b1b59a0d0908abfeadf7caf"}, "originalPosition": 2}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMzMzQ2MDgzOnYy", "diffSide": "RIGHT", "path": "addOns/selenium/src/main/zapHomeFiles/scripts/templates/selenium/Selenium Juice Shop.js", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxNzoxMjo1NFrOFnuaAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxNzoxMjo1NFrOFnuaAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzE5OTEwNg==", "bodyText": "...2 lines indicated below:", "url": "https://github.com/zaproxy/zap-extensions/pull/2300#discussion_r377199106", "createdAt": "2020-02-10T17:12:54Z", "author": {"login": "kingthorin"}, "path": "addOns/selenium/src/main/zapHomeFiles/scripts/templates/selenium/Selenium Juice Shop.js", "diffHunk": "@@ -0,0 +1,49 @@\n+// This script will log in a browser into Juice Shop when forced user mode is enabled.\n+// The  'Juice Shop Session Management.js' script must have been set to authenticate up correctly.\n+// The version of that script included with ZAP 2.9.0 also needs to be be tweaked to add the 2 lines indicated.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "89975f082054e1879b1b59a0d0908abfeadf7caf"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MDYyMjQ4OnYy", "diffSide": "RIGHT", "path": "addOns/selenium/src/main/java/org/zaproxy/zap/extension/selenium/ExtensionSelenium.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNVQxOTowOToxNFrOFqQM6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxMzo0MDo1NVrOF-WVkA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg0OTk2Mw==", "bodyText": "Could be moved to an instance variable to avoid getting the extension each time in getWebDriverImpl.", "url": "https://github.com/zaproxy/zap-extensions/pull/2300#discussion_r379849963", "createdAt": "2020-02-15T19:09:14Z", "author": {"login": "thc202"}, "path": "addOns/selenium/src/main/java/org/zaproxy/zap/extension/selenium/ExtensionSelenium.java", "diffHunk": "@@ -187,6 +193,26 @@ public void hook(ExtensionHook extensionHook) {\n         }\n \n         extensionHook.addApiImplementor(seleniumApi);\n+\n+        ExtensionScript extScript =", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "601171ea804fb9619bba305796900989c2d288e1"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDkyMjAwMA==", "bodyText": "Done", "url": "https://github.com/zaproxy/zap-extensions/pull/2300#discussion_r400922000", "createdAt": "2020-03-31T13:40:55Z", "author": {"login": "psiinon"}, "path": "addOns/selenium/src/main/java/org/zaproxy/zap/extension/selenium/ExtensionSelenium.java", "diffHunk": "@@ -187,6 +193,26 @@ public void hook(ExtensionHook extensionHook) {\n         }\n \n         extensionHook.addApiImplementor(seleniumApi);\n+\n+        ExtensionScript extScript =", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg0OTk2Mw=="}, "originalCommit": {"oid": "601171ea804fb9619bba305796900989c2d288e1"}, "originalPosition": 37}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MDYyMjUzOnYy", "diffSide": "RIGHT", "path": "addOns/selenium/src/main/java/org/zaproxy/zap/extension/selenium/ExtensionSelenium.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNVQxOTowOToyMlrOFqQM8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNVQxOTowOToyMlrOFqQM8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg0OTk3MA==", "bodyText": "Needs to be removed on unload.", "url": "https://github.com/zaproxy/zap-extensions/pull/2300#discussion_r379849970", "createdAt": "2020-02-15T19:09:22Z", "author": {"login": "thc202"}, "path": "addOns/selenium/src/main/java/org/zaproxy/zap/extension/selenium/ExtensionSelenium.java", "diffHunk": "@@ -187,6 +193,26 @@ public void hook(ExtensionHook extensionHook) {\n         }\n \n         extensionHook.addApiImplementor(seleniumApi);\n+\n+        ExtensionScript extScript =\n+                Control.getSingleton().getExtensionLoader().getExtension(ExtensionScript.class);\n+        if (extScript != null) {\n+            extScript.registerScriptType(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "601171ea804fb9619bba305796900989c2d288e1"}, "originalPosition": 40}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MDYyMjU3OnYy", "diffSide": "RIGHT", "path": "addOns/selenium/src/main/java/org/zaproxy/zap/extension/selenium/ExtensionSelenium.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNVQxOTowOTozMVrOFqQM-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxMzo0MToxMFrOF-WWSg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg0OTk3Ng==", "bodyText": "We should also handle/catch the Exception here.", "url": "https://github.com/zaproxy/zap-extensions/pull/2300#discussion_r379849976", "createdAt": "2020-02-15T19:09:31Z", "author": {"login": "thc202"}, "path": "addOns/selenium/src/main/java/org/zaproxy/zap/extension/selenium/ExtensionSelenium.java", "diffHunk": "@@ -634,9 +660,46 @@ private WebDriver getWebDriverImpl(\n         if (proxyAddress == null) {\n             return webDriverProviders.get(providedBrowser.getProviderId()).getWebDriver(requester);\n         }\n-        return webDriverProviders\n-                .get(providedBrowser.getProviderId())\n-                .getWebDriver(requester, proxyAddress, proxyPort);\n+        WebDriver wd =\n+                webDriverProviders\n+                        .get(providedBrowser.getProviderId())\n+                        .getWebDriver(requester, proxyAddress, proxyPort);\n+        ExtensionScript extScript =\n+                Control.getSingleton().getExtensionLoader().getExtension(ExtensionScript.class);\n+        if (extScript != null) {\n+            List<ScriptWrapper> scripts = extScript.getScripts(SCRIPT_TYPE_SELENIUM);\n+            for (ScriptWrapper script : scripts) {\n+                try {\n+                    if (script.isEnabled()) {\n+                        SeleniumScript s = extScript.getInterface(script, SeleniumScript.class);\n+\n+                        if (s != null) {\n+                            new Thread(\"ZAP-selenium-script\") {\n+                                @Override\n+                                public void run() {\n+                                    s.browserLaunched(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "601171ea804fb9619bba305796900989c2d288e1"}, "originalPosition": 83}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDg0NjA0Mg==", "bodyText": "Doesnt the outer try-catch statement do this?", "url": "https://github.com/zaproxy/zap-extensions/pull/2300#discussion_r400846042", "createdAt": "2020-03-31T11:43:03Z", "author": {"login": "psiinon"}, "path": "addOns/selenium/src/main/java/org/zaproxy/zap/extension/selenium/ExtensionSelenium.java", "diffHunk": "@@ -634,9 +660,46 @@ private WebDriver getWebDriverImpl(\n         if (proxyAddress == null) {\n             return webDriverProviders.get(providedBrowser.getProviderId()).getWebDriver(requester);\n         }\n-        return webDriverProviders\n-                .get(providedBrowser.getProviderId())\n-                .getWebDriver(requester, proxyAddress, proxyPort);\n+        WebDriver wd =\n+                webDriverProviders\n+                        .get(providedBrowser.getProviderId())\n+                        .getWebDriver(requester, proxyAddress, proxyPort);\n+        ExtensionScript extScript =\n+                Control.getSingleton().getExtensionLoader().getExtension(ExtensionScript.class);\n+        if (extScript != null) {\n+            List<ScriptWrapper> scripts = extScript.getScripts(SCRIPT_TYPE_SELENIUM);\n+            for (ScriptWrapper script : scripts) {\n+                try {\n+                    if (script.isEnabled()) {\n+                        SeleniumScript s = extScript.getInterface(script, SeleniumScript.class);\n+\n+                        if (s != null) {\n+                            new Thread(\"ZAP-selenium-script\") {\n+                                @Override\n+                                public void run() {\n+                                    s.browserLaunched(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg0OTk3Ng=="}, "originalCommit": {"oid": "601171ea804fb9619bba305796900989c2d288e1"}, "originalPosition": 83}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDg1MjE5MQ==", "bodyText": "No, this is already in the thread.", "url": "https://github.com/zaproxy/zap-extensions/pull/2300#discussion_r400852191", "createdAt": "2020-03-31T11:54:32Z", "author": {"login": "thc202"}, "path": "addOns/selenium/src/main/java/org/zaproxy/zap/extension/selenium/ExtensionSelenium.java", "diffHunk": "@@ -634,9 +660,46 @@ private WebDriver getWebDriverImpl(\n         if (proxyAddress == null) {\n             return webDriverProviders.get(providedBrowser.getProviderId()).getWebDriver(requester);\n         }\n-        return webDriverProviders\n-                .get(providedBrowser.getProviderId())\n-                .getWebDriver(requester, proxyAddress, proxyPort);\n+        WebDriver wd =\n+                webDriverProviders\n+                        .get(providedBrowser.getProviderId())\n+                        .getWebDriver(requester, proxyAddress, proxyPort);\n+        ExtensionScript extScript =\n+                Control.getSingleton().getExtensionLoader().getExtension(ExtensionScript.class);\n+        if (extScript != null) {\n+            List<ScriptWrapper> scripts = extScript.getScripts(SCRIPT_TYPE_SELENIUM);\n+            for (ScriptWrapper script : scripts) {\n+                try {\n+                    if (script.isEnabled()) {\n+                        SeleniumScript s = extScript.getInterface(script, SeleniumScript.class);\n+\n+                        if (s != null) {\n+                            new Thread(\"ZAP-selenium-script\") {\n+                                @Override\n+                                public void run() {\n+                                    s.browserLaunched(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg0OTk3Ng=="}, "originalCommit": {"oid": "601171ea804fb9619bba305796900989c2d288e1"}, "originalPosition": 83}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDkyMjE4Ng==", "bodyText": "Good point. Now done.", "url": "https://github.com/zaproxy/zap-extensions/pull/2300#discussion_r400922186", "createdAt": "2020-03-31T13:41:10Z", "author": {"login": "psiinon"}, "path": "addOns/selenium/src/main/java/org/zaproxy/zap/extension/selenium/ExtensionSelenium.java", "diffHunk": "@@ -634,9 +660,46 @@ private WebDriver getWebDriverImpl(\n         if (proxyAddress == null) {\n             return webDriverProviders.get(providedBrowser.getProviderId()).getWebDriver(requester);\n         }\n-        return webDriverProviders\n-                .get(providedBrowser.getProviderId())\n-                .getWebDriver(requester, proxyAddress, proxyPort);\n+        WebDriver wd =\n+                webDriverProviders\n+                        .get(providedBrowser.getProviderId())\n+                        .getWebDriver(requester, proxyAddress, proxyPort);\n+        ExtensionScript extScript =\n+                Control.getSingleton().getExtensionLoader().getExtension(ExtensionScript.class);\n+        if (extScript != null) {\n+            List<ScriptWrapper> scripts = extScript.getScripts(SCRIPT_TYPE_SELENIUM);\n+            for (ScriptWrapper script : scripts) {\n+                try {\n+                    if (script.isEnabled()) {\n+                        SeleniumScript s = extScript.getInterface(script, SeleniumScript.class);\n+\n+                        if (s != null) {\n+                            new Thread(\"ZAP-selenium-script\") {\n+                                @Override\n+                                public void run() {\n+                                    s.browserLaunched(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg0OTk3Ng=="}, "originalCommit": {"oid": "601171ea804fb9619bba305796900989c2d288e1"}, "originalPosition": 83}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MDYyMjc0OnYy", "diffSide": "RIGHT", "path": "addOns/selenium/src/main/java/org/zaproxy/zap/extension/selenium/SeleniumScript.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNVQxOToxMDoxMlrOFqQNDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxMzo0MToyN1rOF-WXEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg0OTk5OA==", "bodyText": "IMO we should use a parameter object (or add a \"utils\" param) to allow to add more state/behaviour without breaking compatibility.", "url": "https://github.com/zaproxy/zap-extensions/pull/2300#discussion_r379849998", "createdAt": "2020-02-15T19:10:12Z", "author": {"login": "thc202"}, "path": "addOns/selenium/src/main/java/org/zaproxy/zap/extension/selenium/SeleniumScript.java", "diffHunk": "@@ -0,0 +1,33 @@\n+/*\n+ * Zed Attack Proxy (ZAP) and its related class files.\n+ *\n+ * ZAP is an HTTP/HTTPS proxy for assessing web application security.\n+ *\n+ * Copyright 2020 The ZAP Development Team\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.zaproxy.zap.extension.selenium;\n+\n+import org.openqa.selenium.WebDriver;\n+\n+/** A script run whenever a browser is launched using selenium. */\n+public interface SeleniumScript {\n+\n+    void browserLaunched(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "601171ea804fb9619bba305796900989c2d288e1"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDkyMjM4NA==", "bodyText": "Yeah, good thinking - done.", "url": "https://github.com/zaproxy/zap-extensions/pull/2300#discussion_r400922384", "createdAt": "2020-03-31T13:41:27Z", "author": {"login": "psiinon"}, "path": "addOns/selenium/src/main/java/org/zaproxy/zap/extension/selenium/SeleniumScript.java", "diffHunk": "@@ -0,0 +1,33 @@\n+/*\n+ * Zed Attack Proxy (ZAP) and its related class files.\n+ *\n+ * ZAP is an HTTP/HTTPS proxy for assessing web application security.\n+ *\n+ * Copyright 2020 The ZAP Development Team\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.zaproxy.zap.extension.selenium;\n+\n+import org.openqa.selenium.WebDriver;\n+\n+/** A script run whenever a browser is launched using selenium. */\n+public interface SeleniumScript {\n+\n+    void browserLaunched(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg0OTk5OA=="}, "originalCommit": {"oid": "601171ea804fb9619bba305796900989c2d288e1"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MDYyMjgyOnYy", "diffSide": "RIGHT", "path": "addOns/selenium/src/main/java/org/zaproxy/zap/extension/selenium/SeleniumScript.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNVQxOToxMDoxNFrOFqQNFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNVQxOToxMDoxNFrOFqQNFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg1MDAwNg==", "bodyText": "browserId", "url": "https://github.com/zaproxy/zap-extensions/pull/2300#discussion_r379850006", "createdAt": "2020-02-15T19:10:14Z", "author": {"login": "thc202"}, "path": "addOns/selenium/src/main/java/org/zaproxy/zap/extension/selenium/SeleniumScript.java", "diffHunk": "@@ -0,0 +1,33 @@\n+/*\n+ * Zed Attack Proxy (ZAP) and its related class files.\n+ *\n+ * ZAP is an HTTP/HTTPS proxy for assessing web application security.\n+ *\n+ * Copyright 2020 The ZAP Development Team\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.zaproxy.zap.extension.selenium;\n+\n+import org.openqa.selenium.WebDriver;\n+\n+/** A script run whenever a browser is launched using selenium. */\n+public interface SeleniumScript {\n+\n+    void browserLaunched(\n+            WebDriver wd,\n+            int requester,\n+            String providedBrowserId,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "601171ea804fb9619bba305796900989c2d288e1"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MDYyMzMxOnYy", "diffSide": "RIGHT", "path": "addOns/selenium/src/main/javahelp/org/zaproxy/zap/extension/selenium/resources/help/contents/intro.html", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNVQxOToxMToxNFrOFqQNTw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNVQxOToxMToxNFrOFqQNTw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg1MDA2Mw==", "bodyText": "Could link to Selenium JavaDoc/docs (to know about the WebDriver interface and other helpful classes, e.g. WebDriverWait).", "url": "https://github.com/zaproxy/zap-extensions/pull/2300#discussion_r379850063", "createdAt": "2020-02-15T19:11:14Z", "author": {"login": "thc202"}, "path": "addOns/selenium/src/main/javahelp/org/zaproxy/zap/extension/selenium/resources/help/contents/intro.html", "diffHunk": "@@ -10,8 +10,13 @@ <H1>Selenium</H1>\n \t<p>The Selenium add-on provides WebDrivers, for other add-ons, to invoke and remotely\n \t\tcontrol web browsers. It's also bundled the HtmlUnit web browser, an headless Java based\n \t\tweb browser.\n+\t\t\n+\t<p>It adds a 'Selenium' script type - these scripts are invoked whenever selenium launches a browser,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "601171ea804fb9619bba305796900989c2d288e1"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MDYyMzQyOnYy", "diffSide": "RIGHT", "path": "addOns/selenium/src/main/javahelp/org/zaproxy/zap/extension/selenium/resources/help/contents/intro.html", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNVQxOToxMToyNFrOFqQNWg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxMzo0MTo0NlrOF-WYAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg1MDA3NA==", "bodyText": "These scripts \u2192 The Selenium scripts?\nShouldn't we say this when describing the script type above? Also, should we be more generic? e.g. ...and can interact with it, for example, run JavaScript scripts, access URLs, fill forms, click buttons....", "url": "https://github.com/zaproxy/zap-extensions/pull/2300#discussion_r379850074", "createdAt": "2020-02-15T19:11:24Z", "author": {"login": "thc202"}, "path": "addOns/selenium/src/main/javahelp/org/zaproxy/zap/extension/selenium/resources/help/contents/intro.html", "diffHunk": "@@ -10,8 +10,13 @@ <H1>Selenium</H1>\n \t<p>The Selenium add-on provides WebDrivers, for other add-ons, to invoke and remotely\n \t\tcontrol web browsers. It's also bundled the HtmlUnit web browser, an headless Java based\n \t\tweb browser.\n+\t\t\n+\t<p>It adds a 'Selenium' script type - these scripts are invoked whenever selenium launches a browser,\n+\tfor example for the Ajax Spider or for manual browsing. \n+\t\n \t<p>The add-on also adds a right click option to ZAP panels that list URLs (such at the History and Sites tree)\n-\twhich allows you to open the selected URL in any of the supported browsers.\n+\twhich allows you to open the selected URL in any of the supported browsers. These scripts have access to the \n+\tlaunched browser and can run JavaScript commands on it.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "601171ea804fb9619bba305796900989c2d288e1"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDkyMjYyNA==", "bodyText": "Done.", "url": "https://github.com/zaproxy/zap-extensions/pull/2300#discussion_r400922624", "createdAt": "2020-03-31T13:41:46Z", "author": {"login": "psiinon"}, "path": "addOns/selenium/src/main/javahelp/org/zaproxy/zap/extension/selenium/resources/help/contents/intro.html", "diffHunk": "@@ -10,8 +10,13 @@ <H1>Selenium</H1>\n \t<p>The Selenium add-on provides WebDrivers, for other add-ons, to invoke and remotely\n \t\tcontrol web browsers. It's also bundled the HtmlUnit web browser, an headless Java based\n \t\tweb browser.\n+\t\t\n+\t<p>It adds a 'Selenium' script type - these scripts are invoked whenever selenium launches a browser,\n+\tfor example for the Ajax Spider or for manual browsing. \n+\t\n \t<p>The add-on also adds a right click option to ZAP panels that list URLs (such at the History and Sites tree)\n-\twhich allows you to open the selected URL in any of the supported browsers.\n+\twhich allows you to open the selected URL in any of the supported browsers. These scripts have access to the \n+\tlaunched browser and can run JavaScript commands on it.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg1MDA3NA=="}, "originalCommit": {"oid": "601171ea804fb9619bba305796900989c2d288e1"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MDYyMzQ0OnYy", "diffSide": "RIGHT", "path": "addOns/selenium/src/main/zapHomeFiles/scripts/templates/selenium/Selenium Juice Shop.js", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNVQxOToxMToyN1rOFqQNXA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNVQxOToxMToyN1rOFqQNXA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg1MDA3Ng==", "bodyText": "Two spaces after \"The\".", "url": "https://github.com/zaproxy/zap-extensions/pull/2300#discussion_r379850076", "createdAt": "2020-02-15T19:11:27Z", "author": {"login": "thc202"}, "path": "addOns/selenium/src/main/zapHomeFiles/scripts/templates/selenium/Selenium Juice Shop.js", "diffHunk": "@@ -0,0 +1,49 @@\n+// This script will log a browser into Juice Shop when forced user mode is enabled.\n+// The  'Juice Shop Session Management.js' script must have been set to authenticate correctly.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "601171ea804fb9619bba305796900989c2d288e1"}, "originalPosition": 2}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MDYyNDU5OnYy", "diffSide": "RIGHT", "path": "addOns/selenium/src/main/zapHomeFiles/scripts/templates/selenium/Selenium default template.js", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNVQxOToxNDoyNVrOFqQN8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNVQxOToxNDoyNVrOFqQN8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg1MDIyNg==", "bodyText": "We should provide this behaviour with the parameter/utils object (e.g. utils.waitFor('http://example.org') or utils.waitForPageAccess()), this is expected to be used by most scripts.\nThis needs a timeout, otherwise it might lead to an infinite loop (cases in the following comment).\nIt needs to obtain the current URL inside the loop otherwise this will not work properly if the browser is started with about:blank or if the browser is closed before accessing any URL.", "url": "https://github.com/zaproxy/zap-extensions/pull/2300#discussion_r379850226", "createdAt": "2020-02-15T19:14:25Z", "author": {"login": "thc202"}, "path": "addOns/selenium/src/main/zapHomeFiles/scripts/templates/selenium/Selenium default template.js", "diffHunk": "@@ -0,0 +1,13 @@\n+// The browserLaunched function is called whenever a browser is launched from ZAP using selenium.\n+function browserLaunched(wd, requester, providedBrowserId, proxyAddress, proxyPort) {\n+\tvar url = wd.getCurrentUrl();\n+\twhile (! url.startsWith(\"http\")) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "601171ea804fb9619bba305796900989c2d288e1"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MDYyNTkxOnYy", "diffSide": "RIGHT", "path": "addOns/selenium/src/main/zapHomeFiles/scripts/templates/selenium/Selenium default template.js", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNVQxOToxNzo0OVrOFqQOow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxMzo0MzowOFrOF-Wb_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg1MDQwMw==", "bodyText": "Worth adding JSDoc describing the parameters.", "url": "https://github.com/zaproxy/zap-extensions/pull/2300#discussion_r379850403", "createdAt": "2020-02-15T19:17:49Z", "author": {"login": "thc202"}, "path": "addOns/selenium/src/main/zapHomeFiles/scripts/templates/selenium/Selenium default template.js", "diffHunk": "@@ -0,0 +1,13 @@\n+// The browserLaunched function is called whenever a browser is launched from ZAP using selenium.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "601171ea804fb9619bba305796900989c2d288e1"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDkyMzY0Nw==", "bodyText": "Have added comments to the default template.", "url": "https://github.com/zaproxy/zap-extensions/pull/2300#discussion_r400923647", "createdAt": "2020-03-31T13:43:08Z", "author": {"login": "psiinon"}, "path": "addOns/selenium/src/main/zapHomeFiles/scripts/templates/selenium/Selenium default template.js", "diffHunk": "@@ -0,0 +1,13 @@\n+// The browserLaunched function is called whenever a browser is launched from ZAP using selenium.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg1MDQwMw=="}, "originalCommit": {"oid": "601171ea804fb9619bba305796900989c2d288e1"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MDYyOTA1OnYy", "diffSide": "RIGHT", "path": "addOns/selenium/src/main/java/org/zaproxy/zap/extension/selenium/ExtensionSelenium.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNVQxOToyNTowM1rOFqQQQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNVQxOToyNTowM1rOFqQQQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg1MDgxOQ==", "bodyText": "Should the scripts be called for these browsers too?", "url": "https://github.com/zaproxy/zap-extensions/pull/2300#discussion_r379850819", "createdAt": "2020-02-15T19:25:03Z", "author": {"login": "thc202"}, "path": "addOns/selenium/src/main/java/org/zaproxy/zap/extension/selenium/ExtensionSelenium.java", "diffHunk": "@@ -634,9 +660,46 @@ private WebDriver getWebDriverImpl(\n         if (proxyAddress == null) {\n             return webDriverProviders.get(providedBrowser.getProviderId()).getWebDriver(requester);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "601171ea804fb9619bba305796900989c2d288e1"}, "originalPosition": 61}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 728, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}