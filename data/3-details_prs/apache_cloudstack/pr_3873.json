{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcyMzc4Njk0", "number": 3873, "title": "Fixed root volume resize from ui", "bodyText": "Description\n\nThis PR fixes the volume resize action for a root volume from the UI.\n\n\n\n\n\nFixes: #3860 #3874\nTypes of changes\n\n\n Breaking change (fix or feature that would cause existing functionality to change)\n New feature (non-breaking change which adds functionality)\n Bug fix (non-breaking change which fixes an issue)\n Enhancement (improves an existing feature and functionality)\n Cleanup (Code refactoring and cleanup, that may add test cases)\n\nScreenshots (if appropriate):\n\nHow Has This Been Tested?\n\n\n\nThis has been tested by creating an instance and resizing the root volume. The root volume size is then verified in storage metrics.", "createdAt": "2020-02-07T12:02:46Z", "url": "https://github.com/apache/cloudstack/pull/3873", "merged": true, "mergeCommit": {"oid": "5ae65bfab058a37eda0f90f9a495658ae7f3d37e"}, "closed": true, "closedAt": "2020-02-12T13:33:14Z", "author": {"login": "Spaceman1984"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcB96D5AH2gAyMzcyMzc4Njk0OmQ2Y2I2ZDVmNmRkZWFkMzk0MmYyZmY1NWY1ZjE4NzIwZDk2ZmFmYWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcDiIXhAFqTM1NzI2NDYyNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d6cb6d5f6ddead3942f2ff55f5f18720d96fafad", "author": {"user": {"login": "Spaceman1984", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/d6cb6d5f6ddead3942f2ff55f5f18720d96fafad", "committedDate": "2020-02-07T11:47:38Z", "message": "Fixed root volume resize from ui"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1NTM1OTU5", "url": "https://github.com/apache/cloudstack/pull/3873#pullrequestreview-355535959", "createdAt": "2020-02-08T07:46:22Z", "commit": {"oid": "d6cb6d5f6ddead3942f2ff55f5f18720d96fafad"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d57d20d66c114053fbde34cc9c2a855bc1c257aa", "author": {"user": {"login": "Spaceman1984", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/d57d20d66c114053fbde34cc9c2a855bc1c257aa", "committedDate": "2020-02-10T08:41:25Z", "message": "Fixed api error when diskoffering is null"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5ab126d8a1c5c0c0e7770f3b16cfc6e2d04e9b18", "author": {"user": {"login": "Spaceman1984", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/5ab126d8a1c5c0c0e7770f3b16cfc6e2d04e9b18", "committedDate": "2020-02-10T09:38:18Z", "message": "Review logic change"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1ODIwMDk4", "url": "https://github.com/apache/cloudstack/pull/3873#pullrequestreview-355820098", "createdAt": "2020-02-10T10:15:56Z", "commit": {"oid": "5ab126d8a1c5c0c0e7770f3b16cfc6e2d04e9b18"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2NDYwMzMz", "url": "https://github.com/apache/cloudstack/pull/3873#pullrequestreview-356460333", "createdAt": "2020-02-11T07:52:06Z", "commit": {"oid": "5ab126d8a1c5c0c0e7770f3b16cfc6e2d04e9b18"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQwNzo1NTozOVrOFn_tBg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQwNzo1NTozOVrOFn_tBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzQ4MjUwMg==", "bodyText": "aren't we making an assumption here about the reason the offering is missing? We only want to allow it if it is missing because it is a root-disk. It looks like we are allowing some client side hacking; set the selectedDiskOfferingObj to null and you are good to go. (i didn't check the API)", "url": "https://github.com/apache/cloudstack/pull/3873#discussion_r377482502", "createdAt": "2020-02-11T07:55:39Z", "author": {"login": "DaanHoogland"}, "path": "ui/scripts/storage.js", "diffHunk": "@@ -1575,13 +1575,13 @@\n                                     if (newDiskOffering != null && newDiskOffering.length > 0) {\n                                         array1.push(\"&diskofferingid=\" + encodeURIComponent(newDiskOffering));\n                                     }\n-                                    if (selectedDiskOfferingObj.iscustomized == true) {\n+                                    if (selectedDiskOfferingObj == null || selectedDiskOfferingObj.iscustomized == true) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5ab126d8a1c5c0c0e7770f3b16cfc6e2d04e9b18"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e33e79962a6fb312154cc25410f25464b52f0337", "author": {"user": {"login": "Spaceman1984", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/e33e79962a6fb312154cc25410f25464b52f0337", "committedDate": "2020-02-11T08:20:06Z", "message": "Logic change"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b133952cf59cc7e4e6a0b34de71304fc79ebb07", "author": {"user": {"login": "Spaceman1984", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/1b133952cf59cc7e4e6a0b34de71304fc79ebb07", "committedDate": "2020-02-11T08:30:27Z", "message": "Removed extra bracket"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2NDgzNDg4", "url": "https://github.com/apache/cloudstack/pull/3873#pullrequestreview-356483488", "createdAt": "2020-02-11T08:44:56Z", "commit": {"oid": "1b133952cf59cc7e4e6a0b34de71304fc79ebb07"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU3MjY0NjI1", "url": "https://github.com/apache/cloudstack/pull/3873#pullrequestreview-357264625", "createdAt": "2020-02-12T08:33:46Z", "commit": {"oid": "1b133952cf59cc7e4e6a0b34de71304fc79ebb07"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4393, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}