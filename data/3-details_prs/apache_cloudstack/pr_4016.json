{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk5NTAyMjQx", "number": 4016, "title": "Fixed private gateway can't be deleted", "bodyText": "Description\n\nWhen the static route service is not available on the VPC and a static route is created, the static route is created in a revoked state.\nCurrently, the UI doesn't distinguish between active or revoked static routes.\nThis PR adds the missing state filter to the list routes command and only lists active routes in the UI.\nIt also ignores revoked routes when the private gateway is being removed but clears out the inactive routes before the gateway is removed.\n\n\n\n\n\nFixes #2908\nTypes of changes\n\n\n Breaking change (fix or feature that would cause existing functionality to change)\n New feature (non-breaking change which adds functionality)\n Bug fix (non-breaking change which fixes an issue)\n Enhancement (improves an existing feature and functionality)\n Cleanup (Code refactoring and cleanup, that may add test cases)\n\nScreenshots (if appropriate):\nHow Has This Been Tested?\n\n\n\nThis has been tested by creating a VPC with no services, adding a private gateway, adding a static route and deleting the gateway.", "createdAt": "2020-04-06T09:22:39Z", "url": "https://github.com/apache/cloudstack/pull/4016", "merged": true, "mergeCommit": {"oid": "86939e7f9dae71c09c98e7bc7f53c5b37bbad4ce"}, "closed": true, "closedAt": "2020-08-12T07:59:13Z", "author": {"login": "Spaceman1984"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcU67IfgH2gAyMzk5NTAyMjQxOjVjODgzYmVmNTYzNGI3OWFjMGQ0YTRlYTkzMDZiY2JkYjA2ZjdkZWY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc-GtYRgFqTQ2NTY3Njk0Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5c883bef5634b79ac0d4a4ea9306bcbdb06f7def", "author": {"user": {"login": "Spaceman1984", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/5c883bef5634b79ac0d4a4ea9306bcbdb06f7def", "committedDate": "2020-04-06T09:03:39Z", "message": "Fixed private gateway can't be deleted"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg4MDg0NDUz", "url": "https://github.com/apache/cloudstack/pull/4016#pullrequestreview-388084453", "createdAt": "2020-04-06T09:37:14Z", "commit": {"oid": "5c883bef5634b79ac0d4a4ea9306bcbdb06f7def"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg4MDg0ODYw", "url": "https://github.com/apache/cloudstack/pull/4016#pullrequestreview-388084860", "createdAt": "2020-04-06T09:37:47Z", "commit": {"oid": "5c883bef5634b79ac0d4a4ea9306bcbdb06f7def"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwOTozNzo0N1rOGBPkXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwOTozNzo0N1rOGBPkXg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzk1NjgzMA==", "bodyText": "gatewayId", "url": "https://github.com/apache/cloudstack/pull/4016#discussion_r403956830", "createdAt": "2020-04-06T09:37:47Z", "author": {"login": "weizhouapache"}, "path": "engine/schema/src/main/java/com/cloud/network/vpc/dao/StaticRouteDao.java", "diffHunk": "@@ -30,6 +30,8 @@\n \n     List<StaticRouteVO> listByVpcId(long vpcId);\n \n+    List<StaticRouteVO> listByGatewayId(long vpcId);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c883bef5634b79ac0d4a4ea9306bcbdb06f7def"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "056f43e111c28d35b378cc7ab8db9e9d4d23f2ad", "author": {"user": {"login": "Spaceman1984", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/056f43e111c28d35b378cc7ab8db9e9d4d23f2ad", "committedDate": "2020-04-06T09:39:57Z", "message": "Renamed var"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa7791277f2fcd8f5451d2f1c8c64f8c4c662c7a", "author": {"user": {"login": "Spaceman1984", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/aa7791277f2fcd8f5451d2f1c8c64f8c4c662c7a", "committedDate": "2020-04-08T12:42:30Z", "message": "Using remove instead of revoke method when cleaning up"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU3MjY1NzIw", "url": "https://github.com/apache/cloudstack/pull/4016#pullrequestreview-457265720", "createdAt": "2020-07-29T07:34:37Z", "commit": {"oid": "aa7791277f2fcd8f5451d2f1c8c64f8c4c662c7a"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYxNTA4MDAw", "url": "https://github.com/apache/cloudstack/pull/4016#pullrequestreview-461508000", "createdAt": "2020-08-05T09:48:01Z", "commit": {"oid": "aa7791277f2fcd8f5451d2f1c8c64f8c4c662c7a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0MDE1ODU0", "url": "https://github.com/apache/cloudstack/pull/4016#pullrequestreview-464015854", "createdAt": "2020-08-10T07:46:44Z", "commit": {"oid": "aa7791277f2fcd8f5451d2f1c8c64f8c4c662c7a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY1Njc2OTQy", "url": "https://github.com/apache/cloudstack/pull/4016#pullrequestreview-465676942", "createdAt": "2020-08-12T07:58:22Z", "commit": {"oid": "aa7791277f2fcd8f5451d2f1c8c64f8c4c662c7a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwNzo1ODoyM1rOG_WINQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwNzo1ODoyM1rOG_WINQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTA3NjAyMQ==", "bodyText": "@Spaceman1984 can you send the related change to Primate as well cc @davidjumani", "url": "https://github.com/apache/cloudstack/pull/4016#discussion_r469076021", "createdAt": "2020-08-12T07:58:23Z", "author": {"login": "rhtyd"}, "path": "ui/scripts/vpc.js", "diffHunk": "@@ -2652,7 +2652,8 @@\n                                                     url: createURL('listStaticRoutes'),\n                                                     data: {\n                                                         gatewayid: args.context.vpcGateways[0].id,\n-                                                        listAll: true\n+                                                        listAll: true,\n+                                                        state: \"Active\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aa7791277f2fcd8f5451d2f1c8c64f8c4c662c7a"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4179, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}