{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAxNzM2ODUy", "number": 4397, "title": "List VMs by Security Group & HA", "bodyText": "Description\n\nList VMs by \"security group ID\" and/or \"ha enabled\"\nImprove List VMs command allowing to list VMs filtering by security group or HA enabled.\n\n\n\n\n\nTypes of changes\n\n\n Breaking change (fix or feature that would cause existing functionality to change)\n New feature (non-breaking change which adds functionality)\n Bug fix (non-breaking change which fixes an issue)\n Enhancement (improves an existing feature and functionality)\n Cleanup (Code refactoring and cleanup, that may add test cases)\n\nHow Has This Been Tested?\n\n\n\nList VMs via API with different combinations. All worked fine.\n\n\nfilter vms with security group ID\nlist virtualmachines filter=id,name,haenable,securitygroup listall=true securitygroupid=<SG UUID>\n\n\nlist VMs according to the HA enabled\nlist virtualmachines filter=id,name,haenable,securitygroup listall=true haenable=true\nlist virtualmachines filter=id,name,haenable,securitygroup listall=true haenable=false\n\n\ncombione both added parameters\nlist virtualmachines filter=id,name,haenable,securitygroup listall=true haenable=false securitygroupid=<SG UUID>\nlist virtualmachines filter=id,name,haenable,securitygroup listall=true haenable=true securitygroupid=<SG UUID>\nlist virtualmachines filter=id,name,haenable,securitygroup listall=true haenable=false securitygroupid=<SG UUID2>\nlist virtualmachines filter=id,name,haenable,securitygroup listall=true haenable=true securitygroupid=<SG UUID2>", "createdAt": "2020-10-12T18:21:42Z", "url": "https://github.com/apache/cloudstack/pull/4397", "merged": true, "mergeCommit": {"oid": "2e32a3a94a376331a6ea34e64cccada2dbc3271c"}, "closed": true, "closedAt": "2020-10-14T07:26:48Z", "author": {"login": "GabrielBrascher"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdR3s8YgH2gAyNTAxNzM2ODUyOjJiMTljYjUyZmIxNmUyZDJlNTk2MWEwNTIzMDM2MjUyMzY2Y2VhN2U=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdSXF3rAFqTUwODAyNjcyMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2b19cb52fb16e2d2e5961a0523036252366cea7e", "author": {"user": {"login": "GabrielBrascher", "name": "Gabriel Beims Br\u00e4scher"}}, "url": "https://github.com/apache/cloudstack/commit/2b19cb52fb16e2d2e5961a0523036252366cea7e", "committedDate": "2020-10-12T17:47:49Z", "message": "List VMs by Security Group & HA"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3MDYwMTI0", "url": "https://github.com/apache/cloudstack/pull/4397#pullrequestreview-507060124", "createdAt": "2020-10-13T04:26:01Z", "commit": {"oid": "2b19cb52fb16e2d2e5961a0523036252366cea7e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QwNDoyNjowMVrOHgU8Cw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QwNDoyNjowMVrOHgU8Cw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzY1OTUzMQ==", "bodyText": "@GabrielBrascher I guess this is supposed to be isHaEnabled != null ?", "url": "https://github.com/apache/cloudstack/pull/4397#discussion_r503659531", "createdAt": "2020-10-13T04:26:01Z", "author": {"login": "Pearl1594"}, "path": "server/src/main/java/com/cloud/api/query/QueryManagerImpl.java", "diffHunk": "@@ -1016,10 +1024,18 @@\n             sc.setParameters(\"serviceOfferingId\", serviceOffId);\n         }\n \n+        if(securityGroupId != null) {\n+            sc.setParameters(\"securityGroupId\", securityGroupId);\n+        }\n+\n         if (display != null) {\n             sc.setParameters(\"display\", display);\n         }\n \n+        if (display != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b19cb52fb16e2d2e5961a0523036252366cea7e"}, "originalPosition": 56}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3MDc2MzQ3", "url": "https://github.com/apache/cloudstack/pull/4397#pullrequestreview-507076347", "createdAt": "2020-10-13T05:21:30Z", "commit": {"oid": "2b19cb52fb16e2d2e5961a0523036252366cea7e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QwNToyMTozMFrOHgVx8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QwNToyMTozMFrOHgVx8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzY3MzMzMQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if(securityGroupId != null) {\n          \n          \n            \n                    if (securityGroupId != null) {", "url": "https://github.com/apache/cloudstack/pull/4397#discussion_r503673331", "createdAt": "2020-10-13T05:21:30Z", "author": {"login": "sureshanaparti"}, "path": "server/src/main/java/com/cloud/api/query/QueryManagerImpl.java", "diffHunk": "@@ -1016,10 +1024,18 @@\n             sc.setParameters(\"serviceOfferingId\", serviceOffId);\n         }\n \n+        if(securityGroupId != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b19cb52fb16e2d2e5961a0523036252366cea7e"}, "originalPosition": 48}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "91713acb867a83e4259ca84c99ed2ea2d2dc72c7", "author": {"user": {"login": "GabrielBrascher", "name": "Gabriel Beims Br\u00e4scher"}}, "url": "https://github.com/apache/cloudstack/commit/91713acb867a83e4259ca84c99ed2ea2d2dc72c7", "committedDate": "2020-10-13T08:10:37Z", "message": "address reviewers"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3OTg3NDMx", "url": "https://github.com/apache/cloudstack/pull/4397#pullrequestreview-507987431", "createdAt": "2020-10-14T04:33:17Z", "commit": {"oid": "91713acb867a83e4259ca84c99ed2ea2d2dc72c7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4MDI2NzIz", "url": "https://github.com/apache/cloudstack/pull/4397#pullrequestreview-508026723", "createdAt": "2020-10-14T06:22:06Z", "commit": {"oid": "91713acb867a83e4259ca84c99ed2ea2d2dc72c7"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4686, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}