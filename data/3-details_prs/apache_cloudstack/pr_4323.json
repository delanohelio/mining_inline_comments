{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg1ODczMzg4", "number": 4323, "title": "systemvm: Update novnc", "bodyText": "Description\nUpdating noVNC v1.2.0\nTypes of changes\n\n\n Breaking change (fix or feature that would cause existing functionality to change)\n New feature (non-breaking change which adds functionality)\n Bug fix (non-breaking change which fixes an issue)\n Enhancement (improves an existing feature and functionality)\n Cleanup (Code refactoring and cleanup, that may add test cases)\n\nScreenshots (if appropriate):\n\nFullScreen mode\n\nPaste into console\n\n\nAdditional keys", "createdAt": "2020-09-12T11:26:05Z", "url": "https://github.com/apache/cloudstack/pull/4323", "merged": true, "mergeCommit": {"oid": "c06e7ded3c52b18eb92ec0dd53f0884db0b91004"}, "closed": true, "closedAt": "2020-09-22T12:12:31Z", "author": {"login": "davidjumani"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdIIRrpgBqjM3NTkyNDAxODY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABeAGT8QAFqTYwNDkyMDM0MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "466e7a1e2281547d77c4142678a2fc7ad7b95eeb", "author": {"user": {"login": "davidjumani", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/466e7a1e2281547d77c4142678a2fc7ad7b95eeb", "committedDate": "2020-09-12T11:24:30Z", "message": "Tweaking novnc to work"}, "afterCommit": {"oid": "6280572c9dfc0658c9108795c7562fc1e2579fa6", "author": {"user": {"login": "davidjumani", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/6280572c9dfc0658c9108795c7562fc1e2579fa6", "committedDate": "2020-09-12T11:26:58Z", "message": "Tweaking novnc to work"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2962e1f07443e1f39ce0a08c2994e6c77efba221", "author": {"user": {"login": "davidjumani", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/2962e1f07443e1f39ce0a08c2994e6c77efba221", "committedDate": "2020-09-12T17:42:21Z", "message": "Updating novnc"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6280572c9dfc0658c9108795c7562fc1e2579fa6", "author": {"user": {"login": "davidjumani", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/6280572c9dfc0658c9108795c7562fc1e2579fa6", "committedDate": "2020-09-12T11:26:58Z", "message": "Tweaking novnc to work"}, "afterCommit": {"oid": "cbced66db754463b3c9b0367e159b740940e5a76", "author": {"user": {"login": "davidjumani", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/cbced66db754463b3c9b0367e159b740940e5a76", "committedDate": "2020-09-12T17:42:39Z", "message": "Tweaking novnc to work"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cbced66db754463b3c9b0367e159b740940e5a76", "author": {"user": {"login": "davidjumani", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/cbced66db754463b3c9b0367e159b740940e5a76", "committedDate": "2020-09-12T17:42:39Z", "message": "Tweaking novnc to work"}, "afterCommit": {"oid": "85259d252bf661fd942e6c333d30a7d30e31f03b", "author": {"user": {"login": "davidjumani", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/85259d252bf661fd942e6c333d30a7d30e31f03b", "committedDate": "2020-09-12T18:08:26Z", "message": "Tweaking novnc to work"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "85259d252bf661fd942e6c333d30a7d30e31f03b", "author": {"user": {"login": "davidjumani", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/85259d252bf661fd942e6c333d30a7d30e31f03b", "committedDate": "2020-09-12T18:08:26Z", "message": "Tweaking novnc to work"}, "afterCommit": {"oid": "6ce9e7a4bbc104a800b6ee53c5d40e0deaf5b5e5", "author": {"user": {"login": "davidjumani", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/6ce9e7a4bbc104a800b6ee53c5d40e0deaf5b5e5", "committedDate": "2020-09-12T18:25:46Z", "message": "Tweaking novnc to work"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6ce9e7a4bbc104a800b6ee53c5d40e0deaf5b5e5", "author": {"user": {"login": "davidjumani", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/6ce9e7a4bbc104a800b6ee53c5d40e0deaf5b5e5", "committedDate": "2020-09-12T18:25:46Z", "message": "Tweaking novnc to work"}, "afterCommit": {"oid": "f92743733a001c5e57dd471db336720864626f0c", "author": {"user": {"login": "davidjumani", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/f92743733a001c5e57dd471db336720864626f0c", "committedDate": "2020-09-12T18:31:05Z", "message": "Tweaking novnc to work"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f92743733a001c5e57dd471db336720864626f0c", "author": {"user": {"login": "davidjumani", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/f92743733a001c5e57dd471db336720864626f0c", "committedDate": "2020-09-12T18:31:05Z", "message": "Tweaking novnc to work"}, "afterCommit": {"oid": "d59c8a011880149b67512747c5a8c58ca46edf96", "author": {"user": {"login": "davidjumani", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/d59c8a011880149b67512747c5a8c58ca46edf96", "committedDate": "2020-09-13T10:58:17Z", "message": "Tweaking novnc to work"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d59c8a011880149b67512747c5a8c58ca46edf96", "author": {"user": {"login": "davidjumani", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/d59c8a011880149b67512747c5a8c58ca46edf96", "committedDate": "2020-09-13T10:58:17Z", "message": "Tweaking novnc to work"}, "afterCommit": {"oid": "4c8b36035004667455973d006ab405af6cb02194", "author": {"user": {"login": "davidjumani", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/4c8b36035004667455973d006ab405af6cb02194", "committedDate": "2020-09-13T11:40:38Z", "message": "Tweaking novnc to work"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkwMjQwMDI2", "url": "https://github.com/apache/cloudstack/pull/4323#pullrequestreview-490240026", "createdAt": "2020-09-17T04:47:57Z", "commit": {"oid": "4c8b36035004667455973d006ab405af6cb02194"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4c8b36035004667455973d006ab405af6cb02194", "author": {"user": {"login": "davidjumani", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/4c8b36035004667455973d006ab405af6cb02194", "committedDate": "2020-09-13T11:40:38Z", "message": "Tweaking novnc to work"}, "afterCommit": {"oid": "d70fc6d9d28ce6d7a423844f7a813b0accba504d", "author": {"user": {"login": "davidjumani", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/d70fc6d9d28ce6d7a423844f7a813b0accba504d", "committedDate": "2020-09-18T07:57:56Z", "message": "Tweaking novnc to work"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d70fc6d9d28ce6d7a423844f7a813b0accba504d", "author": {"user": {"login": "davidjumani", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/d70fc6d9d28ce6d7a423844f7a813b0accba504d", "committedDate": "2020-09-18T07:57:56Z", "message": "Tweaking novnc to work"}, "afterCommit": {"oid": "2bc0e64ef11efd290466bca07930744e4be65af8", "author": {"user": {"login": "davidjumani", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/2bc0e64ef11efd290466bca07930744e4be65af8", "committedDate": "2020-09-18T09:38:41Z", "message": "Tweaking novnc to work"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2bc0e64ef11efd290466bca07930744e4be65af8", "author": {"user": {"login": "davidjumani", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/2bc0e64ef11efd290466bca07930744e4be65af8", "committedDate": "2020-09-18T09:38:41Z", "message": "Tweaking novnc to work"}, "afterCommit": {"oid": "5d6f120afb2506cdae54326d02bd3923c08f8105", "author": {"user": {"login": "davidjumani", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/5d6f120afb2506cdae54326d02bd3923c08f8105", "committedDate": "2020-09-18T09:49:35Z", "message": "Tweaking novnc to work"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyMzE1MTEz", "url": "https://github.com/apache/cloudstack/pull/4323#pullrequestreview-492315113", "createdAt": "2020-09-21T06:50:58Z", "commit": {"oid": "5d6f120afb2506cdae54326d02bd3923c08f8105"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b74579e4c494474431e99e25636cf71ada8178ef", "author": {"user": {"login": "davidjumani", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/b74579e4c494474431e99e25636cf71ada8178ef", "committedDate": "2020-09-22T04:02:04Z", "message": "Tweaking novnc to work"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5d6f120afb2506cdae54326d02bd3923c08f8105", "author": {"user": {"login": "davidjumani", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/5d6f120afb2506cdae54326d02bd3923c08f8105", "committedDate": "2020-09-18T09:49:35Z", "message": "Tweaking novnc to work"}, "afterCommit": {"oid": "b74579e4c494474431e99e25636cf71ada8178ef", "author": {"user": {"login": "davidjumani", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/b74579e4c494474431e99e25636cf71ada8178ef", "committedDate": "2020-09-22T04:02:04Z", "message": "Tweaking novnc to work"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzMzkyNDU0", "url": "https://github.com/apache/cloudstack/pull/4323#pullrequestreview-493392454", "createdAt": "2020-09-22T12:11:27Z", "commit": {"oid": "b74579e4c494474431e99e25636cf71ada8178ef"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjA0OTIwMzQx", "url": "https://github.com/apache/cloudstack/pull/4323#pullrequestreview-604920341", "createdAt": "2021-03-05T08:49:32Z", "commit": {"oid": "b74579e4c494474431e99e25636cf71ada8178ef"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMy0wNVQwODo0OTozMlrOIw4bLg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMy0wNVQwODo0OTozMlrOIw4bLg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4ODEyNzAyMg==", "bodyText": "@davidjumani\none of our customers has issue accessing the novnc console, because scaleViewport is undefined in line 1216\nUI.rfb.scaleViewport = this.fullScreen\nBut I cannot find this change in novnc repository.\nhttps://github.com/novnc/noVNC/blob/master/app/ui.js#L1209", "url": "https://github.com/apache/cloudstack/pull/4323#discussion_r588127022", "createdAt": "2021-03-05T08:49:32Z", "author": {"login": "weizhouapache"}, "path": "systemvm/agent/noVNC/app/ui.js", "diffHunk": "@@ -1206,38 +1212,14 @@ const UI = {\n  * ------v------*/\n \n     toggleFullscreen() {\n-        if (document.fullscreenElement || // alternative standard method\n-            document.mozFullScreenElement || // currently working methods\n-            document.webkitFullscreenElement ||\n-            document.msFullscreenElement) {\n-            if (document.exitFullscreen) {\n-                document.exitFullscreen();\n-            } else if (document.mozCancelFullScreen) {\n-                document.mozCancelFullScreen();\n-            } else if (document.webkitExitFullscreen) {\n-                document.webkitExitFullscreen();\n-            } else if (document.msExitFullscreen) {\n-                document.msExitFullscreen();\n-            }\n-        } else {\n-            if (document.documentElement.requestFullscreen) {\n-                document.documentElement.requestFullscreen();\n-            } else if (document.documentElement.mozRequestFullScreen) {\n-                document.documentElement.mozRequestFullScreen();\n-            } else if (document.documentElement.webkitRequestFullscreen) {\n-                document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n-            } else if (document.body.msRequestFullscreen) {\n-                document.body.msRequestFullscreen();\n-            }\n-        }\n-        UI.updateFullscreenButton();\n+        this.fullScreen = !this.fullScreen\n+        UI.rfb.scaleViewport = this.fullScreen", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b74579e4c494474431e99e25636cf71ada8178ef"}, "originalPosition": 115}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4149, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}