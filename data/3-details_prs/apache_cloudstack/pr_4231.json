{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU5MDU5Mjg5", "number": 4231, "title": "kvm/ceph: Only if a port number has been specified define in the XML", "bodyText": "Description\nCeph used to use port 6789 (no need to specify it), but with the messenger v2\nfrom Ceph it switched to port 3300 while 6789 still works.\nlibrados/librbd/libvirt will automatically figure out the ports to use if none is\nspecified.\nTherefor there is no need for CloudStack to explicitely define the port in the XML\npassed to Libvirt or Qemu.\nLeave blank if no port number has been defined by the user.\nTypes of changes\n\n Enhancement (improves an existing feature and functionality)", "createdAt": "2020-07-30T10:35:26Z", "url": "https://github.com/apache/cloudstack/pull/4231", "merged": true, "mergeCommit": {"oid": "c3554ec31dafbdfaa0ed646afb17a6f3378571f5"}, "closed": true, "closedAt": "2020-08-05T08:14:40Z", "author": {"login": "wido"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc59GmZgH2gAyNDU5MDU5Mjg5OjE4MjI1MDg0NmJhZTk3MTIyMTY4NjFmZGE1OWNjNjk5ZTEyZjJjZDk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABds2HbAgFqTU2MTAxODM0NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "182250846bae9712216861fda59cc699e12f2cd9", "author": {"user": {"login": "wido", "name": "Wido den Hollander"}}, "url": "https://github.com/apache/cloudstack/commit/182250846bae9712216861fda59cc699e12f2cd9", "committedDate": "2020-07-30T10:31:11Z", "message": "kvm/ceph: Only if a port number has been specified define in the XML\n\nCeph used to use port 6789 (no need to specify it), but with the messenger v2\nfrom Ceph it switched to port 3300 while 6789 still works.\n\nlibrados/librbd/libvirt will automatically figure out the ports to use if none is\nspecified.\n\nTherefor there is no need for CloudStack to explicitely define the port in the XML\npassed to Libvirt or Qemu.\n\nLeave blank if no port number has been defined by the user."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU4Mjk0ODU3", "url": "https://github.com/apache/cloudstack/pull/4231#pullrequestreview-458294857", "createdAt": "2020-07-30T10:56:02Z", "commit": {"oid": "182250846bae9712216861fda59cc699e12f2cd9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU4MzM5MTU3", "url": "https://github.com/apache/cloudstack/pull/4231#pullrequestreview-458339157", "createdAt": "2020-07-30T12:10:33Z", "commit": {"oid": "182250846bae9712216861fda59cc699e12f2cd9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYxMDE4MzQ0", "url": "https://github.com/apache/cloudstack/pull/4231#pullrequestreview-561018344", "createdAt": "2021-01-04T13:12:52Z", "commit": {"oid": "182250846bae9712216861fda59cc699e12f2cd9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNFQxMzoxMjo1MlrOINxNYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNFQxMzoxMjo1MlrOINxNYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTMwODY0Mg==", "bodyText": "this double escape seems to byte us now ;P during release of 4.15", "url": "https://github.com/apache/cloudstack/pull/4231#discussion_r551308642", "createdAt": "2021-01-04T13:12:52Z", "author": {"login": "DaanHoogland"}, "path": "plugins/hypervisors/kvm/src/main/java/com/cloud/hypervisor/kvm/storage/KVMPhysicalDisk.java", "diffHunk": "@@ -28,7 +28,7 @@ public static String RBDStringBuilder(String monHost, int monPort, String authUs\n \n         rbdOpts = \"rbd:\" + image;\n         rbdOpts += \":mon_host=\" + monHost;\n-        if (monPort != 6789) {\n+        if (monPort > 0) {\n             rbdOpts += \"\\\\\\\\:\" + monPort;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "182250846bae9712216861fda59cc699e12f2cd9"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3983, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}