{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE2MDY5NjUz", "number": 4078, "title": "Cleanup download urls when SSVM destroyed", "bodyText": "Description\n\n\nWhen SSVM is destroyed the downloaded urls of\ntemplate and volumes are not cleaned and because\nof that we cant download the templates/volumes\nusing the download_url link\n\n\ncleanup volumes in secondary storage when ssvm is destroyed\n\n\nIt should clean up the download urls for the templates belonging to the zone where ssvm is running\n\n\nSteps to test\nBefore the fix\n(1) download template (check download_url in template_store_ref table).\n(2) destroy ssvm\n(3) download template again\n(4) It will fail to download\nAfter the fix\n\nDownload template\nDestroy ssvm\nThis will cleanup the download_url in template_store_ref table\nTry to download template again\nDownload will be successful\n\nTest case 2\nBefore the fix\n\ncreate a vm\nstop a vm\ndownload volume\nVolume stored in\nhttps://10.1.1.2/userdata/2dc15926-eaa4-49f8-9d3c-e71bdbe9d39f.qcow2\nstart/stop ssvm\nstart/stop vm\ndownload volume\nVolume stored in\nhttps://10.1.1.2/userdata/2dc15926-eaa4-49f8-9d3c-e71bdbe9d39f.qcow2\n\nExpected result\nvolumes in step3 and step 5 are different\nActual result\nvolumes in step 3 and 5 are same.\nAfter the fix\nvolumes in step 3 and 5 are different\nstep 3: http://10.11.1.2/userdata/7237c056-2a45-426b-b12e-13da9adab644.qcow2\nStep 5: http://10.11.1.2/userdata/9da05f2a-2abc-42b8-9adc-c0e41f36f0c4.qcow2\n\n\n\n\n\nTypes of changes\n\n\n Breaking change (fix or feature that would cause existing functionality to change)\n New feature (non-breaking change which adds functionality)\n Bug fix (non-breaking change which fixes an issue)\n Enhancement (improves an existing feature and functionality)\n Cleanup (Code refactoring and cleanup, that may add test cases)", "createdAt": "2020-05-11T12:20:35Z", "url": "https://github.com/apache/cloudstack/pull/4078", "merged": true, "mergeCommit": {"oid": "735b6de296e07eb5def98f8e1c3a9b73960c506f"}, "closed": true, "closedAt": "2020-11-18T13:01:32Z", "author": {"login": "ravening"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABchMsMfgFqTQxMTc1NTI4NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABddtsQ_gFqTUzMzQxNTkxMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExNzU1Mjg0", "url": "https://github.com/apache/cloudstack/pull/4078#pullrequestreview-411755284", "createdAt": "2020-05-14T12:32:43Z", "commit": {"oid": "2b475c25302a53bcd5acc392c698240fbe390e6a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxMjozMjo0M1rOGVaBrA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxMjozMjo0M1rOGVaBrA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTA5OTY5Mg==", "bodyText": "@ravening DatacenterId should be ok here, to cleanup urls as per the method implementation. But, in case of multiple SSVMs in the zone, this would delete all the download urls in that zone. May be better to cleanup by SSVM's public ip in that zone.", "url": "https://github.com/apache/cloudstack/pull/4078#discussion_r425099692", "createdAt": "2020-05-14T12:32:43Z", "author": {"login": "sureshanaparti"}, "path": "server/src/main/java/com/cloud/server/ManagementServerImpl.java", "diffHunk": "@@ -3237,13 +3245,29 @@ protected void runInContext() {\n         }\n     }\n \n+    private void cleanupDownloadUrls(VMInstanceVO systemVm) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b475c25302a53bcd5acc392c698240fbe390e6a"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2NjU1Njkw", "url": "https://github.com/apache/cloudstack/pull/4078#pullrequestreview-456655690", "createdAt": "2020-07-28T13:55:30Z", "commit": {"oid": "2b475c25302a53bcd5acc392c698240fbe390e6a"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxMzo1NTozMFrOG4NxBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxMzo1NzozN1rOG4N3XQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTU5ODk4MQ==", "bodyText": "can you extract these two blocks in methods with good descriptive names please?", "url": "https://github.com/apache/cloudstack/pull/4078#discussion_r461598981", "createdAt": "2020-07-28T13:55:30Z", "author": {"login": "DaanHoogland"}, "path": "server/src/main/java/com/cloud/storage/VolumeApiServiceImpl.java", "diffHunk": "@@ -2698,9 +2701,40 @@ public String extractVolume(ExtractVolumeCmd cmd) {\n         }\n \n         // Check if the url already exists\n-        VolumeDataStoreVO volumeStoreRef = _volumeStoreDao.findByVolume(volumeId);\n+        SearchCriteria<VolumeDataStoreVO> sc = _volumeStoreDao.createSearchCriteria();\n+        sc.addAnd(\"state\", SearchCriteria.Op.EQ, ObjectInDataStoreStateMachine.State.Ready.toString());\n+        sc.addAnd(\"volumeId\", SearchCriteria.Op.EQ, volumeId);\n+        sc.addAnd(\"destroyed\", SearchCriteria.Op.EQ, false);\n+        // the volume should not change (attached/detached, vm not updated) after created\n+        if (volume.getVolumeType() == Volume.Type.ROOT) { // for ROOT disk\n+            VMInstanceVO vm = _vmInstanceDao.findById(volume.getInstanceId());\n+            sc.addAnd(\"updated\", SearchCriteria.Op.GTEQ, vm.getUpdateTime());\n+        } else if (volume.getVolumeType() == Volume.Type.DATADISK && volume.getInstanceId() == null) { // for not attached DATADISK\n+            sc.addAnd(\"updated\", SearchCriteria.Op.GTEQ, volume.getUpdated());\n+        } else { // for attached DATA DISK\n+            VMInstanceVO vm = _vmInstanceDao.findById(volume.getInstanceId());\n+            sc.addAnd(\"updated\", SearchCriteria.Op.GTEQ, vm.getUpdateTime());\n+            sc.addAnd(\"updated\", SearchCriteria.Op.GTEQ, volume.getUpdated());\n+        }\n+        Filter filter = new Filter(VolumeDataStoreVO.class, \"created\", false, 0L, 1L);\n+        List<VolumeDataStoreVO> volumeStoreRefs = _volumeStoreDao.search(sc, filter);\n+        VolumeDataStoreVO volumeStoreRef = null;\n+        if (volumeStoreRefs != null && !volumeStoreRefs.isEmpty()) {\n+            volumeStoreRef = volumeStoreRefs.get(0);\n+        }\n         if (volumeStoreRef != null && volumeStoreRef.getExtractUrl() != null) {\n             return volumeStoreRef.getExtractUrl();\n+        } else if (volumeStoreRef != null) {\n+            s_logger.debug(\"volume \" + volumeId + \" is already installed on secondary storage, install path is \" +\n+                                    volumeStoreRef.getInstallPath());\n+            ImageStoreEntity secStore = (ImageStoreEntity) dataStoreMgr.getDataStore(volumeStoreRef.getDataStoreId(), DataStoreRole.Image);\n+            String extractUrl = secStore.createEntityExtractUrl(volumeStoreRef.getInstallPath(), volume.getFormat(), null);\n+            volumeStoreRef = _volumeStoreDao.findByVolume(volumeId);\n+            volumeStoreRef.setExtractUrl(extractUrl);\n+            volumeStoreRef.setExtractUrlCreated(DateUtil.now());\n+            _volumeStoreDao.update(volumeStoreRef.getId(), volumeStoreRef);\n+            return extractUrl;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b475c25302a53bcd5acc392c698240fbe390e6a"}, "originalPosition": 54}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTYwMDYwNQ==", "bodyText": "hm, that would be an easy check, wonder if that is all.", "url": "https://github.com/apache/cloudstack/pull/4078#discussion_r461600605", "createdAt": "2020-07-28T13:57:37Z", "author": {"login": "DaanHoogland"}, "path": "services/secondary-storage/server/src/main/java/org/apache/cloudstack/storage/template/UploadManagerImpl.java", "diffHunk": "@@ -307,12 +307,15 @@ public Answer handleDeleteEntityDownloadURLCommand(DeleteEntityDownloadURLComman\n \n         //We just need to remove the UUID.vhd\n         String extractUrl = cmd.getExtractUrl();\n-        command.add(\"unlink /var/www/html/userdata/\" + extractUrl.substring(extractUrl.lastIndexOf(File.separator) + 1));\n-        String result = command.execute();\n-        if (result != null) {\n-            // FIXME - Ideally should bail out if you cant delete symlink. Not doing it right now.\n-            // This is because the ssvm might already be destroyed and the symlinks do not exist.\n-            s_logger.warn(\"Error in deleting symlink :\" + result);\n+        String result;\n+        if (extractUrl != null) {\n+            command.add(\"unlink /var/www/html/userdata/\" + extractUrl.substring(extractUrl.lastIndexOf(File.separator) + 1));\n+            result = command.execute();\n+            if (result != null) {\n+                // FIXME - Ideally should bail out if you cant delete symlink. Not doing it right now.\n+                // This is because the ssvm might already be destroyed and the symlinks do not exist.\n+                s_logger.warn(\"Error in deleting symlink :\" + result);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b475c25302a53bcd5acc392c698240fbe390e6a"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc5Njg1NjIz", "url": "https://github.com/apache/cloudstack/pull/4078#pullrequestreview-479685623", "createdAt": "2020-09-01T12:24:19Z", "commit": {"oid": "2b475c25302a53bcd5acc392c698240fbe390e6a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk0MTM5Nzc3", "url": "https://github.com/apache/cloudstack/pull/4078#pullrequestreview-494139777", "createdAt": "2020-09-23T05:26:29Z", "commit": {"oid": "2b475c25302a53bcd5acc392c698240fbe390e6a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QwNToyNjoyOVrOHWW3og==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QwNToyNjoyOVrOHWW3og==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzIwNTQxMA==", "bodyText": "@ravening would that cause a regression, to not expunge uploaded volumes?", "url": "https://github.com/apache/cloudstack/pull/4078#discussion_r493205410", "createdAt": "2020-09-23T05:26:29Z", "author": {"login": "rhtyd"}, "path": "services/secondary-storage/controller/src/main/java/org/apache/cloudstack/secondarystorage/SecondaryStorageManagerImpl.java", "diffHunk": "@@ -744,9 +743,6 @@ private void allocCapacity(long dataCenterId, SecondaryStorageVm.Role role) {\n                 if (_allocLock.lock(ACQUIRE_GLOBAL_LOCK_TIMEOUT_FOR_SYNC)) {\n                     try {\n                         secStorageVm = startNew(dataCenterId, role);\n-                        for (UploadVO upload : _uploadDao.listAll()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b475c25302a53bcd5acc392c698240fbe390e6a"}, "originalPosition": 12}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2b475c25302a53bcd5acc392c698240fbe390e6a", "author": {"user": null}, "url": "https://github.com/apache/cloudstack/commit/2b475c25302a53bcd5acc392c698240fbe390e6a", "committedDate": "2020-05-11T12:17:33Z", "message": "CLSTACK-7189 - Cleanup download urls when SSVM destroyed\n\n1. When SSVM is destroyed the downloaded urls of\n   template and volumes are not cleaned and because\n   of that we cant download the templates/volumes\n   using the download_url link\n\n2. cleanup volumes in secondary storage when ssvm is destroyed\n\n3. It should clean up the download urls for the templates belonging to the zone where ssvm is running\n\nSteps to test\n\nBefore the fix\n\n(1) download template (check download_url in template_store_ref table).\n(2) destroy ssvm\n(3) download template again\n(4) It will fail to download\n\nAfter the fix\n\n1. Download template\n2. Destroy ssvm\n3. This will cleanup the download_url in template_store_ref table\n4. Try to download template again\n5. Download will be successful\n\nTest case 2\n\nBefore the fix\n\n1. create a vm\n2. stop a vm\n3. download volume\n   Volume stored in\n   https://10.1.1.2/userdata/2dc15926-eaa4-49f8-9d3c-e71bdbe9d39f.qcow2\n4. start/stop ssvm\n5. start/stop vm\n6. download volume\n   Volume stored in\n   https://10.1.1.2/userdata/2dc15926-eaa4-49f8-9d3c-e71bdbe9d39f.qcow2\n\nExpected result\nvolumes in step3 and step 5 are different\n\nActual result\nvolumes in step 3 and 5 are same.\n\nAfter the fix\n\nvolumes in step 3 and 5 are different\n\nstep 3: http://10.11.1.2/userdata/7237c056-2a45-426b-b12e-13da9adab644.qcow2\n\nStep 5: http://10.11.1.2/userdata/9da05f2a-2abc-42b8-9adc-c0e41f36f0c4.qcow2"}, "afterCommit": {"oid": "28efc8354e244b914d2b62bcaa7ba743f059c557", "author": {"user": null}, "url": "https://github.com/apache/cloudstack/commit/28efc8354e244b914d2b62bcaa7ba743f059c557", "committedDate": "2020-10-28T12:34:18Z", "message": "CLSTACK-7189 - Cleanup download urls when SSVM destroyed\n\n1. When SSVM is destroyed the downloaded urls of\n   template and volumes are not cleaned and because\n   of that we cant download the templates/volumes\n   using the download_url link\n\n2. cleanup volumes in secondary storage when ssvm is destroyed\n\n3. It should clean up the download urls for the templates belonging to the zone where ssvm is running\n\nSteps to test\n\nBefore the fix\n\n(1) download template (check download_url in template_store_ref table).\n(2) destroy ssvm\n(3) download template again\n(4) It will fail to download\n\nAfter the fix\n\n1. Download template\n2. Destroy ssvm\n3. This will cleanup the download_url in template_store_ref table\n4. Try to download template again\n5. Download will be successful\n\nTest case 2\n\nBefore the fix\n\n1. create a vm\n2. stop a vm\n3. download volume\n   Volume stored in\n   https://10.1.1.2/userdata/2dc15926-eaa4-49f8-9d3c-e71bdbe9d39f.qcow2\n4. start/stop ssvm\n5. start/stop vm\n6. download volume\n   Volume stored in\n   https://10.1.1.2/userdata/2dc15926-eaa4-49f8-9d3c-e71bdbe9d39f.qcow2\n\nExpected result\nvolumes in step3 and step 5 are different\n\nActual result\nvolumes in step 3 and 5 are same.\n\nAfter the fix\n\nvolumes in step 3 and 5 are different\n\nstep 3: http://10.11.1.2/userdata/7237c056-2a45-426b-b12e-13da9adab644.qcow2\n\nStep 5: http://10.11.1.2/userdata/9da05f2a-2abc-42b8-9adc-c0e41f36f0c4.qcow2"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMxMjM3Njc4", "url": "https://github.com/apache/cloudstack/pull/4078#pullrequestreview-531237678", "createdAt": "2020-11-16T11:31:12Z", "commit": {"oid": "28efc8354e244b914d2b62bcaa7ba743f059c557"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQxMTozMToxM1rOHz4C5g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQxMTozMToxM1rOHz4C5g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDE1NzY3MA==", "bodyText": "@ravening What if when one of the SSVM is destroyed (multiple SSVMs are created for a zone), which is created to meet the storage command sessions.", "url": "https://github.com/apache/cloudstack/pull/4078#discussion_r524157670", "createdAt": "2020-11-16T11:31:13Z", "author": {"login": "sureshanaparti"}, "path": "server/src/main/java/com/cloud/server/ManagementServerImpl.java", "diffHunk": "@@ -3286,13 +3294,29 @@ protected void runInContext() {\n         }\n     }\n \n+    private void cleanupDownloadUrls(VMInstanceVO systemVm) {\n+        // clean download URLs when destroying ssvm\n+        // clean only the volumes and templates of the zone\n+        // to which ssvm belongs to\n+        for (VolumeDataStoreVO volume :_volumeStoreDao.listVolumeDownloadUrlsByZoneId(systemVm.getDataCenterId())) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28efc8354e244b914d2b62bcaa7ba743f059c557"}, "originalPosition": 30}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f12081181ae5b18b1193f8c4f00e49e42517861", "author": {"user": null}, "url": "https://github.com/apache/cloudstack/commit/5f12081181ae5b18b1193f8c4f00e49e42517861", "committedDate": "2020-11-18T09:57:22Z", "message": "CLSTACK-7189 - Cleanup download urls when SSVM destroyed\n\n1. When SSVM is destroyed the downloaded urls of\n   template and volumes are not cleaned and because\n   of that we cant download the templates/volumes\n   using the download_url link\n\n2. cleanup volumes in secondary storage when ssvm is destroyed\n\n3. It should clean up the download urls for the templates belonging to the zone where ssvm is running\n\nSteps to test\n\nBefore the fix\n\n(1) download template (check download_url in template_store_ref table).\n(2) destroy ssvm\n(3) download template again\n(4) It will fail to download\n\nAfter the fix\n\n1. Download template\n2. Destroy ssvm\n3. This will cleanup the download_url in template_store_ref table\n4. Try to download template again\n5. Download will be successful\n\nTest case 2\n\nBefore the fix\n\n1. create a vm\n2. stop a vm\n3. download volume\n   Volume stored in\n   https://10.1.1.2/userdata/2dc15926-eaa4-49f8-9d3c-e71bdbe9d39f.qcow2\n4. start/stop ssvm\n5. start/stop vm\n6. download volume\n   Volume stored in\n   https://10.1.1.2/userdata/2dc15926-eaa4-49f8-9d3c-e71bdbe9d39f.qcow2\n\nExpected result\nvolumes in step3 and step 5 are different\n\nActual result\nvolumes in step 3 and 5 are same.\n\nAfter the fix\n\nvolumes in step 3 and 5 are different\n\nstep 3: http://10.11.1.2/userdata/7237c056-2a45-426b-b12e-13da9adab644.qcow2\n\nStep 5: http://10.11.1.2/userdata/9da05f2a-2abc-42b8-9adc-c0e41f36f0c4.qcow2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6bc8281d218b4a04dbab1b6ec596d53ec64485db", "author": {"user": {"login": "ravening", "name": "Rakesh"}}, "url": "https://github.com/apache/cloudstack/commit/6bc8281d218b4a04dbab1b6ec596d53ec64485db", "committedDate": "2020-11-18T10:50:59Z", "message": "code refactor"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "28efc8354e244b914d2b62bcaa7ba743f059c557", "author": {"user": null}, "url": "https://github.com/apache/cloudstack/commit/28efc8354e244b914d2b62bcaa7ba743f059c557", "committedDate": "2020-10-28T12:34:18Z", "message": "CLSTACK-7189 - Cleanup download urls when SSVM destroyed\n\n1. When SSVM is destroyed the downloaded urls of\n   template and volumes are not cleaned and because\n   of that we cant download the templates/volumes\n   using the download_url link\n\n2. cleanup volumes in secondary storage when ssvm is destroyed\n\n3. It should clean up the download urls for the templates belonging to the zone where ssvm is running\n\nSteps to test\n\nBefore the fix\n\n(1) download template (check download_url in template_store_ref table).\n(2) destroy ssvm\n(3) download template again\n(4) It will fail to download\n\nAfter the fix\n\n1. Download template\n2. Destroy ssvm\n3. This will cleanup the download_url in template_store_ref table\n4. Try to download template again\n5. Download will be successful\n\nTest case 2\n\nBefore the fix\n\n1. create a vm\n2. stop a vm\n3. download volume\n   Volume stored in\n   https://10.1.1.2/userdata/2dc15926-eaa4-49f8-9d3c-e71bdbe9d39f.qcow2\n4. start/stop ssvm\n5. start/stop vm\n6. download volume\n   Volume stored in\n   https://10.1.1.2/userdata/2dc15926-eaa4-49f8-9d3c-e71bdbe9d39f.qcow2\n\nExpected result\nvolumes in step3 and step 5 are different\n\nActual result\nvolumes in step 3 and 5 are same.\n\nAfter the fix\n\nvolumes in step 3 and 5 are different\n\nstep 3: http://10.11.1.2/userdata/7237c056-2a45-426b-b12e-13da9adab644.qcow2\n\nStep 5: http://10.11.1.2/userdata/9da05f2a-2abc-42b8-9adc-c0e41f36f0c4.qcow2"}, "afterCommit": {"oid": "6bc8281d218b4a04dbab1b6ec596d53ec64485db", "author": {"user": {"login": "ravening", "name": "Rakesh"}}, "url": "https://github.com/apache/cloudstack/commit/6bc8281d218b4a04dbab1b6ec596d53ec64485db", "committedDate": "2020-11-18T10:50:59Z", "message": "code refactor"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMzMzUyOTA1", "url": "https://github.com/apache/cloudstack/pull/4078#pullrequestreview-533352905", "createdAt": "2020-11-18T11:29:52Z", "commit": {"oid": "6bc8281d218b4a04dbab1b6ec596d53ec64485db"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMzNDE1OTEw", "url": "https://github.com/apache/cloudstack/pull/4078#pullrequestreview-533415910", "createdAt": "2020-11-18T12:55:07Z", "commit": {"oid": "6bc8281d218b4a04dbab1b6ec596d53ec64485db"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4294, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}