{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE1NTY3MzY3", "number": 4065, "title": "Enable revocation checking for uploaded certificates", "bodyText": "Description\nThis update turns on certificate revocation checking for uploaded certificates:\n\nUpdated CertServiceImpl to be able to enable revocation checking.\nIntroduced a new parameter ENABLED_REVOCATION_CHECK for UploadSslCertCmd.\nUpdated CertServiceTest.\n\nEven if no CLRs are specified via PKIXParameters, the certificates\nthemselves may still provide info for revocation checking:\n\nThe AIA extension may contains a URL to the OCSP responder.\nThe CLRDP extension contains a URL to the CLR.\n\nThose extensions may need to be explicitly enabled by setting the system properties com.sun.security.enableAIAcaIssuers and com.sun.security.enableCRLDP to true. See Java PKI Programmer's Guide.\nUsing a revoked certificate may be dangerous. One of the most common reasons why a certificate authority (CA) revokes a certificate is that the private key has been compromised. For example, the private key might have been stolen by an adversary.\nIf I understand correctly, the CertServiceImpl bean is used for operations with certificates on a load balancer. In particular, it validates a certificate chain without revocation checking while uploading a certificate. If a compromised revoked certificate is then used by the load balancer, then it may result to compromising TLS connections. However, the attacker has to be able to implement man-in-the-middle attack to compromise the connections. So the attacker has to be quite powerful. Therefore, such an attack is definitely not easy to implement. On the other hand, the impact may be significant because of loss of confidentiality.\nThis has been discussed on security@cloudstack.apache.org\nTypes of changes\n\n Breaking change (fix or feature that would cause existing functionality to change)\n New feature (non-breaking change which adds functionality)\n Bug fix (non-breaking change which fixes an issue)\n Enhancement (improves an existing feature and functionality)\n Cleanup (Code refactoring and cleanup, that may add test cases)\n\nHow Has This Been Tested?\nUpdated one test case and added a new one in CertServiceTest.", "createdAt": "2020-05-09T12:16:21Z", "url": "https://github.com/apache/cloudstack/pull/4065", "merged": true, "mergeCommit": {"oid": "28a19311f4bb4eda0ce2ccd0dfcaa2ec23f3a029"}, "closed": true, "closedAt": "2020-06-04T02:17:06Z", "author": {"login": "artem-smotrakov"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcflhr8gBqjMzMTkzMzcyMDA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcn0c6FAFqTQyNDA1NTY1MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3faad81f71f58081d6d0236663f9e288c2717c0d", "author": {"user": {"login": "artem-smotrakov", "name": "Artem Smotrakov"}}, "url": "https://github.com/apache/cloudstack/commit/3faad81f71f58081d6d0236663f9e288c2717c0d", "committedDate": "2020-05-09T12:01:00Z", "message": "Enabled certificate revocation checking in UploadSslCertCmd"}, "afterCommit": {"oid": "51083d6e83034f862502d55c48547edb7142d71c", "author": {"user": {"login": "artem-smotrakov", "name": "Artem Smotrakov"}}, "url": "https://github.com/apache/cloudstack/commit/51083d6e83034f862502d55c48547edb7142d71c", "committedDate": "2020-05-09T12:20:38Z", "message": "Enable revocation checking for uploaded certificates"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4NjgyNTY1", "url": "https://github.com/apache/cloudstack/pull/4065#pullrequestreview-408682565", "createdAt": "2020-05-09T20:37:02Z", "commit": {"oid": "51083d6e83034f862502d55c48547edb7142d71c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQyMDozNzowMlrOGS9_WA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQyMDozNzowMlrOGS9_WA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU0MzE5Mg==", "bodyText": "can you add @since please?", "url": "https://github.com/apache/cloudstack/pull/4065#discussion_r422543192", "createdAt": "2020-05-09T20:37:02Z", "author": {"login": "DaanHoogland"}, "path": "api/src/main/java/org/apache/cloudstack/api/command/user/loadbalancer/UploadSslCertCmd.java", "diffHunk": "@@ -76,6 +76,9 @@\n     @Parameter(name = ApiConstants.NAME , type = CommandType.STRING, required = true, description = \"Name for the uploaded certificate\")\n     private String name;\n \n+    @Parameter(name = ApiConstants.ENABLED_REVOCATION_CHECK, type = CommandType.BOOLEAN, description = \"Enables revocation checking for certificates\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "51083d6e83034f862502d55c48547edb7142d71c"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "45cdc3cd581f419d0a595d362e3a499087a8d684", "author": {"user": {"login": "artem-smotrakov", "name": "Artem Smotrakov"}}, "url": "https://github.com/apache/cloudstack/commit/45cdc3cd581f419d0a595d362e3a499087a8d684", "committedDate": "2020-05-10T16:32:05Z", "message": "Enable revocation checking for uploaded certificates"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "51083d6e83034f862502d55c48547edb7142d71c", "author": {"user": {"login": "artem-smotrakov", "name": "Artem Smotrakov"}}, "url": "https://github.com/apache/cloudstack/commit/51083d6e83034f862502d55c48547edb7142d71c", "committedDate": "2020-05-09T12:20:38Z", "message": "Enable revocation checking for uploaded certificates"}, "afterCommit": {"oid": "45cdc3cd581f419d0a595d362e3a499087a8d684", "author": {"user": {"login": "artem-smotrakov", "name": "Artem Smotrakov"}}, "url": "https://github.com/apache/cloudstack/commit/45cdc3cd581f419d0a595d362e3a499087a8d684", "committedDate": "2020-05-10T16:32:05Z", "message": "Enable revocation checking for uploaded certificates"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEwNzc1NjM2", "url": "https://github.com/apache/cloudstack/pull/4065#pullrequestreview-410775636", "createdAt": "2020-05-13T10:03:16Z", "commit": {"oid": "45cdc3cd581f419d0a595d362e3a499087a8d684"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0MDU1NjUx", "url": "https://github.com/apache/cloudstack/pull/4065#pullrequestreview-424055651", "createdAt": "2020-06-04T02:15:46Z", "commit": {"oid": "45cdc3cd581f419d0a595d362e3a499087a8d684"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4255, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}