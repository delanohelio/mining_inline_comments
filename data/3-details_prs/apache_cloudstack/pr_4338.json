{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkwOTg5MDg2", "number": 4338, "title": "server: check guest os preference of last host when start a vm", "bodyText": "Description\n\nIf vm has last host_id specified, cloudstack will try to start vm on it at first.\nHowever, host tag is checked, but guest os preference is not checked.\nfor new vm, it will be deployed to the preferred host as we expect.\n\n\n\n\n\nFixes: #3554 (comment)\nTypes of changes\n\n\n Breaking change (fix or feature that would cause existing functionality to change)\n New feature (non-breaking change which adds functionality)\n Bug fix (non-breaking change which fixes an issue)\n Enhancement (improves an existing feature and functionality)\n Cleanup (Code refactoring and cleanup, that may add test cases)\n\nScreenshots (if appropriate):\nHow Has This Been Tested?", "createdAt": "2020-09-22T14:39:21Z", "url": "https://github.com/apache/cloudstack/pull/4338", "merged": true, "mergeCommit": {"oid": "98c51a6d3d65b63ba9165090261d6d90035acce9"}, "closed": true, "closedAt": "2020-09-29T07:15:30Z", "author": {"login": "ustcweizhou"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdLY9xsAH2gAyNDkwOTg5MDg2OjMxMTJlODk1OGY5OTNlYTU0N2UzN2YyYzA3NzY0YjBlMWJkMDg3NWE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdNi26SAFqTQ5ODE1ODI2MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3112e8958f993ea547e37f2c07764b0e1bd0875a", "author": {"user": {"login": "ustcweizhou", "name": "Wei Zhou"}}, "url": "https://github.com/apache/cloudstack/commit/3112e8958f993ea547e37f2c07764b0e1bd0875a", "committedDate": "2020-09-22T14:35:36Z", "message": "server: check guest os preference of last host when start a vm"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk0NzAzNjY4", "url": "https://github.com/apache/cloudstack/pull/4338#pullrequestreview-494703668", "createdAt": "2020-09-23T14:10:50Z", "commit": {"oid": "3112e8958f993ea547e37f2c07764b0e1bd0875a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QxNDoxMDo1MVrOHWweuQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QxNDoxMDo1MVrOHWweuQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzYyNTAxNw==", "bodyText": "Any reason to delete this log? Better to display if either tags or the guest os preference mismatches right?", "url": "https://github.com/apache/cloudstack/pull/4338#discussion_r493625017", "createdAt": "2020-09-23T14:10:51Z", "author": {"login": "ravening"}, "path": "server/src/main/java/com/cloud/deploy/DeploymentPlanningManagerImpl.java", "diffHunk": "@@ -489,8 +487,6 @@ public DeployDestination planDeployment(VirtualMachineProfile vmProfile, Deploym\n                         } else {\n                             s_logger.debug(\"The last host of this VM does not have enough capacity\");\n                         }\n-                    } else {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3112e8958f993ea547e37f2c07764b0e1bd0875a"}, "originalPosition": 50}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1MDAwNzI5", "url": "https://github.com/apache/cloudstack/pull/4338#pullrequestreview-495000729", "createdAt": "2020-09-23T19:56:06Z", "commit": {"oid": "3112e8958f993ea547e37f2c07764b0e1bd0875a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk4MTU4MjYx", "url": "https://github.com/apache/cloudstack/pull/4338#pullrequestreview-498158261", "createdAt": "2020-09-29T07:15:00Z", "commit": {"oid": "3112e8958f993ea547e37f2c07764b0e1bd0875a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4898, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}