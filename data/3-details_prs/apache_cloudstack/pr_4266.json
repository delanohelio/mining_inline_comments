{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY4MTc1MjA5", "number": 4266, "title": "Adding os type id to the usage record response for virtual machines", "bodyText": "Description\n\nAdding the Os Type Id to the CloudStack Api response for listUsageRecords for running and allocated VMs. When attempting to determine what type of VM was being used for a removed VM, the listVirtualMachines Api will not return a result, as the record has been marked removed. For our purposes, the type of OS is still required for usage purposes. This change simply adds that additional element to the output.\n\n\n\n\n\nTypes of changes\n\n\n Breaking change (fix or feature that would cause existing functionality to change)\n New feature (non-breaking change which adds functionality)\n Bug fix (non-breaking change which fixes an issue)\n Enhancement (improves an existing feature and functionality)\n Cleanup (Code refactoring and cleanup, that may add test cases)\n\nScreenshots (if appropriate):\nHow Has This Been Tested?\n\nI have been leveraging the Api for retrieving usage information for virtual machines of specific types fairly extensively.\n\n\nThis change simply adds an additional element to the output, and thus should be considered a non-breaking change.", "createdAt": "2020-08-14T20:43:26Z", "url": "https://github.com/apache/cloudstack/pull/4266", "merged": true, "mergeCommit": {"oid": "9b72e5dfb8f511f14e0e0955d7c61b2ee0b0f356"}, "closed": true, "closedAt": "2020-08-25T11:24:09Z", "author": {"login": "ggoodrich-ipp"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc-6t8mAH2gAyNDY4MTc1MjA5OjllODIxNzAyZjUzNzc5OWNhOGZiZTAzNmYxZjMzZmQ2MGU0OTk4ZTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABeACzfBAFqTYwNDgwMjQ1NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9e821702f537799ca8fbe036f1f33fd60e4998e3", "author": {"user": {"login": "ggoodrich-ipp", "name": "Greg Goodrich"}}, "url": "https://github.com/apache/cloudstack/commit/9e821702f537799ca8fbe036f1f33fd60e4998e3", "committedDate": "2020-08-14T20:34:04Z", "message": "Adding os type id to the usage record response for virtual machines"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0MTU4OTY2", "url": "https://github.com/apache/cloudstack/pull/4266#pullrequestreview-474158966", "createdAt": "2020-08-25T06:05:08Z", "commit": {"oid": "9e821702f537799ca8fbe036f1f33fd60e4998e3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0MzI2MzU3", "url": "https://github.com/apache/cloudstack/pull/4266#pullrequestreview-474326357", "createdAt": "2020-08-25T10:00:12Z", "commit": {"oid": "9e821702f537799ca8fbe036f1f33fd60e4998e3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjA0ODAyNDU0", "url": "https://github.com/apache/cloudstack/pull/4266#pullrequestreview-604802454", "createdAt": "2021-03-05T04:44:26Z", "commit": {"oid": "9e821702f537799ca8fbe036f1f33fd60e4998e3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMy0wNVQwNDo0NDoyNlrOIwyfzw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMy0wNVQwNDo0NDoyNlrOIwyfzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4ODAyOTkwMw==", "bodyText": "@ggoodrich-ipp we just caught that this sets the DB internal ID and not UUID, should we fix that in 4.15.1?", "url": "https://github.com/apache/cloudstack/pull/4266#discussion_r588029903", "createdAt": "2021-03-05T04:44:26Z", "author": {"login": "rhtyd"}, "path": "server/src/main/java/com/cloud/api/ApiResponseHelper.java", "diffHunk": "@@ -3386,6 +3386,7 @@ public UsageRecordResponse createUsageResponse(Usage usageRecord, Map<String, Se\n                 resourceType = ResourceTag.ResourceObjectType.UserVm;\n                 usageRecResponse.setUsageId(vm.getUuid());\n                 resourceId = vm.getId();\n+                usageRecResponse.setOsTypeId(vm.getGuestOSId());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9e821702f537799ca8fbe036f1f33fd60e4998e3"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4056, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}