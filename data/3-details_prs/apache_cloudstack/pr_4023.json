{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAwMzMxNTgy", "number": 4023, "title": "FIX: prevent empty sshkey name.", "bodyText": "Description\nIt is a small bug fix preventing ssh key name to be empty.\n\n\n\nItems\nFIX CloudStack API allows SSHKeyPair name to be empty\n\n\n\n\nSteps\ncreate a sshkeypair with empty name cloudmonkey create sshkeypair name=\n\n\nExpected Results\noperation should fail\n\n\nActual results\nsshkey pair is created successfully\n\n\n\nTypes of changes\n\n Breaking change (fix or feature that would cause existing functionality to change)\n New feature (non-breaking change which adds functionality)\n Bug fix (non-breaking change which fixes an issue)\n Enhancement (improves an existing feature and functionality)\n Cleanup (Code refactoring and cleanup, that may add test cases)\n\nHow Has This Been Tested?\nCreated a small Cloudstack environment with three hypervisor and one management server. Try to create sshKey with empty name via cloudmonkey.", "createdAt": "2020-04-07T15:14:39Z", "url": "https://github.com/apache/cloudstack/pull/4023", "merged": true, "mergeCommit": {"oid": "208e1857148929a9d0602307a210ab1715706dee"}, "closed": true, "closedAt": "2020-04-14T14:19:25Z", "author": {"login": "soreana"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcVi9PGgFqTM4OTcyMzcyNw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcVl5YHgH2gAyNDAwMzMxNTgyOjgyODIxOWVkZDQxZjZmMzI2YzhjNzYwYTI5YTk1ZTcyMjllZWI2ZWQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5NzIzNzI3", "url": "https://github.com/apache/cloudstack/pull/4023#pullrequestreview-389723727", "createdAt": "2020-04-08T07:39:54Z", "commit": {"oid": "f6fca544a1174c5a8973bcc46df66fa35087eee2"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQwNzozOTo1NFrOGCiukQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQwNzozOTo1NFrOGCiukQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTMxOTMxMw==", "bodyText": "can you move this validation above the validation that queries the DB above?", "url": "https://github.com/apache/cloudstack/pull/4023#discussion_r405319313", "createdAt": "2020-04-08T07:39:54Z", "author": {"login": "DaanHoogland"}, "path": "server/src/main/java/com/cloud/server/ManagementServerImpl.java", "diffHunk": "@@ -3711,6 +3711,11 @@ public SSHKeyPair createSSHKeyPair(final CreateSSHKeyPairCmd cmd) {\n         final SSHKeysHelper keys = new SSHKeysHelper(sshKeyLength.value());\n \n         final String name = cmd.getName();\n+        \n+        if (StringUtils.isBlank(name)) {\n+            throw new InvalidParameterValueException(\"Please specify a valid name for the key pair. The key name can't be empty\");\n+        }\n+        ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f6fca544a1174c5a8973bcc46df66fa35087eee2"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d68e3f1d200d95ef416143321332bff18a8657e0", "author": {"user": {"login": "soreana", "name": "Sina Kashipazha"}}, "url": "https://github.com/apache/cloudstack/commit/d68e3f1d200d95ef416143321332bff18a8657e0", "committedDate": "2020-04-08T08:21:44Z", "message": "FIX: prevent empty sshkey name."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5ODYzODMz", "url": "https://github.com/apache/cloudstack/pull/4023#pullrequestreview-389863833", "createdAt": "2020-04-08T10:53:04Z", "commit": {"oid": "d68e3f1d200d95ef416143321332bff18a8657e0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "828219edd41f6f326c8c760a29a95e7229eeb6ed", "author": {"user": {"login": "soreana", "name": "Sina Kashipazha"}}, "url": "https://github.com/apache/cloudstack/commit/828219edd41f6f326c8c760a29a95e7229eeb6ed", "committedDate": "2020-04-08T11:07:39Z", "message": "Move sshKeyName check before database access."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4194, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}