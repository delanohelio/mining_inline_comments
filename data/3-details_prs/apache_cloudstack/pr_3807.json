{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYyMjM2NjE2", "number": 3807, "title": "Enhancement: Allow creating network with duplicate name", "bodyText": "Add a global setting to disable creating networks with\nsame name in an account\nAdd a global setting to disable creating network without\nmentioning the start and end IPv4 or IPv6 address\nDescription\n\nBy default we can create networks with the same name in the account. Sometimes we should not create the networks with same name. This change adds a global setting which prevents creating the network with same name. The default value is true and set it to false to prevent creating network with same names.\nAlso its possible to create a shared network without mentioning the start and the end IPv4 or IPv6 address. This change adds a global setting which prevents creating a shared network without specifying the start and the end IPv4 or IPv6 address\n\n\n\n\n\nTypes of changes\n\n\n Breaking change (fix or feature that would cause existing functionality to change)\n New feature (non-breaking change which adds functionality)\n Bug fix (non-breaking change which fixes an issue)\n Enhancement (improves an existing feature and functionality)\n Cleanup (Code refactoring and cleanup, that may add test cases)\n\nScreenshots (if appropriate):\nHow Has This Been Tested?\n\n\n\nCreating a network with same names\n1 . Set the global setting allow.duplicate.networkname to true\n2. Create a new network with the name \"test\".\n3. Try to create another network with the same name. This should create the second network with the same name\n4. Now set the above global setting value to false\n5. Try to create another network with same name.\n6. No exception will be thrown while creating the network with same name\nCreating a network without specifying the start and end IPv4 or IPv6 address\n\nSet the global setting allow.empty.start.end.ipaddress to true\nCreate a shared network without mentioning the start and the end IPv4 or IPv6 address\nYou will be able to create network successfully\nNow set the above global setting value to false\nTry to create another shared network without mentioning the start or the end IPv4 or IPv6 address\nAn exception will be thrown while creating the shared network", "createdAt": "2020-01-13T17:30:26Z", "url": "https://github.com/apache/cloudstack/pull/3807", "merged": true, "mergeCommit": {"oid": "a2a4968f51e08bba3a80af2dda402ff994144835"}, "closed": true, "closedAt": "2020-01-31T10:22:43Z", "author": {"login": "ravening"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb6MJzHAFqTM0MjMzOTgxNA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABb_r9j5gFqTM1MTM5MDQ4Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQyMzM5ODE0", "url": "https://github.com/apache/cloudstack/pull/3807#pullrequestreview-342339814", "createdAt": "2020-01-14T07:52:06Z", "commit": {"oid": "17b087d0e6bdc7e9c875382a382f5165571fc765"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQwNzo1MjowNlrOFdOi_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQwNzo1MjowNlrOFdOi_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjE5MTM1Ng==", "bodyText": "these are global scope only settings? is account level not more applicable or something in between?", "url": "https://github.com/apache/cloudstack/pull/3807#discussion_r366191356", "createdAt": "2020-01-14T07:52:06Z", "author": {"login": "DaanHoogland"}, "path": "server/src/main/java/com/cloud/network/NetworkServiceImpl.java", "diffHunk": "@@ -200,9 +203,14 @@\n /**\n  * NetworkServiceImpl implements NetworkService.\n  */\n-public class NetworkServiceImpl extends ManagerBase implements NetworkService {\n+public class NetworkServiceImpl extends ManagerBase implements NetworkService, Configurable {\n     private static final Logger s_logger = Logger.getLogger(NetworkServiceImpl.class);\n \n+    private static final ConfigKey<Boolean> AllowDuplicateNetworkName = new ConfigKey<Boolean>(\"Advanced\", Boolean.class,\n+            \"allow.duplicate.networkname\", \"true\", \"Allow creating networks with same name in account\", true);\n+    private static final ConfigKey<Boolean> AllowEmptyStartEndIpAddress = new ConfigKey<Boolean>(\"Advanced\", Boolean.class,\n+            \"allow.empty.start.end.ipaddress\", \"true\", \"Allow creating network without mentioning start and end IP address\",\n+            true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "17b087d0e6bdc7e9c875382a382f5165571fc765"}, "originalPosition": 29}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "17b087d0e6bdc7e9c875382a382f5165571fc765", "author": {"user": {"login": "ravening", "name": "Rakesh"}}, "url": "https://github.com/apache/cloudstack/commit/17b087d0e6bdc7e9c875382a382f5165571fc765", "committedDate": "2020-01-13T17:19:26Z", "message": "Enhancement: Allow creating network with duplicate name\n\nAdd a global setting to disable creating networks with\nsame name in an account\n\nAdd a global setting to disable creating network without\nmentioning the start and end IPv4 or IPv6 address"}, "afterCommit": {"oid": "43a5b710bf4f5e37dbb41a99d9df2ab522dc32ed", "author": {"user": {"login": "ravening", "name": "Rakesh"}}, "url": "https://github.com/apache/cloudstack/commit/43a5b710bf4f5e37dbb41a99d9df2ab522dc32ed", "committedDate": "2020-01-14T13:17:30Z", "message": "Enhancement: Allow creating network with duplicate name\n\nAdd a global setting to disable creating networks with\nsame name in an account\n\nAdd a global setting to disable creating network without\nmentioning the start and end IPv4 or IPv6 address"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQyNTcwNTI1", "url": "https://github.com/apache/cloudstack/pull/3807#pullrequestreview-342570525", "createdAt": "2020-01-14T14:26:58Z", "commit": {"oid": "43a5b710bf4f5e37dbb41a99d9df2ab522dc32ed"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQzNDk1MDkx", "url": "https://github.com/apache/cloudstack/pull/3807#pullrequestreview-343495091", "createdAt": "2020-01-15T20:19:34Z", "commit": {"oid": "43a5b710bf4f5e37dbb41a99d9df2ab522dc32ed"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5MTQxMzg0", "url": "https://github.com/apache/cloudstack/pull/3807#pullrequestreview-349141384", "createdAt": "2020-01-28T05:48:05Z", "commit": {"oid": "43a5b710bf4f5e37dbb41a99d9df2ab522dc32ed"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQwNTo0ODowNVrOFiZ1yg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQwNTo0ODowNVrOFiZ1yg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTYxOTI3NA==", "bodyText": "@ravening for backward compatibility, should this be false?", "url": "https://github.com/apache/cloudstack/pull/3807#discussion_r371619274", "createdAt": "2020-01-28T05:48:05Z", "author": {"login": "rhtyd"}, "path": "server/src/main/java/com/cloud/network/NetworkServiceImpl.java", "diffHunk": "@@ -200,9 +203,14 @@\n /**\n  * NetworkServiceImpl implements NetworkService.\n  */\n-public class NetworkServiceImpl extends ManagerBase implements NetworkService {\n+public class NetworkServiceImpl extends ManagerBase implements NetworkService, Configurable {\n     private static final Logger s_logger = Logger.getLogger(NetworkServiceImpl.class);\n \n+    private static final ConfigKey<Boolean> AllowDuplicateNetworkName = new ConfigKey<Boolean>(\"Advanced\", Boolean.class,\n+            \"allow.duplicate.networkname\", \"true\", \"Allow creating networks with same name in account\", true, ConfigKey.Scope.Account);\n+    private static final ConfigKey<Boolean> AllowEmptyStartEndIpAddress = new ConfigKey<Boolean>(\"Advanced\", Boolean.class,\n+            \"allow.empty.start.end.ipaddress\", \"true\", \"Allow creating network without mentioning start and end IP address\",\n+            true, ConfigKey.Scope.Account);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "43a5b710bf4f5e37dbb41a99d9df2ab522dc32ed"}, "originalPosition": 29}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8525f77ff3e53c78a968c7c0601b08ad9096291d", "author": {"user": {"login": "ravening", "name": "Rakesh"}}, "url": "https://github.com/apache/cloudstack/commit/8525f77ff3e53c78a968c7c0601b08ad9096291d", "committedDate": "2020-01-30T08:57:03Z", "message": "Enhancement: Allow creating network with duplicate name\n\nAdd a global setting to disable creating networks with\nsame name in an account\n\nAdd a global setting to disable creating network without\nmentioning the start and end IPv4 or IPv6 address\n\nBy default we can create networks with the same name in the account.\nSometimes we should not create the networks with same name.\nThis change adds a global setting which prevents creating the network with same name.\nThe default value is true and set it to false to prevent creating network with same names.\n\nAlso its possible to create a shared network without mentioning the\nstart and the end IPv4 or IPv6 address.\nThis change adds a global setting which prevents creating a shared\nnetwork without specifying the start and the end IPv4 or IPv6 address"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "43a5b710bf4f5e37dbb41a99d9df2ab522dc32ed", "author": {"user": {"login": "ravening", "name": "Rakesh"}}, "url": "https://github.com/apache/cloudstack/commit/43a5b710bf4f5e37dbb41a99d9df2ab522dc32ed", "committedDate": "2020-01-14T13:17:30Z", "message": "Enhancement: Allow creating network with duplicate name\n\nAdd a global setting to disable creating networks with\nsame name in an account\n\nAdd a global setting to disable creating network without\nmentioning the start and end IPv4 or IPv6 address"}, "afterCommit": {"oid": "8525f77ff3e53c78a968c7c0601b08ad9096291d", "author": {"user": {"login": "ravening", "name": "Rakesh"}}, "url": "https://github.com/apache/cloudstack/commit/8525f77ff3e53c78a968c7c0601b08ad9096291d", "committedDate": "2020-01-30T08:57:03Z", "message": "Enhancement: Allow creating network with duplicate name\n\nAdd a global setting to disable creating networks with\nsame name in an account\n\nAdd a global setting to disable creating network without\nmentioning the start and end IPv4 or IPv6 address\n\nBy default we can create networks with the same name in the account.\nSometimes we should not create the networks with same name.\nThis change adds a global setting which prevents creating the network with same name.\nThe default value is true and set it to false to prevent creating network with same names.\n\nAlso its possible to create a shared network without mentioning the\nstart and the end IPv4 or IPv6 address.\nThis change adds a global setting which prevents creating a shared\nnetwork without specifying the start and the end IPv4 or IPv6 address"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxMzkwNDg3", "url": "https://github.com/apache/cloudstack/pull/3807#pullrequestreview-351390487", "createdAt": "2020-01-31T09:45:19Z", "commit": {"oid": "8525f77ff3e53c78a968c7c0601b08ad9096291d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4533, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}