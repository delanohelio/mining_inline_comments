{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY3MzY5MzU3", "number": 3840, "title": "Fix listing management server by parameters", "bodyText": "Description\nThe List Management Server api returns a list of all the management servers but fails when trying to list by id or name. This ensures that it fetches the details as per the parameters passed.\nFixes: #3833\nTypes of changes\n\n Breaking change (fix or feature that would cause existing functionality to change)\n New feature (non-breaking change which adds functionality)\n Bug fix (non-breaking change which fixes an issue)\n Enhancement (improves an existing feature and functionality)\n Cleanup (Code refactoring and cleanup, that may add test cases)\n\nHow Has This Been Tested?\nVerified by testing the api with and without parameters", "createdAt": "2020-01-27T08:30:14Z", "url": "https://github.com/apache/cloudstack/pull/3840", "merged": true, "mergeCommit": {"oid": "7a25e40d5a89b4885836b52f08f93ad762703f01"}, "closed": true, "closedAt": "2020-01-30T05:08:26Z", "author": {"login": "davidjumani"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb-Y0GqAFqTM0ODUwNjM5NQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABb_TUG3gFqTM1MDU4Mjc4NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4NTA2Mzk1", "url": "https://github.com/apache/cloudstack/pull/3840#pullrequestreview-348506395", "createdAt": "2020-01-27T08:52:52Z", "commit": {"oid": "ad1d56d814ba1e231cceb925019c6bb2350690e1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4NTMyNzk5", "url": "https://github.com/apache/cloudstack/pull/3840#pullrequestreview-348532799", "createdAt": "2020-01-27T09:40:58Z", "commit": {"oid": "ad1d56d814ba1e231cceb925019c6bb2350690e1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "43ac58dea6cfb11ee991b2b1fd4a5bcfaf9d8036", "author": {"user": null}, "url": "https://github.com/apache/cloudstack/commit/43ac58dea6cfb11ee991b2b1fd4a5bcfaf9d8036", "committedDate": "2020-01-27T09:49:08Z", "message": "Fix listing management server by parameters"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ad1d56d814ba1e231cceb925019c6bb2350690e1", "author": {"user": null}, "url": "https://github.com/apache/cloudstack/commit/ad1d56d814ba1e231cceb925019c6bb2350690e1", "committedDate": "2020-01-27T08:04:06Z", "message": "Fix listing management server by parameters"}, "afterCommit": {"oid": "43ac58dea6cfb11ee991b2b1fd4a5bcfaf9d8036", "author": {"user": null}, "url": "https://github.com/apache/cloudstack/commit/43ac58dea6cfb11ee991b2b1fd4a5bcfaf9d8036", "committedDate": "2020-01-27T09:49:08Z", "message": "Fix listing management server by parameters"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4NTg3NTYz", "url": "https://github.com/apache/cloudstack/pull/3840#pullrequestreview-348587563", "createdAt": "2020-01-27T11:14:33Z", "commit": {"oid": "43ac58dea6cfb11ee991b2b1fd4a5bcfaf9d8036"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUwNTYyNzg5", "url": "https://github.com/apache/cloudstack/pull/3840#pullrequestreview-350562789", "createdAt": "2020-01-30T03:22:39Z", "commit": {"oid": "43ac58dea6cfb11ee991b2b1fd4a5bcfaf9d8036"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMFQwMzoyMjozOVrOFjecbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMFQwMzoyMjozOVrOFjecbw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mjc0MzI3OQ==", "bodyText": "Add space after for and ifs", "url": "https://github.com/apache/cloudstack/pull/3840#discussion_r372743279", "createdAt": "2020-01-30T03:22:39Z", "author": {"login": "rhtyd"}, "path": "server/src/main/java/com/cloud/api/query/QueryManagerImpl.java", "diffHunk": "@@ -3832,20 +3832,43 @@ protected ResourceDetailResponse createResourceDetailsResponse(ResourceDetail re\n     @Override\n     public ListResponse<ManagementServerResponse> listManagementServers(ListMgmtsCmd cmd) {\n         ListResponse<ManagementServerResponse> response = new ListResponse<>();\n-        List<ManagementServerResponse> result = new ArrayList<>();\n-        for (ManagementServerHostVO mgmt : managementServerHostDao.listAll()) {\n-            ManagementServerResponse mgmtResponse = new ManagementServerResponse();\n-            mgmtResponse.setId(mgmt.getUuid());\n-            mgmtResponse.setName(mgmt.getName());\n-            mgmtResponse.setState(mgmt.getState());\n-            mgmtResponse.setVersion(mgmt.getVersion());\n-            mgmtResponse.setObjectName(\"managementserver\");\n-            result.add(mgmtResponse);\n-        }\n-        response.setResponses(result);\n+        Pair<List<ManagementServerHostVO>, Integer> result = listManagementServersInternal(cmd);\n+        List<ManagementServerResponse> hostResponses = new ArrayList<>();\n+\n+        for(ManagementServerHostVO host : result.first()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "43ac58dea6cfb11ee991b2b1fd4a5bcfaf9d8036"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5759eb25e8cba7afdd2b5ff16aef17ef0e8e400b", "author": {"user": {"login": "davidjumani", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/5759eb25e8cba7afdd2b5ff16aef17ef0e8e400b", "committedDate": "2020-01-30T04:48:54Z", "message": "Incorporating changes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUwNTgyNzg1", "url": "https://github.com/apache/cloudstack/pull/3840#pullrequestreview-350582785", "createdAt": "2020-01-30T05:02:19Z", "commit": {"oid": "5759eb25e8cba7afdd2b5ff16aef17ef0e8e400b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4565, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}