{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk1NzkzMDM2", "number": 3999, "title": "Update schema-41310to41400.sql", "bodyText": "Keeping the snapshot on Primary storage only, was originally implemented for KVM+Ceph specifically as it seems, since it's seriously broken for KVM+NFS/local in 4.11+ (and not applicable/doesn't affects VMware at all, while it accidentally works for XS+NFS as they share the same \"strategy\")\nThus update the desc so that KVM users don't find themselves scratching their head.\nWe would want to fix/implement this in 4.15 (?) since when using qcow2 the snaps can be kept \"attached\" to it, the same way they are now attached/part of the rbd image (Ceph)\nping @GabrielBrascher @wido @weizhouapache\ncc @nathanejohnson (you guys implemented this, right?)", "createdAt": "2020-03-30T17:29:15Z", "url": "https://github.com/apache/cloudstack/pull/3999", "merged": true, "mergeCommit": {"oid": "d52f3f4a6b33618a6f6c50d97dc1a9545880886c"}, "closed": true, "closedAt": "2020-04-04T12:07:15Z", "author": {"login": "andrijapanicsb"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcSx4nBAH2gAyMzk1NzkzMDM2OjYxMWRmOTE0ZmEzMWY4YTE2YmVmZjg1ZjBlZmI3MzIzMTc0ZmE4MmM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcUFrFQgH2gAyMzk1NzkzMDM2OjRkY2E0YzkwYjMwNmE2NzFiYWEzYzQ4MTg3MGNmOWE1YmQyNTQ5NjA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "611df914fa31f8a16beff85f0efb7323174fa82c", "author": {"user": {"login": "andrijapanicsb", "name": "Andrija Panic"}}, "url": "https://github.com/apache/cloudstack/commit/611df914fa31f8a16beff85f0efb7323174fa82c", "committedDate": "2020-03-30T17:23:54Z", "message": "Update schema-41310to41400.sql"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4396e67e2e10173ab731912292ea6786626df070", "author": {"user": {"login": "andrijapanicsb", "name": "Andrija Panic"}}, "url": "https://github.com/apache/cloudstack/commit/4396e67e2e10173ab731912292ea6786626df070", "committedDate": "2020-03-30T17:30:58Z", "message": "update desc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0MjA3OTQ0", "url": "https://github.com/apache/cloudstack/pull/3999#pullrequestreview-384207944", "createdAt": "2020-03-30T20:32:57Z", "commit": {"oid": "4396e67e2e10173ab731912292ea6786626df070"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQyMDozMjo1N1rOF97G0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQyMDozMjo1N1rOF97G0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDQ3NTg1Ng==", "bodyText": "nice to update in the db, but it needs updating in code: https://github.com/apache/cloudstack/blob/master/server/src/main/java/com/cloud/storage/snapshot/SnapshotManager.java#L59", "url": "https://github.com/apache/cloudstack/pull/3999#discussion_r400475856", "createdAt": "2020-03-30T20:32:57Z", "author": {"login": "DaanHoogland"}, "path": "engine/schema/src/main/resources/META-INF/db/schema-41310to41400.sql", "diffHunk": "@@ -19,6 +19,10 @@\n -- Schema upgrade from 4.13.1.0 to 4.14.0.0\n --;\n \n+-- Update the description to indicate this only works with KVM + Ceph \n+-- (not implemented properly atm for KVM+NFS/local, and it accidentaly works with XS + NFS. Not applicable for VMware)\n+UPDATE `cloud`.`configuration` SET `description`='Indicates whether to always backup primary storage snapshot to secondary storage. Applicable for KVM + Ceph only.' WHERE  `name`='snapshot.backup.to.secondary';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4396e67e2e10173ab731912292ea6786626df070"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0MjA4MjEw", "url": "https://github.com/apache/cloudstack/pull/3999#pullrequestreview-384208210", "createdAt": "2020-03-30T20:33:24Z", "commit": {"oid": "4396e67e2e10173ab731912292ea6786626df070"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0MjA4ODMw", "url": "https://github.com/apache/cloudstack/pull/3999#pullrequestreview-384208830", "createdAt": "2020-03-30T20:34:19Z", "commit": {"oid": "4396e67e2e10173ab731912292ea6786626df070"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "09b1ea4fefcc4fc288afb9b5ca0d206de0ce7a50", "author": {"user": {"login": "andrijapanicsb", "name": "Andrija Panic"}}, "url": "https://github.com/apache/cloudstack/commit/09b1ea4fefcc4fc288afb9b5ca0d206de0ce7a50", "committedDate": "2020-03-30T21:31:49Z", "message": "update the config key as well"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0MjUwNDU3", "url": "https://github.com/apache/cloudstack/pull/3999#pullrequestreview-384250457", "createdAt": "2020-03-30T21:38:09Z", "commit": {"oid": "09b1ea4fefcc4fc288afb9b5ca0d206de0ce7a50"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0MjgwNjg1", "url": "https://github.com/apache/cloudstack/pull/3999#pullrequestreview-384280685", "createdAt": "2020-03-30T22:35:08Z", "commit": {"oid": "09b1ea4fefcc4fc288afb9b5ca0d206de0ce7a50"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4dca4c90b306a671baa3c481870cf9a5bd254960", "author": {"user": {"login": "andrijapanicsb", "name": "Andrija Panic"}}, "url": "https://github.com/apache/cloudstack/commit/4dca4c90b306a671baa3c481870cf9a5bd254960", "committedDate": "2020-04-03T19:01:09Z", "message": "Update schema-41310to41400.sql (#4012)\n\n* Update schema-41310to41400.sql\r\n\r\n* update configkey desc"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4151, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}