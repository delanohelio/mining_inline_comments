{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQxMzE4NTQ1", "number": 4186, "title": "Adding pagination for quotaSummary and quotaTariffList", "bodyText": "Description\nAdds pagination and keyword search support to quotaSummary and quotaTariffList\nFixes: #4181\nTypes of changes\n\n\n Breaking change (fix or feature that would cause existing functionality to change)\n New feature (non-breaking change which adds functionality)\n Bug fix (non-breaking change which fixes an issue)\n Enhancement (improves an existing feature and functionality)\n Cleanup (Code refactoring and cleanup, that may add test cases)\n\nHow has this been tested?\n(localcloud) SBCM5> > quota summary listall=true page=1 pagesize=2 keyword=a\n{\n  \"count\": 3,\n  \"summary\": [\n    {\n      \"account\": \"ACSUser\",\n      \"accountid\": 4,\n      \"balance\": 0,\n      \"currency\": \"$\",\n      \"domain\": \"ROOT\",\n      \"domainid\": 1,\n      \"enddate\": \"2020-07-02T00:00:00+0000\",\n      \"quota\": 0,\n      \"startdate\": \"2020-07-01T00:00:00+0000\",\n      \"state\": \"enabled\"\n    },\n    {\n      \"account\": \"admin\",\n      \"accountid\": 2,\n      \"balance\": 0,\n      \"currency\": \"$\",\n      \"domain\": \"ROOT\",\n      \"domainid\": 1,\n      \"enddate\": \"2020-07-02T00:00:00+0000\",\n      \"quota\": 0,\n      \"startdate\": \"2020-07-01T00:00:00+0000\",\n      \"state\": \"enabled\"\n    }\n  ]\n}\n\n(localcloud) SBCM5> > quota tarifflist pagesize=3 page=7\n{\n  \"count\": 25,\n  \"quotatariff\": [\n    {\n      \"currency\": \"$\",\n      \"description\": \"VM Disk usage(I/O Write)\",\n      \"effectiveDate\": \"2010-05-04T00:00:00+0000\",\n      \"tariffValue\": 0,\n      \"usageDiscriminator\": \"1\",\n      \"usageName\": \"VM_DISK_IO_WRITE\",\n      \"usageType\": 22,\n      \"usageUnit\": \"GB\"\n    },\n    {\n      \"currency\": \"$\",\n      \"description\": \"VM Disk usage(Bytes Read)\",\n      \"effectiveDate\": \"2010-05-04T00:00:00+0000\",\n      \"tariffValue\": 0,\n      \"usageDiscriminator\": \"1\",\n      \"usageName\": \"VM_DISK_BYTES_READ\",\n      \"usageType\": 23,\n      \"usageUnit\": \"GB\"\n    },\n    {\n      \"currency\": \"$\",\n      \"description\": \"VM Disk usage(Bytes Write)\",\n      \"effectiveDate\": \"2010-05-04T00:00:00+0000\",\n      \"tariffValue\": 0,\n      \"usageDiscriminator\": \"1\",\n      \"usageName\": \"VM_DISK_BYTES_WRITE\",\n      \"usageType\": 24,\n      \"usageUnit\": \"GB\"\n    }\n  ]\n}", "createdAt": "2020-06-29T11:02:56Z", "url": "https://github.com/apache/cloudstack/pull/4186", "merged": true, "mergeCommit": {"oid": "b64d0b2d92dbd81910c895510fe818c3a7a54f8c"}, "closed": true, "closedAt": "2020-07-06T09:24:05Z", "author": {"login": "davidjumani"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcv_CtVABqjM0OTIwOTYwOTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcxM2z5AH2gAyNDQxMzE4NTQ1OjJkNDRmODI3ZjY3ZGI5NzEzNzJhM2E1MzAxOWQ5ODM1OTMwMzM4ODE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c2765997e497d4fe208e73277103b317d06a88fb", "author": {"user": {"login": "davidjumani", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/c2765997e497d4fe208e73277103b317d06a88fb", "committedDate": "2020-06-29T10:56:05Z", "message": "Adding pagination for quotaSummary and quotaTariffList"}, "afterCommit": {"oid": "cf5cdf9d78c828f66086bf508d169b4906378bc0", "author": {"user": {"login": "davidjumani", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/cf5cdf9d78c828f66086bf508d169b4906378bc0", "committedDate": "2020-06-29T11:07:16Z", "message": "Adding pagination for quotaSummary and quotaTariffList"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cf5cdf9d78c828f66086bf508d169b4906378bc0", "author": {"user": {"login": "davidjumani", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/cf5cdf9d78c828f66086bf508d169b4906378bc0", "committedDate": "2020-06-29T11:07:16Z", "message": "Adding pagination for quotaSummary and quotaTariffList"}, "afterCommit": {"oid": "4fc7f63282b38c49d8371f5e63de989dc5f35c51", "author": {"user": {"login": "davidjumani", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/4fc7f63282b38c49d8371f5e63de989dc5f35c51", "committedDate": "2020-06-29T11:11:05Z", "message": "Adding pagination for quotaSummary and quotaTariffList"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4fc7f63282b38c49d8371f5e63de989dc5f35c51", "author": {"user": {"login": "davidjumani", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/4fc7f63282b38c49d8371f5e63de989dc5f35c51", "committedDate": "2020-06-29T11:11:05Z", "message": "Adding pagination for quotaSummary and quotaTariffList"}, "afterCommit": {"oid": "89f4ce6caaf88ac6d4e5be6442404e085100b884", "author": {"user": {"login": "davidjumani", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/89f4ce6caaf88ac6d4e5be6442404e085100b884", "committedDate": "2020-06-29T11:13:44Z", "message": "Adding pagination for quotaSummary and quotaTariffList"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM5NDg3NTg0", "url": "https://github.com/apache/cloudstack/pull/4186#pullrequestreview-439487584", "createdAt": "2020-06-29T20:46:22Z", "commit": {"oid": "89f4ce6caaf88ac6d4e5be6442404e085100b884"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQyMDo0NjoyMlrOGqhlaA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQyMDo0NjoyMlrOGqhlaA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzI0MzYyNA==", "bodyText": "Why not use Optional instead of null?", "url": "https://github.com/apache/cloudstack/pull/4186#discussion_r447243624", "createdAt": "2020-06-29T20:46:22Z", "author": {"login": "ravening"}, "path": "engine/schema/src/main/java/com/cloud/user/dao/AccountDaoImpl.java", "diffHunk": "@@ -157,9 +157,16 @@ public AccountDaoImpl() {\n \n     @Override\n     public List<AccountVO> findAccountsLike(String accountName) {\n+        return findAccountsLike(accountName, null);\n+    }\n+\n+    @Override\n+    public List<AccountVO> findAccountsLike(String accountName, Filter filter) {\n         SearchCriteria<AccountVO> sc = createSearchCriteria();\n-        sc.addAnd(\"accountName\", SearchCriteria.Op.LIKE, \"%\" + accountName + \"%\");\n-        return listBy(sc);\n+        if (accountName != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "89f4ce6caaf88ac6d4e5be6442404e085100b884"}, "originalPosition": 12}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "89f4ce6caaf88ac6d4e5be6442404e085100b884", "author": {"user": {"login": "davidjumani", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/89f4ce6caaf88ac6d4e5be6442404e085100b884", "committedDate": "2020-06-29T11:13:44Z", "message": "Adding pagination for quotaSummary and quotaTariffList"}, "afterCommit": {"oid": "49048554ca220a05f27085d12e70b2ac121fa46e", "author": {"user": {"login": "davidjumani", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/49048554ca220a05f27085d12e70b2ac121fa46e", "committedDate": "2020-06-30T04:57:19Z", "message": "Adding pagination for quotaSummary and quotaTariffList"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "49048554ca220a05f27085d12e70b2ac121fa46e", "author": {"user": {"login": "davidjumani", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/49048554ca220a05f27085d12e70b2ac121fa46e", "committedDate": "2020-06-30T04:57:19Z", "message": "Adding pagination for quotaSummary and quotaTariffList"}, "afterCommit": {"oid": "6c7518b2577235ef401d777467a0f1871e37959a", "author": {"user": {"login": "davidjumani", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/6c7518b2577235ef401d777467a0f1871e37959a", "committedDate": "2020-06-30T05:17:21Z", "message": "Adding pagination for quotaSummary and quotaTariffList"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6c7518b2577235ef401d777467a0f1871e37959a", "author": {"user": {"login": "davidjumani", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/6c7518b2577235ef401d777467a0f1871e37959a", "committedDate": "2020-06-30T05:17:21Z", "message": "Adding pagination for quotaSummary and quotaTariffList"}, "afterCommit": {"oid": "ee149ee3e6805ea3686316e8b247d29e426d6448", "author": {"user": {"login": "davidjumani", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/ee149ee3e6805ea3686316e8b247d29e426d6448", "committedDate": "2020-06-30T05:27:59Z", "message": "Adding pagination for quotaSummary and quotaTariffList"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ee149ee3e6805ea3686316e8b247d29e426d6448", "author": {"user": {"login": "davidjumani", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/ee149ee3e6805ea3686316e8b247d29e426d6448", "committedDate": "2020-06-30T05:27:59Z", "message": "Adding pagination for quotaSummary and quotaTariffList"}, "afterCommit": {"oid": "44d9c812065a11fccfdf3a8b06030c3680368529", "author": {"user": {"login": "davidjumani", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/44d9c812065a11fccfdf3a8b06030c3680368529", "committedDate": "2020-06-30T06:32:47Z", "message": "Adding pagination for quotaSummary and quotaTariffList"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwNTE3MTYx", "url": "https://github.com/apache/cloudstack/pull/4186#pullrequestreview-440517161", "createdAt": "2020-07-01T03:08:42Z", "commit": {"oid": "44d9c812065a11fccfdf3a8b06030c3680368529"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "44d9c812065a11fccfdf3a8b06030c3680368529", "author": {"user": {"login": "davidjumani", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/44d9c812065a11fccfdf3a8b06030c3680368529", "committedDate": "2020-06-30T06:32:47Z", "message": "Adding pagination for quotaSummary and quotaTariffList"}, "afterCommit": {"oid": "681f9b97870f416e255f5c1b68c227393dab143f", "author": {"user": {"login": "davidjumani", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/681f9b97870f416e255f5c1b68c227393dab143f", "committedDate": "2020-07-01T05:19:07Z", "message": "Adding pagination for quotaSummary and quotaTariffList"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwNTcwNzgw", "url": "https://github.com/apache/cloudstack/pull/4186#pullrequestreview-440570780", "createdAt": "2020-07-01T06:11:49Z", "commit": {"oid": "681f9b97870f416e255f5c1b68c227393dab143f"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3c8b1e107420bbfa25341131f7893ff559b3091c", "author": {"user": {"login": "davidjumani", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/3c8b1e107420bbfa25341131f7893ff559b3091c", "committedDate": "2020-07-01T08:08:11Z", "message": "Adding pagination for quotaSummary and quotaTariffList"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "681f9b97870f416e255f5c1b68c227393dab143f", "author": {"user": {"login": "davidjumani", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/681f9b97870f416e255f5c1b68c227393dab143f", "committedDate": "2020-07-01T05:19:07Z", "message": "Adding pagination for quotaSummary and quotaTariffList"}, "afterCommit": {"oid": "3c8b1e107420bbfa25341131f7893ff559b3091c", "author": {"user": {"login": "davidjumani", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/3c8b1e107420bbfa25341131f7893ff559b3091c", "committedDate": "2020-07-01T08:08:11Z", "message": "Adding pagination for quotaSummary and quotaTariffList"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwNjU0MTgy", "url": "https://github.com/apache/cloudstack/pull/4186#pullrequestreview-440654182", "createdAt": "2020-07-01T08:26:26Z", "commit": {"oid": "681f9b97870f416e255f5c1b68c227393dab143f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2d44f827f67db971372a3a53019d983593033881", "author": {"user": {"login": "davidjumani", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/2d44f827f67db971372a3a53019d983593033881", "committedDate": "2020-07-03T05:47:06Z", "message": "Changing account and domain id from long to string"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3908, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}