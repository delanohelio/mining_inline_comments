{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk4MzI4ODgw", "number": 4376, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQwNzoyMTo0NlrOEr7mBg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQwNzoyODo1MVrOEr7uwQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0NTAwNjE0OnYy", "diffSide": "RIGHT", "path": "server/src/main/java/com/cloud/configuration/ConfigurationManagerImpl.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQwNzoyMTo0NlrOHe-AmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQxOTozMzo1M1rOHfWV6A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjIzNTI4OA==", "bodyText": "cpuSpeed null check not required here, it is always not null as per the above changes.", "url": "https://github.com/apache/cloudstack/pull/4376#discussion_r502235288", "createdAt": "2020-10-09T07:21:46Z", "author": {"login": "sureshanaparti"}, "path": "server/src/main/java/com/cloud/configuration/ConfigurationManagerImpl.java", "diffHunk": "@@ -2319,9 +2319,9 @@ public ServiceOffering createServiceOffering(final CreateServiceOfferingCmd cmd)\n                 throw new InvalidParameterValueException(\"For creating a custom compute offering cpu and memory all should be null\");\n             }\n             // if any of them is null, then all of them shoull be null\n-            if (maxCPU == null || minCPU == null || maxMemory == null || minMemory == null) {\n-                if (maxCPU != null || minCPU != null || maxMemory != null || minMemory != null) {\n-                    throw new InvalidParameterValueException(\"For creating a custom compute offering min/max cpu and min/max memory should all be specified\");\n+            if (maxCPU == null || minCPU == null || maxMemory == null || minMemory == null || cpuSpeed == null) {\n+                if (maxCPU != null || minCPU != null || maxMemory != null || minMemory != null || cpuSpeed != null) {\n+                    throw new InvalidParameterValueException(\"For creating a custom compute offering min/max cpu and min/max memory/cpu speed should all be null or all specified\");\n                 }\n             } else {\n                 if (cpuSpeed != null && (cpuSpeed.intValue() < 0 || cpuSpeed.longValue() > Integer.MAX_VALUE)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3f1e9098b449e97b3d4f51d17393383415811e18"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjYzMzk2MA==", "bodyText": "@sureshanaparti indeed, I will remove it.", "url": "https://github.com/apache/cloudstack/pull/4376#discussion_r502633960", "createdAt": "2020-10-09T19:33:53Z", "author": {"login": "weizhouapache"}, "path": "server/src/main/java/com/cloud/configuration/ConfigurationManagerImpl.java", "diffHunk": "@@ -2319,9 +2319,9 @@ public ServiceOffering createServiceOffering(final CreateServiceOfferingCmd cmd)\n                 throw new InvalidParameterValueException(\"For creating a custom compute offering cpu and memory all should be null\");\n             }\n             // if any of them is null, then all of them shoull be null\n-            if (maxCPU == null || minCPU == null || maxMemory == null || minMemory == null) {\n-                if (maxCPU != null || minCPU != null || maxMemory != null || minMemory != null) {\n-                    throw new InvalidParameterValueException(\"For creating a custom compute offering min/max cpu and min/max memory should all be specified\");\n+            if (maxCPU == null || minCPU == null || maxMemory == null || minMemory == null || cpuSpeed == null) {\n+                if (maxCPU != null || minCPU != null || maxMemory != null || minMemory != null || cpuSpeed != null) {\n+                    throw new InvalidParameterValueException(\"For creating a custom compute offering min/max cpu and min/max memory/cpu speed should all be null or all specified\");\n                 }\n             } else {\n                 if (cpuSpeed != null && (cpuSpeed.intValue() < 0 || cpuSpeed.longValue() > Integer.MAX_VALUE)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjIzNTI4OA=="}, "originalCommit": {"oid": "3f1e9098b449e97b3d4f51d17393383415811e18"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0NTAyODQ5OnYy", "diffSide": "RIGHT", "path": "server/src/main/java/com/cloud/configuration/ConfigurationManagerImpl.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQwNzoyODo1MVrOHe-NzQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQxNzozMDowOVrOHgHXAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjIzODY2OQ==", "bodyText": "@ustcweizhou similar cond check applicable for cpuNumber and memory if these are mandatory params? check and update accordingly.", "url": "https://github.com/apache/cloudstack/pull/4376#discussion_r502238669", "createdAt": "2020-10-09T07:28:51Z", "author": {"login": "sureshanaparti"}, "path": "server/src/main/java/com/cloud/configuration/ConfigurationManagerImpl.java", "diffHunk": "@@ -2343,7 +2343,7 @@ public ServiceOffering createServiceOffering(final CreateServiceOfferingCmd cmd)\n             if (cpuNumber != null && (cpuNumber.intValue() <= 0 || cpuNumber.longValue() > Integer.MAX_VALUE)) {\n                 throw new InvalidParameterValueException(\"Failed to create service offering \" + offeringName + \": specify the cpu number value between 1 and \" + Integer.MAX_VALUE);\n             }\n-            if (cpuSpeed != null && (cpuSpeed.intValue() < 0 || cpuSpeed.longValue() > Integer.MAX_VALUE)) {\n+            if (cpuSpeed == null || (cpuSpeed.intValue() < 0 || cpuSpeed.longValue() > Integer.MAX_VALUE)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3f1e9098b449e97b3d4f51d17393383415811e18"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjYzMDQ5Mw==", "bodyText": "@sureshanaparti cpuNumber and memory are not mandatory for dynamic offerings.\nThere are 3 types of offerings\n(1) fixed offering, cpu number, cpu speed, memory are mandatory\n(2) dynamic offering,\n(2.1) unconstrained offering, cpu number, cpu speed, memory are not required\n(2.2) constrained offerings, min/max cpu, min/max memory, and cpu speed are mandatory.", "url": "https://github.com/apache/cloudstack/pull/4376#discussion_r502630493", "createdAt": "2020-10-09T19:25:52Z", "author": {"login": "weizhouapache"}, "path": "server/src/main/java/com/cloud/configuration/ConfigurationManagerImpl.java", "diffHunk": "@@ -2343,7 +2343,7 @@ public ServiceOffering createServiceOffering(final CreateServiceOfferingCmd cmd)\n             if (cpuNumber != null && (cpuNumber.intValue() <= 0 || cpuNumber.longValue() > Integer.MAX_VALUE)) {\n                 throw new InvalidParameterValueException(\"Failed to create service offering \" + offeringName + \": specify the cpu number value between 1 and \" + Integer.MAX_VALUE);\n             }\n-            if (cpuSpeed != null && (cpuSpeed.intValue() < 0 || cpuSpeed.longValue() > Integer.MAX_VALUE)) {\n+            if (cpuSpeed == null || (cpuSpeed.intValue() < 0 || cpuSpeed.longValue() > Integer.MAX_VALUE)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjIzODY2OQ=="}, "originalCommit": {"oid": "3f1e9098b449e97b3d4f51d17393383415811e18"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzQzNzA1OA==", "bodyText": "@weizhouapache thanks for confirming", "url": "https://github.com/apache/cloudstack/pull/4376#discussion_r503437058", "createdAt": "2020-10-12T17:30:09Z", "author": {"login": "sureshanaparti"}, "path": "server/src/main/java/com/cloud/configuration/ConfigurationManagerImpl.java", "diffHunk": "@@ -2343,7 +2343,7 @@ public ServiceOffering createServiceOffering(final CreateServiceOfferingCmd cmd)\n             if (cpuNumber != null && (cpuNumber.intValue() <= 0 || cpuNumber.longValue() > Integer.MAX_VALUE)) {\n                 throw new InvalidParameterValueException(\"Failed to create service offering \" + offeringName + \": specify the cpu number value between 1 and \" + Integer.MAX_VALUE);\n             }\n-            if (cpuSpeed != null && (cpuSpeed.intValue() < 0 || cpuSpeed.longValue() > Integer.MAX_VALUE)) {\n+            if (cpuSpeed == null || (cpuSpeed.intValue() < 0 || cpuSpeed.longValue() > Integer.MAX_VALUE)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjIzODY2OQ=="}, "originalCommit": {"oid": "3f1e9098b449e97b3d4f51d17393383415811e18"}, "originalPosition": 18}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4218, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}