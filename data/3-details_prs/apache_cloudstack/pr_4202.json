{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ0NDE0NTAx", "number": 4202, "title": "server: don't export B&R APIs if feature is not enabled globally", "bodyText": "This change will ensure that B&R APIs are not exported if the feature is not enabled globally. Make it non-dynamic to require restarting of mgmt server which is needed for the background sync task to be setup or not.\nTypes of changes\n\n\n Breaking change (fix or feature that would cause existing functionality to change)\n New feature (non-breaking change which adds functionality)\n Bug fix (non-breaking change which fixes an issue)\n Enhancement (improves an existing feature and functionality)\n Cleanup (Code refactoring and cleanup, that may add test cases)", "createdAt": "2020-07-05T14:23:03Z", "url": "https://github.com/apache/cloudstack/pull/4202", "merged": true, "mergeCommit": {"oid": "db9f8258d7a8eff283ff055fb11bca41d1bfc94e"}, "closed": true, "closedAt": "2020-07-07T12:59:44Z", "author": {"login": "rhtyd"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcx9anTgH2gAyNDQ0NDE0NTAxOmE2MGZjOGM5Njk3YTUyZTQyYTU0OTQzZGQzYmE0ZmMxZGFmNGI5ZjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcylbX-gH2gAyNDQ0NDE0NTAxOjkwY2E4ODBmMzAyNWY4NmM3ZjFiYTgyNDFlYzJlNjdiZjM2ZGFhODI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a60fc8c9697a52e42a54943dd3ba4fc1daf4b9f2", "author": {"user": {"login": "rhtyd", "name": "Rohit Yadav"}}, "url": "https://github.com/apache/cloudstack/commit/a60fc8c9697a52e42a54943dd3ba4fc1daf4b9f2", "committedDate": "2020-07-05T14:21:39Z", "message": "server: don't export APIs if feature is not enabled in any zones\n\nThis change will ensure that B&R APIs are not exported if the feature\nis not enabled in any of the zones.\n\nSigned-off-by: Rohit Yadav <rohit.yadav@shapeblue.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyNzE2ODM5", "url": "https://github.com/apache/cloudstack/pull/4202#pullrequestreview-442716839", "createdAt": "2020-07-05T23:48:24Z", "commit": {"oid": "a60fc8c9697a52e42a54943dd3ba4fc1daf4b9f2"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNVQyMzo0ODoyNFrOGtFsjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNVQyMzo0ODoyNFrOGtFsjA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTkzMjQyOA==", "bodyText": "According to the description, ADMIN needs to restart the management server and therefore this is not a dynamic setting.\nWhat do you think of changing the isDynamic param to false?\nConfigKey constructor:\npublic ConfigKey(String category, Class<T> type, String name, String defaultValue, String description, boolean isDynamic, Scope scope) {\n    this(type, name, category, defaultValue, description, isDynamic, scope, null);\n}", "url": "https://github.com/apache/cloudstack/pull/4202#discussion_r449932428", "createdAt": "2020-07-05T23:48:24Z", "author": {"login": "GabrielBrascher"}, "path": "api/src/main/java/org/apache/cloudstack/backup/BackupManager.java", "diffHunk": "@@ -38,7 +38,7 @@\n     ConfigKey<Boolean> BackupFrameworkEnabled = new ConfigKey<>(\"Advanced\", Boolean.class,\n             \"backup.framework.enabled\",\n             \"false\",\n-            \"Is backup and recovery framework enabled.\", true, ConfigKey.Scope.Zone);\n+            \"Is backup and recovery framework enabled. Restart management server on global value change.\", true, ConfigKey.Scope.Zone);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a60fc8c9697a52e42a54943dd3ba4fc1daf4b9f2"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "549d822a823b90784174303651d28f6ded7bdcac", "author": {"user": {"login": "rhtyd", "name": "Rohit Yadav"}}, "url": "https://github.com/apache/cloudstack/commit/549d822a823b90784174303651d28f6ded7bdcac", "committedDate": "2020-07-06T08:46:02Z", "message": "don't enable feature if it's globally disabled\n\nSigned-off-by: Rohit Yadav <rohit.yadav@shapeblue.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "85aa93143a3de1b8a8dce0a53b037b8c65733403", "author": {"user": {"login": "rhtyd", "name": "Rohit Yadav"}}, "url": "https://github.com/apache/cloudstack/commit/85aa93143a3de1b8a8dce0a53b037b8c65733403", "committedDate": "2020-07-06T08:53:02Z", "message": "run the dummy B&R test only on simulator\n\nSigned-off-by: Rohit Yadav <rohit.yadav@shapeblue.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1a11c2a74fa9ec735487963d42f4d2fb63eddee0", "author": {"user": {"login": "rhtyd", "name": "Rohit Yadav"}}, "url": "https://github.com/apache/cloudstack/commit/1a11c2a74fa9ec735487963d42f4d2fb63eddee0", "committedDate": "2020-07-06T08:53:53Z", "message": "Update BackupManager.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2c06c8491c64c82162f3434ebf5da23fe1de17ac", "author": {"user": {"login": "rhtyd", "name": "Rohit Yadav"}}, "url": "https://github.com/apache/cloudstack/commit/2c06c8491c64c82162f3434ebf5da23fe1de17ac", "committedDate": "2020-07-07T05:15:49Z", "message": "Update test_backup_recovery_dummy.py"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQzNzczOTA2", "url": "https://github.com/apache/cloudstack/pull/4202#pullrequestreview-443773906", "createdAt": "2020-07-07T10:45:16Z", "commit": {"oid": "2c06c8491c64c82162f3434ebf5da23fe1de17ac"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "90ca880f3025f86c7f1ba8241ec2e67bf36daa82", "author": {"user": {"login": "rhtyd", "name": "Rohit Yadav"}}, "url": "https://github.com/apache/cloudstack/commit/90ca880f3025f86c7f1ba8241ec2e67bf36daa82", "committedDate": "2020-07-07T12:58:41Z", "message": "Update test_backup_recovery_dummy.py"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3926, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}