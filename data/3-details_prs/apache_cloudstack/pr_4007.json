{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk3MDQ0Nzk4", "number": 4007, "title": "Restarting all networks that needs a restart in a VPC", "bodyText": "Description\n\nWhen a VPC is restarted, the networks in the VPC is not restarted, this PR will add the logic to restart the networks in the VPC that needs a restart when the VPC is restarted.\n\n\n\n\n\nFixes: #3816\nTypes of changes\n\n\n Breaking change (fix or feature that would cause existing functionality to change)\n New feature (non-breaking change which adds functionality)\n Bug fix (non-breaking change which fixes an issue)\n Enhancement (improves an existing feature and functionality)\n Cleanup (Code refactoring and cleanup, that may add test cases)\n\nScreenshots (if appropriate):\nHow Has This Been Tested?\n\n\n\nThis was tested by manually setting the needs restart flag in the db in the networks table and then restarting the VPC.", "createdAt": "2020-04-01T14:49:26Z", "url": "https://github.com/apache/cloudstack/pull/4007", "merged": true, "mergeCommit": {"oid": "88d51ce35306bbf852bc50258d672a74a1ba2b22"}, "closed": true, "closedAt": "2020-06-17T01:42:05Z", "author": {"login": "Spaceman1984"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcTYnVsAH2gAyMzk3MDQ0Nzk4OjVmNTBkYmFkMWFlNDk3YTkyZjYwNTNhMzE2NWE4ZmRkMjI2OTBkM2M=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcT_QJdAFqTM4NzE3NTUwMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5f50dbad1ae497a92f6053a3165a8fdd22690d3c", "author": {"user": {"login": "Spaceman1984", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/5f50dbad1ae497a92f6053a3165a8fdd22690d3c", "committedDate": "2020-04-01T14:31:20Z", "message": "Restarting all networks that needs a restart in a VPC"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1OTQ1Mjgy", "url": "https://github.com/apache/cloudstack/pull/4007#pullrequestreview-385945282", "createdAt": "2020-04-01T21:00:13Z", "commit": {"oid": "5f50dbad1ae497a92f6053a3165a8fdd22690d3c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQyMTowMDoxNFrOF_SZ3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQyMTowMDoxNFrOF_SZ3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTkwNjE0Mw==", "bodyText": "instead of a comment can you extract this into a method with good name, please?", "url": "https://github.com/apache/cloudstack/pull/4007#discussion_r401906143", "createdAt": "2020-04-01T21:00:14Z", "author": {"login": "DaanHoogland"}, "path": "server/src/main/java/com/cloud/network/vpc/VpcManagerImpl.java", "diffHunk": "@@ -1747,6 +1747,14 @@ public boolean restartVpc(final long vpcId, final boolean cleanUp, final boolean\n                 return true;\n             }\n \n+            // Restart all networks in this VPC that needs a restart\n+            List<? extends Network> networks = _ntwkModel.listNetworksByVpc(vpcId);\n+            for (Network network: networks){\n+                if (network.isRestartRequired()){\n+                    _ntwkMgr.restartNetwork(network.getId(), callerAccount, callerUser, cleanUp);\n+                }\n+            }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5f50dbad1ae497a92f6053a3165a8fdd22690d3c"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d6cbdf3f989e37fe98641e5a1c38da5f43737168", "author": {"user": {"login": "Spaceman1984", "name": null}}, "url": "https://github.com/apache/cloudstack/commit/d6cbdf3f989e37fe98641e5a1c38da5f43737168", "committedDate": "2020-04-02T08:36:15Z", "message": "Refactored restart into a method"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg2NDk0NDMx", "url": "https://github.com/apache/cloudstack/pull/4007#pullrequestreview-386494431", "createdAt": "2020-04-02T14:40:32Z", "commit": {"oid": "d6cbdf3f989e37fe98641e5a1c38da5f43737168"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg3MTc1NTAy", "url": "https://github.com/apache/cloudstack/pull/4007#pullrequestreview-387175502", "createdAt": "2020-04-03T11:32:18Z", "commit": {"oid": "d6cbdf3f989e37fe98641e5a1c38da5f43737168"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4169, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}