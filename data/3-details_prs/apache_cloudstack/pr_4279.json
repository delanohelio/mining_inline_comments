{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcxNzcxNDM4", "number": 4279, "title": "Avoid Null pointer at DomainChecker and enhance AssignVMCmd", "bodyText": "Description\n\nWhen executing request assignVirtualMachine with null domainID and a valid projectID then a NullPointerException happens at DomainChecker.java.\nCommand example:\nassign virtualmachine virtualmachineid=vmID projectid=projectID account=admin\n\nThe NullPointerException that is thrown at DomainChecker is handled at AssignVMCmd.java#L142, resulting in the following log message: Failed to move vm null.\nMy question is: does it make sense to assign VM to a project with domainID=null? If so, then the handling should be different. However, I think that it should not be null and therefore I added a proper log message.\nPrior to commit\nTypes of changes\n\n\n Breaking change (fix or feature that would cause existing functionality to change)\n New feature (non-breaking change which adds functionality)\n Bug fix (non-breaking change which fixes an issue)\n Enhancement (improves an existing feature and functionality)\n Cleanup (Code refactoring and cleanup, that may add test cases)\n\nHow Has This Been Tested?\nRequest of API command  assignVirtualMachine with project ID and null domainID.\nassign virtualmachine virtualmachineid=vmID projectid=projectID account=admin", "createdAt": "2020-08-21T18:05:58Z", "url": "https://github.com/apache/cloudstack/pull/4279", "merged": true, "mergeCommit": {"oid": "d5acabdbf7c2b49db3bc35f8434724b9a979843b"}, "closed": true, "closedAt": "2020-09-01T08:28:43Z", "author": {"login": "GabrielBrascher"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdA2A9_AH2gAyNDcxNzcxNDM4OmMyYmUzYzllNTcwMDA3N2I0Y2Y2ZWRlMDZiMzYxNDJiZGVhYzMzNzU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdCULVfAFqTQ3NDMyMjk2Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c2be3c9e5700077b4cf6ede06b36142bdeac3375", "author": {"user": {"login": "GabrielBrascher", "name": "Gabriel Beims Br\u00e4scher"}}, "url": "https://github.com/apache/cloudstack/commit/c2be3c9e5700077b4cf6ede06b36142bdeac3375", "committedDate": "2020-08-20T20:13:10Z", "message": "Avoid Null pointer at DomainChecker when assignVM has null domainID and not valid projectID"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a3973befb528aa61fc130cbe4a2652eacef0fa9a", "author": {"user": {"login": "GabrielBrascher", "name": "Gabriel Beims Br\u00e4scher"}}, "url": "https://github.com/apache/cloudstack/commit/a3973befb528aa61fc130cbe4a2652eacef0fa9a", "committedDate": "2020-08-21T20:23:04Z", "message": "handle null e.getMessage()"}, "afterCommit": {"oid": "cc8068c9fdca82edf365dd7919467fd0c22c6a37", "author": {"user": {"login": "GabrielBrascher", "name": "Gabriel Beims Br\u00e4scher"}}, "url": "https://github.com/apache/cloudstack/commit/cc8068c9fdca82edf365dd7919467fd0c22c6a37", "committedDate": "2020-08-21T20:25:00Z", "message": "handle null e.getMessage()"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f74dbdb078b4460997480d3630b7d27f4c8d6e3b", "author": {"user": {"login": "GabrielBrascher", "name": "Gabriel Beims Br\u00e4scher"}}, "url": "https://github.com/apache/cloudstack/commit/f74dbdb078b4460997480d3630b7d27f4c8d6e3b", "committedDate": "2020-08-21T20:26:59Z", "message": "handle null e.getMessage()"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cc8068c9fdca82edf365dd7919467fd0c22c6a37", "author": {"user": {"login": "GabrielBrascher", "name": "Gabriel Beims Br\u00e4scher"}}, "url": "https://github.com/apache/cloudstack/commit/cc8068c9fdca82edf365dd7919467fd0c22c6a37", "committedDate": "2020-08-21T20:25:00Z", "message": "handle null e.getMessage()"}, "afterCommit": {"oid": "f74dbdb078b4460997480d3630b7d27f4c8d6e3b", "author": {"user": {"login": "GabrielBrascher", "name": "Gabriel Beims Br\u00e4scher"}}, "url": "https://github.com/apache/cloudstack/commit/f74dbdb078b4460997480d3630b7d27f4c8d6e3b", "committedDate": "2020-08-21T20:26:59Z", "message": "handle null e.getMessage()"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyOTk5ODgz", "url": "https://github.com/apache/cloudstack/pull/4279#pullrequestreview-472999883", "createdAt": "2020-08-23T10:34:11Z", "commit": {"oid": "f74dbdb078b4460997480d3630b7d27f4c8d6e3b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yM1QxMDozNDoxMVrOHFMD-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yM1QxMDozNDoxMVrOHFMD-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTIwMjU1Mg==", "bodyText": "Can we log the stack trace?", "url": "https://github.com/apache/cloudstack/pull/4279#discussion_r475202552", "createdAt": "2020-08-23T10:34:11Z", "author": {"login": "rhtyd"}, "path": "api/src/main/java/org/apache/cloudstack/api/command/admin/vm/AssignVMCmd.java", "diffHunk": "@@ -139,7 +139,13 @@ public void execute() {\n             throw new ServerApiException(ApiErrorCode.INTERNAL_ERROR, e.getMessage());\n         } catch (Exception e) {\n             e.printStackTrace();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f74dbdb078b4460997480d3630b7d27f4c8d6e3b"}, "originalPosition": 3}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ca3546e6e660f73c03e86d15907614d4a84fc40", "author": {"user": {"login": "GabrielBrascher", "name": "Gabriel Beims Br\u00e4scher"}}, "url": "https://github.com/apache/cloudstack/commit/0ca3546e6e660f73c03e86d15907614d4a84fc40", "committedDate": "2020-08-24T02:21:55Z", "message": "Log exception stacktrace"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "29a65eb1d523be4bafaefed2d1296ccebdd48d08", "author": {"user": {"login": "GabrielBrascher", "name": "Gabriel Beims Br\u00e4scher"}}, "url": "https://github.com/apache/cloudstack/commit/29a65eb1d523be4bafaefed2d1296ccebdd48d08", "committedDate": "2020-08-23T13:21:41Z", "message": "Log exception stacktrace"}, "afterCommit": {"oid": "0ca3546e6e660f73c03e86d15907614d4a84fc40", "author": {"user": {"login": "GabrielBrascher", "name": "Gabriel Beims Br\u00e4scher"}}, "url": "https://github.com/apache/cloudstack/commit/0ca3546e6e660f73c03e86d15907614d4a84fc40", "committedDate": "2020-08-24T02:21:55Z", "message": "Log exception stacktrace"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0MTU3Njc0", "url": "https://github.com/apache/cloudstack/pull/4279#pullrequestreview-474157674", "createdAt": "2020-08-25T06:02:01Z", "commit": {"oid": "0ca3546e6e660f73c03e86d15907614d4a84fc40"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0MzIyMzU5", "url": "https://github.com/apache/cloudstack/pull/4279#pullrequestreview-474322359", "createdAt": "2020-08-25T09:54:47Z", "commit": {"oid": "0ca3546e6e660f73c03e86d15907614d4a84fc40"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0MzIyOTY2", "url": "https://github.com/apache/cloudstack/pull/4279#pullrequestreview-474322966", "createdAt": "2020-08-25T09:55:34Z", "commit": {"oid": "0ca3546e6e660f73c03e86d15907614d4a84fc40"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4075, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}