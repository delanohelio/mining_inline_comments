{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk2MTY5Mjc0", "number": 4004, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMVQwODoxMTowNlrODw7LTA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxOToyOToxM1rOD-uMZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyNjI3Nzg4OnYy", "diffSide": "RIGHT", "path": "plugins/hypervisors/xenserver/src/main/java/com/cloud/hypervisor/xenserver/resource/CitrixResourceBase.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMVQwODoxMTowNlrOGELY1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QwOTozNzowMlrOGHHGPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzAzNDA2OQ==", "bodyText": "maybe give the 3 a constant with descriptive name", "url": "https://github.com/apache/cloudstack/pull/4004#discussion_r407034069", "createdAt": "2020-04-11T08:11:06Z", "author": {"login": "DaanHoogland"}, "path": "plugins/hypervisors/xenserver/src/main/java/com/cloud/hypervisor/xenserver/resource/CitrixResourceBase.java", "diffHunk": "@@ -1156,7 +1156,7 @@ public VBD createVbd(final Connection conn, final DiskTO volume, final String vm\n         if (volume.getType() == Volume.Type.ISO) {\n             vbdr.mode = Types.VbdMode.RO;\n             vbdr.type = Types.VbdType.CD;\n-            vbdr.userdevice = \"3\";\n+            vbdr.userdevice = String.valueOf(3 + isoCount);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6833d8b1d0f91c78c509dccd063788c66e8b5dcc"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDEwOTUwMg==", "bodyText": "@DaanHoogland I have made the changes.", "url": "https://github.com/apache/cloudstack/pull/4004#discussion_r410109502", "createdAt": "2020-04-17T09:37:02Z", "author": {"login": "Spaceman1984"}, "path": "plugins/hypervisors/xenserver/src/main/java/com/cloud/hypervisor/xenserver/resource/CitrixResourceBase.java", "diffHunk": "@@ -1156,7 +1156,7 @@ public VBD createVbd(final Connection conn, final DiskTO volume, final String vm\n         if (volume.getType() == Volume.Type.ISO) {\n             vbdr.mode = Types.VbdMode.RO;\n             vbdr.type = Types.VbdType.CD;\n-            vbdr.userdevice = \"3\";\n+            vbdr.userdevice = String.valueOf(3 + isoCount);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzAzNDA2OQ=="}, "originalCommit": {"oid": "6833d8b1d0f91c78c509dccd063788c66e8b5dcc"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1NTkwNTY5OnYy", "diffSide": "RIGHT", "path": "plugins/hypervisors/xenserver/src/main/java/com/cloud/hypervisor/xenserver/resource/CitrixResourceBase.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNDoxNToyOFrOGIWsuQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQwODo0Mjo1NFrOGP3Zew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQxMzY4OQ==", "bodyText": "\u00bfcan you create a final (static) field for this?", "url": "https://github.com/apache/cloudstack/pull/4004#discussion_r411413689", "createdAt": "2020-04-20T14:15:28Z", "author": {"login": "DaanHoogland"}, "path": "plugins/hypervisors/xenserver/src/main/java/com/cloud/hypervisor/xenserver/resource/CitrixResourceBase.java", "diffHunk": "@@ -5542,7 +5544,7 @@ public boolean attachConfigDriveToMigratedVm(Connection conn, String vmName, Str\n             s_logger.debug(\"Attaching config drive iso device for the VM \" + vmName + \" In host \" + ipAddr);\n             Set<VM> vms = VM.getByNameLabel(conn, vmName);\n \n-            SR sr = getSRByNameLabel(conn, _configDriveSRName + ipAddr);\n+            SR sr = getSRByNameLabel(conn, vmName + \"-ISO\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c2773c82f85c9c0169eefa4c409c078ff7b4fcc"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTI4OTQ2Nw==", "bodyText": "Done", "url": "https://github.com/apache/cloudstack/pull/4004#discussion_r419289467", "createdAt": "2020-05-04T08:42:54Z", "author": {"login": "Spaceman1984"}, "path": "plugins/hypervisors/xenserver/src/main/java/com/cloud/hypervisor/xenserver/resource/CitrixResourceBase.java", "diffHunk": "@@ -5542,7 +5544,7 @@ public boolean attachConfigDriveToMigratedVm(Connection conn, String vmName, Str\n             s_logger.debug(\"Attaching config drive iso device for the VM \" + vmName + \" In host \" + ipAddr);\n             Set<VM> vms = VM.getByNameLabel(conn, vmName);\n \n-            SR sr = getSRByNameLabel(conn, _configDriveSRName + ipAddr);\n+            SR sr = getSRByNameLabel(conn, vmName + \"-ISO\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQxMzY4OQ=="}, "originalCommit": {"oid": "0c2773c82f85c9c0169eefa4c409c078ff7b4fcc"}, "originalPosition": 41}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3MDk1MTQzOnYy", "diffSide": "RIGHT", "path": "server/src/main/java/com/cloud/network/element/ConfigDriveNetworkElement.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxOToyOToxM1rOGY_54g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQwNzoyMzowM1rOGdlMdg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODg2NjAxOA==", "bodyText": "can you explain? I don't see it being used anywhere", "url": "https://github.com/apache/cloudstack/pull/4004#discussion_r428866018", "createdAt": "2020-05-21T19:29:13Z", "author": {"login": "DaanHoogland"}, "path": "server/src/main/java/com/cloud/network/element/ConfigDriveNetworkElement.java", "diffHunk": "@@ -478,7 +476,7 @@ private boolean deleteConfigDriveIso(final VirtualMachine vm) throws ResourceUna\n         return true;\n     }\n \n-    private void addConfigDriveDisk(final VirtualMachineProfile profile, final DataStore dataStore) throws ResourceUnavailableException {\n+    public static void addConfigDriveDisk(final VirtualMachineProfile profile, final DataStore dataStore) throws ResourceUnavailableException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cbbaad89991c667d58cfb3a8e46079d725146273"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTEzNjcxNA==", "bodyText": "@Spaceman1984 have you seen this question?", "url": "https://github.com/apache/cloudstack/pull/4004#discussion_r431136714", "createdAt": "2020-05-27T13:37:22Z", "author": {"login": "nvazquez"}, "path": "server/src/main/java/com/cloud/network/element/ConfigDriveNetworkElement.java", "diffHunk": "@@ -478,7 +476,7 @@ private boolean deleteConfigDriveIso(final VirtualMachine vm) throws ResourceUna\n         return true;\n     }\n \n-    private void addConfigDriveDisk(final VirtualMachineProfile profile, final DataStore dataStore) throws ResourceUnavailableException {\n+    public static void addConfigDriveDisk(final VirtualMachineProfile profile, final DataStore dataStore) throws ResourceUnavailableException {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODg2NjAxOA=="}, "originalCommit": {"oid": "cbbaad89991c667d58cfb3a8e46079d725146273"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzY3MTI4Ng==", "bodyText": "Must be a leftover artifact from long days of experimentation, will remove.", "url": "https://github.com/apache/cloudstack/pull/4004#discussion_r433671286", "createdAt": "2020-06-02T07:23:03Z", "author": {"login": "Spaceman1984"}, "path": "server/src/main/java/com/cloud/network/element/ConfigDriveNetworkElement.java", "diffHunk": "@@ -478,7 +476,7 @@ private boolean deleteConfigDriveIso(final VirtualMachine vm) throws ResourceUna\n         return true;\n     }\n \n-    private void addConfigDriveDisk(final VirtualMachineProfile profile, final DataStore dataStore) throws ResourceUnavailableException {\n+    public static void addConfigDriveDisk(final VirtualMachineProfile profile, final DataStore dataStore) throws ResourceUnavailableException {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODg2NjAxOA=="}, "originalCommit": {"oid": "cbbaad89991c667d58cfb3a8e46079d725146273"}, "originalPosition": 29}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3846, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}