{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEzNDE4MzE4", "number": 329, "title": "working towards more immutable Landscape object", "bodyText": "", "createdAt": "2020-10-31T11:39:27Z", "url": "https://github.com/dedica-team/nivio/pull/329", "merged": true, "mergeCommit": {"oid": "efecf486afcaaa5d52d502f23c8a5c9022395a10"}, "closed": true, "closedAt": "2021-02-07T18:40:33Z", "author": {"login": "mfbieber"}, "timelineItems": {"totalCount": 24, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdX5vOiAH2gAyNTEzNDE4MzE4OjZlOTdiMjZiMzUwNjBlY2VhYzEyMjViOGE5MDljYWRjZmNkYjhiMzc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABd33BiuAH2gAyNTEzNDE4MzE4OmQ4NjgzYTNkNDlhMTM5YTUzYjdiMWM1MzM0OGM0YjI0YzhlZjRlYzc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6e97b26b35060eceac1225b8a909cadcfcdb8b37", "author": {"user": {"login": "mfbieber", "name": "Michelle Fernandez Bieber"}}, "url": "https://github.com/dedica-team/nivio/commit/6e97b26b35060eceac1225b8a909cadcfcdb8b37", "committedDate": "2020-10-31T11:33:40Z", "message": "wip: working towards more immutable Landscape object"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxMTMzMzU4", "url": "https://github.com/dedica-team/nivio/pull/329#pullrequestreview-521133358", "createdAt": "2020-10-31T11:41:11Z", "commit": {"oid": "6e97b26b35060eceac1225b8a909cadcfcdb8b37"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMVQxMTo0MToxMlrOHrm6kA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMVQxMTo0MToxMlrOHrm6kA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTQ4ODQwMA==", "bodyText": "If we work towards immutable objects, the identifier must not be set from the outside. Did I understand the Test as it was before and do you think that it is meaningful now too?", "url": "https://github.com/dedica-team/nivio/pull/329#discussion_r515488400", "createdAt": "2020-10-31T11:41:12Z", "author": {"login": "mfbieber"}, "path": "src/test/java/de/bonndan/nivio/output/map/RenderCacheTest.java", "diffHunk": "@@ -43,41 +43,48 @@ public void setup() {\n \n     @Test\n     void toPNGCached() {\n-        Landscape landscape = getLandscape(\"test\");\n+        Landscape landscape = getLandscape(\"test\", \"testLandscape\");\n         String first = renderCache.getSVG(landscape, false);\n         String second = renderCache.getSVG(landscape, false);\n \n-        verify(stylesheetFactory, times(1)).getMapStylesheet(any(), any());\n+        verify(stylesheetFactory, times(1))\n+                .getMapStylesheet(any(), any());\n     }\n \n     @Test\n     void cachesBasedOnIdentifier() {\n-        Landscape one = getLandscape(\"test\");\n-        String first = renderCache.getSVG(getLandscape(\"test\"), false);\n-        Landscape two = getLandscape(\"test\");\n+        Landscape one = getLandscape(\"first\", \"one\");\n+        String first = renderCache.getSVG(\n+                getLandscape(\"first\", \"testLandscape\"),\n+                false\n+        );\n+        Landscape two = getLandscape(\"second\", \"two\");\n         two.setProcessLog(one.getLog()); //sync last update\n-        two.setIdentifier(\"second\");\n         String second = renderCache.getSVG(two, false);\n \n-        verify(stylesheetFactory, times(2)).getMapStylesheet(any(), any());\n+        verify(stylesheetFactory, times(2))\n+                .getMapStylesheet(any(), any());\n     }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6e97b26b35060eceac1225b8a909cadcfcdb8b37"}, "originalPosition": 32}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6751d903c58110c98d817e01fb2e30a2a00d1d72", "author": {"user": {"login": "mfbieber", "name": "Michelle Fernandez Bieber"}}, "url": "https://github.com/dedica-team/nivio/commit/6751d903c58110c98d817e01fb2e30a2a00d1d72", "committedDate": "2020-10-31T12:30:42Z", "message": "wip: removing setters for name, identifier and contact, and setting them through Landscape constructor"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxMTM2NTUz", "url": "https://github.com/dedica-team/nivio/pull/329#pullrequestreview-521136553", "createdAt": "2020-10-31T12:34:04Z", "commit": {"oid": "6751d903c58110c98d817e01fb2e30a2a00d1d72"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMVQxMjozNDowNFrOHrnLyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMVQxMjozNDowNFrOHrnLyg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTQ5MjgxMA==", "bodyText": "Is this meaningful?\nThis is for @RequestMapping(path = \"/landscape/{identifier}/services\", method = RequestMethod.POST), which I think triggers the indexing of a landscape provided by the POST body? Is this correct? Or are just Items added?", "url": "https://github.com/dedica-team/nivio/pull/329#discussion_r515492810", "createdAt": "2020-10-31T12:34:04Z", "author": {"login": "mfbieber"}, "path": "src/main/java/de/bonndan/nivio/api/ApiController.java", "diffHunk": "@@ -133,8 +133,7 @@ public ProcessLog indexLandscape(\n             @RequestHeader(name = \"format\") String format,\n             @RequestBody String body\n     ) {\n-        LandscapeDescription dto = new LandscapeDescription();\n-        dto.setIdentifier(identifier);\n+        LandscapeDescription dto = new LandscapeDescription(identifier, \"\", null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6751d903c58110c98d817e01fb2e30a2a00d1d72"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6fec7afa0174218a1094ec730d8b144df4604ce5", "author": {"user": null}, "url": "https://github.com/dedica-team/nivio/commit/6fec7afa0174218a1094ec730d8b144df4604ce5", "committedDate": "2020-11-29T14:04:41Z", "message": "Merge branch 'develop' into 212-immutable-objects\n\n# Conflicts:\n#\tsrc/main/java/de/bonndan/nivio/model/Landscape.java\n#\tsrc/test/java/de/bonndan/nivio/assessment/kpi/KPIFactoryTest.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a015ed605f6ce8df4e4dcda76ddaef933bed3ec", "author": {"user": null}, "url": "https://github.com/dedica-team/nivio/commit/2a015ed605f6ce8df4e4dcda76ddaef933bed3ec", "committedDate": "2020-11-29T14:14:20Z", "message": "adapted KPIFactoryTest after merge with develop"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4942058a21e787910e59b34a30f0fac30b2f6678", "author": {"user": null}, "url": "https://github.com/dedica-team/nivio/commit/4942058a21e787910e59b34a30f0fac30b2f6678", "committedDate": "2020-12-03T20:53:46Z", "message": "started adding @Nonnull and @Nullable annotations, added jacoco"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e645ca60f319cf5f52cd465a73a0eda42f3668d6", "author": {"user": null}, "url": "https://github.com/dedica-team/nivio/commit/e645ca60f319cf5f52cd465a73a0eda42f3668d6", "committedDate": "2020-12-03T22:08:37Z", "message": "trying to fix jacoco test report generation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0Njk1NDQ2", "url": "https://github.com/dedica-team/nivio/pull/329#pullrequestreview-544695446", "createdAt": "2020-12-04T06:51:33Z", "commit": {"oid": "4942058a21e787910e59b34a30f0fac30b2f6678"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQwNjo1MTozM1rOH_DNMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQwNjo1MTozM1rOH_DNMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTg3NDg2NQ==", "bodyText": "StringUtils.isEmpty also handles null. This is why I like it.", "url": "https://github.com/dedica-team/nivio/pull/329#discussion_r535874865", "createdAt": "2020-12-04T06:51:33Z", "author": {"login": "bonndan"}, "path": "src/main/java/de/bonndan/nivio/assessment/StatusValue.java", "diffHunk": "@@ -54,23 +63,26 @@\n     /**\n      * Creates a summary status value.\n      *\n-     * @param field composed field name\n-     * @param max   max/highest status value\n+     * @param fieldName composed field name\n+     * @param maxValue   max/highest status value\n      * @return summary\n      */\n-    public static StatusValue summary(@NonNull String field, @NonNull StatusValue max) {\n-\n-        if (StringUtils.isEmpty(field)) {\n-            throw new IllegalArgumentException(\"Status value has no field\");\n+    @NonNull\n+    public static StatusValue summary(@NonNull String fieldName, @NonNull StatusValue maxValue) {\n+        if (StringUtils.isEmpty(fieldName)) {\n+            throw new IllegalArgumentException(\"Status value has no field name.\");\n         }\n-        return new StatusValue(field, max.getStatus(), max.getMessage(), max.getField());\n+        if (StringUtils.isEmpty(maxValue)) {\n+            throw new IllegalArgumentException(\"Status value has no max status value.\");\n+        }\n+        return new StatusValue(fieldName, maxValue.getStatus(), maxValue.getMessage(), maxValue.getField());\n     }\n \n     public StatusValue(@NonNull String field, @Nullable Status status, @Nullable String message) {\n         if (StringUtils.isEmpty(field)) {\n             throw new IllegalArgumentException(\"Status value has no field\");\n         }\n-        this.field = field;\n+        this.field = Objects.requireNonNull(field);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4942058a21e787910e59b34a30f0fac30b2f6678"}, "originalPosition": 58}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "48a2756e36af70f89b0067c84ad10108e89c9e81", "author": {"user": null}, "url": "https://github.com/dedica-team/nivio/commit/48a2756e36af70f89b0067c84ad10108e89c9e81", "committedDate": "2020-12-19T11:05:40Z", "message": "removes unneeded Objects.requireNonNull() and initialized field in constructor of StatusValue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d2e23014fe33e4fe978bea1959219b17cf8de75c", "author": {"user": null}, "url": "https://github.com/dedica-team/nivio/commit/d2e23014fe33e4fe978bea1959219b17cf8de75c", "committedDate": "2020-12-19T13:07:09Z", "message": "Merge branch 'develop' into 212-immutable-objects\n\n# Conflicts:\n#\tsrc/test/java/de/bonndan/nivio/output/map/svg/SVGItemLabelTest.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1a4e23635b23e431fa4b91285e3745cf9352844b", "author": {"user": null}, "url": "https://github.com/dedica-team/nivio/commit/1a4e23635b23e431fa4b91285e3745cf9352844b", "committedDate": "2021-02-06T15:14:48Z", "message": "Merge branch 'develop' into 212-immutable-objects"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5673b79f0d73f63a391fb29cc7a6de3ebda25424", "author": {"user": null}, "url": "https://github.com/dedica-team/nivio/commit/5673b79f0d73f63a391fb29cc7a6de3ebda25424", "committedDate": "2021-02-06T19:45:01Z", "message": "landscape is more immutable (collections can still be modified in size)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "270e8d228f373f370657c4f6fefd5d5aa845ebff", "author": {"user": null}, "url": "https://github.com/dedica-team/nivio/commit/270e8d228f373f370657c4f6fefd5d5aa845ebff", "committedDate": "2021-02-07T07:29:29Z", "message": "landscape kpis are final"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "88d3523dc2781dd3f429f09aed1f9bb882095a84", "author": {"user": null}, "url": "https://github.com/dedica-team/nivio/commit/88d3523dc2781dd3f429f09aed1f9bb882095a84", "committedDate": "2021-02-07T07:55:37Z", "message": "refactored GroupFactory"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c7161109492695646f33b96e2e8bb11b78819aef", "author": {"user": null}, "url": "https://github.com/dedica-team/nivio/commit/c7161109492695646f33b96e2e8bb11b78819aef", "committedDate": "2021-02-07T09:05:30Z", "message": "immutable group"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "65ca14b6c3002a60f7e94536ab19a280f18e3cfc", "author": {"user": null}, "url": "https://github.com/dedica-team/nivio/commit/65ca14b6c3002a60f7e94536ab19a280f18e3cfc", "committedDate": "2021-02-07T09:11:31Z", "message": "cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "47383a03a3b82404d16c23748119c6386a9fe581", "author": {"user": null}, "url": "https://github.com/dedica-team/nivio/commit/47383a03a3b82404d16c23748119c6386a9fe581", "committedDate": "2021-02-07T13:15:45Z", "message": "immutable items"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d2cea03ad9b1f898afd8cfe871c55178978d4435", "author": {"user": null}, "url": "https://github.com/dedica-team/nivio/commit/d2cea03ad9b1f898afd8cfe871c55178978d4435", "committedDate": "2021-02-07T13:38:35Z", "message": "immutable relations"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dd48f4e61488d21e9ca34e1af7a9aec2320bd9d1", "author": {"user": null}, "url": "https://github.com/dedica-team/nivio/commit/dd48f4e61488d21e9ca34e1af7a9aec2320bd9d1", "committedDate": "2021-02-07T13:40:12Z", "message": "disabled tests which will be dropped in the future"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ca2a810c6a25e85c2052f0e1ff1aaa5f61533ece", "author": {"user": {"login": "mfbieber", "name": "Michelle Fernandez Bieber"}}, "url": "https://github.com/dedica-team/nivio/commit/ca2a810c6a25e85c2052f0e1ff1aaa5f61533ece", "committedDate": "2021-02-07T18:02:33Z", "message": "Merge branch 'develop' into 212-immutable-objects\n\n# Conflicts:\n#\tsrc/main/java/de/bonndan/nivio/api/ApiController.java\n#\tsrc/test/java/de/bonndan/nivio/input/LandscapeDescriptionFactoryTest.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "41d94e877c82cdd681fa95d6b9c8185cd8b8f1ed", "author": {"user": {"login": "mfbieber", "name": "Michelle Fernandez Bieber"}}, "url": "https://github.com/dedica-team/nivio/commit/41d94e877c82cdd681fa95d6b9c8185cd8b8f1ed", "committedDate": "2021-02-07T18:06:17Z", "message": "resolved conflicts after merge with develop"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "164a0ff96451afc7e7c9dde6a01f4c607199e18c", "author": {"user": {"login": "mfbieber", "name": "Michelle Fernandez Bieber"}}, "url": "https://github.com/dedica-team/nivio/commit/164a0ff96451afc7e7c9dde6a01f4c607199e18c", "committedDate": "2021-02-07T18:19:03Z", "message": "Merge branch 'develop' into 212-immutable-objects\n\n# Conflicts:\n#\tsrc/main/java/de/bonndan/nivio/input/GroupQueryProcessor.java\n#\tsrc/main/java/de/bonndan/nivio/input/ItemRelationProcessor.java\n#\tsrc/main/java/de/bonndan/nivio/input/dto/LandscapeDescription.java\n#\tsrc/main/java/de/bonndan/nivio/model/Group.java\n#\tsrc/main/java/de/bonndan/nivio/model/Item.java\n#\tsrc/main/java/de/bonndan/nivio/model/ItemFactory.java\n#\tsrc/main/java/de/bonndan/nivio/model/Landscape.java\n#\tsrc/test/java/de/bonndan/nivio/input/MagicLabelRelationProcessorTest.java\n#\tsrc/test/java/de/bonndan/nivio/search/SearchDocumentFactoryTest.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d8683a3d49a139a53b7b1c53348c4b24c8ef4ec7", "author": {"user": {"login": "mfbieber", "name": "Michelle Fernandez Bieber"}}, "url": "https://github.com/dedica-team/nivio/commit/d8683a3d49a139a53b7b1c53348c4b24c8ef4ec7", "committedDate": "2021-02-07T18:29:32Z", "message": "resolved conflicts after merge with develop"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1910, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}