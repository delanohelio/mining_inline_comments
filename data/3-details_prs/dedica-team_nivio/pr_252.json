{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgwODM0NTQ4", "number": 252, "title": "[#231] Add ArchUnit tests", "bodyText": "See https://github.com/TNG/ArchUnit\nDesired: Prototypical integration.\n\nadd a standard tests for Java\n\n Rule: Do not write to StdOut/StdErr\n\n\nadd a standard tests for Spring Boot\n\n Rule: Do not define Beans in Application class\n\n\n\nItemIndex: Use LOGGER.warn() instead of ex.printStackTrace()", "createdAt": "2020-09-06T17:29:04Z", "url": "https://github.com/dedica-team/nivio/pull/252", "merged": true, "mergeCommit": {"oid": "62ae51a48f89b9433264deb34db2f00584a793ef"}, "closed": true, "closedAt": "2020-10-13T09:09:06Z", "author": {"login": "BilligsterUser"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdGRwjaAH2gAyNDgwODM0NTQ4OjRhNzMzYmMwNGQxMWQ0NDFiNjUyN2Y3MzFmZTE0Mjc4ZDFjZTA1YzA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdSE0qkgFqTUwNzIyMjU1Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4a733bc04d11d441b6527f731fe14278d1ce05c0", "author": {"user": {"login": "BilligsterUser", "name": "Paul Kusmin"}}, "url": "https://github.com/dedica-team/nivio/commit/4a733bc04d11d441b6527f731fe14278d1ce05c0", "committedDate": "2020-09-06T17:22:12Z", "message": "[#231] Add do_not_access_STD_streams ArchUnit test\n\nItemIndex: Use LOGGER.warn() instead of ex.printStackTrace()"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzMTcxNTcx", "url": "https://github.com/dedica-team/nivio/pull/252#pullrequestreview-483171571", "createdAt": "2020-09-06T20:45:34Z", "commit": {"oid": "4a733bc04d11d441b6527f731fe14278d1ce05c0"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4NzgyODEy", "url": "https://github.com/dedica-team/nivio/pull/252#pullrequestreview-488782812", "createdAt": "2020-09-15T15:05:06Z", "commit": {"oid": "4a733bc04d11d441b6527f731fe14278d1ce05c0"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxNTowNTowNlrOHSGdLg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxNTowODo0OVrOHSGoJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODc0MjE5MA==", "bodyText": "\ud83d\udc4d", "url": "https://github.com/dedica-team/nivio/pull/252#discussion_r488742190", "createdAt": "2020-09-15T15:05:06Z", "author": {"login": "Matthimatiker"}, "path": "src/main/java/de/bonndan/nivio/model/ItemIndex.java", "diffHunk": "@@ -241,7 +245,7 @@ public int indexForSearch() {\n             ireader.close();\n             return facets.getAllDims(10);\n         } catch (IOException e) {\n-            e.printStackTrace();\n+            LOGGER.warn(\"Unable to get the facets for the given query error: \", e);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a733bc04d11d441b6527f731fe14278d1ce05c0"}, "originalPosition": 76}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODc0MzI5MQ==", "bodyText": "More readable \ud83d\udc4d", "url": "https://github.com/dedica-team/nivio/pull/252#discussion_r488743291", "createdAt": "2020-09-15T15:06:27Z", "author": {"login": "Matthimatiker"}, "path": "src/main/java/de/bonndan/nivio/model/ItemIndex.java", "diffHunk": "@@ -259,8 +263,8 @@ public int indexForSearch() {\n \n         List<Document> documents = new ArrayList<>();\n         // Iterate through the results:\n-        for (int i = 0; i < hits.length; i++) {\n-            Document hitDoc = isearcher.doc(hits[i].doc);\n+        for (ScoreDoc hit : hits) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a733bc04d11d441b6527f731fe14278d1ce05c0"}, "originalPosition": 86}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODc0NDk5Nw==", "bodyText": "You could move the classes into a test attribute, even a static one.\nUsually, the classes are used by many (if not all) ArchUnit tests and collecting the data from byte code is expensive.", "url": "https://github.com/dedica-team/nivio/pull/252#discussion_r488744997", "createdAt": "2020-09-15T15:08:49Z", "author": {"login": "Matthimatiker"}, "path": "src/test/java/de/bonndan/nivio/ArchTest.java", "diffHunk": "@@ -0,0 +1,22 @@\n+package de.bonndan.nivio;\n+\n+import com.tngtech.archunit.core.domain.JavaClasses;\n+import com.tngtech.archunit.core.importer.ClassFileImporter;\n+import com.tngtech.archunit.core.importer.ImportOption;\n+import org.junit.jupiter.api.Test;\n+\n+import static com.tngtech.archunit.library.GeneralCodingRules.NO_CLASSES_SHOULD_ACCESS_STANDARD_STREAMS;\n+\n+class ArchTest {\n+    @Test\n+    void do_not_access_STD_streams() {\n+        JavaClasses classes = new ClassFileImporter()\n+                .withImportOption(ImportOption.Predefined.DO_NOT_INCLUDE_JARS)\n+                .withImportOption(ImportOption.Predefined.DO_NOT_INCLUDE_TESTS)\n+                .importClasspath();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a733bc04d11d441b6527f731fe14278d1ce05c0"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "47f397cea8c1cae46972f49557c80ec0c2b3cfb0", "author": {"user": {"login": "mfbieber", "name": "Michelle Fernandez Bieber"}}, "url": "https://github.com/dedica-team/nivio/commit/47f397cea8c1cae46972f49557c80ec0c2b3cfb0", "committedDate": "2020-10-12T16:34:14Z", "message": "moved classes for archUnit to static class attribute"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "73aa45a56c0cb3508d3a7e3e46c990a4622f9b75", "author": {"user": {"login": "mfbieber", "name": "Michelle Fernandez Bieber"}}, "url": "https://github.com/dedica-team/nivio/commit/73aa45a56c0cb3508d3a7e3e46c990a4622f9b75", "committedDate": "2020-10-12T17:08:50Z", "message": "Merge remote-tracking branch 'origin/develop' into feature/231/arch-unit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "21864963ebb7340a8c9dcb25a6a0d56425b22ab5", "author": {"user": {"login": "mfbieber", "name": "Michelle Fernandez Bieber"}}, "url": "https://github.com/dedica-team/nivio/commit/21864963ebb7340a8c9dcb25a6a0d56425b22ab5", "committedDate": "2020-10-12T17:10:14Z", "message": "using specific jackson-databind dependency"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3MjIyNTUy", "url": "https://github.com/dedica-team/nivio/pull/252#pullrequestreview-507222552", "createdAt": "2020-10-13T09:05:01Z", "commit": {"oid": "21864963ebb7340a8c9dcb25a6a0d56425b22ab5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3028, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}