{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY4ODQ0NDA3", "number": 811, "title": "Resolvees #810: Improve loggings for OnlineIndexer and FDBDatabaseRunner", "bodyText": "Realized that calling_method (buildUnbuiltRange/buildEndpoints) is already logged. It also logs the start and the end of the range if it is buildUnbuiltRange.\nImproved logging to make the difference between retries in the runner and tries in indexer more clear.\nAdded loggings when a try/attempt in the indexer fails (We only logged runner failures before).\nI\u2019m thinking about generalizing the retry logic in both OnlineIndexer and FDBDatabaseRunner so the logs can be organized better. But Probably this should be a separate PR.", "createdAt": "2020-01-30T01:20:05Z", "url": "https://github.com/FoundationDB/fdb-record-layer/pull/811", "merged": true, "mergeCommit": {"oid": "5ddd3cddab52c4bb4b063266450625c1c49e57e6"}, "closed": true, "closedAt": "2020-01-30T20:28:48Z", "author": {"login": "nblintao"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb_QICUgH2gAyMzY4ODQ0NDA3OjBjNGFiZDZjMmIzNjgzMTFlMDY3YmI4MTJiZGJmMDQwMjA1M2QyNWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb_fPH4AFqTM1MTA2MjM4Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0c4abd6c2b368311e067bb812bdbf0402053d25d", "author": {"user": {"login": "nblintao", "name": "Tao Lin"}}, "url": "https://github.com/FoundationDB/fdb-record-layer/commit/0c4abd6c2b368311e067bb812bdbf0402053d25d", "committedDate": "2020-01-30T01:19:25Z", "message": "Resolvees #810: Improve loggings for OnlineIndexer and FDBDatabaseRunner"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxMDU0OTA0", "url": "https://github.com/FoundationDB/fdb-record-layer/pull/811#pullrequestreview-351054904", "createdAt": "2020-01-30T18:44:06Z", "commit": {"oid": "0c4abd6c2b368311e067bb812bdbf0402053d25d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMFQxODo0NDowNlrOFj1xQQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMFQxODo0NDowNlrOFj1xQQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzEyNTQ0MQ==", "bodyText": "Was it purposeful to continue using \"retry\" here instead of CURR_ATTEMPT and MAX_ATTEMPTS (to standardize with the Runner)?", "url": "https://github.com/FoundationDB/fdb-record-layer/pull/811#discussion_r373125441", "createdAt": "2020-01-30T18:44:06Z", "author": {"login": "alecgrieser"}, "path": "fdb-record-layer-core/src/main/java/com/apple/foundationdb/record/logging/LogMessageKeys.java", "diffHunk": "@@ -134,12 +134,15 @@\n     DOCUMENT(\"document\"),\n     SESSION_ID(\"session_id\"),\n     INDEXER_SESSION_ID(\"indexer_session_id\"),\n+    INDEXER_ID(\"indexer_id\"),\n     INDEX_STATE_PRECONDITION(\"index_state_precondition\"),\n     INITIAL_INDEX_STATE(\"initial_index_state\"),\n     SHOULD_BUILD_INDEX(\"do_build_index\"),\n     SHOULD_CLEAR_EXISTING_DATA(\"clear_existing_data\"),\n     SHOULD_MARK_READABLE(\"should_mark_readable\"),\n     RESULT(\"result\"),\n+    INDEXER_CURR_RETRY(\"indexer_curr_retry\"),\n+    INDEXER_MAX_RETRIES(\"indexer_max_retries\"),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c4abd6c2b368311e067bb812bdbf0402053d25d"}, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxMDYyMzg2", "url": "https://github.com/FoundationDB/fdb-record-layer/pull/811#pullrequestreview-351062386", "createdAt": "2020-01-30T18:55:44Z", "commit": {"oid": "0c4abd6c2b368311e067bb812bdbf0402053d25d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2752, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}