{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY0NTM1MzA3", "number": 803, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxNTowNDo0NlrODflHug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxNTowNDo0NlrODflHug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0NDQwNjM0OnYy", "diffSide": "RIGHT", "path": "fdb-record-layer-core/src/main/java/com/apple/foundationdb/record/provider/foundationdb/FDBStoreTimer.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxNTowNDo0NlrOFpXRKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQxODowMDoyOVrOFp-_LA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODkxNzE2MQ==", "bodyText": "The aggregated time value for some of these will double count things that run in parallel or nested within one another. I'm not sure how easy it is to avoid being thrown off by that.", "url": "https://github.com/FoundationDB/fdb-record-layer/pull/803#discussion_r378917161", "createdAt": "2020-02-13T15:04:46Z", "author": {"login": "MMcM"}, "path": "fdb-record-layer-core/src/main/java/com/apple/foundationdb/record/provider/foundationdb/FDBStoreTimer.java", "diffHunk": "@@ -224,6 +238,76 @@ public String logKey() {\n         }\n     }\n \n+    /**\n+     * An aggregate over other count events.\n+     */\n+    public enum EventAggregates implements Aggregate, Event {\n+        COMMITS(\"commits\",\n+                Events.COMMIT,\n+                Events.COMMIT_FAILURE),\n+        READS(\"reads\",\n+                Events.LOAD_META_DATA,\n+                Events.LOAD_RECORD_STORE_STATE,\n+                Events.LOAD_RECORD_STORE_INFO,\n+                Events.LOAD_RECORD_STORE_INDEX_META_DATA,\n+                Events.LOAD_RECORD,\n+                Events.SCAN_RECORDS,\n+                Events.SCAN_INDEX_KEYS,\n+                Events.DIRECTORY_READ,\n+                Events.SCOPED_DIRECTORY_LAYER_READ,\n+                Events.EXTENDED_DIRECTORY_LAYER_READ,\n+                Events.INTERNING_LAYER_READ,\n+                Events.LOAD_BOUNDARY_KEYS,\n+                Events.READ_SAMPLE_KEY),\n+        WRITES(\"writes\",\n+                Events.SAVE_META_DATA,\n+                Events.LOAD_RECORD_STORE_INFO,\n+                Events.SAVE_RECORD,\n+                Events.SAVE_INDEX_ENTRY,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9599fe40d36528bc622e55ea5ba7ecaed5506daf"}, "originalPosition": 80}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODk2NDkzMA==", "bodyText": "I have removed the READ/WRITE/DELETE aggregates since, I agree, they can be confusing.", "url": "https://github.com/FoundationDB/fdb-record-layer/pull/803#discussion_r378964930", "createdAt": "2020-02-13T16:16:42Z", "author": {"login": "scgray"}, "path": "fdb-record-layer-core/src/main/java/com/apple/foundationdb/record/provider/foundationdb/FDBStoreTimer.java", "diffHunk": "@@ -224,6 +238,76 @@ public String logKey() {\n         }\n     }\n \n+    /**\n+     * An aggregate over other count events.\n+     */\n+    public enum EventAggregates implements Aggregate, Event {\n+        COMMITS(\"commits\",\n+                Events.COMMIT,\n+                Events.COMMIT_FAILURE),\n+        READS(\"reads\",\n+                Events.LOAD_META_DATA,\n+                Events.LOAD_RECORD_STORE_STATE,\n+                Events.LOAD_RECORD_STORE_INFO,\n+                Events.LOAD_RECORD_STORE_INDEX_META_DATA,\n+                Events.LOAD_RECORD,\n+                Events.SCAN_RECORDS,\n+                Events.SCAN_INDEX_KEYS,\n+                Events.DIRECTORY_READ,\n+                Events.SCOPED_DIRECTORY_LAYER_READ,\n+                Events.EXTENDED_DIRECTORY_LAYER_READ,\n+                Events.INTERNING_LAYER_READ,\n+                Events.LOAD_BOUNDARY_KEYS,\n+                Events.READ_SAMPLE_KEY),\n+        WRITES(\"writes\",\n+                Events.SAVE_META_DATA,\n+                Events.LOAD_RECORD_STORE_INFO,\n+                Events.SAVE_RECORD,\n+                Events.SAVE_INDEX_ENTRY,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODkxNzE2MQ=="}, "originalCommit": {"oid": "9599fe40d36528bc622e55ea5ba7ecaed5506daf"}, "originalPosition": 80}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTU2NzkxNg==", "bodyText": "Yeah, that may be simplest.", "url": "https://github.com/FoundationDB/fdb-record-layer/pull/803#discussion_r379567916", "createdAt": "2020-02-14T18:00:29Z", "author": {"login": "MMcM"}, "path": "fdb-record-layer-core/src/main/java/com/apple/foundationdb/record/provider/foundationdb/FDBStoreTimer.java", "diffHunk": "@@ -224,6 +238,76 @@ public String logKey() {\n         }\n     }\n \n+    /**\n+     * An aggregate over other count events.\n+     */\n+    public enum EventAggregates implements Aggregate, Event {\n+        COMMITS(\"commits\",\n+                Events.COMMIT,\n+                Events.COMMIT_FAILURE),\n+        READS(\"reads\",\n+                Events.LOAD_META_DATA,\n+                Events.LOAD_RECORD_STORE_STATE,\n+                Events.LOAD_RECORD_STORE_INFO,\n+                Events.LOAD_RECORD_STORE_INDEX_META_DATA,\n+                Events.LOAD_RECORD,\n+                Events.SCAN_RECORDS,\n+                Events.SCAN_INDEX_KEYS,\n+                Events.DIRECTORY_READ,\n+                Events.SCOPED_DIRECTORY_LAYER_READ,\n+                Events.EXTENDED_DIRECTORY_LAYER_READ,\n+                Events.INTERNING_LAYER_READ,\n+                Events.LOAD_BOUNDARY_KEYS,\n+                Events.READ_SAMPLE_KEY),\n+        WRITES(\"writes\",\n+                Events.SAVE_META_DATA,\n+                Events.LOAD_RECORD_STORE_INFO,\n+                Events.SAVE_RECORD,\n+                Events.SAVE_INDEX_ENTRY,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODkxNzE2MQ=="}, "originalCommit": {"oid": "9599fe40d36528bc622e55ea5ba7ecaed5506daf"}, "originalPosition": 80}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 61, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}