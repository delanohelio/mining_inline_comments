{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY2MjUzNTg5", "number": 4390, "title": "CSW / Configuration of the capabilities is now done using a service metadata record", "bodyText": "Main goal here is to :\n\ngive possibility to user to configure in more details the GetCapabilities document.\nmake a valid INSPIRE CSW service\nsimplify the config which was dispatched in user properties, settings table, csw capabilities info + 2 templates XML files.\n\nThis will encourage users to make a service metadata record describing the CSW endpoint (which is a good practice and is mandatory from an INSPIRE point of view).\nDocumentation: https://github.com/geonetwork/doc/blob/5b3743117d74856f4a8f7ab2b4f39048603b4a13/source/administrator-guide/configuring-the-catalog/csw-configuration.rst\n\nIf CSW is disabled, hide related options\n\n\n\nIf a custom capabilities has to be created, point to a service metadata record\n\n\n\nIf the config use a private record or there is an error while building the capabilities document, a WARNING is reported using a comment and the default capabilities is used\n\n\n\nAdd the possibility to customize a portal CSW", "createdAt": "2020-01-23T09:06:22Z", "url": "https://github.com/geonetwork/core-geonetwork/pull/4390", "merged": true, "mergeCommit": {"oid": "62590c35b481916e39d81deea527ef9e94bd9f0e"}, "closed": true, "closedAt": "2020-01-28T16:26:17Z", "author": {"login": "fxprunayre"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb9GmjZgH2gAyMzY2MjUzNTg5OjY4YjgyOGQ0ZGIzYWQxNGEwOGM5NjliMDcyMjQ0ZmQyYjcyMDMwYzk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb-yb82gFqTM0OTQyODQ1Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "68b828d4db3ad14a08c969b072244fd2b72030c9", "author": {"user": {"login": "fxprunayre", "name": "Fran\u00e7ois Prunayre"}}, "url": "https://github.com/geonetwork/core-geonetwork/commit/68b828d4db3ad14a08c969b072244fd2b72030c9", "committedDate": "2020-01-23T09:05:51Z", "message": "CSW / Configuration of the capabilities is now done using a service metadata record."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "016dcfa23962f64975f655e06f7d1f2cb32a19a8", "author": {"user": {"login": "fxprunayre", "name": "Fran\u00e7ois Prunayre"}}, "url": "https://github.com/geonetwork/core-geonetwork/commit/016dcfa23962f64975f655e06f7d1f2cb32a19a8", "committedDate": "2020-01-23T10:56:25Z", "message": "CSW / Configuration of the capabilities is now done using a service metadata record."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c5e6cbea694f7210a5fc75daf701bfc720a2e206", "author": {"user": {"login": "fxprunayre", "name": "Fran\u00e7ois Prunayre"}}, "url": "https://github.com/geonetwork/core-geonetwork/commit/c5e6cbea694f7210a5fc75daf701bfc720a2e206", "committedDate": "2020-01-24T13:43:24Z", "message": "CSW / Configuration of the capabilities is now done using a service metadata record / Add warning in case of error. Language config is made in the record, not from the db."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed9a960acb84cf480c76dc94ba523844acba4509", "author": {"user": {"login": "fxprunayre", "name": "Fran\u00e7ois Prunayre"}}, "url": "https://github.com/geonetwork/core-geonetwork/commit/ed9a960acb84cf480c76dc94ba523844acba4509", "committedDate": "2020-01-24T19:08:56Z", "message": "CSW / Configuration of the capabilities is now done using a service metadata record / Add warning in case of error. Multilingual support."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c4e7c78d3b8f9b6eff88a9ace51a52c3722bd688", "author": {"user": {"login": "fxprunayre", "name": "Fran\u00e7ois Prunayre"}}, "url": "https://github.com/geonetwork/core-geonetwork/commit/c4e7c78d3b8f9b6eff88a9ace51a52c3722bd688", "committedDate": "2020-01-27T14:54:25Z", "message": "CSW / Configuration of the capabilities is now done using a service metadata record / Add warning in case of error. ISO19139 support and language."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9bc2afa0d5818eaba241e14ba5054112f9bb4dc7", "author": {"user": {"login": "fxprunayre", "name": "Fran\u00e7ois Prunayre"}}, "url": "https://github.com/geonetwork/core-geonetwork/commit/9bc2afa0d5818eaba241e14ba5054112f9bb4dc7", "committedDate": "2020-01-27T15:32:34Z", "message": "CSW / Configuration of the capabilities is now done using a service metadata record / Add warning in case of error. Displaye service title."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "631fe50a9ee60cfafd2be096f493260e12c558e3", "author": {"user": {"login": "fxprunayre", "name": "Fran\u00e7ois Prunayre"}}, "url": "https://github.com/geonetwork/core-geonetwork/commit/631fe50a9ee60cfafd2be096f493260e12c558e3", "committedDate": "2020-01-27T15:58:28Z", "message": "Cleaning."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2be3c1336abdc3c42871dc9a0c44015d42350871", "author": {"user": {"login": "fxprunayre", "name": "Fran\u00e7ois Prunayre"}}, "url": "https://github.com/geonetwork/core-geonetwork/commit/2be3c1336abdc3c42871dc9a0c44015d42350871", "committedDate": "2020-01-27T16:24:25Z", "message": "CSW / Configuration of the capabilities is now done using a service metadata record / Add warning in case of error. Portal CSW."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5MTQ5MTUy", "url": "https://github.com/geonetwork/core-geonetwork/pull/4390#pullrequestreview-349149152", "createdAt": "2020-01-28T06:19:48Z", "commit": {"oid": "2be3c1336abdc3c42871dc9a0c44015d42350871"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQwNjoxOTo0OVrOFiaOOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQwNjoyNzo1N1rOFiaUzA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTYyNTUyOA==", "bodyText": "Could not be better to use the metadata uuid? Should be more stable than internal ids.\nSuppose that the user uses the import option to update the metadata, this option afaik removes the old record and creates a new one with a new id.", "url": "https://github.com/geonetwork/core-geonetwork/pull/4390#discussion_r371625528", "createdAt": "2020-01-28T06:19:49Z", "author": {"login": "josegar74"}, "path": "core/src/main/java/org/fao/geonet/kernel/setting/Settings.java", "diffHunk": "@@ -82,7 +82,7 @@\n     public static final String SYSTEM_SELECTIONMANAGER_MAXRECORDS = \"system/selectionmanager/maxrecords\";\n     public static final String SYSTEM_CSW_ENABLE = \"system/csw/enable\";\n     public static final String SYSTEM_CSW_ENABLEWHENINDEXING = \"system/csw/enabledWhenIndexing\";\n-    public static final String SYSTEM_CSW_CONTACT_ID = \"system/csw/contactId\";\n+    public static final String SYSTEM_CSW_CAPABILITY_RECORD_ID = \"system/csw/capabilityRecordId\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2be3c1336abdc3c42871dc9a0c44015d42350871"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTYyNzE2NA==", "bodyText": "I see this file is used if no record is selected, what looks good. Maybe can be relevant in the iso19139 samples to provide an example of a CSW service record and another for CSW INSPIRE service record, to facilitate the task for users.", "url": "https://github.com/geonetwork/core-geonetwork/pull/4390#discussion_r371627164", "createdAt": "2020-01-28T06:27:43Z", "author": {"login": "josegar74"}, "path": "web/src/main/webapp/xml/csw/capabilities.xml", "diffHunk": "@@ -8,37 +8,37 @@\n \n   <ows:ServiceIdentification>\n     <ows:Title>$TITLE</ows:Title>\n-    <ows:Abstract>$ABSTRACT</ows:Abstract>\n+    <ows:Abstract></ows:Abstract>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2be3c1336abdc3c42871dc9a0c44015d42350871"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTYyNzIxMg==", "bodyText": "Should be dropped the table and removed the related domain/persistence objects?", "url": "https://github.com/geonetwork/core-geonetwork/pull/4390#discussion_r371627212", "createdAt": "2020-01-28T06:27:57Z", "author": {"login": "josegar74"}, "path": "web/src/main/webapp/WEB-INF/classes/setup/sql/migrate/v3101/migrate-default.sql", "diffHunk": "@@ -1,2 +1,6 @@\n+DELETE FROM cswservercapabilitiesinfo;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2be3c1336abdc3c42871dc9a0c44015d42350871"}, "originalPosition": 1}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77ddf71a77bdf3d063303bf1ce62b7e51d4a51a2", "author": {"user": {"login": "fxprunayre", "name": "Fran\u00e7ois Prunayre"}}, "url": "https://github.com/geonetwork/core-geonetwork/commit/77ddf71a77bdf3d063303bf1ce62b7e51d4a51a2", "committedDate": "2020-01-28T07:49:24Z", "message": "Replace id by uuid."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5NDI4NDU2", "url": "https://github.com/geonetwork/core-geonetwork/pull/4390#pullrequestreview-349428456", "createdAt": "2020-01-28T14:44:01Z", "commit": {"oid": "77ddf71a77bdf3d063303bf1ce62b7e51d4a51a2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1687, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}