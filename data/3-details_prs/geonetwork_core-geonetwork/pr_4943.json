{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY5Nzc3MTky", "number": 4943, "title": "Allow GeoNetwork datadir from tomcat context Parameter", "bodyText": "If you put this in your geonetwork.xml (tomcat context file - TOMCATHOME/conf/Catalina/localhost/geonetwork.xml)\n<Parameter name=\"geonetwork.dir\" value=\"C:\\ProgramData\\GeoNetwork\\Data\" type=\"java.lang.String\" override=\"false\"/>\nIt is now read and used to configure the data directory.  Before it was just getting null (and using the default).\nThis shouldn't cause any backwards compatibility...", "createdAt": "2020-08-18T22:25:13Z", "url": "https://github.com/geonetwork/core-geonetwork/pull/4943", "merged": true, "mergeCommit": {"oid": "bc802ff209e4c12afc36479804bba7d28ac711bb"}, "closed": true, "closedAt": "2020-08-20T06:00:10Z", "author": {"login": "davidblasby"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdAOqlOgH2gAyNDY5Nzc3MTkyOjQ3ZjA2YzcwZTBiNjRiZjZkMTE4NGZhNGU0MjBlY2JjYTRiOWVkY2E=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdApz3wAFqTQ3MTI2Nzk1Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "47f06c70e0b64bf6d1184fa4e420ecbca4b9edca", "author": {"user": null}, "url": "https://github.com/geonetwork/core-geonetwork/commit/47f06c70e0b64bf6d1184fa4e420ecbca4b9edca", "committedDate": "2020-08-18T22:22:25Z", "message": "allow geoserver datadir from tomcat context Parameter"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY5ODc3NjY3", "url": "https://github.com/geonetwork/core-geonetwork/pull/4943#pullrequestreview-469877667", "createdAt": "2020-08-18T22:38:48Z", "commit": {"oid": "47f06c70e0b64bf6d1184fa4e420ecbca4b9edca"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQyMjozODo0OVrOHCpFKA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQyMjozODo0OVrOHCpFKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjUzMjI2NA==", "bodyText": "If you look at line 162  it is suggesting that jeevesServlet could be null.\nif (jeevesServlet != null) {\nSo maybe this should be\nif ( value == null && jeevesServlet != null && jeevesServlet.getServletContext() != null ){\notherwise there could be a nullpointer error if jeevesServlet is null", "url": "https://github.com/geonetwork/core-geonetwork/pull/4943#discussion_r472532264", "createdAt": "2020-08-18T22:38:49Z", "author": {"login": "ianwallen"}, "path": "core/src/main/java/org/fao/geonet/kernel/GeonetworkDataDirectory.java", "diffHunk": "@@ -162,6 +162,9 @@ private Path lookupProperty(JeevesServlet jeevesServlet, ServiceConfig handlerCo\n                     if (jeevesServlet != null) {\n                         value = jeevesServlet.getInitParameter(keyToUse);\n                     }\n+                    if ( (value == null) && (jeevesServlet.getServletContext() != null) ){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "47f06c70e0b64bf6d1184fa4e420ecbca4b9edca"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c52b10fe2b14c9a4f46fb2cff890a384434fe03f", "author": {"user": null}, "url": "https://github.com/geonetwork/core-geonetwork/commit/c52b10fe2b14c9a4f46fb2cff890a384434fe03f", "committedDate": "2020-08-18T23:03:56Z", "message": "null check"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcwMTU4NjUz", "url": "https://github.com/geonetwork/core-geonetwork/pull/4943#pullrequestreview-470158653", "createdAt": "2020-08-19T06:28:38Z", "commit": {"oid": "c52b10fe2b14c9a4f46fb2cff890a384434fe03f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQwNjoyODozOFrOHC2usw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQwNjoyODozOFrOHC2usw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mjc1NTg5MQ==", "bodyText": "Just small refactor, to move the code inside the if from line 162, as already checks the conditionjeevesServlet != null:\nif (jeevesServlet != null) {\n  value = jeevesServlet.getInitParameter(keyToUse);\n  if ( (value == null) && (jeevesServlet.getServletContext() != null) ) {\n    ...\n  }\n}", "url": "https://github.com/geonetwork/core-geonetwork/pull/4943#discussion_r472755891", "createdAt": "2020-08-19T06:28:38Z", "author": {"login": "josegar74"}, "path": "core/src/main/java/org/fao/geonet/kernel/GeonetworkDataDirectory.java", "diffHunk": "@@ -162,6 +162,9 @@ private Path lookupProperty(JeevesServlet jeevesServlet, ServiceConfig handlerCo\n                     if (jeevesServlet != null) {\n                         value = jeevesServlet.getInitParameter(keyToUse);\n                     }\n+                    if ( (value == null) && (jeevesServlet != null) && (jeevesServlet.getServletContext() != null) ){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c52b10fe2b14c9a4f46fb2cff890a384434fe03f"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "75bfe1fbd19b688d9ed1e7b0b1321f04929432f0", "author": {"user": null}, "url": "https://github.com/geonetwork/core-geonetwork/commit/75bfe1fbd19b688d9ed1e7b0b1321f04929432f0", "committedDate": "2020-08-19T19:58:04Z", "message": "move if inside if"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxMjY3OTUz", "url": "https://github.com/geonetwork/core-geonetwork/pull/4943#pullrequestreview-471267953", "createdAt": "2020-08-20T06:00:00Z", "commit": {"oid": "75bfe1fbd19b688d9ed1e7b0b1321f04929432f0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1788, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}