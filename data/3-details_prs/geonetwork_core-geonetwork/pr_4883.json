{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU3NTc3NTY3", "number": 4883, "title": "UserSearch / 255 char is too small for URLs", "bodyText": "", "createdAt": "2020-07-28T06:03:27Z", "url": "https://github.com/geonetwork/core-geonetwork/pull/4883", "merged": true, "mergeCommit": {"oid": "f45a121bfdcd570fcd1f04b83e994417d0b52a84"}, "closed": true, "closedAt": "2020-09-04T11:32:36Z", "author": {"login": "fxprunayre"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc5QEiQAH2gAyNDU3NTc3NTY3OjE4MTE1ZGQzMjU3MWU3OGIxODg2ODQ4MjNkMTJhYmEyNmE5ZmRjZWI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdFjF2-AH2gAyNDU3NTc3NTY3OjQxMGVhMmFmZTc4ZDgyMWVmNDRiZWQ4MGViYzJiYTc4NmY5ZGEzOWQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "18115dd32571e78b188684823d12aba26a9fdceb", "author": {"user": {"login": "fxprunayre", "name": "Fran\u00e7ois Prunayre"}}, "url": "https://github.com/geonetwork/core-geonetwork/commit/18115dd32571e78b188684823d12aba26a9fdceb", "committedDate": "2020-07-28T06:03:12Z", "message": "UserSearch / 255 char is too small for URLs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a0bc0f1c28eeebf14c6614ff610fecaf123842ab", "author": {"user": {"login": "fxprunayre", "name": "Fran\u00e7ois Prunayre"}}, "url": "https://github.com/geonetwork/core-geonetwork/commit/a0bc0f1c28eeebf14c6614ff610fecaf123842ab", "committedDate": "2020-08-14T14:15:28Z", "message": "UserSearch / 255 char is too small for URLs / SQL migration."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c91058c189b3c803d1c92992ec1d5c9a59de14bd", "author": {"user": {"login": "fxprunayre", "name": "Fran\u00e7ois Prunayre"}}, "url": "https://github.com/geonetwork/core-geonetwork/commit/c91058c189b3c803d1c92992ec1d5c9a59de14bd", "committedDate": "2020-08-14T14:21:26Z", "message": "UserSearch / 255 char is too small for URLs / SQL migration - keep DROP index at the end."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY3NjIzODUz", "url": "https://github.com/geonetwork/core-geonetwork/pull/4883#pullrequestreview-467623853", "createdAt": "2020-08-14T14:33:09Z", "commit": {"oid": "c91058c189b3c803d1c92992ec1d5c9a59de14bd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xNFQxNDozMzowOVrOHA22NQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xNFQxNDozMzowOVrOHA22NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDY2MDY2MQ==", "bodyText": "According to the following\nhttps://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:1770086700346491686\nIt looks like it would be multiple commands for oracle and they would be the following.\nALTER TABLE usersearch ADD ( temp clob );\nALTER TABLE usersearch SET temp=url , url =null;\nALTER TABLE usersearch DROP column url ;\nALTER TABLE usersearch RENAME COLUMN temp to url ;", "url": "https://github.com/geonetwork/core-geonetwork/pull/4883#discussion_r470660661", "createdAt": "2020-08-14T14:33:09Z", "author": {"login": "ianwallen"}, "path": "web/src/main/webapp/WEB-INF/classes/setup/sql/migrate/v3110/migrate-oracle.sql", "diffHunk": "@@ -11,3 +11,5 @@ ALTER TABLE Validation ALTER COLUMN valType TYPE varchar(128);\n \n -- New setting for server timezone\n INSERT INTO Settings (name, value, datatype, position, internal) VALUES ('system/server/timeZone', '', 0, 260, 'n');\n+\n+ALTER TABLE usersearch ALTER COLUMN url TYPE text;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c91058c189b3c803d1c92992ec1d5c9a59de14bd"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4bf02210d4d43b3092b8762231a55fc1bc5163d8", "author": {"user": {"login": "fxprunayre", "name": "Fran\u00e7ois Prunayre"}}, "url": "https://github.com/geonetwork/core-geonetwork/commit/4bf02210d4d43b3092b8762231a55fc1bc5163d8", "committedDate": "2020-08-17T05:44:03Z", "message": "UserSearch / 255 char is too small for URLs / SQL migration - Thanks @ianwallen for Oracle hint."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bd051dbfac09e64f82f6b84416dab267985365b8", "author": {"user": {"login": "fxprunayre", "name": "Fran\u00e7ois Prunayre"}}, "url": "https://github.com/geonetwork/core-geonetwork/commit/bd051dbfac09e64f82f6b84416dab267985365b8", "committedDate": "2020-08-18T07:56:03Z", "message": "UserSearch / 255 char is too small for URLs / SQL migration."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY5MjA3NDcy", "url": "https://github.com/geonetwork/core-geonetwork/pull/4883#pullrequestreview-469207472", "createdAt": "2020-08-18T10:48:27Z", "commit": {"oid": "bd051dbfac09e64f82f6b84416dab267985365b8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "410ea2afe78d821ef44bed80ebc2ba786f9da39d", "author": {"user": {"login": "fxprunayre", "name": "Fran\u00e7ois Prunayre"}}, "url": "https://github.com/geonetwork/core-geonetwork/commit/410ea2afe78d821ef44bed80ebc2ba786f9da39d", "committedDate": "2020-09-04T10:59:56Z", "message": "Merge branch 'master' into fxprunayre-patch-5"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1609, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}