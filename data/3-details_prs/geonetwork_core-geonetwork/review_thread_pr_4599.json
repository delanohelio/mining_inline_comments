{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAyNzUzOTUx", "number": 4599, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxNDoxMDo1OVrODxqgSg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxNDoxNToyMVrODxqoDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUzNDAzMjEwOnYy", "diffSide": "RIGHT", "path": "web/src/main/webResources/WEB-INF/config-db/jndi.xml", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxNDoxMDo1OVrOGFQj6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQwODoxODoxMVrOGFu0_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE2NzQwMw==", "bodyText": "why are we setting this to public?\ncan't we take this value from the jndi configuration?", "url": "https://github.com/geonetwork/core-geonetwork/pull/4599#discussion_r408167403", "createdAt": "2020-04-14T14:10:59Z", "author": {"login": "pvgenuchten"}, "path": "web/src/main/webResources/WEB-INF/config-db/jndi.xml", "diffHunk": "@@ -62,14 +52,12 @@\n         <entry key=\"Data Source\" value-ref=\"jdbcDataSource\"/>\n         <entry key=\"Loose bbox\" value=\"true\"/>\n         <entry key=\"Estimated extends\" value=\"true\"/>\n-        <entry key=\"schema\" value=\"${database.schema}\" />\n+        <entry key=\"schema\" value=\"public\" />", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f10153223a5d56e0dc5bbb85ccc755587a1c4269"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE5MDgwNw==", "bodyText": "I guess we can add as build property, but the previous one used database.schema was not really defined anywhere, so was not working.\nI don't think can be moved to the container JNDI configuration, as this bean seem required by Geotools also. I'm not an expert in this part, @jodygarnett do you know if this could be completely delegated to the container JNDI configuration.\nIf not I can check at least to make it configurable in the build.", "url": "https://github.com/geonetwork/core-geonetwork/pull/4599#discussion_r408190807", "createdAt": "2020-04-14T14:41:12Z", "author": {"login": "josegar74"}, "path": "web/src/main/webResources/WEB-INF/config-db/jndi.xml", "diffHunk": "@@ -62,14 +52,12 @@\n         <entry key=\"Data Source\" value-ref=\"jdbcDataSource\"/>\n         <entry key=\"Loose bbox\" value=\"true\"/>\n         <entry key=\"Estimated extends\" value=\"true\"/>\n-        <entry key=\"schema\" value=\"${database.schema}\" />\n+        <entry key=\"schema\" value=\"public\" />", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE2NzQwMw=="}, "originalCommit": {"oid": "f10153223a5d56e0dc5bbb85ccc755587a1c4269"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODIzOTI5OQ==", "bodyText": "GeoTools uses the JNDI name, and whatever database.schema that connection was configured with. See docs.", "url": "https://github.com/geonetwork/core-geonetwork/pull/4599#discussion_r408239299", "createdAt": "2020-04-14T15:42:52Z", "author": {"login": "jodygarnett"}, "path": "web/src/main/webResources/WEB-INF/config-db/jndi.xml", "diffHunk": "@@ -62,14 +52,12 @@\n         <entry key=\"Data Source\" value-ref=\"jdbcDataSource\"/>\n         <entry key=\"Loose bbox\" value=\"true\"/>\n         <entry key=\"Estimated extends\" value=\"true\"/>\n-        <entry key=\"schema\" value=\"${database.schema}\" />\n+        <entry key=\"schema\" value=\"public\" />", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE2NzQwMw=="}, "originalCommit": {"oid": "f10153223a5d56e0dc5bbb85ccc755587a1c4269"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODY1NjYwMQ==", "bodyText": "Updated to remove the parameter and rely on the JNDI resource configuration.", "url": "https://github.com/geonetwork/core-geonetwork/pull/4599#discussion_r408656601", "createdAt": "2020-04-15T08:06:19Z", "author": {"login": "josegar74"}, "path": "web/src/main/webResources/WEB-INF/config-db/jndi.xml", "diffHunk": "@@ -62,14 +52,12 @@\n         <entry key=\"Data Source\" value-ref=\"jdbcDataSource\"/>\n         <entry key=\"Loose bbox\" value=\"true\"/>\n         <entry key=\"Estimated extends\" value=\"true\"/>\n-        <entry key=\"schema\" value=\"${database.schema}\" />\n+        <entry key=\"schema\" value=\"public\" />", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE2NzQwMw=="}, "originalCommit": {"oid": "f10153223a5d56e0dc5bbb85ccc755587a1c4269"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODY2MzI5Mg==", "bodyText": "afaik schema needs to be defined on two locations dns?currentschema=aaa, but also on config-spring-geonework.xml, one is used by hibernate, other by upgrade scripts. see also #2889", "url": "https://github.com/geonetwork/core-geonetwork/pull/4599#discussion_r408663292", "createdAt": "2020-04-15T08:18:11Z", "author": {"login": "pvgenuchten"}, "path": "web/src/main/webResources/WEB-INF/config-db/jndi.xml", "diffHunk": "@@ -62,14 +52,12 @@\n         <entry key=\"Data Source\" value-ref=\"jdbcDataSource\"/>\n         <entry key=\"Loose bbox\" value=\"true\"/>\n         <entry key=\"Estimated extends\" value=\"true\"/>\n-        <entry key=\"schema\" value=\"${database.schema}\" />\n+        <entry key=\"schema\" value=\"public\" />", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE2NzQwMw=="}, "originalCommit": {"oid": "f10153223a5d56e0dc5bbb85ccc755587a1c4269"}, "originalPosition": 45}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUzNDA1MTk3OnYy", "diffSide": "RIGHT", "path": "web/src/main/webResources/WEB-INF/config-db/jndiExamples_tomcat/oracle_JNDI_Example.xml", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxNDoxNToyMlrOGFQwqQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQwODoxODo0MFrOGFu2Lg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE3MDY2NQ==", "bodyText": "can we provide some guidance here, like:\n\nmove this file into tomcat/conf folder (I guess this is the step required?)\nfill relevant connection parameters\nread more about jndi in tomcat at ...", "url": "https://github.com/geonetwork/core-geonetwork/pull/4599#discussion_r408170665", "createdAt": "2020-04-14T14:15:22Z", "author": {"login": "pvgenuchten"}, "path": "web/src/main/webResources/WEB-INF/config-db/jndiExamples_tomcat/oracle_JNDI_Example.xml", "diffHunk": "@@ -0,0 +1,32 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+  ~ Copyright (C) 2001-2016 Food and Agriculture Organization of the\n+  ~ United Nations (FAO-UN), United Nations World Food Programme (WFP)\n+  ~ and United Nations Environment Programme (UNEP)\n+  ~\n+  ~ This program is free software; you can redistribute it and/or modify\n+  ~ it under the terms of the GNU General Public License as published by\n+  ~ the Free Software Foundation; either version 2 of the License, or (at\n+  ~ your option) any later version.\n+  ~\n+  ~ This program is distributed in the hope that it will be useful, but\n+  ~ WITHOUT ANY WARRANTY; without even the implied warranty of\n+  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n+  ~ General Public License for more details.\n+  ~\n+  ~ You should have received a copy of the GNU General Public License\n+  ~ along with this program; if not, write to the Free Software\n+  ~ Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301, USA\n+  ~\n+  ~ Contact: Jeroen Ticheler - FAO - Viale delle Terme di Caracalla 2,\n+  ~ Rome - Italy. email: geonetwork@osgeo.org\n+  -->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f10153223a5d56e0dc5bbb85ccc755587a1c4269"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE5NDEzNw==", "bodyText": "Sounds good, part of these instructions are in README.md file, we can improve it and reference it from the sample files", "url": "https://github.com/geonetwork/core-geonetwork/pull/4599#discussion_r408194137", "createdAt": "2020-04-14T14:45:16Z", "author": {"login": "josegar74"}, "path": "web/src/main/webResources/WEB-INF/config-db/jndiExamples_tomcat/oracle_JNDI_Example.xml", "diffHunk": "@@ -0,0 +1,32 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+  ~ Copyright (C) 2001-2016 Food and Agriculture Organization of the\n+  ~ United Nations (FAO-UN), United Nations World Food Programme (WFP)\n+  ~ and United Nations Environment Programme (UNEP)\n+  ~\n+  ~ This program is free software; you can redistribute it and/or modify\n+  ~ it under the terms of the GNU General Public License as published by\n+  ~ the Free Software Foundation; either version 2 of the License, or (at\n+  ~ your option) any later version.\n+  ~\n+  ~ This program is distributed in the hope that it will be useful, but\n+  ~ WITHOUT ANY WARRANTY; without even the implied warranty of\n+  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n+  ~ General Public License for more details.\n+  ~\n+  ~ You should have received a copy of the GNU General Public License\n+  ~ along with this program; if not, write to the Free Software\n+  ~ Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301, USA\n+  ~\n+  ~ Contact: Jeroen Ticheler - FAO - Viale delle Terme di Caracalla 2,\n+  ~ Rome - Italy. email: geonetwork@osgeo.org\n+  -->", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE3MDY2NQ=="}, "originalCommit": {"oid": "f10153223a5d56e0dc5bbb85ccc755587a1c4269"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODY1NjkwMQ==", "bodyText": "Added additional documentation and example: f101532", "url": "https://github.com/geonetwork/core-geonetwork/pull/4599#discussion_r408656901", "createdAt": "2020-04-15T08:06:56Z", "author": {"login": "josegar74"}, "path": "web/src/main/webResources/WEB-INF/config-db/jndiExamples_tomcat/oracle_JNDI_Example.xml", "diffHunk": "@@ -0,0 +1,32 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+  ~ Copyright (C) 2001-2016 Food and Agriculture Organization of the\n+  ~ United Nations (FAO-UN), United Nations World Food Programme (WFP)\n+  ~ and United Nations Environment Programme (UNEP)\n+  ~\n+  ~ This program is free software; you can redistribute it and/or modify\n+  ~ it under the terms of the GNU General Public License as published by\n+  ~ the Free Software Foundation; either version 2 of the License, or (at\n+  ~ your option) any later version.\n+  ~\n+  ~ This program is distributed in the hope that it will be useful, but\n+  ~ WITHOUT ANY WARRANTY; without even the implied warranty of\n+  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n+  ~ General Public License for more details.\n+  ~\n+  ~ You should have received a copy of the GNU General Public License\n+  ~ along with this program; if not, write to the Free Software\n+  ~ Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301, USA\n+  ~\n+  ~ Contact: Jeroen Ticheler - FAO - Viale delle Terme di Caracalla 2,\n+  ~ Rome - Italy. email: geonetwork@osgeo.org\n+  -->", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE3MDY2NQ=="}, "originalCommit": {"oid": "f10153223a5d56e0dc5bbb85ccc755587a1c4269"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODY2MzU5OA==", "bodyText": "thanx!", "url": "https://github.com/geonetwork/core-geonetwork/pull/4599#discussion_r408663598", "createdAt": "2020-04-15T08:18:40Z", "author": {"login": "pvgenuchten"}, "path": "web/src/main/webResources/WEB-INF/config-db/jndiExamples_tomcat/oracle_JNDI_Example.xml", "diffHunk": "@@ -0,0 +1,32 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+  ~ Copyright (C) 2001-2016 Food and Agriculture Organization of the\n+  ~ United Nations (FAO-UN), United Nations World Food Programme (WFP)\n+  ~ and United Nations Environment Programme (UNEP)\n+  ~\n+  ~ This program is free software; you can redistribute it and/or modify\n+  ~ it under the terms of the GNU General Public License as published by\n+  ~ the Free Software Foundation; either version 2 of the License, or (at\n+  ~ your option) any later version.\n+  ~\n+  ~ This program is distributed in the hope that it will be useful, but\n+  ~ WITHOUT ANY WARRANTY; without even the implied warranty of\n+  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n+  ~ General Public License for more details.\n+  ~\n+  ~ You should have received a copy of the GNU General Public License\n+  ~ along with this program; if not, write to the Free Software\n+  ~ Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301, USA\n+  ~\n+  ~ Contact: Jeroen Ticheler - FAO - Viale delle Terme di Caracalla 2,\n+  ~ Rome - Italy. email: geonetwork@osgeo.org\n+  -->", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE3MDY2NQ=="}, "originalCommit": {"oid": "f10153223a5d56e0dc5bbb85ccc755587a1c4269"}, "originalPosition": 23}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4158, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}