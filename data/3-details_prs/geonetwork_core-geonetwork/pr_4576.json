{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk4MDkyMjU1", "number": 4576, "title": "Harvester timezone setting", "bodyText": "The admin can now set a timezone in the settings and it will be used to interpret the cron expressions set in harvester settings. For example, setting Europe/Madrid in the timezone setting and the expression 0 15 5 * * ? in the cron will cause that the cron runs at 05:15 in the timezone, corresponding to:\n\n04:15 GMT in winter time\n03:15 GMT in summer saving daylight time.\n\n\nAdds a gnTimezoneSelector directive to allow select the timezone using a typeahead.", "createdAt": "2020-04-03T10:29:15Z", "url": "https://github.com/geonetwork/core-geonetwork/pull/4576", "merged": true, "mergeCommit": {"oid": "c5766047561103f4b00404a8e1ec920d0294fdc3"}, "closed": true, "closedAt": "2020-04-16T07:19:03Z", "author": {"login": "juanluisrp"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcT-SKqAH2gAyMzk4MDkyMjU1Ojk5M2JmOTAxYTU3NTdhOTdlZmU0ODExYTRmNzFjZWM3MTg5ZDY1OTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcYHPmDAFqTM5NDM1MTM0Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "993bf901a5757a97efe4811a4f71cec7189d6592", "author": {"user": {"login": "juanluisrp", "name": "Juan Luis Rodr\u00edguez Ponce"}}, "url": "https://github.com/geonetwork/core-geonetwork/commit/993bf901a5757a97efe4811a4f71cec7189d6592", "committedDate": "2020-04-03T10:24:36Z", "message": "Library / Moment.js / Update to 2.24.0"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aececd1762d534ccae8b624456c69458ec6d0370", "author": {"user": {"login": "juanluisrp", "name": "Juan Luis Rodr\u00edguez Ponce"}}, "url": "https://github.com/geonetwork/core-geonetwork/commit/aececd1762d534ccae8b624456c69458ec6d0370", "committedDate": "2020-04-03T10:24:36Z", "message": "Use a timezone from settings to run harvesters\n\nThe admin can now set a timezone in the settings and it will be used to interpret the\ncron expressions set in harvester settings. For example, setting Europe/Madrid in the\ntimezone setting and the expression `0 15 5 * * ?` in the cron will cause that the cron\nruns at 05:15 in the timezone, corresponding to:\n* 04:15 GMT in winter time\n* 03:15 GMT in summer saving daylight time."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d7f122fc9e7605700c6ddd97d491fc7e547759aa", "author": {"user": {"login": "juanluisrp", "name": "Juan Luis Rodr\u00edguez Ponce"}}, "url": "https://github.com/geonetwork/core-geonetwork/commit/d7f122fc9e7605700c6ddd97d491fc7e547759aa", "committedDate": "2020-04-03T10:24:36Z", "message": "Add more info to `system/harvesting/timeZonez help text"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg3MTQ2MTkz", "url": "https://github.com/geonetwork/core-geonetwork/pull/4576#pullrequestreview-387146193", "createdAt": "2020-04-03T10:43:09Z", "commit": {"oid": "d7f122fc9e7605700c6ddd97d491fc7e547759aa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxMDo0MzowOVrOGAQJWQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxMDo0MzowOVrOGAQJWQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjkxNzcyMQ==", "bodyText": "Not used right ?", "url": "https://github.com/geonetwork/core-geonetwork/pull/4576#discussion_r402917721", "createdAt": "2020-04-03T10:43:09Z", "author": {"login": "fxprunayre"}, "path": "web-ui/src/main/resources/catalog/components/timezoneselector/partials/timezoneselector.html", "diffHunk": "@@ -0,0 +1,10 @@\n+<!DOCTYPE html>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d7f122fc9e7605700c6ddd97d491fc7e547759aa"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg3MTQ3MjEz", "url": "https://github.com/geonetwork/core-geonetwork/pull/4576#pullrequestreview-387147213", "createdAt": "2020-04-03T10:44:48Z", "commit": {"oid": "d7f122fc9e7605700c6ddd97d491fc7e547759aa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxMDo0NDo0OFrOGAQM6Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxMDo0NDo0OFrOGAQM6Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjkxODYzMw==", "bodyText": "Why not setting a global timezone? This could be a start of fixing #1970. We also have other cron tasks that are not harvester and may also be affected by that change?", "url": "https://github.com/geonetwork/core-geonetwork/pull/4576#discussion_r402918633", "createdAt": "2020-04-03T10:44:48Z", "author": {"login": "fxprunayre"}, "path": "core/src/main/java/org/fao/geonet/kernel/setting/Settings.java", "diffHunk": "@@ -112,6 +112,7 @@\n     public static final String SYSTEM_HARVESTING_MAIL_TEMPLATE_WARNING = \"system/harvesting/mail/templateWarning\";\n     public static final String SYSTEM_HARVESTING_MAIL_TEMPLATE_ERROR = \"system/harvesting/mail/templateError\";\n     public static final String SYSTEM_HARVESTING_MAIL_TEMPLATE = \"system/harvesting/mail/template\";\n+    public static final String SYSTEM_HARVESTING_TIMEZONE = \"system/harvesting/timeZone\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d7f122fc9e7605700c6ddd97d491fc7e547759aa"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f83e8df9846c79ab4dec66a3377de7475750745", "author": {"user": {"login": "juanluisrp", "name": "Juan Luis Rodr\u00edguez Ponce"}}, "url": "https://github.com/geonetwork/core-geonetwork/commit/6f83e8df9846c79ab4dec66a3377de7475750745", "committedDate": "2020-04-03T10:55:58Z", "message": "Remove unused html directive template"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1f040701c07d7319b96d81681f467b65ffaddba2", "author": {"user": {"login": "juanluisrp", "name": "Juan Luis Rodr\u00edguez Ponce"}}, "url": "https://github.com/geonetwork/core-geonetwork/commit/1f040701c07d7319b96d81681f467b65ffaddba2", "committedDate": "2020-04-15T13:45:36Z", "message": "Change the harvesters timezone setting name\n\n* Now the setting is `system/server/timeZone`.\n* Reschedule the harvesters when timezone setting changes."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f0866a74dc7c7c52e26d819372c943bdcbad12f2", "author": {"user": {"login": "juanluisrp", "name": "Juan Luis Rodr\u00edguez Ponce"}}, "url": "https://github.com/geonetwork/core-geonetwork/commit/f0866a74dc7c7c52e26d819372c943bdcbad12f2", "committedDate": "2020-04-15T15:37:33Z", "message": "Fix setting name after renaming"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk0MzUxMzQz", "url": "https://github.com/geonetwork/core-geonetwork/pull/4576#pullrequestreview-394351343", "createdAt": "2020-04-16T07:06:38Z", "commit": {"oid": "f0866a74dc7c7c52e26d819372c943bdcbad12f2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1679, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}