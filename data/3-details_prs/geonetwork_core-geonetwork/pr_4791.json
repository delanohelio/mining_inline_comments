{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM5MDUzMDE2", "number": 4791, "title": "Editor / Polygon / Fix validation error on srsName and id attributes.", "bodyText": "When adding bounding polygon, issues are reported on validation.\n\nSince OL6 update, an srsName is added to LinearRing in GML3.2.0 (@jahow maybe you have can check if this is an OL issue?).\n\nGML2 OL format was not. See\nhttps://github.com/openlayers/openlayers/blame/v6.3.1/src/ol/format/GML2.js#L228\n.\nGML3 does https://github.com/openlayers/openlayers/blob/v6.3.1/src/ol/format/GML3.js#L503\nFrom the XSD, this attribute should probably not be added http://www.datypic.com/sc/niem21/e-gml32_LinearRing.html\nWorkaround that issue by updating LinearRing in update-fixed-info.xsl.\nAlso require metadata101/iso19115-3.2018#70 for ISO19115-3", "createdAt": "2020-06-24T08:39:37Z", "url": "https://github.com/geonetwork/core-geonetwork/pull/4791", "merged": true, "mergeCommit": {"oid": "3a917a4b51dd3c6769054daa747c2cd50f97e60a"}, "closed": true, "closedAt": "2020-07-03T13:14:55Z", "author": {"login": "fxprunayre"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcuV5ahgH2gAyNDM5MDUzMDE2OmU5Mjc3YWExMDhmOTE3NjQ5OGQ1ZWRiZmJhNTcyOTM5ODUwNTE2NjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcxQbfogH2gAyNDM5MDUzMDE2OjBkMDg4YjM1ZTRlYTM0OGIzNzkxNDNiMmUwZDQ3NTRmNDEyYTAzMWY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e9277aa108f9176498d5edbfba57293985051666", "author": {"user": {"login": "fxprunayre", "name": "Fran\u00e7ois Prunayre"}}, "url": "https://github.com/geonetwork/core-geonetwork/commit/e9277aa108f9176498d5edbfba57293985051666", "committedDate": "2020-06-24T08:37:19Z", "message": "Editor / Polygon / Fix validation error on srsName and id attributes.\n\nWhen adding bounding polygon, issues are reported on validation.\n\n![image](https://user-images.githubusercontent.com/1701393/85522811-6d6adb80-b606-11ea-8c02-726e4d61f55e.png)\n\nSince OL6 update, an srsName is added to LinearRing in GML3.2.0.\n\n![image](https://user-images.githubusercontent.com/1701393/85522835-722f8f80-b606-11ea-87c6-a8056e1ae5b9.png)\n\nGML2 OL format was not. See\n https://github.com/openlayers/openlayers/blame/v6.3.1/src/ol/format/GML2.js#L228\n.\nGML3 does https://github.com/openlayers/openlayers/blob/v6.3.1/src/ol/format/GML3.js#L503\n\nFrom the XSD, this attribute should probably not be added https://schemas.wmo.int/wmdr/1.0RC6/documentation/schemadoc/schemas/geometryBasic2d_xsd/elements/LinearRing.html.\n\nWorkaround that issue by updating `LinearRing` in `update-fixed-info.xsl`."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2NDU0ODAx", "url": "https://github.com/geonetwork/core-geonetwork/pull/4791#pullrequestreview-436454801", "createdAt": "2020-06-24T08:57:16Z", "commit": {"oid": "e9277aa108f9176498d5edbfba57293985051666"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwODo1NzoxNlrOGoJOGA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwODo1NzoxNlrOGoJOGA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc0NzI4OA==", "bodyText": "With this change the gml:id or srsName are going to be replaced if 1 of the values are not filled, should not be checked if are filled to copy them instead of setting the value?", "url": "https://github.com/geonetwork/core-geonetwork/pull/4791#discussion_r444747288", "createdAt": "2020-06-24T08:57:16Z", "author": {"login": "josegar74"}, "path": "schemas/iso19139/src/main/plugin/iso19139/update-fixed-info.xsl", "diffHunk": "@@ -288,10 +290,10 @@\n   </xsl:template>\n \n   <!-- Add required gml attributes if missing -->\n-  <xsl:template match=\"gml:Polygon[not(@gml:id) and not(@srsName)]|\n-                       gml:MultiSurface[not(@gml:id) and not(@srsName)]|\n-                       gml:LineString[not(@gml:id) and not(@srsName)]|\n-                       gml320:Polygon[not(@gml320:id) and not(@srsName)]\">\n+  <xsl:template match=\"gml:Polygon[not(@gml:id) or not(@srsName)]|\n+                       gml:MultiSurface[not(@gml:id) or not(@srsName)]|\n+                       gml:LineString[not(@gml:id) or not(@srsName)]|\n+                       gml320:Polygon[not(@gml320:id) or not(@srsName)]\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e9277aa108f9176498d5edbfba57293985051666"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2969e71f21e814abd538e51c374c856702ab4445", "author": {"user": {"login": "fxprunayre", "name": "Fran\u00e7ois Prunayre"}}, "url": "https://github.com/geonetwork/core-geonetwork/commit/2969e71f21e814abd538e51c374c856702ab4445", "committedDate": "2020-06-24T09:10:12Z", "message": "Editor / Polygon / Fix validation error on srsName and id attributes / Preserve existing."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "30d14732790ca056014ae21dac92ceeb21a7c8dd", "author": {"user": {"login": "fxprunayre", "name": "Fran\u00e7ois Prunayre"}}, "url": "https://github.com/geonetwork/core-geonetwork/commit/30d14732790ca056014ae21dac92ceeb21a7c8dd", "committedDate": "2020-06-24T10:57:50Z", "message": "Editor / Polygon / Fix validation error on srsName and id attributes / Avoid xmlns attribute."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb97cff3717ec00adf7a278b26b51b023b44dd2d", "author": {"user": {"login": "fxprunayre", "name": "Fran\u00e7ois Prunayre"}}, "url": "https://github.com/geonetwork/core-geonetwork/commit/fb97cff3717ec00adf7a278b26b51b023b44dd2d", "committedDate": "2020-07-02T07:27:33Z", "message": "Editor / Polygon / Fix validation error on srsName and id attributes. Avoid empty xmlns by cleaning gml namespaces of all elements."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1966f5e3b03ced22848d49871bafd48baae5f9d1", "author": {"user": {"login": "fxprunayre", "name": "Fran\u00e7ois Prunayre"}}, "url": "https://github.com/geonetwork/core-geonetwork/commit/1966f5e3b03ced22848d49871bafd48baae5f9d1", "committedDate": "2020-07-02T13:47:26Z", "message": "Editor / Polygon / Fix validation error on srsName and id attributes."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f176dad4e170746472568f3ee68a95d4f494d3cb", "author": {"user": {"login": "fxprunayre", "name": "Fran\u00e7ois Prunayre"}}, "url": "https://github.com/geonetwork/core-geonetwork/commit/f176dad4e170746472568f3ee68a95d4f494d3cb", "committedDate": "2020-07-03T08:06:23Z", "message": "Editor / Polygon / Fix validation error on srsName and id attributes / Avoid xmlns='' attribute and keep GML namesapce declaration at the root document level only. Thanks josegar74 for helping on that."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0d088b35e4ea348b379143b2e0d4754f412a031f", "author": {"user": {"login": "fxprunayre", "name": "Fran\u00e7ois Prunayre"}}, "url": "https://github.com/geonetwork/core-geonetwork/commit/0d088b35e4ea348b379143b2e0d4754f412a031f", "committedDate": "2020-07-03T09:56:53Z", "message": "Editor / Polygon / Fix validation error on srsName and id attributes."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1591, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}