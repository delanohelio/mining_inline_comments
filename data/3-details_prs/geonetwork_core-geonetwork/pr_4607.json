{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAzODM0MDg5", "number": 4607, "title": "Link analysis improvement", "bodyText": "Admin > Stats & status, do not display catalog status, information and versioning for non admin user. Only link analysis is displayed and of interest for those users.\n\nAdd filter by groupOwner(s) or groupPublished(s)\n\nNote: public records were always displayed - this has been removed. Only group filter applies.\nAdd CSV export\n\n\nAPI GET /records/links\n\nFilter by groupOwner(s) or groupPublished(s)\nAllow to editorOrMore profile\nFilter on user editing groups by default\n\n\nAPI POST /records/links\n\nReturn a report based on user privileges\n\n\nConfig / WEB-INF/config.properties allows to configure maxPageSize and maxUploadSize", "createdAt": "2020-04-15T15:32:29Z", "url": "https://github.com/geonetwork/core-geonetwork/pull/4607", "merged": true, "mergeCommit": {"oid": "71b3413a9a3c2bf275084063d7e5146933297c6c"}, "closed": true, "closedAt": "2020-05-22T12:36:21Z", "author": {"login": "fxprunayre"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcX535ZgH2gAyNDAzODM0MDg5Ojc3NDY5OTY0OWQwYjY1MDNiMmFmMDZhMjM1MTg1NzM5ZDdjNzg5MmU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcjwevTgH2gAyNDAzODM0MDg5OmQ2ODA4MjA3ZWNkN2MxMWJjMWZmNTc4NDg5NzA1OTlhODE4NjQyOTY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "774699649d0b6503b2af06a235185739d7c7892e", "author": {"user": {"login": "fxprunayre", "name": "Fran\u00e7ois Prunayre"}}, "url": "https://github.com/geonetwork/core-geonetwork/commit/774699649d0b6503b2af06a235185739d7c7892e", "committedDate": "2020-04-15T15:31:59Z", "message": "Link analysis improvement\n\n* API GET /records/links\n  * Filter by groupOwner(s) or groupPublished(s)\n  * Allow to editorOrMore profile\n  * Filter on user editing groups by default\n* API POST /records/links\n  * Return a report based on user privileges"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ec861563e2b1045959f73008b2460454eb1eedf", "author": {"user": {"login": "fxprunayre", "name": "Fran\u00e7ois Prunayre"}}, "url": "https://github.com/geonetwork/core-geonetwork/commit/9ec861563e2b1045959f73008b2460454eb1eedf", "committedDate": "2020-04-17T05:58:34Z", "message": "Link analysis / Add CSV export."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3e80062ff462fee45e96301759b48621a2a863d5", "author": {"user": {"login": "fxprunayre", "name": "Fran\u00e7ois Prunayre"}}, "url": "https://github.com/geonetwork/core-geonetwork/commit/3e80062ff462fee45e96301759b48621a2a863d5", "committedDate": "2020-04-17T06:40:30Z", "message": "Link analysis / Add CSV export / Properties for test."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ea6e1b79ea8585402698de34910b5064f13a752", "author": {"user": {"login": "fxprunayre", "name": "Fran\u00e7ois Prunayre"}}, "url": "https://github.com/geonetwork/core-geonetwork/commit/2ea6e1b79ea8585402698de34910b5064f13a752", "committedDate": "2020-04-17T07:39:55Z", "message": "Link analysis / Add CSV export / Properties for test."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d4d7f1395449abf836fe261c6343b8533a6446b1", "author": {"user": {"login": "fxprunayre", "name": "Fran\u00e7ois Prunayre"}}, "url": "https://github.com/geonetwork/core-geonetwork/commit/d4d7f1395449abf836fe261c6343b8533a6446b1", "committedDate": "2020-04-17T07:45:19Z", "message": "Link analysis / Do not set default values for group. By default all."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk5MTUxODA5", "url": "https://github.com/geonetwork/core-geonetwork/pull/4607#pullrequestreview-399151809", "createdAt": "2020-04-23T14:25:30Z", "commit": {"oid": "d4d7f1395449abf836fe261c6343b8533a6446b1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxNDoyNTozMFrOGKq4pQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxNDoyNTozMFrOGKq4pQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzg0MTU3Mw==", "bodyText": "Maybe check to use Autowire? Similar in other methods that were already defined.", "url": "https://github.com/geonetwork/core-geonetwork/pull/4607#discussion_r413841573", "createdAt": "2020-04-23T14:25:30Z", "author": {"login": "josegar74"}, "path": "core/src/main/java/org/fao/geonet/kernel/AccessManager.java", "diffHunk": "@@ -183,6 +185,23 @@\n         return hs;\n     }\n \n+    /**\n+     *  Retrieves the user's groups ids\n+     * @param session\n+     * @param profile\n+     * @return\n+     * @throws SQLException\n+     */\n+    public static List<Integer> getGroups(UserSession session, Profile profile) throws SQLException {\n+        ApplicationContext applicationContext = ApplicationContextHolder.get();\n+        final UserGroupRepository userGroupRepository = applicationContext.getBean(UserGroupRepository.class);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d4d7f1395449abf836fe261c6343b8533a6446b1"}, "originalPosition": 29}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0738e11a9d51d0bf0a2c826241c623f4fc10a806", "author": {"user": {"login": "fxprunayre", "name": "Fran\u00e7ois Prunayre"}}, "url": "https://github.com/geonetwork/core-geonetwork/commit/0738e11a9d51d0bf0a2c826241c623f4fc10a806", "committedDate": "2020-04-24T06:38:41Z", "message": "Link analysis / Fix download link."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "34a2a7d94dcdd2405d05f32b1e36a354504df77e", "author": {"user": {"login": "fxprunayre", "name": "Fran\u00e7ois Prunayre"}}, "url": "https://github.com/geonetwork/core-geonetwork/commit/34a2a7d94dcdd2405d05f32b1e36a354504df77e", "committedDate": "2020-04-24T06:48:10Z", "message": "Java / Autowired."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee5c8365c3b074392f399c0ed67ee0aaa9e4b3df", "author": {"user": {"login": "fxprunayre", "name": "Fran\u00e7ois Prunayre"}}, "url": "https://github.com/geonetwork/core-geonetwork/commit/ee5c8365c3b074392f399c0ed67ee0aaa9e4b3df", "committedDate": "2020-04-27T06:24:49Z", "message": "Link analysis / Fix error on Tomact\n\n\r\nDue to JSON parameter.\r\n\r\n```\r\n24-Apr-2020 14:05:38.281 INFO [http-apr-8080-exec-11] org.apache.coyote.http11.AbstractHttp11Processor.process Error parsing HTTP request header\r\n Note: further occurrences of HTTP header parsing errors will be logged at DEBUG level.\r\n java.lang.IllegalArgumentException: Invalid character found in the request target. The valid characters are defined in RFC 7230 and RFC 3986\r\n    at org.apache.coyote.http11.InternalAprInputBuffer.parseRequestLine(InternalAprInputBuffer.java:244)\r\n    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1065)\r\n    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:684)\r\n    at org.apache.tomcat.util.net.AprEndpoint$SocketWithOptionsProcessor.run(AprEndpoint.java:2464)\r\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n    at java.lang.Thread.run(Thread.java:748)\r\n```"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7025661e6c87f9aee19f2216a9bbecd6e7b9a118", "author": {"user": {"login": "fxprunayre", "name": "Fran\u00e7ois Prunayre"}}, "url": "https://github.com/geonetwork/core-geonetwork/commit/7025661e6c87f9aee19f2216a9bbecd6e7b9a118", "committedDate": "2020-05-22T11:19:10Z", "message": "Update AccessManager.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d6808207ecd7c11bc1ff57848970599a81864296", "author": {"user": {"login": "fxprunayre", "name": "Fran\u00e7ois Prunayre"}}, "url": "https://github.com/geonetwork/core-geonetwork/commit/d6808207ecd7c11bc1ff57848970599a81864296", "committedDate": "2020-05-22T11:22:27Z", "message": "Merge branch 'master' into linkanalysisimprovements"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1621, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}