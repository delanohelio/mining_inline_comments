{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU4MDgzNzIx", "number": 4894, "title": "don't clear the multilingual fields when changing protocol", "bodyText": "Both the description and resource name (both multilingual) in the online resource editor get cleared when you change the protocol.\nThis ONLY happens in ADD mode (in Edit mode, they don't clear).  This is causing users confusion - they don't like those fields to be reset after they've typed them in.\nThis PR changes that behavior for ADD mode.  I've created another  configuration for the directive so you can control this.\ndata-clear-form-on-protocol-change=\"false\"\nFALSE (default) -> don't clear\nTRUE --> clear (old behavior).\nNOTE: This changes the default behavior to \"don't clear\"", "createdAt": "2020-07-28T22:06:25Z", "url": "https://github.com/geonetwork/core-geonetwork/pull/4894", "merged": true, "mergeCommit": {"oid": "4833668a47f61717d1672401f10d55568ecaa773"}, "closed": true, "closedAt": "2020-08-07T19:27:08Z", "author": {"login": "davidblasby"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc5drdggH2gAyNDU4MDgzNzIxOjQ1ZjA0MTJmNTVjMGQ5ODY4MjczMjVjMDdjOGJlYWVhOGVkNmYxYjU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc8TRn3gH2gAyNDU4MDgzNzIxOmY1ZWRiOTIyMjNkNTc4MzUzNDBmYjUxNmNlNmM0YmM5MDBlNTg1OTg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "45f0412f55c0d986827325c07c8beaea8ed6f1b5", "author": {"user": null}, "url": "https://github.com/geonetwork/core-geonetwork/commit/45f0412f55c0d986827325c07c8beaea8ed6f1b5", "committedDate": "2020-07-28T21:54:29Z", "message": "don't clear the multilingual fields when changing protocol"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU4MTM4ODcz", "url": "https://github.com/geonetwork/core-geonetwork/pull/4894#pullrequestreview-458138873", "createdAt": "2020-07-30T07:11:59Z", "commit": {"oid": "45f0412f55c0d986827325c07c8beaea8ed6f1b5"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQwNzoxMTo1OVrOG5Wqaw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQwNzoxMTo1OVrOG5Wqaw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjc5MzMyMw==", "bodyText": "It looks like adding a WMS layer does not work because we don't set anymore selectedLayers. Error returned is\n\nso maybe only name and desc should not be modified.", "url": "https://github.com/geonetwork/core-geonetwork/pull/4894#discussion_r462793323", "createdAt": "2020-07-30T07:11:59Z", "author": {"login": "fxprunayre"}, "path": "web-ui/src/main/resources/catalog/components/edit/onlinesrc/OnlineSrcDirective.js", "diffHunk": "@@ -723,7 +724,7 @@\n                 var resetProtocol = function() {\n                   scope.layers = [];\n                   scope.OGCProtocol = false;\n-                  if (scope.params && !scope.isEditing) {\n+                  if (scope.params && !scope.isEditing && scope.clearFormOnProtocolChange) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "45f0412f55c0d986827325c07c8beaea8ed6f1b5"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f5edb92223d57835340fb516ce6c4bc900e58598", "author": {"user": null}, "url": "https://github.com/geonetwork/core-geonetwork/commit/f5edb92223d57835340fb516ce6c4bc900e58598", "committedDate": "2020-08-06T17:28:59Z", "message": "be more selective with what's rereset"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1612, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}