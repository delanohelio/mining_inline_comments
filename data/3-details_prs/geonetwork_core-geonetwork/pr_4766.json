{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM0OTU2MjI1", "number": 4766, "title": "add multilingual titles to thesauri", "bodyText": "This adds multilingual titles capabilities for thesauri.\nAdd language-specific titles to the ConceptSchema at the top of your thesaurus;\n<rdf:RDF ...>\n  <skos:ConceptScheme rdf:about=\"http://www.thesaurus.gc.ca/#CoreSubjectThesaurus\">\n         <dc:title>Government of Canada Core Subject Thesaurus</dc:title>\n         **<dc:title xml:lang=\"en\">Government of Canada Core Subject Thesaurus</dc:title>\n         <dc:title xml:lang=\"fr\">Th\u00e9saurus des sujets de base du gouvernement du Canada</dc:title>**\n   </skos:ConceptScheme>\nYou will see this added to the Thesaurus object;\n\"multilingualTitles\":     [\n            {\n        \"lang\": \"fr\",\n        \"title\": \"Th\u00e9saurus des sujets de base du gouvernement du Canada\"\n      },\n            {\n        \"lang\": \"en\",\n        \"title\": \"Government of Canada Core Subject Thesaurus\"\n      },\n            {\n        \"lang\": \"fre\",\n        \"title\": \"Th\u00e9saurus des sujets de base du gouvernement du Canada\"\n      },\n            {\n        \"lang\": \"eng\",\n        \"title\": \"Government of Canada Core Subject Thesaurus\"\n      }\n    ]\nSee HNAP in metadata101 for more details/examples for use.\nAlso added an optional langMap parameter to the keywords api.\nThis is optional.\nFor iso139139, you don't have to do anything -- the thesaurus-tranformation.xsl will automatically convert \"eng\" to \"#EN\".\nFor HNAP, there needs to be conversion.  input is \"fre\", output should be \"#fra\".  You can specify this in with this dictionary.\n{\"eng\":\"#eng\",\"fre\":\"#fra\"}", "createdAt": "2020-06-16T03:50:30Z", "url": "https://github.com/geonetwork/core-geonetwork/pull/4766", "merged": true, "mergeCommit": {"oid": "507466477e8ac0a2bb47d70e39adce433e246a18"}, "closed": true, "closedAt": "2020-06-26T15:32:32Z", "author": {"login": "davidblasby"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcrs6s7AH2gAyNDM0OTU2MjI1OmQyYTkwNThiNDc5NDk4MWQ1ODZlNjRkY2NkMmJkNWI0ZmQyMjljZjU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc6O-oLAFqTQ1ODk2NTY2Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d2a9058b4794981d586e64dccd2bd5b4fd229cf5", "author": {"user": null}, "url": "https://github.com/geonetwork/core-geonetwork/commit/d2a9058b4794981d586e64dccd2bd5b4fd229cf5", "committedDate": "2020-06-16T03:44:46Z", "message": "add multilingual titles to thesauri"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxMTk4MDg1", "url": "https://github.com/geonetwork/core-geonetwork/pull/4766#pullrequestreview-431198085", "createdAt": "2020-06-16T06:36:34Z", "commit": {"oid": "d2a9058b4794981d586e64dccd2bd5b4fd229cf5"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwNjozNjozNVrOGkNIAQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwNjo0NDo0NlrOGkNVFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDYxNjk2MQ==", "bodyText": "Are both required? Can't be send with the iso code used by other thesaurus services and use in the UI the services to convert the codes?", "url": "https://github.com/geonetwork/core-geonetwork/pull/4766#discussion_r440616961", "createdAt": "2020-06-16T06:36:35Z", "author": {"login": "josegar74"}, "path": "core/src/main/java/org/fao/geonet/kernel/Thesaurus.java", "diffHunk": "@@ -693,6 +693,47 @@ public void addTitleElement(String thesaurusTitle) throws IOException, AccessDen\n         repository.addGraph(myGraph);\n     }\n \n+    //    <rdf:RDF>\n+    //    <skos:ConceptScheme rdf:about=\"http://www.thesaurus.gc.ca/#CoreSubjectThesaurus\">\n+    //          <dc:title>Main GN Title</dc:title>\n+    //          <dc:title xml:lang=\"en\">English Version (en)</dc:title>\n+    //          <dc:title xml:lang=\"fr\">French Version (fr)</dc:title>\n+    //          <dc:description></dc:description>\n+    //     </skos:ConceptScheme>\n+    //\n+    // This will setup;\n+    //  {\n+    //      \"en\": \"English Version (en)\",\n+    //      \"fr\": \"French Version (fr)\"\n+    //      \"eng\": \"English Version (en)\",\n+    //      \"fre\": \"French Version (fr)\"\n+    //  }\n+    private void retrieveMultiLingualTitles(Element thesaurusEl) {\n+        List<Namespace> theNSs = new ArrayList<Namespace>();\n+        theNSs.add(Namespace.getNamespace(\"rdf\", \"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"));\n+        theNSs.add(Namespace.getNamespace(\"skos\", \"http://www.w3.org/2004/02/skos/core#\"));\n+        theNSs.add(Namespace.getNamespace(\"dc\", \"http://purl.org/dc/elements/1.1/\"));\n+        theNSs.add(Namespace.getNamespace(\"dcterms\", \"http://purl.org/dc/terms/\"));\n+\n+        Namespace xmlNS = Namespace.getNamespace(\"xml\",\"http://www.w3.org/XML/1998/namespace\");\n+\n+        try {\n+            List<Element> multiLingualTitles = (List<Element>) Xml.selectNodes(thesaurusEl,\n+                \"skos:ConceptScheme/dc:title[@xml:lang]|skos:ConceptScheme/dcterms:title[@xml:lang]\", theNSs);\n+            multilingualTitles.clear();\n+            for (Element el: multiLingualTitles) {\n+                    //use both forms of the lang name", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d2a9058b4794981d586e64dccd2bd5b4fd229cf5"}, "originalPosition": 69}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDYxODA0Ng==", "bodyText": "Surround code with curly braces", "url": "https://github.com/geonetwork/core-geonetwork/pull/4766#discussion_r440618046", "createdAt": "2020-06-16T06:39:17Z", "author": {"login": "josegar74"}, "path": "services/src/main/java/org/fao/geonet/api/registries/vocabularies/KeywordsApi.java", "diffHunk": "@@ -416,31 +406,31 @@ public Element getKeywordById(\n             KeywordsSearcher searcher = new KeywordsSearcher(context, thesaurusManager);\n \n             KeywordBean kb;\n-            if (!uri.contains(SEPARATOR)) {\n-                kb = searcher.searchById(uri, sThesaurusName, langs);\n-                if (kb == null) {\n-                    descKeys = new Element(\"descKeys\");\n-                } else {\n-                    descKeys = KeywordsSearcher.toRawElement(new Element(\"descKeys\"), kb);\n-                }\n-            } else {\n-                String[] url = uri.split(SEPARATOR);\n-                List<KeywordBean> kbList = new ArrayList<>();\n-                for (String currentUri : url) {\n+            String[] url;\n+            if (!uri.contains(SEPARATOR))\n+                url = new String[] {uri};\n+            else\n+                url = uri.split(SEPARATOR);\n+            List<KeywordBean> kbList = new ArrayList<>();\n+            for (String currentUri : url) {\n+                kb = searcher.searchById(currentUri, sThesaurusName, iso3langCodes);\n+                if (kb == null)\n                     kb = searcher.searchById(currentUri, sThesaurusName, langs);\n-                    if (kb == null)\n-                        kb = searcher.searchById(fixUri(currentUri), sThesaurusName, langs);\n-                    if (kb != null) {\n-                        kbList.add(kb);\n-                    }\n-                }\n-                descKeys = new Element(\"descKeys\");\n-                for (KeywordBean keywordBean : kbList) {\n-                    KeywordsSearcher.toRawElement(descKeys, keywordBean);\n+                if (kb == null)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d2a9058b4794981d586e64dccd2bd5b4fd229cf5"}, "originalPosition": 64}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDYxODExNw==", "bodyText": "Surround code with curly braces", "url": "https://github.com/geonetwork/core-geonetwork/pull/4766#discussion_r440618117", "createdAt": "2020-06-16T06:39:28Z", "author": {"login": "josegar74"}, "path": "services/src/main/java/org/fao/geonet/api/registries/vocabularies/KeywordsApi.java", "diffHunk": "@@ -416,31 +406,31 @@ public Element getKeywordById(\n             KeywordsSearcher searcher = new KeywordsSearcher(context, thesaurusManager);\n \n             KeywordBean kb;\n-            if (!uri.contains(SEPARATOR)) {\n-                kb = searcher.searchById(uri, sThesaurusName, langs);\n-                if (kb == null) {\n-                    descKeys = new Element(\"descKeys\");\n-                } else {\n-                    descKeys = KeywordsSearcher.toRawElement(new Element(\"descKeys\"), kb);\n-                }\n-            } else {\n-                String[] url = uri.split(SEPARATOR);\n-                List<KeywordBean> kbList = new ArrayList<>();\n-                for (String currentUri : url) {\n+            String[] url;\n+            if (!uri.contains(SEPARATOR))\n+                url = new String[] {uri};\n+            else\n+                url = uri.split(SEPARATOR);\n+            List<KeywordBean> kbList = new ArrayList<>();\n+            for (String currentUri : url) {\n+                kb = searcher.searchById(currentUri, sThesaurusName, iso3langCodes);\n+                if (kb == null)\n                     kb = searcher.searchById(currentUri, sThesaurusName, langs);\n-                    if (kb == null)\n-                        kb = searcher.searchById(fixUri(currentUri), sThesaurusName, langs);\n-                    if (kb != null) {\n-                        kbList.add(kb);\n-                    }\n-                }\n-                descKeys = new Element(\"descKeys\");\n-                for (KeywordBean keywordBean : kbList) {\n-                    KeywordsSearcher.toRawElement(descKeys, keywordBean);\n+                if (kb == null)\n+                    kb = searcher.searchById(fixUri(currentUri), sThesaurusName, iso3langCodes);\n+                if (kb == null)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d2a9058b4794981d586e64dccd2bd5b4fd229cf5"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDYxOTU5Nw==", "bodyText": "Please check to move to add Unit tests, if required move to a utility class.", "url": "https://github.com/geonetwork/core-geonetwork/pull/4766#discussion_r440619597", "createdAt": "2020-06-16T06:43:02Z", "author": {"login": "josegar74"}, "path": "services/src/main/java/org/fao/geonet/api/registries/vocabularies/KeywordsApi.java", "diffHunk": "@@ -473,12 +463,14 @@ public Element getKeywordById(\n     }\n \n     // fixes common problems in uri\n-    private String fixUri(String uri) throws URISyntaxException {\n-        // We could be smarter about this.\n-        // ie. by breaking string at \"#\" and then urlencode the left part.\n-        //     However, the rdf files could be inconsistent with\n-        //     other characters like \":\" (i.e. should not be url encoded)\n-        return uri.replace(\" \",\"%20\");\n+    private String fixUri(String uri) throws   UnsupportedEncodingException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d2a9058b4794981d586e64dccd2bd5b4fd229cf5"}, "originalPosition": 92}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDYyMDMxMA==", "bodyText": "Surround code with curly braces", "url": "https://github.com/geonetwork/core-geonetwork/pull/4766#discussion_r440620310", "createdAt": "2020-06-16T06:44:46Z", "author": {"login": "josegar74"}, "path": "services/src/main/java/org/fao/geonet/api/registries/vocabularies/KeywordsApi.java", "diffHunk": "@@ -416,31 +406,31 @@ public Element getKeywordById(\n             KeywordsSearcher searcher = new KeywordsSearcher(context, thesaurusManager);\n \n             KeywordBean kb;\n-            if (!uri.contains(SEPARATOR)) {\n-                kb = searcher.searchById(uri, sThesaurusName, langs);\n-                if (kb == null) {\n-                    descKeys = new Element(\"descKeys\");\n-                } else {\n-                    descKeys = KeywordsSearcher.toRawElement(new Element(\"descKeys\"), kb);\n-                }\n-            } else {\n-                String[] url = uri.split(SEPARATOR);\n-                List<KeywordBean> kbList = new ArrayList<>();\n-                for (String currentUri : url) {\n+            String[] url;\n+            if (!uri.contains(SEPARATOR))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d2a9058b4794981d586e64dccd2bd5b4fd229cf5"}, "originalPosition": 46}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e6c56bfbb06e5944439f1fe0e066a0b813c475d", "author": {"user": null}, "url": "https://github.com/geonetwork/core-geonetwork/commit/8e6c56bfbb06e5944439f1fe0e066a0b813c475d", "committedDate": "2020-06-16T17:33:35Z", "message": "fixes from review"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "339c42012b6e884d49462e92e19ca934d6ab854d", "author": {"user": null}, "url": "https://github.com/geonetwork/core-geonetwork/commit/339c42012b6e884d49462e92e19ca934d6ab854d", "committedDate": "2020-06-16T17:36:38Z", "message": "slightly better 2/3 letter handling"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyMzUwOTI4", "url": "https://github.com/geonetwork/core-geonetwork/pull/4766#pullrequestreview-432350928", "createdAt": "2020-06-17T12:31:17Z", "commit": {"oid": "339c42012b6e884d49462e92e19ca934d6ab854d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzMTU1NTMx", "url": "https://github.com/geonetwork/core-geonetwork/pull/4766#pullrequestreview-433155531", "createdAt": "2020-06-18T10:36:47Z", "commit": {"oid": "339c42012b6e884d49462e92e19ca934d6ab854d"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxMDozNjo0OFrOGlpmdA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxMDozNzowOVrOGlpnSQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjEzMjA4NA==", "bodyText": "Would it not be better to create 2 functions? - one to get 2 char lang code and values like the following\n    {\n       \"en\": \"English Version (en)\",\n       \"fr\": \"French Version (fr)\"\n    }\n\n\nand one to get 3 char lang codes and values like the following\n   {\n      \"eng\": \"English Version (en)\",\n      \"fre\": \"French Version (fr)\"\n   }\n\n\nWith 2 function, if in the future you want to know where 2 char codes are used vs 3 char code it will be easier to identify usage. This can probably be done by making the main function private and creating 2 public functions that could just subset the existing results.", "url": "https://github.com/geonetwork/core-geonetwork/pull/4766#discussion_r442132084", "createdAt": "2020-06-18T10:36:48Z", "author": {"login": "ianwallen"}, "path": "core/src/main/java/org/fao/geonet/kernel/Thesaurus.java", "diffHunk": "@@ -693,6 +693,47 @@ public void addTitleElement(String thesaurusTitle) throws IOException, AccessDen\n         repository.addGraph(myGraph);\n     }\n \n+    //    <rdf:RDF>\n+    //    <skos:ConceptScheme rdf:about=\"http://www.thesaurus.gc.ca/#CoreSubjectThesaurus\">\n+    //          <dc:title>Main GN Title</dc:title>\n+    //          <dc:title xml:lang=\"en\">English Version (en)</dc:title>\n+    //          <dc:title xml:lang=\"fr\">French Version (fr)</dc:title>\n+    //          <dc:description></dc:description>\n+    //     </skos:ConceptScheme>\n+    //\n+    // This will setup;\n+    //  {\n+    //      \"en\": \"English Version (en)\",\n+    //      \"fr\": \"French Version (fr)\"\n+    //      \"eng\": \"English Version (en)\",\n+    //      \"fre\": \"French Version (fr)\"\n+    //  }\n+    private void retrieveMultiLingualTitles(Element thesaurusEl) {\n+        List<Namespace> theNSs = new ArrayList<Namespace>();\n+        theNSs.add(Namespace.getNamespace(\"rdf\", \"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"));\n+        theNSs.add(Namespace.getNamespace(\"skos\", \"http://www.w3.org/2004/02/skos/core#\"));\n+        theNSs.add(Namespace.getNamespace(\"dc\", \"http://purl.org/dc/elements/1.1/\"));\n+        theNSs.add(Namespace.getNamespace(\"dcterms\", \"http://purl.org/dc/terms/\"));\n+\n+        Namespace xmlNS = Namespace.getNamespace(\"xml\",\"http://www.w3.org/XML/1998/namespace\");\n+\n+        try {\n+            List<Element> multiLingualTitles = (List<Element>) Xml.selectNodes(thesaurusEl,\n+                \"skos:ConceptScheme/dc:title[@xml:lang]|skos:ConceptScheme/dcterms:title[@xml:lang]\", theNSs);\n+            multilingualTitles.clear();\n+            for (Element el: multiLingualTitles) {\n+                    //use both forms of the lang name", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDYxNjk2MQ=="}, "originalCommit": {"oid": "d2a9058b4794981d586e64dccd2bd5b4fd229cf5"}, "originalPosition": 69}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjEzMjI5Nw==", "bodyText": "Missing \",\" at the end", "url": "https://github.com/geonetwork/core-geonetwork/pull/4766#discussion_r442132297", "createdAt": "2020-06-18T10:37:09Z", "author": {"login": "ianwallen"}, "path": "core/src/main/java/org/fao/geonet/kernel/Thesaurus.java", "diffHunk": "@@ -693,6 +693,49 @@ public void addTitleElement(String thesaurusTitle) throws IOException, AccessDen\n         repository.addGraph(myGraph);\n     }\n \n+    //    <rdf:RDF>\n+    //    <skos:ConceptScheme rdf:about=\"http://www.thesaurus.gc.ca/#CoreSubjectThesaurus\">\n+    //          <dc:title>Main GN Title</dc:title>\n+    //          <dc:title xml:lang=\"en\">English Version (en)</dc:title>\n+    //          <dc:title xml:lang=\"fr\">French Version (fr)</dc:title>\n+    //          <dc:description></dc:description>\n+    //     </skos:ConceptScheme>\n+    //\n+    // This will setup;\n+    //  {\n+    //      \"en\": \"English Version (en)\",\n+    //      \"fr\": \"French Version (fr)\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "339c42012b6e884d49462e92e19ca934d6ab854d"}, "originalPosition": 51}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "add232cf4279a6a8b70d513c56a1f6b18fd9c68a", "author": {"user": null}, "url": "https://github.com/geonetwork/core-geonetwork/commit/add232cf4279a6a8b70d513c56a1f6b18fd9c68a", "committedDate": "2020-06-18T22:28:01Z", "message": "use only 2letter keywords"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9b2e9c515f852c9e8803dadb546c2841c716b3af", "author": {"user": null}, "url": "https://github.com/geonetwork/core-geonetwork/commit/9b2e9c515f852c9e8803dadb546c2841c716b3af", "committedDate": "2020-06-24T20:55:50Z", "message": "add language conversion functionality to keywords api"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3MTk5NTc3", "url": "https://github.com/geonetwork/core-geonetwork/pull/4766#pullrequestreview-437199577", "createdAt": "2020-06-25T06:24:44Z", "commit": {"oid": "9b2e9c515f852c9e8803dadb546c2841c716b3af"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQwNjoyNDo0NFrOGos7Wg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQwNjoyNDo0NFrOGos7Wg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTMzMjMxNA==", "bodyText": "This seem not used?", "url": "https://github.com/geonetwork/core-geonetwork/pull/4766#discussion_r445332314", "createdAt": "2020-06-25T06:24:44Z", "author": {"login": "josegar74"}, "path": "web-ui/src/main/resources/catalog/components/thesaurus/ThesaurusDirective.js", "diffHunk": "@@ -266,11 +266,21 @@\n              scope.transformations.split(',') : [scope.transformations];\n              scope.maxTagsLabel = scope.maxTags || '\u221e';\n \n-             //Get langs of metadata\n-             var langs = [];\n-             _.each(JSON.parse(scope.lang),function(l){\n-                  langs.push(l.replace(\"#\",\"\"));\n+\n+             //examples;\n+             //hnap:{\"eng\":\"#eng\",\"fre\":\"#fra\"}\n+             //iso19139:{\"eng\":\"#EN\",\"fre\":\"#FR\",\"ger\":\"#DE\",\"chi\":\"#ZH\",\"ara\":\"#AR\",\"spa\":\"#ES\",\"rus\":\"#RU\"}\n+             scope.langConversion=JSON.parse(scope.lang); //dictionary, as above\n+\n+             // [\"eng\",\"fra\"]   OR [\"EN\",\"FR\",\"DE\",\"ZH\",\"AR\",\"ES\", \"RU\"]\n+             scope.langAchors = _.map(scope.langConversion,function(l){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b2e9c515f852c9e8803dadb546c2841c716b3af"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5ed5826c59a885ec6d115c407f3be109a1a2bd57", "author": {"user": null}, "url": "https://github.com/geonetwork/core-geonetwork/commit/5ed5826c59a885ec6d115c407f3be109a1a2bd57", "committedDate": "2020-06-25T16:18:47Z", "message": "remove unused code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a5f4ec37698d36fd5908e6cdee103d91146a8c3f", "author": {"user": null}, "url": "https://github.com/geonetwork/core-geonetwork/commit/a5f4ec37698d36fd5908e6cdee103d91146a8c3f", "committedDate": "2020-06-25T17:15:35Z", "message": "add missing test case file"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU4OTY1NjYz", "url": "https://github.com/geonetwork/core-geonetwork/pull/4766#pullrequestreview-458965663", "createdAt": "2020-07-31T07:20:45Z", "commit": {"oid": "a5f4ec37698d36fd5908e6cdee103d91146a8c3f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQwNzoyMDo0NVrOG5-igA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQwNzoyMDo0NVrOG5-igA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzQ0NjY1Ng==", "bodyText": "This looks to be failing when editing an english record using UI in french for example\n\nSomething to fix?", "url": "https://github.com/geonetwork/core-geonetwork/pull/4766#discussion_r463446656", "createdAt": "2020-07-31T07:20:45Z", "author": {"login": "fxprunayre"}, "path": "web-ui/src/main/resources/catalog/components/thesaurus/ThesaurusService.js", "diffHunk": "@@ -91,12 +123,36 @@\n               );\n             };\n \n+            var getUILangs = function() {\n+                  var currentUILang_3char = gnLangs.detectLang(\n+                                              gnGlobalSettings.gnCfg.langDetector,\n+                                              gnGlobalSettings\n+                                            );\n+                  var currentUILang2_3char = gnCurrentEdit.allLanguages.iso2code[currentUILang_3char].replace(\"#\",\"\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a5f4ec37698d36fd5908e6cdee103d91146a8c3f"}, "originalPosition": 84}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1581, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}