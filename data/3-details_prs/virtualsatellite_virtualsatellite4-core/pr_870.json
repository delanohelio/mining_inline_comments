{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMwODY4NTEw", "number": 870, "title": "Added CorsFilter to handle CORS requests", "bodyText": "The filter appends the required headers for the CORS Requests. This feature is needed to call the Server API e.g. from JavaScript running in the Browser.\nCloses #826", "createdAt": "2020-12-02T09:13:22Z", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/870", "merged": true, "mergeCommit": {"oid": "34719b35b06a2244b49b128c0a68302097181c53"}, "closed": true, "closedAt": "2021-01-25T10:48:34Z", "author": {"login": "JAmmermann-DLR"}, "timelineItems": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdhimiUAH2gAyNTMwODY4NTEwOjY0YmI5NWQ2NTYwYzg4NjdjNDI4YzQyYWVjY2ZjYTA5MmJlZTNhMjE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdzkouJAFqTU3NTI3NDcxMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "64bb95d6560c8867c428c42aeccfca092bee3a21", "author": {"user": {"login": "JAmmermann-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/64bb95d6560c8867c428c42aeccfca092bee3a21", "committedDate": "2020-11-30T10:15:36Z", "message": "Add CorsFilter and test case - (Task #826)\n\nAdd a filter that handles CORS requests\n\n---\nTask #826: Add CORS Headers to Server Response"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b8b17e52fbcb98cd4754605adee7e037ab8c4561", "author": {"user": {"login": "JAmmermann-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/b8b17e52fbcb98cd4754605adee7e037ab8c4561", "committedDate": "2020-11-30T11:53:06Z", "message": "Reset the system property in the AuthTestResourceTest - (Task #826)\n\n---\nTask #826: Add CORS Headers to Server Response"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "34d03453436ba14deb35eff73d504ef3f183673f", "author": {"user": {"login": "JAmmermann-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/34d03453436ba14deb35eff73d504ef3f183673f", "committedDate": "2020-12-02T09:07:45Z", "message": "Minor refactoring - (Task #826)\n\n---\nTask #826: Add CORS Headers to Server Response"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c418bbaf16d33c70503230ca7c83551c238db1b1", "author": {"user": {"login": "JAmmermann-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/c418bbaf16d33c70503230ca7c83551c238db1b1", "committedDate": "2020-12-02T09:07:54Z", "message": "Merge branch 'development' into feature/task_826-Add_CORS_Headers_to_Server"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e317139335b9b6ee41c894eaaa0a2cf83a04bf77", "author": {"user": {"login": "JAmmermann-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/e317139335b9b6ee41c894eaaa0a2cf83a04bf77", "committedDate": "2020-12-04T09:30:40Z", "message": "Merge branch 'development' into feature/task_826-Add_CORS_Headers_to_Server"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6aecb73923fdeda39f43af9103be4434c7628f2e", "author": {"user": {"login": "SaMuellerDLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/6aecb73923fdeda39f43af9103be4434c7628f2e", "committedDate": "2020-12-04T14:22:53Z", "message": "Extended Github actions CI to upload surefire reports - (Task #826)\n\n\n---\nTask #826: Add CORS Headers to Server Response"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d50a099376c06cd67fb809699ff19bc57821e44", "author": {"user": {"login": "SaMuellerDLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/8d50a099376c06cd67fb809699ff19bc57821e44", "committedDate": "2020-12-04T14:34:49Z", "message": "Trying out path from CI log - (Task #826)\n\n\n---\nTask #826: Add CORS Headers to Server Response"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89148f335cedea5a48f0db1d7af505010fcc1217", "author": {"user": {"login": "SaMuellerDLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/89148f335cedea5a48f0db1d7af505010fcc1217", "committedDate": "2020-12-04T14:57:05Z", "message": "Trying to generalize surfire upload logging - (Task #826)\n\n\n---\nTask #826: Add CORS Headers to Server Response"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b744e4f02a6b06e5823bf356c992cd2134ba4847", "author": {"user": {"login": "SaMuellerDLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/b744e4f02a6b06e5823bf356c992cd2134ba4847", "committedDate": "2020-12-04T18:45:54Z", "message": "Upload surefire reports with glob - (Task #826)\n\n\n---\nTask #826: Add CORS Headers to Server Response"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b94f87a675ee1dc2865d12a6d62be151b457bb41", "author": {"user": {"login": "JAmmermann-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/b94f87a675ee1dc2865d12a6d62be151b457bb41", "committedDate": "2020-12-11T09:53:10Z", "message": "Log system properties - (Task #826)\n\n---\nTask #826: Add CORS Headers to Server Response"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e4144e64e85009a9ae53068fe85a06b32934bb80", "author": {"user": {"login": "JAmmermann-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/e4144e64e85009a9ae53068fe85a06b32934bb80", "committedDate": "2020-12-11T10:47:36Z", "message": "Improve system property log - (Task #826)\n\n---\nTask #826: Add CORS Headers to Server Response"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "accae114c4aaa366fed418a52dd7dc79be7db504", "author": {"user": {"login": "JAmmermann-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/accae114c4aaa366fed418a52dd7dc79be7db504", "committedDate": "2020-12-11T12:04:36Z", "message": "Try to avoid system property cashing in HttpURLConnection  - (Task #826)\n\nPut your Message here.\n\n---\nTask #826: Add CORS Headers to Server Response"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2c88305a24454f5c3829f399bef84c6e7a6b85df", "author": {"user": {"login": "JAmmermann-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/2c88305a24454f5c3829f399bef84c6e7a6b85df", "committedDate": "2021-01-11T12:12:46Z", "message": "Set system property in AJettyServerTest - (Task #826)\n\n---\nTask #826: Add CORS Headers to Server Response"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5d3c52acaf3d6a7e82f8692578089a7fe8425cda", "author": {"user": {"login": "JAmmermann-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/5d3c52acaf3d6a7e82f8692578089a7fe8425cda", "committedDate": "2021-01-11T12:57:44Z", "message": "Remove debug output - (Task #826)\n\n---\nTask #826: Add CORS Headers to Server Response"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "52fcccfba908e95797e404f9920ef15899b1134d", "author": {"user": {"login": "JAmmermann-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/52fcccfba908e95797e404f9920ef15899b1134d", "committedDate": "2021-01-11T13:06:03Z", "message": "Merge branch 'development' into\nfeature/task_826-Add_CORS_Headers_to_Server\n\nConflicts:\n\t.github/workflows/main.yml"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTcwMjMzOTY2", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/870#pullrequestreview-570233966", "createdAt": "2021-01-18T07:46:44Z", "commit": {"oid": "52fcccfba908e95797e404f9920ef15899b1134d"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xOFQwNzo0Njo0NFrOIVdIJg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xOFQwNzo0Njo0NFrOIVdIJg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1OTM2ODIzMA==", "bodyText": "What is the purpose of the comment here?", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/870#discussion_r559368230", "createdAt": "2021-01-18T07:46:44Z", "author": {"login": "SaMuellerDLR"}, "path": "de.dlr.sc.virsat.server/src/de/dlr/sc/virsat/server/auth/filter/CorsFilter.java", "diffHunk": "@@ -0,0 +1,78 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 German Aerospace Center (DLR), Simulation and Software Technology, Germany.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0.\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *******************************************************************************/\n+package de.dlr.sc.virsat.server.auth.filter;\n+\n+import java.io.IOException;\n+\n+import javax.ws.rs.container.ContainerRequestContext;\n+import javax.ws.rs.container.ContainerRequestFilter;\n+import javax.ws.rs.container.ContainerResponseContext;\n+import javax.ws.rs.container.ContainerResponseFilter;\n+import javax.ws.rs.container.PreMatching;\n+import javax.ws.rs.core.Response;\n+\n+import org.eclipse.jetty.http.HttpMethod;\n+\n+/**\n+ * A filter that handles CORS requests\n+ */\n+@PreMatching\n+public class CorsFilter implements ContainerRequestFilter, ContainerResponseFilter {\n+\n+\tpublic static final String AC_ALLOW_CREDENTIALS = \"Access-Control-Allow-Credentials\";\n+\tpublic static final String AC_ALLOW_METHODS = \"Access-Control-Allow-Methods\";\n+\tpublic static final String AC_ALLOW_HEADERS = \"Access-Control-Allow-Headers\";\n+\tpublic static final String AC_ALLOW_ORIGIN = \"Access-Control-Allow-Origin\";\n+\t\n+\tpublic static final String AC_ALLOWED_CREDENTIALS = \"true\";\n+\tpublic static final String AC_ALLOWED_METHODS = \"GET, POST, PUT, DELETE, OPTIONS, HEAD\";\n+\tpublic static final String AC_ALLOWED_HEADERS = \"\"; //\"X-Requested-With, Authorization, Accept-Version, Content-MD5, CSRF-Token, Content-Type\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "52fcccfba908e95797e404f9920ef15899b1134d"}, "originalPosition": 36}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb77a720e1b9ecf5fbd30d75395677aad500dabb", "author": {"user": {"login": "JAmmermann-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/eb77a720e1b9ecf5fbd30d75395677aad500dabb", "committedDate": "2021-01-20T12:22:22Z", "message": "Remove comment due to review - (Task #826)\n\n---\nTask #826: Add CORS Headers to Server Response"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTc1Mjc0NzEw", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/870#pullrequestreview-575274710", "createdAt": "2021-01-25T10:48:26Z", "commit": {"oid": "eb77a720e1b9ecf5fbd30d75395677aad500dabb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 434, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}