{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE0MDA4NDg0", "number": 594, "title": "Added BeanUnitProperty Factory - (Task #286)", "bodyText": "Added BeanUnitProperty Factory\n\nTask #286: Handle different property types in BeanIndependenceSolver", "createdAt": "2020-05-06T10:25:49Z", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/594", "merged": true, "mergeCommit": {"oid": "5370382209da6050330f5723270835abc5923ec9"}, "closed": true, "closedAt": "2020-06-03T07:12:12Z", "author": {"login": "christoph-pietsch-DLR"}, "timelineItems": {"totalCount": 34, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcel0tMAH2gAyNDE0MDA4NDg0Ojk3NDkzZDdkYzcwY2I0MmQ1MWRmYjE2M2U0OWQ0YjAzYmMyN2UyYzQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcnS26eAH2gAyNDE0MDA4NDg0OjQ3NmZjODc3MjJiYWE4ZGM3ZmYzODQzZjk1M2U4NjIzNzYyNWQ4MTg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "97493d7dc70cb42d51dfb163e49d4b03bc27e2c4", "author": {"user": {"login": "christoph-pietsch-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/97493d7dc70cb42d51dfb163e49d4b03bc27e2c4", "committedDate": "2020-05-06T10:07:52Z", "message": "Added BeanUnitProperty Factory - (Task #286)\n\nAdded BeanUnitProperty Factory\n\n---\nTask #286: Handle different property types in BeanIndependenceSolver"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1c22212ed4f07247f9e2ff6ddf665f85b491cbca", "author": {"user": {"login": "christoph-pietsch-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/1c22212ed4f07247f9e2ff6ddf665f85b491cbca", "committedDate": "2020-05-06T11:23:57Z", "message": "Removed unused imports - (Task #286)\n\nRemoved unused imports\n\n---\nTask #286: Handle different property types in BeanIndependenceSolver"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3c0d27311521cf8871dea15e76ece7b6d75b1d36", "author": {"user": {"login": "christoph-pietsch-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/3c0d27311521cf8871dea15e76ece7b6d75b1d36", "committedDate": "2020-05-06T12:04:22Z", "message": "Factory with parameters - (Task #286)\n\nFactory with parameters\n\n---\nTask #286: Handle different property types in BeanIndependenceSolver"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "44e2ff7c9b3832582f3071672e80e81e8774a68b", "author": {"user": {"login": "christoph-pietsch-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/44e2ff7c9b3832582f3071672e80e81e8774a68b", "committedDate": "2020-05-06T13:37:01Z", "message": "Merge remote-tracking branch 'origin/development' into task_286-Handle_different_prop"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "93716e495580eaa5297aa59541e6a5fd695ab92a", "author": {"user": {"login": "christoph-pietsch-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/93716e495580eaa5297aa59541e6a5fd695ab92a", "committedDate": "2020-05-11T12:17:48Z", "message": "WIP - (Task #286)\n\nWIP\n\n---\nTask #286: Handle different property types in BeanIndependenceSolver"}, "afterCommit": {"oid": "e0e4fe52f76bebfe55ad317bdc52ebc68545fe4c", "author": {"user": {"login": "christoph-pietsch-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/e0e4fe52f76bebfe55ad317bdc52ebc68545fe4c", "committedDate": "2020-05-11T14:47:03Z", "message": "WIP - (Task #286)\n\nWIP\n\n---\nTask #286: Handle different property types in BeanIndependenceSolver"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "543bcf7d193d86333962b609e6d71864206a7457", "author": {"user": {"login": "christoph-pietsch-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/543bcf7d193d86333962b609e6d71864206a7457", "committedDate": "2020-05-12T08:05:02Z", "message": "WIP - (Task #286)\n\nWIP\n\n---\nTask #286: Handle different property types in BeanIndependenceSolver"}, "afterCommit": {"oid": "ceff4127d8f9b5d781e29b984ff469cd26d9c76e", "author": {"user": {"login": "christoph-pietsch-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/ceff4127d8f9b5d781e29b984ff469cd26d9c76e", "committedDate": "2020-05-12T09:38:32Z", "message": "WIP\n\n---\nTask #286: Handle different property types in BeanIndependenceSolver"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ceff4127d8f9b5d781e29b984ff469cd26d9c76e", "author": {"user": {"login": "christoph-pietsch-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/ceff4127d8f9b5d781e29b984ff469cd26d9c76e", "committedDate": "2020-05-12T09:38:32Z", "message": "WIP\n\n---\nTask #286: Handle different property types in BeanIndependenceSolver"}, "afterCommit": {"oid": "6147bda96feedec331146bc608fe831bec1976cb", "author": {"user": {"login": "christoph-pietsch-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/6147bda96feedec331146bc608fe831bec1976cb", "committedDate": "2020-05-12T09:54:40Z", "message": "WIP - (Task #286)\n\nWIP.\n\n---\nTask #286: Handle different property types in BeanIndependenceSolver"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "59f3860bdf893d1fa9ebfe24b438fd2bb4a9c714", "author": {"user": {"login": "christoph-pietsch-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/59f3860bdf893d1fa9ebfe24b438fd2bb4a9c714", "committedDate": "2020-05-25T10:16:07Z", "message": "Add: BeanPropertyFactory - (Task #286)\n\n---\nTask #286: Handle different property types in BeanIndependenceSolver"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "43d49faa2e935f067ef4fed6c8fec26e494a0cfb", "author": {"user": {"login": "christoph-pietsch-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/43d49faa2e935f067ef4fed6c8fec26e494a0cfb", "committedDate": "2020-05-25T09:43:12Z", "message": "Some fixes - (Task #286)\n\n---\nTask #286: Handle different property types in BeanIndependenceSolver"}, "afterCommit": {"oid": "59f3860bdf893d1fa9ebfe24b438fd2bb4a9c714", "author": {"user": {"login": "christoph-pietsch-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/59f3860bdf893d1fa9ebfe24b438fd2bb4a9c714", "committedDate": "2020-05-25T10:16:07Z", "message": "Add: BeanPropertyFactory - (Task #286)\n\n---\nTask #286: Handle different property types in BeanIndependenceSolver"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3NjE3MjUx", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/594#pullrequestreview-417617251", "createdAt": "2020-05-25T10:26:22Z", "commit": {"oid": "59f3860bdf893d1fa9ebfe24b438fd2bb4a9c714"}, "state": "APPROVED", "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQxMDoyNjoyMlrOGZ8mVQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQxMDozMjoyMlrOGZ8vtQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTg2MDQzNw==", "bodyText": "Lets add a short description so other people know what this class does.", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/594#discussion_r429860437", "createdAt": "2020-05-25T10:26:22Z", "author": {"login": "SaMuellerDLR"}, "path": "de.dlr.sc.virsat.graphiti/src/de/dlr/sc/virsat/graphiti/diagram/BeanPropertyFactory.java", "diffHunk": "@@ -0,0 +1,93 @@\n+/*******************************************************************************\n+ * Copyright (c) 2008-2019 German Aerospace Center (DLR), Simulation and Software Technology, Germany.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0.\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *******************************************************************************/\n+package de.dlr.sc.virsat.graphiti.diagram;\n+\n+import org.eclipse.emf.ecore.EObject;\n+\n+import de.dlr.sc.virsat.model.concept.types.IBeanObject;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyBoolean;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyEReference;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyEnum;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyFloat;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyInt;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyResource;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyString;\n+import de.dlr.sc.virsat.model.dvlm.categories.ATypeDefinition;\n+import de.dlr.sc.virsat.model.dvlm.categories.ATypeInstance;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.BooleanProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.EReferenceProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.EnumProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.FloatProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.IntProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.ResourceProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.StringProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.util.PropertydefinitionsSwitch;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertyinstances.APropertyInstance;\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "59f3860bdf893d1fa9ebfe24b438fd2bb4a9c714"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTg2MDcxNA==", "bodyText": "We can just return the newly created object.", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/594#discussion_r429860714", "createdAt": "2020-05-25T10:27:04Z", "author": {"login": "SaMuellerDLR"}, "path": "de.dlr.sc.virsat.graphiti/src/de/dlr/sc/virsat/graphiti/diagram/BeanPropertyFactory.java", "diffHunk": "@@ -0,0 +1,93 @@\n+/*******************************************************************************\n+ * Copyright (c) 2008-2019 German Aerospace Center (DLR), Simulation and Software Technology, Germany.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0.\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *******************************************************************************/\n+package de.dlr.sc.virsat.graphiti.diagram;\n+\n+import org.eclipse.emf.ecore.EObject;\n+\n+import de.dlr.sc.virsat.model.concept.types.IBeanObject;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyBoolean;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyEReference;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyEnum;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyFloat;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyInt;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyResource;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyString;\n+import de.dlr.sc.virsat.model.dvlm.categories.ATypeDefinition;\n+import de.dlr.sc.virsat.model.dvlm.categories.ATypeInstance;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.BooleanProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.EReferenceProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.EnumProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.FloatProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.IntProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.ResourceProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.StringProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.util.PropertydefinitionsSwitch;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertyinstances.APropertyInstance;\n+\n+public class BeanPropertyFactory {\n+\n+\n+\t/**\n+\t * @param object ATypeinstance object\n+\t * @return beanobject\n+\t */\n+\tpublic IBeanObject<? extends APropertyInstance> getInstanceFor(ATypeInstance object) {\n+\t\tATypeDefinition type = object.getType();\n+\t\tBeanPropertyFactorySwitch bpfs = new BeanPropertyFactorySwitch();\n+\t\tIBeanObject<? extends APropertyInstance> bean = bpfs.doSwitch(type);\n+\t\tbean.setATypeInstance(object);\n+\t\treturn bean;\n+\t}\n+\n+\tstatic class BeanPropertyFactorySwitch extends PropertydefinitionsSwitch<IBeanObject<? extends APropertyInstance>> {\n+\n+\t\t@Override\n+\t\tpublic IBeanObject<? extends APropertyInstance> caseFloatProperty(FloatProperty object) {\n+\t\t\tIBeanObject<? extends APropertyInstance> beanObjectPropertyFloat = new BeanPropertyFloat();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "59f3860bdf893d1fa9ebfe24b438fd2bb4a9c714"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTg2MDgzOA==", "bodyText": "Lets make the this internal class private.", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/594#discussion_r429860838", "createdAt": "2020-05-25T10:27:24Z", "author": {"login": "SaMuellerDLR"}, "path": "de.dlr.sc.virsat.graphiti/src/de/dlr/sc/virsat/graphiti/diagram/BeanPropertyFactory.java", "diffHunk": "@@ -0,0 +1,93 @@\n+/*******************************************************************************\n+ * Copyright (c) 2008-2019 German Aerospace Center (DLR), Simulation and Software Technology, Germany.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0.\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *******************************************************************************/\n+package de.dlr.sc.virsat.graphiti.diagram;\n+\n+import org.eclipse.emf.ecore.EObject;\n+\n+import de.dlr.sc.virsat.model.concept.types.IBeanObject;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyBoolean;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyEReference;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyEnum;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyFloat;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyInt;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyResource;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyString;\n+import de.dlr.sc.virsat.model.dvlm.categories.ATypeDefinition;\n+import de.dlr.sc.virsat.model.dvlm.categories.ATypeInstance;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.BooleanProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.EReferenceProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.EnumProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.FloatProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.IntProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.ResourceProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.StringProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.util.PropertydefinitionsSwitch;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertyinstances.APropertyInstance;\n+\n+public class BeanPropertyFactory {\n+\n+\n+\t/**\n+\t * @param object ATypeinstance object\n+\t * @return beanobject\n+\t */\n+\tpublic IBeanObject<? extends APropertyInstance> getInstanceFor(ATypeInstance object) {\n+\t\tATypeDefinition type = object.getType();\n+\t\tBeanPropertyFactorySwitch bpfs = new BeanPropertyFactorySwitch();\n+\t\tIBeanObject<? extends APropertyInstance> bean = bpfs.doSwitch(type);\n+\t\tbean.setATypeInstance(object);\n+\t\treturn bean;\n+\t}\n+\n+\tstatic class BeanPropertyFactorySwitch extends PropertydefinitionsSwitch<IBeanObject<? extends APropertyInstance>> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "59f3860bdf893d1fa9ebfe24b438fd2bb4a9c714"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTg2MTAxOQ==", "bodyText": "Short descritpion of method and params would be nice.", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/594#discussion_r429861019", "createdAt": "2020-05-25T10:27:48Z", "author": {"login": "SaMuellerDLR"}, "path": "de.dlr.sc.virsat.graphiti/src/de/dlr/sc/virsat/graphiti/diagram/BeanPropertyFactory.java", "diffHunk": "@@ -0,0 +1,93 @@\n+/*******************************************************************************\n+ * Copyright (c) 2008-2019 German Aerospace Center (DLR), Simulation and Software Technology, Germany.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0.\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *******************************************************************************/\n+package de.dlr.sc.virsat.graphiti.diagram;\n+\n+import org.eclipse.emf.ecore.EObject;\n+\n+import de.dlr.sc.virsat.model.concept.types.IBeanObject;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyBoolean;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyEReference;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyEnum;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyFloat;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyInt;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyResource;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyString;\n+import de.dlr.sc.virsat.model.dvlm.categories.ATypeDefinition;\n+import de.dlr.sc.virsat.model.dvlm.categories.ATypeInstance;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.BooleanProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.EReferenceProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.EnumProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.FloatProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.IntProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.ResourceProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.StringProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.util.PropertydefinitionsSwitch;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertyinstances.APropertyInstance;\n+\n+public class BeanPropertyFactory {\n+\n+\n+\t/**", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "59f3860bdf893d1fa9ebfe24b438fd2bb4a9c714"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTg2MTI5OQ==", "bodyText": "Maybe we can make the switch a member variable. I dont think we need to create a new one for every getInstanceFor call.", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/594#discussion_r429861299", "createdAt": "2020-05-25T10:28:30Z", "author": {"login": "SaMuellerDLR"}, "path": "de.dlr.sc.virsat.graphiti/src/de/dlr/sc/virsat/graphiti/diagram/BeanPropertyFactory.java", "diffHunk": "@@ -0,0 +1,93 @@\n+/*******************************************************************************\n+ * Copyright (c) 2008-2019 German Aerospace Center (DLR), Simulation and Software Technology, Germany.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0.\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *******************************************************************************/\n+package de.dlr.sc.virsat.graphiti.diagram;\n+\n+import org.eclipse.emf.ecore.EObject;\n+\n+import de.dlr.sc.virsat.model.concept.types.IBeanObject;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyBoolean;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyEReference;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyEnum;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyFloat;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyInt;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyResource;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyString;\n+import de.dlr.sc.virsat.model.dvlm.categories.ATypeDefinition;\n+import de.dlr.sc.virsat.model.dvlm.categories.ATypeInstance;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.BooleanProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.EReferenceProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.EnumProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.FloatProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.IntProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.ResourceProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.StringProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.util.PropertydefinitionsSwitch;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertyinstances.APropertyInstance;\n+\n+public class BeanPropertyFactory {\n+\n+\n+\t/**\n+\t * @param object ATypeinstance object\n+\t * @return beanobject\n+\t */\n+\tpublic IBeanObject<? extends APropertyInstance> getInstanceFor(ATypeInstance object) {\n+\t\tATypeDefinition type = object.getType();\n+\t\tBeanPropertyFactorySwitch bpfs = new BeanPropertyFactorySwitch();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "59f3860bdf893d1fa9ebfe24b438fd2bb4a9c714"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTg2MTUyMA==", "bodyText": "Test class doesnt seem to be registered in all tests?", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/594#discussion_r429861520", "createdAt": "2020-05-25T10:29:07Z", "author": {"login": "SaMuellerDLR"}, "path": "de.dlr.sc.virsat.graphiti.test/src/de/dlr/sc/virsat/graphiti/diagram/BeanPropertyFactoryTest.java", "diffHunk": "@@ -0,0 +1,132 @@\n+/*******************************************************************************\n+ * Copyright (c) 2008-2019 German Aerospace Center (DLR), Simulation and Software Technology, Germany.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0.\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *******************************************************************************/\n+package de.dlr.sc.virsat.graphiti.diagram;\n+\n+import static org.junit.Assert.assertTrue;\n+\n+import org.junit.Test;\n+\n+import de.dlr.sc.virsat.model.concept.types.IBeanObject;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyBoolean;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyEReference;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyEnum;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyFloat;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyInt;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyResource;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyString;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.BooleanProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.EReferenceProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.EnumProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.EnumValueDefinition;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.FloatProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.IntProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.PropertydefinitionsFactory;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.ResourceProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.StringProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertyinstances.APropertyInstance;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertyinstances.EReferencePropertyInstance;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertyinstances.EnumUnitPropertyInstance;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertyinstances.PropertyinstancesFactory;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertyinstances.ResourcePropertyInstance;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertyinstances.ValuePropertyInstance;\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "59f3860bdf893d1fa9ebfe24b438fd2bb4a9c714"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTg2MjQwMw==", "bodyText": "Do we need to setup enum values for the test case?\nIf not lets remove this to keep it simple.", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/594#discussion_r429862403", "createdAt": "2020-05-25T10:31:12Z", "author": {"login": "SaMuellerDLR"}, "path": "de.dlr.sc.virsat.graphiti.test/src/de/dlr/sc/virsat/graphiti/diagram/BeanPropertyFactoryTest.java", "diffHunk": "@@ -0,0 +1,132 @@\n+/*******************************************************************************\n+ * Copyright (c) 2008-2019 German Aerospace Center (DLR), Simulation and Software Technology, Germany.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0.\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *******************************************************************************/\n+package de.dlr.sc.virsat.graphiti.diagram;\n+\n+import static org.junit.Assert.assertTrue;\n+\n+import org.junit.Test;\n+\n+import de.dlr.sc.virsat.model.concept.types.IBeanObject;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyBoolean;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyEReference;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyEnum;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyFloat;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyInt;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyResource;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyString;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.BooleanProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.EReferenceProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.EnumProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.EnumValueDefinition;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.FloatProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.IntProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.PropertydefinitionsFactory;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.ResourceProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.StringProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertyinstances.APropertyInstance;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertyinstances.EReferencePropertyInstance;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertyinstances.EnumUnitPropertyInstance;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertyinstances.PropertyinstancesFactory;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertyinstances.ResourcePropertyInstance;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertyinstances.ValuePropertyInstance;\n+\n+\n+public class BeanPropertyFactoryTest {\n+\n+\t@Test\n+\tpublic void testBeanPropertyFloatFromFactory() {\n+\t\tValuePropertyInstance vpi = PropertyinstancesFactory.eINSTANCE.createValuePropertyInstance();\n+\t\tFloatProperty type = PropertydefinitionsFactory.eINSTANCE.createFloatProperty();\n+\t\tvpi.setType(type);\n+\n+\t\tBeanPropertyFactory bpf = new BeanPropertyFactory();\n+\t\tIBeanObject<? extends APropertyInstance> beanPropertyFloat = bpf.getInstanceFor(vpi);\n+\t\tassertTrue(beanPropertyFloat instanceof BeanPropertyFloat);\n+\t\tassertTrue(beanPropertyFloat.getTypeInstance() instanceof ValuePropertyInstance);\n+\t}\n+\n+\t@Test\n+\tpublic void testBeanPropertyIntFromFactory() {\n+\t\tValuePropertyInstance vpi = PropertyinstancesFactory.eINSTANCE.createValuePropertyInstance();\n+\t\tIntProperty type = PropertydefinitionsFactory.eINSTANCE.createIntProperty();\n+\t\tvpi.setType(type);\n+\n+\t\tBeanPropertyFactory bpf = new BeanPropertyFactory();\n+\t\tIBeanObject<? extends APropertyInstance> beanPropertyInt = bpf.getInstanceFor(vpi);\n+\t\tassertTrue(beanPropertyInt instanceof BeanPropertyInt);\n+\t\tassertTrue(beanPropertyInt.getTypeInstance() instanceof ValuePropertyInstance);\n+\t}\n+\n+\t@Test\n+\tpublic void testBeanPropertyBooleanFromFactory() {\n+\t\tValuePropertyInstance vpi = PropertyinstancesFactory.eINSTANCE.createValuePropertyInstance();\n+\t\tBooleanProperty type = PropertydefinitionsFactory.eINSTANCE.createBooleanProperty();\n+\t\tvpi.setType(type);\n+\n+\t\tBeanPropertyFactory bpf = new BeanPropertyFactory();\n+\t\tIBeanObject<? extends APropertyInstance> beanPropertyBoolean = bpf.getInstanceFor(vpi);\n+\t\tassertTrue(beanPropertyBoolean instanceof BeanPropertyBoolean);\n+\t\tassertTrue(beanPropertyBoolean.getTypeInstance() instanceof ValuePropertyInstance);\n+\t}\n+\n+\t@Test\n+\tpublic void testBeanPropertyEnumFromFactory() {\n+\t\tEnumValueDefinition evd1 = PropertydefinitionsFactory.eINSTANCE.createEnumValueDefinition();\n+\t\tEnumProperty enumProperty = PropertydefinitionsFactory.eINSTANCE.createEnumProperty();\n+\t\tenumProperty.getValues().add(evd1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "59f3860bdf893d1fa9ebfe24b438fd2bb4a9c714"}, "originalPosition": 83}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTg2MjgzNw==", "bodyText": "Rather than an instanceof check here I think we can use an equals check. E.g.\nassertEquals(vpi, beanPropertyFloat.getTypeInstance());", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/594#discussion_r429862837", "createdAt": "2020-05-25T10:32:22Z", "author": {"login": "SaMuellerDLR"}, "path": "de.dlr.sc.virsat.graphiti.test/src/de/dlr/sc/virsat/graphiti/diagram/BeanPropertyFactoryTest.java", "diffHunk": "@@ -0,0 +1,132 @@\n+/*******************************************************************************\n+ * Copyright (c) 2008-2019 German Aerospace Center (DLR), Simulation and Software Technology, Germany.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0.\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *******************************************************************************/\n+package de.dlr.sc.virsat.graphiti.diagram;\n+\n+import static org.junit.Assert.assertTrue;\n+\n+import org.junit.Test;\n+\n+import de.dlr.sc.virsat.model.concept.types.IBeanObject;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyBoolean;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyEReference;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyEnum;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyFloat;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyInt;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyResource;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyString;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.BooleanProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.EReferenceProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.EnumProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.EnumValueDefinition;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.FloatProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.IntProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.PropertydefinitionsFactory;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.ResourceProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.StringProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertyinstances.APropertyInstance;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertyinstances.EReferencePropertyInstance;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertyinstances.EnumUnitPropertyInstance;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertyinstances.PropertyinstancesFactory;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertyinstances.ResourcePropertyInstance;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertyinstances.ValuePropertyInstance;\n+\n+\n+public class BeanPropertyFactoryTest {\n+\n+\t@Test\n+\tpublic void testBeanPropertyFloatFromFactory() {\n+\t\tValuePropertyInstance vpi = PropertyinstancesFactory.eINSTANCE.createValuePropertyInstance();\n+\t\tFloatProperty type = PropertydefinitionsFactory.eINSTANCE.createFloatProperty();\n+\t\tvpi.setType(type);\n+\n+\t\tBeanPropertyFactory bpf = new BeanPropertyFactory();\n+\t\tIBeanObject<? extends APropertyInstance> beanPropertyFloat = bpf.getInstanceFor(vpi);\n+\t\tassertTrue(beanPropertyFloat instanceof BeanPropertyFloat);\n+\t\tassertTrue(beanPropertyFloat.getTypeInstance() instanceof ValuePropertyInstance);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "59f3860bdf893d1fa9ebfe24b438fd2bb4a9c714"}, "originalPosition": 52}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3NjIxMDI4", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/594#pullrequestreview-417621028", "createdAt": "2020-05-25T10:33:57Z", "commit": {"oid": "59f3860bdf893d1fa9ebfe24b438fd2bb4a9c714"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d64873e420028d2770c3d64f2422fc6ed3b39211", "author": {"user": {"login": "christoph-pietsch-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/d64873e420028d2770c3d64f2422fc6ed3b39211", "committedDate": "2020-05-25T11:21:08Z", "message": "Resolved remarks - (Task #286)\n\n---\nTask #286: Handle different property types in BeanIndependenceSolver"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3NjcxNjQy", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/594#pullrequestreview-417671642", "createdAt": "2020-05-25T12:17:11Z", "commit": {"oid": "d64873e420028d2770c3d64f2422fc6ed3b39211"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQxMjoxNzoxMVrOGZ_Q_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQxMjoxNzoxMVrOGZ_Q_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTkwNDEyNg==", "bodyText": "Should still be static (see spotbugs error message in build).", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/594#discussion_r429904126", "createdAt": "2020-05-25T12:17:11Z", "author": {"login": "SaMuellerDLR"}, "path": "de.dlr.sc.virsat.graphiti/src/de/dlr/sc/virsat/graphiti/diagram/BeanPropertyFactory.java", "diffHunk": "@@ -0,0 +1,94 @@\n+/*******************************************************************************\n+ * Copyright (c) 2008-2019 German Aerospace Center (DLR), Simulation and Software Technology, Germany.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0.\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *******************************************************************************/\n+package de.dlr.sc.virsat.graphiti.diagram;\n+\n+import org.eclipse.emf.ecore.EObject;\n+\n+import de.dlr.sc.virsat.model.concept.types.IBeanObject;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyBoolean;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyEReference;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyEnum;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyFloat;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyInt;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyResource;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyString;\n+import de.dlr.sc.virsat.model.dvlm.categories.ATypeDefinition;\n+import de.dlr.sc.virsat.model.dvlm.categories.ATypeInstance;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.BooleanProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.EReferenceProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.EnumProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.FloatProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.IntProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.ResourceProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.StringProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.util.PropertydefinitionsSwitch;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertyinstances.APropertyInstance;\n+\n+/**\n+ * This factory class produces Bean Objects, wrapping certain BeanProperties for a given object.\n+ */\n+public class BeanPropertyFactory {\n+\n+\tprivate BeanPropertyFactorySwitch bpfs;\n+\n+\t/**\n+\t * @param object Object that shall be wrapped into Bean Object\n+\t * @return Bean Object wrapper for object\n+\t */\n+\tpublic IBeanObject<? extends APropertyInstance> getInstanceFor(ATypeInstance object) {\n+\t\tATypeDefinition type = object.getType();\n+\t\tIBeanObject<? extends APropertyInstance> bean = bpfs.doSwitch(type);\n+\t\tbean.setATypeInstance(object);\n+\t\treturn bean;\n+\t}\n+\n+\tpublic BeanPropertyFactory() {\n+\t\tsuper();\n+\t\tbpfs = new BeanPropertyFactorySwitch();\n+\t}\n+\n+\tprivate class BeanPropertyFactorySwitch extends PropertydefinitionsSwitch<IBeanObject<? extends APropertyInstance>> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d64873e420028d2770c3d64f2422fc6ed3b39211"}, "originalPosition": 57}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3NjcyMzg4", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/594#pullrequestreview-417672388", "createdAt": "2020-05-25T12:18:37Z", "commit": {"oid": "d64873e420028d2770c3d64f2422fc6ed3b39211"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQxMjoxODozN1rOGZ_TTw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQxMjoxODozN1rOGZ_TTw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTkwNDcxOQ==", "bodyText": "Maybe declared the constructor at the top.\nAlso I am not sure if we need a constructor here.\nAny problem with just private BeanPropertyFactorySwitch bpfs = new BeanPropertyFactorySwitch();", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/594#discussion_r429904719", "createdAt": "2020-05-25T12:18:37Z", "author": {"login": "SaMuellerDLR"}, "path": "de.dlr.sc.virsat.graphiti/src/de/dlr/sc/virsat/graphiti/diagram/BeanPropertyFactory.java", "diffHunk": "@@ -0,0 +1,94 @@\n+/*******************************************************************************\n+ * Copyright (c) 2008-2019 German Aerospace Center (DLR), Simulation and Software Technology, Germany.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0.\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *******************************************************************************/\n+package de.dlr.sc.virsat.graphiti.diagram;\n+\n+import org.eclipse.emf.ecore.EObject;\n+\n+import de.dlr.sc.virsat.model.concept.types.IBeanObject;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyBoolean;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyEReference;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyEnum;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyFloat;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyInt;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyResource;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyString;\n+import de.dlr.sc.virsat.model.dvlm.categories.ATypeDefinition;\n+import de.dlr.sc.virsat.model.dvlm.categories.ATypeInstance;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.BooleanProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.EReferenceProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.EnumProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.FloatProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.IntProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.ResourceProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.StringProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.util.PropertydefinitionsSwitch;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertyinstances.APropertyInstance;\n+\n+/**\n+ * This factory class produces Bean Objects, wrapping certain BeanProperties for a given object.\n+ */\n+public class BeanPropertyFactory {\n+\n+\tprivate BeanPropertyFactorySwitch bpfs;\n+\n+\t/**\n+\t * @param object Object that shall be wrapped into Bean Object\n+\t * @return Bean Object wrapper for object\n+\t */\n+\tpublic IBeanObject<? extends APropertyInstance> getInstanceFor(ATypeInstance object) {\n+\t\tATypeDefinition type = object.getType();\n+\t\tIBeanObject<? extends APropertyInstance> bean = bpfs.doSwitch(type);\n+\t\tbean.setATypeInstance(object);\n+\t\treturn bean;\n+\t}\n+\n+\tpublic BeanPropertyFactory() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d64873e420028d2770c3d64f2422fc6ed3b39211"}, "originalPosition": 52}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb56532a781d7be5aa8a5285596825cd2c358fae", "author": {"user": {"login": "christoph-pietsch-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/eb56532a781d7be5aa8a5285596825cd2c358fae", "committedDate": "2020-05-25T12:29:14Z", "message": "Resolved remarks - (Task #286)\n\n---\nTask #286: Handle different property types in BeanIndependenceSolver"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "178391e64ed05f4444f421dcdbfc260e9ab8ea65", "author": {"user": {"login": "christoph-pietsch-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/178391e64ed05f4444f421dcdbfc260e9ab8ea65", "committedDate": "2020-05-25T13:01:04Z", "message": "Resolved merge conflict - (Task #286)\n\n---\nTask #286: Handle different property types in BeanIndependenceSolver"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e37c91fd44f293aa7dea9a06b444a41e9517d77e", "author": {"user": {"login": "christoph-pietsch-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/e37c91fd44f293aa7dea9a06b444a41e9517d77e", "committedDate": "2020-05-25T12:43:25Z", "message": "Resolved merge conflict - (Task #286)\n\n---\nTask #286: Handle different property types in BeanIndependenceSolver"}, "afterCommit": {"oid": "178391e64ed05f4444f421dcdbfc260e9ab8ea65", "author": {"user": {"login": "christoph-pietsch-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/178391e64ed05f4444f421dcdbfc260e9ab8ea65", "committedDate": "2020-05-25T13:01:04Z", "message": "Resolved merge conflict - (Task #286)\n\n---\nTask #286: Handle different property types in BeanIndependenceSolver"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3NzExMjY3", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/594#pullrequestreview-417711267", "createdAt": "2020-05-25T13:28:48Z", "commit": {"oid": "178391e64ed05f4444f421dcdbfc260e9ab8ea65"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQxMzoyODo0OFrOGaBKPw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQxMzoyOTozMFrOGaBLhg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTkzNTE2Nw==", "bodyText": "why cant we make it private static?", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/594#discussion_r429935167", "createdAt": "2020-05-25T13:28:48Z", "author": {"login": "SaMuellerDLR"}, "path": "de.dlr.sc.virsat.graphiti/src/de/dlr/sc/virsat/graphiti/diagram/BeanPropertyFactory.java", "diffHunk": "@@ -0,0 +1,93 @@\n+/*******************************************************************************\n+ * Copyright (c) 2008-2019 German Aerospace Center (DLR), Simulation and Software Technology, Germany.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0.\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *******************************************************************************/\n+package de.dlr.sc.virsat.graphiti.diagram;\n+\n+import org.eclipse.emf.ecore.EObject;\n+\n+import de.dlr.sc.virsat.model.concept.types.IBeanObject;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyBoolean;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyEReference;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyEnum;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyFloat;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyInt;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyResource;\n+import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyString;\n+import de.dlr.sc.virsat.model.dvlm.categories.ATypeDefinition;\n+import de.dlr.sc.virsat.model.dvlm.categories.ATypeInstance;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.BooleanProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.EReferenceProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.EnumProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.FloatProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.IntProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.ResourceProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.StringProperty;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.util.PropertydefinitionsSwitch;\n+import de.dlr.sc.virsat.model.dvlm.categories.propertyinstances.APropertyInstance;\n+\n+public class BeanPropertyFactory {\n+\n+\n+\t/**\n+\t * @param object ATypeinstance object\n+\t * @return beanobject\n+\t */\n+\tpublic IBeanObject<? extends APropertyInstance> getInstanceFor(ATypeInstance object) {\n+\t\tATypeDefinition type = object.getType();\n+\t\tBeanPropertyFactorySwitch bpfs = new BeanPropertyFactorySwitch();\n+\t\tIBeanObject<? extends APropertyInstance> bean = bpfs.doSwitch(type);\n+\t\tbean.setATypeInstance(object);\n+\t\treturn bean;\n+\t}\n+\n+\tstatic class BeanPropertyFactorySwitch extends PropertydefinitionsSwitch<IBeanObject<? extends APropertyInstance>> {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTg2MDgzOA=="}, "originalCommit": {"oid": "59f3860bdf893d1fa9ebfe24b438fd2bb4a9c714"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTkzNTQ5NA==", "bodyText": "I only now notice that the factory is in the graphiti plugin.\nMaybe we can move it to where the other bean factories are?\nI dont see this as a graphiti thing.", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/594#discussion_r429935494", "createdAt": "2020-05-25T13:29:30Z", "author": {"login": "SaMuellerDLR"}, "path": "de.dlr.sc.virsat.graphiti/src/de/dlr/sc/virsat/graphiti/diagram/BeanPropertyFactory.java", "diffHunk": "@@ -0,0 +1,89 @@\n+/*******************************************************************************\n+ * Copyright (c) 2008-2019 German Aerospace Center (DLR), Simulation and Software Technology, Germany.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0.\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *******************************************************************************/\n+package de.dlr.sc.virsat.graphiti.diagram;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "178391e64ed05f4444f421dcdbfc260e9ab8ea65"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "822e4657acd78c01082f6442505a9e1606a4dae1", "author": {"user": {"login": "christoph-pietsch-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/822e4657acd78c01082f6442505a9e1606a4dae1", "committedDate": "2020-05-25T13:51:28Z", "message": "Resolved remarks - (Task #286)\n\n---\nTask #286: Handle different property types in BeanIndependenceSolver"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f6304a453a0b95d51b7114fd09e5ac3c45233b06", "author": {"user": {"login": "christoph-pietsch-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/f6304a453a0b95d51b7114fd09e5ac3c45233b06", "committedDate": "2020-05-25T13:52:59Z", "message": "Resolved remarks - (Task #286)\n\n---\nTask #286: Handle different property types in BeanIndependenceSolver"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3ODE0Nzk0", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/594#pullrequestreview-417814794", "createdAt": "2020-05-25T17:03:59Z", "commit": {"oid": "f6304a453a0b95d51b7114fd09e5ac3c45233b06"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQxNzowNDowMFrOGaGZdw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQxNzowNDoyNlrOGaGZ3g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDAyMDk4Mw==", "bodyText": "I dont think this file should have changes.", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/594#discussion_r430020983", "createdAt": "2020-05-25T17:04:00Z", "author": {"login": "SaMuellerDLR"}, "path": "de.dlr.sc.virsat.model/src/de/dlr/sc/virsat/model/dvlm/roles/RightsHelper.java", "diffHunk": "@@ -1,109 +1,109 @@\n-/*******************************************************************************\n- * Copyright (c) 2008-2019 German Aerospace Center (DLR), Simulation and Software Technology, Germany.\n- *\n- * This program and the accompanying materials are made available under the\n- * terms of the Eclipse Public License 2.0 which is available at", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f6304a453a0b95d51b7114fd09e5ac3c45233b06"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDAyMTA4Ng==", "bodyText": "Since we arent registering any test cases here, I dont think this file should have changes.", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/594#discussion_r430021086", "createdAt": "2020-05-25T17:04:26Z", "author": {"login": "SaMuellerDLR"}, "path": "de.dlr.sc.virsat.graphiti.test/src/de/dlr/sc/virsat/graphiti/test/AllTests.java", "diffHunk": "@@ -19,20 +19,26 @@\n import junit.framework.JUnit4TestAdapter;\r\n \r\n \r\n+\r\n+\r\n+/**\r\n+ *\r\n+ */\r\n @RunWith(Suite.class)\r\n \r\n-@SuiteClasses({\r\n-\tBeanIndependenceSolverTest.class,\r\n-\tDiagramHelperTest.class,\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f6304a453a0b95d51b7114fd09e5ac3c45233b06"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cce491d6b81fcd6f91eea31d4bd370fd18cc23d4", "author": {"user": {"login": "christoph-pietsch-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/cce491d6b81fcd6f91eea31d4bd370fd18cc23d4", "committedDate": "2020-05-26T07:22:28Z", "message": "Resolved remarks - (Task #286)\n\n---\nTask #286: Handle different property types in BeanIndependenceSolver"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cabc6b7e4293aa9b5d3e57fc04b253a185b2ad9f", "author": {"user": {"login": "christoph-pietsch-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/cabc6b7e4293aa9b5d3e57fc04b253a185b2ad9f", "committedDate": "2020-05-26T07:31:58Z", "message": "Resolved remarks - (Task #286)\n\n---\nTask #286: Handle different property types in BeanIndependenceSolver"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MDQ4NTc3", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/594#pullrequestreview-418048577", "createdAt": "2020-05-26T07:47:24Z", "commit": {"oid": "cabc6b7e4293aa9b5d3e57fc04b253a185b2ad9f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MDUxOTc2", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/594#pullrequestreview-418051976", "createdAt": "2020-05-26T07:52:08Z", "commit": {"oid": "cabc6b7e4293aa9b5d3e57fc04b253a185b2ad9f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "01e4d470f74930cd4e60ae0a684e9e46509ad3c6", "author": {"user": {"login": "christoph-pietsch-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/01e4d470f74930cd4e60ae0a684e9e46509ad3c6", "committedDate": "2020-05-26T13:58:09Z", "message": "Add test for BeanIndependenceSolver - (Task #286)\n\n---\nTask #286: Handle different property types in BeanIndependenceSolver"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4OTAzNjYw", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/594#pullrequestreview-418903660", "createdAt": "2020-05-27T06:54:44Z", "commit": {"oid": "01e4d470f74930cd4e60ae0a684e9e46509ad3c6"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNjo1NDo0NFrOGa7vgQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNjo1NToyOVrOGa7wxw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg5NDk3Nw==", "bodyText": "I think testing only one property bean is enough.\nWe just need to test here that the bean independence solver actually handles properties.\nThat the individual types are handled correctly is tested in the bean factory.", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/594#discussion_r430894977", "createdAt": "2020-05-27T06:54:44Z", "author": {"login": "SaMuellerDLR"}, "path": "de.dlr.sc.virsat.graphiti.test/src/de/dlr/sc/virsat/graphiti/diagram/BeanIndependenceSolverTest.java", "diffHunk": "@@ -76,91 +89,125 @@ protected void doExecute() {\n \t\t\t\taccePs.createAddActiveConceptCommand(editingDomain, repository).execute();\r\n \t\t\t\tActiveConceptHelper acHelper = new ActiveConceptHelper(repository);\r\n \t\t\t\tconceptEgscc = acHelper.getConcept(CONCEPT_ID_EGSCC);\r\n-\r\n \t\t\t}\r\n-\t\t});\t\r\n-\t}\r\n+\t\t});\r\n \r\n-\t@Test\r\n-\tpublic void testSolveIndependence() throws CoreException, IOException { \t\r\n-\t\t// test getConcept\r\n \t\tConcept concept = DiagramHelper.getConcept(editingDomain, CONCEPT_ID_EGSCC);\r\n \t\tassertEquals(concept, conceptEgscc);\r\n-\t\t\r\n-\t\t// create Seis and Cas\r\n-\t\tElementDefinition ed = new ElementDefinition(conceptEgscc);\r\n-\t\tStructuralElementInstance sei = ed.getStructuralElementInstance();\r\n-\t\tsei.setUuid(new VirSatUuid(UUID));\r\n-\t\t\r\n-\t\tDocument testDocument2 = new Document(concept);\r\n-\t\ted.add(testDocument2);\r\n-\r\n-\t\tElementDefinition ed2 = new ElementDefinition(conceptEgscc);\r\n-\t\tStructuralElementInstance sei2 = ed2.getStructuralElementInstance();\r\n-\t\t\r\n-\t\tDocument testDocument = new Document(concept);\r\n-\t\t\r\n-\t\t// Create The diagram\r\n-\t\tDiagram diagram = Graphiti.getPeCreateService().createDiagram(\"test\", \"testDiagram\", true);\r\n-\t\tIFolder diagramFolder = testProject.getFolder(\"src/diagrams/\");  \r\n-\t\tIFile diagramFile = diagramFolder.getFile(\"testDiagram\" + \".\" + \"test\");  \r\n-\t\tURI uri = URI.createPlatformResourceURI(diagramFile.getFullPath().toString(), true);\r\n-\t\tDiagramHelper.createDiagram(uri, diagram, rs);\r\n \r\n-\t\tIDiagramTypeProvider dtp = GraphitiInternal.getEmfService().getDTPForDiagram(diagram);\r\n-\t\tGraphitiInternal.getEmfService().wireDTPToDiagram(diagram, dtp);\r\n-\t\tdtp.init(diagram, null);\r\n-\t\tBeanIndependenceSolver beanIndependenceSolver = new BeanIndependenceSolver(dtp);\r\n-\t\tString seiKey = beanIndependenceSolver.getKeyForBusinessObject(ed);\r\n-\t\tassertEquals(UUID, seiKey);\r\n+\t\ttestDocument = new Document(concept);\r\n+\t\ttestDocument2 = new Document(concept);\r\n+\t\ttestDocument.getTypeInstance().setUuid(new VirSatUuid(DOCUMENTUUID));\r\n \r\n-\t\tseiKey = beanIndependenceSolver.getKeyForBusinessObject(ed);\r\n-\t\tassertEquals(UUID, seiKey);\r\n+\t\tIDiagramTypeProvider dtp = getDiagramTypeProvider();\r\n+\t\tbeanIndependenceSolver = new BeanIndependenceSolver(dtp);\r\n \r\n-\t\ttestDocument.getTypeInstance().setUuid(new VirSatUuid(DOCUMENTUUID));\r\n-\t\tString caKey = beanIndependenceSolver.getKeyForBusinessObject(testDocument);\r\n-\t\tassertEquals(DOCUMENTUUID, caKey);\r\n+\t\ted1 = new ElementDefinition(conceptEgscc);\r\n+\t\ted2 = new ElementDefinition(conceptEgscc);\r\n+\t\tsei1 = ed1.getStructuralElementInstance();\r\n+\t\tsei2 = ed2.getStructuralElementInstance();\r\n+\t\tsei1.setUuid(new VirSatUuid(UUID));\r\n+\t\ted1.add(testDocument2);\r\n \r\n-\t\tcaKey = beanIndependenceSolver.getKeyForBusinessObject(testDocument);\r\n-\t\tassertEquals(DOCUMENTUUID, caKey);\r\n+\t\tcommand = CreateAddStructuralElementInstanceCommand.create(editingDomain, repository, ed1.getStructuralElementInstance());\r\n+\t}\r\n \r\n-\t\tCommand command = CreateAddStructuralElementInstanceCommand.create(editingDomain, repository, ed.getStructuralElementInstance());\r\n-\t\teditingDomain.getCommandStack().execute(command);\r\n+\t@Test\r\n+\tpublic void testSolveIndependenceForSei() throws CoreException, IOException {\r\n+\t\tString seiKey = beanIndependenceSolver.getKeyForBusinessObject(ed1);\r\n+\t\tassertEquals(UUID, seiKey);\r\n \r\n-\t\teditingDomain.getVirSatCommandStack().execute(new RecordingCommand(editingDomain) {\r\n-\t\t\t@Override\r\n-\t\t\tprotected void doExecute() {\r\n-\t\t\t\trs.getAndAddStructuralElementInstanceResource(sei2);\r\n-\t\t\t}\r\n-\t\t});\r\n+\t\teditingDomain.getCommandStack().execute(command);\r\n+\t\tgetAndAddStructuralElementInstance(sei2);\r\n \r\n-\t\tResource resEd2 = rs.getStructuralElementInstanceResource(ed2.getStructuralElementInstance());\r\n-\t\tresEd2.getContents().add(ed2.getStructuralElementInstance());\r\n+\t\taddStructuralElementToResource(ed2);\r\n \t\tObject sei2Object = beanIndependenceSolver.getBusinessObjectForKey(ed2.getUuid());\r\n \t\tABeanStructuralElementInstance aBean = (ABeanStructuralElementInstance) sei2Object;\r\n \t\tassertEquals(ed2, aBean);\r\n-\t\t\r\n-\t\teditingDomain.getVirSatCommandStack().execute(new RecordingCommand(editingDomain) {\r\n-\t\t\t@Override\r\n-\t\t\tprotected void doExecute() {\r\n-\t\t\t\trs.getAndAddStructuralElementInstanceResource(sei);\r\n-\t\t\t}\r\n-\t\t});\r\n \r\n-\t\tBoolean permission = DiagramHelper.hasDiagramWritePermission(sei);\r\n-\t\tassertEquals(true, permission);\r\n-\t\t\r\n-\t\tResource resEd = rs.getStructuralElementInstanceResource(ed.getStructuralElementInstance());\r\n-\t\tresEd.getContents().add(ed.getStructuralElementInstance());\r\n+\t\tgetAndAddStructuralElementInstance(sei1);\r\n+\t\tcheckDiagramWritePermissionForStructuralElement(sei1);\r\n+\r\n+\t\taddStructuralElementToResource(ed1);\r\n \t\tObject obj = beanIndependenceSolver.getBusinessObjectForKey(seiKey);\r\n \t\taBean = (ABeanStructuralElementInstance) obj;\r\n-\t\tassertEquals(ed, aBean);\r\n+\t\tassertEquals(ed1, aBean);\r\n+\t}\r\n+\r\n+\t@Test\r\n+\tpublic void testSolveIndependenceForBeanProperty() throws CoreException, IOException {\r\n+\t\teditingDomain.getCommandStack().execute(command);\r\n+\t\tgetAndAddStructuralElementInstance(sei2);\r\n+\t\taddStructuralElementToResource(ed2);\r\n+\t\tgetAndAddStructuralElementInstance(sei1);\r\n+\t\tcheckDiagramWritePermissionForStructuralElement(sei1);\r\n+\t\taddStructuralElementToResource(ed1);\r\n \r\n+\t\t//test property\r\n \t\tObject documentObj = beanIndependenceSolver.getBusinessObjectForKey(testDocument2.getUuid());\r\n \t\tABeanCategoryAssignment aCategory = (ABeanCategoryAssignment) documentObj;\r\n \t\tassertEquals(testDocument2, aCategory);\r\n-\t\t\r\n+\r\n+\t\tObject beanNoteObj = beanIndependenceSolver.getBusinessObjectForKey(testDocument2.getNoteBean().getUuid());\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01e4d470f74930cd4e60ae0a684e9e46509ad3c6"}, "originalPosition": 167}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg5NTMwMw==", "bodyText": "Double check if we need this much setupfor the bean property test.\nWhy is the ca test so simple but the property test looks so complex?", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/594#discussion_r430895303", "createdAt": "2020-05-27T06:55:29Z", "author": {"login": "SaMuellerDLR"}, "path": "de.dlr.sc.virsat.graphiti.test/src/de/dlr/sc/virsat/graphiti/diagram/BeanIndependenceSolverTest.java", "diffHunk": "@@ -76,91 +89,125 @@ protected void doExecute() {\n \t\t\t\taccePs.createAddActiveConceptCommand(editingDomain, repository).execute();\r\n \t\t\t\tActiveConceptHelper acHelper = new ActiveConceptHelper(repository);\r\n \t\t\t\tconceptEgscc = acHelper.getConcept(CONCEPT_ID_EGSCC);\r\n-\r\n \t\t\t}\r\n-\t\t});\t\r\n-\t}\r\n+\t\t});\r\n \r\n-\t@Test\r\n-\tpublic void testSolveIndependence() throws CoreException, IOException { \t\r\n-\t\t// test getConcept\r\n \t\tConcept concept = DiagramHelper.getConcept(editingDomain, CONCEPT_ID_EGSCC);\r\n \t\tassertEquals(concept, conceptEgscc);\r\n-\t\t\r\n-\t\t// create Seis and Cas\r\n-\t\tElementDefinition ed = new ElementDefinition(conceptEgscc);\r\n-\t\tStructuralElementInstance sei = ed.getStructuralElementInstance();\r\n-\t\tsei.setUuid(new VirSatUuid(UUID));\r\n-\t\t\r\n-\t\tDocument testDocument2 = new Document(concept);\r\n-\t\ted.add(testDocument2);\r\n-\r\n-\t\tElementDefinition ed2 = new ElementDefinition(conceptEgscc);\r\n-\t\tStructuralElementInstance sei2 = ed2.getStructuralElementInstance();\r\n-\t\t\r\n-\t\tDocument testDocument = new Document(concept);\r\n-\t\t\r\n-\t\t// Create The diagram\r\n-\t\tDiagram diagram = Graphiti.getPeCreateService().createDiagram(\"test\", \"testDiagram\", true);\r\n-\t\tIFolder diagramFolder = testProject.getFolder(\"src/diagrams/\");  \r\n-\t\tIFile diagramFile = diagramFolder.getFile(\"testDiagram\" + \".\" + \"test\");  \r\n-\t\tURI uri = URI.createPlatformResourceURI(diagramFile.getFullPath().toString(), true);\r\n-\t\tDiagramHelper.createDiagram(uri, diagram, rs);\r\n \r\n-\t\tIDiagramTypeProvider dtp = GraphitiInternal.getEmfService().getDTPForDiagram(diagram);\r\n-\t\tGraphitiInternal.getEmfService().wireDTPToDiagram(diagram, dtp);\r\n-\t\tdtp.init(diagram, null);\r\n-\t\tBeanIndependenceSolver beanIndependenceSolver = new BeanIndependenceSolver(dtp);\r\n-\t\tString seiKey = beanIndependenceSolver.getKeyForBusinessObject(ed);\r\n-\t\tassertEquals(UUID, seiKey);\r\n+\t\ttestDocument = new Document(concept);\r\n+\t\ttestDocument2 = new Document(concept);\r\n+\t\ttestDocument.getTypeInstance().setUuid(new VirSatUuid(DOCUMENTUUID));\r\n \r\n-\t\tseiKey = beanIndependenceSolver.getKeyForBusinessObject(ed);\r\n-\t\tassertEquals(UUID, seiKey);\r\n+\t\tIDiagramTypeProvider dtp = getDiagramTypeProvider();\r\n+\t\tbeanIndependenceSolver = new BeanIndependenceSolver(dtp);\r\n \r\n-\t\ttestDocument.getTypeInstance().setUuid(new VirSatUuid(DOCUMENTUUID));\r\n-\t\tString caKey = beanIndependenceSolver.getKeyForBusinessObject(testDocument);\r\n-\t\tassertEquals(DOCUMENTUUID, caKey);\r\n+\t\ted1 = new ElementDefinition(conceptEgscc);\r\n+\t\ted2 = new ElementDefinition(conceptEgscc);\r\n+\t\tsei1 = ed1.getStructuralElementInstance();\r\n+\t\tsei2 = ed2.getStructuralElementInstance();\r\n+\t\tsei1.setUuid(new VirSatUuid(UUID));\r\n+\t\ted1.add(testDocument2);\r\n \r\n-\t\tcaKey = beanIndependenceSolver.getKeyForBusinessObject(testDocument);\r\n-\t\tassertEquals(DOCUMENTUUID, caKey);\r\n+\t\tcommand = CreateAddStructuralElementInstanceCommand.create(editingDomain, repository, ed1.getStructuralElementInstance());\r\n+\t}\r\n \r\n-\t\tCommand command = CreateAddStructuralElementInstanceCommand.create(editingDomain, repository, ed.getStructuralElementInstance());\r\n-\t\teditingDomain.getCommandStack().execute(command);\r\n+\t@Test\r\n+\tpublic void testSolveIndependenceForSei() throws CoreException, IOException {\r\n+\t\tString seiKey = beanIndependenceSolver.getKeyForBusinessObject(ed1);\r\n+\t\tassertEquals(UUID, seiKey);\r\n \r\n-\t\teditingDomain.getVirSatCommandStack().execute(new RecordingCommand(editingDomain) {\r\n-\t\t\t@Override\r\n-\t\t\tprotected void doExecute() {\r\n-\t\t\t\trs.getAndAddStructuralElementInstanceResource(sei2);\r\n-\t\t\t}\r\n-\t\t});\r\n+\t\teditingDomain.getCommandStack().execute(command);\r\n+\t\tgetAndAddStructuralElementInstance(sei2);\r\n \r\n-\t\tResource resEd2 = rs.getStructuralElementInstanceResource(ed2.getStructuralElementInstance());\r\n-\t\tresEd2.getContents().add(ed2.getStructuralElementInstance());\r\n+\t\taddStructuralElementToResource(ed2);\r\n \t\tObject sei2Object = beanIndependenceSolver.getBusinessObjectForKey(ed2.getUuid());\r\n \t\tABeanStructuralElementInstance aBean = (ABeanStructuralElementInstance) sei2Object;\r\n \t\tassertEquals(ed2, aBean);\r\n-\t\t\r\n-\t\teditingDomain.getVirSatCommandStack().execute(new RecordingCommand(editingDomain) {\r\n-\t\t\t@Override\r\n-\t\t\tprotected void doExecute() {\r\n-\t\t\t\trs.getAndAddStructuralElementInstanceResource(sei);\r\n-\t\t\t}\r\n-\t\t});\r\n \r\n-\t\tBoolean permission = DiagramHelper.hasDiagramWritePermission(sei);\r\n-\t\tassertEquals(true, permission);\r\n-\t\t\r\n-\t\tResource resEd = rs.getStructuralElementInstanceResource(ed.getStructuralElementInstance());\r\n-\t\tresEd.getContents().add(ed.getStructuralElementInstance());\r\n+\t\tgetAndAddStructuralElementInstance(sei1);\r\n+\t\tcheckDiagramWritePermissionForStructuralElement(sei1);\r\n+\r\n+\t\taddStructuralElementToResource(ed1);\r\n \t\tObject obj = beanIndependenceSolver.getBusinessObjectForKey(seiKey);\r\n \t\taBean = (ABeanStructuralElementInstance) obj;\r\n-\t\tassertEquals(ed, aBean);\r\n+\t\tassertEquals(ed1, aBean);\r\n+\t}\r\n+\r\n+\t@Test\r\n+\tpublic void testSolveIndependenceForBeanProperty() throws CoreException, IOException {\r\n+\t\teditingDomain.getCommandStack().execute(command);\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01e4d470f74930cd4e60ae0a684e9e46509ad3c6"}, "originalPosition": 154}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "08e8ed57390664e2309f0cd7f937fd50b5ccb08a", "author": {"user": {"login": "christoph-pietsch-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/08e8ed57390664e2309f0cd7f937fd50b5ccb08a", "committedDate": "2020-05-27T07:31:43Z", "message": "Resolved remarks - (Task #286)\n\n---\nTask #286: Handle different property types in BeanIndependenceSolver"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5MzI1NTA5", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/594#pullrequestreview-419325509", "createdAt": "2020-05-27T15:14:05Z", "commit": {"oid": "08e8ed57390664e2309f0cd7f937fd50b5ccb08a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxNToxNDowNVrOGbPj6g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxNToxNDo0MVrOGbPlxA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTIxOTY5MA==", "bodyText": "Why is this cast here necessary? Cant we just do the the assert on the returned beanNoteObj?", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/594#discussion_r431219690", "createdAt": "2020-05-27T15:14:05Z", "author": {"login": "SaMuellerDLR"}, "path": "de.dlr.sc.virsat.graphiti.test/src/de/dlr/sc/virsat/graphiti/diagram/BeanIndependenceSolverTest.java", "diffHunk": "@@ -76,91 +88,112 @@ protected void doExecute() {\n \t\t\t\taccePs.createAddActiveConceptCommand(editingDomain, repository).execute();\r\n \t\t\t\tActiveConceptHelper acHelper = new ActiveConceptHelper(repository);\r\n \t\t\t\tconceptEgscc = acHelper.getConcept(CONCEPT_ID_EGSCC);\r\n-\r\n \t\t\t}\r\n-\t\t});\t\r\n-\t}\r\n+\t\t});\r\n \r\n-\t@Test\r\n-\tpublic void testSolveIndependence() throws CoreException, IOException { \t\r\n-\t\t// test getConcept\r\n \t\tConcept concept = DiagramHelper.getConcept(editingDomain, CONCEPT_ID_EGSCC);\r\n \t\tassertEquals(concept, conceptEgscc);\r\n-\t\t\r\n-\t\t// create Seis and Cas\r\n-\t\tElementDefinition ed = new ElementDefinition(conceptEgscc);\r\n-\t\tStructuralElementInstance sei = ed.getStructuralElementInstance();\r\n-\t\tsei.setUuid(new VirSatUuid(UUID));\r\n-\t\t\r\n-\t\tDocument testDocument2 = new Document(concept);\r\n-\t\ted.add(testDocument2);\r\n-\r\n-\t\tElementDefinition ed2 = new ElementDefinition(conceptEgscc);\r\n-\t\tStructuralElementInstance sei2 = ed2.getStructuralElementInstance();\r\n-\t\t\r\n-\t\tDocument testDocument = new Document(concept);\r\n-\t\t\r\n-\t\t// Create The diagram\r\n-\t\tDiagram diagram = Graphiti.getPeCreateService().createDiagram(\"test\", \"testDiagram\", true);\r\n-\t\tIFolder diagramFolder = testProject.getFolder(\"src/diagrams/\");  \r\n-\t\tIFile diagramFile = diagramFolder.getFile(\"testDiagram\" + \".\" + \"test\");  \r\n-\t\tURI uri = URI.createPlatformResourceURI(diagramFile.getFullPath().toString(), true);\r\n-\t\tDiagramHelper.createDiagram(uri, diagram, rs);\r\n \r\n-\t\tIDiagramTypeProvider dtp = GraphitiInternal.getEmfService().getDTPForDiagram(diagram);\r\n-\t\tGraphitiInternal.getEmfService().wireDTPToDiagram(diagram, dtp);\r\n-\t\tdtp.init(diagram, null);\r\n-\t\tBeanIndependenceSolver beanIndependenceSolver = new BeanIndependenceSolver(dtp);\r\n-\t\tString seiKey = beanIndependenceSolver.getKeyForBusinessObject(ed);\r\n-\t\tassertEquals(UUID, seiKey);\r\n+\t\ttestDocument = new Document(concept);\r\n+\t\ttestDocument2 = new Document(concept);\r\n+\t\ttestDocument.getTypeInstance().setUuid(new VirSatUuid(DOCUMENTUUID));\r\n \r\n-\t\tseiKey = beanIndependenceSolver.getKeyForBusinessObject(ed);\r\n-\t\tassertEquals(UUID, seiKey);\r\n+\t\tIDiagramTypeProvider dtp = getDiagramTypeProvider();\r\n+\t\tbeanIndependenceSolver = new BeanIndependenceSolver(dtp);\r\n \r\n-\t\ttestDocument.getTypeInstance().setUuid(new VirSatUuid(DOCUMENTUUID));\r\n-\t\tString caKey = beanIndependenceSolver.getKeyForBusinessObject(testDocument);\r\n-\t\tassertEquals(DOCUMENTUUID, caKey);\r\n+\t\ted1 = new ElementDefinition(conceptEgscc);\r\n+\t\ted2 = new ElementDefinition(conceptEgscc);\r\n+\t\tsei1 = ed1.getStructuralElementInstance();\r\n+\t\tsei2 = ed2.getStructuralElementInstance();\r\n+\t\tsei1.setUuid(new VirSatUuid(UUID));\r\n+\t\ted1.add(testDocument2);\r\n \r\n-\t\tcaKey = beanIndependenceSolver.getKeyForBusinessObject(testDocument);\r\n-\t\tassertEquals(DOCUMENTUUID, caKey);\r\n+\t\tcommand = CreateAddStructuralElementInstanceCommand.create(editingDomain, repository, ed1.getStructuralElementInstance());\r\n+\t}\r\n \r\n-\t\tCommand command = CreateAddStructuralElementInstanceCommand.create(editingDomain, repository, ed.getStructuralElementInstance());\r\n-\t\teditingDomain.getCommandStack().execute(command);\r\n+\t@Test\r\n+\tpublic void testSolveIndependenceForSei() throws CoreException, IOException {\r\n+\t\tString seiKey = beanIndependenceSolver.getKeyForBusinessObject(ed1);\r\n+\t\tassertEquals(UUID, seiKey);\r\n \r\n-\t\teditingDomain.getVirSatCommandStack().execute(new RecordingCommand(editingDomain) {\r\n-\t\t\t@Override\r\n-\t\t\tprotected void doExecute() {\r\n-\t\t\t\trs.getAndAddStructuralElementInstanceResource(sei2);\r\n-\t\t\t}\r\n-\t\t});\r\n+\t\teditingDomain.getCommandStack().execute(command);\r\n+\t\tgetAndAddStructuralElementInstance(sei2);\r\n \r\n-\t\tResource resEd2 = rs.getStructuralElementInstanceResource(ed2.getStructuralElementInstance());\r\n-\t\tresEd2.getContents().add(ed2.getStructuralElementInstance());\r\n+\t\taddStructuralElementToResource(ed2);\r\n \t\tObject sei2Object = beanIndependenceSolver.getBusinessObjectForKey(ed2.getUuid());\r\n \t\tABeanStructuralElementInstance aBean = (ABeanStructuralElementInstance) sei2Object;\r\n \t\tassertEquals(ed2, aBean);\r\n-\t\t\r\n-\t\teditingDomain.getVirSatCommandStack().execute(new RecordingCommand(editingDomain) {\r\n-\t\t\t@Override\r\n-\t\t\tprotected void doExecute() {\r\n-\t\t\t\trs.getAndAddStructuralElementInstanceResource(sei);\r\n-\t\t\t}\r\n-\t\t});\r\n \r\n-\t\tBoolean permission = DiagramHelper.hasDiagramWritePermission(sei);\r\n-\t\tassertEquals(true, permission);\r\n-\t\t\r\n-\t\tResource resEd = rs.getStructuralElementInstanceResource(ed.getStructuralElementInstance());\r\n-\t\tresEd.getContents().add(ed.getStructuralElementInstance());\r\n+\t\tgetAndAddStructuralElementInstance(sei1);\r\n+\t\tcheckDiagramWritePermissionForStructuralElement(sei1);\r\n+\r\n+\t\taddStructuralElementToResource(ed1);\r\n \t\tObject obj = beanIndependenceSolver.getBusinessObjectForKey(seiKey);\r\n \t\taBean = (ABeanStructuralElementInstance) obj;\r\n-\t\tassertEquals(ed, aBean);\r\n+\t\tassertEquals(ed1, aBean);\r\n+\t}\r\n+\r\n+\t@Test\r\n+\tpublic void testSolveIndependenceForBeanProperty() throws CoreException, IOException {\r\n+\t\tgetAndAddStructuralElementInstance(sei1);\r\n \r\n+\t\t//test property\r\n \t\tObject documentObj = beanIndependenceSolver.getBusinessObjectForKey(testDocument2.getUuid());\r\n \t\tABeanCategoryAssignment aCategory = (ABeanCategoryAssignment) documentObj;\r\n \t\tassertEquals(testDocument2, aCategory);\r\n-\t\t\r\n+\r\n+\t\tObject beanNoteObj = beanIndependenceSolver.getBusinessObjectForKey(testDocument2.getNoteBean().getUuid());\r\n+\t\tBeanPropertyString beanPropertyString = (BeanPropertyString) beanNoteObj;\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "08e8ed57390664e2309f0cd7f937fd50b5ccb08a"}, "originalPosition": 162}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTIyMDE2NA==", "bodyText": "Lets keep the Ca testing in the the ca test case.\nWe probably dont need to do it here again.", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/594#discussion_r431220164", "createdAt": "2020-05-27T15:14:41Z", "author": {"login": "SaMuellerDLR"}, "path": "de.dlr.sc.virsat.graphiti.test/src/de/dlr/sc/virsat/graphiti/diagram/BeanIndependenceSolverTest.java", "diffHunk": "@@ -76,91 +88,112 @@ protected void doExecute() {\n \t\t\t\taccePs.createAddActiveConceptCommand(editingDomain, repository).execute();\r\n \t\t\t\tActiveConceptHelper acHelper = new ActiveConceptHelper(repository);\r\n \t\t\t\tconceptEgscc = acHelper.getConcept(CONCEPT_ID_EGSCC);\r\n-\r\n \t\t\t}\r\n-\t\t});\t\r\n-\t}\r\n+\t\t});\r\n \r\n-\t@Test\r\n-\tpublic void testSolveIndependence() throws CoreException, IOException { \t\r\n-\t\t// test getConcept\r\n \t\tConcept concept = DiagramHelper.getConcept(editingDomain, CONCEPT_ID_EGSCC);\r\n \t\tassertEquals(concept, conceptEgscc);\r\n-\t\t\r\n-\t\t// create Seis and Cas\r\n-\t\tElementDefinition ed = new ElementDefinition(conceptEgscc);\r\n-\t\tStructuralElementInstance sei = ed.getStructuralElementInstance();\r\n-\t\tsei.setUuid(new VirSatUuid(UUID));\r\n-\t\t\r\n-\t\tDocument testDocument2 = new Document(concept);\r\n-\t\ted.add(testDocument2);\r\n-\r\n-\t\tElementDefinition ed2 = new ElementDefinition(conceptEgscc);\r\n-\t\tStructuralElementInstance sei2 = ed2.getStructuralElementInstance();\r\n-\t\t\r\n-\t\tDocument testDocument = new Document(concept);\r\n-\t\t\r\n-\t\t// Create The diagram\r\n-\t\tDiagram diagram = Graphiti.getPeCreateService().createDiagram(\"test\", \"testDiagram\", true);\r\n-\t\tIFolder diagramFolder = testProject.getFolder(\"src/diagrams/\");  \r\n-\t\tIFile diagramFile = diagramFolder.getFile(\"testDiagram\" + \".\" + \"test\");  \r\n-\t\tURI uri = URI.createPlatformResourceURI(diagramFile.getFullPath().toString(), true);\r\n-\t\tDiagramHelper.createDiagram(uri, diagram, rs);\r\n \r\n-\t\tIDiagramTypeProvider dtp = GraphitiInternal.getEmfService().getDTPForDiagram(diagram);\r\n-\t\tGraphitiInternal.getEmfService().wireDTPToDiagram(diagram, dtp);\r\n-\t\tdtp.init(diagram, null);\r\n-\t\tBeanIndependenceSolver beanIndependenceSolver = new BeanIndependenceSolver(dtp);\r\n-\t\tString seiKey = beanIndependenceSolver.getKeyForBusinessObject(ed);\r\n-\t\tassertEquals(UUID, seiKey);\r\n+\t\ttestDocument = new Document(concept);\r\n+\t\ttestDocument2 = new Document(concept);\r\n+\t\ttestDocument.getTypeInstance().setUuid(new VirSatUuid(DOCUMENTUUID));\r\n \r\n-\t\tseiKey = beanIndependenceSolver.getKeyForBusinessObject(ed);\r\n-\t\tassertEquals(UUID, seiKey);\r\n+\t\tIDiagramTypeProvider dtp = getDiagramTypeProvider();\r\n+\t\tbeanIndependenceSolver = new BeanIndependenceSolver(dtp);\r\n \r\n-\t\ttestDocument.getTypeInstance().setUuid(new VirSatUuid(DOCUMENTUUID));\r\n-\t\tString caKey = beanIndependenceSolver.getKeyForBusinessObject(testDocument);\r\n-\t\tassertEquals(DOCUMENTUUID, caKey);\r\n+\t\ted1 = new ElementDefinition(conceptEgscc);\r\n+\t\ted2 = new ElementDefinition(conceptEgscc);\r\n+\t\tsei1 = ed1.getStructuralElementInstance();\r\n+\t\tsei2 = ed2.getStructuralElementInstance();\r\n+\t\tsei1.setUuid(new VirSatUuid(UUID));\r\n+\t\ted1.add(testDocument2);\r\n \r\n-\t\tcaKey = beanIndependenceSolver.getKeyForBusinessObject(testDocument);\r\n-\t\tassertEquals(DOCUMENTUUID, caKey);\r\n+\t\tcommand = CreateAddStructuralElementInstanceCommand.create(editingDomain, repository, ed1.getStructuralElementInstance());\r\n+\t}\r\n \r\n-\t\tCommand command = CreateAddStructuralElementInstanceCommand.create(editingDomain, repository, ed.getStructuralElementInstance());\r\n-\t\teditingDomain.getCommandStack().execute(command);\r\n+\t@Test\r\n+\tpublic void testSolveIndependenceForSei() throws CoreException, IOException {\r\n+\t\tString seiKey = beanIndependenceSolver.getKeyForBusinessObject(ed1);\r\n+\t\tassertEquals(UUID, seiKey);\r\n \r\n-\t\teditingDomain.getVirSatCommandStack().execute(new RecordingCommand(editingDomain) {\r\n-\t\t\t@Override\r\n-\t\t\tprotected void doExecute() {\r\n-\t\t\t\trs.getAndAddStructuralElementInstanceResource(sei2);\r\n-\t\t\t}\r\n-\t\t});\r\n+\t\teditingDomain.getCommandStack().execute(command);\r\n+\t\tgetAndAddStructuralElementInstance(sei2);\r\n \r\n-\t\tResource resEd2 = rs.getStructuralElementInstanceResource(ed2.getStructuralElementInstance());\r\n-\t\tresEd2.getContents().add(ed2.getStructuralElementInstance());\r\n+\t\taddStructuralElementToResource(ed2);\r\n \t\tObject sei2Object = beanIndependenceSolver.getBusinessObjectForKey(ed2.getUuid());\r\n \t\tABeanStructuralElementInstance aBean = (ABeanStructuralElementInstance) sei2Object;\r\n \t\tassertEquals(ed2, aBean);\r\n-\t\t\r\n-\t\teditingDomain.getVirSatCommandStack().execute(new RecordingCommand(editingDomain) {\r\n-\t\t\t@Override\r\n-\t\t\tprotected void doExecute() {\r\n-\t\t\t\trs.getAndAddStructuralElementInstanceResource(sei);\r\n-\t\t\t}\r\n-\t\t});\r\n \r\n-\t\tBoolean permission = DiagramHelper.hasDiagramWritePermission(sei);\r\n-\t\tassertEquals(true, permission);\r\n-\t\t\r\n-\t\tResource resEd = rs.getStructuralElementInstanceResource(ed.getStructuralElementInstance());\r\n-\t\tresEd.getContents().add(ed.getStructuralElementInstance());\r\n+\t\tgetAndAddStructuralElementInstance(sei1);\r\n+\t\tcheckDiagramWritePermissionForStructuralElement(sei1);\r\n+\r\n+\t\taddStructuralElementToResource(ed1);\r\n \t\tObject obj = beanIndependenceSolver.getBusinessObjectForKey(seiKey);\r\n \t\taBean = (ABeanStructuralElementInstance) obj;\r\n-\t\tassertEquals(ed, aBean);\r\n+\t\tassertEquals(ed1, aBean);\r\n+\t}\r\n+\r\n+\t@Test\r\n+\tpublic void testSolveIndependenceForBeanProperty() throws CoreException, IOException {\r\n+\t\tgetAndAddStructuralElementInstance(sei1);\r\n \r\n+\t\t//test property\r\n \t\tObject documentObj = beanIndependenceSolver.getBusinessObjectForKey(testDocument2.getUuid());\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "08e8ed57390664e2309f0cd7f937fd50b5ccb08a"}, "originalPosition": 156}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "96553c48c318757d052928c3137fa251bf443041", "author": {"user": {"login": "christoph-pietsch-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/96553c48c318757d052928c3137fa251bf443041", "committedDate": "2020-06-01T07:37:39Z", "message": "Resolved remarks - (Task #286)\n\n---\nTask #286: Handle different property types in BeanIndependenceSolver"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "148f424fe5de233d50aaebdc8b6d37c113344e56", "author": {"user": {"login": "christoph-pietsch-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/148f424fe5de233d50aaebdc8b6d37c113344e56", "committedDate": "2020-06-02T07:43:15Z", "message": "Resolved remarks - (Task #286)\n\n---\nTask #286: Handle different property types in BeanIndependenceSolver"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyNDIzMzU3", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/594#pullrequestreview-422423357", "createdAt": "2020-06-02T07:47:43Z", "commit": {"oid": "148f424fe5de233d50aaebdc8b6d37c113344e56"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyNTA0MDUy", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/594#pullrequestreview-422504052", "createdAt": "2020-06-02T09:31:28Z", "commit": {"oid": "148f424fe5de233d50aaebdc8b6d37c113344e56"}, "state": "APPROVED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQwOTozMToyOFrOGdpsog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQwOTo0MTowM1rOGdqDAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzc0NTA1OA==", "bodyText": "Maybe rename the EGSCC to EXTENDED_PS.", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/594#discussion_r433745058", "createdAt": "2020-06-02T09:31:28Z", "author": {"login": "PhilMFischer"}, "path": "de.dlr.sc.virsat.graphiti.test/src/de/dlr/sc/virsat/graphiti/diagram/BeanIndependenceSolverTest.java", "diffHunk": "@@ -54,18 +53,29 @@\n \tprivate static final String DOCUMENTUUID = \"ea816464-aaaa-bbbb-ae91-31d37c60a63c\";\r\n \r\n \tprivate Concept conceptEgscc;\r\n-\t\r\n+\tprivate Document testDocument;\r\n+\tprivate Document testDocument2;\r\n+\tprivate BeanIndependenceSolver beanIndependenceSolver;\r\n+\tprivate ElementDefinition ed1;\r\n+\tprivate ElementDefinition ed2;\r\n+\tprivate StructuralElementInstance sei1;\r\n+\tprivate StructuralElementInstance sei2;\r\n+\tprivate Command command;\r\n+\r\n+\t@Override\r\n \t@Before\r\n \tpublic void setUp() throws CoreException {\r\n \t\tsuper.setUp();\r\n \t\tUserRegistry.getInstance().setSuperUser(true);\r\n \r\n \t\taddEditingDomainAndRepository();\r\n \t\tactivateCoreConcept();\r\n-\t\t\r\n+\r\n \t\t//CHECKSTYLE:OFF\r\n \t\tActiveConceptConfigurationElement accePs = new ActiveConceptConfigurationElement(null) {\r\n+\t\t\t@Override\r\n \t\t\tpublic String getXmi() { return \"concept/concept.xmi\"; };\r\n+\t\t\t@Override\r\n \t\t\tpublic String getId() { return CONCEPT_ID_EGSCC; };\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "148f424fe5de233d50aaebdc8b6d37c113344e56"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzc0NTI0MA==", "bodyText": "Maybe DOCUMENT_UUID", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/594#discussion_r433745240", "createdAt": "2020-06-02T09:31:49Z", "author": {"login": "PhilMFischer"}, "path": "de.dlr.sc.virsat.graphiti.test/src/de/dlr/sc/virsat/graphiti/diagram/BeanIndependenceSolverTest.java", "diffHunk": "@@ -76,91 +86,108 @@ protected void doExecute() {\n \t\t\t\taccePs.createAddActiveConceptCommand(editingDomain, repository).execute();\r\n \t\t\t\tActiveConceptHelper acHelper = new ActiveConceptHelper(repository);\r\n \t\t\t\tconceptEgscc = acHelper.getConcept(CONCEPT_ID_EGSCC);\r\n-\r\n \t\t\t}\r\n-\t\t});\t\r\n-\t}\r\n+\t\t});\r\n \r\n-\t@Test\r\n-\tpublic void testSolveIndependence() throws CoreException, IOException { \t\r\n-\t\t// test getConcept\r\n \t\tConcept concept = DiagramHelper.getConcept(editingDomain, CONCEPT_ID_EGSCC);\r\n \t\tassertEquals(concept, conceptEgscc);\r\n-\t\t\r\n-\t\t// create Seis and Cas\r\n-\t\tElementDefinition ed = new ElementDefinition(conceptEgscc);\r\n-\t\tStructuralElementInstance sei = ed.getStructuralElementInstance();\r\n-\t\tsei.setUuid(new VirSatUuid(UUID));\r\n-\t\t\r\n-\t\tDocument testDocument2 = new Document(concept);\r\n-\t\ted.add(testDocument2);\r\n-\r\n-\t\tElementDefinition ed2 = new ElementDefinition(conceptEgscc);\r\n-\t\tStructuralElementInstance sei2 = ed2.getStructuralElementInstance();\r\n-\t\t\r\n-\t\tDocument testDocument = new Document(concept);\r\n-\t\t\r\n-\t\t// Create The diagram\r\n-\t\tDiagram diagram = Graphiti.getPeCreateService().createDiagram(\"test\", \"testDiagram\", true);\r\n-\t\tIFolder diagramFolder = testProject.getFolder(\"src/diagrams/\");  \r\n-\t\tIFile diagramFile = diagramFolder.getFile(\"testDiagram\" + \".\" + \"test\");  \r\n-\t\tURI uri = URI.createPlatformResourceURI(diagramFile.getFullPath().toString(), true);\r\n-\t\tDiagramHelper.createDiagram(uri, diagram, rs);\r\n \r\n-\t\tIDiagramTypeProvider dtp = GraphitiInternal.getEmfService().getDTPForDiagram(diagram);\r\n-\t\tGraphitiInternal.getEmfService().wireDTPToDiagram(diagram, dtp);\r\n-\t\tdtp.init(diagram, null);\r\n-\t\tBeanIndependenceSolver beanIndependenceSolver = new BeanIndependenceSolver(dtp);\r\n-\t\tString seiKey = beanIndependenceSolver.getKeyForBusinessObject(ed);\r\n-\t\tassertEquals(UUID, seiKey);\r\n+\t\ttestDocument = new Document(concept);\r\n+\t\ttestDocument2 = new Document(concept);\r\n+\t\ttestDocument.getTypeInstance().setUuid(new VirSatUuid(DOCUMENTUUID));\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "148f424fe5de233d50aaebdc8b6d37c113344e56"}, "originalPosition": 84}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzc0Njg0Ng==", "bodyText": "Please improve comments, it is ahrd to understand which uuid is the SEI and which one is the BO and so on. mabye consider using the comments in the assert statements as well. This makes it easier to spot the exact place and reason once a test case is failing.", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/594#discussion_r433746846", "createdAt": "2020-06-02T09:34:12Z", "author": {"login": "PhilMFischer"}, "path": "de.dlr.sc.virsat.graphiti.test/src/de/dlr/sc/virsat/graphiti/diagram/BeanIndependenceSolverTest.java", "diffHunk": "@@ -76,91 +86,108 @@ protected void doExecute() {\n \t\t\t\taccePs.createAddActiveConceptCommand(editingDomain, repository).execute();\r\n \t\t\t\tActiveConceptHelper acHelper = new ActiveConceptHelper(repository);\r\n \t\t\t\tconceptEgscc = acHelper.getConcept(CONCEPT_ID_EGSCC);\r\n-\r\n \t\t\t}\r\n-\t\t});\t\r\n-\t}\r\n+\t\t});\r\n \r\n-\t@Test\r\n-\tpublic void testSolveIndependence() throws CoreException, IOException { \t\r\n-\t\t// test getConcept\r\n \t\tConcept concept = DiagramHelper.getConcept(editingDomain, CONCEPT_ID_EGSCC);\r\n \t\tassertEquals(concept, conceptEgscc);\r\n-\t\t\r\n-\t\t// create Seis and Cas\r\n-\t\tElementDefinition ed = new ElementDefinition(conceptEgscc);\r\n-\t\tStructuralElementInstance sei = ed.getStructuralElementInstance();\r\n-\t\tsei.setUuid(new VirSatUuid(UUID));\r\n-\t\t\r\n-\t\tDocument testDocument2 = new Document(concept);\r\n-\t\ted.add(testDocument2);\r\n-\r\n-\t\tElementDefinition ed2 = new ElementDefinition(conceptEgscc);\r\n-\t\tStructuralElementInstance sei2 = ed2.getStructuralElementInstance();\r\n-\t\t\r\n-\t\tDocument testDocument = new Document(concept);\r\n-\t\t\r\n-\t\t// Create The diagram\r\n-\t\tDiagram diagram = Graphiti.getPeCreateService().createDiagram(\"test\", \"testDiagram\", true);\r\n-\t\tIFolder diagramFolder = testProject.getFolder(\"src/diagrams/\");  \r\n-\t\tIFile diagramFile = diagramFolder.getFile(\"testDiagram\" + \".\" + \"test\");  \r\n-\t\tURI uri = URI.createPlatformResourceURI(diagramFile.getFullPath().toString(), true);\r\n-\t\tDiagramHelper.createDiagram(uri, diagram, rs);\r\n \r\n-\t\tIDiagramTypeProvider dtp = GraphitiInternal.getEmfService().getDTPForDiagram(diagram);\r\n-\t\tGraphitiInternal.getEmfService().wireDTPToDiagram(diagram, dtp);\r\n-\t\tdtp.init(diagram, null);\r\n-\t\tBeanIndependenceSolver beanIndependenceSolver = new BeanIndependenceSolver(dtp);\r\n-\t\tString seiKey = beanIndependenceSolver.getKeyForBusinessObject(ed);\r\n-\t\tassertEquals(UUID, seiKey);\r\n+\t\ttestDocument = new Document(concept);\r\n+\t\ttestDocument2 = new Document(concept);\r\n+\t\ttestDocument.getTypeInstance().setUuid(new VirSatUuid(DOCUMENTUUID));\r\n \r\n-\t\tseiKey = beanIndependenceSolver.getKeyForBusinessObject(ed);\r\n-\t\tassertEquals(UUID, seiKey);\r\n+\t\tIDiagramTypeProvider dtp = getDiagramTypeProvider();\r\n+\t\tbeanIndependenceSolver = new BeanIndependenceSolver(dtp);\r\n \r\n-\t\ttestDocument.getTypeInstance().setUuid(new VirSatUuid(DOCUMENTUUID));\r\n-\t\tString caKey = beanIndependenceSolver.getKeyForBusinessObject(testDocument);\r\n-\t\tassertEquals(DOCUMENTUUID, caKey);\r\n+\t\ted1 = new ElementDefinition(conceptEgscc);\r\n+\t\ted2 = new ElementDefinition(conceptEgscc);\r\n+\t\tsei1 = ed1.getStructuralElementInstance();\r\n+\t\tsei2 = ed2.getStructuralElementInstance();\r\n+\t\tsei1.setUuid(new VirSatUuid(UUID));\r\n+\t\ted1.add(testDocument2);\r\n+\t\tgetAndAddStructuralElementInstance(sei1);\r\n \r\n-\t\tcaKey = beanIndependenceSolver.getKeyForBusinessObject(testDocument);\r\n-\t\tassertEquals(DOCUMENTUUID, caKey);\r\n+\t\tcommand = CreateAddStructuralElementInstanceCommand.create(editingDomain, repository, ed1.getStructuralElementInstance());\r\n+\t}\r\n \r\n-\t\tCommand command = CreateAddStructuralElementInstanceCommand.create(editingDomain, repository, ed.getStructuralElementInstance());\r\n-\t\teditingDomain.getCommandStack().execute(command);\r\n+\t@Test\r\n+\tpublic void testSolveIndependenceForSei() throws CoreException, IOException {\r\n+\t\tString seiKey = beanIndependenceSolver.getKeyForBusinessObject(ed1);\r\n+\t\tassertEquals(UUID, seiKey);\r\n \r\n-\t\teditingDomain.getVirSatCommandStack().execute(new RecordingCommand(editingDomain) {\r\n-\t\t\t@Override\r\n-\t\t\tprotected void doExecute() {\r\n-\t\t\t\trs.getAndAddStructuralElementInstanceResource(sei2);\r\n-\t\t\t}\r\n-\t\t});\r\n+\t\teditingDomain.getCommandStack().execute(command);\r\n+\t\tgetAndAddStructuralElementInstance(sei2);\r\n \r\n-\t\tResource resEd2 = rs.getStructuralElementInstanceResource(ed2.getStructuralElementInstance());\r\n-\t\tresEd2.getContents().add(ed2.getStructuralElementInstance());\r\n+\t\taddStructuralElementToResource(ed2);\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "148f424fe5de233d50aaebdc8b6d37c113344e56"}, "originalPosition": 125}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzc0OTU0Nw==", "bodyText": "The calls to the command stack can be simplified by a new method from the super class\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\teditingDomain.getVirSatCommandStack().execute(new RecordingCommand(editingDomain) {\n          \n          \n            \n            \t\t\t@Override\n          \n          \n            \n            \t\t\tprotected void doExecute() {\n          \n          \n            \n            \t\t\t\trs.getAndAddStructuralElementInstanceResource(sei);\n          \n          \n            \n            \t\t\t}\n          \n          \n            \n            \t\t});\n          \n          \n            \n            \t\texecuteAsCommand(() -> rs.getAndAddStructuralElementInstanceResource(sei));", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/594#discussion_r433749547", "createdAt": "2020-06-02T09:38:50Z", "author": {"login": "PhilMFischer"}, "path": "de.dlr.sc.virsat.graphiti.test/src/de/dlr/sc/virsat/graphiti/diagram/BeanIndependenceSolverTest.java", "diffHunk": "@@ -76,91 +86,108 @@ protected void doExecute() {\n \t\t\t\taccePs.createAddActiveConceptCommand(editingDomain, repository).execute();\r\n \t\t\t\tActiveConceptHelper acHelper = new ActiveConceptHelper(repository);\r\n \t\t\t\tconceptEgscc = acHelper.getConcept(CONCEPT_ID_EGSCC);\r\n-\r\n \t\t\t}\r\n-\t\t});\t\r\n-\t}\r\n+\t\t});\r\n \r\n-\t@Test\r\n-\tpublic void testSolveIndependence() throws CoreException, IOException { \t\r\n-\t\t// test getConcept\r\n \t\tConcept concept = DiagramHelper.getConcept(editingDomain, CONCEPT_ID_EGSCC);\r\n \t\tassertEquals(concept, conceptEgscc);\r\n-\t\t\r\n-\t\t// create Seis and Cas\r\n-\t\tElementDefinition ed = new ElementDefinition(conceptEgscc);\r\n-\t\tStructuralElementInstance sei = ed.getStructuralElementInstance();\r\n-\t\tsei.setUuid(new VirSatUuid(UUID));\r\n-\t\t\r\n-\t\tDocument testDocument2 = new Document(concept);\r\n-\t\ted.add(testDocument2);\r\n-\r\n-\t\tElementDefinition ed2 = new ElementDefinition(conceptEgscc);\r\n-\t\tStructuralElementInstance sei2 = ed2.getStructuralElementInstance();\r\n-\t\t\r\n-\t\tDocument testDocument = new Document(concept);\r\n-\t\t\r\n-\t\t// Create The diagram\r\n-\t\tDiagram diagram = Graphiti.getPeCreateService().createDiagram(\"test\", \"testDiagram\", true);\r\n-\t\tIFolder diagramFolder = testProject.getFolder(\"src/diagrams/\");  \r\n-\t\tIFile diagramFile = diagramFolder.getFile(\"testDiagram\" + \".\" + \"test\");  \r\n-\t\tURI uri = URI.createPlatformResourceURI(diagramFile.getFullPath().toString(), true);\r\n-\t\tDiagramHelper.createDiagram(uri, diagram, rs);\r\n \r\n-\t\tIDiagramTypeProvider dtp = GraphitiInternal.getEmfService().getDTPForDiagram(diagram);\r\n-\t\tGraphitiInternal.getEmfService().wireDTPToDiagram(diagram, dtp);\r\n-\t\tdtp.init(diagram, null);\r\n-\t\tBeanIndependenceSolver beanIndependenceSolver = new BeanIndependenceSolver(dtp);\r\n-\t\tString seiKey = beanIndependenceSolver.getKeyForBusinessObject(ed);\r\n-\t\tassertEquals(UUID, seiKey);\r\n+\t\ttestDocument = new Document(concept);\r\n+\t\ttestDocument2 = new Document(concept);\r\n+\t\ttestDocument.getTypeInstance().setUuid(new VirSatUuid(DOCUMENTUUID));\r\n \r\n-\t\tseiKey = beanIndependenceSolver.getKeyForBusinessObject(ed);\r\n-\t\tassertEquals(UUID, seiKey);\r\n+\t\tIDiagramTypeProvider dtp = getDiagramTypeProvider();\r\n+\t\tbeanIndependenceSolver = new BeanIndependenceSolver(dtp);\r\n \r\n-\t\ttestDocument.getTypeInstance().setUuid(new VirSatUuid(DOCUMENTUUID));\r\n-\t\tString caKey = beanIndependenceSolver.getKeyForBusinessObject(testDocument);\r\n-\t\tassertEquals(DOCUMENTUUID, caKey);\r\n+\t\ted1 = new ElementDefinition(conceptEgscc);\r\n+\t\ted2 = new ElementDefinition(conceptEgscc);\r\n+\t\tsei1 = ed1.getStructuralElementInstance();\r\n+\t\tsei2 = ed2.getStructuralElementInstance();\r\n+\t\tsei1.setUuid(new VirSatUuid(UUID));\r\n+\t\ted1.add(testDocument2);\r\n+\t\tgetAndAddStructuralElementInstance(sei1);\r\n \r\n-\t\tcaKey = beanIndependenceSolver.getKeyForBusinessObject(testDocument);\r\n-\t\tassertEquals(DOCUMENTUUID, caKey);\r\n+\t\tcommand = CreateAddStructuralElementInstanceCommand.create(editingDomain, repository, ed1.getStructuralElementInstance());\r\n+\t}\r\n \r\n-\t\tCommand command = CreateAddStructuralElementInstanceCommand.create(editingDomain, repository, ed.getStructuralElementInstance());\r\n-\t\teditingDomain.getCommandStack().execute(command);\r\n+\t@Test\r\n+\tpublic void testSolveIndependenceForSei() throws CoreException, IOException {\r\n+\t\tString seiKey = beanIndependenceSolver.getKeyForBusinessObject(ed1);\r\n+\t\tassertEquals(UUID, seiKey);\r\n \r\n-\t\teditingDomain.getVirSatCommandStack().execute(new RecordingCommand(editingDomain) {\r\n-\t\t\t@Override\r\n-\t\t\tprotected void doExecute() {\r\n-\t\t\t\trs.getAndAddStructuralElementInstanceResource(sei2);\r\n-\t\t\t}\r\n-\t\t});\r\n+\t\teditingDomain.getCommandStack().execute(command);\r\n+\t\tgetAndAddStructuralElementInstance(sei2);\r\n \r\n-\t\tResource resEd2 = rs.getStructuralElementInstanceResource(ed2.getStructuralElementInstance());\r\n-\t\tresEd2.getContents().add(ed2.getStructuralElementInstance());\r\n+\t\taddStructuralElementToResource(ed2);\r\n \t\tObject sei2Object = beanIndependenceSolver.getBusinessObjectForKey(ed2.getUuid());\r\n \t\tABeanStructuralElementInstance aBean = (ABeanStructuralElementInstance) sei2Object;\r\n \t\tassertEquals(ed2, aBean);\r\n-\t\t\r\n-\t\teditingDomain.getVirSatCommandStack().execute(new RecordingCommand(editingDomain) {\r\n-\t\t\t@Override\r\n-\t\t\tprotected void doExecute() {\r\n-\t\t\t\trs.getAndAddStructuralElementInstanceResource(sei);\r\n-\t\t\t}\r\n-\t\t});\r\n \r\n-\t\tBoolean permission = DiagramHelper.hasDiagramWritePermission(sei);\r\n-\t\tassertEquals(true, permission);\r\n-\t\t\r\n-\t\tResource resEd = rs.getStructuralElementInstanceResource(ed.getStructuralElementInstance());\r\n-\t\tresEd.getContents().add(ed.getStructuralElementInstance());\r\n+\t\tgetAndAddStructuralElementInstance(sei1);\r\n+\t\tcheckDiagramWritePermissionForStructuralElement(sei1);\r\n+\r\n+\t\taddStructuralElementToResource(ed1);\r\n \t\tObject obj = beanIndependenceSolver.getBusinessObjectForKey(seiKey);\r\n \t\taBean = (ABeanStructuralElementInstance) obj;\r\n-\t\tassertEquals(ed, aBean);\r\n+\t\tassertEquals(ed1, aBean);\r\n+\t}\r\n+\r\n+\t@Test\r\n+\tpublic void testSolveIndependenceForBeanProperty() throws CoreException, IOException {\r\n+\t\tObject beanNoteObj = beanIndependenceSolver.getBusinessObjectForKey(testDocument2.getNoteBean().getUuid());\r\n+\t\tassertEquals(testDocument2.getNoteBean(), beanNoteObj);\r\n+\t}\r\n+\r\n+\t@Test\r\n+\tpublic void testSolveIndependenceForCa() throws CoreException, IOException {\r\n+\t\tString caKey = beanIndependenceSolver.getKeyForBusinessObject(testDocument);\r\n+\t\tassertEquals(DOCUMENTUUID, caKey);\r\n \r\n \t\tObject documentObj = beanIndependenceSolver.getBusinessObjectForKey(testDocument2.getUuid());\r\n-\t\tABeanCategoryAssignment aCategory = (ABeanCategoryAssignment) documentObj;\r\n-\t\tassertEquals(testDocument2, aCategory);\r\n-\t\t\r\n+\t\tassertEquals(testDocument2, documentObj);\r\n+\t}\r\n+\r\n+\t@Test\r\n+\tpublic void testSolveIndependenceNull() throws CoreException, IOException {\r\n \t\tassertEquals(null, beanIndependenceSolver.getKeyForBusinessObject(null));\r\n+\t}\r\n+\r\n+\tprivate void checkDiagramWritePermissionForStructuralElement(StructuralElementInstance sei) {\r\n+\t\tBoolean permission = DiagramHelper.hasDiagramWritePermission(sei);\r\n+\t\tassertEquals(true, permission);\r\n+\t}\r\n \r\n+\tprivate void addStructuralElementToResource(ElementDefinition ed) {\r\n+\t\tResource resEd2 = rs.getStructuralElementInstanceResource(ed.getStructuralElementInstance());\r\n+\t\tresEd2.getContents().add(ed.getStructuralElementInstance());\r\n+\t}\r\n+\r\n+\t/**\r\n+\t * @return IDiagramTypeProvider\r\n+\t */\r\n+\tprivate IDiagramTypeProvider getDiagramTypeProvider() {\r\n+\t\t// Create The diagram\r\n+\t\tDiagram diagram = Graphiti.getPeCreateService().createDiagram(\"test\", \"testDiagram\", true);\r\n+\t\tIFolder diagramFolder = testProject.getFolder(\"src/diagrams/\");\r\n+\t\tIFile diagramFile = diagramFolder.getFile(\"testDiagram\" + \".\" + \"test\");\r\n+\t\tURI uri = URI.createPlatformResourceURI(diagramFile.getFullPath().toString(), true);\r\n+\t\tDiagramHelper.createDiagram(uri, diagram, rs);\r\n+\r\n+\t\tIDiagramTypeProvider dtp = GraphitiInternal.getEmfService().getDTPForDiagram(diagram);\r\n+\t\tGraphitiInternal.getEmfService().wireDTPToDiagram(diagram, dtp);\r\n+\t\tdtp.init(diagram, null);\r\n+\t\treturn dtp;\r\n+\t}\r\n+\r\n+\t/**\r\n+\t * @param sei StructuralElementInstance\r\n+\t */\r\n+\tprivate void getAndAddStructuralElementInstance(StructuralElementInstance sei) {\r\n+\t\teditingDomain.getVirSatCommandStack().execute(new RecordingCommand(editingDomain) {\r\n+\t\t\t@Override\r\n+\t\t\tprotected void doExecute() {\r\n+\t\t\t\trs.getAndAddStructuralElementInstanceResource(sei);\r\n+\t\t\t}\r\n+\t\t});\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "148f424fe5de233d50aaebdc8b6d37c113344e56"}, "originalPosition": 211}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzc1MDc4Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\teditingDomain.getVirSatCommandStack().execute(new RecordingCommand(editingDomain) {\n          \n          \n            \n            \t\t\t@Override\n          \n          \n            \n            \t\t\tprotected void doExecute() {\n          \n          \n            \n            \t\t\t\trs.getAndAddStructuralElementInstanceResource(sei);\n          \n          \n            \n            \t\t\t}\n          \n          \n            \n            \t\t});\n          \n          \n            \n            \t\texecuteAsCommand(() -> rs.getAndAddStructuralElementInstanceResource(sei));", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/594#discussion_r433750786", "createdAt": "2020-06-02T09:41:03Z", "author": {"login": "PhilMFischer"}, "path": "de.dlr.sc.virsat.graphiti.test/src/de/dlr/sc/virsat/graphiti/diagram/BeanIndependenceSolverTest.java", "diffHunk": "@@ -76,91 +86,108 @@ protected void doExecute() {\n \t\t\t\taccePs.createAddActiveConceptCommand(editingDomain, repository).execute();\r\n \t\t\t\tActiveConceptHelper acHelper = new ActiveConceptHelper(repository);\r\n \t\t\t\tconceptEgscc = acHelper.getConcept(CONCEPT_ID_EGSCC);\r\n-\r\n \t\t\t}\r\n-\t\t});\t\r\n-\t}\r\n+\t\t});\r\n \r\n-\t@Test\r\n-\tpublic void testSolveIndependence() throws CoreException, IOException { \t\r\n-\t\t// test getConcept\r\n \t\tConcept concept = DiagramHelper.getConcept(editingDomain, CONCEPT_ID_EGSCC);\r\n \t\tassertEquals(concept, conceptEgscc);\r\n-\t\t\r\n-\t\t// create Seis and Cas\r\n-\t\tElementDefinition ed = new ElementDefinition(conceptEgscc);\r\n-\t\tStructuralElementInstance sei = ed.getStructuralElementInstance();\r\n-\t\tsei.setUuid(new VirSatUuid(UUID));\r\n-\t\t\r\n-\t\tDocument testDocument2 = new Document(concept);\r\n-\t\ted.add(testDocument2);\r\n-\r\n-\t\tElementDefinition ed2 = new ElementDefinition(conceptEgscc);\r\n-\t\tStructuralElementInstance sei2 = ed2.getStructuralElementInstance();\r\n-\t\t\r\n-\t\tDocument testDocument = new Document(concept);\r\n-\t\t\r\n-\t\t// Create The diagram\r\n-\t\tDiagram diagram = Graphiti.getPeCreateService().createDiagram(\"test\", \"testDiagram\", true);\r\n-\t\tIFolder diagramFolder = testProject.getFolder(\"src/diagrams/\");  \r\n-\t\tIFile diagramFile = diagramFolder.getFile(\"testDiagram\" + \".\" + \"test\");  \r\n-\t\tURI uri = URI.createPlatformResourceURI(diagramFile.getFullPath().toString(), true);\r\n-\t\tDiagramHelper.createDiagram(uri, diagram, rs);\r\n \r\n-\t\tIDiagramTypeProvider dtp = GraphitiInternal.getEmfService().getDTPForDiagram(diagram);\r\n-\t\tGraphitiInternal.getEmfService().wireDTPToDiagram(diagram, dtp);\r\n-\t\tdtp.init(diagram, null);\r\n-\t\tBeanIndependenceSolver beanIndependenceSolver = new BeanIndependenceSolver(dtp);\r\n-\t\tString seiKey = beanIndependenceSolver.getKeyForBusinessObject(ed);\r\n-\t\tassertEquals(UUID, seiKey);\r\n+\t\ttestDocument = new Document(concept);\r\n+\t\ttestDocument2 = new Document(concept);\r\n+\t\ttestDocument.getTypeInstance().setUuid(new VirSatUuid(DOCUMENTUUID));\r\n \r\n-\t\tseiKey = beanIndependenceSolver.getKeyForBusinessObject(ed);\r\n-\t\tassertEquals(UUID, seiKey);\r\n+\t\tIDiagramTypeProvider dtp = getDiagramTypeProvider();\r\n+\t\tbeanIndependenceSolver = new BeanIndependenceSolver(dtp);\r\n \r\n-\t\ttestDocument.getTypeInstance().setUuid(new VirSatUuid(DOCUMENTUUID));\r\n-\t\tString caKey = beanIndependenceSolver.getKeyForBusinessObject(testDocument);\r\n-\t\tassertEquals(DOCUMENTUUID, caKey);\r\n+\t\ted1 = new ElementDefinition(conceptEgscc);\r\n+\t\ted2 = new ElementDefinition(conceptEgscc);\r\n+\t\tsei1 = ed1.getStructuralElementInstance();\r\n+\t\tsei2 = ed2.getStructuralElementInstance();\r\n+\t\tsei1.setUuid(new VirSatUuid(UUID));\r\n+\t\ted1.add(testDocument2);\r\n+\t\tgetAndAddStructuralElementInstance(sei1);\r\n \r\n-\t\tcaKey = beanIndependenceSolver.getKeyForBusinessObject(testDocument);\r\n-\t\tassertEquals(DOCUMENTUUID, caKey);\r\n+\t\tcommand = CreateAddStructuralElementInstanceCommand.create(editingDomain, repository, ed1.getStructuralElementInstance());\r\n+\t}\r\n \r\n-\t\tCommand command = CreateAddStructuralElementInstanceCommand.create(editingDomain, repository, ed.getStructuralElementInstance());\r\n-\t\teditingDomain.getCommandStack().execute(command);\r\n+\t@Test\r\n+\tpublic void testSolveIndependenceForSei() throws CoreException, IOException {\r\n+\t\tString seiKey = beanIndependenceSolver.getKeyForBusinessObject(ed1);\r\n+\t\tassertEquals(UUID, seiKey);\r\n \r\n-\t\teditingDomain.getVirSatCommandStack().execute(new RecordingCommand(editingDomain) {\r\n-\t\t\t@Override\r\n-\t\t\tprotected void doExecute() {\r\n-\t\t\t\trs.getAndAddStructuralElementInstanceResource(sei2);\r\n-\t\t\t}\r\n-\t\t});\r\n+\t\teditingDomain.getCommandStack().execute(command);\r\n+\t\tgetAndAddStructuralElementInstance(sei2);\r\n \r\n-\t\tResource resEd2 = rs.getStructuralElementInstanceResource(ed2.getStructuralElementInstance());\r\n-\t\tresEd2.getContents().add(ed2.getStructuralElementInstance());\r\n+\t\taddStructuralElementToResource(ed2);\r\n \t\tObject sei2Object = beanIndependenceSolver.getBusinessObjectForKey(ed2.getUuid());\r\n \t\tABeanStructuralElementInstance aBean = (ABeanStructuralElementInstance) sei2Object;\r\n \t\tassertEquals(ed2, aBean);\r\n-\t\t\r\n-\t\teditingDomain.getVirSatCommandStack().execute(new RecordingCommand(editingDomain) {\r\n-\t\t\t@Override\r\n-\t\t\tprotected void doExecute() {\r\n-\t\t\t\trs.getAndAddStructuralElementInstanceResource(sei);\r\n-\t\t\t}\r\n-\t\t});\r\n \r\n-\t\tBoolean permission = DiagramHelper.hasDiagramWritePermission(sei);\r\n-\t\tassertEquals(true, permission);\r\n-\t\t\r\n-\t\tResource resEd = rs.getStructuralElementInstanceResource(ed.getStructuralElementInstance());\r\n-\t\tresEd.getContents().add(ed.getStructuralElementInstance());\r\n+\t\tgetAndAddStructuralElementInstance(sei1);\r\n+\t\tcheckDiagramWritePermissionForStructuralElement(sei1);\r\n+\r\n+\t\taddStructuralElementToResource(ed1);\r\n \t\tObject obj = beanIndependenceSolver.getBusinessObjectForKey(seiKey);\r\n \t\taBean = (ABeanStructuralElementInstance) obj;\r\n-\t\tassertEquals(ed, aBean);\r\n+\t\tassertEquals(ed1, aBean);\r\n+\t}\r\n+\r\n+\t@Test\r\n+\tpublic void testSolveIndependenceForBeanProperty() throws CoreException, IOException {\r\n+\t\tObject beanNoteObj = beanIndependenceSolver.getBusinessObjectForKey(testDocument2.getNoteBean().getUuid());\r\n+\t\tassertEquals(testDocument2.getNoteBean(), beanNoteObj);\r\n+\t}\r\n+\r\n+\t@Test\r\n+\tpublic void testSolveIndependenceForCa() throws CoreException, IOException {\r\n+\t\tString caKey = beanIndependenceSolver.getKeyForBusinessObject(testDocument);\r\n+\t\tassertEquals(DOCUMENTUUID, caKey);\r\n \r\n \t\tObject documentObj = beanIndependenceSolver.getBusinessObjectForKey(testDocument2.getUuid());\r\n-\t\tABeanCategoryAssignment aCategory = (ABeanCategoryAssignment) documentObj;\r\n-\t\tassertEquals(testDocument2, aCategory);\r\n-\t\t\r\n+\t\tassertEquals(testDocument2, documentObj);\r\n+\t}\r\n+\r\n+\t@Test\r\n+\tpublic void testSolveIndependenceNull() throws CoreException, IOException {\r\n \t\tassertEquals(null, beanIndependenceSolver.getKeyForBusinessObject(null));\r\n+\t}\r\n+\r\n+\tprivate void checkDiagramWritePermissionForStructuralElement(StructuralElementInstance sei) {\r\n+\t\tBoolean permission = DiagramHelper.hasDiagramWritePermission(sei);\r\n+\t\tassertEquals(true, permission);\r\n+\t}\r\n \r\n+\tprivate void addStructuralElementToResource(ElementDefinition ed) {\r\n+\t\tResource resEd2 = rs.getStructuralElementInstanceResource(ed.getStructuralElementInstance());\r\n+\t\tresEd2.getContents().add(ed.getStructuralElementInstance());\r\n+\t}\r\n+\r\n+\t/**\r\n+\t * @return IDiagramTypeProvider\r\n+\t */\r\n+\tprivate IDiagramTypeProvider getDiagramTypeProvider() {\r\n+\t\t// Create The diagram\r\n+\t\tDiagram diagram = Graphiti.getPeCreateService().createDiagram(\"test\", \"testDiagram\", true);\r\n+\t\tIFolder diagramFolder = testProject.getFolder(\"src/diagrams/\");\r\n+\t\tIFile diagramFile = diagramFolder.getFile(\"testDiagram\" + \".\" + \"test\");\r\n+\t\tURI uri = URI.createPlatformResourceURI(diagramFile.getFullPath().toString(), true);\r\n+\t\tDiagramHelper.createDiagram(uri, diagram, rs);\r\n+\r\n+\t\tIDiagramTypeProvider dtp = GraphitiInternal.getEmfService().getDTPForDiagram(diagram);\r\n+\t\tGraphitiInternal.getEmfService().wireDTPToDiagram(diagram, dtp);\r\n+\t\tdtp.init(diagram, null);\r\n+\t\treturn dtp;\r\n+\t}\r\n+\r\n+\t/**\r\n+\t * @param sei StructuralElementInstance\r\n+\t */\r\n+\tprivate void getAndAddStructuralElementInstance(StructuralElementInstance sei) {\r\n+\t\teditingDomain.getVirSatCommandStack().execute(new RecordingCommand(editingDomain) {\r\n+\t\t\t@Override\r\n+\t\t\tprotected void doExecute() {\r\n+\t\t\t\trs.getAndAddStructuralElementInstanceResource(sei);\r\n+\t\t\t}\r\n+\t\t});\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "148f424fe5de233d50aaebdc8b6d37c113344e56"}, "originalPosition": 211}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "476fc87722baa8dc7ff3843f953e86237625d818", "author": {"user": {"login": "christoph-pietsch-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/476fc87722baa8dc7ff3843f953e86237625d818", "committedDate": "2020-06-02T11:07:24Z", "message": "Resolved remarks - (Task #286)\n\n---\nTask #286: Handle different property types in BeanIndependenceSolver"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 663, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}