{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk1NTE4NzUw", "number": 742, "title": "Transform SEIs from/to JSON", "bodyText": "Added XML annotations to ABeanStructuralElementInstance:\n\nHad to add new methods (also to IBeanStructuralElementInstance)\nHad to add an adapter to marshall seis to the uuid: ABeanStructuralElementInstanceAdapter\n\n\n\nAdded the TestStructuralElementInstanceTest and test resources to test the un-/marshalling\n\n\nThe ABeanStructuralElementInstanceAdapter is similar to the ABeanObjectAdapter used for the ReferenceProperties so refactored the TypeInstanceAdapter to  IUuidAdapter to be applicable for both\n\n\nAdded abstract AUuidAdapterTest for adapter tests that use the IUuidAdapter:\n\nRefactored ABeanObjectAdapterTest \nRefactored and rename ATypeInstanceAdapterTest to IUuidAdapterTest\nAdded ABeanStructuralElementInstanceAdapterTest \n\n\n\nCloses #725", "createdAt": "2020-09-30T13:41:08Z", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/742", "merged": true, "mergeCommit": {"oid": "cf90f805e514b32b069e288e810ed47531d6d761"}, "closed": true, "closedAt": "2020-10-22T12:24:38Z", "author": {"login": "JAmmermann-DLR"}, "timelineItems": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdKCWLpgH2gAyNDk1NTE4NzUwOjQwMDY0YjEwNGMzZTA2YjYxZDgwMmM1ZTE3NTVjZDM4YmJmZDU3ZjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdVBD6AgFqTUxNDY2NTYwNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "40064b104c3e06b61d802c5e1755cd38bbfd57f6", "author": {"user": {"login": "JAmmermann-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/40064b104c3e06b61d802c5e1755cd38bbfd57f6", "committedDate": "2020-09-18T09:40:31Z", "message": "Add TestStructuralElementInstanceTest - (Task #725)\n\n- Add methods and annotations to ABeanStructuralElementInstance\n- Refactor ATypeInstanceAdapter to work on IUuids\n- Add ABeanCategoryAssignmentAdapter and\nNotAbstractBeanCategoryAssignment classes\n- Add test resources\n\n---\nTask #725: Transform SEIs, Concepts and Disciplines from/to JSON"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "72ca43ddf42732687b6b9f44673e1f81251255ec", "author": {"user": {"login": "JAmmermann-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/72ca43ddf42732687b6b9f44673e1f81251255ec", "committedDate": "2020-09-24T11:04:53Z", "message": "Also un-/marshall parent SEI - (Task #725)\n\n- Add an adapter for SEIs\n- Add the adapter to the JAXBUtility\n- Remove old test case and resource\n- Update test case, also check idempotence\n\n---\nTask #725: Transform SEIs, Concepts and Disciplines from/to JSON"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "36c889589573d51c3bf4dae1926fff34536e546e", "author": {"user": {"login": "JAmmermann-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/36c889589573d51c3bf4dae1926fff34536e546e", "committedDate": "2020-09-24T11:23:13Z", "message": "Rename TypeInstanceAdapter to IUuidAdapter - (Task #725)\n\nBecause it now works on IUuids so it can be reused for the SEIs.\n\n---\nTask #725: Transform SEIs, Concepts and Disciplines from/to JSON"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c30069ff9cd5205737d380cb14b3ca60d04d983", "author": {"user": {"login": "JAmmermann-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/4c30069ff9cd5205737d380cb14b3ca60d04d983", "committedDate": "2020-09-24T11:42:56Z", "message": "Add new methods to IBeanStructuralElementInstance - (Task #725)\n\n---\nTask #725: Transform SEIs, Concepts and Disciplines from/to JSON"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d9d0398a114467c55fd6e3c6e250087bf530057", "author": {"user": {"login": "JAmmermann-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/8d9d0398a114467c55fd6e3c6e250087bf530057", "committedDate": "2020-09-28T09:11:45Z", "message": "Add test cases for the new Adapters - (Task #725)\n\n- Add test cases for ABeanStructuralElementAdapter and\nACategoryAssignmentAdapter\n- Add them to all tests\n- Minor changes in ABeanCateogryAssignmentAdapter\n\n---\nTask #725: Transform SEIs, Concepts and Disciplines from/to JSON"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7c4360202b1d37cc5dfde3485bf612b81f8a459d", "author": {"user": {"login": "JAmmermann-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/7c4360202b1d37cc5dfde3485bf612b81f8a459d", "committedDate": "2020-09-28T09:29:19Z", "message": "Add test case for NotAbstractBeanCategoryAssignment - (Task #725)\n\n---\nTask #725: Transform SEIs, Concepts and Disciplines from/to JSON"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "20fcbce2ff5e1e815f239d7bc9838d69ee5c5f0b", "author": {"user": {"login": "JAmmermann-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/20fcbce2ff5e1e815f239d7bc9838d69ee5c5f0b", "committedDate": "2020-09-28T10:58:08Z", "message": "Remove adapter test redundancy - (Task #725)\n\n- Add AUuidAdapterTest and use it in IUuidAdapterTest,\nABeanObjectAdapterTest and ABeanStructuralElementInstanceTest\n\n---\nTask #725: Transform SEIs, Concepts and Disciplines from/to JSON"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d6a1d6018dd8e52365336147f6a21195b16dba7f", "author": {"user": {"login": "JAmmermann-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/d6a1d6018dd8e52365336147f6a21195b16dba7f", "committedDate": "2020-09-30T13:01:36Z", "message": "Merge branch 'development' into feature/task_725-Transform_SEIs,_Conce"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cac87caf321fd9ea3f775272878fe736680a7745", "author": {"user": {"login": "JAmmermann-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/cac87caf321fd9ea3f775272878fe736680a7745", "committedDate": "2020-09-30T13:25:34Z", "message": "Use BeanCategoryAssignment in ABeanSEI - (Task #725)\n\nSo we don't have to use an adapter for the ABeanCategoryAssignment, and\ncan delete:\n- ABeanCategoryAssignmentAdapter and test case\n- NotAbstractBeanCategoryAssignment and test case\n\n---\nTask #725: Transform SEIs from/to JSON"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxOTU1MTIy", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/742#pullrequestreview-501955122", "createdAt": "2020-10-05T11:20:11Z", "commit": {"oid": "cac87caf321fd9ea3f775272878fe736680a7745"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxMToyMDoxMVrOHcYiqQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxMToyOToxNlrOHcY1tg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTUyNDI2NQ==", "bodyText": "Why do we need the prop order? I thought the XmlID tag makes the structuralElementInstance property first in line?", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/742#discussion_r499524265", "createdAt": "2020-10-05T11:20:11Z", "author": {"login": "SaMuellerDLR"}, "path": "de.dlr.sc.virsat.model.edit/src/de/dlr/sc/virsat/model/concept/types/structural/ABeanStructuralElementInstance.java", "diffHunk": "@@ -38,6 +52,10 @@\n  * @author fisc_ph\r\n  *\r\n  */\r\n+@XmlAccessorType(XmlAccessType.NONE)\r\n+@XmlRootElement\r\n+// Ensure that the sei (by uuid) gets unmarshalled first\r\n+@XmlType(propOrder = {\"structuralElementInstance\", \"name\", \"parentSeiBean\", \"categoryAssignments\", \"children\", \"superSeis\"})\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cac87caf321fd9ea3f775272878fe736680a7745"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTUyNzM0NQ==", "bodyText": "There seems to be some inconsistency between using the abstract classes and the generic classes.\nE.g. the getChildren uses the abstract class for seis and the getCategoryAssignments uses the generic class.", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/742#discussion_r499527345", "createdAt": "2020-10-05T11:25:58Z", "author": {"login": "SaMuellerDLR"}, "path": "de.dlr.sc.virsat.model.edit/src/de/dlr/sc/virsat/model/concept/types/structural/ABeanStructuralElementInstance.java", "diffHunk": "@@ -109,6 +131,34 @@ public Command remove(EditingDomain ed, IBeanCategoryAssignment bca) {\n \t\treturn bcaHelper.getAllBeanCategories(sei, catBeanClazz);\r\n \t}\r\n \t\r\n+\t@Override\r\n+\tpublic List<BeanCategoryAssignment> getCategoryAssignments() {\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cac87caf321fd9ea3f775272878fe736680a7745"}, "originalPosition": 73}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTUyODExNA==", "bodyText": "Maybe just getParent / setParent ?", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/742#discussion_r499528114", "createdAt": "2020-10-05T11:27:21Z", "author": {"login": "SaMuellerDLR"}, "path": "de.dlr.sc.virsat.model.edit/src/de/dlr/sc/virsat/model/concept/types/structural/ABeanStructuralElementInstance.java", "diffHunk": "@@ -191,6 +283,8 @@ public String getUuid() {\n \t}\r\n \r\n \t@Override\r\n+\t@XmlElement(name = \"parent\")\r\n+\t@XmlJavaTypeAdapter(ABeanStructuralElementInstanceAdapter.class)\r\n \tpublic BeanStructuralElementInstance getParentSeiBean() {\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cac87caf321fd9ea3f775272878fe736680a7745"}, "originalPosition": 165}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTUyODgyMg==", "bodyText": "Using the abstract bean class in the interface declaration seems weird to me... Maybe we can consistently use the IBeanStructuralElementInstance everywhere?", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/742#discussion_r499528822", "createdAt": "2020-10-05T11:28:37Z", "author": {"login": "SaMuellerDLR"}, "path": "de.dlr.sc.virsat.model.edit/src/de/dlr/sc/virsat/model/concept/types/structural/IBeanStructuralElementInstance.java", "diffHunk": "@@ -104,6 +105,18 @@\n \t */\r\n \t<SEI_TYPE extends IBeanStructuralElementInstance> List<SEI_TYPE> getChildren(Class<SEI_TYPE> beanSeiClazz);\r\n \t\r\n+\t/**\r\n+\t * This method hands back all child Bean wrapped StructuralElementInstances of the abstract type ABeanStructuralElementInstance\r\n+\t * @return all children which could be found in the current Bean SEI\r\n+\t */\r\n+\tList<ABeanStructuralElementInstance> getChildren();\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cac87caf321fd9ea3f775272878fe736680a7745"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTUyOTE0Mg==", "bodyText": "WTF since when are there inline codecov warnings :D:D:D:D\nSo apprantly this is not tested.", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/742#discussion_r499529142", "createdAt": "2020-10-05T11:29:16Z", "author": {"login": "SaMuellerDLR"}, "path": "de.dlr.sc.virsat.model.edit/src/de/dlr/sc/virsat/model/dvlm/json/ABeanStructuralElementInstanceAdapter.java", "diffHunk": "@@ -0,0 +1,56 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 German Aerospace Center (DLR), Simulation and Software Technology, Germany.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0.\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *******************************************************************************/\n+package de.dlr.sc.virsat.model.dvlm.json;\n+\n+import javax.xml.bind.annotation.adapters.XmlAdapter;\n+\n+import org.eclipse.emf.ecore.resource.ResourceSet;\n+\n+import de.dlr.sc.virsat.model.concept.types.structural.ABeanStructuralElementInstance;\n+import de.dlr.sc.virsat.model.concept.types.structural.BeanStructuralElementInstance;\n+import de.dlr.sc.virsat.model.dvlm.structural.StructuralElementInstance;\n+\n+/**\n+ * Adapter for a referenced ABeanStructuralElementInstance from/to a UUID\n+ * that uses the IUuidAdapter\n+ */\n+public class ABeanStructuralElementInstanceAdapter extends XmlAdapter<String, ABeanStructuralElementInstance> {\n+\n+\tprivate ResourceSet resourceSet;\n+\t\n+\tpublic ABeanStructuralElementInstanceAdapter() { };\n+\t\n+\tpublic ABeanStructuralElementInstanceAdapter(ResourceSet resourceSet) {\n+\t\tthis.resourceSet = resourceSet;\n+\t}\n+\t\n+\t@Override\n+\tpublic String marshal(ABeanStructuralElementInstance v) throws Exception {\n+\t\tif (v == null) {\n+\t\t\treturn null;\n+\t\t} else {\n+\t\t\treturn v.getUuid();\n+\t\t}\n+\t}\n+\t\n+\t@Override\n+\tpublic ABeanStructuralElementInstance unmarshal(String uuid) throws Exception {\n+\t\tif (resourceSet == null) {\n+\t\t\tthrow new NullPointerException(\"No resource set for unmarshalling set in the adapter\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cac87caf321fd9ea3f775272878fe736680a7745"}, "originalPosition": 46}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "28316f1a4b511fa56c619ec9eed71781e5122f19", "author": {"user": {"login": "JAmmermann-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/28316f1a4b511fa56c619ec9eed71781e5122f19", "committedDate": "2020-10-08T07:55:09Z", "message": "Fix test structure in AUuidAdapterTest - (Task #725)\n\nThe adapters have to be instantiated in the child classes.\n\n---\nTask #725: Transform SEIs from/to JSON"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e57cdf6d00537efc237ccdbdfde5fefd88e6f57", "author": {"user": {"login": "JAmmermann-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/8e57cdf6d00537efc237ccdbdfde5fefd88e6f57", "committedDate": "2020-10-08T09:17:03Z", "message": "Changes due to review - (Task #725)\n\n- Removed @XmlID Annotations\n- Renamed setParentSeiBean to setParent\n- Added comments to explain why we use abstract and generic classes.\n\n---\nTask #725: Transform SEIs from/to JSON"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0ODMxNzIy", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/742#pullrequestreview-504831722", "createdAt": "2020-10-08T14:16:41Z", "commit": {"oid": "8e57cdf6d00537efc237ccdbdfde5fefd88e6f57"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEyNTMxODAz", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/742#pullrequestreview-512531803", "createdAt": "2020-10-20T09:53:26Z", "commit": {"oid": "8e57cdf6d00537efc237ccdbdfde5fefd88e6f57"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQwOTo1MzoyNlrOHk0M7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQxMDozMjo0MFrOHk1sJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODM2NjA2MQ==", "bodyText": "Please wwrite some comment to mention what the intention of the test is.", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/742#discussion_r508366061", "createdAt": "2020-10-20T09:53:26Z", "author": {"login": "PhilMFischer"}, "path": "de.dlr.sc.virsat.model.edit.test/src/de/dlr/sc/virsat/model/dvlm/json/ABeanObjectAdapterTest.java", "diffHunk": "@@ -13,32 +13,25 @@\n import static org.junit.Assert.assertNull;\n import static org.junit.Assert.assertThrows;\n \n-import org.eclipse.emf.ecore.resource.Resource;\n-import org.eclipse.emf.ecore.resource.ResourceSet;\n-import org.eclipse.emf.ecore.resource.impl.ResourceImpl;\n+import javax.xml.bind.annotation.adapters.XmlAdapter;\n+\n import org.eclipse.emf.ecore.resource.impl.ResourceSetImpl;\n import org.junit.Before;\n-import org.junit.Test;\n \n import de.dlr.sc.virsat.model.concept.types.ABeanObject;\n import de.dlr.sc.virsat.model.concept.types.property.BeanPropertyString;\n import de.dlr.sc.virsat.model.dvlm.categories.propertydefinitions.PropertydefinitionsFactory;\n import de.dlr.sc.virsat.model.dvlm.categories.propertyinstances.PropertyinstancesFactory;\n import de.dlr.sc.virsat.model.dvlm.categories.propertyinstances.ValuePropertyInstance;\n-import de.dlr.sc.virsat.model.dvlm.types.impl.VirSatUuid;\n ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e57cdf6d00537efc237ccdbdfde5fefd88e6f57"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODM2NzI1NA==", "bodyText": "They are the same because they are compared by their internal type instance?", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/742#discussion_r508367254", "createdAt": "2020-10-20T09:55:10Z", "author": {"login": "PhilMFischer"}, "path": "de.dlr.sc.virsat.model.edit.test/src/de/dlr/sc/virsat/model/dvlm/json/ABeanObjectAdapterTest.java", "diffHunk": "@@ -47,43 +40,53 @@ public void setUp() throws Exception {\n \t\t\n \t\tbean = new BeanPropertyString(vpi);\n \t\t\n-\t\tadapter = new ABeanObjectAdapter(resourceSet);\n+\t\tadapter = new ABeanObjectAdapter(resourceSet);\t\t\n \t}\n-\n-\t@Test\n-\tpublic void testMarshalABeanObject() throws Exception {\n-\t\tString uuid = adapter.marshal(null);\n+\t@SuppressWarnings({ \"rawtypes\", \"unchecked\" })\n+\t@Override\n+\tpublic void testMarshallNull() throws Exception {\n+\t\tString uuid = ((XmlAdapter<String, ABeanObject>) adapter).marshal(null);\n \t\tassertNull(\"No bean returns null\", uuid);\n-\t\t\n-\t\tuuid = adapter.marshal(bean);\n+\t}\n+\n+\t@SuppressWarnings({ \"unchecked\", \"rawtypes\" })\n+\t@Override\n+\tpublic void testMarhall() throws Exception {\n+\t\tString uuid = ((XmlAdapter<String, ABeanObject>) adapter).marshal(bean);\n \t\tassertEquals(\"The right uuid was returned\", UUID.toString(), uuid);\n \t\t\n \t\tvpi.setUuid(null);\n \t\tassertThrows(\"The type instance should have a uuid\",\n \t\t\tNullPointerException.class, () -> {\n-\t\t\t\tadapter.marshal(bean);\n+\t\t\t\t((XmlAdapter<String, ABeanObject>) adapter).marshal(bean);\n \t\t\t}\n \t\t);\n+\t\t\n+\t}\n+\n+\t@SuppressWarnings(\"unchecked\")\n+\t@Override\n+\tpublic void testUnmarhall() throws Exception {\n+\t\t@SuppressWarnings(\"rawtypes\")\n+\t\tABeanObject unmarshalledBean = ((XmlAdapter<String, ABeanObject>) adapter).unmarshal(UUID.toString());\n+\t\tassertEquals(\"The right bean was returned\", bean, (BeanPropertyString) unmarshalledBean);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e57cdf6d00537efc237ccdbdfde5fefd88e6f57"}, "originalPosition": 78}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODM2NzYzOA==", "bodyText": "What does the adapterNoRs stand for?", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/742#discussion_r508367638", "createdAt": "2020-10-20T09:55:46Z", "author": {"login": "PhilMFischer"}, "path": "de.dlr.sc.virsat.model.edit.test/src/de/dlr/sc/virsat/model/dvlm/json/ABeanObjectAdapterTest.java", "diffHunk": "@@ -47,43 +40,53 @@ public void setUp() throws Exception {\n \t\t\n \t\tbean = new BeanPropertyString(vpi);\n \t\t\n-\t\tadapter = new ABeanObjectAdapter(resourceSet);\n+\t\tadapter = new ABeanObjectAdapter(resourceSet);\t\t\n \t}\n-\n-\t@Test\n-\tpublic void testMarshalABeanObject() throws Exception {\n-\t\tString uuid = adapter.marshal(null);\n+\t@SuppressWarnings({ \"rawtypes\", \"unchecked\" })\n+\t@Override\n+\tpublic void testMarshallNull() throws Exception {\n+\t\tString uuid = ((XmlAdapter<String, ABeanObject>) adapter).marshal(null);\n \t\tassertNull(\"No bean returns null\", uuid);\n-\t\t\n-\t\tuuid = adapter.marshal(bean);\n+\t}\n+\n+\t@SuppressWarnings({ \"unchecked\", \"rawtypes\" })\n+\t@Override\n+\tpublic void testMarhall() throws Exception {\n+\t\tString uuid = ((XmlAdapter<String, ABeanObject>) adapter).marshal(bean);\n \t\tassertEquals(\"The right uuid was returned\", UUID.toString(), uuid);\n \t\t\n \t\tvpi.setUuid(null);\n \t\tassertThrows(\"The type instance should have a uuid\",\n \t\t\tNullPointerException.class, () -> {\n-\t\t\t\tadapter.marshal(bean);\n+\t\t\t\t((XmlAdapter<String, ABeanObject>) adapter).marshal(bean);\n \t\t\t}\n \t\t);\n+\t\t\n+\t}\n+\n+\t@SuppressWarnings(\"unchecked\")\n+\t@Override\n+\tpublic void testUnmarhall() throws Exception {\n+\t\t@SuppressWarnings(\"rawtypes\")\n+\t\tABeanObject unmarshalledBean = ((XmlAdapter<String, ABeanObject>) adapter).unmarshal(UUID.toString());\n+\t\tassertEquals(\"The right bean was returned\", bean, (BeanPropertyString) unmarshalledBean);\n \t}\n \t\n-\t@Test\n-\tpublic void testUnmarshalString() throws Exception {\n-\t\tTypeInstanceAdapter adapterNoRs = new TypeInstanceAdapter();\n-\t\tassertThrows(\"A resource set should be set\",\n-\t\t\tNullPointerException.class, () -> {\n-\t\t\t\tadapterNoRs.unmarshal(null);\n-\t\t\t}\n-\t\t);\n-\t\t\n+\t@Override\n+\tpublic void testUnmarshallNull() {\n+\t\tadapterNoRs = new ABeanObjectAdapter();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e57cdf6d00537efc237ccdbdfde5fefd88e6f57"}, "originalPosition": 92}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODM3MDYyMA==", "bodyText": "Rs NoRs stands for Adapter with ResourceSet and Adapter without?", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/742#discussion_r508370620", "createdAt": "2020-10-20T10:00:12Z", "author": {"login": "PhilMFischer"}, "path": "de.dlr.sc.virsat.model.edit.test/src/de/dlr/sc/virsat/model/dvlm/json/AUuidAdapterTest.java", "diffHunk": "@@ -0,0 +1,68 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 German Aerospace Center (DLR), Simulation and Software Technology, Germany.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0.\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *******************************************************************************/\n+package de.dlr.sc.virsat.model.dvlm.json;\n+\n+import static org.junit.Assert.assertThrows;\n+\n+import javax.xml.bind.annotation.adapters.XmlAdapter;\n+\n+import org.eclipse.emf.ecore.resource.Resource;\n+import org.eclipse.emf.ecore.resource.ResourceSet;\n+import org.eclipse.emf.ecore.resource.impl.ResourceImpl;\n+import org.eclipse.emf.ecore.resource.impl.ResourceSetImpl;\n+import org.junit.Before;\n+import org.junit.Test;\n+\n+import de.dlr.sc.virsat.model.dvlm.types.impl.VirSatUuid;\n+\n+public abstract class AUuidAdapterTest {\n+\n+\tprotected XmlAdapter<?, ?> adapter;\n+\tprotected static final VirSatUuid UUID = new VirSatUuid();\n+\tprotected Resource resourceImpl;\n+\tprotected ResourceSet resourceSet;\n+\tprotected XmlAdapter<?, ?> adapterNoRs;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e57cdf6d00537efc237ccdbdfde5fefd88e6f57"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODM3MjQxNg==", "bodyText": "I don't see the comments.", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/742#discussion_r508372416", "createdAt": "2020-10-20T10:03:07Z", "author": {"login": "PhilMFischer"}, "path": "de.dlr.sc.virsat.model.edit/src/de/dlr/sc/virsat/model/concept/types/structural/ABeanStructuralElementInstance.java", "diffHunk": "@@ -109,6 +131,34 @@ public Command remove(EditingDomain ed, IBeanCategoryAssignment bca) {\n \t\treturn bcaHelper.getAllBeanCategories(sei, catBeanClazz);\r\n \t}\r\n \t\r\n+\t@Override\r\n+\tpublic List<BeanCategoryAssignment> getCategoryAssignments() {\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTUyNzM0NQ=="}, "originalCommit": {"oid": "cac87caf321fd9ea3f775272878fe736680a7745"}, "originalPosition": 73}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODM3Mzk0MA==", "bodyText": "We should be aware, that the list we are handing back, does not allow to directly add a CA to the SEI, since it is realy just a pure List of CAs. I think it is ok in case that we are clear on the API contract.\nDo we want to have it like this, since operations such as Bean.getCategoryAssignments().add(CA) will not add a CA to the Bean.", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/742#discussion_r508373940", "createdAt": "2020-10-20T10:05:28Z", "author": {"login": "PhilMFischer"}, "path": "de.dlr.sc.virsat.model.edit/src/de/dlr/sc/virsat/model/concept/types/structural/ABeanStructuralElementInstance.java", "diffHunk": "@@ -109,6 +129,34 @@ public Command remove(EditingDomain ed, IBeanCategoryAssignment bca) {\n \t\treturn bcaHelper.getAllBeanCategories(sei, catBeanClazz);\r\n \t}\r\n \t\r\n+\t@Override\r\n+\tpublic List<BeanCategoryAssignment> getCategoryAssignments() {\r\n+\t\tArrayList<BeanCategoryAssignment> beans = new ArrayList<BeanCategoryAssignment>();\r\n+\t\t\r\n+\t\tfor (CategoryAssignment ca : sei.getCategoryAssignments()) {\r\n+\t\t\tBeanCategoryAssignment bean = new BeanCategoryAssignment();\r\n+\t\t\tbean.setTypeInstance(ca);\r\n+\t\t\tbeans.add(bean);\r\n+\t\t}\r\n+\t\t\r\n+\t\treturn beans;\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e57cdf6d00537efc237ccdbdfde5fefd88e6f57"}, "originalPosition": 80}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODM4MDEyMg==", "bodyText": "After discussion with @SaMuellerDLR we think the returned list should be wrapped to an unmodifiable collection if posible. This would be in line with the contract of all the other metods to get all CAs which are internalley calling the BeanStructuralElementInstanceHelper.", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/742#discussion_r508380122", "createdAt": "2020-10-20T10:15:18Z", "author": {"login": "PhilMFischer"}, "path": "de.dlr.sc.virsat.model.edit/src/de/dlr/sc/virsat/model/concept/types/structural/ABeanStructuralElementInstance.java", "diffHunk": "@@ -109,6 +129,34 @@ public Command remove(EditingDomain ed, IBeanCategoryAssignment bca) {\n \t\treturn bcaHelper.getAllBeanCategories(sei, catBeanClazz);\r\n \t}\r\n \t\r\n+\t@Override\r\n+\tpublic List<BeanCategoryAssignment> getCategoryAssignments() {\r\n+\t\tArrayList<BeanCategoryAssignment> beans = new ArrayList<BeanCategoryAssignment>();\r\n+\t\t\r\n+\t\tfor (CategoryAssignment ca : sei.getCategoryAssignments()) {\r\n+\t\t\tBeanCategoryAssignment bean = new BeanCategoryAssignment();\r\n+\t\t\tbean.setTypeInstance(ca);\r\n+\t\t\tbeans.add(bean);\r\n+\t\t}\r\n+\t\t\r\n+\t\treturn beans;\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODM3Mzk0MA=="}, "originalCommit": {"oid": "8e57cdf6d00537efc237ccdbdfde5fefd88e6f57"}, "originalPosition": 80}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODM4NTc0NQ==", "bodyText": "Is it neccessary to use EList, would List work as well?", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/742#discussion_r508385745", "createdAt": "2020-10-20T10:24:44Z", "author": {"login": "PhilMFischer"}, "path": "de.dlr.sc.virsat.model.edit/src/de/dlr/sc/virsat/model/concept/types/structural/ABeanStructuralElementInstance.java", "diffHunk": "@@ -131,6 +179,27 @@ public void remove(IBeanStructuralElementInstance bsei) {\n \t\treturn bseiHelper.getAllSubBeanSeis(sei, beanSeiClazz);\r\n \t}\r\n \t\r\n+\t@Override\r\n+\tpublic List<ABeanStructuralElementInstance> getChildren() {\r\n+\t\tBeanStructuralElementInstanceHelper bseiHelper = new BeanStructuralElementInstanceHelper();\r\n+\t\treturn new ArrayList<ABeanStructuralElementInstance>(bseiHelper.getAllSubBeanSeis(sei, ABeanStructuralElementInstance.class));\r\n+\t}\r\n+\t\r\n+\t@Override\r\n+\t@XmlElement\r\n+\tpublic void setChildren(List<ABeanStructuralElementInstance> newBeanSeis) {\r\n+\t\tEList<StructuralElementInstance> currentChildren = sei.getChildren();\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e57cdf6d00537efc237ccdbdfde5fefd88e6f57"}, "originalPosition": 114}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODM4NzgyMQ==", "bodyText": "Isn't it possible to directly use the BeanCategoryAssignmentHelper by calling getAllBeanCategories(sei, ABeanCategoryAssignment.class) here?", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/742#discussion_r508387821", "createdAt": "2020-10-20T10:28:12Z", "author": {"login": "PhilMFischer"}, "path": "de.dlr.sc.virsat.model.edit/src/de/dlr/sc/virsat/model/concept/types/structural/ABeanStructuralElementInstance.java", "diffHunk": "@@ -109,6 +129,34 @@ public Command remove(EditingDomain ed, IBeanCategoryAssignment bca) {\n \t\treturn bcaHelper.getAllBeanCategories(sei, catBeanClazz);\r\n \t}\r\n \t\r\n+\t@Override\r\n+\tpublic List<BeanCategoryAssignment> getCategoryAssignments() {\r\n+\t\tArrayList<BeanCategoryAssignment> beans = new ArrayList<BeanCategoryAssignment>();\r\n+\t\t\r\n+\t\tfor (CategoryAssignment ca : sei.getCategoryAssignments()) {\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e57cdf6d00537efc237ccdbdfde5fefd88e6f57"}, "originalPosition": 74}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODM4Nzk4OQ==", "bodyText": "Is EList realy needed?", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/742#discussion_r508387989", "createdAt": "2020-10-20T10:28:30Z", "author": {"login": "PhilMFischer"}, "path": "de.dlr.sc.virsat.model.edit/src/de/dlr/sc/virsat/model/concept/types/structural/ABeanStructuralElementInstance.java", "diffHunk": "@@ -173,6 +242,27 @@ public void removeSuperSei(IBeanStructuralElementInstance bsei) {\n \t\treturn bseiHelper.getSuperBeanSeis(sei, beanSeiClazz);\r\n \t}\r\n \r\n+    @Override\r\n+ \tpublic List<ABeanStructuralElementInstance> getSuperSeis() {\r\n+ \t\tBeanStructuralElementInstanceHelper bseiHelper = new BeanStructuralElementInstanceHelper();\r\n+ \t\treturn new ArrayList<ABeanStructuralElementInstance>(bseiHelper.getSuperBeanSeis(sei, ABeanStructuralElementInstance.class));\r\n+ \t}\r\n+ \t\r\n+    @Override\r\n+ \t@XmlElement\r\n+ \tpublic void setSuperSeis(List<ABeanStructuralElementInstance> newBeanSeis) {\r\n+ \t\tEList<StructuralElementInstance> currentSuperSeis = sei.getSuperSeis();\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e57cdf6d00537efc237ccdbdfde5fefd88e6f57"}, "originalPosition": 142}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODM5MDQzNw==", "bodyText": "SInce it is instantiating the IUuidAdadapter the null check on the resourceSet above could be removed, it will be done in the IUuidAdapter anyway, doesn't it?", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/742#discussion_r508390437", "createdAt": "2020-10-20T10:32:40Z", "author": {"login": "PhilMFischer"}, "path": "de.dlr.sc.virsat.model.edit/src/de/dlr/sc/virsat/model/dvlm/json/ABeanStructuralElementInstanceAdapter.java", "diffHunk": "@@ -0,0 +1,56 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 German Aerospace Center (DLR), Simulation and Software Technology, Germany.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0.\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *******************************************************************************/\n+package de.dlr.sc.virsat.model.dvlm.json;\n+\n+import javax.xml.bind.annotation.adapters.XmlAdapter;\n+\n+import org.eclipse.emf.ecore.resource.ResourceSet;\n+\n+import de.dlr.sc.virsat.model.concept.types.structural.ABeanStructuralElementInstance;\n+import de.dlr.sc.virsat.model.concept.types.structural.BeanStructuralElementInstance;\n+import de.dlr.sc.virsat.model.dvlm.structural.StructuralElementInstance;\n+\n+/**\n+ * Adapter for a referenced ABeanStructuralElementInstance from/to a UUID\n+ * that uses the IUuidAdapter\n+ */\n+public class ABeanStructuralElementInstanceAdapter extends XmlAdapter<String, ABeanStructuralElementInstance> {\n+\n+\tprivate ResourceSet resourceSet;\n+\t\n+\tpublic ABeanStructuralElementInstanceAdapter() { };\n+\t\n+\tpublic ABeanStructuralElementInstanceAdapter(ResourceSet resourceSet) {\n+\t\tthis.resourceSet = resourceSet;\n+\t}\n+\t\n+\t@Override\n+\tpublic String marshal(ABeanStructuralElementInstance v) throws Exception {\n+\t\tif (v == null) {\n+\t\t\treturn null;\n+\t\t} else {\n+\t\t\treturn v.getUuid();\n+\t\t}\n+\t}\n+\t\n+\t@Override\n+\tpublic ABeanStructuralElementInstance unmarshal(String uuid) throws Exception {\n+\t\tif (resourceSet == null) {\n+\t\t\tthrow new NullPointerException(\"No resource set for unmarshalling set in the adapter\");\n+\t\t}\n+\t\t\n+\t\t// Get the sei from the uuid\n+\t\tIUuidAdapter typeInstanceAdapter = new IUuidAdapter(resourceSet);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e57cdf6d00537efc237ccdbdfde5fefd88e6f57"}, "originalPosition": 50}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "839c1b55ff0c2c2fe715c0bb652a4dc4d0955cbe", "author": {"user": {"login": "JAmmermann-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/839c1b55ff0c2c2fe715c0bb652a4dc4d0955cbe", "committedDate": "2020-10-20T11:26:35Z", "message": "Change adapters due to review - (Task #725)\n\n- Remove unnecessary null checks\n- Refactor unclear variable names\n\n---\nTask #725: Transform SEIs from/to JSON"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "57fd5e5ecd9ca565bb86a20780fc1518a405d76a", "author": {"user": {"login": "JAmmermann-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/57fd5e5ecd9ca565bb86a20780fc1518a405d76a", "committedDate": "2020-10-20T12:19:14Z", "message": "Rename ELists to Lists - (Task #725)\n\n---\nTask #725: Transform SEIs from/to JSON"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0aa85f3005c1e4ef1f96ca3b88d38a8c27f47c35", "author": {"user": {"login": "JAmmermann-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/0aa85f3005c1e4ef1f96ca3b88d38a8c27f47c35", "committedDate": "2020-10-21T08:36:20Z", "message": "Make Lists unmodifiable again - (Task #725)\n\nNow the contract of the interface is not broken.\n- Added shadow functions that are used by JAXB instead, this allows the\noriginal functions to return unmodifiable lists\n- Moved function to getCAs into the BeanCategoryAssignmentHelper\n\n---\nTask #725: Transform SEIs from/to JSON"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a3ee162f7d05090e1b70824e0a0fef2846395c3b", "author": {"user": {"login": "JAmmermann-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/a3ee162f7d05090e1b70824e0a0fef2846395c3b", "committedDate": "2020-10-21T08:55:19Z", "message": "Merge branch 'development' into feature/task_725-Transform_SEIs,_Conce"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzNTI2NjE2", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/742#pullrequestreview-513526616", "createdAt": "2020-10-21T10:23:31Z", "commit": {"oid": "a3ee162f7d05090e1b70824e0a0fef2846395c3b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxMDoyMzozMVrOHlk6sQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxMDoyMzozMVrOHlk6sQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTE2NDIwOQ==", "bodyText": "Please provide a test case for this refactored method.", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/742#discussion_r509164209", "createdAt": "2020-10-21T10:23:31Z", "author": {"login": "PhilMFischer"}, "path": "de.dlr.sc.virsat.model.edit/src/de/dlr/sc/virsat/model/concept/types/util/BeanCategoryAssignmentHelper.java", "diffHunk": "@@ -118,6 +119,23 @@\n \t\treturn Collections.unmodifiableList(caBeans);\r\n \t}\r\n \t\r\n+\t/**\r\n+\t * Call this method to hand back the CategoryAssignment wrapped in a BeanCategoryAssignment\r\n+\t * @param caContainer The container where the Category Assignments reside. Usually a StructuralElementInstance\r\n+\t * @return a List of CategoryAssignments which are wrapped into the generic BeanCategoryAssignment\r\n+\t */\r\n+\tpublic List<BeanCategoryAssignment> getAllBeanCategories(ICategoryAssignmentContainer caContainer) {\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a3ee162f7d05090e1b70824e0a0fef2846395c3b"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "757b6a39e8eecac676336d1351da4a9b152e90ad", "author": {"user": {"login": "JAmmermann-DLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/757b6a39e8eecac676336d1351da4a9b152e90ad", "committedDate": "2020-10-22T09:00:27Z", "message": "Add missing test case to BeanCategoryAssignmentHelperTest - (Task #725)\n\n---\nTask #725: Transform SEIs from/to JSON"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE0NjY1NjA1", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/742#pullrequestreview-514665605", "createdAt": "2020-10-22T12:23:49Z", "commit": {"oid": "757b6a39e8eecac676336d1351da4a9b152e90ad"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 534, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}