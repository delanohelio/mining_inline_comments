{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk5MjQzMDc4", "number": 768, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQwNzowNzoyNVrOEreaJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNDoyNDo1OVrOEro9ag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MDIyNDM2OnYy", "diffSide": "RIGHT", "path": "de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ExporterImporterWizardTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQwNzowNzoyNVrOHeQsfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxMjoxNDoxMFrOHebnog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTQ5Mjg2MQ==", "bodyText": "Should we maybe load all the concepts we need in test in the base class? There is already FEA there.", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/768#discussion_r501492861", "createdAt": "2020-10-08T07:07:25Z", "author": {"login": "andriikovalov-dlr"}, "path": "de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ExporterImporterWizardTest.java", "diffHunk": "@@ -108,28 +98,51 @@ public void testHTMLExportFEA() {\n \t\tassertTrue(\"Index file has been successfully created.\", htmlExportIndexFile.exists());\n \t\tassertTrue(\"ConfigurationTree file has been successfully created.\", htmlExportCTFile.exists());\n \t\tassertTrue(\"ElementConfiguration file has been successfully created.\", htmlExportECFile.exists());\n+\t}\n+\t\n+\t@Test\n+\tpublic void testMatExportImport() {\n+\t\tConcept conceptMass = ConceptXmiLoader.loadConceptFromPlugin(de.dlr.sc.virsat.model.extension.budget.mass.Activator.getPluginId() + \"/concept/concept.xmi\");\t", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa78cb24126fb9d10fc7299210e835c4e2335577"}, "originalPosition": 115}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTY3MTg0Mg==", "bodyText": "We only use the mass concept in like 1-2 places. I think I would prefer it locally loaded so we dont create additional load times in all the test cases.", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/768#discussion_r501671842", "createdAt": "2020-10-08T12:14:10Z", "author": {"login": "SaMuellerDLR"}, "path": "de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ExporterImporterWizardTest.java", "diffHunk": "@@ -108,28 +98,51 @@ public void testHTMLExportFEA() {\n \t\tassertTrue(\"Index file has been successfully created.\", htmlExportIndexFile.exists());\n \t\tassertTrue(\"ConfigurationTree file has been successfully created.\", htmlExportCTFile.exists());\n \t\tassertTrue(\"ElementConfiguration file has been successfully created.\", htmlExportECFile.exists());\n+\t}\n+\t\n+\t@Test\n+\tpublic void testMatExportImport() {\n+\t\tConcept conceptMass = ConceptXmiLoader.loadConceptFromPlugin(de.dlr.sc.virsat.model.extension.budget.mass.Activator.getPluginId() + \"/concept/concept.xmi\");\t", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTQ5Mjg2MQ=="}, "originalCommit": {"oid": "fa78cb24126fb9d10fc7299210e835c4e2335577"}, "originalPosition": 115}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MTk1MzA2OnYy", "diffSide": "RIGHT", "path": "de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ExporterImporterWizardTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNDoyNDo1OVrOHehOBg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNTowODo1OVrOHejVNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTc2MzU5MA==", "bodyText": "Can we maybe use the String from the Wizard definition? Looks like \"magic text\" here :D", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/768#discussion_r501763590", "createdAt": "2020-10-08T14:24:59Z", "author": {"login": "franzTobiasDLR"}, "path": "de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ExporterImporterWizardTest.java", "diffHunk": "@@ -108,28 +98,51 @@ public void testHTMLExportFEA() {\n \t\tassertTrue(\"Index file has been successfully created.\", htmlExportIndexFile.exists());\n \t\tassertTrue(\"ConfigurationTree file has been successfully created.\", htmlExportCTFile.exists());\n \t\tassertTrue(\"ElementConfiguration file has been successfully created.\", htmlExportECFile.exists());\n+\t}\n+\t\n+\t@Test\n+\tpublic void testMatExportImport() {\n+\t\tConcept conceptMass = ConceptXmiLoader.loadConceptFromPlugin(de.dlr.sc.virsat.model.extension.budget.mass.Activator.getPluginId() + \"/concept/concept.xmi\");\t\n+\t\tSWTBotTreeItem massEquipment = addElement(MassEquipment.class, conceptMass, ec);\n+\t\topenEditor(massEquipment);\n \t\t\n-\t\t// Workaround to shells sometimes not being valid anymore after closing a wizard\n-\t\t// See https://wiki.eclipse.org/SWTBot/Troubleshooting#WidgetNotFoundException_when_stepping_through_SWTBot_test_in_Eclipse_debugger for details\n-\t\tbot.shell().activate();\n+\t\tfinal String OLD_VALUE = \"45.0\";\n+\t\tfinal String NEW_VALUE = \"30.0\";\n+\t\t\n+\t\trenameField(MassEquipment.PROPERTY_MASS, OLD_VALUE);\n+\t\t\n+\t\topenVirSatExporter(\"Mat Export Wizard\");\n+\t\t\n+\t\t// Configure the export\n+\t\tbot.tree().expandNode(EC_PATH).select();\n+\t\tPath matExportFilePath = exportFolderPath.resolve(\"export.mat\");\n+\t\tbot.comboBox().setText(matExportFilePath.toString());\n+\t\tfinishWizard();\n+\t\t\n+\t\t// Assert that we correctly exported a file\n+\t\tassertTrue(\"A file has been successfully created.\", matExportFilePath.toFile().exists());\n+\t\t\n+\t\t// Cause a change\n+\t\trenameField(MassEquipment.PROPERTY_MASS, NEW_VALUE);\n \n+\t\topenVirSatImporter(\"Mat Import Wizard\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa78cb24126fb9d10fc7299210e835c4e2335577"}, "originalPosition": 141}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTc5ODE5OQ==", "bodyText": "That would be cool, but sadly the string is in the plugin.xml of the ui.engine plugin.\nI tried using our ResourceBuilder hoping that it would maybe produce a PluginXML.java where the String is written into but apparantly that doesnt happen.", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/768#discussion_r501798199", "createdAt": "2020-10-08T15:08:59Z", "author": {"login": "SaMuellerDLR"}, "path": "de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ExporterImporterWizardTest.java", "diffHunk": "@@ -108,28 +98,51 @@ public void testHTMLExportFEA() {\n \t\tassertTrue(\"Index file has been successfully created.\", htmlExportIndexFile.exists());\n \t\tassertTrue(\"ConfigurationTree file has been successfully created.\", htmlExportCTFile.exists());\n \t\tassertTrue(\"ElementConfiguration file has been successfully created.\", htmlExportECFile.exists());\n+\t}\n+\t\n+\t@Test\n+\tpublic void testMatExportImport() {\n+\t\tConcept conceptMass = ConceptXmiLoader.loadConceptFromPlugin(de.dlr.sc.virsat.model.extension.budget.mass.Activator.getPluginId() + \"/concept/concept.xmi\");\t\n+\t\tSWTBotTreeItem massEquipment = addElement(MassEquipment.class, conceptMass, ec);\n+\t\topenEditor(massEquipment);\n \t\t\n-\t\t// Workaround to shells sometimes not being valid anymore after closing a wizard\n-\t\t// See https://wiki.eclipse.org/SWTBot/Troubleshooting#WidgetNotFoundException_when_stepping_through_SWTBot_test_in_Eclipse_debugger for details\n-\t\tbot.shell().activate();\n+\t\tfinal String OLD_VALUE = \"45.0\";\n+\t\tfinal String NEW_VALUE = \"30.0\";\n+\t\t\n+\t\trenameField(MassEquipment.PROPERTY_MASS, OLD_VALUE);\n+\t\t\n+\t\topenVirSatExporter(\"Mat Export Wizard\");\n+\t\t\n+\t\t// Configure the export\n+\t\tbot.tree().expandNode(EC_PATH).select();\n+\t\tPath matExportFilePath = exportFolderPath.resolve(\"export.mat\");\n+\t\tbot.comboBox().setText(matExportFilePath.toString());\n+\t\tfinishWizard();\n+\t\t\n+\t\t// Assert that we correctly exported a file\n+\t\tassertTrue(\"A file has been successfully created.\", matExportFilePath.toFile().exists());\n+\t\t\n+\t\t// Cause a change\n+\t\trenameField(MassEquipment.PROPERTY_MASS, NEW_VALUE);\n \n+\t\topenVirSatImporter(\"Mat Import Wizard\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTc2MzU5MA=="}, "originalCommit": {"oid": "fa78cb24126fb9d10fc7299210e835c4e2335577"}, "originalPosition": 141}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 635, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}