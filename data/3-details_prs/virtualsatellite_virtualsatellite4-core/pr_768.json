{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk5MjQzMDc4", "number": 768, "title": "SWTBot Test for Exporting and Importing .mat files", "bodyText": "Created a SWTBot test for testing the wizard for exporting and importing .mat files\nFixed bug in general import export page to support keyboard input\nSome general refactordings to impove code quality in the SWTBot test cases for exporters and importers\n\nCloses #762", "createdAt": "2020-10-07T13:15:26Z", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/768", "merged": true, "mergeCommit": {"oid": "f0fb2454b3fc3261cee38f76ef52ced91869cd21"}, "closed": true, "closedAt": "2020-10-08T15:09:19Z", "author": {"login": "SaMuellerDLR"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdQMV9OAH2gAyNDk5MjQzMDc4OmY5YmY2YzQ0ZTQyMGNmN2RkNzQxOGIzNDY4MGMxMWIzYTg5ZTU4M2Q=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdQiaoWgFqTUwNDg0MDI5MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f9bf6c44e420cf7dd7418b34680c11b3a89e583d", "author": {"user": {"login": "SaMuellerDLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/f9bf6c44e420cf7dd7418b34680c11b3a89e583d", "committedDate": "2020-10-07T12:42:52Z", "message": "Fixed bug with entering destination via keyboard - (Task #762)\n\n- Fixed bug in the generic import export page to support entering the\ndestination via keyboard\n\n---\nTask #762: SWTBot Test Case for exporting and importing to .mat files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "84d6ca185a9f50a9f0ffe30beb0c54e60cfd5c09", "author": {"user": {"login": "SaMuellerDLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/84d6ca185a9f50a9f0ffe30beb0c54e60cfd5c09", "committedDate": "2020-10-07T12:43:35Z", "message": "Added test case for exporting and importing to .mat file - (Task #762)\n\n- Implemented test case performing an export to a .mat file and then\nre-importing the .mat file\n\n---\nTask #762: SWTBot Test Case for exporting and importing to .mat files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "57cb232e392f7ee63b6ae66d643ac80b2ef69964", "author": {"user": {"login": "SaMuellerDLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/57cb232e392f7ee63b6ae66d643ac80b2ef69964", "committedDate": "2020-10-07T12:51:50Z", "message": "Refactored redundant code for closing wizards - (Task #762)\n\n- Refactored tests to share common code for finishing wizards in a\ndedicated method\n\n---\nTask #762: SWTBot Test Case for exporting and importing to .mat files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a810eda7261f27eed7ec4fa3e5ee16084b5286d4", "author": {"user": {"login": "SaMuellerDLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/a810eda7261f27eed7ec4fa3e5ee16084b5286d4", "committedDate": "2020-10-07T13:06:49Z", "message": "Minor refactorings - (Task #762)\n\n- Introduced some constants to reduce repition of hard coded strings\n- Better use of SWTBot API for navigating trees\n\n---\nTask #762: SWTBot Test Case for exporting and importing to .mat files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa78cb24126fb9d10fc7299210e835c4e2335577", "author": {"user": {"login": "SaMuellerDLR", "name": null}}, "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/fa78cb24126fb9d10fc7299210e835c4e2335577", "committedDate": "2020-10-07T13:13:42Z", "message": "Further minor refactorings - (Task #762)\n\n- Extracted common code for opening wizards into dedicated method\n- Some whitespaces optimizations\n\n---\nTask #762: SWTBot Test Case for exporting and importing to .mat files"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0NDgzMTAz", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/768#pullrequestreview-504483103", "createdAt": "2020-10-08T07:07:25Z", "commit": {"oid": "fa78cb24126fb9d10fc7299210e835c4e2335577"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQwNzowNzoyNVrOHeQsfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQwNzowNzoyNVrOHeQsfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTQ5Mjg2MQ==", "bodyText": "Should we maybe load all the concepts we need in test in the base class? There is already FEA there.", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/768#discussion_r501492861", "createdAt": "2020-10-08T07:07:25Z", "author": {"login": "andriikovalov-dlr"}, "path": "de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ExporterImporterWizardTest.java", "diffHunk": "@@ -108,28 +98,51 @@ public void testHTMLExportFEA() {\n \t\tassertTrue(\"Index file has been successfully created.\", htmlExportIndexFile.exists());\n \t\tassertTrue(\"ConfigurationTree file has been successfully created.\", htmlExportCTFile.exists());\n \t\tassertTrue(\"ElementConfiguration file has been successfully created.\", htmlExportECFile.exists());\n+\t}\n+\t\n+\t@Test\n+\tpublic void testMatExportImport() {\n+\t\tConcept conceptMass = ConceptXmiLoader.loadConceptFromPlugin(de.dlr.sc.virsat.model.extension.budget.mass.Activator.getPluginId() + \"/concept/concept.xmi\");\t", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa78cb24126fb9d10fc7299210e835c4e2335577"}, "originalPosition": 115}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0ODQwMjkw", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/768#pullrequestreview-504840290", "createdAt": "2020-10-08T14:24:59Z", "commit": {"oid": "fa78cb24126fb9d10fc7299210e835c4e2335577"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNDoyNDo1OVrOHehOBg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNDoyNDo1OVrOHehOBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTc2MzU5MA==", "bodyText": "Can we maybe use the String from the Wizard definition? Looks like \"magic text\" here :D", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/768#discussion_r501763590", "createdAt": "2020-10-08T14:24:59Z", "author": {"login": "franzTobiasDLR"}, "path": "de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ExporterImporterWizardTest.java", "diffHunk": "@@ -108,28 +98,51 @@ public void testHTMLExportFEA() {\n \t\tassertTrue(\"Index file has been successfully created.\", htmlExportIndexFile.exists());\n \t\tassertTrue(\"ConfigurationTree file has been successfully created.\", htmlExportCTFile.exists());\n \t\tassertTrue(\"ElementConfiguration file has been successfully created.\", htmlExportECFile.exists());\n+\t}\n+\t\n+\t@Test\n+\tpublic void testMatExportImport() {\n+\t\tConcept conceptMass = ConceptXmiLoader.loadConceptFromPlugin(de.dlr.sc.virsat.model.extension.budget.mass.Activator.getPluginId() + \"/concept/concept.xmi\");\t\n+\t\tSWTBotTreeItem massEquipment = addElement(MassEquipment.class, conceptMass, ec);\n+\t\topenEditor(massEquipment);\n \t\t\n-\t\t// Workaround to shells sometimes not being valid anymore after closing a wizard\n-\t\t// See https://wiki.eclipse.org/SWTBot/Troubleshooting#WidgetNotFoundException_when_stepping_through_SWTBot_test_in_Eclipse_debugger for details\n-\t\tbot.shell().activate();\n+\t\tfinal String OLD_VALUE = \"45.0\";\n+\t\tfinal String NEW_VALUE = \"30.0\";\n+\t\t\n+\t\trenameField(MassEquipment.PROPERTY_MASS, OLD_VALUE);\n+\t\t\n+\t\topenVirSatExporter(\"Mat Export Wizard\");\n+\t\t\n+\t\t// Configure the export\n+\t\tbot.tree().expandNode(EC_PATH).select();\n+\t\tPath matExportFilePath = exportFolderPath.resolve(\"export.mat\");\n+\t\tbot.comboBox().setText(matExportFilePath.toString());\n+\t\tfinishWizard();\n+\t\t\n+\t\t// Assert that we correctly exported a file\n+\t\tassertTrue(\"A file has been successfully created.\", matExportFilePath.toFile().exists());\n+\t\t\n+\t\t// Cause a change\n+\t\trenameField(MassEquipment.PROPERTY_MASS, NEW_VALUE);\n \n+\t\topenVirSatImporter(\"Mat Import Wizard\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa78cb24126fb9d10fc7299210e835c4e2335577"}, "originalPosition": 141}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 553, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}