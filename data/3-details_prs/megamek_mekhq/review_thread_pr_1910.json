{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY0NzY4NjQ2", "number": 1910, "reviewThreads": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxODo1Nzo1MFrOEWUluw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwMjowNDozN1rOEWosGQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxODQxNDY3OnYy", "diffSide": "RIGHT", "path": "MekHQ/src/mekhq/gui/dialog/CampaignExportWizard.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxODo1Nzo1MFrOG9kmuA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxODo1Nzo1MFrOG9kmuA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzIxNjA1Ng==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if(sourceForce == null) {\n          \n          \n            \n                    if (sourceForce == null) {", "url": "https://github.com/MegaMek/mekhq/pull/1910#discussion_r467216056", "createdAt": "2020-08-07T18:57:50Z", "author": {"login": "Windchild292"}, "path": "MekHQ/src/mekhq/gui/dialog/CampaignExportWizard.java", "diffHunk": "@@ -633,7 +641,89 @@ private boolean exportToCampaign(File file) {\n \n         return saved;\n     }\n+    \n+    private void attemptToAssignToForce(Unit unit, int sourceForceID, Campaign sourceCampaign, Campaign destinationCampaign) {\n+        Force sourceForce = sourceCampaign.getForce(sourceForceID);\n+        if(sourceForce == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0d46ca431c51a32a93d109fba41029a283d90a24"}, "originalPosition": 40}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxODQxNDk5OnYy", "diffSide": "RIGHT", "path": "MekHQ/src/mekhq/gui/dialog/CampaignExportWizard.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxODo1Nzo1N1rOG9km6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxODo1Nzo1N1rOG9km6A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzIxNjEwNA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if(sourceForce.getParentForce() == null) {\n          \n          \n            \n                        destinationCampaign.getForces().addUnit(unit.getId());\n          \n          \n            \n                    if (sourceForce.getParentForce() == null) {\n          \n          \n            \n                        destinationCampaign.getForces().addUnit(unit.getId());", "url": "https://github.com/MegaMek/mekhq/pull/1910#discussion_r467216104", "createdAt": "2020-08-07T18:57:57Z", "author": {"login": "Windchild292"}, "path": "MekHQ/src/mekhq/gui/dialog/CampaignExportWizard.java", "diffHunk": "@@ -633,7 +641,89 @@ private boolean exportToCampaign(File file) {\n \n         return saved;\n     }\n+    \n+    private void attemptToAssignToForce(Unit unit, int sourceForceID, Campaign sourceCampaign, Campaign destinationCampaign) {\n+        Force sourceForce = sourceCampaign.getForce(sourceForceID);\n+        if(sourceForce == null) {\n+            return;\n+        }\n+        \n+        // this indicates a unit assigned to the root-level force\n+        if(sourceForce.getParentForce() == null) {\n+            destinationCampaign.getForces().addUnit(unit.getId());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0d46ca431c51a32a93d109fba41029a283d90a24"}, "originalPosition": 46}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxODQxNTM5OnYy", "diffSide": "RIGHT", "path": "MekHQ/src/mekhq/gui/dialog/CampaignExportWizard.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxODo1ODowNVrOG9knJg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxODo1ODowNVrOG9knJg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzIxNjE2Ng==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if(destForce != null) {\n          \n          \n            \n                    if (destForce != null) {", "url": "https://github.com/MegaMek/mekhq/pull/1910#discussion_r467216166", "createdAt": "2020-08-07T18:58:05Z", "author": {"login": "Windchild292"}, "path": "MekHQ/src/mekhq/gui/dialog/CampaignExportWizard.java", "diffHunk": "@@ -633,7 +641,89 @@ private boolean exportToCampaign(File file) {\n \n         return saved;\n     }\n+    \n+    private void attemptToAssignToForce(Unit unit, int sourceForceID, Campaign sourceCampaign, Campaign destinationCampaign) {\n+        Force sourceForce = sourceCampaign.getForce(sourceForceID);\n+        if(sourceForce == null) {\n+            return;\n+        }\n+        \n+        // this indicates a unit assigned to the root-level force\n+        if(sourceForce.getParentForce() == null) {\n+            destinationCampaign.getForces().addUnit(unit.getId());\n+        }\n+        \n+        // first thing we will try is to identify a force with the same name and tree structure in the destination campaign\n+        // if we find one, add the unit to it\n+        // otherwise,\n+        Force destForce = findForce(sourceForce.getFullName(), destinationCampaign.getForces());\n+        if(destForce != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0d46ca431c51a32a93d109fba41029a283d90a24"}, "originalPosition": 53}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxODQxNjUwOnYy", "diffSide": "RIGHT", "path": "MekHQ/src/mekhq/gui/dialog/CampaignExportWizard.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxODo1ODoyNlrOG9kn2w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxODo1ODoyNlrOG9kn2w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzIxNjM0Nw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        for(int x = parentForces.size() - 1; x >= 0; x--) {\n          \n          \n            \n                        for (int x = parentForces.size() - 1; x >= 0; x--) {", "url": "https://github.com/MegaMek/mekhq/pull/1910#discussion_r467216347", "createdAt": "2020-08-07T18:58:26Z", "author": {"login": "Windchild292"}, "path": "MekHQ/src/mekhq/gui/dialog/CampaignExportWizard.java", "diffHunk": "@@ -633,7 +641,89 @@ private boolean exportToCampaign(File file) {\n \n         return saved;\n     }\n+    \n+    private void attemptToAssignToForce(Unit unit, int sourceForceID, Campaign sourceCampaign, Campaign destinationCampaign) {\n+        Force sourceForce = sourceCampaign.getForce(sourceForceID);\n+        if(sourceForce == null) {\n+            return;\n+        }\n+        \n+        // this indicates a unit assigned to the root-level force\n+        if(sourceForce.getParentForce() == null) {\n+            destinationCampaign.getForces().addUnit(unit.getId());\n+        }\n+        \n+        // first thing we will try is to identify a force with the same name and tree structure in the destination campaign\n+        // if we find one, add the unit to it\n+        // otherwise,\n+        Force destForce = findForce(sourceForce.getFullName(), destinationCampaign.getForces());\n+        if(destForce != null) {\n+            destForce.addUnit(unit.getId());\n+        } else {\n+            List<Force> parentForces = getForceAndParents(sourceForce);\n+            Force currentDestinationForce = destinationCampaign.getForces();\n+            \n+            for(int x = parentForces.size() - 1; x >= 0; x--) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0d46ca431c51a32a93d109fba41029a283d90a24"}, "originalPosition": 59}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxODQxNzQ0OnYy", "diffSide": "RIGHT", "path": "MekHQ/src/mekhq/gui/dialog/CampaignExportWizard.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxODo1ODo0M1rOG9koYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxODo1ODo0M1rOG9koYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzIxNjQ4Mg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            if(nextDestinationForce == null) {\n          \n          \n            \n                            if (nextDestinationForce == null) {", "url": "https://github.com/MegaMek/mekhq/pull/1910#discussion_r467216482", "createdAt": "2020-08-07T18:58:43Z", "author": {"login": "Windchild292"}, "path": "MekHQ/src/mekhq/gui/dialog/CampaignExportWizard.java", "diffHunk": "@@ -633,7 +641,89 @@ private boolean exportToCampaign(File file) {\n \n         return saved;\n     }\n+    \n+    private void attemptToAssignToForce(Unit unit, int sourceForceID, Campaign sourceCampaign, Campaign destinationCampaign) {\n+        Force sourceForce = sourceCampaign.getForce(sourceForceID);\n+        if(sourceForce == null) {\n+            return;\n+        }\n+        \n+        // this indicates a unit assigned to the root-level force\n+        if(sourceForce.getParentForce() == null) {\n+            destinationCampaign.getForces().addUnit(unit.getId());\n+        }\n+        \n+        // first thing we will try is to identify a force with the same name and tree structure in the destination campaign\n+        // if we find one, add the unit to it\n+        // otherwise,\n+        Force destForce = findForce(sourceForce.getFullName(), destinationCampaign.getForces());\n+        if(destForce != null) {\n+            destForce.addUnit(unit.getId());\n+        } else {\n+            List<Force> parentForces = getForceAndParents(sourceForce);\n+            Force currentDestinationForce = destinationCampaign.getForces();\n+            \n+            for(int x = parentForces.size() - 1; x >= 0; x--) {\n+                Force nextSourceForce = parentForces.get(x);\n+                Force nextDestinationForce = findForce(nextSourceForce.getFullName(), currentDestinationForce);\n+                \n+                // if this level doesn't exist yet, add it to where we currently are\n+                if(nextDestinationForce == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0d46ca431c51a32a93d109fba41029a283d90a24"}, "originalPosition": 64}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxODQxNzg3OnYy", "diffSide": "RIGHT", "path": "MekHQ/src/mekhq/gui/dialog/CampaignExportWizard.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxODo1ODo1MlrOG9koog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxODo1ODo1MlrOG9koog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzIxNjU0Ng==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if(force.getFullName().equals(forceName)) {\n          \n          \n            \n                    if (force.getFullName().equals(forceName)) {", "url": "https://github.com/MegaMek/mekhq/pull/1910#discussion_r467216546", "createdAt": "2020-08-07T18:58:52Z", "author": {"login": "Windchild292"}, "path": "MekHQ/src/mekhq/gui/dialog/CampaignExportWizard.java", "diffHunk": "@@ -633,7 +641,89 @@ private boolean exportToCampaign(File file) {\n \n         return saved;\n     }\n+    \n+    private void attemptToAssignToForce(Unit unit, int sourceForceID, Campaign sourceCampaign, Campaign destinationCampaign) {\n+        Force sourceForce = sourceCampaign.getForce(sourceForceID);\n+        if(sourceForce == null) {\n+            return;\n+        }\n+        \n+        // this indicates a unit assigned to the root-level force\n+        if(sourceForce.getParentForce() == null) {\n+            destinationCampaign.getForces().addUnit(unit.getId());\n+        }\n+        \n+        // first thing we will try is to identify a force with the same name and tree structure in the destination campaign\n+        // if we find one, add the unit to it\n+        // otherwise,\n+        Force destForce = findForce(sourceForce.getFullName(), destinationCampaign.getForces());\n+        if(destForce != null) {\n+            destForce.addUnit(unit.getId());\n+        } else {\n+            List<Force> parentForces = getForceAndParents(sourceForce);\n+            Force currentDestinationForce = destinationCampaign.getForces();\n+            \n+            for(int x = parentForces.size() - 1; x >= 0; x--) {\n+                Force nextSourceForce = parentForces.get(x);\n+                Force nextDestinationForce = findForce(nextSourceForce.getFullName(), currentDestinationForce);\n+                \n+                // if this level doesn't exist yet, add it to where we currently are\n+                if(nextDestinationForce == null) {\n+                    Force forceCopy = new Force(nextSourceForce.getName());\n+                    destinationCampaign.addForce(forceCopy, currentDestinationForce);\n+                    currentDestinationForce = forceCopy;\n+                // otherwise, update current location and move to next level\n+                } else {\n+                    currentDestinationForce = nextDestinationForce;\n+                }\n+            }\n+            \n+            currentDestinationForce.addUnit(unit.getId());\n+        }\n+    }\n+    \n+    /**\n+     * Recurses through a Force structure to look for a force with the given \"full force name\"\n+     */\n+    private Force findForce(String forceName, Force force) {\n+        if(force.getFullName().equals(forceName)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0d46ca431c51a32a93d109fba41029a283d90a24"}, "originalPosition": 82}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxODQxODQwOnYy", "diffSide": "RIGHT", "path": "MekHQ/src/mekhq/gui/dialog/CampaignExportWizard.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxODo1OTowMFrOG9ko8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxODo1OTowMFrOG9ko8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzIxNjYyNw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        for(Force subForce : force.getSubForces()) {\n          \n          \n            \n                        for (Force subForce : force.getSubForces()) {", "url": "https://github.com/MegaMek/mekhq/pull/1910#discussion_r467216627", "createdAt": "2020-08-07T18:59:00Z", "author": {"login": "Windchild292"}, "path": "MekHQ/src/mekhq/gui/dialog/CampaignExportWizard.java", "diffHunk": "@@ -633,7 +641,89 @@ private boolean exportToCampaign(File file) {\n \n         return saved;\n     }\n+    \n+    private void attemptToAssignToForce(Unit unit, int sourceForceID, Campaign sourceCampaign, Campaign destinationCampaign) {\n+        Force sourceForce = sourceCampaign.getForce(sourceForceID);\n+        if(sourceForce == null) {\n+            return;\n+        }\n+        \n+        // this indicates a unit assigned to the root-level force\n+        if(sourceForce.getParentForce() == null) {\n+            destinationCampaign.getForces().addUnit(unit.getId());\n+        }\n+        \n+        // first thing we will try is to identify a force with the same name and tree structure in the destination campaign\n+        // if we find one, add the unit to it\n+        // otherwise,\n+        Force destForce = findForce(sourceForce.getFullName(), destinationCampaign.getForces());\n+        if(destForce != null) {\n+            destForce.addUnit(unit.getId());\n+        } else {\n+            List<Force> parentForces = getForceAndParents(sourceForce);\n+            Force currentDestinationForce = destinationCampaign.getForces();\n+            \n+            for(int x = parentForces.size() - 1; x >= 0; x--) {\n+                Force nextSourceForce = parentForces.get(x);\n+                Force nextDestinationForce = findForce(nextSourceForce.getFullName(), currentDestinationForce);\n+                \n+                // if this level doesn't exist yet, add it to where we currently are\n+                if(nextDestinationForce == null) {\n+                    Force forceCopy = new Force(nextSourceForce.getName());\n+                    destinationCampaign.addForce(forceCopy, currentDestinationForce);\n+                    currentDestinationForce = forceCopy;\n+                // otherwise, update current location and move to next level\n+                } else {\n+                    currentDestinationForce = nextDestinationForce;\n+                }\n+            }\n+            \n+            currentDestinationForce.addUnit(unit.getId());\n+        }\n+    }\n+    \n+    /**\n+     * Recurses through a Force structure to look for a force with the given \"full force name\"\n+     */\n+    private Force findForce(String forceName, Force force) {\n+        if(force.getFullName().equals(forceName)) {\n+            return force;\n+        } else {\n+            for(Force subForce : force.getSubForces()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0d46ca431c51a32a93d109fba41029a283d90a24"}, "originalPosition": 85}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxODQxODU4OnYy", "diffSide": "RIGHT", "path": "MekHQ/src/mekhq/gui/dialog/CampaignExportWizard.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxODo1OTowNVrOG9kpGQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxODo1OTowNVrOG9kpGQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzIxNjY2NQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            if(foundForce != null) {\n          \n          \n            \n                            if (foundForce != null) {", "url": "https://github.com/MegaMek/mekhq/pull/1910#discussion_r467216665", "createdAt": "2020-08-07T18:59:05Z", "author": {"login": "Windchild292"}, "path": "MekHQ/src/mekhq/gui/dialog/CampaignExportWizard.java", "diffHunk": "@@ -633,7 +641,89 @@ private boolean exportToCampaign(File file) {\n \n         return saved;\n     }\n+    \n+    private void attemptToAssignToForce(Unit unit, int sourceForceID, Campaign sourceCampaign, Campaign destinationCampaign) {\n+        Force sourceForce = sourceCampaign.getForce(sourceForceID);\n+        if(sourceForce == null) {\n+            return;\n+        }\n+        \n+        // this indicates a unit assigned to the root-level force\n+        if(sourceForce.getParentForce() == null) {\n+            destinationCampaign.getForces().addUnit(unit.getId());\n+        }\n+        \n+        // first thing we will try is to identify a force with the same name and tree structure in the destination campaign\n+        // if we find one, add the unit to it\n+        // otherwise,\n+        Force destForce = findForce(sourceForce.getFullName(), destinationCampaign.getForces());\n+        if(destForce != null) {\n+            destForce.addUnit(unit.getId());\n+        } else {\n+            List<Force> parentForces = getForceAndParents(sourceForce);\n+            Force currentDestinationForce = destinationCampaign.getForces();\n+            \n+            for(int x = parentForces.size() - 1; x >= 0; x--) {\n+                Force nextSourceForce = parentForces.get(x);\n+                Force nextDestinationForce = findForce(nextSourceForce.getFullName(), currentDestinationForce);\n+                \n+                // if this level doesn't exist yet, add it to where we currently are\n+                if(nextDestinationForce == null) {\n+                    Force forceCopy = new Force(nextSourceForce.getName());\n+                    destinationCampaign.addForce(forceCopy, currentDestinationForce);\n+                    currentDestinationForce = forceCopy;\n+                // otherwise, update current location and move to next level\n+                } else {\n+                    currentDestinationForce = nextDestinationForce;\n+                }\n+            }\n+            \n+            currentDestinationForce.addUnit(unit.getId());\n+        }\n+    }\n+    \n+    /**\n+     * Recurses through a Force structure to look for a force with the given \"full force name\"\n+     */\n+    private Force findForce(String forceName, Force force) {\n+        if(force.getFullName().equals(forceName)) {\n+            return force;\n+        } else {\n+            for(Force subForce : force.getSubForces()) {\n+                Force foundForce = findForce(forceName, subForce);\n+                \n+                if(foundForce != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0d46ca431c51a32a93d109fba41029a283d90a24"}, "originalPosition": 88}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxODQxODk4OnYy", "diffSide": "RIGHT", "path": "MekHQ/src/mekhq/gui/dialog/CampaignExportWizard.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxODo1OToxM1rOG9kpXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxODo1OToxM1rOG9kpXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzIxNjczMw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    while(force.getParentForce() != null) {\n          \n          \n            \n                    while (force.getParentForce() != null) {", "url": "https://github.com/MegaMek/mekhq/pull/1910#discussion_r467216733", "createdAt": "2020-08-07T18:59:13Z", "author": {"login": "Windchild292"}, "path": "MekHQ/src/mekhq/gui/dialog/CampaignExportWizard.java", "diffHunk": "@@ -633,7 +641,89 @@ private boolean exportToCampaign(File file) {\n \n         return saved;\n     }\n+    \n+    private void attemptToAssignToForce(Unit unit, int sourceForceID, Campaign sourceCampaign, Campaign destinationCampaign) {\n+        Force sourceForce = sourceCampaign.getForce(sourceForceID);\n+        if(sourceForce == null) {\n+            return;\n+        }\n+        \n+        // this indicates a unit assigned to the root-level force\n+        if(sourceForce.getParentForce() == null) {\n+            destinationCampaign.getForces().addUnit(unit.getId());\n+        }\n+        \n+        // first thing we will try is to identify a force with the same name and tree structure in the destination campaign\n+        // if we find one, add the unit to it\n+        // otherwise,\n+        Force destForce = findForce(sourceForce.getFullName(), destinationCampaign.getForces());\n+        if(destForce != null) {\n+            destForce.addUnit(unit.getId());\n+        } else {\n+            List<Force> parentForces = getForceAndParents(sourceForce);\n+            Force currentDestinationForce = destinationCampaign.getForces();\n+            \n+            for(int x = parentForces.size() - 1; x >= 0; x--) {\n+                Force nextSourceForce = parentForces.get(x);\n+                Force nextDestinationForce = findForce(nextSourceForce.getFullName(), currentDestinationForce);\n+                \n+                // if this level doesn't exist yet, add it to where we currently are\n+                if(nextDestinationForce == null) {\n+                    Force forceCopy = new Force(nextSourceForce.getName());\n+                    destinationCampaign.addForce(forceCopy, currentDestinationForce);\n+                    currentDestinationForce = forceCopy;\n+                // otherwise, update current location and move to next level\n+                } else {\n+                    currentDestinationForce = nextDestinationForce;\n+                }\n+            }\n+            \n+            currentDestinationForce.addUnit(unit.getId());\n+        }\n+    }\n+    \n+    /**\n+     * Recurses through a Force structure to look for a force with the given \"full force name\"\n+     */\n+    private Force findForce(String forceName, Force force) {\n+        if(force.getFullName().equals(forceName)) {\n+            return force;\n+        } else {\n+            for(Force subForce : force.getSubForces()) {\n+                Force foundForce = findForce(forceName, subForce);\n+                \n+                if(foundForce != null) {\n+                    return foundForce;\n+                }\n+            }\n+            \n+            return null;\n+        }\n+    }\n \n+    /** \n+     * Moves through a force's ancestors and returns a flattened list of force names in order\n+     * from me to furtherst ancestor.\n+     */\n+    private List<Force> getForceAndParents(Force force) {\n+        List<Force> retval = new ArrayList<>();\n+        retval.add(force);\n+        \n+        Force ancestorForce;\n+        while(force.getParentForce() != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0d46ca431c51a32a93d109fba41029a283d90a24"}, "originalPosition": 106}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxODQxOTM2OnYy", "diffSide": "RIGHT", "path": "MekHQ/src/mekhq/gui/dialog/CampaignExportWizard.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxODo1OToyMlrOG9kpnQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxODo1OToyMlrOG9kpnQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzIxNjc5Nw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        if(ancestorForce.getParentForce() != null) {\n          \n          \n            \n                        if (ancestorForce.getParentForce() != null) {", "url": "https://github.com/MegaMek/mekhq/pull/1910#discussion_r467216797", "createdAt": "2020-08-07T18:59:22Z", "author": {"login": "Windchild292"}, "path": "MekHQ/src/mekhq/gui/dialog/CampaignExportWizard.java", "diffHunk": "@@ -633,7 +641,89 @@ private boolean exportToCampaign(File file) {\n \n         return saved;\n     }\n+    \n+    private void attemptToAssignToForce(Unit unit, int sourceForceID, Campaign sourceCampaign, Campaign destinationCampaign) {\n+        Force sourceForce = sourceCampaign.getForce(sourceForceID);\n+        if(sourceForce == null) {\n+            return;\n+        }\n+        \n+        // this indicates a unit assigned to the root-level force\n+        if(sourceForce.getParentForce() == null) {\n+            destinationCampaign.getForces().addUnit(unit.getId());\n+        }\n+        \n+        // first thing we will try is to identify a force with the same name and tree structure in the destination campaign\n+        // if we find one, add the unit to it\n+        // otherwise,\n+        Force destForce = findForce(sourceForce.getFullName(), destinationCampaign.getForces());\n+        if(destForce != null) {\n+            destForce.addUnit(unit.getId());\n+        } else {\n+            List<Force> parentForces = getForceAndParents(sourceForce);\n+            Force currentDestinationForce = destinationCampaign.getForces();\n+            \n+            for(int x = parentForces.size() - 1; x >= 0; x--) {\n+                Force nextSourceForce = parentForces.get(x);\n+                Force nextDestinationForce = findForce(nextSourceForce.getFullName(), currentDestinationForce);\n+                \n+                // if this level doesn't exist yet, add it to where we currently are\n+                if(nextDestinationForce == null) {\n+                    Force forceCopy = new Force(nextSourceForce.getName());\n+                    destinationCampaign.addForce(forceCopy, currentDestinationForce);\n+                    currentDestinationForce = forceCopy;\n+                // otherwise, update current location and move to next level\n+                } else {\n+                    currentDestinationForce = nextDestinationForce;\n+                }\n+            }\n+            \n+            currentDestinationForce.addUnit(unit.getId());\n+        }\n+    }\n+    \n+    /**\n+     * Recurses through a Force structure to look for a force with the given \"full force name\"\n+     */\n+    private Force findForce(String forceName, Force force) {\n+        if(force.getFullName().equals(forceName)) {\n+            return force;\n+        } else {\n+            for(Force subForce : force.getSubForces()) {\n+                Force foundForce = findForce(forceName, subForce);\n+                \n+                if(foundForce != null) {\n+                    return foundForce;\n+                }\n+            }\n+            \n+            return null;\n+        }\n+    }\n \n+    /** \n+     * Moves through a force's ancestors and returns a flattened list of force names in order\n+     * from me to furtherst ancestor.\n+     */\n+    private List<Force> getForceAndParents(Force force) {\n+        List<Force> retval = new ArrayList<>();\n+        retval.add(force);\n+        \n+        Force ancestorForce;\n+        while(force.getParentForce() != null) {\n+            ancestorForce = force.getParentForce();\n+            \n+            // we don't want the top-level force\n+            if(ancestorForce.getParentForce() != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0d46ca431c51a32a93d109fba41029a283d90a24"}, "originalPosition": 110}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxODQyMDA2OnYy", "diffSide": "RIGHT", "path": "MekHQ/src/mekhq/gui/dialog/CampaignExportWizard.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxODo1OTozN1rOG9kqDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxODo1OTozN1rOG9kqDg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzIxNjkxMA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        if((person.getCallsign() != null) && (person.getCallsign().trim().length() > 0)) {\n          \n          \n            \n                        if ((person.getCallsign() != null) && (person.getCallsign().trim().length() > 0)) {", "url": "https://github.com/MegaMek/mekhq/pull/1910#discussion_r467216910", "createdAt": "2020-08-07T18:59:37Z", "author": {"login": "Windchild292"}, "path": "MekHQ/src/mekhq/gui/dialog/CampaignExportWizard.java", "diffHunk": "@@ -704,7 +794,15 @@ public Component getListCellRendererComponent(JList<?> list, Object value, int i\n                                                       boolean isSelected, boolean cellHasFocus) {\n             Component cmp = super.getListCellRendererComponent(list, value, index, isSelected, cellHasFocus);\n             Person person = (Person) value;\n-            String cellValue = String.format(\"%s (%s)\", person.getFullName(), person.getPrimaryRoleDesc());\n+            String callsign = \"\";\n+            if((person.getCallsign() != null) && (person.getCallsign().trim().length() > 0)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0d46ca431c51a32a93d109fba41029a283d90a24"}, "originalPosition": 129}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyMTcwNzc3OnYy", "diffSide": "RIGHT", "path": "MekHQ/src/mekhq/gui/dialog/CampaignExportWizard.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwMjowNDozN1rOG9_tgg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwMjowNDozN1rOG9_tgg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzY2MDE2Mg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    String sourceForceFullName = getDestinationFullName (sourceForce, sourceCampaign, destinationCampaign);\n          \n          \n            \n                    String sourceForceFullName = getDestinationFullName(sourceForce, sourceCampaign, destinationCampaign);", "url": "https://github.com/MegaMek/mekhq/pull/1910#discussion_r467660162", "createdAt": "2020-08-10T02:04:37Z", "author": {"login": "Windchild292"}, "path": "MekHQ/src/mekhq/gui/dialog/CampaignExportWizard.java", "diffHunk": "@@ -644,31 +648,36 @@ private boolean exportToCampaign(File file) {\n     \n     private void attemptToAssignToForce(Unit unit, int sourceForceID, Campaign sourceCampaign, Campaign destinationCampaign) {\n         Force sourceForce = sourceCampaign.getForce(sourceForceID);\n-        if(sourceForce == null) {\n+        if (sourceForce == null) {\n             return;\n         }\n         \n         // this indicates a unit assigned to the root-level force\n-        if(sourceForce.getParentForce() == null) {\n+        if (sourceForce.getParentForce() == null) {\n             destinationCampaign.getForces().addUnit(unit.getId());\n         }\n         \n         // first thing we will try is to identify a force with the same name and tree structure in the destination campaign\n         // if we find one, add the unit to it\n-        // otherwise,\n-        Force destForce = findForce(sourceForce.getFullName(), destinationCampaign.getForces());\n-        if(destForce != null) {\n+        // otherwise, chain-add forces\n+\n+        // hack: the root forces are irrelevant, so we replace the source root force name with the destination root force name\n+        String sourceForceFullName = getDestinationFullName (sourceForce, sourceCampaign, destinationCampaign);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e0d61d5719942ef1b63f420f27bdb7d71408363f"}, "originalPosition": 52}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2201, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}