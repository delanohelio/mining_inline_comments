{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEwMTk5NzE4", "number": 1705, "title": "LGTM and String Comparison Fixes", "bodyText": "This fixes most of the remaining LGTM issues, all remaining string comparisons using ==, adds some null and/or failure protections, and resolves a few other bugs with object comparisons (especially for Person).\nTo review: Whitespace differences off, and all at once (I overwrote a few of my initial changes later in the PR)\nChanges (larger list):\nAdded logging to IconPackage to help with debugging (this has actually came up recently for me)\nImplemented Person::equals(Object), which determines if the two are equal based on their UUID id\nFixed a bunch of String comparisons using == and !=\nFixed some whitespacing issues on for and if statements\nFixed a bunch of NPEs\nRemoved some redundant comparisons\nAdded some additional logging for failure cases\nFixed some non-final enum fields (IDE spot-bugs recommendation)", "createdAt": "2020-04-28T15:39:31Z", "url": "https://github.com/MegaMek/mekhq/pull/1705", "merged": true, "mergeCommit": {"oid": "ef2e5612bbfb80f0ddc76f6b97a465b37d6c650a"}, "closed": true, "closedAt": "2020-04-28T22:27:33Z", "author": {"login": "Windchild292"}, "timelineItems": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcZiy2PAH2gAyNDEwMTk5NzE4OjUyNTAwMzhkMDAyMWE2ZjlmYTM3YmM0ZDI4YjE0ODFlMGYxMmQ3OTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABccLjL6gFqTQwMjI1NDk0MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5250038d0021a6f9fa37bc4d28b1481e0f12d796", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/5250038d0021a6f9fa37bc4d28b1481e0f12d796", "committedDate": "2020-04-20T17:46:30Z", "message": "Fixing LGTM issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "363aff56940a137b1d70494d9e4e39a5e0bad0e8", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/363aff56940a137b1d70494d9e4e39a5e0bad0e8", "committedDate": "2020-04-20T17:47:50Z", "message": "Adding and expanding logging in IconPackage"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b1b6434aec82e859ff471bb6a904b46f87495cd9", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/b1b6434aec82e859ff471bb6a904b46f87495cd9", "committedDate": "2020-04-20T17:51:57Z", "message": "Adding null guarded assignment for image items"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4a88ba8e79c073abdfa2b86320d6df74ea44c034", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/4a88ba8e79c073abdfa2b86320d6df74ea44c034", "committedDate": "2020-04-20T17:54:04Z", "message": "Fixing a potential null issue with image label assignment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9da9fc5e710f8d6657439b5418fc1baf54ae6c65", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/9da9fc5e710f8d6657439b5418fc1baf54ae6c65", "committedDate": "2020-04-20T18:06:01Z", "message": "Fixing potential NPEs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b0a519e073ea815e3594bebf316ef54d72f8de17", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/b0a519e073ea815e3594bebf316ef54d72f8de17", "committedDate": "2020-04-20T18:09:57Z", "message": "Adding some defensive code for refits"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "46097962413f93804d79127373f658aa6ccc92c7", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/46097962413f93804d79127373f658aa6ccc92c7", "committedDate": "2020-04-20T18:23:03Z", "message": "Fixing non-final fields in Enums"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aaf6a33db324f08280e81dfee919b1b18eb8e11b", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/aaf6a33db324f08280e81dfee919b1b18eb8e11b", "committedDate": "2020-04-20T18:40:03Z", "message": "Fixing object and string comparison issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c71919d97c783e5be248b7799deb4ace289bd882", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/c71919d97c783e5be248b7799deb4ace289bd882", "committedDate": "2020-04-20T18:47:49Z", "message": "adding equals override to Person"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e858fa29296e3653abd1f0bbec2ce4cc514721e", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/4e858fa29296e3653abd1f0bbec2ce4cc514721e", "committedDate": "2020-04-20T18:53:02Z", "message": "Fixing comparison for people"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b9461579b2f588814399d571bf5b9374169a4423", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/b9461579b2f588814399d571bf5b9374169a4423", "committedDate": "2020-04-20T19:03:32Z", "message": "Fixing person comparisons"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "debaea13f8206211b83605113cddde5cdd31b7b3", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/debaea13f8206211b83605113cddde5cdd31b7b3", "committedDate": "2020-04-28T15:21:48Z", "message": "Merge remote-tracking branch 'upstream/master' into dev_Windchild_LGTM"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAxOTY3NjE3", "url": "https://github.com/MegaMek/mekhq/pull/1705#pullrequestreview-401967617", "createdAt": "2020-04-28T15:41:59Z", "commit": {"oid": "debaea13f8206211b83605113cddde5cdd31b7b3"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQxNTo0MTo1OVrOGNaiuw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQxNTo0NzoxNFrOGNayTw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjcxOTU0Nw==", "bodyText": "I guess we don't need the enclosing parens if there's no !=", "url": "https://github.com/MegaMek/mekhq/pull/1705#discussion_r416719547", "createdAt": "2020-04-28T15:41:59Z", "author": {"login": "NickAragua"}, "path": "MekHQ/src/mekhq/MekHqXmlUtil.java", "diffHunk": "@@ -328,14 +328,14 @@ public static String writeEntityToXmlString(Entity tgtEnt, int indentLvl, ArrayL\n         }\n \n          if ((null != tgtEnt.getCamoCategory())\n-                 && (tgtEnt.getCamoCategory() != IPlayer.NO_CAMO)\n+                 && (!IPlayer.NO_CAMO.equals(tgtEnt.getCamoCategory()))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "debaea13f8206211b83605113cddde5cdd31b7b3"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjcxOTc3Ng==", "bodyText": "Unnecessary enclosing parens", "url": "https://github.com/MegaMek/mekhq/pull/1705#discussion_r416719776", "createdAt": "2020-04-28T15:42:17Z", "author": {"login": "NickAragua"}, "path": "MekHQ/src/mekhq/MekHqXmlUtil.java", "diffHunk": "@@ -328,14 +328,14 @@ public static String writeEntityToXmlString(Entity tgtEnt, int indentLvl, ArrayL\n         }\n \n          if ((null != tgtEnt.getCamoCategory())\n-                 && (tgtEnt.getCamoCategory() != IPlayer.NO_CAMO)\n+                 && (!IPlayer.NO_CAMO.equals(tgtEnt.getCamoCategory()))\n                  && !tgtEnt.getCamoCategory().isEmpty()) {\n              retVal += \"\\\" camoCategory=\\\"\";\n              retVal += String.valueOf(escape(tgtEnt.getCamoCategory()));\n          }\n \n          if ((null != tgtEnt.getCamoFileName())\n-                 && (tgtEnt.getCamoFileName() != IPlayer.NO_CAMO)\n+                 && (!IPlayer.NO_CAMO.equals(tgtEnt.getCamoFileName()))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "debaea13f8206211b83605113cddde5cdd31b7b3"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjcyMjc3MQ==", "bodyText": "I don't see a reason to eliminate the VEENOVA logic.", "url": "https://github.com/MegaMek/mekhq/pull/1705#discussion_r416722771", "createdAt": "2020-04-28T15:46:18Z", "author": {"login": "NickAragua"}, "path": "MekHQ/src/mekhq/campaign/mission/AtBScenario.java", "diffHunk": "@@ -1183,8 +1182,8 @@ private void addStar(ArrayList<Entity> list, String faction, int skill, int qual\n                 list.add(en);\n             }\n         }\n-        if (forceType == FORCE_NOVA || forceType == FORCE_VEENOVA) {\n-            unitType = forceType == FORCE_VEENOVA ? UnitType.INFANTRY : UnitType.BATTLE_ARMOR;\n+        if (forceType == FORCE_NOVA) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "debaea13f8206211b83605113cddde5cdd31b7b3"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjcyMzUzNQ==", "bodyText": "Do we really want a non-null person in case we fail to read a person in?", "url": "https://github.com/MegaMek/mekhq/pull/1705#discussion_r416723535", "createdAt": "2020-04-28T15:47:14Z", "author": {"login": "NickAragua"}, "path": "MekHQ/src/mekhq/campaign/personnel/Person.java", "diffHunk": "@@ -1886,12 +1886,9 @@ public void writeToXml(PrintWriter pw1, int indent) {\n     public static Person generateInstanceFromXML(Node wn, Campaign c, Version version) {\n         final String METHOD_NAME = \"generateInstanceFromXML(Node,Campaign,Version)\"; //$NON-NLS-1$\n \n-        Person retVal = null;\n+        Person retVal = new Person(c);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "debaea13f8206211b83605113cddde5cdd31b7b3"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "212b80b622c828fa5048794b8d61efc9ad6f74e3", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/212b80b622c828fa5048794b8d61efc9ad6f74e3", "committedDate": "2020-04-28T16:00:17Z", "message": "implementing changes from review"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6bcff5ca016ce504fc8d537be58a60cd7e6f9b2", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/c6bcff5ca016ce504fc8d537be58a60cd7e6f9b2", "committedDate": "2020-04-28T16:08:29Z", "message": "Adding person hashcode override"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyMDYwMzMy", "url": "https://github.com/MegaMek/mekhq/pull/1705#pullrequestreview-402060332", "createdAt": "2020-04-28T17:31:54Z", "commit": {"oid": "c6bcff5ca016ce504fc8d537be58a60cd7e6f9b2"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQxNzozMTo1NVrOGNfONQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQxNzozMzozNlrOGNfShw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjc5NjIxMw==", "bodyText": "I think reference equality is okay here actually. We wouldn't want two instances with the same UUID. In any case this is safe for now.", "url": "https://github.com/MegaMek/mekhq/pull/1705#discussion_r416796213", "createdAt": "2020-04-28T17:31:55Z", "author": {"login": "sixlettervariables"}, "path": "MekHQ/src/mekhq/campaign/ResolveScenarioTracker.java", "diffHunk": "@@ -923,7 +922,7 @@ private void processPrisonerCapture(List<TestUnit> unitsToProcess) {\n                 }\n                 if (en.hasWorkingMisc(MiscType.F_COMMAND_CONSOLE)) {\n                     for (Person p : crew) {\n-                        if (p != commander && p != driver) {\n+                        if (!p.equals(commander) && !p.equals(driver)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c6bcff5ca016ce504fc8d537be58a60cd7e6f9b2"}, "originalPosition": 375}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjc5NzMxOQ==", "bodyText": "Should have a reference equality check first.", "url": "https://github.com/MegaMek/mekhq/pull/1705#discussion_r416797319", "createdAt": "2020-04-28T17:33:36Z", "author": {"login": "sixlettervariables"}, "path": "MekHQ/src/mekhq/campaign/personnel/Person.java", "diffHunk": "@@ -2654,6 +2652,25 @@ public String toString() {\n         return getFullName();\n     }\n \n+    /**\n+     * Two people are determined to be equal if they have the same id\n+     * @param object the object to check if it is equal to the person or not\n+     * @return true if they have the same id, otherwise false\n+     */\n+    @Override\n+    public boolean equals(Object object) {\n+        if (!(object instanceof Person)) {\n+            return false;\n+        } else {\n+            return getId().equals(((Person) object).getId());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c6bcff5ca016ce504fc8d537be58a60cd7e6f9b2"}, "originalPosition": 40}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "66016bc764989ae91d8a997f7dc6ecc7e651e492", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/66016bc764989ae91d8a997f7dc6ecc7e651e492", "committedDate": "2020-04-28T20:57:46Z", "message": "Implementing object comparison equality for Person::equals"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyMjU0OTQw", "url": "https://github.com/MegaMek/mekhq/pull/1705#pullrequestreview-402254940", "createdAt": "2020-04-28T22:23:21Z", "commit": {"oid": "66016bc764989ae91d8a997f7dc6ecc7e651e492"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4411, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}