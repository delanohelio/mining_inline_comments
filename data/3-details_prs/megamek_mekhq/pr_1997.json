{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgxNTE1MDY1", "number": 1997, "title": "AtB Lance By Role BugFix", "bodyText": "This is a bugfix and refactor for the recent AtB Lance by Role changes. I swapped it over to using int, fixed saving issues, and simplified the math.", "createdAt": "2020-09-07T16:07:42Z", "url": "https://github.com/MegaMek/mekhq/pull/1997", "merged": true, "mergeCommit": {"oid": "63c98b551884547e5df5630c494983bd8b76c80a"}, "closed": true, "closedAt": "2020-09-07T16:49:23Z", "author": {"login": "Windchild292"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdGlRBwAH2gAyNDgxNTE1MDY1OmEyZDAzMjNlNzlmNWRmOTc2ZjUyZjg1MDBmNjNmOTNhYTA5YTEwMjk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdGlzivAFqTQ4MzY2MjkzNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a2d0323e79f5df976f52f8500f63f93aa09a1029", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/a2d0323e79f5df976f52f8500f63f93aa09a1029", "committedDate": "2020-09-07T16:05:52Z", "message": "Converting Battle Role to Int"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzNjU0ODIx", "url": "https://github.com/MegaMek/mekhq/pull/1997#pullrequestreview-483654821", "createdAt": "2020-09-07T16:19:07Z", "commit": {"oid": "a2d0323e79f5df976f52f8500f63f93aa09a1029"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxNjoxOTowOFrOHOEQDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxNjoxOTowOFrOHOEQDg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDUxMTc1OA==", "bodyText": "How will this handle older saves?", "url": "https://github.com/MegaMek/mekhq/pull/1997#discussion_r484511758", "createdAt": "2020-09-07T16:19:08Z", "author": {"login": "sixlettervariables"}, "path": "MekHQ/src/mekhq/campaign/CampaignOptions.java", "diffHunk": "@@ -3852,14 +3852,14 @@ public static CampaignOptions generateCampaignOptionsFromXml(Node wn) {\n             } else if (wn2.getNodeName().equalsIgnoreCase(\"intensity\")) { // Legacy\n                 double intensity = Double.parseDouble(wn2.getTextContent().trim());\n \n-                retVal.atbBattleChance[AtBLanceRole.FIGHTING.ordinal()] = ((40.0 * intensity) / (40.0 * intensity + 60.0)) * 100.0 + 0.5;\n-                retVal.atbBattleChance[AtBLanceRole.DEFENCE.ordinal()] = ((20.0 * intensity) / (20.0 * intensity + 80.0)) * 100.0 + 0.5;\n-                retVal.atbBattleChance[AtBLanceRole.SCOUTING.ordinal()] = ((60.0 * intensity) / (60.0 * intensity + 40.0)) * 100.0 + 0.5;\n-                retVal.atbBattleChance[AtBLanceRole.TRAINING.ordinal()] = ((10.0 * intensity) / (10.0 * intensity + 90.0)) * 100.0 + 0.5;\n+                retVal.atbBattleChance[AtBLanceRole.FIGHTING.ordinal()] = (int) Math.round(((40.0 * intensity) / (40.0 * intensity + 60.0)) * 100.0 + 0.5);\n+                retVal.atbBattleChance[AtBLanceRole.DEFENCE.ordinal()] = (int) Math.round(((20.0 * intensity) / (20.0 * intensity + 80.0)) * 100.0 + 0.5);\n+                retVal.atbBattleChance[AtBLanceRole.SCOUTING.ordinal()] = (int) Math.round(((60.0 * intensity) / (60.0 * intensity + 40.0)) * 100.0 + 0.5);\n+                retVal.atbBattleChance[AtBLanceRole.TRAINING.ordinal()] = (int) Math.round(((10.0 * intensity) / (10.0 * intensity + 90.0)) * 100.0 + 0.5);\n             } else if (wn2.getNodeName().equalsIgnoreCase(\"atbBattleChance\")) {\n                 String[] values = wn2.getTextContent().split(\",\");\n                 for (int i = 0; i < values.length; i++) {\n-                    retVal.atbBattleChance[i] = Double.parseDouble(values[i]);\n+                    retVal.atbBattleChance[i] = Integer.parseInt(values[i]);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2d0323e79f5df976f52f8500f63f93aa09a1029"}, "originalPosition": 62}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eafec759d8b50ab59eb64dab0b887bdc1886e186", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/eafec759d8b50ab59eb64dab0b887bdc1886e186", "committedDate": "2020-09-07T16:31:40Z", "message": "Implementing migration"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzNjYyOTM2", "url": "https://github.com/MegaMek/mekhq/pull/1997#pullrequestreview-483662936", "createdAt": "2020-09-07T16:43:34Z", "commit": {"oid": "eafec759d8b50ab59eb64dab0b887bdc1886e186"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4187, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}