{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA1MTAwMjM0", "number": 2151, "title": "MissionStatus Enum", "bodyText": "This PR swaps MissionStatus from magic numbers to an enum.\nAs part of this I reworked the CompleteMissionDialog, which is the first commit.", "createdAt": "2020-10-16T21:01:01Z", "url": "https://github.com/MegaMek/mekhq/pull/2151", "merged": true, "mergeCommit": {"oid": "8edd80602ea94a1c12cb5c0c31880caeb2525ab6"}, "closed": true, "closedAt": "2021-03-12T13:30:04Z", "author": {"login": "Windchild292"}, "timelineItems": {"totalCount": 22, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdTML7QgH2gAyNTA1MTAwMjM0OjMyYWU2YjcxMjBkZTU4YWRhZDFmZjJhYzAzZmVjYjczYzA5NTFhYjU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABeCRsJzgFqTYxMDQxODUyOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "32ae6b7120de58adad1ff2ac03fecb73c0951ab5", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/32ae6b7120de58adad1ff2ac03fecb73c0951ab5", "committedDate": "2020-10-16T20:13:41Z", "message": "Heavy refactor of CompleteMissionDialog"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "75e396b885c6008c6f6a7d72f1bbd7aad8099970", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/75e396b885c6008c6f6a7d72f1bbd7aad8099970", "committedDate": "2020-10-16T20:29:27Z", "message": "Moving to an enum for mission status"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f3516bcd7c5c2808e0cc85da79465f3af2dfe940", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/f3516bcd7c5c2808e0cc85da79465f3af2dfe940", "committedDate": "2020-10-16T20:58:56Z", "message": "Bugfixing and changes from personal review"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f34ac06c3db416f5e852246e928d3b1c6c132500", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/f34ac06c3db416f5e852246e928d3b1c6c132500", "committedDate": "2020-10-21T01:00:04Z", "message": "Merge branch 'master' into dev_Windchild_MissionStatus"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE0MjkzMjA2", "url": "https://github.com/MegaMek/mekhq/pull/2151#pullrequestreview-514293206", "createdAt": "2020-10-22T01:10:01Z", "commit": {"oid": "f34ac06c3db416f5e852246e928d3b1c6c132500"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQwMToxMDowMlrOHmNDEA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQwMToxMDowMlrOHmNDEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTgyMTcxMg==", "bodyText": "I would suggest retaining the isActive() method, but having it call getStatus().isActive(). That way you can reduce the footprint of this PR quite a bit while keeping the spirit.", "url": "https://github.com/MegaMek/mekhq/pull/2151#discussion_r509821712", "createdAt": "2020-10-22T01:10:02Z", "author": {"login": "NickAragua"}, "path": "MekHQ/src/mekhq/campaign/Campaign.java", "diffHunk": "@@ -3064,7 +3064,7 @@ public void readNews() {\n     }\n \n     public int getDeploymentDeficit(AtBContract contract) {\n-        if (!contract.isActive()) {\n+        if (!contract.getStatus().isActive()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f34ac06c3db416f5e852246e928d3b1c6c132500"}, "originalPosition": 32}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7c0dd98fed591d24803031e815a39480fae3da18", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/7c0dd98fed591d24803031e815a39480fae3da18", "committedDate": "2020-12-04T17:24:21Z", "message": "Fixing merge conflitcs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "461f2e03e5c7b7e233ccb188ab3acbea84217051", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/461f2e03e5c7b7e233ccb188ab3acbea84217051", "committedDate": "2021-01-09T17:33:02Z", "message": "Fixing merge conflicts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df4a29544f45765ee44363e2c9f2efd950b394f7", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/df4a29544f45765ee44363e2c9f2efd950b394f7", "committedDate": "2021-01-09T17:45:59Z", "message": "Fixing unit testing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b395926d66b44f814eeccbcdf238377754b3497f", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/b395926d66b44f814eeccbcdf238377754b3497f", "committedDate": "2021-01-16T17:03:30Z", "message": "Swapping to using streams for missions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3c08e5b43761cd85a411618df940a669f43b0f74", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/3c08e5b43761cd85a411618df940a669f43b0f74", "committedDate": "2021-01-16T17:03:41Z", "message": "Merge remote-tracking branch 'upstream/master' into dev_Windchild_MissionStatus"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "56075ee22d31cf6645cfbc078f6d0059a7c35a2e", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/56075ee22d31cf6645cfbc078f6d0059a7c35a2e", "committedDate": "2021-01-16T18:07:08Z", "message": "Swapping to stream implementation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c56982c6b4c7590fa58659f5739adb6fb98c38b3", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/c56982c6b4c7590fa58659f5739adb6fb98c38b3", "committedDate": "2021-01-16T18:20:27Z", "message": "Applying changes from personal review"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bac1ae00109056ac5aaf4ddf35370fb62657e4ed", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/bac1ae00109056ac5aaf4ddf35370fb62657e4ed", "committedDate": "2021-01-16T18:40:07Z", "message": "Moving to only use getMissions when necessary"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6a6ab7d22aae49fceae02409ae8f3121e890ccc1", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/6a6ab7d22aae49fceae02409ae8f3121e890ccc1", "committedDate": "2021-01-16T18:57:34Z", "message": "Moving to isActiveOn"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d4d08116905e9d574934a7d8247c24b09a64244", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/6d4d08116905e9d574934a7d8247c24b09a64244", "committedDate": "2021-01-16T19:31:44Z", "message": "Fixing unit testing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "746917d1bc29c5ba0115356897777a78c6dc3e68", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/746917d1bc29c5ba0115356897777a78c6dc3e68", "committedDate": "2021-02-11T19:16:07Z", "message": "Merge remote-tracking branch 'upstream/master' into dev_Windchild_MissionStatus"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5767fac16735b748124c2759fa7e02388f3e3e0", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/d5767fac16735b748124c2759fa7e02388f3e3e0", "committedDate": "2021-02-11T19:52:56Z", "message": "Applying changes from personal review"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9eca5ea7a7d0fe44db02d1ce091f5bf294cb156d", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/9eca5ea7a7d0fe44db02d1ce091f5bf294cb156d", "committedDate": "2021-03-09T16:07:57Z", "message": "Fixing merge conflicts"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjEwNDA0OTEw", "url": "https://github.com/MegaMek/mekhq/pull/2151#pullrequestreview-610404910", "createdAt": "2021-03-12T02:34:46Z", "commit": {"oid": "9eca5ea7a7d0fe44db02d1ce091f5bf294cb156d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMy0xMlQwMjozNDo0NlrOI1Z2mw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMy0xMlQwMjozNjowN1rOI1Z4gg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5Mjg2OTAxOQ==", "bodyText": "Looks like you missed a .isActiveOn() call here", "url": "https://github.com/MegaMek/mekhq/pull/2151#discussion_r592869019", "createdAt": "2021-03-12T02:34:46Z", "author": {"login": "NickAragua"}, "path": "MekHQ/src/mekhq/gui/dialog/ContractMarketDialog.java", "diffHunk": "@@ -104,16 +103,15 @@ public ContractMarketDialog(Frame frame, Campaign c) {\n      */\n     private void countSuccessfulContracts() {\n         HashMap<String, Integer> successfulContracts = new HashMap<>();\n-        for (Mission m : campaign.getMissions()) {\n-            if (m.isActive() || !(m instanceof AtBContract)\n-                    || ((AtBContract) m).getEmployerCode().equals(campaign.getRetainerEmployerCode())) {\n+        for (AtBContract contract : campaign.getAtBContracts()) {\n+            if (contract.getStatus().isActive()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9eca5ea7a7d0fe44db02d1ce091f5bf294cb156d"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5Mjg2OTUwNg==", "bodyText": "Is this a good place for isActiveOn()?", "url": "https://github.com/MegaMek/mekhq/pull/2151#discussion_r592869506", "createdAt": "2021-03-12T02:36:07Z", "author": {"login": "NickAragua"}, "path": "MekHQ/src/mekhq/campaign/Campaign.java", "diffHunk": "@@ -2939,11 +2998,12 @@ public void readNews() {\n         }\n     }\n \n+    /**\n+     * @param contract an active AtBContract\n+     * @return the current deployment deficit for the contract\n+     */\n     public int getDeploymentDeficit(AtBContract contract) {\n-        if (!contract.isActive()) {\n-            // Inactive contracts have no deficits.\n-            return 0;\n-        } else if (contract.getStartDate().compareTo(getLocalDate()) >= 0) {\n+        if (contract.getStartDate().compareTo(getLocalDate()) >= 0) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9eca5ea7a7d0fe44db02d1ce091f5bf294cb156d"}, "originalPosition": 133}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "64b151aab1a311e538c895526ba3f807216917c1", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/64b151aab1a311e538c895526ba3f807216917c1", "committedDate": "2021-03-12T02:48:54Z", "message": "Merge remote-tracking branch 'upstream/master' into dev_Windchild_MissionStatus"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "98253ba4fbbd681dca588b7cb766e8439c19d880", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/98253ba4fbbd681dca588b7cb766e8439c19d880", "committedDate": "2021-03-12T02:59:41Z", "message": "Applying bugfixes from review"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjEwNDE4NTI5", "url": "https://github.com/MegaMek/mekhq/pull/2151#pullrequestreview-610418529", "createdAt": "2021-03-12T03:12:51Z", "commit": {"oid": "98253ba4fbbd681dca588b7cb766e8439c19d880"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4092, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}