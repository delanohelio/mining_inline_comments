{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY1NjQ0OTQ2", "number": 1419, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQwNDo0MTowMFrODZtogw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxNTo1Nzo1M1rODaOP7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4Mjg4NjQzOnYy", "diffSide": "RIGHT", "path": "MekHQ/src/mekhq/campaign/finances/CurrencyManager.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQwNDo0MTowMFrOFgQZbA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxNjo0NzoxNlrOFhFQzQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTM2NzQwNA==", "bodyText": "Nice idea saving the currency for the day!", "url": "https://github.com/MegaMek/mekhq/pull/1419#discussion_r369367404", "createdAt": "2020-01-22T04:41:00Z", "author": {"login": "VicenteCartas"}, "path": "MekHQ/src/mekhq/campaign/finances/CurrencyManager.java", "diffHunk": "@@ -116,17 +120,26 @@ MoneyFormatter getUiAmountAndNamePrinter() {\n         return this.uiAmountAndNamePrinter;\n     }\n \n-    Currency getDefaultCurrency() {\n-        if (campaign != null) {\n-            HashMap<String, Currency> possibleCurrencies = new HashMap<>();\n+    synchronized Currency getDefaultCurrency() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bc100adad5646cef4d05a1dccacd692b4f30636a"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDIwMzUzMw==", "bodyText": "What happens if the user moves around between systems (e.g. using gm move?) We probably want to invalidate the cached value in that case as well.", "url": "https://github.com/MegaMek/mekhq/pull/1419#discussion_r370203533", "createdAt": "2020-01-23T15:56:20Z", "author": {"login": "NickAragua"}, "path": "MekHQ/src/mekhq/campaign/finances/CurrencyManager.java", "diffHunk": "@@ -116,17 +120,26 @@ MoneyFormatter getUiAmountAndNamePrinter() {\n         return this.uiAmountAndNamePrinter;\n     }\n \n-    Currency getDefaultCurrency() {\n-        if (campaign != null) {\n-            HashMap<String, Currency> possibleCurrencies = new HashMap<>();\n+    synchronized Currency getDefaultCurrency() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTM2NzQwNA=="}, "originalCommit": {"oid": "bc100adad5646cef4d05a1dccacd692b4f30636a"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDIzMzU0OQ==", "bodyText": "I'll invalidate the cache for that too, good catch.", "url": "https://github.com/MegaMek/mekhq/pull/1419#discussion_r370233549", "createdAt": "2020-01-23T16:47:16Z", "author": {"login": "sixlettervariables"}, "path": "MekHQ/src/mekhq/campaign/finances/CurrencyManager.java", "diffHunk": "@@ -116,17 +120,26 @@ MoneyFormatter getUiAmountAndNamePrinter() {\n         return this.uiAmountAndNamePrinter;\n     }\n \n-    Currency getDefaultCurrency() {\n-        if (campaign != null) {\n-            HashMap<String, Currency> possibleCurrencies = new HashMap<>();\n+    synchronized Currency getDefaultCurrency() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTM2NzQwNA=="}, "originalCommit": {"oid": "bc100adad5646cef4d05a1dccacd692b4f30636a"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4ODIzMDIwOnYy", "diffSide": "LEFT", "path": "MekHQ/src/mekhq/campaign/parts/PartInUse.java", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxNTo1Nzo1M1rOFhDfYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQwNTo0NTo1OVrOFhUZNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDIwNDUxNA==", "bodyText": "lol", "url": "https://github.com/MegaMek/mekhq/pull/1419#discussion_r370204514", "createdAt": "2020-01-23T15:57:53Z", "author": {"login": "NickAragua"}, "path": "MekHQ/src/mekhq/campaign/parts/PartInUse.java", "diffHunk": "@@ -1,17 +1,13 @@\n package mekhq.campaign.parts;\n \n import java.util.Objects;\n-import java.util.regex.Pattern;\n \n import megamek.common.AmmoType;\n import mekhq.campaign.finances.Money;\n import mekhq.campaign.unit.Unit;\n import mekhq.campaign.work.IAcquisitionWork;\n \n public class PartInUse {\n-    private static final Pattern cleanUp1 = Pattern.compile(\"\\\\d+\\\\shit\\\\(s\\\\),\\\\s\"); //$NON-NLS-1$", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bc100adad5646cef4d05a1dccacd692b4f30636a"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDIyODcxNg==", "bodyText": "The purpose of this is to keep the parts overview from being cluttered by showing number of hits the part has taken.", "url": "https://github.com/MegaMek/mekhq/pull/1419#discussion_r370228716", "createdAt": "2020-01-23T16:38:33Z", "author": {"login": "neoancient"}, "path": "MekHQ/src/mekhq/campaign/parts/PartInUse.java", "diffHunk": "@@ -1,17 +1,13 @@\n package mekhq.campaign.parts;\n \n import java.util.Objects;\n-import java.util.regex.Pattern;\n \n import megamek.common.AmmoType;\n import mekhq.campaign.finances.Money;\n import mekhq.campaign.unit.Unit;\n import mekhq.campaign.work.IAcquisitionWork;\n \n public class PartInUse {\n-    private static final Pattern cleanUp1 = Pattern.compile(\"\\\\d+\\\\shit\\\\(s\\\\),\\\\s\"); //$NON-NLS-1$", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDIwNDUxNA=="}, "originalCommit": {"oid": "bc100adad5646cef4d05a1dccacd692b4f30636a"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDIzMzAxNw==", "bodyText": "Woops, late night editing missed the Java regex difference. .NET regex that'd be an escaped \\ followed by shit. I'll find a better way than regex to remove those.", "url": "https://github.com/MegaMek/mekhq/pull/1419#discussion_r370233017", "createdAt": "2020-01-23T16:46:19Z", "author": {"login": "sixlettervariables"}, "path": "MekHQ/src/mekhq/campaign/parts/PartInUse.java", "diffHunk": "@@ -1,17 +1,13 @@\n package mekhq.campaign.parts;\n \n import java.util.Objects;\n-import java.util.regex.Pattern;\n \n import megamek.common.AmmoType;\n import mekhq.campaign.finances.Money;\n import mekhq.campaign.unit.Unit;\n import mekhq.campaign.work.IAcquisitionWork;\n \n public class PartInUse {\n-    private static final Pattern cleanUp1 = Pattern.compile(\"\\\\d+\\\\shit\\\\(s\\\\),\\\\s\"); //$NON-NLS-1$", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDIwNDUxNA=="}, "originalCommit": {"oid": "bc100adad5646cef4d05a1dccacd692b4f30636a"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDIzNDYyMg==", "bodyText": "I'm not going to pretend I've never snickered at it. My initial thought is a boolean parameter to getDetails() that would determine whether to include the hit data.", "url": "https://github.com/MegaMek/mekhq/pull/1419#discussion_r370234622", "createdAt": "2020-01-23T16:49:07Z", "author": {"login": "neoancient"}, "path": "MekHQ/src/mekhq/campaign/parts/PartInUse.java", "diffHunk": "@@ -1,17 +1,13 @@\n package mekhq.campaign.parts;\n \n import java.util.Objects;\n-import java.util.regex.Pattern;\n \n import megamek.common.AmmoType;\n import mekhq.campaign.finances.Money;\n import mekhq.campaign.unit.Unit;\n import mekhq.campaign.work.IAcquisitionWork;\n \n public class PartInUse {\n-    private static final Pattern cleanUp1 = Pattern.compile(\"\\\\d+\\\\shit\\\\(s\\\\),\\\\s\"); //$NON-NLS-1$", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDIwNDUxNA=="}, "originalCommit": {"oid": "bc100adad5646cef4d05a1dccacd692b4f30636a"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQ4MTQ2Mg==", "bodyText": "I've added an overload to handle that situation. One interesting find is that PodSpace seems to do something a bit different; but ultimately it isn't affected by this change.", "url": "https://github.com/MegaMek/mekhq/pull/1419#discussion_r370481462", "createdAt": "2020-01-24T05:45:59Z", "author": {"login": "sixlettervariables"}, "path": "MekHQ/src/mekhq/campaign/parts/PartInUse.java", "diffHunk": "@@ -1,17 +1,13 @@\n package mekhq.campaign.parts;\n \n import java.util.Objects;\n-import java.util.regex.Pattern;\n \n import megamek.common.AmmoType;\n import mekhq.campaign.finances.Money;\n import mekhq.campaign.unit.Unit;\n import mekhq.campaign.work.IAcquisitionWork;\n \n public class PartInUse {\n-    private static final Pattern cleanUp1 = Pattern.compile(\"\\\\d+\\\\shit\\\\(s\\\\),\\\\s\"); //$NON-NLS-1$", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDIwNDUxNA=="}, "originalCommit": {"oid": "bc100adad5646cef4d05a1dccacd692b4f30636a"}, "originalPosition": 12}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1893, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}