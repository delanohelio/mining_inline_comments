{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYyMjUyNjI4", "number": 1893, "title": "Personnel Status: Fixing ChangeStatus, Standardizing Boolean Comparisons, and Implementing Death Options ", "bodyText": "This fixes ChangeStatus by standardizing the one in Person and the one in Campaign into a single method. Furthermore, it standardizes enum comparisons into using boolean methods in the enum itself and implements four new personnel statuses for various forms of death.\nReview with whitespace differences off, as I've fixed a bunch of assorted spacing issues and tab spacing.", "createdAt": "2020-08-03T15:41:56Z", "url": "https://github.com/MegaMek/mekhq/pull/1893", "merged": true, "mergeCommit": {"oid": "5205c172e0314702c1125d92cc47621c96e0616e"}, "closed": true, "closedAt": "2020-08-10T01:53:16Z", "author": {"login": "Windchild292"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc6ZmXGgH2gAyNDYyMjUyNjI4OjNhNGMzOTA3MTcxOTY4Nzk2MzhjY2I5MThjYWI1MjFkZWY3NGIwN2M=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc9T_FlAFqTQ2MzkwMjU5Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3a4c390717196879638ccb918cab521def74b07c", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/3a4c390717196879638ccb918cab521def74b07c", "committedDate": "2020-07-31T19:43:13Z", "message": "Implementing Status changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "44db968ee70f4e1a416d3f4d94943e18cade925b", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/44db968ee70f4e1a416d3f4d94943e18cade925b", "committedDate": "2020-07-31T20:08:27Z", "message": "Fixing issues found during review"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "51760fe17442c725a1167591b7aeb5fa005a099c", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/51760fe17442c725a1167591b7aeb5fa005a099c", "committedDate": "2020-08-03T13:47:15Z", "message": "Merge remote-tracking branch 'upstream/master' into dev_Windchild_ChangeStatus"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "be9abbc8ccdffd7734a8d8d9f7bdede301aeecc5", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/be9abbc8ccdffd7734a8d8d9f7bdede301aeecc5", "committedDate": "2020-08-03T14:48:24Z", "message": "Cleaning up DataLoadingDialog formatting as part of debugging"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f330f1c5aeaaf3d4d7ac4c6891c4fbfaa3664fc5", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/f330f1c5aeaaf3d4d7ac4c6891c4fbfaa3664fc5", "committedDate": "2020-08-03T14:59:51Z", "message": "Fixing formatting in ChooseGamePresetDialog as part of cleaning up the DataLoadingDialog"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "069c3fc407f27182739ead6133e0c266e60821a8", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/069c3fc407f27182739ead6133e0c266e60821a8", "committedDate": "2020-08-03T15:11:16Z", "message": "Adding missing resources"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0bba9a67aa71309ccf5e9e599401bd15482215d8", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/0bba9a67aa71309ccf5e9e599401bd15482215d8", "committedDate": "2020-08-03T15:20:29Z", "message": "Fixing last minute findings"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e40265beeac027ad0dd1888e5eea30508453ed47", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/e40265beeac027ad0dd1888e5eea30508453ed47", "committedDate": "2020-08-03T15:37:07Z", "message": "Fixing merge conflicts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8cdeb401335fce1b1ddd66c401c905c94514a0b4", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/8cdeb401335fce1b1ddd66c401c905c94514a0b4", "committedDate": "2020-08-03T15:37:42Z", "message": "Fixing tab spacing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5c259b0da20c32bdd21d1ee5bccc5e2543688788", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/5c259b0da20c32bdd21d1ee5bccc5e2543688788", "committedDate": "2020-08-03T15:37:59Z", "message": "Fixing form title"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzODgzMjkz", "url": "https://github.com/MegaMek/mekhq/pull/1893#pullrequestreview-463883293", "createdAt": "2020-08-09T15:33:12Z", "commit": {"oid": "5c259b0da20c32bdd21d1ee5bccc5e2543688788"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOVQxNTozMzoxMlrOG974Wg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOVQxNTozNzoxMlrOG975xw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU5NzQwMg==", "bodyText": "Should we make this explicit? Might look weird if the person is in a status where it doesn't make sense for them to be re-hired.", "url": "https://github.com/MegaMek/mekhq/pull/1893#discussion_r467597402", "createdAt": "2020-08-09T15:33:12Z", "author": {"login": "NickAragua"}, "path": "MekHQ/src/mekhq/campaign/personnel/Person.java", "diffHunk": "@@ -863,6 +867,103 @@ public PersonnelStatus getStatus() {\n         return status;\n     }\n \n+    /**\n+     * This is used to change the person's PersonnelStatus\n+     * @param campaign the campaign the person is part of\n+     * @param status the person's new PersonnelStatus\n+     */\n+    public void changeStatus(Campaign campaign, PersonnelStatus status) {\n+        if (status == getStatus()) { // no change means we don't need to process anything\n+            return;\n+        } else if (getStatus().isKIA()) {\n+            // remove date of death for resurrection\n+            setDateOfDeath(null);\n+        }\n+\n+        switch (status) {\n+            case ACTIVE:\n+                if (getStatus().isMIA()) {\n+                    ServiceLogger.recoveredMia(this, campaign.getDate());\n+                } else if (getStatus().isDead()) {\n+                    ServiceLogger.resurrected(this, campaign.getDate());\n+                } else {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c259b0da20c32bdd21d1ee5bccc5e2543688788"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU5Nzc2Nw==", "bodyText": "Why would these \"isMIA/Retired\" checks even be necessary? This is the personnel market, for hiring new personnel? Unless I'm missing something.", "url": "https://github.com/MegaMek/mekhq/pull/1893#discussion_r467597767", "createdAt": "2020-08-09T15:37:12Z", "author": {"login": "NickAragua"}, "path": "MekHQ/src/mekhq/gui/dialog/PersonnelMarketDialog.java", "diffHunk": "@@ -443,15 +442,18 @@ public boolean include(Entry<? extends PersonnelTableModel, ? extends Integer> e\n                             (nGroup == PersonnelTab.PG_DOC && ((type == Person.T_DOCTOR) || (type == Person.T_MEDIC))) ||\n                             (nGroup == PersonnelTab.PG_ADMIN && type > Person.T_MEDIC)\n                             ) {\n-                        return person.isActive();\n-                    } else if(nGroup == PersonnelTab.PG_RETIRE) {\n-                        return person.getStatus() == PersonnelStatus.RETIRED;\n-                    } else if(nGroup == PersonnelTab.PG_MIA) {\n-                        return person.getStatus() == PersonnelStatus.MIA;\n-                    } else if(nGroup == PersonnelTab.PG_KIA) {\n-                        return person.getStatus() == PersonnelStatus.KIA;\n+                        return person.getStatus().isActive();\n+                    } else if (nGroup == PersonnelTab.PG_RETIRE) {\n+                        return person.getStatus().isRetired();\n+                    } else if (nGroup == PersonnelTab.PG_MIA) {\n+                        return person.getStatus().isMIA();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c259b0da20c32bdd21d1ee5bccc5e2543688788"}, "originalPosition": 23}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "724f04c85edfb8aa17010618fc895afb449d41ca", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/724f04c85edfb8aa17010618fc895afb449d41ca", "committedDate": "2020-08-09T17:26:02Z", "message": "Fixing merge conflicts"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzOTAyNTk3", "url": "https://github.com/MegaMek/mekhq/pull/1893#pullrequestreview-463902597", "createdAt": "2020-08-09T20:52:34Z", "commit": {"oid": "724f04c85edfb8aa17010618fc895afb449d41ca"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4331, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}