{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ2NjIwNjI4", "number": 2334, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQyMzo1NTozOVrOFJ5VXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQyMzo1NTozOVrOFJ5VXw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ1OTIwODYzOnYy", "diffSide": "RIGHT", "path": "MekHQ/src/mekhq/campaign/parts/Refit.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQyMzo1NTozOVrOIMaraA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQyMzo1NTozOVrOIMaraA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTg5MDkyMA==", "bodyText": "Space after //, and equip should be the full word", "url": "https://github.com/MegaMek/mekhq/pull/2334#discussion_r549890920", "createdAt": "2020-12-29T23:55:39Z", "author": {"login": "Windchild292"}, "path": "MekHQ/src/mekhq/campaign/parts/Refit.java", "diffHunk": "@@ -1558,41 +1558,67 @@ public void saveCustomization() throws EntityLoadingException {\n             }\n         }\n \n+        String fileNameCampaign;\n         try {\n             if (newEntity instanceof Mech) {\n                 //if this file already exists then don't overwrite it or we will end up with a bunch of copies\n                 String fileOutName = sCustomsDir + File.separator + fileName + \".mtf\";\n-                String fileNameCampaign = sCustomsDirCampaign + File.separator + fileName + \".mtf\";\n+                fileNameCampaign = sCustomsDirCampaign + File.separator + fileName + \".mtf\";\n                 if ((new File(fileOutName)).exists() || (new File(fileNameCampaign)).exists()) {\n                     throw new IOException(\"A file already exists with the custom name \"+fileNameCampaign+\". Please choose a different name. (Unit name and/or model)\");\n                 }\n-                FileOutputStream out = new FileOutputStream(fileNameCampaign);\n-                PrintStream p = new PrintStream(out);\n-                p.println(((Mech) newEntity).getMtf());\n-                p.close();\n-                out.close();\n+                try (FileOutputStream out = new FileOutputStream(fileNameCampaign);\n+                    PrintStream p = new PrintStream(out)) {\n+                    p.println(((Mech) newEntity).getMtf());\n+                }\n             } else {\n                 //if this file already exists then don't overwrite it or we will end up with a bunch of copies\n                 String fileOutName = sCustomsDir + File.separator + fileName + \".blk\";\n-                String fileNameCampaign = sCustomsDirCampaign + File.separator + fileName + \".blk\";\n+                fileNameCampaign = sCustomsDirCampaign + File.separator + fileName + \".blk\";\n                 if ((new File(fileOutName)).exists() || (new File(fileNameCampaign)).exists()) {\n                     throw new IOException(\"A file already exists with the custom name \"+fileNameCampaign+\". Please choose a different name. (Unit name and/or model)\");\n                 }\n                 BLKFile.encode(fileNameCampaign, newEntity);\n             }\n         } catch (Exception e) {\n             MekHQ.getLogger().error(e);\n+            fileNameCampaign = null;\n         }\n+\n         getCampaign().addCustom(newEntity.getChassis() + \" \" + newEntity.getModel());\n-        MechSummaryCache.getInstance().loadMechData();\n-        //I need to change the new entity to the one from the mtf file now, so that equip\n-        //numbers will match\n-        MechSummary summary = MechSummaryCache.getInstance().getMech(newEntity.getChassis() + \" \" + newEntity.getModel());\n-        if (null == summary) {\n-            throw(new EntityLoadingException());\n-        }\n \n-        newEntity = new MechFileParser(summary.getSourceFile(), summary.getEntryName()).getEntity();\n+        try {\n+            MechSummaryCache.getInstance().loadMechData();\n+\n+            //I need to change the new entity to the one from the mtf file now, so that equip\n+            //numbers will match", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "21c3eb4e65ee63f7a1f1aff7ec1b817b330eec47"}, "originalPosition": 52}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1998, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}