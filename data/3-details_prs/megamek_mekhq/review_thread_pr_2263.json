{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMyODM2MTY3", "number": 2263, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQyMDo1OTozMVrOFFOdZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQyMTowMToyMVrOFFOiGQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxMDI0MTAwOnYy", "diffSide": "RIGHT", "path": "MekHQ/src/mekhq/campaign/personnel/Person.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQyMDo1OTozMVrOIFomyQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQyMjoyODoxM1rOIFuXaA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Mjc3OTA4MQ==", "bodyText": "Honestly I think we can delete this old migration and its associated code.\nThoughts @HammerGS @neoancient ?", "url": "https://github.com/MegaMek/mekhq/pull/2263#discussion_r542779081", "createdAt": "2020-12-14T20:59:31Z", "author": {"login": "sixlettervariables"}, "path": "MekHQ/src/mekhq/campaign/personnel/Person.java", "diffHunk": "@@ -1956,9 +1959,8 @@ public static Person generateInstanceFromXML(Node wn, Campaign c, Version versio\n                     retVal.gender = Gender.parseFromString(wn2.getTextContent().trim());\n                 } else if (wn2.getNodeName().equalsIgnoreCase(\"rank\")) {\n                     if (version.isLowerThan(\"0.3.4-r1782\")) {\n-                        RankTranslator rt = new RankTranslator(c);\n                         try {\n-                            retVal.rank = rt.getNewRank(c.getRanks().getOldRankSystem(),\n+                            retVal.rank = PersonMigrator.getNewRank(c, c.getRanks().getOldRankSystem(),\n                                     Integer.parseInt(wn2.getTextContent()));\n                         } catch (ArrayIndexOutOfBoundsException e) {\n                             // Do nothing", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "875b9bde08ba7c0910c8ad45925cc1912afc0db9"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Mjg3MzQ0OA==", "bodyText": "I agree. We might want to decide on a policy, but I would say anything older than the previous stable version can be considered obsolete.", "url": "https://github.com/MegaMek/mekhq/pull/2263#discussion_r542873448", "createdAt": "2020-12-14T22:28:13Z", "author": {"login": "neoancient"}, "path": "MekHQ/src/mekhq/campaign/personnel/Person.java", "diffHunk": "@@ -1956,9 +1959,8 @@ public static Person generateInstanceFromXML(Node wn, Campaign c, Version versio\n                     retVal.gender = Gender.parseFromString(wn2.getTextContent().trim());\n                 } else if (wn2.getNodeName().equalsIgnoreCase(\"rank\")) {\n                     if (version.isLowerThan(\"0.3.4-r1782\")) {\n-                        RankTranslator rt = new RankTranslator(c);\n                         try {\n-                            retVal.rank = rt.getNewRank(c.getRanks().getOldRankSystem(),\n+                            retVal.rank = PersonMigrator.getNewRank(c, c.getRanks().getOldRankSystem(),\n                                     Integer.parseInt(wn2.getTextContent()));\n                         } catch (ArrayIndexOutOfBoundsException e) {\n                             // Do nothing", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Mjc3OTA4MQ=="}, "originalCommit": {"oid": "875b9bde08ba7c0910c8ad45925cc1912afc0db9"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxMDI1MzA1OnYy", "diffSide": "RIGHT", "path": "MekHQ/src/mekhq/campaign/personnel/ranks/Ranks.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQyMTowMToyMVrOIFoufA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQyMTowMToyMVrOIFoufA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Mjc4MTA1Mg==", "bodyText": "Another spot where I think we can shed some oldancient migration code.", "url": "https://github.com/MegaMek/mekhq/pull/2263#discussion_r542781052", "createdAt": "2020-12-14T21:01:21Z", "author": {"login": "sixlettervariables"}, "path": "MekHQ/src/mekhq/campaign/personnel/ranks/Ranks.java", "diffHunk": "@@ -442,36 +403,47 @@ public static Ranks generateInstanceFromXML(Node wn, Version version) {\n             for (int x = 0; x < nl.getLength(); x++) {\n                 Node wn2 = nl.item(x);\n \n-                if (wn2.getNodeName().equalsIgnoreCase(\"system\") || wn2.getNodeName().equalsIgnoreCase(\"rankSystem\")) {\n-                    retVal.rankSystem = Integer.parseInt(wn2.getTextContent());\n+                if (wn2.getNodeName().equalsIgnoreCase(\"system\")\n+                        || wn2.getNodeName().equalsIgnoreCase(\"rankSystem\")) {\n+                    retVal.rankSystem = Integer.parseInt(wn2.getTextContent().trim());\n \n                     // If this is an older version from before the full blown rank system with\n                     // professions, we need to translate it to match the new constants\n-                    if (version != null && version.isLowerThan(\"0.3.4-r1782\")) {\n+                    if ((version != null) && version.isLowerThan(\"0.3.4-r1782\")) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "875b9bde08ba7c0910c8ad45925cc1912afc0db9"}, "originalPosition": 274}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1971, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}