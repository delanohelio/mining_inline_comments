{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYyMjUyNjI4", "number": 1893, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOVQxNTozMzoxMlrOEWlnZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOVQxNTozNzoxMlrOEWloiw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyMTIwNDIzOnYy", "diffSide": "RIGHT", "path": "MekHQ/src/mekhq/campaign/personnel/Person.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOVQxNTozMzoxMlrOG974Wg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOVQxNzoxMjoxNFrOG98d_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU5NzQwMg==", "bodyText": "Should we make this explicit? Might look weird if the person is in a status where it doesn't make sense for them to be re-hired.", "url": "https://github.com/MegaMek/mekhq/pull/1893#discussion_r467597402", "createdAt": "2020-08-09T15:33:12Z", "author": {"login": "NickAragua"}, "path": "MekHQ/src/mekhq/campaign/personnel/Person.java", "diffHunk": "@@ -863,6 +867,103 @@ public PersonnelStatus getStatus() {\n         return status;\n     }\n \n+    /**\n+     * This is used to change the person's PersonnelStatus\n+     * @param campaign the campaign the person is part of\n+     * @param status the person's new PersonnelStatus\n+     */\n+    public void changeStatus(Campaign campaign, PersonnelStatus status) {\n+        if (status == getStatus()) { // no change means we don't need to process anything\n+            return;\n+        } else if (getStatus().isKIA()) {\n+            // remove date of death for resurrection\n+            setDateOfDeath(null);\n+        }\n+\n+        switch (status) {\n+            case ACTIVE:\n+                if (getStatus().isMIA()) {\n+                    ServiceLogger.recoveredMia(this, campaign.getDate());\n+                } else if (getStatus().isDead()) {\n+                    ServiceLogger.resurrected(this, campaign.getDate());\n+                } else {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c259b0da20c32bdd21d1ee5bccc5e2543688788"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzYwNzAzNw==", "bodyText": "The above handle all of the potential statuses that would not be a rehire, plus this would make the most sense for any status being changed to active that is not MIA or a version of death. (unless I'm missing a potential future addition, but this should be a solid future proofed method to do so)", "url": "https://github.com/MegaMek/mekhq/pull/1893#discussion_r467607037", "createdAt": "2020-08-09T17:12:14Z", "author": {"login": "Windchild292"}, "path": "MekHQ/src/mekhq/campaign/personnel/Person.java", "diffHunk": "@@ -863,6 +867,103 @@ public PersonnelStatus getStatus() {\n         return status;\n     }\n \n+    /**\n+     * This is used to change the person's PersonnelStatus\n+     * @param campaign the campaign the person is part of\n+     * @param status the person's new PersonnelStatus\n+     */\n+    public void changeStatus(Campaign campaign, PersonnelStatus status) {\n+        if (status == getStatus()) { // no change means we don't need to process anything\n+            return;\n+        } else if (getStatus().isKIA()) {\n+            // remove date of death for resurrection\n+            setDateOfDeath(null);\n+        }\n+\n+        switch (status) {\n+            case ACTIVE:\n+                if (getStatus().isMIA()) {\n+                    ServiceLogger.recoveredMia(this, campaign.getDate());\n+                } else if (getStatus().isDead()) {\n+                    ServiceLogger.resurrected(this, campaign.getDate());\n+                } else {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU5NzQwMg=="}, "originalCommit": {"oid": "5c259b0da20c32bdd21d1ee5bccc5e2543688788"}, "originalPosition": 41}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyMTIwNzE1OnYy", "diffSide": "RIGHT", "path": "MekHQ/src/mekhq/gui/dialog/PersonnelMarketDialog.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOVQxNTozNzoxMlrOG975xw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOVQxNzowNjo1NVrOG98b_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU5Nzc2Nw==", "bodyText": "Why would these \"isMIA/Retired\" checks even be necessary? This is the personnel market, for hiring new personnel? Unless I'm missing something.", "url": "https://github.com/MegaMek/mekhq/pull/1893#discussion_r467597767", "createdAt": "2020-08-09T15:37:12Z", "author": {"login": "NickAragua"}, "path": "MekHQ/src/mekhq/gui/dialog/PersonnelMarketDialog.java", "diffHunk": "@@ -443,15 +442,18 @@ public boolean include(Entry<? extends PersonnelTableModel, ? extends Integer> e\n                             (nGroup == PersonnelTab.PG_DOC && ((type == Person.T_DOCTOR) || (type == Person.T_MEDIC))) ||\n                             (nGroup == PersonnelTab.PG_ADMIN && type > Person.T_MEDIC)\n                             ) {\n-                        return person.isActive();\n-                    } else if(nGroup == PersonnelTab.PG_RETIRE) {\n-                        return person.getStatus() == PersonnelStatus.RETIRED;\n-                    } else if(nGroup == PersonnelTab.PG_MIA) {\n-                        return person.getStatus() == PersonnelStatus.MIA;\n-                    } else if(nGroup == PersonnelTab.PG_KIA) {\n-                        return person.getStatus() == PersonnelStatus.KIA;\n+                        return person.getStatus().isActive();\n+                    } else if (nGroup == PersonnelTab.PG_RETIRE) {\n+                        return person.getStatus().isRetired();\n+                    } else if (nGroup == PersonnelTab.PG_MIA) {\n+                        return person.getStatus().isMIA();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c259b0da20c32bdd21d1ee5bccc5e2543688788"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzYwNjUyNA==", "bodyText": "This is required because of how the tabs on this dialog are currently set up (otherwise we end up with '?' selection options). I'm planning a refactor in the near future to fix this requirement.", "url": "https://github.com/MegaMek/mekhq/pull/1893#discussion_r467606524", "createdAt": "2020-08-09T17:06:55Z", "author": {"login": "Windchild292"}, "path": "MekHQ/src/mekhq/gui/dialog/PersonnelMarketDialog.java", "diffHunk": "@@ -443,15 +442,18 @@ public boolean include(Entry<? extends PersonnelTableModel, ? extends Integer> e\n                             (nGroup == PersonnelTab.PG_DOC && ((type == Person.T_DOCTOR) || (type == Person.T_MEDIC))) ||\n                             (nGroup == PersonnelTab.PG_ADMIN && type > Person.T_MEDIC)\n                             ) {\n-                        return person.isActive();\n-                    } else if(nGroup == PersonnelTab.PG_RETIRE) {\n-                        return person.getStatus() == PersonnelStatus.RETIRED;\n-                    } else if(nGroup == PersonnelTab.PG_MIA) {\n-                        return person.getStatus() == PersonnelStatus.MIA;\n-                    } else if(nGroup == PersonnelTab.PG_KIA) {\n-                        return person.getStatus() == PersonnelStatus.KIA;\n+                        return person.getStatus().isActive();\n+                    } else if (nGroup == PersonnelTab.PG_RETIRE) {\n+                        return person.getStatus().isRetired();\n+                    } else if (nGroup == PersonnelTab.PG_MIA) {\n+                        return person.getStatus().isMIA();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU5Nzc2Nw=="}, "originalCommit": {"oid": "5c259b0da20c32bdd21d1ee5bccc5e2543688788"}, "originalPosition": 23}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2376, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}