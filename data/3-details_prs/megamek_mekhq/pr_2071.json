{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk0Nzc2MzIz", "number": 2071, "title": "Dev vulpzor campaign ops dropship maintenance cost fix", "bodyText": "Campaign Ops dropships operation costs due to training munition costs were in the millions - out of line with the examples in the published source book.  The calculations in the base class are correct, and have been used instead of the override that was multiplying for the size of the ammo bay twice.\nNote: this fixes the issue, but unclear why there was a size multiplier given that getCurrentShots() / getShotsPerTon() was already giving a 2x cost for a 2 ton bay.\n(Note, this is a small bug I've had fixed locally for a while, using as a sample for github contribution workflow before getting larger patches together.)\nTo verify, compare the patched and unpatched values for a Union-X in the hangar, by right clicking and choosing \"Show Monthly Supply Cost Report\".  Screenshot of fixed version included below", "createdAt": "2020-09-29T11:57:54Z", "url": "https://github.com/MegaMek/mekhq/pull/2071", "merged": true, "mergeCommit": {"oid": "ed231a6fe518cca9931df488dd7f27b7ec7d2798"}, "closed": true, "closedAt": "2020-09-29T14:30:56Z", "author": {"login": "vulpzor"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdNl_QjAH2gAyNDk0Nzc2MzIzOjU1ZWVjYzI3MmY3N2E4ZmUwYjcxZGNlYzliOTkyZmY0MGI0M2QzYTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdNpDvvgFqTQ5ODUzMjM1MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "55eecc272f77a8fe0b71dcec9b992ff40b43d3a4", "author": {"user": {"login": "vulpzor", "name": null}}, "url": "https://github.com/MegaMek/mekhq/commit/55eecc272f77a8fe0b71dcec9b992ff40b43d3a4", "committedDate": "2020-09-29T10:53:50Z", "message": "Fix for dropship ammo costs not matching campaign ops rules"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6c09f084c0c931dc0fd0d0369ab7bbeae618cc1f", "author": {"user": {"login": "vulpzor", "name": null}}, "url": "https://github.com/MegaMek/mekhq/commit/6c09f084c0c931dc0fd0d0369ab7bbeae618cc1f", "committedDate": "2020-09-29T11:20:00Z", "message": "Remove LargeCraftAmmoBin override with same code as base class"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk4NDU5Mzc5", "url": "https://github.com/MegaMek/mekhq/pull/2071#pullrequestreview-498459379", "createdAt": "2020-09-29T13:20:03Z", "commit": {"oid": "6c09f084c0c931dc0fd0d0369ab7bbeae618cc1f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQxMzoyMDowM1rOHZsxBA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQxMzoyMDowM1rOHZsxBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjcwOTg5Mg==", "bodyText": "The real fix here is to just delete the .multipliedBy(size) line, which looks like a copy-paste error from getValueNeeded.\nCompare this to AmmoBin.java:\n\n  \n    \n      mekhq/MekHQ/src/mekhq/campaign/parts/equipment/AmmoBin.java\n    \n    \n        Lines 186 to 195\n      in\n      785d0a3\n    \n    \n    \n    \n\n        \n          \n           @Override \n        \n\n        \n          \n           public Money getStickerPrice() { \n        \n\n        \n          \n               if (getShotsPerTon() <= 0) { \n        \n\n        \n          \n                   return Money.zero(); \n        \n\n        \n          \n               } \n        \n\n        \n          \n            \n        \n\n        \n          \n               return getPricePerTon() \n        \n\n        \n          \n                       .multipliedBy(getCurrentShots()) \n        \n\n        \n          \n                       .dividedBy(getShotsPerTon()); \n        \n\n        \n          \n           }", "url": "https://github.com/MegaMek/mekhq/pull/2071#discussion_r496709892", "createdAt": "2020-09-29T13:20:03Z", "author": {"login": "sixlettervariables"}, "path": "MekHQ/src/mekhq/campaign/parts/equipment/LargeCraftAmmoBin.java", "diffHunk": "@@ -169,18 +169,6 @@ protected Money getPricePerTon() {\n         return Money.of(getType().getRawCost());\n     }\n \n-    @Override\n-    public Money getStickerPrice() {\n-        if (getShotsPerTon() <= 0) {\n-            return Money.zero();\n-        }\n-\n-        return getPricePerTon()\n-                .multipliedBy(size)\n-                .multipliedBy(getCurrentShots())\n-                .dividedBy(getShotsPerTon());\n-    }\n-", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6c09f084c0c931dc0fd0d0369ab7bbeae618cc1f"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk4NTMyMzUw", "url": "https://github.com/MegaMek/mekhq/pull/2071#pullrequestreview-498532350", "createdAt": "2020-09-29T14:28:27Z", "commit": {"oid": "6c09f084c0c931dc0fd0d0369ab7bbeae618cc1f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4232, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}