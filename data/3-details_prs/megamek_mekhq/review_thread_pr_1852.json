{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ2OTg3OTk3", "number": 1852, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQwMTo1NDo0MlrOEOEdYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQwMTo1NzowMVrOEOEfPw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzMTg4NTc4OnYy", "diffSide": "RIGHT", "path": "MekHQ/src/mekhq/campaign/Campaign.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQwMTo1NDo0MlrOGxBEQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQwMzowMToyOFrOGxCOEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDA1MDg4Mw==", "bodyText": "ChronoUnit.YEARS.between returns the whole number of years between two dates. This isn't the same logic as before (but perhaps roughly the same logic).", "url": "https://github.com/MegaMek/mekhq/pull/1852#discussion_r454050883", "createdAt": "2020-07-14T01:54:42Z", "author": {"login": "sixlettervariables"}, "path": "MekHQ/src/mekhq/campaign/Campaign.java", "diffHunk": "@@ -8395,8 +8395,8 @@ public boolean checkRetirementDefections() {\n \n     public boolean checkYearlyRetirements() {\n         if (getCampaignOptions().getUseAtB()\n-                && Utilities.getDaysBetween(getRetirementDefectionTracker()\n-                        .getLastRetirementRoll().getTime(), getDate()) == 365) {\n+                && (Math.toIntExact(ChronoUnit.YEARS.between(getRetirementDefectionTracker()\n+                .getLastRetirementRoll(), getLocalDate())) == 1)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9151f3911666dc97921babdae50614da148581c9"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDA2OTc3Ng==", "bodyText": "That is correct, but the rules do say yearly so this is proper", "url": "https://github.com/MegaMek/mekhq/pull/1852#discussion_r454069776", "createdAt": "2020-07-14T03:01:28Z", "author": {"login": "Windchild292"}, "path": "MekHQ/src/mekhq/campaign/Campaign.java", "diffHunk": "@@ -8395,8 +8395,8 @@ public boolean checkRetirementDefections() {\n \n     public boolean checkYearlyRetirements() {\n         if (getCampaignOptions().getUseAtB()\n-                && Utilities.getDaysBetween(getRetirementDefectionTracker()\n-                        .getLastRetirementRoll().getTime(), getDate()) == 365) {\n+                && (Math.toIntExact(ChronoUnit.YEARS.between(getRetirementDefectionTracker()\n+                .getLastRetirementRoll(), getLocalDate())) == 1)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDA1MDg4Mw=="}, "originalCommit": {"oid": "9151f3911666dc97921babdae50614da148581c9"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzMTg5MDU1OnYy", "diffSide": "RIGHT", "path": "MekHQ/src/mekhq/gui/dialog/RetirementDefectionDialog.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQwMTo1NzowMVrOGxBG9A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxNDo0NToyN1rOGxXEUA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDA1MTU3Mg==", "bodyText": "Why toInt here and above, Is long not going to work?", "url": "https://github.com/MegaMek/mekhq/pull/1852#discussion_r454051572", "createdAt": "2020-07-14T01:57:01Z", "author": {"login": "sixlettervariables"}, "path": "MekHQ/src/mekhq/gui/dialog/RetirementDefectionDialog.java", "diffHunk": "@@ -173,8 +184,8 @@ private void initComponents(boolean doRetirement) {\n             }\n             if (null == contract) {\n                 instructions += \"\\n\\nDays since last retirement roll: \"\n-                        + Utilities.countDaysBetween(rdTracker.getLastRetirementRoll().getTime(),\n-                                hqView.getCampaign().getDate());\n+                        + Math.toIntExact(ChronoUnit.DAYS.between(rdTracker.getLastRetirementRoll(),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9151f3911666dc97921babdae50614da148581c9"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDQxMTM0NA==", "bodyText": "Force of habit to move from long to int, swapped them both to long because they do work as intended as longs.", "url": "https://github.com/MegaMek/mekhq/pull/1852#discussion_r454411344", "createdAt": "2020-07-14T14:45:27Z", "author": {"login": "Windchild292"}, "path": "MekHQ/src/mekhq/gui/dialog/RetirementDefectionDialog.java", "diffHunk": "@@ -173,8 +184,8 @@ private void initComponents(boolean doRetirement) {\n             }\n             if (null == contract) {\n                 instructions += \"\\n\\nDays since last retirement roll: \"\n-                        + Utilities.countDaysBetween(rdTracker.getLastRetirementRoll().getTime(),\n-                                hqView.getCampaign().getDate());\n+                        + Math.toIntExact(ChronoUnit.DAYS.between(rdTracker.getLastRetirementRoll(),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDA1MTU3Mg=="}, "originalCommit": {"oid": "9151f3911666dc97921babdae50614da148581c9"}, "originalPosition": 57}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2352, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}