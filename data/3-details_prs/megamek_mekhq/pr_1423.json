{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY2NDgzMzYw", "number": 1423, "title": "Personnel and AtBScenarioFactor Code Refactor", "bodyText": "This is a refactor mostly relating to the Personnel tab. I decided to do this as an individual PR before I started to work on fixing and enhancing this region of the code, to make it easier to tell what is a refactor and what is a fix.\nSome changes to Scenario Generation are also included, to get those refactors included in develop.", "createdAt": "2020-01-23T17:39:16Z", "url": "https://github.com/MegaMek/mekhq/pull/1423", "merged": true, "mergeCommit": {"oid": "d84fe348550b51852a654ce3b2c0826d75099e7e"}, "closed": true, "closedAt": "2020-01-29T01:02:33Z", "author": {"login": "Windchild292"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb8jieTgH2gAyMzY2NDgzMzYwOjRiMWU5ZjE0MzBmNjdlNWYxNTVhMzFkZmUyNmE3YmIxOGZkYWQwOTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb-KkVJAH2gAyMzY2NDgzMzYwOjc2ZDQxMTFlMWUyYTAxNWFjNDJkYzgwMzEwMDM4NTkzODdlNmM3Mjk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4b1e9f1430f67e5f155a31dfe26a7bb18fdad095", "author": {"user": null}, "url": "https://github.com/MegaMek/mekhq/commit/4b1e9f1430f67e5f155a31dfe26a7bb18fdad095", "committedDate": "2020-01-21T16:14:43Z", "message": "Refactoring in AtBScenarioFactory and Lance files relating to the use of the GM Generate Contracts button"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "540b3f98ba8ab91913df29c0722e925456ba2f2b", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/540b3f98ba8ab91913df29c0722e925456ba2f2b", "committedDate": "2020-01-23T15:11:38Z", "message": "Merge remote-tracking branch 'origin/dev_Windchild_RandomRefactoring' into dev_Windchild_Personnel_Refactor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fc7343a4358a7e7dd360cd4fd78d1263231a4d7f", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/fc7343a4358a7e7dd360cd4fd78d1263231a4d7f", "committedDate": "2020-01-23T17:25:22Z", "message": "Refactoring and code cleanup relating to Personnel and Ancestors"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3NDkyMjIw", "url": "https://github.com/MegaMek/mekhq/pull/1423#pullrequestreview-347492220", "createdAt": "2020-01-23T17:52:15Z", "commit": {"oid": "fc7343a4358a7e7dd360cd4fd78d1263231a4d7f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxNzo1MjoxNlrOFhHQRA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxODowMTowOVrOFhHgoQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDI2NjE4MA==", "bodyText": "Should just be -retVal", "url": "https://github.com/MegaMek/mekhq/pull/1423#discussion_r370266180", "createdAt": "2020-01-23T17:52:16Z", "author": {"login": "sixlettervariables"}, "path": "MekHQ/src/mekhq/campaign/Campaign.java", "diffHunk": "@@ -1860,31 +1843,27 @@ public Person findBestInRole(int role, String skill) {\n         // Return the tech collection sorted worst to best\n         // Reverse the sort if we've been asked for best to worst\n         if (sorted) {\n-            Collections.sort(techs, new Comparator<Person>() {\n-                @Override\n-                public int compare(Person person1, Person person2) {\n-                    // default to 0, which means they're equal\n-                    int retVal = 0;\n-\n-                    // Set up booleans to know if the tech is secondary only\n-                    // this is to get the skill from getExperienceLevel(boolean) properly\n-                    boolean p1Secondary = !person1.isTechPrimary() && person1.isTechSecondary();\n-                    boolean p2Secondary = !person2.isTechPrimary() && person2.isTechSecondary();\n-\n-                    if (person1.getExperienceLevel(p1Secondary)\n-                            > person2.getExperienceLevel(p2Secondary)) {\n-                        // Person 1 is better than Person 2.\n-                        retVal = -1;\n-                    } else if (person1.getExperienceLevel(p1Secondary)\n-                            < person2.getExperienceLevel(p2Secondary)) {\n-                        // Person 2 is better than Person 1\n-                        retVal = 1;\n-                    }\n-\n-                    // Return, swapping the value if we're looking to have Elites ordered first\n-                    return eliteFirst ? retVal *= -1 : retVal;\n-                }\n-\n+            techs.sort((person1, person2) -> {\n+                // default to 0, which means they're equal\n+                int retVal = 0;\n+\n+                // Set up booleans to know if the tech is secondary only\n+                // this is to get the skill from getExperienceLevel(boolean) properly\n+                boolean p1Secondary = !person1.isTechPrimary() && person1.isTechSecondary();\n+                boolean p2Secondary = !person2.isTechPrimary() && person2.isTechSecondary();\n+\n+                if (person1.getExperienceLevel(p1Secondary)\n+                        > person2.getExperienceLevel(p2Secondary)) {\n+                    // Person 1 is better than Person 2.\n+                    retVal = -1;\n+                } else if (person1.getExperienceLevel(p1Secondary)\n+                        < person2.getExperienceLevel(p2Secondary)) {\n+                    // Person 2 is better than Person 1\n+                    retVal = 1;\n+                }\n+\n+                // Return, swapping the value if we're looking to have Elites ordered first\n+                return eliteFirst ? retVal *= -1 : retVal;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fc7343a4358a7e7dd360cd4fd78d1263231a4d7f"}, "originalPosition": 313}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDI3MDM2OQ==", "bodyText": "Revert these ProtomekArmor -> ProtoMech Armor changes. We're referring to class names here.", "url": "https://github.com/MegaMek/mekhq/pull/1423#discussion_r370270369", "createdAt": "2020-01-23T18:01:09Z", "author": {"login": "sixlettervariables"}, "path": "MekHQ/src/mekhq/campaign/Campaign.java", "diffHunk": "@@ -6887,15 +6854,15 @@ public PartInventory getPartInventory(Part part) {\n             }\n             if (part.isSamePartType(p)) {\n                 if (p.isPresent()) {\n-                    if (p instanceof Armor) { // ProtomekArmor and BaArmor are derived from Armor", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fc7343a4358a7e7dd360cd4fd78d1263231a4d7f"}, "originalPosition": 833}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f17a8742d78d12c06c23072a66ff741c5c0f6e29", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/f17a8742d78d12c06c23072a66ff741c5c0f6e29", "committedDate": "2020-01-23T18:15:15Z", "message": "Fixing review comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3NzU2MjYy", "url": "https://github.com/MegaMek/mekhq/pull/1423#pullrequestreview-347756262", "createdAt": "2020-01-24T05:26:23Z", "commit": {"oid": "f17a8742d78d12c06c23072a66ff741c5c0f6e29"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "88ec67ce73016f1b326420aadc16b44e9187956a", "author": {"user": {"login": "sixlettervariables", "name": "Christopher Watford"}}, "url": "https://github.com/MegaMek/mekhq/commit/88ec67ce73016f1b326420aadc16b44e9187956a", "committedDate": "2020-01-25T18:26:43Z", "message": "Merge branch 'master' into dev_Windchild_Personnel_Refactor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f0def0269f480851220460d50301d63c768838a7", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/f0def0269f480851220460d50301d63c768838a7", "committedDate": "2020-01-26T16:07:42Z", "message": "Merge remote-tracking branch 'upstream/master' into dev_Windchild_Personnel_Refactor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "76d4111e1e2a015ac42dc8031003859387e6c729", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/76d4111e1e2a015ac42dc8031003859387e6c729", "committedDate": "2020-01-26T16:16:58Z", "message": "Fixing merge conflicts"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4436, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}