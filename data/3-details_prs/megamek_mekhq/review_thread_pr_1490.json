{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc1ODU1Mjc3", "number": 1490, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQxODo1NDo1N1rODgOnbQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMlQxNzoxMjowNlrODiGFQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MTIwNDkzOnYy", "diffSide": "RIGHT", "path": "MekHQ/src/mekhq/gui/adapter/TOEMouseAdapter.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQxODo1NDo1N1rOFqUxGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQyMzo1MzowOVrOFqWAzQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkyNDc2Mg==", "bodyText": "Why are you initializing this with a \"\" instead of just not including text?", "url": "https://github.com/MegaMek/mekhq/pull/1490#discussion_r379924762", "createdAt": "2020-02-16T18:54:57Z", "author": {"login": "Windchild292"}, "path": "MekHQ/src/mekhq/gui/adapter/TOEMouseAdapter.java", "diffHunk": "@@ -1168,15 +1172,30 @@ private void maybeShowPopup(MouseEvent e) {\n                 JMenu i_trn = new JMenu(TOEMouseAdapter.INFANTRY_CARRIERS);\n                 JMenu a_trn = new JMenu(TOEMouseAdapter.ASF_CARRIERS);\n                 JMenu sc_trn = new JMenu(TOEMouseAdapter.SC_CARRIERS);\n+                JMenu singleUnitMenu = new JMenu(\"\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7078d3ee2f11bf7040423b11bc6cfd8c27d2ccf2"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTk0NTE2NQ==", "bodyText": "No reason...     Fixed.", "url": "https://github.com/MegaMek/mekhq/pull/1490#discussion_r379945165", "createdAt": "2020-02-16T23:53:09Z", "author": {"login": "mkerensky"}, "path": "MekHQ/src/mekhq/gui/adapter/TOEMouseAdapter.java", "diffHunk": "@@ -1168,15 +1172,30 @@ private void maybeShowPopup(MouseEvent e) {\n                 JMenu i_trn = new JMenu(TOEMouseAdapter.INFANTRY_CARRIERS);\n                 JMenu a_trn = new JMenu(TOEMouseAdapter.ASF_CARRIERS);\n                 JMenu sc_trn = new JMenu(TOEMouseAdapter.SC_CARRIERS);\n+                JMenu singleUnitMenu = new JMenu(\"\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkyNDc2Mg=="}, "originalCommit": {"oid": "7078d3ee2f11bf7040423b11bc6cfd8c27d2ccf2"}, "originalPosition": 35}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM3MDMyNDQ4OnYy", "diffSide": "RIGHT", "path": "MekHQ/src/mekhq/gui/utilities/StaticChecks.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMlQwMTowMDozOVrOFtIfpQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMlQxNjo0ODoyOFrOFtL7Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjg2OTQxMw==", "bodyText": "This should exit early if units is empty.", "url": "https://github.com/MegaMek/mekhq/pull/1490#discussion_r382869413", "createdAt": "2020-02-22T01:00:39Z", "author": {"login": "sixlettervariables"}, "path": "MekHQ/src/mekhq/gui/utilities/StaticChecks.java", "diffHunk": "@@ -405,6 +405,42 @@ public static boolean doAllUnitsHaveC3Master(Vector<Unit> units) {\n         return true;\n \n     }\n+    \n+    /**\n+     * Used to test a selection of Units provided by the player and determine whether they all share a designated unitType. \n+     * @param units Vector of units that the player has selected\n+     * @return false if any unit in the passed-in Vector does not have the specified unit type\n+     */\n+    public static boolean areAllUnitsSameType(Vector<Unit> units, int unitType) {\n+        // For our purposes, a selection of tanks isn't the same unless they're all the same weight class\n+        // Set this based on the first unit in the selection\n+        double firstUnitWeight = units.get(0).getEntity() != null ? units.get(0).getEntity().getWeight() : 0;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eca41edaa680b2d68d7e61fb5ebb5d52f0085182"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjkyNTYyMg==", "bodyText": "Fixed.  I thought I only called this in the first place after checking that in TOEMouseAdapter, but that is only done in one of two locations.", "url": "https://github.com/MegaMek/mekhq/pull/1490#discussion_r382925622", "createdAt": "2020-02-22T16:48:28Z", "author": {"login": "mkerensky"}, "path": "MekHQ/src/mekhq/gui/utilities/StaticChecks.java", "diffHunk": "@@ -405,6 +405,42 @@ public static boolean doAllUnitsHaveC3Master(Vector<Unit> units) {\n         return true;\n \n     }\n+    \n+    /**\n+     * Used to test a selection of Units provided by the player and determine whether they all share a designated unitType. \n+     * @param units Vector of units that the player has selected\n+     * @return false if any unit in the passed-in Vector does not have the specified unit type\n+     */\n+    public static boolean areAllUnitsSameType(Vector<Unit> units, int unitType) {\n+        // For our purposes, a selection of tanks isn't the same unless they're all the same weight class\n+        // Set this based on the first unit in the selection\n+        double firstUnitWeight = units.get(0).getEntity() != null ? units.get(0).getEntity().getWeight() : 0;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjg2OTQxMw=="}, "originalCommit": {"oid": "eca41edaa680b2d68d7e61fb5ebb5d52f0085182"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM3MDMyNTExOnYy", "diffSide": "RIGHT", "path": "MekHQ/src/mekhq/gui/utilities/StaticChecks.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMlQwMTowMToxOFrOFtIf_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMlQxNzowMTozOVrOFtL-cg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjg2OTUwMg==", "bodyText": "Is the > 0 necessary? Won't they all have at least some weight (if you have some unit).", "url": "https://github.com/MegaMek/mekhq/pull/1490#discussion_r382869502", "createdAt": "2020-02-22T01:01:18Z", "author": {"login": "sixlettervariables"}, "path": "MekHQ/src/mekhq/gui/utilities/StaticChecks.java", "diffHunk": "@@ -405,6 +405,42 @@ public static boolean doAllUnitsHaveC3Master(Vector<Unit> units) {\n         return true;\n \n     }\n+    \n+    /**\n+     * Used to test a selection of Units provided by the player and determine whether they all share a designated unitType. \n+     * @param units Vector of units that the player has selected\n+     * @return false if any unit in the passed-in Vector does not have the specified unit type\n+     */\n+    public static boolean areAllUnitsSameType(Vector<Unit> units, int unitType) {\n+        // For our purposes, a selection of tanks isn't the same unless they're all the same weight class\n+        // Set this based on the first unit in the selection\n+        double firstUnitWeight = units.get(0).getEntity() != null ? units.get(0).getEntity().getWeight() : 0;\n+        boolean light = firstUnitWeight > 0 && firstUnitWeight <= 50;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eca41edaa680b2d68d7e61fb5ebb5d52f0085182"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjkyNjQ1MA==", "bodyText": "Seemed like a good idea, in case we managed to get a botched unit with negative or 0 weight", "url": "https://github.com/MegaMek/mekhq/pull/1490#discussion_r382926450", "createdAt": "2020-02-22T17:01:39Z", "author": {"login": "mkerensky"}, "path": "MekHQ/src/mekhq/gui/utilities/StaticChecks.java", "diffHunk": "@@ -405,6 +405,42 @@ public static boolean doAllUnitsHaveC3Master(Vector<Unit> units) {\n         return true;\n \n     }\n+    \n+    /**\n+     * Used to test a selection of Units provided by the player and determine whether they all share a designated unitType. \n+     * @param units Vector of units that the player has selected\n+     * @return false if any unit in the passed-in Vector does not have the specified unit type\n+     */\n+    public static boolean areAllUnitsSameType(Vector<Unit> units, int unitType) {\n+        // For our purposes, a selection of tanks isn't the same unless they're all the same weight class\n+        // Set this based on the first unit in the selection\n+        double firstUnitWeight = units.get(0).getEntity() != null ? units.get(0).getEntity().getWeight() : 0;\n+        boolean light = firstUnitWeight > 0 && firstUnitWeight <= 50;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjg2OTUwMg=="}, "originalCommit": {"oid": "eca41edaa680b2d68d7e61fb5ebb5d52f0085182"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM3MDMyNTgyOnYy", "diffSide": "RIGHT", "path": "MekHQ/src/mekhq/gui/utilities/StaticChecks.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMlQwMTowMTo1N1rOFtIgYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMlQxNjozMTo1NFrOFtL3Gw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjg2OTYwMg==", "bodyText": "Is there something > 200 for units?", "url": "https://github.com/MegaMek/mekhq/pull/1490#discussion_r382869602", "createdAt": "2020-02-22T01:01:57Z", "author": {"login": "sixlettervariables"}, "path": "MekHQ/src/mekhq/gui/utilities/StaticChecks.java", "diffHunk": "@@ -405,6 +405,42 @@ public static boolean doAllUnitsHaveC3Master(Vector<Unit> units) {\n         return true;\n \n     }\n+    \n+    /**\n+     * Used to test a selection of Units provided by the player and determine whether they all share a designated unitType. \n+     * @param units Vector of units that the player has selected\n+     * @return false if any unit in the passed-in Vector does not have the specified unit type\n+     */\n+    public static boolean areAllUnitsSameType(Vector<Unit> units, int unitType) {\n+        // For our purposes, a selection of tanks isn't the same unless they're all the same weight class\n+        // Set this based on the first unit in the selection\n+        double firstUnitWeight = units.get(0).getEntity() != null ? units.get(0).getEntity().getWeight() : 0;\n+        boolean light = firstUnitWeight > 0 && firstUnitWeight <= 50;\n+        boolean heavy = firstUnitWeight > 50 && firstUnitWeight <= 100;\n+        boolean superheavy = firstUnitWeight > 100 && firstUnitWeight <= 200;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eca41edaa680b2d68d7e61fb5ebb5d52f0085182"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjkyNDExMQ==", "bodyText": "There is not. I know you can construct such units, but the SH Vehicle bay only holds up to 200 tons - anything heavier is Cargo - so I think I'm ok here.", "url": "https://github.com/MegaMek/mekhq/pull/1490#discussion_r382924111", "createdAt": "2020-02-22T16:23:37Z", "author": {"login": "mkerensky"}, "path": "MekHQ/src/mekhq/gui/utilities/StaticChecks.java", "diffHunk": "@@ -405,6 +405,42 @@ public static boolean doAllUnitsHaveC3Master(Vector<Unit> units) {\n         return true;\n \n     }\n+    \n+    /**\n+     * Used to test a selection of Units provided by the player and determine whether they all share a designated unitType. \n+     * @param units Vector of units that the player has selected\n+     * @return false if any unit in the passed-in Vector does not have the specified unit type\n+     */\n+    public static boolean areAllUnitsSameType(Vector<Unit> units, int unitType) {\n+        // For our purposes, a selection of tanks isn't the same unless they're all the same weight class\n+        // Set this based on the first unit in the selection\n+        double firstUnitWeight = units.get(0).getEntity() != null ? units.get(0).getEntity().getWeight() : 0;\n+        boolean light = firstUnitWeight > 0 && firstUnitWeight <= 50;\n+        boolean heavy = firstUnitWeight > 50 && firstUnitWeight <= 100;\n+        boolean superheavy = firstUnitWeight > 100 && firstUnitWeight <= 200;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjg2OTYwMg=="}, "originalCommit": {"oid": "eca41edaa680b2d68d7e61fb5ebb5d52f0085182"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjkyNDI4Ng==", "bodyText": "There are a few examples, like the Koi and Ryu WiGE.", "url": "https://github.com/MegaMek/mekhq/pull/1490#discussion_r382924286", "createdAt": "2020-02-22T16:26:51Z", "author": {"login": "Windchild292"}, "path": "MekHQ/src/mekhq/gui/utilities/StaticChecks.java", "diffHunk": "@@ -405,6 +405,42 @@ public static boolean doAllUnitsHaveC3Master(Vector<Unit> units) {\n         return true;\n \n     }\n+    \n+    /**\n+     * Used to test a selection of Units provided by the player and determine whether they all share a designated unitType. \n+     * @param units Vector of units that the player has selected\n+     * @return false if any unit in the passed-in Vector does not have the specified unit type\n+     */\n+    public static boolean areAllUnitsSameType(Vector<Unit> units, int unitType) {\n+        // For our purposes, a selection of tanks isn't the same unless they're all the same weight class\n+        // Set this based on the first unit in the selection\n+        double firstUnitWeight = units.get(0).getEntity() != null ? units.get(0).getEntity().getWeight() : 0;\n+        boolean light = firstUnitWeight > 0 && firstUnitWeight <= 50;\n+        boolean heavy = firstUnitWeight > 50 && firstUnitWeight <= 100;\n+        boolean superheavy = firstUnitWeight > 100 && firstUnitWeight <= 200;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjg2OTYwMg=="}, "originalCommit": {"oid": "eca41edaa680b2d68d7e61fb5ebb5d52f0085182"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjkyNDU3MQ==", "bodyText": "But mkerensky is correct that vehicles over 200 tons cannot be transported in a bay.", "url": "https://github.com/MegaMek/mekhq/pull/1490#discussion_r382924571", "createdAt": "2020-02-22T16:31:54Z", "author": {"login": "neoancient"}, "path": "MekHQ/src/mekhq/gui/utilities/StaticChecks.java", "diffHunk": "@@ -405,6 +405,42 @@ public static boolean doAllUnitsHaveC3Master(Vector<Unit> units) {\n         return true;\n \n     }\n+    \n+    /**\n+     * Used to test a selection of Units provided by the player and determine whether they all share a designated unitType. \n+     * @param units Vector of units that the player has selected\n+     * @return false if any unit in the passed-in Vector does not have the specified unit type\n+     */\n+    public static boolean areAllUnitsSameType(Vector<Unit> units, int unitType) {\n+        // For our purposes, a selection of tanks isn't the same unless they're all the same weight class\n+        // Set this based on the first unit in the selection\n+        double firstUnitWeight = units.get(0).getEntity() != null ? units.get(0).getEntity().getWeight() : 0;\n+        boolean light = firstUnitWeight > 0 && firstUnitWeight <= 50;\n+        boolean heavy = firstUnitWeight > 50 && firstUnitWeight <= 100;\n+        boolean superheavy = firstUnitWeight > 100 && firstUnitWeight <= 200;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjg2OTYwMg=="}, "originalCommit": {"oid": "eca41edaa680b2d68d7e61fb5ebb5d52f0085182"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM3MDc3ODI2OnYy", "diffSide": "RIGHT", "path": "MekHQ/src/mekhq/gui/adapter/TOEMouseAdapter.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMlQxNzoxMjowNlrOFtMA5g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMlQxNzoxMjowNlrOFtMA5g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjkyNzA3OA==", "bodyText": "This is superfluous with the for loop below. It'll do nothing if units is empty.", "url": "https://github.com/MegaMek/mekhq/pull/1490#discussion_r382927078", "createdAt": "2020-02-22T17:12:06Z", "author": {"login": "sixlettervariables"}, "path": "MekHQ/src/mekhq/gui/adapter/TOEMouseAdapter.java", "diffHunk": "@@ -280,22 +281,27 @@ public void actionPerformed(ActionEvent action) {\n                             if (oldShip != null) {\n                                 oldShip.unloadFromTransportShip(u);\n                                 MekHQ.triggerEvent(new UnitChangedEvent(oldShip));\n+                                gui.getTOETab().refreshForceView();\n                             }\n                         }\n                     }\n                     //now load the units\n                     ship.loadTransportShip(units);\n                     MekHQ.triggerEvent(new UnitChangedEvent(ship));\n+                    gui.getTOETab().refreshForceView();\n                 }\n             }\n         }\n         if (command.contains(UNASSIGN_FROM_SHIP)) {\n-            for (Unit u : units) {\n-                for (UUID oldShipId : u.getTransportShipId().keySet()) {\n-                    Unit oldShip = gui.getCampaign().getUnit(oldShipId);\n-                    if (oldShip != null) {\n-                        oldShip.unloadFromTransportShip(u);\n-                        MekHQ.triggerEvent(new UnitChangedEvent(oldShip));\n+            if (!units.isEmpty()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3578abed33c886f0deefa48212cbe021106f0b3a"}, "originalPosition": 39}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1910, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}