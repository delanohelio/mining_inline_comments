{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIwOTYyODE2", "number": 1758, "title": "Planet acquisition fixes", "bodyText": "I noticed a few issues with planetary acquisitions that I wanted to clean up for the stable if possible, especially now that planetary acquisitions should work nicely with the new planetary system data.\nI also see that there was an issue with infinite loops in #1447  that was apparently fixed with #1451. Is that fully resolved or are there still issues with planetary acquisitions?", "createdAt": "2020-05-20T19:02:43Z", "url": "https://github.com/MegaMek/mekhq/pull/1758", "merged": true, "mergeCommit": {"oid": "1893c26a9d5eaeda85d79c837291b9d480841141"}, "closed": true, "closedAt": "2020-05-21T14:26:34Z", "author": {"login": "AaronGullickson"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcjLHOqgH2gAyNDIwOTYyODE2OjZiNGY3MTM1N2NjYmI4MDllZWE3NDEyYTA3ZTA3NTlkMDE2Yjc4MzM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcjQNFKAFqTQxNTczNzYyNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6b4f71357ccbb809eea7412a07e0759d016b7833", "author": {"user": {"login": "AaronGullickson", "name": "Aaron Gullickson"}}, "url": "https://github.com/MegaMek/mekhq/commit/6b4f71357ccbb809eea7412a07e0759d016b7833", "committedDate": "2020-05-20T15:50:17Z", "message": "findContactForAcquisition returning false if no limit on number of acquisitions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "192dd80a65ffc77f69c10a1a789af0f30481410f", "author": {"user": {"login": "AaronGullickson", "name": "Aaron Gullickson"}}, "url": "https://github.com/MegaMek/mekhq/commit/192dd80a65ffc77f69c10a1a789af0f30481410f", "committedDate": "2020-05-20T18:00:11Z", "message": "removed unnecessary reset of waiting time for parts with IAcquisitionWork interface. This is already dealt withi in Campaign.goShopping methods"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1NjMzMjA5", "url": "https://github.com/MegaMek/mekhq/pull/1758#pullrequestreview-415633209", "createdAt": "2020-05-20T19:04:17Z", "commit": {"oid": "192dd80a65ffc77f69c10a1a789af0f30481410f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxOTowNDoxN1rOGYZ8tw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxOTowNDoxN1rOGYZ8tw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODI0NDE1MQ==", "bodyText": "This was causing the method to return false when the user left max acquisitions at zero which is supposed to be unlimited. Using the canAcquireParts method instead fixes this because it already checks that properly.", "url": "https://github.com/MegaMek/mekhq/pull/1758#discussion_r428244151", "createdAt": "2020-05-20T19:04:17Z", "author": {"login": "AaronGullickson"}, "path": "MekHQ/src/mekhq/campaign/Campaign.java", "diffHunk": "@@ -2729,7 +2729,7 @@ public boolean canPayFor(IAcquisitionWork acquisition) {\n      * @return true if your target roll succeeded.\n      */\n     public boolean findContactForAcquisition(IAcquisitionWork acquisition, Person person, PlanetarySystem system) {\n-        if (person.getAcquisitions() >= getCampaignOptions().getMaxAcquisitions()) {\n+        if (null == person || !canAcquireParts(person)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "192dd80a65ffc77f69c10a1a789af0f30481410f"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1NjM0NTg1", "url": "https://github.com/MegaMek/mekhq/pull/1758#pullrequestreview-415634585", "createdAt": "2020-05-20T19:06:15Z", "commit": {"oid": "192dd80a65ffc77f69c10a1a789af0f30481410f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxOTowNjoxNVrOGYaBOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxOTowNjoxNVrOGYaBOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODI0NTMwNw==", "bodyText": "The AmmoStorage, Armor, and Refit parts objects all add resetDaystoWait() to the failToFind method. However, this is redundant, because each of the Campaign.goShopping methods already does this reset at the proper place for all IAcquisitionWork. In this case, it was causing some issues with planetary acquisition because we don't want to reset that until we have failed to find stuff on all the planets on our list.", "url": "https://github.com/MegaMek/mekhq/pull/1758#discussion_r428245307", "createdAt": "2020-05-20T19:06:15Z", "author": {"login": "AaronGullickson"}, "path": "MekHQ/src/mekhq/campaign/parts/AmmoStorage.java", "diffHunk": "@@ -283,7 +283,6 @@ public Object getNewEquipment() {\n \n     @Override\n     public String failToFind() {\n-        resetDaysToWait();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "192dd80a65ffc77f69c10a1a789af0f30481410f"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1NjQwMzYw", "url": "https://github.com/MegaMek/mekhq/pull/1758#pullrequestreview-415640360", "createdAt": "2020-05-20T19:14:24Z", "commit": {"oid": "192dd80a65ffc77f69c10a1a789af0f30481410f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "52516c271d38f394cdc34c7c720d95af1dabc2aa", "author": {"user": {"login": "AaronGullickson", "name": "Aaron Gullickson"}}, "url": "https://github.com/MegaMek/mekhq/commit/52516c271d38f394cdc34c7c720d95af1dabc2aa", "committedDate": "2020-05-20T21:42:19Z", "message": "removed unnecessary check"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1NzM3NjI1", "url": "https://github.com/MegaMek/mekhq/pull/1758#pullrequestreview-415737625", "createdAt": "2020-05-20T21:46:12Z", "commit": {"oid": "52516c271d38f394cdc34c7c720d95af1dabc2aa"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4261, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}