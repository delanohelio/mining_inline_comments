{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM4ODk3NzYx", "number": 2282, "title": "Issue #2141: Subcontracts don't reference parent contract after campaign load", "bodyText": "AtBContract does not serialize its parentContract member, causing subcontracts to be made into full contracts after a save-load cycle. This resolves the issue by using a dummy reference type during deserialization and then restoring the reference after the missions are loaded from the campaign file, fixing #2141.", "createdAt": "2020-12-13T07:46:45Z", "url": "https://github.com/MegaMek/mekhq/pull/2282", "merged": true, "mergeCommit": {"oid": "75dbc2689083049eda9ee757bb8202e14f5819df"}, "closed": true, "closedAt": "2020-12-14T23:14:02Z", "author": {"login": "sixlettervariables"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdlrjSvAH2gAyNTM4ODk3NzYxOmY1ZjI5OGM0MWE2MDJiM2U2MGM0ZjdhNmY5N2NiZTFlYzhjOTY3ZTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdl0uFbAFqTU1MDk0MjI3Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f5f298c41a602b3e60c4f7a6f97cbe1ec8c967e2", "author": {"user": {"login": "sixlettervariables", "name": "Christopher Watford"}}, "url": "https://github.com/MegaMek/mekhq/commit/f5f298c41a602b3e60c4f7a6f97cbe1ec8c967e2", "committedDate": "2020-12-13T06:56:54Z", "message": "Ensure sub-contracts reference their parent contract, fixes #2141"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1efa86189c0807e17f8ba945eab186b6b05a3350", "author": {"user": {"login": "sixlettervariables", "name": "Christopher Watford"}}, "url": "https://github.com/MegaMek/mekhq/commit/1efa86189c0807e17f8ba945eab186b6b05a3350", "committedDate": "2020-12-13T07:38:24Z", "message": "Add tests for #2141"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c88ca2c1c698dfe730b493048b630ef6d20ce973", "author": {"user": {"login": "sixlettervariables", "name": "Christopher Watford"}}, "url": "https://github.com/MegaMek/mekhq/commit/c88ca2c1c698dfe730b493048b630ef6d20ce973", "committedDate": "2020-12-13T07:45:36Z", "message": "Restore AtBContract references in the ContractMarket #2141"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwODkzODk1", "url": "https://github.com/MegaMek/mekhq/pull/2282#pullrequestreview-550893895", "createdAt": "2020-12-13T07:49:08Z", "commit": {"oid": "c88ca2c1c698dfe730b493048b630ef6d20ce973"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xM1QwNzo0OTowOFrOIExGIw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xM1QwNzo0OTowOFrOIExGIw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTg2OTYwMw==", "bodyText": "Use the MekHqXmlUtil.writeSimpleXmlTag instead, it handled UUID with a null check (And doesn't write otherwise)", "url": "https://github.com/MegaMek/mekhq/pull/2282#discussion_r541869603", "createdAt": "2020-12-13T07:49:08Z", "author": {"login": "Windchild292"}, "path": "MekHQ/src/mekhq/campaign/mission/AtBContract.java", "diffHunk": "@@ -1193,6 +1193,12 @@ protected void writeToXmlBegin(PrintWriter pw1, int indent) {\n                 +\"<nextWeekBattleTypeMod>\"\n                 +nextWeekBattleTypeMod\n                 +\"</nextWeekBattleTypeMod>\");\n+        if (parentContract != null) {\n+            pw1.println(MekHqXmlUtil.indentStr(indent+1)\n+                    + \"<parentContractId>\"\n+                    + parentContract.getId()\n+                    + \"</parentContractId>\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c88ca2c1c698dfe730b493048b630ef6d20ce973"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwODk0MDUz", "url": "https://github.com/MegaMek/mekhq/pull/2282#pullrequestreview-550894053", "createdAt": "2020-12-13T07:51:26Z", "commit": {"oid": "c88ca2c1c698dfe730b493048b630ef6d20ce973"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "48125fe0b4885563f2b517104509fa55db156587", "author": {"user": {"login": "sixlettervariables", "name": "Christopher Watford"}}, "url": "https://github.com/MegaMek/mekhq/commit/48125fe0b4885563f2b517104509fa55db156587", "committedDate": "2020-12-13T08:07:48Z", "message": "Address PR feedback and fix LGTM nit"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwOTQyMjcy", "url": "https://github.com/MegaMek/mekhq/pull/2282#pullrequestreview-550942272", "createdAt": "2020-12-13T17:37:50Z", "commit": {"oid": "48125fe0b4885563f2b517104509fa55db156587"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3948, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}