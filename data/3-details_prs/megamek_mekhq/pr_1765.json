{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIyNDI3OTgz", "number": 1765, "title": "1569/1570 Phase 1: Genealogy", "bodyText": "This is the Genealogy rework, which removes Ancestors and replaces it with proper Genealogical tracking for family units (parents, siblings, children, spouse, former spouses).\nThis decreasing the size of Person by roughly 500 lines of code while making it easier to modify genealogical connections for future development.\nPlease note that as part of Phase 1, this adds some code that is not used currently (mostly relating to family relationship types and connections). This code will be used or removed before the two linked stories are merged.\nHere are the two campaign files I primarily used while testing, which have significant familial groups:\nTestCampaigns.zip", "createdAt": "2020-05-24T15:18:43Z", "url": "https://github.com/MegaMek/mekhq/pull/1765", "merged": true, "mergeCommit": {"oid": "13d597734971d84a70b141961e07e0b6be3363d4"}, "closed": true, "closedAt": "2020-07-31T15:01:10Z", "author": {"login": "Windchild292"}, "timelineItems": {"totalCount": 46, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcV_pZwAH2gAyNDIyNDI3OTgzOjE5ZDQ1NzVlZjA5ZjMyYzczM2YzMDNiODgyNDk1ZGFiNWYwODRiNWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc53_Z-AFqTQ1ODA2NDMzMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "19d4575ef09f32c733f303b882495dab5f084b5d", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/19d4575ef09f32c733f303b882495dab5f084b5d", "committedDate": "2020-04-09T17:07:44Z", "message": "Fixing localization name for left leg"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9aa8107f7467691c9dc3cea05a59d312c518c3cf", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/9aa8107f7467691c9dc3cea05a59d312c518c3cf", "committedDate": "2020-04-09T17:08:16Z", "message": "Fixing other localization"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac1cfa1f795bfec514b19dd4f4cecded1968721d", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/ac1cfa1f795bfec514b19dd4f4cecded1968721d", "committedDate": "2020-04-09T17:09:05Z", "message": "Creating a FamilialRelationshipTypes Enum"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a032deb5752571572606226244450b5f43b6be6f", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/a032deb5752571572606226244450b5f43b6be6f", "committedDate": "2020-04-09T17:19:39Z", "message": "Renaming FamilyRelationshipTypes to FamilyRelationshipType"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c7fdc9943fffba42097267c580699d1b1f86d308", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/c7fdc9943fffba42097267c580699d1b1f86d308", "committedDate": "2020-04-09T19:24:18Z", "message": "Adding the Partner relationship type"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a4b537297e0af5a086673bb193890a8bfd47645", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/3a4b537297e0af5a086673bb193890a8bfd47645", "committedDate": "2020-04-09T19:40:27Z", "message": "Creating FamilialConnectionType enum"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2fabe95766f4740631a83f1a2de87cf756f822e1", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/2fabe95766f4740631a83f1a2de87cf756f822e1", "committedDate": "2020-04-10T14:15:09Z", "message": "Adding support for late spouse prefix, widow, and divorced"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3af447989b8065bb61911215a0991180258c5516", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/3af447989b8065bb61911215a0991180258c5516", "committedDate": "2020-04-10T14:15:36Z", "message": "Adding a method to return the children of a person"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "508ab58ff1ab324ac4dd91da4244288c36da81ac", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/508ab58ff1ab324ac4dd91da4244288c36da81ac", "committedDate": "2020-04-11T00:11:55Z", "message": "Merge remote-tracking branch 'upstream/master' into dev_Windchild_FamilyTree"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "537fff64be7418bab2d03dbbd52e5e9b26366375", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/537fff64be7418bab2d03dbbd52e5e9b26366375", "committedDate": "2020-04-11T00:57:34Z", "message": "Adding Great-Grandaunt and Great-Granduncle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4df5ec6f81bf578d503e599d5c9f19125b8ac077", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/4df5ec6f81bf578d503e599d5c9f19125b8ac077", "committedDate": "2020-04-11T01:49:09Z", "message": "Moving campaign to have babies generated in Person"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b2680beee81001f3956e1a7d6b788a92b265cb3", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/7b2680beee81001f3956e1a7d6b788a92b265cb3", "committedDate": "2020-04-11T01:50:15Z", "message": "Adding TODO to fix the processNewDayPersonnel method in the future"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "50181872cf047fce70c22dffedba051a2f89a700", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/50181872cf047fce70c22dffedba051a2f89a700", "committedDate": "2020-04-12T13:19:58Z", "message": "starting to tear out ancestors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1c03fdf377294a28123d160e760c364700762c7", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/d1c03fdf377294a28123d160e760c364700762c7", "committedDate": "2020-04-15T12:41:51Z", "message": "Merge remote-tracking branch 'upstream/master' into dev_Windchild_FamilyTree"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "21dc859970db6762ac41871bdf7fbd9d0c4b8f58", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/21dc859970db6762ac41871bdf7fbd9d0c4b8f58", "committedDate": "2020-04-15T17:13:32Z", "message": "Adding half-siblings and a key list for any sibling enum values"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5271110632304a46a8394859cd61787cd2d2355d", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/5271110632304a46a8394859cd61787cd2d2355d", "committedDate": "2020-04-15T19:59:08Z", "message": "Tearing out ancestors - only migration left"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c3aa94ee5956fc30cc58e017cbfb6fb9fe31f514", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/c3aa94ee5956fc30cc58e017cbfb6fb9fe31f514", "committedDate": "2020-04-20T14:05:46Z", "message": "Merge remote-tracking branch 'upstream/master' into dev_Windchild_FamilyTree"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "696658e759ee73ead088747572af69b55f77b219", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/696658e759ee73ead088747572af69b55f77b219", "committedDate": "2020-04-20T14:08:43Z", "message": "Removing unused import"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e0d59bea0e1f54f939dcf5b1a552df8064b8c42", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/8e0d59bea0e1f54f939dcf5b1a552df8064b8c42", "committedDate": "2020-05-08T14:27:14Z", "message": "Fixing merge conflicts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b3b9e7c83a2e0aad9a7d955014c44103fd8aaaa", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/6b3b9e7c83a2e0aad9a7d955014c44103fd8aaaa", "committedDate": "2020-05-08T18:28:21Z", "message": "Fixing merge conflicts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "46ade18b381d68a4a2eea9d26a4e6ac9a3772c86", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/46ade18b381d68a4a2eea9d26a4e6ac9a3772c86", "committedDate": "2020-05-08T18:37:29Z", "message": "Removing TeamId as unused"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ff72209b797f911da2ae3ffe603491ed7f4cd878", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/ff72209b797f911da2ae3ffe603491ed7f4cd878", "committedDate": "2020-05-08T19:57:57Z", "message": "Moving any remaning ancestors usage to be based on an inline migration class in the campaign xml parser"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f18416f280b00112514f547775b4aff01dfb9f8e", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/f18416f280b00112514f547775b4aff01dfb9f8e", "committedDate": "2020-05-08T20:14:22Z", "message": "Moving all traces of Ancestors except one call to CampaignXmlParser"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "69a5782d5c79ef7890ce6514550d80790c0b910c", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/69a5782d5c79ef7890ce6514550d80790c0b910c", "committedDate": "2020-05-08T21:56:41Z", "message": "adding initial migration for ancestry"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b954316280539f2a9d26f413dba60d864009d54a", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/b954316280539f2a9d26f413dba60d864009d54a", "committedDate": "2020-05-08T22:02:06Z", "message": "Finishing family migration, pre-testing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2defe8c808b282b168d93550de3ef4e8f9d30a4f", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/2defe8c808b282b168d93550de3ef4e8f9d30a4f", "committedDate": "2020-05-09T12:41:41Z", "message": "Removing unused import"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7cdc538823f420f6f199400daa1e14d8ce497639", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/7cdc538823f420f6f199400daa1e14d8ce497639", "committedDate": "2020-05-24T14:27:50Z", "message": "Merge remote-tracking branch 'upstream/master' into dev_Windchild_FamilyTree"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "25ee0bd2012966eeffd5e9107f66177eadae8d33", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/25ee0bd2012966eeffd5e9107f66177eadae8d33", "committedDate": "2020-05-24T14:36:46Z", "message": "Fixing genealogy bugs, part 1"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "28fcf5c907d002a24654564ef93189e1839ad59c", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/28fcf5c907d002a24654564ef93189e1839ad59c", "committedDate": "2020-05-24T15:25:14Z", "message": "Removing two unused imports"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3MzY5OTEy", "url": "https://github.com/MegaMek/mekhq/pull/1765#pullrequestreview-417369912", "createdAt": "2020-05-24T15:47:49Z", "commit": {"oid": "28fcf5c907d002a24654564ef93189e1839ad59c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQxNTo0Nzo0OVrOGZvu6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQxNTo0Nzo0OVrOGZvu6A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY0OTY0MA==", "bodyText": "I think this is ripe for unit tests, along with removing relations to make sure the tree is pruned.", "url": "https://github.com/MegaMek/mekhq/pull/1765#discussion_r429649640", "createdAt": "2020-05-24T15:47:49Z", "author": {"login": "sixlettervariables"}, "path": "MekHQ/src/mekhq/campaign/personnel/familyTree/Genealogy.java", "diffHunk": "@@ -0,0 +1,504 @@\n+/*\n+ * Copyright (c) 2020 - The MegaMek Team. All Rights Reserved.\n+ *\n+ * This file is part of MekHQ.\n+ *\n+ * MekHQ is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * MekHQ is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with MekHQ.  If not, see <http://www.gnu.org/licenses/>.\n+ */\n+package mekhq.campaign.personnel.familyTree;\n+\n+import megamek.common.Crew;\n+import megamek.common.annotations.Nullable;\n+import mekhq.MekHQ;\n+import mekhq.MekHqXmlSerializable;\n+import mekhq.MekHqXmlUtil;\n+import mekhq.campaign.Campaign;\n+import mekhq.campaign.personnel.FormerSpouse;\n+import mekhq.campaign.personnel.Person;\n+import mekhq.campaign.personnel.enums.FamilialRelationshipType;\n+import org.w3c.dom.Node;\n+import org.w3c.dom.NodeList;\n+\n+import java.io.PrintWriter;\n+import java.io.Serializable;\n+import java.util.*;\n+\n+public class Genealogy implements Serializable, MekHqXmlSerializable {\n+    //region Variables\n+    private static final long serialVersionUID = -6350146649504329173L;\n+    private UUID spouse;\n+    private List<FormerSpouse> formerSpouses;\n+    private Map<FamilialRelationshipType, List<UUID>> family;\n+    //endregion Variables\n+\n+    //region Constructors\n+    public Genealogy() {\n+        this.spouse = null;\n+        this.formerSpouses = new ArrayList<>();\n+        this.family = new HashMap<>();\n+    }\n+    //endregion Constructors\n+\n+    //region Getters/Setters\n+    /**\n+     * @param campaign the campaign the person is in\n+     * @return the person's spouse, or null if they don't have a spouse\n+     */\n+    @Nullable\n+    public Person getSpouse(Campaign campaign) {\n+        return campaign.getPerson(getSpouseId());\n+    }\n+\n+    /**\n+     * @return the current person's spouse's id\n+     */\n+    @Nullable\n+    public UUID getSpouseId() {\n+        return spouse;\n+    }\n+\n+    /**\n+     * @param spouse the new spouse id for the current person\n+     */\n+    public void setSpouse(@Nullable UUID spouse) {\n+        this.spouse = spouse;\n+    }\n+\n+    /**\n+     * @return a list of FormerSpouse objects for all the former spouses of the current person\n+     */\n+    public List<FormerSpouse> getFormerSpouses() {\n+        return formerSpouses;\n+    }\n+\n+    /**\n+     * @param formerSpouse a former spouse to add the the current person's list\n+     */\n+    public void addFormerSpouse(FormerSpouse formerSpouse) {\n+        getFormerSpouses().add(formerSpouse);\n+    }\n+\n+    /**\n+     * This is implemented for future use, as it will be required for the family tree implementation\n+     * @param formerSpouse the former spouse to remove from the current person's list\n+     */\n+    public void removeFormerSpouse(FormerSpouse formerSpouse) {\n+        getFormerSpouses().remove(formerSpouse);\n+    }\n+\n+    /**\n+     * @return the family map for this person\n+     */\n+    public Map<FamilialRelationshipType, List<UUID>> getFamily() {\n+        return family;\n+    }\n+\n+    /**\n+     * This is used to add a new family member\n+     * @param relationshipType the relationship type between the two people\n+     * @param id the id of the person to add\n+     */\n+    public void addFamilyMember(FamilialRelationshipType relationshipType, UUID id) {\n+        if (id != null) {\n+            getFamily().putIfAbsent(relationshipType, new ArrayList<>());\n+            getFamily().get(relationshipType).add(id);\n+        }\n+    }\n+\n+    /**\n+     * This is implemented for future use, as it will be required for the family tree implementation\n+     * @param relationshipType the FamilialRelationshipType of the person to remove\n+     * @param id the id of the person to remove\n+     */\n+    public void removeFamilyMember(FamilialRelationshipType relationshipType, UUID id) {\n+        if (getFamily().get(relationshipType) == null) {\n+            MekHQ.getLogger().error(getClass(), \"removeFamilyMember\",\n+                    \"Could not remove unknown family member of relationship \"\n+                            + relationshipType.name() + \" and UUID \" + id.toString() + \".\");\n+            return;\n+        }\n+\n+        List<UUID> familyTypeMembers = getFamily().get(relationshipType);\n+        familyTypeMembers.remove(id);\n+        if (familyTypeMembers.isEmpty()) {\n+            getFamily().remove(relationshipType);\n+        }\n+    }\n+    //endregion Getters/Setters\n+\n+    //region Boolean Checks\n+    /**\n+     * @return true if the person has either a spouse, any children, or specified parents.\n+     *          These are required for any extended family to exist.\n+     */\n+    public boolean hasAnyFamily() {\n+        return hasChildren() || hasSpouse() || hasParents();\n+    }\n+\n+    /**\n+     * @return true if the person has a spouse, false otherwise\n+     */\n+    public boolean hasSpouse() {\n+        return (getSpouseId() != null);\n+    }\n+\n+    /**\n+     * @return true if the person has a former spouse, false otherwise\n+     */\n+    public boolean hasFormerSpouse() {\n+        return !getFormerSpouses().isEmpty();\n+    }\n+\n+    /**\n+     * @return true if the person has at least one kid, false otherwise\n+     */\n+    public boolean hasChildren() {\n+        return (getFamily().get(FamilialRelationshipType.CHILD) != null);\n+    }\n+\n+    /**\n+     * @return true if the Person has any parents, otherwise false\n+     */\n+    public boolean hasParents() {\n+        return (getFamily().get(FamilialRelationshipType.PARENT) != null);\n+    }\n+\n+    // Recursive Search Format to determine mutual ancestry\n+    public boolean checkMutualAncestors(Person person, Campaign campaign) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28fcf5c907d002a24654564ef93189e1839ad59c"}, "originalPosition": 178}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxMzY5NDEz", "url": "https://github.com/MegaMek/mekhq/pull/1765#pullrequestreview-421369413", "createdAt": "2020-05-30T02:13:02Z", "commit": {"oid": "28fcf5c907d002a24654564ef93189e1839ad59c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMFQwMjoxMzowMlrOGcwFGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMFQwMjoxODoxN1rOGcwGgg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjgwMTA1MA==", "bodyText": "Let's put a comment on this public method.", "url": "https://github.com/MegaMek/mekhq/pull/1765#discussion_r432801050", "createdAt": "2020-05-30T02:13:02Z", "author": {"login": "NickAragua"}, "path": "MekHQ/src/mekhq/campaign/io/CampaignXmlParser.java", "diffHunk": "@@ -1901,4 +1861,72 @@ private static void updatePlanetaryEventsFromXML(Node wn) {\n             }\n         }\n     }\n+\n+\n+    //region Migration Methods\n+    //region Ancestry Migration\n+    private static Map<UUID, List<Person>> ancestryMigrationMap = new HashMap<>();\n+\n+    public static void addToAncestryMigrationMap(UUID ancestorsId, Person person) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28fcf5c907d002a24654564ef93189e1839ad59c"}, "originalPosition": 95}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjgwMTMzMw==", "bodyText": "Seems like some comments would be helpful for this enum in general.", "url": "https://github.com/MegaMek/mekhq/pull/1765#discussion_r432801333", "createdAt": "2020-05-30T02:17:14Z", "author": {"login": "NickAragua"}, "path": "MekHQ/src/mekhq/campaign/personnel/enums/FamilialRelationshipType.java", "diffHunk": "@@ -0,0 +1,172 @@\n+/*\n+ * Copyright (c) 2020 - The MegaMek Team. All rights reserved.\n+ *\n+ * This file is part of MekHQ.\n+ *\n+ * MekHQ is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * MekHQ is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with MekHQ.  If not, see <http://www.gnu.org/licenses/>.\n+ */\n+package mekhq.campaign.personnel.enums;\n+\n+import megamek.common.Crew;\n+import megamek.common.util.EncodeControl;\n+import mekhq.MekHQ;\n+import mekhq.campaign.personnel.Person;\n+\n+import java.util.ResourceBundle;\n+\n+public enum FamilialRelationshipType {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28fcf5c907d002a24654564ef93189e1839ad59c"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjgwMTQxMA==", "bodyText": "And while you're at it, let's put some comments on these public methods, as I don't really have any idea what they do just looking at the name.", "url": "https://github.com/MegaMek/mekhq/pull/1765#discussion_r432801410", "createdAt": "2020-05-30T02:18:17Z", "author": {"login": "NickAragua"}, "path": "MekHQ/src/mekhq/campaign/personnel/familyTree/Genealogy.java", "diffHunk": "@@ -0,0 +1,504 @@\n+/*\n+ * Copyright (c) 2020 - The MegaMek Team. All Rights Reserved.\n+ *\n+ * This file is part of MekHQ.\n+ *\n+ * MekHQ is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * MekHQ is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with MekHQ.  If not, see <http://www.gnu.org/licenses/>.\n+ */\n+package mekhq.campaign.personnel.familyTree;\n+\n+import megamek.common.Crew;\n+import megamek.common.annotations.Nullable;\n+import mekhq.MekHQ;\n+import mekhq.MekHqXmlSerializable;\n+import mekhq.MekHqXmlUtil;\n+import mekhq.campaign.Campaign;\n+import mekhq.campaign.personnel.FormerSpouse;\n+import mekhq.campaign.personnel.Person;\n+import mekhq.campaign.personnel.enums.FamilialRelationshipType;\n+import org.w3c.dom.Node;\n+import org.w3c.dom.NodeList;\n+\n+import java.io.PrintWriter;\n+import java.io.Serializable;\n+import java.util.*;\n+\n+public class Genealogy implements Serializable, MekHqXmlSerializable {\n+    //region Variables\n+    private static final long serialVersionUID = -6350146649504329173L;\n+    private UUID spouse;\n+    private List<FormerSpouse> formerSpouses;\n+    private Map<FamilialRelationshipType, List<UUID>> family;\n+    //endregion Variables\n+\n+    //region Constructors\n+    public Genealogy() {\n+        this.spouse = null;\n+        this.formerSpouses = new ArrayList<>();\n+        this.family = new HashMap<>();\n+    }\n+    //endregion Constructors\n+\n+    //region Getters/Setters\n+    /**\n+     * @param campaign the campaign the person is in\n+     * @return the person's spouse, or null if they don't have a spouse\n+     */\n+    @Nullable\n+    public Person getSpouse(Campaign campaign) {\n+        return campaign.getPerson(getSpouseId());\n+    }\n+\n+    /**\n+     * @return the current person's spouse's id\n+     */\n+    @Nullable\n+    public UUID getSpouseId() {\n+        return spouse;\n+    }\n+\n+    /**\n+     * @param spouse the new spouse id for the current person\n+     */\n+    public void setSpouse(@Nullable UUID spouse) {\n+        this.spouse = spouse;\n+    }\n+\n+    /**\n+     * @return a list of FormerSpouse objects for all the former spouses of the current person\n+     */\n+    public List<FormerSpouse> getFormerSpouses() {\n+        return formerSpouses;\n+    }\n+\n+    /**\n+     * @param formerSpouse a former spouse to add the the current person's list\n+     */\n+    public void addFormerSpouse(FormerSpouse formerSpouse) {\n+        getFormerSpouses().add(formerSpouse);\n+    }\n+\n+    /**\n+     * This is implemented for future use, as it will be required for the family tree implementation\n+     * @param formerSpouse the former spouse to remove from the current person's list\n+     */\n+    public void removeFormerSpouse(FormerSpouse formerSpouse) {\n+        getFormerSpouses().remove(formerSpouse);\n+    }\n+\n+    /**\n+     * @return the family map for this person\n+     */\n+    public Map<FamilialRelationshipType, List<UUID>> getFamily() {\n+        return family;\n+    }\n+\n+    /**\n+     * This is used to add a new family member\n+     * @param relationshipType the relationship type between the two people\n+     * @param id the id of the person to add\n+     */\n+    public void addFamilyMember(FamilialRelationshipType relationshipType, UUID id) {\n+        if (id != null) {\n+            getFamily().putIfAbsent(relationshipType, new ArrayList<>());\n+            getFamily().get(relationshipType).add(id);\n+        }\n+    }\n+\n+    /**\n+     * This is implemented for future use, as it will be required for the family tree implementation\n+     * @param relationshipType the FamilialRelationshipType of the person to remove\n+     * @param id the id of the person to remove\n+     */\n+    public void removeFamilyMember(FamilialRelationshipType relationshipType, UUID id) {\n+        if (getFamily().get(relationshipType) == null) {\n+            MekHQ.getLogger().error(getClass(), \"removeFamilyMember\",\n+                    \"Could not remove unknown family member of relationship \"\n+                            + relationshipType.name() + \" and UUID \" + id.toString() + \".\");\n+            return;\n+        }\n+\n+        List<UUID> familyTypeMembers = getFamily().get(relationshipType);\n+        familyTypeMembers.remove(id);\n+        if (familyTypeMembers.isEmpty()) {\n+            getFamily().remove(relationshipType);\n+        }\n+    }\n+    //endregion Getters/Setters\n+\n+    //region Boolean Checks\n+    /**\n+     * @return true if the person has either a spouse, any children, or specified parents.\n+     *          These are required for any extended family to exist.\n+     */\n+    public boolean hasAnyFamily() {\n+        return hasChildren() || hasSpouse() || hasParents();\n+    }\n+\n+    /**\n+     * @return true if the person has a spouse, false otherwise\n+     */\n+    public boolean hasSpouse() {\n+        return (getSpouseId() != null);\n+    }\n+\n+    /**\n+     * @return true if the person has a former spouse, false otherwise\n+     */\n+    public boolean hasFormerSpouse() {\n+        return !getFormerSpouses().isEmpty();\n+    }\n+\n+    /**\n+     * @return true if the person has at least one kid, false otherwise\n+     */\n+    public boolean hasChildren() {\n+        return (getFamily().get(FamilialRelationshipType.CHILD) != null);\n+    }\n+\n+    /**\n+     * @return true if the Person has any parents, otherwise false\n+     */\n+    public boolean hasParents() {\n+        return (getFamily().get(FamilialRelationshipType.PARENT) != null);\n+    }\n+\n+    // Recursive Search Format to determine mutual ancestry\n+    public boolean checkMutualAncestors(Person person, Campaign campaign) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY0OTY0MA=="}, "originalCommit": {"oid": "28fcf5c907d002a24654564ef93189e1839ad59c"}, "originalPosition": 178}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c647251434126fff8795a67be5be87e3bc4ae637", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/c647251434126fff8795a67be5be87e3bc4ae637", "committedDate": "2020-06-03T15:22:45Z", "message": "Fixing merge conflicts"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzNjcxNjc1", "url": "https://github.com/MegaMek/mekhq/pull/1765#pullrequestreview-423671675", "createdAt": "2020-06-03T15:28:52Z", "commit": {"oid": "c647251434126fff8795a67be5be87e3bc4ae637"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0538fca197a55d02de8ff82b5f3c8b036dfb10c5", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/0538fca197a55d02de8ff82b5f3c8b036dfb10c5", "committedDate": "2020-06-03T16:31:09Z", "message": "Implementing JavaDoc comments as per review"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb4244090e3b39e669d1c9e6ba78c83645ec26e8", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/cb4244090e3b39e669d1c9e6ba78c83645ec26e8", "committedDate": "2020-06-25T13:18:38Z", "message": "Fixing merge conflicts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a9ec9d964ae836a79c03bf7a5d5601e7b3923a07", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/a9ec9d964ae836a79c03bf7a5d5601e7b3923a07", "committedDate": "2020-06-25T14:09:19Z", "message": "Switching Siblings to be determined based on parential children"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7d607c8b2ee508fe4aca9bba68df752f56e185cd", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/7d607c8b2ee508fe4aca9bba68df752f56e185cd", "committedDate": "2020-06-25T14:12:28Z", "message": "Removing outdated todo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2eb5476f53ad9b5a77fdd8cc1cced44ce0762adf", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/2eb5476f53ad9b5a77fdd8cc1cced44ce0762adf", "committedDate": "2020-07-13T13:56:54Z", "message": "Fixing merge conflicts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "649749e7d148609d0bfda3ded9c5fcca178c445f", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/649749e7d148609d0bfda3ded9c5fcca178c445f", "committedDate": "2020-07-13T15:38:23Z", "message": "Fixing checkMutualAncestors and adding unit testing for it"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c24f2bcf98d10fa06e3e155975f294748627a622", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/c24f2bcf98d10fa06e3e155975f294748627a622", "committedDate": "2020-07-13T16:11:48Z", "message": "Adding heavy unit testing to Genealogy"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "556ac7337d35bbd270ce06f048f7113a70212098", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/556ac7337d35bbd270ce06f048f7113a70212098", "committedDate": "2020-07-13T16:24:19Z", "message": "Adding missing comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8fa4ae36f44e0ba25cf3d9224ad71949cffd7307", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/8fa4ae36f44e0ba25cf3d9224ad71949cffd7307", "committedDate": "2020-07-13T16:39:53Z", "message": "Renaming option"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "30bff3c3a028a821ef2d0f3543c30ce5297231c2", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/30bff3c3a028a821ef2d0f3543c30ce5297231c2", "committedDate": "2020-07-14T13:37:37Z", "message": "Fixing merge conflicts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7869cbdd0eea75574ed68493370d31d4f9d31d0", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/b7869cbdd0eea75574ed68493370d31d4f9d31d0", "committedDate": "2020-07-23T15:47:44Z", "message": "Merge remote-tracking branch 'upstream/master' into dev_Windchild_FamilyTree"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "54e87d43ae962527b28e1879830c5dfd52ce5ea2", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/54e87d43ae962527b28e1879830c5dfd52ce5ea2", "committedDate": "2020-07-26T14:49:40Z", "message": "Fixing merge conflicts"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU4MDY0MzMw", "url": "https://github.com/MegaMek/mekhq/pull/1765#pullrequestreview-458064330", "createdAt": "2020-07-30T04:33:48Z", "commit": {"oid": "54e87d43ae962527b28e1879830c5dfd52ce5ea2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4267, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}