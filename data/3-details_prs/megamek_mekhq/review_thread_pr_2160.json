{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA4NTAxMDY3", "number": 2160, "reviewThreads": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQyMDowNTo0NVrOEw7LHw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQyMDoxMzo1MlrOEw7WJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE5NzM2NjA3OnYy", "diffSide": "RIGHT", "path": "MekHQ/src/mekhq/gui/adapter/TOEMouseAdapter.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQyMDowNTo0NVrOHmx3uA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQyMDowNTo0NVrOHmx3uA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDQyNTAxNg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                        if (ship.isSalvage() || ship.getCommander() == null) {\n          \n          \n            \n                                        if (ship.isSalvage() || (ship.getCommander() == null)) {", "url": "https://github.com/MegaMek/mekhq/pull/2160#discussion_r510425016", "createdAt": "2020-10-22T20:05:45Z", "author": {"login": "Windchild292"}, "path": "MekHQ/src/mekhq/gui/adapter/TOEMouseAdapter.java", "diffHunk": "@@ -1365,11 +1365,12 @@ private void maybeShowPopup(MouseEvent e) {\n                         //is in a basic state that can accept units. Capacity gets checked once the action\n                         //is submitted.\n                         menu = new JMenu(\"Assign Unit to Transport Ship\");\n-                        for (UUID id : gui.getCampaign().getTransportShips()) {\n-                            Unit ship = gui.getCampaign().getUnit(id);\n-                            if (ship == null || ship.isSalvage() || ship.getCommander() == null) {\n+                        for (Unit ship : gui.getCampaign().getTransportShips()) {\n+                            if (ship.isSalvage() || ship.getCommander() == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5a214273498198797a4351c407aa82cc2a05d63e"}, "originalPosition": 42}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE5NzM2NzE3OnYy", "diffSide": "RIGHT", "path": "MekHQ/src/mekhq/gui/adapter/TOEMouseAdapter.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQyMDowNjowN1rOHmx4dA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQyMDowNjowN1rOHmx4dA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDQyNTIwNA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                        if (ship.isSalvage() || ship.getCommander() == null) {\n          \n          \n            \n                                        if (ship.isSalvage() || (ship.getCommander() == null)) {", "url": "https://github.com/MegaMek/mekhq/pull/2160#discussion_r510425204", "createdAt": "2020-10-22T20:06:07Z", "author": {"login": "Windchild292"}, "path": "MekHQ/src/mekhq/gui/adapter/TOEMouseAdapter.java", "diffHunk": "@@ -1011,12 +1011,12 @@ private void maybeShowPopup(MouseEvent e) {\n                     //Only display the Assign to Ship command if your command has at least 1 valid transport\n                     //and if your selection does not include a transport\n                     if (!shipInSelection && !gui.getCampaign().getTransportShips().isEmpty()) {\n-                        for (UUID id : gui.getCampaign().getTransportShips()) {\n-                            Unit ship = gui.getCampaign().getUnit(id);\n-                            if (ship == null || ship.isSalvage() || ship.getCommander() == null) {\n+                        for (Unit ship : gui.getCampaign().getTransportShips()) {\n+                            if (ship.isSalvage() || ship.getCommander() == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5a214273498198797a4351c407aa82cc2a05d63e"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE5NzM3NjgwOnYy", "diffSide": "RIGHT", "path": "MekHQ/src/mekhq/campaign/parts/BaArmor.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQyMDowOTowM1rOHmx-Xw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQyMDowOTowM1rOHmx-Xw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDQyNjcxOQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            && (((BaArmor)part).getType() == getType());\n          \n          \n            \n                            && (((BaArmor) part).getType() == getType());", "url": "https://github.com/MegaMek/mekhq/pull/2160#discussion_r510426719", "createdAt": "2020-10-22T20:09:03Z", "author": {"login": "Windchild292"}, "path": "MekHQ/src/mekhq/campaign/parts/BaArmor.java", "diffHunk": "@@ -90,50 +88,50 @@ public Money getPointCost() {\n             return Money.of(10000);\n         }\n     }\n-    \n+\n     private double getPointsPerTon() {\n         return getPointsPerTon(type, clan);\n     }\n-    \n+\n     @Override\n     public int getType() {\n         return type;\n     }\n-    \n+\n     @Override\n     public Money getCurrentValue() {\n         return getPointCost().multipliedBy(amount);\n     }\n-    \n+\n     @Override\n     public double getTonnageNeeded() {\n         return amountNeeded / getPointsPerTon();\n     }\n-    \n+\n     @Override\n     public Money getValueNeeded() {\n         return adjustCostsForCampaignOptions(getPointCost().multipliedBy(amountNeeded));\n     }\n-    \n+\n     @Override\n     public Money getStickerPrice() {\n         //always in 5-ton increments\n         return getPointCost().multipliedBy(5).multipliedBy(getPointsPerTon());\n     }\n-    \n+\n     @Override\n     public Money getBuyCost() {\n         return getStickerPrice();\n     }\n-    \n+\n     @Override\n     public boolean isSamePartType(Part part) {\n-        return part instanceof BaArmor\n-                && isClanTechBase() == part.isClanTechBase()\n-                && Objects.equals(getRefitId(), part.getRefitId())\n-                && ((BaArmor)part).getType() == getType();\n+        return (part instanceof BaArmor)\n+                && (isClanTechBase() == part.isClanTechBase())\n+                && (getRefitUnit() == part.getRefitUnit())\n+                && (((BaArmor)part).getType() == getType());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5a214273498198797a4351c407aa82cc2a05d63e"}, "originalPosition": 144}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE5NzM4NTQ3OnYy", "diffSide": "RIGHT", "path": "MekHQ/src/mekhq/campaign/personnel/Person.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQyMDoxMTowN1rOHmyDVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQyMDoxMTowN1rOHmyDVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDQyNzk5MA==", "bodyText": "I love this variable name", "url": "https://github.com/MegaMek/mekhq/pull/2160#discussion_r510427990", "createdAt": "2020-10-22T20:11:07Z", "author": {"login": "Windchild292"}, "path": "MekHQ/src/mekhq/campaign/personnel/Person.java", "diffHunk": "@@ -947,15 +943,13 @@ public void changeStatus(Campaign campaign, PersonnelStatus status) {\n         if (!status.isActive()) {\n             setDoctorId(null, campaign.getCampaignOptions().getNaturalHealingWaitingPeriod());\n             // If we're assigned to a unit, remove us from it\n-            Unit unit = campaign.getUnit(getUnitId());\n-            if (unit != null) {\n-                unit.remove(this, true);\n+            if (getUnit() != null) {\n+                getUnit().remove(this, true);\n             }\n \n             // If we're assigned as a tech for any unit, remove us from it/them\n-            for (UUID techUnitId : new ArrayList<>(getTechUnitIDs())) {\n-                unit = campaign.getUnit(techUnitId);\n-                unit.remove(this, true);\n+            for (Unit unitWeTech : new ArrayList<>(getTechUnits())) {\n+                unitWeTech.remove(this, true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5a214273498198797a4351c407aa82cc2a05d63e"}, "originalPosition": 59}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE5NzM5MDgxOnYy", "diffSide": "RIGHT", "path": "MekHQ/src/mekhq/campaign/unit/MothballInfo.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQyMDoxMjo1M1rOHmyGyw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQyMDoxMjo1M1rOHmyGyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDQyODg3NQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        if (driver.getStatus().isActive() && driver.getUnit() == null) {\n          \n          \n            \n                        if (driver.getStatus().isActive() && (driver.getUnit() == null)) {", "url": "https://github.com/MegaMek/mekhq/pull/2160#discussion_r510428875", "createdAt": "2020-10-22T20:12:53Z", "author": {"login": "Windchild292"}, "path": "MekHQ/src/mekhq/campaign/unit/MothballInfo.java", "diffHunk": "@@ -85,7 +85,7 @@ public void restorePreMothballInfo(Unit unit, Campaign campaign) {\n         }\n \n         for (Person driver : drivers) {\n-            if (driver.getStatus().isActive() && (driver.getUnitId() == null)) {\n+            if (driver.getStatus().isActive() && driver.getUnit() == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5a214273498198797a4351c407aa82cc2a05d63e"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE5NzM5MTg5OnYy", "diffSide": "RIGHT", "path": "MekHQ/src/mekhq/campaign/unit/MothballInfo.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQyMDoxMzoxNFrOHmyHkw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQyMDoxMzoxNFrOHmyHkw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDQyOTA3NQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        if (crew.getStatus().isActive() && crew.getUnit() == null) {\n          \n          \n            \n                        if (crew.getStatus().isActive() && (crew.getUnit() == null)) {", "url": "https://github.com/MegaMek/mekhq/pull/2160#discussion_r510429075", "createdAt": "2020-10-22T20:13:14Z", "author": {"login": "Windchild292"}, "path": "MekHQ/src/mekhq/campaign/unit/MothballInfo.java", "diffHunk": "@@ -94,22 +94,22 @@ public void restorePreMothballInfo(Unit unit, Campaign campaign) {\n             // add the gunner if they exist, aren't dead/retired/etc and aren't already assigned to some\n             // other unit. Caveat: single-person units have the same driver and gunner.\n             if (gunner.getStatus().isActive() &&\n-                    ((gunner.getUnitId() == null) || (gunner.getUnitId() == unit.getId()))) {\n+                    ((gunner.getUnit() == null) || (gunner.getUnit() == unit))) {\n                 unit.addGunner(gunner);\n             }\n         }\n \n         for (Person crew : vesselCrew) {\n-            if (crew.getStatus().isActive() && (crew.getUnitId() == null)) {\n+            if (crew.getStatus().isActive() && crew.getUnit() == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5a214273498198797a4351c407aa82cc2a05d63e"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE5NzM5MzA0OnYy", "diffSide": "RIGHT", "path": "MekHQ/src/mekhq/campaign/unit/MothballInfo.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQyMDoxMzozNFrOHmyIaA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQyMDoxMzozNFrOHmyIaA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDQyOTI4OA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if (techOfficer != null && techOfficer.getStatus().isActive() && techOfficer.getUnit() == null) {\n          \n          \n            \n                    if ((techOfficer != null) && (techOfficer.getStatus().isActive()) && (techOfficer.getUnit() == null)) {", "url": "https://github.com/MegaMek/mekhq/pull/2160#discussion_r510429288", "createdAt": "2020-10-22T20:13:34Z", "author": {"login": "Windchild292"}, "path": "MekHQ/src/mekhq/campaign/unit/MothballInfo.java", "diffHunk": "@@ -94,22 +94,22 @@ public void restorePreMothballInfo(Unit unit, Campaign campaign) {\n             // add the gunner if they exist, aren't dead/retired/etc and aren't already assigned to some\n             // other unit. Caveat: single-person units have the same driver and gunner.\n             if (gunner.getStatus().isActive() &&\n-                    ((gunner.getUnitId() == null) || (gunner.getUnitId() == unit.getId()))) {\n+                    ((gunner.getUnit() == null) || (gunner.getUnit() == unit))) {\n                 unit.addGunner(gunner);\n             }\n         }\n \n         for (Person crew : vesselCrew) {\n-            if (crew.getStatus().isActive() && (crew.getUnitId() == null)) {\n+            if (crew.getStatus().isActive() && crew.getUnit() == null) {\n                 unit.addVesselCrew(crew);\n             }\n         }\n \n-        if (techOfficer != null && techOfficer.getStatus().isActive() && techOfficer.getUnitId() == null) {\n+        if (techOfficer != null && techOfficer.getStatus().isActive() && techOfficer.getUnit() == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5a214273498198797a4351c407aa82cc2a05d63e"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE5NzM5NDI5OnYy", "diffSide": "RIGHT", "path": "MekHQ/src/mekhq/campaign/unit/MothballInfo.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQyMDoxMzo1MlrOHmyJUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQyMDoxMzo1MlrOHmyJUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDQyOTUyMQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if (navigator != null && navigator.getStatus().isActive() && navigator.getUnit() == null) {\n          \n          \n            \n                    if ((navigator != null) && (navigator.getStatus().isActive()) && (navigator.getUnit() == null)) {", "url": "https://github.com/MegaMek/mekhq/pull/2160#discussion_r510429521", "createdAt": "2020-10-22T20:13:52Z", "author": {"login": "Windchild292"}, "path": "MekHQ/src/mekhq/campaign/unit/MothballInfo.java", "diffHunk": "@@ -94,22 +94,22 @@ public void restorePreMothballInfo(Unit unit, Campaign campaign) {\n             // add the gunner if they exist, aren't dead/retired/etc and aren't already assigned to some\n             // other unit. Caveat: single-person units have the same driver and gunner.\n             if (gunner.getStatus().isActive() &&\n-                    ((gunner.getUnitId() == null) || (gunner.getUnitId() == unit.getId()))) {\n+                    ((gunner.getUnit() == null) || (gunner.getUnit() == unit))) {\n                 unit.addGunner(gunner);\n             }\n         }\n \n         for (Person crew : vesselCrew) {\n-            if (crew.getStatus().isActive() && (crew.getUnitId() == null)) {\n+            if (crew.getStatus().isActive() && crew.getUnit() == null) {\n                 unit.addVesselCrew(crew);\n             }\n         }\n \n-        if (techOfficer != null && techOfficer.getStatus().isActive() && techOfficer.getUnitId() == null) {\n+        if (techOfficer != null && techOfficer.getStatus().isActive() && techOfficer.getUnit() == null) {\n             unit.setTechOfficer(techOfficer);\n         }\n \n-        if (navigator != null && navigator.getStatus().isActive() && navigator.getUnitId() == null) {\n+        if (navigator != null && navigator.getStatus().isActive() && navigator.getUnit() == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5a214273498198797a4351c407aa82cc2a05d63e"}, "originalPosition": 32}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2132, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}