{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA1NTIzMzY2", "number": 1681, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOFQxNjoyMzo1MlrODzPNcA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOFQxNjoyNjozNFrODzPORA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1MDUzMTY4OnYy", "diffSide": "RIGHT", "path": "MekHQ/src/mekhq/Utilities.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOFQxNjoyMzo1MlrOGHsRHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOFQxODowNzowMVrOGHtAfg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDcxODQ5NA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            if (((BattleArmor)en).getTroopers() != (int) summary.getTWweight()) {\n          \n          \n            \n                            if (((BattleArmor) en).getTroopers() != (int) summary.getTWweight()) {", "url": "https://github.com/MegaMek/mekhq/pull/1681#discussion_r410718494", "createdAt": "2020-04-18T16:23:52Z", "author": {"login": "Windchild292"}, "path": "MekHQ/src/mekhq/Utilities.java", "diffHunk": "@@ -369,17 +369,29 @@ public static File lastFileModified(String dir, FilenameFilter filter) {\n         CampaignOptions options = campaign.getCampaignOptions();\n         ArrayList<String> variants = new ArrayList<>();\n         for(MechSummary summary : MechSummaryCache.getInstance().getAllMechs()) {\n-            // If this isn't the same chassis, is our current unit, or is a different weight we continue\n-            if(!en.getChassis().equalsIgnoreCase(summary.getChassis())\n+            // If this isn't the same chassis, is our current unit, we continue\n+            if (!en.getChassis().equalsIgnoreCase(summary.getChassis())\n                     || en.getModel().equalsIgnoreCase(summary.getModel())\n-                    || summary.getTons() != en.getWeight()\n                     || !summary.getUnitType().equals(UnitType.determineUnitType(en))) {\n                 continue;\n             }\n             // If we only allow canon units and this isn't canon we continue\n-            if(!summary.isCanon() && options.allowCanonRefitOnly()) {\n+            if (!summary.isCanon() && options.allowCanonRefitOnly()) {\n                 continue;\n             }\n+            \n+            // Weight of the two units must match or we continue, but BA weight gets\n+            // checked differently\n+            if (en instanceof BattleArmor) {\n+                if (((BattleArmor)en).getTroopers() != (int) summary.getTWweight()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d285cd2c765cbbec854860871d66b0f82137c500"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDcxODg3Mg==", "bodyText": "Also, should this be based on the ADVANCED_TACOPS_BA_WEIGHT option?", "url": "https://github.com/MegaMek/mekhq/pull/1681#discussion_r410718872", "createdAt": "2020-04-18T16:27:43Z", "author": {"login": "Windchild292"}, "path": "MekHQ/src/mekhq/Utilities.java", "diffHunk": "@@ -369,17 +369,29 @@ public static File lastFileModified(String dir, FilenameFilter filter) {\n         CampaignOptions options = campaign.getCampaignOptions();\n         ArrayList<String> variants = new ArrayList<>();\n         for(MechSummary summary : MechSummaryCache.getInstance().getAllMechs()) {\n-            // If this isn't the same chassis, is our current unit, or is a different weight we continue\n-            if(!en.getChassis().equalsIgnoreCase(summary.getChassis())\n+            // If this isn't the same chassis, is our current unit, we continue\n+            if (!en.getChassis().equalsIgnoreCase(summary.getChassis())\n                     || en.getModel().equalsIgnoreCase(summary.getModel())\n-                    || summary.getTons() != en.getWeight()\n                     || !summary.getUnitType().equals(UnitType.determineUnitType(en))) {\n                 continue;\n             }\n             // If we only allow canon units and this isn't canon we continue\n-            if(!summary.isCanon() && options.allowCanonRefitOnly()) {\n+            if (!summary.isCanon() && options.allowCanonRefitOnly()) {\n                 continue;\n             }\n+            \n+            // Weight of the two units must match or we continue, but BA weight gets\n+            // checked differently\n+            if (en instanceof BattleArmor) {\n+                if (((BattleArmor)en).getTroopers() != (int) summary.getTWweight()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDcxODQ5NA=="}, "originalCommit": {"oid": "d285cd2c765cbbec854860871d66b0f82137c500"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDczMDYyMg==", "bodyText": "No, this should be TWweight to work as intended when compared to getTroopers.  I'm pretty sure MechSummary was written before BA/Infantry was fully implemented, as it doesn't have any functionality for tracking the number of troopers.  Infantry/BA refits bear a more comprehensive look at some point, but that's not a rabbithole I want to go down at present.", "url": "https://github.com/MegaMek/mekhq/pull/1681#discussion_r410730622", "createdAt": "2020-04-18T18:07:01Z", "author": {"login": "mkerensky"}, "path": "MekHQ/src/mekhq/Utilities.java", "diffHunk": "@@ -369,17 +369,29 @@ public static File lastFileModified(String dir, FilenameFilter filter) {\n         CampaignOptions options = campaign.getCampaignOptions();\n         ArrayList<String> variants = new ArrayList<>();\n         for(MechSummary summary : MechSummaryCache.getInstance().getAllMechs()) {\n-            // If this isn't the same chassis, is our current unit, or is a different weight we continue\n-            if(!en.getChassis().equalsIgnoreCase(summary.getChassis())\n+            // If this isn't the same chassis, is our current unit, we continue\n+            if (!en.getChassis().equalsIgnoreCase(summary.getChassis())\n                     || en.getModel().equalsIgnoreCase(summary.getModel())\n-                    || summary.getTons() != en.getWeight()\n                     || !summary.getUnitType().equals(UnitType.determineUnitType(en))) {\n                 continue;\n             }\n             // If we only allow canon units and this isn't canon we continue\n-            if(!summary.isCanon() && options.allowCanonRefitOnly()) {\n+            if (!summary.isCanon() && options.allowCanonRefitOnly()) {\n                 continue;\n             }\n+            \n+            // Weight of the two units must match or we continue, but BA weight gets\n+            // checked differently\n+            if (en instanceof BattleArmor) {\n+                if (((BattleArmor)en).getTroopers() != (int) summary.getTWweight()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDcxODQ5NA=="}, "originalCommit": {"oid": "d285cd2c765cbbec854860871d66b0f82137c500"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1MDUzMzgwOnYy", "diffSide": "RIGHT", "path": "MekHQ/src/mekhq/Utilities.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOFQxNjoyNjozNFrOGHsSOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOFQxODowMzo1NlrOGHs_cA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDcxODc3Ng==", "bodyText": "Can we swap this to use UnitType.getTypeName(e.getUnitType()), as the current method is deprecated.", "url": "https://github.com/MegaMek/mekhq/pull/1681#discussion_r410718776", "createdAt": "2020-04-18T16:26:34Z", "author": {"login": "Windchild292"}, "path": "MekHQ/src/mekhq/Utilities.java", "diffHunk": "@@ -369,17 +369,30 @@ public static File lastFileModified(String dir, FilenameFilter filter) {\n         CampaignOptions options = campaign.getCampaignOptions();\n         ArrayList<String> variants = new ArrayList<>();\n         for(MechSummary summary : MechSummaryCache.getInstance().getAllMechs()) {\n-            // If this isn't the same chassis, is our current unit, or is a different weight we continue\n-            if(!en.getChassis().equalsIgnoreCase(summary.getChassis())\n+            // If this isn't the same chassis, is our current unit, we continue\n+            if (!en.getChassis().equalsIgnoreCase(summary.getChassis())\n                     || en.getModel().equalsIgnoreCase(summary.getModel())\n-                    || summary.getTons() != en.getWeight()\n                     || !summary.getUnitType().equals(UnitType.determineUnitType(en))) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77d1dd2adb72fc003e225bea2ed57483a703f52e"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDczMDM1Mg==", "bodyText": "Done.", "url": "https://github.com/MegaMek/mekhq/pull/1681#discussion_r410730352", "createdAt": "2020-04-18T18:03:56Z", "author": {"login": "mkerensky"}, "path": "MekHQ/src/mekhq/Utilities.java", "diffHunk": "@@ -369,17 +369,30 @@ public static File lastFileModified(String dir, FilenameFilter filter) {\n         CampaignOptions options = campaign.getCampaignOptions();\n         ArrayList<String> variants = new ArrayList<>();\n         for(MechSummary summary : MechSummaryCache.getInstance().getAllMechs()) {\n-            // If this isn't the same chassis, is our current unit, or is a different weight we continue\n-            if(!en.getChassis().equalsIgnoreCase(summary.getChassis())\n+            // If this isn't the same chassis, is our current unit, we continue\n+            if (!en.getChassis().equalsIgnoreCase(summary.getChassis())\n                     || en.getModel().equalsIgnoreCase(summary.getModel())\n-                    || summary.getTons() != en.getWeight()\n                     || !summary.getUnitType().equals(UnitType.determineUnitType(en))) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDcxODc3Ng=="}, "originalCommit": {"oid": "77d1dd2adb72fc003e225bea2ed57483a703f52e"}, "originalPosition": 10}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2440, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}