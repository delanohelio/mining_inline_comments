{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkzMTExOTQy", "number": 2052, "title": "Bloodname GM Tools", "bodyText": "This removes the Random Bloodname Dialog and moves it to be part of the GM Tools Dialog.\nAs part of this I standardized the names between Faction and Clan.", "createdAt": "2020-09-25T14:23:53Z", "url": "https://github.com/MegaMek/mekhq/pull/2052", "merged": true, "mergeCommit": {"oid": "8273001833a30baeaa9442cce7c653cc204c4687"}, "closed": true, "closedAt": "2020-10-03T18:52:36Z", "author": {"login": "Windchild292"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdMFHx8gH2gAyNDkzMTExOTQyOmRhNTQ5YmQ1NzUzOTk3ODUzNjQ0YTMwM2FjMDBmNWFiZGVlYjc0Y2Q=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdO-_uxAFqTUwMTU2NTc5Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "da549bd5753997853644a303ac00f5abdeeb74cd", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/da549bd5753997853644a303ac00f5abdeeb74cd", "committedDate": "2020-09-24T18:02:21Z", "message": "Adding Bloodname GM Dialog"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "189e8628be2acef8f15d49f632cd9a39cd9abb30", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/189e8628be2acef8f15d49f632cd9a39cd9abb30", "committedDate": "2020-09-24T21:03:50Z", "message": "Merge remote-tracking branch 'upstream/master' into dev_Windchild_BloodnameGMDialog"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4217bca36dbb667e1471b0cae0dd772660e1f3b4", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/4217bca36dbb667e1471b0cae0dd772660e1f3b4", "committedDate": "2020-09-25T14:17:20Z", "message": "Bloodname bugfixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b26c5d6feaddbaa517ceb61acf93d1f1d1a45cd4", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/b26c5d6feaddbaa517ceb61acf93d1f1d1a45cd4", "committedDate": "2020-09-25T14:22:24Z", "message": "Merge remote-tracking branch 'upstream/master' into dev_Windchild_BloodnameGMDialog"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "813cb72d238d74aed1666eb88592681519e34445", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/813cb72d238d74aed1666eb88592681519e34445", "committedDate": "2020-09-29T13:51:44Z", "message": "Fixing merge conflicts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f88328bf7788c9c8946c52e8ad302079290a74be", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/f88328bf7788c9c8946c52e8ad302079290a74be", "committedDate": "2020-09-29T15:12:11Z", "message": "Merge branch 'master' into dev_Windchild_BloodnameGMDialog"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c11bb2632671b81df9f31b5fc5ed046318bbf3e", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/8c11bb2632671b81df9f31b5fc5ed046318bbf3e", "committedDate": "2020-10-03T17:39:53Z", "message": "Merge remote-tracking branch 'upstream/master' into dev_Windchild_BloodnameGMDialog"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "92fde75e75a6d7c2f377510c11c0f3d474e01ece", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/92fde75e75a6d7c2f377510c11c0f3d474e01ece", "committedDate": "2020-10-03T17:41:13Z", "message": "Modernizing logger"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxNTY0MDQy", "url": "https://github.com/MegaMek/mekhq/pull/2052#pullrequestreview-501564042", "createdAt": "2020-10-03T18:08:59Z", "commit": {"oid": "92fde75e75a6d7c2f377510c11c0f3d474e01ece"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wM1QxODowODo1OVrOHcC4Nw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wM1QxODoxMTozN1rOHcC5Gg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTE2OTMzNQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                int originClan;\n          \n          \n            \n                Phenotype selectedPhenotype;\n          \n          \n            \n                int bloodnameYear;\n          \n          \n            \n                private int originClan;\n          \n          \n            \n                private Phenotype selectedPhenotype;\n          \n          \n            \n                private int bloodnameYear;", "url": "https://github.com/MegaMek/mekhq/pull/2052#discussion_r499169335", "createdAt": "2020-10-03T18:08:59Z", "author": {"login": "sixlettervariables"}, "path": "MekHQ/src/mekhq/gui/dialog/GMToolsDialog.java", "diffHunk": "@@ -84,28 +90,58 @@\n     private JLabel currentCallsign;\n     private JLabel callsignGenerated;\n \n-    private CampaignGUI gui;\n-    private Person person;\n-\n+    private JComboBox<String> originClanPicker;\n+    private JComboBox<Integer> bloodnameEraPicker;\n+    private JComboBox<Phenotype> phenotypePicker;\n+    private JLabel currentBloodname;\n+    private JLabel bloodnameGenerated;\n+    private JLabel originClanGenerated;\n+    private JLabel phenotypeGenerated;\n+    private JLabel bloodnameWarningLabel;\n+    //endregion GUI Variables\n+\n+    //region Previously Generated Information\n     /**\n      * The last unit rolled, used when clicking 'Add Random Unit' after Roll for RAT is clicked\n      */\n     private MechSummary lastRolledUnit;\n \n     /**\n-     * The last name rolled, used when clocking 'Set Generated Name' after Generate Name is clicked\n+     * The last name rolled, used when clicking 'Set Generated Name' after Generate Name is clicked\n      */\n     private String[] lastGeneratedName;\n \n     /**\n-     * The last callsign rolled, used when clocking 'Set Generated Callsign' after Generate Callsign is clicked\n+     * The last callsign rolled, used when clicking 'Set Generated Callsign' after Generate Callsign is clicked\n      */\n     private String lastGeneratedCallsign;\n \n+    /**\n+     * The last bloodname rolled, used when clicking 'Set Generated Bloodname' after Generate Bloodname is clicked\n+     */\n+    private String lastGeneratedBloodname;\n+    //endregion Previously Generated Information\n+\n+    //region Data Sources\n+    private CampaignGUI gui;\n+    private Person person;\n+    private List<Clan> clans = new ArrayList<>();\n+    //endregion Data Sources\n+\n+    //region Bloodname Information\n+    int originClan;\n+    Phenotype selectedPhenotype;\n+    int bloodnameYear;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "92fde75e75a6d7c2f377510c11c0f3d474e01ece"}, "originalPosition": 95}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTE2OTU2Mg==", "bodyText": "I get errors when building with DefaultLookup.* under JDK11. Perhaps this should move to UIManager?", "url": "https://github.com/MegaMek/mekhq/pull/2052#discussion_r499169562", "createdAt": "2020-10-03T18:11:37Z", "author": {"login": "sixlettervariables"}, "path": "MekHQ/src/mekhq/gui/dialog/GMToolsDialog.java", "diffHunk": "@@ -413,6 +451,151 @@ private JPanel getCallsignGenerator() {\n     }\n     //endregion Callsign Generator Panel Initialization\n \n+    //region Bloodname Generator Panel Initialization\n+    private JPanel getBloodnameGenerator() {\n+        JPanel namePanel = new JPanel(new GridBagLayout());\n+        namePanel.setName(\"bloodnamePanel\");\n+        namePanel.setBorder(BorderFactory.createTitledBorder(resources.getString(\"bloodnamePanel.text\")));\n+\n+        int gridx = 0, gridy = 0, gridxMax;\n+\n+        JLabel originClanLabel = new JLabel(resources.getString(\"originClanLabel.text\"));\n+        originClanLabel.setName(\"originClanLabel\");\n+        namePanel.add(originClanLabel, newGridBagConstraints(gridx, gridy));\n+\n+        clans.addAll(Clan.getClans());\n+        clans.sort(Comparator.comparing(o -> o.getFullName(bloodnameYear)));\n+        DefaultComboBoxModel<String> originClanModel = new DefaultComboBoxModel<>();\n+        for (Clan clan : clans) {\n+            originClanModel.addElement(clan.getFullName(bloodnameYear));\n+        }\n+        originClanPicker = new JComboBox<>(originClanModel);\n+        originClanPicker.setName(\"originClanPicker\");\n+        originClanPicker.setSelectedIndex(0);\n+        originClanPicker.addActionListener(evt -> validateBloodnameInput());\n+        namePanel.add(originClanPicker, newGridBagConstraints(gridx++, gridy + 1));\n+\n+        JLabel bloodnameEraLabel = new JLabel(resources.getString(\"bloodnameEraLabel.text\"));\n+        bloodnameEraLabel.setName(\"bloodnameEraLabel\");\n+        namePanel.add(bloodnameEraLabel, newGridBagConstraints(gridx, gridy));\n+\n+        bloodnameEraPicker = new JComboBox<>(ERAS);\n+        bloodnameEraPicker.setName(\"bloodnameEraPicker\");\n+        bloodnameEraPicker.setSelectedIndex(0);\n+        bloodnameEraPicker.addActionListener(evt -> validateBloodnameInput());\n+        namePanel.add(bloodnameEraPicker, newGridBagConstraints(gridx++, gridy + 1));\n+\n+        JLabel phenotypeLabel = new JLabel(resources.getString(\"phenotypeLabel.text\"));\n+        phenotypeLabel.setName(\"phenotypeLabel\");\n+        namePanel.add(phenotypeLabel, newGridBagConstraints(gridx, gridy));\n+\n+        DefaultComboBoxModel<Phenotype> phenotypeModel = new DefaultComboBoxModel<>();\n+        phenotypeModel.addElement(Phenotype.GENERAL);\n+        for (Phenotype phenotype : Phenotype.getExternalPhenotypes()) {\n+            phenotypeModel.addElement(phenotype);\n+        }\n+        phenotypePicker = new JComboBox<>(phenotypeModel);\n+        phenotypePicker.setName(\"phenotypePicker\");\n+        phenotypePicker.setSelectedItem(Phenotype.GENERAL);\n+        phenotypePicker.setRenderer(new DefaultListCellRenderer() {\n+            @Override\n+            public Component getListCellRendererComponent(JList<?> list, Object value, int index,\n+                                                          boolean isSelected, boolean cellHasFocus) {\n+                setOpaque(list.isOpaque());\n+                if (isSelected) {\n+                    setBackground(list.getSelectionBackground());\n+                    setForeground(list.getSelectionForeground());\n+                } else {\n+                    setBackground(list.getBackground());\n+                    setForeground(list.getForeground());\n+                }\n+                setFont(list.getFont());\n+\n+                setText((value == null) ? \"\"\n+                        : (value instanceof Phenotype ? ((Phenotype) value).getGroupingName() : \"ERROR\"));\n+\n+                setEnabled(list.isEnabled());\n+\n+                if (cellHasFocus) {\n+                    Border border = null;\n+                    if (isSelected) {\n+                        border = DefaultLookup.getBorder(this, ui, \"List.focusSelectedCellHighlightBorder\");\n+                    }\n+                    if (border == null) {\n+                        border = DefaultLookup.getBorder(this, ui, \"List.focusCellHighlightBorder\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "92fde75e75a6d7c2f377510c11c0f3d474e01ece"}, "originalPosition": 258}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "35dfef550dafb8239dc9eaa0c40b2415690df4d6", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/35dfef550dafb8239dc9eaa0c40b2415690df4d6", "committedDate": "2020-10-03T18:23:29Z", "message": "Update MekHQ/src/mekhq/gui/dialog/GMToolsDialog.java\n\nCo-authored-by: Christopher Watford <christopher.watford@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "43ede68f1ca8697623b72862b2073a8c0dbe3e00", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/43ede68f1ca8697623b72862b2073a8c0dbe3e00", "committedDate": "2020-10-03T18:33:19Z", "message": "Removing DefaultLookup and simplifying code"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxNTY1Nzkz", "url": "https://github.com/MegaMek/mekhq/pull/2052#pullrequestreview-501565793", "createdAt": "2020-10-03T18:35:54Z", "commit": {"oid": "43ede68f1ca8697623b72862b2073a8c0dbe3e00"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4216, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}