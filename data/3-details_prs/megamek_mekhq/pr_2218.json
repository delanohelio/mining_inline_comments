{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE4MDQzMzM4", "number": 2218, "title": "Issue #2217 #2219: Cannot save Campaign with Refits and cannot start new Refits", "bodyText": "Refactoring to use getCampaign introduced an error where two places should have been using oldUnit.getCampaign. This fixes #2217. This fixes #2219.", "createdAt": "2020-11-09T21:14:34Z", "url": "https://github.com/MegaMek/mekhq/pull/2218", "merged": true, "mergeCommit": {"oid": "aa3ea9eed856d19607ead02b7fbc047eb98bd4a3"}, "closed": true, "closedAt": "2020-11-10T23:52:27Z", "author": {"login": "sixlettervariables"}, "timelineItems": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABda7aahgH2gAyNTE4MDQzMzM4OjJkNjk2YWJjZjg1ZmQ1YzFjYzg4YWFkMzIxYThlMWNkOTdiZDBjZDE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdbLPXoAFqTUyNzMxMzU0NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2d696abcf85fd5c1cc88aad321a8e1cd97bd0cd1", "author": {"user": {"login": "sixlettervariables", "name": "Christopher Watford"}}, "url": "https://github.com/MegaMek/mekhq/commit/2d696abcf85fd5c1cc88aad321a8e1cd97bd0cd1", "committedDate": "2020-11-09T21:12:31Z", "message": "Ensure we set Campaign on refits, fixing #2217"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3MzEzNTQ0", "url": "https://github.com/MegaMek/mekhq/pull/2218#pullrequestreview-527313544", "createdAt": "2020-11-10T15:21:51Z", "commit": {"oid": "2d696abcf85fd5c1cc88aad321a8e1cd97bd0cd1"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxNToyMTo1MlrOHwhtpQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxNTozODo0MVrOHwiiCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDY0NjA1Mw==", "bodyText": "getCampaign is correct here as we just set campaign to be this value.", "url": "https://github.com/MegaMek/mekhq/pull/2218#discussion_r520646053", "createdAt": "2020-11-10T15:21:52Z", "author": {"login": "Windchild292"}, "path": "MekHQ/src/mekhq/campaign/parts/Refit.java", "diffHunk": "@@ -2101,12 +2101,12 @@ private static void processArmorSupplies(Refit retVal, Node wn, Version version)\n     }\n \n     public void reCalc() {\n-        setCampaign(getCampaign());\n+        setCampaign(oldUnit.getCampaign());\n         for (Part p : shoppingList) {\n-            p.setCampaign(getCampaign());\n+            p.setCampaign(oldUnit.getCampaign());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2d696abcf85fd5c1cc88aad321a8e1cd97bd0cd1"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDY0NjE4OQ==", "bodyText": "Same here", "url": "https://github.com/MegaMek/mekhq/pull/2218#discussion_r520646189", "createdAt": "2020-11-10T15:22:02Z", "author": {"login": "Windchild292"}, "path": "MekHQ/src/mekhq/campaign/parts/Refit.java", "diffHunk": "@@ -2101,12 +2101,12 @@ private static void processArmorSupplies(Refit retVal, Node wn, Version version)\n     }\n \n     public void reCalc() {\n-        setCampaign(getCampaign());\n+        setCampaign(oldUnit.getCampaign());\n         for (Part p : shoppingList) {\n-            p.setCampaign(getCampaign());\n+            p.setCampaign(oldUnit.getCampaign());\n         }\n         if (null != newArmorSupplies) {\n-            newArmorSupplies.setCampaign(getCampaign());\n+            newArmorSupplies.setCampaign(oldUnit.getCampaign());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2d696abcf85fd5c1cc88aad321a8e1cd97bd0cd1"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDY1OTQ2NQ==", "bodyText": "With the addition of setCampaign in fixReferences this is not necessary at this time, although I don't know if it may come up in future.", "url": "https://github.com/MegaMek/mekhq/pull/2218#discussion_r520659465", "createdAt": "2020-11-10T15:38:41Z", "author": {"login": "Windchild292"}, "path": "MekHQ/src/mekhq/campaign/parts/Refit.java", "diffHunk": "@@ -2101,12 +2101,12 @@ private static void processArmorSupplies(Refit retVal, Node wn, Version version)\n     }\n \n     public void reCalc() {\n-        setCampaign(getCampaign());\n+        setCampaign(oldUnit.getCampaign());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2d696abcf85fd5c1cc88aad321a8e1cd97bd0cd1"}, "originalPosition": 14}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4129, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}