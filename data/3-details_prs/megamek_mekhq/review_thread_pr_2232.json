{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIxMjUxOTAx", "number": 2232, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQwMjowMDowOFrOE_asSw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQwMjowMDowOFrOE_asSw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM0OTMzMDY3OnYy", "diffSide": "RIGHT", "path": "MekHQ/src/mekhq/campaign/parts/MissingPart.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQwMjowMDowOFrOH9HUpQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQwMzoxNjowN1rOH9IwNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzg0NTE1Nw==", "bodyText": "Remind me, what's the second argument here?", "url": "https://github.com/MegaMek/mekhq/pull/2232#discussion_r533845157", "createdAt": "2020-12-02T02:00:08Z", "author": {"login": "NickAragua"}, "path": "MekHQ/src/mekhq/campaign/parts/MissingPart.java", "diffHunk": "@@ -419,18 +421,19 @@ public void reservePart() {\n \n     @Override\n     public void cancelReservation() {\n-        Part replacement = findReplacement(false);\n-        if (hasReplacementPart() && (null != replacement)) {\n-            setReplacementPart(null);\n-            replacement.setReservedBy(null);\n-            if (replacement.isSpare()) {\n-                Part spare = campaign.getWarehouse().checkForExistingSparePart(replacement);\n-                if (null != spare) {\n-                    spare.incrementQuantity();\n-                    campaign.getWarehouse().removePart(replacement);\n+        if (hasReplacementPart()) {\n+            Part replacement = getReplacementPart();\n+            if (replacement != null) {\n+                replacement.setReservedBy(null);\n+\n+                // Only return the replacement part to the campaign if we have one\n+                if (replacement.getQuantity() > 0) {\n+                    campaign.getQuartermaster().addPart(replacement, 0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9e07445c5e112f902589f521e5b6da283ce9809b"}, "originalPosition": 70}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzg2ODU5OQ==", "bodyText": "transitDays, should probably name the method better and add an immediate version.\nSomething like:\nquartermaster.addInTransitPart(part, transitDays);\nquartermaster.addPart(part);", "url": "https://github.com/MegaMek/mekhq/pull/2232#discussion_r533868599", "createdAt": "2020-12-02T03:16:07Z", "author": {"login": "sixlettervariables"}, "path": "MekHQ/src/mekhq/campaign/parts/MissingPart.java", "diffHunk": "@@ -419,18 +421,19 @@ public void reservePart() {\n \n     @Override\n     public void cancelReservation() {\n-        Part replacement = findReplacement(false);\n-        if (hasReplacementPart() && (null != replacement)) {\n-            setReplacementPart(null);\n-            replacement.setReservedBy(null);\n-            if (replacement.isSpare()) {\n-                Part spare = campaign.getWarehouse().checkForExistingSparePart(replacement);\n-                if (null != spare) {\n-                    spare.incrementQuantity();\n-                    campaign.getWarehouse().removePart(replacement);\n+        if (hasReplacementPart()) {\n+            Part replacement = getReplacementPart();\n+            if (replacement != null) {\n+                replacement.setReservedBy(null);\n+\n+                // Only return the replacement part to the campaign if we have one\n+                if (replacement.getQuantity() > 0) {\n+                    campaign.getQuartermaster().addPart(replacement, 0);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzg0NTE1Nw=="}, "originalCommit": {"oid": "9e07445c5e112f902589f521e5b6da283ce9809b"}, "originalPosition": 70}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2188, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}