{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAwODEyMDM4", "number": 2134, "title": "PartRepairType Enum", "bodyText": "This implements PartRepairType as an enum, as part of simplifying MRMS' readability.\nTo Review: Whitespace differences off. The last two commits as of this being opened are both formatting cleanups for the parts edited by the other changes.", "createdAt": "2020-10-09T20:44:44Z", "url": "https://github.com/MegaMek/mekhq/pull/2134", "merged": true, "mergeCommit": {"oid": "1bfbd298a0ac73da776fbd02bc73fc4ed3f9baac"}, "closed": true, "closedAt": "2020-12-21T18:27:31Z", "author": {"login": "Windchild292"}, "timelineItems": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdQ5IjIgH2gAyNTAwODEyMDM4OjUwODgyZTRhYjIxNzM5M2UxZGE2ZDk2MmZlMzEyYzY0Yzg5M2YyNGU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdoXShNgFqTU1NjQ0MjUyNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "50882e4ab217393e1da6d962fe312c64c893f24e", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/50882e4ab217393e1da6d962fe312c64c893f24e", "committedDate": "2020-10-09T16:53:57Z", "message": "Starting to implement PartRepairType"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "445b9fde5edde9a25413a2e358767c4aa1c19168", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/445b9fde5edde9a25413a2e358767c4aa1c19168", "committedDate": "2020-10-09T16:54:17Z", "message": "Merge remote-tracking branch 'upstream/master' into dev_Windchild_PartRepairType"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d98320a55b92c41d12dfd6688e621d69bb1be1bb", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/d98320a55b92c41d12dfd6688e621d69bb1be1bb", "committedDate": "2020-10-09T17:05:18Z", "message": "Continuing to implement PartRepairType"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3e6f56a49af5d434b2be5233cf3d3d7911c4ac30", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/3e6f56a49af5d434b2be5233cf3d3d7911c4ac30", "committedDate": "2020-10-09T17:32:07Z", "message": "BattleArmorAmmoBin"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3babb396e791a56cb9677c18b82a57cd8cc52d42", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/3babb396e791a56cb9677c18b82a57cd8cc52d42", "committedDate": "2020-10-09T17:35:30Z", "message": "Cleaning up IPartWork"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bfc41f1cbb215c20ca76cefd0d10c5c5035caf5f", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/bfc41f1cbb215c20ca76cefd0d10c5c5035caf5f", "committedDate": "2020-10-09T17:36:05Z", "message": "Fixing up some more type ints"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "787f2868655de24be58f24cee6b46c6131021e80", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/787f2868655de24be58f24cee6b46c6131021e80", "committedDate": "2020-10-09T18:46:45Z", "message": "Continuing to work on PartRepairType"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "024b513043f658dfcdb84126a5ba49b836a5717b", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/024b513043f658dfcdb84126a5ba49b836a5717b", "committedDate": "2020-10-09T19:20:57Z", "message": "Finishing up implementing the PartRepairType enum"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8eb60a828103cc2fad0c74b840bdce8f4613cbd2", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/8eb60a828103cc2fad0c74b840bdce8f4613cbd2", "committedDate": "2020-10-09T20:27:43Z", "message": "Implementing formatting fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "34d95735aaeeebad5747cf2e4c83ef66e5c60952", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/34d95735aaeeebad5747cf2e4c83ef66e5c60952", "committedDate": "2020-10-09T20:38:24Z", "message": "Fixing tab spacing"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2OTkxMjQ3", "url": "https://github.com/MegaMek/mekhq/pull/2134#pullrequestreview-506991247", "createdAt": "2020-10-13T00:17:14Z", "commit": {"oid": "34d95735aaeeebad5747cf2e4c83ef66e5c60952"}, "state": "COMMENTED", "comments": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QwMDoxNzoxNFrOHgRR6Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QwMDoyNjoxNlrOHgRavw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzU5OTU5Mw==", "bodyText": "\"improving readability\" lol", "url": "https://github.com/MegaMek/mekhq/pull/2134#discussion_r503599593", "createdAt": "2020-10-13T00:17:14Z", "author": {"login": "NickAragua"}, "path": "MekHQ/src/mekhq/campaign/CampaignOptions.java", "diffHunk": "@@ -3051,7 +3052,7 @@ public void addMassRepairOption(MassRepairOption mro) {\n             massRepairOptions.remove(foundIdx + 1);\n         }\n \n-        massRepairOptions.sort(Comparator.comparingInt(MassRepairOption::getType));\n+        massRepairOptions.sort((mro1, mro2) -> (((Comparable<Integer>) mro1.getType().ordinal()).compareTo(mro2.getType().ordinal())));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34d95735aaeeebad5747cf2e4c83ef66e5c60952"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzYwMDM1OA==", "bodyText": "I assume ProtomekSensor doesn't have an implementation of getUnitTonnage()?", "url": "https://github.com/MegaMek/mekhq/pull/2134#discussion_r503600358", "createdAt": "2020-10-13T00:20:16Z", "author": {"login": "NickAragua"}, "path": "MekHQ/src/mekhq/campaign/parts/MissingProtomekSensor.java", "diffHunk": "@@ -112,7 +111,7 @@ public void fix() {\n     @Override\n     public boolean isAcceptableReplacement(Part part, boolean refit) {\n         return part instanceof ProtomekSensor\n-                && getUnitTonnage() == ((ProtomekSensor)part).getUnitTonnage();\n+                && getUnitTonnage() == part.getUnitTonnage();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34d95735aaeeebad5747cf2e4c83ef66e5c60952"}, "originalPosition": 92}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzYwMDQ3Mg==", "bodyText": "I assume SpacecraftEngine doesn't have an implementation of getTonnage()?", "url": "https://github.com/MegaMek/mekhq/pull/2134#discussion_r503600472", "createdAt": "2020-10-13T00:20:47Z", "author": {"login": "NickAragua"}, "path": "MekHQ/src/mekhq/campaign/parts/MissingSpacecraftEngine.java", "diffHunk": "@@ -79,12 +78,12 @@ public double getTonnage() {\n     public boolean isAcceptableReplacement(Part part, boolean refit) {\n         return part instanceof SpacecraftEngine\n                 && getName().equals(part.getName())\n-                && getTonnage() == ((SpacecraftEngine)part).getTonnage();\n+                && getTonnage() == part.getTonnage();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34d95735aaeeebad5747cf2e4c83ef66e5c60952"}, "originalPosition": 65}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzYwMDY1OQ==", "bodyText": "Double check that ProtomekArmActuator doesn't have an implementation of getUnitTonnage()", "url": "https://github.com/MegaMek/mekhq/pull/2134#discussion_r503600659", "createdAt": "2020-10-13T00:21:40Z", "author": {"login": "NickAragua"}, "path": "MekHQ/src/mekhq/campaign/parts/ProtomekArmActuator.java", "diffHunk": "@@ -85,7 +84,7 @@ public Money getStickerPrice() {\n     @Override\n     public boolean isSamePartType (Part part) {\n         return part instanceof ProtomekArmActuator\n-                && getUnitTonnage() == ((ProtomekArmActuator)part).getUnitTonnage();\n+                && getUnitTonnage() == part.getUnitTonnage();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34d95735aaeeebad5747cf2e4c83ef66e5c60952"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzYwMDgwNg==", "bodyText": "Doublecheck that ProtomekLegActuator doesn't have implementation of getUnitTonnage()", "url": "https://github.com/MegaMek/mekhq/pull/2134#discussion_r503600806", "createdAt": "2020-10-13T00:22:05Z", "author": {"login": "NickAragua"}, "path": "MekHQ/src/mekhq/campaign/parts/ProtomekLegActuator.java", "diffHunk": "@@ -72,7 +71,7 @@ public Money getStickerPrice() {\n     @Override\n     public boolean isSamePartType (Part part) {\n         return part instanceof ProtomekLegActuator\n-                && getUnitTonnage() == ((ProtomekLegActuator)part).getUnitTonnage();\n+                && getUnitTonnage() == part.getUnitTonnage();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34d95735aaeeebad5747cf2e4c83ef66e5c60952"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzYwMDk0Mw==", "bodyText": "Double check that ProtomekLocation doesn't have an implementation of getUnitTonnage()", "url": "https://github.com/MegaMek/mekhq/pull/2134#discussion_r503600943", "createdAt": "2020-10-13T00:22:42Z", "author": {"login": "NickAragua"}, "path": "MekHQ/src/mekhq/campaign/parts/ProtomekLocation.java", "diffHunk": "@@ -165,7 +163,7 @@ public boolean forQuad() {\n     public boolean isSamePartType(Part part) {\n         return part instanceof ProtomekLocation\n                 && getLoc() == ((ProtomekLocation)part).getLoc()\n-                && getUnitTonnage() == ((ProtomekLocation)part).getUnitTonnage()\n+                && getUnitTonnage() == part.getUnitTonnage()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34d95735aaeeebad5747cf2e4c83ef66e5c60952"}, "originalPosition": 123}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzYwMTAwOA==", "bodyText": "Double check that ProtomekSensor doesn't have an implementation of getUnitTonnage()", "url": "https://github.com/MegaMek/mekhq/pull/2134#discussion_r503601008", "createdAt": "2020-10-13T00:22:57Z", "author": {"login": "NickAragua"}, "path": "MekHQ/src/mekhq/campaign/parts/ProtomekSensor.java", "diffHunk": "@@ -72,7 +70,7 @@ public Money getStickerPrice() {\n     @Override\n     public boolean isSamePartType (Part part) {\n         return part instanceof ProtomekSensor\n-                && getUnitTonnage() == ((ProtomekSensor)part).getUnitTonnage();\n+                && getUnitTonnage() == part.getUnitTonnage();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34d95735aaeeebad5747cf2e4c83ef66e5c60952"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzYwMTEwMw==", "bodyText": "Double check that this doesn't have an implementation of getUnitTonnage()", "url": "https://github.com/MegaMek/mekhq/pull/2134#discussion_r503601103", "createdAt": "2020-10-13T00:23:24Z", "author": {"login": "NickAragua"}, "path": "MekHQ/src/mekhq/campaign/parts/SpacecraftEngine.java", "diffHunk": "@@ -124,12 +122,12 @@ public Money getStickerPrice() {\n     public boolean isSamePartType(Part part) {\n         return part instanceof SpacecraftEngine\n                 && getName().equals(part.getName())\n-                && getTonnage() == ((SpacecraftEngine)part).getTonnage();\n+                && getTonnage() == part.getTonnage();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34d95735aaeeebad5747cf2e4c83ef66e5c60952"}, "originalPosition": 99}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzYwMTE3Nw==", "bodyText": "Double check that this doesn't have an implementation of getUnitTonnage()", "url": "https://github.com/MegaMek/mekhq/pull/2134#discussion_r503601177", "createdAt": "2020-10-13T00:23:39Z", "author": {"login": "NickAragua"}, "path": "MekHQ/src/mekhq/campaign/parts/TankLocation.java", "diffHunk": "@@ -104,8 +103,8 @@ protected void computeCost () {\n     @Override\n     public boolean isSamePartType(Part part) {\n         return part instanceof TankLocation\n-                && getLoc() == ((TankLocation)part).getLoc()\n-                && getUnitTonnage() == ((TankLocation)part).getUnitTonnage();\n+                && getLoc() == ((TankLocation) part).getLoc()\n+                && getUnitTonnage() == part.getUnitTonnage();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34d95735aaeeebad5747cf2e4c83ef66e5c60952"}, "originalPosition": 60}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzYwMTc3Mw==", "bodyText": "Do all physical weapons have a club flag? Not that this PR will make it any worse, just curious.", "url": "https://github.com/MegaMek/mekhq/pull/2134#discussion_r503601773", "createdAt": "2020-10-13T00:25:52Z", "author": {"login": "NickAragua"}, "path": "MekHQ/src/mekhq/campaign/work/IPartWork.java", "diffHunk": "@@ -85,39 +85,41 @@ default boolean canChangeWorkMode() {\n      * @return A string containing details regarding the part.\n      */\n     String getDetails(boolean includeRepairDetails);\n+\n     int getLocation();\n-    \n+\n     Unit getUnit();\n-    \n+\n     boolean isSalvaging();\n-    \n+\n     String checkFixable();\n-    \n+\n     void reservePart();\n+\n     void cancelReservation();\n+\n     boolean isBeingWorkedOn();\n-    \n-    int getMassRepairOptionType();\n-    int getRepairPartType();\n-    \n-    public static int findCorrectMassRepairType(IPartWork part) {\n-        if (part instanceof EquipmentPart && ((EquipmentPart)part).getType() instanceof WeaponType) {\n-            return Part.REPAIR_PART_TYPE.WEAPON;\n-        } else {            \n+\n+    PartRepairType getMassRepairOptionType();\n+\n+    PartRepairType getRepairPartType();\n+\n+    static PartRepairType findCorrectMassRepairType(IPartWork part) {\n+        if ((part instanceof EquipmentPart) && (((EquipmentPart) part).getType() instanceof WeaponType)) {\n+            return PartRepairType.WEAPON;\n+        } else {\n             return part.getMassRepairOptionType();\n         }\n     }\n-    \n-    public static int findCorrectRepairType(IPartWork part) {\n-        if ((part instanceof EquipmentPart && ((EquipmentPart)part).getType() instanceof WeaponType) ||\n-                (part instanceof MissingEquipmentPart && ((MissingEquipmentPart)part).getType() instanceof WeaponType)) {\n-            return Part.REPAIR_PART_TYPE.WEAPON;\n+\n+    static PartRepairType findCorrectRepairType(IPartWork part) {\n+        if (((part instanceof EquipmentPart) && (((EquipmentPart) part).getType() instanceof WeaponType))\n+                || ((part instanceof MissingEquipmentPart) && (((MissingEquipmentPart) part).getType() instanceof WeaponType))) {\n+            return PartRepairType.WEAPON;\n+        } else if ((part instanceof EquipmentPart) && (((EquipmentPart) part).getType().hasFlag(MiscType.F_CLUB))) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34d95735aaeeebad5747cf2e4c83ef66e5c60952"}, "originalPosition": 137}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzYwMTg1NQ==", "bodyText": "What's with the addition of the 'version' parameter?", "url": "https://github.com/MegaMek/mekhq/pull/2134#discussion_r503601855", "createdAt": "2020-10-13T00:26:16Z", "author": {"login": "NickAragua"}, "path": "MekHQ/src/mekhq/gui/CampaignGUI.java", "diffHunk": "@@ -2285,7 +2285,7 @@ protected void loadOptionsFile() {\n             String xn = wn.getNodeName();\n \n             if (xn.equalsIgnoreCase(\"campaignOptions\")) {\n-                options = CampaignOptions.generateCampaignOptionsFromXml(wn);\n+                options = CampaignOptions.generateCampaignOptionsFromXml(wn, version);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34d95735aaeeebad5747cf2e4c83ef66e5c60952"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dbae89e405a2378049c716a0e75a966b72a5a9b0", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/dbae89e405a2378049c716a0e75a966b72a5a9b0", "committedDate": "2020-10-15T13:49:25Z", "message": "Merge remote-tracking branch 'upstream/master' into dev_Windchild_PartRepairType"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "efc2a553858de7b5c251dc3b6f5401c5082bc190", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/efc2a553858de7b5c251dc3b6f5401c5082bc190", "committedDate": "2020-10-15T14:43:19Z", "message": "Applying changes per review"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a964c660567c06cd373b583abfe536f1ea396dfe", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/a964c660567c06cd373b583abfe536f1ea396dfe", "committedDate": "2020-10-21T00:55:18Z", "message": "Merge branch 'master' into dev_Windchild_PartRepairType"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3497fc1241221a09d3795363113d240daa017a52", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/3497fc1241221a09d3795363113d240daa017a52", "committedDate": "2020-10-25T15:44:53Z", "message": "Fixing merge conflicts"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3OTg5NDI0", "url": "https://github.com/MegaMek/mekhq/pull/2134#pullrequestreview-517989424", "createdAt": "2020-10-27T17:52:23Z", "commit": {"oid": "3497fc1241221a09d3795363113d240daa017a52"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxNzo1MjoyM1rOHpJUOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxNzo1ODoxNlrOHpJm4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjkwNjI5OA==", "bodyText": "Future note: these sorts of changes have been making it difficult to keep some of my branches up to date. Lots of merge conflicts unrelated to changes.", "url": "https://github.com/MegaMek/mekhq/pull/2134#discussion_r512906298", "createdAt": "2020-10-27T17:52:23Z", "author": {"login": "sixlettervariables"}, "path": "MekHQ/src/mekhq/campaign/parts/MissingEnginePart.java", "diffHunk": "@@ -267,17 +266,16 @@ public boolean isInLocation(String loc) {\n              case Engine.XXL_ENGINE:\n                  needsSideTorso = true;\n                  break;\n+             default:\n+                 break;\n          }\n-         if (needsSideTorso\n-                 && (unit.getEntity().getLocationFromAbbr(loc) == Mech.LOC_LT\n-                         || unit.getEntity().getLocationFromAbbr(loc) == Mech.LOC_RT)) {\n-             return true;\n-         }\n-         return false;\n+        return needsSideTorso\n+                && ((unit.getEntity().getLocationFromAbbr(loc) == Mech.LOC_LT)\n+                || (unit.getEntity().getLocationFromAbbr(loc) == Mech.LOC_RT));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3497fc1241221a09d3795363113d240daa017a52"}, "originalPosition": 383}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjkwOTM1Mg==", "bodyText": "This change will certainly get me on a merge as I'm reworking a lot of this.", "url": "https://github.com/MegaMek/mekhq/pull/2134#discussion_r512909352", "createdAt": "2020-10-27T17:56:11Z", "author": {"login": "sixlettervariables"}, "path": "MekHQ/src/mekhq/campaign/parts/equipment/AmmoBin.java", "diffHunk": "@@ -701,17 +698,13 @@ public static int getAmountAvailable(Campaign campaign, AmmoType ammoType) {\n         if (campaign.getCampaignOptions().useAmmoByType()) {\n             Predicate<Part> predicate;\n             if (AmmoBin.ALLOWED_BY_TYPE.contains(ammoType.getAmmoType())) {\n-                predicate = part -> {\n-                    return part instanceof AmmoStorage\n-                            && ammoType.equalsAmmoTypeOnly(((AmmoStorage) part).getType())\n-                            && ammoType.getMunitionType() == ((AmmoType) ((AmmoStorage) part).getType()).getMunitionType();\n-                };\n+                predicate = part -> part instanceof AmmoStorage\n+                        && ammoType.equalsAmmoTypeOnly(((AmmoStorage) part).getType())\n+                        && ammoType.getMunitionType() == ((AmmoType) ((AmmoStorage) part).getType()).getMunitionType();\n             } else {\n-                predicate = part -> {\n-                    return part instanceof AmmoStorage\n-                            && ammoType.equals(((AmmoStorage) part).getType())\n-                            && ammoType.getMunitionType() == ((AmmoType) ((AmmoStorage) part).getType()).getMunitionType();\n-                };", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3497fc1241221a09d3795363113d240daa017a52"}, "originalPosition": 393}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjkxMTA3NA==", "bodyText": "Can we add an issue to track this fix?", "url": "https://github.com/MegaMek/mekhq/pull/2134#discussion_r512911074", "createdAt": "2020-10-27T17:58:16Z", "author": {"login": "sixlettervariables"}, "path": "MekHQ/src/mekhq/service/MassRepairOption.java", "diffHunk": "@@ -134,7 +132,14 @@ public void writeToXML(PrintWriter pw1, int indent) {\n \n             try {\n                 MassRepairOption mro = parseFromXML(mroNode);\n-                if ((mro.getType() == -1) || (mro.getType() >= VALID_REPAIR_TYPES.length)) {\n+\n+                // This fixes a migration issue from 0.47.10 to 0.47.11, and will need to be implemented\n+                // properly in future.\n+                if (mro.getType() == PartRepairType.HEAT_SINK) {\n+                    mro.setType(PartRepairType.POD_SPACE);\n+                }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3497fc1241221a09d3795363113d240daa017a52"}, "originalPosition": 81}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "598a5a2661d634e74cc8b53b041431df8f89977b", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/598a5a2661d634e74cc8b53b041431df8f89977b", "committedDate": "2020-11-06T21:43:20Z", "message": "Fixing merge conflicts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d9a8228aa8b2536133b0d41bf585c91202b4b7e4", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/d9a8228aa8b2536133b0d41bf585c91202b4b7e4", "committedDate": "2020-12-04T16:55:02Z", "message": "Fixing merge conflicts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d68e105297f2b8e24ec85d743f08caca59bf2f0f", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/d68e105297f2b8e24ec85d743f08caca59bf2f0f", "committedDate": "2020-12-04T17:15:59Z", "message": "Implementing properly versioned migration"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "67d0c1af0790eceab223c5731e1252d94a93b423", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/mekhq/commit/67d0c1af0790eceab223c5731e1252d94a93b423", "committedDate": "2020-12-13T17:35:10Z", "message": "Fixing merge conflicts"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2NDQyNTI1", "url": "https://github.com/MegaMek/mekhq/pull/2134#pullrequestreview-556442525", "createdAt": "2020-12-21T15:02:15Z", "commit": {"oid": "67d0c1af0790eceab223c5731e1252d94a93b423"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4010, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}