{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY1MjgzNzQ4", "number": 3602, "title": "Update repeat language", "bodyText": "This updates the language used in the repeat dialog to be in line with the prototype found here.\nI've also made it so the repeat dialog text will not be different based on the number of previous repeats - it will always be Add \"<repeat-name>\"?. Before it would read as \"Add new...\" or \"Add another...\" depending on if a repeat has already been added. One of the pieces of feedback (during research) was that \"new\" had confused enumerators as it made them think they had actually already added one. As this is feels like a bit more of an experimental change and I still think we should have the other versions (Add new... and Add another...) translated I've put this behind a feature flag that will make it a one line change to revert if we get negative feedback on it during beta.\nWhat has been done to verify that this works as intended?\nRan through a couple of different repeat forms to check nothing has broken.\nWhy is this the best possible solution? Were any other approaches considered?\nAs before this was driven out by a research round.\nHow does this change affect users? Describe intentional changes to behavior and behavior that could have accidentally been affected by code changes. In other words, what are the regression risks?\nShould only effect the repeat dialog but good to have play with repeat forms (\"Birds\" for example).\nBefore submitting this PR, please make sure you have:\n\n run ./gradlew checkAll and confirmed all checks still pass OR confirm CircleCI build passes and run ./gradlew connectedDebugAndroidTest locally.\n verified that any code or assets from external sources are properly credited in comments and/or in the about file.\n verified that any new UI elements use theme colors. UI Components Style guidelines", "createdAt": "2020-01-21T12:39:12Z", "url": "https://github.com/getodk/collect/pull/3602", "merged": true, "mergeCommit": {"oid": "d4b63cc48604d9ecf359ca37abad7b042fabbe61"}, "closed": true, "closedAt": "2020-01-27T09:21:44Z", "author": {"login": "seadowg"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb6-QESAH2gAyMzY1MjgzNzQ4OjNkNjA0ZDZhZGU1NzA5OGMxMGYzOGZmNDMwZWFjOGE2NzNhNjEzMWU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb9dmangH2gAyMzY1MjgzNzQ4OjZhZjc0NjgxNzAzZThhODNjYjNjYzQzZDM2MmQyOGQxY2MwNmVmMzE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3d604d6ade57098c10f38ff430eac8a673a6131e", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/3d604d6ade57098c10f38ff430eac8a673a6131e", "committedDate": "2020-01-16T18:14:12Z", "message": "Move repeat dialog to its own class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3927460b30dd6c638708988f7fbe5333383eaad7", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/3927460b30dd6c638708988f7fbe5333383eaad7", "committedDate": "2020-01-16T18:19:04Z", "message": "Simplify language for repeat dialog"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "194ab2c383e06e7189a49eb58f4de28a9210824c", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/194ab2c383e06e7189a49eb58f4de28a9210824c", "committedDate": "2020-01-16T18:36:02Z", "message": "Simplify language for repeat dialog"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "09b5619c7075011648063b3b7a4f59b65c9b7f2b", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/09b5619c7075011648063b3b7a4f59b65c9b7f2b", "committedDate": "2020-01-20T17:38:25Z", "message": "Make sure tests use translated repeat language"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e508c9b53d501b44b1b54819529b41ca571778b", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/1e508c9b53d501b44b1b54819529b41ca571778b", "committedDate": "2020-01-20T18:26:18Z", "message": "Stop changing add repeat language based on previous number"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ1ODQ2ODgz", "url": "https://github.com/getodk/collect/pull/3602#pullrequestreview-345846883", "createdAt": "2020-01-21T12:41:37Z", "commit": {"oid": "1e508c9b53d501b44b1b54819529b41ca571778b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxMjo0MTozOFrOFf4meA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxMjo0MTozOFrOFf4meA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODk3NzUyOA==", "bodyText": "This is just using a very simple static feature flag. If we were looking at having tests for both behaviours I'd generally look at having a FeatureFlag object that could be passed to objects that need it.", "url": "https://github.com/getodk/collect/pull/3602#discussion_r368977528", "createdAt": "2020-01-21T12:41:38Z", "author": {"login": "seadowg"}, "path": "collect_app/src/main/java/org/odk/collect/android/application/FeatureFlags.java", "diffHunk": "@@ -0,0 +1,10 @@\n+package org.odk.collect.android.application;\n+\n+public class FeatureFlags {\n+\n+    public static final boolean STATIC_ADD_REPEAT_LANGUAGE = true;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1e508c9b53d501b44b1b54819529b41ca571778b"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5738b93b18ae060ab952573ac3406c9219e15469", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/5738b93b18ae060ab952573ac3406c9219e15469", "committedDate": "2020-01-23T16:55:58Z", "message": "Remove feature flag"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ab64d0bb5a072d157ab02b317df96581f6ce6d98", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/ab64d0bb5a072d157ab02b317df96581f6ce6d98", "committedDate": "2020-01-23T17:23:17Z", "message": "Make repeat dialog buttons clearer"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b1a25de691e6e41c102c07690af4b587abc1415f", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/b1a25de691e6e41c102c07690af4b587abc1415f", "committedDate": "2020-01-23T17:26:45Z", "message": "Add comment to explain repeat question to translaters"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3NDgzODE0", "url": "https://github.com/getodk/collect/pull/3602#pullrequestreview-347483814", "createdAt": "2020-01-23T17:37:57Z", "commit": {"oid": "b1a25de691e6e41c102c07690af4b587abc1415f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxNzozNzo1N1rOFhG2Pg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxNzozNzo1N1rOFhG2Pg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDI1OTUxOA==", "bodyText": "clickOnAddRepeat or just clickOnAdd?", "url": "https://github.com/getodk/collect/pull/3602#discussion_r370259518", "createdAt": "2020-01-23T17:37:57Z", "author": {"login": "lognaturel"}, "path": "collect_app/src/androidTest/java/org/odk/collect/android/support/pages/AddNewRepeatDialog.java", "diffHunk": "@@ -0,0 +1,37 @@\n+package org.odk.collect.android.support.pages;\n+\n+import androidx.test.rule.ActivityTestRule;\n+\n+import org.odk.collect.android.R;\n+\n+import static androidx.test.espresso.Espresso.onView;\n+import static androidx.test.espresso.assertion.ViewAssertions.matches;\n+import static androidx.test.espresso.matcher.ViewMatchers.isDisplayed;\n+import static androidx.test.espresso.matcher.ViewMatchers.withText;\n+\n+public class AddNewRepeatDialog extends Page<AddNewRepeatDialog> {\n+\n+    private final String repeatName;\n+\n+    AddNewRepeatDialog(String repeatName, ActivityTestRule rule) {\n+        super(rule);\n+        this.repeatName = repeatName;\n+    }\n+\n+    @Override\n+    public AddNewRepeatDialog assertOnPage() {\n+        onView(withText(getTranslatedString(R.string.add_repeat_question, repeatName))).check(matches(isDisplayed()));\n+        return this;\n+    }\n+\n+    public FormEntryPage clickOnAddGroup(FormEntryPage destination) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b1a25de691e6e41c102c07690af4b587abc1415f"}, "originalPosition": 27}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3NDgzOTc1", "url": "https://github.com/getodk/collect/pull/3602#pullrequestreview-347483975", "createdAt": "2020-01-23T17:38:13Z", "commit": {"oid": "b1a25de691e6e41c102c07690af4b587abc1415f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxNzozODoxNFrOFhG2ww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxNzozODoxNFrOFhG2ww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDI1OTY1MQ==", "bodyText": "Same as above.", "url": "https://github.com/getodk/collect/pull/3602#discussion_r370259651", "createdAt": "2020-01-23T17:38:14Z", "author": {"login": "lognaturel"}, "path": "collect_app/src/androidTest/java/org/odk/collect/android/support/pages/AddNewRepeatDialog.java", "diffHunk": "@@ -0,0 +1,37 @@\n+package org.odk.collect.android.support.pages;\n+\n+import androidx.test.rule.ActivityTestRule;\n+\n+import org.odk.collect.android.R;\n+\n+import static androidx.test.espresso.Espresso.onView;\n+import static androidx.test.espresso.assertion.ViewAssertions.matches;\n+import static androidx.test.espresso.matcher.ViewMatchers.isDisplayed;\n+import static androidx.test.espresso.matcher.ViewMatchers.withText;\n+\n+public class AddNewRepeatDialog extends Page<AddNewRepeatDialog> {\n+\n+    private final String repeatName;\n+\n+    AddNewRepeatDialog(String repeatName, ActivityTestRule rule) {\n+        super(rule);\n+        this.repeatName = repeatName;\n+    }\n+\n+    @Override\n+    public AddNewRepeatDialog assertOnPage() {\n+        onView(withText(getTranslatedString(R.string.add_repeat_question, repeatName))).check(matches(isDisplayed()));\n+        return this;\n+    }\n+\n+    public FormEntryPage clickOnAddGroup(FormEntryPage destination) {\n+        clickOnString(R.string.add_repeat);\n+        return destination;\n+    }\n+\n+    public FormEntryPage clickOnDoNotAddGroup(FormEntryPage destination) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b1a25de691e6e41c102c07690af4b587abc1415f"}, "originalPosition": 32}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3NTE1NTE4", "url": "https://github.com/getodk/collect/pull/3602#pullrequestreview-347515518", "createdAt": "2020-01-23T18:30:04Z", "commit": {"oid": "b1a25de691e6e41c102c07690af4b587abc1415f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3OTAyNTE2", "url": "https://github.com/getodk/collect/pull/3602#pullrequestreview-347902516", "createdAt": "2020-01-24T11:44:42Z", "commit": {"oid": "b1a25de691e6e41c102c07690af4b587abc1415f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6af74681703e8a83cb3cc43d362d28d1cc06ef31", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/6af74681703e8a83cb3cc43d362d28d1cc06ef31", "committedDate": "2020-01-24T11:53:31Z", "message": "Update page methods"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2249, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}