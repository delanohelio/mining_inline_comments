{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYxNTU5NTE0", "number": 3580, "title": "Focus on textfield on ServerUrl, Username, Password and shows keyboard.", "bodyText": "Closes #3502\n\nWhat has been done to verify that this works as intended?\nThe issue was that when clicked on preference(ServerUrl) it didn't set focus on edit text and show the keyboard\nBefore:\n\n\nAfter:\n\n\nWhy is this the best possible solution? Were any other approaches considered?\nI tried other methods(implementing Preference.OnPreferenceClickListener() and directly setting focus ) but only this works.\nHow does this change affect users? Describe intentional changes to behaviour and behaviour that could have accidentally been affected by code changes. In other words, what are the regression risks?\nNow it will automatically set focus on edit text so user doesn't need to click again.\nDo we need any specific form for testing your changes? If so, please attach one.\nNo, it does not need any specific testing.\nDoes this change require updates to documentation? If so, please file an issue here and include the link below.\nNo, it does not require any change in the document.\nBefore submitting this PR, please make sure you have:\n\n run ./gradlew checkAll and confirmed all checks still pass OR confirm CircleCI build passes and run ./gradlew connectedDebugAndroidTest locally.\n verified that any code or assets from external sources are properly credited in comments and/or in the about file.\n verified that any new UI elements use theme colors. UI Components Style guidelines", "createdAt": "2020-01-10T17:54:12Z", "url": "https://github.com/getodk/collect/pull/3580", "merged": true, "mergeCommit": {"oid": "5f7899b3065b88270b6d8354ab77ba8f631787ad"}, "closed": true, "closedAt": "2020-01-28T10:38:34Z", "author": {"login": "Vivever"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb5A8tBgH2gAyMzYxNTU5NTE0OjlkM2Y1MjlmZTJjZDUzNWUzY2NhMTgxYjBlMjZmNzU2MzVhZmFhZGU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb-cd5jAFqTM0ODY0NzY2OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9d3f529fe2cd535e3cca181b0e26f75635afaade", "author": {"user": {"login": "Vivever", "name": "VIVEK VERMA"}}, "url": "https://github.com/getodk/collect/commit/9d3f529fe2cd535e3cca181b0e26f75635afaade", "committedDate": "2020-01-10T16:14:55Z", "message": "Merge pull request #1 from opendatakit/master\n\nUpdating my repo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f7d1ed3f62cc5eadf34f69ec1c164fa80576ef23", "author": {"user": {"login": "Vivever", "name": "VIVEK VERMA"}}, "url": "https://github.com/getodk/collect/commit/f7d1ed3f62cc5eadf34f69ec1c164fa80576ef23", "committedDate": "2020-01-10T17:17:00Z", "message": "Add focus on Server Url,UserName and Password in Server Setting and show keyboard"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxODY4NDU0", "url": "https://github.com/getodk/collect/pull/3580#pullrequestreview-341868454", "createdAt": "2020-01-13T14:10:37Z", "commit": {"oid": "f7d1ed3f62cc5eadf34f69ec1c164fa80576ef23"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxNDoxMDozN1rOFc4EEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxNDoxMDozN1rOFc4EEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTgyMjk5NQ==", "bodyText": "This code looks right to me but I think these listeners should be setup in addAggregatePreferences along with the rest of the setup for each Preference.\nI handn't noticed @grzesiek2010's comment. I think he's right that we should investigate the default behaviour here and understand if this is a problem just for our app or not. If we do go with this solution though I think it's good to move this listener setup to addAggregatePreferences along with the rest of the setup for each Preference.", "url": "https://github.com/getodk/collect/pull/3580#discussion_r365822995", "createdAt": "2020-01-13T14:10:37Z", "author": {"login": "seadowg"}, "path": "collect_app/src/main/java/org/odk/collect/android/preferences/ServerPreferencesFragment.java", "diffHunk": "@@ -490,4 +490,21 @@ private void continueOnBackPressed() {\n     public void doBack() {\n         runGoogleAccountValidation();\n     }\n+\n+    @Override\n+    public void onResume() {\n+        super.onResume();\n+        serverUrlPreference.setOnPreferenceClickListener(preference -> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f7d1ed3f62cc5eadf34f69ec1c164fa80576ef23"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "61bdfe7154641c649057aca93f42240777b8e443", "author": {"user": {"login": "Vivever", "name": "VIVEK VERMA"}}, "url": "https://github.com/getodk/collect/commit/61bdfe7154641c649057aca93f42240777b8e443", "committedDate": "2020-01-17T14:09:12Z", "message": "Add focus on all applicable preferences.\nDereference the preference references as they are causing memory leak."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ1MjczOTM5", "url": "https://github.com/getodk/collect/pull/3580#pullrequestreview-345273939", "createdAt": "2020-01-20T12:26:00Z", "commit": {"oid": "61bdfe7154641c649057aca93f42240777b8e443"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQxMjoyNjowMFrOFfcw9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQxMjoyNjowMFrOFfcw9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODUyMTQ2MQ==", "bodyText": "Thanks for looking at that @Vivever! As far as I can see there are still a few fields in \"User and device identity\" > \"Form metadata\".\nAs I said before it'd be better not to call setPreferenceClickListener in onResume. These should probably go with the rest of the preference setup in ServerPreferencesFragment#addAggregatePreferences. In other fragments it can just be in onCreate. You shouldn't need to setPreferenceClickListener(null) either as the preference object won't (as far as I know) outlive the Fragment in memory.", "url": "https://github.com/getodk/collect/pull/3580#discussion_r368521461", "createdAt": "2020-01-20T12:26:00Z", "author": {"login": "seadowg"}, "path": "collect_app/src/main/java/org/odk/collect/android/preferences/ServerPreferencesFragment.java", "diffHunk": "@@ -490,4 +490,21 @@ private void continueOnBackPressed() {\n     public void doBack() {\n         runGoogleAccountValidation();\n     }\n+\n+    @Override\n+    public void onResume() {\n+        super.onResume();\n+        serverUrlPreference.setOnPreferenceClickListener(preference -> {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTgyMjk5NQ=="}, "originalCommit": {"oid": "f7d1ed3f62cc5eadf34f69ec1c164fa80576ef23"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f45cf244a9016bafbe4fb72fb0c9b92db6426c2f", "author": {"user": {"login": "Vivever", "name": "VIVEK VERMA"}}, "url": "https://github.com/getodk/collect/commit/f45cf244a9016bafbe4fb72fb0c9b92db6426c2f", "committedDate": "2020-01-24T12:05:20Z", "message": "Add focus to remaining EditTextPreference"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4NjQ3NjY4", "url": "https://github.com/getodk/collect/pull/3580#pullrequestreview-348647668", "createdAt": "2020-01-27T13:08:15Z", "commit": {"oid": "f45cf244a9016bafbe4fb72fb0c9b92db6426c2f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2234, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}