{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk5NDU4MDEz", "number": 3765, "title": "Friendly error message when submissions closed.", "bodyText": "Signed-off-by: Rajkumar S rajkumaar2304@icloud.com\nCloses #3428\nWhat has been done to verify that this works as intended?\n\nA form was created on ODK aggregate and tried to submit from ODK collect, it works.\nThe same form was turned off for submissions, and then a friendly error message pops up.\n\n\nWhy is this the best possible solution? Were any other approaches considered?\n\nChanging the error message like this was the best solution.\n\nHow does this change affect users? Describe intentional changes to behavior and behavior that could have accidentally been affected by code changes. In other words, what are the regression risks?\n\nIt lets the users get a more human-friendly feedback.\n\nDo we need any specific form for testing your changes? If so, please attach one.\n\nNo, any form that is turned off for submissions is good to test.\n\nDoes this change require updates to documentation? If so, please file an issue here and include the link below.\n\nNo\n\nBefore submitting this PR, please make sure you have:\n\n run ./gradlew checkAll and confirmed all checks still pass OR confirm CircleCI build passes and run ./gradlew connectedDebugAndroidTest locally.\n verified that any code or assets from external sources are properly credited in comments and/or in the about file.\n verified that any new UI elements use theme colors. UI Components Style guidelines", "createdAt": "2020-04-06T08:08:15Z", "url": "https://github.com/getodk/collect/pull/3765", "merged": true, "mergeCommit": {"oid": "c4728059452b25ed56b68adf2413d50ba2b0c70c"}, "closed": true, "closedAt": "2020-05-07T08:37:31Z", "author": {"login": "rajkumaar23"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcU52ZFAH2gAyMzk5NDU4MDEzOjBmYTVlYjgzYjI1NTQyM2YyYWU2N2IyODE1MDQxYTE5ZGU4ZGQyMzM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABce5H-zgFqTQwNzI2MjEzNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0fa5eb83b255423f2ae67b2815041a19de8dd233", "author": {"user": {"login": "rajkumaar23", "name": "Rajkumar S"}}, "url": "https://github.com/getodk/collect/commit/0fa5eb83b255423f2ae67b2815041a19de8dd233", "committedDate": "2020-04-06T07:48:34Z", "message": "Friendly error message when submissions closed. Fixes #3428\n\nSigned-off-by: Rajkumar S <rajkumaar2304@icloud.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg4MjIzMzE1", "url": "https://github.com/getodk/collect/pull/3765#pullrequestreview-388223315", "createdAt": "2020-04-06T12:59:46Z", "commit": {"oid": "0fa5eb83b255423f2ae67b2815041a19de8dd233"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxMjo1OTo0NlrOGBWf9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxMjo1OTo0NlrOGBWf9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDA3MDM5MA==", "bodyText": "I'd imagine there are other errors that can happen here. Would you be able to investigate and see if you can find how to \"detect\" that we are seeing a \"submission closed\" error? Potentially the HTTP response code is a way for us to make that decision. Once we have that I think we'd want to have a test that for the decision in place. Happy to chat about the best way to do that \ud83d\ude01", "url": "https://github.com/getodk/collect/pull/3765#discussion_r404070390", "createdAt": "2020-04-06T12:59:46Z", "author": {"login": "seadowg"}, "path": "collect_app/src/main/java/org/odk/collect/android/upload/InstanceServerUploader.java", "diffHunk": "@@ -205,8 +205,8 @@ public String uploadOneSubmission(Instance instance, String urlString) throws Up\n                     if (messageParser.isValid()) {\n                         exception = new UploadException(FAIL + messageParser.getMessageResponse());\n                     } else {\n-                        exception = new UploadException(FAIL + postResult.getReasonPhrase()\n-                                + \" (\" + responseCode + \") at \" + urlString);\n+                        Timber.i(FAIL + postResult.getReasonPhrase() + \" (\" + responseCode + \") at \" + urlString);\n+                        exception = new UploadException(\"Failed to upload. Please make sure the form is configured to accept submissions on the server\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0fa5eb83b255423f2ae67b2815041a19de8dd233"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "15f42698d84e4feb99a4cb7816a86dc8839b8f04", "author": {"user": {"login": "rajkumaar23", "name": "Rajkumar S"}}, "url": "https://github.com/getodk/collect/commit/15f42698d84e4feb99a4cb7816a86dc8839b8f04", "committedDate": "2020-05-05T04:46:02Z", "message": "Minor tweaks\n\nSigned-off-by: Rajkumar S <rajkumaar2304@icloud.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b921f29cdb8be50bd0d468380c09282884eeeeae", "author": {"user": {"login": "rajkumaar23", "name": "Rajkumar S"}}, "url": "https://github.com/getodk/collect/commit/b921f29cdb8be50bd0d468380c09282884eeeeae", "committedDate": "2020-05-05T10:31:05Z", "message": "Code style fixes\n\nSigned-off-by: Rajkumar S <rajkumaar2304@icloud.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA2MDQ4MDAx", "url": "https://github.com/getodk/collect/pull/3765#pullrequestreview-406048001", "createdAt": "2020-05-05T18:27:33Z", "commit": {"oid": "b921f29cdb8be50bd0d468380c09282884eeeeae"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA3MjYyMTM2", "url": "https://github.com/getodk/collect/pull/3765#pullrequestreview-407262136", "createdAt": "2020-05-07T08:37:07Z", "commit": {"oid": "b921f29cdb8be50bd0d468380c09282884eeeeae"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2643, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}