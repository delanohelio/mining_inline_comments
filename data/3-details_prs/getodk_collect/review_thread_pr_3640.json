{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc1NDQ2MTIx", "number": 3640, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxOToxMjowNVrODhL_Jg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQyMDoxMzowM1rODhNMpQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM2MTI1OTkwOnYy", "diffSide": "RIGHT", "path": "collect_app/src/main/AndroidManifest.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxOToxMjowNVrOFr0D9w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwOToxOTowNFrOFsLqRA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTQ4NjA3MQ==", "bodyText": "This should be above the External API comment. I'd tend to group it with others in the preferences package.", "url": "https://github.com/getodk/collect/pull/3640#discussion_r381486071", "createdAt": "2020-02-19T19:12:05Z", "author": {"login": "lognaturel"}, "path": "collect_app/src/main/AndroidManifest.xml", "diffHunk": "@@ -285,5 +285,6 @@ the specific language governing permissions and limitations under the License.\n                 <category android:name=\"android.intent.category.DEFAULT\" />\n             </intent-filter>\n         </activity>\n+        <activity android:name=\".preferences.FormMetadataPreferencesActivity\" />", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ef373e7bd5caef58feae7ff5d8231e567f6db99d"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTg3MjcwOA==", "bodyText": "Ah sorry yes this was just auto generated. But good catch as that's how these files get so messy!", "url": "https://github.com/getodk/collect/pull/3640#discussion_r381872708", "createdAt": "2020-02-20T09:19:04Z", "author": {"login": "seadowg"}, "path": "collect_app/src/main/AndroidManifest.xml", "diffHunk": "@@ -285,5 +285,6 @@ the specific language governing permissions and limitations under the License.\n                 <category android:name=\"android.intent.category.DEFAULT\" />\n             </intent-filter>\n         </activity>\n+        <activity android:name=\".preferences.FormMetadataPreferencesActivity\" />", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTQ4NjA3MQ=="}, "originalCommit": {"oid": "ef373e7bd5caef58feae7ff5d8231e567f6db99d"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM2MTI5MDEzOnYy", "diffSide": "RIGHT", "path": "collect_app/src/main/res/values/strings.xml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxOToyMToxOVrOFr0XlQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwOToyMzo1OFrOFsL1OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTQ5MTA5Mw==", "bodyText": "Does the hyphen seem wrong to you? These are compound words so the hyphen is required at least by APA guidelines. Maybe it's a regional thing?\nChanging these strings means they'll be pushed out to translators. If translators don't re-translate them before the release then they'll show up in English instead.", "url": "https://github.com/getodk/collect/pull/3640#discussion_r381491093", "createdAt": "2020-02-19T19:21:19Z", "author": {"login": "lognaturel"}, "path": "collect_app/src/main/res/values/strings.xml", "diffHunk": "@@ -484,8 +484,8 @@\n     <string name=\"form_metadata_summary\">These values will be added to forms that have username, email and/or telephone preloaded fields to identify the person submitting data.</string>\n     <string name=\"phone_number\">Phone number</string>\n     <string name=\"email\">Email address</string>\n-    <string name=\"user_defined\">User-defined</string>\n-    <string name=\"device_defined\">Device-defined</string>\n+    <string name=\"user_defined\">User defined</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0b0e99b9ae21bbd4bcb03833bd0dacc9fec03e9b"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTg3NTUxMw==", "bodyText": "Hmmm yeah it feels wrong to me as a title (rather than in a sentence). Are we using that as a language guide for English? Would be good to reference that.", "url": "https://github.com/getodk/collect/pull/3640#discussion_r381875513", "createdAt": "2020-02-20T09:23:58Z", "author": {"login": "seadowg"}, "path": "collect_app/src/main/res/values/strings.xml", "diffHunk": "@@ -484,8 +484,8 @@\n     <string name=\"form_metadata_summary\">These values will be added to forms that have username, email and/or telephone preloaded fields to identify the person submitting data.</string>\n     <string name=\"phone_number\">Phone number</string>\n     <string name=\"email\">Email address</string>\n-    <string name=\"user_defined\">User-defined</string>\n-    <string name=\"device_defined\">Device-defined</string>\n+    <string name=\"user_defined\">User defined</string>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTQ5MTA5Mw=="}, "originalCommit": {"oid": "0b0e99b9ae21bbd4bcb03833bd0dacc9fec03e9b"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM2MTQ1ODI5OnYy", "diffSide": "RIGHT", "path": "collect_app/src/main/java/org/odk/collect/android/injection/config/AppDependencyModule.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQyMDoxMzowM1rOFr2BhQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwOTo1MDo1OFrOFsMxuw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTUxODIxMw==", "bodyText": "I think that this is good but I'm concerned that it will get lost and forgotten. How about marking KEYS_WE_SHOULD_NOT_RESET as deprecated and describing this strategy? Maybe meta should be a constant somewhere?", "url": "https://github.com/getodk/collect/pull/3640#discussion_r381518213", "createdAt": "2020-02-19T20:13:03Z", "author": {"login": "lognaturel"}, "path": "collect_app/src/main/java/org/odk/collect/android/injection/config/AppDependencyModule.java", "diffHunk": "@@ -166,7 +165,7 @@ public ActivityAvailability providesActivityAvailability(Context context) {\n \n     @Provides\n     InstallIDProvider providesInstallIDProvider(Context context) {\n-        SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(context);\n+        SharedPreferences preferences = context.getSharedPreferences(\"meta\", Context.MODE_PRIVATE);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "772ef68b1f14911e1e9e25504ec8223db5a0ce3c"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTg3ODY5Nw==", "bodyText": "Yeah I was in two minds about this as I'm not a fan of the existing shared prefs abstractions and the keys classes. I do agree that it would be nice to have something that makes the meta prefs more discoverable though so they get used for other things. I'll have a think.", "url": "https://github.com/getodk/collect/pull/3640#discussion_r381878697", "createdAt": "2020-02-20T09:29:25Z", "author": {"login": "seadowg"}, "path": "collect_app/src/main/java/org/odk/collect/android/injection/config/AppDependencyModule.java", "diffHunk": "@@ -166,7 +165,7 @@ public ActivityAvailability providesActivityAvailability(Context context) {\n \n     @Provides\n     InstallIDProvider providesInstallIDProvider(Context context) {\n-        SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(context);\n+        SharedPreferences preferences = context.getSharedPreferences(\"meta\", Context.MODE_PRIVATE);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTUxODIxMw=="}, "originalCommit": {"oid": "772ef68b1f14911e1e9e25504ec8223db5a0ce3c"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTg4MjIxMA==", "bodyText": "As a note I'd like to keep the test with a hardcoded/inline as this prevents someone changing the constant (in the code) and the test still passing. It's checking configuration as well as behaviour.", "url": "https://github.com/getodk/collect/pull/3640#discussion_r381882210", "createdAt": "2020-02-20T09:35:24Z", "author": {"login": "seadowg"}, "path": "collect_app/src/main/java/org/odk/collect/android/injection/config/AppDependencyModule.java", "diffHunk": "@@ -166,7 +165,7 @@ public ActivityAvailability providesActivityAvailability(Context context) {\n \n     @Provides\n     InstallIDProvider providesInstallIDProvider(Context context) {\n-        SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(context);\n+        SharedPreferences preferences = context.getSharedPreferences(\"meta\", Context.MODE_PRIVATE);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTUxODIxMw=="}, "originalCommit": {"oid": "772ef68b1f14911e1e9e25504ec8223db5a0ce3c"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTg5MTAwMw==", "bodyText": "I'm going to go with a provider for the meta prefs for now. I didn't want to start building a whole MetaSharedPrefences to mimic the other ones. I like that we have abstraction for prefs storage though so I might follow up with a refactor that pulls out the shared logic around shared prefs and maybe improves the interfaces a little.", "url": "https://github.com/getodk/collect/pull/3640#discussion_r381891003", "createdAt": "2020-02-20T09:50:58Z", "author": {"login": "seadowg"}, "path": "collect_app/src/main/java/org/odk/collect/android/injection/config/AppDependencyModule.java", "diffHunk": "@@ -166,7 +165,7 @@ public ActivityAvailability providesActivityAvailability(Context context) {\n \n     @Provides\n     InstallIDProvider providesInstallIDProvider(Context context) {\n-        SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(context);\n+        SharedPreferences preferences = context.getSharedPreferences(\"meta\", Context.MODE_PRIVATE);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTUxODIxMw=="}, "originalCommit": {"oid": "772ef68b1f14911e1e9e25504ec8223db5a0ce3c"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3482, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}