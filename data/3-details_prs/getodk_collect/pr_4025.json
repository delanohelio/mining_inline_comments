{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY2MzcyMzYz", "number": 4025, "title": "Remove Answer Text View in Url Widget", "bodyText": "This PR updates the UI of the URL widget. As discussed in ODK forum here, the answer text view is removed and user simply sees the button to open the url in the widget.\nAs discussed with @seadowg, this PR does not change the button text for the moment, so Open Url button is shown. As the user is not allowed to change the url, the widget is readonly all times, so I am removing any specific behavior concerning the readonly widget in this PR.\n\nHow does this change affect users? Describe intentional changes to behavior and behavior that could have accidentally been affected by code changes. In other words, what are the regression risks?\nI changed the value fo the string resource open_url to Visit Website, and that change is not migrated to all the other languages of Collect, so this change won't appear good in when the user views the form in a language other than English.\nDo we need any specific form for testing your changes? If so, please attach one.\nAny form having URL Widget like AllWidgetsForm.\nDoes this change require updates to documentation? If so, please file an issue here and include the link below.\nBefore submitting this PR, please make sure you have:\n\n run ./gradlew checkAll and confirmed all checks still pass OR confirm CircleCI build passes and run ./gradlew connectedDebugAndroidTest locally.\n verified that any code or assets from external sources are properly credited in comments and/or in the about file.\n verified that any new UI elements use theme colors. UI Components Style guidelines", "createdAt": "2020-08-11T21:48:01Z", "url": "https://github.com/getodk/collect/pull/4025", "merged": true, "mergeCommit": {"oid": "5474f1efa654724bdf62d9e24cea061b0fd63d59"}, "closed": true, "closedAt": "2020-10-06T07:00:38Z", "author": {"login": "SaumiaSinghal"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdCVVyIgFqTQ3NDM3NjEwMw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdPvnfHABqjM4NDMyNDgwMzg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0Mzc2MTAz", "url": "https://github.com/getodk/collect/pull/4025#pullrequestreview-474376103", "createdAt": "2020-08-25T11:14:35Z", "commit": {"oid": "fcfd637743fdf39b2599d5ed7422b4110998f4e4"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxMToxNDozNlrOHGTNag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxMToxNjo0M1rOHGTROw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjM2ODIzNA==", "bodyText": "As discussed the URL widget should behave exactly the same in read only mode (as it is always \"read only\"). That being the case you shouldn't need any tests for read only for the widget.", "url": "https://github.com/getodk/collect/pull/4025#discussion_r476368234", "createdAt": "2020-08-25T11:14:36Z", "author": {"login": "seadowg"}, "path": "collect_app/src/test/java/org/odk/collect/android/widgets/UrlWidgetTest.java", "diffHunk": "@@ -58,9 +59,9 @@ public void getAnswer_whenPromptHasAnswer_returnsAnswer() {\n     }\n \n     @Test\n-    public void usingReadOnlyOption_makeAllClickableElementsDisabled() {\n+    public void usingReadOnlyOption_doesNotShowUrlButton() {\n         UrlWidget widget = createWidget(promptWithReadOnly());\n-        assertThat(widget.getBinding().urlButton.getVisibility(), equalTo(View.GONE));\n+        assertThat(widget.binding.urlButton.getVisibility(), equalTo(View.GONE));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fcfd637743fdf39b2599d5ed7422b4110998f4e4"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjM2ODc1Mw==", "bodyText": "As in other comments: lets remove any change in behaviour based on isReadOnly", "url": "https://github.com/getodk/collect/pull/4025#discussion_r476368753", "createdAt": "2020-08-25T11:15:37Z", "author": {"login": "seadowg"}, "path": "collect_app/src/main/java/org/odk/collect/android/widgets/UrlWidget.java", "diffHunk": "@@ -44,7 +43,6 @@ public UrlWidget(Context context, QuestionDetails questionDetails, CustomTabHelp\n     @Override\n     protected View onCreateAnswerView(Context context, FormEntryPrompt prompt, int answerFontSize) {\n         binding = UrlWidgetAnswerBinding.inflate(((Activity) context).getLayoutInflater());\n-        View answerView = binding.getRoot();\n \n         if (prompt.isReadOnly()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fcfd637743fdf39b2599d5ed7422b4110998f4e4"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjM2OTIxMQ==", "bodyText": "Lets not change this text at the moment.", "url": "https://github.com/getodk/collect/pull/4025#discussion_r476369211", "createdAt": "2020-08-25T11:16:43Z", "author": {"login": "seadowg"}, "path": "collect_app/src/main/res/values/strings.xml", "diffHunk": "@@ -217,7 +217,7 @@\n     <string name=\"constraint_behavior_on_finalize\">Defer validation until finalized</string>\n     <string name=\"view_change_location\">View or Change Location</string>\n     <string name=\"change_location\">Change Location</string>\n-    <string name=\"open_url\">Open Url</string>\n+    <string name=\"open_url\">Visit Website</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fcfd637743fdf39b2599d5ed7422b4110998f4e4"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "80b7cbd04f9626927f2b7d7d72b249c55d4e1d25", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/80b7cbd04f9626927f2b7d7d72b249c55d4e1d25", "committedDate": "2020-08-25T13:09:29Z", "message": "remove readOnly beahviour for url widget"}, "afterCommit": {"oid": "58c007cd8eb1f676d86b9ae5fb823385d6a83828", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/58c007cd8eb1f676d86b9ae5fb823385d6a83828", "committedDate": "2020-08-25T14:39:32Z", "message": "fix lint"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0NjI1Mjk2", "url": "https://github.com/getodk/collect/pull/4025#pullrequestreview-474625296", "createdAt": "2020-08-25T15:58:19Z", "commit": {"oid": "58c007cd8eb1f676d86b9ae5fb823385d6a83828"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "58c007cd8eb1f676d86b9ae5fb823385d6a83828", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/58c007cd8eb1f676d86b9ae5fb823385d6a83828", "committedDate": "2020-08-25T14:39:32Z", "message": "fix lint"}, "afterCommit": {"oid": "dcd6c714b015cb3973d12e029e5b7d8f83178b00", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/dcd6c714b015cb3973d12e029e5b7d8f83178b00", "committedDate": "2020-09-08T06:12:15Z", "message": "fix lint"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1MTQ1MjE0", "url": "https://github.com/getodk/collect/pull/4025#pullrequestreview-485145214", "createdAt": "2020-09-09T15:44:21Z", "commit": {"oid": "dcd6c714b015cb3973d12e029e5b7d8f83178b00"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQxNTo0NDoyMVrOHPNqlA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQxNTo0NToxMlrOHPNs8Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTcxNDU4MA==", "bodyText": "This doesn't seem right as it's the same as the AUDIO_QUESTION. I think the AUDIO_QUESTION naming and description is just wrong here and probably should be PROMPT and really be used to just track any kind of question/widget.", "url": "https://github.com/getodk/collect/pull/4025#discussion_r485714580", "createdAt": "2020-09-09T15:44:21Z", "author": {"login": "seadowg"}, "path": "collect_app/src/main/java/org/odk/collect/android/analytics/AnalyticsEvents.java", "diffHunk": "@@ -72,6 +72,12 @@ private AnalyticsEvents() {\n      */\n     public static final String AUDIO_QUESTION = \"Prompt\";\n \n+    /**\n+     * Track form definitions with url widget. The action should be the widget name and\n+     * the label should be a hash of the form definition.\n+     */\n+    public static final String URL_WIDGET = \"Prompt\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dcd6c714b015cb3973d12e029e5b7d8f83178b00"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTcxNTE4NQ==", "bodyText": "I think the action here should just be \"Url\". What we care about is that the user saw a url question.", "url": "https://github.com/getodk/collect/pull/4025#discussion_r485715185", "createdAt": "2020-09-09T15:45:12Z", "author": {"login": "seadowg"}, "path": "collect_app/src/main/java/org/odk/collect/android/widgets/WidgetFactory.java", "diffHunk": "@@ -122,6 +124,8 @@ public static QuestionWidget createWidgetFromPrompt(FormEntryPrompt prompt, Cont\n                             questionWidget = new StringNumberWidget(context, questionDetails, readOnlyOverride);\n                         } else if (appearance.equals(WidgetAppearanceUtils.URL)) {\n                             questionWidget = new UrlWidget(context, questionDetails, new CustomTabHelper());\n+\n+                            analytics.logEvent(URL_WIDGET, \"UrlWidget\", questionDetails.getFormAnalyticsID());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dcd6c714b015cb3973d12e029e5b7d8f83178b00"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1ODcxNjk3", "url": "https://github.com/getodk/collect/pull/4025#pullrequestreview-485871697", "createdAt": "2020-09-10T12:22:28Z", "commit": {"oid": "dc41cec0d965cc974536b9ddbfb7bfb1f6b00bae"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dc41cec0d965cc974536b9ddbfb7bfb1f6b00bae", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/dc41cec0d965cc974536b9ddbfb7bfb1f6b00bae", "committedDate": "2020-09-10T11:21:56Z", "message": "change AnalyticsEvent AudioQuestion to prompt"}, "afterCommit": {"oid": "eb2f2334f05ceb6100eccae9f34fde2e9cb4cd12", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/eb2f2334f05ceb6100eccae9f34fde2e9cb4cd12", "committedDate": "2020-09-30T17:41:23Z", "message": "change AnalyticsEvent AudioQuestion to prompt"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "17ff758f4bd5c235cee848a2a3be5e026825a652", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/17ff758f4bd5c235cee848a2a3be5e026825a652", "committedDate": "2020-10-06T03:11:32Z", "message": "remove answer text view in url widget"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e74dd1c6ffb9af566edb7d2af4f35f5af6d6d4c6", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/e74dd1c6ffb9af566edb7d2af4f35f5af6d6d4c6", "committedDate": "2020-10-06T03:11:40Z", "message": "add analytics call to track number of form definitions with url widget"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1a1fd1a754dd56902abad5fd3618b63014ebece4", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/1a1fd1a754dd56902abad5fd3618b63014ebece4", "committedDate": "2020-10-06T03:11:40Z", "message": "remove readOnly beahviour for url widget"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a1aa372fe835f1bab48872ccac1eb8d533405728", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/a1aa372fe835f1bab48872ccac1eb8d533405728", "committedDate": "2020-10-06T03:12:54Z", "message": "change AnalyticsEvent AudioQuestion to prompt"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "eb2f2334f05ceb6100eccae9f34fde2e9cb4cd12", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/eb2f2334f05ceb6100eccae9f34fde2e9cb4cd12", "committedDate": "2020-09-30T17:41:23Z", "message": "change AnalyticsEvent AudioQuestion to prompt"}, "afterCommit": {"oid": "a1aa372fe835f1bab48872ccac1eb8d533405728", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/a1aa372fe835f1bab48872ccac1eb8d533405728", "committedDate": "2020-10-06T03:12:54Z", "message": "change AnalyticsEvent AudioQuestion to prompt"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2605, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}