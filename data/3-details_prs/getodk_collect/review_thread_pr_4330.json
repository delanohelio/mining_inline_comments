{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQzNTEyOTA0", "number": 4330, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxNDoyNzozMVrOFHz4Ug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxNDoyOTowOFrOFHz6zw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQzNzM0MzU0OnYy", "diffSide": "LEFT", "path": "collect_app/src/main/java/org/odk/collect/android/activities/MainMenuActivity.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxNDoyNzozMVrOIJaFKw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxNDoyNzozMVrOIJaFKw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjczNTQwMw==", "bodyText": "We don't need to keep any of this state in the Activity any longer.", "url": "https://github.com/getodk/collect/pull/4330#discussion_r546735403", "createdAt": "2020-12-21T14:27:31Z", "author": {"login": "seadowg"}, "path": "collect_app/src/main/java/org/odk/collect/android/activities/MainMenuActivity.java", "diffHunk": "@@ -96,12 +96,7 @@\n     private Button getFormsButton;\n     private AlertDialog alertDialog;\n     private MenuItem qrcodeScannerMenuItem;\n-    private int completedCount;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49d37dc1e1b26754b5c7145d18fb388405c3c224"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQzNzM0NjEyOnYy", "diffSide": "LEFT", "path": "collect_app/src/main/java/org/odk/collect/android/activities/MainMenuActivity.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxNDoyODoxNVrOIJaGsQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxNDoyODoxNVrOIJaGsQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjczNTc5Mw==", "bodyText": "requery is deprecated. The advice is to just open a new cursor.", "url": "https://github.com/getodk/collect/pull/4330#discussion_r546735793", "createdAt": "2020-12-21T14:28:15Z", "author": {"login": "seadowg"}, "path": "collect_app/src/main/java/org/odk/collect/android/activities/MainMenuActivity.java", "diffHunk": "@@ -422,46 +374,50 @@ public void onClick(DialogInterface dialog, int i) {\n     }\n \n     private void updateButtons() {\n-        if (finalizedCursor != null && !finalizedCursor.isClosed()) {\n-            finalizedCursor.requery();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49d37dc1e1b26754b5c7145d18fb388405c3c224"}, "originalPosition": 75}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQzNzM0OTkxOnYy", "diffSide": "LEFT", "path": "collect_app/src/main/java/org/odk/collect/android/activities/MainMenuActivity.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxNDoyOTowOFrOIJaIuw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxNDoyOTowOFrOIJaIuw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjczNjMxNQ==", "bodyText": "startManagingCursor is deprecated. Instead of doing this I've switched it to using try-with-resource to manage opening/closing.", "url": "https://github.com/getodk/collect/pull/4330#discussion_r546736315", "createdAt": "2020-12-21T14:29:08Z", "author": {"login": "seadowg"}, "path": "collect_app/src/main/java/org/odk/collect/android/activities/MainMenuActivity.java", "diffHunk": "@@ -358,48 +352,6 @@ private void initToolbar() {\n         setSupportActionBar(toolbar);\n     }\n \n-    private void countSavedForms() {\n-        InstancesDao instancesDao = new InstancesDao();\n-\n-        // count for finalized instances\n-        try {\n-            finalizedCursor = instancesDao.getFinalizedInstancesCursor();\n-        } catch (Exception e) {\n-            createErrorDialog(e.getMessage(), EXIT);\n-            return;\n-        }\n-\n-        if (finalizedCursor != null) {\n-            startManagingCursor(finalizedCursor);\n-        }\n-        completedCount = finalizedCursor != null ? finalizedCursor.getCount() : 0;\n-\n-        // count for saved instances\n-        try {\n-            savedCursor = instancesDao.getUnsentInstancesCursor();\n-        } catch (Exception e) {\n-            createErrorDialog(e.getMessage(), EXIT);\n-            return;\n-        }\n-\n-        if (savedCursor != null) {\n-            startManagingCursor(savedCursor);\n-        }\n-        savedCount = savedCursor != null ? savedCursor.getCount() : 0;\n-\n-        //count for view sent form\n-        try {\n-            viewSentCursor = instancesDao.getSentInstancesCursor();\n-        } catch (Exception e) {\n-            createErrorDialog(e.getMessage(), EXIT);\n-            return;\n-        }\n-        if (viewSentCursor != null) {\n-            startManagingCursor(viewSentCursor);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49d37dc1e1b26754b5c7145d18fb388405c3c224"}, "originalPosition": 62}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3102, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}