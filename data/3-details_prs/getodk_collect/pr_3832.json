{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE3OTY5Njgz", "number": 3832, "title": "Revise QR code stub setup", "bodyText": "This reworks the QR code stub setup so that file saving happens in the test rules. This means that any errors will stop the test rather than us seeing fails later for what looks like unrelated reasons. I've also added cleanup to the stub for good measure (which might help stability if that was a problem) and added and used a tryAgainOnFail helper to tackle a couple of flakey actions in the tests.\nBefore submitting this PR, please make sure you have:\n\n run ./gradlew checkAll and confirmed all checks still pass OR confirm CircleCI build passes and run ./gradlew connectedDebugAndroidTest locally.\n verified that any code or assets from external sources are properly credited in comments and/or in the about file.\n verified that any new UI elements use theme colors. UI Components Style guidelines", "createdAt": "2020-05-14T12:41:09Z", "url": "https://github.com/getodk/collect/pull/3832", "merged": true, "mergeCommit": {"oid": "06bbc86db31b554ad7a4ab6f902899f6697b4645"}, "closed": true, "closedAt": "2020-05-14T13:01:18Z", "author": {"login": "seadowg"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABchMSCqgH2gAyNDE3OTY5NjgzOjc0YzYzMWI4NTcyNjljYmIzYTNmYTAyZWMwY2Q1MzM2YjIxOTYwZTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABchNGDxAFqTQxMTc3Nzk4OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "74c631b857269cbb3a3fa02ec0cd5336b21960e9", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/74c631b857269cbb3a3fa02ec0cd5336b21960e9", "committedDate": "2020-05-14T12:04:09Z", "message": "Revise QR code stub generator and add tryAgainOnFail helper"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "92b73dff90452cfdb618bdc8bf36531c01be070a", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/92b73dff90452cfdb618bdc8bf36531c01be070a", "committedDate": "2020-05-14T12:36:26Z", "message": "Setup qr code stub in rules"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExNzcxNzU2", "url": "https://github.com/getodk/collect/pull/3832#pullrequestreview-411771756", "createdAt": "2020-05-14T12:53:52Z", "commit": {"oid": "92b73dff90452cfdb618bdc8bf36531c01be070a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxMjo1Mzo1MlrOGVay7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxMjo1Mzo1MlrOGVay7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTExMjMwMQ==", "bodyText": "We might want to add a sleep in here in future but interested to try this out", "url": "https://github.com/getodk/collect/pull/3832#discussion_r425112301", "createdAt": "2020-05-14T12:53:52Z", "author": {"login": "seadowg"}, "path": "collect_app/src/androidTest/java/org/odk/collect/android/support/pages/Page.java", "diffHunk": "@@ -290,6 +290,15 @@ public T checkIfWebViewActivityIsDisplayed() {\n         return (T) this;\n     }\n \n+    void tryAgainOnFail(Runnable action) {\n+        try {\n+            action.run();\n+        } catch (NoMatchingViewException e) {\n+            assertOnPage();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "92b73dff90452cfdb618bdc8bf36531c01be070a"}, "originalPosition": 19}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExNzc3OTg4", "url": "https://github.com/getodk/collect/pull/3832#pullrequestreview-411777988", "createdAt": "2020-05-14T13:00:58Z", "commit": {"oid": "92b73dff90452cfdb618bdc8bf36531c01be070a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2689, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}