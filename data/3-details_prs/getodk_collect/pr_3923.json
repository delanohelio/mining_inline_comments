{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM0MjAzMTcz", "number": 3923, "title": "Migrate to `androidx` Library for Implementing Preferences in Collect", "bodyText": "Work towards #3849\n\nWhat has been done to verify that this works as intended?\nI tested all the preference screen and preference dialogs on every theme. It fixes the material contained button on dialogs. I checked it for all the dialogs shown on the settings preferences. There is a minor UI issue of indentation on MapsPreference Screen.\nWhy is this the best possible solution? Were any other approaches considered?\nI replaced the android Preference library with androidx one, as the old framework is deprecated now. It solves a lot of visual issues related to the dialogs shown on Settings Preference in new Experimental theme.\nHow does this change affect users? Describe intentional changes to behavior and behavior that could have accidentally been affected by code changes. In other words, what are the regression risks?\nI found that in the new androidx preference library, the dialogs are separated from their DialogPreference class. Most of the changes are for shifting the code that concerns the dialog from the DialogPreference class to a newly created PreferenceDialogFragment class. I was careful not to add any new behavior while working on this. However, I feel the part of the settings preference that is most prone to regression risk is the ReferenceLayerDialog and ResetSettingsDialog.\nDo we need any specific form for testing your changes? If so, please attach one.\nNo\nDoes this change require updates to documentation? If so, please file an issue here and include the link below.\nNo\nBefore submitting this PR, please make sure you have:\n\n run ./gradlew checkAll and confirmed all checks still pass OR confirm CircleCI build passes and run ./gradlew connectedDebugAndroidTest locally.\n verified that any code or assets from external sources are properly credited in comments and/or in the about file.\n verified that any new UI elements use theme colors. UI Components Style guidelines", "createdAt": "2020-06-14T21:14:45Z", "url": "https://github.com/getodk/collect/pull/3923", "merged": true, "mergeCommit": {"oid": "1885e2bbe5e59dd1e3111e6d8011ea442eed669d"}, "closed": true, "closedAt": "2020-07-24T09:35:14Z", "author": {"login": "SaumiaSinghal"}, "timelineItems": {"totalCount": 48, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcr65ARgFqTQzMTg0ODU2Mw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc4AKhYAH2gAyNDM0MjAzMTczOjY3MWQ4YTcyZmIyODliZDJiNWI1YTA3ZmMzMzcyOWYzOWIwMWJjNTE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxODQ4NTYz", "url": "https://github.com/getodk/collect/pull/3923#pullrequestreview-431848563", "createdAt": "2020-06-16T20:01:35Z", "commit": {"oid": "60111976f2a5d2b4310a237ba6c6b06ca53de550"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQyMDowMTozNVrOGkrIwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQyMDowMTozNVrOGkrIwA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTEwODY3Mg==", "bodyText": "Hi @seadowg! I was not able to create PreferenceFragmentCompat using Robolectric, and could not think of any other method to test it. I made BasePreferenceFragment extract PreferenceFragmentCompat, as androidx.PreferenceFragment is also deprecated.", "url": "https://github.com/getodk/collect/pull/3923#discussion_r441108672", "createdAt": "2020-06-16T20:01:35Z", "author": {"login": "SaumiaSinghal"}, "path": "collect_app/src/test/java/org/odk/collect/android/preferences/AggregatePreferencesAdderTest.java", "diffHunk": "@@ -3,24 +3,27 @@\n import android.preference.PreferenceFragment;\n import android.preference.PreferenceManager;\n \n+import androidx.preference.PreferenceFragmentCompat;\n+import androidx.test.core.app.ApplicationProvider;\n+\n import org.junit.Test;\n import org.junit.runner.RunWith;\n import org.odk.collect.android.R;\n import org.robolectric.Robolectric;\n import org.robolectric.RobolectricTestRunner;\n-import org.robolectric.RuntimeEnvironment;\n import org.robolectric.shadows.ShadowToast;\n \n import static junit.framework.Assert.assertFalse;\n import static org.junit.Assert.assertEquals;\n import static org.junit.Assert.assertTrue;\n+import static org.mockito.Mockito.mock;\n \n @RunWith(RobolectricTestRunner.class)\n public class AggregatePreferencesAdderTest {\n \n     @Test\n     public void whenPreferencesAreAdded_returnsTrue() {\n-        PreferenceFragment fragment = Robolectric.buildFragment(TestPreferenceFragment.class).create().resume().visible().get();\n+        PreferenceFragmentCompat fragment = mock(PreferenceFragmentCompat.class);\n         AggregatePreferencesAdder loader = new AggregatePreferencesAdder(fragment);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "60111976f2a5d2b4310a237ba6c6b06ca53de550"}, "originalPosition": 27}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM1MDMzOTE3", "url": "https://github.com/getodk/collect/pull/3923#pullrequestreview-435033917", "createdAt": "2020-06-22T15:24:58Z", "commit": {"oid": "29f6fca6757468ebf7ec8c74e357b9460d1a0c53"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM1NjU1Mjg4", "url": "https://github.com/getodk/collect/pull/3923#pullrequestreview-435655288", "createdAt": "2020-06-23T10:36:49Z", "commit": {"oid": "cc30c89f1acc9fee3854c5bedd080ba5d81961af"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxMDozNjo0OVrOGnjZ1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxMDozODozM1rOGnjdpA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDEyNzcwMw==", "bodyText": "Now we're doing this I think we should be able to get rid of the AndroidXPreferencesActivity and just start those fragments like everything else. Could you make that happen please?", "url": "https://github.com/getodk/collect/pull/3923#discussion_r444127703", "createdAt": "2020-06-23T10:36:49Z", "author": {"login": "seadowg"}, "path": "collect_app/src/main/java/org/odk/collect/android/preferences/GeneralPreferencesFragment.java", "diffHunk": "@@ -79,7 +80,7 @@ public boolean onPreferenceClick(Preference preference) {\n                     break;\n             }\n             if (basePreferenceFragment != null) {\n-                getActivity().getFragmentManager()\n+                getActivity().getSupportFragmentManager()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc30c89f1acc9fee3854c5bedd080ba5d81961af"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDEyODY3Ng==", "bodyText": "Did you need this?", "url": "https://github.com/getodk/collect/pull/3923#discussion_r444128676", "createdAt": "2020-06-23T10:38:33Z", "author": {"login": "seadowg"}, "path": "collect_app/src/test/java/org/odk/collect/android/activities/FormMapActivityTest.java", "diffHunk": "@@ -148,13 +148,15 @@ public MapProvider providesMapProvider() {\n         assertThat(map.wasLatestZoomCallAnimated(), is(false));\n     }\n \n+    @LooperMode(PAUSED)\n     @Test public void tappingOnLayerMenu_opensLayerDialog() {\n-        List<Fragment> fragments = activity.getFragmentManager().getFragments();\n+        List<Fragment> fragments = activity.getSupportFragmentManager().getFragments();\n         assertThat(fragments, not(hasItem(isA(MapsPreferences.class))));\n \n         activity.findViewById(R.id.layer_menu).performClick();\n \n-        fragments = activity.getFragmentManager().getFragments();\n+        activity.getSupportFragmentManager().executePendingTransactions();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc30c89f1acc9fee3854c5bedd080ba5d81961af"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2NDk1NjYz", "url": "https://github.com/getodk/collect/pull/3923#pullrequestreview-436495663", "createdAt": "2020-06-24T09:51:41Z", "commit": {"oid": "71225c8889d49e9410bd4536c3c2b712a9134c3d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwOTo1MTo0MlrOGoLJsg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwOTo1ODo0MFrOGoLY3g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc3ODkzMA==", "bodyText": "Why do you need to do this?", "url": "https://github.com/getodk/collect/pull/3923#discussion_r444778930", "createdAt": "2020-06-24T09:51:42Z", "author": {"login": "seadowg"}, "path": "collect_app/src/main/java/org/odk/collect/android/preferences/FormMetadataFragment.java", "diffHunk": "@@ -91,6 +91,17 @@ public void denied() {\n         }\n     }\n \n+    @Override\n+    public void onDestroyView() {\n+        emailPreference = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "71225c8889d49e9410bd4536c3c2b712a9134c3d"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc4MjQ2NA==", "bodyText": "Not sure why you have to create your own dialogs for these preferences (and not just use EditTextPreference)? Have you looked through the docs at https://developer.android.com/guide/topics/ui/settings/ to see if there are other ways of implementing the features there is code for in the dialogs?", "url": "https://github.com/getodk/collect/pull/3923#discussion_r444782464", "createdAt": "2020-06-24T09:58:02Z", "author": {"login": "seadowg"}, "path": "collect_app/src/main/java/org/odk/collect/android/preferences/ServerPreferencesFragment.java", "diffHunk": "@@ -99,10 +94,46 @@ public static ServerPreferencesFragment newInstance(boolean adminMode) {\n     public void onCreate(Bundle savedInstanceState) {\n         super.onCreate(savedInstanceState);\n         addPreferencesFromResource(R.xml.server_preferences);\n-\n         initProtocolPrefs();\n     }\n \n+    @Override\n+    public void onDisplayPreferenceDialog(Preference preference) {\n+        if (preference instanceof CustomEditTextPreference) {\n+            switch (preference.getKey()) {\n+                case \"server_url\":\n+                    dialogFragment = ServerUrlEditTextPreferenceDialog.newInstance(preference.getKey());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "71225c8889d49e9410bd4536c3c2b712a9134c3d"}, "originalPosition": 84}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc4MjgxNA==", "bodyText": "What is the code in this method doing?", "url": "https://github.com/getodk/collect/pull/3923#discussion_r444782814", "createdAt": "2020-06-24T09:58:40Z", "author": {"login": "seadowg"}, "path": "collect_app/src/main/java/org/odk/collect/android/preferences/PasswordEditTextPreferenceDialog.java", "diffHunk": "@@ -0,0 +1,54 @@\n+package org.odk.collect.android.preferences;\n+\n+import android.os.Bundle;\n+import android.text.InputFilter;\n+import android.view.MotionEvent;\n+import android.view.View;\n+import android.widget.EditText;\n+\n+import androidx.preference.EditTextPreferenceDialogFragmentCompat;\n+\n+import org.odk.collect.android.preferences.filters.ControlCharacterFilter;\n+import org.odk.collect.android.utilities.SoftKeyboardUtils;\n+\n+public class PasswordEditTextPreferenceDialog extends EditTextPreferenceDialogFragmentCompat implements View.OnTouchListener {\n+\n+    public static PasswordEditTextPreferenceDialog newInstance(String key) {\n+        PasswordEditTextPreferenceDialog fragment = new PasswordEditTextPreferenceDialog();\n+        Bundle b = new Bundle(1);\n+        b.putString(ARG_KEY, key);\n+        fragment.setArguments(b);\n+        return fragment;\n+    }\n+\n+    @Override\n+    protected void onBindDialogView(View view) {\n+        CustomEditTextPreference passwordEditTextPreference = null;\n+        if (getPreference() instanceof CustomEditTextPreference) {\n+            passwordEditTextPreference = (CustomEditTextPreference) getPreference();\n+        }\n+        EditText editText = (EditText) view.findViewById(android.R.id.edit);\n+        editText.setFilters(new InputFilter[]{new ControlCharacterFilter()});\n+\n+        if (passwordEditTextPreference != null) {\n+            passwordEditTextPreference.setOnPreferenceClickListener(preference -> {\n+                editText.requestFocus();\n+                return true;\n+            });\n+        }\n+        super.onBindDialogView(view);\n+    }\n+\n+    @Override\n+    public boolean onTouch(View v, MotionEvent event) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "71225c8889d49e9410bd4536c3c2b712a9134c3d"}, "originalPosition": 43}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1c65aa72f00bae0f3a2786ccaf64575ef366b26a", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/1c65aa72f00bae0f3a2786ccaf64575ef366b26a", "committedDate": "2020-06-24T12:07:18Z", "message": "remove custom edit text"}, "afterCommit": {"oid": "21626f8456972351a5448680b770528719ad1c7a", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/21626f8456972351a5448680b770528719ad1c7a", "committedDate": "2020-06-24T12:10:47Z", "message": "remove customEditTextPreference feild"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0abc659723848b3cdb49b3984107037f23d9f6ca", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/0abc659723848b3cdb49b3984107037f23d9f6ca", "committedDate": "2020-06-24T12:21:49Z", "message": "code refactor"}, "afterCommit": {"oid": "ad38ad65782dba6a92e19dcb99b3390d770e380d", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/ad38ad65782dba6a92e19dcb99b3390d770e380d", "committedDate": "2020-06-30T05:36:51Z", "message": "code refactor"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM5Nzg1MTk5", "url": "https://github.com/getodk/collect/pull/3923#pullrequestreview-439785199", "createdAt": "2020-06-30T08:26:12Z", "commit": {"oid": "d53b6023ba8d413dbac9090d972ef7192d5efa8d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxNTYyMDM2", "url": "https://github.com/getodk/collect/pull/3923#pullrequestreview-441562036", "createdAt": "2020-07-02T10:45:24Z", "commit": {"oid": "6a66ba4b4efd5eba7f4e2f976c5a72754ac39b97"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxMDo0NToyNFrOGsHh8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxMDo0NToyNFrOGsHh8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODkxMzkwNw==", "bodyText": "Not sure why you need this. If you're getting a leak here lets try to work out what's causing and see if there is a better way to solve it!", "url": "https://github.com/getodk/collect/pull/3923#discussion_r448913907", "createdAt": "2020-07-02T10:45:24Z", "author": {"login": "seadowg"}, "path": "collect_app/src/main/java/org/odk/collect/android/preferences/ServerPreferencesFragment.java", "diffHunk": "@@ -99,10 +102,20 @@ public static ServerPreferencesFragment newInstance(boolean adminMode) {\n     public void onCreate(Bundle savedInstanceState) {\n         super.onCreate(savedInstanceState);\n         addPreferencesFromResource(R.xml.server_preferences);\n-\n         initProtocolPrefs();\n     }\n \n+    @Override\n+    public void onDestroyView() {\n+        serverUrlPreference = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6a66ba4b4efd5eba7f4e2f976c5a72754ac39b97"}, "originalPosition": 51}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxNTYzODI5", "url": "https://github.com/getodk/collect/pull/3923#pullrequestreview-441563829", "createdAt": "2020-07-02T10:48:12Z", "commit": {"oid": "6a66ba4b4efd5eba7f4e2f976c5a72754ac39b97"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxNjQ1Mzk3", "url": "https://github.com/getodk/collect/pull/3923#pullrequestreview-441645397", "createdAt": "2020-07-02T12:49:51Z", "commit": {"oid": "d54b61ad0d634327c3b80f65492daa1adaa7e69a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d54b61ad0d634327c3b80f65492daa1adaa7e69a", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/d54b61ad0d634327c3b80f65492daa1adaa7e69a", "committedDate": "2020-07-02T11:06:13Z", "message": "fix pmd"}, "afterCommit": {"oid": "1ec01c594c25439c0fada356fb8af71b924d26f1", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/1ec01c594c25439c0fada356fb8af71b924d26f1", "committedDate": "2020-07-12T10:15:53Z", "message": "fix pmd"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1f788eb5e4d5853424b3bdaaf3f8d4cae766cace", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/1f788eb5e4d5853424b3bdaaf3f8d4cae766cace", "committedDate": "2020-07-12T10:32:46Z", "message": "code refactor"}, "afterCommit": {"oid": "eef3d9b3838d1cac232ff1e77e6199b11b1aa5d8", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/eef3d9b3838d1cac232ff1e77e6199b11b1aa5d8", "committedDate": "2020-07-15T09:04:24Z", "message": "code refactor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0d8fac9300962508178b7deb8858a752c2cd2f04", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/0d8fac9300962508178b7deb8858a752c2cd2f04", "committedDate": "2020-07-21T10:32:35Z", "message": "initial commit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bd01b824f2f8ad5539e6a4bcc416e3240b35ba2f", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/bd01b824f2f8ad5539e6a4bcc416e3240b35ba2f", "committedDate": "2020-07-21T10:34:35Z", "message": "resolve conflict in MApConfigurator"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "525121cb596a7377b8fa9af01f2534f15fe4f7f8", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/525121cb596a7377b8fa9af01f2534f15fe4f7f8", "committedDate": "2020-07-21T10:34:41Z", "message": "migrate to androidx library in ResetDialogPreference"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "88fd3b2261307294f27f706123425abdb4f61c30", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/88fd3b2261307294f27f706123425abdb4f61c30", "committedDate": "2020-07-21T10:34:41Z", "message": "create ResetDialogPreferenceFragmentCompat"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "99e7dc4173846ea4426a1fe51e9ad0caaba64842", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/99e7dc4173846ea4426a1fe51e9ad0caaba64842", "committedDate": "2020-07-21T10:34:41Z", "message": "fixed conflict in general_preferences.xml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "54aea9276f422e65483f7cca45bd37abe7b9fa0e", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/54aea9276f422e65483f7cca45bd37abe7b9fa0e", "committedDate": "2020-07-21T10:34:41Z", "message": "fix reset application text size in admin_preferences.xml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "429203e5ae83e157f9a8b5ee4d6e70e08b98586f", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/429203e5ae83e157f9a8b5ee4d6e70e08b98586f", "committedDate": "2020-07-21T10:34:41Z", "message": "update CaptionedListPreference"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f9569b5598ec8975aecfc5fbe05512ed3bd1e003", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/f9569b5598ec8975aecfc5fbe05512ed3bd1e003", "committedDate": "2020-07-21T10:34:41Z", "message": "fix conflict in ServerPreferencesFragment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a9f1515ea8730d9303345898f45e241a828ae762", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/a9f1515ea8730d9303345898f45e241a828ae762", "committedDate": "2020-07-21T10:34:41Z", "message": "create ReferenceLayerPreferenceDialog."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "18452d67c70ad22671877119d19a1d2a81423372", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/18452d67c70ad22671877119d19a1d2a81423372", "committedDate": "2020-07-21T10:34:41Z", "message": "update ReferenceLayerPreferenceDialog to avoid crash"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "076d18a3ae57a63dd6a9364d28ee3bb4ef224b5e", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/076d18a3ae57a63dd6a9364d28ee3bb4ef224b5e", "committedDate": "2020-07-21T10:34:41Z", "message": "update ReferenceLayerPreferenceDailog to avoid memory leak"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "608755a36f88ff88459e42fb43b18c6a0ca4e8a2", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/608755a36f88ff88459e42fb43b18c6a0ca4e8a2", "committedDate": "2020-07-21T10:34:41Z", "message": "make prefernce a local variavle to avoid memory leak"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6a812400b44807177a3bd0733536b18bea5cf390", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/6a812400b44807177a3bd0733536b18bea5cf390", "committedDate": "2020-07-21T10:34:41Z", "message": "refactor code to avoid memory leak"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "09047d49e0472b26d802a8587a034dbfd136017e", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/09047d49e0472b26d802a8587a034dbfd136017e", "committedDate": "2020-07-21T10:34:41Z", "message": "refactor code to make tappingOnLayerMenu_opensLayerDialog() test green"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f5e1ad749f8bc5b937bf8ac51eba5b404ac4ede3", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/f5e1ad749f8bc5b937bf8ac51eba5b404ac4ede3", "committedDate": "2020-07-21T10:34:41Z", "message": "update unit tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "32b0e018470087b1eb9dd44437a4ec094dec3816", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/32b0e018470087b1eb9dd44437a4ec094dec3816", "committedDate": "2020-07-21T10:34:41Z", "message": "code refactor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "003e12474aa03299e38a6cfc230f3ea75f1e751a", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/003e12474aa03299e38a6cfc230f3ea75f1e751a", "committedDate": "2020-07-21T10:34:41Z", "message": "fix reference layer dialog showing on top of other preference dialogs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c7f6e7c623e911e3edaab974797d3a5f7414e07b", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/c7f6e7c623e911e3edaab974797d3a5f7414e07b", "committedDate": "2020-07-21T10:34:41Z", "message": "use mock instead of Robolectric.buildFragment()"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b166a343c1b9667a4a1d1aa2d5a206ad6599f0fc", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/b166a343c1b9667a4a1d1aa2d5a206ad6599f0fc", "committedDate": "2020-07-21T10:34:41Z", "message": "delete AndroidXPreferencesActivity"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc9c7afadd5c5dba111d1c6f9649a3491dc5c69d", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/bc9c7afadd5c5dba111d1c6f9649a3491dc5c69d", "committedDate": "2020-07-21T10:34:41Z", "message": "resolve conflict in GeneralSettingsPage"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "00ef85492969a233e15310bfca563d55e49a7b92", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/00ef85492969a233e15310bfca563d55e49a7b92", "committedDate": "2020-07-21T10:34:41Z", "message": "fix pmd"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6d7b8e6dec010b67a819ea8e1f7623872f2b119", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/c6d7b8e6dec010b67a819ea8e1f7623872f2b119", "committedDate": "2020-07-21T10:34:41Z", "message": "fix conflict"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "393b4ea8ecf23af236c96251f8c5cf32b113fb32", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/393b4ea8ecf23af236c96251f8c5cf32b113fb32", "committedDate": "2020-07-21T10:34:41Z", "message": "fix conflict in ServerPreferencesFragment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef38cc4da2f09dcba197e40d8ed83775101cf679", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/ef38cc4da2f09dcba197e40d8ed83775101cf679", "committedDate": "2020-07-21T10:34:41Z", "message": "code refactor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "72866ca7d3793fdb88e16157e98b166198b30e9f", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/72866ca7d3793fdb88e16157e98b166198b30e9f", "committedDate": "2020-07-21T10:34:41Z", "message": "fix AggregatePreferencesAdderTest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "32b1b02124682000be012aeff078f042c550818c", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/32b1b02124682000be012aeff078f042c550818c", "committedDate": "2020-07-21T10:34:41Z", "message": "rename openServerSettings() to clickServerSettings()"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f042f4a3e0e7469fa8d1cc0db4378992abdb4999", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/f042f4a3e0e7469fa8d1cc0db4378992abdb4999", "committedDate": "2020-07-21T10:34:41Z", "message": "remove onDestroyView() in FormMetadataFragment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5b826f23c3a32e06ef710a290038e848ea20589", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/d5b826f23c3a32e06ef710a290038e848ea20589", "committedDate": "2020-07-21T10:34:41Z", "message": "fix pmd"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0642f7ec3c2a84a84a8da1d6dbc779cb3304120e", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/0642f7ec3c2a84a84a8da1d6dbc779cb3304120e", "committedDate": "2020-07-21T10:34:41Z", "message": "code refactor"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "eef3d9b3838d1cac232ff1e77e6199b11b1aa5d8", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/eef3d9b3838d1cac232ff1e77e6199b11b1aa5d8", "committedDate": "2020-07-15T09:04:24Z", "message": "code refactor"}, "afterCommit": {"oid": "0642f7ec3c2a84a84a8da1d6dbc779cb3304120e", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/0642f7ec3c2a84a84a8da1d6dbc779cb3304120e", "committedDate": "2020-07-21T10:34:41Z", "message": "code refactor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3e9d323aa8078924c3fe8e0cbafcdce34e5c937d", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/3e9d323aa8078924c3fe8e0cbafcdce34e5c937d", "committedDate": "2020-07-22T15:01:05Z", "message": "fix divider and icon space issue"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUzNTE2NjQ2", "url": "https://github.com/getodk/collect/pull/3923#pullrequestreview-453516646", "createdAt": "2020-07-22T17:05:58Z", "commit": {"oid": "3e9d323aa8078924c3fe8e0cbafcdce34e5c937d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxNzowNTo1OFrOG1r9pQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxNzowNTo1OFrOG1r9pQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODk0ODAwNQ==", "bodyText": "We should absolutely avoid suppressing lint warnings if they get in our way unless we really need to. Here it's telling us that we should be using this API as they might change it which would mean our code could end up breaking down the line.\nNot sure why we need to do this here and not use the XML attributes like on other preferences screens?", "url": "https://github.com/getodk/collect/pull/3923#discussion_r458948005", "createdAt": "2020-07-22T17:05:58Z", "author": {"login": "seadowg"}, "path": "collect_app/src/main/java/org/odk/collect/android/preferences/MapsPreferences.java", "diffHunk": "@@ -57,6 +64,23 @@ public static MapsPreferences newInstance(boolean adminMode) {\n         return prefs;\n     }\n \n+    @SuppressLint(\"RestrictedApi\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3e9d323aa8078924c3fe8e0cbafcdce34e5c937d"}, "originalPosition": 27}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "79d07c3a962740032b501a99b7f1157f65ee76a1", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/79d07c3a962740032b501a99b7f1157f65ee76a1", "committedDate": "2020-07-22T18:00:45Z", "message": "remove SuppressLint annotation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "736eeb8203a753b48a9b291b019847a5fa7a66d2", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/736eeb8203a753b48a9b291b019847a5fa7a66d2", "committedDate": "2020-07-22T18:27:13Z", "message": "set iconSpaceReserved to false in MapPreferences"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUzOTI2NzIy", "url": "https://github.com/getodk/collect/pull/3923#pullrequestreview-453926722", "createdAt": "2020-07-23T08:26:50Z", "commit": {"oid": "736eeb8203a753b48a9b291b019847a5fa7a66d2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "671d8a72fb289bd2b5b5a07fc33729f39b01bc51", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/671d8a72fb289bd2b5b5a07fc33729f39b01bc51", "committedDate": "2020-07-24T08:57:20Z", "message": "Merge branch 'master' into fix_settings_preference"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2512, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}