{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg2Mzc3Mzgw", "number": 3701, "title": "Disable Markup button if default image couldn't be loaded", "bodyText": "Closes #3634\nWhat has been done to verify that this works as intended?\nTested on android 9 device\nWhy is this the best possible solution? Were any other approaches considered?\nThis is a simple solution. Another option might be to call setUpLayout() after addCurrentImageToLayout() .\nHow does this change affect users? Describe intentional changes to behavior and behavior that could have accidentally been affected by code changes. In other words, what are the regression risks?\nNone.\nDo we need any specific form for testing your changes? If so, please attach one.\nThe form mentioned in the issue.\nBefore submitting this PR, please make sure you have:\n\n run ./gradlew checkAll and confirmed all checks still pass OR confirm CircleCI build passes and run ./gradlew connectedDebugAndroidTest locally.\n verified that any code or assets from external sources are properly credited in comments and/or in the about file.\n verified that any new UI elements use theme colors. UI Components Style guidelines", "createdAt": "2020-03-10T21:38:28Z", "url": "https://github.com/getodk/collect/pull/3701", "merged": true, "mergeCommit": {"oid": "5d21709af22f3a3cd2d2717bc1d45efad2584d8c"}, "closed": true, "closedAt": "2020-04-23T12:00:17Z", "author": {"login": "chidauri"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcMZcs6gH2gAyMzg2Mzc3MzgwOmRlZWQ3YzJiZThiNDgyYjVhZDJjMzE5ZGJlZWU3MzMxNGE3Y2Q3MzA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcXf5a9gFqTM5Mjc0NjU2Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "deed7c2be8b482b5ad2c319dbeee73314a7cd730", "author": {"user": {"login": "chidauri", "name": "Harshit chittora"}}, "url": "https://github.com/getodk/collect/commit/deed7c2be8b482b5ad2c319dbeee73314a7cd730", "committedDate": "2020-03-10T21:32:09Z", "message": "fix annotate button if default image corrupt"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4NjM4OTk3", "url": "https://github.com/getodk/collect/pull/3701#pullrequestreview-378638997", "createdAt": "2020-03-20T16:34:44Z", "commit": {"oid": "deed7c2be8b482b5ad2c319dbeee73314a7cd730"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNjozNDo0NFrOF5bDFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNjozNDo0NFrOF5bDFQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTc1NjMwOQ==", "bodyText": "I think you don't need this at all... what about a check like?\n        if (binaryName == null || imageView == null || imageView.getVisibility() == GONE) {\n            annotateButton.setEnabled(false);\n        }\n\nthere is a similar check:\nif (binaryName == null) {\n            annotateButton.setEnabled(false);\n        }\n\nin setUpLayout() method so you could remove it there.", "url": "https://github.com/getodk/collect/pull/3701#discussion_r395756309", "createdAt": "2020-03-20T16:34:44Z", "author": {"login": "grzesiek2010"}, "path": "collect_app/src/main/java/org/odk/collect/android/widgets/AnnotateWidget.java", "diffHunk": "@@ -65,6 +65,9 @@ public AnnotateWidget(Context context, QuestionDetails prompt) {\n         imageCaptureHandler = new ImageCaptureHandler();\n         setUpLayout();\n         addCurrentImageToLayout();\n+        if (errorLoadingImage) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "deed7c2be8b482b5ad2c319dbeee73314a7cd730"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "578b4b18f8a3f3156239fc3d54fe842e2c0e2f94", "author": {"user": {"login": "chidauri", "name": "Harshit chittora"}}, "url": "https://github.com/getodk/collect/commit/578b4b18f8a3f3156239fc3d54fe842e2c0e2f94", "committedDate": "2020-03-30T16:02:17Z", "message": "code refactoring"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0NjExOTc0", "url": "https://github.com/getodk/collect/pull/3701#pullrequestreview-384611974", "createdAt": "2020-03-31T10:44:55Z", "commit": {"oid": "578b4b18f8a3f3156239fc3d54fe842e2c0e2f94"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxMDo0NDo1NVrOF-P0hw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxMDo0NDo1NVrOF-P0hw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDgxNTIzOQ==", "bodyText": "It would be good to factor it out to a separate method like adjustAnnotateButtonaAailability(0 for example.", "url": "https://github.com/getodk/collect/pull/3701#discussion_r400815239", "createdAt": "2020-03-31T10:44:55Z", "author": {"login": "grzesiek2010"}, "path": "collect_app/src/main/java/org/odk/collect/android/widgets/AnnotateWidget.java", "diffHunk": "@@ -65,6 +65,9 @@ public AnnotateWidget(Context context, QuestionDetails prompt) {\n         imageCaptureHandler = new ImageCaptureHandler();\n         setUpLayout();\n         addCurrentImageToLayout();\n+        if (binaryName == null || imageView == null || imageView.getVisibility() == GONE) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "578b4b18f8a3f3156239fc3d54fe842e2c0e2f94"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5c78a2aa451900ec28e540570e7798d7762599c2", "author": {"user": {"login": "chidauri", "name": "Harshit chittora"}}, "url": "https://github.com/getodk/collect/commit/5c78a2aa451900ec28e540570e7798d7762599c2", "committedDate": "2020-04-12T17:56:59Z", "message": "add a test for markup button"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyNzQ2NTY3", "url": "https://github.com/getodk/collect/pull/3701#pullrequestreview-392746567", "createdAt": "2020-04-14T09:16:07Z", "commit": {"oid": "5c78a2aa451900ec28e540570e7798d7762599c2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2342, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}