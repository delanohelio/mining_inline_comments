{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAwNTI5Nzc4", "number": 4166, "title": "Define new style for Image Button in Magenta Theme", "bodyText": "Closes #4163\n\nWhat has been done to verify that this works as intended?\nI tested it.\n\n  \n     \n    \n    \n  \n\nWhy is this the best possible solution? Were any other approaches considered?\nI defined a new tint list map_button_tint_list.xml a new style Widget.Collect.ImageButton.MapButton that uses this tint list, to set the color of the map buttons to colorOnSurface for both enabled and disabled state (with reduced opacity).\nHow does this change affect users? Describe intentional changes to behavior and behavior that could have accidentally been affected by code changes. In other words, what are the regression risks?\nThis change introduces a new style that is used by the map buttons on geo_point_layout, geo_poly_layout and instance_map_layout.\nDo we need any specific form for testing your changes? If so, please attach one.\nAny form having GeoWidgets or All Widgets Form.\nDoes this change require updates to documentation? If so, please file an issue here and include the link below.\nNo\nBefore submitting this PR, please make sure you have:\n\n run ./gradlew checkAll and confirmed all checks still pass OR confirm CircleCI build passes and run ./gradlew connectedDebugAndroidTest locally.\n verified that any code or assets from external sources are properly credited in comments and/or in the about file.\n verified that any new UI elements use theme colors. UI Components Style guidelines", "createdAt": "2020-10-09T11:34:44Z", "url": "https://github.com/getodk/collect/pull/4166", "merged": true, "mergeCommit": {"oid": "43874926ce22e6ed8826fbc22194780183ea0adc"}, "closed": true, "closedAt": "2020-11-06T09:16:12Z", "author": {"login": "SaumiaSinghal"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdSEUEogFqTUwNzE5MDk0Ng==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdUESIsgFqTUxMTc2NjE3Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3MTkwOTQ2", "url": "https://github.com/getodk/collect/pull/4166#pullrequestreview-507190946", "createdAt": "2020-10-13T08:28:52Z", "commit": {"oid": "85090cc3e6cd8977661a802ffbe8a5db930995f4"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QwODoyODo1M1rOHgbT5A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QwODoyOToyMlrOHgbVJA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzc2Mzk0MA==", "bodyText": "I'd like to get away from having to use a base theme and a theme. Do we really need to have all image buttons and buttons take on custom styles? I'd rather just have the buttons in the map view explicitly add this style.\nIt might seem nice to have things like this happen automatically but the trade-off is that it can be hard to work out why a view looks a certain way if you don't know a global customization is in place. Especially in a code base of this size!", "url": "https://github.com/getodk/collect/pull/4166#discussion_r503763940", "createdAt": "2020-10-13T08:28:53Z", "author": {"login": "seadowg"}, "path": "collect_app/src/main/res/values/themes.xml", "diffHunk": "@@ -11,4 +11,10 @@\n         <item name=\"android:buttonStyle\">@style/Widget.Collect.Button.Custom</item>\n         <item name=\"imageButtonStyle\">@style/Widget.Collect.ImageButton.Custom.Light</item>\n     </style>\n+\n+    <style name=\"Theme.Collect.Magenta\" parent=\"Theme.Collect.BaseMagenta\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "85090cc3e6cd8977661a802ffbe8a5db930995f4"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzc2NDI2MA==", "bodyText": "I think this should be more explicitly named so it's obvious it's for the image buttons.", "url": "https://github.com/getodk/collect/pull/4166#discussion_r503764260", "createdAt": "2020-10-13T08:29:22Z", "author": {"login": "seadowg"}, "path": "collect_app/src/main/res/color/magenta_theme_tint_list.xml", "diffHunk": "@@ -0,0 +1,5 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "85090cc3e6cd8977661a802ffbe8a5db930995f4"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5MjkwNDA4", "url": "https://github.com/getodk/collect/pull/4166#pullrequestreview-509290408", "createdAt": "2020-10-15T11:46:01Z", "commit": {"oid": "85090cc3e6cd8977661a802ffbe8a5db930995f4"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQxMTo0NjowMVrOHiD0jw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQxMTo0NjowMVrOHiD0jw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTQ3NjIzOQ==", "bodyText": "No I don't mean changing the light and dark theme setup. Magenta is an experiment to see how we can simplify theming and then we'll probably move to setting Dark/Light up in the same way after.\nThese buttons are a a bit of weird setup as they should really be Floating Action Buttons but I don't think we want to make that change now. For the moment I think we should give them a custom style (could be MapButton) and then define a tint list specific to that. We shouldn't need to use custom colors here either: I think we should follow what Material Components does for the FAB and use colorSecondary for enabled and colorOnSurface with a low alpha (so basically transparent) for disabled.", "url": "https://github.com/getodk/collect/pull/4166#discussion_r505476239", "createdAt": "2020-10-15T11:46:01Z", "author": {"login": "seadowg"}, "path": "collect_app/src/main/res/values/themes.xml", "diffHunk": "@@ -11,4 +11,10 @@\n         <item name=\"android:buttonStyle\">@style/Widget.Collect.Button.Custom</item>\n         <item name=\"imageButtonStyle\">@style/Widget.Collect.ImageButton.Custom.Light</item>\n     </style>\n+\n+    <style name=\"Theme.Collect.Magenta\" parent=\"Theme.Collect.BaseMagenta\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzc2Mzk0MA=="}, "originalCommit": {"oid": "85090cc3e6cd8977661a802ffbe8a5db930995f4"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63abf41676a7bd1225acffad038250871c90edab", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/63abf41676a7bd1225acffad038250871c90edab", "committedDate": "2020-10-19T13:11:42Z", "message": "define style for magenta image button"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1418128236c3ba2659f18a733edaec528c662a50", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/1418128236c3ba2659f18a733edaec528c662a50", "committedDate": "2020-10-19T13:11:42Z", "message": "define a new style for MapButton"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5c3ad7d0193c401bba6f64b095466e3778a73195", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/5c3ad7d0193c401bba6f64b095466e3778a73195", "committedDate": "2020-10-19T12:46:08Z", "message": "define a new style for MapButton"}, "afterCommit": {"oid": "1418128236c3ba2659f18a733edaec528c662a50", "author": {"user": {"login": "SaumiaSinghal", "name": "Saumia Singhal"}}, "url": "https://github.com/getodk/collect/commit/1418128236c3ba2659f18a733edaec528c662a50", "committedDate": "2020-10-19T13:11:42Z", "message": "define a new style for MapButton"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTExNzY2MTcz", "url": "https://github.com/getodk/collect/pull/4166#pullrequestreview-511766173", "createdAt": "2020-10-19T13:35:09Z", "commit": {"oid": "1418128236c3ba2659f18a733edaec528c662a50"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2421, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}