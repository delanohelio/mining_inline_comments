{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY1NDMyMzU5", "number": 3604, "title": "Fix rendering of google map labels on top of offline layers", "bodyText": "Closes #3004\nWhat has been done to verify that this works as intended?\nTested on android 9, with\ncountries-raster.zip\nWhy is this the best possible solution? Were any other approaches considered?\nAs discussed on the forums, google maps labels are rendered dynamically so our only option is to turn them off completely in case of offline layers.\nDo we need any specific form for testing your changes? If so, please attach one.\nNo\nDoes this change require updates to documentation? If so, please file an issue here and include the link below.\nNo\nBefore submitting this PR, please make sure you have:\n\n run ./gradlew checkAll and confirmed all checks still pass OR confirm CircleCI build passes and run ./gradlew connectedDebugAndroidTest locally.\n verified that any code or assets from external sources are properly credited in comments and/or in the about file.\n verified that any new UI elements use theme colors. UI Components Style guidelines", "createdAt": "2020-01-21T17:48:02Z", "url": "https://github.com/getodk/collect/pull/3604", "merged": true, "mergeCommit": {"oid": "984d6500acaf703aa9d22ae02ee9717767008122"}, "closed": true, "closedAt": "2020-01-29T08:28:06Z", "author": {"login": "chidauri"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb8kxlyAH2gAyMzY1NDMyMzU5OjkxN2M5Y2JkMmFjZjc5NDFiNWFjZTFkYTQ3YTE2YTU0YWRjOGE0M2U=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb9lT7lAFqTM0ODIxNzYzMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "917c9cbd2acf7941b5ace1da47a16a54adc8a43e", "author": {"user": {"login": "chidauri", "name": "Harshit chittora"}}, "url": "https://github.com/getodk/collect/commit/917c9cbd2acf7941b5ace1da47a16a54adc8a43e", "committedDate": "2020-01-21T17:41:08Z", "message": "fix google map labels on top of offline layers"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4MDEwMDgz", "url": "https://github.com/getodk/collect/pull/3604#pullrequestreview-348010083", "createdAt": "2020-01-24T14:59:21Z", "commit": {"oid": "917c9cbd2acf7941b5ace1da47a16a54adc8a43e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "00c785ac92e325ce0ab7ca0794dd5d93bbb958e9", "author": {"user": {"login": "chidauri", "name": "Harshit chittora"}}, "url": "https://github.com/getodk/collect/commit/00c785ac92e325ce0ab7ca0794dd5d93bbb958e9", "committedDate": "2020-01-24T18:15:10Z", "message": "make map style a local string var"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4MjA0OTQ2", "url": "https://github.com/getodk/collect/pull/3604#pullrequestreview-348204946", "createdAt": "2020-01-24T20:26:09Z", "commit": {"oid": "00c785ac92e325ce0ab7ca0794dd5d93bbb958e9"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQyMDoyNjowOVrOFhpgbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQyMDoyNjowOVrOFhpgbw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDgyNzM3NQ==", "bodyText": "Generally we should avoid using comments. Comments should be used if it's a tricky case that requires an explanation. In 99% cases you can just come up with a better method name. In this case it would be for example setLabelsVisibility(); ahh and we don't use _ in method names.", "url": "https://github.com/getodk/collect/pull/3604#discussion_r370827375", "createdAt": "2020-01-24T20:26:09Z", "author": {"login": "grzesiek2010"}, "path": "collect_app/src/main/java/org/odk/collect/android/geo/GoogleMapFragment.java", "diffHunk": "@@ -462,9 +463,18 @@ private void loadReferenceOverlay() {\n             referenceOverlay = this.map.addTileOverlay(new TileOverlayOptions().tileProvider(\n                 new GoogleMapsMapBoxOfflineTileProvider(referenceLayerFile)\n             ));\n+            switch_google_map_labels(\"off\");\n+        } else {\n+            switch_google_map_labels(\"on\");\n         }\n     }\n \n+    // Turns off google map labels for offline layers to work correctly\n+    private void switch_google_map_labels(String state) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "00c785ac92e325ce0ab7ca0794dd5d93bbb958e9"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ed59d266a2f146fffe4bbc8ecc042a2955d9605", "author": {"user": {"login": "chidauri", "name": "Harshit chittora"}}, "url": "https://github.com/getodk/collect/commit/3ed59d266a2f146fffe4bbc8ecc042a2955d9605", "committedDate": "2020-01-24T20:41:30Z", "message": "Change method name"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4MjE3NjMy", "url": "https://github.com/getodk/collect/pull/3604#pullrequestreview-348217632", "createdAt": "2020-01-24T20:52:34Z", "commit": {"oid": "3ed59d266a2f146fffe4bbc8ecc042a2955d9605"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2251, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}