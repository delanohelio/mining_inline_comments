{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYxNTU5NTE0", "number": 3580, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxNDoxMDozN1rODXiEZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxNDoxMDozN1rODXiEZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2MDAyMDIxOnYy", "diffSide": "RIGHT", "path": "collect_app/src/main/java/org/odk/collect/android/preferences/ServerPreferencesFragment.java", "isResolved": false, "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxNDoxMDozN1rOFc4EEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQxMjoyNjowMFrOFfcw9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTgyMjk5NQ==", "bodyText": "This code looks right to me but I think these listeners should be setup in addAggregatePreferences along with the rest of the setup for each Preference.\nI handn't noticed @grzesiek2010's comment. I think he's right that we should investigate the default behaviour here and understand if this is a problem just for our app or not. If we do go with this solution though I think it's good to move this listener setup to addAggregatePreferences along with the rest of the setup for each Preference.", "url": "https://github.com/getodk/collect/pull/3580#discussion_r365822995", "createdAt": "2020-01-13T14:10:37Z", "author": {"login": "seadowg"}, "path": "collect_app/src/main/java/org/odk/collect/android/preferences/ServerPreferencesFragment.java", "diffHunk": "@@ -490,4 +490,21 @@ private void continueOnBackPressed() {\n     public void doBack() {\n         runGoogleAccountValidation();\n     }\n+\n+    @Override\n+    public void onResume() {\n+        super.onResume();\n+        serverUrlPreference.setOnPreferenceClickListener(preference -> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f7d1ed3f62cc5eadf34f69ec1c164fa80576ef23"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjY4OTIwNg==", "bodyText": "@grzesiek2010 and @seadowg, Yes I had checked that  before pull request and that is the default behaviour\n\nSo, Should I remove the code?", "url": "https://github.com/getodk/collect/pull/3580#discussion_r366689206", "createdAt": "2020-01-15T04:13:29Z", "author": {"login": "Vivever"}, "path": "collect_app/src/main/java/org/odk/collect/android/preferences/ServerPreferencesFragment.java", "diffHunk": "@@ -490,4 +490,21 @@ private void continueOnBackPressed() {\n     public void doBack() {\n         runGoogleAccountValidation();\n     }\n+\n+    @Override\n+    public void onResume() {\n+        super.onResume();\n+        serverUrlPreference.setOnPreferenceClickListener(preference -> {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTgyMjk5NQ=="}, "originalCommit": {"oid": "f7d1ed3f62cc5eadf34f69ec1c164fa80576ef23"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjgwNDY2OQ==", "bodyText": "Yuck that's annoying. I'm not seeing that problem in Android settings but maybe they work around it as well.\nPersonally I think it makes sense to keep these changes as it's definitely a better experience (in the most basic sense it cuts down on taps). What do you think @grzesiek2010?", "url": "https://github.com/getodk/collect/pull/3580#discussion_r366804669", "createdAt": "2020-01-15T10:37:38Z", "author": {"login": "seadowg"}, "path": "collect_app/src/main/java/org/odk/collect/android/preferences/ServerPreferencesFragment.java", "diffHunk": "@@ -490,4 +490,21 @@ private void continueOnBackPressed() {\n     public void doBack() {\n         runGoogleAccountValidation();\n     }\n+\n+    @Override\n+    public void onResume() {\n+        super.onResume();\n+        serverUrlPreference.setOnPreferenceClickListener(preference -> {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTgyMjk5NQ=="}, "originalCommit": {"oid": "f7d1ed3f62cc5eadf34f69ec1c164fa80576ef23"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjgxMDkxMQ==", "bodyText": "I'm not sure but also not strongly against so you can proceed @Vivever but as I said we have more such EditTextPreferences to fix.", "url": "https://github.com/getodk/collect/pull/3580#discussion_r366810911", "createdAt": "2020-01-15T10:50:30Z", "author": {"login": "grzesiek2010"}, "path": "collect_app/src/main/java/org/odk/collect/android/preferences/ServerPreferencesFragment.java", "diffHunk": "@@ -490,4 +490,21 @@ private void continueOnBackPressed() {\n     public void doBack() {\n         runGoogleAccountValidation();\n     }\n+\n+    @Override\n+    public void onResume() {\n+        super.onResume();\n+        serverUrlPreference.setOnPreferenceClickListener(preference -> {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTgyMjk5NQ=="}, "originalCommit": {"oid": "f7d1ed3f62cc5eadf34f69ec1c164fa80576ef23"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Njk5OTA4NA==", "bodyText": "@grzesiek2010, I will find them and fix them.", "url": "https://github.com/getodk/collect/pull/3580#discussion_r366999084", "createdAt": "2020-01-15T17:11:00Z", "author": {"login": "Vivever"}, "path": "collect_app/src/main/java/org/odk/collect/android/preferences/ServerPreferencesFragment.java", "diffHunk": "@@ -490,4 +490,21 @@ private void continueOnBackPressed() {\n     public void doBack() {\n         runGoogleAccountValidation();\n     }\n+\n+    @Override\n+    public void onResume() {\n+        super.onResume();\n+        serverUrlPreference.setOnPreferenceClickListener(preference -> {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTgyMjk5NQ=="}, "originalCommit": {"oid": "f7d1ed3f62cc5eadf34f69ec1c164fa80576ef23"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzk1ODM0NA==", "bodyText": "@grzesiek2010 @seadowg  There was only one extra EditTextPreference (Admin Password in Admin Settings) which I have fixed.\nOther preferences are either checkbox or radio buttons.", "url": "https://github.com/getodk/collect/pull/3580#discussion_r367958344", "createdAt": "2020-01-17T14:20:57Z", "author": {"login": "Vivever"}, "path": "collect_app/src/main/java/org/odk/collect/android/preferences/ServerPreferencesFragment.java", "diffHunk": "@@ -490,4 +490,21 @@ private void continueOnBackPressed() {\n     public void doBack() {\n         runGoogleAccountValidation();\n     }\n+\n+    @Override\n+    public void onResume() {\n+        super.onResume();\n+        serverUrlPreference.setOnPreferenceClickListener(preference -> {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTgyMjk5NQ=="}, "originalCommit": {"oid": "f7d1ed3f62cc5eadf34f69ec1c164fa80576ef23"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODUyMTQ2MQ==", "bodyText": "Thanks for looking at that @Vivever! As far as I can see there are still a few fields in \"User and device identity\" > \"Form metadata\".\nAs I said before it'd be better not to call setPreferenceClickListener in onResume. These should probably go with the rest of the preference setup in ServerPreferencesFragment#addAggregatePreferences. In other fragments it can just be in onCreate. You shouldn't need to setPreferenceClickListener(null) either as the preference object won't (as far as I know) outlive the Fragment in memory.", "url": "https://github.com/getodk/collect/pull/3580#discussion_r368521461", "createdAt": "2020-01-20T12:26:00Z", "author": {"login": "seadowg"}, "path": "collect_app/src/main/java/org/odk/collect/android/preferences/ServerPreferencesFragment.java", "diffHunk": "@@ -490,4 +490,21 @@ private void continueOnBackPressed() {\n     public void doBack() {\n         runGoogleAccountValidation();\n     }\n+\n+    @Override\n+    public void onResume() {\n+        super.onResume();\n+        serverUrlPreference.setOnPreferenceClickListener(preference -> {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTgyMjk5NQ=="}, "originalCommit": {"oid": "f7d1ed3f62cc5eadf34f69ec1c164fa80576ef23"}, "originalPosition": 8}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3432, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}