{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg3MTkxNjQz", "number": 3704, "title": "Refactored the way we deal with buttons visiblility in the main menu", "bodyText": "What has been done to verify that this works as intended?\nI tested implemented changes manually and added automated tests.\nWhy is this the best possible solution? Were any other approaches considered?\nI moved some code from MainMenuActivity to MainMenuViewModel to make the code clearer and also added tests to make sure everything works as expected.\nHow does this change affect users? Describe intentional changes to behavior and behavior that could have accidentally been affected by code changes. In other words, what are the regression risks?\nWe should test hiding main menu buttons in Admin Settings, that's the only functionality that might be affected.\nDo we need any specific form for testing your changes? If so, please attach one.\nNo.\nDoes this change require updates to documentation? If so, please file an issue here and include the link below.\nNo.\nBefore submitting this PR, please make sure you have:\n\n run ./gradlew checkAll and confirmed all checks still pass OR confirm CircleCI build passes and run ./gradlew connectedDebugAndroidTest locally.\n verified that any code or assets from external sources are properly credited in comments and/or in the about file.\n verified that any new UI elements use theme colors. UI Components Style guidelines", "createdAt": "2020-03-12T11:34:25Z", "url": "https://github.com/getodk/collect/pull/3704", "merged": true, "mergeCommit": {"oid": "2348a3d88ec21454c3f6f367b62c271259b0efba"}, "closed": true, "closedAt": "2020-03-20T16:07:40Z", "author": {"login": "grzesiek2010"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcM59udgH2gAyMzg3MTkxNjQzOjJmYzYxYzdhMDJmN2Q5ZmYwMzU4MGEwZjdhOTc5ZGNkZWJiM2UxYzg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcNMwXNgFqTM3NDE0Nzk5Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2fc61c7a02f7d9ff03580a0f7a979dcdebb3e1c8", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/2fc61c7a02f7d9ff03580a0f7a979dcdebb3e1c8", "committedDate": "2020-03-12T11:25:11Z", "message": "Refactored the way we deal with buttons visiblility in the main menu"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "318deecf78b7dd65359d4c83466ff07e5d5c5b6c", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/318deecf78b7dd65359d4c83466ff07e5d5c5b6c", "committedDate": "2020-03-12T11:27:52Z", "message": "Added automated tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzczNzYwNDE2", "url": "https://github.com/getodk/collect/pull/3704#pullrequestreview-373760416", "createdAt": "2020-03-12T17:29:40Z", "commit": {"oid": "318deecf78b7dd65359d4c83466ff07e5d5c5b6c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQxNzoyOTo0MFrOF1oUrw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQxNzoyOTo0MFrOF1oUrw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTc3OTUwMw==", "bodyText": "I might be missing something but I think your tests in MainMenuButtonsVisibilityTest cover everything? Was there a reason you felt like you needed tests for the MainMenuViewModel as well?", "url": "https://github.com/getodk/collect/pull/3704#discussion_r391779503", "createdAt": "2020-03-12T17:29:40Z", "author": {"login": "seadowg"}, "path": "collect_app/src/test/java/org/odk/collect/android/activities/viewmodels/MainMenuViewModelTest.java", "diffHunk": "@@ -87,4 +105,64 @@ public void versionCommitDescription_whenDirtyCommit_returnsCommitCountAndSHAAnd\n         MainMenuViewModel viewModel = new MainMenuViewModel(() -> \"v1.14.0-181-ge51d004d4-dirty\");\n         assertThat(viewModel.getVersionCommitDescription(), equalTo(\"181-ge51d004d4-dirty\"));\n     }\n+\n+    @Test\n+    public void when_editSavedFormButtonIsEnabledInSettings_shouldEditSavedFormButtonBeVisibleReturnTrue() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "318deecf78b7dd65359d4c83466ff07e5d5c5b6c"}, "originalPosition": 40}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63cd6b079829185e71acfd97d252282c7054dd15", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/63cd6b079829185e71acfd97d252282c7054dd15", "committedDate": "2020-03-13T07:11:55Z", "message": "Removed redundant tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "435f1c6f23eb79e6c60acf9a02f954a52655b8e7", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/435f1c6f23eb79e6c60acf9a02f954a52655b8e7", "committedDate": "2020-03-13T07:10:08Z", "message": "Removed redundant tests"}, "afterCommit": {"oid": "63cd6b079829185e71acfd97d252282c7054dd15", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/63cd6b079829185e71acfd97d252282c7054dd15", "committedDate": "2020-03-13T07:11:55Z", "message": "Removed redundant tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0MTQ3OTk3", "url": "https://github.com/getodk/collect/pull/3704#pullrequestreview-374147997", "createdAt": "2020-03-13T09:18:47Z", "commit": {"oid": "63cd6b079829185e71acfd97d252282c7054dd15"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2345, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}