{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYzMjQ4NDIx", "number": 3592, "title": "Stop repeat dialog closing when app is backgrounded", "bodyText": "Closes #3322. Depends on #3576.\nThis removes code in FormEntryActivity that was dismissing dialogs in onPause. As far as I can see there was no reason for that to happen but if someone needed that code speak now!\nAs well as fixing the issues this PR:\n\nRemoves the use of showDialog/dismissDialog from FormEntryActivity\nUse our ProgressDialogFragment for form loading and saving\n\nWhat has been done to verify that this works as intended?\nPlayed around with repeats and backgrounding. I wasn't able to write a test for this as it requires backgrounding the app which we can't do with Espresso and a Robolectric test for FormEntryActivity isn't really feasable right now.\nWhy is this the best possible solution? Were any other approaches considered?\nAs long as the code I deleted wasn't needed in someway then it's certainly the simplest solution.\nHow does this change affect users? Describe intentional changes to behavior and behavior that could have accidentally been affected by code changes. In other words, what are the regression risks?\nShould just fix the issue. Good to test repeats, form loading and saving as the dialogs have all had code changes in someway. Would also be good to investigate any other dialog involving scenarios during form entry to check that the code I've removed wasn't needed for something.\nBefore submitting this PR, please make sure you have:\n\n run ./gradlew checkAll and confirmed all checks still pass OR confirm CircleCI build passes and run ./gradlew connectedDebugAndroidTest locally.\n verified that any code or assets from external sources are properly credited in comments and/or in the about file.\n verified that any new UI elements use theme colors. UI Components Style guidelines", "createdAt": "2020-01-15T17:15:27Z", "url": "https://github.com/getodk/collect/pull/3592", "merged": true, "mergeCommit": {"oid": "774fc60ed6a589c5fec1f77a0677bbf3948eeafb"}, "closed": true, "closedAt": "2020-01-30T15:14:49Z", "author": {"login": "seadowg"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb835d6ABqjI5NzA2MDk1NTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb_W2r2ABqjI5OTI1MDY3NDk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cc987b3056df1665732a4266b568510e26ca8f1a", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/cc987b3056df1665732a4266b568510e26ca8f1a", "committedDate": "2020-01-15T16:39:34Z", "message": "Use ProgressDialogFragment for FormLoadingDialogFragment"}, "afterCommit": {"oid": "67bf0d727b67f980c59681882a95453a0e388ec2", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/67bf0d727b67f980c59681882a95453a0e388ec2", "committedDate": "2020-01-22T15:23:26Z", "message": "Use ProgressDialogFragment for FormLoadingDialogFragment"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "67bf0d727b67f980c59681882a95453a0e388ec2", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/67bf0d727b67f980c59681882a95453a0e388ec2", "committedDate": "2020-01-22T15:23:26Z", "message": "Use ProgressDialogFragment for FormLoadingDialogFragment"}, "afterCommit": {"oid": "ebc0b107cfa1cdb1ba3fb16fd9d6091bf92ce143", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/ebc0b107cfa1cdb1ba3fb16fd9d6091bf92ce143", "committedDate": "2020-01-27T20:01:19Z", "message": "Use ProgressDialogFragment for FormLoadingDialogFragment"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUwMjQyNzAx", "url": "https://github.com/getodk/collect/pull/3592#pullrequestreview-350242701", "createdAt": "2020-01-29T16:24:46Z", "commit": {"oid": "579b68c5500edf4fcbaa2f8846c6e62685bdbbc8"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxNjoyNDo0NlrOFjO1-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxNjoyNDo0NlrOFjO1-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjQ4NzY3Mg==", "bodyText": "Mm. Nice to see this comment gone.", "url": "https://github.com/getodk/collect/pull/3592#discussion_r372487672", "createdAt": "2020-01-29T16:24:46Z", "author": {"login": "lognaturel"}, "path": "collect_app/src/main/java/org/odk/collect/android/activities/FormEntryActivity.java", "diffHunk": "@@ -1640,18 +1636,6 @@ public void showView(View next, AnimationType from) {\n         }\n     }\n \n-    // Hopefully someday we can use managed dialogs when the bugs are fixed\n-    /*\n-     * Ideally, we'd like to use Android to manage dialogs with onCreateDialog()\n-     * and onPrepareDialog(), but dialogs with dynamic content are broken in 1.5", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "579b68c5500edf4fcbaa2f8846c6e62685bdbbc8"}, "originalPosition": 50}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3486046cf8b5de65448c2352f64d9b457f7f5caa", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/3486046cf8b5de65448c2352f64d9b457f7f5caa", "committedDate": "2020-01-30T09:06:49Z", "message": "Use ProgressDialogFragment for form saving dialog"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d59c576242fdeee8cdc3bae81083f0927688119", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/6d59c576242fdeee8cdc3bae81083f0927688119", "committedDate": "2020-01-30T09:06:49Z", "message": "Make sure dialog fragments aren't duplicated"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "003be61a1c56eb7ace93b32634246aae5dcfa1f1", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/003be61a1c56eb7ace93b32634246aae5dcfa1f1", "committedDate": "2020-01-30T09:09:27Z", "message": "Use DialogUtils for FormLoadingDialogFragment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9d3941f86c7d157b7bfef2772d7811687e21f598", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/9d3941f86c7d157b7bfef2772d7811687e21f598", "committedDate": "2020-01-30T09:09:27Z", "message": "Remove dismissDialogs method\n\nThis had created UX issues and as far as we know has no reason\nto exist."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4734ba81429b92378096951d9990a9eb8e8ce196", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/4734ba81429b92378096951d9990a9eb8e8ce196", "committedDate": "2020-01-30T09:09:27Z", "message": "Use ProgressDialogFragment for FormLoadingDialogFragment"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ebc0b107cfa1cdb1ba3fb16fd9d6091bf92ce143", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/ebc0b107cfa1cdb1ba3fb16fd9d6091bf92ce143", "committedDate": "2020-01-27T20:01:19Z", "message": "Use ProgressDialogFragment for FormLoadingDialogFragment"}, "afterCommit": {"oid": "4734ba81429b92378096951d9990a9eb8e8ce196", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/4734ba81429b92378096951d9990a9eb8e8ce196", "committedDate": "2020-01-30T09:09:27Z", "message": "Use ProgressDialogFragment for FormLoadingDialogFragment"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2237, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}