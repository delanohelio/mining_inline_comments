{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEzOTg1Mzcy", "number": 4196, "title": "Force storage migration", "bodyText": "Closes #3360\nWhat has been done to verify that this works as intended?\nI tested the changes manually and added automated tests.\nWhy is this the best possible solution? Were any other approaches considered?\nThis is what we need to do because of google's policy.\nHow does this change affect users? Describe intentional changes to behavior and behavior that could have accidentally been affected by code changes. In other words, what are the regression risks?\n\nfresh installs should start with scoped storage by default\nfor other users migrations should happen automatically once they install and open the app for the first time\nif the automated migration fails the banner as in v1.28.x should be visible and allow users to perform migration manually\nif migration fails and users don't trigger it manually next attempt should take place automatically when such users open the app again after 24h or if the app was killed and reopened\n\nWe reuse the same code which performs migration so migration itself shouldn't be affected. During testing we don't need to test the process a lot.\nDo we need any specific form for testing your changes? If so, please attach one.\nNo.\nDoes this change require updates to documentation? If so, please file an issue here and include the link below.\nNo.\nBefore submitting this PR, please make sure you have:\n\n run ./gradlew checkAll and confirmed all checks still pass OR confirm CircleCI build passes and run ./gradlew connectedDebugAndroidTest locally.\n verified that any code or assets from external sources are properly credited in comments and/or in the about file.\n verified that any new UI elements use theme colors. UI Components Style guidelines", "createdAt": "2020-11-02T11:14:12Z", "url": "https://github.com/getodk/collect/pull/4196", "merged": true, "mergeCommit": {"oid": "4a960267100f9221d5deed479c0dd7bad40d3eda"}, "closed": true, "closedAt": "2020-11-19T18:15:44Z", "author": {"login": "grzesiek2010"}, "timelineItems": {"totalCount": 43, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABda9I50ABqjM5NzYyMTM0Mzg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABddTEZJAFqTUzMjA0MDIyNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7e79e257aaa1e3f8d6ca2a36875d99e2b5ec0457", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/7e79e257aaa1e3f8d6ca2a36875d99e2b5ec0457", "committedDate": "2020-11-02T07:58:19Z", "message": "Try to perform automatic migration if needed"}, "afterCommit": {"oid": "fc8c04a9bdea66715c8328c2cc1bfcd3114950bf", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/fc8c04a9bdea66715c8328c2cc1bfcd3114950bf", "committedDate": "2020-11-09T22:55:34Z", "message": "Fixed alreadyTriedToMigrateDataToday() and added tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fc8c04a9bdea66715c8328c2cc1bfcd3114950bf", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/fc8c04a9bdea66715c8328c2cc1bfcd3114950bf", "committedDate": "2020-11-09T22:55:34Z", "message": "Fixed alreadyTriedToMigrateDataToday() and added tests"}, "afterCommit": {"oid": "714f37775a3f02d728fdd8a0fd87b76e27920161", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/714f37775a3f02d728fdd8a0fd87b76e27920161", "committedDate": "2020-11-10T01:24:10Z", "message": "Fixed alreadyTriedToMigrateDataToday() and added tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "714f37775a3f02d728fdd8a0fd87b76e27920161", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/714f37775a3f02d728fdd8a0fd87b76e27920161", "committedDate": "2020-11-10T01:24:10Z", "message": "Fixed alreadyTriedToMigrateDataToday() and added tests"}, "afterCommit": {"oid": "6a42c3c4f597222fa2ec82d39c09926d3bde8b63", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/6a42c3c4f597222fa2ec82d39c09926d3bde8b63", "committedDate": "2020-11-10T01:56:05Z", "message": "Fixed alreadyTriedToMigrateDataToday() and added tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b59f58ee6e6662c6d955292d2c11770efbdf59c5", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/b59f58ee6e6662c6d955292d2c11770efbdf59c5", "committedDate": "2020-11-12T12:16:16Z", "message": "Bumped androidTargetSdk and added requestLegacyExternalStorage flag"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "05b849ff8051a448f792e5064d7100de25afcdc9", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/05b849ff8051a448f792e5064d7100de25afcdc9", "committedDate": "2020-11-12T12:16:16Z", "message": "Enable scoped storage for fresh installs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c59ace1f9f21abce2d8e70a3a15f981142a6ec36", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/c59ace1f9f21abce2d8e70a3a15f981142a6ec36", "committedDate": "2020-11-12T12:16:45Z", "message": "Try to perform automatic migration if needed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5323eb5aa9be019d437ae7c641d4b78df7b9a47c", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/5323eb5aa9be019d437ae7c641d4b78df7b9a47c", "committedDate": "2020-11-12T12:16:45Z", "message": "Fixed paths in tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c1950b0b90623c67fcf64c83d49dc7ce51d25dfe", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/c1950b0b90623c67fcf64c83d49dc7ce51d25dfe", "committedDate": "2020-11-12T12:16:45Z", "message": "Fixed StorageMigrationTest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f2305b57778f24b4f8322413457374d97ea9a764", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/f2305b57778f24b4f8322413457374d97ea9a764", "committedDate": "2020-11-12T12:16:45Z", "message": "Use scoped storage in tests by default"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8b491a4a30786705b072b2ac3071cadd77a25e5c", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/8b491a4a30786705b072b2ac3071cadd77a25e5c", "committedDate": "2020-11-12T12:16:45Z", "message": "Updated the message displayed in the banner"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0153be2ba4f9b2e9e2044965ae472384c9b04a21", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/0153be2ba4f9b2e9e2044965ae472384c9b04a21", "committedDate": "2020-11-12T12:16:45Z", "message": "Fixed MainMenuButtonsVisibilityTest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c1981520569431603a7e178726f99562c45abb12", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/c1981520569431603a7e178726f99562c45abb12", "committedDate": "2020-11-12T12:16:45Z", "message": "Fixed alreadyTriedToMigrateDataToday() and added tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "084a5786a0d6eb474d70c4f3a3f680bcad1a3ca8", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/084a5786a0d6eb474d70c4f3a3f680bcad1a3ca8", "committedDate": "2020-11-12T12:16:45Z", "message": "Add recreating database helpers to ResetStateRule"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6a42c3c4f597222fa2ec82d39c09926d3bde8b63", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/6a42c3c4f597222fa2ec82d39c09926d3bde8b63", "committedDate": "2020-11-10T01:56:05Z", "message": "Fixed alreadyTriedToMigrateDataToday() and added tests"}, "afterCommit": {"oid": "084a5786a0d6eb474d70c4f3a3f680bcad1a3ca8", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/084a5786a0d6eb474d70c4f3a3f680bcad1a3ca8", "committedDate": "2020-11-12T12:16:45Z", "message": "Add recreating database helpers to ResetStateRule"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1e17aa1fe1640cd0c19b6a578eeb0e95f8e18c40", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/1e17aa1fe1640cd0c19b6a578eeb0e95f8e18c40", "committedDate": "2020-11-12T12:41:23Z", "message": "Tests"}, "afterCommit": {"oid": "8ddac304b26206390cfadc5b335fc7c89c80deed", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/8ddac304b26206390cfadc5b335fc7c89c80deed", "committedDate": "2020-11-12T12:45:44Z", "message": "Tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8ddac304b26206390cfadc5b335fc7c89c80deed", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/8ddac304b26206390cfadc5b335fc7c89c80deed", "committedDate": "2020-11-12T12:45:44Z", "message": "Tests"}, "afterCommit": {"oid": "108820d7465820ec26134bb433f53dc3352c7bac", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/108820d7465820ec26134bb433f53dc3352c7bac", "committedDate": "2020-11-12T13:20:16Z", "message": "Tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "108820d7465820ec26134bb433f53dc3352c7bac", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/108820d7465820ec26134bb433f53dc3352c7bac", "committedDate": "2020-11-12T13:20:16Z", "message": "Tests"}, "afterCommit": {"oid": "ffaaacd608f6773fcdadff1aa7b4b85271f4a9b1", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/ffaaacd608f6773fcdadff1aa7b4b85271f4a9b1", "committedDate": "2020-11-12T13:41:29Z", "message": "Fixed circleCi"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ffaaacd608f6773fcdadff1aa7b4b85271f4a9b1", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/ffaaacd608f6773fcdadff1aa7b4b85271f4a9b1", "committedDate": "2020-11-12T13:41:29Z", "message": "Fixed circleCi"}, "afterCommit": {"oid": "056049d0ddfb0eda5ad1d2675d882c839f8240a9", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/056049d0ddfb0eda5ad1d2675d882c839f8240a9", "committedDate": "2020-11-12T14:05:08Z", "message": "Fixed circleCi"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "056049d0ddfb0eda5ad1d2675d882c839f8240a9", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/056049d0ddfb0eda5ad1d2675d882c839f8240a9", "committedDate": "2020-11-12T14:05:08Z", "message": "Fixed circleCi"}, "afterCommit": {"oid": "988907402b85e2a1455992833548262e5fb3b98d", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/988907402b85e2a1455992833548262e5fb3b98d", "committedDate": "2020-11-12T14:25:46Z", "message": "Fixed circleCi"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "988907402b85e2a1455992833548262e5fb3b98d", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/988907402b85e2a1455992833548262e5fb3b98d", "committedDate": "2020-11-12T14:25:46Z", "message": "Fixed circleCi"}, "afterCommit": {"oid": "026da9f1b9cf6a26fddd5473c4c1b9c6bcb12270", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/026da9f1b9cf6a26fddd5473c4c1b9c6bcb12270", "committedDate": "2020-11-12T14:35:13Z", "message": "Fixed circleCi"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "026da9f1b9cf6a26fddd5473c4c1b9c6bcb12270", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/026da9f1b9cf6a26fddd5473c4c1b9c6bcb12270", "committedDate": "2020-11-12T14:35:13Z", "message": "Fixed circleCi"}, "afterCommit": {"oid": "83fc861dc39a8fd8fe5007d6f9f005c855198481", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/83fc861dc39a8fd8fe5007d6f9f005c855198481", "committedDate": "2020-11-12T14:45:15Z", "message": "Fixed circleCi"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "83fc861dc39a8fd8fe5007d6f9f005c855198481", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/83fc861dc39a8fd8fe5007d6f9f005c855198481", "committedDate": "2020-11-12T14:45:15Z", "message": "Fixed circleCi"}, "afterCommit": {"oid": "7a9bd40109b8bc0ae59a8b10c1de550c8fc14783", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/7a9bd40109b8bc0ae59a8b10c1de550c8fc14783", "committedDate": "2020-11-12T14:58:26Z", "message": "Fixed circleCi"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7a9bd40109b8bc0ae59a8b10c1de550c8fc14783", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/7a9bd40109b8bc0ae59a8b10c1de550c8fc14783", "committedDate": "2020-11-12T14:58:26Z", "message": "Fixed circleCi"}, "afterCommit": {"oid": "f5fe32f44008e458439e80298bbe631e8792c86f", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/f5fe32f44008e458439e80298bbe631e8792c86f", "committedDate": "2020-11-12T15:07:48Z", "message": "Fixed circleCi"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f5fe32f44008e458439e80298bbe631e8792c86f", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/f5fe32f44008e458439e80298bbe631e8792c86f", "committedDate": "2020-11-12T15:07:48Z", "message": "Fixed circleCi"}, "afterCommit": {"oid": "5458b9fa4f12096d933ec6baf2146f5388890fca", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/5458b9fa4f12096d933ec6baf2146f5388890fca", "committedDate": "2020-11-12T15:16:48Z", "message": "Fixed circleCi"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5458b9fa4f12096d933ec6baf2146f5388890fca", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/5458b9fa4f12096d933ec6baf2146f5388890fca", "committedDate": "2020-11-12T15:16:48Z", "message": "Fixed circleCi"}, "afterCommit": {"oid": "763e701aba600499e6cf3782de429c636268df92", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/763e701aba600499e6cf3782de429c636268df92", "committedDate": "2020-11-12T15:38:44Z", "message": "Fixed circleCi"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "763e701aba600499e6cf3782de429c636268df92", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/763e701aba600499e6cf3782de429c636268df92", "committedDate": "2020-11-12T15:38:44Z", "message": "Fixed circleCi"}, "afterCommit": {"oid": "282f81b949214a8196555d44f470b1c7ece7d874", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/282f81b949214a8196555d44f470b1c7ece7d874", "committedDate": "2020-11-12T16:00:22Z", "message": "Fixed circleCi"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "282f81b949214a8196555d44f470b1c7ece7d874", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/282f81b949214a8196555d44f470b1c7ece7d874", "committedDate": "2020-11-12T16:00:22Z", "message": "Fixed circleCi"}, "afterCommit": {"oid": "f2624e1f51a2b0cf646277d4ff24e41554dc2b4b", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/f2624e1f51a2b0cf646277d4ff24e41554dc2b4b", "committedDate": "2020-11-12T16:10:00Z", "message": "Fixed circleCi"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f2624e1f51a2b0cf646277d4ff24e41554dc2b4b", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/f2624e1f51a2b0cf646277d4ff24e41554dc2b4b", "committedDate": "2020-11-12T16:10:00Z", "message": "Fixed circleCi"}, "afterCommit": {"oid": "ec5c50a43f1a9fce8e185bc15139e8a075fa3cb1", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/ec5c50a43f1a9fce8e185bc15139e8a075fa3cb1", "committedDate": "2020-11-12T16:24:04Z", "message": "Fixed circleCi"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ec5c50a43f1a9fce8e185bc15139e8a075fa3cb1", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/ec5c50a43f1a9fce8e185bc15139e8a075fa3cb1", "committedDate": "2020-11-12T16:24:04Z", "message": "Fixed circleCi"}, "afterCommit": {"oid": "dc0ac9f7c4cecd645d74dd8b1413164803895b0b", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/dc0ac9f7c4cecd645d74dd8b1413164803895b0b", "committedDate": "2020-11-12T16:37:15Z", "message": "Fixed circleCi"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dc0ac9f7c4cecd645d74dd8b1413164803895b0b", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/dc0ac9f7c4cecd645d74dd8b1413164803895b0b", "committedDate": "2020-11-12T16:37:15Z", "message": "Fixed circleCi"}, "afterCommit": {"oid": "41a638db006af1e850aba675f6b004eb9f1d6850", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/41a638db006af1e850aba675f6b004eb9f1d6850", "committedDate": "2020-11-12T16:56:08Z", "message": "Fixed circleCi"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "41a638db006af1e850aba675f6b004eb9f1d6850", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/41a638db006af1e850aba675f6b004eb9f1d6850", "committedDate": "2020-11-12T16:56:08Z", "message": "Fixed circleCi"}, "afterCommit": {"oid": "5f1309d05b725e53ea9c90441a15d56149f6ee7a", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/5f1309d05b725e53ea9c90441a15d56149f6ee7a", "committedDate": "2020-11-12T17:06:09Z", "message": "Fixed circleCi"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5f1309d05b725e53ea9c90441a15d56149f6ee7a", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/5f1309d05b725e53ea9c90441a15d56149f6ee7a", "committedDate": "2020-11-12T17:06:09Z", "message": "Fixed circleCi"}, "afterCommit": {"oid": "a2da737445cabd681f9a847deccbb84f7ae7262c", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/a2da737445cabd681f9a847deccbb84f7ae7262c", "committedDate": "2020-11-12T17:24:37Z", "message": "Fixed circleCi"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a2da737445cabd681f9a847deccbb84f7ae7262c", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/a2da737445cabd681f9a847deccbb84f7ae7262c", "committedDate": "2020-11-12T17:24:37Z", "message": "Fixed circleCi"}, "afterCommit": {"oid": "ccdb4bb13de8e776fd94e0e5596792d6b7c82415", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/ccdb4bb13de8e776fd94e0e5596792d6b7c82415", "committedDate": "2020-11-12T17:54:58Z", "message": "Fixed circleCi"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ccdb4bb13de8e776fd94e0e5596792d6b7c82415", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/ccdb4bb13de8e776fd94e0e5596792d6b7c82415", "committedDate": "2020-11-12T17:54:58Z", "message": "Fixed circleCi"}, "afterCommit": {"oid": "9c7d4b58f88c6355cb478998bb53fc9eeb78743f", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/9c7d4b58f88c6355cb478998bb53fc9eeb78743f", "committedDate": "2020-11-12T18:19:08Z", "message": "Fixed circleCi"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9c7d4b58f88c6355cb478998bb53fc9eeb78743f", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/9c7d4b58f88c6355cb478998bb53fc9eeb78743f", "committedDate": "2020-11-12T18:19:08Z", "message": "Fixed circleCi"}, "afterCommit": {"oid": "4dca10346e7d58526734db7c0da75a6e68213164", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/4dca10346e7d58526734db7c0da75a6e68213164", "committedDate": "2020-11-12T19:18:51Z", "message": "Fixed circleCi"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4dca10346e7d58526734db7c0da75a6e68213164", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/4dca10346e7d58526734db7c0da75a6e68213164", "committedDate": "2020-11-12T19:18:51Z", "message": "Fixed circleCi"}, "afterCommit": {"oid": "7ae18c6c2df89e410d567e115aff34862a49f537", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/7ae18c6c2df89e410d567e115aff34862a49f537", "committedDate": "2020-11-12T19:43:07Z", "message": "Fixed circleCi"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7ae18c6c2df89e410d567e115aff34862a49f537", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/7ae18c6c2df89e410d567e115aff34862a49f537", "committedDate": "2020-11-12T19:43:07Z", "message": "Fixed circleCi"}, "afterCommit": {"oid": "c9966cbfa57497b1170af840bab6dd372507dd86", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/c9966cbfa57497b1170af840bab6dd372507dd86", "committedDate": "2020-11-12T19:54:26Z", "message": "Fixed circleCi"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5a8d670f8665047392a556d21a31cb6326bf2171", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/5a8d670f8665047392a556d21a31cb6326bf2171", "committedDate": "2020-11-12T20:11:24Z", "message": "Fixed OutOfMemroryErrors"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c9966cbfa57497b1170af840bab6dd372507dd86", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/c9966cbfa57497b1170af840bab6dd372507dd86", "committedDate": "2020-11-12T19:54:26Z", "message": "Fixed circleCi"}, "afterCommit": {"oid": "5a8d670f8665047392a556d21a31cb6326bf2171", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/5a8d670f8665047392a556d21a31cb6326bf2171", "committedDate": "2020-11-12T20:11:24Z", "message": "Fixed OutOfMemroryErrors"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI5NDY4Mjg0", "url": "https://github.com/getodk/collect/pull/4196#pullrequestreview-529468284", "createdAt": "2020-11-12T20:23:12Z", "commit": {"oid": "5a8d670f8665047392a556d21a31cb6326bf2171"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQyMDoyMzoxMlrOHyM0gQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQyMDoyMzoxMlrOHyM0gQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjQwMDg5Nw==", "bodyText": "Without this my build kept failing it's probably connected somehow to bumping targetSdkVersion https://circleci.com/docs/2.0/language-android/#handling-out-of-memory-errors", "url": "https://github.com/getodk/collect/pull/4196#discussion_r522400897", "createdAt": "2020-11-12T20:23:12Z", "author": {"login": "grzesiek2010"}, "path": "collect_app/build.gradle", "diffHunk": "@@ -200,6 +200,9 @@ android {\n         unitTests {\n             includeAndroidResources = true\n             returnDefaultValues = true\n+            all {\n+                maxHeapSize = \"1024m\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5a8d670f8665047392a556d21a31cb6326bf2171"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMxNjI2MDQ1", "url": "https://github.com/getodk/collect/pull/4196#pullrequestreview-531626045", "createdAt": "2020-11-16T19:12:06Z", "commit": {"oid": "8b491a4a30786705b072b2ac3071cadd77a25e5c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQxOToxMjowNlrOH0Nhvg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQxOToxMjowNlrOH0Nhvg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDUwOTYzMA==", "bodyText": "\"The migration should have happened automatically. If you still see this message it indicates that something went wrong. Please try to perform migration manually.\" -> \"An automatic migration attempt failed. Please migrate manually.\"", "url": "https://github.com/getodk/collect/pull/4196#discussion_r524509630", "createdAt": "2020-11-16T19:12:06Z", "author": {"login": "lognaturel"}, "path": "strings/src/main/res/values/strings.xml", "diffHunk": "@@ -670,7 +670,7 @@\n     <string name=\"save_legacy_settings_warning\">Will be removed in a future version. Please use the QR code above.</string>\n     <string name=\"reason_for_changes_description\">You need to explain the reason for changes to this form</string>\n \n-    <string name=\"scoped_storage_banner_text\">You must migrate Collect forms to private storage to comply with Android requirements. In Collect v1.29, <b>the migration will be forced on install</b>.</string>\n+    <string name=\"scoped_storage_banner_text\">You must migrate Collect forms to private storage to comply with Android requirements. The migration should have happened automatically. If you still see this message it indicates that something went wrong. Please try to perform migration manually.</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8b491a4a30786705b072b2ac3071cadd77a25e5c"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c1226e5b67e8e6e5db880c98b40be54ec96b7b61", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/c1226e5b67e8e6e5db880c98b40be54ec96b7b61", "committedDate": "2020-11-16T21:03:39Z", "message": "Improved strings"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMyMDQwMjI0", "url": "https://github.com/getodk/collect/pull/4196#pullrequestreview-532040224", "createdAt": "2020-11-17T05:54:02Z", "commit": {"oid": "c1226e5b67e8e6e5db880c98b40be54ec96b7b61"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2450, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}