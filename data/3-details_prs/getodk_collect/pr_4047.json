{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc0NDU1ODU5", "number": 4047, "title": "Remove analytics that are no longer actionable", "bodyText": "Closes #3952\nI decided to only add submission analytics for custom endpoints because I don't think tracking custom formList endpoints adds anything. Current analytics show they're almost always set together.\nOtherwise I followed the issue. Let's close it for now and I'll keep track of the other suggestions elsewhere.\nWhat has been done to verify that this works as intended?\nGet, filled, submitted form. I only visually verified the analytics calls but I think that's sufficient.\nWhy is this the best possible solution? Were any other approaches considered?\nI didn't add tests because this seems short-lived and testing would generally require refactoring that doesn't seem like a good idea to take on now.\nHow does this change affect users? Describe intentional changes to behavior and behavior that could have accidentally been affected by code changes. In other words, what are the regression risks?\nThere's no intended change. The one risk I can think of is that I do introduce some conditionals and there could be things like nullpointerexception opportunities that snuck in.\nDo we need any specific form for testing your changes? If so, please attach one.\nNo.\nDoes this change require updates to documentation? If so, please file an issue here and include the link below.\nNo.\nBefore submitting this PR, please make sure you have:\n\n run ./gradlew checkAll and confirmed all checks still pass OR confirm CircleCI build passes and run ./gradlew connectedDebugAndroidTest locally.\n verified that any code or assets from external sources are properly credited in comments and/or in the about file.\n verified that any new UI elements use theme colors. UI Components Style guidelines", "createdAt": "2020-08-27T05:26:42Z", "url": "https://github.com/getodk/collect/pull/4047", "merged": true, "mergeCommit": {"oid": "314247d4869afe6c72e51d28238327039c681261"}, "closed": true, "closedAt": "2020-08-28T09:01:24Z", "author": {"login": "lognaturel"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdC5tc1gBqjM2OTc3NjQxNzE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdDRMmAgFqTQ3NzU2Mzk1MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d08b6ac4e54b7675d481407e438f3e114544490b", "author": {"user": {"login": "lognaturel", "name": "H\u00e9l\u00e8ne Martin"}}, "url": "https://github.com/getodk/collect/commit/d08b6ac4e54b7675d481407e438f3e114544490b", "committedDate": "2020-08-27T05:25:06Z", "message": "Add analytics for submissions to custom endpoint"}, "afterCommit": {"oid": "144b2fcbdaaba3d32e54e16c42a24bf01be40f55", "author": {"user": {"login": "lognaturel", "name": "H\u00e9l\u00e8ne Martin"}}, "url": "https://github.com/getodk/collect/commit/144b2fcbdaaba3d32e54e16c42a24bf01be40f55", "committedDate": "2020-08-27T05:39:09Z", "message": "Add analytics for submissions to custom endpoint"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc2NTI3MzE2", "url": "https://github.com/getodk/collect/pull/4047#pullrequestreview-476527316", "createdAt": "2020-08-27T09:06:49Z", "commit": {"oid": "85c0bc2759a074fb20d2f87f668856c2b9f0cf6e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QwOTowNjo0OVrOHIHRpQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QwOTowNjo0OVrOHIHRpQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODI2OTg2MQ==", "bodyText": "Yay for delegate tests! I think here I'd personally split the tests so that each \"then\" of a \"given\"/\"when\" gets its own test. Can just make it easier to navigate the assertions and change individual features. The trade off is run time of course but these tests are pretty fast once Robolectric has booted up (which is a small cost when you're running everything).", "url": "https://github.com/getodk/collect/pull/4047#discussion_r478269861", "createdAt": "2020-08-27T09:06:49Z", "author": {"login": "seadowg"}, "path": "collect_app/src/test/java/org/odk/collect/android/configure/qr/QRCodeActivityResultDelegateTest.java", "diffHunk": "@@ -53,62 +57,72 @@ public QRCodeDecoder providesQRCodeDecoder() {\n     }\n \n     @Test\n-    public void forSelectPhoto_importsSettingsFromQRCode_showsSuccessToast() {\n-        QRCodeActivityResultDelegate delegate = new QRCodeActivityResultDelegate(context, settingsImporter, fakeQRDecoder);\n+    public void forSelectPhoto_importsSettingsFromQRCode_showsSuccessToast_andLogsAnalytics() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "85c0bc2759a074fb20d2f87f668856c2b9f0cf6e"}, "originalPosition": 34}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "65ea21f672c4f704de4f1c631d95baf26c96ac2e", "author": {"user": {"login": "lognaturel", "name": "H\u00e9l\u00e8ne Martin"}}, "url": "https://github.com/getodk/collect/commit/65ea21f672c4f704de4f1c631d95baf26c96ac2e", "committedDate": "2020-08-27T22:03:54Z", "message": "Remove analytics events that aren't actionable"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b901cb4e3492a46edf0f5ae41e360e095ac4546e", "author": {"user": {"login": "lognaturel", "name": "H\u00e9l\u00e8ne Martin"}}, "url": "https://github.com/getodk/collect/commit/b901cb4e3492a46edf0f5ae41e360e095ac4546e", "committedDate": "2020-08-27T22:03:54Z", "message": "Add separate analytics for different settings import paths"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b30ff7c14fe4ba56628e96f32cc3a83bf0e28114", "author": {"user": {"login": "lognaturel", "name": "H\u00e9l\u00e8ne Martin"}}, "url": "https://github.com/getodk/collect/commit/b30ff7c14fe4ba56628e96f32cc3a83bf0e28114", "committedDate": "2020-08-27T22:03:54Z", "message": "Add analytics for submissions to custom endpoint"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa0ac3e0ec23620c0e6f2e9ef12b7017578efd93", "author": {"user": {"login": "lognaturel", "name": "H\u00e9l\u00e8ne Martin"}}, "url": "https://github.com/getodk/collect/commit/fa0ac3e0ec23620c0e6f2e9ef12b7017578efd93", "committedDate": "2020-08-27T22:03:54Z", "message": "Separate analytics and UI tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "253fe11b74b3f8dbab24af3fa07b0b1f0fd39e64", "author": {"user": {"login": "lognaturel", "name": "H\u00e9l\u00e8ne Martin"}}, "url": "https://github.com/getodk/collect/commit/253fe11b74b3f8dbab24af3fa07b0b1f0fd39e64", "committedDate": "2020-08-27T17:31:53Z", "message": "Separate analytics and UI tests"}, "afterCommit": {"oid": "fa0ac3e0ec23620c0e6f2e9ef12b7017578efd93", "author": {"user": {"login": "lognaturel", "name": "H\u00e9l\u00e8ne Martin"}}, "url": "https://github.com/getodk/collect/commit/fa0ac3e0ec23620c0e6f2e9ef12b7017578efd93", "committedDate": "2020-08-27T22:03:54Z", "message": "Separate analytics and UI tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3NTYzMzEy", "url": "https://github.com/getodk/collect/pull/4047#pullrequestreview-477563312", "createdAt": "2020-08-28T09:00:12Z", "commit": {"oid": "fa0ac3e0ec23620c0e6f2e9ef12b7017578efd93"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3NTYzOTUx", "url": "https://github.com/getodk/collect/pull/4047#pullrequestreview-477563951", "createdAt": "2020-08-28T09:01:09Z", "commit": {"oid": "fa0ac3e0ec23620c0e6f2e9ef12b7017578efd93"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2626, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}