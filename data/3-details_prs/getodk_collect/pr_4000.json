{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYwMTc0MTQz", "number": 4000, "title": "Revise notification behaviour for Match Exactly", "bodyText": "Closes #3999. Blocked by #3992.\nIn addition to the problems described in the issue I also made it so error notifications are cleared/cancelled when a sync succeeds.\nWhat has been done to verify that this works as intended?\nNew/revised tests and was able to verify manually\nWhy is this the best possible solution? Were any other approaches considered?\nI've left some comments inline.\nHow does this change affect users? Describe intentional changes to behavior and behavior that could have accidentally been affected by code changes. In other words, what are the regression risks?\nGood to just check the issue is fixed and that Match Exactly notifications behave as expected.\nBefore submitting this PR, please make sure you have:\n\n run ./gradlew checkAll and confirmed all checks still pass OR confirm CircleCI build passes and run ./gradlew connectedDebugAndroidTest locally.\n verified that any code or assets from external sources are properly credited in comments and/or in the about file.\n verified that any new UI elements use theme colors. UI Components Style guidelines", "createdAt": "2020-07-31T14:00:58Z", "url": "https://github.com/getodk/collect/pull/4000", "merged": true, "mergeCommit": {"oid": "67819a416970d9a2975e556f548b175093bc14e5"}, "closed": true, "closedAt": "2020-07-31T14:47:07Z", "author": {"login": "seadowg"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc6VLbrgH2gAyNDYwMTc0MTQzOjcyZDViNzZjM2RiZDBmODgzOTRhNDRkZDY1NjYzODg1NmM1NjI0Y2E=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc6VWvUAFqTQ1OTIzMjU1OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "72d5b76c3dbd0f88394a44dd656638856c5624ca", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/72d5b76c3dbd0f88394a44dd656638856c5624ca", "committedDate": "2020-07-31T14:34:11Z", "message": "Show auth dialog when refreshing on blank forms causes an auth error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb5f4c1ddf7c27f0e649b68cde77ca5b91bd2044", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/eb5f4c1ddf7c27f0e649b68cde77ca5b91bd2044", "committedDate": "2020-07-31T14:34:11Z", "message": "Make sure multiple fill blank forms are not opened on sync error notification"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d9b24ed8e05ef476502e7cd06d7772e59fd7eb1a", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/d9b24ed8e05ef476502e7cd06d7772e59fd7eb1a", "committedDate": "2020-07-31T14:34:11Z", "message": "Make sure notification cleared when sync success"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f2e852b26e93656918212a038adc623b28617943", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/f2e852b26e93656918212a038adc623b28617943", "committedDate": "2020-07-31T13:45:08Z", "message": "Make sure notification cleared when sync success"}, "afterCommit": {"oid": "d9b24ed8e05ef476502e7cd06d7772e59fd7eb1a", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/d9b24ed8e05ef476502e7cd06d7772e59fd7eb1a", "committedDate": "2020-07-31T14:34:11Z", "message": "Make sure notification cleared when sync success"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5MjI0OTQ5", "url": "https://github.com/getodk/collect/pull/4000#pullrequestreview-459224949", "createdAt": "2020-07-31T14:36:53Z", "commit": {"oid": "d9b24ed8e05ef476502e7cd06d7772e59fd7eb1a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQxNDozNjo1M1rOG6K5bg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQxNDozNjo1M1rOG6K5bg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzY0OTEzNA==", "bodyText": "I decided to revise how the tests are written to drive out the new behaviour rather than just adding more. Along with the changed/new unit tests everything was TDD'd out and I'm pretty sure we didn't lose anything.", "url": "https://github.com/getodk/collect/pull/4000#discussion_r463649134", "createdAt": "2020-07-31T14:36:53Z", "author": {"login": "seadowg"}, "path": "collect_app/src/androidTest/java/org/odk/collect/android/feature/formmanagement/MatchExactlyTest.java", "diffHunk": "@@ -53,40 +52,14 @@ public void whenMatchExactlyEnabled_clickingFillBlankForm_andClickingRefresh_get\n     }\n \n     @Test\n-    public void whenMatchExactlyEnabled_getsLatestFormsFromServer_automaticallyAndRepeatedly() throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d9b24ed8e05ef476502e7cd06d7772e59fd7eb1a"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5MjI1NzE0", "url": "https://github.com/getodk/collect/pull/4000#pullrequestreview-459225714", "createdAt": "2020-07-31T14:37:49Z", "commit": {"oid": "d9b24ed8e05ef476502e7cd06d7772e59fd7eb1a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQxNDozNzo0OVrOG6K7lA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQxNDozNzo0OVrOG6K7lA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzY0OTY4NA==", "bodyText": "Not a fan of changes here but at least it's driven out by a test in Espresso", "url": "https://github.com/getodk/collect/pull/4000#discussion_r463649684", "createdAt": "2020-07-31T14:37:49Z", "author": {"login": "seadowg"}, "path": "collect_app/src/main/AndroidManifest.xml", "diffHunk": "@@ -113,7 +113,7 @@ the specific language governing permissions and limitations under the License.\n             android:configChanges=\"orientation|screenSize\"\n             android:windowSoftInputMode=\"stateHidden\" />\n         <activity android:name=\".activities.InstanceChooserList\" />\n-        <activity android:name=\".activities.FillBlankFormActivity\" />\n+        <activity android:name=\".activities.FillBlankFormActivity\" android:launchMode=\"singleTop\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d9b24ed8e05ef476502e7cd06d7772e59fd7eb1a"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5MjMyNTU4", "url": "https://github.com/getodk/collect/pull/4000#pullrequestreview-459232558", "createdAt": "2020-07-31T14:46:32Z", "commit": {"oid": "d9b24ed8e05ef476502e7cd06d7772e59fd7eb1a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2573, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}