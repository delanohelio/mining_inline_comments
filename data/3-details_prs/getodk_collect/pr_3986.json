{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU2Mzc2NTA2", "number": 3986, "title": "Match exactly errors", "bodyText": "Closes #3959\nAlthough the intention of the issue is just to add errors for Match Exactly mode we talked back and forth about how possible it would be to also improve other error messages in the app. In the end only really Get Blank Form's initial form list fetch had improvements along with Match Exactly. I think any further changes would require us to spec out what we want to see for each flow. Plus, this PR was big enough already.\nWhat has been done to verify that this works as intended?\nPlayed around with the app and also added a lot of new tests (including back fills for existing flows)\nHow does this change affect users? Describe intentional changes to behavior and behavior that could have accidentally been affected by code changes. In other words, what are the regression risks?\nAgain, keeping track of this for QA. I'd be tempted to say we should start playing with some of the features on master after we merge this as the core UI flows are now all in.\nBefore submitting this PR, please make sure you have:\n\n run ./gradlew checkAll and confirmed all checks still pass OR confirm CircleCI build passes and run ./gradlew connectedDebugAndroidTest locally.\n verified that any code or assets from external sources are properly credited in comments and/or in the about file.\n verified that any new UI elements use theme colors. UI Components Style guidelines", "createdAt": "2020-07-24T16:22:18Z", "url": "https://github.com/getodk/collect/pull/3986", "merged": true, "mergeCommit": {"oid": "521eaa46d25cadb87a3ddfbe05a60892d02a5883"}, "closed": true, "closedAt": "2020-07-30T05:29:16Z", "author": {"login": "seadowg"}, "timelineItems": {"totalCount": 53, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc4GkJMgBqjM1ODQ2MjMyODM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc54w-0gFqTQ1ODA4MDE5OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ab977380d1213212278bee0159420aa08dd2411a", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/ab977380d1213212278bee0159420aa08dd2411a", "committedDate": "2020-07-24T16:23:19Z", "message": "Add docs for networkDeferred"}, "afterCommit": {"oid": "018b0f5c34492754773c5b2448d3bbb7eac25846", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/018b0f5c34492754773c5b2448d3bbb7eac25846", "committedDate": "2020-07-24T16:24:35Z", "message": "Add docs for networkDeferred"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1MDIzMzU0", "url": "https://github.com/getodk/collect/pull/3986#pullrequestreview-455023354", "createdAt": "2020-07-24T16:27:09Z", "commit": {"oid": "e2c0baa905b5c61e8448ca60e9b311adaf5da28f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQxNjoyNzoxMFrOG214CQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQxNjoyNzoxMFrOG214CQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDE1ODk4NQ==", "bodyText": "The positive test case for this is currently in GetAndSubmitFormsTest", "url": "https://github.com/getodk/collect/pull/3986#discussion_r460158985", "createdAt": "2020-07-24T16:27:10Z", "author": {"login": "seadowg"}, "path": "collect_app/src/androidTest/java/org/odk/collect/android/feature/formmanagement/GetBlankFormsTest.java", "diffHunk": "@@ -0,0 +1,51 @@\n+package org.odk.collect.android.feature.formmanagement;\n+\n+import androidx.test.ext.junit.runners.AndroidJUnit4;\n+\n+import org.junit.Rule;\n+import org.junit.Test;\n+import org.junit.rules.RuleChain;\n+import org.junit.runner.RunWith;\n+import org.odk.collect.android.R;\n+import org.odk.collect.android.support.CollectTestRule;\n+import org.odk.collect.android.support.TestDependencies;\n+import org.odk.collect.android.support.TestRuleChain;\n+import org.odk.collect.android.support.pages.GetBlankFormPage;\n+\n+@RunWith(AndroidJUnit4.class)\n+public class GetBlankFormsTest {\n+\n+    public CollectTestRule rule = new CollectTestRule();\n+\n+    final TestDependencies testDependencies = new TestDependencies();\n+\n+    @Rule\n+    public RuleChain copyFormChain = TestRuleChain.chain(testDependencies)\n+            .around(rule);\n+\n+    @Test\n+    public void whenThereIsAnAuthenticationErrorFetchingFormList_allowsUserToReenterCredentials() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2c0baa905b5c61e8448ca60e9b311adaf5da28f"}, "originalPosition": 27}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1MDI1NDE5", "url": "https://github.com/getodk/collect/pull/3986#pullrequestreview-455025419", "createdAt": "2020-07-24T16:30:14Z", "commit": {"oid": "e2c0baa905b5c61e8448ca60e9b311adaf5da28f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQxNjozMDoxNFrOG21-JQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQxNjozMDoxNFrOG21-JQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDE2MDU0OQ==", "bodyText": "We could also use the new less granular/more human errors for form download as well, but we'd need to discuss how that works. Collect is currently really verbose and outputs the failure/success status for each form so it's not as simple as just switching out the text.\nI think writing up an issue/feature for how errors should look on Get Blank Form would be ideal.", "url": "https://github.com/getodk/collect/pull/3986#discussion_r460160549", "createdAt": "2020-07-24T16:30:14Z", "author": {"login": "seadowg"}, "path": "collect_app/src/main/java/org/odk/collect/android/activities/FormDownloadListActivity.java", "diffHunk": "@@ -597,33 +572,55 @@ public void formListDownloadingComplete(HashMap<String, ServerFormDetails> resul\n             toggleButtonLabel(toggleButton, listView);\n \n             if (viewModel.isDownloadOnlyMode()) {\n-                //1. First check if all form IDS could be found on the server - Register forms that could not be found\n+                performDownloadModeDownload();\n+            }\n+        } else {\n+            switch (exception.getType()) {\n+                case FETCH_ERROR:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2c0baa905b5c61e8448ca60e9b311adaf5da28f"}, "originalPosition": 171}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1MDI2NTA5", "url": "https://github.com/getodk/collect/pull/3986#pullrequestreview-455026509", "createdAt": "2020-07-24T16:31:53Z", "commit": {"oid": "e2c0baa905b5c61e8448ca60e9b311adaf5da28f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQxNjozMTo1M1rOG22Bxg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQxNjozMTo1M1rOG22Bxg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDE2MTQ3OA==", "bodyText": "We don't care about Result.failure() as the only thing it does is give let us inspect failure counts in following work which we're not doing.", "url": "https://github.com/getodk/collect/pull/3986#discussion_r460161478", "createdAt": "2020-07-24T16:31:53Z", "author": {"login": "seadowg"}, "path": "async/src/main/java/org/odk/collect/async/WorkerAdapter.kt", "diffHunk": "@@ -7,7 +7,12 @@ import androidx.work.WorkerParameters\n abstract class WorkerAdapter(private val spec: TaskSpec, context: Context, workerParams: WorkerParameters) : Worker(context, workerParams) {\n \n     override fun doWork(): Result {\n-        spec.getTask(applicationContext).run()\n-        return Result.success()\n+        val completed = spec.getTask(applicationContext).get()\n+\n+        return if (completed) {\n+            Result.success()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2c0baa905b5c61e8448ca60e9b311adaf5da28f"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1MDI4NDU5", "url": "https://github.com/getodk/collect/pull/3986#pullrequestreview-455028459", "createdAt": "2020-07-24T16:34:55Z", "commit": {"oid": "e2c0baa905b5c61e8448ca60e9b311adaf5da28f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQxNjozNDo1NVrOG22H0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQxNjozNDo1NVrOG22H0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDE2MzAyNA==", "bodyText": "I think there are still a few strings in both the auto send and auto download flows that may end up not translated. This is an existing issue however, so I didn't want to dedicate too much time to restructuring everything to fix it. I reckon we just create an issue for this?", "url": "https://github.com/getodk/collect/pull/3986#discussion_r460163024", "createdAt": "2020-07-24T16:34:55Z", "author": {"login": "seadowg"}, "path": "collect_app/src/main/java/org/odk/collect/android/notifications/NotificationManagerNotifier.java", "diffHunk": "@@ -73,4 +128,13 @@ private boolean allFormsDownloadedSuccessfully(Context context, HashMap<ServerFo\n         }\n         return true;\n     }\n+\n+    // The application context will give us the system's locale\n+    private Resources getLocalizedResources(Context context) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2c0baa905b5c61e8448ca60e9b311adaf5da28f"}, "originalPosition": 146}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1MDI5ODIx", "url": "https://github.com/getodk/collect/pull/3986#pullrequestreview-455029821", "createdAt": "2020-07-24T16:36:57Z", "commit": {"oid": "e2c0baa905b5c61e8448ca60e9b311adaf5da28f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQxNjozNjo1OFrOG22L-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQxNjozNjo1OFrOG22L-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDE2NDA4OQ==", "bodyText": "fetchForm and fetchMediaFile happen to have the same implementation but it felt keeping the separate was the right thing to do\u2122\ufe0f as the call sites don't really know or care that they involve the same work.", "url": "https://github.com/getodk/collect/pull/3986#discussion_r460164089", "createdAt": "2020-07-24T16:36:58Z", "author": {"login": "seadowg"}, "path": "collect_app/src/main/java/org/odk/collect/android/openrosa/api/FormListApi.java", "diffHunk": "@@ -1,10 +1,15 @@\n package org.odk.collect.android.openrosa.api;\n \n+import java.io.InputStream;\n import java.util.List;\n \n public interface FormListApi {\n \n     List<FormListItem> fetchFormList() throws FormApiException;\n \n     ManifestFile fetchManifest(String manifestURL) throws FormApiException;\n+\n+    InputStream fetchForm(String formURL) throws FormApiException;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2c0baa905b5c61e8448ca60e9b311adaf5da28f"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1MDMxNDg5", "url": "https://github.com/getodk/collect/pull/3986#pullrequestreview-455031489", "createdAt": "2020-07-24T16:39:27Z", "commit": {"oid": "e2c0baa905b5c61e8448ca60e9b311adaf5da28f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQxNjozOToyN1rOG22RUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQxNjozOToyN1rOG22RUw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDE2NTQ1OQ==", "bodyText": "I had a good go at chipping away at this but there is far more to be done. I think we need to get to a point where we're not calling this anywhere but ServerFormDownloader to really start tearing it apart. There is a lot of logic around task cancellation in here that needs to get the hell out.", "url": "https://github.com/getodk/collect/pull/3986#discussion_r460165459", "createdAt": "2020-07-24T16:39:27Z", "author": {"login": "seadowg"}, "path": "collect_app/src/main/java/org/odk/collect/android/utilities/MultiFormDownloader.java", "diffHunk": "@@ -44,42 +44,29 @@\n import java.io.OutputStream;\n import java.net.URISyntaxException;\n import java.nio.charset.Charset;\n-import java.util.ArrayList;\n-import java.util.Collections;\n import java.util.HashMap;\n import java.util.List;\n import java.util.Map;\n \n-import javax.inject.Inject;\n-\n import timber.log.Timber;\n \n import static org.odk.collect.android.utilities.FileUtils.LAST_SAVED_FILENAME;\n import static org.odk.collect.android.utilities.FileUtils.STUB_XML;\n import static org.odk.collect.android.utilities.FileUtils.write;\n \n-public class MultiFormDownloader implements FormDownloader {\n+@Deprecated\n+public class MultiFormDownloader {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2c0baa905b5c61e8448ca60e9b311adaf5da28f"}, "originalPosition": 50}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1MDMyNDEw", "url": "https://github.com/getodk/collect/pull/3986#pullrequestreview-455032410", "createdAt": "2020-07-24T16:40:48Z", "commit": {"oid": "e2c0baa905b5c61e8448ca60e9b311adaf5da28f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQxNjo0MDo0OFrOG22UbQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQxNjo0MDo0OFrOG22UbQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDE2NjI1Mw==", "bodyText": "This is just showing the same refresh button in the error color right now. I think ultimately we want a \"badge\" but if everyone can live with this initially it'll save time faffing around with the new beta badging API (or in creating a new icon).", "url": "https://github.com/getodk/collect/pull/3986#discussion_r460166253", "createdAt": "2020-07-24T16:40:48Z", "author": {"login": "seadowg"}, "path": "collect_app/src/main/res/drawable/ic_baseline_refresh_error_24.xml", "diffHunk": "@@ -0,0 +1,10 @@\n+<vector xmlns:android=\"http://schemas.android.com/apk/res/android\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2c0baa905b5c61e8448ca60e9b311adaf5da28f"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1MDM0MDE1", "url": "https://github.com/getodk/collect/pull/3986#pullrequestreview-455034015", "createdAt": "2020-07-24T16:43:13Z", "commit": {"oid": "e2c0baa905b5c61e8448ca60e9b311adaf5da28f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQxNjo0MzoxM1rOG22Zng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQxNjo0MzoxM1rOG22Zng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDE2NzU4Mg==", "bodyText": "I killed all the error messages coming out of here and pretty much all the error logging. Most of it isn't needed to show the errors we're trying to show. Good to check and see if any of it feels like something we'd need to keep.", "url": "https://github.com/getodk/collect/pull/3986#discussion_r460167582", "createdAt": "2020-07-24T16:43:13Z", "author": {"login": "seadowg"}, "path": "collect_app/src/main/java/org/odk/collect/android/openrosa/api/OpenRosaFormListApi.java", "diffHunk": "@@ -27,23 +30,43 @@\n     private final String serverURL;\n     private final String formListPath;\n \n-    public OpenRosaFormListApi(OpenRosaXmlFetcher openRosaXMLFetcher, String serverURL, String formListPath) {\n-        this.openRosaXMLFetcher = openRosaXMLFetcher;\n+    public OpenRosaFormListApi(String serverURL, String formListPath, OpenRosaHttpInterface openRosaHttpInterface, WebCredentialsUtils webCredentialsUtils) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2c0baa905b5c61e8448ca60e9b311adaf5da28f"}, "originalPosition": 29}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1NDcxNDgx", "url": "https://github.com/getodk/collect/pull/3986#pullrequestreview-455471481", "createdAt": "2020-07-27T04:58:39Z", "commit": {"oid": "e2c0baa905b5c61e8448ca60e9b311adaf5da28f"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNDo1ODozOVrOG3Tqbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNToxMjo0MVrOG3T3QA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY0NzAyMw==", "bodyText": "Hah. I held back from asking for this in the last PR. Makes so much more sense.", "url": "https://github.com/getodk/collect/pull/3986#discussion_r460647023", "createdAt": "2020-07-27T04:58:39Z", "author": {"login": "lognaturel"}, "path": "collect_app/src/main/AndroidManifest.xml", "diffHunk": "@@ -113,7 +113,7 @@ the specific language governing permissions and limitations under the License.\n             android:configChanges=\"orientation|screenSize\"\n             android:windowSoftInputMode=\"stateHidden\" />\n         <activity android:name=\".activities.InstanceChooserList\" />\n-        <activity android:name=\".activities.FormChooserListActivity\" />\n+        <activity android:name=\".activities.FillBlankFormActivity\" />", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2c0baa905b5c61e8448ca60e9b311adaf5da28f"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY1MDMwNA==", "bodyText": "This one can also be rolled into a generic error, I think.", "url": "https://github.com/getodk/collect/pull/3986#discussion_r460650304", "createdAt": "2020-07-27T05:12:41Z", "author": {"login": "lognaturel"}, "path": "collect_app/src/main/res/values/strings.xml", "diffHunk": "@@ -150,11 +147,6 @@\n     <string name=\"submission_url\">Submission path</string>\n     <string name=\"font_size\">Text font size</string>\n     <string name=\"change_font_size\">Text font size</string>\n-    <string name=\"access_error\">Error while accessing %s: </string>\n-    <string name=\"manifest_server_error\">Manifest reply does not report an OpenRosa version \u2014 bad server?</string>\n-    <string name=\"root_element_error\">Root element is not &lt;manifest\\&gt; \u2014 was %s</string>\n-    <string name=\"root_namespace_error\">Root element Namespace is incorrect: %s</string>\n-    <string name=\"manifest_tag_error\">Manifest entry %s is missing one or more tags: filename, hash, or downloadUrl</string>\n     <string name=\"form_download_progress\">%1$s. Getting media files: %2$s of %3$s</string>\n     <string name=\"fetching_manifest\">%s. Getting manifest </string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2c0baa905b5c61e8448ca60e9b311adaf5da28f"}, "originalPosition": 30}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ead2041da08ae1e4f02be2c7b4ff0da091e9a20", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/8ead2041da08ae1e4f02be2c7b4ff0da091e9a20", "committedDate": "2020-07-27T13:03:14Z", "message": "Make view model test not rely on repo implementation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "763e4e5b7890c3e2c13d8dcf8e7b7068bfa53b21", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/763e4e5b7890c3e2c13d8dcf8e7b7068bfa53b21", "committedDate": "2020-07-27T13:03:36Z", "message": "Change sync icon when syncing fails"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e1da725ed5550343e32d90ef481fdcedb34c4eaa", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/e1da725ed5550343e32d90ef481fdcedb34c4eaa", "committedDate": "2020-07-27T13:03:36Z", "message": "Avoid using LiveData#getValue in delegate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2c7b496a17fe8984b5047340921997e768fdd4c8", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/2c7b496a17fe8984b5047340921997e768fdd4c8", "committedDate": "2020-07-27T13:03:36Z", "message": "Show notification when there is an error syncing forms"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "85248174923f5d065144c1b0ac54d103a88b8d42", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/85248174923f5d065144c1b0ac54d103a88b8d42", "committedDate": "2020-07-27T13:03:36Z", "message": "Optimize imports"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "372c9d0f12d896b09248a80e5e9e8b4edcf3b112", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/372c9d0f12d896b09248a80e5e9e8b4edcf3b112", "committedDate": "2020-07-27T13:03:36Z", "message": "Clicking on sync error notification navigates to fill blank form"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f69118e154c32775ecc334872ab1407d29cd7d7", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/7f69118e154c32775ecc334872ab1407d29cd7d7", "committedDate": "2020-07-27T13:03:36Z", "message": "Give form synchronizer use case its own error type"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0b0a589c04e0223498e2aaf8d5d076d7790cbc7f", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/0b0a589c04e0223498e2aaf8d5d076d7790cbc7f", "committedDate": "2020-07-27T13:03:36Z", "message": "Bubble up unknown host error from FormListApi\n\nThis removes some test to avoid dealing with compile failures. Will come back for coverage of these."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4fab3192135a7d61fdf29f0261fdb8fbe6ea4d85", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/4fab3192135a7d61fdf29f0261fdb8fbe6ea4d85", "committedDate": "2020-07-27T13:03:36Z", "message": "Add coverage previously in FormListDownloaderTest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "188772961210b0a52a4a8a551287dd5b3537ae77", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/188772961210b0a52a4a8a551287dd5b3537ae77", "committedDate": "2020-07-27T13:03:37Z", "message": "Add test for auth error in Get Blank Forms\n\nThis also changes the auth dialog so it is easier to test. This also improves the accessbility of the flow as hints were missing before."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8de4a52195bb81ce2af993e92623dceab0f2d412", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/8de4a52195bb81ce2af993e92623dceab0f2d412", "committedDate": "2020-07-27T13:03:37Z", "message": "Add tests for Get Blank Form error flows"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2500b578bdc436243f1cb564e276297c2a208159", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/2500b578bdc436243f1cb564e276297c2a208159", "committedDate": "2020-07-27T13:03:37Z", "message": "Revise FormApiException granularity and use instead of SyncException"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b286bdc71afb1db2c284c6ed84b3c3e7cc43a1a5", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/b286bdc71afb1db2c284c6ed84b3c3e7cc43a1a5", "committedDate": "2020-07-27T13:03:37Z", "message": "Delete FormListDownloader"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe04cc690e3860cb219b1a090ab3683d802a9056", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/fe04cc690e3860cb219b1a090ab3683d802a9056", "committedDate": "2020-07-27T13:03:37Z", "message": "Add specific message for unknown host error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "25ded5f460aee4d98a7de7514580ec0ac3f11a36", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/25ded5f460aee4d98a7de7514580ec0ac3f11a36", "committedDate": "2020-07-27T13:03:37Z", "message": "Remove message from FormApiException"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b92e2a9c0d39fabe783784e916b7d5867e13751b", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/b92e2a9c0d39fabe783784e916b7d5867e13751b", "committedDate": "2020-07-27T13:03:38Z", "message": "Include URL in unknown host error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5751dbdc42e20d1caab45487a63913353bc96cd2", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/5751dbdc42e20d1caab45487a63913353bc96cd2", "committedDate": "2020-07-27T13:03:38Z", "message": "Add download mode code back into FormDownloadListActivity"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5ba30a426f5fd0a2f9690a5478045f574e7f3281", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/5ba30a426f5fd0a2f9690a5478045f574e7f3281", "committedDate": "2020-07-27T13:03:38Z", "message": "Prompt user for credentials when match exactly sync fails"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "97d044d1b474f4bc25a2b6882adb34c1350f842d", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/97d044d1b474f4bc25a2b6882adb34c1350f842d", "committedDate": "2020-07-27T13:03:38Z", "message": "Simpify ServerAuthDialogFragment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "56ef7f3df04cbeadec73c1a0f94ae44879d1d195", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/56ef7f3df04cbeadec73c1a0f94ae44879d1d195", "committedDate": "2020-07-27T13:03:38Z", "message": "Deprecate AuthDialogUtility"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0716428a0374d2f08947e6d40dd717f8d8130398", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/0716428a0374d2f08947e6d40dd717f8d8130398", "committedDate": "2020-07-27T13:03:38Z", "message": "Prefill username and password in new server auth dialog"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "21d4b25dae2073f1aee322151be4ecee8bec6d20", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/21d4b25dae2073f1aee322151be4ecee8bec6d20", "committedDate": "2020-07-27T13:03:38Z", "message": "Make sure NotificationManagerNotifier uses correct locale"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb71fe8ad5c2ed2b4ca3f4c2fc84e82aea9d89c1", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/eb71fe8ad5c2ed2b4ca3f4c2fc84e82aea9d89c1", "committedDate": "2020-07-27T13:03:38Z", "message": "Add test for autosend"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "42a66c33c40b4098f019dd83e51860b8355af634", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/42a66c33c40b4098f019dd83e51860b8355af634", "committedDate": "2020-07-27T13:03:39Z", "message": "Move auto send to using scheduler"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e5ae64810adccf2d451558ea71c348be0f31aaf5", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/e5ae64810adccf2d451558ea71c348be0f31aaf5", "committedDate": "2020-07-27T13:03:39Z", "message": "Move auto send notification to Notifier"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5c959a4f583a198a44bde26b4640b77e6d377cca", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/5c959a4f583a198a44bde26b4640b77e6d377cca", "committedDate": "2020-07-27T13:03:39Z", "message": "Make sure form synchronizer keeps downloading forms when one fails"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fd8a1845f9168b578bcd2883a177780d35ca122d", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/fd8a1845f9168b578bcd2883a177780d35ca122d", "committedDate": "2020-07-27T13:03:39Z", "message": "Bring back FormDownloaderTest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "28db0f770554ec1b821d6b7e7d837bb4a52d0b00", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/28db0f770554ec1b821d6b7e7d837bb4a52d0b00", "committedDate": "2020-07-27T13:03:39Z", "message": "Wrap MultiFormDownloader so download failures will bubble up error in match exactly"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a9a167711436045f50f9967e5de323875725d015", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/a9a167711436045f50f9967e5de323875725d015", "committedDate": "2020-07-27T13:03:39Z", "message": "Use FormRepository in MultiFormDownloader"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e03c20d87e981a4c1ce4ee0c88661f98b05b2f4", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/2e03c20d87e981a4c1ce4ee0c88661f98b05b2f4", "committedDate": "2020-07-27T13:03:39Z", "message": "Use FormListApi in MultiFormDownloader"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4a3be489906164e90d393d74bc6ee3e16d2cdcc8", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/4a3be489906164e90d393d74bc6ee3e16d2cdcc8", "committedDate": "2020-07-27T13:03:40Z", "message": "Add docs for networkDeferred"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "46a2b8b2969754c2fcb37e1ad8bb469c17ca17cc", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/46a2b8b2969754c2fcb37e1ad8bb469c17ca17cc", "committedDate": "2020-07-27T13:03:40Z", "message": "Correct typo"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e2c0baa905b5c61e8448ca60e9b311adaf5da28f", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/e2c0baa905b5c61e8448ca60e9b311adaf5da28f", "committedDate": "2020-07-24T16:25:17Z", "message": "Correct typo"}, "afterCommit": {"oid": "46a2b8b2969754c2fcb37e1ad8bb469c17ca17cc", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/46a2b8b2969754c2fcb37e1ad8bb469c17ca17cc", "committedDate": "2020-07-27T13:03:40Z", "message": "Correct typo"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2NzIzOTA5", "url": "https://github.com/getodk/collect/pull/3986#pullrequestreview-456723909", "createdAt": "2020-07-28T14:58:40Z", "commit": {"oid": "46a2b8b2969754c2fcb37e1ad8bb469c17ca17cc"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNDo1ODo0MVrOG4Q6dg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxODozNjo0NlrOG4ZfFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTY1MDU1MA==", "bodyText": "Nit: could this be grouped with the other variant?", "url": "https://github.com/getodk/collect/pull/3986#discussion_r461650550", "createdAt": "2020-07-28T14:58:41Z", "author": {"login": "lognaturel"}, "path": "async/src/main/java/org/odk/collect/async/CoroutineAndWorkManagerScheduler.kt", "diffHunk": "@@ -17,6 +17,19 @@ class CoroutineAndWorkManagerScheduler(private val foreground: CoroutineContext,\n         }\n     }\n \n+    override fun networkDeferred(tag: String, spec: TaskSpec) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46a2b8b2969754c2fcb37e1ad8bb469c17ca17cc"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTc1Njk4MA==", "bodyText": "Seems better to use AUTO_SEND_TAG?", "url": "https://github.com/getodk/collect/pull/3986#discussion_r461756980", "createdAt": "2020-07-28T17:39:11Z", "author": {"login": "lognaturel"}, "path": "collect_app/src/main/java/org/odk/collect/android/activities/InstanceUploaderListActivity.java", "diffHunk": "@@ -207,8 +206,7 @@ void init() {\n      * Updates whether an auto-send job is ongoing.\n      */\n     private void updateAutoSendStatus() {\n-        LiveData<List<WorkInfo>> statuses = WorkManager.getInstance().getWorkInfosForUniqueWorkLiveData(AutoSendWorker.TAG);\n-\n+        LiveData<List<WorkInfo>> statuses = WorkManager.getInstance().getWorkInfosForUniqueWorkLiveData(\"AutoSendWorker\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46a2b8b2969754c2fcb37e1ad8bb469c17ca17cc"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTc2MzQwNw==", "bodyText": "I think we're going to use this in more places including where form design might be the issue. Let's call the resource something like report_to_project_lead.", "url": "https://github.com/getodk/collect/pull/3986#discussion_r461763407", "createdAt": "2020-07-28T17:49:43Z", "author": {"login": "lognaturel"}, "path": "collect_app/src/main/res/values/strings.xml", "diffHunk": "@@ -710,4 +702,7 @@\n     <string name=\"form_update_mode_title\">Blank form update mode</string>\n     <string name=\"previously_downloaded_only\">Previously downloaded forms only</string>\n     <string name=\"form_update_frequency_title\">Automatic update frequency</string>\n+    <string name=\"form_update_error\">Form update failed</string>\n+    <string name=\"generic_network_error\">If you keep having this problem, report it to the person who asked you to collect data.</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46a2b8b2969754c2fcb37e1ad8bb469c17ca17cc"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTc4NDYxMQ==", "bodyText": "Like for the manual update case, this should also include the string server_auth_credentials because that indicates what server needs credentials.", "url": "https://github.com/getodk/collect/pull/3986#discussion_r461784611", "createdAt": "2020-07-28T18:25:48Z", "author": {"login": "lognaturel"}, "path": "collect_app/src/main/java/org/odk/collect/android/preferences/ServerAuthDialogFragment.java", "diffHunk": "@@ -0,0 +1,59 @@\n+package org.odk.collect.android.preferences;\n+\n+import android.app.Dialog;\n+import android.content.Context;\n+import android.content.SharedPreferences;\n+import android.os.Bundle;\n+import android.view.View;\n+\n+import androidx.annotation.NonNull;\n+import androidx.annotation.Nullable;\n+import androidx.appcompat.app.AlertDialog;\n+import androidx.fragment.app.DialogFragment;\n+\n+import org.odk.collect.android.R;\n+import org.odk.collect.android.databinding.ServerAuthDialogBinding;\n+import org.odk.collect.android.injection.DaggerUtils;\n+\n+import javax.inject.Inject;\n+\n+public class ServerAuthDialogFragment extends DialogFragment {\n+\n+    @Inject\n+    PreferencesProvider preferencesProvider;\n+\n+    private View dialogView;\n+\n+    @Override\n+    public void onAttach(@NonNull Context context) {\n+        super.onAttach(context);\n+        DaggerUtils.getComponent(context).inject(this);\n+    }\n+\n+    @NonNull\n+    @Override\n+    public Dialog onCreateDialog(@Nullable Bundle savedInstanceState) {\n+        ServerAuthDialogBinding binding = ServerAuthDialogBinding.inflate(requireActivity().getLayoutInflater());\n+        dialogView = binding.getRoot();\n+\n+        SharedPreferences generalSharedPreferences = preferencesProvider.getGeneralSharedPreferences();\n+        binding.usernameEdit.setText(generalSharedPreferences.getString(GeneralKeys.KEY_USERNAME, \"\"));\n+        binding.passwordEdit.setText(generalSharedPreferences.getString(GeneralKeys.KEY_PASSWORD, \"\"));\n+\n+\n+        return new AlertDialog.Builder(requireContext())\n+                .setTitle(R.string.server_requires_auth)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46a2b8b2969754c2fcb37e1ad8bb469c17ca17cc"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTc4NzU5OQ==", "bodyText": "Yup, looks good to me.", "url": "https://github.com/getodk/collect/pull/3986#discussion_r461787599", "createdAt": "2020-07-28T18:31:03Z", "author": {"login": "lognaturel"}, "path": "collect_app/src/main/java/org/odk/collect/android/openrosa/api/OpenRosaFormListApi.java", "diffHunk": "@@ -27,23 +30,43 @@\n     private final String serverURL;\n     private final String formListPath;\n \n-    public OpenRosaFormListApi(OpenRosaXmlFetcher openRosaXMLFetcher, String serverURL, String formListPath) {\n-        this.openRosaXMLFetcher = openRosaXMLFetcher;\n+    public OpenRosaFormListApi(String serverURL, String formListPath, OpenRosaHttpInterface openRosaHttpInterface, WebCredentialsUtils webCredentialsUtils) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDE2NzU4Mg=="}, "originalCommit": {"oid": "e2c0baa905b5c61e8448ca60e9b311adaf5da28f"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTc4ODkyMA==", "bodyText": "Hah. Never seen sarcophagus used that way but it makes so much sense.", "url": "https://github.com/getodk/collect/pull/3986#discussion_r461788920", "createdAt": "2020-07-28T18:33:15Z", "author": {"login": "lognaturel"}, "path": "collect_app/src/main/java/org/odk/collect/android/formmanagement/ServerFormDownloader.java", "diffHunk": "@@ -0,0 +1,30 @@\n+package org.odk.collect.android.formmanagement;\n+\n+import org.odk.collect.android.R;\n+import org.odk.collect.android.application.Collect;\n+import org.odk.collect.android.utilities.MultiFormDownloader;\n+\n+import java.util.Collections;\n+import java.util.HashMap;\n+\n+/**\n+ * Provides a sarcophagus for {@link org.odk.collect.android.utilities.MultiFormDownloader} so it", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46a2b8b2969754c2fcb37e1ad8bb469c17ca17cc"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTc5MDAwNg==", "bodyText": "In this case we ALSO want to include the \"if it keeps happening, talk to the person who asked you to collect data\" message. I think just concatenating the two with a space would be fine (and concat does the right thing with LTR languages, I believe)", "url": "https://github.com/getodk/collect/pull/3986#discussion_r461790006", "createdAt": "2020-07-28T18:35:04Z", "author": {"login": "lognaturel"}, "path": "collect_app/src/main/java/org/odk/collect/android/formmanagement/FormApiExceptionMapper.java", "diffHunk": "@@ -0,0 +1,23 @@\n+package org.odk.collect.android.formmanagement;\n+\n+import android.content.res.Resources;\n+\n+import org.odk.collect.android.R;\n+import org.odk.collect.android.openrosa.api.FormApiException;\n+\n+public class FormApiExceptionMapper {\n+\n+    private final Resources resources;\n+\n+    public FormApiExceptionMapper(Resources resources) {\n+        this.resources = resources;\n+    }\n+\n+    public String getMessage(FormApiException exception) {\n+        if (exception.getType() == FormApiException.Type.UNKNOWN_HOST) {\n+            return resources.getString(R.string.unknown_host_error, exception.getServerUrl());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46a2b8b2969754c2fcb37e1ad8bb469c17ca17cc"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTc5MDk5OA==", "bodyText": "Why not dialogMessage? That seems a lot more useful.", "url": "https://github.com/getodk/collect/pull/3986#discussion_r461790998", "createdAt": "2020-07-28T18:36:46Z", "author": {"login": "lognaturel"}, "path": "collect_app/src/main/java/org/odk/collect/android/activities/FormDownloadListActivity.java", "diffHunk": "@@ -597,33 +572,55 @@ public void formListDownloadingComplete(HashMap<String, ServerFormDetails> resul\n             toggleButtonLabel(toggleButton, listView);\n \n             if (viewModel.isDownloadOnlyMode()) {\n-                //1. First check if all form IDS could be found on the server - Register forms that could not be found\n+                performDownloadModeDownload();\n+            }\n+        } else {\n+            switch (exception.getType()) {\n+                case FETCH_ERROR:\n+                case UNKNOWN_HOST:\n+                    String dialogMessage = new FormApiExceptionMapper(getResources()).getMessage(exception);\n+                    String dialogTitle = getString(R.string.load_remote_form_error);\n+\n+                    if (viewModel.isDownloadOnlyMode()) {\n+                        setReturnResult(false, getString(R.string.load_remote_form_error), viewModel.getFormResults());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46a2b8b2969754c2fcb37e1ad8bb469c17ca17cc"}, "originalPosition": 177}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "372ee3cbc0a9283de09964bf2eec1b64ada27702", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/372ee3cbc0a9283de09964bf2eec1b64ada27702", "committedDate": "2020-07-29T08:23:21Z", "message": "Move overloaded methods together"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c24fead2405c0e59464eebfd1d4bc06bbea86a48", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/c24fead2405c0e59464eebfd1d4bc06bbea86a48", "committedDate": "2020-07-29T08:24:36Z", "message": "Replace hard coded string with constant"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fcaf757b1032cd90451d4f70f73a0e4ce6284dcf", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/fcaf757b1032cd90451d4f70f73a0e4ce6284dcf", "committedDate": "2020-07-29T08:26:26Z", "message": "Rename string"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "adced4df352c0759aa6bc3ac6380df37692305f6", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/adced4df352c0759aa6bc3ac6380df37692305f6", "committedDate": "2020-07-29T08:56:11Z", "message": "Add server url to auth dialog"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2b2aa62333646d8ac5490655e1def2621d28e5c3", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/2b2aa62333646d8ac5490655e1def2621d28e5c3", "committedDate": "2020-07-29T09:00:04Z", "message": "Use new error messages for dowload mode only"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "53d9100f6a915110fd68e7b979bde3c2b59da552", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/53d9100f6a915110fd68e7b979bde3c2b59da552", "committedDate": "2020-07-29T09:06:44Z", "message": "Improve unknown host message"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e0dceabf39e0714da5eb077b043b9973c3721427", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/e0dceabf39e0714da5eb077b043b9973c3721427", "committedDate": "2020-07-29T13:07:31Z", "message": "Fix spacing on prefs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU4MDYzMjA4", "url": "https://github.com/getodk/collect/pull/3986#pullrequestreview-458063208", "createdAt": "2020-07-30T04:29:36Z", "commit": {"oid": "372ee3cbc0a9283de09964bf2eec1b64ada27702"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQwNDoyOTozNlrOG5SqLQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQwNDoyOTozNlrOG5SqLQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjcyNzcyNQ==", "bodyText": "This needs to be reverted.", "url": "https://github.com/getodk/collect/pull/3986#discussion_r462727725", "createdAt": "2020-07-30T04:29:36Z", "author": {"login": "lognaturel"}, "path": "collect_app/src/main/java/org/odk/collect/android/notifications/NotificationManagerNotifier.java", "diffHunk": "@@ -84,10 +84,11 @@ public void onUpdatesDownloaded(HashMap<ServerFormDetails, String> result) {\n     @Override\n     public void onSyncFailure(FormApiException exception) {\n         Intent intent = new Intent(application, FillBlankFormActivity.class);\n+        intent.putExtra(FillBlankFormActivity.EXTRA_AUTH_REQUIRED, true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "372ee3cbc0a9283de09964bf2eec1b64ada27702"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU4MDgwMTk4", "url": "https://github.com/getodk/collect/pull/3986#pullrequestreview-458080198", "createdAt": "2020-07-30T05:27:57Z", "commit": {"oid": "e0dceabf39e0714da5eb077b043b9973c3721427"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2560, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}