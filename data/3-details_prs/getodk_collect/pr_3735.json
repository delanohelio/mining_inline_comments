{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkyNjQ1NzYx", "number": 3735, "title": "Fixed downloading forms with media files", "bodyText": "Closes #3682\nWhat has been done to verify that this works as intended?\nReproduced the scenario mentioned in the issue and confirmed it seems to be fixed.\nWhy is this the best possible solution? Were any other approaches considered?\nIt's the solution we agreed in the issue. There is no need to build FormDef if the xml file is not changed.\nHow does this change affect users? Describe intentional changes to behavior and behavior that could have accidentally been affected by code changes. In other words, what are the regression risks?\nIt changes a bit the method responsible for downloading forms and media files so it would be good to perform some regression testings in this area.\nDo we need any specific form for testing your changes? If so, please attach one.\nThe form attached to the issue.\nDoes this change require updates to documentation? If so, please file an issue here and include the link below.\nNo.\nBefore submitting this PR, please make sure you have:\n\n run ./gradlew checkAll and confirmed all checks still pass OR confirm CircleCI build passes and run ./gradlew connectedDebugAndroidTest locally.\n verified that any code or assets from external sources are properly credited in comments and/or in the about file.\n verified that any new UI elements use theme colors. UI Components Style guidelines", "createdAt": "2020-03-23T21:21:35Z", "url": "https://github.com/getodk/collect/pull/3735", "merged": true, "mergeCommit": {"oid": "90ab42099b52c808369996ebb119dfcedc775e91"}, "closed": true, "closedAt": "2020-03-26T11:40:12Z", "author": {"login": "grzesiek2010"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcQk9PwgH2gAyMzkyNjQ1NzYxOjNiNjgyOGIwYzA3MzFjM2I1MThiOTExZDYwMzFmODVhOWVjNDYyZTA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcQ2lUDAFqTM4MDU1MjkzMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3b6828b0c0731c3b518b911d6031f85a9ec462e0", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/3b6828b0c0731c3b518b911d6031f85a9ec462e0", "committedDate": "2020-03-23T21:12:21Z", "message": "Fixed downloading forms with media files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "01850677353c8229b0bbd5a3642ed69080e1afb4", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/01850677353c8229b0bbd5a3642ed69080e1afb4", "committedDate": "2020-03-23T21:13:18Z", "message": "Removed redundant exceptions"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgwNTUyODk5", "url": "https://github.com/getodk/collect/pull/3735#pullrequestreview-380552899", "createdAt": "2020-03-24T17:44:28Z", "commit": {"oid": "01850677353c8229b0bbd5a3642ed69080e1afb4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQxNzo0NDoyOFrOF68BGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQxNzo0NDoyOFrOF68BGg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzM0NTA1MA==", "bodyText": "This is not ideal but fine for now. It'd be better to actually enumerate the specific exceptions that can occur but downloadFile throws a generic Exception so we can't.", "url": "https://github.com/getodk/collect/pull/3735#discussion_r397345050", "createdAt": "2020-03-24T17:44:28Z", "author": {"login": "lognaturel"}, "path": "collect_app/src/main/java/org/odk/collect/android/utilities/FormDownloader.java", "diffHunk": "@@ -341,8 +345,7 @@ private Uri saveNewForm(Map<String, String> formInfo, File formFile, String medi\n      * Takes the formName and the URL and attempts to download the specified file. Returns a file\n      * object representing the downloaded file.\n      */\n-    FileResult downloadXform(String formName, String url)\n-            throws IOException, TaskCancelledException, Exception {\n+    FileResult downloadXform(String formName, String url) throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01850677353c8229b0bbd5a3642ed69080e1afb4"}, "originalPosition": 31}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgwNTUyOTMy", "url": "https://github.com/getodk/collect/pull/3735#pullrequestreview-380552932", "createdAt": "2020-03-24T17:44:30Z", "commit": {"oid": "01850677353c8229b0bbd5a3642ed69080e1afb4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2740, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}