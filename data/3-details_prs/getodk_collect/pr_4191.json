{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTExNjQxMTg2", "number": 4191, "title": "Changes in metadata required to update the app to API 29", "bodyText": "This pr addresses two first steps from #3360 (comment)\nWhat has been done to verify that this works as intended?\nI tested the changes manually.\nWhy is this the best possible solution? Were any other approaches considered?\nThis is what we have to do because of changes in privacy policy.\nHow does this change affect users? Describe intentional changes to behavior and behavior that could have accidentally been affected by code changes. In other words, what are the regression risks?\nIt removes two of visible in settings properties SIM serial and subscriber ID then it makes the deviceId not dangerous so if a user opens a form with that metadata they shouldn't be asked for ReadPhoneState permission (unless phone number is also present in metadata which is the last property which requires the permission).\nDo we need any specific form for testing your changes? If so, please attach one.\nmeta.xlsx\nDoes this change require updates to documentation? If so, please file an issue here and include the link below.\nNo.\nBefore submitting this PR, please make sure you have:\n\n run ./gradlew checkAll and confirmed all checks still pass OR confirm CircleCI build passes and run ./gradlew connectedDebugAndroidTest locally.\n verified that any code or assets from external sources are properly credited in comments and/or in the about file.\n verified that any new UI elements use theme colors. UI Components Style guidelines", "createdAt": "2020-10-28T15:36:18Z", "url": "https://github.com/getodk/collect/pull/4191", "merged": true, "mergeCommit": {"oid": "5d539a8ef76325a347d7cb19f3899c7fe668e9b3"}, "closed": true, "closedAt": "2020-11-05T17:26:23Z", "author": {"login": "grzesiek2010"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdW8TsXgH2gAyNTExNjQxMTg2OjMyOTRlNTVlMDAxYzAwZWVlNDUwYzQ3MGM2MTJhM2ZkNjc3YWM5OTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdYny9zgFqTUyMTgzNTQ4Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3294e55e001c00eee450c470c612a3fd677ac995", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/3294e55e001c00eee450c470c612a3fd677ac995", "committedDate": "2020-10-28T11:59:23Z", "message": "Removed subscriberID"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "88ae424672a73e72cddf717563f8645b8c764e28", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/88ae424672a73e72cddf717563f8645b8c764e28", "committedDate": "2020-10-28T12:46:18Z", "message": "Removed simserial"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "acfa8712e19498ea15b8c4a9ad0b44ac1701fc89", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/acfa8712e19498ea15b8c4a9ad0b44ac1701fc89", "committedDate": "2020-10-28T13:10:40Z", "message": "Removed installId"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e268ce02970942f282ab6d2a823392e28691ad93", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/e268ce02970942f282ab6d2a823392e28691ad93", "committedDate": "2020-10-28T14:00:03Z", "message": "Replaced value of deviceID with installID"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8696564177411aae330708d5f7393279f8149a09", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/8696564177411aae330708d5f7393279f8149a09", "committedDate": "2020-10-28T14:20:35Z", "message": "Fixed tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "799484a27910506a564810d4c4e6a8cc9ce2e0f8", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/799484a27910506a564810d4c4e6a8cc9ce2e0f8", "committedDate": "2020-10-28T15:26:42Z", "message": "No longer treat deviceId property as dangerous"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "50ec197e27afa78cca6dd3eea331a5d6db74c9d0", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/50ec197e27afa78cca6dd3eea331a5d6db74c9d0", "committedDate": "2020-10-28T21:59:52Z", "message": "Code improvements"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIwMTYzMzIz", "url": "https://github.com/getodk/collect/pull/4191#pullrequestreview-520163323", "createdAt": "2020-10-29T23:44:54Z", "commit": {"oid": "50ec197e27afa78cca6dd3eea331a5d6db74c9d0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQyMzo0NDo1NVrOHqyfzQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQyMzo0NDo1NVrOHqyfzQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDYyOTU4MQ==", "bodyText": "What effect does having SCHEME_IMEI here have? Seems it should be collect, maybe?", "url": "https://github.com/getodk/collect/pull/4191#discussion_r514629581", "createdAt": "2020-10-29T23:44:55Z", "author": {"login": "lognaturel"}, "path": "collect_app/src/main/java/org/odk/collect/android/logic/PropertyManager.java", "diffHunk": "@@ -112,12 +92,8 @@ public PropertyManager(Application application, RxEventBus rxEventBus, Permissio\n \n     public PropertyManager reload() {\n         try {\n-            // Device-defined properties\n-            IdAndPrefix idp = findDeviceId(context, deviceDetailsProvider);\n-            putProperty(PROPMGR_DEVICE_ID,     idp.prefix,          idp.id);\n+            putProperty(PROPMGR_DEVICE_ID,     SCHEME_IMEI,         deviceDetailsProvider.getDeviceId());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "50ec197e27afa78cca6dd3eea331a5d6db74c9d0"}, "originalPosition": 57}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4f09fcda8db6d55038263b94c3c7f24f21ee00d2", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/4f09fcda8db6d55038263b94c3c7f24f21ee00d2", "committedDate": "2020-11-02T10:27:15Z", "message": "Removed deviceID scheme"}, "afterCommit": {"oid": "2e04b4984323989402ff7af1fdae9ce2566f50d8", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/2e04b4984323989402ff7af1fdae9ce2566f50d8", "committedDate": "2020-11-02T10:43:42Z", "message": "Removed deviceID scheme"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2e04b4984323989402ff7af1fdae9ce2566f50d8", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/2e04b4984323989402ff7af1fdae9ce2566f50d8", "committedDate": "2020-11-02T10:43:42Z", "message": "Removed deviceID scheme"}, "afterCommit": {"oid": "50ec197e27afa78cca6dd3eea331a5d6db74c9d0", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/50ec197e27afa78cca6dd3eea331a5d6db74c9d0", "committedDate": "2020-10-28T21:59:52Z", "message": "Code improvements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "94e954c9456be9b5654fc759d80c31bac9da5c28", "author": {"user": {"login": "grzesiek2010", "name": "Grzegorz Orczykowski"}}, "url": "https://github.com/getodk/collect/commit/94e954c9456be9b5654fc759d80c31bac9da5c28", "committedDate": "2020-11-02T10:53:10Z", "message": "Removed deviceID scheme"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxODM1NDgy", "url": "https://github.com/getodk/collect/pull/4191#pullrequestreview-521835482", "createdAt": "2020-11-02T17:13:23Z", "commit": {"oid": "94e954c9456be9b5654fc759d80c31bac9da5c28"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2445, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}