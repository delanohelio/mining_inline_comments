{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM1OTM5Mjgx", "number": 4291, "title": "Fix crash when stop/pause pressed at the same time while recording", "bodyText": "Closes #4287\nWhat has been done to verify that this works as intended?\nNew tests and verified manually.\nWhy is this the best possible solution? Were any other approaches considered?\nI wanted to make sure to deal with this in the audiorecorder framework as well as just using our standard multi click stuff. Feels risky to allow these sorts of crashes to happen in the framework if the UI doesn't protect it.\nHow does this change affect users? Describe intentional changes to behavior and behavior that could have accidentally been affected by code changes. In other words, what are the regression risks?\nThis should only fix the problem!\nBefore submitting this PR, please make sure you have:\n\n run ./gradlew checkAll and confirmed all checks still pass OR confirm CircleCI build passes and run ./gradlew connectedDebugAndroidTest locally.\n verified that any code or assets from external sources are properly credited in comments and/or in the about file.\n verified that any new UI elements use theme colors. UI Components Style guidelines", "createdAt": "2020-12-10T13:32:12Z", "url": "https://github.com/getodk/collect/pull/4291", "merged": true, "mergeCommit": {"oid": "f47256af2d9c16a73c4199563ee0603b3f52333a"}, "closed": true, "closedAt": "2020-12-11T22:15:04Z", "author": {"login": "seadowg"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdkzCgIAH2gAyNTM1OTM5MjgxOjMyZjhmYmJiMTEzYTEwZDRjNWIyMDk3NjkyM2VkMGMwYmE4OTllMTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdlId0xgH2gAyNTM1OTM5MjgxOmUyMDBkM2U4MDEwNThhZTU1MDk2NWU4MTQxNjY1Yzc4MTU3NWQ4ODg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "32f8fbbb113a10d4c5b20976923ed0c0ba899e18", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/32f8fbbb113a10d4c5b20976923ed0c0ba899e18", "committedDate": "2020-12-10T13:06:24Z", "message": "Make sure stopping recording before start doesn't crash"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "10a06ca7efc9693cd3765a4a642974a514e64933", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/10a06ca7efc9693cd3765a4a642974a514e64933", "committedDate": "2020-12-10T13:11:01Z", "message": "Make sure pause action is safe to be called afer stop"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "97b9a16d88160654802f25ea179e673b98c79274", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/97b9a16d88160654802f25ea179e673b98c79274", "committedDate": "2020-12-10T13:13:31Z", "message": "Use multi click safe buttons for recording controls"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9d5059129949aaec745680d2d15a3a661d906d0a", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/9d5059129949aaec745680d2d15a3a661d906d0a", "committedDate": "2020-12-10T14:05:37Z", "message": "Make sure Robolectric tests are ignoring MultiClickGuard"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fbd7bd302aee5336e9cad30f73ad751b98417eb6", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/fbd7bd302aee5336e9cad30f73ad751b98417eb6", "committedDate": "2020-12-10T14:19:35Z", "message": "Remove multiclick test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "feef25a41cd94582f710debb48124cbc485473ce", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/feef25a41cd94582f710debb48124cbc485473ce", "committedDate": "2020-12-10T14:14:54Z", "message": "Remove multiclick test"}, "afterCommit": {"oid": "fbd7bd302aee5336e9cad30f73ad751b98417eb6", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/fbd7bd302aee5336e9cad30f73ad751b98417eb6", "committedDate": "2020-12-10T14:19:35Z", "message": "Remove multiclick test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ5MjU4MzQ5", "url": "https://github.com/getodk/collect/pull/4291#pullrequestreview-549258349", "createdAt": "2020-12-10T14:36:53Z", "commit": {"oid": "fbd7bd302aee5336e9cad30f73ad751b98417eb6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQxNDozNjo1M1rOIDMVTQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQxNDozNjo1M1rOIDMVTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDIxODcwMQ==", "bodyText": "This test started failing when I disabled the multiclick guard in tests (so that other tests wouldn't fail). We've generally not been testing the multiclick guards (which I think makes sense) so personally I don't think we need this. Happy to chat about it though!", "url": "https://github.com/getodk/collect/pull/4291#discussion_r540218701", "createdAt": "2020-12-10T14:36:53Z", "author": {"login": "seadowg"}, "path": "collect_app/src/test/java/org/odk/collect/android/activities/MainActivityTest.java", "diffHunk": "@@ -82,54 +77,4 @@ public void manageFilesButtonTest() throws Exception {\n         assertEquals(DeleteSavedFormActivity.class.getName(),\n                 shadowIntent.getIntentClass().getName());\n     }\n-\n-    @Test\n-    public void shouldButtonsBeResistantToMulticlicking() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fbd7bd302aee5336e9cad30f73ad751b98417eb6"}, "originalPosition": 22}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ5NDAxMDEw", "url": "https://github.com/getodk/collect/pull/4291#pullrequestreview-549401010", "createdAt": "2020-12-10T16:50:34Z", "commit": {"oid": "fbd7bd302aee5336e9cad30f73ad751b98417eb6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "68dfe0e7b2c89e320f2d739246d565e1ae5fa7d6", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/68dfe0e7b2c89e320f2d739246d565e1ae5fa7d6", "committedDate": "2020-12-11T10:38:19Z", "message": "Change click debounce"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2bb29f57c893dc9e719d2c5e4f0581bd7495d671", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/2bb29f57c893dc9e719d2c5e4f0581bd7495d671", "committedDate": "2020-12-11T13:59:11Z", "message": "Revert \"Change click debounce\"\n\nThis reverts commit 68dfe0e7b2c89e320f2d739246d565e1ae5fa7d6."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e200d3e801058ae550965e8141665c781575d888", "author": {"user": {"login": "seadowg", "name": "Callum Stott"}}, "url": "https://github.com/getodk/collect/commit/e200d3e801058ae550965e8141665c781575d888", "committedDate": "2020-12-11T14:04:15Z", "message": "Avoid multiclick buttons as they block buttons for too long"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2363, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}