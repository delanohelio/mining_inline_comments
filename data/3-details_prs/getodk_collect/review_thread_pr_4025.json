{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY2MzcyMzYz", "number": 4025, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxMToxNDozNlrOEcBRVQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQxNTo0NToxMlrOEhvDmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3ODE2NDA1OnYy", "diffSide": "RIGHT", "path": "collect_app/src/test/java/org/odk/collect/android/widgets/UrlWidgetTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxMToxNDozNlrOHGTNag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxMToxNDozNlrOHGTNag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjM2ODIzNA==", "bodyText": "As discussed the URL widget should behave exactly the same in read only mode (as it is always \"read only\"). That being the case you shouldn't need any tests for read only for the widget.", "url": "https://github.com/getodk/collect/pull/4025#discussion_r476368234", "createdAt": "2020-08-25T11:14:36Z", "author": {"login": "seadowg"}, "path": "collect_app/src/test/java/org/odk/collect/android/widgets/UrlWidgetTest.java", "diffHunk": "@@ -58,9 +59,9 @@ public void getAnswer_whenPromptHasAnswer_returnsAnswer() {\n     }\n \n     @Test\n-    public void usingReadOnlyOption_makeAllClickableElementsDisabled() {\n+    public void usingReadOnlyOption_doesNotShowUrlButton() {\n         UrlWidget widget = createWidget(promptWithReadOnly());\n-        assertThat(widget.getBinding().urlButton.getVisibility(), equalTo(View.GONE));\n+        assertThat(widget.binding.urlButton.getVisibility(), equalTo(View.GONE));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fcfd637743fdf39b2599d5ed7422b4110998f4e4"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3ODE2NzQ1OnYy", "diffSide": "RIGHT", "path": "collect_app/src/main/java/org/odk/collect/android/widgets/UrlWidget.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxMToxNTozN1rOHGTPcQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxMToxNTozN1rOHGTPcQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjM2ODc1Mw==", "bodyText": "As in other comments: lets remove any change in behaviour based on isReadOnly", "url": "https://github.com/getodk/collect/pull/4025#discussion_r476368753", "createdAt": "2020-08-25T11:15:37Z", "author": {"login": "seadowg"}, "path": "collect_app/src/main/java/org/odk/collect/android/widgets/UrlWidget.java", "diffHunk": "@@ -44,7 +43,6 @@ public UrlWidget(Context context, QuestionDetails questionDetails, CustomTabHelp\n     @Override\n     protected View onCreateAnswerView(Context context, FormEntryPrompt prompt, int answerFontSize) {\n         binding = UrlWidgetAnswerBinding.inflate(((Activity) context).getLayoutInflater());\n-        View answerView = binding.getRoot();\n \n         if (prompt.isReadOnly()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fcfd637743fdf39b2599d5ed7422b4110998f4e4"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3ODE3MDYwOnYy", "diffSide": "RIGHT", "path": "collect_app/src/main/res/values/strings.xml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxMToxNjo0M1rOHGTROw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxMToxNjo0M1rOHGTROw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjM2OTIxMQ==", "bodyText": "Lets not change this text at the moment.", "url": "https://github.com/getodk/collect/pull/4025#discussion_r476369211", "createdAt": "2020-08-25T11:16:43Z", "author": {"login": "seadowg"}, "path": "collect_app/src/main/res/values/strings.xml", "diffHunk": "@@ -217,7 +217,7 @@\n     <string name=\"constraint_behavior_on_finalize\">Defer validation until finalized</string>\n     <string name=\"view_change_location\">View or Change Location</string>\n     <string name=\"change_location\">Change Location</string>\n-    <string name=\"open_url\">Open Url</string>\n+    <string name=\"open_url\">Visit Website</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fcfd637743fdf39b2599d5ed7422b4110998f4e4"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAzODA5MDQ1OnYy", "diffSide": "RIGHT", "path": "collect_app/src/main/java/org/odk/collect/android/analytics/AnalyticsEvents.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQxNTo0NDoyMVrOHPNqlA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQxNTo0NDoyMVrOHPNqlA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTcxNDU4MA==", "bodyText": "This doesn't seem right as it's the same as the AUDIO_QUESTION. I think the AUDIO_QUESTION naming and description is just wrong here and probably should be PROMPT and really be used to just track any kind of question/widget.", "url": "https://github.com/getodk/collect/pull/4025#discussion_r485714580", "createdAt": "2020-09-09T15:44:21Z", "author": {"login": "seadowg"}, "path": "collect_app/src/main/java/org/odk/collect/android/analytics/AnalyticsEvents.java", "diffHunk": "@@ -72,6 +72,12 @@ private AnalyticsEvents() {\n      */\n     public static final String AUDIO_QUESTION = \"Prompt\";\n \n+    /**\n+     * Track form definitions with url widget. The action should be the widget name and\n+     * the label should be a hash of the form definition.\n+     */\n+    public static final String URL_WIDGET = \"Prompt\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dcd6c714b015cb3973d12e029e5b7d8f83178b00"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAzODA5NDMyOnYy", "diffSide": "RIGHT", "path": "collect_app/src/main/java/org/odk/collect/android/widgets/WidgetFactory.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQxNTo0NToxMlrOHPNs8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQxNTo0NToxMlrOHPNs8Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTcxNTE4NQ==", "bodyText": "I think the action here should just be \"Url\". What we care about is that the user saw a url question.", "url": "https://github.com/getodk/collect/pull/4025#discussion_r485715185", "createdAt": "2020-09-09T15:45:12Z", "author": {"login": "seadowg"}, "path": "collect_app/src/main/java/org/odk/collect/android/widgets/WidgetFactory.java", "diffHunk": "@@ -122,6 +124,8 @@ public static QuestionWidget createWidgetFromPrompt(FormEntryPrompt prompt, Cont\n                             questionWidget = new StringNumberWidget(context, questionDetails, readOnlyOverride);\n                         } else if (appearance.equals(WidgetAppearanceUtils.URL)) {\n                             questionWidget = new UrlWidget(context, questionDetails, new CustomTabHelper());\n+\n+                            analytics.logEvent(URL_WIDGET, \"UrlWidget\", questionDetails.getFormAnalyticsID());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dcd6c714b015cb3973d12e029e5b7d8f83178b00"}, "originalPosition": 30}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3277, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}