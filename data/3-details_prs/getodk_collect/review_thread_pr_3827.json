{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE3NTU4OTYw", "number": 3827, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxOToxNjo1M1rOD8M_0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxOToxNzoxMVrOD8NAHw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0NDU0MDk3OnYy", "diffSide": "RIGHT", "path": "collect_app/src/androidTest/java/org/odk/collect/android/preferences/qr/ConfigureWithQRCodeTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxOToxNjo1M1rOGVAAsg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxOToxNjo1M1rOGVAAsg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDY3MzQ1OA==", "bodyText": "I only ran into problems with this on my emulator and then couldn't reproduce but I thought it made more sense to use a file path that had nothing to do with how the real object would work. This means it's less likely to clash with anything else and highlights that this is fake/stub.", "url": "https://github.com/getodk/collect/pull/3827#discussion_r424673458", "createdAt": "2020-05-13T19:16:53Z", "author": {"login": "seadowg"}, "path": "collect_app/src/androidTest/java/org/odk/collect/android/preferences/qr/ConfigureWithQRCodeTest.java", "diffHunk": "@@ -168,19 +167,19 @@ public Bitmap generateQRBitMap(String data, int sideLength) throws IOException,\n             return Observable.create(emitter -> {\n                 Bitmap bitmap =\n                         BitmapFactory.decodeResource(\n-                                ApplicationProvider.getApplicationContext().getResources(),\n+                                getApplicationContext().getResources(),\n                                 CHECKER_BACKGROUND_DRAWABLE_ID);\n                 emitter.onNext(bitmap);\n+                FileUtils.saveBitmapToFile(bitmap, getQrCodeFilepath());\n \n                 // save bitmap to test that shareQRCode generates bitmap if file not there\n-                FileUtils.saveBitmapToFile(bitmap, getQrCodeFilepath());\n                 emitter.onComplete();\n             });\n         }\n \n         @Override\n         public String getQrCodeFilepath() {\n-            return new StoragePathProvider().getDirPath(StorageSubdirectory.SETTINGS) + File.separator + \"test-collect-settings.png\";\n+            return getApplicationContext().getExternalFilesDir(null) + File.separator + \"test-collect-settings.png\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b0eef9846aeaefd886fe1cc7b4711594e7c4a354"}, "originalPosition": 143}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0NDU0MTc1OnYy", "diffSide": "RIGHT", "path": "collect_app/src/androidTest/java/org/odk/collect/android/preferences/qr/ConfigureWithQRCodeTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxOToxNzoxMVrOGVABNA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxOToxNzoxMVrOGVABNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDY3MzU4OA==", "bodyText": "Moved this up as it made more sense to me to asser this up front", "url": "https://github.com/getodk/collect/pull/3827#discussion_r424673588", "createdAt": "2020-05-13T19:17:11Z", "author": {"login": "seadowg"}, "path": "collect_app/src/androidTest/java/org/odk/collect/android/preferences/qr/ConfigureWithQRCodeTest.java", "diffHunk": "@@ -132,14 +130,18 @@ public void onMainMenu_clickConfigureQRCode_andClickingOnShareQRCode_startsExter\n                 .clickConfigureQR()\n                 .clickOnId(R.id.menu_item_share);\n \n+        // Check that we've actually generated a QR code to share\n+        File qrcodeFile = new File(path);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b0eef9846aeaefd886fe1cc7b4711594e7c4a354"}, "originalPosition": 92}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3351, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}