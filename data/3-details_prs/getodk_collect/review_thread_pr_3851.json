{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIxMTg1MTI0", "number": 3851, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQwODo1NzoyMFrOEAz8wg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQxMjo1NDoxNlrOEBuxJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5Mjg2NTk0OnYy", "diffSide": "RIGHT", "path": "collect_app/src/main/java/org/odk/collect/android/activities/FormDownloadListActivity.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQwODo1NzoyMFrOGcUhOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQxNzoxNDo1NVrOGclYhQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjM0OTQ5OA==", "bodyText": "Could this not use a ProgressDialogFragment instead?", "url": "https://github.com/getodk/collect/pull/3851#discussion_r432349498", "createdAt": "2020-05-29T08:57:20Z", "author": {"login": "seadowg"}, "path": "collect_app/src/main/java/org/odk/collect/android/activities/FormDownloadListActivity.java", "diffHunk": "@@ -683,7 +684,7 @@ public void onClick(DialogInterface dialog, int i) {\n     }\n \n     private void createProgressDialog() {\n-        progressDialog = new ProgressDialog(this);\n+        progressDialog = new AlertDialog.Builder(this).create();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2a9ed6bc971a2514a627613b48b12c316d57d90c"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjYyNTc5Nw==", "bodyText": "Oh I didn't use ProgressDialogFrgament because I thought that the lifecycle changes are handled here by the ViewModel, so, I just used an AlertDialog instead. But, as I have read  in most of the articles like here, that using a dialog instead of fragment, and handling lifecycle changes by the use of some variable, is a bad practice, so I'll just switch to ProgressDialogFragment here.", "url": "https://github.com/getodk/collect/pull/3851#discussion_r432625797", "createdAt": "2020-05-29T17:14:55Z", "author": {"login": "SaumiaSinghal"}, "path": "collect_app/src/main/java/org/odk/collect/android/activities/FormDownloadListActivity.java", "diffHunk": "@@ -683,7 +684,7 @@ public void onClick(DialogInterface dialog, int i) {\n     }\n \n     private void createProgressDialog() {\n-        progressDialog = new ProgressDialog(this);\n+        progressDialog = new AlertDialog.Builder(this).create();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjM0OTQ5OA=="}, "originalCommit": {"oid": "2a9ed6bc971a2514a627613b48b12c316d57d90c"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwMjUwMDE2OnYy", "diffSide": "RIGHT", "path": "collect_app/src/main/java/org/odk/collect/android/activities/FormDownloadListActivity.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQxMjo1MzoyN1rOGdwL_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQxMjo1MzoyN1rOGdwL_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzg1MTM4OQ==", "bodyText": "This is the right thing to do, but we have a helper that does it for you! You can use DialogUtils.dismissDialog should help you out here.", "url": "https://github.com/getodk/collect/pull/3851#discussion_r433851389", "createdAt": "2020-06-02T12:53:27Z", "author": {"login": "seadowg"}, "path": "collect_app/src/main/java/org/odk/collect/android/activities/FormDownloadListActivity.java", "diffHunk": "@@ -253,26 +258,18 @@ public void onClick(View v) {\n         if (getLastCustomNonConfigurationInstance() instanceof DownloadFormListTask) {\n             downloadFormListTask = (DownloadFormListTask) getLastCustomNonConfigurationInstance();\n             if (downloadFormListTask.getStatus() == AsyncTask.Status.FINISHED) {\n-                try {\n-                    if (progressDialog != null && progressDialog.isShowing()) {\n-                        progressDialog.dismiss();\n-                    }\n-                    viewModel.setProgressDialogShowing(false);\n-                } catch (IllegalArgumentException e) {\n-                    Timber.i(\"Attempting to close a dialog that was not previously opened\");\n+                Fragment dialogFragment = getSupportFragmentManager().findFragmentByTag(ProgressDialogFragment.COLLECT_PROGRESS_DIALOG_TAG);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "30b6145ba5af9bbfd7da28087861efb31bb92e73"}, "originalPosition": 51}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwMjUwMjc3OnYy", "diffSide": "RIGHT", "path": "collect_app/src/main/java/org/odk/collect/android/activities/FormDownloadListActivity.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQxMjo1NDoxNlrOGdwNxw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQxMzoyMzo1MVrOGdxYRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzg1MTg0Nw==", "bodyText": "Like with dismissing you can use DialogUtils.showIfNotShowing. Sorry I should have pointed those out before leading you down the ProgressDialogFragment path!", "url": "https://github.com/getodk/collect/pull/3851#discussion_r433851847", "createdAt": "2020-06-02T12:54:16Z", "author": {"login": "seadowg"}, "path": "collect_app/src/main/java/org/odk/collect/android/activities/FormDownloadListActivity.java", "diffHunk": "@@ -321,11 +318,8 @@ private void downloadFormList() {\n             }\n         } else {\n             viewModel.clearFormDetailsByFormId();\n-            if (progressDialog != null) {\n-                // This is needed because onPrepareDialog() is broken in 1.6.\n-                progressDialog.setMessage(viewModel.getProgressDialogMsg());\n-            }\n-            createProgressDialog();\n+            refreshFormListDialogFragment = new RefreshFormListDialogFragment();\n+            refreshFormListDialogFragment.show(getSupportFragmentManager(), ProgressDialogFragment.COLLECT_PROGRESS_DIALOG_TAG);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "30b6145ba5af9bbfd7da28087861efb31bb92e73"}, "originalPosition": 83}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzg3MDkxNw==", "bodyText": "That's okay! Actually I have used DialogUtils.showIfNotShowing before \ud83d\ude1e", "url": "https://github.com/getodk/collect/pull/3851#discussion_r433870917", "createdAt": "2020-06-02T13:23:51Z", "author": {"login": "SaumiaSinghal"}, "path": "collect_app/src/main/java/org/odk/collect/android/activities/FormDownloadListActivity.java", "diffHunk": "@@ -321,11 +318,8 @@ private void downloadFormList() {\n             }\n         } else {\n             viewModel.clearFormDetailsByFormId();\n-            if (progressDialog != null) {\n-                // This is needed because onPrepareDialog() is broken in 1.6.\n-                progressDialog.setMessage(viewModel.getProgressDialogMsg());\n-            }\n-            createProgressDialog();\n+            refreshFormListDialogFragment = new RefreshFormListDialogFragment();\n+            refreshFormListDialogFragment.show(getSupportFragmentManager(), ProgressDialogFragment.COLLECT_PROGRESS_DIALOG_TAG);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzg1MTg0Nw=="}, "originalCommit": {"oid": "30b6145ba5af9bbfd7da28087861efb31bb92e73"}, "originalPosition": 83}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3376, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}