{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM2MTM2NzY1", "number": 10046, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwMDoxNjowMVrOEILPMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwMDoxNjowMVrOEILPMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3MDA4MTc3OnYy", "diffSide": "RIGHT", "path": "indexing-service/src/main/java/org/apache/druid/indexing/common/task/batch/parallel/PartialDimensionDistributionTask.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwMDoxNjowMVrOGn-wgQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxNTozNTo0OVrOGoXzsQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDU3NTg3Mw==", "bodyText": "How about pushing this code into TaskToolbox.getIndexingTmpDir()? We can check if the directory exists first and then create one.", "url": "https://github.com/apache/druid/pull/10046#discussion_r444575873", "createdAt": "2020-06-24T00:16:01Z", "author": {"login": "jihoonson"}, "path": "indexing-service/src/main/java/org/apache/druid/indexing/common/task/batch/parallel/PartialDimensionDistributionTask.java", "diffHunk": "@@ -200,6 +202,10 @@ public TaskStatus runTask(TaskToolbox toolbox) throws Exception\n     Preconditions.checkNotNull(partitionDimension, \"partitionDimension required in partitionsSpec\");\n     boolean isAssumeGrouped = partitionsSpec.isAssumeGrouped();\n \n+    final File tmpDir = toolbox.getIndexingTmpDir();\n+    // Temporary directory is automatically removed when this IndexTask completes.\n+    FileUtils.forceMkdir(tmpDir);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "62909739a51f91ea2a2a955d4b1df2abc77bbdd5"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDk4NjI4OQ==", "bodyText": "Good idea.  forceMkdir has guards to check if the directory already exists and is actually a directory rather than a file, so I didn't add any extra guards in TaskToolbox.", "url": "https://github.com/apache/druid/pull/10046#discussion_r444986289", "createdAt": "2020-06-24T15:35:49Z", "author": {"login": "morrifeldman"}, "path": "indexing-service/src/main/java/org/apache/druid/indexing/common/task/batch/parallel/PartialDimensionDistributionTask.java", "diffHunk": "@@ -200,6 +202,10 @@ public TaskStatus runTask(TaskToolbox toolbox) throws Exception\n     Preconditions.checkNotNull(partitionDimension, \"partitionDimension required in partitionsSpec\");\n     boolean isAssumeGrouped = partitionsSpec.isAssumeGrouped();\n \n+    final File tmpDir = toolbox.getIndexingTmpDir();\n+    // Temporary directory is automatically removed when this IndexTask completes.\n+    FileUtils.forceMkdir(tmpDir);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDU3NTg3Mw=="}, "originalCommit": {"oid": "62909739a51f91ea2a2a955d4b1df2abc77bbdd5"}, "originalPosition": 22}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2340, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}