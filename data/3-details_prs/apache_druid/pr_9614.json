{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk4MzkwODI4", "number": 9614, "title": "Add tests for valid and invalid datasource names", "bodyText": "", "createdAt": "2020-04-03T21:17:34Z", "url": "https://github.com/apache/druid/pull/9614", "merged": true, "mergeCommit": {"oid": "7bf1ebb0b86f3b5af224cc4ae56868a4d703a061"}, "closed": true, "closedAt": "2020-04-06T23:02:50Z", "author": {"login": "suneet-s"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcUHm2KAH2gAyMzk4MzkwODI4OmY4ZWZlYjcxNWEzMWY1NTYwODJmYWFiZTIyNmE5YjgzYTNkMDlkZjU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcVG7WggFqTM4ODY3NzI5MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f8efeb715a31f556082faabe226a9b83a3d09df5", "author": {"user": {"login": "suneet-s", "name": "Suneet Saldanha"}}, "url": "https://github.com/apache/druid/commit/f8efeb715a31f556082faabe226a9b83a3d09df5", "committedDate": "2020-04-03T21:16:20Z", "message": "Add tests for valid and invalid datasource names"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg3NTkwNDE0", "url": "https://github.com/apache/druid/pull/9614#pullrequestreview-387590414", "createdAt": "2020-04-03T21:26:12Z", "commit": {"oid": "f8efeb715a31f556082faabe226a9b83a3d09df5"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QyMToyNjoxMlrOGAqLLw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QyMToyNzo0NlrOGAqNkg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzM0NDE3NQ==", "bodyText": "The test class can extend NullHandlingTest instead.", "url": "https://github.com/apache/druid/pull/9614#discussion_r403344175", "createdAt": "2020-04-03T21:26:12Z", "author": {"login": "ccaominh"}, "path": "server/src/test/java/org/apache/druid/segment/indexing/DataSchemaTest.java", "diffHunk": "@@ -54,10 +56,20 @@\n import java.nio.charset.StandardCharsets;\n import java.util.Arrays;\n import java.util.Collections;\n+import java.util.List;\n import java.util.Map;\n \n public class DataSchemaTest\n {\n+\n+  private static final String VALID_DATASOURCE_CHARS_NAME = \"alpha123..*~!@#&%^&*()-+ \u0420\u043e\u0441\u0441\u0438\u044f\\\\ \ud55c\uad6d \u4e2d\u56fd!\";\n+  private static final String VALID_DATASOURCE_CHARS_FOR_SERIALIZER = \"alpha123..*~!@#&%^&*()-+ \u0420\u043e\u0441\u0441\u0438\u044f\\\\\\\\ \ud55c\uad6d \u4e2d\u56fd!\";\n+\n+  static {\n+    // testTransformSpec needs NullHandling initialized.\n+    NullHandling.initializeForTests();\n+  }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f8efeb715a31f556082faabe226a9b83a3d09df5"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzM0NDc4Ng==", "bodyText": "Suggest adding a helper method that escapes VALID_DATASOURCE_CHARS_NAME. The helper method can be used here as well as in testSerializeWithInvalidDataSourceName()", "url": "https://github.com/apache/druid/pull/9614#discussion_r403344786", "createdAt": "2020-04-03T21:27:46Z", "author": {"login": "ccaominh"}, "path": "server/src/test/java/org/apache/druid/segment/indexing/DataSchemaTest.java", "diffHunk": "@@ -54,10 +56,20 @@\n import java.nio.charset.StandardCharsets;\n import java.util.Arrays;\n import java.util.Collections;\n+import java.util.List;\n import java.util.Map;\n \n public class DataSchemaTest\n {\n+\n+  private static final String VALID_DATASOURCE_CHARS_NAME = \"alpha123..*~!@#&%^&*()-+ \u0420\u043e\u0441\u0441\u0438\u044f\\\\ \ud55c\uad6d \u4e2d\u56fd!\";\n+  private static final String VALID_DATASOURCE_CHARS_FOR_SERIALIZER = \"alpha123..*~!@#&%^&*()-+ \u0420\u043e\u0441\u0441\u0438\u044f\\\\\\\\ \ud55c\uad6d \u4e2d\u56fd!\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f8efeb715a31f556082faabe226a9b83a3d09df5"}, "originalPosition": 23}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0422580a16dfe485e3fa85ad3959f80d0bd029a5", "author": {"user": {"login": "suneet-s", "name": "Suneet Saldanha"}}, "url": "https://github.com/apache/druid/commit/0422580a16dfe485e3fa85ad3959f80d0bd029a5", "committedDate": "2020-04-06T16:55:48Z", "message": "code review"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg4NDY1MjY5", "url": "https://github.com/apache/druid/pull/9614#pullrequestreview-388465269", "createdAt": "2020-04-06T17:27:19Z", "commit": {"oid": "0422580a16dfe485e3fa85ad3959f80d0bd029a5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c918fb003a56d1b1c3bb48edee489bdf44a7c6b", "author": {"user": {"login": "suneet-s", "name": "Suneet Saldanha"}}, "url": "https://github.com/apache/druid/commit/4c918fb003a56d1b1c3bb48edee489bdf44a7c6b", "committedDate": "2020-04-06T19:18:15Z", "message": "clean up dependencies"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg4Njc2NzEw", "url": "https://github.com/apache/druid/pull/9614#pullrequestreview-388676710", "createdAt": "2020-04-06T23:01:14Z", "commit": {"oid": "4c918fb003a56d1b1c3bb48edee489bdf44a7c6b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQyMzowMToxNFrOGBs_yA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQyMzowMToxNFrOGBs_yA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDQzODk4NA==", "bodyText": "nit: it's actually InitializedNullHandlingTest that you want, but the one you've extended also initializes null handling", "url": "https://github.com/apache/druid/pull/9614#discussion_r404438984", "createdAt": "2020-04-06T23:01:14Z", "author": {"login": "clintropolis"}, "path": "server/src/test/java/org/apache/druid/segment/indexing/DataSchemaTest.java", "diffHunk": "@@ -54,10 +57,14 @@\n import java.nio.charset.StandardCharsets;\n import java.util.Arrays;\n import java.util.Collections;\n+import java.util.List;\n import java.util.Map;\n \n-public class DataSchemaTest\n+public class DataSchemaTest extends NullHandlingTest", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c918fb003a56d1b1c3bb48edee489bdf44a7c6b"}, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg4Njc3Mjkw", "url": "https://github.com/apache/druid/pull/9614#pullrequestreview-388677290", "createdAt": "2020-04-06T23:02:45Z", "commit": {"oid": "4c918fb003a56d1b1c3bb48edee489bdf44a7c6b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2798, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}