{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI1NTU3MTQ3", "number": 9957, "title": "support customized factory.json via IndexSpec for segment persist", "bodyText": "Description\nThis PR adds the ability to write define a custom SegmentizerFactory implementation when writing out factory.json during index merging, via the IndexSpec on the TuningConfig of an ingestion task, implementing part of proposal #9953. Note that otherwise standard Druid segments are written, this just allows customized additional or alternative logic to be performed when loading the Segment. Since this is primarily an experimental mechanism, this is purposefully not documented at this time, in favor of seeing how  #9953 evolves, and may eventually need replaced with the mechanism to write out fully custom segments.\n\nThis PR has:\n\n been self-reviewed.\n added documentation for new or modified features or behaviors.\n added Javadocs for most classes and all non-trivial methods. Linked related entities via Javadoc links.\n added comments explaining the \"why\" and the intent of the code wherever would not be obvious for an unfamiliar reader.\n added unit tests or modified existing tests to cover new code paths.\n added integration tests.\n been tested in a test Druid cluster.\n\n\nKey changed/added classes in this PR\n\nIndexMergerV9\nIndexSpec", "createdAt": "2020-05-31T04:02:51Z", "url": "https://github.com/apache/druid/pull/9957", "merged": true, "mergeCommit": {"oid": "c690d10a7d0de09db90a265e81ee162e23f1706e"}, "closed": true, "closedAt": "2020-06-01T23:36:33Z", "author": {"login": "clintropolis"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcmfT8rgH2gAyNDI1NTU3MTQ3OjQ1ZDBlMzk1YjljZTFmNzc1MjU1YWQ5YmZmNDc3NTYwNzJiYTBlMjQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcnI5Q5gFqTQyMjI0NzIyMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "45d0e395b9ce1f775255ad9bff47756072ba0e24", "author": {"user": {"login": "clintropolis", "name": "Clint Wylie"}}, "url": "https://github.com/apache/druid/commit/45d0e395b9ce1f775255ad9bff47756072ba0e24", "committedDate": "2020-05-30T23:04:03Z", "message": "support customized factory.json via IndexSpec for segment persist"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyMTM5OTU1", "url": "https://github.com/apache/druid/pull/9957#pullrequestreview-422139955", "createdAt": "2020-06-01T20:00:21Z", "commit": {"oid": "45d0e395b9ce1f775255ad9bff47756072ba0e24"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQyMDowMDoyMVrOGdYKRQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQyMDowMDoyMVrOGdYKRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzQ1NzczMw==", "bodyText": "May be useful to add an EqualsVerifier test to IndexSpecTest for this.", "url": "https://github.com/apache/druid/pull/9957#discussion_r433457733", "createdAt": "2020-06-01T20:00:21Z", "author": {"login": "ccaominh"}, "path": "processing/src/main/java/org/apache/druid/segment/IndexSpec.java", "diffHunk": "@@ -150,13 +174,14 @@ public boolean equals(Object o)\n     return Objects.equals(bitmapSerdeFactory, indexSpec.bitmapSerdeFactory) &&\n            dimensionCompression == indexSpec.dimensionCompression &&\n            metricCompression == indexSpec.metricCompression &&\n-           longEncoding == indexSpec.longEncoding;\n+           longEncoding == indexSpec.longEncoding &&", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "45d0e395b9ce1f775255ad9bff47756072ba0e24"}, "originalPosition": 80}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyMTQwODE0", "url": "https://github.com/apache/druid/pull/9957#pullrequestreview-422140814", "createdAt": "2020-06-01T20:01:43Z", "commit": {"oid": "45d0e395b9ce1f775255ad9bff47756072ba0e24"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "02babe51348ec6c2178d3b339afdedd6f4215db6", "author": {"user": {"login": "clintropolis", "name": "Clint Wylie"}}, "url": "https://github.com/apache/druid/commit/02babe51348ec6c2178d3b339afdedd6f4215db6", "committedDate": "2020-06-01T20:57:23Z", "message": "equals verifier"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyMjM5Mjc4", "url": "https://github.com/apache/druid/pull/9957#pullrequestreview-422239278", "createdAt": "2020-06-01T23:08:02Z", "commit": {"oid": "02babe51348ec6c2178d3b339afdedd6f4215db6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyMjQ3MjIx", "url": "https://github.com/apache/druid/pull/9957#pullrequestreview-422247221", "createdAt": "2020-06-01T23:30:55Z", "commit": {"oid": "02babe51348ec6c2178d3b339afdedd6f4215db6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2431, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}