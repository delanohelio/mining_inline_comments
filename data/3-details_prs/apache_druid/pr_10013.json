{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMyMjQ3NDAy", "number": 10013, "title": "Add NonnullPair", "bodyText": "Description\nPair is useful when you associate two things explicitly, but it allows nulls for both lhs and rhs which sometimes leads to a false warning for missing null checks. This is not only annoying but also error-prone if we change something nullable to be nonnull or vice versa. This PR adds a simple class NonnullPair which extends Pair but disallows nulls. I also modified CompactionTask to use it as an example. NonnullPair extends Pair only because it was easy to implement and I wanted to avoid duplicate code. However, this causes the same false warning for missing null checks when you access the variables directly such as nonnullPair.lhs. This is inevitable since they are defined as public in Pair, we can avoid it by changing it to not extend Pair. I'm open to any suggestion.\n\nThis PR has:\n\n been self-reviewed.\n\n using the concurrency checklist (Remove this item if the PR doesn't have any relation to concurrency.)\n\n\n added documentation for new or modified features or behaviors.\n added Javadocs for most classes and all non-trivial methods. Linked related entities via Javadoc links.\n added or updated version, license, or notice information in licenses.yaml\n added comments explaining the \"why\" and the intent of the code wherever would not be obvious for an unfamiliar reader.\n added unit tests or modified existing tests to cover new code paths.\n added integration tests.\n been tested in a test Druid cluster.", "createdAt": "2020-06-10T07:06:20Z", "url": "https://github.com/apache/druid/pull/10013", "merged": true, "mergeCommit": {"oid": "c591ff8ea8f4c2051c2c4721b2b6b82bea54d107"}, "closed": true, "closedAt": "2020-06-26T16:52:06Z", "author": {"login": "jihoonson"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcp0DE2AH2gAyNDMyMjQ3NDAyOjJlZWU0OTExYmFjZTkzNDA5M2NjYTY5Y2RkZDAyNDhjZmQ2NTc3OGY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcultbFAFqTQzNzEzNzIwOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2eee4911bace934093cca69cddd0248cfd65778f", "author": {"user": {"login": "jihoonson", "name": "Jihoon Son"}}, "url": "https://github.com/apache/druid/commit/2eee4911bace934093cca69cddd0248cfd65778f", "committedDate": "2020-06-10T06:55:24Z", "message": "Add NonnullPair"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f9910f0a755a80df2f2219c84baa0845b80beda8", "author": {"user": {"login": "jihoonson", "name": "Jihoon Son"}}, "url": "https://github.com/apache/druid/commit/f9910f0a755a80df2f2219c84baa0845b80beda8", "committedDate": "2020-06-10T07:04:41Z", "message": "new line"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "adb29652433e438947bfb1d8dcd4cb14d8c0ebd3", "author": {"user": {"login": "jihoonson", "name": "Jihoon Son"}}, "url": "https://github.com/apache/druid/commit/adb29652433e438947bfb1d8dcd4cb14d8c0ebd3", "committedDate": "2020-06-10T07:05:49Z", "message": "test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI4MzQ3MDAx", "url": "https://github.com/apache/druid/pull/10013#pullrequestreview-428347001", "createdAt": "2020-06-10T19:03:27Z", "commit": {"oid": "adb29652433e438947bfb1d8dcd4cb14d8c0ebd3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxOTowMzoyN1rOGiCgUg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxOTowMzoyN1rOGiCgUg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODM0NTgxMA==", "bodyText": "For consistency, should this have the same shape as Pair where lhs and rhs are just public fields?  (or should it look like this class?)", "url": "https://github.com/apache/druid/pull/10013#discussion_r438345810", "createdAt": "2020-06-10T19:03:27Z", "author": {"login": "clintropolis"}, "path": "core/src/main/java/org/apache/druid/java/util/common/NonnullPair.java", "diffHunk": "@@ -0,0 +1,40 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.apache.druid.java.util.common;\n+\n+import com.google.common.base.Preconditions;\n+\n+public class NonnullPair<L, R> extends Pair<L, R>\n+{\n+  public NonnullPair(L lhs, R rhs)\n+  {\n+    super(Preconditions.checkNotNull(lhs, \"lhs\"), Preconditions.checkNotNull(rhs, \"rhs\"));\n+  }\n+\n+  public L left()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "adb29652433e438947bfb1d8dcd4cb14d8c0ebd3"}, "originalPosition": 31}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba4a502089b453a1a669c5d8759a72ded042ec16", "author": {"user": {"login": "jihoonson", "name": "Jihoon Son"}}, "url": "https://github.com/apache/druid/commit/ba4a502089b453a1a669c5d8759a72ded042ec16", "committedDate": "2020-06-24T04:44:00Z", "message": "make it consistent"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3MTM3MjA4", "url": "https://github.com/apache/druid/pull/10013#pullrequestreview-437137208", "createdAt": "2020-06-25T03:02:42Z", "commit": {"oid": "ba4a502089b453a1a669c5d8759a72ded042ec16"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2054, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}