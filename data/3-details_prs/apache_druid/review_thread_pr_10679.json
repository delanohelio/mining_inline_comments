{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM5NjcxNzcw", "number": 10679, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxNzoyMjoxNVrOFFGNdA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQyMTozODowOFrOFFQBww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwODg4OTQ4OnYy", "diffSide": "RIGHT", "path": "examples/conf/druid/cluster/data/indexer/runtime.properties", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxNzoyMjoxNVrOIFbeBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQyMDoyMzozM1rOIFmStw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjU2Mzg0Nw==", "bodyText": "any reason this is different than the default indexer port?", "url": "https://github.com/apache/druid/pull/10679#discussion_r542563847", "createdAt": "2020-12-14T17:22:15Z", "author": {"login": "xvrl"}, "path": "examples/conf/druid/cluster/data/indexer/runtime.properties", "diffHunk": "@@ -0,0 +1,38 @@\n+#\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+#\n+\n+druid.service=druid/indexer\n+druid.plaintextPort=8092", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Mjc0MTE3NQ==", "bodyText": "Actually, I set it back to 8091 and tested the docker image. To avoid localhost port conflict I was using the following port mappings: 8091:8091 for MM and 8092:8092 for indexer. Now updated the indexer port mapping to 8092:8091.", "url": "https://github.com/apache/druid/pull/10679#discussion_r542741175", "createdAt": "2020-12-14T20:23:33Z", "author": {"login": "harinirajendran"}, "path": "examples/conf/druid/cluster/data/indexer/runtime.properties", "diffHunk": "@@ -0,0 +1,38 @@\n+#\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+#\n+\n+druid.service=druid/indexer\n+druid.plaintextPort=8092", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjU2Mzg0Nw=="}, "originalCommit": null, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxMDI3NTU2OnYy", "diffSide": "RIGHT", "path": "examples/conf/druid/cluster/data/indexer/runtime.properties", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQyMTowNDo1NlrOIFo89w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQyMToxNTozOVrOIFpp-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Mjc4NDc1OQ==", "bodyText": "the corresponding middleManager config has 4 tasks, should we match that for consistency?", "url": "https://github.com/apache/druid/pull/10679#discussion_r542784759", "createdAt": "2020-12-14T21:04:56Z", "author": {"login": "xvrl"}, "path": "examples/conf/druid/cluster/data/indexer/runtime.properties", "diffHunk": "@@ -0,0 +1,38 @@\n+#\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+#\n+\n+druid.service=druid/indexer\n+druid.plaintextPort=8091\n+\n+# Number of tasks per indexer\n+druid.worker.capacity=2", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Mjc5NjI4MQ==", "bodyText": "Sure! I can update it to match with MM config.", "url": "https://github.com/apache/druid/pull/10679#discussion_r542796281", "createdAt": "2020-12-14T21:15:39Z", "author": {"login": "harinirajendran"}, "path": "examples/conf/druid/cluster/data/indexer/runtime.properties", "diffHunk": "@@ -0,0 +1,38 @@\n+#\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+#\n+\n+druid.service=druid/indexer\n+druid.plaintextPort=8091\n+\n+# Number of tasks per indexer\n+druid.worker.capacity=2", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Mjc4NDc1OQ=="}, "originalCommit": null, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxMDI4MzIyOnYy", "diffSide": "RIGHT", "path": "examples/conf/druid/cluster/data/indexer/runtime.properties", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQyMTowNjowOFrOIFpB4A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQyMTowNjowOFrOIFpB4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Mjc4NjAxNg==", "bodyText": "given we have 1 processing thread per task in the example middle-manager config, I would set this to equal the worker capacity to have a comparable config.", "url": "https://github.com/apache/druid/pull/10679#discussion_r542786016", "createdAt": "2020-12-14T21:06:08Z", "author": {"login": "xvrl"}, "path": "examples/conf/druid/cluster/data/indexer/runtime.properties", "diffHunk": "@@ -0,0 +1,38 @@\n+#\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+#\n+\n+druid.service=druid/indexer\n+druid.plaintextPort=8091\n+\n+# Number of tasks per indexer\n+druid.worker.capacity=2\n+\n+# Task launch parameters\n+druid.indexer.task.baseTaskDir=var/druid/task\n+\n+# HTTP server threads\n+druid.server.http.numThreads=60\n+\n+# Processing threads and buffers on Indexer\n+druid.processing.numMergeBuffers=2\n+druid.processing.buffer.sizeBytes=100MiB\n+druid.processing.numThreads=1", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 35}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxMDI4ODUwOnYy", "diffSide": "RIGHT", "path": "examples/conf/druid/cluster/data/indexer/jvm.config", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQyMTowNjo0OVrOIFpFHQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQyMToyMjowNlrOIFqF4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Mjc4Njg0NQ==", "bodyText": "we probably need more heap to match our middle-manager config, which had 1GB per task.", "url": "https://github.com/apache/druid/pull/10679#discussion_r542786845", "createdAt": "2020-12-14T21:06:49Z", "author": {"login": "xvrl"}, "path": "examples/conf/druid/cluster/data/indexer/jvm.config", "diffHunk": "@@ -0,0 +1,9 @@\n+-server\n+-Xms128m\n+-Xmx128m\n+-XX:MaxDirectMemorySize=1g", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjgwMzQyNg==", "bodyText": "Made it 4g and also increased druid.processing.buffer.sizeBytes to 500MiB . Also increased -Xms and -Xmx setting to be 4x.", "url": "https://github.com/apache/druid/pull/10679#discussion_r542803426", "createdAt": "2020-12-14T21:22:06Z", "author": {"login": "harinirajendran"}, "path": "examples/conf/druid/cluster/data/indexer/jvm.config", "diffHunk": "@@ -0,0 +1,9 @@\n+-server\n+-Xms128m\n+-Xmx128m\n+-XX:MaxDirectMemorySize=1g", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Mjc4Njg0NQ=="}, "originalCommit": null, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxMDQ5Nzk1OnYy", "diffSide": "RIGHT", "path": "examples/conf/druid/cluster/data/indexer/runtime.properties", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQyMTozODowOFrOIFrI5g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQyMTozODowOFrOIFrI5g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjgyMDU4Mg==", "bodyText": "processing buffers are per thread, so we you can leave that to 100MB to match the middle manager", "url": "https://github.com/apache/druid/pull/10679#discussion_r542820582", "createdAt": "2020-12-14T21:38:08Z", "author": {"login": "xvrl"}, "path": "examples/conf/druid/cluster/data/indexer/runtime.properties", "diffHunk": "@@ -0,0 +1,38 @@\n+#\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+#\n+\n+druid.service=druid/indexer\n+druid.plaintextPort=8091\n+\n+# Number of tasks per indexer\n+druid.worker.capacity=4\n+\n+# Task launch parameters\n+druid.indexer.task.baseTaskDir=var/druid/task\n+\n+# HTTP server threads\n+druid.server.http.numThreads=60\n+\n+# Processing threads and buffers on Indexer\n+druid.processing.numMergeBuffers=2\n+druid.processing.buffer.sizeBytes=500MiB", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 34}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2918, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}