{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgxMDYyODk3", "number": 9432, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQyMzowMTozMlrODj-c9w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxNzoyOToyOVrODpNdoA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5MDQ5OTc1OnYy", "diffSide": "RIGHT", "path": "web-console/src/utils/ingestion-spec.tsx", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQyMzowMTozMlrOFwFNPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxOToxMDo0MFrOFwrs6Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTk2MTI3Ng==", "bodyText": "provided in which config?\nAlso default configuration -> access key used for deep storage?\nSame comment on line 1229", "url": "https://github.com/apache/druid/pull/9432#discussion_r385961276", "createdAt": "2020-02-28T23:01:32Z", "author": {"login": "suneet-s"}, "path": "web-console/src/utils/ingestion-spec.tsx", "diffHunk": "@@ -1206,6 +1206,30 @@ export function getIoConfigFormFields(ingestionComboType: IngestionComboType): F\n             </>\n           ),\n         },\n+        {\n+          name: 'inputSource.properties.accessKeyId',\n+          label: 'Access key ID',\n+          type: 'string',\n+          placeholder: '(optional)',\n+          info: (\n+            <>\n+              <p>S3 access key for this S3 bucket.</p>\n+              <p>Setting this will override the default configuration provided in the config.</p>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "45fc9aeb0ec876eceabb54e6ae1b86f19677a0d8"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjMxNjAwMA==", "bodyText": "I don't think it has to be the deep storage one (as in you might now be using s3 for deepstorage) if I understand correctly it is just the key from the config that will be used if this is not set.", "url": "https://github.com/apache/druid/pull/9432#discussion_r386316000", "createdAt": "2020-03-02T10:40:00Z", "author": {"login": "vogievetsky"}, "path": "web-console/src/utils/ingestion-spec.tsx", "diffHunk": "@@ -1206,6 +1206,30 @@ export function getIoConfigFormFields(ingestionComboType: IngestionComboType): F\n             </>\n           ),\n         },\n+        {\n+          name: 'inputSource.properties.accessKeyId',\n+          label: 'Access key ID',\n+          type: 'string',\n+          placeholder: '(optional)',\n+          info: (\n+            <>\n+              <p>S3 access key for this S3 bucket.</p>\n+              <p>Setting this will override the default configuration provided in the config.</p>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTk2MTI3Ng=="}, "originalCommit": {"oid": "45fc9aeb0ec876eceabb54e6ae1b86f19677a0d8"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjU5MTM5MA==", "bodyText": "The defaults are the keys provided from the S3 credentials providers chain. See more information at : https://druid.apache.org/docs/latest/development/extensions-core/s3.html#s3-authentication-methods\nWhich may or may not be from configs (i.e. If Druid config file and Custom properties file are not set but the env variable are, then the credentials providers chain will use the env variable)", "url": "https://github.com/apache/druid/pull/9432#discussion_r386591390", "createdAt": "2020-03-02T19:09:32Z", "author": {"login": "maytasm"}, "path": "web-console/src/utils/ingestion-spec.tsx", "diffHunk": "@@ -1206,6 +1206,30 @@ export function getIoConfigFormFields(ingestionComboType: IngestionComboType): F\n             </>\n           ),\n         },\n+        {\n+          name: 'inputSource.properties.accessKeyId',\n+          label: 'Access key ID',\n+          type: 'string',\n+          placeholder: '(optional)',\n+          info: (\n+            <>\n+              <p>S3 access key for this S3 bucket.</p>\n+              <p>Setting this will override the default configuration provided in the config.</p>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTk2MTI3Ng=="}, "originalCommit": {"oid": "45fc9aeb0ec876eceabb54e6ae1b86f19677a0d8"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjU5MTk3Nw==", "bodyText": "Maybe we can say:\nSetting this will override the value provided from the S3 credentials providers chain", "url": "https://github.com/apache/druid/pull/9432#discussion_r386591977", "createdAt": "2020-03-02T19:10:40Z", "author": {"login": "maytasm"}, "path": "web-console/src/utils/ingestion-spec.tsx", "diffHunk": "@@ -1206,6 +1206,30 @@ export function getIoConfigFormFields(ingestionComboType: IngestionComboType): F\n             </>\n           ),\n         },\n+        {\n+          name: 'inputSource.properties.accessKeyId',\n+          label: 'Access key ID',\n+          type: 'string',\n+          placeholder: '(optional)',\n+          info: (\n+            <>\n+              <p>S3 access key for this S3 bucket.</p>\n+              <p>Setting this will override the default configuration provided in the config.</p>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTk2MTI3Ng=="}, "originalCommit": {"oid": "45fc9aeb0ec876eceabb54e6ae1b86f19677a0d8"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5MDUwMjI2OnYy", "diffSide": "RIGHT", "path": "web-console/src/utils/ingestion-spec.tsx", "isResolved": false, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQyMzowMzowMlrOFwFOzw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxOToxNDo1MVrOFwr2qQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTk2MTY3OQ==", "bodyText": "Druid lets you specify these fields using PasswordProvider - so you can specify an environment variable instead of pasting in your access key in the ingestion spec. Can we do this through the console?", "url": "https://github.com/apache/druid/pull/9432#discussion_r385961679", "createdAt": "2020-02-28T23:03:02Z", "author": {"login": "suneet-s"}, "path": "web-console/src/utils/ingestion-spec.tsx", "diffHunk": "@@ -1206,6 +1206,30 @@ export function getIoConfigFormFields(ingestionComboType: IngestionComboType): F\n             </>\n           ),\n         },\n+        {\n+          name: 'inputSource.properties.accessKeyId',\n+          label: 'Access key ID',\n+          type: 'string',\n+          placeholder: '(optional)',\n+          info: (\n+            <>\n+              <p>S3 access key for this S3 bucket.</p>\n+              <p>Setting this will override the default configuration provided in the config.</p>\n+            </>\n+          ),\n+        },\n+        {\n+          name: 'inputSource.properties.secretAccessKey',\n+          label: 'Secret access key',\n+          type: 'string',", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "45fc9aeb0ec876eceabb54e6ae1b86f19677a0d8"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjMxNjg5OA==", "bodyText": "is there a way to specify inputSource.properties.secretAccessKey to be the inline thing but using a JSON object? Something like setting it to { \"type\": \"inline\", \"key\": \"...\" }?", "url": "https://github.com/apache/druid/pull/9432#discussion_r386316898", "createdAt": "2020-03-02T10:41:46Z", "author": {"login": "vogievetsky"}, "path": "web-console/src/utils/ingestion-spec.tsx", "diffHunk": "@@ -1206,6 +1206,30 @@ export function getIoConfigFormFields(ingestionComboType: IngestionComboType): F\n             </>\n           ),\n         },\n+        {\n+          name: 'inputSource.properties.accessKeyId',\n+          label: 'Access key ID',\n+          type: 'string',\n+          placeholder: '(optional)',\n+          info: (\n+            <>\n+              <p>S3 access key for this S3 bucket.</p>\n+              <p>Setting this will override the default configuration provided in the config.</p>\n+            </>\n+          ),\n+        },\n+        {\n+          name: 'inputSource.properties.secretAccessKey',\n+          label: 'Secret access key',\n+          type: 'string',", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTk2MTY3OQ=="}, "originalCommit": {"oid": "45fc9aeb0ec876eceabb54e6ae1b86f19677a0d8"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjU3Njk5Nw==", "bodyText": "^ I don't know exactly how this works, but @maytasm3 might...", "url": "https://github.com/apache/druid/pull/9432#discussion_r386576997", "createdAt": "2020-03-02T18:43:04Z", "author": {"login": "suneet-s"}, "path": "web-console/src/utils/ingestion-spec.tsx", "diffHunk": "@@ -1206,6 +1206,30 @@ export function getIoConfigFormFields(ingestionComboType: IngestionComboType): F\n             </>\n           ),\n         },\n+        {\n+          name: 'inputSource.properties.accessKeyId',\n+          label: 'Access key ID',\n+          type: 'string',\n+          placeholder: '(optional)',\n+          info: (\n+            <>\n+              <p>S3 access key for this S3 bucket.</p>\n+              <p>Setting this will override the default configuration provided in the config.</p>\n+            </>\n+          ),\n+        },\n+        {\n+          name: 'inputSource.properties.secretAccessKey',\n+          label: 'Secret access key',\n+          type: 'string',", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTk2MTY3OQ=="}, "originalCommit": {"oid": "45fc9aeb0ec876eceabb54e6ae1b86f19677a0d8"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjU5MzY4NQ==", "bodyText": "You can do by using the default password provider. Try { \"type\": \"default\", \"password\": \"...\" }.", "url": "https://github.com/apache/druid/pull/9432#discussion_r386593685", "createdAt": "2020-03-02T19:13:30Z", "author": {"login": "jihoonson"}, "path": "web-console/src/utils/ingestion-spec.tsx", "diffHunk": "@@ -1206,6 +1206,30 @@ export function getIoConfigFormFields(ingestionComboType: IngestionComboType): F\n             </>\n           ),\n         },\n+        {\n+          name: 'inputSource.properties.accessKeyId',\n+          label: 'Access key ID',\n+          type: 'string',\n+          placeholder: '(optional)',\n+          info: (\n+            <>\n+              <p>S3 access key for this S3 bucket.</p>\n+              <p>Setting this will override the default configuration provided in the config.</p>\n+            </>\n+          ),\n+        },\n+        {\n+          name: 'inputSource.properties.secretAccessKey',\n+          label: 'Secret access key',\n+          type: 'string',", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTk2MTY3OQ=="}, "originalCommit": {"oid": "45fc9aeb0ec876eceabb54e6ae1b86f19677a0d8"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjU5Mzg5MA==", "bodyText": "If by inline you mean plain text then yes.\n        \"properties\": {\n            \"accessKeyId\": \"MMMMM\",\n            \"secretAccessKey\": \"mmmmm\"\n        },\n\nis the same as\n        \u201cproperties\u201d: {\n            \u201caccessKeyId\u201d: { \u201ctype\u201d: \u201cdefault\u201d, \u201cvariable\u201d: \u201cMMMMMM\u201d },\n            \u201csecretAccessKey\u201d: { \u201ctype\u201d: \u201cdefault\u201d, \u201cvariable\u201d: \u201cmmmm\u201d }\n        },\n\nThe only other type of Password Provider we currently support is environment.\nExample below:\n        \u201cproperties\u201d: {\n            \u201caccessKeyId\u201d: { \u201ctype\u201d: \u201cenvironment\u201d, \u201cvariable\u201d: \u201cACCESS_KEY_ENV\u201d },\n            \u201csecretAccessKey\u201d: { \u201ctype\u201d: \u201cenvironment\u201d, \u201cvariable\u201d: \u201cSECRET_KEY_ENV\u201d }\n        },", "url": "https://github.com/apache/druid/pull/9432#discussion_r386593890", "createdAt": "2020-03-02T19:13:51Z", "author": {"login": "maytasm"}, "path": "web-console/src/utils/ingestion-spec.tsx", "diffHunk": "@@ -1206,6 +1206,30 @@ export function getIoConfigFormFields(ingestionComboType: IngestionComboType): F\n             </>\n           ),\n         },\n+        {\n+          name: 'inputSource.properties.accessKeyId',\n+          label: 'Access key ID',\n+          type: 'string',\n+          placeholder: '(optional)',\n+          info: (\n+            <>\n+              <p>S3 access key for this S3 bucket.</p>\n+              <p>Setting this will override the default configuration provided in the config.</p>\n+            </>\n+          ),\n+        },\n+        {\n+          name: 'inputSource.properties.secretAccessKey',\n+          label: 'Secret access key',\n+          type: 'string',", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTk2MTY3OQ=="}, "originalCommit": {"oid": "45fc9aeb0ec876eceabb54e6ae1b86f19677a0d8"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjU5NDQ3Mw==", "bodyText": "But, I think this should never be an available option in the web console because of the security purpose.", "url": "https://github.com/apache/druid/pull/9432#discussion_r386594473", "createdAt": "2020-03-02T19:14:51Z", "author": {"login": "jihoonson"}, "path": "web-console/src/utils/ingestion-spec.tsx", "diffHunk": "@@ -1206,6 +1206,30 @@ export function getIoConfigFormFields(ingestionComboType: IngestionComboType): F\n             </>\n           ),\n         },\n+        {\n+          name: 'inputSource.properties.accessKeyId',\n+          label: 'Access key ID',\n+          type: 'string',\n+          placeholder: '(optional)',\n+          info: (\n+            <>\n+              <p>S3 access key for this S3 bucket.</p>\n+              <p>Setting this will override the default configuration provided in the config.</p>\n+            </>\n+          ),\n+        },\n+        {\n+          name: 'inputSource.properties.secretAccessKey',\n+          label: 'Secret access key',\n+          type: 'string',", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTk2MTY3OQ=="}, "originalCommit": {"oid": "45fc9aeb0ec876eceabb54e6ae1b86f19677a0d8"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0MTg5ODczOnYy", "diffSide": "RIGHT", "path": "web-console/src/utils/ingestion-spec.tsx", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QyMDozNDozMVrOF3s-vw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QyMTozNjozN1rOF3u8Gw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzk1Mjk1OQ==", "bodyText": "The name is different depending on the type of password provider. It's called variable for EnvironmentVariablePasswordProvider while it's called password for DefaultPasswordProvider.", "url": "https://github.com/apache/druid/pull/9432#discussion_r393952959", "createdAt": "2020-03-17T20:34:31Z", "author": {"login": "jihoonson"}, "path": "web-console/src/utils/ingestion-spec.tsx", "diffHunk": "@@ -1226,6 +1226,75 @@ export function getIoConfigFormFields(ingestionComboType: IngestionComboType): F\n             </>\n           ),\n         },\n+        {\n+          name: 'inputSource.properties.accessKeyId.type',\n+          label: 'Access key ID type',\n+          type: 'string',\n+          suggestions: [undefined, 'environment', 'default'],\n+          info: (\n+            <>\n+              <p>S3 access key for this S3 bucket.</p>\n+              <p>Setting this will override the default configuration provided in the config.</p>\n+            </>\n+          ),\n+          adjustment: (ioConfig: IoConfig) => {\n+            return deepSet(\n+              ioConfig,\n+              'inputSource.properties.secretAccessKey.type',\n+              deepGet(ioConfig, 'inputSource.properties.accessKeyId.type'),\n+            );\n+          },\n+        },\n+        {\n+          name: 'inputSource.properties.accessKeyId.variable',", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "934bbd6155d9095fb57030d3b2d91b97ffb43da6"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzk2MzIzOA==", "bodyText": "oh I see, yup need to fix that. What about inputSource.properties.secretAccessKey.x ? same?", "url": "https://github.com/apache/druid/pull/9432#discussion_r393963238", "createdAt": "2020-03-17T20:52:42Z", "author": {"login": "vogievetsky"}, "path": "web-console/src/utils/ingestion-spec.tsx", "diffHunk": "@@ -1226,6 +1226,75 @@ export function getIoConfigFormFields(ingestionComboType: IngestionComboType): F\n             </>\n           ),\n         },\n+        {\n+          name: 'inputSource.properties.accessKeyId.type',\n+          label: 'Access key ID type',\n+          type: 'string',\n+          suggestions: [undefined, 'environment', 'default'],\n+          info: (\n+            <>\n+              <p>S3 access key for this S3 bucket.</p>\n+              <p>Setting this will override the default configuration provided in the config.</p>\n+            </>\n+          ),\n+          adjustment: (ioConfig: IoConfig) => {\n+            return deepSet(\n+              ioConfig,\n+              'inputSource.properties.secretAccessKey.type',\n+              deepGet(ioConfig, 'inputSource.properties.accessKeyId.type'),\n+            );\n+          },\n+        },\n+        {\n+          name: 'inputSource.properties.accessKeyId.variable',", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzk1Mjk1OQ=="}, "originalCommit": {"oid": "934bbd6155d9095fb57030d3b2d91b97ffb43da6"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzk4NTA1MQ==", "bodyText": "yes. same for inputSource.properties.secretAccessKey.x", "url": "https://github.com/apache/druid/pull/9432#discussion_r393985051", "createdAt": "2020-03-17T21:36:37Z", "author": {"login": "maytasm"}, "path": "web-console/src/utils/ingestion-spec.tsx", "diffHunk": "@@ -1226,6 +1226,75 @@ export function getIoConfigFormFields(ingestionComboType: IngestionComboType): F\n             </>\n           ),\n         },\n+        {\n+          name: 'inputSource.properties.accessKeyId.type',\n+          label: 'Access key ID type',\n+          type: 'string',\n+          suggestions: [undefined, 'environment', 'default'],\n+          info: (\n+            <>\n+              <p>S3 access key for this S3 bucket.</p>\n+              <p>Setting this will override the default configuration provided in the config.</p>\n+            </>\n+          ),\n+          adjustment: (ioConfig: IoConfig) => {\n+            return deepSet(\n+              ioConfig,\n+              'inputSource.properties.secretAccessKey.type',\n+              deepGet(ioConfig, 'inputSource.properties.accessKeyId.type'),\n+            );\n+          },\n+        },\n+        {\n+          name: 'inputSource.properties.accessKeyId.variable',", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzk1Mjk1OQ=="}, "originalCommit": {"oid": "934bbd6155d9095fb57030d3b2d91b97ffb43da6"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0MjMzMDk4OnYy", "diffSide": "RIGHT", "path": "web-console/src/views/load-data-view/load-data-view.tsx", "isResolved": false, "comments": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QyMzowODozOVrOF3xL6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxNzoyNzo1MVrOF4Pj_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDAyMTg2Nw==", "bodyText": "Can we provide a recommendation on what a better alternative is (ie use the environment variable password provider instead)", "url": "https://github.com/apache/druid/pull/9432#discussion_r394021867", "createdAt": "2020-03-17T23:08:39Z", "author": {"login": "suneet-s"}, "path": "web-console/src/views/load-data-view/load-data-view.tsx", "diffHunk": "@@ -1076,11 +1076,21 @@ export class LoadDataView extends React.PureComponent<LoadDataViewProps, LoadDat\n             <LearnMore href={getIngestionDocLink(spec)} />\n           </Callout>\n           {ingestionComboType ? (\n-            <AutoForm\n-              fields={getIoConfigFormFields(ingestionComboType)}\n-              model={ioConfig}\n-              onChange={c => this.updateSpecPreview(deepSet(spec, 'spec.ioConfig', c))}\n-            />\n+            <>\n+              <AutoForm\n+                fields={getIoConfigFormFields(ingestionComboType)}\n+                model={ioConfig}\n+                onChange={c => this.updateSpecPreview(deepSet(spec, 'spec.ioConfig', c))}\n+              />\n+              {deepGet(spec, 'spec.ioConfig.inputSource.properties.secretAccessKey.password') && (\n+                <FormGroup>\n+                  <Callout intent={Intent.WARNING}>\n+                    Inlining the access key into the ingestion spec is dangerous as it might appear\n+                    in server log files and can be seen by anyone accessing this console.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d3d30dfa1a99fabc57fa61921215a56ad9cf4732"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDAyMjI2MQ==", "bodyText": "How would you word that message?", "url": "https://github.com/apache/druid/pull/9432#discussion_r394022261", "createdAt": "2020-03-17T23:09:57Z", "author": {"login": "vogievetsky"}, "path": "web-console/src/views/load-data-view/load-data-view.tsx", "diffHunk": "@@ -1076,11 +1076,21 @@ export class LoadDataView extends React.PureComponent<LoadDataViewProps, LoadDat\n             <LearnMore href={getIngestionDocLink(spec)} />\n           </Callout>\n           {ingestionComboType ? (\n-            <AutoForm\n-              fields={getIoConfigFormFields(ingestionComboType)}\n-              model={ioConfig}\n-              onChange={c => this.updateSpecPreview(deepSet(spec, 'spec.ioConfig', c))}\n-            />\n+            <>\n+              <AutoForm\n+                fields={getIoConfigFormFields(ingestionComboType)}\n+                model={ioConfig}\n+                onChange={c => this.updateSpecPreview(deepSet(spec, 'spec.ioConfig', c))}\n+              />\n+              {deepGet(spec, 'spec.ioConfig.inputSource.properties.secretAccessKey.password') && (\n+                <FormGroup>\n+                  <Callout intent={Intent.WARNING}>\n+                    Inlining the access key into the ingestion spec is dangerous as it might appear\n+                    in server log files and can be seen by anyone accessing this console.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDAyMTg2Nw=="}, "originalCommit": {"oid": "d3d30dfa1a99fabc57fa61921215a56ad9cf4732"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDAyMjkzOA==", "bodyText": "@sthetland any suggestions here?", "url": "https://github.com/apache/druid/pull/9432#discussion_r394022938", "createdAt": "2020-03-17T23:12:10Z", "author": {"login": "suneet-s"}, "path": "web-console/src/views/load-data-view/load-data-view.tsx", "diffHunk": "@@ -1076,11 +1076,21 @@ export class LoadDataView extends React.PureComponent<LoadDataViewProps, LoadDat\n             <LearnMore href={getIngestionDocLink(spec)} />\n           </Callout>\n           {ingestionComboType ? (\n-            <AutoForm\n-              fields={getIoConfigFormFields(ingestionComboType)}\n-              model={ioConfig}\n-              onChange={c => this.updateSpecPreview(deepSet(spec, 'spec.ioConfig', c))}\n-            />\n+            <>\n+              <AutoForm\n+                fields={getIoConfigFormFields(ingestionComboType)}\n+                model={ioConfig}\n+                onChange={c => this.updateSpecPreview(deepSet(spec, 'spec.ioConfig', c))}\n+              />\n+              {deepGet(spec, 'spec.ioConfig.inputSource.properties.secretAccessKey.password') && (\n+                <FormGroup>\n+                  <Callout intent={Intent.WARNING}>\n+                    Inlining the access key into the ingestion spec is dangerous as it might appear\n+                    in server log files and can be seen by anyone accessing this console.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDAyMTg2Nw=="}, "originalCommit": {"oid": "d3d30dfa1a99fabc57fa61921215a56ad9cf4732"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDAyMzA0Ng==", "bodyText": "That might be a maintenance headache as we add and remove PasswordProvider", "url": "https://github.com/apache/druid/pull/9432#discussion_r394023046", "createdAt": "2020-03-17T23:12:30Z", "author": {"login": "maytasm"}, "path": "web-console/src/views/load-data-view/load-data-view.tsx", "diffHunk": "@@ -1076,11 +1076,21 @@ export class LoadDataView extends React.PureComponent<LoadDataViewProps, LoadDat\n             <LearnMore href={getIngestionDocLink(spec)} />\n           </Callout>\n           {ingestionComboType ? (\n-            <AutoForm\n-              fields={getIoConfigFormFields(ingestionComboType)}\n-              model={ioConfig}\n-              onChange={c => this.updateSpecPreview(deepSet(spec, 'spec.ioConfig', c))}\n-            />\n+            <>\n+              <AutoForm\n+                fields={getIoConfigFormFields(ingestionComboType)}\n+                model={ioConfig}\n+                onChange={c => this.updateSpecPreview(deepSet(spec, 'spec.ioConfig', c))}\n+              />\n+              {deepGet(spec, 'spec.ioConfig.inputSource.properties.secretAccessKey.password') && (\n+                <FormGroup>\n+                  <Callout intent={Intent.WARNING}>\n+                    Inlining the access key into the ingestion spec is dangerous as it might appear\n+                    in server log files and can be seen by anyone accessing this console.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDAyMTg2Nw=="}, "originalCommit": {"oid": "d3d30dfa1a99fabc57fa61921215a56ad9cf4732"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDAyNTU2Ng==", "bodyText": "@maytasm3 are you worried that the environment password provider might go away in the future? Or that we might provide a better way in the future and this text will be out of sync.\nThe reason I thought of this was because if I landed on this page, and saw the warning as is - I'd feel like I was at a dead end without an idea of how to proceed", "url": "https://github.com/apache/druid/pull/9432#discussion_r394025566", "createdAt": "2020-03-17T23:20:31Z", "author": {"login": "suneet-s"}, "path": "web-console/src/views/load-data-view/load-data-view.tsx", "diffHunk": "@@ -1076,11 +1076,21 @@ export class LoadDataView extends React.PureComponent<LoadDataViewProps, LoadDat\n             <LearnMore href={getIngestionDocLink(spec)} />\n           </Callout>\n           {ingestionComboType ? (\n-            <AutoForm\n-              fields={getIoConfigFormFields(ingestionComboType)}\n-              model={ioConfig}\n-              onChange={c => this.updateSpecPreview(deepSet(spec, 'spec.ioConfig', c))}\n-            />\n+            <>\n+              <AutoForm\n+                fields={getIoConfigFormFields(ingestionComboType)}\n+                model={ioConfig}\n+                onChange={c => this.updateSpecPreview(deepSet(spec, 'spec.ioConfig', c))}\n+              />\n+              {deepGet(spec, 'spec.ioConfig.inputSource.properties.secretAccessKey.password') && (\n+                <FormGroup>\n+                  <Callout intent={Intent.WARNING}>\n+                    Inlining the access key into the ingestion spec is dangerous as it might appear\n+                    in server log files and can be seen by anyone accessing this console.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDAyMTg2Nw=="}, "originalCommit": {"oid": "d3d30dfa1a99fabc57fa61921215a56ad9cf4732"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDAyNjQ5MA==", "bodyText": "@suneet-s Yes, that is correct. There is a drop down box above the field (\"secret key type\") that gives you other options. If you select that the warning will go away. I think that is user-friendly enough without recommendation\nI guess we still have to update that selection if we add and remove PasswordProvider too.", "url": "https://github.com/apache/druid/pull/9432#discussion_r394026490", "createdAt": "2020-03-17T23:23:27Z", "author": {"login": "maytasm"}, "path": "web-console/src/views/load-data-view/load-data-view.tsx", "diffHunk": "@@ -1076,11 +1076,21 @@ export class LoadDataView extends React.PureComponent<LoadDataViewProps, LoadDat\n             <LearnMore href={getIngestionDocLink(spec)} />\n           </Callout>\n           {ingestionComboType ? (\n-            <AutoForm\n-              fields={getIoConfigFormFields(ingestionComboType)}\n-              model={ioConfig}\n-              onChange={c => this.updateSpecPreview(deepSet(spec, 'spec.ioConfig', c))}\n-            />\n+            <>\n+              <AutoForm\n+                fields={getIoConfigFormFields(ingestionComboType)}\n+                model={ioConfig}\n+                onChange={c => this.updateSpecPreview(deepSet(spec, 'spec.ioConfig', c))}\n+              />\n+              {deepGet(spec, 'spec.ioConfig.inputSource.properties.secretAccessKey.password') && (\n+                <FormGroup>\n+                  <Callout intent={Intent.WARNING}>\n+                    Inlining the access key into the ingestion spec is dangerous as it might appear\n+                    in server log files and can be seen by anyone accessing this console.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDAyMTg2Nw=="}, "originalCommit": {"oid": "d3d30dfa1a99fabc57fa61921215a56ad9cf4732"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDAyOTA4Mg==", "bodyText": "Would something like this be future proof? ... maybe?\nWarning: This key will be visible to anyone accessing this console and may appear in server logs. For production scenarios, use of a more secure secret key type is strongly recommended.", "url": "https://github.com/apache/druid/pull/9432#discussion_r394029082", "createdAt": "2020-03-17T23:32:27Z", "author": {"login": "sthetland"}, "path": "web-console/src/views/load-data-view/load-data-view.tsx", "diffHunk": "@@ -1076,11 +1076,21 @@ export class LoadDataView extends React.PureComponent<LoadDataViewProps, LoadDat\n             <LearnMore href={getIngestionDocLink(spec)} />\n           </Callout>\n           {ingestionComboType ? (\n-            <AutoForm\n-              fields={getIoConfigFormFields(ingestionComboType)}\n-              model={ioConfig}\n-              onChange={c => this.updateSpecPreview(deepSet(spec, 'spec.ioConfig', c))}\n-            />\n+            <>\n+              <AutoForm\n+                fields={getIoConfigFormFields(ingestionComboType)}\n+                model={ioConfig}\n+                onChange={c => this.updateSpecPreview(deepSet(spec, 'spec.ioConfig', c))}\n+              />\n+              {deepGet(spec, 'spec.ioConfig.inputSource.properties.secretAccessKey.password') && (\n+                <FormGroup>\n+                  <Callout intent={Intent.WARNING}>\n+                    Inlining the access key into the ingestion spec is dangerous as it might appear\n+                    in server log files and can be seen by anyone accessing this console.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDAyMTg2Nw=="}, "originalCommit": {"oid": "d3d30dfa1a99fabc57fa61921215a56ad9cf4732"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDAyOTI1OQ==", "bodyText": "Would a good compromise be to say that - \"When running in production, you should pick a more secure secret key type from the drop down above\"\nThe little i thing next to the option can point to the relevant docs which we will keep up to date as we add/ remove password providers.", "url": "https://github.com/apache/druid/pull/9432#discussion_r394029259", "createdAt": "2020-03-17T23:33:07Z", "author": {"login": "suneet-s"}, "path": "web-console/src/views/load-data-view/load-data-view.tsx", "diffHunk": "@@ -1076,11 +1076,21 @@ export class LoadDataView extends React.PureComponent<LoadDataViewProps, LoadDat\n             <LearnMore href={getIngestionDocLink(spec)} />\n           </Callout>\n           {ingestionComboType ? (\n-            <AutoForm\n-              fields={getIoConfigFormFields(ingestionComboType)}\n-              model={ioConfig}\n-              onChange={c => this.updateSpecPreview(deepSet(spec, 'spec.ioConfig', c))}\n-            />\n+            <>\n+              <AutoForm\n+                fields={getIoConfigFormFields(ingestionComboType)}\n+                model={ioConfig}\n+                onChange={c => this.updateSpecPreview(deepSet(spec, 'spec.ioConfig', c))}\n+              />\n+              {deepGet(spec, 'spec.ioConfig.inputSource.properties.secretAccessKey.password') && (\n+                <FormGroup>\n+                  <Callout intent={Intent.WARNING}>\n+                    Inlining the access key into the ingestion spec is dangerous as it might appear\n+                    in server log files and can be seen by anyone accessing this console.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDAyMTg2Nw=="}, "originalCommit": {"oid": "d3d30dfa1a99fabc57fa61921215a56ad9cf4732"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDUwNTM5OQ==", "bodyText": "@suneet-s do you consider your comment as a blocker? Or can it be done in a follow-up?", "url": "https://github.com/apache/druid/pull/9432#discussion_r394505399", "createdAt": "2020-03-18T17:06:07Z", "author": {"login": "jihoonson"}, "path": "web-console/src/views/load-data-view/load-data-view.tsx", "diffHunk": "@@ -1076,11 +1076,21 @@ export class LoadDataView extends React.PureComponent<LoadDataViewProps, LoadDat\n             <LearnMore href={getIngestionDocLink(spec)} />\n           </Callout>\n           {ingestionComboType ? (\n-            <AutoForm\n-              fields={getIoConfigFormFields(ingestionComboType)}\n-              model={ioConfig}\n-              onChange={c => this.updateSpecPreview(deepSet(spec, 'spec.ioConfig', c))}\n-            />\n+            <>\n+              <AutoForm\n+                fields={getIoConfigFormFields(ingestionComboType)}\n+                model={ioConfig}\n+                onChange={c => this.updateSpecPreview(deepSet(spec, 'spec.ioConfig', c))}\n+              />\n+              {deepGet(spec, 'spec.ioConfig.inputSource.properties.secretAccessKey.password') && (\n+                <FormGroup>\n+                  <Callout intent={Intent.WARNING}>\n+                    Inlining the access key into the ingestion spec is dangerous as it might appear\n+                    in server log files and can be seen by anyone accessing this console.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDAyMTg2Nw=="}, "originalCommit": {"oid": "d3d30dfa1a99fabc57fa61921215a56ad9cf4732"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDUxOTU0OQ==", "bodyText": "@jihoonson I don't know what the apache rules are on what qualifies for a blocker. I think the UX isn't great if I see a big scary warning without a way to remediate. I like @sthetland's suggestion above. If there are committers who are ok with this, I'm not going to veto.", "url": "https://github.com/apache/druid/pull/9432#discussion_r394519549", "createdAt": "2020-03-18T17:27:51Z", "author": {"login": "suneet-s"}, "path": "web-console/src/views/load-data-view/load-data-view.tsx", "diffHunk": "@@ -1076,11 +1076,21 @@ export class LoadDataView extends React.PureComponent<LoadDataViewProps, LoadDat\n             <LearnMore href={getIngestionDocLink(spec)} />\n           </Callout>\n           {ingestionComboType ? (\n-            <AutoForm\n-              fields={getIoConfigFormFields(ingestionComboType)}\n-              model={ioConfig}\n-              onChange={c => this.updateSpecPreview(deepSet(spec, 'spec.ioConfig', c))}\n-            />\n+            <>\n+              <AutoForm\n+                fields={getIoConfigFormFields(ingestionComboType)}\n+                model={ioConfig}\n+                onChange={c => this.updateSpecPreview(deepSet(spec, 'spec.ioConfig', c))}\n+              />\n+              {deepGet(spec, 'spec.ioConfig.inputSource.properties.secretAccessKey.password') && (\n+                <FormGroup>\n+                  <Callout intent={Intent.WARNING}>\n+                    Inlining the access key into the ingestion spec is dangerous as it might appear\n+                    in server log files and can be seen by anyone accessing this console.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDAyMTg2Nw=="}, "originalCommit": {"oid": "d3d30dfa1a99fabc57fa61921215a56ad9cf4732"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0NTM4Nzg0OnYy", "diffSide": "RIGHT", "path": "web-console/src/views/load-data-view/load-data-view.tsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxNzoyOToyOVrOF4PoPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxNzoyOToyOVrOF4PoPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDUyMDYzNg==", "bodyText": "Trying out github's multi-line suggestion \ud83e\udd1ewith Steve's suggested re-wording\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                Inlining the access key into the ingestion spec is dangerous as it might appear\n          \n          \n            \n                                in server log files and can be seen by anyone accessing this console.\n          \n          \n            \n                                This key will be visible to anyone accessing this console and may appear in server logs. \n          \n          \n            \n                                For production scenarios, use of a more secure secret key type is strongly recommended.", "url": "https://github.com/apache/druid/pull/9432#discussion_r394520636", "createdAt": "2020-03-18T17:29:29Z", "author": {"login": "suneet-s"}, "path": "web-console/src/views/load-data-view/load-data-view.tsx", "diffHunk": "@@ -1076,11 +1076,21 @@ export class LoadDataView extends React.PureComponent<LoadDataViewProps, LoadDat\n             <LearnMore href={getIngestionDocLink(spec)} />\n           </Callout>\n           {ingestionComboType ? (\n-            <AutoForm\n-              fields={getIoConfigFormFields(ingestionComboType)}\n-              model={ioConfig}\n-              onChange={c => this.updateSpecPreview(deepSet(spec, 'spec.ioConfig', c))}\n-            />\n+            <>\n+              <AutoForm\n+                fields={getIoConfigFormFields(ingestionComboType)}\n+                model={ioConfig}\n+                onChange={c => this.updateSpecPreview(deepSet(spec, 'spec.ioConfig', c))}\n+              />\n+              {deepGet(spec, 'spec.ioConfig.inputSource.properties.secretAccessKey.password') && (\n+                <FormGroup>\n+                  <Callout intent={Intent.WARNING}>\n+                    Inlining the access key into the ingestion spec is dangerous as it might appear\n+                    in server log files and can be seen by anyone accessing this console.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d3d30dfa1a99fabc57fa61921215a56ad9cf4732"}, "originalPosition": 19}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2800, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}