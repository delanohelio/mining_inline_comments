{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI1NTM2Mjc1", "number": 9956, "title": "Segment timeline doesn't show results older than 3 months", "bodyText": "Description\nIn Druid web console, when the selection of timeline changes, the actual data displayed does not change. This PR is to fix this.\nInstead of rerun the last query with the same timespan, run a query with actual updated timespan.\n\n\n\n\n\nThis PR has:\n\n been self-reviewed.\n\n using the concurrency checklist (Remove this item if the PR doesn't have any relation to concurrency.)\n\n\n added documentation for new or modified features or behaviors.\n added Javadocs for most classes and all non-trivial methods. Linked related entities via Javadoc links.\n added or updated version, license, or notice information in licenses.yaml\n added comments explaining the \"why\" and the intent of the code wherever would not be obvious for an unfamiliar reader.\n added unit tests or modified existing tests to cover new code paths.\n added integration tests.\n been tested in a test Druid cluster.", "createdAt": "2020-05-30T23:30:39Z", "url": "https://github.com/apache/druid/pull/9956", "merged": true, "mergeCommit": {"oid": "35c7c0ec25405bed6f9a379a135d9cf42bea5d16"}, "closed": true, "closedAt": "2020-06-28T08:45:05Z", "author": {"login": "2bethere"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcmfpV0gH2gAyNDI1NTM2Mjc1OmYxYjE0YzU4N2YwOWQ2NTFiMGU5ZjljY2Q2MDRjYjIyNjQzY2EyNjk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcvoZv7gFqTQzODc1ODQ0NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f1b14c587f09d651b0e9f9ccd604cb22643ca269", "author": {"user": {"login": "2bethere", "name": "Will Xu"}}, "url": "https://github.com/apache/druid/commit/f1b14c587f09d651b0e9f9ccd604cb22643ca269", "committedDate": "2020-05-30T23:27:25Z", "message": "Segment timeline doesn't show results older than 3 months"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxOTMyMjU2", "url": "https://github.com/apache/druid/pull/9956#pullrequestreview-421932256", "createdAt": "2020-06-01T15:17:16Z", "commit": {"oid": "f1b14c587f09d651b0e9f9ccd604cb22643ca269"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyMDAxMDkw", "url": "https://github.com/apache/druid/pull/9956#pullrequestreview-422001090", "createdAt": "2020-06-01T16:34:44Z", "commit": {"oid": "f1b14c587f09d651b0e9f9ccd604cb22643ca269"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxNjozNDo0NFrOGdRq1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxNjozNDo0NFrOGdRq1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM1MTM4MQ==", "bodyText": "Please add some test cases to web-console/src/components/segment-timeline/segment-timeline.spec.tsx:\n\nDefault timeSpan value of 3\nCustom timeSpan value (that is different from default)", "url": "https://github.com/apache/druid/pull/9956#discussion_r433351381", "createdAt": "2020-06-01T16:34:44Z", "author": {"login": "ccaominh"}, "path": "web-console/src/components/segment-timeline/segment-timeline.tsx", "diffHunk": "@@ -394,14 +394,16 @@ ORDER BY \"start\" DESC`;\n   onTimeSpanChange = (e: any) => {\n     const dStart = new Date();\n     const dEnd = new Date();\n-    dStart.setMonth(dStart.getMonth() - e);\n+    const capabilities = this.props.capabilities;\n+    const timeSpan = parseInt(e, 10) || 3;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f1b14c587f09d651b0e9f9ccd604cb22643ca269"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7d6232d1071c2cb471e252b2e22e2b1b19b23963", "author": {"user": {"login": "2bethere", "name": "Will Xu"}}, "url": "https://github.com/apache/druid/commit/7d6232d1071c2cb471e252b2e22e2b1b19b23963", "committedDate": "2020-06-22T22:05:58Z", "message": "Merge branch 'master' of github.com:apache/druid"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e8cc616bd0430a2ed24543e4d41ae7ffe7e49487", "author": {"user": {"login": "2bethere", "name": "Will Xu"}}, "url": "https://github.com/apache/druid/commit/e8cc616bd0430a2ed24543e4d41ae7ffe7e49487", "committedDate": "2020-06-27T21:17:42Z", "message": "Merge branch 'master' of github.com:apache/druid"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c75db09d11d989bca399489f877b0ae12e59fee8", "author": {"user": {"login": "2bethere", "name": "Will Xu"}}, "url": "https://github.com/apache/druid/commit/c75db09d11d989bca399489f877b0ae12e59fee8", "committedDate": "2020-06-27T22:36:53Z", "message": "Adoption testing patch for web segment timeline view and also refactoring default time config"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4NzM0MjE1", "url": "https://github.com/apache/druid/pull/9956#pullrequestreview-438734215", "createdAt": "2020-06-28T00:59:50Z", "commit": {"oid": "c75db09d11d989bca399489f877b0ae12e59fee8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4NzU4NDQ1", "url": "https://github.com/apache/druid/pull/9956#pullrequestreview-438758445", "createdAt": "2020-06-28T08:44:51Z", "commit": {"oid": "c75db09d11d989bca399489f877b0ae12e59fee8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2428, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}