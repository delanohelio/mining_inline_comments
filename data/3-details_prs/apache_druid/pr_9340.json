{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcyODg4MTM0", "number": 9340, "title": "Change security vulnerability scan to cron job", "bodyText": "Description\nPreviously, when new CVEs were reported, the security vulnerability scan would unfortunately block PRs that did not modify any dependencies. To prevent this issue, the security scan is now run as a Travis cron job that runs on master and notifies the druid dev list if it fails. The security scan has also been added to the \"apache-release\" maven profile, to ensure that it passes before a release.\nAlso adjusted some Travis CI job failure help messages to not be folded in the Travis CI job logs.\nAfter this PR is merged, I'll update the Apache Druid Travis CI settings to run a daily cronjob on master (which will run just the security scan job).\n\nThis PR has:\n\n been self-reviewed.\n added comments explaining the \"why\" and the intent of the code wherever would not be obvious for an unfamiliar reader.\n been manually tested in my fork: https://github.com/ccaominh/druid", "createdAt": "2020-02-09T23:33:03Z", "url": "https://github.com/apache/druid/pull/9340", "merged": true, "mergeCommit": {"oid": "a5c49cc4bd7d3c718228931e3192d7e8a86d0c64"}, "closed": true, "closedAt": "2020-02-11T21:43:09Z", "author": {"login": "ccaominh"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcCxBbFAH2gAyMzcyODg4MTM0OmQzMDc2N2IxYWIxYjJmNjRiYTVkMzY2NzMzMDVkNTc3YTc4MWMxMDk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcDXf6sAFqTM1Njk1OTcxMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d30767b1ab1b2f64ba5d36673305d577a781c109", "author": {"user": {"login": "ccaominh", "name": "Chi Cao Minh"}}, "url": "https://github.com/apache/druid/commit/d30767b1ab1b2f64ba5d36673305d577a781c109", "committedDate": "2020-02-09T23:20:50Z", "message": "Change security vulnerability scan to cron job\n\nPreviously, when new CVEs were reported, the security vulnerability scan\nwould unfortunately block PRs that did not modify any dependencies. To\nprevent this issue, the security scan is now run as a Travis cron job\nthat runs on master and notifies the druid dev list if it fails. The\nsecurity scan has also been added to the \"apache-release\" maven profile,\nto ensure that it passes before a release.\n\nAlso adjusted some Travis CI job failure help messages to not be folded\nin the Travis CI job logs."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2OTI0MzU4", "url": "https://github.com/apache/druid/pull/9340#pullrequestreview-356924358", "createdAt": "2020-02-11T19:17:04Z", "commit": {"oid": "d30767b1ab1b2f64ba5d36673305d577a781c109"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQxOToxNzowNFrOFoVw0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQxOToxNzowNFrOFoVw0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzg0MzkyMQ==", "bodyText": "This can be omitted. It looks like the plugin will pick up the configuration of the dependency-check-maven plugin described above so we don't need to duplicate this in the pom", "url": "https://github.com/apache/druid/pull/9340#discussion_r377843921", "createdAt": "2020-02-11T19:17:04Z", "author": {"login": "suneet-s"}, "path": "pom.xml", "diffHunk": "@@ -1907,6 +1911,26 @@\n                             </execution>\n                         </executions>\n                     </plugin>\n+                    <plugin>\n+                      <groupId>org.owasp</groupId>\n+                      <artifactId>dependency-check-maven</artifactId>\n+                      <version>${dependency-check-maven.version}</version>\n+                      <configuration>\n+                          <cveValidForHours>24</cveValidForHours>\n+                          <failBuildOnCVSS>${dependency-check-maven.failBuildOnCVSS}</failBuildOnCVSS>\n+                          <skipProvidedScope>true</skipProvidedScope>\n+                          <skipSystemScope>true</skipSystemScope>  <!-- avoid error when processing jdk.tools:jdk.tools:jar:1.8:system -->\n+                          <suppressionFile>owasp-dependency-check-suppressions.xml</suppressionFile>\n+                      </configuration>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d30767b1ab1b2f64ba5d36673305d577a781c109"}, "originalPosition": 38}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63d43de058f80eb245cdc0caf58bb4ae1c697137", "author": {"user": {"login": "ccaominh", "name": "Chi Cao Minh"}}, "url": "https://github.com/apache/druid/commit/63d43de058f80eb245cdc0caf58bb4ae1c697137", "committedDate": "2020-02-11T19:28:17Z", "message": "Dedup plugin configuration definition"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2OTU5NzEw", "url": "https://github.com/apache/druid/pull/9340#pullrequestreview-356959710", "createdAt": "2020-02-11T20:10:32Z", "commit": {"oid": "63d43de058f80eb245cdc0caf58bb4ae1c697137"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2884, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}