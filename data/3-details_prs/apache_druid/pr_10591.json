{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIyNzYzNjY0", "number": 10591, "title": "druid-docker-image: add DRUID_DIRS_TO_CREATE variable to customize directories created on startup", "bodyText": "Description\nSmall update to druid docker container to enable customization of directories created at startup by specifying DRUID_DIRS_TO_CREATE env variable. Default list is only suitable for configuration from druid examples.\nUser can also set DRUID_DIRS_TO_CREATE to empty string to disable any directory creation altogether.\n\nThis PR has:\n\n been self-reviewed.\n\n using the concurrency checklist (Remove this item if the PR doesn't have any relation to concurrency.)\n\n\n added documentation for new or modified features or behaviors.\n added Javadocs for most classes and all non-trivial methods. Linked related entities via Javadoc links.\n added or updated version, license, or notice information in licenses.yaml\n added comments explaining the \"why\" and the intent of the code wherever would not be obvious for an unfamiliar reader.\n added unit tests or modified existing tests to cover new code paths, ensuring the threshold for code coverage is met.\n added integration tests.\n been tested in a test Druid cluster.", "createdAt": "2020-11-17T23:11:58Z", "url": "https://github.com/apache/druid/pull/10591", "merged": true, "mergeCommit": {"oid": "2201ffa2f01bb24b849ab6408afe98416f0cddcf"}, "closed": true, "closedAt": "2020-11-20T22:46:20Z", "author": {"login": "himanshug"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABddh2zdAH2gAyNTIyNzYzNjY0OmMyOWYyZWY0ZDk1MzBkYTQ5OGQyMGE4ZjZiNzAxZWRhNGZkZmIxM2M=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdeHOxZAFqTUzNDc0MjU0OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c29f2ef4d9530da498d20a8f6b701eda4fdfb13c", "author": {"user": {"login": "himanshug", "name": "Himanshu"}}, "url": "https://github.com/apache/druid/commit/c29f2ef4d9530da498d20a8f6b701eda4fdfb13c", "committedDate": "2020-11-17T23:07:46Z", "message": "druid-docker-image: add DRUID_DIRS_TO_CREATE variable to customize directories created on startup"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMzMTIzNDI4", "url": "https://github.com/apache/druid/pull/10591#pullrequestreview-533123428", "createdAt": "2020-11-18T05:55:16Z", "commit": {"oid": "c29f2ef4d9530da498d20a8f6b701eda4fdfb13c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQwNTo1NToxNlrOH1eNgQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQwNTo1NToxNlrOH1eNgQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTgzMTU1Mw==", "bodyText": "nit, why not use if [ -n \"$VAR\" ] like elsewhere in the script?", "url": "https://github.com/apache/druid/pull/10591#discussion_r525831553", "createdAt": "2020-11-18T05:55:16Z", "author": {"login": "xvrl"}, "path": "distribution/docker/druid.sh", "diffHunk": "@@ -148,5 +148,10 @@ then\n     echo \"$DRUID_LOG4J\" >$COMMON_CONF_DIR/log4j2.xml\n fi\n \n-mkdir -p var/tmp var/druid/segments var/druid/indexing-logs var/druid/task var/druid/hadoop-tmp var/druid/segment-cache\n+DRUID_DIRS_TO_CREATE=${DRUID_DIRS_TO_CREATE-'var/tmp var/druid/segments var/druid/indexing-logs var/druid/task var/druid/hadoop-tmp var/druid/segment-cache'}\n+if [ \"X${DRUID_DIRS_TO_CREATE}\" != \"X\" ]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c29f2ef4d9530da498d20a8f6b701eda4fdfb13c"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ec592afc63148a31febb7c3193995a635c709eab", "author": {"user": {"login": "himanshug", "name": "Himanshu"}}, "url": "https://github.com/apache/druid/commit/ec592afc63148a31febb7c3193995a635c709eab", "committedDate": "2020-11-18T22:50:32Z", "message": "address review comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "165a64db5e6711acf2ece02887ad382e2ad4beab", "author": {"user": {"login": "himanshug", "name": "Himanshu"}}, "url": "https://github.com/apache/druid/commit/165a64db5e6711acf2ece02887ad382e2ad4beab", "committedDate": "2020-11-19T01:46:04Z", "message": "remove unintentional change"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM0NzQyNTQ5", "url": "https://github.com/apache/druid/pull/10591#pullrequestreview-534742549", "createdAt": "2020-11-19T18:40:26Z", "commit": {"oid": "165a64db5e6711acf2ece02887ad382e2ad4beab"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3075, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}