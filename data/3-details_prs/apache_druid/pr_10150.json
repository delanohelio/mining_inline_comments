{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ1NjY1MzM5", "number": 10150, "title": "Reduce memory footprint of integration test by not starting unneeded containers", "bodyText": "Reduce memory footprint of integration test by not starting unneeded containers\nDescription\nAdditional Druid router services with permissive tls, no client auth tls, and custom check tls does not need to be started when test group is not \"security\". Hence, those should only be started when for running integration test group security.\nThis PR has:\n\n been self-reviewed.\n\n using the concurrency checklist (Remove this item if the PR doesn't have any relation to concurrency.)\n\n\n added documentation for new or modified features or behaviors.\n added Javadocs for most classes and all non-trivial methods. Linked related entities via Javadoc links.\n added or updated version, license, or notice information in licenses.yaml\n added comments explaining the \"why\" and the intent of the code wherever would not be obvious for an unfamiliar reader.\n added unit tests or modified existing tests to cover new code paths, ensuring the threshold for code coverage is met.\n added integration tests.\n been tested in a test Druid cluster.", "createdAt": "2020-07-07T20:42:46Z", "url": "https://github.com/apache/druid/pull/10150", "merged": true, "mergeCommit": {"oid": "859ff6e9c052f7331cfe8eb55b341ab628b9cd15"}, "closed": true, "closedAt": "2020-07-08T16:46:19Z", "author": {"login": "maytasm"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcyr_PEgH2gAyNDQ1NjY1MzM5OmZlMDhmYWE0ZGEyMDQ0NzI5NDRjOTg2ZDI3MzJmNGQxYzgzM2IyOTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcy5grvgFqTQ0NDcwOTcwNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "fe08faa4da204472944c986d2732f4d1c833b291", "author": {"user": {"login": "maytasm", "name": "Maytas Monsereenusorn"}}, "url": "https://github.com/apache/druid/commit/fe08faa4da204472944c986d2732f4d1c833b291", "committedDate": "2020-07-07T20:37:17Z", "message": "Reduce memory footprint of integration test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0MjM3NTE5", "url": "https://github.com/apache/druid/pull/10150#pullrequestreview-444237519", "createdAt": "2020-07-07T20:46:48Z", "commit": {"oid": "fe08faa4da204472944c986d2732f4d1c833b291"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QyMDo0Njo0OVrOGuO_kA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QyMDo0NzoxNVrOGuPAZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTEzMzMyOA==", "bodyText": "nit: '... that is used ...'", "url": "https://github.com/apache/druid/pull/10150#discussion_r451133328", "createdAt": "2020-07-07T20:46:49Z", "author": {"login": "clintropolis"}, "path": "integration-tests/README.md", "diffHunk": "@@ -74,17 +74,21 @@ Docker compose yamls located in \"docker\" folder\n \n docker-compose.base.yml - Base file that defines all containers for integration test\n \n-docker-compose.yml - Defines minimal Druid cluster that can be used for non cluster tests\n+docker-compose.yml - Defines Druid cluster with default configuration that is use for running integration tests in Travis CI.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe08faa4da204472944c986d2732f4d1c833b291"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTEzMzU0MQ==", "bodyText": "nit: wrong command?", "url": "https://github.com/apache/druid/pull/10150#discussion_r451133541", "createdAt": "2020-07-07T20:47:15Z", "author": {"login": "clintropolis"}, "path": "integration-tests/README.md", "diffHunk": "@@ -74,17 +74,21 @@ Docker compose yamls located in \"docker\" folder\n \n docker-compose.base.yml - Base file that defines all containers for integration test\n \n-docker-compose.yml - Defines minimal Druid cluster that can be used for non cluster tests\n+docker-compose.yml - Defines Druid cluster with default configuration that is use for running integration tests in Travis CI.\n     \n     docker-compose -f docker-compose.yml up\n     // DRUID_INTEGRATION_TEST_GROUP - this variable is used in Druid docker container for \"security\" and \"query\" test group. Use next docker-compose if you want to run security/query tests.\n     DRUID_INTEGRATION_TEST_GROUP=security docker-compose -f docker-compose.yml up\n \n-docker-compose.override-env.yml - the same configuration as docker-compose.yml + override-env variable that needed to run cloud tests \n+docker-compose.override-env.yml - Defines Druid cluster with default configuration plus any additional and/or overriden configurations from override-env file.\n \n     // OVERRIDE_ENV - variable that must contains path to Druid configuration file \n     OVERRIDE_ENV=./environment-configs/override-examples/s3 docker-compose -f docker-compose.override-env.yml up\n     \n+docker-compose.security.yml - Defines three additional Druid router services with permissive tls, no client auth tls, and custom check tls respectively. This is only needed for the \"security\" group integration test. \n+\n+    docker-compose -f docker-compose.druid-hadoop.yml up ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe08faa4da204472944c986d2732f4d1c833b291"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4083064d748d0fafb55e2db44e73ca83a0bd88b5", "author": {"user": {"login": "maytasm", "name": "Maytas Monsereenusorn"}}, "url": "https://github.com/apache/druid/commit/4083064d748d0fafb55e2db44e73ca83a0bd88b5", "committedDate": "2020-07-07T20:50:59Z", "message": "fix README"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ef9b7ee79960d26db76494fb2de80486419e47c", "author": {"user": {"login": "maytasm", "name": "Maytas Monsereenusorn"}}, "url": "https://github.com/apache/druid/commit/1ef9b7ee79960d26db76494fb2de80486419e47c", "committedDate": "2020-07-07T20:53:12Z", "message": "fix README"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b51b3d338445ea133f61c929057b661c91d72eb9", "author": {"user": {"login": "maytasm", "name": "Maytas Monsereenusorn"}}, "url": "https://github.com/apache/druid/commit/b51b3d338445ea133f61c929057b661c91d72eb9", "committedDate": "2020-07-08T00:17:18Z", "message": "fix error in script"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3497ee9f74b2fd14425c4000ed1de48b790a4b72", "author": {"user": {"login": "maytasm", "name": "Maytas Monsereenusorn"}}, "url": "https://github.com/apache/druid/commit/3497ee9f74b2fd14425c4000ed1de48b790a4b72", "committedDate": "2020-07-08T02:35:56Z", "message": "fix security IT"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0NDQyMTkz", "url": "https://github.com/apache/druid/pull/10150#pullrequestreview-444442193", "createdAt": "2020-07-08T06:19:51Z", "commit": {"oid": "3497ee9f74b2fd14425c4000ed1de48b790a4b72"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0NzA5NzA1", "url": "https://github.com/apache/druid/pull/10150#pullrequestreview-444709705", "createdAt": "2020-07-08T12:22:35Z", "commit": {"oid": "3497ee9f74b2fd14425c4000ed1de48b790a4b72"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1820, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}