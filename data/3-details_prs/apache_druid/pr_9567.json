{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzOTAyMjQ5", "number": 9567, "title": "fix global filter input", "bodyText": "Previously the filters would be applied as soon as they passed the try catch of the jsonInput component, not when the user hit apply. The user must now actually click apply for the filter to work. Additionally, I have changed it so now the jsonInput is a controlled component which will allow for the input to be reset upon clicking apply.", "createdAt": "2020-03-26T01:08:27Z", "url": "https://github.com/apache/druid/pull/9567", "merged": true, "mergeCommit": {"oid": "6e50d29b4e95597337cb389689459b2bc33a4834"}, "closed": true, "closedAt": "2020-04-07T20:31:19Z", "author": {"login": "mcbrewster"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcRRcEDAH2gAyMzkzOTAyMjQ5OmVkMjRhMmVjNWZmZjNmZGM5ZTMwMDMwM2M0YWYxODQzYmIyNjE4NmE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcTnO7ngH2gAyMzkzOTAyMjQ5OjQ1NGZkYTkxNDBhNmZlYWQ4MzM2ZjI4ZTI5OTAxYzg0YjZlMWQ1MzM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ed24a2ec5fff3fdc9e300303c4af1843bb26186a", "author": {"user": {"login": "mcbrewster", "name": null}}, "url": "https://github.com/apache/druid/commit/ed24a2ec5fff3fdc9e300303c4af1843bb26186a", "committedDate": "2020-03-26T01:01:50Z", "message": "fix global filter input"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyMzIyNDk1", "url": "https://github.com/apache/druid/pull/9567#pullrequestreview-382322495", "createdAt": "2020-03-26T18:57:22Z", "commit": {"oid": "ed24a2ec5fff3fdc9e300303c4af1843bb26186a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxODo1NzoyM1rOF8V6BA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxODo1NzoyM1rOF8V6BA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODgxNzc5Ng==", "bodyText": "I think this should be newFilterValue || restFilter otherwise the filter disappears after you click Apply", "url": "https://github.com/apache/druid/pull/9567#discussion_r398817796", "createdAt": "2020-03-26T18:57:23Z", "author": {"login": "vogievetsky"}, "path": "web-console/src/views/load-data-view/load-data-view.tsx", "diffHunk": "@@ -2094,19 +2096,25 @@ export class LoadDataView extends React.PureComponent<LoadDataViewProps, LoadDat\n           />\n           <FormGroup label=\"Extra filter\">\n             <JsonInput\n-              value={restFilter}\n-              onChange={f => {\n+              value={newFilterValue}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ed24a2ec5fff3fdc9e300303c4af1843bb26186a"}, "originalPosition": 29}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "de32e1cc8a408029c157385499175c3017f7b63c", "author": {"user": {"login": "mcbrewster", "name": null}}, "url": "https://github.com/apache/druid/commit/de32e1cc8a408029c157385499175c3017f7b63c", "committedDate": "2020-03-27T20:12:12Z", "message": "remove clear"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "312ecfb23c28d1e71a03678680d31b48b703690a", "author": {"user": {"login": "mcbrewster", "name": null}}, "url": "https://github.com/apache/druid/commit/312ecfb23c28d1e71a03678680d31b48b703690a", "committedDate": "2020-04-01T17:35:04Z", "message": "close global filters after clicking apply"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1ODgzNDI5", "url": "https://github.com/apache/druid/pull/9567#pullrequestreview-385883429", "createdAt": "2020-04-01T19:26:26Z", "commit": {"oid": "312ecfb23c28d1e71a03678680d31b48b703690a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxOToyNjoyN1rOF_PUXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxOToyNjoyN1rOF_PUXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTg1NTU4MQ==", "bodyText": "you need to set this to restFilter from const { restFilter } = splitFilter", "url": "https://github.com/apache/druid/pull/9567#discussion_r401855581", "createdAt": "2020-04-01T19:26:27Z", "author": {"login": "vogievetsky"}, "path": "web-console/src/views/load-data-view/load-data-view.tsx", "diffHunk": "@@ -2116,7 +2123,12 @@ export class LoadDataView extends React.PureComponent<LoadDataViewProps, LoadDat\n         <FormGroup>\n           <Button\n             text={`${hasGlobalFilter ? 'Edit' : 'Add'} global filter`}\n-            onClick={() => this.setState({ showGlobalFilter: true })}\n+            onClick={() =>\n+              this.setState({\n+                showGlobalFilter: true,\n+                newFilterValue: deepGet(spec, 'spec.dataSchema.transformSpec.filter'),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "312ecfb23c28d1e71a03678680d31b48b703690a"}, "originalPosition": 63}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "454fda9140a6fead8336f28e29901c84b6e1d533", "author": {"user": {"login": "mcbrewster", "name": null}}, "url": "https://github.com/apache/druid/commit/454fda9140a6fead8336f28e29901c84b6e1d533", "committedDate": "2020-04-02T07:33:15Z", "message": "add restFilter"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2729, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}