{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE1MTgzNTAw", "number": 10555, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQwODoyNzoyMFrOE1Hg_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQwODoyNzoyMFrOE1Hg_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI0MTMzMTE5OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/org/apache/druid/java/util/common/concurrent/ScheduledExecutors.java", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQwODoyNzoyMFrOHtNgEQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QwMjo0MTozMFrOH3962w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzE2OTE2OQ==", "bodyText": "please add a log line here. It will be hard to debug if someone wrongly shuts down the exec.", "url": "https://github.com/apache/druid/pull/10555#discussion_r517169169", "createdAt": "2020-11-04T08:27:20Z", "author": {"login": "nishantmonu51"}, "path": "core/src/main/java/org/apache/druid/java/util/common/concurrent/ScheduledExecutors.java", "diffHunk": "@@ -53,7 +53,11 @@ public static void scheduleWithFixedDelay(\n           public Signal call()\n           {\n             runnable.run(); // (Exceptions are handled for us)\n-            return Signal.REPEAT;\n+            if (exec.isShutdown()) {\n+              return Signal.STOP;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46c94bd2daeb3e4700814cb89e44212c0d62ffdd"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzIyODM3Mg==", "bodyText": "Done. Thanks for reviewing!", "url": "https://github.com/apache/druid/pull/10555#discussion_r517228372", "createdAt": "2020-11-04T10:04:04Z", "author": {"login": "zhangyue19921010"}, "path": "core/src/main/java/org/apache/druid/java/util/common/concurrent/ScheduledExecutors.java", "diffHunk": "@@ -53,7 +53,11 @@ public static void scheduleWithFixedDelay(\n           public Signal call()\n           {\n             runnable.run(); // (Exceptions are handled for us)\n-            return Signal.REPEAT;\n+            if (exec.isShutdown()) {\n+              return Signal.STOP;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzE2OTE2OQ=="}, "originalCommit": {"oid": "46c94bd2daeb3e4700814cb89e44212c0d62ffdd"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTE5MjI4Ng==", "bodyText": "@nishantmonu51 Hi nishantmonu51, sorry to bother you. I have tested this change in our Druid cluster. What should I do next ?", "url": "https://github.com/apache/druid/pull/10555#discussion_r521192286", "createdAt": "2020-11-11T08:26:57Z", "author": {"login": "zhangyue19921010"}, "path": "core/src/main/java/org/apache/druid/java/util/common/concurrent/ScheduledExecutors.java", "diffHunk": "@@ -53,7 +53,11 @@ public static void scheduleWithFixedDelay(\n           public Signal call()\n           {\n             runnable.run(); // (Exceptions are handled for us)\n-            return Signal.REPEAT;\n+            if (exec.isShutdown()) {\n+              return Signal.STOP;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzE2OTE2OQ=="}, "originalCommit": {"oid": "46c94bd2daeb3e4700814cb89e44212c0d62ffdd"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODAyMTIyNw==", "bodyText": "nit: I would make that a log.warn(..) because debug would hardly be enabled and this log is not gonna pollute the logs, but looks good otherwise.\nthanks.", "url": "https://github.com/apache/druid/pull/10555#discussion_r528021227", "createdAt": "2020-11-20T23:21:29Z", "author": {"login": "himanshug"}, "path": "core/src/main/java/org/apache/druid/java/util/common/concurrent/ScheduledExecutors.java", "diffHunk": "@@ -53,7 +53,11 @@ public static void scheduleWithFixedDelay(\n           public Signal call()\n           {\n             runnable.run(); // (Exceptions are handled for us)\n-            return Signal.REPEAT;\n+            if (exec.isShutdown()) {\n+              return Signal.STOP;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzE2OTE2OQ=="}, "originalCommit": {"oid": "46c94bd2daeb3e4700814cb89e44212c0d62ffdd"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODQ0ODIxOQ==", "bodyText": "@himanshug Thanks for your review. I have changed the log level to WARN.", "url": "https://github.com/apache/druid/pull/10555#discussion_r528448219", "createdAt": "2020-11-23T02:41:30Z", "author": {"login": "zhangyue19921010"}, "path": "core/src/main/java/org/apache/druid/java/util/common/concurrent/ScheduledExecutors.java", "diffHunk": "@@ -53,7 +53,11 @@ public static void scheduleWithFixedDelay(\n           public Signal call()\n           {\n             runnable.run(); // (Exceptions are handled for us)\n-            return Signal.REPEAT;\n+            if (exec.isShutdown()) {\n+              return Signal.STOP;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzE2OTE2OQ=="}, "originalCommit": {"oid": "46c94bd2daeb3e4700814cb89e44212c0d62ffdd"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2854, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}