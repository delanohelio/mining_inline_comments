{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA2NDE4NzA5", "number": 9729, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQwMzoyNTo1MlrOD1khrg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQwMzoyNTo1MlrOD1khrg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3NDk5NTY2OnYy", "diffSide": "RIGHT", "path": "extensions-core/kinesis-indexing-service/src/main/java/org/apache/druid/indexing/kinesis/KinesisRecordSupplier.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQwMzoyNTo1MlrOGLEsGA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxNzozNzoxMVrOGLiM7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDI2NDM0NA==", "bodyText": "This change doesn't seem doing anything. Is there some reason?", "url": "https://github.com/apache/druid/pull/9729#discussion_r414264344", "createdAt": "2020-04-24T03:25:52Z", "author": {"login": "jihoonson"}, "path": "extensions-core/kinesis-indexing-service/src/main/java/org/apache/druid/indexing/kinesis/KinesisRecordSupplier.java", "diffHunk": "@@ -780,15 +780,14 @@ private String getSequenceNumberInternal(StreamPartition<String> partition, Shar\n   private String getSequenceNumberInternal(StreamPartition<String> partition, String shardIterator)\n   {\n     long timeoutMillis = System.currentTimeMillis() + fetchSequenceNumberTimeout;\n+    GetRecordsResult recordsResult = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae222aadcb28fff86752544297de965fceaba46a"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDI5Nzc1OQ==", "bodyText": "I want to access recordsResult outside of the while loop (so that I can print the millisBehindLatest in the warn logging line 834). Hence, I moved variable declaration of recordsResult to outside the while loop and we can check for null in the warn logging. If it is not null (meaning it was assign in the while loop when we getRecords from Kinesis) then we can log the millisBehindLatest. This will help us be sure that timeout is due to no data or not", "url": "https://github.com/apache/druid/pull/9729#discussion_r414297759", "createdAt": "2020-04-24T05:11:44Z", "author": {"login": "maytasm"}, "path": "extensions-core/kinesis-indexing-service/src/main/java/org/apache/druid/indexing/kinesis/KinesisRecordSupplier.java", "diffHunk": "@@ -780,15 +780,14 @@ private String getSequenceNumberInternal(StreamPartition<String> partition, Shar\n   private String getSequenceNumberInternal(StreamPartition<String> partition, String shardIterator)\n   {\n     long timeoutMillis = System.currentTimeMillis() + fetchSequenceNumberTimeout;\n+    GetRecordsResult recordsResult = null;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDI2NDM0NA=="}, "originalCommit": {"oid": "ae222aadcb28fff86752544297de965fceaba46a"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc0Nzg4NA==", "bodyText": "Got it. Thanks.", "url": "https://github.com/apache/druid/pull/9729#discussion_r414747884", "createdAt": "2020-04-24T17:37:11Z", "author": {"login": "jihoonson"}, "path": "extensions-core/kinesis-indexing-service/src/main/java/org/apache/druid/indexing/kinesis/KinesisRecordSupplier.java", "diffHunk": "@@ -780,15 +780,14 @@ private String getSequenceNumberInternal(StreamPartition<String> partition, Shar\n   private String getSequenceNumberInternal(StreamPartition<String> partition, String shardIterator)\n   {\n     long timeoutMillis = System.currentTimeMillis() + fetchSequenceNumberTimeout;\n+    GetRecordsResult recordsResult = null;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDI2NDM0NA=="}, "originalCommit": {"oid": "ae222aadcb28fff86752544297de965fceaba46a"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2573, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}