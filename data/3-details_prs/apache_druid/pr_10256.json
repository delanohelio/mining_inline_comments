{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY0ODQ5MTAw", "number": 10256, "title": "Web console: improve JSON paste experience ", "bodyText": "Fix some UX nits where it was not possible to clear the spec box in the Edit spec screen because it would always fill it with {}. Make the spec submission dialog not default to { } but use placeholder instead.\n\nJust look at that empty input box. Is is mind boggling what technology can achieve today... from heavier than air flight to NOT putting text in a box. Truly remarkable.\nThis PR has:\n\n been self-reviewed.\n(Remove this item if the PR doesn't have any relation to concurrency.)\n added comments explaining the \"why\" and the intent of the code wherever would not be obvious for an unfamiliar reader.\n added unit tests or modified existing tests to cover new code paths\n been tested in a test Druid cluster.", "createdAt": "2020-08-07T21:56:04Z", "url": "https://github.com/apache/druid/pull/10256", "merged": true, "mergeCommit": {"oid": "1fae0e15c9240d9a1e47149465276f30574966b5"}, "closed": true, "closedAt": "2020-08-08T00:01:07Z", "author": {"login": "vogievetsky"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc8rjtyAH2gAyNDY0ODQ5MTAwOjgxMjNhNTE1Zjk4MDU4MDgyMGQ4MjI4ODQxODJhZDA3NGZjYjY5MTA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc8te5kgFqTQ2MzY5MzgzNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8123a515f980580820d822884182ad074fcb6910", "author": {"user": {"login": "vogievetsky", "name": "Vadim Ogievetsky"}}, "url": "https://github.com/apache/druid/commit/8123a515f980580820d822884182ad074fcb6910", "committedDate": "2020-08-07T21:46:28Z", "message": "improve JSON paste"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzNjY0NzYz", "url": "https://github.com/apache/druid/pull/10256#pullrequestreview-463664763", "createdAt": "2020-08-07T22:09:04Z", "commit": {"oid": "8123a515f980580820d822884182ad074fcb6910"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QyMjowOTowNFrOG9qLVA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QyMjoxMDoxMVrOG9qMng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzMwNzM0OA==", "bodyText": "What does placeholder do?", "url": "https://github.com/apache/druid/pull/10256#discussion_r467307348", "createdAt": "2020-08-07T22:09:04Z", "author": {"login": "gianm"}, "path": "web-console/src/dialogs/spec-dialog/spec-dialog.tsx", "diffHunk": "@@ -65,6 +65,7 @@ export const SpecDialog = React.memo(function SpecDialog(props: SpecDialogProps)\n           tabSize: 2,\n         }}\n         style={{}}\n+        placeholder=\"{ JSON spec... }\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8123a515f980580820d822884182ad074fcb6910"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzMwNzQ3NQ==", "bodyText": "What's all this new stuff for and what are the XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX about?", "url": "https://github.com/apache/druid/pull/10256#discussion_r467307475", "createdAt": "2020-08-07T22:09:33Z", "author": {"login": "gianm"}, "path": "web-console/src/dialogs/spec-dialog/__snapshots__/spec-dialog.spec.tsx.snap", "diffHunk": "@@ -1,6 +1,187 @@\n // Jest Snapshot v1, https://goo.gl/fbAQLP\n \n-exports[`spec dialog matches snapshot 1`] = `\n+exports[`spec dialog matches snapshot no initSpec 1`] = `", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8123a515f980580820d822884182ad074fcb6910"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzMwNzY3OA==", "bodyText": "What happens when the text in the area can't be parsed?", "url": "https://github.com/apache/druid/pull/10256#discussion_r467307678", "createdAt": "2020-08-07T22:10:11Z", "author": {"login": "gianm"}, "path": "web-console/src/components/json-input/json-input.tsx", "diffHunk": "@@ -24,7 +24,9 @@ import AceEditor from 'react-ace';\n import './json-input.scss';\n \n function parseHjson(str: string) {\n-  return str === '' ? null : Hjson.parse(str);\n+  // Throwing on empty input is more consistent with how JSON.parse works", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8123a515f980580820d822884182ad074fcb6910"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzNjkzODM2", "url": "https://github.com/apache/druid/pull/10256#pullrequestreview-463693836", "createdAt": "2020-08-08T00:01:01Z", "commit": {"oid": "8123a515f980580820d822884182ad074fcb6910"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1937, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}