{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY5ODI4NTQ2", "number": 6132, "title": "Adds changeOwnership and changeFileMode functions to FilePath", "bodyText": "Also adds some posix system utility functions to shared_core for use in the Launcher Plugin SDK.", "createdAt": "2020-02-01T00:46:36Z", "url": "https://github.com/rstudio/rstudio/pull/6132", "merged": true, "mergeCommit": {"oid": "ea39d818a3e5bc0d555d75ef45ac2895c3387dad"}, "closed": true, "closedAt": "2020-02-08T22:57:10Z", "author": {"login": "MariaSemple"}, "timelineItems": {"totalCount": 20, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb_Qv6FAH2gAyMzY5ODI4NTQ2OjM4OGFlOWE5ZjhiY2U1MjUxYjk0MTFhY2E2NmRkMTBmNWI2ZDlmMGY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcCYjoJAH2gAyMzY5ODI4NTQ2OjMyZmYxMDJiZGJiMmUwYWZlOWI1MTc1YzYxNGE0MzFjMmQ1ODZlNTE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "388ae9a9f8bce5251b9411aca66dd10f5b6d9f0f", "author": {"user": {"login": "MariaSemple", "name": "Maria Semple"}}, "url": "https://github.com/rstudio/rstudio/commit/388ae9a9f8bce5251b9411aca66dd10f5b6d9f0f", "committedDate": "2020-01-30T02:02:58Z", "message": "fix #ifdef directive"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4898cd83b87a1262b099ac390edde749b1304c37", "author": {"user": {"login": "MariaSemple", "name": "Maria Semple"}}, "url": "https://github.com/rstudio/rstudio/commit/4898cd83b87a1262b099ac390edde749b1304c37", "committedDate": "2020-01-30T04:14:10Z", "message": "move changeOwnership and fileMode functions to FilePath"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2195eea97b22d7ad2da76b17c8304d9e50b56625", "author": {"user": {"login": "MariaSemple", "name": "Maria Semple"}}, "url": "https://github.com/rstudio/rstudio/commit/2195eea97b22d7ad2da76b17c8304d9e50b56625", "committedDate": "2020-01-30T04:34:08Z", "message": "rename enum values for shared_core style"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fc8bba16d2cb0b3198eb79cd54c36f1d3a0c4b28", "author": {"user": {"login": "MariaSemple", "name": "Maria Semple"}}, "url": "https://github.com/rstudio/rstudio/commit/fc8bba16d2cb0b3198eb79cd54c36f1d3a0c4b28", "committedDate": "2020-01-31T23:42:24Z", "message": "Merge branch 'v1.4' into feature/file-path-change-owner-mode"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e82a9ab9bff81e6ec591e2c4f861f22aac76c34", "author": {"user": {"login": "MariaSemple", "name": "Maria Semple"}}, "url": "https://github.com/rstudio/rstudio/commit/7e82a9ab9bff81e6ec591e2c4f861f22aac76c34", "committedDate": "2020-02-01T00:44:59Z", "message": "add posix system utilities to shared_core"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUyNDcwMzk1", "url": "https://github.com/rstudio/rstudio/pull/6132#pullrequestreview-352470395", "createdAt": "2020-02-03T18:34:42Z", "commit": {"oid": "7e82a9ab9bff81e6ec591e2c4f861f22aac76c34"}, "state": "COMMENTED", "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxODozNDo0MlrOFk7i2A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxODo1NTo0NVrOFk8Kdg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDI2ODYzMg==", "bodyText": "In what contexts might this fail? I'm mainly wondering because (IIUC) this adds a new way for rserver to fail to start and just want to make sure we understand the failure modes (and are convinced they're rare or understandable + easy to diagnose).\nAlternatively: what do you think about using options.serverUser() by default, and having an error here be a warning rather than fatal? Or would this ultimately just fail somewhere else further down?", "url": "https://github.com/rstudio/rstudio/pull/6132#discussion_r374268632", "createdAt": "2020-02-03T18:34:42Z", "author": {"login": "kevinushey"}, "path": "src/cpp/server/ServerMain.cpp", "diffHunk": "@@ -571,7 +572,12 @@ int main(int argc, char * const argv[])\n             return true;\n          };\n \n-         error = file_utils::changeOwnership(serverDataDir, options.serverUser(), true, shouldChown);\n+         system::User serverUser;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7e82a9ab9bff81e6ec591e2c4f861f22aac76c34"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDI2OTQwMA==", "bodyText": "Similar question here.", "url": "https://github.com/rstudio/rstudio/pull/6132#discussion_r374269400", "createdAt": "2020-02-03T18:36:21Z", "author": {"login": "kevinushey"}, "path": "src/cpp/server/auth/ServerAuthHandler.cpp", "diffHunk": "@@ -454,9 +454,17 @@ Error initialize()\n       return error;\n    }\n \n+   core::system::User serverUser;\n+   error = core::system::User::getUserFromIdentifier(options().serverUser(), serverUser);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7e82a9ab9bff81e6ec591e2c4f861f22aac76c34"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDI3MDIyMQ==", "bodyText": "Is it worth documenting that only a subset of posix file mode strings are supported?", "url": "https://github.com/rstudio/rstudio/pull/6132#discussion_r374270221", "createdAt": "2020-02-03T18:38:03Z", "author": {"login": "kevinushey"}, "path": "src/cpp/shared_core/include/shared_core/FilePath.hpp", "diffHunk": "@@ -231,6 +260,53 @@ class FilePath\n     */\n    static Error uniqueFilePath(const std::string& in_basePath, const std::string& in_extension, FilePath& out_filePath);\n \n+#ifndef _WIN32\n+   /**\n+    * @brief Changes the file mode to the specified file mode.\n+    *\n+    * @param in_fileModeStr     The posix file mode string. e.g. rwxr-xr-x.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7e82a9ab9bff81e6ec591e2c4f861f22aac76c34"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDI3MDkwOQ==", "bodyText": "minor nit: the lines here are just long enough to force GitHub's PR UI to overflow horizontally a bit; e.g.\n\nNot sure if this is motivation enough for us to adjust our editor line widths down a bit.", "url": "https://github.com/rstudio/rstudio/pull/6132#discussion_r374270909", "createdAt": "2020-02-03T18:39:32Z", "author": {"login": "kevinushey"}, "path": "src/cpp/shared_core/include/shared_core/FilePath.hpp", "diffHunk": "@@ -231,6 +260,53 @@ class FilePath\n     */\n    static Error uniqueFilePath(const std::string& in_basePath, const std::string& in_extension, FilePath& out_filePath);\n \n+#ifndef _WIN32\n+   /**\n+    * @brief Changes the file mode to the specified file mode.\n+    *\n+    * @param in_fileModeStr     The posix file mode string. e.g. rwxr-xr-x.\n+    *\n+    * @return Success if the file mode could be changed; Error otherwise.\n+    */\n+   Error changeFileMode(const std::string& in_fileModeStr) const;\n+\n+   /**\n+    * @brief Changes the file mode to the specified file mode.\n+    *\n+    * @param in_fileMode        The new file mode.\n+    * @param in_setStickyBit    Whether to set the sticky bit on this file.\n+    *\n+    * @return Success if the file mode could be changed; Error otherwise.\n+    */\n+   Error changeFileMode(FileMode in_fileMode, bool in_setStickyBit = false) const;\n+\n+   /**\n+    * @brief Changes the ownership of the file or directory to the specified user.\n+    *\n+    * @param in_newUser         The user who should own the file.\n+    * @param in_recursive       If this FilePath is a directory, whether to recursively change ownership on all files\n+    *                           and directories within this directory.\n+    * @param in_shouldChown     A recursive iteration function which allows the caller to filter files and directories.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7e82a9ab9bff81e6ec591e2c4f861f22aac76c34"}, "originalPosition": 79}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDI3NDU0Mg==", "bodyText": "Should we return a \"not supported\" error for __APPLE__? (maybe not as part of this PR since I'm guessing this is mostly just moving things into shared_core?)", "url": "https://github.com/rstudio/rstudio/pull/6132#discussion_r374274542", "createdAt": "2020-02-03T18:47:03Z", "author": {"login": "kevinushey"}, "path": "src/cpp/shared_core/system/PosixSystem.cpp", "diffHunk": "@@ -0,0 +1,134 @@\n+/*\n+ * PosixSystem.cpp\n+ *\n+ * Copyright (C) 2009-19 by RStudio, Inc.\n+ *\n+ * Unless you have received this program directly from RStudio pursuant to the terms of a commercial license agreement\n+ * with RStudio, then this program is licensed to you under the following terms:\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated\n+ * documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the\n+ * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n+ * permit persons to whom the Software is furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the\n+ * Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE\n+ * WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\n+ * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n+ * OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n+ *\n+ */\n+\n+#include <shared_core/system/PosixSystem.hpp>\n+\n+#include <csignal>\n+#include <grp.h>\n+#include <memory.h>\n+#include <pwd.h>\n+#include <sys/prctl.h>\n+\n+#include <shared_core/Error.hpp>\n+#include <shared_core/system/User.hpp>\n+\n+namespace rstudio {\n+namespace core {\n+namespace system {\n+namespace posix {\n+\n+Error enableCoreDumps()\n+{\n+#ifndef __APPLE__", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7e82a9ab9bff81e6ec591e2c4f861f22aac76c34"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDI3NTA1OQ==", "bodyText": "Is there any easy way for us to convert the signal number to the signal name here? (just makes debugging a tad easier)", "url": "https://github.com/rstudio/rstudio/pull/6132#discussion_r374275059", "createdAt": "2020-02-03T18:48:08Z", "author": {"login": "kevinushey"}, "path": "src/cpp/shared_core/system/PosixSystem.cpp", "diffHunk": "@@ -0,0 +1,134 @@\n+/*\n+ * PosixSystem.cpp\n+ *\n+ * Copyright (C) 2009-19 by RStudio, Inc.\n+ *\n+ * Unless you have received this program directly from RStudio pursuant to the terms of a commercial license agreement\n+ * with RStudio, then this program is licensed to you under the following terms:\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated\n+ * documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the\n+ * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n+ * permit persons to whom the Software is furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the\n+ * Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE\n+ * WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\n+ * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n+ * OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n+ *\n+ */\n+\n+#include <shared_core/system/PosixSystem.hpp>\n+\n+#include <csignal>\n+#include <grp.h>\n+#include <memory.h>\n+#include <pwd.h>\n+#include <sys/prctl.h>\n+\n+#include <shared_core/Error.hpp>\n+#include <shared_core/system/User.hpp>\n+\n+namespace rstudio {\n+namespace core {\n+namespace system {\n+namespace posix {\n+\n+Error enableCoreDumps()\n+{\n+#ifndef __APPLE__\n+   int res = ::prctl(PR_SET_DUMPABLE, 1);\n+   if (res == -1)\n+      return systemError(errno, ERROR_LOCATION);\n+#endif\n+\n+   return Success();\n+}\n+\n+Error ignoreSignal(int in_signal)\n+{\n+   struct sigaction sa;\n+   ::memset(&sa, 0, sizeof(sa));\n+\n+   sa.sa_handler = SIG_IGN;\n+   int result = ::sigaction(in_signal, &sa, nullptr);\n+   if (result != 0)\n+   {\n+      Error error = systemError(result, ERROR_LOCATION);\n+      error.addProperty(\"signal\", in_signal);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7e82a9ab9bff81e6ec591e2c4f861f22aac76c34"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDI3ODI4NQ==", "bodyText": "IIUC errors here and below would lead us to still having root, just not having the effective group set. Is it acceptable for us to end up in this state, or should we try to make sure this function is 'atomic'? (not sure atomic is the best word but it feels like the closest analogue here)", "url": "https://github.com/rstudio/rstudio/pull/6132#discussion_r374278285", "createdAt": "2020-02-03T18:54:46Z", "author": {"login": "kevinushey"}, "path": "src/cpp/shared_core/system/PosixSystem.cpp", "diffHunk": "@@ -0,0 +1,134 @@\n+/*\n+ * PosixSystem.cpp\n+ *\n+ * Copyright (C) 2009-19 by RStudio, Inc.\n+ *\n+ * Unless you have received this program directly from RStudio pursuant to the terms of a commercial license agreement\n+ * with RStudio, then this program is licensed to you under the following terms:\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated\n+ * documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the\n+ * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n+ * permit persons to whom the Software is furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the\n+ * Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE\n+ * WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\n+ * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n+ * OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n+ *\n+ */\n+\n+#include <shared_core/system/PosixSystem.hpp>\n+\n+#include <csignal>\n+#include <grp.h>\n+#include <memory.h>\n+#include <pwd.h>\n+#include <sys/prctl.h>\n+\n+#include <shared_core/Error.hpp>\n+#include <shared_core/system/User.hpp>\n+\n+namespace rstudio {\n+namespace core {\n+namespace system {\n+namespace posix {\n+\n+Error enableCoreDumps()\n+{\n+#ifndef __APPLE__\n+   int res = ::prctl(PR_SET_DUMPABLE, 1);\n+   if (res == -1)\n+      return systemError(errno, ERROR_LOCATION);\n+#endif\n+\n+   return Success();\n+}\n+\n+Error ignoreSignal(int in_signal)\n+{\n+   struct sigaction sa;\n+   ::memset(&sa, 0, sizeof(sa));\n+\n+   sa.sa_handler = SIG_IGN;\n+   int result = ::sigaction(in_signal, &sa, nullptr);\n+   if (result != 0)\n+   {\n+      Error error = systemError(result, ERROR_LOCATION);\n+      error.addProperty(\"signal\", in_signal);\n+      return error;\n+   }\n+\n+   return Success();\n+}\n+\n+bool realUserIsRoot()\n+{\n+   return ::getuid() == 0;\n+}\n+\n+Error restoreRoot()\n+{\n+   // Reset error state.\n+   errno = 0;\n+\n+   // Change the effective user to root.\n+   if (::seteuid(0) < 0)\n+      return systemError(errno, ERROR_LOCATION);\n+   // Verify\n+   if (::geteuid() != 0)\n+      return systemError(EACCES, ERROR_LOCATION);\n+\n+   // Get user info to use in group calls\n+   struct passwd* pPrivPasswd = ::getpwuid(0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7e82a9ab9bff81e6ec591e2c4f861f22aac76c34"}, "originalPosition": 86}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDI3ODc3NA==", "bodyText": "Similar question re: atomicity in this function.", "url": "https://github.com/rstudio/rstudio/pull/6132#discussion_r374278774", "createdAt": "2020-02-03T18:55:45Z", "author": {"login": "kevinushey"}, "path": "src/cpp/shared_core/system/PosixSystem.cpp", "diffHunk": "@@ -0,0 +1,134 @@\n+/*\n+ * PosixSystem.cpp\n+ *\n+ * Copyright (C) 2009-19 by RStudio, Inc.\n+ *\n+ * Unless you have received this program directly from RStudio pursuant to the terms of a commercial license agreement\n+ * with RStudio, then this program is licensed to you under the following terms:\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated\n+ * documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the\n+ * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n+ * permit persons to whom the Software is furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the\n+ * Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE\n+ * WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\n+ * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n+ * OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n+ *\n+ */\n+\n+#include <shared_core/system/PosixSystem.hpp>\n+\n+#include <csignal>\n+#include <grp.h>\n+#include <memory.h>\n+#include <pwd.h>\n+#include <sys/prctl.h>\n+\n+#include <shared_core/Error.hpp>\n+#include <shared_core/system/User.hpp>\n+\n+namespace rstudio {\n+namespace core {\n+namespace system {\n+namespace posix {\n+\n+Error enableCoreDumps()\n+{\n+#ifndef __APPLE__\n+   int res = ::prctl(PR_SET_DUMPABLE, 1);\n+   if (res == -1)\n+      return systemError(errno, ERROR_LOCATION);\n+#endif\n+\n+   return Success();\n+}\n+\n+Error ignoreSignal(int in_signal)\n+{\n+   struct sigaction sa;\n+   ::memset(&sa, 0, sizeof(sa));\n+\n+   sa.sa_handler = SIG_IGN;\n+   int result = ::sigaction(in_signal, &sa, nullptr);\n+   if (result != 0)\n+   {\n+      Error error = systemError(result, ERROR_LOCATION);\n+      error.addProperty(\"signal\", in_signal);\n+      return error;\n+   }\n+\n+   return Success();\n+}\n+\n+bool realUserIsRoot()\n+{\n+   return ::getuid() == 0;\n+}\n+\n+Error restoreRoot()\n+{\n+   // Reset error state.\n+   errno = 0;\n+\n+   // Change the effective user to root.\n+   if (::seteuid(0) < 0)\n+      return systemError(errno, ERROR_LOCATION);\n+   // Verify\n+   if (::geteuid() != 0)\n+      return systemError(EACCES, ERROR_LOCATION);\n+\n+   // Get user info to use in group calls\n+   struct passwd* pPrivPasswd = ::getpwuid(0);\n+   if (pPrivPasswd == nullptr)\n+      return systemError(errno, ERROR_LOCATION);\n+\n+   // Supplemental groups\n+   if (::initgroups(pPrivPasswd->pw_name, pPrivPasswd->pw_gid) < 0)\n+      return systemError(errno, ERROR_LOCATION);\n+\n+   // Set effective group\n+   if (::setegid(pPrivPasswd->pw_gid) < 0)\n+      return systemError(errno, ERROR_LOCATION);\n+   // Verify\n+   if (::getegid() != pPrivPasswd->pw_gid)\n+      return systemError(EACCES, ERROR_LOCATION);\n+\n+   return Success();\n+}\n+\n+Error temporarilyDropPriv(const system::User& in_user)\n+{\n+   // clear error state\n+   errno = 0;\n+\n+   // init supplemental group list\n+   // NOTE: if porting to CYGWIN may need to call getgroups/setgroups\n+   // after initgroups -- more research required to confirm\n+   if (::initgroups(in_user.getUsername().c_str(), in_user.getGroupId()) < 0)\n+      return systemError(errno, ERROR_LOCATION);\n+\n+   // set group and verify\n+   if (::setresgid(-1, in_user.getGroupId(), ::getegid()) < 0)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7e82a9ab9bff81e6ec591e2c4f861f22aac76c34"}, "originalPosition": 116}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUyNTI4NzIx", "url": "https://github.com/rstudio/rstudio/pull/6132#pullrequestreview-352528721", "createdAt": "2020-02-03T20:08:36Z", "commit": {"oid": "7e82a9ab9bff81e6ec591e2c4f861f22aac76c34"}, "state": "APPROVED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QyMDowODozNlrOFk-V8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QyMDoxMjowMlrOFk-cJg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDMxNDQ4Mw==", "bodyText": "Wait, I think I may have misunderstood -- I was looking at the code in \n  \n    \n      rstudio/src/cpp/core/include/core/system/FileMode.hpp\n    \n    \n        Lines 131 to 175\n      in\n      91d3851\n    \n    \n    \n    \n\n        \n          \n           inline Error getFileMode(const FilePath& filePath, FileMode* pFileMode) \n        \n\n        \n          \n           { \n        \n\n        \n          \n              struct stat st; \n        \n\n        \n          \n              if (::stat(filePath.getAbsolutePath().c_str(), &st) == -1) \n        \n\n        \n          \n              { \n        \n\n        \n          \n                 Error error = systemError(errno, ERROR_LOCATION); \n        \n\n        \n          \n                 error.addProperty(\"path\", filePath); \n        \n\n        \n          \n                 return error; \n        \n\n        \n          \n              } \n        \n\n        \n          \n            \n        \n\n        \n          \n              // extract the bits \n        \n\n        \n          \n              std::string mode(9, '-'); \n        \n\n        \n          \n              if ( st.st_mode & S_IRUSR ) mode[0] = 'r'; \n        \n\n        \n          \n              if ( st.st_mode & S_IWUSR ) mode[1] = 'w'; \n        \n\n        \n          \n              if ( st.st_mode & S_IXUSR ) mode[2] = 'x'; \n        \n\n        \n          \n            \n        \n\n        \n          \n              if ( st.st_mode & S_IRGRP ) mode[3] = 'r'; \n        \n\n        \n          \n              if ( st.st_mode & S_IWGRP ) mode[4] = 'w'; \n        \n\n        \n          \n              if ( st.st_mode & S_IXGRP ) mode[5] = 'x'; \n        \n\n        \n          \n            \n        \n\n        \n          \n              if ( st.st_mode & S_IROTH ) mode[6] = 'r'; \n        \n\n        \n          \n              if ( st.st_mode & S_IWOTH ) mode[7] = 'w'; \n        \n\n        \n          \n              if ( st.st_mode & S_IXOTH ) mode[8] = 'x'; \n        \n\n        \n          \n            \n        \n\n        \n          \n              if (mode ==      \"rw-------\") \n        \n\n        \n          \n                 *pFileMode = UserReadWriteMode; \n        \n\n        \n          \n              else if (mode == \"rwx------\") \n        \n\n        \n          \n                 *pFileMode = UserReadWriteExecuteMode; \n        \n\n        \n          \n              else if (mode == \"rw-r-----\") \n        \n\n        \n          \n                 *pFileMode = UserReadWriteGroupReadMode; \n        \n\n        \n          \n              else if (mode == \"rw-r--r--\") \n        \n\n        \n          \n                 *pFileMode = UserReadWriteGroupEveryoneReadMode; \n        \n\n        \n          \n              else if (mode == \"r--r--r--\") \n        \n\n        \n          \n                 *pFileMode = EveryoneReadMode; \n        \n\n        \n          \n              else if (mode == \"rw-rw-rw-\") \n        \n\n        \n          \n                 *pFileMode = EveryoneReadWriteMode; \n        \n\n        \n          \n              else if (mode == \"rwxrwxrwx\") \n        \n\n        \n          \n                 *pFileMode = EveryoneReadWriteExecuteMode; \n        \n\n        \n          \n              else if (mode == \"rwxr-xr-x\") \n        \n\n        \n          \n                 *pFileMode = UserReadWriteExecuteGroupEveryoneReadExecuteMode; \n        \n\n        \n          \n              else \n        \n\n        \n          \n                  return systemError(boost::system::errc::not_supported, ERROR_LOCATION); \n        \n\n        \n          \n            \n        \n\n        \n          \n              return Success(); \n        \n\n        \n          \n           } \n        \n    \n  \n\n and thought that denoted the \"supported\" file modes, but that appears to be something separate. Sorry!", "url": "https://github.com/rstudio/rstudio/pull/6132#discussion_r374314483", "createdAt": "2020-02-03T20:08:36Z", "author": {"login": "kevinushey"}, "path": "src/cpp/shared_core/include/shared_core/FilePath.hpp", "diffHunk": "@@ -231,6 +260,53 @@ class FilePath\n     */\n    static Error uniqueFilePath(const std::string& in_basePath, const std::string& in_extension, FilePath& out_filePath);\n \n+#ifndef _WIN32\n+   /**\n+    * @brief Changes the file mode to the specified file mode.\n+    *\n+    * @param in_fileModeStr     The posix file mode string. e.g. rwxr-xr-x.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDI3MDIyMQ=="}, "originalCommit": {"oid": "7e82a9ab9bff81e6ec591e2c4f861f22aac76c34"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDMxNTAwNg==", "bodyText": "Looks like we exit on failure to enable core dumps in most places it's used so I think the current behavior is probably intentional. (A warning might be appropriate though.)", "url": "https://github.com/rstudio/rstudio/pull/6132#discussion_r374315006", "createdAt": "2020-02-03T20:09:42Z", "author": {"login": "kevinushey"}, "path": "src/cpp/shared_core/system/PosixSystem.cpp", "diffHunk": "@@ -0,0 +1,134 @@\n+/*\n+ * PosixSystem.cpp\n+ *\n+ * Copyright (C) 2009-19 by RStudio, Inc.\n+ *\n+ * Unless you have received this program directly from RStudio pursuant to the terms of a commercial license agreement\n+ * with RStudio, then this program is licensed to you under the following terms:\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated\n+ * documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the\n+ * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n+ * permit persons to whom the Software is furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the\n+ * Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE\n+ * WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\n+ * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n+ * OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n+ *\n+ */\n+\n+#include <shared_core/system/PosixSystem.hpp>\n+\n+#include <csignal>\n+#include <grp.h>\n+#include <memory.h>\n+#include <pwd.h>\n+#include <sys/prctl.h>\n+\n+#include <shared_core/Error.hpp>\n+#include <shared_core/system/User.hpp>\n+\n+namespace rstudio {\n+namespace core {\n+namespace system {\n+namespace posix {\n+\n+Error enableCoreDumps()\n+{\n+#ifndef __APPLE__", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDI3NDU0Mg=="}, "originalCommit": {"oid": "7e82a9ab9bff81e6ec591e2c4f861f22aac76c34"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDMxNTg0Ng==", "bodyText": "It looks like some platforms may have the strsignal() function for this purpose: https://linux.die.net/man/3/strsignal", "url": "https://github.com/rstudio/rstudio/pull/6132#discussion_r374315846", "createdAt": "2020-02-03T20:11:33Z", "author": {"login": "kevinushey"}, "path": "src/cpp/shared_core/system/PosixSystem.cpp", "diffHunk": "@@ -0,0 +1,134 @@\n+/*\n+ * PosixSystem.cpp\n+ *\n+ * Copyright (C) 2009-19 by RStudio, Inc.\n+ *\n+ * Unless you have received this program directly from RStudio pursuant to the terms of a commercial license agreement\n+ * with RStudio, then this program is licensed to you under the following terms:\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated\n+ * documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the\n+ * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n+ * permit persons to whom the Software is furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the\n+ * Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE\n+ * WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\n+ * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n+ * OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n+ *\n+ */\n+\n+#include <shared_core/system/PosixSystem.hpp>\n+\n+#include <csignal>\n+#include <grp.h>\n+#include <memory.h>\n+#include <pwd.h>\n+#include <sys/prctl.h>\n+\n+#include <shared_core/Error.hpp>\n+#include <shared_core/system/User.hpp>\n+\n+namespace rstudio {\n+namespace core {\n+namespace system {\n+namespace posix {\n+\n+Error enableCoreDumps()\n+{\n+#ifndef __APPLE__\n+   int res = ::prctl(PR_SET_DUMPABLE, 1);\n+   if (res == -1)\n+      return systemError(errno, ERROR_LOCATION);\n+#endif\n+\n+   return Success();\n+}\n+\n+Error ignoreSignal(int in_signal)\n+{\n+   struct sigaction sa;\n+   ::memset(&sa, 0, sizeof(sa));\n+\n+   sa.sa_handler = SIG_IGN;\n+   int result = ::sigaction(in_signal, &sa, nullptr);\n+   if (result != 0)\n+   {\n+      Error error = systemError(result, ERROR_LOCATION);\n+      error.addProperty(\"signal\", in_signal);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDI3NTA1OQ=="}, "originalCommit": {"oid": "7e82a9ab9bff81e6ec591e2c4f861f22aac76c34"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDMxNjA3MA==", "bodyText": "That makes sense. If failures here are handled as process exits then it's not worth changing anything here.", "url": "https://github.com/rstudio/rstudio/pull/6132#discussion_r374316070", "createdAt": "2020-02-03T20:12:02Z", "author": {"login": "kevinushey"}, "path": "src/cpp/shared_core/system/PosixSystem.cpp", "diffHunk": "@@ -0,0 +1,134 @@\n+/*\n+ * PosixSystem.cpp\n+ *\n+ * Copyright (C) 2009-19 by RStudio, Inc.\n+ *\n+ * Unless you have received this program directly from RStudio pursuant to the terms of a commercial license agreement\n+ * with RStudio, then this program is licensed to you under the following terms:\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated\n+ * documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the\n+ * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n+ * permit persons to whom the Software is furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the\n+ * Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE\n+ * WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\n+ * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n+ * OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n+ *\n+ */\n+\n+#include <shared_core/system/PosixSystem.hpp>\n+\n+#include <csignal>\n+#include <grp.h>\n+#include <memory.h>\n+#include <pwd.h>\n+#include <sys/prctl.h>\n+\n+#include <shared_core/Error.hpp>\n+#include <shared_core/system/User.hpp>\n+\n+namespace rstudio {\n+namespace core {\n+namespace system {\n+namespace posix {\n+\n+Error enableCoreDumps()\n+{\n+#ifndef __APPLE__\n+   int res = ::prctl(PR_SET_DUMPABLE, 1);\n+   if (res == -1)\n+      return systemError(errno, ERROR_LOCATION);\n+#endif\n+\n+   return Success();\n+}\n+\n+Error ignoreSignal(int in_signal)\n+{\n+   struct sigaction sa;\n+   ::memset(&sa, 0, sizeof(sa));\n+\n+   sa.sa_handler = SIG_IGN;\n+   int result = ::sigaction(in_signal, &sa, nullptr);\n+   if (result != 0)\n+   {\n+      Error error = systemError(result, ERROR_LOCATION);\n+      error.addProperty(\"signal\", in_signal);\n+      return error;\n+   }\n+\n+   return Success();\n+}\n+\n+bool realUserIsRoot()\n+{\n+   return ::getuid() == 0;\n+}\n+\n+Error restoreRoot()\n+{\n+   // Reset error state.\n+   errno = 0;\n+\n+   // Change the effective user to root.\n+   if (::seteuid(0) < 0)\n+      return systemError(errno, ERROR_LOCATION);\n+   // Verify\n+   if (::geteuid() != 0)\n+      return systemError(EACCES, ERROR_LOCATION);\n+\n+   // Get user info to use in group calls\n+   struct passwd* pPrivPasswd = ::getpwuid(0);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDI3ODI4NQ=="}, "originalCommit": {"oid": "7e82a9ab9bff81e6ec591e2c4f861f22aac76c34"}, "originalPosition": 86}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5da47f0dc3a4a234cceb550a5c6f062660f75f8b", "author": {"user": {"login": "MariaSemple", "name": "Maria Semple"}}, "url": "https://github.com/rstudio/rstudio/commit/5da47f0dc3a4a234cceb550a5c6f062660f75f8b", "committedDate": "2020-02-03T21:16:09Z", "message": "exit failure if root cannot be restored"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "639307aa3df5ff882322ba4465235a6b8d861f71", "author": {"user": {"login": "MariaSemple", "name": "Maria Semple"}}, "url": "https://github.com/rstudio/rstudio/commit/639307aa3df5ff882322ba4465235a6b8d861f71", "committedDate": "2020-02-03T23:11:37Z", "message": "Merge branch 'v1.4' into feature/file-path-change-owner-mode"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d3d12545b51fd31f715811a48da47bd90ef98652", "author": {"user": {"login": "MariaSemple", "name": "Maria Semple"}}, "url": "https://github.com/rstudio/rstudio/commit/d3d12545b51fd31f715811a48da47bd90ef98652", "committedDate": "2020-02-03T23:14:57Z", "message": "add missing return"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb53daafa28ed0930021e85a150a7065cb7bbf76", "author": {"user": {"login": "MariaSemple", "name": "Maria Semple"}}, "url": "https://github.com/rstudio/rstudio/commit/cb53daafa28ed0930021e85a150a7065cb7bbf76", "committedDate": "2020-02-04T22:43:46Z", "message": "Merge branch 'v1.4' into feature/file-path-change-owner-mode"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9a178df5a598ade676e236a5890182b98b6878b9", "author": {"user": {"login": "MariaSemple", "name": "Maria Semple"}}, "url": "https://github.com/rstudio/rstudio/commit/9a178df5a598ade676e236a5890182b98b6878b9", "committedDate": "2020-02-06T17:43:01Z", "message": "ordering cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "685855f25f3e8e3e226b56f1875c561e4afddb03", "author": {"user": {"login": "MariaSemple", "name": "Maria Semple"}}, "url": "https://github.com/rstudio/rstudio/commit/685855f25f3e8e3e226b56f1875c561e4afddb03", "committedDate": "2020-02-06T17:48:14Z", "message": "fix a compiler directive"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "693a33f3161a16fcfd7dc50e2ea620cb25a3d21a", "author": {"user": {"login": "MariaSemple", "name": "Maria Semple"}}, "url": "https://github.com/rstudio/rstudio/commit/693a33f3161a16fcfd7dc50e2ea620cb25a3d21a", "committedDate": "2020-02-06T18:33:07Z", "message": "move the rest of the FileMode functions to FilePath"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "309a4da60553065d6122500554baae25ddca5959", "author": {"user": {"login": "MariaSemple", "name": "Maria Semple"}}, "url": "https://github.com/rstudio/rstudio/commit/309a4da60553065d6122500554baae25ddca5959", "committedDate": "2020-02-06T21:37:31Z", "message": "add missing files from previous commit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e5a96edad3d2f609c6f99e53a5b44973b467c9a", "author": {"user": {"login": "MariaSemple", "name": "Maria Semple"}}, "url": "https://github.com/rstudio/rstudio/commit/7e5a96edad3d2f609c6f99e53a5b44973b467c9a", "committedDate": "2020-02-06T21:38:41Z", "message": "Merge branch 'v1.4' into feature/file-path-change-owner-mode"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "670d251691a2ce5fd2bfa531b0ea0ef45192cdc9", "author": {"user": {"login": "MariaSemple", "name": "Maria Semple"}}, "url": "https://github.com/rstudio/rstudio/commit/670d251691a2ce5fd2bfa531b0ea0ef45192cdc9", "committedDate": "2020-02-06T21:43:18Z", "message": "fix copyrights in shared_core"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4f0533476ed90254cba9fd4c3884665cf5264343", "author": {"user": {"login": "MariaSemple", "name": "Maria Semple"}}, "url": "https://github.com/rstudio/rstudio/commit/4f0533476ed90254cba9fd4c3884665cf5264343", "committedDate": "2020-02-07T06:41:24Z", "message": "add missing const declaration"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1NDc2MjE1", "url": "https://github.com/rstudio/rstudio/pull/6132#pullrequestreview-355476215", "createdAt": "2020-02-07T22:31:56Z", "commit": {"oid": "4f0533476ed90254cba9fd4c3884665cf5264343"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QyMjozMTo1N1rOFnMMiw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QyMjozMjoyNVrOFnMNFQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjYzODYwMw==", "bodyText": "Feels like this should be metadata attached to the error rather than logged separately?", "url": "https://github.com/rstudio/rstudio/pull/6132#discussion_r376638603", "createdAt": "2020-02-07T22:31:57Z", "author": {"login": "jmcphers"}, "path": "src/cpp/server/auth/ServerAuthHandler.cpp", "diffHunk": "@@ -454,9 +453,17 @@ Error initialize()\n       return error;\n    }\n \n+   core::system::User serverUser;\n+   error = core::system::User::getUserFromIdentifier(options().serverUser(), serverUser);\n+   if (error)\n+   {\n+      LOG_ERROR_MESSAGE(\"Could not get server user details\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4f0533476ed90254cba9fd4c3884665cf5264343"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjYzODc0MQ==", "bodyText": "(i.e.  we typically only LOG_ERROR_MESSAGE at the point when we abort an operation, not as part of bubbling an error through)", "url": "https://github.com/rstudio/rstudio/pull/6132#discussion_r376638741", "createdAt": "2020-02-07T22:32:25Z", "author": {"login": "jmcphers"}, "path": "src/cpp/server/auth/ServerAuthHandler.cpp", "diffHunk": "@@ -454,9 +453,17 @@ Error initialize()\n       return error;\n    }\n \n+   core::system::User serverUser;\n+   error = core::system::User::getUserFromIdentifier(options().serverUser(), serverUser);\n+   if (error)\n+   {\n+      LOG_ERROR_MESSAGE(\"Could not get server user details\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjYzODYwMw=="}, "originalCommit": {"oid": "4f0533476ed90254cba9fd4c3884665cf5264343"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "32ff102bdbb2e0afe9b5175c614a431c2d586e51", "author": {"user": {"login": "MariaSemple", "name": "Maria Semple"}}, "url": "https://github.com/rstudio/rstudio/commit/32ff102bdbb2e0afe9b5175c614a431c2d586e51", "committedDate": "2020-02-08T18:50:34Z", "message": "change error/log behaviour re code review feedback"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 338, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}