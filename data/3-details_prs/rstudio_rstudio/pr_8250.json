{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEzMjU4MTE0", "number": 8250, "title": "update save commands on window focus", "bodyText": "Intent\nWhen focus is transferred between different source windows, the state for certain commands is not always updated. This PR ensures that save commands are enabled / disabled as appropriate when an RStudio window gains focus.\nApproach\nUse a Window focus handler to update save commands as appropriate.\nQA Notes\nTest via notes in #6475.\nCloses #6475.", "createdAt": "2020-10-30T20:09:05Z", "url": "https://github.com/rstudio/rstudio/pull/8250", "merged": true, "mergeCommit": {"oid": "9f2d870825abd8613355da306770c3a174c4b848"}, "closed": true, "closedAt": "2020-10-30T21:57:38Z", "author": {"login": "kevinushey"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdXsggGgH2gAyNTEzMjU4MTE0OjlmZTA2NGNmZjkwMjc1MDkwMjg3Y2ViMTEyN2M0YmFmMTMyNjRhN2U=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdXuEARAFqTUyMTA1ODMxMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9fe064cff90275090287ceb1127c4baf13264a7e", "author": {"user": {"login": "kevinushey", "name": "Kevin Ushey"}}, "url": "https://github.com/rstudio/rstudio/commit/9fe064cff90275090287ceb1127c4baf13264a7e", "committedDate": "2020-10-30T20:08:49Z", "message": "update save commands on window focus"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxMDAyODE4", "url": "https://github.com/rstudio/rstudio/pull/8250#pullrequestreview-521002818", "createdAt": "2020-10-30T20:12:17Z", "commit": {"oid": "9fe064cff90275090287ceb1127c4baf13264a7e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQyMDoxMjoxOFrOHrepnA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQyMDoxMjoxOFrOHrepnA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTM1Mjk4OA==", "bodyText": "For context: RStudio maintains command \"state\" both on the GWT side, and also on the Desktop side for RStudio Desktop. (This indicates whether the Save command should be enabled in e.g. the File menu.)\nI was seeing some cases where the client-side save command was marked as enabled, but the desktop-side save command was still marked as disabled. Having force here allows us to ensure that the client + desktop command states are sync'ed in the case where this happens.", "url": "https://github.com/rstudio/rstudio/pull/8250#discussion_r515352988", "createdAt": "2020-10-30T20:12:18Z", "author": {"login": "kevinushey"}, "path": "src/gwt/src/org/rstudio/core/client/command/AppCommand.java", "diffHunk": "@@ -219,7 +219,12 @@ public boolean hasCommandHandlers()\n \n    public void setEnabled(boolean enabled)\n    {\n-      if (enabled != enabled_)\n+      setEnabled(enabled, false);\n+   }\n+   \n+   public void setEnabled(boolean enabled, boolean force)\n+   {\n+      if (force || enabled != enabled_)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9fe064cff90275090287ceb1127c4baf13264a7e"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "485a5ea64ecdcda3e0996473fac7b7dcf9adc0ee", "author": {"user": {"login": "kevinushey", "name": "Kevin Ushey"}}, "url": "https://github.com/rstudio/rstudio/commit/485a5ea64ecdcda3e0996473fac7b7dcf9adc0ee", "committedDate": "2020-10-30T20:16:34Z", "message": "add comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxMDU4MzEy", "url": "https://github.com/rstudio/rstudio/pull/8250#pullrequestreview-521058312", "createdAt": "2020-10-30T21:57:30Z", "commit": {"oid": "485a5ea64ecdcda3e0996473fac7b7dcf9adc0ee"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4959, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}