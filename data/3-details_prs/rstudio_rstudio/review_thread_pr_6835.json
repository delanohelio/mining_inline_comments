{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE0OTQ2NDEy", "number": 6835, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QyMzoyOTozM1rOD6dMiA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QyMzoyOTozM1rOD6dMiA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYyNjIyMzQ0OnYy", "diffSide": "RIGHT", "path": "src/cpp/core/gwt/GwtFileHandler.cpp", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QyMzoyOTozM1rOGSTwpw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QyMzozMjo1MVrOGST08g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTg1MTMwMw==", "bodyText": "This looks like a no-op -- should we just omit the else?", "url": "https://github.com/rstudio/rstudio/pull/6835#discussion_r421851303", "createdAt": "2020-05-07T23:29:33Z", "author": {"login": "jmcphers"}, "path": "src/cpp/core/gwt/GwtFileHandler.cpp", "diffHunk": "@@ -133,11 +133,19 @@ void handleFileRequest(const FileRequestOptions& options,\n                          (request.queryParamValue(\"emulatedStack\") == \"1\");\n       vars[\"compiler_stack_mode\"] = useEmulatedStack ? \"emulated\" : \"native\";\n \n+      // polyfill for IE11 (only)\n+      std::string polyfill = \"<script type=\\\"text/javascript\\\" language=\\\"javascript\\\" src=\\\"js/core-js/minified.js\\\"></script>\\n\";\n+      if (regex_utils::match(request.userAgent(), boost::regex(\".*Trident.*\"))) {\n+         vars[\"head_tags\"] = polyfill;\n+      } else {\n+         vars[\"head_tags\"] = std::string();\n+      }\n+\n       // check for initJs\n       if (!options.initJs.empty())\n-         vars[\"head_tags\"] = \"<script>\" + options.initJs + \"</script>\";\n+         vars[\"head_tags\"] = vars[\"head_tags\"] + \"<script>\" + options.initJs + \"</script>\";\n       else\n-         vars[\"head_tags\"] = std::string();\n+         vars[\"head_tags\"] = vars[\"head_tags\"] + std::string();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "edcc052d9cc9dce566b975b9fb3c2156a5ef5f72"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTg1MjQwMg==", "bodyText": "Good catch, thanks!", "url": "https://github.com/rstudio/rstudio/pull/6835#discussion_r421852402", "createdAt": "2020-05-07T23:32:51Z", "author": {"login": "jcheng5"}, "path": "src/cpp/core/gwt/GwtFileHandler.cpp", "diffHunk": "@@ -133,11 +133,19 @@ void handleFileRequest(const FileRequestOptions& options,\n                          (request.queryParamValue(\"emulatedStack\") == \"1\");\n       vars[\"compiler_stack_mode\"] = useEmulatedStack ? \"emulated\" : \"native\";\n \n+      // polyfill for IE11 (only)\n+      std::string polyfill = \"<script type=\\\"text/javascript\\\" language=\\\"javascript\\\" src=\\\"js/core-js/minified.js\\\"></script>\\n\";\n+      if (regex_utils::match(request.userAgent(), boost::regex(\".*Trident.*\"))) {\n+         vars[\"head_tags\"] = polyfill;\n+      } else {\n+         vars[\"head_tags\"] = std::string();\n+      }\n+\n       // check for initJs\n       if (!options.initJs.empty())\n-         vars[\"head_tags\"] = \"<script>\" + options.initJs + \"</script>\";\n+         vars[\"head_tags\"] = vars[\"head_tags\"] + \"<script>\" + options.initJs + \"</script>\";\n       else\n-         vars[\"head_tags\"] = std::string();\n+         vars[\"head_tags\"] = vars[\"head_tags\"] + std::string();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTg1MTMwMw=="}, "originalCommit": {"oid": "edcc052d9cc9dce566b975b9fb3c2156a5ef5f72"}, "originalPosition": 18}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3946, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}