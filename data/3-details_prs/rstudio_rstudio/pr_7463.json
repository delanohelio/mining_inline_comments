{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU3NDU5Nzcw", "number": 7463, "title": "Add command focusPreviousPane", "bodyText": "Implements Shift + F6 to navigate focus to the previous pane. Previously we were using \"Shift + F6\" for finishDebug. I changed this to Shift + F7 as using F6 to navigate between panes is typically standard.\nThis PR also fixes a few issues with source columns. Columns were not being properly synced between sessions and stored in a different order on refresh than they were originally added.", "createdAt": "2020-07-27T23:48:26Z", "url": "https://github.com/rstudio/rstudio/pull/7463", "merged": true, "mergeCommit": {"oid": "b2e9b4e0292e376927aad18e4c98cabff40c7b30"}, "closed": true, "closedAt": "2020-07-28T20:32:29Z", "author": {"login": "melissa-barca"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc5IvSBgH2gAyNDU3NDU5NzcwOmFjMDQ0MTg3NjNkYzYyMzQ0MDk1ZTMxMTYxMjg3ZjdkZGNhYWU4ZDU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc5PB6lAH2gAyNDU3NDU5NzcwOjhjNGFkMjYzOTVhZjVjMWZhMTAxNDkwNDE1NDgzMGE2Yjc0NDA0M2I=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ac04418763dc62344095e31161287f7ddcaae8d5", "author": {"user": {"login": "melissa-barca", "name": "Melissa Barca"}}, "url": "https://github.com/rstudio/rstudio/commit/ac04418763dc62344095e31161287f7ddcaae8d5", "committedDate": "2020-07-27T21:30:39Z", "message": "do not attempt to display source columns before they are ready. Make sure columns are always added\nto the left of the view and end of the manager's list."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7a2b7f270d1fe5d665e566d16673b4aea0a0e440", "author": {"user": {"login": "melissa-barca", "name": "Melissa Barca"}}, "url": "https://github.com/rstudio/rstudio/commit/7a2b7f270d1fe5d665e566d16673b4aea0a0e440", "committedDate": "2020-07-27T23:41:42Z", "message": "implement Shift+F6 to navigate to previous pane"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bcb54f55358f392195bcf9096be8aff5b18fdd20", "author": {"user": {"login": "melissa-barca", "name": "Melissa Barca"}}, "url": "https://github.com/rstudio/rstudio/commit/bcb54f55358f392195bcf9096be8aff5b18fdd20", "committedDate": "2020-07-27T23:42:58Z", "message": "change debugFinish command to Shift+F7"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2MjI2Nzg0", "url": "https://github.com/rstudio/rstudio/pull/7463#pullrequestreview-456226784", "createdAt": "2020-07-28T00:40:34Z", "commit": {"oid": "bcb54f55358f392195bcf9096be8aff5b18fdd20"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwMDo0MDozNFrOG34eVQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwMDo0Njo1M1rOG34lHg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTI1MDEzMw==", "bodyText": "Nit: Extra space after !=.", "url": "https://github.com/rstudio/rstudio/pull/7463#discussion_r461250133", "createdAt": "2020-07-28T00:40:34Z", "author": {"login": "gtritchie"}, "path": "src/gwt/src/org/rstudio/studio/client/workbench/ui/PaneManager.java", "diffHunk": "@@ -290,8 +290,8 @@ public PaneManager(Provider<MainSplitPanel> pSplitPanel,\n       //\u00a0get the widgets for the extra source columns to be displayed\n       ArrayList<Widget> sourceColumns = new ArrayList<>();\n       additionalSourceCount_ = userPrefs_.panes().getValue().getAdditionalSourceColumns();\n-      if (additionalSourceCount_ !=  sourceColumnManager_.getSize())\n-         syncAdditionalColumnCount(additionalSourceCount_);\n+      if (additionalSourceCount_ !=  sourceColumnManager_.getSize() - 1)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bcb54f55358f392195bcf9096be8aff5b18fdd20"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTI1MDk4OA==", "bodyText": "Nit: although it's a constant now, if we ever make max column count configurable then maybe want this to be a >= comparison just to be safe in case where max changes to be smaller than current number of columns?", "url": "https://github.com/rstudio/rstudio/pull/7463#discussion_r461250988", "createdAt": "2020-07-28T00:43:41Z", "author": {"login": "gtritchie"}, "path": "src/gwt/src/org/rstudio/studio/client/workbench/ui/PaneManager.java", "diffHunk": "@@ -582,55 +583,103 @@ public void onFocusCenterSeparator()\n    @Handler\n    public void onFocusNextPane()\n    {\n-      // get the name of the currently focused pane\n       LogicalWindow currentFocus = getActiveLogicalWindow();\n-      String nextFocusName = null;\n-      if (currentFocus != null)\n+      if (currentFocus == null)\n+         return;\n+\n+      focusWindow(getAdjacentWindow(currentFocus, false /* before */));\n+   }\n+\n+   @Handler\n+   public void onFocusPreviousPane()\n+   {\n+      LogicalWindow currentFocus = getActiveLogicalWindow();\n+      if (currentFocus == null)\n+         return;\n+      focusWindow(getAdjacentWindow(currentFocus, true /* before */));\n+   }\n+\n+   @Handler\n+    public void onNewSourceColumn()\n+    {\n+       if (!userPrefs_.allowSourceColumns().getValue())\n+          pGlobalDisplay_.get().showMessage(GlobalDisplay.MSG_INFO, \"Cannot Add Column\",\n+             \"Allow Source Columns preference is disabled.\");\n+       else if (additionalSourceCount_ == MAX_COLUMN_COUNT)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bcb54f55358f392195bcf9096be8aff5b18fdd20"}, "originalPosition": 59}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTI1MTg3MA==", "bodyText": "Nit: typo \"lsit\"", "url": "https://github.com/rstudio/rstudio/pull/7463#discussion_r461251870", "createdAt": "2020-07-28T00:46:53Z", "author": {"login": "gtritchie"}, "path": "src/gwt/src/org/rstudio/studio/client/workbench/views/source/SourceColumnManager.java", "diffHunk": "@@ -1440,20 +1452,14 @@ public void consolidateColumns(int num)\n       SourceColumn mainColumn = getByName(MAIN_SOURCE_NAME);\n       if (num < columnList_.size())\n       {\n-         CPSEditingTargetCommand moveCommand = new CPSEditingTargetCommand()\n-         {\n-            @Override\n-            public void execute(EditingTarget editingTarget, Command continuation)\n-            {\n-            }\n-         };\n          ArrayList<SourceColumn> moveColumns = new ArrayList<>(columnList_);\n          moveColumns.remove(mainColumn);\n+\n+         // remove columns from the end of the lsit first", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bcb54f55358f392195bcf9096be8aff5b18fdd20"}, "originalPosition": 73}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c4ad26395af5c1fa1014904154830a6b744043b", "author": {"user": {"login": "melissa-barca", "name": "Melissa Barca"}}, "url": "https://github.com/rstudio/rstudio/commit/8c4ad26395af5c1fa1014904154830a6b744043b", "committedDate": "2020-07-28T04:50:26Z", "message": "clean up typos"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 27, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}