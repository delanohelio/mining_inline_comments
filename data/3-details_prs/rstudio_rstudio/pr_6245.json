{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc1OTI4ODQx", "number": 6245, "title": "Replace more instances of String.CharAt with StringUtil.CharAt", "bodyText": "JavaScript exception related to charAt; don't know exact repro, taking opportunity to fix that call stack and defensively change a few other instances of charAt to use safer StringUtil.charAt.\nFor more context:\n\nfix exceptions caused by gwt 2.8.2 checking charAt bounds #4451\nmore fixes for new behavior of String.charAt in GWT 2.8.2 #4489\nfix exception when typing Shift+Tab on whitespace-only editor line #5036\njavascript exceptions being thrown by charAt in cpp completion code #5052\n\nCallstack:\n15 Feb 2020 00:03:26 [rserver] ERROR CLIENT EXCEPTION (rsession-gary): Index: -1, Size: 226;\nrstudio-0.js@10#639::Throwable.createError\nrstudio-0.js@48#703::Throwable.initializeBackingError\nrstudio-0.js@8#535::Throwable.Throwable\nrstudio-0.js@18#808::Exception.Exception\nrstudio-0.js@18#862::RuntimeException.RuntimeException\nrstudio-0.js@25#3620::IndexOutOfBoundsException.IndexOutOfBoundsException\nrstudio-0.js@34#5360::StringIndexOutOfBoundsException\nrstudio-0.js@21#5794::checkCriticalStringElementIndex\nrstudio-0.js@5#6025::checkStringElementIndex\nrstudio-0.js@3#4059::charAt\nrstudio-0.js@10#4633::charAt_I_C__devirtual$\nrstudio-0.js@39#356896::CompletionManagerBase.canAutoPopup\nrstudio-0.js@14#357339::CompletionManagerBase.previewKeyPress\nrstudio-0.js@61#360873::MarkdownCompletionManager.previewKeyPress\nrstudio-0.js@23#359555::DelegatingCompletionManager.previewKeyPress\nrstudio-0.js@43#464919::AceKeyboardPreviewer$1.previewKeyPress\nrstudio-0.js@24#464884::AceKeyboardPreviewer.onTextInput\nrstudio-0.js@21#464852::<anonymous>\nrstudio-0.js@28#16334::apply\nrstudio-0.js@16#16393::entry0\nrstudio-0.js@14#16372::handleKeyboard\nhttp://localhost:9876/rstudio/7D3FB0FCC17B7BB289C4D681EC4DE752.cache.js@43#42254::callKeyboardHandlers\nhttp://localhost:9876/rstudio/7D3FB0FCC17B7BB289C4D681EC4DE752.cache.js@14#42290::onTextInput\nhttp://localhost:9876/rstudio/7D3FB0FCC17B7BB289C4D681EC4DE752.cache.js@36#49554::onTextInput\nhttp://localhost:9876/rstudio/7D3FB0FCC17B7BB289C4D681EC4DE752.cache.js@22#40398::sendText\nhttp://localhost:9876/rstudio/7D3FB0FCC17B7BB289C4D681EC4DE752.cache.js@24#40419::onInput\nClient-ID: 3049a086-a908-4534-a87e-4dcaca02d7f7\nUser-Agent: Mozilla/5.0 (Macintosh  Intel Mac OS X 10_15_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.106 Safari/537.36", "createdAt": "2020-02-17T04:05:37Z", "url": "https://github.com/rstudio/rstudio/pull/6245", "merged": true, "mergeCommit": {"oid": "b75cc6d710c3437e0a56a030b6a3fa958564a783"}, "closed": true, "closedAt": "2020-02-17T19:01:25Z", "author": {"login": "gtritchie"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcFFPJBAH2gAyMzc1OTI4ODQxOjc1NTZiZmQ3YjE2YTgxYzFhZDk5NTdhNzQxMmQ2MjAyMTE4OTRiMWI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcFHdfXgH2gAyMzc1OTI4ODQxOjlkMmIwZDg2OGZkY2ZmNTY3YzlhZThkOTc2OTMxMmQ3NTM4ODY1OTI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7556bfd7b16a81c1ad9957a7412d620211894b1b", "author": {"user": {"login": "gtritchie", "name": "Gary"}}, "url": "https://github.com/rstudio/rstudio/commit/7556bfd7b16a81c1ad9957a7412d620211894b1b", "committedDate": "2020-02-17T04:01:46Z", "message": "Replace more instances of String.CharAt with StringUtil.CharAt\n\nJavaScript exception related to charAt; don't know exact repro, taking opportunity to fix that call stack and defensively change a few other instances of charAt to use safer StringUtil.charAt.\n\nFor more context:\n\n* fix exceptions caused by gwt 2.8.2 checking charAt bounds #4451\n* more fixes for new behavior of String.charAt in GWT 2.8.2 #4489\n* fix exception when typing Shift+Tab on whitespace-only editor line #5036\n* javascript exceptions being thrown by charAt in cpp completion code #5052\n\nCallstack:\n```\n15 Feb 2020 00:03:26 [rserver] ERROR CLIENT EXCEPTION (rsession-gary): Index: -1, Size: 226;\nrstudio-0.js@10#639::Throwable.createError\nrstudio-0.js@48#703::Throwable.initializeBackingError\nrstudio-0.js@8#535::Throwable.Throwable\nrstudio-0.js@18#808::Exception.Exception\nrstudio-0.js@18#862::RuntimeException.RuntimeException\nrstudio-0.js@25#3620::IndexOutOfBoundsException.IndexOutOfBoundsException\nrstudio-0.js@34#5360::StringIndexOutOfBoundsException\nrstudio-0.js@21#5794::checkCriticalStringElementIndex\nrstudio-0.js@5#6025::checkStringElementIndex\nrstudio-0.js@3#4059::charAt\nrstudio-0.js@10#4633::charAt_I_C__devirtual$\nrstudio-0.js@39#356896::CompletionManagerBase.canAutoPopup\nrstudio-0.js@14#357339::CompletionManagerBase.previewKeyPress\nrstudio-0.js@61#360873::MarkdownCompletionManager.previewKeyPress\nrstudio-0.js@23#359555::DelegatingCompletionManager.previewKeyPress\nrstudio-0.js@43#464919::AceKeyboardPreviewer$1.previewKeyPress\nrstudio-0.js@24#464884::AceKeyboardPreviewer.onTextInput\nrstudio-0.js@21#464852::<anonymous>\nrstudio-0.js@28#16334::apply\nrstudio-0.js@16#16393::entry0\nrstudio-0.js@14#16372::handleKeyboard\nhttp://localhost:9876/rstudio/7D3FB0FCC17B7BB289C4D681EC4DE752.cache.js@43#42254::callKeyboardHandlers\nhttp://localhost:9876/rstudio/7D3FB0FCC17B7BB289C4D681EC4DE752.cache.js@14#42290::onTextInput\nhttp://localhost:9876/rstudio/7D3FB0FCC17B7BB289C4D681EC4DE752.cache.js@36#49554::onTextInput\nhttp://localhost:9876/rstudio/7D3FB0FCC17B7BB289C4D681EC4DE752.cache.js@22#40398::sendText\nhttp://localhost:9876/rstudio/7D3FB0FCC17B7BB289C4D681EC4DE752.cache.js@24#40419::onInput\nClient-ID: 3049a086-a908-4534-a87e-4dcaca02d7f7\nUser-Agent: Mozilla/5.0 (Macintosh  Intel Mac OS X 10_15_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.106 Safari/537.36\n```"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5NDk2NTU5", "url": "https://github.com/rstudio/rstudio/pull/6245#pullrequestreview-359496559", "createdAt": "2020-02-17T05:34:04Z", "commit": {"oid": "7556bfd7b16a81c1ad9957a7412d620211894b1b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QwNTozNDowNVrOFqY4jw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QwNTozNDowNVrOFqY4jw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTk5MjIwNw==", "bodyText": "nit: previously this function always returned a string; now it's returning null? Might be safer to just change the usages of .charAt() here.", "url": "https://github.com/rstudio/rstudio/pull/6245#discussion_r379992207", "createdAt": "2020-02-17T05:34:05Z", "author": {"login": "kevinushey"}, "path": "src/gwt/src/org/rstudio/studio/client/workbench/views/vcs/git/GitStatusRenderer.java", "diffHunk": "@@ -78,6 +78,9 @@ public SafeHtml render(String str)\n \n    private String descForStatus(String str)\n    {\n+      if (str.length() < 2)\n+         return null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7556bfd7b16a81c1ad9957a7412d620211894b1b"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9d2b0d868fdcff567c9ae8d9769312d753886592", "author": {"user": {"login": "gtritchie", "name": "Gary"}}, "url": "https://github.com/rstudio/rstudio/commit/9d2b0d868fdcff567c9ae8d9769312d753886592", "committedDate": "2020-02-17T06:37:15Z", "message": "return empty string instead of null"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 385, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}