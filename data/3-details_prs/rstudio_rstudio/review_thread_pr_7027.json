{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI2ODE3MzI4", "number": 7027, "reviewThreads": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxODo0MjowNlrOECRtCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQyMDoyOToxNFrOEFr4Bg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwODIyNjY2OnYy", "diffSide": "RIGHT", "path": "src/cpp/session/include/session/prefs/UserPrefValues.hpp", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxODo0MjowNlrOGeovTA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNzo1Mjo0NVrOGfRP2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDc3NzkzMg==", "bodyText": "spelling: \"parantheses\", but correct in user-prefs-schema.json, so just need to rerun generate-prefs.R", "url": "https://github.com/rstudio/rstudio/pull/7027#discussion_r434777932", "createdAt": "2020-06-03T18:42:06Z", "author": {"login": "gtritchie"}, "path": "src/cpp/session/include/session/prefs/UserPrefValues.hpp", "diffHunk": "@@ -773,6 +774,12 @@ class UserPrefValues: public Preferences\n    bool highlightRFunctionCalls();\n    core::Error setHighlightRFunctionCalls(bool val);\n \n+   /**\n+    * Whether to highlight parantheses (and other bracketed characters) in various colors", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6a27746f7145e833a214a5ecb88ebfe906073b7d"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTQ0MTYyNg==", "bodyText": "\ud83d\udc4d", "url": "https://github.com/rstudio/rstudio/pull/7027#discussion_r435441626", "createdAt": "2020-06-04T17:52:45Z", "author": {"login": "adamconroy"}, "path": "src/cpp/session/include/session/prefs/UserPrefValues.hpp", "diffHunk": "@@ -773,6 +774,12 @@ class UserPrefValues: public Preferences\n    bool highlightRFunctionCalls();\n    core::Error setHighlightRFunctionCalls(bool val);\n \n+   /**\n+    * Whether to highlight parantheses (and other bracketed characters) in various colors", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDc3NzkzMg=="}, "originalCommit": {"oid": "6a27746f7145e833a214a5ecb88ebfe906073b7d"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwODIyOTI0OnYy", "diffSide": "RIGHT", "path": "src/cpp/session/prefs/UserPrefValues.cpp", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxODo0Mjo1NlrOGeoxFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxODo0Mjo1NlrOGeoxFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDc3ODM5MQ==", "bodyText": "Same as earlier comment about \"parantheses\"", "url": "https://github.com/rstudio/rstudio/pull/7027#discussion_r434778391", "createdAt": "2020-06-03T18:42:56Z", "author": {"login": "gtritchie"}, "path": "src/cpp/session/prefs/UserPrefValues.cpp", "diffHunk": "@@ -933,6 +933,19 @@ core::Error UserPrefValues::setHighlightRFunctionCalls(bool val)\n    return writePref(\"highlight_r_function_calls\", val);\n }\n \n+/**\n+ * Whether to highlight parantheses (and other bracketed characters) in various colors", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6a27746f7145e833a214a5ecb88ebfe906073b7d"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwODI1MTY2OnYy", "diffSide": "LEFT", "path": "src/gwt/acesupport/acemode/c_cpp_highlight_rules.js", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxODo0OTo1N1rOGeo_2g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNzo1NTo0MFrOGfRWqg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDc4MjE3MA==", "bodyText": "This matches [, (, { via the RainbowParenHighlightRules and then adds in < (and equivalent closing symbols)? Just checking my understanding.", "url": "https://github.com/rstudio/rstudio/pull/7027#discussion_r434782170", "createdAt": "2020-06-03T18:49:57Z", "author": {"login": "gtritchie"}, "path": "src/gwt/acesupport/acemode/c_cpp_highlight_rules.js", "diffHunk": "@@ -181,24 +182,16 @@ var c_cppHighlightRules = function() {\n             token : \"keyword.punctuation.operator\",\n             merge : false,\n             regex : \"\\\\?|\\\\:|\\\\,|\\\\;|\\\\.|\\\\\\\\\"\n-         }, {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6a27746f7145e833a214a5ecb88ebfe906073b7d"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTQ0MzM3MA==", "bodyText": "Yeah, the rainbow rules don't work with <> and if you see the removed regex it apples to all of the characters so separated it as <> doesn't work the same in non-CPP languages. We could add an interface for custom regexes but I think not coloring <> differently in CPP looks better anyway as it's not something that you nest.", "url": "https://github.com/rstudio/rstudio/pull/7027#discussion_r435443370", "createdAt": "2020-06-04T17:55:40Z", "author": {"login": "adamconroy"}, "path": "src/gwt/acesupport/acemode/c_cpp_highlight_rules.js", "diffHunk": "@@ -181,24 +182,16 @@ var c_cppHighlightRules = function() {\n             token : \"keyword.punctuation.operator\",\n             merge : false,\n             regex : \"\\\\?|\\\\:|\\\\,|\\\\;|\\\\.|\\\\\\\\\"\n-         }, {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDc4MjE3MA=="}, "originalCommit": {"oid": "6a27746f7145e833a214a5ecb88ebfe906073b7d"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwODI3NDQ3OnYy", "diffSide": "RIGHT", "path": "src/gwt/acesupport/acemode/c_cpp.js", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxODo1Njo1MVrOGepOFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNzo1ODoyN1rOGfRdBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDc4NTgxMw==", "bodyText": "Curious, why is the added checking now required?", "url": "https://github.com/rstudio/rstudio/pull/7027#discussion_r434785813", "createdAt": "2020-06-03T18:56:51Z", "author": {"login": "gtritchie"}, "path": "src/gwt/acesupport/acemode/c_cpp.js", "diffHunk": "@@ -157,7 +157,13 @@ oop.inherits(Mode, TextMode);\n \n    this.inRLanguageMode = function(state)\n    {\n-      return state.match(/^r-/);\n+     if (!state)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6a27746f7145e833a214a5ecb88ebfe906073b7d"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTQ0NDk5OQ==", "bodyText": "The type of state is variable. In fact it's actually normally an array in custom onMatch code (see: yaml_highlight_rules.js). Our code here was making an assumption about the type that is naive.", "url": "https://github.com/rstudio/rstudio/pull/7027#discussion_r435444999", "createdAt": "2020-06-04T17:58:27Z", "author": {"login": "adamconroy"}, "path": "src/gwt/acesupport/acemode/c_cpp.js", "diffHunk": "@@ -157,7 +157,13 @@ oop.inherits(Mode, TextMode);\n \n    this.inRLanguageMode = function(state)\n    {\n-      return state.match(/^r-/);\n+     if (!state)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDc4NTgxMw=="}, "originalCommit": {"oid": "6a27746f7145e833a214a5ecb88ebfe906073b7d"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwODI4NDE2OnYy", "diffSide": "RIGHT", "path": "src/gwt/acesupport/acemode/r_highlight_rules.js", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxODo1OToyNVrOGepT0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxODoxMTo0M1rOGfR6Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDc4NzI4MQ==", "bodyText": "Can you resubmit this without the indentation changes? Makes it very hard to review. If the indentation change is important, then maybe do a whitespace-only change and commit that, then make your changes?", "url": "https://github.com/rstudio/rstudio/pull/7027#discussion_r434787281", "createdAt": "2020-06-03T18:59:25Z", "author": {"login": "gtritchie"}, "path": "src/gwt/acesupport/acemode/r_highlight_rules.js", "diffHunk": "@@ -17,491 +17,473 @@\n  * AGPL (http://www.gnu.org/licenses/agpl-3.0.txt) for more details.\n  *\n  */\n-\n var $colorFunctionCalls = false;\n \n define(\"mode/r_highlight_rules\", [\"require\", \"exports\", \"module\"], function(require, exports, module)\n {\n-   function include(rules) {\n-      var result = new Array(rules.length);\n-      for (var i = 0; i < rules.length; i++) {\n-         result[i] = {include: rules[i]};\n+  function include(rules) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6a27746f7145e833a214a5ecb88ebfe906073b7d"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTQ0NjU2MQ==", "bodyText": "Sorry this was IntelliJ just doing its thing, I didn't even see this change. JS files should be changed to 2 spaces instead of 3 but I didn't intend for it here. For this case here you can just click the gear at the top and click \"hide whitespace changes\" or append ?w=1 to the URL for easier viewing.", "url": "https://github.com/rstudio/rstudio/pull/7027#discussion_r435446561", "createdAt": "2020-06-04T18:01:12Z", "author": {"login": "adamconroy"}, "path": "src/gwt/acesupport/acemode/r_highlight_rules.js", "diffHunk": "@@ -17,491 +17,473 @@\n  * AGPL (http://www.gnu.org/licenses/agpl-3.0.txt) for more details.\n  *\n  */\n-\n var $colorFunctionCalls = false;\n \n define(\"mode/r_highlight_rules\", [\"require\", \"exports\", \"module\"], function(require, exports, module)\n {\n-   function include(rules) {\n-      var result = new Array(rules.length);\n-      for (var i = 0; i < rules.length; i++) {\n-         result[i] = {include: rules[i]};\n+  function include(rules) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDc4NzI4MQ=="}, "originalCommit": {"oid": "6a27746f7145e833a214a5ecb88ebfe906073b7d"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTQ1MjQ3MQ==", "bodyText": "Ah, I didn't know about that option to hide whitespace changes. Nifty!", "url": "https://github.com/rstudio/rstudio/pull/7027#discussion_r435452471", "createdAt": "2020-06-04T18:11:43Z", "author": {"login": "gtritchie"}, "path": "src/gwt/acesupport/acemode/r_highlight_rules.js", "diffHunk": "@@ -17,491 +17,473 @@\n  * AGPL (http://www.gnu.org/licenses/agpl-3.0.txt) for more details.\n  *\n  */\n-\n var $colorFunctionCalls = false;\n \n define(\"mode/r_highlight_rules\", [\"require\", \"exports\", \"module\"], function(require, exports, module)\n {\n-   function include(rules) {\n-      var result = new Array(rules.length);\n-      for (var i = 0; i < rules.length; i++) {\n-         result[i] = {include: rules[i]};\n+  function include(rules) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDc4NzI4MQ=="}, "originalCommit": {"oid": "6a27746f7145e833a214a5ecb88ebfe906073b7d"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwODI5MzIxOnYy", "diffSide": "RIGHT", "path": "src/gwt/acesupport/acemode/rainbow_paren_highlight_rules.js", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxOTowMjoyMFrOGepZ3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxOTowMjoyMFrOGepZ3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDc4ODgyOA==", "bodyText": "Switch to our new \"current-year only\" format.", "url": "https://github.com/rstudio/rstudio/pull/7027#discussion_r434788828", "createdAt": "2020-06-03T19:02:20Z", "author": {"login": "gtritchie"}, "path": "src/gwt/acesupport/acemode/rainbow_paren_highlight_rules.js", "diffHunk": "@@ -0,0 +1,71 @@\n+/*\n+ * rainbow_paren_highlight_rules.js\n+ *\n+ * Copyright (C) 2009-20 by RStudio, PBC", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6a27746f7145e833a214a5ecb88ebfe906073b7d"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwODMxMTUzOnYy", "diffSide": "RIGHT", "path": "src/gwt/src/org/rstudio/studio/client/workbench/prefs/views/EditingPreferencesPane.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxOTowNzo0NFrOGeplPQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMToyMDoxMFrOGhhpJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDc5MTc0MQ==", "bodyText": "Does everything in this pane still fit (vertically)? Noticed this pane is getting very full. I ran into a problem adding a checkbox to the Code / Display pane in #7030 and had to remove some other spacing or it was slightly clipped at the bottom", "url": "https://github.com/rstudio/rstudio/pull/7027#discussion_r434791741", "createdAt": "2020-06-03T19:07:44Z", "author": {"login": "gtritchie"}, "path": "src/gwt/src/org/rstudio/studio/client/workbench/prefs/views/EditingPreferencesPane.java", "diffHunk": "@@ -77,6 +77,7 @@ public EditingPreferencesPane(UserPrefs prefs,\n             \"When enabled, the indentation for documents not part of an RStudio project \" +\n             \"will be automatically detected.\"));\n       editingPanel.add(checkboxPref(\"Insert matching parens/quotes\", prefs_.insertMatching()));\n+      editingPanel.add(checkboxPref(\"Rainbow parentheses\", prefs_.rainbowParentheses()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6a27746f7145e833a214a5ecb88ebfe906073b7d"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzgwNzM5OQ==", "bodyText": "It does, there's still room for like...one more checkbox. It's definitely cramped though. We are in the situation where we want to start thinking about a different format for our options panel.", "url": "https://github.com/rstudio/rstudio/pull/7027#discussion_r437807399", "createdAt": "2020-06-10T01:20:10Z", "author": {"login": "adamconroy"}, "path": "src/gwt/src/org/rstudio/studio/client/workbench/prefs/views/EditingPreferencesPane.java", "diffHunk": "@@ -77,6 +77,7 @@ public EditingPreferencesPane(UserPrefs prefs,\n             \"When enabled, the indentation for documents not part of an RStudio project \" +\n             \"will be automatically detected.\"));\n       editingPanel.add(checkboxPref(\"Insert matching parens/quotes\", prefs_.insertMatching()));\n+      editingPanel.add(checkboxPref(\"Rainbow parentheses\", prefs_.rainbowParentheses()));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDc5MTc0MQ=="}, "originalCommit": {"oid": "6a27746f7145e833a214a5ecb88ebfe906073b7d"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0Mzk3MTkwOnYy", "diffSide": "RIGHT", "path": "src/cpp/session/resources/schema/user-prefs-schema.json", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQyMDoyOToxNFrOGkBnTg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQyMDozNzozNVrOGkB3jw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQyODM2Ng==", "bodyText": "Add a title to this (and regenerate prefs) so it can be set from the Command palette.", "url": "https://github.com/rstudio/rstudio/pull/7027#discussion_r440428366", "createdAt": "2020-06-15T20:29:14Z", "author": {"login": "jmcphers"}, "path": "src/cpp/session/resources/schema/user-prefs-schema.json", "diffHunk": "@@ -515,6 +515,11 @@\n             \"title\": \"Highlight R function calls\",\n             \"description\": \"Whether to highlight R function calls in the code editor.\"\n         },\n+        \"rainbow_parentheses\": {\n+            \"type\": \"boolean\",\n+            \"default\": false,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "89d7ddfb848b0c67dd307a70175bff94e87aa67e"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQzMjUyNw==", "bodyText": "(note you'll probably have to merge master into your branch to get this capability)", "url": "https://github.com/rstudio/rstudio/pull/7027#discussion_r440432527", "createdAt": "2020-06-15T20:37:35Z", "author": {"login": "jmcphers"}, "path": "src/cpp/session/resources/schema/user-prefs-schema.json", "diffHunk": "@@ -515,6 +515,11 @@\n             \"title\": \"Highlight R function calls\",\n             \"description\": \"Whether to highlight R function calls in the code editor.\"\n         },\n+        \"rainbow_parentheses\": {\n+            \"type\": \"boolean\",\n+            \"default\": false,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQyODM2Ng=="}, "originalCommit": {"oid": "89d7ddfb848b0c67dd307a70175bff94e87aa67e"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4366, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}