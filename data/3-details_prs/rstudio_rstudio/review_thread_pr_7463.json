{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU3NDU5Nzcw", "number": 7463, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwMDo0MDozNFrOESm50Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwMDo0Njo1M1rOESm-SQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3OTQ3MjE3OnYy", "diffSide": "RIGHT", "path": "src/gwt/src/org/rstudio/studio/client/workbench/ui/PaneManager.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwMDo0MDozNFrOG34eVQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwNDo1MzowMlrOG38jLw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTI1MDEzMw==", "bodyText": "Nit: Extra space after !=.", "url": "https://github.com/rstudio/rstudio/pull/7463#discussion_r461250133", "createdAt": "2020-07-28T00:40:34Z", "author": {"login": "gtritchie"}, "path": "src/gwt/src/org/rstudio/studio/client/workbench/ui/PaneManager.java", "diffHunk": "@@ -290,8 +290,8 @@ public PaneManager(Provider<MainSplitPanel> pSplitPanel,\n       //\u00a0get the widgets for the extra source columns to be displayed\n       ArrayList<Widget> sourceColumns = new ArrayList<>();\n       additionalSourceCount_ = userPrefs_.panes().getValue().getAdditionalSourceColumns();\n-      if (additionalSourceCount_ !=  sourceColumnManager_.getSize())\n-         syncAdditionalColumnCount(additionalSourceCount_);\n+      if (additionalSourceCount_ !=  sourceColumnManager_.getSize() - 1)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bcb54f55358f392195bcf9096be8aff5b18fdd20"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTMxNjkxMQ==", "bodyText": "Fixed \ud83d\udc4d", "url": "https://github.com/rstudio/rstudio/pull/7463#discussion_r461316911", "createdAt": "2020-07-28T04:53:02Z", "author": {"login": "melissa-barca"}, "path": "src/gwt/src/org/rstudio/studio/client/workbench/ui/PaneManager.java", "diffHunk": "@@ -290,8 +290,8 @@ public PaneManager(Provider<MainSplitPanel> pSplitPanel,\n       //\u00a0get the widgets for the extra source columns to be displayed\n       ArrayList<Widget> sourceColumns = new ArrayList<>();\n       additionalSourceCount_ = userPrefs_.panes().getValue().getAdditionalSourceColumns();\n-      if (additionalSourceCount_ !=  sourceColumnManager_.getSize())\n-         syncAdditionalColumnCount(additionalSourceCount_);\n+      if (additionalSourceCount_ !=  sourceColumnManager_.getSize() - 1)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTI1MDEzMw=="}, "originalCommit": {"oid": "bcb54f55358f392195bcf9096be8aff5b18fdd20"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3OTQ3NzcyOnYy", "diffSide": "RIGHT", "path": "src/gwt/src/org/rstudio/studio/client/workbench/ui/PaneManager.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwMDo0Mzo0MVrOG34hrA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwNDo1Mjo0N1rOG38i6A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTI1MDk4OA==", "bodyText": "Nit: although it's a constant now, if we ever make max column count configurable then maybe want this to be a >= comparison just to be safe in case where max changes to be smaller than current number of columns?", "url": "https://github.com/rstudio/rstudio/pull/7463#discussion_r461250988", "createdAt": "2020-07-28T00:43:41Z", "author": {"login": "gtritchie"}, "path": "src/gwt/src/org/rstudio/studio/client/workbench/ui/PaneManager.java", "diffHunk": "@@ -582,55 +583,103 @@ public void onFocusCenterSeparator()\n    @Handler\n    public void onFocusNextPane()\n    {\n-      // get the name of the currently focused pane\n       LogicalWindow currentFocus = getActiveLogicalWindow();\n-      String nextFocusName = null;\n-      if (currentFocus != null)\n+      if (currentFocus == null)\n+         return;\n+\n+      focusWindow(getAdjacentWindow(currentFocus, false /* before */));\n+   }\n+\n+   @Handler\n+   public void onFocusPreviousPane()\n+   {\n+      LogicalWindow currentFocus = getActiveLogicalWindow();\n+      if (currentFocus == null)\n+         return;\n+      focusWindow(getAdjacentWindow(currentFocus, true /* before */));\n+   }\n+\n+   @Handler\n+    public void onNewSourceColumn()\n+    {\n+       if (!userPrefs_.allowSourceColumns().getValue())\n+          pGlobalDisplay_.get().showMessage(GlobalDisplay.MSG_INFO, \"Cannot Add Column\",\n+             \"Allow Source Columns preference is disabled.\");\n+       else if (additionalSourceCount_ == MAX_COLUMN_COUNT)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bcb54f55358f392195bcf9096be8aff5b18fdd20"}, "originalPosition": 59}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTMxNjg0MA==", "bodyText": "Good idea, done!", "url": "https://github.com/rstudio/rstudio/pull/7463#discussion_r461316840", "createdAt": "2020-07-28T04:52:47Z", "author": {"login": "melissa-barca"}, "path": "src/gwt/src/org/rstudio/studio/client/workbench/ui/PaneManager.java", "diffHunk": "@@ -582,55 +583,103 @@ public void onFocusCenterSeparator()\n    @Handler\n    public void onFocusNextPane()\n    {\n-      // get the name of the currently focused pane\n       LogicalWindow currentFocus = getActiveLogicalWindow();\n-      String nextFocusName = null;\n-      if (currentFocus != null)\n+      if (currentFocus == null)\n+         return;\n+\n+      focusWindow(getAdjacentWindow(currentFocus, false /* before */));\n+   }\n+\n+   @Handler\n+   public void onFocusPreviousPane()\n+   {\n+      LogicalWindow currentFocus = getActiveLogicalWindow();\n+      if (currentFocus == null)\n+         return;\n+      focusWindow(getAdjacentWindow(currentFocus, true /* before */));\n+   }\n+\n+   @Handler\n+    public void onNewSourceColumn()\n+    {\n+       if (!userPrefs_.allowSourceColumns().getValue())\n+          pGlobalDisplay_.get().showMessage(GlobalDisplay.MSG_INFO, \"Cannot Add Column\",\n+             \"Allow Source Columns preference is disabled.\");\n+       else if (additionalSourceCount_ == MAX_COLUMN_COUNT)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTI1MDk4OA=="}, "originalCommit": {"oid": "bcb54f55358f392195bcf9096be8aff5b18fdd20"}, "originalPosition": 59}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3OTQ4MzYxOnYy", "diffSide": "RIGHT", "path": "src/gwt/src/org/rstudio/studio/client/workbench/views/source/SourceColumnManager.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwMDo0Njo1M1rOG34lHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwNDo1MzoxNFrOG38jeQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTI1MTg3MA==", "bodyText": "Nit: typo \"lsit\"", "url": "https://github.com/rstudio/rstudio/pull/7463#discussion_r461251870", "createdAt": "2020-07-28T00:46:53Z", "author": {"login": "gtritchie"}, "path": "src/gwt/src/org/rstudio/studio/client/workbench/views/source/SourceColumnManager.java", "diffHunk": "@@ -1440,20 +1452,14 @@ public void consolidateColumns(int num)\n       SourceColumn mainColumn = getByName(MAIN_SOURCE_NAME);\n       if (num < columnList_.size())\n       {\n-         CPSEditingTargetCommand moveCommand = new CPSEditingTargetCommand()\n-         {\n-            @Override\n-            public void execute(EditingTarget editingTarget, Command continuation)\n-            {\n-            }\n-         };\n          ArrayList<SourceColumn> moveColumns = new ArrayList<>(columnList_);\n          moveColumns.remove(mainColumn);\n+\n+         // remove columns from the end of the lsit first", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bcb54f55358f392195bcf9096be8aff5b18fdd20"}, "originalPosition": 73}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTMxNjk4NQ==", "bodyText": "Done!", "url": "https://github.com/rstudio/rstudio/pull/7463#discussion_r461316985", "createdAt": "2020-07-28T04:53:14Z", "author": {"login": "melissa-barca"}, "path": "src/gwt/src/org/rstudio/studio/client/workbench/views/source/SourceColumnManager.java", "diffHunk": "@@ -1440,20 +1452,14 @@ public void consolidateColumns(int num)\n       SourceColumn mainColumn = getByName(MAIN_SOURCE_NAME);\n       if (num < columnList_.size())\n       {\n-         CPSEditingTargetCommand moveCommand = new CPSEditingTargetCommand()\n-         {\n-            @Override\n-            public void execute(EditingTarget editingTarget, Command continuation)\n-            {\n-            }\n-         };\n          ArrayList<SourceColumn> moveColumns = new ArrayList<>(columnList_);\n          moveColumns.remove(mainColumn);\n+\n+         // remove columns from the end of the lsit first", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTI1MTg3MA=="}, "originalCommit": {"oid": "bcb54f55358f392195bcf9096be8aff5b18fdd20"}, "originalPosition": 73}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4241, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}