{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAzOTQ2ODQw", "number": 6672, "title": "Always refresh data viewer when source data changes", "bodyText": "Fixes #1819\n(and possibly some other filed issues)\nCurrently we are just reloading the data and trying to keep the visible state as much intact as possible when the underlying data changes. Unfortunately this leaves the Dataviewer in a very weird state. Things like tooltips, paging, filters can all get out of sorts and can get very confused when the \"fire and forget\" HTML gets partially out of sync with the data. With the way that it's currently set up (no id's on headers, no objects tied to the HTML directly) we can't just put new data into the rows without a full refresh. I tried to fix just the issue filed in the bug but I found quite a few other things wrong with this. If this feature is worth the bugs it causes I think its worth an enhancement discussion.\nI'm considering options for medium sized changes that we can do in 1.4 to get us closer to a real client-side data+view synced model but at the moment there is too much complexity with too little control for this in-situ reload to work.\nAlso, I ran Prettier against dtviewer.js in the first commit with no config, all defaults to remove any personal subjectivity.", "createdAt": "2020-04-15T19:28:53Z", "url": "https://github.com/rstudio/rstudio/pull/6672", "merged": true, "mergeCommit": {"oid": "9fed7e97f3be0d7fe828f42ab358d507021482e5"}, "closed": true, "closedAt": "2020-04-20T20:32:14Z", "author": {"login": "adamconroy"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcXpbh1gH2gAyNDAzOTQ2ODQwOjg2NTBjMDdmOWExOTgzMmZmM2I2YjkyNWRkMTI0ZmFkOGFlYTI5YWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcYnkVdgFqTM5NTc2MTk5MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8650c07f9a19832ff3b6b925dd124fad8aea29ad", "author": {"user": {"login": "adamconroy", "name": null}}, "url": "https://github.com/rstudio/rstudio/commit/8650c07f9a19832ff3b6b925dd124fad8aea29ad", "committedDate": "2020-04-14T20:22:31Z", "message": "run prettier on dtviewer.js"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7c5d3eec8cbdeead64d7344903c2285b596f470", "author": {"user": {"login": "adamconroy", "name": null}}, "url": "https://github.com/rstudio/rstudio/commit/b7c5d3eec8cbdeead64d7344903c2285b596f470", "committedDate": "2020-04-15T19:17:41Z", "message": "remove code that tries to keep a table open while the underlying data changes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk0MTA2MDA4", "url": "https://github.com/rstudio/rstudio/pull/6672#pullrequestreview-394106008", "createdAt": "2020-04-15T20:21:14Z", "commit": {"oid": "b7c5d3eec8cbdeead64d7344903c2285b596f470"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQyMDoyMToxNVrOGGKGsw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQyMDoyMToxNVrOGGKGsw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTExMDE5NQ==", "bodyText": "We should also remove all the plumbing that decides if the structure changed.", "url": "https://github.com/rstudio/rstudio/pull/6672#discussion_r409110195", "createdAt": "2020-04-15T20:21:15Z", "author": {"login": "jmcphers"}, "path": "src/cpp/session/resources/grid/dtviewer.js", "diffHunk": "@@ -1543,23 +1543,7 @@\n     // restore any scroll handlers (this can get called on tab activate)\n     restoreScrollHandlers();\n \n-    if (structureChanged) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b7c5d3eec8cbdeead64d7344903c2285b596f470"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b87c4547b22add5c917820716f058edfded7baf", "author": {"user": {"login": "adamconroy", "name": null}}, "url": "https://github.com/rstudio/rstudio/commit/7b87c4547b22add5c917820716f058edfded7baf", "committedDate": "2020-04-17T19:04:49Z", "message": "remove plumbing for in-situ data viewer refreshes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1NzYxOTkw", "url": "https://github.com/rstudio/rstudio/pull/6672#pullrequestreview-395761990", "createdAt": "2020-04-17T20:46:15Z", "commit": {"oid": "7b87c4547b22add5c917820716f058edfded7baf"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 206, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}