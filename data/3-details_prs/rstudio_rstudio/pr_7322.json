{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ3Njc5MTY3", "number": 7322, "title": "Fix up toolbar buttons and commands", "bodyText": "This PR adds some functionality #7305 missed when managing command icons across source columns. Specifically, it allows a button to not be synced with its command and the SourceColumnManager.\nSourceAppCommand now saves whether the button(s) for the command are visible or not so that the buttons can be properly set on attachment if the command was managed before the event handlers were added.", "createdAt": "2020-07-10T23:15:49Z", "url": "https://github.com/rstudio/rstudio/pull/7322", "merged": true, "mergeCommit": {"oid": "f181d7afdb5b5ac4239c6d0abfc40151eaada113"}, "closed": true, "closedAt": "2020-07-13T19:13:06Z", "author": {"login": "melissa-barca"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABczr8plgH2gAyNDQ3Njc5MTY3OmVhZjFmY2JiYTZiMTAwN2ZhZjRmZDcxOTQ4NjMxNTExZGY2ZTc3MjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc0mXNKgH2gAyNDQ3Njc5MTY3OmQ3ODQzZWQ0YTNiYzRiZGI0MWEwMmEwMTMzZDc0OGFkZGJmYWM5MmI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "eaf1fcbba6b1007faf4fd71948631511df6e7722", "author": {"user": {"login": "melissa-barca", "name": "Melissa Barca"}}, "url": "https://github.com/rstudio/rstudio/commit/eaf1fcbba6b1007faf4fd71948631511df6e7722", "committedDate": "2020-07-10T23:08:23Z", "message": "properly display buttons on toolbar on start up and\nallow specified buttons to not be synced with their toolbar"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3NDgyODU0", "url": "https://github.com/rstudio/rstudio/pull/7322#pullrequestreview-447482854", "createdAt": "2020-07-13T18:07:54Z", "commit": {"oid": "eaf1fcbba6b1007faf4fd71948631511df6e7722"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QxODowNzo1NFrOGwz5kw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QxODoyMzozMVrOGw0b2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzgzNTE1NQ==", "bodyText": "I'd love a comment briefly describing what \"synced\" means, even just a single-line // foo bar style here.", "url": "https://github.com/rstudio/rstudio/pull/7322#discussion_r453835155", "createdAt": "2020-07-13T18:07:54Z", "author": {"login": "gtritchie"}, "path": "src/gwt/src/org/rstudio/studio/client/workbench/views/source/SourceAppCommand.java", "diffHunk": "@@ -40,24 +40,32 @@ public CommandSourceColumnToolbarButton(SourceAppCommand sourceCmd,\n                                               String buttonLabel,\n                                               String buttonTitle,\n                                               ImageResourceProvider imageResourceProvider,\n-                                              ClickHandler clickHandler)\n+                                              ClickHandler clickHandler,\n+                                              boolean synced)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eaf1fcbba6b1007faf4fd71948631511df6e7722"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzg0MzkyOQ==", "bodyText": "I'm not a big fan of boolean arguments like these (though I know we do it a lot, and I've written a bunch of code that does it, too). So this is absolutely just me thinking out loud, no real need to change anything.\nAlternatives include creating a separate method, e.g.\n.createUnsyncedToolbarButton()\nCommenting the argument:\n.createToolbarButton(false/*synced*/)\nPass an enum, instead (public enum SyncType { UNSYNCED, SYNCED }).", "url": "https://github.com/rstudio/rstudio/pull/7322#discussion_r453843929", "createdAt": "2020-07-13T18:23:31Z", "author": {"login": "gtritchie"}, "path": "src/gwt/src/org/rstudio/studio/client/workbench/views/source/editors/text/TextEditingTargetWidget.java", "diffHunk": "@@ -351,7 +351,7 @@ private Toolbar createToolbar(TextFileType fileType)\n       toolbar.addLeftWidget(previewHTMLButton_ =\n          mgr.getSourceCommand(commands_.previewHTML(), column_).createToolbarButton());\n       knitDocumentButton_ =\n-         mgr.getSourceCommand(commands_.knitDocument(), column_).createToolbarButton();\n+         mgr.getSourceCommand(commands_.knitDocument(), column_).createToolbarButton(false);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eaf1fcbba6b1007faf4fd71948631511df6e7722"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d7843ed4a3bc4bdb41a02a0133d748addbfac92b", "author": {"user": {"login": "melissa-barca", "name": "Melissa Barca"}}, "url": "https://github.com/rstudio/rstudio/commit/d7843ed4a3bc4bdb41a02a0133d748addbfac92b", "committedDate": "2020-07-13T19:11:53Z", "message": "rename function to make calls more clear"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 109, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}