{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg3NDM3ODkz", "number": 7796, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQyMDoxNzo0NlrOEjwnpw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQyMDoxOToxNFrOEjwplQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1OTMyMTk5OnYy", "diffSide": "RIGHT", "path": "src/gwt/src/org/rstudio/studio/client/workbench/ui/PaneManager.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQyMDoxNzo0NlrOHSTAdw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQyMTowMTowMFrOHSUYTg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODk0NzgzMQ==", "bodyText": "Do we have an issue open on this?", "url": "https://github.com/rstudio/rstudio/pull/7796#discussion_r488947831", "createdAt": "2020-09-15T20:17:46Z", "author": {"login": "jmcphers"}, "path": "src/gwt/src/org/rstudio/studio/client/workbench/ui/PaneManager.java", "diffHunk": "@@ -577,10 +590,12 @@ public void onLayoutConsoleOnRight()\n       }\n    }\n \n+   // The following commands need to be updated to fit the new layout with additional source \n+   // columns. The mismatched names/actions are temporarily intentional until this is handled.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eed99b8dff3d4cd4265d31202c76b2a0c229b8fe"}, "originalPosition": 115}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODk3MDMxOA==", "bodyText": "I've created one here: #7801", "url": "https://github.com/rstudio/rstudio/pull/7796#discussion_r488970318", "createdAt": "2020-09-15T21:01:00Z", "author": {"login": "melissa-barca"}, "path": "src/gwt/src/org/rstudio/studio/client/workbench/ui/PaneManager.java", "diffHunk": "@@ -577,10 +590,12 @@ public void onLayoutConsoleOnRight()\n       }\n    }\n \n+   // The following commands need to be updated to fit the new layout with additional source \n+   // columns. The mismatched names/actions are temporarily intentional until this is handled.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODk0NzgzMQ=="}, "originalCommit": {"oid": "eed99b8dff3d4cd4265d31202c76b2a0c229b8fe"}, "originalPosition": 115}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1OTMyNjkzOnYy", "diffSide": "RIGHT", "path": "src/gwt/src/org/rstudio/studio/client/workbench/ui/PaneManager.java", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQyMDoxOToxNFrOHSTDWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQyMjoyODowNFrOHSYBEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODk0ODU2OA==", "bodyText": "Nit: addAll will do this in one line", "url": "https://github.com/rstudio/rstudio/pull/7796#discussion_r488948568", "createdAt": "2020-09-15T20:19:14Z", "author": {"login": "jmcphers"}, "path": "src/gwt/src/org/rstudio/studio/client/workbench/ui/PaneManager.java", "diffHunk": "@@ -946,7 +1106,26 @@ private void restoreSavedLayout()\n          window.onWindowStateChange(new WindowStateChangeEvent(WindowState.NORMAL, true));\n \n       maximizedWindow_.onWindowStateChange(new WindowStateChangeEvent(WindowState.NORMAL, true));\n-      resizeHorizontally(panel_.getWidgetSize(right_), widgetSizePriorToZoom_);\n+      \n+      ArrayList<Double> leftStart = new ArrayList<>();\n+      ArrayList<Double> leftEnd = new ArrayList<>();\n+      if (leftList_.size() > 0)\n+      {\n+         for (int i = 0; i < leftList_.size(); i++)\n+            leftStart.add(0.0);\n+\n+         if (leftWidgetSizePriorToZoom_.size() != leftList_.size())\n+            leftEnd = getValidColumnWidths(leftList_, leftWidgetSizePriorToZoom_, false);\n+         else\n+         {\n+            // Copy leftWidgetSizePriorToZoom_ rather than passing it directly because it may be\n+            // cleared before animation completes\n+            for (Double size : leftWidgetSizePriorToZoom_)\n+               leftEnd.add(size);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eed99b8dff3d4cd4265d31202c76b2a0c229b8fe"}, "originalPosition": 419}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODk3MTI3Mw==", "bodyText": "Doesn't addAll only do a shallow copy though?", "url": "https://github.com/rstudio/rstudio/pull/7796#discussion_r488971273", "createdAt": "2020-09-15T21:02:50Z", "author": {"login": "melissa-barca"}, "path": "src/gwt/src/org/rstudio/studio/client/workbench/ui/PaneManager.java", "diffHunk": "@@ -946,7 +1106,26 @@ private void restoreSavedLayout()\n          window.onWindowStateChange(new WindowStateChangeEvent(WindowState.NORMAL, true));\n \n       maximizedWindow_.onWindowStateChange(new WindowStateChangeEvent(WindowState.NORMAL, true));\n-      resizeHorizontally(panel_.getWidgetSize(right_), widgetSizePriorToZoom_);\n+      \n+      ArrayList<Double> leftStart = new ArrayList<>();\n+      ArrayList<Double> leftEnd = new ArrayList<>();\n+      if (leftList_.size() > 0)\n+      {\n+         for (int i = 0; i < leftList_.size(); i++)\n+            leftStart.add(0.0);\n+\n+         if (leftWidgetSizePriorToZoom_.size() != leftList_.size())\n+            leftEnd = getValidColumnWidths(leftList_, leftWidgetSizePriorToZoom_, false);\n+         else\n+         {\n+            // Copy leftWidgetSizePriorToZoom_ rather than passing it directly because it may be\n+            // cleared before animation completes\n+            for (Double size : leftWidgetSizePriorToZoom_)\n+               leftEnd.add(size);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODk0ODU2OA=="}, "originalCommit": {"oid": "eed99b8dff3d4cd4265d31202c76b2a0c229b8fe"}, "originalPosition": 419}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTAxMDEzMQ==", "bodyText": "IntelliJ also recommends replacing with addAll.", "url": "https://github.com/rstudio/rstudio/pull/7796#discussion_r489010131", "createdAt": "2020-09-15T22:02:57Z", "author": {"login": "gtritchie"}, "path": "src/gwt/src/org/rstudio/studio/client/workbench/ui/PaneManager.java", "diffHunk": "@@ -946,7 +1106,26 @@ private void restoreSavedLayout()\n          window.onWindowStateChange(new WindowStateChangeEvent(WindowState.NORMAL, true));\n \n       maximizedWindow_.onWindowStateChange(new WindowStateChangeEvent(WindowState.NORMAL, true));\n-      resizeHorizontally(panel_.getWidgetSize(right_), widgetSizePriorToZoom_);\n+      \n+      ArrayList<Double> leftStart = new ArrayList<>();\n+      ArrayList<Double> leftEnd = new ArrayList<>();\n+      if (leftList_.size() > 0)\n+      {\n+         for (int i = 0; i < leftList_.size(); i++)\n+            leftStart.add(0.0);\n+\n+         if (leftWidgetSizePriorToZoom_.size() != leftList_.size())\n+            leftEnd = getValidColumnWidths(leftList_, leftWidgetSizePriorToZoom_, false);\n+         else\n+         {\n+            // Copy leftWidgetSizePriorToZoom_ rather than passing it directly because it may be\n+            // cleared before animation completes\n+            for (Double size : leftWidgetSizePriorToZoom_)\n+               leftEnd.add(size);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODk0ODU2OA=="}, "originalCommit": {"oid": "eed99b8dff3d4cd4265d31202c76b2a0c229b8fe"}, "originalPosition": 419}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTAxNjI4NQ==", "bodyText": "It does do a shallow copy, but this loop also does a shallow copy.", "url": "https://github.com/rstudio/rstudio/pull/7796#discussion_r489016285", "createdAt": "2020-09-15T22:10:31Z", "author": {"login": "jmcphers"}, "path": "src/gwt/src/org/rstudio/studio/client/workbench/ui/PaneManager.java", "diffHunk": "@@ -946,7 +1106,26 @@ private void restoreSavedLayout()\n          window.onWindowStateChange(new WindowStateChangeEvent(WindowState.NORMAL, true));\n \n       maximizedWindow_.onWindowStateChange(new WindowStateChangeEvent(WindowState.NORMAL, true));\n-      resizeHorizontally(panel_.getWidgetSize(right_), widgetSizePriorToZoom_);\n+      \n+      ArrayList<Double> leftStart = new ArrayList<>();\n+      ArrayList<Double> leftEnd = new ArrayList<>();\n+      if (leftList_.size() > 0)\n+      {\n+         for (int i = 0; i < leftList_.size(); i++)\n+            leftStart.add(0.0);\n+\n+         if (leftWidgetSizePriorToZoom_.size() != leftList_.size())\n+            leftEnd = getValidColumnWidths(leftList_, leftWidgetSizePriorToZoom_, false);\n+         else\n+         {\n+            // Copy leftWidgetSizePriorToZoom_ rather than passing it directly because it may be\n+            // cleared before animation completes\n+            for (Double size : leftWidgetSizePriorToZoom_)\n+               leftEnd.add(size);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODk0ODU2OA=="}, "originalCommit": {"oid": "eed99b8dff3d4cd4265d31202c76b2a0c229b8fe"}, "originalPosition": 419}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTAyOTkwNQ==", "bodyText": "You're right, but I think it's ok because this gets passed as a final parameter. I've updated to follow your nit.", "url": "https://github.com/rstudio/rstudio/pull/7796#discussion_r489029905", "createdAt": "2020-09-15T22:28:04Z", "author": {"login": "melissa-barca"}, "path": "src/gwt/src/org/rstudio/studio/client/workbench/ui/PaneManager.java", "diffHunk": "@@ -946,7 +1106,26 @@ private void restoreSavedLayout()\n          window.onWindowStateChange(new WindowStateChangeEvent(WindowState.NORMAL, true));\n \n       maximizedWindow_.onWindowStateChange(new WindowStateChangeEvent(WindowState.NORMAL, true));\n-      resizeHorizontally(panel_.getWidgetSize(right_), widgetSizePriorToZoom_);\n+      \n+      ArrayList<Double> leftStart = new ArrayList<>();\n+      ArrayList<Double> leftEnd = new ArrayList<>();\n+      if (leftList_.size() > 0)\n+      {\n+         for (int i = 0; i < leftList_.size(); i++)\n+            leftStart.add(0.0);\n+\n+         if (leftWidgetSizePriorToZoom_.size() != leftList_.size())\n+            leftEnd = getValidColumnWidths(leftList_, leftWidgetSizePriorToZoom_, false);\n+         else\n+         {\n+            // Copy leftWidgetSizePriorToZoom_ rather than passing it directly because it may be\n+            // cleared before animation completes\n+            for (Double size : leftWidgetSizePriorToZoom_)\n+               leftEnd.add(size);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODk0ODU2OA=="}, "originalCommit": {"oid": "eed99b8dff3d4cd4265d31202c76b2a0c229b8fe"}, "originalPosition": 419}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4193, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}