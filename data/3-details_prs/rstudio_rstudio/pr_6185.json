{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcyNjM3Mzc0", "number": 6185, "title": "don't monitor renv / packrat libraries", "bodyText": "Closes #3267.", "createdAt": "2020-02-07T23:02:02Z", "url": "https://github.com/rstudio/rstudio/pull/6185", "merged": true, "mergeCommit": {"oid": "89a67316450eb45a87002d51b6eef7b4a717a70d"}, "closed": true, "closedAt": "2020-02-11T00:14:19Z", "author": {"login": "kevinushey"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcDAsAHgFqTM1NjEyODYyNw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcDGW7qAFqTM1NjM1NTAwMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2MTI4NjI3", "url": "https://github.com/rstudio/rstudio/pull/6185#pullrequestreview-356128627", "createdAt": "2020-02-10T17:34:14Z", "commit": {"oid": "87acc19034f87b8d9135deaf26e46a5e3a6fab45"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxNzozNDoxNFrOFnvGvg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxNzozNTozM1rOFnvJNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzIxMDU1OA==", "bodyText": "Why this change? Isn't it generally risky to return a reference to a class member? Since you then just do c_str(), anyways, why not keep it the same? Performance?", "url": "https://github.com/rstudio/rstudio/pull/6185#discussion_r377210558", "createdAt": "2020-02-10T17:34:14Z", "author": {"login": "gtritchie"}, "path": "src/cpp/core/include/core/FileInfo.hpp", "diffHunk": "@@ -89,7 +89,7 @@ class FileInfo\n    }\n    \n public:\n-   std::string absolutePath() const { return absolutePath_.c_str(); }\n+   const std::string& absolutePath() const { return absolutePath_; }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87acc19034f87b8d9135deaf26e46a5e3a6fab45"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzIxMTE4OA==", "bodyText": "Out of curiosity, what's resulting in trailing \\0 s?", "url": "https://github.com/rstudio/rstudio/pull/6185#discussion_r377211188", "createdAt": "2020-02-10T17:35:33Z", "author": {"login": "gtritchie"}, "path": "src/cpp/core/FileInfo.cpp", "diffHunk": "@@ -43,6 +43,8 @@ FileInfo::FileInfo(const std::string& absolutePath,\n       lastWriteTime_(0),\n       isSymlink_(isSymlink)\n {\n+   // some file paths might be constructed with trailing nul bytes; remove those here", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87acc19034f87b8d9135deaf26e46a5e3a6fab45"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2MTQwMTUz", "url": "https://github.com/rstudio/rstudio/pull/6185#pullrequestreview-356140153", "createdAt": "2020-02-10T17:52:16Z", "commit": {"oid": "87acc19034f87b8d9135deaf26e46a5e3a6fab45"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxNzo1MjoxN1rOFnvsOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxNzo1MjoxN1rOFnvsOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzIyMDE1Mg==", "bodyText": "What do you think about adding another pref (with no UI) whose value is an array of additional directories to exclude from monitoring? Realize the ideal solution is more along the lines of a .ignore file, but as that's unlikely to land in 1.3 it'd be nice to have an escape hatch for cases where something besides the hardcoded list needs to be excluded.", "url": "https://github.com/rstudio/rstudio/pull/6185#discussion_r377220152", "createdAt": "2020-02-10T17:52:17Z", "author": {"login": "jmcphers"}, "path": "src/cpp/session/projects/SessionProjectContext.cpp", "diffHunk": "@@ -477,12 +477,13 @@ void ProjectContext::onDeferredInit(bool newSession)\n                             this, _1);\n    cb.onUnregistered = bind(&ProjectContext::fileMonitorTermination,\n                             this, Success());\n+\n+   bool hideObjectFiles = prefs::userPrefs().hideObjectFiles();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87acc19034f87b8d9135deaf26e46a5e3a6fab45"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2MTc5ODQ0", "url": "https://github.com/rstudio/rstudio/pull/6185#pullrequestreview-356179844", "createdAt": "2020-02-10T18:54:25Z", "commit": {"oid": "bf6237064515388b2f7966097ea0d94dcc443ee1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f846898e96969b2c90529c403c4f849c097bd71", "author": {"user": {"login": "kevinushey", "name": "Kevin Ushey"}}, "url": "https://github.com/rstudio/rstudio/commit/5f846898e96969b2c90529c403c4f849c097bd71", "committedDate": "2020-02-10T23:41:11Z", "message": "avoid unnecessary string copy"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "789ba7e2afb30d65289e01edd9b663a2e0eeb48a", "author": {"user": {"login": "kevinushey", "name": "Kevin Ushey"}}, "url": "https://github.com/rstudio/rstudio/commit/789ba7e2afb30d65289e01edd9b663a2e0eeb48a", "committedDate": "2020-02-10T23:41:11Z", "message": "ensure no nul bytes enter FileInfo paths"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a0a6dba9dc30a1f4372925d7c0e47fa8ef6d4707", "author": {"user": {"login": "kevinushey", "name": "Kevin Ushey"}}, "url": "https://github.com/rstudio/rstudio/commit/a0a6dba9dc30a1f4372925d7c0e47fa8ef6d4707", "committedDate": "2020-02-10T23:41:11Z", "message": "don't monitor files in packrat / renv lib\n\nCloses #3267."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c1267e762029dea9ff94776e07177e012c41b57d", "author": {"user": {"login": "kevinushey", "name": "Kevin Ushey"}}, "url": "https://github.com/rstudio/rstudio/commit/c1267e762029dea9ff94776e07177e012c41b57d", "committedDate": "2020-02-10T23:41:11Z", "message": "monitor filter is now un-necessary"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e1f488952ccc22666497199fa06476ad2723fb13", "author": {"user": {"login": "kevinushey", "name": "Kevin Ushey"}}, "url": "https://github.com/rstudio/rstudio/commit/e1f488952ccc22666497199fa06476ad2723fb13", "committedDate": "2020-02-10T23:41:11Z", "message": "document intent"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ff0176ecb5927c21e2be1730e76fb3a8df308ac", "author": {"user": {"login": "kevinushey", "name": "Kevin Ushey"}}, "url": "https://github.com/rstudio/rstudio/commit/1ff0176ecb5927c21e2be1730e76fb3a8df308ac", "committedDate": "2020-02-10T23:41:11Z", "message": "return by const-ref is dangerous; don't do it"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bf6237064515388b2f7966097ea0d94dcc443ee1", "author": {"user": {"login": "kevinushey", "name": "Kevin Ushey"}}, "url": "https://github.com/rstudio/rstudio/commit/bf6237064515388b2f7966097ea0d94dcc443ee1", "committedDate": "2020-02-10T18:34:49Z", "message": "return by const-ref is dangerous; don't do it"}, "afterCommit": {"oid": "1ff0176ecb5927c21e2be1730e76fb3a8df308ac", "author": {"user": {"login": "kevinushey", "name": "Kevin Ushey"}}, "url": "https://github.com/rstudio/rstudio/commit/1ff0176ecb5927c21e2be1730e76fb3a8df308ac", "committedDate": "2020-02-10T23:41:11Z", "message": "return by const-ref is dangerous; don't do it"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a20b3d1bd5a352d1b5799e03354e5c59211711e6", "author": {"user": {"login": "kevinushey", "name": "Kevin Ushey"}}, "url": "https://github.com/rstudio/rstudio/commit/a20b3d1bd5a352d1b5799e03354e5c59211711e6", "committedDate": "2020-02-11T00:09:23Z", "message": "add user pref for file monitor ignores"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d6ce8a4a75cdb1385d6d60a513048d7a70577d4", "author": {"user": {"login": "kevinushey", "name": "Kevin Ushey"}}, "url": "https://github.com/rstudio/rstudio/commit/1d6ce8a4a75cdb1385d6d60a513048d7a70577d4", "committedDate": "2020-02-11T00:11:43Z", "message": "file -> path"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2MzU1MDAz", "url": "https://github.com/rstudio/rstudio/pull/6185#pullrequestreview-356355003", "createdAt": "2020-02-11T00:12:20Z", "commit": {"oid": "a20b3d1bd5a352d1b5799e03354e5c59211711e6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 358, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}