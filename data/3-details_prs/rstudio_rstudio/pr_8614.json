{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM5NzUxMDE2", "number": 8614, "title": "try reloading main window if R not yet ready", "bodyText": "Intent\nFix an issue where the Desktop client would be ready and attempting to connect to R before R itself was ready to receive connections.\nApproach\nSimilar to the last approach, retry attempts to connect to the R session a couple times. This PR also makes it easier to test this case, by allowing one to instruct the R session to sleep on startup for a brief period of time (effectively simulating a \"slow\" session startup).\nQA Notes\nOn macOS, test with the following:\nexport RSTUDIO_SESSION_SLEEP_ON_STARTUP=5\n/Applications/RStudio.app/Contents/MacOS/RStudio\n\nYou should see a temporary \"initializing R\" window first:\n\nThe session should later load successfully after a brief pause.\nYou can also test the extreme case, with:\nexport RSTUDIO_SESSION_SLEEP_ON_STARTUP=60\n/Applications/RStudio.app/Contents/MacOS/RStudio\n\nIn this case, you should eventually see the \"cannot connect to R\" error page, but if you wait 60 seconds you should be able to retry and successfully connect.\nCloses #8270.", "createdAt": "2020-12-14T19:34:11Z", "url": "https://github.com/rstudio/rstudio/pull/8614", "merged": true, "mergeCommit": {"oid": "637c2bd3b03fb365a87a8d81acd70bef53c5d710"}, "closed": true, "closedAt": "2020-12-14T19:52:18Z", "author": {"login": "kevinushey"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdmKW-PAH2gAyNTM5NzUxMDE2OjNlZDczYTQ5ZmEzZTEyNzVkYTQ2ZmYzNGQwNzZlNzE5MGIyNTkzOWI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdmLGyyAFqTU1MTgzMzk1Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3ed73a49fa3e1275da46ff34d076e7190b25939b", "author": {"user": {"login": "kevinushey", "name": "Kevin Ushey"}}, "url": "https://github.com/rstudio/rstudio/commit/3ed73a49fa3e1275da46ff34d076e7190b25939b", "committedDate": "2020-12-14T18:50:30Z", "message": "try reloading main window if R not yet ready"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b783122481f212df4b05063edde71263c1159b6f", "author": {"user": {"login": "kevinushey", "name": "Kevin Ushey"}}, "url": "https://github.com/rstudio/rstudio/commit/b783122481f212df4b05063edde71263c1159b6f", "committedDate": "2020-12-14T19:31:26Z", "message": "make it easier to test slow session startup cases"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxODI4NTU5", "url": "https://github.com/rstudio/rstudio/pull/8614#pullrequestreview-551828559", "createdAt": "2020-12-14T19:35:12Z", "commit": {"oid": "b783122481f212df4b05063edde71263c1159b6f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxOTozNToxM1rOIFjKVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxOTozNToxM1rOIFjKVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjY4OTg3OA==", "bodyText": "This change makes it possible to build RStudio against one version of R, but run it against a different version of R if so desired. (Basically, identical behavior to what we do in release builds.)", "url": "https://github.com/rstudio/rstudio/pull/8614#discussion_r542689878", "createdAt": "2020-12-14T19:35:13Z", "author": {"login": "kevinushey"}, "path": "src/cpp/conf/rdesktop-dev.conf", "diffHunk": "@@ -31,12 +31,6 @@ r-resources-path=${CMAKE_CURRENT_SOURCE_DIR}/session/resources\n r-session-library=${CMAKE_CURRENT_BINARY_DIR}/r/R/packages/library\n r-session-package-archives=${RSTUDIO_DEPENDENCIES_DIR}/common\n \n-# override r home and doc dir (to ensure we always run against the version\n-# we built against and so we can pick them up even when we are launched\n-# standalone in the debugger)\n-r-home-dir-override=${LIBR_HOME}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b783122481f212df4b05063edde71263c1159b6f"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxODMzOTU2", "url": "https://github.com/rstudio/rstudio/pull/8614#pullrequestreview-551833956", "createdAt": "2020-12-14T19:42:44Z", "commit": {"oid": "b783122481f212df4b05063edde71263c1159b6f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4919, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}