{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA1MDQxNjMw", "number": 8093, "title": "Fix chunk highlighting issue", "bodyText": "Intent\nFixes #8088\nWhen a document was created before a new source column and later had its mode changed, the highlighted background indicating a chunk was properly aligned with the chunk.\nApproach\nLayout changes for additional columns require existing source columns to detach and re-attach. Prior to this fix, the highlighter's event handlers were removed when detached but never added back since this wasn't necessary prior to 1.4.\nQA Notes\nSee original ticket.", "createdAt": "2020-10-16T19:02:51Z", "url": "https://github.com/rstudio/rstudio/pull/8093", "merged": true, "mergeCommit": {"oid": "39585b88cb0d9e720d42b452c138a492deb7a468"}, "closed": true, "closedAt": "2020-10-16T22:25:33Z", "author": {"login": "melissa-barca"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdTLCi-AH2gAyNTA1MDQxNjMwOjRiNDY2NWEyYTdmOGJhODEwM2I0ZDAxMGFmNGIxNThmYzVmZjFjMjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdTOEk8AFqTUxMDgyOTU2NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4b4665a2a7f8ba8103b4d010af4b158fc5ff1c26", "author": {"user": {"login": "melissa-barca", "name": "Melissa Barca"}}, "url": "https://github.com/rstudio/rstudio/commit/4b4665a2a7f8ba8103b4d010af4b158fc5ff1c26", "committedDate": "2020-10-16T18:53:32Z", "message": "reattach handlers onAttach"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwNzYzOTI0", "url": "https://github.com/rstudio/rstudio/pull/8093#pullrequestreview-510763924", "createdAt": "2020-10-16T20:01:01Z", "commit": {"oid": "4b4665a2a7f8ba8103b4d010af4b158fc5ff1c26"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQyMDowMTowMVrOHjOK4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQyMDowMTowMVrOHjOK4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjY5NDM3MA==", "bodyText": "Should we also remove any existing handlers here as well, just in case? (Since we do initialize handlers in the constructor here: \n  \n    \n      rstudio/src/gwt/src/org/rstudio/studio/client/workbench/views/source/editors/text/ace/AceBackgroundHighlighter.java\n    \n    \n        Lines 168 to 170\n      in\n      e2be2ee\n    \n    \n    \n    \n\n        \n          \n           handlers_ = new HandlerRegistrations( \n        \n\n        \n          \n                 editor.addEditorModeChangedHandler(this), \n        \n\n        \n          \n                 editor.addAttachHandler(this)); \n        \n    \n  \n\n)\nOr, maybe we can just remove that initialization and only init in attach / detach as you currently have things?", "url": "https://github.com/rstudio/rstudio/pull/8093#discussion_r506694370", "createdAt": "2020-10-16T20:01:01Z", "author": {"login": "kevinushey"}, "path": "src/gwt/src/org/rstudio/studio/client/workbench/views/source/editors/text/ace/AceBackgroundHighlighter.java", "diffHunk": "@@ -277,6 +277,18 @@ public void onAttachOrDetach(AttachEvent event)\n             documentChangedHandler_ = null;\n          }\n       }\n+      else\n+      {\n+         handlers_ = new HandlerRegistrations(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4b4665a2a7f8ba8103b4d010af4b158fc5ff1c26"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d432cbedd9892bf08d695bf052460935a55c168", "author": {"user": {"login": "melissa-barca", "name": "Melissa Barca"}}, "url": "https://github.com/rstudio/rstudio/commit/8d432cbedd9892bf08d695bf052460935a55c168", "committedDate": "2020-10-16T22:01:30Z", "message": "prevent excess handlers"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwODI5NTY0", "url": "https://github.com/rstudio/rstudio/pull/8093#pullrequestreview-510829564", "createdAt": "2020-10-16T22:25:28Z", "commit": {"oid": "8d432cbedd9892bf08d695bf052460935a55c168"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4935, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}