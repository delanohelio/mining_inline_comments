{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA4NzkxOTI1", "number": 6733, "title": "fix ensure visible behavior", "bodyText": "Closes #6703.\nAlso bundles a brown-bag CSS fix for IE11 -- the empty space in a tab panel was not being styled for dark themes.", "createdAt": "2020-04-24T22:26:32Z", "url": "https://github.com/rstudio/rstudio/pull/6733", "merged": true, "mergeCommit": {"oid": "04ddbbb2254fa3f7ad3eb7d037a713b375e79c13"}, "closed": true, "closedAt": "2020-04-24T23:50:09Z", "author": {"login": "kevinushey"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABca420-gH2gAyNDA4NzkxOTI1OjFiNjA5NDkzZGM4ZGU0ZmI3MjM1MWM4NGQxNzhhN2NkNDYyZmJjZDQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABca6IMAgFqTQwMDMyMzUzMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1b609493dc8de4fb72351c84d178a7cd462fbcd4", "author": {"user": {"login": "kevinushey", "name": "Kevin Ushey"}}, "url": "https://github.com/rstudio/rstudio/commit/1b609493dc8de4fb72351c84d178a7cd462fbcd4", "committedDate": "2020-04-24T22:02:41Z", "message": "refine ensure cursor visible behavior"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c78f45e2c0a5adc4e11a45b88a57a45919afe4fc", "author": {"user": {"login": "kevinushey", "name": "Kevin Ushey"}}, "url": "https://github.com/rstudio/rstudio/commit/c78f45e2c0a5adc4e11a45b88a57a45919afe4fc", "committedDate": "2020-04-24T22:10:45Z", "message": "fix for IE11 tab style"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0db8b1c4f56bca5308b45185eb6011ab01e8cc56", "author": {"user": {"login": "kevinushey", "name": "Kevin Ushey"}}, "url": "https://github.com/rstudio/rstudio/commit/0db8b1c4f56bca5308b45185eb6011ab01e8cc56", "committedDate": "2020-04-24T22:25:46Z", "message": "guard against attempts to render with no cursor available"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4cef373b7b10f0aab64103078d10b20a3cf0523e", "author": {"user": {"login": "kevinushey", "name": "Kevin Ushey"}}, "url": "https://github.com/rstudio/rstudio/commit/4cef373b7b10f0aab64103078d10b20a3cf0523e", "committedDate": "2020-04-24T22:37:49Z", "message": "force check for pending scroll after failed scroll attempt"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwMzE0NTky", "url": "https://github.com/rstudio/rstudio/pull/6733#pullrequestreview-400314592", "createdAt": "2020-04-24T22:57:40Z", "commit": {"oid": "4cef373b7b10f0aab64103078d10b20a3cf0523e"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMjo1Nzo0MFrOGLr8Kw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMjo1Nzo0MFrOGLr8Kw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDkwNzQzNQ==", "bodyText": "Using !important is evil, but sadly often unavoidable.\nhttps://css-tricks.com/when-using-important-is-the-right-choice/", "url": "https://github.com/rstudio/rstudio/pull/6733#discussion_r414907435", "createdAt": "2020-04-24T22:57:40Z", "author": {"login": "gtritchie"}, "path": "src/gwt/src/org/rstudio/core/client/theme/res/themeStyles.css", "diffHunk": "@@ -2591,12 +2591,12 @@ body.rstudio-themes-flat .rstudio-themes-dark-grey {\n \n .rstudio-themes-flat .rstudio-themes-dark-grey .gwt-TabLayoutPanelTabs table.rstheme_tabLayoutCenter,\n .rstudio-themes-flat .rstudio-themes-dark-grey .rstheme_minimizedWindowObject table.rstheme_tabLayoutCenter {\n-   background: THEME_DARKGREY_INACTIVE;\n+   background: THEME_DARKGREY_INACTIVE !important;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4cef373b7b10f0aab64103078d10b20a3cf0523e"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwMzE2NDA0", "url": "https://github.com/rstudio/rstudio/pull/6733#pullrequestreview-400316404", "createdAt": "2020-04-24T23:03:43Z", "commit": {"oid": "4cef373b7b10f0aab64103078d10b20a3cf0523e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMzowMzo0M1rOGLsEVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMzowMzo0M1rOGLsEVw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDkwOTUyNw==", "bodyText": "Should we skip doing this if scrollIntoViewPending_ is already true so there's no way for requests to stack up?", "url": "https://github.com/rstudio/rstudio/pull/6733#discussion_r414909527", "createdAt": "2020-04-24T23:03:43Z", "author": {"login": "jmcphers"}, "path": "src/gwt/src/org/rstudio/studio/client/common/shell/ShellWidget.java", "diffHunk": "@@ -433,7 +435,15 @@ public void consolePrompt(String prompt, boolean showInput)\n    @Override\n    public void ensureInputVisible()\n    {\n-      scrollIntoView();\n+      // NOTE: we don't scroll immediately as this is normally called\n+      // in response to mutations of the console input buffer, and so\n+      // we need to wait until Ace has finished rendering in response\n+      // to that change.\n+      scrollIntoViewPending_ = true;\n+      \n+      // In case there wasn't an Ace render in-flight, force a check\n+      // for pending scroll (which will then force the cursor into view)\n+      Scheduler.get().scheduleDeferred(() -> checkForPendingScroll());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4cef373b7b10f0aab64103078d10b20a3cf0523e"}, "originalPosition": 38}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "73350c251d4e7dd62e0e58e89d94d5735cf9ef9f", "author": {"user": {"login": "kevinushey", "name": "Kevin Ushey"}}, "url": "https://github.com/rstudio/rstudio/commit/73350c251d4e7dd62e0e58e89d94d5735cf9ef9f", "committedDate": "2020-04-24T23:29:53Z", "message": "defend against repeated calls to scroll into view"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwMzIzNTMz", "url": "https://github.com/rstudio/rstudio/pull/6733#pullrequestreview-400323533", "createdAt": "2020-04-24T23:31:33Z", "commit": {"oid": "73350c251d4e7dd62e0e58e89d94d5735cf9ef9f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 226, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}