{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYwNTQ3NzU1", "number": 7506, "title": "delegate focus requests to panmirror when visual mode active", "bodyText": "This PR fixes an issue where attempting to navigate to a file that currently has a visual editor open would open that file, but not send focus to the document within.", "createdAt": "2020-07-31T21:51:57Z", "url": "https://github.com/rstudio/rstudio/pull/7506", "merged": true, "mergeCommit": {"oid": "1755e471d0ad4fce5d7bbb09a62a653913a8c799"}, "closed": true, "closedAt": "2020-08-03T19:46:52Z", "author": {"login": "kevinushey"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc6cCUjAFqTQ1OTUwOTQyOQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc7VfhXgH2gAyNDYwNTQ3NzU1OmY1ODE2YjNmMzk2MDEwNjk2MmI3NmI2OGYyZWEzZTIwMTUwOWE0ZWE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5NTA5NDI5", "url": "https://github.com/rstudio/rstudio/pull/7506#pullrequestreview-459509429", "createdAt": "2020-07-31T22:33:34Z", "commit": {"oid": "66cec22c35f0eee23e53d908ae93d1975076d007"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQyMjozMzozNFrOG6Ylyw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQyMjozMzozNFrOG6Ylyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzg3MzQ4Mw==", "bodyText": "isVisualModeActivated() is a logical state (should it be active) whereas the actual load state (and presence of the panmirror_ member variable that you access in focus()) is different (i.e. it could be logically \"activated\" but still in the process of loading, so panmirror_ is null). I think you probably want to wrap this call in ensureVisualModeActive().", "url": "https://github.com/rstudio/rstudio/pull/7506#discussion_r463873483", "createdAt": "2020-07-31T22:33:34Z", "author": {"login": "jjallaire"}, "path": "src/gwt/src/org/rstudio/studio/client/workbench/views/source/editors/text/TextEditingTarget.java", "diffHunk": "@@ -2456,7 +2471,14 @@ public void execute() {\n \n    public void focus()\n    {\n-      view_.editorContainer().focus();\n+      if (isVisualModeActivated())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "66cec22c35f0eee23e53d908ae93d1975076d007"}, "originalPosition": 27}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "07d321f3ba90dfc59c1201761c8c45023fd25719", "author": {"user": {"login": "kevinushey", "name": "Kevin Ushey"}}, "url": "https://github.com/rstudio/rstudio/commit/07d321f3ba90dfc59c1201761c8c45023fd25719", "committedDate": "2020-08-03T17:04:10Z", "message": "delegate focus requests to panmirror when visual mode active"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "66cec22c35f0eee23e53d908ae93d1975076d007", "author": {"user": {"login": "kevinushey", "name": "Kevin Ushey"}}, "url": "https://github.com/rstudio/rstudio/commit/66cec22c35f0eee23e53d908ae93d1975076d007", "committedDate": "2020-07-31T21:51:17Z", "message": "delegate focus requests to panmirror when visual mode active"}, "afterCommit": {"oid": "07d321f3ba90dfc59c1201761c8c45023fd25719", "author": {"user": {"login": "kevinushey", "name": "Kevin Ushey"}}, "url": "https://github.com/rstudio/rstudio/commit/07d321f3ba90dfc59c1201761c8c45023fd25719", "committedDate": "2020-08-03T17:04:10Z", "message": "delegate focus requests to panmirror when visual mode active"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "95d2aa8ec62b793db66b4a831dcc8041c1c9d8dc", "author": {"user": {"login": "kevinushey", "name": "Kevin Ushey"}}, "url": "https://github.com/rstudio/rstudio/commit/95d2aa8ec62b793db66b4a831dcc8041c1c9d8dc", "committedDate": "2020-08-03T17:25:04Z", "message": "add 'withActivatedVisualEditor()' helper for focus"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c43c8c62604b7a15f5401488154bb13bb641a474", "author": {"user": {"login": "kevinushey", "name": "Kevin Ushey"}}, "url": "https://github.com/rstudio/rstudio/commit/c43c8c62604b7a15f5401488154bb13bb641a474", "committedDate": "2020-08-03T17:23:28Z", "message": "add 'withActivatedVisualEditor()' helper for focus"}, "afterCommit": {"oid": "95d2aa8ec62b793db66b4a831dcc8041c1c9d8dc", "author": {"user": {"login": "kevinushey", "name": "Kevin Ushey"}}, "url": "https://github.com/rstudio/rstudio/commit/95d2aa8ec62b793db66b4a831dcc8041c1c9d8dc", "committedDate": "2020-08-03T17:25:04Z", "message": "add 'withActivatedVisualEditor()' helper for focus"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f5816b3f3960106962b76b68f2ea3e201509a4ea", "author": {"user": {"login": "kevinushey", "name": "Kevin Ushey"}}, "url": "https://github.com/rstudio/rstudio/commit/f5816b3f3960106962b76b68f2ea3e201509a4ea", "committedDate": "2020-08-03T17:30:03Z", "message": "re-use existing helpers"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 43, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}