{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY5ODM3NTM2", "number": 6133, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QyMDoyMToyMVrODcw3lA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QyMDoyNToyNFrODcw8NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxNDg3MzgwOnYy", "diffSide": "RIGHT", "path": "src/gwt/src/org/rstudio/core/client/command/ShortcutManager.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QyMDoyMToyMVrOFk-tYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQwMDoxODo0M1rOFlEdbg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDMyMDQ4Mg==", "bodyText": "I think that it should be clearer whether we're at leaf node in the shortcut tree (i.e. if you have a shortcut that uses C-X as a prefix, C-X should show that it's putting us in pending mode rather than reporting C-X as totally unbound)", "url": "https://github.com/rstudio/rstudio/pull/6133#discussion_r374320482", "createdAt": "2020-02-03T20:21:21Z", "author": {"login": "jmcphers"}, "path": "src/gwt/src/org/rstudio/core/client/command/ShortcutManager.java", "diffHunk": "@@ -528,10 +529,11 @@ else if (binding.getId() == \"closeSourceDoc\")\n             }\n             \n             event.stopPropagation();\n-            binding.execute();\n+            if (!reportShortcutBinding(binding.getId()))\n+               binding.execute();\n             return true;\n          }\n-         \n+         reportShortcutBinding(\"Shortcut not bound\"); \n          if (map.isPrefix(keyBuffer_))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dae26480afa76f6638755f1c4d69238472b11cf2"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDQxNDcwMg==", "bodyText": "Good idea, now implemented.", "url": "https://github.com/rstudio/rstudio/pull/6133#discussion_r374414702", "createdAt": "2020-02-04T00:18:43Z", "author": {"login": "gtritchie"}, "path": "src/gwt/src/org/rstudio/core/client/command/ShortcutManager.java", "diffHunk": "@@ -528,10 +529,11 @@ else if (binding.getId() == \"closeSourceDoc\")\n             }\n             \n             event.stopPropagation();\n-            binding.execute();\n+            if (!reportShortcutBinding(binding.getId()))\n+               binding.execute();\n             return true;\n          }\n-         \n+         reportShortcutBinding(\"Shortcut not bound\"); \n          if (map.isPrefix(keyBuffer_))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDMyMDQ4Mg=="}, "originalCommit": {"oid": "dae26480afa76f6638755f1c4d69238472b11cf2"}, "originalPosition": 37}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxNDg4NTY1OnYy", "diffSide": "RIGHT", "path": "src/gwt/src/org/rstudio/core/client/command/ShortcutManager.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QyMDoyNToyNFrOFk-0tw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQwMDoxOToyOFrOFlEeRw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDMyMjM1OQ==", "bodyText": "When unchecked, checkable menu items look exactly like regular menu items so I don't think most people will know the first time that they invoke this mode that they need to go back to the menu to turn it off.\nI think that this should either be (a) self-cancelling (it just reports one shortcut and quits) or advertise a way to quit in the message itself (a special shortcut or a reference to the menu item).", "url": "https://github.com/rstudio/rstudio/pull/6133#discussion_r374322359", "createdAt": "2020-02-03T20:25:24Z", "author": {"login": "jmcphers"}, "path": "src/gwt/src/org/rstudio/core/client/command/ShortcutManager.java", "diffHunk": "@@ -718,6 +720,18 @@ public final boolean isIgnoredKeyCombination(KeyCombination keys)\n       return ignoredKeys_.isIgnoredKeyCombination(keys);\n    }\n    \n+   public void setReportShortcutBinding(boolean report)\n+   {\n+      reportShortcutBinding_ = report;\n+   }\n+\n+   private boolean reportShortcutBinding(String message)\n+   {\n+      if (reportShortcutBinding_)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dae26480afa76f6638755f1c4d69238472b11cf2"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDQxNDkxOQ==", "bodyText": "Good point, switched to a regular menu item, and rely on closing the MessageBar to turn off this mode (and mention that in the initial MessageBar text shown when activating this mode).", "url": "https://github.com/rstudio/rstudio/pull/6133#discussion_r374414919", "createdAt": "2020-02-04T00:19:28Z", "author": {"login": "gtritchie"}, "path": "src/gwt/src/org/rstudio/core/client/command/ShortcutManager.java", "diffHunk": "@@ -718,6 +720,18 @@ public final boolean isIgnoredKeyCombination(KeyCombination keys)\n       return ignoredKeys_.isIgnoredKeyCombination(keys);\n    }\n    \n+   public void setReportShortcutBinding(boolean report)\n+   {\n+      reportShortcutBinding_ = report;\n+   }\n+\n+   private boolean reportShortcutBinding(String message)\n+   {\n+      if (reportShortcutBinding_)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDMyMjM1OQ=="}, "originalCommit": {"oid": "dae26480afa76f6638755f1c4d69238472b11cf2"}, "originalPosition": 51}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4036, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}