{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk1ODQ3MjYy", "number": 6554, "title": "Switch away from Jobs pane after successful package installation", "bodyText": "This change returns the user to the Console pane after implicit dependency installation in the Jobs tab (see associated issue for justification).\nFixes #6535", "createdAt": "2020-03-30T19:19:47Z", "url": "https://github.com/rstudio/rstudio/pull/6554", "merged": true, "mergeCommit": {"oid": "c6379561cf0cde3d2a228612ee7bb43001985f86"}, "closed": true, "closedAt": "2020-03-30T20:57:02Z", "author": {"login": "jmcphers"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcS00QyAFqTM4NDIxODU3NQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcS0-swAFqTM4NDIyNjM4MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0MjE4NTc1", "url": "https://github.com/rstudio/rstudio/pull/6554#pullrequestreview-384218575", "createdAt": "2020-03-30T20:48:37Z", "commit": {"oid": "cf7dbd6953960e22eba47a8af88d9c79389e2c0d"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQyMDo0ODozN1rOF97n8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQyMDo0ODozN1rOF97n8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDQ4NDMzOQ==", "bodyText": "Nit: is this white space intentional?", "url": "https://github.com/rstudio/rstudio/pull/6554#discussion_r400484339", "createdAt": "2020-03-30T20:48:37Z", "author": {"login": "melissa-barca"}, "path": "src/gwt/src/org/rstudio/studio/client/common/dependencies/DependencyManager.java", "diffHunk": "@@ -984,11 +1000,15 @@ public void onResponseReceived(String jobId)\n                   \n                   if (update.job.state == JobConstants.STATE_SUCCEEDED)\n                   {\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cf7dbd6953960e22eba47a8af88d9c79389e2c0d"}, "originalPosition": 34}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3e97a4d91562198af73fc1c7dc5027f314e9c099", "author": {"user": {"login": "jmcphers", "name": "Jonathan"}}, "url": "https://github.com/rstudio/rstudio/commit/3e97a4d91562198af73fc1c7dc5027f314e9c099", "committedDate": "2020-03-30T20:56:14Z", "message": "switch away from jobs pane after pkg installation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cf7dbd6953960e22eba47a8af88d9c79389e2c0d", "author": {"user": {"login": "jmcphers", "name": "Jonathan"}}, "url": "https://github.com/rstudio/rstudio/commit/cf7dbd6953960e22eba47a8af88d9c79389e2c0d", "committedDate": "2020-03-30T19:16:55Z", "message": "switch away from jobs pane after pkg installation"}, "afterCommit": {"oid": "3e97a4d91562198af73fc1c7dc5027f314e9c099", "author": {"user": {"login": "jmcphers", "name": "Jonathan"}}, "url": "https://github.com/rstudio/rstudio/commit/3e97a4d91562198af73fc1c7dc5027f314e9c099", "committedDate": "2020-03-30T20:56:14Z", "message": "switch away from jobs pane after pkg installation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0MjI2Mzgx", "url": "https://github.com/rstudio/rstudio/pull/6554#pullrequestreview-384226381", "createdAt": "2020-03-30T21:00:15Z", "commit": {"oid": "3e97a4d91562198af73fc1c7dc5027f314e9c099"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQyMTowMDoxNlrOF98AfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQyMTowMDoxNlrOF98AfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDQ5MDYyMQ==", "bodyText": "IMHO we should only do this if the Jobs tab is open and currently focused; otherwise we might steal focus from a user who's now working in the IDE on other stuff while installation goes on.", "url": "https://github.com/rstudio/rstudio/pull/6554#discussion_r400490621", "createdAt": "2020-03-30T21:00:16Z", "author": {"login": "kevinushey"}, "path": "src/gwt/src/org/rstudio/studio/client/common/dependencies/DependencyManager.java", "diffHunk": "@@ -966,6 +967,21 @@ private void installDependencies(final String context,\n                                     final boolean silentEmbeddedUpdate,\n                                     final CommandWithArg<Boolean> onComplete)\n    {\n+    \n+      // Command to run when dependency installation is complete\n+      CommandWithArg<Boolean> onCompletion = satisfied ->\n+      {\n+         // Confirmed: dependencies are in place. Switch\n+         // away from the Jobs tab to put the user back in\n+         // context.\n+         if (satisfied)\n+         {\n+            events_.fireEvent(new ConsoleActivateEvent(false));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3e97a4d91562198af73fc1c7dc5027f314e9c099"}, "originalPosition": 30}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 310, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}