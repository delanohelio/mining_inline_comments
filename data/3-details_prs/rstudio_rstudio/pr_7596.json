{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY4OTIwNzAz", "number": 7596, "title": "Scroll to a specified position in an unknown file", "bodyText": "Intent\nThe goal of this PR is to enhance rstudioapi with a call to scroll to a line in the current editor without stealing the cursor's position. It closes pro issue 1850 (rstudio/rstudio-pro#1850). The associated API PR is found here: rstudio/rstudioapi#187.\nApproach\nrstudioapi::navigateToFile is enhanced to make the file argument optional so that when a file is not provided, the IDE scrolls to the requested position in the file of the most recently used source window. If no arguments are provided to the call, then it does nothing.\nRather than modifying the existing logic in the JumpToFunction EventHandler I added a new event ScrollToPosition to fire from the handler when a file name isn't provided. The previous logic executes a fair amount of code to see if the file is opened and open it if not. We could have this logic eventually call ScrollToPosition after the file logic but the same effect is gained from a one line call to another method so it's not needed.\nQA Notes\nYou'll need to install the most recent version of rstudioapi for this to work. I've been doing this by typing the following in the console:\ninstall.packages(\"githubinstall\")\ngithubinstall::gh_install_packages(\"rstudio/rstudioapi\")\n\nThen you can try calling rstudioapi::navigateToFile with and without a file and with/without a moveCursor.", "createdAt": "2020-08-17T15:59:46Z", "url": "https://github.com/rstudio/rstudio/pull/7596", "merged": true, "mergeCommit": {"oid": "b134c4b11e8ad527356990767fb2c9707acd4530"}, "closed": true, "closedAt": "2020-08-19T14:28:46Z", "author": {"login": "melissa-barca"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc-RHkBAH2gAyNDY4OTIwNzAzOmVlZTgxOTJmOGE4NTJkOWFjMjg0ODFiZjUyYTRmNGQyNzNlZDg2NjM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc_5fsVgH2gAyNDY4OTIwNzAzOjVhZTg3YTUwM2VjNzBiZDkyMGQ0ZDBmNjY3NzgzZjJiNjlmNjZkNGU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "eee8192f8a852d9ac28481bf52a4f4d273ed8663", "author": {"user": {"login": "melissa-barca", "name": "Melissa Barca"}}, "url": "https://github.com/rstudio/rstudio/commit/eee8192f8a852d9ac28481bf52a4f4d273ed8663", "committedDate": "2020-08-12T20:06:02Z", "message": "when rstudioapi::navigateToFile is called without a file, scroll to the\nline in the currently open file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2377d488f3b224d1a284dac40c59c4a7aa21e777", "author": {"user": {"login": "melissa-barca", "name": "Melissa Barca"}}, "url": "https://github.com/rstudio/rstudio/commit/2377d488f3b224d1a284dac40c59c4a7aa21e777", "committedDate": "2020-08-12T22:38:45Z", "message": "implement rstudioapi::navigateToFile for satellite windows"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d251fa5ad970fe63469e87667c5c7d32ee1c20db", "author": {"user": {"login": "melissa-barca", "name": "Melissa Barca"}}, "url": "https://github.com/rstudio/rstudio/commit/d251fa5ad970fe63469e87667c5c7d32ee1c20db", "committedDate": "2020-08-13T15:13:21Z", "message": "prevent event from being fired infinietly"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5380606fde18c3d97b05270e6fdbcafa2e563652", "author": {"user": {"login": "melissa-barca", "name": "Melissa Barca"}}, "url": "https://github.com/rstudio/rstudio/commit/5380606fde18c3d97b05270e6fdbcafa2e563652", "committedDate": "2020-08-14T16:50:08Z", "message": "remove unused variable"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bdf94052c87d8de2db4dd529a4ee5fe0db6fa7f9", "author": {"user": {"login": "melissa-barca", "name": "Melissa Barca"}}, "url": "https://github.com/rstudio/rstudio/commit/bdf94052c87d8de2db4dd529a4ee5fe0db6fa7f9", "committedDate": "2020-08-14T22:58:27Z", "message": "implement moveCursor flag on rstudioapi::navigateToFile. Replace navigateToFileWithoutFocus by\nadding a boolean to the already existing navigateToFile call."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bf47cead21f9e7493b149c9df473be488e0151ec", "author": {"user": {"login": "melissa-barca", "name": "Melissa Barca"}}, "url": "https://github.com/rstudio/rstudio/commit/bf47cead21f9e7493b149c9df473be488e0151ec", "committedDate": "2020-08-14T23:00:49Z", "message": "fix spacing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5e087dd0b676832a546dc952e68f4efdff7a63cb", "author": {"user": {"login": "melissa-barca", "name": "Melissa Barca"}}, "url": "https://github.com/rstudio/rstudio/commit/5e087dd0b676832a546dc952e68f4efdff7a63cb", "committedDate": "2020-08-17T16:00:58Z", "message": "clean up checks to see if null is passed"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY4NjgxOTUz", "url": "https://github.com/rstudio/rstudio/pull/7596#pullrequestreview-468681953", "createdAt": "2020-08-17T17:34:56Z", "commit": {"oid": "5e087dd0b676832a546dc952e68f4efdff7a63cb"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxNzozNDo1N1rOHBzTZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxNzozNDo1N1rOHBzTZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTY1MTE3Mg==", "bodyText": "nit: use <- for assignment", "url": "https://github.com/rstudio/rstudio/pull/7596#discussion_r471651172", "createdAt": "2020-08-17T17:34:57Z", "author": {"login": "kevinushey"}, "path": "src/cpp/r/R/Api.R", "diffHunk": "@@ -213,12 +213,16 @@\n    invisible(.Call(\"rs_sourceMarkers\", name, markers, basePath, autoSelect, PACKAGE = \"(embedding)\"))\n })\n \n-.rs.addApiFunction(\"navigateToFile\", function(filePath, line = 1L, col = 1L) {\n+.rs.addApiFunction(\"navigateToFile\", function(filePath = character(0),\n+                                              line = 1L,\n+                                              col = 1L,\n+                                              moveCursor = TRUE) {\n    # validate file argument\n-   if (!is.character(filePath)) {\n+   hasFile = !is.null(filePath) && length(filePath) > 0", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5e087dd0b676832a546dc952e68f4efdff7a63cb"}, "originalPosition": 11}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5ae87a503ec70bd920d4d0f667783f2b69f66d4e", "author": {"user": {"login": "melissa-barca", "name": "Melissa Barca"}}, "url": "https://github.com/rstudio/rstudio/commit/5ae87a503ec70bd920d4d0f667783f2b69f66d4e", "committedDate": "2020-08-17T21:42:31Z", "message": "prefer <- over ="}}]}}}, "rateLimit": {"limit": 5000, "remaining": 55, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}