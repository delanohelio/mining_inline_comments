{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY1MjI1NDEz", "number": 7558, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQwMzozOToxNFrOEXCrow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQwMzozOToxNFrOEXCrow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyNTk2NjQzOnYy", "diffSide": "RIGHT", "path": "src/gwt/src/org/rstudio/core/client/AnsiCode.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQwMzozOToxNFrOG-nPFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQwMzo1NTozN1rOG-nerA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODMwNzczNA==", "bodyText": "Totally up to you but I find these statements easier to read without the negation (i.e. if (inverted_) { ... )", "url": "https://github.com/rstudio/rstudio/pull/7558#discussion_r468307734", "createdAt": "2020-08-11T03:39:14Z", "author": {"login": "jmcphers"}, "path": "src/gwt/src/org/rstudio/core/client/AnsiCode.java", "diffHunk": "@@ -421,25 +467,45 @@ else if (codeVal == STRIKETHROUGH_OFF)\n          }\n          else if (Color.isFgColorCode(codeVal))\n          {\n-            currentColor_.setCode(codeVal);\n-            resetForeground();\n-            clazzes_.add(clazzForColor(codeVal));\n+            if (!inverted_)\n+               setForegroundColor(codeVal);\n+            else\n+               setBackgroundColor(Color.fgToBgColor(codeVal));\n          }\n          else if (Color.isBgColorCode(codeVal))\n          {\n-            currentBgColor_ = new Color(false, codeVal);\n-            resetBackground();\n-            clazzes_.add(clazzForBgColor(codeVal));\n+            if (!inverted_)\n+               setBackgroundColor(codeVal);\n+            else\n+               setForegroundColor(Color.bgToFgColor(codeVal));\n          }\n          else if (codeVal == RESET_FOREGROUND)\n          {\n-            currentColor_.reset();\n-            resetForeground();\n+            if (!inverted_)\n+            {\n+               currentColor_.reset();\n+               resetForeground();\n+            }\n+            else\n+            {\n+               currentBgColor_.reset();\n+               resetBackground();\n+               clazzes_.add(INVERSE_BG_STYLE);\n+            }\n          }\n          else if (codeVal == RESET_BACKGROUND)\n          {\n-            currentBgColor_.reset();\n-            resetBackground();\n+            if (!inverted_)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c156281381c1edfe674ad356bbdaae6856aa2c66"}, "originalPosition": 309}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODMxMTcyNA==", "bodyText": "I actually had it that way originally but I  kept misreading it (my brain was expecting the \u201cnormal\u201d case to be first, it seemed).", "url": "https://github.com/rstudio/rstudio/pull/7558#discussion_r468311724", "createdAt": "2020-08-11T03:55:37Z", "author": {"login": "gtritchie"}, "path": "src/gwt/src/org/rstudio/core/client/AnsiCode.java", "diffHunk": "@@ -421,25 +467,45 @@ else if (codeVal == STRIKETHROUGH_OFF)\n          }\n          else if (Color.isFgColorCode(codeVal))\n          {\n-            currentColor_.setCode(codeVal);\n-            resetForeground();\n-            clazzes_.add(clazzForColor(codeVal));\n+            if (!inverted_)\n+               setForegroundColor(codeVal);\n+            else\n+               setBackgroundColor(Color.fgToBgColor(codeVal));\n          }\n          else if (Color.isBgColorCode(codeVal))\n          {\n-            currentBgColor_ = new Color(false, codeVal);\n-            resetBackground();\n-            clazzes_.add(clazzForBgColor(codeVal));\n+            if (!inverted_)\n+               setBackgroundColor(codeVal);\n+            else\n+               setForegroundColor(Color.bgToFgColor(codeVal));\n          }\n          else if (codeVal == RESET_FOREGROUND)\n          {\n-            currentColor_.reset();\n-            resetForeground();\n+            if (!inverted_)\n+            {\n+               currentColor_.reset();\n+               resetForeground();\n+            }\n+            else\n+            {\n+               currentBgColor_.reset();\n+               resetBackground();\n+               clazzes_.add(INVERSE_BG_STYLE);\n+            }\n          }\n          else if (codeVal == RESET_BACKGROUND)\n          {\n-            currentBgColor_.reset();\n-            resetBackground();\n+            if (!inverted_)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODMwNzczNA=="}, "originalCommit": {"oid": "c156281381c1edfe674ad356bbdaae6856aa2c66"}, "originalPosition": 309}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4261, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}