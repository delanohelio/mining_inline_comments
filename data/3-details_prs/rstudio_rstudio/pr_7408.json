{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU0NzEwNjc0", "number": 7408, "title": "Use F6 to Navigate Between Panels", "bodyText": "Closes #6882\nImplements F6 to cycle between panels. To handle additional source columns I needed to fix and issue where source columns were being displayed directly through their SourcePane rather than from a LogicalWindow containing the SourcePane like how the main column is displayed.\nI added a setFocus method to WorkbenchTab and implemented it for all classes implementing it. This method gets called when focus is requested to that pane. Discussed with Gary that ideally setting focus to a pane would be smart so that it returned to the last element that had focus in that pane, this is a first pass that assigns a default focus to each pane.", "createdAt": "2020-07-21T19:48:42Z", "url": "https://github.com/rstudio/rstudio/pull/7408", "merged": true, "mergeCommit": {"oid": "709e52c654849f35ce593f44128620ae3d06f95d"}, "closed": true, "closedAt": "2020-07-24T19:29:05Z", "author": {"login": "melissa-barca"}, "timelineItems": {"totalCount": 34, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc1TS9_gH2gAyNDU0NzEwNjc0OmVkZDgyMjllYTY3YjdkMGU1YTNhYzMwYjYxZGQ3ZWJmYjFlYmI0ZTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc4JMfnAH2gAyNDU0NzEwNjc0OjBhZWMxNTM3NjgyOTdjMGM0Y2JmZjYxY2JkYjYxNWJlZGZmOTRkNTU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "edd8229ea67b7d0e5a3ac30b61dd7ebfb1ebb4e5", "author": {"user": {"login": "melissa-barca", "name": "Melissa Barca"}}, "url": "https://github.com/rstudio/rstudio/commit/edd8229ea67b7d0e5a3ac30b61dd7ebfb1ebb4e5", "committedDate": "2020-07-15T23:32:59Z", "message": "determine next tab and select on F6"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2c3aadf2175d5cbe3781b90a365c74c9f488c3c5", "author": {"user": {"login": "melissa-barca", "name": "Melissa Barca"}}, "url": "https://github.com/rstudio/rstudio/commit/2c3aadf2175d5cbe3781b90a365c74c9f488c3c5", "committedDate": "2020-07-17T00:41:08Z", "message": "add setFocus() call to WorkbenchTab so every tab can be focused"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e361d9770a6bd2c0b4b2c507dfd3debb5669dfd", "author": {"user": {"login": "melissa-barca", "name": "Melissa Barca"}}, "url": "https://github.com/rstudio/rstudio/commit/2e361d9770a6bd2c0b4b2c507dfd3debb5669dfd", "committedDate": "2020-07-17T00:41:42Z", "message": "Merge branch 'master' of https://github.com/rstudio/rstudio into feature/cycle-panes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d9a6a4719e4df445df585e7e4c9814823859077c", "author": {"user": {"login": "melissa-barca", "name": "Melissa Barca"}}, "url": "https://github.com/rstudio/rstudio/commit/d9a6a4719e4df445df585e7e4c9814823859077c", "committedDate": "2020-07-17T01:56:59Z", "message": "focus column on F6"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f8acd3d76bc48bf3a3651005a7c3f16e7e5cd7e", "author": {"user": {"login": "melissa-barca", "name": "Melissa Barca"}}, "url": "https://github.com/rstudio/rstudio/commit/7f8acd3d76bc48bf3a3651005a7c3f16e7e5cd7e", "committedDate": "2020-07-17T19:04:27Z", "message": "always put main source column at beginning of list"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5c0e31e9e5773e7496138d75313499c7585386a7", "author": {"user": {"login": "melissa-barca", "name": "Melissa Barca"}}, "url": "https://github.com/rstudio/rstudio/commit/5c0e31e9e5773e7496138d75313499c7585386a7", "committedDate": "2020-07-17T19:16:04Z", "message": "allow active editor to be set to the first editor when not explicitly specified"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1a6ea58349195452567647612cff49bbe7e84d0f", "author": {"user": {"login": "melissa-barca", "name": "Melissa Barca"}}, "url": "https://github.com/rstudio/rstudio/commit/1a6ea58349195452567647612cff49bbe7e84d0f", "committedDate": "2020-07-17T22:05:22Z", "message": "display source columns within their logical windows rather than directly in the source pane"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ab94800f78ae071b7447f96a91333b02b7958eef", "author": {"user": {"login": "melissa-barca", "name": "Melissa Barca"}}, "url": "https://github.com/rstudio/rstudio/commit/ab94800f78ae071b7447f96a91333b02b7958eef", "committedDate": "2020-07-17T22:47:23Z", "message": "set focus for files pane"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "46f368815d083079947e8199f2eb167a1f1c082e", "author": {"user": {"login": "melissa-barca", "name": "Melissa Barca"}}, "url": "https://github.com/rstudio/rstudio/commit/46f368815d083079947e8199f2eb167a1f1c082e", "committedDate": "2020-07-17T23:01:28Z", "message": "implement setFocus for help pane"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9866cc367c98ecfcb919cabea4884cb5ac40496f", "author": {"user": {"login": "melissa-barca", "name": "Melissa Barca"}}, "url": "https://github.com/rstudio/rstudio/commit/9866cc367c98ecfcb919cabea4884cb5ac40496f", "committedDate": "2020-07-18T00:35:30Z", "message": "implement setFocus() for the jobs pane and ensure a tab is visible before showing it"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "591ea607a3eba9bd29c32a5265bad308984fb1d2", "author": {"user": {"login": "melissa-barca", "name": "Melissa Barca"}}, "url": "https://github.com/rstudio/rstudio/commit/591ea607a3eba9bd29c32a5265bad308984fb1d2", "committedDate": "2020-07-18T00:42:03Z", "message": "remove repetitive functions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "426a2138d0674a4c32b0412dd031fdcacc6db126", "author": {"user": {"login": "melissa-barca", "name": "Melissa Barca"}}, "url": "https://github.com/rstudio/rstudio/commit/426a2138d0674a4c32b0412dd031fdcacc6db126", "committedDate": "2020-07-18T00:45:13Z", "message": "implement setFocus for find output"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "21913942640ff56120130e27c0def54d90c58780", "author": {"user": {"login": "melissa-barca", "name": "Melissa Barca"}}, "url": "https://github.com/rstudio/rstudio/commit/21913942640ff56120130e27c0def54d90c58780", "committedDate": "2020-07-20T20:53:33Z", "message": "implement setFocus for viewer and plots panes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed96201bfc974134b0ff0a3bff8e5937ee3349d7", "author": {"user": {"login": "melissa-barca", "name": "Melissa Barca"}}, "url": "https://github.com/rstudio/rstudio/commit/ed96201bfc974134b0ff0a3bff8e5937ee3349d7", "committedDate": "2020-07-20T22:00:28Z", "message": "implement setFocus for SVN and tutorial panes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0bc803b2b66f89403137bec86e480463d2efd8c0", "author": {"user": {"login": "melissa-barca", "name": "Melissa Barca"}}, "url": "https://github.com/rstudio/rstudio/commit/0bc803b2b66f89403137bec86e480463d2efd8c0", "committedDate": "2020-07-20T22:16:39Z", "message": "implement setFocus for packages and presentation panes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "722dc9a4f80954f0b21cb1a3af0589b0b7ecd84f", "author": {"user": {"login": "melissa-barca", "name": "Melissa Barca"}}, "url": "https://github.com/rstudio/rstudio/commit/722dc9a4f80954f0b21cb1a3af0589b0b7ecd84f", "committedDate": "2020-07-21T17:04:23Z", "message": "implement setFocus for build and markers output panes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f231a6fe981859309b95a10e670c011fcd09d28", "author": {"user": {"login": "melissa-barca", "name": "Melissa Barca"}}, "url": "https://github.com/rstudio/rstudio/commit/2f231a6fe981859309b95a10e670c011fcd09d28", "committedDate": "2020-07-21T17:44:20Z", "message": "implement setFocus for compile output and source cpp panes.\nUpdate setFocus for build pane to focus on compile panel."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "73fdb55b65576730f7de1a0d5850d0b6f689f3ce", "author": {"user": {"login": "melissa-barca", "name": "Melissa Barca"}}, "url": "https://github.com/rstudio/rstudio/commit/73fdb55b65576730f7de1a0d5850d0b6f689f3ce", "committedDate": "2020-07-21T19:25:05Z", "message": "set focus for SQL Results"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyODcxOTQy", "url": "https://github.com/rstudio/rstudio/pull/7408#pullrequestreview-452871942", "createdAt": "2020-07-21T22:24:07Z", "commit": {"oid": "73fdb55b65576730f7de1a0d5850d0b6f689f3ce"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQyMjoyNDowN1rOG1L9pg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQyMjozMTozNlrOG1MJsw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODQyMzcxOA==", "bodyText": "Maybe simplify to return normal_.equals(window.normal_)?", "url": "https://github.com/rstudio/rstudio/pull/7408#discussion_r458423718", "createdAt": "2020-07-21T22:24:07Z", "author": {"login": "jmcphers"}, "path": "src/gwt/src/org/rstudio/core/client/layout/LogicalWindow.java", "diffHunk": "@@ -125,6 +125,13 @@ public WindowState getState()\n       return state_;\n    }\n \n+   public boolean equals(LogicalWindow window)\n+   {\n+      if(normal_.equals(window.normal_))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "73fdb55b65576730f7de1a0d5850d0b6f689f3ce"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODQyNDI3Nw==", "bodyText": "This should be getValue() (getGlobalValue() ignores project values, which is technically irrelevant for this option now but could change in the near future)", "url": "https://github.com/rstudio/rstudio/pull/7408#discussion_r458424277", "createdAt": "2020-07-21T22:25:25Z", "author": {"login": "jmcphers"}, "path": "src/gwt/src/org/rstudio/studio/client/workbench/ui/PaneManager.java", "diffHunk": "@@ -289,10 +287,20 @@ public PaneManager(Provider<MainSplitPanel> pSplitPanel,\n \n       //\u00a0get the widgets for the extra source columns to be displayed\n       ArrayList<Widget> sourceColumns = new ArrayList<>();\n-      if (sourceColumnManager_.getSize() > 1 && additionalSourceCount_ > 0)\n+      additionalSourceCount_ = userPrefs_.panes().getGlobalValue().getAdditionalSourceColumns();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "73fdb55b65576730f7de1a0d5850d0b6f689f3ce"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODQyNDU1NA==", "bodyText": "Nit: Use StringUtil.equal to compare strings", "url": "https://github.com/rstudio/rstudio/pull/7408#discussion_r458424554", "createdAt": "2020-07-21T22:26:09Z", "author": {"login": "jmcphers"}, "path": "src/gwt/src/org/rstudio/studio/client/workbench/ui/PaneManager.java", "diffHunk": "@@ -579,6 +593,71 @@ public void onFocusCenterSeparator()\n       panel_.focusSplitter();\n    }\n \n+   @Handler\n+   public void onFocusNextPane()\n+   {\n+      // get the name of the currently focused pane\n+      LogicalWindow currentFocus = getActiveLogicalWindow();\n+      String nextFocusName = null;\n+      if (currentFocus != null)\n+      {\n+         String currentName = currentFocus.getNormal().getName();\n+         if (currentFocus.getNormal().getName() == \"TabSet2\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "73fdb55b65576730f7de1a0d5850d0b6f689f3ce"}, "originalPosition": 68}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODQyNTY1OA==", "bodyText": "Should this do something? (Set focus to the widget hosting the jobs list?)", "url": "https://github.com/rstudio/rstudio/pull/7408#discussion_r458425658", "createdAt": "2020-07-21T22:28:44Z", "author": {"login": "jmcphers"}, "path": "src/gwt/src/org/rstudio/studio/client/workbench/views/jobs/view/JobsDisplayImpl.java", "diffHunk": "@@ -217,6 +217,11 @@ public void onSelected()\n    {\n    }\n    \n+   @Override\n+   public void setFocus()\n+   {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "73fdb55b65576730f7de1a0d5850d0b6f689f3ce"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODQyNjgwMw==", "bodyText": "There's a repeated pattern here where we set focus to what (presumably) is the first focusable command/button. I worry a little that this is going to be tricky to maintain, because if you permute the order of the commands you're going to wind up making F6 sending command to some random place in the middle, and you won't notice unless you happen to test F6. I wonder if we should have a method which performs a heuristic instead to find the first focusable element? (Gary might also have some thoughts on the best rules by which to select an element for focus)", "url": "https://github.com/rstudio/rstudio/pull/7408#discussion_r458426803", "createdAt": "2020-07-21T22:31:36Z", "author": {"login": "jmcphers"}, "path": "src/gwt/src/org/rstudio/studio/client/workbench/views/presentation/PresentationPane.java", "diffHunk": "@@ -295,7 +295,12 @@ public void hideBusy()\n       refreshButton_.setVisible(true);\n       progressButton_.setVisible(false);\n    }\n-   \n+\n+   @Override\n+   public void setFocus()\n+   {\n+      slideNavigationMenu_.focus();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "73fdb55b65576730f7de1a0d5850d0b6f689f3ce"}, "originalPosition": 9}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e3efccbe171de1e87301f7f45f3b0b92b6feeb4", "author": {"user": {"login": "melissa-barca", "name": "Melissa Barca"}}, "url": "https://github.com/rstudio/rstudio/commit/2e3efccbe171de1e87301f7f45f3b0b92b6feeb4", "committedDate": "2020-07-21T23:10:39Z", "message": "code clean up"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "abaaf0f7cec656445090e8f3add5fb77e7a70b38", "author": {"user": {"login": "melissa-barca", "name": "Melissa Barca"}}, "url": "https://github.com/rstudio/rstudio/commit/abaaf0f7cec656445090e8f3add5fb77e7a70b38", "committedDate": "2020-07-21T23:17:04Z", "message": "implement setFocus on JobsDisplayImpl"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c9d61668555d7cbbbf2ce09248e45866fa5f601d", "author": {"user": {"login": "melissa-barca", "name": "Melissa Barca"}}, "url": "https://github.com/rstudio/rstudio/commit/c9d61668555d7cbbbf2ce09248e45866fa5f601d", "committedDate": "2020-07-22T18:28:01Z", "message": "make ModalDialogBase method 'getFocusableElements()' generic and move to DomUtils, add generic\nsetFocus method to WorkbenchPane to focus on the first focusable element in the pane."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dfbcade317c31b47f50338bb543310b0d738545d", "author": {"user": {"login": "melissa-barca", "name": "Melissa Barca"}}, "url": "https://github.com/rstudio/rstudio/commit/dfbcade317c31b47f50338bb543310b0d738545d", "committedDate": "2020-07-22T19:05:21Z", "message": "remove specific setFocus methods from classes that didn't already have focus specified"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3c7b47b6c85c2b4b449d907b74cd06470b12ac70", "author": {"user": {"login": "melissa-barca", "name": "Melissa Barca"}}, "url": "https://github.com/rstudio/rstudio/commit/3c7b47b6c85c2b4b449d907b74cd06470b12ac70", "committedDate": "2020-07-22T20:49:19Z", "message": "manually add focus-visible attribute to element"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dc30077b653b5f6169614ac23490ed18be65dd31", "author": {"user": {"login": "melissa-barca", "name": "Melissa Barca"}}, "url": "https://github.com/rstudio/rstudio/commit/dc30077b653b5f6169614ac23490ed18be65dd31", "committedDate": "2020-07-22T20:54:36Z", "message": "restore method that should not have been removed"}, "afterCommit": {"oid": "3c7b47b6c85c2b4b449d907b74cd06470b12ac70", "author": {"user": {"login": "melissa-barca", "name": "Melissa Barca"}}, "url": "https://github.com/rstudio/rstudio/commit/3c7b47b6c85c2b4b449d907b74cd06470b12ac70", "committedDate": "2020-07-22T20:49:19Z", "message": "manually add focus-visible attribute to element"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "426c3eb886d00a0176e456521d1e49e3c96ebe2f", "author": {"user": {"login": "melissa-barca", "name": "Melissa Barca"}}, "url": "https://github.com/rstudio/rstudio/commit/426c3eb886d00a0176e456521d1e49e3c96ebe2f", "committedDate": "2020-07-22T21:21:12Z", "message": "add setFocus to HistoryPane"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU0NDUxNjc1", "url": "https://github.com/rstudio/rstudio/pull/7408#pullrequestreview-454451675", "createdAt": "2020-07-23T19:58:02Z", "commit": {"oid": "426c3eb886d00a0176e456521d1e49e3c96ebe2f"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxOTo1ODowM1rOG2ZdqQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxOTo1ODowM1rOG2ZdqQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTY5MzQ4MQ==", "bodyText": "Should this send focus to the xterm.js instance? (cc @gtritchie)", "url": "https://github.com/rstudio/rstudio/pull/7408#discussion_r459693481", "createdAt": "2020-07-23T19:58:03Z", "author": {"login": "jmcphers"}, "path": "src/gwt/src/org/rstudio/studio/client/workbench/views/terminal/TerminalPane.java", "diffHunk": "@@ -232,6 +232,11 @@ public void onSelected()\n       }\n    }\n \n+   @Override\n+   public void setFocus()\n+   {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "426c3eb886d00a0176e456521d1e49e3c96ebe2f"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU0NTg5NzQx", "url": "https://github.com/rstudio/rstudio/pull/7408#pullrequestreview-454589741", "createdAt": "2020-07-24T01:15:50Z", "commit": {"oid": "426c3eb886d00a0176e456521d1e49e3c96ebe2f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQwMToxNTo1MFrOG2gj-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQwNDoyMDoyOFrOG2iuCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTgwOTc4Ng==", "bodyText": "We should also have a focusPreviousPane command with shortcut of Shift+F6; this is a common convention (apps that support F6 for moving between panes also generally support Shift+F6 for going backwards), mirroring Tab and Shift+Tab for general focus navigation.\nI'd be fine with you opening a separate issue tracking that if you want to focus (no pun intended) on getting this PR in first.", "url": "https://github.com/rstudio/rstudio/pull/7408#discussion_r459809786", "createdAt": "2020-07-24T01:15:50Z", "author": {"login": "gtritchie"}, "path": "src/gwt/src/org/rstudio/studio/client/workbench/commands/Commands.cmd.xml", "diffHunk": "@@ -885,6 +886,7 @@ well as menu structures (for main menu and popup menus).\n          <shortcut refid=\"focusConsoleOutputEnd\" value=\"Ctrl+Alt+2\" if=\"org.rstudio.core.client.BrowseCap.isMacintosh()\"/>\n          <shortcut refid=\"focusConsoleOutputEnd\" value=\"Alt+Shift+2\" if=\"!org.rstudio.core.client.BrowseCap.isMacintosh()\"/>\n          <shortcut refid=\"focusConsoleOutputEnd\" value=\"Ctrl+`\"/>\n+         <shortcut refid=\"focusNextPane\" value=\"F6\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "426c3eb886d00a0176e456521d1e49e3c96ebe2f"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTgxMjQ3MQ==", "bodyText": "Why use a FocusPanel here? Doing so creates an extra focusable element so when Tabbing through there is an extra stop, and it doesn't have a meaningful accessible description nor obvious purpose.", "url": "https://github.com/rstudio/rstudio/pull/7408#discussion_r459812471", "createdAt": "2020-07-24T01:28:37Z", "author": {"login": "gtritchie"}, "path": "src/gwt/src/org/rstudio/core/client/files/filedialog/PathBreadcrumbWidget.java", "diffHunk": "@@ -57,8 +57,7 @@ public PathBreadcrumbWidget(FileSystemContext context)\n       panel_.setSize(\"100%\", \"100%\");\n       panel_.add(pathPanel_);\n \n-      outer_ = new SimplePanel();\n-      outer_.setWidget(panel_);\n+      outer_ = new FocusPanel(panel_);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "426c3eb886d00a0176e456521d1e49e3c96ebe2f"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTgxMjg3Ng==", "bodyText": "This is unused and can be remove; it is currently invoked by FilePathToolbar.focus, but that is not invoked by anything and should also be removed.", "url": "https://github.com/rstudio/rstudio/pull/7408#discussion_r459812876", "createdAt": "2020-07-24T01:30:27Z", "author": {"login": "gtritchie"}, "path": "src/gwt/src/org/rstudio/core/client/files/filedialog/PathBreadcrumbWidget.java", "diffHunk": "@@ -150,6 +149,11 @@ public void setDirectory(FileSystemItem[] pathElements,\n       onWidthsChanged();\n    }\n \n+   public void focus()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "426c3eb886d00a0176e456521d1e49e3c96ebe2f"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTgxMzEwNA==", "bodyText": "This seems to be unused and unnecessary.", "url": "https://github.com/rstudio/rstudio/pull/7408#discussion_r459813104", "createdAt": "2020-07-24T01:31:30Z", "author": {"login": "gtritchie"}, "path": "src/gwt/src/org/rstudio/studio/client/workbench/views/files/ui/FilePathToolbar.java", "diffHunk": "@@ -179,6 +179,11 @@ public void onResize()\n          ((RequiresResize)getWidget()).onResize();\n    }\n \n+   public void focus()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "426c3eb886d00a0176e456521d1e49e3c96ebe2f"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTgxNDQyNg==", "bodyText": "This is unused and can be removed.", "url": "https://github.com/rstudio/rstudio/pull/7408#discussion_r459814426", "createdAt": "2020-07-24T01:37:57Z", "author": {"login": "gtritchie"}, "path": "src/gwt/src/org/rstudio/studio/client/common/compile/CompilePanel.java", "diffHunk": "@@ -189,7 +188,12 @@ public HasClickHandlers stopButton()\n    {\n       return stopButton_;\n    }\n-   \n+\n+   public void focus()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "426c3eb886d00a0176e456521d1e49e3c96ebe2f"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTgxNTI3Nw==", "bodyText": "Don't see purpose of using a FocusPanel here.", "url": "https://github.com/rstudio/rstudio/pull/7408#discussion_r459815277", "createdAt": "2020-07-24T01:42:13Z", "author": {"login": "gtritchie"}, "path": "src/gwt/src/org/rstudio/studio/client/common/compile/CompilePanel.java", "diffHunk": "@@ -44,7 +44,7 @@ public CompilePanel()\n    public CompilePanel(CompileOutputDisplay outputDisplay)\n    {\n       \n-      panel_ = new SimplePanel();\n+      panel_ = new FocusPanel();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "426c3eb886d00a0176e456521d1e49e3c96ebe2f"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTgxNTM4NA==", "bodyText": "This is unused and can be deleted.", "url": "https://github.com/rstudio/rstudio/pull/7408#discussion_r459815384", "createdAt": "2020-07-24T01:42:50Z", "author": {"login": "gtritchie"}, "path": "src/gwt/src/org/rstudio/studio/client/common/presentation/SlideNavigationToolbarMenu.java", "diffHunk": "@@ -135,7 +135,12 @@ public HasClickHandlers getEditButton()\n    {\n       return editButton_;\n    }\n-   \n+\n+   public void focus()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "426c3eb886d00a0176e456521d1e49e3c96ebe2f"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTgzMzA3Mg==", "bodyText": "Why was this necessary? I'm familiar with the polyfill we use that keys off this classname, but in general it should handle this by itself. Is there an example I can look at where adding this manually was needed?", "url": "https://github.com/rstudio/rstudio/pull/7408#discussion_r459833072", "createdAt": "2020-07-24T03:13:08Z", "author": {"login": "gtritchie"}, "path": "src/gwt/src/org/rstudio/studio/client/workbench/ui/WorkbenchPane.java", "diffHunk": "@@ -57,6 +62,21 @@ public void onSelected()\n    {\n    }\n \n+   @Override\n+   public void setFocus()\n+   {\n+      ArrayList<Element> focusableElements = DomUtils.getFocusableElements(getElement());\n+      if (!focusableElements.isEmpty())\n+      {\n+         Element el = focusableElements.get(0);\n+         el.focus();\n+         el.addClassName(\"focus-visible\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "426c3eb886d00a0176e456521d1e49e3c96ebe2f"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTgzMzQ2OA==", "bodyText": "Addition of this member variable looks unnecessary, and can be un-done I think?", "url": "https://github.com/rstudio/rstudio/pull/7408#discussion_r459833468", "createdAt": "2020-07-24T03:15:16Z", "author": {"login": "gtritchie"}, "path": "src/gwt/src/org/rstudio/studio/client/workbench/views/connections/ui/ConnectionsPane.java", "diffHunk": "@@ -474,7 +474,8 @@ private void installConnectionsToolbar()\n    {\n       toolbar_.removeAllWidgets();\n       \n-      toolbar_.addLeftWidget(commands_.newConnection().createToolbarButton());\n+      newConnectionButton_ =", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "426c3eb886d00a0176e456521d1e49e3c96ebe2f"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTgzMzc5Ng==", "bodyText": "No reason for this to be a member variable, looks like all the changes in this source file are not necessary.", "url": "https://github.com/rstudio/rstudio/pull/7408#discussion_r459833796", "createdAt": "2020-07-24T03:17:12Z", "author": {"login": "gtritchie"}, "path": "src/gwt/src/org/rstudio/studio/client/workbench/views/environment/EnvironmentPane.java", "diffHunk": "@@ -217,7 +217,7 @@ private void initSecondaryToolbar()\n       ThemeStyles styles = ThemeStyles.INSTANCE;\n       toolbar.getWrapper().addStyleName(styles.tallerToolbarWrapper());\n       \n-      SearchWidget searchWidget = new SearchWidget(\"Search environment\", new SuggestOracle() {\n+      searchWidget_ = new SearchWidget(\"Search environment\", new SuggestOracle() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "426c3eb886d00a0176e456521d1e49e3c96ebe2f"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTgzNTQ0OQ==", "bodyText": "Note you will need to implement this in the Pro repo in LauncherJobsPaneWidgetsPro.java.", "url": "https://github.com/rstudio/rstudio/pull/7408#discussion_r459835449", "createdAt": "2020-07-24T03:26:06Z", "author": {"login": "gtritchie"}, "path": "src/gwt/src/org/rstudio/studio/client/workbench/views/jobs/view/LauncherJobsPaneWidgets.java", "diffHunk": "@@ -50,7 +50,12 @@ public void installMainToolbar()\n    public void removeProgressWidget()\n    {\n    }\n-   \n+\n+   @Override", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "426c3eb886d00a0176e456521d1e49e3c96ebe2f"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTgzNTk5Ng==", "bodyText": "Don't need this installButton_ member variable at all.", "url": "https://github.com/rstudio/rstudio/pull/7408#discussion_r459835996", "createdAt": "2020-07-24T03:29:22Z", "author": {"login": "gtritchie"}, "path": "src/gwt/src/org/rstudio/studio/client/workbench/views/packages/PackagesPane.java", "diffHunk": "@@ -195,7 +195,7 @@ protected Toolbar createMainToolbar()\n       Toolbar toolbar = new Toolbar(\"Packages Tab\");\n      \n       // install packages\n-      toolbar.addLeftWidget(commands_.installPackage().createToolbarButton());\n+      toolbar.addLeftWidget(installButton_ = commands_.installPackage().createToolbarButton());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "426c3eb886d00a0176e456521d1e49e3c96ebe2f"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTgzNjU1Ng==", "bodyText": "This is never called. Can revert all the changes in this source file.", "url": "https://github.com/rstudio/rstudio/pull/7408#discussion_r459836556", "createdAt": "2020-07-24T03:32:26Z", "author": {"login": "gtritchie"}, "path": "src/gwt/src/org/rstudio/studio/client/workbench/views/plots/ui/PlotsToolbar.java", "diffHunk": "@@ -47,7 +47,12 @@ public void removeCustomToolbar()\n       removeAllWidgets();\n       installStandardUI();\n    }\n-   \n+\n+   public void focus()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "426c3eb886d00a0176e456521d1e49e3c96ebe2f"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTgzOTM1NQ==", "bodyText": "Should this send focus to the xterm.js instance? (cc @gtritchie)\n\nActually the Terminal pane is \"special\" and handles focus in its own way (see setFocusOnVisible() which is invoked in many locations) so having this empty override is actually the safest thing to do here.\nI would add a comment in this empty method saying something like \"Terminal pane automatically directs focus to xterm.js so this method intentionally left blank\".", "url": "https://github.com/rstudio/rstudio/pull/7408#discussion_r459839355", "createdAt": "2020-07-24T03:47:54Z", "author": {"login": "gtritchie"}, "path": "src/gwt/src/org/rstudio/studio/client/workbench/views/terminal/TerminalPane.java", "diffHunk": "@@ -232,6 +232,11 @@ public void onSelected()\n       }\n    }\n \n+   @Override\n+   public void setFocus()\n+   {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTY5MzQ4MQ=="}, "originalCommit": {"oid": "426c3eb886d00a0176e456521d1e49e3c96ebe2f"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTgzOTQzMg==", "bodyText": "Don't need the added homeButton_ member variable.", "url": "https://github.com/rstudio/rstudio/pull/7408#discussion_r459839432", "createdAt": "2020-07-24T03:48:27Z", "author": {"login": "gtritchie"}, "path": "src/gwt/src/org/rstudio/studio/client/workbench/views/tutorial/TutorialPane.java", "diffHunk": "@@ -116,7 +117,8 @@ protected Toolbar createMainToolbar()\n       // toolbar_.addLeftWidget(commands_.tutorialBack().createToolbarButton());\n       // toolbar_.addLeftWidget(commands_.tutorialForward().createToolbarButton());\n       \n-      toolbar_.addLeftWidget(commands_.tutorialHome().createToolbarButton());\n+      toolbar_.addLeftWidget(homeButton_ =", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "426c3eb886d00a0176e456521d1e49e3c96ebe2f"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTgzOTU4MA==", "bodyText": "Don't need the added diffButton_ member variable.", "url": "https://github.com/rstudio/rstudio/pull/7408#discussion_r459839580", "createdAt": "2020-07-24T03:49:13Z", "author": {"login": "gtritchie"}, "path": "src/gwt/src/org/rstudio/studio/client/workbench/views/vcs/git/GitPane.java", "diffHunk": "@@ -127,7 +127,7 @@ protected Toolbar createMainToolbar()\n       pullMoreMenu.addItem(commands_.vcsPullRebase().createMenuItem(false));\n \n       Toolbar toolbar = new Toolbar(\"Git Tab\");\n-      toolbar.addLeftWidget(commands_.vcsDiff().createToolbarButton());\n+      toolbar.addLeftWidget(diffButton_ = commands_.vcsDiff().createToolbarButton());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "426c3eb886d00a0176e456521d1e49e3c96ebe2f"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTgzOTYzNg==", "bodyText": "Don't need the added diffButton_ member variable.", "url": "https://github.com/rstudio/rstudio/pull/7408#discussion_r459839636", "createdAt": "2020-07-24T03:49:37Z", "author": {"login": "gtritchie"}, "path": "src/gwt/src/org/rstudio/studio/client/workbench/views/vcs/svn/SVNPane.java", "diffHunk": "@@ -61,7 +61,7 @@ protected Toolbar createMainToolbar()\n    {\n       Toolbar toolbar = new Toolbar(\"SVN Tab\");\n \n-      toolbar.addLeftWidget(commands_.vcsDiff().createToolbarButton());\n+      toolbar.addLeftWidget(diffButton_ = commands_.vcsDiff().createToolbarButton());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "426c3eb886d00a0176e456521d1e49e3c96ebe2f"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTg0MTQ1OA==", "bodyText": "This pane (when nothing has been loaded in it) has no focusable controls (all the buttons are disabled). So it actually acts as a \"trap\" and F6 refuses to go to it, staying stuck on the previous pane.\nSimplest fix might be to make the \"clear\" button always enabled, and just be a no-op if there's nothing to clear. Then you don't need any of this logic involving zoomButton_ or clearAllButton_ and the default behavior will handle it for you. That is, don't need a setFocus() override at all or the new member variables.", "url": "https://github.com/rstudio/rstudio/pull/7408#discussion_r459841458", "createdAt": "2020-07-24T04:00:01Z", "author": {"login": "gtritchie"}, "path": "src/gwt/src/org/rstudio/studio/client/workbench/views/viewer/ViewerPane.java", "diffHunk": "@@ -280,7 +280,16 @@ public void onResize()\n       \n       publishButton_.setShowCaption(width > 500);\n    }\n-   \n+\n+   @Override\n+   public void setFocus()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "426c3eb886d00a0176e456521d1e49e3c96ebe2f"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTg0NTEzMQ==", "bodyText": "Several tab types in the Source panel don't yet handle focus and prevent F6 from moving to that panel when they are selected.\n\nprofile results (ProfilerEditingTarget)\nUrlContentEditingTarget (execute data() in the console)\nDataEditingTarget (execute View(mtcars) in console)\nObjectExplorerEditingTarget (execute View(list(\"a\" = 1.2, \"b\" = TRUE, \"c\" = 3:10)) in console)\n\nFine with you opening a separate issue on this and looking into it later.", "url": "https://github.com/rstudio/rstudio/pull/7408#discussion_r459845131", "createdAt": "2020-07-24T04:20:28Z", "author": {"login": "gtritchie"}, "path": "src/gwt/src/org/rstudio/studio/client/workbench/ui/PaneManager.java", "diffHunk": "@@ -579,6 +593,71 @@ public void onFocusCenterSeparator()\n       panel_.focusSplitter();\n    }\n \n+   @Handler\n+   public void onFocusNextPane()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "426c3eb886d00a0176e456521d1e49e3c96ebe2f"}, "originalPosition": 60}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a3a9379fed8a64672197ff7d780e683c7384fe4e", "author": {"user": {"login": "melissa-barca", "name": "Melissa Barca"}}, "url": "https://github.com/rstudio/rstudio/commit/a3a9379fed8a64672197ff7d780e683c7384fe4e", "committedDate": "2020-07-24T17:11:32Z", "message": "revert unused changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "be74d396ad9eae26f4b74c022a182c4a4e391772", "author": {"user": {"login": "melissa-barca", "name": "Melissa Barca"}}, "url": "https://github.com/rstudio/rstudio/commit/be74d396ad9eae26f4b74c022a182c4a4e391772", "committedDate": "2020-07-24T17:11:38Z", "message": "add comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "844978c030514fd4f3a14bf45fcc20e574d13a93", "author": {"user": {"login": "melissa-barca", "name": "Melissa Barca"}}, "url": "https://github.com/rstudio/rstudio/commit/844978c030514fd4f3a14bf45fcc20e574d13a93", "committedDate": "2020-07-24T17:12:07Z", "message": "prevent focusNextPane from getting trapped when there is nothing displayed in the Viewer Pane"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1MDgwODY2", "url": "https://github.com/rstudio/rstudio/pull/7408#pullrequestreview-455080866", "createdAt": "2020-07-24T17:56:31Z", "commit": {"oid": "844978c030514fd4f3a14bf45fcc20e574d13a93"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "98a98ddbba350625890d7f104006c25315704c51", "author": {"user": {"login": "melissa-barca", "name": "Melissa Barca"}}, "url": "https://github.com/rstudio/rstudio/commit/98a98ddbba350625890d7f104006c25315704c51", "committedDate": "2020-07-24T18:43:05Z", "message": "Update NEWS.md"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0aec153768297c0c4cbff61cbdb615bedff94d55", "author": {"user": {"login": "melissa-barca", "name": "Melissa Barca"}}, "url": "https://github.com/rstudio/rstudio/commit/0aec153768297c0c4cbff61cbdb615bedff94d55", "committedDate": "2020-07-24T19:28:38Z", "message": "Merge branches 'feature/cycle-panes' and 'master' of https://github.com/rstudio/rstudio into feature/cycle-panes\n\n\u0001 Conflicts:\n\u0001\tsrc/gwt/src/org/rstudio/studio/client/workbench/ui/PaneManager.java"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 135, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}