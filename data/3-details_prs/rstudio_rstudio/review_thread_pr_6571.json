{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk3MjYwNjgz", "number": 6571, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQyMzoxNDoxMlrODtvS6g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQyMzoxNDoxMlrODtvS6g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5Mjg3NDAyOnYy", "diffSide": "RIGHT", "path": "src/cpp/desktop/DesktopMain.cpp", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQyMzoxNDoxMlrOF_V6cw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQyMzoxNjo1N1rOF_V94Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTk2MzYzNQ==", "bodyText": "Does inferDefaultRenderingEngine only get called on Linux?", "url": "https://github.com/rstudio/rstudio/pull/6571#discussion_r401963635", "createdAt": "2020-04-01T23:14:12Z", "author": {"login": "jmcphers"}, "path": "src/cpp/desktop/DesktopMain.cpp", "diffHunk": "@@ -376,6 +376,32 @@ QString inferDefaultRenderingEngine()\n \n QString inferDefaultRenderingEngine()\n {\n+   // disable opengl when using nouveau drivers, as a large number\n+   // of users have reported crashes when attempting to do so.\n+   //\n+   // NOTE: we'll currently assume this is fixed in the next Qt\n+   // update, so guard only for older Qt for now\n+   //\n+   // https://github.com/rstudio/rstudio/issues/3781\n+   // https://bugreports.qt.io/browse/QTBUG-73715\n+#if QT_VERSION < QT_VERSION_CHECK(5, 13, 0)\n+   core::system::ProcessResult result;\n+   Error error = core::system::runCommand(\n+            \"lspci -mkv | grep -q 'Driver:[[:space:]]*nouveau'\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4d8f1b47dd876c2ff5bb2601761fcf512fef19c3"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTk2NDUxMw==", "bodyText": "Each platform gets its own version of this routine (for the three desktop platforms we support). I should probably make this more clear, though.", "url": "https://github.com/rstudio/rstudio/pull/6571#discussion_r401964513", "createdAt": "2020-04-01T23:16:57Z", "author": {"login": "kevinushey"}, "path": "src/cpp/desktop/DesktopMain.cpp", "diffHunk": "@@ -376,6 +376,32 @@ QString inferDefaultRenderingEngine()\n \n QString inferDefaultRenderingEngine()\n {\n+   // disable opengl when using nouveau drivers, as a large number\n+   // of users have reported crashes when attempting to do so.\n+   //\n+   // NOTE: we'll currently assume this is fixed in the next Qt\n+   // update, so guard only for older Qt for now\n+   //\n+   // https://github.com/rstudio/rstudio/issues/3781\n+   // https://bugreports.qt.io/browse/QTBUG-73715\n+#if QT_VERSION < QT_VERSION_CHECK(5, 13, 0)\n+   core::system::ProcessResult result;\n+   Error error = core::system::runCommand(\n+            \"lspci -mkv | grep -q 'Driver:[[:space:]]*nouveau'\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTk2MzYzNQ=="}, "originalCommit": {"oid": "4d8f1b47dd876c2ff5bb2601761fcf512fef19c3"}, "originalPosition": 15}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4013, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}