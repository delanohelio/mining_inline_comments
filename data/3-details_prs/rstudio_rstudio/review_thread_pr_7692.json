{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc2NTU4Njcx", "number": 7692, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQyMDoxMzozOVrOEfECZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQyMDoxMzozOVrOEfECZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAxMDA3NDYyOnYy", "diffSide": "RIGHT", "path": "src/gwt/src/org/rstudio/studio/client/workbench/views/environment/EnvironmentPresenter.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQyMDoxMzozOVrOHLGkbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQyMDoxMzozOVrOHLGkbw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTQwNDAxNQ==", "bodyText": "It seems like the behavior on error here is that we don't save the workspace at all, which seems wrong. Could we use the previous behavior (save.image) if we can't determine whether or not the function is masked?", "url": "https://github.com/rstudio/rstudio/pull/7692#discussion_r481404015", "createdAt": "2020-09-01T20:13:39Z", "author": {"login": "jmcphers"}, "path": "src/gwt/src/org/rstudio/studio/client/workbench/views/environment/EnvironmentPresenter.java", "diffHunk": "@@ -443,10 +439,24 @@ void onSaveWorkspace()\n    {\n       view_.bringToFront();\n \n-      consoleDispatcher_.saveFileAsThenExecuteCommand(\"Save Workspace As\",\n-                                                      \".RData\",\n-                                                      true,\n-                                                      \"save.image\");\n+      server_.isFunctionMasked(\n+            \"save.image\",\n+            \"base\",\n+            new ErrorLoggingServerRequestCallback<Boolean>()\n+            {\n+               public void onResponseReceived(Boolean isMasked)\n+               {\n+                  String code = isMasked\n+                        ? \"base::save.image\"\n+                        : \"save.image\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1dbef1ecc5e8efe0d3191bda82a8cc7fb0b69041"}, "originalPosition": 41}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4278, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}