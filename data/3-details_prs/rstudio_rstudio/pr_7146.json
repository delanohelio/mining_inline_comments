{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM1MzY4MTE4", "number": 7146, "title": "reenable legacy spellchecker due to blacklisted dictionaries", "bodyText": "I had forgotten that I changed the manual spellchecker to also use Typo.js when I had to blacklist some dictionaries and that broke manual spellchecking for those dictionaries entirely. Bringing back the old CPP Hunspell until we can fix 6116.\nFixes #7018", "createdAt": "2020-06-16T17:38:39Z", "url": "https://github.com/rstudio/rstudio/pull/7146", "merged": true, "mergeCommit": {"oid": "95b5ada64d87bb676b524970d0052222525afab0"}, "closed": true, "closedAt": "2020-06-16T21:56:52Z", "author": {"login": "adamconroy"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcr4zNxgH2gAyNDM1MzY4MTE4OjFhMWE2NTc1NzRkNjIxYzA5YzZiNWM3ZjZjNWYxYTQyNjc5OGFlNTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcr8bj5AFqTQzMTkxNjkxMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1a1a657574d621c09c6b5c7f6c5f1a426798ae59", "author": {"user": {"login": "adamconroy", "name": null}}, "url": "https://github.com/rstudio/rstudio/commit/1a1a657574d621c09c6b5c7f6c5f1a426798ae59", "committedDate": "2020-06-16T17:35:27Z", "message": "reenable legacy spellchecker due to blacklisted dictionaries"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxNzY4ODE5", "url": "https://github.com/rstudio/rstudio/pull/7146#pullrequestreview-431768819", "createdAt": "2020-06-16T18:11:52Z", "commit": {"oid": "1a1a657574d621c09c6b5c7f6c5f1a426798ae59"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxODoxMTo1MlrOGknXLQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxODoxMzozNVrOGkna1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA0NjgyOQ==", "bodyText": "Nit: brace style", "url": "https://github.com/rstudio/rstudio/pull/7146#discussion_r441046829", "createdAt": "2020-06-16T18:11:52Z", "author": {"login": "jmcphers"}, "path": "src/gwt/src/org/rstudio/studio/client/common/spelling/TypoSpellChecker.java", "diffHunk": "@@ -274,6 +275,15 @@ private boolean checkCustomDicts(String word)\n \n    public void checkSpelling(List<String> words, final ServerRequestCallback<SpellCheckerResult> callback)\n    {\n+      // If realtime is turned off call the backend spellchecker because we haven't loaded a\n+      // dictionary on the frontend. Ideally we DO load the frontend dictionary but currently\n+      // Typo.js isn't compatible with some of our dictionaries (see: TypoSpellChecker.realtimeBlacklist)\n+      // so we need to keep the legacy call for now.\n+      if (!userPrefs_.realTimeSpellchecking().getValue()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a1a657574d621c09c6b5c7f6c5f1a426798ae59"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA0Nzc2Nw==", "bodyText": "Could you use parens to group this so it's clear that the intent is to group the first two tests? (presuming that's the intent -- this isn't clear to me at first glance)", "url": "https://github.com/rstudio/rstudio/pull/7146#discussion_r441047767", "createdAt": "2020-06-16T18:13:35Z", "author": {"login": "jmcphers"}, "path": "src/gwt/src/org/rstudio/studio/client/common/spelling/TypoSpellChecker.java", "diffHunk": "@@ -372,7 +382,7 @@ private void loadDictionary()\n    {\n       final String language = userPrefs_.spellingDictionaryLanguage().getValue();\n \n-      if (typoLoaded_ && loadedDict_.equals(language))\n+      if (!userPrefs_.realTimeSpellchecking().getValue() || typoLoaded_ && loadedDict_.equals(language))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a1a657574d621c09c6b5c7f6c5f1a426798ae59"}, "originalPosition": 29}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "95d717009e281c7255d6185548438751badfeea6", "author": {"user": {"login": "adamconroy", "name": null}}, "url": "https://github.com/rstudio/rstudio/commit/95d717009e281c7255d6185548438751badfeea6", "committedDate": "2020-06-16T21:47:59Z", "message": "pr feedback"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxOTE2OTEw", "url": "https://github.com/rstudio/rstudio/pull/7146#pullrequestreview-431916910", "createdAt": "2020-06-16T21:49:14Z", "commit": {"oid": "95d717009e281c7255d6185548438751badfeea6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 198, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}