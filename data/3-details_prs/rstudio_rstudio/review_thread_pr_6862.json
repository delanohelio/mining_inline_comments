{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE3MDIzMTE4", "number": 6862, "reviewThreads": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMTo0MDoxMVrOD9j8VQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxODoyMzoyM1rOD-VoYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1ODc4NjEzOnYy", "diffSide": "RIGHT", "path": "src/cpp/session/modules/SessionObjectExplorer.R", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMTo0MDoxMVrOGXIZaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMjozMjo0M1rOGXJnKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjkwODAwOQ==", "bodyText": "Nit: typo (byd)", "url": "https://github.com/rstudio/rstudio/pull/6862#discussion_r426908009", "createdAt": "2020-05-18T21:40:11Z", "author": {"login": "jmcphers"}, "path": "src/cpp/session/modules/SessionObjectExplorer.R", "diffHunk": "@@ -952,21 +1176,25 @@\n    format(object.size(object), units = \"auto\")\n })\n \n-# Utility Functions ----\n-\n-.rs.addFunction(\"getRefCount\", function(object)\n+.rs.addFunction(\"explorer.isPythonObjectExpandable\", function(object)\n {\n-   .Call(\"rs_getRefCount\",\n-         as.name(\"object\"),\n-         environment(),\n-         PACKAGE = \"(embedding)\")\n-})\n-\n-.rs.addFunction(\"setRefCount\", function(object, count)\n-{\n-   .Call(\"rs_setRefCount\",\n-         as.name(\"object\"),\n-         environment(),\n-         as.integer(count),\n-         PACKAGE = \"(embedding)\")\n-})\n+   # NOTE: technically, these objects are expandable (they have attributes\n+   # and may even have methods of interest) but since they're usually less\n+   # interesting than the object's actual value we ignore those byd default.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "90b072efdc8dcd35a0437845e05b3f4ed7f9c39e"}, "originalPosition": 468}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjkyNzkxMw==", "bodyText": "Thanks for catching that! Fixed now.", "url": "https://github.com/rstudio/rstudio/pull/6862#discussion_r426927913", "createdAt": "2020-05-18T22:32:43Z", "author": {"login": "kevinushey"}, "path": "src/cpp/session/modules/SessionObjectExplorer.R", "diffHunk": "@@ -952,21 +1176,25 @@\n    format(object.size(object), units = \"auto\")\n })\n \n-# Utility Functions ----\n-\n-.rs.addFunction(\"getRefCount\", function(object)\n+.rs.addFunction(\"explorer.isPythonObjectExpandable\", function(object)\n {\n-   .Call(\"rs_getRefCount\",\n-         as.name(\"object\"),\n-         environment(),\n-         PACKAGE = \"(embedding)\")\n-})\n-\n-.rs.addFunction(\"setRefCount\", function(object, count)\n-{\n-   .Call(\"rs_setRefCount\",\n-         as.name(\"object\"),\n-         environment(),\n-         as.integer(count),\n-         PACKAGE = \"(embedding)\")\n-})\n+   # NOTE: technically, these objects are expandable (they have attributes\n+   # and may even have methods of interest) but since they're usually less\n+   # interesting than the object's actual value we ignore those byd default.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjkwODAwOQ=="}, "originalCommit": {"oid": "90b072efdc8dcd35a0437845e05b3f4ed7f9c39e"}, "originalPosition": 468}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1ODc5MzUyOnYy", "diffSide": "RIGHT", "path": "src/cpp/session/modules/SessionReticulate.cpp", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMTo0Mjo1MlrOGXIeBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMjozMzoyMFrOGXJn-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjkwOTE5MQ==", "bodyText": "Is this called a lot? (if so wondering if it'd be better to detect python initialization eagerly instead of recomputing it on every call when uninitialized)", "url": "https://github.com/rstudio/rstudio/pull/6862#discussion_r426909191", "createdAt": "2020-05-18T21:42:52Z", "author": {"login": "jmcphers"}, "path": "src/cpp/session/modules/SessionReticulate.cpp", "diffHunk": "@@ -56,6 +56,27 @@ void onDeferredInit(bool)\n }\n \n } // end anonymous namespace\n+\n+bool isPythonInitialized()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "90b072efdc8dcd35a0437845e05b3f4ed7f9c39e"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjkyODEyMA==", "bodyText": "It currently doesn't, but since we do get notified when Python is initialized by reticulate we can just use that to set and store a flag rather than making this a more expensive call. I've made that change.", "url": "https://github.com/rstudio/rstudio/pull/6862#discussion_r426928120", "createdAt": "2020-05-18T22:33:20Z", "author": {"login": "kevinushey"}, "path": "src/cpp/session/modules/SessionReticulate.cpp", "diffHunk": "@@ -56,6 +56,27 @@ void onDeferredInit(bool)\n }\n \n } // end anonymous namespace\n+\n+bool isPythonInitialized()", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjkwOTE5MQ=="}, "originalCommit": {"oid": "90b072efdc8dcd35a0437845e05b3f4ed7f9c39e"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1ODgwMjc3OnYy", "diffSide": "RIGHT", "path": "src/cpp/session/modules/environment/SessionEnvironment.cpp", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMTo0Njo0OFrOGXIj8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMjozMzo0N1rOGXJodg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjkxMDcwNw==", "bodyText": "Since this is a plain string value, maybe dump a log entry if it's something other than the values we expect? (realize it's totally impossible for it to get into that state now...)", "url": "https://github.com/rstudio/rstudio/pull/6862#discussion_r426910707", "createdAt": "2020-05-18T21:46:48Z", "author": {"login": "jmcphers"}, "path": "src/cpp/session/modules/environment/SessionEnvironment.cpp", "diffHunk": "@@ -485,9 +493,25 @@ Error setEnvironment(boost::shared_ptr<int> pContextDepth,\n    if (error)\n       return error;\n \n-   error = setEnvironmentName(*pContextDepth,\n-                              *pCurrentContext,\n-                              environmentName);\n+   s_monitoredPythonModule = std::string();\n+   \n+   if (s_environmentLanguage == \"R\")\n+   {\n+      error = setEnvironmentName(*pContextDepth,\n+                                 *pCurrentContext,\n+                                 environmentName);\n+   }\n+   else if (s_environmentLanguage == \"Python\")\n+   {\n+      if (environmentName != s_monitoredPythonModule)\n+      {\n+         s_monitoredPythonModule = environmentName;\n+         \n+         ClientEvent event(client_events::kEnvironmentRefresh);\n+         module_context::enqueClientEvent(event);\n+      }\n+   }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "90b072efdc8dcd35a0437845e05b3f4ed7f9c39e"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjkyODI0Ng==", "bodyText": "Good idea -- I've added a simple warning log message.", "url": "https://github.com/rstudio/rstudio/pull/6862#discussion_r426928246", "createdAt": "2020-05-18T22:33:47Z", "author": {"login": "kevinushey"}, "path": "src/cpp/session/modules/environment/SessionEnvironment.cpp", "diffHunk": "@@ -485,9 +493,25 @@ Error setEnvironment(boost::shared_ptr<int> pContextDepth,\n    if (error)\n       return error;\n \n-   error = setEnvironmentName(*pContextDepth,\n-                              *pCurrentContext,\n-                              environmentName);\n+   s_monitoredPythonModule = std::string();\n+   \n+   if (s_environmentLanguage == \"R\")\n+   {\n+      error = setEnvironmentName(*pContextDepth,\n+                                 *pCurrentContext,\n+                                 environmentName);\n+   }\n+   else if (s_environmentLanguage == \"Python\")\n+   {\n+      if (environmentName != s_monitoredPythonModule)\n+      {\n+         s_monitoredPythonModule = environmentName;\n+         \n+         ClientEvent event(client_events::kEnvironmentRefresh);\n+         module_context::enqueClientEvent(event);\n+      }\n+   }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjkxMDcwNw=="}, "originalCommit": {"oid": "90b072efdc8dcd35a0437845e05b3f4ed7f9c39e"}, "originalPosition": 44}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1ODgwNjMxOnYy", "diffSide": "RIGHT", "path": "src/cpp/session/modules/environment/SessionEnvironment.cpp", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMTo0ODowMlrOGXImFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMjo0MTo1N1rOGXJy-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjkxMTI1NA==", "bodyText": "Does this imply that the Python environment pane does not respect the manual/auto refresh setting? (Should it?)", "url": "https://github.com/rstudio/rstudio/pull/6862#discussion_r426911254", "createdAt": "2020-05-18T21:48:02Z", "author": {"login": "jmcphers"}, "path": "src/cpp/session/modules/environment/SessionEnvironment.cpp", "diffHunk": "@@ -720,25 +772,56 @@ Error setContextDepth(boost::shared_ptr<int> pContextDepth,\n \n Error getEnvironmentState(boost::shared_ptr<int> pContextDepth,\n                           boost::shared_ptr<LineDebugState> pLineDebugState,\n-                          const json::JsonRpcRequest&,\n+                          const json::JsonRpcRequest& request,\n                           json::JsonRpcResponse* pResponse)\n {\n-   pResponse->setResult(commonEnvironmentStateData(*pContextDepth,\n-                                                   true, // include contents\n-                                                   pLineDebugState.get()));\n+   std::string language = \"R\";\n+   std::string environment = \"R_GlobalEnv\";\n+   Error error = json::readParams(request.params, &language, &environment);\n+   if (error)\n+      LOG_ERROR(error);\n+   \n+   json::Object jsonState;\n+   \n+   if (language == \"Python\")\n+   {\n+      jsonState = pythonEnvironmentStateData(environment);\n+   }\n+   else\n+   {\n+      jsonState = commonEnvironmentStateData(\n+               *pContextDepth,\n+               true,\n+               pLineDebugState.get());\n+   }\n+   \n+   pResponse->setResult(jsonState);\n    return Success();\n }\n \n-void onDetectChanges(module_context::ChangeSource source)\n+void onDetectChanges(module_context::ChangeSource /* source */)\n {\n    // Prevent recursive calls to this function\n    DROP_RECURSIVE_CALLS;\n \n+   // Check for Python changes.\n+   if (s_environmentLanguage == \"Python\" && !s_monitoredPythonModule.empty())\n+   {\n+      Error error =\n+            r::exec::RFunction(\".rs.reticulate.detectChanges\")\n+            .addParam(s_monitoredPythonModule)\n+            .call();\n+      \n+      if (error)\n+         LOG_ERROR(error);\n+   }\n+   \n    // Ignore if not monitoring\n    if (!s_monitoring)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "90b072efdc8dcd35a0437845e05b3f4ed7f9c39e"}, "originalPosition": 152}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjkzMDkzOA==", "bodyText": "You're right! I've made that change.", "url": "https://github.com/rstudio/rstudio/pull/6862#discussion_r426930938", "createdAt": "2020-05-18T22:41:57Z", "author": {"login": "kevinushey"}, "path": "src/cpp/session/modules/environment/SessionEnvironment.cpp", "diffHunk": "@@ -720,25 +772,56 @@ Error setContextDepth(boost::shared_ptr<int> pContextDepth,\n \n Error getEnvironmentState(boost::shared_ptr<int> pContextDepth,\n                           boost::shared_ptr<LineDebugState> pLineDebugState,\n-                          const json::JsonRpcRequest&,\n+                          const json::JsonRpcRequest& request,\n                           json::JsonRpcResponse* pResponse)\n {\n-   pResponse->setResult(commonEnvironmentStateData(*pContextDepth,\n-                                                   true, // include contents\n-                                                   pLineDebugState.get()));\n+   std::string language = \"R\";\n+   std::string environment = \"R_GlobalEnv\";\n+   Error error = json::readParams(request.params, &language, &environment);\n+   if (error)\n+      LOG_ERROR(error);\n+   \n+   json::Object jsonState;\n+   \n+   if (language == \"Python\")\n+   {\n+      jsonState = pythonEnvironmentStateData(environment);\n+   }\n+   else\n+   {\n+      jsonState = commonEnvironmentStateData(\n+               *pContextDepth,\n+               true,\n+               pLineDebugState.get());\n+   }\n+   \n+   pResponse->setResult(jsonState);\n    return Success();\n }\n \n-void onDetectChanges(module_context::ChangeSource source)\n+void onDetectChanges(module_context::ChangeSource /* source */)\n {\n    // Prevent recursive calls to this function\n    DROP_RECURSIVE_CALLS;\n \n+   // Check for Python changes.\n+   if (s_environmentLanguage == \"Python\" && !s_monitoredPythonModule.empty())\n+   {\n+      Error error =\n+            r::exec::RFunction(\".rs.reticulate.detectChanges\")\n+            .addParam(s_monitoredPythonModule)\n+            .call();\n+      \n+      if (error)\n+         LOG_ERROR(error);\n+   }\n+   \n    // Ignore if not monitoring\n    if (!s_monitoring)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjkxMTI1NA=="}, "originalCommit": {"oid": "90b072efdc8dcd35a0437845e05b3f4ed7f9c39e"}, "originalPosition": 152}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1ODgxNTA5OnYy", "diffSide": "RIGHT", "path": "src/gwt/src/org/rstudio/studio/client/workbench/views/environment/EnvironmentPane.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMTo1MToyNlrOGXIrmQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMjo0MzowMlrOGXJ0Zw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjkxMjY2NQ==", "bodyText": "Not a checkin blocker, but I wonder if it'd be nicer to show this all the time as a sort of advertisement of what's possible. Attempting to switch modes before Python is initialized could show instructions for enabling the feature (by initializing python or installing the appropriate software). What do you think?", "url": "https://github.com/rstudio/rstudio/pull/6862#discussion_r426912665", "createdAt": "2020-05-18T21:51:26Z", "author": {"login": "jmcphers"}, "path": "src/gwt/src/org/rstudio/studio/client/workbench/views/environment/EnvironmentPane.java", "diffHunk": "@@ -150,9 +170,38 @@ protected Toolbar createMainToolbar()\n \n    @Override\n    protected SecondaryToolbar createSecondaryToolbar()\n+   {\n+      initSecondaryToolbar();\n+      return secondaryToolbar_;\n+   }\n+   \n+   private void initSecondaryToolbar()\n    {\n       SecondaryToolbar toolbar = new SecondaryToolbar(\"Environment Tab Second\");\n       \n+      languageMenu_ = new ToolbarPopupMenu();\n+      \n+      MenuItem rMenuItem = new MenuItem(\"R\", () -> setActiveLanguage(\"R\", true));\n+      languageMenu_.addItem(rMenuItem);\n+      \n+      MenuItem pyMenuItem = new MenuItem(\"Python\", () -> setActiveLanguage(\"Python\", true));\n+      languageMenu_.addItem(pyMenuItem);\n+      \n+      languageButton_ = new ToolbarMenuButton(\n+            \"R\",\n+            ToolbarButton.NoTitle,\n+            (ImageResource) null,\n+            languageMenu_);\n+      \n+      // don't show the language button at first; instead,\n+      // toggle its visibility after the widget is created\n+      // depending on whether Python has been initialized", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "90b072efdc8dcd35a0437845e05b3f4ed7f9c39e"}, "originalPosition": 108}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjkzMTMwMw==", "bodyText": "At first I was opposed, but now I think this is worth doing -- especially so now because the trigger that makes this button visible is non-obvious (reticulate must be loaded and Python must be initialized). I'll make that change.", "url": "https://github.com/rstudio/rstudio/pull/6862#discussion_r426931303", "createdAt": "2020-05-18T22:43:02Z", "author": {"login": "kevinushey"}, "path": "src/gwt/src/org/rstudio/studio/client/workbench/views/environment/EnvironmentPane.java", "diffHunk": "@@ -150,9 +170,38 @@ protected Toolbar createMainToolbar()\n \n    @Override\n    protected SecondaryToolbar createSecondaryToolbar()\n+   {\n+      initSecondaryToolbar();\n+      return secondaryToolbar_;\n+   }\n+   \n+   private void initSecondaryToolbar()\n    {\n       SecondaryToolbar toolbar = new SecondaryToolbar(\"Environment Tab Second\");\n       \n+      languageMenu_ = new ToolbarPopupMenu();\n+      \n+      MenuItem rMenuItem = new MenuItem(\"R\", () -> setActiveLanguage(\"R\", true));\n+      languageMenu_.addItem(rMenuItem);\n+      \n+      MenuItem pyMenuItem = new MenuItem(\"Python\", () -> setActiveLanguage(\"Python\", true));\n+      languageMenu_.addItem(pyMenuItem);\n+      \n+      languageButton_ = new ToolbarMenuButton(\n+            \"R\",\n+            ToolbarButton.NoTitle,\n+            (ImageResource) null,\n+            languageMenu_);\n+      \n+      // don't show the language button at first; instead,\n+      // toggle its visibility after the widget is created\n+      // depending on whether Python has been initialized", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjkxMjY2NQ=="}, "originalCommit": {"oid": "90b072efdc8dcd35a0437845e05b3f4ed7f9c39e"}, "originalPosition": 108}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2Njc2NDcyOnYy", "diffSide": "RIGHT", "path": "src/cpp/session/modules/SessionReticulate.R", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxNzozNzo0NFrOGYWsnA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQyMDowNDo0OFrOGYb5kA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODE5MDg3Ng==", "bodyText": "Do we need to track TODO via a new issue (otherwise our getting back to TODO's is pretty sporadic at best).", "url": "https://github.com/rstudio/rstudio/pull/6862#discussion_r428190876", "createdAt": "2020-05-20T17:37:44Z", "author": {"login": "gtritchie"}, "path": "src/cpp/session/modules/SessionReticulate.R", "diffHunk": "@@ -1411,3 +1462,403 @@ html.heading = _heading\n    else\n       item\n })\n+\n+#    > str(.rs.describeObject(globalenv(), \"a\"))\n+# List of 10\n+#  $ name             : 'rs.scalar' chr \"a\"\n+#  $ type             : 'rs.scalar' chr \"numeric\"\n+#  $ clazz            : chr [1:2] \"numeric\" \"double\"\n+#  $ is_data          : 'rs.scalar' logi FALSE\n+#  $ value            : 'rs.scalar' chr \"1\"\n+#  $ description      : 'rs.scalar' chr \" num 1\"\n+#  $ size             : 'rs.scalar' num 56\n+#  $ length           : 'rs.scalar' int 1\n+#  $ contents         : list()\n+#  $ contents_deferred: 'rs.scalar' logi FALSE\n+.rs.addFunction(\"reticulate.describeObject\", function(name, parent)\n+{\n+   builtins <- reticulate::import_builtins(convert = TRUE)\n+   object <- if (inherits(parent, \"python.builtin.dict\"))\n+      reticulate::py_get_item(parent, name)\n+   else\n+      reticulate::py_get_attr(parent, name)\n+   \n+   # is this object 'data'? consider non-callable, non-module objects as data\n+   isData <- !(\n+      grepl(\"^__.*__$\", name) ||\n+      reticulate:::py_is_callable(object) ||\n+      reticulate:::py_is_module(object)\n+   )\n+   \n+   # TODO: there isn't really a distinction between an objects \"type\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2fb7cad4655db3742265702ec9a532f4f75f2fa8"}, "originalPosition": 165}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODI3NjExMg==", "bodyText": "I've converted this to a NOTE, since it really doesn't represent an actionable item -- it's ultimately just to help anyone reading that bit of code understand some of the decisions made there.", "url": "https://github.com/rstudio/rstudio/pull/6862#discussion_r428276112", "createdAt": "2020-05-20T20:04:48Z", "author": {"login": "kevinushey"}, "path": "src/cpp/session/modules/SessionReticulate.R", "diffHunk": "@@ -1411,3 +1462,403 @@ html.heading = _heading\n    else\n       item\n })\n+\n+#    > str(.rs.describeObject(globalenv(), \"a\"))\n+# List of 10\n+#  $ name             : 'rs.scalar' chr \"a\"\n+#  $ type             : 'rs.scalar' chr \"numeric\"\n+#  $ clazz            : chr [1:2] \"numeric\" \"double\"\n+#  $ is_data          : 'rs.scalar' logi FALSE\n+#  $ value            : 'rs.scalar' chr \"1\"\n+#  $ description      : 'rs.scalar' chr \" num 1\"\n+#  $ size             : 'rs.scalar' num 56\n+#  $ length           : 'rs.scalar' int 1\n+#  $ contents         : list()\n+#  $ contents_deferred: 'rs.scalar' logi FALSE\n+.rs.addFunction(\"reticulate.describeObject\", function(name, parent)\n+{\n+   builtins <- reticulate::import_builtins(convert = TRUE)\n+   object <- if (inherits(parent, \"python.builtin.dict\"))\n+      reticulate::py_get_item(parent, name)\n+   else\n+      reticulate::py_get_attr(parent, name)\n+   \n+   # is this object 'data'? consider non-callable, non-module objects as data\n+   isData <- !(\n+      grepl(\"^__.*__$\", name) ||\n+      reticulate:::py_is_callable(object) ||\n+      reticulate:::py_is_module(object)\n+   )\n+   \n+   # TODO: there isn't really a distinction between an objects \"type\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODE5MDg3Ng=="}, "originalCommit": {"oid": "2fb7cad4655db3742265702ec9a532f4f75f2fa8"}, "originalPosition": 165}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2NjkyNzA2OnYy", "diffSide": "RIGHT", "path": "src/gwt/tools/editor-settings/eclipse-templates.xml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxODoyMzoyM1rOGYYU-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxODoyMzoyM1rOGYYU-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODIxNzU5NA==", "bodyText": "nit: single year for new files", "url": "https://github.com/rstudio/rstudio/pull/6862#discussion_r428217594", "createdAt": "2020-05-20T18:23:23Z", "author": {"login": "gtritchie"}, "path": "src/gwt/tools/editor-settings/eclipse-templates.xml", "diffHunk": "@@ -1,7 +1,7 @@\n <?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><templates><template autoinsert=\"true\" context=\"java\" deleted=\"false\" description=\"Boilerplate for a GWT event.\" enabled=\"true\" name=\"GWTEvent\">/*\n  * ${event}Event.java\n  *\n- * Copyright (C) 2020 by RStudio, PBC\n+ * Copyright (C) 2009-${year} by RStudio, PBC", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2fb7cad4655db3742265702ec9a532f4f75f2fa8"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3959, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}