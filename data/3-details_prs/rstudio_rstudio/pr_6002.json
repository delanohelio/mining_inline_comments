{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYxOTA2MjM0", "number": 6002, "title": "Accessibility improvements to editor pane", "bodyText": "when document outline is visually hidden also make it invisible to screen readers\nmarkup document outline splitter as a splitter\ngive document outline a label for accessibility tools\nincrease contrast of message shown when document outline is empty\noption to read aria-status messages with no delay\nclear prior aria-live status message after 4 seconds (this is to allow a repeated message to be read and so it doesn't show up again when navigating page with screen reader cursor)\nnew command \"Speak text editor location\" (Ctrl+Shift+B) that reads out current row, col, scope, file type and filename via aria-live; command hidden if screen reader support disabled\nannotate the panels for each tab in editor pane with role=tabpanel and a label (had to be done for text editors, data browser, object browser, profile results, code browser, url viewer)", "createdAt": "2020-01-13T02:42:56Z", "url": "https://github.com/rstudio/rstudio/pull/6002", "merged": true, "mergeCommit": {"oid": "1fd2ccbc001e1850fce568fb38ff84707d781c88"}, "closed": true, "closedAt": "2020-01-13T04:26:13Z", "author": {"login": "gtritchie"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb5JEV3AH2gAyMzYxOTA2MjM0OmZmYzRkMWE0OGUyYzUzYWNkNjdjZDQ2ZGMyMTg3NDgyZTA4NDQ1OWI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb54D0YAFqTM0MTY4NTY0MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ffc4d1a48e2c53acd67cd46dc2187482e084459b", "author": {"user": {"login": "gtritchie", "name": "Gary"}}, "url": "https://github.com/rstudio/rstudio/commit/ffc4d1a48e2c53acd67cd46dc2187482e084459b", "committedDate": "2020-01-11T01:42:30Z", "message": "mark editor panes as tabpanels and label with filename"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "72da8be7594c67bab4f9b036ea47289866ce6a7a", "author": {"user": {"login": "gtritchie", "name": "Gary"}}, "url": "https://github.com/rstudio/rstudio/commit/72da8be7594c67bab4f9b036ea47289866ce6a7a", "committedDate": "2020-01-12T00:19:01Z", "message": "Merge branch 'master' into feature/editor-pane-a11y-improvements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f25c09b04a76d61c9555f20a4634dff280e8de7", "author": {"user": {"login": "gtritchie", "name": "Gary"}}, "url": "https://github.com/rstudio/rstudio/commit/5f25c09b04a76d61c9555f20a4634dff280e8de7", "committedDate": "2020-01-13T01:36:29Z", "message": "fixes to source-pane accessibility\n\n- make document outline view aria-hidden when visibly hidden\n- annotate document outline view splitter\n- initial wiring for command to speak editor status\n- mark various source pane tabpanels with correct role, and give them labels (text editor, object explorer, code browser, data viewer, url viewer. profile results)\n-"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a254ad5279eebb3ebc88645b6dae01e79a240c9e", "author": {"user": {"login": "gtritchie", "name": "Gary"}}, "url": "https://github.com/rstudio/rstudio/commit/a254ad5279eebb3ebc88645b6dae01e79a240c9e", "committedDate": "2020-01-13T02:32:54Z", "message": "announce details of current editor status when requested"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxNjg1NjQw", "url": "https://github.com/rstudio/rstudio/pull/6002#pullrequestreview-341685640", "createdAt": "2020-01-13T08:27:22Z", "commit": {"oid": "a254ad5279eebb3ebc88645b6dae01e79a240c9e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QwODoyNzoyMlrOFcvicQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QwODoyNzoyMlrOFcvicQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTY4MzMxMw==", "bodyText": "This seems to just be an extension of what's already there but I always get a little nervous when multiple timers start being about. This looks sound but I always ask in this situation \"are there any funny conditions we could get in?\"\nThere are some hardcoded times (like the 4000ms on line 71) as well that, at least in the next revision, might want to get pulled out to at least class constants. Not a big deal for this scope but probably something to think about as these things continue to grow in complexity.\nIf we end up with a handful of timers in flight in the future it may be worth offloading some of these status changes to an event bus system.", "url": "https://github.com/rstudio/rstudio/pull/6002#discussion_r365683313", "createdAt": "2020-01-13T08:27:22Z", "author": {"login": "adamconroy"}, "path": "src/gwt/src/org/rstudio/core/client/widget/AriaLiveStatusWidget.java", "diffHunk": "@@ -63,8 +66,23 @@ public void clearMessage()\n       public void run()\n       {\n          getElement().setInnerText(resultsMessage_);\n+         if (clearReaderTimer_.isRunning())\n+            clearReaderTimer_.cancel();\n+         clearReaderTimer_.schedule(4000);\n       }\n    };\n \n+   /**\n+    * Timer for clearing the previous message if nothing new arrives\n+    */\n+   private Timer clearReaderTimer_ = new Timer()\n+   {\n+     @Override\n+     public void run()\n+     {\n+        getElement().setInnerText(\"\");\n+     }\n+   };\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a254ad5279eebb3ebc88645b6dae01e79a240c9e"}, "originalPosition": 57}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 419, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}