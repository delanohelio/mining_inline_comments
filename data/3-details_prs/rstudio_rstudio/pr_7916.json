{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk1MTc2MTY3", "number": 7916, "title": "annotate inotify errors with better message", "bodyText": "Intent\nWhen an inotify error occurs, the generic \"ENOSPC\" error code is returned, which is associated with the \"No space left on device\" error message. That message is misleading for users; it hints that the system might be low on disk space when the reality is that the system has been exhausted of inotify watches.\nApproach\nThis PR adds a new error constructor syscallError(), which allows the caller to both hint at the failing function, and provide their own message to provide rather than the default message associated with the particular error code.\nQA Notes\nNot exactly sure how to test beyond finding a way to reproduce rstudio/rstudio-pro#1988.", "createdAt": "2020-09-29T23:55:12Z", "url": "https://github.com/rstudio/rstudio/pull/7916", "merged": true, "mergeCommit": {"oid": "cddfe17c50edec32419696265eb3e381a0381c80"}, "closed": true, "closedAt": "2020-10-01T19:38:39Z", "author": {"login": "kevinushey"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdNxLcfABqjM4MjIxMDU1MTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdOVbmuAFqTUwMDU5OTI4Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "653a657ce649b65eae46804347ee3b4a83a0b1bf", "author": {"user": {"login": "kevinushey", "name": "Kevin Ushey"}}, "url": "https://github.com/rstudio/rstudio/commit/653a657ce649b65eae46804347ee3b4a83a0b1bf", "committedDate": "2020-09-29T23:52:06Z", "message": "annotate inotify errors with better message"}, "afterCommit": {"oid": "0ad0038476e6744bc4af6f7e0a33108c8f9829db", "author": {"user": {"login": "kevinushey", "name": "Kevin Ushey"}}, "url": "https://github.com/rstudio/rstudio/commit/0ad0038476e6744bc4af6f7e0a33108c8f9829db", "committedDate": "2020-09-29T23:55:58Z", "message": "annotate inotify errors with better message"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "10cb77ee823f47571087d9a71e097d56b79b1af2", "author": {"user": {"login": "kevinushey", "name": "Kevin Ushey"}}, "url": "https://github.com/rstudio/rstudio/commit/10cb77ee823f47571087d9a71e097d56b79b1af2", "committedDate": "2020-09-29T23:57:04Z", "message": "annotate inotify errors with better message"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0ad0038476e6744bc4af6f7e0a33108c8f9829db", "author": {"user": {"login": "kevinushey", "name": "Kevin Ushey"}}, "url": "https://github.com/rstudio/rstudio/commit/0ad0038476e6744bc4af6f7e0a33108c8f9829db", "committedDate": "2020-09-29T23:55:58Z", "message": "annotate inotify errors with better message"}, "afterCommit": {"oid": "10cb77ee823f47571087d9a71e097d56b79b1af2", "author": {"user": {"login": "kevinushey", "name": "Kevin Ushey"}}, "url": "https://github.com/rstudio/rstudio/commit/10cb77ee823f47571087d9a71e097d56b79b1af2", "committedDate": "2020-09-29T23:57:04Z", "message": "annotate inotify errors with better message"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk5NzkwMDk2", "url": "https://github.com/rstudio/rstudio/pull/7916#pullrequestreview-499790096", "createdAt": "2020-09-30T20:34:07Z", "commit": {"oid": "10cb77ee823f47571087d9a71e097d56b79b1af2"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQyMDozNDowN1rOHauTtA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQyMDo0MjowOFrOHaujaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Nzc4MzczMg==", "bodyText": "Could we call this systemCallError instead?", "url": "https://github.com/rstudio/rstudio/pull/7916#discussion_r497783732", "createdAt": "2020-09-30T20:34:07Z", "author": {"login": "MariaSemple"}, "path": "src/cpp/shared_core/include/shared_core/Error.hpp", "diffHunk": "@@ -709,6 +709,36 @@ Error systemError(\n    const Error& in_cause,\n    const ErrorLocation& in_location);\n \n+/**\n+ * @brief Function which creates a system error associated with a particular system call.\n+ *\n+ * @param in_function        The error message to associate with this error.\n+ * @param in_code            The error code (typically errno).\n+ * @param in_location        The location of the error.\n+ *\n+ * @return A system error.\n+ */\n+Error syscallError(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "10cb77ee823f47571087d9a71e097d56b79b1af2"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Nzc4NDY3MA==", "bodyText": "I think the description here would be more accurate if it were something like The system function for which this error occurred.", "url": "https://github.com/rstudio/rstudio/pull/7916#discussion_r497784670", "createdAt": "2020-09-30T20:35:59Z", "author": {"login": "MariaSemple"}, "path": "src/cpp/shared_core/include/shared_core/Error.hpp", "diffHunk": "@@ -709,6 +709,36 @@ Error systemError(\n    const Error& in_cause,\n    const ErrorLocation& in_location);\n \n+/**\n+ * @brief Function which creates a system error associated with a particular system call.\n+ *\n+ * @param in_function        The error message to associate with this error.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "10cb77ee823f47571087d9a71e097d56b79b1af2"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Nzc4Nzc1Mw==", "bodyText": "Can this be entirely defined in the cpp file? Once I pull these changes to the SDK (and release it) it will become very difficult to make signature changes to any functions in public headers (Error.hpp is a public header in the SDK).", "url": "https://github.com/rstudio/rstudio/pull/7916#discussion_r497787753", "createdAt": "2020-09-30T20:42:08Z", "author": {"login": "MariaSemple"}, "path": "src/cpp/shared_core/include/shared_core/Error.hpp", "diffHunk": "@@ -735,6 +765,8 @@ Error unknownError(const std::string& in_message, const ErrorLocation& in_locati\n  */\n Error unknownError(const std::string& in_message, const Error& in_cause, const ErrorLocation& in_location);\n \n+// returns the error message associated with a particular system error code\n+std::string systemErrorMessage(int code);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "10cb77ee823f47571087d9a71e097d56b79b1af2"}, "originalPosition": 42}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b790d8810484500633a60b4f1114916611c63bac", "author": {"user": {"login": "kevinushey", "name": "Kevin Ushey"}}, "url": "https://github.com/rstudio/rstudio/commit/b790d8810484500633a60b4f1114916611c63bac", "committedDate": "2020-09-30T21:06:21Z", "message": "address PR feedback"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "615fc44f8e01e184997f85dab23830854984c25f", "author": {"user": {"login": "kevinushey", "name": "Kevin Ushey"}}, "url": "https://github.com/rstudio/rstudio/commit/615fc44f8e01e184997f85dab23830854984c25f", "committedDate": "2020-09-30T23:17:08Z", "message": "move back to shared_core"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "601eba3c82be5c567b04a1001f17c990e6e8290b", "author": {"user": {"login": "kevinushey", "name": "Kevin Ushey"}}, "url": "https://github.com/rstudio/rstudio/commit/601eba3c82be5c567b04a1001f17c990e6e8290b", "committedDate": "2020-09-30T23:18:02Z", "message": "missed rename"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwNTk5Mjgz", "url": "https://github.com/rstudio/rstudio/pull/7916#pullrequestreview-500599283", "createdAt": "2020-10-01T18:10:20Z", "commit": {"oid": "601eba3c82be5c567b04a1001f17c990e6e8290b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}