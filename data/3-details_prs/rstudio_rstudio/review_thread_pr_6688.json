{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA1Mjc4Mzcy", "number": 6688, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQwMTowNToyNFrOD0geDw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQwMToxMDoxOFrOD0gi7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2Mzg0NTI3OnYy", "diffSide": "RIGHT", "path": "src/cpp/session/modules/NotebookData.R", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQwMTowNToyNFrOGJexcA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQwMTowNToyNFrOGJexcA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjU5NDU0NA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                if (isNamespaceLoaded(\"tibble\"))\n          \n          \n            \n                if (\"tibble\" %in% loadedNamespaces())\n          \n      \n    \n    \n  \n\nisNamespaceLoaded() was added in R 3.2.0, and so is a bit too new for us to use.", "url": "https://github.com/rstudio/rstudio/pull/6688#discussion_r412594544", "createdAt": "2020-04-22T01:05:24Z", "author": {"login": "kevinushey"}, "path": "src/cpp/session/modules/NotebookData.R", "diffHunk": "@@ -92,9 +92,16 @@\n       options,\n       file = output)\n \n-    .Call(\"rs_recordData\", output, list(classes = className,\n-                                        nrow = nRow, \n-                                        ncol = nCol))\n+    # standard metadata\n+    metadata <- list(classes = className, nrow = nRow, ncol = nCol, summary = list())\n+\n+    # if tibble is loaded, use it to create a summary of the object\n+    if (isNamespaceLoaded(\"tibble\"))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c6a5ff3349905c57235b95b7c6b29297721ed8fd"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2Mzg0NjA0OnYy", "diffSide": "RIGHT", "path": "src/cpp/session/modules/NotebookData.R", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQwMTowNTo0MFrOGJex1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQwMTowNTo0MFrOGJex1A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjU5NDY0NA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                .Call(\"rs_recordData\", output, metadata)\n          \n          \n            \n                .Call(\"rs_recordData\", output, metadata, PACKAGE = \"(embedding)\")", "url": "https://github.com/rstudio/rstudio/pull/6688#discussion_r412594644", "createdAt": "2020-04-22T01:05:40Z", "author": {"login": "kevinushey"}, "path": "src/cpp/session/modules/NotebookData.R", "diffHunk": "@@ -92,9 +92,16 @@\n       options,\n       file = output)\n \n-    .Call(\"rs_recordData\", output, list(classes = className,\n-                                        nrow = nRow, \n-                                        ncol = nCol))\n+    # standard metadata\n+    metadata <- list(classes = className, nrow = nRow, ncol = nCol, summary = list())\n+\n+    # if tibble is loaded, use it to create a summary of the object\n+    if (isNamespaceLoaded(\"tibble\"))\n+    {\n+       metadata$summary <- as.list(tibble::tbl_sum(original))\n+    }\n+\n+    .Call(\"rs_recordData\", output, metadata)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c6a5ff3349905c57235b95b7c6b29297721ed8fd"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2Mzg1NzczOnYy", "diffSide": "RIGHT", "path": "src/cpp/session/resources/pagedtable/pagedtable.js", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQwMToxMDoxOFrOGJe3qw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxNzowMzo1MFrOGKBK-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjU5NjEzOQ==", "bodyText": "This check feels a bit awkward, since I don't think there's any real guarantee that two empty objects are identical:\n$ node\nWelcome to Node.js v13.13.0.\nType \".help\" for more information.\n> {} === {}\nfalse\n\nMaybe instead check for the length of Object.keys(options.metadata)?", "url": "https://github.com/rstudio/rstudio/pull/6688#discussion_r412596139", "createdAt": "2020-04-22T01:10:18Z", "author": {"login": "kevinushey"}, "path": "src/cpp/session/resources/pagedtable/pagedtable.js", "diffHunk": "@@ -525,6 +528,36 @@ var PagedTable = function (pagedTable) {\n \n     var fragment = document.createDocumentFragment();\n \n+    // show metadata on top of header\n+    if (options.metadata !== {}) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "00f71f7b10aae5bcddb0ee4735d2108a99f5b84e"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzE1ODEzNw==", "bodyText": "I did exactly this last week in 76e04d9 -- no idea why GH showed you the old diff!", "url": "https://github.com/rstudio/rstudio/pull/6688#discussion_r413158137", "createdAt": "2020-04-22T17:03:50Z", "author": {"login": "jmcphers"}, "path": "src/cpp/session/resources/pagedtable/pagedtable.js", "diffHunk": "@@ -525,6 +528,36 @@ var PagedTable = function (pagedTable) {\n \n     var fragment = document.createDocumentFragment();\n \n+    // show metadata on top of header\n+    if (options.metadata !== {}) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjU5NjEzOQ=="}, "originalCommit": {"oid": "00f71f7b10aae5bcddb0ee4735d2108a99f5b84e"}, "originalPosition": 24}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3915, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}