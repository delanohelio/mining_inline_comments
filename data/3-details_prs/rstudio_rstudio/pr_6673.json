{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA0MDI4ODgw", "number": 6673, "title": "add support for Rtools 4.0", "bodyText": "NOTE: Not quite ready for merge; pending confirmation on the URL to use for the Rtools installer.\n\nThe PR adds support for Rtools 4.0, the toolchain used to build packages for the R 4.x.x series.\nNote that there are two installers: one for users on 32bit Windows (providing only a 32bit toolchain), and one for 64bit Windows (providing both 32bit and 64bit toolchains). While RStudio itself is now a 64bit application (and hence should only be used with 64bit Windows), I did add indirection for the Rtools installer in any case.", "createdAt": "2020-04-15T22:55:53Z", "url": "https://github.com/rstudio/rstudio/pull/6673", "merged": true, "mergeCommit": {"oid": "6feeddd3b238154ff7975bf110e8c3540b946bbf"}, "closed": true, "closedAt": "2020-04-16T15:53:28Z", "author": {"login": "kevinushey"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcYAEcTgH2gAyNDA0MDI4ODgwOmQ5Y2NkOTVjNTgzNzJmOTg0MTZmZWYzNTc3NGI5MGQ4ZGI3OTU1ZjE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcYAfSFAFqTM5NDE5NzQzOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d9ccd95c58372f98416fef35774b90d8db7955f1", "author": {"user": {"login": "kevinushey", "name": "Kevin Ushey"}}, "url": "https://github.com/rstudio/rstudio/commit/d9ccd95c58372f98416fef35774b90d8db7955f1", "committedDate": "2020-04-15T22:45:07Z", "message": "also use RTOOLS40_HOME"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a6c262fe86552910839d8e0772cec8a4a36f8f65", "author": {"user": {"login": "kevinushey", "name": "Kevin Ushey"}}, "url": "https://github.com/rstudio/rstudio/commit/a6c262fe86552910839d8e0772cec8a4a36f8f65", "committedDate": "2020-04-15T22:55:29Z", "message": "adapt to change in field name"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk0MTk3NDM5", "url": "https://github.com/rstudio/rstudio/pull/6673#pullrequestreview-394197439", "createdAt": "2020-04-15T23:14:20Z", "commit": {"oid": "a6c262fe86552910839d8e0772cec8a4a36f8f65"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQyMzoxNDoyMFrOGGO1kw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQyMzoxNDoyMFrOGGO1kw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTE4NzczMQ==", "bodyText": "Is this promotion likely to happen in concert with the 4.0 release? (wondering if we should go ahead and merge this URL for 1.3 and then update to the final URL in the 1.3 patch release)", "url": "https://github.com/rstudio/rstudio/pull/6673#discussion_r409187731", "createdAt": "2020-04-15T23:14:20Z", "author": {"login": "jmcphers"}, "path": "src/cpp/core/r_util/RToolsInfo.cpp", "diffHunk": "@@ -206,10 +241,23 @@ RToolsInfo::RToolsInfo(const std::string& name,\n \n std::string RToolsInfo::url(const std::string& repos) const\n {\n-   // strip period from name\n-   std::string ver = boost::algorithm::replace_all_copy(name(), \".\", \"\");\n-   std::string url = core::http::URL::complete(\n-                        repos, \"bin/windows/Rtools/Rtools\" + ver + \".exe\");\n+   std::string url;\n+\n+   if (name() == \"4.0\")\n+   {\n+      // TODO: Currently, Rtools 4.0 is only available from the 'testing'\n+      // sub-directory. Update this URL once it's been promoted.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a6c262fe86552910839d8e0772cec8a4a36f8f65"}, "originalPosition": 64}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 209, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}