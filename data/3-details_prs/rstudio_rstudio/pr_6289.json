{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc4NTIxMDgw", "number": 6289, "title": "Reload packages pane state after installing dependencies", "bodyText": "This change causes the Packages pane to reload its state after we're done installing dependencies in a background job, so that the newly installed packages can be clearly shown.\nFixes #6274.", "createdAt": "2020-02-22T00:01:57Z", "url": "https://github.com/rstudio/rstudio/pull/6289", "merged": true, "mergeCommit": {"oid": "51f202c5e103ba5342598d806742505c7eefb69d"}, "closed": true, "closedAt": "2020-02-24T18:34:55Z", "author": {"login": "jmcphers"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcGovF2AH2gAyMzc4NTIxMDgwOjcwMzhlODE1MDJiNDRhMWQyMDEzNmQwMjczNzU3NWNmNTVlNzQ5YjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcHh6vngH2gAyMzc4NTIxMDgwOjg1ZDI3MmM4NDczZWQyNDg0ZGVhYTcyZTI4ZDEzN2E3ZTlmZDRmZGQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7038e81502b44a1d20136d02737575cf55e749b6", "author": {"user": {"login": "jmcphers", "name": "Jonathan"}}, "url": "https://github.com/rstudio/rstudio/commit/7038e81502b44a1d20136d02737575cf55e749b6", "committedDate": "2020-02-21T23:57:16Z", "message": "reload packages pane state after installing dependencies"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYyOTk0ODY0", "url": "https://github.com/rstudio/rstudio/pull/6289#pullrequestreview-362994864", "createdAt": "2020-02-22T01:03:26Z", "commit": {"oid": "7038e81502b44a1d20136d02737575cf55e749b6"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMlQwMTowMzoyN1rOFtIhFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMlQwMTowMzoyN1rOFtIhFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjg2OTc4Mw==", "bodyText": "I wonder if this lambda should actually capture by value? IIUC it's capturing the job (a shared pointer) by reference, which means in theory if the job were to be deleted we'd be left with a dangling reference. Seems unlikely to happen in practice but capturing by value feels safer.", "url": "https://github.com/rstudio/rstudio/pull/6289#discussion_r382869783", "createdAt": "2020-02-22T01:03:27Z", "author": {"login": "kevinushey"}, "path": "src/cpp/session/modules/jobs/AsyncRJobManager.cpp", "diffHunk": "@@ -117,7 +121,7 @@ Error registerAsyncRJob(boost::shared_ptr<AsyncRJob> job,\n    job->registerJob();\n \n    // remove the job from the registry when it's done\n-   job->setOnComplete([&]() \n+   job->addOnComplete([&]() ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7038e81502b44a1d20136d02737575cf55e749b6"}, "originalPosition": 39}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "85d272c8473ed2484deaa72e28d137a7e9fd4fdd", "author": {"user": {"login": "jmcphers", "name": "Jonathan"}}, "url": "https://github.com/rstudio/rstudio/commit/85d272c8473ed2484deaa72e28d137a7e9fd4fdd", "committedDate": "2020-02-24T18:34:35Z", "message": "pass job pointer by value"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 399, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}