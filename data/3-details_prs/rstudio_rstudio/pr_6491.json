{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkwNjg1NTc3", "number": 6491, "title": "Add equality and inequality operators to User", "bodyText": "Also need this for the Launcher Plugin SDK.\nTwo users are the same if they have the same user ID. Also implements move constructor and operator for User.", "createdAt": "2020-03-18T21:57:17Z", "url": "https://github.com/rstudio/rstudio/pull/6491", "merged": true, "mergeCommit": {"oid": "3730b62f8f4188483f524fa3189f42f3c31e5ada"}, "closed": true, "closedAt": "2020-03-19T05:04:14Z", "author": {"login": "MariaSemple"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcO8QOhgH2gAyMzkwNjg1NTc3OjE2M2I3NWVjOGJjN2EyNWVhMTkzYmFjZWM3OTZiMmQyY2M1MGIxYjE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcPEgtxAFqTM3NzQyMjQ5NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "163b75ec8bc7a25ea193bacec796b2d2cc50b1b1", "author": {"user": {"login": "MariaSemple", "name": "Maria Semple"}}, "url": "https://github.com/rstudio/rstudio/commit/163b75ec8bc7a25ea193bacec796b2d2cc50b1b1", "committedDate": "2020-03-18T19:13:03Z", "message": "add equality and inequality operators to User"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "53b678da27466123a504c9c0429216c2891eff8d", "author": {"user": {"login": "MariaSemple", "name": "Maria Semple"}}, "url": "https://github.com/rstudio/rstudio/commit/53b678da27466123a504c9c0429216c2891eff8d", "committedDate": "2020-03-18T20:02:52Z", "message": "add move operator and constructor to User"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7c514b2a7a64cabc58c53eab119981f71b7a45e0", "author": {"user": {"login": "MariaSemple", "name": "Maria Semple"}}, "url": "https://github.com/rstudio/rstudio/commit/7c514b2a7a64cabc58c53eab119981f71b7a45e0", "committedDate": "2020-03-18T20:05:06Z", "message": "account for empty users in equality comparison"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3MzA5ODg3", "url": "https://github.com/rstudio/rstudio/pull/6491#pullrequestreview-377309887", "createdAt": "2020-03-18T23:33:07Z", "commit": {"oid": "7c514b2a7a64cabc58c53eab119981f71b7a45e0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQyMzozMzowN1rOF4aeSQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQyMzozMzowN1rOF4aeSQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDY5ODMxMw==", "bodyText": "Is it intentional that we explicitly copy the members piece-by-piece rather than just relying on *m_impl = *in_other->m_impl or something similar? (Main worry is that it could be easy to forget to update this method if we were to add new members to the Impl struct)", "url": "https://github.com/rstudio/rstudio/pull/6491#discussion_r394698313", "createdAt": "2020-03-18T23:33:07Z", "author": {"login": "kevinushey"}, "path": "src/cpp/shared_core/system/User.cpp", "diffHunk": "@@ -161,6 +166,48 @@ FilePath User::getUserHomePath(const std::string& in_envOverride)\n    return FilePath(getEnvVariable(\"HOME\"));\n }\n \n+User& User::operator=(const User& in_other)\n+{\n+   m_impl->Name = in_other.m_impl->Name;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7c514b2a7a64cabc58c53eab119981f71b7a45e0"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3MzEwNjQ1", "url": "https://github.com/rstudio/rstudio/pull/6491#pullrequestreview-377310645", "createdAt": "2020-03-18T23:35:09Z", "commit": {"oid": "7c514b2a7a64cabc58c53eab119981f71b7a45e0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQyMzozNTowOVrOF4ag-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQyMzozNTowOVrOF4ag-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDY5OTAwMw==", "bodyText": "I wonder if we could just use the default compiler-implemented move constructor here?", "url": "https://github.com/rstudio/rstudio/pull/6491#discussion_r394699003", "createdAt": "2020-03-18T23:35:09Z", "author": {"login": "kevinushey"}, "path": "src/cpp/shared_core/include/shared_core/system/User.hpp", "diffHunk": "@@ -101,6 +101,13 @@ class User\n     */\n    User(const User& in_other);\n \n+   /**\n+    * @brief Move constructor.\n+    *\n+    * @param in_other   The user to move into this User.\n+    */\n+   User(User&& in_other) noexcept;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7c514b2a7a64cabc58c53eab119981f71b7a45e0"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3MzEwNzg0", "url": "https://github.com/rstudio/rstudio/pull/6491#pullrequestreview-377310784", "createdAt": "2020-03-18T23:35:32Z", "commit": {"oid": "7c514b2a7a64cabc58c53eab119981f71b7a45e0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQyMzozNTozMlrOF4ahiA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQyMzozNTozMlrOF4ahiA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDY5OTE0NA==", "bodyText": "Similar question re: using compiler default.", "url": "https://github.com/rstudio/rstudio/pull/6491#discussion_r394699144", "createdAt": "2020-03-18T23:35:32Z", "author": {"login": "kevinushey"}, "path": "src/cpp/shared_core/include/shared_core/system/User.hpp", "diffHunk": "@@ -131,6 +138,42 @@ class User\n     */\n    static Error getUserFromIdentifier(UidType in_userId, User& out_user);\n \n+   /**\n+    * @brief Overloaded assignment operator.\n+    *\n+    * @param in_other   The user to copy to this one.\n+    *\n+    * @return This user.\n+    */\n+   User& operator=(const User& in_other);\n+\n+   /**\n+    * @brief Overloaded move operator.\n+    *\n+    * @param in_other   The user to move to this one.\n+    *\n+    * @return This user.\n+    */\n+   User& operator=(User&& in_other) noexcept;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7c514b2a7a64cabc58c53eab119981f71b7a45e0"}, "originalPosition": 34}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3MzEwOTI0", "url": "https://github.com/rstudio/rstudio/pull/6491#pullrequestreview-377310924", "createdAt": "2020-03-18T23:35:56Z", "commit": {"oid": "7c514b2a7a64cabc58c53eab119981f71b7a45e0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "86c3f576a834d55523f78fc3dd4a7385e0f91db9", "author": {"user": {"login": "MariaSemple", "name": "Maria Semple"}}, "url": "https://github.com/rstudio/rstudio/commit/86c3f576a834d55523f78fc3dd4a7385e0f91db9", "committedDate": "2020-03-19T01:34:29Z", "message": "rely on compiler generated copy constructor\n\nand handle nullptr edge cases just in case"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c225b6ea5ffa7be7d0a108c96531e66990fb0e9f", "author": {"user": {"login": "MariaSemple", "name": "Maria Semple"}}, "url": "https://github.com/rstudio/rstudio/commit/c225b6ea5ffa7be7d0a108c96531e66990fb0e9f", "committedDate": "2020-03-19T01:59:01Z", "message": "use = default for move constructor/operator"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3NDIyNDk1", "url": "https://github.com/rstudio/rstudio/pull/6491#pullrequestreview-377422495", "createdAt": "2020-03-19T04:50:18Z", "commit": {"oid": "c225b6ea5ffa7be7d0a108c96531e66990fb0e9f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 296, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}