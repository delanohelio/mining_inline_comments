{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE3NjAwODYx", "number": 56718, "title": "EQL: Skip execution for filters with empty results", "bodyText": "Optimize away events queries and joins/sequence that cannot match any\nresults without having to query Elasticsearch\nFix #53237", "createdAt": "2020-05-13T20:40:01Z", "url": "https://github.com/elastic/elasticsearch/pull/56718", "merged": true, "mergeCommit": {"oid": "69c8ef8cfefd8fc6dcb6d1a566bfcd537068e3e4"}, "closed": true, "closedAt": "2020-05-14T19:37:28Z", "author": {"login": "costin"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcg_Si2AH2gAyNDE3NjAwODYxOmI4ODkwMTRjODNmOWFmM2Y0YTFiMmVlZTAxNTFlOTBlNWY1ZDYwN2M=", "endCursor": "Y3Vyc29yOnYyOpPPAAABchRUlPgFqTQxMjA1MzA3MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b889014c83f9af3f4a1b2eee0151e90e5f5d607c", "author": {"user": {"login": "costin", "name": "Costin Leau"}}, "url": "https://github.com/elastic/elasticsearch/commit/b889014c83f9af3f4a1b2eee0151e90e5f5d607c", "committedDate": "2020-05-13T20:55:56Z", "message": "EQL: Skip execution for filters with empty results\n\nOptimize away events queries and joins/sequence that cannot match any\nresults without having to query Elasticsearch\n\nFix #53237"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ab6d8faf60b785166073f912de3d04aa70263325", "author": {"user": {"login": "costin", "name": "Costin Leau"}}, "url": "https://github.com/elastic/elasticsearch/commit/ab6d8faf60b785166073f912de3d04aa70263325", "committedDate": "2020-05-13T20:39:04Z", "message": "EQL: Skip execution for filters with empty results\n\nOptimize away events queries and joins/sequence that cannot match any\nresults without having to query Elasticsearch\n\nFix #53237"}, "afterCommit": {"oid": "b889014c83f9af3f4a1b2eee0151e90e5f5d607c", "author": {"user": {"login": "costin", "name": "Costin Leau"}}, "url": "https://github.com/elastic/elasticsearch/commit/b889014c83f9af3f4a1b2eee0151e90e5f5d607c", "committedDate": "2020-05-13T20:55:56Z", "message": "EQL: Skip execution for filters with empty results\n\nOptimize away events queries and joins/sequence that cannot match any\nresults without having to query Elasticsearch\n\nFix #53237"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExMzYzMjU4", "url": "https://github.com/elastic/elasticsearch/pull/56718#pullrequestreview-411363258", "createdAt": "2020-05-13T23:17:42Z", "commit": {"oid": "b889014c83f9af3f4a1b2eee0151e90e5f5d607c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QyMzoxNzo0MlrOGVGxSg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QyMzoxNzo0MlrOGVGxSg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDc4NDIwMg==", "bodyText": "@costin Question: if we have let's say 4 queries (stages) and one of them (no matter which) is no_match (filter => false) then we cannot match any sequence, correct?", "url": "https://github.com/elastic/elasticsearch/pull/56718#discussion_r424784202", "createdAt": "2020-05-13T23:17:42Z", "author": {"login": "matriv"}, "path": "x-pack/plugin/eql/qa/common/src/main/resources/test_queries_supported.toml", "diffHunk": "@@ -146,4 +146,12 @@ sequence\n   [process where serial_event_id<3] by unique_pid\n   [process where true] by unique_ppid\n '''\n-expected_event_ids  = [1, 2, 2, 3]\n\\ No newline at end of file\n+expected_event_ids  = [1, 2, 2, 3]\n+\n+[[queries]]\n+query = '''\n+sequence\n+  [process where false] by unique_pid\n+  [process where true] by unique_ppid", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b889014c83f9af3f4a1b2eee0151e90e5f5d607c"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExNTk5MDEw", "url": "https://github.com/elastic/elasticsearch/pull/56718#pullrequestreview-411599010", "createdAt": "2020-05-14T08:55:46Z", "commit": {"oid": "b889014c83f9af3f4a1b2eee0151e90e5f5d607c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEyMDUzMDcx", "url": "https://github.com/elastic/elasticsearch/pull/56718#pullrequestreview-412053071", "createdAt": "2020-05-14T17:56:28Z", "commit": {"oid": "b889014c83f9af3f4a1b2eee0151e90e5f5d607c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4936, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}