{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI3NjE3NjUz", "number": 65510, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQyMDo1NDozMVrOE9Y4cQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxOTo0MDo1OVrOE-z5VA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMyODA2MjU3OnYy", "diffSide": "RIGHT", "path": ".ci/packer_cache.sh", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQyMDo1NDozMVrOH6DjpQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQxMDoxMDo1MVrOH6UhOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDYzNzczMw==", "bodyText": "Maybe use git clone --reference ${SCRIPT}/../.git https://github.com/elastic/elasticsearch.git --branch 6.8 --single-branch checkout/6.8 to speed up the clone a bit?", "url": "https://github.com/elastic/elasticsearch/pull/65510#discussion_r530637733", "createdAt": "2020-11-25T20:54:31Z", "author": {"login": "nik9000"}, "path": ".ci/packer_cache.sh", "diffHunk": "@@ -16,12 +16,21 @@ while [ -h \"$SCRIPT\" ] ; do\n done\n \n source $(dirname \"${SCRIPT}\")/java-versions.properties\n-export JAVA_HOME=\"${HOME}\"/.java/${ES_BUILD_JAVA}\n-# We are caching BWC versions too, need these so we can build those\n+## We are caching BWC versions too, need these so we can build those\n export JAVA8_HOME=\"${HOME}\"/.java/java8\n export JAVA11_HOME=\"${HOME}\"/.java/java11\n export JAVA12_HOME=\"${HOME}\"/.java/openjdk12\n export JAVA13_HOME=\"${HOME}\"/.java/openjdk13\n export JAVA14_HOME=\"${HOME}\"/.java/openjdk14\n-./gradlew --parallel clean -s resolveAllDependencies\n \n+## 6.8 branch is not referenced from any bwc project in master so we need to\n+## resolve its dependencies explicitly\n+rm -rf checkout/6.8\n+git clone https://github.com/elastic/elasticsearch.git --branch 6.8 --single-branch checkout/6.8", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ec0fd02434e0f4e1f4d779d5726515e10e26e874"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDkxNTY0Mw==", "bodyText": "Nice. didn't know about that one.", "url": "https://github.com/elastic/elasticsearch/pull/65510#discussion_r530915643", "createdAt": "2020-11-26T10:10:51Z", "author": {"login": "breskeby"}, "path": ".ci/packer_cache.sh", "diffHunk": "@@ -16,12 +16,21 @@ while [ -h \"$SCRIPT\" ] ; do\n done\n \n source $(dirname \"${SCRIPT}\")/java-versions.properties\n-export JAVA_HOME=\"${HOME}\"/.java/${ES_BUILD_JAVA}\n-# We are caching BWC versions too, need these so we can build those\n+## We are caching BWC versions too, need these so we can build those\n export JAVA8_HOME=\"${HOME}\"/.java/java8\n export JAVA11_HOME=\"${HOME}\"/.java/java11\n export JAVA12_HOME=\"${HOME}\"/.java/openjdk12\n export JAVA13_HOME=\"${HOME}\"/.java/openjdk13\n export JAVA14_HOME=\"${HOME}\"/.java/openjdk14\n-./gradlew --parallel clean -s resolveAllDependencies\n \n+## 6.8 branch is not referenced from any bwc project in master so we need to\n+## resolve its dependencies explicitly\n+rm -rf checkout/6.8\n+git clone https://github.com/elastic/elasticsearch.git --branch 6.8 --single-branch checkout/6.8", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDYzNzczMw=="}, "originalCommit": {"oid": "ec0fd02434e0f4e1f4d779d5726515e10e26e874"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM0Mjk3NDI4OnYy", "diffSide": "RIGHT", "path": ".ci/packer_cache.sh", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxOTo0MDo1OVrOH8Kuzw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQxNjoyMjo1NlrOH80_PA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjg1MjQzMQ==", "bodyText": "Maybe rm -rf checkout/6.8 just to keep the build image a little smaller.", "url": "https://github.com/elastic/elasticsearch/pull/65510#discussion_r532852431", "createdAt": "2020-11-30T19:40:59Z", "author": {"login": "nik9000"}, "path": ".ci/packer_cache.sh", "diffHunk": "@@ -16,12 +16,21 @@ while [ -h \"$SCRIPT\" ] ; do\n done\n \n source $(dirname \"${SCRIPT}\")/java-versions.properties\n-export JAVA_HOME=\"${HOME}\"/.java/${ES_BUILD_JAVA}\n-# We are caching BWC versions too, need these so we can build those\n+## We are caching BWC versions too, need these so we can build those\n export JAVA8_HOME=\"${HOME}\"/.java/java8\n export JAVA11_HOME=\"${HOME}\"/.java/java11\n export JAVA12_HOME=\"${HOME}\"/.java/openjdk12\n export JAVA13_HOME=\"${HOME}\"/.java/openjdk13\n export JAVA14_HOME=\"${HOME}\"/.java/openjdk14\n-./gradlew --parallel clean -s resolveAllDependencies\n \n+## 6.8 branch is not referenced from any bwc project in master so we need to\n+## resolve its dependencies explicitly\n+rm -rf checkout/6.8\n+git clone --reference $(dirname \"${SCRIPT}\")/../.git https://github.com/elastic/elasticsearch.git --branch 6.8 --single-branch checkout/6.8\n+export JAVA_HOME=\"${JAVA11_HOME}\"\n+./checkout/6.8/gradlew --project-dir ./checkout/6.8 --parallel clean --scan -Porg.elasticsearch.acceptScanTOS=true --stacktrace resolveAllDependencies\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "31a826c5b1e50a0ee5fb8f5aa108a53b7e159c41"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzU0NDc2NA==", "bodyText": "added this", "url": "https://github.com/elastic/elasticsearch/pull/65510#discussion_r533544764", "createdAt": "2020-12-01T16:22:56Z", "author": {"login": "breskeby"}, "path": ".ci/packer_cache.sh", "diffHunk": "@@ -16,12 +16,21 @@ while [ -h \"$SCRIPT\" ] ; do\n done\n \n source $(dirname \"${SCRIPT}\")/java-versions.properties\n-export JAVA_HOME=\"${HOME}\"/.java/${ES_BUILD_JAVA}\n-# We are caching BWC versions too, need these so we can build those\n+## We are caching BWC versions too, need these so we can build those\n export JAVA8_HOME=\"${HOME}\"/.java/java8\n export JAVA11_HOME=\"${HOME}\"/.java/java11\n export JAVA12_HOME=\"${HOME}\"/.java/openjdk12\n export JAVA13_HOME=\"${HOME}\"/.java/openjdk13\n export JAVA14_HOME=\"${HOME}\"/.java/openjdk14\n-./gradlew --parallel clean -s resolveAllDependencies\n \n+## 6.8 branch is not referenced from any bwc project in master so we need to\n+## resolve its dependencies explicitly\n+rm -rf checkout/6.8\n+git clone --reference $(dirname \"${SCRIPT}\")/../.git https://github.com/elastic/elasticsearch.git --branch 6.8 --single-branch checkout/6.8\n+export JAVA_HOME=\"${JAVA11_HOME}\"\n+./checkout/6.8/gradlew --project-dir ./checkout/6.8 --parallel clean --scan -Porg.elasticsearch.acceptScanTOS=true --stacktrace resolveAllDependencies\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjg1MjQzMQ=="}, "originalCommit": {"oid": "31a826c5b1e50a0ee5fb8f5aa108a53b7e159c41"}, "originalPosition": 20}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1933, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}