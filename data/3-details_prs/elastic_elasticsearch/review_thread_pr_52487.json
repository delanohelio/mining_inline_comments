{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc2NzU0MzM2", "number": 52487, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxODoxMDo0OVrODgzMtg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxODoxMDo0OVrODgzMtg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1NzE5ODYyOnYy", "diffSide": "RIGHT", "path": "gradle/build-scan.gradle", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxODoxMDo0OVrOFrM_pQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQyMDowODo0MVrOFrQv3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDg0NTk4OQ==", "bodyText": "Should the use of GIT_COMMIT here also be replaced with BuildParams.gitRevision?", "url": "https://github.com/elastic/elasticsearch/pull/52487#discussion_r380845989", "createdAt": "2020-02-18T18:10:49Z", "author": {"login": "rjernst"}, "path": "gradle/build-scan.gradle", "diffHunk": "@@ -76,9 +77,9 @@ buildScan {\n         value 'Git Branch', branch\n         tag branch\n       }\n-      if (System.getenv('GIT_COMMIT')) {\n-        value 'Git Commit ID', System.getenv('GIT_COMMIT')\n-        link 'Source', \"https://github.com/elastic/elasticsearch/tree/${System.getenv('GIT_COMMIT')}\"\n+      value 'Git Commit ID', BuildParams.gitRevision\n+      link 'Source', \"https://github.com/elastic/elasticsearch/tree/${BuildParams.gitRevision}\"\n+      if (System.getenv('GIT_PREVIOUS_COMMIT')) {\n         background {\n           def changes = \"git diff --name-only ${System.getenv('GIT_PREVIOUS_COMMIT')}..${System.getenv('GIT_COMMIT')}\".execute().text.trim()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dd5603f4b88c68babdc69cd188756ba6e920b111"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDg3MTE4NQ==", "bodyText": "I didn't change this because GIT_PREVIOUS_COMMIT is subject to the same \"problem\". I think if anything we might just want to remove this entirely if it's not guaranteed to be accurate.", "url": "https://github.com/elastic/elasticsearch/pull/52487#discussion_r380871185", "createdAt": "2020-02-18T18:59:17Z", "author": {"login": "mark-vieira"}, "path": "gradle/build-scan.gradle", "diffHunk": "@@ -76,9 +77,9 @@ buildScan {\n         value 'Git Branch', branch\n         tag branch\n       }\n-      if (System.getenv('GIT_COMMIT')) {\n-        value 'Git Commit ID', System.getenv('GIT_COMMIT')\n-        link 'Source', \"https://github.com/elastic/elasticsearch/tree/${System.getenv('GIT_COMMIT')}\"\n+      value 'Git Commit ID', BuildParams.gitRevision\n+      link 'Source', \"https://github.com/elastic/elasticsearch/tree/${BuildParams.gitRevision}\"\n+      if (System.getenv('GIT_PREVIOUS_COMMIT')) {\n         background {\n           def changes = \"git diff --name-only ${System.getenv('GIT_PREVIOUS_COMMIT')}..${System.getenv('GIT_COMMIT')}\".execute().text.trim()", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDg0NTk4OQ=="}, "originalCommit": {"oid": "dd5603f4b88c68babdc69cd188756ba6e920b111"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDkwNzQ4NQ==", "bodyText": "So yeah, since we can't rely on GIT_COMMIT or GIT_PREVIOUS_COMMIT from Jenkins being actually correct I've just ditched this entirely.", "url": "https://github.com/elastic/elasticsearch/pull/52487#discussion_r380907485", "createdAt": "2020-02-18T20:08:41Z", "author": {"login": "mark-vieira"}, "path": "gradle/build-scan.gradle", "diffHunk": "@@ -76,9 +77,9 @@ buildScan {\n         value 'Git Branch', branch\n         tag branch\n       }\n-      if (System.getenv('GIT_COMMIT')) {\n-        value 'Git Commit ID', System.getenv('GIT_COMMIT')\n-        link 'Source', \"https://github.com/elastic/elasticsearch/tree/${System.getenv('GIT_COMMIT')}\"\n+      value 'Git Commit ID', BuildParams.gitRevision\n+      link 'Source', \"https://github.com/elastic/elasticsearch/tree/${BuildParams.gitRevision}\"\n+      if (System.getenv('GIT_PREVIOUS_COMMIT')) {\n         background {\n           def changes = \"git diff --name-only ${System.getenv('GIT_PREVIOUS_COMMIT')}..${System.getenv('GIT_COMMIT')}\".execute().text.trim()", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDg0NTk4OQ=="}, "originalCommit": {"oid": "dd5603f4b88c68babdc69cd188756ba6e920b111"}, "originalPosition": 17}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3954, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}