{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAxNjQ5NDI1", "number": 55032, "title": "EQL: Deprecate lenient sequence declaration", "bodyText": "Deprecate alternative sequence parameter declaration (with then by)\nDisallow maxspan time units missing.\nFix #55023\nRelate #54680", "createdAt": "2020-04-09T21:17:49Z", "url": "https://github.com/elastic/elasticsearch/pull/55032", "merged": true, "mergeCommit": {"oid": "201adafba9def1de4bf843760defb9def3394f63"}, "closed": true, "closedAt": "2020-04-10T07:29:18Z", "author": {"login": "costin"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcWDJXvAH2gAyNDAxNjQ5NDI1OjQ4MDMyMGRiZWMyZDk2YzA0ZmQ2NTJjYzc5ZmIyM2UzZDQyNjc5OGE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcWFEXzgFqTM5MTE5MjU3Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "480320dbec2d96c04fd652cc79fb23e3d426798a", "author": {"user": {"login": "costin", "name": "Costin Leau"}}, "url": "https://github.com/elastic/elasticsearch/commit/480320dbec2d96c04fd652cc79fb23e3d426798a", "committedDate": "2020-04-09T21:12:22Z", "message": "EQL: Deprecate lenient sequence declaration\n\nDeprecate alternative sequence parameter declaration (with then by)\nDisallow lack of time units inside maxspan\n\nFix #55023\nRelate #54680"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxMTkyMzEx", "url": "https://github.com/elastic/elasticsearch/pull/55032#pullrequestreview-391192311", "createdAt": "2020-04-09T23:25:46Z", "commit": {"oid": "480320dbec2d96c04fd652cc79fb23e3d426798a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQyMzoyNTo0NlrOGDsnQQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQyMzoyNTo0NlrOGDsnQQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjUyOTg1Nw==", "bodyText": "I think for #54760, we'll need to add micros and nanos.", "url": "https://github.com/elastic/elasticsearch/pull/55032#discussion_r406529857", "createdAt": "2020-04-09T23:25:46Z", "author": {"login": "rw-access"}, "path": "x-pack/plugin/eql/src/main/java/org/elasticsearch/xpack/eql/parser/LogicalPlanBuilder.java", "diffHunk": "@@ -173,45 +178,40 @@ public TimeValue visitSequenceParams(SequenceParamsContext ctx) {\n             }\n             \n             String timeString = text(ctx.timeUnit().IDENTIFIER());\n-            TimeUnit timeUnit = TimeUnit.SECONDS;\n-            if (timeString != null) {\n-                switch (timeString) {\n-                    case \"\":\n-                    case \"s\":\n-                    case \"sec\":\n-                    case \"secs\":\n-                    case \"second\":\n-                    case \"seconds\":\n-                        timeUnit = TimeUnit.SECONDS;\n-                        break;\n-                    case \"m\":\n-                    case \"min\":\n-                    case \"mins\":\n-                    case \"minute\":\n-                    case \"minutes\":\n-                        timeUnit = TimeUnit.MINUTES;\n-                        break;\n-                    case \"h\":\n-                    case \"hs\":\n-                    case \"hour\":\n-                    case \"hours\":\n-                        timeUnit = TimeUnit.HOURS;\n-                        break;\n-                    case \"d\":\n-                    case \"ds\":\n-                    case \"day\":\n-                    case \"days\":\n-                        timeUnit = TimeUnit.DAYS;\n-                        break;\n-                    default:\n-                        throw new ParsingException(source(ctx.timeUnit().IDENTIFIER()), \"Unrecognized time unit [{}]\", timeString);\n-                }\n+            \n+            if (timeString == null) {\n+                throw new ParsingException(source(ctx.timeUnit()), \"No time unit specified, did you mean [s] as in [{}s]?\", text(ctx\n+                        .timeUnit()));\n+            }\n+            \n+            TimeUnit timeUnit = null;\n+            switch (timeString) {\n+                case \"ms\":\n+                    timeUnit = TimeUnit.MILLISECONDS;\n+                    break;\n+                case \"s\":\n+                    timeUnit = TimeUnit.SECONDS;\n+                    break;\n+                case \"m\":\n+                    timeUnit = TimeUnit.MINUTES;\n+                    break;\n+                case \"h\":\n+                    timeUnit = TimeUnit.HOURS;\n+                    break;\n+                case \"d\":\n+                    timeUnit = TimeUnit.DAYS;\n+                    break;\n+                default:\n+                    throw new ParsingException(source(ctx.timeUnit().IDENTIFIER()),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "480320dbec2d96c04fd652cc79fb23e3d426798a"}, "originalPosition": 94}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxMTkyNTcz", "url": "https://github.com/elastic/elasticsearch/pull/55032#pullrequestreview-391192573", "createdAt": "2020-04-09T23:26:43Z", "commit": {"oid": "480320dbec2d96c04fd652cc79fb23e3d426798a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3428, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}