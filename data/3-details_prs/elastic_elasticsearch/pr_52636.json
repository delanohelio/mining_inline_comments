{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc4MjUzOTI2", "number": 52636, "title": "Validate role templates before saving role mapping", "bodyText": "Role names are now compiled from role templates before role mapping is saved.\nThis serves as validation for role templates to prevent malformed and invalid scripts\nto be persisted, which could later break authentication.\nResolves: #48773", "createdAt": "2020-02-21T12:14:18Z", "url": "https://github.com/elastic/elasticsearch/pull/52636", "merged": true, "mergeCommit": {"oid": "d0464893f6ad30440cc5162277538663702d7a7d"}, "closed": true, "closedAt": "2020-03-24T07:25:44Z", "author": {"login": "ywangd"}, "timelineItems": {"totalCount": 30, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcGebm0AH2gAyMzc4MjUzOTI2OjNjY2U4NGRlZTZjMmY5YTc4Y2JkM2I2YzNkZWYwZTY3YTRkMjc4NjM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcQtNRtAFqTM4MDAzNTY5NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3cce84dee6c2f9a78cbd3b6c3def0e67a4d27863", "author": {"user": {"login": "ywangd", "name": "Yang Wang"}}, "url": "https://github.com/elastic/elasticsearch/commit/3cce84dee6c2f9a78cbd3b6c3def0e67a4d27863", "committedDate": "2020-02-21T11:56:56Z", "message": "Validate role templates before save"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "07c78190056926c367efaba8701cfcc3d8664754", "author": {"user": {"login": "ywangd", "name": "Yang Wang"}}, "url": "https://github.com/elastic/elasticsearch/commit/07c78190056926c367efaba8701cfcc3d8664754", "committedDate": "2020-02-21T12:09:07Z", "message": "No double wrap for illegal argument exception"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a593def5217cea4ce31bc7544e62f65c833be8aa", "author": {"user": {"login": "ywangd", "name": "Yang Wang"}}, "url": "https://github.com/elastic/elasticsearch/commit/a593def5217cea4ce31bc7544e62f65c833be8aa", "committedDate": "2020-02-21T13:02:04Z", "message": "Fix doc tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3e2e4b4e862d27b8dc8977ae0511cc7c482df63d", "author": {"user": {"login": "ywangd", "name": "Yang Wang"}}, "url": "https://github.com/elastic/elasticsearch/commit/3e2e4b4e862d27b8dc8977ae0511cc7c482df63d", "committedDate": "2020-02-21T21:57:14Z", "message": "Merge remote-tracking branch 'origin/master' into es-48773-role-mapping-template"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYzOTIyMTU5", "url": "https://github.com/elastic/elasticsearch/pull/52636#pullrequestreview-363922159", "createdAt": "2020-02-25T07:39:19Z", "commit": {"oid": "3e2e4b4e862d27b8dc8977ae0511cc7c482df63d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "46cc8d348e7aaa28721059eb559dd69c40691885", "author": {"user": {"login": "ywangd", "name": "Yang Wang"}}, "url": "https://github.com/elastic/elasticsearch/commit/46cc8d348e7aaa28721059eb559dd69c40691885", "committedDate": "2020-02-26T04:09:13Z", "message": "Merge remote-tracking branch 'origin/master' into es-48773-role-mapping-template"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e07b24373fb4622c17468e1539fc39f9a188e853", "author": {"user": {"login": "ywangd", "name": "Yang Wang"}}, "url": "https://github.com/elastic/elasticsearch/commit/e07b24373fb4622c17468e1539fc39f9a188e853", "committedDate": "2020-02-26T05:08:01Z", "message": "Address feedback"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "51d9c20619a096594000abad3cf0664baac1210c", "author": {"user": {"login": "ywangd", "name": "Yang Wang"}}, "url": "https://github.com/elastic/elasticsearch/commit/51d9c20619a096594000abad3cf0664baac1210c", "committedDate": "2020-02-26T05:09:19Z", "message": "Revert change to mustacheTemplateEvaluator"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "18333bb5fdde92b265f942e1e8e21953f400610b", "author": {"user": {"login": "ywangd", "name": "Yang Wang"}}, "url": "https://github.com/elastic/elasticsearch/commit/18333bb5fdde92b265f942e1e8e21953f400610b", "committedDate": "2020-02-28T05:08:31Z", "message": "Add more tests for role template validation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e4f8ec258e55a6f4a9debd6da2919efc33f8e8bc", "author": {"user": {"login": "ywangd", "name": "Yang Wang"}}, "url": "https://github.com/elastic/elasticsearch/commit/e4f8ec258e55a6f4a9debd6da2919efc33f8e8bc", "committedDate": "2020-02-28T05:08:51Z", "message": "Merge remote-tracking branch 'origin/master' into es-48773-role-mapping-template"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d58a4c8ea60a5d3d33ea708f9d7b0befacbda4e5", "author": {"user": {"login": "ywangd", "name": "Yang Wang"}}, "url": "https://github.com/elastic/elasticsearch/commit/d58a4c8ea60a5d3d33ea708f9d7b0befacbda4e5", "committedDate": "2020-02-28T05:38:04Z", "message": "Fix tests and add doc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MTc0NjAz", "url": "https://github.com/elastic/elasticsearch/pull/52636#pullrequestreview-366174603", "createdAt": "2020-02-28T05:58:02Z", "commit": {"oid": "d58a4c8ea60a5d3d33ea708f9d7b0befacbda4e5"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwNTo1ODowMlrOFvqQ8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwNTo1ODowMlrOFvqQ8Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTUxOTg1Nw==", "bodyText": "We never call out what scripting features are related to which types of templates so \"corresponding\" might be confusing here. What's more,  we never call out the fact that you can reference a stored script in a template by id in any of the examples. Maybe something like:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            NOTE: Role templates require corresponding scripting feature to be enabled.\n          \n          \n            \n            Otherwise, role mapping with role templates will fail to create. See\n          \n          \n            \n            <<allowed-script-types-setting>>.\n          \n          \n            \n            NOTE: Role templates require the relevant scripting feature to be enabled, otherwise the creation of a role mapping with role templates will fail. See <<allowed-script-types-setting>>.\n          \n      \n    \n    \n  \n\nand add an example where we reference a stored script template by id ?", "url": "https://github.com/elastic/elasticsearch/pull/52636#discussion_r385519857", "createdAt": "2020-02-28T05:58:02Z", "author": {"login": "jkakavas"}, "path": "x-pack/docs/en/rest-api/security/create-role-mappings.asciidoc", "diffHunk": "@@ -77,10 +77,14 @@ _Exactly one of `roles` or `role_templates` must be specified_.\n `rules`::\n (Required, object) The rules that determine which users should be matched by the\n mapping. A rule is a logical condition that is expressed by using a JSON DSL.\n-See  <<role-mapping-resources>>. \n+See  <<role-mapping-resources>>.\n \n ==== Role Templates\n \n+NOTE: Role templates require corresponding scripting feature to be enabled.\n+Otherwise, role mapping with role templates will fail to create. See\n+<<allowed-script-types-setting>>.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d58a4c8ea60a5d3d33ea708f9d7b0befacbda4e5"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4587f14601d6ad09c6cf533384ae7faa6bd13162", "author": {"user": {"login": "ywangd", "name": "Yang Wang"}}, "url": "https://github.com/elastic/elasticsearch/commit/4587f14601d6ad09c6cf533384ae7faa6bd13162", "committedDate": "2020-03-01T23:25:36Z", "message": "Update x-pack/docs/en/rest-api/security/create-role-mappings.asciidoc\n\nCo-Authored-By: Ioannis Kakavas <ikakavas@protonmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7ed53224409c090378218c532bdb9109fdb0f370", "author": {"user": {"login": "ywangd", "name": "Yang Wang"}}, "url": "https://github.com/elastic/elasticsearch/commit/7ed53224409c090378218c532bdb9109fdb0f370", "committedDate": "2020-03-02T00:01:13Z", "message": "Merge remote-tracking branch 'origin/master' into es-48773-role-mapping-template"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "59b840550c0605d54476fca8072384af34031bd2", "author": {"user": {"login": "ywangd", "name": "Yang Wang"}}, "url": "https://github.com/elastic/elasticsearch/commit/59b840550c0605d54476fca8072384af34031bd2", "committedDate": "2020-03-02T00:05:27Z", "message": "Add example of using stored script for role templates"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2OTQ5Mjcy", "url": "https://github.com/elastic/elasticsearch/pull/52636#pullrequestreview-366949272", "createdAt": "2020-03-02T04:50:09Z", "commit": {"oid": "59b840550c0605d54476fca8072384af34031bd2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQwNDo1MDoxMFrOFwTjoQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQwNDo1MDoxMFrOFwTjoQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjE5NjM4NQ==", "bodyText": "Can we think carefully about whether we really want to document & support this?\nWhat's the use case? Why do we want to elevate this to \"officially supported\"?", "url": "https://github.com/elastic/elasticsearch/pull/52636#discussion_r386196385", "createdAt": "2020-03-02T04:50:10Z", "author": {"login": "tvernum"}, "path": "x-pack/docs/en/rest-api/security/create-role-mappings.asciidoc", "diffHunk": "@@ -233,6 +237,38 @@ POST /_security/role_mapping/mapping5\n <2> Because the template produces a JSON array, the format must be\n     set to `json`.\n \n+In addition to inline script, we can also use stored script for the\n+`template` field. Above role mapping can also be created with the follows:\n+\n+[source,console]\n+------------------------------------------------------------\n+POST /_scripts/derive-roles\n+{\n+  \"script\": {\n+      \"lang\": \"mustache\",\n+      \"source\" : \"{{#tojson}}groups{{/tojson}}\"\n+  }\n+}\n+------------------------------------------------------------\n+\n+[source,console]\n+------------------------------------------------------------\n+POST /_security/role_mapping/mapping5\n+{\n+  \"role_templates\": [\n+    {\n+      \"template\": { \"id\": \"derive-roles\" },\n+      \"format\" : \"json\"\n+    }\n+  ],\n+  \"rules\": {\n+    \"field\" : { \"realm.name\" : \"saml1\" }\n+  },\n+  \"enabled\": true\n+}\n+------------------------------------------------------------\n+// TEST[continued]\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "59b840550c0605d54476fca8072384af34031bd2"}, "originalPosition": 60}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3NDQzNTc2", "url": "https://github.com/elastic/elasticsearch/pull/52636#pullrequestreview-367443576", "createdAt": "2020-03-02T18:55:44Z", "commit": {"oid": "59b840550c0605d54476fca8072384af34031bd2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxODo1NTo0NFrOFwrN0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxODo1NTo0NFrOFwrN0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjU4NDAxOQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            In addition to inline script, we can also use stored script for the\n          \n          \n            \n            In addition to an inline script, you can also use a stored script for the", "url": "https://github.com/elastic/elasticsearch/pull/52636#discussion_r386584019", "createdAt": "2020-03-02T18:55:44Z", "author": {"login": "lcawl"}, "path": "x-pack/docs/en/rest-api/security/create-role-mappings.asciidoc", "diffHunk": "@@ -233,6 +237,38 @@ POST /_security/role_mapping/mapping5\n <2> Because the template produces a JSON array, the format must be\n     set to `json`.\n \n+In addition to inline script, we can also use stored script for the", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "59b840550c0605d54476fca8072384af34031bd2"}, "originalPosition": 29}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3NDQ0Nzk2", "url": "https://github.com/elastic/elasticsearch/pull/52636#pullrequestreview-367444796", "createdAt": "2020-03-02T18:57:26Z", "commit": {"oid": "59b840550c0605d54476fca8072384af34031bd2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxODo1NzoyNlrOFwrRzg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxODo1NzoyNlrOFwrRzg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjU4NTAzOA==", "bodyText": "I think this NOTE should move below the introductory paragraph, since at this point we haven't defined role templates yet.  I actually also think this whole \"Role templates\" subsection should be moved into the \"Description\" section.  If you're willing to let me add that change to this PR, let me know and I'll push a commit.", "url": "https://github.com/elastic/elasticsearch/pull/52636#discussion_r386585038", "createdAt": "2020-03-02T18:57:26Z", "author": {"login": "lcawl"}, "path": "x-pack/docs/en/rest-api/security/create-role-mappings.asciidoc", "diffHunk": "@@ -77,10 +77,14 @@ _Exactly one of `roles` or `role_templates` must be specified_.\n `rules`::\n (Required, object) The rules that determine which users should be matched by the\n mapping. A rule is a logical condition that is expressed by using a JSON DSL.\n-See  <<role-mapping-resources>>. \n+See  <<role-mapping-resources>>.\n \n ==== Role Templates\n \n+NOTE: Role templates require the relevant scripting feature to be enabled,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "59b840550c0605d54476fca8072384af34031bd2"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3NDQ2MzMw", "url": "https://github.com/elastic/elasticsearch/pull/52636#pullrequestreview-367446330", "createdAt": "2020-03-02T18:59:32Z", "commit": {"oid": "59b840550c0605d54476fca8072384af34031bd2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxODo1OTozM1rOFwrWcA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxODo1OTozM1rOFwrWcA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjU4NjIyNA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            NOTE: Role templates require the relevant scripting feature to be enabled,\n          \n          \n            \n            NOTE: To use role templates successfully, the relevant scripting feature must be enabled.", "url": "https://github.com/elastic/elasticsearch/pull/52636#discussion_r386586224", "createdAt": "2020-03-02T18:59:33Z", "author": {"login": "lcawl"}, "path": "x-pack/docs/en/rest-api/security/create-role-mappings.asciidoc", "diffHunk": "@@ -77,10 +77,14 @@ _Exactly one of `roles` or `role_templates` must be specified_.\n `rules`::\n (Required, object) The rules that determine which users should be matched by the\n mapping. A rule is a logical condition that is expressed by using a JSON DSL.\n-See  <<role-mapping-resources>>. \n+See  <<role-mapping-resources>>.\n \n ==== Role Templates\n \n+NOTE: Role templates require the relevant scripting feature to be enabled,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "59b840550c0605d54476fca8072384af34031bd2"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3NDQ2OTc0", "url": "https://github.com/elastic/elasticsearch/pull/52636#pullrequestreview-367446974", "createdAt": "2020-03-02T19:00:24Z", "commit": {"oid": "59b840550c0605d54476fca8072384af34031bd2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxOTowMDoyNVrOFwrYTQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxOTowMDoyNVrOFwrYTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjU4NjcwMQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            otherwise the creation of a role mapping with role templates will fail.\n          \n          \n            \n            Otherwise, all attempts to create a role mapping with role templates fail.", "url": "https://github.com/elastic/elasticsearch/pull/52636#discussion_r386586701", "createdAt": "2020-03-02T19:00:25Z", "author": {"login": "lcawl"}, "path": "x-pack/docs/en/rest-api/security/create-role-mappings.asciidoc", "diffHunk": "@@ -77,10 +77,14 @@ _Exactly one of `roles` or `role_templates` must be specified_.\n `rules`::\n (Required, object) The rules that determine which users should be matched by the\n mapping. A rule is a logical condition that is expressed by using a JSON DSL.\n-See  <<role-mapping-resources>>. \n+See  <<role-mapping-resources>>.\n \n ==== Role Templates\n \n+NOTE: Role templates require the relevant scripting feature to be enabled,\n+otherwise the creation of a role mapping with role templates will fail.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "59b840550c0605d54476fca8072384af34031bd2"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f4494652a7218fea78fdd0f6ac1da0e31388ad8", "author": {"user": {"login": "ywangd", "name": "Yang Wang"}}, "url": "https://github.com/elastic/elasticsearch/commit/2f4494652a7218fea78fdd0f6ac1da0e31388ad8", "committedDate": "2020-03-02T23:51:30Z", "message": "Update x-pack/docs/en/rest-api/security/create-role-mappings.asciidoc\n\nCo-Authored-By: Lisa Cawley <lcawley@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f84c1e4dadd0b135da828118e211dcbe9635fe2", "author": {"user": {"login": "ywangd", "name": "Yang Wang"}}, "url": "https://github.com/elastic/elasticsearch/commit/2f84c1e4dadd0b135da828118e211dcbe9635fe2", "committedDate": "2020-03-02T23:51:46Z", "message": "Update x-pack/docs/en/rest-api/security/create-role-mappings.asciidoc\n\nCo-Authored-By: Lisa Cawley <lcawley@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f2512fccb364b055326ff5a97080756e15124e8", "author": {"user": {"login": "ywangd", "name": "Yang Wang"}}, "url": "https://github.com/elastic/elasticsearch/commit/3f2512fccb364b055326ff5a97080756e15124e8", "committedDate": "2020-03-02T23:55:25Z", "message": "Update x-pack/docs/en/rest-api/security/create-role-mappings.asciidoc\n\nCo-Authored-By: Lisa Cawley <lcawley@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f9c0b48d1516a42d9b0227476aea7e8016ed5486", "author": {"user": {"login": "ywangd", "name": "Yang Wang"}}, "url": "https://github.com/elastic/elasticsearch/commit/f9c0b48d1516a42d9b0227476aea7e8016ed5486", "committedDate": "2020-03-03T00:11:20Z", "message": "Merge remote-tracking branch 'origin/master' into es-48773-role-mapping-template"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b6f68ba2c54575f985f207d79e181a93c012742f", "author": {"user": {"login": "lcawl", "name": "Lisa Cawley"}}, "url": "https://github.com/elastic/elasticsearch/commit/b6f68ba2c54575f985f207d79e181a93c012742f", "committedDate": "2020-03-03T00:42:34Z", "message": "[DOCS] Moves role templates into API description"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4MTg5OTg3", "url": "https://github.com/elastic/elasticsearch/pull/52636#pullrequestreview-368189987", "createdAt": "2020-03-03T17:44:35Z", "commit": {"oid": "b6f68ba2c54575f985f207d79e181a93c012742f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QxNzo0NDozNVrOFxQAVA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QxNzo0NDozNVrOFxQAVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzE4Njc3Mg==", "bodyText": "It's a bad practice to link to the auto-generated anchors, so it's unfortunate that one in the Kibana docs snuck through.  I think by explicitly defining that anchor, however, we should avoid breaking the link:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            [[security-api-put-role-mapping-desc-templates]]\n          \n          \n            \n            [[_role_templates]]", "url": "https://github.com/elastic/elasticsearch/pull/52636#discussion_r387186772", "createdAt": "2020-03-03T17:44:35Z", "author": {"login": "lcawl"}, "path": "x-pack/docs/en/rest-api/security/create-role-mappings.asciidoc", "diffHunk": "@@ -37,6 +37,31 @@ roles API>> or <<roles-management-file,roles files>>.\n \n For more information, see <<mapping-roles>>.\n \n+[[security-api-put-role-mapping-desc-templates]]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b6f68ba2c54575f985f207d79e181a93c012742f"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c86d09ba4e737d347956154a0412ee5e2addc840", "author": {"user": {"login": "lcawl", "name": "Lisa Cawley"}}, "url": "https://github.com/elastic/elasticsearch/commit/c86d09ba4e737d347956154a0412ee5e2addc840", "committedDate": "2020-03-03T17:45:45Z", "message": "Update x-pack/docs/en/rest-api/security/create-role-mappings.asciidoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d464d7388c75903c414538f0e87144566ad7e7c0", "author": {"user": {"login": "ywangd", "name": "Yang Wang"}}, "url": "https://github.com/elastic/elasticsearch/commit/d464d7388c75903c414538f0e87144566ad7e7c0", "committedDate": "2020-03-24T03:33:59Z", "message": "Merge remote-tracking branch 'origin/master' into es-48773-role-mapping-template"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe0da6782768acfb82984e5b49bb0af927ff38aa", "author": {"user": {"login": "ywangd", "name": "Yang Wang"}}, "url": "https://github.com/elastic/elasticsearch/commit/fe0da6782768acfb82984e5b49bb0af927ff38aa", "committedDate": "2020-03-24T03:38:57Z", "message": "Remove doc of using stored script for role template since we do not recommend it"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgwMDM1Njk0", "url": "https://github.com/elastic/elasticsearch/pull/52636#pullrequestreview-380035694", "createdAt": "2020-03-24T06:49:06Z", "commit": {"oid": "fe0da6782768acfb82984e5b49bb0af927ff38aa"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2274, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}