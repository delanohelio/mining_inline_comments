{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk5OTM1MDUw", "number": 63487, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNDowNTowOFrOEroXdA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNDowNTowOFrOEroXdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MTg1NTg4OnYy", "diffSide": "RIGHT", "path": "test/framework/src/main/java/org/elasticsearch/index/mapper/MapperTestCase.java", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNDowNTowOFrOHegRpw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QwODozNTo1N1rOHgbmwg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTc0ODEzNQ==", "bodyText": "Can we put this on FieldTypeTestCase rather than MapperTestCase? Given that we're explicitly checking things in MappedFieldType rather than FieldMapper I think it would work better there.", "url": "https://github.com/elastic/elasticsearch/pull/63487#discussion_r501748135", "createdAt": "2020-10-08T14:05:08Z", "author": {"login": "romseygeek"}, "path": "test/framework/src/main/java/org/elasticsearch/index/mapper/MapperTestCase.java", "diffHunk": "@@ -420,4 +429,24 @@ public void testUpdates() throws IOException {\n         assertParseMaximalWarnings();\n     }\n \n+    public final void testTextSearchInfoConsistency() throws IOException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "468db114783aabf4d039b1f79ded8829d4778c13"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTc2ODcwMg==", "bodyText": "that makes sense, but it would require replicating quite some logic in both test base classes. I am reusing some of the existing methods here that are missing in FieldTypeTestCase. What do you think?", "url": "https://github.com/elastic/elasticsearch/pull/63487#discussion_r501768702", "createdAt": "2020-10-08T14:31:14Z", "author": {"login": "javanna"}, "path": "test/framework/src/main/java/org/elasticsearch/index/mapper/MapperTestCase.java", "diffHunk": "@@ -420,4 +429,24 @@ public void testUpdates() throws IOException {\n         assertParseMaximalWarnings();\n     }\n \n+    public final void testTextSearchInfoConsistency() throws IOException {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTc0ODEzNQ=="}, "originalCommit": {"oid": "468db114783aabf4d039b1f79ded8829d4778c13"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTgzMDQxNg==", "bodyText": "cc @nik9000 - I think it's still worth trying to keep things separate?\nAnother possibility is to actually make this a constraint by moving the termQuery() etc factory functions onto TextSearchInfo.", "url": "https://github.com/elastic/elasticsearch/pull/63487#discussion_r501830416", "createdAt": "2020-10-08T15:53:33Z", "author": {"login": "romseygeek"}, "path": "test/framework/src/main/java/org/elasticsearch/index/mapper/MapperTestCase.java", "diffHunk": "@@ -420,4 +429,24 @@ public void testUpdates() throws IOException {\n         assertParseMaximalWarnings();\n     }\n \n+    public final void testTextSearchInfoConsistency() throws IOException {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTc0ODEzNQ=="}, "originalCommit": {"oid": "468db114783aabf4d039b1f79ded8829d4778c13"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTg3OTIxNA==", "bodyText": "I think it'd make sense to merge FieldTypeTestCase into MapperTestCase.  It might also make sense to move the query builder methods but one thing at a time!", "url": "https://github.com/elastic/elasticsearch/pull/63487#discussion_r501879214", "createdAt": "2020-10-08T17:10:04Z", "author": {"login": "nik9000"}, "path": "test/framework/src/main/java/org/elasticsearch/index/mapper/MapperTestCase.java", "diffHunk": "@@ -420,4 +429,24 @@ public void testUpdates() throws IOException {\n         assertParseMaximalWarnings();\n     }\n \n+    public final void testTextSearchInfoConsistency() throws IOException {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTc0ODEzNQ=="}, "originalCommit": {"oid": "468db114783aabf4d039b1f79ded8829d4778c13"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzc2ODc3MA==", "bodyText": "I would prefer addressing where the new test should be at a later stage. I am not sure it is worth duplicating all of the needed testing logic to FieldTypeTestCase, and the other proposed alternatives look like potential follow-ups too.", "url": "https://github.com/elastic/elasticsearch/pull/63487#discussion_r503768770", "createdAt": "2020-10-13T08:35:57Z", "author": {"login": "javanna"}, "path": "test/framework/src/main/java/org/elasticsearch/index/mapper/MapperTestCase.java", "diffHunk": "@@ -420,4 +429,24 @@ public void testUpdates() throws IOException {\n         assertParseMaximalWarnings();\n     }\n \n+    public final void testTextSearchInfoConsistency() throws IOException {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTc0ODEzNQ=="}, "originalCommit": {"oid": "468db114783aabf4d039b1f79ded8829d4778c13"}, "originalPosition": 30}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3061, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}