{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk3NTEyNTU1", "number": 54633, "title": "indices.recovery.max_bytes_per_sec may be per-node", "bodyText": "The indices.recovery.max_bytes_per_sec recovery bandwidth limit can differ\nbetween nodes if it is not set dynamically, but today this is not obvious. This\ncommit adds a paragraph to its documentation clarifying how to set different\nbandwidth limits on each node.", "createdAt": "2020-04-02T11:14:41Z", "url": "https://github.com/elastic/elasticsearch/pull/54633", "merged": true, "mergeCommit": {"oid": "ac1b6eb5e917fc3c4d83969323cca84638977806"}, "closed": true, "closedAt": "2020-04-02T17:14:35Z", "author": {"login": "DaveCTurner"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcTp8MfAH2gAyMzk3NTEyNTU1OjIyZTg4M2MyYTg1ZGM4M2Y4YTk0OWQwNDgyM2JiZGUyYTRkMjI0MzM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcTtkU7gFqTM4NjUxMDAzNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "22e883c2a85dc83f8a949d04823bbde2a4d22433", "author": {"user": {"login": "DaveCTurner", "name": "David Turner"}}, "url": "https://github.com/elastic/elasticsearch/commit/22e883c2a85dc83f8a949d04823bbde2a4d22433", "committedDate": "2020-04-02T10:42:30Z", "message": "indices.recovery.max_bytes_per_sec may be per-node\n\nThe `indices.recovery.max_bytes_per_sec` recovery bandwidth limit can differ\nbetween nodes if it is not set dynamically, but today this is not obvious. This\ncommit adds a paragraph to its documentation clarifying how to set different\nbandwidth limits on each node."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg2NDMxMjc2", "url": "https://github.com/elastic/elasticsearch/pull/54633#pullrequestreview-386431276", "createdAt": "2020-04-02T13:35:37Z", "commit": {"oid": "22e883c2a85dc83f8a949d04823bbde2a4d22433"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxMzozNTozN1rOF_rfuw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxMzozNTozN1rOF_rfuw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjMxNzI0Mw==", "bodyText": "This doesn't render properly because :: falls on a different line.\nI think we can move the parenthetical info inside the definition like this:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            `indices.recovery.max_concurrent_file_chunks`\n          \n          \n            \n            (<<cluster-update-settings,Dynamic>>, Expert):: Number of file chunk requests\n          \n          \n            \n            sent in parallel for each recovery. Defaults to `2`.\n          \n          \n            \n            `indices.recovery.max_concurrent_file_chunks`:: \n          \n          \n            \n            (<<cluster-update-settings,Dynamic>>, Expert)\n          \n          \n            \n            Number of file chunk requests sent in parallel for each recovery. Defaults to\n          \n          \n            \n            `2`.", "url": "https://github.com/elastic/elasticsearch/pull/54633#discussion_r402317243", "createdAt": "2020-04-02T13:35:37Z", "author": {"login": "jrodewig"}, "path": "docs/reference/modules/indices/recovery.asciidoc", "diffHunk": "@@ -17,24 +16,34 @@ You can view a list of in-progress and completed recoveries using the\n ==== Peer recovery settings\n \n `indices.recovery.max_bytes_per_sec` (<<cluster-update-settings,Dynamic>>)::\n-Limits total inbound and outbound recovery traffic for each node.\n-Defaults to `40mb`.\n+Limits total inbound and outbound recovery traffic for each node. Defaults to\n+`40mb`.\n +\n-This limit applies to nodes only. If multiple nodes in a cluster perform\n-recoveries at the same time, the cluster's total recovery traffic may exceed\n-this limit.\n+This limit applies to each node separately. If multiple nodes in a cluster\n+perform recoveries at the same time, the cluster's total recovery traffic may\n+exceed this limit.\n +\n-If this limit is too high, ongoing recoveries may consume an excess\n-of bandwidth and other resources, which can destabilize the cluster.\n+If this limit is too high, ongoing recoveries may consume an excess of bandwidth\n+and other resources, which can destabilize the cluster.\n++\n+This is a dynamic setting which means you can set it in each node's\n+`elasticsearch.yml` config file and you can update it dynamically using the\n+<<cluster-update-settings,cluster update settings API>>. If you set it\n+dynamically then the same limit applies on every node in the cluster. If you do\n+not set it dynamically then you can set a different limit on each node, which\n+is useful if some of your nodes have better bandwidth than others. For example,\n+if you are using <<overview-index-lifecycle-management,Index Lifecycle\n+Management>> then you may restrict the recovery bandwidth on your warm nodes\n+more than on your hot nodes.\n \n [float]\n ==== Expert peer recovery settings\n You can use the following _expert_ setting to manage resources for peer\n recoveries.\n \n-`indices.recovery.max_concurrent_file_chunks` (<<cluster-update-settings,Dynamic>>, Expert)::\n-Number of file chunk requests sent in parallel for each recovery. Defaults to\n-`2`.\n+`indices.recovery.max_concurrent_file_chunks`\n+(<<cluster-update-settings,Dynamic>>, Expert):: Number of file chunk requests\n+sent in parallel for each recovery. Defaults to `2`.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "22e883c2a85dc83f8a949d04823bbde2a4d22433"}, "originalPosition": 51}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg2NDMxOTUz", "url": "https://github.com/elastic/elasticsearch/pull/54633#pullrequestreview-386431953", "createdAt": "2020-04-02T13:36:20Z", "commit": {"oid": "22e883c2a85dc83f8a949d04823bbde2a4d22433"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxMzozNjoyMFrOF_rhyw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxMzozNjoyMFrOF_rhyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjMxNzc3MQ==", "bodyText": "Github won't let me suggest, but we may want to move the parenthetical inside the definition as with indices.recovery.max_concurrent_file_chunks.", "url": "https://github.com/elastic/elasticsearch/pull/54633#discussion_r402317771", "createdAt": "2020-04-02T13:36:20Z", "author": {"login": "jrodewig"}, "path": "docs/reference/modules/indices/recovery.asciidoc", "diffHunk": "@@ -17,24 +16,34 @@ You can view a list of in-progress and completed recoveries using the\n ==== Peer recovery settings\n \n `indices.recovery.max_bytes_per_sec` (<<cluster-update-settings,Dynamic>>)::", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "22e883c2a85dc83f8a949d04823bbde2a4d22433"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg2NDMzNDYy", "url": "https://github.com/elastic/elasticsearch/pull/54633#pullrequestreview-386433462", "createdAt": "2020-04-02T13:38:01Z", "commit": {"oid": "22e883c2a85dc83f8a949d04823bbde2a4d22433"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxMzozODowMVrOF_rmUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxMzozODowMVrOF_rmUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjMxODkyOQ==", "bodyText": "I would just add a comma here.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            This is a dynamic setting which means you can set it in each node's\n          \n          \n            \n            `elasticsearch.yml` config file and you can update it dynamically using the\n          \n          \n            \n            <<cluster-update-settings,cluster update settings API>>. If you set it\n          \n          \n            \n            This is a dynamic setting, which means you can set it in each node's\n          \n          \n            \n            `elasticsearch.yml` config file and you can update it dynamically using the\n          \n          \n            \n            <<cluster-update-settings,cluster update settings API>>. If you set it", "url": "https://github.com/elastic/elasticsearch/pull/54633#discussion_r402318929", "createdAt": "2020-04-02T13:38:01Z", "author": {"login": "jrodewig"}, "path": "docs/reference/modules/indices/recovery.asciidoc", "diffHunk": "@@ -17,24 +16,34 @@ You can view a list of in-progress and completed recoveries using the\n ==== Peer recovery settings\n \n `indices.recovery.max_bytes_per_sec` (<<cluster-update-settings,Dynamic>>)::\n-Limits total inbound and outbound recovery traffic for each node.\n-Defaults to `40mb`.\n+Limits total inbound and outbound recovery traffic for each node. Defaults to\n+`40mb`.\n +\n-This limit applies to nodes only. If multiple nodes in a cluster perform\n-recoveries at the same time, the cluster's total recovery traffic may exceed\n-this limit.\n+This limit applies to each node separately. If multiple nodes in a cluster\n+perform recoveries at the same time, the cluster's total recovery traffic may\n+exceed this limit.\n +\n-If this limit is too high, ongoing recoveries may consume an excess\n-of bandwidth and other resources, which can destabilize the cluster.\n+If this limit is too high, ongoing recoveries may consume an excess of bandwidth\n+and other resources, which can destabilize the cluster.\n++\n+This is a dynamic setting which means you can set it in each node's\n+`elasticsearch.yml` config file and you can update it dynamically using the\n+<<cluster-update-settings,cluster update settings API>>. If you set it", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "22e883c2a85dc83f8a949d04823bbde2a4d22433"}, "originalPosition": 33}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg2NDM2Nzg2", "url": "https://github.com/elastic/elasticsearch/pull/54633#pullrequestreview-386436786", "createdAt": "2020-04-02T13:41:34Z", "commit": {"oid": "22e883c2a85dc83f8a949d04823bbde2a4d22433"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxMzo0MTozNVrOF_rxSA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxMzo0MTozNVrOF_rxSA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjMyMTczNg==", "bodyText": "Slight reword\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            if you are using <<overview-index-lifecycle-management,Index Lifecycle\n          \n          \n            \n            Management>> then you may restrict the recovery bandwidth on your warm nodes\n          \n          \n            \n            more than on your hot nodes.\n          \n          \n            \n            if you are use <<overview-index-lifecycle-management,Index Lifecycle\n          \n          \n            \n            Management>>, you may give hot nodes a higher recovery bandwidth limit than\n          \n          \n            \n            warm nodes.", "url": "https://github.com/elastic/elasticsearch/pull/54633#discussion_r402321736", "createdAt": "2020-04-02T13:41:35Z", "author": {"login": "jrodewig"}, "path": "docs/reference/modules/indices/recovery.asciidoc", "diffHunk": "@@ -17,24 +16,34 @@ You can view a list of in-progress and completed recoveries using the\n ==== Peer recovery settings\n \n `indices.recovery.max_bytes_per_sec` (<<cluster-update-settings,Dynamic>>)::\n-Limits total inbound and outbound recovery traffic for each node.\n-Defaults to `40mb`.\n+Limits total inbound and outbound recovery traffic for each node. Defaults to\n+`40mb`.\n +\n-This limit applies to nodes only. If multiple nodes in a cluster perform\n-recoveries at the same time, the cluster's total recovery traffic may exceed\n-this limit.\n+This limit applies to each node separately. If multiple nodes in a cluster\n+perform recoveries at the same time, the cluster's total recovery traffic may\n+exceed this limit.\n +\n-If this limit is too high, ongoing recoveries may consume an excess\n-of bandwidth and other resources, which can destabilize the cluster.\n+If this limit is too high, ongoing recoveries may consume an excess of bandwidth\n+and other resources, which can destabilize the cluster.\n++\n+This is a dynamic setting which means you can set it in each node's\n+`elasticsearch.yml` config file and you can update it dynamically using the\n+<<cluster-update-settings,cluster update settings API>>. If you set it\n+dynamically then the same limit applies on every node in the cluster. If you do\n+not set it dynamically then you can set a different limit on each node, which\n+is useful if some of your nodes have better bandwidth than others. For example,\n+if you are using <<overview-index-lifecycle-management,Index Lifecycle\n+Management>> then you may restrict the recovery bandwidth on your warm nodes\n+more than on your hot nodes.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "22e883c2a85dc83f8a949d04823bbde2a4d22433"}, "originalPosition": 39}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg2NDM4NDQ3", "url": "https://github.com/elastic/elasticsearch/pull/54633#pullrequestreview-386438447", "createdAt": "2020-04-02T13:43:22Z", "commit": {"oid": "22e883c2a85dc83f8a949d04823bbde2a4d22433"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6499ae9faf37f31659ca89824d9e2deb878c376", "author": {"user": {"login": "DaveCTurner", "name": "David Turner"}}, "url": "https://github.com/elastic/elasticsearch/commit/c6499ae9faf37f31659ca89824d9e2deb878c376", "committedDate": "2020-04-02T13:43:43Z", "message": "Update docs/reference/modules/indices/recovery.asciidoc\n\nCo-Authored-By: James Rodewig <james.rodewig@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4b671cadbf35e56d708c6ecb84eabf7380ebd703", "author": {"user": {"login": "DaveCTurner", "name": "David Turner"}}, "url": "https://github.com/elastic/elasticsearch/commit/4b671cadbf35e56d708c6ecb84eabf7380ebd703", "committedDate": "2020-04-02T13:45:14Z", "message": "Line break"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ec7afdaca3129d1262001f43363c612d337cc91", "author": {"user": {"login": "DaveCTurner", "name": "David Turner"}}, "url": "https://github.com/elastic/elasticsearch/commit/6ec7afdaca3129d1262001f43363c612d337cc91", "committedDate": "2020-04-02T13:46:29Z", "message": "Reword"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2221b3ee0820d6bdea06425e70188b97d9e8726", "author": {"user": {"login": "DaveCTurner", "name": "David Turner"}}, "url": "https://github.com/elastic/elasticsearch/commit/e2221b3ee0820d6bdea06425e70188b97d9e8726", "committedDate": "2020-04-02T13:49:27Z", "message": "Move parentheticals inside definitions"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg2NTEwMDM3", "url": "https://github.com/elastic/elasticsearch/pull/54633#pullrequestreview-386510037", "createdAt": "2020-04-02T14:56:03Z", "commit": {"oid": "e2221b3ee0820d6bdea06425e70188b97d9e8726"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1283, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}