{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU1OTg4MjI4", "number": 60159, "title": "[DOCS] Adds table with icons for version compatibility", "bodyText": "Adds a new version compatibility table to make scanning easier.\nUses icons from #1915 for shareability and ease of use.\nResolves #46596\nBackports:\n\n7.x #60302\n7.9 #60303\n7.8 #60305", "createdAt": "2020-07-23T22:44:45Z", "url": "https://github.com/elastic/elasticsearch/pull/60159", "merged": true, "mergeCommit": {"oid": "714c8861dc5dab232b7f25e440425941f3aad882"}, "closed": true, "closedAt": "2020-07-28T14:27:56Z", "author": {"login": "lockewritesdocs"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc33ODrgH2gAyNDU1OTg4MjI4OjE2YjRiNDZkZjg0MDNhNWVlODE1NzE3MWUzYmRmYzJhZmVhMDQ4ODI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc5W9MZgH2gAyNDU1OTg4MjI4Ojc3ZmMwN2EzOTNiZGIwYWU5MzNkMDZhNmM3ODdhNjRhYzFjZjQxMzM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "16b4b46df8403a5ee8157171e3bdfc2afea04882", "author": {"user": {"login": "lockewritesdocs", "name": "Adam Locke"}}, "url": "https://github.com/elastic/elasticsearch/commit/16b4b46df8403a5ee8157171e3bdfc2afea04882", "committedDate": "2020-07-23T22:32:03Z", "message": "Adds table with icons for simplicity."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1ODkyMTI5", "url": "https://github.com/elastic/elasticsearch/pull/60159#pullrequestreview-455892129", "createdAt": "2020-07-27T15:28:10Z", "commit": {"oid": "16b4b46df8403a5ee8157171e3bdfc2afea04882"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "710bdf09a1c62ce4ff9070c6ea8184250c3087fb", "author": {"user": {"login": "lockewritesdocs", "name": "Adam Locke"}}, "url": "https://github.com/elastic/elasticsearch/commit/710bdf09a1c62ce4ff9070c6ea8184250c3087fb", "committedDate": "2020-07-27T16:11:33Z", "message": "Updating table for clarity."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1OTI0MTQ4", "url": "https://github.com/elastic/elasticsearch/pull/60159#pullrequestreview-455924148", "createdAt": "2020-07-27T16:04:48Z", "commit": {"oid": "16b4b46df8403a5ee8157171e3bdfc2afea04882"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNjowNDo0OFrOG3pOcw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNjoxMToyOVrOG3perw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTAwMDMwNw==", "bodyText": "Sorry for mixing this in here but it relates. This sentence is not correct. ES does not support restoring a newer version snapshot to an older version cluster at all. It's just not possible. So \"We do not recommend \" -> \"Elasticsearch does not support \" or so :)", "url": "https://github.com/elastic/elasticsearch/pull/60159#discussion_r461000307", "createdAt": "2020-07-27T16:04:48Z", "author": {"login": "original-brownbear"}, "path": "docs/reference/snapshot-restore/index.asciidoc", "diffHunk": "@@ -57,17 +57,21 @@ when migrating between versions.\n \n A snapshot contains a copy of the on-disk data structures that make up an\n index or a data stream's backing indices. This means that snapshots can only be restored to versions of\n-{es} that can read the indices:\n-\n-* A snapshot of an index created in 6.x can be restored to 7.x.\n-* A snapshot of an index created in 5.x can be restored to 6.x.\n-* A snapshot of an index created in 2.x can be restored to 5.x.\n-* A snapshot of an index created in 1.x can be restored to 2.x.\n-\n-Conversely, snapshots of indices created in 1.x **cannot** be restored to 5.x\n-or 6.x, snapshots of indices created in 2.x **cannot** be restored to 6.x\n-or 7.x, and snapshots of indices created in 5.x **cannot** be restored to 7.x\n-or 8.x.\n+{es} that can read the indices.\n+\n+The following table indicates snapshot compatibility between versions.\n+\n+// tag::snapshot-compatibility-matrix[]\n+[cols=\"6*^\"]\n+|===\n+| Compatibility | 2.x | 5.x | 6.x | 7.x | 8.x\n+| 1.x |{yes-icon} |{no-icon}  |{no-icon}  |{no-icon}  |{no-icon}\n+| 2.x |{no-icon}  |{yes-icon} |{no-icon}  |{no-icon}  |{no-icon}\n+| 5.x |{no-icon}  |{no-icon}  |{yes-icon} |{no-icon}  |{no-icon}\n+| 6.x |{no-icon}  |{no-icon}  |{no-icon}  |{yes-icon} |{no-icon}\n+| 7.x |{no-icon}  |{no-icon}  |{no-icon}  |{no-icon}  |{yes-icon}\n+|===\n+// end::snapshot-compatibility-matrix[]\n \n We do not recommend restoring snapshots from later {es} versions in earlier", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "16b4b46df8403a5ee8157171e3bdfc2afea04882"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTAwNDQ2Mw==", "bodyText": "This is a confusing table to me to be honest:\nFor starters:\n\nI'm not sure we actually should enumerate all the possible version configurations here.\nWhy would 5.x -> 5.x not be a \"yes\"?\n\nMaybe it would be more helpful to make the two constraints we have crystal clear and shorten this section. In the end these two things are the rules (see my comment below also):\n\nYou cannot restore a snapshot taken by a version x into a cluster of version y if x is newer than y.\nYou cannot restore an index that was created with a version x into a cluster of version y if y is more than one major version newer than x.\n\nThat's all. I think the examples might have made sense in the past because we jumped from 2.x to 5.x but are probably unnecessary now that 7.x only has to concern itself with 6.x and newer anyway?", "url": "https://github.com/elastic/elasticsearch/pull/60159#discussion_r461004463", "createdAt": "2020-07-27T16:11:29Z", "author": {"login": "original-brownbear"}, "path": "docs/reference/snapshot-restore/index.asciidoc", "diffHunk": "@@ -57,17 +57,21 @@ when migrating between versions.\n \n A snapshot contains a copy of the on-disk data structures that make up an\n index or a data stream's backing indices. This means that snapshots can only be restored to versions of\n-{es} that can read the indices:\n-\n-* A snapshot of an index created in 6.x can be restored to 7.x.\n-* A snapshot of an index created in 5.x can be restored to 6.x.\n-* A snapshot of an index created in 2.x can be restored to 5.x.\n-* A snapshot of an index created in 1.x can be restored to 2.x.\n-\n-Conversely, snapshots of indices created in 1.x **cannot** be restored to 5.x\n-or 6.x, snapshots of indices created in 2.x **cannot** be restored to 6.x\n-or 7.x, and snapshots of indices created in 5.x **cannot** be restored to 7.x\n-or 8.x.\n+{es} that can read the indices.\n+\n+The following table indicates snapshot compatibility between versions.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "16b4b46df8403a5ee8157171e3bdfc2afea04882"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b71788836894c05590eee43a17ab747fa6a4291f", "author": {"user": {"login": "lockewritesdocs", "name": "Adam Locke"}}, "url": "https://github.com/elastic/elasticsearch/commit/b71788836894c05590eee43a17ab747fa6a4291f", "committedDate": "2020-07-27T21:19:06Z", "message": "Changing table formatting and incorporating more feedback."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2MzI5NDgw", "url": "https://github.com/elastic/elasticsearch/pull/60159#pullrequestreview-456329480", "createdAt": "2020-07-28T06:14:15Z", "commit": {"oid": "b71788836894c05590eee43a17ab747fa6a4291f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77fc07a393bdb0ae933d06a6c787a64ac1cf4133", "author": {"user": {"login": "lockewritesdocs", "name": "Adam Locke"}}, "url": "https://github.com/elastic/elasticsearch/commit/77fc07a393bdb0ae933d06a6c787a64ac1cf4133", "committedDate": "2020-07-28T14:04:31Z", "message": "Changing table alignment."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4767, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}