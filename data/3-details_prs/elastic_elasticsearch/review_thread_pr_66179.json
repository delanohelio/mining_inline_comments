{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM2MDM2MjE0", "number": 66179, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQyMzoxMDoyMFrOFDursQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQyMzoxNToxNFrOFDux7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM5NDU0ODk3OnYy", "diffSide": "RIGHT", "path": "test/framework/src/main/java/org/elasticsearch/test/junit/listeners/ReproduceInfoPrinter.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQyMzoxMDoyMFrOIDhsDA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxODo1OToxNVrOIEF8FA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDU2ODU4OA==", "bodyText": "This line seems to be duplicated?", "url": "https://github.com/elastic/elasticsearch/pull/66179#discussion_r540568588", "createdAt": "2020-12-10T23:10:20Z", "author": {"login": "rjernst"}, "path": "test/framework/src/main/java/org/elasticsearch/test/junit/listeners/ReproduceInfoPrinter.java", "diffHunk": "@@ -181,10 +182,32 @@ private ReproduceErrorMessageBuilder appendESProperties() {\n             appendOpt(\"tests.timezone\", TimeZone.getDefault().getID());\n             appendOpt(\"tests.distribution\", System.getProperty(\"tests.distribution\"));\n             appendOpt(\"runtime.java\", Integer.toString(JavaVersion.current().getVersion().get(0)));\n+            appendOpt(\"runtime.java\", Integer.toString(JavaVersion.current().getVersion().get(0)));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f72743165870a2eda2069e981242436baa0a9bb4"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTE2MjUxNg==", "bodyText": "fixed", "url": "https://github.com/elastic/elasticsearch/pull/66179#discussion_r541162516", "createdAt": "2020-12-11T18:59:15Z", "author": {"login": "breskeby"}, "path": "test/framework/src/main/java/org/elasticsearch/test/junit/listeners/ReproduceInfoPrinter.java", "diffHunk": "@@ -181,10 +182,32 @@ private ReproduceErrorMessageBuilder appendESProperties() {\n             appendOpt(\"tests.timezone\", TimeZone.getDefault().getID());\n             appendOpt(\"tests.distribution\", System.getProperty(\"tests.distribution\"));\n             appendOpt(\"runtime.java\", Integer.toString(JavaVersion.current().getVersion().get(0)));\n+            appendOpt(\"runtime.java\", Integer.toString(JavaVersion.current().getVersion().get(0)));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDU2ODU4OA=="}, "originalCommit": {"oid": "f72743165870a2eda2069e981242436baa0a9bb4"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM5NDU2NDkzOnYy", "diffSide": "RIGHT", "path": "test/framework/src/main/java/org/elasticsearch/test/junit/listeners/ReproduceInfoPrinter.java", "isResolved": false, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQyMzoxNToxNFrOIDh0qA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxODo1OToxOVrOIEF8cg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDU3MDc5Mg==", "bodyText": "Is this necessary once the fix is made in xpack to use Gradle's file resolution to get the path relative to the root project? With that change, and using a relative path in CI, shouldn't the reproduction line should just work for devs copying it from CI to their machines?", "url": "https://github.com/elastic/elasticsearch/pull/66179#discussion_r540570792", "createdAt": "2020-12-10T23:15:14Z", "author": {"login": "rjernst"}, "path": "test/framework/src/main/java/org/elasticsearch/test/junit/listeners/ReproduceInfoPrinter.java", "diffHunk": "@@ -181,10 +182,32 @@ private ReproduceErrorMessageBuilder appendESProperties() {\n             appendOpt(\"tests.timezone\", TimeZone.getDefault().getID());\n             appendOpt(\"tests.distribution\", System.getProperty(\"tests.distribution\"));\n             appendOpt(\"runtime.java\", Integer.toString(JavaVersion.current().getVersion().get(0)));\n+            appendOpt(\"runtime.java\", Integer.toString(JavaVersion.current().getVersion().get(0)));\n+            appendOpt(\"license.key\", relativePath(System.getProperty(\"licence.key\")));\n             appendOpt(ESTestCase.FIPS_SYSPROP, System.getProperty(ESTestCase.FIPS_SYSPROP));\n             return this;\n         }\n \n+        private String relativePath(String pathProperty) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f72743165870a2eda2069e981242436baa0a9bb4"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDU3MjM3Nw==", "bodyText": "This also works with having an absolute path passed in the commandline (e.g.on ci)", "url": "https://github.com/elastic/elasticsearch/pull/66179#discussion_r540572377", "createdAt": "2020-12-10T23:18:46Z", "author": {"login": "breskeby"}, "path": "test/framework/src/main/java/org/elasticsearch/test/junit/listeners/ReproduceInfoPrinter.java", "diffHunk": "@@ -181,10 +182,32 @@ private ReproduceErrorMessageBuilder appendESProperties() {\n             appendOpt(\"tests.timezone\", TimeZone.getDefault().getID());\n             appendOpt(\"tests.distribution\", System.getProperty(\"tests.distribution\"));\n             appendOpt(\"runtime.java\", Integer.toString(JavaVersion.current().getVersion().get(0)));\n+            appendOpt(\"runtime.java\", Integer.toString(JavaVersion.current().getVersion().get(0)));\n+            appendOpt(\"license.key\", relativePath(System.getProperty(\"licence.key\")));\n             appendOpt(ESTestCase.FIPS_SYSPROP, System.getProperty(ESTestCase.FIPS_SYSPROP));\n             return this;\n         }\n \n+        private String relativePath(String pathProperty) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDU3MDc5Mg=="}, "originalCommit": {"oid": "f72743165870a2eda2069e981242436baa0a9bb4"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDU3MzAwMg==", "bodyText": "But it will not required if we ensure we always pass a relative path here only", "url": "https://github.com/elastic/elasticsearch/pull/66179#discussion_r540573002", "createdAt": "2020-12-10T23:20:05Z", "author": {"login": "breskeby"}, "path": "test/framework/src/main/java/org/elasticsearch/test/junit/listeners/ReproduceInfoPrinter.java", "diffHunk": "@@ -181,10 +182,32 @@ private ReproduceErrorMessageBuilder appendESProperties() {\n             appendOpt(\"tests.timezone\", TimeZone.getDefault().getID());\n             appendOpt(\"tests.distribution\", System.getProperty(\"tests.distribution\"));\n             appendOpt(\"runtime.java\", Integer.toString(JavaVersion.current().getVersion().get(0)));\n+            appendOpt(\"runtime.java\", Integer.toString(JavaVersion.current().getVersion().get(0)));\n+            appendOpt(\"license.key\", relativePath(System.getProperty(\"licence.key\")));\n             appendOpt(ESTestCase.FIPS_SYSPROP, System.getProperty(ESTestCase.FIPS_SYSPROP));\n             return this;\n         }\n \n+        private String relativePath(String pathProperty) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDU3MDc5Mg=="}, "originalCommit": {"oid": "f72743165870a2eda2069e981242436baa0a9bb4"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDU4MjcxMQ==", "bodyText": "I'm just wondering if is necessary at all. It is specifically for CI. If a developer passes an absolute path, it will still work. We just need to ensure we pass a relative path in CI.", "url": "https://github.com/elastic/elasticsearch/pull/66179#discussion_r540582711", "createdAt": "2020-12-10T23:42:40Z", "author": {"login": "rjernst"}, "path": "test/framework/src/main/java/org/elasticsearch/test/junit/listeners/ReproduceInfoPrinter.java", "diffHunk": "@@ -181,10 +182,32 @@ private ReproduceErrorMessageBuilder appendESProperties() {\n             appendOpt(\"tests.timezone\", TimeZone.getDefault().getID());\n             appendOpt(\"tests.distribution\", System.getProperty(\"tests.distribution\"));\n             appendOpt(\"runtime.java\", Integer.toString(JavaVersion.current().getVersion().get(0)));\n+            appendOpt(\"runtime.java\", Integer.toString(JavaVersion.current().getVersion().get(0)));\n+            appendOpt(\"license.key\", relativePath(System.getProperty(\"licence.key\")));\n             appendOpt(ESTestCase.FIPS_SYSPROP, System.getProperty(ESTestCase.FIPS_SYSPROP));\n             return this;\n         }\n \n+        private String relativePath(String pathProperty) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDU3MDc5Mg=="}, "originalCommit": {"oid": "f72743165870a2eda2069e981242436baa0a9bb4"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTE1NzQ1NQ==", "bodyText": "in that case I can remove this", "url": "https://github.com/elastic/elasticsearch/pull/66179#discussion_r541157455", "createdAt": "2020-12-11T18:52:37Z", "author": {"login": "breskeby"}, "path": "test/framework/src/main/java/org/elasticsearch/test/junit/listeners/ReproduceInfoPrinter.java", "diffHunk": "@@ -181,10 +182,32 @@ private ReproduceErrorMessageBuilder appendESProperties() {\n             appendOpt(\"tests.timezone\", TimeZone.getDefault().getID());\n             appendOpt(\"tests.distribution\", System.getProperty(\"tests.distribution\"));\n             appendOpt(\"runtime.java\", Integer.toString(JavaVersion.current().getVersion().get(0)));\n+            appendOpt(\"runtime.java\", Integer.toString(JavaVersion.current().getVersion().get(0)));\n+            appendOpt(\"license.key\", relativePath(System.getProperty(\"licence.key\")));\n             appendOpt(ESTestCase.FIPS_SYSPROP, System.getProperty(ESTestCase.FIPS_SYSPROP));\n             return this;\n         }\n \n+        private String relativePath(String pathProperty) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDU3MDc5Mg=="}, "originalCommit": {"oid": "f72743165870a2eda2069e981242436baa0a9bb4"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTE2MjYxMA==", "bodyText": "done", "url": "https://github.com/elastic/elasticsearch/pull/66179#discussion_r541162610", "createdAt": "2020-12-11T18:59:19Z", "author": {"login": "breskeby"}, "path": "test/framework/src/main/java/org/elasticsearch/test/junit/listeners/ReproduceInfoPrinter.java", "diffHunk": "@@ -181,10 +182,32 @@ private ReproduceErrorMessageBuilder appendESProperties() {\n             appendOpt(\"tests.timezone\", TimeZone.getDefault().getID());\n             appendOpt(\"tests.distribution\", System.getProperty(\"tests.distribution\"));\n             appendOpt(\"runtime.java\", Integer.toString(JavaVersion.current().getVersion().get(0)));\n+            appendOpt(\"runtime.java\", Integer.toString(JavaVersion.current().getVersion().get(0)));\n+            appendOpt(\"license.key\", relativePath(System.getProperty(\"licence.key\")));\n             appendOpt(ESTestCase.FIPS_SYSPROP, System.getProperty(ESTestCase.FIPS_SYSPROP));\n             return this;\n         }\n \n+        private String relativePath(String pathProperty) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDU3MDc5Mg=="}, "originalCommit": {"oid": "f72743165870a2eda2069e981242436baa0a9bb4"}, "originalPosition": 34}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4635, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}