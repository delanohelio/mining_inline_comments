{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM5NTM5MTYy", "number": 66260, "title": "Allow bootstrap plugins to appear in _cat/plugins", "bodyText": "Closes #66107.\nBootstrap plugins are not loaded in the main Elasticsearch process, but\ninstead take effect only when ES is starting. As such, these plugins are\nskipped when ES loads all installed plugins.\nAs a result, it was impossible for the plugins _cat API to report\nwhether any bootstrap plugins are installed.\nFix this by adjusting how the loading process skips bootstrap plugins,\nand then tweaking the plugins _cat API so that bootstrap plugins can\noptionally be included in the response.", "createdAt": "2020-12-14T15:00:52Z", "url": "https://github.com/elastic/elasticsearch/pull/66260", "merged": true, "mergeCommit": {"oid": "4ff612550eb91276d461a0e6971d4eb9f3052b57"}, "closed": true, "closedAt": "2020-12-17T09:30:17Z", "author": {"login": "pugnascotia"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdmG8THgH2gAyNTM5NTM5MTYyOmU0YTllZjMxMzM1NGYyZWIyMzVjNDg2ZjY1Njc0Yjg2NTJhMjgyNzc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdm5Gx0gFqTU1NDIxMDczMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e4a9ef313354f2eb235c486f65674b8652a28277", "author": {"user": {"login": "pugnascotia", "name": "Rory Hunter"}}, "url": "https://github.com/elastic/elasticsearch/commit/e4a9ef313354f2eb235c486f65674b8652a28277", "committedDate": "2020-12-14T14:51:39Z", "message": "Allow bootstrap plugins to appear in _cat/plugins\n\nBootstrap plugins are not loaded in the main Elasticsearch process, but\ninstead take effect only when ES is starting. As such, these plugins are\nskipped when ES loads all installed plugins.\n\nAs a result, it was impossible for the plugins _cat API to report\nwhether any bootstrap plugins are installed.\n\nFix this by adjusting how the loading process skips bootstrap plugins,\nand then tweaking the plugins _cat API so that bootstrap plugins can\noptionally be included in the response."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b4ecb007cf638e12e51862144a33aa6ff0590451", "author": {"user": {"login": "pugnascotia", "name": "Rory Hunter"}}, "url": "https://github.com/elastic/elasticsearch/commit/b4ecb007cf638e12e51862144a33aa6ff0590451", "committedDate": "2020-12-14T15:34:35Z", "message": "Fix test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "60729f74aa59bcbd02526808ced31cd778431572", "author": {"user": {"login": "pugnascotia", "name": "Rory Hunter"}}, "url": "https://github.com/elastic/elasticsearch/commit/60729f74aa59bcbd02526808ced31cd778431572", "committedDate": "2020-12-14T16:56:49Z", "message": "Tweak _cat/plugins YAML test to handle output change"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUyMTY0NjM3", "url": "https://github.com/elastic/elasticsearch/pull/66260#pullrequestreview-552164637", "createdAt": "2020-12-15T07:21:32Z", "commit": {"oid": "60729f74aa59bcbd02526808ced31cd778431572"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQwNzoyMTozMlrOIF8a4A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQwNzoyMTozMlrOIF8a4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzEwMzcxMg==", "bodyText": "We don't seem to have any unit tests for this class. Would it be possible to add a simple one? The packaging tests added seem to be testing this new flag, but that doesn't seem like the right place, since the flag doesn't directly have anything to do with the quota aware fs plugin, it's just the only example we have so far a bootstrap plugin.", "url": "https://github.com/elastic/elasticsearch/pull/66260#discussion_r543103712", "createdAt": "2020-12-15T07:21:32Z", "author": {"login": "rjernst"}, "path": "server/src/main/java/org/elasticsearch/rest/action/cat/RestPluginsAction.java", "diffHunk": "@@ -106,12 +113,16 @@ private Table buildTable(RestRequest req, ClusterStateResponse state, NodesInfoR\n                 continue;\n             }\n             for (PluginInfo pluginInfo : plugins.getPluginInfos()) {\n+                if (pluginInfo.getType() == PluginType.BOOTSTRAP && includeBootstrapPlugins == false) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "60729f74aa59bcbd02526808ced31cd778431572"}, "originalPosition": 53}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e3c72d53c4bceb9408330c1fc4dc1cbcfb97c298", "author": {"user": {"login": "pugnascotia", "name": "Rory Hunter"}}, "url": "https://github.com/elastic/elasticsearch/commit/e3c72d53c4bceb9408330c1fc4dc1cbcfb97c298", "committedDate": "2020-12-15T15:14:26Z", "message": "Merge remote-tracking branch 'upstream/master' into cat-api-bootstrap-plugins"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dc578a3e98601d7e1a57c9b3d65c9b8a8e576ba0", "author": {"user": {"login": "pugnascotia", "name": "Rory Hunter"}}, "url": "https://github.com/elastic/elasticsearch/commit/dc578a3e98601d7e1a57c9b3d65c9b8a8e576ba0", "committedDate": "2020-12-16T11:44:39Z", "message": "Add unit tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6cfda819a475df06f9352f69decd651f8be124c4", "author": {"user": {"login": "pugnascotia", "name": "Rory Hunter"}}, "url": "https://github.com/elastic/elasticsearch/commit/6cfda819a475df06f9352f69decd651f8be124c4", "committedDate": "2020-12-16T11:50:47Z", "message": "Simply IT for quota-aware-fs and _cat/plugins"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9641ab6a94fe4edf10f882a32bc4673490efca79", "author": {"user": {"login": "pugnascotia", "name": "Rory Hunter"}}, "url": "https://github.com/elastic/elasticsearch/commit/9641ab6a94fe4edf10f882a32bc4673490efca79", "committedDate": "2020-12-16T12:33:42Z", "message": "Merge remote-tracking branch 'upstream/master' into cat-api-bootstrap-plugins"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU0MjEwNzMy", "url": "https://github.com/elastic/elasticsearch/pull/66260#pullrequestreview-554210732", "createdAt": "2020-12-17T01:18:21Z", "commit": {"oid": "9641ab6a94fe4edf10f882a32bc4673490efca79"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4619, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}