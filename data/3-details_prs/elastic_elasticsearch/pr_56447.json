{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE1MzM1NjU2", "number": 56447, "title": "Always use archive base name as the pom artifact id", "bodyText": "We override the archivesBaseName for several projects. When these are published, we also interpret the GAV coordinates to use the update archive name as well. However, Gradle publishing plugins use the project name by default. We override this manually in several places but it's easy to miss some, like shadow jar projects. This PR moves this logic into our BuildPlugin so it's done in a central location and there no risk of forgetting to add the override.\nRelates to #56415", "createdAt": "2020-05-08T17:08:43Z", "url": "https://github.com/elastic/elasticsearch/pull/56447", "merged": true, "mergeCommit": {"oid": "a2b1ec1bbe08f3260773c01321e9850daf17f862"}, "closed": true, "closedAt": "2020-05-08T19:53:48Z", "author": {"login": "mark-vieira"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcfUt5XAH2gAyNDE1MzM1NjU2OmU3ODAyN2RlZTU4NzY4NTg0MGZmYWVkNDE1ZDhkZDgwNjgwMWEyNjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcfWhAjAFqTQwODQ0OTM2MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e78027dee587685840ffaed415d8dd806801a266", "author": {"user": {"login": "mark-vieira", "name": "Mark Vieira"}}, "url": "https://github.com/elastic/elasticsearch/commit/e78027dee587685840ffaed415d8dd806801a266", "committedDate": "2020-05-08T16:45:58Z", "message": "Always use archive base name as the pom artifact id"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dadc67de07571d883bb5bc58d10503c292500475", "author": {"user": {"login": "mark-vieira", "name": "Mark Vieira"}}, "url": "https://github.com/elastic/elasticsearch/commit/dadc67de07571d883bb5bc58d10503c292500475", "committedDate": "2020-05-08T17:45:21Z", "message": "Set artifactId on publication and remove unnecessary overrides"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4NDQ5MzYw", "url": "https://github.com/elastic/elasticsearch/pull/56447#pullrequestreview-408449360", "createdAt": "2020-05-08T18:51:27Z", "commit": {"oid": "dadc67de07571d883bb5bc58d10503c292500475"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQxODo1MToyN1rOGSv4cQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQxODo1MToyN1rOGSv4cQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjMxMjA0OQ==", "bodyText": "it's unfortunate MavenPublication doesn't use Providers :/", "url": "https://github.com/elastic/elasticsearch/pull/56447#discussion_r422312049", "createdAt": "2020-05-08T18:51:27Z", "author": {"login": "rjernst"}, "path": "buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy", "diffHunk": "@@ -328,6 +328,11 @@ class BuildPlugin implements Plugin<Project> {\n                     }\n                 }\n                 generatePomTask.configure({ Task t -> t.dependsOn = ['generatePomFileForShadowPublication'] } as Action<Task>)\n+\n+                // have to defer this until archivesBaseName is set\n+                project.afterEvaluate {\n+                    publication.artifactId = project.convention.getPlugin(BasePluginConvention).archivesBaseName", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dadc67de07571d883bb5bc58d10503c292500475"}, "originalPosition": 25}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 82, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}