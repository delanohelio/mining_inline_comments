{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQyMzAxMTEw", "number": 58786, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQyMTozNjoyMVrOEKSRAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQyMTozODoyMlrOEKSTOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5MjIwNDgyOnYy", "diffSide": "RIGHT", "path": "server/src/internalClusterTest/java/org/elasticsearch/search/geo/GeoShapeIntegrationIT.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQyMTozNjoyMVrOGrPWWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQyMTo0MzowMVrOGrPh1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzk5MzQzNQ==", "bodyText": "This test could also instead live in GeoShapeFieldMapperTests, which is closer to a unit test suite. It seems common to test document parsing logic in *FieldMapperTests.", "url": "https://github.com/elastic/elasticsearch/pull/58786#discussion_r447993435", "createdAt": "2020-06-30T21:36:21Z", "author": {"login": "jtibshirani"}, "path": "server/src/internalClusterTest/java/org/elasticsearch/search/geo/GeoShapeIntegrationIT.java", "diffHunk": "@@ -136,6 +136,34 @@ public void testIgnoreMalformed() throws Exception {\n         assertThat(searchResponse.getHits().getTotalHits().value, equalTo(1L));\n     }\n \n+    /**\n+     * Test that geo_shape field can parse input as an array of values.\n+     */\n+    public void testArrayOfGeoShapeParsing() throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f9a976d01c3b744f886c933e7c44e5ed835150bf"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzk5NjM3Mw==", "bodyText": "will do!", "url": "https://github.com/elastic/elasticsearch/pull/58786#discussion_r447996373", "createdAt": "2020-06-30T21:43:01Z", "author": {"login": "talevy"}, "path": "server/src/internalClusterTest/java/org/elasticsearch/search/geo/GeoShapeIntegrationIT.java", "diffHunk": "@@ -136,6 +136,34 @@ public void testIgnoreMalformed() throws Exception {\n         assertThat(searchResponse.getHits().getTotalHits().value, equalTo(1L));\n     }\n \n+    /**\n+     * Test that geo_shape field can parse input as an array of values.\n+     */\n+    public void testArrayOfGeoShapeParsing() throws Exception {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzk5MzQzNQ=="}, "originalCommit": {"oid": "f9a976d01c3b744f886c933e7c44e5ed835150bf"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5MjIxMDQ5OnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/elasticsearch/index/mapper/AbstractGeometryFieldMapper.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQyMTozODoyMlrOGrPZ1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQyMTo0Mjo0M1rOGrPhUw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzk5NDMyNQ==", "bodyText": "I think we need to remove this override and instead  have GeoPointFieldMapper and PointFieldMapper implement it and return true?", "url": "https://github.com/elastic/elasticsearch/pull/58786#discussion_r447994325", "createdAt": "2020-06-30T21:38:22Z", "author": {"login": "jtibshirani"}, "path": "server/src/main/java/org/elasticsearch/index/mapper/AbstractGeometryFieldMapper.java", "diffHunk": "@@ -285,7 +285,7 @@ protected void parseCreateField(ParseContext context) throws IOException {\n \n     @Override\n     public final boolean parsesArrayValue() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f9a976d01c3b744f886c933e7c44e5ed835150bf"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzk5NjI0Mw==", "bodyText": "woops. jumped on that too fast. you're right", "url": "https://github.com/elastic/elasticsearch/pull/58786#discussion_r447996243", "createdAt": "2020-06-30T21:42:43Z", "author": {"login": "talevy"}, "path": "server/src/main/java/org/elasticsearch/index/mapper/AbstractGeometryFieldMapper.java", "diffHunk": "@@ -285,7 +285,7 @@ protected void parseCreateField(ParseContext context) throws IOException {\n \n     @Override\n     public final boolean parsesArrayValue() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzk5NDMyNQ=="}, "originalCommit": {"oid": "f9a976d01c3b744f886c933e7c44e5ed835150bf"}, "originalPosition": 3}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2170, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}