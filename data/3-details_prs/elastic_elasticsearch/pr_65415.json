{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI2NDI2OTYy", "number": 65415, "title": "Fix AbstractClient#execute Listener Leak", "bodyText": "This was observed in #65405 due to trying to locally execute a\ntask whose parent was already cancelled but is a general issue.\nWe should not throw from APIs that consume a listener as this may\nlike in this case leak the listener in that case.\nRather than fixing the specific case of #65405 this fixes the\nabstract client overall to avoid other such leaks.\nCloses #65405\nNOTE: This isn't the greatest possible fix because it will double-trigger the listener if the exception was thrown by resolving the listener itself. We could work around this by using a separate listener to pass to doExecute but then again this still holds the potential for memory leaks and we'll have to fix all upstream code (which currently, like e.g. rest actions wraps in a catch (Exception) as a last ditch effort to not leak things as well).\nI think this may be fine for now, fixes a known memory leak and prevents unexpected leaks elsewhere (I'm not so worried about double releasing any resources through this since we wrap those in RunOnce and ReleaseOnce wherever possible anyway since org.elasticsearch.action.support.TransportAction.RequestFilterChain#proceed does the same try-catch for all exceptions on the same listeners).", "createdAt": "2020-11-24T11:57:36Z", "url": "https://github.com/elastic/elasticsearch/pull/65415", "merged": true, "mergeCommit": {"oid": "80468992da6ba4dc7ad39f10a913b1c05335356e"}, "closed": true, "closedAt": "2020-11-30T23:48:35Z", "author": {"login": "original-brownbear"}, "timelineItems": {"totalCount": 22, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdfoBG5AH2gAyNTI2NDI2OTYyOjczNjgwMTUxNjUxMzYxYWE5MzQwNjc4Y2JhNWQ5ZDRmZmNjMDA5OTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdhrCf7gFqTU0MTI1MzQyMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "73680151651361aa9340678cba5d9d4ffcc00998", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/73680151651361aa9340678cba5d9d4ffcc00998", "committedDate": "2020-11-24T11:26:18Z", "message": "Fix AbstractClient#execute Listener Leak\n\nThis was observed in #65405 due to trying to locally execute a\ntask whose parent was already cancelled but is a general issue.\n\nWe should not throw from APIs that consume a listener as this may\nlike in this case leak the listener in that case.\nRather than fixing the specific case of #65405 this fixes the\nabstract client overall to avoid other such leaks.\n\nCloses #65405"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "50f96d9260300f01ed26d7a764f18aebf14b5531", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/50f96d9260300f01ed26d7a764f18aebf14b5531", "committedDate": "2020-11-25T10:46:21Z", "message": "Merge remote-tracking branch 'elastic/master' into 65405"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4df3eb004b0e3df8a350332bb01d78c41d275d90", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/4df3eb004b0e3df8a350332bb01d78c41d275d90", "committedDate": "2020-11-25T11:32:43Z", "message": "handle exception downstream"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac68d1a6ccff6c4440cbef6d97cf99ed135606c4", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/ac68d1a6ccff6c4440cbef6d97cf99ed135606c4", "committedDate": "2020-11-25T11:56:17Z", "message": "stricter assertions and fix tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "62da102dd80cd591ef891e44f2128c463e4f37f5", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/62da102dd80cd591ef891e44f2128c463e4f37f5", "committedDate": "2020-11-25T12:14:46Z", "message": "moar fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0765ada6016b1bbfbec1aaee7a7654e9dbf5231b", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/0765ada6016b1bbfbec1aaee7a7654e9dbf5231b", "committedDate": "2020-11-25T12:32:03Z", "message": "moar test weirdness"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c84e1a09d04e813ceaa3e3096b87b029ef11b52b", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/c84e1a09d04e813ceaa3e3096b87b029ef11b52b", "committedDate": "2020-11-25T13:40:21Z", "message": "fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d99f75c941cd69c0c6c67d8ebb75c502348c9c0a", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/d99f75c941cd69c0c6c67d8ebb75c502348c9c0a", "committedDate": "2020-11-25T14:33:07Z", "message": "noise"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4NTc4ODgz", "url": "https://github.com/elastic/elasticsearch/pull/65415#pullrequestreview-538578883", "createdAt": "2020-11-25T14:53:21Z", "commit": {"oid": "d99f75c941cd69c0c6c67d8ebb75c502348c9c0a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxNDo1MzoyMlrOH53AEg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxNDo1MzoyMlrOH53AEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDQzMjAxOA==", "bodyText": "At least in tests, this ensures no double invocation of the listener with the new try-catch\nI suppose technically speaking it would be nice to do the same for the override below that uses a TaskListener but I chose not to for now since as you can see this already required fixing up a number of spots that relied on the listener's onResponse throwing and handling exceptions upstream.", "url": "https://github.com/elastic/elasticsearch/pull/65415#discussion_r530432018", "createdAt": "2020-11-25T14:53:22Z", "author": {"login": "original-brownbear"}, "path": "server/src/main/java/org/elasticsearch/client/node/NodeClient.java", "diffHunk": "@@ -91,7 +97,22 @@ void doExecute(ActionType<Response> action, Request request, ActionListener<Resp\n                 Response extends ActionResponse\n             > Task executeLocally(ActionType<Response> action, Request request, ActionListener<Response> listener) {\n         return taskManager.registerAndExecute(\"transport\", transportAction(action), request,\n-            (t, r) -> listener.onResponse(r), (t, e) -> listener.onFailure(e));\n+                (t, r) -> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d99f75c941cd69c0c6c67d8ebb75c502348c9c0a"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4NTgwMjUx", "url": "https://github.com/elastic/elasticsearch/pull/65415#pullrequestreview-538580251", "createdAt": "2020-11-25T14:54:44Z", "commit": {"oid": "d99f75c941cd69c0c6c67d8ebb75c502348c9c0a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxNDo1NDo0NFrOH53EPg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxNDo1NDo0NFrOH53EPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDQzMzA4Ng==", "bodyText": "I think without further refactoring of the signature of registerAndExecute and this is about as low as we can go on the stack in terms of passing these exceptions to the listener directly. Otherwise we'll have to adjust a non-trivial number of spots that make use of the returned Task from that method.", "url": "https://github.com/elastic/elasticsearch/pull/65415#discussion_r530433086", "createdAt": "2020-11-25T14:54:44Z", "author": {"login": "original-brownbear"}, "path": "server/src/main/java/org/elasticsearch/client/node/NodeClient.java", "diffHunk": "@@ -79,7 +79,13 @@ public void close() {\n     public <Request extends ActionRequest, Response extends ActionResponse>\n     void doExecute(ActionType<Response> action, Request request, ActionListener<Response> listener) {\n         // Discard the task because the Client interface doesn't use it.\n-        executeLocally(action, request, listener);\n+        try {\n+            executeLocally(action, request, listener);\n+        } catch (Exception e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d99f75c941cd69c0c6c67d8ebb75c502348c9c0a"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4NTgzNjAz", "url": "https://github.com/elastic/elasticsearch/pull/65415#pullrequestreview-538583603", "createdAt": "2020-11-25T14:58:02Z", "commit": {"oid": "d99f75c941cd69c0c6c67d8ebb75c502348c9c0a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxNDo1ODowMlrOH53OOQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxNDo1ODowMlrOH53OOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDQzNTY0MQ==", "bodyText": "Obvious spot where we have a non-wrap listener and this would just bubble up all the way if the request is executed locally on SAME.", "url": "https://github.com/elastic/elasticsearch/pull/65415#discussion_r530435641", "createdAt": "2020-11-25T14:58:02Z", "author": {"login": "original-brownbear"}, "path": "x-pack/plugin/enrich/src/main/java/org/elasticsearch/xpack/enrich/EnrichPolicyRunner.java", "diffHunk": "@@ -124,7 +124,12 @@ public void run() {\n         client.admin().indices().getIndex(getIndexRequest, new ActionListener<>() {\n             @Override\n             public void onResponse(GetIndexResponse getIndexResponse) {\n-                validateMappings(getIndexResponse);\n+                try {\n+                    validateMappings(getIndexResponse);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d99f75c941cd69c0c6c67d8ebb75c502348c9c0a"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4NTg1NTUz", "url": "https://github.com/elastic/elasticsearch/pull/65415#pullrequestreview-538585553", "createdAt": "2020-11-25T15:00:02Z", "commit": {"oid": "d99f75c941cd69c0c6c67d8ebb75c502348c9c0a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxNTowMDowMlrOH53T-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxNTowMDowMlrOH53T-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDQzNzExNQ==", "bodyText": "Failing the listener on a missing index isn't strictly necessary here because I added the try-catch around prepareCreateIndexRequest anyway but I figured it more nicely motivates this TODO and follow-up cleanup to the logic here that previously relied on the exceptions just bubbling up all the way.", "url": "https://github.com/elastic/elasticsearch/pull/65415#discussion_r530437115", "createdAt": "2020-11-25T15:00:02Z", "author": {"login": "original-brownbear"}, "path": "server/src/main/java/org/elasticsearch/action/admin/indices/shrink/TransportResizeAction.java", "diffHunk": "@@ -88,32 +88,43 @@ protected void masterOperation(Task task, final ResizeRequest resizeRequest, fin\n         // there is no need to fetch docs stats for split but we keep it simple and do it anyway for simplicity of the code\n         final String sourceIndex = indexNameExpressionResolver.resolveDateMathExpression(resizeRequest.getSourceIndex());\n         final String targetIndex = indexNameExpressionResolver.resolveDateMathExpression(resizeRequest.getTargetIndexRequest().index());\n+\n+        final IndexMetadata sourceMetadata = state.metadata().index(sourceIndex);\n+        if (sourceMetadata == null) {\n+            listener.onFailure(new IndexNotFoundException(sourceIndex));\n+            return;\n+        }\n+\n         IndicesStatsRequestBuilder statsRequestBuilder = client.admin().indices().prepareStats(sourceIndex).clear().setDocs(true);\n         IndicesStatsRequest statsRequest = statsRequestBuilder.request();\n         statsRequest.setParentTask(clusterService.localNode().getId(), task.getId());\n+        // TODO: only fetch indices stats for shrink type resize requests and move request validation (outside of doc counts) to before", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d99f75c941cd69c0c6c67d8ebb75c502348c9c0a"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4NTk3MTUx", "url": "https://github.com/elastic/elasticsearch/pull/65415#pullrequestreview-538597151", "createdAt": "2020-11-25T15:12:01Z", "commit": {"oid": "d99f75c941cd69c0c6c67d8ebb75c502348c9c0a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxNToxMjowMVrOH532aQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxNToxMjowMVrOH532aQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDQ0NTkyOQ==", "bodyText": "This was pretty dirty to begin with. Without this change and the change in the test verifying client we would always throw an NPE in the background (form trying to serialize a null response)  but that would never fail any tests.\nWith the new assertions that wasn't possible anymore so I had to fix this up here.", "url": "https://github.com/elastic/elasticsearch/pull/65415#discussion_r530445929", "createdAt": "2020-11-25T15:12:01Z", "author": {"login": "original-brownbear"}, "path": "x-pack/plugin/async-search/src/test/java/org/elasticsearch/xpack/search/RestSubmitAsyncSearchActionTests.java", "diffHunk": "@@ -88,7 +89,7 @@ public void testParameters() throws Exception {\n             assertThat(request, instanceOf(SubmitAsyncSearchRequest.class));\n             assertThat(valueAccessor.apply((SubmitAsyncSearchRequest) request), equalTo(expectedValue));\n             executeCalled.set(true);\n-            return null;\n+            return new AsyncSearchResponse(\"\", randomBoolean(), randomBoolean(), 0L, 0L);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d99f75c941cd69c0c6c67d8ebb75c502348c9c0a"}, "originalPosition": 22}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQwNjM0MDgw", "url": "https://github.com/elastic/elasticsearch/pull/65415#pullrequestreview-540634080", "createdAt": "2020-11-30T06:49:52Z", "commit": {"oid": "d99f75c941cd69c0c6c67d8ebb75c502348c9c0a"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQwNjo0OTo1MlrOH7tyaw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQwNzowMjowNFrOH7uBxA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjM3ODIxOQ==", "bodyText": "Not sure moving out the validation is the right move, I would probably rather move it in to the cluster state update to avoid surprising effects (like soft deletes being changed right after us checking it). Did not look deeply into this, but I think I would prefer to not add the todo here.", "url": "https://github.com/elastic/elasticsearch/pull/65415#discussion_r532378219", "createdAt": "2020-11-30T06:49:52Z", "author": {"login": "henningandersen"}, "path": "server/src/main/java/org/elasticsearch/action/admin/indices/shrink/TransportResizeAction.java", "diffHunk": "@@ -88,32 +88,43 @@ protected void masterOperation(Task task, final ResizeRequest resizeRequest, fin\n         // there is no need to fetch docs stats for split but we keep it simple and do it anyway for simplicity of the code\n         final String sourceIndex = indexNameExpressionResolver.resolveDateMathExpression(resizeRequest.getSourceIndex());\n         final String targetIndex = indexNameExpressionResolver.resolveDateMathExpression(resizeRequest.getTargetIndexRequest().index());\n+\n+        final IndexMetadata sourceMetadata = state.metadata().index(sourceIndex);\n+        if (sourceMetadata == null) {\n+            listener.onFailure(new IndexNotFoundException(sourceIndex));\n+            return;\n+        }\n+\n         IndicesStatsRequestBuilder statsRequestBuilder = client.admin().indices().prepareStats(sourceIndex).clear().setDocs(true);\n         IndicesStatsRequest statsRequest = statsRequestBuilder.request();\n         statsRequest.setParentTask(clusterService.localNode().getId(), task.getId());\n+        // TODO: only fetch indices stats for shrink type resize requests and move request validation (outside of doc counts) to before", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDQzNzExNQ=="}, "originalCommit": {"oid": "d99f75c941cd69c0c6c67d8ebb75c502348c9c0a"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjM3OTM5Ng==", "bodyText": "Yeah, I agree that it will be a non-trivial change. We would have to always return a task I think and then fail it immediately. Or change the signature.\nI think we could possibly catch TaskCancelledException here instead to make it specific that the \"hack\" is for this case only?", "url": "https://github.com/elastic/elasticsearch/pull/65415#discussion_r532379396", "createdAt": "2020-11-30T06:53:26Z", "author": {"login": "henningandersen"}, "path": "server/src/main/java/org/elasticsearch/client/node/NodeClient.java", "diffHunk": "@@ -79,7 +79,13 @@ public void close() {\n     public <Request extends ActionRequest, Response extends ActionResponse>\n     void doExecute(ActionType<Response> action, Request request, ActionListener<Response> listener) {\n         // Discard the task because the Client interface doesn't use it.\n-        executeLocally(action, request, listener);\n+        try {\n+            executeLocally(action, request, listener);\n+        } catch (Exception e) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDQzMzA4Ng=="}, "originalCommit": {"oid": "d99f75c941cd69c0c6c67d8ebb75c502348c9c0a"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjM4MjE0OA==", "bodyText": "I think we should add a comment to javadoc here and in the other executeLocally that they can throw TaskCancelledException?", "url": "https://github.com/elastic/elasticsearch/pull/65415#discussion_r532382148", "createdAt": "2020-11-30T07:02:04Z", "author": {"login": "henningandersen"}, "path": "server/src/main/java/org/elasticsearch/client/node/NodeClient.java", "diffHunk": "@@ -79,7 +79,13 @@ public void close() {\n     public <Request extends ActionRequest, Response extends ActionResponse>\n     void doExecute(ActionType<Response> action, Request request, ActionListener<Response> listener) {\n         // Discard the task because the Client interface doesn't use it.\n-        executeLocally(action, request, listener);\n+        try {\n+            executeLocally(action, request, listener);\n+        } catch (Exception e) {\n+            // #executeLocally returns the task and throws RuntimeException if it fails to register the task so we forward them to listener\n+            // since this API does not concern itself with the specifics of the task handling\n+            listener.onFailure(e);\n+        }\n     }\n \n     /**", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d99f75c941cd69c0c6c67d8ebb75c502348c9c0a"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e37d7c1fa83ccffaf527bedd4414ba3a06ef0e48", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/e37d7c1fa83ccffaf527bedd4414ba3a06ef0e48", "committedDate": "2020-11-30T07:12:30Z", "message": "Merge remote-tracking branch 'elastic/master' into 65405"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "074c29fe1bbe8fcd56f0600314f44cbf1a1fc018", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/074c29fe1bbe8fcd56f0600314f44cbf1a1fc018", "committedDate": "2020-11-30T07:24:28Z", "message": "cut back on TODO"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4568132e8edb868f2f6c6400ea3b1fa58a30fbb6", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/4568132e8edb868f2f6c6400ea3b1fa58a30fbb6", "committedDate": "2020-11-30T07:44:23Z", "message": "docs and try stricter catch"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7be5d1c445dd62a1f2282f49cd738c42b97dc2b2", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/7be5d1c445dd62a1f2282f49cd738c42b97dc2b2", "committedDate": "2020-11-30T08:49:00Z", "message": "fix another spot"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c440ef07f57aaa2f5badb0e500686221dd58dfae", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/c440ef07f57aaa2f5badb0e500686221dd58dfae", "committedDate": "2020-11-30T08:52:13Z", "message": "another fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "adf535de770cf3519fbc04ceed522f48ed628138", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/adf535de770cf3519fbc04ceed522f48ed628138", "committedDate": "2020-11-30T09:47:36Z", "message": "gotta fix watcher"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "526777087b04ec4a63ead3accdefb2178f224deb", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/526777087b04ec4a63ead3accdefb2178f224deb", "committedDate": "2020-11-30T10:28:40Z", "message": "cleaner"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQxMjUzNDIw", "url": "https://github.com/elastic/elasticsearch/pull/65415#pullrequestreview-541253420", "createdAt": "2020-11-30T20:05:23Z", "commit": {"oid": "526777087b04ec4a63ead3accdefb2178f224deb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4423, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}