{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg0NTMwMTYz", "number": 53198, "title": "Vs refactor parser cleanup", "bodyText": "This PR removes lingering hard coded type logic in ValuesSourceParserHelper, and tries to minimize the exposure of the ValueType.isA concept, which has caused some weird casting situations before.\nRelates to #42949", "createdAt": "2020-03-05T22:21:10Z", "url": "https://github.com/elastic/elasticsearch/pull/53198", "merged": true, "mergeCommit": {"oid": "e30dd36b5d227ab5e405c2adbc7bbb6bc9d6a8cc"}, "closed": true, "closedAt": "2020-03-13T14:30:27Z", "author": {"login": "not-napoleon"}, "timelineItems": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcKxm53AH2gAyMzg0NTMwMTYzOjM2NGZkNDhlYjgzZTFjYzBkYzg1ZDllNTU5NjZhYjIyNTI4NDc1ZjM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcNB__jAH2gAyMzg0NTMwMTYzOmY4MmViZTM5OTM1OTM4ZTJhMDY2YzZkZmExN2E0OWY0ODNlM2ZjYjI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "364fd48eb83e1cc0dc85d9e55966ab22528475f3", "author": {"user": {"login": "not-napoleon", "name": "Mark Tozzi"}}, "url": "https://github.com/elastic/elasticsearch/commit/364fd48eb83e1cc0dc85d9e55966ab22528475f3", "committedDate": "2020-03-05T20:33:10Z", "message": "Get rid of typed field creators"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f187b34d97f7ec6cc986395ae4bf6dce210e1ed5", "author": {"user": {"login": "not-napoleon", "name": "Mark Tozzi"}}, "url": "https://github.com/elastic/elasticsearch/commit/f187b34d97f7ec6cc986395ae4bf6dce210e1ed5", "committedDate": "2020-03-05T20:46:08Z", "message": "only really need one declareFields"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "494ff47473bc2d266799f7222a63e3713c2a7119", "author": {"user": {"login": "not-napoleon", "name": "Mark Tozzi"}}, "url": "https://github.com/elastic/elasticsearch/commit/494ff47473bc2d266799f7222a63e3713c2a7119", "committedDate": "2020-03-05T20:49:22Z", "message": "No reason to keep the helper to just hold one function"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "901195b1467ceb9da9051680cef6f5434f4bf45e", "author": {"user": {"login": "not-napoleon", "name": "Mark Tozzi"}}, "url": "https://github.com/elastic/elasticsearch/commit/901195b1467ceb9da9051680cef6f5434f4bf45e", "committedDate": "2020-03-05T22:16:23Z", "message": "remove isA usage from MultiVSAB"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "50cf3c44d744a158ce69fb417c34a466c09a2846", "author": {"user": {"login": "not-napoleon", "name": "Mark Tozzi"}}, "url": "https://github.com/elastic/elasticsearch/commit/50cf3c44d744a158ce69fb417c34a466c09a2846", "committedDate": "2020-03-05T22:17:16Z", "message": "rename for clarity (and shade)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a830d6d6402b471b6ea30e42f55f85d980f42a67", "author": {"user": {"login": "not-napoleon", "name": "Mark Tozzi"}}, "url": "https://github.com/elastic/elasticsearch/commit/a830d6d6402b471b6ea30e42f55f85d980f42a67", "committedDate": "2020-03-06T16:57:23Z", "message": "move isA hard coded logic into ValueType"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2d2a849c86950b88dbfc9d5f5ef33e121e19097e", "author": {"user": {"login": "not-napoleon", "name": "Mark Tozzi"}}, "url": "https://github.com/elastic/elasticsearch/commit/2d2a849c86950b88dbfc9d5f5ef33e121e19097e", "committedDate": "2020-03-06T17:11:16Z", "message": "Merge branch 'feature/extensible-values-source' into vs-refactor-parser-cleanup\n\n Conflicts:\n\tserver/src/main/java/org/elasticsearch/search/aggregations/metrics/GeoBoundsAggregationBuilder.java\n\tx-pack/plugin/analytics/src/main/java/org/elasticsearch/xpack/analytics/boxplot/BoxplotAggregationBuilder.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b2f83fc8573740795ebf1d9807adc61256b02ded", "author": {"user": {"login": "not-napoleon", "name": "Mark Tozzi"}}, "url": "https://github.com/elastic/elasticsearch/commit/b2f83fc8573740795ebf1d9807adc61256b02ded", "committedDate": "2020-03-06T17:13:57Z", "message": "Undo duplicate hack"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "62d6227b194a0aaaa45b45ce30420cd2e2af814e", "author": {"user": {"login": "not-napoleon", "name": "Mark Tozzi"}}, "url": "https://github.com/elastic/elasticsearch/commit/62d6227b194a0aaaa45b45ce30420cd2e2af814e", "committedDate": "2020-03-06T17:26:59Z", "message": "these can be private"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b4709cc79a71a37acb5607bf2c5c1c249e91c34c", "author": {"user": {"login": "not-napoleon", "name": "Mark Tozzi"}}, "url": "https://github.com/elastic/elasticsearch/commit/b4709cc79a71a37acb5607bf2c5c1c249e91c34c", "committedDate": "2020-03-06T17:38:31Z", "message": "Fix checkstyle"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwNjEwMjk2", "url": "https://github.com/elastic/elasticsearch/pull/53198#pullrequestreview-370610296", "createdAt": "2020-03-06T20:36:19Z", "commit": {"oid": "b4709cc79a71a37acb5607bf2c5c1c249e91c34c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQyMDozNjoxOVrOFzGrWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQyMDozNjoxOVrOFzGrWw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTEzMTA5OQ==", "bodyText": "Probably a thing for later more than now: three boolean parameters can be kind of hard to keep track of. I think IntelliJ has something where it puts the names of parameters but that isn't universal. Anyway, something else might be a little more descriptive. I'm not sure what though. It certainly can wait for later too.", "url": "https://github.com/elastic/elasticsearch/pull/53198#discussion_r389131099", "createdAt": "2020-03-06T20:36:19Z", "author": {"login": "nik9000"}, "path": "server/src/main/java/org/elasticsearch/search/aggregations/bucket/geogrid/GeoGridAggregationBuilder.java", "diffHunk": "@@ -65,7 +64,7 @@\n \n     public static ObjectParser<GeoGridAggregationBuilder, Void> createParser(String name, PrecisionParser precisionParser) {\n         ObjectParser<GeoGridAggregationBuilder, Void> parser = new ObjectParser<>(name);\n-        ValuesSourceParserHelper.declareGeoFields(parser, false, false);\n+        ValuesSourceAggregationBuilder.declareFields(parser, false, false, false);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4709cc79a71a37acb5607bf2c5c1c249e91c34c"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2100be5cb2da1518f3e3297e29d1be5a36994588", "author": {"user": {"login": "not-napoleon", "name": "Mark Tozzi"}}, "url": "https://github.com/elastic/elasticsearch/commit/2100be5cb2da1518f3e3297e29d1be5a36994588", "committedDate": "2020-03-06T21:56:30Z", "message": "Merge branch 'feature/extensible-values-source' into vs-refactor-parser-cleanup\n\n Conflicts:\n\tserver/src/main/java/org/elasticsearch/search/aggregations/bucket/missing/MissingAggregationBuilder.java\n\tserver/src/main/java/org/elasticsearch/search/aggregations/bucket/sampler/DiversifiedAggregationBuilder.java\n\tserver/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/RareTermsAggregationBuilder.java\n\tserver/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/TermsAggregationBuilder.java\n\tserver/src/main/java/org/elasticsearch/search/aggregations/metrics/AvgAggregationBuilder.java\n\tserver/src/main/java/org/elasticsearch/search/aggregations/metrics/CardinalityAggregationBuilder.java\n\tserver/src/main/java/org/elasticsearch/search/aggregations/metrics/ExtendedStatsAggregationBuilder.java\n\tserver/src/main/java/org/elasticsearch/search/aggregations/metrics/MaxAggregationBuilder.java\n\tserver/src/main/java/org/elasticsearch/search/aggregations/metrics/MedianAbsoluteDeviationAggregationBuilder.java\n\tserver/src/main/java/org/elasticsearch/search/aggregations/metrics/MinAggregationBuilder.java\n\tserver/src/main/java/org/elasticsearch/search/aggregations/metrics/StatsAggregationBuilder.java\n\tserver/src/main/java/org/elasticsearch/search/aggregations/metrics/SumAggregationBuilder.java\n\tserver/src/main/java/org/elasticsearch/search/aggregations/metrics/ValueCountAggregationBuilder.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcyMTg0ODEz", "url": "https://github.com/elastic/elasticsearch/pull/53198#pullrequestreview-372184813", "createdAt": "2020-03-10T17:47:37Z", "commit": {"oid": "2100be5cb2da1518f3e3297e29d1be5a36994588"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxNzo0NzozOFrOF0aKkw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxNzo0NzozOFrOF0aKkw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDQ5ODk2Mw==", "bodyText": "\ud83c\udf89", "url": "https://github.com/elastic/elasticsearch/pull/53198#discussion_r390498963", "createdAt": "2020-03-10T17:47:38Z", "author": {"login": "polyfractal"}, "path": "server/src/main/java/org/elasticsearch/search/aggregations/support/CoreValuesSourceType.java", "diffHunk": "@@ -291,24 +290,6 @@ public DocValueFormat getFormatter(String format, ZoneId tz) {\n     }\n     ;\n \n-    enum EquivalenceType {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2100be5cb2da1518f3e3297e29d1be5a36994588"}, "originalPosition": 77}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "898935857fced442e2486208f67686bb24502d33", "author": {"user": {"login": "not-napoleon", "name": "Mark Tozzi"}}, "url": "https://github.com/elastic/elasticsearch/commit/898935857fced442e2486208f67686bb24502d33", "committedDate": "2020-03-11T14:00:22Z", "message": "Merge branch 'feature/extensible-values-source' into vs-refactor-parser-cleanup\n\n Conflicts:\n\tserver/src/main/java/org/elasticsearch/search/aggregations/metrics/GeoCentroidAggregationBuilder.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bffc7744c9be2395e38a8ad55555a0d2f818f07f", "author": {"user": {"login": "not-napoleon", "name": "Mark Tozzi"}}, "url": "https://github.com/elastic/elasticsearch/commit/bffc7744c9be2395e38a8ad55555a0d2f818f07f", "committedDate": "2020-03-12T14:56:26Z", "message": "Merge branch 'feature/extensible-values-source' into vs-refactor-parser-cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c119ba49151d8b208d0f160b0e1c1f26b13fa88", "author": {"user": {"login": "not-napoleon", "name": "Mark Tozzi"}}, "url": "https://github.com/elastic/elasticsearch/commit/0c119ba49151d8b208d0f160b0e1c1f26b13fa88", "committedDate": "2020-03-12T18:13:42Z", "message": "Merge branch 'feature/extensible-values-source' into vs-refactor-parser-cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c52103372e409fbea658ce0d40d570314c4f5f9b", "author": {"user": {"login": "not-napoleon", "name": "Mark Tozzi"}}, "url": "https://github.com/elastic/elasticsearch/commit/c52103372e409fbea658ce0d40d570314c4f5f9b", "committedDate": "2020-03-12T20:42:05Z", "message": "Merge branch 'feature/extensible-values-source' into vs-refactor-parser-cleanup\n\n Conflicts:\n\tserver/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DateHistogramAggregationBuilder.java\n\tserver/src/main/java/org/elasticsearch/search/aggregations/support/CoreValuesSourceType.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f82ebe39935938e2a066c6dfa17a49f483e3fcb2", "author": {"user": {"login": "not-napoleon", "name": "Mark Tozzi"}}, "url": "https://github.com/elastic/elasticsearch/commit/f82ebe39935938e2a066c6dfa17a49f483e3fcb2", "committedDate": "2020-03-12T20:46:54Z", "message": "fix AnalyticsVST complie error - forgot to add the file when merging"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1819, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}