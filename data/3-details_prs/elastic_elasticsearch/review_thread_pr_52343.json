{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc1MTE3ODky", "number": 52343, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxODo0NToxNVrODgz3nw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxODo0NToxNVrODgz3nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1NzMwODQ3OnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/ilm/src/main/java/org/elasticsearch/xpack/slm/SnapshotRetentionTask.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxODo0NToxNlrOFrOEXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQwOTo0MzoyNFrOFrhSIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDg2MzU4Mw==", "bodyText": "is this needed? the logger.error above will print a message already", "url": "https://github.com/elastic/elasticsearch/pull/52343#discussion_r380863583", "createdAt": "2020-02-18T18:45:16Z", "author": {"login": "andreidan"}, "path": "x-pack/plugin/ilm/src/main/java/org/elasticsearch/xpack/slm/SnapshotRetentionTask.java", "diffHunk": "@@ -109,6 +119,7 @@ public void triggered(SchedulerEngine.Event event) {\n                     slmStats.retentionFailed();\n                     updateStateWithStats(slmStats);\n                 } finally {\n+                    logger.info(\"SLM retention snapshot cleanup task completed with error\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8df10f9c26e3747d8ec09221ac19a2fa5f684d44"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDkzNzU2Mg==", "bodyText": "I wanted to have something that signaled right when the running.set(false) finished. In this case, the logger.error above could print, but then updateStateWithStats could hang or not complete and we would have no indication.", "url": "https://github.com/elastic/elasticsearch/pull/52343#discussion_r380937562", "createdAt": "2020-02-18T21:12:19Z", "author": {"login": "dakrone"}, "path": "x-pack/plugin/ilm/src/main/java/org/elasticsearch/xpack/slm/SnapshotRetentionTask.java", "diffHunk": "@@ -109,6 +119,7 @@ public void triggered(SchedulerEngine.Event event) {\n                     slmStats.retentionFailed();\n                     updateStateWithStats(slmStats);\n                 } finally {\n+                    logger.info(\"SLM retention snapshot cleanup task completed with error\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDg2MzU4Mw=="}, "originalCommit": {"oid": "8df10f9c26e3747d8ec09221ac19a2fa5f684d44"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTE3ODQwMg==", "bodyText": "Gotcha, thanks Lee", "url": "https://github.com/elastic/elasticsearch/pull/52343#discussion_r381178402", "createdAt": "2020-02-19T09:43:24Z", "author": {"login": "andreidan"}, "path": "x-pack/plugin/ilm/src/main/java/org/elasticsearch/xpack/slm/SnapshotRetentionTask.java", "diffHunk": "@@ -109,6 +119,7 @@ public void triggered(SchedulerEngine.Event event) {\n                     slmStats.retentionFailed();\n                     updateStateWithStats(slmStats);\n                 } finally {\n+                    logger.info(\"SLM retention snapshot cleanup task completed with error\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDg2MzU4Mw=="}, "originalCommit": {"oid": "8df10f9c26e3747d8ec09221ac19a2fa5f684d44"}, "originalPosition": 28}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4005, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}