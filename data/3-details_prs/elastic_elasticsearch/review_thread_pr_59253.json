{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ2NDczMzg1", "number": 59253, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQyMDo1Nzo1MVrOEMpvag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQwODo1NzowMlrOEMzhBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgxNzAyMjUwOnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/src/test/resources/rest-api-spec/test/ml/data_frame_analytics_crud.yml", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQyMDo1Nzo1MVrOGu4-Uw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQwNzoyMToxMFrOGvEwGQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTgyMTEzOQ==", "bodyText": "I don't see a update_data_frame_analytics.json definition file.", "url": "https://github.com/elastic/elasticsearch/pull/59253#discussion_r451821139", "createdAt": "2020-07-08T20:57:51Z", "author": {"login": "benwtrent"}, "path": "x-pack/plugin/src/test/resources/rest-api-spec/test/ml/data_frame_analytics_crud.yml", "diffHunk": "@@ -2100,3 +2100,53 @@ setup:\n               \"includes\": [\"excluded\"]\n             }\n           }\n+\n+---\n+\"Test update given all updatable settings\":\n+\n+  - do:\n+      ml.put_data_frame_analytics:\n+        id: \"update-test-job\"\n+        body: >\n+          {\n+            \"source\": {\n+              \"index\": \"index-source\"\n+            },\n+            \"dest\": {\n+              \"index\": \"index-dest\"\n+            },\n+            \"analysis\": {\"outlier_detection\":{}},\n+            \"description\": \"before update\",\n+            \"model_memory_limit\": \"20mb\",\n+            \"allow_lazy_start\": false\n+          }\n+  - match: { id: \"update-test-job\" }\n+  - match: { description: \"before update\" }\n+  - match: { model_memory_limit: \"20mb\" }\n+  - match: { allow_lazy_start: false }\n+\n+  - do:\n+      ml.update_data_frame_analytics:\n+        id: \"update-test-job\"\n+        body: >\n+          {\n+            \"description\": \"after update\",\n+            \"model_memory_limit\": \"30mb\",\n+            \"allow_lazy_start\": true\n+          }\n+  - match: { id: \"update-test-job\" }\n+  - match: { description: \"after update\" }\n+  - match: { model_memory_limit: \"30mb\" }\n+  - match: { allow_lazy_start: true }\n+\n+---\n+\"Test update given missing analytics\":\n+\n+  - do:\n+      catch: missing\n+      ml.update_data_frame_analytics:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "851d523c710b9cad9838e704bdc3b1a473b5f7be"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjAxMzM4OA==", "bodyText": "Me neither.\nApart from that, the test looks good!", "url": "https://github.com/elastic/elasticsearch/pull/59253#discussion_r452013388", "createdAt": "2020-07-09T07:19:49Z", "author": {"login": "przemekwitek"}, "path": "x-pack/plugin/src/test/resources/rest-api-spec/test/ml/data_frame_analytics_crud.yml", "diffHunk": "@@ -2100,3 +2100,53 @@ setup:\n               \"includes\": [\"excluded\"]\n             }\n           }\n+\n+---\n+\"Test update given all updatable settings\":\n+\n+  - do:\n+      ml.put_data_frame_analytics:\n+        id: \"update-test-job\"\n+        body: >\n+          {\n+            \"source\": {\n+              \"index\": \"index-source\"\n+            },\n+            \"dest\": {\n+              \"index\": \"index-dest\"\n+            },\n+            \"analysis\": {\"outlier_detection\":{}},\n+            \"description\": \"before update\",\n+            \"model_memory_limit\": \"20mb\",\n+            \"allow_lazy_start\": false\n+          }\n+  - match: { id: \"update-test-job\" }\n+  - match: { description: \"before update\" }\n+  - match: { model_memory_limit: \"20mb\" }\n+  - match: { allow_lazy_start: false }\n+\n+  - do:\n+      ml.update_data_frame_analytics:\n+        id: \"update-test-job\"\n+        body: >\n+          {\n+            \"description\": \"after update\",\n+            \"model_memory_limit\": \"30mb\",\n+            \"allow_lazy_start\": true\n+          }\n+  - match: { id: \"update-test-job\" }\n+  - match: { description: \"after update\" }\n+  - match: { model_memory_limit: \"30mb\" }\n+  - match: { allow_lazy_start: true }\n+\n+---\n+\"Test update given missing analytics\":\n+\n+  - do:\n+      catch: missing\n+      ml.update_data_frame_analytics:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTgyMTEzOQ=="}, "originalCommit": {"oid": "851d523c710b9cad9838e704bdc3b1a473b5f7be"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjAxNDEwNQ==", "bodyText": "Yeah, I never added it :-(", "url": "https://github.com/elastic/elasticsearch/pull/59253#discussion_r452014105", "createdAt": "2020-07-09T07:21:10Z", "author": {"login": "dimitris-athanasiou"}, "path": "x-pack/plugin/src/test/resources/rest-api-spec/test/ml/data_frame_analytics_crud.yml", "diffHunk": "@@ -2100,3 +2100,53 @@ setup:\n               \"includes\": [\"excluded\"]\n             }\n           }\n+\n+---\n+\"Test update given all updatable settings\":\n+\n+  - do:\n+      ml.put_data_frame_analytics:\n+        id: \"update-test-job\"\n+        body: >\n+          {\n+            \"source\": {\n+              \"index\": \"index-source\"\n+            },\n+            \"dest\": {\n+              \"index\": \"index-dest\"\n+            },\n+            \"analysis\": {\"outlier_detection\":{}},\n+            \"description\": \"before update\",\n+            \"model_memory_limit\": \"20mb\",\n+            \"allow_lazy_start\": false\n+          }\n+  - match: { id: \"update-test-job\" }\n+  - match: { description: \"before update\" }\n+  - match: { model_memory_limit: \"20mb\" }\n+  - match: { allow_lazy_start: false }\n+\n+  - do:\n+      ml.update_data_frame_analytics:\n+        id: \"update-test-job\"\n+        body: >\n+          {\n+            \"description\": \"after update\",\n+            \"model_memory_limit\": \"30mb\",\n+            \"allow_lazy_start\": true\n+          }\n+  - match: { id: \"update-test-job\" }\n+  - match: { description: \"after update\" }\n+  - match: { model_memory_limit: \"30mb\" }\n+  - match: { allow_lazy_start: true }\n+\n+---\n+\"Test update given missing analytics\":\n+\n+  - do:\n+      catch: missing\n+      ml.update_data_frame_analytics:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTgyMTEzOQ=="}, "originalCommit": {"oid": "851d523c710b9cad9838e704bdc3b1a473b5f7be"}, "originalPosition": 48}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgxODYyNDA2OnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/src/test/resources/rest-api-spec/api/ml.update_data_frame_analytics.json", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQwODo1NzowMlrOGvIDqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQwOTowMToxMlrOGvINVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjA2ODI2NA==", "bodyText": "It looks like the docs url already publish on elastic.co is different:\n- https://www.elastic.co/guide/en/elasticsearch/reference/current/update-df-analytics.html\n+ https://www.elastic.co/guide/en/elasticsearch/reference/current/update-dfanalytics.html", "url": "https://github.com/elastic/elasticsearch/pull/59253#discussion_r452068264", "createdAt": "2020-07-09T08:57:02Z", "author": {"login": "delvedor"}, "path": "x-pack/plugin/src/test/resources/rest-api-spec/api/ml.update_data_frame_analytics.json", "diffHunk": "@@ -0,0 +1,29 @@\n+{\n+  \"ml.update_data_frame_analytics\":{\n+    \"documentation\":{\n+      \"url\":\"https://www.elastic.co/guide/en/elasticsearch/reference/current/update-df-analytics.html\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7faf1e2b7d7074be07b7ca3284894e050ed54f1c"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjA3MDc0Mg==", "bodyText": "Ah, well spotted. I'll fix it.", "url": "https://github.com/elastic/elasticsearch/pull/59253#discussion_r452070742", "createdAt": "2020-07-09T09:01:12Z", "author": {"login": "dimitris-athanasiou"}, "path": "x-pack/plugin/src/test/resources/rest-api-spec/api/ml.update_data_frame_analytics.json", "diffHunk": "@@ -0,0 +1,29 @@\n+{\n+  \"ml.update_data_frame_analytics\":{\n+    \"documentation\":{\n+      \"url\":\"https://www.elastic.co/guide/en/elasticsearch/reference/current/update-df-analytics.html\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjA2ODI2NA=="}, "originalCommit": {"oid": "7faf1e2b7d7074be07b7ca3284894e050ed54f1c"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1896, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}