{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE2NDIyMjg4", "number": 64680, "title": "Add RollupV2 cluster metadata behind feature-flag", "bodyText": "this commit sets the foundation for following rollup-v2-related\ncommits to master.\nThe intention of this metadata is to be used by both the upcoming\nRollupV2 action that will create new indices along with their associated\ncluster metadata. This metadata is to be used by the SearchService when\nfiltering shards in the can-match phase to decide which of the indices\nbelonging to an original index should be queried.\n7.x (7.11) backport: #64892", "createdAt": "2020-11-06T00:38:20Z", "url": "https://github.com/elastic/elasticsearch/pull/64680", "merged": true, "mergeCommit": {"oid": "0a1a28d3c33703e128c5b976af3b07deb896aeb1"}, "closed": true, "closedAt": "2020-11-10T21:10:27Z", "author": {"login": "talevy"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdZsMBpABqjM5NjUwMTg3NjE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdbOurngH2gAyNTE2NDIyMjg4OjJhNzQyM2EyMmYzMGNjMmQ5ZThiYjdhMGYyMjAxYjU3YzllZWNlOTk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d4ad68e8e0b2b8adba7f2d4eadb488815cb7338d", "author": {"user": {"login": "talevy", "name": "Tal Levy"}}, "url": "https://github.com/elastic/elasticsearch/commit/d4ad68e8e0b2b8adba7f2d4eadb488815cb7338d", "committedDate": "2020-11-06T00:34:50Z", "message": "Add RollupV2 cluster metadata behind feature-flag\n\nthis commit sets the foundation for following rollup-v2-related\ncommits to master.\n\nThe intention of this metadata is to be used by both the upcoming\nRollupV2 action that will create new indices along with their associated\ncluster metadata. This metadata is to be used by the SearchService when\nfiltering shards in the can-match phase to decide which of the indices\nbelonging to an original index should be queried."}, "afterCommit": {"oid": "fbf53c37140ea22ae5cec400d0f5aae84928ba07", "author": {"user": {"login": "talevy", "name": "Tal Levy"}}, "url": "https://github.com/elastic/elasticsearch/commit/fbf53c37140ea22ae5cec400d0f5aae84928ba07", "committedDate": "2020-11-06T00:54:04Z", "message": "Add RollupV2 cluster metadata behind feature-flag\n\nthis commit sets the foundation for following rollup-v2-related\ncommits to master.\n\nThe intention of this metadata is to be used by both the upcoming\nRollupV2 action that will create new indices along with their associated\ncluster metadata. This metadata is to be used by the SearchService when\nfiltering shards in the can-match phase to decide which of the indices\nbelonging to an original index should be queried."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d2871315cf142bbbe1a30739934c28169aa5ddec", "author": {"user": {"login": "talevy", "name": "Tal Levy"}}, "url": "https://github.com/elastic/elasticsearch/commit/d2871315cf142bbbe1a30739934c28169aa5ddec", "committedDate": "2020-11-06T01:27:13Z", "message": "Add RollupV2 cluster metadata behind feature-flag\n\nthis commit sets the foundation for following rollup-v2-related\ncommits to master.\n\nThe intention of this metadata is to be used by both the upcoming\nRollupV2 action that will create new indices along with their associated\ncluster metadata. This metadata is to be used by the SearchService when\nfiltering shards in the can-match phase to decide which of the indices\nbelonging to an original index should be queried."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fbf53c37140ea22ae5cec400d0f5aae84928ba07", "author": {"user": {"login": "talevy", "name": "Tal Levy"}}, "url": "https://github.com/elastic/elasticsearch/commit/fbf53c37140ea22ae5cec400d0f5aae84928ba07", "committedDate": "2020-11-06T00:54:04Z", "message": "Add RollupV2 cluster metadata behind feature-flag\n\nthis commit sets the foundation for following rollup-v2-related\ncommits to master.\n\nThe intention of this metadata is to be used by both the upcoming\nRollupV2 action that will create new indices along with their associated\ncluster metadata. This metadata is to be used by the SearchService when\nfiltering shards in the can-match phase to decide which of the indices\nbelonging to an original index should be queried."}, "afterCommit": {"oid": "d2871315cf142bbbe1a30739934c28169aa5ddec", "author": {"user": {"login": "talevy", "name": "Tal Levy"}}, "url": "https://github.com/elastic/elasticsearch/commit/d2871315cf142bbbe1a30739934c28169aa5ddec", "committedDate": "2020-11-06T01:27:13Z", "message": "Add RollupV2 cluster metadata behind feature-flag\n\nthis commit sets the foundation for following rollup-v2-related\ncommits to master.\n\nThe intention of this metadata is to be used by both the upcoming\nRollupV2 action that will create new indices along with their associated\ncluster metadata. This metadata is to be used by the SearchService when\nfiltering shards in the can-match phase to decide which of the indices\nbelonging to an original index should be queried."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2NTAzMjUx", "url": "https://github.com/elastic/elasticsearch/pull/64680#pullrequestreview-526503251", "createdAt": "2020-11-09T17:47:21Z", "commit": {"oid": "d2871315cf142bbbe1a30739934c28169aa5ddec"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxNzo0NzoyMlrOHv6aVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxODoxMToyMVrOHv7Tnw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDAwMjEzNA==", "bodyText": "Why are we using String here instead of (e.g.) ZoneId?  And also for the date, why is that just a string?  Also also, if we're reading the dates in as strings, do we also need a date format?  What formats are supported?", "url": "https://github.com/elastic/elasticsearch/pull/64680#discussion_r520002134", "createdAt": "2020-11-09T17:47:22Z", "author": {"login": "not-napoleon"}, "path": "server/src/main/java/org/elasticsearch/cluster/metadata/RollupGroup.java", "diffHunk": "@@ -0,0 +1,155 @@\n+/*\n+ * Licensed to Elasticsearch under one or more contributor\n+ * license agreements. See the NOTICE file distributed with\n+ * this work for additional information regarding copyright\n+ * ownership. Elasticsearch licenses this file to you under\n+ * the Apache License, Version 2.0 (the \"License\"); you may\n+ * not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.elasticsearch.cluster.metadata;\n+\n+import org.elasticsearch.cluster.AbstractDiffable;\n+import org.elasticsearch.cluster.Diff;\n+import org.elasticsearch.common.ParseField;\n+import org.elasticsearch.common.Strings;\n+import org.elasticsearch.common.io.stream.StreamInput;\n+import org.elasticsearch.common.io.stream.StreamOutput;\n+import org.elasticsearch.common.xcontent.ConstructingObjectParser;\n+import org.elasticsearch.common.xcontent.ToXContentObject;\n+import org.elasticsearch.common.xcontent.XContentBuilder;\n+import org.elasticsearch.common.xcontent.XContentParser;\n+\n+import java.io.IOException;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Objects;\n+\n+/**\n+ * Object representing information about rollup-v2 indices and their respective original-indexes. These objects\n+ * also include information about their capabilities, like which date-intervals and date-timezones they are configured\n+ * with. Used by {@link RollupMetadata}.\n+ */\n+public class RollupGroup extends AbstractDiffable<RollupGroup> implements ToXContentObject {\n+    private static final ParseField GROUP_FIELD = new ParseField(\"group\");\n+    private static final ParseField DATE_INTERVAL_FIELD = new ParseField(\"interval\");\n+    private static final ParseField DATE_TIMEZONE_FIELD = new ParseField(\"timezone\");\n+\n+    // the list of indices part of this rollup group\n+    private List<String> group;\n+    // a map from index-name to the date interval used in the associated index\n+    private Map<String, String> dateInterval;\n+    // a map from index-name to timezone used in the associated index\n+    private Map<String, String> dateTimezone;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d2871315cf142bbbe1a30739934c28169aa5ddec"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDAxNTY0OA==", "bodyText": "An example of how this is used would help.  For example, I don't think it's clear why we need a time zone per input index.", "url": "https://github.com/elastic/elasticsearch/pull/64680#discussion_r520015648", "createdAt": "2020-11-09T18:09:28Z", "author": {"login": "not-napoleon"}, "path": "server/src/main/java/org/elasticsearch/cluster/metadata/RollupGroup.java", "diffHunk": "@@ -0,0 +1,155 @@\n+/*\n+ * Licensed to Elasticsearch under one or more contributor\n+ * license agreements. See the NOTICE file distributed with\n+ * this work for additional information regarding copyright\n+ * ownership. Elasticsearch licenses this file to you under\n+ * the Apache License, Version 2.0 (the \"License\"); you may\n+ * not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.elasticsearch.cluster.metadata;\n+\n+import org.elasticsearch.cluster.AbstractDiffable;\n+import org.elasticsearch.cluster.Diff;\n+import org.elasticsearch.common.ParseField;\n+import org.elasticsearch.common.Strings;\n+import org.elasticsearch.common.io.stream.StreamInput;\n+import org.elasticsearch.common.io.stream.StreamOutput;\n+import org.elasticsearch.common.xcontent.ConstructingObjectParser;\n+import org.elasticsearch.common.xcontent.ToXContentObject;\n+import org.elasticsearch.common.xcontent.XContentBuilder;\n+import org.elasticsearch.common.xcontent.XContentParser;\n+\n+import java.io.IOException;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Objects;\n+\n+/**\n+ * Object representing information about rollup-v2 indices and their respective original-indexes. These objects\n+ * also include information about their capabilities, like which date-intervals and date-timezones they are configured\n+ * with. Used by {@link RollupMetadata}.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d2871315cf142bbbe1a30739934c28169aa5ddec"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDAxNjc5OQ==", "bodyText": "Shouldn't we just default to false for now?  Is there a benefit for making this nullable throughout the code?", "url": "https://github.com/elastic/elasticsearch/pull/64680#discussion_r520016799", "createdAt": "2020-11-09T18:11:21Z", "author": {"login": "not-napoleon"}, "path": "server/src/main/java/org/elasticsearch/rollup/RollupV2.java", "diffHunk": "@@ -0,0 +1,44 @@\n+/*\n+ * Licensed to Elasticsearch under one or more contributor\n+ * license agreements. See the NOTICE file distributed with\n+ * this work for additional information regarding copyright\n+ * ownership. Elasticsearch licenses this file to you under\n+ * the Apache License, Version 2.0 (the \"License\"); you may\n+ * not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.elasticsearch.rollup;\n+\n+import org.elasticsearch.Build;\n+\n+public class RollupV2 {\n+    public static final Boolean ROLLUPV2_FEATURE_FLAG_REGISTERED;\n+\n+    static {\n+        final String property = System.getProperty(\"es.rollupv2_feature_flag_registered\");\n+        if (Build.CURRENT.isSnapshot() && property != null) {\n+            throw new IllegalArgumentException(\"es.rollupv2_feature_flag_registered is only supported in non-snapshot builds\");\n+        }\n+        if (\"true\".equals(property)) {\n+            ROLLUPV2_FEATURE_FLAG_REGISTERED = true;\n+        } else if (\"false\".equals(property)) {\n+            ROLLUPV2_FEATURE_FLAG_REGISTERED = false;\n+        } else if (property == null) {\n+            ROLLUPV2_FEATURE_FLAG_REGISTERED = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d2871315cf142bbbe1a30739934c28169aa5ddec"}, "originalPosition": 37}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a668705b0905c0ee274555168b256228c613a6ef", "author": {"user": {"login": "talevy", "name": "Tal Levy"}}, "url": "https://github.com/elastic/elasticsearch/commit/a668705b0905c0ee274555168b256228c613a6ef", "committedDate": "2020-11-09T22:18:09Z", "message": "Merge remote-tracking branch 'elastic/master' into rollupv2metadata"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3d9b793710fc79634194b62610c98aa7d48ca6fa", "author": {"user": {"login": "talevy", "name": "Tal Levy"}}, "url": "https://github.com/elastic/elasticsearch/commit/3d9b793710fc79634194b62610c98aa7d48ca6fa", "committedDate": "2020-11-09T23:34:44Z", "message": "update RollupGroup with more docs and dedicated classes instead of Strings"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "376edee3c2e7b5563b6ee774a7a4df5873213a51", "author": {"user": {"login": "talevy", "name": "Tal Levy"}}, "url": "https://github.com/elastic/elasticsearch/commit/376edee3c2e7b5563b6ee774a7a4df5873213a51", "committedDate": "2020-11-10T00:06:02Z", "message": "remove unused imports"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3NDUyMTM0", "url": "https://github.com/elastic/elasticsearch/pull/64680#pullrequestreview-527452134", "createdAt": "2020-11-10T17:43:24Z", "commit": {"oid": "376edee3c2e7b5563b6ee774a7a4df5873213a51"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3MjI5MTkw", "url": "https://github.com/elastic/elasticsearch/pull/64680#pullrequestreview-527229190", "createdAt": "2020-11-10T14:00:42Z", "commit": {"oid": "376edee3c2e7b5563b6ee774a7a4df5873213a51"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxNDowMTowOFrOHwd4ww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxOTo0MToxMFrOHwszRA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDU4MzM2Mw==", "bodyText": "Example helps a lot, thank you!", "url": "https://github.com/elastic/elasticsearch/pull/64680#discussion_r520583363", "createdAt": "2020-11-10T14:01:08Z", "author": {"login": "not-napoleon"}, "path": "server/src/main/java/org/elasticsearch/cluster/metadata/RollupGroup.java", "diffHunk": "@@ -0,0 +1,182 @@\n+/*\n+ * Licensed to Elasticsearch under one or more contributor\n+ * license agreements. See the NOTICE file distributed with\n+ * this work for additional information regarding copyright\n+ * ownership. Elasticsearch licenses this file to you under\n+ * the Apache License, Version 2.0 (the \"License\"); you may\n+ * not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.elasticsearch.cluster.metadata;\n+\n+import org.elasticsearch.cluster.AbstractDiffable;\n+import org.elasticsearch.cluster.Diff;\n+import org.elasticsearch.common.ParseField;\n+import org.elasticsearch.common.Strings;\n+import org.elasticsearch.common.io.stream.StreamInput;\n+import org.elasticsearch.common.io.stream.StreamOutput;\n+import org.elasticsearch.common.time.WriteableZoneId;\n+import org.elasticsearch.common.xcontent.ConstructingObjectParser;\n+import org.elasticsearch.common.xcontent.ToXContentObject;\n+import org.elasticsearch.common.xcontent.XContentBuilder;\n+import org.elasticsearch.common.xcontent.XContentParser;\n+import org.elasticsearch.search.aggregations.bucket.histogram.DateHistogramInterval;\n+\n+import java.io.IOException;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Objects;\n+\n+/**\n+ * Object representing information about rollup-v2 indices and their respective original-indexes. These objects\n+ * also include information about their capabilities, like which date-intervals and date-timezones they are configured\n+ * with. Used by {@link RollupMetadata}.\n+ *\n+ * The information in this class will be used to decide which index within the <code>group</code> will be chosen\n+ * for a specific aggregation. For example, if there are two indices with different intervals (`1h`, `1d`) and\n+ * a date-histogram aggregation request is sent for daily intervals, then the index with the associated `1d` interval\n+ * will be chosen.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "376edee3c2e7b5563b6ee774a7a4df5873213a51"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDU4NTE4NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * Simple wrapper around {@link ZoneId} so that it can be\n          \n          \n            \n             * Simple wrapper around {@link ZoneId} so that it can be written to XContent", "url": "https://github.com/elastic/elasticsearch/pull/64680#discussion_r520585184", "createdAt": "2020-11-10T14:03:53Z", "author": {"login": "not-napoleon"}, "path": "server/src/main/java/org/elasticsearch/common/time/WriteableZoneId.java", "diffHunk": "@@ -0,0 +1,83 @@\n+/*\n+ * Licensed to Elasticsearch under one or more contributor\n+ * license agreements. See the NOTICE file distributed with\n+ * this work for additional information regarding copyright\n+ * ownership. Elasticsearch licenses this file to you under\n+ * the Apache License, Version 2.0 (the \"License\"); you may\n+ * not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.elasticsearch.common.time;\n+\n+\n+import org.elasticsearch.common.io.stream.StreamInput;\n+import org.elasticsearch.common.io.stream.StreamOutput;\n+import org.elasticsearch.common.io.stream.Writeable;\n+import org.elasticsearch.common.xcontent.ToXContentFragment;\n+import org.elasticsearch.common.xcontent.XContentBuilder;\n+\n+import java.io.IOException;\n+import java.time.ZoneId;\n+import java.util.Objects;\n+\n+/**\n+ * Simple wrapper around {@link ZoneId} so that it can be", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "376edee3c2e7b5563b6ee774a7a4df5873213a51"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDgyNzcxNg==", "bodyText": "Can we condense this down to maybe just one map with a value that holds the interval and the time zone?", "url": "https://github.com/elastic/elasticsearch/pull/64680#discussion_r520827716", "createdAt": "2020-11-10T19:41:10Z", "author": {"login": "not-napoleon"}, "path": "server/src/main/java/org/elasticsearch/cluster/metadata/RollupGroup.java", "diffHunk": "@@ -0,0 +1,182 @@\n+/*\n+ * Licensed to Elasticsearch under one or more contributor\n+ * license agreements. See the NOTICE file distributed with\n+ * this work for additional information regarding copyright\n+ * ownership. Elasticsearch licenses this file to you under\n+ * the Apache License, Version 2.0 (the \"License\"); you may\n+ * not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.elasticsearch.cluster.metadata;\n+\n+import org.elasticsearch.cluster.AbstractDiffable;\n+import org.elasticsearch.cluster.Diff;\n+import org.elasticsearch.common.ParseField;\n+import org.elasticsearch.common.Strings;\n+import org.elasticsearch.common.io.stream.StreamInput;\n+import org.elasticsearch.common.io.stream.StreamOutput;\n+import org.elasticsearch.common.time.WriteableZoneId;\n+import org.elasticsearch.common.xcontent.ConstructingObjectParser;\n+import org.elasticsearch.common.xcontent.ToXContentObject;\n+import org.elasticsearch.common.xcontent.XContentBuilder;\n+import org.elasticsearch.common.xcontent.XContentParser;\n+import org.elasticsearch.search.aggregations.bucket.histogram.DateHistogramInterval;\n+\n+import java.io.IOException;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Objects;\n+\n+/**\n+ * Object representing information about rollup-v2 indices and their respective original-indexes. These objects\n+ * also include information about their capabilities, like which date-intervals and date-timezones they are configured\n+ * with. Used by {@link RollupMetadata}.\n+ *\n+ * The information in this class will be used to decide which index within the <code>group</code> will be chosen\n+ * for a specific aggregation. For example, if there are two indices with different intervals (`1h`, `1d`) and\n+ * a date-histogram aggregation request is sent for daily intervals, then the index with the associated `1d` interval\n+ * will be chosen.\n+ */\n+public class RollupGroup extends AbstractDiffable<RollupGroup> implements ToXContentObject {\n+    private static final ParseField GROUP_FIELD = new ParseField(\"group\");\n+    private static final ParseField DATE_INTERVAL_FIELD = new ParseField(\"interval\");\n+    private static final ParseField DATE_TIMEZONE_FIELD = new ParseField(\"timezone\");\n+\n+    // the list of indices part of this rollup group\n+    private List<String> group;\n+    // a map from index-name to the date interval used in the associated index\n+    private Map<String, DateHistogramInterval> dateInterval;\n+    // a map from index-name to timezone used in the associated index\n+    private Map<String, WriteableZoneId> dateTimezone;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "376edee3c2e7b5563b6ee774a7a4df5873213a51"}, "originalPosition": 61}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a7423a22f30cc2d9e8bb7a0f2201b57c9eece99", "author": {"user": {"login": "talevy", "name": "Tal Levy"}}, "url": "https://github.com/elastic/elasticsearch/commit/2a7423a22f30cc2d9e8bb7a0f2201b57c9eece99", "committedDate": "2020-11-10T19:42:51Z", "message": "Update server/src/main/java/org/elasticsearch/common/time/WriteableZoneId.java\n\nCo-authored-by: Mark Tozzi <mark.tozzi@gmail.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1339, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}