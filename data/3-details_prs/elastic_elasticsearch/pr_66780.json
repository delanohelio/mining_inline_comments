{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ0NzY5OTE5", "number": 66780, "title": "Don't require DocumentMapper as an argument when parsing a document", "bodyText": "Currently, an incoming document is parsed through DocumentMapper#parse, which in turns calls DocumentParser#parseDocument providing this among other arguments. As part of the effort to reduce usages of DocumentMapper when possible, as it represents the mutable side of mappings (through mappings updates) and involves complexity, we can carry around only the needed components. This does add some required arguments to DocumentParser#parseDocument , though it makes dependencies clearer. This change does not affect end consumers as they all go through DocumentMapper anyways, but by not needed to provide DocumentMapper to parseDocument, we may be able to unblock further improvements down the line.\nRelates to #66295", "createdAt": "2020-12-23T13:06:42Z", "url": "https://github.com/elastic/elasticsearch/pull/66780", "merged": true, "mergeCommit": {"oid": "dbefc05e6ec477be390cb92ed6f2298b3bfe0f70"}, "closed": true, "closedAt": "2021-01-04T14:34:45Z", "author": {"login": "javanna"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdo-wt-AH2gAyNTQ0NzY5OTE5OjVlOGNhNzljNTc1ZTMyYjVhYzdkYWNhZmI0OTg1ZmVjMDliZWU1MTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABds2I11AFqTU2MTAxOTMwMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5e8ca79c575e32b5ac7dacafb4985fec09bee516", "author": {"user": {"login": "javanna", "name": "Luca Cavanna"}}, "url": "https://github.com/elastic/elasticsearch/commit/5e8ca79c575e32b5ac7dacafb4985fec09bee516", "committedDate": "2020-12-23T13:01:32Z", "message": "Don't require DocumentMapper as an argument when parsing a document\n\nCurrently, an incoming document is parsed through `DocumentMapper#parse`, which in turns calls `DocumentParser#parseDocument` providing `this` among other arguments. As part of the effort to reduce usages of `DocumentMapper` when possible, as it represents the mutable side of mappings (through mappings updates) and involves complexity, we can carry around only the needed components. This does add some required arguments to `DocumentParser#parseDocument` , though it makes dependencies clearer. This change does not affect end consumers as they all go through DocumentMapper anyways, but by not needed to provide DocumentMapper to parseDocument, we may be able to unblock further improvements down the line.\n\nRelates to #66295"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e7fe9a72788334688188fa3a73db4f4b809b573b", "author": {"user": {"login": "javanna", "name": "Luca Cavanna"}}, "url": "https://github.com/elastic/elasticsearch/commit/e7fe9a72788334688188fa3a73db4f4b809b573b", "committedDate": "2020-12-23T13:44:28Z", "message": "iter"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYwOTI2NjY1", "url": "https://github.com/elastic/elasticsearch/pull/66780#pullrequestreview-560926665", "createdAt": "2021-01-04T10:33:40Z", "commit": {"oid": "e7fe9a72788334688188fa3a73db4f4b809b573b"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNFQxMDozMzo0MFrOINsuFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNFQxMDozMzo0MFrOINsuFQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTIzNTA5Mw==", "bodyText": "Can you revert the import changes? They'll get changed back next time somebody with different settings edits the file and it just adds noise.", "url": "https://github.com/elastic/elasticsearch/pull/66780#discussion_r551235093", "createdAt": "2021-01-04T10:33:40Z", "author": {"login": "romseygeek"}, "path": "modules/percolator/src/test/java/org/elasticsearch/percolator/CandidateQueryTests.java", "diffHunk": "@@ -19,6 +19,23 @@\n \n package org.elasticsearch.percolator;\n \n+import static org.elasticsearch.common.network.InetAddresses.forString;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e7fe9a72788334688188fa3a73db4f4b809b573b"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ffe66373468d945e547a5f9ff8e9909bca766139", "author": {"user": {"login": "javanna", "name": "Luca Cavanna"}}, "url": "https://github.com/elastic/elasticsearch/commit/ffe66373468d945e547a5f9ff8e9909bca766139", "committedDate": "2021-01-04T10:54:44Z", "message": "Merge branch 'master' into refactoring/untangle_doc_parser_doc_mapper"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "42f0b0978afbe00702a8ea94525e56e456f40920", "author": {"user": {"login": "javanna", "name": "Luca Cavanna"}}, "url": "https://github.com/elastic/elasticsearch/commit/42f0b0978afbe00702a8ea94525e56e456f40920", "committedDate": "2021-01-04T10:59:12Z", "message": "Restore imports order"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc2acf4a93dcce3dcbd797b71de647a7426a9ee1", "author": {"user": {"login": "javanna", "name": "Luca Cavanna"}}, "url": "https://github.com/elastic/elasticsearch/commit/bc2acf4a93dcce3dcbd797b71de647a7426a9ee1", "committedDate": "2021-01-04T11:32:23Z", "message": "Merge branch 'master' into refactoring/untangle_doc_parser_doc_mapper"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYxMDE5MzAx", "url": "https://github.com/elastic/elasticsearch/pull/66780#pullrequestreview-561019301", "createdAt": "2021-01-04T13:14:26Z", "commit": {"oid": "bc2acf4a93dcce3dcbd797b71de647a7426a9ee1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4318, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}