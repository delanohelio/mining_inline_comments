{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI3OTkxODQ4", "number": 57691, "title": "[DOCS] Fix source-related search API params", "bodyText": "Cleans up the reference documentation for the following\nsearch API parameters:\n\n_source query parameter\n_source_excludes query parameter\n_source_includes query parameter\n_source request body parameter\nhits._source response property", "createdAt": "2020-06-04T17:46:47Z", "url": "https://github.com/elastic/elasticsearch/pull/57691", "merged": true, "mergeCommit": {"oid": "0d081de7ad959b4985a838f6d04ad199a0583838"}, "closed": true, "closedAt": "2020-06-09T16:44:58Z", "author": {"login": "jrodewig"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcoBujCAH2gAyNDI3OTkxODQ4OmE2MGYwNWNhZTNkZGI5NTUyZmY3MzgxOGJiMzI3YTQ2MTVjODA0OTA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcpnklVAFqTQyNzMzNDE2OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a60f05cae3ddb9552ff73818bb327a4615c80490", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/a60f05cae3ddb9552ff73818bb327a4615c80490", "committedDate": "2020-06-04T17:43:48Z", "message": "[DOCS] Fix source-related search API params"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2NDMwOTg4", "url": "https://github.com/elastic/elasticsearch/pull/57691#pullrequestreview-426430988", "createdAt": "2020-06-08T16:53:53Z", "commit": {"oid": "a60f05cae3ddb9552ff73818bb327a4615c80490"}, "state": "COMMENTED", "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQxNjo1Mzo1M1rOGgnWuw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQxNzoxOTo1MVrOGgoVJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjg1MjQxMQ==", "bodyText": "Small comment, maybe we could say \"You can pass _source: true to return both ...\" instead of saying 'specify a value'.", "url": "https://github.com/elastic/elasticsearch/pull/57691#discussion_r436852411", "createdAt": "2020-06-08T16:53:53Z", "author": {"login": "jtibshirani"}, "path": "docs/reference/search/search.asciidoc", "diffHunk": "@@ -208,6 +228,10 @@ purposes.\n (Optional, string) A comma-separated list of stored fields to return as part\n of a hit. If no fields are specified, no stored fields are included in the\n response.\n++\n+If this field is specified, the `_source` parameter defaults to `false`. You can", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a60f05cae3ddb9552ff73818bb327a4615c80490"}, "originalPosition": 76}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjg1NDQzMg==", "bodyText": "This could be interpreted as \"if the _source_includes parameter is set, then this parameter is ignored\", whereas in reality they're both considered. You can use _source_includes and _source_excludes in conjunction with each other to filter down the source.", "url": "https://github.com/elastic/elasticsearch/pull/57691#discussion_r436854432", "createdAt": "2020-06-08T16:57:23Z", "author": {"login": "jtibshirani"}, "path": "docs/reference/rest-api/common-parms.asciidoc", "diffHunk": "@@ -846,14 +846,28 @@ end::source[]\n \n tag::source_excludes[]\n `_source_excludes`::\n-(Optional, string) A list of fields to exclude from the returned `_source`\n-field.\n+(Optional, string)\n+A comma-separated list of <<mapping-source-field,source fields>> to exclude from\n+the response.\n++\n+If the `_source` parameter is not `false` and the `_source_includes` query", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a60f05cae3ddb9552ff73818bb327a4615c80490"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjg1NzMxMQ==", "bodyText": "To me we should omit the part \"This does not include ...\", since this section is meant to be a simple API reference. That sentence is more of a 'note' or helpful reminder that the document source does not contain these values (which we already mention in the more detailed/ explanatory 'run a search' reference).", "url": "https://github.com/elastic/elasticsearch/pull/57691#discussion_r436857311", "createdAt": "2020-06-08T17:02:26Z", "author": {"login": "jtibshirani"}, "path": "docs/reference/search/search.asciidoc", "diffHunk": "@@ -192,9 +192,29 @@ value cannot be `0`.\n (Optional, string) A comma-separated list of <field>:<direction> pairs.\n \n `_source`::\n-(Optional, boolean)\n-If `true`, the response includes the `_source` of matching documents under\n-`hits`. Defaults to `true`.\n+(Optional)\n+Indicates which <<mapping-source-field,source fields>> are returned for matching\n+documents. These fields are returned in the `hits._source` property of\n+the search response. Defaults to `true`.\n++\n+.Valid values for `_source`\n+[%collapsible%open]\n+====\n+`true`::\n+(boolean)\n+The entire document source is returned. This does not include:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a60f05cae3ddb9552ff73818bb327a4615c80490"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjg2MjgxNQ==", "bodyText": "I think this should be singular 'pattern'. Also, what would you think of combining these two 'wildcard' sections for simplicity?", "url": "https://github.com/elastic/elasticsearch/pull/57691#discussion_r436862815", "createdAt": "2020-06-08T17:11:13Z", "author": {"login": "jtibshirani"}, "path": "docs/reference/search/search.asciidoc", "diffHunk": "@@ -302,6 +327,58 @@ If the <<search-api-scroll-query-param,`scroll` parameter>> is specified, this\n value cannot be `0`.\n --\n \n+`_source`::\n+(Optional)\n+Indicates which <<mapping-source-field,source fields>> are returned for matching\n+documents. These fields are returned in the `hits._source` property of\n+the search response. Defaults to `true`.\n++\n+.Valid values for `_source`\n+[%collapsible%open]\n+====\n+`true`::\n+(boolean)\n+The entire document source is returned. This does not include:\n+* <<multi-fields,multi-fields>>\n+* <<alias,field aliases>>\n+* Values copied using the <<copy-to,`copy_to`>> mapping parameter\n+\n+`false`::\n+(boolean)\n+The document source is not returned.\n+\n+`<wildcard_pattern>`::\n+(string)\n+Wildcard (`*`) patterns containing source fields to return.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a60f05cae3ddb9552ff73818bb327a4615c80490"}, "originalPosition": 125}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjg2NjAzNw==", "bodyText": "A single wildcard pattern is also supported (as with the _source parameter).", "url": "https://github.com/elastic/elasticsearch/pull/57691#discussion_r436866037", "createdAt": "2020-06-08T17:16:02Z", "author": {"login": "jtibshirani"}, "path": "docs/reference/search/search.asciidoc", "diffHunk": "@@ -302,6 +327,58 @@ If the <<search-api-scroll-query-param,`scroll` parameter>> is specified, this\n value cannot be `0`.\n --\n \n+`_source`::\n+(Optional)\n+Indicates which <<mapping-source-field,source fields>> are returned for matching\n+documents. These fields are returned in the `hits._source` property of\n+the search response. Defaults to `true`.\n++\n+.Valid values for `_source`\n+[%collapsible%open]\n+====\n+`true`::\n+(boolean)\n+The entire document source is returned. This does not include:\n+* <<multi-fields,multi-fields>>\n+* <<alias,field aliases>>\n+* Values copied using the <<copy-to,`copy_to`>> mapping parameter\n+\n+`false`::\n+(boolean)\n+The document source is not returned.\n+\n+`<wildcard_pattern>`::\n+(string)\n+Wildcard (`*`) patterns containing source fields to return.\n+\n+`<wildcard_pattern_array>`::\n+(array of strings)\n+Array of wildcard (`*`) patterns containing source fields to return.\n+\n+`<object>`::\n+(object)\n+Object containing a list of source fields to include or exclude.\n++\n+.Properties for `<object>`\n+[%collapsible%open]\n+=====\n+`includes`::\n+(array of strings)\n+Array of wildcard (`*`) patterns containing source fields to return.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a60f05cae3ddb9552ff73818bb327a4615c80490"}, "originalPosition": 140}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjg2NzIxNw==", "bodyText": "For my own knowledge, what does this do?", "url": "https://github.com/elastic/elasticsearch/pull/57691#discussion_r436867217", "createdAt": "2020-06-08T17:17:54Z", "author": {"login": "jtibshirani"}, "path": "docs/reference/search/search.asciidoc", "diffHunk": "@@ -244,6 +268,7 @@ by their respective types in the response. Defaults to `true`.\n (Optional, boolean)\n If `true`, returns document version as part of a hit. Defaults to `false`.\n \n+[role=\"child_attributes\"]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a60f05cae3ddb9552ff73818bb327a4615c80490"}, "originalPosition": 86}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjg2Nzk1OQ==", "bodyText": "Similar comment to above, you can use includes and excludes in conjunction with each other.", "url": "https://github.com/elastic/elasticsearch/pull/57691#discussion_r436867959", "createdAt": "2020-06-08T17:19:09Z", "author": {"login": "jtibshirani"}, "path": "docs/reference/search/search.asciidoc", "diffHunk": "@@ -302,6 +327,58 @@ If the <<search-api-scroll-query-param,`scroll` parameter>> is specified, this\n value cannot be `0`.\n --\n \n+`_source`::\n+(Optional)\n+Indicates which <<mapping-source-field,source fields>> are returned for matching\n+documents. These fields are returned in the `hits._source` property of\n+the search response. Defaults to `true`.\n++\n+.Valid values for `_source`\n+[%collapsible%open]\n+====\n+`true`::\n+(boolean)\n+The entire document source is returned. This does not include:\n+* <<multi-fields,multi-fields>>\n+* <<alias,field aliases>>\n+* Values copied using the <<copy-to,`copy_to`>> mapping parameter\n+\n+`false`::\n+(boolean)\n+The document source is not returned.\n+\n+`<wildcard_pattern>`::\n+(string)\n+Wildcard (`*`) patterns containing source fields to return.\n+\n+`<wildcard_pattern_array>`::\n+(array of strings)\n+Array of wildcard (`*`) patterns containing source fields to return.\n+\n+`<object>`::\n+(object)\n+Object containing a list of source fields to include or exclude.\n++\n+.Properties for `<object>`\n+[%collapsible%open]\n+=====\n+`includes`::\n+(array of strings)\n+Array of wildcard (`*`) patterns containing source fields to return.\n++\n+If this property is specified, only source fields that match these patterns are\n+returned. You can exclude fields from this subset using the `excludes` property.\n+\n+`excludes`::\n+(array of strings)\n+Array of wildcard (`*`) pattern containing source fields to exclude from the\n+response.\n++\n+If the `includes` property is not specified, the entire document source is returned,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a60f05cae3ddb9552ff73818bb327a4615c80490"}, "originalPosition": 150}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjg2ODM4OQ==", "bodyText": "You can also specify wildcards patterns here.", "url": "https://github.com/elastic/elasticsearch/pull/57691#discussion_r436868389", "createdAt": "2020-06-08T17:19:51Z", "author": {"login": "jtibshirani"}, "path": "docs/reference/search/search.asciidoc", "diffHunk": "@@ -192,9 +192,29 @@ value cannot be `0`.\n (Optional, string) A comma-separated list of <field>:<direction> pairs.\n \n `_source`::\n-(Optional, boolean)\n-If `true`, the response includes the `_source` of matching documents under\n-`hits`. Defaults to `true`.\n+(Optional)\n+Indicates which <<mapping-source-field,source fields>> are returned for matching\n+documents. These fields are returned in the `hits._source` property of\n+the search response. Defaults to `true`.\n++\n+.Valid values for `_source`\n+[%collapsible%open]\n+====\n+`true`::\n+(boolean)\n+The entire document source is returned. This does not include:\n+* <<multi-fields,multi-fields>>\n+* <<alias,field aliases>>\n+* Values copied using the <<copy-to,`copy_to`>> mapping parameter\n+\n+`false`::\n+(boolean)\n+The document source is not returned.\n+\n+`<string>`::\n+(string)\n+Comma-separated list of source fields to return.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a60f05cae3ddb9552ff73818bb327a4615c80490"}, "originalPosition": 66}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe78a0f7fadbdb16043d371d12470d63b8a4e3cd", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/fe78a0f7fadbdb16043d371d12470d63b8a4e3cd", "committedDate": "2020-06-09T15:51:47Z", "message": "Reword `_source_excludes` param"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "439f93e749702723eb45661f9029fb6668cefa08", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/439f93e749702723eb45661f9029fb6668cefa08", "committedDate": "2020-06-09T15:53:37Z", "message": "simplify `true` value for `_source`"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "66b281e1150e8fc32e811bd5097aeca4d1e6f255", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/66b281e1150e8fc32e811bd5097aeca4d1e6f255", "committedDate": "2020-06-09T15:54:59Z", "message": "note wildcard expressions are supported"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a722ca54c47eadb6fe0773fa72afbacb5ff940bf", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/a722ca54c47eadb6fe0773fa72afbacb5ff940bf", "committedDate": "2020-06-09T15:55:43Z", "message": "reword"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ec2297a0ac8a4caf09f1c5eb9ca6bb0468ad53f", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/9ec2297a0ac8a4caf09f1c5eb9ca6bb0468ad53f", "committedDate": "2020-06-09T15:57:09Z", "message": "reword stored_fields def"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "84248c9425f97ed4f3408ffd4af90940b9e914e5", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/84248c9425f97ed4f3408ffd4af90940b9e914e5", "committedDate": "2020-06-09T16:01:26Z", "message": "simplify wildcard pattern def"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "64a01228767f9a8bccea736018c3be899a4b69d5", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/64a01228767f9a8bccea736018c3be899a4b69d5", "committedDate": "2020-06-09T16:06:17Z", "message": "fix up includes/excludes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "51577f7bb3e6f1376fc93a8b2ab088f930f1a2c1", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/51577f7bb3e6f1376fc93a8b2ab088f930f1a2c1", "committedDate": "2020-06-09T16:16:48Z", "message": "simplify source true def"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI3MzM0MTY5", "url": "https://github.com/elastic/elasticsearch/pull/57691#pullrequestreview-427334169", "createdAt": "2020-06-09T16:23:14Z", "commit": {"oid": "51577f7bb3e6f1376fc93a8b2ab088f930f1a2c1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3903, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}