{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk5OTA1ODEz", "number": 63479, "title": "Docs: sync breaking changes from release notes", "bodyText": "Add those breaking changes present into the release notes but missing\nfrom the migration notes.\nPreview\nhttps://elasticsearch_63479.docs-preview.app.elstc.co/guide/en/elasticsearch/reference/7.10/breaking-changes-7.10.html", "createdAt": "2020-10-08T13:01:55Z", "url": "https://github.com/elastic/elasticsearch/pull/63479", "merged": true, "mergeCommit": {"oid": "2cc0ccb1108b47632544f0bfc357cdc7ad931055"}, "closed": true, "closedAt": "2020-10-15T07:45:27Z", "author": {"login": "andreidan"}, "timelineItems": {"totalCount": 25, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdQhKxBgH2gAyNDk5OTA1ODEzOjY2NzcxNTlhNTVjNzM5NmY0YWViYzAxMGZkNmQ4NDU5OWEyYjYwOGY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdSizD6gFqTUwODY4NDQwNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6677159a55c7396f4aebc010fd6d84599a2b608f", "author": {"user": {"login": "andreidan", "name": "Andrei Dan"}}, "url": "https://github.com/elastic/elasticsearch/commit/6677159a55c7396f4aebc010fd6d84599a2b608f", "committedDate": "2020-10-08T12:58:39Z", "message": "Docs: sync breaking changes from release notes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "26283051131ce2d4c3576416980884af1978df39", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/26283051131ce2d4c3576416980884af1978df39", "committedDate": "2020-10-08T16:23:11Z", "message": "Reformat breaking changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d87f80cb926a0d11638d4544d628e51a140b573b", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/d87f80cb926a0d11638d4544d628e51a140b573b", "committedDate": "2020-10-08T16:25:01Z", "message": "Fix typo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4f15fd1011ef42b84342ae3318541bdcdf8a9e45", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/4f15fd1011ef42b84342ae3318541bdcdf8a9e45", "committedDate": "2020-10-08T16:25:20Z", "message": "Fix heading"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ff9ab25a942a933bb0d30728aac9f0fa06378ca0", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/ff9ab25a942a933bb0d30728aac9f0fa06378ca0", "committedDate": "2020-10-08T16:26:28Z", "message": "Fix anchors and remove unneeded discrete tags"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ea742c9030ceb0d32a00490212ec020478a99d6", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/6ea742c9030ceb0d32a00490212ec020478a99d6", "committedDate": "2020-10-08T16:30:16Z", "message": "Fix doc values section"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9d1a95e5d1f8d3b672f174111933fce064d110cd", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/9d1a95e5d1f8d3b672f174111933fce064d110cd", "committedDate": "2020-10-08T16:34:52Z", "message": "Fix mistakes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ab5bd7e914eee99e91c4e08594951bb953ba3b1b", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/ab5bd7e914eee99e91c4e08594951bb953ba3b1b", "committedDate": "2020-10-08T16:40:21Z", "message": "Fix typo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8a331074a0d6d08b65f86d50d1c5732d6e2b825e", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/8a331074a0d6d08b65f86d50d1c5732d6e2b825e", "committedDate": "2020-10-08T16:42:28Z", "message": "Reword"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "336ffeb866657c0507a904dbb9a559d8c00432f6", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/336ffeb866657c0507a904dbb9a559d8c00432f6", "committedDate": "2020-10-08T16:43:33Z", "message": "Fix heading"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0OTU3MTI0", "url": "https://github.com/elastic/elasticsearch/pull/63479#pullrequestreview-504957124", "createdAt": "2020-10-08T16:24:32Z", "commit": {"oid": "26283051131ce2d4c3576416980884af1978df39"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNjoyNDozMlrOHemkfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNjo0MTozN1rOHenOHg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTg1MTI2MQ==", "bodyText": "@javanna  Can you confirm this is the case? If Java users need to make a change to accommodate the new argument, I'd like to give them next steps here.", "url": "https://github.com/elastic/elasticsearch/pull/63479#discussion_r501851261", "createdAt": "2020-10-08T16:24:32Z", "author": {"login": "jrodewig"}, "path": "docs/reference/migration/migrate_7_10.asciidoc", "diffHunk": "@@ -18,54 +18,131 @@ See also <<release-highlights>> and <<es-release-notes>>.\n //tag::notable-breaking-changes[]\n \n [discrete]\n-[[breaking_710_search_changes]]\n-=== Search Changes\n+[[breaking_710_security_changes]]\n+=== Authentication changes\n \n [discrete]\n-==== Missing checks for `index.max_docvalue_fields_search`\n-The setting `index.max_docvalue_fields_search` limits the number of fields that\n-can be retrieved through `docvalue_fields` in a search. Previously we only\n-checked this limit when `docvalue_fields` appeared in the top-level search\n-request body. Now we also enforce the limit when loading doc value fields in\n-an `inner_hits` section or in a `top_hits` aggregation.\n+[[api-keys-require-name-property]]\n+.API keys now require a `name` property.\n+[%collapsible]\n+====\n+*Details* +\n+The `name` property is now required to create or grant an API key.\n \n-[discrete]\n-[[breaking_710_networking_changes]]\n-=== Networking Changes\n+[source,js]\n+----\n+{\n+    \"...\": \"...\",\n+    \"api_key\": {\n+      \"name\": \"key-1\"\n+    }\n+}\n+----\n+// NOTCONSOLE\n+\n+*Impact* +\n+To avoid errors, specify the `name` property when creating or granting API keys.\n+====\n \n [discrete]\n-==== *.tcp.keep_idle and *.tcp.keep_interval now bounded\n-The settings `{network,transport,http}.tcp.keep_idle` and\n-`{network,transport,http}.tcp.keep_interval` are now limited to a maximum\n-value of 300, which amounts to 5 minutes. This helps ensure that, if\n-explicitly configured, only reasonable values are set.\n+[[breaking_710_java_changes]]\n+==== Java changes\n \n-//end::notable-breaking-changes[]\n+[discrete]\n+==== Machine Learning: `allow_no_jobs` and `allow_no_datafeeds` deprecated in favor of `allow_no_match`\n+`allow_no_jobs` and `allow_no_datafeeds` API parameters are deprecated in favor\n+of `allow_no_match`. The old parameters are still accepted by the APIs but the\n+deprecation warning is emitted if the old parameter name is used in the request\n+body or as a request param.\n+High-level REST client classes will now send the new `allow_no_match` parameter.\n \n-.Repository Stats API is deprecated\n+[[supplier-searchlookup-arg]]\n+.The `MappedFieldType#fielddataBuilder` method now accepts a `Supplier<SearchLookup>` argument.\n [%collapsible]\n ====\n *Details* +\n-The Repository Stats API has been introduced in 7.8.0 as an experimental API\n-and was never released. This API is superseded by the <<repositories-metering-apis,Repositories Metering APIs>>\n-added in 7.10.0 which should be used instead. The Repository Stats API is\n-deprecated starting 7.10.0 and will be removed in 8.0.0.\n-\n+For future feature development, we added a `Supplier<SearchLookup>` argument to\n+the existing `MappedFieldType#fielddataBuilder` method.\n+ \n *Impact* +\n-Use the <<repositories-metering-apis,Repositories Metering APIs>>.\n+No action needed.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "26283051131ce2d4c3576416980884af1978df39"}, "originalPosition": 75}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTg2MTkxOA==", "bodyText": "@lcawl Could you take a look at the content of this change and reformat?", "url": "https://github.com/elastic/elasticsearch/pull/63479#discussion_r501861918", "createdAt": "2020-10-08T16:41:37Z", "author": {"login": "jrodewig"}, "path": "docs/reference/migration/migrate_7_10.asciidoc", "diffHunk": "@@ -18,54 +18,131 @@ See also <<release-highlights>> and <<es-release-notes>>.\n //tag::notable-breaking-changes[]\n \n [discrete]\n-[[breaking_710_search_changes]]\n-=== Search Changes\n+[[breaking_710_security_changes]]\n+=== Authentication changes\n \n-[discrete]\n-==== Missing checks for `index.max_docvalue_fields_search`\n-The setting `index.max_docvalue_fields_search` limits the number of fields that\n-can be retrieved through `docvalue_fields` in a search. Previously we only\n-checked this limit when `docvalue_fields` appeared in the top-level search\n-request body. Now we also enforce the limit when loading doc value fields in\n-an `inner_hits` section or in a `top_hits` aggregation.\n+[[api-keys-require-name-property]]\n+.API keys now require a `name` property.\n+[%collapsible]\n+====\n+*Details* +\n+The `name` property is now required to create or grant an API key.\n \n-[discrete]\n-[[breaking_710_networking_changes]]\n-=== Networking Changes\n+[source,js]\n+----\n+{\n+    \"...\": \"...\",\n+    \"api_key\": {\n+      \"name\": \"key-1\"\n+    }\n+}\n+----\n+// NOTCONSOLE\n+\n+*Impact* +\n+To avoid errors, specify the `name` property when creating or granting API keys.\n+====\n \n [discrete]\n-==== *.tcp.keep_idle and *.tcp.keep_interval now bounded\n-The settings `{network,transport,http}.tcp.keep_idle` and\n-`{network,transport,http}.tcp.keep_interval` are now limited to a maximum\n-value of 300, which amounts to 5 minutes. This helps ensure that, if\n-explicitly configured, only reasonable values are set.\n+[[breaking_710_java_changes]]\n+==== Java changes\n \n-//end::notable-breaking-changes[]\n+[discrete]\n+==== Machine Learning: `allow_no_jobs` and `allow_no_datafeeds` deprecated in favor of `allow_no_match`\n+`allow_no_jobs` and `allow_no_datafeeds` API parameters are deprecated in favor\n+of `allow_no_match`. The old parameters are still accepted by the APIs but the\n+deprecation warning is emitted if the old parameter name is used in the request\n+body or as a request param.\n+High-level REST client classes will now send the new `allow_no_match` parameter.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ab5bd7e914eee99e91c4e08594951bb953ba3b1b"}, "originalPosition": 57}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "53c7cfb6aacb5e34d8366773ea1275e2bc919a42", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/53c7cfb6aacb5e34d8366773ea1275e2bc919a42", "committedDate": "2020-10-08T17:40:29Z", "message": "Update java impact. Reword doc value fields."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5ee594239bc64738071fcf77f1c947075814b84", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/d5ee594239bc64738071fcf77f1c947075814b84", "committedDate": "2020-10-08T17:44:34Z", "message": "developing or maintaing"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1MDIzNzIz", "url": "https://github.com/elastic/elasticsearch/pull/63479#pullrequestreview-505023723", "createdAt": "2020-10-08T17:47:42Z", "commit": {"oid": "d5ee594239bc64738071fcf77f1c947075814b84"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNzo0Nzo0MlrOHeps_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNzo0Nzo0MlrOHeps_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTkwMjU4OA==", "bodyText": "maybe we can be more precise and say \"if you implement a mapper plugin\" as not all plugins need to implement that method. But maybe it's too much, up to you :)", "url": "https://github.com/elastic/elasticsearch/pull/63479#discussion_r501902588", "createdAt": "2020-10-08T17:47:42Z", "author": {"login": "javanna"}, "path": "docs/reference/migration/migrate_7_10.asciidoc", "diffHunk": "@@ -18,54 +18,133 @@ See also <<release-highlights>> and <<es-release-notes>>.\n //tag::notable-breaking-changes[]\n \n [discrete]\n-[[breaking_710_search_changes]]\n-=== Search Changes\n+[[breaking_710_security_changes]]\n+=== Authentication changes\n \n-[discrete]\n-==== Missing checks for `index.max_docvalue_fields_search`\n-The setting `index.max_docvalue_fields_search` limits the number of fields that\n-can be retrieved through `docvalue_fields` in a search. Previously we only\n-checked this limit when `docvalue_fields` appeared in the top-level search\n-request body. Now we also enforce the limit when loading doc value fields in\n-an `inner_hits` section or in a `top_hits` aggregation.\n+[[api-keys-require-name-property]]\n+.API keys now require a `name` property.\n+[%collapsible]\n+====\n+*Details* +\n+The `name` property is now required to create or grant an API key.\n \n-[discrete]\n-[[breaking_710_networking_changes]]\n-=== Networking Changes\n+[source,js]\n+----\n+{\n+    \"...\": \"...\",\n+    \"api_key\": {\n+      \"name\": \"key-1\"\n+    }\n+}\n+----\n+// NOTCONSOLE\n+\n+*Impact* +\n+To avoid errors, specify the `name` property when creating or granting API keys.\n+====\n \n [discrete]\n-==== *.tcp.keep_idle and *.tcp.keep_interval now bounded\n-The settings `{network,transport,http}.tcp.keep_idle` and\n-`{network,transport,http}.tcp.keep_interval` are now limited to a maximum\n-value of 300, which amounts to 5 minutes. This helps ensure that, if\n-explicitly configured, only reasonable values are set.\n+[[breaking_710_java_changes]]\n+==== Java changes\n \n-//end::notable-breaking-changes[]\n+[discrete]\n+==== Machine Learning: `allow_no_jobs` and `allow_no_datafeeds` deprecated in favor of `allow_no_match`\n+`allow_no_jobs` and `allow_no_datafeeds` API parameters are deprecated in favor\n+of `allow_no_match`. The old parameters are still accepted by the APIs but the\n+deprecation warning is emitted if the old parameter name is used in the request\n+body or as a request param.\n+High-level REST client classes will now send the new `allow_no_match` parameter.\n \n-.Repository Stats API is deprecated\n+[[supplier-searchlookup-arg]]\n+.The `MappedFieldType#fielddataBuilder` method now accepts a `Supplier<SearchLookup>` argument.\n [%collapsible]\n ====\n *Details* +\n-The Repository Stats API has been introduced in 7.8.0 as an experimental API\n-and was never released. This API is superseded by the <<repositories-metering-apis,Repositories Metering APIs>>\n-added in 7.10.0 which should be used instead. The Repository Stats API is\n-deprecated starting 7.10.0 and will be removed in 8.0.0.\n-\n+To support future feature development, the existing\n+`MappedFieldType#fielddataBuilder` method now accepts a new\n+`Supplier<SearchLookup>` argument.\n+ \n *Impact* +\n-Use the <<repositories-metering-apis,Repositories Metering APIs>>.\n+If developing or maintaining an {es} plugin, update your implementation of the", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5ee594239bc64738071fcf77f1c947075814b84"}, "originalPosition": 76}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7843c1a1d75655325295693331e187dc16fa137", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/b7843c1a1d75655325295693331e187dc16fa137", "committedDate": "2020-10-08T17:50:13Z", "message": "clarify mapper plugin"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b08eeaeb655ea3b9bfc847a8159128c7c32f6490", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/b08eeaeb655ea3b9bfc847a8159128c7c32f6490", "committedDate": "2020-10-08T18:06:58Z", "message": "fix typo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "93ba8a5372d2bbae0151a4b61793d8156fe50386", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/93ba8a5372d2bbae0151a4b61793d8156fe50386", "committedDate": "2020-10-08T21:53:34Z", "message": "Add breaking change for REST API access to system indices"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed6182c91e0a9f9bdab61a53ffcd8ca91ea9e75b", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/ed6182c91e0a9f9bdab61a53ffcd8ca91ea9e75b", "committedDate": "2020-10-08T21:54:37Z", "message": "Fix anchor"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1MTkzOTIx", "url": "https://github.com/elastic/elasticsearch/pull/63479#pullrequestreview-505193921", "createdAt": "2020-10-08T21:55:53Z", "commit": {"oid": "ed6182c91e0a9f9bdab61a53ffcd8ca91ea9e75b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NTo1NFrOHexxvA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NTo1NFrOHexxvA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjAzNDg3Ng==", "bodyText": "CC @gwbrown", "url": "https://github.com/elastic/elasticsearch/pull/63479#discussion_r502034876", "createdAt": "2020-10-08T21:55:54Z", "author": {"login": "jrodewig"}, "path": "docs/reference/migration/migrate_7_10.asciidoc", "diffHunk": "@@ -18,54 +18,171 @@ See also <<release-highlights>> and <<es-release-notes>>.\n //tag::notable-breaking-changes[]\n \n [discrete]\n-[[breaking_710_search_changes]]\n-=== Search Changes\n+[[breaking_710_security_changes]]\n+=== Authentication changes\n \n-[discrete]\n-==== Missing checks for `index.max_docvalue_fields_search`\n-The setting `index.max_docvalue_fields_search` limits the number of fields that\n-can be retrieved through `docvalue_fields` in a search. Previously we only\n-checked this limit when `docvalue_fields` appeared in the top-level search\n-request body. Now we also enforce the limit when loading doc value fields in\n-an `inner_hits` section or in a `top_hits` aggregation.\n+[[api-keys-require-name-property]]\n+.API keys now require a `name` property.\n+[%collapsible]\n+====\n+*Details* +\n+The `name` property is now required to create or grant an API key.\n+\n+[source,js]\n+----\n+{\n+    \"...\": \"...\",\n+    \"api_key\": {\n+      \"name\": \"key-1\"\n+    }\n+}\n+----\n+// NOTCONSOLE\n+\n+*Impact* +\n+To avoid errors, specify the `name` property when creating or granting API keys.\n+====\n \n [discrete]\n-[[breaking_710_networking_changes]]\n-=== Networking Changes\n+[[breaking_710_indices_changes]]\n+==== Indices changes\n+\n+[[bc-deprecate-rest-api-access-to-system-indices]]\n+.REST API access to system indices is now deprecated.\n+[%collapsible]\n+====\n+*Details* +\n+We are deprecating REST API access to system indices. Most REST API requests\n+that attempt to access system indices will return the following deprecation\n+warning:\n+\n+[source,text]\n+----\n+this request accesses system indices: [.system_index_name], but in a future\n+major version, direct access to system indices will be prevented by default\n+----\n+\n+The following REST API endpoints access system indices as part of their\n+implementation and will not return the deprecation warning:\n+\n+* `GET _cluster/health`\n+* `GET {index}/_recovery`\n+* `GET _cluster/allocation/explain`\n+* `GET _cluster/state`\n+* `POST _cluster/reroute`\n+* `GET {index}/_stats`\n+* `GET {index}/_segments`\n+* `GET {index}/_shard_stores`\n+* `GET _cat/[indices,aliases,health,recovery,shards,segments]`\n+\n+*Impact* +\n+To avoid deprecation warnings, do not use unsupported REST APIs to access system\n+indices.\n+====", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ed6182c91e0a9f9bdab61a53ffcd8ca91ea9e75b"}, "originalPosition": 75}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "187fbc3cccfbcca6cd1c71fbdba731a59b77657c", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/187fbc3cccfbcca6cd1c71fbdba731a59b77657c", "committedDate": "2020-10-09T23:46:28Z", "message": "Remove unneeded word"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fac4241de3d007db7360ecf20142a8f2716c381e", "author": {"user": {"login": "lcawl", "name": "Lisa Cawley"}}, "url": "https://github.com/elastic/elasticsearch/commit/fac4241de3d007db7360ecf20142a8f2716c381e", "committedDate": "2020-10-14T17:59:22Z", "message": "[DOCS] Reformatted ML breaking change"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4NjI0MzIz", "url": "https://github.com/elastic/elasticsearch/pull/63479#pullrequestreview-508624323", "createdAt": "2020-10-14T18:35:54Z", "commit": {"oid": "fac4241de3d007db7360ecf20142a8f2716c381e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxODozNTo1NFrOHhgEnw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxODozNTo1NFrOHhgEnw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDg5MDUyNw==", "bodyText": "I think this should be a peer section to the Authentication section, not a child.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            ==== Indices changes\n          \n          \n            \n            === Indices changes", "url": "https://github.com/elastic/elasticsearch/pull/63479#discussion_r504890527", "createdAt": "2020-10-14T18:35:54Z", "author": {"login": "lcawl"}, "path": "docs/reference/migration/migrate_7_10.asciidoc", "diffHunk": "@@ -18,54 +18,182 @@ See also <<release-highlights>> and <<es-release-notes>>.\n //tag::notable-breaking-changes[]\n \n [discrete]\n-[[breaking_710_search_changes]]\n-=== Search Changes\n+[[breaking_710_security_changes]]\n+=== Authentication changes\n \n-[discrete]\n-==== Missing checks for `index.max_docvalue_fields_search`\n-The setting `index.max_docvalue_fields_search` limits the number of fields that\n-can be retrieved through `docvalue_fields` in a search. Previously we only\n-checked this limit when `docvalue_fields` appeared in the top-level search\n-request body. Now we also enforce the limit when loading doc value fields in\n-an `inner_hits` section or in a `top_hits` aggregation.\n+[[api-keys-require-name-property]]\n+.API keys now require a `name` property.\n+[%collapsible]\n+====\n+*Details* +\n+The `name` property is now required to create or grant an API key.\n+\n+[source,js]\n+----\n+{\n+    \"...\": \"...\",\n+    \"api_key\": {\n+      \"name\": \"key-1\"\n+    }\n+}\n+----\n+// NOTCONSOLE\n+\n+*Impact* +\n+To avoid errors, specify the `name` property when creating or granting API keys.\n+====\n \n [discrete]\n-[[breaking_710_networking_changes]]\n-=== Networking Changes\n+[[breaking_710_indices_changes]]\n+==== Indices changes", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fac4241de3d007db7360ecf20142a8f2716c381e"}, "originalPosition": 42}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4NjI0OTQx", "url": "https://github.com/elastic/elasticsearch/pull/63479#pullrequestreview-508624941", "createdAt": "2020-10-14T18:36:46Z", "commit": {"oid": "fac4241de3d007db7360ecf20142a8f2716c381e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxODozNjo0N1rOHhgGfw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxODozNjo0N1rOHhgGfw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDg5MTAwNw==", "bodyText": "Likewise, I think this should be a peer section to the others.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            ==== Java changes\n          \n          \n            \n            === Java changes", "url": "https://github.com/elastic/elasticsearch/pull/63479#discussion_r504891007", "createdAt": "2020-10-14T18:36:47Z", "author": {"login": "lcawl"}, "path": "docs/reference/migration/migrate_7_10.asciidoc", "diffHunk": "@@ -18,54 +18,182 @@ See also <<release-highlights>> and <<es-release-notes>>.\n //tag::notable-breaking-changes[]\n \n [discrete]\n-[[breaking_710_search_changes]]\n-=== Search Changes\n+[[breaking_710_security_changes]]\n+=== Authentication changes\n \n-[discrete]\n-==== Missing checks for `index.max_docvalue_fields_search`\n-The setting `index.max_docvalue_fields_search` limits the number of fields that\n-can be retrieved through `docvalue_fields` in a search. Previously we only\n-checked this limit when `docvalue_fields` appeared in the top-level search\n-request body. Now we also enforce the limit when loading doc value fields in\n-an `inner_hits` section or in a `top_hits` aggregation.\n+[[api-keys-require-name-property]]\n+.API keys now require a `name` property.\n+[%collapsible]\n+====\n+*Details* +\n+The `name` property is now required to create or grant an API key.\n+\n+[source,js]\n+----\n+{\n+    \"...\": \"...\",\n+    \"api_key\": {\n+      \"name\": \"key-1\"\n+    }\n+}\n+----\n+// NOTCONSOLE\n+\n+*Impact* +\n+To avoid errors, specify the `name` property when creating or granting API keys.\n+====\n \n [discrete]\n-[[breaking_710_networking_changes]]\n-=== Networking Changes\n+[[breaking_710_indices_changes]]\n+==== Indices changes\n+\n+[[bc-deprecate-rest-api-access-to-system-indices]]\n+.REST API access to system indices is deprecated.\n+[%collapsible]\n+====\n+*Details* +\n+We are deprecating REST API access to system indices. Most REST API requests\n+that attempt to access system indices will return the following deprecation\n+warning:\n+\n+[source,text]\n+----\n+this request accesses system indices: [.system_index_name], but in a future\n+major version, direct access to system indices will be prevented by default\n+----\n+\n+The following REST API endpoints access system indices as part of their\n+implementation and will not return the deprecation warning:\n+\n+* `GET _cluster/health`\n+* `GET {index}/_recovery`\n+* `GET _cluster/allocation/explain`\n+* `GET _cluster/state`\n+* `POST _cluster/reroute`\n+* `GET {index}/_stats`\n+* `GET {index}/_segments`\n+* `GET {index}/_shard_stores`\n+* `GET _cat/[indices,aliases,health,recovery,shards,segments]`\n+\n+*Impact* +\n+To avoid deprecation warnings, do not use unsupported REST APIs to access system\n+indices.\n+====\n+\n \n [discrete]\n-==== *.tcp.keep_idle and *.tcp.keep_interval now bounded\n-The settings `{network,transport,http}.tcp.keep_idle` and\n-`{network,transport,http}.tcp.keep_interval` are now limited to a maximum\n-value of 300, which amounts to 5 minutes. This helps ensure that, if\n-explicitly configured, only reasonable values are set.\n+[[breaking_710_java_changes]]\n+==== Java changes", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fac4241de3d007db7360ecf20142a8f2716c381e"}, "originalPosition": 85}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "917530ccb9880f22d435f0161ca53ed6ffaa91ca", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/917530ccb9880f22d435f0161ca53ed6ffaa91ca", "committedDate": "2020-10-14T18:41:40Z", "message": "Apply suggestions from code review\n\nCo-authored-by: Lisa Cawley <lcawley@elastic.co>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4Njg0NDA0", "url": "https://github.com/elastic/elasticsearch/pull/63479#pullrequestreview-508684404", "createdAt": "2020-10-14T20:00:25Z", "commit": {"oid": "917530ccb9880f22d435f0161ca53ed6ffaa91ca"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4221, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}