{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQyODcwMzA5", "number": 58869, "title": "Search all (_all, *) resolves data streams too", "bodyText": "This adds support to expand data streams when resolving *, _all or missing \"include all\" wildcards\nand resolve the backing indices according to the configured wildcard expansion options (ie. if some\nbacking indices are closed they will not be resolved if closed indices are not desired).\nRelates to #53100\nFixes #58562", "createdAt": "2020-07-01T18:21:32Z", "url": "https://github.com/elastic/elasticsearch/pull/58869", "merged": true, "mergeCommit": {"oid": "2598327726124d8a86333f79cdc45bf6a4297dbc"}, "closed": true, "closedAt": "2020-07-03T09:48:09Z", "author": {"login": "andreidan"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcwubaGgH2gAyNDQyODcwMzA5OjZjMmM1OTQyZGEzMGY3ZGI2MzQ2NjBlZDZmNmUxYWQzNWZhZTg3NDU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcxPPUogH2gAyNDQyODcwMzA5OjU0Zjg0OTI0NTQ1NDhjZDBhNGI3ZTQ3YmM3YTI1ZTI2MjBhYTZjMTk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6c2c5942da30f7db634660ed6f6e1ad35fae8745", "author": {"user": {"login": "andreidan", "name": "Andrei Dan"}}, "url": "https://github.com/elastic/elasticsearch/commit/6c2c5942da30f7db634660ed6f6e1ad35fae8745", "committedDate": "2020-07-01T18:20:01Z", "message": "Search all (_all, *) to resolves data streams too"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "61bb1669385df262d382548fa6bb24f67e38e663", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/61bb1669385df262d382548fa6bb24f67e38e663", "committedDate": "2020-07-01T19:07:11Z", "message": "Merge branch 'master' into search-all-resolves-datastream"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ea450653bc4e7560c404f6f4431f0ae96e967dd", "author": {"user": {"login": "andreidan", "name": "Andrei Dan"}}, "url": "https://github.com/elastic/elasticsearch/commit/4ea450653bc4e7560c404f6f4431f0ae96e967dd", "committedDate": "2020-07-02T13:24:49Z", "message": "Resolve backing indices when resolving the wildcard"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dc65b65d25c59492379a067702ad576972b27aff", "author": {"user": {"login": "andreidan", "name": "Andrei Dan"}}, "url": "https://github.com/elastic/elasticsearch/commit/dc65b65d25c59492379a067702ad576972b27aff", "committedDate": "2020-07-02T13:26:26Z", "message": "Remove ArrayList instance"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a1756b20b835b1c045b15ad2a10d070c0a29e1e0", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/a1756b20b835b1c045b15ad2a10d070c0a29e1e0", "committedDate": "2020-07-02T13:28:09Z", "message": "Merge branch 'master' into search-all-resolves-datastream"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5efb5d2be60b0563fe23944228911a6e5dfe55fa", "author": {"user": {"login": "andreidan", "name": "Andrei Dan"}}, "url": "https://github.com/elastic/elasticsearch/commit/5efb5d2be60b0563fe23944228911a6e5dfe55fa", "committedDate": "2020-07-02T13:40:02Z", "message": "Crikey fix post-merge compilation error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b8b6df8cb86c548ec16f6cb4669c32f7bcdf27b3", "author": {"user": {"login": "andreidan", "name": "Andrei Dan"}}, "url": "https://github.com/elastic/elasticsearch/commit/b8b6df8cb86c548ec16f6cb4669c32f7bcdf27b3", "committedDate": "2020-07-02T16:03:49Z", "message": "Update test comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyMjE4MzUy", "url": "https://github.com/elastic/elasticsearch/pull/58869#pullrequestreview-442218352", "createdAt": "2020-07-03T07:55:14Z", "commit": {"oid": "b8b6df8cb86c548ec16f6cb4669c32f7bcdf27b3"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwNzo1NToxNVrOGsnTfw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwNzo1NToxNVrOGsnTfw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTQzNDQ5NQ==", "bodyText": "maybe randomize between: *, _all and no args / empty array?", "url": "https://github.com/elastic/elasticsearch/pull/58869#discussion_r449434495", "createdAt": "2020-07-03T07:55:15Z", "author": {"login": "martijnvg"}, "path": "server/src/test/java/org/elasticsearch/cluster/metadata/IndexNameExpressionResolverTests.java", "diffHunk": "@@ -1901,6 +1901,16 @@ public void testDataStreamsWithWildcardExpression() {\n             assertThat(result[2].getName(), equalTo(DataStream.getDefaultBackingIndexName(dataStream2, 1)));\n             assertThat(result[3].getName(), equalTo(DataStream.getDefaultBackingIndexName(dataStream2, 2)));;\n         }\n+        {\n+            IndicesOptions indicesOptions = IndicesOptions.STRICT_EXPAND_OPEN;\n+            Index[] result = indexNameExpressionResolver.concreteIndices(state, indicesOptions, true, \"*\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b8b6df8cb86c548ec16f6cb4669c32f7bcdf27b3"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "54f8492454548cd0a4b7e47bc7a25e2620aa6c19", "author": {"user": {"login": "andreidan", "name": "Andrei Dan"}}, "url": "https://github.com/elastic/elasticsearch/commit/54f8492454548cd0a4b7e47bc7a25e2620aa6c19", "committedDate": "2020-07-03T08:33:41Z", "message": "Tests: randomise \"include all\" wildcard expressions"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2504, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}