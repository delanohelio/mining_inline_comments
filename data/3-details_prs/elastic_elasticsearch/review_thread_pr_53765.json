{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkwNjU2MDgy", "number": 53765, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxODoxMDowOVrODp9-PQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxODoxMDowOVrODp9-PQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1MzMzNTY1OnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/elasticsearch/script/IngestScript.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxODoxMDowOVrOF5eVbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQyMDowMDoyOFrOF5hjYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTgxMDE1OQ==", "bodyText": "While I understand the reasoning for increasing this specifically for ingest (beats modules using many ingest scripts), allowing so high numbers seems like we are easily allowing thrashing, especially since one ingest request can have dozens of scripts. Can you please open a followup issue to investigate ways to allow ingest to utilize many scripts in one request without tripping the limit?\nAlso, don't we need a similar change for IngestConditionalScript, which are more likely to be unique and numerous?", "url": "https://github.com/elastic/elasticsearch/pull/53765#discussion_r395810159", "createdAt": "2020-03-20T18:10:09Z", "author": {"login": "rjernst"}, "path": "server/src/main/java/org/elasticsearch/script/IngestScript.java", "diffHunk": "@@ -30,7 +33,8 @@\n     public static final String[] PARAMETERS = { \"ctx\" };\n \n     /** The context used to compile {@link IngestScript} factories. */\n-    public static final ScriptContext<Factory> CONTEXT = new ScriptContext<>(\"ingest\", Factory.class);\n+    public static final ScriptContext<Factory> CONTEXT = new ScriptContext<>(\"ingest\", Factory.class,\n+        200, TimeValue.timeValueMillis(0), new Tuple<>(375, TimeValue.timeValueMinutes(5)));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6a2bbfdfce615984d0390d93c44bfe603918e666"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTg2Mjg4Mw==", "bodyText": "Can you please open a followup issue to investigate ways to allow ingest to utilize many scripts in one request without tripping the limit?\n\n#53896\n\nAlso, don't we need a similar change for IngestConditionalScript, which are more likely to be unique and numerous?\n\nAdded", "url": "https://github.com/elastic/elasticsearch/pull/53765#discussion_r395862883", "createdAt": "2020-03-20T20:00:28Z", "author": {"login": "stu-elastic"}, "path": "server/src/main/java/org/elasticsearch/script/IngestScript.java", "diffHunk": "@@ -30,7 +33,8 @@\n     public static final String[] PARAMETERS = { \"ctx\" };\n \n     /** The context used to compile {@link IngestScript} factories. */\n-    public static final ScriptContext<Factory> CONTEXT = new ScriptContext<>(\"ingest\", Factory.class);\n+    public static final ScriptContext<Factory> CONTEXT = new ScriptContext<>(\"ingest\", Factory.class,\n+        200, TimeValue.timeValueMillis(0), new Tuple<>(375, TimeValue.timeValueMinutes(5)));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTgxMDE1OQ=="}, "originalCommit": {"oid": "6a2bbfdfce615984d0390d93c44bfe603918e666"}, "originalPosition": 16}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4339, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}