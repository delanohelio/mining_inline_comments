{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI3MzgwNzQ0", "number": 65490, "title": "Introduce licensed plugins", "bodyText": "Backport of #64850.\nThis PR introduces the concept of \"licensed\" plugins. Such plugins\nmay only be installed on installations of the default distribution,\nand this is enforced by the plugin installer. This PR also moves\nthe quote-aware-fs plugin to the x-pack directory, and marks\nit as licensed.\nNote that I didn't move the plugin source under x-pack/plugin\nbecause all the existing x-pack plugins are actually bundles as\nmodules into the default distribution, whereas the quota-aware-fs\nplugin needs to remain a standalone plugin.", "createdAt": "2020-11-25T11:34:03Z", "url": "https://github.com/elastic/elasticsearch/pull/65490", "merged": true, "mergeCommit": {"oid": "1d9d6db76942aaad60b9476fecc01ac6d0b76d13"}, "closed": true, "closedAt": "2020-12-04T09:33:16Z", "author": {"login": "pugnascotia"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdf8Jg5gH2gAyNTI3MzgwNzQ0OmM1MGIzMDlhYTdmMjZjMTZmNWY5Y2FhZjQwNmIxMTUwYmEyZmJmOGU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdirwe2AFqTU0NDU0NzAxNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c50b309aa7f26c16f5f9caaf406b1150ba2fbf8e", "author": {"user": {"login": "pugnascotia", "name": "Rory Hunter"}}, "url": "https://github.com/elastic/elasticsearch/commit/c50b309aa7f26c16f5f9caaf406b1150ba2fbf8e", "committedDate": "2020-11-25T10:53:35Z", "message": "Introduce licensed plugins (#65409)\n\nBackport of #64850.\n\nThis PR introduces the concept of \"licensed\" plugins. Such plugins\nmay only be installed on installations of the default distribution,\nand this is enforced by the plugin installer. This PR also moves\nthe `quote-aware-fs` plugin to the `x-pack` directory, and marks\nit as licensed.\n\nNote that I didn't move the plugin source under `x-pack/plugin`\nbecause all the existing x-pack plugins are actually bundles as\nmodules into the default distribution, whereas the `quota-aware-fs`\nplugin needs to remain a standalone plugin."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dcec6dcfbf3a7eff2ea088f789ea0cebec2cfcc0", "author": {"user": {"login": "pugnascotia", "name": "Rory Hunter"}}, "url": "https://github.com/elastic/elasticsearch/commit/dcec6dcfbf3a7eff2ea088f789ea0cebec2cfcc0", "committedDate": "2020-11-30T11:33:45Z", "message": "Compilation fixes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQyMjQ0Mzk5", "url": "https://github.com/elastic/elasticsearch/pull/65490#pullrequestreview-542244399", "createdAt": "2020-12-01T19:53:14Z", "commit": {"oid": "dcec6dcfbf3a7eff2ea088f789ea0cebec2cfcc0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQxOTo1MzoxNFrOH89Syw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQxOTo1MzoxNFrOH89Syw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzY4MDg0Mw==", "bodyText": "Nit: I just noticed this now, but it applies to the other PRs as well. This comment seems no longer applicable since there is no longer an extra acceptance prompt.", "url": "https://github.com/elastic/elasticsearch/pull/65490#discussion_r533680843", "createdAt": "2020-12-01T19:53:14Z", "author": {"login": "rjernst"}, "path": "server/src/main/java/org/elasticsearch/plugins/PluginInfo.java", "diffHunk": "@@ -315,6 +322,15 @@ public boolean hasNativeController() {\n         return hasNativeController;\n     }\n \n+    /**\n+     * Whether a license must be accepted before this plugin can be installed.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dcec6dcfbf3a7eff2ea088f789ea0cebec2cfcc0"}, "originalPosition": 130}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c830df4f0918b25dbfdd7f73bf1836ffdb5941ae", "author": {"user": {"login": "pugnascotia", "name": "Rory Hunter"}}, "url": "https://github.com/elastic/elasticsearch/commit/c830df4f0918b25dbfdd7f73bf1836ffdb5941ae", "committedDate": "2020-12-02T12:17:01Z", "message": "Serialise isLicensed in PluginInfo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "612ab2c24e1777489533193410d29385c09cbafb", "author": {"user": {"login": "pugnascotia", "name": "Rory Hunter"}}, "url": "https://github.com/elastic/elasticsearch/commit/612ab2c24e1777489533193410d29385c09cbafb", "committedDate": "2020-12-02T12:17:32Z", "message": "Merge remote-tracking branch 'upstream/6.8' into move-quota-aware-fs-plugin-to-xpack-6-8"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "672692fcc3b97f3bbfe66b255066c03da54b2557", "author": {"user": {"login": "pugnascotia", "name": "Rory Hunter"}}, "url": "https://github.com/elastic/elasticsearch/commit/672692fcc3b97f3bbfe66b255066c03da54b2557", "committedDate": "2020-12-03T14:51:46Z", "message": "Fix tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0NTQ3MDE2", "url": "https://github.com/elastic/elasticsearch/pull/65490#pullrequestreview-544547016", "createdAt": "2020-12-03T23:29:32Z", "commit": {"oid": "672692fcc3b97f3bbfe66b255066c03da54b2557"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4257, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}