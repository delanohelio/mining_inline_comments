{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgzMTQxMTA3", "number": 62193, "title": "Add \"synthetics-*-*\" templates for synthetics fleet data", "bodyText": "For the Elastic Agent we currently have logs and metrics, however, synthetic data doesn't belong\nwith those and thus we should have a place for it to live. This would be data reported from\nheartbeat and under the 'monitoring' category.\nThis commit adds a composable index template for synthetics-*-* indices similar to the work in\n#56709 and #57629.\nResolves #61665", "createdAt": "2020-09-09T21:14:31Z", "url": "https://github.com/elastic/elasticsearch/pull/62193", "merged": true, "mergeCommit": {"oid": "d21ddb57a3a4e3b10d230ac152df2cebb852f6f0"}, "closed": true, "closedAt": "2020-09-14T22:37:22Z", "author": {"login": "dakrone"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdHSxr6AH2gAyNDgzMTQxMTA3OmFmOTM4ZDg1NmE5ZThhNWFmNzZlZjUyZGNhYmZjYTMwYjkwZTRiNGY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdI5-JdAH2gAyNDgzMTQxMTA3OjVmOWZiMGY5NTNhMWE0YTNhYjZkMGI1NTEzMWIyMjYwZDQwNWY1MzQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "af938d856a9e8a5af76ef52dcabfca30b90e4b4f", "author": {"user": {"login": "dakrone", "name": "Lee Hinman"}}, "url": "https://github.com/elastic/elasticsearch/commit/af938d856a9e8a5af76ef52dcabfca30b90e4b4f", "committedDate": "2020-09-09T21:07:16Z", "message": "Add \"synthetics-*-*\" templates for synthetics fleet data\n\nFor the Elastic Agent we currently have `logs` and `metrics`, however, synthetic data doesn't belong\nwith those and thus we should have a place for it to live. This would be data reported from\nheartbeat and under the 'monitoring' category.\n\nThis commit adds a composable index template for `synthetics-*-*` indices similar to the work in\n #56709 and #57629.\n\nResolves #61665"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1NzAzMTk5", "url": "https://github.com/elastic/elasticsearch/pull/62193#pullrequestreview-485703199", "createdAt": "2020-09-10T08:31:20Z", "commit": {"oid": "af938d856a9e8a5af76ef52dcabfca30b90e4b4f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1NzQ1MjAx", "url": "https://github.com/elastic/elasticsearch/pull/62193#pullrequestreview-485745201", "createdAt": "2020-09-10T09:21:47Z", "commit": {"oid": "af938d856a9e8a5af76ef52dcabfca30b90e4b4f"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQwOToyMTo0N1rOHPq3rQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQwOToyMjoyNFrOHPq5Jw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjE5MzA2OQ==", "bodyText": "@andrewvc I assume this also works for synthetics for now?", "url": "https://github.com/elastic/elasticsearch/pull/62193#discussion_r486193069", "createdAt": "2020-09-10T09:21:47Z", "author": {"login": "ruflin"}, "path": "x-pack/plugin/core/src/main/resources/synthetics-policy.json", "diffHunk": "@@ -0,0 +1,12 @@\n+{\n+  \"phases\": {\n+    \"hot\": {\n+      \"actions\": {\n+        \"rollover\": {\n+          \"max_size\": \"50gb\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af938d856a9e8a5af76ef52dcabfca30b90e4b4f"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjE5MzQ0Nw==", "bodyText": "@jpountz I remember you wanted to \"not\" use components here. Perhaps it is a good time to adjust?", "url": "https://github.com/elastic/elasticsearch/pull/62193#discussion_r486193447", "createdAt": "2020-09-10T09:22:24Z", "author": {"login": "ruflin"}, "path": "x-pack/plugin/core/src/main/resources/synthetics-template.json", "diffHunk": "@@ -0,0 +1,14 @@\n+{\n+  \"index_patterns\": [\"synthetics-*-*\"],\n+  \"priority\": 100,\n+  \"data_stream\": {},\n+  \"composed_of\": [\n+    \"synthetics-mappings\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af938d856a9e8a5af76ef52dcabfca30b90e4b4f"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba48b6787b5d19eed9a113dfaaa98948a0af3611", "author": {"user": {"login": "dakrone", "name": "Lee Hinman"}}, "url": "https://github.com/elastic/elasticsearch/commit/ba48b6787b5d19eed9a113dfaaa98948a0af3611", "committedDate": "2020-09-10T14:17:20Z", "message": "Include synthetics things in isXPackTemplate method"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3NjcwODU2", "url": "https://github.com/elastic/elasticsearch/pull/62193#pullrequestreview-487670856", "createdAt": "2020-09-14T11:44:09Z", "commit": {"oid": "ba48b6787b5d19eed9a113dfaaa98948a0af3611"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxMTo0NDoxMFrOHRP5nw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxMTo0NDoxMFrOHRP5nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzg0ODM1MQ==", "bodyText": "This one feels wrong since synthetics don't have a message?", "url": "https://github.com/elastic/elasticsearch/pull/62193#discussion_r487848351", "createdAt": "2020-09-14T11:44:10Z", "author": {"login": "jpountz"}, "path": "x-pack/plugin/core/src/main/resources/synthetics-settings.json", "diffHunk": "@@ -0,0 +1,20 @@\n+{\n+  \"template\": {\n+    \"settings\": {\n+      \"index\": {\n+        \"lifecycle\": {\n+          \"name\": \"synthetics\"\n+        },\n+        \"codec\": \"best_compression\",\n+        \"query\": {\n+          \"default_field\": [\"message\"]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba48b6787b5d19eed9a113dfaaa98948a0af3611"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9fab29fb63c2ed9f01bd15c2176ee221898d5407", "author": {"user": {"login": "dakrone", "name": "Lee Hinman"}}, "url": "https://github.com/elastic/elasticsearch/commit/9fab29fb63c2ed9f01bd15c2176ee221898d5407", "committedDate": "2020-09-14T16:29:43Z", "message": "Merge remote-tracking branch 'origin/master' into add-synthetics-templates"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d21aaac24303b6b76dc25d3be21738a19b49bbac", "author": {"user": {"login": "dakrone", "name": "Lee Hinman"}}, "url": "https://github.com/elastic/elasticsearch/commit/d21aaac24303b6b76dc25d3be21738a19b49bbac", "committedDate": "2020-09-14T16:30:23Z", "message": "Unset index.query.default_field\n\nThere is no \"message\" field for this to be the default for"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4MTM3NTk1", "url": "https://github.com/elastic/elasticsearch/pull/62193#pullrequestreview-488137595", "createdAt": "2020-09-14T21:00:37Z", "commit": {"oid": "d21aaac24303b6b76dc25d3be21738a19b49bbac"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQyMTowMDozOFrOHRmZ_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQyMTowMDozOFrOHRmZ_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODIxNzA4NA==", "bodyText": "I'm actually wondering if we can drop this field. We don't use host.* but rather observer.* in synthetics. It's not a big deal (we could just ignore it), but it isn't going to be used.", "url": "https://github.com/elastic/elasticsearch/pull/62193#discussion_r488217084", "createdAt": "2020-09-14T21:00:38Z", "author": {"login": "andrewvc"}, "path": "x-pack/plugin/core/src/main/resources/synthetics-mappings.json", "diffHunk": "@@ -0,0 +1,57 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"dynamic_templates\": [\n+        {\n+          \"strings_as_keyword\": {\n+            \"mapping\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"match_mapping_type\": \"string\"\n+          }\n+        }\n+      ],\n+      \"date_detection\": false,\n+      \"properties\": {\n+        \"@timestamp\": {\n+          \"type\": \"date\"\n+        },\n+        \"data_stream\": {\n+          \"properties\": {\n+            \"type\": {\n+              \"type\": \"constant_keyword\",\n+              \"value\": \"synthetics\"\n+            },\n+            \"dataset\": {\n+              \"type\": \"constant_keyword\"\n+            },\n+            \"namespace\": {\n+              \"type\": \"constant_keyword\"\n+            }\n+          }\n+        },\n+        \"ecs\": {\n+          \"properties\": {\n+            \"version\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            }\n+          }\n+        },\n+        \"host\": {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d21aaac24303b6b76dc25d3be21738a19b49bbac"}, "originalPosition": 42}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c17267f666de1c0132629e77f3482d1eb9d7fba8", "author": {"user": {"login": "dakrone", "name": "Lee Hinman"}}, "url": "https://github.com/elastic/elasticsearch/commit/c17267f666de1c0132629e77f3482d1eb9d7fba8", "committedDate": "2020-09-14T21:03:08Z", "message": "Remove unneeded 'host' field"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f9fb0f953a1a4a3ab6d0b55131b2260d405f534", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/5f9fb0f953a1a4a3ab6d0b55131b2260d405f534", "committedDate": "2020-09-14T21:21:06Z", "message": "Merge branch 'master' into add-synthetics-templates"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4660, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}