{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcyMTQ1NjU0", "number": 61447, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yM1QxNzoxMzo1MVrOEbVeVA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQwODoyODozM1rOEbdXRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3MDk4ODM2OnYy", "diffSide": "RIGHT", "path": "server/src/test/java/org/elasticsearch/index/IndexingSlowLogTests.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yM1QxNzoxMzo1MVrOHFOiEg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yM1QxNzoxMzo1MVrOHFOiEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTI0MzAyNg==", "bodyText": "This now throws with a slightly different text because we read straight from the byte[]", "url": "https://github.com/elastic/elasticsearch/pull/61447#discussion_r475243026", "createdAt": "2020-08-23T17:13:51Z", "author": {"login": "original-brownbear"}, "path": "server/src/test/java/org/elasticsearch/index/IndexingSlowLogTests.java", "diffHunk": "@@ -272,12 +272,12 @@ public void testSlowLogParsedDocumentPrinterSourceToLog() throws IOException {\n             () -> IndexingSlowLogMessage.of(index, doc, 10, true, 3));\n         assertThat(e, hasToString(containsString(\"_failed_to_convert_[Unrecognized token 'invalid':\"\n             + \" was expecting (JSON String, Number, Array, Object or token 'null', 'true' or 'false')\\\\n\"\n-            + \" at [Source: (org.elasticsearch.common.bytes.AbstractBytesReference$MarkSupportingStreamInputWrapper)\")));\n+            + \" at [Source: \")));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9cc1d0e04f3640bd420bad085cd5580515bc0c3b"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3MjI3NzcxOnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/elasticsearch/action/bulk/BulkRequestParser.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQwODoyNzo0OFrOHFZnjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQwODoyNzo0OFrOHFZnjA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTQyNDY1Mg==", "bodyText": "This comment looks to be out-of-date with this changes and can ben removed.", "url": "https://github.com/elastic/elasticsearch/pull/61447#discussion_r475424652", "createdAt": "2020-08-24T08:27:48Z", "author": {"login": "pugnascotia"}, "path": "server/src/main/java/org/elasticsearch/action/bulk/BulkRequestParser.java", "diffHunk": "@@ -133,9 +134,7 @@ public void parse(\n \n             // now parse the action\n             // EMPTY is safe here because we never call namedObject", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9cc1d0e04f3640bd420bad085cd5580515bc0c3b"}, "originalPosition": 36}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3MjI3ODI2OnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/elasticsearch/action/bulk/BulkRequestParser.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQwODoyNzo1NFrOHFZn3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQwODoyNzo1NFrOHFZn3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTQyNDczMg==", "bodyText": "This comment looks to be out-of-date with this changes and can ben removed.", "url": "https://github.com/elastic/elasticsearch/pull/61447#discussion_r475424732", "createdAt": "2020-08-24T08:27:54Z", "author": {"login": "pugnascotia"}, "path": "server/src/main/java/org/elasticsearch/action/bulk/BulkRequestParser.java", "diffHunk": "@@ -277,9 +276,8 @@ public void parse(\n                                 .setRequireAlias(requireAlias)\n                                 .routing(routing);\n                         // EMPTY is safe here because we never call namedObject", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9cc1d0e04f3640bd420bad085cd5580515bc0c3b"}, "originalPosition": 74}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3MjI4MTAxOnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/elasticsearch/action/bulk/BulkRequestParser.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQwODoyODozM1rOHFZpcg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQwODoyODozM1rOHFZpcg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTQyNTEzOA==", "bodyText": "Aha, here is where the EMPTY went. You could re-insert the comment about it here.", "url": "https://github.com/elastic/elasticsearch/pull/61447#discussion_r475425138", "createdAt": "2020-08-24T08:28:33Z", "author": {"login": "pugnascotia"}, "path": "server/src/main/java/org/elasticsearch/action/bulk/BulkRequestParser.java", "diffHunk": "@@ -299,4 +297,33 @@ public void parse(\n         }\n     }\n \n+    private static XContentParser createParser(BytesReference data, XContent xContent) throws IOException {\n+        if (data instanceof BytesArray) {\n+            return parseBytesArray(xContent, (BytesArray) data, 0, data.length());\n+        } else {\n+            return xContent.createParser(NamedXContentRegistry.EMPTY, LoggingDeprecationHandler.INSTANCE, data.streamInput());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9cc1d0e04f3640bd420bad085cd5580515bc0c3b"}, "originalPosition": 91}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 796, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}