{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg5NDI1Nzk1", "number": 62649, "title": "Fix standard filter BWC check to allow for cacheing bug", "bodyText": "The standard tokenfilter was removed by #33310, and should have been\nunuseable in any indexes created since 7.0.  However, a cacheing bug fixed\nby #51092 meant that it was still possible in certain circumstances to create\nindexes referencing the standard filter in versions up to 7.5.2.  Our checks\nin AnalysisModule still refer to 7.0.0, however, meaning that a cluster that\ncontains one of these rogue indexes cannot be upgraded.\nThis commit adjusts the AnalysisModule checks so that we only refuse to\nbuild a mapping referring to standard filter if the index created version is\n7.6 or later.\nFixes #62644", "createdAt": "2020-09-18T16:40:17Z", "url": "https://github.com/elastic/elasticsearch/pull/62649", "merged": true, "mergeCommit": {"oid": "d7e279bb03b87fe493c56e6f2bbd623dbe21ed9e"}, "closed": true, "closedAt": "2020-09-21T09:07:11Z", "author": {"login": "romseygeek"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdKIR4bgH2gAyNDg5NDI1Nzk1OjdhOTAwNDhlYzk2YTIzNDM3YTJkYmUwYWE3Y2FjMDgwYWY0MjE0YmE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdK-rMJAH2gAyNDg5NDI1Nzk1OmJiM2UxMTBjMDhhNzQ5NmU1Mjg3YTUzZGI3MmJkYzhhNjFjMmU2Yjg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7a90048ec96a23437a2dbe0aa7cac080af4214ba", "author": {"user": {"login": "romseygeek", "name": "Alan Woodward"}}, "url": "https://github.com/elastic/elasticsearch/commit/7a90048ec96a23437a2dbe0aa7cac080af4214ba", "committedDate": "2020-09-18T16:35:15Z", "message": "Fix standard filter BWC check to allow for cacheing bug"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkxNjI1NjY5", "url": "https://github.com/elastic/elasticsearch/pull/62649#pullrequestreview-491625669", "createdAt": "2020-09-18T16:45:33Z", "commit": {"oid": "7a90048ec96a23437a2dbe0aa7cac080af4214ba"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQxNjo0NTozM1rOHUUkJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQxNjo0NTozM1rOHUUkJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTA3MDUwMQ==", "bodyText": "Can you add a comment here so that we don't forget why it's 7.6 and not 7.0 ?", "url": "https://github.com/elastic/elasticsearch/pull/62649#discussion_r491070501", "createdAt": "2020-09-18T16:45:33Z", "author": {"login": "jimczi"}, "path": "server/src/main/java/org/elasticsearch/indices/analysis/AnalysisModule.java", "diffHunk": "@@ -181,7 +181,7 @@ public boolean requiresAnalysisSettings() {\n         // Add \"standard\" for old indices (bwc)\n         preConfiguredTokenFilters.register( \"standard\",\n             PreConfiguredTokenFilter.elasticsearchVersion(\"standard\", true, (reader, version) -> {\n-                if (version.before(Version.V_7_0_0)) {\n+                if (version.before(Version.V_7_6_0)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7a90048ec96a23437a2dbe0aa7cac080af4214ba"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f41c464f878627da8d982615044d72122201382", "author": {"user": {"login": "romseygeek", "name": "Alan Woodward"}}, "url": "https://github.com/elastic/elasticsearch/commit/2f41c464f878627da8d982615044d72122201382", "committedDate": "2020-09-20T16:31:17Z", "message": "add comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bb3e110c08a7496e5287a53db72bdc8a61c2e6b8", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/bb3e110c08a7496e5287a53db72bdc8a61c2e6b8", "committedDate": "2020-09-21T07:57:46Z", "message": "Merge branch 'master' into bug/standard-tokenfilter"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3565, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}