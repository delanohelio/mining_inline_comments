{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzNTk5NjYy", "number": 54187, "title": "Schedule commands in current thread context", "bodyText": "Changes ThreadPool's schedule method to run the schedule task in the context of the thread that scheduled the task.\nThis is the more sensible default for this method, and eliminates a range of bugs where the current thread context is mistakenly dropped.\nCloses #17143", "createdAt": "2020-03-25T13:50:43Z", "url": "https://github.com/elastic/elasticsearch/pull/54187", "merged": true, "mergeCommit": {"oid": "0a34b71f3ca7f5ed6e93955f4c0f2f69291a2037"}, "closed": true, "closedAt": "2020-03-26T08:46:38Z", "author": {"login": "ywelsch"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcRHuEbgH2gAyMzkzNTk5NjYyOmYzMTYzNWZlZTQ5MjdiMWRhYjg0ZDI1ZTM1YjY4ZTlhYjkwOTBhNTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcRKlqbgFqTM4MTM1MzIxOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f31635fee4927b1dab84d25e35b68e9ab9090a52", "author": {"user": {"login": "ywelsch", "name": "Yannick Welsch"}}, "url": "https://github.com/elastic/elasticsearch/commit/f31635fee4927b1dab84d25e35b68e9ab9090a52", "committedDate": "2020-03-25T13:42:27Z", "message": "Schedule commands in current thread context\n\nCloses #17143"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMjcxODQ2", "url": "https://github.com/elastic/elasticsearch/pull/54187#pullrequestreview-381271846", "createdAt": "2020-03-25T15:37:38Z", "commit": {"oid": "f31635fee4927b1dab84d25e35b68e9ab9090a52"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNTozNzozOFrOF7hJSA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNTozNzozOFrOF7hJSA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzk1MzM1Mg==", "bodyText": "Should preserveContext be private now?", "url": "https://github.com/elastic/elasticsearch/pull/54187#discussion_r397953352", "createdAt": "2020-03-25T15:37:38Z", "author": {"login": "nik9000"}, "path": "server/src/main/java/org/elasticsearch/threadpool/ThreadPool.java", "diffHunk": "@@ -339,6 +337,7 @@ public ExecutorService executor(String name) {\n      */\n     @Override\n     public ScheduledCancellable schedule(Runnable command, TimeValue delay, String executor) {\n+        command = preserveContext(command);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f31635fee4927b1dab84d25e35b68e9ab9090a52"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMjg0ODQw", "url": "https://github.com/elastic/elasticsearch/pull/54187#pullrequestreview-381284840", "createdAt": "2020-03-25T15:50:23Z", "commit": {"oid": "f31635fee4927b1dab84d25e35b68e9ab9090a52"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "34a704d4edfcbdb7a7f599e42fe08499063f8503", "author": {"user": {"login": "ywelsch", "name": "Yannick Welsch"}}, "url": "https://github.com/elastic/elasticsearch/commit/34a704d4edfcbdb7a7f599e42fe08499063f8503", "committedDate": "2020-03-25T16:30:31Z", "message": "Remove preserveThreadContext method on Scheduler"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMzUzMjE4", "url": "https://github.com/elastic/elasticsearch/pull/54187#pullrequestreview-381353218", "createdAt": "2020-03-25T17:02:59Z", "commit": {"oid": "34a704d4edfcbdb7a7f599e42fe08499063f8503"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1526, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}