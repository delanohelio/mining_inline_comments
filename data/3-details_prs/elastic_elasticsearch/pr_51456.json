{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY3MDU3MjI1", "number": 51456, "title": "Convert ILM and SLM histories into hidden indices", "bodyText": "Modifies SLM's and ILM's history indices to be hidden indices for added\nprotection against accidental querying and deletion, and improves\nIndexTemplateRegistry to handle upgrading index templates.\nAlso modifies the REST test cleanup to delete hidden indices.", "createdAt": "2020-01-24T23:40:40Z", "url": "https://github.com/elastic/elasticsearch/pull/51456", "merged": true, "mergeCommit": {"oid": "28d1fe079ab65d8671d07e0980384e088e9eca59"}, "closed": true, "closedAt": "2020-02-11T19:53:41Z", "author": {"login": "gwbrown"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb9nrQJgH2gAyMzY3MDU3MjI1OjJjZTk1ZjkxZmNlMTBiNDYyZWQxYjVjZGRiYjc4Yjg0ODMzYmY2ZWE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcDFqprAH2gAyMzY3MDU3MjI1OmMzOGZhMWRkNGYxNGE1N2NhNTc4YmZiODBiNTVlZDU5NzM3ZmQ5ZmE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2ce95f91fce10b462ed1b5cddbb78b84833bf6ea", "author": {"user": {"login": "gwbrown", "name": "Gordon Brown"}}, "url": "https://github.com/elastic/elasticsearch/commit/2ce95f91fce10b462ed1b5cddbb78b84833bf6ea", "committedDate": "2020-01-24T23:37:51Z", "message": "Convert ILM and SLM histories into hidden indices\n\nModifies SLM's and ILM's history indices to be hidden indices for added\nprotection against accidental querying and deletion.\n\nAlso modifies the REST test cleanup to delete hidden indices."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7444cf1990ca5d4909962a07b126973d354b0787", "author": {"user": {"login": "gwbrown", "name": "Gordon Brown"}}, "url": "https://github.com/elastic/elasticsearch/commit/7444cf1990ca5d4909962a07b126973d354b0787", "committedDate": "2020-02-03T23:29:04Z", "message": "Merge branch 'master' into hidden/ilm-conversion"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "25838802d3ad0a42346883515dbf6ab3b335faec", "author": {"user": {"login": "gwbrown", "name": "Gordon Brown"}}, "url": "https://github.com/elastic/elasticsearch/commit/25838802d3ad0a42346883515dbf6ab3b335faec", "committedDate": "2020-02-04T01:37:01Z", "message": "Make IndexTemplateRegistry upgrade templates if necessary"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5751c884295c8b889cd04eda7823a4976cbd3bc8", "author": {"user": {"login": "gwbrown", "name": "Gordon Brown"}}, "url": "https://github.com/elastic/elasticsearch/commit/5751c884295c8b889cd04eda7823a4976cbd3bc8", "committedDate": "2020-02-04T01:47:19Z", "message": "Update Javadoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "668a565d1b5a02a924f43c85c9235229794f7188", "author": {"user": {"login": "gwbrown", "name": "Gordon Brown"}}, "url": "https://github.com/elastic/elasticsearch/commit/668a565d1b5a02a924f43c85c9235229794f7188", "committedDate": "2020-02-04T23:00:14Z", "message": "Adjust hidden index cleanup logic to check versions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d20ac8a4e76c07763aa88f2040210f04bd73e981", "author": {"user": {"login": "gwbrown", "name": "Gordon Brown"}}, "url": "https://github.com/elastic/elasticsearch/commit/d20ac8a4e76c07763aa88f2040210f04bd73e981", "committedDate": "2020-02-04T23:00:36Z", "message": "Merge branch 'master' into hidden/ilm-conversion"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f3f1fe9e23ff0880cbfec770461347e412e17d9b", "author": {"user": {"login": "gwbrown", "name": "Gordon Brown"}}, "url": "https://github.com/elastic/elasticsearch/commit/f3f1fe9e23ff0880cbfec770461347e412e17d9b", "committedDate": "2020-02-05T00:12:02Z", "message": "Merge branch 'master' into hidden/ilm-conversion"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ea4847b34ffdc9ed8601fad7b637ee83399217c", "author": {"user": {"login": "gwbrown", "name": "Gordon Brown"}}, "url": "https://github.com/elastic/elasticsearch/commit/6ea4847b34ffdc9ed8601fad7b637ee83399217c", "committedDate": "2020-02-05T18:05:04Z", "message": "Merge branch 'master' into hidden/ilm-conversion"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b798cf431b673f12735a012a5f9042825fa52e43", "author": {"user": {"login": "gwbrown", "name": "Gordon Brown"}}, "url": "https://github.com/elastic/elasticsearch/commit/b798cf431b673f12735a012a5f9042825fa52e43", "committedDate": "2020-02-05T22:25:05Z", "message": "Add tests for Snapshot registry (& fix a bit of logic)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7cbc95cd16c8987d8d4b8adabe1e6410381e8c35", "author": {"user": {"login": "gwbrown", "name": "Gordon Brown"}}, "url": "https://github.com/elastic/elasticsearch/commit/7cbc95cd16c8987d8d4b8adabe1e6410381e8c35", "committedDate": "2020-02-05T22:42:06Z", "message": "Merge branch 'master' into hidden/ilm-conversion"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0f7fedc548d72c736293697aa3bbf508037df8ea", "author": {"user": {"login": "gwbrown", "name": "Gordon Brown"}}, "url": "https://github.com/elastic/elasticsearch/commit/0f7fedc548d72c736293697aa3bbf508037df8ea", "committedDate": "2020-02-05T23:36:38Z", "message": "Fix Watcher tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0MTI0MzEy", "url": "https://github.com/elastic/elasticsearch/pull/51456#pullrequestreview-354124312", "createdAt": "2020-02-05T23:59:39Z", "commit": {"oid": "0f7fedc548d72c736293697aa3bbf508037df8ea"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQyMzo1OTozOVrOFmLUTw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQyMzo1OTozOVrOFmLUTw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTU3NTYzMQ==", "bodyText": "I'm curious about this change, why the change to validation post-filter? Was it causing an issue?", "url": "https://github.com/elastic/elasticsearch/pull/51456#discussion_r375575631", "createdAt": "2020-02-05T23:59:39Z", "author": {"login": "dakrone"}, "path": "x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/template/TemplateUtils.java", "diffHunk": "@@ -59,9 +59,10 @@ public static void loadTemplateIntoMap(String resource, Map<String, IndexTemplat\n     public static String loadTemplate(String resource, String version, String versionProperty) {\n         try {\n             BytesReference source = load(resource);\n-            validate(source);\n+            final String filteredJson = filter(source, version, versionProperty);\n+            validate(new BytesArray(filteredJson));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0f7fedc548d72c736293697aa3bbf508037df8ea"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "49a3f233ad1632b48e15ef1c3a2e6daf008e5d1d", "author": {"user": {"login": "gwbrown", "name": "Gordon Brown"}}, "url": "https://github.com/elastic/elasticsearch/commit/49a3f233ad1632b48e15ef1c3a2e6daf008e5d1d", "committedDate": "2020-02-06T01:04:21Z", "message": "Get minimum node version using admin client"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e5912bae8c79f133b2feee3ddd4366fc3487559c", "author": {"user": {"login": "gwbrown", "name": "Gordon Brown"}}, "url": "https://github.com/elastic/elasticsearch/commit/e5912bae8c79f133b2feee3ddd4366fc3487559c", "committedDate": "2020-02-06T17:43:25Z", "message": "Merge branch 'master' into hidden/ilm-conversion"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6151aabd1802ed3d0b16f7eafd41f12c8fdb6d91", "author": {"user": {"login": "gwbrown", "name": "Gordon Brown"}}, "url": "https://github.com/elastic/elasticsearch/commit/6151aabd1802ed3d0b16f7eafd41f12c8fdb6d91", "committedDate": "2020-02-07T17:39:03Z", "message": "Merge branch 'master' into hidden/ilm-conversion"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae2206f16f4453958e3d4e966a0235e4c4223c1a", "author": {"user": {"login": "gwbrown", "name": "Gordon Brown"}}, "url": "https://github.com/elastic/elasticsearch/commit/ae2206f16f4453958e3d4e966a0235e4c4223c1a", "committedDate": "2020-02-10T23:10:23Z", "message": "Merge branch 'master' into hidden/ilm-conversion"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c38fa1dd4f14a57ca578bfb80b55ed59737fd9fa", "author": {"user": {"login": "gwbrown", "name": "Gordon Brown"}}, "url": "https://github.com/elastic/elasticsearch/commit/c38fa1dd4f14a57ca578bfb80b55ed59737fd9fa", "committedDate": "2020-02-10T23:23:58Z", "message": "Remove SLM patterns from exclusion list"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2733, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}