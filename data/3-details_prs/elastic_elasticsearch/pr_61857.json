{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc3ODY5MjU5", "number": 61857, "title": "Run zulu8 fips CI with BCJSSE instead of SunJSSE", "bodyText": "As we figured out in\n#61316 (comment)\nAzul brings back a lot of changes from JDK 11 to their Zulu8 build\nand this means that we can't run this with SunJSSE in FIPS 140 mode.\nThis change ensures that we configure Zulu8 JDK JVMs in FIPS 140\nmode, using the bouncy castle JSSE FIPS provider, instead of the\nSunJSSE one ( as we do for the rest of the java 8 JVMs )\nResolves: #61316", "createdAt": "2020-09-02T14:41:49Z", "url": "https://github.com/elastic/elasticsearch/pull/61857", "merged": true, "mergeCommit": {"oid": "7b021bf3fb3049d55ef6a217a95320298b3feca5"}, "closed": true, "closedAt": "2020-09-04T11:53:44Z", "author": {"login": "jkakavas"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdE9BaWgH2gAyNDc3ODY5MjU5OjlkNjFlYzQ1YjdiOGE5ZmE1NWY3NjVkZjcwOWVjOGI0Y2NhYjJhMGI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdFiNMBAH2gAyNDc3ODY5MjU5OjZjODg2OGI2YzNmYzhhNGE0YmI4YTM4NTQ5OWFiNjBlODU5NDI5MTI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9d61ec45b7b8a9fa55f765df709ec8b4ccab2a0b", "author": {"user": {"login": "jkakavas", "name": "Ioannis Kakavas"}}, "url": "https://github.com/elastic/elasticsearch/commit/9d61ec45b7b8a9fa55f765df709ec8b4ccab2a0b", "committedDate": "2020-09-02T14:38:41Z", "message": "Run zulu8 fips CI with BCJSSE\n\nAs we figured out in\nhttps://github.com/elastic/elasticsearch/issues/61316#issuecomment-685482708\nAzul brings back a lot of changes from JDK 11 to their Zulu8 build\nand this means that we can't run this with SunJSSE in FIPS 140 mode.\n\nThis change ensures that we configure Zulu8 JDK JVMs in FIPS 140\nmode, using the bouncy castle JSSE FIPS provider, instead of the\nSunJSSE one ( as we do for the rest of the java 8 JVMs )\n\nResolves: #61316"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgxNDc4NTEw", "url": "https://github.com/elastic/elasticsearch/pull/61857#pullrequestreview-481478510", "createdAt": "2020-09-03T04:10:50Z", "commit": {"oid": "9d61ec45b7b8a9fa55f765df709ec8b4ccab2a0b"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QwNDoxMDo1MVrOHMVLBg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QwNDoxMTo1MVrOHMVMLA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjY5MTg0Ng==", "bodyText": "Can you please open this as a separate change so it goes to master as well? We should probably also name it like \"runtime jvm details\"?", "url": "https://github.com/elastic/elasticsearch/pull/61857#discussion_r482691846", "createdAt": "2020-09-03T04:10:51Z", "author": {"login": "rjernst"}, "path": "buildSrc/src/main/java/org/elasticsearch/gradle/info/BuildParams.java", "diffHunk": "@@ -89,6 +90,10 @@ public static JavaVersion getRuntimeJavaVersion() {\n         return value(runtimeJavaVersion);\n     }\n \n+    public static String getJvmDetails() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9d61ec45b7b8a9fa55f765df709ec8b4ccab2a0b"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjY5MjE0MA==", "bodyText": "Is the zulu policy the exact same as the java 11, or a mix of our existing java 11 and java 8 policies?", "url": "https://github.com/elastic/elasticsearch/pull/61857#discussion_r482692140", "createdAt": "2020-09-03T04:11:51Z", "author": {"login": "rjernst"}, "path": "gradle/fips.gradle", "diffHunk": "@@ -9,8 +9,9 @@ if (BuildParams.inFipsJvm) {\n   allprojects {\n     File fipsResourcesDir = new File(project.buildDir, 'fips-resources')\n     boolean java8 = BuildParams.runtimeJavaVersion == JavaVersion.VERSION_1_8\n-    File fipsSecurity = new File(fipsResourcesDir, \"fips_java${java8 ? '8' : ''}.security\")\n-    File fipsPolicy = new File(fipsResourcesDir, \"fips_java${java8 ? '8' : ''}.policy\")\n+    boolean zulu8 = java8 && BuildParams.jvmDetails.contains(\"Zulu\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9d61ec45b7b8a9fa55f765df709ec8b4ccab2a0b"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e8ef389728a492a96c4b8d11d121341bb0df6ed5", "author": {"user": {"login": "jkakavas", "name": "Ioannis Kakavas"}}, "url": "https://github.com/elastic/elasticsearch/commit/e8ef389728a492a96c4b8d11d121341bb0df6ed5", "committedDate": "2020-09-03T12:19:56Z", "message": "Address feedback\n\nRename security properties and policy files to reflect the security\nprovider and the JDK version for which they provide configuration"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "694d9c031fcc6af188da56a3ad8e454cbdc8e0bb", "author": {"user": {"login": "jkakavas", "name": "Ioannis Kakavas"}}, "url": "https://github.com/elastic/elasticsearch/commit/694d9c031fcc6af188da56a3ad8e454cbdc8e0bb", "committedDate": "2020-09-03T12:21:14Z", "message": "Merge remote-tracking branch 'origin/7.x' into fix-zulu8-fips"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyMDM1NTY5", "url": "https://github.com/elastic/elasticsearch/pull/61857#pullrequestreview-482035569", "createdAt": "2020-09-03T17:01:18Z", "commit": {"oid": "694d9c031fcc6af188da56a3ad8e454cbdc8e0bb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyMTQ5Mzc4", "url": "https://github.com/elastic/elasticsearch/pull/61857#pullrequestreview-482149378", "createdAt": "2020-09-03T19:44:00Z", "commit": {"oid": "694d9c031fcc6af188da56a3ad8e454cbdc8e0bb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5169793cfa6bb9170f0a689cc0d12af65bf67cf", "author": {"user": {"login": "jkakavas", "name": "Ioannis Kakavas"}}, "url": "https://github.com/elastic/elasticsearch/commit/d5169793cfa6bb9170f0a689cc0d12af65bf67cf", "committedDate": "2020-09-04T08:51:12Z", "message": "Merge remote-tracking branch 'origin/7.x' into fix-zulu8-fips"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6c8868b6c3fc8a4a4bb8a385499ab60e85942912", "author": {"user": {"login": "jkakavas", "name": "Ioannis Kakavas"}}, "url": "https://github.com/elastic/elasticsearch/commit/6c8868b6c3fc8a4a4bb8a385499ab60e85942912", "committedDate": "2020-09-04T09:58:02Z", "message": "Merge changes from master"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}