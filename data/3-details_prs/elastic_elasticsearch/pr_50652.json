{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU5NTM0ODM3", "number": 50652, "title": "Switch to the most recent Kibana configuration format and SAML/OIDC endpoints.", "bodyText": "Kibana recently did a bunch of changes in configuration format and endpoint names:\n\nKibana is dropping /api/security/v1/oidc and /api/security/v1/oidc/implicit (deprecated since 7.6) routes in favor of /api/security/oidc/callback and /api/security/oidc/implicit respectively\nKibana is dropping /api/security/v1/oidc route used for 3rd-party initiated login in favor of  /api/security/oidc/initiate_login\nThere is no need in configuring server.xsrf.whitelist now\nxpack.security.authc.saml|oidc is deprecated and xpack.security.authc.providers changed format that will allow to define ES realm name within provider definition itself.\n\nPreview:\n\nhttp://elasticsearch_50652.docs-preview.app.elstc.co/guide/en/elasticsearch/reference/master/security-settings.html\nhttp://elasticsearch_50652.docs-preview.app.elstc.co/guide/en/elasticsearch/reference/master/security-api-oidc-authenticate.html\nhttp://elasticsearch_50652.docs-preview.app.elstc.co/guide/en/elasticsearch/reference/master/saml-kibana.html#saml-kibana\nhttp://elasticsearch_50652.docs-preview.app.elstc.co/guide/en/elasticsearch/reference/master/oidc-guide-op.html\nhttp://elasticsearch_50652.docs-preview.app.elstc.co/guide/en/elasticsearch/reference/master/trb-security-saml.html", "createdAt": "2020-01-06T13:06:04Z", "url": "https://github.com/elastic/elasticsearch/pull/50652", "merged": true, "mergeCommit": {"oid": "129031c3d287167072b92883f2592ce9a6aeb7fd"}, "closed": true, "closedAt": "2020-04-02T06:00:35Z", "author": {"login": "azasypkin"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcRuUqmAH2gAyMzU5NTM0ODM3OjlkYzU3NjU1NDgzNjViOTQyYWRiNzc2ZWU4ZDYyNTAwMDMyMzNiYjA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcTeHNOAH2gAyMzU5NTM0ODM3OjQ0NmY4YThjYTUxMzM2YTkxY2ExZTdhMjdmMjdkMGY5YTA0N2I5OGQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9dc5765548365b942adb776ee8d6250003233bb0", "author": {"user": {"login": "azasypkin", "name": "Aleh Zasypkin"}}, "url": "https://github.com/elastic/elasticsearch/commit/9dc5765548365b942adb776ee8d6250003233bb0", "committedDate": "2020-03-27T10:41:00Z", "message": "Switch to the most recent Kibana configuration format and SAML/OIDC endpoints."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b92b461b4d9e373322ebb25d77678eaa3fb5b448", "author": {"user": {"login": "azasypkin", "name": "Aleh Zasypkin"}}, "url": "https://github.com/elastic/elasticsearch/commit/b92b461b4d9e373322ebb25d77678eaa3fb5b448", "committedDate": "2020-01-06T13:01:30Z", "message": "Remove `/v1/` from Kibana OIDC callback URLs."}, "afterCommit": {"oid": "9dc5765548365b942adb776ee8d6250003233bb0", "author": {"user": {"login": "azasypkin", "name": "Aleh Zasypkin"}}, "url": "https://github.com/elastic/elasticsearch/commit/9dc5765548365b942adb776ee8d6250003233bb0", "committedDate": "2020-03-27T10:41:00Z", "message": "Switch to the most recent Kibana configuration format and SAML/OIDC endpoints."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzNjMyODYx", "url": "https://github.com/elastic/elasticsearch/pull/50652#pullrequestreview-383632861", "createdAt": "2020-03-30T08:29:06Z", "commit": {"oid": "9dc5765548365b942adb776ee8d6250003233bb0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1MTIwNjg3", "url": "https://github.com/elastic/elasticsearch/pull/50652#pullrequestreview-385120687", "createdAt": "2020-03-31T21:33:14Z", "commit": {"oid": "9dc5765548365b942adb776ee8d6250003233bb0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQyMTozMzoxNVrOF-pChQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQyMTozMzoxNVrOF-pChQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTIyODQyMQ==", "bodyText": "Minor edit, removing future tense:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            If {kib} is configured in this way, then users will be presented with the choice\n          \n          \n            \n            If {kib} is configured in this way, users are presented with a choice", "url": "https://github.com/elastic/elasticsearch/pull/50652#discussion_r401228421", "createdAt": "2020-03-31T21:33:15Z", "author": {"login": "lcawl"}, "path": "x-pack/docs/en/security/authentication/saml-guide.asciidoc", "diffHunk": "@@ -782,17 +775,19 @@ example below:\n \n [source, yaml]\n ------------------------------------------------------------\n-xpack.security.authc.providers: [saml, basic]\n+xpack.security.authc.providers:\n+  saml.saml1:\n+    order: 0\n+    realm: \"saml1\"\n+  basic.basic1:\n+    order: 1\n ------------------------------------------------------------\n \n-The order is important - this will _initiate_ SAML authentication for\n-unauthenticated users, but will _accept_ basic authentication.\n-\n-If {kib} is configured in this way, then users who wish to login with a\n-username and password, can do so by directly accessing the `/login` page in\n-{kib}. This login will not use SAML credentials, and will rely on one of the\n-other security realms within {es}. Only users who have a username and password\n-for a configured {es} authentication realm will be able to login via this page.\n+If {kib} is configured in this way, then users will be presented with the choice", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9dc5765548365b942adb776ee8d6250003233bb0"}, "originalPosition": 57}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1MTIwOTg4", "url": "https://github.com/elastic/elasticsearch/pull/50652#pullrequestreview-385120988", "createdAt": "2020-03-31T21:33:44Z", "commit": {"oid": "9dc5765548365b942adb776ee8d6250003233bb0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQyMTozMzo0NFrOF-pDeA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQyMTozMzo0NFrOF-pDeA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTIyODY2NA==", "bodyText": "Minor edit, splitting long sentence:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            at the Login Selector screen whether to use username and password, and rely on one\n          \n          \n            \n            at the Login Selector screen. They can provide a username and password, rely on one", "url": "https://github.com/elastic/elasticsearch/pull/50652#discussion_r401228664", "createdAt": "2020-03-31T21:33:44Z", "author": {"login": "lcawl"}, "path": "x-pack/docs/en/security/authentication/saml-guide.asciidoc", "diffHunk": "@@ -782,17 +775,19 @@ example below:\n \n [source, yaml]\n ------------------------------------------------------------\n-xpack.security.authc.providers: [saml, basic]\n+xpack.security.authc.providers:\n+  saml.saml1:\n+    order: 0\n+    realm: \"saml1\"\n+  basic.basic1:\n+    order: 1\n ------------------------------------------------------------\n \n-The order is important - this will _initiate_ SAML authentication for\n-unauthenticated users, but will _accept_ basic authentication.\n-\n-If {kib} is configured in this way, then users who wish to login with a\n-username and password, can do so by directly accessing the `/login` page in\n-{kib}. This login will not use SAML credentials, and will rely on one of the\n-other security realms within {es}. Only users who have a username and password\n-for a configured {es} authentication realm will be able to login via this page.\n+If {kib} is configured in this way, then users will be presented with the choice\n+at the Login Selector screen whether to use username and password, and rely on one", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9dc5765548365b942adb776ee8d6250003233bb0"}, "originalPosition": 58}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1MTIxOTEy", "url": "https://github.com/elastic/elasticsearch/pull/50652#pullrequestreview-385121912", "createdAt": "2020-03-31T21:35:15Z", "commit": {"oid": "9dc5765548365b942adb776ee8d6250003233bb0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQyMTozNToxNVrOF-pGTg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQyMTozNToxNVrOF-pGTg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTIyOTM5MA==", "bodyText": "Minor edit, removing future tense:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            a username and password for a configured {es} authentication realm will be able to\n          \n          \n            \n            a username and password for a configured {es} authentication realm can", "url": "https://github.com/elastic/elasticsearch/pull/50652#discussion_r401229390", "createdAt": "2020-03-31T21:35:15Z", "author": {"login": "lcawl"}, "path": "x-pack/docs/en/security/authentication/saml-guide.asciidoc", "diffHunk": "@@ -782,17 +775,19 @@ example below:\n \n [source, yaml]\n ------------------------------------------------------------\n-xpack.security.authc.providers: [saml, basic]\n+xpack.security.authc.providers:\n+  saml.saml1:\n+    order: 0\n+    realm: \"saml1\"\n+  basic.basic1:\n+    order: 1\n ------------------------------------------------------------\n \n-The order is important - this will _initiate_ SAML authentication for\n-unauthenticated users, but will _accept_ basic authentication.\n-\n-If {kib} is configured in this way, then users who wish to login with a\n-username and password, can do so by directly accessing the `/login` page in\n-{kib}. This login will not use SAML credentials, and will rely on one of the\n-other security realms within {es}. Only users who have a username and password\n-for a configured {es} authentication realm will be able to login via this page.\n+If {kib} is configured in this way, then users will be presented with the choice\n+at the Login Selector screen whether to use username and password, and rely on one\n+of the  other security realms within {es}, or log in with SAML. Only users who have\n+a username and password for a configured {es} authentication realm will be able to", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9dc5765548365b942adb776ee8d6250003233bb0"}, "originalPosition": 60}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fcc26c19f6ea35f83e86febc1000ce3d548d7480", "author": {"user": {"login": "azasypkin", "name": "Aleh Zasypkin"}}, "url": "https://github.com/elastic/elasticsearch/commit/fcc26c19f6ea35f83e86febc1000ce3d548d7480", "committedDate": "2020-04-01T05:17:27Z", "message": "Merge branch 'master' into issue-xxx-rename-kibana-oidc-endpoint"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c785f8188d793785a888eef84caf4c823307652c", "author": {"user": {"login": "azasypkin", "name": "Aleh Zasypkin"}}, "url": "https://github.com/elastic/elasticsearch/commit/c785f8188d793785a888eef84caf4c823307652c", "committedDate": "2020-04-01T05:33:26Z", "message": "Review#1: handle review feedback."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1OTI0MjAz", "url": "https://github.com/elastic/elasticsearch/pull/50652#pullrequestreview-385924203", "createdAt": "2020-04-01T20:27:14Z", "commit": {"oid": "c785f8188d793785a888eef84caf4c823307652c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQyMDoyNzoxNFrOF_RWbQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQyMDoyNzoxNFrOF_RWbQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTg4ODg3Nw==", "bodyText": "Trying to make it clear that \"in this sentence we're describing just two options - either SAML or not-SAML\":\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            at the Login Selector UI. They can provide a username and password, and rely on one\n          \n          \n            \n            at the Login Selector UI. They log in with SAML or they provide a username and password and rely on one", "url": "https://github.com/elastic/elasticsearch/pull/50652#discussion_r401888877", "createdAt": "2020-04-01T20:27:14Z", "author": {"login": "lcawl"}, "path": "x-pack/docs/en/security/authentication/saml-guide.asciidoc", "diffHunk": "@@ -782,17 +775,19 @@ example below:\n \n [source, yaml]\n ------------------------------------------------------------\n-xpack.security.authc.providers: [saml, basic]\n+xpack.security.authc.providers:\n+  saml.saml1:\n+    order: 0\n+    realm: \"saml1\"\n+  basic.basic1:\n+    order: 1\n ------------------------------------------------------------\n \n-The order is important - this will _initiate_ SAML authentication for\n-unauthenticated users, but will _accept_ basic authentication.\n-\n-If {kib} is configured in this way, then users who wish to login with a\n-username and password, can do so by directly accessing the `/login` page in\n-{kib}. This login will not use SAML credentials, and will rely on one of the\n-other security realms within {es}. Only users who have a username and password\n-for a configured {es} authentication realm will be able to login via this page.\n+If {kib} is configured in this way, users are presented with a choice\n+at the Login Selector UI. They can provide a username and password, and rely on one", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c785f8188d793785a888eef84caf4c823307652c"}, "originalPosition": 58}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1OTI0OTQy", "url": "https://github.com/elastic/elasticsearch/pull/50652#pullrequestreview-385924942", "createdAt": "2020-04-01T20:28:26Z", "commit": {"oid": "c785f8188d793785a888eef84caf4c823307652c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQyMDoyODoyNlrOF_RYzw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQyMDoyODoyNlrOF_RYzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTg4OTQ4Nw==", "bodyText": "Finishing the edit to this sentence:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            of the  other security realms within {es}, or log in with SAML. Only users who have\n          \n          \n            \n            of the other security realms within {es}. Only users who have", "url": "https://github.com/elastic/elasticsearch/pull/50652#discussion_r401889487", "createdAt": "2020-04-01T20:28:26Z", "author": {"login": "lcawl"}, "path": "x-pack/docs/en/security/authentication/saml-guide.asciidoc", "diffHunk": "@@ -782,17 +775,19 @@ example below:\n \n [source, yaml]\n ------------------------------------------------------------\n-xpack.security.authc.providers: [saml, basic]\n+xpack.security.authc.providers:\n+  saml.saml1:\n+    order: 0\n+    realm: \"saml1\"\n+  basic.basic1:\n+    order: 1\n ------------------------------------------------------------\n \n-The order is important - this will _initiate_ SAML authentication for\n-unauthenticated users, but will _accept_ basic authentication.\n-\n-If {kib} is configured in this way, then users who wish to login with a\n-username and password, can do so by directly accessing the `/login` page in\n-{kib}. This login will not use SAML credentials, and will rely on one of the\n-other security realms within {es}. Only users who have a username and password\n-for a configured {es} authentication realm will be able to login via this page.\n+If {kib} is configured in this way, users are presented with a choice\n+at the Login Selector UI. They can provide a username and password, and rely on one\n+of the  other security realms within {es}, or log in with SAML. Only users who have", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c785f8188d793785a888eef84caf4c823307652c"}, "originalPosition": 59}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8a6fc5af16af28347f47ca0f923f64b70e39ed55", "author": {"user": {"login": "azasypkin", "name": "Aleh Zasypkin"}}, "url": "https://github.com/elastic/elasticsearch/commit/8a6fc5af16af28347f47ca0f923f64b70e39ed55", "committedDate": "2020-04-01T20:37:10Z", "message": "Review#2: include new suggestions.\n\nCo-Authored-By: Lisa Cawley <lcawley@elastic.co>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1OTM1OTky", "url": "https://github.com/elastic/elasticsearch/pull/50652#pullrequestreview-385935992", "createdAt": "2020-04-01T20:45:32Z", "commit": {"oid": "8a6fc5af16af28347f47ca0f923f64b70e39ed55"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "446f8a8ca51336a91ca1e7a27f27d0f9a047b98d", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/446f8a8ca51336a91ca1e7a27f27d0f9a047b98d", "committedDate": "2020-04-01T20:55:40Z", "message": "Merge branch 'master' into issue-xxx-rename-kibana-oidc-endpoint"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3844, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}