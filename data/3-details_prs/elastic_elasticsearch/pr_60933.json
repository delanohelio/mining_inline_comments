{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY1NzE2ODE2", "number": 60933, "title": "Add the ScriptService to the field parser config", "bodyText": "This makes parsing runtime fields much simpler.\nWe'd initially resisted doing this but all of our other integration options\nproved more troublesome.", "createdAt": "2020-08-10T20:32:23Z", "url": "https://github.com/elastic/elasticsearch/pull/60933", "merged": true, "mergeCommit": {"oid": "9b9aa5fa451a161377bd365e2285c4683bf9d771"}, "closed": true, "closedAt": "2020-08-11T13:30:57Z", "author": {"login": "nik9000"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc9n4jiAH2gAyNDY1NzE2ODE2OjE4Njg3NWM2MWY2MzYyZGI0Zjc1NGM1MjNjNGY5OGI4ZjBkZGQxY2I=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc-wYcqAFqTQ2NzM5ODUyNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "186875c61f6362db4f754c523c4f98b8f0ddd1cb", "author": {"user": {"login": "nik9000", "name": "Nik Everett"}}, "url": "https://github.com/elastic/elasticsearch/commit/186875c61f6362db4f754c523c4f98b8f0ddd1cb", "committedDate": "2020-08-10T20:03:32Z", "message": "Add the ScriptService to the field parser config\n\nThis makes parsing runtime fields much simpler."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "956f354f6942d1c86458e28bb27cd479efb946a9", "author": {"user": {"login": "nik9000", "name": "Nik Everett"}}, "url": "https://github.com/elastic/elasticsearch/commit/956f354f6942d1c86458e28bb27cd479efb946a9", "committedDate": "2020-08-10T20:37:09Z", "message": "Plumb ScriptService to another spot"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f40ee9e4954123610dfb6972e8910d391e3f2bab", "author": {"user": {"login": "nik9000", "name": "Nik Everett"}}, "url": "https://github.com/elastic/elasticsearch/commit/f40ee9e4954123610dfb6972e8910d391e3f2bab", "committedDate": "2020-08-10T20:40:58Z", "message": "Words"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "87a889e1da5c6ba0d1c007de0b0dc6507b351a36", "author": {"user": {"login": "nik9000", "name": "Nik Everett"}}, "url": "https://github.com/elastic/elasticsearch/commit/87a889e1da5c6ba0d1c007de0b0dc6507b351a36", "committedDate": "2020-08-10T20:46:52Z", "message": "Iter"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0NTkzMjIz", "url": "https://github.com/elastic/elasticsearch/pull/60933#pullrequestreview-464593223", "createdAt": "2020-08-10T21:15:08Z", "commit": {"oid": "87a889e1da5c6ba0d1c007de0b0dc6507b351a36"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQyMToxNTowOFrOG-gDIw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQyMToxNTowOFrOG-gDIw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODE4OTk4Nw==", "bodyText": "s/needs/needed by/", "url": "https://github.com/elastic/elasticsearch/pull/60933#discussion_r468189987", "createdAt": "2020-08-10T21:15:08Z", "author": {"login": "romseygeek"}, "path": "server/src/main/java/org/elasticsearch/index/mapper/Mapper.java", "diffHunk": "@@ -146,14 +150,21 @@ public DateFormatter getDateFormatter() {\n \n             protected Function<String, SimilarityProvider> similarityLookupService() { return similarityLookupService; }\n \n+            /**\n+             * The {@linkplain ScriptService} to compile scripts needs by the {@linkplain Mapper}.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87a889e1da5c6ba0d1c007de0b0dc6507b351a36"}, "originalPosition": 34}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d97bdd591977f526a93ea2c212af6af4e4389627", "author": {"user": {"login": "nik9000", "name": "Nik Everett"}}, "url": "https://github.com/elastic/elasticsearch/commit/d97bdd591977f526a93ea2c212af6af4e4389627", "committedDate": "2020-08-10T21:34:14Z", "message": "Grammar is hard"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY3Mzk4NTI1", "url": "https://github.com/elastic/elasticsearch/pull/60933#pullrequestreview-467398525", "createdAt": "2020-08-14T08:31:31Z", "commit": {"oid": "d97bdd591977f526a93ea2c212af6af4e4389627"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xNFQwODozMTozMlrOHAsKwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xNFQwODozMTozMlrOHAsKwQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDQ4NTY5Nw==", "bodyText": "I was wondering if it would be possible to have some other way of testing this besides a yaml test, a single node test would also be good I think", "url": "https://github.com/elastic/elasticsearch/pull/60933#discussion_r470485697", "createdAt": "2020-08-14T08:31:32Z", "author": {"login": "javanna"}, "path": "x-pack/plugin/src/test/resources/rest-api-spec/test/runtime_fields/10_keyword.yml", "diffHunk": "@@ -162,3 +162,22 @@ setup:\n                 query: Monday\n                 analyzer: standard\n   - match: {hits.total.value: 0}\n+\n+---\n+\"dynamic mapping update\":\n+  - do:\n+      bulk:\n+        index: sensor\n+        refresh: true\n+        body: |\n+          {\"index\":{}}\n+          {\"animal\": \"cow\"}\n+  - do:\n+      search:\n+        index: sensor\n+        body:\n+          query:\n+            match:\n+              animal: cow\n+  - match: {hits.total.value: 1}\n+  - match: {hits.hits.0._source.animal: cow}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d97bdd591977f526a93ea2c212af6af4e4389627"}, "originalPosition": 22}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3364, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}