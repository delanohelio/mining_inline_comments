{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM0NDEzMDY5", "number": 58096, "title": "Keep track of timestamp_field mapping as part of a data stream", "bodyText": "This change adds logic that keeps track of a data steam's field mapping of the timestamp_field.\nWhen a data stream is created the mapping for the timestamp_field is extracted and stored with the data stream. Each time a rollover happens this field mapping is applied on top of the final mappings when the new backing index is created.\nHaving this logic is important, because the mapping inside a composable index template can change and so the mapping for the timestamp field can be changed too or removed. With this change the field mapping for the timestamp_field will stay the same for each new backing index.", "createdAt": "2020-06-15T09:36:10Z", "url": "https://github.com/elastic/elasticsearch/pull/58096", "merged": true, "mergeCommit": {"oid": "085ba99fba6f98173b5e164ed6dd99c697834de3"}, "closed": true, "closedAt": "2020-06-22T10:01:02Z", "author": {"login": "martijnvg"}, "timelineItems": {"totalCount": 31, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcrdPORAH2gAyNDM0NDEzMDY5OjU3ZTUxNjEzNzcwMTBlMzliNWNjZjY0YTkwZWM0YzJhMWY4MmEwMTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABctcnz5AH2gAyNDM0NDEzMDY5OjY0NTIwOTA2Yzg3Y2ZkZmU1NmRjZjI0OTExMzI1M2ViOWYwYzQ1MmY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "57e5161377010e39b5ccf64a90ec4c2a1f82a011", "author": {"user": {"login": "martijnvg", "name": "Martijn van Groningen"}}, "url": "https://github.com/elastic/elasticsearch/commit/57e5161377010e39b5ccf64a90ec4c2a1f82a011", "committedDate": "2020-06-15T09:28:42Z", "message": "Keep track of timestamp field mapping as part of a data stream."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b10cb358b8fac9f24717d0b8469bff91bfd8c44b", "author": {"user": {"login": "martijnvg", "name": "Martijn van Groningen"}}, "url": "https://github.com/elastic/elasticsearch/commit/b10cb358b8fac9f24717d0b8469bff91bfd8c44b", "committedDate": "2020-06-15T09:28:42Z", "message": "use mapping source direcly instead of using mapper service to extract the relevant mapping details"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ca450ca837b253ac012152b5cc3e7a9af1dfe07e", "author": {"user": {"login": "martijnvg", "name": "Martijn van Groningen"}}, "url": "https://github.com/elastic/elasticsearch/commit/ca450ca837b253ac012152b5cc3e7a9af1dfe07e", "committedDate": "2020-06-15T09:28:42Z", "message": "fixed rest tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "07bb5f880016335bd7ff2886f7aff07bf670346d", "author": {"user": {"login": "martijnvg", "name": "Martijn van Groningen"}}, "url": "https://github.com/elastic/elasticsearch/commit/07bb5f880016335bd7ff2886f7aff07bf670346d", "committedDate": "2020-06-15T11:10:16Z", "message": "fixed test compile errors"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwNzMyODYw", "url": "https://github.com/elastic/elasticsearch/pull/58096#pullrequestreview-430732860", "createdAt": "2020-06-15T15:04:26Z", "commit": {"oid": "07bb5f880016335bd7ff2886f7aff07bf670346d"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxNTowNDoyNlrOGj2SlA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxNToxMToyNlrOGj2luw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDI0MjgzNg==", "bodyText": "Where possible, could we use the DataStream::getDefaultBackingIndexName method so that any changes there are automatically picked up at least in Java classes?", "url": "https://github.com/elastic/elasticsearch/pull/58096#discussion_r440242836", "createdAt": "2020-06-15T15:04:26Z", "author": {"login": "danhermann"}, "path": "server/src/internalClusterTest/java/org/elasticsearch/indices/DataStreamIT.java", "diffHunk": "@@ -433,6 +444,87 @@ public void testCannotDeleteComposableTemplateUsedByDataStream() throws Exceptio\n         assertTrue(maybeE.isPresent());\n     }\n \n+    public void testChangeTimestampFieldInComposableTemplatePriorToRollOver() throws Exception {\n+        createIndexTemplate(\"id1\", \"logs-foo*\", \"@timestamp\");\n+\n+        // Index doc that triggers creation of a data stream\n+        IndexRequest indexRequest = new IndexRequest(\"logs-foobar\").source(\"{}\", XContentType.JSON).opType(\"create\");\n+        IndexResponse indexResponse = client().index(indexRequest).actionGet();\n+        assertThat(indexResponse.getIndex(), equalTo(\".ds-logs-foobar-000001\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "07bb5f880016335bd7ff2886f7aff07bf670346d"}, "originalPosition": 76}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDI0NzczOQ==", "bodyText": "Do we want to allow this field to contain any mapping properties or just the field's data type? Also, should we require that it contains a data type property of either date or date_nanos?", "url": "https://github.com/elastic/elasticsearch/pull/58096#discussion_r440247739", "createdAt": "2020-06-15T15:11:26Z", "author": {"login": "danhermann"}, "path": "server/src/main/java/org/elasticsearch/cluster/metadata/DataStream.java", "diffHunk": "@@ -201,4 +204,77 @@ public boolean equals(Object o) {\n     public int hashCode() {\n         return Objects.hash(name, timeStampField, indices, generation);\n     }\n+\n+    public static final class TimestampField implements Writeable, ToXContentObject {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "07bb5f880016335bd7ff2886f7aff07bf670346d"}, "originalPosition": 92}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxMzExMzg4", "url": "https://github.com/elastic/elasticsearch/pull/58096#pullrequestreview-431311388", "createdAt": "2020-06-16T09:12:23Z", "commit": {"oid": "07bb5f880016335bd7ff2886f7aff07bf670346d"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwOToxMjoyM1rOGkSegA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwOToxNjo0MFrOGkSo_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDcwNDY0MA==", "bodyText": "I think this is unused?", "url": "https://github.com/elastic/elasticsearch/pull/58096#discussion_r440704640", "createdAt": "2020-06-16T09:12:23Z", "author": {"login": "henningandersen"}, "path": "server/src/main/java/org/elasticsearch/cluster/metadata/MetadataCreateDataStreamService.java", "diffHunk": "@@ -51,13 +55,16 @@\n         new LinkedHashSet<>(List.of(DateFieldMapper.CONTENT_TYPE, DateFieldMapper.DATE_NANOS_CONTENT_TYPE));\n \n     private final ClusterService clusterService;\n+    private final IndicesService indicesService;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "07bb5f880016335bd7ff2886f7aff07bf670346d"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDcwNzMyNQ==", "bodyText": "I wonder if it was more intuitive to require that the mapping be specified on the timestamp field in the template rather than mixing it in with the index mappings. In particular, it will be more clear that those are special, not modifiable compared to the others which can change on rollover.", "url": "https://github.com/elastic/elasticsearch/pull/58096#discussion_r440707325", "createdAt": "2020-06-16T09:16:40Z", "author": {"login": "henningandersen"}, "path": "server/src/main/java/org/elasticsearch/cluster/metadata/MetadataCreateDataStreamService.java", "diffHunk": "@@ -145,9 +154,18 @@ static ClusterState createDataStream(MetadataCreateIndexService metadataCreateIn\n         currentState = metadataCreateIndexService.applyCreateIndexRequest(currentState, createIndexRequest, false);\n         IndexMetadata firstBackingIndex = currentState.metadata().index(firstBackingIndexName);\n         assert firstBackingIndex != null;\n+        assert firstBackingIndex.mapping() != null : \"no mapping found for backing index [\" + firstBackingIndexName + \"]\";\n+\n+        String fieldName = template.getDataStreamTemplate().getTimestampField();\n+        Map<String, Object> mapping = firstBackingIndex.mapping().getSourceAsMap();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "07bb5f880016335bd7ff2886f7aff07bf670346d"}, "originalPosition": 54}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f810431954336da72758ae27a9be3d5a0ffd6903", "author": {"user": {"login": "martijnvg", "name": "Martijn van Groningen"}}, "url": "https://github.com/elastic/elasticsearch/commit/f810431954336da72758ae27a9be3d5a0ffd6903", "committedDate": "2020-06-16T09:35:41Z", "message": "Merge remote-tracking branch 'es/master' into keep_track__of_ds_timestamp_field"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a1eee838d7d0058085ad5ae9269d8395561d82d4", "author": {"user": {"login": "martijnvg", "name": "Martijn van Groningen"}}, "url": "https://github.com/elastic/elasticsearch/commit/a1eee838d7d0058085ad5ae9269d8395561d82d4", "committedDate": "2020-06-16T09:36:12Z", "message": "removed unused field"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6c9bfdcdc0d98535d3175fc200d1c34dad49b32", "author": {"user": {"login": "martijnvg", "name": "Martijn van Groningen"}}, "url": "https://github.com/elastic/elasticsearch/commit/c6c9bfdcdc0d98535d3175fc200d1c34dad49b32", "committedDate": "2020-06-17T09:22:48Z", "message": "Merge remote-tracking branch 'es/master' into keep_track__of_ds_timestamp_field"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7832677bc60dc430d6df7bbab5cf8f358d86139", "author": {"user": {"login": "martijnvg", "name": "Martijn van Groningen"}}, "url": "https://github.com/elastic/elasticsearch/commit/b7832677bc60dc430d6df7bbab5cf8f358d86139", "committedDate": "2020-06-17T09:33:43Z", "message": "iter"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4aa4280242459d78a429ffdc38de3add8cf6b6a8", "author": {"user": {"login": "martijnvg", "name": "Martijn van Groningen"}}, "url": "https://github.com/elastic/elasticsearch/commit/4aa4280242459d78a429ffdc38de3add8cf6b6a8", "committedDate": "2020-06-17T09:36:41Z", "message": "fix versioning in serialization"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6e0e847be7dfc58ed371489703af598c28ccc1fe", "author": {"user": {"login": "martijnvg", "name": "Martijn van Groningen"}}, "url": "https://github.com/elastic/elasticsearch/commit/6e0e847be7dfc58ed371489703af598c28ccc1fe", "committedDate": "2020-06-17T09:40:35Z", "message": "added assertions for sanity checking the type of the timestamp_field mapping"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f256b024717a7c711e7d125cd710b1369f677a3f", "author": {"user": {"login": "martijnvg", "name": "Martijn van Groningen"}}, "url": "https://github.com/elastic/elasticsearch/commit/f256b024717a7c711e7d125cd710b1369f677a3f", "committedDate": "2020-06-17T10:10:57Z", "message": "fixed test compile and checkstyle errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea5093070fb479f77c2b9950718ea206b2913029", "author": {"user": {"login": "martijnvg", "name": "Martijn van Groningen"}}, "url": "https://github.com/elastic/elasticsearch/commit/ea5093070fb479f77c2b9950718ea206b2913029", "committedDate": "2020-06-17T11:32:44Z", "message": "fixed hlrc serialization (only field name needs to get parsed)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "43098bdb9bb33ab871a6dc86101432c8771924df", "author": {"user": {"login": "martijnvg", "name": "Martijn van Groningen"}}, "url": "https://github.com/elastic/elasticsearch/commit/43098bdb9bb33ab871a6dc86101432c8771924df", "committedDate": "2020-06-17T11:33:11Z", "message": "made field final"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyMjk3NDE5", "url": "https://github.com/elastic/elasticsearch/pull/58096#pullrequestreview-432297419", "createdAt": "2020-06-17T11:12:38Z", "commit": {"oid": "f256b024717a7c711e7d125cd710b1369f677a3f"}, "state": "APPROVED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxMToxMjozOFrOGlBD8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxMTozMjo0MFrOGlBo4w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTQ2Nzg4OA==", "bodyText": "I wonder if this should be just timestamp_field.name?\nI would like to also see an assert on the mapping being included and having the right content.", "url": "https://github.com/elastic/elasticsearch/pull/58096#discussion_r441467888", "createdAt": "2020-06-17T11:12:38Z", "author": {"login": "henningandersen"}, "path": "rest-api-spec/src/main/resources/rest-api-spec/test/indices.data_stream/10_basic.yml", "diffHunk": "@@ -50,12 +50,12 @@ setup:\n       indices.get_data_stream:\n         name: \"*\"\n   - match: { 0.name: simple-data-stream1 }\n-  - match: { 0.timestamp_field: '@timestamp' }\n+  - match: { 0.timestamp_field.field_name: '@timestamp' }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f256b024717a7c711e7d125cd710b1369f677a3f"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTQ2ODg5Ng==", "bodyText": "I think we should rename createIndexTemplate to putIndexTemplate to signal that it also updates existing.", "url": "https://github.com/elastic/elasticsearch/pull/58096#discussion_r441468896", "createdAt": "2020-06-17T11:14:42Z", "author": {"login": "henningandersen"}, "path": "server/src/internalClusterTest/java/org/elasticsearch/indices/DataStreamIT.java", "diffHunk": "@@ -433,6 +444,87 @@ public void testCannotDeleteComposableTemplateUsedByDataStream() throws Exceptio\n         assertTrue(maybeE.isPresent());\n     }\n \n+    public void testChangeTimestampFieldInComposableTemplatePriorToRollOver() throws Exception {\n+        createIndexTemplate(\"id1\", \"logs-foo*\", \"@timestamp\");\n+\n+        // Index doc that triggers creation of a data stream\n+        IndexRequest indexRequest = new IndexRequest(\"logs-foobar\").source(\"{}\", XContentType.JSON).opType(\"create\");\n+        IndexResponse indexResponse = client().index(indexRequest).actionGet();\n+        assertThat(indexResponse.getIndex(), equalTo(DataStream.getDefaultBackingIndexName(\"logs-foobar\", 1)));\n+        assertBackingIndex(DataStream.getDefaultBackingIndexName(\"logs-foobar\", 1), \"properties.@timestamp\");\n+\n+        // Rollover data stream\n+        RolloverResponse rolloverResponse = client().admin().indices().rolloverIndex(new RolloverRequest(\"logs-foobar\", null)).get();\n+        assertThat(rolloverResponse.getNewIndex(), equalTo(DataStream.getDefaultBackingIndexName(\"logs-foobar\", 2)));\n+        assertTrue(rolloverResponse.isRolledOver());\n+        assertBackingIndex(DataStream.getDefaultBackingIndexName(\"logs-foobar\", 2), \"properties.@timestamp\");\n+\n+        // Index another doc into a data stream\n+        indexRequest = new IndexRequest(\"logs-foobar\").source(\"{}\", XContentType.JSON).opType(\"create\");\n+        indexResponse = client().index(indexRequest).actionGet();\n+        assertThat(indexResponse.getIndex(), equalTo(DataStream.getDefaultBackingIndexName(\"logs-foobar\", 2)));\n+\n+        // Change the template to have a different timestamp field\n+        createIndexTemplate(\"id1\", \"logs-foo*\", \"@timestamp2\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f256b024717a7c711e7d125cd710b1369f677a3f"}, "originalPosition": 91}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTQ3MjA1MA==", "bodyText": "Should we also include tests of any mapping specialization/params? AFAICS, the implementation could keep only the mapping type now and all tests would succeed.", "url": "https://github.com/elastic/elasticsearch/pull/58096#discussion_r441472050", "createdAt": "2020-06-17T11:21:27Z", "author": {"login": "henningandersen"}, "path": "server/src/internalClusterTest/java/org/elasticsearch/indices/DataStreamIT.java", "diffHunk": "@@ -433,6 +444,87 @@ public void testCannotDeleteComposableTemplateUsedByDataStream() throws Exceptio\n         assertTrue(maybeE.isPresent());\n     }\n \n+    public void testChangeTimestampFieldInComposableTemplatePriorToRollOver() throws Exception {\n+        createIndexTemplate(\"id1\", \"logs-foo*\", \"@timestamp\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f256b024717a7c711e7d125cd710b1369f677a3f"}, "originalPosition": 71}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTQ3NTIyOA==", "bodyText": "Maybe assert that the parentObjectMapper does not contain a definition for the timestamp field already?\nShould potentially be a production code check in case a component template can have the timestamp field too? Not sure if we guard against that.", "url": "https://github.com/elastic/elasticsearch/pull/58096#discussion_r441475228", "createdAt": "2020-06-17T11:28:10Z", "author": {"login": "henningandersen"}, "path": "server/src/main/java/org/elasticsearch/cluster/metadata/MetadataCreateIndexService.java", "diffHunk": "@@ -493,6 +495,16 @@ private ClusterState applyCreateIndexRequestWithV2Template(final ClusterState cu\n \n         final Map<String, Object> mappings = resolveV2Mappings(request.mappings(), currentState, templateName, xContentRegistry);\n \n+        if (request.dataStreamName() != null) {\n+            DataStream dataStream = currentState.metadata().dataStreams().get(request.dataStreamName());\n+            if (dataStream != null) {\n+                String mappingPath = convertFieldPathToMappingPath(dataStream.getTimeStampField().getFieldName());\n+                String parentObjectFieldPath = mappingPath.substring(0, mappingPath.lastIndexOf('.'));\n+                Map<String, Object> parentObjectMapper = ObjectPath.eval(\"_doc.\" + parentObjectFieldPath, mappings);\n+                parentObjectMapper.put(dataStream.getTimeStampField().getFieldName(), dataStream.getTimeStampField().getFieldMapping());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f256b024717a7c711e7d125cd710b1369f677a3f"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTQ3NzM0Nw==", "bodyText": "Should we assert that the fieldMapping contains (\"type\")?", "url": "https://github.com/elastic/elasticsearch/pull/58096#discussion_r441477347", "createdAt": "2020-06-17T11:32:40Z", "author": {"login": "henningandersen"}, "path": "server/src/main/java/org/elasticsearch/cluster/metadata/DataStream.java", "diffHunk": "@@ -201,4 +204,82 @@ public boolean equals(Object o) {\n     public int hashCode() {\n         return Objects.hash(name, timeStampField, indices, generation);\n     }\n+\n+    public static final class TimestampField implements Writeable, ToXContentObject {\n+\n+        static ParseField FIELD_NAME_FIELD = new ParseField(\"field_name\");\n+        static ParseField FIELD_MAPPING_FIELD = new ParseField(\"field_mapping\");\n+\n+        @SuppressWarnings(\"unchecked\")\n+        private static final ConstructingObjectParser<TimestampField, Void> PARSER = new ConstructingObjectParser<>(\n+            \"timestamp_field\",\n+            args -> new TimestampField((String) args[0], (Map<String, Object>) args[1])\n+        );\n+\n+        static {\n+            PARSER.declareString(ConstructingObjectParser.constructorArg(), FIELD_NAME_FIELD);\n+            PARSER.declareObject(ConstructingObjectParser.optionalConstructorArg(), (p, c) -> p.mapOrdered(), FIELD_MAPPING_FIELD);\n+        }\n+\n+        private final String fieldName;\n+        private final Map<String, Object> fieldMapping;\n+\n+        public TimestampField(String fieldName, Map<String, Object> fieldMapping) {\n+            this.fieldName = fieldName;\n+            this.fieldMapping = fieldMapping;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f256b024717a7c711e7d125cd710b1369f677a3f"}, "originalPosition": 113}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dfbadbeab0e9ea8d58e5f292dbbb0cc609111314", "author": {"user": {"login": "martijnvg", "name": "Martijn van Groningen"}}, "url": "https://github.com/elastic/elasticsearch/commit/dfbadbeab0e9ea8d58e5f292dbbb0cc609111314", "committedDate": "2020-06-17T11:36:08Z", "message": "fixed test compile errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6124deb8412952b67dc3b40d36665d6103c7d157", "author": {"user": {"login": "martijnvg", "name": "Martijn van Groningen"}}, "url": "https://github.com/elastic/elasticsearch/commit/6124deb8412952b67dc3b40d36665d6103c7d157", "committedDate": "2020-06-17T13:21:24Z", "message": "rename field"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3dfa7aaf94f82391a873cac8c236e9ee22dc46a2", "author": {"user": {"login": "martijnvg", "name": "Martijn van Groningen"}}, "url": "https://github.com/elastic/elasticsearch/commit/3dfa7aaf94f82391a873cac8c236e9ee22dc46a2", "committedDate": "2020-06-17T13:25:43Z", "message": "also assert mapping of timestamp_field"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bee37633cf419a712b59d8155a75ad75035d8539", "author": {"user": {"login": "martijnvg", "name": "Martijn van Groningen"}}, "url": "https://github.com/elastic/elasticsearch/commit/bee37633cf419a712b59d8155a75ad75035d8539", "committedDate": "2020-06-17T13:27:02Z", "message": "renamed method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "951bb1ddaaa918850b8ac548ad2205ce181286c2", "author": {"user": {"login": "martijnvg", "name": "Martijn van Groningen"}}, "url": "https://github.com/elastic/elasticsearch/commit/951bb1ddaaa918850b8ac548ad2205ce181286c2", "committedDate": "2020-06-17T14:23:20Z", "message": "Added integ test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9d99ca9d2940127061c753bb3fd647d8da3360c4", "author": {"user": {"login": "martijnvg", "name": "Martijn van Groningen"}}, "url": "https://github.com/elastic/elasticsearch/commit/9d99ca9d2940127061c753bb3fd647d8da3360c4", "committedDate": "2020-06-17T14:43:37Z", "message": "moved assertion to TimestampField class and added helper method for tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5104eff361e360a890db6c4b90e99f3a29f1956b", "author": {"user": {"login": "martijnvg", "name": "Martijn van Groningen"}}, "url": "https://github.com/elastic/elasticsearch/commit/5104eff361e360a890db6c4b90e99f3a29f1956b", "committedDate": "2020-06-17T16:26:55Z", "message": "removed unused imports"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "31110c1b32d7efd2ff49d0229b0ea93ff1556b89", "author": {"user": {"login": "martijnvg", "name": "Martijn van Groningen"}}, "url": "https://github.com/elastic/elasticsearch/commit/31110c1b32d7efd2ff49d0229b0ea93ff1556b89", "committedDate": "2020-06-17T19:22:13Z", "message": "fixed test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "85da2ab84b6eba5db717dd96795a92ec8c67082b", "author": {"user": {"login": "martijnvg", "name": "Martijn van Groningen"}}, "url": "https://github.com/elastic/elasticsearch/commit/85da2ab84b6eba5db717dd96795a92ec8c67082b", "committedDate": "2020-06-18T10:19:10Z", "message": "Improved logic that inserts timestamp field mapping into an mapping.\nIf the timestamp field path consisted out of object fields and\nif the final mapping did not contain the parent field then an error\noccurred, because the prior logic assumed that the object field existed."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b617446c10e4bb641044e3d16daf3ed7168c92a4", "author": {"user": {"login": "martijnvg", "name": "Martijn van Groningen"}}, "url": "https://github.com/elastic/elasticsearch/commit/b617446c10e4bb641044e3d16daf3ed7168c92a4", "committedDate": "2020-06-18T10:22:57Z", "message": "Merge remote-tracking branch 'es/master' into keep_track__of_ds_timestamp_field"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1c0742e990c573b82de226ad7e4b1df51157043d", "author": {"user": {"login": "martijnvg", "name": "Martijn van Groningen"}}, "url": "https://github.com/elastic/elasticsearch/commit/1c0742e990c573b82de226ad7e4b1df51157043d", "committedDate": "2020-06-18T10:34:29Z", "message": "removed unused imports"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "99a247ea91ca3e4d31bbb935e189f3dff3aef23e", "author": {"user": {"login": "martijnvg", "name": "Martijn van Groningen"}}, "url": "https://github.com/elastic/elasticsearch/commit/99a247ea91ca3e4d31bbb935e189f3dff3aef23e", "committedDate": "2020-06-18T18:38:05Z", "message": "fixed test compile error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c2ea7a61678a348a00042b37d198eae528dcc230", "author": {"user": {"login": "martijnvg", "name": "Martijn van Groningen"}}, "url": "https://github.com/elastic/elasticsearch/commit/c2ea7a61678a348a00042b37d198eae528dcc230", "committedDate": "2020-06-18T18:39:11Z", "message": "Merge remote-tracking branch 'es/master' into keep_track__of_ds_timestamp_field"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6234cc769ce8a5716d29470576118dd538dc7a91", "author": {"user": {"login": "martijnvg", "name": "Martijn van Groningen"}}, "url": "https://github.com/elastic/elasticsearch/commit/6234cc769ce8a5716d29470576118dd538dc7a91", "committedDate": "2020-06-18T18:44:49Z", "message": "fixed test compile errors after merge"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "64520906c87cfdfe56dcf249113253eb9f0c452f", "author": {"user": {"login": "martijnvg", "name": "Martijn van Groningen"}}, "url": "https://github.com/elastic/elasticsearch/commit/64520906c87cfdfe56dcf249113253eb9f0c452f", "committedDate": "2020-06-21T13:53:30Z", "message": "Merge remote-tracking branch 'es/master' into keep_track__of_ds_timestamp_field"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 671, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}