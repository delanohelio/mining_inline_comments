{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI1NzA1NjYx", "number": 65362, "title": "Allow passing versioned media types to 7.x server", "bodyText": "a follow up after #63071 where it missed the XContentType.fromMediaType\nmethod.\nThat method also have to remove the vendor specific substrings\n(vnd.elasticsearch+ and compatible-with parameter) from mediaType value\nrelates #51816\n\n\nHave you signed the contributor license agreement?\nHave you followed the contributor guidelines?\nIf submitting code, have you built your formula locally prior to submission with gradle check?\nIf submitting code, is your pull request against master? Unless there is a good reason otherwise, we prefer pull requests against master and will backport as needed.\nIf submitting code, have you checked that your submission is for an OS and architecture that we support?\nIf you are submitting this code for a class then read our policy for that.", "createdAt": "2020-11-23T12:43:51Z", "url": "https://github.com/elastic/elasticsearch/pull/65362", "merged": true, "mergeCommit": {"oid": "20cd2e40466dc2275dc7faca5d7ceba2354dc133"}, "closed": true, "closedAt": "2020-11-25T10:52:42Z", "author": {"login": "pgomulka"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdfUcVKAH2gAyNTI1NzA1NjYxOjdlMzllODE1ZGY5MjljOGJlM2Q4ZmQ2NThhOWNmNjYwMDJiMzU4ZDY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdfrtY9gFqTUzNzY0NTUxNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7e39e815df929c8be3d8fd658a9cf66002b358d6", "author": {"user": {"login": "pgomulka", "name": "Przemyslaw Gomulka"}}, "url": "https://github.com/elastic/elasticsearch/commit/7e39e815df929c8be3d8fd658a9cf66002b358d6", "committedDate": "2020-11-23T12:37:56Z", "message": "Allow passing versioned media types to 7.x server\n\na follow up after #63071 where it missed the XContentType.fromMediaType\nmethod.\nThat method also have to remove the vendor specific substrings\n(vnd.elasticsearch+ and compatible-with parameter) from mediaType value\n\nrelates #51816"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "690b1af836b47069e240897d825293fa91da4476", "author": {"user": {"login": "pgomulka", "name": "Przemyslaw Gomulka"}}, "url": "https://github.com/elastic/elasticsearch/commit/690b1af836b47069e240897d825293fa91da4476", "committedDate": "2020-11-23T12:51:55Z", "message": "Merge remote-tracking branch 'upstream/7.x' into compat/7x_allow_parsing_vnd_media_type"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5d822231c00903b77cd176a8ef964b29251c5ec1", "author": {"user": {"login": "pgomulka", "name": "Przemyslaw Gomulka"}}, "url": "https://github.com/elastic/elasticsearch/commit/5d822231c00903b77cd176a8ef964b29251c5ec1", "committedDate": "2020-11-23T13:42:35Z", "message": "remove redundant test case"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM3NjQ1MDcw", "url": "https://github.com/elastic/elasticsearch/pull/65362#pullrequestreview-537645070", "createdAt": "2020-11-24T15:43:59Z", "commit": {"oid": "5d822231c00903b77cd176a8ef964b29251c5ec1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxNTo0Mzo1OVrOH5HvNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxNTo0Mzo1OVrOH5HvNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTY1NzY1NQ==", "bodyText": "not sure I understand the comment ?", "url": "https://github.com/elastic/elasticsearch/pull/65362#discussion_r529657655", "createdAt": "2020-11-24T15:43:59Z", "author": {"login": "jakelandis"}, "path": "libs/x-content/src/main/java/org/elasticsearch/common/xcontent/XContentType.java", "diffHunk": "@@ -151,7 +151,8 @@ public static XContentType fromMediaTypeOrFormat(String mediaType) {\n     private static String removeVersionInMediaType(String mediaType) {\n         if (mediaType.contains(\"vnd.elasticsearch\")) {\n             return mediaType.replaceAll(\"vnd.elasticsearch\\\\+\", \"\")\n-                .replaceAll(\"\\\\s*;\\\\s*compatible-with=\\\\d+\", \"\");\n+                .replaceAll(\"\\\\s*;\\\\s*compatible-with=\\\\d+\", \"\")\n+                .replaceAll(\"\\\\s*;\\\\s*\",\";\"); // to allow matching using startsWith", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5d822231c00903b77cd176a8ef964b29251c5ec1"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM3NjQ1NTE3", "url": "https://github.com/elastic/elasticsearch/pull/65362#pullrequestreview-537645517", "createdAt": "2020-11-24T15:44:23Z", "commit": {"oid": "5d822231c00903b77cd176a8ef964b29251c5ec1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4391, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}