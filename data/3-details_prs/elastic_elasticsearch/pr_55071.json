{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAxOTU2NjE4", "number": 55071, "title": "[DOCS] EQL: Document `indexOf` function", "bodyText": "Documents the indexOf EQL function.\nRelates to #54543 and #53856", "createdAt": "2020-04-10T15:35:21Z", "url": "https://github.com/elastic/elasticsearch/pull/55071", "merged": true, "mergeCommit": {"oid": "881b21461925f2831985e3da8dbf7970cd05ea16"}, "closed": true, "closedAt": "2020-04-15T15:28:33Z", "author": {"login": "jrodewig"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcWS5LvAH2gAyNDAxOTU2NjE4OmM1N2UxMWM3YjEyYzhiYWEwNmRhNTUzMTU2ZjdjMDY1YjA4ZDgwMjE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcX5mwuAH2gAyNDAxOTU2NjE4OjViOGUxNjBkMDc3OTQ2ZTVjNmExYzZiNDNiZmJkNWYyNjYwOGI1MzI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c57e11c7b12c8baa06da553156f7c065b08d8021", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/c57e11c7b12c8baa06da553156f7c065b08d8021", "committedDate": "2020-04-10T15:33:10Z", "message": "[DOCS] EQL: Document `indexOf` function"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ff34add2acda85fb6eff6c7316c6f342f52dafa8", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/ff34add2acda85fb6eff6c7316c6f342f52dafa8", "committedDate": "2020-04-14T17:23:22Z", "message": "spacing"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzNTY5OTkx", "url": "https://github.com/elastic/elasticsearch/pull/55071#pullrequestreview-393569991", "createdAt": "2020-04-15T08:39:47Z", "commit": {"oid": "ff34add2acda85fb6eff6c7316c6f342f52dafa8"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQwODozOTo0N1rOGFvoIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQwODozOTo0N1rOGFvoIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODY3NjM4Ng==", "bodyText": "Could you add an example with a negative offset?", "url": "https://github.com/elastic/elasticsearch/pull/55071#discussion_r408676386", "createdAt": "2020-04-15T08:39:47Z", "author": {"login": "astefan"}, "path": "docs/reference/eql/functions.asciidoc", "diffHunk": "@@ -207,6 +208,110 @@ field datatypes:\n *Returns:* boolean or `null`\n ====\n \n+[discrete]\n+[[eql-fn-indexof]]\n+=== `indexOf`\n+\n+Returns the first position of a provided substring in a source string.\n+\n+If an optional start position is provided, this function returns the first\n+occurrence of the substring at or after the start position.\n+\n+[%collapsible]\n+====\n+*Example*\n+[source,eql]\n+----\n+// url.domain = \"subdomain.example.com\"\n+indexOf(url.domain, \".\")        // returns 9\n+indexOf(url.domain, \".\", 9)     // returns 9\n+indexOf(url.domain, \".\", 10)    // returns 17\n+\n+// empty strings\n+indexOf(\"\", \"\")                 // returns 0\n+indexOf(url.domain, \"\")         // returns 0\n+indexOf(url.domain, \"\", 9)      // returns 9\n+indexOf(url.domain, \"\", 10)     // returns 10\n+\n+// missing substrings\n+indexOf(url.domain, \"z\")        // returns null\n+indexOf(url.domain, \"z\", 9)     // returns null\n+\n+// start position is higher than string length\n+indexOf(url.domain, \".\", 30)    // returns null\n+\n+// null handling\n+indexOf(null, \".\", 9)           // returns null\n+indexOf(url.domain, null, 9)    // returns null\n+indexOf(url.domain, \".\", null)  // returns null\n+----\n+\n+*Syntax*\n+[source,txt]\n+----\n+indexOf(<source>, <substring>[, <start_pos>])\n+----\n+\n+*Parameters*\n+\n+`<source>`::\n++\n+--\n+(Required, string or `null`)\n+Source string. If `null`, the function returns `null`.\n+\n+If using a field as the argument, this parameter supports only the following\n+field datatypes:\n+\n+* <<keyword,`keyword`>>\n+* <<constant-keyword,`constant_keyword`>>\n+* <<text,`text`>> field with a <<keyword,`keyword`>> or\n+  <<constant-keyword,`constant_keyword`>> sub-field\n+--\n+\n+`<substring>`::\n++\n+--\n+(Required, string or `null`)\n+Substring to search for.\n+\n+If this argument is `null` or the `<source>` string does not contain this\n+substring, the function returns `null`. Empty strings (`\"\"`) return the\n+`<start_pos>`, which defaults to `0`.\n+\n+If using a field as the argument, this parameter supports only the following\n+field datatypes:\n+\n+* <<keyword,`keyword`>>\n+* <<constant-keyword,`constant_keyword`>>\n+* <<text,`text`>> field with a <<keyword,`keyword`>> or\n+  <<constant-keyword,`constant_keyword`>> sub-field\n+--\n+\n+`<start_pos>`::\n++\n+--\n+(Optional, integer or `null`)\n+Starting position for matching. The function will not return positions before\n+this one. Defaults to `0`.\n+\n+Positions are zero-indexed. Negative offsets are supported.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ff34add2acda85fb6eff6c7316c6f342f52dafa8"}, "originalPosition": 99}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "db8e02720319fd6d61d9bcfbb00321fa612be58b", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/db8e02720319fd6d61d9bcfbb00321fa612be58b", "committedDate": "2020-04-15T15:03:38Z", "message": "Add negative offset examples"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "384617a240ba1b78b32c473b98b5af35e29f2f70", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/384617a240ba1b78b32c473b98b5af35e29f2f70", "committedDate": "2020-04-15T15:10:06Z", "message": "Clarify behavior for negative offsets"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b8e160d077946e5c6a1c6b43bfbd5f26608b532", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/5b8e160d077946e5c6a1c6b43bfbd5f26608b532", "committedDate": "2020-04-15T15:13:16Z", "message": "Reword"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3460, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}