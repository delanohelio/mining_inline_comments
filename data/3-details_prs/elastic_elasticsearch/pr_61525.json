{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDczMjAzNTQx", "number": 61525, "title": "Migrate aliased indices to data stream", "bodyText": "Updates the MetadataCreateDataStreamService to permit existing indices as backing indices when creating a new data stream.\nRelates to #61046", "createdAt": "2020-08-25T13:26:29Z", "url": "https://github.com/elastic/elasticsearch/pull/61525", "merged": true, "mergeCommit": {"oid": "7d2d737ecfad5e7f3693f1b6b24f457e4909d0c8"}, "closed": true, "closedAt": "2020-10-29T13:05:22Z", "author": {"login": "danhermann"}, "timelineItems": {"totalCount": 34, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdCXJUqgH2gAyNDczMjAzNTQxOjE3ODBiNzkyNDI0ZTgwNTc3YTFiZWM3Mjc1OWYyNWI5NzhhMTAwNTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdXRgPtAFqTUxOTYyMTc0OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1780b792424e80577a1bec72759f25b978a10051", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/1780b792424e80577a1bec72759f25b978a10051", "committedDate": "2020-08-25T13:23:05Z", "message": "migrate aliased indices to data stream"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "36c4ace21b403e4ae95213661b9af4e0cd48493b", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/36c4ace21b403e4ae95213661b9af4e0cd48493b", "committedDate": "2020-08-26T13:09:28Z", "message": "update cluster state a single time for all backing indices"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d32b7990394bd7cd263f86e66ebd17cecd74a28c", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/d32b7990394bd7cd263f86e66ebd17cecd74a28c", "committedDate": "2020-09-29T19:52:08Z", "message": "Merge branch 'master' into 61046_migrate_to_data_stream"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3bfdfda46c468168fc7f2fd07450f1d940ed8852", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/3bfdfda46c468168fc7f2fd07450f1d940ed8852", "committedDate": "2020-09-29T22:20:23Z", "message": "add data stream timestamp field mapper"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "24eaac9dbd40e7cb493485b3f308f19dd089c9cc", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/24eaac9dbd40e7cb493485b3f308f19dd089c9cc", "committedDate": "2020-10-01T13:15:18Z", "message": "prohibit migration of aliases without a write index"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8062020a8c41cd98ac0f5128eb5de14980b3a740", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/8062020a8c41cd98ac0f5128eb5de14980b3a740", "committedDate": "2020-10-13T17:14:16Z", "message": "Merge branch 'master' into 61046_migrate_to_data_stream"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1d79ab5926ef0fbe8d7ab77020baed2941e3e65", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/d1d79ab5926ef0fbe8d7ab77020baed2941e3e65", "committedDate": "2020-10-13T17:45:12Z", "message": "fix compilation and test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c1196d3cceee35cf97f120dd8906b4479492e220", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/c1196d3cceee35cf97f120dd8906b4479492e220", "committedDate": "2020-10-13T20:22:34Z", "message": "add transport actions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d583acd0e5ed517ede3af66d5c1ca3cb76570b83", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/d583acd0e5ed517ede3af66d5c1ca3cb76570b83", "committedDate": "2020-10-13T21:34:41Z", "message": "minor fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9fad1c395faaa4d4446a3429ed71285e37900ff0", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/9fad1c395faaa4d4446a3429ed71285e37900ff0", "committedDate": "2020-10-19T21:01:46Z", "message": "wip on IT"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea390690d3a0c68d5c640485443b6b82309c66a3", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/ea390690d3a0c68d5c640485443b6b82309c66a3", "committedDate": "2020-10-19T22:05:36Z", "message": "basic IT"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b117559d761ff07cb97ba6858d9599ba772bb267", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/b117559d761ff07cb97ba6858d9599ba772bb267", "committedDate": "2020-10-19T22:09:59Z", "message": "Merge branch 'master' into 61046_migrate_to_data_stream"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ad2cbf4d3f277d33ee4f7ca6be16193db97c9d5", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/9ad2cbf4d3f277d33ee4f7ca6be16193db97c9d5", "committedDate": "2020-10-19T22:18:35Z", "message": "spotless"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "847ff2bc19de3e0e3cc6b91e65a97627cfa5bbb9", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/847ff2bc19de3e0e3cc6b91e65a97627cfa5bbb9", "committedDate": "2020-10-20T15:32:11Z", "message": "wip"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d2149fe85b030e1e7381091a60d32552856fc67", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/4d2149fe85b030e1e7381091a60d32552856fc67", "committedDate": "2020-10-21T15:24:11Z", "message": "Merge branch 'master' into 61046_migrate_to_data_stream"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6017302aab2243c63aa6b11dad69c552aa6afdcb", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/6017302aab2243c63aa6b11dad69c552aa6afdcb", "committedDate": "2020-10-21T16:57:29Z", "message": "fix test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89348ed35f9e52c398d473568925a3dfcae86627", "author": {"user": {"login": "martijnvg", "name": "Martijn van Groningen"}}, "url": "https://github.com/elastic/elasticsearch/commit/89348ed35f9e52c398d473568925a3dfcae86627", "committedDate": "2020-10-22T09:37:47Z", "message": "Use MapperService to update the mapping.\n\nA side effect is moving logic that prepares indices to be backing indices to migrate service.\n\n* By using the mapper service directly in the migrate logic,\n  mapping validation error occur before updating the cluster state.\n  Whereas before the validation errors occurred when all mapper\n  services in other nodes where updated in the cluster,\n  which is too late, because the update already happened.\n* Updating the mapping using maps somehow changed the ordering, which caused assertions to trip."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3550fad78ee165baef932105566b138533bd5458", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/3550fad78ee165baef932105566b138533bd5458", "committedDate": "2020-10-22T17:52:43Z", "message": "add min node version check, fix spotless"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c806729b02d6d7e4cc4d7e6569084831fff3644", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/4c806729b02d6d7e4cc4d7e6569084831fff3644", "committedDate": "2020-10-22T18:46:59Z", "message": "add tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9cb64c85bc24185ba41db611d2322f32dcd203cf", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/9cb64c85bc24185ba41db611d2322f32dcd203cf", "committedDate": "2020-10-22T19:01:40Z", "message": "spotless"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "35ea278a2c76cb9cc2b0f27c34896757cad1238a", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/35ea278a2c76cb9cc2b0f27c34896757cad1238a", "committedDate": "2020-10-22T19:02:12Z", "message": "Merge branch 'master' into 61046_migrate_to_data_stream"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0bda0b951c295ad4e5d35aca0fdd2b98619c9c4f", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/0bda0b951c295ad4e5d35aca0fdd2b98619c9c4f", "committedDate": "2020-10-26T18:42:33Z", "message": "Merge branch 'master' into 61046_migrate_to_data_stream"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9816cc384854054fea9f8fdaacb3ae151b2bea58", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/9816cc384854054fea9f8fdaacb3ae151b2bea58", "committedDate": "2020-10-26T18:49:06Z", "message": "fix merge error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2d9ba916f9697b2442d699104ce52f8df84f296c", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/2d9ba916f9697b2442d699104ce52f8df84f296c", "committedDate": "2020-10-26T19:11:44Z", "message": "moar compile errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "497f64b998bee8c671f17c7e1a399196301563cd", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/497f64b998bee8c671f17c7e1a399196301563cd", "committedDate": "2020-10-27T16:09:52Z", "message": "revise tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "51528252b1d6cf7ec82945c11f38fdf6a1017235", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/51528252b1d6cf7ec82945c11f38fdf6a1017235", "committedDate": "2020-10-27T16:28:13Z", "message": "spotless"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "264602bce786dc1702dc4cfd2e8f68c51bb54cf5", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/264602bce786dc1702dc4cfd2e8f68c51bb54cf5", "committedDate": "2020-10-27T18:53:13Z", "message": "Merge branch 'master' into 61046_migrate_to_data_stream"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "768b163afa438ec8796fe7f3b8c5650f3f1db2a9", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/768b163afa438ec8796fe7f3b8c5650f3f1db2a9", "committedDate": "2020-10-27T19:07:34Z", "message": "remove test code"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE4NDc3NjIz", "url": "https://github.com/elastic/elasticsearch/pull/61525#pullrequestreview-518477623", "createdAt": "2020-10-28T09:41:04Z", "commit": {"oid": "768b163afa438ec8796fe7f3b8c5650f3f1db2a9"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQwOTo0MTowNFrOHphh1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxMDo0NTo0N1rOHpkF5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzMwMjk5Nw==", "bodyText": "maybe add what the write index is and backing indices (if any) to this log message?", "url": "https://github.com/elastic/elasticsearch/pull/61525#discussion_r513302997", "createdAt": "2020-10-28T09:41:04Z", "author": {"login": "martijnvg"}, "path": "server/src/main/java/org/elasticsearch/cluster/metadata/MetadataCreateDataStreamService.java", "diffHunk": "@@ -120,49 +123,75 @@ public CreateDataStreamClusterStateUpdateRequest(String name,\n \n     static ClusterState createDataStream(MetadataCreateIndexService metadataCreateIndexService,\n                                          ClusterState currentState,\n-                                         CreateDataStreamClusterStateUpdateRequest request)\n-        throws Exception {\n-        if (currentState.metadata().dataStreams().containsKey(request.name)) {\n-            throw new ResourceAlreadyExistsException(\"data_stream [\" + request.name + \"] already exists\");\n+                                         CreateDataStreamClusterStateUpdateRequest request) throws Exception {\n+        return createDataStream(metadataCreateIndexService, currentState, request.name, List.of(), null);\n+    }\n+\n+    /**\n+     * Creates a data stream with the specified properties.\n+     *\n+     * @param metadataCreateIndexService Used if a new write index must be created\n+     * @param currentState               Cluster state\n+     * @param dataStreamName             Name of the data stream\n+     * @param backingIndices             List of backing indices. May be empty\n+     * @param writeIndex                 Write index for the data stream. If null, a new write index will be created.\n+     * @return                           Cluster state containing the new data stream\n+     */\n+    static ClusterState createDataStream(MetadataCreateIndexService metadataCreateIndexService,\n+                                         ClusterState currentState,\n+                                         String dataStreamName,\n+                                         List<IndexMetadata> backingIndices,\n+                                         IndexMetadata writeIndex) throws Exception\n+    {\n+        if (writeIndex == null) {\n+            Objects.requireNonNull(metadataCreateIndexService);\n+        }\n+        Objects.requireNonNull(currentState);\n+        Objects.requireNonNull(backingIndices);\n+        if (currentState.metadata().dataStreams().containsKey(dataStreamName)) {\n+            throw new ResourceAlreadyExistsException(\"data_stream [\" + dataStreamName + \"] already exists\");\n         }\n \n-        MetadataCreateIndexService.validateIndexOrAliasName(request.name,\n+        MetadataCreateIndexService.validateIndexOrAliasName(dataStreamName,\n             (s1, s2) -> new IllegalArgumentException(\"data_stream [\" + s1 + \"] \" + s2));\n \n-        if (request.name.toLowerCase(Locale.ROOT).equals(request.name) == false) {\n-            throw new IllegalArgumentException(\"data_stream [\" + request.name + \"] must be lowercase\");\n+        if (dataStreamName.toLowerCase(Locale.ROOT).equals(dataStreamName) == false) {\n+            throw new IllegalArgumentException(\"data_stream [\" + dataStreamName + \"] must be lowercase\");\n         }\n-        if (request.name.startsWith(\".\")) {\n-            throw new IllegalArgumentException(\"data_stream [\" + request.name + \"] must not start with '.'\");\n+        if (dataStreamName.startsWith(\".\")) {\n+            throw new IllegalArgumentException(\"data_stream [\" + dataStreamName + \"] must not start with '.'\");\n         }\n \n-        ComposableIndexTemplate template = lookupTemplateForDataStream(request.name, currentState.metadata());\n-\n-        String firstBackingIndexName = DataStream.getDefaultBackingIndexName(request.name, 1);\n-        CreateIndexClusterStateUpdateRequest createIndexRequest =\n-            new CreateIndexClusterStateUpdateRequest(\"initialize_data_stream\", firstBackingIndexName, firstBackingIndexName)\n-                .dataStreamName(request.name)\n-                .settings(Settings.builder().put(\"index.hidden\", true).build());\n-        try {\n-            currentState = metadataCreateIndexService.applyCreateIndexRequest(currentState, createIndexRequest, false);\n-        } catch (ResourceAlreadyExistsException e) {\n-            // Rethrow as ElasticsearchStatusException, so that bulk transport action doesn't ignore it during\n-            // auto index/data stream creation.\n-            // (otherwise bulk execution fails later, because data stream will also not have been created)\n-            throw new ElasticsearchStatusException(\"data stream could not be created because backing index [{}] already exists\",\n-                RestStatus.BAD_REQUEST, e, firstBackingIndexName);\n+        ComposableIndexTemplate template = lookupTemplateForDataStream(dataStreamName, currentState.metadata());\n+\n+        if (writeIndex == null) {\n+            String firstBackingIndexName = DataStream.getDefaultBackingIndexName(dataStreamName, 1);\n+            CreateIndexClusterStateUpdateRequest createIndexRequest =\n+                new CreateIndexClusterStateUpdateRequest(\"initialize_data_stream\", firstBackingIndexName, firstBackingIndexName)\n+                    .dataStreamName(dataStreamName)\n+                    .settings(Settings.builder().put(\"index.hidden\", true).build());\n+            try {\n+                currentState = metadataCreateIndexService.applyCreateIndexRequest(currentState, createIndexRequest, false);\n+            } catch (ResourceAlreadyExistsException e) {\n+                // Rethrow as ElasticsearchStatusException, so that bulk transport action doesn't ignore it during\n+                // auto index/data stream creation.\n+                // (otherwise bulk execution fails later, because data stream will also not have been created)\n+                throw new ElasticsearchStatusException(\"data stream could not be created because backing index [{}] already exists\",\n+                    RestStatus.BAD_REQUEST, e, firstBackingIndexName);\n+            }\n+            writeIndex = currentState.metadata().index(firstBackingIndexName);\n         }\n-        IndexMetadata firstBackingIndex = currentState.metadata().index(firstBackingIndexName);\n-        assert firstBackingIndex != null;\n-        assert firstBackingIndex.mapping() != null : \"no mapping found for backing index [\" + firstBackingIndexName + \"]\";\n+        assert writeIndex != null;\n+        assert writeIndex.mapping() != null : \"no mapping found for backing index [\" + writeIndex.getIndex().getName() + \"]\";\n \n         String fieldName = template.getDataStreamTemplate().getTimestampField();\n         DataStream.TimestampField timestampField = new DataStream.TimestampField(fieldName);\n-        DataStream newDataStream =\n-            new DataStream(request.name, timestampField, List.of(firstBackingIndex.getIndex()), 1L,\n-                template.metadata() != null ? Map.copyOf(template.metadata()) : null);\n+        List<Index> dsBackingIndices = backingIndices.stream().map(IndexMetadata::getIndex).collect(Collectors.toList());\n+        dsBackingIndices.add(writeIndex.getIndex());\n+        DataStream newDataStream = new DataStream(dataStreamName, timestampField, dsBackingIndices, 1L,\n+                                                  template.metadata() != null ? Map.copyOf(template.metadata()) : null);\n         Metadata.Builder builder = Metadata.builder(currentState.metadata()).put(newDataStream);\n-        logger.info(\"adding data stream [{}]\", request.name);\n+        logger.info(\"adding data stream [{}]\", dataStreamName);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "768b163afa438ec8796fe7f3b8c5650f3f1db2a9"}, "originalPosition": 121}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzMzMzk3NQ==", "bodyText": "I think we need to adjust test and the data stream timestamp field mapper.\nUpdating from false to true is allowed, but updating from true to false is disallowed.\n`", "url": "https://github.com/elastic/elasticsearch/pull/61525#discussion_r513333975", "createdAt": "2020-10-28T10:27:52Z", "author": {"login": "martijnvg"}, "path": "x-pack/plugin/data-streams/src/test/java/org/elasticsearch/xpack/datastreams/mapper/DataStreamTimestampFieldMapperTests.java", "diffHunk": "@@ -277,17 +277,17 @@ public void testValidateNotDisallowedAttribute() throws IOException {\n         assertThat(e.getMessage(), equalTo(\"data stream timestamp field [@timestamp] has disallowed attributes: [store]\"));\n     }\n \n-    public void testCannotUpdateTimestampField() throws IOException {\n+    public void testCanUpdateTimestampField() throws IOException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "768b163afa438ec8796fe7f3b8c5650f3f1db2a9"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzM0NDk5Nw==", "bodyText": "This validation can be added by invoking setMergeValidator(...)method when building enabled parameter in DataStreamTimestampFieldMapper line 78.", "url": "https://github.com/elastic/elasticsearch/pull/61525#discussion_r513344997", "createdAt": "2020-10-28T10:45:47Z", "author": {"login": "martijnvg"}, "path": "x-pack/plugin/data-streams/src/test/java/org/elasticsearch/xpack/datastreams/mapper/DataStreamTimestampFieldMapperTests.java", "diffHunk": "@@ -277,17 +277,17 @@ public void testValidateNotDisallowedAttribute() throws IOException {\n         assertThat(e.getMessage(), equalTo(\"data stream timestamp field [@timestamp] has disallowed attributes: [store]\"));\n     }\n \n-    public void testCannotUpdateTimestampField() throws IOException {\n+    public void testCanUpdateTimestampField() throws IOException {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzMzMzk3NQ=="}, "originalCommit": {"oid": "768b163afa438ec8796fe7f3b8c5650f3f1db2a9"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bbcec4f9f9965c59498e0ed74d833aa7f250bc2c", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/bbcec4f9f9965c59498e0ed74d833aa7f250bc2c", "committedDate": "2020-10-28T12:27:48Z", "message": "revise log message"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "af7d4b489a44611b9577b7678d55eefd98fbe0aa", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/af7d4b489a44611b9577b7678d55eefd98fbe0aa", "committedDate": "2020-10-28T12:38:46Z", "message": "validate that TSFM can be enabled but not disabled"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b0c73d43c15d11733464abaf1b702c42f1355da4", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/b0c73d43c15d11733464abaf1b702c42f1355da4", "committedDate": "2020-10-28T12:45:10Z", "message": "checkstyle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4edaf1d73dffda4da4f116919762b2e8575997b5", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/4edaf1d73dffda4da4f116919762b2e8575997b5", "committedDate": "2020-10-28T12:46:16Z", "message": "fix wording"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5NjIxNzQ5", "url": "https://github.com/elastic/elasticsearch/pull/61525#pullrequestreview-519621749", "createdAt": "2020-10-29T12:41:06Z", "commit": {"oid": "4edaf1d73dffda4da4f116919762b2e8575997b5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4722, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}