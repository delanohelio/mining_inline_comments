{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc2ODU4MTc4", "number": 52495, "title": "Continue removal of custom script code in ClassNode in Painless", "bodyText": "This continues down the path of removing custom code required for Elasticsearch Painless scripts from the user and ir nodes. This change uses ir nodes to inject gets methods, needs methods, and the bootstrap method as required. There is no reason for the SClass/ClassNode to know about these specific items.\nThough, these appear as separate phases for now, this is purely transitional. Eventually, these will be rolled into a single \"build\" phase where the user tree is semantically checked and converted into an ir tree. This intermediate step is necessary to make the changes occur in smaller consumable steps.", "createdAt": "2020-02-18T22:01:47Z", "url": "https://github.com/elastic/elasticsearch/pull/52495", "merged": true, "mergeCommit": {"oid": "303aaf4a8a7f4419d497bf5045b1ef8206ab0521"}, "closed": true, "closedAt": "2020-02-20T18:41:46Z", "author": {"login": "jdconrad"}, "timelineItems": {"totalCount": 20, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcBJ-zagH2gAyMzc2ODU4MTc4OjZlNmFhMzIwYTRlODZmYzYxZjk3YzNmNjg4MjhiNjk4ODY2NjI0MTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcGOq_DgFqTM2MjA5ODEwMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6e6aa320a4e86fc61f97c3f68828b69886662415", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/6e6aa320a4e86fc61f97c3f68828b69886662415", "committedDate": "2020-02-04T23:17:45Z", "message": "removed scopes for functions to see used variables"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0f8f2db1681620b7a4ff8b4fb6f1a5c85cde3c7b", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/0f8f2db1681620b7a4ff8b4fb6f1a5c85cde3c7b", "committedDate": "2020-02-04T23:40:15Z", "message": "change scoping to track variables in all scopes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "92281afdd77398b9928520621d4410a1cc0d0c92", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/92281afdd77398b9928520621d4410a1cc0d0c92", "committedDate": "2020-02-04T23:43:52Z", "message": "partially removed execute method exceptino customization"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1dfeda725afc5bc5e615d9aa0d99492923f929b", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/d1dfeda725afc5bc5e615d9aa0d99492923f929b", "committedDate": "2020-02-05T00:11:35Z", "message": "move autoreturn out of ir nodes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "65147708c75fc0c16023c7576b2aa9ba52b1980a", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/65147708c75fc0c16023c7576b2aa9ba52b1980a", "committedDate": "2020-02-05T16:56:42Z", "message": "add es specific exceptions in decorate execute phase"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6115179c2b5b9bb6ab690212f35babfb7ed6103f", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/6115179c2b5b9bb6ab690212f35babfb7ed6103f", "committedDate": "2020-02-05T17:09:10Z", "message": "remove commented out code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "57feda775fd8e006aa5d29f6a6494e75449d3f2d", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/57feda775fd8e006aa5d29f6a6494e75449d3f2d", "committedDate": "2020-02-05T22:34:25Z", "message": "Merge branch 'master' into trees6"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "84f5754ffb2b867554eea9ae42d116231e67555c", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/84f5754ffb2b867554eea9ae42d116231e67555c", "committedDate": "2020-02-10T22:09:50Z", "message": "Merge branch 'master' into trees6"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bb4e48c3e0c301a294151a92dcaf69672801dd0c", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/bb4e48c3e0c301a294151a92dcaf69672801dd0c", "committedDate": "2020-02-11T16:02:33Z", "message": "Merge branch 'master' into trees6"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "10d8757a1ae0e457251ebc4bc5ae9056c7126971", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/10d8757a1ae0e457251ebc4bc5ae9056c7126971", "committedDate": "2020-02-11T16:37:08Z", "message": "response to PR comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "68705fe7ca884a5fb8d9b6588e3d0b095fb2090f", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/68705fe7ca884a5fb8d9b6588e3d0b095fb2090f", "committedDate": "2020-02-18T15:59:14Z", "message": "Merge branch 'master' into trees6"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "922e4e2f759291c533f94c9ddb9f6ac0766ff74d", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/922e4e2f759291c533f94c9ddb9f6ac0766ff74d", "committedDate": "2020-02-18T18:10:50Z", "message": "move static constant generation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a3f5c270fcc1347d3fc91aa4dca1066dec19e8ce", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/a3f5c270fcc1347d3fc91aa4dca1066dec19e8ce", "committedDate": "2020-02-18T21:02:39Z", "message": "create bootstrap methods with external phase"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ec36436a238837f7818cfdefc97172fe5ee58d2", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/1ec36436a238837f7818cfdefc97172fe5ee58d2", "committedDate": "2020-02-18T21:28:43Z", "message": "move gets methods and static variables out of class node"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0f33c7c13ce738d9ee05fee5a89e5ec4572c2d3a", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/0f33c7c13ce738d9ee05fee5a89e5ec4572c2d3a", "committedDate": "2020-02-18T21:46:10Z", "message": "inject needs methods"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwNzg1MDYw", "url": "https://github.com/elastic/elasticsearch/pull/52495#pullrequestreview-360785060", "createdAt": "2020-02-19T01:17:37Z", "commit": {"oid": "0f33c7c13ce738d9ee05fee5a89e5ec4572c2d3a"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQwMToxNzozN1rOFrYGFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQwMToxNzozN1rOFrYGFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTAyNzg2MA==", "bodyText": "We can remove these constants from the code now right?", "url": "https://github.com/elastic/elasticsearch/pull/52495#discussion_r381027860", "createdAt": "2020-02-19T01:17:37Z", "author": {"login": "rjernst"}, "path": "modules/lang-painless/src/main/java/org/elasticsearch/painless/ir/ClassNode.java", "diffHunk": "@@ -37,22 +37,10 @@\n import java.util.ArrayList;\n import java.util.BitSet;\n import java.util.Collection;\n-import java.util.HashMap;\n import java.util.List;\n-import java.util.Map;\n \n import static org.elasticsearch.painless.WriterConstants.BASE_INTERFACE_TYPE;\n-import static org.elasticsearch.painless.WriterConstants.BITSET_TYPE;\n import static org.elasticsearch.painless.WriterConstants.CLASS_TYPE;\n-import static org.elasticsearch.painless.WriterConstants.DEFINITION_TYPE;\n-import static org.elasticsearch.painless.WriterConstants.DEF_BOOTSTRAP_DELEGATE_METHOD;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0f33c7c13ce738d9ee05fee5a89e5ec4572c2d3a"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef8f69037803772da28d2e94772fd77424142743", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/ef8f69037803772da28d2e94772fd77424142743", "committedDate": "2020-02-19T15:56:17Z", "message": "Merge branch 'master' into trees8"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c11d88212df2ad43c04eb5951d776650d145da5e", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/c11d88212df2ad43c04eb5951d776650d145da5e", "committedDate": "2020-02-19T19:24:34Z", "message": "removed extraneous constants"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b02c6fba0041aae3fcf2188884ccb06659288a6b", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/b02c6fba0041aae3fcf2188884ccb06659288a6b", "committedDate": "2020-02-19T19:26:19Z", "message": "Merge branch 'master' into trees8"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYyMDk4MTAw", "url": "https://github.com/elastic/elasticsearch/pull/52495#pullrequestreview-362098100", "createdAt": "2020-02-20T17:35:15Z", "commit": {"oid": "b02c6fba0041aae3fcf2188884ccb06659288a6b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2413, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}