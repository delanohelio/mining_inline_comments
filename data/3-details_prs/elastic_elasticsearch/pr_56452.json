{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE1Mzk4Mzg2", "number": 56452, "title": "Add support for numeric range keys", "bodyText": "This adds support for parsing numbers as range keys. They get converted\ninto a string, but we allow numbers.\nWhile I was there I replaced the parser for Range with a\nConstructingObjectParser which will automatically add support for \"did\nyou mean\" style corrections on errors.\nCloses #56402", "createdAt": "2020-05-08T19:37:56Z", "url": "https://github.com/elastic/elasticsearch/pull/56452", "merged": true, "mergeCommit": {"oid": "4ee58faab63b20c93c298a75983a7d0b43e38d88"}, "closed": true, "closedAt": "2020-05-11T20:28:46Z", "author": {"login": "nik9000"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcfXIf5AH2gAyNDE1Mzk4Mzg2OjI1NTcxNmU4ZWNjNjliMWNlZDUzMTM4NWE3MWVjNjVlNGI2Yzc2NjA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcgUi40AH2gAyNDE1Mzk4Mzg2OjFhMjQ3M2UzNWZmNjk0MjI2YjdmZmNkNTI5ZjIzZjQ5MTQ2YTEzNWI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "255716e8ecc69b1ced531385a71ec65e4b6c7660", "author": {"user": {"login": "nik9000", "name": "Nik Everett"}}, "url": "https://github.com/elastic/elasticsearch/commit/255716e8ecc69b1ced531385a71ec65e4b6c7660", "committedDate": "2020-05-08T19:34:50Z", "message": "Add support for numeric range keys\n\nThis adds support for parsing numbers as range keys. They get converted\ninto a string, but we allow numbers.\n\nWhile I was there I replaced the parser for `Range` with a\n`ConstructingObjectParser` which will automatically add support for \"did\nyou mean\" style corrections on errors.\n\nCloses #56402"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5MjQ2OTY0", "url": "https://github.com/elastic/elasticsearch/pull/56452#pullrequestreview-409246964", "createdAt": "2020-05-11T14:50:46Z", "commit": {"oid": "255716e8ecc69b1ced531385a71ec65e4b6c7660"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxNDo1MDo0NlrOGTfx4A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxNDo1MDo0NlrOGTfx4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzA5NjgwMA==", "bodyText": "Begone, foul parser!", "url": "https://github.com/elastic/elasticsearch/pull/56452#discussion_r423096800", "createdAt": "2020-05-11T14:50:46Z", "author": {"login": "polyfractal"}, "path": "server/src/main/java/org/elasticsearch/search/aggregations/bucket/range/RangeAggregator.java", "diffHunk": "@@ -128,50 +132,6 @@ public String toString() {\n             return \"[\" + from + \" to \" + to + \")\";\n         }\n \n-        public static Range fromXContent(XContentParser parser) throws IOException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "255716e8ecc69b1ced531385a71ec65e4b6c7660"}, "originalPosition": 57}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5MjU0ODA2", "url": "https://github.com/elastic/elasticsearch/pull/56452#pullrequestreview-409254806", "createdAt": "2020-05-11T14:58:52Z", "commit": {"oid": "255716e8ecc69b1ced531385a71ec65e4b6c7660"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxNDo1ODo1MlrOGTgJDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxNDo1ODo1MlrOGTgJDg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzEwMjczNA==", "bodyText": "I wonder if we should add a guard here to throw an exception if from/fromAsStr and to/toAsStr are both non-null/non-empty/not infinity?  Looks like we previously were just assuming the user gave us the right combination... i'm assuming we use these preferentially later (e.g. toAsStr if non-null, to otherwise or something like that)\nOr if it turns out to be a big mess, at least a javadoc explaining the priority?  Or make it package-private if possible?  Not sure where else it's used though", "url": "https://github.com/elastic/elasticsearch/pull/56452#discussion_r423102734", "createdAt": "2020-05-11T14:58:52Z", "author": {"login": "polyfractal"}, "path": "server/src/main/java/org/elasticsearch/search/aggregations/bucket/range/RangeAggregator.java", "diffHunk": "@@ -63,6 +67,14 @@\n         protected final double to;\n         protected final String toAsStr;\n \n+        public Range(String key, Double from, String fromAsStr, Double to, String toAsStr) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "255716e8ecc69b1ced531385a71ec65e4b6c7660"}, "originalPosition": 27}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e8dd9c087ccdb95e3d9036d87cbb7a61c279987e", "author": {"user": {"login": "nik9000", "name": "Nik Everett"}}, "url": "https://github.com/elastic/elasticsearch/commit/e8dd9c087ccdb95e3d9036d87cbb7a61c279987e", "committedDate": "2020-05-11T18:55:26Z", "message": "Explain"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dcd5cc51f10a3bfa1c484eb91095315aea4f6006", "author": {"user": {"login": "nik9000", "name": "Nik Everett"}}, "url": "https://github.com/elastic/elasticsearch/commit/dcd5cc51f10a3bfa1c484eb91095315aea4f6006", "committedDate": "2020-05-11T19:06:43Z", "message": "Merge branch 'master' into range_parsere"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1a2473e35ff694226b7ffcd529f23f49146a135b", "author": {"user": {"login": "nik9000", "name": "Nik Everett"}}, "url": "https://github.com/elastic/elasticsearch/commit/1a2473e35ff694226b7ffcd529f23f49146a135b", "committedDate": "2020-05-11T19:07:52Z", "message": "sneaky )"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 85, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}