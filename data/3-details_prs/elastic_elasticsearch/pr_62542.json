{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg4NjU4OTk5", "number": 62542, "title": "Fix test error in InternalCardinalityTests#testEqualsAndHashcode", "bodyText": "Make sure the the new HLL++ is different to the original one by not merging the original and just add a few values to the new one.\ncloses #62540", "createdAt": "2020-09-17T13:13:12Z", "url": "https://github.com/elastic/elasticsearch/pull/62542", "merged": true, "mergeCommit": {"oid": "9e5da6edb6640fd939e1afa7df93bb672059fdf7"}, "closed": true, "closedAt": "2020-09-17T14:17:31Z", "author": {"login": "iverase"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdJwvgOgH2gAyNDg4NjU4OTk5OmM3YzA5YzI0OGI1ZTMzMmI2MGQzOTEyODkzZTIxYzQ4NDg2MjUzYjM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdJxrCxgFqTQ5MDY0MDg1MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c7c09c248b5e332b60d3912893e21c48486253b3", "author": {"user": {"login": "iverase", "name": "Ignacio Vera"}}, "url": "https://github.com/elastic/elasticsearch/commit/c7c09c248b5e332b60d3912893e21c48486253b3", "committedDate": "2020-09-17T13:09:53Z", "message": "Make sure the the new HLL++ is different to the original one"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c762173b75c0a4fd08d96ef4e20be4e23800dacc", "author": {"user": {"login": "iverase", "name": "Ignacio Vera"}}, "url": "https://github.com/elastic/elasticsearch/commit/c762173b75c0a4fd08d96ef4e20be4e23800dacc", "committedDate": "2020-09-17T13:32:05Z", "message": "Merge branch 'master' into fixCardinalityTest"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkwNjQwODUx", "url": "https://github.com/elastic/elasticsearch/pull/62542#pullrequestreview-490640851", "createdAt": "2020-09-17T14:14:06Z", "commit": {"oid": "c762173b75c0a4fd08d96ef4e20be4e23800dacc"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxNDoxNDowNlrOHTkXig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxNDoxNDowNlrOHTkXig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDI4MDg0Mg==", "bodyText": "Haven't looked closely at the test, but is there a way to ensure we add new values that weren't previously added?  Maybe by picking from a different range of random values or something?  Or keeping a set?\nMaybe it's a non-issue and random enough to not matter... might be a problem for a different day :)", "url": "https://github.com/elastic/elasticsearch/pull/62542#discussion_r490280842", "createdAt": "2020-09-17T14:14:06Z", "author": {"login": "polyfractal"}, "path": "server/src/test/java/org/elasticsearch/search/aggregations/metrics/InternalCardinalityTests.java", "diffHunk": "@@ -99,9 +99,7 @@ protected InternalCardinality mutateInstance(InternalCardinality instance) {\n         case 1:\n             HyperLogLogPlusPlus newState = new HyperLogLogPlusPlus(state.precision(),\n                     new MockBigArrays(new MockPageCacheRecycler(Settings.EMPTY), new NoneCircuitBreakerService()), 0);\n-            newState.merge(0, state, 0);\n-            int extraValues = between(10, 100);\n-            for (int i = 0; i < extraValues; i++) {\n+            for (int i = 0; i < 10; i++) {\n                 newState.collect(0, BitMixer.mix64(randomIntBetween(500, 10000)));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c762173b75c0a4fd08d96ef4e20be4e23800dacc"}, "originalPosition": 8}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3639, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}