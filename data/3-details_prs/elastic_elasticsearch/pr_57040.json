{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIxMzU0MDkw", "number": 57040, "title": "[DOCS] Reformat `shingle` token filter", "bodyText": "Changes:\n\nRewrites description and adds Lucene link\nAdds analyze example\nRewrites parameter documentation\nUpdates custom analyzer and filter examples\nAdds anchor to index.max_shingle_diff index-level setting", "createdAt": "2020-05-21T13:32:11Z", "url": "https://github.com/elastic/elasticsearch/pull/57040", "merged": true, "mergeCommit": {"oid": "00ab16ff97add1c43191288359481e15055aaddb"}, "closed": true, "closedAt": "2020-05-21T17:41:51Z", "author": {"login": "jrodewig"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcjdsPWAH2gAyNDIxMzU0MDkwOjc1ZmM0NTViOGQxNjcyNjM0NjRmYjRhZDY5ZTc1YjI5YjQ1ZmE2NDI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcjgDRXAH2gAyNDIxMzU0MDkwOjUxZTYzMDdjYTJkYjU4NjFhZjg0ZGYzN2ZjOTExYzAzYjgzM2FmYjg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "75fc455b8d167263464fb4ad69e75b29b45fa642", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/75fc455b8d167263464fb4ad69e75b29b45fa642", "committedDate": "2020-05-21T13:29:00Z", "message": "[DOCS] Reformat `shingle` token filter\n\nChanges:\n\n* Rewrites description and adds Lucene link\n* Adds analyze example\n* Rewrites parameter documentation\n* Updates custom analyzer and filter examples\n* Adds anchor to `index.max_shingle_diff` index-level setting"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2MjY2NjIz", "url": "https://github.com/elastic/elasticsearch/pull/57040#pullrequestreview-416266623", "createdAt": "2020-05-21T15:42:54Z", "commit": {"oid": "75fc455b8d167263464fb4ad69e75b29b45fa642"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxNTo0Mjo1NVrOGY4Dvg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxNTo0Mjo1NVrOGY4Dvg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODczNzQ3MA==", "bodyText": "should we also say \"two-word shingles and unigrams\"?", "url": "https://github.com/elastic/elasticsearch/pull/57040#discussion_r428737470", "createdAt": "2020-05-21T15:42:55Z", "author": {"login": "mayya-sharipova"}, "path": "docs/reference/analysis/tokenfilters/shingle-tokenfilter.asciidoc", "diffHunk": "@@ -4,46 +4,507 @@\n <titleabbrev>Shingle</titleabbrev>\n ++++\n \n-NOTE: Shingles are generally used to help speed up phrase queries.  Rather\n-than building filter chains by hand, you may find it easier to use the\n-<<index-phrases,`index-phrases`>> option on a text field.\n-\n-A token filter of type `shingle` that constructs shingles (token\n-n-grams) from a token stream. In other words, it creates combinations of\n-tokens as a single token. For example, the sentence \"please divide this\n-sentence into shingles\" might be tokenized into shingles \"please\n-divide\", \"divide this\", \"this sentence\", \"sentence into\", and \"into\n-shingles\".\n-\n-This filter handles position increments > 1 by inserting filler tokens\n-(tokens with termtext \"_\"). It does not handle a position increment of\n-0.\n-\n-The following are settings that can be set for a `shingle` token filter\n-type:\n-\n-[cols=\"<,<\",options=\"header\",]\n-|=======================================================================\n-|Setting |Description\n-|`max_shingle_size` |The maximum shingle size. Defaults to `2`.\n-\n-|`min_shingle_size` |The minimum shingle size. Defaults to `2`.\n-\n-|`output_unigrams` |If `true` the output will contain the input tokens\n-(unigrams) as well as the shingles. Defaults to `true`.\n-\n-|`output_unigrams_if_no_shingles` |If `output_unigrams` is `false` the\n-output will contain the input tokens (unigrams) if no shingles are\n-available. Note if `output_unigrams` is set to `true` this setting has\n-no effect. Defaults to `false`.\n-\n-|`token_separator` |The string to use when joining adjacent tokens to\n-form a shingle. Defaults to `\" \"`.\n-|`filler_token` | The string to use as a replacement for each position \n-at which there is no actual token in the stream. For instance this string is\n-used if the position increment is greater than one when a `stop` filter is used\n-together with the `shingle` filter. Defaults to `\"_\"`\n-|=======================================================================\n-\n-The index level setting `index.max_shingle_diff` controls the maximum allowed\n-difference between `max_shingle_size` and `min_shingle_size`.\n+Add shingles, or word https://en.wikipedia.org/wiki/N-gram[n-grams], to a token\n+stream by concatenating adjacent tokens. By default, the `shingle` token filter\n+creates two-word shingles.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "75fc455b8d167263464fb4ad69e75b29b45fa642"}, "originalPosition": 49}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "51e6307ca2db5861af84df37fc911c03b833afb8", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/51e6307ca2db5861af84df37fc911c03b833afb8", "committedDate": "2020-05-21T16:13:58Z", "message": "address review feedback"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4755, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}