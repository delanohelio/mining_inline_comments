{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYyMTA4MzIx", "number": 50916, "title": "Add SPI jvm option to SystemJvmOptions", "bodyText": "Adding back accidentally removed jvm option that is required to enforce\nstart of the week = Monday in IsoCalendarDataProvider.\nAdding a feature to yml test in order to skip running it in JDK8\ncommit that removed it 398c802\ncommit that backports SystemJvmOptions c4fbda3\nrelates 7.x backport of code that enforces CalendarDataProvider use #48349", "createdAt": "2020-01-13T13:09:34Z", "url": "https://github.com/elastic/elasticsearch/pull/50916", "merged": true, "mergeCommit": {"oid": "0513d8dca3155bd0ef881c8c84133f913f7a2d0e"}, "closed": true, "closedAt": "2020-01-21T08:02:22Z", "author": {"login": "pgomulka"}, "timelineItems": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb57zC7AH2gAyMzYyMTA4MzIxOjM5Mzc5ZTRiYmZmZWE0MDFlY2E1YTY0OTgwODkwNGMyYTZjODIzYzg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb8LRY2AH2gAyMzYyMTA4MzIxOmY0Y2YzZDhlNTRjMjdkYzZkYmUyODQwYTYyNTQxMjczYzJiZmQ2ZTM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "39379e4bbffea401eca5a649808904c2a6c823c8", "author": {"user": {"login": "pgomulka", "name": "Przemyslaw Gomulka"}}, "url": "https://github.com/elastic/elasticsearch/commit/39379e4bbffea401eca5a649808904c2a6c823c8", "committedDate": "2020-01-13T12:48:46Z", "message": "Add SPI jvm option to SystemJvmOptions\n\nAdding back accidently removed jvm options that is required to enfoce\nstart of the week = Monday in IsoCalendarDataProvider."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "53acc74c61c668697ff27bbf53ebedbf116e520a", "author": {"user": {"login": "pgomulka", "name": "Przemyslaw Gomulka"}}, "url": "https://github.com/elastic/elasticsearch/commit/53acc74c61c668697ff27bbf53ebedbf116e520a", "committedDate": "2020-01-13T15:38:34Z", "message": "change the way locale providers flag is set"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxOTQyMzI3", "url": "https://github.com/elastic/elasticsearch/pull/50916#pullrequestreview-341942327", "createdAt": "2020-01-13T15:50:58Z", "commit": {"oid": "53acc74c61c668697ff27bbf53ebedbf116e520a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxNTo1MDo1OFrOFc7aMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxNTo1MDo1OFrOFc7aMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg3NzgwOA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \"Date aggregartion per day of week\":\n          \n          \n            \n            \"Date aggregation per day of week\":", "url": "https://github.com/elastic/elasticsearch/pull/50916#discussion_r365877808", "createdAt": "2020-01-13T15:50:58Z", "author": {"login": "pugnascotia"}, "path": "rest-api-spec/src/main/resources/rest-api-spec/test/search.aggregation/310_date_agg_per_day_of_week.yml", "diffHunk": "@@ -0,0 +1,44 @@\n+\n+setup:\n+  - skip:\n+      version: \" - 7.5.99\" #todo this test failing on jdk8. has to be removed from 7.x\n+      reason:  \"Start of the week Monday was backported to 7.5\"\n+\n+\n+  - do:\n+      indices.create:\n+        index: test\n+        body:\n+          mappings:\n+            properties:\n+              date:\n+                type: date\n+  - do:\n+      index:\n+        index: test\n+        id:    1\n+        body:  { \"date\": \"2009-11-15T14:12:12\" }\n+  - do:\n+      indices.refresh:\n+        index: [test]\n+---\n+# The inserted document has a field date=2009-11-15T14:12:12 which is Sunday.\n+# When aggregating per day of the week this should be considered as last day of the week (7)\n+# and this value should be used in 'key_as_string'\n+\"Date aggregartion per day of week\":", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53acc74c61c668697ff27bbf53ebedbf116e520a"}, "originalPosition": 28}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxOTQzODY3", "url": "https://github.com/elastic/elasticsearch/pull/50916#pullrequestreview-341943867", "createdAt": "2020-01-13T15:53:00Z", "commit": {"oid": "53acc74c61c668697ff27bbf53ebedbf116e520a"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQyNzM5NjI0", "url": "https://github.com/elastic/elasticsearch/pull/50916#pullrequestreview-342739624", "createdAt": "2020-01-14T18:19:14Z", "commit": {"oid": "53acc74c61c668697ff27bbf53ebedbf116e520a"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQxODoxOToxNFrOFdhLmw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQxODoxOTo1OVrOFdhNAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjQ5NjY2Nw==", "bodyText": "Shouldn't this just be 8, not 8-?", "url": "https://github.com/elastic/elasticsearch/pull/50916#discussion_r366496667", "createdAt": "2020-01-14T18:19:14Z", "author": {"login": "rjernst"}, "path": "distribution/src/config/jvm.options", "diffHunk": "@@ -75,3 +75,8 @@ ${error.file}\n \n # JDK 9+ GC logging\n 9-:-Xlog:gc*,gc+age=trace,safepoint:file=${loggc}:utctime,pid,tags:filecount=32,filesize=64m\n+\n+# due to internationalization enhancements in JDK 9 Elasticsearch need to set the provider to COMPAT otherwise\n+# time/date parsing will break in an incompatible way for some date patterns and locals\n+8-:-Djava.locale.providers=SPI,JRE", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53acc74c61c668697ff27bbf53ebedbf116e520a"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjQ5NzAyNA==", "bodyText": "Why can't we keep this in system jvm options? Shouldn't this be something a user doesn't need to think about?", "url": "https://github.com/elastic/elasticsearch/pull/50916#discussion_r366497024", "createdAt": "2020-01-14T18:19:59Z", "author": {"login": "rjernst"}, "path": "distribution/tools/launchers/src/main/java/org/elasticsearch/tools/launchers/SystemJvmOptions.java", "diffHunk": "@@ -59,12 +59,7 @@\n             \"-Dio.netty.allocator.numDirectArenas=0\",\n             // log4j 2\n             \"-Dlog4j.shutdownHookEnabled=false\",\n-            \"-Dlog4j2.disable.jmx=true\",\n-            /*\n-             * Due to internationalization enhancements in JDK 9 Elasticsearch need to set the provider to COMPAT otherwise time/date\n-             * parsing will break in an incompatible way for some date patterns and locales.\n-             */\n-            \"-Djava.locale.providers=COMPAT\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53acc74c61c668697ff27bbf53ebedbf116e520a"}, "originalPosition": 9}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77b0b7a109ad9554c6f4652b16ee251419072fd2", "author": {"user": {"login": "pgomulka", "name": "Przemyslaw Gomulka"}}, "url": "https://github.com/elastic/elasticsearch/commit/77b0b7a109ad9554c6f4652b16ee251419072fd2", "committedDate": "2020-01-15T08:29:19Z", "message": "make verion based chocie in system jvm options"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "154c8abd13f255a450ba95c35bd00c02fb914058", "author": {"user": {"login": "pgomulka", "name": "Przemyslaw Gomulka"}}, "url": "https://github.com/elastic/elasticsearch/commit/154c8abd13f255a450ba95c35bd00c02fb914058", "committedDate": "2020-01-15T10:30:11Z", "message": "use features to skip a test on jdk8"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b3d3f9b15df130a89a8350fa52479d9a4a616131", "author": {"user": {"login": "pgomulka", "name": "Przemyslaw Gomulka"}}, "url": "https://github.com/elastic/elasticsearch/commit/b3d3f9b15df130a89a8350fa52479d9a4a616131", "committedDate": "2020-01-15T10:34:46Z", "message": "cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "305c215f177abf0313ad76df44e2596df9258513", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/305c215f177abf0313ad76df44e2596df9258513", "committedDate": "2020-01-15T11:05:47Z", "message": "Merge branch '7.x' into fix/spi_provider_jvm_option"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "76877bac174c22794406b960a5e7cc5f94143d69", "author": {"user": {"login": "pgomulka", "name": "Przemyslaw Gomulka"}}, "url": "https://github.com/elastic/elasticsearch/commit/76877bac174c22794406b960a5e7cc5f94143d69", "committedDate": "2020-01-15T11:14:26Z", "message": "change assertion on locale.provider setting as it will be different in jdk8 and newer"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c606038b6d1ed127b91d0922f9b95695f3f84f9d", "author": {"user": {"login": "pgomulka", "name": "Przemyslaw Gomulka"}}, "url": "https://github.com/elastic/elasticsearch/commit/c606038b6d1ed127b91d0922f9b95695f3f84f9d", "committedDate": "2020-01-15T11:14:57Z", "message": "Merge branch 'fix/spi_provider_jvm_option' of github.com:pgomulka/elasticsearch into fix/spi_provider_jvm_option"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8423ee07fc186da62aa5f5e47f4b0cbf49ad4555", "author": {"user": {"login": "pgomulka", "name": "Przemyslaw Gomulka"}}, "url": "https://github.com/elastic/elasticsearch/commit/8423ee07fc186da62aa5f5e47f4b0cbf49ad4555", "committedDate": "2020-01-15T12:57:06Z", "message": "Update rest-api-spec/src/main/resources/rest-api-spec/test/search.aggregation/310_date_agg_per_day_of_week.yml\n\nCo-Authored-By: Rory Hunter <pugnascotia@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f872ae695bfaab3c9370f6483bf12a99f7d1f96", "author": {"user": {"login": "pgomulka", "name": "Przemyslaw Gomulka"}}, "url": "https://github.com/elastic/elasticsearch/commit/5f872ae695bfaab3c9370f6483bf12a99f7d1f96", "committedDate": "2020-01-15T12:58:46Z", "message": "rename"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5afbafaf07674165ed8561d14d16a00f1fbac6e1", "author": {"user": {"login": "pgomulka", "name": "Przemyslaw Gomulka"}}, "url": "https://github.com/elastic/elasticsearch/commit/5afbafaf07674165ed8561d14d16a00f1fbac6e1", "committedDate": "2020-01-18T15:39:46Z", "message": "add more javadoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a43d97a524fe1ba09d9e0da3b0af1f2f6b56d377", "author": {"user": {"login": "pgomulka", "name": "Przemyslaw Gomulka"}}, "url": "https://github.com/elastic/elasticsearch/commit/a43d97a524fe1ba09d9e0da3b0af1f2f6b56d377", "committedDate": "2020-01-18T15:41:30Z", "message": "cross ref"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "724302bc8d323567335a7555ad2684cfde1b3d75", "author": {"user": {"login": "pgomulka", "name": "Przemyslaw Gomulka"}}, "url": "https://github.com/elastic/elasticsearch/commit/724302bc8d323567335a7555ad2684cfde1b3d75", "committedDate": "2020-01-20T10:25:50Z", "message": "link fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "457c5cc2c1182ae385d50e1a6ac857c8193d28be", "author": {"user": {"login": "pgomulka", "name": "Przemyslaw Gomulka"}}, "url": "https://github.com/elastic/elasticsearch/commit/457c5cc2c1182ae385d50e1a6ac857c8193d28be", "committedDate": "2020-01-20T11:29:40Z", "message": "Merge branch '7.x' into fix/spi_provider_jvm_option"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ1MjU5MDM0", "url": "https://github.com/elastic/elasticsearch/pull/50916#pullrequestreview-345259034", "createdAt": "2020-01-20T11:56:29Z", "commit": {"oid": "457c5cc2c1182ae385d50e1a6ac857c8193d28be"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f4cf3d8e54c27dc6dbe2840a62541273c2bfd6e3", "author": {"user": {"login": "pgomulka", "name": "Przemyslaw Gomulka"}}, "url": "https://github.com/elastic/elasticsearch/commit/f4cf3d8e54c27dc6dbe2840a62541273c2bfd6e3", "committedDate": "2020-01-20T11:58:20Z", "message": "remove empty lines"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3175, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}