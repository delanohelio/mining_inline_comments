{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzNjcxMjIx", "number": 54200, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQyMDo0ODo1NFrODrZHMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQyMDo0ODo1NFrODrZHMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2ODI2ODAzOnYy", "diffSide": "RIGHT", "path": "client/rest-high-level/src/main/java/org/elasticsearch/client/AsyncSearchRequestConverters.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQyMDo0ODo1NFrOF7tueg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxMDoxMTowNVrOF7_u8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODE1OTQ4Mg==", "bodyText": "I would prefer if we found a way to not have the default value in the client too. Would it be an option to make this an Integer that is null by default, and only set it when it was explicitly set?", "url": "https://github.com/elastic/elasticsearch/pull/54200#discussion_r398159482", "createdAt": "2020-03-25T20:48:54Z", "author": {"login": "javanna"}, "path": "client/rest-high-level/src/main/java/org/elasticsearch/client/AsyncSearchRequestConverters.java", "diffHunk": "@@ -73,7 +73,9 @@ static void addSearchRequestParams(Params params, SubmitAsyncSearchRequest reque\n         if (request.getAllowPartialSearchResults() != null) {\n             params.withAllowPartialResults(request.getAllowPartialSearchResults());\n         }\n-        params.withBatchedReduceSize(request.getBatchedReduceSize());\n+        if (request.getBatchedReduceSize() != SubmitAsyncSearchRequest.DEFAULT_BATCHED_REDUCE_SIZE) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "30d554d48fa1de866fdbb801905868fbf13b6a1c"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODQ1NDUxNA==", "bodyText": "That would be an Integer in the SubmitAsyncSearchRequest, masking the one in the wrapped SearchRequest, I think. I find that equally confusing from the code side tbh, we would keep most parameters set on the internal search request but only this in the async submit request? With the current defautl its at least clear when looking at the code what value is used when the user doesn't set this? wdyt?", "url": "https://github.com/elastic/elasticsearch/pull/54200#discussion_r398454514", "createdAt": "2020-03-26T10:11:05Z", "author": {"login": "cbuescher"}, "path": "client/rest-high-level/src/main/java/org/elasticsearch/client/AsyncSearchRequestConverters.java", "diffHunk": "@@ -73,7 +73,9 @@ static void addSearchRequestParams(Params params, SubmitAsyncSearchRequest reque\n         if (request.getAllowPartialSearchResults() != null) {\n             params.withAllowPartialResults(request.getAllowPartialSearchResults());\n         }\n-        params.withBatchedReduceSize(request.getBatchedReduceSize());\n+        if (request.getBatchedReduceSize() != SubmitAsyncSearchRequest.DEFAULT_BATCHED_REDUCE_SIZE) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODE1OTQ4Mg=="}, "originalCommit": {"oid": "30d554d48fa1de866fdbb801905868fbf13b6a1c"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4093, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}