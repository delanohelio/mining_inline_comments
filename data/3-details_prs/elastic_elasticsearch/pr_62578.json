{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg4ODMxMTc3", "number": 62578, "title": "Dry up Snapshot IT Infrastructure", "bodyText": "Mainly just shortening the diff of #61839 here by moving test utilities\nto the abstract test case.\nAlso, making use of the now available functionality to simplify existing tests and improve logging in them.", "createdAt": "2020-09-17T17:45:26Z", "url": "https://github.com/elastic/elasticsearch/pull/62578", "merged": true, "mergeCommit": {"oid": "1b8547e5766f7acb1bbf1b255c1448e1bc85f43e"}, "closed": true, "closedAt": "2020-09-18T13:51:57Z", "author": {"login": "original-brownbear"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdJ0oW_AH2gAyNDg4ODMxMTc3OjI1YjBiNmQ3MjhlZWIzODFjNmRjYWYyMDhiYWQwM2I4YzdlMDljOTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdKFO2AgH2gAyNDg4ODMxMTc3OmNlOTFkM2I4ZGMwMGQwMjMyYWE4NDFiNjBhZjcyZjc0OTc2NGFlZjA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "25b0b6d728eeb381c6dcaf208bad03b8c7e09c94", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/25b0b6d728eeb381c6dcaf208bad03b8c7e09c94", "committedDate": "2020-09-17T17:41:42Z", "message": "Dry up Snapshot IT Infrastructure\n\nMainly just shortening the diff of #61839 here by moving test utilities\nto the abstract test case.\nAlso, making use of the now available functionality to simplify existing tests\nand improve logging in them."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkxNDA2NDI2", "url": "https://github.com/elastic/elasticsearch/pull/62578#pullrequestreview-491406426", "createdAt": "2020-09-18T12:09:05Z", "commit": {"oid": "25b0b6d728eeb381c6dcaf208bad03b8c7e09c94"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQxMjowOTowNVrOHUKduQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQxMjowOTowNVrOHUKduQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDkwNTAxNw==", "bodyText": "Maybe awaitNumberOfSnapshotsInProgress() ?", "url": "https://github.com/elastic/elasticsearch/pull/62578#discussion_r490905017", "createdAt": "2020-09-18T12:09:05Z", "author": {"login": "tlrx"}, "path": "server/src/internalClusterTest/java/org/elasticsearch/snapshots/SnapshotStatusApisIT.java", "diffHunk": "@@ -101,16 +101,9 @@ public void testStatusAPICallInProgressSnapshot() throws Exception {\n \n         logger.info(\"--> wait for data nodes to get blocked\");\n         waitForBlockOnAnyDataNode(\"test-repo\", TimeValue.timeValueMinutes(1));\n-\n-        assertBusy(() -> {\n-            try {\n-                assertEquals(SnapshotsInProgress.State.STARTED, client.admin().cluster().snapshotsStatus(\n-                        new SnapshotsStatusRequest(\"test-repo\", new String[]{\"test-snap\"})).actionGet().getSnapshots().get(0)\n-                        .getState());\n-            } catch (SnapshotMissingException sme) {\n-                throw new AssertionError(sme);\n-            }\n-        }, 1L, TimeUnit.MINUTES);\n+        awaitNSnapshotsInProgress(1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "25b0b6d728eeb381c6dcaf208bad03b8c7e09c94"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "705c0a180f58659036e91a81ccbf2654b8c0661e", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/705c0a180f58659036e91a81ccbf2654b8c0661e", "committedDate": "2020-09-18T12:59:16Z", "message": "Merge remote-tracking branch 'elastic/master' into drier-snapshot-tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce91d3b8dc00d0232aa841b60af72f749764aef0", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/ce91d3b8dc00d0232aa841b60af72f749764aef0", "committedDate": "2020-09-18T13:02:13Z", "message": "rename"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4757, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}