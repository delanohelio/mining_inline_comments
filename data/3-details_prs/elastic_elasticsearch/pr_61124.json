{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY3NjQ3Mzk0", "number": 61124, "title": "#60750 Added Composable  Index Template Builder", "bodyText": "Description\nAdded Builder for ComposableIndexTemplate to make it easier to be able to build the template objects.\nChecks\n\nHave you signed the contributor license agreement?  YES\nHave you followed the contributor guidelines?  YES\nIf submitting code, have you built your formula locally prior to submission with gradle check?  YES\nIf submitting code, is your pull request against master? Unless there is a good reason otherwise, we prefer pull requests against master and will backport as needed. YES\nIf submitting code, have you checked that your submission is for an OS and architecture that we support?  YES\nIf you are submitting this code for a class then read our [policy] (https://github.com/elastic/elasticsearch/blob/master/CONTRIBUTING.md#contributing-as-part-of-a-class) for that.", "createdAt": "2020-08-13T21:41:26Z", "url": "https://github.com/elastic/elasticsearch/pull/61124", "merged": true, "mergeCommit": {"oid": "d57dd0a45ad7b0fd4eba2d8ecdc85ac78a11269a"}, "closed": true, "closedAt": "2021-01-11T16:32:43Z", "author": {"login": "antrix190"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdEU1juAFqTQ3ODcyNzE4OA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdvIP_dgH2gAyNDY3NjQ3Mzk0OjMxMTM1ZjJkNmY3YmU1ZWExZmYzNmNlYWM5ZTdiMTMyNzUzZWM0OTY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4NzI3MTg4", "url": "https://github.com/elastic/elasticsearch/pull/61124#pullrequestreview-478727188", "createdAt": "2020-08-31T15:40:25Z", "commit": {"oid": "14c9b78a1a2dc6b9aaf983c719f20a054cf8b519"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxNTo0MDoyNlrOHJ9-5Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxNTo0MzoyM1rOHJ-NAw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDIxNDc1Nw==", "bodyText": "The code doesn't compile, that should be return new ComposableIndexTemplate(this). Also as mentioned above we should use one of the existing constructors.", "url": "https://github.com/elastic/elasticsearch/pull/61124#discussion_r480214757", "createdAt": "2020-08-31T15:40:26Z", "author": {"login": "swallez"}, "path": "server/src/main/java/org/elasticsearch/cluster/metadata/ComposableIndexTemplate.java", "diffHunk": "@@ -294,4 +299,55 @@ public int hashCode() {\n             return DataStreamTemplate.class.hashCode();\n         }\n     }\n+    \n+    public static class Builder{\n+    \t\n+    \tprivate List<String> indexPatterns;\n+        private Template template;\n+        private List<String> componentTemplates;\n+        private Long priority;\n+        private Long version;\n+        private Map<String, Object> metadata;\n+        private DataStreamTemplate dataStreamTemplate;\n+        \n+        \n+        public Builder indexPatterns(List<String> indexPatterns) { \n+        \tthis.indexPatterns = indexPatterns;\n+        \treturn this;\n+        }\n+        \n+        public Builder template(Template template) { \n+        \tthis.template = template;\n+        \treturn this;\n+        }\n+        \n+        public Builder componentTemplates(List<String> componentTemplates) { \n+        \tthis.componentTemplates = componentTemplates;\n+        \treturn this;\n+        }\n+        \n+        public Builder priority(Long priority) { \n+        \tthis.priority = priority;\n+        \treturn this;\n+        }\n+        \n+        public Builder version(Long version) { \n+        \tthis.version = version;\n+        \treturn this;\n+        }\n+        \n+        public Builder metadata(Map<String, Object> metadata) { \n+        \tthis.metadata = metadata;\n+        \treturn this;\n+        }\n+        \n+        public Builder dataStreamTemplate(DataStreamTemplate dataStreamTemplate) { \n+        \tthis.dataStreamTemplate = dataStreamTemplate;\n+        \treturn this;\n+        }\n+        \n+        public ComposableIndexTemplate build() { \n+        \treturn ComposableIndexTemplate(this);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "14c9b78a1a2dc6b9aaf983c719f20a054cf8b519"}, "originalPosition": 64}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDIxODM3MQ==", "bodyText": "If you look at other uses of the builder pattern, their build method calls one of the regular constructors of the class. This avoids having to add an additional constructor just for the builder.", "url": "https://github.com/elastic/elasticsearch/pull/61124#discussion_r480218371", "createdAt": "2020-08-31T15:43:23Z", "author": {"login": "swallez"}, "path": "server/src/main/java/org/elasticsearch/cluster/metadata/ComposableIndexTemplate.java", "diffHunk": "@@ -104,6 +104,11 @@ public ComposableIndexTemplate(List<String> indexPatterns, @Nullable Template te\n         this(indexPatterns, template, componentTemplates, priority, version, metadata, null);\n     }\n \n+    public ComposableIndexTemplate(Builder builder) { ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "14c9b78a1a2dc6b9aaf983c719f20a054cf8b519"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c9b15e64fb1caf5c87b9d64889cb5c146b8ded98", "author": {"user": null}, "url": "https://github.com/elastic/elasticsearch/commit/c9b15e64fb1caf5c87b9d64889cb5c146b8ded98", "committedDate": "2020-12-21T20:57:29Z", "message": "#60750 Modified AutoCreateActionTests to use ComposableIndexTemplate.Builder"}, "afterCommit": {"oid": "4b85ec0b4613509412ec151d41999526c1d0d842", "author": {"user": null}, "url": "https://github.com/elastic/elasticsearch/commit/4b85ec0b4613509412ec151d41999526c1d0d842", "committedDate": "2020-12-21T21:15:52Z", "message": "#60750 Modified AutoCreateActionTests to use ComposableIndexTemplate.Builder"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "60aba6577a8f19498536683d9a7d687100f8ecde", "author": {"user": {"login": "antrix190", "name": "Antariksh"}}, "url": "https://github.com/elastic/elasticsearch/commit/60aba6577a8f19498536683d9a7d687100f8ecde", "committedDate": "2020-12-21T23:24:17Z", "message": "Added Composable  Index Template Builder"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "da843a2841bb49c7f798b75078a93c5672b76213", "author": {"user": null}, "url": "https://github.com/elastic/elasticsearch/commit/da843a2841bb49c7f798b75078a93c5672b76213", "committedDate": "2020-12-21T22:45:43Z", "message": "#60750 Added allowAutoCreate to Builder and test fix"}, "afterCommit": {"oid": "60aba6577a8f19498536683d9a7d687100f8ecde", "author": {"user": {"login": "antrix190", "name": "Antariksh"}}, "url": "https://github.com/elastic/elasticsearch/commit/60aba6577a8f19498536683d9a7d687100f8ecde", "committedDate": "2020-12-21T23:24:17Z", "message": "Added Composable  Index Template Builder"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eeed715240875643300c5edeafff29536a14be02", "author": {"user": {"login": "antrix190", "name": "Antariksh"}}, "url": "https://github.com/elastic/elasticsearch/commit/eeed715240875643300c5edeafff29536a14be02", "committedDate": "2020-12-22T11:03:27Z", "message": "#60750 Modifying test cases to use ComposableIndexTemplate.Builder"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e915b069e5fdf8b61bb3a2c1e624ae9022ed72f2", "author": {"user": {"login": "antrix190", "name": "Antariksh"}}, "url": "https://github.com/elastic/elasticsearch/commit/e915b069e5fdf8b61bb3a2c1e624ae9022ed72f2", "committedDate": "2020-12-22T12:08:30Z", "message": "#60750 Checkstyle test fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "57dfdca88fe939a7bd12d20930d0e39258c8e1e1", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/57dfdca88fe939a7bd12d20930d0e39258c8e1e1", "committedDate": "2021-01-07T17:19:07Z", "message": "Merge branch 'master' into master"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY1NDYwOTU0", "url": "https://github.com/elastic/elasticsearch/pull/61124#pullrequestreview-565460954", "createdAt": "2021-01-11T15:27:57Z", "commit": {"oid": "57dfdca88fe939a7bd12d20930d0e39258c8e1e1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "31135f2d6f7be5ea1ff36ceac9e7b132753ec496", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/31135f2d6f7be5ea1ff36ceac9e7b132753ec496", "committedDate": "2021-01-11T15:28:23Z", "message": "Merge branch 'master' into master"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3305, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}