{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzczNjE3ODcw", "number": 52195, "title": "[ML] Switch poor categorization audit warning to use status field", "bodyText": "In #51146 a rudimentary check for poor categorization was added to\n7.6.\nThis change replaces that warning based on a Java-side check with\na new one based on the categorization_status field that the ML C++\nsets.  categorization_status was added in 7.7 and above by #51879,\nso this new warning based on more advanced conditions will also be\nin 7.7 and above.\nCloses #50749", "createdAt": "2020-02-11T11:56:02Z", "url": "https://github.com/elastic/elasticsearch/pull/52195", "merged": true, "mergeCommit": {"oid": "4a3ca41fb716410f51f80bf6009f903fae585669"}, "closed": true, "closedAt": "2020-02-11T15:27:00Z", "author": {"login": "droberts195"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcDQWG4gH2gAyMzczNjE3ODcwOjVmNjA3OGUxNWY2YmVmODIyMTA5ZmZjN2RjZWUwYzRmMWNlMDQ4OTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcDSL_zgH2gAyMzczNjE3ODcwOjQ0YjUyYjZmMGM3MDQ5ZGY0YmZlYzEwNmYzMGIwOWQ2NzVmMjE1ZWY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5f6078e15f6bef822109ffc7dcee0c4f1ce04895", "author": {"user": {"login": "droberts195", "name": "David Roberts"}}, "url": "https://github.com/elastic/elasticsearch/commit/5f6078e15f6bef822109ffc7dcee0c4f1ce04895", "committedDate": "2020-02-11T11:50:29Z", "message": "[ML] Switch poor categorization audit warning to use status field\n\nIn #51146 a rudimentary check for poor categorization was added to\n7.6.\n\nThis change replaces that warning based on a Java-side check with\na new one based on the categorization_status field that the ML C++\nsets.  categorization_status was added in 7.7 and above by #51879,\nso this new warning based on more advanced conditions will also be\nin 7.7 and above.\n\nCloses #50749"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2NjA2Mjgy", "url": "https://github.com/elastic/elasticsearch/pull/52195#pullrequestreview-356606282", "createdAt": "2020-02-11T12:09:44Z", "commit": {"oid": "5f6078e15f6bef822109ffc7dcee0c4f1ce04895"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQxMjowOTo0NFrOFoGoAw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQxMjowOTo0NFrOFoGoAw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzU5NTkwNw==", "bodyText": "Should we also emit auditor warning if the categorizationStatus is WARN in the first modelSizeStats analyzed?", "url": "https://github.com/elastic/elasticsearch/pull/52195#discussion_r377595907", "createdAt": "2020-02-11T12:09:44Z", "author": {"login": "przemekwitek"}, "path": "x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/job/process/autodetect/output/AutodetectResultProcessor.java", "diffHunk": "@@ -359,6 +341,16 @@ private void notifyModelMemoryStatusChange(ModelSizeStats modelSizeStats) {\n         }\n     }\n \n+    private void notifyCategorizationStatusChange(ModelSizeStats modelSizeStats) {\n+        ModelSizeStats.CategorizationStatus categorizationStatus = modelSizeStats.getCategorizationStatus();\n+        if (categorizationStatus != latestModelSizeStats.getCategorizationStatus()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5f6078e15f6bef822109ffc7dcee0c4f1ce04895"}, "originalPosition": 68}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "884edda0e07947b74374470edd1d1909f2d55de9", "author": {"user": {"login": "droberts195", "name": "David Roberts"}}, "url": "https://github.com/elastic/elasticsearch/commit/884edda0e07947b74374470edd1d1909f2d55de9", "committedDate": "2020-02-11T12:13:46Z", "message": "Remove stray blank line"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "44b52b6f0c7049df4bfec106f30b09d675f215ef", "author": {"user": {"login": "droberts195", "name": "David Roberts"}}, "url": "https://github.com/elastic/elasticsearch/commit/44b52b6f0c7049df4bfec106f30b09d675f215ef", "committedDate": "2020-02-11T13:59:15Z", "message": "Add an extra test for an edge case"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2543, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}