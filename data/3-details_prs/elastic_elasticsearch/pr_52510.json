{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc3MTMyODAz", "number": 52510, "title": "Rename .ml-state index to .ml-state-000001 to support rollover", "bodyText": "This PR changes the name of the state index from .ml-state to .ml-state-000001 so that the rollover can be performed on the index.\nThe state index pattern (.ml-state*) is still valid as it \"catches\" both legacy and new name.\nIf the user already has the legacy state index (.ml-state), we will not create the new one (.ml-state-000001).\nThis PR doesn't create any ILM policy nor does it invoke the rollover action. It can be viewed as a prerequisite for implementing either ILM or rollover.\nRelates #29938", "createdAt": "2020-02-19T12:07:17Z", "url": "https://github.com/elastic/elasticsearch/pull/52510", "merged": true, "mergeCommit": {"oid": "6c28ec7261acdd51b769a305d3544230bb915a9f"}, "closed": true, "closedAt": "2020-02-20T20:05:56Z", "author": {"login": "przemekwitek"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcF2SdCABqjMwNTE2ODM5OTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcGNg35AH2gAyMzc3MTMyODAzOjk4Y2M1ODJiNjk2YWUzNTE3MjM3ZjY4Mzc5OWE0N2Y1OWIwNjk5ZDM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bcf4abfc2996173cfd7ed16520009e171d72fe0d", "author": {"user": {"login": "przemekwitek", "name": "Przemys\u0142aw Witek"}}, "url": "https://github.com/elastic/elasticsearch/commit/bcf4abfc2996173cfd7ed16520009e171d72fe0d", "committedDate": "2020-02-19T12:03:09Z", "message": "Create .ml-state-000001 index instead of .ml-state"}, "afterCommit": {"oid": "d617f09a9531fe503bc36bcafe4e5d3e369f0966", "author": {"user": {"login": "przemekwitek", "name": "Przemys\u0142aw Witek"}}, "url": "https://github.com/elastic/elasticsearch/commit/d617f09a9531fe503bc36bcafe4e5d3e369f0966", "committedDate": "2020-02-19T13:10:33Z", "message": "Create .ml-state-000001 index instead of .ml-state"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d617f09a9531fe503bc36bcafe4e5d3e369f0966", "author": {"user": {"login": "przemekwitek", "name": "Przemys\u0142aw Witek"}}, "url": "https://github.com/elastic/elasticsearch/commit/d617f09a9531fe503bc36bcafe4e5d3e369f0966", "committedDate": "2020-02-19T13:10:33Z", "message": "Create .ml-state-000001 index instead of .ml-state"}, "afterCommit": {"oid": "c2099728cb881ecc92d000206089cc478e768825", "author": {"user": {"login": "przemekwitek", "name": "Przemys\u0142aw Witek"}}, "url": "https://github.com/elastic/elasticsearch/commit/c2099728cb881ecc92d000206089cc478e768825", "committedDate": "2020-02-19T13:12:41Z", "message": "Create .ml-state-000001 index instead of .ml-state"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c2099728cb881ecc92d000206089cc478e768825", "author": {"user": {"login": "przemekwitek", "name": "Przemys\u0142aw Witek"}}, "url": "https://github.com/elastic/elasticsearch/commit/c2099728cb881ecc92d000206089cc478e768825", "committedDate": "2020-02-19T13:12:41Z", "message": "Create .ml-state-000001 index instead of .ml-state"}, "afterCommit": {"oid": "ca1917b01ddf1735dd2a2c88423611fbc1a6cd35", "author": {"user": {"login": "przemekwitek", "name": "Przemys\u0142aw Witek"}}, "url": "https://github.com/elastic/elasticsearch/commit/ca1917b01ddf1735dd2a2c88423611fbc1a6cd35", "committedDate": "2020-02-19T18:25:32Z", "message": "Create .ml-state-000001 index instead of .ml-state"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ca1917b01ddf1735dd2a2c88423611fbc1a6cd35", "author": {"user": {"login": "przemekwitek", "name": "Przemys\u0142aw Witek"}}, "url": "https://github.com/elastic/elasticsearch/commit/ca1917b01ddf1735dd2a2c88423611fbc1a6cd35", "committedDate": "2020-02-19T18:25:32Z", "message": "Create .ml-state-000001 index instead of .ml-state"}, "afterCommit": {"oid": "1f9eb98a6a6936fd16baaa5e49e5d317abc05714", "author": {"user": {"login": "przemekwitek", "name": "Przemys\u0142aw Witek"}}, "url": "https://github.com/elastic/elasticsearch/commit/1f9eb98a6a6936fd16baaa5e49e5d317abc05714", "committedDate": "2020-02-19T20:42:23Z", "message": "Create .ml-state-000001 index instead of .ml-state"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1f9eb98a6a6936fd16baaa5e49e5d317abc05714", "author": {"user": {"login": "przemekwitek", "name": "Przemys\u0142aw Witek"}}, "url": "https://github.com/elastic/elasticsearch/commit/1f9eb98a6a6936fd16baaa5e49e5d317abc05714", "committedDate": "2020-02-19T20:42:23Z", "message": "Create .ml-state-000001 index instead of .ml-state"}, "afterCommit": {"oid": "b2e6c55c5e378959d49f782474160e913bc08966", "author": {"user": {"login": "przemekwitek", "name": "Przemys\u0142aw Witek"}}, "url": "https://github.com/elastic/elasticsearch/commit/b2e6c55c5e378959d49f782474160e913bc08966", "committedDate": "2020-02-20T12:31:29Z", "message": "Create .ml-state-000001 index instead of .ml-state"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d23e256b97046f78e1fc5cb30e345314eb54f8a8", "author": {"user": {"login": "przemekwitek", "name": "Przemys\u0142aw Witek"}}, "url": "https://github.com/elastic/elasticsearch/commit/d23e256b97046f78e1fc5cb30e345314eb54f8a8", "committedDate": "2020-02-20T12:38:26Z", "message": "Create .ml-state-000001 index instead of .ml-state"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b2e6c55c5e378959d49f782474160e913bc08966", "author": {"user": {"login": "przemekwitek", "name": "Przemys\u0142aw Witek"}}, "url": "https://github.com/elastic/elasticsearch/commit/b2e6c55c5e378959d49f782474160e913bc08966", "committedDate": "2020-02-20T12:31:29Z", "message": "Create .ml-state-000001 index instead of .ml-state"}, "afterCommit": {"oid": "d23e256b97046f78e1fc5cb30e345314eb54f8a8", "author": {"user": {"login": "przemekwitek", "name": "Przemys\u0142aw Witek"}}, "url": "https://github.com/elastic/elasticsearch/commit/d23e256b97046f78e1fc5cb30e345314eb54f8a8", "committedDate": "2020-02-20T12:38:26Z", "message": "Create .ml-state-000001 index instead of .ml-state"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "44172d3cbcfcb50f475c99c3b8a175e625090bf8", "author": {"user": {"login": "przemekwitek", "name": "Przemys\u0142aw Witek"}}, "url": "https://github.com/elastic/elasticsearch/commit/44172d3cbcfcb50f475c99c3b8a175e625090bf8", "committedDate": "2020-02-20T13:25:34Z", "message": "Fix BWC tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxOTM0ODQz", "url": "https://github.com/elastic/elasticsearch/pull/52510#pullrequestreview-361934843", "createdAt": "2020-02-20T14:17:00Z", "commit": {"oid": "d2fe800d792aadf5e2b887bd8568517a2148cce4"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxNDoxNzowMFrOFsU_eg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxNDoxNzowMFrOFsU_eg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjAyNTU5NA==", "bodyText": "Please can you create this with realistic mappings and settings.  Something like:\n  \"settings\" : {\n    \"index\" : {\n      \"auto_expand_replicas\" : \"0-1\"\n    }\n  },\n  \"mappings\" : {\n    \"_doc\": {\n      \"_meta\": {\n        \"version\": \"7.0.0\"\n      },\n      \"enabled\": false\n    }\n  }", "url": "https://github.com/elastic/elasticsearch/pull/52510#discussion_r382025594", "createdAt": "2020-02-20T14:17:00Z", "author": {"login": "droberts195"}, "path": "x-pack/qa/rolling-upgrade/src/test/resources/rest-api-spec/test/old_cluster/30_ml_jobs_crud.yml", "diffHunk": "@@ -1,3 +1,8 @@\n+setup:\n+  - do:\n+      indices.create:\n+        index: .ml-state", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d2fe800d792aadf5e2b887bd8568517a2148cce4"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "213ea47c572f12a90e952a1514c7906a4ee8d30e", "author": {"user": {"login": "przemekwitek", "name": "Przemys\u0142aw Witek"}}, "url": "https://github.com/elastic/elasticsearch/commit/213ea47c572f12a90e952a1514c7906a4ee8d30e", "committedDate": "2020-02-20T15:28:17Z", "message": "Create .ml-state index in the setup phase of BWC tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d2fe800d792aadf5e2b887bd8568517a2148cce4", "author": {"user": {"login": "przemekwitek", "name": "Przemys\u0142aw Witek"}}, "url": "https://github.com/elastic/elasticsearch/commit/d2fe800d792aadf5e2b887bd8568517a2148cce4", "committedDate": "2020-02-20T14:11:50Z", "message": "Create .ml-state index in the setup phase of BWC tests"}, "afterCommit": {"oid": "213ea47c572f12a90e952a1514c7906a4ee8d30e", "author": {"user": {"login": "przemekwitek", "name": "Przemys\u0142aw Witek"}}, "url": "https://github.com/elastic/elasticsearch/commit/213ea47c572f12a90e952a1514c7906a4ee8d30e", "committedDate": "2020-02-20T15:28:17Z", "message": "Create .ml-state index in the setup phase of BWC tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "98cc582b696ae3517237f683799a47f59b0699d3", "author": {"user": {"login": "przemekwitek", "name": "Przemys\u0142aw Witek"}}, "url": "https://github.com/elastic/elasticsearch/commit/98cc582b696ae3517237f683799a47f59b0699d3", "committedDate": "2020-02-20T16:14:18Z", "message": "Make index creation idempotent"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2424, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}