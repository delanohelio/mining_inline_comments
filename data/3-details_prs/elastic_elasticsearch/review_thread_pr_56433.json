{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE1Mjc0ODkz", "number": 56433, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQxNDo1NDoxMVrOD6q1qA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQxNToyNToyNlrOD6rhqw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYyODQ1ODY0OnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/elasticsearch/common/LocalTimeOffset.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQxNDo1NDoxMVrOGSob-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQxNDo1NDoxMVrOGSob-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjE5MDA3NQ==", "bodyText": "This is the actual bug fix.", "url": "https://github.com/elastic/elasticsearch/pull/56433#discussion_r422190075", "createdAt": "2020-05-08T14:54:11Z", "author": {"login": "nik9000"}, "path": "server/src/main/java/org/elasticsearch/common/LocalTimeOffset.java", "diffHunk": "@@ -560,6 +563,11 @@ private static LocalTimeOffset checkForFixedZone(ZoneId zone, ZoneRules rules) {\n         if (false == itr.hasNext()) {\n             if (minSecond < t.toEpochSecond() && t.toEpochSecond() < maxSecond) {\n                 transitions.add(t);\n+                /*\n+                 * Sometimes the rules duplicate the transitions. And\n+                 * duplicates confuse us. So we have to skip past them.\n+                 */\n+                minSecond = t.toEpochSecond() + 1;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1bf39c7fc32d34ae05fe84080ed6fa3d9e535766"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYyODU3MTMxOnYy", "diffSide": "RIGHT", "path": "server/src/test/java/org/elasticsearch/common/LocalTimeOffsetTests.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQxNToyNToyNlrOGSpgQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQxNToyNToyNlrOGSpgQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIwNzU1NA==", "bodyText": "I don't understand the phrase \"transitions overlap its rules\"", "url": "https://github.com/elastic/elasticsearch/pull/56433#discussion_r422207554", "createdAt": "2020-05-08T15:25:26Z", "author": {"login": "not-napoleon"}, "path": "server/src/test/java/org/elasticsearch/common/LocalTimeOffsetTests.java", "diffHunk": "@@ -155,6 +154,22 @@ public void testLastTransitionWithoutRules() {\n         assertRoundingAtOffset(lookup.lookup(time), time, TimeUnit.MINUTES.toMillis(345));\n     }\n \n+    public void testLastTransitionOverlapsRules() {\n+        /*\n+         * America/Tijuana's transitions overlap its rules and we have to make", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a894a8fd45877a7519fbb8a8c1970bf9bb9bfbea"}, "originalPosition": 19}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 655, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}