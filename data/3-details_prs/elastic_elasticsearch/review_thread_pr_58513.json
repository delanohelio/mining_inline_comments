{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM5NDIyOTk5", "number": 58513, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxOTo0OTo0N1rOEIgYCQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxOTo0OTo0N1rOEIgYCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3MzU0NTA1OnYy", "diffSide": "RIGHT", "path": "docs/reference/snapshot-restore/restore-snapshot.asciidoc", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxOTo0OTo0N1rOGogvFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQyMDowODo1M1rOGohWCA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTEzMjU2NA==", "bodyText": "Nit: It's either both singular restored-log and .ds-restored-log-000005 or both plural.", "url": "https://github.com/elastic/elasticsearch/pull/58513#discussion_r445132564", "createdAt": "2020-06-24T19:49:47Z", "author": {"login": "danhermann"}, "path": "docs/reference/snapshot-restore/restore-snapshot.asciidoc", "diffHunk": "@@ -29,23 +25,57 @@ A snapshot can be restored using the following command:\n POST /_snapshot/my_backup/snapshot_1/_restore\n -----------------------------------\n \n-By default, all indices in the snapshot are restored, and the cluster state is\n-*not* restored. It's possible to select indices that should be restored as well\n+By default, all data streams and indices in the snapshot are restored, but the cluster state is\n+*not* restored. It's possible to select specific data streams or indices that should be restored as well\n as to allow the global cluster state from being restored by using `indices` and\n-`include_global_state` options in the restore request body. The list of indices\n-supports <<multi-index,multi index syntax>>. The `rename_pattern`\n-and `rename_replacement` options can be also used to rename indices on restore\n+`include_global_state` options in the restore request body. The list\n+supports <<multi-index,multi index syntax>>.\n+\n+[WARNING]\n+====\n+Each data stream requires an associated\n+<<create-a-data-stream-template,composable template>>. The stream uses this\n+template to create new backing indices.\n+\n+When restoring a data stream, ensure a matching template exists for the stream.\n+You can do this using one of the following methods:\n+\n+* Check for existing templates that match the stream. If no matching template\n+  exists, <<create-a-data-stream-template,create one>>.\n+\n+* Restore a global cluster state that includes a matching template for the\n+  stream.\n+\n+If no composable template matches a data stream, the stream cannot\n+<<manually-roll-over-a-data-stream,roll over>> or create new backing indices.\n+====\n+\n+The `rename_pattern`\n+and `rename_replacement` options can be also used to rename data streams and indices on restore\n using regular expression that supports referencing the original text as\n explained\n http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html#appendReplacement(java.lang.StringBuffer,%20java.lang.String)[here].\n+\n+If you rename a restored data stream, its backing indices are also\n+renamed. For example, if you rename the `logs` data stream to `restored-log`,\n+the backing index `.ds-logs-000005` is renamed to `.ds-restored-logs-000005`.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "30b1767393fdb7de1744a4863b11b977c4b48332"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTE0MjUzNg==", "bodyText": "Thanks for catching this. Fixed.", "url": "https://github.com/elastic/elasticsearch/pull/58513#discussion_r445142536", "createdAt": "2020-06-24T20:08:53Z", "author": {"login": "jrodewig"}, "path": "docs/reference/snapshot-restore/restore-snapshot.asciidoc", "diffHunk": "@@ -29,23 +25,57 @@ A snapshot can be restored using the following command:\n POST /_snapshot/my_backup/snapshot_1/_restore\n -----------------------------------\n \n-By default, all indices in the snapshot are restored, and the cluster state is\n-*not* restored. It's possible to select indices that should be restored as well\n+By default, all data streams and indices in the snapshot are restored, but the cluster state is\n+*not* restored. It's possible to select specific data streams or indices that should be restored as well\n as to allow the global cluster state from being restored by using `indices` and\n-`include_global_state` options in the restore request body. The list of indices\n-supports <<multi-index,multi index syntax>>. The `rename_pattern`\n-and `rename_replacement` options can be also used to rename indices on restore\n+`include_global_state` options in the restore request body. The list\n+supports <<multi-index,multi index syntax>>.\n+\n+[WARNING]\n+====\n+Each data stream requires an associated\n+<<create-a-data-stream-template,composable template>>. The stream uses this\n+template to create new backing indices.\n+\n+When restoring a data stream, ensure a matching template exists for the stream.\n+You can do this using one of the following methods:\n+\n+* Check for existing templates that match the stream. If no matching template\n+  exists, <<create-a-data-stream-template,create one>>.\n+\n+* Restore a global cluster state that includes a matching template for the\n+  stream.\n+\n+If no composable template matches a data stream, the stream cannot\n+<<manually-roll-over-a-data-stream,roll over>> or create new backing indices.\n+====\n+\n+The `rename_pattern`\n+and `rename_replacement` options can be also used to rename data streams and indices on restore\n using regular expression that supports referencing the original text as\n explained\n http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html#appendReplacement(java.lang.StringBuffer,%20java.lang.String)[here].\n+\n+If you rename a restored data stream, its backing indices are also\n+renamed. For example, if you rename the `logs` data stream to `restored-log`,\n+the backing index `.ds-logs-000005` is renamed to `.ds-restored-logs-000005`.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTEzMjU2NA=="}, "originalCommit": {"oid": "30b1767393fdb7de1744a4863b11b977c4b48332"}, "originalPosition": 53}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1422, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}