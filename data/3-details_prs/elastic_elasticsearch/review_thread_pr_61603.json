{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc0MTAzNTQz", "number": 61603, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxOToyMTowOFrOEctwgQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxOTozNDoxOFrOEcuBaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk4NTQ1MjgxOnYy", "diffSide": "RIGHT", "path": "docs/reference/release-notes/7.9.asciidoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxOToyMTowOFrOHHaZew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxOToyMTowOFrOHHaZew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzUzNDU4Nw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              forced refreshes, meaning that this memory manifests in Elasticsearch under\n          \n          \n            \n              forced refreshes, meaning that this memory leak manifests in Elasticsearch under", "url": "https://github.com/elastic/elasticsearch/pull/61603#discussion_r477534587", "createdAt": "2020-08-26T19:21:08Z", "author": {"login": "DaveCTurner"}, "path": "docs/reference/release-notes/7.9.asciidoc", "diffHunk": "@@ -29,6 +29,23 @@ find out about the issue after upgrading then reindexing is required to recover.\n Full details of the mitigations are in\n {ml-docs}/ml-troubleshooting.html#ml-troubleshooting-mappings[Upgrade to 7.9.0 causes incorrect mappings].\n \n+* Lucene 8.6.0, on which Elasticsearch 7.9.0 is based,\n+  https://issues.apache.org/jira/browse/LUCENE-9478[contains a memory\n+  leak]. This memory leak manifests in Elasticsearch when a single document is\n+  updated repeatedly with a forced refresh. The cluster state storage layer in\n+  Elasticsearch is based on Lucene and does use single-document updates with\n+  forced refreshes, meaning that this memory manifests in Elasticsearch under", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e282e2ddd017f268fe1921a90347b20ce81fca81"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk4NTQ1MzkzOnYy", "diffSide": "RIGHT", "path": "docs/reference/release-notes/7.9.asciidoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxOToyMTozMlrOHHaaMg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxOToyMTozMlrOHHaaMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzUzNDc3MA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              out of memory errors. A workaround is to restart any nodes exhibiting these\n          \n          \n            \n              out-of-memory errors. A workaround is to restart any nodes exhibiting these", "url": "https://github.com/elastic/elasticsearch/pull/61603#discussion_r477534770", "createdAt": "2020-08-26T19:21:32Z", "author": {"login": "DaveCTurner"}, "path": "docs/reference/release-notes/7.9.asciidoc", "diffHunk": "@@ -29,6 +29,23 @@ find out about the issue after upgrading then reindexing is required to recover.\n Full details of the mitigations are in\n {ml-docs}/ml-troubleshooting.html#ml-troubleshooting-mappings[Upgrade to 7.9.0 causes incorrect mappings].\n \n+* Lucene 8.6.0, on which Elasticsearch 7.9.0 is based,\n+  https://issues.apache.org/jira/browse/LUCENE-9478[contains a memory\n+  leak]. This memory leak manifests in Elasticsearch when a single document is\n+  updated repeatedly with a forced refresh. The cluster state storage layer in\n+  Elasticsearch is based on Lucene and does use single-document updates with\n+  forced refreshes, meaning that this memory manifests in Elasticsearch under\n+  normal conditions. It also manifests when user-controlled workloads update a\n+  single document in an index repeatedly with a forced refresh. In both cases,\n+  the memory leak is around 500 bytes per update, so it does take some time for\n+  the leak to show any meaningful impact on the system. Symptoms of this memory\n+  leak are the size of the used heap slowly rising over time, requests\n+  eventually being rejected by the real memory circuit breaker, and potentially\n+  out of memory errors. A workaround is to restart any nodes exhibiting these", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e282e2ddd017f268fe1921a90347b20ce81fca81"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk4NTQ5NjA5OnYy", "diffSide": "RIGHT", "path": "docs/reference/release-notes/7.9.asciidoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxOTozNDoxOFrOHHa0Ig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxOTozNDoxOFrOHHa0Ig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzU0MTQxMA==", "bodyText": "We use flush not refresh in the cluster state storage. But I think it's okay to leave it as is.", "url": "https://github.com/elastic/elasticsearch/pull/61603#discussion_r477541410", "createdAt": "2020-08-26T19:34:18Z", "author": {"login": "dnhatn"}, "path": "docs/reference/release-notes/7.9.asciidoc", "diffHunk": "@@ -29,6 +29,23 @@ find out about the issue after upgrading then reindexing is required to recover.\n Full details of the mitigations are in\n {ml-docs}/ml-troubleshooting.html#ml-troubleshooting-mappings[Upgrade to 7.9.0 causes incorrect mappings].\n \n+* Lucene 8.6.0, on which Elasticsearch 7.9.0 is based,\n+  https://issues.apache.org/jira/browse/LUCENE-9478[contains a memory\n+  leak]. This memory leak manifests in Elasticsearch when a single document is\n+  updated repeatedly with a forced refresh. The cluster state storage layer in\n+  Elasticsearch is based on Lucene and does use single-document updates with\n+  forced refreshes, meaning that this memory leak manifests in Elasticsearch under", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a4873dade24095b2b9c3b901e44e548330fcd729"}, "originalPosition": 9}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 734, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}