{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAxOTU2NjE4", "number": 55071, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQwODozOTo0N1rODx-OMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQwODozOTo0N1rODx-OMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUzNzI2MjU3OnYy", "diffSide": "RIGHT", "path": "docs/reference/eql/functions.asciidoc", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQwODozOTo0N1rOGFvoIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQxNTowNDoxNVrOGF-JdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODY3NjM4Ng==", "bodyText": "Could you add an example with a negative offset?", "url": "https://github.com/elastic/elasticsearch/pull/55071#discussion_r408676386", "createdAt": "2020-04-15T08:39:47Z", "author": {"login": "astefan"}, "path": "docs/reference/eql/functions.asciidoc", "diffHunk": "@@ -207,6 +208,110 @@ field datatypes:\n *Returns:* boolean or `null`\n ====\n \n+[discrete]\n+[[eql-fn-indexof]]\n+=== `indexOf`\n+\n+Returns the first position of a provided substring in a source string.\n+\n+If an optional start position is provided, this function returns the first\n+occurrence of the substring at or after the start position.\n+\n+[%collapsible]\n+====\n+*Example*\n+[source,eql]\n+----\n+// url.domain = \"subdomain.example.com\"\n+indexOf(url.domain, \".\")        // returns 9\n+indexOf(url.domain, \".\", 9)     // returns 9\n+indexOf(url.domain, \".\", 10)    // returns 17\n+\n+// empty strings\n+indexOf(\"\", \"\")                 // returns 0\n+indexOf(url.domain, \"\")         // returns 0\n+indexOf(url.domain, \"\", 9)      // returns 9\n+indexOf(url.domain, \"\", 10)     // returns 10\n+\n+// missing substrings\n+indexOf(url.domain, \"z\")        // returns null\n+indexOf(url.domain, \"z\", 9)     // returns null\n+\n+// start position is higher than string length\n+indexOf(url.domain, \".\", 30)    // returns null\n+\n+// null handling\n+indexOf(null, \".\", 9)           // returns null\n+indexOf(url.domain, null, 9)    // returns null\n+indexOf(url.domain, \".\", null)  // returns null\n+----\n+\n+*Syntax*\n+[source,txt]\n+----\n+indexOf(<source>, <substring>[, <start_pos>])\n+----\n+\n+*Parameters*\n+\n+`<source>`::\n++\n+--\n+(Required, string or `null`)\n+Source string. If `null`, the function returns `null`.\n+\n+If using a field as the argument, this parameter supports only the following\n+field datatypes:\n+\n+* <<keyword,`keyword`>>\n+* <<constant-keyword,`constant_keyword`>>\n+* <<text,`text`>> field with a <<keyword,`keyword`>> or\n+  <<constant-keyword,`constant_keyword`>> sub-field\n+--\n+\n+`<substring>`::\n++\n+--\n+(Required, string or `null`)\n+Substring to search for.\n+\n+If this argument is `null` or the `<source>` string does not contain this\n+substring, the function returns `null`. Empty strings (`\"\"`) return the\n+`<start_pos>`, which defaults to `0`.\n+\n+If using a field as the argument, this parameter supports only the following\n+field datatypes:\n+\n+* <<keyword,`keyword`>>\n+* <<constant-keyword,`constant_keyword`>>\n+* <<text,`text`>> field with a <<keyword,`keyword`>> or\n+  <<constant-keyword,`constant_keyword`>> sub-field\n+--\n+\n+`<start_pos>`::\n++\n+--\n+(Optional, integer or `null`)\n+Starting position for matching. The function will not return positions before\n+this one. Defaults to `0`.\n+\n+Positions are zero-indexed. Negative offsets are supported.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ff34add2acda85fb6eff6c7316c6f342f52dafa8"}, "originalPosition": 99}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODkxNDI5Mg==", "bodyText": "Sure thing. Added some examples with db8e027.", "url": "https://github.com/elastic/elasticsearch/pull/55071#discussion_r408914292", "createdAt": "2020-04-15T15:04:15Z", "author": {"login": "jrodewig"}, "path": "docs/reference/eql/functions.asciidoc", "diffHunk": "@@ -207,6 +208,110 @@ field datatypes:\n *Returns:* boolean or `null`\n ====\n \n+[discrete]\n+[[eql-fn-indexof]]\n+=== `indexOf`\n+\n+Returns the first position of a provided substring in a source string.\n+\n+If an optional start position is provided, this function returns the first\n+occurrence of the substring at or after the start position.\n+\n+[%collapsible]\n+====\n+*Example*\n+[source,eql]\n+----\n+// url.domain = \"subdomain.example.com\"\n+indexOf(url.domain, \".\")        // returns 9\n+indexOf(url.domain, \".\", 9)     // returns 9\n+indexOf(url.domain, \".\", 10)    // returns 17\n+\n+// empty strings\n+indexOf(\"\", \"\")                 // returns 0\n+indexOf(url.domain, \"\")         // returns 0\n+indexOf(url.domain, \"\", 9)      // returns 9\n+indexOf(url.domain, \"\", 10)     // returns 10\n+\n+// missing substrings\n+indexOf(url.domain, \"z\")        // returns null\n+indexOf(url.domain, \"z\", 9)     // returns null\n+\n+// start position is higher than string length\n+indexOf(url.domain, \".\", 30)    // returns null\n+\n+// null handling\n+indexOf(null, \".\", 9)           // returns null\n+indexOf(url.domain, null, 9)    // returns null\n+indexOf(url.domain, \".\", null)  // returns null\n+----\n+\n+*Syntax*\n+[source,txt]\n+----\n+indexOf(<source>, <substring>[, <start_pos>])\n+----\n+\n+*Parameters*\n+\n+`<source>`::\n++\n+--\n+(Required, string or `null`)\n+Source string. If `null`, the function returns `null`.\n+\n+If using a field as the argument, this parameter supports only the following\n+field datatypes:\n+\n+* <<keyword,`keyword`>>\n+* <<constant-keyword,`constant_keyword`>>\n+* <<text,`text`>> field with a <<keyword,`keyword`>> or\n+  <<constant-keyword,`constant_keyword`>> sub-field\n+--\n+\n+`<substring>`::\n++\n+--\n+(Required, string or `null`)\n+Substring to search for.\n+\n+If this argument is `null` or the `<source>` string does not contain this\n+substring, the function returns `null`. Empty strings (`\"\"`) return the\n+`<start_pos>`, which defaults to `0`.\n+\n+If using a field as the argument, this parameter supports only the following\n+field datatypes:\n+\n+* <<keyword,`keyword`>>\n+* <<constant-keyword,`constant_keyword`>>\n+* <<text,`text`>> field with a <<keyword,`keyword`>> or\n+  <<constant-keyword,`constant_keyword`>> sub-field\n+--\n+\n+`<start_pos>`::\n++\n+--\n+(Optional, integer or `null`)\n+Starting position for matching. The function will not return positions before\n+this one. Defaults to `0`.\n+\n+Positions are zero-indexed. Negative offsets are supported.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODY3NjM4Ng=="}, "originalCommit": {"oid": "ff34add2acda85fb6eff6c7316c6f342f52dafa8"}, "originalPosition": 99}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1103, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}