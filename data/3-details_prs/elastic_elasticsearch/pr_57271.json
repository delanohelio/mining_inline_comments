{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI0MzQzNjc1", "number": 57271, "title": "Normalized prefix for rollover API", "bodyText": "It fixes the issue #53388\nby normalizing prefix at index creation request itself\n\n\nHave you signed the contributor license agreement?\nHave you followed the contributor guidelines?\nIf submitting code, have you built your formula locally prior to submission with gradle check?\nIf submitting code, is your pull request against master? Unless there is a good reason otherwise, we prefer pull requests against master and will backport as needed.\nIf submitting code, have you checked that your submission is for an OS and architecture that we support?\nIf you are submitting this code for a class then read our policy for that.", "createdAt": "2020-05-28T08:51:49Z", "url": "https://github.com/elastic/elasticsearch/pull/57271", "merged": true, "mergeCommit": {"oid": "69e1c066f84da2bf846013320531cad0a196c35b"}, "closed": true, "closedAt": "2020-06-16T14:08:59Z", "author": {"login": "Gaurav614"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABclpy6iAH2gAyNDI0MzQzNjc1OjJlMzMxNzFkNjY5NmU0YWUzZTNlNjA4MmYyMWI3ZTE4NjE0OWE5MjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcrnLYIgH2gAyNDI0MzQzNjc1OjM5ZTJjODUxMTljNGE3YjlkZDU5NGVlYTk1YmNlNGQ4MmY4ZTRkYTA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2e33171d6696e4ae3e3e6082f21b7e186149a926", "author": {"user": {"login": "Gaurav614", "name": "Gaurav Chandani"}}, "url": "https://github.com/elastic/elasticsearch/commit/2e33171d6696e4ae3e3e6082f21b7e186149a926", "committedDate": "2020-05-28T08:43:00Z", "message": "Normalized prefix for rollover API\n\nIt fixes the issue https://github.com/elastic/elasticsearch/issues/53388\nby normalizing prefix at index creation request itself"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyMTg2OTEx", "url": "https://github.com/elastic/elasticsearch/pull/57271#pullrequestreview-422186911", "createdAt": "2020-06-01T21:14:18Z", "commit": {"oid": "2e33171d6696e4ae3e3e6082f21b7e186149a926"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQyMToxNDoxOFrOGdaYDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQyMToxNDo1NFrOGdaZMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzQ5NDAzMA==", "bodyText": "I think I'd prefer a dedicated test for this, just so that it doesn't get accidentally removed and the behavior reverted in the future, could you add a test for this? (it can basically be a copy of this test with a descriptive name)", "url": "https://github.com/elastic/elasticsearch/pull/57271#discussion_r433494030", "createdAt": "2020-06-01T21:14:18Z", "author": {"login": "dakrone"}, "path": "server/src/internalClusterTest/java/org/elasticsearch/action/admin/indices/rollover/RolloverIT.java", "diffHunk": "@@ -154,7 +154,7 @@ public void testRolloverWithIndexSettings() throws Exception {\n         indexDoc(\"test_index-2\", \"1\", \"field\", \"value\");\n         flush(\"test_index-2\");\n         final Settings settings = Settings.builder()\n-            .put(IndexMetadata.SETTING_NUMBER_OF_SHARDS, 1)\n+            .put(\"number_of_shards\", 1) // testing without \"index\" prefix", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2e33171d6696e4ae3e3e6082f21b7e186149a926"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzQ5NDMyMg==", "bodyText": "Calling this \"apply\" I think is a little misleading, I think normalizeRequestSettings would be a better name for this method", "url": "https://github.com/elastic/elasticsearch/pull/57271#discussion_r433494322", "createdAt": "2020-06-01T21:14:54Z", "author": {"login": "dakrone"}, "path": "server/src/main/java/org/elasticsearch/cluster/metadata/MetadataCreateIndexService.java", "diffHunk": "@@ -306,12 +303,20 @@ public void onFailure(String source, Exception e) {\n             });\n     }\n \n+    private void applyCreateIndexRequestInternal(CreateIndexClusterStateUpdateRequest createIndexClusterStateRequest){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2e33171d6696e4ae3e3e6082f21b7e186149a926"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "96f381c38aa1fc115f3fc062375002ebae9893c5", "author": {"user": {"login": "Gaurav614", "name": "Gaurav Chandani"}}, "url": "https://github.com/elastic/elasticsearch/commit/96f381c38aa1fc115f3fc062375002ebae9893c5", "committedDate": "2020-06-10T12:47:26Z", "message": "Merge branch 'master' into fix_rollover_bug"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a7ecb88cffa0f856b634922f86e8789879cbc45", "author": {"user": {"login": "Gaurav614", "name": "Gaurav Chandani"}}, "url": "https://github.com/elastic/elasticsearch/commit/3a7ecb88cffa0f856b634922f86e8789879cbc45", "committedDate": "2020-06-10T12:48:28Z", "message": "Added new Test case and renamed methods"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI4NDcyOTk0", "url": "https://github.com/elastic/elasticsearch/pull/57271#pullrequestreview-428472994", "createdAt": "2020-06-10T22:31:56Z", "commit": {"oid": "3a7ecb88cffa0f856b634922f86e8789879cbc45"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1f68cb6bad2d10e865d1289ed29ff940b23a4a5b", "author": {"user": {"login": "Gaurav614", "name": "Gaurav Chandani"}}, "url": "https://github.com/elastic/elasticsearch/commit/1f68cb6bad2d10e865d1289ed29ff940b23a4a5b", "committedDate": "2020-06-12T12:02:08Z", "message": "Fixed checkstyle errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba69fe1be77da37440a189443db408f9af1195ca", "author": {"user": {"login": "Gaurav614", "name": "Gaurav Chandani"}}, "url": "https://github.com/elastic/elasticsearch/commit/ba69fe1be77da37440a189443db408f9af1195ca", "committedDate": "2020-06-12T13:21:26Z", "message": "Merge branch 'master' into fix_rollover_bug"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "891e0c62858cadedb3710de2202f89b0345a22ae", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/891e0c62858cadedb3710de2202f89b0345a22ae", "committedDate": "2020-06-12T19:18:56Z", "message": "Merge branch 'master' into fix_rollover_bug"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "39e2c85119c4a7b9dd594eea95bce4d82f8e4da0", "author": {"user": {"login": "dakrone", "name": "Lee Hinman"}}, "url": "https://github.com/elastic/elasticsearch/commit/39e2c85119c4a7b9dd594eea95bce4d82f8e4da0", "committedDate": "2020-06-15T21:03:33Z", "message": "Fix checkstyle in MetadataRolloverServiceTests"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4095, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}