{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA0Mzk4NjM0", "number": 63781, "title": "[DOCS] Add tips for num_top_classes classification parameter", "bodyText": "Related to elastic/kibana#80003\nThis PR adds more information to the create data frame analytics job API about the impact of setting num_top_classes to 0 or -1.\nPreview\nhttps://elasticsearch_63781.docs-preview.app.elstc.co/guide/en/elasticsearch/reference/master/put-dfanalytics.html", "createdAt": "2020-10-15T21:29:41Z", "url": "https://github.com/elastic/elasticsearch/pull/63781", "merged": true, "mergeCommit": {"oid": "a00c7a2b6c0fcdfa73e5b0dde7abc69295dea019"}, "closed": true, "closedAt": "2020-10-21T16:27:13Z", "author": {"login": "lcawl"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdS4pKbgH2gAyNTA0Mzk4NjM0OmZlNTIyMDEwYzM4M2FjODBiMDEzMjUzZDI3YTc2ZTcxZjk5NmI1MDg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdUvCbvgH2gAyNTA0Mzk4NjM0OjUxZjExNWM5ZDI5Yzk1NzMwNGQ5OTA2YWJiMzkwZmRlM2MyMDVkNGE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "fe522010c383ac80b013253d27a76e71f996b508", "author": {"user": {"login": "lcawl", "name": "Lisa Cawley"}}, "url": "https://github.com/elastic/elasticsearch/commit/fe522010c383ac80b013253d27a76e71f996b508", "committedDate": "2020-10-15T21:27:31Z", "message": "[DOCS] Add tips for num_top_classes classification parameter"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ceda4250cc3023a56e4d868f44a353375ba8807d", "author": {"user": {"login": "lcawl", "name": "Lisa Cawley"}}, "url": "https://github.com/elastic/elasticsearch/commit/ceda4250cc3023a56e4d868f44a353375ba8807d", "committedDate": "2020-10-15T23:03:51Z", "message": "[DOCS] Fix link"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwMjE4MDQz", "url": "https://github.com/elastic/elasticsearch/pull/63781#pullrequestreview-510218043", "createdAt": "2020-10-16T07:29:11Z", "commit": {"oid": "ceda4250cc3023a56e4d868f44a353375ba8807d"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQwNzoyOToxMVrOHirQag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQwNzozMDozOVrOHirUpw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjEyMjM0Ng==", "bodyText": "\"no probabilities are reported\" is not strictly true as there is a prediction_probability field (sibling to top_classes) containing the probability of the most probable prediction.", "url": "https://github.com/elastic/elasticsearch/pull/63781#discussion_r506122346", "createdAt": "2020-10-16T07:29:11Z", "author": {"login": "przemekwitek"}, "path": "docs/reference/ml/df-analytics/apis/put-dfanalytics.asciidoc", "diffHunk": "@@ -136,9 +136,12 @@ include::{es-repo-dir}/ml/ml-shared.asciidoc[tag=max-trees]\n `num_top_classes`::::\n (Optional, integer)\n Defines the number of categories for which the predicted probabilities are\n-reported. It must be non-negative or -1 (which denotes all categories). If it is\n-greater than the total number of categories, the API reports all category\n-probabilities. Defaults to 2.\n+reported. It must be non-negative or -1. If it is -1 or greater than the total\n+number of categories, all category probabilities are reported and your\n+destination index increases in size accordingly. If it is 0, no probabilities\n+are reported and you cannot use the", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ceda4250cc3023a56e4d868f44a353375ba8807d"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjEyMzQzMQ==", "bodyText": "AucRoc cannot be used even if num_top_classes is greater than 0, but less than the total number of categories", "url": "https://github.com/elastic/elasticsearch/pull/63781#discussion_r506123431", "createdAt": "2020-10-16T07:30:39Z", "author": {"login": "przemekwitek"}, "path": "docs/reference/ml/df-analytics/apis/put-dfanalytics.asciidoc", "diffHunk": "@@ -136,9 +136,12 @@ include::{es-repo-dir}/ml/ml-shared.asciidoc[tag=max-trees]\n `num_top_classes`::::\n (Optional, integer)\n Defines the number of categories for which the predicted probabilities are\n-reported. It must be non-negative or -1 (which denotes all categories). If it is\n-greater than the total number of categories, the API reports all category\n-probabilities. Defaults to 2.\n+reported. It must be non-negative or -1. If it is -1 or greater than the total\n+number of categories, all category probabilities are reported and your\n+destination index increases in size accordingly. If it is 0, no probabilities", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ceda4250cc3023a56e4d868f44a353375ba8807d"}, "originalPosition": 9}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a5a952fc7ed1c8176d5d75216c1d5cf13ac3d586", "author": {"user": {"login": "lcawl", "name": "Lisa Cawley"}}, "url": "https://github.com/elastic/elasticsearch/commit/a5a952fc7ed1c8176d5d75216c1d5cf13ac3d586", "committedDate": "2020-10-16T22:33:27Z", "message": "[DOCS] Address feedback"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzNDU2NTY4", "url": "https://github.com/elastic/elasticsearch/pull/63781#pullrequestreview-513456568", "createdAt": "2020-10-21T08:59:28Z", "commit": {"oid": "a5a952fc7ed1c8176d5d75216c1d5cf13ac3d586"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQwODo1OToyOFrOHlhljQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQwODo1OToyOFrOHlhljQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTEwOTY0NQ==", "bodyText": "greater -> greater or equal\n?", "url": "https://github.com/elastic/elasticsearch/pull/63781#discussion_r509109645", "createdAt": "2020-10-21T08:59:28Z", "author": {"login": "przemekwitek"}, "path": "docs/reference/ml/df-analytics/apis/put-dfanalytics.asciidoc", "diffHunk": "@@ -136,9 +136,17 @@ include::{es-repo-dir}/ml/ml-shared.asciidoc[tag=max-trees]\n `num_top_classes`::::\n (Optional, integer)\n Defines the number of categories for which the predicted probabilities are\n-reported. It must be non-negative or -1 (which denotes all categories). If it is\n-greater than the total number of categories, the API reports all category\n-probabilities. Defaults to 2.\n+reported. It must be non-negative or -1. If it is -1 or greater than the total\n+number of categories, probabilities are reported for all categories; if you have\n+a large number of categories, there could be a significant effect on the size of your destination index. Defaults to 2. \n++\n+--\n+NOTE: To use the\n+{ml-docs}/ml-dfanalytics-evaluate.html#ml-dfanalytics-class-aucroc[AUC ROC evaluation method],\n+`num_top_classes` must be set to `-1` or a value greater than the total number", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a5a952fc7ed1c8176d5d75216c1d5cf13ac3d586"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "51f115c9d29c957304d9906abb390fde3c205d4a", "author": {"user": {"login": "lcawl", "name": "Lisa Cawley"}}, "url": "https://github.com/elastic/elasticsearch/commit/51f115c9d29c957304d9906abb390fde3c205d4a", "committedDate": "2020-10-21T15:23:55Z", "message": "Addresses feedback"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3866, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}