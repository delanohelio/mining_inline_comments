{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc5NzY1MTM4", "number": 52793, "title": "[ML] Add indices_options to datafeed config and update", "bodyText": "This adds a new configurable field called indices_options. This allows users to create or update the indices_options used when a datafeed reads from an index.\nThis is necessary for the following use cases:\n\nReading from frozen indices\nAllowing certain indices in multiple index patterns to not exist yet\n\nThese index options are available on datafeed creation and update. Users may specify them as URL parameters or within the configuration object.\ncloses #48056", "createdAt": "2020-02-25T19:42:50Z", "url": "https://github.com/elastic/elasticsearch/pull/52793", "merged": true, "mergeCommit": {"oid": "d7a63333b5683379cdff2493befcd88ddc70321c"}, "closed": true, "closedAt": "2020-02-27T17:22:36Z", "author": {"login": "benwtrent"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcH3e4uAH2gAyMzc5NzY1MTM4OmY2ZGI2ZGMxNzE0MmRhNTlhMDEyNGI4YmNmMmFmOTkwNjQxN2MwNGI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcIa-jcAH2gAyMzc5NzY1MTM4OmUyMWVhZTcwYTA3MDEwOTExNDcwZTU2NmEyNzA5YmMyZDM2NDE1YmU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f6db6dc17142da59a0124b8bcf2af9906417c04b", "author": {"user": {"login": "benwtrent", "name": "Benjamin Trent"}}, "url": "https://github.com/elastic/elasticsearch/commit/f6db6dc17142da59a0124b8bcf2af9906417c04b", "committedDate": "2020-02-25T19:42:04Z", "message": "[ML] Add indices_options to datafeed config"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0NzMzMTc4", "url": "https://github.com/elastic/elasticsearch/pull/52793#pullrequestreview-364733178", "createdAt": "2020-02-26T09:18:49Z", "commit": {"oid": "f6db6dc17142da59a0124b8bcf2af9906417c04b"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQwOToxODo1MFrOFujreQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQwOToyMDozM1rOFuju1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDM2MzM4NQ==", "bodyText": "Could we avoid checking if restRequest has those params? I think it'd work to do IndicesOptions indicesOptions = IndicesOptions.fromRequest(restRequest, SearchRequest.DEFAULT_INDICES_OPTIONS)", "url": "https://github.com/elastic/elasticsearch/pull/52793#discussion_r384363385", "createdAt": "2020-02-26T09:18:50Z", "author": {"login": "dimitris-athanasiou"}, "path": "x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/datafeeds/RestPutDatafeedAction.java", "diffHunk": "@@ -44,8 +46,15 @@ public String getName() {\n     @Override\n     protected RestChannelConsumer prepareRequest(RestRequest restRequest, NodeClient client) throws IOException {\n         String datafeedId = restRequest.param(DatafeedConfig.ID.getPreferredName());\n+        IndicesOptions indicesOptions = null;\n+        if (restRequest.hasParam(\"expand_wildcards\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f6db6dc17142da59a0124b8bcf2af9906417c04b"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDM2NDI0Ng==", "bodyText": "ditto", "url": "https://github.com/elastic/elasticsearch/pull/52793#discussion_r384364246", "createdAt": "2020-02-26T09:20:33Z", "author": {"login": "dimitris-athanasiou"}, "path": "x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/datafeeds/RestUpdateDatafeedAction.java", "diffHunk": "@@ -44,8 +46,15 @@ public String getName() {\n     @Override\n     protected RestChannelConsumer prepareRequest(RestRequest restRequest, NodeClient client) throws IOException {\n         String datafeedId = restRequest.param(DatafeedConfig.ID.getPreferredName());\n+        IndicesOptions indicesOptions = null;\n+        if (restRequest.hasParam(\"expand_wildcards\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f6db6dc17142da59a0124b8bcf2af9906417c04b"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2070eb87213af8185dc2300e84eb1338d6b81085", "author": {"user": {"login": "benwtrent", "name": "Benjamin Trent"}}, "url": "https://github.com/elastic/elasticsearch/commit/2070eb87213af8185dc2300e84eb1338d6b81085", "committedDate": "2020-02-26T15:34:27Z", "message": "addressing PR comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1MDQwMTU1", "url": "https://github.com/elastic/elasticsearch/pull/52793#pullrequestreview-365040155", "createdAt": "2020-02-26T16:17:43Z", "commit": {"oid": "2070eb87213af8185dc2300e84eb1338d6b81085"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "70caa0d60089458217a5da84048f8417f16b944c", "author": {"user": {"login": "benwtrent", "name": "Benjamin Trent"}}, "url": "https://github.com/elastic/elasticsearch/commit/70caa0d60089458217a5da84048f8417f16b944c", "committedDate": "2020-02-26T19:13:43Z", "message": "addressing PR comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f0ef5a7033f32119dc4fa1203796424984d0beb", "author": {"user": {"login": "benwtrent", "name": "Benjamin Trent"}}, "url": "https://github.com/elastic/elasticsearch/commit/9f0ef5a7033f32119dc4fa1203796424984d0beb", "committedDate": "2020-02-26T19:14:49Z", "message": "Merge remote-tracking branch 'upstream/master' into feature/ml-datafeed-add-indices_options"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1c9cd9519592bf91256d41be96e4d51da422c7d7", "author": {"user": {"login": "benwtrent", "name": "Benjamin Trent"}}, "url": "https://github.com/elastic/elasticsearch/commit/1c9cd9519592bf91256d41be96e4d51da422c7d7", "committedDate": "2020-02-26T19:22:22Z", "message": "reverting bad assertion"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1NDk2MTU0", "url": "https://github.com/elastic/elasticsearch/pull/52793#pullrequestreview-365496154", "createdAt": "2020-02-27T08:41:41Z", "commit": {"oid": "1c9cd9519592bf91256d41be96e4d51da422c7d7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e21eae70a07010911470e566a2709bc2d36415be", "author": {"user": {"login": "benwtrent", "name": "Benjamin Trent"}}, "url": "https://github.com/elastic/elasticsearch/commit/e21eae70a07010911470e566a2709bc2d36415be", "committedDate": "2020-02-27T13:03:20Z", "message": "mute for bwc"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2172, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}