{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg4Mjc2NDIz", "number": 53573, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQwODozOTowOFrODoO5zQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQwODozOTowOFrODoO5zQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzNTEzODA1OnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/sql/src/main/java/org/elasticsearch/xpack/sql/parser/ExpressionBuilder.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQwODozOTowOFrOF2qERQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxMDowOToxM1rOF2tBWw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjg1NjY0NQ==", "bodyText": "Since the pattern always has to be non-null, I think it would be better to report the error at the parser level instead of letting it propagate all the way to the tree which would be invalid anyway...\nJust like w do with pos below by throwing a ParsingException", "url": "https://github.com/elastic/elasticsearch/pull/53573#discussion_r392856645", "createdAt": "2020-03-16T08:39:08Z", "author": {"login": "costin"}, "path": "x-pack/plugin/sql/src/main/java/org/elasticsearch/xpack/sql/parser/ExpressionBuilder.java", "diffHunk": "@@ -263,6 +263,9 @@ public LikePattern visitPattern(PatternContext ctx) {\n         }\n \n         String pattern = string(ctx.value);\n+        if (pattern == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "09d24c77983cd31919706848c0f93ea31ca0a30e"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjg5MzQ0Mw==", "bodyText": "I thought about it and I kind of liked more the separation of Parsing to an illegalarg case.\nIn my mind null is acceptable in parsing but not for the evaluation of the expression.\nBut if you prefer the ParsingException I can also do.\n@astefan what do you think?", "url": "https://github.com/elastic/elasticsearch/pull/53573#discussion_r392893443", "createdAt": "2020-03-16T09:48:04Z", "author": {"login": "matriv"}, "path": "x-pack/plugin/sql/src/main/java/org/elasticsearch/xpack/sql/parser/ExpressionBuilder.java", "diffHunk": "@@ -263,6 +263,9 @@ public LikePattern visitPattern(PatternContext ctx) {\n         }\n \n         String pattern = string(ctx.value);\n+        if (pattern == null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjg1NjY0NQ=="}, "originalCommit": {"oid": "09d24c77983cd31919706848c0f93ea31ca0a30e"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjkwNTA1MQ==", "bodyText": "Where possible, the arguments should be checked as soon as possible - the whole method checks the validity of the pattern right after parsing - checking its existence is one that was missed.\nI see no advantages of postponing the check.", "url": "https://github.com/elastic/elasticsearch/pull/53573#discussion_r392905051", "createdAt": "2020-03-16T10:09:13Z", "author": {"login": "costin"}, "path": "x-pack/plugin/sql/src/main/java/org/elasticsearch/xpack/sql/parser/ExpressionBuilder.java", "diffHunk": "@@ -263,6 +263,9 @@ public LikePattern visitPattern(PatternContext ctx) {\n         }\n \n         String pattern = string(ctx.value);\n+        if (pattern == null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjg1NjY0NQ=="}, "originalCommit": {"oid": "09d24c77983cd31919706848c0f93ea31ca0a30e"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3253, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}