{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTExNDgwMjE5", "number": 64275, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxMjoyMzowN1rOEyySbg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxMjoyMzowN1rOEyySbg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxNjg4MTc0OnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/elasticsearch/node/Node.java", "isResolved": false, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxMjoyMzowN1rOHpnbLQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxMzoxMDowNlrOHppLBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzM5OTU5Nw==", "bodyText": "Doesn't this conflict with the comment just above?", "url": "https://github.com/elastic/elasticsearch/pull/64275#discussion_r513399597", "createdAt": "2020-10-28T12:23:07Z", "author": {"login": "pugnascotia"}, "path": "server/src/main/java/org/elasticsearch/node/Node.java", "diffHunk": "@@ -255,7 +256,8 @@\n      * Logger initialized in the ctor because if it were initialized statically\n      * then it wouldn't get the node name.\n      */\n-    private final Logger logger;\n+    private final Logger logger = LogManager.getLogger(Node.class);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "be9f1e34bb04a3f262fe3a699e1ab17d77933fc7"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzQxODU4MA==", "bodyText": "Good catch, I think the comment is unclear since it refers to static initialization, which is not what is happening here, this is merely instance field initialization, a normal part of instance construction. That is, I read the comment thinking it was explaining why the field is not a static field, as is often the case with loggers. I also think this comment should be located where the initialization needs to take place, rather than on the field itself since that's where someone is going to see the initialization and wonder why?", "url": "https://github.com/elastic/elasticsearch/pull/64275#discussion_r513418580", "createdAt": "2020-10-28T12:55:01Z", "author": {"login": "jasontedor"}, "path": "server/src/main/java/org/elasticsearch/node/Node.java", "diffHunk": "@@ -255,7 +256,8 @@\n      * Logger initialized in the ctor because if it were initialized statically\n      * then it wouldn't get the node name.\n      */\n-    private final Logger logger;\n+    private final Logger logger = LogManager.getLogger(Node.class);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzM5OTU5Nw=="}, "originalCommit": {"oid": "be9f1e34bb04a3f262fe3a699e1ab17d77933fc7"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzQyMjU4OA==", "bodyText": "Actually, I still think the change is correct and it's the comment that is unclear and confusing. I think the key is in fact that it be an instance field and not static. There is absolutely no practical difference between this field being initialized separately, and as the first line of the constructor.", "url": "https://github.com/elastic/elasticsearch/pull/64275#discussion_r513422588", "createdAt": "2020-10-28T13:01:23Z", "author": {"login": "jasontedor"}, "path": "server/src/main/java/org/elasticsearch/node/Node.java", "diffHunk": "@@ -255,7 +256,8 @@\n      * Logger initialized in the ctor because if it were initialized statically\n      * then it wouldn't get the node name.\n      */\n-    private final Logger logger;\n+    private final Logger logger = LogManager.getLogger(Node.class);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzM5OTU5Nw=="}, "originalCommit": {"oid": "be9f1e34bb04a3f262fe3a699e1ab17d77933fc7"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzQyMjY3Mw==", "bodyText": "I'm leaving the change as-is and will clean up the comment.", "url": "https://github.com/elastic/elasticsearch/pull/64275#discussion_r513422673", "createdAt": "2020-10-28T13:01:33Z", "author": {"login": "jasontedor"}, "path": "server/src/main/java/org/elasticsearch/node/Node.java", "diffHunk": "@@ -255,7 +256,8 @@\n      * Logger initialized in the ctor because if it were initialized statically\n      * then it wouldn't get the node name.\n      */\n-    private final Logger logger;\n+    private final Logger logger = LogManager.getLogger(Node.class);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzM5OTU5Nw=="}, "originalCommit": {"oid": "be9f1e34bb04a3f262fe3a699e1ab17d77933fc7"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzQyNzA5Mg==", "bodyText": "In fact, we could make this logger instance a static instance if we moved the node.name setting out of the Node class and into its own class. The current problem is that touching this setting initializes the class. If the logger were static, then it would initialize the logger too, prematurely. If the setting were moved out of this class, we could touch the setting without initializing the logger here. That should be a follow-up.", "url": "https://github.com/elastic/elasticsearch/pull/64275#discussion_r513427092", "createdAt": "2020-10-28T13:08:21Z", "author": {"login": "jasontedor"}, "path": "server/src/main/java/org/elasticsearch/node/Node.java", "diffHunk": "@@ -255,7 +256,8 @@\n      * Logger initialized in the ctor because if it were initialized statically\n      * then it wouldn't get the node name.\n      */\n-    private final Logger logger;\n+    private final Logger logger = LogManager.getLogger(Node.class);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzM5OTU5Nw=="}, "originalCommit": {"oid": "be9f1e34bb04a3f262fe3a699e1ab17d77933fc7"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzQyODIzMQ==", "bodyText": "I pushed 1053cfb.", "url": "https://github.com/elastic/elasticsearch/pull/64275#discussion_r513428231", "createdAt": "2020-10-28T13:10:06Z", "author": {"login": "jasontedor"}, "path": "server/src/main/java/org/elasticsearch/node/Node.java", "diffHunk": "@@ -255,7 +256,8 @@\n      * Logger initialized in the ctor because if it were initialized statically\n      * then it wouldn't get the node name.\n      */\n-    private final Logger logger;\n+    private final Logger logger = LogManager.getLogger(Node.class);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzM5OTU5Nw=="}, "originalCommit": {"oid": "be9f1e34bb04a3f262fe3a699e1ab17d77933fc7"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4155, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}