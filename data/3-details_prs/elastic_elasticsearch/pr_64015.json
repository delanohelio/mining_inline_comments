{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA3Nzk3NDU0", "number": 64015, "title": "Adjust defaults for tiered data roles", "bodyText": "This commit adjusts the defaults for the tiered data roles so that they are enabled by default, or if the node has the legacy data role. This ensures that the default experience is that the tiered data roles are enabled.\nTo fully specifiy the behavior for the tiered data roles then:\n\nstarting a new node with the defaults: enabled\nstarting a new node with node.roles configured: enabled if and only if the tiered data roles are explicitly configured, independently of the node having the data role\nstarting a new node with node.data enabled: enabled unless the tiered data roles are explicitly disabled\nstarting a new node with node.data disabled: disabled unless the tiered data roles are explicitly enabled", "createdAt": "2020-10-21T18:59:45Z", "url": "https://github.com/elastic/elasticsearch/pull/64015", "merged": true, "mergeCommit": {"oid": "117d79b5e92dd962ffebf8fb1bf700d67cf93cc6"}, "closed": true, "closedAt": "2020-10-27T16:47:15Z", "author": {"login": "jasontedor"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdUyEIOgH2gAyNTA3Nzk3NDU0OjVmMWQ5N2M0YmJjNDI3YjQyNDU3MmQxZWEwYzA5ZmI0NDgxNzVjOTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdWrOzDgH2gAyNTA3Nzk3NDU0OjZmOTMxOGRhYjlmN2IzZGJkNmVkNDQwM2RmMGVhZTA5ZDE3ODk0NTM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5f1d97c4bbc427b424572d1ea0c09fb448175c99", "author": {"user": {"login": "jasontedor", "name": "Jason Tedor"}}, "url": "https://github.com/elastic/elasticsearch/commit/5f1d97c4bbc427b424572d1ea0c09fb448175c99", "committedDate": "2020-10-21T18:55:29Z", "message": "Adjust defaults for tiered data roles\n\nThis commit adjusts the defaults for the tiered data roles so that they\nare enabled by default, or if the node has the legacy data role. This\nensures that the default experience is that the tiered data roles are\nenabled.\n\nTo fully specifiy the behavior for the tiered data roles then:\n - starting a new node with the defaults: enabled\n - starting a new node with node.roles configured: enabled if and only\n   if the tiered data roles are explicitly configured, independently\n   of the node having the data role\n - starting a new node with node.data enabled: enabled unless the\n   tiered data roles are explicitly disabled\n - starting a new node with node.data disabled: disabled unless the\n   tiered data roles are explicitly enabled"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb133218a441e9af3c51a94f37ed8d9e4248f22c", "author": {"user": {"login": "jasontedor", "name": "Jason Tedor"}}, "url": "https://github.com/elastic/elasticsearch/commit/eb133218a441e9af3c51a94f37ed8d9e4248f22c", "committedDate": "2020-10-21T19:35:39Z", "message": "Fix roles tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "45e070d4bbb04fa5856e42777fc7c7d5256ec8aa", "author": {"user": {"login": "jasontedor", "name": "Jason Tedor"}}, "url": "https://github.com/elastic/elasticsearch/commit/45e070d4bbb04fa5856e42777fc7c7d5256ec8aa", "committedDate": "2020-10-21T19:52:37Z", "message": "Fix imports"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1MDI1MDAw", "url": "https://github.com/elastic/elasticsearch/pull/64015#pullrequestreview-515025000", "createdAt": "2020-10-22T18:52:35Z", "commit": {"oid": "45e070d4bbb04fa5856e42777fc7c7d5256ec8aa"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQxODo1MjozNVrOHmvaxg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQxODo1MjozNVrOHmvaxg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDM4NDgzOA==", "bodyText": "probably outside the scope of this PR , but https://www.elastic.co/guide/en/elasticsearch/reference/master/cat-nodes.html needs to be updated with these abbreviations.", "url": "https://github.com/elastic/elasticsearch/pull/64015#discussion_r510384838", "createdAt": "2020-10-22T18:52:35Z", "author": {"login": "jakelandis"}, "path": "distribution/docker/src/test/resources/rest-api-spec/test/11_nodes.yml", "diffHunk": "@@ -7,7 +7,7 @@\n   - match:\n       $body: |\n         /  #ip                          heap.percent        ram.percent     cpu         load_1m                load_5m                load_15m               node.role           master          name\n-        ^  ((\\d{1,3}\\.){3}\\d{1,3}  \\s+  \\d+            \\s+  \\d*         \\s+ (-)?\\d* \\s+ ((-)?\\d*(\\.\\d+)?)? \\s+ ((-)?\\d*(\\.\\d+)?)?\\s+  ((-)?\\d*(\\.\\d+)?)? \\s+ (-|[dilmrt]{1,6}) \\s+ [-*x]     \\s+   (\\S+\\s?)+     \\n)+  $/\n+        ^  ((\\d{1,3}\\.){3}\\d{1,3}  \\s+  \\d+            \\s+  \\d*         \\s+ (-)?\\d* \\s+ ((-)?\\d*(\\.\\d+)?)? \\s+ ((-)?\\d*(\\.\\d+)?)?\\s+  ((-)?\\d*(\\.\\d+)?)? \\s+ (-|[cdhilmrstw]{1,10}) \\s+ [-*x]     \\s+   (\\S+\\s?)+     \\n)+  $/", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "45e070d4bbb04fa5856e42777fc7c7d5256ec8aa"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7ba29c374466c7c9820fdc67e5a5a6a9041f5533", "author": {"user": {"login": "jasontedor", "name": "Jason Tedor"}}, "url": "https://github.com/elastic/elasticsearch/commit/7ba29c374466c7c9820fdc67e5a5a6a9041f5533", "committedDate": "2020-10-27T15:56:15Z", "message": "Fix tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c27c877c8c77f3469f8690c8a12f027497113bf3", "author": {"user": {"login": "jasontedor", "name": "Jason Tedor"}}, "url": "https://github.com/elastic/elasticsearch/commit/c27c877c8c77f3469f8690c8a12f027497113bf3", "committedDate": "2020-10-27T16:02:28Z", "message": "Adjust docs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f9318dab9f7b3dbd6ed4403df0eae09d1789453", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/6f9318dab9f7b3dbd6ed4403df0eae09d1789453", "committedDate": "2020-10-27T16:05:39Z", "message": "Merge branch 'master' into tiered-data-role-defaults"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1076, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}