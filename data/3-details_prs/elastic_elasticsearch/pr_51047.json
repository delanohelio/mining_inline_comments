{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYzMTc4MzE3", "number": 51047, "title": "Fix NPE in PinnedQuery call to DisjunctionMaxScorer.", "bodyText": "The DisjunctionMaxScorer will throw a NullPointerException if advanceShallow is called and scoreMode != ScoreMode.TOP_SCORES.\nAdded code in the calling CappedScoreQuery to avoid making this call when not in the required score mode and test to reproduce the issue.", "createdAt": "2020-01-15T14:55:56Z", "url": "https://github.com/elastic/elasticsearch/pull/51047", "merged": true, "mergeCommit": {"oid": "f74e8aefc8e151f118b7081c2b4fe005e9c3fd26"}, "closed": true, "closedAt": "2020-01-15T18:29:38Z", "author": {"login": "markharwood"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb6nSqSgFqTM0MzMwMzQ5OQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABb6pNBWABqjI5NTE3MjU5MTU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQzMzAzNDk5", "url": "https://github.com/elastic/elasticsearch/pull/51047#pullrequestreview-343303499", "createdAt": "2020-01-15T15:28:35Z", "commit": {"oid": "939c531494f620de6db0c449a485235386cef401"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNVQxNToyODozNVrOFd8MzA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNVQxNToyODozNVrOFd8MzA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjkzOTM0MA==", "bodyText": "nit I prefer explicit names that don't require looking up github issues to understand what the test is testing\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public void testIssue51034() throws Exception {\n          \n          \n            \n                /**\n          \n          \n            \n                 * Test scoring the entire set of documents, which uses a slightly different logic when creating scorers.\n          \n          \n            \n                 */\n          \n          \n            \n                public void testExhaustiveScoring() throws Exception {", "url": "https://github.com/elastic/elasticsearch/pull/51047#discussion_r366939340", "createdAt": "2020-01-15T15:28:35Z", "author": {"login": "jpountz"}, "path": "x-pack/plugin/search-business-rules/src/test/java/org/elasticsearch/xpack/searchbusinessrules/PinnedQueryBuilderIT.java", "diffHunk": "@@ -141,6 +142,28 @@ public void testPinnedPromotions() throws Exception {\n \n     }\n \n+    public void testIssue51034() throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "939c531494f620de6db0c449a485235386cef401"}, "originalPosition": 12}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6a54b46b4c8385b7e31255e06c20b8047bb2e1eb", "author": {"user": {"login": "markharwood", "name": null}}, "url": "https://github.com/elastic/elasticsearch/commit/6a54b46b4c8385b7e31255e06c20b8047bb2e1eb", "committedDate": "2020-01-15T15:41:50Z", "message": "Update x-pack/plugin/search-business-rules/src/test/java/org/elasticsearch/xpack/searchbusinessrules/PinnedQueryBuilderIT.java\r\n\r\nChanged method name\n\nCo-Authored-By: Adrien Grand <jpountz@gmail.com>"}, "afterCommit": {"oid": "654d5fe5e7d7675fdf95c86830c40b4b9f47b7ab", "author": {"user": {"login": "markharwood", "name": null}}, "url": "https://github.com/elastic/elasticsearch/commit/654d5fe5e7d7675fdf95c86830c40b4b9f47b7ab", "committedDate": "2020-01-15T16:17:47Z", "message": "Rename test method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "92709509ed26e66c5923bac79fcdf8ab730cfc05", "author": {"user": {"login": "markharwood", "name": null}}, "url": "https://github.com/elastic/elasticsearch/commit/92709509ed26e66c5923bac79fcdf8ab730cfc05", "committedDate": "2020-01-15T17:42:40Z", "message": "Fix NPE in PinnedQuery call to DisjunctionMaxScorer.\nAdded test and fix that tests for score type.\nCloses #51034"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8986863973de6ef1c600076d80a36a01fc6c6652", "author": {"user": {"login": "markharwood", "name": null}}, "url": "https://github.com/elastic/elasticsearch/commit/8986863973de6ef1c600076d80a36a01fc6c6652", "committedDate": "2020-01-15T17:42:40Z", "message": "Rename test method"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "654d5fe5e7d7675fdf95c86830c40b4b9f47b7ab", "author": {"user": {"login": "markharwood", "name": null}}, "url": "https://github.com/elastic/elasticsearch/commit/654d5fe5e7d7675fdf95c86830c40b4b9f47b7ab", "committedDate": "2020-01-15T16:17:47Z", "message": "Rename test method"}, "afterCommit": {"oid": "8986863973de6ef1c600076d80a36a01fc6c6652", "author": {"user": {"login": "markharwood", "name": null}}, "url": "https://github.com/elastic/elasticsearch/commit/8986863973de6ef1c600076d80a36a01fc6c6652", "committedDate": "2020-01-15T17:42:40Z", "message": "Rename test method"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3108, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}