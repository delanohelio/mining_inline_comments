{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg5MDQyMzEz", "number": 53585, "title": "Add a QA project for identity provider module", "bodyText": "This adds a small QA project that starts up a cluster with the IdP\nenabled and performs a basic test of registering a service provider.\nIt also fixes a few bugs that were found along the way.", "createdAt": "2020-03-16T07:33:16Z", "url": "https://github.com/elastic/elasticsearch/pull/53585", "merged": true, "mergeCommit": {"oid": "8d17336332f274440ca7f12e1558cf88805b2b94"}, "closed": true, "closedAt": "2020-03-17T23:54:43Z", "author": {"login": "tvernum"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcNJfurAH2gAyMzg5MDQyMzEzOjA1OWNlODEwMGI1ZmU5MTI0NmY0ODNhOGU5NTZjNmE1OTNiM2M1OTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcOgLH4AFqTM3NTg2MTc2NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "059ce8100b5fe91246f483a8e956c6a593b3c593", "author": {"user": {"login": "tvernum", "name": "Tim Vernum"}}, "url": "https://github.com/elastic/elasticsearch/commit/059ce8100b5fe91246f483a8e956c6a593b3c593", "committedDate": "2020-03-13T05:30:54Z", "message": "Add a QA project for identity provider module\n\nThis adds a small QA project that starts up a cluster with the IdP\nenabled and performs a basic test of registering a service provider.\n\nIt also fixes a few bugs that were found along the way."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89fa148042b1493a70ed7a770444dd751be5f232", "author": {"user": {"login": "tvernum", "name": "Tim Vernum"}}, "url": "https://github.com/elastic/elasticsearch/commit/89fa148042b1493a70ed7a770444dd751be5f232", "committedDate": "2020-03-16T07:27:56Z", "message": "Merge branch 'feature-internal-idp' into idp/qa-project"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "09caec6d988b7dd94feba3701ecda424541c4467", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/09caec6d988b7dd94feba3701ecda424541c4467", "committedDate": "2020-03-17T02:38:36Z", "message": "Merge branch 'feature-internal-idp' into idp/qa-project"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1ODYxNzY1", "url": "https://github.com/elastic/elasticsearch/pull/53585#pullrequestreview-375861765", "createdAt": "2020-03-17T09:24:21Z", "commit": {"oid": "09caec6d988b7dd94feba3701ecda424541c4467"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QwOToyNDoyMVrOF3T6Rg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxMDoyNzowNFrOF3WHbg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzU0MjIxNA==", "bodyText": "nit suggestion : why not import static org.opensaml.saml.common.xml.SAMLConstants.SAML2_REDIRECT_BINDING_URI; ?", "url": "https://github.com/elastic/elasticsearch/pull/53585#discussion_r393542214", "createdAt": "2020-03-17T09:24:21Z", "author": {"login": "jkakavas"}, "path": "x-pack/plugin/identity-provider/qa/idp-rest-tests/src/test/java/org/elasticsearch/xpack/idp/ManageServiceProviderRestIT.java", "diffHunk": "@@ -0,0 +1,138 @@\n+/*\n+ * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n+ * or more contributor license agreements. Licensed under the Elastic License;\n+ * you may not use this file except in compliance with the Elastic License.\n+ */\n+package org.elasticsearch.xpack.idp;\n+\n+import org.elasticsearch.action.support.WriteRequest.RefreshPolicy;\n+import org.elasticsearch.client.Request;\n+import org.elasticsearch.client.Response;\n+import org.elasticsearch.client.ResponseException;\n+import org.elasticsearch.common.Strings;\n+import org.elasticsearch.common.xcontent.ObjectPath;\n+import org.elasticsearch.common.xcontent.json.JsonXContent;\n+import org.elasticsearch.xpack.idp.saml.sp.SamlServiceProviderIndex;\n+import org.elasticsearch.xpack.idp.saml.sp.SamlServiceProviderIndex.DocumentVersion;\n+\n+import java.io.IOException;\n+import java.net.URLEncoder;\n+import java.nio.charset.StandardCharsets;\n+import java.util.Map;\n+\n+import static org.hamcrest.Matchers.containsInAnyOrder;\n+import static org.hamcrest.Matchers.containsString;\n+import static org.hamcrest.Matchers.equalTo;\n+import static org.hamcrest.Matchers.greaterThanOrEqualTo;\n+import static org.hamcrest.Matchers.instanceOf;\n+import static org.hamcrest.Matchers.notNullValue;\n+\n+public class ManageServiceProviderRestIT extends IdpRestTestCase {\n+\n+    // From build.gradle\n+    private final String IDP_ENTITY_ID = \"https://idp.test.es.elasticsearch.org/\";\n+    // From SAMLConstants\n+    private final String REDIRECT_BINDING = \"urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "09caec6d988b7dd94feba3701ecda424541c4467"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzU3ODM1MA==", "bodyText": "\ud83d\udc4d", "url": "https://github.com/elastic/elasticsearch/pull/53585#discussion_r393578350", "createdAt": "2020-03-17T10:27:04Z", "author": {"login": "jkakavas"}, "path": "x-pack/plugin/identity-provider/src/main/java/org/elasticsearch/xpack/idp/saml/rest/action/RestDeleteSamlServiceProviderAction.java", "diffHunk": "@@ -49,7 +49,7 @@ protected RestChannelConsumer prepareRequest(RestRequest restRequest, NodeClient\n                 @Override\n                 public RestResponse buildResponse(DeleteSamlServiceProviderResponse response, XContentBuilder builder) throws Exception {\n                     response.toXContent(builder, restRequest);\n-                    return new BytesRestResponse(RestStatus.OK, builder);\n+                    return new BytesRestResponse(response.found() ? RestStatus.OK : RestStatus.NOT_FOUND, builder);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "09caec6d988b7dd94feba3701ecda424541c4467"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1432, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}