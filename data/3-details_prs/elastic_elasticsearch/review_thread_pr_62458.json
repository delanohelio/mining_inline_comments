{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg3OTg4MDQ2", "number": 62458, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxNTozMjowMVrOEkHIyQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxNTozNDo0NFrOEkHNdQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA2MzAxMTI5OnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/eql/qa/common/src/main/java/org/elasticsearch/test/eql/stats/RestEqlUsageTestCase.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxNTozMjowMVrOHS2muA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxNTozNzo0NVrOHS222Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTUzMTA2NA==", "bodyText": "Why \\\\\\\" and not just \\\"?", "url": "https://github.com/elastic/elasticsearch/pull/62458#discussion_r489531064", "createdAt": "2020-09-16T15:32:01Z", "author": {"login": "costin"}, "path": "x-pack/plugin/eql/qa/common/src/main/java/org/elasticsearch/test/eql/stats/RestEqlUsageTestCase.java", "diffHunk": "@@ -178,7 +178,7 @@ public void testEqlRestUsage() throws IOException {\n                 \"  [process where serial_event_id < 4] by exit_code\" + \n                 \"  [process where opcode == 1] by user\" + \n                 \"  [process where opcode == 2] by user\" + \n-                \"  [file where parent_process_name == 'file_delete_event'] by exit_code\" +\n+                \"  [file where parent_process_name == \\\\\\\"file_delete_event\\\\\\\"] by exit_code\" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f7c305baebb91ef12d9788b6e5e60b4a5e47181"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTUzNTE5Mw==", "bodyText": "It's because of the runEql() which constructs a json body, so with \\\" it's escaped in the java string but then it's interpreted as a closing \" in json.", "url": "https://github.com/elastic/elasticsearch/pull/62458#discussion_r489535193", "createdAt": "2020-09-16T15:37:45Z", "author": {"login": "matriv"}, "path": "x-pack/plugin/eql/qa/common/src/main/java/org/elasticsearch/test/eql/stats/RestEqlUsageTestCase.java", "diffHunk": "@@ -178,7 +178,7 @@ public void testEqlRestUsage() throws IOException {\n                 \"  [process where serial_event_id < 4] by exit_code\" + \n                 \"  [process where opcode == 1] by user\" + \n                 \"  [process where opcode == 2] by user\" + \n-                \"  [file where parent_process_name == 'file_delete_event'] by exit_code\" +\n+                \"  [file where parent_process_name == \\\\\\\"file_delete_event\\\\\\\"] by exit_code\" +", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTUzMTA2NA=="}, "originalCommit": {"oid": "8f7c305baebb91ef12d9788b6e5e60b4a5e47181"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA2MzAyMzI1OnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/eql/src/main/java/org/elasticsearch/xpack/eql/parser/AbstractBuilder.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxNTozNDo0NFrOHS2uZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxNTozOToxM1rOHS27Iw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTUzMzAyOQ==", "bodyText": "Use double quotes [\"] for defining string literals, not single quotes [']", "url": "https://github.com/elastic/elasticsearch/pull/62458#discussion_r489533029", "createdAt": "2020-09-16T15:34:44Z", "author": {"login": "costin"}, "path": "x-pack/plugin/eql/src/main/java/org/elasticsearch/xpack/eql/parser/AbstractBuilder.java", "diffHunk": "@@ -173,6 +177,13 @@ public static String unquoteString(String text) {\n         return resultString.toString();\n     }\n \n+    private static void checkForSingleQuotedString(Source source, String text, int i) {\n+        if (text.charAt(i) == '\\'') {\n+            throw new ParsingException(source,\n+                    \"Single quotes ['] are not supported around literal strings, please use double quotes [\\\"]\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f7c305baebb91ef12d9788b6e5e60b4a5e47181"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTUzNjI5MQ==", "bodyText": "I will make it: Use double quotes [\"] to define string literals, not single quotes [']", "url": "https://github.com/elastic/elasticsearch/pull/62458#discussion_r489536291", "createdAt": "2020-09-16T15:39:13Z", "author": {"login": "matriv"}, "path": "x-pack/plugin/eql/src/main/java/org/elasticsearch/xpack/eql/parser/AbstractBuilder.java", "diffHunk": "@@ -173,6 +177,13 @@ public static String unquoteString(String text) {\n         return resultString.toString();\n     }\n \n+    private static void checkForSingleQuotedString(Source source, String text, int i) {\n+        if (text.charAt(i) == '\\'') {\n+            throw new ParsingException(source,\n+                    \"Single quotes ['] are not supported around literal strings, please use double quotes [\\\"]\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTUzMzAyOQ=="}, "originalCommit": {"oid": "8f7c305baebb91ef12d9788b6e5e60b4a5e47181"}, "originalPosition": 50}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1478, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}