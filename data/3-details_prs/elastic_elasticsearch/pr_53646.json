{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg5NjA4NzE5", "number": 53646, "title": "Deprecated support for delaying state recovery pending master nodes", "bodyText": "As mentioned in issue #51806, we now have the option to delay state recovery until a certain number of master-eligible nodes have joined, but this seems unnecessary: we require a majority of master-eligible nodes for state recovery, but there is no advantage in waiting for more.\nThis pull request deprecated the following settings in GatewayService.java\n\ngateway.expected_nodes\ngateway.expected_master_nodes\ngateway.recover_after_nodes\ngateway.recover_after_master_nodes", "createdAt": "2020-03-17T03:55:28Z", "url": "https://github.com/elastic/elasticsearch/pull/53646", "merged": true, "mergeCommit": {"oid": "fe5092ae24558ed5a6ef3688a32dca3f705a4a1b"}, "closed": true, "closedAt": "2020-03-18T10:03:22Z", "author": {"login": "ShawnLi1014"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcOaI3LAH2gAyMzg5NjA4NzE5OjI1NDhjMGRmN2UxNGU5YWEyNDg2OWE5MDgwOTU4YWM1ZWRjODhmMDA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcO0WpGgFqTM3NjcxNTI1Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2548c0df7e14e9aa24869a9080958ac5edc88f00", "author": {"user": {"login": "ShawnLi1014", "name": "Tianlun Li"}}, "url": "https://github.com/elastic/elasticsearch/commit/2548c0df7e14e9aa24869a9080958ac5edc88f00", "committedDate": "2020-03-17T03:28:14Z", "message": "Deprecated support for delaying state recovery pending master nodes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1OTE0Nzk5", "url": "https://github.com/elastic/elasticsearch/pull/53646#pullrequestreview-375914799", "createdAt": "2020-03-17T10:37:52Z", "commit": {"oid": "2548c0df7e14e9aa24869a9080958ac5edc88f00"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxMDozNzo1MlrOF3WfXA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxMDo0MDozMlrOF3WlKg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzU4NDQ3Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                The number of (data or master) nodes that are expected to be in the cluster.\n          \n          \n            \n                deprecated:[7.7.0, This setting will be removed in 8.0. You should use `gateway.expected_data_nodes` instead.]\n          \n          \n            \n                The number of (data or master) nodes that are expected to be in the cluster.", "url": "https://github.com/elastic/elasticsearch/pull/53646#discussion_r393584476", "createdAt": "2020-03-17T10:37:52Z", "author": {"login": "DaveCTurner"}, "path": "docs/reference/modules/gateway.asciidoc", "diffHunk": "@@ -13,12 +13,14 @@ recover the cluster state and the cluster's data:\n     The number of (data or master) nodes that are expected to be in the cluster.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2548c0df7e14e9aa24869a9080958ac5edc88f00"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzU4NDUxMw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                The number of master nodes that are expected to be in the cluster.\n          \n          \n            \n                deprecated:[7.7.0, This setting will be removed in 8.0. You should use `gateway.expected_data_nodes` instead.]\n          \n          \n            \n                The number of master nodes that are expected to be in the cluster.", "url": "https://github.com/elastic/elasticsearch/pull/53646#discussion_r393584513", "createdAt": "2020-03-17T10:37:57Z", "author": {"login": "DaveCTurner"}, "path": "docs/reference/modules/gateway.asciidoc", "diffHunk": "@@ -13,12 +13,14 @@ recover the cluster state and the cluster's data:\n     The number of (data or master) nodes that are expected to be in the cluster.\n     Recovery of local shards will start as soon as the expected number of\n     nodes have joined the cluster. Defaults to `0`\n+    Deprecated and will be removed in 8.0\n \n `gateway.expected_master_nodes`::\n \n     The number of master nodes that are expected to be in the cluster.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2548c0df7e14e9aa24869a9080958ac5edc88f00"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzU4NTE3OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                Recover as long as this many data or master nodes have joined the cluster.\n          \n          \n            \n                deprecated:[7.7.0, This setting will be removed in 8.0. You should use `gateway.recover_after_data_nodes` instead.]\n          \n          \n            \n                Recover as long as this many data or master nodes have joined the cluster.", "url": "https://github.com/elastic/elasticsearch/pull/53646#discussion_r393585178", "createdAt": "2020-03-17T10:39:04Z", "author": {"login": "DaveCTurner"}, "path": "docs/reference/modules/gateway.asciidoc", "diffHunk": "@@ -38,10 +40,12 @@ as long as the following conditions are met:\n `gateway.recover_after_nodes`::\n \n     Recover as long as this many data or master nodes have joined the cluster.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2548c0df7e14e9aa24869a9080958ac5edc88f00"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzU4NTI4MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                Recover as long as this many master nodes have joined the cluster.\n          \n          \n            \n                deprecated:[7.7.0, This setting will be removed in 8.0. You should use `gateway.recover_after_data_nodes` instead.]\n          \n          \n            \n                Recover as long as this many master nodes have joined the cluster.", "url": "https://github.com/elastic/elasticsearch/pull/53646#discussion_r393585280", "createdAt": "2020-03-17T10:39:14Z", "author": {"login": "DaveCTurner"}, "path": "docs/reference/modules/gateway.asciidoc", "diffHunk": "@@ -38,10 +40,12 @@ as long as the following conditions are met:\n `gateway.recover_after_nodes`::\n \n     Recover as long as this many data or master nodes have joined the cluster.\n+    Deprecated and will be removed in 8.0\n \n `gateway.recover_after_master_nodes`::\n \n     Recover as long as this many master nodes have joined the cluster.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2548c0df7e14e9aa24869a9080958ac5edc88f00"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzU4NTgyOA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                Deprecated and will be removed in 8.0", "url": "https://github.com/elastic/elasticsearch/pull/53646#discussion_r393585828", "createdAt": "2020-03-17T10:40:16Z", "author": {"login": "DaveCTurner"}, "path": "docs/reference/modules/gateway.asciidoc", "diffHunk": "@@ -13,12 +13,14 @@ recover the cluster state and the cluster's data:\n     The number of (data or master) nodes that are expected to be in the cluster.\n     Recovery of local shards will start as soon as the expected number of\n     nodes have joined the cluster. Defaults to `0`\n+    Deprecated and will be removed in 8.0", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2548c0df7e14e9aa24869a9080958ac5edc88f00"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzU4NTg2Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                Deprecated and will be removed in 8.0", "url": "https://github.com/elastic/elasticsearch/pull/53646#discussion_r393585866", "createdAt": "2020-03-17T10:40:21Z", "author": {"login": "DaveCTurner"}, "path": "docs/reference/modules/gateway.asciidoc", "diffHunk": "@@ -13,12 +13,14 @@ recover the cluster state and the cluster's data:\n     The number of (data or master) nodes that are expected to be in the cluster.\n     Recovery of local shards will start as soon as the expected number of\n     nodes have joined the cluster. Defaults to `0`\n+    Deprecated and will be removed in 8.0\n \n `gateway.expected_master_nodes`::\n \n     The number of master nodes that are expected to be in the cluster.\n     Recovery of local shards will start as soon as the expected number of\n     master nodes have joined the cluster. Defaults to `0`\n+    Deprecated and will be removed in 8.0", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2548c0df7e14e9aa24869a9080958ac5edc88f00"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzU4NTkxMA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                Deprecated and will be removed in 8.0", "url": "https://github.com/elastic/elasticsearch/pull/53646#discussion_r393585910", "createdAt": "2020-03-17T10:40:26Z", "author": {"login": "DaveCTurner"}, "path": "docs/reference/modules/gateway.asciidoc", "diffHunk": "@@ -38,10 +40,12 @@ as long as the following conditions are met:\n `gateway.recover_after_nodes`::\n \n     Recover as long as this many data or master nodes have joined the cluster.\n+    Deprecated and will be removed in 8.0", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2548c0df7e14e9aa24869a9080958ac5edc88f00"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzU4NTk2Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                Deprecated and will be removed in 8.0", "url": "https://github.com/elastic/elasticsearch/pull/53646#discussion_r393585962", "createdAt": "2020-03-17T10:40:32Z", "author": {"login": "DaveCTurner"}, "path": "docs/reference/modules/gateway.asciidoc", "diffHunk": "@@ -38,10 +40,12 @@ as long as the following conditions are met:\n `gateway.recover_after_nodes`::\n \n     Recover as long as this many data or master nodes have joined the cluster.\n+    Deprecated and will be removed in 8.0\n \n `gateway.recover_after_master_nodes`::\n \n     Recover as long as this many master nodes have joined the cluster.\n+    Deprecated and will be removed in 8.0", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2548c0df7e14e9aa24869a9080958ac5edc88f00"}, "originalPosition": 24}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "18457e6145df64d6b961434f8ccae04fe6a85900", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/18457e6145df64d6b961434f8ccae04fe6a85900", "committedDate": "2020-03-17T11:16:36Z", "message": "Merge branch 'master' into issue#51806"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e61c873cd4176ceeb094f749128b0dd2f69d635e", "author": {"user": {"login": "ShawnLi1014", "name": "Tianlun Li"}}, "url": "https://github.com/elastic/elasticsearch/commit/e61c873cd4176ceeb094f749128b0dd2f69d635e", "committedDate": "2020-03-18T04:57:48Z", "message": "Apply suggestions from code review\n\nCo-Authored-By: David Turner <david.turner@elastic.co>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2NzE1MjU3", "url": "https://github.com/elastic/elasticsearch/pull/53646#pullrequestreview-376715257", "createdAt": "2020-03-18T10:00:49Z", "commit": {"oid": "e61c873cd4176ceeb094f749128b0dd2f69d635e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1946, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}