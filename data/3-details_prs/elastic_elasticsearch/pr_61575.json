{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDczODUwMDQ0", "number": 61575, "title": "Autoscaling decision return absolute capacity", "bodyText": "The autoscaling decision API now returns an absolute capacity,\nand leaves the actual decision of whether a scale up or down\nis needed to the orchestration system.\nThe decision API now returns both a tier and node level required\nand current capacity as wells as a decider level breakdown of the\nsame.", "createdAt": "2020-08-26T11:45:57Z", "url": "https://github.com/elastic/elasticsearch/pull/61575", "merged": true, "mergeCommit": {"oid": "d8dd6e38a7cf39d5334961baafebaaceb6aa301d"}, "closed": true, "closedAt": "2020-09-18T18:44:21Z", "author": {"login": "henningandersen"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdCqUrcgH2gAyNDczODUwMDQ0OjJkZWNjMmEyMDc5OTQ4NGZkMDQxZDE5YTU0ZGMyNWMwNzY0MDQ5Yzc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdKHAtHgH2gAyNDczODUwMDQ0OjdiZWQ4OWVhMmMyNzA0MmZkOGQwMzZkZDBlODM1ODUzMzY3OWE3NmM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2decc2a20799484fd041d19a54dc25c0764049c7", "author": {"user": {"login": "henningandersen", "name": "Henning Andersen"}}, "url": "https://github.com/elastic/elasticsearch/commit/2decc2a20799484fd041d19a54dc25c0764049c7", "committedDate": "2020-08-26T11:43:41Z", "message": "Autoscaling decision return absolute capacity\n\nThe autoscaling decision API now returns an absolute capacity,\nand leaves the actual decision of whether a scale up or down\nis needed to the orchestration system.\n\nThe decision API now returns both a tier and node level required\nand current capacity as wells as a decider level breakdown of the\nsame."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d58686c80f97890d2f26ac47d9d8fc50a689406", "author": {"user": {"login": "henningandersen", "name": "Henning Andersen"}}, "url": "https://github.com/elastic/elasticsearch/commit/6d58686c80f97890d2f26ac47d9d8fc50a689406", "committedDate": "2020-08-26T14:28:45Z", "message": "Clarify javadoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ea7ac2f562dd3a6fca0e7a62bfbfb228489cea2", "author": {"user": {"login": "henningandersen", "name": "Henning Andersen"}}, "url": "https://github.com/elastic/elasticsearch/commit/4ea7ac2f562dd3a6fca0e7a62bfbfb228489cea2", "committedDate": "2020-08-26T20:05:39Z", "message": "decisions is never empty."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f828987e921f3b1b8b267afd53268900e315d4cb", "author": {"user": {"login": "henningandersen", "name": "Henning Andersen"}}, "url": "https://github.com/elastic/elasticsearch/commit/f828987e921f3b1b8b267afd53268900e315d4cb", "committedDate": "2020-08-26T20:21:31Z", "message": "Slightly nicer ordering"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5eeb11b7d3b701277b31a365a3e65e966ec94087", "author": {"user": {"login": "henningandersen", "name": "Henning Andersen"}}, "url": "https://github.com/elastic/elasticsearch/commit/5eeb11b7d3b701277b31a365a3e65e966ec94087", "committedDate": "2020-08-26T20:22:24Z", "message": "Remove unnecessary exception"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4977c03523923490569078bf4698418433cb9803", "author": {"user": {"login": "henningandersen", "name": "Henning Andersen"}}, "url": "https://github.com/elastic/elasticsearch/commit/4977c03523923490569078bf4698418433cb9803", "committedDate": "2020-08-26T20:25:17Z", "message": "spotless"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkwMTc1MjYz", "url": "https://github.com/elastic/elasticsearch/pull/61575#pullrequestreview-490175263", "createdAt": "2020-09-17T01:04:46Z", "commit": {"oid": "4977c03523923490569078bf4698418433cb9803"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QwMTowNDo0NlrOHTJdKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QwMTowNzozMlrOHTJkpA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTgzOTkxMw==", "bodyText": "I wonder if the name of this should be general from the beginning, something indicating resources like AutoscalingResources?", "url": "https://github.com/elastic/elasticsearch/pull/61575#discussion_r489839913", "createdAt": "2020-09-17T01:04:46Z", "author": {"login": "jasontedor"}, "path": "x-pack/plugin/autoscaling/src/main/java/org/elasticsearch/xpack/autoscaling/decision/AutoscalingCapacity.java", "diffHunk": "@@ -0,0 +1,262 @@\n+/*\n+ * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n+ * or more contributor license agreements. Licensed under the Elastic License;\n+ * you may not use this file except in compliance with the Elastic License.\n+ */\n+\n+package org.elasticsearch.xpack.autoscaling.decision;\n+\n+import org.elasticsearch.common.Strings;\n+import org.elasticsearch.common.io.stream.StreamInput;\n+import org.elasticsearch.common.io.stream.StreamOutput;\n+import org.elasticsearch.common.io.stream.Writeable;\n+import org.elasticsearch.common.unit.ByteSizeValue;\n+import org.elasticsearch.common.xcontent.ToXContent;\n+import org.elasticsearch.common.xcontent.XContentBuilder;\n+\n+import java.io.IOException;\n+import java.util.Objects;\n+\n+/**\n+ * Represents current/required capacity of a single tier.\n+ */\n+public class AutoscalingCapacity implements ToXContent, Writeable {\n+\n+    private final StorageAndMemory tier;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4977c03523923490569078bf4698418433cb9803"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTg0MDQ0OQ==", "bodyText": "To be clear, I'm not suggesting that it be a general container, it would still be only storage and memory today, but we'll have CPU later and then we'd rename this to CpuStorageAndMemory? That's what I mean by general, the name only.", "url": "https://github.com/elastic/elasticsearch/pull/61575#discussion_r489840449", "createdAt": "2020-09-17T01:05:31Z", "author": {"login": "jasontedor"}, "path": "x-pack/plugin/autoscaling/src/main/java/org/elasticsearch/xpack/autoscaling/decision/AutoscalingCapacity.java", "diffHunk": "@@ -0,0 +1,262 @@\n+/*\n+ * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n+ * or more contributor license agreements. Licensed under the Elastic License;\n+ * you may not use this file except in compliance with the Elastic License.\n+ */\n+\n+package org.elasticsearch.xpack.autoscaling.decision;\n+\n+import org.elasticsearch.common.Strings;\n+import org.elasticsearch.common.io.stream.StreamInput;\n+import org.elasticsearch.common.io.stream.StreamOutput;\n+import org.elasticsearch.common.io.stream.Writeable;\n+import org.elasticsearch.common.unit.ByteSizeValue;\n+import org.elasticsearch.common.xcontent.ToXContent;\n+import org.elasticsearch.common.xcontent.XContentBuilder;\n+\n+import java.io.IOException;\n+import java.util.Objects;\n+\n+/**\n+ * Represents current/required capacity of a single tier.\n+ */\n+public class AutoscalingCapacity implements ToXContent, Writeable {\n+\n+    private final StorageAndMemory tier;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTgzOTkxMw=="}, "originalCommit": {"oid": "4977c03523923490569078bf4698418433cb9803"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTg0MTgyOA==", "bodyText": "If these are expected to be immutable (i.e., there's never a setter), we have a rather loose guideline that we'd name it summary.", "url": "https://github.com/elastic/elasticsearch/pull/61575#discussion_r489841828", "createdAt": "2020-09-17T01:07:32Z", "author": {"login": "jasontedor"}, "path": "x-pack/plugin/autoscaling/src/main/java/org/elasticsearch/xpack/autoscaling/decision/AutoscalingDecision.java", "diffHunk": "@@ -16,70 +17,70 @@\n import java.util.Objects;\n \n /**\n- * Represents an autoscaling decision.\n+ * Represents an autoscaling decision from a single decider\n  */\n public class AutoscalingDecision implements ToXContent, Writeable {\n \n-    private final String name;\n+    private final AutoscalingCapacity requiredCapacity;\n+    private final Reason reason;\n \n-    public String name() {\n-        return name;\n+    public interface Reason extends ToXContent, NamedWriteable {\n+        String getSummary();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4977c03523923490569078bf4698418433cb9803"}, "originalPosition": 24}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e5414f072d4387fbceb0578d70da518f9f3d6b4b", "author": {"user": {"login": "henningandersen", "name": "Henning Andersen"}}, "url": "https://github.com/elastic/elasticsearch/commit/e5414f072d4387fbceb0578d70da518f9f3d6b4b", "committedDate": "2020-09-18T14:22:15Z", "message": "Merge remote-tracking branch 'origin/master' into enhance_autoscaling_decision_absolute_numbers"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "75e410b9fad9c4e7a4b5324ee4cb45731af42a04", "author": {"user": {"login": "henningandersen", "name": "Henning Andersen"}}, "url": "https://github.com/elastic/elasticsearch/commit/75e410b9fad9c4e7a4b5324ee4cb45731af42a04", "committedDate": "2020-09-18T14:31:30Z", "message": "Follow non-get convention for summary."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7bed89ea2c27042fd8d036dd0e8358533679a76c", "author": {"user": {"login": "henningandersen", "name": "Henning Andersen"}}, "url": "https://github.com/elastic/elasticsearch/commit/7bed89ea2c27042fd8d036dd0e8358533679a76c", "committedDate": "2020-09-18T15:06:35Z", "message": "Rename StorageAndMemory to AutoscalingResources"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4555, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}