{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ2NDc1Mzc2", "number": 59254, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQyMTowMTowMlrOEMpzXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMTowMDoyOVrOEM2JsQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgxNzAzMjYxOnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/dataframe/DataFrameAnalyticsConfigUpdate.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQyMTowMTowMlrOGu5Ehg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQyMTowMTowMlrOGu5Ehg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTgyMjcyNg==", "bodyText": "since it is being serialized as vint, a validation should be made that it is  >= 0", "url": "https://github.com/elastic/elasticsearch/pull/59254#discussion_r451822726", "createdAt": "2020-07-08T21:01:02Z", "author": {"login": "benwtrent"}, "path": "x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/dataframe/DataFrameAnalyticsConfigUpdate.java", "diffHunk": "@@ -33,29 +34,37 @@\n             DataFrameAnalyticsConfig.MODEL_MEMORY_LIMIT,\n             VALUE);\n         PARSER.declareBoolean(Builder::setAllowLazyStart, DataFrameAnalyticsConfig.ALLOW_LAZY_START);\n-\n+        PARSER.declareInt(Builder::setMaxNumThreads, DataFrameAnalyticsConfig.MAX_NUM_THREADS);\n     }\n \n     private final String id;\n     private final String description;\n     private final ByteSizeValue modelMemoryLimit;\n     private final Boolean allowLazyStart;\n+    private final Integer maxNumThreads;\n \n     private DataFrameAnalyticsConfigUpdate(String id,\n                                            @Nullable String description,\n                                            @Nullable ByteSizeValue modelMemoryLimit,\n-                                           @Nullable Boolean allowLazyStart) {\n+                                           @Nullable Boolean allowLazyStart,\n+                                           @Nullable Integer maxNumThreads) {\n         this.id = id;\n         this.description = description;\n         this.modelMemoryLimit = modelMemoryLimit;\n         this.allowLazyStart = allowLazyStart;\n+        this.maxNumThreads = maxNumThreads;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4491a5102121fb4b94c4b11440a3035b2143d1a7"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgxNzAzNzkzOnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/src/test/resources/rest-api-spec/test/ml/data_frame_analytics_crud.yml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQyMTowMjozOVrOGu5H3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQyMTowMjozOVrOGu5H3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTgyMzU4MA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              - m atch: { dest.index: \"index-dest\" }\n          \n          \n            \n              - match: { dest.index: \"index-dest\" }", "url": "https://github.com/elastic/elasticsearch/pull/59254#discussion_r451823580", "createdAt": "2020-07-08T21:02:39Z", "author": {"login": "benwtrent"}, "path": "x-pack/plugin/src/test/resources/rest-api-spec/test/ml/data_frame_analytics_crud.yml", "diffHunk": "@@ -199,7 +199,7 @@ setup:\n   - match: { id: \"custom-outlier-detection\" }\n   - match: { source.index: [\"index-source\"] }\n   - match: { source.query: {\"match_all\" : {} } }\n-  - match: { dest.index: \"index-dest\" }\n+  - m atch: { dest.index: \"index-dest\" }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4491a5102121fb4b94c4b11440a3035b2143d1a7"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgxOTA1MTQwOnYy", "diffSide": "RIGHT", "path": "docs/java-rest/high-level/ml/put-data-frame-analytics.asciidoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMDo1OToxMVrOGvMKYA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMDo1OToxMVrOGvMKYA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjEzNTUyMA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            <8> The max number of threads to be used by the analysis. Defaults to 1.\n          \n          \n            \n            <8> The maximum number of threads to be used by the analysis. Defaults to 1.", "url": "https://github.com/elastic/elasticsearch/pull/59254#discussion_r452135520", "createdAt": "2020-07-09T10:59:11Z", "author": {"login": "przemekwitek"}, "path": "docs/java-rest/high-level/ml/put-data-frame-analytics.asciidoc", "diffHunk": "@@ -38,6 +38,7 @@ include-tagged::{doc-tests-file}[{api}-config]\n <5> The fields to be included in / excluded from the analysis\n <6> The memory limit for the model created as part of the analysis process\n <7> Optionally, a human-readable description\n+<8> The max number of threads to be used by the analysis. Defaults to 1.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "776af53e73aed06dd0bfba63a02bb317d440084b"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgxOTA1MzAyOnYy", "diffSide": "RIGHT", "path": "docs/java-rest/high-level/ml/update-data-frame-analytics.asciidoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMDo1OTozNlrOGvMLUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMDo1OTozNlrOGvMLUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjEzNTc2MQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            <4> The max number of threads to be used by the analysis\n          \n          \n            \n            <4> The maximum number of threads to be used by the analysis", "url": "https://github.com/elastic/elasticsearch/pull/59254#discussion_r452135761", "createdAt": "2020-07-09T10:59:36Z", "author": {"login": "przemekwitek"}, "path": "docs/java-rest/high-level/ml/update-data-frame-analytics.asciidoc", "diffHunk": "@@ -34,6 +34,7 @@ include-tagged::{doc-tests-file}[{api}-config-update]\n <1> The {dfanalytics-job} ID\n <2> The human-readable description\n <3> The memory limit for the model created as part of the analysis process\n+<4> The max number of threads to be used by the analysis", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "776af53e73aed06dd0bfba63a02bb317d440084b"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgxOTA1NDU0OnYy", "diffSide": "RIGHT", "path": "docs/reference/ml/df-analytics/apis/put-dfanalytics.asciidoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMTowMDowNVrOGvMMOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMTowMDowNVrOGvMMOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjEzNTk5NQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Note that the process may use a additional threads for operational\n          \n          \n            \n            Note that the process may use additional threads for operational", "url": "https://github.com/elastic/elasticsearch/pull/59254#discussion_r452135995", "createdAt": "2020-07-09T11:00:05Z", "author": {"login": "przemekwitek"}, "path": "docs/reference/ml/df-analytics/apis/put-dfanalytics.asciidoc", "diffHunk": "@@ -326,6 +326,14 @@ include::{es-repo-dir}/ml/ml-shared.asciidoc[tag=description-dfa]\n `dest`::\n (Required, object)\n include::{es-repo-dir}/ml/ml-shared.asciidoc[tag=dest]\n+\n+`max_num_threads`::\n+(Optional, integer)\n+The maximum number of threads to be used by the analysis.\n+The default value is `1`. Using more threads may decrease the time\n+necessary to complete the analysis at the cost of using more CPU.\n+Note that the process may use a additional threads for operational", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "776af53e73aed06dd0bfba63a02bb317d440084b"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgxOTA1NTg1OnYy", "diffSide": "RIGHT", "path": "docs/reference/ml/df-analytics/apis/update-dfanalytics.asciidoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMTowMDoyOVrOGvMNFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMTowMDoyOVrOGvMNFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjEzNjIxNQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Note that the process may use a additional threads for operational\n          \n          \n            \n            Note that the process may use additional threads for operational", "url": "https://github.com/elastic/elasticsearch/pull/59254#discussion_r452136215", "createdAt": "2020-07-09T11:00:29Z", "author": {"login": "przemekwitek"}, "path": "docs/reference/ml/df-analytics/apis/update-dfanalytics.asciidoc", "diffHunk": "@@ -71,6 +71,14 @@ the `starting` state until sufficient {ml} node capacity is available.\n (Optional, string)\n include::{es-repo-dir}/ml/ml-shared.asciidoc[tag=description-dfa]\n \n+`max_num_threads`::\n+(Optional, integer)\n+The maximum number of threads to be used by the analysis.\n+The default value is `1`. Using more threads may decrease the time\n+necessary to complete the analysis at the cost of using more CPU.\n+Note that the process may use a additional threads for operational", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "776af53e73aed06dd0bfba63a02bb317d440084b"}, "originalPosition": 9}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1901, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}