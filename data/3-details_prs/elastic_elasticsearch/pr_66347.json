{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQwMjg3MTU3", "number": 66347, "title": "[ML] Deprecate anomaly detection post data endpoint", "bodyText": "There is little evidence of this endpoint being used\nand there is quite a lot of code complexity associated\nwith the various formats that can be used to upload\ndata and the different errors that can occur when direct\ndata upload is open to end users.\nIn a future release we can make this endpoint internal\nso that only datafeeds can use it, and remove all the\noptions and formats that are not used by datafeeds.\nEnd users will have to store their input data for\nanomaly detection in Elasticsearch indices (which we\nbelieve all do today) and use a datafeed to feed it\nto anomaly detection jobs.", "createdAt": "2020-12-15T14:20:33Z", "url": "https://github.com/elastic/elasticsearch/pull/66347", "merged": true, "mergeCommit": {"oid": "c5bef7f9a782946060cd8ac11bbe3c5b89d7943e"}, "closed": true, "closedAt": "2020-12-15T18:37:21Z", "author": {"login": "droberts195"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdmbBtuAH2gAyNTQwMjg3MTU3OjE3MGY4NTA1ODQzNWMxNjM3NmU3ZjliNmYzNmRjYWZmNjQ2MmJmM2Q=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdmeZ-igFqTU1MjczNDY2MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "170f85058435c16376e7f9b6f36dcaff6462bf3d", "author": {"user": {"login": "droberts195", "name": "David Roberts"}}, "url": "https://github.com/elastic/elasticsearch/commit/170f85058435c16376e7f9b6f36dcaff6462bf3d", "committedDate": "2020-12-15T14:15:40Z", "message": "[ML] Deprecate anomaly detection post data endpoint\n\nThere is little evidence of this endpoint being used\nand there is quite a lot of code complexity associated\nwith the various formats that can be used to upload\ndata and the different errors that can occur when direct\ndata upload is open to end users.\n\nIn a future release we can make this endpoint internal\nso that only datafeeds can use it, and remove all the\noptions and formats that are not used by datafeeds.\n\nEnd users will have to store their input data for\nanomaly detection in Elasticsearch indices (which we\nbelieve all do today) and use a datafeed to feed it\nto anomaly detection jobs."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUyNTExOTY4", "url": "https://github.com/elastic/elasticsearch/pull/66347#pullrequestreview-552511968", "createdAt": "2020-12-15T14:25:51Z", "commit": {"oid": "170f85058435c16376e7f9b6f36dcaff6462bf3d"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxNDoyNTo1MVrOIGN9xQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxNDoyNzowM1rOIGOCGQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzM5MTE3Mw==", "bodyText": "Just double-checking: Is it ok that this snippet will be printed in the public docs?", "url": "https://github.com/elastic/elasticsearch/pull/66347#discussion_r543391173", "createdAt": "2020-12-15T14:25:51Z", "author": {"login": "przemekwitek"}, "path": "client/rest-high-level/src/test/java/org/elasticsearch/client/documentation/MlClientDocumentationIT.java", "diffHunk": "@@ -1789,7 +1798,10 @@ public void testPostData() throws Exception {\n             postDataRequest.setResetStart(null);\n \n             // tag::post-data-execute\n-            PostDataResponse postDataResponse = client.machineLearning().postData(postDataRequest, RequestOptions.DEFAULT);\n+            RequestOptions ignoreDeprecationsWarningsOptions = RequestOptions.DEFAULT.toBuilder()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "170f85058435c16376e7f9b6f36dcaff6462bf3d"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzM5MjI4MQ==", "bodyText": "Would it make sense to introduce POST_DATA_OPTIONS static member just like you did in the other test?", "url": "https://github.com/elastic/elasticsearch/pull/66347#discussion_r543392281", "createdAt": "2020-12-15T14:27:03Z", "author": {"login": "przemekwitek"}, "path": "client/rest-high-level/src/test/java/org/elasticsearch/client/MachineLearningIT.java", "diffHunk": "@@ -435,7 +435,11 @@ public void testForecastJob() throws Exception {\n             builder.addDoc(hashMap);\n         }\n         PostDataRequest postDataRequest = new PostDataRequest(jobId, builder);\n-        machineLearningClient.postData(postDataRequest, RequestOptions.DEFAULT);\n+        // Post data is deprecated, so expect a deprecation warning\n+        RequestOptions requestOptions = RequestOptions.DEFAULT.toBuilder()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "170f85058435c16376e7f9b6f36dcaff6462bf3d"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7c8549f1e78ad33f4a75f153fd275e9f15bd4168", "author": {"user": {"login": "droberts195", "name": "David Roberts"}}, "url": "https://github.com/elastic/elasticsearch/commit/7c8549f1e78ad33f4a75f153fd275e9f15bd4168", "committedDate": "2020-12-15T14:43:39Z", "message": "Allow warnings in BWC tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c31a00af8f20365cffd1a01210d141ffb603ada6", "author": {"user": {"login": "droberts195", "name": "David Roberts"}}, "url": "https://github.com/elastic/elasticsearch/commit/c31a00af8f20365cffd1a01210d141ffb603ada6", "committedDate": "2020-12-15T16:15:04Z", "message": "More changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "44cb67c139840690cfeb82b663d4e00790f17bd8", "author": {"user": {"login": "lcawl", "name": "Lisa Cawley"}}, "url": "https://github.com/elastic/elasticsearch/commit/44cb67c139840690cfeb82b663d4e00790f17bd8", "committedDate": "2020-12-15T17:01:37Z", "message": "[DOCS] Adds breaking change"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUyNzM0NjYw", "url": "https://github.com/elastic/elasticsearch/pull/66347#pullrequestreview-552734660", "createdAt": "2020-12-15T18:11:53Z", "commit": {"oid": "44cb67c139840690cfeb82b663d4e00790f17bd8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4530, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}