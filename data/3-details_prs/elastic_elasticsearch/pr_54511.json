{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk2Mzg1NjY2", "number": 54511, "title": "Resolve some coordination-layer TODOs", "bodyText": "This commit removes a handful of TODO comments in the cluster coordination\nlayer that no longer apply.\nRelates #32006", "createdAt": "2020-03-31T14:45:34Z", "url": "https://github.com/elastic/elasticsearch/pull/54511", "merged": true, "mergeCommit": {"oid": "07b8b073b34ca3a767afd9aa9e38e33764ec5272"}, "closed": true, "closedAt": "2020-04-01T11:26:40Z", "author": {"login": "DaveCTurner"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcTEM3bgH2gAyMzk2Mzg1NjY2OmY1MTEzZDE4ZjE1YzM5N2E2ZDZlY2M5MWNkODdjNTg4NmIzMWI0MzE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcTUjwaAH2gAyMzk2Mzg1NjY2Ojc3MTdiYjI2MGM4YmE5MjBiY2U0N2ZiNTQwZTNlMTY0ODUzZWQ5MjQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f5113d18f15c397a6d6ecc91cd87c5886b31b431", "author": {"user": {"login": "DaveCTurner", "name": "David Turner"}}, "url": "https://github.com/elastic/elasticsearch/commit/f5113d18f15c397a6d6ecc91cd87c5886b31b431", "committedDate": "2020-03-31T14:44:19Z", "message": "Resolve some coordination-layer TODOs\n\nThis commit removes a handful of TODO comments in the cluster coordination\nlayer that no longer apply.\n\nRelates #32006"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0ODA4NDM4", "url": "https://github.com/elastic/elasticsearch/pull/54511#pullrequestreview-384808438", "createdAt": "2020-03-31T14:46:33Z", "commit": {"oid": "f5113d18f15c397a6d6ecc91cd87c5886b31b431"}, "state": "COMMENTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxNDo0NjozM1rOF-ZcjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxNDo0OTozM1rOF-ZmlQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDk3Mjk0MA==", "bodyText": "Done, see call to ClusterBootstrapService::isBootstrapPlaceholder in describeQuorum.", "url": "https://github.com/elastic/elasticsearch/pull/54511#discussion_r400972940", "createdAt": "2020-03-31T14:46:33Z", "author": {"login": "DaveCTurner"}, "path": "server/src/main/java/org/elasticsearch/cluster/coordination/ClusterFormationFailureHelper.java", "diffHunk": "@@ -157,7 +157,6 @@ String getDescription() {\n                 if (INITIAL_MASTER_NODES_SETTING.get(Settings.EMPTY).equals(INITIAL_MASTER_NODES_SETTING.get(settings))) {\n                     bootstrappingDescription = \"[\" + INITIAL_MASTER_NODES_SETTING.getKey() + \"] is empty on this node\";\n                 } else {\n-                    // TODO update this when we can bootstrap on only a quorum of the initial nodes", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f5113d18f15c397a6d6ecc91cd87c5886b31b431"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDk3MzYyMA==", "bodyText": "This happens by sending a publish response with no associated join.", "url": "https://github.com/elastic/elasticsearch/pull/54511#discussion_r400973620", "createdAt": "2020-03-31T14:47:23Z", "author": {"login": "DaveCTurner"}, "path": "server/src/main/java/org/elasticsearch/cluster/coordination/FollowersChecker.java", "diffHunk": "@@ -163,7 +163,6 @@ private void handleFollowerCheck(FollowerCheckRequest request, TransportChannel\n         FastResponseState responder = this.fastResponseState;\n \n         if (responder.mode == Mode.FOLLOWER && responder.term == request.term) {\n-            // TODO trigger a term bump if we voted for a different leader in this term", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f5113d18f15c397a6d6ecc91cd87c5886b31b431"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDk3NDI3Mw==", "bodyText": "Done, see AbstractCoordinatorTestCase.MockPersistedState.", "url": "https://github.com/elastic/elasticsearch/pull/54511#discussion_r400974273", "createdAt": "2020-03-31T14:48:09Z", "author": {"login": "DaveCTurner"}, "path": "server/src/main/java/org/elasticsearch/cluster/coordination/InMemoryPersistedState.java", "diffHunk": "@@ -21,7 +21,6 @@\n import org.elasticsearch.cluster.ClusterState;\n \n public class InMemoryPersistedState implements CoordinationState.PersistedState {\n-    // TODO add support and tests for behaviour with persistence-layer failures", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f5113d18f15c397a6d6ecc91cd87c5886b31b431"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDk3NDY4Mw==", "bodyText": "No, SAME is bad because updateMaxTermSeen.accept may block on Coordinator#mutex.", "url": "https://github.com/elastic/elasticsearch/pull/54511#discussion_r400974683", "createdAt": "2020-03-31T14:48:38Z", "author": {"login": "DaveCTurner"}, "path": "server/src/main/java/org/elasticsearch/cluster/coordination/PreVoteCollector.java", "diffHunk": "@@ -62,7 +62,6 @@\n         this.updateMaxTermSeen = updateMaxTermSeen;\n         this.electionStrategy = electionStrategy;\n \n-        // TODO does this need to be on the generic threadpool or can it use SAME?", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f5113d18f15c397a6d6ecc91cd87c5886b31b431"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDk3NDk2NA==", "bodyText": "Don't think so, it notifies the listener on a failure.", "url": "https://github.com/elastic/elasticsearch/pull/54511#discussion_r400974964", "createdAt": "2020-03-31T14:48:55Z", "author": {"login": "DaveCTurner"}, "path": "server/src/main/java/org/elasticsearch/cluster/coordination/Publication.java", "diffHunk": "@@ -244,7 +244,6 @@ void sendPublishRequest() {\n             assert state == PublicationTargetState.NOT_STARTED : state + \" -> \" + PublicationTargetState.SENT_PUBLISH_REQUEST;\n             state = PublicationTargetState.SENT_PUBLISH_REQUEST;\n             Publication.this.sendPublishRequest(discoveryNode, publishRequest, new PublishResponseHandler());\n-            // TODO Can this ^ fail with an exception? Target should be failed if so.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f5113d18f15c397a6d6ecc91cd87c5886b31b431"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDk3NTI4MA==", "bodyText": "Not really relevant here.", "url": "https://github.com/elastic/elasticsearch/pull/54511#discussion_r400975280", "createdAt": "2020-03-31T14:49:16Z", "author": {"login": "DaveCTurner"}, "path": "test/framework/src/main/java/org/elasticsearch/cluster/coordination/AbstractCoordinatorTestCase.java", "diffHunk": "@@ -244,7 +244,6 @@ protected static int defaultInt(Setting<Integer> setting) {\n \n         final List<ClusterNode> clusterNodes;\n         final DeterministicTaskQueue deterministicTaskQueue = new DeterministicTaskQueue(\n-            // TODO does ThreadPool need a node name any more?", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f5113d18f15c397a6d6ecc91cd87c5886b31b431"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDk3NTUwOQ==", "bodyText": "Done, or at least covered elsewhere.", "url": "https://github.com/elastic/elasticsearch/pull/54511#discussion_r400975509", "createdAt": "2020-03-31T14:49:33Z", "author": {"login": "DaveCTurner"}, "path": "test/framework/src/main/java/org/elasticsearch/cluster/coordination/AbstractCoordinatorTestCase.java", "diffHunk": "@@ -449,11 +450,6 @@ public String toString() {\n                             deterministicTaskQueue.runRandomTask();\n                         }\n                     }\n-\n-                    // TODO other random steps:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f5113d18f15c397a6d6ecc91cd87c5886b31b431"}, "originalPosition": 46}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1NDE5NzEz", "url": "https://github.com/elastic/elasticsearch/pull/54511#pullrequestreview-385419713", "createdAt": "2020-04-01T09:36:40Z", "commit": {"oid": "f5113d18f15c397a6d6ecc91cd87c5886b31b431"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7717bb260c8ba920bce47fb540e3e164853ed924", "author": {"user": {"login": "DaveCTurner", "name": "David Turner"}}, "url": "https://github.com/elastic/elasticsearch/commit/7717bb260c8ba920bce47fb540e3e164853ed924", "committedDate": "2020-04-01T09:47:48Z", "message": "Merge branch 'master' into 2020-03-31-coordination-todos"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1390, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}