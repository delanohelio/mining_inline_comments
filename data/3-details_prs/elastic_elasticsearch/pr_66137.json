{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM1NDkzODI4", "number": 66137, "title": "Adding \"read ingest pipeline\" cluster privilege", "bodyText": "The new privilege will allow to run ingest tools with minimal\nprivilege to check whether a\npipeline exists, without being able to modify it.\nThis privilege also support simulate pipeline too since it is a readonly\noperation.\nResolve #48028", "createdAt": "2020-12-09T22:06:14Z", "url": "https://github.com/elastic/elasticsearch/pull/66137", "merged": true, "mergeCommit": {"oid": "76589f097b1af3610f2eb09ff757a2bf78127942"}, "closed": true, "closedAt": "2020-12-15T15:42:22Z", "author": {"login": "BigPandaToo"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdkl_U9AH2gAyNTM1NDkzODI4OjFkMzhlZDk2YmU2NGRmOGM1MDhkOTdhZDk1MWQxYmNhZTg2NTI2MTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdmb9aCAFqTU1MjU3MDM4NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1d38ed96be64df8c508d97ad951d1bcae8652617", "author": {"user": {"login": "BigPandaToo", "name": "Lyudmila Fokina"}}, "url": "https://github.com/elastic/elasticsearch/commit/1d38ed96be64df8c508d97ad951d1bcae8652617", "committedDate": "2020-12-09T21:54:10Z", "message": "Adding \"read ingest pipeline\" cluster privilege\n\nThe new privilege will allow to run ingest tools with minimal\nprivilege to check whether a\npipeline exists, without being able to modify it.\nThis privilege also support simulate pipeline too since it is a readonly\n operation.\n\n Resolve #48028"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "90cef0bf62149b1041c168991c97965a0ebcce98", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/90cef0bf62149b1041c168991c97965a0ebcce98", "committedDate": "2020-12-10T09:40:53Z", "message": "Merge branch 'master' into Read_ingest_pipeline"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "59f271f7a20ae136e9ea2a6990e17007e956a0ce", "author": {"user": {"login": "BigPandaToo", "name": "Lyudmila Fokina"}}, "url": "https://github.com/elastic/elasticsearch/commit/59f271f7a20ae136e9ea2a6990e17007e956a0ce", "committedDate": "2020-12-10T18:21:26Z", "message": "Adding \"read ingest pipeline\" cluster privilege\n\nFixing tests.\n\n Resolve #48028"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c793a9784f19c89bfe7c51a115a96a803283b1f", "author": {"user": {"login": "BigPandaToo", "name": "Lyudmila Fokina"}}, "url": "https://github.com/elastic/elasticsearch/commit/0c793a9784f19c89bfe7c51a115a96a803283b1f", "committedDate": "2020-12-13T18:49:15Z", "message": "Adding \"read ingest pipeline\" cluster privilege\n\nFixing tests.\n\n Resolve #48028"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "148e9c190f2e7ce5e6cb45bb8e7a7cca6fe8a70b", "author": {"user": {"login": "BigPandaToo", "name": "Lyudmila Fokina"}}, "url": "https://github.com/elastic/elasticsearch/commit/148e9c190f2e7ce5e6cb45bb8e7a7cca6fe8a70b", "committedDate": "2020-12-14T15:19:58Z", "message": "Adding \"read ingest pipeline\" cluster privilege\n\nFixing tests.\n\n Resolve #48028"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "72c3a125b92ccdf44a03962aa686d47761476993", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/72c3a125b92ccdf44a03962aa686d47761476993", "committedDate": "2020-12-14T15:21:14Z", "message": "Merge branch 'master' into Read_ingest_pipeline"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxNDg2ODkz", "url": "https://github.com/elastic/elasticsearch/pull/66137#pullrequestreview-551486893", "createdAt": "2020-12-14T15:34:53Z", "commit": {"oid": "72c3a125b92ccdf44a03962aa686d47761476993"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxNTozNDo1M1rOIFWTkQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxNTozNDo1M1rOIFWTkQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjQ3OTI0OQ==", "bodyText": "This particular rename won't work flawlessly in a mixed cluster upgrade scenario, because the action is a TransportMasterNodeReadAction.\nSay a non-master node has been upgraded, but the master hasn't yet. If the get pipelines REST request hits the upgraded non-master node, it will forward the transport request to the master node, but it will ask for the renamed action of which master doesn't know about.", "url": "https://github.com/elastic/elasticsearch/pull/66137#discussion_r542479249", "createdAt": "2020-12-14T15:34:53Z", "author": {"login": "albertzaharovits"}, "path": "server/src/main/java/org/elasticsearch/action/ingest/GetPipelineAction.java", "diffHunk": "@@ -24,7 +24,7 @@\n public class GetPipelineAction extends ActionType<GetPipelineResponse> {\n \n     public static final GetPipelineAction INSTANCE = new GetPipelineAction();\n-    public static final String NAME = \"cluster:admin/ingest/pipeline/get\";\n+    public static final String NAME = \"cluster:monitor/ingest/pipeline/get\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72c3a125b92ccdf44a03962aa686d47761476993"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxNTE5MDY1", "url": "https://github.com/elastic/elasticsearch/pull/66137#pullrequestreview-551519065", "createdAt": "2020-12-14T16:06:50Z", "commit": {"oid": "72c3a125b92ccdf44a03962aa686d47761476993"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxNjowNjo1MFrOIFX4sA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxNjowNjo1MFrOIFX4sA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjUwNTEzNg==", "bodyText": "This is a cluster privilege, but it is documented under index privileges.", "url": "https://github.com/elastic/elasticsearch/pull/66137#discussion_r542505136", "createdAt": "2020-12-14T16:06:50Z", "author": {"login": "albertzaharovits"}, "path": "x-pack/docs/en/security/authorization/privileges.asciidoc", "diffHunk": "@@ -288,6 +288,9 @@ clear_scroll, search, suggest, tv).\n `read_cross_cluster`::\n Read-only access to the search action from a <<cross-cluster-configuring,remote cluster>>.\n \n+`read_ingest_pipelines`::\n+Read-only access to ingest pipline (get, simulate).\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72c3a125b92ccdf44a03962aa686d47761476993"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d9952e242d8fe03959445062f64efda3cc617a13", "author": {"user": {"login": "BigPandaToo", "name": "Lyudmila Fokina"}}, "url": "https://github.com/elastic/elasticsearch/commit/d9952e242d8fe03959445062f64efda3cc617a13", "committedDate": "2020-12-14T19:46:09Z", "message": "Adding \"read ingest pipeline\" cluster privilege\n\nResolving bwc, renaming the action\n\nResolve #48028"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "91852258355910b2948c29efa0884224df267af2", "author": {"user": {"login": "BigPandaToo", "name": "Lyudmila Fokina"}}, "url": "https://github.com/elastic/elasticsearch/commit/91852258355910b2948c29efa0884224df267af2", "committedDate": "2020-12-14T19:50:55Z", "message": "Adding \"read ingest pipeline\" cluster privilege\n\nFixing doc\n\nResolve #48028"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2d6635c53bae19abc76a28bc748979440f80db64", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/2d6635c53bae19abc76a28bc748979440f80db64", "committedDate": "2020-12-15T08:22:45Z", "message": "Merge branch 'master' into Read_ingest_pipeline"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b1db485d4496c27620ba3a9f194e5e8920881047", "author": {"user": {"login": "BigPandaToo", "name": "Lyudmila Fokina"}}, "url": "https://github.com/elastic/elasticsearch/commit/b1db485d4496c27620ba3a9f194e5e8920881047", "committedDate": "2020-12-15T09:06:48Z", "message": "Adding \"read ingest pipeline\" cluster privilege\n\nFixing test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f9c8e4825335ec4a7aa7cc0f7a491b588404c22", "author": {"user": {"login": "BigPandaToo", "name": "Lyudmila Fokina"}}, "url": "https://github.com/elastic/elasticsearch/commit/9f9c8e4825335ec4a7aa7cc0f7a491b588404c22", "committedDate": "2020-12-15T14:55:30Z", "message": "Adding ingest pipeline privileges test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUyNTcwMzg1", "url": "https://github.com/elastic/elasticsearch/pull/66137#pullrequestreview-552570385", "createdAt": "2020-12-15T15:20:52Z", "commit": {"oid": "9f9c8e4825335ec4a7aa7cc0f7a491b588404c22"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4693, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}