{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA0NTc1MDI3", "number": 55334, "title": "[DOCS] Add collapsible sections to 7.8 breaking changes", "bodyText": "Adds collapsible sections and new format to the 7.8 breaking changes.\nRelates to #53229.\nGoals\n\nAvoid a \"wall of text.\" Let users quickly scan a list of changes to see what's applicable to them.\nAdd progressive disclosure, allowing users to get more details only if wanted.\nAdd an optional How to migrate section for documenting solutions/workarounds.\n\nOut of scope\n\nChanging the topic/grouping labels\nMoving all breaking changes for versions within a major (7.x, 8.x, etc.) onto the same page.\n\nHowever, we'll want to investigate these ideas more as part of #53229\nPreview: http://elasticsearch_55334.docs-preview.app.elstc.co/guide/en/elasticsearch/reference/7.x/breaking-changes-7.8.html", "createdAt": "2020-04-16T18:05:00Z", "url": "https://github.com/elastic/elasticsearch/pull/55334", "merged": true, "mergeCommit": {"oid": "8d05d7dacef161035c771618b8d24d1ac5a772af"}, "closed": true, "closedAt": "2020-04-22T14:56:39Z", "author": {"login": "jrodewig"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcYQlMJAH2gAyNDA0NTc1MDI3OmI2OGIzYTViYzRkNWZjNGQzNWUyMThhN2Q2Y2ZkNWUyY2YxZjhhZWU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcZ8bWbAFqTM5Nzc0Nzg5NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b68b3a5bc4d5fc4d35e218a7d6cfd5e2cf1f8aee", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/b68b3a5bc4d5fc4d35e218a7d6cfd5e2cf1f8aee", "committedDate": "2020-04-16T17:59:22Z", "message": "[DOCS] Add collapsible sections to 7.x breaking changes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk0ODg4Mjk0", "url": "https://github.com/elastic/elasticsearch/pull/55334#pullrequestreview-394888294", "createdAt": "2020-04-16T18:20:20Z", "commit": {"oid": "b68b3a5bc4d5fc4d35e218a7d6cfd5e2cf1f8aee"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQxODoyMDoyMFrOGGxtsg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQxODoyMDoyMFrOGGxtsg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTc1OTE1NA==", "bodyText": "I prefer Kibana's more generic \"Impact\".  IMO you're not telling someone \"how to migrate/upgrade\" in this section, you're telling them \"what do I have to do about it\".\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            *How to migrate* +\n          \n          \n            \n            *Impact* +", "url": "https://github.com/elastic/elasticsearch/pull/55334#discussion_r409759154", "createdAt": "2020-04-16T18:20:20Z", "author": {"login": "lcawl"}, "path": "docs/reference/migration/migrate_7_8.asciidoc", "diffHunk": "@@ -5,49 +5,65 @@\n ++++\n \n This section discusses the changes that you need to be aware of when migrating\n-your application to Elasticsearch 7.8.\n+your application to {es} 7.8.\n \n See also <<release-highlights>> and <<es-release-notes>>.\n \n coming[7.8.0]\n \n+* <<breaking_78_mappings_changes>>\n+* <<breaking_78_settings_changes>>\n+\n //NOTE: The notable-breaking-changes tagged regions are re-used in the\n //Installation and Upgrade Guide\n \n //tag::notable-breaking-changes[]\n \n-//end::notable-breaking-changes[]\n-\n-[discrete]\n-[[breaking_78_api_changes]]\n-=== API changes\n-\n-[discrete]\n-==== Deprecation of `local` parameter for get field mapping API\n-\n-The `local` parameter is a no-op and field mappings are always retrieved locally.\n-As of 7.8, this parameter is deprecated and will be removed in next major version.\n-\n [discrete]\n [[breaking_78_mappings_changes]]\n === Mappings changes\n \n-[discrete]\n [[prevent-enabled-setting-change]]\n-==== `enabled` setting cannot be changed on root mapper\n+.The `enabled` mapping parameter cannot be changed for a root mapping.\n+[%collapsible]\n+====\n+*Details* +\n+Mapping requests that attempt to change the {ref}/enabled.html[`enabled`]\n+mapping parameter for a root mapping will fail and return an error.\n+\n+Previously, {es} accepted mapping requests that attempted to change the\n+`enabled` parameter of the root mapping. Theses changes were not applied, but\n+such requests didn't return an error.\n+\n+*How to migrate* +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b68b3a5bc4d5fc4d35e218a7d6cfd5e2cf1f8aee"}, "originalPosition": 49}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk0ODkwODYy", "url": "https://github.com/elastic/elasticsearch/pull/55334#pullrequestreview-394890862", "createdAt": "2020-04-16T18:23:48Z", "commit": {"oid": "b68b3a5bc4d5fc4d35e218a7d6cfd5e2cf1f8aee"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQxODoyMzo0OFrOGGx1yQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQxODoyMzo0OFrOGGx1yQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTc2MTIyNQ==", "bodyText": "IMO it looks odd that this change doesn't have the same sections as the others.  I don't know this setting, so I'm left wondering what I need to do about this change. Do I have to take action or is this just informational? I think ideally we'd have both pieces of info for all changes.", "url": "https://github.com/elastic/elasticsearch/pull/55334#discussion_r409761225", "createdAt": "2020-04-16T18:23:48Z", "author": {"login": "lcawl"}, "path": "docs/reference/migration/migrate_7_8.asciidoc", "diffHunk": "@@ -5,49 +5,65 @@\n ++++\n \n This section discusses the changes that you need to be aware of when migrating\n-your application to Elasticsearch 7.8.\n+your application to {es} 7.8.\n \n See also <<release-highlights>> and <<es-release-notes>>.\n \n coming[7.8.0]\n \n+* <<breaking_78_mappings_changes>>\n+* <<breaking_78_settings_changes>>\n+\n //NOTE: The notable-breaking-changes tagged regions are re-used in the\n //Installation and Upgrade Guide\n \n //tag::notable-breaking-changes[]\n \n-//end::notable-breaking-changes[]\n-\n-[discrete]\n-[[breaking_78_api_changes]]\n-=== API changes\n-\n-[discrete]\n-==== Deprecation of `local` parameter for get field mapping API\n-\n-The `local` parameter is a no-op and field mappings are always retrieved locally.\n-As of 7.8, this parameter is deprecated and will be removed in next major version.\n-\n [discrete]\n [[breaking_78_mappings_changes]]\n === Mappings changes\n \n-[discrete]\n [[prevent-enabled-setting-change]]\n-==== `enabled` setting cannot be changed on root mapper\n+.The `enabled` mapping parameter cannot be changed for a root mapping.\n+[%collapsible]\n+====\n+*Details* +\n+Mapping requests that attempt to change the {ref}/enabled.html[`enabled`]\n+mapping parameter for a root mapping will fail and return an error.\n+\n+Previously, {es} accepted mapping requests that attempted to change the\n+`enabled` parameter of the root mapping. Theses changes were not applied, but\n+such requests didn't return an error.\n+\n+*How to migrate* +\n+To avoid errors, do not submit mapping requests that change the\n+{ref}/enabled.html[`enabled`] mapping parameter.\n+====\n \n-Previously, Elasticsearch accepted mapping updates that tried to change the\n-`enabled` setting on the root mapping. The update was not applied, but the\n-request didn't throw an error. As of 7.8, requests that attempt to change\n-`enabled` on the root mapping will fail.\n+.The get field mapping API's `local` query parameter is deprecated.\n+[%collapsible]\n+====\n+*Details* +\n+The {ref}/indices-get-field-mapping.html[get field mapping API]'s `local` query\n+parameter is deprecated and will be removed in {es} 8.0.0.\n+\n+The `local` parameter is a no-op. The API always retrieves field mappings\n+locally.\n+\n+*How to migrate* +\n+To avoid deprecation warnings, discontinue use of the `local` parameter.\n+====\n \n [discrete]\n [[breaking_78_settings_changes]]\n === Settings changes\n \n-[discrete]\n [[deprecate-node-local-storage]]\n-==== `node.local_storage` is deprecated\n+.The `node.local_storage` setting is deprecated\n+[%collapsible]\n+====\n+The `node.local_storage` setting is deprecated. In {es} 8.0.0, all nodes require", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b68b3a5bc4d5fc4d35e218a7d6cfd5e2cf1f8aee"}, "originalPosition": 82}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "20db1c358f3156306b125630dca3434e52ebba57", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/20db1c358f3156306b125630dca3434e52ebba57", "committedDate": "2020-04-16T19:47:00Z", "message": "iter"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d9d7f66f85734ee98e9355ad35c13afb66a79eaf", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/d9d7f66f85734ee98e9355ad35c13afb66a79eaf", "committedDate": "2020-04-16T20:42:43Z", "message": "iter"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "49dad7493534b8dd925879f877802965a63e6400", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/49dad7493534b8dd925879f877802965a63e6400", "committedDate": "2020-04-16T21:01:27Z", "message": "Merge remote-tracking branch 'upstream/7.x' into docs__add-collapsible-sections-breaking-changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cabbf01903d24ee230d7f58ce416a7f406a68c9a", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/cabbf01903d24ee230d7f58ce416a7f406a68c9a", "committedDate": "2020-04-16T21:13:20Z", "message": "add anchors"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1MzU1OTg0", "url": "https://github.com/elastic/elasticsearch/pull/55334#pullrequestreview-395355984", "createdAt": "2020-04-17T10:54:21Z", "commit": {"oid": "cabbf01903d24ee230d7f58ce416a7f406a68c9a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2OTA5NDM0", "url": "https://github.com/elastic/elasticsearch/pull/55334#pullrequestreview-396909434", "createdAt": "2020-04-21T00:31:25Z", "commit": {"oid": "cabbf01903d24ee230d7f58ce416a7f406a68c9a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3NzQ3ODk0", "url": "https://github.com/elastic/elasticsearch/pull/55334#pullrequestreview-397747894", "createdAt": "2020-04-21T23:38:22Z", "commit": {"oid": "cabbf01903d24ee230d7f58ce416a7f406a68c9a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3245, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}