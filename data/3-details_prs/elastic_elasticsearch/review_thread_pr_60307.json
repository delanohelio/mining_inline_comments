{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU3ODY2MTA2", "number": 60307, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNDo1ODozMFrOES2tCA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNDo1ODozMFrOES2tCA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4MjA2MDg4OnYy", "diffSide": "LEFT", "path": "server/src/internalClusterTest/java/org/elasticsearch/snapshots/ConcurrentSnapshotsIT.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNDo1ODozMFrOG4Q5-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNDo1ODozMFrOG4Q5-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTY1MDQyNQ==", "bodyText": "Most of the time these go through just fine because we retry the delete requests one node disconnect and then they get batched up with the already running deletes from the previous master and all is well.\nBut if we fail over twice then the second fail-over will resolve the listeners with exceptions (this is on purpose, we don't want to be retrying (hence the exception wrapping) in this case yet again because we then get a mix of snapshot not found exception successful execution depending on the timing).", "url": "https://github.com/elastic/elasticsearch/pull/60307#discussion_r461650425", "createdAt": "2020-07-28T14:58:30Z", "author": {"login": "original-brownbear"}, "path": "server/src/internalClusterTest/java/org/elasticsearch/snapshots/ConcurrentSnapshotsIT.java", "diffHunk": "@@ -468,8 +469,15 @@ public void testMasterFailOverWithQueuedDeletes() throws Exception {\n         unblockNode(repoName, dataNode);\n         unblockNode(repoName, dataNode2);\n \n-        assertAcked(firstDeleteFuture.get());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5590f35df4b702f549de6dee715f9e7245b90554"}, "originalPosition": 12}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2770, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}