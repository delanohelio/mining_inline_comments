{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk4NDI4ODE5", "number": 63313, "title": "[Transform] disallow field and script being empty for group sources", "bodyText": "fail validation earlier when field and script are both missing in a group source.\nNote: This just lets validation fail earlier, before this change an invalid configuration with no field and no script failed at runtime with 500, now it will fail at parsing time with a 400 and have a less confusing error message. The tests should not create illegal random configurations. HLRC won't allow creating a broken object anymore, however I do not consider this breaking.", "createdAt": "2020-10-06T10:19:14Z", "url": "https://github.com/elastic/elasticsearch/pull/63313", "merged": true, "mergeCommit": {"oid": "6f7cee70c0ef79684af5e3535bd7d7380e26723c"}, "closed": true, "closedAt": "2020-10-06T14:57:33Z", "author": {"login": "hendrikmuhs"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdP1WoLgH2gAyNDk4NDI4ODE5OjJhNTkxMDM0MmQ1NzJjZjE2NTk1OGNmYzAxYmEzOWNjNjhlMDRmZjc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdP3xOtgFqTUwMjg5ODQzNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2a5910342d572cf165958cfc01ba39cc68e04ff7", "author": {"user": {"login": "hendrikmuhs", "name": "Hendrik Muhs"}}, "url": "https://github.com/elastic/elasticsearch/commit/2a5910342d572cf165958cfc01ba39cc68e04ff7", "committedDate": "2020-10-06T09:55:47Z", "message": "disallow field and script being empty for group sources"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyODQzNzYw", "url": "https://github.com/elastic/elasticsearch/pull/63313#pullrequestreview-502843760", "createdAt": "2020-10-06T11:34:10Z", "commit": {"oid": "2a5910342d572cf165958cfc01ba39cc68e04ff7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxMTozNDoxMFrOHdCAjg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxMTozNDoxMFrOHdCAjg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDIwMzY2Mg==", "bodyText": "The parser is for receiving data from the server. Consequently, it should follow the same leniency that the lenient server parser has.\nSo, I don't think this declaration should be here (same for the rest of the HLRC group sources).", "url": "https://github.com/elastic/elasticsearch/pull/63313#discussion_r500203662", "createdAt": "2020-10-06T11:34:10Z", "author": {"login": "benwtrent"}, "path": "client/rest-high-level/src/main/java/org/elasticsearch/client/transform/transforms/pivot/TermsGroupSource.java", "diffHunk": "@@ -42,6 +42,8 @@\n         PARSER.declareString(optionalConstructorArg(), FIELD);\n         Script.declareScript(PARSER, optionalConstructorArg(), SCRIPT);\n         PARSER.declareBoolean(optionalConstructorArg(), MISSING_BUCKET);\n+        // either a script or a field must be declared, or both\n+        PARSER.declareRequiredFieldSet(FIELD.getPreferredName(), SCRIPT.getPreferredName());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2a5910342d572cf165958cfc01ba39cc68e04ff7"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "16585ca41ff747b555967bd445269f0a739433af", "author": {"user": {"login": "hendrikmuhs", "name": "Hendrik Muhs"}}, "url": "https://github.com/elastic/elasticsearch/commit/16585ca41ff747b555967bd445269f0a739433af", "committedDate": "2020-10-06T12:24:48Z", "message": "revert hlrc changes, only alter tests, so they cover field==null, which can\nbe valid"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyODk4NDM3", "url": "https://github.com/elastic/elasticsearch/pull/63313#pullrequestreview-502898437", "createdAt": "2020-10-06T12:44:39Z", "commit": {"oid": "16585ca41ff747b555967bd445269f0a739433af"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4305, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}