{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg2NjMzNDIw", "number": 62313, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxMzo1OTo0NFrOEjJZzw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxMzo1OTo0NFrOEjJZzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1Mjg5Njc5OnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/enrich/src/main/java/org/elasticsearch/xpack/enrich/EnrichPolicyRunner.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxMzo1OTo0NFrOHRVxXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNDowMzoyMlrOHRWAXA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzk0NDU0Mw==", "bodyText": "policyName is missing as argument.", "url": "https://github.com/elastic/elasticsearch/pull/62313#discussion_r487944543", "createdAt": "2020-09-14T13:59:44Z", "author": {"login": "martijnvg"}, "path": "x-pack/plugin/enrich/src/main/java/org/elasticsearch/xpack/enrich/EnrichPolicyRunner.java", "diffHunk": "@@ -352,8 +355,39 @@ private void transferDataToEnrichIndex(final String destinationIndexName) {\n             public void onResponse(BulkByScrollResponse bulkByScrollResponse) {\n                 // Do we want to fail the request if there were failures during the reindex process?\n                 if (bulkByScrollResponse.getBulkFailures().size() > 0) {\n+                    logger.warn(\n+                        \"Policy [{}]: encountered [{}] bulk failures. Turn on DEBUG logging for details.\",\n+                        policyName,\n+                        bulkByScrollResponse.getBulkFailures().size()\n+                    );\n+                    for (BulkItemResponse.Failure failure : bulkByScrollResponse.getBulkFailures()) {\n+                        logger.debug(\n+                            new ParameterizedMessage(\n+                                \"Policy [{}]: bulk index failed for index [{}], id [{}]\",\n+                                failure.getIndex(),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9d89cb45e7adbe1b4341950417809f73ce37c653"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzk0ODM4MA==", "bodyText": "fixed :D. Also wrapped in a logger.isDebugEnabled() as there is no point in looping over them unless debug is enabled", "url": "https://github.com/elastic/elasticsearch/pull/62313#discussion_r487948380", "createdAt": "2020-09-14T14:03:22Z", "author": {"login": "benwtrent"}, "path": "x-pack/plugin/enrich/src/main/java/org/elasticsearch/xpack/enrich/EnrichPolicyRunner.java", "diffHunk": "@@ -352,8 +355,39 @@ private void transferDataToEnrichIndex(final String destinationIndexName) {\n             public void onResponse(BulkByScrollResponse bulkByScrollResponse) {\n                 // Do we want to fail the request if there were failures during the reindex process?\n                 if (bulkByScrollResponse.getBulkFailures().size() > 0) {\n+                    logger.warn(\n+                        \"Policy [{}]: encountered [{}] bulk failures. Turn on DEBUG logging for details.\",\n+                        policyName,\n+                        bulkByScrollResponse.getBulkFailures().size()\n+                    );\n+                    for (BulkItemResponse.Failure failure : bulkByScrollResponse.getBulkFailures()) {\n+                        logger.debug(\n+                            new ParameterizedMessage(\n+                                \"Policy [{}]: bulk index failed for index [{}], id [{}]\",\n+                                failure.getIndex(),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzk0NDU0Mw=="}, "originalCommit": {"oid": "9d89cb45e7adbe1b4341950417809f73ce37c653"}, "originalPosition": 37}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1546, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}