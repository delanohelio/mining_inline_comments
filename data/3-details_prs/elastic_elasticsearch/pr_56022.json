{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDExNDU4OTg2", "number": 56022, "title": "Get index includes parent data stream for backing indices", "bodyText": "The GET <index> endpoint now includes the name of the parent data stream for any backing indices.\nRelates to #53100.", "createdAt": "2020-04-30T12:57:39Z", "url": "https://github.com/elastic/elasticsearch/pull/56022", "merged": true, "mergeCommit": {"oid": "117055d49e6bed1c553ed937c6a5a54e89a37f9a"}, "closed": true, "closedAt": "2020-05-05T18:40:16Z", "author": {"login": "danhermann"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABccsm4NgH2gAyNDExNDU4OTg2OmNmMWY0YTVkZmNmOWM2ZDQzN2FjMGQzMjczZmEyYThiYTkxOTE3YTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABceZJxxgFqTQwNjA3OTk5NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "cf1f4a5dfcf9c6d437ac0d3273fa2a8ba91917a2", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/cf1f4a5dfcf9c6d437ac0d3273fa2a8ba91917a2", "committedDate": "2020-04-30T12:54:15Z", "message": " includes parent data stream for backing indices"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0ODM5MzU4", "url": "https://github.com/elastic/elasticsearch/pull/56022#pullrequestreview-404839358", "createdAt": "2020-05-04T09:41:01Z", "commit": {"oid": "cf1f4a5dfcf9c6d437ac0d3273fa2a8ba91917a2"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQwOTo0MTowMVrOGP5PSA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQwOTo0MToyMlrOGP5QIw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTMxOTYyNA==", "bodyText": "I think this de-serialization logic needs to be inside a version check.\nI think this is why the mixed cluster tests have failed.", "url": "https://github.com/elastic/elasticsearch/pull/56022#discussion_r419319624", "createdAt": "2020-05-04T09:41:01Z", "author": {"login": "martijnvg"}, "path": "server/src/main/java/org/elasticsearch/action/admin/indices/get/GetIndexResponse.java", "diffHunk": "@@ -126,6 +131,13 @@ public GetIndexResponse(String[] indices,\n             defaultSettingsMapBuilder.put(in.readString(), Settings.readSettingsFromStream(in));\n         }\n         defaultSettings = defaultSettingsMapBuilder.build();\n+\n+        ImmutableOpenMap.Builder<String, String> dataStreamsMapBuilder = ImmutableOpenMap.builder();\n+        int dataStreamsSize = in.readVInt();\n+        for (int i = 0; i < dataStreamsSize; i++) {\n+            dataStreamsMapBuilder.put(in.readString(), in.readOptionalString());\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cf1f4a5dfcf9c6d437ac0d3273fa2a8ba91917a2"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTMxOTg0Mw==", "bodyText": "Same applies for this serialization logic.", "url": "https://github.com/elastic/elasticsearch/pull/56022#discussion_r419319843", "createdAt": "2020-05-04T09:41:22Z", "author": {"login": "martijnvg"}, "path": "server/src/main/java/org/elasticsearch/action/admin/indices/get/GetIndexResponse.java", "diffHunk": "@@ -233,6 +253,11 @@ public void writeTo(StreamOutput out) throws IOException {\n             out.writeString(indexEntry.key);\n             Settings.writeSettingsToStream(indexEntry.value, out);\n         }\n+        out.writeVInt(dataStreams.size());\n+        for (ObjectObjectCursor<String, String> indexEntry : dataStreams) {\n+            out.writeString(indexEntry.key);\n+            out.writeOptionalString(indexEntry.value);\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cf1f4a5dfcf9c6d437ac0d3273fa2a8ba91917a2"}, "originalPosition": 64}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3900ec86704f0002862597164f907d64e3046d7d", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/3900ec86704f0002862597164f907d64e3046d7d", "committedDate": "2020-05-04T13:33:47Z", "message": "versioning for response"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cbaca6f0d3b586a7f1d468f9417dbafa5dc0c9ed", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/cbaca6f0d3b586a7f1d468f9417dbafa5dc0c9ed", "committedDate": "2020-05-04T14:33:28Z", "message": "fix test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ffdd65c80e307104cfc3e9d57efdc79a2ffbc5be", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/ffdd65c80e307104cfc3e9d57efdc79a2ffbc5be", "committedDate": "2020-05-04T14:50:29Z", "message": "Merge branch 'master' into get_parent_data_stream"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1MjYxODY0", "url": "https://github.com/elastic/elasticsearch/pull/56022#pullrequestreview-405261864", "createdAt": "2020-05-04T18:59:27Z", "commit": {"oid": "ffdd65c80e307104cfc3e9d57efdc79a2ffbc5be"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA2MDc5OTk1", "url": "https://github.com/elastic/elasticsearch/pull/56022#pullrequestreview-406079995", "createdAt": "2020-05-05T19:12:33Z", "commit": {"oid": "ffdd65c80e307104cfc3e9d57efdc79a2ffbc5be"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxOToxMjozNFrOGQ3z2g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxOToxMjozNFrOGQ3z2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDM0NDc5NA==", "bodyText": "I wonder if this should not be a private method on TransportGetIndexAction instead? Seems it mainly translates from the lookup to the map structure.", "url": "https://github.com/elastic/elasticsearch/pull/56022#discussion_r420344794", "createdAt": "2020-05-05T19:12:34Z", "author": {"login": "henningandersen"}, "path": "server/src/main/java/org/elasticsearch/cluster/metadata/Metadata.java", "diffHunk": "@@ -401,6 +401,24 @@ public boolean equalsAliases(Metadata other) {\n         return indexMapBuilder.build();\n     }\n \n+    /**\n+     * Finds the parent data streams, if any, for the specified concrete indices.\n+     */\n+    public ImmutableOpenMap<String, IndexAbstraction.DataStream> findDataStreams(String[] concreteIndices) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ffdd65c80e307104cfc3e9d57efdc79a2ffbc5be"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 158, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}