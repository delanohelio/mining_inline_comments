{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ0MTA3MDYw", "number": 59021, "title": "Check acknowledged responses in FsSearchableSnapshotsIT", "bodyText": "Despite all my attempts I did not manage to reproduce issues like the ones described in #58961. My guess is that the _mount request got retried at some point but I wasn't able to validate this assumption.\nStill, the FsSearchableSnapshotsIT can be pretty disk heavy if a small random chunk size and a large number of documents is picked up in the tests. The parent class also does not verify the acknowledged status of some requests.\nThis pull requests lowers down the chunk size and number of docs in tests (this is extensively tests in unit tests) and also adds assertions on acknowledged responses.", "createdAt": "2020-07-03T15:18:55Z", "url": "https://github.com/elastic/elasticsearch/pull/59021", "merged": true, "mergeCommit": {"oid": "0c2b689b8c69ccf5d2d96267e903f877178a7a23"}, "closed": true, "closedAt": "2020-07-05T08:49:53Z", "author": {"login": "tlrx"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcxU6NPgH2gAyNDQ0MTA3MDYwOjk1MDcwNjUyYzVlNmU5ODdiYTFkNmQ1NTBkMTlkOWQ1MGFlYjM3NDM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcxVgpNAH2gAyNDQ0MTA3MDYwOjhmMTA2MmY2N2IwYTkwNzYzYTMzNjA0YjZkYTJjYzQ1NjliMWI0NjY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "95070652c5e6e987ba1d6d550d19d9d50aeb3743", "author": {"user": {"login": "tlrx", "name": "Tanguy Leroux"}}, "url": "https://github.com/elastic/elasticsearch/commit/95070652c5e6e987ba1d6d550d19d9d50aeb3743", "committedDate": "2020-07-03T15:10:03Z", "message": "Check acknowledged responses in FsSearchableSnapshotsIT"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyNDc3NTM1", "url": "https://github.com/elastic/elasticsearch/pull/59021#pullrequestreview-442477535", "createdAt": "2020-07-03T15:25:45Z", "commit": {"oid": "95070652c5e6e987ba1d6d550d19d9d50aeb3743"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QxNToyNTo0NVrOGszdlw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QxNToyNTo0NVrOGszdlw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTYzMzY4Nw==", "bodyText": "I think we should keep this, maybe rarely(), or else we'll never test any of the code paths for multi-chunk files.", "url": "https://github.com/elastic/elasticsearch/pull/59021#discussion_r449633687", "createdAt": "2020-07-03T15:25:45Z", "author": {"login": "DaveCTurner"}, "path": "x-pack/plugin/searchable-snapshots/qa/rest/src/test/java/org/elasticsearch/xpack/searchablesnapshots/rest/FsSearchableSnapshotsIT.java", "diffHunk": "@@ -19,14 +18,8 @@ protected String repositoryType() {\n \n     @Override\n     protected Settings repositorySettings() {\n-        final Settings.Builder settings = Settings.builder();\n-        settings.put(\"location\", System.getProperty(\"tests.path.repo\"));\n-        if (randomBoolean()) {\n-            settings.put(\"compress\", randomBoolean());\n-        }\n-        if (randomBoolean()) {\n-            settings.put(\"chunk_size\", randomIntBetween(100, 1000), ByteSizeUnit.BYTES);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "95070652c5e6e987ba1d6d550d19d9d50aeb3743"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8f1062f67b0a90763a33604b6da2cc4569b1b466", "author": {"user": {"login": "tlrx", "name": "Tanguy Leroux"}}, "url": "https://github.com/elastic/elasticsearch/commit/8f1062f67b0a90763a33604b6da2cc4569b1b466", "committedDate": "2020-07-03T15:52:02Z", "message": "spotless"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2254, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}