{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgxMzc1ODgx", "number": 62058, "title": "Convert RangeFieldMapper to parametrized form", "bodyText": "This also adds the ability to define a serialization predicate on Parameters, used\nin this case to only serialize format and locale parameters if the mapper is a\ndate range.", "createdAt": "2020-09-07T13:09:31Z", "url": "https://github.com/elastic/elasticsearch/pull/62058", "merged": true, "mergeCommit": {"oid": "3937b204a2fe2bf0a3065da9d0c0c38b2cbf8573"}, "closed": true, "closedAt": "2020-09-08T17:39:18Z", "author": {"login": "romseygeek"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdGitArgH2gAyNDgxMzc1ODgxOjRlZmNiZDUyNWRkM2U1ODllNjU1YjI2M2Q2NjU2MWU3YjE1NjkzYzQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdG57J9gH2gAyNDgxMzc1ODgxOjQ1MTQxZDEwYWJiMDJmMzc3MjNhMTk2YzgxMzUwZGE0Zjg3MzM4OTA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4efcbd525dd3e589e655b263d66561e7b15693c4", "author": {"user": {"login": "romseygeek", "name": "Alan Woodward"}}, "url": "https://github.com/elastic/elasticsearch/commit/4efcbd525dd3e589e655b263d66561e7b15693c4", "committedDate": "2020-09-07T13:06:43Z", "message": "Convert RangeFieldMapper to parametrized form"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "455dce213b5338679964affaaf3182be97363138", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/455dce213b5338679964affaaf3182be97363138", "committedDate": "2020-09-07T13:31:07Z", "message": "Merge branch 'master' into mapper/rangefield"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzNTcxMTYx", "url": "https://github.com/elastic/elasticsearch/pull/62058#pullrequestreview-483571161", "createdAt": "2020-09-07T13:52:33Z", "commit": {"oid": "455dce213b5338679964affaaf3182be97363138"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxMzo1MjozM1rOHOAJXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxMzo1MzoyMlrOHOALTA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDQ0NDUxMQ==", "bodyText": "Should this just be a BooleanSupplier? If includeDefaults is false would you ever include it?", "url": "https://github.com/elastic/elasticsearch/pull/62058#discussion_r484444511", "createdAt": "2020-09-07T13:52:33Z", "author": {"login": "nik9000"}, "path": "server/src/main/java/org/elasticsearch/index/mapper/ParametrizedFieldMapper.java", "diffHunk": "@@ -145,6 +146,7 @@ protected final void doXContentBody(XContentBuilder builder, boolean includeDefa\n         private boolean acceptsNull = false;\n         private Consumer<T> validator = null;\n         private Serializer<T> serializer = XContentBuilder::field;\n+        private Predicate<Boolean> serializerPredicate = id -> true;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "455dce213b5338679964affaaf3182be97363138"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDQ0NTAwNA==", "bodyText": "It feels weird to make it a Predicate because it isn't really a predicate on the boolean, it is a predicate on the state of the field mapper.", "url": "https://github.com/elastic/elasticsearch/pull/62058#discussion_r484445004", "createdAt": "2020-09-07T13:53:22Z", "author": {"login": "nik9000"}, "path": "server/src/main/java/org/elasticsearch/index/mapper/ParametrizedFieldMapper.java", "diffHunk": "@@ -145,6 +146,7 @@ protected final void doXContentBody(XContentBuilder builder, boolean includeDefa\n         private boolean acceptsNull = false;\n         private Consumer<T> validator = null;\n         private Serializer<T> serializer = XContentBuilder::field;\n+        private Predicate<Boolean> serializerPredicate = id -> true;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDQ0NDUxMQ=="}, "originalCommit": {"oid": "455dce213b5338679964affaaf3182be97363138"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d4d627d6fce01163aa4cb43899fd18592cd3d2f8", "author": {"user": {"login": "romseygeek", "name": "Alan Woodward"}}, "url": "https://github.com/elastic/elasticsearch/commit/d4d627d6fce01163aa4cb43899fd18592cd3d2f8", "committedDate": "2020-09-07T14:06:56Z", "message": "Convert RangeFieldMapper to parametrized form"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b9a52a754a65f1901da6fe8c3acbb2f23b0d49b", "author": {"user": {"login": "romseygeek", "name": "Alan Woodward"}}, "url": "https://github.com/elastic/elasticsearch/commit/7b9a52a754a65f1901da6fe8c3acbb2f23b0d49b", "committedDate": "2020-09-07T14:10:22Z", "message": "use booleansupplier"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ad40917758564ad2fbc55e34ced4afbcc9f6b45c", "author": {"user": {"login": "romseygeek", "name": "Alan Woodward"}}, "url": "https://github.com/elastic/elasticsearch/commit/ad40917758564ad2fbc55e34ced4afbcc9f6b45c", "committedDate": "2020-09-07T14:12:30Z", "message": "Merge remote-tracking branch 'romseygeek/mapper/rangefield' into mapper/rangefield"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "12fe03ddf8dc4e3e92b586d9bd8221d8f2d2a77c", "author": {"user": {"login": "romseygeek", "name": "Alan Woodward"}}, "url": "https://github.com/elastic/elasticsearch/commit/12fe03ddf8dc4e3e92b586d9bd8221d8f2d2a77c", "committedDate": "2020-09-07T14:29:31Z", "message": "sake"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0MDc5Mzc0", "url": "https://github.com/elastic/elasticsearch/pull/62058#pullrequestreview-484079374", "createdAt": "2020-09-08T12:25:00Z", "commit": {"oid": "12fe03ddf8dc4e3e92b586d9bd8221d8f2d2a77c"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxMjoyNTowMVrOHOaahg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxMjoyNTowMVrOHOaahg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDg3NDg4Ng==", "bodyText": "Maybe change the name of this method? shouldSerializeDefault or something?", "url": "https://github.com/elastic/elasticsearch/pull/62058#discussion_r484874886", "createdAt": "2020-09-08T12:25:01Z", "author": {"login": "nik9000"}, "path": "server/src/main/java/org/elasticsearch/index/mapper/ParametrizedFieldMapper.java", "diffHunk": "@@ -229,6 +231,16 @@ public boolean isConfigured() {\n             return this;\n         }\n \n+        /**\n+         * Set a serialization predicate for this parameter.\n+         *\n+         * The predicate is passed the value of `include_defaults`\n+         */\n+        public Parameter<T> setSerializerPredicate(BooleanSupplier serializerPredicate) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "12fe03ddf8dc4e3e92b586d9bd8221d8f2d2a77c"}, "originalPosition": 25}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2077fe3caaabe8cb1a12ea264b21aded382321a6", "author": {"user": {"login": "romseygeek", "name": "Alan Woodward"}}, "url": "https://github.com/elastic/elasticsearch/commit/2077fe3caaabe8cb1a12ea264b21aded382321a6", "committedDate": "2020-09-08T12:36:55Z", "message": "Merge remote-tracking branch 'origin/master' into mapper/rangefield"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "794448035c3024bacbfd24760a8517d6715a9f74", "author": {"user": {"login": "romseygeek", "name": "Alan Woodward"}}, "url": "https://github.com/elastic/elasticsearch/commit/794448035c3024bacbfd24760a8517d6715a9f74", "committedDate": "2020-09-08T12:40:44Z", "message": "names are hard"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "21928199cd09efaab029026e6beeb0e43a59d048", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/21928199cd09efaab029026e6beeb0e43a59d048", "committedDate": "2020-09-08T13:55:33Z", "message": "Merge branch 'master' into mapper/rangefield"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "af1dc62ed2d7488bd98b9ef5fbb89317f38b6b24", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/af1dc62ed2d7488bd98b9ef5fbb89317f38b6b24", "committedDate": "2020-09-08T15:37:04Z", "message": "Merge branch 'master' into mapper/rangefield"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "45141d10abb02f37723a196c81350da4f8733890", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/45141d10abb02f37723a196c81350da4f8733890", "committedDate": "2020-09-08T16:09:59Z", "message": "Merge branch 'master' into mapper/rangefield"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4726, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}