{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUxNDczMzU5", "number": 59816, "title": "Remaining queries for long script field", "bodyText": "Adds the terms and range queries for long typed script fields.\nIt also fixes a bug in a few of toString tests for keyword typed\nscript fields.\nRelates to #59332", "createdAt": "2020-07-17T21:26:17Z", "url": "https://github.com/elastic/elasticsearch/pull/59816", "merged": true, "mergeCommit": {"oid": "0589d2e0070506def5f46c3593ae1c7f6689e64e"}, "closed": true, "closedAt": "2020-07-20T16:03:16Z", "author": {"login": "nik9000"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc16oiBAH2gAyNDUxNDczMzU5OmZlMTliZmJmZjU4NTcxMTAwYWJhZTk3OTczNjlkYmMzMmQ4OTI3ZGY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc2zLTlAFqTQ1MTcwNTE4Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "fe19bfbff58571100abae9797369dbc32d8927df", "author": {"user": {"login": "nik9000", "name": "Nik Everett"}}, "url": "https://github.com/elastic/elasticsearch/commit/fe19bfbff58571100abae9797369dbc32d8927df", "committedDate": "2020-07-17T21:22:50Z", "message": "Remaining queries for long script field\n\nAdds the `terms` and `range` queries for `long` typed `script` fields.\nIt also fixes a bug in a few of `toString` tests for `keyword` typed\n`script` fields."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "462e937dcdf0c5c2575a2491ac4a9ab4dbbe19ff", "author": {"user": {"login": "nik9000", "name": "Nik Everett"}}, "url": "https://github.com/elastic/elasticsearch/commit/462e937dcdf0c5c2575a2491ac4a9ab4dbbe19ff", "committedDate": "2020-07-17T21:44:52Z", "message": "Ooops"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1f8bbf38f7fdb9a5f8c076a2759636d5fca819af", "author": {"user": {"login": "nik9000", "name": "Nik Everett"}}, "url": "https://github.com/elastic/elasticsearch/commit/1f8bbf38f7fdb9a5f8c076a2759636d5fca819af", "committedDate": "2020-07-20T13:55:16Z", "message": "oops"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxNjI4MTY4", "url": "https://github.com/elastic/elasticsearch/pull/59816#pullrequestreview-451628168", "createdAt": "2020-07-20T13:54:53Z", "commit": {"oid": "462e937dcdf0c5c2575a2491ac4a9ab4dbbe19ff"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxMzo1NDo1NFrOG0N47g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxMzo1NTo0NFrOG0N8Pg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzQwNjcwMg==", "bodyText": "functions are cool, but couldn't we have a shared method that does the boiler-plate range conversion, which is called when creating the lucene query?", "url": "https://github.com/elastic/elasticsearch/pull/59816#discussion_r457406702", "createdAt": "2020-07-20T13:54:54Z", "author": {"login": "javanna"}, "path": "server/src/main/java/org/elasticsearch/index/mapper/NumberFieldMapper.java", "diffHunk": "@@ -906,6 +880,51 @@ public static long objectToLong(Object value, boolean coerce) {\n             String stringValue = (value instanceof BytesRef) ? ((BytesRef) value).utf8ToString() : value.toString();\n             return Numbers.toLong(stringValue, coerce);\n         }\n+\n+        @FunctionalInterface\n+        public interface RangeQueryBuilder {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "462e937dcdf0c5c2575a2491ac4a9ab4dbbe19ff"}, "originalPosition": 77}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzQwNzU1MA==", "bodyText": "potentially, that could even be pushed upstream? I would love to not have changes to this mapper as part of the feature branch, if possible.", "url": "https://github.com/elastic/elasticsearch/pull/59816#discussion_r457407550", "createdAt": "2020-07-20T13:55:44Z", "author": {"login": "javanna"}, "path": "server/src/main/java/org/elasticsearch/index/mapper/NumberFieldMapper.java", "diffHunk": "@@ -906,6 +880,51 @@ public static long objectToLong(Object value, boolean coerce) {\n             String stringValue = (value instanceof BytesRef) ? ((BytesRef) value).utf8ToString() : value.toString();\n             return Numbers.toLong(stringValue, coerce);\n         }\n+\n+        @FunctionalInterface\n+        public interface RangeQueryBuilder {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzQwNjcwMg=="}, "originalCommit": {"oid": "462e937dcdf0c5c2575a2491ac4a9ab4dbbe19ff"}, "originalPosition": 77}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b3ea16ea5e2b84360bdd7313079a8278b3e305e1", "author": {"user": {"login": "nik9000", "name": "Nik Everett"}}, "url": "https://github.com/elastic/elasticsearch/commit/b3ea16ea5e2b84360bdd7313079a8278b3e305e1", "committedDate": "2020-07-20T15:05:03Z", "message": "BiFunction"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxNzA1MTgz", "url": "https://github.com/elastic/elasticsearch/pull/59816#pullrequestreview-451705183", "createdAt": "2020-07-20T15:15:30Z", "commit": {"oid": "b3ea16ea5e2b84360bdd7313079a8278b3e305e1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4205, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}