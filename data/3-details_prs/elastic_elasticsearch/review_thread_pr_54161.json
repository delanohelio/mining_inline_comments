{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzNTA3NzI3", "number": 54161, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxNzoyMTozMlrODsKMbA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxNzoyMTozMlrODsKMbA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3NjMwOTU2OnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/elasticsearch/search/aggregations/bucket/composite/CompositeAggregationBuilder.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxNzoyMTozMlrOF862bA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxNzozMToxNlrOF87N3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTQyMzA4NA==", "bodyText": "Yeah... I wonder if we should set this to NONE for the time being, to prevent people from accidentally using pipelines on composite?  There's an issue flying around somewhere discussing it... but last time we chatted, we decided to punt on the decision.  Some pipelines are theoretically safe (bucket_script, operating on the bucket itself), but others like derivative are totally not kosher.", "url": "https://github.com/elastic/elasticsearch/pull/54161#discussion_r399423084", "createdAt": "2020-03-27T17:21:32Z", "author": {"login": "polyfractal"}, "path": "server/src/main/java/org/elasticsearch/search/aggregations/bucket/composite/CompositeAggregationBuilder.java", "diffHunk": "@@ -147,6 +147,15 @@ public int size() {\n         return size;\n     }\n \n+    @Override\n+    public BucketCardinality bucketCardinality() {\n+        /*\n+         * This might be a bit of a lie though because you can't really use\n+         * pipeline aggregations on composite aggregations.\n+         */\n+        return BucketCardinality.MANY;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "660e5acb59c3a2c28afb874d49e34afda2238885"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTQyOTA4Nw==", "bodyText": "Yeah. Composite is a weird beast.", "url": "https://github.com/elastic/elasticsearch/pull/54161#discussion_r399429087", "createdAt": "2020-03-27T17:31:16Z", "author": {"login": "nik9000"}, "path": "server/src/main/java/org/elasticsearch/search/aggregations/bucket/composite/CompositeAggregationBuilder.java", "diffHunk": "@@ -147,6 +147,15 @@ public int size() {\n         return size;\n     }\n \n+    @Override\n+    public BucketCardinality bucketCardinality() {\n+        /*\n+         * This might be a bit of a lie though because you can't really use\n+         * pipeline aggregations on composite aggregations.\n+         */\n+        return BucketCardinality.MANY;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTQyMzA4NA=="}, "originalCommit": {"oid": "660e5acb59c3a2c28afb874d49e34afda2238885"}, "originalPosition": 10}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4184, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}