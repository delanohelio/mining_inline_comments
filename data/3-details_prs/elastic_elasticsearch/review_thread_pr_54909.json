{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAwMzk0Mzk2", "number": 54909, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QxNzoxNTowN1rODvqUDQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QxNzoxNTowN1rODvqUDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUxMzAyOTI1OnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/ilm/src/main/java/org/elasticsearch/xpack/ilm/action/TransportStopILMAction.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QxNzoxNTowN1rOGCN4IQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQwODo0Nzo0MlrOGClNcQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk3NzY5Nw==", "bodyText": "This also needs to change the cluster state update on line 366 of IndexLifecycleService (submitOperationModeUpdate), that is the second half that moves the state from STOPPING -> STOPPED", "url": "https://github.com/elastic/elasticsearch/pull/54909#discussion_r404977697", "createdAt": "2020-04-07T17:15:07Z", "author": {"login": "dakrone"}, "path": "x-pack/plugin/ilm/src/main/java/org/elasticsearch/xpack/ilm/action/TransportStopILMAction.java", "diffHunk": "@@ -50,7 +51,8 @@ protected AcknowledgedResponse read(StreamInput in) throws IOException {\n     @Override\n     protected void masterOperation(Task task, StopILMRequest request, ClusterState state, ActionListener<AcknowledgedResponse> listener) {\n         clusterService.submitStateUpdateTask(\"ilm_operation_mode_update\",\n-                new AckedClusterStateUpdateTask<AcknowledgedResponse>(request, listener) {\n+                new AckedClusterStateUpdateTask<AcknowledgedResponse>(Priority.URGENT, request, listener) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6d6aadefd74d1dacbc08ff6ee629eaeee911dd60"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTM1OTk4NQ==", "bodyText": "Ah yes, good shout", "url": "https://github.com/elastic/elasticsearch/pull/54909#discussion_r405359985", "createdAt": "2020-04-08T08:47:42Z", "author": {"login": "andreidan"}, "path": "x-pack/plugin/ilm/src/main/java/org/elasticsearch/xpack/ilm/action/TransportStopILMAction.java", "diffHunk": "@@ -50,7 +51,8 @@ protected AcknowledgedResponse read(StreamInput in) throws IOException {\n     @Override\n     protected void masterOperation(Task task, StopILMRequest request, ClusterState state, ActionListener<AcknowledgedResponse> listener) {\n         clusterService.submitStateUpdateTask(\"ilm_operation_mode_update\",\n-                new AckedClusterStateUpdateTask<AcknowledgedResponse>(request, listener) {\n+                new AckedClusterStateUpdateTask<AcknowledgedResponse>(Priority.URGENT, request, listener) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk3NzY5Nw=="}, "originalCommit": {"oid": "6d6aadefd74d1dacbc08ff6ee629eaeee911dd60"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1160, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}