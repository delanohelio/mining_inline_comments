{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgzMjkyMzAy", "number": 62197, "title": "Deprecate the 'local' parameter of `/_cat/shards`", "bodyText": "The cat shards APIs perform a ClusterStateAction then an IndicesStatsAction. They accept the ?local parameter and pass this to the ClusterStateAction but this parameter has no effect on the IndicesStatsAction.\nThis commit deprecates the ?local parameter on this API so that it can be removed in 8.0.\nRelated #60718", "createdAt": "2020-09-10T02:31:28Z", "url": "https://github.com/elastic/elasticsearch/pull/62197", "merged": true, "mergeCommit": {"oid": "7d65278642e9b61255956a0fa5a40887bba5fc4e"}, "closed": true, "closedAt": "2020-10-29T11:58:33Z", "author": {"login": "boicehuang"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdHNL-WgH2gAyNDgzMjkyMzAyOjAzYTJlYjQ3MDcyZTIzNTYxNDc0ZDgwMGUxNzk0YjdhMmUzYjZjNzQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdXPJA_gH2gAyNDgzMjkyMzAyOmE5NjYxYTBjZGY4ZGM0YzNiOTg2NzRkZWMxMjdiODViZDcwNzNkZjA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "03a2eb47072e23561474d800e1794b7a2e3b6c74", "author": {"user": {"login": "boicehuang", "name": "Boice Huang"}}, "url": "https://github.com/elastic/elasticsearch/commit/03a2eb47072e23561474d800e1794b7a2e3b6c74", "committedDate": "2020-09-09T14:36:33Z", "message": "Deprecate 'local' parameter of /_cat/shards"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "686c53d449323c7a9138cf76931d44aeb615769f", "author": {"user": {"login": "boicehuang", "name": "Boice Huang"}}, "url": "https://github.com/elastic/elasticsearch/commit/686c53d449323c7a9138cf76931d44aeb615769f", "committedDate": "2020-09-10T01:50:49Z", "message": "optimize test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b880f5db8bd074863170cfb35c515662b97f8971", "author": {"user": {"login": "boicehuang", "name": "Boice Huang"}}, "url": "https://github.com/elastic/elasticsearch/commit/b880f5db8bd074863170cfb35c515662b97f8971", "committedDate": "2020-09-10T02:00:35Z", "message": "optimize doc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f8b80b040c9677d4a72c613a0809b3a83fd48154", "author": {"user": {"login": "boicehuang", "name": "Boice Huang"}}, "url": "https://github.com/elastic/elasticsearch/commit/f8b80b040c9677d4a72c613a0809b3a83fd48154", "committedDate": "2020-09-10T02:29:46Z", "message": "optimize code"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk0NzExMTgw", "url": "https://github.com/elastic/elasticsearch/pull/62197#pullrequestreview-494711180", "createdAt": "2020-09-23T14:18:03Z", "commit": {"oid": "f8b80b040c9677d4a72c613a0809b3a83fd48154"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QxNDoxODowM1rOHWw1FQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QxNDoxODoxMVrOHWw1bA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzYzMDc0MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=local]\n          \n          \n            \n            +\n          \n          \n            \n            --\n          \n          \n            \n            `local`::\n          \n          \n            \n            (Optional, boolean) If true, the request retrieves information from the local node\n          \n          \n            \n            only. Defaults to false, which means information is retrieved from the master node.\n          \n          \n            \n            deprecated::[8.0,This parameter does not cause this API to act locally. It will be\n          \n          \n            \n            removed in version 8.0.]\n          \n          \n            \n            --\n          \n          \n            \n            `local`::\n          \n          \n            \n            (Optional, boolean)\n          \n          \n            \n            +\n          \n          \n            \n            deprecated::[8.0.0,\"This parameter does not affect the request. It will be removed in a future version.\"]", "url": "https://github.com/elastic/elasticsearch/pull/62197#discussion_r493630741", "createdAt": "2020-09-23T14:18:03Z", "author": {"login": "danhermann"}, "path": "docs/reference/cat/shards.asciidoc", "diffHunk": "@@ -274,6 +274,14 @@ Reason the shard is unassigned. Returned values are:\n include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=help]\n \n include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=local]\n++\n+--\n+`local`::\n+(Optional, boolean) If true, the request retrieves information from the local node\n+only. Defaults to false, which means information is retrieved from the master node.\n+deprecated::[8.0,This parameter does not cause this API to act locally. It will be\n+removed in version 8.0.]\n+--", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f8b80b040c9677d4a72c613a0809b3a83fd48154"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzYzMDgyOA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                static final String LOCAL_DEPRECATED_MESSAGE = \"Deprecated parameter [local] used. This parameter does not cause this API to act \" +\n          \n          \n            \n                    \"locally, and should not be used. It will be unsupported in version 8.0.\";\n          \n          \n            \n                static final String LOCAL_DEPRECATED_MESSAGE = \"The parameter [local] is deprecated and will be removed in a future release.\";", "url": "https://github.com/elastic/elasticsearch/pull/62197#discussion_r493630828", "createdAt": "2020-09-23T14:18:11Z", "author": {"login": "danhermann"}, "path": "server/src/main/java/org/elasticsearch/rest/action/cat/RestShardsAction.java", "diffHunk": "@@ -60,6 +63,9 @@\n import static org.elasticsearch.rest.RestRequest.Method.GET;\n \n public class RestShardsAction extends AbstractCatAction {\n+    private static final DeprecationLogger DEPRECATION_LOGGER = DeprecationLogger.getLogger(RestShardsAction.class);\n+    static final String LOCAL_DEPRECATED_MESSAGE = \"Deprecated parameter [local] used. This parameter does not cause this API to act \" +\n+        \"locally, and should not be used. It will be unsupported in version 8.0.\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f8b80b040c9677d4a72c613a0809b3a83fd48154"}, "originalPosition": 23}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "464a65e77780f1a2c93add335bab379b1e6c4201", "author": {"user": {"login": "boicehuang", "name": "Boice Huang"}}, "url": "https://github.com/elastic/elasticsearch/commit/464a65e77780f1a2c93add335bab379b1e6c4201", "committedDate": "2020-10-16T09:42:15Z", "message": "Merge remote-tracking branch 'upstream/master' into deprecate_cat_shards_local"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c8ed0867f4488021c0c887725933f932edc63d2d", "author": {"user": {"login": "boicehuang", "name": "Boice Huang"}}, "url": "https://github.com/elastic/elasticsearch/commit/c8ed0867f4488021c0c887725933f932edc63d2d", "committedDate": "2020-10-16T09:55:27Z", "message": "fix some doc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ffa8d0d3763424d3f1e14644cf29c4087fe01b16", "author": {"user": {"login": "boicehuang", "name": "Boice Huang"}}, "url": "https://github.com/elastic/elasticsearch/commit/ffa8d0d3763424d3f1e14644cf29c4087fe01b16", "committedDate": "2020-10-16T09:58:29Z", "message": "fix some comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "152d3c0834a14ce6d1b71d4fd44f79e0a634dd07", "author": {"user": {"login": "boicehuang", "name": "Boice Huang"}}, "url": "https://github.com/elastic/elasticsearch/commit/152d3c0834a14ce6d1b71d4fd44f79e0a634dd07", "committedDate": "2020-10-19T00:14:47Z", "message": "Merge remote-tracking branch 'upstream/master' into deprecate_cat_shards_local"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e3deb321f7959c1ba28e8845bd1464093e56752", "author": {"user": {"login": "boicehuang", "name": "Boice Huang"}}, "url": "https://github.com/elastic/elasticsearch/commit/1e3deb321f7959c1ba28e8845bd1464093e56752", "committedDate": "2020-10-20T06:29:31Z", "message": "Merge remote-tracking branch 'upstream/master' into deprecate_cat_shards_local"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c54ee928d5e25a3bc4d51646015374885b64a1a", "author": {"user": {"login": "boicehuang", "name": "Boice Huang"}}, "url": "https://github.com/elastic/elasticsearch/commit/8c54ee928d5e25a3bc4d51646015374885b64a1a", "committedDate": "2020-10-23T03:09:36Z", "message": "removed unused imports"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3964a4ef73011ff271b105080a3fcba96bce5bbf", "author": {"user": {"login": "boicehuang", "name": "Boice Huang"}}, "url": "https://github.com/elastic/elasticsearch/commit/3964a4ef73011ff271b105080a3fcba96bce5bbf", "committedDate": "2020-10-23T09:57:38Z", "message": "Merge remote-tracking branch 'upstream/master' into deprecate_cat_shards_local"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "27d4a6eb24600a416da0bfc95b07f077db6843dc", "author": {"user": {"login": "boicehuang", "name": "Boice Huang"}}, "url": "https://github.com/elastic/elasticsearch/commit/27d4a6eb24600a416da0bfc95b07f077db6843dc", "committedDate": "2020-10-23T10:10:11Z", "message": "removed unused imports"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b906c115abb9409b8628dfce319d1929d47cf0ee", "author": {"user": {"login": "boicehuang", "name": "Boice Huang"}}, "url": "https://github.com/elastic/elasticsearch/commit/b906c115abb9409b8628dfce319d1929d47cf0ee", "committedDate": "2020-10-28T07:40:40Z", "message": "fix comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7d7328b69a7e1873855f333976db48e50cdcd538", "author": {"user": {"login": "boicehuang", "name": "Boice Huang"}}, "url": "https://github.com/elastic/elasticsearch/commit/7d7328b69a7e1873855f333976db48e50cdcd538", "committedDate": "2020-10-29T09:52:37Z", "message": "fix doc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a9661a0cdf8dc4c3b98674dec127b85bd7073df0", "author": {"user": {"login": "boicehuang", "name": "Boice Huang"}}, "url": "https://github.com/elastic/elasticsearch/commit/a9661a0cdf8dc4c3b98674dec127b85bd7073df0", "committedDate": "2020-10-29T09:55:55Z", "message": "Merge remote-tracking branch 'upstream/master' into deprecate_cat_shards_local"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4665, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}