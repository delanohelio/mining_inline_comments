{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk3ODQ2NDM4", "number": 54692, "title": "Improve robustness of Query Result serializations", "bodyText": "Makes query result serialization more robust by propagating possible\nIOExceptions that can occur during shard level result serialization to the\ncaller instead of throwing AssertionError that is not intercepted.\nFixes #54665", "createdAt": "2020-04-02T22:49:51Z", "url": "https://github.com/elastic/elasticsearch/pull/54692", "merged": true, "mergeCommit": {"oid": "af7ea67541bbe8d2aa4f7e6ca53ddae942276c74"}, "closed": true, "closedAt": "2020-04-09T19:34:56Z", "author": {"login": "imotov"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcT0TMIAH2gAyMzk3ODQ2NDM4OmUyYWU3NTVhY2FjN2FlOTFmNWEyOTY3YjUyZWYxYzAxNjI0ZDlkNzk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcVu2JWAFqTM5MDM0ODA5NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e2ae755acac7ae91f5a2967b52ef1c01624d9d79", "author": {"user": {"login": "imotov", "name": "Igor Motov"}}, "url": "https://github.com/elastic/elasticsearch/commit/e2ae755acac7ae91f5a2967b52ef1c01624d9d79", "committedDate": "2020-04-02T22:46:40Z", "message": "Improve robustness of Query Result serializations\n\nMakes query result serialization more robust by propagating possible\nIOExceptions that can occur during shard level result serialization to the\ncaller instead of throwing AssertError that is not intercepted.\n\nFixes #54665"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cf338c1746cc0b21dfa7b646b55aeae92a63c94f", "author": {"user": {"login": "imotov", "name": "Igor Motov"}}, "url": "https://github.com/elastic/elasticsearch/commit/cf338c1746cc0b21dfa7b646b55aeae92a63c94f", "committedDate": "2020-04-02T23:27:04Z", "message": "Fix imports"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg3MjE2NDcw", "url": "https://github.com/elastic/elasticsearch/pull/54692#pullrequestreview-387216470", "createdAt": "2020-04-03T12:38:09Z", "commit": {"oid": "cf338c1746cc0b21dfa7b646b55aeae92a63c94f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "97734b56f7e4fd4a89adb55bdc4189ddc325d6b4", "author": {"user": {"login": "imotov", "name": "Igor Motov"}}, "url": "https://github.com/elastic/elasticsearch/commit/97734b56f7e4fd4a89adb55bdc4189ddc325d6b4", "committedDate": "2020-04-03T15:31:49Z", "message": "Address review comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg3NDEwNzM4", "url": "https://github.com/elastic/elasticsearch/pull/54692#pullrequestreview-387410738", "createdAt": "2020-04-03T16:34:32Z", "commit": {"oid": "97734b56f7e4fd4a89adb55bdc4189ddc325d6b4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxNjozNDozMlrOGAdO6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxNjozNDozMlrOGAdO6w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzEzMjEzOQ==", "bodyText": "This should not be needed anymore, ? We should keep the error as it is.", "url": "https://github.com/elastic/elasticsearch/pull/54692#discussion_r403132139", "createdAt": "2020-04-03T16:34:32Z", "author": {"login": "jimczi"}, "path": "server/src/main/java/org/elasticsearch/indices/IndicesService.java", "diffHunk": "@@ -1374,9 +1374,8 @@ public void loadIntoContext(ShardSearchRequest request, SearchContext context, Q\n             queryPhase.execute(context);\n             try {\n                 context.queryResult().writeToNoId(out);\n-\n             } catch (IOException e) {\n-                throw new AssertionError(\"Could not serialize response\", e);\n+                throw new IllegalArgumentException(\"Could not serialize response\", e);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "97734b56f7e4fd4a89adb55bdc4189ddc325d6b4"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e97b3e8e5303ed1e8171167b3d6e7891f2a9eb4", "author": {"user": {"login": "imotov", "name": "Igor Motov"}}, "url": "https://github.com/elastic/elasticsearch/commit/2e97b3e8e5303ed1e8171167b3d6e7891f2a9eb4", "committedDate": "2020-04-06T16:55:35Z", "message": "Return back IOException handling in IndicesService"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "739aa093d3db51a6445d9b365b523a9692362633", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/739aa093d3db51a6445d9b365b523a9692362633", "committedDate": "2020-04-06T17:14:08Z", "message": "Merge branch 'master' into issue-54665-improve-query-result-serialization"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwMzQ4MDk0", "url": "https://github.com/elastic/elasticsearch/pull/54692#pullrequestreview-390348094", "createdAt": "2020-04-08T21:33:16Z", "commit": {"oid": "739aa093d3db51a6445d9b365b523a9692362633"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1318, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}