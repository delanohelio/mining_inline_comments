{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgxMDA4MTI0", "number": 52915, "title": "Remove ECast node from the Painless user tree", "bodyText": "This change removes the ECast node from the user tree, so that there are no structural changes to the user tree making it structurally immutable. All generated casts are now built directly into the ir tree instead. This also removes the isNull member variable from AExpression because now an instanceof operator can be used instead of having to pass this information between potentially multiple levels of user tree nodes.\nRelates to #49869", "createdAt": "2020-02-27T18:38:46Z", "url": "https://github.com/elastic/elasticsearch/pull/52915", "merged": true, "mergeCommit": {"oid": "5057d1d2d6fab28d83950875aba78ee4dc131c71"}, "closed": true, "closedAt": "2020-03-03T00:51:31Z", "author": {"login": "jdconrad"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcILU4BAH2gAyMzgxMDA4MTI0OjBiNzllZjZjY2UxZjEwNGRjYWUzNDgwNjRlMGY0ZTZhZTdjMDAyMDI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcJ2o-nAH2gAyMzgxMDA4MTI0OjExNWM4ZTBkYWJmZDhhZGQwZTU2MTVjNDM2NTQzZWViNmRmOGI4NzY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0b79ef6cce1f104dcae348064e0f4e6ae7c00202", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/0b79ef6cce1f104dcae348064e0f4e6ae7c00202", "committedDate": "2020-02-26T18:49:14Z", "message": "remove isNull from AExpression"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "73256422481516411cbb40a9b5b4c5adf3251bbd", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/73256422481516411cbb40a9b5b4c5adf3251bbd", "committedDate": "2020-02-26T18:54:14Z", "message": "remove explicit cast optimization"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6e414972a159844347bc414fb1b124d5335b1f58", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/6e414972a159844347bc414fb1b124d5335b1f58", "committedDate": "2020-02-26T19:51:51Z", "message": "remove modification of semantic tree for casting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "247080b292a621c41b4c8c360f40378e2bff2ea4", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/247080b292a621c41b4c8c360f40378e2bff2ea4", "committedDate": "2020-02-26T20:07:16Z", "message": "remove ECast node"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63e904f6abf0a97b2269df137f8123d4d1094775", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/63e904f6abf0a97b2269df137f8123d4d1094775", "committedDate": "2020-02-26T20:24:37Z", "message": "Merge branch 'master' into trees11"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "07180d922b792873c2c782e5173db2fea614a463", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/07180d922b792873c2c782e5173db2fea614a463", "committedDate": "2020-03-02T16:28:13Z", "message": "Merge branch 'master' into trees11"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3NTYwMDQx", "url": "https://github.com/elastic/elasticsearch/pull/52915#pullrequestreview-367560041", "createdAt": "2020-03-02T21:59:53Z", "commit": {"oid": "07180d922b792873c2c782e5173db2fea614a463"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQyMTo1OTo1M1rOFww3BQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQyMjowMjoyOVrOFww8AA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY3NjQ4NQ==", "bodyText": "can you add a comment explaining this member is transitional and a little about when and how it is set?", "url": "https://github.com/elastic/elasticsearch/pull/52915#discussion_r386676485", "createdAt": "2020-03-02T21:59:53Z", "author": {"login": "rjernst"}, "path": "modules/lang-painless/src/main/java/org/elasticsearch/painless/node/AExpression.java", "diffHunk": "@@ -83,10 +84,7 @@\n      */\n     boolean internal = false;\n \n-    /**\n-     * Set to true by {@link ENull} to represent a null value.\n-     */\n-    boolean isNull = false;\n+    PainlessCast cast = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "07180d922b792873c2c782e5173db2fea614a463"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY3Nzc2MA==", "bodyText": "Shouldn't these be uncommented?", "url": "https://github.com/elastic/elasticsearch/pull/52915#discussion_r386677760", "createdAt": "2020-03-02T22:02:29Z", "author": {"login": "rjernst"}, "path": "modules/lang-painless/src/test/java/org/elasticsearch/painless/GeneralCastTests.java", "diffHunk": "@@ -166,9 +166,9 @@ public void testMethodCallDef() {\n      * Currently these do not adopt the argument value, we issue a separate cast!\n      */\n     public void testArgumentsDef() {\n-        assertEquals(5, exec(\"def x = 5L; return (+(int)x);\"));\n+        //assertEquals(5, exec(\"def x = 5L; return (+(int)x);\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "07180d922b792873c2c782e5173db2fea614a463"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "115c8e0dabfd8add0e5615c436543eeb6df8b876", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/115c8e0dabfd8add0e5615c436543eeb6df8b876", "committedDate": "2020-03-02T23:51:02Z", "message": "response to pr comment"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2048, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}