{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU1NzQxMDIy", "number": 60126, "title": "[ML] Audit updates on data frame analytics jobs", "bodyText": "Closes #59652", "createdAt": "2020-07-23T14:19:32Z", "url": "https://github.com/elastic/elasticsearch/pull/60126", "merged": true, "mergeCommit": {"oid": "55c0568e09319d2adde06a34e820fd771a27a1a0"}, "closed": true, "closedAt": "2020-07-28T12:26:55Z", "author": {"login": "dimitris-athanasiou"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc3wIAHAH2gAyNDU1NzQxMDIyOjUzNTU4ZWQ2YTgwODRhZDg2MWZiOTA1ZjZiODVmMDQyMzllOGNlMjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc5Rg7VgFqTQ1NjM3ODkyMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "53558ed6a8084ad861fb905f6b85f04239e8ce26", "author": {"user": {"login": "dimitris-athanasiou", "name": "Dimitris Athanasiou"}}, "url": "https://github.com/elastic/elasticsearch/commit/53558ed6a8084ad861fb905f6b85f04239e8ce26", "committedDate": "2020-07-23T14:16:06Z", "message": "[ML] Audit updates on data frame analytics jobs\n\nCloses #59652"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1OTYzODQ4", "url": "https://github.com/elastic/elasticsearch/pull/60126#pullrequestreview-455963848", "createdAt": "2020-07-27T16:54:26Z", "commit": {"oid": "53558ed6a8084ad861fb905f6b85f04239e8ce26"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNjo1NDoyNlrOG3rIZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNjo1NDoyNlrOG3rIZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTAzMTUyNQ==", "bodyText": "A Set here seems like overkill. Just a List and ArrayList would do.\nBut, that is not that big of a deal.", "url": "https://github.com/elastic/elasticsearch/pull/60126#discussion_r461031525", "createdAt": "2020-07-27T16:54:26Z", "author": {"login": "benwtrent"}, "path": "x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/dataframe/DataFrameAnalyticsConfigUpdate.java", "diffHunk": "@@ -152,6 +154,23 @@ public boolean requiresRestart(DataFrameAnalyticsConfig source) {\n             || (getMaxNumThreads() != null && getMaxNumThreads().equals(source.getMaxNumThreads()) == false);\n     }\n \n+    public Set<String> getUpdatedFields() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53558ed6a8084ad861fb905f6b85f04239e8ce26"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2Mzc4OTIy", "url": "https://github.com/elastic/elasticsearch/pull/60126#pullrequestreview-456378922", "createdAt": "2020-07-28T07:41:34Z", "commit": {"oid": "53558ed6a8084ad861fb905f6b85f04239e8ce26"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwNzo0MTozNFrOG4Afpw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwNzo0MTozNFrOG4Afpw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTM4MTU0Mw==", "bodyText": "If getUpdatedFields returns Set then the matcher should be containsInAnyOrder so that it works regardless of the exact Set implementation.", "url": "https://github.com/elastic/elasticsearch/pull/60126#discussion_r461381543", "createdAt": "2020-07-28T07:41:34Z", "author": {"login": "przemekwitek"}, "path": "x-pack/plugin/core/src/test/java/org/elasticsearch/xpack/core/ml/dataframe/DataFrameAnalyticsConfigUpdateTests.java", "diffHunk": "@@ -197,6 +198,49 @@ public void testCtor_GivenMaxNumberThreadsIsNegative() {\n         assertThat(e.getMessage(), equalTo(\"[max_num_threads] must be a positive integer\"));\n     }\n \n+    public void testGetUpdatedFields_GivenAll() {\n+        DataFrameAnalyticsConfigUpdate update = new DataFrameAnalyticsConfigUpdate.Builder(\"test_job\")\n+            .setDescription(\"new description\")\n+            .setModelMemoryLimit(new ByteSizeValue(1024))\n+            .setAllowLazyStart(true)\n+            .setMaxNumThreads(8)\n+            .build();\n+\n+        assertThat(update.getUpdatedFields(), contains(\"allow_lazy_start\", \"description\", \"max_num_threads\", \"model_memory_limit\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53558ed6a8084ad861fb905f6b85f04239e8ce26"}, "originalPosition": 20}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4126, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}