{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA3MTg2NjY4", "number": 55577, "title": "Fix PemKeyConfigTests ", "bodyText": "We were creating PemKeyConfig objects using different private\nkeys but always using testnode.crt certificate that uses the\nRSA public key. The PemKeyConfig was built but we would\nthen later fail to handle SSL connections during the TLS\nhandshake eitherway.\nThis became obvious in FIPS tests where the consistency\nchecks that FIPS 140 mandates kick in and failed early\nbecausethe private key was of different type than the\npublic key", "createdAt": "2020-04-22T10:08:19Z", "url": "https://github.com/elastic/elasticsearch/pull/55577", "merged": true, "mergeCommit": {"oid": "fc90eef734c2809be4c49c2c91e6f93970b56e68"}, "closed": true, "closedAt": "2020-04-30T06:33:09Z", "author": {"login": "jkakavas"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcaFZmYAH2gAyNDA3MTg2NjY4OjQ1ZDdkZDNlMDZmOTVlZmU5YjEzMmQ1NDJiMTU5YzA4OTE3MDM2OTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcb7mMKgFqTQwMTQ3NzE2OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "45d7dd3e06f95efe9b132d542b159c0891703698", "author": {"user": {"login": "jkakavas", "name": "Ioannis Kakavas"}}, "url": "https://github.com/elastic/elasticsearch/commit/45d7dd3e06f95efe9b132d542b159c0891703698", "committedDate": "2020-04-22T10:05:36Z", "message": "Disable encrypted PKCS8 keys test in FIPS\n\nWe can't decrypt these files since PBEKeySpec is not available in\na FIPS 140 security provider"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e4edeb03a69a59a6414703f7ad9e2956210dd5dc", "author": {"user": {"login": "jkakavas", "name": "Ioannis Kakavas"}}, "url": "https://github.com/elastic/elasticsearch/commit/e4edeb03a69a59a6414703f7ad9e2956210dd5dc", "committedDate": "2020-04-22T12:37:28Z", "message": "Test with the correct certificates"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "85558facbb00090555955ef5f8ba7c561180cd22", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/85558facbb00090555955ef5f8ba7c561180cd22", "committedDate": "2020-04-22T18:30:10Z", "message": "Merge branch 'master' into mute-encrypted-pkcs8-fips"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4NzY0MTI1", "url": "https://github.com/elastic/elasticsearch/pull/55577#pullrequestreview-398764125", "createdAt": "2020-04-23T05:13:50Z", "commit": {"oid": "85558facbb00090555955ef5f8ba7c561180cd22"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QwNToxMzo1MFrOGKW6LA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QwNToxMzo1MFrOGKW6LA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzUxNDI4NA==", "bodyText": "This is probably a dumb question. This is not possible in FIPS mode because the key is genereated using the PBEKeySpec?", "url": "https://github.com/elastic/elasticsearch/pull/55577#discussion_r413514284", "createdAt": "2020-04-23T05:13:50Z", "author": {"login": "ywangd"}, "path": "libs/ssl-config/src/test/java/org/elasticsearch/common/ssl/PemKeyConfigTests.java", "diffHunk": "@@ -70,6 +70,7 @@ public void testBuildKeyConfigFromPkcs8PemFilesWithoutPassword() throws Exceptio\n     }\n \n     public void testBuildKeyConfigFromPkcs8PemFilesWithPassword() throws Exception {\n+        assumeFalse(\"Can't run in a FIPS JVM, PBE KeySpec is not available\", inFipsJvm());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "85558facbb00090555955ef5f8ba7c561180cd22"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAxNDc3MTY5", "url": "https://github.com/elastic/elasticsearch/pull/55577#pullrequestreview-401477169", "createdAt": "2020-04-28T03:45:57Z", "commit": {"oid": "85558facbb00090555955ef5f8ba7c561180cd22"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQwMzo0NTo1N1rOGNBO1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQwMzo0NTo1N1rOGNBO1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjMwNDg1Mw==", "bodyText": "Shouldn't our FIPS instructions say that PKCS#8 password protected keys are not supported then?\nIronically, this bug was originally reported by someone trying to set up a FIPS 140-2 compliant cluster.", "url": "https://github.com/elastic/elasticsearch/pull/55577#discussion_r416304853", "createdAt": "2020-04-28T03:45:57Z", "author": {"login": "tvernum"}, "path": "libs/ssl-config/src/test/java/org/elasticsearch/common/ssl/PemKeyConfigTests.java", "diffHunk": "@@ -70,6 +70,7 @@ public void testBuildKeyConfigFromPkcs8PemFilesWithoutPassword() throws Exceptio\n     }\n \n     public void testBuildKeyConfigFromPkcs8PemFilesWithPassword() throws Exception {\n+        assumeFalse(\"Can't run in a FIPS JVM, PBE KeySpec is not available\", inFipsJvm());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzUxNDI4NA=="}, "originalCommit": {"oid": "85558facbb00090555955ef5f8ba7c561180cd22"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 666, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}