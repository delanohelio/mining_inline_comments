{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEwMzA5MDM3", "number": 55884, "title": "[DOCS] Combine search API and URI search API reference docs", "bodyText": "The search API and URI search pages document the same _search API.\nThis combines the documentation from each page under the search API\ndocs.\nChanges:\n\nAdds an abbreviated title for the search API page.\nRemoves the following invalid query parameters:\n\nanalyzer\nanalyze_wildcard\ndefault_operator\ndf\nlenient\nsuggest_mode\nsuggest_size\n\n\nRemoves the URI search docs page and adds a related redirect.\nUpdates the headings of several examples\n\nI'll treat the redirect as a breaking change and only apply to the master branch. I'll open up separate PRs to remove the invalid query parms on maintained branches. We're now backporting the redirect to all maintained branches.\nRelates to #48194", "createdAt": "2020-04-28T19:17:40Z", "url": "https://github.com/elastic/elasticsearch/pull/55884", "merged": true, "mergeCommit": {"oid": "e6542c0823ba4cfd17f869b02776dfba8b54c49f"}, "closed": true, "closedAt": "2020-05-05T14:28:13Z", "author": {"login": "jrodewig"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABccI2KrAH2gAyNDEwMzA5MDM3OjE5MzQ3NzMzNGNjMzQzYTgwOTk2Njk5ZDNjYzY5MjE4YWU0OWZmMWY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABceUnbvgH2gAyNDEwMzA5MDM3OmUyZDhmNzdkODAyMWVmODRmNWJiNmY5NjAwN2VhMDNjNjVmNjA0MzI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "193477334cc343a80996699d3cc69218ae49ff1f", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/193477334cc343a80996699d3cc69218ae49ff1f", "committedDate": "2020-04-28T19:14:22Z", "message": "[DOCS] Combine search API and URI search API reference docs\n\nThe search API and URI search pages document the same `_search` API.\nThis combines the documentation from each page under the search API\ndocs.\n\nChanges:\n\n* Adds an abbreviated title for the search API page.\n* Removes the following invalid query parameters:\n  * `analyzer`\n  * `analyze_wildcard`\n  * `default_operator`\n  * `df`\n  * `lenient`\n  * `suggest_mode`\n  * `suggest_size`\n* Removes the URI search docs page and adds a related redirect.\n* Updates the headings of several examples"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1MjQwOTU3", "url": "https://github.com/elastic/elasticsearch/pull/55884#pullrequestreview-405240957", "createdAt": "2020-05-04T18:30:49Z", "commit": {"oid": "193477334cc343a80996699d3cc69218ae49ff1f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxODozMDo1MFrOGQM2ZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxODozMjoxMVrOGQM5mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTY0MDkzMw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            If `true`, partial results are returned for request timeouts one or\n          \n          \n            \n            <<shard-failures,partial shard failures>>. If `false`, an error is returned with\n          \n          \n            \n            no partial results. Defaults to `true`.\n          \n          \n            \n            If `true`, returns partial results if there are request timeouts or\n          \n          \n            \n            <<shard-failures,shard failures>>. If `false`, returns an error with\n          \n          \n            \n            no partial results. Defaults to `true`.", "url": "https://github.com/elastic/elasticsearch/pull/55884#discussion_r419640933", "createdAt": "2020-05-04T18:30:50Z", "author": {"login": "debadair"}, "path": "docs/reference/search/search.asciidoc", "diffHunk": "@@ -1,65 +1,56 @@\n [[search-search]]\n-=== Search\n+=== Search API\n+++++\n+<titleabbrev>Search</titleabbrev>\n+++++\n \n Returns search hits that match the query defined in the request.\n \n [source,console]\n ----\n-GET /twitter/_search?q=tag:wow\n+GET /twitter/_search\n ----\n // TEST[setup:twitter]\n \n-\n [[search-search-api-request]]\n ==== {api-request-title}\n \n `GET /<index>/_search`\n \n-`POST /<index>/_search`\n-\n `GET /_search`\n \n-`POST /_search`\n+`POST /<index>/_search`\n \n+`POST /_search`\n \n [[search-search-api-desc]]\n ==== {api-description-title}\n \n Allows you to execute a search query and get back search hits that match the\n-query. The query can either be provided using a simple\n-<<search-uri-request,query string as a parameter>>, or using a\n-<<search-request-body,request body>>.\n-\n-[[search-partial-responses]]\n-===== Partial responses\n-\n-To ensure fast responses, the search API will respond with partial results if\n-one or more shards fail. See <<shard-failures, Shard failures>> for more\n-information.\n+query. You can provide search queries using the <<search-api-query-params-q,`q`\n+query string parameter>> or <<search-request-body,request body>>.\n \n [[search-search-api-path-params]]\n ==== {api-path-parms-title}\n \n include::{docdir}/rest-api/common-parms.asciidoc[tag=index]\n \n-\n [[search-search-api-query-params]]\n ==== {api-query-parms-title}\n \n include::{docdir}/rest-api/common-parms.asciidoc[tag=allow-no-indices]\n +\n Defaults to `true`.\n \n+[[search-partial-responses]]\n `allow_partial_search_results`::\n-  (Optional, boolean) Indicates if an error should be returned if there is a\n-  partial search failure or timeout. Defaults to `true`.\n-\n-`analyzer`::\n-  (Optional, string) Defines the analyzer to use for the query string.\n-\n-`analyze_wildcard`::\n-  (Optional, boolean) If `true`, wildcard and prefix queries will also be\n-  analyzed. Defaults to `false`.\n+(Optional, boolean)\n+If `true`, partial results are returned for request timeouts one or\n+<<shard-failures,partial shard failures>>. If `false`, an error is returned with\n+no partial results. Defaults to `true`.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "193477334cc343a80996699d3cc69218ae49ff1f"}, "originalPosition": 76}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTY0MTc1NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            You can override the default for this field by setting\n          \n          \n            \n            `search.default_allow_partial_results` to `false` in your cluster settings.\n          \n          \n            \n            To override the default for this field, set the \n          \n          \n            \n            `search.default_allow_partial_results` cluster setting to `false`.", "url": "https://github.com/elastic/elasticsearch/pull/55884#discussion_r419641755", "createdAt": "2020-05-04T18:32:11Z", "author": {"login": "debadair"}, "path": "docs/reference/search/search.asciidoc", "diffHunk": "@@ -1,65 +1,56 @@\n [[search-search]]\n-=== Search\n+=== Search API\n+++++\n+<titleabbrev>Search</titleabbrev>\n+++++\n \n Returns search hits that match the query defined in the request.\n \n [source,console]\n ----\n-GET /twitter/_search?q=tag:wow\n+GET /twitter/_search\n ----\n // TEST[setup:twitter]\n \n-\n [[search-search-api-request]]\n ==== {api-request-title}\n \n `GET /<index>/_search`\n \n-`POST /<index>/_search`\n-\n `GET /_search`\n \n-`POST /_search`\n+`POST /<index>/_search`\n \n+`POST /_search`\n \n [[search-search-api-desc]]\n ==== {api-description-title}\n \n Allows you to execute a search query and get back search hits that match the\n-query. The query can either be provided using a simple\n-<<search-uri-request,query string as a parameter>>, or using a\n-<<search-request-body,request body>>.\n-\n-[[search-partial-responses]]\n-===== Partial responses\n-\n-To ensure fast responses, the search API will respond with partial results if\n-one or more shards fail. See <<shard-failures, Shard failures>> for more\n-information.\n+query. You can provide search queries using the <<search-api-query-params-q,`q`\n+query string parameter>> or <<search-request-body,request body>>.\n \n [[search-search-api-path-params]]\n ==== {api-path-parms-title}\n \n include::{docdir}/rest-api/common-parms.asciidoc[tag=index]\n \n-\n [[search-search-api-query-params]]\n ==== {api-query-parms-title}\n \n include::{docdir}/rest-api/common-parms.asciidoc[tag=allow-no-indices]\n +\n Defaults to `true`.\n \n+[[search-partial-responses]]\n `allow_partial_search_results`::\n-  (Optional, boolean) Indicates if an error should be returned if there is a\n-  partial search failure or timeout. Defaults to `true`.\n-\n-`analyzer`::\n-  (Optional, string) Defines the analyzer to use for the query string.\n-\n-`analyze_wildcard`::\n-  (Optional, boolean) If `true`, wildcard and prefix queries will also be\n-  analyzed. Defaults to `false`.\n+(Optional, boolean)\n+If `true`, partial results are returned for request timeouts one or\n+<<shard-failures,partial shard failures>>. If `false`, an error is returned with\n+no partial results. Defaults to `true`.\n++\n+You can override the default for this field by setting\n+`search.default_allow_partial_results` to `false` in your cluster settings.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "193477334cc343a80996699d3cc69218ae49ff1f"}, "originalPosition": 79}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "57cd6e21e3f0ac0b34bef55f12ed29ba55bd9d02", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/57cd6e21e3f0ac0b34bef55f12ed29ba55bd9d02", "committedDate": "2020-05-04T18:35:49Z", "message": "Apply suggestions from code review\n\nCo-authored-by: debadair <debadair@elastic.co>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1MjU5MTE4", "url": "https://github.com/elastic/elasticsearch/pull/55884#pullrequestreview-405259118", "createdAt": "2020-05-04T18:55:45Z", "commit": {"oid": "57cd6e21e3f0ac0b34bef55f12ed29ba55bd9d02"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "de8db7718c824c59ffb246971675c30f29cbbdac", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/de8db7718c824c59ffb246971675c30f29cbbdac", "committedDate": "2020-05-05T13:35:03Z", "message": "Merge remote-tracking branch 'upstream/master' into docs__remove-uri-search-docs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2d8f77d8021ef84f5bb6f96007ea03c65f60432", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/e2d8f77d8021ef84f5bb6f96007ea03c65f60432", "committedDate": "2020-05-05T14:04:59Z", "message": "Merge remote-tracking branch 'upstream/master' into docs__remove-uri-search-docs"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 236, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}