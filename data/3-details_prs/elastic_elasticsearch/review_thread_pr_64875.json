{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE4NTcxOTEz", "number": 64875, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQxODo1OToxNlrOE4Tdmw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQxODo1OToxNlrOE4Tdmw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI3NDc0NTg3OnYy", "diffSide": "RIGHT", "path": "docs/reference/modules/cluster/misc.asciidoc", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQxODo1OToxNlrOHyJRrQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQxOTowMjoxM1rOHyJYaA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjM0MjgyOQ==", "bodyText": "This isn't quite correct, the default is 1000.\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Shards for closed indices do not count toward this limit. Defaults to `-1`\n          \n          \n            \n            (unlimited). A cluster with no data nodes is also unlimited.\n          \n          \n            \n            Shards for closed indices do not count toward this limit. Defaults to `1000`.\n          \n          \n            \n            A cluster with no data nodes is unlimited.", "url": "https://github.com/elastic/elasticsearch/pull/64875#discussion_r522342829", "createdAt": "2020-11-12T18:59:16Z", "author": {"login": "gwbrown"}, "path": "docs/reference/modules/cluster/misc.asciidoc", "diffHunk": "@@ -53,16 +53,29 @@ Closed indices do not contribute to the shard count.\n \n You can dynamically adjust the cluster shard limit with the following setting:\n \n+[[cluster-max-shards-per-node]]\n `cluster.max_shards_per_node`::\n-     (<<dynamic-cluster-setting,Dynamic>>)\n-     Controls the number of shards allowed in the cluster per data node.\n++\n+--\n+(<<dynamic-cluster-setting,Dynamic>>)\n+Limits the total number of primary and replica shards for the cluster. {es}\n+calculates the limit as follows:\n \n-With the default setting, a 3-node cluster allows 3,000 shards total, across all open indexes. \n-If you reduce the limit to 500, the cluster would allow 1,500 shards total.\n+`cluster.max_shards_per_node * number of data nodes`\n \n-NOTE: If there are no data nodes in the cluster, the limit will not be enforced.\n-This allows the creation of indices during cluster creation if dedicated master\n-nodes are set up before data nodes.\n+Shards for closed indices do not count toward this limit. Defaults to `-1`\n+(unlimited). A cluster with no data nodes is also unlimited.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "75626f38f9ebc469811fe8d2de5a1385930ba451"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjM0NDU1Mg==", "bodyText": "Thank you for catching this!", "url": "https://github.com/elastic/elasticsearch/pull/64875#discussion_r522344552", "createdAt": "2020-11-12T19:02:13Z", "author": {"login": "jrodewig"}, "path": "docs/reference/modules/cluster/misc.asciidoc", "diffHunk": "@@ -53,16 +53,29 @@ Closed indices do not contribute to the shard count.\n \n You can dynamically adjust the cluster shard limit with the following setting:\n \n+[[cluster-max-shards-per-node]]\n `cluster.max_shards_per_node`::\n-     (<<dynamic-cluster-setting,Dynamic>>)\n-     Controls the number of shards allowed in the cluster per data node.\n++\n+--\n+(<<dynamic-cluster-setting,Dynamic>>)\n+Limits the total number of primary and replica shards for the cluster. {es}\n+calculates the limit as follows:\n \n-With the default setting, a 3-node cluster allows 3,000 shards total, across all open indexes. \n-If you reduce the limit to 500, the cluster would allow 1,500 shards total.\n+`cluster.max_shards_per_node * number of data nodes`\n \n-NOTE: If there are no data nodes in the cluster, the limit will not be enforced.\n-This allows the creation of indices during cluster creation if dedicated master\n-nodes are set up before data nodes.\n+Shards for closed indices do not count toward this limit. Defaults to `-1`\n+(unlimited). A cluster with no data nodes is also unlimited.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjM0MjgyOQ=="}, "originalCommit": {"oid": "75626f38f9ebc469811fe8d2de5a1385930ba451"}, "originalPosition": 22}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3067, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}