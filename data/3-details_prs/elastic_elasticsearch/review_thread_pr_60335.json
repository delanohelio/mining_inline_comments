{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU4MDEwMTU1", "number": 60335, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQyMDowMTowMVrOES-ECg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQyMDowOTozNlrOES-Omw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4MzI2NjY2OnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/inference/results/ClassificationInferenceResults.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQyMDowMTowMVrOG4cnIQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQyMTozNzozNlrOG4f0Pw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTg0MjIwOQ==", "bodyText": "V_7_10_0 surely?", "url": "https://github.com/elastic/elasticsearch/pull/60335#discussion_r461842209", "createdAt": "2020-07-28T20:01:01Z", "author": {"login": "davidkyle"}, "path": "x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/inference/results/ClassificationInferenceResults.java", "diffHunk": "@@ -74,6 +75,11 @@ public ClassificationInferenceResults(StreamInput in) throws IOException {\n         } else {\n             this.predictionFieldType = PredictionFieldType.STRING;\n         }\n+        if (in.getVersion().onOrAfter(Version.V_7_9_0)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5b15e23969b34a1a1c39e0522576ab5eac2d64e"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTg1MTUxOQ==", "bodyText": "potentially, I am not sure if we want to backport it to 7.9 as java side inference was introduced in 7.9", "url": "https://github.com/elastic/elasticsearch/pull/60335#discussion_r461851519", "createdAt": "2020-07-28T20:15:57Z", "author": {"login": "benwtrent"}, "path": "x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/inference/results/ClassificationInferenceResults.java", "diffHunk": "@@ -74,6 +75,11 @@ public ClassificationInferenceResults(StreamInput in) throws IOException {\n         } else {\n             this.predictionFieldType = PredictionFieldType.STRING;\n         }\n+        if (in.getVersion().onOrAfter(Version.V_7_9_0)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTg0MjIwOQ=="}, "originalCommit": {"oid": "d5b15e23969b34a1a1c39e0522576ab5eac2d64e"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTg1Njc1Mg==", "bodyText": "@droberts195 what do you think?", "url": "https://github.com/elastic/elasticsearch/pull/60335#discussion_r461856752", "createdAt": "2020-07-28T20:25:13Z", "author": {"login": "benwtrent"}, "path": "x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/inference/results/ClassificationInferenceResults.java", "diffHunk": "@@ -74,6 +75,11 @@ public ClassificationInferenceResults(StreamInput in) throws IOException {\n         } else {\n             this.predictionFieldType = PredictionFieldType.STRING;\n         }\n+        if (in.getVersion().onOrAfter(Version.V_7_9_0)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTg0MjIwOQ=="}, "originalCommit": {"oid": "d5b15e23969b34a1a1c39e0522576ab5eac2d64e"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTg5NDcxOQ==", "bodyText": "If it means the data in the destination index would have inconsistent fields without this fix in 7.9 when the fields were consistent in 7.8 then this is fixing a regression and should go into 7.9.", "url": "https://github.com/elastic/elasticsearch/pull/60335#discussion_r461894719", "createdAt": "2020-07-28T21:37:36Z", "author": {"login": "droberts195"}, "path": "x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/inference/results/ClassificationInferenceResults.java", "diffHunk": "@@ -74,6 +75,11 @@ public ClassificationInferenceResults(StreamInput in) throws IOException {\n         } else {\n             this.predictionFieldType = PredictionFieldType.STRING;\n         }\n+        if (in.getVersion().onOrAfter(Version.V_7_9_0)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTg0MjIwOQ=="}, "originalCommit": {"oid": "d5b15e23969b34a1a1c39e0522576ab5eac2d64e"}, "originalPosition": 38}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4MzI5MzcxOnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/inference/trainedmodel/inference/TreeInferenceModel.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQyMDowOTozNlrOG4c4Jw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQyMDowOTozNlrOG4c4Jw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTg0NjU2Nw==", "bodyText": "Should LangIdentNeuralNetwork have the same logic?", "url": "https://github.com/elastic/elasticsearch/pull/60335#discussion_r461846567", "createdAt": "2020-07-28T20:09:36Z", "author": {"login": "davidkyle"}, "path": "x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/inference/trainedmodel/inference/TreeInferenceModel.java", "diffHunk": "@@ -178,7 +178,7 @@ private InferenceResults buildResult(double[] value,\n                     classificationProbability(value),\n                     classificationLabels,\n                     null,\n-                    classificationConfig.getNumTopClasses(),\n+                    classificationConfig.getNumTopClasses() == 0 ? 1 : classificationConfig.getNumTopClasses(),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5b15e23969b34a1a1c39e0522576ab5eac2d64e"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2790, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}