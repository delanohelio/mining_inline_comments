{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc0NDU4NTkx", "number": 52281, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxODoyNDowM1rODfSOdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQyMDo1OTo0MFrODfVKpQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0MTMxMDYyOnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/ql/src/main/java/org/elasticsearch/xpack/ql/common/Failure.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxODoyNDowM1rOFo5lzQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxODoyNDowM1rOFo5lzQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODQzMDkyNQ==", "bodyText": "This is done on purpose so that Failures on the same node get collapsed:\nLine 1:15 ...\nLine 1:15...\nSo far all Failures are related and it's easier to just have one overall.", "url": "https://github.com/elastic/elasticsearch/pull/52281#discussion_r378430925", "createdAt": "2020-02-12T18:24:03Z", "author": {"login": "costin"}, "path": "x-pack/plugin/ql/src/main/java/org/elasticsearch/xpack/ql/common/Failure.java", "diffHunk": "@@ -50,7 +50,7 @@ public boolean equals(Object obj) {\n         }\n \n         Failure other = (Failure) obj;\n-        return Objects.equals(message, other.message) && Objects.equals(node, other.node);\n+        return Objects.equals(node, other.node);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "73a33810a25f8c017ae47a512f994e5c881eb0d3"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0MTc4NjEwOnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/sql/src/test/java/org/elasticsearch/xpack/sql/execution/search/QuerierTests.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQyMDo1NzoxOVrOFo-Tcg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxMToyNTozNlrOFpQSfg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODUwODE0Ng==", "bodyText": "Is this necessary?", "url": "https://github.com/elastic/elasticsearch/pull/52281#discussion_r378508146", "createdAt": "2020-02-12T20:57:19Z", "author": {"login": "matriv"}, "path": "x-pack/plugin/sql/src/test/java/org/elasticsearch/xpack/sql/execution/search/QuerierTests.java", "diffHunk": "@@ -87,7 +87,7 @@ public void testAggSorting_TwoFields_One_Presorted() {\n \n     @SuppressWarnings({\"rawtypes\", \"unchecked\"})\n     public void testAggSorting_FourFields() {\n-        List<Comparator> comparators = Arrays.asList(\n+        List<Comparator> comparators = Arrays.<Comparator> asList(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "73a33810a25f8c017ae47a512f994e5c881eb0d3"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODgwMjgxNA==", "bodyText": "It is in Eclipse ...", "url": "https://github.com/elastic/elasticsearch/pull/52281#discussion_r378802814", "createdAt": "2020-02-13T11:25:36Z", "author": {"login": "costin"}, "path": "x-pack/plugin/sql/src/test/java/org/elasticsearch/xpack/sql/execution/search/QuerierTests.java", "diffHunk": "@@ -87,7 +87,7 @@ public void testAggSorting_TwoFields_One_Presorted() {\n \n     @SuppressWarnings({\"rawtypes\", \"unchecked\"})\n     public void testAggSorting_FourFields() {\n-        List<Comparator> comparators = Arrays.asList(\n+        List<Comparator> comparators = Arrays.<Comparator> asList(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODUwODE0Ng=="}, "originalCommit": {"oid": "73a33810a25f8c017ae47a512f994e5c881eb0d3"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0MTc5MjM3OnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/sql/src/main/java/org/elasticsearch/xpack/sql/analysis/analyzer/VerificationException.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQyMDo1OTo0MFrOFo-XoQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxMToyNzowMFrOFpQVlA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODUwOTIxNw==", "bodyText": "The hierarchy feels a bit unnatural: a verification exception in analysis phase is a subclass of SqlClientException.", "url": "https://github.com/elastic/elasticsearch/pull/52281#discussion_r378509217", "createdAt": "2020-02-12T20:59:40Z", "author": {"login": "matriv"}, "path": "x-pack/plugin/sql/src/main/java/org/elasticsearch/xpack/sql/analysis/analyzer/VerificationException.java", "diffHunk": "@@ -5,31 +5,20 @@\n  */\n package org.elasticsearch.xpack.sql.analysis.analyzer;\n \n-import org.elasticsearch.xpack.ql.tree.Location;\n-import org.elasticsearch.xpack.ql.util.StringUtils;\n-import org.elasticsearch.xpack.sql.analysis.AnalysisException;\n-import org.elasticsearch.xpack.sql.analysis.analyzer.Verifier.Failure;\n+import org.elasticsearch.rest.RestStatus;\n+import org.elasticsearch.xpack.ql.common.Failure;\n+import org.elasticsearch.xpack.sql.SqlClientException;\n \n import java.util.Collection;\n-import java.util.stream.Collectors;\n \n-\n-public class VerificationException extends AnalysisException {\n-\n-    private final Collection<Failure> failures;\n+public class VerificationException extends SqlClientException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "73a33810a25f8c017ae47a512f994e5c881eb0d3"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODgwMzYwNA==", "bodyText": "AnalysisException, which was not used anywhere, was extending SqlClientException.\nWhich is what VerificationException does now...", "url": "https://github.com/elastic/elasticsearch/pull/52281#discussion_r378803604", "createdAt": "2020-02-13T11:27:00Z", "author": {"login": "costin"}, "path": "x-pack/plugin/sql/src/main/java/org/elasticsearch/xpack/sql/analysis/analyzer/VerificationException.java", "diffHunk": "@@ -5,31 +5,20 @@\n  */\n package org.elasticsearch.xpack.sql.analysis.analyzer;\n \n-import org.elasticsearch.xpack.ql.tree.Location;\n-import org.elasticsearch.xpack.ql.util.StringUtils;\n-import org.elasticsearch.xpack.sql.analysis.AnalysisException;\n-import org.elasticsearch.xpack.sql.analysis.analyzer.Verifier.Failure;\n+import org.elasticsearch.rest.RestStatus;\n+import org.elasticsearch.xpack.ql.common.Failure;\n+import org.elasticsearch.xpack.sql.SqlClientException;\n \n import java.util.Collection;\n-import java.util.stream.Collectors;\n \n-\n-public class VerificationException extends AnalysisException {\n-\n-    private final Collection<Failure> failures;\n+public class VerificationException extends SqlClientException {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODUwOTIxNw=="}, "originalCommit": {"oid": "73a33810a25f8c017ae47a512f994e5c881eb0d3"}, "originalPosition": 19}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4803, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}