{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk3ODU0OTc4", "number": 54694, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QwOTowMDoxMVrODuSZvg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QwOTowMDozN1rODuSa4w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5ODYyNTkwOnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/elasticsearch/action/admin/indices/template/get/TransportGetComponentTemplateAction.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QwOTowMDoxMVrOGAMg6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QwOTowMDoxMVrOGAMg6A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjg1ODIxNg==", "bodyText": "I think in case when the template is missing here (when asking for a specific template by name) we want to throw a resource not found exception. Like was done here: https://github.com/elastic/elasticsearch/pull/54530/files#diff-e753c14c84c5edb785bc197306e5a24fR180", "url": "https://github.com/elastic/elasticsearch/pull/54694#discussion_r402858216", "createdAt": "2020-04-03T09:00:11Z", "author": {"login": "martijnvg"}, "path": "server/src/main/java/org/elasticsearch/action/admin/indices/template/get/TransportGetComponentTemplateAction.java", "diffHunk": "@@ -71,22 +71,21 @@ protected void masterOperation(Task task, GetComponentTemplateAction.Request req\n         Map<String, ComponentTemplate> allTemplates = state.metadata().componentTemplates();\n \n         // If we did not ask for a specific name, then we return all templates\n-        if (request.names().length == 0) {\n+        if (request.name() == null) {\n             listener.onResponse(new GetComponentTemplateAction.Response(allTemplates));\n             return;\n         }\n \n         final Map<String, ComponentTemplate> results = new HashMap<>();\n-        for (String name : request.names()) {\n-            if (Regex.isSimpleMatchPattern(name)) {\n-                for (Map.Entry<String, ComponentTemplate> entry : allTemplates.entrySet()) {\n-                    if (Regex.simpleMatch(name, entry.getKey())) {\n-                        results.put(entry.getKey(), entry.getValue());\n-                    }\n+        String name = request.name();\n+        if (Regex.isSimpleMatchPattern(name)) {\n+            for (Map.Entry<String, ComponentTemplate> entry : allTemplates.entrySet()) {\n+                if (Regex.simpleMatch(name, entry.getKey())) {\n+                    results.put(entry.getKey(), entry.getValue());\n                 }\n-            } else if (allTemplates.containsKey(name)) {\n-                results.put(name, allTemplates.get(name));\n             }\n+        } else if (allTemplates.containsKey(name)) {\n+            results.put(name, allTemplates.get(name));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "986def0f21c916cd25372f5e5f1d9b4b2195b11c"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5ODYyODgzOnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/elasticsearch/action/admin/indices/template/get/TransportGetIndexTemplateV2Action.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QwOTowMDozOFrOGAMidA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QwOTowMDozOFrOGAMidA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjg1ODYxMg==", "bodyText": "Throw a resource not found exception if template does not exist?", "url": "https://github.com/elastic/elasticsearch/pull/54694#discussion_r402858612", "createdAt": "2020-04-03T09:00:38Z", "author": {"login": "martijnvg"}, "path": "server/src/main/java/org/elasticsearch/action/admin/indices/template/get/TransportGetIndexTemplateV2Action.java", "diffHunk": "@@ -71,22 +71,21 @@ protected void masterOperation(Task task, GetIndexTemplateV2Action.Request reque\n         Map<String, IndexTemplateV2> allTemplates = state.metadata().templatesV2();\n \n         // If we did not ask for a specific name, then we return all templates\n-        if (request.names().length == 0) {\n+        if (request.name() == null) {\n             listener.onResponse(new GetIndexTemplateV2Action.Response(allTemplates));\n             return;\n         }\n \n         final Map<String, IndexTemplateV2> results = new HashMap<>();\n-        for (String name : request.names()) {\n-            if (Regex.isSimpleMatchPattern(name)) {\n-                for (Map.Entry<String, IndexTemplateV2> entry : allTemplates.entrySet()) {\n-                    if (Regex.simpleMatch(name, entry.getKey())) {\n-                        results.put(entry.getKey(), entry.getValue());\n-                    }\n+        String name = request.name();\n+        if (Regex.isSimpleMatchPattern(name)) {\n+            for (Map.Entry<String, IndexTemplateV2> entry : allTemplates.entrySet()) {\n+                if (Regex.simpleMatch(name, entry.getKey())) {\n+                    results.put(entry.getKey(), entry.getValue());\n                 }\n-            } else if (allTemplates.containsKey(name)) {\n-                results.put(name, allTemplates.get(name));\n             }\n+        } else if (allTemplates.containsKey(name)) {\n+            results.put(name, allTemplates.get(name));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "986def0f21c916cd25372f5e5f1d9b4b2195b11c"}, "originalPosition": 27}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3979, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}