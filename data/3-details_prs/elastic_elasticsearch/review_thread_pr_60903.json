{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY1NTI2NjIw", "number": 60903, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNTo1ODoxM1rOEW259g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQyMToyODo0MVrOEW-Glg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyNDAzNzAyOnYy", "diffSide": "RIGHT", "path": "docs/reference/search/filter-search-results.asciidoc", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNTo1ODoxM1rOG-VITw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNjoyNjoyMFrOG-WLFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODAxMTA4Nw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            You can use two methods to filter search results:\n          \n          \n            \n            Use one of the following methods to filter search results:", "url": "https://github.com/elastic/elasticsearch/pull/60903#discussion_r468011087", "createdAt": "2020-08-10T15:58:13Z", "author": {"login": "lockewritesdocs"}, "path": "docs/reference/search/filter-search-results.asciidoc", "diffHunk": "@@ -0,0 +1,18 @@\n+[[filter-search-results]]\n+== Filter search results\n+\n+You can use two methods to filter search results:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b96c120a1242b2a4870b374661dd0a458a148ae6"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODAyODE4Mw==", "bodyText": "I'm going to leave this as-is. This suggestion implies that the two methods are mutually exclusive, but that's not the case. You can use a boolean filter and a post filter in the same search.\nThanks for the suggestion tho!", "url": "https://github.com/elastic/elasticsearch/pull/60903#discussion_r468028183", "createdAt": "2020-08-10T16:26:20Z", "author": {"login": "jrodewig"}, "path": "docs/reference/search/filter-search-results.asciidoc", "diffHunk": "@@ -0,0 +1,18 @@\n+[[filter-search-results]]\n+== Filter search results\n+\n+You can use two methods to filter search results:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODAxMTA4Nw=="}, "originalCommit": {"oid": "b96c120a1242b2a4870b374661dd0a458a148ae6"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyNDAzOTQ2OnYy", "diffSide": "RIGHT", "path": "docs/reference/search/filter-search-results.asciidoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNTo1ODo1NFrOG-VJ4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNTo1ODo1NFrOG-VJ4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODAxMTQ4OQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Use a boolean query with a `filter` query clause. Search requests apply\n          \n          \n            \n            boolean filters to both search hits and <<search-aggregations,aggregations>>.\n          \n          \n            \n            See <<query-dsl-bool-query,boolean query>>.\n          \n          \n            \n            * Use a boolean query with a `filter` query clause. Search requests apply\n          \n          \n            \n            <<query-dsl-bool-query,boolean filters>> to both search hits and <<search-aggregations,aggregations>>.", "url": "https://github.com/elastic/elasticsearch/pull/60903#discussion_r468011489", "createdAt": "2020-08-10T15:58:54Z", "author": {"login": "lockewritesdocs"}, "path": "docs/reference/search/filter-search-results.asciidoc", "diffHunk": "@@ -0,0 +1,18 @@\n+[[filter-search-results]]\n+== Filter search results\n+\n+You can use two methods to filter search results:\n+\n+* Use a boolean query with a `filter` query clause. Search requests apply\n+boolean filters to both search hits and <<search-aggregations,aggregations>>.\n+See <<query-dsl-bool-query,boolean query>>.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b96c120a1242b2a4870b374661dd0a458a148ae6"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyNDA0MzY5OnYy", "diffSide": "RIGHT", "path": "docs/reference/search/filter-search-results.asciidoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNTo1OTo1NlrOG-VMbA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNTo1OTo1NlrOG-VMbA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODAxMjE0MA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Use the search API's `post_filter` parameter. Search requests apply post\n          \n          \n            \n            filters only to search hits, not aggregations. See <<post-filter>>.\n          \n          \n            \n            * Use the search API's `post_filter` parameter. Search requests apply \n          \n          \n            \n            <<post-filter,post filters>> only to search hits, not aggregations.", "url": "https://github.com/elastic/elasticsearch/pull/60903#discussion_r468012140", "createdAt": "2020-08-10T15:59:56Z", "author": {"login": "lockewritesdocs"}, "path": "docs/reference/search/filter-search-results.asciidoc", "diffHunk": "@@ -0,0 +1,18 @@\n+[[filter-search-results]]\n+== Filter search results\n+\n+You can use two methods to filter search results:\n+\n+* Use a boolean query with a `filter` query clause. Search requests apply\n+boolean filters to both search hits and <<search-aggregations,aggregations>>.\n+See <<query-dsl-bool-query,boolean query>>.\n+\n+* Use the search API's `post_filter` parameter. Search requests apply post\n+filters only to search hits, not aggregations. See <<post-filter>>.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b96c120a1242b2a4870b374661dd0a458a148ae6"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyNDA0NTQxOnYy", "diffSide": "RIGHT", "path": "docs/reference/search/filter-search-results.asciidoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNjowMDoyMlrOG-VNgA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNjowMDoyMlrOG-VNgA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODAxMjQxNg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            If wanted, you can also <<rescore,rescore>> hits after the post filter to\n          \n          \n            \n            improve relevance and reorder results. See <<rescore>>.\n          \n          \n            \n            You can also <<rescore,rescore>> hits after the post filter to\n          \n          \n            \n            improve relevance and reorder results.", "url": "https://github.com/elastic/elasticsearch/pull/60903#discussion_r468012416", "createdAt": "2020-08-10T16:00:22Z", "author": {"login": "lockewritesdocs"}, "path": "docs/reference/search/filter-search-results.asciidoc", "diffHunk": "@@ -0,0 +1,18 @@\n+[[filter-search-results]]\n+== Filter search results\n+\n+You can use two methods to filter search results:\n+\n+* Use a boolean query with a `filter` query clause. Search requests apply\n+boolean filters to both search hits and <<search-aggregations,aggregations>>.\n+See <<query-dsl-bool-query,boolean query>>.\n+\n+* Use the search API's `post_filter` parameter. Search requests apply post\n+filters only to search hits, not aggregations. See <<post-filter>>.\n++\n+If wanted, you can also <<rescore,rescore>> hits after the post filter to\n+improve relevance and reorder results. See <<rescore>>.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b96c120a1242b2a4870b374661dd0a458a148ae6"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyNTE4MTk3OnYy", "diffSide": "RIGHT", "path": "docs/reference/search/filter-search-results.asciidoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQyMToxNzozMlrOG-gHyw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQyMToxNzozMlrOG-gHyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODE5MTE3OQ==", "bodyText": "I'd put the emphasis more on what the user is trying to accomplish than the mechanics at this level. Something like:\nYou can filter search results by including a filter clause within the query itself, or by applying a post filter. When you include a filter clause in a Boolean query, the filter applies to both the search hits and aggregations. When you use a post filter, the filter only applies to the search hits. Using a post filter enables you calculate aggregations based on a broader result set, and then further narrow the results.", "url": "https://github.com/elastic/elasticsearch/pull/60903#discussion_r468191179", "createdAt": "2020-08-10T21:17:32Z", "author": {"login": "debadair"}, "path": "docs/reference/search/filter-search-results.asciidoc", "diffHunk": "@@ -0,0 +1,18 @@\n+[[filter-search-results]]\n+== Filter search results\n+\n+You can use two methods to filter search results:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fc7d2a8215006ae5f8fc5f58eb1688ba531b67a7"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyNTIxNjIyOnYy", "diffSide": "RIGHT", "path": "docs/reference/search/request/post-filter.asciidoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQyMToyODo0MVrOG-gb8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQyMToyODo0MVrOG-gb8Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODE5NjMzNw==", "bodyText": "This is a bit awkward because the parameter isn't applied, the filter is. Maybe:\nWhen you use the post_filter parameter to filter search results, the search hits are filtered after the aggregations are calculated. A post filter has no impact on the aggregation results.", "url": "https://github.com/elastic/elasticsearch/pull/60903#discussion_r468196337", "createdAt": "2020-08-10T21:28:41Z", "author": {"login": "debadair"}, "path": "docs/reference/search/request/post-filter.asciidoc", "diffHunk": "@@ -1,8 +1,9 @@\n-[[request-body-search-post-filter]]\n-==== Post filter\n+[discrete]\n+[[post-filter]]\n+=== Post filter\n \n-The `post_filter` is applied to the search `hits` at the very end of a search\n-request,  after aggregations have already been calculated. Its purpose is\n+The `post_filter` parameter is applied to the search `hits` at the very end of a search", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fc7d2a8215006ae5f8fc5f58eb1688ba531b67a7"}, "originalPosition": 9}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2525, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}