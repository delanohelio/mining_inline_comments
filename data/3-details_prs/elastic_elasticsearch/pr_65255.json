{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIzODk3NDY0", "number": 65255, "title": "Adding back a validation of incorrect response header", "bodyText": "SQL used to validate this and previous refactoring accidentaly removed\nthis.\nThis commit brings it back.", "createdAt": "2020-11-19T11:59:45Z", "url": "https://github.com/elastic/elasticsearch/pull/65255", "merged": true, "mergeCommit": {"oid": "4f4c3d3371b00d2b6c688af4b9c6c6af4b84f75e"}, "closed": true, "closedAt": "2020-11-30T16:17:11Z", "author": {"login": "pgomulka"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdeBYu6gH2gAyNTIzODk3NDY0OjFlYjVjMzY0YzBmYmNlZmFjZjNjMTczOTkxYzI2NTkxMmFlNWQ4NWI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdhhAn2gH2gAyNTIzODk3NDY0OmU4ZGI0YWJhNzM0YzI1ZmVmZWRhNmY1MWZjY2FjNDQxYWZjZTk1ZWY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1eb5c364c0fbcefacf3c173991c265912ae5d85b", "author": {"user": {"login": "pgomulka", "name": "Przemyslaw Gomulka"}}, "url": "https://github.com/elastic/elasticsearch/commit/1eb5c364c0fbcefacf3c173991c265912ae5d85b", "committedDate": "2020-11-19T11:51:53Z", "message": "Adding back a validation of incorrect response header\n\nSQL used to validate this and previous refactoring accidentaly removed\nthis.\nThis commit brings it back."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1a0110db4467a31f5a32dbcb94e48bf41896123a", "author": {"user": {"login": "pgomulka", "name": "Przemyslaw Gomulka"}}, "url": "https://github.com/elastic/elasticsearch/commit/1a0110db4467a31f5a32dbcb94e48bf41896123a", "committedDate": "2020-11-19T13:54:58Z", "message": "precommit"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2NTIxNTAw", "url": "https://github.com/elastic/elasticsearch/pull/65255#pullrequestreview-536521500", "createdAt": "2020-11-23T14:27:29Z", "commit": {"oid": "1a0110db4467a31f5a32dbcb94e48bf41896123a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNDoyNzozMFrOH4Px3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNDoyNzozMFrOH4Px3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODc0MDgyOA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        String msg = String.format(Locale.ROOT, \"Invalid response content type. Accept=%s Content-Type=%s format=%s\",\n          \n          \n            \n                        String msg = String.format(Locale.ROOT, \"Invalid request content type: Accept=[%s], Content-Type=[%s], format=[%s]\",\n          \n      \n    \n    \n  \n\nGenerally QL code uses square brackets to enclose values; this makes white space easier to spot and formatting to read.\nAlso, I guess we want to point out that the request is ill-formatted?\nBut otherwise LGTM, thanks.", "url": "https://github.com/elastic/elasticsearch/pull/65255#discussion_r528740828", "createdAt": "2020-11-23T14:27:30Z", "author": {"login": "bpintea"}, "path": "x-pack/plugin/sql/src/main/java/org/elasticsearch/xpack/sql/plugin/RestSqlQueryAction.java", "diffHunk": "@@ -58,15 +59,19 @@ protected RestChannelConsumer prepareRequest(RestRequest request, NodeClient cli\n         }\n \n         responseMediaType = sqlMediaTypeParser.getMediaType(request, sqlRequest);\n-\n+        if (responseMediaType == null) {\n+            String msg = String.format(Locale.ROOT, \"Invalid response content type. Accept=%s Content-Type=%s format=%s\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a0110db4467a31f5a32dbcb94e48bf41896123a"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2NTIxODAy", "url": "https://github.com/elastic/elasticsearch/pull/65255#pullrequestreview-536521802", "createdAt": "2020-11-23T14:27:49Z", "commit": {"oid": "1a0110db4467a31f5a32dbcb94e48bf41896123a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ff473536fe52cf044e4df71f614b37da741c805", "author": {"user": {"login": "pgomulka", "name": "Przemyslaw Gomulka"}}, "url": "https://github.com/elastic/elasticsearch/commit/2ff473536fe52cf044e4df71f614b37da741c805", "committedDate": "2020-11-24T07:44:28Z", "message": "Update x-pack/plugin/sql/src/main/java/org/elasticsearch/xpack/sql/plugin/RestSqlQueryAction.java\n\nCo-authored-by: Bogdan Pintea <bpintea@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8adadf97eb8c1773aa45ca3b7865829e136c61cd", "author": {"user": {"login": "pgomulka", "name": "Przemyslaw Gomulka"}}, "url": "https://github.com/elastic/elasticsearch/commit/8adadf97eb8c1773aa45ca3b7865829e136c61cd", "committedDate": "2020-11-25T08:59:37Z", "message": "Merge branch 'master' into compat/fix_sql_incorrect_response"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a2db48a29a41f235d0770ee553bc4f48786feb59", "author": {"user": {"login": "pgomulka", "name": "Przemyslaw Gomulka"}}, "url": "https://github.com/elastic/elasticsearch/commit/a2db48a29a41f235d0770ee553bc4f48786feb59", "committedDate": "2020-11-25T11:08:31Z", "message": "fix test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "473029724edb581b89fb4d6ee75fb9a6afa44e76", "author": {"user": {"login": "pgomulka", "name": "Przemyslaw Gomulka"}}, "url": "https://github.com/elastic/elasticsearch/commit/473029724edb581b89fb4d6ee75fb9a6afa44e76", "committedDate": "2020-11-25T11:11:26Z", "message": "Merge branch 'master' into compat/fix_sql_incorrect_response"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e8db4aba734c25fefeda6f51fccac441afce95ef", "author": {"user": {"login": "pgomulka", "name": "Przemyslaw Gomulka"}}, "url": "https://github.com/elastic/elasticsearch/commit/e8db4aba734c25fefeda6f51fccac441afce95ef", "committedDate": "2020-11-30T08:24:17Z", "message": "line lenght"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 877, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}