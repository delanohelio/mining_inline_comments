{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY4NDE2NTMx", "number": 51592, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxMTowMDoyMFrODbiBwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxNDo0ODowM1rODbmPhA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMwMTk1NjQ5OnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/sql/qa/src/main/java/org/elasticsearch/xpack/sql/qa/jdbc/ResultSetTestCase.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxMTowMDoyMFrOFjEbmQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxMTowMDoyMFrOFjEbmQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjMxNzA4MQ==", "bodyText": "Could you please add a comment here, for the 18 (maximum offset)?", "url": "https://github.com/elastic/elasticsearch/pull/51592#discussion_r372317081", "createdAt": "2020-01-29T11:00:20Z", "author": {"login": "matriv"}, "path": "x-pack/plugin/sql/qa/src/main/java/org/elasticsearch/xpack/sql/qa/jdbc/ResultSetTestCase.java", "diffHunk": "@@ -879,10 +887,20 @@ public void testGettingDateWithoutCalendar() throws Exception {\n         Long randomLongDate = randomNonNegativeLong();\n         indexSimpleDocumentWithTrueValues(randomLongDate);\n         \n-        doWithQuery(SELECT_ALL_FIELDS, (results) -> {\n+        // Create simple timezones (in the form of Z/GMT+/-x so that timezones offsets differences between\n+        // Java versions (the one server runs on and the one the test runs on) will not skew the tests' results\n+        int hoursOffset = randomIntBetween(0, 18);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4f424609af8327f22870c7bc5174109c99ae1cb4"}, "originalPosition": 162}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMwMjY0NzA4OnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/sql/qa/src/main/java/org/elasticsearch/xpack/sql/qa/jdbc/ResultSetTestCase.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxNDo0ODowM1rOFjLB-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxNDo0ODowM1rOFjLB-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjQyNTIxMA==", "bodyText": "Just a note: while GMT and UTC are identical in this timezones context, my impression is that there is a shift towards using the UTC for references.", "url": "https://github.com/elastic/elasticsearch/pull/51592#discussion_r372425210", "createdAt": "2020-01-29T14:48:03Z", "author": {"login": "bpintea"}, "path": "x-pack/plugin/sql/qa/src/main/java/org/elasticsearch/xpack/sql/qa/jdbc/ResultSetTestCase.java", "diffHunk": "@@ -879,10 +887,23 @@ public void testGettingDateWithoutCalendar() throws Exception {\n         Long randomLongDate = randomNonNegativeLong();\n         indexSimpleDocumentWithTrueValues(randomLongDate);\n         \n-        doWithQuery(SELECT_ALL_FIELDS, (results) -> {\n+        /*\n+         * Create simple timezones (in the form of Z/GMT+/-x so that timezones offsets differences between Java versions (the one \n+         * server runs on and the one the test runs on) will not skew the tests' results.\n+         * -18/+18 is the maximum range of offsets accepted by ZoneOffset, even if in reality this range is more like [-12, +14].\n+         */\n+        int hoursOffset = randomIntBetween(0, 18);\n+        int subHours = hoursOffset != 18 ? randomFrom(0, 15, 30, 45) : 0;\n+        int plusMinus = randomBoolean() ? 1 : -1;\n+        int totalSeconds = (hoursOffset * 3600 + subHours * 60) * plusMinus;\n+        \n+        ZoneOffset randomFixedZone = ZoneOffset.ofTotalSeconds(totalSeconds);\n+        String zoneString = (hoursOffset == 0 && subHours == 0) ? \"Z\" : \"GMT\" + randomFixedZone.getId();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "abd222f3a1807ea36539313c83abaefbd9decd47"}, "originalPosition": 171}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 87, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}