{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE4MzY0NDk5", "number": 64850, "title": "Introduce licensed plugins", "bodyText": "This PR introduces the concept of \"licensed\" plugins. Such plugins may only be installed on installations of the default distribution, and this is enforced by the plugin installer. This PR also moves the quote-aware-fs plugin to the x-pack directory, and marks it as licensed.\nNote that I didn't move the plugin source under x-pack/plugin because all the existing x-pack plugins are actually bundles as modules into the default distribution, whereas the quota-aware-fs plugin needs to remain a standalone plugin.\nNote that release-manager will also need updated to know about this new plugin location, so that the plugin can be build and included in the release. I will prepare another and intend to merge them at the same time.", "createdAt": "2020-11-10T09:55:45Z", "url": "https://github.com/elastic/elasticsearch/pull/64850", "merged": true, "mergeCommit": {"oid": "fd675fd8361ca0c426277d2d10beb557c71b5a37"}, "closed": true, "closedAt": "2020-11-17T16:21:58Z", "author": {"login": "pugnascotia"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdZh5p5gH2gAyNTE4MzY0NDk5OjgzYzc4NWJjMDg2M2E5MDdjZTdhZDkxZTI3ODE5N2IzM2YyZjQxMDc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABddXztQAH2gAyNTE4MzY0NDk5OmM5YjdmNTY2NjY3MDAxNzRhYjVlMjNjYjUxNWJiMTVjNjE2Y2NlOTk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "83c785bc0863a907ce7ad91e278197b33f2f4107", "author": {"user": {"login": "pugnascotia", "name": "Rory Hunter"}}, "url": "https://github.com/elastic/elasticsearch/commit/83c785bc0863a907ce7ad91e278197b33f2f4107", "committedDate": "2020-11-05T12:55:11Z", "message": "Move quota-aware-fs plugin under x-pack/ and mark it licensed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "18f22e8a43f98b5f30a59fcd4836bc9fe639377a", "author": {"user": {"login": "pugnascotia", "name": "Rory Hunter"}}, "url": "https://github.com/elastic/elasticsearch/commit/18f22e8a43f98b5f30a59fcd4836bc9fe639377a", "committedDate": "2020-11-05T13:03:29Z", "message": "Prompt to accept license when installing licensed plugin"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a3f3abf5aee55996e4ea820ebcbdf8b9944d5ff7", "author": {"user": {"login": "pugnascotia", "name": "Rory Hunter"}}, "url": "https://github.com/elastic/elasticsearch/commit/a3f3abf5aee55996e4ea820ebcbdf8b9944d5ff7", "committedDate": "2020-11-05T13:04:06Z", "message": "Test fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f298b031490639dd799445df03e98098adc1706b", "author": {"user": {"login": "pugnascotia", "name": "Rory Hunter"}}, "url": "https://github.com/elastic/elasticsearch/commit/f298b031490639dd799445df03e98098adc1706b", "committedDate": "2020-11-05T13:05:04Z", "message": "Always print something in batch mode, make everything more testable"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "146a95babf899d2d3015bc977eab405037bb5d8f", "author": {"user": {"login": "pugnascotia", "name": "Rory Hunter"}}, "url": "https://github.com/elastic/elasticsearch/commit/146a95babf899d2d3015bc977eab405037bb5d8f", "committedDate": "2020-11-05T13:32:16Z", "message": "Fixes after forward-port of 6.8 prototype"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "147cb8cf87d845232c3d6ab5c68fbafd72631b02", "author": {"user": {"login": "pugnascotia", "name": "Rory Hunter"}}, "url": "https://github.com/elastic/elasticsearch/commit/147cb8cf87d845232c3d6ab5c68fbafd72631b02", "committedDate": "2020-11-09T16:25:17Z", "message": "Merge remote-tracking branch 'upstream/master' into move-quota-aware-fs-plugin-to-xpack"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a23ec454ec5cca7c2e4cce8a84574531277c4580", "author": {"user": {"login": "pugnascotia", "name": "Rory Hunter"}}, "url": "https://github.com/elastic/elasticsearch/commit/a23ec454ec5cca7c2e4cce8a84574531277c4580", "committedDate": "2020-11-09T20:32:39Z", "message": "Change license check to just abort on non-default distros"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4fe4b59e1c1ccdbfec1f9e12479e968f1f9d4722", "author": {"user": {"login": "pugnascotia", "name": "Rory Hunter"}}, "url": "https://github.com/elastic/elasticsearch/commit/4fe4b59e1c1ccdbfec1f9e12479e968f1f9d4722", "committedDate": "2020-11-09T20:39:36Z", "message": "Merge remote-tracking branch 'upstream/master' into move-quota-aware-fs-plugin-to-xpack"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4f5757a4d85959cd92c9ce28cba41c760b80e839", "author": {"user": {"login": "pugnascotia", "name": "Rory Hunter"}}, "url": "https://github.com/elastic/elasticsearch/commit/4f5757a4d85959cd92c9ce28cba41c760b80e839", "committedDate": "2020-11-10T10:14:40Z", "message": "Fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6837fc59394ea54bcdf58cefc7de3c1992b4c728", "author": {"user": {"login": "pugnascotia", "name": "Rory Hunter"}}, "url": "https://github.com/elastic/elasticsearch/commit/6837fc59394ea54bcdf58cefc7de3c1992b4c728", "committedDate": "2020-11-10T10:46:51Z", "message": "Only run QuotaAwareFsTests on default distro"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3ODIxNDMy", "url": "https://github.com/elastic/elasticsearch/pull/64850#pullrequestreview-527821432", "createdAt": "2020-11-11T02:46:10Z", "commit": {"oid": "6837fc59394ea54bcdf58cefc7de3c1992b4c728"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMxNTk1MTU3", "url": "https://github.com/elastic/elasticsearch/pull/64850#pullrequestreview-531595157", "createdAt": "2020-11-16T18:30:57Z", "commit": {"oid": "6837fc59394ea54bcdf58cefc7de3c1992b4c728"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQxODozMDo1N1rOH0MB2A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQxODozMTo0NlrOH0MDbg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDQ4NTA4MA==", "bodyText": "Is there a reason this method couldn't exist within InstallPluginCommand?", "url": "https://github.com/elastic/elasticsearch/pull/64850#discussion_r524485080", "createdAt": "2020-11-16T18:30:57Z", "author": {"login": "rjernst"}, "path": "distribution/tools/plugin-cli/src/main/java/org/elasticsearch/plugins/LicensedPlugin.java", "diffHunk": "@@ -0,0 +1,51 @@\n+/*\n+ * Licensed to Elasticsearch under one or more contributor\n+ * license agreements. See the NOTICE file distributed with\n+ * this work for additional information regarding copyright\n+ * ownership. Elasticsearch licenses this file to you under\n+ * the Apache License, Version 2.0 (the \"License\"); you may\n+ * not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *         http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.elasticsearch.plugins;\n+\n+import org.elasticsearch.Build;\n+import org.elasticsearch.cli.ExitCodes;\n+import org.elasticsearch.cli.Terminal;\n+import org.elasticsearch.cli.UserException;\n+\n+import java.util.List;\n+\n+public class LicensedPlugin {\n+\n+    static void checkCanInstallationProceed(Terminal terminal, Build.Flavor flavor, PluginInfo info) throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6837fc59394ea54bcdf58cefc7de3c1992b4c728"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDQ4NTQ4Ng==", "bodyText": "This comment is out of date?", "url": "https://github.com/elastic/elasticsearch/pull/64850#discussion_r524485486", "createdAt": "2020-11-16T18:31:46Z", "author": {"login": "rjernst"}, "path": "docs/build.gradle", "diffHunk": "@@ -87,7 +87,7 @@ project.rootProject.subprojects.findAll { it.parent.path == ':plugins' }.each {\n    * doesn't make sense to waste time installing them.\n    * Also skip quota-aware-fs since it has to be configured in order to use", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6837fc59394ea54bcdf58cefc7de3c1992b4c728"}, "originalPosition": 2}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMxOTAwMzMx", "url": "https://github.com/elastic/elasticsearch/pull/64850#pullrequestreview-531900331", "createdAt": "2020-11-16T23:16:08Z", "commit": {"oid": "6837fc59394ea54bcdf58cefc7de3c1992b4c728"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e3e5e7681fd2f8031f6a8a26637897ca5dc7f445", "author": {"user": {"login": "pugnascotia", "name": "Rory Hunter"}}, "url": "https://github.com/elastic/elasticsearch/commit/e3e5e7681fd2f8031f6a8a26637897ca5dc7f445", "committedDate": "2020-11-17T11:02:36Z", "message": "Merge remote-tracking branch 'upstream/master' into move-quota-aware-fs-plugin-to-xpack"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "02608ba4a7e27c9105b4afa0682ebff710743876", "author": {"user": {"login": "pugnascotia", "name": "Rory Hunter"}}, "url": "https://github.com/elastic/elasticsearch/commit/02608ba4a7e27c9105b4afa0682ebff710743876", "committedDate": "2020-11-17T11:18:04Z", "message": "Address review comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c9b7f56666700174ab5e23cb515bb15c616cce99", "author": {"user": {"login": "pugnascotia", "name": "Rory Hunter"}}, "url": "https://github.com/elastic/elasticsearch/commit/c9b7f56666700174ab5e23cb515bb15c616cce99", "committedDate": "2020-11-17T11:25:20Z", "message": "Formatting"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1134, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}