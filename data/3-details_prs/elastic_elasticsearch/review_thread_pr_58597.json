{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQwNTc2OTU0", "number": 58597, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQyMTo0NTozMVrOEJ15Rg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQyMTo0Njo0MFrOEJ169A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc4NzU1NjU0OnYy", "diffSide": "RIGHT", "path": "modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/DateFormat.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQyMTo0NTozMVrOGqjV2w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwNjozNDo1NlrOGqttIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzI3MjQxMQ==", "bodyText": "unfinished comment?", "url": "https://github.com/elastic/elasticsearch/pull/58597#discussion_r447272411", "createdAt": "2020-06-29T21:45:31Z", "author": {"login": "rjernst"}, "path": "modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/DateFormat.java", "diffHunk": "@@ -45,8 +46,13 @@\n     Iso8601 {\n         @Override\n         Function<String, ZonedDateTime> getFunction(String format, ZoneId timezone, Locale locale) {\n-            return (date) -> DateFormatters.from(DateFormatter.forPattern(\"iso8601\").parse(date), timezone)\n-                                            .withZoneSameInstant(timezone);\n+            //", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d83791602f4937224aa6220cec67c44e99f9f0ae"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzQ0MjIwOA==", "bodyText": "will remove", "url": "https://github.com/elastic/elasticsearch/pull/58597#discussion_r447442208", "createdAt": "2020-06-30T06:34:56Z", "author": {"login": "pgomulka"}, "path": "modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/DateFormat.java", "diffHunk": "@@ -45,8 +46,13 @@\n     Iso8601 {\n         @Override\n         Function<String, ZonedDateTime> getFunction(String format, ZoneId timezone, Locale locale) {\n-            return (date) -> DateFormatters.from(DateFormatter.forPattern(\"iso8601\").parse(date), timezone)\n-                                            .withZoneSameInstant(timezone);\n+            //", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzI3MjQxMQ=="}, "originalCommit": {"oid": "d83791602f4937224aa6220cec67c44e99f9f0ae"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc4NzU1NzIwOnYy", "diffSide": "RIGHT", "path": "modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/DateFormatTests.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQyMTo0NTo0N1rOGqjWTg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwNjozNTozNFrOGqtuaw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzI3MjUyNg==", "bodyText": "nit: extra newlines?", "url": "https://github.com/elastic/elasticsearch/pull/58597#discussion_r447272526", "createdAt": "2020-06-29T21:45:47Z", "author": {"login": "rjernst"}, "path": "modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/DateFormatTests.java", "diffHunk": "@@ -126,4 +143,6 @@ public void testFromString() {\n         assertThat(DateFormat.fromString(\"tai64n\"), equalTo(DateFormat.Java));\n         assertThat(DateFormat.fromString(\"prefix-\" + randomAlphaOfLengthBetween(1, 10)), equalTo(DateFormat.Java));\n     }\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d83791602f4937224aa6220cec67c44e99f9f0ae"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzQ0MjUzOQ==", "bodyText": "will remove", "url": "https://github.com/elastic/elasticsearch/pull/58597#discussion_r447442539", "createdAt": "2020-06-30T06:35:34Z", "author": {"login": "pgomulka"}, "path": "modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/DateFormatTests.java", "diffHunk": "@@ -126,4 +143,6 @@ public void testFromString() {\n         assertThat(DateFormat.fromString(\"tai64n\"), equalTo(DateFormat.Java));\n         assertThat(DateFormat.fromString(\"prefix-\" + randomAlphaOfLengthBetween(1, 10)), equalTo(DateFormat.Java));\n     }\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzI3MjUyNg=="}, "originalCommit": {"oid": "d83791602f4937224aa6220cec67c44e99f9f0ae"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc4NzU2MDg0OnYy", "diffSide": "RIGHT", "path": "modules/ingest-common/build.gradle", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQyMTo0Njo0MFrOGqjYVA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQxMjo1ODoxM1rOGq7EPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzI3MzA0NA==", "bodyText": "Why is this necessary? modules depend on server, implicitly, so we should be able to use the date classes moved there from server, not need them in core lib", "url": "https://github.com/elastic/elasticsearch/pull/58597#discussion_r447273044", "createdAt": "2020-06-29T21:46:40Z", "author": {"login": "rjernst"}, "path": "modules/ingest-common/build.gradle", "diffHunk": "@@ -25,6 +25,7 @@ esplugin {\n \n dependencies {\n   compileOnly project(':modules:lang-painless')\n+  compile project(':libs:elasticsearch-core')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d83791602f4937224aa6220cec67c44e99f9f0ae"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzQ0NDA1OA==", "bodyText": "I had problem accessing IsoCalendarDataProvider from server when running ingest yml tests.\nMaybe adding this as test only? But then again it has to be available when running a cluster for yml test.\nAny ideas?", "url": "https://github.com/elastic/elasticsearch/pull/58597#discussion_r447444058", "createdAt": "2020-06-30T06:39:06Z", "author": {"login": "pgomulka"}, "path": "modules/ingest-common/build.gradle", "diffHunk": "@@ -25,6 +25,7 @@ esplugin {\n \n dependencies {\n   compileOnly project(':modules:lang-painless')\n+  compile project(':libs:elasticsearch-core')", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzI3MzA0NA=="}, "originalCommit": {"oid": "d83791602f4937224aa6220cec67c44e99f9f0ae"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzY2MTExOA==", "bodyText": "interesting. I cannot reproduce that failure now.  I can see from dependency tree that server is indeed on a test compile classpath. Not sure how was this failing for me before..\nReverted back the change moving IsoCalendarDataProvider", "url": "https://github.com/elastic/elasticsearch/pull/58597#discussion_r447661118", "createdAt": "2020-06-30T12:58:13Z", "author": {"login": "pgomulka"}, "path": "modules/ingest-common/build.gradle", "diffHunk": "@@ -25,6 +25,7 @@ esplugin {\n \n dependencies {\n   compileOnly project(':modules:lang-painless')\n+  compile project(':libs:elasticsearch-core')", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzI3MzA0NA=="}, "originalCommit": {"oid": "d83791602f4937224aa6220cec67c44e99f9f0ae"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2332, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}