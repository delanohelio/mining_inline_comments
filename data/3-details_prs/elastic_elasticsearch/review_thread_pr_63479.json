{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk5OTA1ODEz", "number": 63479, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNjoyNDozMlrOErsTFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxODozNjo0NlrOEtnLyQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MjUwMDA1OnYy", "diffSide": "RIGHT", "path": "docs/reference/migration/migrate_7_10.asciidoc", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNjoyNDozMlrOHemkfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNzo0NToxMlrOHepmmg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTg1MTI2MQ==", "bodyText": "@javanna  Can you confirm this is the case? If Java users need to make a change to accommodate the new argument, I'd like to give them next steps here.", "url": "https://github.com/elastic/elasticsearch/pull/63479#discussion_r501851261", "createdAt": "2020-10-08T16:24:32Z", "author": {"login": "jrodewig"}, "path": "docs/reference/migration/migrate_7_10.asciidoc", "diffHunk": "@@ -18,54 +18,131 @@ See also <<release-highlights>> and <<es-release-notes>>.\n //tag::notable-breaking-changes[]\n \n [discrete]\n-[[breaking_710_search_changes]]\n-=== Search Changes\n+[[breaking_710_security_changes]]\n+=== Authentication changes\n \n [discrete]\n-==== Missing checks for `index.max_docvalue_fields_search`\n-The setting `index.max_docvalue_fields_search` limits the number of fields that\n-can be retrieved through `docvalue_fields` in a search. Previously we only\n-checked this limit when `docvalue_fields` appeared in the top-level search\n-request body. Now we also enforce the limit when loading doc value fields in\n-an `inner_hits` section or in a `top_hits` aggregation.\n+[[api-keys-require-name-property]]\n+.API keys now require a `name` property.\n+[%collapsible]\n+====\n+*Details* +\n+The `name` property is now required to create or grant an API key.\n \n-[discrete]\n-[[breaking_710_networking_changes]]\n-=== Networking Changes\n+[source,js]\n+----\n+{\n+    \"...\": \"...\",\n+    \"api_key\": {\n+      \"name\": \"key-1\"\n+    }\n+}\n+----\n+// NOTCONSOLE\n+\n+*Impact* +\n+To avoid errors, specify the `name` property when creating or granting API keys.\n+====\n \n [discrete]\n-==== *.tcp.keep_idle and *.tcp.keep_interval now bounded\n-The settings `{network,transport,http}.tcp.keep_idle` and\n-`{network,transport,http}.tcp.keep_interval` are now limited to a maximum\n-value of 300, which amounts to 5 minutes. This helps ensure that, if\n-explicitly configured, only reasonable values are set.\n+[[breaking_710_java_changes]]\n+==== Java changes\n \n-//end::notable-breaking-changes[]\n+[discrete]\n+==== Machine Learning: `allow_no_jobs` and `allow_no_datafeeds` deprecated in favor of `allow_no_match`\n+`allow_no_jobs` and `allow_no_datafeeds` API parameters are deprecated in favor\n+of `allow_no_match`. The old parameters are still accepted by the APIs but the\n+deprecation warning is emitted if the old parameter name is used in the request\n+body or as a request param.\n+High-level REST client classes will now send the new `allow_no_match` parameter.\n \n-.Repository Stats API is deprecated\n+[[supplier-searchlookup-arg]]\n+.The `MappedFieldType#fielddataBuilder` method now accepts a `Supplier<SearchLookup>` argument.\n [%collapsible]\n ====\n *Details* +\n-The Repository Stats API has been introduced in 7.8.0 as an experimental API\n-and was never released. This API is superseded by the <<repositories-metering-apis,Repositories Metering APIs>>\n-added in 7.10.0 which should be used instead. The Repository Stats API is\n-deprecated starting 7.10.0 and will be removed in 8.0.0.\n-\n+For future feature development, we added a `Supplier<SearchLookup>` argument to\n+the existing `MappedFieldType#fielddataBuilder` method.\n+ \n *Impact* +\n-Use the <<repositories-metering-apis,Repositories Metering APIs>>.\n+No action needed.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "26283051131ce2d4c3576416980884af1978df39"}, "originalPosition": 75}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTg4NzAyOQ==", "bodyText": "the change impacts plugin developers that plug in a custom field type, meaning that their impl most likely defines the fielddataBuilder method which has now a different signature. They will have to adapt the signature of the method they override, that's it. This is one of those breaking changes thats easily solvable thanks to the java compiler", "url": "https://github.com/elastic/elasticsearch/pull/63479#discussion_r501887029", "createdAt": "2020-10-08T17:23:07Z", "author": {"login": "javanna"}, "path": "docs/reference/migration/migrate_7_10.asciidoc", "diffHunk": "@@ -18,54 +18,131 @@ See also <<release-highlights>> and <<es-release-notes>>.\n //tag::notable-breaking-changes[]\n \n [discrete]\n-[[breaking_710_search_changes]]\n-=== Search Changes\n+[[breaking_710_security_changes]]\n+=== Authentication changes\n \n [discrete]\n-==== Missing checks for `index.max_docvalue_fields_search`\n-The setting `index.max_docvalue_fields_search` limits the number of fields that\n-can be retrieved through `docvalue_fields` in a search. Previously we only\n-checked this limit when `docvalue_fields` appeared in the top-level search\n-request body. Now we also enforce the limit when loading doc value fields in\n-an `inner_hits` section or in a `top_hits` aggregation.\n+[[api-keys-require-name-property]]\n+.API keys now require a `name` property.\n+[%collapsible]\n+====\n+*Details* +\n+The `name` property is now required to create or grant an API key.\n \n-[discrete]\n-[[breaking_710_networking_changes]]\n-=== Networking Changes\n+[source,js]\n+----\n+{\n+    \"...\": \"...\",\n+    \"api_key\": {\n+      \"name\": \"key-1\"\n+    }\n+}\n+----\n+// NOTCONSOLE\n+\n+*Impact* +\n+To avoid errors, specify the `name` property when creating or granting API keys.\n+====\n \n [discrete]\n-==== *.tcp.keep_idle and *.tcp.keep_interval now bounded\n-The settings `{network,transport,http}.tcp.keep_idle` and\n-`{network,transport,http}.tcp.keep_interval` are now limited to a maximum\n-value of 300, which amounts to 5 minutes. This helps ensure that, if\n-explicitly configured, only reasonable values are set.\n+[[breaking_710_java_changes]]\n+==== Java changes\n \n-//end::notable-breaking-changes[]\n+[discrete]\n+==== Machine Learning: `allow_no_jobs` and `allow_no_datafeeds` deprecated in favor of `allow_no_match`\n+`allow_no_jobs` and `allow_no_datafeeds` API parameters are deprecated in favor\n+of `allow_no_match`. The old parameters are still accepted by the APIs but the\n+deprecation warning is emitted if the old parameter name is used in the request\n+body or as a request param.\n+High-level REST client classes will now send the new `allow_no_match` parameter.\n \n-.Repository Stats API is deprecated\n+[[supplier-searchlookup-arg]]\n+.The `MappedFieldType#fielddataBuilder` method now accepts a `Supplier<SearchLookup>` argument.\n [%collapsible]\n ====\n *Details* +\n-The Repository Stats API has been introduced in 7.8.0 as an experimental API\n-and was never released. This API is superseded by the <<repositories-metering-apis,Repositories Metering APIs>>\n-added in 7.10.0 which should be used instead. The Repository Stats API is\n-deprecated starting 7.10.0 and will be removed in 8.0.0.\n-\n+For future feature development, we added a `Supplier<SearchLookup>` argument to\n+the existing `MappedFieldType#fielddataBuilder` method.\n+ \n *Impact* +\n-Use the <<repositories-metering-apis,Repositories Metering APIs>>.\n+No action needed.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTg1MTI2MQ=="}, "originalCommit": {"oid": "26283051131ce2d4c3576416980884af1978df39"}, "originalPosition": 75}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTkwMDk1NA==", "bodyText": "Thanks @javanna. I added some text to address. Let me know if I missed anything or left out an important detail.", "url": "https://github.com/elastic/elasticsearch/pull/63479#discussion_r501900954", "createdAt": "2020-10-08T17:45:12Z", "author": {"login": "jrodewig"}, "path": "docs/reference/migration/migrate_7_10.asciidoc", "diffHunk": "@@ -18,54 +18,131 @@ See also <<release-highlights>> and <<es-release-notes>>.\n //tag::notable-breaking-changes[]\n \n [discrete]\n-[[breaking_710_search_changes]]\n-=== Search Changes\n+[[breaking_710_security_changes]]\n+=== Authentication changes\n \n [discrete]\n-==== Missing checks for `index.max_docvalue_fields_search`\n-The setting `index.max_docvalue_fields_search` limits the number of fields that\n-can be retrieved through `docvalue_fields` in a search. Previously we only\n-checked this limit when `docvalue_fields` appeared in the top-level search\n-request body. Now we also enforce the limit when loading doc value fields in\n-an `inner_hits` section or in a `top_hits` aggregation.\n+[[api-keys-require-name-property]]\n+.API keys now require a `name` property.\n+[%collapsible]\n+====\n+*Details* +\n+The `name` property is now required to create or grant an API key.\n \n-[discrete]\n-[[breaking_710_networking_changes]]\n-=== Networking Changes\n+[source,js]\n+----\n+{\n+    \"...\": \"...\",\n+    \"api_key\": {\n+      \"name\": \"key-1\"\n+    }\n+}\n+----\n+// NOTCONSOLE\n+\n+*Impact* +\n+To avoid errors, specify the `name` property when creating or granting API keys.\n+====\n \n [discrete]\n-==== *.tcp.keep_idle and *.tcp.keep_interval now bounded\n-The settings `{network,transport,http}.tcp.keep_idle` and\n-`{network,transport,http}.tcp.keep_interval` are now limited to a maximum\n-value of 300, which amounts to 5 minutes. This helps ensure that, if\n-explicitly configured, only reasonable values are set.\n+[[breaking_710_java_changes]]\n+==== Java changes\n \n-//end::notable-breaking-changes[]\n+[discrete]\n+==== Machine Learning: `allow_no_jobs` and `allow_no_datafeeds` deprecated in favor of `allow_no_match`\n+`allow_no_jobs` and `allow_no_datafeeds` API parameters are deprecated in favor\n+of `allow_no_match`. The old parameters are still accepted by the APIs but the\n+deprecation warning is emitted if the old parameter name is used in the request\n+body or as a request param.\n+High-level REST client classes will now send the new `allow_no_match` parameter.\n \n-.Repository Stats API is deprecated\n+[[supplier-searchlookup-arg]]\n+.The `MappedFieldType#fielddataBuilder` method now accepts a `Supplier<SearchLookup>` argument.\n [%collapsible]\n ====\n *Details* +\n-The Repository Stats API has been introduced in 7.8.0 as an experimental API\n-and was never released. This API is superseded by the <<repositories-metering-apis,Repositories Metering APIs>>\n-added in 7.10.0 which should be used instead. The Repository Stats API is\n-deprecated starting 7.10.0 and will be removed in 8.0.0.\n-\n+For future feature development, we added a `Supplier<SearchLookup>` argument to\n+the existing `MappedFieldType#fielddataBuilder` method.\n+ \n *Impact* +\n-Use the <<repositories-metering-apis,Repositories Metering APIs>>.\n+No action needed.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTg1MTI2MQ=="}, "originalCommit": {"oid": "26283051131ce2d4c3576416980884af1978df39"}, "originalPosition": 75}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MjU2NjcyOnYy", "diffSide": "RIGHT", "path": "docs/reference/migration/migrate_7_10.asciidoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNjo0MTozN1rOHenOHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNjo0MTozN1rOHenOHg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTg2MTkxOA==", "bodyText": "@lcawl Could you take a look at the content of this change and reformat?", "url": "https://github.com/elastic/elasticsearch/pull/63479#discussion_r501861918", "createdAt": "2020-10-08T16:41:37Z", "author": {"login": "jrodewig"}, "path": "docs/reference/migration/migrate_7_10.asciidoc", "diffHunk": "@@ -18,54 +18,131 @@ See also <<release-highlights>> and <<es-release-notes>>.\n //tag::notable-breaking-changes[]\n \n [discrete]\n-[[breaking_710_search_changes]]\n-=== Search Changes\n+[[breaking_710_security_changes]]\n+=== Authentication changes\n \n-[discrete]\n-==== Missing checks for `index.max_docvalue_fields_search`\n-The setting `index.max_docvalue_fields_search` limits the number of fields that\n-can be retrieved through `docvalue_fields` in a search. Previously we only\n-checked this limit when `docvalue_fields` appeared in the top-level search\n-request body. Now we also enforce the limit when loading doc value fields in\n-an `inner_hits` section or in a `top_hits` aggregation.\n+[[api-keys-require-name-property]]\n+.API keys now require a `name` property.\n+[%collapsible]\n+====\n+*Details* +\n+The `name` property is now required to create or grant an API key.\n \n-[discrete]\n-[[breaking_710_networking_changes]]\n-=== Networking Changes\n+[source,js]\n+----\n+{\n+    \"...\": \"...\",\n+    \"api_key\": {\n+      \"name\": \"key-1\"\n+    }\n+}\n+----\n+// NOTCONSOLE\n+\n+*Impact* +\n+To avoid errors, specify the `name` property when creating or granting API keys.\n+====\n \n [discrete]\n-==== *.tcp.keep_idle and *.tcp.keep_interval now bounded\n-The settings `{network,transport,http}.tcp.keep_idle` and\n-`{network,transport,http}.tcp.keep_interval` are now limited to a maximum\n-value of 300, which amounts to 5 minutes. This helps ensure that, if\n-explicitly configured, only reasonable values are set.\n+[[breaking_710_java_changes]]\n+==== Java changes\n \n-//end::notable-breaking-changes[]\n+[discrete]\n+==== Machine Learning: `allow_no_jobs` and `allow_no_datafeeds` deprecated in favor of `allow_no_match`\n+`allow_no_jobs` and `allow_no_datafeeds` API parameters are deprecated in favor\n+of `allow_no_match`. The old parameters are still accepted by the APIs but the\n+deprecation warning is emitted if the old parameter name is used in the request\n+body or as a request param.\n+High-level REST client classes will now send the new `allow_no_match` parameter.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ab5bd7e914eee99e91c4e08594951bb953ba3b1b"}, "originalPosition": 57}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MjgyMzA3OnYy", "diffSide": "RIGHT", "path": "docs/reference/migration/migrate_7_10.asciidoc", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNzo0Nzo0MlrOHeps_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNzo1NDo1NFrOHep_cQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTkwMjU4OA==", "bodyText": "maybe we can be more precise and say \"if you implement a mapper plugin\" as not all plugins need to implement that method. But maybe it's too much, up to you :)", "url": "https://github.com/elastic/elasticsearch/pull/63479#discussion_r501902588", "createdAt": "2020-10-08T17:47:42Z", "author": {"login": "javanna"}, "path": "docs/reference/migration/migrate_7_10.asciidoc", "diffHunk": "@@ -18,54 +18,133 @@ See also <<release-highlights>> and <<es-release-notes>>.\n //tag::notable-breaking-changes[]\n \n [discrete]\n-[[breaking_710_search_changes]]\n-=== Search Changes\n+[[breaking_710_security_changes]]\n+=== Authentication changes\n \n-[discrete]\n-==== Missing checks for `index.max_docvalue_fields_search`\n-The setting `index.max_docvalue_fields_search` limits the number of fields that\n-can be retrieved through `docvalue_fields` in a search. Previously we only\n-checked this limit when `docvalue_fields` appeared in the top-level search\n-request body. Now we also enforce the limit when loading doc value fields in\n-an `inner_hits` section or in a `top_hits` aggregation.\n+[[api-keys-require-name-property]]\n+.API keys now require a `name` property.\n+[%collapsible]\n+====\n+*Details* +\n+The `name` property is now required to create or grant an API key.\n \n-[discrete]\n-[[breaking_710_networking_changes]]\n-=== Networking Changes\n+[source,js]\n+----\n+{\n+    \"...\": \"...\",\n+    \"api_key\": {\n+      \"name\": \"key-1\"\n+    }\n+}\n+----\n+// NOTCONSOLE\n+\n+*Impact* +\n+To avoid errors, specify the `name` property when creating or granting API keys.\n+====\n \n [discrete]\n-==== *.tcp.keep_idle and *.tcp.keep_interval now bounded\n-The settings `{network,transport,http}.tcp.keep_idle` and\n-`{network,transport,http}.tcp.keep_interval` are now limited to a maximum\n-value of 300, which amounts to 5 minutes. This helps ensure that, if\n-explicitly configured, only reasonable values are set.\n+[[breaking_710_java_changes]]\n+==== Java changes\n \n-//end::notable-breaking-changes[]\n+[discrete]\n+==== Machine Learning: `allow_no_jobs` and `allow_no_datafeeds` deprecated in favor of `allow_no_match`\n+`allow_no_jobs` and `allow_no_datafeeds` API parameters are deprecated in favor\n+of `allow_no_match`. The old parameters are still accepted by the APIs but the\n+deprecation warning is emitted if the old parameter name is used in the request\n+body or as a request param.\n+High-level REST client classes will now send the new `allow_no_match` parameter.\n \n-.Repository Stats API is deprecated\n+[[supplier-searchlookup-arg]]\n+.The `MappedFieldType#fielddataBuilder` method now accepts a `Supplier<SearchLookup>` argument.\n [%collapsible]\n ====\n *Details* +\n-The Repository Stats API has been introduced in 7.8.0 as an experimental API\n-and was never released. This API is superseded by the <<repositories-metering-apis,Repositories Metering APIs>>\n-added in 7.10.0 which should be used instead. The Repository Stats API is\n-deprecated starting 7.10.0 and will be removed in 8.0.0.\n-\n+To support future feature development, the existing\n+`MappedFieldType#fielddataBuilder` method now accepts a new\n+`Supplier<SearchLookup>` argument.\n+ \n *Impact* +\n-Use the <<repositories-metering-apis,Repositories Metering APIs>>.\n+If developing or maintaining an {es} plugin, update your implementation of the", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5ee594239bc64738071fcf77f1c947075814b84"}, "originalPosition": 76}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTkwNDQ4MQ==", "bodyText": "Thanks for the feedback! I updated to If you develop or maintain a mapper plugin,...", "url": "https://github.com/elastic/elasticsearch/pull/63479#discussion_r501904481", "createdAt": "2020-10-08T17:50:41Z", "author": {"login": "jrodewig"}, "path": "docs/reference/migration/migrate_7_10.asciidoc", "diffHunk": "@@ -18,54 +18,133 @@ See also <<release-highlights>> and <<es-release-notes>>.\n //tag::notable-breaking-changes[]\n \n [discrete]\n-[[breaking_710_search_changes]]\n-=== Search Changes\n+[[breaking_710_security_changes]]\n+=== Authentication changes\n \n-[discrete]\n-==== Missing checks for `index.max_docvalue_fields_search`\n-The setting `index.max_docvalue_fields_search` limits the number of fields that\n-can be retrieved through `docvalue_fields` in a search. Previously we only\n-checked this limit when `docvalue_fields` appeared in the top-level search\n-request body. Now we also enforce the limit when loading doc value fields in\n-an `inner_hits` section or in a `top_hits` aggregation.\n+[[api-keys-require-name-property]]\n+.API keys now require a `name` property.\n+[%collapsible]\n+====\n+*Details* +\n+The `name` property is now required to create or grant an API key.\n \n-[discrete]\n-[[breaking_710_networking_changes]]\n-=== Networking Changes\n+[source,js]\n+----\n+{\n+    \"...\": \"...\",\n+    \"api_key\": {\n+      \"name\": \"key-1\"\n+    }\n+}\n+----\n+// NOTCONSOLE\n+\n+*Impact* +\n+To avoid errors, specify the `name` property when creating or granting API keys.\n+====\n \n [discrete]\n-==== *.tcp.keep_idle and *.tcp.keep_interval now bounded\n-The settings `{network,transport,http}.tcp.keep_idle` and\n-`{network,transport,http}.tcp.keep_interval` are now limited to a maximum\n-value of 300, which amounts to 5 minutes. This helps ensure that, if\n-explicitly configured, only reasonable values are set.\n+[[breaking_710_java_changes]]\n+==== Java changes\n \n-//end::notable-breaking-changes[]\n+[discrete]\n+==== Machine Learning: `allow_no_jobs` and `allow_no_datafeeds` deprecated in favor of `allow_no_match`\n+`allow_no_jobs` and `allow_no_datafeeds` API parameters are deprecated in favor\n+of `allow_no_match`. The old parameters are still accepted by the APIs but the\n+deprecation warning is emitted if the old parameter name is used in the request\n+body or as a request param.\n+High-level REST client classes will now send the new `allow_no_match` parameter.\n \n-.Repository Stats API is deprecated\n+[[supplier-searchlookup-arg]]\n+.The `MappedFieldType#fielddataBuilder` method now accepts a `Supplier<SearchLookup>` argument.\n [%collapsible]\n ====\n *Details* +\n-The Repository Stats API has been introduced in 7.8.0 as an experimental API\n-and was never released. This API is superseded by the <<repositories-metering-apis,Repositories Metering APIs>>\n-added in 7.10.0 which should be used instead. The Repository Stats API is\n-deprecated starting 7.10.0 and will be removed in 8.0.0.\n-\n+To support future feature development, the existing\n+`MappedFieldType#fielddataBuilder` method now accepts a new\n+`Supplier<SearchLookup>` argument.\n+ \n *Impact* +\n-Use the <<repositories-metering-apis,Repositories Metering APIs>>.\n+If developing or maintaining an {es} plugin, update your implementation of the", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTkwMjU4OA=="}, "originalCommit": {"oid": "d5ee594239bc64738071fcf77f1c947075814b84"}, "originalPosition": 76}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTkwNzMxMw==", "bodyText": "thank you!", "url": "https://github.com/elastic/elasticsearch/pull/63479#discussion_r501907313", "createdAt": "2020-10-08T17:54:54Z", "author": {"login": "javanna"}, "path": "docs/reference/migration/migrate_7_10.asciidoc", "diffHunk": "@@ -18,54 +18,133 @@ See also <<release-highlights>> and <<es-release-notes>>.\n //tag::notable-breaking-changes[]\n \n [discrete]\n-[[breaking_710_search_changes]]\n-=== Search Changes\n+[[breaking_710_security_changes]]\n+=== Authentication changes\n \n-[discrete]\n-==== Missing checks for `index.max_docvalue_fields_search`\n-The setting `index.max_docvalue_fields_search` limits the number of fields that\n-can be retrieved through `docvalue_fields` in a search. Previously we only\n-checked this limit when `docvalue_fields` appeared in the top-level search\n-request body. Now we also enforce the limit when loading doc value fields in\n-an `inner_hits` section or in a `top_hits` aggregation.\n+[[api-keys-require-name-property]]\n+.API keys now require a `name` property.\n+[%collapsible]\n+====\n+*Details* +\n+The `name` property is now required to create or grant an API key.\n \n-[discrete]\n-[[breaking_710_networking_changes]]\n-=== Networking Changes\n+[source,js]\n+----\n+{\n+    \"...\": \"...\",\n+    \"api_key\": {\n+      \"name\": \"key-1\"\n+    }\n+}\n+----\n+// NOTCONSOLE\n+\n+*Impact* +\n+To avoid errors, specify the `name` property when creating or granting API keys.\n+====\n \n [discrete]\n-==== *.tcp.keep_idle and *.tcp.keep_interval now bounded\n-The settings `{network,transport,http}.tcp.keep_idle` and\n-`{network,transport,http}.tcp.keep_interval` are now limited to a maximum\n-value of 300, which amounts to 5 minutes. This helps ensure that, if\n-explicitly configured, only reasonable values are set.\n+[[breaking_710_java_changes]]\n+==== Java changes\n \n-//end::notable-breaking-changes[]\n+[discrete]\n+==== Machine Learning: `allow_no_jobs` and `allow_no_datafeeds` deprecated in favor of `allow_no_match`\n+`allow_no_jobs` and `allow_no_datafeeds` API parameters are deprecated in favor\n+of `allow_no_match`. The old parameters are still accepted by the APIs but the\n+deprecation warning is emitted if the old parameter name is used in the request\n+body or as a request param.\n+High-level REST client classes will now send the new `allow_no_match` parameter.\n \n-.Repository Stats API is deprecated\n+[[supplier-searchlookup-arg]]\n+.The `MappedFieldType#fielddataBuilder` method now accepts a `Supplier<SearchLookup>` argument.\n [%collapsible]\n ====\n *Details* +\n-The Repository Stats API has been introduced in 7.8.0 as an experimental API\n-and was never released. This API is superseded by the <<repositories-metering-apis,Repositories Metering APIs>>\n-added in 7.10.0 which should be used instead. The Repository Stats API is\n-deprecated starting 7.10.0 and will be removed in 8.0.0.\n-\n+To support future feature development, the existing\n+`MappedFieldType#fielddataBuilder` method now accepts a new\n+`Supplier<SearchLookup>` argument.\n+ \n *Impact* +\n-Use the <<repositories-metering-apis,Repositories Metering APIs>>.\n+If developing or maintaining an {es} plugin, update your implementation of the", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTkwMjU4OA=="}, "originalCommit": {"oid": "d5ee594239bc64738071fcf77f1c947075814b84"}, "originalPosition": 76}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MzY3NjIyOnYy", "diffSide": "RIGHT", "path": "docs/reference/migration/migrate_7_10.asciidoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NTo1NFrOHexxvA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NTo1NFrOHexxvA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjAzNDg3Ng==", "bodyText": "CC @gwbrown", "url": "https://github.com/elastic/elasticsearch/pull/63479#discussion_r502034876", "createdAt": "2020-10-08T21:55:54Z", "author": {"login": "jrodewig"}, "path": "docs/reference/migration/migrate_7_10.asciidoc", "diffHunk": "@@ -18,54 +18,171 @@ See also <<release-highlights>> and <<es-release-notes>>.\n //tag::notable-breaking-changes[]\n \n [discrete]\n-[[breaking_710_search_changes]]\n-=== Search Changes\n+[[breaking_710_security_changes]]\n+=== Authentication changes\n \n-[discrete]\n-==== Missing checks for `index.max_docvalue_fields_search`\n-The setting `index.max_docvalue_fields_search` limits the number of fields that\n-can be retrieved through `docvalue_fields` in a search. Previously we only\n-checked this limit when `docvalue_fields` appeared in the top-level search\n-request body. Now we also enforce the limit when loading doc value fields in\n-an `inner_hits` section or in a `top_hits` aggregation.\n+[[api-keys-require-name-property]]\n+.API keys now require a `name` property.\n+[%collapsible]\n+====\n+*Details* +\n+The `name` property is now required to create or grant an API key.\n+\n+[source,js]\n+----\n+{\n+    \"...\": \"...\",\n+    \"api_key\": {\n+      \"name\": \"key-1\"\n+    }\n+}\n+----\n+// NOTCONSOLE\n+\n+*Impact* +\n+To avoid errors, specify the `name` property when creating or granting API keys.\n+====\n \n [discrete]\n-[[breaking_710_networking_changes]]\n-=== Networking Changes\n+[[breaking_710_indices_changes]]\n+==== Indices changes\n+\n+[[bc-deprecate-rest-api-access-to-system-indices]]\n+.REST API access to system indices is now deprecated.\n+[%collapsible]\n+====\n+*Details* +\n+We are deprecating REST API access to system indices. Most REST API requests\n+that attempt to access system indices will return the following deprecation\n+warning:\n+\n+[source,text]\n+----\n+this request accesses system indices: [.system_index_name], but in a future\n+major version, direct access to system indices will be prevented by default\n+----\n+\n+The following REST API endpoints access system indices as part of their\n+implementation and will not return the deprecation warning:\n+\n+* `GET _cluster/health`\n+* `GET {index}/_recovery`\n+* `GET _cluster/allocation/explain`\n+* `GET _cluster/state`\n+* `POST _cluster/reroute`\n+* `GET {index}/_stats`\n+* `GET {index}/_segments`\n+* `GET {index}/_shard_stores`\n+* `GET _cat/[indices,aliases,health,recovery,shards,segments]`\n+\n+*Impact* +\n+To avoid deprecation warnings, do not use unsupported REST APIs to access system\n+indices.\n+====", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ed6182c91e0a9f9bdab61a53ffcd8ca91ea9e75b"}, "originalPosition": 75}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE2MjYzMDY0OnYy", "diffSide": "RIGHT", "path": "docs/reference/migration/migrate_7_10.asciidoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxODozNTo1NFrOHhgEnw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxODozNTo1NFrOHhgEnw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDg5MDUyNw==", "bodyText": "I think this should be a peer section to the Authentication section, not a child.\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            ==== Indices changes\n          \n          \n            \n            === Indices changes", "url": "https://github.com/elastic/elasticsearch/pull/63479#discussion_r504890527", "createdAt": "2020-10-14T18:35:54Z", "author": {"login": "lcawl"}, "path": "docs/reference/migration/migrate_7_10.asciidoc", "diffHunk": "@@ -18,54 +18,182 @@ See also <<release-highlights>> and <<es-release-notes>>.\n //tag::notable-breaking-changes[]\n \n [discrete]\n-[[breaking_710_search_changes]]\n-=== Search Changes\n+[[breaking_710_security_changes]]\n+=== Authentication changes\n \n-[discrete]\n-==== Missing checks for `index.max_docvalue_fields_search`\n-The setting `index.max_docvalue_fields_search` limits the number of fields that\n-can be retrieved through `docvalue_fields` in a search. Previously we only\n-checked this limit when `docvalue_fields` appeared in the top-level search\n-request body. Now we also enforce the limit when loading doc value fields in\n-an `inner_hits` section or in a `top_hits` aggregation.\n+[[api-keys-require-name-property]]\n+.API keys now require a `name` property.\n+[%collapsible]\n+====\n+*Details* +\n+The `name` property is now required to create or grant an API key.\n+\n+[source,js]\n+----\n+{\n+    \"...\": \"...\",\n+    \"api_key\": {\n+      \"name\": \"key-1\"\n+    }\n+}\n+----\n+// NOTCONSOLE\n+\n+*Impact* +\n+To avoid errors, specify the `name` property when creating or granting API keys.\n+====\n \n [discrete]\n-[[breaking_710_networking_changes]]\n-=== Networking Changes\n+[[breaking_710_indices_changes]]\n+==== Indices changes", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fac4241de3d007db7360ecf20142a8f2716c381e"}, "originalPosition": 42}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE2MjYzMzY5OnYy", "diffSide": "RIGHT", "path": "docs/reference/migration/migrate_7_10.asciidoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxODozNjo0N1rOHhgGfw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxODozNjo0N1rOHhgGfw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDg5MTAwNw==", "bodyText": "Likewise, I think this should be a peer section to the others.\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            ==== Java changes\n          \n          \n            \n            === Java changes", "url": "https://github.com/elastic/elasticsearch/pull/63479#discussion_r504891007", "createdAt": "2020-10-14T18:36:47Z", "author": {"login": "lcawl"}, "path": "docs/reference/migration/migrate_7_10.asciidoc", "diffHunk": "@@ -18,54 +18,182 @@ See also <<release-highlights>> and <<es-release-notes>>.\n //tag::notable-breaking-changes[]\n \n [discrete]\n-[[breaking_710_search_changes]]\n-=== Search Changes\n+[[breaking_710_security_changes]]\n+=== Authentication changes\n \n-[discrete]\n-==== Missing checks for `index.max_docvalue_fields_search`\n-The setting `index.max_docvalue_fields_search` limits the number of fields that\n-can be retrieved through `docvalue_fields` in a search. Previously we only\n-checked this limit when `docvalue_fields` appeared in the top-level search\n-request body. Now we also enforce the limit when loading doc value fields in\n-an `inner_hits` section or in a `top_hits` aggregation.\n+[[api-keys-require-name-property]]\n+.API keys now require a `name` property.\n+[%collapsible]\n+====\n+*Details* +\n+The `name` property is now required to create or grant an API key.\n+\n+[source,js]\n+----\n+{\n+    \"...\": \"...\",\n+    \"api_key\": {\n+      \"name\": \"key-1\"\n+    }\n+}\n+----\n+// NOTCONSOLE\n+\n+*Impact* +\n+To avoid errors, specify the `name` property when creating or granting API keys.\n+====\n \n [discrete]\n-[[breaking_710_networking_changes]]\n-=== Networking Changes\n+[[breaking_710_indices_changes]]\n+==== Indices changes\n+\n+[[bc-deprecate-rest-api-access-to-system-indices]]\n+.REST API access to system indices is deprecated.\n+[%collapsible]\n+====\n+*Details* +\n+We are deprecating REST API access to system indices. Most REST API requests\n+that attempt to access system indices will return the following deprecation\n+warning:\n+\n+[source,text]\n+----\n+this request accesses system indices: [.system_index_name], but in a future\n+major version, direct access to system indices will be prevented by default\n+----\n+\n+The following REST API endpoints access system indices as part of their\n+implementation and will not return the deprecation warning:\n+\n+* `GET _cluster/health`\n+* `GET {index}/_recovery`\n+* `GET _cluster/allocation/explain`\n+* `GET _cluster/state`\n+* `POST _cluster/reroute`\n+* `GET {index}/_stats`\n+* `GET {index}/_segments`\n+* `GET {index}/_shard_stores`\n+* `GET _cat/[indices,aliases,health,recovery,shards,segments]`\n+\n+*Impact* +\n+To avoid deprecation warnings, do not use unsupported REST APIs to access system\n+indices.\n+====\n+\n \n [discrete]\n-==== *.tcp.keep_idle and *.tcp.keep_interval now bounded\n-The settings `{network,transport,http}.tcp.keep_idle` and\n-`{network,transport,http}.tcp.keep_interval` are now limited to a maximum\n-value of 300, which amounts to 5 minutes. This helps ensure that, if\n-explicitly configured, only reasonable values are set.\n+[[breaking_710_java_changes]]\n+==== Java changes", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fac4241de3d007db7360ecf20142a8f2716c381e"}, "originalPosition": 85}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3055, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}