{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA3ODM2MjQ0", "number": 64018, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQyMzo0NzozMlrOEwiv2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQwMTozOTo1NlrOEwkBzg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE5MzM2NDA5OnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/security/src/main/java/org/elasticsearch/xpack/security/authc/esnative/NativeUsersStore.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQyMzo0NzozMlrOHmLnrA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQwNDoyNDozOFrOHmQGAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTc5ODMxNg==", "bodyText": "With this PR, the empty passwordHash now has a deterministic value, new char[0]. It would be better to remove  hasEmptyPassword from the constructor parameters of ReservedUserInfo because it can be safely derived. It is more consistent to derive it than manually passing it into the constructor. We can also replace the hasEmptyPassword field with a method call which internally returns passwordHash.length == 0.", "url": "https://github.com/elastic/elasticsearch/pull/64018#discussion_r509798316", "createdAt": "2020-10-21T23:47:32Z", "author": {"login": "ywangd"}, "path": "x-pack/plugin/security/src/main/java/org/elasticsearch/xpack/security/authc/esnative/NativeUsersStore.java", "diffHunk": "@@ -697,5 +691,13 @@ ReservedUserInfo deepClone() {\n         boolean verifyPassword(SecureString data) {\n             return hasher.verify(data, this.passwordHash);\n         }\n+\n+        static ReservedUserInfo defaultEnabledUserInfo(){\n+            return new ReservedUserInfo(new char[0], true, true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ecffc225e23390b7c7e31bf0b1f1d1fe4f6ef717"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTg3MTYxNg==", "bodyText": "Makes sense, will do", "url": "https://github.com/elastic/elasticsearch/pull/64018#discussion_r509871616", "createdAt": "2020-10-22T04:24:38Z", "author": {"login": "jkakavas"}, "path": "x-pack/plugin/security/src/main/java/org/elasticsearch/xpack/security/authc/esnative/NativeUsersStore.java", "diffHunk": "@@ -697,5 +691,13 @@ ReservedUserInfo deepClone() {\n         boolean verifyPassword(SecureString data) {\n             return hasher.verify(data, this.passwordHash);\n         }\n+\n+        static ReservedUserInfo defaultEnabledUserInfo(){\n+            return new ReservedUserInfo(new char[0], true, true);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTc5ODMxNg=="}, "originalCommit": {"oid": "ecffc225e23390b7c7e31bf0b1f1d1fe4f6ef717"}, "originalPosition": 44}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE5MzU3MzkwOnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/security/src/main/java/org/elasticsearch/xpack/security/authc/esnative/NativeUsersStore.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQwMTozOTo1NlrOHmNhLQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQwMTozOTo1NlrOHmNhLQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTgyOTQyMQ==", "bodyText": "Nit:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    static ReservedUserInfo defaultEnabledUserInfo(){\n          \n          \n            \n                    static ReservedUserInfo defaultEnabledUserInfo() {", "url": "https://github.com/elastic/elasticsearch/pull/64018#discussion_r509829421", "createdAt": "2020-10-22T01:39:56Z", "author": {"login": "tvernum"}, "path": "x-pack/plugin/security/src/main/java/org/elasticsearch/xpack/security/authc/esnative/NativeUsersStore.java", "diffHunk": "@@ -697,5 +691,13 @@ ReservedUserInfo deepClone() {\n         boolean verifyPassword(SecureString data) {\n             return hasher.verify(data, this.passwordHash);\n         }\n+\n+        static ReservedUserInfo defaultEnabledUserInfo(){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ecffc225e23390b7c7e31bf0b1f1d1fe4f6ef717"}, "originalPosition": 43}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4257, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}