{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ5MzMwMTM5", "number": 59589, "title": "Add a \"verbose\" option to the data frame analytics stats endpoint", "bodyText": "The data frame analytics stats endpoint can return extremely verbose information that is only useful if it is plotted on a chart.\nThis PR adds a ?verbose option to allow the API user to hide some parts of the response.\nThis is achieved the following way:\n\nverbose param is now returned by the RestGetDataFrameAnalyticsStatsAction.responseParams method\nGetDataFrameAnalyticsStatsAction.Response.toXContent method translates verbose param to for_internal_storage param\nfor_internal_storage param is used by ValidationLoss.toXContent method to either output or hide fold_values field.\n\nThe change is a no-op to indexing code (as it sets for_internal_storage param to true). It only affects _stats endpoint.\nThe only field that this PR allows to hide is fold_values. All the other fields in the _stats response have bounded size (are not arrays nor lists) so I think the user cannot gain much by hiding them.\nRelates #59125", "createdAt": "2020-07-15T08:30:49Z", "url": "https://github.com/elastic/elasticsearch/pull/59589", "merged": true, "mergeCommit": {"oid": "dfbb47dcaa60140ec49ec94d678ddc23d9a10c39"}, "closed": true, "closedAt": "2020-07-15T13:59:57Z", "author": {"login": "przemekwitek"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc1GapKABqjM1NDc0ODY2OTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc1KVIaABqjM1NDg0NzIzNjA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b75c0ffd227f908cb03ea905435de3405e3d0aba", "author": {"user": {"login": "przemekwitek", "name": "Przemys\u0142aw Witek"}}, "url": "https://github.com/elastic/elasticsearch/commit/b75c0ffd227f908cb03ea905435de3405e3d0aba", "committedDate": "2020-07-15T08:29:48Z", "message": "Add a \"verbose\" option to the data frame analytics stats endpoint"}, "afterCommit": {"oid": "2bb587b75d244e8fd60fea88b0c1a84d9947505c", "author": {"user": {"login": "przemekwitek", "name": "Przemys\u0142aw Witek"}}, "url": "https://github.com/elastic/elasticsearch/commit/2bb587b75d244e8fd60fea88b0c1a84d9947505c", "committedDate": "2020-07-15T08:32:27Z", "message": "Add a \"verbose\" option to the data frame analytics stats endpoint"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2bb587b75d244e8fd60fea88b0c1a84d9947505c", "author": {"user": {"login": "przemekwitek", "name": "Przemys\u0142aw Witek"}}, "url": "https://github.com/elastic/elasticsearch/commit/2bb587b75d244e8fd60fea88b0c1a84d9947505c", "committedDate": "2020-07-15T08:32:27Z", "message": "Add a \"verbose\" option to the data frame analytics stats endpoint"}, "afterCommit": {"oid": "7eeb1c46622b405e890e814db4262e4226173202", "author": {"user": {"login": "przemekwitek", "name": "Przemys\u0142aw Witek"}}, "url": "https://github.com/elastic/elasticsearch/commit/7eeb1c46622b405e890e814db4262e4226173202", "committedDate": "2020-07-15T08:45:21Z", "message": "Add a \"verbose\" option to the data frame analytics stats endpoint"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4OTA4OTE1", "url": "https://github.com/elastic/elasticsearch/pull/59589#pullrequestreview-448908915", "createdAt": "2020-07-15T12:36:03Z", "commit": {"oid": "cf72691a35ec91b782852c15fb3f147892267bcd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMjozNjowNFrOGx8DTw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMjozNjowNFrOGx8DTw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTAxNzI5NQ==", "bodyText": "isn't this failing?", "url": "https://github.com/elastic/elasticsearch/pull/59589#discussion_r455017295", "createdAt": "2020-07-15T12:36:04Z", "author": {"login": "dimitris-athanasiou"}, "path": "x-pack/plugin/core/src/test/java/org/elasticsearch/xpack/core/ml/action/GetDataFrameAnalyticsStatsActionResponseTests.java", "diffHunk": "@@ -107,17 +107,17 @@ public void testVerbose() {\n         Response response =\n             randomResponse(1, () -> randomFrom(ClassificationStatsTests.createRandom(), RegressionStatsTests.createRandom()));\n \n-        // VERBOSE param defaults to \"true\", fold values outputted\n+        // VERBOSE param defaults to \"false\", fold values *not* outputted", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cf72691a35ec91b782852c15fb3f147892267bcd"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4OTE2MDA2", "url": "https://github.com/elastic/elasticsearch/pull/59589#pullrequestreview-448916006", "createdAt": "2020-07-15T12:45:33Z", "commit": {"oid": "d5518166dd80edbffe97c435ab57af9560b50c93"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ed7daabf16f580f67f542efda183ab00a7d803b", "author": {"user": {"login": "przemekwitek", "name": "Przemys\u0142aw Witek"}}, "url": "https://github.com/elastic/elasticsearch/commit/4ed7daabf16f580f67f542efda183ab00a7d803b", "committedDate": "2020-07-15T13:05:58Z", "message": "Add a \"verbose\" option to the data frame analytics stats endpoint"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fdae38ec15b47c19dd9121cf5019aed6178f3ebe", "author": {"user": {"login": "przemekwitek", "name": "Przemys\u0142aw Witek"}}, "url": "https://github.com/elastic/elasticsearch/commit/fdae38ec15b47c19dd9121cf5019aed6178f3ebe", "committedDate": "2020-07-15T13:05:58Z", "message": "Add the new 'verbose' param to the API docs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a5542186480d260f9db603b3f630555add92cf69", "author": {"user": {"login": "przemekwitek", "name": "Przemys\u0142aw Witek"}}, "url": "https://github.com/elastic/elasticsearch/commit/a5542186480d260f9db603b3f630555add92cf69", "committedDate": "2020-07-15T13:05:58Z", "message": "Change default value of the `verbose` flag to `false`"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cecaa26579613866942d4d3898ad6dfac85e645a", "author": {"user": {"login": "przemekwitek", "name": "Przemys\u0142aw Witek"}}, "url": "https://github.com/elastic/elasticsearch/commit/cecaa26579613866942d4d3898ad6dfac85e645a", "committedDate": "2020-07-15T13:05:58Z", "message": "Fix unit test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d5518166dd80edbffe97c435ab57af9560b50c93", "author": {"user": {"login": "przemekwitek", "name": "Przemys\u0142aw Witek"}}, "url": "https://github.com/elastic/elasticsearch/commit/d5518166dd80edbffe97c435ab57af9560b50c93", "committedDate": "2020-07-15T12:34:13Z", "message": "Fix unit test"}, "afterCommit": {"oid": "cecaa26579613866942d4d3898ad6dfac85e645a", "author": {"user": {"login": "przemekwitek", "name": "Przemys\u0142aw Witek"}}, "url": "https://github.com/elastic/elasticsearch/commit/cecaa26579613866942d4d3898ad6dfac85e645a", "committedDate": "2020-07-15T13:05:58Z", "message": "Fix unit test"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4363, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}