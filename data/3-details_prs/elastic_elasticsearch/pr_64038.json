{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA4MTEzNjg3", "number": 64038, "title": "Remove QueryShardContext#getMapperService (#63998)", "bodyText": "We have been removing usages of getMapperService with the purpose of removing the method at some point. This is so we don't have to expose the entire MapperService to all of the users of QueryShardContext, but rather only specific methods so we can better control its usages, especially around resolving field types.\nThis commit removes the last few usages and adds the missing methods to QueryShardContext. They all revolve around retrieving DocumentMapper from MapperService, yet we can expose specific methods without even exposing DocumentMapper, which would also cause issues.", "createdAt": "2020-10-22T08:29:50Z", "url": "https://github.com/elastic/elasticsearch/pull/64038", "merged": true, "mergeCommit": {"oid": "8c73755435faf9a2fa5cf5ef39b30fd533d664dd"}, "closed": true, "closedAt": "2020-10-22T10:48:06Z", "author": {"login": "javanna"}, "timelineItems": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdU9r31gH2gAyNTA4MTEzNjg3OjEyMWQ0YWRmMGYzODEyYmIwOWY3MzNlNmU5NzVmMWRmNjk2MDRlMTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdU-vmzAFqTUxNDU0MzgwNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "121d4adf0f3812bb09f733e6e975f1df69604e13", "author": {"user": {"login": "javanna", "name": "Luca Cavanna"}}, "url": "https://github.com/elastic/elasticsearch/commit/121d4adf0f3812bb09f733e6e975f1df69604e13", "committedDate": "2020-10-22T08:27:51Z", "message": "Remove QueryShardContext#getMapperService (#63998)\n\nWe have been removing usages of getMapperService with the purpose of removing the method at some point. This is so we don't have to expose the entire MapperService to all of the users of QueryShardContext, but rather only specific methods so we can better control its usages, especially around resolving field types.\n\nThis commit removes the last few usages and adds the missing methods to QueryShardContext. They all revolve around retrieving DocumentMapper from MapperService, yet we can expose specific methods without even exposing DocumentMapper, which would also cause issues."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE0NTQzODA0", "url": "https://github.com/elastic/elasticsearch/pull/64038#pullrequestreview-514543804", "createdAt": "2020-10-22T09:41:50Z", "commit": {"oid": "121d4adf0f3812bb09f733e6e975f1df69604e13"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQwOTo0MTo1MFrOHmZbzg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQwOTo0MTo1MFrOHmZbzg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDAyNDY1NA==", "bodyText": "@romseygeek I had to add a type argument here on 7.x ,does that look ok?", "url": "https://github.com/elastic/elasticsearch/pull/64038#discussion_r510024654", "createdAt": "2020-10-22T09:41:50Z", "author": {"login": "javanna"}, "path": "server/src/main/java/org/elasticsearch/index/query/QueryShardContext.java", "diffHunk": "@@ -233,6 +237,24 @@ public void addNamedQuery(String name, Query query) {\n         return unmodifiableMap(new HashMap<>(namedQueries));\n     }\n \n+    public ParsedDocument parseDocument(String type, SourceToParse source) throws MapperParsingException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "121d4adf0f3812bb09f733e6e975f1df69604e13"}, "originalPosition": 24}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1111, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}