{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk3ODQ2NDM4", "number": 54692, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxNjozNDozMlrODudDNQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxNjozNDozMlrODudDNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwMDM3MDQ1OnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/elasticsearch/indices/IndicesService.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxNjozNDozMlrOGAdO6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwOToyNDoyNVrOGBPEyA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzEzMjEzOQ==", "bodyText": "This should not be needed anymore, ? We should keep the error as it is.", "url": "https://github.com/elastic/elasticsearch/pull/54692#discussion_r403132139", "createdAt": "2020-04-03T16:34:32Z", "author": {"login": "jimczi"}, "path": "server/src/main/java/org/elasticsearch/indices/IndicesService.java", "diffHunk": "@@ -1374,9 +1374,8 @@ public void loadIntoContext(ShardSearchRequest request, SearchContext context, Q\n             queryPhase.execute(context);\n             try {\n                 context.queryResult().writeToNoId(out);\n-\n             } catch (IOException e) {\n-                throw new AssertionError(\"Could not serialize response\", e);\n+                throw new IllegalArgumentException(\"Could not serialize response\", e);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "97734b56f7e4fd4a89adb55bdc4189ddc325d6b4"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzEzMzY0OQ==", "bodyText": "I think this statement is unsafe.", "url": "https://github.com/elastic/elasticsearch/pull/54692#discussion_r403133649", "createdAt": "2020-04-03T16:37:10Z", "author": {"login": "imotov"}, "path": "server/src/main/java/org/elasticsearch/indices/IndicesService.java", "diffHunk": "@@ -1374,9 +1374,8 @@ public void loadIntoContext(ShardSearchRequest request, SearchContext context, Q\n             queryPhase.execute(context);\n             try {\n                 context.queryResult().writeToNoId(out);\n-\n             } catch (IOException e) {\n-                throw new AssertionError(\"Could not serialize response\", e);\n+                throw new IllegalArgumentException(\"Could not serialize response\", e);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzEzMjEzOQ=="}, "originalCommit": {"oid": "97734b56f7e4fd4a89adb55bdc4189ddc325d6b4"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzEzOTQ1MA==", "bodyText": "Then it should be an UncheckedIOException but imo this change is not needed.", "url": "https://github.com/elastic/elasticsearch/pull/54692#discussion_r403139450", "createdAt": "2020-04-03T16:47:22Z", "author": {"login": "jimczi"}, "path": "server/src/main/java/org/elasticsearch/indices/IndicesService.java", "diffHunk": "@@ -1374,9 +1374,8 @@ public void loadIntoContext(ShardSearchRequest request, SearchContext context, Q\n             queryPhase.execute(context);\n             try {\n                 context.queryResult().writeToNoId(out);\n-\n             } catch (IOException e) {\n-                throw new AssertionError(\"Could not serialize response\", e);\n+                throw new IllegalArgumentException(\"Could not serialize response\", e);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzEzMjEzOQ=="}, "originalCommit": {"oid": "97734b56f7e4fd4a89adb55bdc4189ddc325d6b4"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzk0ODc0NA==", "bodyText": "In general when there is an IOException, you're in big trouble anyway, and trying to handle it is quite heroic. Since the signature of this method throws Exception, I'd be in favor of removing this catch block too. The root cause of the problem is that StreamOutput throws an IOException for something that is not I/O related.", "url": "https://github.com/elastic/elasticsearch/pull/54692#discussion_r403948744", "createdAt": "2020-04-06T09:24:25Z", "author": {"login": "jpountz"}, "path": "server/src/main/java/org/elasticsearch/indices/IndicesService.java", "diffHunk": "@@ -1374,9 +1374,8 @@ public void loadIntoContext(ShardSearchRequest request, SearchContext context, Q\n             queryPhase.execute(context);\n             try {\n                 context.queryResult().writeToNoId(out);\n-\n             } catch (IOException e) {\n-                throw new AssertionError(\"Could not serialize response\", e);\n+                throw new IllegalArgumentException(\"Could not serialize response\", e);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzEzMjEzOQ=="}, "originalCommit": {"oid": "97734b56f7e4fd4a89adb55bdc4189ddc325d6b4"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3976, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}