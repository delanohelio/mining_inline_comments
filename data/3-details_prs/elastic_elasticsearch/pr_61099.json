{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY3NDI5MTM0", "number": 61099, "title": "Add string concatenation node and update ir tree visitor", "bodyText": "Two changes:\n\nThe first is the addition of a specialized string concatenation node as part of the ir tree. This allows us to roll up all of the binary nodes containing string concatenations into one node as a set of arguments which will happen in the next PR. This will help in removing optimization complexity from the semantic phases.\nThis updates the ir tree visitor to have a base class with visitChildren for each node making new ir phases easier to write as only the nodes that are relevant need to be visited. This change is mostly mechanical with the addition of a visitChildren to each ir node.", "createdAt": "2020-08-13T14:38:55Z", "url": "https://github.com/elastic/elasticsearch/pull/61099", "merged": true, "mergeCommit": {"oid": "5f222a3a6fe133f2c74183c2511684de113ed064"}, "closed": true, "closedAt": "2020-08-13T19:17:59Z", "author": {"login": "jdconrad"}, "timelineItems": {"totalCount": 44, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc5F4hvAH2gAyNDY3NDI5MTM0OmZlNGY3YmZiNDM4ZjM4ZTg4ZjU5NmIxOWNlMzhhZTRjZDQ5ZWM1YzY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc-jy94AH2gAyNDY3NDI5MTM0OjYyNDRkZjU3ODBiMWNlYWRlY2ZmNDhkMDg4MGEwNWIzODUwMDM3YWM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "fe4f7bfb438f38e88f596b19ce38ae4cd49ec5c6", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/fe4f7bfb438f38e88f596b19ce38ae4cd49ec5c6", "committedDate": "2020-07-27T18:11:02Z", "message": "Move bootstrap injection into the the ir tree builder phase"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "02b70959c0a4be12ee85565aaf25ee1cae4ebea5", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/02b70959c0a4be12ee85565aaf25ee1cae4ebea5", "committedDate": "2020-07-27T18:42:59Z", "message": "move ScriptClassInfo out of walker and remove unncessary injection\nphases"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "be17b14018e28414e10b9e7e02e3f7c299fc2589", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/be17b14018e28414e10b9e7e02e3f7c299fc2589", "committedDate": "2020-07-27T20:46:00Z", "message": "add AccessNode in place of ECall, EBrace, and EDot"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1725972243f755a6e7b51583ca490140517b70be", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/1725972243f755a6e7b51583ca490140517b70be", "committedDate": "2020-07-27T21:24:32Z", "message": "rename some nodes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d979077dc6248a0ec0dbdf7101fdcf4e11307e9f", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/d979077dc6248a0ec0dbdf7101fdcf4e11307e9f", "committedDate": "2020-07-27T21:38:42Z", "message": "add flip nodes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5e3633cc8e54fae4ef3ad82f13d8689213baa579", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/5e3633cc8e54fae4ef3ad82f13d8689213baa579", "committedDate": "2020-07-28T17:32:29Z", "message": "add dup node"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0a53ce8fb049e000a8535d19f6133d444eddeff8", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/0a53ce8fb049e000a8535d19f6133d444eddeff8", "committedDate": "2020-07-28T17:55:53Z", "message": "add store node"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dc42b1c72c0750a96cd826004c782051deb7164b", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/dc42b1c72c0750a96cd826004c782051deb7164b", "committedDate": "2020-07-28T18:23:33Z", "message": "rename to load nodes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "294963891ce711b9b3e97a6df2cc7f6222991d1f", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/294963891ce711b9b3e97a6df2cc7f6222991d1f", "committedDate": "2020-07-28T18:26:05Z", "message": "add store nodes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8fce1199c70357bf3ed29a4caf0232dda47a604e", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/8fce1199c70357bf3ed29a4caf0232dda47a604e", "committedDate": "2020-07-28T18:46:43Z", "message": "add store nodes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "33976f6b95ec1d851c2e4b7c4da663bc48eb88b9", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/33976f6b95ec1d851c2e4b7c4da663bc48eb88b9", "committedDate": "2020-07-28T18:55:41Z", "message": "add slightly different node setup and decorations for compound\nassignment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "45ef7f3e1c82262c3dd8b550f8b499ea6c2504f5", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/45ef7f3e1c82262c3dd8b550f8b499ea6c2504f5", "committedDate": "2020-07-28T19:27:25Z", "message": "update load nodes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "65f3a8f764e14ac684c3fdc8d2bd922d035b5a4b", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/65f3a8f764e14ac684c3fdc8d2bd922d035b5a4b", "committedDate": "2020-07-28T19:52:57Z", "message": "split ir nodes into load and store"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "922e1e670e907e42a550e9eeb52119bfce6e4bcf", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/922e1e670e907e42a550e9eeb52119bfce6e4bcf", "committedDate": "2020-07-28T20:01:11Z", "message": "some fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "16d8996cbe3d54d1ab20e11a00623e3dd9a22827", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/16d8996cbe3d54d1ab20e11a00623e3dd9a22827", "committedDate": "2020-07-28T20:08:54Z", "message": "fix dup issue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "810e186871e7f075f4e1423c65dba826d9ef42ea", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/810e186871e7f075f4e1423c65dba826d9ef42ea", "committedDate": "2020-07-28T20:10:48Z", "message": "remove dead node"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a4d61ba2e61783c5e884a3af0c161dcff2e42cf4", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/a4d61ba2e61783c5e884a3af0c161dcff2e42cf4", "committedDate": "2020-07-29T17:45:57Z", "message": "Merge branch 'master' into semantic010"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fd130aeb8b8eda556cc45047887ab537d590f61d", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/fd130aeb8b8eda556cc45047887ab537d590f61d", "committedDate": "2020-07-29T17:46:17Z", "message": "Merge branch 'semantic010' into semantic011"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d2f27b89f8a20646232083535d05d3bd81817d3b", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/d2f27b89f8a20646232083535d05d3bd81817d3b", "committedDate": "2020-07-29T17:46:37Z", "message": "Merge branch 'semantic011' into semantic013"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f298cbb66a25cecfd0f9fc0fd837c20aeab0dc8c", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/f298cbb66a25cecfd0f9fc0fd837c20aeab0dc8c", "committedDate": "2020-07-29T17:46:59Z", "message": "Merge branch 'semantic013' into semantic015"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6e4fbd96cac1f420a1bf7c957d6d7bef8401fc2b", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/6e4fbd96cac1f420a1bf7c957d6d7bef8401fc2b", "committedDate": "2020-07-30T22:19:19Z", "message": "update visitor for ir tree"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa8c7fdf8d6adfb2ce422d4ba9aa4074de4adb87", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/aa8c7fdf8d6adfb2ce422d4ba9aa4074de4adb87", "committedDate": "2020-07-31T00:06:32Z", "message": "add string concatenation node"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed08f332fb504699dc8cd870aca36aa8f81fb83e", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/ed08f332fb504699dc8cd870aca36aa8f81fb83e", "committedDate": "2020-08-03T15:57:26Z", "message": "fix up listeners"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3fbd0bcdf699ca71db447a21ea00ce18e8aacbd5", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/3fbd0bcdf699ca71db447a21ea00ce18e8aacbd5", "committedDate": "2020-08-05T16:59:29Z", "message": "Merge branch 'master' into semantic010"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b3fd76361e7e1d00df0f0d4070949130845f6271", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/b3fd76361e7e1d00df0f0d4070949130845f6271", "committedDate": "2020-08-05T17:24:53Z", "message": "response to pr comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e1e958536707210b141a4a495da5ee315e88b06", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/2e1e958536707210b141a4a495da5ee315e88b06", "committedDate": "2020-08-05T19:35:03Z", "message": "Merge branch 'master' into semantic010"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "397c7b1f728cf0f7a7fda6552090ab4d2ccf23b8", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/397c7b1f728cf0f7a7fda6552090ab4d2ccf23b8", "committedDate": "2020-08-05T19:36:47Z", "message": "Merge branch 'semantic010' into semantic011"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8bc699f649519c4d1d7b8b28d31e7add3406966", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/a8bc699f649519c4d1d7b8b28d31e7add3406966", "committedDate": "2020-08-05T20:42:28Z", "message": "fix spacing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aab90f387c3bb5600f90f45d9e27ca0b1b041cb9", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/aab90f387c3bb5600f90f45d9e27ca0b1b041cb9", "committedDate": "2020-08-06T16:05:28Z", "message": "Merge branch 'master' into semantic011"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ee21c7cba9d202259bac2e25edda5994341fe66", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/9ee21c7cba9d202259bac2e25edda5994341fe66", "committedDate": "2020-08-06T16:10:02Z", "message": "Merge branch 'semantic011' into semantic013"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f9e3de4df0b053f324a0a8600399718f67f11d11", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/f9e3de4df0b053f324a0a8600399718f67f11d11", "committedDate": "2020-08-10T18:58:06Z", "message": "Merge branch 'master' into semantic013"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "416801084c6dd5c2fc8179a4ee5f67b5a0e2dddb", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/416801084c6dd5c2fc8179a4ee5f67b5a0e2dddb", "committedDate": "2020-08-10T18:59:56Z", "message": "remove extraneous semicolon"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc0fc208120adee10f5cd2f6ee7e842232d24016", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/bc0fc208120adee10f5cd2f6ee7e842232d24016", "committedDate": "2020-08-10T20:58:55Z", "message": "Merge branch 'master' into semantic013"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "923d361801a8b723f9e7473c37ed3335f0cc225d", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/923d361801a8b723f9e7473c37ed3335f0cc225d", "committedDate": "2020-08-10T21:17:08Z", "message": "Merge branch 'semantic013' into semantic015"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c9dec6c10d79356905cd36df064ed2077a23eef", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/0c9dec6c10d79356905cd36df064ed2077a23eef", "committedDate": "2020-08-11T16:23:18Z", "message": "Merge branch 'master' into semantic015"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "efa61967cb53a7f6cdd1449673e9b127dd67dd5b", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/efa61967cb53a7f6cdd1449673e9b127dd67dd5b", "committedDate": "2020-08-12T21:49:31Z", "message": "Merge branch 'master' into semantic015"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "62ec784135b21e49357c0cf0f2d494af1d6082e2", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/62ec784135b21e49357c0cf0f2d494af1d6082e2", "committedDate": "2020-08-12T22:27:55Z", "message": "comment load/store"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ebd9ca0683b1b13089c0b58cb06ecd6912a75aa", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/0ebd9ca0683b1b13089c0b58cb06ecd6912a75aa", "committedDate": "2020-08-13T14:26:53Z", "message": "Merge branch 'master' into semantic015"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "22b7e6245d9ebb179fb9801bf24f2d99372d8047", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/22b7e6245d9ebb179fb9801bf24f2d99372d8047", "committedDate": "2020-08-13T14:32:51Z", "message": "Merge branch 'semantic015' into strings00"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fd23c889e6da86b4035266c0bc59ccee9d2bab10", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/fd23c889e6da86b4035266c0bc59ccee9d2bab10", "committedDate": "2020-08-13T14:33:28Z", "message": "fix varible name"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2OTg5NjMw", "url": "https://github.com/elastic/elasticsearch/pull/61099#pullrequestreview-466989630", "createdAt": "2020-08-13T17:37:04Z", "commit": {"oid": "fd23c889e6da86b4035266c0bc59ccee9d2bab10"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QxNzozNzowNFrOHAWUYw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QxNzozNzowNFrOHAWUYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDEyNzcxNQ==", "bodyText": "Copy/Paste error", "url": "https://github.com/elastic/elasticsearch/pull/61099#discussion_r470127715", "createdAt": "2020-08-13T17:37:04Z", "author": {"login": "stu-elastic"}, "path": "modules/lang-painless/src/main/java/org/elasticsearch/painless/ir/ArgumentsNode.java", "diffHunk": "@@ -36,6 +36,6 @@ public void addArgumentNode(ExpressionNode argumentNode) {\n         return argumentNodes;\n     }\n \n-    /* ---- end tree structure */\n+    /* ---- end tree structure, visitor ---- */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fd23c889e6da86b4035266c0bc59ccee9d2bab10"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2OTkyMTcy", "url": "https://github.com/elastic/elasticsearch/pull/61099#pullrequestreview-466992172", "createdAt": "2020-08-13T17:40:33Z", "commit": {"oid": "fd23c889e6da86b4035266c0bc59ccee9d2bab10"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QxNzo0MDozM1rOHAWgoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QxNzo0MDozM1rOHAWgoA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDEzMDg0OA==", "bodyText": "Can this be declared abstract?", "url": "https://github.com/elastic/elasticsearch/pull/61099#discussion_r470130848", "createdAt": "2020-08-13T17:40:33Z", "author": {"login": "stu-elastic"}, "path": "modules/lang-painless/src/main/java/org/elasticsearch/painless/ir/IRNode.java", "diffHunk": "@@ -44,10 +44,17 @@ public Location getLocation() {\n     /**\n      * Callback to visit an ir tree node.\n      */\n-    public <Input, Output> Output visit(IRTreeVisitor<Input, Output> irTreeVisitor, Input input) {\n+    public <Scope> void visit(IRTreeVisitor<Scope> irTreeVisitor, Scope scope) {\n         throw new UnsupportedOperationException(\"cannot visit ir node type [\" + getClass().getCanonicalName() + \"]\");\n     }\n \n+    /**\n+     * Visits all child ir tree nodes for this ir tree node.\n+     */\n+    public <Scope> void visitChildren(IRTreeVisitor<Scope> irTreevisitor, Scope scope) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fd23c889e6da86b4035266c0bc59ccee9d2bab10"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2OTk2MTQ2", "url": "https://github.com/elastic/elasticsearch/pull/61099#pullrequestreview-466996146", "createdAt": "2020-08-13T17:46:03Z", "commit": {"oid": "fd23c889e6da86b4035266c0bc59ccee9d2bab10"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6244df5780b1ceadecff48d0880a05b3850037ac", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/6244df5780b1ceadecff48d0880a05b3850037ac", "committedDate": "2020-08-13T17:51:44Z", "message": "response to pr comments"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3285, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}