{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMxMDY0MDM2", "number": 57806, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQxMjozNzo1MVrOEDbD7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQxMjo0Njo1NlrOEDbRTA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyMDI0NTU3OnYy", "diffSide": "RIGHT", "path": "docs/reference/query-dsl/geo-shape-query.asciidoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQxMjozNzo1MVrOGgbotQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQxMjozNzo1MVrOGgbotQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjY2MDQwNQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The following query will find the point using the {es}'s `envelope` GeoJSON \n          \n          \n            \n            The following query will find the point using {es}'s `envelope` GeoJSON", "url": "https://github.com/elastic/elasticsearch/pull/57806#discussion_r436660405", "createdAt": "2020-06-08T12:37:51Z", "author": {"login": "jrodewig"}, "path": "docs/reference/query-dsl/geo-shape-query.asciidoc", "diffHunk": "@@ -49,8 +51,9 @@ POST /example/_doc?refresh\n --------------------------------------------------\n // TESTSETUP\n \n-The following query will find the point using the Elasticsearch's\n-`envelope` GeoJSON extension:\n+\n+The following query will find the point using the {es}'s `envelope` GeoJSON ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f4612b279d055e11341395092746828f2bdacf5"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyMDI0Nzk4OnYy", "diffSide": "RIGHT", "path": "docs/reference/query-dsl/geo-shape-query.asciidoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQxMjozODozM1rOGgbqQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQxMjozODozM1rOGgbqQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjY2MDgwMw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            shapes which are useful to your application and you want to reference this using \n          \n          \n            \n            shapes and you want to reference the list using", "url": "https://github.com/elastic/elasticsearch/pull/57806#discussion_r436660803", "createdAt": "2020-06-08T12:38:33Z", "author": {"login": "jrodewig"}, "path": "docs/reference/query-dsl/geo-shape-query.asciidoc", "diffHunk": "@@ -161,19 +167,19 @@ GET /example_points/_search\n --------------------------------------------------\n // TESTRESPONSE[s/\"took\" : 17/\"took\" : $body.took/]\n \n+\n ==== Pre-Indexed Shape\n \n-The Query also supports using a shape which has already been indexed in\n-another index. This is particularly useful for when\n-you have a pre-defined list of shapes which are useful to your\n-application and you want to reference this using a logical name (for\n-example 'New Zealand') rather than having to provide their coordinates\n-each time. In this situation it is only necessary to provide:\n+The query also supports using a shape which has already been indexed in another \n+index. This is particularly useful for when you have a pre-defined list of \n+shapes which are useful to your application and you want to reference this using ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f4612b279d055e11341395092746828f2bdacf5"}, "originalPosition": 64}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyMDI0ODM2OnYy", "diffSide": "RIGHT", "path": "docs/reference/query-dsl/geo-shape-query.asciidoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQxMjozODo0MlrOGgbqig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQxMjozODo0MlrOGgbqig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjY2MDg3NA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            a logical name (for example 'New Zealand') rather than having to provide their \n          \n          \n            \n            a logical name (for example 'New Zealand') rather than having to provide", "url": "https://github.com/elastic/elasticsearch/pull/57806#discussion_r436660874", "createdAt": "2020-06-08T12:38:42Z", "author": {"login": "jrodewig"}, "path": "docs/reference/query-dsl/geo-shape-query.asciidoc", "diffHunk": "@@ -161,19 +167,19 @@ GET /example_points/_search\n --------------------------------------------------\n // TESTRESPONSE[s/\"took\" : 17/\"took\" : $body.took/]\n \n+\n ==== Pre-Indexed Shape\n \n-The Query also supports using a shape which has already been indexed in\n-another index. This is particularly useful for when\n-you have a pre-defined list of shapes which are useful to your\n-application and you want to reference this using a logical name (for\n-example 'New Zealand') rather than having to provide their coordinates\n-each time. In this situation it is only necessary to provide:\n+The query also supports using a shape which has already been indexed in another \n+index. This is particularly useful for when you have a pre-defined list of \n+shapes which are useful to your application and you want to reference this using \n+a logical name (for example 'New Zealand') rather than having to provide their ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f4612b279d055e11341395092746828f2bdacf5"}, "originalPosition": 65}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyMDI3OTYwOnYy", "diffSide": "RIGHT", "path": "docs/reference/query-dsl/geo-shape-query.asciidoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQxMjo0Njo1MlrOGgb83w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQxMjo0Njo1MlrOGgb83w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjY2NTU2Nw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            PUT /test/doc1\n          \n          \n            \n            PUT /test/_doc/1", "url": "https://github.com/elastic/elasticsearch/pull/57806#discussion_r436665567", "createdAt": "2020-06-08T12:46:52Z", "author": {"login": "jrodewig"}, "path": "docs/reference/query-dsl/geo-shape-query.asciidoc", "diffHunk": "@@ -251,15 +261,55 @@ querying multiple indexes which might have different mappings. When set to\n `false` (the default value) the query will throw an exception if the field\n is not mapped.\n \n+\n ==== Shape Types supported for Geo-Point\n \n-When searching a field of type `geo_point` the following shape types are not supported:\n+When searching a field of type `geo_point` the following shape types are not \n+supported:\n \n * `POINT`\n * `LINE`\n * `MULTIPOINT`\n * `MULTILINE`\n \n ==== Notes\n-Geo-shape queries on geo-shapes implemented with <<prefix-trees, `PrefixTrees`>> will not be executed if\n-<<query-dsl-allow-expensive-queries, `search.allow_expensive_queries`>> is set to false.\n+\n+* Geo-shape queries on geo-shapes implemented with \n+  <<prefix-trees, `PrefixTrees`>> will not be executed if \n+  <<query-dsl-allow-expensive-queries, `search.allow_expensive_queries`>> is set \n+  to false.\n+\n+\n+* When data is indexed in a `geo_shape` field as an array of shapes, the arrays \n+  are treated as one shape. For this reason, the following requests are \n+  equivalent.\n+\n+[source,console]\n+--------------------------------------------------\n+PUT /test/doc1\n+{\n+  \"location\": [\n+    {\n+      \"coordinates\": [46.25,20.14],\n+      \"type\": \"point\"\n+    },\n+    {\n+      \"coordinates\": [47.49,19.04],\n+      \"type\": \"point\"\n+    }\n+  ]\n+}\n+--------------------------------------------------\n+\n+\n+[source,console]\n+--------------------------------------------------\n+PUT /test/doc1", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f18a543f41299e45023dd1482aa041bb3ac3d7a0"}, "originalPosition": 171}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyMDI3OTgwOnYy", "diffSide": "RIGHT", "path": "docs/reference/query-dsl/geo-shape-query.asciidoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQxMjo0Njo1NlrOGgb8-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQxMjo0Njo1NlrOGgb8-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjY2NTU5Mw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            PUT /test/doc1\n          \n          \n            \n            PUT /test/_doc/1", "url": "https://github.com/elastic/elasticsearch/pull/57806#discussion_r436665593", "createdAt": "2020-06-08T12:46:56Z", "author": {"login": "jrodewig"}, "path": "docs/reference/query-dsl/geo-shape-query.asciidoc", "diffHunk": "@@ -251,15 +261,55 @@ querying multiple indexes which might have different mappings. When set to\n `false` (the default value) the query will throw an exception if the field\n is not mapped.\n \n+\n ==== Shape Types supported for Geo-Point\n \n-When searching a field of type `geo_point` the following shape types are not supported:\n+When searching a field of type `geo_point` the following shape types are not \n+supported:\n \n * `POINT`\n * `LINE`\n * `MULTIPOINT`\n * `MULTILINE`\n \n ==== Notes\n-Geo-shape queries on geo-shapes implemented with <<prefix-trees, `PrefixTrees`>> will not be executed if\n-<<query-dsl-allow-expensive-queries, `search.allow_expensive_queries`>> is set to false.\n+\n+* Geo-shape queries on geo-shapes implemented with \n+  <<prefix-trees, `PrefixTrees`>> will not be executed if \n+  <<query-dsl-allow-expensive-queries, `search.allow_expensive_queries`>> is set \n+  to false.\n+\n+\n+* When data is indexed in a `geo_shape` field as an array of shapes, the arrays \n+  are treated as one shape. For this reason, the following requests are \n+  equivalent.\n+\n+[source,console]\n+--------------------------------------------------\n+PUT /test/doc1", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f18a543f41299e45023dd1482aa041bb3ac3d7a0"}, "originalPosition": 153}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3627, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}