{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYyMTkxNDU1", "number": 60601, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxMTo1MDowNVrOEU9smw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxMTo1NTowMFrOEU90QQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwNDE3ODE5OnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/src/test/resources/rest-api-spec/api/ml.stop_datafeed.json", "isResolved": true, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxMTo1MDowNVrOG7c6JA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQwOTowOToxM1rOG8BCEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDk5MjgwNA==", "bodyText": "Is there a \"deprecation\" field or something for these parameters? Clients generate their code from these specs and we probably don't want them generating with this parameter as an option.", "url": "https://github.com/elastic/elasticsearch/pull/60601#discussion_r464992804", "createdAt": "2020-08-04T11:50:05Z", "author": {"login": "benwtrent"}, "path": "x-pack/plugin/src/test/resources/rest-api-spec/api/ml.stop_datafeed.json", "diffHunk": "@@ -22,6 +22,11 @@\n       ]\n     },\n     \"params\":{\n+      \"allow_no_match\":{\n+        \"type\":\"boolean\",\n+        \"required\":false,\n+        \"description\":\"Whether to ignore if a wildcard expression matches no datafeeds. (This includes `_all` string or when no datafeeds have been specified)\"\n+      },\n       \"allow_no_datafeeds\":{", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c3bd05bb631164fe6c48bb5baa6971567731e102"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDk5Mjk4NQ==", "bodyText": "This comment goes for ALL the changed rest specs", "url": "https://github.com/elastic/elasticsearch/pull/60601#discussion_r464992985", "createdAt": "2020-08-04T11:50:26Z", "author": {"login": "benwtrent"}, "path": "x-pack/plugin/src/test/resources/rest-api-spec/api/ml.stop_datafeed.json", "diffHunk": "@@ -22,6 +22,11 @@\n       ]\n     },\n     \"params\":{\n+      \"allow_no_match\":{\n+        \"type\":\"boolean\",\n+        \"required\":false,\n+        \"description\":\"Whether to ignore if a wildcard expression matches no datafeeds. (This includes `_all` string or when no datafeeds have been specified)\"\n+      },\n       \"allow_no_datafeeds\":{", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDk5MjgwNA=="}, "originalCommit": {"oid": "c3bd05bb631164fe6c48bb5baa6971567731e102"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTAwNzY0Mg==", "bodyText": "If we don't want the clients to include this option we should just remove it from these specs.", "url": "https://github.com/elastic/elasticsearch/pull/60601#discussion_r465007642", "createdAt": "2020-08-04T12:18:36Z", "author": {"login": "droberts195"}, "path": "x-pack/plugin/src/test/resources/rest-api-spec/api/ml.stop_datafeed.json", "diffHunk": "@@ -22,6 +22,11 @@\n       ]\n     },\n     \"params\":{\n+      \"allow_no_match\":{\n+        \"type\":\"boolean\",\n+        \"required\":false,\n+        \"description\":\"Whether to ignore if a wildcard expression matches no datafeeds. (This includes `_all` string or when no datafeeds have been specified)\"\n+      },\n       \"allow_no_datafeeds\":{", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDk5MjgwNA=="}, "originalCommit": {"oid": "c3bd05bb631164fe6c48bb5baa6971567731e102"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTAwOTc5Mg==", "bodyText": "Since most (if not all) clients are not BWC, it should probably be removed.", "url": "https://github.com/elastic/elasticsearch/pull/60601#discussion_r465009792", "createdAt": "2020-08-04T12:22:39Z", "author": {"login": "benwtrent"}, "path": "x-pack/plugin/src/test/resources/rest-api-spec/api/ml.stop_datafeed.json", "diffHunk": "@@ -22,6 +22,11 @@\n       ]\n     },\n     \"params\":{\n+      \"allow_no_match\":{\n+        \"type\":\"boolean\",\n+        \"required\":false,\n+        \"description\":\"Whether to ignore if a wildcard expression matches no datafeeds. (This includes `_all` string or when no datafeeds have been specified)\"\n+      },\n       \"allow_no_datafeeds\":{", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDk5MjgwNA=="}, "originalCommit": {"oid": "c3bd05bb631164fe6c48bb5baa6971567731e102"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTAxNTk1Mg==", "bodyText": "Done.", "url": "https://github.com/elastic/elasticsearch/pull/60601#discussion_r465015952", "createdAt": "2020-08-04T12:33:46Z", "author": {"login": "przemekwitek"}, "path": "x-pack/plugin/src/test/resources/rest-api-spec/api/ml.stop_datafeed.json", "diffHunk": "@@ -22,6 +22,11 @@\n       ]\n     },\n     \"params\":{\n+      \"allow_no_match\":{\n+        \"type\":\"boolean\",\n+        \"required\":false,\n+        \"description\":\"Whether to ignore if a wildcard expression matches no datafeeds. (This includes `_all` string or when no datafeeds have been specified)\"\n+      },\n       \"allow_no_datafeeds\":{", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDk5MjgwNA=="}, "originalCommit": {"oid": "c3bd05bb631164fe6c48bb5baa6971567731e102"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTU4NDY1OQ==", "bodyText": "I decided to keep those deprecated params as without them yml tests do not work and I do see a value in keeping the yml tests for those params.\nAdded deprecated flag so that those params stand out.", "url": "https://github.com/elastic/elasticsearch/pull/60601#discussion_r465584659", "createdAt": "2020-08-05T09:09:13Z", "author": {"login": "przemekwitek"}, "path": "x-pack/plugin/src/test/resources/rest-api-spec/api/ml.stop_datafeed.json", "diffHunk": "@@ -22,6 +22,11 @@\n       ]\n     },\n     \"params\":{\n+      \"allow_no_match\":{\n+        \"type\":\"boolean\",\n+        \"required\":false,\n+        \"description\":\"Whether to ignore if a wildcard expression matches no datafeeds. (This includes `_all` string or when no datafeeds have been specified)\"\n+      },\n       \"allow_no_datafeeds\":{", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDk5MjgwNA=="}, "originalCommit": {"oid": "c3bd05bb631164fe6c48bb5baa6971567731e102"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwNDE5Nzc3OnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/results/RestGetOverallBucketsAction.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxMTo1NTowMFrOG7dFXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxMjo0MzoyNFrOG7epjw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDk5NTY3OA==", "bodyText": "it seems to me that the default way to use these parameters via an API is through the request parameter (not in the body).\nDoes this add a deprecation warning if the user provides allow_no_jobs as a URL param?", "url": "https://github.com/elastic/elasticsearch/pull/60601#discussion_r464995678", "createdAt": "2020-08-04T11:55:00Z", "author": {"login": "benwtrent"}, "path": "x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/results/RestGetOverallBucketsAction.java", "diffHunk": "@@ -59,7 +59,10 @@ protected RestChannelConsumer prepareRequest(RestRequest restRequest, NodeClient\n             if (restRequest.hasParam(Request.END.getPreferredName())) {\n                 request.setEnd(restRequest.param(Request.END.getPreferredName()));\n             }\n-            request.setAllowNoJobs(restRequest.paramAsBoolean(Request.ALLOW_NO_JOBS.getPreferredName(), request.allowNoJobs()));\n+            request.setAllowNoMatch(\n+                restRequest.paramAsBoolean(\n+                    Request.ALLOW_NO_MATCH.getPreferredName(),\n+                    restRequest.paramAsBoolean(Request.ALLOW_NO_JOBS, request.allowNoMatch())));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c3bd05bb631164fe6c48bb5baa6971567731e102"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTAyMTMyNw==", "bodyText": "it seems to me that the default way to use these parameters via an API is through the request parameter (not in the body).\n\nThat's correct. Some of the API methods do not even support body.\n\nDoes this add a deprecation warning if the user provides allow_no_jobs as a URL param?\n\nIt did not add the warning. Now it does. Done.", "url": "https://github.com/elastic/elasticsearch/pull/60601#discussion_r465021327", "createdAt": "2020-08-04T12:43:24Z", "author": {"login": "przemekwitek"}, "path": "x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/results/RestGetOverallBucketsAction.java", "diffHunk": "@@ -59,7 +59,10 @@ protected RestChannelConsumer prepareRequest(RestRequest restRequest, NodeClient\n             if (restRequest.hasParam(Request.END.getPreferredName())) {\n                 request.setEnd(restRequest.param(Request.END.getPreferredName()));\n             }\n-            request.setAllowNoJobs(restRequest.paramAsBoolean(Request.ALLOW_NO_JOBS.getPreferredName(), request.allowNoJobs()));\n+            request.setAllowNoMatch(\n+                restRequest.paramAsBoolean(\n+                    Request.ALLOW_NO_MATCH.getPreferredName(),\n+                    restRequest.paramAsBoolean(Request.ALLOW_NO_JOBS, request.allowNoMatch())));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDk5NTY3OA=="}, "originalCommit": {"oid": "c3bd05bb631164fe6c48bb5baa6971567731e102"}, "originalPosition": 8}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2605, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}