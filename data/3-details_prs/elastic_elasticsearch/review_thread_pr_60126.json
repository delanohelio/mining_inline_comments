{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU1NzQxMDIy", "number": 60126, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNjo1NDoyNlrOESeTqQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwNzo0MTozNFrOESsPlw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3ODA2Mzc3OnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/dataframe/DataFrameAnalyticsConfigUpdate.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNjo1NDoyNlrOG3rIZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxMjoyNjoxMVrOG4KGyQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTAzMTUyNQ==", "bodyText": "A Set here seems like overkill. Just a List and ArrayList would do.\nBut, that is not that big of a deal.", "url": "https://github.com/elastic/elasticsearch/pull/60126#discussion_r461031525", "createdAt": "2020-07-27T16:54:26Z", "author": {"login": "benwtrent"}, "path": "x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/dataframe/DataFrameAnalyticsConfigUpdate.java", "diffHunk": "@@ -152,6 +154,23 @@ public boolean requiresRestart(DataFrameAnalyticsConfig source) {\n             || (getMaxNumThreads() != null && getMaxNumThreads().equals(source.getMaxNumThreads()) == false);\n     }\n \n+    public Set<String> getUpdatedFields() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53558ed6a8084ad861fb905f6b85f04239e8ce26"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTUzOTAxNw==", "bodyText": "I'm using a TreeSet and thus I like it because we get the fields sorted no matter which way they are added in the future.", "url": "https://github.com/elastic/elasticsearch/pull/60126#discussion_r461539017", "createdAt": "2020-07-28T12:26:11Z", "author": {"login": "dimitris-athanasiou"}, "path": "x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/dataframe/DataFrameAnalyticsConfigUpdate.java", "diffHunk": "@@ -152,6 +154,23 @@ public boolean requiresRestart(DataFrameAnalyticsConfig source) {\n             || (getMaxNumThreads() != null && getMaxNumThreads().equals(source.getMaxNumThreads()) == false);\n     }\n \n+    public Set<String> getUpdatedFields() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTAzMTUyNQ=="}, "originalCommit": {"oid": "53558ed6a8084ad861fb905f6b85f04239e8ce26"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4MDM0NzExOnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/core/src/test/java/org/elasticsearch/xpack/core/ml/dataframe/DataFrameAnalyticsConfigUpdateTests.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwNzo0MTozNFrOG4Afpw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxMjoyNjozOFrOG4KHnw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTM4MTU0Mw==", "bodyText": "If getUpdatedFields returns Set then the matcher should be containsInAnyOrder so that it works regardless of the exact Set implementation.", "url": "https://github.com/elastic/elasticsearch/pull/60126#discussion_r461381543", "createdAt": "2020-07-28T07:41:34Z", "author": {"login": "przemekwitek"}, "path": "x-pack/plugin/core/src/test/java/org/elasticsearch/xpack/core/ml/dataframe/DataFrameAnalyticsConfigUpdateTests.java", "diffHunk": "@@ -197,6 +198,49 @@ public void testCtor_GivenMaxNumberThreadsIsNegative() {\n         assertThat(e.getMessage(), equalTo(\"[max_num_threads] must be a positive integer\"));\n     }\n \n+    public void testGetUpdatedFields_GivenAll() {\n+        DataFrameAnalyticsConfigUpdate update = new DataFrameAnalyticsConfigUpdate.Builder(\"test_job\")\n+            .setDescription(\"new description\")\n+            .setModelMemoryLimit(new ByteSizeValue(1024))\n+            .setAllowLazyStart(true)\n+            .setMaxNumThreads(8)\n+            .build();\n+\n+        assertThat(update.getUpdatedFields(), contains(\"allow_lazy_start\", \"description\", \"max_num_threads\", \"model_memory_limit\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53558ed6a8084ad861fb905f6b85f04239e8ce26"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTUzOTIzMQ==", "bodyText": "We want the test to fail if the set isn't sorted.", "url": "https://github.com/elastic/elasticsearch/pull/60126#discussion_r461539231", "createdAt": "2020-07-28T12:26:38Z", "author": {"login": "dimitris-athanasiou"}, "path": "x-pack/plugin/core/src/test/java/org/elasticsearch/xpack/core/ml/dataframe/DataFrameAnalyticsConfigUpdateTests.java", "diffHunk": "@@ -197,6 +198,49 @@ public void testCtor_GivenMaxNumberThreadsIsNegative() {\n         assertThat(e.getMessage(), equalTo(\"[max_num_threads] must be a positive integer\"));\n     }\n \n+    public void testGetUpdatedFields_GivenAll() {\n+        DataFrameAnalyticsConfigUpdate update = new DataFrameAnalyticsConfigUpdate.Builder(\"test_job\")\n+            .setDescription(\"new description\")\n+            .setModelMemoryLimit(new ByteSizeValue(1024))\n+            .setAllowLazyStart(true)\n+            .setMaxNumThreads(8)\n+            .build();\n+\n+        assertThat(update.getUpdatedFields(), contains(\"allow_lazy_start\", \"description\", \"max_num_threads\", \"model_memory_limit\"));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTM4MTU0Mw=="}, "originalCommit": {"oid": "53558ed6a8084ad861fb905f6b85f04239e8ce26"}, "originalPosition": 20}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2151, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}