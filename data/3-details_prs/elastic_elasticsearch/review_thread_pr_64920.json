{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE5MTg3Mzc5", "number": 64920, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxNTozMTozMFrOE3wSXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxNTozMTozMFrOE3wSXg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2ODk4MjcwOnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/action/TransportOpenJobAction.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxNTozMTozMFrOHxSKQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxNTozMTozMFrOHxSKQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTQzOTgxMA==", "bodyText": "Can you change the message to include reason only if it is known please.\n\"Unexpected job state [XX] with reason [UNKNOWN]... \" is a message that can only frustrate", "url": "https://github.com/elastic/elasticsearch/pull/64920#discussion_r521439810", "createdAt": "2020-11-11T15:31:30Z", "author": {"login": "davidkyle"}, "path": "x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/action/TransportOpenJobAction.java", "diffHunk": "@@ -309,13 +317,20 @@ public boolean test(PersistentTasksCustomMetadata.PersistentTask<?> persistentTa\n                     node = persistentTask.getExecutorNode();\n                     return true;\n                 case CLOSING:\n-                    exception = ExceptionsHelper.conflictStatusException(\"The job has been \" + JobState.CLOSED + \" while waiting to be \"\n-                            + JobState.OPENED);\n+                    exception = ExceptionsHelper.conflictStatusException(\n+                        \"The job has been {} while waiting to be {}\",\n+                        JobState.CLOSED,\n+                        JobState.OPENED);\n                     return true;\n                 case FAILED:\n                 default:\n-                    exception = ExceptionsHelper.serverError(\"Unexpected job state [\" + jobState\n-                            + \"] while waiting for job to be \" + JobState.OPENED);\n+                    // Default http status is SERVER ERROR\n+                    exception = ExceptionsHelper.serverError(\n+                        \"Unexpected job state [{}] with reason [{}] while waiting for job to be {}\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ecf36636c1ce54936687311eadff4210071e2422"}, "originalPosition": 68}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3089, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}