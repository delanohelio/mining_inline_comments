{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkwMzAxMzU2", "number": 53712, "title": "Increase step between checks for cancellation", "bodyText": "The introduction of the ExitableDirectoryReader showed increase of\nlatencies for range queries using pointvalues.\nCheck for cancellation every 1024 docs instead of every 15 to lower\nthe impact of the check in query's performance.\nFollows: #52822\nFixes: #53496", "createdAt": "2020-03-18T08:51:15Z", "url": "https://github.com/elastic/elasticsearch/pull/53712", "merged": true, "mergeCommit": {"oid": "6b5fc35e4458e60a7ca5822584ec6a60562f2c01"}, "closed": true, "closedAt": "2020-03-18T13:52:04Z", "author": {"login": "matriv"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcOzP21AH2gAyMzkwMzAxMzU2OmExODM5ZDA4ZTYyNzNjYmYxMmZhODZmNDQwZDVkMDc4ODA0NzU2YmE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcO08vlAH2gAyMzkwMzAxMzU2OjBlYmYyZjE2NmRhOWQ1YThhZWUyYzczZmU2OTM5YTdjNjc5ZWNjMGI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a1839d08e6273cbf12fa86f440d5d078804756ba", "author": {"user": {"login": "matriv", "name": "Marios Trivyzas"}}, "url": "https://github.com/elastic/elasticsearch/commit/a1839d08e6273cbf12fa86f440d5d078804756ba", "committedDate": "2020-03-18T08:43:30Z", "message": "Increase step between checks for cancellation\n\nCheck for cancellation every 1024 docs instead of every 15 to lower\nthe impact of the check in query's performance.\n\nFixes: #53496"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2NzI5Mzg3", "url": "https://github.com/elastic/elasticsearch/pull/53712#pullrequestreview-376729387", "createdAt": "2020-03-18T10:19:58Z", "commit": {"oid": "a1839d08e6273cbf12fa86f440d5d078804756ba"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxMDoxOTo1OFrOF3-euQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxMDoxOTo1OFrOF3-euQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDIzOTY3Mw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    private static final int MAX_CALLS_BEFORE_QUERY_TIMEOUT_CHECK = 1 << 10; // 1024\n          \n          \n            \n                    private static final int MAX_CALLS_BEFORE_QUERY_TIMEOUT_CHECK = (1 << 10) - 1; // 1023", "url": "https://github.com/elastic/elasticsearch/pull/53712#discussion_r394239673", "createdAt": "2020-03-18T10:19:58Z", "author": {"login": "jimczi"}, "path": "server/src/main/java/org/elasticsearch/search/internal/ExitableDirectoryReader.java", "diffHunk": "@@ -245,7 +245,7 @@ public int getDocCount() {\n \n     private static class ExitableIntersectVisitor implements PointValues.IntersectVisitor {\n \n-        private static final int MAX_CALLS_BEFORE_QUERY_TIMEOUT_CHECK = (1 << 4) - 1; // 15\n+        private static final int MAX_CALLS_BEFORE_QUERY_TIMEOUT_CHECK = 1 << 10; // 1024", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a1839d08e6273cbf12fa86f440d5d078804756ba"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ebf2f166da9d5a8aee2c73fe6939a7c679ecc0b", "author": {"user": {"login": "matriv", "name": "Marios Trivyzas"}}, "url": "https://github.com/elastic/elasticsearch/commit/0ebf2f166da9d5a8aee2c73fe6939a7c679ecc0b", "committedDate": "2020-03-18T10:42:26Z", "message": "address comment"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1992, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}