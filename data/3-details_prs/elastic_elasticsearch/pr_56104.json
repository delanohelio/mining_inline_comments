{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEyODYwNzI1", "number": 56104, "title": "Add `visibility` the to rest-spec-api", "bodyText": "This documents API's intended exposure to the outside world under a new key visibility:\n\nprivate, API is not exposed on clients\nfeature_flag API is exposed on clients but clients can emit documentation on the fact its not available OOTB.\npublic, the API is publicly available in distributions.\n\nIf an API has visibility: feature_flag it also needs to document the feature flag its behind under feature_flag: \"es.___\". ClientYamlSuiteRestApiParser.java is updated to reflect this requirement.\nvisibility does not replace stability as that only documents the state of development for the API. An experimental API can be public and stable API's can be behind a feature_flag. There are currently no restrictions on this.\nRelates to #54664 (comment) where new API's have come in that are fully intended to be private. As well as several API's coming in that are behind feature_flags.\nWhen stability was introduced in #38413 (comment) we decided to hold of on private. I feel the API has changed significantly since to reconsider this decision.", "createdAt": "2020-05-04T10:16:17Z", "url": "https://github.com/elastic/elasticsearch/pull/56104", "merged": true, "mergeCommit": {"oid": "e31e3dea32b134f63f3bf7e21d47df853fe75884"}, "closed": true, "closedAt": "2020-12-14T11:23:28Z", "author": {"login": "Mpdreamz"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABceDaIWAFqTQwNTIyMDMzMA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdmDNwhABqjQxMDg0NjE3MzU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1MjIwMzMw", "url": "https://github.com/elastic/elasticsearch/pull/56104#pullrequestreview-405220330", "createdAt": "2020-05-04T18:01:45Z", "commit": {"oid": "49cb189baa519d83b6b01133c82d70054fc53120"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxODowMTo0NlrOGQLyCw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxODowMTo0NlrOGQLyCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTYyMzQzNQ==", "bodyText": "These APIs (the index template V2 stuff) is no longer behind a feature flag, see: #56123", "url": "https://github.com/elastic/elasticsearch/pull/56104#discussion_r419623435", "createdAt": "2020-05-04T18:01:46Z", "author": {"login": "dakrone"}, "path": "rest-api-spec/src/main/resources/rest-api-spec/api/indices.put_index_template.json", "diffHunk": "@@ -5,6 +5,8 @@\n       \"description\":\"Creates or updates an index template.\"\n     },\n     \"stability\":\"stable\",\n+    \"visibility\":\"feature_flag\",\n+    \"feature_flag\":\"es.itv2_feature_enabled\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49cb189baa519d83b6b01133c82d70054fc53120"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "49cb189baa519d83b6b01133c82d70054fc53120", "author": {"user": {"login": "Mpdreamz", "name": "Martijn Laarman"}}, "url": "https://github.com/elastic/elasticsearch/commit/49cb189baa519d83b6b01133c82d70054fc53120", "committedDate": "2020-05-04T10:06:34Z", "message": "add `visibility` to rest-spec-api\n\nThis documents API intended exposure to the outside world.\n\n* `private`, API is not exposed on clients\n* `feature_flag` API is exposed on clients but clients can emit\ndocumentation on the fact its not available OOTB.\n* `public`, the API is publicly available in distributions.\n\n`visibility` does not replace `stability` as that only documents the\nstate of development for the API. An `experimental` API can be `public`\nand `stable` API's can be behind a `feature_flag`. There are currently\nno restrictions on this."}, "afterCommit": {"oid": "8d09e4247874875396913acf56da55a76224f002", "author": {"user": {"login": "Mpdreamz", "name": "Martijn Laarman"}}, "url": "https://github.com/elastic/elasticsearch/commit/8d09e4247874875396913acf56da55a76224f002", "committedDate": "2020-08-05T13:07:22Z", "message": "add `visibility` to rest-spec-api\n\nThis documents API intended exposure to the outside world.\n\n* `private`, API is not exposed on clients\n* `feature_flag` API is exposed on clients but clients can emit\ndocumentation on the fact its not available OOTB.\n* `public`, the API is publicly available in distributions.\n\n`visibility` does not replace `stability` as that only documents the\nstate of development for the API. An `experimental` API can be `public`\nand `stable` API's can be behind a `feature_flag`. There are currently\nno restrictions on this."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c652157bbe1061916b3677617439ae43acae1d71", "author": {"user": {"login": "Mpdreamz", "name": "Martijn Laarman"}}, "url": "https://github.com/elastic/elasticsearch/commit/c652157bbe1061916b3677617439ae43acae1d71", "committedDate": "2020-08-05T13:39:19Z", "message": "add visibility to new API's'"}, "afterCommit": {"oid": "fac3f1d886a7225585628c1d69f8d27339a7d78f", "author": {"user": {"login": "Mpdreamz", "name": "Martijn Laarman"}}, "url": "https://github.com/elastic/elasticsearch/commit/fac3f1d886a7225585628c1d69f8d27339a7d78f", "committedDate": "2020-12-07T13:29:53Z", "message": "update spec"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4bdb22a2da9f02050bf93bb9c8cc70977f055eaa", "author": {"user": {"login": "Mpdreamz", "name": "Martijn Laarman"}}, "url": "https://github.com/elastic/elasticsearch/commit/4bdb22a2da9f02050bf93bb9c8cc70977f055eaa", "committedDate": "2020-12-07T18:05:43Z", "message": "missed a test specification json not declaring visibility"}, "afterCommit": {"oid": "dd3e52e23f0a8f56af874c522c3adabb6d424612", "author": {"user": {"login": "Mpdreamz", "name": "Martijn Laarman"}}, "url": "https://github.com/elastic/elasticsearch/commit/dd3e52e23f0a8f56af874c522c3adabb6d424612", "committedDate": "2020-12-08T12:33:45Z", "message": "missed a test specification json not declaring visibility"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dd3e52e23f0a8f56af874c522c3adabb6d424612", "author": {"user": {"login": "Mpdreamz", "name": "Martijn Laarman"}}, "url": "https://github.com/elastic/elasticsearch/commit/dd3e52e23f0a8f56af874c522c3adabb6d424612", "committedDate": "2020-12-08T12:33:45Z", "message": "missed a test specification json not declaring visibility"}, "afterCommit": {"oid": "b441fec151991cd90a8840a4de00f168f115afb9", "author": {"user": {"login": "Mpdreamz", "name": "Martijn Laarman"}}, "url": "https://github.com/elastic/elasticsearch/commit/b441fec151991cd90a8840a4de00f168f115afb9", "committedDate": "2020-12-10T13:29:55Z", "message": "update indice.promote_data_stream"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ5MzE5Njc1", "url": "https://github.com/elastic/elasticsearch/pull/56104#pullrequestreview-549319675", "createdAt": "2020-12-10T15:33:51Z", "commit": {"oid": "b441fec151991cd90a8840a4de00f168f115afb9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQxNTozMzo1MVrOIDPN7w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQxNTozMzo1MVrOIDPN7w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDI2NTk2Nw==", "bodyText": "Nitpick:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  \"description\":\"The update transform definition\",\n          \n          \n            \n                  \"description\": \"The update transform definition\",", "url": "https://github.com/elastic/elasticsearch/pull/56104#discussion_r540265967", "createdAt": "2020-12-10T15:33:51Z", "author": {"login": "picandocodigo"}, "path": "x-pack/plugin/src/test/resources/rest-api-spec/api/data_frame_transform_deprecated.update_transform.json", "diffHunk": "@@ -38,7 +39,7 @@\n       }\n     },\n     \"body\":{\n-      \"description\" :\"The update transform definition\",\n+      \"description\":\"The update transform definition\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b441fec151991cd90a8840a4de00f168f115afb9"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ5MzUzNDIw", "url": "https://github.com/elastic/elasticsearch/pull/56104#pullrequestreview-549353420", "createdAt": "2020-12-10T16:06:08Z", "commit": {"oid": "996e842eb4cf477c69dd37e4937d62563593993e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ5NDQ5MzQz", "url": "https://github.com/elastic/elasticsearch/pull/56104#pullrequestreview-549449343", "createdAt": "2020-12-10T17:42:49Z", "commit": {"oid": "996e842eb4cf477c69dd37e4937d62563593993e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d273c3186d022408d161c3740a6b4919eb732e3d", "author": {"user": {"login": "Mpdreamz", "name": "Martijn Laarman"}}, "url": "https://github.com/elastic/elasticsearch/commit/d273c3186d022408d161c3740a6b4919eb732e3d", "committedDate": "2020-12-14T10:30:01Z", "message": "add `visibility` to rest-spec-api\n\nThis documents API intended exposure to the outside world.\n\n* `private`, API is not exposed on clients\n* `feature_flag` API is exposed on clients but clients can emit\ndocumentation on the fact its not available OOTB.\n* `public`, the API is publicly available in distributions.\n\n`visibility` does not replace `stability` as that only documents the\nstate of development for the API. An `experimental` API can be `public`\nand `stable` API's can be behind a `feature_flag`. There are currently\nno restrictions on this."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "01102b230ac8e543745558e796d63e55b984e40e", "author": {"user": {"login": "Mpdreamz", "name": "Martijn Laarman"}}, "url": "https://github.com/elastic/elasticsearch/commit/01102b230ac8e543745558e796d63e55b984e40e", "committedDate": "2020-12-14T10:30:02Z", "message": "add visibility to new API's'"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e204acb5f54d65bde73076c882b8c6a059be2f44", "author": {"user": {"login": "Mpdreamz", "name": "Martijn Laarman"}}, "url": "https://github.com/elastic/elasticsearch/commit/e204acb5f54d65bde73076c882b8c6a059be2f44", "committedDate": "2020-12-14T10:30:44Z", "message": "update xpack specs visibilty"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cae0f4332a9bd7c20421f5634b46858142948c58", "author": {"user": {"login": "Mpdreamz", "name": "Martijn Laarman"}}, "url": "https://github.com/elastic/elasticsearch/commit/cae0f4332a9bd7c20421f5634b46858142948c58", "committedDate": "2020-12-14T10:30:44Z", "message": "update spec"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7efe23b09045a7423375a4e321b3a802acc2ced9", "author": {"user": {"login": "Mpdreamz", "name": "Martijn Laarman"}}, "url": "https://github.com/elastic/elasticsearch/commit/7efe23b09045a7423375a4e321b3a802acc2ced9", "committedDate": "2020-12-14T10:30:44Z", "message": "fix checkstyle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71997eb5d17d19a4c1934efebacefb3358703a34", "author": {"user": {"login": "Mpdreamz", "name": "Martijn Laarman"}}, "url": "https://github.com/elastic/elasticsearch/commit/71997eb5d17d19a4c1934efebacefb3358703a34", "committedDate": "2020-12-14T10:30:45Z", "message": "schema now also validates feature_flag property is set, before only the parser validated this"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e36c0bd40c524dbd0afd6dc3b4050d7282472a6a", "author": {"user": {"login": "Mpdreamz", "name": "Martijn Laarman"}}, "url": "https://github.com/elastic/elasticsearch/commit/e36c0bd40c524dbd0afd6dc3b4050d7282472a6a", "committedDate": "2020-12-14T10:30:45Z", "message": "missed a test specification json not declaring visibility"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c8ab07b0e5156b65d9274dfc9b1d31d552981f7", "author": {"user": {"login": "Mpdreamz", "name": "Martijn Laarman"}}, "url": "https://github.com/elastic/elasticsearch/commit/8c8ab07b0e5156b65d9274dfc9b1d31d552981f7", "committedDate": "2020-12-14T10:30:45Z", "message": "update indice.promote_data_stream"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "996e842eb4cf477c69dd37e4937d62563593993e", "author": {"user": {"login": "Mpdreamz", "name": "Martijn Laarman"}}, "url": "https://github.com/elastic/elasticsearch/commit/996e842eb4cf477c69dd37e4937d62563593993e", "committedDate": "2020-12-10T16:04:24Z", "message": "Update x-pack/plugin/src/test/resources/rest-api-spec/api/data_frame_transform_deprecated.update_transform.json\n\nCo-authored-by: Fernando Briano <fernando@picandocodigo.net>"}, "afterCommit": {"oid": "8c8ab07b0e5156b65d9274dfc9b1d31d552981f7", "author": {"user": {"login": "Mpdreamz", "name": "Martijn Laarman"}}, "url": "https://github.com/elastic/elasticsearch/commit/8c8ab07b0e5156b65d9274dfc9b1d31d552981f7", "committedDate": "2020-12-14T10:30:45Z", "message": "update indice.promote_data_stream"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 213, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}