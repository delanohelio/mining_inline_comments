{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTExOTY0Mjk2", "number": 64324, "title": "Serialize can contain data with roles", "bodyText": "This commit internalizes whether or not a role represents the ability to contain data. In the future, this will let us remove the compatibility role notion.", "createdAt": "2020-10-29T02:19:17Z", "url": "https://github.com/elastic/elasticsearch/pull/64324", "merged": true, "mergeCommit": {"oid": "30559952cd26731ca92baf7fd27ef06f51133f58"}, "closed": true, "closedAt": "2020-10-30T00:40:31Z", "author": {"login": "jasontedor"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdXImufAH2gAyNTExOTY0Mjk2OjRjYjVlZTRmNGYxZTYzZTgzZDViYWEwNGY4MGQ3NDQwODMyODU5Mzg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdXVuFPAFqTUxOTkxNTAyNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4cb5ee4f4f1e63e83d5baa04f80d744083285938", "author": {"user": {"login": "jasontedor", "name": "Jason Tedor"}}, "url": "https://github.com/elastic/elasticsearch/commit/4cb5ee4f4f1e63e83d5baa04f80d744083285938", "committedDate": "2020-10-29T02:19:02Z", "message": "Serialize can contain data with roles\n\nThis commit internalizes whether or not a role represents the ability to\ncontain data. In the future, this will let us remove the compatibility\nrole notion."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "27c835834d50354317e8772750c24c7d2aa9c920", "author": {"user": {"login": "jasontedor", "name": "Jason Tedor"}}, "url": "https://github.com/elastic/elasticsearch/commit/27c835834d50354317e8772750c24c7d2aa9c920", "committedDate": "2020-10-29T02:20:35Z", "message": "Fix equals and hash code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a76b204b70d4fabd6573919e46d9f109df598b9c", "author": {"user": {"login": "jasontedor", "name": "Jason Tedor"}}, "url": "https://github.com/elastic/elasticsearch/commit/a76b204b70d4fabd6573919e46d9f109df598b9c", "committedDate": "2020-10-29T02:21:24Z", "message": "Fix toString"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "52cec92ebb3c5b59ad38595008d364c96b6079a1", "author": {"user": {"login": "jasontedor", "name": "Jason Tedor"}}, "url": "https://github.com/elastic/elasticsearch/commit/52cec92ebb3c5b59ad38595008d364c96b6079a1", "committedDate": "2020-10-29T03:43:35Z", "message": "Fix tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5OTE1MDI2", "url": "https://github.com/elastic/elasticsearch/pull/64324#pullrequestreview-519915026", "createdAt": "2020-10-29T17:35:07Z", "commit": {"oid": "52cec92ebb3c5b59ad38595008d364c96b6079a1"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxNzozNTowN1rOHqnJIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxNzozNTowN1rOHqnJIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQ0MzU1Mg==", "bodyText": "Once this is backported, do you plan to change this to not use getCompatibilityRole and remove that straightaway? (in 7.10.0 I mean)", "url": "https://github.com/elastic/elasticsearch/pull/64324#discussion_r514443552", "createdAt": "2020-10-29T17:35:07Z", "author": {"login": "dakrone"}, "path": "server/src/main/java/org/elasticsearch/cluster/node/DiscoveryNode.java", "diffHunk": "@@ -288,6 +294,9 @@ public void writeTo(StreamOutput out) throws IOException {\n             final DiscoveryNodeRole compatibleRole = role.getCompatibilityRole(out.getVersion());\n             out.writeString(compatibleRole.roleName());\n             out.writeString(compatibleRole.roleNameAbbreviation());\n+            if (out.getVersion().onOrAfter(Version.V_8_0_0)) {\n+                out.writeBoolean(compatibleRole.canContainData());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "52cec92ebb3c5b59ad38595008d364c96b6079a1"}, "originalPosition": 22}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 953, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}