{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkwMzEwNzkz", "number": 62706, "title": "Extract capture config from grok patterns up front", "bodyText": "This extracts the configuration for extracting values from a groked\nstring when building the grok expression to do two things:\n\nCreate a method exposing that configuration on Grok itself which\nwill be used grok grok flavored runtime fields.\nMarginally speed up extracting grok values by skipping a little\nstring manipulation.", "createdAt": "2020-09-21T13:47:03Z", "url": "https://github.com/elastic/elasticsearch/pull/62706", "merged": true, "mergeCommit": {"oid": "d4e014c4c2d45c280a24483f7fe5875174fddd47"}, "closed": true, "closedAt": "2020-09-22T17:55:44Z", "author": {"login": "nik9000"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdLDoIUgH2gAyNDkwMzEwNzkzOmQxM2EwMzIxZjM2ZjBjZjBhOTQ4NjM5MDAzZDRmODM3NGZiNWQwYWY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdLbKekgH2gAyNDkwMzEwNzkzOjkzYmQwMGJiNzk4OWM0MzMwODU3N2NkOTYzMTFmMmZlYjZiMTY5MDA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d13a0321f36f0cf0a948639003d4f8374fb5d0af", "author": {"user": {"login": "nik9000", "name": "Nik Everett"}}, "url": "https://github.com/elastic/elasticsearch/commit/d13a0321f36f0cf0a948639003d4f8374fb5d0af", "committedDate": "2020-09-21T13:43:57Z", "message": "Extract capture config from grok patterns up front\n\nThis extracts the configuration for extracting values from a groked\nstring when building the grok expression to do two things:\n1. Create a method exposing that configuration on `Grok` itself which\n   will be used grok `grok` flavored runtime fields.\n2. Marginally speed up extracting grok values by skipping a little\n   string manipulation."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyNjE4NTE1", "url": "https://github.com/elastic/elasticsearch/pull/62706#pullrequestreview-492618515", "createdAt": "2020-09-21T13:47:24Z", "commit": {"oid": "d13a0321f36f0cf0a948639003d4f8374fb5d0af"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxMzo0NzoyNFrOHVQ2lA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxMzo0NzoyNFrOHVQ2lA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjA1ODI2MA==", "bodyText": "This didn't need to be public and it confused me that it was.", "url": "https://github.com/elastic/elasticsearch/pull/62706#discussion_r492058260", "createdAt": "2020-09-21T13:47:24Z", "author": {"login": "nik9000"}, "path": "libs/grok/src/main/java/org/elasticsearch/grok/Grok.java", "diffHunk": "@@ -151,7 +158,7 @@ private void forbidCircularReferences(String patternName, List<String> path, Str\n         }\n     }\n \n-    public String groupMatch(String name, Region region, String pattern) {\n+    private String groupMatch(String name, Region region, String pattern) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d13a0321f36f0cf0a948639003d4f8374fb5d0af"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyNjE5MDY1", "url": "https://github.com/elastic/elasticsearch/pull/62706#pullrequestreview-492619065", "createdAt": "2020-09-21T13:47:57Z", "commit": {"oid": "d13a0321f36f0cf0a948639003d4f8374fb5d0af"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxMzo0Nzo1N1rOHVQ4OA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxMzo0Nzo1N1rOHVQ4OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjA1ODY4MA==", "bodyText": "This feels private, but it is used by tests. I tightened the visibility while I was there, but not didn't refactor a bunch of tests.", "url": "https://github.com/elastic/elasticsearch/pull/62706#discussion_r492058680", "createdAt": "2020-09-21T13:47:57Z", "author": {"login": "nik9000"}, "path": "libs/grok/src/main/java/org/elasticsearch/grok/Grok.java", "diffHunk": "@@ -167,7 +174,7 @@ public String groupMatch(String name, Region region, String pattern) {\n      *\n      * @return named regex expression\n      */\n-    public String toRegex(String grokPattern) {\n+    protected String toRegex(String grokPattern) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d13a0321f36f0cf0a948639003d4f8374fb5d0af"}, "originalPosition": 35}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyNjE5OTQ5", "url": "https://github.com/elastic/elasticsearch/pull/62706#pullrequestreview-492619949", "createdAt": "2020-09-21T13:48:50Z", "commit": {"oid": "d13a0321f36f0cf0a948639003d4f8374fb5d0af"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxMzo0ODo1MFrOHVQ66Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxMzo0ODo1MFrOHVQ66Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjA1OTM2OQ==", "bodyText": "Moved this into the two new classes.", "url": "https://github.com/elastic/elasticsearch/pull/62706#discussion_r492059369", "createdAt": "2020-09-21T13:48:50Z", "author": {"login": "nik9000"}, "path": "libs/grok/src/main/java/org/elasticsearch/grok/GrokMatchGroup.java", "diffHunk": "@@ -1,68 +0,0 @@\n-/*\n- * Licensed to Elasticsearch under one or more contributor\n- * license agreements. See the NOTICE file distributed with\n- * this work for additional information regarding copyright\n- * ownership. Elasticsearch licenses this file to you under\n- * the Apache License, Version 2.0 (the \"License\"); you may\n- * not use this file except in compliance with the License.\n- * You may obtain a copy of the License at\n- *\n- *    http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing,\n- * software distributed under the License is distributed on an\n- * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n- * KIND, either express or implied.  See the License for the\n- * specific language governing permissions and limitations\n- * under the License.\n- */\n-\n-package org.elasticsearch.grok;\n-\n-final class GrokMatchGroup {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d13a0321f36f0cf0a948639003d4f8374fb5d0af"}, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b72c03994111657c1725994301d9eeb90d38fe1a", "author": {"user": {"login": "nik9000", "name": "Nik Everett"}}, "url": "https://github.com/elastic/elasticsearch/commit/b72c03994111657c1725994301d9eeb90d38fe1a", "committedDate": "2020-09-22T13:42:25Z", "message": "Merge branch 'master' into grok_meta"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzNDc3OTc2", "url": "https://github.com/elastic/elasticsearch/pull/62706#pullrequestreview-493477976", "createdAt": "2020-09-22T13:47:43Z", "commit": {"oid": "b72c03994111657c1725994301d9eeb90d38fe1a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzNDg0NzU2", "url": "https://github.com/elastic/elasticsearch/pull/62706#pullrequestreview-493484756", "createdAt": "2020-09-22T13:54:10Z", "commit": {"oid": "b72c03994111657c1725994301d9eeb90d38fe1a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "93bd00bb7989c43308577cd96311f2feb6b16900", "author": {"user": {"login": "nik9000", "name": "Nik Everett"}}, "url": "https://github.com/elastic/elasticsearch/commit/93bd00bb7989c43308577cd96311f2feb6b16900", "committedDate": "2020-09-22T17:09:17Z", "message": "Merge branch 'master' into grok_meta"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4668, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}