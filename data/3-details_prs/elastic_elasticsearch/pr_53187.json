{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg0NDgyODc4", "number": 53187, "title": "EQL: Improve query folder test suite", "bodyText": "Related to #52775\n@costin could you check and let me know if that's what you were expecting to be done for this issue.\nI didn't add tests for the queries that are not supported yet, cause the errors are already tested in the verifier tests.", "createdAt": "2020-03-05T20:24:42Z", "url": "https://github.com/elastic/elasticsearch/pull/53187", "merged": true, "mergeCommit": {"oid": "2090b28653c3d7af739b39c6ada79712fe583894"}, "closed": true, "closedAt": "2020-03-12T12:39:52Z", "author": {"login": "aleksmaus"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcKxcmrgH2gAyMzg0NDgyODc4OjMzMmRkZmI2Nzg0ZWI5Y2JkYTgwZmRiOGI5ZDA2YTEyZjBiNzJmMDg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcMuPQMAFqTM3MzE0NTY0Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "332ddfb6784eb9cbda80fdb8b9d06a12f0b72f08", "author": {"user": {"login": "aleksmaus", "name": "Aleksandr Maus"}}, "url": "https://github.com/elastic/elasticsearch/commit/332ddfb6784eb9cbda80fdb8b9d06a12f0b72f08", "committedDate": "2020-03-05T20:21:55Z", "message": "EQL: Improve query folder test suite"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcyMDA0NzQz", "url": "https://github.com/elastic/elasticsearch/pull/53187#pullrequestreview-372004743", "createdAt": "2020-03-10T14:29:27Z", "commit": {"oid": "332ddfb6784eb9cbda80fdb8b9d06a12f0b72f08"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "110c51f85e9f99926cdce06d69b617b2ed839ed5", "author": {"user": {"login": "aleksmaus", "name": "Aleksandr Maus"}}, "url": "https://github.com/elastic/elasticsearch/commit/110c51f85e9f99926cdce06d69b617b2ed839ed5", "committedDate": "2020-03-11T02:22:33Z", "message": "Refactor tests, change to substring match asserts per today's conversation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f291acdfe2f00a67376852ac19bacc0ea054f23", "author": {"user": {"login": "aleksmaus", "name": "Aleksandr Maus"}}, "url": "https://github.com/elastic/elasticsearch/commit/9f291acdfe2f00a67376852ac19bacc0ea054f23", "committedDate": "2020-03-11T02:26:49Z", "message": "Remove a couple of extra empty lines"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7719352c0ca1eec0c680e670dd5d121017f53ae4", "author": {"user": {"login": "aleksmaus", "name": "Aleksandr Maus"}}, "url": "https://github.com/elastic/elasticsearch/commit/7719352c0ca1eec0c680e670dd5d121017f53ae4", "committedDate": "2020-03-11T02:25:21Z", "message": "Remove a couple of extra empty lines"}, "afterCommit": {"oid": "9f291acdfe2f00a67376852ac19bacc0ea054f23", "author": {"user": {"login": "aleksmaus", "name": "Aleksandr Maus"}}, "url": "https://github.com/elastic/elasticsearch/commit/9f291acdfe2f00a67376852ac19bacc0ea054f23", "committedDate": "2020-03-11T02:26:49Z", "message": "Remove a couple of extra empty lines"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcyNjcwNDg1", "url": "https://github.com/elastic/elasticsearch/pull/53187#pullrequestreview-372670485", "createdAt": "2020-03-11T11:20:32Z", "commit": {"oid": "9f291acdfe2f00a67376852ac19bacc0ea054f23"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c881465e33ed6b86c45b5724d37db5d9276b950", "author": {"user": {"login": "aleksmaus", "name": "Aleksandr Maus"}}, "url": "https://github.com/elastic/elasticsearch/commit/4c881465e33ed6b86c45b5724d37db5d9276b950", "committedDate": "2020-03-11T11:35:52Z", "message": "Merge branch 'master' into issue/52775_query_folder_tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "15bf74820cb1bb39541935c68d9661066812d467", "author": {"user": {"login": "aleksmaus", "name": "Aleksandr Maus"}}, "url": "https://github.com/elastic/elasticsearch/commit/15bf74820cb1bb39541935c68d9661066812d467", "committedDate": "2020-03-11T16:00:10Z", "message": "Update QueryFolderOkTests for the latest master changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7c5c6af7bd130565bf2b51e9c231792f2b436288", "author": {"user": {"login": "aleksmaus", "name": "Aleksandr Maus"}}, "url": "https://github.com/elastic/elasticsearch/commit/7c5c6af7bd130565bf2b51e9c231792f2b436288", "committedDate": "2020-03-11T17:11:31Z", "message": "Merge branch 'master' into issue/52775_query_folder_tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzczMTQ1NjQ3", "url": "https://github.com/elastic/elasticsearch/pull/53187#pullrequestreview-373145647", "createdAt": "2020-03-11T21:42:20Z", "commit": {"oid": "7c5c6af7bd130565bf2b51e9c231792f2b436288"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQyMTo0MjoyMFrOF1KIug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQyMTo0MjoyMFrOF1KIug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTI4NDkyMg==", "bodyText": "This error message is confusing to the end user: there is no equality comparison in the query... I'm not saying the test is incorrect, but the way we report the error in the context of EQL is slightly incorrect.", "url": "https://github.com/elastic/elasticsearch/pull/53187#discussion_r391284922", "createdAt": "2020-03-11T21:42:20Z", "author": {"login": "astefan"}, "path": "x-pack/plugin/eql/src/test/java/org/elasticsearch/xpack/eql/planner/QueryFolderFailTests.java", "diffHunk": "@@ -0,0 +1,25 @@\n+/*\n+ * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n+ * or more contributor license agreements. Licensed under the Elastic License;\n+ * you may not use this file except in compliance with the Elastic License.\n+ */\n+\n+package org.elasticsearch.xpack.eql.planner;\n+\n+import org.elasticsearch.xpack.ql.QlIllegalArgumentException;\n+\n+public class QueryFolderFailTests extends AbstractQueryFolderTestCase {\n+    public void testPropertyEquationFilterUnsupported() {\n+        QlIllegalArgumentException e = expectThrows(QlIllegalArgumentException.class,\n+                () -> plan(\"process where (serial_event_id<9 and serial_event_id >= 7) or (opcode == pid)\"));\n+        String msg = e.getMessage();\n+        assertEquals(\"Line 1:74: Comparisons against variables are not (currently) supported; offender [pid] in [==]\", msg);\n+    }\n+\n+    public void testPropertyEquationInClauseFilterUnsupported() {\n+        QlIllegalArgumentException e = expectThrows(QlIllegalArgumentException.class,\n+                () -> plan(\"process where opcode in (1,3) and process_name in (parent_process_name, \\\"SYSTEM\\\")\"));\n+        String msg = e.getMessage();\n+        assertEquals(\"Line 1:52: Comparisons against variables are not (currently) supported; offender [parent_process_name] in [==]\", msg);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7c5c6af7bd130565bf2b51e9c231792f2b436288"}, "originalPosition": 23}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1811, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}