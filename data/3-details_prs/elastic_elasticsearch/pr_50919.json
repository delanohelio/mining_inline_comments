{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYyMTM2MDM0", "number": 50919, "title": "Secure password for monitoring HTTP exporter", "bodyText": "Adds reloadable SECURE_AUTH_PASSWORD to allow keystore entries in the form xpack.monitoring.exporters.*.secure_auth_password to securely supply passwords for monitoring exporters. Deprecates the insecure AUTH_PASSWORD setting.\nIt would have been ideal to include validation that only one of either the AUTH_PASSWORD or SECURE_AUTH_PASSWORD were set but the settings validation framework does not support secure settings. Additionally, the validation on the AUTH_USERNAME setting that required a password to be set if the username was set had to be removed because the password can now be set via a secure setting that the validation framework cannot see. It might be possible to extend the validation framework to handle secure settings, but if so, that would definitely be a separate work effort.\nMaking the SECURE_AUTH_PASSWORD setting reloadable meant that the Monitoring plugin had to be able to trigger a reload of any HTTP exporters when the cluster received a _nodes/reload_secure_settings request. This necessitated (unless I missed a cleaner approach) the addition of a reference to Exporters within the Monitoring class.\nFixes #50197.", "createdAt": "2020-01-13T14:07:25Z", "url": "https://github.com/elastic/elasticsearch/pull/50919", "merged": true, "mergeCommit": {"oid": "dd8add621583d1a87d647a1627a86ace0afd35dc"}, "closed": true, "closedAt": "2020-01-30T21:01:15Z", "author": {"login": "danhermann"}, "timelineItems": {"totalCount": 29, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb580kSAH2gAyMzYyMTM2MDM0OjExZjNkMzQ4ZmExY2E3NDU1ODUyNmQ5OGNmZTU4YTY3YTRmNzRlZDI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb_JqidAH2gAyMzYyMTM2MDM0OjNjY2Q5ZTk0ZTI0NTRkODZmYzU1MzgwYmJkNTNiN2NkMmMxOTFjMWM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "11f3d348fa1ca74558526d98cfe58a67a4f74ed2", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/11f3d348fa1ca74558526d98cfe58a67a4f74ed2", "committedDate": "2020-01-13T14:00:20Z", "message": "Secure monitoring password"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxOTgxMDQ3", "url": "https://github.com/elastic/elasticsearch/pull/50919#pullrequestreview-341981047", "createdAt": "2020-01-13T16:42:43Z", "commit": {"oid": "11f3d348fa1ca74558526d98cfe58a67a4f74ed2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxNjo0Mjo0M1rOFc9MLQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxNjo0Mjo0M1rOFc9MLQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTkwNjk4OQ==", "bodyText": "there is an assumption that all the settings here are dynamic cluster settings.", "url": "https://github.com/elastic/elasticsearch/pull/50919#discussion_r365906989", "createdAt": "2020-01-13T16:42:43Z", "author": {"login": "albertzaharovits"}, "path": "x-pack/plugin/monitoring/src/main/java/org/elasticsearch/xpack/monitoring/exporter/http/HttpExporter.java", "diffHunk": "@@ -868,6 +892,7 @@ public void doClose() {\n     public static List<Setting.AffixSetting<?>> getSettings() {\n         return Arrays.asList(HOST_SETTING, TEMPLATE_CREATE_LEGACY_VERSIONS_SETTING, AUTH_PASSWORD_SETTING, AUTH_USERNAME_SETTING,\n                 BULK_TIMEOUT_SETTING, CONNECTION_READ_TIMEOUT_SETTING, CONNECTION_TIMEOUT_SETTING, PIPELINE_CHECK_TIMEOUT_SETTING,\n-                PROXY_BASE_PATH_SETTING, SNIFF_ENABLED_SETTING, TEMPLATE_CHECK_TIMEOUT_SETTING, SSL_SETTING, HEADERS_SETTING);\n+                PROXY_BASE_PATH_SETTING, SNIFF_ENABLED_SETTING, TEMPLATE_CHECK_TIMEOUT_SETTING, SSL_SETTING, HEADERS_SETTING,\n+                SECURE_AUTH_PASSWORD_SETTING);\n     }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11f3d348fa1ca74558526d98cfe58a67a4f74ed2"}, "originalPosition": 78}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "13a1a3e36945856d7a87ced602757df091e1a517", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/13a1a3e36945856d7a87ced602757df091e1a517", "committedDate": "2020-01-14T17:00:43Z", "message": "fix tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d8bd711a9199c7681c5a4ec9bfe445f3df437205", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/d8bd711a9199c7681c5a4ec9bfe445f3df437205", "committedDate": "2020-01-14T17:34:47Z", "message": "Merge branch 'master' into 50197_secure_password"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "79e02679d3eaaf3405cbddefcb5d5c5c57170add", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/79e02679d3eaaf3405cbddefcb5d5c5c57170add", "committedDate": "2020-01-14T17:45:59Z", "message": "Merge branch 'master' into 50197_secure_password"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "322e690abe16c6c31e9c44fa75a8e20b8f58c0fb", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/322e690abe16c6c31e9c44fa75a8e20b8f58c0fb", "committedDate": "2020-01-15T03:36:34Z", "message": "making setting reloadable"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce03cd19f914819f555bebdacf84585d7dd018ce", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/ce03cd19f914819f555bebdacf84585d7dd018ce", "committedDate": "2020-01-15T12:28:49Z", "message": "Merge branch 'master' into 50197_secure_password"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "25f9515bdebe62e8438c1d0cf43cc62c1825c5ae", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/25f9515bdebe62e8438c1d0cf43cc62c1825c5ae", "committedDate": "2020-01-15T18:06:38Z", "message": "fix reloading and test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "da29f4e409b4dba10cb2f8d31ad000bc3adf3dab", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/da29f4e409b4dba10cb2f8d31ad000bc3adf3dab", "committedDate": "2020-01-15T18:07:09Z", "message": "Merge branch 'master' into 50197_secure_password"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a0e8064a7e949e504ee7aa2f956ed76fda8976ae", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/a0e8064a7e949e504ee7aa2f956ed76fda8976ae", "committedDate": "2020-01-15T23:22:00Z", "message": "handle deprecation warnings in integration tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4840a0f12c916cdd7ff5a11d00894895cc4acc7e", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/4840a0f12c916cdd7ff5a11d00894895cc4acc7e", "committedDate": "2020-01-15T23:53:19Z", "message": "checkstyle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "99811a2354763be25ce85ea5c7b8bd5bb933b654", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/99811a2354763be25ce85ea5c7b8bd5bb933b654", "committedDate": "2020-01-17T21:17:24Z", "message": "accommodate either password in validation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2MTY0NzIz", "url": "https://github.com/elastic/elasticsearch/pull/50919#pullrequestreview-346164723", "createdAt": "2020-01-21T20:20:10Z", "commit": {"oid": "99811a2354763be25ce85ea5c7b8bd5bb933b654"}, "state": "COMMENTED", "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQyMDoyMDoxMFrOFgHjsg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQyMTo1NToyNVrOFgKF0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTIyMjU3OA==", "bodyText": "Can you use a ConcurrentHashMap instead of explicit synchronization ?  perhaps : https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentHashMap.html#replace-K-V- ?", "url": "https://github.com/elastic/elasticsearch/pull/50919#discussion_r369222578", "createdAt": "2020-01-21T20:20:10Z", "author": {"login": "jakelandis"}, "path": "x-pack/plugin/monitoring/src/main/java/org/elasticsearch/xpack/monitoring/exporter/http/HttpExporter.java", "diffHunk": "@@ -689,6 +694,29 @@ private static void configureTimeouts(final RestClientBuilder builder, final Con\n         builder.setRequestConfigCallback(new TimeoutRequestConfigCallback(connectTimeout, socketTimeout));\n     }\n \n+\n+    /**\n+     * Caches secure settings for use when dynamically configuring HTTP exporters\n+     * @param settings settings used for configuring HTTP exporter\n+     * @return names of HTTP exporters whose secure settings changed, if any\n+     */\n+    public static List<String> loadSettings(Settings settings) {\n+        final List<String> changedExporters = new ArrayList<>();\n+        for (final String namespace : SECURE_AUTH_PASSWORD_SETTING.getNamespaces(settings)) {\n+            final Setting<?> s = SECURE_AUTH_PASSWORD_SETTING.getConcreteSettingForNamespace(namespace);\n+            final String password = s.get(settings).toString();\n+            String existingPassword;\n+            synchronized (SECURE_AUTH_PASSWORDS) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "99811a2354763be25ce85ea5c7b8bd5bb933b654"}, "originalPosition": 89}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTIzMDA3OQ==", "bodyText": "If you use a ConcurrentHashMap for SECURE_AUTH_PASSWORDS you should be able to use getOrDefault instead of explicit synchronization.", "url": "https://github.com/elastic/elasticsearch/pull/50919#discussion_r369230079", "createdAt": "2020-01-21T20:37:19Z", "author": {"login": "jakelandis"}, "path": "x-pack/plugin/monitoring/src/main/java/org/elasticsearch/xpack/monitoring/exporter/http/HttpExporter.java", "diffHunk": "@@ -700,7 +728,13 @@ private static void configureTimeouts(final RestClientBuilder builder, final Con\n     @Nullable\n     private static CredentialsProvider createCredentialsProvider(final Config config) {\n         final String username = AUTH_USERNAME_SETTING.getConcreteSettingForNamespace(config.name()).get(config.settings());\n-        final String password = AUTH_PASSWORD_SETTING.getConcreteSettingForNamespace(config.name()).get(config.settings());\n+\n+        String password;\n+        synchronized (SECURE_AUTH_PASSWORDS) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "99811a2354763be25ce85ea5c7b8bd5bb933b654"}, "originalPosition": 110}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTIzNTA3NA==", "bodyText": "Passwords as String should be avoided where possible due to help avoid leaking to heap since gc happens when ever it feel like it. I think you can use SecureString instead and then close it out to ensure it zero'd out when you are done.\nAlso since it looks like you are using this for equality, can you just hash it and store the hash in the map ?", "url": "https://github.com/elastic/elasticsearch/pull/50919#discussion_r369235074", "createdAt": "2020-01-21T20:48:34Z", "author": {"login": "jakelandis"}, "path": "x-pack/plugin/monitoring/src/main/java/org/elasticsearch/xpack/monitoring/exporter/http/HttpExporter.java", "diffHunk": "@@ -401,6 +405,7 @@ public void validate(String password, Map<Setting<?>, Object> settings) {\n      */\n     private final AtomicBoolean clusterAlertsAllowed = new AtomicBoolean(false);\n \n+    private static final Map<String, String> SECURE_AUTH_PASSWORDS = new HashMap<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "99811a2354763be25ce85ea5c7b8bd5bb933b654"}, "originalPosition": 69}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTIzODgxNA==", "bodyText": "Can you leave a quick comment here (maybe with a GH issue link?) to why you can not validate the password is set ?", "url": "https://github.com/elastic/elasticsearch/pull/50919#discussion_r369238814", "createdAt": "2020-01-21T20:57:14Z", "author": {"login": "jakelandis"}, "path": "x-pack/plugin/monitoring/src/main/java/org/elasticsearch/xpack/monitoring/exporter/http/HttpExporter.java", "diffHunk": "@@ -232,8 +227,7 @@ public void validate(final String username, final Map<Setting<?>, Object> settin\n                                         HttpExporter.AUTH_USERNAME_SETTING.getConcreteSetting(key));\n \n                                 final List<Setting<?>> settings = List.of(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "99811a2354763be25ce85ea5c7b8bd5bb933b654"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTIzODk5NQ==", "bodyText": "ditto about SecureString", "url": "https://github.com/elastic/elasticsearch/pull/50919#discussion_r369238995", "createdAt": "2020-01-21T20:57:37Z", "author": {"login": "jakelandis"}, "path": "x-pack/plugin/monitoring/src/main/java/org/elasticsearch/xpack/monitoring/exporter/http/HttpExporter.java", "diffHunk": "@@ -689,6 +694,29 @@ private static void configureTimeouts(final RestClientBuilder builder, final Con\n         builder.setRequestConfigCallback(new TimeoutRequestConfigCallback(connectTimeout, socketTimeout));\n     }\n \n+\n+    /**\n+     * Caches secure settings for use when dynamically configuring HTTP exporters\n+     * @param settings settings used for configuring HTTP exporter\n+     * @return names of HTTP exporters whose secure settings changed, if any\n+     */\n+    public static List<String> loadSettings(Settings settings) {\n+        final List<String> changedExporters = new ArrayList<>();\n+        for (final String namespace : SECURE_AUTH_PASSWORD_SETTING.getNamespaces(settings)) {\n+            final Setting<?> s = SECURE_AUTH_PASSWORD_SETTING.getConcreteSettingForNamespace(namespace);\n+            final String password = s.get(settings).toString();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "99811a2354763be25ce85ea5c7b8bd5bb933b654"}, "originalPosition": 87}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTI0MjAwNQ==", "bodyText": "would auth.secure_password be more inline with other secure settings ?", "url": "https://github.com/elastic/elasticsearch/pull/50919#discussion_r369242005", "createdAt": "2020-01-21T21:04:30Z", "author": {"login": "jakelandis"}, "path": "docs/reference/settings/monitoring-settings.asciidoc", "diffHunk": "@@ -200,9 +200,14 @@ xpack.monitoring.exporters:\n \n The username is required if a `auth.password` is supplied.\n \n+`secure_auth.password` ({ref}/secure-settings.html[Secure], {ref}/secure-settings.html#reloadable-secure-settings[reloadable])::\n+\n+The password for the `auth.username`. May not be specified with `auth.password`.\n+\n `auth.password`::\n \n-The password for the `auth.username`.\n+The password for the `auth.username`. May not be specified with `secure_auth.password`. This setting is deprecated[7.6.0, Use\n+`secure_auth.password` instead.].", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "99811a2354763be25ce85ea5c7b8bd5bb933b654"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTI1NzI2Nw==", "bodyText": "Do plugins get reloaded when the secure settings change ?", "url": "https://github.com/elastic/elasticsearch/pull/50919#discussion_r369257267", "createdAt": "2020-01-21T21:39:59Z", "author": {"login": "jakelandis"}, "path": "x-pack/plugin/monitoring/src/main/java/org/elasticsearch/xpack/monitoring/Monitoring.java", "diffHunk": "@@ -178,4 +180,13 @@ boolean isEnabled() {\n         final String exportersKey = \"xpack.monitoring.exporters.\";\n         return List.of(exportersKey + \"*.auth.*\", exportersKey + \"*.ssl.*\");\n     }\n+\n+    @Override\n+    public void reload(Settings settings) throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "99811a2354763be25ce85ea5c7b8bd5bb933b654"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTI2NDA4MQ==", "bodyText": "Could you add some unit tests for changing the secure setting and ensure it is changed (or no-op) as well as trying to set this for a non-http type setting ? See org.elasticsearch.xpack.watcher.notification.NotificationService for some examples.\nIdeally, we would also have Integration tests, but I didn't see any framework already setup to read from the keystore for a Integration tests (and an almost complete lack of Rest tests) :(", "url": "https://github.com/elastic/elasticsearch/pull/50919#discussion_r369264081", "createdAt": "2020-01-21T21:55:25Z", "author": {"login": "jakelandis"}, "path": "x-pack/plugin/monitoring/src/test/java/org/elasticsearch/xpack/monitoring/exporter/http/HttpExporterTests.java", "diffHunk": "@@ -346,6 +349,10 @@ public void testCreateRestClient() throws IOException {\n \n         // doesn't explode\n         HttpExporter.createRestClient(config, sslService, listener).close();\n+        if (useBasicAuth) {\n+            assertWarnings(\"[xpack.monitoring.exporters._http.auth.password] setting was deprecated in Elasticsearch and will be \" +\n+                \"removed in a future release! See the breaking changes documentation for the next major version.\");\n+        }\n     }\n ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "99811a2354763be25ce85ea5c7b8bd5bb933b654"}, "originalPosition": 28}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ceb13b3af65899df728ed9cc4e7eff37ed818954", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/ceb13b3af65899df728ed9cc4e7eff37ed818954", "committedDate": "2020-01-22T19:58:01Z", "message": "switch to ConcurrentHashMap"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e158752235337d652dad740d85b5995175537917", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/e158752235337d652dad740d85b5995175537917", "committedDate": "2020-01-22T20:23:40Z", "message": "add comment about validation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "15624ab316eba7fc871e1280aa0e705512861e6e", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/15624ab316eba7fc871e1280aa0e705512861e6e", "committedDate": "2020-01-22T20:24:47Z", "message": "Merge branch 'master' into 50197_secure_password"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e6be3460a30861e8fd177472308a265d1b95ae30", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/e6be3460a30861e8fd177472308a265d1b95ae30", "committedDate": "2020-01-23T12:33:47Z", "message": "remove obsolete test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b8f8cbe75cdb3b3527b4fb85cfadb6642d0f7f71", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/b8f8cbe75cdb3b3527b4fb85cfadb6642d0f7f71", "committedDate": "2020-01-24T23:48:10Z", "message": "integration test that reloads secure password"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8f9c13c9a4ac489ba8b4eed4335903e02fea67c4", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/8f9c13c9a4ac489ba8b4eed4335903e02fea67c4", "committedDate": "2020-01-24T23:48:38Z", "message": "Merge branch 'master' into 50197_secure_password"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6258675e4a5d3f2906c6a2d71a20219509130f3", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/c6258675e4a5d3f2906c6a2d71a20219509130f3", "committedDate": "2020-01-25T00:12:05Z", "message": "rename setting and update docs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9e3a59164521c88474996348e227cfa89d74a55e", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/9e3a59164521c88474996348e227cfa89d74a55e", "committedDate": "2020-01-27T17:04:35Z", "message": "add new tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5NjAzMTE5", "url": "https://github.com/elastic/elasticsearch/pull/50919#pullrequestreview-349603119", "createdAt": "2020-01-28T18:28:13Z", "commit": {"oid": "9e3a59164521c88474996348e227cfa89d74a55e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a7974e774aa4a974eaeadeadda7d65b82e5f548e", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/a7974e774aa4a974eaeadeadda7d65b82e5f548e", "committedDate": "2020-01-28T22:30:34Z", "message": "log warning if both secure password and deprecated password are supplied"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUwMjgyNDY1", "url": "https://github.com/elastic/elasticsearch/pull/50919#pullrequestreview-350282465", "createdAt": "2020-01-29T17:17:15Z", "commit": {"oid": "a7974e774aa4a974eaeadeadda7d65b82e5f548e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxNzoxNzoxNVrOFjQu4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxNzoxNzoxNVrOFjQu4w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjUxODYyNw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            `auth.secure_password` ({ref}/secure-settings.html[Secure], {ref}/secure-settings.html#reloadable-secure-settings[reloadable])::\n          \n          \n            \n            `auth.secure_password` (<<secure-settings,Secure>>, <<reloadable-secure-settings,reloadable>>)::", "url": "https://github.com/elastic/elasticsearch/pull/50919#discussion_r372518627", "createdAt": "2020-01-29T17:17:15Z", "author": {"login": "lcawl"}, "path": "docs/reference/settings/monitoring-settings.asciidoc", "diffHunk": "@@ -198,11 +198,16 @@ xpack.monitoring.exporters:\n \n `auth.username`::\n \n-The username is required if a `auth.password` is supplied.\n+The username is required if `auth.secure_password` or `auth.password` is supplied.\n+\n+`auth.secure_password` ({ref}/secure-settings.html[Secure], {ref}/secure-settings.html#reloadable-secure-settings[reloadable])::", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a7974e774aa4a974eaeadeadda7d65b82e5f548e"}, "originalPosition": 31}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1252a8a872079f2bc0c13976cab5cb6fe0f2aabf", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/1252a8a872079f2bc0c13976cab5cb6fe0f2aabf", "committedDate": "2020-01-29T17:20:48Z", "message": "Update docs/reference/settings/monitoring-settings.asciidoc\n\nCo-Authored-By: Lisa Cawley <lcawley@elastic.co>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUwMjg2MzM4", "url": "https://github.com/elastic/elasticsearch/pull/50919#pullrequestreview-350286338", "createdAt": "2020-01-29T17:22:58Z", "commit": {"oid": "a7974e774aa4a974eaeadeadda7d65b82e5f548e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxNzoyMjo1OFrOFjQ6pQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxNzoyMjo1OFrOFjQ6pQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjUyMTYzNw==", "bodyText": "In general, we put the conditional part of the sentence at the beginning so folks can stop reading if it doesn't apply to them.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The password for the `auth.username`. This setting is ignored if `auth.secure_password` is also specified. This setting is\n          \n          \n            \n            The password for the `auth.username`. If `auth.secure_password` is also specified, this setting is ignored.", "url": "https://github.com/elastic/elasticsearch/pull/50919#discussion_r372521637", "createdAt": "2020-01-29T17:22:58Z", "author": {"login": "lcawl"}, "path": "docs/reference/settings/monitoring-settings.asciidoc", "diffHunk": "@@ -198,11 +198,16 @@ xpack.monitoring.exporters:\n \n `auth.username`::\n \n-The username is required if a `auth.password` is supplied.\n+The username is required if `auth.secure_password` or `auth.password` is supplied.\n+\n+`auth.secure_password` ({ref}/secure-settings.html[Secure], {ref}/secure-settings.html#reloadable-secure-settings[reloadable])::\n+\n+The password for the `auth.username`. Takes precedence over `auth.password` if it is also specified.\n \n `auth.password`::\n \n-The password for the `auth.username`.\n+The password for the `auth.username`. This setting is ignored if `auth.secure_password` is also specified. This setting is", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a7974e774aa4a974eaeadeadda7d65b82e5f548e"}, "originalPosition": 38}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9019ab5fdb289a94cf3df23652881b042ce27019", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/9019ab5fdb289a94cf3df23652881b042ce27019", "committedDate": "2020-01-29T17:23:41Z", "message": "Update docs/reference/settings/monitoring-settings.asciidoc\n\nCo-Authored-By: Lisa Cawley <lcawley@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f97171d21508dabef1b20fa58b2d2f3482ad1a7", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/5f97171d21508dabef1b20fa58b2d2f3482ad1a7", "committedDate": "2020-01-29T17:29:46Z", "message": "add link from reloadable settings page to monitoring settings page"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ccd9e94e2454d86fc55380bbd53b7cd2c191c1c", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/3ccd9e94e2454d86fc55380bbd53b7cd2c191c1c", "committedDate": "2020-01-29T17:47:46Z", "message": "update docs"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3183, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}