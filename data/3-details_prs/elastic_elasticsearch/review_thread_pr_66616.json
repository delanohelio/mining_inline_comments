{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQyNjg1Mzk1", "number": 66616, "reviewThreads": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxODoyOToyM1rOFHTHIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxMzoyNjo0NFrOFIKFDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQzMTk3NDcyOnYy", "diffSide": "RIGHT", "path": "docs/reference/modules/node.asciidoc", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxODoyOToyM1rOIIuARQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxODoyOToyM1rOIIuARQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjAxMzI1Mw==", "bodyText": "I think we need some clarification on whether a node with ml and remote_cluster_client is still considered a dedicated ML node.  I think it should still be:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            roles. See <<remote-node>>.\n          \n          \n            \n            roles. See <<remote-node>>.  A node with both the `ml` and `remote_cluster_client` roles\n          \n          \n            \n            but no others is still considered a dedicated {ml} node.", "url": "https://github.com/elastic/elasticsearch/pull/66616#discussion_r546013253", "createdAt": "2020-12-18T18:29:23Z", "author": {"login": "droberts195"}, "path": "docs/reference/modules/node.asciidoc", "diffHunk": "@@ -340,6 +340,9 @@ xpack.ml.enabled: true <1>\n ----\n <1> The `xpack.ml.enabled` setting is enabled by default.\n \n+If you want the node to use {ccs}, add `remote_cluster_client` to the list of\n+roles. See <<remote-node>>.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4bf0c290422306f6c1755434b89eac777cb40481"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQzMTk3NjAxOnYy", "diffSide": "RIGHT", "path": "docs/reference/modules/node.asciidoc", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxODoyOTo1M1rOIIuBJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxODoyOTo1M1rOIIuBJA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjAxMzQ3Ng==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            roles. See <<remote-node>>.\n          \n          \n            \n            roles. See <<remote-node>>.  A node with both the `transform` and `remote_cluster_client` roles\n          \n          \n            \n            but no others is still considered a dedicated {transform} node.", "url": "https://github.com/elastic/elasticsearch/pull/66616#discussion_r546013476", "createdAt": "2020-12-18T18:29:53Z", "author": {"login": "droberts195"}, "path": "docs/reference/modules/node.asciidoc", "diffHunk": "@@ -354,6 +357,9 @@ To create a dedicated {transform} node in the {default-dist}, set:\n node.roles: [ transform ]\n ----\n \n+If you want the node to use {ccs}, add `remote_cluster_client` to the list of\n+roles. See <<remote-node>>.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4bf0c290422306f6c1755434b89eac777cb40481"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQzMTk5Mzk2OnYy", "diffSide": "RIGHT", "path": "docs/reference/modules/node.asciidoc", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxODozNTozNlrOIIuMEQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxODozNTozNlrOIIuMEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjAxNjI3Mw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \n          \n          \n            \n            \n          \n          \n            \n            If you are using {ccs} in any way it is strongly recommended to allow {ml} nodes to do remote searches unless you have a very good reason not to. It will likely lead to confusion and frustration if cross cluster searches usually work perfectly but fail when used in {ml} job or {dfeed} configs.", "url": "https://github.com/elastic/elasticsearch/pull/66616#discussion_r546016273", "createdAt": "2020-12-18T18:35:36Z", "author": {"login": "droberts195"}, "path": "docs/reference/modules/node.asciidoc", "diffHunk": "@@ -340,6 +340,9 @@ xpack.ml.enabled: true <1>\n ----\n <1> The `xpack.ml.enabled` setting is enabled by default.\n \n+If you want the node to use {ccs}, add `remote_cluster_client` to the list of\n+roles. See <<remote-node>>.\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4bf0c290422306f6c1755434b89eac777cb40481"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQzMTk5NjA3OnYy", "diffSide": "RIGHT", "path": "docs/reference/modules/node.asciidoc", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxODozNjowOFrOIIuNQA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxODozNjowOFrOIIuNQA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjAxNjU3Ng==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \n          \n          \n            \n            \n          \n          \n            \n            If you are using {ccs} in any way it is strongly recommended to allow {transform} nodes to do remote searches unless you have a very good reason not to. It will likely lead to confusion and frustration if cross cluster searches usually work perfectly but fail when used in {transform} configs.", "url": "https://github.com/elastic/elasticsearch/pull/66616#discussion_r546016576", "createdAt": "2020-12-18T18:36:08Z", "author": {"login": "droberts195"}, "path": "docs/reference/modules/node.asciidoc", "diffHunk": "@@ -354,6 +357,9 @@ To create a dedicated {transform} node in the {default-dist}, set:\n node.roles: [ transform ]\n ----\n \n+If you want the node to use {ccs}, add `remote_cluster_client` to the list of\n+roles. See <<remote-node>>.\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4bf0c290422306f6c1755434b89eac777cb40481"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQzNjk1MTY3OnYy", "diffSide": "RIGHT", "path": "docs/reference/settings/transform-settings.asciidoc", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxMjoyNDo1MVrOIJWjxw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxODo1NTo0NFrOIJiiMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjY3NzcwMw==", "bodyText": "This is now very complicated.  I don't think you should use the phrase \"generic data nodes\", because what does that mean?\nIf you specify node.data: true, don't specify node.roles at all and don't specify node.transform at all then the node is a transform node.  (node.data and node.transform are old deprecated settings that will not work at all in 8.x.  So the \"by default\" statement used to make sense before node.roles was introduced.)\nIf you specify node.roles: [ data ] then the node is not a transform node.\nIf you don't specify any node role settings (old or new) then the node is both a data node and a transform node (and every other type of node).  So the \"by default\" bit makes sense in this case, but for production it's an edge case.\nA data/transform node that specifies node.roles needs to explicitly say both, for example, node.roles: [ data, transform ] or node.roles: [ data_hot, transform, remote_cluster_client ].", "url": "https://github.com/elastic/elasticsearch/pull/66616#discussion_r546677703", "createdAt": "2020-12-21T12:24:51Z", "author": {"login": "droberts195"}, "path": "docs/reference/settings/transform-settings.asciidoc", "diffHunk": "@@ -17,13 +17,18 @@ default.\n `node.roles: [ transform ]`::\n (<<static-cluster-setting,Static>>) Set `node.roles` to contain `transform` to\n identify the node as a _transform node_. If you use the default settings for a\n-node, it does not have the `transform` role.\n+node, it does not have the `transform` role. However, by default all generic\n+data nodes are also {transform} nodes.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fceb692e140949105eab69f618ccbf9c94b91539"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Njg3MzkwNQ==", "bodyText": "Thanks for the explanation!  I've removed \"All data nodes are also transform nodes\" from the node settings page and re-worked the details in the transform and ML settings pages to try to make this clearer.", "url": "https://github.com/elastic/elasticsearch/pull/66616#discussion_r546873905", "createdAt": "2020-12-21T18:55:44Z", "author": {"login": "lcawl"}, "path": "docs/reference/settings/transform-settings.asciidoc", "diffHunk": "@@ -17,13 +17,18 @@ default.\n `node.roles: [ transform ]`::\n (<<static-cluster-setting,Static>>) Set `node.roles` to contain `transform` to\n identify the node as a _transform node_. If you use the default settings for a\n-node, it does not have the `transform` role.\n+node, it does not have the `transform` role. However, by default all generic\n+data nodes are also {transform} nodes.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjY3NzcwMw=="}, "originalCommit": {"oid": "fceb692e140949105eab69f618ccbf9c94b91539"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ0MDI5ODkyOnYy", "diffSide": "RIGHT", "path": "docs/reference/modules/node.asciidoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQwOTo0NDoyMVrOIJ037g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQwOTo0NDoyMVrOIJ037g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzE3NDM4Mg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            {transform} and (if available) {ml}.\n          \n          \n            \n            {transform}, remote_cluster_client and (if available) {ml}.", "url": "https://github.com/elastic/elasticsearch/pull/66616#discussion_r547174382", "createdAt": "2020-12-22T09:44:21Z", "author": {"login": "droberts195"}, "path": "docs/reference/modules/node.asciidoc", "diffHunk": "@@ -15,7 +15,7 @@ All nodes know about all the other nodes in the cluster and can forward client\n requests to the appropriate node.\n \n By default, a node is all of the following types: master-eligible, data, ingest,\n-and (if available) machine learning. All data nodes are also transform nodes.\n+{transform} and (if available) {ml}.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "073e64d9ee681c70cd7a2e076a40d8c7a44c590f"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ0MDk4MDYxOnYy", "diffSide": "RIGHT", "path": "docs/reference/settings/ml-settings.asciidoc", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxMzoyNjo0NFrOIJ7IKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxNjo0NDozNVrOIKBnCA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzI3Njg0MQ==", "bodyText": "I think this sentence:\n\nIf you set node.roles, however, you must explicitly specify all the required roles for the node.\n\nWould be better in docs/reference/modules/node.asciidoc", "url": "https://github.com/elastic/elasticsearch/pull/66616#discussion_r547276841", "createdAt": "2020-12-22T13:26:44Z", "author": {"login": "robin13"}, "path": "docs/reference/settings/ml-settings.asciidoc", "diffHunk": "@@ -22,15 +22,19 @@ hardware, you must disable {ml} (by setting `xpack.ml.enabled` to `false`).\n \n `node.roles: [ ml ]`::\n (<<static-cluster-setting,Static>>) Set `node.roles` to contain `ml` to identify\n-the node as a _{ml} node_ that is capable of running jobs. Every node is a {ml}\n-node by default.\n+the node as a _{ml} node_. If you want to run {ml} jobs, there must be at least\n+one {ml} node in your cluster. \n +\n-If you use the `node.roles` setting, then all required roles must be explicitly\n-set. Consult <<modules-node>> to learn more.\n+By default, every node is a {ml} node. If you set `node.roles`, however,\n+you must explicitly specify all the required roles for the node. To learn more, ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "073e64d9ee681c70cd7a2e076a40d8c7a44c590f"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzM4MzA0OA==", "bodyText": "I think it's already covered in the following sentence on that page: \"If you set node.roles, the node is assigned only the roles you specify.\"", "url": "https://github.com/elastic/elasticsearch/pull/66616#discussion_r547383048", "createdAt": "2020-12-22T16:44:35Z", "author": {"login": "lcawl"}, "path": "docs/reference/settings/ml-settings.asciidoc", "diffHunk": "@@ -22,15 +22,19 @@ hardware, you must disable {ml} (by setting `xpack.ml.enabled` to `false`).\n \n `node.roles: [ ml ]`::\n (<<static-cluster-setting,Static>>) Set `node.roles` to contain `ml` to identify\n-the node as a _{ml} node_ that is capable of running jobs. Every node is a {ml}\n-node by default.\n+the node as a _{ml} node_. If you want to run {ml} jobs, there must be at least\n+one {ml} node in your cluster. \n +\n-If you use the `node.roles` setting, then all required roles must be explicitly\n-set. Consult <<modules-node>> to learn more.\n+By default, every node is a {ml} node. If you set `node.roles`, however,\n+you must explicitly specify all the required roles for the node. To learn more, ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzI3Njg0MQ=="}, "originalCommit": {"oid": "073e64d9ee681c70cd7a2e076a40d8c7a44c590f"}, "originalPosition": 12}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4485, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}