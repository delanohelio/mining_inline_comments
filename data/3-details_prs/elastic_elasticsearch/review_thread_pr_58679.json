{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQxNDg1MzM3", "number": 58679, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQxNjowNjowOVrOEJumrw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQxNjowNjo1NlrOEJun8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc4NjM2MjA3OnYy", "diffSide": "RIGHT", "path": "docs/reference/data-streams/use-a-data-stream.asciidoc", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQxNjowNjowOVrOGqX5QA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQxNjowNjowOVrOGqX5QA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzA4NDg2NA==", "bodyText": "Minor: I thought the \"Update by query API requests containing...\" sequence read a little oddly.", "url": "https://github.com/elastic/elasticsearch/pull/58679#discussion_r447084864", "createdAt": "2020-06-29T16:06:09Z", "author": {"login": "danhermann"}, "path": "docs/reference/data-streams/use-a-data-stream.asciidoc", "diffHunk": "@@ -426,12 +431,98 @@ POST /_reindex\n [[update-delete-docs-in-a-data-stream]]\n === Update or delete documents in a data stream\n \n-Data streams are designed to be <<data-streams-append-only,append-only>>. This\n-means you cannot send update or deletion requests for existing documents to a\n-data stream. However, you can send update or deletion requests to the backing\n-index containing the document.\n+You can use the following requests to update or delete documents in a data\n+stream:\n+\n+* <<docs-update-by-query,Update by query API>> requests containing a query", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9bbe3adfd5c5f171a882f095ef8225789acc560a"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc4NjM2NTI4OnYy", "diffSide": "RIGHT", "path": "docs/reference/data-streams/use-a-data-stream.asciidoc", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQxNjowNjo1NlrOGqX7JA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQxNjowNjo1NlrOGqX7JA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzA4NTM0OA==", "bodyText": "Minor: Same as above, I thought the \"Delete by query API requests containing...\" sequence was a little odd.", "url": "https://github.com/elastic/elasticsearch/pull/58679#discussion_r447085348", "createdAt": "2020-06-29T16:06:56Z", "author": {"login": "danhermann"}, "path": "docs/reference/data-streams/use-a-data-stream.asciidoc", "diffHunk": "@@ -426,12 +431,98 @@ POST /_reindex\n [[update-delete-docs-in-a-data-stream]]\n === Update or delete documents in a data stream\n \n-Data streams are designed to be <<data-streams-append-only,append-only>>. This\n-means you cannot send update or deletion requests for existing documents to a\n-data stream. However, you can send update or deletion requests to the backing\n-index containing the document.\n+You can use the following requests to update or delete documents in a data\n+stream:\n+\n+* <<docs-update-by-query,Update by query API>> requests containing a query\n+that matches documents in the data stream you'd like to update.\n++\n+.*Example*\n+[%collapsible]\n+====\n+The following update by query API request updates documents in the `logs` data\n+stream with a `user.id` of `i96BP1mA`. The request uses a\n+<<modules-scripting-using,script>> to assign matching documents a new `user.id`\n+value of `XgdX0NoX`.\n+\n+////\n+[source,console]\n+----\n+PUT /logs/_create/2?refresh=wait_for\n+{\n+  \"@timestamp\": \"2020-12-07T11:06:07.000Z\",\n+  \"user\": {\n+    \"id\": \"i96BP1mA\"\n+  }\n+}\n+----\n+// TEST[continued]\n+////\n+\n+[source,console]\n+----\n+POST /logs/_update_by_query\n+{\n+  \"query\": {\n+    \"match\": {\n+      \"user.id\": \"i96BP1mA\"\n+    }\n+  },\n+  \"script\": {\n+    \"source\": \"ctx._source.user.id = params.new_id\",\n+    \"params\": {\n+      \"new_id\": \"XgdX0NoX\"\n+    }\n+  }\n+}\n+----\n+// TEST[continued]\n+====\n+\n+* <<docs-delete-by-query,Delete by query API>> requests containing a query", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9bbe3adfd5c5f171a882f095ef8225789acc560a"}, "originalPosition": 75}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2248, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}