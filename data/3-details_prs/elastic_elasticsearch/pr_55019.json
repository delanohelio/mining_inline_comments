{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAxNTAxODAx", "number": 55019, "title": "Docs: add the change log for 7.7", "bodyText": "Add the change log for the 7.7 release.", "createdAt": "2020-04-09T15:46:55Z", "url": "https://github.com/elastic/elasticsearch/pull/55019", "merged": true, "mergeCommit": {"oid": "1513dd55afce126ae127d01f058bbf39ed0f4059"}, "closed": true, "closedAt": "2020-04-14T06:30:31Z", "author": {"login": "bpintea"}, "timelineItems": {"totalCount": 55, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcRPJPkAH2gAyNDAxNTAxODAxOjQwNjZkNzk3ZmI2NzBmODMwODFjNWIzMDgxZmJjM2Y4Zjc5MmM3ZjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcXOW8GAFqTM5MjEyMzk0Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4066d797fb670f83081c5b3081fbc3f8f792c7f6", "author": {"user": {"login": "bpintea", "name": "Bogdan Pintea"}}, "url": "https://github.com/elastic/elasticsearch/commit/4066d797fb670f83081c5b3081fbc3f8f792c7f6", "committedDate": "2020-03-25T22:21:28Z", "message": "Add the change log for 7.7\n\nAdd the change log for 7.7"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9420224fe05572d587c75b7cc883ddb64e5a2ce7", "author": {"user": {"login": "bpintea", "name": "Bogdan Pintea"}}, "url": "https://github.com/elastic/elasticsearch/commit/9420224fe05572d587c75b7cc883ddb64e5a2ce7", "committedDate": "2020-04-09T15:34:06Z", "message": "Update rel. notes to latest state (BC5)\n\nUpdate the release notes to current state (i.e. BC5)."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208", "author": {"user": {"login": "bpintea", "name": "Bogdan Pintea"}}, "url": "https://github.com/elastic/elasticsearch/commit/4935071b78ecc91b2668d5ad8178a07a5a661208", "committedDate": "2020-04-09T15:43:37Z", "message": "Merge remote-tracking branch 'upstream/7.7' into doc/release_notes_7.7"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxMDQ3NzA2", "url": "https://github.com/elastic/elasticsearch/pull/55019#pullrequestreview-391047706", "createdAt": "2020-04-09T18:51:06Z", "commit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxODo1MTowNlrOGDlODw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxODo1MTowNlrOGDlODw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjQwODcxOQ==", "bodyText": "Can you expand the explanation and context around these breaking changes abit ? (maybe reach out to the original authors).\nI think people actually read this section and any additional clarity/context here would be very helpful. You can look at 7.6 a guide: https://www.elastic.co/guide/en/elasticsearch/reference/current/breaking-changes-7.6.html", "url": "https://github.com/elastic/elasticsearch/pull/55019#discussion_r406408719", "createdAt": "2020-04-09T18:51:06Z", "author": {"login": "jakelandis"}, "path": "docs/reference/release-notes/7.7.asciidoc", "diffHunk": "@@ -1,22 +1,612 @@\n [[release-notes-7.7.0]]\n == {es} version 7.7.0\n \n-coming[7.7.0]\n+Also see <<breaking-changes-7.7,Breaking changes in 7.7>>.\n \n [[breaking-7.7.0]]\n [float]\n === Breaking changes\n \n+Highlighting::", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNTA3NTIz", "url": "https://github.com/elastic/elasticsearch/pull/55019#pullrequestreview-391507523", "createdAt": "2020-04-10T15:36:33Z", "commit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxNTozNjozM1rOGD93QA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxNTozNjozM1rOGD93QA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjgxMjQ4MA==", "bodyText": "nit: I try to remove the [<category] from the descriptions. But probably not a requirement. (here and a few places below)", "url": "https://github.com/elastic/elasticsearch/pull/55019#discussion_r406812480", "createdAt": "2020-04-10T15:36:33Z", "author": {"login": "jakelandis"}, "path": "docs/reference/release-notes/7.7.asciidoc", "diffHunk": "@@ -1,22 +1,612 @@\n [[release-notes-7.7.0]]\n == {es} version 7.7.0\n \n-coming[7.7.0]\n+Also see <<breaking-changes-7.7,Breaking changes in 7.7>>.\n \n [[breaking-7.7.0]]\n [float]\n === Breaking changes\n \n+Highlighting::\n+* Highlighters skip ignored keyword values {pull}53408[#53408] (issue: {issue}43800[#43800])\n+\n+Infra/Core::\n+* Remove DEBUG-level default logging from actions {pull}51459[#51459] (issue: {issue}51198[#51198])\n+\n Mapping::\n * Dynamic mappings in indices created on 8.0 and later have stricter validation at mapping update time and\n   results in a deprecation warning for indices created in Elasticsearch 7.7.0 and later.\n-  (e.g. incorrect analyzer settings or unknown field types). {pull}51233[#51233]\n+  (e.g. incorrect analyzer settings or unknown field types). {pull}51233[#51233] (issues: {issue}17411[#17411], {issue}24419[#24419])\n \n Search::\n-* A regression that allowed negative scores in a script_score query was corrected.\n-  A behaviour is restored that throws an error if script_score query produces\n-  a negative score {pull}52478[#52478].\n+* Make range query rounding consistent {pull}50237[#50237] (issue: {issue}50009[#50009])\n * Pipeline aggregation validation errors that used to return HTTP\n   500s/Internal Server Errors now return 400/Bad Request {pull}53669[#53669].\n   As a bonus we now return a list of validation errors rather than returning\n   the first one we encounter.\n+\n+\n+\n+[[breaking-java-7.7.0]]\n+[float]\n+=== Breaking Java changes\n+\n+Infra/Core::\n+* Fix ActionListener.map exception handling {pull}50886[#50886]\n+\n+Machine Learning::\n+* Add expected input field type to trained model config {pull}53083[#53083]\n+\n+Transform::\n+* Enhance the output of preview to return full destination index details {pull}53572[#53572]\n+\n+\n+\n+[[deprecation-7.7.0]]\n+[float]\n+=== Deprecations\n+\n+Allocation::\n+* Deprecated support for delaying state recovery pending master nodes {pull}53646[#53646] (issue: {issue}51806[#51806])\n+\n+Authentication::\n+* Add warnings for invalid realm order config (#51195) {pull}51515[#51515]\n+* Deprecate timeout.tcp_read AD/LDAP realm setting {pull}47305[#47305] (issue: {issue}46028[#46028])\n+\n+Engine::\n+* Deprecate translog retention settings {pull}51588[#51588] (issues: {issue}45473[#45473], {issue}50775[#50775])\n+\n+Features/Features::\n+* Add cluster.remote.connect to deprecation info API {pull}54142[#54142] (issue: {issue}53924[#53924])\n+\n+Infra/Core::\n+* Add deprecation check for listener thread pool {pull}53438[#53438] (issues: {issue}53049[#53049], {issue}53317[#53317])\n+* Deprecate the logstash enabled setting {pull}53367[#53367]\n+* Deprecate the listener thread pool {pull}53266[#53266] (issue: {issue}53049[#53049])\n+* Deprecate creation of dot-prefixed index names except for hidden and system indices {pull}49959[#49959]\n+\n+Infra/REST API::\n+* Deprecate undocumented alternatives to the nodes hot threads API (#52640) {pull}52930[#52930] (issue: {issue}52640[#52640])\n+\n+Machine Learning::\n+* Renaming inference processor field field_mappings to new name field_map {pull}53433[#53433]\n+\n+Search::\n+* Emit deprecation warning when TermsLookup contains a type {pull}53731[#53731] (issue: {issue}41059[#41059])\n+* Deprecate BoolQueryBuilder's mustNot field {pull}53125[#53125]\n+\n+\n+\n+[[feature-7.7.0]]\n+[float]\n+=== New features\n+\n+Aggregations::\n+* Preserve metric types in top_metrics {pull}53288[#53288]\n+* Support multiple metrics in `top_metrics` agg {pull}52965[#52965] (issue: {issue}51813[#51813])\n+* Add size support to `top_metrics` {pull}52662[#52662] (issue: {issue}51813[#51813])\n+* HLRC support for string_stats {pull}52163[#52163]\n+* Add Boxplot Aggregation {pull}51948[#51948] (issue: {issue}33112[#33112])\n+\n+Analysis::\n+* Add nori_number token filter in analysis-nori {pull}53583[#53583]\n+\n+Authentication::\n+* Create API Key on behalf of other user {pull}52886[#52886] (issue: {issue}48716[#48716])\n+\n+Geo::\n+* Add support for distance queries on shape queries {pull}53468[#53468]\n+* Add support for distance queries on geo_shape queries {pull}53466[#53466] (issues: {issue}13351[#13351], {issue}39237[#39237])\n+* Add support for multipoint shape queries {pull}52564[#52564] (issue: {issue}52133[#52133])\n+* Add support for multipoint geoshape queries {pull}52133[#52133] (issue: {issue}37318[#37318])\n+\n+Infra/Core::\n+* Implement hidden indices {pull}50452[#50452] (issues: {issue}50251[#50251], {issue}50665[#50665], {issue}50762[#50762])\n+\n+Infra/Packaging::\n+* Introduce aarch64 packaging {pull}53914[#53914]\n+\n+Machine Learning::\n+* Implement ILM policy for .ml-state* indices {pull}52356[#52356] (issue: {issue}29938[#29938])\n+\n+Mapping::\n+* Introduce a `constant_keyword` field. {pull}49713[#49713]\n+\n+SQL::\n+* constant_keyword support {pull}53241[#53241] (issue: {issue}53016[#53016])\n+* Add optimisations for not-equalities {pull}51088[#51088] (issue: {issue}49637[#49637])\n+* Add support for passing query parameters in REST API calls {pull}51029[#51029] (issue: {issue}42916[#42916])\n+\n+Search::\n+* Introduce compound query {pull}52387[#52387] (issue: {issue}51967[#51967])\n+* Add a cluster setting to disallow expensive queries {pull}51385[#51385] (issue: {issue}29050[#29050])\n+* Add new x-pack endpoints to track the progress of a search asynchronously {pull}49931[#49931] (issue: {issue}49091[#49091])\n+\n+\n+\n+[[enhancement-7.7.0]]\n+[float]\n+=== Enhancements\n+\n+Aggregations::\n+* Try to save memory on aggregations {pull}53793[#53793]\n+* Speed up partial reduce of terms aggregations {pull}53216[#53216] (issue: {issue}51857[#51857])\n+* Simplify SiblingPipelineAggregator {pull}53144[#53144]\n+* Add histogram field type support to boxplot aggs {pull}52265[#52265] (issues: {issue}33112[#33112], {issue}52233[#52233])\n+* Percentiles aggregation validation checks for range {pull}51871[#51871] (issue: {issue}51808[#51808])\n+* Begin moving date_histogram to offset rounding (take two) {pull}51271[#51271] (issues: {issue}50609[#50609], {issue}50873[#50873])\n+* Password-protected Keystore Feature Branch PR {pull}51123[#51123] (issues: {issue}32691[#32691], {issue}49340[#49340])\n+* Implement top_metrics agg {pull}51155[#51155] (issue: {issue}48069[#48069])\n+* Bucket aggregation circuit breaker optimization. {pull}46751[#46751]\n+\n+Analysis::\n+* Removes old Lucene's experimental flag from analyzer documentations {pull}53217[#53217]\n+\n+Authentication::\n+* Add exception metadata for disabled features {pull}52811[#52811] (issues: {issue}47759[#47759], {issue}52311[#52311], {issue}55255[#55255])\n+* Validate role templates before saving role mapping {pull}52636[#52636] (issue: {issue}48773[#48773])\n+* Add support for secondary authentication {pull}52093[#52093]\n+* Expose API key name to the ingest pipeline {pull}51305[#51305] (issues: {issue}46847[#46847], {issue}49106[#49106])\n+* Disallow Password Change when authenticated by Token {pull}49694[#49694] (issue: {issue}48752[#48752])\n+\n+Authorization::\n+* Allow kibana_system to create and invalidate API keys on behalf of other users {pull}53824[#53824] (issue: {issue}48716[#48716])\n+* Add \"grant_api_key\" cluster privilege {pull}53527[#53527] (issues: {issue}48716[#48716], {issue}52886[#52886])\n+* Giving kibana user privileges to create custom link index {pull}53221[#53221] (issue: {issue}59305[#59305])\n+* [APM] Allow kibana to collect APM telemetry in background task {pull}52917[#52917] (issue: {issue}50757[#50757])", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "originalPosition": 161}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNTA3NjQz", "url": "https://github.com/elastic/elasticsearch/pull/55019#pullrequestreview-391507643", "createdAt": "2020-04-10T15:36:47Z", "commit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNTMzNjg2", "url": "https://github.com/elastic/elasticsearch/pull/55019#pullrequestreview-391533686", "createdAt": "2020-04-10T16:28:36Z", "commit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxNjoyODozNlrOGD_N4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxNjoyODozNlrOGD_N4w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjgzNDY1OQ==", "bodyText": "These two should be in the same category but were just mislabelled.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Features/Features::\n          \n          \n            \n            * Upgrade Tika to 1.23 {pull}52402[#52402]\n          \n          \n            \n            \n          \n          \n            \n            Features/Ingest::\n          \n          \n            \n            * Upgrade Tika to 1.24 {pull}54130[#54130] (issue: {issue}52402[#52402])\n          \n          \n            \n            Features/Ingest::\n          \n          \n            \n            * Upgrade Tika to 1.24 {pull}54130[#54130] (issue: {issue}52402[#52402])", "url": "https://github.com/elastic/elasticsearch/pull/55019#discussion_r406834659", "createdAt": "2020-04-10T16:28:36Z", "author": {"login": "jrodewig"}, "path": "docs/reference/release-notes/7.7.asciidoc", "diffHunk": "@@ -1,22 +1,612 @@\n [[release-notes-7.7.0]]\n == {es} version 7.7.0\n \n-coming[7.7.0]\n+Also see <<breaking-changes-7.7,Breaking changes in 7.7>>.\n \n [[breaking-7.7.0]]\n [float]\n === Breaking changes\n \n+Highlighting::\n+* Highlighters skip ignored keyword values {pull}53408[#53408] (issue: {issue}43800[#43800])\n+\n+Infra/Core::\n+* Remove DEBUG-level default logging from actions {pull}51459[#51459] (issue: {issue}51198[#51198])\n+\n Mapping::\n * Dynamic mappings in indices created on 8.0 and later have stricter validation at mapping update time and\n   results in a deprecation warning for indices created in Elasticsearch 7.7.0 and later.\n-  (e.g. incorrect analyzer settings or unknown field types). {pull}51233[#51233]\n+  (e.g. incorrect analyzer settings or unknown field types). {pull}51233[#51233] (issues: {issue}17411[#17411], {issue}24419[#24419])\n \n Search::\n-* A regression that allowed negative scores in a script_score query was corrected.\n-  A behaviour is restored that throws an error if script_score query produces\n-  a negative score {pull}52478[#52478].\n+* Make range query rounding consistent {pull}50237[#50237] (issue: {issue}50009[#50009])\n * Pipeline aggregation validation errors that used to return HTTP\n   500s/Internal Server Errors now return 400/Bad Request {pull}53669[#53669].\n   As a bonus we now return a list of validation errors rather than returning\n   the first one we encounter.\n+\n+\n+\n+[[breaking-java-7.7.0]]\n+[float]\n+=== Breaking Java changes\n+\n+Infra/Core::\n+* Fix ActionListener.map exception handling {pull}50886[#50886]\n+\n+Machine Learning::\n+* Add expected input field type to trained model config {pull}53083[#53083]\n+\n+Transform::\n+* Enhance the output of preview to return full destination index details {pull}53572[#53572]\n+\n+\n+\n+[[deprecation-7.7.0]]\n+[float]\n+=== Deprecations\n+\n+Allocation::\n+* Deprecated support for delaying state recovery pending master nodes {pull}53646[#53646] (issue: {issue}51806[#51806])\n+\n+Authentication::\n+* Add warnings for invalid realm order config (#51195) {pull}51515[#51515]\n+* Deprecate timeout.tcp_read AD/LDAP realm setting {pull}47305[#47305] (issue: {issue}46028[#46028])\n+\n+Engine::\n+* Deprecate translog retention settings {pull}51588[#51588] (issues: {issue}45473[#45473], {issue}50775[#50775])\n+\n+Features/Features::\n+* Add cluster.remote.connect to deprecation info API {pull}54142[#54142] (issue: {issue}53924[#53924])\n+\n+Infra/Core::\n+* Add deprecation check for listener thread pool {pull}53438[#53438] (issues: {issue}53049[#53049], {issue}53317[#53317])\n+* Deprecate the logstash enabled setting {pull}53367[#53367]\n+* Deprecate the listener thread pool {pull}53266[#53266] (issue: {issue}53049[#53049])\n+* Deprecate creation of dot-prefixed index names except for hidden and system indices {pull}49959[#49959]\n+\n+Infra/REST API::\n+* Deprecate undocumented alternatives to the nodes hot threads API (#52640) {pull}52930[#52930] (issue: {issue}52640[#52640])\n+\n+Machine Learning::\n+* Renaming inference processor field field_mappings to new name field_map {pull}53433[#53433]\n+\n+Search::\n+* Emit deprecation warning when TermsLookup contains a type {pull}53731[#53731] (issue: {issue}41059[#41059])\n+* Deprecate BoolQueryBuilder's mustNot field {pull}53125[#53125]\n+\n+\n+\n+[[feature-7.7.0]]\n+[float]\n+=== New features\n+\n+Aggregations::\n+* Preserve metric types in top_metrics {pull}53288[#53288]\n+* Support multiple metrics in `top_metrics` agg {pull}52965[#52965] (issue: {issue}51813[#51813])\n+* Add size support to `top_metrics` {pull}52662[#52662] (issue: {issue}51813[#51813])\n+* HLRC support for string_stats {pull}52163[#52163]\n+* Add Boxplot Aggregation {pull}51948[#51948] (issue: {issue}33112[#33112])\n+\n+Analysis::\n+* Add nori_number token filter in analysis-nori {pull}53583[#53583]\n+\n+Authentication::\n+* Create API Key on behalf of other user {pull}52886[#52886] (issue: {issue}48716[#48716])\n+\n+Geo::\n+* Add support for distance queries on shape queries {pull}53468[#53468]\n+* Add support for distance queries on geo_shape queries {pull}53466[#53466] (issues: {issue}13351[#13351], {issue}39237[#39237])\n+* Add support for multipoint shape queries {pull}52564[#52564] (issue: {issue}52133[#52133])\n+* Add support for multipoint geoshape queries {pull}52133[#52133] (issue: {issue}37318[#37318])\n+\n+Infra/Core::\n+* Implement hidden indices {pull}50452[#50452] (issues: {issue}50251[#50251], {issue}50665[#50665], {issue}50762[#50762])\n+\n+Infra/Packaging::\n+* Introduce aarch64 packaging {pull}53914[#53914]\n+\n+Machine Learning::\n+* Implement ILM policy for .ml-state* indices {pull}52356[#52356] (issue: {issue}29938[#29938])\n+\n+Mapping::\n+* Introduce a `constant_keyword` field. {pull}49713[#49713]\n+\n+SQL::\n+* constant_keyword support {pull}53241[#53241] (issue: {issue}53016[#53016])\n+* Add optimisations for not-equalities {pull}51088[#51088] (issue: {issue}49637[#49637])\n+* Add support for passing query parameters in REST API calls {pull}51029[#51029] (issue: {issue}42916[#42916])\n+\n+Search::\n+* Introduce compound query {pull}52387[#52387] (issue: {issue}51967[#51967])\n+* Add a cluster setting to disallow expensive queries {pull}51385[#51385] (issue: {issue}29050[#29050])\n+* Add new x-pack endpoints to track the progress of a search asynchronously {pull}49931[#49931] (issue: {issue}49091[#49091])\n+\n+\n+\n+[[enhancement-7.7.0]]\n+[float]\n+=== Enhancements\n+\n+Aggregations::\n+* Try to save memory on aggregations {pull}53793[#53793]\n+* Speed up partial reduce of terms aggregations {pull}53216[#53216] (issue: {issue}51857[#51857])\n+* Simplify SiblingPipelineAggregator {pull}53144[#53144]\n+* Add histogram field type support to boxplot aggs {pull}52265[#52265] (issues: {issue}33112[#33112], {issue}52233[#52233])\n+* Percentiles aggregation validation checks for range {pull}51871[#51871] (issue: {issue}51808[#51808])\n+* Begin moving date_histogram to offset rounding (take two) {pull}51271[#51271] (issues: {issue}50609[#50609], {issue}50873[#50873])\n+* Password-protected Keystore Feature Branch PR {pull}51123[#51123] (issues: {issue}32691[#32691], {issue}49340[#49340])\n+* Implement top_metrics agg {pull}51155[#51155] (issue: {issue}48069[#48069])\n+* Bucket aggregation circuit breaker optimization. {pull}46751[#46751]\n+\n+Analysis::\n+* Removes old Lucene's experimental flag from analyzer documentations {pull}53217[#53217]\n+\n+Authentication::\n+* Add exception metadata for disabled features {pull}52811[#52811] (issues: {issue}47759[#47759], {issue}52311[#52311], {issue}55255[#55255])\n+* Validate role templates before saving role mapping {pull}52636[#52636] (issue: {issue}48773[#48773])\n+* Add support for secondary authentication {pull}52093[#52093]\n+* Expose API key name to the ingest pipeline {pull}51305[#51305] (issues: {issue}46847[#46847], {issue}49106[#49106])\n+* Disallow Password Change when authenticated by Token {pull}49694[#49694] (issue: {issue}48752[#48752])\n+\n+Authorization::\n+* Allow kibana_system to create and invalidate API keys on behalf of other users {pull}53824[#53824] (issue: {issue}48716[#48716])\n+* Add \"grant_api_key\" cluster privilege {pull}53527[#53527] (issues: {issue}48716[#48716], {issue}52886[#52886])\n+* Giving kibana user privileges to create custom link index {pull}53221[#53221] (issue: {issue}59305[#59305])\n+* [APM] Allow kibana to collect APM telemetry in background task {pull}52917[#52917] (issue: {issue}50757[#50757])\n+* Add the new 'maintenance' privilege containing 4 actions (#29998) {pull}50643[#50643]\n+\n+Cluster Coordination::\n+* Describe STALE_STATE_CONFIG in ClusterFormationFH {pull}53878[#53878] (issue: {issue}53734[#53734])\n+\n+Distributed::\n+* Introduce formal role for remote cluster client {pull}53924[#53924]\n+* Shortcut query phase using the results of other shards {pull}51852[#51852] (issues: {issue}49601[#49601], {issue}51708[#51708])\n+* Flush instead of synced-flush inactive shards {pull}49126[#49126] (issues: {issue}31965[#31965], {issue}48430[#48430])\n+\n+Engine::\n+* Restore off-heap loading for term dictionary in ReadOnlyEngine {pull}53713[#53713] (issues: {issue}43158[#43158], {issue}51247[#51247])\n+* Separate translog from index deletion conditions {pull}52556[#52556]\n+* Always rewrite search shard request outside of the search thread pool {pull}51708[#51708] (issue: {issue}49601[#49601])\n+* Move the terms index of `_id` off-heap. {pull}52405[#52405] (issue: {issue}42838[#42838])\n+* Cache completion stats between refreshes {pull}51991[#51991] (issue: {issue}51915[#51915])\n+* Use local checkpoint to calculate min translog gen for recovery {pull}51905[#51905] (issue: {issue}49970[#49970])\n+\n+Features/CAT APIs::\n+* /_cat/shards support path stats {pull}53461[#53461]\n+* Allow _cat indices & aliases to use indices options {pull}53248[#53248] (issue: {issue}52304[#52304])\n+\n+Features/Features::\n+* Enable deprecation checks for removed settings {pull}53317[#53317]\n+\n+Features/ILM+SLM::\n+* Hide ILM & SLM history aliases {pull}53564[#53564]\n+* Avoid race condition in ILMHistorySotre {pull}53039[#53039] (issues: {issue}50353[#50353], {issue}52853[#52853])\n+* Make FreezeStep retryable {pull}52540[#52540]\n+* Make DeleteStep retryable {pull}52494[#52494]\n+* Allow forcemerge in the hot phase for ILM policies {pull}52073[#52073] (issue: {issue}43165[#43165])\n+* Stop policy on last PhaseCompleteStep instead of TerminalPolic\u2026 {pull}51631[#51631] (issue: {issue}48431[#48431])\n+* Convert ILM and SLM histories into hidden indices {pull}51456[#51456]\n+* Make UpdateSettingsStep retryable {pull}51235[#51235] (issues: {issue}44135[#44135], {issue}48183[#48183])\n+* Expose master timeout for ILM actions {pull}51130[#51130] (issue: {issue}44136[#44136])\n+* Wait for active shards on rolled index in a separate step {pull}50718[#50718] (issues: {issue}44135[#44135], {issue}48183[#48183])\n+* Adding best_compression {pull}49974[#49974]\n+\n+Features/Indices APIs::\n+* Add IndexTemplateV2 to MetaData {pull}53753[#53753] (issue: {issue}53101[#53101])\n+* Add ComponentTemplate to MetaData {pull}53290[#53290] (issue: {issue}53101[#53101])\n+\n+Features/Ingest::\n+* Reduce log level for pipeline failure {pull}54097[#54097] (issue: {issue}51459[#51459])\n+* Support array for all string ingest processors {pull}53343[#53343] (issue: {issue}51087[#51087])\n+* Add empty_value parameter to CSV processor {pull}51567[#51567]\n+* Add pipeline name to ingest metadata {pull}50467[#50467] (issue: {issue}42106[#42106])\n+\n+Features/Java High Level REST Client::\n+* SourceExists HLRC uses GetSourceRequest instead of GetRequest {pull}51789[#51789] (issue: {issue}50885[#50885])\n+* Add async_search.submit to HLRC {pull}53592[#53592] (issue: {issue}49091[#49091])\n+* Add Get Source API to the HLRC {pull}50885[#50885] (issue: {issue}47678[#47678])\n+\n+Features/Monitoring::\n+* Secure password for monitoring HTTP exporter {pull}50919[#50919] (issue: {issue}50197[#50197])\n+* Validate SSL settings at parse time {pull}49196[#49196] (issue: {issue}47711[#47711])\n+\n+Features/Stats::\n+* Add analysis components and mapping types to the usage API. {pull}51031[#51031]\n+\n+Features/Watcher::\n+* Make watch history indices hidden {pull}52962[#52962] (issue: {issue}50251[#50251])\n+* Upgrade to the latest OWASP HTML sanitizer {pull}50765[#50765] (issue: {issue}50395[#50395])\n+\n+Infra/Core::\n+* Enable helpful null pointer exceptions {pull}54853[#54853]\n+* Allow keystore add to handle multiple settings {pull}54229[#54229] (issue: {issue}54191[#54191])\n+* Report parser name and location in XContent deprecation warnings {pull}53805[#53805]\n+* Report parser name and location in XContent deprecation warnings {pull}53752[#53752]\n+* Deprecate all variants of a ParseField with no replacement {pull}53722[#53722]\n+* Add a helper method to parse maps of objects {pull}53096[#53096]\n+* Allow specifying an exclusive set of fields on ObjectParser {pull}52893[#52893]\n+* Support joda style date patterns in 7.x {pull}52555[#52555]\n+* Implement hidden aliases {pull}52547[#52547] (issue: {issue}52304[#52304])\n+* Allow ObjectParsers to specify required sets of fields {pull}49661[#49661] (issue: {issue}48824[#48824])\n+\n+Infra/Logging::\n+* Capture stdout and stderr to log4j log {pull}50259[#50259] (issue: {issue}50156[#50156])\n+\n+Infra/Packaging::\n+* Introduce aarch64 Docker image {pull}53936[#53936] (issue: {issue}53914[#53914])\n+* Introduce jvm.options.d for customizing JVM options {pull}51882[#51882] (issue: {issue}51626[#51626])\n+\n+Infra/Plugins::\n+* Allow sha512 checksum without filename for maven plugins {pull}52668[#52668] (issue: {issue}52413[#52413])\n+\n+Infra/Scripting::\n+* Scripting: Context script cache unlimited compile {pull}53769[#53769] (issue: {issue}50152[#50152])\n+* Scripting: Increase ingest script cache defaults {pull}53765[#53765] (issue: {issue}50152[#50152])\n+* Scripting: Per-context script cache, default off (#52855) {pull}53756[#53756] (issues: {issue}50152[#50152], {issue}52855[#52855])\n+* Scripting: Per-context script cache, default off {pull}52855[#52855] (issue: {issue}50152[#50152])\n+* Improve Painless compilation performance for nested conditionals {pull}52056[#52056]\n+* Scripting: Add char position of script errors {pull}51069[#51069] (issue: {issue}50993[#50993])\n+\n+Infra/Settings::\n+* Allow keystore add-file to handle multiple settings {pull}54240[#54240] (issue: {issue}54191[#54191])\n+* Settings: AffixSettings as validator dependencies {pull}52973[#52973] (issue: {issue}52933[#52933])\n+\n+License::\n+* Simplify ml license checking with XpackLicenseState internals {pull}52684[#52684] (issue: {issue}52115[#52115])\n+* License removal leads back to a basic license {pull}52407[#52407] (issue: {issue}45022[#45022])\n+* Refactor license checking {pull}52118[#52118] (issue: {issue}51864[#51864])\n+* Add enterprise mode and refactor {pull}51864[#51864] (issue: {issue}51081[#51081])\n+\n+Machine Learning::\n+* Stratified cross validation split for classification {pull}54087[#54087]\n+* Data frame analytics data counts {pull}53998[#53998]\n+* Verify that the field is aggregatable before attempting cardinality aggregation {pull}53874[#53874] (issue: {issue}53876[#53876])\n+* Adds multi-class feature importance support {pull}53803[#53803]\n+* Data frame analytics analysis stats {pull}53788[#53788]\n+* Add a model memory estimation endpoint for anomaly detection {pull}53507[#53507] (issue: {issue}53219[#53219])\n+* [Inference] adds new default_field_map field to trained models {pull}53294[#53294]\n+* Improve DF analytics audits and logging {pull}53179[#53179]\n+* Add indices_options to datafeed config and update {pull}52793[#52793] (issue: {issue}48056[#48056])\n+* Parse and report memory usage for DF Analytics {pull}52778[#52778]\n+* Adds the class_assignment_objective parameter to classification {pull}52763[#52763] (issue: {issue}52427[#52427])\n+* Add reason to DataFrameAnalyticsTask updateState log message {pull}52659[#52659] (issue: {issue}52654[#52654])\n+* [Inference] Add support for multi-value leaves to the tree model {pull}52531[#52531]\n+* Make ml internal indices hidden {pull}52423[#52423] (issue: {issue}52420[#52420])\n+* Add _cat/ml/data_frame/analytics API {pull}52260[#52260] (issue: {issue}51413[#51413])\n+* Adds feature importance option to inference processor {pull}52218[#52218]\n+* Switch poor categorization audit warning to use status field {pull}52195[#52195] (issues: {issue}50749[#50749], {issue}51146[#51146], {issue}51879[#51879])\n+* Retry persisting DF Analytics results {pull}52048[#52048]\n+* Improve multiline_start_pattern for CSV in find_file_structure {pull}51737[#51737]\n+* Add _cat/ml/trained_models API {pull}51529[#51529] (issue: {issue}51414[#51414])\n+* Add GET _cat/ml/datafeeds {pull}51500[#51500] (issue: {issue}51411[#51411])\n+* Use CSV ingest processor in find_file_structure ingest pipeline {pull}51492[#51492] (issue: {issue}56038[#56038])\n+* Add _cat/ml/anomaly_detectors API {pull}51364[#51364]\n+* [Inference] add tags url param to GET {pull}51330[#51330]\n+* Add parsers for inference configuration classes {pull}51300[#51300]\n+* Make datafeeds work with nanosecond time fields {pull}51180[#51180] (issue: {issue}49889[#49889])\n+* Add audit warning for 1000 categories found early in job {pull}51146[#51146] (issue: {issue}50749[#50749])\n+* Adds support for a global calendars {pull}50372[#50372] (issue: {issue}45013[#45013])\n+\n+Mapping::\n+* Wildcard field - add normalizer support {pull}53851[#53851]\n+* Wildcard field - added case insensitive search option {pull}53814[#53814]\n+* Append index name for the source of the cluster put-mapping task {pull}52690[#52690]\n+\n+Network::\n+* Give helpful message on remote connections disabled {pull}53690[#53690]\n+* Add server name to remote info API {pull}53634[#53634]\n+* Log when probe succeeds but full connection fails {pull}51304[#51304]\n+* Encrypt generated key with AES {pull}51019[#51019] (issue: {issue}50843[#50843])\n+\n+Ranking::\n+* Adds recall@k metric to rank eval API {pull}52577[#52577] (issue: {issue}51676[#51676])\n+\n+SQL::\n+* Jdbc debugging enhancement {pull}53880[#53880]\n+* Transfer version compatibility decision to the server {pull}53082[#53082] (issue: {issue}52766[#52766])\n+* Use a proper error message for queries directed at empty mapping indices {pull}52967[#52967] (issue: {issue}52865[#52865])\n+* Use calendar_interval of 1d for HISTOGRAMs with 1 DAY intervals {pull}52749[#52749] (issue: {issue}52713[#52713])\n+* Use a calendar interval for histograms over 1 month intervals {pull}52586[#52586] (issue: {issue}51538[#51538])\n+* Make parsing of date more lenient {pull}52137[#52137] (issue: {issue}49379[#49379])\n+* Enhance timestamp escaped literal parsing {pull}52097[#52097] (issue: {issue}46069[#46069])\n+* Handle uberjar scenario where the ES jdbc driver file is bundled in another jar {pull}51856[#51856] (issue: {issue}50201[#50201])\n+* Verify Full-Text Search functions not allowed in SELECT {pull}51568[#51568] (issue: {issue}47446[#47446])\n+* Extend the optimisations for equalities {pull}50792[#50792] (issue: {issue}49637[#49637])\n+* Add trace logging for search responses coming from server {pull}50530[#50530]\n+* Extend DATE_TRUNC to also operate on intervals(elastic - #46632 ) {pull}47720[#47720] (issue: {issue}46632[#46632])\n+* Enchance output of explain for optimized plan {pull}33718[#33718]\n+\n+Search::\n+* HLRC: Don't send defaults for SubmitAsyncSearchRequest {pull}54200[#54200]\n+* Reduce performance impact of ExitableDirectoryReader {pull}53978[#53978] (issues: {issue}52822[#52822], {issue}53166[#53166], {issue}53496[#53496])\n+* Add heuristics to compute pre_filter_shard_size when unspecified {pull}53873[#53873] (issue: {issue}39835[#39835])\n+* Add async_search get and delete APIs to HLRC {pull}53828[#53828] (issue: {issue}49091[#49091])\n+* Increase step between checks for cancellation {pull}53712[#53712] (issues: {issue}52822[#52822], {issue}53496[#53496])\n+* Refine SearchProgressListener internal API {pull}53373[#53373]\n+* Check for query cancellation during rewrite {pull}53166[#53166] (issue: {issue}52822[#52822])\n+* Implement Cancellable DirectoryReader {pull}52822[#52822]\n+* Address MinAndMax generics warnings {pull}52642[#52642] (issue: {issue}49092[#49092])\n+* Clarify when shard iterators get sorted {pull}52633[#52633]\n+* Generalize how queries on `_index` are handled at rewrite time {pull}52486[#52486] (issues: {issue}49254[#49254], {issue}49713[#49713])\n+* Remove the query builder serialization from QueryShardException message {pull}51885[#51885] (issues: {issue}48910[#48910], {issue}51843[#51843])\n+* Short circuited to MatchNone for non-participating  slice {pull}51207[#51207]\n+* Add \"did you mean\" to unknown queries {pull}51177[#51177]\n+* Exclude unmapped fields during max clause limit checking for querying {pull}49523[#49523] (issue: {issue}49002[#49002])\n+\n+Security::\n+* Add error message in JSON response {pull}54389[#54389]\n+\n+Snapshot/Restore::\n+* Use Azure Bulk Deletes in Azure Repository {pull}53919[#53919] (issue: {issue}53865[#53865])\n+* Only link fd* files during source-only snapshot {pull}53463[#53463] (issue: {issue}50231[#50231])\n+* Add Blob Download Retries to GCS Repository {pull}52479[#52479] (issues: {issue}46589[#46589], {issue}52319[#52319])\n+* Better Incrementality for Snapshots of Unchanged Shards {pull}52182[#52182]\n+* Add Region and Signer Algorithm Overrides to S3 Repos {pull}52112[#52112] (issue: {issue}51861[#51861])\n+* Allow Parallel Snapshot Restore And Delete {pull}51608[#51608] (issue: {issue}41463[#41463])\n+\n+Store::\n+* HybridDirectory should mmap postings. {pull}52641[#52641]\n+\n+Transform::\n+* Transition Transforms to using hidden indices for notifcations index {pull}53773[#53773] (issue: {issue}53762[#53762])\n+* [Rollup] add processing stats to record the time spent for processing results {pull}53770[#53770]\n+* Create GET _cat/transforms API Issue {pull}53643[#53643] (issue: {issue}51412[#51412])\n+* Add support for script in group_by {pull}53167[#53167] (issue: {issue}43152[#43152])\n+* Implement node.transform to control where to run a transform {pull}52712[#52712] (issues: {issue}48734[#48734], {issue}50033[#50033], {issue}52200[#52200])\n+* Add support for filter aggregation {pull}52483[#52483] (issue: {issue}52151[#52151])\n+* Provide exponential_avg* stats for batch transforms {pull}52041[#52041] (issue: {issue}52037[#52037])\n+* Improve irrecoverable error detection - part 2 {pull}52003[#52003] (issue: {issue}51820[#51820])\n+* Mark transform API's stable {pull}51862[#51862]\n+* Improve irrecoverable error detection {pull}51820[#51820] (issue: {issue}50135[#50135])\n+* Add support for percentile aggs {pull}51808[#51808] (issue: {issue}51663[#51663])\n+* Disallow fieldnames with a dot at start and/or end {pull}51369[#51369]\n+* Avoid mapping problems with index templates {pull}51368[#51368] (issue: {issue}51321[#51321])\n+* Handle permanent bulk indexing errors {pull}51307[#51307] (issue: {issue}50122[#50122])\n+* Improve force stop robustness in case of an error {pull}51072[#51072]\n+\n+\n+\n+[[bug-7.7.0]]\n+[float]\n+=== Bug fixes\n+\n+Aggregations::\n+* Fix date_nanos in composite aggs {pull}53315[#53315] (issue: {issue}53168[#53168])\n+* Fix composite agg sort bug {pull}53296[#53296] (issue: {issue}52480[#52480])\n+* Decode max and min optimization more carefully {pull}52336[#52336] (issue: {issue}52220[#52220])\n+* Fix a DST error in date_histogram {pull}52016[#52016] (issue: {issue}50265[#50265])\n+* Use #name() instead of #simpleName() when generating doc values {pull}51920[#51920] (issues: {issue}50307[#50307], {issue}51847[#51847])\n+* Fix a sneaky bug in rare_terms {pull}51868[#51868] (issue: {issue}51020[#51020])\n+* Support time_zone on composite's date_histogram {pull}51172[#51172] (issues: {issue}45199[#45199], {issue}45200[#45200])\n+\n+Allocation::\n+* Improve performance of shards limits decider {pull}53577[#53577] (issue: {issue}53559[#53559])\n+\n+Analysis::\n+* Mask wildcard query special characters on keyword queries {pull}53127[#53127] (issue: {issue}46300[#46300])\n+* Fix caching for PreConfiguredTokenFilter {pull}50912[#50912] (issue: {issue}50734[#50734])\n+\n+Audit::\n+* Logfile audit settings validation {pull}52537[#52537] (issues: {issue}47038[#47038], {issue}47711[#47711], {issue}52357[#52357])\n+\n+Authentication::\n+* Fix potential bug in concurrent token refresh support {pull}53668[#53668]\n+* Respect runas realm for ApiKey security operations {pull}52178[#52178] (issue: {issue}51975[#51975])\n+* Preserve ApiKey credentials for async verification {pull}51244[#51244]\n+* Don't fallback to anonymous for tokens/apikeys {pull}51042[#51042] (issue: {issue}50171[#50171])\n+* Fail gracefully on invalid token strings {pull}51014[#51014]\n+\n+Authorization::\n+* Explicitly require that delegate API keys have no privileges {pull}53647[#53647]\n+* Allow _rollup_search with read privilege {pull}52043[#52043] (issue: {issue}50245[#50245])\n+\n+CCR::\n+* Put CCR tasks on (data && remote cluster clients) {pull}54146[#54146] (issue: {issue}53924[#53924])\n+* Handle no such remote cluster exception in ccr {pull}53415[#53415] (issue: {issue}53225[#53225])\n+* Fix shard follow task cleaner under security {pull}52347[#52347] (issues: {issue}44702[#44702], {issue}51971[#51971])\n+\n+CRUD::\n+* Force execution of finish shard bulk request {pull}51957[#51957] (issue: {issue}51904[#51904])\n+* Return 429 status code when there's a read_only cluster block {pull}50166[#50166] (issue: {issue}49393[#49393])\n+\n+Cluster Coordination::\n+* Use special XContent registry for node tool {pull}54050[#54050] (issue: {issue}53549[#53549])\n+* Allow static cluster.max_voting_config_exclusions {pull}53717[#53717] (issue: {issue}53455[#53455])\n+* Allow joining node to trigger term bump {pull}53338[#53338] (issue: {issue}53271[#53271])\n+* Ignore timeouts with single-node discovery {pull}52159[#52159]\n+\n+Distributed::\n+* Execute retention lease syncs under system context {pull}53838[#53838] (issues: {issue}48430[#48430], {issue}53751[#53751])\n+* Exclude nested documents in LuceneChangesSnapshot {pull}51279[#51279]\n+\n+Engine::\n+* Fix doc_stats and segment_stats of ReadOnlyEngine {pull}53345[#53345] (issues: {issue}51303[#51303], {issue}51331[#51331])\n+* Do not wrap soft-deletes reader for segment stats {pull}51331[#51331] (issues: {issue}51192[#51192], {issue}51303[#51303])\n+* Account soft-deletes in FrozenEngine {pull}51192[#51192] (issue: {issue}50775[#50775])\n+\n+Features/CAT APIs::\n+* Fix NPE in RestPluginsAction {pull}52620[#52620] (issue: {issue}45321[#45321])\n+\n+Features/ILM+SLM::\n+* Disallow negative TimeValues {pull}53913[#53913] (issue: {issue}54041[#54041])\n+* Fix null config in SnapshotLifecyclePolicy.toRequest {pull}53328[#53328] (issues: {issue}44465[#44465], {issue}53171[#53171])\n+* Freeze step retry when not acknowledged {pull}53287[#53287]\n+* Make the set-single-node-allocation retryable (#52077) {pull}52138[#52138] (issue: {issue}52077[#52077])\n+* Make the set-single-node-allocation retryable {pull}52077[#52077] (issue: {issue}43401[#43401])\n+* Fix the init step to actually be retryable {pull}52076[#52076]\n+\n+Features/Ingest::\n+* Fix ingest pipeline _simulate api with empty docs never returns a res\u2026 {pull}52937[#52937] (issue: {issue}52833[#52833])\n+* Handle errors when evaluating if conditions in processors {pull}52543[#52543] (issue: {issue}52339[#52339])\n+* Fix delete enrich policy bug {pull}52179[#52179] (issue: {issue}51228[#51228])\n+* Fix ignore_missing in CsvProcessor {pull}51600[#51600]\n+* Missing suffix for German Month \"Juli\" in Grok Pattern MONTH (#51579) {pull}51591[#51591] (issue: {issue}51579[#51579])\n+* Don't overwrite target field with SetSecurityUserProcessor {pull}51454[#51454] (issue: {issue}51428[#51428])\n+\n+Features/Java High Level REST Client::\n+* Add unsupported parameters to HLRC search request {pull}53745[#53745]\n+* Fix AbstractBulkByScrollRequest slices parameter via Rest {pull}53068[#53068] (issue: {issue}53044[#53044])\n+* Send the fields param via body instead of URL params (elastic#42232) {pull}48840[#48840] (issues: {issue}42232[#42232], {issue}42877[#42877])\n+\n+Features/Java Low Level REST Client::\n+* Fix roles parsing in client nodes sniffer {pull}52888[#52888] (issue: {issue}52864[#52864])\n+\n+Features/Monitoring::\n+* Fix NPE in cluster state collector for monitoring {pull}52371[#52371] (issue: {issue}52317[#52317])\n+\n+Features/Stats::\n+* Switch to AtomicLong for \"IngestCurrent\" metric to prevent negative values {pull}52581[#52581] (issues: {issue}52406[#52406], {issue}52411[#52411])\n+\n+Features/Watcher::\n+* Disable Watcher script optimization for stored scripts {pull}53497[#53497] (issue: {issue}40212[#40212])\n+* The watcher indexing listener didn't handle document level exceptions. {pull}51466[#51466] (issue: {issue}32299[#32299])\n+\n+Geo::\n+* Handle properly indexing rectangles that crosses the dateline {pull}53810[#53810]\n+\n+Highlighting::\n+* Fix highlighter support in PinnedQuery and added test {pull}53716[#53716] (issue: {issue}53699[#53699])\n+\n+Infra/Core::\n+* Fix Joda compatibility in stream protocol {pull}53823[#53823] (issue: {issue}53586[#53586])\n+* Avoid self-suppression on grouped action listener {pull}53262[#53262] (issue: {issue}53174[#53174])\n+* Use correct package for `VM` class {pull}52803[#52803] (issue: {issue}47210[#47210])\n+* Ignore virtual ethernet devices that disappear {pull}51581[#51581] (issue: {issue}49914[#49914])\n+* Fix ingest timezone logic {pull}51215[#51215] (issue: {issue}51108[#51108])\n+\n+Infra/Logging::\n+* Fix LoggingOutputStream to work on windows {pull}51779[#51779] (issue: {issue}51532[#51532])\n+\n+Infra/Packaging::\n+* Handle special characters and spaces in JAVA_HOME path in elasticsearch-service.bat {pull}52676[#52676]\n+* Limit _FILE env var support to specific vars {pull}52525[#52525] (issue: {issue}52503[#52503])\n+* Always set default ES_PATH_CONF for package scriptlets {pull}51827[#51827] (issues: {issue}50246[#50246], {issue}50631[#50631])\n+\n+Infra/Plugins::\n+* Ensure only plugin REST tests are run for plugins {pull}53184[#53184] (issues: {issue}52114[#52114], {issue}53183[#53183])\n+\n+Machine Learning::\n+* Fix node serialization on GET df-nalytics stats without id {pull}54808[#54808] (issue: {issue}54807[#54807])\n+* Allow force stopping failed and stopping DF analytics {pull}54650[#54650]\n+* Take more care that normalize processes use unique named pipes {pull}54636[#54636] (issue: {issue}43830[#43830])\n+* Do not fail Evaluate API when the actual and predicted fields' types differ {pull}54255[#54255] (issue: {issue}54079[#54079])\n+* Get ML filters size should default to 100 {pull}54207[#54207] (issues: {issue}39976[#39976], {issue}54206[#54206])\n+* Introduce a \"starting\" datafeed state for lazy jobs {pull}53918[#53918] (issue: {issue}53763[#53763])\n+* Only retry persistence failures when the failure is intermittent and stop retrying when analytics job is stopping {pull}53725[#53725] (issue: {issue}53687[#53687])\n+* [Inference] fix number inference models returned in x-pack info API {pull}53540[#53540]\n+* Make classification evaluation metrics work when there is field mapping type mismatch {pull}53458[#53458] (issue: {issue}53485[#53485])\n+* Perform evaluation in multiple steps when necessary {pull}53295[#53295]\n+* Specifying missing_field_value value and using it instead of empty_string {pull}53108[#53108] (issue: {issue}1034[#1034])\n+* Use event.timezone in ingest pipeline from find_file_structure {pull}52720[#52720] (issue: {issue}9458[#9458])\n+* [Inference] don't return inflated definition when storing trained models {pull}52573[#52573]\n+* Validate tree feature index is within range {pull}52460[#52460]\n+* Better error when persistent task assignment disabled {pull}52014[#52014] (issue: {issue}51956[#51956])\n+* Fix possible race condition starting datafeed {pull}51646[#51646] (issues: {issue}50886[#50886], {issue}51302[#51302])\n+* Fix 2 digit year regex in find_file_structure {pull}51469[#51469]\n+* Fix possible race condition when starting datafeed {pull}51302[#51302] (issue: {issue}51285[#51285])\n+* Validate classification dependent_variable cardinality is at lea\u2026 {pull}51232[#51232]\n+* Do not copy mapping from dependent variable to prediction field in regression analysis {pull}51227[#51227]\n+* Address two edge cases for categorization.GrokPatternCreator#findBestGrokMatchFromExamples {pull}51168[#51168]\n+* Calculate results and snapshot retention using latest bucket timestamps {pull}51061[#51061]\n+\n+Mapping::\n+* Disallow duplicate `dynamic_templates` names {pull}51817[#51817] (issue: {issue}28988[#28988])\n+* Throw better exception on wrong `dynamic_templates` syntax {pull}51783[#51783] (issue: {issue}51486[#51486])\n+\n+Network::\n+* Allow proxy mode server name to be updated {pull}54107[#54107]\n+* Invoke response handler on failure to send {pull}53631[#53631]\n+* Do not log no-op reconnections at DEBUG {pull}53469[#53469]\n+* Fix RemoteConnectionManager size() method {pull}52823[#52823] (issue: {issue}52029[#52029])\n+* Remove seeds dependency for remote cluster settings {pull}52796[#52796]\n+* Add host address to BindTransportException message {pull}51269[#51269] (issue: {issue}48001[#48001])\n+\n+Percolator::\n+* Test percolate queries using `NOW` and sorting {pull}52758[#52758] (issues: {issue}52618[#52618], {issue}52748[#52748])\n+* Don't index ranges including NOW in percolator {pull}52748[#52748] (issue: {issue}52617[#52617])\n+\n+Reindex::\n+* Reindex negative TimeValue fix {pull}54057[#54057] (issue: {issue}53913[#53913])\n+* Reindex: allow comma separated source indices {pull}52044[#52044] (issue: {issue}51949[#51949])\n+\n+SQL::\n+* Fix NPE for parameterized LIKE/RLIKE {pull}53573[#53573] (issue: {issue}53557[#53557])\n+* Add support for index aliases for SYS COLUMNS command {pull}53525[#53525] (issue: {issue}31609[#31609])\n+* Fix issue with LIKE/RLIKE as painless script {pull}53495[#53495] (issue: {issue}53486[#53486])\n+* Fix column size for IP data type {pull}53056[#53056] (issue: {issue}52762[#52762])\n+* Fix sql cli sourcing of x-pack-env {pull}52613[#52613] (issue: {issue}47803[#47803])\n+* Supplement input checks on received request parameters {pull}52229[#52229]\n+* Fix issue with timezone when paginating {pull}52101[#52101] (issue: {issue}51258[#51258])\n+* Fix ORDER BY on aggregates and GROUPed BY fields {pull}51894[#51894] (issue: {issue}50355[#50355])\n+* Fix milliseconds handling in intervals {pull}51675[#51675] (issue: {issue}41635[#41635])\n+* Fix ORDER BY YEAR() function {pull}51562[#51562] (issue: {issue}51224[#51224])\n+* Change the way unsupported data types fields are handled {pull}50823[#50823]\n+* Selecting a literal from grouped by query generates error {pull}41964[#41964] (issues: {issue}41413[#41413], {issue}41951[#41951])\n+\n+Search::\n+* Fix Term Vectors with artificial docs and keyword fields {pull}53504[#53504] (issue: {issue}53494[#53494])\n+* Fix concurrent requests race over scroll context limit {pull}53449[#53449]\n+* Fix pre-sorting of shards in the can_match phase {pull}53397[#53397]\n+* Fix potential NPE in FuzzyTermsEnum {pull}53231[#53231] (issue: {issue}52894[#52894])\n+* Fix inaccurate total hit count in _search/template api {pull}53155[#53155] (issue: {issue}52801[#52801])\n+* Harden search context id {pull}53143[#53143]\n+* A regression that allowed negative scores in a script_score query was corrected.\n+  A behaviour is restored that throws an error if script_score query produces\n+  a negative score. {pull}52478[#52478] (issue: {issue}48465[#48465])\n+\n+Snapshot/Restore::\n+* Fix Non-Verbose Snapshot List Missing Empty Snapshots {pull}52433[#52433]\n+* Fix Inconsistent Shard Failure Count in Failed Snapshots {pull}51416[#51416] (issue: {issue}47550[#47550])\n+* Fix Overly Aggressive Request DeDuplication {pull}51270[#51270] (issue: {issue}51253[#51253])\n+\n+Store::\n+* Fix synchronization in ByteSizeCachingDirectory {pull}52512[#52512]\n+\n+Transform::\n+* Fixing naming in HLRC and _cat to match API content {pull}54300[#54300] (issue: {issue}53946[#53946])\n+* Transform optmize date histogram {pull}54068[#54068] (issue: {issue}54254[#54254])\n+* Add version guards around Transform hidden index settings {pull}54036[#54036] (issue: {issue}53931[#53931])\n+* Fix NPE in derive stats if shouldStopAtNextCheckpoint is set {pull}52940[#52940]\n+* Fix mapping deduction for scaled_float {pull}51990[#51990] (issue: {issue}51780[#51780])\n+* Fix stats can return old state information if security is enabled {pull}51732[#51732] (issue: {issue}51728[#51728])\n+\n+\n+\n+[[upgrade-7.7.0]]\n+[float]\n+=== Upgrades\n+\n+Authentication::\n+* Update oauth2-oidc-sdk to 7.0 {pull}52489[#52489] (issue: {issue}48409[#48409])\n+\n+Engine::\n+* Upgrade to lucene 8.5.0 release {pull}54077[#54077]\n+* Upgrade to final lucene 8.5.0 snapshot {pull}53293[#53293]\n+* Upgrade to Lucene 8.5.0-snapshot-c4475920b08 {pull}52950[#52950]\n+\n+Features/Features::\n+* Upgrade Tika to 1.23 {pull}52402[#52402]\n+\n+Features/Ingest::\n+* Upgrade Tika to 1.24 {pull}54130[#54130] (issue: {issue}52402[#52402])", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "originalPosition": 597}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNTM1NDA5", "url": "https://github.com/elastic/elasticsearch/pull/55019#pullrequestreview-391535409", "createdAt": "2020-04-10T16:32:10Z", "commit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxNjozMjoxMFrOGD_Tjg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxNjozMjoxMFrOGD_Tjg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjgzNjExMA==", "bodyText": "The PR label got mangled here for some reason.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * A regression that allowed negative scores in a script_score query was corrected.\n          \n          \n            \n              A behaviour is restored that throws an error if script_score query produces\n          \n          \n            \n              a negative score. {pull}52478[#52478] (issue: {issue}48465[#48465])\n          \n          \n            \n            * Correct boost in `script_score` query and error on negative scores {pull}52478[#52478] (issue: {issue}48465[#48465])", "url": "https://github.com/elastic/elasticsearch/pull/55019#discussion_r406836110", "createdAt": "2020-04-10T16:32:10Z", "author": {"login": "jrodewig"}, "path": "docs/reference/release-notes/7.7.asciidoc", "diffHunk": "@@ -1,22 +1,612 @@\n [[release-notes-7.7.0]]\n == {es} version 7.7.0\n \n-coming[7.7.0]\n+Also see <<breaking-changes-7.7,Breaking changes in 7.7>>.\n \n [[breaking-7.7.0]]\n [float]\n === Breaking changes\n \n+Highlighting::\n+* Highlighters skip ignored keyword values {pull}53408[#53408] (issue: {issue}43800[#43800])\n+\n+Infra/Core::\n+* Remove DEBUG-level default logging from actions {pull}51459[#51459] (issue: {issue}51198[#51198])\n+\n Mapping::\n * Dynamic mappings in indices created on 8.0 and later have stricter validation at mapping update time and\n   results in a deprecation warning for indices created in Elasticsearch 7.7.0 and later.\n-  (e.g. incorrect analyzer settings or unknown field types). {pull}51233[#51233]\n+  (e.g. incorrect analyzer settings or unknown field types). {pull}51233[#51233] (issues: {issue}17411[#17411], {issue}24419[#24419])\n \n Search::\n-* A regression that allowed negative scores in a script_score query was corrected.\n-  A behaviour is restored that throws an error if script_score query produces\n-  a negative score {pull}52478[#52478].\n+* Make range query rounding consistent {pull}50237[#50237] (issue: {issue}50009[#50009])\n * Pipeline aggregation validation errors that used to return HTTP\n   500s/Internal Server Errors now return 400/Bad Request {pull}53669[#53669].\n   As a bonus we now return a list of validation errors rather than returning\n   the first one we encounter.\n+\n+\n+\n+[[breaking-java-7.7.0]]\n+[float]\n+=== Breaking Java changes\n+\n+Infra/Core::\n+* Fix ActionListener.map exception handling {pull}50886[#50886]\n+\n+Machine Learning::\n+* Add expected input field type to trained model config {pull}53083[#53083]\n+\n+Transform::\n+* Enhance the output of preview to return full destination index details {pull}53572[#53572]\n+\n+\n+\n+[[deprecation-7.7.0]]\n+[float]\n+=== Deprecations\n+\n+Allocation::\n+* Deprecated support for delaying state recovery pending master nodes {pull}53646[#53646] (issue: {issue}51806[#51806])\n+\n+Authentication::\n+* Add warnings for invalid realm order config (#51195) {pull}51515[#51515]\n+* Deprecate timeout.tcp_read AD/LDAP realm setting {pull}47305[#47305] (issue: {issue}46028[#46028])\n+\n+Engine::\n+* Deprecate translog retention settings {pull}51588[#51588] (issues: {issue}45473[#45473], {issue}50775[#50775])\n+\n+Features/Features::\n+* Add cluster.remote.connect to deprecation info API {pull}54142[#54142] (issue: {issue}53924[#53924])\n+\n+Infra/Core::\n+* Add deprecation check for listener thread pool {pull}53438[#53438] (issues: {issue}53049[#53049], {issue}53317[#53317])\n+* Deprecate the logstash enabled setting {pull}53367[#53367]\n+* Deprecate the listener thread pool {pull}53266[#53266] (issue: {issue}53049[#53049])\n+* Deprecate creation of dot-prefixed index names except for hidden and system indices {pull}49959[#49959]\n+\n+Infra/REST API::\n+* Deprecate undocumented alternatives to the nodes hot threads API (#52640) {pull}52930[#52930] (issue: {issue}52640[#52640])\n+\n+Machine Learning::\n+* Renaming inference processor field field_mappings to new name field_map {pull}53433[#53433]\n+\n+Search::\n+* Emit deprecation warning when TermsLookup contains a type {pull}53731[#53731] (issue: {issue}41059[#41059])\n+* Deprecate BoolQueryBuilder's mustNot field {pull}53125[#53125]\n+\n+\n+\n+[[feature-7.7.0]]\n+[float]\n+=== New features\n+\n+Aggregations::\n+* Preserve metric types in top_metrics {pull}53288[#53288]\n+* Support multiple metrics in `top_metrics` agg {pull}52965[#52965] (issue: {issue}51813[#51813])\n+* Add size support to `top_metrics` {pull}52662[#52662] (issue: {issue}51813[#51813])\n+* HLRC support for string_stats {pull}52163[#52163]\n+* Add Boxplot Aggregation {pull}51948[#51948] (issue: {issue}33112[#33112])\n+\n+Analysis::\n+* Add nori_number token filter in analysis-nori {pull}53583[#53583]\n+\n+Authentication::\n+* Create API Key on behalf of other user {pull}52886[#52886] (issue: {issue}48716[#48716])\n+\n+Geo::\n+* Add support for distance queries on shape queries {pull}53468[#53468]\n+* Add support for distance queries on geo_shape queries {pull}53466[#53466] (issues: {issue}13351[#13351], {issue}39237[#39237])\n+* Add support for multipoint shape queries {pull}52564[#52564] (issue: {issue}52133[#52133])\n+* Add support for multipoint geoshape queries {pull}52133[#52133] (issue: {issue}37318[#37318])\n+\n+Infra/Core::\n+* Implement hidden indices {pull}50452[#50452] (issues: {issue}50251[#50251], {issue}50665[#50665], {issue}50762[#50762])\n+\n+Infra/Packaging::\n+* Introduce aarch64 packaging {pull}53914[#53914]\n+\n+Machine Learning::\n+* Implement ILM policy for .ml-state* indices {pull}52356[#52356] (issue: {issue}29938[#29938])\n+\n+Mapping::\n+* Introduce a `constant_keyword` field. {pull}49713[#49713]\n+\n+SQL::\n+* constant_keyword support {pull}53241[#53241] (issue: {issue}53016[#53016])\n+* Add optimisations for not-equalities {pull}51088[#51088] (issue: {issue}49637[#49637])\n+* Add support for passing query parameters in REST API calls {pull}51029[#51029] (issue: {issue}42916[#42916])\n+\n+Search::\n+* Introduce compound query {pull}52387[#52387] (issue: {issue}51967[#51967])\n+* Add a cluster setting to disallow expensive queries {pull}51385[#51385] (issue: {issue}29050[#29050])\n+* Add new x-pack endpoints to track the progress of a search asynchronously {pull}49931[#49931] (issue: {issue}49091[#49091])\n+\n+\n+\n+[[enhancement-7.7.0]]\n+[float]\n+=== Enhancements\n+\n+Aggregations::\n+* Try to save memory on aggregations {pull}53793[#53793]\n+* Speed up partial reduce of terms aggregations {pull}53216[#53216] (issue: {issue}51857[#51857])\n+* Simplify SiblingPipelineAggregator {pull}53144[#53144]\n+* Add histogram field type support to boxplot aggs {pull}52265[#52265] (issues: {issue}33112[#33112], {issue}52233[#52233])\n+* Percentiles aggregation validation checks for range {pull}51871[#51871] (issue: {issue}51808[#51808])\n+* Begin moving date_histogram to offset rounding (take two) {pull}51271[#51271] (issues: {issue}50609[#50609], {issue}50873[#50873])\n+* Password-protected Keystore Feature Branch PR {pull}51123[#51123] (issues: {issue}32691[#32691], {issue}49340[#49340])\n+* Implement top_metrics agg {pull}51155[#51155] (issue: {issue}48069[#48069])\n+* Bucket aggregation circuit breaker optimization. {pull}46751[#46751]\n+\n+Analysis::\n+* Removes old Lucene's experimental flag from analyzer documentations {pull}53217[#53217]\n+\n+Authentication::\n+* Add exception metadata for disabled features {pull}52811[#52811] (issues: {issue}47759[#47759], {issue}52311[#52311], {issue}55255[#55255])\n+* Validate role templates before saving role mapping {pull}52636[#52636] (issue: {issue}48773[#48773])\n+* Add support for secondary authentication {pull}52093[#52093]\n+* Expose API key name to the ingest pipeline {pull}51305[#51305] (issues: {issue}46847[#46847], {issue}49106[#49106])\n+* Disallow Password Change when authenticated by Token {pull}49694[#49694] (issue: {issue}48752[#48752])\n+\n+Authorization::\n+* Allow kibana_system to create and invalidate API keys on behalf of other users {pull}53824[#53824] (issue: {issue}48716[#48716])\n+* Add \"grant_api_key\" cluster privilege {pull}53527[#53527] (issues: {issue}48716[#48716], {issue}52886[#52886])\n+* Giving kibana user privileges to create custom link index {pull}53221[#53221] (issue: {issue}59305[#59305])\n+* [APM] Allow kibana to collect APM telemetry in background task {pull}52917[#52917] (issue: {issue}50757[#50757])\n+* Add the new 'maintenance' privilege containing 4 actions (#29998) {pull}50643[#50643]\n+\n+Cluster Coordination::\n+* Describe STALE_STATE_CONFIG in ClusterFormationFH {pull}53878[#53878] (issue: {issue}53734[#53734])\n+\n+Distributed::\n+* Introduce formal role for remote cluster client {pull}53924[#53924]\n+* Shortcut query phase using the results of other shards {pull}51852[#51852] (issues: {issue}49601[#49601], {issue}51708[#51708])\n+* Flush instead of synced-flush inactive shards {pull}49126[#49126] (issues: {issue}31965[#31965], {issue}48430[#48430])\n+\n+Engine::\n+* Restore off-heap loading for term dictionary in ReadOnlyEngine {pull}53713[#53713] (issues: {issue}43158[#43158], {issue}51247[#51247])\n+* Separate translog from index deletion conditions {pull}52556[#52556]\n+* Always rewrite search shard request outside of the search thread pool {pull}51708[#51708] (issue: {issue}49601[#49601])\n+* Move the terms index of `_id` off-heap. {pull}52405[#52405] (issue: {issue}42838[#42838])\n+* Cache completion stats between refreshes {pull}51991[#51991] (issue: {issue}51915[#51915])\n+* Use local checkpoint to calculate min translog gen for recovery {pull}51905[#51905] (issue: {issue}49970[#49970])\n+\n+Features/CAT APIs::\n+* /_cat/shards support path stats {pull}53461[#53461]\n+* Allow _cat indices & aliases to use indices options {pull}53248[#53248] (issue: {issue}52304[#52304])\n+\n+Features/Features::\n+* Enable deprecation checks for removed settings {pull}53317[#53317]\n+\n+Features/ILM+SLM::\n+* Hide ILM & SLM history aliases {pull}53564[#53564]\n+* Avoid race condition in ILMHistorySotre {pull}53039[#53039] (issues: {issue}50353[#50353], {issue}52853[#52853])\n+* Make FreezeStep retryable {pull}52540[#52540]\n+* Make DeleteStep retryable {pull}52494[#52494]\n+* Allow forcemerge in the hot phase for ILM policies {pull}52073[#52073] (issue: {issue}43165[#43165])\n+* Stop policy on last PhaseCompleteStep instead of TerminalPolic\u2026 {pull}51631[#51631] (issue: {issue}48431[#48431])\n+* Convert ILM and SLM histories into hidden indices {pull}51456[#51456]\n+* Make UpdateSettingsStep retryable {pull}51235[#51235] (issues: {issue}44135[#44135], {issue}48183[#48183])\n+* Expose master timeout for ILM actions {pull}51130[#51130] (issue: {issue}44136[#44136])\n+* Wait for active shards on rolled index in a separate step {pull}50718[#50718] (issues: {issue}44135[#44135], {issue}48183[#48183])\n+* Adding best_compression {pull}49974[#49974]\n+\n+Features/Indices APIs::\n+* Add IndexTemplateV2 to MetaData {pull}53753[#53753] (issue: {issue}53101[#53101])\n+* Add ComponentTemplate to MetaData {pull}53290[#53290] (issue: {issue}53101[#53101])\n+\n+Features/Ingest::\n+* Reduce log level for pipeline failure {pull}54097[#54097] (issue: {issue}51459[#51459])\n+* Support array for all string ingest processors {pull}53343[#53343] (issue: {issue}51087[#51087])\n+* Add empty_value parameter to CSV processor {pull}51567[#51567]\n+* Add pipeline name to ingest metadata {pull}50467[#50467] (issue: {issue}42106[#42106])\n+\n+Features/Java High Level REST Client::\n+* SourceExists HLRC uses GetSourceRequest instead of GetRequest {pull}51789[#51789] (issue: {issue}50885[#50885])\n+* Add async_search.submit to HLRC {pull}53592[#53592] (issue: {issue}49091[#49091])\n+* Add Get Source API to the HLRC {pull}50885[#50885] (issue: {issue}47678[#47678])\n+\n+Features/Monitoring::\n+* Secure password for monitoring HTTP exporter {pull}50919[#50919] (issue: {issue}50197[#50197])\n+* Validate SSL settings at parse time {pull}49196[#49196] (issue: {issue}47711[#47711])\n+\n+Features/Stats::\n+* Add analysis components and mapping types to the usage API. {pull}51031[#51031]\n+\n+Features/Watcher::\n+* Make watch history indices hidden {pull}52962[#52962] (issue: {issue}50251[#50251])\n+* Upgrade to the latest OWASP HTML sanitizer {pull}50765[#50765] (issue: {issue}50395[#50395])\n+\n+Infra/Core::\n+* Enable helpful null pointer exceptions {pull}54853[#54853]\n+* Allow keystore add to handle multiple settings {pull}54229[#54229] (issue: {issue}54191[#54191])\n+* Report parser name and location in XContent deprecation warnings {pull}53805[#53805]\n+* Report parser name and location in XContent deprecation warnings {pull}53752[#53752]\n+* Deprecate all variants of a ParseField with no replacement {pull}53722[#53722]\n+* Add a helper method to parse maps of objects {pull}53096[#53096]\n+* Allow specifying an exclusive set of fields on ObjectParser {pull}52893[#52893]\n+* Support joda style date patterns in 7.x {pull}52555[#52555]\n+* Implement hidden aliases {pull}52547[#52547] (issue: {issue}52304[#52304])\n+* Allow ObjectParsers to specify required sets of fields {pull}49661[#49661] (issue: {issue}48824[#48824])\n+\n+Infra/Logging::\n+* Capture stdout and stderr to log4j log {pull}50259[#50259] (issue: {issue}50156[#50156])\n+\n+Infra/Packaging::\n+* Introduce aarch64 Docker image {pull}53936[#53936] (issue: {issue}53914[#53914])\n+* Introduce jvm.options.d for customizing JVM options {pull}51882[#51882] (issue: {issue}51626[#51626])\n+\n+Infra/Plugins::\n+* Allow sha512 checksum without filename for maven plugins {pull}52668[#52668] (issue: {issue}52413[#52413])\n+\n+Infra/Scripting::\n+* Scripting: Context script cache unlimited compile {pull}53769[#53769] (issue: {issue}50152[#50152])\n+* Scripting: Increase ingest script cache defaults {pull}53765[#53765] (issue: {issue}50152[#50152])\n+* Scripting: Per-context script cache, default off (#52855) {pull}53756[#53756] (issues: {issue}50152[#50152], {issue}52855[#52855])\n+* Scripting: Per-context script cache, default off {pull}52855[#52855] (issue: {issue}50152[#50152])\n+* Improve Painless compilation performance for nested conditionals {pull}52056[#52056]\n+* Scripting: Add char position of script errors {pull}51069[#51069] (issue: {issue}50993[#50993])\n+\n+Infra/Settings::\n+* Allow keystore add-file to handle multiple settings {pull}54240[#54240] (issue: {issue}54191[#54191])\n+* Settings: AffixSettings as validator dependencies {pull}52973[#52973] (issue: {issue}52933[#52933])\n+\n+License::\n+* Simplify ml license checking with XpackLicenseState internals {pull}52684[#52684] (issue: {issue}52115[#52115])\n+* License removal leads back to a basic license {pull}52407[#52407] (issue: {issue}45022[#45022])\n+* Refactor license checking {pull}52118[#52118] (issue: {issue}51864[#51864])\n+* Add enterprise mode and refactor {pull}51864[#51864] (issue: {issue}51081[#51081])\n+\n+Machine Learning::\n+* Stratified cross validation split for classification {pull}54087[#54087]\n+* Data frame analytics data counts {pull}53998[#53998]\n+* Verify that the field is aggregatable before attempting cardinality aggregation {pull}53874[#53874] (issue: {issue}53876[#53876])\n+* Adds multi-class feature importance support {pull}53803[#53803]\n+* Data frame analytics analysis stats {pull}53788[#53788]\n+* Add a model memory estimation endpoint for anomaly detection {pull}53507[#53507] (issue: {issue}53219[#53219])\n+* [Inference] adds new default_field_map field to trained models {pull}53294[#53294]\n+* Improve DF analytics audits and logging {pull}53179[#53179]\n+* Add indices_options to datafeed config and update {pull}52793[#52793] (issue: {issue}48056[#48056])\n+* Parse and report memory usage for DF Analytics {pull}52778[#52778]\n+* Adds the class_assignment_objective parameter to classification {pull}52763[#52763] (issue: {issue}52427[#52427])\n+* Add reason to DataFrameAnalyticsTask updateState log message {pull}52659[#52659] (issue: {issue}52654[#52654])\n+* [Inference] Add support for multi-value leaves to the tree model {pull}52531[#52531]\n+* Make ml internal indices hidden {pull}52423[#52423] (issue: {issue}52420[#52420])\n+* Add _cat/ml/data_frame/analytics API {pull}52260[#52260] (issue: {issue}51413[#51413])\n+* Adds feature importance option to inference processor {pull}52218[#52218]\n+* Switch poor categorization audit warning to use status field {pull}52195[#52195] (issues: {issue}50749[#50749], {issue}51146[#51146], {issue}51879[#51879])\n+* Retry persisting DF Analytics results {pull}52048[#52048]\n+* Improve multiline_start_pattern for CSV in find_file_structure {pull}51737[#51737]\n+* Add _cat/ml/trained_models API {pull}51529[#51529] (issue: {issue}51414[#51414])\n+* Add GET _cat/ml/datafeeds {pull}51500[#51500] (issue: {issue}51411[#51411])\n+* Use CSV ingest processor in find_file_structure ingest pipeline {pull}51492[#51492] (issue: {issue}56038[#56038])\n+* Add _cat/ml/anomaly_detectors API {pull}51364[#51364]\n+* [Inference] add tags url param to GET {pull}51330[#51330]\n+* Add parsers for inference configuration classes {pull}51300[#51300]\n+* Make datafeeds work with nanosecond time fields {pull}51180[#51180] (issue: {issue}49889[#49889])\n+* Add audit warning for 1000 categories found early in job {pull}51146[#51146] (issue: {issue}50749[#50749])\n+* Adds support for a global calendars {pull}50372[#50372] (issue: {issue}45013[#45013])\n+\n+Mapping::\n+* Wildcard field - add normalizer support {pull}53851[#53851]\n+* Wildcard field - added case insensitive search option {pull}53814[#53814]\n+* Append index name for the source of the cluster put-mapping task {pull}52690[#52690]\n+\n+Network::\n+* Give helpful message on remote connections disabled {pull}53690[#53690]\n+* Add server name to remote info API {pull}53634[#53634]\n+* Log when probe succeeds but full connection fails {pull}51304[#51304]\n+* Encrypt generated key with AES {pull}51019[#51019] (issue: {issue}50843[#50843])\n+\n+Ranking::\n+* Adds recall@k metric to rank eval API {pull}52577[#52577] (issue: {issue}51676[#51676])\n+\n+SQL::\n+* Jdbc debugging enhancement {pull}53880[#53880]\n+* Transfer version compatibility decision to the server {pull}53082[#53082] (issue: {issue}52766[#52766])\n+* Use a proper error message for queries directed at empty mapping indices {pull}52967[#52967] (issue: {issue}52865[#52865])\n+* Use calendar_interval of 1d for HISTOGRAMs with 1 DAY intervals {pull}52749[#52749] (issue: {issue}52713[#52713])\n+* Use a calendar interval for histograms over 1 month intervals {pull}52586[#52586] (issue: {issue}51538[#51538])\n+* Make parsing of date more lenient {pull}52137[#52137] (issue: {issue}49379[#49379])\n+* Enhance timestamp escaped literal parsing {pull}52097[#52097] (issue: {issue}46069[#46069])\n+* Handle uberjar scenario where the ES jdbc driver file is bundled in another jar {pull}51856[#51856] (issue: {issue}50201[#50201])\n+* Verify Full-Text Search functions not allowed in SELECT {pull}51568[#51568] (issue: {issue}47446[#47446])\n+* Extend the optimisations for equalities {pull}50792[#50792] (issue: {issue}49637[#49637])\n+* Add trace logging for search responses coming from server {pull}50530[#50530]\n+* Extend DATE_TRUNC to also operate on intervals(elastic - #46632 ) {pull}47720[#47720] (issue: {issue}46632[#46632])\n+* Enchance output of explain for optimized plan {pull}33718[#33718]\n+\n+Search::\n+* HLRC: Don't send defaults for SubmitAsyncSearchRequest {pull}54200[#54200]\n+* Reduce performance impact of ExitableDirectoryReader {pull}53978[#53978] (issues: {issue}52822[#52822], {issue}53166[#53166], {issue}53496[#53496])\n+* Add heuristics to compute pre_filter_shard_size when unspecified {pull}53873[#53873] (issue: {issue}39835[#39835])\n+* Add async_search get and delete APIs to HLRC {pull}53828[#53828] (issue: {issue}49091[#49091])\n+* Increase step between checks for cancellation {pull}53712[#53712] (issues: {issue}52822[#52822], {issue}53496[#53496])\n+* Refine SearchProgressListener internal API {pull}53373[#53373]\n+* Check for query cancellation during rewrite {pull}53166[#53166] (issue: {issue}52822[#52822])\n+* Implement Cancellable DirectoryReader {pull}52822[#52822]\n+* Address MinAndMax generics warnings {pull}52642[#52642] (issue: {issue}49092[#49092])\n+* Clarify when shard iterators get sorted {pull}52633[#52633]\n+* Generalize how queries on `_index` are handled at rewrite time {pull}52486[#52486] (issues: {issue}49254[#49254], {issue}49713[#49713])\n+* Remove the query builder serialization from QueryShardException message {pull}51885[#51885] (issues: {issue}48910[#48910], {issue}51843[#51843])\n+* Short circuited to MatchNone for non-participating  slice {pull}51207[#51207]\n+* Add \"did you mean\" to unknown queries {pull}51177[#51177]\n+* Exclude unmapped fields during max clause limit checking for querying {pull}49523[#49523] (issue: {issue}49002[#49002])\n+\n+Security::\n+* Add error message in JSON response {pull}54389[#54389]\n+\n+Snapshot/Restore::\n+* Use Azure Bulk Deletes in Azure Repository {pull}53919[#53919] (issue: {issue}53865[#53865])\n+* Only link fd* files during source-only snapshot {pull}53463[#53463] (issue: {issue}50231[#50231])\n+* Add Blob Download Retries to GCS Repository {pull}52479[#52479] (issues: {issue}46589[#46589], {issue}52319[#52319])\n+* Better Incrementality for Snapshots of Unchanged Shards {pull}52182[#52182]\n+* Add Region and Signer Algorithm Overrides to S3 Repos {pull}52112[#52112] (issue: {issue}51861[#51861])\n+* Allow Parallel Snapshot Restore And Delete {pull}51608[#51608] (issue: {issue}41463[#41463])\n+\n+Store::\n+* HybridDirectory should mmap postings. {pull}52641[#52641]\n+\n+Transform::\n+* Transition Transforms to using hidden indices for notifcations index {pull}53773[#53773] (issue: {issue}53762[#53762])\n+* [Rollup] add processing stats to record the time spent for processing results {pull}53770[#53770]\n+* Create GET _cat/transforms API Issue {pull}53643[#53643] (issue: {issue}51412[#51412])\n+* Add support for script in group_by {pull}53167[#53167] (issue: {issue}43152[#43152])\n+* Implement node.transform to control where to run a transform {pull}52712[#52712] (issues: {issue}48734[#48734], {issue}50033[#50033], {issue}52200[#52200])\n+* Add support for filter aggregation {pull}52483[#52483] (issue: {issue}52151[#52151])\n+* Provide exponential_avg* stats for batch transforms {pull}52041[#52041] (issue: {issue}52037[#52037])\n+* Improve irrecoverable error detection - part 2 {pull}52003[#52003] (issue: {issue}51820[#51820])\n+* Mark transform API's stable {pull}51862[#51862]\n+* Improve irrecoverable error detection {pull}51820[#51820] (issue: {issue}50135[#50135])\n+* Add support for percentile aggs {pull}51808[#51808] (issue: {issue}51663[#51663])\n+* Disallow fieldnames with a dot at start and/or end {pull}51369[#51369]\n+* Avoid mapping problems with index templates {pull}51368[#51368] (issue: {issue}51321[#51321])\n+* Handle permanent bulk indexing errors {pull}51307[#51307] (issue: {issue}50122[#50122])\n+* Improve force stop robustness in case of an error {pull}51072[#51072]\n+\n+\n+\n+[[bug-7.7.0]]\n+[float]\n+=== Bug fixes\n+\n+Aggregations::\n+* Fix date_nanos in composite aggs {pull}53315[#53315] (issue: {issue}53168[#53168])\n+* Fix composite agg sort bug {pull}53296[#53296] (issue: {issue}52480[#52480])\n+* Decode max and min optimization more carefully {pull}52336[#52336] (issue: {issue}52220[#52220])\n+* Fix a DST error in date_histogram {pull}52016[#52016] (issue: {issue}50265[#50265])\n+* Use #name() instead of #simpleName() when generating doc values {pull}51920[#51920] (issues: {issue}50307[#50307], {issue}51847[#51847])\n+* Fix a sneaky bug in rare_terms {pull}51868[#51868] (issue: {issue}51020[#51020])\n+* Support time_zone on composite's date_histogram {pull}51172[#51172] (issues: {issue}45199[#45199], {issue}45200[#45200])\n+\n+Allocation::\n+* Improve performance of shards limits decider {pull}53577[#53577] (issue: {issue}53559[#53559])\n+\n+Analysis::\n+* Mask wildcard query special characters on keyword queries {pull}53127[#53127] (issue: {issue}46300[#46300])\n+* Fix caching for PreConfiguredTokenFilter {pull}50912[#50912] (issue: {issue}50734[#50734])\n+\n+Audit::\n+* Logfile audit settings validation {pull}52537[#52537] (issues: {issue}47038[#47038], {issue}47711[#47711], {issue}52357[#52357])\n+\n+Authentication::\n+* Fix potential bug in concurrent token refresh support {pull}53668[#53668]\n+* Respect runas realm for ApiKey security operations {pull}52178[#52178] (issue: {issue}51975[#51975])\n+* Preserve ApiKey credentials for async verification {pull}51244[#51244]\n+* Don't fallback to anonymous for tokens/apikeys {pull}51042[#51042] (issue: {issue}50171[#50171])\n+* Fail gracefully on invalid token strings {pull}51014[#51014]\n+\n+Authorization::\n+* Explicitly require that delegate API keys have no privileges {pull}53647[#53647]\n+* Allow _rollup_search with read privilege {pull}52043[#52043] (issue: {issue}50245[#50245])\n+\n+CCR::\n+* Put CCR tasks on (data && remote cluster clients) {pull}54146[#54146] (issue: {issue}53924[#53924])\n+* Handle no such remote cluster exception in ccr {pull}53415[#53415] (issue: {issue}53225[#53225])\n+* Fix shard follow task cleaner under security {pull}52347[#52347] (issues: {issue}44702[#44702], {issue}51971[#51971])\n+\n+CRUD::\n+* Force execution of finish shard bulk request {pull}51957[#51957] (issue: {issue}51904[#51904])\n+* Return 429 status code when there's a read_only cluster block {pull}50166[#50166] (issue: {issue}49393[#49393])\n+\n+Cluster Coordination::\n+* Use special XContent registry for node tool {pull}54050[#54050] (issue: {issue}53549[#53549])\n+* Allow static cluster.max_voting_config_exclusions {pull}53717[#53717] (issue: {issue}53455[#53455])\n+* Allow joining node to trigger term bump {pull}53338[#53338] (issue: {issue}53271[#53271])\n+* Ignore timeouts with single-node discovery {pull}52159[#52159]\n+\n+Distributed::\n+* Execute retention lease syncs under system context {pull}53838[#53838] (issues: {issue}48430[#48430], {issue}53751[#53751])\n+* Exclude nested documents in LuceneChangesSnapshot {pull}51279[#51279]\n+\n+Engine::\n+* Fix doc_stats and segment_stats of ReadOnlyEngine {pull}53345[#53345] (issues: {issue}51303[#51303], {issue}51331[#51331])\n+* Do not wrap soft-deletes reader for segment stats {pull}51331[#51331] (issues: {issue}51192[#51192], {issue}51303[#51303])\n+* Account soft-deletes in FrozenEngine {pull}51192[#51192] (issue: {issue}50775[#50775])\n+\n+Features/CAT APIs::\n+* Fix NPE in RestPluginsAction {pull}52620[#52620] (issue: {issue}45321[#45321])\n+\n+Features/ILM+SLM::\n+* Disallow negative TimeValues {pull}53913[#53913] (issue: {issue}54041[#54041])\n+* Fix null config in SnapshotLifecyclePolicy.toRequest {pull}53328[#53328] (issues: {issue}44465[#44465], {issue}53171[#53171])\n+* Freeze step retry when not acknowledged {pull}53287[#53287]\n+* Make the set-single-node-allocation retryable (#52077) {pull}52138[#52138] (issue: {issue}52077[#52077])\n+* Make the set-single-node-allocation retryable {pull}52077[#52077] (issue: {issue}43401[#43401])\n+* Fix the init step to actually be retryable {pull}52076[#52076]\n+\n+Features/Ingest::\n+* Fix ingest pipeline _simulate api with empty docs never returns a res\u2026 {pull}52937[#52937] (issue: {issue}52833[#52833])\n+* Handle errors when evaluating if conditions in processors {pull}52543[#52543] (issue: {issue}52339[#52339])\n+* Fix delete enrich policy bug {pull}52179[#52179] (issue: {issue}51228[#51228])\n+* Fix ignore_missing in CsvProcessor {pull}51600[#51600]\n+* Missing suffix for German Month \"Juli\" in Grok Pattern MONTH (#51579) {pull}51591[#51591] (issue: {issue}51579[#51579])\n+* Don't overwrite target field with SetSecurityUserProcessor {pull}51454[#51454] (issue: {issue}51428[#51428])\n+\n+Features/Java High Level REST Client::\n+* Add unsupported parameters to HLRC search request {pull}53745[#53745]\n+* Fix AbstractBulkByScrollRequest slices parameter via Rest {pull}53068[#53068] (issue: {issue}53044[#53044])\n+* Send the fields param via body instead of URL params (elastic#42232) {pull}48840[#48840] (issues: {issue}42232[#42232], {issue}42877[#42877])\n+\n+Features/Java Low Level REST Client::\n+* Fix roles parsing in client nodes sniffer {pull}52888[#52888] (issue: {issue}52864[#52864])\n+\n+Features/Monitoring::\n+* Fix NPE in cluster state collector for monitoring {pull}52371[#52371] (issue: {issue}52317[#52317])\n+\n+Features/Stats::\n+* Switch to AtomicLong for \"IngestCurrent\" metric to prevent negative values {pull}52581[#52581] (issues: {issue}52406[#52406], {issue}52411[#52411])\n+\n+Features/Watcher::\n+* Disable Watcher script optimization for stored scripts {pull}53497[#53497] (issue: {issue}40212[#40212])\n+* The watcher indexing listener didn't handle document level exceptions. {pull}51466[#51466] (issue: {issue}32299[#32299])\n+\n+Geo::\n+* Handle properly indexing rectangles that crosses the dateline {pull}53810[#53810]\n+\n+Highlighting::\n+* Fix highlighter support in PinnedQuery and added test {pull}53716[#53716] (issue: {issue}53699[#53699])\n+\n+Infra/Core::\n+* Fix Joda compatibility in stream protocol {pull}53823[#53823] (issue: {issue}53586[#53586])\n+* Avoid self-suppression on grouped action listener {pull}53262[#53262] (issue: {issue}53174[#53174])\n+* Use correct package for `VM` class {pull}52803[#52803] (issue: {issue}47210[#47210])\n+* Ignore virtual ethernet devices that disappear {pull}51581[#51581] (issue: {issue}49914[#49914])\n+* Fix ingest timezone logic {pull}51215[#51215] (issue: {issue}51108[#51108])\n+\n+Infra/Logging::\n+* Fix LoggingOutputStream to work on windows {pull}51779[#51779] (issue: {issue}51532[#51532])\n+\n+Infra/Packaging::\n+* Handle special characters and spaces in JAVA_HOME path in elasticsearch-service.bat {pull}52676[#52676]\n+* Limit _FILE env var support to specific vars {pull}52525[#52525] (issue: {issue}52503[#52503])\n+* Always set default ES_PATH_CONF for package scriptlets {pull}51827[#51827] (issues: {issue}50246[#50246], {issue}50631[#50631])\n+\n+Infra/Plugins::\n+* Ensure only plugin REST tests are run for plugins {pull}53184[#53184] (issues: {issue}52114[#52114], {issue}53183[#53183])\n+\n+Machine Learning::\n+* Fix node serialization on GET df-nalytics stats without id {pull}54808[#54808] (issue: {issue}54807[#54807])\n+* Allow force stopping failed and stopping DF analytics {pull}54650[#54650]\n+* Take more care that normalize processes use unique named pipes {pull}54636[#54636] (issue: {issue}43830[#43830])\n+* Do not fail Evaluate API when the actual and predicted fields' types differ {pull}54255[#54255] (issue: {issue}54079[#54079])\n+* Get ML filters size should default to 100 {pull}54207[#54207] (issues: {issue}39976[#39976], {issue}54206[#54206])\n+* Introduce a \"starting\" datafeed state for lazy jobs {pull}53918[#53918] (issue: {issue}53763[#53763])\n+* Only retry persistence failures when the failure is intermittent and stop retrying when analytics job is stopping {pull}53725[#53725] (issue: {issue}53687[#53687])\n+* [Inference] fix number inference models returned in x-pack info API {pull}53540[#53540]\n+* Make classification evaluation metrics work when there is field mapping type mismatch {pull}53458[#53458] (issue: {issue}53485[#53485])\n+* Perform evaluation in multiple steps when necessary {pull}53295[#53295]\n+* Specifying missing_field_value value and using it instead of empty_string {pull}53108[#53108] (issue: {issue}1034[#1034])\n+* Use event.timezone in ingest pipeline from find_file_structure {pull}52720[#52720] (issue: {issue}9458[#9458])\n+* [Inference] don't return inflated definition when storing trained models {pull}52573[#52573]\n+* Validate tree feature index is within range {pull}52460[#52460]\n+* Better error when persistent task assignment disabled {pull}52014[#52014] (issue: {issue}51956[#51956])\n+* Fix possible race condition starting datafeed {pull}51646[#51646] (issues: {issue}50886[#50886], {issue}51302[#51302])\n+* Fix 2 digit year regex in find_file_structure {pull}51469[#51469]\n+* Fix possible race condition when starting datafeed {pull}51302[#51302] (issue: {issue}51285[#51285])\n+* Validate classification dependent_variable cardinality is at lea\u2026 {pull}51232[#51232]\n+* Do not copy mapping from dependent variable to prediction field in regression analysis {pull}51227[#51227]\n+* Address two edge cases for categorization.GrokPatternCreator#findBestGrokMatchFromExamples {pull}51168[#51168]\n+* Calculate results and snapshot retention using latest bucket timestamps {pull}51061[#51061]\n+\n+Mapping::\n+* Disallow duplicate `dynamic_templates` names {pull}51817[#51817] (issue: {issue}28988[#28988])\n+* Throw better exception on wrong `dynamic_templates` syntax {pull}51783[#51783] (issue: {issue}51486[#51486])\n+\n+Network::\n+* Allow proxy mode server name to be updated {pull}54107[#54107]\n+* Invoke response handler on failure to send {pull}53631[#53631]\n+* Do not log no-op reconnections at DEBUG {pull}53469[#53469]\n+* Fix RemoteConnectionManager size() method {pull}52823[#52823] (issue: {issue}52029[#52029])\n+* Remove seeds dependency for remote cluster settings {pull}52796[#52796]\n+* Add host address to BindTransportException message {pull}51269[#51269] (issue: {issue}48001[#48001])\n+\n+Percolator::\n+* Test percolate queries using `NOW` and sorting {pull}52758[#52758] (issues: {issue}52618[#52618], {issue}52748[#52748])\n+* Don't index ranges including NOW in percolator {pull}52748[#52748] (issue: {issue}52617[#52617])\n+\n+Reindex::\n+* Reindex negative TimeValue fix {pull}54057[#54057] (issue: {issue}53913[#53913])\n+* Reindex: allow comma separated source indices {pull}52044[#52044] (issue: {issue}51949[#51949])\n+\n+SQL::\n+* Fix NPE for parameterized LIKE/RLIKE {pull}53573[#53573] (issue: {issue}53557[#53557])\n+* Add support for index aliases for SYS COLUMNS command {pull}53525[#53525] (issue: {issue}31609[#31609])\n+* Fix issue with LIKE/RLIKE as painless script {pull}53495[#53495] (issue: {issue}53486[#53486])\n+* Fix column size for IP data type {pull}53056[#53056] (issue: {issue}52762[#52762])\n+* Fix sql cli sourcing of x-pack-env {pull}52613[#52613] (issue: {issue}47803[#47803])\n+* Supplement input checks on received request parameters {pull}52229[#52229]\n+* Fix issue with timezone when paginating {pull}52101[#52101] (issue: {issue}51258[#51258])\n+* Fix ORDER BY on aggregates and GROUPed BY fields {pull}51894[#51894] (issue: {issue}50355[#50355])\n+* Fix milliseconds handling in intervals {pull}51675[#51675] (issue: {issue}41635[#41635])\n+* Fix ORDER BY YEAR() function {pull}51562[#51562] (issue: {issue}51224[#51224])\n+* Change the way unsupported data types fields are handled {pull}50823[#50823]\n+* Selecting a literal from grouped by query generates error {pull}41964[#41964] (issues: {issue}41413[#41413], {issue}41951[#41951])\n+\n+Search::\n+* Fix Term Vectors with artificial docs and keyword fields {pull}53504[#53504] (issue: {issue}53494[#53494])\n+* Fix concurrent requests race over scroll context limit {pull}53449[#53449]\n+* Fix pre-sorting of shards in the can_match phase {pull}53397[#53397]\n+* Fix potential NPE in FuzzyTermsEnum {pull}53231[#53231] (issue: {issue}52894[#52894])\n+* Fix inaccurate total hit count in _search/template api {pull}53155[#53155] (issue: {issue}52801[#52801])\n+* Harden search context id {pull}53143[#53143]\n+* A regression that allowed negative scores in a script_score query was corrected.\n+  A behaviour is restored that throws an error if script_score query produces\n+  a negative score. {pull}52478[#52478] (issue: {issue}48465[#48465])", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "originalPosition": 561}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNTM2NTAx", "url": "https://github.com/elastic/elasticsearch/pull/55019#pullrequestreview-391536501", "createdAt": "2020-04-10T16:34:25Z", "commit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxNjozNDoyNVrOGD_XKA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxNjozNDoyNVrOGD_XKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjgzNzAzMg==", "bodyText": "The labels are redundant here.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Reindex negative TimeValue fix {pull}54057[#54057] (issue: {issue}53913[#53913])\n          \n          \n            \n            * Reindex: allow comma separated source indices {pull}52044[#52044] (issue: {issue}51949[#51949])\n          \n          \n            \n            * Negative TimeValue fix {pull}54057[#54057] (issue: {issue}53913[#53913])\n          \n          \n            \n            * Allow comma separated source indices {pull}52044[#52044] (issue: {issue}51949[#51949])", "url": "https://github.com/elastic/elasticsearch/pull/55019#discussion_r406837032", "createdAt": "2020-04-10T16:34:25Z", "author": {"login": "jrodewig"}, "path": "docs/reference/release-notes/7.7.asciidoc", "diffHunk": "@@ -1,22 +1,612 @@\n [[release-notes-7.7.0]]\n == {es} version 7.7.0\n \n-coming[7.7.0]\n+Also see <<breaking-changes-7.7,Breaking changes in 7.7>>.\n \n [[breaking-7.7.0]]\n [float]\n === Breaking changes\n \n+Highlighting::\n+* Highlighters skip ignored keyword values {pull}53408[#53408] (issue: {issue}43800[#43800])\n+\n+Infra/Core::\n+* Remove DEBUG-level default logging from actions {pull}51459[#51459] (issue: {issue}51198[#51198])\n+\n Mapping::\n * Dynamic mappings in indices created on 8.0 and later have stricter validation at mapping update time and\n   results in a deprecation warning for indices created in Elasticsearch 7.7.0 and later.\n-  (e.g. incorrect analyzer settings or unknown field types). {pull}51233[#51233]\n+  (e.g. incorrect analyzer settings or unknown field types). {pull}51233[#51233] (issues: {issue}17411[#17411], {issue}24419[#24419])\n \n Search::\n-* A regression that allowed negative scores in a script_score query was corrected.\n-  A behaviour is restored that throws an error if script_score query produces\n-  a negative score {pull}52478[#52478].\n+* Make range query rounding consistent {pull}50237[#50237] (issue: {issue}50009[#50009])\n * Pipeline aggregation validation errors that used to return HTTP\n   500s/Internal Server Errors now return 400/Bad Request {pull}53669[#53669].\n   As a bonus we now return a list of validation errors rather than returning\n   the first one we encounter.\n+\n+\n+\n+[[breaking-java-7.7.0]]\n+[float]\n+=== Breaking Java changes\n+\n+Infra/Core::\n+* Fix ActionListener.map exception handling {pull}50886[#50886]\n+\n+Machine Learning::\n+* Add expected input field type to trained model config {pull}53083[#53083]\n+\n+Transform::\n+* Enhance the output of preview to return full destination index details {pull}53572[#53572]\n+\n+\n+\n+[[deprecation-7.7.0]]\n+[float]\n+=== Deprecations\n+\n+Allocation::\n+* Deprecated support for delaying state recovery pending master nodes {pull}53646[#53646] (issue: {issue}51806[#51806])\n+\n+Authentication::\n+* Add warnings for invalid realm order config (#51195) {pull}51515[#51515]\n+* Deprecate timeout.tcp_read AD/LDAP realm setting {pull}47305[#47305] (issue: {issue}46028[#46028])\n+\n+Engine::\n+* Deprecate translog retention settings {pull}51588[#51588] (issues: {issue}45473[#45473], {issue}50775[#50775])\n+\n+Features/Features::\n+* Add cluster.remote.connect to deprecation info API {pull}54142[#54142] (issue: {issue}53924[#53924])\n+\n+Infra/Core::\n+* Add deprecation check for listener thread pool {pull}53438[#53438] (issues: {issue}53049[#53049], {issue}53317[#53317])\n+* Deprecate the logstash enabled setting {pull}53367[#53367]\n+* Deprecate the listener thread pool {pull}53266[#53266] (issue: {issue}53049[#53049])\n+* Deprecate creation of dot-prefixed index names except for hidden and system indices {pull}49959[#49959]\n+\n+Infra/REST API::\n+* Deprecate undocumented alternatives to the nodes hot threads API (#52640) {pull}52930[#52930] (issue: {issue}52640[#52640])\n+\n+Machine Learning::\n+* Renaming inference processor field field_mappings to new name field_map {pull}53433[#53433]\n+\n+Search::\n+* Emit deprecation warning when TermsLookup contains a type {pull}53731[#53731] (issue: {issue}41059[#41059])\n+* Deprecate BoolQueryBuilder's mustNot field {pull}53125[#53125]\n+\n+\n+\n+[[feature-7.7.0]]\n+[float]\n+=== New features\n+\n+Aggregations::\n+* Preserve metric types in top_metrics {pull}53288[#53288]\n+* Support multiple metrics in `top_metrics` agg {pull}52965[#52965] (issue: {issue}51813[#51813])\n+* Add size support to `top_metrics` {pull}52662[#52662] (issue: {issue}51813[#51813])\n+* HLRC support for string_stats {pull}52163[#52163]\n+* Add Boxplot Aggregation {pull}51948[#51948] (issue: {issue}33112[#33112])\n+\n+Analysis::\n+* Add nori_number token filter in analysis-nori {pull}53583[#53583]\n+\n+Authentication::\n+* Create API Key on behalf of other user {pull}52886[#52886] (issue: {issue}48716[#48716])\n+\n+Geo::\n+* Add support for distance queries on shape queries {pull}53468[#53468]\n+* Add support for distance queries on geo_shape queries {pull}53466[#53466] (issues: {issue}13351[#13351], {issue}39237[#39237])\n+* Add support for multipoint shape queries {pull}52564[#52564] (issue: {issue}52133[#52133])\n+* Add support for multipoint geoshape queries {pull}52133[#52133] (issue: {issue}37318[#37318])\n+\n+Infra/Core::\n+* Implement hidden indices {pull}50452[#50452] (issues: {issue}50251[#50251], {issue}50665[#50665], {issue}50762[#50762])\n+\n+Infra/Packaging::\n+* Introduce aarch64 packaging {pull}53914[#53914]\n+\n+Machine Learning::\n+* Implement ILM policy for .ml-state* indices {pull}52356[#52356] (issue: {issue}29938[#29938])\n+\n+Mapping::\n+* Introduce a `constant_keyword` field. {pull}49713[#49713]\n+\n+SQL::\n+* constant_keyword support {pull}53241[#53241] (issue: {issue}53016[#53016])\n+* Add optimisations for not-equalities {pull}51088[#51088] (issue: {issue}49637[#49637])\n+* Add support for passing query parameters in REST API calls {pull}51029[#51029] (issue: {issue}42916[#42916])\n+\n+Search::\n+* Introduce compound query {pull}52387[#52387] (issue: {issue}51967[#51967])\n+* Add a cluster setting to disallow expensive queries {pull}51385[#51385] (issue: {issue}29050[#29050])\n+* Add new x-pack endpoints to track the progress of a search asynchronously {pull}49931[#49931] (issue: {issue}49091[#49091])\n+\n+\n+\n+[[enhancement-7.7.0]]\n+[float]\n+=== Enhancements\n+\n+Aggregations::\n+* Try to save memory on aggregations {pull}53793[#53793]\n+* Speed up partial reduce of terms aggregations {pull}53216[#53216] (issue: {issue}51857[#51857])\n+* Simplify SiblingPipelineAggregator {pull}53144[#53144]\n+* Add histogram field type support to boxplot aggs {pull}52265[#52265] (issues: {issue}33112[#33112], {issue}52233[#52233])\n+* Percentiles aggregation validation checks for range {pull}51871[#51871] (issue: {issue}51808[#51808])\n+* Begin moving date_histogram to offset rounding (take two) {pull}51271[#51271] (issues: {issue}50609[#50609], {issue}50873[#50873])\n+* Password-protected Keystore Feature Branch PR {pull}51123[#51123] (issues: {issue}32691[#32691], {issue}49340[#49340])\n+* Implement top_metrics agg {pull}51155[#51155] (issue: {issue}48069[#48069])\n+* Bucket aggregation circuit breaker optimization. {pull}46751[#46751]\n+\n+Analysis::\n+* Removes old Lucene's experimental flag from analyzer documentations {pull}53217[#53217]\n+\n+Authentication::\n+* Add exception metadata for disabled features {pull}52811[#52811] (issues: {issue}47759[#47759], {issue}52311[#52311], {issue}55255[#55255])\n+* Validate role templates before saving role mapping {pull}52636[#52636] (issue: {issue}48773[#48773])\n+* Add support for secondary authentication {pull}52093[#52093]\n+* Expose API key name to the ingest pipeline {pull}51305[#51305] (issues: {issue}46847[#46847], {issue}49106[#49106])\n+* Disallow Password Change when authenticated by Token {pull}49694[#49694] (issue: {issue}48752[#48752])\n+\n+Authorization::\n+* Allow kibana_system to create and invalidate API keys on behalf of other users {pull}53824[#53824] (issue: {issue}48716[#48716])\n+* Add \"grant_api_key\" cluster privilege {pull}53527[#53527] (issues: {issue}48716[#48716], {issue}52886[#52886])\n+* Giving kibana user privileges to create custom link index {pull}53221[#53221] (issue: {issue}59305[#59305])\n+* [APM] Allow kibana to collect APM telemetry in background task {pull}52917[#52917] (issue: {issue}50757[#50757])\n+* Add the new 'maintenance' privilege containing 4 actions (#29998) {pull}50643[#50643]\n+\n+Cluster Coordination::\n+* Describe STALE_STATE_CONFIG in ClusterFormationFH {pull}53878[#53878] (issue: {issue}53734[#53734])\n+\n+Distributed::\n+* Introduce formal role for remote cluster client {pull}53924[#53924]\n+* Shortcut query phase using the results of other shards {pull}51852[#51852] (issues: {issue}49601[#49601], {issue}51708[#51708])\n+* Flush instead of synced-flush inactive shards {pull}49126[#49126] (issues: {issue}31965[#31965], {issue}48430[#48430])\n+\n+Engine::\n+* Restore off-heap loading for term dictionary in ReadOnlyEngine {pull}53713[#53713] (issues: {issue}43158[#43158], {issue}51247[#51247])\n+* Separate translog from index deletion conditions {pull}52556[#52556]\n+* Always rewrite search shard request outside of the search thread pool {pull}51708[#51708] (issue: {issue}49601[#49601])\n+* Move the terms index of `_id` off-heap. {pull}52405[#52405] (issue: {issue}42838[#42838])\n+* Cache completion stats between refreshes {pull}51991[#51991] (issue: {issue}51915[#51915])\n+* Use local checkpoint to calculate min translog gen for recovery {pull}51905[#51905] (issue: {issue}49970[#49970])\n+\n+Features/CAT APIs::\n+* /_cat/shards support path stats {pull}53461[#53461]\n+* Allow _cat indices & aliases to use indices options {pull}53248[#53248] (issue: {issue}52304[#52304])\n+\n+Features/Features::\n+* Enable deprecation checks for removed settings {pull}53317[#53317]\n+\n+Features/ILM+SLM::\n+* Hide ILM & SLM history aliases {pull}53564[#53564]\n+* Avoid race condition in ILMHistorySotre {pull}53039[#53039] (issues: {issue}50353[#50353], {issue}52853[#52853])\n+* Make FreezeStep retryable {pull}52540[#52540]\n+* Make DeleteStep retryable {pull}52494[#52494]\n+* Allow forcemerge in the hot phase for ILM policies {pull}52073[#52073] (issue: {issue}43165[#43165])\n+* Stop policy on last PhaseCompleteStep instead of TerminalPolic\u2026 {pull}51631[#51631] (issue: {issue}48431[#48431])\n+* Convert ILM and SLM histories into hidden indices {pull}51456[#51456]\n+* Make UpdateSettingsStep retryable {pull}51235[#51235] (issues: {issue}44135[#44135], {issue}48183[#48183])\n+* Expose master timeout for ILM actions {pull}51130[#51130] (issue: {issue}44136[#44136])\n+* Wait for active shards on rolled index in a separate step {pull}50718[#50718] (issues: {issue}44135[#44135], {issue}48183[#48183])\n+* Adding best_compression {pull}49974[#49974]\n+\n+Features/Indices APIs::\n+* Add IndexTemplateV2 to MetaData {pull}53753[#53753] (issue: {issue}53101[#53101])\n+* Add ComponentTemplate to MetaData {pull}53290[#53290] (issue: {issue}53101[#53101])\n+\n+Features/Ingest::\n+* Reduce log level for pipeline failure {pull}54097[#54097] (issue: {issue}51459[#51459])\n+* Support array for all string ingest processors {pull}53343[#53343] (issue: {issue}51087[#51087])\n+* Add empty_value parameter to CSV processor {pull}51567[#51567]\n+* Add pipeline name to ingest metadata {pull}50467[#50467] (issue: {issue}42106[#42106])\n+\n+Features/Java High Level REST Client::\n+* SourceExists HLRC uses GetSourceRequest instead of GetRequest {pull}51789[#51789] (issue: {issue}50885[#50885])\n+* Add async_search.submit to HLRC {pull}53592[#53592] (issue: {issue}49091[#49091])\n+* Add Get Source API to the HLRC {pull}50885[#50885] (issue: {issue}47678[#47678])\n+\n+Features/Monitoring::\n+* Secure password for monitoring HTTP exporter {pull}50919[#50919] (issue: {issue}50197[#50197])\n+* Validate SSL settings at parse time {pull}49196[#49196] (issue: {issue}47711[#47711])\n+\n+Features/Stats::\n+* Add analysis components and mapping types to the usage API. {pull}51031[#51031]\n+\n+Features/Watcher::\n+* Make watch history indices hidden {pull}52962[#52962] (issue: {issue}50251[#50251])\n+* Upgrade to the latest OWASP HTML sanitizer {pull}50765[#50765] (issue: {issue}50395[#50395])\n+\n+Infra/Core::\n+* Enable helpful null pointer exceptions {pull}54853[#54853]\n+* Allow keystore add to handle multiple settings {pull}54229[#54229] (issue: {issue}54191[#54191])\n+* Report parser name and location in XContent deprecation warnings {pull}53805[#53805]\n+* Report parser name and location in XContent deprecation warnings {pull}53752[#53752]\n+* Deprecate all variants of a ParseField with no replacement {pull}53722[#53722]\n+* Add a helper method to parse maps of objects {pull}53096[#53096]\n+* Allow specifying an exclusive set of fields on ObjectParser {pull}52893[#52893]\n+* Support joda style date patterns in 7.x {pull}52555[#52555]\n+* Implement hidden aliases {pull}52547[#52547] (issue: {issue}52304[#52304])\n+* Allow ObjectParsers to specify required sets of fields {pull}49661[#49661] (issue: {issue}48824[#48824])\n+\n+Infra/Logging::\n+* Capture stdout and stderr to log4j log {pull}50259[#50259] (issue: {issue}50156[#50156])\n+\n+Infra/Packaging::\n+* Introduce aarch64 Docker image {pull}53936[#53936] (issue: {issue}53914[#53914])\n+* Introduce jvm.options.d for customizing JVM options {pull}51882[#51882] (issue: {issue}51626[#51626])\n+\n+Infra/Plugins::\n+* Allow sha512 checksum without filename for maven plugins {pull}52668[#52668] (issue: {issue}52413[#52413])\n+\n+Infra/Scripting::\n+* Scripting: Context script cache unlimited compile {pull}53769[#53769] (issue: {issue}50152[#50152])\n+* Scripting: Increase ingest script cache defaults {pull}53765[#53765] (issue: {issue}50152[#50152])\n+* Scripting: Per-context script cache, default off (#52855) {pull}53756[#53756] (issues: {issue}50152[#50152], {issue}52855[#52855])\n+* Scripting: Per-context script cache, default off {pull}52855[#52855] (issue: {issue}50152[#50152])\n+* Improve Painless compilation performance for nested conditionals {pull}52056[#52056]\n+* Scripting: Add char position of script errors {pull}51069[#51069] (issue: {issue}50993[#50993])\n+\n+Infra/Settings::\n+* Allow keystore add-file to handle multiple settings {pull}54240[#54240] (issue: {issue}54191[#54191])\n+* Settings: AffixSettings as validator dependencies {pull}52973[#52973] (issue: {issue}52933[#52933])\n+\n+License::\n+* Simplify ml license checking with XpackLicenseState internals {pull}52684[#52684] (issue: {issue}52115[#52115])\n+* License removal leads back to a basic license {pull}52407[#52407] (issue: {issue}45022[#45022])\n+* Refactor license checking {pull}52118[#52118] (issue: {issue}51864[#51864])\n+* Add enterprise mode and refactor {pull}51864[#51864] (issue: {issue}51081[#51081])\n+\n+Machine Learning::\n+* Stratified cross validation split for classification {pull}54087[#54087]\n+* Data frame analytics data counts {pull}53998[#53998]\n+* Verify that the field is aggregatable before attempting cardinality aggregation {pull}53874[#53874] (issue: {issue}53876[#53876])\n+* Adds multi-class feature importance support {pull}53803[#53803]\n+* Data frame analytics analysis stats {pull}53788[#53788]\n+* Add a model memory estimation endpoint for anomaly detection {pull}53507[#53507] (issue: {issue}53219[#53219])\n+* [Inference] adds new default_field_map field to trained models {pull}53294[#53294]\n+* Improve DF analytics audits and logging {pull}53179[#53179]\n+* Add indices_options to datafeed config and update {pull}52793[#52793] (issue: {issue}48056[#48056])\n+* Parse and report memory usage for DF Analytics {pull}52778[#52778]\n+* Adds the class_assignment_objective parameter to classification {pull}52763[#52763] (issue: {issue}52427[#52427])\n+* Add reason to DataFrameAnalyticsTask updateState log message {pull}52659[#52659] (issue: {issue}52654[#52654])\n+* [Inference] Add support for multi-value leaves to the tree model {pull}52531[#52531]\n+* Make ml internal indices hidden {pull}52423[#52423] (issue: {issue}52420[#52420])\n+* Add _cat/ml/data_frame/analytics API {pull}52260[#52260] (issue: {issue}51413[#51413])\n+* Adds feature importance option to inference processor {pull}52218[#52218]\n+* Switch poor categorization audit warning to use status field {pull}52195[#52195] (issues: {issue}50749[#50749], {issue}51146[#51146], {issue}51879[#51879])\n+* Retry persisting DF Analytics results {pull}52048[#52048]\n+* Improve multiline_start_pattern for CSV in find_file_structure {pull}51737[#51737]\n+* Add _cat/ml/trained_models API {pull}51529[#51529] (issue: {issue}51414[#51414])\n+* Add GET _cat/ml/datafeeds {pull}51500[#51500] (issue: {issue}51411[#51411])\n+* Use CSV ingest processor in find_file_structure ingest pipeline {pull}51492[#51492] (issue: {issue}56038[#56038])\n+* Add _cat/ml/anomaly_detectors API {pull}51364[#51364]\n+* [Inference] add tags url param to GET {pull}51330[#51330]\n+* Add parsers for inference configuration classes {pull}51300[#51300]\n+* Make datafeeds work with nanosecond time fields {pull}51180[#51180] (issue: {issue}49889[#49889])\n+* Add audit warning for 1000 categories found early in job {pull}51146[#51146] (issue: {issue}50749[#50749])\n+* Adds support for a global calendars {pull}50372[#50372] (issue: {issue}45013[#45013])\n+\n+Mapping::\n+* Wildcard field - add normalizer support {pull}53851[#53851]\n+* Wildcard field - added case insensitive search option {pull}53814[#53814]\n+* Append index name for the source of the cluster put-mapping task {pull}52690[#52690]\n+\n+Network::\n+* Give helpful message on remote connections disabled {pull}53690[#53690]\n+* Add server name to remote info API {pull}53634[#53634]\n+* Log when probe succeeds but full connection fails {pull}51304[#51304]\n+* Encrypt generated key with AES {pull}51019[#51019] (issue: {issue}50843[#50843])\n+\n+Ranking::\n+* Adds recall@k metric to rank eval API {pull}52577[#52577] (issue: {issue}51676[#51676])\n+\n+SQL::\n+* Jdbc debugging enhancement {pull}53880[#53880]\n+* Transfer version compatibility decision to the server {pull}53082[#53082] (issue: {issue}52766[#52766])\n+* Use a proper error message for queries directed at empty mapping indices {pull}52967[#52967] (issue: {issue}52865[#52865])\n+* Use calendar_interval of 1d for HISTOGRAMs with 1 DAY intervals {pull}52749[#52749] (issue: {issue}52713[#52713])\n+* Use a calendar interval for histograms over 1 month intervals {pull}52586[#52586] (issue: {issue}51538[#51538])\n+* Make parsing of date more lenient {pull}52137[#52137] (issue: {issue}49379[#49379])\n+* Enhance timestamp escaped literal parsing {pull}52097[#52097] (issue: {issue}46069[#46069])\n+* Handle uberjar scenario where the ES jdbc driver file is bundled in another jar {pull}51856[#51856] (issue: {issue}50201[#50201])\n+* Verify Full-Text Search functions not allowed in SELECT {pull}51568[#51568] (issue: {issue}47446[#47446])\n+* Extend the optimisations for equalities {pull}50792[#50792] (issue: {issue}49637[#49637])\n+* Add trace logging for search responses coming from server {pull}50530[#50530]\n+* Extend DATE_TRUNC to also operate on intervals(elastic - #46632 ) {pull}47720[#47720] (issue: {issue}46632[#46632])\n+* Enchance output of explain for optimized plan {pull}33718[#33718]\n+\n+Search::\n+* HLRC: Don't send defaults for SubmitAsyncSearchRequest {pull}54200[#54200]\n+* Reduce performance impact of ExitableDirectoryReader {pull}53978[#53978] (issues: {issue}52822[#52822], {issue}53166[#53166], {issue}53496[#53496])\n+* Add heuristics to compute pre_filter_shard_size when unspecified {pull}53873[#53873] (issue: {issue}39835[#39835])\n+* Add async_search get and delete APIs to HLRC {pull}53828[#53828] (issue: {issue}49091[#49091])\n+* Increase step between checks for cancellation {pull}53712[#53712] (issues: {issue}52822[#52822], {issue}53496[#53496])\n+* Refine SearchProgressListener internal API {pull}53373[#53373]\n+* Check for query cancellation during rewrite {pull}53166[#53166] (issue: {issue}52822[#52822])\n+* Implement Cancellable DirectoryReader {pull}52822[#52822]\n+* Address MinAndMax generics warnings {pull}52642[#52642] (issue: {issue}49092[#49092])\n+* Clarify when shard iterators get sorted {pull}52633[#52633]\n+* Generalize how queries on `_index` are handled at rewrite time {pull}52486[#52486] (issues: {issue}49254[#49254], {issue}49713[#49713])\n+* Remove the query builder serialization from QueryShardException message {pull}51885[#51885] (issues: {issue}48910[#48910], {issue}51843[#51843])\n+* Short circuited to MatchNone for non-participating  slice {pull}51207[#51207]\n+* Add \"did you mean\" to unknown queries {pull}51177[#51177]\n+* Exclude unmapped fields during max clause limit checking for querying {pull}49523[#49523] (issue: {issue}49002[#49002])\n+\n+Security::\n+* Add error message in JSON response {pull}54389[#54389]\n+\n+Snapshot/Restore::\n+* Use Azure Bulk Deletes in Azure Repository {pull}53919[#53919] (issue: {issue}53865[#53865])\n+* Only link fd* files during source-only snapshot {pull}53463[#53463] (issue: {issue}50231[#50231])\n+* Add Blob Download Retries to GCS Repository {pull}52479[#52479] (issues: {issue}46589[#46589], {issue}52319[#52319])\n+* Better Incrementality for Snapshots of Unchanged Shards {pull}52182[#52182]\n+* Add Region and Signer Algorithm Overrides to S3 Repos {pull}52112[#52112] (issue: {issue}51861[#51861])\n+* Allow Parallel Snapshot Restore And Delete {pull}51608[#51608] (issue: {issue}41463[#41463])\n+\n+Store::\n+* HybridDirectory should mmap postings. {pull}52641[#52641]\n+\n+Transform::\n+* Transition Transforms to using hidden indices for notifcations index {pull}53773[#53773] (issue: {issue}53762[#53762])\n+* [Rollup] add processing stats to record the time spent for processing results {pull}53770[#53770]\n+* Create GET _cat/transforms API Issue {pull}53643[#53643] (issue: {issue}51412[#51412])\n+* Add support for script in group_by {pull}53167[#53167] (issue: {issue}43152[#43152])\n+* Implement node.transform to control where to run a transform {pull}52712[#52712] (issues: {issue}48734[#48734], {issue}50033[#50033], {issue}52200[#52200])\n+* Add support for filter aggregation {pull}52483[#52483] (issue: {issue}52151[#52151])\n+* Provide exponential_avg* stats for batch transforms {pull}52041[#52041] (issue: {issue}52037[#52037])\n+* Improve irrecoverable error detection - part 2 {pull}52003[#52003] (issue: {issue}51820[#51820])\n+* Mark transform API's stable {pull}51862[#51862]\n+* Improve irrecoverable error detection {pull}51820[#51820] (issue: {issue}50135[#50135])\n+* Add support for percentile aggs {pull}51808[#51808] (issue: {issue}51663[#51663])\n+* Disallow fieldnames with a dot at start and/or end {pull}51369[#51369]\n+* Avoid mapping problems with index templates {pull}51368[#51368] (issue: {issue}51321[#51321])\n+* Handle permanent bulk indexing errors {pull}51307[#51307] (issue: {issue}50122[#50122])\n+* Improve force stop robustness in case of an error {pull}51072[#51072]\n+\n+\n+\n+[[bug-7.7.0]]\n+[float]\n+=== Bug fixes\n+\n+Aggregations::\n+* Fix date_nanos in composite aggs {pull}53315[#53315] (issue: {issue}53168[#53168])\n+* Fix composite agg sort bug {pull}53296[#53296] (issue: {issue}52480[#52480])\n+* Decode max and min optimization more carefully {pull}52336[#52336] (issue: {issue}52220[#52220])\n+* Fix a DST error in date_histogram {pull}52016[#52016] (issue: {issue}50265[#50265])\n+* Use #name() instead of #simpleName() when generating doc values {pull}51920[#51920] (issues: {issue}50307[#50307], {issue}51847[#51847])\n+* Fix a sneaky bug in rare_terms {pull}51868[#51868] (issue: {issue}51020[#51020])\n+* Support time_zone on composite's date_histogram {pull}51172[#51172] (issues: {issue}45199[#45199], {issue}45200[#45200])\n+\n+Allocation::\n+* Improve performance of shards limits decider {pull}53577[#53577] (issue: {issue}53559[#53559])\n+\n+Analysis::\n+* Mask wildcard query special characters on keyword queries {pull}53127[#53127] (issue: {issue}46300[#46300])\n+* Fix caching for PreConfiguredTokenFilter {pull}50912[#50912] (issue: {issue}50734[#50734])\n+\n+Audit::\n+* Logfile audit settings validation {pull}52537[#52537] (issues: {issue}47038[#47038], {issue}47711[#47711], {issue}52357[#52357])\n+\n+Authentication::\n+* Fix potential bug in concurrent token refresh support {pull}53668[#53668]\n+* Respect runas realm for ApiKey security operations {pull}52178[#52178] (issue: {issue}51975[#51975])\n+* Preserve ApiKey credentials for async verification {pull}51244[#51244]\n+* Don't fallback to anonymous for tokens/apikeys {pull}51042[#51042] (issue: {issue}50171[#50171])\n+* Fail gracefully on invalid token strings {pull}51014[#51014]\n+\n+Authorization::\n+* Explicitly require that delegate API keys have no privileges {pull}53647[#53647]\n+* Allow _rollup_search with read privilege {pull}52043[#52043] (issue: {issue}50245[#50245])\n+\n+CCR::\n+* Put CCR tasks on (data && remote cluster clients) {pull}54146[#54146] (issue: {issue}53924[#53924])\n+* Handle no such remote cluster exception in ccr {pull}53415[#53415] (issue: {issue}53225[#53225])\n+* Fix shard follow task cleaner under security {pull}52347[#52347] (issues: {issue}44702[#44702], {issue}51971[#51971])\n+\n+CRUD::\n+* Force execution of finish shard bulk request {pull}51957[#51957] (issue: {issue}51904[#51904])\n+* Return 429 status code when there's a read_only cluster block {pull}50166[#50166] (issue: {issue}49393[#49393])\n+\n+Cluster Coordination::\n+* Use special XContent registry for node tool {pull}54050[#54050] (issue: {issue}53549[#53549])\n+* Allow static cluster.max_voting_config_exclusions {pull}53717[#53717] (issue: {issue}53455[#53455])\n+* Allow joining node to trigger term bump {pull}53338[#53338] (issue: {issue}53271[#53271])\n+* Ignore timeouts with single-node discovery {pull}52159[#52159]\n+\n+Distributed::\n+* Execute retention lease syncs under system context {pull}53838[#53838] (issues: {issue}48430[#48430], {issue}53751[#53751])\n+* Exclude nested documents in LuceneChangesSnapshot {pull}51279[#51279]\n+\n+Engine::\n+* Fix doc_stats and segment_stats of ReadOnlyEngine {pull}53345[#53345] (issues: {issue}51303[#51303], {issue}51331[#51331])\n+* Do not wrap soft-deletes reader for segment stats {pull}51331[#51331] (issues: {issue}51192[#51192], {issue}51303[#51303])\n+* Account soft-deletes in FrozenEngine {pull}51192[#51192] (issue: {issue}50775[#50775])\n+\n+Features/CAT APIs::\n+* Fix NPE in RestPluginsAction {pull}52620[#52620] (issue: {issue}45321[#45321])\n+\n+Features/ILM+SLM::\n+* Disallow negative TimeValues {pull}53913[#53913] (issue: {issue}54041[#54041])\n+* Fix null config in SnapshotLifecyclePolicy.toRequest {pull}53328[#53328] (issues: {issue}44465[#44465], {issue}53171[#53171])\n+* Freeze step retry when not acknowledged {pull}53287[#53287]\n+* Make the set-single-node-allocation retryable (#52077) {pull}52138[#52138] (issue: {issue}52077[#52077])\n+* Make the set-single-node-allocation retryable {pull}52077[#52077] (issue: {issue}43401[#43401])\n+* Fix the init step to actually be retryable {pull}52076[#52076]\n+\n+Features/Ingest::\n+* Fix ingest pipeline _simulate api with empty docs never returns a res\u2026 {pull}52937[#52937] (issue: {issue}52833[#52833])\n+* Handle errors when evaluating if conditions in processors {pull}52543[#52543] (issue: {issue}52339[#52339])\n+* Fix delete enrich policy bug {pull}52179[#52179] (issue: {issue}51228[#51228])\n+* Fix ignore_missing in CsvProcessor {pull}51600[#51600]\n+* Missing suffix for German Month \"Juli\" in Grok Pattern MONTH (#51579) {pull}51591[#51591] (issue: {issue}51579[#51579])\n+* Don't overwrite target field with SetSecurityUserProcessor {pull}51454[#51454] (issue: {issue}51428[#51428])\n+\n+Features/Java High Level REST Client::\n+* Add unsupported parameters to HLRC search request {pull}53745[#53745]\n+* Fix AbstractBulkByScrollRequest slices parameter via Rest {pull}53068[#53068] (issue: {issue}53044[#53044])\n+* Send the fields param via body instead of URL params (elastic#42232) {pull}48840[#48840] (issues: {issue}42232[#42232], {issue}42877[#42877])\n+\n+Features/Java Low Level REST Client::\n+* Fix roles parsing in client nodes sniffer {pull}52888[#52888] (issue: {issue}52864[#52864])\n+\n+Features/Monitoring::\n+* Fix NPE in cluster state collector for monitoring {pull}52371[#52371] (issue: {issue}52317[#52317])\n+\n+Features/Stats::\n+* Switch to AtomicLong for \"IngestCurrent\" metric to prevent negative values {pull}52581[#52581] (issues: {issue}52406[#52406], {issue}52411[#52411])\n+\n+Features/Watcher::\n+* Disable Watcher script optimization for stored scripts {pull}53497[#53497] (issue: {issue}40212[#40212])\n+* The watcher indexing listener didn't handle document level exceptions. {pull}51466[#51466] (issue: {issue}32299[#32299])\n+\n+Geo::\n+* Handle properly indexing rectangles that crosses the dateline {pull}53810[#53810]\n+\n+Highlighting::\n+* Fix highlighter support in PinnedQuery and added test {pull}53716[#53716] (issue: {issue}53699[#53699])\n+\n+Infra/Core::\n+* Fix Joda compatibility in stream protocol {pull}53823[#53823] (issue: {issue}53586[#53586])\n+* Avoid self-suppression on grouped action listener {pull}53262[#53262] (issue: {issue}53174[#53174])\n+* Use correct package for `VM` class {pull}52803[#52803] (issue: {issue}47210[#47210])\n+* Ignore virtual ethernet devices that disappear {pull}51581[#51581] (issue: {issue}49914[#49914])\n+* Fix ingest timezone logic {pull}51215[#51215] (issue: {issue}51108[#51108])\n+\n+Infra/Logging::\n+* Fix LoggingOutputStream to work on windows {pull}51779[#51779] (issue: {issue}51532[#51532])\n+\n+Infra/Packaging::\n+* Handle special characters and spaces in JAVA_HOME path in elasticsearch-service.bat {pull}52676[#52676]\n+* Limit _FILE env var support to specific vars {pull}52525[#52525] (issue: {issue}52503[#52503])\n+* Always set default ES_PATH_CONF for package scriptlets {pull}51827[#51827] (issues: {issue}50246[#50246], {issue}50631[#50631])\n+\n+Infra/Plugins::\n+* Ensure only plugin REST tests are run for plugins {pull}53184[#53184] (issues: {issue}52114[#52114], {issue}53183[#53183])\n+\n+Machine Learning::\n+* Fix node serialization on GET df-nalytics stats without id {pull}54808[#54808] (issue: {issue}54807[#54807])\n+* Allow force stopping failed and stopping DF analytics {pull}54650[#54650]\n+* Take more care that normalize processes use unique named pipes {pull}54636[#54636] (issue: {issue}43830[#43830])\n+* Do not fail Evaluate API when the actual and predicted fields' types differ {pull}54255[#54255] (issue: {issue}54079[#54079])\n+* Get ML filters size should default to 100 {pull}54207[#54207] (issues: {issue}39976[#39976], {issue}54206[#54206])\n+* Introduce a \"starting\" datafeed state for lazy jobs {pull}53918[#53918] (issue: {issue}53763[#53763])\n+* Only retry persistence failures when the failure is intermittent and stop retrying when analytics job is stopping {pull}53725[#53725] (issue: {issue}53687[#53687])\n+* [Inference] fix number inference models returned in x-pack info API {pull}53540[#53540]\n+* Make classification evaluation metrics work when there is field mapping type mismatch {pull}53458[#53458] (issue: {issue}53485[#53485])\n+* Perform evaluation in multiple steps when necessary {pull}53295[#53295]\n+* Specifying missing_field_value value and using it instead of empty_string {pull}53108[#53108] (issue: {issue}1034[#1034])\n+* Use event.timezone in ingest pipeline from find_file_structure {pull}52720[#52720] (issue: {issue}9458[#9458])\n+* [Inference] don't return inflated definition when storing trained models {pull}52573[#52573]\n+* Validate tree feature index is within range {pull}52460[#52460]\n+* Better error when persistent task assignment disabled {pull}52014[#52014] (issue: {issue}51956[#51956])\n+* Fix possible race condition starting datafeed {pull}51646[#51646] (issues: {issue}50886[#50886], {issue}51302[#51302])\n+* Fix 2 digit year regex in find_file_structure {pull}51469[#51469]\n+* Fix possible race condition when starting datafeed {pull}51302[#51302] (issue: {issue}51285[#51285])\n+* Validate classification dependent_variable cardinality is at lea\u2026 {pull}51232[#51232]\n+* Do not copy mapping from dependent variable to prediction field in regression analysis {pull}51227[#51227]\n+* Address two edge cases for categorization.GrokPatternCreator#findBestGrokMatchFromExamples {pull}51168[#51168]\n+* Calculate results and snapshot retention using latest bucket timestamps {pull}51061[#51061]\n+\n+Mapping::\n+* Disallow duplicate `dynamic_templates` names {pull}51817[#51817] (issue: {issue}28988[#28988])\n+* Throw better exception on wrong `dynamic_templates` syntax {pull}51783[#51783] (issue: {issue}51486[#51486])\n+\n+Network::\n+* Allow proxy mode server name to be updated {pull}54107[#54107]\n+* Invoke response handler on failure to send {pull}53631[#53631]\n+* Do not log no-op reconnections at DEBUG {pull}53469[#53469]\n+* Fix RemoteConnectionManager size() method {pull}52823[#52823] (issue: {issue}52029[#52029])\n+* Remove seeds dependency for remote cluster settings {pull}52796[#52796]\n+* Add host address to BindTransportException message {pull}51269[#51269] (issue: {issue}48001[#48001])\n+\n+Percolator::\n+* Test percolate queries using `NOW` and sorting {pull}52758[#52758] (issues: {issue}52618[#52618], {issue}52748[#52748])\n+* Don't index ranges including NOW in percolator {pull}52748[#52748] (issue: {issue}52617[#52617])\n+\n+Reindex::\n+* Reindex negative TimeValue fix {pull}54057[#54057] (issue: {issue}53913[#53913])\n+* Reindex: allow comma separated source indices {pull}52044[#52044] (issue: {issue}51949[#51949])", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "originalPosition": 536}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNTM2ODcy", "url": "https://github.com/elastic/elasticsearch/pull/55019#pullrequestreview-391536872", "createdAt": "2020-04-10T16:35:12Z", "commit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxNjozNToxMlrOGD_YUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxNjozNToxMlrOGD_YUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjgzNzMyOQ==", "bodyText": "Making this consistent with the one above it.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Don't index ranges including NOW in percolator {pull}52748[#52748] (issue: {issue}52617[#52617])\n          \n          \n            \n            * Don't index ranges including `NOW` in percolator {pull}52748[#52748] (issue: {issue}52617[#52617])", "url": "https://github.com/elastic/elasticsearch/pull/55019#discussion_r406837329", "createdAt": "2020-04-10T16:35:12Z", "author": {"login": "jrodewig"}, "path": "docs/reference/release-notes/7.7.asciidoc", "diffHunk": "@@ -1,22 +1,612 @@\n [[release-notes-7.7.0]]\n == {es} version 7.7.0\n \n-coming[7.7.0]\n+Also see <<breaking-changes-7.7,Breaking changes in 7.7>>.\n \n [[breaking-7.7.0]]\n [float]\n === Breaking changes\n \n+Highlighting::\n+* Highlighters skip ignored keyword values {pull}53408[#53408] (issue: {issue}43800[#43800])\n+\n+Infra/Core::\n+* Remove DEBUG-level default logging from actions {pull}51459[#51459] (issue: {issue}51198[#51198])\n+\n Mapping::\n * Dynamic mappings in indices created on 8.0 and later have stricter validation at mapping update time and\n   results in a deprecation warning for indices created in Elasticsearch 7.7.0 and later.\n-  (e.g. incorrect analyzer settings or unknown field types). {pull}51233[#51233]\n+  (e.g. incorrect analyzer settings or unknown field types). {pull}51233[#51233] (issues: {issue}17411[#17411], {issue}24419[#24419])\n \n Search::\n-* A regression that allowed negative scores in a script_score query was corrected.\n-  A behaviour is restored that throws an error if script_score query produces\n-  a negative score {pull}52478[#52478].\n+* Make range query rounding consistent {pull}50237[#50237] (issue: {issue}50009[#50009])\n * Pipeline aggregation validation errors that used to return HTTP\n   500s/Internal Server Errors now return 400/Bad Request {pull}53669[#53669].\n   As a bonus we now return a list of validation errors rather than returning\n   the first one we encounter.\n+\n+\n+\n+[[breaking-java-7.7.0]]\n+[float]\n+=== Breaking Java changes\n+\n+Infra/Core::\n+* Fix ActionListener.map exception handling {pull}50886[#50886]\n+\n+Machine Learning::\n+* Add expected input field type to trained model config {pull}53083[#53083]\n+\n+Transform::\n+* Enhance the output of preview to return full destination index details {pull}53572[#53572]\n+\n+\n+\n+[[deprecation-7.7.0]]\n+[float]\n+=== Deprecations\n+\n+Allocation::\n+* Deprecated support for delaying state recovery pending master nodes {pull}53646[#53646] (issue: {issue}51806[#51806])\n+\n+Authentication::\n+* Add warnings for invalid realm order config (#51195) {pull}51515[#51515]\n+* Deprecate timeout.tcp_read AD/LDAP realm setting {pull}47305[#47305] (issue: {issue}46028[#46028])\n+\n+Engine::\n+* Deprecate translog retention settings {pull}51588[#51588] (issues: {issue}45473[#45473], {issue}50775[#50775])\n+\n+Features/Features::\n+* Add cluster.remote.connect to deprecation info API {pull}54142[#54142] (issue: {issue}53924[#53924])\n+\n+Infra/Core::\n+* Add deprecation check for listener thread pool {pull}53438[#53438] (issues: {issue}53049[#53049], {issue}53317[#53317])\n+* Deprecate the logstash enabled setting {pull}53367[#53367]\n+* Deprecate the listener thread pool {pull}53266[#53266] (issue: {issue}53049[#53049])\n+* Deprecate creation of dot-prefixed index names except for hidden and system indices {pull}49959[#49959]\n+\n+Infra/REST API::\n+* Deprecate undocumented alternatives to the nodes hot threads API (#52640) {pull}52930[#52930] (issue: {issue}52640[#52640])\n+\n+Machine Learning::\n+* Renaming inference processor field field_mappings to new name field_map {pull}53433[#53433]\n+\n+Search::\n+* Emit deprecation warning when TermsLookup contains a type {pull}53731[#53731] (issue: {issue}41059[#41059])\n+* Deprecate BoolQueryBuilder's mustNot field {pull}53125[#53125]\n+\n+\n+\n+[[feature-7.7.0]]\n+[float]\n+=== New features\n+\n+Aggregations::\n+* Preserve metric types in top_metrics {pull}53288[#53288]\n+* Support multiple metrics in `top_metrics` agg {pull}52965[#52965] (issue: {issue}51813[#51813])\n+* Add size support to `top_metrics` {pull}52662[#52662] (issue: {issue}51813[#51813])\n+* HLRC support for string_stats {pull}52163[#52163]\n+* Add Boxplot Aggregation {pull}51948[#51948] (issue: {issue}33112[#33112])\n+\n+Analysis::\n+* Add nori_number token filter in analysis-nori {pull}53583[#53583]\n+\n+Authentication::\n+* Create API Key on behalf of other user {pull}52886[#52886] (issue: {issue}48716[#48716])\n+\n+Geo::\n+* Add support for distance queries on shape queries {pull}53468[#53468]\n+* Add support for distance queries on geo_shape queries {pull}53466[#53466] (issues: {issue}13351[#13351], {issue}39237[#39237])\n+* Add support for multipoint shape queries {pull}52564[#52564] (issue: {issue}52133[#52133])\n+* Add support for multipoint geoshape queries {pull}52133[#52133] (issue: {issue}37318[#37318])\n+\n+Infra/Core::\n+* Implement hidden indices {pull}50452[#50452] (issues: {issue}50251[#50251], {issue}50665[#50665], {issue}50762[#50762])\n+\n+Infra/Packaging::\n+* Introduce aarch64 packaging {pull}53914[#53914]\n+\n+Machine Learning::\n+* Implement ILM policy for .ml-state* indices {pull}52356[#52356] (issue: {issue}29938[#29938])\n+\n+Mapping::\n+* Introduce a `constant_keyword` field. {pull}49713[#49713]\n+\n+SQL::\n+* constant_keyword support {pull}53241[#53241] (issue: {issue}53016[#53016])\n+* Add optimisations for not-equalities {pull}51088[#51088] (issue: {issue}49637[#49637])\n+* Add support for passing query parameters in REST API calls {pull}51029[#51029] (issue: {issue}42916[#42916])\n+\n+Search::\n+* Introduce compound query {pull}52387[#52387] (issue: {issue}51967[#51967])\n+* Add a cluster setting to disallow expensive queries {pull}51385[#51385] (issue: {issue}29050[#29050])\n+* Add new x-pack endpoints to track the progress of a search asynchronously {pull}49931[#49931] (issue: {issue}49091[#49091])\n+\n+\n+\n+[[enhancement-7.7.0]]\n+[float]\n+=== Enhancements\n+\n+Aggregations::\n+* Try to save memory on aggregations {pull}53793[#53793]\n+* Speed up partial reduce of terms aggregations {pull}53216[#53216] (issue: {issue}51857[#51857])\n+* Simplify SiblingPipelineAggregator {pull}53144[#53144]\n+* Add histogram field type support to boxplot aggs {pull}52265[#52265] (issues: {issue}33112[#33112], {issue}52233[#52233])\n+* Percentiles aggregation validation checks for range {pull}51871[#51871] (issue: {issue}51808[#51808])\n+* Begin moving date_histogram to offset rounding (take two) {pull}51271[#51271] (issues: {issue}50609[#50609], {issue}50873[#50873])\n+* Password-protected Keystore Feature Branch PR {pull}51123[#51123] (issues: {issue}32691[#32691], {issue}49340[#49340])\n+* Implement top_metrics agg {pull}51155[#51155] (issue: {issue}48069[#48069])\n+* Bucket aggregation circuit breaker optimization. {pull}46751[#46751]\n+\n+Analysis::\n+* Removes old Lucene's experimental flag from analyzer documentations {pull}53217[#53217]\n+\n+Authentication::\n+* Add exception metadata for disabled features {pull}52811[#52811] (issues: {issue}47759[#47759], {issue}52311[#52311], {issue}55255[#55255])\n+* Validate role templates before saving role mapping {pull}52636[#52636] (issue: {issue}48773[#48773])\n+* Add support for secondary authentication {pull}52093[#52093]\n+* Expose API key name to the ingest pipeline {pull}51305[#51305] (issues: {issue}46847[#46847], {issue}49106[#49106])\n+* Disallow Password Change when authenticated by Token {pull}49694[#49694] (issue: {issue}48752[#48752])\n+\n+Authorization::\n+* Allow kibana_system to create and invalidate API keys on behalf of other users {pull}53824[#53824] (issue: {issue}48716[#48716])\n+* Add \"grant_api_key\" cluster privilege {pull}53527[#53527] (issues: {issue}48716[#48716], {issue}52886[#52886])\n+* Giving kibana user privileges to create custom link index {pull}53221[#53221] (issue: {issue}59305[#59305])\n+* [APM] Allow kibana to collect APM telemetry in background task {pull}52917[#52917] (issue: {issue}50757[#50757])\n+* Add the new 'maintenance' privilege containing 4 actions (#29998) {pull}50643[#50643]\n+\n+Cluster Coordination::\n+* Describe STALE_STATE_CONFIG in ClusterFormationFH {pull}53878[#53878] (issue: {issue}53734[#53734])\n+\n+Distributed::\n+* Introduce formal role for remote cluster client {pull}53924[#53924]\n+* Shortcut query phase using the results of other shards {pull}51852[#51852] (issues: {issue}49601[#49601], {issue}51708[#51708])\n+* Flush instead of synced-flush inactive shards {pull}49126[#49126] (issues: {issue}31965[#31965], {issue}48430[#48430])\n+\n+Engine::\n+* Restore off-heap loading for term dictionary in ReadOnlyEngine {pull}53713[#53713] (issues: {issue}43158[#43158], {issue}51247[#51247])\n+* Separate translog from index deletion conditions {pull}52556[#52556]\n+* Always rewrite search shard request outside of the search thread pool {pull}51708[#51708] (issue: {issue}49601[#49601])\n+* Move the terms index of `_id` off-heap. {pull}52405[#52405] (issue: {issue}42838[#42838])\n+* Cache completion stats between refreshes {pull}51991[#51991] (issue: {issue}51915[#51915])\n+* Use local checkpoint to calculate min translog gen for recovery {pull}51905[#51905] (issue: {issue}49970[#49970])\n+\n+Features/CAT APIs::\n+* /_cat/shards support path stats {pull}53461[#53461]\n+* Allow _cat indices & aliases to use indices options {pull}53248[#53248] (issue: {issue}52304[#52304])\n+\n+Features/Features::\n+* Enable deprecation checks for removed settings {pull}53317[#53317]\n+\n+Features/ILM+SLM::\n+* Hide ILM & SLM history aliases {pull}53564[#53564]\n+* Avoid race condition in ILMHistorySotre {pull}53039[#53039] (issues: {issue}50353[#50353], {issue}52853[#52853])\n+* Make FreezeStep retryable {pull}52540[#52540]\n+* Make DeleteStep retryable {pull}52494[#52494]\n+* Allow forcemerge in the hot phase for ILM policies {pull}52073[#52073] (issue: {issue}43165[#43165])\n+* Stop policy on last PhaseCompleteStep instead of TerminalPolic\u2026 {pull}51631[#51631] (issue: {issue}48431[#48431])\n+* Convert ILM and SLM histories into hidden indices {pull}51456[#51456]\n+* Make UpdateSettingsStep retryable {pull}51235[#51235] (issues: {issue}44135[#44135], {issue}48183[#48183])\n+* Expose master timeout for ILM actions {pull}51130[#51130] (issue: {issue}44136[#44136])\n+* Wait for active shards on rolled index in a separate step {pull}50718[#50718] (issues: {issue}44135[#44135], {issue}48183[#48183])\n+* Adding best_compression {pull}49974[#49974]\n+\n+Features/Indices APIs::\n+* Add IndexTemplateV2 to MetaData {pull}53753[#53753] (issue: {issue}53101[#53101])\n+* Add ComponentTemplate to MetaData {pull}53290[#53290] (issue: {issue}53101[#53101])\n+\n+Features/Ingest::\n+* Reduce log level for pipeline failure {pull}54097[#54097] (issue: {issue}51459[#51459])\n+* Support array for all string ingest processors {pull}53343[#53343] (issue: {issue}51087[#51087])\n+* Add empty_value parameter to CSV processor {pull}51567[#51567]\n+* Add pipeline name to ingest metadata {pull}50467[#50467] (issue: {issue}42106[#42106])\n+\n+Features/Java High Level REST Client::\n+* SourceExists HLRC uses GetSourceRequest instead of GetRequest {pull}51789[#51789] (issue: {issue}50885[#50885])\n+* Add async_search.submit to HLRC {pull}53592[#53592] (issue: {issue}49091[#49091])\n+* Add Get Source API to the HLRC {pull}50885[#50885] (issue: {issue}47678[#47678])\n+\n+Features/Monitoring::\n+* Secure password for monitoring HTTP exporter {pull}50919[#50919] (issue: {issue}50197[#50197])\n+* Validate SSL settings at parse time {pull}49196[#49196] (issue: {issue}47711[#47711])\n+\n+Features/Stats::\n+* Add analysis components and mapping types to the usage API. {pull}51031[#51031]\n+\n+Features/Watcher::\n+* Make watch history indices hidden {pull}52962[#52962] (issue: {issue}50251[#50251])\n+* Upgrade to the latest OWASP HTML sanitizer {pull}50765[#50765] (issue: {issue}50395[#50395])\n+\n+Infra/Core::\n+* Enable helpful null pointer exceptions {pull}54853[#54853]\n+* Allow keystore add to handle multiple settings {pull}54229[#54229] (issue: {issue}54191[#54191])\n+* Report parser name and location in XContent deprecation warnings {pull}53805[#53805]\n+* Report parser name and location in XContent deprecation warnings {pull}53752[#53752]\n+* Deprecate all variants of a ParseField with no replacement {pull}53722[#53722]\n+* Add a helper method to parse maps of objects {pull}53096[#53096]\n+* Allow specifying an exclusive set of fields on ObjectParser {pull}52893[#52893]\n+* Support joda style date patterns in 7.x {pull}52555[#52555]\n+* Implement hidden aliases {pull}52547[#52547] (issue: {issue}52304[#52304])\n+* Allow ObjectParsers to specify required sets of fields {pull}49661[#49661] (issue: {issue}48824[#48824])\n+\n+Infra/Logging::\n+* Capture stdout and stderr to log4j log {pull}50259[#50259] (issue: {issue}50156[#50156])\n+\n+Infra/Packaging::\n+* Introduce aarch64 Docker image {pull}53936[#53936] (issue: {issue}53914[#53914])\n+* Introduce jvm.options.d for customizing JVM options {pull}51882[#51882] (issue: {issue}51626[#51626])\n+\n+Infra/Plugins::\n+* Allow sha512 checksum without filename for maven plugins {pull}52668[#52668] (issue: {issue}52413[#52413])\n+\n+Infra/Scripting::\n+* Scripting: Context script cache unlimited compile {pull}53769[#53769] (issue: {issue}50152[#50152])\n+* Scripting: Increase ingest script cache defaults {pull}53765[#53765] (issue: {issue}50152[#50152])\n+* Scripting: Per-context script cache, default off (#52855) {pull}53756[#53756] (issues: {issue}50152[#50152], {issue}52855[#52855])\n+* Scripting: Per-context script cache, default off {pull}52855[#52855] (issue: {issue}50152[#50152])\n+* Improve Painless compilation performance for nested conditionals {pull}52056[#52056]\n+* Scripting: Add char position of script errors {pull}51069[#51069] (issue: {issue}50993[#50993])\n+\n+Infra/Settings::\n+* Allow keystore add-file to handle multiple settings {pull}54240[#54240] (issue: {issue}54191[#54191])\n+* Settings: AffixSettings as validator dependencies {pull}52973[#52973] (issue: {issue}52933[#52933])\n+\n+License::\n+* Simplify ml license checking with XpackLicenseState internals {pull}52684[#52684] (issue: {issue}52115[#52115])\n+* License removal leads back to a basic license {pull}52407[#52407] (issue: {issue}45022[#45022])\n+* Refactor license checking {pull}52118[#52118] (issue: {issue}51864[#51864])\n+* Add enterprise mode and refactor {pull}51864[#51864] (issue: {issue}51081[#51081])\n+\n+Machine Learning::\n+* Stratified cross validation split for classification {pull}54087[#54087]\n+* Data frame analytics data counts {pull}53998[#53998]\n+* Verify that the field is aggregatable before attempting cardinality aggregation {pull}53874[#53874] (issue: {issue}53876[#53876])\n+* Adds multi-class feature importance support {pull}53803[#53803]\n+* Data frame analytics analysis stats {pull}53788[#53788]\n+* Add a model memory estimation endpoint for anomaly detection {pull}53507[#53507] (issue: {issue}53219[#53219])\n+* [Inference] adds new default_field_map field to trained models {pull}53294[#53294]\n+* Improve DF analytics audits and logging {pull}53179[#53179]\n+* Add indices_options to datafeed config and update {pull}52793[#52793] (issue: {issue}48056[#48056])\n+* Parse and report memory usage for DF Analytics {pull}52778[#52778]\n+* Adds the class_assignment_objective parameter to classification {pull}52763[#52763] (issue: {issue}52427[#52427])\n+* Add reason to DataFrameAnalyticsTask updateState log message {pull}52659[#52659] (issue: {issue}52654[#52654])\n+* [Inference] Add support for multi-value leaves to the tree model {pull}52531[#52531]\n+* Make ml internal indices hidden {pull}52423[#52423] (issue: {issue}52420[#52420])\n+* Add _cat/ml/data_frame/analytics API {pull}52260[#52260] (issue: {issue}51413[#51413])\n+* Adds feature importance option to inference processor {pull}52218[#52218]\n+* Switch poor categorization audit warning to use status field {pull}52195[#52195] (issues: {issue}50749[#50749], {issue}51146[#51146], {issue}51879[#51879])\n+* Retry persisting DF Analytics results {pull}52048[#52048]\n+* Improve multiline_start_pattern for CSV in find_file_structure {pull}51737[#51737]\n+* Add _cat/ml/trained_models API {pull}51529[#51529] (issue: {issue}51414[#51414])\n+* Add GET _cat/ml/datafeeds {pull}51500[#51500] (issue: {issue}51411[#51411])\n+* Use CSV ingest processor in find_file_structure ingest pipeline {pull}51492[#51492] (issue: {issue}56038[#56038])\n+* Add _cat/ml/anomaly_detectors API {pull}51364[#51364]\n+* [Inference] add tags url param to GET {pull}51330[#51330]\n+* Add parsers for inference configuration classes {pull}51300[#51300]\n+* Make datafeeds work with nanosecond time fields {pull}51180[#51180] (issue: {issue}49889[#49889])\n+* Add audit warning for 1000 categories found early in job {pull}51146[#51146] (issue: {issue}50749[#50749])\n+* Adds support for a global calendars {pull}50372[#50372] (issue: {issue}45013[#45013])\n+\n+Mapping::\n+* Wildcard field - add normalizer support {pull}53851[#53851]\n+* Wildcard field - added case insensitive search option {pull}53814[#53814]\n+* Append index name for the source of the cluster put-mapping task {pull}52690[#52690]\n+\n+Network::\n+* Give helpful message on remote connections disabled {pull}53690[#53690]\n+* Add server name to remote info API {pull}53634[#53634]\n+* Log when probe succeeds but full connection fails {pull}51304[#51304]\n+* Encrypt generated key with AES {pull}51019[#51019] (issue: {issue}50843[#50843])\n+\n+Ranking::\n+* Adds recall@k metric to rank eval API {pull}52577[#52577] (issue: {issue}51676[#51676])\n+\n+SQL::\n+* Jdbc debugging enhancement {pull}53880[#53880]\n+* Transfer version compatibility decision to the server {pull}53082[#53082] (issue: {issue}52766[#52766])\n+* Use a proper error message for queries directed at empty mapping indices {pull}52967[#52967] (issue: {issue}52865[#52865])\n+* Use calendar_interval of 1d for HISTOGRAMs with 1 DAY intervals {pull}52749[#52749] (issue: {issue}52713[#52713])\n+* Use a calendar interval for histograms over 1 month intervals {pull}52586[#52586] (issue: {issue}51538[#51538])\n+* Make parsing of date more lenient {pull}52137[#52137] (issue: {issue}49379[#49379])\n+* Enhance timestamp escaped literal parsing {pull}52097[#52097] (issue: {issue}46069[#46069])\n+* Handle uberjar scenario where the ES jdbc driver file is bundled in another jar {pull}51856[#51856] (issue: {issue}50201[#50201])\n+* Verify Full-Text Search functions not allowed in SELECT {pull}51568[#51568] (issue: {issue}47446[#47446])\n+* Extend the optimisations for equalities {pull}50792[#50792] (issue: {issue}49637[#49637])\n+* Add trace logging for search responses coming from server {pull}50530[#50530]\n+* Extend DATE_TRUNC to also operate on intervals(elastic - #46632 ) {pull}47720[#47720] (issue: {issue}46632[#46632])\n+* Enchance output of explain for optimized plan {pull}33718[#33718]\n+\n+Search::\n+* HLRC: Don't send defaults for SubmitAsyncSearchRequest {pull}54200[#54200]\n+* Reduce performance impact of ExitableDirectoryReader {pull}53978[#53978] (issues: {issue}52822[#52822], {issue}53166[#53166], {issue}53496[#53496])\n+* Add heuristics to compute pre_filter_shard_size when unspecified {pull}53873[#53873] (issue: {issue}39835[#39835])\n+* Add async_search get and delete APIs to HLRC {pull}53828[#53828] (issue: {issue}49091[#49091])\n+* Increase step between checks for cancellation {pull}53712[#53712] (issues: {issue}52822[#52822], {issue}53496[#53496])\n+* Refine SearchProgressListener internal API {pull}53373[#53373]\n+* Check for query cancellation during rewrite {pull}53166[#53166] (issue: {issue}52822[#52822])\n+* Implement Cancellable DirectoryReader {pull}52822[#52822]\n+* Address MinAndMax generics warnings {pull}52642[#52642] (issue: {issue}49092[#49092])\n+* Clarify when shard iterators get sorted {pull}52633[#52633]\n+* Generalize how queries on `_index` are handled at rewrite time {pull}52486[#52486] (issues: {issue}49254[#49254], {issue}49713[#49713])\n+* Remove the query builder serialization from QueryShardException message {pull}51885[#51885] (issues: {issue}48910[#48910], {issue}51843[#51843])\n+* Short circuited to MatchNone for non-participating  slice {pull}51207[#51207]\n+* Add \"did you mean\" to unknown queries {pull}51177[#51177]\n+* Exclude unmapped fields during max clause limit checking for querying {pull}49523[#49523] (issue: {issue}49002[#49002])\n+\n+Security::\n+* Add error message in JSON response {pull}54389[#54389]\n+\n+Snapshot/Restore::\n+* Use Azure Bulk Deletes in Azure Repository {pull}53919[#53919] (issue: {issue}53865[#53865])\n+* Only link fd* files during source-only snapshot {pull}53463[#53463] (issue: {issue}50231[#50231])\n+* Add Blob Download Retries to GCS Repository {pull}52479[#52479] (issues: {issue}46589[#46589], {issue}52319[#52319])\n+* Better Incrementality for Snapshots of Unchanged Shards {pull}52182[#52182]\n+* Add Region and Signer Algorithm Overrides to S3 Repos {pull}52112[#52112] (issue: {issue}51861[#51861])\n+* Allow Parallel Snapshot Restore And Delete {pull}51608[#51608] (issue: {issue}41463[#41463])\n+\n+Store::\n+* HybridDirectory should mmap postings. {pull}52641[#52641]\n+\n+Transform::\n+* Transition Transforms to using hidden indices for notifcations index {pull}53773[#53773] (issue: {issue}53762[#53762])\n+* [Rollup] add processing stats to record the time spent for processing results {pull}53770[#53770]\n+* Create GET _cat/transforms API Issue {pull}53643[#53643] (issue: {issue}51412[#51412])\n+* Add support for script in group_by {pull}53167[#53167] (issue: {issue}43152[#43152])\n+* Implement node.transform to control where to run a transform {pull}52712[#52712] (issues: {issue}48734[#48734], {issue}50033[#50033], {issue}52200[#52200])\n+* Add support for filter aggregation {pull}52483[#52483] (issue: {issue}52151[#52151])\n+* Provide exponential_avg* stats for batch transforms {pull}52041[#52041] (issue: {issue}52037[#52037])\n+* Improve irrecoverable error detection - part 2 {pull}52003[#52003] (issue: {issue}51820[#51820])\n+* Mark transform API's stable {pull}51862[#51862]\n+* Improve irrecoverable error detection {pull}51820[#51820] (issue: {issue}50135[#50135])\n+* Add support for percentile aggs {pull}51808[#51808] (issue: {issue}51663[#51663])\n+* Disallow fieldnames with a dot at start and/or end {pull}51369[#51369]\n+* Avoid mapping problems with index templates {pull}51368[#51368] (issue: {issue}51321[#51321])\n+* Handle permanent bulk indexing errors {pull}51307[#51307] (issue: {issue}50122[#50122])\n+* Improve force stop robustness in case of an error {pull}51072[#51072]\n+\n+\n+\n+[[bug-7.7.0]]\n+[float]\n+=== Bug fixes\n+\n+Aggregations::\n+* Fix date_nanos in composite aggs {pull}53315[#53315] (issue: {issue}53168[#53168])\n+* Fix composite agg sort bug {pull}53296[#53296] (issue: {issue}52480[#52480])\n+* Decode max and min optimization more carefully {pull}52336[#52336] (issue: {issue}52220[#52220])\n+* Fix a DST error in date_histogram {pull}52016[#52016] (issue: {issue}50265[#50265])\n+* Use #name() instead of #simpleName() when generating doc values {pull}51920[#51920] (issues: {issue}50307[#50307], {issue}51847[#51847])\n+* Fix a sneaky bug in rare_terms {pull}51868[#51868] (issue: {issue}51020[#51020])\n+* Support time_zone on composite's date_histogram {pull}51172[#51172] (issues: {issue}45199[#45199], {issue}45200[#45200])\n+\n+Allocation::\n+* Improve performance of shards limits decider {pull}53577[#53577] (issue: {issue}53559[#53559])\n+\n+Analysis::\n+* Mask wildcard query special characters on keyword queries {pull}53127[#53127] (issue: {issue}46300[#46300])\n+* Fix caching for PreConfiguredTokenFilter {pull}50912[#50912] (issue: {issue}50734[#50734])\n+\n+Audit::\n+* Logfile audit settings validation {pull}52537[#52537] (issues: {issue}47038[#47038], {issue}47711[#47711], {issue}52357[#52357])\n+\n+Authentication::\n+* Fix potential bug in concurrent token refresh support {pull}53668[#53668]\n+* Respect runas realm for ApiKey security operations {pull}52178[#52178] (issue: {issue}51975[#51975])\n+* Preserve ApiKey credentials for async verification {pull}51244[#51244]\n+* Don't fallback to anonymous for tokens/apikeys {pull}51042[#51042] (issue: {issue}50171[#50171])\n+* Fail gracefully on invalid token strings {pull}51014[#51014]\n+\n+Authorization::\n+* Explicitly require that delegate API keys have no privileges {pull}53647[#53647]\n+* Allow _rollup_search with read privilege {pull}52043[#52043] (issue: {issue}50245[#50245])\n+\n+CCR::\n+* Put CCR tasks on (data && remote cluster clients) {pull}54146[#54146] (issue: {issue}53924[#53924])\n+* Handle no such remote cluster exception in ccr {pull}53415[#53415] (issue: {issue}53225[#53225])\n+* Fix shard follow task cleaner under security {pull}52347[#52347] (issues: {issue}44702[#44702], {issue}51971[#51971])\n+\n+CRUD::\n+* Force execution of finish shard bulk request {pull}51957[#51957] (issue: {issue}51904[#51904])\n+* Return 429 status code when there's a read_only cluster block {pull}50166[#50166] (issue: {issue}49393[#49393])\n+\n+Cluster Coordination::\n+* Use special XContent registry for node tool {pull}54050[#54050] (issue: {issue}53549[#53549])\n+* Allow static cluster.max_voting_config_exclusions {pull}53717[#53717] (issue: {issue}53455[#53455])\n+* Allow joining node to trigger term bump {pull}53338[#53338] (issue: {issue}53271[#53271])\n+* Ignore timeouts with single-node discovery {pull}52159[#52159]\n+\n+Distributed::\n+* Execute retention lease syncs under system context {pull}53838[#53838] (issues: {issue}48430[#48430], {issue}53751[#53751])\n+* Exclude nested documents in LuceneChangesSnapshot {pull}51279[#51279]\n+\n+Engine::\n+* Fix doc_stats and segment_stats of ReadOnlyEngine {pull}53345[#53345] (issues: {issue}51303[#51303], {issue}51331[#51331])\n+* Do not wrap soft-deletes reader for segment stats {pull}51331[#51331] (issues: {issue}51192[#51192], {issue}51303[#51303])\n+* Account soft-deletes in FrozenEngine {pull}51192[#51192] (issue: {issue}50775[#50775])\n+\n+Features/CAT APIs::\n+* Fix NPE in RestPluginsAction {pull}52620[#52620] (issue: {issue}45321[#45321])\n+\n+Features/ILM+SLM::\n+* Disallow negative TimeValues {pull}53913[#53913] (issue: {issue}54041[#54041])\n+* Fix null config in SnapshotLifecyclePolicy.toRequest {pull}53328[#53328] (issues: {issue}44465[#44465], {issue}53171[#53171])\n+* Freeze step retry when not acknowledged {pull}53287[#53287]\n+* Make the set-single-node-allocation retryable (#52077) {pull}52138[#52138] (issue: {issue}52077[#52077])\n+* Make the set-single-node-allocation retryable {pull}52077[#52077] (issue: {issue}43401[#43401])\n+* Fix the init step to actually be retryable {pull}52076[#52076]\n+\n+Features/Ingest::\n+* Fix ingest pipeline _simulate api with empty docs never returns a res\u2026 {pull}52937[#52937] (issue: {issue}52833[#52833])\n+* Handle errors when evaluating if conditions in processors {pull}52543[#52543] (issue: {issue}52339[#52339])\n+* Fix delete enrich policy bug {pull}52179[#52179] (issue: {issue}51228[#51228])\n+* Fix ignore_missing in CsvProcessor {pull}51600[#51600]\n+* Missing suffix for German Month \"Juli\" in Grok Pattern MONTH (#51579) {pull}51591[#51591] (issue: {issue}51579[#51579])\n+* Don't overwrite target field with SetSecurityUserProcessor {pull}51454[#51454] (issue: {issue}51428[#51428])\n+\n+Features/Java High Level REST Client::\n+* Add unsupported parameters to HLRC search request {pull}53745[#53745]\n+* Fix AbstractBulkByScrollRequest slices parameter via Rest {pull}53068[#53068] (issue: {issue}53044[#53044])\n+* Send the fields param via body instead of URL params (elastic#42232) {pull}48840[#48840] (issues: {issue}42232[#42232], {issue}42877[#42877])\n+\n+Features/Java Low Level REST Client::\n+* Fix roles parsing in client nodes sniffer {pull}52888[#52888] (issue: {issue}52864[#52864])\n+\n+Features/Monitoring::\n+* Fix NPE in cluster state collector for monitoring {pull}52371[#52371] (issue: {issue}52317[#52317])\n+\n+Features/Stats::\n+* Switch to AtomicLong for \"IngestCurrent\" metric to prevent negative values {pull}52581[#52581] (issues: {issue}52406[#52406], {issue}52411[#52411])\n+\n+Features/Watcher::\n+* Disable Watcher script optimization for stored scripts {pull}53497[#53497] (issue: {issue}40212[#40212])\n+* The watcher indexing listener didn't handle document level exceptions. {pull}51466[#51466] (issue: {issue}32299[#32299])\n+\n+Geo::\n+* Handle properly indexing rectangles that crosses the dateline {pull}53810[#53810]\n+\n+Highlighting::\n+* Fix highlighter support in PinnedQuery and added test {pull}53716[#53716] (issue: {issue}53699[#53699])\n+\n+Infra/Core::\n+* Fix Joda compatibility in stream protocol {pull}53823[#53823] (issue: {issue}53586[#53586])\n+* Avoid self-suppression on grouped action listener {pull}53262[#53262] (issue: {issue}53174[#53174])\n+* Use correct package for `VM` class {pull}52803[#52803] (issue: {issue}47210[#47210])\n+* Ignore virtual ethernet devices that disappear {pull}51581[#51581] (issue: {issue}49914[#49914])\n+* Fix ingest timezone logic {pull}51215[#51215] (issue: {issue}51108[#51108])\n+\n+Infra/Logging::\n+* Fix LoggingOutputStream to work on windows {pull}51779[#51779] (issue: {issue}51532[#51532])\n+\n+Infra/Packaging::\n+* Handle special characters and spaces in JAVA_HOME path in elasticsearch-service.bat {pull}52676[#52676]\n+* Limit _FILE env var support to specific vars {pull}52525[#52525] (issue: {issue}52503[#52503])\n+* Always set default ES_PATH_CONF for package scriptlets {pull}51827[#51827] (issues: {issue}50246[#50246], {issue}50631[#50631])\n+\n+Infra/Plugins::\n+* Ensure only plugin REST tests are run for plugins {pull}53184[#53184] (issues: {issue}52114[#52114], {issue}53183[#53183])\n+\n+Machine Learning::\n+* Fix node serialization on GET df-nalytics stats without id {pull}54808[#54808] (issue: {issue}54807[#54807])\n+* Allow force stopping failed and stopping DF analytics {pull}54650[#54650]\n+* Take more care that normalize processes use unique named pipes {pull}54636[#54636] (issue: {issue}43830[#43830])\n+* Do not fail Evaluate API when the actual and predicted fields' types differ {pull}54255[#54255] (issue: {issue}54079[#54079])\n+* Get ML filters size should default to 100 {pull}54207[#54207] (issues: {issue}39976[#39976], {issue}54206[#54206])\n+* Introduce a \"starting\" datafeed state for lazy jobs {pull}53918[#53918] (issue: {issue}53763[#53763])\n+* Only retry persistence failures when the failure is intermittent and stop retrying when analytics job is stopping {pull}53725[#53725] (issue: {issue}53687[#53687])\n+* [Inference] fix number inference models returned in x-pack info API {pull}53540[#53540]\n+* Make classification evaluation metrics work when there is field mapping type mismatch {pull}53458[#53458] (issue: {issue}53485[#53485])\n+* Perform evaluation in multiple steps when necessary {pull}53295[#53295]\n+* Specifying missing_field_value value and using it instead of empty_string {pull}53108[#53108] (issue: {issue}1034[#1034])\n+* Use event.timezone in ingest pipeline from find_file_structure {pull}52720[#52720] (issue: {issue}9458[#9458])\n+* [Inference] don't return inflated definition when storing trained models {pull}52573[#52573]\n+* Validate tree feature index is within range {pull}52460[#52460]\n+* Better error when persistent task assignment disabled {pull}52014[#52014] (issue: {issue}51956[#51956])\n+* Fix possible race condition starting datafeed {pull}51646[#51646] (issues: {issue}50886[#50886], {issue}51302[#51302])\n+* Fix 2 digit year regex in find_file_structure {pull}51469[#51469]\n+* Fix possible race condition when starting datafeed {pull}51302[#51302] (issue: {issue}51285[#51285])\n+* Validate classification dependent_variable cardinality is at lea\u2026 {pull}51232[#51232]\n+* Do not copy mapping from dependent variable to prediction field in regression analysis {pull}51227[#51227]\n+* Address two edge cases for categorization.GrokPatternCreator#findBestGrokMatchFromExamples {pull}51168[#51168]\n+* Calculate results and snapshot retention using latest bucket timestamps {pull}51061[#51061]\n+\n+Mapping::\n+* Disallow duplicate `dynamic_templates` names {pull}51817[#51817] (issue: {issue}28988[#28988])\n+* Throw better exception on wrong `dynamic_templates` syntax {pull}51783[#51783] (issue: {issue}51486[#51486])\n+\n+Network::\n+* Allow proxy mode server name to be updated {pull}54107[#54107]\n+* Invoke response handler on failure to send {pull}53631[#53631]\n+* Do not log no-op reconnections at DEBUG {pull}53469[#53469]\n+* Fix RemoteConnectionManager size() method {pull}52823[#52823] (issue: {issue}52029[#52029])\n+* Remove seeds dependency for remote cluster settings {pull}52796[#52796]\n+* Add host address to BindTransportException message {pull}51269[#51269] (issue: {issue}48001[#48001])\n+\n+Percolator::\n+* Test percolate queries using `NOW` and sorting {pull}52758[#52758] (issues: {issue}52618[#52618], {issue}52748[#52748])\n+* Don't index ranges including NOW in percolator {pull}52748[#52748] (issue: {issue}52617[#52617])", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "originalPosition": 532}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNTM3OTEz", "url": "https://github.com/elastic/elasticsearch/pull/55019#pullrequestreview-391537913", "createdAt": "2020-04-10T16:37:14Z", "commit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxNjozNzoxNFrOGD_bdQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxNjozNzoxNFrOGD_bdQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjgzODEzMw==", "bodyText": "Looks like this was closed but not merged. It's superseded by #52062, which is still open.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Disallow duplicate `dynamic_templates` names {pull}51817[#51817] (issue: {issue}28988[#28988])", "url": "https://github.com/elastic/elasticsearch/pull/55019#discussion_r406838133", "createdAt": "2020-04-10T16:37:14Z", "author": {"login": "jrodewig"}, "path": "docs/reference/release-notes/7.7.asciidoc", "diffHunk": "@@ -1,22 +1,612 @@\n [[release-notes-7.7.0]]\n == {es} version 7.7.0\n \n-coming[7.7.0]\n+Also see <<breaking-changes-7.7,Breaking changes in 7.7>>.\n \n [[breaking-7.7.0]]\n [float]\n === Breaking changes\n \n+Highlighting::\n+* Highlighters skip ignored keyword values {pull}53408[#53408] (issue: {issue}43800[#43800])\n+\n+Infra/Core::\n+* Remove DEBUG-level default logging from actions {pull}51459[#51459] (issue: {issue}51198[#51198])\n+\n Mapping::\n * Dynamic mappings in indices created on 8.0 and later have stricter validation at mapping update time and\n   results in a deprecation warning for indices created in Elasticsearch 7.7.0 and later.\n-  (e.g. incorrect analyzer settings or unknown field types). {pull}51233[#51233]\n+  (e.g. incorrect analyzer settings or unknown field types). {pull}51233[#51233] (issues: {issue}17411[#17411], {issue}24419[#24419])\n \n Search::\n-* A regression that allowed negative scores in a script_score query was corrected.\n-  A behaviour is restored that throws an error if script_score query produces\n-  a negative score {pull}52478[#52478].\n+* Make range query rounding consistent {pull}50237[#50237] (issue: {issue}50009[#50009])\n * Pipeline aggregation validation errors that used to return HTTP\n   500s/Internal Server Errors now return 400/Bad Request {pull}53669[#53669].\n   As a bonus we now return a list of validation errors rather than returning\n   the first one we encounter.\n+\n+\n+\n+[[breaking-java-7.7.0]]\n+[float]\n+=== Breaking Java changes\n+\n+Infra/Core::\n+* Fix ActionListener.map exception handling {pull}50886[#50886]\n+\n+Machine Learning::\n+* Add expected input field type to trained model config {pull}53083[#53083]\n+\n+Transform::\n+* Enhance the output of preview to return full destination index details {pull}53572[#53572]\n+\n+\n+\n+[[deprecation-7.7.0]]\n+[float]\n+=== Deprecations\n+\n+Allocation::\n+* Deprecated support for delaying state recovery pending master nodes {pull}53646[#53646] (issue: {issue}51806[#51806])\n+\n+Authentication::\n+* Add warnings for invalid realm order config (#51195) {pull}51515[#51515]\n+* Deprecate timeout.tcp_read AD/LDAP realm setting {pull}47305[#47305] (issue: {issue}46028[#46028])\n+\n+Engine::\n+* Deprecate translog retention settings {pull}51588[#51588] (issues: {issue}45473[#45473], {issue}50775[#50775])\n+\n+Features/Features::\n+* Add cluster.remote.connect to deprecation info API {pull}54142[#54142] (issue: {issue}53924[#53924])\n+\n+Infra/Core::\n+* Add deprecation check for listener thread pool {pull}53438[#53438] (issues: {issue}53049[#53049], {issue}53317[#53317])\n+* Deprecate the logstash enabled setting {pull}53367[#53367]\n+* Deprecate the listener thread pool {pull}53266[#53266] (issue: {issue}53049[#53049])\n+* Deprecate creation of dot-prefixed index names except for hidden and system indices {pull}49959[#49959]\n+\n+Infra/REST API::\n+* Deprecate undocumented alternatives to the nodes hot threads API (#52640) {pull}52930[#52930] (issue: {issue}52640[#52640])\n+\n+Machine Learning::\n+* Renaming inference processor field field_mappings to new name field_map {pull}53433[#53433]\n+\n+Search::\n+* Emit deprecation warning when TermsLookup contains a type {pull}53731[#53731] (issue: {issue}41059[#41059])\n+* Deprecate BoolQueryBuilder's mustNot field {pull}53125[#53125]\n+\n+\n+\n+[[feature-7.7.0]]\n+[float]\n+=== New features\n+\n+Aggregations::\n+* Preserve metric types in top_metrics {pull}53288[#53288]\n+* Support multiple metrics in `top_metrics` agg {pull}52965[#52965] (issue: {issue}51813[#51813])\n+* Add size support to `top_metrics` {pull}52662[#52662] (issue: {issue}51813[#51813])\n+* HLRC support for string_stats {pull}52163[#52163]\n+* Add Boxplot Aggregation {pull}51948[#51948] (issue: {issue}33112[#33112])\n+\n+Analysis::\n+* Add nori_number token filter in analysis-nori {pull}53583[#53583]\n+\n+Authentication::\n+* Create API Key on behalf of other user {pull}52886[#52886] (issue: {issue}48716[#48716])\n+\n+Geo::\n+* Add support for distance queries on shape queries {pull}53468[#53468]\n+* Add support for distance queries on geo_shape queries {pull}53466[#53466] (issues: {issue}13351[#13351], {issue}39237[#39237])\n+* Add support for multipoint shape queries {pull}52564[#52564] (issue: {issue}52133[#52133])\n+* Add support for multipoint geoshape queries {pull}52133[#52133] (issue: {issue}37318[#37318])\n+\n+Infra/Core::\n+* Implement hidden indices {pull}50452[#50452] (issues: {issue}50251[#50251], {issue}50665[#50665], {issue}50762[#50762])\n+\n+Infra/Packaging::\n+* Introduce aarch64 packaging {pull}53914[#53914]\n+\n+Machine Learning::\n+* Implement ILM policy for .ml-state* indices {pull}52356[#52356] (issue: {issue}29938[#29938])\n+\n+Mapping::\n+* Introduce a `constant_keyword` field. {pull}49713[#49713]\n+\n+SQL::\n+* constant_keyword support {pull}53241[#53241] (issue: {issue}53016[#53016])\n+* Add optimisations for not-equalities {pull}51088[#51088] (issue: {issue}49637[#49637])\n+* Add support for passing query parameters in REST API calls {pull}51029[#51029] (issue: {issue}42916[#42916])\n+\n+Search::\n+* Introduce compound query {pull}52387[#52387] (issue: {issue}51967[#51967])\n+* Add a cluster setting to disallow expensive queries {pull}51385[#51385] (issue: {issue}29050[#29050])\n+* Add new x-pack endpoints to track the progress of a search asynchronously {pull}49931[#49931] (issue: {issue}49091[#49091])\n+\n+\n+\n+[[enhancement-7.7.0]]\n+[float]\n+=== Enhancements\n+\n+Aggregations::\n+* Try to save memory on aggregations {pull}53793[#53793]\n+* Speed up partial reduce of terms aggregations {pull}53216[#53216] (issue: {issue}51857[#51857])\n+* Simplify SiblingPipelineAggregator {pull}53144[#53144]\n+* Add histogram field type support to boxplot aggs {pull}52265[#52265] (issues: {issue}33112[#33112], {issue}52233[#52233])\n+* Percentiles aggregation validation checks for range {pull}51871[#51871] (issue: {issue}51808[#51808])\n+* Begin moving date_histogram to offset rounding (take two) {pull}51271[#51271] (issues: {issue}50609[#50609], {issue}50873[#50873])\n+* Password-protected Keystore Feature Branch PR {pull}51123[#51123] (issues: {issue}32691[#32691], {issue}49340[#49340])\n+* Implement top_metrics agg {pull}51155[#51155] (issue: {issue}48069[#48069])\n+* Bucket aggregation circuit breaker optimization. {pull}46751[#46751]\n+\n+Analysis::\n+* Removes old Lucene's experimental flag from analyzer documentations {pull}53217[#53217]\n+\n+Authentication::\n+* Add exception metadata for disabled features {pull}52811[#52811] (issues: {issue}47759[#47759], {issue}52311[#52311], {issue}55255[#55255])\n+* Validate role templates before saving role mapping {pull}52636[#52636] (issue: {issue}48773[#48773])\n+* Add support for secondary authentication {pull}52093[#52093]\n+* Expose API key name to the ingest pipeline {pull}51305[#51305] (issues: {issue}46847[#46847], {issue}49106[#49106])\n+* Disallow Password Change when authenticated by Token {pull}49694[#49694] (issue: {issue}48752[#48752])\n+\n+Authorization::\n+* Allow kibana_system to create and invalidate API keys on behalf of other users {pull}53824[#53824] (issue: {issue}48716[#48716])\n+* Add \"grant_api_key\" cluster privilege {pull}53527[#53527] (issues: {issue}48716[#48716], {issue}52886[#52886])\n+* Giving kibana user privileges to create custom link index {pull}53221[#53221] (issue: {issue}59305[#59305])\n+* [APM] Allow kibana to collect APM telemetry in background task {pull}52917[#52917] (issue: {issue}50757[#50757])\n+* Add the new 'maintenance' privilege containing 4 actions (#29998) {pull}50643[#50643]\n+\n+Cluster Coordination::\n+* Describe STALE_STATE_CONFIG in ClusterFormationFH {pull}53878[#53878] (issue: {issue}53734[#53734])\n+\n+Distributed::\n+* Introduce formal role for remote cluster client {pull}53924[#53924]\n+* Shortcut query phase using the results of other shards {pull}51852[#51852] (issues: {issue}49601[#49601], {issue}51708[#51708])\n+* Flush instead of synced-flush inactive shards {pull}49126[#49126] (issues: {issue}31965[#31965], {issue}48430[#48430])\n+\n+Engine::\n+* Restore off-heap loading for term dictionary in ReadOnlyEngine {pull}53713[#53713] (issues: {issue}43158[#43158], {issue}51247[#51247])\n+* Separate translog from index deletion conditions {pull}52556[#52556]\n+* Always rewrite search shard request outside of the search thread pool {pull}51708[#51708] (issue: {issue}49601[#49601])\n+* Move the terms index of `_id` off-heap. {pull}52405[#52405] (issue: {issue}42838[#42838])\n+* Cache completion stats between refreshes {pull}51991[#51991] (issue: {issue}51915[#51915])\n+* Use local checkpoint to calculate min translog gen for recovery {pull}51905[#51905] (issue: {issue}49970[#49970])\n+\n+Features/CAT APIs::\n+* /_cat/shards support path stats {pull}53461[#53461]\n+* Allow _cat indices & aliases to use indices options {pull}53248[#53248] (issue: {issue}52304[#52304])\n+\n+Features/Features::\n+* Enable deprecation checks for removed settings {pull}53317[#53317]\n+\n+Features/ILM+SLM::\n+* Hide ILM & SLM history aliases {pull}53564[#53564]\n+* Avoid race condition in ILMHistorySotre {pull}53039[#53039] (issues: {issue}50353[#50353], {issue}52853[#52853])\n+* Make FreezeStep retryable {pull}52540[#52540]\n+* Make DeleteStep retryable {pull}52494[#52494]\n+* Allow forcemerge in the hot phase for ILM policies {pull}52073[#52073] (issue: {issue}43165[#43165])\n+* Stop policy on last PhaseCompleteStep instead of TerminalPolic\u2026 {pull}51631[#51631] (issue: {issue}48431[#48431])\n+* Convert ILM and SLM histories into hidden indices {pull}51456[#51456]\n+* Make UpdateSettingsStep retryable {pull}51235[#51235] (issues: {issue}44135[#44135], {issue}48183[#48183])\n+* Expose master timeout for ILM actions {pull}51130[#51130] (issue: {issue}44136[#44136])\n+* Wait for active shards on rolled index in a separate step {pull}50718[#50718] (issues: {issue}44135[#44135], {issue}48183[#48183])\n+* Adding best_compression {pull}49974[#49974]\n+\n+Features/Indices APIs::\n+* Add IndexTemplateV2 to MetaData {pull}53753[#53753] (issue: {issue}53101[#53101])\n+* Add ComponentTemplate to MetaData {pull}53290[#53290] (issue: {issue}53101[#53101])\n+\n+Features/Ingest::\n+* Reduce log level for pipeline failure {pull}54097[#54097] (issue: {issue}51459[#51459])\n+* Support array for all string ingest processors {pull}53343[#53343] (issue: {issue}51087[#51087])\n+* Add empty_value parameter to CSV processor {pull}51567[#51567]\n+* Add pipeline name to ingest metadata {pull}50467[#50467] (issue: {issue}42106[#42106])\n+\n+Features/Java High Level REST Client::\n+* SourceExists HLRC uses GetSourceRequest instead of GetRequest {pull}51789[#51789] (issue: {issue}50885[#50885])\n+* Add async_search.submit to HLRC {pull}53592[#53592] (issue: {issue}49091[#49091])\n+* Add Get Source API to the HLRC {pull}50885[#50885] (issue: {issue}47678[#47678])\n+\n+Features/Monitoring::\n+* Secure password for monitoring HTTP exporter {pull}50919[#50919] (issue: {issue}50197[#50197])\n+* Validate SSL settings at parse time {pull}49196[#49196] (issue: {issue}47711[#47711])\n+\n+Features/Stats::\n+* Add analysis components and mapping types to the usage API. {pull}51031[#51031]\n+\n+Features/Watcher::\n+* Make watch history indices hidden {pull}52962[#52962] (issue: {issue}50251[#50251])\n+* Upgrade to the latest OWASP HTML sanitizer {pull}50765[#50765] (issue: {issue}50395[#50395])\n+\n+Infra/Core::\n+* Enable helpful null pointer exceptions {pull}54853[#54853]\n+* Allow keystore add to handle multiple settings {pull}54229[#54229] (issue: {issue}54191[#54191])\n+* Report parser name and location in XContent deprecation warnings {pull}53805[#53805]\n+* Report parser name and location in XContent deprecation warnings {pull}53752[#53752]\n+* Deprecate all variants of a ParseField with no replacement {pull}53722[#53722]\n+* Add a helper method to parse maps of objects {pull}53096[#53096]\n+* Allow specifying an exclusive set of fields on ObjectParser {pull}52893[#52893]\n+* Support joda style date patterns in 7.x {pull}52555[#52555]\n+* Implement hidden aliases {pull}52547[#52547] (issue: {issue}52304[#52304])\n+* Allow ObjectParsers to specify required sets of fields {pull}49661[#49661] (issue: {issue}48824[#48824])\n+\n+Infra/Logging::\n+* Capture stdout and stderr to log4j log {pull}50259[#50259] (issue: {issue}50156[#50156])\n+\n+Infra/Packaging::\n+* Introduce aarch64 Docker image {pull}53936[#53936] (issue: {issue}53914[#53914])\n+* Introduce jvm.options.d for customizing JVM options {pull}51882[#51882] (issue: {issue}51626[#51626])\n+\n+Infra/Plugins::\n+* Allow sha512 checksum without filename for maven plugins {pull}52668[#52668] (issue: {issue}52413[#52413])\n+\n+Infra/Scripting::\n+* Scripting: Context script cache unlimited compile {pull}53769[#53769] (issue: {issue}50152[#50152])\n+* Scripting: Increase ingest script cache defaults {pull}53765[#53765] (issue: {issue}50152[#50152])\n+* Scripting: Per-context script cache, default off (#52855) {pull}53756[#53756] (issues: {issue}50152[#50152], {issue}52855[#52855])\n+* Scripting: Per-context script cache, default off {pull}52855[#52855] (issue: {issue}50152[#50152])\n+* Improve Painless compilation performance for nested conditionals {pull}52056[#52056]\n+* Scripting: Add char position of script errors {pull}51069[#51069] (issue: {issue}50993[#50993])\n+\n+Infra/Settings::\n+* Allow keystore add-file to handle multiple settings {pull}54240[#54240] (issue: {issue}54191[#54191])\n+* Settings: AffixSettings as validator dependencies {pull}52973[#52973] (issue: {issue}52933[#52933])\n+\n+License::\n+* Simplify ml license checking with XpackLicenseState internals {pull}52684[#52684] (issue: {issue}52115[#52115])\n+* License removal leads back to a basic license {pull}52407[#52407] (issue: {issue}45022[#45022])\n+* Refactor license checking {pull}52118[#52118] (issue: {issue}51864[#51864])\n+* Add enterprise mode and refactor {pull}51864[#51864] (issue: {issue}51081[#51081])\n+\n+Machine Learning::\n+* Stratified cross validation split for classification {pull}54087[#54087]\n+* Data frame analytics data counts {pull}53998[#53998]\n+* Verify that the field is aggregatable before attempting cardinality aggregation {pull}53874[#53874] (issue: {issue}53876[#53876])\n+* Adds multi-class feature importance support {pull}53803[#53803]\n+* Data frame analytics analysis stats {pull}53788[#53788]\n+* Add a model memory estimation endpoint for anomaly detection {pull}53507[#53507] (issue: {issue}53219[#53219])\n+* [Inference] adds new default_field_map field to trained models {pull}53294[#53294]\n+* Improve DF analytics audits and logging {pull}53179[#53179]\n+* Add indices_options to datafeed config and update {pull}52793[#52793] (issue: {issue}48056[#48056])\n+* Parse and report memory usage for DF Analytics {pull}52778[#52778]\n+* Adds the class_assignment_objective parameter to classification {pull}52763[#52763] (issue: {issue}52427[#52427])\n+* Add reason to DataFrameAnalyticsTask updateState log message {pull}52659[#52659] (issue: {issue}52654[#52654])\n+* [Inference] Add support for multi-value leaves to the tree model {pull}52531[#52531]\n+* Make ml internal indices hidden {pull}52423[#52423] (issue: {issue}52420[#52420])\n+* Add _cat/ml/data_frame/analytics API {pull}52260[#52260] (issue: {issue}51413[#51413])\n+* Adds feature importance option to inference processor {pull}52218[#52218]\n+* Switch poor categorization audit warning to use status field {pull}52195[#52195] (issues: {issue}50749[#50749], {issue}51146[#51146], {issue}51879[#51879])\n+* Retry persisting DF Analytics results {pull}52048[#52048]\n+* Improve multiline_start_pattern for CSV in find_file_structure {pull}51737[#51737]\n+* Add _cat/ml/trained_models API {pull}51529[#51529] (issue: {issue}51414[#51414])\n+* Add GET _cat/ml/datafeeds {pull}51500[#51500] (issue: {issue}51411[#51411])\n+* Use CSV ingest processor in find_file_structure ingest pipeline {pull}51492[#51492] (issue: {issue}56038[#56038])\n+* Add _cat/ml/anomaly_detectors API {pull}51364[#51364]\n+* [Inference] add tags url param to GET {pull}51330[#51330]\n+* Add parsers for inference configuration classes {pull}51300[#51300]\n+* Make datafeeds work with nanosecond time fields {pull}51180[#51180] (issue: {issue}49889[#49889])\n+* Add audit warning for 1000 categories found early in job {pull}51146[#51146] (issue: {issue}50749[#50749])\n+* Adds support for a global calendars {pull}50372[#50372] (issue: {issue}45013[#45013])\n+\n+Mapping::\n+* Wildcard field - add normalizer support {pull}53851[#53851]\n+* Wildcard field - added case insensitive search option {pull}53814[#53814]\n+* Append index name for the source of the cluster put-mapping task {pull}52690[#52690]\n+\n+Network::\n+* Give helpful message on remote connections disabled {pull}53690[#53690]\n+* Add server name to remote info API {pull}53634[#53634]\n+* Log when probe succeeds but full connection fails {pull}51304[#51304]\n+* Encrypt generated key with AES {pull}51019[#51019] (issue: {issue}50843[#50843])\n+\n+Ranking::\n+* Adds recall@k metric to rank eval API {pull}52577[#52577] (issue: {issue}51676[#51676])\n+\n+SQL::\n+* Jdbc debugging enhancement {pull}53880[#53880]\n+* Transfer version compatibility decision to the server {pull}53082[#53082] (issue: {issue}52766[#52766])\n+* Use a proper error message for queries directed at empty mapping indices {pull}52967[#52967] (issue: {issue}52865[#52865])\n+* Use calendar_interval of 1d for HISTOGRAMs with 1 DAY intervals {pull}52749[#52749] (issue: {issue}52713[#52713])\n+* Use a calendar interval for histograms over 1 month intervals {pull}52586[#52586] (issue: {issue}51538[#51538])\n+* Make parsing of date more lenient {pull}52137[#52137] (issue: {issue}49379[#49379])\n+* Enhance timestamp escaped literal parsing {pull}52097[#52097] (issue: {issue}46069[#46069])\n+* Handle uberjar scenario where the ES jdbc driver file is bundled in another jar {pull}51856[#51856] (issue: {issue}50201[#50201])\n+* Verify Full-Text Search functions not allowed in SELECT {pull}51568[#51568] (issue: {issue}47446[#47446])\n+* Extend the optimisations for equalities {pull}50792[#50792] (issue: {issue}49637[#49637])\n+* Add trace logging for search responses coming from server {pull}50530[#50530]\n+* Extend DATE_TRUNC to also operate on intervals(elastic - #46632 ) {pull}47720[#47720] (issue: {issue}46632[#46632])\n+* Enchance output of explain for optimized plan {pull}33718[#33718]\n+\n+Search::\n+* HLRC: Don't send defaults for SubmitAsyncSearchRequest {pull}54200[#54200]\n+* Reduce performance impact of ExitableDirectoryReader {pull}53978[#53978] (issues: {issue}52822[#52822], {issue}53166[#53166], {issue}53496[#53496])\n+* Add heuristics to compute pre_filter_shard_size when unspecified {pull}53873[#53873] (issue: {issue}39835[#39835])\n+* Add async_search get and delete APIs to HLRC {pull}53828[#53828] (issue: {issue}49091[#49091])\n+* Increase step between checks for cancellation {pull}53712[#53712] (issues: {issue}52822[#52822], {issue}53496[#53496])\n+* Refine SearchProgressListener internal API {pull}53373[#53373]\n+* Check for query cancellation during rewrite {pull}53166[#53166] (issue: {issue}52822[#52822])\n+* Implement Cancellable DirectoryReader {pull}52822[#52822]\n+* Address MinAndMax generics warnings {pull}52642[#52642] (issue: {issue}49092[#49092])\n+* Clarify when shard iterators get sorted {pull}52633[#52633]\n+* Generalize how queries on `_index` are handled at rewrite time {pull}52486[#52486] (issues: {issue}49254[#49254], {issue}49713[#49713])\n+* Remove the query builder serialization from QueryShardException message {pull}51885[#51885] (issues: {issue}48910[#48910], {issue}51843[#51843])\n+* Short circuited to MatchNone for non-participating  slice {pull}51207[#51207]\n+* Add \"did you mean\" to unknown queries {pull}51177[#51177]\n+* Exclude unmapped fields during max clause limit checking for querying {pull}49523[#49523] (issue: {issue}49002[#49002])\n+\n+Security::\n+* Add error message in JSON response {pull}54389[#54389]\n+\n+Snapshot/Restore::\n+* Use Azure Bulk Deletes in Azure Repository {pull}53919[#53919] (issue: {issue}53865[#53865])\n+* Only link fd* files during source-only snapshot {pull}53463[#53463] (issue: {issue}50231[#50231])\n+* Add Blob Download Retries to GCS Repository {pull}52479[#52479] (issues: {issue}46589[#46589], {issue}52319[#52319])\n+* Better Incrementality for Snapshots of Unchanged Shards {pull}52182[#52182]\n+* Add Region and Signer Algorithm Overrides to S3 Repos {pull}52112[#52112] (issue: {issue}51861[#51861])\n+* Allow Parallel Snapshot Restore And Delete {pull}51608[#51608] (issue: {issue}41463[#41463])\n+\n+Store::\n+* HybridDirectory should mmap postings. {pull}52641[#52641]\n+\n+Transform::\n+* Transition Transforms to using hidden indices for notifcations index {pull}53773[#53773] (issue: {issue}53762[#53762])\n+* [Rollup] add processing stats to record the time spent for processing results {pull}53770[#53770]\n+* Create GET _cat/transforms API Issue {pull}53643[#53643] (issue: {issue}51412[#51412])\n+* Add support for script in group_by {pull}53167[#53167] (issue: {issue}43152[#43152])\n+* Implement node.transform to control where to run a transform {pull}52712[#52712] (issues: {issue}48734[#48734], {issue}50033[#50033], {issue}52200[#52200])\n+* Add support for filter aggregation {pull}52483[#52483] (issue: {issue}52151[#52151])\n+* Provide exponential_avg* stats for batch transforms {pull}52041[#52041] (issue: {issue}52037[#52037])\n+* Improve irrecoverable error detection - part 2 {pull}52003[#52003] (issue: {issue}51820[#51820])\n+* Mark transform API's stable {pull}51862[#51862]\n+* Improve irrecoverable error detection {pull}51820[#51820] (issue: {issue}50135[#50135])\n+* Add support for percentile aggs {pull}51808[#51808] (issue: {issue}51663[#51663])\n+* Disallow fieldnames with a dot at start and/or end {pull}51369[#51369]\n+* Avoid mapping problems with index templates {pull}51368[#51368] (issue: {issue}51321[#51321])\n+* Handle permanent bulk indexing errors {pull}51307[#51307] (issue: {issue}50122[#50122])\n+* Improve force stop robustness in case of an error {pull}51072[#51072]\n+\n+\n+\n+[[bug-7.7.0]]\n+[float]\n+=== Bug fixes\n+\n+Aggregations::\n+* Fix date_nanos in composite aggs {pull}53315[#53315] (issue: {issue}53168[#53168])\n+* Fix composite agg sort bug {pull}53296[#53296] (issue: {issue}52480[#52480])\n+* Decode max and min optimization more carefully {pull}52336[#52336] (issue: {issue}52220[#52220])\n+* Fix a DST error in date_histogram {pull}52016[#52016] (issue: {issue}50265[#50265])\n+* Use #name() instead of #simpleName() when generating doc values {pull}51920[#51920] (issues: {issue}50307[#50307], {issue}51847[#51847])\n+* Fix a sneaky bug in rare_terms {pull}51868[#51868] (issue: {issue}51020[#51020])\n+* Support time_zone on composite's date_histogram {pull}51172[#51172] (issues: {issue}45199[#45199], {issue}45200[#45200])\n+\n+Allocation::\n+* Improve performance of shards limits decider {pull}53577[#53577] (issue: {issue}53559[#53559])\n+\n+Analysis::\n+* Mask wildcard query special characters on keyword queries {pull}53127[#53127] (issue: {issue}46300[#46300])\n+* Fix caching for PreConfiguredTokenFilter {pull}50912[#50912] (issue: {issue}50734[#50734])\n+\n+Audit::\n+* Logfile audit settings validation {pull}52537[#52537] (issues: {issue}47038[#47038], {issue}47711[#47711], {issue}52357[#52357])\n+\n+Authentication::\n+* Fix potential bug in concurrent token refresh support {pull}53668[#53668]\n+* Respect runas realm for ApiKey security operations {pull}52178[#52178] (issue: {issue}51975[#51975])\n+* Preserve ApiKey credentials for async verification {pull}51244[#51244]\n+* Don't fallback to anonymous for tokens/apikeys {pull}51042[#51042] (issue: {issue}50171[#50171])\n+* Fail gracefully on invalid token strings {pull}51014[#51014]\n+\n+Authorization::\n+* Explicitly require that delegate API keys have no privileges {pull}53647[#53647]\n+* Allow _rollup_search with read privilege {pull}52043[#52043] (issue: {issue}50245[#50245])\n+\n+CCR::\n+* Put CCR tasks on (data && remote cluster clients) {pull}54146[#54146] (issue: {issue}53924[#53924])\n+* Handle no such remote cluster exception in ccr {pull}53415[#53415] (issue: {issue}53225[#53225])\n+* Fix shard follow task cleaner under security {pull}52347[#52347] (issues: {issue}44702[#44702], {issue}51971[#51971])\n+\n+CRUD::\n+* Force execution of finish shard bulk request {pull}51957[#51957] (issue: {issue}51904[#51904])\n+* Return 429 status code when there's a read_only cluster block {pull}50166[#50166] (issue: {issue}49393[#49393])\n+\n+Cluster Coordination::\n+* Use special XContent registry for node tool {pull}54050[#54050] (issue: {issue}53549[#53549])\n+* Allow static cluster.max_voting_config_exclusions {pull}53717[#53717] (issue: {issue}53455[#53455])\n+* Allow joining node to trigger term bump {pull}53338[#53338] (issue: {issue}53271[#53271])\n+* Ignore timeouts with single-node discovery {pull}52159[#52159]\n+\n+Distributed::\n+* Execute retention lease syncs under system context {pull}53838[#53838] (issues: {issue}48430[#48430], {issue}53751[#53751])\n+* Exclude nested documents in LuceneChangesSnapshot {pull}51279[#51279]\n+\n+Engine::\n+* Fix doc_stats and segment_stats of ReadOnlyEngine {pull}53345[#53345] (issues: {issue}51303[#51303], {issue}51331[#51331])\n+* Do not wrap soft-deletes reader for segment stats {pull}51331[#51331] (issues: {issue}51192[#51192], {issue}51303[#51303])\n+* Account soft-deletes in FrozenEngine {pull}51192[#51192] (issue: {issue}50775[#50775])\n+\n+Features/CAT APIs::\n+* Fix NPE in RestPluginsAction {pull}52620[#52620] (issue: {issue}45321[#45321])\n+\n+Features/ILM+SLM::\n+* Disallow negative TimeValues {pull}53913[#53913] (issue: {issue}54041[#54041])\n+* Fix null config in SnapshotLifecyclePolicy.toRequest {pull}53328[#53328] (issues: {issue}44465[#44465], {issue}53171[#53171])\n+* Freeze step retry when not acknowledged {pull}53287[#53287]\n+* Make the set-single-node-allocation retryable (#52077) {pull}52138[#52138] (issue: {issue}52077[#52077])\n+* Make the set-single-node-allocation retryable {pull}52077[#52077] (issue: {issue}43401[#43401])\n+* Fix the init step to actually be retryable {pull}52076[#52076]\n+\n+Features/Ingest::\n+* Fix ingest pipeline _simulate api with empty docs never returns a res\u2026 {pull}52937[#52937] (issue: {issue}52833[#52833])\n+* Handle errors when evaluating if conditions in processors {pull}52543[#52543] (issue: {issue}52339[#52339])\n+* Fix delete enrich policy bug {pull}52179[#52179] (issue: {issue}51228[#51228])\n+* Fix ignore_missing in CsvProcessor {pull}51600[#51600]\n+* Missing suffix for German Month \"Juli\" in Grok Pattern MONTH (#51579) {pull}51591[#51591] (issue: {issue}51579[#51579])\n+* Don't overwrite target field with SetSecurityUserProcessor {pull}51454[#51454] (issue: {issue}51428[#51428])\n+\n+Features/Java High Level REST Client::\n+* Add unsupported parameters to HLRC search request {pull}53745[#53745]\n+* Fix AbstractBulkByScrollRequest slices parameter via Rest {pull}53068[#53068] (issue: {issue}53044[#53044])\n+* Send the fields param via body instead of URL params (elastic#42232) {pull}48840[#48840] (issues: {issue}42232[#42232], {issue}42877[#42877])\n+\n+Features/Java Low Level REST Client::\n+* Fix roles parsing in client nodes sniffer {pull}52888[#52888] (issue: {issue}52864[#52864])\n+\n+Features/Monitoring::\n+* Fix NPE in cluster state collector for monitoring {pull}52371[#52371] (issue: {issue}52317[#52317])\n+\n+Features/Stats::\n+* Switch to AtomicLong for \"IngestCurrent\" metric to prevent negative values {pull}52581[#52581] (issues: {issue}52406[#52406], {issue}52411[#52411])\n+\n+Features/Watcher::\n+* Disable Watcher script optimization for stored scripts {pull}53497[#53497] (issue: {issue}40212[#40212])\n+* The watcher indexing listener didn't handle document level exceptions. {pull}51466[#51466] (issue: {issue}32299[#32299])\n+\n+Geo::\n+* Handle properly indexing rectangles that crosses the dateline {pull}53810[#53810]\n+\n+Highlighting::\n+* Fix highlighter support in PinnedQuery and added test {pull}53716[#53716] (issue: {issue}53699[#53699])\n+\n+Infra/Core::\n+* Fix Joda compatibility in stream protocol {pull}53823[#53823] (issue: {issue}53586[#53586])\n+* Avoid self-suppression on grouped action listener {pull}53262[#53262] (issue: {issue}53174[#53174])\n+* Use correct package for `VM` class {pull}52803[#52803] (issue: {issue}47210[#47210])\n+* Ignore virtual ethernet devices that disappear {pull}51581[#51581] (issue: {issue}49914[#49914])\n+* Fix ingest timezone logic {pull}51215[#51215] (issue: {issue}51108[#51108])\n+\n+Infra/Logging::\n+* Fix LoggingOutputStream to work on windows {pull}51779[#51779] (issue: {issue}51532[#51532])\n+\n+Infra/Packaging::\n+* Handle special characters and spaces in JAVA_HOME path in elasticsearch-service.bat {pull}52676[#52676]\n+* Limit _FILE env var support to specific vars {pull}52525[#52525] (issue: {issue}52503[#52503])\n+* Always set default ES_PATH_CONF for package scriptlets {pull}51827[#51827] (issues: {issue}50246[#50246], {issue}50631[#50631])\n+\n+Infra/Plugins::\n+* Ensure only plugin REST tests are run for plugins {pull}53184[#53184] (issues: {issue}52114[#52114], {issue}53183[#53183])\n+\n+Machine Learning::\n+* Fix node serialization on GET df-nalytics stats without id {pull}54808[#54808] (issue: {issue}54807[#54807])\n+* Allow force stopping failed and stopping DF analytics {pull}54650[#54650]\n+* Take more care that normalize processes use unique named pipes {pull}54636[#54636] (issue: {issue}43830[#43830])\n+* Do not fail Evaluate API when the actual and predicted fields' types differ {pull}54255[#54255] (issue: {issue}54079[#54079])\n+* Get ML filters size should default to 100 {pull}54207[#54207] (issues: {issue}39976[#39976], {issue}54206[#54206])\n+* Introduce a \"starting\" datafeed state for lazy jobs {pull}53918[#53918] (issue: {issue}53763[#53763])\n+* Only retry persistence failures when the failure is intermittent and stop retrying when analytics job is stopping {pull}53725[#53725] (issue: {issue}53687[#53687])\n+* [Inference] fix number inference models returned in x-pack info API {pull}53540[#53540]\n+* Make classification evaluation metrics work when there is field mapping type mismatch {pull}53458[#53458] (issue: {issue}53485[#53485])\n+* Perform evaluation in multiple steps when necessary {pull}53295[#53295]\n+* Specifying missing_field_value value and using it instead of empty_string {pull}53108[#53108] (issue: {issue}1034[#1034])\n+* Use event.timezone in ingest pipeline from find_file_structure {pull}52720[#52720] (issue: {issue}9458[#9458])\n+* [Inference] don't return inflated definition when storing trained models {pull}52573[#52573]\n+* Validate tree feature index is within range {pull}52460[#52460]\n+* Better error when persistent task assignment disabled {pull}52014[#52014] (issue: {issue}51956[#51956])\n+* Fix possible race condition starting datafeed {pull}51646[#51646] (issues: {issue}50886[#50886], {issue}51302[#51302])\n+* Fix 2 digit year regex in find_file_structure {pull}51469[#51469]\n+* Fix possible race condition when starting datafeed {pull}51302[#51302] (issue: {issue}51285[#51285])\n+* Validate classification dependent_variable cardinality is at lea\u2026 {pull}51232[#51232]\n+* Do not copy mapping from dependent variable to prediction field in regression analysis {pull}51227[#51227]\n+* Address two edge cases for categorization.GrokPatternCreator#findBestGrokMatchFromExamples {pull}51168[#51168]\n+* Calculate results and snapshot retention using latest bucket timestamps {pull}51061[#51061]\n+\n+Mapping::\n+* Disallow duplicate `dynamic_templates` names {pull}51817[#51817] (issue: {issue}28988[#28988])", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "originalPosition": 519}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNTM4NDM3", "url": "https://github.com/elastic/elasticsearch/pull/55019#pullrequestreview-391538437", "createdAt": "2020-04-10T16:38:14Z", "commit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxNjozODoxNFrOGD_dIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxNjozODoxNFrOGD_dIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjgzODU2Mg==", "bodyText": "This got truncated.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Validate classification dependent_variable cardinality is at lea\u2026 {pull}51232[#51232]\n          \n          \n            \n            * Validate classification dependent_variable cardinality is at least two {pull}51232[#51232]", "url": "https://github.com/elastic/elasticsearch/pull/55019#discussion_r406838562", "createdAt": "2020-04-10T16:38:14Z", "author": {"login": "jrodewig"}, "path": "docs/reference/release-notes/7.7.asciidoc", "diffHunk": "@@ -1,22 +1,612 @@\n [[release-notes-7.7.0]]\n == {es} version 7.7.0\n \n-coming[7.7.0]\n+Also see <<breaking-changes-7.7,Breaking changes in 7.7>>.\n \n [[breaking-7.7.0]]\n [float]\n === Breaking changes\n \n+Highlighting::\n+* Highlighters skip ignored keyword values {pull}53408[#53408] (issue: {issue}43800[#43800])\n+\n+Infra/Core::\n+* Remove DEBUG-level default logging from actions {pull}51459[#51459] (issue: {issue}51198[#51198])\n+\n Mapping::\n * Dynamic mappings in indices created on 8.0 and later have stricter validation at mapping update time and\n   results in a deprecation warning for indices created in Elasticsearch 7.7.0 and later.\n-  (e.g. incorrect analyzer settings or unknown field types). {pull}51233[#51233]\n+  (e.g. incorrect analyzer settings or unknown field types). {pull}51233[#51233] (issues: {issue}17411[#17411], {issue}24419[#24419])\n \n Search::\n-* A regression that allowed negative scores in a script_score query was corrected.\n-  A behaviour is restored that throws an error if script_score query produces\n-  a negative score {pull}52478[#52478].\n+* Make range query rounding consistent {pull}50237[#50237] (issue: {issue}50009[#50009])\n * Pipeline aggregation validation errors that used to return HTTP\n   500s/Internal Server Errors now return 400/Bad Request {pull}53669[#53669].\n   As a bonus we now return a list of validation errors rather than returning\n   the first one we encounter.\n+\n+\n+\n+[[breaking-java-7.7.0]]\n+[float]\n+=== Breaking Java changes\n+\n+Infra/Core::\n+* Fix ActionListener.map exception handling {pull}50886[#50886]\n+\n+Machine Learning::\n+* Add expected input field type to trained model config {pull}53083[#53083]\n+\n+Transform::\n+* Enhance the output of preview to return full destination index details {pull}53572[#53572]\n+\n+\n+\n+[[deprecation-7.7.0]]\n+[float]\n+=== Deprecations\n+\n+Allocation::\n+* Deprecated support for delaying state recovery pending master nodes {pull}53646[#53646] (issue: {issue}51806[#51806])\n+\n+Authentication::\n+* Add warnings for invalid realm order config (#51195) {pull}51515[#51515]\n+* Deprecate timeout.tcp_read AD/LDAP realm setting {pull}47305[#47305] (issue: {issue}46028[#46028])\n+\n+Engine::\n+* Deprecate translog retention settings {pull}51588[#51588] (issues: {issue}45473[#45473], {issue}50775[#50775])\n+\n+Features/Features::\n+* Add cluster.remote.connect to deprecation info API {pull}54142[#54142] (issue: {issue}53924[#53924])\n+\n+Infra/Core::\n+* Add deprecation check for listener thread pool {pull}53438[#53438] (issues: {issue}53049[#53049], {issue}53317[#53317])\n+* Deprecate the logstash enabled setting {pull}53367[#53367]\n+* Deprecate the listener thread pool {pull}53266[#53266] (issue: {issue}53049[#53049])\n+* Deprecate creation of dot-prefixed index names except for hidden and system indices {pull}49959[#49959]\n+\n+Infra/REST API::\n+* Deprecate undocumented alternatives to the nodes hot threads API (#52640) {pull}52930[#52930] (issue: {issue}52640[#52640])\n+\n+Machine Learning::\n+* Renaming inference processor field field_mappings to new name field_map {pull}53433[#53433]\n+\n+Search::\n+* Emit deprecation warning when TermsLookup contains a type {pull}53731[#53731] (issue: {issue}41059[#41059])\n+* Deprecate BoolQueryBuilder's mustNot field {pull}53125[#53125]\n+\n+\n+\n+[[feature-7.7.0]]\n+[float]\n+=== New features\n+\n+Aggregations::\n+* Preserve metric types in top_metrics {pull}53288[#53288]\n+* Support multiple metrics in `top_metrics` agg {pull}52965[#52965] (issue: {issue}51813[#51813])\n+* Add size support to `top_metrics` {pull}52662[#52662] (issue: {issue}51813[#51813])\n+* HLRC support for string_stats {pull}52163[#52163]\n+* Add Boxplot Aggregation {pull}51948[#51948] (issue: {issue}33112[#33112])\n+\n+Analysis::\n+* Add nori_number token filter in analysis-nori {pull}53583[#53583]\n+\n+Authentication::\n+* Create API Key on behalf of other user {pull}52886[#52886] (issue: {issue}48716[#48716])\n+\n+Geo::\n+* Add support for distance queries on shape queries {pull}53468[#53468]\n+* Add support for distance queries on geo_shape queries {pull}53466[#53466] (issues: {issue}13351[#13351], {issue}39237[#39237])\n+* Add support for multipoint shape queries {pull}52564[#52564] (issue: {issue}52133[#52133])\n+* Add support for multipoint geoshape queries {pull}52133[#52133] (issue: {issue}37318[#37318])\n+\n+Infra/Core::\n+* Implement hidden indices {pull}50452[#50452] (issues: {issue}50251[#50251], {issue}50665[#50665], {issue}50762[#50762])\n+\n+Infra/Packaging::\n+* Introduce aarch64 packaging {pull}53914[#53914]\n+\n+Machine Learning::\n+* Implement ILM policy for .ml-state* indices {pull}52356[#52356] (issue: {issue}29938[#29938])\n+\n+Mapping::\n+* Introduce a `constant_keyword` field. {pull}49713[#49713]\n+\n+SQL::\n+* constant_keyword support {pull}53241[#53241] (issue: {issue}53016[#53016])\n+* Add optimisations for not-equalities {pull}51088[#51088] (issue: {issue}49637[#49637])\n+* Add support for passing query parameters in REST API calls {pull}51029[#51029] (issue: {issue}42916[#42916])\n+\n+Search::\n+* Introduce compound query {pull}52387[#52387] (issue: {issue}51967[#51967])\n+* Add a cluster setting to disallow expensive queries {pull}51385[#51385] (issue: {issue}29050[#29050])\n+* Add new x-pack endpoints to track the progress of a search asynchronously {pull}49931[#49931] (issue: {issue}49091[#49091])\n+\n+\n+\n+[[enhancement-7.7.0]]\n+[float]\n+=== Enhancements\n+\n+Aggregations::\n+* Try to save memory on aggregations {pull}53793[#53793]\n+* Speed up partial reduce of terms aggregations {pull}53216[#53216] (issue: {issue}51857[#51857])\n+* Simplify SiblingPipelineAggregator {pull}53144[#53144]\n+* Add histogram field type support to boxplot aggs {pull}52265[#52265] (issues: {issue}33112[#33112], {issue}52233[#52233])\n+* Percentiles aggregation validation checks for range {pull}51871[#51871] (issue: {issue}51808[#51808])\n+* Begin moving date_histogram to offset rounding (take two) {pull}51271[#51271] (issues: {issue}50609[#50609], {issue}50873[#50873])\n+* Password-protected Keystore Feature Branch PR {pull}51123[#51123] (issues: {issue}32691[#32691], {issue}49340[#49340])\n+* Implement top_metrics agg {pull}51155[#51155] (issue: {issue}48069[#48069])\n+* Bucket aggregation circuit breaker optimization. {pull}46751[#46751]\n+\n+Analysis::\n+* Removes old Lucene's experimental flag from analyzer documentations {pull}53217[#53217]\n+\n+Authentication::\n+* Add exception metadata for disabled features {pull}52811[#52811] (issues: {issue}47759[#47759], {issue}52311[#52311], {issue}55255[#55255])\n+* Validate role templates before saving role mapping {pull}52636[#52636] (issue: {issue}48773[#48773])\n+* Add support for secondary authentication {pull}52093[#52093]\n+* Expose API key name to the ingest pipeline {pull}51305[#51305] (issues: {issue}46847[#46847], {issue}49106[#49106])\n+* Disallow Password Change when authenticated by Token {pull}49694[#49694] (issue: {issue}48752[#48752])\n+\n+Authorization::\n+* Allow kibana_system to create and invalidate API keys on behalf of other users {pull}53824[#53824] (issue: {issue}48716[#48716])\n+* Add \"grant_api_key\" cluster privilege {pull}53527[#53527] (issues: {issue}48716[#48716], {issue}52886[#52886])\n+* Giving kibana user privileges to create custom link index {pull}53221[#53221] (issue: {issue}59305[#59305])\n+* [APM] Allow kibana to collect APM telemetry in background task {pull}52917[#52917] (issue: {issue}50757[#50757])\n+* Add the new 'maintenance' privilege containing 4 actions (#29998) {pull}50643[#50643]\n+\n+Cluster Coordination::\n+* Describe STALE_STATE_CONFIG in ClusterFormationFH {pull}53878[#53878] (issue: {issue}53734[#53734])\n+\n+Distributed::\n+* Introduce formal role for remote cluster client {pull}53924[#53924]\n+* Shortcut query phase using the results of other shards {pull}51852[#51852] (issues: {issue}49601[#49601], {issue}51708[#51708])\n+* Flush instead of synced-flush inactive shards {pull}49126[#49126] (issues: {issue}31965[#31965], {issue}48430[#48430])\n+\n+Engine::\n+* Restore off-heap loading for term dictionary in ReadOnlyEngine {pull}53713[#53713] (issues: {issue}43158[#43158], {issue}51247[#51247])\n+* Separate translog from index deletion conditions {pull}52556[#52556]\n+* Always rewrite search shard request outside of the search thread pool {pull}51708[#51708] (issue: {issue}49601[#49601])\n+* Move the terms index of `_id` off-heap. {pull}52405[#52405] (issue: {issue}42838[#42838])\n+* Cache completion stats between refreshes {pull}51991[#51991] (issue: {issue}51915[#51915])\n+* Use local checkpoint to calculate min translog gen for recovery {pull}51905[#51905] (issue: {issue}49970[#49970])\n+\n+Features/CAT APIs::\n+* /_cat/shards support path stats {pull}53461[#53461]\n+* Allow _cat indices & aliases to use indices options {pull}53248[#53248] (issue: {issue}52304[#52304])\n+\n+Features/Features::\n+* Enable deprecation checks for removed settings {pull}53317[#53317]\n+\n+Features/ILM+SLM::\n+* Hide ILM & SLM history aliases {pull}53564[#53564]\n+* Avoid race condition in ILMHistorySotre {pull}53039[#53039] (issues: {issue}50353[#50353], {issue}52853[#52853])\n+* Make FreezeStep retryable {pull}52540[#52540]\n+* Make DeleteStep retryable {pull}52494[#52494]\n+* Allow forcemerge in the hot phase for ILM policies {pull}52073[#52073] (issue: {issue}43165[#43165])\n+* Stop policy on last PhaseCompleteStep instead of TerminalPolic\u2026 {pull}51631[#51631] (issue: {issue}48431[#48431])\n+* Convert ILM and SLM histories into hidden indices {pull}51456[#51456]\n+* Make UpdateSettingsStep retryable {pull}51235[#51235] (issues: {issue}44135[#44135], {issue}48183[#48183])\n+* Expose master timeout for ILM actions {pull}51130[#51130] (issue: {issue}44136[#44136])\n+* Wait for active shards on rolled index in a separate step {pull}50718[#50718] (issues: {issue}44135[#44135], {issue}48183[#48183])\n+* Adding best_compression {pull}49974[#49974]\n+\n+Features/Indices APIs::\n+* Add IndexTemplateV2 to MetaData {pull}53753[#53753] (issue: {issue}53101[#53101])\n+* Add ComponentTemplate to MetaData {pull}53290[#53290] (issue: {issue}53101[#53101])\n+\n+Features/Ingest::\n+* Reduce log level for pipeline failure {pull}54097[#54097] (issue: {issue}51459[#51459])\n+* Support array for all string ingest processors {pull}53343[#53343] (issue: {issue}51087[#51087])\n+* Add empty_value parameter to CSV processor {pull}51567[#51567]\n+* Add pipeline name to ingest metadata {pull}50467[#50467] (issue: {issue}42106[#42106])\n+\n+Features/Java High Level REST Client::\n+* SourceExists HLRC uses GetSourceRequest instead of GetRequest {pull}51789[#51789] (issue: {issue}50885[#50885])\n+* Add async_search.submit to HLRC {pull}53592[#53592] (issue: {issue}49091[#49091])\n+* Add Get Source API to the HLRC {pull}50885[#50885] (issue: {issue}47678[#47678])\n+\n+Features/Monitoring::\n+* Secure password for monitoring HTTP exporter {pull}50919[#50919] (issue: {issue}50197[#50197])\n+* Validate SSL settings at parse time {pull}49196[#49196] (issue: {issue}47711[#47711])\n+\n+Features/Stats::\n+* Add analysis components and mapping types to the usage API. {pull}51031[#51031]\n+\n+Features/Watcher::\n+* Make watch history indices hidden {pull}52962[#52962] (issue: {issue}50251[#50251])\n+* Upgrade to the latest OWASP HTML sanitizer {pull}50765[#50765] (issue: {issue}50395[#50395])\n+\n+Infra/Core::\n+* Enable helpful null pointer exceptions {pull}54853[#54853]\n+* Allow keystore add to handle multiple settings {pull}54229[#54229] (issue: {issue}54191[#54191])\n+* Report parser name and location in XContent deprecation warnings {pull}53805[#53805]\n+* Report parser name and location in XContent deprecation warnings {pull}53752[#53752]\n+* Deprecate all variants of a ParseField with no replacement {pull}53722[#53722]\n+* Add a helper method to parse maps of objects {pull}53096[#53096]\n+* Allow specifying an exclusive set of fields on ObjectParser {pull}52893[#52893]\n+* Support joda style date patterns in 7.x {pull}52555[#52555]\n+* Implement hidden aliases {pull}52547[#52547] (issue: {issue}52304[#52304])\n+* Allow ObjectParsers to specify required sets of fields {pull}49661[#49661] (issue: {issue}48824[#48824])\n+\n+Infra/Logging::\n+* Capture stdout and stderr to log4j log {pull}50259[#50259] (issue: {issue}50156[#50156])\n+\n+Infra/Packaging::\n+* Introduce aarch64 Docker image {pull}53936[#53936] (issue: {issue}53914[#53914])\n+* Introduce jvm.options.d for customizing JVM options {pull}51882[#51882] (issue: {issue}51626[#51626])\n+\n+Infra/Plugins::\n+* Allow sha512 checksum without filename for maven plugins {pull}52668[#52668] (issue: {issue}52413[#52413])\n+\n+Infra/Scripting::\n+* Scripting: Context script cache unlimited compile {pull}53769[#53769] (issue: {issue}50152[#50152])\n+* Scripting: Increase ingest script cache defaults {pull}53765[#53765] (issue: {issue}50152[#50152])\n+* Scripting: Per-context script cache, default off (#52855) {pull}53756[#53756] (issues: {issue}50152[#50152], {issue}52855[#52855])\n+* Scripting: Per-context script cache, default off {pull}52855[#52855] (issue: {issue}50152[#50152])\n+* Improve Painless compilation performance for nested conditionals {pull}52056[#52056]\n+* Scripting: Add char position of script errors {pull}51069[#51069] (issue: {issue}50993[#50993])\n+\n+Infra/Settings::\n+* Allow keystore add-file to handle multiple settings {pull}54240[#54240] (issue: {issue}54191[#54191])\n+* Settings: AffixSettings as validator dependencies {pull}52973[#52973] (issue: {issue}52933[#52933])\n+\n+License::\n+* Simplify ml license checking with XpackLicenseState internals {pull}52684[#52684] (issue: {issue}52115[#52115])\n+* License removal leads back to a basic license {pull}52407[#52407] (issue: {issue}45022[#45022])\n+* Refactor license checking {pull}52118[#52118] (issue: {issue}51864[#51864])\n+* Add enterprise mode and refactor {pull}51864[#51864] (issue: {issue}51081[#51081])\n+\n+Machine Learning::\n+* Stratified cross validation split for classification {pull}54087[#54087]\n+* Data frame analytics data counts {pull}53998[#53998]\n+* Verify that the field is aggregatable before attempting cardinality aggregation {pull}53874[#53874] (issue: {issue}53876[#53876])\n+* Adds multi-class feature importance support {pull}53803[#53803]\n+* Data frame analytics analysis stats {pull}53788[#53788]\n+* Add a model memory estimation endpoint for anomaly detection {pull}53507[#53507] (issue: {issue}53219[#53219])\n+* [Inference] adds new default_field_map field to trained models {pull}53294[#53294]\n+* Improve DF analytics audits and logging {pull}53179[#53179]\n+* Add indices_options to datafeed config and update {pull}52793[#52793] (issue: {issue}48056[#48056])\n+* Parse and report memory usage for DF Analytics {pull}52778[#52778]\n+* Adds the class_assignment_objective parameter to classification {pull}52763[#52763] (issue: {issue}52427[#52427])\n+* Add reason to DataFrameAnalyticsTask updateState log message {pull}52659[#52659] (issue: {issue}52654[#52654])\n+* [Inference] Add support for multi-value leaves to the tree model {pull}52531[#52531]\n+* Make ml internal indices hidden {pull}52423[#52423] (issue: {issue}52420[#52420])\n+* Add _cat/ml/data_frame/analytics API {pull}52260[#52260] (issue: {issue}51413[#51413])\n+* Adds feature importance option to inference processor {pull}52218[#52218]\n+* Switch poor categorization audit warning to use status field {pull}52195[#52195] (issues: {issue}50749[#50749], {issue}51146[#51146], {issue}51879[#51879])\n+* Retry persisting DF Analytics results {pull}52048[#52048]\n+* Improve multiline_start_pattern for CSV in find_file_structure {pull}51737[#51737]\n+* Add _cat/ml/trained_models API {pull}51529[#51529] (issue: {issue}51414[#51414])\n+* Add GET _cat/ml/datafeeds {pull}51500[#51500] (issue: {issue}51411[#51411])\n+* Use CSV ingest processor in find_file_structure ingest pipeline {pull}51492[#51492] (issue: {issue}56038[#56038])\n+* Add _cat/ml/anomaly_detectors API {pull}51364[#51364]\n+* [Inference] add tags url param to GET {pull}51330[#51330]\n+* Add parsers for inference configuration classes {pull}51300[#51300]\n+* Make datafeeds work with nanosecond time fields {pull}51180[#51180] (issue: {issue}49889[#49889])\n+* Add audit warning for 1000 categories found early in job {pull}51146[#51146] (issue: {issue}50749[#50749])\n+* Adds support for a global calendars {pull}50372[#50372] (issue: {issue}45013[#45013])\n+\n+Mapping::\n+* Wildcard field - add normalizer support {pull}53851[#53851]\n+* Wildcard field - added case insensitive search option {pull}53814[#53814]\n+* Append index name for the source of the cluster put-mapping task {pull}52690[#52690]\n+\n+Network::\n+* Give helpful message on remote connections disabled {pull}53690[#53690]\n+* Add server name to remote info API {pull}53634[#53634]\n+* Log when probe succeeds but full connection fails {pull}51304[#51304]\n+* Encrypt generated key with AES {pull}51019[#51019] (issue: {issue}50843[#50843])\n+\n+Ranking::\n+* Adds recall@k metric to rank eval API {pull}52577[#52577] (issue: {issue}51676[#51676])\n+\n+SQL::\n+* Jdbc debugging enhancement {pull}53880[#53880]\n+* Transfer version compatibility decision to the server {pull}53082[#53082] (issue: {issue}52766[#52766])\n+* Use a proper error message for queries directed at empty mapping indices {pull}52967[#52967] (issue: {issue}52865[#52865])\n+* Use calendar_interval of 1d for HISTOGRAMs with 1 DAY intervals {pull}52749[#52749] (issue: {issue}52713[#52713])\n+* Use a calendar interval for histograms over 1 month intervals {pull}52586[#52586] (issue: {issue}51538[#51538])\n+* Make parsing of date more lenient {pull}52137[#52137] (issue: {issue}49379[#49379])\n+* Enhance timestamp escaped literal parsing {pull}52097[#52097] (issue: {issue}46069[#46069])\n+* Handle uberjar scenario where the ES jdbc driver file is bundled in another jar {pull}51856[#51856] (issue: {issue}50201[#50201])\n+* Verify Full-Text Search functions not allowed in SELECT {pull}51568[#51568] (issue: {issue}47446[#47446])\n+* Extend the optimisations for equalities {pull}50792[#50792] (issue: {issue}49637[#49637])\n+* Add trace logging for search responses coming from server {pull}50530[#50530]\n+* Extend DATE_TRUNC to also operate on intervals(elastic - #46632 ) {pull}47720[#47720] (issue: {issue}46632[#46632])\n+* Enchance output of explain for optimized plan {pull}33718[#33718]\n+\n+Search::\n+* HLRC: Don't send defaults for SubmitAsyncSearchRequest {pull}54200[#54200]\n+* Reduce performance impact of ExitableDirectoryReader {pull}53978[#53978] (issues: {issue}52822[#52822], {issue}53166[#53166], {issue}53496[#53496])\n+* Add heuristics to compute pre_filter_shard_size when unspecified {pull}53873[#53873] (issue: {issue}39835[#39835])\n+* Add async_search get and delete APIs to HLRC {pull}53828[#53828] (issue: {issue}49091[#49091])\n+* Increase step between checks for cancellation {pull}53712[#53712] (issues: {issue}52822[#52822], {issue}53496[#53496])\n+* Refine SearchProgressListener internal API {pull}53373[#53373]\n+* Check for query cancellation during rewrite {pull}53166[#53166] (issue: {issue}52822[#52822])\n+* Implement Cancellable DirectoryReader {pull}52822[#52822]\n+* Address MinAndMax generics warnings {pull}52642[#52642] (issue: {issue}49092[#49092])\n+* Clarify when shard iterators get sorted {pull}52633[#52633]\n+* Generalize how queries on `_index` are handled at rewrite time {pull}52486[#52486] (issues: {issue}49254[#49254], {issue}49713[#49713])\n+* Remove the query builder serialization from QueryShardException message {pull}51885[#51885] (issues: {issue}48910[#48910], {issue}51843[#51843])\n+* Short circuited to MatchNone for non-participating  slice {pull}51207[#51207]\n+* Add \"did you mean\" to unknown queries {pull}51177[#51177]\n+* Exclude unmapped fields during max clause limit checking for querying {pull}49523[#49523] (issue: {issue}49002[#49002])\n+\n+Security::\n+* Add error message in JSON response {pull}54389[#54389]\n+\n+Snapshot/Restore::\n+* Use Azure Bulk Deletes in Azure Repository {pull}53919[#53919] (issue: {issue}53865[#53865])\n+* Only link fd* files during source-only snapshot {pull}53463[#53463] (issue: {issue}50231[#50231])\n+* Add Blob Download Retries to GCS Repository {pull}52479[#52479] (issues: {issue}46589[#46589], {issue}52319[#52319])\n+* Better Incrementality for Snapshots of Unchanged Shards {pull}52182[#52182]\n+* Add Region and Signer Algorithm Overrides to S3 Repos {pull}52112[#52112] (issue: {issue}51861[#51861])\n+* Allow Parallel Snapshot Restore And Delete {pull}51608[#51608] (issue: {issue}41463[#41463])\n+\n+Store::\n+* HybridDirectory should mmap postings. {pull}52641[#52641]\n+\n+Transform::\n+* Transition Transforms to using hidden indices for notifcations index {pull}53773[#53773] (issue: {issue}53762[#53762])\n+* [Rollup] add processing stats to record the time spent for processing results {pull}53770[#53770]\n+* Create GET _cat/transforms API Issue {pull}53643[#53643] (issue: {issue}51412[#51412])\n+* Add support for script in group_by {pull}53167[#53167] (issue: {issue}43152[#43152])\n+* Implement node.transform to control where to run a transform {pull}52712[#52712] (issues: {issue}48734[#48734], {issue}50033[#50033], {issue}52200[#52200])\n+* Add support for filter aggregation {pull}52483[#52483] (issue: {issue}52151[#52151])\n+* Provide exponential_avg* stats for batch transforms {pull}52041[#52041] (issue: {issue}52037[#52037])\n+* Improve irrecoverable error detection - part 2 {pull}52003[#52003] (issue: {issue}51820[#51820])\n+* Mark transform API's stable {pull}51862[#51862]\n+* Improve irrecoverable error detection {pull}51820[#51820] (issue: {issue}50135[#50135])\n+* Add support for percentile aggs {pull}51808[#51808] (issue: {issue}51663[#51663])\n+* Disallow fieldnames with a dot at start and/or end {pull}51369[#51369]\n+* Avoid mapping problems with index templates {pull}51368[#51368] (issue: {issue}51321[#51321])\n+* Handle permanent bulk indexing errors {pull}51307[#51307] (issue: {issue}50122[#50122])\n+* Improve force stop robustness in case of an error {pull}51072[#51072]\n+\n+\n+\n+[[bug-7.7.0]]\n+[float]\n+=== Bug fixes\n+\n+Aggregations::\n+* Fix date_nanos in composite aggs {pull}53315[#53315] (issue: {issue}53168[#53168])\n+* Fix composite agg sort bug {pull}53296[#53296] (issue: {issue}52480[#52480])\n+* Decode max and min optimization more carefully {pull}52336[#52336] (issue: {issue}52220[#52220])\n+* Fix a DST error in date_histogram {pull}52016[#52016] (issue: {issue}50265[#50265])\n+* Use #name() instead of #simpleName() when generating doc values {pull}51920[#51920] (issues: {issue}50307[#50307], {issue}51847[#51847])\n+* Fix a sneaky bug in rare_terms {pull}51868[#51868] (issue: {issue}51020[#51020])\n+* Support time_zone on composite's date_histogram {pull}51172[#51172] (issues: {issue}45199[#45199], {issue}45200[#45200])\n+\n+Allocation::\n+* Improve performance of shards limits decider {pull}53577[#53577] (issue: {issue}53559[#53559])\n+\n+Analysis::\n+* Mask wildcard query special characters on keyword queries {pull}53127[#53127] (issue: {issue}46300[#46300])\n+* Fix caching for PreConfiguredTokenFilter {pull}50912[#50912] (issue: {issue}50734[#50734])\n+\n+Audit::\n+* Logfile audit settings validation {pull}52537[#52537] (issues: {issue}47038[#47038], {issue}47711[#47711], {issue}52357[#52357])\n+\n+Authentication::\n+* Fix potential bug in concurrent token refresh support {pull}53668[#53668]\n+* Respect runas realm for ApiKey security operations {pull}52178[#52178] (issue: {issue}51975[#51975])\n+* Preserve ApiKey credentials for async verification {pull}51244[#51244]\n+* Don't fallback to anonymous for tokens/apikeys {pull}51042[#51042] (issue: {issue}50171[#50171])\n+* Fail gracefully on invalid token strings {pull}51014[#51014]\n+\n+Authorization::\n+* Explicitly require that delegate API keys have no privileges {pull}53647[#53647]\n+* Allow _rollup_search with read privilege {pull}52043[#52043] (issue: {issue}50245[#50245])\n+\n+CCR::\n+* Put CCR tasks on (data && remote cluster clients) {pull}54146[#54146] (issue: {issue}53924[#53924])\n+* Handle no such remote cluster exception in ccr {pull}53415[#53415] (issue: {issue}53225[#53225])\n+* Fix shard follow task cleaner under security {pull}52347[#52347] (issues: {issue}44702[#44702], {issue}51971[#51971])\n+\n+CRUD::\n+* Force execution of finish shard bulk request {pull}51957[#51957] (issue: {issue}51904[#51904])\n+* Return 429 status code when there's a read_only cluster block {pull}50166[#50166] (issue: {issue}49393[#49393])\n+\n+Cluster Coordination::\n+* Use special XContent registry for node tool {pull}54050[#54050] (issue: {issue}53549[#53549])\n+* Allow static cluster.max_voting_config_exclusions {pull}53717[#53717] (issue: {issue}53455[#53455])\n+* Allow joining node to trigger term bump {pull}53338[#53338] (issue: {issue}53271[#53271])\n+* Ignore timeouts with single-node discovery {pull}52159[#52159]\n+\n+Distributed::\n+* Execute retention lease syncs under system context {pull}53838[#53838] (issues: {issue}48430[#48430], {issue}53751[#53751])\n+* Exclude nested documents in LuceneChangesSnapshot {pull}51279[#51279]\n+\n+Engine::\n+* Fix doc_stats and segment_stats of ReadOnlyEngine {pull}53345[#53345] (issues: {issue}51303[#51303], {issue}51331[#51331])\n+* Do not wrap soft-deletes reader for segment stats {pull}51331[#51331] (issues: {issue}51192[#51192], {issue}51303[#51303])\n+* Account soft-deletes in FrozenEngine {pull}51192[#51192] (issue: {issue}50775[#50775])\n+\n+Features/CAT APIs::\n+* Fix NPE in RestPluginsAction {pull}52620[#52620] (issue: {issue}45321[#45321])\n+\n+Features/ILM+SLM::\n+* Disallow negative TimeValues {pull}53913[#53913] (issue: {issue}54041[#54041])\n+* Fix null config in SnapshotLifecyclePolicy.toRequest {pull}53328[#53328] (issues: {issue}44465[#44465], {issue}53171[#53171])\n+* Freeze step retry when not acknowledged {pull}53287[#53287]\n+* Make the set-single-node-allocation retryable (#52077) {pull}52138[#52138] (issue: {issue}52077[#52077])\n+* Make the set-single-node-allocation retryable {pull}52077[#52077] (issue: {issue}43401[#43401])\n+* Fix the init step to actually be retryable {pull}52076[#52076]\n+\n+Features/Ingest::\n+* Fix ingest pipeline _simulate api with empty docs never returns a res\u2026 {pull}52937[#52937] (issue: {issue}52833[#52833])\n+* Handle errors when evaluating if conditions in processors {pull}52543[#52543] (issue: {issue}52339[#52339])\n+* Fix delete enrich policy bug {pull}52179[#52179] (issue: {issue}51228[#51228])\n+* Fix ignore_missing in CsvProcessor {pull}51600[#51600]\n+* Missing suffix for German Month \"Juli\" in Grok Pattern MONTH (#51579) {pull}51591[#51591] (issue: {issue}51579[#51579])\n+* Don't overwrite target field with SetSecurityUserProcessor {pull}51454[#51454] (issue: {issue}51428[#51428])\n+\n+Features/Java High Level REST Client::\n+* Add unsupported parameters to HLRC search request {pull}53745[#53745]\n+* Fix AbstractBulkByScrollRequest slices parameter via Rest {pull}53068[#53068] (issue: {issue}53044[#53044])\n+* Send the fields param via body instead of URL params (elastic#42232) {pull}48840[#48840] (issues: {issue}42232[#42232], {issue}42877[#42877])\n+\n+Features/Java Low Level REST Client::\n+* Fix roles parsing in client nodes sniffer {pull}52888[#52888] (issue: {issue}52864[#52864])\n+\n+Features/Monitoring::\n+* Fix NPE in cluster state collector for monitoring {pull}52371[#52371] (issue: {issue}52317[#52317])\n+\n+Features/Stats::\n+* Switch to AtomicLong for \"IngestCurrent\" metric to prevent negative values {pull}52581[#52581] (issues: {issue}52406[#52406], {issue}52411[#52411])\n+\n+Features/Watcher::\n+* Disable Watcher script optimization for stored scripts {pull}53497[#53497] (issue: {issue}40212[#40212])\n+* The watcher indexing listener didn't handle document level exceptions. {pull}51466[#51466] (issue: {issue}32299[#32299])\n+\n+Geo::\n+* Handle properly indexing rectangles that crosses the dateline {pull}53810[#53810]\n+\n+Highlighting::\n+* Fix highlighter support in PinnedQuery and added test {pull}53716[#53716] (issue: {issue}53699[#53699])\n+\n+Infra/Core::\n+* Fix Joda compatibility in stream protocol {pull}53823[#53823] (issue: {issue}53586[#53586])\n+* Avoid self-suppression on grouped action listener {pull}53262[#53262] (issue: {issue}53174[#53174])\n+* Use correct package for `VM` class {pull}52803[#52803] (issue: {issue}47210[#47210])\n+* Ignore virtual ethernet devices that disappear {pull}51581[#51581] (issue: {issue}49914[#49914])\n+* Fix ingest timezone logic {pull}51215[#51215] (issue: {issue}51108[#51108])\n+\n+Infra/Logging::\n+* Fix LoggingOutputStream to work on windows {pull}51779[#51779] (issue: {issue}51532[#51532])\n+\n+Infra/Packaging::\n+* Handle special characters and spaces in JAVA_HOME path in elasticsearch-service.bat {pull}52676[#52676]\n+* Limit _FILE env var support to specific vars {pull}52525[#52525] (issue: {issue}52503[#52503])\n+* Always set default ES_PATH_CONF for package scriptlets {pull}51827[#51827] (issues: {issue}50246[#50246], {issue}50631[#50631])\n+\n+Infra/Plugins::\n+* Ensure only plugin REST tests are run for plugins {pull}53184[#53184] (issues: {issue}52114[#52114], {issue}53183[#53183])\n+\n+Machine Learning::\n+* Fix node serialization on GET df-nalytics stats without id {pull}54808[#54808] (issue: {issue}54807[#54807])\n+* Allow force stopping failed and stopping DF analytics {pull}54650[#54650]\n+* Take more care that normalize processes use unique named pipes {pull}54636[#54636] (issue: {issue}43830[#43830])\n+* Do not fail Evaluate API when the actual and predicted fields' types differ {pull}54255[#54255] (issue: {issue}54079[#54079])\n+* Get ML filters size should default to 100 {pull}54207[#54207] (issues: {issue}39976[#39976], {issue}54206[#54206])\n+* Introduce a \"starting\" datafeed state for lazy jobs {pull}53918[#53918] (issue: {issue}53763[#53763])\n+* Only retry persistence failures when the failure is intermittent and stop retrying when analytics job is stopping {pull}53725[#53725] (issue: {issue}53687[#53687])\n+* [Inference] fix number inference models returned in x-pack info API {pull}53540[#53540]\n+* Make classification evaluation metrics work when there is field mapping type mismatch {pull}53458[#53458] (issue: {issue}53485[#53485])\n+* Perform evaluation in multiple steps when necessary {pull}53295[#53295]\n+* Specifying missing_field_value value and using it instead of empty_string {pull}53108[#53108] (issue: {issue}1034[#1034])\n+* Use event.timezone in ingest pipeline from find_file_structure {pull}52720[#52720] (issue: {issue}9458[#9458])\n+* [Inference] don't return inflated definition when storing trained models {pull}52573[#52573]\n+* Validate tree feature index is within range {pull}52460[#52460]\n+* Better error when persistent task assignment disabled {pull}52014[#52014] (issue: {issue}51956[#51956])\n+* Fix possible race condition starting datafeed {pull}51646[#51646] (issues: {issue}50886[#50886], {issue}51302[#51302])\n+* Fix 2 digit year regex in find_file_structure {pull}51469[#51469]\n+* Fix possible race condition when starting datafeed {pull}51302[#51302] (issue: {issue}51285[#51285])\n+* Validate classification dependent_variable cardinality is at lea\u2026 {pull}51232[#51232]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "originalPosition": 513}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNTc1NDc4", "url": "https://github.com/elastic/elasticsearch/pull/55019#pullrequestreview-391575478", "createdAt": "2020-04-10T17:52:42Z", "commit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxNzo1Mjo0MlrOGEBYOQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxNzo1Mjo0MlrOGEBYOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg3MDA3Mw==", "bodyText": "This was closed but not merged.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Use correct package for `VM` class {pull}52803[#52803] (issue: {issue}47210[#47210])", "url": "https://github.com/elastic/elasticsearch/pull/55019#discussion_r406870073", "createdAt": "2020-04-10T17:52:42Z", "author": {"login": "jrodewig"}, "path": "docs/reference/release-notes/7.7.asciidoc", "diffHunk": "@@ -1,22 +1,612 @@\n [[release-notes-7.7.0]]\n == {es} version 7.7.0\n \n-coming[7.7.0]\n+Also see <<breaking-changes-7.7,Breaking changes in 7.7>>.\n \n [[breaking-7.7.0]]\n [float]\n === Breaking changes\n \n+Highlighting::\n+* Highlighters skip ignored keyword values {pull}53408[#53408] (issue: {issue}43800[#43800])\n+\n+Infra/Core::\n+* Remove DEBUG-level default logging from actions {pull}51459[#51459] (issue: {issue}51198[#51198])\n+\n Mapping::\n * Dynamic mappings in indices created on 8.0 and later have stricter validation at mapping update time and\n   results in a deprecation warning for indices created in Elasticsearch 7.7.0 and later.\n-  (e.g. incorrect analyzer settings or unknown field types). {pull}51233[#51233]\n+  (e.g. incorrect analyzer settings or unknown field types). {pull}51233[#51233] (issues: {issue}17411[#17411], {issue}24419[#24419])\n \n Search::\n-* A regression that allowed negative scores in a script_score query was corrected.\n-  A behaviour is restored that throws an error if script_score query produces\n-  a negative score {pull}52478[#52478].\n+* Make range query rounding consistent {pull}50237[#50237] (issue: {issue}50009[#50009])\n * Pipeline aggregation validation errors that used to return HTTP\n   500s/Internal Server Errors now return 400/Bad Request {pull}53669[#53669].\n   As a bonus we now return a list of validation errors rather than returning\n   the first one we encounter.\n+\n+\n+\n+[[breaking-java-7.7.0]]\n+[float]\n+=== Breaking Java changes\n+\n+Infra/Core::\n+* Fix ActionListener.map exception handling {pull}50886[#50886]\n+\n+Machine Learning::\n+* Add expected input field type to trained model config {pull}53083[#53083]\n+\n+Transform::\n+* Enhance the output of preview to return full destination index details {pull}53572[#53572]\n+\n+\n+\n+[[deprecation-7.7.0]]\n+[float]\n+=== Deprecations\n+\n+Allocation::\n+* Deprecated support for delaying state recovery pending master nodes {pull}53646[#53646] (issue: {issue}51806[#51806])\n+\n+Authentication::\n+* Add warnings for invalid realm order config (#51195) {pull}51515[#51515]\n+* Deprecate timeout.tcp_read AD/LDAP realm setting {pull}47305[#47305] (issue: {issue}46028[#46028])\n+\n+Engine::\n+* Deprecate translog retention settings {pull}51588[#51588] (issues: {issue}45473[#45473], {issue}50775[#50775])\n+\n+Features/Features::\n+* Add cluster.remote.connect to deprecation info API {pull}54142[#54142] (issue: {issue}53924[#53924])\n+\n+Infra/Core::\n+* Add deprecation check for listener thread pool {pull}53438[#53438] (issues: {issue}53049[#53049], {issue}53317[#53317])\n+* Deprecate the logstash enabled setting {pull}53367[#53367]\n+* Deprecate the listener thread pool {pull}53266[#53266] (issue: {issue}53049[#53049])\n+* Deprecate creation of dot-prefixed index names except for hidden and system indices {pull}49959[#49959]\n+\n+Infra/REST API::\n+* Deprecate undocumented alternatives to the nodes hot threads API (#52640) {pull}52930[#52930] (issue: {issue}52640[#52640])\n+\n+Machine Learning::\n+* Renaming inference processor field field_mappings to new name field_map {pull}53433[#53433]\n+\n+Search::\n+* Emit deprecation warning when TermsLookup contains a type {pull}53731[#53731] (issue: {issue}41059[#41059])\n+* Deprecate BoolQueryBuilder's mustNot field {pull}53125[#53125]\n+\n+\n+\n+[[feature-7.7.0]]\n+[float]\n+=== New features\n+\n+Aggregations::\n+* Preserve metric types in top_metrics {pull}53288[#53288]\n+* Support multiple metrics in `top_metrics` agg {pull}52965[#52965] (issue: {issue}51813[#51813])\n+* Add size support to `top_metrics` {pull}52662[#52662] (issue: {issue}51813[#51813])\n+* HLRC support for string_stats {pull}52163[#52163]\n+* Add Boxplot Aggregation {pull}51948[#51948] (issue: {issue}33112[#33112])\n+\n+Analysis::\n+* Add nori_number token filter in analysis-nori {pull}53583[#53583]\n+\n+Authentication::\n+* Create API Key on behalf of other user {pull}52886[#52886] (issue: {issue}48716[#48716])\n+\n+Geo::\n+* Add support for distance queries on shape queries {pull}53468[#53468]\n+* Add support for distance queries on geo_shape queries {pull}53466[#53466] (issues: {issue}13351[#13351], {issue}39237[#39237])\n+* Add support for multipoint shape queries {pull}52564[#52564] (issue: {issue}52133[#52133])\n+* Add support for multipoint geoshape queries {pull}52133[#52133] (issue: {issue}37318[#37318])\n+\n+Infra/Core::\n+* Implement hidden indices {pull}50452[#50452] (issues: {issue}50251[#50251], {issue}50665[#50665], {issue}50762[#50762])\n+\n+Infra/Packaging::\n+* Introduce aarch64 packaging {pull}53914[#53914]\n+\n+Machine Learning::\n+* Implement ILM policy for .ml-state* indices {pull}52356[#52356] (issue: {issue}29938[#29938])\n+\n+Mapping::\n+* Introduce a `constant_keyword` field. {pull}49713[#49713]\n+\n+SQL::\n+* constant_keyword support {pull}53241[#53241] (issue: {issue}53016[#53016])\n+* Add optimisations for not-equalities {pull}51088[#51088] (issue: {issue}49637[#49637])\n+* Add support for passing query parameters in REST API calls {pull}51029[#51029] (issue: {issue}42916[#42916])\n+\n+Search::\n+* Introduce compound query {pull}52387[#52387] (issue: {issue}51967[#51967])\n+* Add a cluster setting to disallow expensive queries {pull}51385[#51385] (issue: {issue}29050[#29050])\n+* Add new x-pack endpoints to track the progress of a search asynchronously {pull}49931[#49931] (issue: {issue}49091[#49091])\n+\n+\n+\n+[[enhancement-7.7.0]]\n+[float]\n+=== Enhancements\n+\n+Aggregations::\n+* Try to save memory on aggregations {pull}53793[#53793]\n+* Speed up partial reduce of terms aggregations {pull}53216[#53216] (issue: {issue}51857[#51857])\n+* Simplify SiblingPipelineAggregator {pull}53144[#53144]\n+* Add histogram field type support to boxplot aggs {pull}52265[#52265] (issues: {issue}33112[#33112], {issue}52233[#52233])\n+* Percentiles aggregation validation checks for range {pull}51871[#51871] (issue: {issue}51808[#51808])\n+* Begin moving date_histogram to offset rounding (take two) {pull}51271[#51271] (issues: {issue}50609[#50609], {issue}50873[#50873])\n+* Password-protected Keystore Feature Branch PR {pull}51123[#51123] (issues: {issue}32691[#32691], {issue}49340[#49340])\n+* Implement top_metrics agg {pull}51155[#51155] (issue: {issue}48069[#48069])\n+* Bucket aggregation circuit breaker optimization. {pull}46751[#46751]\n+\n+Analysis::\n+* Removes old Lucene's experimental flag from analyzer documentations {pull}53217[#53217]\n+\n+Authentication::\n+* Add exception metadata for disabled features {pull}52811[#52811] (issues: {issue}47759[#47759], {issue}52311[#52311], {issue}55255[#55255])\n+* Validate role templates before saving role mapping {pull}52636[#52636] (issue: {issue}48773[#48773])\n+* Add support for secondary authentication {pull}52093[#52093]\n+* Expose API key name to the ingest pipeline {pull}51305[#51305] (issues: {issue}46847[#46847], {issue}49106[#49106])\n+* Disallow Password Change when authenticated by Token {pull}49694[#49694] (issue: {issue}48752[#48752])\n+\n+Authorization::\n+* Allow kibana_system to create and invalidate API keys on behalf of other users {pull}53824[#53824] (issue: {issue}48716[#48716])\n+* Add \"grant_api_key\" cluster privilege {pull}53527[#53527] (issues: {issue}48716[#48716], {issue}52886[#52886])\n+* Giving kibana user privileges to create custom link index {pull}53221[#53221] (issue: {issue}59305[#59305])\n+* [APM] Allow kibana to collect APM telemetry in background task {pull}52917[#52917] (issue: {issue}50757[#50757])\n+* Add the new 'maintenance' privilege containing 4 actions (#29998) {pull}50643[#50643]\n+\n+Cluster Coordination::\n+* Describe STALE_STATE_CONFIG in ClusterFormationFH {pull}53878[#53878] (issue: {issue}53734[#53734])\n+\n+Distributed::\n+* Introduce formal role for remote cluster client {pull}53924[#53924]\n+* Shortcut query phase using the results of other shards {pull}51852[#51852] (issues: {issue}49601[#49601], {issue}51708[#51708])\n+* Flush instead of synced-flush inactive shards {pull}49126[#49126] (issues: {issue}31965[#31965], {issue}48430[#48430])\n+\n+Engine::\n+* Restore off-heap loading for term dictionary in ReadOnlyEngine {pull}53713[#53713] (issues: {issue}43158[#43158], {issue}51247[#51247])\n+* Separate translog from index deletion conditions {pull}52556[#52556]\n+* Always rewrite search shard request outside of the search thread pool {pull}51708[#51708] (issue: {issue}49601[#49601])\n+* Move the terms index of `_id` off-heap. {pull}52405[#52405] (issue: {issue}42838[#42838])\n+* Cache completion stats between refreshes {pull}51991[#51991] (issue: {issue}51915[#51915])\n+* Use local checkpoint to calculate min translog gen for recovery {pull}51905[#51905] (issue: {issue}49970[#49970])\n+\n+Features/CAT APIs::\n+* /_cat/shards support path stats {pull}53461[#53461]\n+* Allow _cat indices & aliases to use indices options {pull}53248[#53248] (issue: {issue}52304[#52304])\n+\n+Features/Features::\n+* Enable deprecation checks for removed settings {pull}53317[#53317]\n+\n+Features/ILM+SLM::\n+* Hide ILM & SLM history aliases {pull}53564[#53564]\n+* Avoid race condition in ILMHistorySotre {pull}53039[#53039] (issues: {issue}50353[#50353], {issue}52853[#52853])\n+* Make FreezeStep retryable {pull}52540[#52540]\n+* Make DeleteStep retryable {pull}52494[#52494]\n+* Allow forcemerge in the hot phase for ILM policies {pull}52073[#52073] (issue: {issue}43165[#43165])\n+* Stop policy on last PhaseCompleteStep instead of TerminalPolic\u2026 {pull}51631[#51631] (issue: {issue}48431[#48431])\n+* Convert ILM and SLM histories into hidden indices {pull}51456[#51456]\n+* Make UpdateSettingsStep retryable {pull}51235[#51235] (issues: {issue}44135[#44135], {issue}48183[#48183])\n+* Expose master timeout for ILM actions {pull}51130[#51130] (issue: {issue}44136[#44136])\n+* Wait for active shards on rolled index in a separate step {pull}50718[#50718] (issues: {issue}44135[#44135], {issue}48183[#48183])\n+* Adding best_compression {pull}49974[#49974]\n+\n+Features/Indices APIs::\n+* Add IndexTemplateV2 to MetaData {pull}53753[#53753] (issue: {issue}53101[#53101])\n+* Add ComponentTemplate to MetaData {pull}53290[#53290] (issue: {issue}53101[#53101])\n+\n+Features/Ingest::\n+* Reduce log level for pipeline failure {pull}54097[#54097] (issue: {issue}51459[#51459])\n+* Support array for all string ingest processors {pull}53343[#53343] (issue: {issue}51087[#51087])\n+* Add empty_value parameter to CSV processor {pull}51567[#51567]\n+* Add pipeline name to ingest metadata {pull}50467[#50467] (issue: {issue}42106[#42106])\n+\n+Features/Java High Level REST Client::\n+* SourceExists HLRC uses GetSourceRequest instead of GetRequest {pull}51789[#51789] (issue: {issue}50885[#50885])\n+* Add async_search.submit to HLRC {pull}53592[#53592] (issue: {issue}49091[#49091])\n+* Add Get Source API to the HLRC {pull}50885[#50885] (issue: {issue}47678[#47678])\n+\n+Features/Monitoring::\n+* Secure password for monitoring HTTP exporter {pull}50919[#50919] (issue: {issue}50197[#50197])\n+* Validate SSL settings at parse time {pull}49196[#49196] (issue: {issue}47711[#47711])\n+\n+Features/Stats::\n+* Add analysis components and mapping types to the usage API. {pull}51031[#51031]\n+\n+Features/Watcher::\n+* Make watch history indices hidden {pull}52962[#52962] (issue: {issue}50251[#50251])\n+* Upgrade to the latest OWASP HTML sanitizer {pull}50765[#50765] (issue: {issue}50395[#50395])\n+\n+Infra/Core::\n+* Enable helpful null pointer exceptions {pull}54853[#54853]\n+* Allow keystore add to handle multiple settings {pull}54229[#54229] (issue: {issue}54191[#54191])\n+* Report parser name and location in XContent deprecation warnings {pull}53805[#53805]\n+* Report parser name and location in XContent deprecation warnings {pull}53752[#53752]\n+* Deprecate all variants of a ParseField with no replacement {pull}53722[#53722]\n+* Add a helper method to parse maps of objects {pull}53096[#53096]\n+* Allow specifying an exclusive set of fields on ObjectParser {pull}52893[#52893]\n+* Support joda style date patterns in 7.x {pull}52555[#52555]\n+* Implement hidden aliases {pull}52547[#52547] (issue: {issue}52304[#52304])\n+* Allow ObjectParsers to specify required sets of fields {pull}49661[#49661] (issue: {issue}48824[#48824])\n+\n+Infra/Logging::\n+* Capture stdout and stderr to log4j log {pull}50259[#50259] (issue: {issue}50156[#50156])\n+\n+Infra/Packaging::\n+* Introduce aarch64 Docker image {pull}53936[#53936] (issue: {issue}53914[#53914])\n+* Introduce jvm.options.d for customizing JVM options {pull}51882[#51882] (issue: {issue}51626[#51626])\n+\n+Infra/Plugins::\n+* Allow sha512 checksum without filename for maven plugins {pull}52668[#52668] (issue: {issue}52413[#52413])\n+\n+Infra/Scripting::\n+* Scripting: Context script cache unlimited compile {pull}53769[#53769] (issue: {issue}50152[#50152])\n+* Scripting: Increase ingest script cache defaults {pull}53765[#53765] (issue: {issue}50152[#50152])\n+* Scripting: Per-context script cache, default off (#52855) {pull}53756[#53756] (issues: {issue}50152[#50152], {issue}52855[#52855])\n+* Scripting: Per-context script cache, default off {pull}52855[#52855] (issue: {issue}50152[#50152])\n+* Improve Painless compilation performance for nested conditionals {pull}52056[#52056]\n+* Scripting: Add char position of script errors {pull}51069[#51069] (issue: {issue}50993[#50993])\n+\n+Infra/Settings::\n+* Allow keystore add-file to handle multiple settings {pull}54240[#54240] (issue: {issue}54191[#54191])\n+* Settings: AffixSettings as validator dependencies {pull}52973[#52973] (issue: {issue}52933[#52933])\n+\n+License::\n+* Simplify ml license checking with XpackLicenseState internals {pull}52684[#52684] (issue: {issue}52115[#52115])\n+* License removal leads back to a basic license {pull}52407[#52407] (issue: {issue}45022[#45022])\n+* Refactor license checking {pull}52118[#52118] (issue: {issue}51864[#51864])\n+* Add enterprise mode and refactor {pull}51864[#51864] (issue: {issue}51081[#51081])\n+\n+Machine Learning::\n+* Stratified cross validation split for classification {pull}54087[#54087]\n+* Data frame analytics data counts {pull}53998[#53998]\n+* Verify that the field is aggregatable before attempting cardinality aggregation {pull}53874[#53874] (issue: {issue}53876[#53876])\n+* Adds multi-class feature importance support {pull}53803[#53803]\n+* Data frame analytics analysis stats {pull}53788[#53788]\n+* Add a model memory estimation endpoint for anomaly detection {pull}53507[#53507] (issue: {issue}53219[#53219])\n+* [Inference] adds new default_field_map field to trained models {pull}53294[#53294]\n+* Improve DF analytics audits and logging {pull}53179[#53179]\n+* Add indices_options to datafeed config and update {pull}52793[#52793] (issue: {issue}48056[#48056])\n+* Parse and report memory usage for DF Analytics {pull}52778[#52778]\n+* Adds the class_assignment_objective parameter to classification {pull}52763[#52763] (issue: {issue}52427[#52427])\n+* Add reason to DataFrameAnalyticsTask updateState log message {pull}52659[#52659] (issue: {issue}52654[#52654])\n+* [Inference] Add support for multi-value leaves to the tree model {pull}52531[#52531]\n+* Make ml internal indices hidden {pull}52423[#52423] (issue: {issue}52420[#52420])\n+* Add _cat/ml/data_frame/analytics API {pull}52260[#52260] (issue: {issue}51413[#51413])\n+* Adds feature importance option to inference processor {pull}52218[#52218]\n+* Switch poor categorization audit warning to use status field {pull}52195[#52195] (issues: {issue}50749[#50749], {issue}51146[#51146], {issue}51879[#51879])\n+* Retry persisting DF Analytics results {pull}52048[#52048]\n+* Improve multiline_start_pattern for CSV in find_file_structure {pull}51737[#51737]\n+* Add _cat/ml/trained_models API {pull}51529[#51529] (issue: {issue}51414[#51414])\n+* Add GET _cat/ml/datafeeds {pull}51500[#51500] (issue: {issue}51411[#51411])\n+* Use CSV ingest processor in find_file_structure ingest pipeline {pull}51492[#51492] (issue: {issue}56038[#56038])\n+* Add _cat/ml/anomaly_detectors API {pull}51364[#51364]\n+* [Inference] add tags url param to GET {pull}51330[#51330]\n+* Add parsers for inference configuration classes {pull}51300[#51300]\n+* Make datafeeds work with nanosecond time fields {pull}51180[#51180] (issue: {issue}49889[#49889])\n+* Add audit warning for 1000 categories found early in job {pull}51146[#51146] (issue: {issue}50749[#50749])\n+* Adds support for a global calendars {pull}50372[#50372] (issue: {issue}45013[#45013])\n+\n+Mapping::\n+* Wildcard field - add normalizer support {pull}53851[#53851]\n+* Wildcard field - added case insensitive search option {pull}53814[#53814]\n+* Append index name for the source of the cluster put-mapping task {pull}52690[#52690]\n+\n+Network::\n+* Give helpful message on remote connections disabled {pull}53690[#53690]\n+* Add server name to remote info API {pull}53634[#53634]\n+* Log when probe succeeds but full connection fails {pull}51304[#51304]\n+* Encrypt generated key with AES {pull}51019[#51019] (issue: {issue}50843[#50843])\n+\n+Ranking::\n+* Adds recall@k metric to rank eval API {pull}52577[#52577] (issue: {issue}51676[#51676])\n+\n+SQL::\n+* Jdbc debugging enhancement {pull}53880[#53880]\n+* Transfer version compatibility decision to the server {pull}53082[#53082] (issue: {issue}52766[#52766])\n+* Use a proper error message for queries directed at empty mapping indices {pull}52967[#52967] (issue: {issue}52865[#52865])\n+* Use calendar_interval of 1d for HISTOGRAMs with 1 DAY intervals {pull}52749[#52749] (issue: {issue}52713[#52713])\n+* Use a calendar interval for histograms over 1 month intervals {pull}52586[#52586] (issue: {issue}51538[#51538])\n+* Make parsing of date more lenient {pull}52137[#52137] (issue: {issue}49379[#49379])\n+* Enhance timestamp escaped literal parsing {pull}52097[#52097] (issue: {issue}46069[#46069])\n+* Handle uberjar scenario where the ES jdbc driver file is bundled in another jar {pull}51856[#51856] (issue: {issue}50201[#50201])\n+* Verify Full-Text Search functions not allowed in SELECT {pull}51568[#51568] (issue: {issue}47446[#47446])\n+* Extend the optimisations for equalities {pull}50792[#50792] (issue: {issue}49637[#49637])\n+* Add trace logging for search responses coming from server {pull}50530[#50530]\n+* Extend DATE_TRUNC to also operate on intervals(elastic - #46632 ) {pull}47720[#47720] (issue: {issue}46632[#46632])\n+* Enchance output of explain for optimized plan {pull}33718[#33718]\n+\n+Search::\n+* HLRC: Don't send defaults for SubmitAsyncSearchRequest {pull}54200[#54200]\n+* Reduce performance impact of ExitableDirectoryReader {pull}53978[#53978] (issues: {issue}52822[#52822], {issue}53166[#53166], {issue}53496[#53496])\n+* Add heuristics to compute pre_filter_shard_size when unspecified {pull}53873[#53873] (issue: {issue}39835[#39835])\n+* Add async_search get and delete APIs to HLRC {pull}53828[#53828] (issue: {issue}49091[#49091])\n+* Increase step between checks for cancellation {pull}53712[#53712] (issues: {issue}52822[#52822], {issue}53496[#53496])\n+* Refine SearchProgressListener internal API {pull}53373[#53373]\n+* Check for query cancellation during rewrite {pull}53166[#53166] (issue: {issue}52822[#52822])\n+* Implement Cancellable DirectoryReader {pull}52822[#52822]\n+* Address MinAndMax generics warnings {pull}52642[#52642] (issue: {issue}49092[#49092])\n+* Clarify when shard iterators get sorted {pull}52633[#52633]\n+* Generalize how queries on `_index` are handled at rewrite time {pull}52486[#52486] (issues: {issue}49254[#49254], {issue}49713[#49713])\n+* Remove the query builder serialization from QueryShardException message {pull}51885[#51885] (issues: {issue}48910[#48910], {issue}51843[#51843])\n+* Short circuited to MatchNone for non-participating  slice {pull}51207[#51207]\n+* Add \"did you mean\" to unknown queries {pull}51177[#51177]\n+* Exclude unmapped fields during max clause limit checking for querying {pull}49523[#49523] (issue: {issue}49002[#49002])\n+\n+Security::\n+* Add error message in JSON response {pull}54389[#54389]\n+\n+Snapshot/Restore::\n+* Use Azure Bulk Deletes in Azure Repository {pull}53919[#53919] (issue: {issue}53865[#53865])\n+* Only link fd* files during source-only snapshot {pull}53463[#53463] (issue: {issue}50231[#50231])\n+* Add Blob Download Retries to GCS Repository {pull}52479[#52479] (issues: {issue}46589[#46589], {issue}52319[#52319])\n+* Better Incrementality for Snapshots of Unchanged Shards {pull}52182[#52182]\n+* Add Region and Signer Algorithm Overrides to S3 Repos {pull}52112[#52112] (issue: {issue}51861[#51861])\n+* Allow Parallel Snapshot Restore And Delete {pull}51608[#51608] (issue: {issue}41463[#41463])\n+\n+Store::\n+* HybridDirectory should mmap postings. {pull}52641[#52641]\n+\n+Transform::\n+* Transition Transforms to using hidden indices for notifcations index {pull}53773[#53773] (issue: {issue}53762[#53762])\n+* [Rollup] add processing stats to record the time spent for processing results {pull}53770[#53770]\n+* Create GET _cat/transforms API Issue {pull}53643[#53643] (issue: {issue}51412[#51412])\n+* Add support for script in group_by {pull}53167[#53167] (issue: {issue}43152[#43152])\n+* Implement node.transform to control where to run a transform {pull}52712[#52712] (issues: {issue}48734[#48734], {issue}50033[#50033], {issue}52200[#52200])\n+* Add support for filter aggregation {pull}52483[#52483] (issue: {issue}52151[#52151])\n+* Provide exponential_avg* stats for batch transforms {pull}52041[#52041] (issue: {issue}52037[#52037])\n+* Improve irrecoverable error detection - part 2 {pull}52003[#52003] (issue: {issue}51820[#51820])\n+* Mark transform API's stable {pull}51862[#51862]\n+* Improve irrecoverable error detection {pull}51820[#51820] (issue: {issue}50135[#50135])\n+* Add support for percentile aggs {pull}51808[#51808] (issue: {issue}51663[#51663])\n+* Disallow fieldnames with a dot at start and/or end {pull}51369[#51369]\n+* Avoid mapping problems with index templates {pull}51368[#51368] (issue: {issue}51321[#51321])\n+* Handle permanent bulk indexing errors {pull}51307[#51307] (issue: {issue}50122[#50122])\n+* Improve force stop robustness in case of an error {pull}51072[#51072]\n+\n+\n+\n+[[bug-7.7.0]]\n+[float]\n+=== Bug fixes\n+\n+Aggregations::\n+* Fix date_nanos in composite aggs {pull}53315[#53315] (issue: {issue}53168[#53168])\n+* Fix composite agg sort bug {pull}53296[#53296] (issue: {issue}52480[#52480])\n+* Decode max and min optimization more carefully {pull}52336[#52336] (issue: {issue}52220[#52220])\n+* Fix a DST error in date_histogram {pull}52016[#52016] (issue: {issue}50265[#50265])\n+* Use #name() instead of #simpleName() when generating doc values {pull}51920[#51920] (issues: {issue}50307[#50307], {issue}51847[#51847])\n+* Fix a sneaky bug in rare_terms {pull}51868[#51868] (issue: {issue}51020[#51020])\n+* Support time_zone on composite's date_histogram {pull}51172[#51172] (issues: {issue}45199[#45199], {issue}45200[#45200])\n+\n+Allocation::\n+* Improve performance of shards limits decider {pull}53577[#53577] (issue: {issue}53559[#53559])\n+\n+Analysis::\n+* Mask wildcard query special characters on keyword queries {pull}53127[#53127] (issue: {issue}46300[#46300])\n+* Fix caching for PreConfiguredTokenFilter {pull}50912[#50912] (issue: {issue}50734[#50734])\n+\n+Audit::\n+* Logfile audit settings validation {pull}52537[#52537] (issues: {issue}47038[#47038], {issue}47711[#47711], {issue}52357[#52357])\n+\n+Authentication::\n+* Fix potential bug in concurrent token refresh support {pull}53668[#53668]\n+* Respect runas realm for ApiKey security operations {pull}52178[#52178] (issue: {issue}51975[#51975])\n+* Preserve ApiKey credentials for async verification {pull}51244[#51244]\n+* Don't fallback to anonymous for tokens/apikeys {pull}51042[#51042] (issue: {issue}50171[#50171])\n+* Fail gracefully on invalid token strings {pull}51014[#51014]\n+\n+Authorization::\n+* Explicitly require that delegate API keys have no privileges {pull}53647[#53647]\n+* Allow _rollup_search with read privilege {pull}52043[#52043] (issue: {issue}50245[#50245])\n+\n+CCR::\n+* Put CCR tasks on (data && remote cluster clients) {pull}54146[#54146] (issue: {issue}53924[#53924])\n+* Handle no such remote cluster exception in ccr {pull}53415[#53415] (issue: {issue}53225[#53225])\n+* Fix shard follow task cleaner under security {pull}52347[#52347] (issues: {issue}44702[#44702], {issue}51971[#51971])\n+\n+CRUD::\n+* Force execution of finish shard bulk request {pull}51957[#51957] (issue: {issue}51904[#51904])\n+* Return 429 status code when there's a read_only cluster block {pull}50166[#50166] (issue: {issue}49393[#49393])\n+\n+Cluster Coordination::\n+* Use special XContent registry for node tool {pull}54050[#54050] (issue: {issue}53549[#53549])\n+* Allow static cluster.max_voting_config_exclusions {pull}53717[#53717] (issue: {issue}53455[#53455])\n+* Allow joining node to trigger term bump {pull}53338[#53338] (issue: {issue}53271[#53271])\n+* Ignore timeouts with single-node discovery {pull}52159[#52159]\n+\n+Distributed::\n+* Execute retention lease syncs under system context {pull}53838[#53838] (issues: {issue}48430[#48430], {issue}53751[#53751])\n+* Exclude nested documents in LuceneChangesSnapshot {pull}51279[#51279]\n+\n+Engine::\n+* Fix doc_stats and segment_stats of ReadOnlyEngine {pull}53345[#53345] (issues: {issue}51303[#51303], {issue}51331[#51331])\n+* Do not wrap soft-deletes reader for segment stats {pull}51331[#51331] (issues: {issue}51192[#51192], {issue}51303[#51303])\n+* Account soft-deletes in FrozenEngine {pull}51192[#51192] (issue: {issue}50775[#50775])\n+\n+Features/CAT APIs::\n+* Fix NPE in RestPluginsAction {pull}52620[#52620] (issue: {issue}45321[#45321])\n+\n+Features/ILM+SLM::\n+* Disallow negative TimeValues {pull}53913[#53913] (issue: {issue}54041[#54041])\n+* Fix null config in SnapshotLifecyclePolicy.toRequest {pull}53328[#53328] (issues: {issue}44465[#44465], {issue}53171[#53171])\n+* Freeze step retry when not acknowledged {pull}53287[#53287]\n+* Make the set-single-node-allocation retryable (#52077) {pull}52138[#52138] (issue: {issue}52077[#52077])\n+* Make the set-single-node-allocation retryable {pull}52077[#52077] (issue: {issue}43401[#43401])\n+* Fix the init step to actually be retryable {pull}52076[#52076]\n+\n+Features/Ingest::\n+* Fix ingest pipeline _simulate api with empty docs never returns a res\u2026 {pull}52937[#52937] (issue: {issue}52833[#52833])\n+* Handle errors when evaluating if conditions in processors {pull}52543[#52543] (issue: {issue}52339[#52339])\n+* Fix delete enrich policy bug {pull}52179[#52179] (issue: {issue}51228[#51228])\n+* Fix ignore_missing in CsvProcessor {pull}51600[#51600]\n+* Missing suffix for German Month \"Juli\" in Grok Pattern MONTH (#51579) {pull}51591[#51591] (issue: {issue}51579[#51579])\n+* Don't overwrite target field with SetSecurityUserProcessor {pull}51454[#51454] (issue: {issue}51428[#51428])\n+\n+Features/Java High Level REST Client::\n+* Add unsupported parameters to HLRC search request {pull}53745[#53745]\n+* Fix AbstractBulkByScrollRequest slices parameter via Rest {pull}53068[#53068] (issue: {issue}53044[#53044])\n+* Send the fields param via body instead of URL params (elastic#42232) {pull}48840[#48840] (issues: {issue}42232[#42232], {issue}42877[#42877])\n+\n+Features/Java Low Level REST Client::\n+* Fix roles parsing in client nodes sniffer {pull}52888[#52888] (issue: {issue}52864[#52864])\n+\n+Features/Monitoring::\n+* Fix NPE in cluster state collector for monitoring {pull}52371[#52371] (issue: {issue}52317[#52317])\n+\n+Features/Stats::\n+* Switch to AtomicLong for \"IngestCurrent\" metric to prevent negative values {pull}52581[#52581] (issues: {issue}52406[#52406], {issue}52411[#52411])\n+\n+Features/Watcher::\n+* Disable Watcher script optimization for stored scripts {pull}53497[#53497] (issue: {issue}40212[#40212])\n+* The watcher indexing listener didn't handle document level exceptions. {pull}51466[#51466] (issue: {issue}32299[#32299])\n+\n+Geo::\n+* Handle properly indexing rectangles that crosses the dateline {pull}53810[#53810]\n+\n+Highlighting::\n+* Fix highlighter support in PinnedQuery and added test {pull}53716[#53716] (issue: {issue}53699[#53699])\n+\n+Infra/Core::\n+* Fix Joda compatibility in stream protocol {pull}53823[#53823] (issue: {issue}53586[#53586])\n+* Avoid self-suppression on grouped action listener {pull}53262[#53262] (issue: {issue}53174[#53174])\n+* Use correct package for `VM` class {pull}52803[#52803] (issue: {issue}47210[#47210])", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "originalPosition": 479}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNTc2MzE3", "url": "https://github.com/elastic/elasticsearch/pull/55019#pullrequestreview-391576317", "createdAt": "2020-04-10T17:54:24Z", "commit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxNzo1NDoyNFrOGEBa7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxNzo1NDoyNFrOGEBa7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg3MDc2NQ==", "bodyText": "Removes the issue num from the PR label.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Missing suffix for German Month \"Juli\" in Grok Pattern MONTH (#51579) {pull}51591[#51591] (issue: {issue}51579[#51579])\n          \n          \n            \n            * Missing suffix for German Month \"Juli\" in Grok Pattern MONTH  {pull}51591[#51591] (issue: {issue}51579[#51579])", "url": "https://github.com/elastic/elasticsearch/pull/55019#discussion_r406870765", "createdAt": "2020-04-10T17:54:24Z", "author": {"login": "jrodewig"}, "path": "docs/reference/release-notes/7.7.asciidoc", "diffHunk": "@@ -1,22 +1,612 @@\n [[release-notes-7.7.0]]\n == {es} version 7.7.0\n \n-coming[7.7.0]\n+Also see <<breaking-changes-7.7,Breaking changes in 7.7>>.\n \n [[breaking-7.7.0]]\n [float]\n === Breaking changes\n \n+Highlighting::\n+* Highlighters skip ignored keyword values {pull}53408[#53408] (issue: {issue}43800[#43800])\n+\n+Infra/Core::\n+* Remove DEBUG-level default logging from actions {pull}51459[#51459] (issue: {issue}51198[#51198])\n+\n Mapping::\n * Dynamic mappings in indices created on 8.0 and later have stricter validation at mapping update time and\n   results in a deprecation warning for indices created in Elasticsearch 7.7.0 and later.\n-  (e.g. incorrect analyzer settings or unknown field types). {pull}51233[#51233]\n+  (e.g. incorrect analyzer settings or unknown field types). {pull}51233[#51233] (issues: {issue}17411[#17411], {issue}24419[#24419])\n \n Search::\n-* A regression that allowed negative scores in a script_score query was corrected.\n-  A behaviour is restored that throws an error if script_score query produces\n-  a negative score {pull}52478[#52478].\n+* Make range query rounding consistent {pull}50237[#50237] (issue: {issue}50009[#50009])\n * Pipeline aggregation validation errors that used to return HTTP\n   500s/Internal Server Errors now return 400/Bad Request {pull}53669[#53669].\n   As a bonus we now return a list of validation errors rather than returning\n   the first one we encounter.\n+\n+\n+\n+[[breaking-java-7.7.0]]\n+[float]\n+=== Breaking Java changes\n+\n+Infra/Core::\n+* Fix ActionListener.map exception handling {pull}50886[#50886]\n+\n+Machine Learning::\n+* Add expected input field type to trained model config {pull}53083[#53083]\n+\n+Transform::\n+* Enhance the output of preview to return full destination index details {pull}53572[#53572]\n+\n+\n+\n+[[deprecation-7.7.0]]\n+[float]\n+=== Deprecations\n+\n+Allocation::\n+* Deprecated support for delaying state recovery pending master nodes {pull}53646[#53646] (issue: {issue}51806[#51806])\n+\n+Authentication::\n+* Add warnings for invalid realm order config (#51195) {pull}51515[#51515]\n+* Deprecate timeout.tcp_read AD/LDAP realm setting {pull}47305[#47305] (issue: {issue}46028[#46028])\n+\n+Engine::\n+* Deprecate translog retention settings {pull}51588[#51588] (issues: {issue}45473[#45473], {issue}50775[#50775])\n+\n+Features/Features::\n+* Add cluster.remote.connect to deprecation info API {pull}54142[#54142] (issue: {issue}53924[#53924])\n+\n+Infra/Core::\n+* Add deprecation check for listener thread pool {pull}53438[#53438] (issues: {issue}53049[#53049], {issue}53317[#53317])\n+* Deprecate the logstash enabled setting {pull}53367[#53367]\n+* Deprecate the listener thread pool {pull}53266[#53266] (issue: {issue}53049[#53049])\n+* Deprecate creation of dot-prefixed index names except for hidden and system indices {pull}49959[#49959]\n+\n+Infra/REST API::\n+* Deprecate undocumented alternatives to the nodes hot threads API (#52640) {pull}52930[#52930] (issue: {issue}52640[#52640])\n+\n+Machine Learning::\n+* Renaming inference processor field field_mappings to new name field_map {pull}53433[#53433]\n+\n+Search::\n+* Emit deprecation warning when TermsLookup contains a type {pull}53731[#53731] (issue: {issue}41059[#41059])\n+* Deprecate BoolQueryBuilder's mustNot field {pull}53125[#53125]\n+\n+\n+\n+[[feature-7.7.0]]\n+[float]\n+=== New features\n+\n+Aggregations::\n+* Preserve metric types in top_metrics {pull}53288[#53288]\n+* Support multiple metrics in `top_metrics` agg {pull}52965[#52965] (issue: {issue}51813[#51813])\n+* Add size support to `top_metrics` {pull}52662[#52662] (issue: {issue}51813[#51813])\n+* HLRC support for string_stats {pull}52163[#52163]\n+* Add Boxplot Aggregation {pull}51948[#51948] (issue: {issue}33112[#33112])\n+\n+Analysis::\n+* Add nori_number token filter in analysis-nori {pull}53583[#53583]\n+\n+Authentication::\n+* Create API Key on behalf of other user {pull}52886[#52886] (issue: {issue}48716[#48716])\n+\n+Geo::\n+* Add support for distance queries on shape queries {pull}53468[#53468]\n+* Add support for distance queries on geo_shape queries {pull}53466[#53466] (issues: {issue}13351[#13351], {issue}39237[#39237])\n+* Add support for multipoint shape queries {pull}52564[#52564] (issue: {issue}52133[#52133])\n+* Add support for multipoint geoshape queries {pull}52133[#52133] (issue: {issue}37318[#37318])\n+\n+Infra/Core::\n+* Implement hidden indices {pull}50452[#50452] (issues: {issue}50251[#50251], {issue}50665[#50665], {issue}50762[#50762])\n+\n+Infra/Packaging::\n+* Introduce aarch64 packaging {pull}53914[#53914]\n+\n+Machine Learning::\n+* Implement ILM policy for .ml-state* indices {pull}52356[#52356] (issue: {issue}29938[#29938])\n+\n+Mapping::\n+* Introduce a `constant_keyword` field. {pull}49713[#49713]\n+\n+SQL::\n+* constant_keyword support {pull}53241[#53241] (issue: {issue}53016[#53016])\n+* Add optimisations for not-equalities {pull}51088[#51088] (issue: {issue}49637[#49637])\n+* Add support for passing query parameters in REST API calls {pull}51029[#51029] (issue: {issue}42916[#42916])\n+\n+Search::\n+* Introduce compound query {pull}52387[#52387] (issue: {issue}51967[#51967])\n+* Add a cluster setting to disallow expensive queries {pull}51385[#51385] (issue: {issue}29050[#29050])\n+* Add new x-pack endpoints to track the progress of a search asynchronously {pull}49931[#49931] (issue: {issue}49091[#49091])\n+\n+\n+\n+[[enhancement-7.7.0]]\n+[float]\n+=== Enhancements\n+\n+Aggregations::\n+* Try to save memory on aggregations {pull}53793[#53793]\n+* Speed up partial reduce of terms aggregations {pull}53216[#53216] (issue: {issue}51857[#51857])\n+* Simplify SiblingPipelineAggregator {pull}53144[#53144]\n+* Add histogram field type support to boxplot aggs {pull}52265[#52265] (issues: {issue}33112[#33112], {issue}52233[#52233])\n+* Percentiles aggregation validation checks for range {pull}51871[#51871] (issue: {issue}51808[#51808])\n+* Begin moving date_histogram to offset rounding (take two) {pull}51271[#51271] (issues: {issue}50609[#50609], {issue}50873[#50873])\n+* Password-protected Keystore Feature Branch PR {pull}51123[#51123] (issues: {issue}32691[#32691], {issue}49340[#49340])\n+* Implement top_metrics agg {pull}51155[#51155] (issue: {issue}48069[#48069])\n+* Bucket aggregation circuit breaker optimization. {pull}46751[#46751]\n+\n+Analysis::\n+* Removes old Lucene's experimental flag from analyzer documentations {pull}53217[#53217]\n+\n+Authentication::\n+* Add exception metadata for disabled features {pull}52811[#52811] (issues: {issue}47759[#47759], {issue}52311[#52311], {issue}55255[#55255])\n+* Validate role templates before saving role mapping {pull}52636[#52636] (issue: {issue}48773[#48773])\n+* Add support for secondary authentication {pull}52093[#52093]\n+* Expose API key name to the ingest pipeline {pull}51305[#51305] (issues: {issue}46847[#46847], {issue}49106[#49106])\n+* Disallow Password Change when authenticated by Token {pull}49694[#49694] (issue: {issue}48752[#48752])\n+\n+Authorization::\n+* Allow kibana_system to create and invalidate API keys on behalf of other users {pull}53824[#53824] (issue: {issue}48716[#48716])\n+* Add \"grant_api_key\" cluster privilege {pull}53527[#53527] (issues: {issue}48716[#48716], {issue}52886[#52886])\n+* Giving kibana user privileges to create custom link index {pull}53221[#53221] (issue: {issue}59305[#59305])\n+* [APM] Allow kibana to collect APM telemetry in background task {pull}52917[#52917] (issue: {issue}50757[#50757])\n+* Add the new 'maintenance' privilege containing 4 actions (#29998) {pull}50643[#50643]\n+\n+Cluster Coordination::\n+* Describe STALE_STATE_CONFIG in ClusterFormationFH {pull}53878[#53878] (issue: {issue}53734[#53734])\n+\n+Distributed::\n+* Introduce formal role for remote cluster client {pull}53924[#53924]\n+* Shortcut query phase using the results of other shards {pull}51852[#51852] (issues: {issue}49601[#49601], {issue}51708[#51708])\n+* Flush instead of synced-flush inactive shards {pull}49126[#49126] (issues: {issue}31965[#31965], {issue}48430[#48430])\n+\n+Engine::\n+* Restore off-heap loading for term dictionary in ReadOnlyEngine {pull}53713[#53713] (issues: {issue}43158[#43158], {issue}51247[#51247])\n+* Separate translog from index deletion conditions {pull}52556[#52556]\n+* Always rewrite search shard request outside of the search thread pool {pull}51708[#51708] (issue: {issue}49601[#49601])\n+* Move the terms index of `_id` off-heap. {pull}52405[#52405] (issue: {issue}42838[#42838])\n+* Cache completion stats between refreshes {pull}51991[#51991] (issue: {issue}51915[#51915])\n+* Use local checkpoint to calculate min translog gen for recovery {pull}51905[#51905] (issue: {issue}49970[#49970])\n+\n+Features/CAT APIs::\n+* /_cat/shards support path stats {pull}53461[#53461]\n+* Allow _cat indices & aliases to use indices options {pull}53248[#53248] (issue: {issue}52304[#52304])\n+\n+Features/Features::\n+* Enable deprecation checks for removed settings {pull}53317[#53317]\n+\n+Features/ILM+SLM::\n+* Hide ILM & SLM history aliases {pull}53564[#53564]\n+* Avoid race condition in ILMHistorySotre {pull}53039[#53039] (issues: {issue}50353[#50353], {issue}52853[#52853])\n+* Make FreezeStep retryable {pull}52540[#52540]\n+* Make DeleteStep retryable {pull}52494[#52494]\n+* Allow forcemerge in the hot phase for ILM policies {pull}52073[#52073] (issue: {issue}43165[#43165])\n+* Stop policy on last PhaseCompleteStep instead of TerminalPolic\u2026 {pull}51631[#51631] (issue: {issue}48431[#48431])\n+* Convert ILM and SLM histories into hidden indices {pull}51456[#51456]\n+* Make UpdateSettingsStep retryable {pull}51235[#51235] (issues: {issue}44135[#44135], {issue}48183[#48183])\n+* Expose master timeout for ILM actions {pull}51130[#51130] (issue: {issue}44136[#44136])\n+* Wait for active shards on rolled index in a separate step {pull}50718[#50718] (issues: {issue}44135[#44135], {issue}48183[#48183])\n+* Adding best_compression {pull}49974[#49974]\n+\n+Features/Indices APIs::\n+* Add IndexTemplateV2 to MetaData {pull}53753[#53753] (issue: {issue}53101[#53101])\n+* Add ComponentTemplate to MetaData {pull}53290[#53290] (issue: {issue}53101[#53101])\n+\n+Features/Ingest::\n+* Reduce log level for pipeline failure {pull}54097[#54097] (issue: {issue}51459[#51459])\n+* Support array for all string ingest processors {pull}53343[#53343] (issue: {issue}51087[#51087])\n+* Add empty_value parameter to CSV processor {pull}51567[#51567]\n+* Add pipeline name to ingest metadata {pull}50467[#50467] (issue: {issue}42106[#42106])\n+\n+Features/Java High Level REST Client::\n+* SourceExists HLRC uses GetSourceRequest instead of GetRequest {pull}51789[#51789] (issue: {issue}50885[#50885])\n+* Add async_search.submit to HLRC {pull}53592[#53592] (issue: {issue}49091[#49091])\n+* Add Get Source API to the HLRC {pull}50885[#50885] (issue: {issue}47678[#47678])\n+\n+Features/Monitoring::\n+* Secure password for monitoring HTTP exporter {pull}50919[#50919] (issue: {issue}50197[#50197])\n+* Validate SSL settings at parse time {pull}49196[#49196] (issue: {issue}47711[#47711])\n+\n+Features/Stats::\n+* Add analysis components and mapping types to the usage API. {pull}51031[#51031]\n+\n+Features/Watcher::\n+* Make watch history indices hidden {pull}52962[#52962] (issue: {issue}50251[#50251])\n+* Upgrade to the latest OWASP HTML sanitizer {pull}50765[#50765] (issue: {issue}50395[#50395])\n+\n+Infra/Core::\n+* Enable helpful null pointer exceptions {pull}54853[#54853]\n+* Allow keystore add to handle multiple settings {pull}54229[#54229] (issue: {issue}54191[#54191])\n+* Report parser name and location in XContent deprecation warnings {pull}53805[#53805]\n+* Report parser name and location in XContent deprecation warnings {pull}53752[#53752]\n+* Deprecate all variants of a ParseField with no replacement {pull}53722[#53722]\n+* Add a helper method to parse maps of objects {pull}53096[#53096]\n+* Allow specifying an exclusive set of fields on ObjectParser {pull}52893[#52893]\n+* Support joda style date patterns in 7.x {pull}52555[#52555]\n+* Implement hidden aliases {pull}52547[#52547] (issue: {issue}52304[#52304])\n+* Allow ObjectParsers to specify required sets of fields {pull}49661[#49661] (issue: {issue}48824[#48824])\n+\n+Infra/Logging::\n+* Capture stdout and stderr to log4j log {pull}50259[#50259] (issue: {issue}50156[#50156])\n+\n+Infra/Packaging::\n+* Introduce aarch64 Docker image {pull}53936[#53936] (issue: {issue}53914[#53914])\n+* Introduce jvm.options.d for customizing JVM options {pull}51882[#51882] (issue: {issue}51626[#51626])\n+\n+Infra/Plugins::\n+* Allow sha512 checksum without filename for maven plugins {pull}52668[#52668] (issue: {issue}52413[#52413])\n+\n+Infra/Scripting::\n+* Scripting: Context script cache unlimited compile {pull}53769[#53769] (issue: {issue}50152[#50152])\n+* Scripting: Increase ingest script cache defaults {pull}53765[#53765] (issue: {issue}50152[#50152])\n+* Scripting: Per-context script cache, default off (#52855) {pull}53756[#53756] (issues: {issue}50152[#50152], {issue}52855[#52855])\n+* Scripting: Per-context script cache, default off {pull}52855[#52855] (issue: {issue}50152[#50152])\n+* Improve Painless compilation performance for nested conditionals {pull}52056[#52056]\n+* Scripting: Add char position of script errors {pull}51069[#51069] (issue: {issue}50993[#50993])\n+\n+Infra/Settings::\n+* Allow keystore add-file to handle multiple settings {pull}54240[#54240] (issue: {issue}54191[#54191])\n+* Settings: AffixSettings as validator dependencies {pull}52973[#52973] (issue: {issue}52933[#52933])\n+\n+License::\n+* Simplify ml license checking with XpackLicenseState internals {pull}52684[#52684] (issue: {issue}52115[#52115])\n+* License removal leads back to a basic license {pull}52407[#52407] (issue: {issue}45022[#45022])\n+* Refactor license checking {pull}52118[#52118] (issue: {issue}51864[#51864])\n+* Add enterprise mode and refactor {pull}51864[#51864] (issue: {issue}51081[#51081])\n+\n+Machine Learning::\n+* Stratified cross validation split for classification {pull}54087[#54087]\n+* Data frame analytics data counts {pull}53998[#53998]\n+* Verify that the field is aggregatable before attempting cardinality aggregation {pull}53874[#53874] (issue: {issue}53876[#53876])\n+* Adds multi-class feature importance support {pull}53803[#53803]\n+* Data frame analytics analysis stats {pull}53788[#53788]\n+* Add a model memory estimation endpoint for anomaly detection {pull}53507[#53507] (issue: {issue}53219[#53219])\n+* [Inference] adds new default_field_map field to trained models {pull}53294[#53294]\n+* Improve DF analytics audits and logging {pull}53179[#53179]\n+* Add indices_options to datafeed config and update {pull}52793[#52793] (issue: {issue}48056[#48056])\n+* Parse and report memory usage for DF Analytics {pull}52778[#52778]\n+* Adds the class_assignment_objective parameter to classification {pull}52763[#52763] (issue: {issue}52427[#52427])\n+* Add reason to DataFrameAnalyticsTask updateState log message {pull}52659[#52659] (issue: {issue}52654[#52654])\n+* [Inference] Add support for multi-value leaves to the tree model {pull}52531[#52531]\n+* Make ml internal indices hidden {pull}52423[#52423] (issue: {issue}52420[#52420])\n+* Add _cat/ml/data_frame/analytics API {pull}52260[#52260] (issue: {issue}51413[#51413])\n+* Adds feature importance option to inference processor {pull}52218[#52218]\n+* Switch poor categorization audit warning to use status field {pull}52195[#52195] (issues: {issue}50749[#50749], {issue}51146[#51146], {issue}51879[#51879])\n+* Retry persisting DF Analytics results {pull}52048[#52048]\n+* Improve multiline_start_pattern for CSV in find_file_structure {pull}51737[#51737]\n+* Add _cat/ml/trained_models API {pull}51529[#51529] (issue: {issue}51414[#51414])\n+* Add GET _cat/ml/datafeeds {pull}51500[#51500] (issue: {issue}51411[#51411])\n+* Use CSV ingest processor in find_file_structure ingest pipeline {pull}51492[#51492] (issue: {issue}56038[#56038])\n+* Add _cat/ml/anomaly_detectors API {pull}51364[#51364]\n+* [Inference] add tags url param to GET {pull}51330[#51330]\n+* Add parsers for inference configuration classes {pull}51300[#51300]\n+* Make datafeeds work with nanosecond time fields {pull}51180[#51180] (issue: {issue}49889[#49889])\n+* Add audit warning for 1000 categories found early in job {pull}51146[#51146] (issue: {issue}50749[#50749])\n+* Adds support for a global calendars {pull}50372[#50372] (issue: {issue}45013[#45013])\n+\n+Mapping::\n+* Wildcard field - add normalizer support {pull}53851[#53851]\n+* Wildcard field - added case insensitive search option {pull}53814[#53814]\n+* Append index name for the source of the cluster put-mapping task {pull}52690[#52690]\n+\n+Network::\n+* Give helpful message on remote connections disabled {pull}53690[#53690]\n+* Add server name to remote info API {pull}53634[#53634]\n+* Log when probe succeeds but full connection fails {pull}51304[#51304]\n+* Encrypt generated key with AES {pull}51019[#51019] (issue: {issue}50843[#50843])\n+\n+Ranking::\n+* Adds recall@k metric to rank eval API {pull}52577[#52577] (issue: {issue}51676[#51676])\n+\n+SQL::\n+* Jdbc debugging enhancement {pull}53880[#53880]\n+* Transfer version compatibility decision to the server {pull}53082[#53082] (issue: {issue}52766[#52766])\n+* Use a proper error message for queries directed at empty mapping indices {pull}52967[#52967] (issue: {issue}52865[#52865])\n+* Use calendar_interval of 1d for HISTOGRAMs with 1 DAY intervals {pull}52749[#52749] (issue: {issue}52713[#52713])\n+* Use a calendar interval for histograms over 1 month intervals {pull}52586[#52586] (issue: {issue}51538[#51538])\n+* Make parsing of date more lenient {pull}52137[#52137] (issue: {issue}49379[#49379])\n+* Enhance timestamp escaped literal parsing {pull}52097[#52097] (issue: {issue}46069[#46069])\n+* Handle uberjar scenario where the ES jdbc driver file is bundled in another jar {pull}51856[#51856] (issue: {issue}50201[#50201])\n+* Verify Full-Text Search functions not allowed in SELECT {pull}51568[#51568] (issue: {issue}47446[#47446])\n+* Extend the optimisations for equalities {pull}50792[#50792] (issue: {issue}49637[#49637])\n+* Add trace logging for search responses coming from server {pull}50530[#50530]\n+* Extend DATE_TRUNC to also operate on intervals(elastic - #46632 ) {pull}47720[#47720] (issue: {issue}46632[#46632])\n+* Enchance output of explain for optimized plan {pull}33718[#33718]\n+\n+Search::\n+* HLRC: Don't send defaults for SubmitAsyncSearchRequest {pull}54200[#54200]\n+* Reduce performance impact of ExitableDirectoryReader {pull}53978[#53978] (issues: {issue}52822[#52822], {issue}53166[#53166], {issue}53496[#53496])\n+* Add heuristics to compute pre_filter_shard_size when unspecified {pull}53873[#53873] (issue: {issue}39835[#39835])\n+* Add async_search get and delete APIs to HLRC {pull}53828[#53828] (issue: {issue}49091[#49091])\n+* Increase step between checks for cancellation {pull}53712[#53712] (issues: {issue}52822[#52822], {issue}53496[#53496])\n+* Refine SearchProgressListener internal API {pull}53373[#53373]\n+* Check for query cancellation during rewrite {pull}53166[#53166] (issue: {issue}52822[#52822])\n+* Implement Cancellable DirectoryReader {pull}52822[#52822]\n+* Address MinAndMax generics warnings {pull}52642[#52642] (issue: {issue}49092[#49092])\n+* Clarify when shard iterators get sorted {pull}52633[#52633]\n+* Generalize how queries on `_index` are handled at rewrite time {pull}52486[#52486] (issues: {issue}49254[#49254], {issue}49713[#49713])\n+* Remove the query builder serialization from QueryShardException message {pull}51885[#51885] (issues: {issue}48910[#48910], {issue}51843[#51843])\n+* Short circuited to MatchNone for non-participating  slice {pull}51207[#51207]\n+* Add \"did you mean\" to unknown queries {pull}51177[#51177]\n+* Exclude unmapped fields during max clause limit checking for querying {pull}49523[#49523] (issue: {issue}49002[#49002])\n+\n+Security::\n+* Add error message in JSON response {pull}54389[#54389]\n+\n+Snapshot/Restore::\n+* Use Azure Bulk Deletes in Azure Repository {pull}53919[#53919] (issue: {issue}53865[#53865])\n+* Only link fd* files during source-only snapshot {pull}53463[#53463] (issue: {issue}50231[#50231])\n+* Add Blob Download Retries to GCS Repository {pull}52479[#52479] (issues: {issue}46589[#46589], {issue}52319[#52319])\n+* Better Incrementality for Snapshots of Unchanged Shards {pull}52182[#52182]\n+* Add Region and Signer Algorithm Overrides to S3 Repos {pull}52112[#52112] (issue: {issue}51861[#51861])\n+* Allow Parallel Snapshot Restore And Delete {pull}51608[#51608] (issue: {issue}41463[#41463])\n+\n+Store::\n+* HybridDirectory should mmap postings. {pull}52641[#52641]\n+\n+Transform::\n+* Transition Transforms to using hidden indices for notifcations index {pull}53773[#53773] (issue: {issue}53762[#53762])\n+* [Rollup] add processing stats to record the time spent for processing results {pull}53770[#53770]\n+* Create GET _cat/transforms API Issue {pull}53643[#53643] (issue: {issue}51412[#51412])\n+* Add support for script in group_by {pull}53167[#53167] (issue: {issue}43152[#43152])\n+* Implement node.transform to control where to run a transform {pull}52712[#52712] (issues: {issue}48734[#48734], {issue}50033[#50033], {issue}52200[#52200])\n+* Add support for filter aggregation {pull}52483[#52483] (issue: {issue}52151[#52151])\n+* Provide exponential_avg* stats for batch transforms {pull}52041[#52041] (issue: {issue}52037[#52037])\n+* Improve irrecoverable error detection - part 2 {pull}52003[#52003] (issue: {issue}51820[#51820])\n+* Mark transform API's stable {pull}51862[#51862]\n+* Improve irrecoverable error detection {pull}51820[#51820] (issue: {issue}50135[#50135])\n+* Add support for percentile aggs {pull}51808[#51808] (issue: {issue}51663[#51663])\n+* Disallow fieldnames with a dot at start and/or end {pull}51369[#51369]\n+* Avoid mapping problems with index templates {pull}51368[#51368] (issue: {issue}51321[#51321])\n+* Handle permanent bulk indexing errors {pull}51307[#51307] (issue: {issue}50122[#50122])\n+* Improve force stop robustness in case of an error {pull}51072[#51072]\n+\n+\n+\n+[[bug-7.7.0]]\n+[float]\n+=== Bug fixes\n+\n+Aggregations::\n+* Fix date_nanos in composite aggs {pull}53315[#53315] (issue: {issue}53168[#53168])\n+* Fix composite agg sort bug {pull}53296[#53296] (issue: {issue}52480[#52480])\n+* Decode max and min optimization more carefully {pull}52336[#52336] (issue: {issue}52220[#52220])\n+* Fix a DST error in date_histogram {pull}52016[#52016] (issue: {issue}50265[#50265])\n+* Use #name() instead of #simpleName() when generating doc values {pull}51920[#51920] (issues: {issue}50307[#50307], {issue}51847[#51847])\n+* Fix a sneaky bug in rare_terms {pull}51868[#51868] (issue: {issue}51020[#51020])\n+* Support time_zone on composite's date_histogram {pull}51172[#51172] (issues: {issue}45199[#45199], {issue}45200[#45200])\n+\n+Allocation::\n+* Improve performance of shards limits decider {pull}53577[#53577] (issue: {issue}53559[#53559])\n+\n+Analysis::\n+* Mask wildcard query special characters on keyword queries {pull}53127[#53127] (issue: {issue}46300[#46300])\n+* Fix caching for PreConfiguredTokenFilter {pull}50912[#50912] (issue: {issue}50734[#50734])\n+\n+Audit::\n+* Logfile audit settings validation {pull}52537[#52537] (issues: {issue}47038[#47038], {issue}47711[#47711], {issue}52357[#52357])\n+\n+Authentication::\n+* Fix potential bug in concurrent token refresh support {pull}53668[#53668]\n+* Respect runas realm for ApiKey security operations {pull}52178[#52178] (issue: {issue}51975[#51975])\n+* Preserve ApiKey credentials for async verification {pull}51244[#51244]\n+* Don't fallback to anonymous for tokens/apikeys {pull}51042[#51042] (issue: {issue}50171[#50171])\n+* Fail gracefully on invalid token strings {pull}51014[#51014]\n+\n+Authorization::\n+* Explicitly require that delegate API keys have no privileges {pull}53647[#53647]\n+* Allow _rollup_search with read privilege {pull}52043[#52043] (issue: {issue}50245[#50245])\n+\n+CCR::\n+* Put CCR tasks on (data && remote cluster clients) {pull}54146[#54146] (issue: {issue}53924[#53924])\n+* Handle no such remote cluster exception in ccr {pull}53415[#53415] (issue: {issue}53225[#53225])\n+* Fix shard follow task cleaner under security {pull}52347[#52347] (issues: {issue}44702[#44702], {issue}51971[#51971])\n+\n+CRUD::\n+* Force execution of finish shard bulk request {pull}51957[#51957] (issue: {issue}51904[#51904])\n+* Return 429 status code when there's a read_only cluster block {pull}50166[#50166] (issue: {issue}49393[#49393])\n+\n+Cluster Coordination::\n+* Use special XContent registry for node tool {pull}54050[#54050] (issue: {issue}53549[#53549])\n+* Allow static cluster.max_voting_config_exclusions {pull}53717[#53717] (issue: {issue}53455[#53455])\n+* Allow joining node to trigger term bump {pull}53338[#53338] (issue: {issue}53271[#53271])\n+* Ignore timeouts with single-node discovery {pull}52159[#52159]\n+\n+Distributed::\n+* Execute retention lease syncs under system context {pull}53838[#53838] (issues: {issue}48430[#48430], {issue}53751[#53751])\n+* Exclude nested documents in LuceneChangesSnapshot {pull}51279[#51279]\n+\n+Engine::\n+* Fix doc_stats and segment_stats of ReadOnlyEngine {pull}53345[#53345] (issues: {issue}51303[#51303], {issue}51331[#51331])\n+* Do not wrap soft-deletes reader for segment stats {pull}51331[#51331] (issues: {issue}51192[#51192], {issue}51303[#51303])\n+* Account soft-deletes in FrozenEngine {pull}51192[#51192] (issue: {issue}50775[#50775])\n+\n+Features/CAT APIs::\n+* Fix NPE in RestPluginsAction {pull}52620[#52620] (issue: {issue}45321[#45321])\n+\n+Features/ILM+SLM::\n+* Disallow negative TimeValues {pull}53913[#53913] (issue: {issue}54041[#54041])\n+* Fix null config in SnapshotLifecyclePolicy.toRequest {pull}53328[#53328] (issues: {issue}44465[#44465], {issue}53171[#53171])\n+* Freeze step retry when not acknowledged {pull}53287[#53287]\n+* Make the set-single-node-allocation retryable (#52077) {pull}52138[#52138] (issue: {issue}52077[#52077])\n+* Make the set-single-node-allocation retryable {pull}52077[#52077] (issue: {issue}43401[#43401])\n+* Fix the init step to actually be retryable {pull}52076[#52076]\n+\n+Features/Ingest::\n+* Fix ingest pipeline _simulate api with empty docs never returns a res\u2026 {pull}52937[#52937] (issue: {issue}52833[#52833])\n+* Handle errors when evaluating if conditions in processors {pull}52543[#52543] (issue: {issue}52339[#52339])\n+* Fix delete enrich policy bug {pull}52179[#52179] (issue: {issue}51228[#51228])\n+* Fix ignore_missing in CsvProcessor {pull}51600[#51600]\n+* Missing suffix for German Month \"Juli\" in Grok Pattern MONTH (#51579) {pull}51591[#51591] (issue: {issue}51579[#51579])", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "originalPosition": 449}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNTc3MTU3", "url": "https://github.com/elastic/elasticsearch/pull/55019#pullrequestreview-391577157", "createdAt": "2020-04-10T17:56:07Z", "commit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxNzo1NjowN1rOGEBdmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxNzo1NjowN1rOGEBdmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg3MTQ0OA==", "bodyText": "Duplicates?\nLooks like #52077 is the original PR. #52138 is the 7.x backport.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Make the set-single-node-allocation retryable (#52077) {pull}52138[#52138] (issue: {issue}52077[#52077])\n          \n          \n            \n            * Make the set-single-node-allocation retryable {pull}52077[#52077] (issue: {issue}43401[#43401])\n          \n          \n            \n            * Make the set-single-node-allocation retryable {pull}52077[#52077] (issue: {issue}43401[#43401])", "url": "https://github.com/elastic/elasticsearch/pull/55019#discussion_r406871448", "createdAt": "2020-04-10T17:56:07Z", "author": {"login": "jrodewig"}, "path": "docs/reference/release-notes/7.7.asciidoc", "diffHunk": "@@ -1,22 +1,612 @@\n [[release-notes-7.7.0]]\n == {es} version 7.7.0\n \n-coming[7.7.0]\n+Also see <<breaking-changes-7.7,Breaking changes in 7.7>>.\n \n [[breaking-7.7.0]]\n [float]\n === Breaking changes\n \n+Highlighting::\n+* Highlighters skip ignored keyword values {pull}53408[#53408] (issue: {issue}43800[#43800])\n+\n+Infra/Core::\n+* Remove DEBUG-level default logging from actions {pull}51459[#51459] (issue: {issue}51198[#51198])\n+\n Mapping::\n * Dynamic mappings in indices created on 8.0 and later have stricter validation at mapping update time and\n   results in a deprecation warning for indices created in Elasticsearch 7.7.0 and later.\n-  (e.g. incorrect analyzer settings or unknown field types). {pull}51233[#51233]\n+  (e.g. incorrect analyzer settings or unknown field types). {pull}51233[#51233] (issues: {issue}17411[#17411], {issue}24419[#24419])\n \n Search::\n-* A regression that allowed negative scores in a script_score query was corrected.\n-  A behaviour is restored that throws an error if script_score query produces\n-  a negative score {pull}52478[#52478].\n+* Make range query rounding consistent {pull}50237[#50237] (issue: {issue}50009[#50009])\n * Pipeline aggregation validation errors that used to return HTTP\n   500s/Internal Server Errors now return 400/Bad Request {pull}53669[#53669].\n   As a bonus we now return a list of validation errors rather than returning\n   the first one we encounter.\n+\n+\n+\n+[[breaking-java-7.7.0]]\n+[float]\n+=== Breaking Java changes\n+\n+Infra/Core::\n+* Fix ActionListener.map exception handling {pull}50886[#50886]\n+\n+Machine Learning::\n+* Add expected input field type to trained model config {pull}53083[#53083]\n+\n+Transform::\n+* Enhance the output of preview to return full destination index details {pull}53572[#53572]\n+\n+\n+\n+[[deprecation-7.7.0]]\n+[float]\n+=== Deprecations\n+\n+Allocation::\n+* Deprecated support for delaying state recovery pending master nodes {pull}53646[#53646] (issue: {issue}51806[#51806])\n+\n+Authentication::\n+* Add warnings for invalid realm order config (#51195) {pull}51515[#51515]\n+* Deprecate timeout.tcp_read AD/LDAP realm setting {pull}47305[#47305] (issue: {issue}46028[#46028])\n+\n+Engine::\n+* Deprecate translog retention settings {pull}51588[#51588] (issues: {issue}45473[#45473], {issue}50775[#50775])\n+\n+Features/Features::\n+* Add cluster.remote.connect to deprecation info API {pull}54142[#54142] (issue: {issue}53924[#53924])\n+\n+Infra/Core::\n+* Add deprecation check for listener thread pool {pull}53438[#53438] (issues: {issue}53049[#53049], {issue}53317[#53317])\n+* Deprecate the logstash enabled setting {pull}53367[#53367]\n+* Deprecate the listener thread pool {pull}53266[#53266] (issue: {issue}53049[#53049])\n+* Deprecate creation of dot-prefixed index names except for hidden and system indices {pull}49959[#49959]\n+\n+Infra/REST API::\n+* Deprecate undocumented alternatives to the nodes hot threads API (#52640) {pull}52930[#52930] (issue: {issue}52640[#52640])\n+\n+Machine Learning::\n+* Renaming inference processor field field_mappings to new name field_map {pull}53433[#53433]\n+\n+Search::\n+* Emit deprecation warning when TermsLookup contains a type {pull}53731[#53731] (issue: {issue}41059[#41059])\n+* Deprecate BoolQueryBuilder's mustNot field {pull}53125[#53125]\n+\n+\n+\n+[[feature-7.7.0]]\n+[float]\n+=== New features\n+\n+Aggregations::\n+* Preserve metric types in top_metrics {pull}53288[#53288]\n+* Support multiple metrics in `top_metrics` agg {pull}52965[#52965] (issue: {issue}51813[#51813])\n+* Add size support to `top_metrics` {pull}52662[#52662] (issue: {issue}51813[#51813])\n+* HLRC support for string_stats {pull}52163[#52163]\n+* Add Boxplot Aggregation {pull}51948[#51948] (issue: {issue}33112[#33112])\n+\n+Analysis::\n+* Add nori_number token filter in analysis-nori {pull}53583[#53583]\n+\n+Authentication::\n+* Create API Key on behalf of other user {pull}52886[#52886] (issue: {issue}48716[#48716])\n+\n+Geo::\n+* Add support for distance queries on shape queries {pull}53468[#53468]\n+* Add support for distance queries on geo_shape queries {pull}53466[#53466] (issues: {issue}13351[#13351], {issue}39237[#39237])\n+* Add support for multipoint shape queries {pull}52564[#52564] (issue: {issue}52133[#52133])\n+* Add support for multipoint geoshape queries {pull}52133[#52133] (issue: {issue}37318[#37318])\n+\n+Infra/Core::\n+* Implement hidden indices {pull}50452[#50452] (issues: {issue}50251[#50251], {issue}50665[#50665], {issue}50762[#50762])\n+\n+Infra/Packaging::\n+* Introduce aarch64 packaging {pull}53914[#53914]\n+\n+Machine Learning::\n+* Implement ILM policy for .ml-state* indices {pull}52356[#52356] (issue: {issue}29938[#29938])\n+\n+Mapping::\n+* Introduce a `constant_keyword` field. {pull}49713[#49713]\n+\n+SQL::\n+* constant_keyword support {pull}53241[#53241] (issue: {issue}53016[#53016])\n+* Add optimisations for not-equalities {pull}51088[#51088] (issue: {issue}49637[#49637])\n+* Add support for passing query parameters in REST API calls {pull}51029[#51029] (issue: {issue}42916[#42916])\n+\n+Search::\n+* Introduce compound query {pull}52387[#52387] (issue: {issue}51967[#51967])\n+* Add a cluster setting to disallow expensive queries {pull}51385[#51385] (issue: {issue}29050[#29050])\n+* Add new x-pack endpoints to track the progress of a search asynchronously {pull}49931[#49931] (issue: {issue}49091[#49091])\n+\n+\n+\n+[[enhancement-7.7.0]]\n+[float]\n+=== Enhancements\n+\n+Aggregations::\n+* Try to save memory on aggregations {pull}53793[#53793]\n+* Speed up partial reduce of terms aggregations {pull}53216[#53216] (issue: {issue}51857[#51857])\n+* Simplify SiblingPipelineAggregator {pull}53144[#53144]\n+* Add histogram field type support to boxplot aggs {pull}52265[#52265] (issues: {issue}33112[#33112], {issue}52233[#52233])\n+* Percentiles aggregation validation checks for range {pull}51871[#51871] (issue: {issue}51808[#51808])\n+* Begin moving date_histogram to offset rounding (take two) {pull}51271[#51271] (issues: {issue}50609[#50609], {issue}50873[#50873])\n+* Password-protected Keystore Feature Branch PR {pull}51123[#51123] (issues: {issue}32691[#32691], {issue}49340[#49340])\n+* Implement top_metrics agg {pull}51155[#51155] (issue: {issue}48069[#48069])\n+* Bucket aggregation circuit breaker optimization. {pull}46751[#46751]\n+\n+Analysis::\n+* Removes old Lucene's experimental flag from analyzer documentations {pull}53217[#53217]\n+\n+Authentication::\n+* Add exception metadata for disabled features {pull}52811[#52811] (issues: {issue}47759[#47759], {issue}52311[#52311], {issue}55255[#55255])\n+* Validate role templates before saving role mapping {pull}52636[#52636] (issue: {issue}48773[#48773])\n+* Add support for secondary authentication {pull}52093[#52093]\n+* Expose API key name to the ingest pipeline {pull}51305[#51305] (issues: {issue}46847[#46847], {issue}49106[#49106])\n+* Disallow Password Change when authenticated by Token {pull}49694[#49694] (issue: {issue}48752[#48752])\n+\n+Authorization::\n+* Allow kibana_system to create and invalidate API keys on behalf of other users {pull}53824[#53824] (issue: {issue}48716[#48716])\n+* Add \"grant_api_key\" cluster privilege {pull}53527[#53527] (issues: {issue}48716[#48716], {issue}52886[#52886])\n+* Giving kibana user privileges to create custom link index {pull}53221[#53221] (issue: {issue}59305[#59305])\n+* [APM] Allow kibana to collect APM telemetry in background task {pull}52917[#52917] (issue: {issue}50757[#50757])\n+* Add the new 'maintenance' privilege containing 4 actions (#29998) {pull}50643[#50643]\n+\n+Cluster Coordination::\n+* Describe STALE_STATE_CONFIG in ClusterFormationFH {pull}53878[#53878] (issue: {issue}53734[#53734])\n+\n+Distributed::\n+* Introduce formal role for remote cluster client {pull}53924[#53924]\n+* Shortcut query phase using the results of other shards {pull}51852[#51852] (issues: {issue}49601[#49601], {issue}51708[#51708])\n+* Flush instead of synced-flush inactive shards {pull}49126[#49126] (issues: {issue}31965[#31965], {issue}48430[#48430])\n+\n+Engine::\n+* Restore off-heap loading for term dictionary in ReadOnlyEngine {pull}53713[#53713] (issues: {issue}43158[#43158], {issue}51247[#51247])\n+* Separate translog from index deletion conditions {pull}52556[#52556]\n+* Always rewrite search shard request outside of the search thread pool {pull}51708[#51708] (issue: {issue}49601[#49601])\n+* Move the terms index of `_id` off-heap. {pull}52405[#52405] (issue: {issue}42838[#42838])\n+* Cache completion stats between refreshes {pull}51991[#51991] (issue: {issue}51915[#51915])\n+* Use local checkpoint to calculate min translog gen for recovery {pull}51905[#51905] (issue: {issue}49970[#49970])\n+\n+Features/CAT APIs::\n+* /_cat/shards support path stats {pull}53461[#53461]\n+* Allow _cat indices & aliases to use indices options {pull}53248[#53248] (issue: {issue}52304[#52304])\n+\n+Features/Features::\n+* Enable deprecation checks for removed settings {pull}53317[#53317]\n+\n+Features/ILM+SLM::\n+* Hide ILM & SLM history aliases {pull}53564[#53564]\n+* Avoid race condition in ILMHistorySotre {pull}53039[#53039] (issues: {issue}50353[#50353], {issue}52853[#52853])\n+* Make FreezeStep retryable {pull}52540[#52540]\n+* Make DeleteStep retryable {pull}52494[#52494]\n+* Allow forcemerge in the hot phase for ILM policies {pull}52073[#52073] (issue: {issue}43165[#43165])\n+* Stop policy on last PhaseCompleteStep instead of TerminalPolic\u2026 {pull}51631[#51631] (issue: {issue}48431[#48431])\n+* Convert ILM and SLM histories into hidden indices {pull}51456[#51456]\n+* Make UpdateSettingsStep retryable {pull}51235[#51235] (issues: {issue}44135[#44135], {issue}48183[#48183])\n+* Expose master timeout for ILM actions {pull}51130[#51130] (issue: {issue}44136[#44136])\n+* Wait for active shards on rolled index in a separate step {pull}50718[#50718] (issues: {issue}44135[#44135], {issue}48183[#48183])\n+* Adding best_compression {pull}49974[#49974]\n+\n+Features/Indices APIs::\n+* Add IndexTemplateV2 to MetaData {pull}53753[#53753] (issue: {issue}53101[#53101])\n+* Add ComponentTemplate to MetaData {pull}53290[#53290] (issue: {issue}53101[#53101])\n+\n+Features/Ingest::\n+* Reduce log level for pipeline failure {pull}54097[#54097] (issue: {issue}51459[#51459])\n+* Support array for all string ingest processors {pull}53343[#53343] (issue: {issue}51087[#51087])\n+* Add empty_value parameter to CSV processor {pull}51567[#51567]\n+* Add pipeline name to ingest metadata {pull}50467[#50467] (issue: {issue}42106[#42106])\n+\n+Features/Java High Level REST Client::\n+* SourceExists HLRC uses GetSourceRequest instead of GetRequest {pull}51789[#51789] (issue: {issue}50885[#50885])\n+* Add async_search.submit to HLRC {pull}53592[#53592] (issue: {issue}49091[#49091])\n+* Add Get Source API to the HLRC {pull}50885[#50885] (issue: {issue}47678[#47678])\n+\n+Features/Monitoring::\n+* Secure password for monitoring HTTP exporter {pull}50919[#50919] (issue: {issue}50197[#50197])\n+* Validate SSL settings at parse time {pull}49196[#49196] (issue: {issue}47711[#47711])\n+\n+Features/Stats::\n+* Add analysis components and mapping types to the usage API. {pull}51031[#51031]\n+\n+Features/Watcher::\n+* Make watch history indices hidden {pull}52962[#52962] (issue: {issue}50251[#50251])\n+* Upgrade to the latest OWASP HTML sanitizer {pull}50765[#50765] (issue: {issue}50395[#50395])\n+\n+Infra/Core::\n+* Enable helpful null pointer exceptions {pull}54853[#54853]\n+* Allow keystore add to handle multiple settings {pull}54229[#54229] (issue: {issue}54191[#54191])\n+* Report parser name and location in XContent deprecation warnings {pull}53805[#53805]\n+* Report parser name and location in XContent deprecation warnings {pull}53752[#53752]\n+* Deprecate all variants of a ParseField with no replacement {pull}53722[#53722]\n+* Add a helper method to parse maps of objects {pull}53096[#53096]\n+* Allow specifying an exclusive set of fields on ObjectParser {pull}52893[#52893]\n+* Support joda style date patterns in 7.x {pull}52555[#52555]\n+* Implement hidden aliases {pull}52547[#52547] (issue: {issue}52304[#52304])\n+* Allow ObjectParsers to specify required sets of fields {pull}49661[#49661] (issue: {issue}48824[#48824])\n+\n+Infra/Logging::\n+* Capture stdout and stderr to log4j log {pull}50259[#50259] (issue: {issue}50156[#50156])\n+\n+Infra/Packaging::\n+* Introduce aarch64 Docker image {pull}53936[#53936] (issue: {issue}53914[#53914])\n+* Introduce jvm.options.d for customizing JVM options {pull}51882[#51882] (issue: {issue}51626[#51626])\n+\n+Infra/Plugins::\n+* Allow sha512 checksum without filename for maven plugins {pull}52668[#52668] (issue: {issue}52413[#52413])\n+\n+Infra/Scripting::\n+* Scripting: Context script cache unlimited compile {pull}53769[#53769] (issue: {issue}50152[#50152])\n+* Scripting: Increase ingest script cache defaults {pull}53765[#53765] (issue: {issue}50152[#50152])\n+* Scripting: Per-context script cache, default off (#52855) {pull}53756[#53756] (issues: {issue}50152[#50152], {issue}52855[#52855])\n+* Scripting: Per-context script cache, default off {pull}52855[#52855] (issue: {issue}50152[#50152])\n+* Improve Painless compilation performance for nested conditionals {pull}52056[#52056]\n+* Scripting: Add char position of script errors {pull}51069[#51069] (issue: {issue}50993[#50993])\n+\n+Infra/Settings::\n+* Allow keystore add-file to handle multiple settings {pull}54240[#54240] (issue: {issue}54191[#54191])\n+* Settings: AffixSettings as validator dependencies {pull}52973[#52973] (issue: {issue}52933[#52933])\n+\n+License::\n+* Simplify ml license checking with XpackLicenseState internals {pull}52684[#52684] (issue: {issue}52115[#52115])\n+* License removal leads back to a basic license {pull}52407[#52407] (issue: {issue}45022[#45022])\n+* Refactor license checking {pull}52118[#52118] (issue: {issue}51864[#51864])\n+* Add enterprise mode and refactor {pull}51864[#51864] (issue: {issue}51081[#51081])\n+\n+Machine Learning::\n+* Stratified cross validation split for classification {pull}54087[#54087]\n+* Data frame analytics data counts {pull}53998[#53998]\n+* Verify that the field is aggregatable before attempting cardinality aggregation {pull}53874[#53874] (issue: {issue}53876[#53876])\n+* Adds multi-class feature importance support {pull}53803[#53803]\n+* Data frame analytics analysis stats {pull}53788[#53788]\n+* Add a model memory estimation endpoint for anomaly detection {pull}53507[#53507] (issue: {issue}53219[#53219])\n+* [Inference] adds new default_field_map field to trained models {pull}53294[#53294]\n+* Improve DF analytics audits and logging {pull}53179[#53179]\n+* Add indices_options to datafeed config and update {pull}52793[#52793] (issue: {issue}48056[#48056])\n+* Parse and report memory usage for DF Analytics {pull}52778[#52778]\n+* Adds the class_assignment_objective parameter to classification {pull}52763[#52763] (issue: {issue}52427[#52427])\n+* Add reason to DataFrameAnalyticsTask updateState log message {pull}52659[#52659] (issue: {issue}52654[#52654])\n+* [Inference] Add support for multi-value leaves to the tree model {pull}52531[#52531]\n+* Make ml internal indices hidden {pull}52423[#52423] (issue: {issue}52420[#52420])\n+* Add _cat/ml/data_frame/analytics API {pull}52260[#52260] (issue: {issue}51413[#51413])\n+* Adds feature importance option to inference processor {pull}52218[#52218]\n+* Switch poor categorization audit warning to use status field {pull}52195[#52195] (issues: {issue}50749[#50749], {issue}51146[#51146], {issue}51879[#51879])\n+* Retry persisting DF Analytics results {pull}52048[#52048]\n+* Improve multiline_start_pattern for CSV in find_file_structure {pull}51737[#51737]\n+* Add _cat/ml/trained_models API {pull}51529[#51529] (issue: {issue}51414[#51414])\n+* Add GET _cat/ml/datafeeds {pull}51500[#51500] (issue: {issue}51411[#51411])\n+* Use CSV ingest processor in find_file_structure ingest pipeline {pull}51492[#51492] (issue: {issue}56038[#56038])\n+* Add _cat/ml/anomaly_detectors API {pull}51364[#51364]\n+* [Inference] add tags url param to GET {pull}51330[#51330]\n+* Add parsers for inference configuration classes {pull}51300[#51300]\n+* Make datafeeds work with nanosecond time fields {pull}51180[#51180] (issue: {issue}49889[#49889])\n+* Add audit warning for 1000 categories found early in job {pull}51146[#51146] (issue: {issue}50749[#50749])\n+* Adds support for a global calendars {pull}50372[#50372] (issue: {issue}45013[#45013])\n+\n+Mapping::\n+* Wildcard field - add normalizer support {pull}53851[#53851]\n+* Wildcard field - added case insensitive search option {pull}53814[#53814]\n+* Append index name for the source of the cluster put-mapping task {pull}52690[#52690]\n+\n+Network::\n+* Give helpful message on remote connections disabled {pull}53690[#53690]\n+* Add server name to remote info API {pull}53634[#53634]\n+* Log when probe succeeds but full connection fails {pull}51304[#51304]\n+* Encrypt generated key with AES {pull}51019[#51019] (issue: {issue}50843[#50843])\n+\n+Ranking::\n+* Adds recall@k metric to rank eval API {pull}52577[#52577] (issue: {issue}51676[#51676])\n+\n+SQL::\n+* Jdbc debugging enhancement {pull}53880[#53880]\n+* Transfer version compatibility decision to the server {pull}53082[#53082] (issue: {issue}52766[#52766])\n+* Use a proper error message for queries directed at empty mapping indices {pull}52967[#52967] (issue: {issue}52865[#52865])\n+* Use calendar_interval of 1d for HISTOGRAMs with 1 DAY intervals {pull}52749[#52749] (issue: {issue}52713[#52713])\n+* Use a calendar interval for histograms over 1 month intervals {pull}52586[#52586] (issue: {issue}51538[#51538])\n+* Make parsing of date more lenient {pull}52137[#52137] (issue: {issue}49379[#49379])\n+* Enhance timestamp escaped literal parsing {pull}52097[#52097] (issue: {issue}46069[#46069])\n+* Handle uberjar scenario where the ES jdbc driver file is bundled in another jar {pull}51856[#51856] (issue: {issue}50201[#50201])\n+* Verify Full-Text Search functions not allowed in SELECT {pull}51568[#51568] (issue: {issue}47446[#47446])\n+* Extend the optimisations for equalities {pull}50792[#50792] (issue: {issue}49637[#49637])\n+* Add trace logging for search responses coming from server {pull}50530[#50530]\n+* Extend DATE_TRUNC to also operate on intervals(elastic - #46632 ) {pull}47720[#47720] (issue: {issue}46632[#46632])\n+* Enchance output of explain for optimized plan {pull}33718[#33718]\n+\n+Search::\n+* HLRC: Don't send defaults for SubmitAsyncSearchRequest {pull}54200[#54200]\n+* Reduce performance impact of ExitableDirectoryReader {pull}53978[#53978] (issues: {issue}52822[#52822], {issue}53166[#53166], {issue}53496[#53496])\n+* Add heuristics to compute pre_filter_shard_size when unspecified {pull}53873[#53873] (issue: {issue}39835[#39835])\n+* Add async_search get and delete APIs to HLRC {pull}53828[#53828] (issue: {issue}49091[#49091])\n+* Increase step between checks for cancellation {pull}53712[#53712] (issues: {issue}52822[#52822], {issue}53496[#53496])\n+* Refine SearchProgressListener internal API {pull}53373[#53373]\n+* Check for query cancellation during rewrite {pull}53166[#53166] (issue: {issue}52822[#52822])\n+* Implement Cancellable DirectoryReader {pull}52822[#52822]\n+* Address MinAndMax generics warnings {pull}52642[#52642] (issue: {issue}49092[#49092])\n+* Clarify when shard iterators get sorted {pull}52633[#52633]\n+* Generalize how queries on `_index` are handled at rewrite time {pull}52486[#52486] (issues: {issue}49254[#49254], {issue}49713[#49713])\n+* Remove the query builder serialization from QueryShardException message {pull}51885[#51885] (issues: {issue}48910[#48910], {issue}51843[#51843])\n+* Short circuited to MatchNone for non-participating  slice {pull}51207[#51207]\n+* Add \"did you mean\" to unknown queries {pull}51177[#51177]\n+* Exclude unmapped fields during max clause limit checking for querying {pull}49523[#49523] (issue: {issue}49002[#49002])\n+\n+Security::\n+* Add error message in JSON response {pull}54389[#54389]\n+\n+Snapshot/Restore::\n+* Use Azure Bulk Deletes in Azure Repository {pull}53919[#53919] (issue: {issue}53865[#53865])\n+* Only link fd* files during source-only snapshot {pull}53463[#53463] (issue: {issue}50231[#50231])\n+* Add Blob Download Retries to GCS Repository {pull}52479[#52479] (issues: {issue}46589[#46589], {issue}52319[#52319])\n+* Better Incrementality for Snapshots of Unchanged Shards {pull}52182[#52182]\n+* Add Region and Signer Algorithm Overrides to S3 Repos {pull}52112[#52112] (issue: {issue}51861[#51861])\n+* Allow Parallel Snapshot Restore And Delete {pull}51608[#51608] (issue: {issue}41463[#41463])\n+\n+Store::\n+* HybridDirectory should mmap postings. {pull}52641[#52641]\n+\n+Transform::\n+* Transition Transforms to using hidden indices for notifcations index {pull}53773[#53773] (issue: {issue}53762[#53762])\n+* [Rollup] add processing stats to record the time spent for processing results {pull}53770[#53770]\n+* Create GET _cat/transforms API Issue {pull}53643[#53643] (issue: {issue}51412[#51412])\n+* Add support for script in group_by {pull}53167[#53167] (issue: {issue}43152[#43152])\n+* Implement node.transform to control where to run a transform {pull}52712[#52712] (issues: {issue}48734[#48734], {issue}50033[#50033], {issue}52200[#52200])\n+* Add support for filter aggregation {pull}52483[#52483] (issue: {issue}52151[#52151])\n+* Provide exponential_avg* stats for batch transforms {pull}52041[#52041] (issue: {issue}52037[#52037])\n+* Improve irrecoverable error detection - part 2 {pull}52003[#52003] (issue: {issue}51820[#51820])\n+* Mark transform API's stable {pull}51862[#51862]\n+* Improve irrecoverable error detection {pull}51820[#51820] (issue: {issue}50135[#50135])\n+* Add support for percentile aggs {pull}51808[#51808] (issue: {issue}51663[#51663])\n+* Disallow fieldnames with a dot at start and/or end {pull}51369[#51369]\n+* Avoid mapping problems with index templates {pull}51368[#51368] (issue: {issue}51321[#51321])\n+* Handle permanent bulk indexing errors {pull}51307[#51307] (issue: {issue}50122[#50122])\n+* Improve force stop robustness in case of an error {pull}51072[#51072]\n+\n+\n+\n+[[bug-7.7.0]]\n+[float]\n+=== Bug fixes\n+\n+Aggregations::\n+* Fix date_nanos in composite aggs {pull}53315[#53315] (issue: {issue}53168[#53168])\n+* Fix composite agg sort bug {pull}53296[#53296] (issue: {issue}52480[#52480])\n+* Decode max and min optimization more carefully {pull}52336[#52336] (issue: {issue}52220[#52220])\n+* Fix a DST error in date_histogram {pull}52016[#52016] (issue: {issue}50265[#50265])\n+* Use #name() instead of #simpleName() when generating doc values {pull}51920[#51920] (issues: {issue}50307[#50307], {issue}51847[#51847])\n+* Fix a sneaky bug in rare_terms {pull}51868[#51868] (issue: {issue}51020[#51020])\n+* Support time_zone on composite's date_histogram {pull}51172[#51172] (issues: {issue}45199[#45199], {issue}45200[#45200])\n+\n+Allocation::\n+* Improve performance of shards limits decider {pull}53577[#53577] (issue: {issue}53559[#53559])\n+\n+Analysis::\n+* Mask wildcard query special characters on keyword queries {pull}53127[#53127] (issue: {issue}46300[#46300])\n+* Fix caching for PreConfiguredTokenFilter {pull}50912[#50912] (issue: {issue}50734[#50734])\n+\n+Audit::\n+* Logfile audit settings validation {pull}52537[#52537] (issues: {issue}47038[#47038], {issue}47711[#47711], {issue}52357[#52357])\n+\n+Authentication::\n+* Fix potential bug in concurrent token refresh support {pull}53668[#53668]\n+* Respect runas realm for ApiKey security operations {pull}52178[#52178] (issue: {issue}51975[#51975])\n+* Preserve ApiKey credentials for async verification {pull}51244[#51244]\n+* Don't fallback to anonymous for tokens/apikeys {pull}51042[#51042] (issue: {issue}50171[#50171])\n+* Fail gracefully on invalid token strings {pull}51014[#51014]\n+\n+Authorization::\n+* Explicitly require that delegate API keys have no privileges {pull}53647[#53647]\n+* Allow _rollup_search with read privilege {pull}52043[#52043] (issue: {issue}50245[#50245])\n+\n+CCR::\n+* Put CCR tasks on (data && remote cluster clients) {pull}54146[#54146] (issue: {issue}53924[#53924])\n+* Handle no such remote cluster exception in ccr {pull}53415[#53415] (issue: {issue}53225[#53225])\n+* Fix shard follow task cleaner under security {pull}52347[#52347] (issues: {issue}44702[#44702], {issue}51971[#51971])\n+\n+CRUD::\n+* Force execution of finish shard bulk request {pull}51957[#51957] (issue: {issue}51904[#51904])\n+* Return 429 status code when there's a read_only cluster block {pull}50166[#50166] (issue: {issue}49393[#49393])\n+\n+Cluster Coordination::\n+* Use special XContent registry for node tool {pull}54050[#54050] (issue: {issue}53549[#53549])\n+* Allow static cluster.max_voting_config_exclusions {pull}53717[#53717] (issue: {issue}53455[#53455])\n+* Allow joining node to trigger term bump {pull}53338[#53338] (issue: {issue}53271[#53271])\n+* Ignore timeouts with single-node discovery {pull}52159[#52159]\n+\n+Distributed::\n+* Execute retention lease syncs under system context {pull}53838[#53838] (issues: {issue}48430[#48430], {issue}53751[#53751])\n+* Exclude nested documents in LuceneChangesSnapshot {pull}51279[#51279]\n+\n+Engine::\n+* Fix doc_stats and segment_stats of ReadOnlyEngine {pull}53345[#53345] (issues: {issue}51303[#51303], {issue}51331[#51331])\n+* Do not wrap soft-deletes reader for segment stats {pull}51331[#51331] (issues: {issue}51192[#51192], {issue}51303[#51303])\n+* Account soft-deletes in FrozenEngine {pull}51192[#51192] (issue: {issue}50775[#50775])\n+\n+Features/CAT APIs::\n+* Fix NPE in RestPluginsAction {pull}52620[#52620] (issue: {issue}45321[#45321])\n+\n+Features/ILM+SLM::\n+* Disallow negative TimeValues {pull}53913[#53913] (issue: {issue}54041[#54041])\n+* Fix null config in SnapshotLifecyclePolicy.toRequest {pull}53328[#53328] (issues: {issue}44465[#44465], {issue}53171[#53171])\n+* Freeze step retry when not acknowledged {pull}53287[#53287]\n+* Make the set-single-node-allocation retryable (#52077) {pull}52138[#52138] (issue: {issue}52077[#52077])\n+* Make the set-single-node-allocation retryable {pull}52077[#52077] (issue: {issue}43401[#43401])", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "originalPosition": 441}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNTc5NjY3", "url": "https://github.com/elastic/elasticsearch/pull/55019#pullrequestreview-391579667", "createdAt": "2020-04-10T18:01:15Z", "commit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxODowMToxNVrOGEBlpg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxODowMToxNVrOGEBlpg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg3MzUxMA==", "bodyText": "Closed but not merged.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Enchance output of explain for optimized plan {pull}33718[#33718]", "url": "https://github.com/elastic/elasticsearch/pull/55019#discussion_r406873510", "createdAt": "2020-04-10T18:01:15Z", "author": {"login": "jrodewig"}, "path": "docs/reference/release-notes/7.7.asciidoc", "diffHunk": "@@ -1,22 +1,612 @@\n [[release-notes-7.7.0]]\n == {es} version 7.7.0\n \n-coming[7.7.0]\n+Also see <<breaking-changes-7.7,Breaking changes in 7.7>>.\n \n [[breaking-7.7.0]]\n [float]\n === Breaking changes\n \n+Highlighting::\n+* Highlighters skip ignored keyword values {pull}53408[#53408] (issue: {issue}43800[#43800])\n+\n+Infra/Core::\n+* Remove DEBUG-level default logging from actions {pull}51459[#51459] (issue: {issue}51198[#51198])\n+\n Mapping::\n * Dynamic mappings in indices created on 8.0 and later have stricter validation at mapping update time and\n   results in a deprecation warning for indices created in Elasticsearch 7.7.0 and later.\n-  (e.g. incorrect analyzer settings or unknown field types). {pull}51233[#51233]\n+  (e.g. incorrect analyzer settings or unknown field types). {pull}51233[#51233] (issues: {issue}17411[#17411], {issue}24419[#24419])\n \n Search::\n-* A regression that allowed negative scores in a script_score query was corrected.\n-  A behaviour is restored that throws an error if script_score query produces\n-  a negative score {pull}52478[#52478].\n+* Make range query rounding consistent {pull}50237[#50237] (issue: {issue}50009[#50009])\n * Pipeline aggregation validation errors that used to return HTTP\n   500s/Internal Server Errors now return 400/Bad Request {pull}53669[#53669].\n   As a bonus we now return a list of validation errors rather than returning\n   the first one we encounter.\n+\n+\n+\n+[[breaking-java-7.7.0]]\n+[float]\n+=== Breaking Java changes\n+\n+Infra/Core::\n+* Fix ActionListener.map exception handling {pull}50886[#50886]\n+\n+Machine Learning::\n+* Add expected input field type to trained model config {pull}53083[#53083]\n+\n+Transform::\n+* Enhance the output of preview to return full destination index details {pull}53572[#53572]\n+\n+\n+\n+[[deprecation-7.7.0]]\n+[float]\n+=== Deprecations\n+\n+Allocation::\n+* Deprecated support for delaying state recovery pending master nodes {pull}53646[#53646] (issue: {issue}51806[#51806])\n+\n+Authentication::\n+* Add warnings for invalid realm order config (#51195) {pull}51515[#51515]\n+* Deprecate timeout.tcp_read AD/LDAP realm setting {pull}47305[#47305] (issue: {issue}46028[#46028])\n+\n+Engine::\n+* Deprecate translog retention settings {pull}51588[#51588] (issues: {issue}45473[#45473], {issue}50775[#50775])\n+\n+Features/Features::\n+* Add cluster.remote.connect to deprecation info API {pull}54142[#54142] (issue: {issue}53924[#53924])\n+\n+Infra/Core::\n+* Add deprecation check for listener thread pool {pull}53438[#53438] (issues: {issue}53049[#53049], {issue}53317[#53317])\n+* Deprecate the logstash enabled setting {pull}53367[#53367]\n+* Deprecate the listener thread pool {pull}53266[#53266] (issue: {issue}53049[#53049])\n+* Deprecate creation of dot-prefixed index names except for hidden and system indices {pull}49959[#49959]\n+\n+Infra/REST API::\n+* Deprecate undocumented alternatives to the nodes hot threads API (#52640) {pull}52930[#52930] (issue: {issue}52640[#52640])\n+\n+Machine Learning::\n+* Renaming inference processor field field_mappings to new name field_map {pull}53433[#53433]\n+\n+Search::\n+* Emit deprecation warning when TermsLookup contains a type {pull}53731[#53731] (issue: {issue}41059[#41059])\n+* Deprecate BoolQueryBuilder's mustNot field {pull}53125[#53125]\n+\n+\n+\n+[[feature-7.7.0]]\n+[float]\n+=== New features\n+\n+Aggregations::\n+* Preserve metric types in top_metrics {pull}53288[#53288]\n+* Support multiple metrics in `top_metrics` agg {pull}52965[#52965] (issue: {issue}51813[#51813])\n+* Add size support to `top_metrics` {pull}52662[#52662] (issue: {issue}51813[#51813])\n+* HLRC support for string_stats {pull}52163[#52163]\n+* Add Boxplot Aggregation {pull}51948[#51948] (issue: {issue}33112[#33112])\n+\n+Analysis::\n+* Add nori_number token filter in analysis-nori {pull}53583[#53583]\n+\n+Authentication::\n+* Create API Key on behalf of other user {pull}52886[#52886] (issue: {issue}48716[#48716])\n+\n+Geo::\n+* Add support for distance queries on shape queries {pull}53468[#53468]\n+* Add support for distance queries on geo_shape queries {pull}53466[#53466] (issues: {issue}13351[#13351], {issue}39237[#39237])\n+* Add support for multipoint shape queries {pull}52564[#52564] (issue: {issue}52133[#52133])\n+* Add support for multipoint geoshape queries {pull}52133[#52133] (issue: {issue}37318[#37318])\n+\n+Infra/Core::\n+* Implement hidden indices {pull}50452[#50452] (issues: {issue}50251[#50251], {issue}50665[#50665], {issue}50762[#50762])\n+\n+Infra/Packaging::\n+* Introduce aarch64 packaging {pull}53914[#53914]\n+\n+Machine Learning::\n+* Implement ILM policy for .ml-state* indices {pull}52356[#52356] (issue: {issue}29938[#29938])\n+\n+Mapping::\n+* Introduce a `constant_keyword` field. {pull}49713[#49713]\n+\n+SQL::\n+* constant_keyword support {pull}53241[#53241] (issue: {issue}53016[#53016])\n+* Add optimisations for not-equalities {pull}51088[#51088] (issue: {issue}49637[#49637])\n+* Add support for passing query parameters in REST API calls {pull}51029[#51029] (issue: {issue}42916[#42916])\n+\n+Search::\n+* Introduce compound query {pull}52387[#52387] (issue: {issue}51967[#51967])\n+* Add a cluster setting to disallow expensive queries {pull}51385[#51385] (issue: {issue}29050[#29050])\n+* Add new x-pack endpoints to track the progress of a search asynchronously {pull}49931[#49931] (issue: {issue}49091[#49091])\n+\n+\n+\n+[[enhancement-7.7.0]]\n+[float]\n+=== Enhancements\n+\n+Aggregations::\n+* Try to save memory on aggregations {pull}53793[#53793]\n+* Speed up partial reduce of terms aggregations {pull}53216[#53216] (issue: {issue}51857[#51857])\n+* Simplify SiblingPipelineAggregator {pull}53144[#53144]\n+* Add histogram field type support to boxplot aggs {pull}52265[#52265] (issues: {issue}33112[#33112], {issue}52233[#52233])\n+* Percentiles aggregation validation checks for range {pull}51871[#51871] (issue: {issue}51808[#51808])\n+* Begin moving date_histogram to offset rounding (take two) {pull}51271[#51271] (issues: {issue}50609[#50609], {issue}50873[#50873])\n+* Password-protected Keystore Feature Branch PR {pull}51123[#51123] (issues: {issue}32691[#32691], {issue}49340[#49340])\n+* Implement top_metrics agg {pull}51155[#51155] (issue: {issue}48069[#48069])\n+* Bucket aggregation circuit breaker optimization. {pull}46751[#46751]\n+\n+Analysis::\n+* Removes old Lucene's experimental flag from analyzer documentations {pull}53217[#53217]\n+\n+Authentication::\n+* Add exception metadata for disabled features {pull}52811[#52811] (issues: {issue}47759[#47759], {issue}52311[#52311], {issue}55255[#55255])\n+* Validate role templates before saving role mapping {pull}52636[#52636] (issue: {issue}48773[#48773])\n+* Add support for secondary authentication {pull}52093[#52093]\n+* Expose API key name to the ingest pipeline {pull}51305[#51305] (issues: {issue}46847[#46847], {issue}49106[#49106])\n+* Disallow Password Change when authenticated by Token {pull}49694[#49694] (issue: {issue}48752[#48752])\n+\n+Authorization::\n+* Allow kibana_system to create and invalidate API keys on behalf of other users {pull}53824[#53824] (issue: {issue}48716[#48716])\n+* Add \"grant_api_key\" cluster privilege {pull}53527[#53527] (issues: {issue}48716[#48716], {issue}52886[#52886])\n+* Giving kibana user privileges to create custom link index {pull}53221[#53221] (issue: {issue}59305[#59305])\n+* [APM] Allow kibana to collect APM telemetry in background task {pull}52917[#52917] (issue: {issue}50757[#50757])\n+* Add the new 'maintenance' privilege containing 4 actions (#29998) {pull}50643[#50643]\n+\n+Cluster Coordination::\n+* Describe STALE_STATE_CONFIG in ClusterFormationFH {pull}53878[#53878] (issue: {issue}53734[#53734])\n+\n+Distributed::\n+* Introduce formal role for remote cluster client {pull}53924[#53924]\n+* Shortcut query phase using the results of other shards {pull}51852[#51852] (issues: {issue}49601[#49601], {issue}51708[#51708])\n+* Flush instead of synced-flush inactive shards {pull}49126[#49126] (issues: {issue}31965[#31965], {issue}48430[#48430])\n+\n+Engine::\n+* Restore off-heap loading for term dictionary in ReadOnlyEngine {pull}53713[#53713] (issues: {issue}43158[#43158], {issue}51247[#51247])\n+* Separate translog from index deletion conditions {pull}52556[#52556]\n+* Always rewrite search shard request outside of the search thread pool {pull}51708[#51708] (issue: {issue}49601[#49601])\n+* Move the terms index of `_id` off-heap. {pull}52405[#52405] (issue: {issue}42838[#42838])\n+* Cache completion stats between refreshes {pull}51991[#51991] (issue: {issue}51915[#51915])\n+* Use local checkpoint to calculate min translog gen for recovery {pull}51905[#51905] (issue: {issue}49970[#49970])\n+\n+Features/CAT APIs::\n+* /_cat/shards support path stats {pull}53461[#53461]\n+* Allow _cat indices & aliases to use indices options {pull}53248[#53248] (issue: {issue}52304[#52304])\n+\n+Features/Features::\n+* Enable deprecation checks for removed settings {pull}53317[#53317]\n+\n+Features/ILM+SLM::\n+* Hide ILM & SLM history aliases {pull}53564[#53564]\n+* Avoid race condition in ILMHistorySotre {pull}53039[#53039] (issues: {issue}50353[#50353], {issue}52853[#52853])\n+* Make FreezeStep retryable {pull}52540[#52540]\n+* Make DeleteStep retryable {pull}52494[#52494]\n+* Allow forcemerge in the hot phase for ILM policies {pull}52073[#52073] (issue: {issue}43165[#43165])\n+* Stop policy on last PhaseCompleteStep instead of TerminalPolic\u2026 {pull}51631[#51631] (issue: {issue}48431[#48431])\n+* Convert ILM and SLM histories into hidden indices {pull}51456[#51456]\n+* Make UpdateSettingsStep retryable {pull}51235[#51235] (issues: {issue}44135[#44135], {issue}48183[#48183])\n+* Expose master timeout for ILM actions {pull}51130[#51130] (issue: {issue}44136[#44136])\n+* Wait for active shards on rolled index in a separate step {pull}50718[#50718] (issues: {issue}44135[#44135], {issue}48183[#48183])\n+* Adding best_compression {pull}49974[#49974]\n+\n+Features/Indices APIs::\n+* Add IndexTemplateV2 to MetaData {pull}53753[#53753] (issue: {issue}53101[#53101])\n+* Add ComponentTemplate to MetaData {pull}53290[#53290] (issue: {issue}53101[#53101])\n+\n+Features/Ingest::\n+* Reduce log level for pipeline failure {pull}54097[#54097] (issue: {issue}51459[#51459])\n+* Support array for all string ingest processors {pull}53343[#53343] (issue: {issue}51087[#51087])\n+* Add empty_value parameter to CSV processor {pull}51567[#51567]\n+* Add pipeline name to ingest metadata {pull}50467[#50467] (issue: {issue}42106[#42106])\n+\n+Features/Java High Level REST Client::\n+* SourceExists HLRC uses GetSourceRequest instead of GetRequest {pull}51789[#51789] (issue: {issue}50885[#50885])\n+* Add async_search.submit to HLRC {pull}53592[#53592] (issue: {issue}49091[#49091])\n+* Add Get Source API to the HLRC {pull}50885[#50885] (issue: {issue}47678[#47678])\n+\n+Features/Monitoring::\n+* Secure password for monitoring HTTP exporter {pull}50919[#50919] (issue: {issue}50197[#50197])\n+* Validate SSL settings at parse time {pull}49196[#49196] (issue: {issue}47711[#47711])\n+\n+Features/Stats::\n+* Add analysis components and mapping types to the usage API. {pull}51031[#51031]\n+\n+Features/Watcher::\n+* Make watch history indices hidden {pull}52962[#52962] (issue: {issue}50251[#50251])\n+* Upgrade to the latest OWASP HTML sanitizer {pull}50765[#50765] (issue: {issue}50395[#50395])\n+\n+Infra/Core::\n+* Enable helpful null pointer exceptions {pull}54853[#54853]\n+* Allow keystore add to handle multiple settings {pull}54229[#54229] (issue: {issue}54191[#54191])\n+* Report parser name and location in XContent deprecation warnings {pull}53805[#53805]\n+* Report parser name and location in XContent deprecation warnings {pull}53752[#53752]\n+* Deprecate all variants of a ParseField with no replacement {pull}53722[#53722]\n+* Add a helper method to parse maps of objects {pull}53096[#53096]\n+* Allow specifying an exclusive set of fields on ObjectParser {pull}52893[#52893]\n+* Support joda style date patterns in 7.x {pull}52555[#52555]\n+* Implement hidden aliases {pull}52547[#52547] (issue: {issue}52304[#52304])\n+* Allow ObjectParsers to specify required sets of fields {pull}49661[#49661] (issue: {issue}48824[#48824])\n+\n+Infra/Logging::\n+* Capture stdout and stderr to log4j log {pull}50259[#50259] (issue: {issue}50156[#50156])\n+\n+Infra/Packaging::\n+* Introduce aarch64 Docker image {pull}53936[#53936] (issue: {issue}53914[#53914])\n+* Introduce jvm.options.d for customizing JVM options {pull}51882[#51882] (issue: {issue}51626[#51626])\n+\n+Infra/Plugins::\n+* Allow sha512 checksum without filename for maven plugins {pull}52668[#52668] (issue: {issue}52413[#52413])\n+\n+Infra/Scripting::\n+* Scripting: Context script cache unlimited compile {pull}53769[#53769] (issue: {issue}50152[#50152])\n+* Scripting: Increase ingest script cache defaults {pull}53765[#53765] (issue: {issue}50152[#50152])\n+* Scripting: Per-context script cache, default off (#52855) {pull}53756[#53756] (issues: {issue}50152[#50152], {issue}52855[#52855])\n+* Scripting: Per-context script cache, default off {pull}52855[#52855] (issue: {issue}50152[#50152])\n+* Improve Painless compilation performance for nested conditionals {pull}52056[#52056]\n+* Scripting: Add char position of script errors {pull}51069[#51069] (issue: {issue}50993[#50993])\n+\n+Infra/Settings::\n+* Allow keystore add-file to handle multiple settings {pull}54240[#54240] (issue: {issue}54191[#54191])\n+* Settings: AffixSettings as validator dependencies {pull}52973[#52973] (issue: {issue}52933[#52933])\n+\n+License::\n+* Simplify ml license checking with XpackLicenseState internals {pull}52684[#52684] (issue: {issue}52115[#52115])\n+* License removal leads back to a basic license {pull}52407[#52407] (issue: {issue}45022[#45022])\n+* Refactor license checking {pull}52118[#52118] (issue: {issue}51864[#51864])\n+* Add enterprise mode and refactor {pull}51864[#51864] (issue: {issue}51081[#51081])\n+\n+Machine Learning::\n+* Stratified cross validation split for classification {pull}54087[#54087]\n+* Data frame analytics data counts {pull}53998[#53998]\n+* Verify that the field is aggregatable before attempting cardinality aggregation {pull}53874[#53874] (issue: {issue}53876[#53876])\n+* Adds multi-class feature importance support {pull}53803[#53803]\n+* Data frame analytics analysis stats {pull}53788[#53788]\n+* Add a model memory estimation endpoint for anomaly detection {pull}53507[#53507] (issue: {issue}53219[#53219])\n+* [Inference] adds new default_field_map field to trained models {pull}53294[#53294]\n+* Improve DF analytics audits and logging {pull}53179[#53179]\n+* Add indices_options to datafeed config and update {pull}52793[#52793] (issue: {issue}48056[#48056])\n+* Parse and report memory usage for DF Analytics {pull}52778[#52778]\n+* Adds the class_assignment_objective parameter to classification {pull}52763[#52763] (issue: {issue}52427[#52427])\n+* Add reason to DataFrameAnalyticsTask updateState log message {pull}52659[#52659] (issue: {issue}52654[#52654])\n+* [Inference] Add support for multi-value leaves to the tree model {pull}52531[#52531]\n+* Make ml internal indices hidden {pull}52423[#52423] (issue: {issue}52420[#52420])\n+* Add _cat/ml/data_frame/analytics API {pull}52260[#52260] (issue: {issue}51413[#51413])\n+* Adds feature importance option to inference processor {pull}52218[#52218]\n+* Switch poor categorization audit warning to use status field {pull}52195[#52195] (issues: {issue}50749[#50749], {issue}51146[#51146], {issue}51879[#51879])\n+* Retry persisting DF Analytics results {pull}52048[#52048]\n+* Improve multiline_start_pattern for CSV in find_file_structure {pull}51737[#51737]\n+* Add _cat/ml/trained_models API {pull}51529[#51529] (issue: {issue}51414[#51414])\n+* Add GET _cat/ml/datafeeds {pull}51500[#51500] (issue: {issue}51411[#51411])\n+* Use CSV ingest processor in find_file_structure ingest pipeline {pull}51492[#51492] (issue: {issue}56038[#56038])\n+* Add _cat/ml/anomaly_detectors API {pull}51364[#51364]\n+* [Inference] add tags url param to GET {pull}51330[#51330]\n+* Add parsers for inference configuration classes {pull}51300[#51300]\n+* Make datafeeds work with nanosecond time fields {pull}51180[#51180] (issue: {issue}49889[#49889])\n+* Add audit warning for 1000 categories found early in job {pull}51146[#51146] (issue: {issue}50749[#50749])\n+* Adds support for a global calendars {pull}50372[#50372] (issue: {issue}45013[#45013])\n+\n+Mapping::\n+* Wildcard field - add normalizer support {pull}53851[#53851]\n+* Wildcard field - added case insensitive search option {pull}53814[#53814]\n+* Append index name for the source of the cluster put-mapping task {pull}52690[#52690]\n+\n+Network::\n+* Give helpful message on remote connections disabled {pull}53690[#53690]\n+* Add server name to remote info API {pull}53634[#53634]\n+* Log when probe succeeds but full connection fails {pull}51304[#51304]\n+* Encrypt generated key with AES {pull}51019[#51019] (issue: {issue}50843[#50843])\n+\n+Ranking::\n+* Adds recall@k metric to rank eval API {pull}52577[#52577] (issue: {issue}51676[#51676])\n+\n+SQL::\n+* Jdbc debugging enhancement {pull}53880[#53880]\n+* Transfer version compatibility decision to the server {pull}53082[#53082] (issue: {issue}52766[#52766])\n+* Use a proper error message for queries directed at empty mapping indices {pull}52967[#52967] (issue: {issue}52865[#52865])\n+* Use calendar_interval of 1d for HISTOGRAMs with 1 DAY intervals {pull}52749[#52749] (issue: {issue}52713[#52713])\n+* Use a calendar interval for histograms over 1 month intervals {pull}52586[#52586] (issue: {issue}51538[#51538])\n+* Make parsing of date more lenient {pull}52137[#52137] (issue: {issue}49379[#49379])\n+* Enhance timestamp escaped literal parsing {pull}52097[#52097] (issue: {issue}46069[#46069])\n+* Handle uberjar scenario where the ES jdbc driver file is bundled in another jar {pull}51856[#51856] (issue: {issue}50201[#50201])\n+* Verify Full-Text Search functions not allowed in SELECT {pull}51568[#51568] (issue: {issue}47446[#47446])\n+* Extend the optimisations for equalities {pull}50792[#50792] (issue: {issue}49637[#49637])\n+* Add trace logging for search responses coming from server {pull}50530[#50530]\n+* Extend DATE_TRUNC to also operate on intervals(elastic - #46632 ) {pull}47720[#47720] (issue: {issue}46632[#46632])\n+* Enchance output of explain for optimized plan {pull}33718[#33718]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "originalPosition": 323}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNTgwMDAz", "url": "https://github.com/elastic/elasticsearch/pull/55019#pullrequestreview-391580003", "createdAt": "2020-04-10T18:01:53Z", "commit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxODowMTo1M1rOGEBmpg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxODowMTo1M1rOGEBmpg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg3Mzc2Ng==", "bodyText": "Minor capitalization fix.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Jdbc debugging enhancement {pull}53880[#53880]\n          \n          \n            \n            * JDBC debugging enhancement {pull}53880[#53880]", "url": "https://github.com/elastic/elasticsearch/pull/55019#discussion_r406873766", "createdAt": "2020-04-10T18:01:53Z", "author": {"login": "jrodewig"}, "path": "docs/reference/release-notes/7.7.asciidoc", "diffHunk": "@@ -1,22 +1,612 @@\n [[release-notes-7.7.0]]\n == {es} version 7.7.0\n \n-coming[7.7.0]\n+Also see <<breaking-changes-7.7,Breaking changes in 7.7>>.\n \n [[breaking-7.7.0]]\n [float]\n === Breaking changes\n \n+Highlighting::\n+* Highlighters skip ignored keyword values {pull}53408[#53408] (issue: {issue}43800[#43800])\n+\n+Infra/Core::\n+* Remove DEBUG-level default logging from actions {pull}51459[#51459] (issue: {issue}51198[#51198])\n+\n Mapping::\n * Dynamic mappings in indices created on 8.0 and later have stricter validation at mapping update time and\n   results in a deprecation warning for indices created in Elasticsearch 7.7.0 and later.\n-  (e.g. incorrect analyzer settings or unknown field types). {pull}51233[#51233]\n+  (e.g. incorrect analyzer settings or unknown field types). {pull}51233[#51233] (issues: {issue}17411[#17411], {issue}24419[#24419])\n \n Search::\n-* A regression that allowed negative scores in a script_score query was corrected.\n-  A behaviour is restored that throws an error if script_score query produces\n-  a negative score {pull}52478[#52478].\n+* Make range query rounding consistent {pull}50237[#50237] (issue: {issue}50009[#50009])\n * Pipeline aggregation validation errors that used to return HTTP\n   500s/Internal Server Errors now return 400/Bad Request {pull}53669[#53669].\n   As a bonus we now return a list of validation errors rather than returning\n   the first one we encounter.\n+\n+\n+\n+[[breaking-java-7.7.0]]\n+[float]\n+=== Breaking Java changes\n+\n+Infra/Core::\n+* Fix ActionListener.map exception handling {pull}50886[#50886]\n+\n+Machine Learning::\n+* Add expected input field type to trained model config {pull}53083[#53083]\n+\n+Transform::\n+* Enhance the output of preview to return full destination index details {pull}53572[#53572]\n+\n+\n+\n+[[deprecation-7.7.0]]\n+[float]\n+=== Deprecations\n+\n+Allocation::\n+* Deprecated support for delaying state recovery pending master nodes {pull}53646[#53646] (issue: {issue}51806[#51806])\n+\n+Authentication::\n+* Add warnings for invalid realm order config (#51195) {pull}51515[#51515]\n+* Deprecate timeout.tcp_read AD/LDAP realm setting {pull}47305[#47305] (issue: {issue}46028[#46028])\n+\n+Engine::\n+* Deprecate translog retention settings {pull}51588[#51588] (issues: {issue}45473[#45473], {issue}50775[#50775])\n+\n+Features/Features::\n+* Add cluster.remote.connect to deprecation info API {pull}54142[#54142] (issue: {issue}53924[#53924])\n+\n+Infra/Core::\n+* Add deprecation check for listener thread pool {pull}53438[#53438] (issues: {issue}53049[#53049], {issue}53317[#53317])\n+* Deprecate the logstash enabled setting {pull}53367[#53367]\n+* Deprecate the listener thread pool {pull}53266[#53266] (issue: {issue}53049[#53049])\n+* Deprecate creation of dot-prefixed index names except for hidden and system indices {pull}49959[#49959]\n+\n+Infra/REST API::\n+* Deprecate undocumented alternatives to the nodes hot threads API (#52640) {pull}52930[#52930] (issue: {issue}52640[#52640])\n+\n+Machine Learning::\n+* Renaming inference processor field field_mappings to new name field_map {pull}53433[#53433]\n+\n+Search::\n+* Emit deprecation warning when TermsLookup contains a type {pull}53731[#53731] (issue: {issue}41059[#41059])\n+* Deprecate BoolQueryBuilder's mustNot field {pull}53125[#53125]\n+\n+\n+\n+[[feature-7.7.0]]\n+[float]\n+=== New features\n+\n+Aggregations::\n+* Preserve metric types in top_metrics {pull}53288[#53288]\n+* Support multiple metrics in `top_metrics` agg {pull}52965[#52965] (issue: {issue}51813[#51813])\n+* Add size support to `top_metrics` {pull}52662[#52662] (issue: {issue}51813[#51813])\n+* HLRC support for string_stats {pull}52163[#52163]\n+* Add Boxplot Aggregation {pull}51948[#51948] (issue: {issue}33112[#33112])\n+\n+Analysis::\n+* Add nori_number token filter in analysis-nori {pull}53583[#53583]\n+\n+Authentication::\n+* Create API Key on behalf of other user {pull}52886[#52886] (issue: {issue}48716[#48716])\n+\n+Geo::\n+* Add support for distance queries on shape queries {pull}53468[#53468]\n+* Add support for distance queries on geo_shape queries {pull}53466[#53466] (issues: {issue}13351[#13351], {issue}39237[#39237])\n+* Add support for multipoint shape queries {pull}52564[#52564] (issue: {issue}52133[#52133])\n+* Add support for multipoint geoshape queries {pull}52133[#52133] (issue: {issue}37318[#37318])\n+\n+Infra/Core::\n+* Implement hidden indices {pull}50452[#50452] (issues: {issue}50251[#50251], {issue}50665[#50665], {issue}50762[#50762])\n+\n+Infra/Packaging::\n+* Introduce aarch64 packaging {pull}53914[#53914]\n+\n+Machine Learning::\n+* Implement ILM policy for .ml-state* indices {pull}52356[#52356] (issue: {issue}29938[#29938])\n+\n+Mapping::\n+* Introduce a `constant_keyword` field. {pull}49713[#49713]\n+\n+SQL::\n+* constant_keyword support {pull}53241[#53241] (issue: {issue}53016[#53016])\n+* Add optimisations for not-equalities {pull}51088[#51088] (issue: {issue}49637[#49637])\n+* Add support for passing query parameters in REST API calls {pull}51029[#51029] (issue: {issue}42916[#42916])\n+\n+Search::\n+* Introduce compound query {pull}52387[#52387] (issue: {issue}51967[#51967])\n+* Add a cluster setting to disallow expensive queries {pull}51385[#51385] (issue: {issue}29050[#29050])\n+* Add new x-pack endpoints to track the progress of a search asynchronously {pull}49931[#49931] (issue: {issue}49091[#49091])\n+\n+\n+\n+[[enhancement-7.7.0]]\n+[float]\n+=== Enhancements\n+\n+Aggregations::\n+* Try to save memory on aggregations {pull}53793[#53793]\n+* Speed up partial reduce of terms aggregations {pull}53216[#53216] (issue: {issue}51857[#51857])\n+* Simplify SiblingPipelineAggregator {pull}53144[#53144]\n+* Add histogram field type support to boxplot aggs {pull}52265[#52265] (issues: {issue}33112[#33112], {issue}52233[#52233])\n+* Percentiles aggregation validation checks for range {pull}51871[#51871] (issue: {issue}51808[#51808])\n+* Begin moving date_histogram to offset rounding (take two) {pull}51271[#51271] (issues: {issue}50609[#50609], {issue}50873[#50873])\n+* Password-protected Keystore Feature Branch PR {pull}51123[#51123] (issues: {issue}32691[#32691], {issue}49340[#49340])\n+* Implement top_metrics agg {pull}51155[#51155] (issue: {issue}48069[#48069])\n+* Bucket aggregation circuit breaker optimization. {pull}46751[#46751]\n+\n+Analysis::\n+* Removes old Lucene's experimental flag from analyzer documentations {pull}53217[#53217]\n+\n+Authentication::\n+* Add exception metadata for disabled features {pull}52811[#52811] (issues: {issue}47759[#47759], {issue}52311[#52311], {issue}55255[#55255])\n+* Validate role templates before saving role mapping {pull}52636[#52636] (issue: {issue}48773[#48773])\n+* Add support for secondary authentication {pull}52093[#52093]\n+* Expose API key name to the ingest pipeline {pull}51305[#51305] (issues: {issue}46847[#46847], {issue}49106[#49106])\n+* Disallow Password Change when authenticated by Token {pull}49694[#49694] (issue: {issue}48752[#48752])\n+\n+Authorization::\n+* Allow kibana_system to create and invalidate API keys on behalf of other users {pull}53824[#53824] (issue: {issue}48716[#48716])\n+* Add \"grant_api_key\" cluster privilege {pull}53527[#53527] (issues: {issue}48716[#48716], {issue}52886[#52886])\n+* Giving kibana user privileges to create custom link index {pull}53221[#53221] (issue: {issue}59305[#59305])\n+* [APM] Allow kibana to collect APM telemetry in background task {pull}52917[#52917] (issue: {issue}50757[#50757])\n+* Add the new 'maintenance' privilege containing 4 actions (#29998) {pull}50643[#50643]\n+\n+Cluster Coordination::\n+* Describe STALE_STATE_CONFIG in ClusterFormationFH {pull}53878[#53878] (issue: {issue}53734[#53734])\n+\n+Distributed::\n+* Introduce formal role for remote cluster client {pull}53924[#53924]\n+* Shortcut query phase using the results of other shards {pull}51852[#51852] (issues: {issue}49601[#49601], {issue}51708[#51708])\n+* Flush instead of synced-flush inactive shards {pull}49126[#49126] (issues: {issue}31965[#31965], {issue}48430[#48430])\n+\n+Engine::\n+* Restore off-heap loading for term dictionary in ReadOnlyEngine {pull}53713[#53713] (issues: {issue}43158[#43158], {issue}51247[#51247])\n+* Separate translog from index deletion conditions {pull}52556[#52556]\n+* Always rewrite search shard request outside of the search thread pool {pull}51708[#51708] (issue: {issue}49601[#49601])\n+* Move the terms index of `_id` off-heap. {pull}52405[#52405] (issue: {issue}42838[#42838])\n+* Cache completion stats between refreshes {pull}51991[#51991] (issue: {issue}51915[#51915])\n+* Use local checkpoint to calculate min translog gen for recovery {pull}51905[#51905] (issue: {issue}49970[#49970])\n+\n+Features/CAT APIs::\n+* /_cat/shards support path stats {pull}53461[#53461]\n+* Allow _cat indices & aliases to use indices options {pull}53248[#53248] (issue: {issue}52304[#52304])\n+\n+Features/Features::\n+* Enable deprecation checks for removed settings {pull}53317[#53317]\n+\n+Features/ILM+SLM::\n+* Hide ILM & SLM history aliases {pull}53564[#53564]\n+* Avoid race condition in ILMHistorySotre {pull}53039[#53039] (issues: {issue}50353[#50353], {issue}52853[#52853])\n+* Make FreezeStep retryable {pull}52540[#52540]\n+* Make DeleteStep retryable {pull}52494[#52494]\n+* Allow forcemerge in the hot phase for ILM policies {pull}52073[#52073] (issue: {issue}43165[#43165])\n+* Stop policy on last PhaseCompleteStep instead of TerminalPolic\u2026 {pull}51631[#51631] (issue: {issue}48431[#48431])\n+* Convert ILM and SLM histories into hidden indices {pull}51456[#51456]\n+* Make UpdateSettingsStep retryable {pull}51235[#51235] (issues: {issue}44135[#44135], {issue}48183[#48183])\n+* Expose master timeout for ILM actions {pull}51130[#51130] (issue: {issue}44136[#44136])\n+* Wait for active shards on rolled index in a separate step {pull}50718[#50718] (issues: {issue}44135[#44135], {issue}48183[#48183])\n+* Adding best_compression {pull}49974[#49974]\n+\n+Features/Indices APIs::\n+* Add IndexTemplateV2 to MetaData {pull}53753[#53753] (issue: {issue}53101[#53101])\n+* Add ComponentTemplate to MetaData {pull}53290[#53290] (issue: {issue}53101[#53101])\n+\n+Features/Ingest::\n+* Reduce log level for pipeline failure {pull}54097[#54097] (issue: {issue}51459[#51459])\n+* Support array for all string ingest processors {pull}53343[#53343] (issue: {issue}51087[#51087])\n+* Add empty_value parameter to CSV processor {pull}51567[#51567]\n+* Add pipeline name to ingest metadata {pull}50467[#50467] (issue: {issue}42106[#42106])\n+\n+Features/Java High Level REST Client::\n+* SourceExists HLRC uses GetSourceRequest instead of GetRequest {pull}51789[#51789] (issue: {issue}50885[#50885])\n+* Add async_search.submit to HLRC {pull}53592[#53592] (issue: {issue}49091[#49091])\n+* Add Get Source API to the HLRC {pull}50885[#50885] (issue: {issue}47678[#47678])\n+\n+Features/Monitoring::\n+* Secure password for monitoring HTTP exporter {pull}50919[#50919] (issue: {issue}50197[#50197])\n+* Validate SSL settings at parse time {pull}49196[#49196] (issue: {issue}47711[#47711])\n+\n+Features/Stats::\n+* Add analysis components and mapping types to the usage API. {pull}51031[#51031]\n+\n+Features/Watcher::\n+* Make watch history indices hidden {pull}52962[#52962] (issue: {issue}50251[#50251])\n+* Upgrade to the latest OWASP HTML sanitizer {pull}50765[#50765] (issue: {issue}50395[#50395])\n+\n+Infra/Core::\n+* Enable helpful null pointer exceptions {pull}54853[#54853]\n+* Allow keystore add to handle multiple settings {pull}54229[#54229] (issue: {issue}54191[#54191])\n+* Report parser name and location in XContent deprecation warnings {pull}53805[#53805]\n+* Report parser name and location in XContent deprecation warnings {pull}53752[#53752]\n+* Deprecate all variants of a ParseField with no replacement {pull}53722[#53722]\n+* Add a helper method to parse maps of objects {pull}53096[#53096]\n+* Allow specifying an exclusive set of fields on ObjectParser {pull}52893[#52893]\n+* Support joda style date patterns in 7.x {pull}52555[#52555]\n+* Implement hidden aliases {pull}52547[#52547] (issue: {issue}52304[#52304])\n+* Allow ObjectParsers to specify required sets of fields {pull}49661[#49661] (issue: {issue}48824[#48824])\n+\n+Infra/Logging::\n+* Capture stdout and stderr to log4j log {pull}50259[#50259] (issue: {issue}50156[#50156])\n+\n+Infra/Packaging::\n+* Introduce aarch64 Docker image {pull}53936[#53936] (issue: {issue}53914[#53914])\n+* Introduce jvm.options.d for customizing JVM options {pull}51882[#51882] (issue: {issue}51626[#51626])\n+\n+Infra/Plugins::\n+* Allow sha512 checksum without filename for maven plugins {pull}52668[#52668] (issue: {issue}52413[#52413])\n+\n+Infra/Scripting::\n+* Scripting: Context script cache unlimited compile {pull}53769[#53769] (issue: {issue}50152[#50152])\n+* Scripting: Increase ingest script cache defaults {pull}53765[#53765] (issue: {issue}50152[#50152])\n+* Scripting: Per-context script cache, default off (#52855) {pull}53756[#53756] (issues: {issue}50152[#50152], {issue}52855[#52855])\n+* Scripting: Per-context script cache, default off {pull}52855[#52855] (issue: {issue}50152[#50152])\n+* Improve Painless compilation performance for nested conditionals {pull}52056[#52056]\n+* Scripting: Add char position of script errors {pull}51069[#51069] (issue: {issue}50993[#50993])\n+\n+Infra/Settings::\n+* Allow keystore add-file to handle multiple settings {pull}54240[#54240] (issue: {issue}54191[#54191])\n+* Settings: AffixSettings as validator dependencies {pull}52973[#52973] (issue: {issue}52933[#52933])\n+\n+License::\n+* Simplify ml license checking with XpackLicenseState internals {pull}52684[#52684] (issue: {issue}52115[#52115])\n+* License removal leads back to a basic license {pull}52407[#52407] (issue: {issue}45022[#45022])\n+* Refactor license checking {pull}52118[#52118] (issue: {issue}51864[#51864])\n+* Add enterprise mode and refactor {pull}51864[#51864] (issue: {issue}51081[#51081])\n+\n+Machine Learning::\n+* Stratified cross validation split for classification {pull}54087[#54087]\n+* Data frame analytics data counts {pull}53998[#53998]\n+* Verify that the field is aggregatable before attempting cardinality aggregation {pull}53874[#53874] (issue: {issue}53876[#53876])\n+* Adds multi-class feature importance support {pull}53803[#53803]\n+* Data frame analytics analysis stats {pull}53788[#53788]\n+* Add a model memory estimation endpoint for anomaly detection {pull}53507[#53507] (issue: {issue}53219[#53219])\n+* [Inference] adds new default_field_map field to trained models {pull}53294[#53294]\n+* Improve DF analytics audits and logging {pull}53179[#53179]\n+* Add indices_options to datafeed config and update {pull}52793[#52793] (issue: {issue}48056[#48056])\n+* Parse and report memory usage for DF Analytics {pull}52778[#52778]\n+* Adds the class_assignment_objective parameter to classification {pull}52763[#52763] (issue: {issue}52427[#52427])\n+* Add reason to DataFrameAnalyticsTask updateState log message {pull}52659[#52659] (issue: {issue}52654[#52654])\n+* [Inference] Add support for multi-value leaves to the tree model {pull}52531[#52531]\n+* Make ml internal indices hidden {pull}52423[#52423] (issue: {issue}52420[#52420])\n+* Add _cat/ml/data_frame/analytics API {pull}52260[#52260] (issue: {issue}51413[#51413])\n+* Adds feature importance option to inference processor {pull}52218[#52218]\n+* Switch poor categorization audit warning to use status field {pull}52195[#52195] (issues: {issue}50749[#50749], {issue}51146[#51146], {issue}51879[#51879])\n+* Retry persisting DF Analytics results {pull}52048[#52048]\n+* Improve multiline_start_pattern for CSV in find_file_structure {pull}51737[#51737]\n+* Add _cat/ml/trained_models API {pull}51529[#51529] (issue: {issue}51414[#51414])\n+* Add GET _cat/ml/datafeeds {pull}51500[#51500] (issue: {issue}51411[#51411])\n+* Use CSV ingest processor in find_file_structure ingest pipeline {pull}51492[#51492] (issue: {issue}56038[#56038])\n+* Add _cat/ml/anomaly_detectors API {pull}51364[#51364]\n+* [Inference] add tags url param to GET {pull}51330[#51330]\n+* Add parsers for inference configuration classes {pull}51300[#51300]\n+* Make datafeeds work with nanosecond time fields {pull}51180[#51180] (issue: {issue}49889[#49889])\n+* Add audit warning for 1000 categories found early in job {pull}51146[#51146] (issue: {issue}50749[#50749])\n+* Adds support for a global calendars {pull}50372[#50372] (issue: {issue}45013[#45013])\n+\n+Mapping::\n+* Wildcard field - add normalizer support {pull}53851[#53851]\n+* Wildcard field - added case insensitive search option {pull}53814[#53814]\n+* Append index name for the source of the cluster put-mapping task {pull}52690[#52690]\n+\n+Network::\n+* Give helpful message on remote connections disabled {pull}53690[#53690]\n+* Add server name to remote info API {pull}53634[#53634]\n+* Log when probe succeeds but full connection fails {pull}51304[#51304]\n+* Encrypt generated key with AES {pull}51019[#51019] (issue: {issue}50843[#50843])\n+\n+Ranking::\n+* Adds recall@k metric to rank eval API {pull}52577[#52577] (issue: {issue}51676[#51676])\n+\n+SQL::\n+* Jdbc debugging enhancement {pull}53880[#53880]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "originalPosition": 311}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNTgwNDM3", "url": "https://github.com/elastic/elasticsearch/pull/55019#pullrequestreview-391580437", "createdAt": "2020-04-10T18:02:48Z", "commit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxODowMjo0OFrOGEBoDA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxODowMjo0OFrOGEBoDA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg3NDEyNA==", "bodyText": "Closed but not merged.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Wildcard field - added case insensitive search option {pull}53814[#53814]", "url": "https://github.com/elastic/elasticsearch/pull/55019#discussion_r406874124", "createdAt": "2020-04-10T18:02:48Z", "author": {"login": "jrodewig"}, "path": "docs/reference/release-notes/7.7.asciidoc", "diffHunk": "@@ -1,22 +1,612 @@\n [[release-notes-7.7.0]]\n == {es} version 7.7.0\n \n-coming[7.7.0]\n+Also see <<breaking-changes-7.7,Breaking changes in 7.7>>.\n \n [[breaking-7.7.0]]\n [float]\n === Breaking changes\n \n+Highlighting::\n+* Highlighters skip ignored keyword values {pull}53408[#53408] (issue: {issue}43800[#43800])\n+\n+Infra/Core::\n+* Remove DEBUG-level default logging from actions {pull}51459[#51459] (issue: {issue}51198[#51198])\n+\n Mapping::\n * Dynamic mappings in indices created on 8.0 and later have stricter validation at mapping update time and\n   results in a deprecation warning for indices created in Elasticsearch 7.7.0 and later.\n-  (e.g. incorrect analyzer settings or unknown field types). {pull}51233[#51233]\n+  (e.g. incorrect analyzer settings or unknown field types). {pull}51233[#51233] (issues: {issue}17411[#17411], {issue}24419[#24419])\n \n Search::\n-* A regression that allowed negative scores in a script_score query was corrected.\n-  A behaviour is restored that throws an error if script_score query produces\n-  a negative score {pull}52478[#52478].\n+* Make range query rounding consistent {pull}50237[#50237] (issue: {issue}50009[#50009])\n * Pipeline aggregation validation errors that used to return HTTP\n   500s/Internal Server Errors now return 400/Bad Request {pull}53669[#53669].\n   As a bonus we now return a list of validation errors rather than returning\n   the first one we encounter.\n+\n+\n+\n+[[breaking-java-7.7.0]]\n+[float]\n+=== Breaking Java changes\n+\n+Infra/Core::\n+* Fix ActionListener.map exception handling {pull}50886[#50886]\n+\n+Machine Learning::\n+* Add expected input field type to trained model config {pull}53083[#53083]\n+\n+Transform::\n+* Enhance the output of preview to return full destination index details {pull}53572[#53572]\n+\n+\n+\n+[[deprecation-7.7.0]]\n+[float]\n+=== Deprecations\n+\n+Allocation::\n+* Deprecated support for delaying state recovery pending master nodes {pull}53646[#53646] (issue: {issue}51806[#51806])\n+\n+Authentication::\n+* Add warnings for invalid realm order config (#51195) {pull}51515[#51515]\n+* Deprecate timeout.tcp_read AD/LDAP realm setting {pull}47305[#47305] (issue: {issue}46028[#46028])\n+\n+Engine::\n+* Deprecate translog retention settings {pull}51588[#51588] (issues: {issue}45473[#45473], {issue}50775[#50775])\n+\n+Features/Features::\n+* Add cluster.remote.connect to deprecation info API {pull}54142[#54142] (issue: {issue}53924[#53924])\n+\n+Infra/Core::\n+* Add deprecation check for listener thread pool {pull}53438[#53438] (issues: {issue}53049[#53049], {issue}53317[#53317])\n+* Deprecate the logstash enabled setting {pull}53367[#53367]\n+* Deprecate the listener thread pool {pull}53266[#53266] (issue: {issue}53049[#53049])\n+* Deprecate creation of dot-prefixed index names except for hidden and system indices {pull}49959[#49959]\n+\n+Infra/REST API::\n+* Deprecate undocumented alternatives to the nodes hot threads API (#52640) {pull}52930[#52930] (issue: {issue}52640[#52640])\n+\n+Machine Learning::\n+* Renaming inference processor field field_mappings to new name field_map {pull}53433[#53433]\n+\n+Search::\n+* Emit deprecation warning when TermsLookup contains a type {pull}53731[#53731] (issue: {issue}41059[#41059])\n+* Deprecate BoolQueryBuilder's mustNot field {pull}53125[#53125]\n+\n+\n+\n+[[feature-7.7.0]]\n+[float]\n+=== New features\n+\n+Aggregations::\n+* Preserve metric types in top_metrics {pull}53288[#53288]\n+* Support multiple metrics in `top_metrics` agg {pull}52965[#52965] (issue: {issue}51813[#51813])\n+* Add size support to `top_metrics` {pull}52662[#52662] (issue: {issue}51813[#51813])\n+* HLRC support for string_stats {pull}52163[#52163]\n+* Add Boxplot Aggregation {pull}51948[#51948] (issue: {issue}33112[#33112])\n+\n+Analysis::\n+* Add nori_number token filter in analysis-nori {pull}53583[#53583]\n+\n+Authentication::\n+* Create API Key on behalf of other user {pull}52886[#52886] (issue: {issue}48716[#48716])\n+\n+Geo::\n+* Add support for distance queries on shape queries {pull}53468[#53468]\n+* Add support for distance queries on geo_shape queries {pull}53466[#53466] (issues: {issue}13351[#13351], {issue}39237[#39237])\n+* Add support for multipoint shape queries {pull}52564[#52564] (issue: {issue}52133[#52133])\n+* Add support for multipoint geoshape queries {pull}52133[#52133] (issue: {issue}37318[#37318])\n+\n+Infra/Core::\n+* Implement hidden indices {pull}50452[#50452] (issues: {issue}50251[#50251], {issue}50665[#50665], {issue}50762[#50762])\n+\n+Infra/Packaging::\n+* Introduce aarch64 packaging {pull}53914[#53914]\n+\n+Machine Learning::\n+* Implement ILM policy for .ml-state* indices {pull}52356[#52356] (issue: {issue}29938[#29938])\n+\n+Mapping::\n+* Introduce a `constant_keyword` field. {pull}49713[#49713]\n+\n+SQL::\n+* constant_keyword support {pull}53241[#53241] (issue: {issue}53016[#53016])\n+* Add optimisations for not-equalities {pull}51088[#51088] (issue: {issue}49637[#49637])\n+* Add support for passing query parameters in REST API calls {pull}51029[#51029] (issue: {issue}42916[#42916])\n+\n+Search::\n+* Introduce compound query {pull}52387[#52387] (issue: {issue}51967[#51967])\n+* Add a cluster setting to disallow expensive queries {pull}51385[#51385] (issue: {issue}29050[#29050])\n+* Add new x-pack endpoints to track the progress of a search asynchronously {pull}49931[#49931] (issue: {issue}49091[#49091])\n+\n+\n+\n+[[enhancement-7.7.0]]\n+[float]\n+=== Enhancements\n+\n+Aggregations::\n+* Try to save memory on aggregations {pull}53793[#53793]\n+* Speed up partial reduce of terms aggregations {pull}53216[#53216] (issue: {issue}51857[#51857])\n+* Simplify SiblingPipelineAggregator {pull}53144[#53144]\n+* Add histogram field type support to boxplot aggs {pull}52265[#52265] (issues: {issue}33112[#33112], {issue}52233[#52233])\n+* Percentiles aggregation validation checks for range {pull}51871[#51871] (issue: {issue}51808[#51808])\n+* Begin moving date_histogram to offset rounding (take two) {pull}51271[#51271] (issues: {issue}50609[#50609], {issue}50873[#50873])\n+* Password-protected Keystore Feature Branch PR {pull}51123[#51123] (issues: {issue}32691[#32691], {issue}49340[#49340])\n+* Implement top_metrics agg {pull}51155[#51155] (issue: {issue}48069[#48069])\n+* Bucket aggregation circuit breaker optimization. {pull}46751[#46751]\n+\n+Analysis::\n+* Removes old Lucene's experimental flag from analyzer documentations {pull}53217[#53217]\n+\n+Authentication::\n+* Add exception metadata for disabled features {pull}52811[#52811] (issues: {issue}47759[#47759], {issue}52311[#52311], {issue}55255[#55255])\n+* Validate role templates before saving role mapping {pull}52636[#52636] (issue: {issue}48773[#48773])\n+* Add support for secondary authentication {pull}52093[#52093]\n+* Expose API key name to the ingest pipeline {pull}51305[#51305] (issues: {issue}46847[#46847], {issue}49106[#49106])\n+* Disallow Password Change when authenticated by Token {pull}49694[#49694] (issue: {issue}48752[#48752])\n+\n+Authorization::\n+* Allow kibana_system to create and invalidate API keys on behalf of other users {pull}53824[#53824] (issue: {issue}48716[#48716])\n+* Add \"grant_api_key\" cluster privilege {pull}53527[#53527] (issues: {issue}48716[#48716], {issue}52886[#52886])\n+* Giving kibana user privileges to create custom link index {pull}53221[#53221] (issue: {issue}59305[#59305])\n+* [APM] Allow kibana to collect APM telemetry in background task {pull}52917[#52917] (issue: {issue}50757[#50757])\n+* Add the new 'maintenance' privilege containing 4 actions (#29998) {pull}50643[#50643]\n+\n+Cluster Coordination::\n+* Describe STALE_STATE_CONFIG in ClusterFormationFH {pull}53878[#53878] (issue: {issue}53734[#53734])\n+\n+Distributed::\n+* Introduce formal role for remote cluster client {pull}53924[#53924]\n+* Shortcut query phase using the results of other shards {pull}51852[#51852] (issues: {issue}49601[#49601], {issue}51708[#51708])\n+* Flush instead of synced-flush inactive shards {pull}49126[#49126] (issues: {issue}31965[#31965], {issue}48430[#48430])\n+\n+Engine::\n+* Restore off-heap loading for term dictionary in ReadOnlyEngine {pull}53713[#53713] (issues: {issue}43158[#43158], {issue}51247[#51247])\n+* Separate translog from index deletion conditions {pull}52556[#52556]\n+* Always rewrite search shard request outside of the search thread pool {pull}51708[#51708] (issue: {issue}49601[#49601])\n+* Move the terms index of `_id` off-heap. {pull}52405[#52405] (issue: {issue}42838[#42838])\n+* Cache completion stats between refreshes {pull}51991[#51991] (issue: {issue}51915[#51915])\n+* Use local checkpoint to calculate min translog gen for recovery {pull}51905[#51905] (issue: {issue}49970[#49970])\n+\n+Features/CAT APIs::\n+* /_cat/shards support path stats {pull}53461[#53461]\n+* Allow _cat indices & aliases to use indices options {pull}53248[#53248] (issue: {issue}52304[#52304])\n+\n+Features/Features::\n+* Enable deprecation checks for removed settings {pull}53317[#53317]\n+\n+Features/ILM+SLM::\n+* Hide ILM & SLM history aliases {pull}53564[#53564]\n+* Avoid race condition in ILMHistorySotre {pull}53039[#53039] (issues: {issue}50353[#50353], {issue}52853[#52853])\n+* Make FreezeStep retryable {pull}52540[#52540]\n+* Make DeleteStep retryable {pull}52494[#52494]\n+* Allow forcemerge in the hot phase for ILM policies {pull}52073[#52073] (issue: {issue}43165[#43165])\n+* Stop policy on last PhaseCompleteStep instead of TerminalPolic\u2026 {pull}51631[#51631] (issue: {issue}48431[#48431])\n+* Convert ILM and SLM histories into hidden indices {pull}51456[#51456]\n+* Make UpdateSettingsStep retryable {pull}51235[#51235] (issues: {issue}44135[#44135], {issue}48183[#48183])\n+* Expose master timeout for ILM actions {pull}51130[#51130] (issue: {issue}44136[#44136])\n+* Wait for active shards on rolled index in a separate step {pull}50718[#50718] (issues: {issue}44135[#44135], {issue}48183[#48183])\n+* Adding best_compression {pull}49974[#49974]\n+\n+Features/Indices APIs::\n+* Add IndexTemplateV2 to MetaData {pull}53753[#53753] (issue: {issue}53101[#53101])\n+* Add ComponentTemplate to MetaData {pull}53290[#53290] (issue: {issue}53101[#53101])\n+\n+Features/Ingest::\n+* Reduce log level for pipeline failure {pull}54097[#54097] (issue: {issue}51459[#51459])\n+* Support array for all string ingest processors {pull}53343[#53343] (issue: {issue}51087[#51087])\n+* Add empty_value parameter to CSV processor {pull}51567[#51567]\n+* Add pipeline name to ingest metadata {pull}50467[#50467] (issue: {issue}42106[#42106])\n+\n+Features/Java High Level REST Client::\n+* SourceExists HLRC uses GetSourceRequest instead of GetRequest {pull}51789[#51789] (issue: {issue}50885[#50885])\n+* Add async_search.submit to HLRC {pull}53592[#53592] (issue: {issue}49091[#49091])\n+* Add Get Source API to the HLRC {pull}50885[#50885] (issue: {issue}47678[#47678])\n+\n+Features/Monitoring::\n+* Secure password for monitoring HTTP exporter {pull}50919[#50919] (issue: {issue}50197[#50197])\n+* Validate SSL settings at parse time {pull}49196[#49196] (issue: {issue}47711[#47711])\n+\n+Features/Stats::\n+* Add analysis components and mapping types to the usage API. {pull}51031[#51031]\n+\n+Features/Watcher::\n+* Make watch history indices hidden {pull}52962[#52962] (issue: {issue}50251[#50251])\n+* Upgrade to the latest OWASP HTML sanitizer {pull}50765[#50765] (issue: {issue}50395[#50395])\n+\n+Infra/Core::\n+* Enable helpful null pointer exceptions {pull}54853[#54853]\n+* Allow keystore add to handle multiple settings {pull}54229[#54229] (issue: {issue}54191[#54191])\n+* Report parser name and location in XContent deprecation warnings {pull}53805[#53805]\n+* Report parser name and location in XContent deprecation warnings {pull}53752[#53752]\n+* Deprecate all variants of a ParseField with no replacement {pull}53722[#53722]\n+* Add a helper method to parse maps of objects {pull}53096[#53096]\n+* Allow specifying an exclusive set of fields on ObjectParser {pull}52893[#52893]\n+* Support joda style date patterns in 7.x {pull}52555[#52555]\n+* Implement hidden aliases {pull}52547[#52547] (issue: {issue}52304[#52304])\n+* Allow ObjectParsers to specify required sets of fields {pull}49661[#49661] (issue: {issue}48824[#48824])\n+\n+Infra/Logging::\n+* Capture stdout and stderr to log4j log {pull}50259[#50259] (issue: {issue}50156[#50156])\n+\n+Infra/Packaging::\n+* Introduce aarch64 Docker image {pull}53936[#53936] (issue: {issue}53914[#53914])\n+* Introduce jvm.options.d for customizing JVM options {pull}51882[#51882] (issue: {issue}51626[#51626])\n+\n+Infra/Plugins::\n+* Allow sha512 checksum without filename for maven plugins {pull}52668[#52668] (issue: {issue}52413[#52413])\n+\n+Infra/Scripting::\n+* Scripting: Context script cache unlimited compile {pull}53769[#53769] (issue: {issue}50152[#50152])\n+* Scripting: Increase ingest script cache defaults {pull}53765[#53765] (issue: {issue}50152[#50152])\n+* Scripting: Per-context script cache, default off (#52855) {pull}53756[#53756] (issues: {issue}50152[#50152], {issue}52855[#52855])\n+* Scripting: Per-context script cache, default off {pull}52855[#52855] (issue: {issue}50152[#50152])\n+* Improve Painless compilation performance for nested conditionals {pull}52056[#52056]\n+* Scripting: Add char position of script errors {pull}51069[#51069] (issue: {issue}50993[#50993])\n+\n+Infra/Settings::\n+* Allow keystore add-file to handle multiple settings {pull}54240[#54240] (issue: {issue}54191[#54191])\n+* Settings: AffixSettings as validator dependencies {pull}52973[#52973] (issue: {issue}52933[#52933])\n+\n+License::\n+* Simplify ml license checking with XpackLicenseState internals {pull}52684[#52684] (issue: {issue}52115[#52115])\n+* License removal leads back to a basic license {pull}52407[#52407] (issue: {issue}45022[#45022])\n+* Refactor license checking {pull}52118[#52118] (issue: {issue}51864[#51864])\n+* Add enterprise mode and refactor {pull}51864[#51864] (issue: {issue}51081[#51081])\n+\n+Machine Learning::\n+* Stratified cross validation split for classification {pull}54087[#54087]\n+* Data frame analytics data counts {pull}53998[#53998]\n+* Verify that the field is aggregatable before attempting cardinality aggregation {pull}53874[#53874] (issue: {issue}53876[#53876])\n+* Adds multi-class feature importance support {pull}53803[#53803]\n+* Data frame analytics analysis stats {pull}53788[#53788]\n+* Add a model memory estimation endpoint for anomaly detection {pull}53507[#53507] (issue: {issue}53219[#53219])\n+* [Inference] adds new default_field_map field to trained models {pull}53294[#53294]\n+* Improve DF analytics audits and logging {pull}53179[#53179]\n+* Add indices_options to datafeed config and update {pull}52793[#52793] (issue: {issue}48056[#48056])\n+* Parse and report memory usage for DF Analytics {pull}52778[#52778]\n+* Adds the class_assignment_objective parameter to classification {pull}52763[#52763] (issue: {issue}52427[#52427])\n+* Add reason to DataFrameAnalyticsTask updateState log message {pull}52659[#52659] (issue: {issue}52654[#52654])\n+* [Inference] Add support for multi-value leaves to the tree model {pull}52531[#52531]\n+* Make ml internal indices hidden {pull}52423[#52423] (issue: {issue}52420[#52420])\n+* Add _cat/ml/data_frame/analytics API {pull}52260[#52260] (issue: {issue}51413[#51413])\n+* Adds feature importance option to inference processor {pull}52218[#52218]\n+* Switch poor categorization audit warning to use status field {pull}52195[#52195] (issues: {issue}50749[#50749], {issue}51146[#51146], {issue}51879[#51879])\n+* Retry persisting DF Analytics results {pull}52048[#52048]\n+* Improve multiline_start_pattern for CSV in find_file_structure {pull}51737[#51737]\n+* Add _cat/ml/trained_models API {pull}51529[#51529] (issue: {issue}51414[#51414])\n+* Add GET _cat/ml/datafeeds {pull}51500[#51500] (issue: {issue}51411[#51411])\n+* Use CSV ingest processor in find_file_structure ingest pipeline {pull}51492[#51492] (issue: {issue}56038[#56038])\n+* Add _cat/ml/anomaly_detectors API {pull}51364[#51364]\n+* [Inference] add tags url param to GET {pull}51330[#51330]\n+* Add parsers for inference configuration classes {pull}51300[#51300]\n+* Make datafeeds work with nanosecond time fields {pull}51180[#51180] (issue: {issue}49889[#49889])\n+* Add audit warning for 1000 categories found early in job {pull}51146[#51146] (issue: {issue}50749[#50749])\n+* Adds support for a global calendars {pull}50372[#50372] (issue: {issue}45013[#45013])\n+\n+Mapping::\n+* Wildcard field - add normalizer support {pull}53851[#53851]\n+* Wildcard field - added case insensitive search option {pull}53814[#53814]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "originalPosition": 298}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNTgxNjMw", "url": "https://github.com/elastic/elasticsearch/pull/55019#pullrequestreview-391581630", "createdAt": "2020-04-10T18:05:10Z", "commit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxODowNToxMFrOGEBr9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxODowNToxMFrOGEBr9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg3NTEyNQ==", "bodyText": "Closed but not merged\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Add a helper method to parse maps of objects {pull}53096[#53096]", "url": "https://github.com/elastic/elasticsearch/pull/55019#discussion_r406875125", "createdAt": "2020-04-10T18:05:10Z", "author": {"login": "jrodewig"}, "path": "docs/reference/release-notes/7.7.asciidoc", "diffHunk": "@@ -1,22 +1,612 @@\n [[release-notes-7.7.0]]\n == {es} version 7.7.0\n \n-coming[7.7.0]\n+Also see <<breaking-changes-7.7,Breaking changes in 7.7>>.\n \n [[breaking-7.7.0]]\n [float]\n === Breaking changes\n \n+Highlighting::\n+* Highlighters skip ignored keyword values {pull}53408[#53408] (issue: {issue}43800[#43800])\n+\n+Infra/Core::\n+* Remove DEBUG-level default logging from actions {pull}51459[#51459] (issue: {issue}51198[#51198])\n+\n Mapping::\n * Dynamic mappings in indices created on 8.0 and later have stricter validation at mapping update time and\n   results in a deprecation warning for indices created in Elasticsearch 7.7.0 and later.\n-  (e.g. incorrect analyzer settings or unknown field types). {pull}51233[#51233]\n+  (e.g. incorrect analyzer settings or unknown field types). {pull}51233[#51233] (issues: {issue}17411[#17411], {issue}24419[#24419])\n \n Search::\n-* A regression that allowed negative scores in a script_score query was corrected.\n-  A behaviour is restored that throws an error if script_score query produces\n-  a negative score {pull}52478[#52478].\n+* Make range query rounding consistent {pull}50237[#50237] (issue: {issue}50009[#50009])\n * Pipeline aggregation validation errors that used to return HTTP\n   500s/Internal Server Errors now return 400/Bad Request {pull}53669[#53669].\n   As a bonus we now return a list of validation errors rather than returning\n   the first one we encounter.\n+\n+\n+\n+[[breaking-java-7.7.0]]\n+[float]\n+=== Breaking Java changes\n+\n+Infra/Core::\n+* Fix ActionListener.map exception handling {pull}50886[#50886]\n+\n+Machine Learning::\n+* Add expected input field type to trained model config {pull}53083[#53083]\n+\n+Transform::\n+* Enhance the output of preview to return full destination index details {pull}53572[#53572]\n+\n+\n+\n+[[deprecation-7.7.0]]\n+[float]\n+=== Deprecations\n+\n+Allocation::\n+* Deprecated support for delaying state recovery pending master nodes {pull}53646[#53646] (issue: {issue}51806[#51806])\n+\n+Authentication::\n+* Add warnings for invalid realm order config (#51195) {pull}51515[#51515]\n+* Deprecate timeout.tcp_read AD/LDAP realm setting {pull}47305[#47305] (issue: {issue}46028[#46028])\n+\n+Engine::\n+* Deprecate translog retention settings {pull}51588[#51588] (issues: {issue}45473[#45473], {issue}50775[#50775])\n+\n+Features/Features::\n+* Add cluster.remote.connect to deprecation info API {pull}54142[#54142] (issue: {issue}53924[#53924])\n+\n+Infra/Core::\n+* Add deprecation check for listener thread pool {pull}53438[#53438] (issues: {issue}53049[#53049], {issue}53317[#53317])\n+* Deprecate the logstash enabled setting {pull}53367[#53367]\n+* Deprecate the listener thread pool {pull}53266[#53266] (issue: {issue}53049[#53049])\n+* Deprecate creation of dot-prefixed index names except for hidden and system indices {pull}49959[#49959]\n+\n+Infra/REST API::\n+* Deprecate undocumented alternatives to the nodes hot threads API (#52640) {pull}52930[#52930] (issue: {issue}52640[#52640])\n+\n+Machine Learning::\n+* Renaming inference processor field field_mappings to new name field_map {pull}53433[#53433]\n+\n+Search::\n+* Emit deprecation warning when TermsLookup contains a type {pull}53731[#53731] (issue: {issue}41059[#41059])\n+* Deprecate BoolQueryBuilder's mustNot field {pull}53125[#53125]\n+\n+\n+\n+[[feature-7.7.0]]\n+[float]\n+=== New features\n+\n+Aggregations::\n+* Preserve metric types in top_metrics {pull}53288[#53288]\n+* Support multiple metrics in `top_metrics` agg {pull}52965[#52965] (issue: {issue}51813[#51813])\n+* Add size support to `top_metrics` {pull}52662[#52662] (issue: {issue}51813[#51813])\n+* HLRC support for string_stats {pull}52163[#52163]\n+* Add Boxplot Aggregation {pull}51948[#51948] (issue: {issue}33112[#33112])\n+\n+Analysis::\n+* Add nori_number token filter in analysis-nori {pull}53583[#53583]\n+\n+Authentication::\n+* Create API Key on behalf of other user {pull}52886[#52886] (issue: {issue}48716[#48716])\n+\n+Geo::\n+* Add support for distance queries on shape queries {pull}53468[#53468]\n+* Add support for distance queries on geo_shape queries {pull}53466[#53466] (issues: {issue}13351[#13351], {issue}39237[#39237])\n+* Add support for multipoint shape queries {pull}52564[#52564] (issue: {issue}52133[#52133])\n+* Add support for multipoint geoshape queries {pull}52133[#52133] (issue: {issue}37318[#37318])\n+\n+Infra/Core::\n+* Implement hidden indices {pull}50452[#50452] (issues: {issue}50251[#50251], {issue}50665[#50665], {issue}50762[#50762])\n+\n+Infra/Packaging::\n+* Introduce aarch64 packaging {pull}53914[#53914]\n+\n+Machine Learning::\n+* Implement ILM policy for .ml-state* indices {pull}52356[#52356] (issue: {issue}29938[#29938])\n+\n+Mapping::\n+* Introduce a `constant_keyword` field. {pull}49713[#49713]\n+\n+SQL::\n+* constant_keyword support {pull}53241[#53241] (issue: {issue}53016[#53016])\n+* Add optimisations for not-equalities {pull}51088[#51088] (issue: {issue}49637[#49637])\n+* Add support for passing query parameters in REST API calls {pull}51029[#51029] (issue: {issue}42916[#42916])\n+\n+Search::\n+* Introduce compound query {pull}52387[#52387] (issue: {issue}51967[#51967])\n+* Add a cluster setting to disallow expensive queries {pull}51385[#51385] (issue: {issue}29050[#29050])\n+* Add new x-pack endpoints to track the progress of a search asynchronously {pull}49931[#49931] (issue: {issue}49091[#49091])\n+\n+\n+\n+[[enhancement-7.7.0]]\n+[float]\n+=== Enhancements\n+\n+Aggregations::\n+* Try to save memory on aggregations {pull}53793[#53793]\n+* Speed up partial reduce of terms aggregations {pull}53216[#53216] (issue: {issue}51857[#51857])\n+* Simplify SiblingPipelineAggregator {pull}53144[#53144]\n+* Add histogram field type support to boxplot aggs {pull}52265[#52265] (issues: {issue}33112[#33112], {issue}52233[#52233])\n+* Percentiles aggregation validation checks for range {pull}51871[#51871] (issue: {issue}51808[#51808])\n+* Begin moving date_histogram to offset rounding (take two) {pull}51271[#51271] (issues: {issue}50609[#50609], {issue}50873[#50873])\n+* Password-protected Keystore Feature Branch PR {pull}51123[#51123] (issues: {issue}32691[#32691], {issue}49340[#49340])\n+* Implement top_metrics agg {pull}51155[#51155] (issue: {issue}48069[#48069])\n+* Bucket aggregation circuit breaker optimization. {pull}46751[#46751]\n+\n+Analysis::\n+* Removes old Lucene's experimental flag from analyzer documentations {pull}53217[#53217]\n+\n+Authentication::\n+* Add exception metadata for disabled features {pull}52811[#52811] (issues: {issue}47759[#47759], {issue}52311[#52311], {issue}55255[#55255])\n+* Validate role templates before saving role mapping {pull}52636[#52636] (issue: {issue}48773[#48773])\n+* Add support for secondary authentication {pull}52093[#52093]\n+* Expose API key name to the ingest pipeline {pull}51305[#51305] (issues: {issue}46847[#46847], {issue}49106[#49106])\n+* Disallow Password Change when authenticated by Token {pull}49694[#49694] (issue: {issue}48752[#48752])\n+\n+Authorization::\n+* Allow kibana_system to create and invalidate API keys on behalf of other users {pull}53824[#53824] (issue: {issue}48716[#48716])\n+* Add \"grant_api_key\" cluster privilege {pull}53527[#53527] (issues: {issue}48716[#48716], {issue}52886[#52886])\n+* Giving kibana user privileges to create custom link index {pull}53221[#53221] (issue: {issue}59305[#59305])\n+* [APM] Allow kibana to collect APM telemetry in background task {pull}52917[#52917] (issue: {issue}50757[#50757])\n+* Add the new 'maintenance' privilege containing 4 actions (#29998) {pull}50643[#50643]\n+\n+Cluster Coordination::\n+* Describe STALE_STATE_CONFIG in ClusterFormationFH {pull}53878[#53878] (issue: {issue}53734[#53734])\n+\n+Distributed::\n+* Introduce formal role for remote cluster client {pull}53924[#53924]\n+* Shortcut query phase using the results of other shards {pull}51852[#51852] (issues: {issue}49601[#49601], {issue}51708[#51708])\n+* Flush instead of synced-flush inactive shards {pull}49126[#49126] (issues: {issue}31965[#31965], {issue}48430[#48430])\n+\n+Engine::\n+* Restore off-heap loading for term dictionary in ReadOnlyEngine {pull}53713[#53713] (issues: {issue}43158[#43158], {issue}51247[#51247])\n+* Separate translog from index deletion conditions {pull}52556[#52556]\n+* Always rewrite search shard request outside of the search thread pool {pull}51708[#51708] (issue: {issue}49601[#49601])\n+* Move the terms index of `_id` off-heap. {pull}52405[#52405] (issue: {issue}42838[#42838])\n+* Cache completion stats between refreshes {pull}51991[#51991] (issue: {issue}51915[#51915])\n+* Use local checkpoint to calculate min translog gen for recovery {pull}51905[#51905] (issue: {issue}49970[#49970])\n+\n+Features/CAT APIs::\n+* /_cat/shards support path stats {pull}53461[#53461]\n+* Allow _cat indices & aliases to use indices options {pull}53248[#53248] (issue: {issue}52304[#52304])\n+\n+Features/Features::\n+* Enable deprecation checks for removed settings {pull}53317[#53317]\n+\n+Features/ILM+SLM::\n+* Hide ILM & SLM history aliases {pull}53564[#53564]\n+* Avoid race condition in ILMHistorySotre {pull}53039[#53039] (issues: {issue}50353[#50353], {issue}52853[#52853])\n+* Make FreezeStep retryable {pull}52540[#52540]\n+* Make DeleteStep retryable {pull}52494[#52494]\n+* Allow forcemerge in the hot phase for ILM policies {pull}52073[#52073] (issue: {issue}43165[#43165])\n+* Stop policy on last PhaseCompleteStep instead of TerminalPolic\u2026 {pull}51631[#51631] (issue: {issue}48431[#48431])\n+* Convert ILM and SLM histories into hidden indices {pull}51456[#51456]\n+* Make UpdateSettingsStep retryable {pull}51235[#51235] (issues: {issue}44135[#44135], {issue}48183[#48183])\n+* Expose master timeout for ILM actions {pull}51130[#51130] (issue: {issue}44136[#44136])\n+* Wait for active shards on rolled index in a separate step {pull}50718[#50718] (issues: {issue}44135[#44135], {issue}48183[#48183])\n+* Adding best_compression {pull}49974[#49974]\n+\n+Features/Indices APIs::\n+* Add IndexTemplateV2 to MetaData {pull}53753[#53753] (issue: {issue}53101[#53101])\n+* Add ComponentTemplate to MetaData {pull}53290[#53290] (issue: {issue}53101[#53101])\n+\n+Features/Ingest::\n+* Reduce log level for pipeline failure {pull}54097[#54097] (issue: {issue}51459[#51459])\n+* Support array for all string ingest processors {pull}53343[#53343] (issue: {issue}51087[#51087])\n+* Add empty_value parameter to CSV processor {pull}51567[#51567]\n+* Add pipeline name to ingest metadata {pull}50467[#50467] (issue: {issue}42106[#42106])\n+\n+Features/Java High Level REST Client::\n+* SourceExists HLRC uses GetSourceRequest instead of GetRequest {pull}51789[#51789] (issue: {issue}50885[#50885])\n+* Add async_search.submit to HLRC {pull}53592[#53592] (issue: {issue}49091[#49091])\n+* Add Get Source API to the HLRC {pull}50885[#50885] (issue: {issue}47678[#47678])\n+\n+Features/Monitoring::\n+* Secure password for monitoring HTTP exporter {pull}50919[#50919] (issue: {issue}50197[#50197])\n+* Validate SSL settings at parse time {pull}49196[#49196] (issue: {issue}47711[#47711])\n+\n+Features/Stats::\n+* Add analysis components and mapping types to the usage API. {pull}51031[#51031]\n+\n+Features/Watcher::\n+* Make watch history indices hidden {pull}52962[#52962] (issue: {issue}50251[#50251])\n+* Upgrade to the latest OWASP HTML sanitizer {pull}50765[#50765] (issue: {issue}50395[#50395])\n+\n+Infra/Core::\n+* Enable helpful null pointer exceptions {pull}54853[#54853]\n+* Allow keystore add to handle multiple settings {pull}54229[#54229] (issue: {issue}54191[#54191])\n+* Report parser name and location in XContent deprecation warnings {pull}53805[#53805]\n+* Report parser name and location in XContent deprecation warnings {pull}53752[#53752]\n+* Deprecate all variants of a ParseField with no replacement {pull}53722[#53722]\n+* Add a helper method to parse maps of objects {pull}53096[#53096]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "originalPosition": 232}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNTgyNTc5", "url": "https://github.com/elastic/elasticsearch/pull/55019#pullrequestreview-391582579", "createdAt": "2020-04-10T18:07:15Z", "commit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxODowNzoxNVrOGEBvCQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxODowNzoxNVrOGEBvCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg3NTkxMw==", "bodyText": "PR label was truncated.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Stop policy on last PhaseCompleteStep instead of TerminalPolic\u2026 {pull}51631[#51631] (issue: {issue}48431[#48431])\n          \n          \n            \n            * Stop policy on last PhaseCompleteStep instead of TerminalPolicyStep {pull}51631[#51631] (issue: {issue}48431[#48431])", "url": "https://github.com/elastic/elasticsearch/pull/55019#discussion_r406875913", "createdAt": "2020-04-10T18:07:15Z", "author": {"login": "jrodewig"}, "path": "docs/reference/release-notes/7.7.asciidoc", "diffHunk": "@@ -1,22 +1,612 @@\n [[release-notes-7.7.0]]\n == {es} version 7.7.0\n \n-coming[7.7.0]\n+Also see <<breaking-changes-7.7,Breaking changes in 7.7>>.\n \n [[breaking-7.7.0]]\n [float]\n === Breaking changes\n \n+Highlighting::\n+* Highlighters skip ignored keyword values {pull}53408[#53408] (issue: {issue}43800[#43800])\n+\n+Infra/Core::\n+* Remove DEBUG-level default logging from actions {pull}51459[#51459] (issue: {issue}51198[#51198])\n+\n Mapping::\n * Dynamic mappings in indices created on 8.0 and later have stricter validation at mapping update time and\n   results in a deprecation warning for indices created in Elasticsearch 7.7.0 and later.\n-  (e.g. incorrect analyzer settings or unknown field types). {pull}51233[#51233]\n+  (e.g. incorrect analyzer settings or unknown field types). {pull}51233[#51233] (issues: {issue}17411[#17411], {issue}24419[#24419])\n \n Search::\n-* A regression that allowed negative scores in a script_score query was corrected.\n-  A behaviour is restored that throws an error if script_score query produces\n-  a negative score {pull}52478[#52478].\n+* Make range query rounding consistent {pull}50237[#50237] (issue: {issue}50009[#50009])\n * Pipeline aggregation validation errors that used to return HTTP\n   500s/Internal Server Errors now return 400/Bad Request {pull}53669[#53669].\n   As a bonus we now return a list of validation errors rather than returning\n   the first one we encounter.\n+\n+\n+\n+[[breaking-java-7.7.0]]\n+[float]\n+=== Breaking Java changes\n+\n+Infra/Core::\n+* Fix ActionListener.map exception handling {pull}50886[#50886]\n+\n+Machine Learning::\n+* Add expected input field type to trained model config {pull}53083[#53083]\n+\n+Transform::\n+* Enhance the output of preview to return full destination index details {pull}53572[#53572]\n+\n+\n+\n+[[deprecation-7.7.0]]\n+[float]\n+=== Deprecations\n+\n+Allocation::\n+* Deprecated support for delaying state recovery pending master nodes {pull}53646[#53646] (issue: {issue}51806[#51806])\n+\n+Authentication::\n+* Add warnings for invalid realm order config (#51195) {pull}51515[#51515]\n+* Deprecate timeout.tcp_read AD/LDAP realm setting {pull}47305[#47305] (issue: {issue}46028[#46028])\n+\n+Engine::\n+* Deprecate translog retention settings {pull}51588[#51588] (issues: {issue}45473[#45473], {issue}50775[#50775])\n+\n+Features/Features::\n+* Add cluster.remote.connect to deprecation info API {pull}54142[#54142] (issue: {issue}53924[#53924])\n+\n+Infra/Core::\n+* Add deprecation check for listener thread pool {pull}53438[#53438] (issues: {issue}53049[#53049], {issue}53317[#53317])\n+* Deprecate the logstash enabled setting {pull}53367[#53367]\n+* Deprecate the listener thread pool {pull}53266[#53266] (issue: {issue}53049[#53049])\n+* Deprecate creation of dot-prefixed index names except for hidden and system indices {pull}49959[#49959]\n+\n+Infra/REST API::\n+* Deprecate undocumented alternatives to the nodes hot threads API (#52640) {pull}52930[#52930] (issue: {issue}52640[#52640])\n+\n+Machine Learning::\n+* Renaming inference processor field field_mappings to new name field_map {pull}53433[#53433]\n+\n+Search::\n+* Emit deprecation warning when TermsLookup contains a type {pull}53731[#53731] (issue: {issue}41059[#41059])\n+* Deprecate BoolQueryBuilder's mustNot field {pull}53125[#53125]\n+\n+\n+\n+[[feature-7.7.0]]\n+[float]\n+=== New features\n+\n+Aggregations::\n+* Preserve metric types in top_metrics {pull}53288[#53288]\n+* Support multiple metrics in `top_metrics` agg {pull}52965[#52965] (issue: {issue}51813[#51813])\n+* Add size support to `top_metrics` {pull}52662[#52662] (issue: {issue}51813[#51813])\n+* HLRC support for string_stats {pull}52163[#52163]\n+* Add Boxplot Aggregation {pull}51948[#51948] (issue: {issue}33112[#33112])\n+\n+Analysis::\n+* Add nori_number token filter in analysis-nori {pull}53583[#53583]\n+\n+Authentication::\n+* Create API Key on behalf of other user {pull}52886[#52886] (issue: {issue}48716[#48716])\n+\n+Geo::\n+* Add support for distance queries on shape queries {pull}53468[#53468]\n+* Add support for distance queries on geo_shape queries {pull}53466[#53466] (issues: {issue}13351[#13351], {issue}39237[#39237])\n+* Add support for multipoint shape queries {pull}52564[#52564] (issue: {issue}52133[#52133])\n+* Add support for multipoint geoshape queries {pull}52133[#52133] (issue: {issue}37318[#37318])\n+\n+Infra/Core::\n+* Implement hidden indices {pull}50452[#50452] (issues: {issue}50251[#50251], {issue}50665[#50665], {issue}50762[#50762])\n+\n+Infra/Packaging::\n+* Introduce aarch64 packaging {pull}53914[#53914]\n+\n+Machine Learning::\n+* Implement ILM policy for .ml-state* indices {pull}52356[#52356] (issue: {issue}29938[#29938])\n+\n+Mapping::\n+* Introduce a `constant_keyword` field. {pull}49713[#49713]\n+\n+SQL::\n+* constant_keyword support {pull}53241[#53241] (issue: {issue}53016[#53016])\n+* Add optimisations for not-equalities {pull}51088[#51088] (issue: {issue}49637[#49637])\n+* Add support for passing query parameters in REST API calls {pull}51029[#51029] (issue: {issue}42916[#42916])\n+\n+Search::\n+* Introduce compound query {pull}52387[#52387] (issue: {issue}51967[#51967])\n+* Add a cluster setting to disallow expensive queries {pull}51385[#51385] (issue: {issue}29050[#29050])\n+* Add new x-pack endpoints to track the progress of a search asynchronously {pull}49931[#49931] (issue: {issue}49091[#49091])\n+\n+\n+\n+[[enhancement-7.7.0]]\n+[float]\n+=== Enhancements\n+\n+Aggregations::\n+* Try to save memory on aggregations {pull}53793[#53793]\n+* Speed up partial reduce of terms aggregations {pull}53216[#53216] (issue: {issue}51857[#51857])\n+* Simplify SiblingPipelineAggregator {pull}53144[#53144]\n+* Add histogram field type support to boxplot aggs {pull}52265[#52265] (issues: {issue}33112[#33112], {issue}52233[#52233])\n+* Percentiles aggregation validation checks for range {pull}51871[#51871] (issue: {issue}51808[#51808])\n+* Begin moving date_histogram to offset rounding (take two) {pull}51271[#51271] (issues: {issue}50609[#50609], {issue}50873[#50873])\n+* Password-protected Keystore Feature Branch PR {pull}51123[#51123] (issues: {issue}32691[#32691], {issue}49340[#49340])\n+* Implement top_metrics agg {pull}51155[#51155] (issue: {issue}48069[#48069])\n+* Bucket aggregation circuit breaker optimization. {pull}46751[#46751]\n+\n+Analysis::\n+* Removes old Lucene's experimental flag from analyzer documentations {pull}53217[#53217]\n+\n+Authentication::\n+* Add exception metadata for disabled features {pull}52811[#52811] (issues: {issue}47759[#47759], {issue}52311[#52311], {issue}55255[#55255])\n+* Validate role templates before saving role mapping {pull}52636[#52636] (issue: {issue}48773[#48773])\n+* Add support for secondary authentication {pull}52093[#52093]\n+* Expose API key name to the ingest pipeline {pull}51305[#51305] (issues: {issue}46847[#46847], {issue}49106[#49106])\n+* Disallow Password Change when authenticated by Token {pull}49694[#49694] (issue: {issue}48752[#48752])\n+\n+Authorization::\n+* Allow kibana_system to create and invalidate API keys on behalf of other users {pull}53824[#53824] (issue: {issue}48716[#48716])\n+* Add \"grant_api_key\" cluster privilege {pull}53527[#53527] (issues: {issue}48716[#48716], {issue}52886[#52886])\n+* Giving kibana user privileges to create custom link index {pull}53221[#53221] (issue: {issue}59305[#59305])\n+* [APM] Allow kibana to collect APM telemetry in background task {pull}52917[#52917] (issue: {issue}50757[#50757])\n+* Add the new 'maintenance' privilege containing 4 actions (#29998) {pull}50643[#50643]\n+\n+Cluster Coordination::\n+* Describe STALE_STATE_CONFIG in ClusterFormationFH {pull}53878[#53878] (issue: {issue}53734[#53734])\n+\n+Distributed::\n+* Introduce formal role for remote cluster client {pull}53924[#53924]\n+* Shortcut query phase using the results of other shards {pull}51852[#51852] (issues: {issue}49601[#49601], {issue}51708[#51708])\n+* Flush instead of synced-flush inactive shards {pull}49126[#49126] (issues: {issue}31965[#31965], {issue}48430[#48430])\n+\n+Engine::\n+* Restore off-heap loading for term dictionary in ReadOnlyEngine {pull}53713[#53713] (issues: {issue}43158[#43158], {issue}51247[#51247])\n+* Separate translog from index deletion conditions {pull}52556[#52556]\n+* Always rewrite search shard request outside of the search thread pool {pull}51708[#51708] (issue: {issue}49601[#49601])\n+* Move the terms index of `_id` off-heap. {pull}52405[#52405] (issue: {issue}42838[#42838])\n+* Cache completion stats between refreshes {pull}51991[#51991] (issue: {issue}51915[#51915])\n+* Use local checkpoint to calculate min translog gen for recovery {pull}51905[#51905] (issue: {issue}49970[#49970])\n+\n+Features/CAT APIs::\n+* /_cat/shards support path stats {pull}53461[#53461]\n+* Allow _cat indices & aliases to use indices options {pull}53248[#53248] (issue: {issue}52304[#52304])\n+\n+Features/Features::\n+* Enable deprecation checks for removed settings {pull}53317[#53317]\n+\n+Features/ILM+SLM::\n+* Hide ILM & SLM history aliases {pull}53564[#53564]\n+* Avoid race condition in ILMHistorySotre {pull}53039[#53039] (issues: {issue}50353[#50353], {issue}52853[#52853])\n+* Make FreezeStep retryable {pull}52540[#52540]\n+* Make DeleteStep retryable {pull}52494[#52494]\n+* Allow forcemerge in the hot phase for ILM policies {pull}52073[#52073] (issue: {issue}43165[#43165])\n+* Stop policy on last PhaseCompleteStep instead of TerminalPolic\u2026 {pull}51631[#51631] (issue: {issue}48431[#48431])", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "originalPosition": 193}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNTgzNzYw", "url": "https://github.com/elastic/elasticsearch/pull/55019#pullrequestreview-391583760", "createdAt": "2020-04-10T18:09:40Z", "commit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxODowOTo0MFrOGEBzKg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxODowOTo0MFrOGEBzKg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg3Njk3MA==", "bodyText": "Closed but not merged.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Introduce compound query {pull}52387[#52387] (issue: {issue}51967[#51967])", "url": "https://github.com/elastic/elasticsearch/pull/55019#discussion_r406876970", "createdAt": "2020-04-10T18:09:40Z", "author": {"login": "jrodewig"}, "path": "docs/reference/release-notes/7.7.asciidoc", "diffHunk": "@@ -1,22 +1,612 @@\n [[release-notes-7.7.0]]\n == {es} version 7.7.0\n \n-coming[7.7.0]\n+Also see <<breaking-changes-7.7,Breaking changes in 7.7>>.\n \n [[breaking-7.7.0]]\n [float]\n === Breaking changes\n \n+Highlighting::\n+* Highlighters skip ignored keyword values {pull}53408[#53408] (issue: {issue}43800[#43800])\n+\n+Infra/Core::\n+* Remove DEBUG-level default logging from actions {pull}51459[#51459] (issue: {issue}51198[#51198])\n+\n Mapping::\n * Dynamic mappings in indices created on 8.0 and later have stricter validation at mapping update time and\n   results in a deprecation warning for indices created in Elasticsearch 7.7.0 and later.\n-  (e.g. incorrect analyzer settings or unknown field types). {pull}51233[#51233]\n+  (e.g. incorrect analyzer settings or unknown field types). {pull}51233[#51233] (issues: {issue}17411[#17411], {issue}24419[#24419])\n \n Search::\n-* A regression that allowed negative scores in a script_score query was corrected.\n-  A behaviour is restored that throws an error if script_score query produces\n-  a negative score {pull}52478[#52478].\n+* Make range query rounding consistent {pull}50237[#50237] (issue: {issue}50009[#50009])\n * Pipeline aggregation validation errors that used to return HTTP\n   500s/Internal Server Errors now return 400/Bad Request {pull}53669[#53669].\n   As a bonus we now return a list of validation errors rather than returning\n   the first one we encounter.\n+\n+\n+\n+[[breaking-java-7.7.0]]\n+[float]\n+=== Breaking Java changes\n+\n+Infra/Core::\n+* Fix ActionListener.map exception handling {pull}50886[#50886]\n+\n+Machine Learning::\n+* Add expected input field type to trained model config {pull}53083[#53083]\n+\n+Transform::\n+* Enhance the output of preview to return full destination index details {pull}53572[#53572]\n+\n+\n+\n+[[deprecation-7.7.0]]\n+[float]\n+=== Deprecations\n+\n+Allocation::\n+* Deprecated support for delaying state recovery pending master nodes {pull}53646[#53646] (issue: {issue}51806[#51806])\n+\n+Authentication::\n+* Add warnings for invalid realm order config (#51195) {pull}51515[#51515]\n+* Deprecate timeout.tcp_read AD/LDAP realm setting {pull}47305[#47305] (issue: {issue}46028[#46028])\n+\n+Engine::\n+* Deprecate translog retention settings {pull}51588[#51588] (issues: {issue}45473[#45473], {issue}50775[#50775])\n+\n+Features/Features::\n+* Add cluster.remote.connect to deprecation info API {pull}54142[#54142] (issue: {issue}53924[#53924])\n+\n+Infra/Core::\n+* Add deprecation check for listener thread pool {pull}53438[#53438] (issues: {issue}53049[#53049], {issue}53317[#53317])\n+* Deprecate the logstash enabled setting {pull}53367[#53367]\n+* Deprecate the listener thread pool {pull}53266[#53266] (issue: {issue}53049[#53049])\n+* Deprecate creation of dot-prefixed index names except for hidden and system indices {pull}49959[#49959]\n+\n+Infra/REST API::\n+* Deprecate undocumented alternatives to the nodes hot threads API (#52640) {pull}52930[#52930] (issue: {issue}52640[#52640])\n+\n+Machine Learning::\n+* Renaming inference processor field field_mappings to new name field_map {pull}53433[#53433]\n+\n+Search::\n+* Emit deprecation warning when TermsLookup contains a type {pull}53731[#53731] (issue: {issue}41059[#41059])\n+* Deprecate BoolQueryBuilder's mustNot field {pull}53125[#53125]\n+\n+\n+\n+[[feature-7.7.0]]\n+[float]\n+=== New features\n+\n+Aggregations::\n+* Preserve metric types in top_metrics {pull}53288[#53288]\n+* Support multiple metrics in `top_metrics` agg {pull}52965[#52965] (issue: {issue}51813[#51813])\n+* Add size support to `top_metrics` {pull}52662[#52662] (issue: {issue}51813[#51813])\n+* HLRC support for string_stats {pull}52163[#52163]\n+* Add Boxplot Aggregation {pull}51948[#51948] (issue: {issue}33112[#33112])\n+\n+Analysis::\n+* Add nori_number token filter in analysis-nori {pull}53583[#53583]\n+\n+Authentication::\n+* Create API Key on behalf of other user {pull}52886[#52886] (issue: {issue}48716[#48716])\n+\n+Geo::\n+* Add support for distance queries on shape queries {pull}53468[#53468]\n+* Add support for distance queries on geo_shape queries {pull}53466[#53466] (issues: {issue}13351[#13351], {issue}39237[#39237])\n+* Add support for multipoint shape queries {pull}52564[#52564] (issue: {issue}52133[#52133])\n+* Add support for multipoint geoshape queries {pull}52133[#52133] (issue: {issue}37318[#37318])\n+\n+Infra/Core::\n+* Implement hidden indices {pull}50452[#50452] (issues: {issue}50251[#50251], {issue}50665[#50665], {issue}50762[#50762])\n+\n+Infra/Packaging::\n+* Introduce aarch64 packaging {pull}53914[#53914]\n+\n+Machine Learning::\n+* Implement ILM policy for .ml-state* indices {pull}52356[#52356] (issue: {issue}29938[#29938])\n+\n+Mapping::\n+* Introduce a `constant_keyword` field. {pull}49713[#49713]\n+\n+SQL::\n+* constant_keyword support {pull}53241[#53241] (issue: {issue}53016[#53016])\n+* Add optimisations for not-equalities {pull}51088[#51088] (issue: {issue}49637[#49637])\n+* Add support for passing query parameters in REST API calls {pull}51029[#51029] (issue: {issue}42916[#42916])\n+\n+Search::\n+* Introduce compound query {pull}52387[#52387] (issue: {issue}51967[#51967])", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "originalPosition": 126}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNTgzOTQ4", "url": "https://github.com/elastic/elasticsearch/pull/55019#pullrequestreview-391583948", "createdAt": "2020-04-10T18:10:07Z", "commit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxODoxMDowN1rOGEBzvQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxODoxMDowN1rOGEBzvQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg3NzExNw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * constant_keyword support {pull}53241[#53241] (issue: {issue}53016[#53016])\n          \n          \n            \n            * Add `constant_keyword` support {pull}53241[#53241] (issue: {issue}53016[#53016])", "url": "https://github.com/elastic/elasticsearch/pull/55019#discussion_r406877117", "createdAt": "2020-04-10T18:10:07Z", "author": {"login": "jrodewig"}, "path": "docs/reference/release-notes/7.7.asciidoc", "diffHunk": "@@ -1,22 +1,612 @@\n [[release-notes-7.7.0]]\n == {es} version 7.7.0\n \n-coming[7.7.0]\n+Also see <<breaking-changes-7.7,Breaking changes in 7.7>>.\n \n [[breaking-7.7.0]]\n [float]\n === Breaking changes\n \n+Highlighting::\n+* Highlighters skip ignored keyword values {pull}53408[#53408] (issue: {issue}43800[#43800])\n+\n+Infra/Core::\n+* Remove DEBUG-level default logging from actions {pull}51459[#51459] (issue: {issue}51198[#51198])\n+\n Mapping::\n * Dynamic mappings in indices created on 8.0 and later have stricter validation at mapping update time and\n   results in a deprecation warning for indices created in Elasticsearch 7.7.0 and later.\n-  (e.g. incorrect analyzer settings or unknown field types). {pull}51233[#51233]\n+  (e.g. incorrect analyzer settings or unknown field types). {pull}51233[#51233] (issues: {issue}17411[#17411], {issue}24419[#24419])\n \n Search::\n-* A regression that allowed negative scores in a script_score query was corrected.\n-  A behaviour is restored that throws an error if script_score query produces\n-  a negative score {pull}52478[#52478].\n+* Make range query rounding consistent {pull}50237[#50237] (issue: {issue}50009[#50009])\n * Pipeline aggregation validation errors that used to return HTTP\n   500s/Internal Server Errors now return 400/Bad Request {pull}53669[#53669].\n   As a bonus we now return a list of validation errors rather than returning\n   the first one we encounter.\n+\n+\n+\n+[[breaking-java-7.7.0]]\n+[float]\n+=== Breaking Java changes\n+\n+Infra/Core::\n+* Fix ActionListener.map exception handling {pull}50886[#50886]\n+\n+Machine Learning::\n+* Add expected input field type to trained model config {pull}53083[#53083]\n+\n+Transform::\n+* Enhance the output of preview to return full destination index details {pull}53572[#53572]\n+\n+\n+\n+[[deprecation-7.7.0]]\n+[float]\n+=== Deprecations\n+\n+Allocation::\n+* Deprecated support for delaying state recovery pending master nodes {pull}53646[#53646] (issue: {issue}51806[#51806])\n+\n+Authentication::\n+* Add warnings for invalid realm order config (#51195) {pull}51515[#51515]\n+* Deprecate timeout.tcp_read AD/LDAP realm setting {pull}47305[#47305] (issue: {issue}46028[#46028])\n+\n+Engine::\n+* Deprecate translog retention settings {pull}51588[#51588] (issues: {issue}45473[#45473], {issue}50775[#50775])\n+\n+Features/Features::\n+* Add cluster.remote.connect to deprecation info API {pull}54142[#54142] (issue: {issue}53924[#53924])\n+\n+Infra/Core::\n+* Add deprecation check for listener thread pool {pull}53438[#53438] (issues: {issue}53049[#53049], {issue}53317[#53317])\n+* Deprecate the logstash enabled setting {pull}53367[#53367]\n+* Deprecate the listener thread pool {pull}53266[#53266] (issue: {issue}53049[#53049])\n+* Deprecate creation of dot-prefixed index names except for hidden and system indices {pull}49959[#49959]\n+\n+Infra/REST API::\n+* Deprecate undocumented alternatives to the nodes hot threads API (#52640) {pull}52930[#52930] (issue: {issue}52640[#52640])\n+\n+Machine Learning::\n+* Renaming inference processor field field_mappings to new name field_map {pull}53433[#53433]\n+\n+Search::\n+* Emit deprecation warning when TermsLookup contains a type {pull}53731[#53731] (issue: {issue}41059[#41059])\n+* Deprecate BoolQueryBuilder's mustNot field {pull}53125[#53125]\n+\n+\n+\n+[[feature-7.7.0]]\n+[float]\n+=== New features\n+\n+Aggregations::\n+* Preserve metric types in top_metrics {pull}53288[#53288]\n+* Support multiple metrics in `top_metrics` agg {pull}52965[#52965] (issue: {issue}51813[#51813])\n+* Add size support to `top_metrics` {pull}52662[#52662] (issue: {issue}51813[#51813])\n+* HLRC support for string_stats {pull}52163[#52163]\n+* Add Boxplot Aggregation {pull}51948[#51948] (issue: {issue}33112[#33112])\n+\n+Analysis::\n+* Add nori_number token filter in analysis-nori {pull}53583[#53583]\n+\n+Authentication::\n+* Create API Key on behalf of other user {pull}52886[#52886] (issue: {issue}48716[#48716])\n+\n+Geo::\n+* Add support for distance queries on shape queries {pull}53468[#53468]\n+* Add support for distance queries on geo_shape queries {pull}53466[#53466] (issues: {issue}13351[#13351], {issue}39237[#39237])\n+* Add support for multipoint shape queries {pull}52564[#52564] (issue: {issue}52133[#52133])\n+* Add support for multipoint geoshape queries {pull}52133[#52133] (issue: {issue}37318[#37318])\n+\n+Infra/Core::\n+* Implement hidden indices {pull}50452[#50452] (issues: {issue}50251[#50251], {issue}50665[#50665], {issue}50762[#50762])\n+\n+Infra/Packaging::\n+* Introduce aarch64 packaging {pull}53914[#53914]\n+\n+Machine Learning::\n+* Implement ILM policy for .ml-state* indices {pull}52356[#52356] (issue: {issue}29938[#29938])\n+\n+Mapping::\n+* Introduce a `constant_keyword` field. {pull}49713[#49713]\n+\n+SQL::\n+* constant_keyword support {pull}53241[#53241] (issue: {issue}53016[#53016])", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "originalPosition": 121}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNTg0OTk1", "url": "https://github.com/elastic/elasticsearch/pull/55019#pullrequestreview-391584995", "createdAt": "2020-04-10T18:12:23Z", "commit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxODoxMjoyNFrOGEB3Lw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxODoxMjoyNFrOGEB3Lw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg3Nzk5OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Fix ingest pipeline _simulate api with empty docs never returns a res\u2026 {pull}52937[#52937] (issue: {issue}52833[#52833])\n          \n          \n            \n            * Fix ingest pipeline _simulate api with empty docs never returns a response {pull}52937[#52937] (issue: {issue}52833[#52833])", "url": "https://github.com/elastic/elasticsearch/pull/55019#discussion_r406877999", "createdAt": "2020-04-10T18:12:24Z", "author": {"login": "jrodewig"}, "path": "docs/reference/release-notes/7.7.asciidoc", "diffHunk": "@@ -1,22 +1,612 @@\n [[release-notes-7.7.0]]\n == {es} version 7.7.0\n \n-coming[7.7.0]\n+Also see <<breaking-changes-7.7,Breaking changes in 7.7>>.\n \n [[breaking-7.7.0]]\n [float]\n === Breaking changes\n \n+Highlighting::\n+* Highlighters skip ignored keyword values {pull}53408[#53408] (issue: {issue}43800[#43800])\n+\n+Infra/Core::\n+* Remove DEBUG-level default logging from actions {pull}51459[#51459] (issue: {issue}51198[#51198])\n+\n Mapping::\n * Dynamic mappings in indices created on 8.0 and later have stricter validation at mapping update time and\n   results in a deprecation warning for indices created in Elasticsearch 7.7.0 and later.\n-  (e.g. incorrect analyzer settings or unknown field types). {pull}51233[#51233]\n+  (e.g. incorrect analyzer settings or unknown field types). {pull}51233[#51233] (issues: {issue}17411[#17411], {issue}24419[#24419])\n \n Search::\n-* A regression that allowed negative scores in a script_score query was corrected.\n-  A behaviour is restored that throws an error if script_score query produces\n-  a negative score {pull}52478[#52478].\n+* Make range query rounding consistent {pull}50237[#50237] (issue: {issue}50009[#50009])\n * Pipeline aggregation validation errors that used to return HTTP\n   500s/Internal Server Errors now return 400/Bad Request {pull}53669[#53669].\n   As a bonus we now return a list of validation errors rather than returning\n   the first one we encounter.\n+\n+\n+\n+[[breaking-java-7.7.0]]\n+[float]\n+=== Breaking Java changes\n+\n+Infra/Core::\n+* Fix ActionListener.map exception handling {pull}50886[#50886]\n+\n+Machine Learning::\n+* Add expected input field type to trained model config {pull}53083[#53083]\n+\n+Transform::\n+* Enhance the output of preview to return full destination index details {pull}53572[#53572]\n+\n+\n+\n+[[deprecation-7.7.0]]\n+[float]\n+=== Deprecations\n+\n+Allocation::\n+* Deprecated support for delaying state recovery pending master nodes {pull}53646[#53646] (issue: {issue}51806[#51806])\n+\n+Authentication::\n+* Add warnings for invalid realm order config (#51195) {pull}51515[#51515]\n+* Deprecate timeout.tcp_read AD/LDAP realm setting {pull}47305[#47305] (issue: {issue}46028[#46028])\n+\n+Engine::\n+* Deprecate translog retention settings {pull}51588[#51588] (issues: {issue}45473[#45473], {issue}50775[#50775])\n+\n+Features/Features::\n+* Add cluster.remote.connect to deprecation info API {pull}54142[#54142] (issue: {issue}53924[#53924])\n+\n+Infra/Core::\n+* Add deprecation check for listener thread pool {pull}53438[#53438] (issues: {issue}53049[#53049], {issue}53317[#53317])\n+* Deprecate the logstash enabled setting {pull}53367[#53367]\n+* Deprecate the listener thread pool {pull}53266[#53266] (issue: {issue}53049[#53049])\n+* Deprecate creation of dot-prefixed index names except for hidden and system indices {pull}49959[#49959]\n+\n+Infra/REST API::\n+* Deprecate undocumented alternatives to the nodes hot threads API (#52640) {pull}52930[#52930] (issue: {issue}52640[#52640])\n+\n+Machine Learning::\n+* Renaming inference processor field field_mappings to new name field_map {pull}53433[#53433]\n+\n+Search::\n+* Emit deprecation warning when TermsLookup contains a type {pull}53731[#53731] (issue: {issue}41059[#41059])\n+* Deprecate BoolQueryBuilder's mustNot field {pull}53125[#53125]\n+\n+\n+\n+[[feature-7.7.0]]\n+[float]\n+=== New features\n+\n+Aggregations::\n+* Preserve metric types in top_metrics {pull}53288[#53288]\n+* Support multiple metrics in `top_metrics` agg {pull}52965[#52965] (issue: {issue}51813[#51813])\n+* Add size support to `top_metrics` {pull}52662[#52662] (issue: {issue}51813[#51813])\n+* HLRC support for string_stats {pull}52163[#52163]\n+* Add Boxplot Aggregation {pull}51948[#51948] (issue: {issue}33112[#33112])\n+\n+Analysis::\n+* Add nori_number token filter in analysis-nori {pull}53583[#53583]\n+\n+Authentication::\n+* Create API Key on behalf of other user {pull}52886[#52886] (issue: {issue}48716[#48716])\n+\n+Geo::\n+* Add support for distance queries on shape queries {pull}53468[#53468]\n+* Add support for distance queries on geo_shape queries {pull}53466[#53466] (issues: {issue}13351[#13351], {issue}39237[#39237])\n+* Add support for multipoint shape queries {pull}52564[#52564] (issue: {issue}52133[#52133])\n+* Add support for multipoint geoshape queries {pull}52133[#52133] (issue: {issue}37318[#37318])\n+\n+Infra/Core::\n+* Implement hidden indices {pull}50452[#50452] (issues: {issue}50251[#50251], {issue}50665[#50665], {issue}50762[#50762])\n+\n+Infra/Packaging::\n+* Introduce aarch64 packaging {pull}53914[#53914]\n+\n+Machine Learning::\n+* Implement ILM policy for .ml-state* indices {pull}52356[#52356] (issue: {issue}29938[#29938])\n+\n+Mapping::\n+* Introduce a `constant_keyword` field. {pull}49713[#49713]\n+\n+SQL::\n+* constant_keyword support {pull}53241[#53241] (issue: {issue}53016[#53016])\n+* Add optimisations for not-equalities {pull}51088[#51088] (issue: {issue}49637[#49637])\n+* Add support for passing query parameters in REST API calls {pull}51029[#51029] (issue: {issue}42916[#42916])\n+\n+Search::\n+* Introduce compound query {pull}52387[#52387] (issue: {issue}51967[#51967])\n+* Add a cluster setting to disallow expensive queries {pull}51385[#51385] (issue: {issue}29050[#29050])\n+* Add new x-pack endpoints to track the progress of a search asynchronously {pull}49931[#49931] (issue: {issue}49091[#49091])\n+\n+\n+\n+[[enhancement-7.7.0]]\n+[float]\n+=== Enhancements\n+\n+Aggregations::\n+* Try to save memory on aggregations {pull}53793[#53793]\n+* Speed up partial reduce of terms aggregations {pull}53216[#53216] (issue: {issue}51857[#51857])\n+* Simplify SiblingPipelineAggregator {pull}53144[#53144]\n+* Add histogram field type support to boxplot aggs {pull}52265[#52265] (issues: {issue}33112[#33112], {issue}52233[#52233])\n+* Percentiles aggregation validation checks for range {pull}51871[#51871] (issue: {issue}51808[#51808])\n+* Begin moving date_histogram to offset rounding (take two) {pull}51271[#51271] (issues: {issue}50609[#50609], {issue}50873[#50873])\n+* Password-protected Keystore Feature Branch PR {pull}51123[#51123] (issues: {issue}32691[#32691], {issue}49340[#49340])\n+* Implement top_metrics agg {pull}51155[#51155] (issue: {issue}48069[#48069])\n+* Bucket aggregation circuit breaker optimization. {pull}46751[#46751]\n+\n+Analysis::\n+* Removes old Lucene's experimental flag from analyzer documentations {pull}53217[#53217]\n+\n+Authentication::\n+* Add exception metadata for disabled features {pull}52811[#52811] (issues: {issue}47759[#47759], {issue}52311[#52311], {issue}55255[#55255])\n+* Validate role templates before saving role mapping {pull}52636[#52636] (issue: {issue}48773[#48773])\n+* Add support for secondary authentication {pull}52093[#52093]\n+* Expose API key name to the ingest pipeline {pull}51305[#51305] (issues: {issue}46847[#46847], {issue}49106[#49106])\n+* Disallow Password Change when authenticated by Token {pull}49694[#49694] (issue: {issue}48752[#48752])\n+\n+Authorization::\n+* Allow kibana_system to create and invalidate API keys on behalf of other users {pull}53824[#53824] (issue: {issue}48716[#48716])\n+* Add \"grant_api_key\" cluster privilege {pull}53527[#53527] (issues: {issue}48716[#48716], {issue}52886[#52886])\n+* Giving kibana user privileges to create custom link index {pull}53221[#53221] (issue: {issue}59305[#59305])\n+* [APM] Allow kibana to collect APM telemetry in background task {pull}52917[#52917] (issue: {issue}50757[#50757])\n+* Add the new 'maintenance' privilege containing 4 actions (#29998) {pull}50643[#50643]\n+\n+Cluster Coordination::\n+* Describe STALE_STATE_CONFIG in ClusterFormationFH {pull}53878[#53878] (issue: {issue}53734[#53734])\n+\n+Distributed::\n+* Introduce formal role for remote cluster client {pull}53924[#53924]\n+* Shortcut query phase using the results of other shards {pull}51852[#51852] (issues: {issue}49601[#49601], {issue}51708[#51708])\n+* Flush instead of synced-flush inactive shards {pull}49126[#49126] (issues: {issue}31965[#31965], {issue}48430[#48430])\n+\n+Engine::\n+* Restore off-heap loading for term dictionary in ReadOnlyEngine {pull}53713[#53713] (issues: {issue}43158[#43158], {issue}51247[#51247])\n+* Separate translog from index deletion conditions {pull}52556[#52556]\n+* Always rewrite search shard request outside of the search thread pool {pull}51708[#51708] (issue: {issue}49601[#49601])\n+* Move the terms index of `_id` off-heap. {pull}52405[#52405] (issue: {issue}42838[#42838])\n+* Cache completion stats between refreshes {pull}51991[#51991] (issue: {issue}51915[#51915])\n+* Use local checkpoint to calculate min translog gen for recovery {pull}51905[#51905] (issue: {issue}49970[#49970])\n+\n+Features/CAT APIs::\n+* /_cat/shards support path stats {pull}53461[#53461]\n+* Allow _cat indices & aliases to use indices options {pull}53248[#53248] (issue: {issue}52304[#52304])\n+\n+Features/Features::\n+* Enable deprecation checks for removed settings {pull}53317[#53317]\n+\n+Features/ILM+SLM::\n+* Hide ILM & SLM history aliases {pull}53564[#53564]\n+* Avoid race condition in ILMHistorySotre {pull}53039[#53039] (issues: {issue}50353[#50353], {issue}52853[#52853])\n+* Make FreezeStep retryable {pull}52540[#52540]\n+* Make DeleteStep retryable {pull}52494[#52494]\n+* Allow forcemerge in the hot phase for ILM policies {pull}52073[#52073] (issue: {issue}43165[#43165])\n+* Stop policy on last PhaseCompleteStep instead of TerminalPolic\u2026 {pull}51631[#51631] (issue: {issue}48431[#48431])\n+* Convert ILM and SLM histories into hidden indices {pull}51456[#51456]\n+* Make UpdateSettingsStep retryable {pull}51235[#51235] (issues: {issue}44135[#44135], {issue}48183[#48183])\n+* Expose master timeout for ILM actions {pull}51130[#51130] (issue: {issue}44136[#44136])\n+* Wait for active shards on rolled index in a separate step {pull}50718[#50718] (issues: {issue}44135[#44135], {issue}48183[#48183])\n+* Adding best_compression {pull}49974[#49974]\n+\n+Features/Indices APIs::\n+* Add IndexTemplateV2 to MetaData {pull}53753[#53753] (issue: {issue}53101[#53101])\n+* Add ComponentTemplate to MetaData {pull}53290[#53290] (issue: {issue}53101[#53101])\n+\n+Features/Ingest::\n+* Reduce log level for pipeline failure {pull}54097[#54097] (issue: {issue}51459[#51459])\n+* Support array for all string ingest processors {pull}53343[#53343] (issue: {issue}51087[#51087])\n+* Add empty_value parameter to CSV processor {pull}51567[#51567]\n+* Add pipeline name to ingest metadata {pull}50467[#50467] (issue: {issue}42106[#42106])\n+\n+Features/Java High Level REST Client::\n+* SourceExists HLRC uses GetSourceRequest instead of GetRequest {pull}51789[#51789] (issue: {issue}50885[#50885])\n+* Add async_search.submit to HLRC {pull}53592[#53592] (issue: {issue}49091[#49091])\n+* Add Get Source API to the HLRC {pull}50885[#50885] (issue: {issue}47678[#47678])\n+\n+Features/Monitoring::\n+* Secure password for monitoring HTTP exporter {pull}50919[#50919] (issue: {issue}50197[#50197])\n+* Validate SSL settings at parse time {pull}49196[#49196] (issue: {issue}47711[#47711])\n+\n+Features/Stats::\n+* Add analysis components and mapping types to the usage API. {pull}51031[#51031]\n+\n+Features/Watcher::\n+* Make watch history indices hidden {pull}52962[#52962] (issue: {issue}50251[#50251])\n+* Upgrade to the latest OWASP HTML sanitizer {pull}50765[#50765] (issue: {issue}50395[#50395])\n+\n+Infra/Core::\n+* Enable helpful null pointer exceptions {pull}54853[#54853]\n+* Allow keystore add to handle multiple settings {pull}54229[#54229] (issue: {issue}54191[#54191])\n+* Report parser name and location in XContent deprecation warnings {pull}53805[#53805]\n+* Report parser name and location in XContent deprecation warnings {pull}53752[#53752]\n+* Deprecate all variants of a ParseField with no replacement {pull}53722[#53722]\n+* Add a helper method to parse maps of objects {pull}53096[#53096]\n+* Allow specifying an exclusive set of fields on ObjectParser {pull}52893[#52893]\n+* Support joda style date patterns in 7.x {pull}52555[#52555]\n+* Implement hidden aliases {pull}52547[#52547] (issue: {issue}52304[#52304])\n+* Allow ObjectParsers to specify required sets of fields {pull}49661[#49661] (issue: {issue}48824[#48824])\n+\n+Infra/Logging::\n+* Capture stdout and stderr to log4j log {pull}50259[#50259] (issue: {issue}50156[#50156])\n+\n+Infra/Packaging::\n+* Introduce aarch64 Docker image {pull}53936[#53936] (issue: {issue}53914[#53914])\n+* Introduce jvm.options.d for customizing JVM options {pull}51882[#51882] (issue: {issue}51626[#51626])\n+\n+Infra/Plugins::\n+* Allow sha512 checksum without filename for maven plugins {pull}52668[#52668] (issue: {issue}52413[#52413])\n+\n+Infra/Scripting::\n+* Scripting: Context script cache unlimited compile {pull}53769[#53769] (issue: {issue}50152[#50152])\n+* Scripting: Increase ingest script cache defaults {pull}53765[#53765] (issue: {issue}50152[#50152])\n+* Scripting: Per-context script cache, default off (#52855) {pull}53756[#53756] (issues: {issue}50152[#50152], {issue}52855[#52855])\n+* Scripting: Per-context script cache, default off {pull}52855[#52855] (issue: {issue}50152[#50152])\n+* Improve Painless compilation performance for nested conditionals {pull}52056[#52056]\n+* Scripting: Add char position of script errors {pull}51069[#51069] (issue: {issue}50993[#50993])\n+\n+Infra/Settings::\n+* Allow keystore add-file to handle multiple settings {pull}54240[#54240] (issue: {issue}54191[#54191])\n+* Settings: AffixSettings as validator dependencies {pull}52973[#52973] (issue: {issue}52933[#52933])\n+\n+License::\n+* Simplify ml license checking with XpackLicenseState internals {pull}52684[#52684] (issue: {issue}52115[#52115])\n+* License removal leads back to a basic license {pull}52407[#52407] (issue: {issue}45022[#45022])\n+* Refactor license checking {pull}52118[#52118] (issue: {issue}51864[#51864])\n+* Add enterprise mode and refactor {pull}51864[#51864] (issue: {issue}51081[#51081])\n+\n+Machine Learning::\n+* Stratified cross validation split for classification {pull}54087[#54087]\n+* Data frame analytics data counts {pull}53998[#53998]\n+* Verify that the field is aggregatable before attempting cardinality aggregation {pull}53874[#53874] (issue: {issue}53876[#53876])\n+* Adds multi-class feature importance support {pull}53803[#53803]\n+* Data frame analytics analysis stats {pull}53788[#53788]\n+* Add a model memory estimation endpoint for anomaly detection {pull}53507[#53507] (issue: {issue}53219[#53219])\n+* [Inference] adds new default_field_map field to trained models {pull}53294[#53294]\n+* Improve DF analytics audits and logging {pull}53179[#53179]\n+* Add indices_options to datafeed config and update {pull}52793[#52793] (issue: {issue}48056[#48056])\n+* Parse and report memory usage for DF Analytics {pull}52778[#52778]\n+* Adds the class_assignment_objective parameter to classification {pull}52763[#52763] (issue: {issue}52427[#52427])\n+* Add reason to DataFrameAnalyticsTask updateState log message {pull}52659[#52659] (issue: {issue}52654[#52654])\n+* [Inference] Add support for multi-value leaves to the tree model {pull}52531[#52531]\n+* Make ml internal indices hidden {pull}52423[#52423] (issue: {issue}52420[#52420])\n+* Add _cat/ml/data_frame/analytics API {pull}52260[#52260] (issue: {issue}51413[#51413])\n+* Adds feature importance option to inference processor {pull}52218[#52218]\n+* Switch poor categorization audit warning to use status field {pull}52195[#52195] (issues: {issue}50749[#50749], {issue}51146[#51146], {issue}51879[#51879])\n+* Retry persisting DF Analytics results {pull}52048[#52048]\n+* Improve multiline_start_pattern for CSV in find_file_structure {pull}51737[#51737]\n+* Add _cat/ml/trained_models API {pull}51529[#51529] (issue: {issue}51414[#51414])\n+* Add GET _cat/ml/datafeeds {pull}51500[#51500] (issue: {issue}51411[#51411])\n+* Use CSV ingest processor in find_file_structure ingest pipeline {pull}51492[#51492] (issue: {issue}56038[#56038])\n+* Add _cat/ml/anomaly_detectors API {pull}51364[#51364]\n+* [Inference] add tags url param to GET {pull}51330[#51330]\n+* Add parsers for inference configuration classes {pull}51300[#51300]\n+* Make datafeeds work with nanosecond time fields {pull}51180[#51180] (issue: {issue}49889[#49889])\n+* Add audit warning for 1000 categories found early in job {pull}51146[#51146] (issue: {issue}50749[#50749])\n+* Adds support for a global calendars {pull}50372[#50372] (issue: {issue}45013[#45013])\n+\n+Mapping::\n+* Wildcard field - add normalizer support {pull}53851[#53851]\n+* Wildcard field - added case insensitive search option {pull}53814[#53814]\n+* Append index name for the source of the cluster put-mapping task {pull}52690[#52690]\n+\n+Network::\n+* Give helpful message on remote connections disabled {pull}53690[#53690]\n+* Add server name to remote info API {pull}53634[#53634]\n+* Log when probe succeeds but full connection fails {pull}51304[#51304]\n+* Encrypt generated key with AES {pull}51019[#51019] (issue: {issue}50843[#50843])\n+\n+Ranking::\n+* Adds recall@k metric to rank eval API {pull}52577[#52577] (issue: {issue}51676[#51676])\n+\n+SQL::\n+* Jdbc debugging enhancement {pull}53880[#53880]\n+* Transfer version compatibility decision to the server {pull}53082[#53082] (issue: {issue}52766[#52766])\n+* Use a proper error message for queries directed at empty mapping indices {pull}52967[#52967] (issue: {issue}52865[#52865])\n+* Use calendar_interval of 1d for HISTOGRAMs with 1 DAY intervals {pull}52749[#52749] (issue: {issue}52713[#52713])\n+* Use a calendar interval for histograms over 1 month intervals {pull}52586[#52586] (issue: {issue}51538[#51538])\n+* Make parsing of date more lenient {pull}52137[#52137] (issue: {issue}49379[#49379])\n+* Enhance timestamp escaped literal parsing {pull}52097[#52097] (issue: {issue}46069[#46069])\n+* Handle uberjar scenario where the ES jdbc driver file is bundled in another jar {pull}51856[#51856] (issue: {issue}50201[#50201])\n+* Verify Full-Text Search functions not allowed in SELECT {pull}51568[#51568] (issue: {issue}47446[#47446])\n+* Extend the optimisations for equalities {pull}50792[#50792] (issue: {issue}49637[#49637])\n+* Add trace logging for search responses coming from server {pull}50530[#50530]\n+* Extend DATE_TRUNC to also operate on intervals(elastic - #46632 ) {pull}47720[#47720] (issue: {issue}46632[#46632])\n+* Enchance output of explain for optimized plan {pull}33718[#33718]\n+\n+Search::\n+* HLRC: Don't send defaults for SubmitAsyncSearchRequest {pull}54200[#54200]\n+* Reduce performance impact of ExitableDirectoryReader {pull}53978[#53978] (issues: {issue}52822[#52822], {issue}53166[#53166], {issue}53496[#53496])\n+* Add heuristics to compute pre_filter_shard_size when unspecified {pull}53873[#53873] (issue: {issue}39835[#39835])\n+* Add async_search get and delete APIs to HLRC {pull}53828[#53828] (issue: {issue}49091[#49091])\n+* Increase step between checks for cancellation {pull}53712[#53712] (issues: {issue}52822[#52822], {issue}53496[#53496])\n+* Refine SearchProgressListener internal API {pull}53373[#53373]\n+* Check for query cancellation during rewrite {pull}53166[#53166] (issue: {issue}52822[#52822])\n+* Implement Cancellable DirectoryReader {pull}52822[#52822]\n+* Address MinAndMax generics warnings {pull}52642[#52642] (issue: {issue}49092[#49092])\n+* Clarify when shard iterators get sorted {pull}52633[#52633]\n+* Generalize how queries on `_index` are handled at rewrite time {pull}52486[#52486] (issues: {issue}49254[#49254], {issue}49713[#49713])\n+* Remove the query builder serialization from QueryShardException message {pull}51885[#51885] (issues: {issue}48910[#48910], {issue}51843[#51843])\n+* Short circuited to MatchNone for non-participating  slice {pull}51207[#51207]\n+* Add \"did you mean\" to unknown queries {pull}51177[#51177]\n+* Exclude unmapped fields during max clause limit checking for querying {pull}49523[#49523] (issue: {issue}49002[#49002])\n+\n+Security::\n+* Add error message in JSON response {pull}54389[#54389]\n+\n+Snapshot/Restore::\n+* Use Azure Bulk Deletes in Azure Repository {pull}53919[#53919] (issue: {issue}53865[#53865])\n+* Only link fd* files during source-only snapshot {pull}53463[#53463] (issue: {issue}50231[#50231])\n+* Add Blob Download Retries to GCS Repository {pull}52479[#52479] (issues: {issue}46589[#46589], {issue}52319[#52319])\n+* Better Incrementality for Snapshots of Unchanged Shards {pull}52182[#52182]\n+* Add Region and Signer Algorithm Overrides to S3 Repos {pull}52112[#52112] (issue: {issue}51861[#51861])\n+* Allow Parallel Snapshot Restore And Delete {pull}51608[#51608] (issue: {issue}41463[#41463])\n+\n+Store::\n+* HybridDirectory should mmap postings. {pull}52641[#52641]\n+\n+Transform::\n+* Transition Transforms to using hidden indices for notifcations index {pull}53773[#53773] (issue: {issue}53762[#53762])\n+* [Rollup] add processing stats to record the time spent for processing results {pull}53770[#53770]\n+* Create GET _cat/transforms API Issue {pull}53643[#53643] (issue: {issue}51412[#51412])\n+* Add support for script in group_by {pull}53167[#53167] (issue: {issue}43152[#43152])\n+* Implement node.transform to control where to run a transform {pull}52712[#52712] (issues: {issue}48734[#48734], {issue}50033[#50033], {issue}52200[#52200])\n+* Add support for filter aggregation {pull}52483[#52483] (issue: {issue}52151[#52151])\n+* Provide exponential_avg* stats for batch transforms {pull}52041[#52041] (issue: {issue}52037[#52037])\n+* Improve irrecoverable error detection - part 2 {pull}52003[#52003] (issue: {issue}51820[#51820])\n+* Mark transform API's stable {pull}51862[#51862]\n+* Improve irrecoverable error detection {pull}51820[#51820] (issue: {issue}50135[#50135])\n+* Add support for percentile aggs {pull}51808[#51808] (issue: {issue}51663[#51663])\n+* Disallow fieldnames with a dot at start and/or end {pull}51369[#51369]\n+* Avoid mapping problems with index templates {pull}51368[#51368] (issue: {issue}51321[#51321])\n+* Handle permanent bulk indexing errors {pull}51307[#51307] (issue: {issue}50122[#50122])\n+* Improve force stop robustness in case of an error {pull}51072[#51072]\n+\n+\n+\n+[[bug-7.7.0]]\n+[float]\n+=== Bug fixes\n+\n+Aggregations::\n+* Fix date_nanos in composite aggs {pull}53315[#53315] (issue: {issue}53168[#53168])\n+* Fix composite agg sort bug {pull}53296[#53296] (issue: {issue}52480[#52480])\n+* Decode max and min optimization more carefully {pull}52336[#52336] (issue: {issue}52220[#52220])\n+* Fix a DST error in date_histogram {pull}52016[#52016] (issue: {issue}50265[#50265])\n+* Use #name() instead of #simpleName() when generating doc values {pull}51920[#51920] (issues: {issue}50307[#50307], {issue}51847[#51847])\n+* Fix a sneaky bug in rare_terms {pull}51868[#51868] (issue: {issue}51020[#51020])\n+* Support time_zone on composite's date_histogram {pull}51172[#51172] (issues: {issue}45199[#45199], {issue}45200[#45200])\n+\n+Allocation::\n+* Improve performance of shards limits decider {pull}53577[#53577] (issue: {issue}53559[#53559])\n+\n+Analysis::\n+* Mask wildcard query special characters on keyword queries {pull}53127[#53127] (issue: {issue}46300[#46300])\n+* Fix caching for PreConfiguredTokenFilter {pull}50912[#50912] (issue: {issue}50734[#50734])\n+\n+Audit::\n+* Logfile audit settings validation {pull}52537[#52537] (issues: {issue}47038[#47038], {issue}47711[#47711], {issue}52357[#52357])\n+\n+Authentication::\n+* Fix potential bug in concurrent token refresh support {pull}53668[#53668]\n+* Respect runas realm for ApiKey security operations {pull}52178[#52178] (issue: {issue}51975[#51975])\n+* Preserve ApiKey credentials for async verification {pull}51244[#51244]\n+* Don't fallback to anonymous for tokens/apikeys {pull}51042[#51042] (issue: {issue}50171[#50171])\n+* Fail gracefully on invalid token strings {pull}51014[#51014]\n+\n+Authorization::\n+* Explicitly require that delegate API keys have no privileges {pull}53647[#53647]\n+* Allow _rollup_search with read privilege {pull}52043[#52043] (issue: {issue}50245[#50245])\n+\n+CCR::\n+* Put CCR tasks on (data && remote cluster clients) {pull}54146[#54146] (issue: {issue}53924[#53924])\n+* Handle no such remote cluster exception in ccr {pull}53415[#53415] (issue: {issue}53225[#53225])\n+* Fix shard follow task cleaner under security {pull}52347[#52347] (issues: {issue}44702[#44702], {issue}51971[#51971])\n+\n+CRUD::\n+* Force execution of finish shard bulk request {pull}51957[#51957] (issue: {issue}51904[#51904])\n+* Return 429 status code when there's a read_only cluster block {pull}50166[#50166] (issue: {issue}49393[#49393])\n+\n+Cluster Coordination::\n+* Use special XContent registry for node tool {pull}54050[#54050] (issue: {issue}53549[#53549])\n+* Allow static cluster.max_voting_config_exclusions {pull}53717[#53717] (issue: {issue}53455[#53455])\n+* Allow joining node to trigger term bump {pull}53338[#53338] (issue: {issue}53271[#53271])\n+* Ignore timeouts with single-node discovery {pull}52159[#52159]\n+\n+Distributed::\n+* Execute retention lease syncs under system context {pull}53838[#53838] (issues: {issue}48430[#48430], {issue}53751[#53751])\n+* Exclude nested documents in LuceneChangesSnapshot {pull}51279[#51279]\n+\n+Engine::\n+* Fix doc_stats and segment_stats of ReadOnlyEngine {pull}53345[#53345] (issues: {issue}51303[#51303], {issue}51331[#51331])\n+* Do not wrap soft-deletes reader for segment stats {pull}51331[#51331] (issues: {issue}51192[#51192], {issue}51303[#51303])\n+* Account soft-deletes in FrozenEngine {pull}51192[#51192] (issue: {issue}50775[#50775])\n+\n+Features/CAT APIs::\n+* Fix NPE in RestPluginsAction {pull}52620[#52620] (issue: {issue}45321[#45321])\n+\n+Features/ILM+SLM::\n+* Disallow negative TimeValues {pull}53913[#53913] (issue: {issue}54041[#54041])\n+* Fix null config in SnapshotLifecyclePolicy.toRequest {pull}53328[#53328] (issues: {issue}44465[#44465], {issue}53171[#53171])\n+* Freeze step retry when not acknowledged {pull}53287[#53287]\n+* Make the set-single-node-allocation retryable (#52077) {pull}52138[#52138] (issue: {issue}52077[#52077])\n+* Make the set-single-node-allocation retryable {pull}52077[#52077] (issue: {issue}43401[#43401])\n+* Fix the init step to actually be retryable {pull}52076[#52076]\n+\n+Features/Ingest::\n+* Fix ingest pipeline _simulate api with empty docs never returns a res\u2026 {pull}52937[#52937] (issue: {issue}52833[#52833])", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "originalPosition": 445}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNTg1NjQ2", "url": "https://github.com/elastic/elasticsearch/pull/55019#pullrequestreview-391585646", "createdAt": "2020-04-10T18:13:47Z", "commit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxODoxMzo0N1rOGEB5Vg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxODoxMzo0N1rOGEB5Vg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg3ODU1MA==", "bodyText": "Removes the label.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * [Inference] adds new default_field_map field to trained models {pull}53294[#53294]\n          \n          \n            \n            * Adds new default_field_map field to trained models {pull}53294[#53294]", "url": "https://github.com/elastic/elasticsearch/pull/55019#discussion_r406878550", "createdAt": "2020-04-10T18:13:47Z", "author": {"login": "jrodewig"}, "path": "docs/reference/release-notes/7.7.asciidoc", "diffHunk": "@@ -1,22 +1,612 @@\n [[release-notes-7.7.0]]\n == {es} version 7.7.0\n \n-coming[7.7.0]\n+Also see <<breaking-changes-7.7,Breaking changes in 7.7>>.\n \n [[breaking-7.7.0]]\n [float]\n === Breaking changes\n \n+Highlighting::\n+* Highlighters skip ignored keyword values {pull}53408[#53408] (issue: {issue}43800[#43800])\n+\n+Infra/Core::\n+* Remove DEBUG-level default logging from actions {pull}51459[#51459] (issue: {issue}51198[#51198])\n+\n Mapping::\n * Dynamic mappings in indices created on 8.0 and later have stricter validation at mapping update time and\n   results in a deprecation warning for indices created in Elasticsearch 7.7.0 and later.\n-  (e.g. incorrect analyzer settings or unknown field types). {pull}51233[#51233]\n+  (e.g. incorrect analyzer settings or unknown field types). {pull}51233[#51233] (issues: {issue}17411[#17411], {issue}24419[#24419])\n \n Search::\n-* A regression that allowed negative scores in a script_score query was corrected.\n-  A behaviour is restored that throws an error if script_score query produces\n-  a negative score {pull}52478[#52478].\n+* Make range query rounding consistent {pull}50237[#50237] (issue: {issue}50009[#50009])\n * Pipeline aggregation validation errors that used to return HTTP\n   500s/Internal Server Errors now return 400/Bad Request {pull}53669[#53669].\n   As a bonus we now return a list of validation errors rather than returning\n   the first one we encounter.\n+\n+\n+\n+[[breaking-java-7.7.0]]\n+[float]\n+=== Breaking Java changes\n+\n+Infra/Core::\n+* Fix ActionListener.map exception handling {pull}50886[#50886]\n+\n+Machine Learning::\n+* Add expected input field type to trained model config {pull}53083[#53083]\n+\n+Transform::\n+* Enhance the output of preview to return full destination index details {pull}53572[#53572]\n+\n+\n+\n+[[deprecation-7.7.0]]\n+[float]\n+=== Deprecations\n+\n+Allocation::\n+* Deprecated support for delaying state recovery pending master nodes {pull}53646[#53646] (issue: {issue}51806[#51806])\n+\n+Authentication::\n+* Add warnings for invalid realm order config (#51195) {pull}51515[#51515]\n+* Deprecate timeout.tcp_read AD/LDAP realm setting {pull}47305[#47305] (issue: {issue}46028[#46028])\n+\n+Engine::\n+* Deprecate translog retention settings {pull}51588[#51588] (issues: {issue}45473[#45473], {issue}50775[#50775])\n+\n+Features/Features::\n+* Add cluster.remote.connect to deprecation info API {pull}54142[#54142] (issue: {issue}53924[#53924])\n+\n+Infra/Core::\n+* Add deprecation check for listener thread pool {pull}53438[#53438] (issues: {issue}53049[#53049], {issue}53317[#53317])\n+* Deprecate the logstash enabled setting {pull}53367[#53367]\n+* Deprecate the listener thread pool {pull}53266[#53266] (issue: {issue}53049[#53049])\n+* Deprecate creation of dot-prefixed index names except for hidden and system indices {pull}49959[#49959]\n+\n+Infra/REST API::\n+* Deprecate undocumented alternatives to the nodes hot threads API (#52640) {pull}52930[#52930] (issue: {issue}52640[#52640])\n+\n+Machine Learning::\n+* Renaming inference processor field field_mappings to new name field_map {pull}53433[#53433]\n+\n+Search::\n+* Emit deprecation warning when TermsLookup contains a type {pull}53731[#53731] (issue: {issue}41059[#41059])\n+* Deprecate BoolQueryBuilder's mustNot field {pull}53125[#53125]\n+\n+\n+\n+[[feature-7.7.0]]\n+[float]\n+=== New features\n+\n+Aggregations::\n+* Preserve metric types in top_metrics {pull}53288[#53288]\n+* Support multiple metrics in `top_metrics` agg {pull}52965[#52965] (issue: {issue}51813[#51813])\n+* Add size support to `top_metrics` {pull}52662[#52662] (issue: {issue}51813[#51813])\n+* HLRC support for string_stats {pull}52163[#52163]\n+* Add Boxplot Aggregation {pull}51948[#51948] (issue: {issue}33112[#33112])\n+\n+Analysis::\n+* Add nori_number token filter in analysis-nori {pull}53583[#53583]\n+\n+Authentication::\n+* Create API Key on behalf of other user {pull}52886[#52886] (issue: {issue}48716[#48716])\n+\n+Geo::\n+* Add support for distance queries on shape queries {pull}53468[#53468]\n+* Add support for distance queries on geo_shape queries {pull}53466[#53466] (issues: {issue}13351[#13351], {issue}39237[#39237])\n+* Add support for multipoint shape queries {pull}52564[#52564] (issue: {issue}52133[#52133])\n+* Add support for multipoint geoshape queries {pull}52133[#52133] (issue: {issue}37318[#37318])\n+\n+Infra/Core::\n+* Implement hidden indices {pull}50452[#50452] (issues: {issue}50251[#50251], {issue}50665[#50665], {issue}50762[#50762])\n+\n+Infra/Packaging::\n+* Introduce aarch64 packaging {pull}53914[#53914]\n+\n+Machine Learning::\n+* Implement ILM policy for .ml-state* indices {pull}52356[#52356] (issue: {issue}29938[#29938])\n+\n+Mapping::\n+* Introduce a `constant_keyword` field. {pull}49713[#49713]\n+\n+SQL::\n+* constant_keyword support {pull}53241[#53241] (issue: {issue}53016[#53016])\n+* Add optimisations for not-equalities {pull}51088[#51088] (issue: {issue}49637[#49637])\n+* Add support for passing query parameters in REST API calls {pull}51029[#51029] (issue: {issue}42916[#42916])\n+\n+Search::\n+* Introduce compound query {pull}52387[#52387] (issue: {issue}51967[#51967])\n+* Add a cluster setting to disallow expensive queries {pull}51385[#51385] (issue: {issue}29050[#29050])\n+* Add new x-pack endpoints to track the progress of a search asynchronously {pull}49931[#49931] (issue: {issue}49091[#49091])\n+\n+\n+\n+[[enhancement-7.7.0]]\n+[float]\n+=== Enhancements\n+\n+Aggregations::\n+* Try to save memory on aggregations {pull}53793[#53793]\n+* Speed up partial reduce of terms aggregations {pull}53216[#53216] (issue: {issue}51857[#51857])\n+* Simplify SiblingPipelineAggregator {pull}53144[#53144]\n+* Add histogram field type support to boxplot aggs {pull}52265[#52265] (issues: {issue}33112[#33112], {issue}52233[#52233])\n+* Percentiles aggregation validation checks for range {pull}51871[#51871] (issue: {issue}51808[#51808])\n+* Begin moving date_histogram to offset rounding (take two) {pull}51271[#51271] (issues: {issue}50609[#50609], {issue}50873[#50873])\n+* Password-protected Keystore Feature Branch PR {pull}51123[#51123] (issues: {issue}32691[#32691], {issue}49340[#49340])\n+* Implement top_metrics agg {pull}51155[#51155] (issue: {issue}48069[#48069])\n+* Bucket aggregation circuit breaker optimization. {pull}46751[#46751]\n+\n+Analysis::\n+* Removes old Lucene's experimental flag from analyzer documentations {pull}53217[#53217]\n+\n+Authentication::\n+* Add exception metadata for disabled features {pull}52811[#52811] (issues: {issue}47759[#47759], {issue}52311[#52311], {issue}55255[#55255])\n+* Validate role templates before saving role mapping {pull}52636[#52636] (issue: {issue}48773[#48773])\n+* Add support for secondary authentication {pull}52093[#52093]\n+* Expose API key name to the ingest pipeline {pull}51305[#51305] (issues: {issue}46847[#46847], {issue}49106[#49106])\n+* Disallow Password Change when authenticated by Token {pull}49694[#49694] (issue: {issue}48752[#48752])\n+\n+Authorization::\n+* Allow kibana_system to create and invalidate API keys on behalf of other users {pull}53824[#53824] (issue: {issue}48716[#48716])\n+* Add \"grant_api_key\" cluster privilege {pull}53527[#53527] (issues: {issue}48716[#48716], {issue}52886[#52886])\n+* Giving kibana user privileges to create custom link index {pull}53221[#53221] (issue: {issue}59305[#59305])\n+* [APM] Allow kibana to collect APM telemetry in background task {pull}52917[#52917] (issue: {issue}50757[#50757])\n+* Add the new 'maintenance' privilege containing 4 actions (#29998) {pull}50643[#50643]\n+\n+Cluster Coordination::\n+* Describe STALE_STATE_CONFIG in ClusterFormationFH {pull}53878[#53878] (issue: {issue}53734[#53734])\n+\n+Distributed::\n+* Introduce formal role for remote cluster client {pull}53924[#53924]\n+* Shortcut query phase using the results of other shards {pull}51852[#51852] (issues: {issue}49601[#49601], {issue}51708[#51708])\n+* Flush instead of synced-flush inactive shards {pull}49126[#49126] (issues: {issue}31965[#31965], {issue}48430[#48430])\n+\n+Engine::\n+* Restore off-heap loading for term dictionary in ReadOnlyEngine {pull}53713[#53713] (issues: {issue}43158[#43158], {issue}51247[#51247])\n+* Separate translog from index deletion conditions {pull}52556[#52556]\n+* Always rewrite search shard request outside of the search thread pool {pull}51708[#51708] (issue: {issue}49601[#49601])\n+* Move the terms index of `_id` off-heap. {pull}52405[#52405] (issue: {issue}42838[#42838])\n+* Cache completion stats between refreshes {pull}51991[#51991] (issue: {issue}51915[#51915])\n+* Use local checkpoint to calculate min translog gen for recovery {pull}51905[#51905] (issue: {issue}49970[#49970])\n+\n+Features/CAT APIs::\n+* /_cat/shards support path stats {pull}53461[#53461]\n+* Allow _cat indices & aliases to use indices options {pull}53248[#53248] (issue: {issue}52304[#52304])\n+\n+Features/Features::\n+* Enable deprecation checks for removed settings {pull}53317[#53317]\n+\n+Features/ILM+SLM::\n+* Hide ILM & SLM history aliases {pull}53564[#53564]\n+* Avoid race condition in ILMHistorySotre {pull}53039[#53039] (issues: {issue}50353[#50353], {issue}52853[#52853])\n+* Make FreezeStep retryable {pull}52540[#52540]\n+* Make DeleteStep retryable {pull}52494[#52494]\n+* Allow forcemerge in the hot phase for ILM policies {pull}52073[#52073] (issue: {issue}43165[#43165])\n+* Stop policy on last PhaseCompleteStep instead of TerminalPolic\u2026 {pull}51631[#51631] (issue: {issue}48431[#48431])\n+* Convert ILM and SLM histories into hidden indices {pull}51456[#51456]\n+* Make UpdateSettingsStep retryable {pull}51235[#51235] (issues: {issue}44135[#44135], {issue}48183[#48183])\n+* Expose master timeout for ILM actions {pull}51130[#51130] (issue: {issue}44136[#44136])\n+* Wait for active shards on rolled index in a separate step {pull}50718[#50718] (issues: {issue}44135[#44135], {issue}48183[#48183])\n+* Adding best_compression {pull}49974[#49974]\n+\n+Features/Indices APIs::\n+* Add IndexTemplateV2 to MetaData {pull}53753[#53753] (issue: {issue}53101[#53101])\n+* Add ComponentTemplate to MetaData {pull}53290[#53290] (issue: {issue}53101[#53101])\n+\n+Features/Ingest::\n+* Reduce log level for pipeline failure {pull}54097[#54097] (issue: {issue}51459[#51459])\n+* Support array for all string ingest processors {pull}53343[#53343] (issue: {issue}51087[#51087])\n+* Add empty_value parameter to CSV processor {pull}51567[#51567]\n+* Add pipeline name to ingest metadata {pull}50467[#50467] (issue: {issue}42106[#42106])\n+\n+Features/Java High Level REST Client::\n+* SourceExists HLRC uses GetSourceRequest instead of GetRequest {pull}51789[#51789] (issue: {issue}50885[#50885])\n+* Add async_search.submit to HLRC {pull}53592[#53592] (issue: {issue}49091[#49091])\n+* Add Get Source API to the HLRC {pull}50885[#50885] (issue: {issue}47678[#47678])\n+\n+Features/Monitoring::\n+* Secure password for monitoring HTTP exporter {pull}50919[#50919] (issue: {issue}50197[#50197])\n+* Validate SSL settings at parse time {pull}49196[#49196] (issue: {issue}47711[#47711])\n+\n+Features/Stats::\n+* Add analysis components and mapping types to the usage API. {pull}51031[#51031]\n+\n+Features/Watcher::\n+* Make watch history indices hidden {pull}52962[#52962] (issue: {issue}50251[#50251])\n+* Upgrade to the latest OWASP HTML sanitizer {pull}50765[#50765] (issue: {issue}50395[#50395])\n+\n+Infra/Core::\n+* Enable helpful null pointer exceptions {pull}54853[#54853]\n+* Allow keystore add to handle multiple settings {pull}54229[#54229] (issue: {issue}54191[#54191])\n+* Report parser name and location in XContent deprecation warnings {pull}53805[#53805]\n+* Report parser name and location in XContent deprecation warnings {pull}53752[#53752]\n+* Deprecate all variants of a ParseField with no replacement {pull}53722[#53722]\n+* Add a helper method to parse maps of objects {pull}53096[#53096]\n+* Allow specifying an exclusive set of fields on ObjectParser {pull}52893[#52893]\n+* Support joda style date patterns in 7.x {pull}52555[#52555]\n+* Implement hidden aliases {pull}52547[#52547] (issue: {issue}52304[#52304])\n+* Allow ObjectParsers to specify required sets of fields {pull}49661[#49661] (issue: {issue}48824[#48824])\n+\n+Infra/Logging::\n+* Capture stdout and stderr to log4j log {pull}50259[#50259] (issue: {issue}50156[#50156])\n+\n+Infra/Packaging::\n+* Introduce aarch64 Docker image {pull}53936[#53936] (issue: {issue}53914[#53914])\n+* Introduce jvm.options.d for customizing JVM options {pull}51882[#51882] (issue: {issue}51626[#51626])\n+\n+Infra/Plugins::\n+* Allow sha512 checksum without filename for maven plugins {pull}52668[#52668] (issue: {issue}52413[#52413])\n+\n+Infra/Scripting::\n+* Scripting: Context script cache unlimited compile {pull}53769[#53769] (issue: {issue}50152[#50152])\n+* Scripting: Increase ingest script cache defaults {pull}53765[#53765] (issue: {issue}50152[#50152])\n+* Scripting: Per-context script cache, default off (#52855) {pull}53756[#53756] (issues: {issue}50152[#50152], {issue}52855[#52855])\n+* Scripting: Per-context script cache, default off {pull}52855[#52855] (issue: {issue}50152[#50152])\n+* Improve Painless compilation performance for nested conditionals {pull}52056[#52056]\n+* Scripting: Add char position of script errors {pull}51069[#51069] (issue: {issue}50993[#50993])\n+\n+Infra/Settings::\n+* Allow keystore add-file to handle multiple settings {pull}54240[#54240] (issue: {issue}54191[#54191])\n+* Settings: AffixSettings as validator dependencies {pull}52973[#52973] (issue: {issue}52933[#52933])\n+\n+License::\n+* Simplify ml license checking with XpackLicenseState internals {pull}52684[#52684] (issue: {issue}52115[#52115])\n+* License removal leads back to a basic license {pull}52407[#52407] (issue: {issue}45022[#45022])\n+* Refactor license checking {pull}52118[#52118] (issue: {issue}51864[#51864])\n+* Add enterprise mode and refactor {pull}51864[#51864] (issue: {issue}51081[#51081])\n+\n+Machine Learning::\n+* Stratified cross validation split for classification {pull}54087[#54087]\n+* Data frame analytics data counts {pull}53998[#53998]\n+* Verify that the field is aggregatable before attempting cardinality aggregation {pull}53874[#53874] (issue: {issue}53876[#53876])\n+* Adds multi-class feature importance support {pull}53803[#53803]\n+* Data frame analytics analysis stats {pull}53788[#53788]\n+* Add a model memory estimation endpoint for anomaly detection {pull}53507[#53507] (issue: {issue}53219[#53219])\n+* [Inference] adds new default_field_map field to trained models {pull}53294[#53294]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "originalPosition": 273}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNTg1ODM2", "url": "https://github.com/elastic/elasticsearch/pull/55019#pullrequestreview-391585836", "createdAt": "2020-04-10T18:14:08Z", "commit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxODoxNDowOVrOGEB59Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxODoxNDowOVrOGEB59Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg3ODcwOQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * [Inference] Add support for multi-value leaves to the tree model {pull}52531[#52531]\n          \n          \n            \n            * Add support for multi-value leaves to the tree model {pull}52531[#52531]", "url": "https://github.com/elastic/elasticsearch/pull/55019#discussion_r406878709", "createdAt": "2020-04-10T18:14:09Z", "author": {"login": "jrodewig"}, "path": "docs/reference/release-notes/7.7.asciidoc", "diffHunk": "@@ -1,22 +1,612 @@\n [[release-notes-7.7.0]]\n == {es} version 7.7.0\n \n-coming[7.7.0]\n+Also see <<breaking-changes-7.7,Breaking changes in 7.7>>.\n \n [[breaking-7.7.0]]\n [float]\n === Breaking changes\n \n+Highlighting::\n+* Highlighters skip ignored keyword values {pull}53408[#53408] (issue: {issue}43800[#43800])\n+\n+Infra/Core::\n+* Remove DEBUG-level default logging from actions {pull}51459[#51459] (issue: {issue}51198[#51198])\n+\n Mapping::\n * Dynamic mappings in indices created on 8.0 and later have stricter validation at mapping update time and\n   results in a deprecation warning for indices created in Elasticsearch 7.7.0 and later.\n-  (e.g. incorrect analyzer settings or unknown field types). {pull}51233[#51233]\n+  (e.g. incorrect analyzer settings or unknown field types). {pull}51233[#51233] (issues: {issue}17411[#17411], {issue}24419[#24419])\n \n Search::\n-* A regression that allowed negative scores in a script_score query was corrected.\n-  A behaviour is restored that throws an error if script_score query produces\n-  a negative score {pull}52478[#52478].\n+* Make range query rounding consistent {pull}50237[#50237] (issue: {issue}50009[#50009])\n * Pipeline aggregation validation errors that used to return HTTP\n   500s/Internal Server Errors now return 400/Bad Request {pull}53669[#53669].\n   As a bonus we now return a list of validation errors rather than returning\n   the first one we encounter.\n+\n+\n+\n+[[breaking-java-7.7.0]]\n+[float]\n+=== Breaking Java changes\n+\n+Infra/Core::\n+* Fix ActionListener.map exception handling {pull}50886[#50886]\n+\n+Machine Learning::\n+* Add expected input field type to trained model config {pull}53083[#53083]\n+\n+Transform::\n+* Enhance the output of preview to return full destination index details {pull}53572[#53572]\n+\n+\n+\n+[[deprecation-7.7.0]]\n+[float]\n+=== Deprecations\n+\n+Allocation::\n+* Deprecated support for delaying state recovery pending master nodes {pull}53646[#53646] (issue: {issue}51806[#51806])\n+\n+Authentication::\n+* Add warnings for invalid realm order config (#51195) {pull}51515[#51515]\n+* Deprecate timeout.tcp_read AD/LDAP realm setting {pull}47305[#47305] (issue: {issue}46028[#46028])\n+\n+Engine::\n+* Deprecate translog retention settings {pull}51588[#51588] (issues: {issue}45473[#45473], {issue}50775[#50775])\n+\n+Features/Features::\n+* Add cluster.remote.connect to deprecation info API {pull}54142[#54142] (issue: {issue}53924[#53924])\n+\n+Infra/Core::\n+* Add deprecation check for listener thread pool {pull}53438[#53438] (issues: {issue}53049[#53049], {issue}53317[#53317])\n+* Deprecate the logstash enabled setting {pull}53367[#53367]\n+* Deprecate the listener thread pool {pull}53266[#53266] (issue: {issue}53049[#53049])\n+* Deprecate creation of dot-prefixed index names except for hidden and system indices {pull}49959[#49959]\n+\n+Infra/REST API::\n+* Deprecate undocumented alternatives to the nodes hot threads API (#52640) {pull}52930[#52930] (issue: {issue}52640[#52640])\n+\n+Machine Learning::\n+* Renaming inference processor field field_mappings to new name field_map {pull}53433[#53433]\n+\n+Search::\n+* Emit deprecation warning when TermsLookup contains a type {pull}53731[#53731] (issue: {issue}41059[#41059])\n+* Deprecate BoolQueryBuilder's mustNot field {pull}53125[#53125]\n+\n+\n+\n+[[feature-7.7.0]]\n+[float]\n+=== New features\n+\n+Aggregations::\n+* Preserve metric types in top_metrics {pull}53288[#53288]\n+* Support multiple metrics in `top_metrics` agg {pull}52965[#52965] (issue: {issue}51813[#51813])\n+* Add size support to `top_metrics` {pull}52662[#52662] (issue: {issue}51813[#51813])\n+* HLRC support for string_stats {pull}52163[#52163]\n+* Add Boxplot Aggregation {pull}51948[#51948] (issue: {issue}33112[#33112])\n+\n+Analysis::\n+* Add nori_number token filter in analysis-nori {pull}53583[#53583]\n+\n+Authentication::\n+* Create API Key on behalf of other user {pull}52886[#52886] (issue: {issue}48716[#48716])\n+\n+Geo::\n+* Add support for distance queries on shape queries {pull}53468[#53468]\n+* Add support for distance queries on geo_shape queries {pull}53466[#53466] (issues: {issue}13351[#13351], {issue}39237[#39237])\n+* Add support for multipoint shape queries {pull}52564[#52564] (issue: {issue}52133[#52133])\n+* Add support for multipoint geoshape queries {pull}52133[#52133] (issue: {issue}37318[#37318])\n+\n+Infra/Core::\n+* Implement hidden indices {pull}50452[#50452] (issues: {issue}50251[#50251], {issue}50665[#50665], {issue}50762[#50762])\n+\n+Infra/Packaging::\n+* Introduce aarch64 packaging {pull}53914[#53914]\n+\n+Machine Learning::\n+* Implement ILM policy for .ml-state* indices {pull}52356[#52356] (issue: {issue}29938[#29938])\n+\n+Mapping::\n+* Introduce a `constant_keyword` field. {pull}49713[#49713]\n+\n+SQL::\n+* constant_keyword support {pull}53241[#53241] (issue: {issue}53016[#53016])\n+* Add optimisations for not-equalities {pull}51088[#51088] (issue: {issue}49637[#49637])\n+* Add support for passing query parameters in REST API calls {pull}51029[#51029] (issue: {issue}42916[#42916])\n+\n+Search::\n+* Introduce compound query {pull}52387[#52387] (issue: {issue}51967[#51967])\n+* Add a cluster setting to disallow expensive queries {pull}51385[#51385] (issue: {issue}29050[#29050])\n+* Add new x-pack endpoints to track the progress of a search asynchronously {pull}49931[#49931] (issue: {issue}49091[#49091])\n+\n+\n+\n+[[enhancement-7.7.0]]\n+[float]\n+=== Enhancements\n+\n+Aggregations::\n+* Try to save memory on aggregations {pull}53793[#53793]\n+* Speed up partial reduce of terms aggregations {pull}53216[#53216] (issue: {issue}51857[#51857])\n+* Simplify SiblingPipelineAggregator {pull}53144[#53144]\n+* Add histogram field type support to boxplot aggs {pull}52265[#52265] (issues: {issue}33112[#33112], {issue}52233[#52233])\n+* Percentiles aggregation validation checks for range {pull}51871[#51871] (issue: {issue}51808[#51808])\n+* Begin moving date_histogram to offset rounding (take two) {pull}51271[#51271] (issues: {issue}50609[#50609], {issue}50873[#50873])\n+* Password-protected Keystore Feature Branch PR {pull}51123[#51123] (issues: {issue}32691[#32691], {issue}49340[#49340])\n+* Implement top_metrics agg {pull}51155[#51155] (issue: {issue}48069[#48069])\n+* Bucket aggregation circuit breaker optimization. {pull}46751[#46751]\n+\n+Analysis::\n+* Removes old Lucene's experimental flag from analyzer documentations {pull}53217[#53217]\n+\n+Authentication::\n+* Add exception metadata for disabled features {pull}52811[#52811] (issues: {issue}47759[#47759], {issue}52311[#52311], {issue}55255[#55255])\n+* Validate role templates before saving role mapping {pull}52636[#52636] (issue: {issue}48773[#48773])\n+* Add support for secondary authentication {pull}52093[#52093]\n+* Expose API key name to the ingest pipeline {pull}51305[#51305] (issues: {issue}46847[#46847], {issue}49106[#49106])\n+* Disallow Password Change when authenticated by Token {pull}49694[#49694] (issue: {issue}48752[#48752])\n+\n+Authorization::\n+* Allow kibana_system to create and invalidate API keys on behalf of other users {pull}53824[#53824] (issue: {issue}48716[#48716])\n+* Add \"grant_api_key\" cluster privilege {pull}53527[#53527] (issues: {issue}48716[#48716], {issue}52886[#52886])\n+* Giving kibana user privileges to create custom link index {pull}53221[#53221] (issue: {issue}59305[#59305])\n+* [APM] Allow kibana to collect APM telemetry in background task {pull}52917[#52917] (issue: {issue}50757[#50757])\n+* Add the new 'maintenance' privilege containing 4 actions (#29998) {pull}50643[#50643]\n+\n+Cluster Coordination::\n+* Describe STALE_STATE_CONFIG in ClusterFormationFH {pull}53878[#53878] (issue: {issue}53734[#53734])\n+\n+Distributed::\n+* Introduce formal role for remote cluster client {pull}53924[#53924]\n+* Shortcut query phase using the results of other shards {pull}51852[#51852] (issues: {issue}49601[#49601], {issue}51708[#51708])\n+* Flush instead of synced-flush inactive shards {pull}49126[#49126] (issues: {issue}31965[#31965], {issue}48430[#48430])\n+\n+Engine::\n+* Restore off-heap loading for term dictionary in ReadOnlyEngine {pull}53713[#53713] (issues: {issue}43158[#43158], {issue}51247[#51247])\n+* Separate translog from index deletion conditions {pull}52556[#52556]\n+* Always rewrite search shard request outside of the search thread pool {pull}51708[#51708] (issue: {issue}49601[#49601])\n+* Move the terms index of `_id` off-heap. {pull}52405[#52405] (issue: {issue}42838[#42838])\n+* Cache completion stats between refreshes {pull}51991[#51991] (issue: {issue}51915[#51915])\n+* Use local checkpoint to calculate min translog gen for recovery {pull}51905[#51905] (issue: {issue}49970[#49970])\n+\n+Features/CAT APIs::\n+* /_cat/shards support path stats {pull}53461[#53461]\n+* Allow _cat indices & aliases to use indices options {pull}53248[#53248] (issue: {issue}52304[#52304])\n+\n+Features/Features::\n+* Enable deprecation checks for removed settings {pull}53317[#53317]\n+\n+Features/ILM+SLM::\n+* Hide ILM & SLM history aliases {pull}53564[#53564]\n+* Avoid race condition in ILMHistorySotre {pull}53039[#53039] (issues: {issue}50353[#50353], {issue}52853[#52853])\n+* Make FreezeStep retryable {pull}52540[#52540]\n+* Make DeleteStep retryable {pull}52494[#52494]\n+* Allow forcemerge in the hot phase for ILM policies {pull}52073[#52073] (issue: {issue}43165[#43165])\n+* Stop policy on last PhaseCompleteStep instead of TerminalPolic\u2026 {pull}51631[#51631] (issue: {issue}48431[#48431])\n+* Convert ILM and SLM histories into hidden indices {pull}51456[#51456]\n+* Make UpdateSettingsStep retryable {pull}51235[#51235] (issues: {issue}44135[#44135], {issue}48183[#48183])\n+* Expose master timeout for ILM actions {pull}51130[#51130] (issue: {issue}44136[#44136])\n+* Wait for active shards on rolled index in a separate step {pull}50718[#50718] (issues: {issue}44135[#44135], {issue}48183[#48183])\n+* Adding best_compression {pull}49974[#49974]\n+\n+Features/Indices APIs::\n+* Add IndexTemplateV2 to MetaData {pull}53753[#53753] (issue: {issue}53101[#53101])\n+* Add ComponentTemplate to MetaData {pull}53290[#53290] (issue: {issue}53101[#53101])\n+\n+Features/Ingest::\n+* Reduce log level for pipeline failure {pull}54097[#54097] (issue: {issue}51459[#51459])\n+* Support array for all string ingest processors {pull}53343[#53343] (issue: {issue}51087[#51087])\n+* Add empty_value parameter to CSV processor {pull}51567[#51567]\n+* Add pipeline name to ingest metadata {pull}50467[#50467] (issue: {issue}42106[#42106])\n+\n+Features/Java High Level REST Client::\n+* SourceExists HLRC uses GetSourceRequest instead of GetRequest {pull}51789[#51789] (issue: {issue}50885[#50885])\n+* Add async_search.submit to HLRC {pull}53592[#53592] (issue: {issue}49091[#49091])\n+* Add Get Source API to the HLRC {pull}50885[#50885] (issue: {issue}47678[#47678])\n+\n+Features/Monitoring::\n+* Secure password for monitoring HTTP exporter {pull}50919[#50919] (issue: {issue}50197[#50197])\n+* Validate SSL settings at parse time {pull}49196[#49196] (issue: {issue}47711[#47711])\n+\n+Features/Stats::\n+* Add analysis components and mapping types to the usage API. {pull}51031[#51031]\n+\n+Features/Watcher::\n+* Make watch history indices hidden {pull}52962[#52962] (issue: {issue}50251[#50251])\n+* Upgrade to the latest OWASP HTML sanitizer {pull}50765[#50765] (issue: {issue}50395[#50395])\n+\n+Infra/Core::\n+* Enable helpful null pointer exceptions {pull}54853[#54853]\n+* Allow keystore add to handle multiple settings {pull}54229[#54229] (issue: {issue}54191[#54191])\n+* Report parser name and location in XContent deprecation warnings {pull}53805[#53805]\n+* Report parser name and location in XContent deprecation warnings {pull}53752[#53752]\n+* Deprecate all variants of a ParseField with no replacement {pull}53722[#53722]\n+* Add a helper method to parse maps of objects {pull}53096[#53096]\n+* Allow specifying an exclusive set of fields on ObjectParser {pull}52893[#52893]\n+* Support joda style date patterns in 7.x {pull}52555[#52555]\n+* Implement hidden aliases {pull}52547[#52547] (issue: {issue}52304[#52304])\n+* Allow ObjectParsers to specify required sets of fields {pull}49661[#49661] (issue: {issue}48824[#48824])\n+\n+Infra/Logging::\n+* Capture stdout and stderr to log4j log {pull}50259[#50259] (issue: {issue}50156[#50156])\n+\n+Infra/Packaging::\n+* Introduce aarch64 Docker image {pull}53936[#53936] (issue: {issue}53914[#53914])\n+* Introduce jvm.options.d for customizing JVM options {pull}51882[#51882] (issue: {issue}51626[#51626])\n+\n+Infra/Plugins::\n+* Allow sha512 checksum without filename for maven plugins {pull}52668[#52668] (issue: {issue}52413[#52413])\n+\n+Infra/Scripting::\n+* Scripting: Context script cache unlimited compile {pull}53769[#53769] (issue: {issue}50152[#50152])\n+* Scripting: Increase ingest script cache defaults {pull}53765[#53765] (issue: {issue}50152[#50152])\n+* Scripting: Per-context script cache, default off (#52855) {pull}53756[#53756] (issues: {issue}50152[#50152], {issue}52855[#52855])\n+* Scripting: Per-context script cache, default off {pull}52855[#52855] (issue: {issue}50152[#50152])\n+* Improve Painless compilation performance for nested conditionals {pull}52056[#52056]\n+* Scripting: Add char position of script errors {pull}51069[#51069] (issue: {issue}50993[#50993])\n+\n+Infra/Settings::\n+* Allow keystore add-file to handle multiple settings {pull}54240[#54240] (issue: {issue}54191[#54191])\n+* Settings: AffixSettings as validator dependencies {pull}52973[#52973] (issue: {issue}52933[#52933])\n+\n+License::\n+* Simplify ml license checking with XpackLicenseState internals {pull}52684[#52684] (issue: {issue}52115[#52115])\n+* License removal leads back to a basic license {pull}52407[#52407] (issue: {issue}45022[#45022])\n+* Refactor license checking {pull}52118[#52118] (issue: {issue}51864[#51864])\n+* Add enterprise mode and refactor {pull}51864[#51864] (issue: {issue}51081[#51081])\n+\n+Machine Learning::\n+* Stratified cross validation split for classification {pull}54087[#54087]\n+* Data frame analytics data counts {pull}53998[#53998]\n+* Verify that the field is aggregatable before attempting cardinality aggregation {pull}53874[#53874] (issue: {issue}53876[#53876])\n+* Adds multi-class feature importance support {pull}53803[#53803]\n+* Data frame analytics analysis stats {pull}53788[#53788]\n+* Add a model memory estimation endpoint for anomaly detection {pull}53507[#53507] (issue: {issue}53219[#53219])\n+* [Inference] adds new default_field_map field to trained models {pull}53294[#53294]\n+* Improve DF analytics audits and logging {pull}53179[#53179]\n+* Add indices_options to datafeed config and update {pull}52793[#52793] (issue: {issue}48056[#48056])\n+* Parse and report memory usage for DF Analytics {pull}52778[#52778]\n+* Adds the class_assignment_objective parameter to classification {pull}52763[#52763] (issue: {issue}52427[#52427])\n+* Add reason to DataFrameAnalyticsTask updateState log message {pull}52659[#52659] (issue: {issue}52654[#52654])\n+* [Inference] Add support for multi-value leaves to the tree model {pull}52531[#52531]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "originalPosition": 279}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNTg1OTkx", "url": "https://github.com/elastic/elasticsearch/pull/55019#pullrequestreview-391585991", "createdAt": "2020-04-10T18:14:27Z", "commit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxODoxNDoyOFrOGEB6cA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxODoxNDoyOFrOGEB6cA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg3ODgzMg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * [Inference] add tags url param to GET {pull}51330[#51330]\n          \n          \n            \n            * Add tags url param to GET {pull}51330[#51330]", "url": "https://github.com/elastic/elasticsearch/pull/55019#discussion_r406878832", "createdAt": "2020-04-10T18:14:28Z", "author": {"login": "jrodewig"}, "path": "docs/reference/release-notes/7.7.asciidoc", "diffHunk": "@@ -1,22 +1,612 @@\n [[release-notes-7.7.0]]\n == {es} version 7.7.0\n \n-coming[7.7.0]\n+Also see <<breaking-changes-7.7,Breaking changes in 7.7>>.\n \n [[breaking-7.7.0]]\n [float]\n === Breaking changes\n \n+Highlighting::\n+* Highlighters skip ignored keyword values {pull}53408[#53408] (issue: {issue}43800[#43800])\n+\n+Infra/Core::\n+* Remove DEBUG-level default logging from actions {pull}51459[#51459] (issue: {issue}51198[#51198])\n+\n Mapping::\n * Dynamic mappings in indices created on 8.0 and later have stricter validation at mapping update time and\n   results in a deprecation warning for indices created in Elasticsearch 7.7.0 and later.\n-  (e.g. incorrect analyzer settings or unknown field types). {pull}51233[#51233]\n+  (e.g. incorrect analyzer settings or unknown field types). {pull}51233[#51233] (issues: {issue}17411[#17411], {issue}24419[#24419])\n \n Search::\n-* A regression that allowed negative scores in a script_score query was corrected.\n-  A behaviour is restored that throws an error if script_score query produces\n-  a negative score {pull}52478[#52478].\n+* Make range query rounding consistent {pull}50237[#50237] (issue: {issue}50009[#50009])\n * Pipeline aggregation validation errors that used to return HTTP\n   500s/Internal Server Errors now return 400/Bad Request {pull}53669[#53669].\n   As a bonus we now return a list of validation errors rather than returning\n   the first one we encounter.\n+\n+\n+\n+[[breaking-java-7.7.0]]\n+[float]\n+=== Breaking Java changes\n+\n+Infra/Core::\n+* Fix ActionListener.map exception handling {pull}50886[#50886]\n+\n+Machine Learning::\n+* Add expected input field type to trained model config {pull}53083[#53083]\n+\n+Transform::\n+* Enhance the output of preview to return full destination index details {pull}53572[#53572]\n+\n+\n+\n+[[deprecation-7.7.0]]\n+[float]\n+=== Deprecations\n+\n+Allocation::\n+* Deprecated support for delaying state recovery pending master nodes {pull}53646[#53646] (issue: {issue}51806[#51806])\n+\n+Authentication::\n+* Add warnings for invalid realm order config (#51195) {pull}51515[#51515]\n+* Deprecate timeout.tcp_read AD/LDAP realm setting {pull}47305[#47305] (issue: {issue}46028[#46028])\n+\n+Engine::\n+* Deprecate translog retention settings {pull}51588[#51588] (issues: {issue}45473[#45473], {issue}50775[#50775])\n+\n+Features/Features::\n+* Add cluster.remote.connect to deprecation info API {pull}54142[#54142] (issue: {issue}53924[#53924])\n+\n+Infra/Core::\n+* Add deprecation check for listener thread pool {pull}53438[#53438] (issues: {issue}53049[#53049], {issue}53317[#53317])\n+* Deprecate the logstash enabled setting {pull}53367[#53367]\n+* Deprecate the listener thread pool {pull}53266[#53266] (issue: {issue}53049[#53049])\n+* Deprecate creation of dot-prefixed index names except for hidden and system indices {pull}49959[#49959]\n+\n+Infra/REST API::\n+* Deprecate undocumented alternatives to the nodes hot threads API (#52640) {pull}52930[#52930] (issue: {issue}52640[#52640])\n+\n+Machine Learning::\n+* Renaming inference processor field field_mappings to new name field_map {pull}53433[#53433]\n+\n+Search::\n+* Emit deprecation warning when TermsLookup contains a type {pull}53731[#53731] (issue: {issue}41059[#41059])\n+* Deprecate BoolQueryBuilder's mustNot field {pull}53125[#53125]\n+\n+\n+\n+[[feature-7.7.0]]\n+[float]\n+=== New features\n+\n+Aggregations::\n+* Preserve metric types in top_metrics {pull}53288[#53288]\n+* Support multiple metrics in `top_metrics` agg {pull}52965[#52965] (issue: {issue}51813[#51813])\n+* Add size support to `top_metrics` {pull}52662[#52662] (issue: {issue}51813[#51813])\n+* HLRC support for string_stats {pull}52163[#52163]\n+* Add Boxplot Aggregation {pull}51948[#51948] (issue: {issue}33112[#33112])\n+\n+Analysis::\n+* Add nori_number token filter in analysis-nori {pull}53583[#53583]\n+\n+Authentication::\n+* Create API Key on behalf of other user {pull}52886[#52886] (issue: {issue}48716[#48716])\n+\n+Geo::\n+* Add support for distance queries on shape queries {pull}53468[#53468]\n+* Add support for distance queries on geo_shape queries {pull}53466[#53466] (issues: {issue}13351[#13351], {issue}39237[#39237])\n+* Add support for multipoint shape queries {pull}52564[#52564] (issue: {issue}52133[#52133])\n+* Add support for multipoint geoshape queries {pull}52133[#52133] (issue: {issue}37318[#37318])\n+\n+Infra/Core::\n+* Implement hidden indices {pull}50452[#50452] (issues: {issue}50251[#50251], {issue}50665[#50665], {issue}50762[#50762])\n+\n+Infra/Packaging::\n+* Introduce aarch64 packaging {pull}53914[#53914]\n+\n+Machine Learning::\n+* Implement ILM policy for .ml-state* indices {pull}52356[#52356] (issue: {issue}29938[#29938])\n+\n+Mapping::\n+* Introduce a `constant_keyword` field. {pull}49713[#49713]\n+\n+SQL::\n+* constant_keyword support {pull}53241[#53241] (issue: {issue}53016[#53016])\n+* Add optimisations for not-equalities {pull}51088[#51088] (issue: {issue}49637[#49637])\n+* Add support for passing query parameters in REST API calls {pull}51029[#51029] (issue: {issue}42916[#42916])\n+\n+Search::\n+* Introduce compound query {pull}52387[#52387] (issue: {issue}51967[#51967])\n+* Add a cluster setting to disallow expensive queries {pull}51385[#51385] (issue: {issue}29050[#29050])\n+* Add new x-pack endpoints to track the progress of a search asynchronously {pull}49931[#49931] (issue: {issue}49091[#49091])\n+\n+\n+\n+[[enhancement-7.7.0]]\n+[float]\n+=== Enhancements\n+\n+Aggregations::\n+* Try to save memory on aggregations {pull}53793[#53793]\n+* Speed up partial reduce of terms aggregations {pull}53216[#53216] (issue: {issue}51857[#51857])\n+* Simplify SiblingPipelineAggregator {pull}53144[#53144]\n+* Add histogram field type support to boxplot aggs {pull}52265[#52265] (issues: {issue}33112[#33112], {issue}52233[#52233])\n+* Percentiles aggregation validation checks for range {pull}51871[#51871] (issue: {issue}51808[#51808])\n+* Begin moving date_histogram to offset rounding (take two) {pull}51271[#51271] (issues: {issue}50609[#50609], {issue}50873[#50873])\n+* Password-protected Keystore Feature Branch PR {pull}51123[#51123] (issues: {issue}32691[#32691], {issue}49340[#49340])\n+* Implement top_metrics agg {pull}51155[#51155] (issue: {issue}48069[#48069])\n+* Bucket aggregation circuit breaker optimization. {pull}46751[#46751]\n+\n+Analysis::\n+* Removes old Lucene's experimental flag from analyzer documentations {pull}53217[#53217]\n+\n+Authentication::\n+* Add exception metadata for disabled features {pull}52811[#52811] (issues: {issue}47759[#47759], {issue}52311[#52311], {issue}55255[#55255])\n+* Validate role templates before saving role mapping {pull}52636[#52636] (issue: {issue}48773[#48773])\n+* Add support for secondary authentication {pull}52093[#52093]\n+* Expose API key name to the ingest pipeline {pull}51305[#51305] (issues: {issue}46847[#46847], {issue}49106[#49106])\n+* Disallow Password Change when authenticated by Token {pull}49694[#49694] (issue: {issue}48752[#48752])\n+\n+Authorization::\n+* Allow kibana_system to create and invalidate API keys on behalf of other users {pull}53824[#53824] (issue: {issue}48716[#48716])\n+* Add \"grant_api_key\" cluster privilege {pull}53527[#53527] (issues: {issue}48716[#48716], {issue}52886[#52886])\n+* Giving kibana user privileges to create custom link index {pull}53221[#53221] (issue: {issue}59305[#59305])\n+* [APM] Allow kibana to collect APM telemetry in background task {pull}52917[#52917] (issue: {issue}50757[#50757])\n+* Add the new 'maintenance' privilege containing 4 actions (#29998) {pull}50643[#50643]\n+\n+Cluster Coordination::\n+* Describe STALE_STATE_CONFIG in ClusterFormationFH {pull}53878[#53878] (issue: {issue}53734[#53734])\n+\n+Distributed::\n+* Introduce formal role for remote cluster client {pull}53924[#53924]\n+* Shortcut query phase using the results of other shards {pull}51852[#51852] (issues: {issue}49601[#49601], {issue}51708[#51708])\n+* Flush instead of synced-flush inactive shards {pull}49126[#49126] (issues: {issue}31965[#31965], {issue}48430[#48430])\n+\n+Engine::\n+* Restore off-heap loading for term dictionary in ReadOnlyEngine {pull}53713[#53713] (issues: {issue}43158[#43158], {issue}51247[#51247])\n+* Separate translog from index deletion conditions {pull}52556[#52556]\n+* Always rewrite search shard request outside of the search thread pool {pull}51708[#51708] (issue: {issue}49601[#49601])\n+* Move the terms index of `_id` off-heap. {pull}52405[#52405] (issue: {issue}42838[#42838])\n+* Cache completion stats between refreshes {pull}51991[#51991] (issue: {issue}51915[#51915])\n+* Use local checkpoint to calculate min translog gen for recovery {pull}51905[#51905] (issue: {issue}49970[#49970])\n+\n+Features/CAT APIs::\n+* /_cat/shards support path stats {pull}53461[#53461]\n+* Allow _cat indices & aliases to use indices options {pull}53248[#53248] (issue: {issue}52304[#52304])\n+\n+Features/Features::\n+* Enable deprecation checks for removed settings {pull}53317[#53317]\n+\n+Features/ILM+SLM::\n+* Hide ILM & SLM history aliases {pull}53564[#53564]\n+* Avoid race condition in ILMHistorySotre {pull}53039[#53039] (issues: {issue}50353[#50353], {issue}52853[#52853])\n+* Make FreezeStep retryable {pull}52540[#52540]\n+* Make DeleteStep retryable {pull}52494[#52494]\n+* Allow forcemerge in the hot phase for ILM policies {pull}52073[#52073] (issue: {issue}43165[#43165])\n+* Stop policy on last PhaseCompleteStep instead of TerminalPolic\u2026 {pull}51631[#51631] (issue: {issue}48431[#48431])\n+* Convert ILM and SLM histories into hidden indices {pull}51456[#51456]\n+* Make UpdateSettingsStep retryable {pull}51235[#51235] (issues: {issue}44135[#44135], {issue}48183[#48183])\n+* Expose master timeout for ILM actions {pull}51130[#51130] (issue: {issue}44136[#44136])\n+* Wait for active shards on rolled index in a separate step {pull}50718[#50718] (issues: {issue}44135[#44135], {issue}48183[#48183])\n+* Adding best_compression {pull}49974[#49974]\n+\n+Features/Indices APIs::\n+* Add IndexTemplateV2 to MetaData {pull}53753[#53753] (issue: {issue}53101[#53101])\n+* Add ComponentTemplate to MetaData {pull}53290[#53290] (issue: {issue}53101[#53101])\n+\n+Features/Ingest::\n+* Reduce log level for pipeline failure {pull}54097[#54097] (issue: {issue}51459[#51459])\n+* Support array for all string ingest processors {pull}53343[#53343] (issue: {issue}51087[#51087])\n+* Add empty_value parameter to CSV processor {pull}51567[#51567]\n+* Add pipeline name to ingest metadata {pull}50467[#50467] (issue: {issue}42106[#42106])\n+\n+Features/Java High Level REST Client::\n+* SourceExists HLRC uses GetSourceRequest instead of GetRequest {pull}51789[#51789] (issue: {issue}50885[#50885])\n+* Add async_search.submit to HLRC {pull}53592[#53592] (issue: {issue}49091[#49091])\n+* Add Get Source API to the HLRC {pull}50885[#50885] (issue: {issue}47678[#47678])\n+\n+Features/Monitoring::\n+* Secure password for monitoring HTTP exporter {pull}50919[#50919] (issue: {issue}50197[#50197])\n+* Validate SSL settings at parse time {pull}49196[#49196] (issue: {issue}47711[#47711])\n+\n+Features/Stats::\n+* Add analysis components and mapping types to the usage API. {pull}51031[#51031]\n+\n+Features/Watcher::\n+* Make watch history indices hidden {pull}52962[#52962] (issue: {issue}50251[#50251])\n+* Upgrade to the latest OWASP HTML sanitizer {pull}50765[#50765] (issue: {issue}50395[#50395])\n+\n+Infra/Core::\n+* Enable helpful null pointer exceptions {pull}54853[#54853]\n+* Allow keystore add to handle multiple settings {pull}54229[#54229] (issue: {issue}54191[#54191])\n+* Report parser name and location in XContent deprecation warnings {pull}53805[#53805]\n+* Report parser name and location in XContent deprecation warnings {pull}53752[#53752]\n+* Deprecate all variants of a ParseField with no replacement {pull}53722[#53722]\n+* Add a helper method to parse maps of objects {pull}53096[#53096]\n+* Allow specifying an exclusive set of fields on ObjectParser {pull}52893[#52893]\n+* Support joda style date patterns in 7.x {pull}52555[#52555]\n+* Implement hidden aliases {pull}52547[#52547] (issue: {issue}52304[#52304])\n+* Allow ObjectParsers to specify required sets of fields {pull}49661[#49661] (issue: {issue}48824[#48824])\n+\n+Infra/Logging::\n+* Capture stdout and stderr to log4j log {pull}50259[#50259] (issue: {issue}50156[#50156])\n+\n+Infra/Packaging::\n+* Introduce aarch64 Docker image {pull}53936[#53936] (issue: {issue}53914[#53914])\n+* Introduce jvm.options.d for customizing JVM options {pull}51882[#51882] (issue: {issue}51626[#51626])\n+\n+Infra/Plugins::\n+* Allow sha512 checksum without filename for maven plugins {pull}52668[#52668] (issue: {issue}52413[#52413])\n+\n+Infra/Scripting::\n+* Scripting: Context script cache unlimited compile {pull}53769[#53769] (issue: {issue}50152[#50152])\n+* Scripting: Increase ingest script cache defaults {pull}53765[#53765] (issue: {issue}50152[#50152])\n+* Scripting: Per-context script cache, default off (#52855) {pull}53756[#53756] (issues: {issue}50152[#50152], {issue}52855[#52855])\n+* Scripting: Per-context script cache, default off {pull}52855[#52855] (issue: {issue}50152[#50152])\n+* Improve Painless compilation performance for nested conditionals {pull}52056[#52056]\n+* Scripting: Add char position of script errors {pull}51069[#51069] (issue: {issue}50993[#50993])\n+\n+Infra/Settings::\n+* Allow keystore add-file to handle multiple settings {pull}54240[#54240] (issue: {issue}54191[#54191])\n+* Settings: AffixSettings as validator dependencies {pull}52973[#52973] (issue: {issue}52933[#52933])\n+\n+License::\n+* Simplify ml license checking with XpackLicenseState internals {pull}52684[#52684] (issue: {issue}52115[#52115])\n+* License removal leads back to a basic license {pull}52407[#52407] (issue: {issue}45022[#45022])\n+* Refactor license checking {pull}52118[#52118] (issue: {issue}51864[#51864])\n+* Add enterprise mode and refactor {pull}51864[#51864] (issue: {issue}51081[#51081])\n+\n+Machine Learning::\n+* Stratified cross validation split for classification {pull}54087[#54087]\n+* Data frame analytics data counts {pull}53998[#53998]\n+* Verify that the field is aggregatable before attempting cardinality aggregation {pull}53874[#53874] (issue: {issue}53876[#53876])\n+* Adds multi-class feature importance support {pull}53803[#53803]\n+* Data frame analytics analysis stats {pull}53788[#53788]\n+* Add a model memory estimation endpoint for anomaly detection {pull}53507[#53507] (issue: {issue}53219[#53219])\n+* [Inference] adds new default_field_map field to trained models {pull}53294[#53294]\n+* Improve DF analytics audits and logging {pull}53179[#53179]\n+* Add indices_options to datafeed config and update {pull}52793[#52793] (issue: {issue}48056[#48056])\n+* Parse and report memory usage for DF Analytics {pull}52778[#52778]\n+* Adds the class_assignment_objective parameter to classification {pull}52763[#52763] (issue: {issue}52427[#52427])\n+* Add reason to DataFrameAnalyticsTask updateState log message {pull}52659[#52659] (issue: {issue}52654[#52654])\n+* [Inference] Add support for multi-value leaves to the tree model {pull}52531[#52531]\n+* Make ml internal indices hidden {pull}52423[#52423] (issue: {issue}52420[#52420])\n+* Add _cat/ml/data_frame/analytics API {pull}52260[#52260] (issue: {issue}51413[#51413])\n+* Adds feature importance option to inference processor {pull}52218[#52218]\n+* Switch poor categorization audit warning to use status field {pull}52195[#52195] (issues: {issue}50749[#50749], {issue}51146[#51146], {issue}51879[#51879])\n+* Retry persisting DF Analytics results {pull}52048[#52048]\n+* Improve multiline_start_pattern for CSV in find_file_structure {pull}51737[#51737]\n+* Add _cat/ml/trained_models API {pull}51529[#51529] (issue: {issue}51414[#51414])\n+* Add GET _cat/ml/datafeeds {pull}51500[#51500] (issue: {issue}51411[#51411])\n+* Use CSV ingest processor in find_file_structure ingest pipeline {pull}51492[#51492] (issue: {issue}56038[#56038])\n+* Add _cat/ml/anomaly_detectors API {pull}51364[#51364]\n+* [Inference] add tags url param to GET {pull}51330[#51330]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "originalPosition": 290}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNTg2MjA0", "url": "https://github.com/elastic/elasticsearch/pull/55019#pullrequestreview-391586204", "createdAt": "2020-04-10T18:14:54Z", "commit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxODoxNDo1NVrOGEB7Ow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxODoxNDo1NVrOGEB7Ow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg3OTAzNQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * [Rollup] add processing stats to record the time spent for processing results {pull}53770[#53770]\n          \n          \n            \n            * Add processing stats to record the time spent for processing results {pull}53770[#53770]", "url": "https://github.com/elastic/elasticsearch/pull/55019#discussion_r406879035", "createdAt": "2020-04-10T18:14:55Z", "author": {"login": "jrodewig"}, "path": "docs/reference/release-notes/7.7.asciidoc", "diffHunk": "@@ -1,22 +1,612 @@\n [[release-notes-7.7.0]]\n == {es} version 7.7.0\n \n-coming[7.7.0]\n+Also see <<breaking-changes-7.7,Breaking changes in 7.7>>.\n \n [[breaking-7.7.0]]\n [float]\n === Breaking changes\n \n+Highlighting::\n+* Highlighters skip ignored keyword values {pull}53408[#53408] (issue: {issue}43800[#43800])\n+\n+Infra/Core::\n+* Remove DEBUG-level default logging from actions {pull}51459[#51459] (issue: {issue}51198[#51198])\n+\n Mapping::\n * Dynamic mappings in indices created on 8.0 and later have stricter validation at mapping update time and\n   results in a deprecation warning for indices created in Elasticsearch 7.7.0 and later.\n-  (e.g. incorrect analyzer settings or unknown field types). {pull}51233[#51233]\n+  (e.g. incorrect analyzer settings or unknown field types). {pull}51233[#51233] (issues: {issue}17411[#17411], {issue}24419[#24419])\n \n Search::\n-* A regression that allowed negative scores in a script_score query was corrected.\n-  A behaviour is restored that throws an error if script_score query produces\n-  a negative score {pull}52478[#52478].\n+* Make range query rounding consistent {pull}50237[#50237] (issue: {issue}50009[#50009])\n * Pipeline aggregation validation errors that used to return HTTP\n   500s/Internal Server Errors now return 400/Bad Request {pull}53669[#53669].\n   As a bonus we now return a list of validation errors rather than returning\n   the first one we encounter.\n+\n+\n+\n+[[breaking-java-7.7.0]]\n+[float]\n+=== Breaking Java changes\n+\n+Infra/Core::\n+* Fix ActionListener.map exception handling {pull}50886[#50886]\n+\n+Machine Learning::\n+* Add expected input field type to trained model config {pull}53083[#53083]\n+\n+Transform::\n+* Enhance the output of preview to return full destination index details {pull}53572[#53572]\n+\n+\n+\n+[[deprecation-7.7.0]]\n+[float]\n+=== Deprecations\n+\n+Allocation::\n+* Deprecated support for delaying state recovery pending master nodes {pull}53646[#53646] (issue: {issue}51806[#51806])\n+\n+Authentication::\n+* Add warnings for invalid realm order config (#51195) {pull}51515[#51515]\n+* Deprecate timeout.tcp_read AD/LDAP realm setting {pull}47305[#47305] (issue: {issue}46028[#46028])\n+\n+Engine::\n+* Deprecate translog retention settings {pull}51588[#51588] (issues: {issue}45473[#45473], {issue}50775[#50775])\n+\n+Features/Features::\n+* Add cluster.remote.connect to deprecation info API {pull}54142[#54142] (issue: {issue}53924[#53924])\n+\n+Infra/Core::\n+* Add deprecation check for listener thread pool {pull}53438[#53438] (issues: {issue}53049[#53049], {issue}53317[#53317])\n+* Deprecate the logstash enabled setting {pull}53367[#53367]\n+* Deprecate the listener thread pool {pull}53266[#53266] (issue: {issue}53049[#53049])\n+* Deprecate creation of dot-prefixed index names except for hidden and system indices {pull}49959[#49959]\n+\n+Infra/REST API::\n+* Deprecate undocumented alternatives to the nodes hot threads API (#52640) {pull}52930[#52930] (issue: {issue}52640[#52640])\n+\n+Machine Learning::\n+* Renaming inference processor field field_mappings to new name field_map {pull}53433[#53433]\n+\n+Search::\n+* Emit deprecation warning when TermsLookup contains a type {pull}53731[#53731] (issue: {issue}41059[#41059])\n+* Deprecate BoolQueryBuilder's mustNot field {pull}53125[#53125]\n+\n+\n+\n+[[feature-7.7.0]]\n+[float]\n+=== New features\n+\n+Aggregations::\n+* Preserve metric types in top_metrics {pull}53288[#53288]\n+* Support multiple metrics in `top_metrics` agg {pull}52965[#52965] (issue: {issue}51813[#51813])\n+* Add size support to `top_metrics` {pull}52662[#52662] (issue: {issue}51813[#51813])\n+* HLRC support for string_stats {pull}52163[#52163]\n+* Add Boxplot Aggregation {pull}51948[#51948] (issue: {issue}33112[#33112])\n+\n+Analysis::\n+* Add nori_number token filter in analysis-nori {pull}53583[#53583]\n+\n+Authentication::\n+* Create API Key on behalf of other user {pull}52886[#52886] (issue: {issue}48716[#48716])\n+\n+Geo::\n+* Add support for distance queries on shape queries {pull}53468[#53468]\n+* Add support for distance queries on geo_shape queries {pull}53466[#53466] (issues: {issue}13351[#13351], {issue}39237[#39237])\n+* Add support for multipoint shape queries {pull}52564[#52564] (issue: {issue}52133[#52133])\n+* Add support for multipoint geoshape queries {pull}52133[#52133] (issue: {issue}37318[#37318])\n+\n+Infra/Core::\n+* Implement hidden indices {pull}50452[#50452] (issues: {issue}50251[#50251], {issue}50665[#50665], {issue}50762[#50762])\n+\n+Infra/Packaging::\n+* Introduce aarch64 packaging {pull}53914[#53914]\n+\n+Machine Learning::\n+* Implement ILM policy for .ml-state* indices {pull}52356[#52356] (issue: {issue}29938[#29938])\n+\n+Mapping::\n+* Introduce a `constant_keyword` field. {pull}49713[#49713]\n+\n+SQL::\n+* constant_keyword support {pull}53241[#53241] (issue: {issue}53016[#53016])\n+* Add optimisations for not-equalities {pull}51088[#51088] (issue: {issue}49637[#49637])\n+* Add support for passing query parameters in REST API calls {pull}51029[#51029] (issue: {issue}42916[#42916])\n+\n+Search::\n+* Introduce compound query {pull}52387[#52387] (issue: {issue}51967[#51967])\n+* Add a cluster setting to disallow expensive queries {pull}51385[#51385] (issue: {issue}29050[#29050])\n+* Add new x-pack endpoints to track the progress of a search asynchronously {pull}49931[#49931] (issue: {issue}49091[#49091])\n+\n+\n+\n+[[enhancement-7.7.0]]\n+[float]\n+=== Enhancements\n+\n+Aggregations::\n+* Try to save memory on aggregations {pull}53793[#53793]\n+* Speed up partial reduce of terms aggregations {pull}53216[#53216] (issue: {issue}51857[#51857])\n+* Simplify SiblingPipelineAggregator {pull}53144[#53144]\n+* Add histogram field type support to boxplot aggs {pull}52265[#52265] (issues: {issue}33112[#33112], {issue}52233[#52233])\n+* Percentiles aggregation validation checks for range {pull}51871[#51871] (issue: {issue}51808[#51808])\n+* Begin moving date_histogram to offset rounding (take two) {pull}51271[#51271] (issues: {issue}50609[#50609], {issue}50873[#50873])\n+* Password-protected Keystore Feature Branch PR {pull}51123[#51123] (issues: {issue}32691[#32691], {issue}49340[#49340])\n+* Implement top_metrics agg {pull}51155[#51155] (issue: {issue}48069[#48069])\n+* Bucket aggregation circuit breaker optimization. {pull}46751[#46751]\n+\n+Analysis::\n+* Removes old Lucene's experimental flag from analyzer documentations {pull}53217[#53217]\n+\n+Authentication::\n+* Add exception metadata for disabled features {pull}52811[#52811] (issues: {issue}47759[#47759], {issue}52311[#52311], {issue}55255[#55255])\n+* Validate role templates before saving role mapping {pull}52636[#52636] (issue: {issue}48773[#48773])\n+* Add support for secondary authentication {pull}52093[#52093]\n+* Expose API key name to the ingest pipeline {pull}51305[#51305] (issues: {issue}46847[#46847], {issue}49106[#49106])\n+* Disallow Password Change when authenticated by Token {pull}49694[#49694] (issue: {issue}48752[#48752])\n+\n+Authorization::\n+* Allow kibana_system to create and invalidate API keys on behalf of other users {pull}53824[#53824] (issue: {issue}48716[#48716])\n+* Add \"grant_api_key\" cluster privilege {pull}53527[#53527] (issues: {issue}48716[#48716], {issue}52886[#52886])\n+* Giving kibana user privileges to create custom link index {pull}53221[#53221] (issue: {issue}59305[#59305])\n+* [APM] Allow kibana to collect APM telemetry in background task {pull}52917[#52917] (issue: {issue}50757[#50757])\n+* Add the new 'maintenance' privilege containing 4 actions (#29998) {pull}50643[#50643]\n+\n+Cluster Coordination::\n+* Describe STALE_STATE_CONFIG in ClusterFormationFH {pull}53878[#53878] (issue: {issue}53734[#53734])\n+\n+Distributed::\n+* Introduce formal role for remote cluster client {pull}53924[#53924]\n+* Shortcut query phase using the results of other shards {pull}51852[#51852] (issues: {issue}49601[#49601], {issue}51708[#51708])\n+* Flush instead of synced-flush inactive shards {pull}49126[#49126] (issues: {issue}31965[#31965], {issue}48430[#48430])\n+\n+Engine::\n+* Restore off-heap loading for term dictionary in ReadOnlyEngine {pull}53713[#53713] (issues: {issue}43158[#43158], {issue}51247[#51247])\n+* Separate translog from index deletion conditions {pull}52556[#52556]\n+* Always rewrite search shard request outside of the search thread pool {pull}51708[#51708] (issue: {issue}49601[#49601])\n+* Move the terms index of `_id` off-heap. {pull}52405[#52405] (issue: {issue}42838[#42838])\n+* Cache completion stats between refreshes {pull}51991[#51991] (issue: {issue}51915[#51915])\n+* Use local checkpoint to calculate min translog gen for recovery {pull}51905[#51905] (issue: {issue}49970[#49970])\n+\n+Features/CAT APIs::\n+* /_cat/shards support path stats {pull}53461[#53461]\n+* Allow _cat indices & aliases to use indices options {pull}53248[#53248] (issue: {issue}52304[#52304])\n+\n+Features/Features::\n+* Enable deprecation checks for removed settings {pull}53317[#53317]\n+\n+Features/ILM+SLM::\n+* Hide ILM & SLM history aliases {pull}53564[#53564]\n+* Avoid race condition in ILMHistorySotre {pull}53039[#53039] (issues: {issue}50353[#50353], {issue}52853[#52853])\n+* Make FreezeStep retryable {pull}52540[#52540]\n+* Make DeleteStep retryable {pull}52494[#52494]\n+* Allow forcemerge in the hot phase for ILM policies {pull}52073[#52073] (issue: {issue}43165[#43165])\n+* Stop policy on last PhaseCompleteStep instead of TerminalPolic\u2026 {pull}51631[#51631] (issue: {issue}48431[#48431])\n+* Convert ILM and SLM histories into hidden indices {pull}51456[#51456]\n+* Make UpdateSettingsStep retryable {pull}51235[#51235] (issues: {issue}44135[#44135], {issue}48183[#48183])\n+* Expose master timeout for ILM actions {pull}51130[#51130] (issue: {issue}44136[#44136])\n+* Wait for active shards on rolled index in a separate step {pull}50718[#50718] (issues: {issue}44135[#44135], {issue}48183[#48183])\n+* Adding best_compression {pull}49974[#49974]\n+\n+Features/Indices APIs::\n+* Add IndexTemplateV2 to MetaData {pull}53753[#53753] (issue: {issue}53101[#53101])\n+* Add ComponentTemplate to MetaData {pull}53290[#53290] (issue: {issue}53101[#53101])\n+\n+Features/Ingest::\n+* Reduce log level for pipeline failure {pull}54097[#54097] (issue: {issue}51459[#51459])\n+* Support array for all string ingest processors {pull}53343[#53343] (issue: {issue}51087[#51087])\n+* Add empty_value parameter to CSV processor {pull}51567[#51567]\n+* Add pipeline name to ingest metadata {pull}50467[#50467] (issue: {issue}42106[#42106])\n+\n+Features/Java High Level REST Client::\n+* SourceExists HLRC uses GetSourceRequest instead of GetRequest {pull}51789[#51789] (issue: {issue}50885[#50885])\n+* Add async_search.submit to HLRC {pull}53592[#53592] (issue: {issue}49091[#49091])\n+* Add Get Source API to the HLRC {pull}50885[#50885] (issue: {issue}47678[#47678])\n+\n+Features/Monitoring::\n+* Secure password for monitoring HTTP exporter {pull}50919[#50919] (issue: {issue}50197[#50197])\n+* Validate SSL settings at parse time {pull}49196[#49196] (issue: {issue}47711[#47711])\n+\n+Features/Stats::\n+* Add analysis components and mapping types to the usage API. {pull}51031[#51031]\n+\n+Features/Watcher::\n+* Make watch history indices hidden {pull}52962[#52962] (issue: {issue}50251[#50251])\n+* Upgrade to the latest OWASP HTML sanitizer {pull}50765[#50765] (issue: {issue}50395[#50395])\n+\n+Infra/Core::\n+* Enable helpful null pointer exceptions {pull}54853[#54853]\n+* Allow keystore add to handle multiple settings {pull}54229[#54229] (issue: {issue}54191[#54191])\n+* Report parser name and location in XContent deprecation warnings {pull}53805[#53805]\n+* Report parser name and location in XContent deprecation warnings {pull}53752[#53752]\n+* Deprecate all variants of a ParseField with no replacement {pull}53722[#53722]\n+* Add a helper method to parse maps of objects {pull}53096[#53096]\n+* Allow specifying an exclusive set of fields on ObjectParser {pull}52893[#52893]\n+* Support joda style date patterns in 7.x {pull}52555[#52555]\n+* Implement hidden aliases {pull}52547[#52547] (issue: {issue}52304[#52304])\n+* Allow ObjectParsers to specify required sets of fields {pull}49661[#49661] (issue: {issue}48824[#48824])\n+\n+Infra/Logging::\n+* Capture stdout and stderr to log4j log {pull}50259[#50259] (issue: {issue}50156[#50156])\n+\n+Infra/Packaging::\n+* Introduce aarch64 Docker image {pull}53936[#53936] (issue: {issue}53914[#53914])\n+* Introduce jvm.options.d for customizing JVM options {pull}51882[#51882] (issue: {issue}51626[#51626])\n+\n+Infra/Plugins::\n+* Allow sha512 checksum without filename for maven plugins {pull}52668[#52668] (issue: {issue}52413[#52413])\n+\n+Infra/Scripting::\n+* Scripting: Context script cache unlimited compile {pull}53769[#53769] (issue: {issue}50152[#50152])\n+* Scripting: Increase ingest script cache defaults {pull}53765[#53765] (issue: {issue}50152[#50152])\n+* Scripting: Per-context script cache, default off (#52855) {pull}53756[#53756] (issues: {issue}50152[#50152], {issue}52855[#52855])\n+* Scripting: Per-context script cache, default off {pull}52855[#52855] (issue: {issue}50152[#50152])\n+* Improve Painless compilation performance for nested conditionals {pull}52056[#52056]\n+* Scripting: Add char position of script errors {pull}51069[#51069] (issue: {issue}50993[#50993])\n+\n+Infra/Settings::\n+* Allow keystore add-file to handle multiple settings {pull}54240[#54240] (issue: {issue}54191[#54191])\n+* Settings: AffixSettings as validator dependencies {pull}52973[#52973] (issue: {issue}52933[#52933])\n+\n+License::\n+* Simplify ml license checking with XpackLicenseState internals {pull}52684[#52684] (issue: {issue}52115[#52115])\n+* License removal leads back to a basic license {pull}52407[#52407] (issue: {issue}45022[#45022])\n+* Refactor license checking {pull}52118[#52118] (issue: {issue}51864[#51864])\n+* Add enterprise mode and refactor {pull}51864[#51864] (issue: {issue}51081[#51081])\n+\n+Machine Learning::\n+* Stratified cross validation split for classification {pull}54087[#54087]\n+* Data frame analytics data counts {pull}53998[#53998]\n+* Verify that the field is aggregatable before attempting cardinality aggregation {pull}53874[#53874] (issue: {issue}53876[#53876])\n+* Adds multi-class feature importance support {pull}53803[#53803]\n+* Data frame analytics analysis stats {pull}53788[#53788]\n+* Add a model memory estimation endpoint for anomaly detection {pull}53507[#53507] (issue: {issue}53219[#53219])\n+* [Inference] adds new default_field_map field to trained models {pull}53294[#53294]\n+* Improve DF analytics audits and logging {pull}53179[#53179]\n+* Add indices_options to datafeed config and update {pull}52793[#52793] (issue: {issue}48056[#48056])\n+* Parse and report memory usage for DF Analytics {pull}52778[#52778]\n+* Adds the class_assignment_objective parameter to classification {pull}52763[#52763] (issue: {issue}52427[#52427])\n+* Add reason to DataFrameAnalyticsTask updateState log message {pull}52659[#52659] (issue: {issue}52654[#52654])\n+* [Inference] Add support for multi-value leaves to the tree model {pull}52531[#52531]\n+* Make ml internal indices hidden {pull}52423[#52423] (issue: {issue}52420[#52420])\n+* Add _cat/ml/data_frame/analytics API {pull}52260[#52260] (issue: {issue}51413[#51413])\n+* Adds feature importance option to inference processor {pull}52218[#52218]\n+* Switch poor categorization audit warning to use status field {pull}52195[#52195] (issues: {issue}50749[#50749], {issue}51146[#51146], {issue}51879[#51879])\n+* Retry persisting DF Analytics results {pull}52048[#52048]\n+* Improve multiline_start_pattern for CSV in find_file_structure {pull}51737[#51737]\n+* Add _cat/ml/trained_models API {pull}51529[#51529] (issue: {issue}51414[#51414])\n+* Add GET _cat/ml/datafeeds {pull}51500[#51500] (issue: {issue}51411[#51411])\n+* Use CSV ingest processor in find_file_structure ingest pipeline {pull}51492[#51492] (issue: {issue}56038[#56038])\n+* Add _cat/ml/anomaly_detectors API {pull}51364[#51364]\n+* [Inference] add tags url param to GET {pull}51330[#51330]\n+* Add parsers for inference configuration classes {pull}51300[#51300]\n+* Make datafeeds work with nanosecond time fields {pull}51180[#51180] (issue: {issue}49889[#49889])\n+* Add audit warning for 1000 categories found early in job {pull}51146[#51146] (issue: {issue}50749[#50749])\n+* Adds support for a global calendars {pull}50372[#50372] (issue: {issue}45013[#45013])\n+\n+Mapping::\n+* Wildcard field - add normalizer support {pull}53851[#53851]\n+* Wildcard field - added case insensitive search option {pull}53814[#53814]\n+* Append index name for the source of the cluster put-mapping task {pull}52690[#52690]\n+\n+Network::\n+* Give helpful message on remote connections disabled {pull}53690[#53690]\n+* Add server name to remote info API {pull}53634[#53634]\n+* Log when probe succeeds but full connection fails {pull}51304[#51304]\n+* Encrypt generated key with AES {pull}51019[#51019] (issue: {issue}50843[#50843])\n+\n+Ranking::\n+* Adds recall@k metric to rank eval API {pull}52577[#52577] (issue: {issue}51676[#51676])\n+\n+SQL::\n+* Jdbc debugging enhancement {pull}53880[#53880]\n+* Transfer version compatibility decision to the server {pull}53082[#53082] (issue: {issue}52766[#52766])\n+* Use a proper error message for queries directed at empty mapping indices {pull}52967[#52967] (issue: {issue}52865[#52865])\n+* Use calendar_interval of 1d for HISTOGRAMs with 1 DAY intervals {pull}52749[#52749] (issue: {issue}52713[#52713])\n+* Use a calendar interval for histograms over 1 month intervals {pull}52586[#52586] (issue: {issue}51538[#51538])\n+* Make parsing of date more lenient {pull}52137[#52137] (issue: {issue}49379[#49379])\n+* Enhance timestamp escaped literal parsing {pull}52097[#52097] (issue: {issue}46069[#46069])\n+* Handle uberjar scenario where the ES jdbc driver file is bundled in another jar {pull}51856[#51856] (issue: {issue}50201[#50201])\n+* Verify Full-Text Search functions not allowed in SELECT {pull}51568[#51568] (issue: {issue}47446[#47446])\n+* Extend the optimisations for equalities {pull}50792[#50792] (issue: {issue}49637[#49637])\n+* Add trace logging for search responses coming from server {pull}50530[#50530]\n+* Extend DATE_TRUNC to also operate on intervals(elastic - #46632 ) {pull}47720[#47720] (issue: {issue}46632[#46632])\n+* Enchance output of explain for optimized plan {pull}33718[#33718]\n+\n+Search::\n+* HLRC: Don't send defaults for SubmitAsyncSearchRequest {pull}54200[#54200]\n+* Reduce performance impact of ExitableDirectoryReader {pull}53978[#53978] (issues: {issue}52822[#52822], {issue}53166[#53166], {issue}53496[#53496])\n+* Add heuristics to compute pre_filter_shard_size when unspecified {pull}53873[#53873] (issue: {issue}39835[#39835])\n+* Add async_search get and delete APIs to HLRC {pull}53828[#53828] (issue: {issue}49091[#49091])\n+* Increase step between checks for cancellation {pull}53712[#53712] (issues: {issue}52822[#52822], {issue}53496[#53496])\n+* Refine SearchProgressListener internal API {pull}53373[#53373]\n+* Check for query cancellation during rewrite {pull}53166[#53166] (issue: {issue}52822[#52822])\n+* Implement Cancellable DirectoryReader {pull}52822[#52822]\n+* Address MinAndMax generics warnings {pull}52642[#52642] (issue: {issue}49092[#49092])\n+* Clarify when shard iterators get sorted {pull}52633[#52633]\n+* Generalize how queries on `_index` are handled at rewrite time {pull}52486[#52486] (issues: {issue}49254[#49254], {issue}49713[#49713])\n+* Remove the query builder serialization from QueryShardException message {pull}51885[#51885] (issues: {issue}48910[#48910], {issue}51843[#51843])\n+* Short circuited to MatchNone for non-participating  slice {pull}51207[#51207]\n+* Add \"did you mean\" to unknown queries {pull}51177[#51177]\n+* Exclude unmapped fields during max clause limit checking for querying {pull}49523[#49523] (issue: {issue}49002[#49002])\n+\n+Security::\n+* Add error message in JSON response {pull}54389[#54389]\n+\n+Snapshot/Restore::\n+* Use Azure Bulk Deletes in Azure Repository {pull}53919[#53919] (issue: {issue}53865[#53865])\n+* Only link fd* files during source-only snapshot {pull}53463[#53463] (issue: {issue}50231[#50231])\n+* Add Blob Download Retries to GCS Repository {pull}52479[#52479] (issues: {issue}46589[#46589], {issue}52319[#52319])\n+* Better Incrementality for Snapshots of Unchanged Shards {pull}52182[#52182]\n+* Add Region and Signer Algorithm Overrides to S3 Repos {pull}52112[#52112] (issue: {issue}51861[#51861])\n+* Allow Parallel Snapshot Restore And Delete {pull}51608[#51608] (issue: {issue}41463[#41463])\n+\n+Store::\n+* HybridDirectory should mmap postings. {pull}52641[#52641]\n+\n+Transform::\n+* Transition Transforms to using hidden indices for notifcations index {pull}53773[#53773] (issue: {issue}53762[#53762])\n+* [Rollup] add processing stats to record the time spent for processing results {pull}53770[#53770]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "originalPosition": 358}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNTg2Mzgy", "url": "https://github.com/elastic/elasticsearch/pull/55019#pullrequestreview-391586382", "createdAt": "2020-04-10T18:15:17Z", "commit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxODoxNToxN1rOGEB7ug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxODoxNToxN1rOGEB7ug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg3OTE2Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * [Inference] fix number inference models returned in x-pack info API {pull}53540[#53540]\n          \n          \n            \n            * Fix number inference models returned in x-pack info API {pull}53540[#53540]", "url": "https://github.com/elastic/elasticsearch/pull/55019#discussion_r406879162", "createdAt": "2020-04-10T18:15:17Z", "author": {"login": "jrodewig"}, "path": "docs/reference/release-notes/7.7.asciidoc", "diffHunk": "@@ -1,22 +1,612 @@\n [[release-notes-7.7.0]]\n == {es} version 7.7.0\n \n-coming[7.7.0]\n+Also see <<breaking-changes-7.7,Breaking changes in 7.7>>.\n \n [[breaking-7.7.0]]\n [float]\n === Breaking changes\n \n+Highlighting::\n+* Highlighters skip ignored keyword values {pull}53408[#53408] (issue: {issue}43800[#43800])\n+\n+Infra/Core::\n+* Remove DEBUG-level default logging from actions {pull}51459[#51459] (issue: {issue}51198[#51198])\n+\n Mapping::\n * Dynamic mappings in indices created on 8.0 and later have stricter validation at mapping update time and\n   results in a deprecation warning for indices created in Elasticsearch 7.7.0 and later.\n-  (e.g. incorrect analyzer settings or unknown field types). {pull}51233[#51233]\n+  (e.g. incorrect analyzer settings or unknown field types). {pull}51233[#51233] (issues: {issue}17411[#17411], {issue}24419[#24419])\n \n Search::\n-* A regression that allowed negative scores in a script_score query was corrected.\n-  A behaviour is restored that throws an error if script_score query produces\n-  a negative score {pull}52478[#52478].\n+* Make range query rounding consistent {pull}50237[#50237] (issue: {issue}50009[#50009])\n * Pipeline aggregation validation errors that used to return HTTP\n   500s/Internal Server Errors now return 400/Bad Request {pull}53669[#53669].\n   As a bonus we now return a list of validation errors rather than returning\n   the first one we encounter.\n+\n+\n+\n+[[breaking-java-7.7.0]]\n+[float]\n+=== Breaking Java changes\n+\n+Infra/Core::\n+* Fix ActionListener.map exception handling {pull}50886[#50886]\n+\n+Machine Learning::\n+* Add expected input field type to trained model config {pull}53083[#53083]\n+\n+Transform::\n+* Enhance the output of preview to return full destination index details {pull}53572[#53572]\n+\n+\n+\n+[[deprecation-7.7.0]]\n+[float]\n+=== Deprecations\n+\n+Allocation::\n+* Deprecated support for delaying state recovery pending master nodes {pull}53646[#53646] (issue: {issue}51806[#51806])\n+\n+Authentication::\n+* Add warnings for invalid realm order config (#51195) {pull}51515[#51515]\n+* Deprecate timeout.tcp_read AD/LDAP realm setting {pull}47305[#47305] (issue: {issue}46028[#46028])\n+\n+Engine::\n+* Deprecate translog retention settings {pull}51588[#51588] (issues: {issue}45473[#45473], {issue}50775[#50775])\n+\n+Features/Features::\n+* Add cluster.remote.connect to deprecation info API {pull}54142[#54142] (issue: {issue}53924[#53924])\n+\n+Infra/Core::\n+* Add deprecation check for listener thread pool {pull}53438[#53438] (issues: {issue}53049[#53049], {issue}53317[#53317])\n+* Deprecate the logstash enabled setting {pull}53367[#53367]\n+* Deprecate the listener thread pool {pull}53266[#53266] (issue: {issue}53049[#53049])\n+* Deprecate creation of dot-prefixed index names except for hidden and system indices {pull}49959[#49959]\n+\n+Infra/REST API::\n+* Deprecate undocumented alternatives to the nodes hot threads API (#52640) {pull}52930[#52930] (issue: {issue}52640[#52640])\n+\n+Machine Learning::\n+* Renaming inference processor field field_mappings to new name field_map {pull}53433[#53433]\n+\n+Search::\n+* Emit deprecation warning when TermsLookup contains a type {pull}53731[#53731] (issue: {issue}41059[#41059])\n+* Deprecate BoolQueryBuilder's mustNot field {pull}53125[#53125]\n+\n+\n+\n+[[feature-7.7.0]]\n+[float]\n+=== New features\n+\n+Aggregations::\n+* Preserve metric types in top_metrics {pull}53288[#53288]\n+* Support multiple metrics in `top_metrics` agg {pull}52965[#52965] (issue: {issue}51813[#51813])\n+* Add size support to `top_metrics` {pull}52662[#52662] (issue: {issue}51813[#51813])\n+* HLRC support for string_stats {pull}52163[#52163]\n+* Add Boxplot Aggregation {pull}51948[#51948] (issue: {issue}33112[#33112])\n+\n+Analysis::\n+* Add nori_number token filter in analysis-nori {pull}53583[#53583]\n+\n+Authentication::\n+* Create API Key on behalf of other user {pull}52886[#52886] (issue: {issue}48716[#48716])\n+\n+Geo::\n+* Add support for distance queries on shape queries {pull}53468[#53468]\n+* Add support for distance queries on geo_shape queries {pull}53466[#53466] (issues: {issue}13351[#13351], {issue}39237[#39237])\n+* Add support for multipoint shape queries {pull}52564[#52564] (issue: {issue}52133[#52133])\n+* Add support for multipoint geoshape queries {pull}52133[#52133] (issue: {issue}37318[#37318])\n+\n+Infra/Core::\n+* Implement hidden indices {pull}50452[#50452] (issues: {issue}50251[#50251], {issue}50665[#50665], {issue}50762[#50762])\n+\n+Infra/Packaging::\n+* Introduce aarch64 packaging {pull}53914[#53914]\n+\n+Machine Learning::\n+* Implement ILM policy for .ml-state* indices {pull}52356[#52356] (issue: {issue}29938[#29938])\n+\n+Mapping::\n+* Introduce a `constant_keyword` field. {pull}49713[#49713]\n+\n+SQL::\n+* constant_keyword support {pull}53241[#53241] (issue: {issue}53016[#53016])\n+* Add optimisations for not-equalities {pull}51088[#51088] (issue: {issue}49637[#49637])\n+* Add support for passing query parameters in REST API calls {pull}51029[#51029] (issue: {issue}42916[#42916])\n+\n+Search::\n+* Introduce compound query {pull}52387[#52387] (issue: {issue}51967[#51967])\n+* Add a cluster setting to disallow expensive queries {pull}51385[#51385] (issue: {issue}29050[#29050])\n+* Add new x-pack endpoints to track the progress of a search asynchronously {pull}49931[#49931] (issue: {issue}49091[#49091])\n+\n+\n+\n+[[enhancement-7.7.0]]\n+[float]\n+=== Enhancements\n+\n+Aggregations::\n+* Try to save memory on aggregations {pull}53793[#53793]\n+* Speed up partial reduce of terms aggregations {pull}53216[#53216] (issue: {issue}51857[#51857])\n+* Simplify SiblingPipelineAggregator {pull}53144[#53144]\n+* Add histogram field type support to boxplot aggs {pull}52265[#52265] (issues: {issue}33112[#33112], {issue}52233[#52233])\n+* Percentiles aggregation validation checks for range {pull}51871[#51871] (issue: {issue}51808[#51808])\n+* Begin moving date_histogram to offset rounding (take two) {pull}51271[#51271] (issues: {issue}50609[#50609], {issue}50873[#50873])\n+* Password-protected Keystore Feature Branch PR {pull}51123[#51123] (issues: {issue}32691[#32691], {issue}49340[#49340])\n+* Implement top_metrics agg {pull}51155[#51155] (issue: {issue}48069[#48069])\n+* Bucket aggregation circuit breaker optimization. {pull}46751[#46751]\n+\n+Analysis::\n+* Removes old Lucene's experimental flag from analyzer documentations {pull}53217[#53217]\n+\n+Authentication::\n+* Add exception metadata for disabled features {pull}52811[#52811] (issues: {issue}47759[#47759], {issue}52311[#52311], {issue}55255[#55255])\n+* Validate role templates before saving role mapping {pull}52636[#52636] (issue: {issue}48773[#48773])\n+* Add support for secondary authentication {pull}52093[#52093]\n+* Expose API key name to the ingest pipeline {pull}51305[#51305] (issues: {issue}46847[#46847], {issue}49106[#49106])\n+* Disallow Password Change when authenticated by Token {pull}49694[#49694] (issue: {issue}48752[#48752])\n+\n+Authorization::\n+* Allow kibana_system to create and invalidate API keys on behalf of other users {pull}53824[#53824] (issue: {issue}48716[#48716])\n+* Add \"grant_api_key\" cluster privilege {pull}53527[#53527] (issues: {issue}48716[#48716], {issue}52886[#52886])\n+* Giving kibana user privileges to create custom link index {pull}53221[#53221] (issue: {issue}59305[#59305])\n+* [APM] Allow kibana to collect APM telemetry in background task {pull}52917[#52917] (issue: {issue}50757[#50757])\n+* Add the new 'maintenance' privilege containing 4 actions (#29998) {pull}50643[#50643]\n+\n+Cluster Coordination::\n+* Describe STALE_STATE_CONFIG in ClusterFormationFH {pull}53878[#53878] (issue: {issue}53734[#53734])\n+\n+Distributed::\n+* Introduce formal role for remote cluster client {pull}53924[#53924]\n+* Shortcut query phase using the results of other shards {pull}51852[#51852] (issues: {issue}49601[#49601], {issue}51708[#51708])\n+* Flush instead of synced-flush inactive shards {pull}49126[#49126] (issues: {issue}31965[#31965], {issue}48430[#48430])\n+\n+Engine::\n+* Restore off-heap loading for term dictionary in ReadOnlyEngine {pull}53713[#53713] (issues: {issue}43158[#43158], {issue}51247[#51247])\n+* Separate translog from index deletion conditions {pull}52556[#52556]\n+* Always rewrite search shard request outside of the search thread pool {pull}51708[#51708] (issue: {issue}49601[#49601])\n+* Move the terms index of `_id` off-heap. {pull}52405[#52405] (issue: {issue}42838[#42838])\n+* Cache completion stats between refreshes {pull}51991[#51991] (issue: {issue}51915[#51915])\n+* Use local checkpoint to calculate min translog gen for recovery {pull}51905[#51905] (issue: {issue}49970[#49970])\n+\n+Features/CAT APIs::\n+* /_cat/shards support path stats {pull}53461[#53461]\n+* Allow _cat indices & aliases to use indices options {pull}53248[#53248] (issue: {issue}52304[#52304])\n+\n+Features/Features::\n+* Enable deprecation checks for removed settings {pull}53317[#53317]\n+\n+Features/ILM+SLM::\n+* Hide ILM & SLM history aliases {pull}53564[#53564]\n+* Avoid race condition in ILMHistorySotre {pull}53039[#53039] (issues: {issue}50353[#50353], {issue}52853[#52853])\n+* Make FreezeStep retryable {pull}52540[#52540]\n+* Make DeleteStep retryable {pull}52494[#52494]\n+* Allow forcemerge in the hot phase for ILM policies {pull}52073[#52073] (issue: {issue}43165[#43165])\n+* Stop policy on last PhaseCompleteStep instead of TerminalPolic\u2026 {pull}51631[#51631] (issue: {issue}48431[#48431])\n+* Convert ILM and SLM histories into hidden indices {pull}51456[#51456]\n+* Make UpdateSettingsStep retryable {pull}51235[#51235] (issues: {issue}44135[#44135], {issue}48183[#48183])\n+* Expose master timeout for ILM actions {pull}51130[#51130] (issue: {issue}44136[#44136])\n+* Wait for active shards on rolled index in a separate step {pull}50718[#50718] (issues: {issue}44135[#44135], {issue}48183[#48183])\n+* Adding best_compression {pull}49974[#49974]\n+\n+Features/Indices APIs::\n+* Add IndexTemplateV2 to MetaData {pull}53753[#53753] (issue: {issue}53101[#53101])\n+* Add ComponentTemplate to MetaData {pull}53290[#53290] (issue: {issue}53101[#53101])\n+\n+Features/Ingest::\n+* Reduce log level for pipeline failure {pull}54097[#54097] (issue: {issue}51459[#51459])\n+* Support array for all string ingest processors {pull}53343[#53343] (issue: {issue}51087[#51087])\n+* Add empty_value parameter to CSV processor {pull}51567[#51567]\n+* Add pipeline name to ingest metadata {pull}50467[#50467] (issue: {issue}42106[#42106])\n+\n+Features/Java High Level REST Client::\n+* SourceExists HLRC uses GetSourceRequest instead of GetRequest {pull}51789[#51789] (issue: {issue}50885[#50885])\n+* Add async_search.submit to HLRC {pull}53592[#53592] (issue: {issue}49091[#49091])\n+* Add Get Source API to the HLRC {pull}50885[#50885] (issue: {issue}47678[#47678])\n+\n+Features/Monitoring::\n+* Secure password for monitoring HTTP exporter {pull}50919[#50919] (issue: {issue}50197[#50197])\n+* Validate SSL settings at parse time {pull}49196[#49196] (issue: {issue}47711[#47711])\n+\n+Features/Stats::\n+* Add analysis components and mapping types to the usage API. {pull}51031[#51031]\n+\n+Features/Watcher::\n+* Make watch history indices hidden {pull}52962[#52962] (issue: {issue}50251[#50251])\n+* Upgrade to the latest OWASP HTML sanitizer {pull}50765[#50765] (issue: {issue}50395[#50395])\n+\n+Infra/Core::\n+* Enable helpful null pointer exceptions {pull}54853[#54853]\n+* Allow keystore add to handle multiple settings {pull}54229[#54229] (issue: {issue}54191[#54191])\n+* Report parser name and location in XContent deprecation warnings {pull}53805[#53805]\n+* Report parser name and location in XContent deprecation warnings {pull}53752[#53752]\n+* Deprecate all variants of a ParseField with no replacement {pull}53722[#53722]\n+* Add a helper method to parse maps of objects {pull}53096[#53096]\n+* Allow specifying an exclusive set of fields on ObjectParser {pull}52893[#52893]\n+* Support joda style date patterns in 7.x {pull}52555[#52555]\n+* Implement hidden aliases {pull}52547[#52547] (issue: {issue}52304[#52304])\n+* Allow ObjectParsers to specify required sets of fields {pull}49661[#49661] (issue: {issue}48824[#48824])\n+\n+Infra/Logging::\n+* Capture stdout and stderr to log4j log {pull}50259[#50259] (issue: {issue}50156[#50156])\n+\n+Infra/Packaging::\n+* Introduce aarch64 Docker image {pull}53936[#53936] (issue: {issue}53914[#53914])\n+* Introduce jvm.options.d for customizing JVM options {pull}51882[#51882] (issue: {issue}51626[#51626])\n+\n+Infra/Plugins::\n+* Allow sha512 checksum without filename for maven plugins {pull}52668[#52668] (issue: {issue}52413[#52413])\n+\n+Infra/Scripting::\n+* Scripting: Context script cache unlimited compile {pull}53769[#53769] (issue: {issue}50152[#50152])\n+* Scripting: Increase ingest script cache defaults {pull}53765[#53765] (issue: {issue}50152[#50152])\n+* Scripting: Per-context script cache, default off (#52855) {pull}53756[#53756] (issues: {issue}50152[#50152], {issue}52855[#52855])\n+* Scripting: Per-context script cache, default off {pull}52855[#52855] (issue: {issue}50152[#50152])\n+* Improve Painless compilation performance for nested conditionals {pull}52056[#52056]\n+* Scripting: Add char position of script errors {pull}51069[#51069] (issue: {issue}50993[#50993])\n+\n+Infra/Settings::\n+* Allow keystore add-file to handle multiple settings {pull}54240[#54240] (issue: {issue}54191[#54191])\n+* Settings: AffixSettings as validator dependencies {pull}52973[#52973] (issue: {issue}52933[#52933])\n+\n+License::\n+* Simplify ml license checking with XpackLicenseState internals {pull}52684[#52684] (issue: {issue}52115[#52115])\n+* License removal leads back to a basic license {pull}52407[#52407] (issue: {issue}45022[#45022])\n+* Refactor license checking {pull}52118[#52118] (issue: {issue}51864[#51864])\n+* Add enterprise mode and refactor {pull}51864[#51864] (issue: {issue}51081[#51081])\n+\n+Machine Learning::\n+* Stratified cross validation split for classification {pull}54087[#54087]\n+* Data frame analytics data counts {pull}53998[#53998]\n+* Verify that the field is aggregatable before attempting cardinality aggregation {pull}53874[#53874] (issue: {issue}53876[#53876])\n+* Adds multi-class feature importance support {pull}53803[#53803]\n+* Data frame analytics analysis stats {pull}53788[#53788]\n+* Add a model memory estimation endpoint for anomaly detection {pull}53507[#53507] (issue: {issue}53219[#53219])\n+* [Inference] adds new default_field_map field to trained models {pull}53294[#53294]\n+* Improve DF analytics audits and logging {pull}53179[#53179]\n+* Add indices_options to datafeed config and update {pull}52793[#52793] (issue: {issue}48056[#48056])\n+* Parse and report memory usage for DF Analytics {pull}52778[#52778]\n+* Adds the class_assignment_objective parameter to classification {pull}52763[#52763] (issue: {issue}52427[#52427])\n+* Add reason to DataFrameAnalyticsTask updateState log message {pull}52659[#52659] (issue: {issue}52654[#52654])\n+* [Inference] Add support for multi-value leaves to the tree model {pull}52531[#52531]\n+* Make ml internal indices hidden {pull}52423[#52423] (issue: {issue}52420[#52420])\n+* Add _cat/ml/data_frame/analytics API {pull}52260[#52260] (issue: {issue}51413[#51413])\n+* Adds feature importance option to inference processor {pull}52218[#52218]\n+* Switch poor categorization audit warning to use status field {pull}52195[#52195] (issues: {issue}50749[#50749], {issue}51146[#51146], {issue}51879[#51879])\n+* Retry persisting DF Analytics results {pull}52048[#52048]\n+* Improve multiline_start_pattern for CSV in find_file_structure {pull}51737[#51737]\n+* Add _cat/ml/trained_models API {pull}51529[#51529] (issue: {issue}51414[#51414])\n+* Add GET _cat/ml/datafeeds {pull}51500[#51500] (issue: {issue}51411[#51411])\n+* Use CSV ingest processor in find_file_structure ingest pipeline {pull}51492[#51492] (issue: {issue}56038[#56038])\n+* Add _cat/ml/anomaly_detectors API {pull}51364[#51364]\n+* [Inference] add tags url param to GET {pull}51330[#51330]\n+* Add parsers for inference configuration classes {pull}51300[#51300]\n+* Make datafeeds work with nanosecond time fields {pull}51180[#51180] (issue: {issue}49889[#49889])\n+* Add audit warning for 1000 categories found early in job {pull}51146[#51146] (issue: {issue}50749[#50749])\n+* Adds support for a global calendars {pull}50372[#50372] (issue: {issue}45013[#45013])\n+\n+Mapping::\n+* Wildcard field - add normalizer support {pull}53851[#53851]\n+* Wildcard field - added case insensitive search option {pull}53814[#53814]\n+* Append index name for the source of the cluster put-mapping task {pull}52690[#52690]\n+\n+Network::\n+* Give helpful message on remote connections disabled {pull}53690[#53690]\n+* Add server name to remote info API {pull}53634[#53634]\n+* Log when probe succeeds but full connection fails {pull}51304[#51304]\n+* Encrypt generated key with AES {pull}51019[#51019] (issue: {issue}50843[#50843])\n+\n+Ranking::\n+* Adds recall@k metric to rank eval API {pull}52577[#52577] (issue: {issue}51676[#51676])\n+\n+SQL::\n+* Jdbc debugging enhancement {pull}53880[#53880]\n+* Transfer version compatibility decision to the server {pull}53082[#53082] (issue: {issue}52766[#52766])\n+* Use a proper error message for queries directed at empty mapping indices {pull}52967[#52967] (issue: {issue}52865[#52865])\n+* Use calendar_interval of 1d for HISTOGRAMs with 1 DAY intervals {pull}52749[#52749] (issue: {issue}52713[#52713])\n+* Use a calendar interval for histograms over 1 month intervals {pull}52586[#52586] (issue: {issue}51538[#51538])\n+* Make parsing of date more lenient {pull}52137[#52137] (issue: {issue}49379[#49379])\n+* Enhance timestamp escaped literal parsing {pull}52097[#52097] (issue: {issue}46069[#46069])\n+* Handle uberjar scenario where the ES jdbc driver file is bundled in another jar {pull}51856[#51856] (issue: {issue}50201[#50201])\n+* Verify Full-Text Search functions not allowed in SELECT {pull}51568[#51568] (issue: {issue}47446[#47446])\n+* Extend the optimisations for equalities {pull}50792[#50792] (issue: {issue}49637[#49637])\n+* Add trace logging for search responses coming from server {pull}50530[#50530]\n+* Extend DATE_TRUNC to also operate on intervals(elastic - #46632 ) {pull}47720[#47720] (issue: {issue}46632[#46632])\n+* Enchance output of explain for optimized plan {pull}33718[#33718]\n+\n+Search::\n+* HLRC: Don't send defaults for SubmitAsyncSearchRequest {pull}54200[#54200]\n+* Reduce performance impact of ExitableDirectoryReader {pull}53978[#53978] (issues: {issue}52822[#52822], {issue}53166[#53166], {issue}53496[#53496])\n+* Add heuristics to compute pre_filter_shard_size when unspecified {pull}53873[#53873] (issue: {issue}39835[#39835])\n+* Add async_search get and delete APIs to HLRC {pull}53828[#53828] (issue: {issue}49091[#49091])\n+* Increase step between checks for cancellation {pull}53712[#53712] (issues: {issue}52822[#52822], {issue}53496[#53496])\n+* Refine SearchProgressListener internal API {pull}53373[#53373]\n+* Check for query cancellation during rewrite {pull}53166[#53166] (issue: {issue}52822[#52822])\n+* Implement Cancellable DirectoryReader {pull}52822[#52822]\n+* Address MinAndMax generics warnings {pull}52642[#52642] (issue: {issue}49092[#49092])\n+* Clarify when shard iterators get sorted {pull}52633[#52633]\n+* Generalize how queries on `_index` are handled at rewrite time {pull}52486[#52486] (issues: {issue}49254[#49254], {issue}49713[#49713])\n+* Remove the query builder serialization from QueryShardException message {pull}51885[#51885] (issues: {issue}48910[#48910], {issue}51843[#51843])\n+* Short circuited to MatchNone for non-participating  slice {pull}51207[#51207]\n+* Add \"did you mean\" to unknown queries {pull}51177[#51177]\n+* Exclude unmapped fields during max clause limit checking for querying {pull}49523[#49523] (issue: {issue}49002[#49002])\n+\n+Security::\n+* Add error message in JSON response {pull}54389[#54389]\n+\n+Snapshot/Restore::\n+* Use Azure Bulk Deletes in Azure Repository {pull}53919[#53919] (issue: {issue}53865[#53865])\n+* Only link fd* files during source-only snapshot {pull}53463[#53463] (issue: {issue}50231[#50231])\n+* Add Blob Download Retries to GCS Repository {pull}52479[#52479] (issues: {issue}46589[#46589], {issue}52319[#52319])\n+* Better Incrementality for Snapshots of Unchanged Shards {pull}52182[#52182]\n+* Add Region and Signer Algorithm Overrides to S3 Repos {pull}52112[#52112] (issue: {issue}51861[#51861])\n+* Allow Parallel Snapshot Restore And Delete {pull}51608[#51608] (issue: {issue}41463[#41463])\n+\n+Store::\n+* HybridDirectory should mmap postings. {pull}52641[#52641]\n+\n+Transform::\n+* Transition Transforms to using hidden indices for notifcations index {pull}53773[#53773] (issue: {issue}53762[#53762])\n+* [Rollup] add processing stats to record the time spent for processing results {pull}53770[#53770]\n+* Create GET _cat/transforms API Issue {pull}53643[#53643] (issue: {issue}51412[#51412])\n+* Add support for script in group_by {pull}53167[#53167] (issue: {issue}43152[#43152])\n+* Implement node.transform to control where to run a transform {pull}52712[#52712] (issues: {issue}48734[#48734], {issue}50033[#50033], {issue}52200[#52200])\n+* Add support for filter aggregation {pull}52483[#52483] (issue: {issue}52151[#52151])\n+* Provide exponential_avg* stats for batch transforms {pull}52041[#52041] (issue: {issue}52037[#52037])\n+* Improve irrecoverable error detection - part 2 {pull}52003[#52003] (issue: {issue}51820[#51820])\n+* Mark transform API's stable {pull}51862[#51862]\n+* Improve irrecoverable error detection {pull}51820[#51820] (issue: {issue}50135[#50135])\n+* Add support for percentile aggs {pull}51808[#51808] (issue: {issue}51663[#51663])\n+* Disallow fieldnames with a dot at start and/or end {pull}51369[#51369]\n+* Avoid mapping problems with index templates {pull}51368[#51368] (issue: {issue}51321[#51321])\n+* Handle permanent bulk indexing errors {pull}51307[#51307] (issue: {issue}50122[#50122])\n+* Improve force stop robustness in case of an error {pull}51072[#51072]\n+\n+\n+\n+[[bug-7.7.0]]\n+[float]\n+=== Bug fixes\n+\n+Aggregations::\n+* Fix date_nanos in composite aggs {pull}53315[#53315] (issue: {issue}53168[#53168])\n+* Fix composite agg sort bug {pull}53296[#53296] (issue: {issue}52480[#52480])\n+* Decode max and min optimization more carefully {pull}52336[#52336] (issue: {issue}52220[#52220])\n+* Fix a DST error in date_histogram {pull}52016[#52016] (issue: {issue}50265[#50265])\n+* Use #name() instead of #simpleName() when generating doc values {pull}51920[#51920] (issues: {issue}50307[#50307], {issue}51847[#51847])\n+* Fix a sneaky bug in rare_terms {pull}51868[#51868] (issue: {issue}51020[#51020])\n+* Support time_zone on composite's date_histogram {pull}51172[#51172] (issues: {issue}45199[#45199], {issue}45200[#45200])\n+\n+Allocation::\n+* Improve performance of shards limits decider {pull}53577[#53577] (issue: {issue}53559[#53559])\n+\n+Analysis::\n+* Mask wildcard query special characters on keyword queries {pull}53127[#53127] (issue: {issue}46300[#46300])\n+* Fix caching for PreConfiguredTokenFilter {pull}50912[#50912] (issue: {issue}50734[#50734])\n+\n+Audit::\n+* Logfile audit settings validation {pull}52537[#52537] (issues: {issue}47038[#47038], {issue}47711[#47711], {issue}52357[#52357])\n+\n+Authentication::\n+* Fix potential bug in concurrent token refresh support {pull}53668[#53668]\n+* Respect runas realm for ApiKey security operations {pull}52178[#52178] (issue: {issue}51975[#51975])\n+* Preserve ApiKey credentials for async verification {pull}51244[#51244]\n+* Don't fallback to anonymous for tokens/apikeys {pull}51042[#51042] (issue: {issue}50171[#50171])\n+* Fail gracefully on invalid token strings {pull}51014[#51014]\n+\n+Authorization::\n+* Explicitly require that delegate API keys have no privileges {pull}53647[#53647]\n+* Allow _rollup_search with read privilege {pull}52043[#52043] (issue: {issue}50245[#50245])\n+\n+CCR::\n+* Put CCR tasks on (data && remote cluster clients) {pull}54146[#54146] (issue: {issue}53924[#53924])\n+* Handle no such remote cluster exception in ccr {pull}53415[#53415] (issue: {issue}53225[#53225])\n+* Fix shard follow task cleaner under security {pull}52347[#52347] (issues: {issue}44702[#44702], {issue}51971[#51971])\n+\n+CRUD::\n+* Force execution of finish shard bulk request {pull}51957[#51957] (issue: {issue}51904[#51904])\n+* Return 429 status code when there's a read_only cluster block {pull}50166[#50166] (issue: {issue}49393[#49393])\n+\n+Cluster Coordination::\n+* Use special XContent registry for node tool {pull}54050[#54050] (issue: {issue}53549[#53549])\n+* Allow static cluster.max_voting_config_exclusions {pull}53717[#53717] (issue: {issue}53455[#53455])\n+* Allow joining node to trigger term bump {pull}53338[#53338] (issue: {issue}53271[#53271])\n+* Ignore timeouts with single-node discovery {pull}52159[#52159]\n+\n+Distributed::\n+* Execute retention lease syncs under system context {pull}53838[#53838] (issues: {issue}48430[#48430], {issue}53751[#53751])\n+* Exclude nested documents in LuceneChangesSnapshot {pull}51279[#51279]\n+\n+Engine::\n+* Fix doc_stats and segment_stats of ReadOnlyEngine {pull}53345[#53345] (issues: {issue}51303[#51303], {issue}51331[#51331])\n+* Do not wrap soft-deletes reader for segment stats {pull}51331[#51331] (issues: {issue}51192[#51192], {issue}51303[#51303])\n+* Account soft-deletes in FrozenEngine {pull}51192[#51192] (issue: {issue}50775[#50775])\n+\n+Features/CAT APIs::\n+* Fix NPE in RestPluginsAction {pull}52620[#52620] (issue: {issue}45321[#45321])\n+\n+Features/ILM+SLM::\n+* Disallow negative TimeValues {pull}53913[#53913] (issue: {issue}54041[#54041])\n+* Fix null config in SnapshotLifecyclePolicy.toRequest {pull}53328[#53328] (issues: {issue}44465[#44465], {issue}53171[#53171])\n+* Freeze step retry when not acknowledged {pull}53287[#53287]\n+* Make the set-single-node-allocation retryable (#52077) {pull}52138[#52138] (issue: {issue}52077[#52077])\n+* Make the set-single-node-allocation retryable {pull}52077[#52077] (issue: {issue}43401[#43401])\n+* Fix the init step to actually be retryable {pull}52076[#52076]\n+\n+Features/Ingest::\n+* Fix ingest pipeline _simulate api with empty docs never returns a res\u2026 {pull}52937[#52937] (issue: {issue}52833[#52833])\n+* Handle errors when evaluating if conditions in processors {pull}52543[#52543] (issue: {issue}52339[#52339])\n+* Fix delete enrich policy bug {pull}52179[#52179] (issue: {issue}51228[#51228])\n+* Fix ignore_missing in CsvProcessor {pull}51600[#51600]\n+* Missing suffix for German Month \"Juli\" in Grok Pattern MONTH (#51579) {pull}51591[#51591] (issue: {issue}51579[#51579])\n+* Don't overwrite target field with SetSecurityUserProcessor {pull}51454[#51454] (issue: {issue}51428[#51428])\n+\n+Features/Java High Level REST Client::\n+* Add unsupported parameters to HLRC search request {pull}53745[#53745]\n+* Fix AbstractBulkByScrollRequest slices parameter via Rest {pull}53068[#53068] (issue: {issue}53044[#53044])\n+* Send the fields param via body instead of URL params (elastic#42232) {pull}48840[#48840] (issues: {issue}42232[#42232], {issue}42877[#42877])\n+\n+Features/Java Low Level REST Client::\n+* Fix roles parsing in client nodes sniffer {pull}52888[#52888] (issue: {issue}52864[#52864])\n+\n+Features/Monitoring::\n+* Fix NPE in cluster state collector for monitoring {pull}52371[#52371] (issue: {issue}52317[#52317])\n+\n+Features/Stats::\n+* Switch to AtomicLong for \"IngestCurrent\" metric to prevent negative values {pull}52581[#52581] (issues: {issue}52406[#52406], {issue}52411[#52411])\n+\n+Features/Watcher::\n+* Disable Watcher script optimization for stored scripts {pull}53497[#53497] (issue: {issue}40212[#40212])\n+* The watcher indexing listener didn't handle document level exceptions. {pull}51466[#51466] (issue: {issue}32299[#32299])\n+\n+Geo::\n+* Handle properly indexing rectangles that crosses the dateline {pull}53810[#53810]\n+\n+Highlighting::\n+* Fix highlighter support in PinnedQuery and added test {pull}53716[#53716] (issue: {issue}53699[#53699])\n+\n+Infra/Core::\n+* Fix Joda compatibility in stream protocol {pull}53823[#53823] (issue: {issue}53586[#53586])\n+* Avoid self-suppression on grouped action listener {pull}53262[#53262] (issue: {issue}53174[#53174])\n+* Use correct package for `VM` class {pull}52803[#52803] (issue: {issue}47210[#47210])\n+* Ignore virtual ethernet devices that disappear {pull}51581[#51581] (issue: {issue}49914[#49914])\n+* Fix ingest timezone logic {pull}51215[#51215] (issue: {issue}51108[#51108])\n+\n+Infra/Logging::\n+* Fix LoggingOutputStream to work on windows {pull}51779[#51779] (issue: {issue}51532[#51532])\n+\n+Infra/Packaging::\n+* Handle special characters and spaces in JAVA_HOME path in elasticsearch-service.bat {pull}52676[#52676]\n+* Limit _FILE env var support to specific vars {pull}52525[#52525] (issue: {issue}52503[#52503])\n+* Always set default ES_PATH_CONF for package scriptlets {pull}51827[#51827] (issues: {issue}50246[#50246], {issue}50631[#50631])\n+\n+Infra/Plugins::\n+* Ensure only plugin REST tests are run for plugins {pull}53184[#53184] (issues: {issue}52114[#52114], {issue}53183[#53183])\n+\n+Machine Learning::\n+* Fix node serialization on GET df-nalytics stats without id {pull}54808[#54808] (issue: {issue}54807[#54807])\n+* Allow force stopping failed and stopping DF analytics {pull}54650[#54650]\n+* Take more care that normalize processes use unique named pipes {pull}54636[#54636] (issue: {issue}43830[#43830])\n+* Do not fail Evaluate API when the actual and predicted fields' types differ {pull}54255[#54255] (issue: {issue}54079[#54079])\n+* Get ML filters size should default to 100 {pull}54207[#54207] (issues: {issue}39976[#39976], {issue}54206[#54206])\n+* Introduce a \"starting\" datafeed state for lazy jobs {pull}53918[#53918] (issue: {issue}53763[#53763])\n+* Only retry persistence failures when the failure is intermittent and stop retrying when analytics job is stopping {pull}53725[#53725] (issue: {issue}53687[#53687])\n+* [Inference] fix number inference models returned in x-pack info API {pull}53540[#53540]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "originalPosition": 502}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNTg2NTY0", "url": "https://github.com/elastic/elasticsearch/pull/55019#pullrequestreview-391586564", "createdAt": "2020-04-10T18:15:39Z", "commit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxODoxNTozOVrOGEB8RA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxODoxNTozOVrOGEB8RA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg3OTMwMA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * [Inference] don't return inflated definition when storing trained models {pull}52573[#52573]\n          \n          \n            \n            * Don't return inflated definition when storing trained models {pull}52573[#52573]", "url": "https://github.com/elastic/elasticsearch/pull/55019#discussion_r406879300", "createdAt": "2020-04-10T18:15:39Z", "author": {"login": "jrodewig"}, "path": "docs/reference/release-notes/7.7.asciidoc", "diffHunk": "@@ -1,22 +1,612 @@\n [[release-notes-7.7.0]]\n == {es} version 7.7.0\n \n-coming[7.7.0]\n+Also see <<breaking-changes-7.7,Breaking changes in 7.7>>.\n \n [[breaking-7.7.0]]\n [float]\n === Breaking changes\n \n+Highlighting::\n+* Highlighters skip ignored keyword values {pull}53408[#53408] (issue: {issue}43800[#43800])\n+\n+Infra/Core::\n+* Remove DEBUG-level default logging from actions {pull}51459[#51459] (issue: {issue}51198[#51198])\n+\n Mapping::\n * Dynamic mappings in indices created on 8.0 and later have stricter validation at mapping update time and\n   results in a deprecation warning for indices created in Elasticsearch 7.7.0 and later.\n-  (e.g. incorrect analyzer settings or unknown field types). {pull}51233[#51233]\n+  (e.g. incorrect analyzer settings or unknown field types). {pull}51233[#51233] (issues: {issue}17411[#17411], {issue}24419[#24419])\n \n Search::\n-* A regression that allowed negative scores in a script_score query was corrected.\n-  A behaviour is restored that throws an error if script_score query produces\n-  a negative score {pull}52478[#52478].\n+* Make range query rounding consistent {pull}50237[#50237] (issue: {issue}50009[#50009])\n * Pipeline aggregation validation errors that used to return HTTP\n   500s/Internal Server Errors now return 400/Bad Request {pull}53669[#53669].\n   As a bonus we now return a list of validation errors rather than returning\n   the first one we encounter.\n+\n+\n+\n+[[breaking-java-7.7.0]]\n+[float]\n+=== Breaking Java changes\n+\n+Infra/Core::\n+* Fix ActionListener.map exception handling {pull}50886[#50886]\n+\n+Machine Learning::\n+* Add expected input field type to trained model config {pull}53083[#53083]\n+\n+Transform::\n+* Enhance the output of preview to return full destination index details {pull}53572[#53572]\n+\n+\n+\n+[[deprecation-7.7.0]]\n+[float]\n+=== Deprecations\n+\n+Allocation::\n+* Deprecated support for delaying state recovery pending master nodes {pull}53646[#53646] (issue: {issue}51806[#51806])\n+\n+Authentication::\n+* Add warnings for invalid realm order config (#51195) {pull}51515[#51515]\n+* Deprecate timeout.tcp_read AD/LDAP realm setting {pull}47305[#47305] (issue: {issue}46028[#46028])\n+\n+Engine::\n+* Deprecate translog retention settings {pull}51588[#51588] (issues: {issue}45473[#45473], {issue}50775[#50775])\n+\n+Features/Features::\n+* Add cluster.remote.connect to deprecation info API {pull}54142[#54142] (issue: {issue}53924[#53924])\n+\n+Infra/Core::\n+* Add deprecation check for listener thread pool {pull}53438[#53438] (issues: {issue}53049[#53049], {issue}53317[#53317])\n+* Deprecate the logstash enabled setting {pull}53367[#53367]\n+* Deprecate the listener thread pool {pull}53266[#53266] (issue: {issue}53049[#53049])\n+* Deprecate creation of dot-prefixed index names except for hidden and system indices {pull}49959[#49959]\n+\n+Infra/REST API::\n+* Deprecate undocumented alternatives to the nodes hot threads API (#52640) {pull}52930[#52930] (issue: {issue}52640[#52640])\n+\n+Machine Learning::\n+* Renaming inference processor field field_mappings to new name field_map {pull}53433[#53433]\n+\n+Search::\n+* Emit deprecation warning when TermsLookup contains a type {pull}53731[#53731] (issue: {issue}41059[#41059])\n+* Deprecate BoolQueryBuilder's mustNot field {pull}53125[#53125]\n+\n+\n+\n+[[feature-7.7.0]]\n+[float]\n+=== New features\n+\n+Aggregations::\n+* Preserve metric types in top_metrics {pull}53288[#53288]\n+* Support multiple metrics in `top_metrics` agg {pull}52965[#52965] (issue: {issue}51813[#51813])\n+* Add size support to `top_metrics` {pull}52662[#52662] (issue: {issue}51813[#51813])\n+* HLRC support for string_stats {pull}52163[#52163]\n+* Add Boxplot Aggregation {pull}51948[#51948] (issue: {issue}33112[#33112])\n+\n+Analysis::\n+* Add nori_number token filter in analysis-nori {pull}53583[#53583]\n+\n+Authentication::\n+* Create API Key on behalf of other user {pull}52886[#52886] (issue: {issue}48716[#48716])\n+\n+Geo::\n+* Add support for distance queries on shape queries {pull}53468[#53468]\n+* Add support for distance queries on geo_shape queries {pull}53466[#53466] (issues: {issue}13351[#13351], {issue}39237[#39237])\n+* Add support for multipoint shape queries {pull}52564[#52564] (issue: {issue}52133[#52133])\n+* Add support for multipoint geoshape queries {pull}52133[#52133] (issue: {issue}37318[#37318])\n+\n+Infra/Core::\n+* Implement hidden indices {pull}50452[#50452] (issues: {issue}50251[#50251], {issue}50665[#50665], {issue}50762[#50762])\n+\n+Infra/Packaging::\n+* Introduce aarch64 packaging {pull}53914[#53914]\n+\n+Machine Learning::\n+* Implement ILM policy for .ml-state* indices {pull}52356[#52356] (issue: {issue}29938[#29938])\n+\n+Mapping::\n+* Introduce a `constant_keyword` field. {pull}49713[#49713]\n+\n+SQL::\n+* constant_keyword support {pull}53241[#53241] (issue: {issue}53016[#53016])\n+* Add optimisations for not-equalities {pull}51088[#51088] (issue: {issue}49637[#49637])\n+* Add support for passing query parameters in REST API calls {pull}51029[#51029] (issue: {issue}42916[#42916])\n+\n+Search::\n+* Introduce compound query {pull}52387[#52387] (issue: {issue}51967[#51967])\n+* Add a cluster setting to disallow expensive queries {pull}51385[#51385] (issue: {issue}29050[#29050])\n+* Add new x-pack endpoints to track the progress of a search asynchronously {pull}49931[#49931] (issue: {issue}49091[#49091])\n+\n+\n+\n+[[enhancement-7.7.0]]\n+[float]\n+=== Enhancements\n+\n+Aggregations::\n+* Try to save memory on aggregations {pull}53793[#53793]\n+* Speed up partial reduce of terms aggregations {pull}53216[#53216] (issue: {issue}51857[#51857])\n+* Simplify SiblingPipelineAggregator {pull}53144[#53144]\n+* Add histogram field type support to boxplot aggs {pull}52265[#52265] (issues: {issue}33112[#33112], {issue}52233[#52233])\n+* Percentiles aggregation validation checks for range {pull}51871[#51871] (issue: {issue}51808[#51808])\n+* Begin moving date_histogram to offset rounding (take two) {pull}51271[#51271] (issues: {issue}50609[#50609], {issue}50873[#50873])\n+* Password-protected Keystore Feature Branch PR {pull}51123[#51123] (issues: {issue}32691[#32691], {issue}49340[#49340])\n+* Implement top_metrics agg {pull}51155[#51155] (issue: {issue}48069[#48069])\n+* Bucket aggregation circuit breaker optimization. {pull}46751[#46751]\n+\n+Analysis::\n+* Removes old Lucene's experimental flag from analyzer documentations {pull}53217[#53217]\n+\n+Authentication::\n+* Add exception metadata for disabled features {pull}52811[#52811] (issues: {issue}47759[#47759], {issue}52311[#52311], {issue}55255[#55255])\n+* Validate role templates before saving role mapping {pull}52636[#52636] (issue: {issue}48773[#48773])\n+* Add support for secondary authentication {pull}52093[#52093]\n+* Expose API key name to the ingest pipeline {pull}51305[#51305] (issues: {issue}46847[#46847], {issue}49106[#49106])\n+* Disallow Password Change when authenticated by Token {pull}49694[#49694] (issue: {issue}48752[#48752])\n+\n+Authorization::\n+* Allow kibana_system to create and invalidate API keys on behalf of other users {pull}53824[#53824] (issue: {issue}48716[#48716])\n+* Add \"grant_api_key\" cluster privilege {pull}53527[#53527] (issues: {issue}48716[#48716], {issue}52886[#52886])\n+* Giving kibana user privileges to create custom link index {pull}53221[#53221] (issue: {issue}59305[#59305])\n+* [APM] Allow kibana to collect APM telemetry in background task {pull}52917[#52917] (issue: {issue}50757[#50757])\n+* Add the new 'maintenance' privilege containing 4 actions (#29998) {pull}50643[#50643]\n+\n+Cluster Coordination::\n+* Describe STALE_STATE_CONFIG in ClusterFormationFH {pull}53878[#53878] (issue: {issue}53734[#53734])\n+\n+Distributed::\n+* Introduce formal role for remote cluster client {pull}53924[#53924]\n+* Shortcut query phase using the results of other shards {pull}51852[#51852] (issues: {issue}49601[#49601], {issue}51708[#51708])\n+* Flush instead of synced-flush inactive shards {pull}49126[#49126] (issues: {issue}31965[#31965], {issue}48430[#48430])\n+\n+Engine::\n+* Restore off-heap loading for term dictionary in ReadOnlyEngine {pull}53713[#53713] (issues: {issue}43158[#43158], {issue}51247[#51247])\n+* Separate translog from index deletion conditions {pull}52556[#52556]\n+* Always rewrite search shard request outside of the search thread pool {pull}51708[#51708] (issue: {issue}49601[#49601])\n+* Move the terms index of `_id` off-heap. {pull}52405[#52405] (issue: {issue}42838[#42838])\n+* Cache completion stats between refreshes {pull}51991[#51991] (issue: {issue}51915[#51915])\n+* Use local checkpoint to calculate min translog gen for recovery {pull}51905[#51905] (issue: {issue}49970[#49970])\n+\n+Features/CAT APIs::\n+* /_cat/shards support path stats {pull}53461[#53461]\n+* Allow _cat indices & aliases to use indices options {pull}53248[#53248] (issue: {issue}52304[#52304])\n+\n+Features/Features::\n+* Enable deprecation checks for removed settings {pull}53317[#53317]\n+\n+Features/ILM+SLM::\n+* Hide ILM & SLM history aliases {pull}53564[#53564]\n+* Avoid race condition in ILMHistorySotre {pull}53039[#53039] (issues: {issue}50353[#50353], {issue}52853[#52853])\n+* Make FreezeStep retryable {pull}52540[#52540]\n+* Make DeleteStep retryable {pull}52494[#52494]\n+* Allow forcemerge in the hot phase for ILM policies {pull}52073[#52073] (issue: {issue}43165[#43165])\n+* Stop policy on last PhaseCompleteStep instead of TerminalPolic\u2026 {pull}51631[#51631] (issue: {issue}48431[#48431])\n+* Convert ILM and SLM histories into hidden indices {pull}51456[#51456]\n+* Make UpdateSettingsStep retryable {pull}51235[#51235] (issues: {issue}44135[#44135], {issue}48183[#48183])\n+* Expose master timeout for ILM actions {pull}51130[#51130] (issue: {issue}44136[#44136])\n+* Wait for active shards on rolled index in a separate step {pull}50718[#50718] (issues: {issue}44135[#44135], {issue}48183[#48183])\n+* Adding best_compression {pull}49974[#49974]\n+\n+Features/Indices APIs::\n+* Add IndexTemplateV2 to MetaData {pull}53753[#53753] (issue: {issue}53101[#53101])\n+* Add ComponentTemplate to MetaData {pull}53290[#53290] (issue: {issue}53101[#53101])\n+\n+Features/Ingest::\n+* Reduce log level for pipeline failure {pull}54097[#54097] (issue: {issue}51459[#51459])\n+* Support array for all string ingest processors {pull}53343[#53343] (issue: {issue}51087[#51087])\n+* Add empty_value parameter to CSV processor {pull}51567[#51567]\n+* Add pipeline name to ingest metadata {pull}50467[#50467] (issue: {issue}42106[#42106])\n+\n+Features/Java High Level REST Client::\n+* SourceExists HLRC uses GetSourceRequest instead of GetRequest {pull}51789[#51789] (issue: {issue}50885[#50885])\n+* Add async_search.submit to HLRC {pull}53592[#53592] (issue: {issue}49091[#49091])\n+* Add Get Source API to the HLRC {pull}50885[#50885] (issue: {issue}47678[#47678])\n+\n+Features/Monitoring::\n+* Secure password for monitoring HTTP exporter {pull}50919[#50919] (issue: {issue}50197[#50197])\n+* Validate SSL settings at parse time {pull}49196[#49196] (issue: {issue}47711[#47711])\n+\n+Features/Stats::\n+* Add analysis components and mapping types to the usage API. {pull}51031[#51031]\n+\n+Features/Watcher::\n+* Make watch history indices hidden {pull}52962[#52962] (issue: {issue}50251[#50251])\n+* Upgrade to the latest OWASP HTML sanitizer {pull}50765[#50765] (issue: {issue}50395[#50395])\n+\n+Infra/Core::\n+* Enable helpful null pointer exceptions {pull}54853[#54853]\n+* Allow keystore add to handle multiple settings {pull}54229[#54229] (issue: {issue}54191[#54191])\n+* Report parser name and location in XContent deprecation warnings {pull}53805[#53805]\n+* Report parser name and location in XContent deprecation warnings {pull}53752[#53752]\n+* Deprecate all variants of a ParseField with no replacement {pull}53722[#53722]\n+* Add a helper method to parse maps of objects {pull}53096[#53096]\n+* Allow specifying an exclusive set of fields on ObjectParser {pull}52893[#52893]\n+* Support joda style date patterns in 7.x {pull}52555[#52555]\n+* Implement hidden aliases {pull}52547[#52547] (issue: {issue}52304[#52304])\n+* Allow ObjectParsers to specify required sets of fields {pull}49661[#49661] (issue: {issue}48824[#48824])\n+\n+Infra/Logging::\n+* Capture stdout and stderr to log4j log {pull}50259[#50259] (issue: {issue}50156[#50156])\n+\n+Infra/Packaging::\n+* Introduce aarch64 Docker image {pull}53936[#53936] (issue: {issue}53914[#53914])\n+* Introduce jvm.options.d for customizing JVM options {pull}51882[#51882] (issue: {issue}51626[#51626])\n+\n+Infra/Plugins::\n+* Allow sha512 checksum without filename for maven plugins {pull}52668[#52668] (issue: {issue}52413[#52413])\n+\n+Infra/Scripting::\n+* Scripting: Context script cache unlimited compile {pull}53769[#53769] (issue: {issue}50152[#50152])\n+* Scripting: Increase ingest script cache defaults {pull}53765[#53765] (issue: {issue}50152[#50152])\n+* Scripting: Per-context script cache, default off (#52855) {pull}53756[#53756] (issues: {issue}50152[#50152], {issue}52855[#52855])\n+* Scripting: Per-context script cache, default off {pull}52855[#52855] (issue: {issue}50152[#50152])\n+* Improve Painless compilation performance for nested conditionals {pull}52056[#52056]\n+* Scripting: Add char position of script errors {pull}51069[#51069] (issue: {issue}50993[#50993])\n+\n+Infra/Settings::\n+* Allow keystore add-file to handle multiple settings {pull}54240[#54240] (issue: {issue}54191[#54191])\n+* Settings: AffixSettings as validator dependencies {pull}52973[#52973] (issue: {issue}52933[#52933])\n+\n+License::\n+* Simplify ml license checking with XpackLicenseState internals {pull}52684[#52684] (issue: {issue}52115[#52115])\n+* License removal leads back to a basic license {pull}52407[#52407] (issue: {issue}45022[#45022])\n+* Refactor license checking {pull}52118[#52118] (issue: {issue}51864[#51864])\n+* Add enterprise mode and refactor {pull}51864[#51864] (issue: {issue}51081[#51081])\n+\n+Machine Learning::\n+* Stratified cross validation split for classification {pull}54087[#54087]\n+* Data frame analytics data counts {pull}53998[#53998]\n+* Verify that the field is aggregatable before attempting cardinality aggregation {pull}53874[#53874] (issue: {issue}53876[#53876])\n+* Adds multi-class feature importance support {pull}53803[#53803]\n+* Data frame analytics analysis stats {pull}53788[#53788]\n+* Add a model memory estimation endpoint for anomaly detection {pull}53507[#53507] (issue: {issue}53219[#53219])\n+* [Inference] adds new default_field_map field to trained models {pull}53294[#53294]\n+* Improve DF analytics audits and logging {pull}53179[#53179]\n+* Add indices_options to datafeed config and update {pull}52793[#52793] (issue: {issue}48056[#48056])\n+* Parse and report memory usage for DF Analytics {pull}52778[#52778]\n+* Adds the class_assignment_objective parameter to classification {pull}52763[#52763] (issue: {issue}52427[#52427])\n+* Add reason to DataFrameAnalyticsTask updateState log message {pull}52659[#52659] (issue: {issue}52654[#52654])\n+* [Inference] Add support for multi-value leaves to the tree model {pull}52531[#52531]\n+* Make ml internal indices hidden {pull}52423[#52423] (issue: {issue}52420[#52420])\n+* Add _cat/ml/data_frame/analytics API {pull}52260[#52260] (issue: {issue}51413[#51413])\n+* Adds feature importance option to inference processor {pull}52218[#52218]\n+* Switch poor categorization audit warning to use status field {pull}52195[#52195] (issues: {issue}50749[#50749], {issue}51146[#51146], {issue}51879[#51879])\n+* Retry persisting DF Analytics results {pull}52048[#52048]\n+* Improve multiline_start_pattern for CSV in find_file_structure {pull}51737[#51737]\n+* Add _cat/ml/trained_models API {pull}51529[#51529] (issue: {issue}51414[#51414])\n+* Add GET _cat/ml/datafeeds {pull}51500[#51500] (issue: {issue}51411[#51411])\n+* Use CSV ingest processor in find_file_structure ingest pipeline {pull}51492[#51492] (issue: {issue}56038[#56038])\n+* Add _cat/ml/anomaly_detectors API {pull}51364[#51364]\n+* [Inference] add tags url param to GET {pull}51330[#51330]\n+* Add parsers for inference configuration classes {pull}51300[#51300]\n+* Make datafeeds work with nanosecond time fields {pull}51180[#51180] (issue: {issue}49889[#49889])\n+* Add audit warning for 1000 categories found early in job {pull}51146[#51146] (issue: {issue}50749[#50749])\n+* Adds support for a global calendars {pull}50372[#50372] (issue: {issue}45013[#45013])\n+\n+Mapping::\n+* Wildcard field - add normalizer support {pull}53851[#53851]\n+* Wildcard field - added case insensitive search option {pull}53814[#53814]\n+* Append index name for the source of the cluster put-mapping task {pull}52690[#52690]\n+\n+Network::\n+* Give helpful message on remote connections disabled {pull}53690[#53690]\n+* Add server name to remote info API {pull}53634[#53634]\n+* Log when probe succeeds but full connection fails {pull}51304[#51304]\n+* Encrypt generated key with AES {pull}51019[#51019] (issue: {issue}50843[#50843])\n+\n+Ranking::\n+* Adds recall@k metric to rank eval API {pull}52577[#52577] (issue: {issue}51676[#51676])\n+\n+SQL::\n+* Jdbc debugging enhancement {pull}53880[#53880]\n+* Transfer version compatibility decision to the server {pull}53082[#53082] (issue: {issue}52766[#52766])\n+* Use a proper error message for queries directed at empty mapping indices {pull}52967[#52967] (issue: {issue}52865[#52865])\n+* Use calendar_interval of 1d for HISTOGRAMs with 1 DAY intervals {pull}52749[#52749] (issue: {issue}52713[#52713])\n+* Use a calendar interval for histograms over 1 month intervals {pull}52586[#52586] (issue: {issue}51538[#51538])\n+* Make parsing of date more lenient {pull}52137[#52137] (issue: {issue}49379[#49379])\n+* Enhance timestamp escaped literal parsing {pull}52097[#52097] (issue: {issue}46069[#46069])\n+* Handle uberjar scenario where the ES jdbc driver file is bundled in another jar {pull}51856[#51856] (issue: {issue}50201[#50201])\n+* Verify Full-Text Search functions not allowed in SELECT {pull}51568[#51568] (issue: {issue}47446[#47446])\n+* Extend the optimisations for equalities {pull}50792[#50792] (issue: {issue}49637[#49637])\n+* Add trace logging for search responses coming from server {pull}50530[#50530]\n+* Extend DATE_TRUNC to also operate on intervals(elastic - #46632 ) {pull}47720[#47720] (issue: {issue}46632[#46632])\n+* Enchance output of explain for optimized plan {pull}33718[#33718]\n+\n+Search::\n+* HLRC: Don't send defaults for SubmitAsyncSearchRequest {pull}54200[#54200]\n+* Reduce performance impact of ExitableDirectoryReader {pull}53978[#53978] (issues: {issue}52822[#52822], {issue}53166[#53166], {issue}53496[#53496])\n+* Add heuristics to compute pre_filter_shard_size when unspecified {pull}53873[#53873] (issue: {issue}39835[#39835])\n+* Add async_search get and delete APIs to HLRC {pull}53828[#53828] (issue: {issue}49091[#49091])\n+* Increase step between checks for cancellation {pull}53712[#53712] (issues: {issue}52822[#52822], {issue}53496[#53496])\n+* Refine SearchProgressListener internal API {pull}53373[#53373]\n+* Check for query cancellation during rewrite {pull}53166[#53166] (issue: {issue}52822[#52822])\n+* Implement Cancellable DirectoryReader {pull}52822[#52822]\n+* Address MinAndMax generics warnings {pull}52642[#52642] (issue: {issue}49092[#49092])\n+* Clarify when shard iterators get sorted {pull}52633[#52633]\n+* Generalize how queries on `_index` are handled at rewrite time {pull}52486[#52486] (issues: {issue}49254[#49254], {issue}49713[#49713])\n+* Remove the query builder serialization from QueryShardException message {pull}51885[#51885] (issues: {issue}48910[#48910], {issue}51843[#51843])\n+* Short circuited to MatchNone for non-participating  slice {pull}51207[#51207]\n+* Add \"did you mean\" to unknown queries {pull}51177[#51177]\n+* Exclude unmapped fields during max clause limit checking for querying {pull}49523[#49523] (issue: {issue}49002[#49002])\n+\n+Security::\n+* Add error message in JSON response {pull}54389[#54389]\n+\n+Snapshot/Restore::\n+* Use Azure Bulk Deletes in Azure Repository {pull}53919[#53919] (issue: {issue}53865[#53865])\n+* Only link fd* files during source-only snapshot {pull}53463[#53463] (issue: {issue}50231[#50231])\n+* Add Blob Download Retries to GCS Repository {pull}52479[#52479] (issues: {issue}46589[#46589], {issue}52319[#52319])\n+* Better Incrementality for Snapshots of Unchanged Shards {pull}52182[#52182]\n+* Add Region and Signer Algorithm Overrides to S3 Repos {pull}52112[#52112] (issue: {issue}51861[#51861])\n+* Allow Parallel Snapshot Restore And Delete {pull}51608[#51608] (issue: {issue}41463[#41463])\n+\n+Store::\n+* HybridDirectory should mmap postings. {pull}52641[#52641]\n+\n+Transform::\n+* Transition Transforms to using hidden indices for notifcations index {pull}53773[#53773] (issue: {issue}53762[#53762])\n+* [Rollup] add processing stats to record the time spent for processing results {pull}53770[#53770]\n+* Create GET _cat/transforms API Issue {pull}53643[#53643] (issue: {issue}51412[#51412])\n+* Add support for script in group_by {pull}53167[#53167] (issue: {issue}43152[#43152])\n+* Implement node.transform to control where to run a transform {pull}52712[#52712] (issues: {issue}48734[#48734], {issue}50033[#50033], {issue}52200[#52200])\n+* Add support for filter aggregation {pull}52483[#52483] (issue: {issue}52151[#52151])\n+* Provide exponential_avg* stats for batch transforms {pull}52041[#52041] (issue: {issue}52037[#52037])\n+* Improve irrecoverable error detection - part 2 {pull}52003[#52003] (issue: {issue}51820[#51820])\n+* Mark transform API's stable {pull}51862[#51862]\n+* Improve irrecoverable error detection {pull}51820[#51820] (issue: {issue}50135[#50135])\n+* Add support for percentile aggs {pull}51808[#51808] (issue: {issue}51663[#51663])\n+* Disallow fieldnames with a dot at start and/or end {pull}51369[#51369]\n+* Avoid mapping problems with index templates {pull}51368[#51368] (issue: {issue}51321[#51321])\n+* Handle permanent bulk indexing errors {pull}51307[#51307] (issue: {issue}50122[#50122])\n+* Improve force stop robustness in case of an error {pull}51072[#51072]\n+\n+\n+\n+[[bug-7.7.0]]\n+[float]\n+=== Bug fixes\n+\n+Aggregations::\n+* Fix date_nanos in composite aggs {pull}53315[#53315] (issue: {issue}53168[#53168])\n+* Fix composite agg sort bug {pull}53296[#53296] (issue: {issue}52480[#52480])\n+* Decode max and min optimization more carefully {pull}52336[#52336] (issue: {issue}52220[#52220])\n+* Fix a DST error in date_histogram {pull}52016[#52016] (issue: {issue}50265[#50265])\n+* Use #name() instead of #simpleName() when generating doc values {pull}51920[#51920] (issues: {issue}50307[#50307], {issue}51847[#51847])\n+* Fix a sneaky bug in rare_terms {pull}51868[#51868] (issue: {issue}51020[#51020])\n+* Support time_zone on composite's date_histogram {pull}51172[#51172] (issues: {issue}45199[#45199], {issue}45200[#45200])\n+\n+Allocation::\n+* Improve performance of shards limits decider {pull}53577[#53577] (issue: {issue}53559[#53559])\n+\n+Analysis::\n+* Mask wildcard query special characters on keyword queries {pull}53127[#53127] (issue: {issue}46300[#46300])\n+* Fix caching for PreConfiguredTokenFilter {pull}50912[#50912] (issue: {issue}50734[#50734])\n+\n+Audit::\n+* Logfile audit settings validation {pull}52537[#52537] (issues: {issue}47038[#47038], {issue}47711[#47711], {issue}52357[#52357])\n+\n+Authentication::\n+* Fix potential bug in concurrent token refresh support {pull}53668[#53668]\n+* Respect runas realm for ApiKey security operations {pull}52178[#52178] (issue: {issue}51975[#51975])\n+* Preserve ApiKey credentials for async verification {pull}51244[#51244]\n+* Don't fallback to anonymous for tokens/apikeys {pull}51042[#51042] (issue: {issue}50171[#50171])\n+* Fail gracefully on invalid token strings {pull}51014[#51014]\n+\n+Authorization::\n+* Explicitly require that delegate API keys have no privileges {pull}53647[#53647]\n+* Allow _rollup_search with read privilege {pull}52043[#52043] (issue: {issue}50245[#50245])\n+\n+CCR::\n+* Put CCR tasks on (data && remote cluster clients) {pull}54146[#54146] (issue: {issue}53924[#53924])\n+* Handle no such remote cluster exception in ccr {pull}53415[#53415] (issue: {issue}53225[#53225])\n+* Fix shard follow task cleaner under security {pull}52347[#52347] (issues: {issue}44702[#44702], {issue}51971[#51971])\n+\n+CRUD::\n+* Force execution of finish shard bulk request {pull}51957[#51957] (issue: {issue}51904[#51904])\n+* Return 429 status code when there's a read_only cluster block {pull}50166[#50166] (issue: {issue}49393[#49393])\n+\n+Cluster Coordination::\n+* Use special XContent registry for node tool {pull}54050[#54050] (issue: {issue}53549[#53549])\n+* Allow static cluster.max_voting_config_exclusions {pull}53717[#53717] (issue: {issue}53455[#53455])\n+* Allow joining node to trigger term bump {pull}53338[#53338] (issue: {issue}53271[#53271])\n+* Ignore timeouts with single-node discovery {pull}52159[#52159]\n+\n+Distributed::\n+* Execute retention lease syncs under system context {pull}53838[#53838] (issues: {issue}48430[#48430], {issue}53751[#53751])\n+* Exclude nested documents in LuceneChangesSnapshot {pull}51279[#51279]\n+\n+Engine::\n+* Fix doc_stats and segment_stats of ReadOnlyEngine {pull}53345[#53345] (issues: {issue}51303[#51303], {issue}51331[#51331])\n+* Do not wrap soft-deletes reader for segment stats {pull}51331[#51331] (issues: {issue}51192[#51192], {issue}51303[#51303])\n+* Account soft-deletes in FrozenEngine {pull}51192[#51192] (issue: {issue}50775[#50775])\n+\n+Features/CAT APIs::\n+* Fix NPE in RestPluginsAction {pull}52620[#52620] (issue: {issue}45321[#45321])\n+\n+Features/ILM+SLM::\n+* Disallow negative TimeValues {pull}53913[#53913] (issue: {issue}54041[#54041])\n+* Fix null config in SnapshotLifecyclePolicy.toRequest {pull}53328[#53328] (issues: {issue}44465[#44465], {issue}53171[#53171])\n+* Freeze step retry when not acknowledged {pull}53287[#53287]\n+* Make the set-single-node-allocation retryable (#52077) {pull}52138[#52138] (issue: {issue}52077[#52077])\n+* Make the set-single-node-allocation retryable {pull}52077[#52077] (issue: {issue}43401[#43401])\n+* Fix the init step to actually be retryable {pull}52076[#52076]\n+\n+Features/Ingest::\n+* Fix ingest pipeline _simulate api with empty docs never returns a res\u2026 {pull}52937[#52937] (issue: {issue}52833[#52833])\n+* Handle errors when evaluating if conditions in processors {pull}52543[#52543] (issue: {issue}52339[#52339])\n+* Fix delete enrich policy bug {pull}52179[#52179] (issue: {issue}51228[#51228])\n+* Fix ignore_missing in CsvProcessor {pull}51600[#51600]\n+* Missing suffix for German Month \"Juli\" in Grok Pattern MONTH (#51579) {pull}51591[#51591] (issue: {issue}51579[#51579])\n+* Don't overwrite target field with SetSecurityUserProcessor {pull}51454[#51454] (issue: {issue}51428[#51428])\n+\n+Features/Java High Level REST Client::\n+* Add unsupported parameters to HLRC search request {pull}53745[#53745]\n+* Fix AbstractBulkByScrollRequest slices parameter via Rest {pull}53068[#53068] (issue: {issue}53044[#53044])\n+* Send the fields param via body instead of URL params (elastic#42232) {pull}48840[#48840] (issues: {issue}42232[#42232], {issue}42877[#42877])\n+\n+Features/Java Low Level REST Client::\n+* Fix roles parsing in client nodes sniffer {pull}52888[#52888] (issue: {issue}52864[#52864])\n+\n+Features/Monitoring::\n+* Fix NPE in cluster state collector for monitoring {pull}52371[#52371] (issue: {issue}52317[#52317])\n+\n+Features/Stats::\n+* Switch to AtomicLong for \"IngestCurrent\" metric to prevent negative values {pull}52581[#52581] (issues: {issue}52406[#52406], {issue}52411[#52411])\n+\n+Features/Watcher::\n+* Disable Watcher script optimization for stored scripts {pull}53497[#53497] (issue: {issue}40212[#40212])\n+* The watcher indexing listener didn't handle document level exceptions. {pull}51466[#51466] (issue: {issue}32299[#32299])\n+\n+Geo::\n+* Handle properly indexing rectangles that crosses the dateline {pull}53810[#53810]\n+\n+Highlighting::\n+* Fix highlighter support in PinnedQuery and added test {pull}53716[#53716] (issue: {issue}53699[#53699])\n+\n+Infra/Core::\n+* Fix Joda compatibility in stream protocol {pull}53823[#53823] (issue: {issue}53586[#53586])\n+* Avoid self-suppression on grouped action listener {pull}53262[#53262] (issue: {issue}53174[#53174])\n+* Use correct package for `VM` class {pull}52803[#52803] (issue: {issue}47210[#47210])\n+* Ignore virtual ethernet devices that disappear {pull}51581[#51581] (issue: {issue}49914[#49914])\n+* Fix ingest timezone logic {pull}51215[#51215] (issue: {issue}51108[#51108])\n+\n+Infra/Logging::\n+* Fix LoggingOutputStream to work on windows {pull}51779[#51779] (issue: {issue}51532[#51532])\n+\n+Infra/Packaging::\n+* Handle special characters and spaces in JAVA_HOME path in elasticsearch-service.bat {pull}52676[#52676]\n+* Limit _FILE env var support to specific vars {pull}52525[#52525] (issue: {issue}52503[#52503])\n+* Always set default ES_PATH_CONF for package scriptlets {pull}51827[#51827] (issues: {issue}50246[#50246], {issue}50631[#50631])\n+\n+Infra/Plugins::\n+* Ensure only plugin REST tests are run for plugins {pull}53184[#53184] (issues: {issue}52114[#52114], {issue}53183[#53183])\n+\n+Machine Learning::\n+* Fix node serialization on GET df-nalytics stats without id {pull}54808[#54808] (issue: {issue}54807[#54807])\n+* Allow force stopping failed and stopping DF analytics {pull}54650[#54650]\n+* Take more care that normalize processes use unique named pipes {pull}54636[#54636] (issue: {issue}43830[#43830])\n+* Do not fail Evaluate API when the actual and predicted fields' types differ {pull}54255[#54255] (issue: {issue}54079[#54079])\n+* Get ML filters size should default to 100 {pull}54207[#54207] (issues: {issue}39976[#39976], {issue}54206[#54206])\n+* Introduce a \"starting\" datafeed state for lazy jobs {pull}53918[#53918] (issue: {issue}53763[#53763])\n+* Only retry persistence failures when the failure is intermittent and stop retrying when analytics job is stopping {pull}53725[#53725] (issue: {issue}53687[#53687])\n+* [Inference] fix number inference models returned in x-pack info API {pull}53540[#53540]\n+* Make classification evaluation metrics work when there is field mapping type mismatch {pull}53458[#53458] (issue: {issue}53485[#53485])\n+* Perform evaluation in multiple steps when necessary {pull}53295[#53295]\n+* Specifying missing_field_value value and using it instead of empty_string {pull}53108[#53108] (issue: {issue}1034[#1034])\n+* Use event.timezone in ingest pipeline from find_file_structure {pull}52720[#52720] (issue: {issue}9458[#9458])\n+* [Inference] don't return inflated definition when storing trained models {pull}52573[#52573]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "originalPosition": 507}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNTg3MTUy", "url": "https://github.com/elastic/elasticsearch/pull/55019#pullrequestreview-391587152", "createdAt": "2020-04-10T18:16:55Z", "commit": {"oid": "4935071b78ecc91b2668d5ad8178a07a5a661208"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea2f19c911cb5ec7f92a2553a755e8b63d8d49eb", "author": {"user": {"login": "bpintea", "name": "Bogdan Pintea"}}, "url": "https://github.com/elastic/elasticsearch/commit/ea2f19c911cb5ec7f92a2553a755e8b63d8d49eb", "committedDate": "2020-04-11T09:22:37Z", "message": "Update docs/reference/release-notes/7.7.asciidoc\n\nCo-Authored-By: James Rodewig <james.rodewig@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f1aea9ef1e92494f9517d767c6eab642e111819", "author": {"user": {"login": "bpintea", "name": "Bogdan Pintea"}}, "url": "https://github.com/elastic/elasticsearch/commit/9f1aea9ef1e92494f9517d767c6eab642e111819", "committedDate": "2020-04-11T09:23:52Z", "message": "Update docs/reference/release-notes/7.7.asciidoc\n\nCo-Authored-By: James Rodewig <james.rodewig@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "313b79bb71c7e395076f9f0ec364335ea34d484a", "author": {"user": {"login": "bpintea", "name": "Bogdan Pintea"}}, "url": "https://github.com/elastic/elasticsearch/commit/313b79bb71c7e395076f9f0ec364335ea34d484a", "committedDate": "2020-04-11T09:24:08Z", "message": "Update docs/reference/release-notes/7.7.asciidoc\n\nCo-Authored-By: James Rodewig <james.rodewig@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "06b75dcbc34b5f3a00f00dc7eac45e8904ebf727", "author": {"user": {"login": "bpintea", "name": "Bogdan Pintea"}}, "url": "https://github.com/elastic/elasticsearch/commit/06b75dcbc34b5f3a00f00dc7eac45e8904ebf727", "committedDate": "2020-04-11T09:24:18Z", "message": "Update docs/reference/release-notes/7.7.asciidoc\n\nCo-Authored-By: James Rodewig <james.rodewig@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9d2a927c3ced789e22f5d23c546ba92ee4c1e803", "author": {"user": {"login": "bpintea", "name": "Bogdan Pintea"}}, "url": "https://github.com/elastic/elasticsearch/commit/9d2a927c3ced789e22f5d23c546ba92ee4c1e803", "committedDate": "2020-04-11T09:25:02Z", "message": "Update docs/reference/release-notes/7.7.asciidoc\n\nCo-Authored-By: James Rodewig <james.rodewig@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "91701a1f8897e2c7494d954acd409a83e65b1874", "author": {"user": {"login": "bpintea", "name": "Bogdan Pintea"}}, "url": "https://github.com/elastic/elasticsearch/commit/91701a1f8897e2c7494d954acd409a83e65b1874", "committedDate": "2020-04-11T09:25:20Z", "message": "Update docs/reference/release-notes/7.7.asciidoc\n\nCo-Authored-By: James Rodewig <james.rodewig@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8b2380b56109be60423c462b8e33cce384182e36", "author": {"user": {"login": "bpintea", "name": "Bogdan Pintea"}}, "url": "https://github.com/elastic/elasticsearch/commit/8b2380b56109be60423c462b8e33cce384182e36", "committedDate": "2020-04-11T09:25:52Z", "message": "Update docs/reference/release-notes/7.7.asciidoc\n\nCo-Authored-By: James Rodewig <james.rodewig@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f1a745783f3f1dbbdd0b224bda0527aea0cb53ad", "author": {"user": {"login": "bpintea", "name": "Bogdan Pintea"}}, "url": "https://github.com/elastic/elasticsearch/commit/f1a745783f3f1dbbdd0b224bda0527aea0cb53ad", "committedDate": "2020-04-11T09:28:03Z", "message": "Update docs/reference/release-notes/7.7.asciidoc\n\nCo-Authored-By: James Rodewig <james.rodewig@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "30371cee9ea927ad7175b9bb6b511ac0df3a1887", "author": {"user": {"login": "bpintea", "name": "Bogdan Pintea"}}, "url": "https://github.com/elastic/elasticsearch/commit/30371cee9ea927ad7175b9bb6b511ac0df3a1887", "committedDate": "2020-04-11T09:31:13Z", "message": "Update docs/reference/release-notes/7.7.asciidoc\n\nCo-Authored-By: James Rodewig <james.rodewig@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b68f4a58ced9e84e782dbeea96024a1f8b60e58c", "author": {"user": {"login": "bpintea", "name": "Bogdan Pintea"}}, "url": "https://github.com/elastic/elasticsearch/commit/b68f4a58ced9e84e782dbeea96024a1f8b60e58c", "committedDate": "2020-04-11T09:32:31Z", "message": "Update docs/reference/release-notes/7.7.asciidoc\n\nCo-Authored-By: James Rodewig <james.rodewig@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4a89568978b28732dbd19da20346b011cb81d59c", "author": {"user": {"login": "bpintea", "name": "Bogdan Pintea"}}, "url": "https://github.com/elastic/elasticsearch/commit/4a89568978b28732dbd19da20346b011cb81d59c", "committedDate": "2020-04-11T09:32:43Z", "message": "Update docs/reference/release-notes/7.7.asciidoc\n\nCo-Authored-By: James Rodewig <james.rodewig@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f6541a633e4b10f509be6047f7aa4334cd00d0b", "author": {"user": {"login": "bpintea", "name": "Bogdan Pintea"}}, "url": "https://github.com/elastic/elasticsearch/commit/9f6541a633e4b10f509be6047f7aa4334cd00d0b", "committedDate": "2020-04-11T09:33:09Z", "message": "Update docs/reference/release-notes/7.7.asciidoc\n\nCo-Authored-By: James Rodewig <james.rodewig@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "40a533b4f3582395a41278085a49f16f35aae39b", "author": {"user": {"login": "bpintea", "name": "Bogdan Pintea"}}, "url": "https://github.com/elastic/elasticsearch/commit/40a533b4f3582395a41278085a49f16f35aae39b", "committedDate": "2020-04-11T09:33:54Z", "message": "Update docs/reference/release-notes/7.7.asciidoc\n\nCo-Authored-By: James Rodewig <james.rodewig@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b59507dce8d6c805ea486bec955404e826fc28d6", "author": {"user": {"login": "bpintea", "name": "Bogdan Pintea"}}, "url": "https://github.com/elastic/elasticsearch/commit/b59507dce8d6c805ea486bec955404e826fc28d6", "committedDate": "2020-04-11T09:34:06Z", "message": "Update docs/reference/release-notes/7.7.asciidoc\n\nCo-Authored-By: James Rodewig <james.rodewig@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "95c8a4563b4f2b87c8b3c4e2d003f5f53c62bb62", "author": {"user": {"login": "bpintea", "name": "Bogdan Pintea"}}, "url": "https://github.com/elastic/elasticsearch/commit/95c8a4563b4f2b87c8b3c4e2d003f5f53c62bb62", "committedDate": "2020-04-11T09:34:28Z", "message": "Update docs/reference/release-notes/7.7.asciidoc\n\nCo-Authored-By: James Rodewig <james.rodewig@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea52eabdec670321cc63346657d12a33658743b8", "author": {"user": {"login": "bpintea", "name": "Bogdan Pintea"}}, "url": "https://github.com/elastic/elasticsearch/commit/ea52eabdec670321cc63346657d12a33658743b8", "committedDate": "2020-04-11T09:34:56Z", "message": "Update docs/reference/release-notes/7.7.asciidoc\n\nCo-Authored-By: James Rodewig <james.rodewig@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "063eb7105565460cb308973972e48dd476058931", "author": {"user": {"login": "bpintea", "name": "Bogdan Pintea"}}, "url": "https://github.com/elastic/elasticsearch/commit/063eb7105565460cb308973972e48dd476058931", "committedDate": "2020-04-11T09:35:07Z", "message": "Update docs/reference/release-notes/7.7.asciidoc\n\nCo-Authored-By: James Rodewig <james.rodewig@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae33c482e1217bf03155a3968f4cd78572e0f934", "author": {"user": {"login": "bpintea", "name": "Bogdan Pintea"}}, "url": "https://github.com/elastic/elasticsearch/commit/ae33c482e1217bf03155a3968f4cd78572e0f934", "committedDate": "2020-04-11T09:35:16Z", "message": "Update docs/reference/release-notes/7.7.asciidoc\n\nCo-Authored-By: James Rodewig <james.rodewig@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d37e6c71284d019a9e7030d78e091926d8889f18", "author": {"user": {"login": "bpintea", "name": "Bogdan Pintea"}}, "url": "https://github.com/elastic/elasticsearch/commit/d37e6c71284d019a9e7030d78e091926d8889f18", "committedDate": "2020-04-11T09:35:44Z", "message": "Update docs/reference/release-notes/7.7.asciidoc\n\nCo-Authored-By: James Rodewig <james.rodewig@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "730833787f40e03c1e6cd067efc5da846d342565", "author": {"user": {"login": "bpintea", "name": "Bogdan Pintea"}}, "url": "https://github.com/elastic/elasticsearch/commit/730833787f40e03c1e6cd067efc5da846d342565", "committedDate": "2020-04-11T09:35:53Z", "message": "Update docs/reference/release-notes/7.7.asciidoc\n\nCo-Authored-By: James Rodewig <james.rodewig@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f5a14659bc5d242333e7e4a1f538773a3b9cc1a8", "author": {"user": {"login": "bpintea", "name": "Bogdan Pintea"}}, "url": "https://github.com/elastic/elasticsearch/commit/f5a14659bc5d242333e7e4a1f538773a3b9cc1a8", "committedDate": "2020-04-11T09:36:04Z", "message": "Update docs/reference/release-notes/7.7.asciidoc\n\nCo-Authored-By: James Rodewig <james.rodewig@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "11c3446942f4b22189473e546d017f715f29c255", "author": {"user": {"login": "bpintea", "name": "Bogdan Pintea"}}, "url": "https://github.com/elastic/elasticsearch/commit/11c3446942f4b22189473e546d017f715f29c255", "committedDate": "2020-04-11T09:36:14Z", "message": "Update docs/reference/release-notes/7.7.asciidoc\n\nCo-Authored-By: James Rodewig <james.rodewig@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d39829ae8461673a738ce05118483b0905e5292d", "author": {"user": {"login": "bpintea", "name": "Bogdan Pintea"}}, "url": "https://github.com/elastic/elasticsearch/commit/d39829ae8461673a738ce05118483b0905e5292d", "committedDate": "2020-04-11T09:36:23Z", "message": "Update docs/reference/release-notes/7.7.asciidoc\n\nCo-Authored-By: James Rodewig <james.rodewig@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "099bbde5f326a7fe02e135f729d727746773c106", "author": {"user": {"login": "bpintea", "name": "Bogdan Pintea"}}, "url": "https://github.com/elastic/elasticsearch/commit/099bbde5f326a7fe02e135f729d727746773c106", "committedDate": "2020-04-11T09:38:44Z", "message": "Address review comments\n\nRemoved APM category from PR title."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyMTIzOTQy", "url": "https://github.com/elastic/elasticsearch/pull/55019#pullrequestreview-392123942", "createdAt": "2020-04-13T12:50:04Z", "commit": {"oid": "099bbde5f326a7fe02e135f729d727746773c106"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3665, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}