{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ0OTA2ODUy", "number": 59089, "title": "Convert modules to use yamlRestTest", "bodyText": "This commit moves the modules REST tests to the\nnewly introduced yamlRestTest source set. A few\ntests have also been re-named to include the correct\nIT suffix. Without changing the names, the testing\nconventions task would fail since now that the YAML\ntests are no longer present pacify the convention.\nThese tests have moved to the internalClusterTest\nsource set.\nrelated: #56841", "createdAt": "2020-07-06T17:20:35Z", "url": "https://github.com/elastic/elasticsearch/pull/59089", "merged": true, "mergeCommit": {"oid": "ddd882b83541a039f631c237d2ab9d2b4bd6a9d3"}, "closed": true, "closedAt": "2020-07-13T16:32:43Z", "author": {"login": "jakelandis"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcyUggRAH2gAyNDQ0OTA2ODUyOjczYWVlMzhkMDdjOTczOGNiNjA3NjU3NTBlM2EzZDkwMTNkZjQzOGM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc0jiMNAH2gAyNDQ0OTA2ODUyOjdkY2RmOGJmN2UyNTk2ZmY4NDE2NTc1MGM3NTE1YWU4ZDliNzg2M2M=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "73aee38d07c9738cb60765750e3a3d9013df438c", "author": {"user": {"login": "jakelandis", "name": "Jake Landis"}}, "url": "https://github.com/elastic/elasticsearch/commit/73aee38d07c9738cb60765750e3a3d9013df438c", "committedDate": "2020-07-06T17:15:54Z", "message": "convert modules to yamlRestTest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "35e7f1ed2277e334ca55cb0bd12c38aa5c3ac5b0", "author": {"user": {"login": "jakelandis", "name": "Jake Landis"}}, "url": "https://github.com/elastic/elasticsearch/commit/35e7f1ed2277e334ca55cb0bd12c38aa5c3ac5b0", "committedDate": "2020-07-06T19:05:28Z", "message": "fix test names or disable integTest to allow testingConventions to pass"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6c1eccf01529f45ce7321fa90b66a2ebd9f6ad51", "author": {"user": {"login": "jakelandis", "name": "Jake Landis"}}, "url": "https://github.com/elastic/elasticsearch/commit/6c1eccf01529f45ce7321fa90b66a2ebd9f6ad51", "committedDate": "2020-07-06T19:23:07Z", "message": "configure restresources for geo"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0OTg5MjI2", "url": "https://github.com/elastic/elasticsearch/pull/59089#pullrequestreview-444989226", "createdAt": "2020-07-08T17:37:59Z", "commit": {"oid": "6c1eccf01529f45ce7321fa90b66a2ebd9f6ad51"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQxNzozODowMFrOGuyjBA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQxNzozOToyOFrOGuymTg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTcxNTg0NA==", "bodyText": "doesn't yaml-rest-test apply the rest-resources plugin?", "url": "https://github.com/elastic/elasticsearch/pull/59089#discussion_r451715844", "createdAt": "2020-07-08T17:38:00Z", "author": {"login": "mark-vieira"}, "path": "modules/aggs-matrix-stats/build.gradle", "diffHunk": "@@ -17,6 +17,7 @@\n  * under the License.\n  */\n apply plugin: 'elasticsearch.rest-resources'\n+apply plugin: 'elasticsearch.yaml-rest-test'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6c1eccf01529f45ce7321fa90b66a2ebd9f6ad51"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTcxNjI1Ng==", "bodyText": "What's creating this task? Can we structure things somehow such that projects only with yaml tests simply don't have this task at all?", "url": "https://github.com/elastic/elasticsearch/pull/59089#discussion_r451716256", "createdAt": "2020-07-08T17:38:44Z", "author": {"login": "mark-vieira"}, "path": "modules/aggs-matrix-stats/build.gradle", "diffHunk": "@@ -28,3 +29,5 @@ restResources {\n     includeCore '_common', 'indices', 'cluster', 'index', 'search', 'nodes'\n   }\n }\n+\n+integTest.enabled = false", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6c1eccf01529f45ce7321fa90b66a2ebd9f6ad51"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTcxNjY4Ng==", "bodyText": "let's use file() instead of new File().", "url": "https://github.com/elastic/elasticsearch/pull/59089#discussion_r451716686", "createdAt": "2020-07-08T17:39:28Z", "author": {"login": "mark-vieira"}, "path": "modules/geo/build.gradle", "diffHunk": "@@ -17,12 +17,21 @@\n  * under the License.\n  */\n apply plugin: 'elasticsearch.rest-resources'\n+apply plugin: 'elasticsearch.yaml-rest-test'\n \n esplugin {\n   description 'Placeholder plugin for geospatial features in ES. only registers geo_shape field mapper for now'\n   classname 'org.elasticsearch.geo.GeoPlugin'\n }\n \n+restResources {\n+  restApi {\n+    includeCore '_common', 'indices', 'index', 'search'\n+  }\n+}\n artifacts {\n-  restTests(new File(projectDir, \"src/test/resources/rest-api-spec/test\"))\n+  restTests(new File(projectDir, \"src/yamlRestTest/resources/rest-api-spec/test\"))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6c1eccf01529f45ce7321fa90b66a2ebd9f6ad51"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "35d04173941c5796e509f2872c1aca8174d456c3", "author": {"user": {"login": "jakelandis", "name": "Jake Landis"}}, "url": "https://github.com/elastic/elasticsearch/commit/35d04173941c5796e509f2872c1aca8174d456c3", "committedDate": "2020-07-08T19:29:35Z", "message": "move test over to internalClusterTest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5c010bc2de6e4a347cc47bf5b9ca63d648e6f7a6", "author": {"user": {"login": "jakelandis", "name": "Jake Landis"}}, "url": "https://github.com/elastic/elasticsearch/commit/5c010bc2de6e4a347cc47bf5b9ca63d648e6f7a6", "committedDate": "2020-07-08T19:30:17Z", "message": "Merge branch 'master' into yamlRestTest_modules"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a287c9fb91cb9eeba23e033931ff77fd43dbbb5", "author": {"user": {"login": "jakelandis", "name": "Jake Landis"}}, "url": "https://github.com/elastic/elasticsearch/commit/3a287c9fb91cb9eeba23e033931ff77fd43dbbb5", "committedDate": "2020-07-08T19:34:51Z", "message": "Merge remote-tracking branch 'upstream/master' into yamlRestTest_modules"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1MTIxMzQx", "url": "https://github.com/elastic/elasticsearch/pull/59089#pullrequestreview-445121341", "createdAt": "2020-07-08T20:54:20Z", "commit": {"oid": "3a287c9fb91cb9eeba23e033931ff77fd43dbbb5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3125782c0af1939cc0a6ff05755630b42dbac6d0", "author": {"user": {"login": "jakelandis", "name": "Jake Landis"}}, "url": "https://github.com/elastic/elasticsearch/commit/3125782c0af1939cc0a6ff05755630b42dbac6d0", "committedDate": "2020-07-08T21:19:50Z", "message": "move more over to internalClusterTest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c5ecce369470b7c2d846d61c99d5038b614d8b3", "author": {"user": {"login": "jakelandis", "name": "Jake Landis"}}, "url": "https://github.com/elastic/elasticsearch/commit/0c5ecce369470b7c2d846d61c99d5038b614d8b3", "committedDate": "2020-07-11T16:04:17Z", "message": "review changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "03331186c6c51408e57d5ece44eeef1850ea4ba9", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/03331186c6c51408e57d5ece44eeef1850ea4ba9", "committedDate": "2020-07-11T16:26:40Z", "message": "Merge branch 'master' into yamlRestTest_modules"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "01c4cafc5b39f04bea1f35b90f3f39ba0ea77ff7", "author": {"user": {"login": "jakelandis", "name": "Jake Landis"}}, "url": "https://github.com/elastic/elasticsearch/commit/01c4cafc5b39f04bea1f35b90f3f39ba0ea77ff7", "committedDate": "2020-07-13T13:52:55Z", "message": "Merge remote-tracking branch 'upstream/master' into yamlRestTest_modules"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7dcdf8bf7e2596ff84165750c7515ae8d9b7863c", "author": {"user": {"login": "jakelandis", "name": "Jake Landis"}}, "url": "https://github.com/elastic/elasticsearch/commit/7dcdf8bf7e2596ff84165750c7515ae8d9b7863c", "committedDate": "2020-07-13T15:54:10Z", "message": "fix merge conflict"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2313, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}