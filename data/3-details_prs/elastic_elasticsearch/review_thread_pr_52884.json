{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgwODIzNzIx", "number": 52884, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODoxOToyNlrODjur7w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODoyOTozNlrODju1HQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4NzkxNjYzOnYy", "diffSide": "LEFT", "path": "x-pack/plugin/eql/src/main/java/org/elasticsearch/xpack/eql/execution/search/SourceGenerator.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODoxOToyNlrOFvsvhw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODoxOToyNlrOFvsvhw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2MDQ1NQ==", "bodyText": "The sortBuilder is still defined above. Needs removal? Also, the two comments above are not needed anymore.", "url": "https://github.com/elastic/elasticsearch/pull/52884#discussion_r385560455", "createdAt": "2020-02-28T08:19:26Z", "author": {"login": "astefan"}, "path": "x-pack/plugin/eql/src/main/java/org/elasticsearch/xpack/eql/execution/search/SourceGenerator.java", "diffHunk": "@@ -45,10 +45,7 @@ public static SearchSourceBuilder sourceBuilder(QueryContainer container, QueryB\n         // Iterate through all the columns requested, collecting the fields that\n         // need to be retrieved from the result documents\n \n-        // NB: the sortBuilder takes care of eliminating duplicates\n-        container.fields().forEach(f -> f.v1().collectFields(sortBuilder));\n-        sortBuilder.build(source);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f012304cb5fa6411317b3626c222cd6914815703"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4Nzk0MDEzOnYy", "diffSide": "RIGHT", "path": "client/rest-high-level/src/test/java/org/elasticsearch/client/EqlIT.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODoyOTozNlrOFvs95w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODoyOTozNlrOFvs95w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2NDEzNQ==", "bodyText": "I would add a comment here explaining the reason for 250 value (that value larger than the 100 doc_values limit in ES). Maybe take the default limit in ES and use here a value made of that limit + 100 or something like that?", "url": "https://github.com/elastic/elasticsearch/pull/52884#discussion_r385564135", "createdAt": "2020-02-28T08:29:36Z", "author": {"login": "astefan"}, "path": "client/rest-high-level/src/test/java/org/elasticsearch/client/EqlIT.java", "diffHunk": "@@ -61,4 +63,31 @@ public void testBasicSearch() throws Exception {\n         assertNotNull(response.hits().events());\n         assertThat(response.hits().events().size(), equalTo(1));\n     }\n+\n+    public void testLargeMapping() throws Exception {\n+        Request doc1 = new Request(HttpPut.METHOD_NAME, \"/index/_doc/1\");\n+\n+        String now = DateUtils.nowWithMillisResolution().format(DateTimeFormatter.ISO_DATE_TIME);\n+        StringBuilder sb = new StringBuilder();\n+        sb.append(\"{\");\n+        for (int i = 0; i < 250; i++) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f012304cb5fa6411317b3626c222cd6914815703"}, "originalPosition": 31}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3691, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}