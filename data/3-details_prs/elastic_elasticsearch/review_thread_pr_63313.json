{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk4NDI4ODE5", "number": 63313, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxMTozNDoxMFrOEqr2hQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxMTozNDoxMFrOEqr2hQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEzMTk0MTE3OnYy", "diffSide": "RIGHT", "path": "client/rest-high-level/src/main/java/org/elasticsearch/client/transform/transforms/pivot/TermsGroupSource.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxMTozNDoxMFrOHdCAjg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxMjoyMjo0MFrOHdDrgA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDIwMzY2Mg==", "bodyText": "The parser is for receiving data from the server. Consequently, it should follow the same leniency that the lenient server parser has.\nSo, I don't think this declaration should be here (same for the rest of the HLRC group sources).", "url": "https://github.com/elastic/elasticsearch/pull/63313#discussion_r500203662", "createdAt": "2020-10-06T11:34:10Z", "author": {"login": "benwtrent"}, "path": "client/rest-high-level/src/main/java/org/elasticsearch/client/transform/transforms/pivot/TermsGroupSource.java", "diffHunk": "@@ -42,6 +42,8 @@\n         PARSER.declareString(optionalConstructorArg(), FIELD);\n         Script.declareScript(PARSER, optionalConstructorArg(), SCRIPT);\n         PARSER.declareBoolean(optionalConstructorArg(), MISSING_BUCKET);\n+        // either a script or a field must be declared, or both\n+        PARSER.declareRequiredFieldSet(FIELD.getPreferredName(), SCRIPT.getPreferredName());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2a5910342d572cf165958cfc01ba39cc68e04ff7"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDIxOTE1OA==", "bodyText": "\ud83d\udc4d yes, you are right. I also need to move the other check into the builders, as the constructor is used from the parser.", "url": "https://github.com/elastic/elasticsearch/pull/63313#discussion_r500219158", "createdAt": "2020-10-06T12:02:18Z", "author": {"login": "hendrikmuhs"}, "path": "client/rest-high-level/src/main/java/org/elasticsearch/client/transform/transforms/pivot/TermsGroupSource.java", "diffHunk": "@@ -42,6 +42,8 @@\n         PARSER.declareString(optionalConstructorArg(), FIELD);\n         Script.declareScript(PARSER, optionalConstructorArg(), SCRIPT);\n         PARSER.declareBoolean(optionalConstructorArg(), MISSING_BUCKET);\n+        // either a script or a field must be declared, or both\n+        PARSER.declareRequiredFieldSet(FIELD.getPreferredName(), SCRIPT.getPreferredName());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDIwMzY2Mg=="}, "originalCommit": {"oid": "2a5910342d572cf165958cfc01ba39cc68e04ff7"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDIzMTA0MA==", "bodyText": "however, I can't find any other place that validates. I will simply revert all HLRC changes.", "url": "https://github.com/elastic/elasticsearch/pull/63313#discussion_r500231040", "createdAt": "2020-10-06T12:22:40Z", "author": {"login": "hendrikmuhs"}, "path": "client/rest-high-level/src/main/java/org/elasticsearch/client/transform/transforms/pivot/TermsGroupSource.java", "diffHunk": "@@ -42,6 +42,8 @@\n         PARSER.declareString(optionalConstructorArg(), FIELD);\n         Script.declareScript(PARSER, optionalConstructorArg(), SCRIPT);\n         PARSER.declareBoolean(optionalConstructorArg(), MISSING_BUCKET);\n+        // either a script or a field must be declared, or both\n+        PARSER.declareRequiredFieldSet(FIELD.getPreferredName(), SCRIPT.getPreferredName());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDIwMzY2Mg=="}, "originalCommit": {"oid": "2a5910342d572cf165958cfc01ba39cc68e04ff7"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3111, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}