{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIxMzU0MDkw", "number": 57040, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxNTo0Mjo1NVrOD-pbZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxNTo0Mjo1NVrOD-pbZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3MDE3MDYzOnYy", "diffSide": "RIGHT", "path": "docs/reference/analysis/tokenfilters/shingle-tokenfilter.asciidoc", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxNTo0Mjo1NVrOGY4Dvg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxNjoxNDoyN1rOGY5ZfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODczNzQ3MA==", "bodyText": "should we also say \"two-word shingles and unigrams\"?", "url": "https://github.com/elastic/elasticsearch/pull/57040#discussion_r428737470", "createdAt": "2020-05-21T15:42:55Z", "author": {"login": "mayya-sharipova"}, "path": "docs/reference/analysis/tokenfilters/shingle-tokenfilter.asciidoc", "diffHunk": "@@ -4,46 +4,507 @@\n <titleabbrev>Shingle</titleabbrev>\n ++++\n \n-NOTE: Shingles are generally used to help speed up phrase queries.  Rather\n-than building filter chains by hand, you may find it easier to use the\n-<<index-phrases,`index-phrases`>> option on a text field.\n-\n-A token filter of type `shingle` that constructs shingles (token\n-n-grams) from a token stream. In other words, it creates combinations of\n-tokens as a single token. For example, the sentence \"please divide this\n-sentence into shingles\" might be tokenized into shingles \"please\n-divide\", \"divide this\", \"this sentence\", \"sentence into\", and \"into\n-shingles\".\n-\n-This filter handles position increments > 1 by inserting filler tokens\n-(tokens with termtext \"_\"). It does not handle a position increment of\n-0.\n-\n-The following are settings that can be set for a `shingle` token filter\n-type:\n-\n-[cols=\"<,<\",options=\"header\",]\n-|=======================================================================\n-|Setting |Description\n-|`max_shingle_size` |The maximum shingle size. Defaults to `2`.\n-\n-|`min_shingle_size` |The minimum shingle size. Defaults to `2`.\n-\n-|`output_unigrams` |If `true` the output will contain the input tokens\n-(unigrams) as well as the shingles. Defaults to `true`.\n-\n-|`output_unigrams_if_no_shingles` |If `output_unigrams` is `false` the\n-output will contain the input tokens (unigrams) if no shingles are\n-available. Note if `output_unigrams` is set to `true` this setting has\n-no effect. Defaults to `false`.\n-\n-|`token_separator` |The string to use when joining adjacent tokens to\n-form a shingle. Defaults to `\" \"`.\n-|`filler_token` | The string to use as a replacement for each position \n-at which there is no actual token in the stream. For instance this string is\n-used if the position increment is greater than one when a `stop` filter is used\n-together with the `shingle` filter. Defaults to `\"_\"`\n-|=======================================================================\n-\n-The index level setting `index.max_shingle_diff` controls the maximum allowed\n-difference between `max_shingle_size` and `min_shingle_size`.\n+Add shingles, or word https://en.wikipedia.org/wiki/N-gram[n-grams], to a token\n+stream by concatenating adjacent tokens. By default, the `shingle` token filter\n+creates two-word shingles.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "75fc455b8d167263464fb4ad69e75b29b45fa642"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODc1OTQyMQ==", "bodyText": "Good catch. I've updated this to \"outputs two-word shingles and unigrams\".", "url": "https://github.com/elastic/elasticsearch/pull/57040#discussion_r428759421", "createdAt": "2020-05-21T16:14:27Z", "author": {"login": "jrodewig"}, "path": "docs/reference/analysis/tokenfilters/shingle-tokenfilter.asciidoc", "diffHunk": "@@ -4,46 +4,507 @@\n <titleabbrev>Shingle</titleabbrev>\n ++++\n \n-NOTE: Shingles are generally used to help speed up phrase queries.  Rather\n-than building filter chains by hand, you may find it easier to use the\n-<<index-phrases,`index-phrases`>> option on a text field.\n-\n-A token filter of type `shingle` that constructs shingles (token\n-n-grams) from a token stream. In other words, it creates combinations of\n-tokens as a single token. For example, the sentence \"please divide this\n-sentence into shingles\" might be tokenized into shingles \"please\n-divide\", \"divide this\", \"this sentence\", \"sentence into\", and \"into\n-shingles\".\n-\n-This filter handles position increments > 1 by inserting filler tokens\n-(tokens with termtext \"_\"). It does not handle a position increment of\n-0.\n-\n-The following are settings that can be set for a `shingle` token filter\n-type:\n-\n-[cols=\"<,<\",options=\"header\",]\n-|=======================================================================\n-|Setting |Description\n-|`max_shingle_size` |The maximum shingle size. Defaults to `2`.\n-\n-|`min_shingle_size` |The minimum shingle size. Defaults to `2`.\n-\n-|`output_unigrams` |If `true` the output will contain the input tokens\n-(unigrams) as well as the shingles. Defaults to `true`.\n-\n-|`output_unigrams_if_no_shingles` |If `output_unigrams` is `false` the\n-output will contain the input tokens (unigrams) if no shingles are\n-available. Note if `output_unigrams` is set to `true` this setting has\n-no effect. Defaults to `false`.\n-\n-|`token_separator` |The string to use when joining adjacent tokens to\n-form a shingle. Defaults to `\" \"`.\n-|`filler_token` | The string to use as a replacement for each position \n-at which there is no actual token in the stream. For instance this string is\n-used if the position increment is greater than one when a `stop` filter is used\n-together with the `shingle` filter. Defaults to `\"_\"`\n-|=======================================================================\n-\n-The index level setting `index.max_shingle_diff` controls the maximum allowed\n-difference between `max_shingle_size` and `min_shingle_size`.\n+Add shingles, or word https://en.wikipedia.org/wiki/N-gram[n-grams], to a token\n+stream by concatenating adjacent tokens. By default, the `shingle` token filter\n+creates two-word shingles.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODczNzQ3MA=="}, "originalCommit": {"oid": "75fc455b8d167263464fb4ad69e75b29b45fa642"}, "originalPosition": 49}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 272, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}