{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc0NDU4NTkx", "number": 52281, "title": "QL: Extract common Failure class", "bodyText": "Shared across SQL and EQL", "createdAt": "2020-02-12T18:22:33Z", "url": "https://github.com/elastic/elasticsearch/pull/52281", "merged": true, "mergeCommit": {"oid": "1aeda20d3ec3d6c885de03c6043dd1e8eab9f230"}, "closed": true, "closedAt": "2020-02-13T12:14:43Z", "author": {"login": "costin"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcDqQP-gH2gAyMzc0NDU4NTkxOjczYTMzODEwYTI1ZjhjMDE3YWU0N2E1MTJmOTk0ZTVjODgxZWIwZDM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcD5PcpgFqTM1ODE0NDcwNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "73a33810a25f8c017ae47a512f994e5c881eb0d3", "author": {"user": {"login": "costin", "name": "Costin Leau"}}, "url": "https://github.com/elastic/elasticsearch/commit/73a33810a25f8c017ae47a512f994e5c881eb0d3", "committedDate": "2020-02-12T18:01:37Z", "message": "QL: Extract common Failure class\n\nShared across SQL and EQL"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU3NjgyODQ4", "url": "https://github.com/elastic/elasticsearch/pull/52281#pullrequestreview-357682848", "createdAt": "2020-02-12T18:24:03Z", "commit": {"oid": "73a33810a25f8c017ae47a512f994e5c881eb0d3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxODoyNDowM1rOFo5lzQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxODoyNDowM1rOFo5lzQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODQzMDkyNQ==", "bodyText": "This is done on purpose so that Failures on the same node get collapsed:\nLine 1:15 ...\nLine 1:15...\nSo far all Failures are related and it's easier to just have one overall.", "url": "https://github.com/elastic/elasticsearch/pull/52281#discussion_r378430925", "createdAt": "2020-02-12T18:24:03Z", "author": {"login": "costin"}, "path": "x-pack/plugin/ql/src/main/java/org/elasticsearch/xpack/ql/common/Failure.java", "diffHunk": "@@ -50,7 +50,7 @@ public boolean equals(Object obj) {\n         }\n \n         Failure other = (Failure) obj;\n-        return Objects.equals(message, other.message) && Objects.equals(node, other.node);\n+        return Objects.equals(node, other.node);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "73a33810a25f8c017ae47a512f994e5c881eb0d3"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU3NzgxNDA2", "url": "https://github.com/elastic/elasticsearch/pull/52281#pullrequestreview-357781406", "createdAt": "2020-02-12T20:57:18Z", "commit": {"oid": "73a33810a25f8c017ae47a512f994e5c881eb0d3"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQyMDo1NzoxOVrOFo-Tcg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQyMDo1OTo0MFrOFo-XoQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODUwODE0Ng==", "bodyText": "Is this necessary?", "url": "https://github.com/elastic/elasticsearch/pull/52281#discussion_r378508146", "createdAt": "2020-02-12T20:57:19Z", "author": {"login": "matriv"}, "path": "x-pack/plugin/sql/src/test/java/org/elasticsearch/xpack/sql/execution/search/QuerierTests.java", "diffHunk": "@@ -87,7 +87,7 @@ public void testAggSorting_TwoFields_One_Presorted() {\n \n     @SuppressWarnings({\"rawtypes\", \"unchecked\"})\n     public void testAggSorting_FourFields() {\n-        List<Comparator> comparators = Arrays.asList(\n+        List<Comparator> comparators = Arrays.<Comparator> asList(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "73a33810a25f8c017ae47a512f994e5c881eb0d3"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODUwOTIxNw==", "bodyText": "The hierarchy feels a bit unnatural: a verification exception in analysis phase is a subclass of SqlClientException.", "url": "https://github.com/elastic/elasticsearch/pull/52281#discussion_r378509217", "createdAt": "2020-02-12T20:59:40Z", "author": {"login": "matriv"}, "path": "x-pack/plugin/sql/src/main/java/org/elasticsearch/xpack/sql/analysis/analyzer/VerificationException.java", "diffHunk": "@@ -5,31 +5,20 @@\n  */\n package org.elasticsearch.xpack.sql.analysis.analyzer;\n \n-import org.elasticsearch.xpack.ql.tree.Location;\n-import org.elasticsearch.xpack.ql.util.StringUtils;\n-import org.elasticsearch.xpack.sql.analysis.AnalysisException;\n-import org.elasticsearch.xpack.sql.analysis.analyzer.Verifier.Failure;\n+import org.elasticsearch.rest.RestStatus;\n+import org.elasticsearch.xpack.ql.common.Failure;\n+import org.elasticsearch.xpack.sql.SqlClientException;\n \n import java.util.Collection;\n-import java.util.stream.Collectors;\n \n-\n-public class VerificationException extends AnalysisException {\n-\n-    private final Collection<Failure> failures;\n+public class VerificationException extends SqlClientException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "73a33810a25f8c017ae47a512f994e5c881eb0d3"}, "originalPosition": 19}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU4MDEwMzgx", "url": "https://github.com/elastic/elasticsearch/pull/52281#pullrequestreview-358010381", "createdAt": "2020-02-13T07:51:03Z", "commit": {"oid": "73a33810a25f8c017ae47a512f994e5c881eb0d3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU4MDU5NzU3", "url": "https://github.com/elastic/elasticsearch/pull/52281#pullrequestreview-358059757", "createdAt": "2020-02-13T09:20:00Z", "commit": {"oid": "73a33810a25f8c017ae47a512f994e5c881eb0d3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU4MTQ0NzA0", "url": "https://github.com/elastic/elasticsearch/pull/52281#pullrequestreview-358144704", "createdAt": "2020-02-13T11:29:19Z", "commit": {"oid": "73a33810a25f8c017ae47a512f994e5c881eb0d3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2632, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}