{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ4NTg1ODk2", "number": 59485, "title": "Allow null name when deserialising API key document", "bodyText": "API keys can be created without names using grant API key action. This is considered as a bug (#59484). Since the feature has already been released, we need to accomodate existing keys that are created with null names. This PR relaxes the parser logic so that a null name is accepted.\nResolves: #59481", "createdAt": "2020-07-14T01:15:57Z", "url": "https://github.com/elastic/elasticsearch/pull/59485", "merged": true, "mergeCommit": {"oid": "c0fc9d02724533fc022d3944c2d09044e9ac1af7"}, "closed": true, "closedAt": "2020-07-14T05:02:45Z", "author": {"login": "ywangd"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc0rWQHAH2gAyNDQ4NTg1ODk2OjI3NDlhMTE1NDM1ZTMzODUzMWMzN2YyNWE2NjhkMWEwNjNlNjZjZWY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc0uyd3AFqTQ0Nzc4NzA5MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2749a115435e338531c37f25a668d1a063e66cef", "author": {"user": {"login": "ywangd", "name": "Yang Wang"}}, "url": "https://github.com/elastic/elasticsearch/commit/2749a115435e338531c37f25a668d1a063e66cef", "committedDate": "2020-07-14T01:00:22Z", "message": "Allow null name when deserialising API key document"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3NzIwMzg2", "url": "https://github.com/elastic/elasticsearch/pull/59485#pullrequestreview-447720386", "createdAt": "2020-07-14T01:23:09Z", "commit": {"oid": "2749a115435e338531c37f25a668d1a063e66cef"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQwMToyMzoxMFrOGxAg4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQwMToyMzoxMFrOGxAg4w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDA0MTgyNw==", "bodyText": "Removed Nullable and replaced optionalConstructorArg() with constructorArg() for hash and roleDescriptorsBytes fields for clarity:\n\nThe parser does not allow them to be null without something like builder.declareStringOrNull(...). Therefore the Nullable etc does not have any effects anyway. In another word, the overall code logic is not impacted.\nBased on the logic in ApiKeyService#newDocument, these two fields can never be null.", "url": "https://github.com/elastic/elasticsearch/pull/59485#discussion_r454041827", "createdAt": "2020-07-14T01:23:10Z", "author": {"login": "ywangd"}, "path": "x-pack/plugin/security/src/main/java/org/elasticsearch/xpack/security/authc/ApiKeyService.java", "diffHunk": "@@ -1058,10 +1057,10 @@ public ApiKeyDoc(\n             long creationTime,\n             long expirationTime,\n             Boolean invalidated,\n-            @Nullable String hash,\n-            String name,\n+            String hash,\n+            @Nullable String name,\n             int version,\n-            @Nullable BytesReference roleDescriptorsBytes,\n+            BytesReference roleDescriptorsBytes,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2749a115435e338531c37f25a668d1a063e66cef"}, "originalPosition": 38}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3Nzg3MDkx", "url": "https://github.com/elastic/elasticsearch/pull/59485#pullrequestreview-447787091", "createdAt": "2020-07-14T05:00:54Z", "commit": {"oid": "2749a115435e338531c37f25a668d1a063e66cef"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4449, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}