{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDExNDU4OTg2", "number": 56022, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQwOTo0MTowMVrOD46u6Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxOToxMjozNFrOD5isvw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxMDA5MTI5OnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/elasticsearch/action/admin/indices/get/GetIndexResponse.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQwOTo0MTowMVrOGP5PSA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQwOTo0MTowMVrOGP5PSA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTMxOTYyNA==", "bodyText": "I think this de-serialization logic needs to be inside a version check.\nI think this is why the mixed cluster tests have failed.", "url": "https://github.com/elastic/elasticsearch/pull/56022#discussion_r419319624", "createdAt": "2020-05-04T09:41:01Z", "author": {"login": "martijnvg"}, "path": "server/src/main/java/org/elasticsearch/action/admin/indices/get/GetIndexResponse.java", "diffHunk": "@@ -126,6 +131,13 @@ public GetIndexResponse(String[] indices,\n             defaultSettingsMapBuilder.put(in.readString(), Settings.readSettingsFromStream(in));\n         }\n         defaultSettings = defaultSettingsMapBuilder.build();\n+\n+        ImmutableOpenMap.Builder<String, String> dataStreamsMapBuilder = ImmutableOpenMap.builder();\n+        int dataStreamsSize = in.readVInt();\n+        for (int i = 0; i < dataStreamsSize; i++) {\n+            dataStreamsMapBuilder.put(in.readString(), in.readOptionalString());\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cf1f4a5dfcf9c6d437ac0d3273fa2a8ba91917a2"}, "originalPosition": 36}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxMDA5MjY3OnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/elasticsearch/action/admin/indices/get/GetIndexResponse.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQwOTo0MToyMlrOGP5QIw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQwOTo0MToyMlrOGP5QIw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTMxOTg0Mw==", "bodyText": "Same applies for this serialization logic.", "url": "https://github.com/elastic/elasticsearch/pull/56022#discussion_r419319843", "createdAt": "2020-05-04T09:41:22Z", "author": {"login": "martijnvg"}, "path": "server/src/main/java/org/elasticsearch/action/admin/indices/get/GetIndexResponse.java", "diffHunk": "@@ -233,6 +253,11 @@ public void writeTo(StreamOutput out) throws IOException {\n             out.writeString(indexEntry.key);\n             Settings.writeSettingsToStream(indexEntry.value, out);\n         }\n+        out.writeVInt(dataStreams.size());\n+        for (ObjectObjectCursor<String, String> indexEntry : dataStreams) {\n+            out.writeString(indexEntry.key);\n+            out.writeOptionalString(indexEntry.value);\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cf1f4a5dfcf9c6d437ac0d3273fa2a8ba91917a2"}, "originalPosition": 64}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxNjYzOTM1OnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/elasticsearch/cluster/metadata/Metadata.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxOToxMjozNFrOGQ3z2g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxOToxMjozNFrOGQ3z2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDM0NDc5NA==", "bodyText": "I wonder if this should not be a private method on TransportGetIndexAction instead? Seems it mainly translates from the lookup to the map structure.", "url": "https://github.com/elastic/elasticsearch/pull/56022#discussion_r420344794", "createdAt": "2020-05-05T19:12:34Z", "author": {"login": "henningandersen"}, "path": "server/src/main/java/org/elasticsearch/cluster/metadata/Metadata.java", "diffHunk": "@@ -401,6 +401,24 @@ public boolean equalsAliases(Metadata other) {\n         return indexMapBuilder.build();\n     }\n \n+    /**\n+     * Finds the parent data streams, if any, for the specified concrete indices.\n+     */\n+    public ImmutableOpenMap<String, IndexAbstraction.DataStream> findDataStreams(String[] concreteIndices) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ffdd65c80e307104cfc3e9d57efdc79a2ffbc5be"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2424, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}