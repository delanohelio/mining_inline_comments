{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYxMTYwMjg1", "number": 50821, "title": "Add documentation for keystore startup prompting", "bodyText": "When a keystore is password-protected, Elasticsearch will prompt at\nstartup. This commit adds documentation for this prompt for the archive,\nsystemd, and Docker cases.\nThis is my first documentation PR \u2014\u00a0I'm happy to take any pointers on how\nto make it better.\nRelates #32691, #44775\nCloses #49338", "createdAt": "2020-01-09T21:06:58Z", "url": "https://github.com/elastic/elasticsearch/pull/50821", "merged": true, "mergeCommit": {"oid": "663fc0b94dc04d4177dfef0d1e337d4190f102ca"}, "closed": true, "closedAt": "2020-01-14T20:14:31Z", "author": {"login": "williamrandolph"}, "timelineItems": {"totalCount": 23, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb4wfDbgH2gAyMzYxMTYwMjg1OmU4OGEwZDI3ZjQ5OGM1MmJhMTg1YmRmYzMzZWRkOGQyZWNlMDM2ZTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb6Wcu_AH2gAyMzYxMTYwMjg1OjFhNzRkN2NkMjEwY2MwZWJmNDM0NTEyMzY1MzVmZDE4YjVlNjI1YzY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e88a0d27f498c52ba185bdfc33edd8d2ece036e9", "author": {"user": {"login": "williamrandolph", "name": "William Brafford"}}, "url": "https://github.com/elastic/elasticsearch/commit/e88a0d27f498c52ba185bdfc33edd8d2ece036e9", "committedDate": "2020-01-09T21:04:03Z", "message": "Add documentation for keystore startup prompting\n\nWhen a keystore is password-protected, Elasticsearch will prompt at\nstartup. This commit adds documentation for this prompt for the archive,\nsystemd, and Docker cases."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c8a5723d0c198279a5fd1ce989af091fc122ea4e", "author": {"user": {"login": "williamrandolph", "name": "William Brafford"}}, "url": "https://github.com/elastic/elasticsearch/commit/c8a5723d0c198279a5fd1ce989af091fc122ea4e", "committedDate": "2020-01-09T22:16:58Z", "message": "Add language description to code block"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQwODk3ODc5", "url": "https://github.com/elastic/elasticsearch/pull/50821#pullrequestreview-340897879", "createdAt": "2020-01-10T00:33:09Z", "commit": {"oid": "c8a5723d0c198279a5fd1ce989af091fc122ea4e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQwMDozMzoxMFrOFcHZew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQwMDozMzoxMFrOFcHZew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTAyNTY1OQ==", "bodyText": "Slight variation to avoid future tense and to make it clear it's not a one-time prompt:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Once the keystore is password-protected, Elasticsearch will prompt for a password at startup.\n          \n          \n            \n            When the keystore is password-protected, {es} prompts you to supply the password each time it starts.", "url": "https://github.com/elastic/elasticsearch/pull/50821#discussion_r365025659", "createdAt": "2020-01-10T00:33:10Z", "author": {"login": "lcawl"}, "path": "docs/reference/setup/secure-settings.asciidoc", "diffHunk": "@@ -35,6 +35,8 @@ You will be prompted to enter the keystore password and the file `elasticsearch.\n \n NOTE: If you don't specify the `-p` flag or if you enter an empty password, the {es} keystore will be obfuscated but not password protected.\n \n+Once the keystore is password-protected, Elasticsearch will prompt for a password at startup.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c8a5723d0c198279a5fd1ce989af091fc122ea4e"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQwODk5NDY3", "url": "https://github.com/elastic/elasticsearch/pull/50821#pullrequestreview-340899467", "createdAt": "2020-01-10T00:38:36Z", "commit": {"oid": "c8a5723d0c198279a5fd1ce989af091fc122ea4e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQwMDozODozNlrOFcHeyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQwMDozODozNlrOFcHeyg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTAyNzAxOA==", "bodyText": "Since it's a link within the same book, it's simpler to code it like this:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            {ref}/secure-settings.html[secure settings] for more details.\n          \n          \n            \n            <<secure-settings>> for more details.", "url": "https://github.com/elastic/elasticsearch/pull/50821#discussion_r365027018", "createdAt": "2020-01-10T00:38:36Z", "author": {"login": "lcawl"}, "path": "docs/reference/setup/install/zip-windows-start.asciidoc", "diffHunk": "@@ -7,5 +7,9 @@ Elasticsearch can be started from the command line as follows:\n .\\bin\\elasticsearch.bat\n --------------------------------------------\n \n+If you have configured secure settings and password-protected the {es}\n+keystore, you will be prompted to enter the keystore's password. See\n+{ref}/secure-settings.html[secure settings] for more details.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c8a5723d0c198279a5fd1ce989af091fc122ea4e"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQwOTAwMDkw", "url": "https://github.com/elastic/elasticsearch/pull/50821#pullrequestreview-340900090", "createdAt": "2020-01-10T00:40:56Z", "commit": {"oid": "c8a5723d0c198279a5fd1ce989af091fc122ea4e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQwMDo0MDo1NlrOFcHg3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQwMDo0MDo1NlrOFcHg3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTAyNzU0OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            {ref}/secure-settings.html[secure settings] for more details.\n          \n          \n            \n            <<secure-settings>> for more details.", "url": "https://github.com/elastic/elasticsearch/pull/50821#discussion_r365027549", "createdAt": "2020-01-10T00:40:56Z", "author": {"login": "lcawl"}, "path": "docs/reference/setup/install/targz-start.asciidoc", "diffHunk": "@@ -7,6 +7,10 @@ Elasticsearch can be started from the command line as follows:\n ./bin/elasticsearch\n --------------------------------------------\n \n+If you have configured secure settings and password-protected the {es}\n+keystore, you will be prompted to enter the keystore's password. See\n+{ref}/secure-settings.html[secure settings] for more details.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c8a5723d0c198279a5fd1ce989af091fc122ea4e"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQwOTAwOTIw", "url": "https://github.com/elastic/elasticsearch/pull/50821#pullrequestreview-340900920", "createdAt": "2020-01-10T00:44:09Z", "commit": {"oid": "c8a5723d0c198279a5fd1ce989af091fc122ea4e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQwMDo0NDowOVrOFcHjdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQwMDo0NDowOVrOFcHjdg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTAyODIxNA==", "bodyText": "... before the program enters daemon mode.\n\nIs there a reason for this qualifier?  If not, I'd omit it and use the same wording as in the other pages.", "url": "https://github.com/elastic/elasticsearch/pull/50821#discussion_r365028214", "createdAt": "2020-01-10T00:44:09Z", "author": {"login": "lcawl"}, "path": "docs/reference/setup/install/targz-daemon.asciidoc", "diffHunk": "@@ -8,6 +8,10 @@ the process ID in a file using the `-p` option:\n ./bin/elasticsearch -d -p pid\n --------------------------------------------\n \n+If you have configured secure settings and password-protected the {es}\n+keystore, you will be prompted to enter the keystore's password before\n+the program enters daemon mode.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c8a5723d0c198279a5fd1ce989af091fc122ea4e"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQwOTAyNTY2", "url": "https://github.com/elastic/elasticsearch/pull/50821#pullrequestreview-340902566", "createdAt": "2020-01-10T00:50:12Z", "commit": {"oid": "c8a5723d0c198279a5fd1ce989af091fc122ea4e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQwMDo1MDoxMlrOFcHoyA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQwMDo1MDoxMlrOFcHoyA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTAyOTU3Ng==", "bodyText": "... you will need to provide .. the keystore password using a local file ...\n\nDo we need to provide a tip about protecting that local file since it contains the password?", "url": "https://github.com/elastic/elasticsearch/pull/50821#discussion_r365029576", "createdAt": "2020-01-10T00:50:12Z", "author": {"login": "lcawl"}, "path": "docs/reference/setup/install/systemd.asciidoc", "diffHunk": "@@ -21,6 +21,17 @@ These commands provide no feedback as to whether Elasticsearch was started\n successfully or not. Instead, this information will be written in the log\n files located in `/var/log/elasticsearch/`.\n \n+If you have password-protected your {es} keystore, you will need to provide\n+`systemd` with the keystore password using a local file and systemd environment", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c8a5723d0c198279a5fd1ce989af091fc122ea4e"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQwOTAzMTc2", "url": "https://github.com/elastic/elasticsearch/pull/50821#pullrequestreview-340903176", "createdAt": "2020-01-10T00:52:26Z", "commit": {"oid": "c8a5723d0c198279a5fd1ce989af091fc122ea4e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQwMDo1MjoyNlrOFcHqmQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQwMDo1MjoyNlrOFcHqmQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTAzMDA0MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            If you want to use {ref}/secure-settings.html[secure settings] and password-protect\n          \n          \n            \n            If you want to use <<secure-settings,secure settings>> and password-protect", "url": "https://github.com/elastic/elasticsearch/pull/50821#discussion_r365030041", "createdAt": "2020-01-10T00:52:26Z", "author": {"login": "lcawl"}, "path": "docs/reference/setup/install/docker.asciidoc", "diffHunk": "@@ -360,6 +360,23 @@ IMPORTANT: The container **runs {es} as user `elasticsearch` using\n uid:gid `1000:0`**. Bind mounted host directories and files must be accessible by this user,\n and the data and log directories must be writable by this user.\n \n+[[docker-keystore-bind-mount]]\n+===== Mounting an {es} keystore\n+\n+If you want to use {ref}/secure-settings.html[secure settings] and password-protect", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c8a5723d0c198279a5fd1ce989af091fc122ea4e"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQwOTAzNDI3", "url": "https://github.com/elastic/elasticsearch/pull/50821#pullrequestreview-340903427", "createdAt": "2020-01-10T00:53:16Z", "commit": {"oid": "c8a5723d0c198279a5fd1ce989af091fc122ea4e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQwMDo1MzoxNlrOFcHrZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQwMDo1MzoxNlrOFcHrZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTAzMDI0NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            the keystore that stores them, you will need to use the `elasticsearch-keystore` utility\n          \n          \n            \n            the keystore that stores them, you must use the `elasticsearch-keystore` utility", "url": "https://github.com/elastic/elasticsearch/pull/50821#discussion_r365030244", "createdAt": "2020-01-10T00:53:16Z", "author": {"login": "lcawl"}, "path": "docs/reference/setup/install/docker.asciidoc", "diffHunk": "@@ -360,6 +360,23 @@ IMPORTANT: The container **runs {es} as user `elasticsearch` using\n uid:gid `1000:0`**. Bind mounted host directories and files must be accessible by this user,\n and the data and log directories must be writable by this user.\n \n+[[docker-keystore-bind-mount]]\n+===== Mounting an {es} keystore\n+\n+If you want to use {ref}/secure-settings.html[secure settings] and password-protect\n+the keystore that stores them, you will need to use the `elasticsearch-keystore` utility", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c8a5723d0c198279a5fd1ce989af091fc122ea4e"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQwOTY0NzQ1", "url": "https://github.com/elastic/elasticsearch/pull/50821#pullrequestreview-340964745", "createdAt": "2020-01-10T05:49:24Z", "commit": {"oid": "c8a5723d0c198279a5fd1ce989af091fc122ea4e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQwNTo0OToyNFrOFcKzOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQwNTo1NjozMFrOFcK4Gg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTA4MTQwMg==", "bodyText": "Would it be worth mentioning that the alternative ( if they do not bind mount an existing password protected keystore ) will be that ES will auto generate a keystore where the values will be obfuscated but not encrypted?", "url": "https://github.com/elastic/elasticsearch/pull/50821#discussion_r365081402", "createdAt": "2020-01-10T05:49:24Z", "author": {"login": "jkakavas"}, "path": "docs/reference/setup/install/docker.asciidoc", "diffHunk": "@@ -360,6 +360,23 @@ IMPORTANT: The container **runs {es} as user `elasticsearch` using\n uid:gid `1000:0`**. Bind mounted host directories and files must be accessible by this user,\n and the data and log directories must be writable by this user.\n \n+[[docker-keystore-bind-mount]]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c8a5723d0c198279a5fd1ce989af091fc122ea4e"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTA4MTcyNQ==", "bodyText": "++ At least mention that this should be a temporary file that only needs to exist when systemctl start is executed and can safely be removed afterwards", "url": "https://github.com/elastic/elasticsearch/pull/50821#discussion_r365081725", "createdAt": "2020-01-10T05:51:22Z", "author": {"login": "jkakavas"}, "path": "docs/reference/setup/install/systemd.asciidoc", "diffHunk": "@@ -21,6 +21,17 @@ These commands provide no feedback as to whether Elasticsearch was started\n successfully or not. Instead, this information will be written in the log\n files located in `/var/log/elasticsearch/`.\n \n+If you have password-protected your {es} keystore, you will need to provide\n+`systemd` with the keystore password using a local file and systemd environment", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTAyOTU3Ng=="}, "originalCommit": {"oid": "c8a5723d0c198279a5fd1ce989af091fc122ea4e"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTA4MjIxMQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            If you have configured secure settings and password-protected the {es}\n          \n          \n            \n            If you have password-protected the {es}\n          \n      \n    \n    \n  \n\nWe have to decrypt the keystore regardless of what entries it stores.", "url": "https://github.com/elastic/elasticsearch/pull/50821#discussion_r365082211", "createdAt": "2020-01-10T05:54:00Z", "author": {"login": "jkakavas"}, "path": "docs/reference/setup/install/targz-daemon.asciidoc", "diffHunk": "@@ -8,6 +8,10 @@ the process ID in a file using the `-p` option:\n ./bin/elasticsearch -d -p pid\n --------------------------------------------\n \n+If you have configured secure settings and password-protected the {es}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c8a5723d0c198279a5fd1ce989af091fc122ea4e"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTA4MjI1Mw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            If you have configured secure settings and password-protected the {es}\n          \n          \n            \n            If you have password-protected the {es}\n          \n      \n    \n    \n  \n\nWe have to decrypt the keystore regardless of what entries it stores.", "url": "https://github.com/elastic/elasticsearch/pull/50821#discussion_r365082253", "createdAt": "2020-01-10T05:54:14Z", "author": {"login": "jkakavas"}, "path": "docs/reference/setup/install/targz-start.asciidoc", "diffHunk": "@@ -7,6 +7,10 @@ Elasticsearch can be started from the command line as follows:\n ./bin/elasticsearch\n --------------------------------------------\n \n+If you have configured secure settings and password-protected the {es}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c8a5723d0c198279a5fd1ce989af091fc122ea4e"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTA4MjI5Mw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            If you have configured secure settings and password-protected the {es}\n          \n          \n            \n            If you have password-protected the {es}", "url": "https://github.com/elastic/elasticsearch/pull/50821#discussion_r365082293", "createdAt": "2020-01-10T05:54:28Z", "author": {"login": "jkakavas"}, "path": "docs/reference/setup/install/zip-windows-start.asciidoc", "diffHunk": "@@ -7,5 +7,9 @@ Elasticsearch can be started from the command line as follows:\n .\\bin\\elasticsearch.bat\n --------------------------------------------\n \n+If you have configured secure settings and password-protected the {es}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c8a5723d0c198279a5fd1ce989af091fc122ea4e"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTA4MjY1MA==", "bodyText": "\"prompt\" is only applicable for the archive distribution though, should we right this in a more generic way to reflect what happens with docker/systemd?", "url": "https://github.com/elastic/elasticsearch/pull/50821#discussion_r365082650", "createdAt": "2020-01-10T05:56:30Z", "author": {"login": "jkakavas"}, "path": "docs/reference/setup/secure-settings.asciidoc", "diffHunk": "@@ -35,6 +35,8 @@ You will be prompted to enter the keystore password and the file `elasticsearch.\n \n NOTE: If you don't specify the `-p` flag or if you enter an empty password, the {es} keystore will be obfuscated but not password protected.\n \n+Once the keystore is password-protected, Elasticsearch will prompt for a password at startup.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTAyNTY1OQ=="}, "originalCommit": {"oid": "c8a5723d0c198279a5fd1ce989af091fc122ea4e"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc3dd4c63e8645a7714c2942055c5602c73f64b2", "author": {"user": {"login": "williamrandolph", "name": "William Brafford"}}, "url": "https://github.com/elastic/elasticsearch/commit/cc3dd4c63e8645a7714c2942055c5602c73f64b2", "committedDate": "2020-01-10T16:54:50Z", "message": "Respond to PR feedback"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxNzQyODAy", "url": "https://github.com/elastic/elasticsearch/pull/50821#pullrequestreview-341742802", "createdAt": "2020-01-13T10:17:30Z", "commit": {"oid": "cc3dd4c63e8645a7714c2942055c5602c73f64b2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxMDoxNzozMFrOFcyNPQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxMDoxNzozMFrOFcyNPQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTcyNzAzNw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            by password-protected the keystore that stores them, you must use the `elasticsearch-keystore`\n          \n          \n            \n            by password-protecting the keystore that stores them, you must use the `elasticsearch-keystore`", "url": "https://github.com/elastic/elasticsearch/pull/50821#discussion_r365727037", "createdAt": "2020-01-13T10:17:30Z", "author": {"login": "pugnascotia"}, "path": "docs/reference/setup/install/docker.asciidoc", "diffHunk": "@@ -360,6 +360,24 @@ IMPORTANT: The container **runs {es} as user `elasticsearch` using\n uid:gid `1000:0`**. Bind mounted host directories and files must be accessible by this user,\n and the data and log directories must be writable by this user.\n \n+[[docker-keystore-bind-mount]]\n+===== Mounting an {es} keystore\n+\n+By default, {es} will auto-generate a keystore file for secure settings. This file\n+is obfuscated but not encrypted. If you want to encrypt your <<secure-settings,secure settings>>\n+by password-protected the keystore that stores them, you must use the `elasticsearch-keystore`", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc3dd4c63e8645a7714c2942055c5602c73f64b2"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxNzQzMDkz", "url": "https://github.com/elastic/elasticsearch/pull/50821#pullrequestreview-341743093", "createdAt": "2020-01-13T10:18:02Z", "commit": {"oid": "cc3dd4c63e8645a7714c2942055c5602c73f64b2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxMDoxODowMlrOFcyOKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxMDoxODowMlrOFcyOKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTcyNzI3Mw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            value `KEYSTORE_VALUE` to the value of your password. For example, a `docker run`\n          \n          \n            \n            value `KEYSTORE_PASSWORD` to the value of your password. For example, a `docker run`", "url": "https://github.com/elastic/elasticsearch/pull/50821#discussion_r365727273", "createdAt": "2020-01-13T10:18:02Z", "author": {"login": "pugnascotia"}, "path": "docs/reference/setup/install/docker.asciidoc", "diffHunk": "@@ -360,6 +360,24 @@ IMPORTANT: The container **runs {es} as user `elasticsearch` using\n uid:gid `1000:0`**. Bind mounted host directories and files must be accessible by this user,\n and the data and log directories must be writable by this user.\n \n+[[docker-keystore-bind-mount]]\n+===== Mounting an {es} keystore\n+\n+By default, {es} will auto-generate a keystore file for secure settings. This file\n+is obfuscated but not encrypted. If you want to encrypt your <<secure-settings,secure settings>>\n+by password-protected the keystore that stores them, you must use the `elasticsearch-keystore`\n+utility to create a password-protected keystore and bind-mount it to the container\n+as `/usr/share/elasticsearch/config/elasticsearch.keystore`. In order to provide\n+the Docker container with the password at startup, set the Docker environment\n+value `KEYSTORE_VALUE` to the value of your password. For example, a `docker run`", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc3dd4c63e8645a7714c2942055c5602c73f64b2"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5046a1b54650d4264dbf7e1dd447b9a8a13b37d4", "author": {"user": {"login": "williamrandolph", "name": "William Brafford"}}, "url": "https://github.com/elastic/elasticsearch/commit/5046a1b54650d4264dbf7e1dd447b9a8a13b37d4", "committedDate": "2020-01-13T14:44:44Z", "message": "Fix grammar errors"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxOTA2NjM0", "url": "https://github.com/elastic/elasticsearch/pull/50821#pullrequestreview-341906634", "createdAt": "2020-01-13T15:02:48Z", "commit": {"oid": "5046a1b54650d4264dbf7e1dd447b9a8a13b37d4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxNTowMjo0OVrOFc5ytw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxNTowMjo0OVrOFc5ytw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg1MTMxOQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            by password-protecting the keystore that stores them, you must use the `elasticsearch-keystore`\n          \n          \n            \n            with a password, you must use the `elasticsearch-keystore`\n          \n      \n    \n    \n  \n\nnit: it just felt we said \"password-protect\" too many times in a row :)", "url": "https://github.com/elastic/elasticsearch/pull/50821#discussion_r365851319", "createdAt": "2020-01-13T15:02:49Z", "author": {"login": "jkakavas"}, "path": "docs/reference/setup/install/docker.asciidoc", "diffHunk": "@@ -360,6 +360,24 @@ IMPORTANT: The container **runs {es} as user `elasticsearch` using\n uid:gid `1000:0`**. Bind mounted host directories and files must be accessible by this user,\n and the data and log directories must be writable by this user.\n \n+[[docker-keystore-bind-mount]]\n+===== Mounting an {es} keystore\n+\n+By default, {es} will auto-generate a keystore file for secure settings. This file\n+is obfuscated but not encrypted. If you want to encrypt your <<secure-settings,secure settings>>\n+by password-protecting the keystore that stores them, you must use the `elasticsearch-keystore`", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5046a1b54650d4264dbf7e1dd447b9a8a13b37d4"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxOTA2ODIx", "url": "https://github.com/elastic/elasticsearch/pull/50821#pullrequestreview-341906821", "createdAt": "2020-01-13T15:03:08Z", "commit": {"oid": "5046a1b54650d4264dbf7e1dd447b9a8a13b37d4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5af8fa753ae90e257993908e8857fbd1c9750491", "author": {"user": {"login": "williamrandolph", "name": "William Brafford"}}, "url": "https://github.com/elastic/elasticsearch/commit/5af8fa753ae90e257993908e8857fbd1c9750491", "committedDate": "2020-01-13T15:08:23Z", "message": "Stylistic nit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f6f51d2842b0dc4a0246eaacbc70b427a0be432", "author": {"user": {"login": "williamrandolph", "name": "William Brafford"}}, "url": "https://github.com/elastic/elasticsearch/commit/5f6f51d2842b0dc4a0246eaacbc70b427a0be432", "committedDate": "2020-01-14T19:02:53Z", "message": "Merging upstream feature branch into PR branch"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "380fcce4603aac4a4b591a85fc6a6d3ade3583cb", "author": {"user": {"login": "lcawl", "name": "Lisa Cawley"}}, "url": "https://github.com/elastic/elasticsearch/commit/380fcce4603aac4a4b591a85fc6a6d3ade3583cb", "committedDate": "2020-01-14T19:10:29Z", "message": "[DOCS] Update keystore command"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "06f4836b2777b13bc1771830ba54ac306d747ff6", "author": {"user": {"login": "lcawl", "name": "Lisa Cawley"}}, "url": "https://github.com/elastic/elasticsearch/commit/06f4836b2777b13bc1771830ba54ac306d747ff6", "committedDate": "2020-01-14T19:10:48Z", "message": "[DOCS] Clarifies -f behaviour"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQyNzg5ODIy", "url": "https://github.com/elastic/elasticsearch/pull/50821#pullrequestreview-342789822", "createdAt": "2020-01-14T19:39:55Z", "commit": {"oid": "06f4836b2777b13bc1771830ba54ac306d747ff6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQxOTozOTo1NVrOFdjh1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQxOTozOTo1NVrOFdjh1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjUzNTEyNg==", "bodyText": "This is a typo in master.  I'll fix it there too\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            `remove <setting>:: Removes a setting from the keystore.\n          \n          \n            \n            `remove <setting>`:: Removes a setting from the keystore.", "url": "https://github.com/elastic/elasticsearch/pull/50821#discussion_r366535126", "createdAt": "2020-01-14T19:39:55Z", "author": {"login": "lcawl"}, "path": "docs/reference/commands/keystore.asciidoc", "diffHunk": "@@ -38,15 +41,34 @@ keystore, see the setting reference.\n === Parameters\n \n `add <setting>`:: Adds settings to the keystore. By default, you are prompted\n-for the value of the setting.\n+for the value of the setting. If the keystore is password protected, you are\n+also prompted to enter the password. If the setting already exists in the\n+keystore, you must confirm that you want to overwrite the current value. If the\n+keystore does not exist, you must confirm that you want to create a keystore. To\n+avoid these two confirmation prompts, use the `-f` parameter.\n \n `add-file <setting> <path>`:: Adds a file to the keystore.\n \n `create`:: Creates the keystore.\n \n+`-f`:: When used with the `add` parameter, the command no longer prompts you\n+before overwriting existing entries in the keystore. Also, if you haven't\n+created a keystore yet, it creates a keystore that is obfuscated but not\n+password protected.\n+\n `-h, --help`:: Returns all of the command parameters.\n \n-`list`:: Lists the settings in the keystore.\n+`list`:: Lists the settings in the keystore. If the keystore is password\n+protected, you are prompted to enter the password.\n+\n+`-p`:: When used with the `create` parameter, the command prompts you to enter a\n+keystore password. If you don't specify the `-p` flag or if you enter an empty\n+password, the keystore is obfuscated but not password protected.\n+\n+`passwd`:: Changes or sets the keystore password. If the keystore is password\n+protected, you are prompted to enter the current password and the new one. You\n+can optionally use an empty string to remove the password. If the keystore is\n+not password protected, you can use this command to set a password.\n \n `remove <setting>:: Removes a setting from the keystore.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06f4836b2777b13bc1771830ba54ac306d747ff6"}, "originalPosition": 58}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQyNzk1OTM3", "url": "https://github.com/elastic/elasticsearch/pull/50821#pullrequestreview-342795937", "createdAt": "2020-01-14T19:50:07Z", "commit": {"oid": "06f4836b2777b13bc1771830ba54ac306d747ff6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1a74d7cd210cc0ebf43451236535fd18b5e625c6", "author": {"user": {"login": "williamrandolph", "name": "William Brafford"}}, "url": "https://github.com/elastic/elasticsearch/commit/1a74d7cd210cc0ebf43451236535fd18b5e625c6", "committedDate": "2020-01-14T19:51:50Z", "message": "Fix quotation typo\n\nCo-Authored-By: Lisa Cawley <lcawley@elastic.co>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3720, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}