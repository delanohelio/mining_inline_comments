{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk5NDYyMTQ0", "number": 63439, "title": "Move helper into painless", "bodyText": "This moves TemporalAccessor#toEpochMillis out of runtime fields and\ninto painless directly so all contexts can use it. Now something like:\nZonedDateTime.parse('2020-10-07T19:02:56.782Z').toEpochMilli()\n\nis possible.", "createdAt": "2020-10-07T19:15:26Z", "url": "https://github.com/elastic/elasticsearch/pull/63439", "merged": true, "mergeCommit": {"oid": "c24546f197ed5a5281e0e7311a941bc6ecd1c04b"}, "closed": true, "closedAt": "2020-10-12T13:39:32Z", "author": {"login": "nik9000"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdQR9UPgH2gAyNDk5NDYyMTQ0OjA3NmJhMDNiN2I5NDVhNTczMjM3YzBkOWI2YmUxMzJhYjNjYWM1Mzc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdQm0pLgFqTUwNTEwNDI0Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "076ba03b7b945a573237c0d9b6be132ab3cac537", "author": {"user": {"login": "nik9000", "name": "Nik Everett"}}, "url": "https://github.com/elastic/elasticsearch/commit/076ba03b7b945a573237c0d9b6be132ab3cac537", "committedDate": "2020-10-07T19:15:23Z", "message": "Move helper into painless\n\nThis moves `TemporalAccessor#toEpochMillis` out of runtime fields and\ninto painless directly so all contexts can use it. Now something like:\n```\nZonedDateTime.parse('2020-10-07T19:02:56.782Z').toEpochMilli()\n```\nis possible."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ecabcaec8bc537175163e0b220b8a9891987ff1", "author": {"user": {"login": "nik9000", "name": "Nik Everett"}}, "url": "https://github.com/elastic/elasticsearch/commit/8ecabcaec8bc537175163e0b220b8a9891987ff1", "committedDate": "2020-10-07T19:22:19Z", "message": "Oh checkstyle, you skamp"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0MjA3MjY4", "url": "https://github.com/elastic/elasticsearch/pull/63439#pullrequestreview-504207268", "createdAt": "2020-10-07T19:38:56Z", "commit": {"oid": "8ecabcaec8bc537175163e0b220b8a9891987ff1"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxOTozODo1N1rOHeCsLw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxOTozODo1N1rOHeCsLw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTI2MzQwNw==", "bodyText": "No suggestions here. Just surprised this is the best way to do it :).", "url": "https://github.com/elastic/elasticsearch/pull/63439#discussion_r501263407", "createdAt": "2020-10-07T19:38:57Z", "author": {"login": "jdconrad"}, "path": "modules/lang-painless/src/main/java/org/elasticsearch/painless/api/Augmentation.java", "diffHunk": "@@ -712,4 +715,13 @@ public static Matcher matcher(Pattern receiver, int limitFactor, CharSequence in\n         }\n         return receiver.matcher(new LimitedCharSequence(input, receiver, limitFactor));\n     }\n+\n+    /**\n+     * Convert a {@link TemporalAccessor} into millis since epoch like {@link Instant#toEpochMilli()}.\n+     */\n+    public static long toEpochMilli(TemporalAccessor v) {\n+        long millis = Math.multiplyExact(v.getLong(ChronoField.INSTANT_SECONDS), 1_000);\n+        millis = Math.addExact(millis, v.get(ChronoField.NANO_OF_SECOND) / 1_000_000);\n+        return millis;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8ecabcaec8bc537175163e0b220b8a9891987ff1"}, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2fc67a8efc76fa8a369af7a89ffee8d42c23f96f", "author": {"user": {"login": "nik9000", "name": "Nik Everett"}}, "url": "https://github.com/elastic/elasticsearch/commit/2fc67a8efc76fa8a369af7a89ffee8d42c23f96f", "committedDate": "2020-10-08T17:49:20Z", "message": "Merge branch 'master' into to_epoch_millis_in_core"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "813cae780f5cafad580208dd4676ca6b6504294f", "author": {"user": {"login": "nik9000", "name": "Nik Everett"}}, "url": "https://github.com/elastic/elasticsearch/commit/813cae780f5cafad580208dd4676ca6b6504294f", "committedDate": "2020-10-08T18:06:32Z", "message": "Normal math and checkstyle"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1MTA0MjQ3", "url": "https://github.com/elastic/elasticsearch/pull/63439#pullrequestreview-505104247", "createdAt": "2020-10-08T19:33:55Z", "commit": {"oid": "813cae780f5cafad580208dd4676ca6b6504294f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4188, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}