{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc3MjgzMDcx", "number": 52526, "title": "EQL: Add explicit 'any where ...' handling", "bodyText": "Indirectly closes #51853\nRelates to #52168\nAdded explicit handling for any where X so that it converts to the expression X instead of event.type == \"any\" and X\nParser handling was already in place:\n\n  \n    \n      elasticsearch/x-pack/plugin/eql/src/main/java/org/elasticsearch/xpack/eql/parser/LogicalPlanBuilder.java\n    \n    \n        Lines 32 to 43\n      in\n      5b4a3a3\n    \n    \n    \n    \n\n        \n          \n           if (ctx.event != null) { \n        \n\n        \n          \n               Source eventSource = source(ctx.event); \n        \n\n        \n          \n               String eventName = visitIdentifier(ctx.event); \n        \n\n        \n          \n               Literal eventValue = new Literal(eventSource, eventName, DataTypes.KEYWORD); \n        \n\n        \n          \n            \n        \n\n        \n          \n               UnresolvedAttribute eventField = new UnresolvedAttribute(eventSource, params.fieldEventType()); \n        \n\n        \n          \n               Expression eventMatch = new Equals(eventSource, eventField, eventValue); \n        \n\n        \n          \n            \n        \n\n        \n          \n               condition = new And(source, eventMatch, condition); \n        \n\n        \n          \n           } \n        \n\n        \n          \n            \n        \n\n        \n          \n           return new Filter(source(ctx), new UnresolvedRelation(Source.EMPTY, null, \"\", false, \"\"), condition);", "createdAt": "2020-02-19T17:10:52Z", "url": "https://github.com/elastic/elasticsearch/pull/52526", "merged": true, "mergeCommit": {"oid": "9f8fa2d9622767e5368f1e5c01c22f4722fa7d4c"}, "closed": true, "closedAt": "2020-03-04T17:09:41Z", "author": {"login": "rw-access"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcF5sp4AH2gAyMzc3MjgzMDcxOmU5YWU4ZTMxZDEyNTk1YTJiNDQ1NDRmZjRkNjI5NmNhNjE5Y2YwZjg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcKZOFSAH2gAyMzc3MjgzMDcxOmQ4NjU1OGFjMGYzMTBiNjkwMzYxY2UwNDgxZjhmYTRjYzg4ODQ1YzA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e9ae8e31d12595a2b44544ff4d6296ca619cf0f8", "author": {"user": {"login": "rw-access", "name": "Ross Wolf"}}, "url": "https://github.com/elastic/elasticsearch/commit/e9ae8e31d12595a2b44544ff4d6296ca619cf0f8", "committedDate": "2020-02-19T17:09:04Z", "message": "EQL: Add explicit 'any where ...' handling"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f6c6c173ba6ffdc6b15f23b185e1d125ad1a532e", "author": {"user": {"login": "rw-access", "name": "Ross Wolf"}}, "url": "https://github.com/elastic/elasticsearch/commit/f6c6c173ba6ffdc6b15f23b185e1d125ad1a532e", "committedDate": "2020-02-19T17:38:13Z", "message": "EQL: Add filter() or tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxNzc2NzY3", "url": "https://github.com/elastic/elasticsearch/pull/52526#pullrequestreview-361776767", "createdAt": "2020-02-20T10:09:48Z", "commit": {"oid": "f6c6c173ba6ffdc6b15f23b185e1d125ad1a532e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxMDowOTo0OFrOFsNang==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxMDowOTo0OFrOFsNang==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTkwMTQ3MA==", "bodyText": "I guess should be private and moved in the beginning or end of class.", "url": "https://github.com/elastic/elasticsearch/pull/52526#discussion_r381901470", "createdAt": "2020-02-20T10:09:48Z", "author": {"login": "matriv"}, "path": "x-pack/plugin/eql/src/test/java/org/elasticsearch/xpack/eql/parser/LogicalPlanTests.java", "diffHunk": "@@ -21,19 +21,29 @@ public Expression expr(String source) {\n         return parser.createExpression(source);\n     }\n \n+    public Filter filter(Expression expr) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f6c6c173ba6ffdc6b15f23b185e1d125ad1a532e"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "af52d79688f194047d7f6a1504c4e23cf2cb8e45", "author": {"user": {"login": "rw-access", "name": "Ross Wolf"}}, "url": "https://github.com/elastic/elasticsearch/commit/af52d79688f194047d7f6a1504c4e23cf2cb8e45", "committedDate": "2020-02-20T14:04:05Z", "message": "EQL: Make test methods private"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYyNTgzNDkw", "url": "https://github.com/elastic/elasticsearch/pull/52526#pullrequestreview-362583490", "createdAt": "2020-02-21T12:02:57Z", "commit": {"oid": "af52d79688f194047d7f6a1504c4e23cf2cb8e45"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYyNjE1MTk0", "url": "https://github.com/elastic/elasticsearch/pull/52526#pullrequestreview-362615194", "createdAt": "2020-02-21T13:06:55Z", "commit": {"oid": "af52d79688f194047d7f6a1504c4e23cf2cb8e45"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYzMzcwODMx", "url": "https://github.com/elastic/elasticsearch/pull/52526#pullrequestreview-363370831", "createdAt": "2020-02-24T13:01:01Z", "commit": {"oid": "af52d79688f194047d7f6a1504c4e23cf2cb8e45"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e7069373c722a48b330798693912a2970b568660", "author": {"user": {"login": "rw-access", "name": "Ross Wolf"}}, "url": "https://github.com/elastic/elasticsearch/commit/e7069373c722a48b330798693912a2970b568660", "committedDate": "2020-03-04T15:59:59Z", "message": "Merge remote-tracking branch 'origin/master' into eql/any-where"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d86558ac0f310b690361ce0481f8fa4cc88845c0", "author": {"user": {"login": "rw-access", "name": "Ross Wolf"}}, "url": "https://github.com/elastic/elasticsearch/commit/d86558ac0f310b690361ce0481f8fa4cc88845c0", "committedDate": "2020-03-04T16:08:20Z", "message": "EQL: Fix bad merge of LogicalPlanTests"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2442, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}