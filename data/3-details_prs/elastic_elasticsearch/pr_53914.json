{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkxNzk4MDgz", "number": 53914, "title": "Introduce aarch64 packaging", "bodyText": "This commit introduces aarch64 packaging, including bundling an aarch64 JDK distribution. We had to make some interesting choices here:\n\nML binaries are not compiled for aarch64, so for now we disable ML on aarch64\ndepending on underlying page sizes, we have to disable class data sharing", "createdAt": "2020-03-21T01:30:44Z", "url": "https://github.com/elastic/elasticsearch/pull/53914", "merged": true, "mergeCommit": {"oid": "13f5631eec1175a533e8f68078d280b393afbfa5"}, "closed": true, "closedAt": "2020-03-21T22:03:21Z", "author": {"login": "jasontedor"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcPq1qDAH2gAyMzkxNzk4MDgzOjRiN2FlYjFjMWI1NzY2ZWM4MjExYzAwMTU3NzFlNWYwNDdjOTJiM2U=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcQVEyDAFqTM3OTEwMjg2Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4b7aeb1c1b5766ec8211c0015771e5f047c92b3e", "author": {"user": {"login": "jasontedor", "name": "Jason Tedor"}}, "url": "https://github.com/elastic/elasticsearch/commit/4b7aeb1c1b5766ec8211c0015771e5f047c92b3e", "committedDate": "2020-03-21T01:29:34Z", "message": "Introduce aarch64 packaging\n\nThis commit introduces aarch64 packaging, including bundling an aarch64\nJDK distribution. We had to make some interesting choices here:\n - ML binaries are not compiled for aarch64, so for now we disable ML on\n   aarch64 by default\n - depending on underlying page sizes, we have to disable class data\n   sharing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2087a62a39d3b768253ec0e852d1e5211a76771d", "author": {"user": {"login": "jasontedor", "name": "Jason Tedor"}}, "url": "https://github.com/elastic/elasticsearch/commit/2087a62a39d3b768253ec0e852d1e5211a76771d", "committedDate": "2020-03-21T01:39:54Z", "message": "Fix imports"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e69bfcbd9f99fa46ba2e070c4faf4d2312a78688", "author": {"user": {"login": "jasontedor", "name": "Jason Tedor"}}, "url": "https://github.com/elastic/elasticsearch/commit/e69bfcbd9f99fa46ba2e070c4faf4d2312a78688", "committedDate": "2020-03-21T01:47:29Z", "message": "Fix checkstyle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "94ce7784809989278e5075804c14d91fa445c4f0", "author": {"user": {"login": "jasontedor", "name": "Jason Tedor"}}, "url": "https://github.com/elastic/elasticsearch/commit/94ce7784809989278e5075804c14d91fa445c4f0", "committedDate": "2020-03-21T02:05:29Z", "message": "Formatting"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4ODg1MTkx", "url": "https://github.com/elastic/elasticsearch/pull/53914#pullrequestreview-378885191", "createdAt": "2020-03-21T02:36:45Z", "commit": {"oid": "94ce7784809989278e5075804c14d91fa445c4f0"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMVQwMjozNjo0NlrOF5nF7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMVQwMjozNjo0NlrOF5nF7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTk1MzY0Ng==", "bodyText": "Seems if we are running on arm we want this to always be false, not just default to false. Wouldn't this mean folks could enable ML explicitly causing funny result?", "url": "https://github.com/elastic/elasticsearch/pull/53914#discussion_r395953646", "createdAt": "2020-03-21T02:36:46Z", "author": {"login": "mark-vieira"}, "path": "x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/XPackSettings.java", "diffHunk": "@@ -65,8 +65,10 @@ private XPackSettings() {\n     public static final Setting<Boolean> GRAPH_ENABLED = Setting.boolSetting(\"xpack.graph.enabled\", true, Setting.Property.NodeScope);\n \n     /** Setting for enabling or disabling machine learning. Defaults to true. */\n-    public static final Setting<Boolean> MACHINE_LEARNING_ENABLED = Setting.boolSetting(\"xpack.ml.enabled\", true,\n-            Setting.Property.NodeScope);\n+    public static final Setting<Boolean> MACHINE_LEARNING_ENABLED = Setting.boolSetting(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "94ce7784809989278e5075804c14d91fa445c4f0"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b81079b0e3d5b92eef7cbb0dc100d0362e48e60", "author": {"user": {"login": "jasontedor", "name": "Jason Tedor"}}, "url": "https://github.com/elastic/elasticsearch/commit/7b81079b0e3d5b92eef7cbb0dc100d0362e48e60", "committedDate": "2020-03-21T19:28:44Z", "message": "Do not allow ML on ARM 64"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "12cc045fe1ecf4e19c8b2612274ac5b9f6868eaa", "author": {"user": {"login": "jasontedor", "name": "Jason Tedor"}}, "url": "https://github.com/elastic/elasticsearch/commit/12cc045fe1ecf4e19c8b2612274ac5b9f6868eaa", "committedDate": "2020-03-21T19:32:04Z", "message": "FIx tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "03b30f10e951f5227faa84931c19527551b4517d", "author": {"user": {"login": "jasontedor", "name": "Jason Tedor"}}, "url": "https://github.com/elastic/elasticsearch/commit/03b30f10e951f5227faa84931c19527551b4517d", "committedDate": "2020-03-21T20:41:56Z", "message": "Fix RPM extraction test on different OS/architectures"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5MTAyMjA4", "url": "https://github.com/elastic/elasticsearch/pull/53914#pullrequestreview-379102208", "createdAt": "2020-03-23T02:39:05Z", "commit": {"oid": "03b30f10e951f5227faa84931c19527551b4517d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QwMjozOTowNVrOF51Yqg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QwMjozOTowNVrOF51Yqg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjE4NzgxOA==", "bodyText": "typo", "url": "https://github.com/elastic/elasticsearch/pull/53914#discussion_r396187818", "createdAt": "2020-03-23T02:39:05Z", "author": {"login": "drewr"}, "path": "buildSrc/src/testKit/jdk-download/reuse/build.gradle", "diffHunk": "@@ -7,5 +7,6 @@ jdks {\n     vendor = fakeJdkVendor\n     version = fakeJdkVersion\n     platform = \"linux\"\n+    architeecture = \"x64\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "03b30f10e951f5227faa84931c19527551b4517d"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5MTAyODY3", "url": "https://github.com/elastic/elasticsearch/pull/53914#pullrequestreview-379102867", "createdAt": "2020-03-23T02:42:06Z", "commit": {"oid": "03b30f10e951f5227faa84931c19527551b4517d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QwMjo0MjowNlrOF51awQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QwMjo0MjowNlrOF51awQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjE4ODM1Mw==", "bodyText": "Copy/paste error? I think these should be aarch64.", "url": "https://github.com/elastic/elasticsearch/pull/53914#discussion_r396188353", "createdAt": "2020-03-23T02:42:06Z", "author": {"login": "drewr"}, "path": "distribution/archives/build.gradle", "diffHunk": "@@ -153,49 +153,61 @@ Closure commonTarConfig = {\n task buildDarwinTar(type: SymbolicLinkPreservingTar) {\n   configure(commonTarConfig)\n   archiveClassifier = 'darwin-x86_64'\n-  with archiveFiles(modulesFiles(false, 'darwin'), 'tar', 'darwin', false, true)\n+  with archiveFiles(modulesFiles(false, 'darwin'), 'tar', 'darwin', 'x64', false, true)\n }\n \n task buildOssDarwinTar(type: SymbolicLinkPreservingTar) {\n   configure(commonTarConfig)\n   archiveClassifier = 'darwin-x86_64'\n-  with archiveFiles(modulesFiles(true, 'darwin'), 'tar', 'darwin', true, true)\n+  with archiveFiles(modulesFiles(true, 'darwin'), 'tar', 'darwin', 'x64', true, true)\n }\n \n task buildNoJdkDarwinTar(type: SymbolicLinkPreservingTar) {\n   configure(commonTarConfig)\n   archiveClassifier = 'no-jdk-darwin-x86_64'\n-  with archiveFiles(modulesFiles(false, 'darwin'), 'tar', 'darwin', false, false)\n+  with archiveFiles(modulesFiles(false, 'darwin'), 'tar', 'darwin', 'x64', false, false)\n }\n \n task buildOssNoJdkDarwinTar(type: SymbolicLinkPreservingTar) {\n   configure(commonTarConfig)\n   archiveClassifier = 'no-jdk-darwin-x86_64'\n-  with archiveFiles(modulesFiles(true, 'darwin'), 'tar', 'darwin', true, false)\n+  with archiveFiles(modulesFiles(true, 'darwin'), 'tar', 'darwin', 'x64', true, false)\n+}\n+\n+task buildLinuxAarch64Tar(type: SymbolicLinkPreservingTar) {\n+  configure(commonTarConfig)\n+  archiveClassifier = 'linux-aarch64'\n+  with archiveFiles(modulesFiles(false, 'linux'), 'tar', 'linux', 'aarch64', false, true)\n }\n \n task buildLinuxTar(type: SymbolicLinkPreservingTar) {\n   configure(commonTarConfig)\n   archiveClassifier = 'linux-x86_64'\n-  with archiveFiles(modulesFiles(false, 'linux'), 'tar', 'linux', false, true)\n+  with archiveFiles(modulesFiles(false, 'linux'), 'tar', 'linux', 'x64', false, true)\n+}\n+\n+task buildOssLinuxAarch64Tar(type: SymbolicLinkPreservingTar) {\n+  configure(commonTarConfig)\n+  archiveClassifier = 'linux-x86_64'\n+  with archiveFiles(modulesFiles(true, 'linux'), 'tar', 'linux', 'x64', true, true)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "03b30f10e951f5227faa84931c19527551b4517d"}, "originalPosition": 100}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1942, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}