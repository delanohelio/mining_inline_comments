{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMzNzM1MDc1", "number": 58056, "title": "Fix Running TranslogOps on CS Thread", "bodyText": "We should fork off from the CS thread to run this even if it's a rare condition.", "createdAt": "2020-06-12T15:05:37Z", "url": "https://github.com/elastic/elasticsearch/pull/58056", "merged": true, "mergeCommit": {"oid": "79227e1413cd946a9d16f2b7f45d9828c6860a5b"}, "closed": true, "closedAt": "2020-06-13T12:16:06Z", "author": {"login": "original-brownbear"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcqkO_8AH2gAyNDMzNzM1MDc1OjFkYWVlNDdlODU0MTQyNTY0NWU4ZWRkYzc0YmI1YTczMmIxNGNkZmY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcqnRMpgH2gAyNDMzNzM1MDc1OjU1N2YzYzExODAxNDIyMDUwMDhjZjM2MzI0MzkxNzUyZGQ3ZjljNjc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1daee47e8541425645e8eddc74bb5a732b14cdff", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/1daee47e8541425645e8eddc74bb5a732b14cdff", "committedDate": "2020-06-12T15:03:52Z", "message": "Fix Running TranslogOps on CS Thread\n\nWe should fork off from the CS thread to run this even if it's a rare\ncondition."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5ODE4OTEy", "url": "https://github.com/elastic/elasticsearch/pull/58056#pullrequestreview-429818912", "createdAt": "2020-06-12T15:06:34Z", "commit": {"oid": "1daee47e8541425645e8eddc74bb5a732b14cdff"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQxNTowNjozNVrOGjHgkg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQxNTowNjozNVrOGjHgkg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTQ3NjM3MA==", "bodyText": "Could also go for the write pool here (as suggested in #58018) but I figured I wouldn't change that in this PR.", "url": "https://github.com/elastic/elasticsearch/pull/58056#discussion_r439476370", "createdAt": "2020-06-12T15:06:35Z", "author": {"login": "original-brownbear"}, "path": "server/src/main/java/org/elasticsearch/indices/recovery/PeerRecoveryTargetService.java", "diffHunk": "@@ -366,13 +367,11 @@ private void performTranslogOps(final RecoveryTranslogOperationsRequest request,\n                 observer.waitForNextChange(new ClusterStateObserver.Listener() {\n                     @Override\n                     public void onNewClusterState(ClusterState state) {\n-                        try {\n+                        threadPool.generic().execute(ActionRunnable.wrap(listener, l -> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1daee47e8541425645e8eddc74bb5a732b14cdff"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5ODI0MjM1", "url": "https://github.com/elastic/elasticsearch/pull/58056#pullrequestreview-429824235", "createdAt": "2020-06-12T15:13:24Z", "commit": {"oid": "1daee47e8541425645e8eddc74bb5a732b14cdff"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "557f3c1180142205008cf36324391752dd7f9c67", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/557f3c1180142205008cf36324391752dd7f9c67", "committedDate": "2020-06-12T18:35:59Z", "message": "Merge remote-tracking branch 'elastic/master' into fix-writes-on-cs-applier"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 645, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}