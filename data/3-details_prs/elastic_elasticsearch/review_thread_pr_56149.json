{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEzMTI3MTI3", "number": 56149, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQwMDowODoyOFrOD5NYAw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQwMDowOTowOVrOD5NYvg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxMzE0NTYzOnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/elasticsearch/script/AbstractSortScript.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQwMDowODoyOFrOGQWe5g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxNjoyNDowOFrOGQxX0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc5ODc1OA==", "bodyText": "I might name this like PARAMS_FUNCTIONS or something like that, so it is clear they are part of params.", "url": "https://github.com/elastic/elasticsearch/pull/56149#discussion_r419798758", "createdAt": "2020-05-05T00:08:28Z", "author": {"login": "rjernst"}, "path": "server/src/main/java/org/elasticsearch/script/AbstractSortScript.java", "diffHunk": "@@ -29,14 +31,25 @@\n import java.io.IOException;\n import java.util.HashMap;\n import java.util.Map;\n+import java.util.function.Function;\n \n abstract class AbstractSortScript implements ScorerAware {\n \n-    private static final Map<String, String> DEPRECATIONS = Map.of(\n-            \"doc\",\n-            \"Accessing variable [doc] via [params.doc] from within a sort-script is deprecated in favor of directly accessing [doc].\",\n-            \"_doc\",\n-            \"Accessing variable [doc] via [params._doc] from within a sort-script is deprecated in favor of directly accessing [doc].\");\n+    private static final DeprecationLogger deprecationLogger =\n+            new DeprecationLogger(LogManager.getLogger(DynamicMap.class));\n+    private static final Map<String, Function<Object, Object>> FUNCTIONS = Map.of(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a6bad076073b0e8dcc9de5f44cd2994be7caa5a"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDIzOTMxMg==", "bodyText": "Changed.", "url": "https://github.com/elastic/elasticsearch/pull/56149#discussion_r420239312", "createdAt": "2020-05-05T16:24:08Z", "author": {"login": "jdconrad"}, "path": "server/src/main/java/org/elasticsearch/script/AbstractSortScript.java", "diffHunk": "@@ -29,14 +31,25 @@\n import java.io.IOException;\n import java.util.HashMap;\n import java.util.Map;\n+import java.util.function.Function;\n \n abstract class AbstractSortScript implements ScorerAware {\n \n-    private static final Map<String, String> DEPRECATIONS = Map.of(\n-            \"doc\",\n-            \"Accessing variable [doc] via [params.doc] from within a sort-script is deprecated in favor of directly accessing [doc].\",\n-            \"_doc\",\n-            \"Accessing variable [doc] via [params._doc] from within a sort-script is deprecated in favor of directly accessing [doc].\");\n+    private static final DeprecationLogger deprecationLogger =\n+            new DeprecationLogger(LogManager.getLogger(DynamicMap.class));\n+    private static final Map<String, Function<Object, Object>> FUNCTIONS = Map.of(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc5ODc1OA=="}, "originalCommit": {"oid": "1a6bad076073b0e8dcc9de5f44cd2994be7caa5a"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxMzE0NzUwOnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/elasticsearch/script/DynamicMap.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQwMDowOTowOVrOGQWf4A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxNjoyMDo0MlrOGQxO-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc5OTAwOA==", "bodyText": "Could you please add a brief javadoc explaining what this class is?", "url": "https://github.com/elastic/elasticsearch/pull/56149#discussion_r419799008", "createdAt": "2020-05-05T00:09:09Z", "author": {"login": "rjernst"}, "path": "server/src/main/java/org/elasticsearch/script/DynamicMap.java", "diffHunk": "@@ -19,28 +19,20 @@\n \n package org.elasticsearch.script;\n \n-import org.apache.logging.log4j.LogManager;\n-import org.elasticsearch.common.logging.DeprecationLogger;\n-\n import java.util.Collection;\n import java.util.Map;\n import java.util.Set;\n+import java.util.function.Function;\n \n-public final class DeprecationMap implements Map<String, Object> {\n-\n-    private static final DeprecationLogger deprecationLogger =\n-        new DeprecationLogger(LogManager.getLogger(DeprecationMap.class));\n+public final class DynamicMap implements Map<String, Object> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a6bad076073b0e8dcc9de5f44cd2994be7caa5a"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDIzNzA1MA==", "bodyText": "Added.", "url": "https://github.com/elastic/elasticsearch/pull/56149#discussion_r420237050", "createdAt": "2020-05-05T16:20:42Z", "author": {"login": "jdconrad"}, "path": "server/src/main/java/org/elasticsearch/script/DynamicMap.java", "diffHunk": "@@ -19,28 +19,20 @@\n \n package org.elasticsearch.script;\n \n-import org.apache.logging.log4j.LogManager;\n-import org.elasticsearch.common.logging.DeprecationLogger;\n-\n import java.util.Collection;\n import java.util.Map;\n import java.util.Set;\n+import java.util.function.Function;\n \n-public final class DeprecationMap implements Map<String, Object> {\n-\n-    private static final DeprecationLogger deprecationLogger =\n-        new DeprecationLogger(LogManager.getLogger(DeprecationMap.class));\n+public final class DynamicMap implements Map<String, Object> {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc5OTAwOA=="}, "originalCommit": {"oid": "1a6bad076073b0e8dcc9de5f44cd2994be7caa5a"}, "originalPosition": 16}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2361, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}