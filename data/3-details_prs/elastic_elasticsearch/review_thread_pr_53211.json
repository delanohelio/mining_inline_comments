{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg0NjE1MjMw", "number": 53211, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOFQwNzowMjo0NlrODmEz8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQwNTo1MjoxMVrODmKu0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxMjUxMzE0OnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/identity-provider/src/main/java/org/elasticsearch/xpack/idp/IdentityProviderPlugin.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOFQwNzowMjo0NlrOFzTiSg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQwNTo1MDo0N1rOFzbirg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM0MTc3MA==", "bodyText": "is this TODO about possibly exposing sp defaults in IDP settings?", "url": "https://github.com/elastic/elasticsearch/pull/53211#discussion_r389341770", "createdAt": "2020-03-08T07:02:46Z", "author": {"login": "jkakavas"}, "path": "x-pack/plugin/identity-provider/src/main/java/org/elasticsearch/xpack/idp/IdentityProviderPlugin.java", "diffHunk": "@@ -80,12 +84,22 @@\n         }\n \n         SamlInit.initialize();\n-        final SamlIdentityProvider idp = SamlIdentityProvider.builder().fromSettings(environment).build();\n         final SamlServiceProviderIndex index = new SamlServiceProviderIndex(client, clusterService);\n+\n+        // TODO", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7a35fb91250ce4be498c155e9046ffd09d994ccb"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTQ3Mjk0Mg==", "bodyText": "Yes, these should definitely be configurable, and this isn't the place to set them, but I wanted to avoid Yak shaving here.", "url": "https://github.com/elastic/elasticsearch/pull/53211#discussion_r389472942", "createdAt": "2020-03-09T05:50:47Z", "author": {"login": "tvernum"}, "path": "x-pack/plugin/identity-provider/src/main/java/org/elasticsearch/xpack/idp/IdentityProviderPlugin.java", "diffHunk": "@@ -80,12 +84,22 @@\n         }\n \n         SamlInit.initialize();\n-        final SamlIdentityProvider idp = SamlIdentityProvider.builder().fromSettings(environment).build();\n         final SamlServiceProviderIndex index = new SamlServiceProviderIndex(client, clusterService);\n+\n+        // TODO", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM0MTc3MA=="}, "originalCommit": {"oid": "7a35fb91250ce4be498c155e9046ffd09d994ccb"}, "originalPosition": 36}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxMjUxNTQ4OnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/identity-provider/src/main/java/org/elasticsearch/xpack/idp/saml/sp/CloudServiceProvider.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOFQwNzowODoxMlrOFzTjXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQwNTo1MzoxOFrOFzbkfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM0MjA0Nw==", "bodyText": "Do we need a name ?", "url": "https://github.com/elastic/elasticsearch/pull/53211#discussion_r389342047", "createdAt": "2020-03-08T07:08:12Z", "author": {"login": "jkakavas"}, "path": "x-pack/plugin/identity-provider/src/main/java/org/elasticsearch/xpack/idp/saml/sp/CloudServiceProvider.java", "diffHunk": "@@ -27,13 +29,16 @@\n     private final boolean signAuthnRequests;\n     private final boolean signLogoutRequests;\n \n-    public CloudServiceProvider(String entityId, URL assertionConsumerService, Set<String> allowedNameIdFormats,\n-                                ReadableDuration authnExpiry, ServiceProviderPrivileges privileges, AttributeNames attributeNames,\n+    public CloudServiceProvider(String entityId, String name, boolean enabled, URL assertionConsumerService,\n+                                Set<String> allowedNameIdFormats, ReadableDuration authnExpiry,\n+                                ServiceProviderPrivileges privileges, AttributeNames attributeNames,\n                                 Set<X509Credential> spSigningCredentials, boolean signAuthnRequests, boolean signLogoutRequests) {\n         if (Strings.isNullOrEmpty(entityId)) {\n             throw new IllegalArgumentException(\"Service Provider Entity ID cannot be null or empty\");\n         }\n         this.entityId = entityId;\n+        this.name = name;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7a35fb91250ce4be498c155e9046ffd09d994ccb"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTQ3MzQwNQ==", "bodyText": "No, but we store it in the doc, so I bubbled it up.\nWe could rip it out entirely instead.", "url": "https://github.com/elastic/elasticsearch/pull/53211#discussion_r389473405", "createdAt": "2020-03-09T05:53:18Z", "author": {"login": "tvernum"}, "path": "x-pack/plugin/identity-provider/src/main/java/org/elasticsearch/xpack/idp/saml/sp/CloudServiceProvider.java", "diffHunk": "@@ -27,13 +29,16 @@\n     private final boolean signAuthnRequests;\n     private final boolean signLogoutRequests;\n \n-    public CloudServiceProvider(String entityId, URL assertionConsumerService, Set<String> allowedNameIdFormats,\n-                                ReadableDuration authnExpiry, ServiceProviderPrivileges privileges, AttributeNames attributeNames,\n+    public CloudServiceProvider(String entityId, String name, boolean enabled, URL assertionConsumerService,\n+                                Set<String> allowedNameIdFormats, ReadableDuration authnExpiry,\n+                                ServiceProviderPrivileges privileges, AttributeNames attributeNames,\n                                 Set<X509Credential> spSigningCredentials, boolean signAuthnRequests, boolean signLogoutRequests) {\n         if (Strings.isNullOrEmpty(entityId)) {\n             throw new IllegalArgumentException(\"Service Provider Entity ID cannot be null or empty\");\n         }\n         this.entityId = entityId;\n+        this.name = name;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM0MjA0Nw=="}, "originalCommit": {"oid": "7a35fb91250ce4be498c155e9046ffd09d994ccb"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxMzQ4MzA1OnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/identity-provider/src/main/java/org/elasticsearch/xpack/idp/saml/idp/SamlIdentityProviderBuilder.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQwNTo1MjoxMVrOFzbjqg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQwNTo1MjoxMVrOFzbjqg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTQ3MzE5NA==", "bodyText": "However, I think this one is old, and shouldn't be here.", "url": "https://github.com/elastic/elasticsearch/pull/53211#discussion_r389473194", "createdAt": "2020-03-09T05:52:11Z", "author": {"login": "tvernum"}, "path": "x-pack/plugin/identity-provider/src/main/java/org/elasticsearch/xpack/idp/saml/idp/SamlIdentityProviderBuilder.java", "diffHunk": "@@ -70,17 +71,22 @@\n         Setting.Property.NodeScope);\n     public static final Setting<String> IDP_CONTACT_EMAIL = Setting.simpleString(\"xpack.idp.contact.email\", Setting.Property.NodeScope);\n \n+    private final SamlServiceProviderResolver serviceProviderResolver;\n+\n     private String entityId;\n     private Map<String, URL> ssoEndpoints;\n     private Map<String, URL> sloEndpoints;\n     private X509Credential signingCredential;\n     private X509Credential metadataSigningCredential;\n     private SamlIdentityProvider.ContactInfo technicalContact;\n     private SamlIdentityProvider.OrganizationInfo organization;\n+    private SamlIdentityProvider.ServiceProviderDefaults serviceProviderDefaults;\n \n-    SamlIdentityProviderBuilder() {\n+    SamlIdentityProviderBuilder(SamlServiceProviderResolver serviceProviderResolver) {\n+        this.serviceProviderResolver = serviceProviderResolver;\n         this.ssoEndpoints = new HashMap<>();\n         this.sloEndpoints = new HashMap<>();\n+        // TODO", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7a35fb91250ce4be498c155e9046ffd09d994ccb"}, "originalPosition": 28}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3448, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}