{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgxMTA4MDcz", "number": 52930, "title": "Deprecate undocumented alternatives to the nodes hot threads API (#52640)", "bodyText": "This PR deprecates the undocumented alternatives to the nodes hot threads API.\n[issue: #52640]", "createdAt": "2020-02-27T22:35:47Z", "url": "https://github.com/elastic/elasticsearch/pull/52930", "merged": true, "mergeCommit": {"oid": "7989d676ec105117d7a342232b7d5bb6a7244698"}, "closed": true, "closedAt": "2020-03-24T03:22:51Z", "author": {"login": "muachilin"}, "timelineItems": {"totalCount": 28, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcIhhNYgH2gAyMzgxMTA4MDczOjVjZWNmYzMwZDhjNDdhOGJhNjIwZmZiNGRhNTIzYTQyMDM4YWFmMDM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcQqPHyAFqTM3OTk3NTI1NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5cecfc30d8c47a8ba620ffb4da523a42038aaf03", "author": {"user": {"login": "muachilin", "name": null}}, "url": "https://github.com/elastic/elasticsearch/commit/5cecfc30d8c47a8ba620ffb4da523a42038aaf03", "committedDate": "2020-02-27T20:40:37Z", "message": "Merge pull request #1 from elastic/master\n\nUpdate forked repository"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c144dfd6f03da253c21bd45ae63f1fe756fb937", "author": {"user": {"login": "muachilin", "name": null}}, "url": "https://github.com/elastic/elasticsearch/commit/8c144dfd6f03da253c21bd45ae63f1fe756fb937", "committedDate": "2020-02-27T22:19:08Z", "message": "Deprecate undocumented alternatives to the nodes hot threads API"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ce731cb475a6cbad837099bf8dcfb2a0fe9ccd3", "author": {"user": {"login": "muachilin", "name": null}}, "url": "https://github.com/elastic/elasticsearch/commit/3ce731cb475a6cbad837099bf8dcfb2a0fe9ccd3", "committedDate": "2020-02-27T22:20:32Z", "message": "Remove unused array of strings"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "78f23e1ba889006f18712e4dc1ec1f4977f0dd0e", "author": {"user": {"login": "muachilin", "name": null}}, "url": "https://github.com/elastic/elasticsearch/commit/78f23e1ba889006f18712e4dc1ec1f4977f0dd0e", "committedDate": "2020-02-27T22:34:02Z", "message": "Modify the nodeId in the tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MDY0MzMw", "url": "https://github.com/elastic/elasticsearch/pull/52930#pullrequestreview-366064330", "createdAt": "2020-02-27T23:09:56Z", "commit": {"oid": "78f23e1ba889006f18712e4dc1ec1f4977f0dd0e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QyMzowOTo1N1rOFvkZ0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QyMzowOTo1N1rOFvkZ0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTQyMzgyNw==", "bodyText": "This complexity isn't necessary. You can override the deprecatedRoutes method.", "url": "https://github.com/elastic/elasticsearch/pull/52930#discussion_r385423827", "createdAt": "2020-02-27T23:09:57Z", "author": {"login": "jasontedor"}, "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "diffHunk": "@@ -60,6 +67,12 @@ public String getName() {\n \n     @Override\n     public RestChannelConsumer prepareRequest(final RestRequest request, final NodeClient client) throws IOException {\n+        if (request.rawPath().equals(\"/_cluster/nodes/hotthreads\") ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "78f23e1ba889006f18712e4dc1ec1f4977f0dd0e"}, "originalPosition": 29}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "317e1d0d1e71645fad8fb9b32b0f632b6c08b752", "author": {"user": {"login": "muachilin", "name": null}}, "url": "https://github.com/elastic/elasticsearch/commit/317e1d0d1e71645fad8fb9b32b0f632b6c08b752", "committedDate": "2020-02-28T16:05:58Z", "message": "[feat] Override deprecatedRoutes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3NTM1NzQ3", "url": "https://github.com/elastic/elasticsearch/pull/52930#pullrequestreview-367535747", "createdAt": "2020-03-02T21:20:31Z", "commit": {"oid": "317e1d0d1e71645fad8fb9b32b0f632b6c08b752"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQyMToyMDozMVrOFwvqSQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQyMToyMDozMVrOFwvqSQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY1Njg0MQ==", "bodyText": "This shouldn't be needed as the REST infrastructure will handle for you when a deprecated path is invoked. Did you find some reason that you needed to add this?", "url": "https://github.com/elastic/elasticsearch/pull/52930#discussion_r386656841", "createdAt": "2020-03-02T21:20:31Z", "author": {"login": "jasontedor"}, "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "diffHunk": "@@ -60,6 +82,11 @@ public String getName() {\n \n     @Override\n     public RestChannelConsumer prepareRequest(final RestRequest request, final NodeClient client) throws IOException {\n+        List<String> deprecatedRoutesPath = deprecatedRoutes().stream().map(DeprecatedRoute::getPath).collect(Collectors.toList());\n+        int getDeprecatedRoutesPathIndex = deprecatedRoutesPath.indexOf(request.rawPath());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "317e1d0d1e71645fad8fb9b32b0f632b6c08b752"}, "originalPosition": 66}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3NTYxODMw", "url": "https://github.com/elastic/elasticsearch/pull/52930#pullrequestreview-367561830", "createdAt": "2020-03-02T22:02:47Z", "commit": {"oid": "317e1d0d1e71645fad8fb9b32b0f632b6c08b752"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQyMjowMjo0OFrOFww8jg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQyMjowMzoxMlrOFww9WQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY3NzkwMg==", "bodyText": "I think we should deprecate this endpoint as well, in favor of /_nodes/hot_threads.", "url": "https://github.com/elastic/elasticsearch/pull/52930#discussion_r386677902", "createdAt": "2020-03-02T22:02:48Z", "author": {"login": "jasontedor"}, "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "diffHunk": "@@ -34,22 +36,42 @@\n \n import java.io.IOException;\n import java.util.List;\n+import java.util.stream.Collectors;\n \n import static org.elasticsearch.rest.RestRequest.Method.GET;\n \n-\n public class RestNodesHotThreadsAction extends BaseRestHandler {\n \n+    private static final DeprecationLogger deprecationLogger = new DeprecationLogger(\n+        LogManager.getLogger(RestNodesHotThreadsAction.class));\n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_HOTTHREADS = \"[/_cluster/nodes/hotthreads] is a deprecated endpoint. \" \n+        + \"Please use [/_cluster/nodes/hot_threads] instead.\";\n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_NODEID_HOTTHREADS = \"[/_cluster/nodes/{nodeId}/hotthreads] is a deprecated endpoint. \"\n+        + \"Please use [/_cluster/nodes/{nodeId}/hot_threads] instead.\";\n+    static final String DEPRECATED_MESSAGE_NODES_HOTTHREADS = \"[/_nodes/hotthreads] is a deprecated endpoint. \"\n+        + \"Please use [/_nodes/hot_threads] instead.\";\n+    static final String DEPRECATED_MESSAGE_NODES_NODEID_HOTTHREADS = \"[/_nodes/{nodeId}/hotthreads] is a deprecated endpoint. \"\n+        + \"Please use [/_nodes/{nodeId}/hot_threads] instead.\";\n+\n+    @Override\n+    public List<DeprecatedRoute> deprecatedRoutes() {\n+        return List.of(\n+            new DeprecatedRoute(GET, \"/_cluster/nodes/hotthreads\",\n+                    DEPRECATED_MESSAGE_CLUSTER_NODES_HOTTHREADS),\n+            new DeprecatedRoute(GET, \"/_cluster/nodes/{nodeId}/hotthreads\",\n+                    DEPRECATED_MESSAGE_CLUSTER_NODES_NODEID_HOTTHREADS),\n+            new DeprecatedRoute(GET, \"/_nodes/hotthreads\",\n+                    DEPRECATED_MESSAGE_NODES_HOTTHREADS),\n+            new DeprecatedRoute(GET, \"/_nodes/{nodeId}/hotthreads\",\n+                    DEPRECATED_MESSAGE_NODES_NODEID_HOTTHREADS));\n+    }        \n+\n     @Override\n     public List<Route> routes() {\n         return List.of(\n-            new Route(GET, \"/_cluster/nodes/hotthreads\"),\n             new Route(GET, \"/_cluster/nodes/hot_threads\"),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "317e1d0d1e71645fad8fb9b32b0f632b6c08b752"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY3ODEwNQ==", "bodyText": "I think we should deprecate this endpoint as well, in favor of /_nodes/{nodeId}/hot_threads.", "url": "https://github.com/elastic/elasticsearch/pull/52930#discussion_r386678105", "createdAt": "2020-03-02T22:03:12Z", "author": {"login": "jasontedor"}, "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "diffHunk": "@@ -34,22 +36,42 @@\n \n import java.io.IOException;\n import java.util.List;\n+import java.util.stream.Collectors;\n \n import static org.elasticsearch.rest.RestRequest.Method.GET;\n \n-\n public class RestNodesHotThreadsAction extends BaseRestHandler {\n \n+    private static final DeprecationLogger deprecationLogger = new DeprecationLogger(\n+        LogManager.getLogger(RestNodesHotThreadsAction.class));\n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_HOTTHREADS = \"[/_cluster/nodes/hotthreads] is a deprecated endpoint. \" \n+        + \"Please use [/_cluster/nodes/hot_threads] instead.\";\n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_NODEID_HOTTHREADS = \"[/_cluster/nodes/{nodeId}/hotthreads] is a deprecated endpoint. \"\n+        + \"Please use [/_cluster/nodes/{nodeId}/hot_threads] instead.\";\n+    static final String DEPRECATED_MESSAGE_NODES_HOTTHREADS = \"[/_nodes/hotthreads] is a deprecated endpoint. \"\n+        + \"Please use [/_nodes/hot_threads] instead.\";\n+    static final String DEPRECATED_MESSAGE_NODES_NODEID_HOTTHREADS = \"[/_nodes/{nodeId}/hotthreads] is a deprecated endpoint. \"\n+        + \"Please use [/_nodes/{nodeId}/hot_threads] instead.\";\n+\n+    @Override\n+    public List<DeprecatedRoute> deprecatedRoutes() {\n+        return List.of(\n+            new DeprecatedRoute(GET, \"/_cluster/nodes/hotthreads\",\n+                    DEPRECATED_MESSAGE_CLUSTER_NODES_HOTTHREADS),\n+            new DeprecatedRoute(GET, \"/_cluster/nodes/{nodeId}/hotthreads\",\n+                    DEPRECATED_MESSAGE_CLUSTER_NODES_NODEID_HOTTHREADS),\n+            new DeprecatedRoute(GET, \"/_nodes/hotthreads\",\n+                    DEPRECATED_MESSAGE_NODES_HOTTHREADS),\n+            new DeprecatedRoute(GET, \"/_nodes/{nodeId}/hotthreads\",\n+                    DEPRECATED_MESSAGE_NODES_NODEID_HOTTHREADS));\n+    }        \n+\n     @Override\n     public List<Route> routes() {\n         return List.of(\n-            new Route(GET, \"/_cluster/nodes/hotthreads\"),\n             new Route(GET, \"/_cluster/nodes/hot_threads\"),\n-            new Route(GET, \"/_cluster/nodes/{nodeId}/hotthreads\"),\n             new Route(GET, \"/_cluster/nodes/{nodeId}/hot_threads\"),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "317e1d0d1e71645fad8fb9b32b0f632b6c08b752"}, "originalPosition": 54}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwODIyMDUz", "url": "https://github.com/elastic/elasticsearch/pull/52930#pullrequestreview-370822053", "createdAt": "2020-03-08T11:16:54Z", "commit": {"oid": "317e1d0d1e71645fad8fb9b32b0f632b6c08b752"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOFQxMToxNjo1NFrOFzUmIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOFQxMToxNzo1N1rOFzUmTA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM1OTEzNg==", "bodyText": "Just question: Should we also use private here?\nConsider use String.format() rather than concat string due to better performance, better readability.", "url": "https://github.com/elastic/elasticsearch/pull/52930#discussion_r389359136", "createdAt": "2020-03-08T11:16:54Z", "author": {"login": "changjenyin"}, "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "diffHunk": "@@ -34,22 +36,42 @@\n \n import java.io.IOException;\n import java.util.List;\n+import java.util.stream.Collectors;\n \n import static org.elasticsearch.rest.RestRequest.Method.GET;\n \n-\n public class RestNodesHotThreadsAction extends BaseRestHandler {\n \n+    private static final DeprecationLogger deprecationLogger = new DeprecationLogger(\n+        LogManager.getLogger(RestNodesHotThreadsAction.class));\n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_HOTTHREADS = \"[/_cluster/nodes/hotthreads] is a deprecated endpoint. \" ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "317e1d0d1e71645fad8fb9b32b0f632b6c08b752"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM1OTE4MA==", "bodyText": "Please avoid using non-const string all over the place, maybe consider to make repeatedly string const.", "url": "https://github.com/elastic/elasticsearch/pull/52930#discussion_r389359180", "createdAt": "2020-03-08T11:17:57Z", "author": {"login": "changjenyin"}, "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "diffHunk": "@@ -34,22 +36,42 @@\n \n import java.io.IOException;\n import java.util.List;\n+import java.util.stream.Collectors;\n \n import static org.elasticsearch.rest.RestRequest.Method.GET;\n \n-\n public class RestNodesHotThreadsAction extends BaseRestHandler {\n \n+    private static final DeprecationLogger deprecationLogger = new DeprecationLogger(\n+        LogManager.getLogger(RestNodesHotThreadsAction.class));\n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_HOTTHREADS = \"[/_cluster/nodes/hotthreads] is a deprecated endpoint. \" \n+        + \"Please use [/_cluster/nodes/hot_threads] instead.\";\n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_NODEID_HOTTHREADS = \"[/_cluster/nodes/{nodeId}/hotthreads] is a deprecated endpoint. \"\n+        + \"Please use [/_cluster/nodes/{nodeId}/hot_threads] instead.\";\n+    static final String DEPRECATED_MESSAGE_NODES_HOTTHREADS = \"[/_nodes/hotthreads] is a deprecated endpoint. \"\n+        + \"Please use [/_nodes/hot_threads] instead.\";\n+    static final String DEPRECATED_MESSAGE_NODES_NODEID_HOTTHREADS = \"[/_nodes/{nodeId}/hotthreads] is a deprecated endpoint. \"\n+        + \"Please use [/_nodes/{nodeId}/hot_threads] instead.\";\n+\n+    @Override\n+    public List<DeprecatedRoute> deprecatedRoutes() {\n+        return List.of(\n+            new DeprecatedRoute(GET, \"/_cluster/nodes/hotthreads\",\n+                    DEPRECATED_MESSAGE_CLUSTER_NODES_HOTTHREADS),\n+            new DeprecatedRoute(GET, \"/_cluster/nodes/{nodeId}/hotthreads\",\n+                    DEPRECATED_MESSAGE_CLUSTER_NODES_NODEID_HOTTHREADS),\n+            new DeprecatedRoute(GET, \"/_nodes/hotthreads\",\n+                    DEPRECATED_MESSAGE_NODES_HOTTHREADS),\n+            new DeprecatedRoute(GET, \"/_nodes/{nodeId}/hotthreads\",\n+                    DEPRECATED_MESSAGE_NODES_NODEID_HOTTHREADS));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "317e1d0d1e71645fad8fb9b32b0f632b6c08b752"}, "originalPosition": 45}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ca5c7e969e0571cbb329822c809ab8adeb9cb88c", "author": {"user": {"login": "muachilin", "name": null}}, "url": "https://github.com/elastic/elasticsearch/commit/ca5c7e969e0571cbb329822c809ab8adeb9cb88c", "committedDate": "2020-03-09T10:38:34Z", "message": "Deprecate more routes and remove tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "842e1f60601a3c3eab8bcbb10d80e18bc8d28925", "author": {"user": {"login": "muachilin", "name": null}}, "url": "https://github.com/elastic/elasticsearch/commit/842e1f60601a3c3eab8bcbb10d80e18bc8d28925", "committedDate": "2020-03-09T10:51:26Z", "message": "Refactor deprecateRoutes()"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcyNDE4NTQ0", "url": "https://github.com/elastic/elasticsearch/pull/52930#pullrequestreview-372418544", "createdAt": "2020-03-11T01:09:58Z", "commit": {"oid": "842e1f60601a3c3eab8bcbb10d80e18bc8d28925"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwMTowOTo1OFrOF0mK3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwMTozOTo0MlrOF0mlOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY5NTY0NA==", "bodyText": "What's the reason for declaring all of these local variables?", "url": "https://github.com/elastic/elasticsearch/pull/52930#discussion_r390695644", "createdAt": "2020-03-11T01:09:58Z", "author": {"login": "jasontedor"}, "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "diffHunk": "@@ -37,20 +37,46 @@\n \n import static org.elasticsearch.rest.RestRequest.Method.GET;\n \n-\n public class RestNodesHotThreadsAction extends BaseRestHandler {\n \n+    static final String formatDeprecatedMessageWithoutNodeID = \"%s is a deprecated endpoint. Please use [/nodes/hot_threads] instead.\";\n+    static final String formatDeprecatedMessageWithNodeID = \"%s is a deprecated endpoint. Please use [/nodes/{nodeId}/hot_threads] instead.\";\n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_HOT_THREADS = String.format(formatDeprecatedMessageWithoutNodeID, \"[/_cluster/nodes/hot_threads]\"); \n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_NODEID_HOT_THREADS = String.format(formatDeprecatedMessageWithNodeID, \"[/_cluster/nodes/{nodeId}/hot_threads]\");\n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_HOTTHREADS = String.format(formatDeprecatedMessageWithoutNodeID, \"[/_cluster/nodes/hotthreads]\"); \n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_NODEID_HOTTHREADS = String.format(formatDeprecatedMessageWithNodeID, \"[/_cluster/nodes/{nodeId}/hotthreads]\"); \n+    static final String DEPRECATED_MESSAGE_NODES_HOTTHREADS = String.format(formatDeprecatedMessageWithoutNodeID, \"[/_nodes/hotthreads]\"); \n+    static final String DEPRECATED_MESSAGE_NODES_NODEID_HOTTHREADS = String.format(formatDeprecatedMessageWithNodeID, \"[/_nodes/{nodeId}/hotthreads]\");\n+\n+    @Override\n+    public List<DeprecatedRoute> deprecatedRoutes() {\n+        final String DEPRECATED_PATH_CLUSTER_NODES_HOT_THREADS = \"/_cluster/nodes/hot_threads\";\n+        final String DEPRECATED_PATH_CLUSTER_NODES_NODEID_HOT_THREADS = \"/_cluster/nodes/{nodeId}/hot_threads\";\n+        final String DEPRECATED_PATH_CLUSTER_NODES_HOTTHREADS = \"/_cluster/nodes/hotthreads\";\n+        final String DEPRECATED_PATH_CLUSTER_NODES_NODEID_HOTTHREADS = \"/_cluster/nodes/{nodeId}/hotthreads\";\n+        final String DEPRECATED_PATH_NODES_HOTTHREADS = \"/_nodes/hotthreads\";\n+        final String DEPRECATED_PATH_NODES_NODEID_HOTTHREADS = \"/_nodes/{nodeId}/hotthreads\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "842e1f60601a3c3eab8bcbb10d80e18bc8d28925"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDcwMjM5Mg==", "bodyText": "You'll need to use the locale version of String#format and pass Locale.ROOT.", "url": "https://github.com/elastic/elasticsearch/pull/52930#discussion_r390702392", "createdAt": "2020-03-11T01:39:42Z", "author": {"login": "jasontedor"}, "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "diffHunk": "@@ -37,20 +37,46 @@\n \n import static org.elasticsearch.rest.RestRequest.Method.GET;\n \n-\n public class RestNodesHotThreadsAction extends BaseRestHandler {\n \n+    static final String formatDeprecatedMessageWithoutNodeID = \"%s is a deprecated endpoint. Please use [/nodes/hot_threads] instead.\";\n+    static final String formatDeprecatedMessageWithNodeID = \"%s is a deprecated endpoint. Please use [/nodes/{nodeId}/hot_threads] instead.\";\n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_HOT_THREADS = String.format(formatDeprecatedMessageWithoutNodeID, \"[/_cluster/nodes/hot_threads]\"); \n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_NODEID_HOT_THREADS = String.format(formatDeprecatedMessageWithNodeID, \"[/_cluster/nodes/{nodeId}/hot_threads]\");\n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_HOTTHREADS = String.format(formatDeprecatedMessageWithoutNodeID, \"[/_cluster/nodes/hotthreads]\"); \n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_NODEID_HOTTHREADS = String.format(formatDeprecatedMessageWithNodeID, \"[/_cluster/nodes/{nodeId}/hotthreads]\"); \n+    static final String DEPRECATED_MESSAGE_NODES_HOTTHREADS = String.format(formatDeprecatedMessageWithoutNodeID, \"[/_nodes/hotthreads]\"); \n+    static final String DEPRECATED_MESSAGE_NODES_NODEID_HOTTHREADS = String.format(formatDeprecatedMessageWithNodeID, \"[/_nodes/{nodeId}/hotthreads]\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "842e1f60601a3c3eab8bcbb10d80e18bc8d28925"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8472ed407663f751f0e66e49e669420eb597f46d", "author": {"user": {"login": "muachilin", "name": null}}, "url": "https://github.com/elastic/elasticsearch/commit/8472ed407663f751f0e66e49e669420eb597f46d", "committedDate": "2020-03-11T11:52:42Z", "message": "Update forked elasticsearch\n\nUpdate forked repo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "31a650b468a13984e26dd74160d5384611981435", "author": {"user": {"login": "muachilin", "name": null}}, "url": "https://github.com/elastic/elasticsearch/commit/31a650b468a13984e26dd74160d5384611981435", "committedDate": "2020-03-11T12:01:08Z", "message": "Use locale version of String.format"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe8638bd34632d3976612dea2114f00cdb490d70", "author": {"user": {"login": "muachilin", "name": null}}, "url": "https://github.com/elastic/elasticsearch/commit/fe8638bd34632d3976612dea2114f00cdb490d70", "committedDate": "2020-03-11T12:01:40Z", "message": "Use locale version of String.format"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f828b754c952b530dba65ec09d75a91dca985772", "author": {"user": {"login": "muachilin", "name": null}}, "url": "https://github.com/elastic/elasticsearch/commit/f828b754c952b530dba65ec09d75a91dca985772", "committedDate": "2020-03-11T12:03:17Z", "message": "Remove tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzczOTk1NTk4", "url": "https://github.com/elastic/elasticsearch/pull/52930#pullrequestreview-373995598", "createdAt": "2020-03-13T01:28:15Z", "commit": {"oid": "f828b754c952b530dba65ec09d75a91dca985772"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QwMToyODoxNVrOF104cA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QwMToyODoxNVrOF104cA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTk4NTI2NA==", "bodyText": "These can all be private now.", "url": "https://github.com/elastic/elasticsearch/pull/52930#discussion_r391985264", "createdAt": "2020-03-13T01:28:15Z", "author": {"login": "jasontedor"}, "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "diffHunk": "@@ -34,23 +34,62 @@\n \n import java.io.IOException;\n import java.util.List;\n+import java.util.Locale;\n \n import static org.elasticsearch.rest.RestRequest.Method.GET;\n \n-\n public class RestNodesHotThreadsAction extends BaseRestHandler {\n \n+    static final String formatDeprecatedMessageWithoutNodeID = \"[%s] is a deprecated endpoint. Please use [/nodes/hot_threads] instead.\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f828b754c952b530dba65ec09d75a91dca985772"}, "originalPosition": 11}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c2ca69dc35035668b8c3b66847dfea71e1b26d2a", "author": {"user": {"login": "muachilin", "name": null}}, "url": "https://github.com/elastic/elasticsearch/commit/c2ca69dc35035668b8c3b66847dfea71e1b26d2a", "committedDate": "2020-03-13T17:02:13Z", "message": "Declare string variables as private"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "55a96a340e024c3bc46c103c9375bb0a0ef90ca7", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/55a96a340e024c3bc46c103c9375bb0a0ef90ca7", "committedDate": "2020-03-14T22:56:25Z", "message": "Merge branch 'master' into deprecate-hot-thread"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc6fb6e619b5b43fa53786500ffc544d3d16818f", "author": {"user": {"login": "muachilin", "name": null}}, "url": "https://github.com/elastic/elasticsearch/commit/bc6fb6e619b5b43fa53786500ffc544d3d16818f", "committedDate": "2020-03-15T12:25:47Z", "message": "Solve style violation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dc776d4d2df0e4ab0e1fa568385b96cfad4437c1", "author": {"user": {"login": "muachilin", "name": null}}, "url": "https://github.com/elastic/elasticsearch/commit/dc776d4d2df0e4ab0e1fa568385b96cfad4437c1", "committedDate": "2020-03-15T12:26:52Z", "message": "Solve style violation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d900b6bd5bdf078be72f416faa413517f3264df7", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/d900b6bd5bdf078be72f416faa413517f3264df7", "committedDate": "2020-03-15T20:51:26Z", "message": "Merge branch 'master' into deprecate-hot-thread"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f6b8d3c1e92aab6259d2d43cf25edd5887c66bf", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/5f6b8d3c1e92aab6259d2d43cf25edd5887c66bf", "committedDate": "2020-03-16T11:12:39Z", "message": "Merge branch 'master' into deprecate-hot-thread"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4MTYxMTQw", "url": "https://github.com/elastic/elasticsearch/pull/52930#pullrequestreview-378161140", "createdAt": "2020-03-19T23:30:39Z", "commit": {"oid": "5f6b8d3c1e92aab6259d2d43cf25edd5887c66bf"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQyMzozMDozOVrOF5Dy9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQyMzozMDozOVrOF5Dy9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM3NTM0OQ==", "bodyText": "Sorry, I just noticed this should say \"/_nodes\" and not \"/nodes\". Same for the next line.", "url": "https://github.com/elastic/elasticsearch/pull/52930#discussion_r395375349", "createdAt": "2020-03-19T23:30:39Z", "author": {"login": "jasontedor"}, "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "diffHunk": "@@ -34,23 +34,64 @@\n \n import java.io.IOException;\n import java.util.List;\n+import java.util.Locale;\n \n import static org.elasticsearch.rest.RestRequest.Method.GET;\n \n-\n public class RestNodesHotThreadsAction extends BaseRestHandler {\n \n+    private static final String formatDeprecatedMessageWithoutNodeID = \"[%s] is a deprecated endpoint. \" + \n+        \"Please use [/nodes/hot_threads] instead.\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5f6b8d3c1e92aab6259d2d43cf25edd5887c66bf"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "81b514823202cab089ed39b41ceb11fea36f795a", "author": {"user": {"login": "muachilin", "name": null}}, "url": "https://github.com/elastic/elasticsearch/commit/81b514823202cab089ed39b41ceb11fea36f795a", "committedDate": "2020-03-22T15:56:37Z", "message": "Modify deprecated message"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d295478b62977fb79c71416d5d3b8b8aa1f7e856", "author": {"user": {"login": "muachilin", "name": null}}, "url": "https://github.com/elastic/elasticsearch/commit/d295478b62977fb79c71416d5d3b8b8aa1f7e856", "committedDate": "2020-03-22T15:58:19Z", "message": "Modify deprecated message"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ad9fe9ee85c33de04d55538108781ede93dd6c59", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/ad9fe9ee85c33de04d55538108781ede93dd6c59", "committedDate": "2020-03-22T15:59:02Z", "message": "Merge branch 'master' into deprecate-hot-thread"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5OTc1MjU1", "url": "https://github.com/elastic/elasticsearch/pull/52930#pullrequestreview-379975255", "createdAt": "2020-03-24T03:21:24Z", "commit": {"oid": "ad9fe9ee85c33de04d55538108781ede93dd6c59"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2070, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}