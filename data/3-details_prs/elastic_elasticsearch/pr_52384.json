{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc1NTY5MDA4", "number": 52384, "title": "[DOCS] Document EQL search REST API", "bodyText": "Add API reference documentation for the EQL search API added with #49768.\nFor now, this PR only documents parameters expected for use with milestone 1 of #49581. Parameters used for joins are marked as Reserved for future use.\nRemaining parameters and response will be documented alongside future development.", "createdAt": "2020-02-14T20:53:38Z", "url": "https://github.com/elastic/elasticsearch/pull/52384", "merged": true, "mergeCommit": {"oid": "32317a6910aa4bdf4b5ac4ca8a5988d4d01b33dd"}, "closed": true, "closedAt": "2020-04-24T18:25:34Z", "author": {"login": "jrodewig"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcTHU8HgH2gAyMzc1NTY5MDA4OmE0MTc3NGUxYjBkYTc0NmI4ZDAxMTczYWE5ZmU5ZmNlYzYwNjUyNDU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABca05LlAH2gAyMzc1NTY5MDA4OjQ0YTQ2YzA3YzE0NzBmOTU4ZGMzODBiZjQ2MDgzNzczZmEwZWU3NmI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a41774e1b0da746b8d01173aa9fe9fcec6065245", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/a41774e1b0da746b8d01173aa9fe9fcec6065245", "committedDate": "2020-03-31T18:22:51Z", "message": "[DOCS] EQL: Document EQL Search API"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d4a9293d10ad5a97bd6c12a77b2b6f36a39add81", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/d4a9293d10ad5a97bd6c12a77b2b6f36a39add81", "committedDate": "2020-03-04T12:15:09Z", "message": "Document sort response field"}, "afterCommit": {"oid": "a41774e1b0da746b8d01173aa9fe9fcec6065245", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/a41774e1b0da746b8d01173aa9fe9fcec6065245", "committedDate": "2020-03-31T18:22:51Z", "message": "[DOCS] EQL: Document EQL Search API"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk5MTk2OTQ1", "url": "https://github.com/elastic/elasticsearch/pull/52384#pullrequestreview-399196945", "createdAt": "2020-04-23T15:08:59Z", "commit": {"oid": "a41774e1b0da746b8d01173aa9fe9fcec6065245"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxNTowODo1OVrOGKtOOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQwNTo1OTo1NVrOGLHymg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzg3OTg2Nw==", "bodyText": "I believe it works with * as well: localhost:9200/*/_eql/search", "url": "https://github.com/elastic/elasticsearch/pull/52384#discussion_r413879867", "createdAt": "2020-04-23T15:08:59Z", "author": {"login": "astefan"}, "path": "docs/reference/eql/eql-search-api.asciidoc", "diffHunk": "@@ -0,0 +1,311 @@\n+[role=\"xpack\"]\n+[testenv=\"basic\"]\n+\n+[[eql-search-api]]\n+=== EQL search API\n+++++\n+<titleabbrev>EQL search</titleabbrev>\n+++++\n+\n+experimental::[]\n+\n+Returns search results for an <<eql,Event Query Language (EQL)>> query.\n+\n+////\n+[source,console]\n+----\n+PUT my_index/_bulk?refresh\n+{\"index\":{\"_index\" : \"my_index\", \"_id\" : \"1\"}}\n+{ \"@timestamp\": \"2020-12-06T11:04:05.000Z\", \"agent\": { \"id\": \"8a4f500d\" }, \"event\": { \"category\": \"process\" }, \"process\": { \"name\": \"cmd.exe\", \"path\": \"C:\\\\Windows\\\\System32\\\\cmd.exe\" } }\n+{\"index\":{\"_index\" : \"my_index\", \"_id\" : \"2\"}}\n+{ \"@timestamp\": \"2020-12-06T11:04:07.000Z\", \"agent\": { \"id\": \"8a4f500d\" }, \"event\": { \"category\": \"file\" }, \"file\": { \"accessed\": \"2020-12-07T11:07:08.000Z\", \"name\": \"cmd.exe\", \"path\": \"C:\\\\Windows\\\\System32\\\\cmd.exe\", \"type\": \"file\", \"size\": 16384 }, \"process\": { \"name\": \"cmd.exe\", \"path\": \"C:\\\\Windows\\\\System32\\\\cmd.exe\" } }\n+{\"index\":{\"_index\" : \"my_index\", \"_id\" : \"3\"}}\n+{ \"@timestamp\": \"2020-12-07T11:06:07.000Z\", \"agent\": { \"id\": \"8a4f500d\" }, \"event\": { \"category\": \"process\" }, \"process\": { \"name\": \"cmd.exe\", \"path\": \"C:\\\\Windows\\\\System32\\\\cmd.exe\" } }\n+{\"index\":{\"_index\" : \"my_index\", \"_id\" : \"4\"}}\n+{ \"@timestamp\": \"2020-12-07T11:07:08.000Z\", \"agent\": { \"id\": \"8a4f500d\" }, \"event\": { \"category\": \"file\" }, \"file\": { \"accessed\": \"2020-12-07T11:07:08.000Z\", \"name\": \"cmd.exe\", \"path\": \"C:\\\\Windows\\\\System32\\\\cmd.exe\", \"type\": \"file\", \"size\": 16384 }, \"process\": { \"name\": \"cmd.exe\", \"path\": \"C:\\\\Windows\\\\System32\\\\cmd.exe\" } }\n+{\"index\":{\"_index\" : \"my_index\", \"_id\" : \"5\"}}\n+{ \"@timestamp\": \"2020-12-07T11:07:09.000Z\", \"agent\": { \"id\": \"8a4f500d\" }, \"event\": { \"category\": \"process\" }, \"process\": { \"name\": \"regsvr32.exe\", \"path\": \"C:\\\\Windows\\\\System32\\\\regsvr32.exe\" } }\n+----\n+// TESTSETUP\n+////\n+\n+[source,console]\n+----\n+GET my_index/_eql/search\n+{\n+  \"query\": \"\"\"\n+    process where process.name = \"regsvr32.exe\"\n+  \"\"\"\n+}\n+----\n+\n+[[eql-search-api-request]]\n+==== {api-request-title}\n+\n+`GET <index>/_eql/search`\n+\n+`POST <index>/_eql/search`\n+\n+[[eql-search-api-prereqs]]\n+==== {api-prereq-title}\n+\n+See <<eql-requirements,EQL requirements>>.\n+\n+[[eql-search-api-limitations]]\n+===== Limitations\n+\n+See <<eql-limitations,EQL limitations>>.\n+\n+[[eql-search-api-path-params]]\n+==== {api-path-parms-title}\n+\n+`<index>`::\n+(Required, string)\n+Comma-separated list of index names or <<indices-aliases,index aliases>> used to\n+limit the request. Accepts wildcard expressions.\n++\n+To search all indices, use `_all`.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a41774e1b0da746b8d01173aa9fe9fcec6065245"}, "originalPosition": 67}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDMxNTE2Mg==", "bodyText": "We say it's integer, but we seem to allow floating point numbers.", "url": "https://github.com/elastic/elasticsearch/pull/52384#discussion_r414315162", "createdAt": "2020-04-24T05:59:55Z", "author": {"login": "astefan"}, "path": "docs/reference/eql/eql-search-api.asciidoc", "diffHunk": "@@ -0,0 +1,311 @@\n+[role=\"xpack\"]\n+[testenv=\"basic\"]\n+\n+[[eql-search-api]]\n+=== EQL search API\n+++++\n+<titleabbrev>EQL search</titleabbrev>\n+++++\n+\n+experimental::[]\n+\n+Returns search results for an <<eql,Event Query Language (EQL)>> query.\n+\n+////\n+[source,console]\n+----\n+PUT my_index/_bulk?refresh\n+{\"index\":{\"_index\" : \"my_index\", \"_id\" : \"1\"}}\n+{ \"@timestamp\": \"2020-12-06T11:04:05.000Z\", \"agent\": { \"id\": \"8a4f500d\" }, \"event\": { \"category\": \"process\" }, \"process\": { \"name\": \"cmd.exe\", \"path\": \"C:\\\\Windows\\\\System32\\\\cmd.exe\" } }\n+{\"index\":{\"_index\" : \"my_index\", \"_id\" : \"2\"}}\n+{ \"@timestamp\": \"2020-12-06T11:04:07.000Z\", \"agent\": { \"id\": \"8a4f500d\" }, \"event\": { \"category\": \"file\" }, \"file\": { \"accessed\": \"2020-12-07T11:07:08.000Z\", \"name\": \"cmd.exe\", \"path\": \"C:\\\\Windows\\\\System32\\\\cmd.exe\", \"type\": \"file\", \"size\": 16384 }, \"process\": { \"name\": \"cmd.exe\", \"path\": \"C:\\\\Windows\\\\System32\\\\cmd.exe\" } }\n+{\"index\":{\"_index\" : \"my_index\", \"_id\" : \"3\"}}\n+{ \"@timestamp\": \"2020-12-07T11:06:07.000Z\", \"agent\": { \"id\": \"8a4f500d\" }, \"event\": { \"category\": \"process\" }, \"process\": { \"name\": \"cmd.exe\", \"path\": \"C:\\\\Windows\\\\System32\\\\cmd.exe\" } }\n+{\"index\":{\"_index\" : \"my_index\", \"_id\" : \"4\"}}\n+{ \"@timestamp\": \"2020-12-07T11:07:08.000Z\", \"agent\": { \"id\": \"8a4f500d\" }, \"event\": { \"category\": \"file\" }, \"file\": { \"accessed\": \"2020-12-07T11:07:08.000Z\", \"name\": \"cmd.exe\", \"path\": \"C:\\\\Windows\\\\System32\\\\cmd.exe\", \"type\": \"file\", \"size\": 16384 }, \"process\": { \"name\": \"cmd.exe\", \"path\": \"C:\\\\Windows\\\\System32\\\\cmd.exe\" } }\n+{\"index\":{\"_index\" : \"my_index\", \"_id\" : \"5\"}}\n+{ \"@timestamp\": \"2020-12-07T11:07:09.000Z\", \"agent\": { \"id\": \"8a4f500d\" }, \"event\": { \"category\": \"process\" }, \"process\": { \"name\": \"regsvr32.exe\", \"path\": \"C:\\\\Windows\\\\System32\\\\regsvr32.exe\" } }\n+----\n+// TESTSETUP\n+////\n+\n+[source,console]\n+----\n+GET my_index/_eql/search\n+{\n+  \"query\": \"\"\"\n+    process where process.name = \"regsvr32.exe\"\n+  \"\"\"\n+}\n+----\n+\n+[[eql-search-api-request]]\n+==== {api-request-title}\n+\n+`GET <index>/_eql/search`\n+\n+`POST <index>/_eql/search`\n+\n+[[eql-search-api-prereqs]]\n+==== {api-prereq-title}\n+\n+See <<eql-requirements,EQL requirements>>.\n+\n+[[eql-search-api-limitations]]\n+===== Limitations\n+\n+See <<eql-limitations,EQL limitations>>.\n+\n+[[eql-search-api-path-params]]\n+==== {api-path-parms-title}\n+\n+`<index>`::\n+(Required, string)\n+Comma-separated list of index names or <<indices-aliases,index aliases>> used to\n+limit the request. Accepts wildcard expressions.\n++\n+To search all indices, use `_all`.\n+\n+[[eql-search-api-query-params]]\n+==== {api-query-parms-title}\n+\n+include::{docdir}/rest-api/common-parms.asciidoc[tag=allow-no-indices]\n++\n+Defaults to `false`.\n+\n+include::{docdir}/rest-api/common-parms.asciidoc[tag=expand-wildcards]\n++\n+Defaults to `open`.\n+\n+include::{docdir}/rest-api/common-parms.asciidoc[tag=index-ignore-unavailable]\n+\n+[[eql-search-api-request-body]]\n+==== {api-request-body-title}\n+\n+`query`::\n+(Required, string)\n+<<eql-syntax,EQL>> query you wish to run.\n++\n+IMPORTANT: This parameter supports a subset of EQL syntax. See\n+<<eql-unsupported-syntax>>.\n+\n+`event_category_field`::\n+(Required*, string)\n+Field containing the event classification, such as `process`, `file`, or\n+`network`.\n++\n+Defaults to `event.category`, as defined in the {ecs-ref}/ecs-event.html[Elastic\n+Common Schema (ECS)]. If an index does not contain the `event.category` field,\n+this value is required.\n+\n+[[eql-search-api-timestamp-field]]\n+`timestamp_field`::\n++\n+--\n+(Required*, string)\n+Field containing event timestamp.\n+\n+Defaults to `@timestamp`, as defined in the\n+{ecs-ref}/ecs-event.html[Elastic Common Schema (ECS)]. If an index does not\n+contain the `@timestamp` field, this value is required.\n+\n+Events in the API response are sorted by this field's value, converted to\n+milliseconds since the https://en.wikipedia.org/wiki/Unix_time[Unix epoch], in\n+ascending order.\n+--\n+\n+`implicit_join_key_field`::\n+(Optional, string)\n+Reserved for future use.\n+\n+`filter`::\n+(Optional, <<query-dsl,query DSL object>>)\n+Query, written in query DSL, used to filter the documents on which the EQL query\n+runs.\n+\n+`search_after`::\n+(Optional, string)\n+Reserved for future use.\n+\n+`size`::\n+(Optional, integer)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a41774e1b0da746b8d01173aa9fe9fcec6065245"}, "originalPosition": 131}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d09b28600e254be8d69569be89ca3c62301d4ca7", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/d09b28600e254be8d69569be89ca3c62301d4ca7", "committedDate": "2020-04-24T17:24:25Z", "message": "address feedback"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "44a46c07c1470f958dc380bf46083773fa0ee76b", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/44a46c07c1470f958dc380bf46083773fa0ee76b", "committedDate": "2020-04-24T17:25:38Z", "message": "Merge remote-tracking branch 'upstream/master' into docs__eql-rest-api"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2321, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}