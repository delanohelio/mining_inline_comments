{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc3MDAxODQz", "number": 61776, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxMjoyMzoxMVrOEe4O9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxMzozMDo1MlrOEe541A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAwODE0MDcwOnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/runtime-fields/qa/rest/src/yamlRestTest/java/org/elasticsearch/xpack/runtimefields/rest/CoreTestsWithRuntimeFieldsIT.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxMjoyMzoxMVrOHKzx3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxMzozNjo0NFrOHK2ngg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTA5NjE1OQ==", "bodyText": "@nik9000  this does the job but I am not super proud of it. I guess this is caused by our matching pattern * but we have no way to say \"all indices but the system ones\", and I am not even sure that would work either. Thoughts?", "url": "https://github.com/elastic/elasticsearch/pull/61776#discussion_r481096159", "createdAt": "2020-09-01T12:23:11Z", "author": {"login": "javanna"}, "path": "x-pack/plugin/runtime-fields/qa/rest/src/yamlRestTest/java/org/elasticsearch/xpack/runtimefields/rest/CoreTestsWithRuntimeFieldsIT.java", "diffHunk": "@@ -239,7 +239,7 @@ public void execute(ClientYamlTestExecutionContext executionContext) throws IOEx\n             List<Map<String, Object>> bodies = List.of(\n                 Map.ofEntries(\n                     Map.entry(\"index_patterns\", \"*\"),\n-                    Map.entry(\"priority\", Integer.MAX_VALUE),\n+                    Map.entry(\"priority\", Integer.MAX_VALUE - 1),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "acfaccb715f714ebe92b478f9dd3cdfbe7b40228"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTEzMTc0OA==", "bodyText": "What was wrong? The tests were passing for me without it. I don't mind it - I just don't understand it yet.", "url": "https://github.com/elastic/elasticsearch/pull/61776#discussion_r481131748", "createdAt": "2020-09-01T13:20:40Z", "author": {"login": "nik9000"}, "path": "x-pack/plugin/runtime-fields/qa/rest/src/yamlRestTest/java/org/elasticsearch/xpack/runtimefields/rest/CoreTestsWithRuntimeFieldsIT.java", "diffHunk": "@@ -239,7 +239,7 @@ public void execute(ClientYamlTestExecutionContext executionContext) throws IOEx\n             List<Map<String, Object>> bodies = List.of(\n                 Map.ofEntries(\n                     Map.entry(\"index_patterns\", \"*\"),\n-                    Map.entry(\"priority\", Integer.MAX_VALUE),\n+                    Map.entry(\"priority\", Integer.MAX_VALUE - 1),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTA5NjE1OQ=="}, "originalCommit": {"oid": "acfaccb715f714ebe92b478f9dd3cdfbe7b40228"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTEzOTM1NQ==", "bodyText": "yea this came from merging master in today.  see acfaccb", "url": "https://github.com/elastic/elasticsearch/pull/61776#discussion_r481139355", "createdAt": "2020-09-01T13:31:48Z", "author": {"login": "javanna"}, "path": "x-pack/plugin/runtime-fields/qa/rest/src/yamlRestTest/java/org/elasticsearch/xpack/runtimefields/rest/CoreTestsWithRuntimeFieldsIT.java", "diffHunk": "@@ -239,7 +239,7 @@ public void execute(ClientYamlTestExecutionContext executionContext) throws IOEx\n             List<Map<String, Object>> bodies = List.of(\n                 Map.ofEntries(\n                     Map.entry(\"index_patterns\", \"*\"),\n-                    Map.entry(\"priority\", Integer.MAX_VALUE),\n+                    Map.entry(\"priority\", Integer.MAX_VALUE - 1),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTA5NjE1OQ=="}, "originalCommit": {"oid": "acfaccb715f714ebe92b478f9dd3cdfbe7b40228"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTE0MjY1OA==", "bodyText": "Gotcha. It makes sense. It's kind of a shame we don't override the internal templates too to prove that all of those also work with runtime fields but its cool.", "url": "https://github.com/elastic/elasticsearch/pull/61776#discussion_r481142658", "createdAt": "2020-09-01T13:36:44Z", "author": {"login": "nik9000"}, "path": "x-pack/plugin/runtime-fields/qa/rest/src/yamlRestTest/java/org/elasticsearch/xpack/runtimefields/rest/CoreTestsWithRuntimeFieldsIT.java", "diffHunk": "@@ -239,7 +239,7 @@ public void execute(ClientYamlTestExecutionContext executionContext) throws IOEx\n             List<Map<String, Object>> bodies = List.of(\n                 Map.ofEntries(\n                     Map.entry(\"index_patterns\", \"*\"),\n-                    Map.entry(\"priority\", Integer.MAX_VALUE),\n+                    Map.entry(\"priority\", Integer.MAX_VALUE - 1),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTA5NjE1OQ=="}, "originalCommit": {"oid": "acfaccb715f714ebe92b478f9dd3cdfbe7b40228"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAwODM4Nzg3OnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/elasticsearch/index/query/functionscore/DecayFunctionBuilder.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxMzoyNToxNlrOHK2JRg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxNDowNToyMFrOHK322Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTEzNDkxOA==", "bodyText": "I think I forgot to run these down. I'll add it to my list. But I don't think it blocks merging. We may just never need these to be honest.", "url": "https://github.com/elastic/elasticsearch/pull/61776#discussion_r481134918", "createdAt": "2020-09-01T13:25:16Z", "author": {"login": "nik9000"}, "path": "server/src/main/java/org/elasticsearch/index/query/functionscore/DecayFunctionBuilder.java", "diffHunk": "@@ -210,6 +210,7 @@ private AbstractDistanceScoreFunction parseVariable(String fieldName, XContentPa\n \n         // dates and time and geo need special handling\n         parser.nextToken();\n+        // TODO these ain't gonna work with runtime fields", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d47d450baff4951da9379234a1b04d417b7ec6af"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTE2MjA2NQ==", "bodyText": "I don't think it is worth the effort. I reviewed the leftover TODOs and I am fine with this one staying there.", "url": "https://github.com/elastic/elasticsearch/pull/61776#discussion_r481162065", "createdAt": "2020-09-01T14:04:08Z", "author": {"login": "javanna"}, "path": "server/src/main/java/org/elasticsearch/index/query/functionscore/DecayFunctionBuilder.java", "diffHunk": "@@ -210,6 +210,7 @@ private AbstractDistanceScoreFunction parseVariable(String fieldName, XContentPa\n \n         // dates and time and geo need special handling\n         parser.nextToken();\n+        // TODO these ain't gonna work with runtime fields", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTEzNDkxOA=="}, "originalCommit": {"oid": "d47d450baff4951da9379234a1b04d417b7ec6af"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTE2Mjk2OQ==", "bodyText": "++", "url": "https://github.com/elastic/elasticsearch/pull/61776#discussion_r481162969", "createdAt": "2020-09-01T14:05:20Z", "author": {"login": "nik9000"}, "path": "server/src/main/java/org/elasticsearch/index/query/functionscore/DecayFunctionBuilder.java", "diffHunk": "@@ -210,6 +210,7 @@ private AbstractDistanceScoreFunction parseVariable(String fieldName, XContentPa\n \n         // dates and time and geo need special handling\n         parser.nextToken();\n+        // TODO these ain't gonna work with runtime fields", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTEzNDkxOA=="}, "originalCommit": {"oid": "d47d450baff4951da9379234a1b04d417b7ec6af"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAwODQxMTcyOnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/runtime-fields/src/main/plugin-metadata/plugin-security.policy", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxMzozMDo1MlrOHK2YCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxNToyNjozOVrOHK78sg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTEzODY5OA==", "bodyText": "I think we can remove this. I'll add it to my list of things today.", "url": "https://github.com/elastic/elasticsearch/pull/61776#discussion_r481138698", "createdAt": "2020-09-01T13:30:52Z", "author": {"login": "nik9000"}, "path": "x-pack/plugin/runtime-fields/src/main/plugin-metadata/plugin-security.policy", "diffHunk": "@@ -0,0 +1,20 @@\n+/*\n+ * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n+ * or more contributor license agreements. Licensed under the Elastic License;\n+ * you may not use this file except in compliance with the Elastic License.\n+ */\n+\n+\n+/* TODO this exists so that we can run painless in unit tests which we", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d47d450baff4951da9379234a1b04d417b7ec6af"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTEzODg5OA==", "bodyText": "It also shouldn't block merging.", "url": "https://github.com/elastic/elasticsearch/pull/61776#discussion_r481138898", "createdAt": "2020-09-01T13:31:10Z", "author": {"login": "nik9000"}, "path": "x-pack/plugin/runtime-fields/src/main/plugin-metadata/plugin-security.policy", "diffHunk": "@@ -0,0 +1,20 @@\n+/*\n+ * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n+ * or more contributor license agreements. Licensed under the Elastic License;\n+ * you may not use this file except in compliance with the Elastic License.\n+ */\n+\n+\n+/* TODO this exists so that we can run painless in unit tests which we", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTEzODY5OA=="}, "originalCommit": {"oid": "d47d450baff4951da9379234a1b04d417b7ec6af"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTE2MjQ1Mw==", "bodyText": "thanks", "url": "https://github.com/elastic/elasticsearch/pull/61776#discussion_r481162453", "createdAt": "2020-09-01T14:04:41Z", "author": {"login": "javanna"}, "path": "x-pack/plugin/runtime-fields/src/main/plugin-metadata/plugin-security.policy", "diffHunk": "@@ -0,0 +1,20 @@\n+/*\n+ * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n+ * or more contributor license agreements. Licensed under the Elastic License;\n+ * you may not use this file except in compliance with the Elastic License.\n+ */\n+\n+\n+/* TODO this exists so that we can run painless in unit tests which we", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTEzODY5OA=="}, "originalCommit": {"oid": "d47d450baff4951da9379234a1b04d417b7ec6af"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTIzMDAwMg==", "bodyText": "I pushed 34e576f to drop it.", "url": "https://github.com/elastic/elasticsearch/pull/61776#discussion_r481230002", "createdAt": "2020-09-01T15:26:39Z", "author": {"login": "nik9000"}, "path": "x-pack/plugin/runtime-fields/src/main/plugin-metadata/plugin-security.policy", "diffHunk": "@@ -0,0 +1,20 @@\n+/*\n+ * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n+ * or more contributor license agreements. Licensed under the Elastic License;\n+ * you may not use this file except in compliance with the Elastic License.\n+ */\n+\n+\n+/* TODO this exists so that we can run painless in unit tests which we", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTEzODY5OA=="}, "originalCommit": {"oid": "d47d450baff4951da9379234a1b04d417b7ec6af"}, "originalPosition": 8}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1791, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}