{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEzNzc5MDkz", "number": 56253, "title": "Add prefer_v2_templates parameter to Reindex", "bodyText": "Relates to #53101", "createdAt": "2020-05-05T22:12:45Z", "url": "https://github.com/elastic/elasticsearch/pull/56253", "merged": true, "mergeCommit": {"oid": "7ca47f52e812ddc66c5c8ba71d62f42452eb51dc"}, "closed": true, "closedAt": "2020-05-06T20:01:14Z", "author": {"login": "probakowski"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABceGpHagH2gAyNDEzNzc5MDkzOjMwYzgzYmFmMTlkNGVlZDBhMjUzYjQxMjdhZDQ2NjNhZTBhZGZkYjE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcer7IfgH2gAyNDEzNzc5MDkzOjA0NjA5NThiOWRkMmZiNzEwODU0NzExYWYwMmJkNzliOTA4MmIxYmQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "30c83baf19d4eed0a253b4127ad4663ae0adfdb1", "author": {"user": {"login": "probakowski", "name": "Przemko Robakowski"}}, "url": "https://github.com/elastic/elasticsearch/commit/30c83baf19d4eed0a253b4127ad4663ae0adfdb1", "committedDate": "2020-05-04T21:48:09Z", "message": "prefer_v2_templates for reindex"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9b41be4b6802aa96d373844bd45538e4951818de", "author": {"user": {"login": "probakowski", "name": "Przemko Robakowski"}}, "url": "https://github.com/elastic/elasticsearch/commit/9b41be4b6802aa96d373844bd45538e4951818de", "committedDate": "2020-05-04T21:55:11Z", "message": "hlrc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f3d11049e296243a1a1b4f5e3854fed891795ae9", "author": {"user": {"login": "probakowski", "name": "Przemko Robakowski"}}, "url": "https://github.com/elastic/elasticsearch/commit/f3d11049e296243a1a1b4f5e3854fed891795ae9", "committedDate": "2020-05-05T22:07:36Z", "message": "tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "44009a13cebc19618b8b6d2944d909a4b0f28158", "author": {"user": {"login": "probakowski", "name": "Przemko Robakowski"}}, "url": "https://github.com/elastic/elasticsearch/commit/44009a13cebc19618b8b6d2944d909a4b0f28158", "committedDate": "2020-05-05T22:08:35Z", "message": "fix for backport"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA2MjI0Mjcy", "url": "https://github.com/elastic/elasticsearch/pull/56253#pullrequestreview-406224272", "createdAt": "2020-05-05T23:31:54Z", "commit": {"oid": "44009a13cebc19618b8b6d2944d909a4b0f28158"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQyMzozMTo1NFrOGQ_VNQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQyMzozMjoyNFrOGQ_V1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDQ2ODAyMQ==", "bodyText": "I think this is going to have to be 8.0.0 until this gets backported", "url": "https://github.com/elastic/elasticsearch/pull/56253#discussion_r420468021", "createdAt": "2020-05-05T23:31:54Z", "author": {"login": "dakrone"}, "path": "server/src/main/java/org/elasticsearch/index/reindex/ReindexRequest.java", "diffHunk": "@@ -86,6 +91,9 @@ public ReindexRequest(StreamInput in) throws IOException {\n         super(in);\n         destination = new IndexRequest(in);\n         remoteInfo = in.readOptionalWriteable(RemoteInfo::new);\n+        if (in.getVersion().onOrAfter(Version.V_7_8_0)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44009a13cebc19618b8b6d2944d909a4b0f28158"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDQ2ODE4Mg==", "bodyText": "Same comment here about this having to be 8.0.0 until backport (or else the BWC tests will likely fail)", "url": "https://github.com/elastic/elasticsearch/pull/56253#discussion_r420468182", "createdAt": "2020-05-05T23:32:24Z", "author": {"login": "dakrone"}, "path": "server/src/main/java/org/elasticsearch/index/reindex/ReindexRequest.java", "diffHunk": "@@ -262,6 +280,9 @@ public void writeTo(StreamOutput out) throws IOException {\n         super.writeTo(out);\n         destination.writeTo(out);\n         out.writeOptionalWriteable(remoteInfo);\n+        if (out.getVersion().onOrAfter(Version.V_7_8_0)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44009a13cebc19618b8b6d2944d909a4b0f28158"}, "originalPosition": 54}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA2NDA1NjAz", "url": "https://github.com/elastic/elasticsearch/pull/56253#pullrequestreview-406405603", "createdAt": "2020-05-06T08:35:43Z", "commit": {"oid": "44009a13cebc19618b8b6d2944d909a4b0f28158"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQwODozNTo0NFrOGRJH6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQwODozNTo0NFrOGRJH6A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDYyODQ1Ng==", "bodyText": "for 8.0 we want this to default to true if it's not specified by the user (this is just a reminder to change this after backport)", "url": "https://github.com/elastic/elasticsearch/pull/56253#discussion_r420628456", "createdAt": "2020-05-06T08:35:44Z", "author": {"login": "andreidan"}, "path": "modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestReindexAction.java", "diffHunk": "@@ -68,6 +68,11 @@ protected ReindexRequest buildRequest(RestRequest request) throws IOException {\n         if (request.hasParam(\"scroll\")) {\n             internal.setScroll(parseTimeValue(request.param(\"scroll\"), \"scroll\"));\n         }\n+\n+        if (request.hasParam(\"prefer_v2_templates\")) {\n+            internal.preferV2Templates(Boolean.parseBoolean(request.param(\"prefer_v2_templates\")));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44009a13cebc19618b8b6d2944d909a4b0f28158"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "026d0b23bd39dc963cbe05249aba1f280c1b43cf", "author": {"user": {"login": "probakowski", "name": "Przemko Robakowski"}}, "url": "https://github.com/elastic/elasticsearch/commit/026d0b23bd39dc963cbe05249aba1f280c1b43cf", "committedDate": "2020-05-06T15:57:36Z", "message": "bwc version fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0460958b9dd2fb710854711af02bd79b9082b1bd", "author": {"user": {"login": "probakowski", "name": "Przemko Robakowski"}}, "url": "https://github.com/elastic/elasticsearch/commit/0460958b9dd2fb710854711af02bd79b9082b1bd", "committedDate": "2020-05-06T17:14:19Z", "message": "Merge remote-tracking branch 'origin/master' into reindex-prefer-v2-templates"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 137, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}