{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg3OTg4MDQ2", "number": 62458, "title": "EQL: Forbid usage of ['] for string literals", "bodyText": "The usage of single quotes to wrap a string literal is forbidden\nand an error encouraging the user to user double quotes is returned.\nTests are properly adjusted.\nRelates to #61659", "createdAt": "2020-09-16T13:25:41Z", "url": "https://github.com/elastic/elasticsearch/pull/62458", "merged": true, "mergeCommit": {"oid": "8be400b77370bf4cf68c89f492c2d235f3cce43c"}, "closed": true, "closedAt": "2020-09-16T19:21:59Z", "author": {"login": "matriv"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdJcVx0gH2gAyNDg3OTg4MDQ2OjY0N2U3YjM1MWUzYzA4ODM2ZTlhNTNkYjdmZWRkZWQyY2ZlNGJiMjM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdJen5YgH2gAyNDg3OTg4MDQ2OjZlZTI3OWNiMmE5NzFmODBhNDZjNjNiNTdmOTc4OGQ0NDlkZTIyZGU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "647e7b351e3c08836e9a53db7fedded2cfe4bb23", "author": {"user": {"login": "matriv", "name": "Marios Trivyzas"}}, "url": "https://github.com/elastic/elasticsearch/commit/647e7b351e3c08836e9a53db7fedded2cfe4bb23", "committedDate": "2020-09-16T13:23:41Z", "message": "EQL: Forbid usage of ['] for string literals\n\nThe usage of single quotes to wrap a string literal is forbidden\nand an error encouraging the user to user double quotes is returned.\n\nTests are properly adjusted.\n\nRelated to #61659"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8f7c305baebb91ef12d9788b6e5e60b4a5e47181", "author": {"user": {"login": "matriv", "name": "Marios Trivyzas"}}, "url": "https://github.com/elastic/elasticsearch/commit/8f7c305baebb91ef12d9788b6e5e60b4a5e47181", "committedDate": "2020-09-16T13:42:10Z", "message": "fix tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5NzQ5NTMy", "url": "https://github.com/elastic/elasticsearch/pull/62458#pullrequestreview-489749532", "createdAt": "2020-09-16T15:32:00Z", "commit": {"oid": "8f7c305baebb91ef12d9788b6e5e60b4a5e47181"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxNTozMjowMVrOHS2muA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxNTozNDo0NFrOHS2uZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTUzMTA2NA==", "bodyText": "Why \\\\\\\" and not just \\\"?", "url": "https://github.com/elastic/elasticsearch/pull/62458#discussion_r489531064", "createdAt": "2020-09-16T15:32:01Z", "author": {"login": "costin"}, "path": "x-pack/plugin/eql/qa/common/src/main/java/org/elasticsearch/test/eql/stats/RestEqlUsageTestCase.java", "diffHunk": "@@ -178,7 +178,7 @@ public void testEqlRestUsage() throws IOException {\n                 \"  [process where serial_event_id < 4] by exit_code\" + \n                 \"  [process where opcode == 1] by user\" + \n                 \"  [process where opcode == 2] by user\" + \n-                \"  [file where parent_process_name == 'file_delete_event'] by exit_code\" +\n+                \"  [file where parent_process_name == \\\\\\\"file_delete_event\\\\\\\"] by exit_code\" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f7c305baebb91ef12d9788b6e5e60b4a5e47181"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTUzMzAyOQ==", "bodyText": "Use double quotes [\"] for defining string literals, not single quotes [']", "url": "https://github.com/elastic/elasticsearch/pull/62458#discussion_r489533029", "createdAt": "2020-09-16T15:34:44Z", "author": {"login": "costin"}, "path": "x-pack/plugin/eql/src/main/java/org/elasticsearch/xpack/eql/parser/AbstractBuilder.java", "diffHunk": "@@ -173,6 +177,13 @@ public static String unquoteString(String text) {\n         return resultString.toString();\n     }\n \n+    private static void checkForSingleQuotedString(Source source, String text, int i) {\n+        if (text.charAt(i) == '\\'') {\n+            throw new ParsingException(source,\n+                    \"Single quotes ['] are not supported around literal strings, please use double quotes [\\\"]\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f7c305baebb91ef12d9788b6e5e60b4a5e47181"}, "originalPosition": 50}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5NzU0MTY2", "url": "https://github.com/elastic/elasticsearch/pull/62458#pullrequestreview-489754166", "createdAt": "2020-09-16T15:36:44Z", "commit": {"oid": "8f7c305baebb91ef12d9788b6e5e60b4a5e47181"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "efddcbbf446fda3d6eeda3d4def7937bc8195f34", "author": {"user": {"login": "matriv", "name": "Marios Trivyzas"}}, "url": "https://github.com/elastic/elasticsearch/commit/efddcbbf446fda3d6eeda3d4def7937bc8195f34", "committedDate": "2020-09-16T15:43:10Z", "message": "rephrase error message"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "33aa213af7c6d0393935e6a3a73fe49bff708d39", "author": {"user": {"login": "matriv", "name": "Marios Trivyzas"}}, "url": "https://github.com/elastic/elasticsearch/commit/33aa213af7c6d0393935e6a3a73fe49bff708d39", "committedDate": "2020-09-16T15:46:25Z", "message": "Merge remote-tracking branch 'upstream/master' into forbid-single-quotes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ee279cb2a971f80a46c63b57f9788d449de22de", "author": {"user": {"login": "matriv", "name": "Marios Trivyzas"}}, "url": "https://github.com/elastic/elasticsearch/commit/6ee279cb2a971f80a46c63b57f9788d449de22de", "committedDate": "2020-09-16T16:03:17Z", "message": "fix tests"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4494, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}