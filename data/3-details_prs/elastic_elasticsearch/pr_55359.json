{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA0Nzc2NDMy", "number": 55359, "title": "Removing warning for forbidden apis not supporting java 14", "bodyText": "While the current version of forbidden apis still does not support java\n14, the warning message has become very noisy as we now require java 14\nfor the elasticsearch build. This commit replaces the warn log message\nwith a comment in the code.", "createdAt": "2020-04-16T21:58:06Z", "url": "https://github.com/elastic/elasticsearch/pull/55359", "merged": true, "mergeCommit": {"oid": "cb297e31066de42955f3ed888f2373c46c82f590"}, "closed": true, "closedAt": "2020-04-17T17:27:25Z", "author": {"login": "rjernst"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcYT9h2AH2gAyNDA0Nzc2NDMyOmI0YTUyNDdhZDI3YTcyZDY5ZDY1ZjZlOTMwN2Q0YzkwNDlkNTNmYmY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcYVl3lAFqTM5NTA3MzY1NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b4a5247ad27a72d69d65f6e9307d4c9049d53fbf", "author": {"user": {"login": "rjernst", "name": "Ryan Ernst"}}, "url": "https://github.com/elastic/elasticsearch/commit/b4a5247ad27a72d69d65f6e9307d4c9049d53fbf", "committedDate": "2020-04-16T21:55:40Z", "message": "Removing warning for forbidden apis not supporting java 14\n\nWhile the current version of forbidden apis still does not support java\n14, the warning message has become very noisy as we now require java 14\nfor the elasticsearch build. This commit replaces the warn log message\nwith a comment in the code."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "20908ed0cd6a95b54a25c4db41d8f586192b328a", "author": {"user": {"login": "rjernst", "name": "Ryan Ernst"}}, "url": "https://github.com/elastic/elasticsearch/commit/20908ed0cd6a95b54a25c4db41d8f586192b328a", "committedDate": "2020-04-16T22:20:00Z", "message": "Merge branch 'master' into forbidden_java14"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1MDczNjU0", "url": "https://github.com/elastic/elasticsearch/pull/55359#pullrequestreview-395073654", "createdAt": "2020-04-16T23:49:34Z", "commit": {"oid": "20908ed0cd6a95b54a25c4db41d8f586192b328a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQyMzo0OTozNFrOGG7GEA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQyMzo0OTozNFrOGG7GEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTkxMjg0OA==", "bodyText": "Now that I look at this, why are we basing this on runtime java version? This should simply be hard-coded to be minimumRuntimeVersion since that's what we pass to java -release so it's effectively impossible to use APIs from a newer JDK anyhow as it'd fail at compile time. The fact that we might be configuring the build with a later runtime JVM is irrelevant. That only affects runtime behavior (i.e. tests) nothing about how our code is compiled and which JDK APIs are available to it.\nWe'll need to of course deal with the fallout of forbiddenapi compatibility when we bump the minimum runtime version but I don't see that happening anytime soon.", "url": "https://github.com/elastic/elasticsearch/pull/55359#discussion_r409912848", "createdAt": "2020-04-16T23:49:34Z", "author": {"login": "mark-vieira"}, "path": "buildSrc/src/main/groovy/org/elasticsearch/gradle/precommit/PrecommitTasks.groovy", "diffHunk": "@@ -161,10 +161,7 @@ class PrecommitTasks {\n \n             targetCompatibility = BuildParams.runtimeJavaVersion.majorVersion\n             if (BuildParams.runtimeJavaVersion > JavaVersion.VERSION_13) {\n-                project.logger.warn(\n-                        \"Forbidden APIs does not support Java versions past 13. Will use the signatures from 13 for {}.\",\n-                        BuildParams.runtimeJavaVersion\n-                )\n+                // forbidden apis does not yet support java 14 (it will in version 3.0), so we must use java 13 target", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "20908ed0cd6a95b54a25c4db41d8f586192b328a"}, "originalPosition": 8}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3269, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}