{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI3NDc3ODkz", "number": 57629, "reviewThreads": {"totalCount": 25, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNjoyMzoyNVrOECa6mA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxODozNjozNFrOELA6aw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwOTczNTkyOnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNjoyMzoyNVrOGe3Xuw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNjo1MDowNFrOGfO8XA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAxNzY1OQ==", "bodyText": "Could we add some metadata here? It would be nice to indicate in here that these are \"stack\" templates. The other thing that would be nice is to have the version of the stack that loaded it in here.\nWhat is the behaviour if the ES is upgraded, will these be overwritten?", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435017659", "createdAt": "2020-06-04T06:23:25Z", "author": {"login": "ruflin"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "diffHunk": "@@ -0,0 +1,152 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"_meta\": {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTQwMzg2OA==", "bodyText": "What is the behaviour if the ES is upgraded, will these be overwritten?\n\nES only overwrites these if we introduce a new (higher) version in the stack module\n\nCould we add some metadata here?\nThe other thing that would be nice is to have the version of the stack that loaded it in here.\n\nSure, this is pretty easy to do, we can add whatever metadata we want, I just copied these from your templates, in there anything in particular other than the version you want to see? (I did add metadata to the templates themselves with version & description)", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435403868", "createdAt": "2020-06-04T16:50:04Z", "author": {"login": "dakrone"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "diffHunk": "@@ -0,0 +1,152 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"_meta\": {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAxNzY1OQ=="}, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwOTczNjk0OnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNjoyMzo1M1rOGe3YZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNjoyMzo1M1rOGe3YZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAxNzgyOQ==", "bodyText": "We just renamed these to dataset.*: elastic/package-registry#491", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435017829", "createdAt": "2020-06-04T06:23:53Z", "author": {"login": "ruflin"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "diffHunk": "@@ -0,0 +1,152 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"_meta\": {\n+      },\n+      \"dynamic_templates\": [\n+        {\n+          \"strings_as_keyword\": {\n+            \"mapping\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"match_mapping_type\": \"string\"\n+          }\n+        }\n+      ],\n+      \"date_detection\": false,\n+      \"properties\": {\n+        \"@timestamp\": {\n+          \"type\": \"date\"\n+        },\n+        \"stream\": {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwOTczNzI2OnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNjoyNDowMVrOGe3Ykw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNjoyNDowMVrOGe3Ykw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAxNzg3NQ==", "bodyText": "This is now name.", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435017875", "createdAt": "2020-06-04T06:24:01Z", "author": {"login": "ruflin"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "diffHunk": "@@ -0,0 +1,152 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"_meta\": {\n+      },\n+      \"dynamic_templates\": [\n+        {\n+          \"strings_as_keyword\": {\n+            \"mapping\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"match_mapping_type\": \"string\"\n+          }\n+        }\n+      ],\n+      \"date_detection\": false,\n+      \"properties\": {\n+        \"@timestamp\": {\n+          \"type\": \"date\"\n+        },\n+        \"stream\": {\n+          \"properties\": {\n+            \"type\": {\n+              \"type\": \"constant_keyword\",\n+              \"value\": \"logs\"\n+            },\n+            \"dataset\": {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwOTczNzk0OnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNjoyNDoxNlrOGe3Y_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNzozMTo0MlrOGfQdfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAxNzk4MQ==", "bodyText": "I'm torn if we should add these or leave them out.", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435017981", "createdAt": "2020-06-04T06:24:16Z", "author": {"login": "ruflin"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "diffHunk": "@@ -0,0 +1,152 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"_meta\": {\n+      },\n+      \"dynamic_templates\": [\n+        {\n+          \"strings_as_keyword\": {\n+            \"mapping\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"match_mapping_type\": \"string\"\n+          }\n+        }\n+      ],\n+      \"date_detection\": false,\n+      \"properties\": {\n+        \"@timestamp\": {\n+          \"type\": \"date\"\n+        },\n+        \"stream\": {\n+          \"properties\": {\n+            \"type\": {\n+              \"type\": \"constant_keyword\",\n+              \"value\": \"logs\"\n+            },\n+            \"dataset\": {\n+              \"type\": \"constant_keyword\"\n+            },\n+            \"namespace\": {\n+              \"type\": \"constant_keyword\"\n+            }\n+          }\n+        },\n+        \"agent\": {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTQwNDk3OA==", "bodyText": "As I mentioned, these were copied, so I'll leave it up to you whether they should be included or not", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435404978", "createdAt": "2020-06-04T16:51:48Z", "author": {"login": "dakrone"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "diffHunk": "@@ -0,0 +1,152 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"_meta\": {\n+      },\n+      \"dynamic_templates\": [\n+        {\n+          \"strings_as_keyword\": {\n+            \"mapping\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"match_mapping_type\": \"string\"\n+          }\n+        }\n+      ],\n+      \"date_detection\": false,\n+      \"properties\": {\n+        \"@timestamp\": {\n+          \"type\": \"date\"\n+        },\n+        \"stream\": {\n+          \"properties\": {\n+            \"type\": {\n+              \"type\": \"constant_keyword\",\n+              \"value\": \"logs\"\n+            },\n+            \"dataset\": {\n+              \"type\": \"constant_keyword\"\n+            },\n+            \"namespace\": {\n+              \"type\": \"constant_keyword\"\n+            }\n+          }\n+        },\n+        \"agent\": {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAxNzk4MQ=="}, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTQyODczMw==", "bodyText": "@ruflin I would leave it. I think it ecourages good practice to have it.", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435428733", "createdAt": "2020-06-04T17:31:42Z", "author": {"login": "ph"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "diffHunk": "@@ -0,0 +1,152 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"_meta\": {\n+      },\n+      \"dynamic_templates\": [\n+        {\n+          \"strings_as_keyword\": {\n+            \"mapping\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"match_mapping_type\": \"string\"\n+          }\n+        }\n+      ],\n+      \"date_detection\": false,\n+      \"properties\": {\n+        \"@timestamp\": {\n+          \"type\": \"date\"\n+        },\n+        \"stream\": {\n+          \"properties\": {\n+            \"type\": {\n+              \"type\": \"constant_keyword\",\n+              \"value\": \"logs\"\n+            },\n+            \"dataset\": {\n+              \"type\": \"constant_keyword\"\n+            },\n+            \"namespace\": {\n+              \"type\": \"constant_keyword\"\n+            }\n+          }\n+        },\n+        \"agent\": {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAxNzk4MQ=="}, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 36}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwOTczOTMzOnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNjoyNDo1MFrOGe3Z6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNjo1MjozM1rOGfPCYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAxODIxNg==", "bodyText": "As ECS version is only max about 10 chars long, I wonder if there is a benefit of setting this much lower?", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435018216", "createdAt": "2020-06-04T06:24:50Z", "author": {"login": "ruflin"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "diffHunk": "@@ -0,0 +1,152 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"_meta\": {\n+      },\n+      \"dynamic_templates\": [\n+        {\n+          \"strings_as_keyword\": {\n+            \"mapping\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"match_mapping_type\": \"string\"\n+          }\n+        }\n+      ],\n+      \"date_detection\": false,\n+      \"properties\": {\n+        \"@timestamp\": {\n+          \"type\": \"date\"\n+        },\n+        \"stream\": {\n+          \"properties\": {\n+            \"type\": {\n+              \"type\": \"constant_keyword\",\n+              \"value\": \"logs\"\n+            },\n+            \"dataset\": {\n+              \"type\": \"constant_keyword\"\n+            },\n+            \"namespace\": {\n+              \"type\": \"constant_keyword\"\n+            }\n+          }\n+        },\n+        \"agent\": {\n+          \"properties\": {\n+            \"hostname\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"name\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"id\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"ephemeral_id\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"type\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"version\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            }\n+          }\n+        },\n+        \"ecs\": {\n+          \"properties\": {\n+            \"version\": {\n+              \"ignore_above\": 1024,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 67}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTQwNTQxMQ==", "bodyText": "There isn't going to be a benefit really? This is only there to ignore ones where a value was mis-indexed", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435405411", "createdAt": "2020-06-04T16:52:33Z", "author": {"login": "dakrone"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "diffHunk": "@@ -0,0 +1,152 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"_meta\": {\n+      },\n+      \"dynamic_templates\": [\n+        {\n+          \"strings_as_keyword\": {\n+            \"mapping\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"match_mapping_type\": \"string\"\n+          }\n+        }\n+      ],\n+      \"date_detection\": false,\n+      \"properties\": {\n+        \"@timestamp\": {\n+          \"type\": \"date\"\n+        },\n+        \"stream\": {\n+          \"properties\": {\n+            \"type\": {\n+              \"type\": \"constant_keyword\",\n+              \"value\": \"logs\"\n+            },\n+            \"dataset\": {\n+              \"type\": \"constant_keyword\"\n+            },\n+            \"namespace\": {\n+              \"type\": \"constant_keyword\"\n+            }\n+          }\n+        },\n+        \"agent\": {\n+          \"properties\": {\n+            \"hostname\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"name\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"id\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"ephemeral_id\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"type\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"version\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            }\n+          }\n+        },\n+        \"ecs\": {\n+          \"properties\": {\n+            \"version\": {\n+              \"ignore_above\": 1024,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAxODIxNg=="}, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 67}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwOTc0MjAyOnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNjoyNTo1NFrOGe3bgw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNjo1MzoyMVrOGfPEJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAxODYyNw==", "bodyText": "For host.* I was thinking if we should only keep host.ip. This ensures that host is an object and it is one of the fields which is not a keyword. The other ones should be detected automatically.", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435018627", "createdAt": "2020-06-04T06:25:54Z", "author": {"login": "ruflin"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "diffHunk": "@@ -0,0 +1,152 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"_meta\": {\n+      },\n+      \"dynamic_templates\": [\n+        {\n+          \"strings_as_keyword\": {\n+            \"mapping\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"match_mapping_type\": \"string\"\n+          }\n+        }\n+      ],\n+      \"date_detection\": false,\n+      \"properties\": {\n+        \"@timestamp\": {\n+          \"type\": \"date\"\n+        },\n+        \"stream\": {\n+          \"properties\": {\n+            \"type\": {\n+              \"type\": \"constant_keyword\",\n+              \"value\": \"logs\"\n+            },\n+            \"dataset\": {\n+              \"type\": \"constant_keyword\"\n+            },\n+            \"namespace\": {\n+              \"type\": \"constant_keyword\"\n+            }\n+          }\n+        },\n+        \"agent\": {\n+          \"properties\": {\n+            \"hostname\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"name\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"id\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"ephemeral_id\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"type\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"version\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            }\n+          }\n+        },\n+        \"ecs\": {\n+          \"properties\": {\n+            \"version\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            }\n+          }\n+        },\n+        \"host\": {\n+          \"properties\": {\n+            \"hostname\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"os\": {\n+              \"properties\": {\n+                \"build\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"kernel\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"codename\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"name\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"family\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"version\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"platform\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"full\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                }\n+              }\n+            },\n+            \"ip\": {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 114}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTQwNTg2Mw==", "bodyText": "Okay, I will remove the non-ip fields under host", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435405863", "createdAt": "2020-06-04T16:53:21Z", "author": {"login": "dakrone"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "diffHunk": "@@ -0,0 +1,152 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"_meta\": {\n+      },\n+      \"dynamic_templates\": [\n+        {\n+          \"strings_as_keyword\": {\n+            \"mapping\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"match_mapping_type\": \"string\"\n+          }\n+        }\n+      ],\n+      \"date_detection\": false,\n+      \"properties\": {\n+        \"@timestamp\": {\n+          \"type\": \"date\"\n+        },\n+        \"stream\": {\n+          \"properties\": {\n+            \"type\": {\n+              \"type\": \"constant_keyword\",\n+              \"value\": \"logs\"\n+            },\n+            \"dataset\": {\n+              \"type\": \"constant_keyword\"\n+            },\n+            \"namespace\": {\n+              \"type\": \"constant_keyword\"\n+            }\n+          }\n+        },\n+        \"agent\": {\n+          \"properties\": {\n+            \"hostname\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"name\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"id\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"ephemeral_id\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"type\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"version\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            }\n+          }\n+        },\n+        \"ecs\": {\n+          \"properties\": {\n+            \"version\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            }\n+          }\n+        },\n+        \"host\": {\n+          \"properties\": {\n+            \"hostname\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"os\": {\n+              \"properties\": {\n+                \"build\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"kernel\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"codename\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"name\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"family\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"version\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"platform\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"full\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                }\n+              }\n+            },\n+            \"ip\": {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAxODYyNw=="}, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 114}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwOTc0MzA1OnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNjoyNjoxOFrOGe3cHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNjo1NDoxOFrOGfPGUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAxODc4Mg==", "bodyText": "We have two _meta fields?", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435018782", "createdAt": "2020-06-04T06:26:18Z", "author": {"login": "ruflin"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "diffHunk": "@@ -0,0 +1,152 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"_meta\": {\n+      },\n+      \"dynamic_templates\": [\n+        {\n+          \"strings_as_keyword\": {\n+            \"mapping\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"match_mapping_type\": \"string\"\n+          }\n+        }\n+      ],\n+      \"date_detection\": false,\n+      \"properties\": {\n+        \"@timestamp\": {\n+          \"type\": \"date\"\n+        },\n+        \"stream\": {\n+          \"properties\": {\n+            \"type\": {\n+              \"type\": \"constant_keyword\",\n+              \"value\": \"logs\"\n+            },\n+            \"dataset\": {\n+              \"type\": \"constant_keyword\"\n+            },\n+            \"namespace\": {\n+              \"type\": \"constant_keyword\"\n+            }\n+          }\n+        },\n+        \"agent\": {\n+          \"properties\": {\n+            \"hostname\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"name\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"id\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"ephemeral_id\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"type\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"version\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            }\n+          }\n+        },\n+        \"ecs\": {\n+          \"properties\": {\n+            \"version\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            }\n+          }\n+        },\n+        \"host\": {\n+          \"properties\": {\n+            \"hostname\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"os\": {\n+              \"properties\": {\n+                \"build\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"kernel\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"codename\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"name\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"family\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"version\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"platform\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"full\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                }\n+              }\n+            },\n+            \"ip\": {\n+              \"type\": \"ip\"\n+            },\n+            \"containerized\": {\n+              \"type\": \"boolean\"\n+            },\n+            \"name\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"id\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"type\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"mac\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"architecture\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            }\n+          }\n+        },\n+        \"message\": {\n+          \"type\": \"text\"\n+        }\n+      }\n+    }\n+  },\n+  \"_meta\": {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 148}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTQwNjQxNw==", "bodyText": "This is _meta on the template itself, not the mapping (which is the other _meta). That way when someone retrieves the template they can see where it originated from", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435406417", "createdAt": "2020-06-04T16:54:18Z", "author": {"login": "dakrone"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "diffHunk": "@@ -0,0 +1,152 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"_meta\": {\n+      },\n+      \"dynamic_templates\": [\n+        {\n+          \"strings_as_keyword\": {\n+            \"mapping\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"match_mapping_type\": \"string\"\n+          }\n+        }\n+      ],\n+      \"date_detection\": false,\n+      \"properties\": {\n+        \"@timestamp\": {\n+          \"type\": \"date\"\n+        },\n+        \"stream\": {\n+          \"properties\": {\n+            \"type\": {\n+              \"type\": \"constant_keyword\",\n+              \"value\": \"logs\"\n+            },\n+            \"dataset\": {\n+              \"type\": \"constant_keyword\"\n+            },\n+            \"namespace\": {\n+              \"type\": \"constant_keyword\"\n+            }\n+          }\n+        },\n+        \"agent\": {\n+          \"properties\": {\n+            \"hostname\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"name\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"id\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"ephemeral_id\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"type\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"version\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            }\n+          }\n+        },\n+        \"ecs\": {\n+          \"properties\": {\n+            \"version\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            }\n+          }\n+        },\n+        \"host\": {\n+          \"properties\": {\n+            \"hostname\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"os\": {\n+              \"properties\": {\n+                \"build\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"kernel\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"codename\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"name\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"family\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"version\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"platform\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"full\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                }\n+              }\n+            },\n+            \"ip\": {\n+              \"type\": \"ip\"\n+            },\n+            \"containerized\": {\n+              \"type\": \"boolean\"\n+            },\n+            \"name\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"id\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"type\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"mac\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"architecture\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            }\n+          }\n+        },\n+        \"message\": {\n+          \"type\": \"text\"\n+        }\n+      }\n+    }\n+  },\n+  \"_meta\": {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAxODc4Mg=="}, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 148}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwOTc0NDkxOnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNjoyNzoxNFrOGe3dVQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNjo1NjozOFrOGfPMUA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAxOTA5Mw==", "bodyText": "Should we have this as true? Could this cause problems if a date is a false positive?", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435019093", "createdAt": "2020-06-04T06:27:14Z", "author": {"login": "ruflin"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "diffHunk": "@@ -0,0 +1,152 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"_meta\": {\n+      },\n+      \"dynamic_templates\": [\n+        {\n+          \"strings_as_keyword\": {\n+            \"mapping\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"match_mapping_type\": \"string\"\n+          }\n+        }\n+      ],\n+      \"date_detection\": false,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAzMzYxNg==", "bodyText": "I suspect that Lee's motivation is that a value that looks like a date could make dynamic mappings create a date field, which would then fail indexing any document that has a non-date value for this field.", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435033616", "createdAt": "2020-06-04T07:01:08Z", "author": {"login": "jpountz"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "diffHunk": "@@ -0,0 +1,152 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"_meta\": {\n+      },\n+      \"dynamic_templates\": [\n+        {\n+          \"strings_as_keyword\": {\n+            \"mapping\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"match_mapping_type\": \"string\"\n+          }\n+        }\n+      ],\n+      \"date_detection\": false,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAxOTA5Mw=="}, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAzNDMwNw==", "bodyText": "should we disable numeric_detection too for the same reason?", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435034307", "createdAt": "2020-06-04T07:02:43Z", "author": {"login": "jpountz"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "diffHunk": "@@ -0,0 +1,152 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"_meta\": {\n+      },\n+      \"dynamic_templates\": [\n+        {\n+          \"strings_as_keyword\": {\n+            \"mapping\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"match_mapping_type\": \"string\"\n+          }\n+        }\n+      ],\n+      \"date_detection\": false,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAxOTA5Mw=="}, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTExMTEwNA==", "bodyText": "Can this be enabled / disabled per object or only globally? In general +1 on having it in to indicate if it is true or false. I'm leaning to false. @simitt might have an opinion here.", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435111104", "createdAt": "2020-06-04T09:17:31Z", "author": {"login": "ruflin"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "diffHunk": "@@ -0,0 +1,152 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"_meta\": {\n+      },\n+      \"dynamic_templates\": [\n+        {\n+          \"strings_as_keyword\": {\n+            \"mapping\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"match_mapping_type\": \"string\"\n+          }\n+        }\n+      ],\n+      \"date_detection\": false,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAxOTA5Mw=="}, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTQwNzk1Mg==", "bodyText": "I agree with @jpountz on leaving this as false.\n@ruflin it looks like configuration is global for this.\nAs far as numeric_detection, I could go either way, does anyone have a strong feeling on it?", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435407952", "createdAt": "2020-06-04T16:56:38Z", "author": {"login": "dakrone"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "diffHunk": "@@ -0,0 +1,152 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"_meta\": {\n+      },\n+      \"dynamic_templates\": [\n+        {\n+          \"strings_as_keyword\": {\n+            \"mapping\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"match_mapping_type\": \"string\"\n+          }\n+        }\n+      ],\n+      \"date_detection\": false,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAxOTA5Mw=="}, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwOTc0Njk2OnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNjoyODowNlrOGe3ejw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNjo1NzoxOVrOGfPOCA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAxOTQwNw==", "bodyText": "There haven't been any problem with 1024 historically so I'm good with keeping it. But I wonder if there is a value for ES which would preferrable?", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435019407", "createdAt": "2020-06-04T06:28:06Z", "author": {"login": "ruflin"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "diffHunk": "@@ -0,0 +1,152 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"_meta\": {\n+      },\n+      \"dynamic_templates\": [\n+        {\n+          \"strings_as_keyword\": {\n+            \"mapping\": {\n+              \"ignore_above\": 1024,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTQwODM5Mg==", "bodyText": "1024 is a good default I think", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435408392", "createdAt": "2020-06-04T16:57:19Z", "author": {"login": "dakrone"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "diffHunk": "@@ -0,0 +1,152 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"_meta\": {\n+      },\n+      \"dynamic_templates\": [\n+        {\n+          \"strings_as_keyword\": {\n+            \"mapping\": {\n+              \"ignore_above\": 1024,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAxOTQwNw=="}, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwOTc0OTcwOnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/core/src/main/resources/logs-default-policy.json", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNjoyOToxMFrOGe3gNg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNjo1NTo0M1rOGe4Lyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAxOTgzMA==", "bodyText": "We should discuss more what our default ILM policy should be moving forward in the context of the new indexing strategy. @jpountz", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435019830", "createdAt": "2020-06-04T06:29:10Z", "author": {"login": "ruflin"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-policy.json", "diffHunk": "@@ -0,0 +1,13 @@\n+{", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAzMDk4Nw==", "bodyText": "Happy to. A sync conversation might help so that we can get aligned on the constraints.", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435030987", "createdAt": "2020-06-04T06:55:43Z", "author": {"login": "jpountz"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-policy.json", "diffHunk": "@@ -0,0 +1,13 @@\n+{", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAxOTgzMA=="}, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwOTc1MTIyOnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/core/src/main/resources/logs-default-settings.json", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNjoyOTo0NFrOGe3hFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxODowMzozMFrOGlRHIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAyMDA1NQ==", "bodyText": "Any recommendations here?", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435020055", "createdAt": "2020-06-04T06:29:44Z", "author": {"login": "ruflin"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-settings.json", "diffHunk": "@@ -0,0 +1,21 @@\n+{\n+  \"template\": {\n+    \"settings\": {\n+      \"index\": {\n+        \"lifecycle\": {\n+          \"name\": \"logs-default-policy\"\n+        },\n+        \"codec\": \"best_compression\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTQwOTE2NQ==", "bodyText": "This is a throughput-storage tradeoff, so the question is just which one we want to default to. This is what the current templates were, but with our other data tiering plans (searchable snapshots), maybe it doesn't make sense any more, I'll add it to the \"to discuss\" pile", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435409165", "createdAt": "2020-06-04T16:58:31Z", "author": {"login": "dakrone"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-settings.json", "diffHunk": "@@ -0,0 +1,21 @@\n+{\n+  \"template\": {\n+    \"settings\": {\n+      \"index\": {\n+        \"lifecycle\": {\n+          \"name\": \"logs-default-policy\"\n+        },\n+        \"codec\": \"best_compression\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAyMDA1NQ=="}, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTczMDg0OQ==", "bodyText": "One thing that crossed my mind recently is whether the templates are the right way to configure this default, or whether this would be a node-level default, e.g. we could default to best_compression on the warm nodes.", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r441730849", "createdAt": "2020-06-17T18:03:30Z", "author": {"login": "jpountz"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-settings.json", "diffHunk": "@@ -0,0 +1,21 @@\n+{\n+  \"template\": {\n+    \"settings\": {\n+      \"index\": {\n+        \"lifecycle\": {\n+          \"name\": \"logs-default-policy\"\n+        },\n+        \"codec\": \"best_compression\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAyMDA1NQ=="}, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwOTc1MTY3OnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/core/src/main/resources/logs-default-settings.json", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNjoyOTo1NlrOGe3haw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNjo1MToxMVrOGe4D0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAyMDEzOQ==", "bodyText": "Also looking for recommendations here from the ES team on what to pick.", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435020139", "createdAt": "2020-06-04T06:29:56Z", "author": {"login": "ruflin"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-settings.json", "diffHunk": "@@ -0,0 +1,21 @@\n+{\n+  \"template\": {\n+    \"settings\": {\n+      \"index\": {\n+        \"lifecycle\": {\n+          \"name\": \"logs-default-policy\"\n+        },\n+        \"codec\": \"best_compression\",\n+        \"refresh_interval\": \"5s\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAyODk0NA==", "bodyText": "I think we should stick to the default refresh interval, which refreshes either every 1s for actively searched shards, and otherwise refreshes on the next search request. This had been introduced for logs/metrics use-cases and helps speed up indexing on data that is not actively searched.", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435028944", "createdAt": "2020-06-04T06:51:11Z", "author": {"login": "jpountz"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-settings.json", "diffHunk": "@@ -0,0 +1,21 @@\n+{\n+  \"template\": {\n+    \"settings\": {\n+      \"index\": {\n+        \"lifecycle\": {\n+          \"name\": \"logs-default-policy\"\n+        },\n+        \"codec\": \"best_compression\",\n+        \"refresh_interval\": \"5s\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAyMDEzOQ=="}, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwOTc1NTU1OnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNjozMToyN1rOGe3jwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNzowMjozOFrOGfPa1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAyMDczNw==", "bodyText": "We need to discuss, if dynamic mapping in here should be true or false. Historically I would have said true but seeing that in the future we will also have the possibility to query some fields which are not indexed, I wonder if false would be better here?", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435020737", "createdAt": "2020-06-04T06:31:27Z", "author": {"login": "ruflin"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "diffHunk": "@@ -0,0 +1,152 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"_meta\": {\n+      },\n+      \"dynamic_templates\": [\n+        {\n+          \"strings_as_keyword\": {\n+            \"mapping\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"match_mapping_type\": \"string\"\n+          }\n+        }\n+      ],\n+      \"date_detection\": false,\n+      \"properties\": {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAzMTg2OA==", "bodyText": "I'd be careful here, we'll indeed be able to query fields that are not indexed, but the current plan still requires that fields be mapped.", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435031868", "createdAt": "2020-06-04T06:57:35Z", "author": {"login": "jpountz"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "diffHunk": "@@ -0,0 +1,152 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"_meta\": {\n+      },\n+      \"dynamic_templates\": [\n+        {\n+          \"strings_as_keyword\": {\n+            \"mapping\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"match_mapping_type\": \"string\"\n+          }\n+        }\n+      ],\n+      \"date_detection\": false,\n+      \"properties\": {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAyMDczNw=="}, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTQxMTY3MQ==", "bodyText": "I think we should leave dynamic mapping enabled, especially since we're dropping other fields (things like host.hostname) that a user may still want to query", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435411671", "createdAt": "2020-06-04T17:02:38Z", "author": {"login": "dakrone"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "diffHunk": "@@ -0,0 +1,152 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"_meta\": {\n+      },\n+      \"dynamic_templates\": [\n+        {\n+          \"strings_as_keyword\": {\n+            \"mapping\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"match_mapping_type\": \"string\"\n+          }\n+        }\n+      ],\n+      \"date_detection\": false,\n+      \"properties\": {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAyMDczNw=="}, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwOTc1NTkzOnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNjozMTozOVrOGe3j_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNjozMTozOVrOGe3j_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAyMDc5OA==", "bodyText": "Nice!", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435020798", "createdAt": "2020-06-04T06:31:39Z", "author": {"login": "ruflin"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "diffHunk": "@@ -0,0 +1,152 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"_meta\": {\n+      },\n+      \"dynamic_templates\": [\n+        {\n+          \"strings_as_keyword\": {\n+            \"mapping\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"match_mapping_type\": \"string\"\n+          }\n+        }\n+      ],\n+      \"date_detection\": false,\n+      \"properties\": {\n+        \"@timestamp\": {\n+          \"type\": \"date\"\n+        },\n+        \"stream\": {\n+          \"properties\": {\n+            \"type\": {\n+              \"type\": \"constant_keyword\",\n+              \"value\": \"logs\"\n+            },\n+            \"dataset\": {\n+              \"type\": \"constant_keyword\"\n+            },\n+            \"namespace\": {\n+              \"type\": \"constant_keyword\"\n+            }\n+          }\n+        },\n+        \"agent\": {\n+          \"properties\": {\n+            \"hostname\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"name\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"id\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"ephemeral_id\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"type\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"version\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            }\n+          }\n+        },\n+        \"ecs\": {\n+          \"properties\": {\n+            \"version\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            }\n+          }\n+        },\n+        \"host\": {\n+          \"properties\": {\n+            \"hostname\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"os\": {\n+              \"properties\": {\n+                \"build\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"kernel\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"codename\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"name\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"family\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"version\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"platform\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"full\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                }\n+              }\n+            },\n+            \"ip\": {\n+              \"type\": \"ip\"\n+            },\n+            \"containerized\": {\n+              \"type\": \"boolean\"\n+            },\n+            \"name\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"id\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"type\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"mac\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"architecture\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            }\n+          }\n+        },\n+        \"message\": {\n+          \"type\": \"text\"\n+        }\n+      }\n+    }\n+  },\n+  \"_meta\": {\n+    \"description\": \"default mappings for the logs index template installed by x-pack\"\n+  },\n+  \"version\": ${xpack.stack.template.version}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 151}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwOTc1ODQ2OnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/core/src/main/resources/logs-default-settings.json", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNjozMjozOVrOGe3lfg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNzowMjo0OVrOGfPbUA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAyMTE4Mg==", "bodyText": "Do we still need this? What is the default if we don't set it?", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435021182", "createdAt": "2020-06-04T06:32:39Z", "author": {"login": "ruflin"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-settings.json", "diffHunk": "@@ -0,0 +1,21 @@\n+{\n+  \"template\": {\n+    \"settings\": {\n+      \"index\": {\n+        \"lifecycle\": {\n+          \"name\": \"logs-default-policy\"\n+        },\n+        \"codec\": \"best_compression\",\n+        \"refresh_interval\": \"5s\",\n+        \"query\": {\n+          \"default_field\": [\"message\"]\n+        },\n+        \"number_of_routing_shards\": \"30\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTEyNDUyNA==", "bodyText": "Number of routing shards has been removed in the default Beats templates. We have added it set only for ES 6.x. See 6.8 docs for Split Index.", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435124524", "createdAt": "2020-06-04T09:39:50Z", "author": {"login": "urso"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-settings.json", "diffHunk": "@@ -0,0 +1,21 @@\n+{\n+  \"template\": {\n+    \"settings\": {\n+      \"index\": {\n+        \"lifecycle\": {\n+          \"name\": \"logs-default-policy\"\n+        },\n+        \"codec\": \"best_compression\",\n+        \"refresh_interval\": \"5s\",\n+        \"query\": {\n+          \"default_field\": [\"message\"]\n+        },\n+        \"number_of_routing_shards\": \"30\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAyMTE4Mg=="}, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTQxMTc5Mg==", "bodyText": "I'll remove it.", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435411792", "createdAt": "2020-06-04T17:02:49Z", "author": {"login": "dakrone"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-settings.json", "diffHunk": "@@ -0,0 +1,21 @@\n+{\n+  \"template\": {\n+    \"settings\": {\n+      \"index\": {\n+        \"lifecycle\": {\n+          \"name\": \"logs-default-policy\"\n+        },\n+        \"codec\": \"best_compression\",\n+        \"refresh_interval\": \"5s\",\n+        \"query\": {\n+          \"default_field\": [\"message\"]\n+        },\n+        \"number_of_routing_shards\": \"30\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAyMTE4Mg=="}, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwOTc1OTgwOnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/core/src/main/resources/logs-default-policy.json", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNjozMzowNlrOGe3mSQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNzowMzo1OVrOGfPeJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAyMTM4NQ==", "bodyText": "Is there a way to add metadata to the ILM policy so we also know which stack version initially loaded it?", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435021385", "createdAt": "2020-06-04T06:33:06Z", "author": {"login": "ruflin"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-policy.json", "diffHunk": "@@ -0,0 +1,13 @@\n+{\n+  \"phases\": {\n+    \"hot\": {\n+      \"min_age\": \"0ms\",\n+      \"actions\": {\n+        \"rollover\": {\n+          \"max_size\": \"50gb\",\n+          \"max_age\": \"30d\"\n+        }\n+      }\n+    }\n+  }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTQxMjUxOQ==", "bodyText": "Not currently, we could potentially add it in the future though", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435412519", "createdAt": "2020-06-04T17:03:59Z", "author": {"login": "dakrone"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-policy.json", "diffHunk": "@@ -0,0 +1,13 @@\n+{\n+  \"phases\": {\n+    \"hot\": {\n+      \"min_age\": \"0ms\",\n+      \"actions\": {\n+        \"rollover\": {\n+          \"max_size\": \"50gb\",\n+          \"max_age\": \"30d\"\n+        }\n+      }\n+    }\n+  }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAyMTM4NQ=="}, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwOTc2MzU1OnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/core/src/main/resources/logs-default-template.json", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNjozNDo0MVrOGe3omg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNzowOTo0MlrOGfPq0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAyMTk3OA==", "bodyText": "Should we set priority to 1 or 10?", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435021978", "createdAt": "2020-06-04T06:34:41Z", "author": {"login": "ruflin"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-template.json", "diffHunk": "@@ -0,0 +1,15 @@\n+{\n+  \"index_patterns\": [\"logs-*-*\"],\n+  \"priority\": 100,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTQxNTc2Mw==", "bodyText": "Definitely not 1, because we want ample space for lower-priority templates, 100 seemed reasonable and was confirmed by the core/features team as a reasonable default. I'd prefer to stick with 100", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435415763", "createdAt": "2020-06-04T17:09:42Z", "author": {"login": "dakrone"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-template.json", "diffHunk": "@@ -0,0 +1,15 @@\n+{\n+  \"index_patterns\": [\"logs-*-*\"],\n+  \"priority\": 100,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAyMTk3OA=="}, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwOTgzMDU4OnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNjo1ODo1N1rOGe4R3g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNzoxMDozNFrOGfPs5g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAzMjU0Mg==", "bodyText": "should we now use wildcard as a default type cc @jimczi @markharwood\n(we don't need to make a decision for the first version, we can change our minds later)", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435032542", "createdAt": "2020-06-04T06:58:57Z", "author": {"login": "jpountz"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "diffHunk": "@@ -0,0 +1,152 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"_meta\": {\n+      },\n+      \"dynamic_templates\": [\n+        {\n+          \"strings_as_keyword\": {\n+            \"mapping\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTExMDI2NA==", "bodyText": "what happens if a keyword field mapping is updated to a wildcard. Is this a \"compatible\" mapping change?", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435110264", "createdAt": "2020-06-04T09:16:07Z", "author": {"login": "ruflin"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "diffHunk": "@@ -0,0 +1,152 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"_meta\": {\n+      },\n+      \"dynamic_templates\": [\n+        {\n+          \"strings_as_keyword\": {\n+            \"mapping\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAzMjU0Mg=="}, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTE4NTAyMg==", "bodyText": "you can't replace it on an existing index, but these fields have exactly the same semantics", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435185022", "createdAt": "2020-06-04T11:32:09Z", "author": {"login": "jpountz"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "diffHunk": "@@ -0,0 +1,152 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"_meta\": {\n+      },\n+      \"dynamic_templates\": [\n+        {\n+          \"strings_as_keyword\": {\n+            \"mapping\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAzMjU0Mg=="}, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTQxNjI5NA==", "bodyText": "I'll collect this as a discussion topic", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435416294", "createdAt": "2020-06-04T17:10:34Z", "author": {"login": "dakrone"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "diffHunk": "@@ -0,0 +1,152 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"_meta\": {\n+      },\n+      \"dynamic_templates\": [\n+        {\n+          \"strings_as_keyword\": {\n+            \"mapping\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAzMjU0Mg=="}, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwOTg0NzYwOnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNzowNDoyMlrOGe4cCw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNzoxMTo0MFrOGfPvmg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAzNTE0Nw==", "bodyText": "@ruflin would logs-generic-mappings be more aligned with Observability in terms of naming?", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435035147", "createdAt": "2020-06-04T07:04:22Z", "author": {"login": "jpountz"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "diffHunk": "@@ -0,0 +1,152 @@\n+{", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTEwOTQxNQ==", "bodyText": "I think it should be logs-mappings and leave out generic or default as it applies to all datasets.", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435109415", "createdAt": "2020-06-04T09:14:46Z", "author": {"login": "ruflin"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "diffHunk": "@@ -0,0 +1,152 @@\n+{", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAzNTE0Nw=="}, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTQxNjk4Ng==", "bodyText": "I went with logs-default-mappings to allow a user to create their own logs-mappings that was explicitly not the default one, I also figured it would have a lower chance of existing conflict with any templates a user may have installed", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435416986", "createdAt": "2020-06-04T17:11:40Z", "author": {"login": "dakrone"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "diffHunk": "@@ -0,0 +1,152 @@\n+{", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAzNTE0Nw=="}, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1NDI4NDU1OnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/core/src/main/resources/logs-default-policy.json", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQwOToxNjoyMlrOGlm2Kw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxNDowMTozNlrOGoThkQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjA4Njk1NQ==", "bodyText": "is this min_age required? What is the effect of it?", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r442086955", "createdAt": "2020-06-18T09:16:22Z", "author": {"login": "ruflin"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-policy.json", "diffHunk": "@@ -0,0 +1,13 @@\n+{\n+  \"phases\": {\n+    \"hot\": {\n+      \"min_age\": \"0ms\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53feca5a6a186900d08ce826f616ab143793ece6"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDkxNjExMw==", "bodyText": "It's not required, and 0 is the default so this can be removed", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r444916113", "createdAt": "2020-06-24T14:01:36Z", "author": {"login": "dakrone"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-policy.json", "diffHunk": "@@ -0,0 +1,13 @@\n+{\n+  \"phases\": {\n+    \"hot\": {\n+      \"min_age\": \"0ms\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjA4Njk1NQ=="}, "originalCommit": {"oid": "53feca5a6a186900d08ce826f616ab143793ece6"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2ODM0MzQ3OnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/core/src/main/resources/metrics-default-mappings.json", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxNTowMDowNlrOGnteyw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxODo1Nzo0NFrOGofEtA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDI5MjgxMQ==", "bodyText": "@exekias @roncohen I was wondering if we should add anything related to detecting numbers to our default template?", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r444292811", "createdAt": "2020-06-23T15:00:06Z", "author": {"login": "ruflin"}, "path": "x-pack/plugin/core/src/main/resources/metrics-default-mappings.json", "diffHunk": "@@ -0,0 +1,57 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"dynamic_templates\": [\n+        {\n+          \"strings_as_keyword\": {\n+            \"mapping\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"match_mapping_type\": \"string\"\n+          }\n+        }\n+      ],\n+      \"date_detection\": false,\n+      \"properties\": {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53feca5a6a186900d08ce826f616ab143793ece6"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDkwMTY2MA==", "bodyText": "uhm good question, it's my understating that beats already send metrics correctly encoded as numbers in the JSON request. That would make Elasticsearch use float and integer. Probably this is fine as a default, WDYT?", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r444901660", "createdAt": "2020-06-24T13:41:19Z", "author": {"login": "exekias"}, "path": "x-pack/plugin/core/src/main/resources/metrics-default-mappings.json", "diffHunk": "@@ -0,0 +1,57 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"dynamic_templates\": [\n+        {\n+          \"strings_as_keyword\": {\n+            \"mapping\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"match_mapping_type\": \"string\"\n+          }\n+        }\n+      ],\n+      \"date_detection\": false,\n+      \"properties\": {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDI5MjgxMQ=="}, "originalCommit": {"oid": "53feca5a6a186900d08ce826f616ab143793ece6"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDkwNTM5Mw==", "bodyText": "Beats is sending 1.0 if we set it as float instead of 1? I must confess, I don't remember. But if that is the case, ++ on having even number detection on.\n@dakrone What are all the option we have here?", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r444905393", "createdAt": "2020-06-24T13:46:32Z", "author": {"login": "ruflin"}, "path": "x-pack/plugin/core/src/main/resources/metrics-default-mappings.json", "diffHunk": "@@ -0,0 +1,57 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"dynamic_templates\": [\n+        {\n+          \"strings_as_keyword\": {\n+            \"mapping\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"match_mapping_type\": \"string\"\n+          }\n+        }\n+      ],\n+      \"date_detection\": false,\n+      \"properties\": {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDI5MjgxMQ=="}, "originalCommit": {"oid": "53feca5a6a186900d08ce826f616ab143793ece6"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDkxODE3Mg==", "bodyText": "@ruflin all numeric_detection does is to make strings that are numbers (ie \"1.3\" instead of 1.3) be numbers rather than strings. If beats is already sending data in the correct format (numbers instead of strings), I don't think it would buy us anything other than requiring the string to be read on every new field introduced.", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r444918172", "createdAt": "2020-06-24T14:04:32Z", "author": {"login": "dakrone"}, "path": "x-pack/plugin/core/src/main/resources/metrics-default-mappings.json", "diffHunk": "@@ -0,0 +1,57 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"dynamic_templates\": [\n+        {\n+          \"strings_as_keyword\": {\n+            \"mapping\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"match_mapping_type\": \"string\"\n+          }\n+        }\n+      ],\n+      \"date_detection\": false,\n+      \"properties\": {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDI5MjgxMQ=="}, "originalCommit": {"oid": "53feca5a6a186900d08ce826f616ab143793ece6"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTEwNTMzMg==", "bodyText": "++, sounds like we can ignore it then for now.", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r445105332", "createdAt": "2020-06-24T18:57:44Z", "author": {"login": "ruflin"}, "path": "x-pack/plugin/core/src/main/resources/metrics-default-mappings.json", "diffHunk": "@@ -0,0 +1,57 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"dynamic_templates\": [\n+        {\n+          \"strings_as_keyword\": {\n+            \"mapping\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"match_mapping_type\": \"string\"\n+          }\n+        }\n+      ],\n+      \"date_detection\": false,\n+      \"properties\": {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDI5MjgxMQ=="}, "originalCommit": {"oid": "53feca5a6a186900d08ce826f616ab143793ece6"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc4OTM1NTI1OnYy", "diffSide": "RIGHT", "path": "client/rest-high-level/src/main/java/org/elasticsearch/client/indices/PutComponentTemplateRequest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwOToyODowNVrOGqz8wA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQxNDowOTo0NlrOGq-Oaw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzU0NDUxMg==", "bodyText": "is this used anywhere?", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r447544512", "createdAt": "2020-06-30T09:28:05Z", "author": {"login": "andreidan"}, "path": "client/rest-high-level/src/main/java/org/elasticsearch/client/indices/PutComponentTemplateRequest.java", "diffHunk": "@@ -78,6 +78,10 @@ public PutComponentTemplateRequest componentTemplate(ComponentTemplate component\n         return this;\n     }\n \n+    public ComponentTemplate componentTemplate() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d3c884406e2e71ebe1fbd33dd3bec49980ea97b5"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzcxMjg3NQ==", "bodyText": "I think this is a leftover, I'll remove it", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r447712875", "createdAt": "2020-06-30T14:09:46Z", "author": {"login": "dakrone"}, "path": "client/rest-high-level/src/main/java/org/elasticsearch/client/indices/PutComponentTemplateRequest.java", "diffHunk": "@@ -78,6 +78,10 @@ public PutComponentTemplateRequest componentTemplate(ComponentTemplate component\n         return this;\n     }\n \n+    public ComponentTemplate componentTemplate() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzU0NDUxMg=="}, "originalCommit": {"oid": "d3c884406e2e71ebe1fbd33dd3bec49980ea97b5"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc4OTM1ODM2OnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/stack/build.gradle", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwOToyODo1N1rOGqz-xA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQxNDoxMjo0MVrOGq-Xag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzU0NTAyOA==", "bodyText": "do we need to enable this before merging?", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r447545028", "createdAt": "2020-06-30T09:28:57Z", "author": {"login": "andreidan"}, "path": "x-pack/plugin/stack/build.gradle", "diffHunk": "@@ -0,0 +1,29 @@\n+evaluationDependsOn(xpackModule('core'))\n+\n+apply plugin: 'elasticsearch.esplugin'\n+\n+esplugin {\n+  name 'x-pack-stack'\n+  description 'Elasticsearch Expanded Pack Plugin - Stack'\n+  classname 'org.elasticsearch.xpack.stack.StackPlugin'\n+  extendedPlugins = ['x-pack-core']\n+  hasNativeController false\n+  requiresKeystore true\n+}\n+archivesBaseName = 'x-pack-stack'\n+\n+dependencies {\n+  compileOnly project(path: xpackModule('core'), configuration: 'default')\n+  testImplementation project(path: xpackModule('core'), configuration: 'testArtifacts')\n+}\n+\n+// add all sub-projects of the qa sub-project\n+// gradle.projectsEvaluated {\n+//   project.subprojects\n+//     .find { it.path == project.path + \":qa\" }\n+//     .subprojects\n+//     .findAll { it.path.startsWith(project.path + \":qa\") }\n+//     .each { check.dependsOn it.check }\n+// }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d3c884406e2e71ebe1fbd33dd3bec49980ea97b5"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzcxNTE3OA==", "bodyText": "Yep, I'll enable it", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r447715178", "createdAt": "2020-06-30T14:12:41Z", "author": {"login": "dakrone"}, "path": "x-pack/plugin/stack/build.gradle", "diffHunk": "@@ -0,0 +1,29 @@\n+evaluationDependsOn(xpackModule('core'))\n+\n+apply plugin: 'elasticsearch.esplugin'\n+\n+esplugin {\n+  name 'x-pack-stack'\n+  description 'Elasticsearch Expanded Pack Plugin - Stack'\n+  classname 'org.elasticsearch.xpack.stack.StackPlugin'\n+  extendedPlugins = ['x-pack-core']\n+  hasNativeController false\n+  requiresKeystore true\n+}\n+archivesBaseName = 'x-pack-stack'\n+\n+dependencies {\n+  compileOnly project(path: xpackModule('core'), configuration: 'default')\n+  testImplementation project(path: xpackModule('core'), configuration: 'testArtifacts')\n+}\n+\n+// add all sub-projects of the qa sub-project\n+// gradle.projectsEvaluated {\n+//   project.subprojects\n+//     .find { it.path == project.path + \":qa\" }\n+//     .subprojects\n+//     .findAll { it.path.startsWith(project.path + \":qa\") }\n+//     .each { check.dependsOn it.check }\n+// }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzU0NTAyOA=="}, "originalCommit": {"oid": "d3c884406e2e71ebe1fbd33dd3bec49980ea97b5"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc4OTM3MDQ2OnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/stack/qa/rest/src/test/resources/rest-api-spec/test/stack/10_basic.yml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwOTozMjowMFrOGq0GPQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQxNDoxMzozOFrOGq-aMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzU0Njk0MQ==", "bodyText": "will these fail when missing? Should we match the status code?", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r447546941", "createdAt": "2020-06-30T09:32:00Z", "author": {"login": "andreidan"}, "path": "x-pack/plugin/stack/qa/rest/src/test/resources/rest-api-spec/test/stack/10_basic.yml", "diffHunk": "@@ -0,0 +1,105 @@\n+---\n+setup:\n+  - do:\n+      cluster.health:\n+        wait_for_status: yellow\n+\n+---\n+\"Test stack template installation\":\n+  - do:\n+      ilm.get_lifecycle:\n+        policy: \"logs\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d3c884406e2e71ebe1fbd33dd3bec49980ea97b5"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzcxNTg4OQ==", "bodyText": "Yeah, these definitely fail when the policy/template/etc is missing", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r447715889", "createdAt": "2020-06-30T14:13:38Z", "author": {"login": "dakrone"}, "path": "x-pack/plugin/stack/qa/rest/src/test/resources/rest-api-spec/test/stack/10_basic.yml", "diffHunk": "@@ -0,0 +1,105 @@\n+---\n+setup:\n+  - do:\n+      cluster.health:\n+        wait_for_status: yellow\n+\n+---\n+\"Test stack template installation\":\n+  - do:\n+      ilm.get_lifecycle:\n+        policy: \"logs\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzU0Njk0MQ=="}, "originalCommit": {"oid": "d3c884406e2e71ebe1fbd33dd3bec49980ea97b5"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5OTg0NzQ3OnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/core/src/main/resources/logs-template.json", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxODozNjozNFrOGsZF9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwNzoyNjowMVrOGsme8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTIwMTY1Mw==", "bodyText": "@dakrone Why is this set to 100? Shouldn't we set it to 1? @jonathan-buttner FYI", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r449201653", "createdAt": "2020-07-02T18:36:34Z", "author": {"login": "ruflin"}, "path": "x-pack/plugin/core/src/main/resources/logs-template.json", "diffHunk": "@@ -0,0 +1,16 @@\n+{\n+  \"index_patterns\": [\"logs-*-*\"],\n+  \"priority\": 100,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "36285abb957bf18848d7efb07257d4c110a73c10"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTIyNTE4Ng==", "bodyText": "@ruflin hah, you already asked that in #57629 (comment) :) We need space in order for templates to be allowed at a lower priority than these built-in ones (for example, someone installing a template for * at priority 10)", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r449225186", "createdAt": "2020-07-02T19:28:10Z", "author": {"login": "dakrone"}, "path": "x-pack/plugin/core/src/main/resources/logs-template.json", "diffHunk": "@@ -0,0 +1,16 @@\n+{\n+  \"index_patterns\": [\"logs-*-*\"],\n+  \"priority\": 100,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTIwMTY1Mw=="}, "originalCommit": {"oid": "36285abb957bf18848d7efb07257d4c110a73c10"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTQyMTA0MA==", "bodyText": "\ud83e\udd26", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r449421040", "createdAt": "2020-07-03T07:26:01Z", "author": {"login": "ruflin"}, "path": "x-pack/plugin/core/src/main/resources/logs-template.json", "diffHunk": "@@ -0,0 +1,16 @@\n+{\n+  \"index_patterns\": [\"logs-*-*\"],\n+  \"priority\": 100,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTIwMTY1Mw=="}, "originalCommit": {"oid": "36285abb957bf18848d7efb07257d4c110a73c10"}, "originalPosition": 3}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3668, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}