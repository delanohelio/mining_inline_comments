{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA2OTE4MDE4", "number": 55558, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQyMTo0Mjo1M1rOD0c1Ug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxNjo0MTo1N1rOD3tfmQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2MzI0OTQ2OnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/elasticsearch/cluster/metadata/MetadataCreateIndexService.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQyMTo0Mjo1M1rOGJZvAA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQyMTo0Mjo1M1rOGJZvAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjUxMjAwMA==", "bodyText": "minor wording change:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                    \"[{}], it won't be supported with index templates v2\", request.index(),\n          \n          \n            \n                                    \"[{}], and won't be supported with v2 index templates\", request.index(),", "url": "https://github.com/elastic/elasticsearch/pull/55558#discussion_r412512000", "createdAt": "2020-04-21T21:42:53Z", "author": {"login": "dakrone"}, "path": "server/src/main/java/org/elasticsearch/cluster/metadata/MetadataCreateIndexService.java", "diffHunk": "@@ -345,6 +345,12 @@ public ClusterState applyCreateIndexRequest(ClusterState currentState, CreateInd\n                 final List<IndexTemplateMetadata> v1Templates = MetadataIndexTemplateService.findV1Templates(currentState.metadata(),\n                     request.index(), isHiddenFromRequest);\n \n+                if (v1Templates.size() > 1) {\n+                    deprecationLogger.deprecatedAndMaybeLog(\"index_template_multiple_match\", \"index [{}] matches multiple templates \" +\n+                        \"[{}], it won't be supported with index templates v2\", request.index(),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28ec7708b4bf9b4e10dcaa13d2bf1513d411eb03"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5NzQzNjQxOnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/elasticsearch/cluster/metadata/MetadataCreateIndexService.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxNjo0MTo1N1rOGOHktg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxOTo0NjowOVrOGOOUyA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzQ1NzMzNA==", "bodyText": "I think this is a little confusing about what will not be supported and what is not going to be supported going forward, maybe it should be something like:\n\"index [foo] matches multiple v1 templates [t1, t2], v2 index templates will only match a single index template\"\nWhat do you think?", "url": "https://github.com/elastic/elasticsearch/pull/55558#discussion_r417457334", "createdAt": "2020-04-29T16:41:57Z", "author": {"login": "dakrone"}, "path": "server/src/main/java/org/elasticsearch/cluster/metadata/MetadataCreateIndexService.java", "diffHunk": "@@ -345,6 +345,12 @@ public ClusterState applyCreateIndexRequest(ClusterState currentState, CreateInd\n                 final List<IndexTemplateMetadata> v1Templates = MetadataIndexTemplateService.findV1Templates(currentState.metadata(),\n                     request.index(), isHiddenFromRequest);\n \n+                if (v1Templates.size() > 1) {\n+                    deprecationLogger.deprecatedAndMaybeLog(\"index_template_multiple_match\", \"index [{}] matches multiple templates \" +\n+                        \"[{}], and won't be supported with v2 index templates\", request.index(),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c0379259300e5cec625342ef7be905d5ee5970e"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU2Nzk0NA==", "bodyText": "This is good idea, I've changed it", "url": "https://github.com/elastic/elasticsearch/pull/55558#discussion_r417567944", "createdAt": "2020-04-29T19:46:09Z", "author": {"login": "probakowski"}, "path": "server/src/main/java/org/elasticsearch/cluster/metadata/MetadataCreateIndexService.java", "diffHunk": "@@ -345,6 +345,12 @@ public ClusterState applyCreateIndexRequest(ClusterState currentState, CreateInd\n                 final List<IndexTemplateMetadata> v1Templates = MetadataIndexTemplateService.findV1Templates(currentState.metadata(),\n                     request.index(), isHiddenFromRequest);\n \n+                if (v1Templates.size() > 1) {\n+                    deprecationLogger.deprecatedAndMaybeLog(\"index_template_multiple_match\", \"index [{}] matches multiple templates \" +\n+                        \"[{}], and won't be supported with v2 index templates\", request.index(),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzQ1NzMzNA=="}, "originalCommit": {"oid": "5c0379259300e5cec625342ef7be905d5ee5970e"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2791, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}