{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUzMzY5NDky", "number": 59854, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxOTowNTo0M1rOEQVV_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxOTowNTo0M1rOEQVV_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1NTYyMzY2OnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/security/authz/store/ReservedRolesStore.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxOTowNTo0M1rOG0be3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxOToyMTo1NFrOG0cAtA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzYyOTQwNQ==", "bodyText": "Clarifying question since I'm not familiar with \"reserved\" privileges: I couldn't find reserved_ml_apm_user in elastic/kibana#72266 but I did find ml_apm_user. Is reserved_  an implied prefix somehow?", "url": "https://github.com/elastic/elasticsearch/pull/59854#discussion_r457629405", "createdAt": "2020-07-20T19:05:43Z", "author": {"login": "sqren"}, "path": "x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/security/authz/store/ReservedRolesStore.java", "diffHunk": "@@ -183,7 +183,10 @@\n                             .privileges(\"read\", \"view_index_metadata\").build(),\n                         RoleDescriptor.IndicesPrivileges.builder().indices(\"observability-annotations\")\n                             .privileges(\"read\", \"view_index_metadata\").build()\n-                    }, null, MetadataUtils.DEFAULT_RESERVED_METADATA))\n+                    }, new RoleDescriptor.ApplicationResourcePrivileges[] {\n+                            RoleDescriptor.ApplicationResourcePrivileges.builder()\n+                                .application(\"kibana-*\").resources(\"*\").privileges(\"reserved_ml_apm_user\").build()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "58cac9d7de24aed90c0b171e3c13dfd1d2e3992d"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzYzODA2OA==", "bodyText": "Good question. Yes, the reserved_ prefix is generated by Kibana's security plugin when it \"serializes\" our privilege model into Elasticsearch's Application Privilege model:\nhttps://github.com/elastic/kibana/blob/bf04235dae35452061cc7ea3d86d96c19a58206c/x-pack/plugins/security/server/authorization/privilege_serializer.ts#L61", "url": "https://github.com/elastic/elasticsearch/pull/59854#discussion_r457638068", "createdAt": "2020-07-20T19:21:54Z", "author": {"login": "legrego"}, "path": "x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/security/authz/store/ReservedRolesStore.java", "diffHunk": "@@ -183,7 +183,10 @@\n                             .privileges(\"read\", \"view_index_metadata\").build(),\n                         RoleDescriptor.IndicesPrivileges.builder().indices(\"observability-annotations\")\n                             .privileges(\"read\", \"view_index_metadata\").build()\n-                    }, null, MetadataUtils.DEFAULT_RESERVED_METADATA))\n+                    }, new RoleDescriptor.ApplicationResourcePrivileges[] {\n+                            RoleDescriptor.ApplicationResourcePrivileges.builder()\n+                                .application(\"kibana-*\").resources(\"*\").privileges(\"reserved_ml_apm_user\").build()", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzYyOTQwNQ=="}, "originalCommit": {"oid": "58cac9d7de24aed90c0b171e3c13dfd1d2e3992d"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2227, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}