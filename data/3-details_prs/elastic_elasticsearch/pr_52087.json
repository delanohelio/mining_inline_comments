{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcyNjQzMzY5", "number": 52087, "title": "Check dot-index rules after template application", "bodyText": "Previously, the dot-index rules (namely, that indices with dot-prefixed\nnames should be either hidden indices or system indices) was done\nbefore* template application, and so only checked for the index.hidden\nsetting in the request, ignoring if that setting was set via a template.\nThis commit moves that check to a different method, which is applied\nafter templates have been resolved and applied to the index settings.\nI discovered this while working on #51456 - I noticed that I hadn't removed the .slm-history* entry from the exclusions list without triggering the assert intended to ensure that the exclusions list was updated as necessary.", "createdAt": "2020-02-07T23:27:44Z", "url": "https://github.com/elastic/elasticsearch/pull/52087", "merged": true, "mergeCommit": {"oid": "4dd50f5c9d4466cc3ba08bd47bd5e81ece88bc01"}, "closed": true, "closedAt": "2020-02-10T22:46:59Z", "author": {"login": "gwbrown"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcCHxoygH2gAyMzcyNjQzMzY5Ojc4N2UwMGMyZmU1YjJiN2FmNTM5NjIxMDZhOWFkZjFhZWFhMTMwZjk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcDER_2AH2gAyMzcyNjQzMzY5OmQ0NjI3NDFlNTcxMDllMzY0ZmU2Y2I3ZTQ3MWZlNWNmMTIxYjk3Mzg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "787e00c2fe5b2b7af53962106a9adf1aeaa130f9", "author": {"user": {"login": "gwbrown", "name": "Gordon Brown"}}, "url": "https://github.com/elastic/elasticsearch/commit/787e00c2fe5b2b7af53962106a9adf1aeaa130f9", "committedDate": "2020-02-07T23:17:29Z", "message": "Check dot-index rules after template application\n\nPreviously, the dot-index rules (namely, that indices with dot-prefixed\nnames should be either hidden indices or system indices) was done\nbefore* template application, and so only checked for the `index.hidden`\nsetting in the request, ignoring if that setting was set via a template.\n\nThis commit moves that check to a different method, which is applied\nafter templates have been resolved and applied to the index settings."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3c6610a4866fcd373bd84d49f9fe75c47064a9d9", "author": {"user": {"login": "gwbrown", "name": "Gordon Brown"}}, "url": "https://github.com/elastic/elasticsearch/commit/3c6610a4866fcd373bd84d49f9fe75c47064a9d9", "committedDate": "2020-02-07T23:30:08Z", "message": "Correct test name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "badfbb3340c7c6ecb82b75a72b6abb5d6bf200d4", "author": {"user": {"login": "gwbrown", "name": "Gordon Brown"}}, "url": "https://github.com/elastic/elasticsearch/commit/badfbb3340c7c6ecb82b75a72b6abb5d6bf200d4", "committedDate": "2020-02-10T21:20:41Z", "message": "Line length"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2MjcxNzQ2", "url": "https://github.com/elastic/elasticsearch/pull/52087#pullrequestreview-356271746", "createdAt": "2020-02-10T21:21:02Z", "commit": {"oid": "3c6610a4866fcd373bd84d49f9fe75c47064a9d9"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQyMToyMTowM1rOFn1-PQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQyMToyMTowM1rOFn1-PQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzMyMzA2OQ==", "bodyText": "no longer needed?", "url": "https://github.com/elastic/elasticsearch/pull/52087#discussion_r377323069", "createdAt": "2020-02-10T21:21:03Z", "author": {"login": "rjernst"}, "path": "server/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java", "diffHunk": "@@ -705,7 +719,7 @@ private static IndexService validateActiveShardCountAndCreateIndexService(String\n \n     private void validate(CreateIndexClusterStateUpdateRequest request, ClusterState state) {\n         boolean isHidden = IndexMetaData.INDEX_HIDDEN_SETTING.get(request.settings());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3c6610a4866fcd373bd84d49f9fe75c47064a9d9"}, "originalPosition": 76}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bf6226bac54f0ae17924bde5f89b6c22c6f5f30e", "author": {"user": {"login": "gwbrown", "name": "Gordon Brown"}}, "url": "https://github.com/elastic/elasticsearch/commit/bf6226bac54f0ae17924bde5f89b6c22c6f5f30e", "committedDate": "2020-02-10T21:27:47Z", "message": "Remove unnecessary line per review"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d462741e57109e364fe6cb7e471fe5cf121b9738", "author": {"user": {"login": "gwbrown", "name": "Gordon Brown"}}, "url": "https://github.com/elastic/elasticsearch/commit/d462741e57109e364fe6cb7e471fe5cf121b9738", "committedDate": "2020-02-10T21:47:08Z", "message": "Merge branch 'master' into hidden/fix-dot-index-validation"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2702, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}