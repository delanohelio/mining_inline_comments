{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgyMDQ1MTE3", "number": 62096, "title": "[ML] adding feature_name and node size validation for tree models", "bodyText": "When a tree model is provided, it is possible that it is a stump.\nMeaning, it only has one node with no splits\nThis implies that the tree has no features. In this case,\nhaving zero feature_names is appropriate. In any other case,\nthis should be considered a validation failure.\nThis commit adds the validation if there is more than 1 node,\nthat the feature_names in the model are non-empty.\ncloses #60759", "createdAt": "2020-09-08T13:30:47Z", "url": "https://github.com/elastic/elasticsearch/pull/62096", "merged": true, "mergeCommit": {"oid": "191842e1597baee015e50fdf1c4cc85db5537056"}, "closed": true, "closedAt": "2020-09-09T12:04:39Z", "author": {"login": "benwtrent"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdG3o0ugH2gAyNDgyMDQ1MTE3OmRlNmZmY2FiOWE4MjI1MjQ0ODQxZmE2YmU2M2QxZjdjYmVhY2FhMGQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdG7n48gH2gAyNDgyMDQ1MTE3OmI0MGFiN2ZkMmRlOWIwOWU0ODNkNDZiNDA1YzI0ZGI1ZjgwZWU5Y2E=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "de6ffcab9a8225244841fa6be63d1f7cbeacaa0d", "author": {"user": {"login": "benwtrent", "name": "Benjamin Trent"}}, "url": "https://github.com/elastic/elasticsearch/commit/de6ffcab9a8225244841fa6be63d1f7cbeacaa0d", "committedDate": "2020-09-08T13:30:09Z", "message": "[ML] adding feature_name and node size validation for tree models\n\nWhen a tree model is provided, it is possible that it is a stump.\nMeaning, it only has one node with no splits\nThis implies that the tree has no features. In this case,\nhaving zero feature_names is appropriate. In any other case,\nthis should be considered a validation failure.\n\nThis commit adds the validation if there is more than 1 node,\nthat the feature_names in the model are non-empty."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0MzE5NzM0", "url": "https://github.com/elastic/elasticsearch/pull/62096#pullrequestreview-484319734", "createdAt": "2020-09-08T16:44:40Z", "commit": {"oid": "de6ffcab9a8225244841fa6be63d1f7cbeacaa0d"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNjo0NDo0MFrOHOlpCQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNjo0NDo0MFrOHOlpCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTA1ODgyNQ==", "bodyText": "Should we make this debug message take a runnable? I think it's called for each doc so it might be worth avoiding running all this if logging is not debug.", "url": "https://github.com/elastic/elasticsearch/pull/62096#discussion_r485058825", "createdAt": "2020-09-08T16:44:40Z", "author": {"login": "dimitris-athanasiou"}, "path": "x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/inference/trainedmodel/inference/EnsembleInferenceModel.java", "diffHunk": "@@ -142,9 +132,7 @@ private InferenceResults innerInfer(double[] features, InferenceConfig config, M\n         if (preparedForInference == false) {\n             throw ExceptionsHelper.serverError(\"model is not prepared for inference\");\n         }\n-        LOGGER.debug(\"Inference called with feature names [{}]\",\n-            featureNames == null ? \"<null>\" : Strings.arrayToCommaDelimitedString(featureNames));\n-        assert featureNames != null && featureNames.length > 0;\n+        LOGGER.debug(\"Inference called with feature names [{}]\", Strings.arrayToCommaDelimitedString(featureNames));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "de6ffcab9a8225244841fa6be63d1f7cbeacaa0d"}, "originalPosition": 28}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b40ab7fd2de9b09e483d46b405c24db5f80ee9ca", "author": {"user": {"login": "benwtrent", "name": "Benjamin Trent"}}, "url": "https://github.com/elastic/elasticsearch/commit/b40ab7fd2de9b09e483d46b405c24db5f80ee9ca", "committedDate": "2020-09-08T18:08:45Z", "message": "making debug logs use message supplier interface"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4764, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}