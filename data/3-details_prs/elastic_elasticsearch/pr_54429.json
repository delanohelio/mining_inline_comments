{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk1Njk5OTQ5", "number": 54429, "title": "Fix a master->7.x serialization bug", "bodyText": "master wasn't sending auto_date_histogram's\nminimumIntervalExpression over the wire to 7.x nodes even though\neverything above 7.3 expected it. We never noticed this because we\ndidn't have any yml tests for auto_date_histogram until I added some\nin #54161.\nCloses #54396", "createdAt": "2020-03-30T14:45:19Z", "url": "https://github.com/elastic/elasticsearch/pull/54429", "merged": true, "mergeCommit": {"oid": "472dd1b3702362fb21452598eb23efa4182ac6eb"}, "closed": true, "closedAt": "2020-03-30T15:37:39Z", "author": {"login": "nik9000"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcSvjhBgH2gAyMzk1Njk5OTQ5OjU3ZGI2MTE0Y2MxYjdlMzRhZGU4ZWRmZGVlNTUzZGMzZWM4YTIwZTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcSvr0RgFqTM4MzkzMzk4Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "57db6114cc1b7e34ade8edfdee553dc3ec8a20e7", "author": {"user": {"login": "nik9000", "name": "Nik Everett"}}, "url": "https://github.com/elastic/elasticsearch/commit/57db6114cc1b7e34ade8edfdee553dc3ec8a20e7", "committedDate": "2020-03-30T14:41:03Z", "message": "Fix a master->7.x serialization bug\n\n`master` wasn't sending `auto_date_histogram`'s\n`minimumIntervalExpression` over the wire to `7.x` nodes even though\neverything above `7.3` expected it. We never noticed this because we\ndidn't have any yml tests for `auto_date_histogram` until I added some\nin #54161.\n\nCloses #54396"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzOTMwMTk3", "url": "https://github.com/elastic/elasticsearch/pull/54429#pullrequestreview-383930197", "createdAt": "2020-03-30T14:46:29Z", "commit": {"oid": "57db6114cc1b7e34ade8edfdee553dc3ec8a20e7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxNDo0NjoyOVrOF9tWbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxNDo0NjoyOVrOF9tWbw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDI1MDQ3OQ==", "bodyText": "I'm moving these below the ctor to make me feel better.", "url": "https://github.com/elastic/elasticsearch/pull/54429#discussion_r400250479", "createdAt": "2020-03-30T14:46:29Z", "author": {"login": "nik9000"}, "path": "server/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/AutoDateHistogramAggregationBuilder.java", "diffHunk": "@@ -110,20 +110,6 @@\n \n     private String minimumIntervalExpression;\n \n-    public String getMinimumIntervalExpression() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "57db6114cc1b7e34ade8edfdee553dc3ec8a20e7"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzOTMwNDQz", "url": "https://github.com/elastic/elasticsearch/pull/54429#pullrequestreview-383930443", "createdAt": "2020-03-30T14:46:45Z", "commit": {"oid": "57db6114cc1b7e34ade8edfdee553dc3ec8a20e7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxNDo0Njo0NVrOF9tXTg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxNDo0Njo0NVrOF9tXTg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDI1MDcwMg==", "bodyText": "I'm moving this up under the reading ctor so it is easier to compare.", "url": "https://github.com/elastic/elasticsearch/pull/54429#discussion_r400250702", "createdAt": "2020-03-30T14:46:45Z", "author": {"login": "nik9000"}, "path": "server/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/AutoDateHistogramAggregationBuilder.java", "diffHunk": "@@ -138,6 +124,14 @@ public AutoDateHistogramAggregationBuilder(StreamInput in) throws IOException {\n         }\n     }\n \n+    @Override", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "57db6114cc1b7e34ade8edfdee553dc3ec8a20e7"}, "originalPosition": 25}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "88b645ffea5cbd69f247d3f40eec42ad655c8e51", "author": {"user": {"login": "nik9000", "name": "Nik Everett"}}, "url": "https://github.com/elastic/elasticsearch/commit/88b645ffea5cbd69f247d3f40eec42ad655c8e51", "committedDate": "2020-03-30T14:47:04Z", "message": "Actually fix bug"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzOTMyMDgw", "url": "https://github.com/elastic/elasticsearch/pull/54429#pullrequestreview-383932080", "createdAt": "2020-03-30T14:48:20Z", "commit": {"oid": "88b645ffea5cbd69f247d3f40eec42ad655c8e51"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxNDo0ODoyMFrOF9tcFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxNDo0ODoyMFrOF9tcFQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDI1MTkyNQ==", "bodyText": "Changing this from 8_0_0 to 7_3_0 is the actual fix.", "url": "https://github.com/elastic/elasticsearch/pull/54429#discussion_r400251925", "createdAt": "2020-03-30T14:48:20Z", "author": {"login": "nik9000"}, "path": "server/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/AutoDateHistogramAggregationBuilder.java", "diffHunk": "@@ -138,6 +124,14 @@ public AutoDateHistogramAggregationBuilder(StreamInput in) throws IOException {\n         }\n     }\n \n+    @Override\n+    protected void innerWriteTo(StreamOutput out) throws IOException {\n+        out.writeVInt(numBuckets);\n+        if (out.getVersion().onOrAfter(Version.V_7_3_0)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "88b645ffea5cbd69f247d3f40eec42ad655c8e51"}, "originalPosition": 28}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzOTMzOTg2", "url": "https://github.com/elastic/elasticsearch/pull/54429#pullrequestreview-383933986", "createdAt": "2020-03-30T14:50:07Z", "commit": {"oid": "88b645ffea5cbd69f247d3f40eec42ad655c8e51"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1515, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}