{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQwNzkwMjAz", "number": 58623, "title": "Respect null_value parameter in the fields retrieval API.", "bodyText": "This PR adds a version of XContentMapValues.extractValue that accepts a\ndefault value to return in place of 'null'. It then uses this method when\nlooking up source values to return the configured null_value instead of\n'null' when retrieving fields.", "createdAt": "2020-06-26T21:16:39Z", "url": "https://github.com/elastic/elasticsearch/pull/58623", "merged": true, "mergeCommit": {"oid": "9ec6aa2cc138a27c065bd1e314c01a42b9333e5f"}, "closed": true, "closedAt": "2020-06-30T20:39:05Z", "author": {"login": "jtibshirani"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcwLaZTABqjM0OTUyNTgxNTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcwa2cpgFqTQ0MDMyMTcwMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4b053fdf303c91bcb784409c192f5b0068bf9558", "author": {"user": {"login": "jtibshirani", "name": "Julie Tibshirani"}}, "url": "https://github.com/elastic/elasticsearch/commit/4b053fdf303c91bcb784409c192f5b0068bf9558", "committedDate": "2020-06-26T21:12:30Z", "message": "Return null_value when the source contains a 'null' for the field."}, "afterCommit": {"oid": "eeeb7cfba107caa604f2066bfbf82ca86d5641f9", "author": {"user": {"login": "jtibshirani", "name": "Julie Tibshirani"}}, "url": "https://github.com/elastic/elasticsearch/commit/eeeb7cfba107caa604f2066bfbf82ca86d5641f9", "committedDate": "2020-06-30T01:31:53Z", "message": "Return null_value when the source contains a 'null' for the field."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "73d4e6b972c3529ff73bd5fff29d62109ca722a5", "author": {"user": {"login": "jtibshirani", "name": "Julie Tibshirani"}}, "url": "https://github.com/elastic/elasticsearch/commit/73d4e6b972c3529ff73bd5fff29d62109ca722a5", "committedDate": "2020-06-30T01:35:22Z", "message": "Return null_value when the source contains a 'null' for the field."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "eeeb7cfba107caa604f2066bfbf82ca86d5641f9", "author": {"user": {"login": "jtibshirani", "name": "Julie Tibshirani"}}, "url": "https://github.com/elastic/elasticsearch/commit/eeeb7cfba107caa604f2066bfbf82ca86d5641f9", "committedDate": "2020-06-30T01:31:53Z", "message": "Return null_value when the source contains a 'null' for the field."}, "afterCommit": {"oid": "73d4e6b972c3529ff73bd5fff29d62109ca722a5", "author": {"user": {"login": "jtibshirani", "name": "Julie Tibshirani"}}, "url": "https://github.com/elastic/elasticsearch/commit/73d4e6b972c3529ff73bd5fff29d62109ca722a5", "committedDate": "2020-06-30T01:35:22Z", "message": "Return null_value when the source contains a 'null' for the field."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwMzIxNzAz", "url": "https://github.com/elastic/elasticsearch/pull/58623#pullrequestreview-440321703", "createdAt": "2020-06-30T19:29:01Z", "commit": {"oid": "73d4e6b972c3529ff73bd5fff29d62109ca722a5"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQxOToyOTowMVrOGrLYHw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQxOToyOTo0NVrOGrLZtw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzkyODM1MQ==", "bodyText": "\ud83d\udc4d", "url": "https://github.com/elastic/elasticsearch/pull/58623#discussion_r447928351", "createdAt": "2020-06-30T19:29:01Z", "author": {"login": "nik9000"}, "path": "server/src/main/java/org/elasticsearch/common/xcontent/support/XContentMapValues.java", "diffHunk": "@@ -105,19 +115,51 @@ public static Object extractValue(Map<?, ?> map, String... pathElements) {\n         if (pathElements.length == 0) {\n             return null;\n         }\n-        return extractValue(pathElements, 0, map);\n+        return XContentMapValues.extractValue(pathElements, 0, map, null);\n     }\n \n-    @SuppressWarnings({\"unchecked\"})", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "73d4e6b972c3529ff73bd5fff29d62109ca722a5"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzkyODc1OQ==", "bodyText": "How bad would it be to make this abstract so implemeneters need to think about it?", "url": "https://github.com/elastic/elasticsearch/pull/58623#discussion_r447928759", "createdAt": "2020-06-30T19:29:45Z", "author": {"login": "nik9000"}, "path": "server/src/main/java/org/elasticsearch/index/mapper/FieldMapper.java", "diffHunk": "@@ -223,6 +223,13 @@ public CopyTo copyTo() {\n         return copyTo;\n     }\n \n+    /**\n+     * A value to use in place of a {@code null} value in the document source.\n+     */\n+    protected Object nullValue() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "73d4e6b972c3529ff73bd5fff29d62109ca722a5"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2680, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}