{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgzMjkyOTAz", "number": 62198, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxNTowMzozNFrOEmIS8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxNjowNTowM1rOEmKLcg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA4NDE3MjY1OnYy", "diffSide": "RIGHT", "path": "docs/reference/cat/indices.asciidoc", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxNTowMzozNFrOHV-r4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxNjowNTozNlrOHWBsBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjgwOTE4Nw==", "bodyText": "This creates two entries for the local parameter, one pulled from the common-parms file and this one. I'll solicit some input from our documentation writers on how best to handle this.", "url": "https://github.com/elastic/elasticsearch/pull/62198#discussion_r492809187", "createdAt": "2020-09-22T15:03:34Z", "author": {"login": "danhermann"}, "path": "docs/reference/cat/indices.asciidoc", "diffHunk": "@@ -75,6 +75,14 @@ include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=help]\n include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=include-unloaded-segments]\n \n include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=local]\n++\n+--\n+`local`::\n+(Optional, boolean) If true, the request retrieves information from the local node\n+only. Defaults to false, which means information is retrieved from the master node.\n+deprecated::[8.0,This parameter does not cause this API to act locally. It will be\n+removed in version 8.0.]\n+--", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4687421c7d7c5bd7f777f0da7eba0ad7a61665b6"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjgxNTg1NQ==", "bodyText": "@jrodewig, do you have any suggestions on how to handle this documentation case where a parameter pulled in from a common file needs to be marked as deprecated on a specific API?", "url": "https://github.com/elastic/elasticsearch/pull/62198#discussion_r492815855", "createdAt": "2020-09-22T15:11:41Z", "author": {"login": "danhermann"}, "path": "docs/reference/cat/indices.asciidoc", "diffHunk": "@@ -75,6 +75,14 @@ include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=help]\n include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=include-unloaded-segments]\n \n include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=local]\n++\n+--\n+`local`::\n+(Optional, boolean) If true, the request retrieves information from the local node\n+only. Defaults to false, which means information is retrieved from the master node.\n+deprecated::[8.0,This parameter does not cause this API to act locally. It will be\n+removed in version 8.0.]\n+--", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjgwOTE4Nw=="}, "originalCommit": {"oid": "4687421c7d7c5bd7f777f0da7eba0ad7a61665b6"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjg1ODM3Mg==", "bodyText": "I left a suggestion here: #62198 (comment)", "url": "https://github.com/elastic/elasticsearch/pull/62198#discussion_r492858372", "createdAt": "2020-09-22T16:05:36Z", "author": {"login": "jrodewig"}, "path": "docs/reference/cat/indices.asciidoc", "diffHunk": "@@ -75,6 +75,14 @@ include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=help]\n include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=include-unloaded-segments]\n \n include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=local]\n++\n+--\n+`local`::\n+(Optional, boolean) If true, the request retrieves information from the local node\n+only. Defaults to false, which means information is retrieved from the master node.\n+deprecated::[8.0,This parameter does not cause this API to act locally. It will be\n+removed in version 8.0.]\n+--", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjgwOTE4Nw=="}, "originalCommit": {"oid": "4687421c7d7c5bd7f777f0da7eba0ad7a61665b6"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA4NDE5NzYyOnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/elasticsearch/rest/action/cat/RestIndicesAction.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxNTowODoyNFrOHV-7Ww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxNTowODoyNFrOHV-7Ww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjgxMzE0Nw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                static final String LOCAL_DEPRECATED_MESSAGE = \"Deprecated parameter [local] used. This parameter does not cause this API to act \" +\n          \n          \n            \n                    \"locally, and should not be used. It will be unsupported in version 8.0.\";\n          \n          \n            \n                static final String LOCAL_DEPRECATED_MESSAGE = \"The parameter [local] is deprecated and will be removed in a future release.\";", "url": "https://github.com/elastic/elasticsearch/pull/62198#discussion_r492813147", "createdAt": "2020-09-22T15:08:24Z", "author": {"login": "danhermann"}, "path": "server/src/main/java/org/elasticsearch/rest/action/cat/RestIndicesAction.java", "diffHunk": "@@ -66,6 +67,9 @@\n import static org.elasticsearch.rest.RestRequest.Method.GET;\n \n public class RestIndicesAction extends AbstractCatAction {\n+    private static final DeprecationLogger DEPRECATION_LOGGER = DeprecationLogger.getLogger(RestIndicesAction.class);\n+    static final String LOCAL_DEPRECATED_MESSAGE = \"Deprecated parameter [local] used. This parameter does not cause this API to act \" +\n+        \"locally, and should not be used. It will be unsupported in version 8.0.\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4687421c7d7c5bd7f777f0da7eba0ad7a61665b6"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA4NDQ4MTAxOnYy", "diffSide": "RIGHT", "path": "rest-api-spec/src/main/resources/rest-api-spec/api/cat.indices.json", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxNjowNTowMlrOHWBqcA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxNjoxNDozNFrOHWCDrA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjg1Nzk2OA==", "bodyText": "Shouldn't this be the release in which we deprecate the parameter? That should be before 8.0.0.", "url": "https://github.com/elastic/elasticsearch/pull/62198#discussion_r492857968", "createdAt": "2020-09-22T16:05:02Z", "author": {"login": "jrodewig"}, "path": "rest-api-spec/src/main/resources/rest-api-spec/api/cat.indices.json", "diffHunk": "@@ -51,7 +51,11 @@\n       },\n       \"local\":{\n         \"type\":\"boolean\",\n-        \"description\":\"Return local information, do not retrieve the state from master node (default: false)\"\n+        \"description\":\"Return local information, do not retrieve the state from master node (default: false)\",\n+        \"deprecated\":{\n+          \"version\":\"8.0.0\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4687421c7d7c5bd7f777f0da7eba0ad7a61665b6"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjg2NDQyOA==", "bodyText": "We typically update the version when backporting to a release branch and then come back and update the master branch.", "url": "https://github.com/elastic/elasticsearch/pull/62198#discussion_r492864428", "createdAt": "2020-09-22T16:14:34Z", "author": {"login": "danhermann"}, "path": "rest-api-spec/src/main/resources/rest-api-spec/api/cat.indices.json", "diffHunk": "@@ -51,7 +51,11 @@\n       },\n       \"local\":{\n         \"type\":\"boolean\",\n-        \"description\":\"Return local information, do not retrieve the state from master node (default: false)\"\n+        \"description\":\"Return local information, do not retrieve the state from master node (default: false)\",\n+        \"deprecated\":{\n+          \"version\":\"8.0.0\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjg1Nzk2OA=="}, "originalCommit": {"oid": "4687421c7d7c5bd7f777f0da7eba0ad7a61665b6"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA4NDQ4MTE0OnYy", "diffSide": "RIGHT", "path": "docs/reference/cat/indices.asciidoc", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxNjowNTowM1rOHWBqgQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxNjoxNTo1NFrOHWCHKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjg1Nzk4NQ==", "bodyText": "@boicehuang @danhermann You can simply remove the include statement. Since this parameter is currently no-op, we can just expand the deprecation message. Note you'll need to update the deprecation release based on where we backport this.\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=local]\n          \n          \n            \n            +\n          \n          \n            \n            --\n          \n          \n            \n            `local`::\n          \n          \n            \n            (Optional, boolean) If true, the request retrieves information from the local node\n          \n          \n            \n            only. Defaults to false, which means information is retrieved from the master node.\n          \n          \n            \n            deprecated::[8.0,This parameter does not cause this API to act locally. It will be\n          \n          \n            \n            removed in version 8.0.]\n          \n          \n            \n            --\n          \n          \n            \n            `local`::\n          \n          \n            \n            (Optional, boolean)\n          \n          \n            \n            +\n          \n          \n            \n            deprecated::[7.10.0,\"This parameter does not affect the request. It will be removed in version 8.0.0.\"]", "url": "https://github.com/elastic/elasticsearch/pull/62198#discussion_r492857985", "createdAt": "2020-09-22T16:05:03Z", "author": {"login": "jrodewig"}, "path": "docs/reference/cat/indices.asciidoc", "diffHunk": "@@ -75,6 +75,14 @@ include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=help]\n include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=include-unloaded-segments]\n \n include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=local]\n++\n+--\n+`local`::\n+(Optional, boolean) If true, the request retrieves information from the local node\n+only. Defaults to false, which means information is retrieved from the master node.\n+deprecated::[8.0,This parameter does not cause this API to act locally. It will be\n+removed in version 8.0.]\n+--", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4687421c7d7c5bd7f777f0da7eba0ad7a61665b6"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjg2NTMyMQ==", "bodyText": "Ah, thank you, that makes sense. I see now that each include specifies a single tag from the file.", "url": "https://github.com/elastic/elasticsearch/pull/62198#discussion_r492865321", "createdAt": "2020-09-22T16:15:54Z", "author": {"login": "danhermann"}, "path": "docs/reference/cat/indices.asciidoc", "diffHunk": "@@ -75,6 +75,14 @@ include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=help]\n include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=include-unloaded-segments]\n \n include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=local]\n++\n+--\n+`local`::\n+(Optional, boolean) If true, the request retrieves information from the local node\n+only. Defaults to false, which means information is retrieved from the master node.\n+deprecated::[8.0,This parameter does not cause this API to act locally. It will be\n+removed in version 8.0.]\n+--", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjg1Nzk4NQ=="}, "originalCommit": {"oid": "4687421c7d7c5bd7f777f0da7eba0ad7a61665b6"}, "originalPosition": 11}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1604, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}