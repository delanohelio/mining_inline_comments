{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcwMjUxNzcy", "number": 51803, "title": "Increase disruption test publish timeout to 5s", "bodyText": "With the new mechanism for storing cluster state in lucene, we store\nindex metadata in multiple data paths too. This causes cluster state\npublish to timeout too frequently with a 1s timeout, so increasing it to\n5s.\nCloses #51329", "createdAt": "2020-02-03T10:53:51Z", "url": "https://github.com/elastic/elasticsearch/pull/51803", "merged": true, "mergeCommit": {"oid": "8332ad44e34171adf54f676d0e0ca57a3bd10267"}, "closed": true, "closedAt": "2020-02-03T12:57:19Z", "author": {"login": "henningandersen"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcAqol9AH2gAyMzcwMjUxNzcyOjMyYzMwYzk4OWZmNGI0MTQxYTQwYTgxZGEzNTk0YTE0NDhhNGU5Y2I=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcAriWPgFqTM1MjE5ODEzNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "32c30c989ff4b4141a40a81da3594a1448a4e9cb", "author": {"user": {"login": "henningandersen", "name": "Henning Andersen"}}, "url": "https://github.com/elastic/elasticsearch/commit/32c30c989ff4b4141a40a81da3594a1448a4e9cb", "committedDate": "2020-02-03T10:46:26Z", "message": "Increase disruption publish timeout to 5s\n\nWith the new mechanism for storing cluster state in lucene, we store\nindex metadata in multiple data paths too. This causes cluster state\npublish to timeout too frequently with a 1s timeout, so increasing it to\n5s.\n\nCloses #51329"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUyMTc3NzI0", "url": "https://github.com/elastic/elasticsearch/pull/51803#pullrequestreview-352177724", "createdAt": "2020-02-03T11:10:15Z", "commit": {"oid": "32c30c989ff4b4141a40a81da3594a1448a4e9cb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxMToxMDoxNVrOFkt2lg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxMToxMDoxNVrOFkt2lg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDA0NDMxMA==", "bodyText": "I think we should do the same for the follower check, which is also racing publication and can depend on writing out state. For full symmetry, perhaps also for leader check.", "url": "https://github.com/elastic/elasticsearch/pull/51803#discussion_r374044310", "createdAt": "2020-02-03T11:10:15Z", "author": {"login": "ywelsch"}, "path": "server/src/test/java/org/elasticsearch/discovery/AbstractDisruptionTestCase.java", "diffHunk": "@@ -128,7 +128,7 @@ protected void beforeIndexDeletion() throws Exception {\n             .put(FollowersChecker.FOLLOWER_CHECK_TIMEOUT_SETTING.getKey(), \"1s\") // for hitting simulated network failures quickly\n             .put(FollowersChecker.FOLLOWER_CHECK_RETRY_COUNT_SETTING.getKey(), 1) // for hitting simulated network failures quickly\n             .put(JoinHelper.JOIN_TIMEOUT_SETTING.getKey(), \"10s\") // still long to induce failures but to long so test won't time out\n-            .put(Coordinator.PUBLISH_TIMEOUT_SETTING.getKey(), \"1s\") // <-- for hitting simulated network failures quickly\n+            .put(Coordinator.PUBLISH_TIMEOUT_SETTING.getKey(), \"5s\") // <-- for hitting simulated network failures quickly", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "32c30c989ff4b4141a40a81da3594a1448a4e9cb"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3163f62c1587691013261b086d76ec4a9cc85e2c", "author": {"user": {"login": "henningandersen", "name": "Henning Andersen"}}, "url": "https://github.com/elastic/elasticsearch/commit/3163f62c1587691013261b086d76ec4a9cc85e2c", "committedDate": "2020-02-03T11:31:31Z", "message": "More 5s timeouts."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUyMTk4MTM3", "url": "https://github.com/elastic/elasticsearch/pull/51803#pullrequestreview-352198137", "createdAt": "2020-02-03T11:49:31Z", "commit": {"oid": "3163f62c1587691013261b086d76ec4a9cc85e2c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2963, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}