{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk3MTQ2NTE5", "number": 54601, "title": "Add delete autoscaling policy API", "bodyText": "This commit adds an API for deleting autoscaling policies.", "createdAt": "2020-04-01T17:58:50Z", "url": "https://github.com/elastic/elasticsearch/pull/54601", "merged": true, "mergeCommit": {"oid": "6d0bd255455fc0b532317dd5e7cb29180a4d5282"}, "closed": true, "closedAt": "2020-04-02T12:57:40Z", "author": {"login": "jasontedor"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcTbkLoAH2gAyMzk3MTQ2NTE5OmFkOGE3YjJlMjcxMDIyYzkyZGNkN2Y4Y2JlZDU2Y2ExMzMwMjU0ZDE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcTrMo7AH2gAyMzk3MTQ2NTE5OjdlMjYzNDc2YzFlMGMxN2M5ZDMyNGE4NDNkMDUzMmE5NDdmMjA1MmI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ad8a7b2e271022c92dcd7f8cbed56ca1330254d1", "author": {"user": {"login": "jasontedor", "name": "Jason Tedor"}}, "url": "https://github.com/elastic/elasticsearch/commit/ad8a7b2e271022c92dcd7f8cbed56ca1330254d1", "committedDate": "2020-04-01T17:57:36Z", "message": "Add delete autoscaling policy API\n\nThis commit adds an API for deleting autoscaling policies."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "875ad29daf63b4ceefeb5dd676476a9a6e090c8f", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/875ad29daf63b4ceefeb5dd676476a9a6e090c8f", "committedDate": "2020-04-01T18:09:01Z", "message": "Merge branch 'master' into delete-autoscaling-policy"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "14521b9bc3e5c6fc5083aecc5337121340217bb2", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/14521b9bc3e5c6fc5083aecc5337121340217bb2", "committedDate": "2020-04-01T19:43:36Z", "message": "Merge branch 'master' into delete-autoscaling-policy"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8a6d33d7916920067f588767fcf80e9924b5afd", "author": {"user": {"login": "jasontedor", "name": "Jason Tedor"}}, "url": "https://github.com/elastic/elasticsearch/commit/a8a6d33d7916920067f588767fcf80e9924b5afd", "committedDate": "2020-04-01T20:32:24Z", "message": "Merge branch 'master' into delete-autoscaling-policy"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dd136607a4ea61e3c0f258faa38e53dd434b9f3c", "author": {"user": {"login": "jasontedor", "name": "Jason Tedor"}}, "url": "https://github.com/elastic/elasticsearch/commit/dd136607a4ea61e3c0f258faa38e53dd434b9f3c", "committedDate": "2020-04-01T20:37:06Z", "message": "Merge branch 'master' into delete-autoscaling-policy"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "40e0c1295b0e3f912af20c78b0e617299bbbd852", "author": {"user": {"login": "jasontedor", "name": "Jason Tedor"}}, "url": "https://github.com/elastic/elasticsearch/commit/40e0c1295b0e3f912af20c78b0e617299bbbd852", "committedDate": "2020-04-01T20:42:11Z", "message": "Fix name of delete autoscaling policy cluster state task"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d32195dbc46b8bb559b60b732b4bed4496119fdb", "author": {"user": {"login": "jasontedor", "name": "Jason Tedor"}}, "url": "https://github.com/elastic/elasticsearch/commit/d32195dbc46b8bb559b60b732b4bed4496119fdb", "committedDate": "2020-04-01T20:59:55Z", "message": "Fix action name"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg2MTI0NzIy", "url": "https://github.com/elastic/elasticsearch/pull/54601#pullrequestreview-386124722", "createdAt": "2020-04-02T05:55:46Z", "commit": {"oid": "d32195dbc46b8bb559b60b732b4bed4496119fdb"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQwNTo1NTo0NlrOF_cPew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQwNTo1NTo0NlrOF_cPew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjA2NzMyMw==", "bodyText": "I think the norm for Request toXContent is to not include fields that are not part of the REST body. For Instance, PutAutoscalingPolicyAction.Request.toXContent does not include the policy name. I tend to think this toXContent should generate an empty object or maybe the request should not implement toXContentObject?", "url": "https://github.com/elastic/elasticsearch/pull/54601#discussion_r402067323", "createdAt": "2020-04-02T05:55:46Z", "author": {"login": "henningandersen"}, "path": "x-pack/plugin/autoscaling/src/main/java/org/elasticsearch/xpack/autoscaling/action/DeleteAutoscalingPolicyAction.java", "diffHunk": "@@ -0,0 +1,70 @@\n+/*\n+ * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n+ * or more contributor license agreements. Licensed under the Elastic License;\n+ * you may not use this file except in compliance with the Elastic License.\n+ */\n+\n+package org.elasticsearch.xpack.autoscaling.action;\n+\n+import org.elasticsearch.action.ActionRequestValidationException;\n+import org.elasticsearch.action.ActionType;\n+import org.elasticsearch.action.support.master.AcknowledgedRequest;\n+import org.elasticsearch.action.support.master.AcknowledgedResponse;\n+import org.elasticsearch.common.io.stream.StreamInput;\n+import org.elasticsearch.common.io.stream.StreamOutput;\n+import org.elasticsearch.common.xcontent.ToXContentObject;\n+import org.elasticsearch.common.xcontent.XContentBuilder;\n+\n+import java.io.IOException;\n+import java.util.Objects;\n+\n+public class DeleteAutoscalingPolicyAction extends ActionType<AcknowledgedResponse> {\n+\n+    public static final DeleteAutoscalingPolicyAction INSTANCE = new DeleteAutoscalingPolicyAction();\n+    public static final String NAME = \"cluster:admin/autoscaling/delete_autoscaling_policy\";\n+\n+    private DeleteAutoscalingPolicyAction() {\n+        super(NAME, AcknowledgedResponse::new);\n+    }\n+\n+    public static class Request extends AcknowledgedRequest<DeleteAutoscalingPolicyAction.Request> implements ToXContentObject {\n+\n+        private final String name;\n+\n+        public String name() {\n+            return name;\n+        }\n+\n+        public Request(final String name) {\n+            this.name = Objects.requireNonNull(name);\n+        }\n+\n+        public Request(final StreamInput in) throws IOException {\n+            super(in);\n+            name = in.readString();\n+        }\n+\n+        @Override\n+        public void writeTo(final StreamOutput out) throws IOException {\n+            super.writeTo(out);\n+            out.writeString(name);\n+        }\n+\n+        @Override\n+        public ActionRequestValidationException validate() {\n+            return null;\n+        }\n+\n+        @Override\n+        public XContentBuilder toXContent(final XContentBuilder builder, final Params params) throws IOException {\n+            builder.startObject();\n+            {\n+                builder.field(\"name\", name);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d32195dbc46b8bb559b60b732b4bed4496119fdb"}, "originalPosition": 62}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e263476c1e0c17c9d324a843d0532a947f2052b", "author": {"user": {"login": "jasontedor", "name": "Jason Tedor"}}, "url": "https://github.com/elastic/elasticsearch/commit/7e263476c1e0c17c9d324a843d0532a947f2052b", "committedDate": "2020-04-02T12:10:22Z", "message": "Fix delete autoscaling policy request toXContent"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1259, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}