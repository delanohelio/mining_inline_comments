{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkyMjg2NTQx", "number": 53962, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMTo1NDozNFrODqWGKg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMTo1NDozNFrODqWGKg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1NzI4ODEwOnYy", "diffSide": "RIGHT", "path": "plugins/repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3Service.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMTo1NDozNFrOF6CGYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMTo1NDozNFrOF6CGYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjM5NjEzMA==", "bodyText": ":(", "url": "https://github.com/elastic/elasticsearch/pull/53962#discussion_r396396130", "createdAt": "2020-03-23T11:54:34Z", "author": {"login": "tlrx"}, "path": "plugins/repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3Service.java", "diffHunk": "@@ -141,7 +141,12 @@ AmazonS3 buildClient(final S3ClientSettings clientSettings) {\n         builder.withCredentials(buildCredentials(logger, clientSettings));\n         builder.withClientConfiguration(buildConfiguration(clientSettings));\n \n-        final String endpoint = Strings.hasLength(clientSettings.endpoint) ? clientSettings.endpoint : Constants.S3_HOSTNAME;\n+        String endpoint = Strings.hasLength(clientSettings.endpoint) ? clientSettings.endpoint : Constants.S3_HOSTNAME;\n+        if ((endpoint.startsWith(\"http://\") || endpoint.startsWith(\"https://\")) == false) {\n+            // Manually add the schema to the endpoint to work around https://github.com/aws/aws-sdk-java/issues/2274\n+            // TODO: Remove this once fixed in the AWS SDK\n+            endpoint = clientSettings.protocol.toString() + \"://\" + endpoint;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6586f07e4fb0c87ab54401b6848ff7ca01a86562"}, "originalPosition": 9}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4203, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}