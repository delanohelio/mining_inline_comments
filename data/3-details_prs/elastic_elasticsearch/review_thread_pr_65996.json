{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM0MTI0OTk1", "number": 65996, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxNDozNjoyMlrOFCYKzg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxNToxMTo0NVrOFCZp7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM4MDM3NDU0OnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/elasticsearch/action/support/replication/TransportWriteAction.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxNDozNjoyMlrOIBf1yA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxNDozNjoyMlrOIBf1yA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODQ0MTE2MA==", "bodyText": "This and its counterpart below looks unused.", "url": "https://github.com/elastic/elasticsearch/pull/65996#discussion_r538441160", "createdAt": "2020-12-08T14:36:22Z", "author": {"login": "henningandersen"}, "path": "server/src/main/java/org/elasticsearch/action/support/replication/TransportWriteAction.java", "diffHunk": "@@ -172,9 +182,11 @@ public static Location locationToSync(Location current, Location next) {\n     @Override\n     protected void shardOperationOnPrimary(\n             Request request, IndexShard primary, ActionListener<PrimaryResult<ReplicaRequest, Response>> listener) {\n+        final long enqueueTime = System.nanoTime();\n         threadPool.executor(executorFunction.apply(primary)).execute(new ActionRunnable<>(listener) {\n             @Override\n             protected void doRun() {\n+                final long queuedNanos = System.nanoTime() - enqueueTime;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c2eb2bbba5c86c73e07a9962e7e789fcd947880"}, "originalPosition": 62}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM4MDU5NzQ4OnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/elasticsearch/index/stats/IndexingPressureStats.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxNTowODo0NVrOIBiCgA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxNTowODo0NVrOIBiCgA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODQ3NzE4NA==", "bodyText": "Can we remove this overload? Looks unused.", "url": "https://github.com/elastic/elasticsearch/pull/65996#discussion_r538477184", "createdAt": "2020-12-08T15:08:45Z", "author": {"login": "henningandersen"}, "path": "server/src/main/java/org/elasticsearch/index/stats/IndexingPressureStats.java", "diffHunk": "@@ -84,6 +100,22 @@ public IndexingPressureStats(long totalCombinedCoordinatingAndPrimaryBytes, long\n         this.primaryRejections = primaryRejections;\n         this.replicaRejections = replicaRejections;\n         this.memoryLimit = memoryLimit;\n+\n+        this.totalCoordinatingOps = totalCoordinatingOps;\n+        this.totalPrimaryOps = totalPrimaryOps;\n+        this.totalReplicaOps = totalReplicaOps;\n+        this.currentCoordinatingOps = currentCoordinatingOps;\n+        this.currentPrimaryOps = currentPrimaryOps;\n+        this.currentReplicaOps = currentReplicaOps;\n+    }\n+\n+    public IndexingPressureStats(long totalCombinedCoordinatingAndPrimaryBytes, long totalCoordinatingBytes, long totalPrimaryBytes,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c2eb2bbba5c86c73e07a9962e7e789fcd947880"}, "originalPosition": 50}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM4MDYxODA0OnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/elasticsearch/index/stats/IndexingPressureStats.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxNToxMTo0NVrOIBiPpQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxNToxMTo0NVrOIBiPpQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODQ4MDU0OQ==", "bodyText": "Perhaps add a comment on these that we intend to expose these or something similar in the future in the x-content after experimentation.", "url": "https://github.com/elastic/elasticsearch/pull/65996#discussion_r538480549", "createdAt": "2020-12-08T15:11:45Z", "author": {"login": "henningandersen"}, "path": "server/src/main/java/org/elasticsearch/index/stats/IndexingPressureStats.java", "diffHunk": "@@ -46,6 +46,13 @@\n     private final long replicaRejections;\n     private final long memoryLimit;\n \n+    private final long totalCoordinatingOps;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c2eb2bbba5c86c73e07a9962e7e789fcd947880"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4746, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}