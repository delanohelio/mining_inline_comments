{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc4NjU5MjA1", "number": 61916, "title": "Allow_duplicates option for append processor", "bodyText": "Adds an allow_duplicates option to the append processor. When set to false, any of the values to be appended that are already present in the target field will be ignored. Defaults to true to preserve existing behavior.\nCloses #57543", "createdAt": "2020-09-03T14:07:36Z", "url": "https://github.com/elastic/elasticsearch/pull/61916", "merged": true, "mergeCommit": {"oid": "2d8b7a9e9196f25c009f786db7a973a6dfbc8f12"}, "closed": true, "closedAt": "2020-09-11T13:17:59Z", "author": {"login": "danhermann"}, "timelineItems": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdFRItEgH2gAyNDc4NjU5MjA1OjVlMTUzMGFhNWM5YmI3YTFmNDgyMDYwNzc0ZTQ2MTYyYmQ3M2NmNjQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdFpfEbAFqTQ4MjU1NTY2MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5e1530aa5c9bb7a1f482060774e46162bd73cf64", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/5e1530aa5c9bb7a1f482060774e46162bd73cf64", "committedDate": "2020-09-03T14:04:45Z", "message": "allow_duplicates option for append processor"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyNTU1NjYw", "url": "https://github.com/elastic/elasticsearch/pull/61916#pullrequestreview-482555660", "createdAt": "2020-09-04T10:54:18Z", "commit": {"oid": "5e1530aa5c9bb7a1f482060774e46162bd73cf64"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQxMDo1NDoxOFrOHNJIiw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQxMDo1NDoxOFrOHNJIiw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzU0MzE3OQ==", "bodyText": "I'd stick with Collections.singletonList just for the sake of backporting", "url": "https://github.com/elastic/elasticsearch/pull/61916#discussion_r483543179", "createdAt": "2020-09-04T10:54:18Z", "author": {"login": "probakowski"}, "path": "modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/ForEachProcessorTests.java", "diffHunk": "@@ -203,8 +203,8 @@ public void testModifyFieldsOutsideArray() throws Exception {\n \n         ForEachProcessor processor = new ForEachProcessor(\n                 \"_tag\", null, \"values\", new CompoundProcessor(false,\n-                Collections.singletonList(new UppercaseProcessor(\"_tag_upper\", null, \"_ingest._value\", false, \"_ingest._value\")),\n-                Collections.singletonList(new AppendProcessor(\"_tag\", null, template, (model) -> (Collections.singletonList(\"added\"))))\n+                List.of(new UppercaseProcessor(\"_tag_upper\", null, \"_ingest._value\", false, \"_ingest._value\")),\n+                List.of(new AppendProcessor(\"_tag\", null, template, (model) -> (Collections.singletonList(\"added\")), true))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5e1530aa5c9bb7a1f482060774e46162bd73cf64"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4817, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}