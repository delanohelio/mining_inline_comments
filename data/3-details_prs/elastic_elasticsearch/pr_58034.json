{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMzNjAyNzQ5", "number": 58034, "title": "GeometryTestUtils should always generate valid polygons", "bodyText": "Make sure we always generate legal polygons, e.g they have area.\nfixes #58032", "createdAt": "2020-06-12T10:36:07Z", "url": "https://github.com/elastic/elasticsearch/pull/58034", "merged": true, "mergeCommit": {"oid": "175c220fe9b372e5b52ae242c023cba5c04a7ce9"}, "closed": true, "closedAt": "2020-06-15T06:49:20Z", "author": {"login": "iverase"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcqgXtxAH2gAyNDMzNjAyNzQ5OmExOWMzNTU3YWFiMTM3NzE0OTcwZTlmNjQxZTUwNjQ4NjM4NmM0MzU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcrIYlRgH2gAyNDMzNjAyNzQ5OjM2N2VlYzQyMTFjNDI1OTY1NjUyMjNjNzcyNmNmOWY1YWFkYTI2Mjc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a19c3557aab137714970e9f641e506486386c435", "author": {"user": {"login": "iverase", "name": "Ignacio Vera"}}, "url": "https://github.com/elastic/elasticsearch/commit/a19c3557aab137714970e9f641e506486386c435", "committedDate": "2020-06-12T10:33:46Z", "message": "Make sure we always generate legal polygons, e.g they have area"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5NzAzMzQw", "url": "https://github.com/elastic/elasticsearch/pull/58034#pullrequestreview-429703340", "createdAt": "2020-06-12T12:35:05Z", "commit": {"oid": "a19c3557aab137714970e9f641e506486386c435"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQxMjozNTowNlrOGjCT3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQxMjozNTowNlrOGjCT3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTM5MTE5OQ==", "bodyText": "We often use randomValueOtherThanMany(p -> area(p) == 0, GeoTestUtil::nextPolygon); to do this kind of thing. It isn't faster or better than what you have, but it is more common.", "url": "https://github.com/elastic/elasticsearch/pull/58034#discussion_r439391199", "createdAt": "2020-06-12T12:35:06Z", "author": {"login": "nik9000"}, "path": "test/framework/src/main/java/org/elasticsearch/geo/GeometryTestUtils.java", "diffHunk": "@@ -97,6 +97,9 @@ public static Point randomPoint(boolean hasAlt) {\n \n     public static Polygon randomPolygon(boolean hasAlt) {\n         org.apache.lucene.geo.Polygon lucenePolygon = GeoTestUtil.nextPolygon();\n+        while(area(lucenePolygon) == 0) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a19c3557aab137714970e9f641e506486386c435"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e701ba1895b16e361a2a3e7b49d975a7afabd444", "author": {"user": {"login": "iverase", "name": "Ignacio Vera"}}, "url": "https://github.com/elastic/elasticsearch/commit/e701ba1895b16e361a2a3e7b49d975a7afabd444", "committedDate": "2020-06-12T12:53:20Z", "message": "Merge branch 'master' into legalRandoPolygons"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a2115d753c83a2944c52859ac4edaecd04f3e2c1", "author": {"user": {"login": "iverase", "name": "Ignacio Vera"}}, "url": "https://github.com/elastic/elasticsearch/commit/a2115d753c83a2944c52859ac4edaecd04f3e2c1", "committedDate": "2020-06-12T12:55:40Z", "message": "use more common use structure"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5NzQ1NjE1", "url": "https://github.com/elastic/elasticsearch/pull/58034#pullrequestreview-429745615", "createdAt": "2020-06-12T13:36:34Z", "commit": {"oid": "a2115d753c83a2944c52859ac4edaecd04f3e2c1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8a2dedf168e54312bdb46fea6ce1d04b9a8c5bc5", "author": {"user": {"login": "iverase", "name": "Ignacio Vera"}}, "url": "https://github.com/elastic/elasticsearch/commit/8a2dedf168e54312bdb46fea6ce1d04b9a8c5bc5", "committedDate": "2020-06-12T14:05:48Z", "message": "Merge branch 'master' into legalRandoPolygons"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "367eec4211c42596565223c7726cf9f5aada2627", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/367eec4211c42596565223c7726cf9f5aada2627", "committedDate": "2020-06-14T09:10:55Z", "message": "Merge branch 'master' into legalRandoPolygons"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 626, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}