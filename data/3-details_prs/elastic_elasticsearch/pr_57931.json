{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMyNDM3MTM5", "number": 57931, "title": "Prohibit freezing the write index of a data stream", "bodyText": "Note that the prohibition on closing the write index already effectively blocked the freezing of write indices. This PR formalizes that requirement with a test to verify that behavior.\nRelates to #53100", "createdAt": "2020-06-10T12:57:36Z", "url": "https://github.com/elastic/elasticsearch/pull/57931", "merged": true, "mergeCommit": {"oid": "ce73b62143c4eeb32371aa3e0145d8b70d3c7fa7"}, "closed": true, "closedAt": "2020-06-15T13:36:25Z", "author": {"login": "danhermann"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcp5M4RAH2gAyNDMyNDM3MTM5OjcyYjI3MTkxMGViNzcyNDNlZWU4ZjFhZTk2ZTRiYTY2OWRmNTBkYTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcp6YUZAFqTQyODEwMDk2Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "72b271910eb77243eee8f1ae96e4ba669df50da7", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/72b271910eb77243eee8f1ae96e4ba669df50da7", "committedDate": "2020-06-10T12:55:38Z", "message": "Prohibit freezing the write index of a data stream"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI4MDQ3MTE4", "url": "https://github.com/elastic/elasticsearch/pull/57931#pullrequestreview-428047118", "createdAt": "2020-06-10T13:23:30Z", "commit": {"oid": "72b271910eb77243eee8f1ae96e4ba669df50da7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxMzoyMzozMFrOGh0ldQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxMzoyMzozMFrOGh0ldQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODExNzc0OQ==", "bodyText": "Perhaps keep the message the same? I think it is ok that frees errors out with the fact that it can't close the index.", "url": "https://github.com/elastic/elasticsearch/pull/57931#discussion_r438117749", "createdAt": "2020-06-10T13:23:30Z", "author": {"login": "martijnvg"}, "path": "server/src/main/java/org/elasticsearch/cluster/metadata/MetadataIndexStateService.java", "diffHunk": "@@ -147,7 +147,7 @@ public void closeIndices(final CloseIndexClusterStateUpdateRequest request, fina\n             }\n         }\n         if (writeIndices.size() > 0) {\n-            throw new IllegalArgumentException(\"cannot close the following data stream write indices [\" +\n+            throw new IllegalArgumentException(\"cannot close or freeze the following data stream write indices [\" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72b271910eb77243eee8f1ae96e4ba669df50da7"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "51b538567425c7925479a841ce5c2ab3b24e6a48", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/51b538567425c7925479a841ce5c2ab3b24e6a48", "committedDate": "2020-06-10T14:08:47Z", "message": "retain original error message"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8321ea04f07e822b87bcc9c08077c4e52ceaffc2", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/8321ea04f07e822b87bcc9c08077c4e52ceaffc2", "committedDate": "2020-06-10T14:11:08Z", "message": "revert formatting change"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI4MTAwOTY2", "url": "https://github.com/elastic/elasticsearch/pull/57931#pullrequestreview-428100966", "createdAt": "2020-06-10T14:18:02Z", "commit": {"oid": "8321ea04f07e822b87bcc9c08077c4e52ceaffc2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 742, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}