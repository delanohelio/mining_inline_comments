{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQxNzA3NTk0", "number": 66490, "title": "Fail force-merges on read-only engines (#64756)", "bodyText": "Today we treat all force-merges on a read-only (e.g. frozen) engine as\nno-ops, indicating to the client that they succeeded even if they had no\neffect. This commit corrects that behaviour, resolving the resulting\nconfusion, by rejecting force-merges on read-only engines that are\ndefinitely not no-ops.", "createdAt": "2020-12-17T08:53:04Z", "url": "https://github.com/elastic/elasticsearch/pull/66490", "merged": true, "mergeCommit": {"oid": "62356984b145c45f71f9107c2f96ab795567ad4e"}, "closed": true, "closedAt": "2020-12-17T13:18:43Z", "author": {"login": "DaveCTurner"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdm_lxZAH2gAyNTQxNzA3NTk0OmRmZWE2YTdjOGMyNzkzMjQzNzRlZWU1NzhhOTZiNjM1MWRmOTQ4M2Q=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdnAOAlgH2gAyNTQxNzA3NTk0OmNiY2VjMTUxMDU4NGY3ZWRhMGNmYmNkZGNlNDgxNTdiOWQwZjEzOGE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "dfea6a7c8c279324374eee578a96b6351df9483d", "author": {"user": {"login": "howardhuanghua", "name": "Howard"}}, "url": "https://github.com/elastic/elasticsearch/commit/dfea6a7c8c279324374eee578a96b6351df9483d", "committedDate": "2020-12-17T08:51:38Z", "message": "Fail force-merges on read-only engines (#64756)\n\nToday we treat all force-merges on a read-only (e.g. frozen) engine as\nno-ops, indicating to the client that they succeeded even if they had no\neffect. This commit corrects that behaviour, resolving the resulting\nconfusion, by rejecting force-merges on read-only engines that are\ndefinitely not no-ops."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "555c2729bfbef9029ff5eb3bfe1140b0141cd3fe", "author": {"user": {"login": "DaveCTurner", "name": "David Turner"}}, "url": "https://github.com/elastic/elasticsearch/commit/555c2729bfbef9029ff5eb3bfe1140b0141cd3fe", "committedDate": "2020-12-17T09:04:46Z", "message": "Fix comments in docs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU0NDA0NTgy", "url": "https://github.com/elastic/elasticsearch/pull/66490#pullrequestreview-554404582", "createdAt": "2020-12-17T09:09:23Z", "commit": {"oid": "555c2729bfbef9029ff5eb3bfe1140b0141cd3fe"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QwOTowOToyM1rOIHrl8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QwOTowOToyM1rOIHrl8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDkyNTE2OA==", "bodyText": "I think we should frame this as a bug, something like:\nThis bug has been fixed in version 7.12 onwards such that a force-merge ...", "url": "https://github.com/elastic/elasticsearch/pull/66490#discussion_r544925168", "createdAt": "2020-12-17T09:09:23Z", "author": {"login": "henningandersen"}, "path": "docs/reference/migration/migrate_7_12.asciidoc", "diffHunk": "@@ -0,0 +1,33 @@\n+[[breaking-changes-7.12]]\n+== Breaking changes in 7.12\n+++++\n+<titleabbrev>7.12</titleabbrev>\n+++++\n+\n+This section discusses the changes that you need to be aware of when migrating\n+your application to {es} 7.12.\n+\n+See also <<release-highlights>> and <<es-release-notes>>.\n+\n+// * <<breaking_712_blah_changes>>\n+// * <<breaking_712_blah_changes>>\n+\n+//NOTE: The notable-breaking-changes tagged regions are re-used in the\n+//Installation and Upgrade Guide\n+\n+//tag::notable-breaking-changes[]\n+\n+[discrete]\n+[[breaking_712_engine_changes]]\n+=== Engine changes\n+\n+[[breaking_712_engine_forcemerge_change]]\n+.Force-merges on frozen and searchable snapshot indices will fail if merging is required\n+[%collapsible]\n+====\n+*Details* +\n+In earlier versions a force-merge on a frozen index or a searchable snapshot\n+index would yield a successful response without performing the requested merge.\n+From version 7.12 onwards a force-merge on these kinds of index will fail", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "555c2729bfbef9029ff5eb3bfe1140b0141cd3fe"}, "originalPosition": 31}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cbcec1510584f7eda0cfbcddce48157b9d0f138a", "author": {"user": {"login": "DaveCTurner", "name": "David Turner"}}, "url": "https://github.com/elastic/elasticsearch/commit/cbcec1510584f7eda0cfbcddce48157b9d0f138a", "committedDate": "2020-12-17T09:35:35Z", "message": "Say it's a bug"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4461, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}