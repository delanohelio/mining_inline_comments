{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk2Mzg1NjY2", "number": 54511, "reviewThreads": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxNDo0NjozM1rODtJPpw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxNDo0OTozM1rODtJWMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ4NjYzOTc1OnYy", "diffSide": "LEFT", "path": "server/src/main/java/org/elasticsearch/cluster/coordination/ClusterFormationFailureHelper.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxNDo0NjozM1rOF-ZcjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxNDo0NjozM1rOF-ZcjA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDk3Mjk0MA==", "bodyText": "Done, see call to ClusterBootstrapService::isBootstrapPlaceholder in describeQuorum.", "url": "https://github.com/elastic/elasticsearch/pull/54511#discussion_r400972940", "createdAt": "2020-03-31T14:46:33Z", "author": {"login": "DaveCTurner"}, "path": "server/src/main/java/org/elasticsearch/cluster/coordination/ClusterFormationFailureHelper.java", "diffHunk": "@@ -157,7 +157,6 @@ String getDescription() {\n                 if (INITIAL_MASTER_NODES_SETTING.get(Settings.EMPTY).equals(INITIAL_MASTER_NODES_SETTING.get(settings))) {\n                     bootstrappingDescription = \"[\" + INITIAL_MASTER_NODES_SETTING.getKey() + \"] is empty on this node\";\n                 } else {\n-                    // TODO update this when we can bootstrap on only a quorum of the initial nodes", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f5113d18f15c397a6d6ecc91cd87c5886b31b431"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ4NjY0NDQwOnYy", "diffSide": "LEFT", "path": "server/src/main/java/org/elasticsearch/cluster/coordination/FollowersChecker.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxNDo0NzoyM1rOF-ZfNA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxNDo0NzoyM1rOF-ZfNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDk3MzYyMA==", "bodyText": "This happens by sending a publish response with no associated join.", "url": "https://github.com/elastic/elasticsearch/pull/54511#discussion_r400973620", "createdAt": "2020-03-31T14:47:23Z", "author": {"login": "DaveCTurner"}, "path": "server/src/main/java/org/elasticsearch/cluster/coordination/FollowersChecker.java", "diffHunk": "@@ -163,7 +163,6 @@ private void handleFollowerCheck(FollowerCheckRequest request, TransportChannel\n         FastResponseState responder = this.fastResponseState;\n \n         if (responder.mode == Mode.FOLLOWER && responder.term == request.term) {\n-            // TODO trigger a term bump if we voted for a different leader in this term", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f5113d18f15c397a6d6ecc91cd87c5886b31b431"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ4NjY0ODYxOnYy", "diffSide": "LEFT", "path": "server/src/main/java/org/elasticsearch/cluster/coordination/InMemoryPersistedState.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxNDo0ODowOVrOF-ZhwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxNDo0ODowOVrOF-ZhwQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDk3NDI3Mw==", "bodyText": "Done, see AbstractCoordinatorTestCase.MockPersistedState.", "url": "https://github.com/elastic/elasticsearch/pull/54511#discussion_r400974273", "createdAt": "2020-03-31T14:48:09Z", "author": {"login": "DaveCTurner"}, "path": "server/src/main/java/org/elasticsearch/cluster/coordination/InMemoryPersistedState.java", "diffHunk": "@@ -21,7 +21,6 @@\n import org.elasticsearch.cluster.ClusterState;\n \n public class InMemoryPersistedState implements CoordinationState.PersistedState {\n-    // TODO add support and tests for behaviour with persistence-layer failures", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f5113d18f15c397a6d6ecc91cd87c5886b31b431"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ4NjY1MTE0OnYy", "diffSide": "LEFT", "path": "server/src/main/java/org/elasticsearch/cluster/coordination/PreVoteCollector.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxNDo0ODozOFrOF-ZjWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxNDo0ODozOFrOF-ZjWw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDk3NDY4Mw==", "bodyText": "No, SAME is bad because updateMaxTermSeen.accept may block on Coordinator#mutex.", "url": "https://github.com/elastic/elasticsearch/pull/54511#discussion_r400974683", "createdAt": "2020-03-31T14:48:38Z", "author": {"login": "DaveCTurner"}, "path": "server/src/main/java/org/elasticsearch/cluster/coordination/PreVoteCollector.java", "diffHunk": "@@ -62,7 +62,6 @@\n         this.updateMaxTermSeen = updateMaxTermSeen;\n         this.electionStrategy = electionStrategy;\n \n-        // TODO does this need to be on the generic threadpool or can it use SAME?", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f5113d18f15c397a6d6ecc91cd87c5886b31b431"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ4NjY1MzAxOnYy", "diffSide": "LEFT", "path": "server/src/main/java/org/elasticsearch/cluster/coordination/Publication.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxNDo0ODo1NVrOF-ZkdA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxNDo0ODo1NVrOF-ZkdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDk3NDk2NA==", "bodyText": "Don't think so, it notifies the listener on a failure.", "url": "https://github.com/elastic/elasticsearch/pull/54511#discussion_r400974964", "createdAt": "2020-03-31T14:48:55Z", "author": {"login": "DaveCTurner"}, "path": "server/src/main/java/org/elasticsearch/cluster/coordination/Publication.java", "diffHunk": "@@ -244,7 +244,6 @@ void sendPublishRequest() {\n             assert state == PublicationTargetState.NOT_STARTED : state + \" -> \" + PublicationTargetState.SENT_PUBLISH_REQUEST;\n             state = PublicationTargetState.SENT_PUBLISH_REQUEST;\n             Publication.this.sendPublishRequest(discoveryNode, publishRequest, new PublishResponseHandler());\n-            // TODO Can this ^ fail with an exception? Target should be failed if so.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f5113d18f15c397a6d6ecc91cd87c5886b31b431"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ4NjY1NTE2OnYy", "diffSide": "LEFT", "path": "test/framework/src/main/java/org/elasticsearch/cluster/coordination/AbstractCoordinatorTestCase.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxNDo0OToxNlrOF-ZlsA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxNDo0OToxNlrOF-ZlsA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDk3NTI4MA==", "bodyText": "Not really relevant here.", "url": "https://github.com/elastic/elasticsearch/pull/54511#discussion_r400975280", "createdAt": "2020-03-31T14:49:16Z", "author": {"login": "DaveCTurner"}, "path": "test/framework/src/main/java/org/elasticsearch/cluster/coordination/AbstractCoordinatorTestCase.java", "diffHunk": "@@ -244,7 +244,6 @@ protected static int defaultInt(Setting<Integer> setting) {\n \n         final List<ClusterNode> clusterNodes;\n         final DeterministicTaskQueue deterministicTaskQueue = new DeterministicTaskQueue(\n-            // TODO does ThreadPool need a node name any more?", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f5113d18f15c397a6d6ecc91cd87c5886b31b431"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ4NjY1NjUxOnYy", "diffSide": "LEFT", "path": "test/framework/src/main/java/org/elasticsearch/cluster/coordination/AbstractCoordinatorTestCase.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxNDo0OTozM1rOF-ZmlQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxNDo0OTozM1rOF-ZmlQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDk3NTUwOQ==", "bodyText": "Done, or at least covered elsewhere.", "url": "https://github.com/elastic/elasticsearch/pull/54511#discussion_r400975509", "createdAt": "2020-03-31T14:49:33Z", "author": {"login": "DaveCTurner"}, "path": "test/framework/src/main/java/org/elasticsearch/cluster/coordination/AbstractCoordinatorTestCase.java", "diffHunk": "@@ -449,11 +450,6 @@ public String toString() {\n                             deterministicTaskQueue.runRandomTask();\n                         }\n                     }\n-\n-                    // TODO other random steps:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f5113d18f15c397a6d6ecc91cd87c5886b31b431"}, "originalPosition": 46}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4006, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}