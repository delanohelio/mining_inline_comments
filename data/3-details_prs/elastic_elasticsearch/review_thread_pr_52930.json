{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgxMTA4MDcz", "number": 52930, "reviewThreads": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QyMzowOTo1N1rODjpKsw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQyMzozMDozOVrODptfdg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4NzAxMjM1OnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QyMzowOTo1N1rOFvkZ0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxOToyMToxOFrOFwsEWw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTQyMzgyNw==", "bodyText": "This complexity isn't necessary. You can override the deprecatedRoutes method.", "url": "https://github.com/elastic/elasticsearch/pull/52930#discussion_r385423827", "createdAt": "2020-02-27T23:09:57Z", "author": {"login": "jasontedor"}, "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "diffHunk": "@@ -60,6 +67,12 @@ public String getName() {\n \n     @Override\n     public RestChannelConsumer prepareRequest(final RestRequest request, final NodeClient client) throws IOException {\n+        if (request.rawPath().equals(\"/_cluster/nodes/hotthreads\") ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "78f23e1ba889006f18712e4dc1ec1f4977f0dd0e"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTc4MjMyMQ==", "bodyText": "I see. Thanks!", "url": "https://github.com/elastic/elasticsearch/pull/52930#discussion_r385782321", "createdAt": "2020-02-28T16:08:28Z", "author": {"login": "muachilin"}, "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "diffHunk": "@@ -60,6 +67,12 @@ public String getName() {\n \n     @Override\n     public RestChannelConsumer prepareRequest(final RestRequest request, final NodeClient client) throws IOException {\n+        if (request.rawPath().equals(\"/_cluster/nodes/hotthreads\") ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTQyMzgyNw=="}, "originalCommit": {"oid": "78f23e1ba889006f18712e4dc1ec1f4977f0dd0e"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjU5Nzk3OQ==", "bodyText": "I have modified this part. Thanks!", "url": "https://github.com/elastic/elasticsearch/pull/52930#discussion_r386597979", "createdAt": "2020-03-02T19:21:18Z", "author": {"login": "muachilin"}, "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "diffHunk": "@@ -60,6 +67,12 @@ public String getName() {\n \n     @Override\n     public RestChannelConsumer prepareRequest(final RestRequest request, final NodeClient client) throws IOException {\n+        if (request.rawPath().equals(\"/_cluster/nodes/hotthreads\") ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTQyMzgyNw=="}, "originalCommit": {"oid": "78f23e1ba889006f18712e4dc1ec1f4977f0dd0e"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5NTIzNDQ5OnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "isResolved": true, "comments": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQyMToyMDozMVrOFwvqSQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQwOTo1NjoyMVrOFzgvvw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY1Njg0MQ==", "bodyText": "This shouldn't be needed as the REST infrastructure will handle for you when a deprecated path is invoked. Did you find some reason that you needed to add this?", "url": "https://github.com/elastic/elasticsearch/pull/52930#discussion_r386656841", "createdAt": "2020-03-02T21:20:31Z", "author": {"login": "jasontedor"}, "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "diffHunk": "@@ -60,6 +82,11 @@ public String getName() {\n \n     @Override\n     public RestChannelConsumer prepareRequest(final RestRequest request, final NodeClient client) throws IOException {\n+        List<String> deprecatedRoutesPath = deprecatedRoutes().stream().map(DeprecatedRoute::getPath).collect(Collectors.toList());\n+        int getDeprecatedRoutesPathIndex = deprecatedRoutesPath.indexOf(request.rawPath());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "317e1d0d1e71645fad8fb9b32b0f632b6c08b752"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY1OTEwMw==", "bodyText": "Because I want to set different warning message for each deprecated route.", "url": "https://github.com/elastic/elasticsearch/pull/52930#discussion_r386659103", "createdAt": "2020-03-02T21:24:46Z", "author": {"login": "muachilin"}, "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "diffHunk": "@@ -60,6 +82,11 @@ public String getName() {\n \n     @Override\n     public RestChannelConsumer prepareRequest(final RestRequest request, final NodeClient client) throws IOException {\n+        List<String> deprecatedRoutesPath = deprecatedRoutes().stream().map(DeprecatedRoute::getPath).collect(Collectors.toList());\n+        int getDeprecatedRoutesPathIndex = deprecatedRoutesPath.indexOf(request.rawPath());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY1Njg0MQ=="}, "originalCommit": {"oid": "317e1d0d1e71645fad8fb9b32b0f632b6c08b752"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY2MDAwMg==", "bodyText": "Besides, I want to call deprecationLogger to assert warnings when users use the deprecated path. Maybe I misinterpret something here...", "url": "https://github.com/elastic/elasticsearch/pull/52930#discussion_r386660002", "createdAt": "2020-03-02T21:26:39Z", "author": {"login": "muachilin"}, "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "diffHunk": "@@ -60,6 +82,11 @@ public String getName() {\n \n     @Override\n     public RestChannelConsumer prepareRequest(final RestRequest request, final NodeClient client) throws IOException {\n+        List<String> deprecatedRoutesPath = deprecatedRoutes().stream().map(DeprecatedRoute::getPath).collect(Collectors.toList());\n+        int getDeprecatedRoutesPathIndex = deprecatedRoutesPath.indexOf(request.rawPath());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY1Njg0MQ=="}, "originalCommit": {"oid": "317e1d0d1e71645fad8fb9b32b0f632b6c08b752"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY3Nzc1Ng==", "bodyText": "The REST infrastructure will do this for you, that's what you're passing to the DeprecatedRoute constructor.", "url": "https://github.com/elastic/elasticsearch/pull/52930#discussion_r386677756", "createdAt": "2020-03-02T22:02:29Z", "author": {"login": "jasontedor"}, "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "diffHunk": "@@ -60,6 +82,11 @@ public String getName() {\n \n     @Override\n     public RestChannelConsumer prepareRequest(final RestRequest request, final NodeClient client) throws IOException {\n+        List<String> deprecatedRoutesPath = deprecatedRoutes().stream().map(DeprecatedRoute::getPath).collect(Collectors.toList());\n+        int getDeprecatedRoutesPathIndex = deprecatedRoutesPath.indexOf(request.rawPath());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY1Njg0MQ=="}, "originalCommit": {"oid": "317e1d0d1e71645fad8fb9b32b0f632b6c08b752"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY5OTU4MQ==", "bodyText": "Oh I see. My main purpose of adding those lines is that I want to test them. If I delete those two lines, I cannot invoke deprecationLogger.deprecated to assert warnings.", "url": "https://github.com/elastic/elasticsearch/pull/52930#discussion_r386699581", "createdAt": "2020-03-02T22:51:31Z", "author": {"login": "muachilin"}, "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "diffHunk": "@@ -60,6 +82,11 @@ public String getName() {\n \n     @Override\n     public RestChannelConsumer prepareRequest(final RestRequest request, final NodeClient client) throws IOException {\n+        List<String> deprecatedRoutesPath = deprecatedRoutes().stream().map(DeprecatedRoute::getPath).collect(Collectors.toList());\n+        int getDeprecatedRoutesPathIndex = deprecatedRoutesPath.indexOf(request.rawPath());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY1Njg0MQ=="}, "originalCommit": {"oid": "317e1d0d1e71645fad8fb9b32b0f632b6c08b752"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjcwMTA1MQ==", "bodyText": "If there is no deprecationLogger.deprecated in prepareRequest method, I cannot test if the given request contains the deprecated path, whether it will assert correct warning messages in RestNodesHotThreadsActionTests.java", "url": "https://github.com/elastic/elasticsearch/pull/52930#discussion_r386701051", "createdAt": "2020-03-02T22:55:07Z", "author": {"login": "muachilin"}, "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "diffHunk": "@@ -60,6 +82,11 @@ public String getName() {\n \n     @Override\n     public RestChannelConsumer prepareRequest(final RestRequest request, final NodeClient client) throws IOException {\n+        List<String> deprecatedRoutesPath = deprecatedRoutes().stream().map(DeprecatedRoute::getPath).collect(Collectors.toList());\n+        int getDeprecatedRoutesPathIndex = deprecatedRoutesPath.indexOf(request.rawPath());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY1Njg0MQ=="}, "originalCommit": {"oid": "317e1d0d1e71645fad8fb9b32b0f632b6c08b752"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjcwMTc2Ng==", "bodyText": "I am quite confused about how to get rid of these two lines while maintaining the tests in RestNodesHotThreadsActionTests.java", "url": "https://github.com/elastic/elasticsearch/pull/52930#discussion_r386701766", "createdAt": "2020-03-02T22:56:50Z", "author": {"login": "muachilin"}, "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "diffHunk": "@@ -60,6 +82,11 @@ public String getName() {\n \n     @Override\n     public RestChannelConsumer prepareRequest(final RestRequest request, final NodeClient client) throws IOException {\n+        List<String> deprecatedRoutesPath = deprecatedRoutes().stream().map(DeprecatedRoute::getPath).collect(Collectors.toList());\n+        int getDeprecatedRoutesPathIndex = deprecatedRoutesPath.indexOf(request.rawPath());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY1Njg0MQ=="}, "originalCommit": {"oid": "317e1d0d1e71645fad8fb9b32b0f632b6c08b752"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjczNjIwNg==", "bodyText": "I don\u2019t think the tests are important because it\u2019s basically testing the REST infrastructure which is tested elsewhere.", "url": "https://github.com/elastic/elasticsearch/pull/52930#discussion_r386736206", "createdAt": "2020-03-03T00:39:31Z", "author": {"login": "jasontedor"}, "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "diffHunk": "@@ -60,6 +82,11 @@ public String getName() {\n \n     @Override\n     public RestChannelConsumer prepareRequest(final RestRequest request, final NodeClient client) throws IOException {\n+        List<String> deprecatedRoutesPath = deprecatedRoutes().stream().map(DeprecatedRoute::getPath).collect(Collectors.toList());\n+        int getDeprecatedRoutesPathIndex = deprecatedRoutesPath.indexOf(request.rawPath());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY1Njg0MQ=="}, "originalCommit": {"oid": "317e1d0d1e71645fad8fb9b32b0f632b6c08b752"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjgyMjQyNw==", "bodyText": "I added these tests in RestNodesHotThreadsActionTests.java because in issue #52640, @DaveCTurner mentioned the need for adding tests for warnings. Maybe I need to add the kind of tests that @DaveCTurner mentioned in other places?", "url": "https://github.com/elastic/elasticsearch/pull/52930#discussion_r386822427", "createdAt": "2020-03-03T06:34:54Z", "author": {"login": "muachilin"}, "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "diffHunk": "@@ -60,6 +82,11 @@ public String getName() {\n \n     @Override\n     public RestChannelConsumer prepareRequest(final RestRequest request, final NodeClient client) throws IOException {\n+        List<String> deprecatedRoutesPath = deprecatedRoutes().stream().map(DeprecatedRoute::getPath).collect(Collectors.toList());\n+        int getDeprecatedRoutesPathIndex = deprecatedRoutesPath.indexOf(request.rawPath());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY1Njg0MQ=="}, "originalCommit": {"oid": "317e1d0d1e71645fad8fb9b32b0f632b6c08b752"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzAxMTMxMQ==", "bodyText": "Okay. You can add REST tests in rest-api-spec.", "url": "https://github.com/elastic/elasticsearch/pull/52930#discussion_r387011311", "createdAt": "2020-03-03T13:17:28Z", "author": {"login": "jasontedor"}, "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "diffHunk": "@@ -60,6 +82,11 @@ public String getName() {\n \n     @Override\n     public RestChannelConsumer prepareRequest(final RestRequest request, final NodeClient client) throws IOException {\n+        List<String> deprecatedRoutesPath = deprecatedRoutes().stream().map(DeprecatedRoute::getPath).collect(Collectors.toList());\n+        int getDeprecatedRoutesPathIndex = deprecatedRoutesPath.indexOf(request.rawPath());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY1Njg0MQ=="}, "originalCommit": {"oid": "317e1d0d1e71645fad8fb9b32b0f632b6c08b752"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzcxNjk2Mw==", "bodyText": "Is there any reason that it is better for me to add tests by writing yml files instead of adding tests in RestNodesHotThreadsActionTests.java? @DaveCTurner mentioned the PR #50499 so I create tests in RestNodesHotThreadsActionTests.java. In that PR, the author create tests in server/src/main/java/org/elasticsearch/rest/action/cat/RestNodesAction.java. I am just wondering how I can write appropriate tests. Thanks!", "url": "https://github.com/elastic/elasticsearch/pull/52930#discussion_r387716963", "createdAt": "2020-03-04T14:52:58Z", "author": {"login": "muachilin"}, "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "diffHunk": "@@ -60,6 +82,11 @@ public String getName() {\n \n     @Override\n     public RestChannelConsumer prepareRequest(final RestRequest request, final NodeClient client) throws IOException {\n+        List<String> deprecatedRoutesPath = deprecatedRoutes().stream().map(DeprecatedRoute::getPath).collect(Collectors.toList());\n+        int getDeprecatedRoutesPathIndex = deprecatedRoutesPath.indexOf(request.rawPath());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY1Njg0MQ=="}, "originalCommit": {"oid": "317e1d0d1e71645fad8fb9b32b0f632b6c08b752"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzcxOTg2OQ==", "bodyText": "I think the REST tests are more appropriate since this is about testing the deprecation of endpoints on the REST layer. One difference between the implementation here and in RestNodesAction as in the PR that you reference is that the deprecation is handled in different layers. Here, it's handled in the REST layer, there it's handled in the actual processing of the request (below the REST layer). That makes testing a little easier there. Here, you would have to wire up an entire REST layer (RestController) to get similar kind of coverage.\nYet, I still think that the REST tests are the best place to test REST layer changes.", "url": "https://github.com/elastic/elasticsearch/pull/52930#discussion_r387719869", "createdAt": "2020-03-04T14:57:19Z", "author": {"login": "jasontedor"}, "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "diffHunk": "@@ -60,6 +82,11 @@ public String getName() {\n \n     @Override\n     public RestChannelConsumer prepareRequest(final RestRequest request, final NodeClient client) throws IOException {\n+        List<String> deprecatedRoutesPath = deprecatedRoutes().stream().map(DeprecatedRoute::getPath).collect(Collectors.toList());\n+        int getDeprecatedRoutesPathIndex = deprecatedRoutesPath.indexOf(request.rawPath());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY1Njg0MQ=="}, "originalCommit": {"oid": "317e1d0d1e71645fad8fb9b32b0f632b6c08b752"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU1ODIwNw==", "bodyText": "I found that adding tests in rest-api-spec is kind of complicated to catch the warning corresponding to different paths. So I removed all the tests! Thanks!", "url": "https://github.com/elastic/elasticsearch/pull/52930#discussion_r389558207", "createdAt": "2020-03-09T09:56:21Z", "author": {"login": "muachilin"}, "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "diffHunk": "@@ -60,6 +82,11 @@ public String getName() {\n \n     @Override\n     public RestChannelConsumer prepareRequest(final RestRequest request, final NodeClient client) throws IOException {\n+        List<String> deprecatedRoutesPath = deprecatedRoutes().stream().map(DeprecatedRoute::getPath).collect(Collectors.toList());\n+        int getDeprecatedRoutesPathIndex = deprecatedRoutesPath.indexOf(request.rawPath());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY1Njg0MQ=="}, "originalCommit": {"oid": "317e1d0d1e71645fad8fb9b32b0f632b6c08b752"}, "originalPosition": 66}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5NTM2NzIwOnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQyMjowMjo0OFrOFww8jg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQyMjozODo1MVrOFwx8sw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY3NzkwMg==", "bodyText": "I think we should deprecate this endpoint as well, in favor of /_nodes/hot_threads.", "url": "https://github.com/elastic/elasticsearch/pull/52930#discussion_r386677902", "createdAt": "2020-03-02T22:02:48Z", "author": {"login": "jasontedor"}, "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "diffHunk": "@@ -34,22 +36,42 @@\n \n import java.io.IOException;\n import java.util.List;\n+import java.util.stream.Collectors;\n \n import static org.elasticsearch.rest.RestRequest.Method.GET;\n \n-\n public class RestNodesHotThreadsAction extends BaseRestHandler {\n \n+    private static final DeprecationLogger deprecationLogger = new DeprecationLogger(\n+        LogManager.getLogger(RestNodesHotThreadsAction.class));\n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_HOTTHREADS = \"[/_cluster/nodes/hotthreads] is a deprecated endpoint. \" \n+        + \"Please use [/_cluster/nodes/hot_threads] instead.\";\n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_NODEID_HOTTHREADS = \"[/_cluster/nodes/{nodeId}/hotthreads] is a deprecated endpoint. \"\n+        + \"Please use [/_cluster/nodes/{nodeId}/hot_threads] instead.\";\n+    static final String DEPRECATED_MESSAGE_NODES_HOTTHREADS = \"[/_nodes/hotthreads] is a deprecated endpoint. \"\n+        + \"Please use [/_nodes/hot_threads] instead.\";\n+    static final String DEPRECATED_MESSAGE_NODES_NODEID_HOTTHREADS = \"[/_nodes/{nodeId}/hotthreads] is a deprecated endpoint. \"\n+        + \"Please use [/_nodes/{nodeId}/hot_threads] instead.\";\n+\n+    @Override\n+    public List<DeprecatedRoute> deprecatedRoutes() {\n+        return List.of(\n+            new DeprecatedRoute(GET, \"/_cluster/nodes/hotthreads\",\n+                    DEPRECATED_MESSAGE_CLUSTER_NODES_HOTTHREADS),\n+            new DeprecatedRoute(GET, \"/_cluster/nodes/{nodeId}/hotthreads\",\n+                    DEPRECATED_MESSAGE_CLUSTER_NODES_NODEID_HOTTHREADS),\n+            new DeprecatedRoute(GET, \"/_nodes/hotthreads\",\n+                    DEPRECATED_MESSAGE_NODES_HOTTHREADS),\n+            new DeprecatedRoute(GET, \"/_nodes/{nodeId}/hotthreads\",\n+                    DEPRECATED_MESSAGE_NODES_NODEID_HOTTHREADS));\n+    }        \n+\n     @Override\n     public List<Route> routes() {\n         return List.of(\n-            new Route(GET, \"/_cluster/nodes/hotthreads\"),\n             new Route(GET, \"/_cluster/nodes/hot_threads\"),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "317e1d0d1e71645fad8fb9b32b0f632b6c08b752"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY3OTk2NQ==", "bodyText": "You mean /_cluster/nodes/hot_threads?", "url": "https://github.com/elastic/elasticsearch/pull/52930#discussion_r386679965", "createdAt": "2020-03-02T22:07:13Z", "author": {"login": "muachilin"}, "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "diffHunk": "@@ -34,22 +36,42 @@\n \n import java.io.IOException;\n import java.util.List;\n+import java.util.stream.Collectors;\n \n import static org.elasticsearch.rest.RestRequest.Method.GET;\n \n-\n public class RestNodesHotThreadsAction extends BaseRestHandler {\n \n+    private static final DeprecationLogger deprecationLogger = new DeprecationLogger(\n+        LogManager.getLogger(RestNodesHotThreadsAction.class));\n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_HOTTHREADS = \"[/_cluster/nodes/hotthreads] is a deprecated endpoint. \" \n+        + \"Please use [/_cluster/nodes/hot_threads] instead.\";\n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_NODEID_HOTTHREADS = \"[/_cluster/nodes/{nodeId}/hotthreads] is a deprecated endpoint. \"\n+        + \"Please use [/_cluster/nodes/{nodeId}/hot_threads] instead.\";\n+    static final String DEPRECATED_MESSAGE_NODES_HOTTHREADS = \"[/_nodes/hotthreads] is a deprecated endpoint. \"\n+        + \"Please use [/_nodes/hot_threads] instead.\";\n+    static final String DEPRECATED_MESSAGE_NODES_NODEID_HOTTHREADS = \"[/_nodes/{nodeId}/hotthreads] is a deprecated endpoint. \"\n+        + \"Please use [/_nodes/{nodeId}/hot_threads] instead.\";\n+\n+    @Override\n+    public List<DeprecatedRoute> deprecatedRoutes() {\n+        return List.of(\n+            new DeprecatedRoute(GET, \"/_cluster/nodes/hotthreads\",\n+                    DEPRECATED_MESSAGE_CLUSTER_NODES_HOTTHREADS),\n+            new DeprecatedRoute(GET, \"/_cluster/nodes/{nodeId}/hotthreads\",\n+                    DEPRECATED_MESSAGE_CLUSTER_NODES_NODEID_HOTTHREADS),\n+            new DeprecatedRoute(GET, \"/_nodes/hotthreads\",\n+                    DEPRECATED_MESSAGE_NODES_HOTTHREADS),\n+            new DeprecatedRoute(GET, \"/_nodes/{nodeId}/hotthreads\",\n+                    DEPRECATED_MESSAGE_NODES_NODEID_HOTTHREADS));\n+    }        \n+\n     @Override\n     public List<Route> routes() {\n         return List.of(\n-            new Route(GET, \"/_cluster/nodes/hotthreads\"),\n             new Route(GET, \"/_cluster/nodes/hot_threads\"),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY3NzkwMg=="}, "originalCommit": {"oid": "317e1d0d1e71645fad8fb9b32b0f632b6c08b752"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY4MDc5Nw==", "bodyText": "To be clear, I left a comment on the line\n            new Route(GET, \"/_cluster/nodes/hot_threads\"),\n\nsaying that we should deprecate this, in favor of /_nodes/hot_threads. There's no need to keep around two endpoints that do the same thing. And /_cluster/nodes is odd when we use the /_nodes namespace for things that we want to invoke/collect at the node level.", "url": "https://github.com/elastic/elasticsearch/pull/52930#discussion_r386680797", "createdAt": "2020-03-02T22:08:55Z", "author": {"login": "jasontedor"}, "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "diffHunk": "@@ -34,22 +36,42 @@\n \n import java.io.IOException;\n import java.util.List;\n+import java.util.stream.Collectors;\n \n import static org.elasticsearch.rest.RestRequest.Method.GET;\n \n-\n public class RestNodesHotThreadsAction extends BaseRestHandler {\n \n+    private static final DeprecationLogger deprecationLogger = new DeprecationLogger(\n+        LogManager.getLogger(RestNodesHotThreadsAction.class));\n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_HOTTHREADS = \"[/_cluster/nodes/hotthreads] is a deprecated endpoint. \" \n+        + \"Please use [/_cluster/nodes/hot_threads] instead.\";\n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_NODEID_HOTTHREADS = \"[/_cluster/nodes/{nodeId}/hotthreads] is a deprecated endpoint. \"\n+        + \"Please use [/_cluster/nodes/{nodeId}/hot_threads] instead.\";\n+    static final String DEPRECATED_MESSAGE_NODES_HOTTHREADS = \"[/_nodes/hotthreads] is a deprecated endpoint. \"\n+        + \"Please use [/_nodes/hot_threads] instead.\";\n+    static final String DEPRECATED_MESSAGE_NODES_NODEID_HOTTHREADS = \"[/_nodes/{nodeId}/hotthreads] is a deprecated endpoint. \"\n+        + \"Please use [/_nodes/{nodeId}/hot_threads] instead.\";\n+\n+    @Override\n+    public List<DeprecatedRoute> deprecatedRoutes() {\n+        return List.of(\n+            new DeprecatedRoute(GET, \"/_cluster/nodes/hotthreads\",\n+                    DEPRECATED_MESSAGE_CLUSTER_NODES_HOTTHREADS),\n+            new DeprecatedRoute(GET, \"/_cluster/nodes/{nodeId}/hotthreads\",\n+                    DEPRECATED_MESSAGE_CLUSTER_NODES_NODEID_HOTTHREADS),\n+            new DeprecatedRoute(GET, \"/_nodes/hotthreads\",\n+                    DEPRECATED_MESSAGE_NODES_HOTTHREADS),\n+            new DeprecatedRoute(GET, \"/_nodes/{nodeId}/hotthreads\",\n+                    DEPRECATED_MESSAGE_NODES_NODEID_HOTTHREADS));\n+    }        \n+\n     @Override\n     public List<Route> routes() {\n         return List.of(\n-            new Route(GET, \"/_cluster/nodes/hotthreads\"),\n             new Route(GET, \"/_cluster/nodes/hot_threads\"),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY3NzkwMg=="}, "originalCommit": {"oid": "317e1d0d1e71645fad8fb9b32b0f632b6c08b752"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY5NDMyMw==", "bodyText": "Thanks for your explanation!", "url": "https://github.com/elastic/elasticsearch/pull/52930#discussion_r386694323", "createdAt": "2020-03-02T22:38:51Z", "author": {"login": "muachilin"}, "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "diffHunk": "@@ -34,22 +36,42 @@\n \n import java.io.IOException;\n import java.util.List;\n+import java.util.stream.Collectors;\n \n import static org.elasticsearch.rest.RestRequest.Method.GET;\n \n-\n public class RestNodesHotThreadsAction extends BaseRestHandler {\n \n+    private static final DeprecationLogger deprecationLogger = new DeprecationLogger(\n+        LogManager.getLogger(RestNodesHotThreadsAction.class));\n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_HOTTHREADS = \"[/_cluster/nodes/hotthreads] is a deprecated endpoint. \" \n+        + \"Please use [/_cluster/nodes/hot_threads] instead.\";\n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_NODEID_HOTTHREADS = \"[/_cluster/nodes/{nodeId}/hotthreads] is a deprecated endpoint. \"\n+        + \"Please use [/_cluster/nodes/{nodeId}/hot_threads] instead.\";\n+    static final String DEPRECATED_MESSAGE_NODES_HOTTHREADS = \"[/_nodes/hotthreads] is a deprecated endpoint. \"\n+        + \"Please use [/_nodes/hot_threads] instead.\";\n+    static final String DEPRECATED_MESSAGE_NODES_NODEID_HOTTHREADS = \"[/_nodes/{nodeId}/hotthreads] is a deprecated endpoint. \"\n+        + \"Please use [/_nodes/{nodeId}/hot_threads] instead.\";\n+\n+    @Override\n+    public List<DeprecatedRoute> deprecatedRoutes() {\n+        return List.of(\n+            new DeprecatedRoute(GET, \"/_cluster/nodes/hotthreads\",\n+                    DEPRECATED_MESSAGE_CLUSTER_NODES_HOTTHREADS),\n+            new DeprecatedRoute(GET, \"/_cluster/nodes/{nodeId}/hotthreads\",\n+                    DEPRECATED_MESSAGE_CLUSTER_NODES_NODEID_HOTTHREADS),\n+            new DeprecatedRoute(GET, \"/_nodes/hotthreads\",\n+                    DEPRECATED_MESSAGE_NODES_HOTTHREADS),\n+            new DeprecatedRoute(GET, \"/_nodes/{nodeId}/hotthreads\",\n+                    DEPRECATED_MESSAGE_NODES_NODEID_HOTTHREADS));\n+    }        \n+\n     @Override\n     public List<Route> routes() {\n         return List.of(\n-            new Route(GET, \"/_cluster/nodes/hotthreads\"),\n             new Route(GET, \"/_cluster/nodes/hot_threads\"),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY3NzkwMg=="}, "originalCommit": {"oid": "317e1d0d1e71645fad8fb9b32b0f632b6c08b752"}, "originalPosition": 52}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5NTM2ODcwOnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQyMjowMzoxMlrOFww9WQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQyMjowNzo0NVrOFwxFhQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY3ODEwNQ==", "bodyText": "I think we should deprecate this endpoint as well, in favor of /_nodes/{nodeId}/hot_threads.", "url": "https://github.com/elastic/elasticsearch/pull/52930#discussion_r386678105", "createdAt": "2020-03-02T22:03:12Z", "author": {"login": "jasontedor"}, "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "diffHunk": "@@ -34,22 +36,42 @@\n \n import java.io.IOException;\n import java.util.List;\n+import java.util.stream.Collectors;\n \n import static org.elasticsearch.rest.RestRequest.Method.GET;\n \n-\n public class RestNodesHotThreadsAction extends BaseRestHandler {\n \n+    private static final DeprecationLogger deprecationLogger = new DeprecationLogger(\n+        LogManager.getLogger(RestNodesHotThreadsAction.class));\n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_HOTTHREADS = \"[/_cluster/nodes/hotthreads] is a deprecated endpoint. \" \n+        + \"Please use [/_cluster/nodes/hot_threads] instead.\";\n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_NODEID_HOTTHREADS = \"[/_cluster/nodes/{nodeId}/hotthreads] is a deprecated endpoint. \"\n+        + \"Please use [/_cluster/nodes/{nodeId}/hot_threads] instead.\";\n+    static final String DEPRECATED_MESSAGE_NODES_HOTTHREADS = \"[/_nodes/hotthreads] is a deprecated endpoint. \"\n+        + \"Please use [/_nodes/hot_threads] instead.\";\n+    static final String DEPRECATED_MESSAGE_NODES_NODEID_HOTTHREADS = \"[/_nodes/{nodeId}/hotthreads] is a deprecated endpoint. \"\n+        + \"Please use [/_nodes/{nodeId}/hot_threads] instead.\";\n+\n+    @Override\n+    public List<DeprecatedRoute> deprecatedRoutes() {\n+        return List.of(\n+            new DeprecatedRoute(GET, \"/_cluster/nodes/hotthreads\",\n+                    DEPRECATED_MESSAGE_CLUSTER_NODES_HOTTHREADS),\n+            new DeprecatedRoute(GET, \"/_cluster/nodes/{nodeId}/hotthreads\",\n+                    DEPRECATED_MESSAGE_CLUSTER_NODES_NODEID_HOTTHREADS),\n+            new DeprecatedRoute(GET, \"/_nodes/hotthreads\",\n+                    DEPRECATED_MESSAGE_NODES_HOTTHREADS),\n+            new DeprecatedRoute(GET, \"/_nodes/{nodeId}/hotthreads\",\n+                    DEPRECATED_MESSAGE_NODES_NODEID_HOTTHREADS));\n+    }        \n+\n     @Override\n     public List<Route> routes() {\n         return List.of(\n-            new Route(GET, \"/_cluster/nodes/hotthreads\"),\n             new Route(GET, \"/_cluster/nodes/hot_threads\"),\n-            new Route(GET, \"/_cluster/nodes/{nodeId}/hotthreads\"),\n             new Route(GET, \"/_cluster/nodes/{nodeId}/hot_threads\"),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "317e1d0d1e71645fad8fb9b32b0f632b6c08b752"}, "originalPosition": 54}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY4MDE5Nw==", "bodyText": "Yo mean I also have to remove this line \"/_cluster/nodes/{nodeId}/hot_threads\"?", "url": "https://github.com/elastic/elasticsearch/pull/52930#discussion_r386680197", "createdAt": "2020-03-02T22:07:45Z", "author": {"login": "muachilin"}, "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "diffHunk": "@@ -34,22 +36,42 @@\n \n import java.io.IOException;\n import java.util.List;\n+import java.util.stream.Collectors;\n \n import static org.elasticsearch.rest.RestRequest.Method.GET;\n \n-\n public class RestNodesHotThreadsAction extends BaseRestHandler {\n \n+    private static final DeprecationLogger deprecationLogger = new DeprecationLogger(\n+        LogManager.getLogger(RestNodesHotThreadsAction.class));\n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_HOTTHREADS = \"[/_cluster/nodes/hotthreads] is a deprecated endpoint. \" \n+        + \"Please use [/_cluster/nodes/hot_threads] instead.\";\n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_NODEID_HOTTHREADS = \"[/_cluster/nodes/{nodeId}/hotthreads] is a deprecated endpoint. \"\n+        + \"Please use [/_cluster/nodes/{nodeId}/hot_threads] instead.\";\n+    static final String DEPRECATED_MESSAGE_NODES_HOTTHREADS = \"[/_nodes/hotthreads] is a deprecated endpoint. \"\n+        + \"Please use [/_nodes/hot_threads] instead.\";\n+    static final String DEPRECATED_MESSAGE_NODES_NODEID_HOTTHREADS = \"[/_nodes/{nodeId}/hotthreads] is a deprecated endpoint. \"\n+        + \"Please use [/_nodes/{nodeId}/hot_threads] instead.\";\n+\n+    @Override\n+    public List<DeprecatedRoute> deprecatedRoutes() {\n+        return List.of(\n+            new DeprecatedRoute(GET, \"/_cluster/nodes/hotthreads\",\n+                    DEPRECATED_MESSAGE_CLUSTER_NODES_HOTTHREADS),\n+            new DeprecatedRoute(GET, \"/_cluster/nodes/{nodeId}/hotthreads\",\n+                    DEPRECATED_MESSAGE_CLUSTER_NODES_NODEID_HOTTHREADS),\n+            new DeprecatedRoute(GET, \"/_nodes/hotthreads\",\n+                    DEPRECATED_MESSAGE_NODES_HOTTHREADS),\n+            new DeprecatedRoute(GET, \"/_nodes/{nodeId}/hotthreads\",\n+                    DEPRECATED_MESSAGE_NODES_NODEID_HOTTHREADS));\n+    }        \n+\n     @Override\n     public List<Route> routes() {\n         return List.of(\n-            new Route(GET, \"/_cluster/nodes/hotthreads\"),\n             new Route(GET, \"/_cluster/nodes/hot_threads\"),\n-            new Route(GET, \"/_cluster/nodes/{nodeId}/hotthreads\"),\n             new Route(GET, \"/_cluster/nodes/{nodeId}/hot_threads\"),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY3ODEwNQ=="}, "originalCommit": {"oid": "317e1d0d1e71645fad8fb9b32b0f632b6c08b752"}, "originalPosition": 54}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxMjY0OTM1OnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOFQxMToxNjo1NFrOFzUmIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOFQxMToxNjo1NFrOFzUmIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM1OTEzNg==", "bodyText": "Just question: Should we also use private here?\nConsider use String.format() rather than concat string due to better performance, better readability.", "url": "https://github.com/elastic/elasticsearch/pull/52930#discussion_r389359136", "createdAt": "2020-03-08T11:16:54Z", "author": {"login": "changjenyin"}, "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "diffHunk": "@@ -34,22 +36,42 @@\n \n import java.io.IOException;\n import java.util.List;\n+import java.util.stream.Collectors;\n \n import static org.elasticsearch.rest.RestRequest.Method.GET;\n \n-\n public class RestNodesHotThreadsAction extends BaseRestHandler {\n \n+    private static final DeprecationLogger deprecationLogger = new DeprecationLogger(\n+        LogManager.getLogger(RestNodesHotThreadsAction.class));\n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_HOTTHREADS = \"[/_cluster/nodes/hotthreads] is a deprecated endpoint. \" ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "317e1d0d1e71645fad8fb9b32b0f632b6c08b752"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxMjY0OTY0OnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOFQxMToxNzo1N1rOFzUmTA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOFQxMToyMzozNFrOFzUn7w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM1OTE4MA==", "bodyText": "Please avoid using non-const string all over the place, maybe consider to make repeatedly string const.", "url": "https://github.com/elastic/elasticsearch/pull/52930#discussion_r389359180", "createdAt": "2020-03-08T11:17:57Z", "author": {"login": "changjenyin"}, "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "diffHunk": "@@ -34,22 +36,42 @@\n \n import java.io.IOException;\n import java.util.List;\n+import java.util.stream.Collectors;\n \n import static org.elasticsearch.rest.RestRequest.Method.GET;\n \n-\n public class RestNodesHotThreadsAction extends BaseRestHandler {\n \n+    private static final DeprecationLogger deprecationLogger = new DeprecationLogger(\n+        LogManager.getLogger(RestNodesHotThreadsAction.class));\n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_HOTTHREADS = \"[/_cluster/nodes/hotthreads] is a deprecated endpoint. \" \n+        + \"Please use [/_cluster/nodes/hot_threads] instead.\";\n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_NODEID_HOTTHREADS = \"[/_cluster/nodes/{nodeId}/hotthreads] is a deprecated endpoint. \"\n+        + \"Please use [/_cluster/nodes/{nodeId}/hot_threads] instead.\";\n+    static final String DEPRECATED_MESSAGE_NODES_HOTTHREADS = \"[/_nodes/hotthreads] is a deprecated endpoint. \"\n+        + \"Please use [/_nodes/hot_threads] instead.\";\n+    static final String DEPRECATED_MESSAGE_NODES_NODEID_HOTTHREADS = \"[/_nodes/{nodeId}/hotthreads] is a deprecated endpoint. \"\n+        + \"Please use [/_nodes/{nodeId}/hot_threads] instead.\";\n+\n+    @Override\n+    public List<DeprecatedRoute> deprecatedRoutes() {\n+        return List.of(\n+            new DeprecatedRoute(GET, \"/_cluster/nodes/hotthreads\",\n+                    DEPRECATED_MESSAGE_CLUSTER_NODES_HOTTHREADS),\n+            new DeprecatedRoute(GET, \"/_cluster/nodes/{nodeId}/hotthreads\",\n+                    DEPRECATED_MESSAGE_CLUSTER_NODES_NODEID_HOTTHREADS),\n+            new DeprecatedRoute(GET, \"/_nodes/hotthreads\",\n+                    DEPRECATED_MESSAGE_NODES_HOTTHREADS),\n+            new DeprecatedRoute(GET, \"/_nodes/{nodeId}/hotthreads\",\n+                    DEPRECATED_MESSAGE_NODES_NODEID_HOTTHREADS));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "317e1d0d1e71645fad8fb9b32b0f632b6c08b752"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM1OTU5OQ==", "bodyText": "I see! Thanks :)", "url": "https://github.com/elastic/elasticsearch/pull/52930#discussion_r389359599", "createdAt": "2020-03-08T11:23:34Z", "author": {"login": "muachilin"}, "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "diffHunk": "@@ -34,22 +36,42 @@\n \n import java.io.IOException;\n import java.util.List;\n+import java.util.stream.Collectors;\n \n import static org.elasticsearch.rest.RestRequest.Method.GET;\n \n-\n public class RestNodesHotThreadsAction extends BaseRestHandler {\n \n+    private static final DeprecationLogger deprecationLogger = new DeprecationLogger(\n+        LogManager.getLogger(RestNodesHotThreadsAction.class));\n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_HOTTHREADS = \"[/_cluster/nodes/hotthreads] is a deprecated endpoint. \" \n+        + \"Please use [/_cluster/nodes/hot_threads] instead.\";\n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_NODEID_HOTTHREADS = \"[/_cluster/nodes/{nodeId}/hotthreads] is a deprecated endpoint. \"\n+        + \"Please use [/_cluster/nodes/{nodeId}/hot_threads] instead.\";\n+    static final String DEPRECATED_MESSAGE_NODES_HOTTHREADS = \"[/_nodes/hotthreads] is a deprecated endpoint. \"\n+        + \"Please use [/_nodes/hot_threads] instead.\";\n+    static final String DEPRECATED_MESSAGE_NODES_NODEID_HOTTHREADS = \"[/_nodes/{nodeId}/hotthreads] is a deprecated endpoint. \"\n+        + \"Please use [/_nodes/{nodeId}/hot_threads] instead.\";\n+\n+    @Override\n+    public List<DeprecatedRoute> deprecatedRoutes() {\n+        return List.of(\n+            new DeprecatedRoute(GET, \"/_cluster/nodes/hotthreads\",\n+                    DEPRECATED_MESSAGE_CLUSTER_NODES_HOTTHREADS),\n+            new DeprecatedRoute(GET, \"/_cluster/nodes/{nodeId}/hotthreads\",\n+                    DEPRECATED_MESSAGE_CLUSTER_NODES_NODEID_HOTTHREADS),\n+            new DeprecatedRoute(GET, \"/_nodes/hotthreads\",\n+                    DEPRECATED_MESSAGE_NODES_HOTTHREADS),\n+            new DeprecatedRoute(GET, \"/_nodes/{nodeId}/hotthreads\",\n+                    DEPRECATED_MESSAGE_NODES_NODEID_HOTTHREADS));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM1OTE4MA=="}, "originalCommit": {"oid": "317e1d0d1e71645fad8fb9b32b0f632b6c08b752"}, "originalPosition": 45}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMTI0NDg3OnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwMTowOTo1OFrOF0mK3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxNTozNDozNVrOF08dtA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY5NTY0NA==", "bodyText": "What's the reason for declaring all of these local variables?", "url": "https://github.com/elastic/elasticsearch/pull/52930#discussion_r390695644", "createdAt": "2020-03-11T01:09:58Z", "author": {"login": "jasontedor"}, "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "diffHunk": "@@ -37,20 +37,46 @@\n \n import static org.elasticsearch.rest.RestRequest.Method.GET;\n \n-\n public class RestNodesHotThreadsAction extends BaseRestHandler {\n \n+    static final String formatDeprecatedMessageWithoutNodeID = \"%s is a deprecated endpoint. Please use [/nodes/hot_threads] instead.\";\n+    static final String formatDeprecatedMessageWithNodeID = \"%s is a deprecated endpoint. Please use [/nodes/{nodeId}/hot_threads] instead.\";\n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_HOT_THREADS = String.format(formatDeprecatedMessageWithoutNodeID, \"[/_cluster/nodes/hot_threads]\"); \n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_NODEID_HOT_THREADS = String.format(formatDeprecatedMessageWithNodeID, \"[/_cluster/nodes/{nodeId}/hot_threads]\");\n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_HOTTHREADS = String.format(formatDeprecatedMessageWithoutNodeID, \"[/_cluster/nodes/hotthreads]\"); \n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_NODEID_HOTTHREADS = String.format(formatDeprecatedMessageWithNodeID, \"[/_cluster/nodes/{nodeId}/hotthreads]\"); \n+    static final String DEPRECATED_MESSAGE_NODES_HOTTHREADS = String.format(formatDeprecatedMessageWithoutNodeID, \"[/_nodes/hotthreads]\"); \n+    static final String DEPRECATED_MESSAGE_NODES_NODEID_HOTTHREADS = String.format(formatDeprecatedMessageWithNodeID, \"[/_nodes/{nodeId}/hotthreads]\");\n+\n+    @Override\n+    public List<DeprecatedRoute> deprecatedRoutes() {\n+        final String DEPRECATED_PATH_CLUSTER_NODES_HOT_THREADS = \"/_cluster/nodes/hot_threads\";\n+        final String DEPRECATED_PATH_CLUSTER_NODES_NODEID_HOT_THREADS = \"/_cluster/nodes/{nodeId}/hot_threads\";\n+        final String DEPRECATED_PATH_CLUSTER_NODES_HOTTHREADS = \"/_cluster/nodes/hotthreads\";\n+        final String DEPRECATED_PATH_CLUSTER_NODES_NODEID_HOTTHREADS = \"/_cluster/nodes/{nodeId}/hotthreads\";\n+        final String DEPRECATED_PATH_NODES_HOTTHREADS = \"/_nodes/hotthreads\";\n+        final String DEPRECATED_PATH_NODES_NODEID_HOTTHREADS = \"/_nodes/{nodeId}/hotthreads\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "842e1f60601a3c3eab8bcbb10d80e18bc8d28925"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTA2MDkxNg==", "bodyText": "I originally thought that it is easier to read. But these local variables will not be used afterwards. So I removed them!", "url": "https://github.com/elastic/elasticsearch/pull/52930#discussion_r391060916", "createdAt": "2020-03-11T15:34:35Z", "author": {"login": "muachilin"}, "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "diffHunk": "@@ -37,20 +37,46 @@\n \n import static org.elasticsearch.rest.RestRequest.Method.GET;\n \n-\n public class RestNodesHotThreadsAction extends BaseRestHandler {\n \n+    static final String formatDeprecatedMessageWithoutNodeID = \"%s is a deprecated endpoint. Please use [/nodes/hot_threads] instead.\";\n+    static final String formatDeprecatedMessageWithNodeID = \"%s is a deprecated endpoint. Please use [/nodes/{nodeId}/hot_threads] instead.\";\n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_HOT_THREADS = String.format(formatDeprecatedMessageWithoutNodeID, \"[/_cluster/nodes/hot_threads]\"); \n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_NODEID_HOT_THREADS = String.format(formatDeprecatedMessageWithNodeID, \"[/_cluster/nodes/{nodeId}/hot_threads]\");\n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_HOTTHREADS = String.format(formatDeprecatedMessageWithoutNodeID, \"[/_cluster/nodes/hotthreads]\"); \n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_NODEID_HOTTHREADS = String.format(formatDeprecatedMessageWithNodeID, \"[/_cluster/nodes/{nodeId}/hotthreads]\"); \n+    static final String DEPRECATED_MESSAGE_NODES_HOTTHREADS = String.format(formatDeprecatedMessageWithoutNodeID, \"[/_nodes/hotthreads]\"); \n+    static final String DEPRECATED_MESSAGE_NODES_NODEID_HOTTHREADS = String.format(formatDeprecatedMessageWithNodeID, \"[/_nodes/{nodeId}/hotthreads]\");\n+\n+    @Override\n+    public List<DeprecatedRoute> deprecatedRoutes() {\n+        final String DEPRECATED_PATH_CLUSTER_NODES_HOT_THREADS = \"/_cluster/nodes/hot_threads\";\n+        final String DEPRECATED_PATH_CLUSTER_NODES_NODEID_HOT_THREADS = \"/_cluster/nodes/{nodeId}/hot_threads\";\n+        final String DEPRECATED_PATH_CLUSTER_NODES_HOTTHREADS = \"/_cluster/nodes/hotthreads\";\n+        final String DEPRECATED_PATH_CLUSTER_NODES_NODEID_HOTTHREADS = \"/_cluster/nodes/{nodeId}/hotthreads\";\n+        final String DEPRECATED_PATH_NODES_HOTTHREADS = \"/_nodes/hotthreads\";\n+        final String DEPRECATED_PATH_NODES_NODEID_HOTTHREADS = \"/_nodes/{nodeId}/hotthreads\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY5NTY0NA=="}, "originalCommit": {"oid": "842e1f60601a3c3eab8bcbb10d80e18bc8d28925"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMTI4ODMyOnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwMTozOTo0MlrOF0mlOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxNTozNDo1OFrOF08exw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDcwMjM5Mg==", "bodyText": "You'll need to use the locale version of String#format and pass Locale.ROOT.", "url": "https://github.com/elastic/elasticsearch/pull/52930#discussion_r390702392", "createdAt": "2020-03-11T01:39:42Z", "author": {"login": "jasontedor"}, "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "diffHunk": "@@ -37,20 +37,46 @@\n \n import static org.elasticsearch.rest.RestRequest.Method.GET;\n \n-\n public class RestNodesHotThreadsAction extends BaseRestHandler {\n \n+    static final String formatDeprecatedMessageWithoutNodeID = \"%s is a deprecated endpoint. Please use [/nodes/hot_threads] instead.\";\n+    static final String formatDeprecatedMessageWithNodeID = \"%s is a deprecated endpoint. Please use [/nodes/{nodeId}/hot_threads] instead.\";\n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_HOT_THREADS = String.format(formatDeprecatedMessageWithoutNodeID, \"[/_cluster/nodes/hot_threads]\"); \n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_NODEID_HOT_THREADS = String.format(formatDeprecatedMessageWithNodeID, \"[/_cluster/nodes/{nodeId}/hot_threads]\");\n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_HOTTHREADS = String.format(formatDeprecatedMessageWithoutNodeID, \"[/_cluster/nodes/hotthreads]\"); \n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_NODEID_HOTTHREADS = String.format(formatDeprecatedMessageWithNodeID, \"[/_cluster/nodes/{nodeId}/hotthreads]\"); \n+    static final String DEPRECATED_MESSAGE_NODES_HOTTHREADS = String.format(formatDeprecatedMessageWithoutNodeID, \"[/_nodes/hotthreads]\"); \n+    static final String DEPRECATED_MESSAGE_NODES_NODEID_HOTTHREADS = String.format(formatDeprecatedMessageWithNodeID, \"[/_nodes/{nodeId}/hotthreads]\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "842e1f60601a3c3eab8bcbb10d80e18bc8d28925"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTA2MTAwNw==", "bodyText": "Okay!", "url": "https://github.com/elastic/elasticsearch/pull/52930#discussion_r391061007", "createdAt": "2020-03-11T15:34:42Z", "author": {"login": "muachilin"}, "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "diffHunk": "@@ -37,20 +37,46 @@\n \n import static org.elasticsearch.rest.RestRequest.Method.GET;\n \n-\n public class RestNodesHotThreadsAction extends BaseRestHandler {\n \n+    static final String formatDeprecatedMessageWithoutNodeID = \"%s is a deprecated endpoint. Please use [/nodes/hot_threads] instead.\";\n+    static final String formatDeprecatedMessageWithNodeID = \"%s is a deprecated endpoint. Please use [/nodes/{nodeId}/hot_threads] instead.\";\n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_HOT_THREADS = String.format(formatDeprecatedMessageWithoutNodeID, \"[/_cluster/nodes/hot_threads]\"); \n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_NODEID_HOT_THREADS = String.format(formatDeprecatedMessageWithNodeID, \"[/_cluster/nodes/{nodeId}/hot_threads]\");\n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_HOTTHREADS = String.format(formatDeprecatedMessageWithoutNodeID, \"[/_cluster/nodes/hotthreads]\"); \n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_NODEID_HOTTHREADS = String.format(formatDeprecatedMessageWithNodeID, \"[/_cluster/nodes/{nodeId}/hotthreads]\"); \n+    static final String DEPRECATED_MESSAGE_NODES_HOTTHREADS = String.format(formatDeprecatedMessageWithoutNodeID, \"[/_nodes/hotthreads]\"); \n+    static final String DEPRECATED_MESSAGE_NODES_NODEID_HOTTHREADS = String.format(formatDeprecatedMessageWithNodeID, \"[/_nodes/{nodeId}/hotthreads]\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDcwMjM5Mg=="}, "originalCommit": {"oid": "842e1f60601a3c3eab8bcbb10d80e18bc8d28925"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTA2MTE5MQ==", "bodyText": "Thank you :)", "url": "https://github.com/elastic/elasticsearch/pull/52930#discussion_r391061191", "createdAt": "2020-03-11T15:34:58Z", "author": {"login": "muachilin"}, "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "diffHunk": "@@ -37,20 +37,46 @@\n \n import static org.elasticsearch.rest.RestRequest.Method.GET;\n \n-\n public class RestNodesHotThreadsAction extends BaseRestHandler {\n \n+    static final String formatDeprecatedMessageWithoutNodeID = \"%s is a deprecated endpoint. Please use [/nodes/hot_threads] instead.\";\n+    static final String formatDeprecatedMessageWithNodeID = \"%s is a deprecated endpoint. Please use [/nodes/{nodeId}/hot_threads] instead.\";\n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_HOT_THREADS = String.format(formatDeprecatedMessageWithoutNodeID, \"[/_cluster/nodes/hot_threads]\"); \n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_NODEID_HOT_THREADS = String.format(formatDeprecatedMessageWithNodeID, \"[/_cluster/nodes/{nodeId}/hot_threads]\");\n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_HOTTHREADS = String.format(formatDeprecatedMessageWithoutNodeID, \"[/_cluster/nodes/hotthreads]\"); \n+    static final String DEPRECATED_MESSAGE_CLUSTER_NODES_NODEID_HOTTHREADS = String.format(formatDeprecatedMessageWithNodeID, \"[/_cluster/nodes/{nodeId}/hotthreads]\"); \n+    static final String DEPRECATED_MESSAGE_NODES_HOTTHREADS = String.format(formatDeprecatedMessageWithoutNodeID, \"[/_nodes/hotthreads]\"); \n+    static final String DEPRECATED_MESSAGE_NODES_NODEID_HOTTHREADS = String.format(formatDeprecatedMessageWithNodeID, \"[/_nodes/{nodeId}/hotthreads]\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDcwMjM5Mg=="}, "originalCommit": {"oid": "842e1f60601a3c3eab8bcbb10d80e18bc8d28925"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyOTM5ODU3OnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QwMToyODoxNVrOF104cA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QxNTo0MTo0NVrOF2IiYA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTk4NTI2NA==", "bodyText": "These can all be private now.", "url": "https://github.com/elastic/elasticsearch/pull/52930#discussion_r391985264", "createdAt": "2020-03-13T01:28:15Z", "author": {"login": "jasontedor"}, "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "diffHunk": "@@ -34,23 +34,62 @@\n \n import java.io.IOException;\n import java.util.List;\n+import java.util.Locale;\n \n import static org.elasticsearch.rest.RestRequest.Method.GET;\n \n-\n public class RestNodesHotThreadsAction extends BaseRestHandler {\n \n+    static final String formatDeprecatedMessageWithoutNodeID = \"[%s] is a deprecated endpoint. Please use [/nodes/hot_threads] instead.\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f828b754c952b530dba65ec09d75a91dca985772"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjMwNzI5Ng==", "bodyText": "I have signed the CLA but I did not get any confirmation email or other notification to indicate that I have successfully signed it. Thanks!", "url": "https://github.com/elastic/elasticsearch/pull/52930#discussion_r392307296", "createdAt": "2020-03-13T15:41:45Z", "author": {"login": "muachilin"}, "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "diffHunk": "@@ -34,23 +34,62 @@\n \n import java.io.IOException;\n import java.util.List;\n+import java.util.Locale;\n \n import static org.elasticsearch.rest.RestRequest.Method.GET;\n \n-\n public class RestNodesHotThreadsAction extends BaseRestHandler {\n \n+    static final String formatDeprecatedMessageWithoutNodeID = \"[%s] is a deprecated endpoint. Please use [/nodes/hot_threads] instead.\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTk4NTI2NA=="}, "originalCommit": {"oid": "f828b754c952b530dba65ec09d75a91dca985772"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1MDYzNTQyOnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQyMzozMDozOVrOF5Dy9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMlQxNTo1NToyM1rOF5wlRA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM3NTM0OQ==", "bodyText": "Sorry, I just noticed this should say \"/_nodes\" and not \"/nodes\". Same for the next line.", "url": "https://github.com/elastic/elasticsearch/pull/52930#discussion_r395375349", "createdAt": "2020-03-19T23:30:39Z", "author": {"login": "jasontedor"}, "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "diffHunk": "@@ -34,23 +34,64 @@\n \n import java.io.IOException;\n import java.util.List;\n+import java.util.Locale;\n \n import static org.elasticsearch.rest.RestRequest.Method.GET;\n \n-\n public class RestNodesHotThreadsAction extends BaseRestHandler {\n \n+    private static final String formatDeprecatedMessageWithoutNodeID = \"[%s] is a deprecated endpoint. \" + \n+        \"Please use [/nodes/hot_threads] instead.\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5f6b8d3c1e92aab6259d2d43cf25edd5887c66bf"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjEwOTEyNA==", "bodyText": "No problem! Thanks.", "url": "https://github.com/elastic/elasticsearch/pull/52930#discussion_r396109124", "createdAt": "2020-03-22T15:55:23Z", "author": {"login": "muachilin"}, "path": "server/src/main/java/org/elasticsearch/rest/action/admin/cluster/RestNodesHotThreadsAction.java", "diffHunk": "@@ -34,23 +34,64 @@\n \n import java.io.IOException;\n import java.util.List;\n+import java.util.Locale;\n \n import static org.elasticsearch.rest.RestRequest.Method.GET;\n \n-\n public class RestNodesHotThreadsAction extends BaseRestHandler {\n \n+    private static final String formatDeprecatedMessageWithoutNodeID = \"[%s] is a deprecated endpoint. \" + \n+        \"Please use [/nodes/hot_threads] instead.\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM3NTM0OQ=="}, "originalCommit": {"oid": "5f6b8d3c1e92aab6259d2d43cf25edd5887c66bf"}, "originalPosition": 12}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3716, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}