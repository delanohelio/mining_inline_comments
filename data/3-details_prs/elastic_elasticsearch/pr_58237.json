{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM1NzYwOTgw", "number": 58237, "title": "Remove Settings parameter from FieldMapper base class", "bodyText": "This is currently used to set the indexVersionCreated parameter on FieldMapper.\nHowever, this parameter is only actually used by two implementations, and clutters\nthe API considerably.  We should just remove it, and use it directly in the\nimplementations that require it.", "createdAt": "2020-06-17T10:36:05Z", "url": "https://github.com/elastic/elasticsearch/pull/58237", "merged": true, "mergeCommit": {"oid": "09ff747fe7479f9c695725ec642315cf0343a533"}, "closed": true, "closedAt": "2020-06-18T11:39:49Z", "author": {"login": "romseygeek"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcsHXJVAH2gAyNDM1NzYwOTgwOjlhYWZmNGM1YmZiZDdjYTQxNmY3ZmUzMzViZDBiN2Q1ZjJmNDg0NmY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcsb1qYAH2gAyNDM1NzYwOTgwOmE4MTY1OTdhMjdhNDBkMzgzNTRiNTQxZDlhNGY1YTg2ZGQ5ZDg5NWI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9aaff4c5bfbd7ca416f7fe335bd0b7d5f2f4846f", "author": {"user": {"login": "romseygeek", "name": "Alan Woodward"}}, "url": "https://github.com/elastic/elasticsearch/commit/9aaff4c5bfbd7ca416f7fe335bd0b7d5f2f4846f", "committedDate": "2020-06-17T10:33:22Z", "message": "Remove Settings parameter from FieldMapper base class"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyNTM2OTUz", "url": "https://github.com/elastic/elasticsearch/pull/58237#pullrequestreview-432536953", "createdAt": "2020-06-17T15:45:49Z", "commit": {"oid": "9aaff4c5bfbd7ca416f7fe335bd0b7d5f2f4846f"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxNTo0NTo0OVrOGlL-3g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxNTo0NTo0OVrOGlL-3g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTY0NjgxNA==", "bodyText": "I thought I'd never see a point where we use the settings at this stage in the PR ;-)", "url": "https://github.com/elastic/elasticsearch/pull/58237#discussion_r441646814", "createdAt": "2020-06-17T15:45:49Z", "author": {"login": "cbuescher"}, "path": "server/src/main/java/org/elasticsearch/index/mapper/LegacyGeoShapeFieldMapper.java", "diffHunk": "@@ -420,12 +420,15 @@ public PrefixTreeStrategy resolvePrefixTreeStrategy(String strategyName) {\n         }\n     }\n \n+    private final Version indexCreatedVersion;\n+\n     public LegacyGeoShapeFieldMapper(String simpleName, FieldType fieldType, MappedFieldType mappedFieldType,\n                                      Explicit<Boolean> ignoreMalformed, Explicit<Boolean> coerce, Explicit<Orientation> orientation,\n                                      Explicit<Boolean> ignoreZValue, Settings indexSettings,\n                                      MultiFields multiFields, CopyTo copyTo) {\n-        super(simpleName, fieldType, mappedFieldType, ignoreMalformed, coerce, ignoreZValue, orientation, indexSettings,\n+        super(simpleName, fieldType, mappedFieldType, ignoreMalformed, coerce, ignoreZValue, orientation,\n             multiFields, copyTo);\n+        this.indexCreatedVersion = Version.indexCreated(indexSettings);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9aaff4c5bfbd7ca416f7fe335bd0b7d5f2f4846f"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzMTM3MDk0", "url": "https://github.com/elastic/elasticsearch/pull/58237#pullrequestreview-433137094", "createdAt": "2020-06-18T10:10:48Z", "commit": {"oid": "9aaff4c5bfbd7ca416f7fe335bd0b7d5f2f4846f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxMDoxMDo0OFrOGlowgw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxMDoxMDo0OFrOGlowgw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjExODI3NQ==", "bodyText": "Here's the second use!", "url": "https://github.com/elastic/elasticsearch/pull/58237#discussion_r442118275", "createdAt": "2020-06-18T10:10:48Z", "author": {"login": "romseygeek"}, "path": "x-pack/plugin/vectors/src/main/java/org/elasticsearch/xpack/vectors/mapper/DenseVectorFieldMapper.java", "diffHunk": "@@ -144,10 +144,13 @@ public Query termQuery(Object value, QueryShardContext context) {\n         }\n     }\n \n+    private final Version indexCreatedVersion;\n+\n     private DenseVectorFieldMapper(String simpleName, FieldType fieldType, MappedFieldType mappedFieldType,\n                                    Settings indexSettings, MultiFields multiFields, CopyTo copyTo) {\n-        super(simpleName, fieldType, mappedFieldType, indexSettings, multiFields, copyTo);\n+        super(simpleName, fieldType, mappedFieldType, multiFields, copyTo);\n         assert fieldType.indexOptions() == IndexOptions.NONE;\n+        this.indexCreatedVersion = Version.indexCreated(indexSettings);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9aaff4c5bfbd7ca416f7fe335bd0b7d5f2f4846f"}, "originalPosition": 11}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a816597a27a40d38354b541d9a4f5a86dd9d895b", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/a816597a27a40d38354b541d9a4f5a86dd9d895b", "committedDate": "2020-06-18T10:24:48Z", "message": "Merge branch 'master' into mapper/no-index-settings"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 600, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}