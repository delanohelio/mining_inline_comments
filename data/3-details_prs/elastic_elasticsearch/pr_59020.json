{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ0MDg3Mjk4", "number": 59020, "title": "Add Support in geo_match enrichment policy for any type of geometry", "bodyText": "geo_match enrichment currently supports only points. This PR adds support for any type of geometry.\ncloses #58936", "createdAt": "2020-07-03T14:31:22Z", "url": "https://github.com/elastic/elasticsearch/pull/59020", "merged": true, "mergeCommit": {"oid": "486d9a5e8ef52bff37f9bd4cf4cd3c751dd8cbe3"}, "closed": true, "closedAt": "2020-07-09T06:34:37Z", "author": {"login": "iverase"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcxURBgAH2gAyNDQ0MDg3Mjk4OjdlNWM4ZWE3ZTI4ZjM2ZTc3OTg3ODViNmZkYTIyZjBlZTQxNDM0M2Q=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcykxw5AH2gAyNDQ0MDg3Mjk4OjNiODA0NDBkOGU2MjkwNDE0NWU2ODNhNDNiYjIwNDE0ZDlmNTAzZGQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7e5c8ea7e28f36e7798785b6fda22f0ee414343d", "author": {"user": {"login": "iverase", "name": "Ignacio Vera"}}, "url": "https://github.com/elastic/elasticsearch/commit/7e5c8ea7e28f36e7798785b6fda22f0ee414343d", "committedDate": "2020-07-03T14:25:04Z", "message": "make geomatch works on generic shapes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "796d27b45238d7f1007df4375b8967c5b1dff60e", "author": {"user": {"login": "iverase", "name": "Ignacio Vera"}}, "url": "https://github.com/elastic/elasticsearch/commit/796d27b45238d7f1007df4375b8967c5b1dff60e", "committedDate": "2020-07-03T14:32:39Z", "message": "unused imports"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "797932fac6df253ab13a743d501147e087d0ea78", "author": {"user": {"login": "iverase", "name": "Ignacio Vera"}}, "url": "https://github.com/elastic/elasticsearch/commit/797932fac6df253ab13a743d501147e087d0ea78", "committedDate": "2020-07-03T14:51:54Z", "message": "potlessJavaCheck"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "979f0b18aed3a1680aad112045858ecceb96ba89", "author": {"user": {"login": "iverase", "name": "Ignacio Vera"}}, "url": "https://github.com/elastic/elasticsearch/commit/979f0b18aed3a1680aad112045858ecceb96ba89", "committedDate": "2020-07-04T15:33:57Z", "message": "polygon / line decomposition already implemented in the query builder"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa1a12e5e10242e94393a970004ee563d57ea555", "author": {"user": {"login": "iverase", "name": "Ignacio Vera"}}, "url": "https://github.com/elastic/elasticsearch/commit/aa1a12e5e10242e94393a970004ee563d57ea555", "committedDate": "2020-07-06T07:29:33Z", "message": "Adds support for orientation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQzNDE1OTY3", "url": "https://github.com/elastic/elasticsearch/pull/59020#pullrequestreview-443415967", "createdAt": "2020-07-06T21:22:18Z", "commit": {"oid": "aa1a12e5e10242e94393a970004ee563d57ea555"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNlQyMToyMjoxOFrOGtnh5g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNlQyMToyMjoxOFrOGtnh5g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDQ4Njc1OA==", "bodyText": "should we add a non-point geometry here as well?", "url": "https://github.com/elastic/elasticsearch/pull/59020#discussion_r450486758", "createdAt": "2020-07-06T21:22:18Z", "author": {"login": "talevy"}, "path": "server/src/test/java/org/elasticsearch/common/geo/GeometryParserTests.java", "diffHunk": "@@ -173,4 +178,24 @@ public void testUnsupportedValueParsing() throws Exception {\n             assertEquals(\"shape must be an object consisting of type and coordinates\", ex.getMessage());\n         }\n     }\n+\n+    public void testBasics() {\n+        GeometryParser parser = new GeometryParser(true, randomBoolean(), randomBoolean());\n+        Point expectedPoint = new Point(-122.084110, 37.386637);\n+        testBasics(parser, Map.of(\"lat\", 37.386637, \"lon\", -122.084110), expectedPoint);\n+        testBasics(parser, \"37.386637, -122.084110\", expectedPoint);\n+        testBasics(parser, \"POINT (-122.084110 37.386637)\", expectedPoint);\n+        testBasics(parser, Map.of(\"type\", \"Point\", \"coordinates\", List.of(-122.084110, 37.386637)), expectedPoint);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aa1a12e5e10242e94393a970004ee563d57ea555"}, "originalPosition": 29}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7fcc7cfb789b0e12c6db6de1149c0d0633ce6a71", "author": {"user": {"login": "iverase", "name": "Ignacio Vera"}}, "url": "https://github.com/elastic/elasticsearch/commit/7fcc7cfb789b0e12c6db6de1149c0d0633ce6a71", "committedDate": "2020-07-07T09:38:58Z", "message": "Add test for more complex geometries"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8b851ad868f045175567b342bdcac3b79d275d61", "author": {"user": {"login": "iverase", "name": "Ignacio Vera"}}, "url": "https://github.com/elastic/elasticsearch/commit/8b851ad868f045175567b342bdcac3b79d275d61", "committedDate": "2020-07-07T11:54:18Z", "message": "Merge branch 'master' into geoenrich"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3b80440d8e62904145e683a43bb20414d9f503dd", "author": {"user": {"login": "iverase", "name": "Ignacio Vera"}}, "url": "https://github.com/elastic/elasticsearch/commit/3b80440d8e62904145e683a43bb20414d9f503dd", "committedDate": "2020-07-07T12:13:14Z", "message": "more test"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2250, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}