{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc5NTg1MTc0", "number": 52763, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxMjoyODowOFrODlBk3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxMjozODozNFrODlBxHA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwMTQ5NzI1OnYy", "diffSide": "RIGHT", "path": "client/rest-high-level/src/main/java/org/elasticsearch/client/ml/dataframe/Classification.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxMjoyODowOFrOFxrUBg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxNTo0ODoyNVrOFxyuVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzYzNDE4Mg==", "bodyText": "Is there a reason for not adding it as the last param of the constructor (and possibly the members list above too)? If not, I think it'd be best to move it last as it would make it simpler for users of the client to address upon upgrading.", "url": "https://github.com/elastic/elasticsearch/pull/52763#discussion_r387634182", "createdAt": "2020-03-04T12:28:08Z", "author": {"login": "dimitris-athanasiou"}, "path": "client/rest-high-level/src/main/java/org/elasticsearch/client/ml/dataframe/Classification.java", "diffHunk": "@@ -92,13 +102,15 @@ public static Builder builder(String dependentVariable) {\n     private final Integer numTopFeatureImportanceValues;\n     private final String predictionFieldName;\n     private final Double trainingPercent;\n+    private final ClassAssignmentObjective classAssignmentObjective;\n     private final Integer numTopClasses;\n     private final Long randomizeSeed;\n \n     private Classification(String dependentVariable, @Nullable Double lambda, @Nullable Double gamma, @Nullable Double eta,\n                            @Nullable Integer maximumNumberTrees, @Nullable Double featureBagFraction,\n                            @Nullable Integer numTopFeatureImportanceValues, @Nullable String predictionFieldName,\n-                           @Nullable Double trainingPercent, @Nullable Integer numTopClasses, @Nullable Long randomizeSeed) {\n+                           @Nullable Double trainingPercent, @Nullable ClassAssignmentObjective classAssignmentObjective,\n+                           @Nullable Integer numTopClasses, @Nullable Long randomizeSeed) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d8c4a770263ccee17a66e38d751441ee6024a53d"}, "originalPosition": 59}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzY2NTc5Mw==", "bodyText": "No good point.", "url": "https://github.com/elastic/elasticsearch/pull/52763#discussion_r387665793", "createdAt": "2020-03-04T13:29:30Z", "author": {"login": "tveasey"}, "path": "client/rest-high-level/src/main/java/org/elasticsearch/client/ml/dataframe/Classification.java", "diffHunk": "@@ -92,13 +102,15 @@ public static Builder builder(String dependentVariable) {\n     private final Integer numTopFeatureImportanceValues;\n     private final String predictionFieldName;\n     private final Double trainingPercent;\n+    private final ClassAssignmentObjective classAssignmentObjective;\n     private final Integer numTopClasses;\n     private final Long randomizeSeed;\n \n     private Classification(String dependentVariable, @Nullable Double lambda, @Nullable Double gamma, @Nullable Double eta,\n                            @Nullable Integer maximumNumberTrees, @Nullable Double featureBagFraction,\n                            @Nullable Integer numTopFeatureImportanceValues, @Nullable String predictionFieldName,\n-                           @Nullable Double trainingPercent, @Nullable Integer numTopClasses, @Nullable Long randomizeSeed) {\n+                           @Nullable Double trainingPercent, @Nullable ClassAssignmentObjective classAssignmentObjective,\n+                           @Nullable Integer numTopClasses, @Nullable Long randomizeSeed) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzYzNDE4Mg=="}, "originalCommit": {"oid": "d8c4a770263ccee17a66e38d751441ee6024a53d"}, "originalPosition": 59}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzc1NTYwNg==", "bodyText": "4e0ded7", "url": "https://github.com/elastic/elasticsearch/pull/52763#discussion_r387755606", "createdAt": "2020-03-04T15:48:25Z", "author": {"login": "tveasey"}, "path": "client/rest-high-level/src/main/java/org/elasticsearch/client/ml/dataframe/Classification.java", "diffHunk": "@@ -92,13 +102,15 @@ public static Builder builder(String dependentVariable) {\n     private final Integer numTopFeatureImportanceValues;\n     private final String predictionFieldName;\n     private final Double trainingPercent;\n+    private final ClassAssignmentObjective classAssignmentObjective;\n     private final Integer numTopClasses;\n     private final Long randomizeSeed;\n \n     private Classification(String dependentVariable, @Nullable Double lambda, @Nullable Double gamma, @Nullable Double eta,\n                            @Nullable Integer maximumNumberTrees, @Nullable Double featureBagFraction,\n                            @Nullable Integer numTopFeatureImportanceValues, @Nullable String predictionFieldName,\n-                           @Nullable Double trainingPercent, @Nullable Integer numTopClasses, @Nullable Long randomizeSeed) {\n+                           @Nullable Double trainingPercent, @Nullable ClassAssignmentObjective classAssignmentObjective,\n+                           @Nullable Integer numTopClasses, @Nullable Long randomizeSeed) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzYzNDE4Mg=="}, "originalCommit": {"oid": "d8c4a770263ccee17a66e38d751441ee6024a53d"}, "originalPosition": 59}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwMTUxNDE1OnYy", "diffSide": "RIGHT", "path": "client/rest-high-level/src/test/java/org/elasticsearch/client/MachineLearningIT.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxMjozMzo0OFrOFxrekA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxNDoxMTo1M1rOFxuukA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzYzNjg4MA==", "bodyText": "Do we need the qualification here?", "url": "https://github.com/elastic/elasticsearch/pull/52763#discussion_r387636880", "createdAt": "2020-03-04T12:33:48Z", "author": {"login": "dimitris-athanasiou"}, "path": "client/rest-high-level/src/test/java/org/elasticsearch/client/MachineLearningIT.java", "diffHunk": "@@ -1336,6 +1336,8 @@ public void testPutDataFrameAnalyticsConfig_GivenClassification() throws Excepti\n                 .setPredictionFieldName(\"my_dependent_variable_prediction\")\n                 .setTrainingPercent(80.0)\n                 .setRandomizeSeed(42L)\n+                .setClassAssignmentObjective(\n+                    org.elasticsearch.client.ml.dataframe.Classification.ClassAssignmentObjective.MAXIMIZE_ACCURACY)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d8c4a770263ccee17a66e38d751441ee6024a53d"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzY2NDQ1MQ==", "bodyText": "Unfortunately, yes. I tried importing but it created a name clash.", "url": "https://github.com/elastic/elasticsearch/pull/52763#discussion_r387664451", "createdAt": "2020-03-04T13:27:02Z", "author": {"login": "tveasey"}, "path": "client/rest-high-level/src/test/java/org/elasticsearch/client/MachineLearningIT.java", "diffHunk": "@@ -1336,6 +1336,8 @@ public void testPutDataFrameAnalyticsConfig_GivenClassification() throws Excepti\n                 .setPredictionFieldName(\"my_dependent_variable_prediction\")\n                 .setTrainingPercent(80.0)\n                 .setRandomizeSeed(42L)\n+                .setClassAssignmentObjective(\n+                    org.elasticsearch.client.ml.dataframe.Classification.ClassAssignmentObjective.MAXIMIZE_ACCURACY)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzYzNjg4MA=="}, "originalCommit": {"oid": "d8c4a770263ccee17a66e38d751441ee6024a53d"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzY5MDEyOA==", "bodyText": "It clashes with evaluation. Fair enough!", "url": "https://github.com/elastic/elasticsearch/pull/52763#discussion_r387690128", "createdAt": "2020-03-04T14:11:53Z", "author": {"login": "dimitris-athanasiou"}, "path": "client/rest-high-level/src/test/java/org/elasticsearch/client/MachineLearningIT.java", "diffHunk": "@@ -1336,6 +1336,8 @@ public void testPutDataFrameAnalyticsConfig_GivenClassification() throws Excepti\n                 .setPredictionFieldName(\"my_dependent_variable_prediction\")\n                 .setTrainingPercent(80.0)\n                 .setRandomizeSeed(42L)\n+                .setClassAssignmentObjective(\n+                    org.elasticsearch.client.ml.dataframe.Classification.ClassAssignmentObjective.MAXIMIZE_ACCURACY)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzYzNjg4MA=="}, "originalCommit": {"oid": "d8c4a770263ccee17a66e38d751441ee6024a53d"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwMTUxODY1OnYy", "diffSide": "RIGHT", "path": "docs/reference/ml/ml-shared.asciidoc", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxMjozNToyM1rOFxrhZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxNDoyNjoxMlrOFxvSbQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzYzNzYwNA==", "bodyText": "Could we wrap the enum values in \"`\" here?", "url": "https://github.com/elastic/elasticsearch/pull/52763#discussion_r387637604", "createdAt": "2020-03-04T12:35:23Z", "author": {"login": "dimitris-athanasiou"}, "path": "docs/reference/ml/ml-shared.asciidoc", "diffHunk": "@@ -284,6 +283,14 @@ include::{docdir}/ml/ml-shared.asciidoc[tag=mode]\n include::{docdir}/ml/ml-shared.asciidoc[tag=time-span]\n end::chunking-config[]\n \n+tag::class-assignment-objective[]\n+Defines the objective to optimize when assigning class labels. Available\n+objectives are maximize_accuracy and maximize_minimum_recall. When maximizing", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d8c4a770263ccee17a66e38d751441ee6024a53d"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzY5OTMwOQ==", "bodyText": "854fdf7", "url": "https://github.com/elastic/elasticsearch/pull/52763#discussion_r387699309", "createdAt": "2020-03-04T14:26:12Z", "author": {"login": "tveasey"}, "path": "docs/reference/ml/ml-shared.asciidoc", "diffHunk": "@@ -284,6 +283,14 @@ include::{docdir}/ml/ml-shared.asciidoc[tag=mode]\n include::{docdir}/ml/ml-shared.asciidoc[tag=time-span]\n end::chunking-config[]\n \n+tag::class-assignment-objective[]\n+Defines the objective to optimize when assigning class labels. Available\n+objectives are maximize_accuracy and maximize_minimum_recall. When maximizing", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzYzNzYwNA=="}, "originalCommit": {"oid": "d8c4a770263ccee17a66e38d751441ee6024a53d"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwMTUyMjIyOnYy", "diffSide": "RIGHT", "path": "docs/reference/ml/ml-shared.asciidoc", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxMjozNjozNlrOFxrjig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxNDoyNDowMVrOFxvMUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzYzODE1NA==", "bodyText": "I think we have to go with chosen", "url": "https://github.com/elastic/elasticsearch/pull/52763#discussion_r387638154", "createdAt": "2020-03-04T12:36:36Z", "author": {"login": "dimitris-athanasiou"}, "path": "docs/reference/ml/ml-shared.asciidoc", "diffHunk": "@@ -284,6 +283,14 @@ include::{docdir}/ml/ml-shared.asciidoc[tag=mode]\n include::{docdir}/ml/ml-shared.asciidoc[tag=time-span]\n end::chunking-config[]\n \n+tag::class-assignment-objective[]\n+Defines the objective to optimize when assigning class labels. Available\n+objectives are maximize_accuracy and maximize_minimum_recall. When maximizing\n+accuracy class labels are choosen to maximize the number of correct predictions.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d8c4a770263ccee17a66e38d751441ee6024a53d"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzY2NTExMQ==", "bodyText": "typo", "url": "https://github.com/elastic/elasticsearch/pull/52763#discussion_r387665111", "createdAt": "2020-03-04T13:28:17Z", "author": {"login": "tveasey"}, "path": "docs/reference/ml/ml-shared.asciidoc", "diffHunk": "@@ -284,6 +283,14 @@ include::{docdir}/ml/ml-shared.asciidoc[tag=mode]\n include::{docdir}/ml/ml-shared.asciidoc[tag=time-span]\n end::chunking-config[]\n \n+tag::class-assignment-objective[]\n+Defines the objective to optimize when assigning class labels. Available\n+objectives are maximize_accuracy and maximize_minimum_recall. When maximizing\n+accuracy class labels are choosen to maximize the number of correct predictions.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzYzODE1NA=="}, "originalCommit": {"oid": "d8c4a770263ccee17a66e38d751441ee6024a53d"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzY5Nzc0NQ==", "bodyText": "beaf060", "url": "https://github.com/elastic/elasticsearch/pull/52763#discussion_r387697745", "createdAt": "2020-03-04T14:24:01Z", "author": {"login": "tveasey"}, "path": "docs/reference/ml/ml-shared.asciidoc", "diffHunk": "@@ -284,6 +283,14 @@ include::{docdir}/ml/ml-shared.asciidoc[tag=mode]\n include::{docdir}/ml/ml-shared.asciidoc[tag=time-span]\n end::chunking-config[]\n \n+tag::class-assignment-objective[]\n+Defines the objective to optimize when assigning class labels. Available\n+objectives are maximize_accuracy and maximize_minimum_recall. When maximizing\n+accuracy class labels are choosen to maximize the number of correct predictions.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzYzODE1NA=="}, "originalCommit": {"oid": "d8c4a770263ccee17a66e38d751441ee6024a53d"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwMTUyNDU5OnYy", "diffSide": "RIGHT", "path": "docs/reference/ml/ml-shared.asciidoc", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxMjozNzoxMVrOFxrk4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxNDoyNDoyMVrOFxvNPQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzYzODQ5OQ==", "bodyText": "ditto", "url": "https://github.com/elastic/elasticsearch/pull/52763#discussion_r387638499", "createdAt": "2020-03-04T12:37:11Z", "author": {"login": "dimitris-athanasiou"}, "path": "docs/reference/ml/ml-shared.asciidoc", "diffHunk": "@@ -284,6 +283,14 @@ include::{docdir}/ml/ml-shared.asciidoc[tag=mode]\n include::{docdir}/ml/ml-shared.asciidoc[tag=time-span]\n end::chunking-config[]\n \n+tag::class-assignment-objective[]\n+Defines the objective to optimize when assigning class labels. Available\n+objectives are maximize_accuracy and maximize_minimum_recall. When maximizing\n+accuracy class labels are choosen to maximize the number of correct predictions.\n+When maximizing minimum recall labels are choosen to maximize the minimum recall", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d8c4a770263ccee17a66e38d751441ee6024a53d"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzY5Nzk4MQ==", "bodyText": "beaf060", "url": "https://github.com/elastic/elasticsearch/pull/52763#discussion_r387697981", "createdAt": "2020-03-04T14:24:21Z", "author": {"login": "tveasey"}, "path": "docs/reference/ml/ml-shared.asciidoc", "diffHunk": "@@ -284,6 +283,14 @@ include::{docdir}/ml/ml-shared.asciidoc[tag=mode]\n include::{docdir}/ml/ml-shared.asciidoc[tag=time-span]\n end::chunking-config[]\n \n+tag::class-assignment-objective[]\n+Defines the objective to optimize when assigning class labels. Available\n+objectives are maximize_accuracy and maximize_minimum_recall. When maximizing\n+accuracy class labels are choosen to maximize the number of correct predictions.\n+When maximizing minimum recall labels are choosen to maximize the minimum recall", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzYzODQ5OQ=="}, "originalCommit": {"oid": "d8c4a770263ccee17a66e38d751441ee6024a53d"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwMTUyODYwOnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/dataframe/analyses/Classification.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxMjozODozNFrOFxrnaw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxNTo1NDowMFrOFxy9dg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzYzOTE0Nw==", "bodyText": "Both this and the one in the write function will have to be changed to version 8.0.0 initially. We'll change them back to 7.7.0 after backporting to the 7.x branch.", "url": "https://github.com/elastic/elasticsearch/pull/52763#discussion_r387639147", "createdAt": "2020-03-04T12:38:34Z", "author": {"login": "dimitris-athanasiou"}, "path": "x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/dataframe/analyses/Classification.java", "diffHunk": "@@ -108,19 +120,26 @@ public Classification(String dependentVariable,\n         this.dependentVariable = ExceptionsHelper.requireNonNull(dependentVariable, DEPENDENT_VARIABLE);\n         this.boostedTreeParams = ExceptionsHelper.requireNonNull(boostedTreeParams, BoostedTreeParams.NAME);\n         this.predictionFieldName = predictionFieldName == null ? dependentVariable + \"_prediction\" : predictionFieldName;\n+        this.classAssignmentObjective = classAssignmentObjective == null ?\n+            ClassAssignmentObjective.MAXIMIZE_MINIMUM_RECALL : classAssignmentObjective;\n         this.numTopClasses = numTopClasses == null ? DEFAULT_NUM_TOP_CLASSES : numTopClasses;\n         this.trainingPercent = trainingPercent == null ? 100.0 : trainingPercent;\n         this.randomizeSeed = randomizeSeed == null ? Randomness.get().nextLong() : randomizeSeed;\n     }\n \n     public Classification(String dependentVariable) {\n-        this(dependentVariable, BoostedTreeParams.builder().build(), null, null, null, null);\n+        this(dependentVariable, BoostedTreeParams.builder().build(), null, null, null, null, null);\n     }\n \n     public Classification(StreamInput in) throws IOException {\n         dependentVariable = in.readString();\n         boostedTreeParams = new BoostedTreeParams(in);\n         predictionFieldName = in.readOptionalString();\n+        if (in.getVersion().onOrAfter(Version.V_7_7_0)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d8c4a770263ccee17a66e38d751441ee6024a53d"}, "originalPosition": 83}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzY2NTU0OQ==", "bodyText": "Are right, for backwards compatibility tests?", "url": "https://github.com/elastic/elasticsearch/pull/52763#discussion_r387665549", "createdAt": "2020-03-04T13:29:05Z", "author": {"login": "tveasey"}, "path": "x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/dataframe/analyses/Classification.java", "diffHunk": "@@ -108,19 +120,26 @@ public Classification(String dependentVariable,\n         this.dependentVariable = ExceptionsHelper.requireNonNull(dependentVariable, DEPENDENT_VARIABLE);\n         this.boostedTreeParams = ExceptionsHelper.requireNonNull(boostedTreeParams, BoostedTreeParams.NAME);\n         this.predictionFieldName = predictionFieldName == null ? dependentVariable + \"_prediction\" : predictionFieldName;\n+        this.classAssignmentObjective = classAssignmentObjective == null ?\n+            ClassAssignmentObjective.MAXIMIZE_MINIMUM_RECALL : classAssignmentObjective;\n         this.numTopClasses = numTopClasses == null ? DEFAULT_NUM_TOP_CLASSES : numTopClasses;\n         this.trainingPercent = trainingPercent == null ? 100.0 : trainingPercent;\n         this.randomizeSeed = randomizeSeed == null ? Randomness.get().nextLong() : randomizeSeed;\n     }\n \n     public Classification(String dependentVariable) {\n-        this(dependentVariable, BoostedTreeParams.builder().build(), null, null, null, null);\n+        this(dependentVariable, BoostedTreeParams.builder().build(), null, null, null, null, null);\n     }\n \n     public Classification(StreamInput in) throws IOException {\n         dependentVariable = in.readString();\n         boostedTreeParams = new BoostedTreeParams(in);\n         predictionFieldName = in.readOptionalString();\n+        if (in.getVersion().onOrAfter(Version.V_7_7_0)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzYzOTE0Nw=="}, "originalCommit": {"oid": "d8c4a770263ccee17a66e38d751441ee6024a53d"}, "originalPosition": 83}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzY3NjU2MQ==", "bodyText": "Yes. In fact, it'd also be great to add the parameter in the classification BWC tests. I'll ping you to show you where they are.", "url": "https://github.com/elastic/elasticsearch/pull/52763#discussion_r387676561", "createdAt": "2020-03-04T13:48:55Z", "author": {"login": "dimitris-athanasiou"}, "path": "x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/dataframe/analyses/Classification.java", "diffHunk": "@@ -108,19 +120,26 @@ public Classification(String dependentVariable,\n         this.dependentVariable = ExceptionsHelper.requireNonNull(dependentVariable, DEPENDENT_VARIABLE);\n         this.boostedTreeParams = ExceptionsHelper.requireNonNull(boostedTreeParams, BoostedTreeParams.NAME);\n         this.predictionFieldName = predictionFieldName == null ? dependentVariable + \"_prediction\" : predictionFieldName;\n+        this.classAssignmentObjective = classAssignmentObjective == null ?\n+            ClassAssignmentObjective.MAXIMIZE_MINIMUM_RECALL : classAssignmentObjective;\n         this.numTopClasses = numTopClasses == null ? DEFAULT_NUM_TOP_CLASSES : numTopClasses;\n         this.trainingPercent = trainingPercent == null ? 100.0 : trainingPercent;\n         this.randomizeSeed = randomizeSeed == null ? Randomness.get().nextLong() : randomizeSeed;\n     }\n \n     public Classification(String dependentVariable) {\n-        this(dependentVariable, BoostedTreeParams.builder().build(), null, null, null, null);\n+        this(dependentVariable, BoostedTreeParams.builder().build(), null, null, null, null, null);\n     }\n \n     public Classification(StreamInput in) throws IOException {\n         dependentVariable = in.readString();\n         boostedTreeParams = new BoostedTreeParams(in);\n         predictionFieldName = in.readOptionalString();\n+        if (in.getVersion().onOrAfter(Version.V_7_7_0)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzYzOTE0Nw=="}, "originalCommit": {"oid": "d8c4a770263ccee17a66e38d751441ee6024a53d"}, "originalPosition": 83}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzc1OTQ3OA==", "bodyText": "I added the tests in d635bde and temporarily switched the version to 8.0 in a1b5e2b.", "url": "https://github.com/elastic/elasticsearch/pull/52763#discussion_r387759478", "createdAt": "2020-03-04T15:54:00Z", "author": {"login": "tveasey"}, "path": "x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/dataframe/analyses/Classification.java", "diffHunk": "@@ -108,19 +120,26 @@ public Classification(String dependentVariable,\n         this.dependentVariable = ExceptionsHelper.requireNonNull(dependentVariable, DEPENDENT_VARIABLE);\n         this.boostedTreeParams = ExceptionsHelper.requireNonNull(boostedTreeParams, BoostedTreeParams.NAME);\n         this.predictionFieldName = predictionFieldName == null ? dependentVariable + \"_prediction\" : predictionFieldName;\n+        this.classAssignmentObjective = classAssignmentObjective == null ?\n+            ClassAssignmentObjective.MAXIMIZE_MINIMUM_RECALL : classAssignmentObjective;\n         this.numTopClasses = numTopClasses == null ? DEFAULT_NUM_TOP_CLASSES : numTopClasses;\n         this.trainingPercent = trainingPercent == null ? 100.0 : trainingPercent;\n         this.randomizeSeed = randomizeSeed == null ? Randomness.get().nextLong() : randomizeSeed;\n     }\n \n     public Classification(String dependentVariable) {\n-        this(dependentVariable, BoostedTreeParams.builder().build(), null, null, null, null);\n+        this(dependentVariable, BoostedTreeParams.builder().build(), null, null, null, null, null);\n     }\n \n     public Classification(StreamInput in) throws IOException {\n         dependentVariable = in.readString();\n         boostedTreeParams = new BoostedTreeParams(in);\n         predictionFieldName = in.readOptionalString();\n+        if (in.getVersion().onOrAfter(Version.V_7_7_0)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzYzOTE0Nw=="}, "originalCommit": {"oid": "d8c4a770263ccee17a66e38d751441ee6024a53d"}, "originalPosition": 83}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3780, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}