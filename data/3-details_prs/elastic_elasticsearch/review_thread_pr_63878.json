{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA1OTM2MjY4", "number": 63878, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMzowMTozNFrOEvTWgQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMzowNDoxNVrOEvTang==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4MDM1NTg1OnYy", "diffSide": "LEFT", "path": "modules/parent-join/src/main/java/org/elasticsearch/join/mapper/ParentJoinFieldMapper.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMzowMTozNFrOHkNL6Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMzowNzozNFrOHkNaIw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzcyNjgyNQ==", "bodyText": "can you remind me why this goes away?", "url": "https://github.com/elastic/elasticsearch/pull/63878#discussion_r507726825", "createdAt": "2020-10-19T13:01:34Z", "author": {"login": "javanna"}, "path": "modules/parent-join/src/main/java/org/elasticsearch/join/mapper/ParentJoinFieldMapper.java", "diffHunk": "@@ -189,7 +160,6 @@ public String typeName() {\n \n         @Override\n         public IndexFieldData.Builder fielddataBuilder(String fullyQualifiedIndexName, Supplier<SearchLookup> searchLookup) {\n-            failIfNoDocValues();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1e9e6787b567c0abdf328ce25d0e9e97e04aa2a2"}, "originalPosition": 149}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzczMDQ2Nw==", "bodyText": "you can't disable docvalues on the field mapper, so this never fails", "url": "https://github.com/elastic/elasticsearch/pull/63878#discussion_r507730467", "createdAt": "2020-10-19T13:07:34Z", "author": {"login": "romseygeek"}, "path": "modules/parent-join/src/main/java/org/elasticsearch/join/mapper/ParentJoinFieldMapper.java", "diffHunk": "@@ -189,7 +160,6 @@ public String typeName() {\n \n         @Override\n         public IndexFieldData.Builder fielddataBuilder(String fullyQualifiedIndexName, Supplier<SearchLookup> searchLookup) {\n-            failIfNoDocValues();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzcyNjgyNQ=="}, "originalCommit": {"oid": "1e9e6787b567c0abdf328ce25d0e9e97e04aa2a2"}, "originalPosition": 149}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4MDM2MDM1OnYy", "diffSide": "RIGHT", "path": "modules/parent-join/src/main/java/org/elasticsearch/join/mapper/Relations.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMzowMjo0N1rOHkNOrQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMzowODo0NlrOHkNc5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzcyNzUzMw==", "bodyText": "does this need to be public?", "url": "https://github.com/elastic/elasticsearch/pull/63878#discussion_r507727533", "createdAt": "2020-10-19T13:02:47Z", "author": {"login": "javanna"}, "path": "modules/parent-join/src/main/java/org/elasticsearch/join/mapper/Relations.java", "diffHunk": "@@ -53,4 +61,20 @@ public int hashCode() {\n     public String toString() {\n         return parent + \"->\" + children;\n     }\n+\n+    public static List<Relations> parse(Object fieldNode) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1e9e6787b567c0abdf328ce25d0e9e97e04aa2a2"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzczMTE3NQ==", "bodyText": "It does not, I'll make it package-private.", "url": "https://github.com/elastic/elasticsearch/pull/63878#discussion_r507731175", "createdAt": "2020-10-19T13:08:46Z", "author": {"login": "romseygeek"}, "path": "modules/parent-join/src/main/java/org/elasticsearch/join/mapper/Relations.java", "diffHunk": "@@ -53,4 +61,20 @@ public int hashCode() {\n     public String toString() {\n         return parent + \"->\" + children;\n     }\n+\n+    public static List<Relations> parse(Object fieldNode) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzcyNzUzMw=="}, "originalCommit": {"oid": "1e9e6787b567c0abdf328ce25d0e9e97e04aa2a2"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4MDM2NjM4OnYy", "diffSide": "RIGHT", "path": "modules/parent-join/src/main/java/org/elasticsearch/join/mapper/MetaJoinFieldMapper.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMzowNDoxNVrOHkNSRA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMzowODozMVrOHkNcXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzcyODQ1Mg==", "bodyText": "I am missing why this needs to change", "url": "https://github.com/elastic/elasticsearch/pull/63878#discussion_r507728452", "createdAt": "2020-10-19T13:04:15Z", "author": {"login": "javanna"}, "path": "modules/parent-join/src/main/java/org/elasticsearch/join/mapper/MetaJoinFieldMapper.java", "diffHunk": "@@ -92,22 +62,17 @@ public String typeName() {\n \n         @Override\n         public IndexFieldData.Builder fielddataBuilder(String fullyQualifiedIndexName, Supplier<SearchLookup> searchLookup) {\n-            failIfNoDocValues();\n-            return new SortedSetOrdinalsIndexFieldData.Builder(name(), CoreValuesSourceType.BYTES);\n+            throw new UnsupportedOperationException(\"Cannot load field data for metadata field [\" + NAME + \"]\");\n         }\n \n         @Override\n         public ValueFetcher valueFetcher(MapperService mapperService, SearchLookup searchLookup, String format) {\n-            throw new UnsupportedOperationException(\"Cannot fetch values for metadata field [\" + typeName() + \"].\");\n+            throw new UnsupportedOperationException(\"Cannot fetch values for metadata field [\" + NAME + \"].\");\n         }\n \n         @Override\n         public Object valueForDisplay(Object value) {\n-            if (value == null) {\n-                return null;\n-            }\n-            BytesRef binaryValue = (BytesRef) value;\n-            return binaryValue.utf8ToString();\n+            throw new UnsupportedOperationException();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1e9e6787b567c0abdf328ce25d0e9e97e04aa2a2"}, "originalPosition": 87}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzczMTAzNw==", "bodyText": "It should never be called, as the mapper is just a placeholder for holding the Joiner.", "url": "https://github.com/elastic/elasticsearch/pull/63878#discussion_r507731037", "createdAt": "2020-10-19T13:08:31Z", "author": {"login": "romseygeek"}, "path": "modules/parent-join/src/main/java/org/elasticsearch/join/mapper/MetaJoinFieldMapper.java", "diffHunk": "@@ -92,22 +62,17 @@ public String typeName() {\n \n         @Override\n         public IndexFieldData.Builder fielddataBuilder(String fullyQualifiedIndexName, Supplier<SearchLookup> searchLookup) {\n-            failIfNoDocValues();\n-            return new SortedSetOrdinalsIndexFieldData.Builder(name(), CoreValuesSourceType.BYTES);\n+            throw new UnsupportedOperationException(\"Cannot load field data for metadata field [\" + NAME + \"]\");\n         }\n \n         @Override\n         public ValueFetcher valueFetcher(MapperService mapperService, SearchLookup searchLookup, String format) {\n-            throw new UnsupportedOperationException(\"Cannot fetch values for metadata field [\" + typeName() + \"].\");\n+            throw new UnsupportedOperationException(\"Cannot fetch values for metadata field [\" + NAME + \"].\");\n         }\n \n         @Override\n         public Object valueForDisplay(Object value) {\n-            if (value == null) {\n-                return null;\n-            }\n-            BytesRef binaryValue = (BytesRef) value;\n-            return binaryValue.utf8ToString();\n+            throw new UnsupportedOperationException();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzcyODQ1Mg=="}, "originalCommit": {"oid": "1e9e6787b567c0abdf328ce25d0e9e97e04aa2a2"}, "originalPosition": 87}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2842, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}